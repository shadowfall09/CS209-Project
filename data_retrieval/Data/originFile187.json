{"items":[{"tags":["java","http","jsp","http-headers","content-type"],"answers":[{"comments":[{"owner":{"account_id":279277,"reputation":2627,"user_id":574351,"accept_rate":78,"display_name":"Nicola Ambrosetti"},"score":0,"creation_date":1507531996,"post_id":10595831,"comment_id":80229965,"body_markdown":"The link is dead","body":"The link is dead"}],"tags":[],"owner":{"account_id":1344409,"reputation":9495,"user_id":1285418,"display_name":"Pau Kiat Wee"},"comment_count":1,"down_vote_count":0,"up_vote_count":71,"is_accepted":true,"score":71,"last_activity_date":1337066274,"creation_date":1337065959,"answer_id":10595831,"question_id":10595775,"body_markdown":"You can do via [Page directive][1].\r\n\r\nFor example:\r\n\r\n    &lt;%@ page language=&quot;java&quot; contentType=&quot;application/json; charset=UTF-8&quot;\r\n        pageEncoding=&quot;UTF-8&quot;%&gt;\r\n\r\n - contentType=&quot;mimeType [ ;charset=characterSet ]&quot; |\r\n   &quot;text/html;charset=ISO-8859-1&quot;\r\n\r\n&gt; The MIME type and character encoding the JSP file uses for the\r\n&gt; response it sends to the client. You can use any MIME type or\r\n&gt; character set that are valid for the JSP container. The default MIME\r\n&gt; type is text/html, and the default character set is ISO-8859-1.\r\n\r\n  [1]: http://java.sun.com/products/jsp/tags/11/syntaxref11.fm7.html","title":"Set Content-Type to application/json in jsp file","body":"<p>You can do via <a href=\"http://java.sun.com/products/jsp/tags/11/syntaxref11.fm7.html\">Page directive</a>.</p>\n\n<p>For example:</p>\n\n<pre><code>&lt;%@ page language=\"java\" contentType=\"application/json; charset=UTF-8\"\n    pageEncoding=\"UTF-8\"%&gt;\n</code></pre>\n\n<ul>\n<li>contentType=\"mimeType [ ;charset=characterSet ]\" |\n\"text/html;charset=ISO-8859-1\"</li>\n</ul>\n\n<blockquote>\n  <p>The MIME type and character encoding the JSP file uses for the\n  response it sends to the client. You can use any MIME type or\n  character set that are valid for the JSP container. The default MIME\n  type is text/html, and the default character set is ISO-8859-1.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":4722771,"reputation":557,"user_id":3820234,"display_name":"Karan"},"score":0,"creation_date":1433527887,"post_id":10595847,"comment_id":49408119,"body_markdown":"but this  throws exception like java.lang.IllegalStateException: getOutputStream() has already been called for this response","body":"but this  throws exception like java.lang.IllegalStateException: getOutputStream() has already been called for this response"},{"owner":{"account_id":108913,"reputation":18431,"user_id":288875,"accept_rate":50,"display_name":"Andre Holzner"},"score":0,"creation_date":1490104579,"post_id":10595847,"comment_id":72955749,"body_markdown":"make sure you do *not output any single character* to the client before calling `setContentType(..)` (otherwise the content type is already fixed before that). Especially pay attention to spaces or newlines after %&gt;, e.g. write move the closing %&gt; of the first line to the second line and start immediately with the next &lt;% immediately after it etc.","body":"make sure you do <i>not output any single character</i> to the client before calling <code>setContentType(..)</code> (otherwise the content type is already fixed before that). Especially pay attention to spaces or newlines after %&gt;, e.g. write move the closing %&gt; of the first line to the second line and start immediately with the next &lt;% immediately after it etc."}],"tags":[],"owner":{"account_id":1031744,"reputation":27054,"user_id":1039952,"accept_rate":81,"display_name":"Petr Mensik"},"comment_count":2,"down_vote_count":1,"up_vote_count":13,"is_accepted":false,"score":12,"last_activity_date":1356717188,"creation_date":1337066038,"answer_id":10595847,"question_id":10595775,"body_markdown":"Try this piece of code, it should work too\r\n\r\n    &lt;%\r\n        //response.setContentType(&quot;Content-Type&quot;, &quot;application/json&quot;); // this will fail compilation\r\n        response.setContentType(&quot;application/json&quot;); //fixed\r\n    %&gt;","title":"Set Content-Type to application/json in jsp file","body":"<p>Try this piece of code, it should work too</p>\n\n<pre><code>&lt;%\n    //response.setContentType(\"Content-Type\", \"application/json\"); // this will fail compilation\n    response.setContentType(\"application/json\"); //fixed\n%&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6157617,"reputation":1206,"user_id":4800126,"accept_rate":80,"display_name":"Kainix"},"score":0,"creation_date":1461246453,"post_id":19532136,"comment_id":61120459,"body_markdown":"Thanks, I was searching for something like this","body":"Thanks, I was searching for something like this"}],"tags":[],"owner":{"account_id":1452464,"reputation":494,"user_id":1368972,"display_name":"Gael"},"comment_count":1,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1694659683,"creation_date":1382498151,"answer_id":19532136,"question_id":10595775,"body_markdown":"@Petr Mensik &amp; kensen john\r\n\r\nThanks, I could not used the page directive because I have to set a different content type according to some URL parameter. I will paste my code here since it&#39;s something quite common with JSON:\r\n\r\n        &lt;%\r\n        \tString callback = request.getParameter(&quot;callback&quot;);\r\n        \tresponse.setCharacterEncoding(&quot;UTF-8&quot;);\r\n        \tif (callback != null) {\r\n        \t\t// Equivalent to: &lt;@page contentType=&quot;text/javascript&quot; pageEncoding=&quot;UTF-8&quot;&gt;\r\n        \t\tresponse.setContentType(&quot;text/javascript&quot;);\r\n        \t} else {\r\n        \t\t// Equivalent to: &lt;@page contentType=&quot;application/json&quot; pageEncoding=&quot;UTF-8&quot;&gt;\r\n        \t\tresponse.setContentType(&quot;application/json&quot;);\r\n        \t}\r\n        \r\n        \t[...]\r\n        \r\n        \tString output = &quot;&quot;;\r\n        \r\n        \tif (callback != null) {\r\n        \t\t// IMPORTANT! Sanitise the &quot;callback&quot;,\r\n        \t\t// do not use user input directly in the response!\r\n        \t\t// This is vulnerable to XSS attacks.\r\n        \t\toutput += callback + &quot;(&quot;;\r\n        \t}\r\n        \r\n        \toutput += jsonObj.toString();\r\n        \r\n        \tif (callback != null) {\r\n        \t\toutput += &quot;);&quot;;\r\n        \t}\r\n        %&gt;\r\n        &lt;%=output %&gt;\r\n\r\nWhen callback is supplied, returns:\r\n\r\n        callback({...JSON stuff...});\r\n\r\nwith content-type &quot;text/javascript&quot;\r\n\r\nWhen callback is NOT supplied, returns:\r\n\r\n        {...JSON stuff...}\r\n\r\nwith content-type &quot;application/json&quot;\r\n\r\n[EDIT] I&#39;m reviewing my old post. If you use this solution, please sanitise your input! It&#39;s dangerous to put user input string directly in the response.","title":"Set Content-Type to application/json in jsp file","body":"<p>@Petr Mensik &amp; kensen john</p>\n<p>Thanks, I could not used the page directive because I have to set a different content type according to some URL parameter. I will paste my code here since it's something quite common with JSON:</p>\n<pre><code>    &lt;%\n        String callback = request.getParameter(&quot;callback&quot;);\n        response.setCharacterEncoding(&quot;UTF-8&quot;);\n        if (callback != null) {\n            // Equivalent to: &lt;@page contentType=&quot;text/javascript&quot; pageEncoding=&quot;UTF-8&quot;&gt;\n            response.setContentType(&quot;text/javascript&quot;);\n        } else {\n            // Equivalent to: &lt;@page contentType=&quot;application/json&quot; pageEncoding=&quot;UTF-8&quot;&gt;\n            response.setContentType(&quot;application/json&quot;);\n        }\n    \n        [...]\n    \n        String output = &quot;&quot;;\n    \n        if (callback != null) {\n            // IMPORTANT! Sanitise the &quot;callback&quot;,\n            // do not use user input directly in the response!\n            // This is vulnerable to XSS attacks.\n            output += callback + &quot;(&quot;;\n        }\n    \n        output += jsonObj.toString();\n    \n        if (callback != null) {\n            output += &quot;);&quot;;\n        }\n    %&gt;\n    &lt;%=output %&gt;\n</code></pre>\n<p>When callback is supplied, returns:</p>\n<pre><code>    callback({...JSON stuff...});\n</code></pre>\n<p>with content-type &quot;text/javascript&quot;</p>\n<p>When callback is NOT supplied, returns:</p>\n<pre><code>    {...JSON stuff...}\n</code></pre>\n<p>with content-type &quot;application/json&quot;</p>\n<p>[EDIT] I'm reviewing my old post. If you use this solution, please sanitise your input! It's dangerous to put user input string directly in the response.</p>\n"}],"owner":{"account_id":453634,"reputation":5782,"user_id":850737,"accept_rate":86,"display_name":"Julias"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":124424,"favorite_count":0,"down_vote_count":0,"up_vote_count":39,"accepted_answer_id":10595831,"answer_count":3,"score":39,"last_activity_date":1694659683,"creation_date":1337065677,"question_id":10595775,"body_markdown":"I am created some jsp file that returns as a response some json string. But I see that the Content-Type is set to txt automatically\r\n\r\nMy jsp code looks like \r\n\r\n    &lt;%@ page import=&quot;java.util.Random&quot; %&gt;\r\n    &lt;%@ page language=&quot;java&quot; %&gt;\r\n    &lt;%@ page session=&quot;false&quot; %&gt;\r\n\r\n    &lt;%\r\n      String retVal = &quot;// some json string&quot;;\r\n\r\n         int millis = new Random().nextInt(1000);\r\n         //    System.out.println(&quot;sleeping for &quot; + millis + &quot; millis&quot;);\r\n         Thread.sleep(millis);\r\n    %&gt;\r\n    &lt;%=retVal%&gt;\r\n\r\nHow can I perform something like \r\n\r\n    setHeader(&quot;Content-Type&quot;, &quot;application/json&quot;);\r\n\r\nin this example?","title":"Set Content-Type to application/json in jsp file","body":"<p>I am created some jsp file that returns as a response some json string. But I see that the Content-Type is set to txt automatically</p>\n\n<p>My jsp code looks like </p>\n\n<pre><code>&lt;%@ page import=\"java.util.Random\" %&gt;\n&lt;%@ page language=\"java\" %&gt;\n&lt;%@ page session=\"false\" %&gt;\n\n&lt;%\n  String retVal = \"// some json string\";\n\n     int millis = new Random().nextInt(1000);\n     //    System.out.println(\"sleeping for \" + millis + \" millis\");\n     Thread.sleep(millis);\n%&gt;\n&lt;%=retVal%&gt;\n</code></pre>\n\n<p>How can I perform something like </p>\n\n<pre><code>setHeader(\"Content-Type\", \"application/json\");\n</code></pre>\n\n<p>in this example?</p>\n"},{"tags":["java","jms","activemq-artemis"],"answers":[{"comments":[{"owner":{"account_id":28568876,"reputation":127,"user_id":21871375,"display_name":"Vanish"},"score":0,"creation_date":1694634793,"post_id":77099467,"comment_id":135918691,"body_markdown":"What do you mean by portability? I won&#39;t be able to use this application on ActiveMQ itself or on other resources that use JMS? If I only need ActiveMQ Artemis, will it work for me?","body":"What do you mean by portability? I won&#39;t be able to use this application on ActiveMQ itself or on other resources that use JMS? If I only need ActiveMQ Artemis, will it work for me?"},{"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1694635582,"post_id":77099467,"comment_id":135918820,"body_markdown":"I updated my answer to address your comment. Hope that helps!","body":"I updated my answer to address your comment. Hope that helps!"}],"tags":[],"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1694658899,"creation_date":1694628013,"answer_id":77099467,"question_id":77099210,"body_markdown":"There is no way to get the ActiveMQ Artemis &quot;persistentSize&quot; value from a JMS `Message` using the JMS API. This property is not part of JMS. It is specific to ActiveMQ Artemis.\r\n\r\nThat said, you can simply look at the message itself to determine how large it is. For example, if the message was a `TextMessage` then you could use the [`getText()`][1] method to get the `String` body and then use the `length()` method to see how long it is. If the message was a `BytesMessage` you could just use the [`getBodyLength()`][2] method.\r\n\r\nIf you *really* wanted to get the &quot;persistentSize&quot; and you were using the core JMS client shipped with ActiveMQ Artemis then you&#39;d have to cast the JMS `Message` to the ActiveMQ Artemis implementation object `org.apache.activemq.artemis.jms.client.ActiveMQMessage` and use the `getCoreMessage` method to get the `org.apache.activemq.artemis.api.core.client.ClientMessage` and then invoke `getPersistentSize()`. \r\n\r\nThis, of course, is **not recommended** as it would destroy the portability of your application which is one of the main benefits of using an API like JMS in the first place. In short, you could never use this code with any other JMS client implementation or any JMS other broker implementation and since it&#39;s considered internal then it is subject to break without notice during an upgrade.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javaee/7/api/javax/jms/TextMessage.html#getText--\r\n  [2]: https://docs.oracle.com/javaee/7/api/javax/jms/BytesMessage.html#getBodyLength--","title":"How do I get persistentSize in ActiveMQ Artemis queue via JMS?","body":"<p>There is no way to get the ActiveMQ Artemis &quot;persistentSize&quot; value from a JMS <code>Message</code> using the JMS API. This property is not part of JMS. It is specific to ActiveMQ Artemis.</p>\n<p>That said, you can simply look at the message itself to determine how large it is. For example, if the message was a <code>TextMessage</code> then you could use the <a href=\"https://docs.oracle.com/javaee/7/api/javax/jms/TextMessage.html#getText--\" rel=\"nofollow noreferrer\"><code>getText()</code></a> method to get the <code>String</code> body and then use the <code>length()</code> method to see how long it is. If the message was a <code>BytesMessage</code> you could just use the <a href=\"https://docs.oracle.com/javaee/7/api/javax/jms/BytesMessage.html#getBodyLength--\" rel=\"nofollow noreferrer\"><code>getBodyLength()</code></a> method.</p>\n<p>If you <em>really</em> wanted to get the &quot;persistentSize&quot; and you were using the core JMS client shipped with ActiveMQ Artemis then you'd have to cast the JMS <code>Message</code> to the ActiveMQ Artemis implementation object <code>org.apache.activemq.artemis.jms.client.ActiveMQMessage</code> and use the <code>getCoreMessage</code> method to get the <code>org.apache.activemq.artemis.api.core.client.ClientMessage</code> and then invoke <code>getPersistentSize()</code>.</p>\n<p>This, of course, is <strong>not recommended</strong> as it would destroy the portability of your application which is one of the main benefits of using an API like JMS in the first place. In short, you could never use this code with any other JMS client implementation or any JMS other broker implementation and since it's considered internal then it is subject to break without notice during an upgrade.</p>\n"}],"owner":{"account_id":28568876,"reputation":127,"user_id":21871375,"display_name":"Vanish"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77099467,"answer_count":1,"score":0,"last_activity_date":1694658899,"creation_date":1694625311,"question_id":77099210,"body_markdown":"I can&#39;t figure out how to get persistentSize in an Artemis ActiveMQ queue using JMS. I didn&#39;t find any get method in the Message class. There are different methods for getting message ID, lifetime and others, but I didn’t find any for getting persistentSize\r\n[![enter image description here](https://i.stack.imgur.com/kiO0g.png)](https://i.stack.imgur.com/kiO0g.png)","title":"How do I get persistentSize in ActiveMQ Artemis queue via JMS?","body":"<p>I can't figure out how to get persistentSize in an Artemis ActiveMQ queue using JMS. I didn't find any get method in the Message class. There are different methods for getting message ID, lifetime and others, but I didn’t find any for getting persistentSize\n<a href=\"https://i.stack.imgur.com/kiO0g.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kiO0g.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","javafx","fxml","scenebuilder","fxmlloader"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":5,"creation_date":1694658654,"post_id":77101415,"comment_id":135921271,"body_markdown":"Instead of src/main/java/com/example/javapoker/Graphics/GUI.fxml, try placing it in src/main/resources/com/example/javapoker/Graphics/GUI.fxml (that is, change `java` to `resources` in the file path).  I’m assuming your project is a Maven project based on the use of src/main/java.","body":"Instead of src/main/java/com/example/javapoker/Graphics/GUI.fxml, try placing it in src/main/resources/com/example/javapoker/Graphics/GUI.fxml (that is, change <code>java</code> to <code>resources</code> in the file path).  I’m assuming your project is a Maven project based on the use of src/main/java."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":4,"creation_date":1694660306,"post_id":77101415,"comment_id":135921388,"body_markdown":"The troubleshooting steps for you to follow are in the [duplicate: How do I determine the correct path for FXML files, CSS files, Images, and other resources needed by my JavaFX Application?](https://stackoverflow.com/questions/61531317/how-do-i-determine-the-correct-path-for-fxml-files-css-files-images-and-other).","body":"The troubleshooting steps for you to follow are in the <a href=\"https://stackoverflow.com/questions/61531317/how-do-i-determine-the-correct-path-for-fxml-files-css-files-images-and-other\">duplicate: How do I determine the correct path for FXML files, CSS files, Images, and other resources needed by my JavaFX Application?</a>."},{"owner":{"account_id":23388215,"reputation":1,"user_id":17453200,"display_name":"Bogger"},"score":0,"creation_date":1694719032,"post_id":77101415,"comment_id":135931972,"body_markdown":"Hello, one more thing... I do not have a resource folder. Is there a way to successfully access the fxml file with using a resource folder?","body":"Hello, one more thing... I do not have a resource folder. Is there a way to successfully access the fxml file with using a resource folder?"},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1694754795,"post_id":77101415,"comment_id":135935421,"body_markdown":"A resource folder is only for build structure and common project layouts, e.g. the recommended [maven standard layout](https://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html).  Build tools (like maven, gradle or an ide), copy the resources from there by default and place them in the target build directory, usually packaging up the app, into a jar or jlink image.  Once the resources are copied out of the resource directory and placed in the target directory they are no longer in a separate resource directory but in the same directory as the class files.","body":"A resource folder is only for build structure and common project layouts, e.g. the recommended <a href=\"https://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html\" rel=\"nofollow noreferrer\">maven standard layout</a>.  Build tools (like maven, gradle or an ide), copy the resources from there by default and place them in the target build directory, usually packaging up the app, into a jar or jlink image.  Once the resources are copied out of the resource directory and placed in the target directory they are no longer in a separate resource directory but in the same directory as the class files."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1694754973,"post_id":77101415,"comment_id":135935435,"body_markdown":"So, it is recommended you have a resource folder and put the resources in it, and use a build tool (maven or gradle to assemble your app), and then use getResource to get the resources from your code.  The build tool will take care of making sure in the resources end up in the right place so that the code can access them.  This is explained in the linked duplicate, as well as steps to take to troubleshoot when things go wrong.","body":"So, it is recommended you have a resource folder and put the resources in it, and use a build tool (maven or gradle to assemble your app), and then use getResource to get the resources from your code.  The build tool will take care of making sure in the resources end up in the right place so that the code can access them.  This is explained in the linked duplicate, as well as steps to take to troubleshoot when things go wrong."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1694755170,"post_id":77101415,"comment_id":135935463,"body_markdown":"An IDE like [idea](https://www.jetbrains.com/help/idea/new-project-wizard.html) will create a template project with everything setup in the right place.  Or [openjfx getting started](https://openjfx.io/openjfx-docs/) has instructions on setting things up in another environment (e.g. using maven archetypes or the openjfx sample projects).  In your case for instance, openjfx references a `javafx-archetype-fxml` for maven.","body":"An IDE like <a href=\"https://www.jetbrains.com/help/idea/new-project-wizard.html\" rel=\"nofollow noreferrer\">idea</a> will create a template project with everything setup in the right place.  Or <a href=\"https://openjfx.io/openjfx-docs/\" rel=\"nofollow noreferrer\">openjfx getting started</a> has instructions on setting things up in another environment (e.g. using maven archetypes or the openjfx sample projects).  In your case for instance, openjfx references a <code>javafx-archetype-fxml</code> for maven."}],"owner":{"account_id":23388215,"reputation":1,"user_id":17453200,"display_name":"Bogger"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694657914,"creation_date":1694657914,"question_id":77101415,"body_markdown":"I want to load a GUI using a fxml file. However after multiple attempts into fixing it, it keeps returning that the file is not found and/or that it is null. I have tried to place the file within my Graphics package but that does not work. Here is my path from my project: src/main/java/com/example/javapoker/Graphics/GUI.fxml.\r\n\r\nMy code: \r\n```\r\npackage com.example.javapoker.Graphics;\r\n\r\nimport javafx.application.Application;\r\nimport javafx.fxml.FXMLLoader;\r\nimport javafx.scene.Parent;\r\nimport javafx.scene.Scene;\r\nimport javafx.stage.Stage;\r\n\r\nimport java.io.IOException;\r\nimport java.net.URL;\r\n\r\npublic class Main extends Application {\r\n\r\n    public static void main(String[] args) {\r\n        launch(args);\r\n    }\r\n\r\n    @Override\r\n    public void start(Stage primaryStage) throws IOException {\r\n        // Load the FXML file using getResource() from the class loader\r\n        URL url = getClass().getResource(&quot;/com/example/javapoker/Graphics/GUI.fxml&quot;);\r\n        String classpath = System.getProperty(&quot;java.class.path&quot;);\r\n        System.out.println(&quot;Classpath: &quot; + classpath);\r\n\r\n        if (url != null) {\r\n            FXMLLoader loader = new FXMLLoader(url);\r\n            primaryStage.setScene(new Scene(loader.load(), 400, 400));\r\n            primaryStage.setTitle(&quot;Hello JavaFX&quot;);\r\n            primaryStage.show();\r\n        } else {\r\n            System.err.println(&quot;Resource &#39;GUI.fxml&#39; not found&quot;);\r\n        }\r\n    }\r\n\r\n}\r\n```\r\nHere is my stack trace error: \r\n```\r\nException in Application start method\r\njava.lang.reflect.InvocationTargetException\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:119)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:578)\r\n\tat javafx.graphics@20.0.1/com.sun.javafx.application.LauncherImpl.launchApplicationWithArgs(LauncherImpl.java:464)\r\n\tat javafx.graphics@20.0.1/com.sun.javafx.application.LauncherImpl.launchApplication(LauncherImpl.java:363)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:578)\r\n\tat java.base/sun.launcher.LauncherHelper$FXHelper.main(LauncherHelper.java:1081)\r\nCaused by: java.lang.RuntimeException: Exception in Application start method\r\n\tat javafx.graphics@20.0.1/com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:893)\r\n\tat javafx.graphics@20.0.1/com.sun.javafx.application.LauncherImpl.lambda$launchApplication$2(LauncherImpl.java:195)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1623)\r\nCaused by: java.lang.IllegalStateException: Location is not set.\r\n\tat javafx.fxml@20.0.1/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2556)\r\n\tat javafx.fxml@20.0.1/javafx.fxml.FXMLLoader.load(FXMLLoader.java:2531)\r\n\tat com.example.javapoker/com.example.javapoker.Graphics.Main.start(Main.java:25)\r\n\tat javafx.graphics@20.0.1/com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$9(LauncherImpl.java:839)\r\n\tat javafx.graphics@20.0.1/com.sun.javafx.application.PlatformImpl.lambda$runAndWait$12(PlatformImpl.java:483)\r\n\tat javafx.graphics@20.0.1/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:456)\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:400)\r\n\tat javafx.graphics@20.0.1/com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:455)\r\n\tat javafx.graphics@20.0.1/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)\r\n\tat javafx.graphics@20.0.1/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\r\n\tat javafx.graphics@20.0.1/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185)\r\n\t... 1 more\r\nException running application com.example.javapoker.Graphics.Main\r\n```\r\nNote: ignore the null conditions, I deleted the condition so it could give me the stack trace erors.","title":"FXML file is not being reached","body":"<p>I want to load a GUI using a fxml file. However after multiple attempts into fixing it, it keeps returning that the file is not found and/or that it is null. I have tried to place the file within my Graphics package but that does not work. Here is my path from my project: src/main/java/com/example/javapoker/Graphics/GUI.fxml.</p>\n<p>My code:</p>\n<pre><code>package com.example.javapoker.Graphics;\n\nimport javafx.application.Application;\nimport javafx.fxml.FXMLLoader;\nimport javafx.scene.Parent;\nimport javafx.scene.Scene;\nimport javafx.stage.Stage;\n\nimport java.io.IOException;\nimport java.net.URL;\n\npublic class Main extends Application {\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n\n    @Override\n    public void start(Stage primaryStage) throws IOException {\n        // Load the FXML file using getResource() from the class loader\n        URL url = getClass().getResource(&quot;/com/example/javapoker/Graphics/GUI.fxml&quot;);\n        String classpath = System.getProperty(&quot;java.class.path&quot;);\n        System.out.println(&quot;Classpath: &quot; + classpath);\n\n        if (url != null) {\n            FXMLLoader loader = new FXMLLoader(url);\n            primaryStage.setScene(new Scene(loader.load(), 400, 400));\n            primaryStage.setTitle(&quot;Hello JavaFX&quot;);\n            primaryStage.show();\n        } else {\n            System.err.println(&quot;Resource 'GUI.fxml' not found&quot;);\n        }\n    }\n\n}\n</code></pre>\n<p>Here is my stack trace error:</p>\n<pre><code>Exception in Application start method\njava.lang.reflect.InvocationTargetException\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:119)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:578)\n    at javafx.graphics@20.0.1/com.sun.javafx.application.LauncherImpl.launchApplicationWithArgs(LauncherImpl.java:464)\n    at javafx.graphics@20.0.1/com.sun.javafx.application.LauncherImpl.launchApplication(LauncherImpl.java:363)\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:578)\n    at java.base/sun.launcher.LauncherHelper$FXHelper.main(LauncherHelper.java:1081)\nCaused by: java.lang.RuntimeException: Exception in Application start method\n    at javafx.graphics@20.0.1/com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:893)\n    at javafx.graphics@20.0.1/com.sun.javafx.application.LauncherImpl.lambda$launchApplication$2(LauncherImpl.java:195)\n    at java.base/java.lang.Thread.run(Thread.java:1623)\nCaused by: java.lang.IllegalStateException: Location is not set.\n    at javafx.fxml@20.0.1/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2556)\n    at javafx.fxml@20.0.1/javafx.fxml.FXMLLoader.load(FXMLLoader.java:2531)\n    at com.example.javapoker/com.example.javapoker.Graphics.Main.start(Main.java:25)\n    at javafx.graphics@20.0.1/com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$9(LauncherImpl.java:839)\n    at javafx.graphics@20.0.1/com.sun.javafx.application.PlatformImpl.lambda$runAndWait$12(PlatformImpl.java:483)\n    at javafx.graphics@20.0.1/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:456)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)\n    at javafx.graphics@20.0.1/com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:455)\n    at javafx.graphics@20.0.1/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)\n    at javafx.graphics@20.0.1/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\n    at javafx.graphics@20.0.1/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185)\n    ... 1 more\nException running application com.example.javapoker.Graphics.Main\n</code></pre>\n<p>Note: ignore the null conditions, I deleted the condition so it could give me the stack trace erors.</p>\n"},{"tags":["java"],"answers":[{"comments":[{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1608315314,"post_id":27325827,"comment_id":115555089,"body_markdown":"If you want to be technical about it, your `Box` object should not be allowed to mutate once created (a real-world box doesn&#39;t change dimensions once created). Therefore, your objects should be immutable (no setter methods and parameters should be `final`)","body":"If you want to be technical about it, your <code>Box</code> object should not be allowed to mutate once created (a real-world box doesn&#39;t change dimensions once created). Therefore, your objects should be immutable (no setter methods and parameters should be <code>final</code>)"}],"tags":[],"owner":{"account_id":1221675,"reputation":4074,"user_id":1188208,"accept_rate":90,"display_name":"Luis Lavieri"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1417819538,"creation_date":1417819177,"answer_id":27325827,"question_id":27325803,"body_markdown":"You haven&#39;t declared those `doubles` in your constructor.\r\n\r\nit should be like this:\r\n\r\n    double l = 50.55;\r\n    double w = 40.99;\r\n    double h = 12.33;\r\n    Box boxOne = new Box(l, w, h);\r\n    ...\r\n\r\n**EDIT**:\r\n\r\nI just saw that you are trying to get the values from the `Scanner`.\r\n\r\nYou should first read them, store them in the variables, and then create a `new` instance of `Box`. Not the other way around.\r\n\r\nSo,\r\n\r\n    Scanner input = new Scanner(System.in);\r\n    System.out.print (&quot;Enter the dimension of your box:&quot;);\r\n    l= input.nextDouble();\r\n    w= input.nextDouble();\r\n    h= input.nextDouble();\r\n\r\n    Box boxOne = new Box(l, w, h);\r\n    ...","title":"how to call length, width, height, area, volume of a box from box class using boxTest","body":"<p>You haven't declared those <code>doubles</code> in your constructor.</p>\n\n<p>it should be like this:</p>\n\n<pre><code>double l = 50.55;\ndouble w = 40.99;\ndouble h = 12.33;\nBox boxOne = new Box(l, w, h);\n...\n</code></pre>\n\n<p><strong>EDIT</strong>:</p>\n\n<p>I just saw that you are trying to get the values from the <code>Scanner</code>.</p>\n\n<p>You should first read them, store them in the variables, and then create a <code>new</code> instance of <code>Box</code>. Not the other way around.</p>\n\n<p>So,</p>\n\n<pre><code>Scanner input = new Scanner(System.in);\nSystem.out.print (\"Enter the dimension of your box:\");\nl= input.nextDouble();\nw= input.nextDouble();\nh= input.nextDouble();\n\nBox boxOne = new Box(l, w, h);\n...\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5368723,"reputation":79,"user_id":4277827,"accept_rate":50,"display_name":"NumbNuts"},"score":0,"creation_date":1417822995,"post_id":27325852,"comment_id":43111960,"body_markdown":"I treid this method before, and I got 4 errors. one of the errors say **&quot;error: &#39;)&#39; expected. Box boxOne = new Box(length; width; height);&quot;** with arrpw pointing at &quot;l&quot; length, &quot;w&quot; width, &quot;h&quot; height. Another error is **&quot;&quot;error: &#39;;&#39; expected. Box boxOne = new Box(length; width; height);&quot;&quot;** with arrow pointing at &quot;)&quot;","body":"I treid this method before, and I got 4 errors. one of the errors say <b>&quot;error: &#39;)&#39; expected. Box boxOne = new Box(length; width; height);&quot;</b> with arrpw pointing at &quot;l&quot; length, &quot;w&quot; width, &quot;h&quot; height. Another error is <b>&quot;&quot;error: &#39;;&#39; expected. Box boxOne = new Box(length; width; height);&quot;&quot;</b> with arrow pointing at &quot;)&quot;"},{"owner":{"account_id":5385424,"reputation":73,"user_id":4289542,"display_name":"Konato_K"},"score":0,"creation_date":1417823355,"post_id":27325852,"comment_id":43112060,"body_markdown":"@NumbNuts because width, length and height do not exist in your main function, the ones you declare in your Box class can&#39;t be used from the main (and if you want to use those values always then don&#39;t pass parameters to the constructor)\n\nYou&#39;re declaring 3 variables with those names in your name AFTER you use them, you need to declare them before AND INITIALIZE THEM, if you don&#39;t set their values you can&#39;t use them\n\nAlternative I think something like `Box boxOne = new Box(1.0, 1.0, 1.0);` would be cleaner","body":"@NumbNuts because width, length and height do not exist in your main function, the ones you declare in your Box class can&#39;t be used from the main (and if you want to use those values always then don&#39;t pass parameters to the constructor)  You&#39;re declaring 3 variables with those names in your name AFTER you use them, you need to declare them before AND INITIALIZE THEM, if you don&#39;t set their values you can&#39;t use them  Alternative I think something like <code>Box boxOne = new Box(1.0, 1.0, 1.0);</code> would be cleaner"},{"owner":{"account_id":5368723,"reputation":79,"user_id":4277827,"accept_rate":50,"display_name":"NumbNuts"},"score":0,"creation_date":1417823861,"post_id":27325852,"comment_id":43112201,"body_markdown":"Sorry, I get even more confused. Well, I should&#39;ve post my complete requirements for the code. Let me just re-edit my problem. The reason why I don&#39;t want to edit my complete problem is I am not even half way done with my main code, because I got confused on how to set 4 objects of box into array, can go through each of them and find the length, width, height, area, and volume.","body":"Sorry, I get even more confused. Well, I should&#39;ve post my complete requirements for the code. Let me just re-edit my problem. The reason why I don&#39;t want to edit my complete problem is I am not even half way done with my main code, because I got confused on how to set 4 objects of box into array, can go through each of them and find the length, width, height, area, and volume."}],"tags":[],"owner":{"account_id":5385424,"reputation":73,"user_id":4289542,"display_name":"Konato_K"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1417819319,"creation_date":1417819319,"answer_id":27325852,"question_id":27325803,"body_markdown":"Because you do not use semicolons to separate parameters, use commands instead.\r\n\r\nAlso if you&#39;re passing a parameter you don&#39;t need to specific the type.\r\n\r\nTry using `Box boxOne = new Box(length, width, height);`","title":"how to call length, width, height, area, volume of a box from box class using boxTest","body":"<p>Because you do not use semicolons to separate parameters, use commands instead.</p>\n\n<p>Also if you're passing a parameter you don't need to specific the type.</p>\n\n<p>Try using <code>Box boxOne = new Box(length, width, height);</code></p>\n"},{"comments":[{"owner":{"account_id":5368723,"reputation":79,"user_id":4277827,"accept_rate":50,"display_name":"NumbNuts"},"score":0,"creation_date":1417825837,"post_id":27325879,"comment_id":43112715,"body_markdown":"thank you, I just re-edit my problem because seems too many answer that seems doesn&#39;t comply to the requirement. I apologize for that.","body":"thank you, I just re-edit my problem because seems too many answer that seems doesn&#39;t comply to the requirement. I apologize for that."},{"owner":{"account_id":2007859,"reputation":894,"user_id":1797200,"accept_rate":75,"display_name":"Chris"},"score":0,"creation_date":1417851843,"post_id":27325879,"comment_id":43117297,"body_markdown":"The task you are describing is not quite clear to me, because IMHO it does not make sense to declare an array of boxes, with 4 boxes in it and then afterwards go through the boxes and set the attributes. Sounds like the typical school question with no practical relevance ;-) Anyway - I&#39;ll try and edit my answer.","body":"The task you are describing is not quite clear to me, because IMHO it does not make sense to declare an array of boxes, with 4 boxes in it and then afterwards go through the boxes and set the attributes. Sounds like the typical school question with no practical relevance ;-) Anyway - I&#39;ll try and edit my answer."},{"owner":{"account_id":2007859,"reputation":894,"user_id":1797200,"accept_rate":75,"display_name":"Chris"},"score":0,"creation_date":1417857206,"post_id":27325879,"comment_id":43118262,"body_markdown":"Another thing as a comment: People here are often very unhappy with beginners questions, and you might not get answers. Try a forum like http://www.coderanch.com for beginners questions.","body":"Another thing as a comment: People here are often very unhappy with beginners questions, and you might not get answers. Try a forum like <a href=\"http://www.coderanch.com\" rel=\"nofollow noreferrer\">coderanch.com</a> for beginners questions."}],"tags":[],"owner":{"account_id":2007859,"reputation":894,"user_id":1797200,"accept_rate":75,"display_name":"Chris"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1417857058,"creation_date":1417819485,"answer_id":27325879,"question_id":27325803,"body_markdown":"See changes and comments in the code:\r\n\r\n    public class Box\r\n    {\r\n        private double length;  // No need to set default values here\r\n        private double width;   // No need to set default values here\r\n        private double height;  // No need to set default values here\r\n\r\n        //alternative constructor\r\n        public Box()\r\n        {\r\n            //Just instantiate the box, but do not set anything.\r\n        }\r\n        \r\n        //constructor\r\n        public Box (double l, double w, double h)\r\n        {\r\n            this.length = l;  // Don&#39;t use method calls that can be overridden in\r\n            this.width = w;   // your constructor.\r\n            this.height = h;\r\n        }\r\n\r\n        //set length method\r\n        public void setLength(double l)\r\n        {\r\n            if(l &gt; 0)\r\n            {\r\n                this.length = l; // You have to use this.length to set\r\n                                 // the value stored in the object\r\n            }\r\n            else\r\n            {\r\n                this.length = 1.0;\r\n            }\r\n        }\r\n\r\n        //set width method\r\n        public void setWidth(double w)\r\n        {\r\n            if(w &gt; 0)\r\n            {\r\n                width = w; // same as above\r\n            }\r\n            else\r\n            {\r\n                width = 1.0; // same as above\r\n            }\r\n        }\r\n\r\n        //set height method\r\n        public void setHeight(double h)\r\n        {\r\n            if(h &gt; 0)\r\n            {\r\n                height = h; // same as above\r\n            }\r\n            else\r\n            {\r\n                height = 1.0; // same as above\r\n            }\r\n        }\r\n\r\n        //calculate area method\r\n        public double calculateArea() // don&#39;t use new parameters. Instead use the values\r\n                                      // stored in the object (this.length and this.width)\r\n        {\r\n            return (this.length * this.width);\r\n            // the formula is not correct, because this only calculates the area\r\n            // of one side of the box, but I will let you figure that out yourself ;-)\r\n        }\r\n\r\n        //calculate volume method\r\n        public double calculateVolume() // same as above\r\n        {\r\n            return (this.length * this.width * this.height);\r\n        }\r\n\r\n        //get length method\r\n        public String getLength()\r\n        {\r\n            // It&#39;s not advisable to convert the type of the variable\r\n            // in a standard getter, you should rather use something like\r\n            // getLengthAsString and use getLength to return the length as\r\n            // it is.\r\n\r\n            return String.format(&quot;%f&quot;, this.length); // You have to use this.length to return\r\n                                                     // the value stored in the object\r\n        }\r\n\r\n        //get width method\r\n        public String getWidth()\r\n        {\r\n            return String.format(&quot;%f&quot;,width); //same as above\r\n        }\r\n\r\n        //get height\r\n        public String getHeight()\r\n        {\r\n            return String.format(&quot;%f&quot;,height); //same as above\r\n        }   \r\n\r\n        public String toString()\r\n        {\r\n            return String.format(&quot;Length is %s.\\nWidth is %s.\\nHeight is %s.\\n&quot;, getLength(), getWidth(), getHeight());\r\n        }\r\n\r\n\r\nFor the main function:\r\n\r\nTo declare an array of 4 boxes you would do:\r\n\r\n    Box[] boxes = new Box[4];\r\n\r\nAnd to put a box at the first position in the array:\r\n\r\n    boxes[0] = new Box();\r\n\r\nthen read the user input and set the box-properties accordingly:\r\n\r\n        newBox.setHeight(scanner.nextDouble());\r\n        newBox.setLength(scanner.nextDouble());\r\n        newBox.setWidth(scanner.nextDouble());\r\n\r\nThis should give you all you need to fix the problem.\r\n\r\n","title":"how to call length, width, height, area, volume of a box from box class using boxTest","body":"<p>See changes and comments in the code:</p>\n\n<pre><code>public class Box\n{\n    private double length;  // No need to set default values here\n    private double width;   // No need to set default values here\n    private double height;  // No need to set default values here\n\n    //alternative constructor\n    public Box()\n    {\n        //Just instantiate the box, but do not set anything.\n    }\n\n    //constructor\n    public Box (double l, double w, double h)\n    {\n        this.length = l;  // Don't use method calls that can be overridden in\n        this.width = w;   // your constructor.\n        this.height = h;\n    }\n\n    //set length method\n    public void setLength(double l)\n    {\n        if(l &gt; 0)\n        {\n            this.length = l; // You have to use this.length to set\n                             // the value stored in the object\n        }\n        else\n        {\n            this.length = 1.0;\n        }\n    }\n\n    //set width method\n    public void setWidth(double w)\n    {\n        if(w &gt; 0)\n        {\n            width = w; // same as above\n        }\n        else\n        {\n            width = 1.0; // same as above\n        }\n    }\n\n    //set height method\n    public void setHeight(double h)\n    {\n        if(h &gt; 0)\n        {\n            height = h; // same as above\n        }\n        else\n        {\n            height = 1.0; // same as above\n        }\n    }\n\n    //calculate area method\n    public double calculateArea() // don't use new parameters. Instead use the values\n                                  // stored in the object (this.length and this.width)\n    {\n        return (this.length * this.width);\n        // the formula is not correct, because this only calculates the area\n        // of one side of the box, but I will let you figure that out yourself ;-)\n    }\n\n    //calculate volume method\n    public double calculateVolume() // same as above\n    {\n        return (this.length * this.width * this.height);\n    }\n\n    //get length method\n    public String getLength()\n    {\n        // It's not advisable to convert the type of the variable\n        // in a standard getter, you should rather use something like\n        // getLengthAsString and use getLength to return the length as\n        // it is.\n\n        return String.format(\"%f\", this.length); // You have to use this.length to return\n                                                 // the value stored in the object\n    }\n\n    //get width method\n    public String getWidth()\n    {\n        return String.format(\"%f\",width); //same as above\n    }\n\n    //get height\n    public String getHeight()\n    {\n        return String.format(\"%f\",height); //same as above\n    }   \n\n    public String toString()\n    {\n        return String.format(\"Length is %s.\\nWidth is %s.\\nHeight is %s.\\n\", getLength(), getWidth(), getHeight());\n    }\n</code></pre>\n\n<p>For the main function:</p>\n\n<p>To declare an array of 4 boxes you would do:</p>\n\n<pre><code>Box[] boxes = new Box[4];\n</code></pre>\n\n<p>And to put a box at the first position in the array:</p>\n\n<pre><code>boxes[0] = new Box();\n</code></pre>\n\n<p>then read the user input and set the box-properties accordingly:</p>\n\n<pre><code>    newBox.setHeight(scanner.nextDouble());\n    newBox.setLength(scanner.nextDouble());\n    newBox.setWidth(scanner.nextDouble());\n</code></pre>\n\n<p>This should give you all you need to fix the problem.</p>\n"},{"tags":[],"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1608335813,"creation_date":1608334102,"answer_id":65365191,"question_id":27325803,"body_markdown":"My recommendation is to break the problem into sub-problems and create a solution for each. This is called ***Problem Decomposition***. Once all of the solutions are created, integrate them. In theory, integrating all of the solutions together should solve the entire problem. In your case, I think this a good, logical way to decompose your problem:\r\n\r\n 1. Box creation (Setting dimension on each Box)\r\n 2. Storing the boxes\r\n 3. Calculating Volume\r\n 4. Calculating Surface Area\r\n 5. Capturing user input\r\n 6. Iterating through Box collection\r\n\r\nBox Creation\r\n------------\r\nMy recommendation is that, since all these subproblems are all related to your `Box` object, create helper classes and/or methods to handle each one. In this case, you can create a method that given height, width, and length, returns a new instance of `Box`.\r\n\r\n    public static Box createBox (int height, int width, int length) {\r\n        return new Box(height, width, length);\r\n    }\r\n\r\nIn turn, your `Box` class should be storing these parameters as global members:\r\n\r\n    public class Box {\r\n        private final int height, width, length;\r\n        public Box (int height, int width, int length) {\r\n            this.height = height;\r\n            ...\r\n        }\r\n        ... (other methods omitted)\r\n    }\r\n\r\nI know this looks like overkill, and I agree. BUT, what this does is teach you a very valuable lesson in Single Responsibility Principle as well as code modularization which helps testing these smaller jobs independently. I am a strong believer that, helper classes should contain nothing but static methods. Why? Because it doesn&#39;t make much sense to create instances of objects that never hold data. In Java, `Math` class is an example of what I am talking about.\r\n\r\nAlternatively, you could create boxes without dimension and set the height, width, and length separately, but I don&#39;t believe this is a good way to go about it. For example, if one or more parameters are not set, you could end up with erroneous behavior. Lastly, your `Box` class should create immutable objects so that dimensions cannot be changed once an instance of the class is created. I will address this point last.\r\n\r\nStoring the boxes\r\n-----------------\r\nIf this is a single-class project, maybe you want to make this collection (most likely a `java.util.List` type) a global attribute of your class. If this project contains more than one class, the class that calls your `createBox` method will have some code to add the return value of this method into some list. Something like this should do:\r\n\r\n    Box box1 = BoxUtils.createBox(1, 2, 3);\r\n    myList.add(box1);\r\n    Box box2 = BoxUtils.createBox(4, 5, 6);\r\n    myList.add(box2);\r\n    ...\r\nYou get the idea. That said, this should be better done in a loop. We will get back to this later. For now, just remember this is NOT done by the box utilities or helper class. This is done by the class that calls it; in your case, `BoxTest`\r\n\r\n    public class BoxTest {\r\n        public static void main(String[] args) {\r\n            // TODO get user input\r\n            // create box\r\n            // add box to list\r\n            ...\r\n    }\r\n\r\nCalculate Volume\r\n----------------\r\nThis method should be in `Box` class...\r\n\r\n    box.getVolume();\r\nSince the parameters are passed via the constructor, you don&#39;t need to pass them to this method again. However, you could argue that since you have a utilities class for all box related helper methods, you could move this responsibility there and have the `Box` class to be a simple POJO (that does not how to calculate its own volume or area). I prefer this approach. If you decide to do this, you need to pass a `Box` instance to the helper method and return the result.\r\n\r\n    Box box = new Box(1, 2, 3);\r\n    int volume = BoxUtils.calculateVolume(box); // preferred\r\n\r\nCalculate Surface Area\r\n----------------\r\nThis method should also be in `Box` class or box utilities...\r\n\r\n    int area = box.getSurfaceArea(); // In Box, or\r\n    int area = BoxUtils.getSurfaceArea(box); // in BoxUtils (preferred)\r\n\r\nCapturing User Input\r\n--------------------\r\nIterating through the collection of boxes was left for last for a reason. I think you should firs try to get your problem working with a single box first. Make sure you open and close your `Scanner` object properly, get the user input correctly, etc. Then, once you test your solution to your satisfaction, expand your solution to capture inputs and create boxes in a loop operation. That way if it fails, you know your problem is isolated to this one part of the problem and not something else. For situations like this is why Problem Decomposition is crucial.\r\n\r\nYour original problem uses `double` for your height, width, and length. I am using `int` for simplicity. \r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t\r\n\t\tScanner input = new Scanner(System.in);\r\n\t\tSystem.out.println(&quot;Enter height, width, and length for the box (space-separated i.e. 10 20 30)&quot;);\r\n\t\tint height = input.nextInt();\r\n\t\tint width = input.nextInt();\r\n\t\tint length = input.nextInt();\r\n\t\tinput.close();\r\n\r\n\t\tBox box = new Box(height, width, length);\r\n\t\tSystem.out.println(box); // I overrode Object#toString() in Box class to do this.\r\n\t}\r\n\r\nMy output\r\n\r\n    Enter height, width, and length for the box (space-separated i.e. 10 20 30)\r\n    10 20 30\r\n    height: 10; width: 20; length: 30\r\n\r\nIterating Through Box Collection\r\n--------------------------------\r\nYou mentioned that you wanted to use enhanced for loop for this. You probably won&#39;t be able to do this for what I am recommending. See [this article][1] for details. Instead, a traditional for loop will do just fine. Since I know everything has worked so far, I can now modify my existing solution to introduce looping to capture the user inputs\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tBox[] boxArray = new Box[4];\r\n\t\tScanner input = new Scanner(System.in);\r\n\t\tfor (int i = 0; i &lt; boxArray.length; i++) {\r\n\t\t\tSystem.out.println(&quot;\\nEnter height, width, and length for the box (space-separated i.e. 10 20 30)&quot;);\r\n\t\t\tint height = input.nextInt();\r\n\t\t\tint width = input.nextInt();\r\n\t\t\tint length = input.nextInt();\r\n\t\t\tBox box = new Box(height, width, length);\r\n\t\t\tSystem.out.println(box);\r\n        // TODO print volume and area\t\r\n\t\t}\r\n\t\tinput.close();\r\n\t}\r\n\r\nNotice that the code is basically the same. I just created an array to store the boxes and a loop to repeat capturing the user&#39;s input until the array is full (4 boxes). You could modify this loop to go on forever and only break after a special character is pressed (which is out of scope for what you need to do).\r\n\r\nOnce I get this part done, it is time to add printing out (calculate) the volume and area for each box. You can do this inside the same loop (recommended) or create another loop and iterate through the array to display these results.\r\n\r\nNow, to finish, I just replaced the TODO with the following code:\r\n\r\n\tSystem.out.println(&quot;Box &quot; + (i+1) + &quot; surface area: &quot; + BoxUtils.calculateSurfaceArea(box));\r\n\tSystem.out.println(&quot;Box &quot; + (i+1) + &quot; volume: &quot; + BoxUtils.calculateVolume(box));\r\n\r\nNow when I execute the code, I will get an output that resembles the following:\r\n\r\n    Enter height, width, and length for the box (space-separated i.e. 10 20 30)\r\n    1 2 3\r\n    Box 1 surface area: 22.0\r\n    Box 1 volume: 6.0\r\n\r\nCoding for Immutability\r\n-----------------------\r\nCoding for immutability is out of scope for your requirement, but I think it is important to mention. Immutability has many benefits, one of which is thread safety. It is obviously not without drawbacks, but in my opinion the benefits outweighs them. For this example, I just made the fields of the `Box` class `private` and `final`, and I did not provide setter methods. So, your `Box` class should look like this:\r\n\r\n    public class Box {\r\n    \r\n    \tprivate final int height, width, length;\r\n    \r\n    \tpublic Box(int height, int width, int length) {\r\n    \t\tthis.height = height;\r\n    \t\tthis.width = width;\r\n    \t\tthis.length = length;\r\n    \t}\r\n    \r\n    \tpublic int getHeight() {\r\n    \t\treturn height;\r\n    \t}\r\n    \r\n    \tpublic int getWidth() {\r\n    \t\treturn width;\r\n    \t}\r\n    \r\n    \tpublic int getLength() {\r\n    \t\treturn length;\r\n    \t}\r\n    \t\r\n    \t@Override\r\n    \tpublic String toString() {\r\n    \t\treturn &quot;height: &quot; + height + &quot;; &quot; + &quot;width: &quot; + width + &quot;; &quot; + &quot;length: &quot; + length;\r\n    \t}\r\n    }\r\n\r\nYour `BoxUtils` like this:\r\n\r\n    public class BoxUtils {\r\n    \r\n    \tprivate BoxUtils() {\r\n    \t\tthrow new AssertionError(&quot;BoxUtils cannot be instantiated&quot;);\r\n    \t}\r\n    \r\n    \tpublic static Box createBox (int height, int width, int length) {\r\n    \t    return new Box(height, width, length);\r\n    \t}\r\n    \t\r\n    \tpublic static double calculateVolume(Box box) {\r\n    \t\treturn box.getWidth() * box.getHeight() * box.getLength();\r\n    \t}\r\n    \t\r\n    \tpublic static double calculateSurfaceArea(Box box) {\r\n    \t\tint width = box.getWidth();\r\n    \t\tint height = box.getHeight();\r\n    \t\tint length = box.getLength();\r\n    \t\treturn 2 * ((width * length) + (height * length) + (height * width));\r\n    \t}\r\n    }\r\n\r\nand finally your `BoxTest` like this:\r\n\r\n    public class BoxTest {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tBox[] boxArray = new Box[4];\r\n    \t\tScanner input = new Scanner(System.in);\r\n    \t\tfor (int i = 0; i &lt; boxArray.length; i++) {\r\n    \t\t\tSystem.out.println(&quot;\\nEnter height, width, and depth for the box (space-separated i.e. 10 20 30)&quot;);\r\n    \t\t\tint height = input.nextInt();\r\n    \t\t\tint width = input.nextInt();\r\n    \t\t\tint depth = input.nextInt();\r\n    \t\t\tBox box = new Box(height, width, depth);\r\n    \t\t\tSystem.out.println(&quot;Box &quot; + (i+1) + &quot; surface area: &quot; + BoxUtils.calculateSurfaceArea(box));\r\n    \t\t\tSystem.out.println(&quot;Box &quot; + (i+1) + &quot; volume: &quot; + BoxUtils.calculateVolume(box));\r\n    \t\t}\r\n    \t\tinput.close();\r\n    \t}\r\n    }\r\n\r\n  [1]: https://stackoverflow.com/questions/13252318/enhanced-for-loop-does-not-work-with-scanner-inside-loop-body?lq=1","title":"how to call length, width, height, area, volume of a box from box class using boxTest","body":"<p>My recommendation is to break the problem into sub-problems and create a solution for each. This is called <em><strong>Problem Decomposition</strong></em>. Once all of the solutions are created, integrate them. In theory, integrating all of the solutions together should solve the entire problem. In your case, I think this a good, logical way to decompose your problem:</p>\n<ol>\n<li>Box creation (Setting dimension on each Box)</li>\n<li>Storing the boxes</li>\n<li>Calculating Volume</li>\n<li>Calculating Surface Area</li>\n<li>Capturing user input</li>\n<li>Iterating through Box collection</li>\n</ol>\n<h2>Box Creation</h2>\n<p>My recommendation is that, since all these subproblems are all related to your <code>Box</code> object, create helper classes and/or methods to handle each one. In this case, you can create a method that given height, width, and length, returns a new instance of <code>Box</code>.</p>\n<pre><code>public static Box createBox (int height, int width, int length) {\n    return new Box(height, width, length);\n}\n</code></pre>\n<p>In turn, your <code>Box</code> class should be storing these parameters as global members:</p>\n<pre><code>public class Box {\n    private final int height, width, length;\n    public Box (int height, int width, int length) {\n        this.height = height;\n        ...\n    }\n    ... (other methods omitted)\n}\n</code></pre>\n<p>I know this looks like overkill, and I agree. BUT, what this does is teach you a very valuable lesson in Single Responsibility Principle as well as code modularization which helps testing these smaller jobs independently. I am a strong believer that, helper classes should contain nothing but static methods. Why? Because it doesn't make much sense to create instances of objects that never hold data. In Java, <code>Math</code> class is an example of what I am talking about.</p>\n<p>Alternatively, you could create boxes without dimension and set the height, width, and length separately, but I don't believe this is a good way to go about it. For example, if one or more parameters are not set, you could end up with erroneous behavior. Lastly, your <code>Box</code> class should create immutable objects so that dimensions cannot be changed once an instance of the class is created. I will address this point last.</p>\n<h2>Storing the boxes</h2>\n<p>If this is a single-class project, maybe you want to make this collection (most likely a <code>java.util.List</code> type) a global attribute of your class. If this project contains more than one class, the class that calls your <code>createBox</code> method will have some code to add the return value of this method into some list. Something like this should do:</p>\n<pre><code>Box box1 = BoxUtils.createBox(1, 2, 3);\nmyList.add(box1);\nBox box2 = BoxUtils.createBox(4, 5, 6);\nmyList.add(box2);\n...\n</code></pre>\n<p>You get the idea. That said, this should be better done in a loop. We will get back to this later. For now, just remember this is NOT done by the box utilities or helper class. This is done by the class that calls it; in your case, <code>BoxTest</code></p>\n<pre><code>public class BoxTest {\n    public static void main(String[] args) {\n        // TODO get user input\n        // create box\n        // add box to list\n        ...\n}\n</code></pre>\n<h2>Calculate Volume</h2>\n<p>This method should be in <code>Box</code> class...</p>\n<pre><code>box.getVolume();\n</code></pre>\n<p>Since the parameters are passed via the constructor, you don't need to pass them to this method again. However, you could argue that since you have a utilities class for all box related helper methods, you could move this responsibility there and have the <code>Box</code> class to be a simple POJO (that does not how to calculate its own volume or area). I prefer this approach. If you decide to do this, you need to pass a <code>Box</code> instance to the helper method and return the result.</p>\n<pre><code>Box box = new Box(1, 2, 3);\nint volume = BoxUtils.calculateVolume(box); // preferred\n</code></pre>\n<h2>Calculate Surface Area</h2>\n<p>This method should also be in <code>Box</code> class or box utilities...</p>\n<pre><code>int area = box.getSurfaceArea(); // In Box, or\nint area = BoxUtils.getSurfaceArea(box); // in BoxUtils (preferred)\n</code></pre>\n<h2>Capturing User Input</h2>\n<p>Iterating through the collection of boxes was left for last for a reason. I think you should firs try to get your problem working with a single box first. Make sure you open and close your <code>Scanner</code> object properly, get the user input correctly, etc. Then, once you test your solution to your satisfaction, expand your solution to capture inputs and create boxes in a loop operation. That way if it fails, you know your problem is isolated to this one part of the problem and not something else. For situations like this is why Problem Decomposition is crucial.</p>\n<p>Your original problem uses <code>double</code> for your height, width, and length. I am using <code>int</code> for simplicity.</p>\n<pre><code>public static void main(String[] args) {\n    \n    Scanner input = new Scanner(System.in);\n    System.out.println(&quot;Enter height, width, and length for the box (space-separated i.e. 10 20 30)&quot;);\n    int height = input.nextInt();\n    int width = input.nextInt();\n    int length = input.nextInt();\n    input.close();\n\n    Box box = new Box(height, width, length);\n    System.out.println(box); // I overrode Object#toString() in Box class to do this.\n}\n</code></pre>\n<p>My output</p>\n<pre><code>Enter height, width, and length for the box (space-separated i.e. 10 20 30)\n10 20 30\nheight: 10; width: 20; length: 30\n</code></pre>\n<h2>Iterating Through Box Collection</h2>\n<p>You mentioned that you wanted to use enhanced for loop for this. You probably won't be able to do this for what I am recommending. See <a href=\"https://stackoverflow.com/questions/13252318/enhanced-for-loop-does-not-work-with-scanner-inside-loop-body?lq=1\">this article</a> for details. Instead, a traditional for loop will do just fine. Since I know everything has worked so far, I can now modify my existing solution to introduce looping to capture the user inputs</p>\n<pre><code>public static void main(String[] args) {\n    Box[] boxArray = new Box[4];\n    Scanner input = new Scanner(System.in);\n    for (int i = 0; i &lt; boxArray.length; i++) {\n        System.out.println(&quot;\\nEnter height, width, and length for the box (space-separated i.e. 10 20 30)&quot;);\n        int height = input.nextInt();\n        int width = input.nextInt();\n        int length = input.nextInt();\n        Box box = new Box(height, width, length);\n        System.out.println(box);\n    // TODO print volume and area   \n    }\n    input.close();\n}\n</code></pre>\n<p>Notice that the code is basically the same. I just created an array to store the boxes and a loop to repeat capturing the user's input until the array is full (4 boxes). You could modify this loop to go on forever and only break after a special character is pressed (which is out of scope for what you need to do).</p>\n<p>Once I get this part done, it is time to add printing out (calculate) the volume and area for each box. You can do this inside the same loop (recommended) or create another loop and iterate through the array to display these results.</p>\n<p>Now, to finish, I just replaced the TODO with the following code:</p>\n<pre><code>System.out.println(&quot;Box &quot; + (i+1) + &quot; surface area: &quot; + BoxUtils.calculateSurfaceArea(box));\nSystem.out.println(&quot;Box &quot; + (i+1) + &quot; volume: &quot; + BoxUtils.calculateVolume(box));\n</code></pre>\n<p>Now when I execute the code, I will get an output that resembles the following:</p>\n<pre><code>Enter height, width, and length for the box (space-separated i.e. 10 20 30)\n1 2 3\nBox 1 surface area: 22.0\nBox 1 volume: 6.0\n</code></pre>\n<h2>Coding for Immutability</h2>\n<p>Coding for immutability is out of scope for your requirement, but I think it is important to mention. Immutability has many benefits, one of which is thread safety. It is obviously not without drawbacks, but in my opinion the benefits outweighs them. For this example, I just made the fields of the <code>Box</code> class <code>private</code> and <code>final</code>, and I did not provide setter methods. So, your <code>Box</code> class should look like this:</p>\n<pre><code>public class Box {\n\n    private final int height, width, length;\n\n    public Box(int height, int width, int length) {\n        this.height = height;\n        this.width = width;\n        this.length = length;\n    }\n\n    public int getHeight() {\n        return height;\n    }\n\n    public int getWidth() {\n        return width;\n    }\n\n    public int getLength() {\n        return length;\n    }\n    \n    @Override\n    public String toString() {\n        return &quot;height: &quot; + height + &quot;; &quot; + &quot;width: &quot; + width + &quot;; &quot; + &quot;length: &quot; + length;\n    }\n}\n</code></pre>\n<p>Your <code>BoxUtils</code> like this:</p>\n<pre><code>public class BoxUtils {\n\n    private BoxUtils() {\n        throw new AssertionError(&quot;BoxUtils cannot be instantiated&quot;);\n    }\n\n    public static Box createBox (int height, int width, int length) {\n        return new Box(height, width, length);\n    }\n    \n    public static double calculateVolume(Box box) {\n        return box.getWidth() * box.getHeight() * box.getLength();\n    }\n    \n    public static double calculateSurfaceArea(Box box) {\n        int width = box.getWidth();\n        int height = box.getHeight();\n        int length = box.getLength();\n        return 2 * ((width * length) + (height * length) + (height * width));\n    }\n}\n</code></pre>\n<p>and finally your <code>BoxTest</code> like this:</p>\n<pre><code>public class BoxTest {\n\n    public static void main(String[] args) {\n        Box[] boxArray = new Box[4];\n        Scanner input = new Scanner(System.in);\n        for (int i = 0; i &lt; boxArray.length; i++) {\n            System.out.println(&quot;\\nEnter height, width, and depth for the box (space-separated i.e. 10 20 30)&quot;);\n            int height = input.nextInt();\n            int width = input.nextInt();\n            int depth = input.nextInt();\n            Box box = new Box(height, width, depth);\n            System.out.println(&quot;Box &quot; + (i+1) + &quot; surface area: &quot; + BoxUtils.calculateSurfaceArea(box));\n            System.out.println(&quot;Box &quot; + (i+1) + &quot; volume: &quot; + BoxUtils.calculateVolume(box));\n        }\n        input.close();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":5368723,"reputation":79,"user_id":4277827,"accept_rate":50,"display_name":"NumbNuts"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37985,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1694657356,"creation_date":1417819006,"question_id":27325803,"body_markdown":"I am writing a code to measure the surface area of a box and volume of the box. Finally, I got it to works. Now the challenges are I have to make 4 object and and store it into array and then use enhanced for loop to go through each box in the array. I mean when you loop through the array, it will get to first box, and ask you to enter the length, width, and height. Then it will show you the first box&#39;s length, width, height, surface area, and volume. I try to find an example for it but I cant find anything. I am still trying to make it work. Thank you for your help. here is my Box code. \r\n\r\n    public class Box\r\n    {\r\n        private double length = 1.0;\r\n        private double width = 1.0;\r\n        private double height = 1.0;\r\n    \r\n        //constructor\r\n        public Box (double l, double w, double h)\r\n        {\r\n            setLength(l);\r\n            setWidth(w);\r\n            setHeight(h);\r\n        }\r\n    \r\n        //set length method\r\n        public void setLength(double l)\r\n        {\r\n            if(l &gt; 0)\r\n            {\r\n                length = l;\r\n            }\r\n            else\r\n            {\r\n                length = 1.0;\r\n            }\r\n        }\r\n    \r\n        //set width method\r\n        public void setWidth(double w)\r\n        {\r\n            if(w &gt; 0)\r\n            {\r\n                width = w;\r\n            }\r\n            else\r\n            {\r\n                width = 1.0;\r\n            }\r\n        }\r\n    \r\n        //set height method\r\n        public void setHeight(double h)\r\n        {\r\n            if(h &gt; 0)\r\n            {\r\n                height = h;\r\n            }\r\n            else\r\n            {\r\n                height = 1.0;\r\n            }\r\n        }\r\n    \r\n        //calculate area method\r\n        public double calculateArea(double length, double width)\r\n        {\r\n            return (length*width);\r\n        }\r\n    \r\n        //calculate volume method\r\n        public double calculateVolume(double length, double width, double height)\r\n        {\r\n            return (length*width*height);\r\n        }\r\n    \r\n        //get length method\r\n        public String getLength()\r\n        {\r\n            return String.format(&quot;%f&quot;, length);\r\n        }\r\n    \r\n        //get width method\r\n        public String getWidth()\r\n        {\r\n            return String.format(&quot;%f&quot;,width);\r\n        }\r\n    \r\n        //get height\r\n        public String getHeight()\r\n        {\r\n            return String.format(&quot;%f&quot;,height);\r\n        }   \r\n    \r\n        public String toString()\r\n        {\r\n            return String.format(&quot;Length is %s.\\nWidth is %s.\\nHeight is %s.\\n&quot;, getLength(), getWidth(), getHeight());\r\n        }\r\n\r\n}\r\n\r\nand here is my main code\r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class BoxTest\r\n    {\r\n        public static void main(String[] args)\r\n        {\r\n            //Box boxOne, boxTwo, boxThree, boxFour;          \r\n            double l;\r\n            double w;\r\n            double h;\r\n    \r\n            Scanner input = new Scanner(System.in);\r\n            int[] boxes = new int[4];\r\n            System.out.print (&quot;Enter the length of your box:&quot;);\r\n            l= input.nextDouble();\r\n            System.out.print (&quot;Enter the width of your box:&quot;);\r\n            w= input.nextDouble();\r\n            System.out.print (&quot;Enter the height of your box:&quot;);\r\n            h= input.nextDouble();\r\n    \r\n            Box boxOne = new Box(l, w, h);\r\n            System.out.println(boxOne.toString());\r\n            System.out.printf(&quot;The surface area of the box is %f.\\nThe volume of the box is %f.\\n&quot;, \r\n                              boxOne.calculateArea(l, w), boxOne.calculateVolume(l, w, h));\r\n    \r\n    \r\n        }\r\n    }","title":"how to call length, width, height, area, volume of a box from box class using boxTest","body":"<p>I am writing a code to measure the surface area of a box and volume of the box. Finally, I got it to works. Now the challenges are I have to make 4 object and and store it into array and then use enhanced for loop to go through each box in the array. I mean when you loop through the array, it will get to first box, and ask you to enter the length, width, and height. Then it will show you the first box's length, width, height, surface area, and volume. I try to find an example for it but I cant find anything. I am still trying to make it work. Thank you for your help. here is my Box code. </p>\n\n<pre><code>public class Box\n{\n    private double length = 1.0;\n    private double width = 1.0;\n    private double height = 1.0;\n\n    //constructor\n    public Box (double l, double w, double h)\n    {\n        setLength(l);\n        setWidth(w);\n        setHeight(h);\n    }\n\n    //set length method\n    public void setLength(double l)\n    {\n        if(l &gt; 0)\n        {\n            length = l;\n        }\n        else\n        {\n            length = 1.0;\n        }\n    }\n\n    //set width method\n    public void setWidth(double w)\n    {\n        if(w &gt; 0)\n        {\n            width = w;\n        }\n        else\n        {\n            width = 1.0;\n        }\n    }\n\n    //set height method\n    public void setHeight(double h)\n    {\n        if(h &gt; 0)\n        {\n            height = h;\n        }\n        else\n        {\n            height = 1.0;\n        }\n    }\n\n    //calculate area method\n    public double calculateArea(double length, double width)\n    {\n        return (length*width);\n    }\n\n    //calculate volume method\n    public double calculateVolume(double length, double width, double height)\n    {\n        return (length*width*height);\n    }\n\n    //get length method\n    public String getLength()\n    {\n        return String.format(\"%f\", length);\n    }\n\n    //get width method\n    public String getWidth()\n    {\n        return String.format(\"%f\",width);\n    }\n\n    //get height\n    public String getHeight()\n    {\n        return String.format(\"%f\",height);\n    }   \n\n    public String toString()\n    {\n        return String.format(\"Length is %s.\\nWidth is %s.\\nHeight is %s.\\n\", getLength(), getWidth(), getHeight());\n    }\n</code></pre>\n\n<p>}</p>\n\n<p>and here is my main code</p>\n\n<pre><code>import java.util.Scanner;\n\npublic class BoxTest\n{\n    public static void main(String[] args)\n    {\n        //Box boxOne, boxTwo, boxThree, boxFour;          \n        double l;\n        double w;\n        double h;\n\n        Scanner input = new Scanner(System.in);\n        int[] boxes = new int[4];\n        System.out.print (\"Enter the length of your box:\");\n        l= input.nextDouble();\n        System.out.print (\"Enter the width of your box:\");\n        w= input.nextDouble();\n        System.out.print (\"Enter the height of your box:\");\n        h= input.nextDouble();\n\n        Box boxOne = new Box(l, w, h);\n        System.out.println(boxOne.toString());\n        System.out.printf(\"The surface area of the box is %f.\\nThe volume of the box is %f.\\n\", \n                          boxOne.calculateArea(l, w), boxOne.calculateVolume(l, w, h));\n\n\n    }\n}\n</code></pre>\n"},{"tags":["java","lanterna"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1651769452,"post_id":72130808,"comment_id":127447617,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1694716655,"post_id":77101376,"comment_id":135931603,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77101376/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":29436720,"reputation":1,"user_id":22555409,"display_name":"PAGMA Online"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694656846,"creation_date":1694656846,"answer_id":77101376,"question_id":72130808,"body_markdown":"    Font myFont = new Font(&quot;Monospaced&quot;, Font.PLAIN, 20); // Change the number 20 to your desired font size\r\n                AWTTerminalFontConfiguration myFontConfiguration = AWTTerminalFontConfiguration.newInstance(myFont);\r\n                // Use myFontConfiguration when creating your terminal\r\n                // Create a default terminal (will use Swing on desktop)\r\n                // Use myFontConfiguration when creating your terminal\r\n                DefaultTerminalFactory dtf = new DefaultTerminalFactory();\r\n                dtf.setForceAWTOverSwing(true);\r\n                dtf.setTerminalEmulatorFontConfiguration(myFontConfiguration);\r\n                Terminal terminal = dtf.createTerminal();\r\n\r\n","title":"Lanterna how do I change the font size?","body":"<pre><code>Font myFont = new Font(&quot;Monospaced&quot;, Font.PLAIN, 20); // Change the number 20 to your desired font size\n            AWTTerminalFontConfiguration myFontConfiguration = AWTTerminalFontConfiguration.newInstance(myFont);\n            // Use myFontConfiguration when creating your terminal\n            // Create a default terminal (will use Swing on desktop)\n            // Use myFontConfiguration when creating your terminal\n            DefaultTerminalFactory dtf = new DefaultTerminalFactory();\n            dtf.setForceAWTOverSwing(true);\n            dtf.setTerminalEmulatorFontConfiguration(myFontConfiguration);\n            Terminal terminal = dtf.createTerminal();\n</code></pre>\n"}],"owner":{"account_id":25207062,"reputation":11,"user_id":19045244,"display_name":"FundyJo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":298,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1694657203,"creation_date":1651769049,"question_id":72130808,"body_markdown":"I&#39;ve been trying for 3 days now to change the font size in Laterna because it&#39;s so small in the console that it&#39;s unreadable. In the API I can only get:\r\n\r\n`SwingTerminalFontConfiguration.newinstance(....);`\r\n\r\nSo I tried to use (new Font) but it didn&#39;t change. I need help, if you can help me please send me an example script to explain it.","title":"Lanterna how do I change the font size?","body":"<p>I've been trying for 3 days now to change the font size in Laterna because it's so small in the console that it's unreadable. In the API I can only get:</p>\n<p><code>SwingTerminalFontConfiguration.newinstance(....);</code></p>\n<p>So I tried to use (new Font) but it didn't change. I need help, if you can help me please send me an example script to explain it.</p>\n"},{"tags":["java","type-conversion","currency"],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694656457,"creation_date":1694656457,"answer_id":77101357,"question_id":77100544,"body_markdown":"&gt; _&quot;... Can anyone let me know what&#39;s the issue with my code ??_\r\n&gt;\r\n&gt; _Expected 110.5 but getting 1.0. ...&quot;_\r\n\r\nThe _calculateMaxAmount_ has a recursive call.\r\n\r\n```java\r\nif (fromCurrency.equals(originalCurrency)) {\r\n    double newAmount = amount * rate;\r\n    double tempMaxAmount = calculateMaxAmount(fxRates, toCurrency, targetCurrency, newAmount);\r\n    if (tempMaxAmount &gt; maxAmount) {\r\n        maxAmount = tempMaxAmount;\r\n    }\r\n}\r\n```\r\n\r\nSimilar to the _main_ method, just assign a value if it&#39;s greater-than the current.  \r\n\r\n```java\r\ndouble newAmount = amount * rate;\r\nif (newAmount &gt; maxAmount) maxAmount = newAmount;\r\n```\r\n\r\nHere is an example input and output.\r\n\r\n```none\r\nUSD,GBP\r\n155.0\r\n```","title":"getting wrong output for USD, CAD, 1.3; USD, GBP, 0.71; USD, JPY, 109; GBP, JPY, 155 expected Expected 110.5 but getting-1.0","body":"<blockquote>\n<p><em>&quot;... Can anyone let me know what's the issue with my code ??</em></p>\n<p><em>Expected 110.5 but getting 1.0. ...&quot;</em></p>\n</blockquote>\n<p>The <em>calculateMaxAmount</em> has a recursive call.</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (fromCurrency.equals(originalCurrency)) {\n    double newAmount = amount * rate;\n    double tempMaxAmount = calculateMaxAmount(fxRates, toCurrency, targetCurrency, newAmount);\n    if (tempMaxAmount &gt; maxAmount) {\n        maxAmount = tempMaxAmount;\n    }\n}\n</code></pre>\n<p>Similar to the <em>main</em> method, just assign a value if it's greater-than the current.</p>\n<pre class=\"lang-java prettyprint-override\"><code>double newAmount = amount * rate;\nif (newAmount &gt; maxAmount) maxAmount = newAmount;\n</code></pre>\n<p>Here is an example input and output.</p>\n<pre class=\"lang-none prettyprint-override\"><code>USD,GBP\n155.0\n</code></pre>\n"}],"owner":{"account_id":29435424,"reputation":1,"user_id":22554389,"display_name":"Neha M"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1694656457,"creation_date":1694639694,"question_id":77100544,"body_markdown":"```\r\nimport java.io.*;\r\nimport java.math.*;\r\nimport java.util.*;\r\n\r\npublic class Main {\r\n\r\n    public static void main(String[] args) throws IOException {\r\n        InputStreamReader reader = new InputStreamReader(System.in, StandardCharsets.UTF_8);\r\n        BufferedReader in = new BufferedReader(reader);\r\n    \r\n        // Create a map of exchange rates\r\n        Map&lt;String, Double&gt; fxRates = new HashMap&lt;&gt;();\r\n        fxRates.put(&quot;USD, JPY&quot;, 109.0);\r\n        fxRates.put(&quot;USD, GBP&quot;, 0.71);\r\n        fxRates.put(&quot;GBP, JPY&quot;, 155.0);\r\n        fxRates.put(&quot;CAD, CNY&quot;, 5.27);\r\n        fxRates.put(&quot;CAD, KR&quot;, 921.0);\r\n        fxRates.put(&quot;USD, CAD&quot;, 1.3);\r\n        fxRates.put(&quot;CAD, JPY&quot;, 88.0);\r\n    \r\n        // Read the input and calculate the maximum amount of the target currency\r\n        // that can be obtained from 1 unit of the selected currency\r\n        String line;\r\n        double maxAmount = -1.0;\r\n        while ((line = in.readLine()) != null) {\r\n            String[] currencies = line.split(&quot;;&quot;);\r\n            for (String currencyPair : currencies) {\r\n                String[] currencies = currencyPair.trim().split(&quot;,&quot;);\r\n                if (currencies.length == 2) {\r\n                    String originalCurrency = currencies[0].trim();\r\n                    String targetCurrency = currencies[1].trim();\r\n                    double amount = calculateMaxAmount(fxRates, targetCurrency, originalCurrency, 1);\r\n                    if (amount &gt; maxAmount) {\r\n                        maxAmount = amount;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    \r\n        // Print the maximum amount\r\n        System.out.println(maxAmount);\r\n    }\r\n    \r\n    public static double calculateMaxAmount(Map&lt;String, Double&gt; fxRates, String originalCurrency, String targetCurrency, double amount) {\r\n        if (originalCurrency.equals(targetCurrency)) {\r\n            return amount;\r\n        }\r\n    \r\n        double maxAmount = -1.0;\r\n        for (Map.Entry&lt;String, Double&gt; entry : fxRates.entrySet()) {\r\n            String[] currencies = entry.getKey().split(&quot;,&quot;);\r\n            String fromCurrency = currencies[0].trim();\r\n            String toCurrency = currencies[1].trim();\r\n            double rate = entry.getValue();\r\n    \r\n            if (fromCurrency.equals(originalCurrency)) {\r\n                double newAmount = amount * rate;\r\n                double tempMaxAmount = calculateMaxAmount(fxRates, toCurrency, targetCurrency, newAmount);\r\n                if (tempMaxAmount &gt; maxAmount) {\r\n                    maxAmount = tempMaxAmount;\r\n                }\r\n            }\r\n        }\r\n    \r\n        return maxAmount;\r\n\r\n}\r\n}\r\n```\r\n\r\nCan anyone let me know what&#39;s the issue with my code ??\r\n\r\nExpected 110.5 but getting 1.0. It is supposed to be he input you provided is:","title":"getting wrong output for USD, CAD, 1.3; USD, GBP, 0.71; USD, JPY, 109; GBP, JPY, 155 expected Expected 110.5 but getting-1.0","body":"<pre><code>import java.io.*;\nimport java.math.*;\nimport java.util.*;\n\npublic class Main {\n\n    public static void main(String[] args) throws IOException {\n        InputStreamReader reader = new InputStreamReader(System.in, StandardCharsets.UTF_8);\n        BufferedReader in = new BufferedReader(reader);\n    \n        // Create a map of exchange rates\n        Map&lt;String, Double&gt; fxRates = new HashMap&lt;&gt;();\n        fxRates.put(&quot;USD, JPY&quot;, 109.0);\n        fxRates.put(&quot;USD, GBP&quot;, 0.71);\n        fxRates.put(&quot;GBP, JPY&quot;, 155.0);\n        fxRates.put(&quot;CAD, CNY&quot;, 5.27);\n        fxRates.put(&quot;CAD, KR&quot;, 921.0);\n        fxRates.put(&quot;USD, CAD&quot;, 1.3);\n        fxRates.put(&quot;CAD, JPY&quot;, 88.0);\n    \n        // Read the input and calculate the maximum amount of the target currency\n        // that can be obtained from 1 unit of the selected currency\n        String line;\n        double maxAmount = -1.0;\n        while ((line = in.readLine()) != null) {\n            String[] currencies = line.split(&quot;;&quot;);\n            for (String currencyPair : currencies) {\n                String[] currencies = currencyPair.trim().split(&quot;,&quot;);\n                if (currencies.length == 2) {\n                    String originalCurrency = currencies[0].trim();\n                    String targetCurrency = currencies[1].trim();\n                    double amount = calculateMaxAmount(fxRates, targetCurrency, originalCurrency, 1);\n                    if (amount &gt; maxAmount) {\n                        maxAmount = amount;\n                    }\n                }\n            }\n        }\n    \n        // Print the maximum amount\n        System.out.println(maxAmount);\n    }\n    \n    public static double calculateMaxAmount(Map&lt;String, Double&gt; fxRates, String originalCurrency, String targetCurrency, double amount) {\n        if (originalCurrency.equals(targetCurrency)) {\n            return amount;\n        }\n    \n        double maxAmount = -1.0;\n        for (Map.Entry&lt;String, Double&gt; entry : fxRates.entrySet()) {\n            String[] currencies = entry.getKey().split(&quot;,&quot;);\n            String fromCurrency = currencies[0].trim();\n            String toCurrency = currencies[1].trim();\n            double rate = entry.getValue();\n    \n            if (fromCurrency.equals(originalCurrency)) {\n                double newAmount = amount * rate;\n                double tempMaxAmount = calculateMaxAmount(fxRates, toCurrency, targetCurrency, newAmount);\n                if (tempMaxAmount &gt; maxAmount) {\n                    maxAmount = tempMaxAmount;\n                }\n            }\n        }\n    \n        return maxAmount;\n\n}\n}\n</code></pre>\n<p>Can anyone let me know what's the issue with my code ??</p>\n<p>Expected 110.5 but getting 1.0. It is supposed to be he input you provided is:</p>\n"},{"tags":["java","caching","keycloak","classcastexception","infinispan"],"answers":[{"tags":[],"owner":{"account_id":1679945,"reputation":551,"user_id":1544452,"accept_rate":83,"display_name":"Eduardo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694655778,"creation_date":1694655778,"answer_id":77101327,"question_id":75652382,"body_markdown":"It looks like the main issue is that the `remote-store`s are configured with `cache=actionTokens` instead of the name of the cache that it&#39;s being configured:\r\n\r\n```\r\necho ** Set offlineClientSessions cache as remote store **\r\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=offlineClientSessions/store=remote:add( \\\r\n    passivation=false, \\\r\n    fetch-state=false, \\\r\n    purge=false, \\\r\n    preload=false, \\\r\n    shared=true, \\\r\n    cache=actionTokens, \\\r\n    remote-servers=[&quot;remote-cache&quot;], \\\r\n    properties={ \\\r\n        rawValues=true, \\\r\n        marshaller=org.keycloak.cluster.infinispan.KeycloakHotRodMarshallerFactory, \\\r\n        protocolVersion=${env.HOTROD_VERSION:2.8} \\\r\n    } \\\r\n)\r\n```\r\n\r\nNotice the line &quot;cache=actionTokens&quot; but the distributed-cache is &quot;offlineClientSessions&quot;","title":"ClassCastExceptions running Keycloak with remote Infinispan cache","body":"<p>It looks like the main issue is that the <code>remote-store</code>s are configured with <code>cache=actionTokens</code> instead of the name of the cache that it's being configured:</p>\n<pre><code>echo ** Set offlineClientSessions cache as remote store **\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=offlineClientSessions/store=remote:add( \\\n    passivation=false, \\\n    fetch-state=false, \\\n    purge=false, \\\n    preload=false, \\\n    shared=true, \\\n    cache=actionTokens, \\\n    remote-servers=[&quot;remote-cache&quot;], \\\n    properties={ \\\n        rawValues=true, \\\n        marshaller=org.keycloak.cluster.infinispan.KeycloakHotRodMarshallerFactory, \\\n        protocolVersion=${env.HOTROD_VERSION:2.8} \\\n    } \\\n)\n</code></pre>\n<p>Notice the line &quot;cache=actionTokens&quot; but the distributed-cache is &quot;offlineClientSessions&quot;</p>\n"}],"owner":{"account_id":1184797,"reputation":225,"user_id":1158978,"display_name":"revdev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":515,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1694655778,"creation_date":1678114778,"question_id":75652382,"body_markdown":"***Setup***\r\n\r\nKeycloak 16.1.1 wired up to an Infinispan 14 cluster for remote caching of session data (user sessions, authentication sessions, client sessions, etc.). Both Keycloak and Infinispan are using OpenJDK 11.\r\n\r\nKeycloak remote caching is initialized as follows:\r\n```\r\necho *** Setup Infinispan cache module ***\r\n/subsystem=infinispan/cache-container=keycloak:write-attribute(name=module, value=org.keycloak.keycloak-model-infinispan)\r\n\r\necho *** Add remote socket binding to Infinispan cluster ***\r\n/socket-binding-group=standard-sockets/remote-destination-outbound-socket-binding=remote-cache:add(host=${remote.cache.host:localhost}, port=${remote.cache.port:11222})\r\n\r\necho ** Set work cache as remote store **\r\n/subsystem=infinispan/cache-container=keycloak/replicated-cache=work/store=remote:add( \\\r\n    passivation=false, \\\r\n    fetch-state=false, \\\r\n    purge=false, \\\r\n    preload=false, \\\r\n    shared=true, \\\r\n    cache=actionTokens, \\\r\n    remote-servers=[&quot;remote-cache&quot;], \\\r\n    properties={ \\\r\n        rawValues=true, \\\r\n        marshaller=org.keycloak.cluster.infinispan.KeycloakHotRodMarshallerFactory, \\\r\n        protocolVersion=${env.HOTROD_VERSION:2.8} \\\r\n    } \\\r\n)\r\n/subsystem=infinispan/cache-container=keycloak/replicated-cache=work:write-attribute(name=statistics-enabled,value=true)\r\n\r\necho ** Set sessions cache as remote store **\r\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=sessions/store=remote:add( \\\r\n    passivation=false, \\\r\n    fetch-state=false, \\\r\n    purge=false, \\\r\n    preload=false, \\\r\n    shared=true, \\\r\n    cache=actionTokens, \\\r\n    remote-servers=[&quot;remote-cache&quot;], \\\r\n    properties={ \\\r\n        rawValues=true, \\\r\n        marshaller=org.keycloak.cluster.infinispan.KeycloakHotRodMarshallerFactory, \\\r\n        protocolVersion=${env.HOTROD_VERSION:2.8} \\\r\n    } \\\r\n)\r\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=sessions:write-attribute(name=statistics-enabled,value=true)\r\n\r\necho ** Set authenticationSessions cache as remote store **\r\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=authenticationSessions/store=remote:add( \\\r\n    passivation=false, \\\r\n    fetch-state=false, \\\r\n    purge=false, \\\r\n    preload=false, \\\r\n    shared=true, \\\r\n    cache=actionTokens, \\\r\n    remote-servers=[&quot;remote-cache&quot;], \\\r\n    properties={ \\\r\n        rawValues=true, \\\r\n        marshaller=org.keycloak.cluster.infinispan.KeycloakHotRodMarshallerFactory, \\\r\n        protocolVersion=${env.HOTROD_VERSION:2.8} \\\r\n    } \\\r\n)\r\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=authenticationSessions:write-attribute(name=statistics-enabled,value=true)\r\n\r\necho ** Set offlineSessions cache as remote store **\r\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=offlineSessions/store=remote:add( \\\r\n    passivation=false, \\\r\n    fetch-state=false, \\\r\n    purge=false, \\\r\n    preload=false, \\\r\n    shared=true, \\\r\n    cache=actionTokens, \\\r\n    remote-servers=[&quot;remote-cache&quot;], \\\r\n    properties={ \\\r\n        rawValues=true, \\\r\n        marshaller=org.keycloak.cluster.infinispan.KeycloakHotRodMarshallerFactory, \\\r\n        protocolVersion=${env.HOTROD_VERSION:2.8} \\\r\n    } \\\r\n)\r\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=offlineSessions:write-attribute(name=statistics-enabled,value=true)\r\n\r\necho ** Set clientSessions cache as remote store **\r\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=clientSessions/store=remote:add( \\\r\n    passivation=false, \\\r\n    fetch-state=false, \\\r\n    purge=false, \\\r\n    preload=false, \\\r\n    shared=true, \\\r\n    cache=actionTokens, \\\r\n    remote-servers=[&quot;remote-cache&quot;], \\\r\n    properties={ \\\r\n        rawValues=true, \\\r\n        marshaller=org.keycloak.cluster.infinispan.KeycloakHotRodMarshallerFactory, \\\r\n        protocolVersion=${env.HOTROD_VERSION:2.8} \\\r\n    } \\\r\n)\r\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=clientSessions:write-attribute(name=statistics-enabled,value=true)\r\n\r\necho ** Set offlineClientSessions cache as remote store **\r\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=offlineClientSessions/store=remote:add( \\\r\n    passivation=false, \\\r\n    fetch-state=false, \\\r\n    purge=false, \\\r\n    preload=false, \\\r\n    shared=true, \\\r\n    cache=actionTokens, \\\r\n    remote-servers=[&quot;remote-cache&quot;], \\\r\n    properties={ \\\r\n        rawValues=true, \\\r\n        marshaller=org.keycloak.cluster.infinispan.KeycloakHotRodMarshallerFactory, \\\r\n        protocolVersion=${env.HOTROD_VERSION:2.8} \\\r\n    } \\\r\n)\r\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=offlineClientSessions:write-attribute(name=statistics-enabled,value=true)\r\n\r\necho ** Set loginFailure cache as remote store **\r\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=loginFailures/store=remote:add( \\\r\n    passivation=false, \\\r\n    fetch-state=false, \\\r\n    purge=false, \\\r\n    preload=false, \\\r\n    shared=true, \\\r\n    cache=actionTokens, \\\r\n    remote-servers=[&quot;remote-cache&quot;], \\\r\n    properties={ \\\r\n        rawValues=true, \\\r\n        marshaller=org.keycloak.cluster.infinispan.KeycloakHotRodMarshallerFactory, \\\r\n        protocolVersion=${env.HOTROD_VERSION:2.8} \\\r\n    } \\\r\n)\r\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=loginFailures:write-attribute(name=statistics-enabled,value=true)\r\n\r\necho ** Set actionTokens cache as remote store **\r\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=actionTokens/store=remote:add( \\\r\n    passivation=false, \\\r\n    fetch-state=false, \\\r\n    purge=false, \\\r\n    preload=false, \\\r\n    shared=true, \\\r\n    cache=actionTokens, \\\r\n    remote-servers=[&quot;remote-cache&quot;], \\\r\n    properties={ \\\r\n        rawValues=true, \\\r\n        marshaller=org.keycloak.cluster.infinispan.KeycloakHotRodMarshallerFactory, \\\r\n        protocolVersion=${env.HOTROD_VERSION:2.8} \\\r\n    } \\\r\n)\r\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=actionTokens:write-attribute(name=statistics-enabled,value=true)\r\n\r\necho *** Setting CACHE_OWNERS to &quot;${env.CACHE_OWNERS}&quot; in all cache-containers ***\r\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=sessions:write-attribute(name=owners, value=${env.CACHE_OWNERS:1})\r\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=authenticationSessions:write-attribute(name=owners, value=${env.CACHE_OWNERS:1})\r\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=offlineSessions:write-attribute(name=owners, value=${env.CACHE_OWNERS:1})\r\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=clientSessions:write-attribute(name=owners, value=${env.CACHE_OWNERS:1})\r\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=offlineClientSessions:write-attribute(name=owners, value=${env.CACHE_OWNERS:1})\r\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=loginFailures:write-attribute(name=owners, value=${env.CACHE_OWNERS:1})\r\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=actionTokens:write-attribute(name=owners, value=${env.CACHE_OWNERS:1})\r\n\r\n```\r\n\r\nInfinispan cluster config is:\r\n```\r\n   &lt;cache-container name=&quot;default&quot; statistics=&quot;true&quot;&gt;\r\n      &lt;transport cluster=&quot;${infinispan.cluster.name:default-ispan-cluster}&quot; node-name=&quot;${infinispan.node.name:env.HOST}&quot; stack=&quot;nxt-stack&quot;/&gt;\r\n      &lt;serialization marshaller=&quot;org.infinispan.jboss.marshalling.commons.GenericJBossMarshaller&quot;&gt;\r\n         &lt;allow-list&gt;\r\n            &lt;regex&gt;org.keycloak.*&lt;/regex&gt;\r\n            &lt;regex&gt;java.util.*&lt;/regex&gt;\r\n         &lt;/allow-list&gt;\r\n      &lt;/serialization&gt;\r\n      &lt;replicated-cache-configuration name=&quot;sessions-cfg&quot; start=&quot;EAGER&quot;&gt;\r\n         &lt;transaction mode=&quot;NON_XA&quot; locking=&quot;PESSIMISTIC&quot;/&gt;\r\n      &lt;/replicated-cache-configuration&gt;\r\n      &lt;replicated-cache name=&quot;work&quot; configuration=&quot;sessions-cfg&quot;&gt;\r\n         &lt;encoding media-type=&quot;application/x-jboss-marshalling&quot;/&gt;\r\n      &lt;/replicated-cache&gt;\r\n      &lt;replicated-cache name=&quot;sessions&quot; configuration=&quot;sessions-cfg&quot;&gt;\r\n         &lt;encoding media-type=&quot;application/x-jboss-marshalling&quot;/&gt;\r\n      &lt;/replicated-cache&gt;\r\n      &lt;replicated-cache name=&quot;authenticationSessions&quot; configuration=&quot;sessions-cfg&quot;&gt;\r\n         &lt;encoding media-type=&quot;application/x-jboss-marshalling&quot;/&gt;\r\n      &lt;/replicated-cache&gt;\r\n      &lt;replicated-cache name=&quot;offlineSessions&quot; configuration=&quot;sessions-cfg&quot;&gt;\r\n         &lt;encoding media-type=&quot;application/x-jboss-marshalling&quot;/&gt;\r\n      &lt;/replicated-cache&gt;\r\n      &lt;replicated-cache name=&quot;clientSessions&quot; configuration=&quot;sessions-cfg&quot;&gt;\r\n         &lt;encoding media-type=&quot;application/x-jboss-marshalling&quot;/&gt;\r\n      &lt;/replicated-cache&gt;\r\n      &lt;replicated-cache name=&quot;offlineClientSessions&quot; configuration=&quot;sessions-cfg&quot;&gt;\r\n         &lt;encoding media-type=&quot;application/x-jboss-marshalling&quot;/&gt;\r\n      &lt;/replicated-cache&gt;\r\n      &lt;replicated-cache name=&quot;actionTokens&quot; configuration=&quot;sessions-cfg&quot;&gt;\r\n         &lt;encoding media-type=&quot;application/x-jboss-marshalling&quot;/&gt;\r\n      &lt;/replicated-cache&gt;\r\n      &lt;replicated-cache name=&quot;loginFailures&quot; configuration=&quot;sessions-cfg&quot;&gt;\r\n         &lt;encoding media-type=&quot;application/x-jboss-marshalling&quot;/&gt;\r\n      &lt;/replicated-cache&gt;\r\n   &lt;/cache-container&gt;\r\n```\r\n\r\n***Problem***\r\n\r\nI can confirm *some* of the cache data is stored in Infinispan (namely actionTokens).\r\n\r\n[![enter image description here][1]][1]\r\n\r\nHowever, I&#39;m getting ClassCastExceptions on Keycloak side for most cache retrievals, including user sessions, all citing the inability to cast to **SessionEntityWrapper**. \r\n\r\nYou can easily reproduce the error below by simply viewing user sessions on Keycloak admin console or attempting a login. (This happens when attempting a cast to `RootAuthenticationSessionEntity` as well)\r\n\r\n```\r\n07:29:36,571 ERROR [org.keycloak.services.error.KeycloakErrorHandler] (default task-2) Uncaught server error: com.fasterxml.jackson.databind.JsonMappingException: java.lang.ClassCastException: class java.lang.Boolean cannot be cast to class org.keycloak.models.sessions.infinispan.changes.SessionEntityWrapper (java.lang.Boolean is in module java.base of loader &#39;bootstrap&#39;; org.keycloak.models.sessions.infinispan.changes.SessionEntityWrapper is in unnamed module of loader &#39;org.keycloak.keycloak-model-infinispan@16.1.1&#39; @70e80e4f)\r\n\tat com.fasterxml.jackson.core.jackson-databind@2.12.3//com.fasterxml.jackson.databind.ser.DefaultSerializerProvider._wrapAsIOE(DefaultSerializerProvider.java:509)\r\n\tat com.fasterxml.jackson.core.jackson-databind@2.12.3//com.fasterxml.jackson.databind.ser.DefaultSerializerProvider._serialize(DefaultSerializerProvider.java:482)\r\n\tat com.fasterxml.jackson.core.jackson-databind@2.12.3//com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:400)\r\n\tat com.fasterxml.jackson.core.jackson-databind@2.12.3//com.fasterxml.jackson.databind.ObjectWriter$Prefetch.serialize(ObjectWriter.java:1510)\r\n\tat com.fasterxml.jackson.core.jackson-databind@2.12.3//com.fasterxml.jackson.databind.ObjectWriter.writeValue(ObjectWriter.java:1006)\r\n\tat org.jboss.resteasy.resteasy-jackson2-provider@4.7.4.Final//org.jboss.resteasy.plugins.providers.jackson.ResteasyJackson2Provider.writeTo(ResteasyJackson2Provider.java:345)\r\n\tat org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.messagebody.AsyncBufferedMessageBodyWriter.asyncWriteTo(AsyncBufferedMessageBodyWriter.java:24)\r\n\tat org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.interception.jaxrs.ServerWriterInterceptorContext.writeTo(ServerWriterInterceptorContext.java:87)\r\n\tat org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.interception.jaxrs.AbstractWriterInterceptorContext.asyncProceed(AbstractWriterInterceptorContext.java:203)\r\n\tat org.jboss.resteasy.resteasy-crypto@4.7.4.Final//org.jboss.resteasy.security.doseta.DigitalSigningInterceptor.asyncAroundWriteTo(DigitalSigningInterceptor.java:169)\r\n\tat org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.interception.jaxrs.AbstractWriterInterceptorContext.asyncProceed(AbstractWriterInterceptorContext.java:211)\r\n\tat org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.interception.jaxrs.AbstractWriterInterceptorContext.getStarted(AbstractWriterInterceptorContext.java:166)\r\n\tat org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.interception.jaxrs.ServerWriterInterceptorContext.lambda$getStarted$0(ServerWriterInterceptorContext.java:73)\r\n\tat org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.interception.jaxrs.ServerWriterInterceptorContext.aroundWriteTo(ServerWriterInterceptorContext.java:93)\r\n\tat org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.interception.jaxrs.ServerWriterInterceptorContext.getStarted(ServerWriterInterceptorContext.java:73)\r\n\tat org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.ServerResponseWriter.lambda$writeNomapResponse$3(ServerResponseWriter.java:163)\r\n\tat org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.interception.jaxrs.ContainerResponseContextImpl.filter(ContainerResponseContextImpl.java:404)\r\n\tat org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.ServerResponseWriter.executeFilters(ServerResponseWriter.java:252)\r\n\tat org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.ServerResponseWriter.writeNomapResponse(ServerResponseWriter.java:101)\r\n\tat org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.ServerResponseWriter.writeNomapResponse(ServerResponseWriter.java:74)\r\n\tat org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.SynchronousDispatcher.writeResponse(SynchronousDispatcher.java:594)\r\n\tat org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:524)\r\n\tat org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.SynchronousDispatcher.lambda$invoke$4(SynchronousDispatcher.java:261)\r\n\tat org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.SynchronousDispatcher.lambda$preprocess$0(SynchronousDispatcher.java:161)\r\n\tat org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.interception.jaxrs.PreMatchContainerRequestContext.filter(PreMatchContainerRequestContext.java:364)\r\n\tat org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.SynchronousDispatcher.preprocess(SynchronousDispatcher.java:164)\r\n\tat org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:247)\r\n\tat org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:249)\r\n\tat org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:60)\r\n\tat org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:55)\r\n\tat javax.servlet.api@2.0.0.Final//javax.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat io.undertow.servlet@2.2.14.Final//io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:74)\r\n\tat io.undertow.servlet@2.2.14.Final//io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:129)\r\n\tat org.keycloak.keycloak-wildfly-extensions@16.1.1//org.keycloak.provider.wildfly.WildFlyRequestFilter.lambda$doFilter$0(WildFlyRequestFilter.java:41)\r\n\tat org.keycloak.keycloak-services@16.1.1//org.keycloak.services.filters.AbstractRequestFilter.filter(AbstractRequestFilter.java:43)\r\n\tat org.keycloak.keycloak-wildfly-extensions@16.1.1//org.keycloak.provider.wildfly.WildFlyRequestFilter.doFilter(WildFlyRequestFilter.java:39)\r\n\tat io.undertow.servlet@2.2.14.Final//io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)\r\n\tat io.undertow.servlet@2.2.14.Final//io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\r\n\tat io.undertow.servlet@2.2.14.Final//io.undertow.servlet.handlers.FilterHandler.handleRequest(FilterHandler.java:84)\r\n\tat io.undertow.servlet@2.2.14.Final//io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62)\r\n\tat io.undertow.servlet@2.2.14.Final//io.undertow.servlet.handlers.ServletChain$1.handleRequest(ServletChain.java:68)\r\n\tat io.undertow.servlet@2.2.14.Final//io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36)\r\n\tat org.wildfly.security.elytron-web.undertow-server@1.10.1.Final//org.wildfly.elytron.web.undertow.server.ElytronRunAsHandler.lambda$handleRequest$1(ElytronRunAsHandler.java:68)\r\n\tat org.wildfly.security.elytron-base@1.18.3.Final//org.wildfly.security.auth.server.FlexibleIdentityAssociation.runAsFunctionEx(FlexibleIdentityAssociation.java:103)\r\n\tat org.wildfly.security.elytron-base@1.18.3.Final//org.wildfly.security.auth.server.Scoped.runAsFunctionEx(Scoped.java:161)\r\n\tat org.wildfly.security.elytron-base@1.18.3.Final//org.wildfly.security.auth.server.Scoped.runAs(Scoped.java:73)\r\n\tat org.wildfly.security.elytron-web.undertow-server@1.10.1.Final//org.wildfly.elytron.web.undertow.server.ElytronRunAsHandler.handleRequest(ElytronRunAsHandler.java:67)\r\n\tat io.undertow.servlet@2.2.14.Final//io.undertow.servlet.handlers.RedirectDirHandler.handleRequest(RedirectDirHandler.java:68)\r\n\tat io.undertow.servlet@2.2.14.Final//io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:117)\r\n\tat io.undertow.servlet@2.2.14.Final//io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57)\r\n\tat io.undertow.core@2.2.14.Final//io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n\tat io.undertow.core@2.2.14.Final//io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46)\r\n\tat io.undertow.servlet@2.2.14.Final//io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64)\r\n\tat io.undertow.core@2.2.14.Final//io.undertow.security.handlers.AbstractSecurityContextAssociationHandler.handleRequest(AbstractSecurityContextAssociationHandler.java:43)\r\n\tat org.wildfly.security.elytron-web.undertow-server-servlet@1.10.1.Final//org.wildfly.elytron.web.undertow.server.servlet.CleanUpHandler.handleRequest(CleanUpHandler.java:38)\r\n\tat io.undertow.core@2.2.14.Final//io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n\tat org.wildfly.extension.undertow@26.0.1.Final//org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)\r\n\tat io.undertow.core@2.2.14.Final//io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n\tat org.wildfly.extension.undertow@26.0.1.Final//org.wildfly.extension.undertow.deployment.GlobalRequestControllerHandler.handleRequest(GlobalRequestControllerHandler.java:68)\r\n\tat io.undertow.servlet@2.2.14.Final//io.undertow.servlet.handlers.SendErrorPageHandler.handleRequest(SendErrorPageHandler.java:52)\r\n\tat io.undertow.core@2.2.14.Final//io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n\tat io.undertow.servlet@2.2.14.Final//io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:275)\r\n\tat io.undertow.servlet@2.2.14.Final//io.undertow.servlet.handlers.ServletInitialHandler.access$100(ServletInitialHandler.java:79)\r\n\tat io.undertow.servlet@2.2.14.Final//io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:134)\r\n\tat io.undertow.servlet@2.2.14.Final//io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:131)\r\n\tat io.undertow.servlet@2.2.14.Final//io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:48)\r\n\tat io.undertow.servlet@2.2.14.Final//io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)\r\n\tat org.wildfly.extension.undertow@26.0.1.Final//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1544)\r\n\tat org.wildfly.extension.undertow@26.0.1.Final//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1544)\r\n\tat org.wildfly.extension.undertow@26.0.1.Final//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1544)\r\n\tat org.wildfly.extension.undertow@26.0.1.Final//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1544)\r\n\tat io.undertow.servlet@2.2.14.Final//io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:255)\r\n\tat io.undertow.servlet@2.2.14.Final//io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:79)\r\n\tat io.undertow.servlet@2.2.14.Final//io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:100)\r\n\tat io.undertow.core@2.2.14.Final//io.undertow.server.Connectors.executeRootHandler(Connectors.java:387)\r\n\tat io.undertow.core@2.2.14.Final//io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:852)\r\n\tat org.jboss.threads@2.4.0.Final//org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\r\n\tat org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\r\n\tat org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\r\n\tat org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\r\n\tat org.jboss.xnio@3.8.5.Final//org.xnio.XnioWorker$WorkerThreadFactory$1$1.run(XnioWorker.java:1280)\r\n\tat java.base/java.lang.Thread.run(Thread.java:829)\r\nCaused by: org.infinispan.commons.CacheException: java.lang.ClassCastException: class java.lang.Boolean cannot be cast to class org.keycloak.models.sessions.infinispan.changes.SessionEntityWrapper (java.lang.Boolean is in module java.base of loader &#39;bootstrap&#39;; org.keycloak.models.sessions.infinispan.changes.SessionEntityWrapper is in unnamed module of loader &#39;org.keycloak.keycloak-model-infinispan@16.1.1&#39; @70e80e4f)\r\n\tat org.infinispan.commons@12.1.7.Final//org.infinispan.commons.util.Util.rewrapAsCacheException(Util.java:686)\r\n\tat org.infinispan.commons@12.1.7.Final//org.infinispan.commons.reactive.RxJavaInterop.lambda$static$2(RxJavaInterop.java:47)\r\n\tat io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.internal.operators.flowable.FlowableOnErrorNext$OnErrorNextSubscriber.onError(FlowableOnErrorNext.java:94)\r\n\tat io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.internal.operators.flowable.FlowableRepeatUntil$RepeatSubscriber.onError(FlowableRepeatUntil.java:72)\r\n\tat io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.internal.operators.flowable.FlowableDoOnLifecycle$SubscriptionLambdaSubscriber.onError(FlowableDoOnLifecycle.java:86)\r\n\tat io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.processors.UnicastProcessor.checkTerminated(UnicastProcessor.java:415)\r\n\tat io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.processors.UnicastProcessor.drainRegular(UnicastProcessor.java:301)\r\n\tat io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.processors.UnicastProcessor.drain(UnicastProcessor.java:384)\r\n\tat io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.processors.UnicastProcessor.subscribeActual(UnicastProcessor.java:486)\r\n\tat io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.core.Flowable.subscribe(Flowable.java:15868)\r\n\tat io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.internal.operators.flowable.FlowableDoOnLifecycle.subscribeActual(FlowableDoOnLifecycle.java:39)\r\n\tat io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.core.Flowable.subscribe(Flowable.java:15868)\r\n\tat io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.core.Flowable.subscribe(Flowable.java:15814)\r\n\tat io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.internal.operators.flowable.FlowableScalarXMap$ScalarXMapFlowable.subscribeActual(FlowableScalarXMap.java:160)\r\n\tat io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.core.Flowable.subscribe(Flowable.java:15868)\r\n\tat io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.core.Flowable.subscribe(Flowable.java:15814)\r\n\tat io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.internal.operators.flowable.FlowableScalarXMap$ScalarXMapFlowable.subscribeActual(FlowableScalarXMap.java:160)\r\n\tat io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.core.Flowable.subscribe(Flowable.java:15868)\r\n\tat io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.core.Flowable.subscribe(Flowable.java:15814)\r\n\tat io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.internal.operators.flowable.FlowableRepeatUntil$RepeatSubscriber.subscribeNext(FlowableRepeatUntil.java:109)\r\n\tat io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.internal.operators.flowable.FlowableRepeatUntil.subscribeActual(FlowableRepeatUntil.java:38)\r\n\tat io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.core.Flowable.subscribe(Flowable.java:15868)\r\n\tat io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.core.Flowable.subscribe(Flowable.java:15814)\r\n\tat org.infinispan@12.1.7.Final//org.infinispan.reactive.publisher.impl.ClusterPublisherManagerImpl$SubscriberHandler.start(ClusterPublisherManagerImpl.java:983)\r\n\tat org.infinispan@12.1.7.Final//org.infinispan.reactive.publisher.impl.ClusterPublisherManagerImpl$AbstractSegmentAwarePublisher.subscribe(ClusterPublisherManagerImpl.java:1180)\r\n\tat org.infinispan@12.1.7.Final//org.infinispan.reactive.publisher.impl.SegmentCompletionPublisher.subscribe(SegmentCompletionPublisher.java:34)\r\n\tat io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.internal.operators.flowable.FlowableFromPublisher.subscribeActual(FlowableFromPublisher.java:29)\r\n\tat io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.core.Flowable.subscribe(Flowable.java:15868)\r\n\tat io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.internal.operators.flowable.FlowableOnErrorNext.subscribeActual(FlowableOnErrorNext.java:39)\r\n\tat io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.core.Flowable.subscribe(Flowable.java:15868)\r\n\tat io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.internal.operators.flowable.BlockingFlowableIterable.iterator(BlockingFlowableIterable.java:42)\r\n\tat org.infinispan.commons@12.1.7.Final//org.infinispan.commons.util.Closeables.iterator(Closeables.java:238)\r\n\tat org.infinispan@12.1.7.Final//org.infinispan.util.Closeables.iterator(Closeables.java:26)\r\n\tat org.infinispan@12.1.7.Final//org.infinispan.stream.impl.DistributedCacheStream.iterator(DistributedCacheStream.java:376)\r\n\tat org.infinispan@12.1.7.Final//org.infinispan.stream.impl.DistributedCacheStream.spliterator(DistributedCacheStream.java:449)\r\n\tat org.infinispan@12.1.7.Final//org.infinispan.util.AbstractDelegatingCacheStream.spliterator(AbstractDelegatingCacheStream.java:187)\r\n\tat org.keycloak.keycloak-model-infinispan@16.1.1//org.keycloak.models.sessions.infinispan.InfinispanUserSessionProvider.getUserSessionsStream(InfinispanUserSessionProvider.java:373)\r\n\tat org.keycloak.keycloak-model-infinispan@16.1.1//org.keycloak.models.sessions.infinispan.InfinispanUserSessionProvider.getUserSessionsStream(InfinispanUserSessionProvider.java:398)\r\n\tat org.keycloak.keycloak-services@16.1.1//org.keycloak.services.resources.admin.UserResource.getSessions(UserResource.java:358)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:170)\r\n\tat org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:130)\r\n\tat org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.ResourceMethodInvoker.internalInvokeOnTarget(ResourceMethodInvoker.java:660)\r\n\tat org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTargetAfterFilter(ResourceMethodInvoker.java:524)\r\n\tat org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.ResourceMethodInvoker.lambda$invokeOnTarget$2(ResourceMethodInvoker.java:474)\r\n\tat org.jboss.resteasy.resteasy-\r\n    ...\r\n\r\n```\r\n\r\n  [1]: https://i.stack.imgur.com/1lhrA.png","title":"ClassCastExceptions running Keycloak with remote Infinispan cache","body":"<p><em><strong>Setup</strong></em></p>\n<p>Keycloak 16.1.1 wired up to an Infinispan 14 cluster for remote caching of session data (user sessions, authentication sessions, client sessions, etc.). Both Keycloak and Infinispan are using OpenJDK 11.</p>\n<p>Keycloak remote caching is initialized as follows:</p>\n<pre><code>echo *** Setup Infinispan cache module ***\n/subsystem=infinispan/cache-container=keycloak:write-attribute(name=module, value=org.keycloak.keycloak-model-infinispan)\n\necho *** Add remote socket binding to Infinispan cluster ***\n/socket-binding-group=standard-sockets/remote-destination-outbound-socket-binding=remote-cache:add(host=${remote.cache.host:localhost}, port=${remote.cache.port:11222})\n\necho ** Set work cache as remote store **\n/subsystem=infinispan/cache-container=keycloak/replicated-cache=work/store=remote:add( \\\n    passivation=false, \\\n    fetch-state=false, \\\n    purge=false, \\\n    preload=false, \\\n    shared=true, \\\n    cache=actionTokens, \\\n    remote-servers=[&quot;remote-cache&quot;], \\\n    properties={ \\\n        rawValues=true, \\\n        marshaller=org.keycloak.cluster.infinispan.KeycloakHotRodMarshallerFactory, \\\n        protocolVersion=${env.HOTROD_VERSION:2.8} \\\n    } \\\n)\n/subsystem=infinispan/cache-container=keycloak/replicated-cache=work:write-attribute(name=statistics-enabled,value=true)\n\necho ** Set sessions cache as remote store **\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=sessions/store=remote:add( \\\n    passivation=false, \\\n    fetch-state=false, \\\n    purge=false, \\\n    preload=false, \\\n    shared=true, \\\n    cache=actionTokens, \\\n    remote-servers=[&quot;remote-cache&quot;], \\\n    properties={ \\\n        rawValues=true, \\\n        marshaller=org.keycloak.cluster.infinispan.KeycloakHotRodMarshallerFactory, \\\n        protocolVersion=${env.HOTROD_VERSION:2.8} \\\n    } \\\n)\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=sessions:write-attribute(name=statistics-enabled,value=true)\n\necho ** Set authenticationSessions cache as remote store **\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=authenticationSessions/store=remote:add( \\\n    passivation=false, \\\n    fetch-state=false, \\\n    purge=false, \\\n    preload=false, \\\n    shared=true, \\\n    cache=actionTokens, \\\n    remote-servers=[&quot;remote-cache&quot;], \\\n    properties={ \\\n        rawValues=true, \\\n        marshaller=org.keycloak.cluster.infinispan.KeycloakHotRodMarshallerFactory, \\\n        protocolVersion=${env.HOTROD_VERSION:2.8} \\\n    } \\\n)\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=authenticationSessions:write-attribute(name=statistics-enabled,value=true)\n\necho ** Set offlineSessions cache as remote store **\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=offlineSessions/store=remote:add( \\\n    passivation=false, \\\n    fetch-state=false, \\\n    purge=false, \\\n    preload=false, \\\n    shared=true, \\\n    cache=actionTokens, \\\n    remote-servers=[&quot;remote-cache&quot;], \\\n    properties={ \\\n        rawValues=true, \\\n        marshaller=org.keycloak.cluster.infinispan.KeycloakHotRodMarshallerFactory, \\\n        protocolVersion=${env.HOTROD_VERSION:2.8} \\\n    } \\\n)\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=offlineSessions:write-attribute(name=statistics-enabled,value=true)\n\necho ** Set clientSessions cache as remote store **\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=clientSessions/store=remote:add( \\\n    passivation=false, \\\n    fetch-state=false, \\\n    purge=false, \\\n    preload=false, \\\n    shared=true, \\\n    cache=actionTokens, \\\n    remote-servers=[&quot;remote-cache&quot;], \\\n    properties={ \\\n        rawValues=true, \\\n        marshaller=org.keycloak.cluster.infinispan.KeycloakHotRodMarshallerFactory, \\\n        protocolVersion=${env.HOTROD_VERSION:2.8} \\\n    } \\\n)\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=clientSessions:write-attribute(name=statistics-enabled,value=true)\n\necho ** Set offlineClientSessions cache as remote store **\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=offlineClientSessions/store=remote:add( \\\n    passivation=false, \\\n    fetch-state=false, \\\n    purge=false, \\\n    preload=false, \\\n    shared=true, \\\n    cache=actionTokens, \\\n    remote-servers=[&quot;remote-cache&quot;], \\\n    properties={ \\\n        rawValues=true, \\\n        marshaller=org.keycloak.cluster.infinispan.KeycloakHotRodMarshallerFactory, \\\n        protocolVersion=${env.HOTROD_VERSION:2.8} \\\n    } \\\n)\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=offlineClientSessions:write-attribute(name=statistics-enabled,value=true)\n\necho ** Set loginFailure cache as remote store **\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=loginFailures/store=remote:add( \\\n    passivation=false, \\\n    fetch-state=false, \\\n    purge=false, \\\n    preload=false, \\\n    shared=true, \\\n    cache=actionTokens, \\\n    remote-servers=[&quot;remote-cache&quot;], \\\n    properties={ \\\n        rawValues=true, \\\n        marshaller=org.keycloak.cluster.infinispan.KeycloakHotRodMarshallerFactory, \\\n        protocolVersion=${env.HOTROD_VERSION:2.8} \\\n    } \\\n)\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=loginFailures:write-attribute(name=statistics-enabled,value=true)\n\necho ** Set actionTokens cache as remote store **\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=actionTokens/store=remote:add( \\\n    passivation=false, \\\n    fetch-state=false, \\\n    purge=false, \\\n    preload=false, \\\n    shared=true, \\\n    cache=actionTokens, \\\n    remote-servers=[&quot;remote-cache&quot;], \\\n    properties={ \\\n        rawValues=true, \\\n        marshaller=org.keycloak.cluster.infinispan.KeycloakHotRodMarshallerFactory, \\\n        protocolVersion=${env.HOTROD_VERSION:2.8} \\\n    } \\\n)\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=actionTokens:write-attribute(name=statistics-enabled,value=true)\n\necho *** Setting CACHE_OWNERS to &quot;${env.CACHE_OWNERS}&quot; in all cache-containers ***\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=sessions:write-attribute(name=owners, value=${env.CACHE_OWNERS:1})\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=authenticationSessions:write-attribute(name=owners, value=${env.CACHE_OWNERS:1})\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=offlineSessions:write-attribute(name=owners, value=${env.CACHE_OWNERS:1})\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=clientSessions:write-attribute(name=owners, value=${env.CACHE_OWNERS:1})\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=offlineClientSessions:write-attribute(name=owners, value=${env.CACHE_OWNERS:1})\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=loginFailures:write-attribute(name=owners, value=${env.CACHE_OWNERS:1})\n/subsystem=infinispan/cache-container=keycloak/distributed-cache=actionTokens:write-attribute(name=owners, value=${env.CACHE_OWNERS:1})\n\n</code></pre>\n<p>Infinispan cluster config is:</p>\n<pre><code>   &lt;cache-container name=&quot;default&quot; statistics=&quot;true&quot;&gt;\n      &lt;transport cluster=&quot;${infinispan.cluster.name:default-ispan-cluster}&quot; node-name=&quot;${infinispan.node.name:env.HOST}&quot; stack=&quot;nxt-stack&quot;/&gt;\n      &lt;serialization marshaller=&quot;org.infinispan.jboss.marshalling.commons.GenericJBossMarshaller&quot;&gt;\n         &lt;allow-list&gt;\n            &lt;regex&gt;org.keycloak.*&lt;/regex&gt;\n            &lt;regex&gt;java.util.*&lt;/regex&gt;\n         &lt;/allow-list&gt;\n      &lt;/serialization&gt;\n      &lt;replicated-cache-configuration name=&quot;sessions-cfg&quot; start=&quot;EAGER&quot;&gt;\n         &lt;transaction mode=&quot;NON_XA&quot; locking=&quot;PESSIMISTIC&quot;/&gt;\n      &lt;/replicated-cache-configuration&gt;\n      &lt;replicated-cache name=&quot;work&quot; configuration=&quot;sessions-cfg&quot;&gt;\n         &lt;encoding media-type=&quot;application/x-jboss-marshalling&quot;/&gt;\n      &lt;/replicated-cache&gt;\n      &lt;replicated-cache name=&quot;sessions&quot; configuration=&quot;sessions-cfg&quot;&gt;\n         &lt;encoding media-type=&quot;application/x-jboss-marshalling&quot;/&gt;\n      &lt;/replicated-cache&gt;\n      &lt;replicated-cache name=&quot;authenticationSessions&quot; configuration=&quot;sessions-cfg&quot;&gt;\n         &lt;encoding media-type=&quot;application/x-jboss-marshalling&quot;/&gt;\n      &lt;/replicated-cache&gt;\n      &lt;replicated-cache name=&quot;offlineSessions&quot; configuration=&quot;sessions-cfg&quot;&gt;\n         &lt;encoding media-type=&quot;application/x-jboss-marshalling&quot;/&gt;\n      &lt;/replicated-cache&gt;\n      &lt;replicated-cache name=&quot;clientSessions&quot; configuration=&quot;sessions-cfg&quot;&gt;\n         &lt;encoding media-type=&quot;application/x-jboss-marshalling&quot;/&gt;\n      &lt;/replicated-cache&gt;\n      &lt;replicated-cache name=&quot;offlineClientSessions&quot; configuration=&quot;sessions-cfg&quot;&gt;\n         &lt;encoding media-type=&quot;application/x-jboss-marshalling&quot;/&gt;\n      &lt;/replicated-cache&gt;\n      &lt;replicated-cache name=&quot;actionTokens&quot; configuration=&quot;sessions-cfg&quot;&gt;\n         &lt;encoding media-type=&quot;application/x-jboss-marshalling&quot;/&gt;\n      &lt;/replicated-cache&gt;\n      &lt;replicated-cache name=&quot;loginFailures&quot; configuration=&quot;sessions-cfg&quot;&gt;\n         &lt;encoding media-type=&quot;application/x-jboss-marshalling&quot;/&gt;\n      &lt;/replicated-cache&gt;\n   &lt;/cache-container&gt;\n</code></pre>\n<p><em><strong>Problem</strong></em></p>\n<p>I can confirm <em>some</em> of the cache data is stored in Infinispan (namely actionTokens).</p>\n<p><a href=\"https://i.stack.imgur.com/1lhrA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1lhrA.png\" alt=\"enter image description here\" /></a></p>\n<p>However, I'm getting ClassCastExceptions on Keycloak side for most cache retrievals, including user sessions, all citing the inability to cast to <strong>SessionEntityWrapper</strong>.</p>\n<p>You can easily reproduce the error below by simply viewing user sessions on Keycloak admin console or attempting a login. (This happens when attempting a cast to <code>RootAuthenticationSessionEntity</code> as well)</p>\n<pre><code>07:29:36,571 ERROR [org.keycloak.services.error.KeycloakErrorHandler] (default task-2) Uncaught server error: com.fasterxml.jackson.databind.JsonMappingException: java.lang.ClassCastException: class java.lang.Boolean cannot be cast to class org.keycloak.models.sessions.infinispan.changes.SessionEntityWrapper (java.lang.Boolean is in module java.base of loader 'bootstrap'; org.keycloak.models.sessions.infinispan.changes.SessionEntityWrapper is in unnamed module of loader 'org.keycloak.keycloak-model-infinispan@16.1.1' @70e80e4f)\n    at com.fasterxml.jackson.core.jackson-databind@2.12.3//com.fasterxml.jackson.databind.ser.DefaultSerializerProvider._wrapAsIOE(DefaultSerializerProvider.java:509)\n    at com.fasterxml.jackson.core.jackson-databind@2.12.3//com.fasterxml.jackson.databind.ser.DefaultSerializerProvider._serialize(DefaultSerializerProvider.java:482)\n    at com.fasterxml.jackson.core.jackson-databind@2.12.3//com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:400)\n    at com.fasterxml.jackson.core.jackson-databind@2.12.3//com.fasterxml.jackson.databind.ObjectWriter$Prefetch.serialize(ObjectWriter.java:1510)\n    at com.fasterxml.jackson.core.jackson-databind@2.12.3//com.fasterxml.jackson.databind.ObjectWriter.writeValue(ObjectWriter.java:1006)\n    at org.jboss.resteasy.resteasy-jackson2-provider@4.7.4.Final//org.jboss.resteasy.plugins.providers.jackson.ResteasyJackson2Provider.writeTo(ResteasyJackson2Provider.java:345)\n    at org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.messagebody.AsyncBufferedMessageBodyWriter.asyncWriteTo(AsyncBufferedMessageBodyWriter.java:24)\n    at org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.interception.jaxrs.ServerWriterInterceptorContext.writeTo(ServerWriterInterceptorContext.java:87)\n    at org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.interception.jaxrs.AbstractWriterInterceptorContext.asyncProceed(AbstractWriterInterceptorContext.java:203)\n    at org.jboss.resteasy.resteasy-crypto@4.7.4.Final//org.jboss.resteasy.security.doseta.DigitalSigningInterceptor.asyncAroundWriteTo(DigitalSigningInterceptor.java:169)\n    at org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.interception.jaxrs.AbstractWriterInterceptorContext.asyncProceed(AbstractWriterInterceptorContext.java:211)\n    at org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.interception.jaxrs.AbstractWriterInterceptorContext.getStarted(AbstractWriterInterceptorContext.java:166)\n    at org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.interception.jaxrs.ServerWriterInterceptorContext.lambda$getStarted$0(ServerWriterInterceptorContext.java:73)\n    at org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.interception.jaxrs.ServerWriterInterceptorContext.aroundWriteTo(ServerWriterInterceptorContext.java:93)\n    at org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.interception.jaxrs.ServerWriterInterceptorContext.getStarted(ServerWriterInterceptorContext.java:73)\n    at org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.ServerResponseWriter.lambda$writeNomapResponse$3(ServerResponseWriter.java:163)\n    at org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.interception.jaxrs.ContainerResponseContextImpl.filter(ContainerResponseContextImpl.java:404)\n    at org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.ServerResponseWriter.executeFilters(ServerResponseWriter.java:252)\n    at org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.ServerResponseWriter.writeNomapResponse(ServerResponseWriter.java:101)\n    at org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.ServerResponseWriter.writeNomapResponse(ServerResponseWriter.java:74)\n    at org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.SynchronousDispatcher.writeResponse(SynchronousDispatcher.java:594)\n    at org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:524)\n    at org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.SynchronousDispatcher.lambda$invoke$4(SynchronousDispatcher.java:261)\n    at org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.SynchronousDispatcher.lambda$preprocess$0(SynchronousDispatcher.java:161)\n    at org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.interception.jaxrs.PreMatchContainerRequestContext.filter(PreMatchContainerRequestContext.java:364)\n    at org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.SynchronousDispatcher.preprocess(SynchronousDispatcher.java:164)\n    at org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:247)\n    at org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:249)\n    at org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:60)\n    at org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:55)\n    at javax.servlet.api@2.0.0.Final//javax.servlet.http.HttpServlet.service(HttpServlet.java:590)\n    at io.undertow.servlet@2.2.14.Final//io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:74)\n    at io.undertow.servlet@2.2.14.Final//io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:129)\n    at org.keycloak.keycloak-wildfly-extensions@16.1.1//org.keycloak.provider.wildfly.WildFlyRequestFilter.lambda$doFilter$0(WildFlyRequestFilter.java:41)\n    at org.keycloak.keycloak-services@16.1.1//org.keycloak.services.filters.AbstractRequestFilter.filter(AbstractRequestFilter.java:43)\n    at org.keycloak.keycloak-wildfly-extensions@16.1.1//org.keycloak.provider.wildfly.WildFlyRequestFilter.doFilter(WildFlyRequestFilter.java:39)\n    at io.undertow.servlet@2.2.14.Final//io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)\n    at io.undertow.servlet@2.2.14.Final//io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\n    at io.undertow.servlet@2.2.14.Final//io.undertow.servlet.handlers.FilterHandler.handleRequest(FilterHandler.java:84)\n    at io.undertow.servlet@2.2.14.Final//io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62)\n    at io.undertow.servlet@2.2.14.Final//io.undertow.servlet.handlers.ServletChain$1.handleRequest(ServletChain.java:68)\n    at io.undertow.servlet@2.2.14.Final//io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36)\n    at org.wildfly.security.elytron-web.undertow-server@1.10.1.Final//org.wildfly.elytron.web.undertow.server.ElytronRunAsHandler.lambda$handleRequest$1(ElytronRunAsHandler.java:68)\n    at org.wildfly.security.elytron-base@1.18.3.Final//org.wildfly.security.auth.server.FlexibleIdentityAssociation.runAsFunctionEx(FlexibleIdentityAssociation.java:103)\n    at org.wildfly.security.elytron-base@1.18.3.Final//org.wildfly.security.auth.server.Scoped.runAsFunctionEx(Scoped.java:161)\n    at org.wildfly.security.elytron-base@1.18.3.Final//org.wildfly.security.auth.server.Scoped.runAs(Scoped.java:73)\n    at org.wildfly.security.elytron-web.undertow-server@1.10.1.Final//org.wildfly.elytron.web.undertow.server.ElytronRunAsHandler.handleRequest(ElytronRunAsHandler.java:67)\n    at io.undertow.servlet@2.2.14.Final//io.undertow.servlet.handlers.RedirectDirHandler.handleRequest(RedirectDirHandler.java:68)\n    at io.undertow.servlet@2.2.14.Final//io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:117)\n    at io.undertow.servlet@2.2.14.Final//io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57)\n    at io.undertow.core@2.2.14.Final//io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n    at io.undertow.core@2.2.14.Final//io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46)\n    at io.undertow.servlet@2.2.14.Final//io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64)\n    at io.undertow.core@2.2.14.Final//io.undertow.security.handlers.AbstractSecurityContextAssociationHandler.handleRequest(AbstractSecurityContextAssociationHandler.java:43)\n    at org.wildfly.security.elytron-web.undertow-server-servlet@1.10.1.Final//org.wildfly.elytron.web.undertow.server.servlet.CleanUpHandler.handleRequest(CleanUpHandler.java:38)\n    at io.undertow.core@2.2.14.Final//io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n    at org.wildfly.extension.undertow@26.0.1.Final//org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)\n    at io.undertow.core@2.2.14.Final//io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n    at org.wildfly.extension.undertow@26.0.1.Final//org.wildfly.extension.undertow.deployment.GlobalRequestControllerHandler.handleRequest(GlobalRequestControllerHandler.java:68)\n    at io.undertow.servlet@2.2.14.Final//io.undertow.servlet.handlers.SendErrorPageHandler.handleRequest(SendErrorPageHandler.java:52)\n    at io.undertow.core@2.2.14.Final//io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n    at io.undertow.servlet@2.2.14.Final//io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:275)\n    at io.undertow.servlet@2.2.14.Final//io.undertow.servlet.handlers.ServletInitialHandler.access$100(ServletInitialHandler.java:79)\n    at io.undertow.servlet@2.2.14.Final//io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:134)\n    at io.undertow.servlet@2.2.14.Final//io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:131)\n    at io.undertow.servlet@2.2.14.Final//io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:48)\n    at io.undertow.servlet@2.2.14.Final//io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)\n    at org.wildfly.extension.undertow@26.0.1.Final//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1544)\n    at org.wildfly.extension.undertow@26.0.1.Final//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1544)\n    at org.wildfly.extension.undertow@26.0.1.Final//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1544)\n    at org.wildfly.extension.undertow@26.0.1.Final//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1544)\n    at io.undertow.servlet@2.2.14.Final//io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:255)\n    at io.undertow.servlet@2.2.14.Final//io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:79)\n    at io.undertow.servlet@2.2.14.Final//io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:100)\n    at io.undertow.core@2.2.14.Final//io.undertow.server.Connectors.executeRootHandler(Connectors.java:387)\n    at io.undertow.core@2.2.14.Final//io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:852)\n    at org.jboss.threads@2.4.0.Final//org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\n    at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\n    at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\n    at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\n    at org.jboss.xnio@3.8.5.Final//org.xnio.XnioWorker$WorkerThreadFactory$1$1.run(XnioWorker.java:1280)\n    at java.base/java.lang.Thread.run(Thread.java:829)\nCaused by: org.infinispan.commons.CacheException: java.lang.ClassCastException: class java.lang.Boolean cannot be cast to class org.keycloak.models.sessions.infinispan.changes.SessionEntityWrapper (java.lang.Boolean is in module java.base of loader 'bootstrap'; org.keycloak.models.sessions.infinispan.changes.SessionEntityWrapper is in unnamed module of loader 'org.keycloak.keycloak-model-infinispan@16.1.1' @70e80e4f)\n    at org.infinispan.commons@12.1.7.Final//org.infinispan.commons.util.Util.rewrapAsCacheException(Util.java:686)\n    at org.infinispan.commons@12.1.7.Final//org.infinispan.commons.reactive.RxJavaInterop.lambda$static$2(RxJavaInterop.java:47)\n    at io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.internal.operators.flowable.FlowableOnErrorNext$OnErrorNextSubscriber.onError(FlowableOnErrorNext.java:94)\n    at io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.internal.operators.flowable.FlowableRepeatUntil$RepeatSubscriber.onError(FlowableRepeatUntil.java:72)\n    at io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.internal.operators.flowable.FlowableDoOnLifecycle$SubscriptionLambdaSubscriber.onError(FlowableDoOnLifecycle.java:86)\n    at io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.processors.UnicastProcessor.checkTerminated(UnicastProcessor.java:415)\n    at io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.processors.UnicastProcessor.drainRegular(UnicastProcessor.java:301)\n    at io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.processors.UnicastProcessor.drain(UnicastProcessor.java:384)\n    at io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.processors.UnicastProcessor.subscribeActual(UnicastProcessor.java:486)\n    at io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.core.Flowable.subscribe(Flowable.java:15868)\n    at io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.internal.operators.flowable.FlowableDoOnLifecycle.subscribeActual(FlowableDoOnLifecycle.java:39)\n    at io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.core.Flowable.subscribe(Flowable.java:15868)\n    at io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.core.Flowable.subscribe(Flowable.java:15814)\n    at io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.internal.operators.flowable.FlowableScalarXMap$ScalarXMapFlowable.subscribeActual(FlowableScalarXMap.java:160)\n    at io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.core.Flowable.subscribe(Flowable.java:15868)\n    at io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.core.Flowable.subscribe(Flowable.java:15814)\n    at io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.internal.operators.flowable.FlowableScalarXMap$ScalarXMapFlowable.subscribeActual(FlowableScalarXMap.java:160)\n    at io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.core.Flowable.subscribe(Flowable.java:15868)\n    at io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.core.Flowable.subscribe(Flowable.java:15814)\n    at io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.internal.operators.flowable.FlowableRepeatUntil$RepeatSubscriber.subscribeNext(FlowableRepeatUntil.java:109)\n    at io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.internal.operators.flowable.FlowableRepeatUntil.subscribeActual(FlowableRepeatUntil.java:38)\n    at io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.core.Flowable.subscribe(Flowable.java:15868)\n    at io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.core.Flowable.subscribe(Flowable.java:15814)\n    at org.infinispan@12.1.7.Final//org.infinispan.reactive.publisher.impl.ClusterPublisherManagerImpl$SubscriberHandler.start(ClusterPublisherManagerImpl.java:983)\n    at org.infinispan@12.1.7.Final//org.infinispan.reactive.publisher.impl.ClusterPublisherManagerImpl$AbstractSegmentAwarePublisher.subscribe(ClusterPublisherManagerImpl.java:1180)\n    at org.infinispan@12.1.7.Final//org.infinispan.reactive.publisher.impl.SegmentCompletionPublisher.subscribe(SegmentCompletionPublisher.java:34)\n    at io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.internal.operators.flowable.FlowableFromPublisher.subscribeActual(FlowableFromPublisher.java:29)\n    at io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.core.Flowable.subscribe(Flowable.java:15868)\n    at io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.internal.operators.flowable.FlowableOnErrorNext.subscribeActual(FlowableOnErrorNext.java:39)\n    at io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.core.Flowable.subscribe(Flowable.java:15868)\n    at io.reactivex.rxjava3.rxjava//io.reactivex.rxjava3.internal.operators.flowable.BlockingFlowableIterable.iterator(BlockingFlowableIterable.java:42)\n    at org.infinispan.commons@12.1.7.Final//org.infinispan.commons.util.Closeables.iterator(Closeables.java:238)\n    at org.infinispan@12.1.7.Final//org.infinispan.util.Closeables.iterator(Closeables.java:26)\n    at org.infinispan@12.1.7.Final//org.infinispan.stream.impl.DistributedCacheStream.iterator(DistributedCacheStream.java:376)\n    at org.infinispan@12.1.7.Final//org.infinispan.stream.impl.DistributedCacheStream.spliterator(DistributedCacheStream.java:449)\n    at org.infinispan@12.1.7.Final//org.infinispan.util.AbstractDelegatingCacheStream.spliterator(AbstractDelegatingCacheStream.java:187)\n    at org.keycloak.keycloak-model-infinispan@16.1.1//org.keycloak.models.sessions.infinispan.InfinispanUserSessionProvider.getUserSessionsStream(InfinispanUserSessionProvider.java:373)\n    at org.keycloak.keycloak-model-infinispan@16.1.1//org.keycloak.models.sessions.infinispan.InfinispanUserSessionProvider.getUserSessionsStream(InfinispanUserSessionProvider.java:398)\n    at org.keycloak.keycloak-services@16.1.1//org.keycloak.services.resources.admin.UserResource.getSessions(UserResource.java:358)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:170)\n    at org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:130)\n    at org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.ResourceMethodInvoker.internalInvokeOnTarget(ResourceMethodInvoker.java:660)\n    at org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTargetAfterFilter(ResourceMethodInvoker.java:524)\n    at org.jboss.resteasy.resteasy-core@4.7.4.Final//org.jboss.resteasy.core.ResourceMethodInvoker.lambda$invokeOnTarget$2(ResourceMethodInvoker.java:474)\n    at org.jboss.resteasy.resteasy-\n    ...\n\n</code></pre>\n"},{"tags":["java","spring","database","spring-boot","jdbc"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1694411012,"post_id":77077781,"comment_id":135882244,"body_markdown":"IDE not knowing all dependencies and configurations. Ignore it.","body":"IDE not knowing all dependencies and configurations. Ignore it."}],"owner":{"account_id":17717136,"reputation":11,"user_id":12863181,"display_name":"Дени Bravo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1694655191,"creation_date":1694377952,"question_id":77077781,"body_markdown":"I followed the examples from SpringBoot Framework which starts here and got the next [error](https://i.stack.imgur.com/VOPX5.png) when I tried to add the Spring bean\r\n\r\n\r\nPom.xml\r\n```\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n            &lt;version&gt;2.2.222&lt;/version&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\n\r\nI try to make an insert into bd and bd doesn&#39;t change, The app itself works but doesn&#39;t connect the database, and JDBC is null.","title":"How to fix: &quot;Could not autowire. No beans of &#39;JdbcTemplate&#39; type found&quot; in spring-boot","body":"<p>I followed the examples from SpringBoot Framework which starts here and got the next <a href=\"https://i.stack.imgur.com/VOPX5.png\" rel=\"nofollow noreferrer\">error</a> when I tried to add the Spring bean</p>\n<p>Pom.xml</p>\n<pre><code>    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n            &lt;version&gt;2.2.222&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n\n</code></pre>\n<p>I try to make an insert into bd and bd doesn't change, The app itself works but doesn't connect the database, and JDBC is null.</p>\n"},{"tags":["java","spring-boot","kubernetes","redis","redis-sentinel"],"owner":{"account_id":29429139,"reputation":11,"user_id":22549161,"display_name":"Aykut M&#220;N&#220;K"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":185,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1694655078,"creation_date":1694590719,"question_id":77094991,"body_markdown":"Dears,\r\n\r\nI tried to access remote redis cache services from redis sentinel services for high availability. But sentinel server couldnt resolve redis host name.\r\n\r\n```\r\njava.net.UnknownHostException: No such host is known (redis-0.redis.xxxx-service-platform.svc.cluster.local)\r\n\tat java.net.Inet6AddressImpl.lookupAllHostAddr(Inet6AddressImpl.java)\r\n\tat java.net.InetAddress$PlatformNameService.lookupAllHostAddr(InetAddress.java:929)\r\n\t... 38 frames excluded\r\nWrapped by: io.lettuce.core.RedisConnectionException: Unable to connect to redis-0.redis.xxxx-service-platform.svc.cluster.local:6379\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)\r\n\tat io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)\r\n\t... 6 frames excluded\r\n\t... 28 common frames omitted`\r\n```\r\n\r\nAlso I see above the log on sentinel services like as the follows\r\n\r\n```\r\n1:X 12 Sep 2023 21:56:50.711 # Failed to resolve hostname &#39;redis-0.redis.xxxx-service-platform.svc.cluster.local&#39;\r\n1:X 12 Sep 2023 21:56:51.773 # Failed to resolve hostname &#39;redis-0.redis.xxxx-service-platform.svc.cluster.local&#39;\r\n1:X 12 Sep 2023 21:56:52.806 # Failed to resolve hostname &#39;redis-0.redis.xxxx-service-platform.svc.cluster.local&#39;\r\n1:X 12 Sep 2023 21:56:53.838 # Failed to resolve hostname &#39;redis-0.redis.xxxx-service-platform.svc.cluster.local&#39;\r\n1:X 12 Sep 2023 21:56:54.908 # Failed to resolve hostname &#39;redis-0.redis.xxxx-service-platform.svc.cluster.local&#39;\r\n1:X 12 Sep 2023 21:56:55.914 # Failed to resolve hostname &#39;redis-0.redis.xxxx-service-platform.svc.cluster.local&#39;\r\n1:X 12 Sep 2023 21:56:56.925 # Failed to resolve hostname &#39;redis-0.redis.xxxx-service-platform.svc.cluster.local&#39;\r\n1:X 12 Sep 2023 21:56:57.967 # Failed to resolve hostname &#39;redis-0.redis.xxxx-service-platform.svc.cluster.local&#39;\r\n1:X 12 Sep 2023 21:56:59.037 # Failed to resolve hostname &#39;redis-0.redis.xxxx-service-platform.svc.cluster.local&#39;\r\n```\r\n\r\nCould you help me how to solve the problem?\r\n\r\nI tried too much configuration but they didnt work, Sentinel and redis works the same cluster but on remote server, but sentinel should solve redis hostname\r\n\r\n    apiVersion: v1\r\n    kind: ConfigMap\r\n    metadata:\r\n      name: redis-config-map\r\n    data:\r\n      # Variable needed for sentinel init container\r\n      REDIS_NODES: &quot;redis-0.redis,redis-1.redis,redis-2.redis&quot;\r\n    \r\n      # Config used in all redises\r\n      redis.conf: |\r\n        # Redis configuration file example.\r\n        # ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n        bind 0.0.0.0\r\n        # Protected mode is a layer of security protection, in order to avoid that\r\n       \r\n        # Close the connection after a client is idle for N seconds (0 to disable)\r\n        timeout 300\r\n        \r\n        # A reasonable value for this option is 300 seconds, which is the new\r\n        # Redis default starting with Redis 3.2.1.\r\n        tcp-keepalive 30\r\n       \r\n        # Configure allowed ciphers.  See the ciphers(1ssl) manpage for more information\r\n        # about the syntax of this string.\r\n        #\r\n        # Note: this configuration applies only to &lt;= TLSv1.2.\r\n        #\r\n        # tls-ciphers DEFAULT:!MEDIUM\r\n        # Configure allowed TLSv1.3 ciphersuites.  See the ciphers(1ssl) manpage for more\r\n        # information about the syntax of this string, and specifically for TLSv1.3\r\n        # ciphersuites.\r\n        #\r\n        # tls-ciphersuites TLS_CHACHA20_POLY1305_SHA256\r\n        # When choosing a cipher, use the server&#39;s preference instead of the client\r\n        # preference. By default, the server follows the client&#39;s preference.\r\n\r\n\r\n\r\n        # verbose (many rarely useful info, but not a mess like the debug level)\r\n        # notice (moderately verbose, what you want in production probably)\r\n        # warning (only very important / critical messages are logged)\r\n        loglevel notice\r\n        # Specify the log file name. Also the empty string can be used to force\r\n        # Redis to log on the standard output. Note that if you use standard\r\n        # output for logging but daemonize, logs will be sent to /dev/null\r\n        logfile &quot;&quot;\r\n        # To enable logging to the system logger, just set &#39;syslog-enabled&#39; to yes,\r\n        # and optionally update the other syslog parameters to suit your needs.\r\n        # syslog-enabled no\r\n        # Specify the syslog identity.\r\n        # syslog-ident redis\r\n        # Specify the syslog facility. Must be USER or between LOCAL0-LOCAL7.\r\n        # syslog-facility local0\r\n        # Set the number of databases. The default database is DB 0, you can select\r\n        \r\n        # ASCII art logo in startup logs by setting the following option to yes.\r\n        always-show-logo yes\r\n        ################################ SNAPSHOTTING  ################################\r\n       \r\n        #\r\n        # RDB files created with checksum disabled have a checksum of zero that will\r\n        # tell the loading code to skip the check.\r\n        rdbchecksum yes\r\n        # The filename where to dump the DB\r\n        # dbfilename &quot;dump.rdb&quot;\r\n        # Remove RDB files used by replication in instances without persistence\r\n        # enabled. By default this option is disabled, however there are environments\r\n        # where for regulations or other security concerns, RDB files persisted on\r\n        # disk by masters in order to feed replicas, or stored on disk by replicas\r\n\r\n        #\r\n        # Note that you must specify a directory here, not a file name.\r\n        dir &quot;/data&quot;\r\n       \r\n        # When a replica loses its connection with the master, or when the replication\r\n        \r\n        \r\n        # With slow disks and fast (large bandwidth) networks, diskless replication\r\n        # works better.\r\n        repl-diskless-sync no\r\n        # When diskless replication is enabled, it is possible to configure the delay\r\n        \r\n        repl-diskless-sync-delay 5\r\n        \r\n        \r\n   \r\n        repl-diskless-load disabled\r\n        # Replicas send PINGs to server in a predefined interval. It&#39;s possible to\r\n        # change this interval with the repl_ping_replica_period option. The default\r\n        # value is 10 seconds.\r\n        #\r\n        appendonly no\r\n        # repl-ping-replica-period 10\r\n        # The following option sets the replication timeout for:\r\n        #\r\n        \r\n        # It is important to make sure that this value is greater than the value\r\n        # specified for repl-ping-replica-period otherwise a timeout will be detected\r\n        # every time there is low traffic between the master and the replica.\r\n        #\r\n        # repl-timeout 60\r\n        \r\n        # Linux kernels using a default configuration.\r\n        #\r\n        # If you select &quot;no&quot; the delay for data to appear on the replica side will\r\n        # be reduced but more bandwidth will be used for replication.\r\n        #\r\n        # By default we optimize for low latency, but in very high traffic conditions\r\n        # or when the master and replicas are many hops away, turning this to &quot;yes&quot; may\r\n        # be a good idea.\r\n        repl-disable-tcp-nodelay no\r\n        # Set the replication backlog size. The backlog is a buffer that accumulates\r\n        # replica data when replicas are disconnected for some time, so that when a\r\n        # replica wants to reconnect again, often a full resync is not needed, but a\r\n        # partial resync is enough, just passing the portion of data the replica\r\n        # missed while disconnected.\r\n        #\r\n        # The bigger the replication backlog, the longer the time the replica can be\r\n        # disconnected and later be able to perform a partial resynchronization.\r\n        #\r\n        # The backlog is only allocated once there is at least a replica connected.\r\n        #\r\n        # repl-backlog-size 1mb\r\n        # After a master has no longer connected replicas for some time, the backlog\r\n        # will be freed. The following option configures the amount of seconds that\r\n        # need to elapse, starting from the time the last replica disconnected, for\r\n        # the backlog buffer to be freed.\r\n        #\r\n        # Note that replicas never free the backlog for timeout, since they may be\r\n        # promoted to masters later, and should be able to correctly &quot;partially\r\n        # resynchronize&quot; with the replicas: hence they should always accumulate backlog.\r\n        #\r\n        # A value of 0 means to never release the backlog.\r\n        #\r\n        # repl-backlog-ttl 3600\r\n        # The replica priority is an integer number published by Redis in the INFO\r\n        # output. It is used by Redis Sentinel in order to select a replica to promote\r\n        # into a master if the master is no longer working correctly.\r\n        #\r\n        # A replica with a low priority number is considered better for promotion, so\r\n        # for instance if there are three replicas with priority 10, 100, 25 Sentinel\r\n        # will pick the one with priority 10, that is the lowest.\r\n        #\r\n        # However a special priority of 0 marks the replica as not able to perform the\r\n        # role of master, so a replica with priority of 0 will never be selected by\r\n        # Redis Sentinel for promotion.\r\n        #\r\n        # By default the priority is 100.\r\n        replica-priority 100\r\n        # It is possible for a master to stop accepting writes if there are less than\r\n        # N replicas connected, having a lag less or equal than M seconds.\r\n        #\r\n        # The N replicas need to be in &quot;online&quot; state.\r\n        #\r\n        # The lag in seconds, that must be &lt;= the specified value, is calculated from\r\n        # the last ping received from the replica, that is usually sent every second.\r\n        #\r\n        # This option does not GUARANTEE that N replicas will accept the write, but\r\n        # will limit the window of exposure for lost writes in case not enough replicas\r\n        # are available, to the specified number of seconds.\r\n        #\r\n        # For example to require at least 3 replicas with a lag &lt;= 10 seconds use:\r\n        #\r\n        # min-replicas-to-write 3\r\n        # min-replicas-max-lag 10\r\n        #\r\n        # Setting one or the other to 0 disables the feature.\r\n        #\r\n        # By default min-replicas-to-write is set to 0 (feature disabled) and\r\n        # min-replicas-max-lag is set to 10.\r\n        # A Redis master is able to list the address and port of the attached\r\n        # replicas in different ways. For example the &quot;INFO replication&quot; section\r\n        # offers this information, which is used, among other tools, by\r\n        # Redis Sentinel in order to discover replica instances.\r\n        # Another place where this info is available is in the output of the\r\n        # &quot;ROLE&quot; command of a master.\r\n        #\r\n        # The listed IP and address normally reported by a replica is obtained\r\n        # in the following way:\r\n        #\r\n        #   IP: The address is auto detected by checking the peer address\r\n        #   of the socket used by the replica to connect with the master.\r\n        #\r\n        #   Port: The port is communicated by the replica during the replication\r\n        #   handshake, and is normally the port that the replica is using to\r\n        #   listen for connections.\r\n        #\r\n        # However when port forwarding or Network Address Translation (NAT) is\r\n        # used, the replica may be actually reachable via different IP and port\r\n        # pairs. The following two options can be used by a replica in order to\r\n        # report to its master a specific set of IP and port, so that both INFO\r\n        # and ROLE will report those values.\r\n        #\r\n        # There is no need to use both the options if you need to override just\r\n        # the port or the IP address.\r\n        #\r\n        # replica-announce-ip 5.5.5.5\r\n        # replica-announce-port 1234\r\n        ############################### KEYS TRACKING #################################\r\n        # Redis implements server assisted support for client side caching of values.\r\n        # This is implemented using an invalidation table that remembers, using\r\n        # 16 millions of slots, what clients may have certain subsets of keys. In turn\r\n        # this is used in order to send invalidation messages to clients. Please\r\n        # to understand more about the feature check this page:\r\n        #\r\n        #   https://redis.io/topics/client-side-caching\r\n        #\r\n        # When tracking is enabled for a client, all the read only queries are assumed\r\n        # to be cached: this will force Redis to store information in the invalidation\r\n        # table. When keys are modified, such information is flushed away, and\r\n        # invalidation messages are sent to the clients. However if the workload is\r\n        # heavily dominated by reads, Redis could use more and more memory in order\r\n        # to track the keys fetched by many clients.\r\n        #\r\n        # For this reason it is possible to configure a maximum fill value for the\r\n        # invalidation table. By default it is set to 1M of keys, and once this limit\r\n        # is reached, Redis will start to evict keys in the invalidation table\r\n        # even if they were not modified, just to reclaim memory: this will in turn\r\n        # force the clients to invalidate the cached values. Basically the table\r\n        # maximum size is a trade off between the memory you want to spend server\r\n        # side to track information about who cached what, and the ability of clients\r\n        # to retain cached objects in memory.\r\n        #\r\n        # If you set the value to 0, it means there are no limits, and Redis will\r\n        # retain as many keys as needed in the invalidation table.\r\n        # In the &quot;stats&quot; INFO section, you can find information about the number of\r\n        # keys in the invalidation table at every given moment.\r\n        #\r\n        # Note: when key tracking is used in broadcasting mode, no memory is used\r\n        # in the server side so this setting is useless.\r\n        #\r\n        # tracking-table-max-keys 1000000\r\n        ################################## SECURITY ###################################\r\n        # Warning: since Redis is pretty fast an outside user can try up to\r\n        # 1 million passwords per second against a modern box. This means that you\r\n        # should use very strong passwords, otherwise they will be very easy to break.\r\n        # Note that because the password is really a shared secret between the client\r\n        # and the server, and should not be memorized by any human, the password\r\n        # can be easily a long string from /dev/urandom or whatever, so by using a\r\n        # long and unguessable password no brute force attack will be possible.\r\n        # Redis ACL users are defined in the following format:\r\n        #\r\n        #   user &lt;username&gt; ... acl rules ...\r\n        #\r\n        # For example:\r\n        #\r\n        #   user worker +@list +@connection ~jobs:* on &gt;ffa9203c493aa99\r\n        #\r\n        # The special username &quot;default&quot; is used for new connections. If this user\r\n        # has the &quot;nopass&quot; rule, then new connections will be immediately authenticated\r\n        # as the &quot;default&quot; user without the need of any password provided via the\r\n        # AUTH command. Otherwise if the &quot;default&quot; user is not flagged with &quot;nopass&quot;\r\n        # the connections will start in not authenticated state, and will require\r\n        # AUTH (or the HELLO command AUTH option) in order to be authenticated and\r\n        # start to work.\r\n        #\r\n        # The ACL rules that describe what an user can do are the following:\r\n        #\r\n        #  on           Enable the user: it is possible to authenticate as this user.\r\n        #  off          Disable the user: it&#39;s no longer possible to authenticate\r\n        #               with this user, however the already authenticated connections\r\n        #               will still work.\r\n        #  +&lt;command&gt;   Allow the execution of that command\r\n        #  -&lt;command&gt;   Disallow the execution of that command\r\n        #  +@&lt;category&gt; Allow the execution of all the commands in such category\r\n        #               with valid categories are like @admin, @set, @sortedset, ...\r\n        #               and so forth, see the full list in the server.c file where\r\n        #               the Redis command table is described and defined.\r\n        #               The special category @all means all the commands, but currently\r\n        #               present in the server, and that will be loaded in the future\r\n        #               via modules.\r\n        #  +&lt;command&gt;|subcommand    Allow a specific subcommand of an otherwise\r\n        #                           disabled command. Note that this form is not\r\n        #                           allowed as negative like -DEBUG|SEGFAULT, but\r\n        #                           only additive starting with &quot;+&quot;.\r\n        #  allcommands  Alias for +@all. Note that it implies the ability to execute\r\n        #               all the future commands loaded via the modules system.\r\n        #  nocommands   Alias for -@all.\r\n        #  ~&lt;pattern&gt;   Add a pattern of keys that can be mentioned as part of\r\n        #               commands. For instance ~* allows all the keys. The pattern\r\n        #               is a glob-style pattern like the one of KEYS.\r\n        #               It is possible to specify multiple patterns.\r\n        #  allkeys      Alias for ~*\r\n        #  resetkeys    Flush the list of allowed keys patterns.\r\n        #  &gt;&lt;password&gt;  Add this passowrd to the list of valid password for the user.\r\n        #               For example &gt;mypass will add &quot;mypass&quot; to the list.\r\n        #               This directive clears the &quot;nopass&quot; flag (see later).\r\n        #  &lt;&lt;password&gt;  Remove this password from the list of valid passwords.\r\n        #  nopass       All the set passwords of the user are removed, and the user\r\n        #               is flagged as requiring no password: it means that every\r\n        #               password will work against this user. If this directive is\r\n        #               used for the default user, every new connection will be\r\n        #               immediately authenticated with the default user without\r\n        #               any explicit AUTH command required. Note that the &quot;resetpass&quot;\r\n        #               directive will clear this condition.\r\n        #  resetpass    Flush the list of allowed passwords. Moreover removes the\r\n        #               &quot;nopass&quot; status. After &quot;resetpass&quot; the user has no associated\r\n        #               passwords and there is no way to authenticate without adding\r\n        #               some password (or setting it as &quot;nopass&quot; later).\r\n        #  reset        Performs the following actions: resetpass, resetkeys, off,\r\n        #               -@all. The user returns to the same state it has immediately\r\n        #               after its creation.\r\n        #\r\n        # ACL rules can be specified in any order: for instance you can start with\r\n        # passwords, then flags, or key patterns. However note that the additive\r\n        # and subtractive rules will CHANGE MEANING depending on the ordering.\r\n        # For instance see the following example:\r\n        #\r\n        #   user alice on +@all -DEBUG ~* &gt;somepassword\r\n        #\r\n        # This will allow &quot;alice&quot; to use all the commands with the exception of the\r\n        # DEBUG command, since +@all added all the commands to the set of the commands\r\n        # alice can use, and later DEBUG was removed. However if we invert the order\r\n        # of two ACL rules the result will be different:\r\n        #\r\n        #   user alice on -DEBUG +@all ~* &gt;somepassword\r\n        #\r\n        # Now DEBUG was removed when alice had yet no commands in the set of allowed\r\n        # commands, later all the commands are added, so the user will be able to\r\n        # execute everything.\r\n        #\r\n        # Basically ACL rules are processed left-to-right.\r\n        #\r\n        # For more information about ACL configuration please refer to\r\n        # the Redis web site at https://redis.io/topics/acl\r\n        # ACL LOG\r\n        #\r\n        # The ACL Log tracks failed commands and authentication events associated\r\n        # with ACLs. The ACL Log is useful to troubleshoot failed commands blocked\r\n        # by ACLs. The ACL Log is stored in memory. You can reclaim memory with\r\n        # ACL LOG RESET. Define the maximum entry length of the ACL Log below.\r\n        acllog-max-len 128\r\n        # Using an external ACL file\r\n        #\r\n        # Instead of configuring users here in this file, it is possible to use\r\n        # a stand-alone file just listing users. The two methods cannot be mixed:\r\n        # if you configure users here and at the same time you activate the exteranl\r\n        # ACL file, the server will refuse to start.\r\n        #\r\n        # The format of the external ACL user file is exactly the same as the\r\n        # format that is used inside redis.conf to describe users.\r\n        #\r\n        # aclfile /etc/redis/users.acl\r\n        # IMPORTANT NOTE: starting with Redis 6 &quot;requirepass&quot; is just a compatiblity\r\n        # layer on top of the new ACL system. The option effect will be just setting\r\n        # the password for the default user. Clients will still authenticate using\r\n        # AUTH &lt;password&gt; as usually, or more explicitly with AUTH default &lt;password&gt;\r\n        # if they follow the new protocol: both will work.\r\n        #\r\n    ---\r\n    apiVersion: v1\r\n    kind: ConfigMap\r\n    metadata:\r\n      name: redis-scripts-config-map\r\n    data:\r\n    \r\n      sentinel_init.sh: |\r\n        #!/bin/bash\r\n        REDIS_NODES= &quot;redis-0.redis,redis-1.redis,redis-2.redis&quot;\r\n        for i in ${REDIS_NODES//,/ }\r\n        do\r\n            echo &quot;finding master at $i&quot;\r\n            MASTER=$(redis-cli --no-auth-warning --raw -h $i -a ${REDIS_PASSWORD} info replication | awk &#39;{print $1}&#39; | grep master_host: | cut -d &quot;:&quot; -f2)\r\n        \r\n            if [ &quot;${MASTER}&quot; == &quot;&quot; ]; then\r\n                echo &quot;no master found&quot;\r\n                MASTER=\r\n            else\r\n                echo &quot;found ${MASTER}&quot;\r\n                break\r\n            fi\r\n        \r\n        done\r\n    \r\n        POD_FQDN=$(hostname -f)\r\n        echo &quot;sentinel monitor mymaster ${MASTER} 6379 2&quot; &gt;&gt; /tmp/master\r\n        echo &quot;port 5000\r\n        $(cat /tmp/master)\r\n        protected-mode no\r\n        sentinel resolve-hostnames yes\r\n        sentinel announce-hostnames yes\r\n        sentinel announce-ip $POD_FQDN\r\n        sentinel announce-port 5000\r\n        sentinel down-after-milliseconds mymaster 1000\r\n        sentinel failover-timeout mymaster 60000\r\n        sentinel parallel-syncs mymaster 1\r\n        sentinel sentinel-pass ${REDIS_PASSWORD}\r\n        sentinel auth-pass mymaster ${REDIS_PASSWORD}\r\n        requirepass ${REDIS_PASSWORD}\r\n    \r\n        &quot; &gt; /etc/redis/sentinel.conf\r\n        cat /etc/redis/sentinel.conf\r\n    \r\n    \r\n      redis_init.sh: |\r\n        #!/bin/bash\r\n    \r\n        cp /tmp/redis/redis.conf /etc/redis/redis.conf\r\n        echo &quot;requirepass ${REDIS_PASSWORD}&quot; &gt;&gt; /etc/redis/redis.conf\r\n        echo &quot;masterauth ${REDIS_PASSWORD}&quot; &gt;&gt; /etc/redis/redis.conf\r\n        echo &quot;replica-announce-ip ${HOSTNAME}.redis&quot; &gt;&gt; /etc/redis/redis.conf\r\n        echo &quot;replica-announce-port 6379 &quot; &gt;&gt; /etc/redis/redis.conf\r\n        \r\n        echo &quot;finding master...&quot;\r\n    \r\n        if [ &quot;$(timeout 5 redis-cli -h sentinel -p 5000 -a ${REDIS_PASSWORD} ping)&quot; != &quot;PONG&quot; ]; then\r\n    \r\n          echo &quot;sentinel not found, defaulting to redis-0&quot;\r\n    \r\n          if [ ${HOSTNAME} == &quot;redis-0&quot; ]; then\r\n            echo &quot;this is redis-0, not updating config...&quot;\r\n          else\r\n            echo &quot;updating redis.conf...&quot;\r\n            echo &quot;repl-ping-replica-period 3&quot; &gt;&gt; /etc/redis/redis.conf\r\n            echo &quot;slave-read-only no&quot; &gt;&gt; /etc/redis/redis.conf\r\n            echo &quot;slaveof redis-0.redis 6379&quot; &gt;&gt; /etc/redis/redis.conf\r\n          fi\r\n    \r\n        else\r\n    \r\n          echo &quot;sentinel found, finding master&quot;\r\n          MASTER=&quot;$(redis-cli -h sentinel -p 5000 -a ${REDIS_PASSWORD} sentinel get-master-addr-by-name mymaster | grep -E &#39;(^redis-*)|([0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3})&#39;)&quot;\r\n    \r\n          if [ &quot;${HOSTNAME}.redis&quot; == ${MASTER} ]; then\r\n            echo &quot;this is master, not updating config...&quot;\r\n          else\r\n            echo &quot;master found : ${MASTER}, updating redis.conf&quot;\r\n            echo &quot;slave-read-only no&quot; &gt;&gt; /etc/redis/redis.conf\r\n            echo &quot;slaveof ${MASTER} 6379&quot; &gt;&gt; /etc/redis/redis.conf\r\n            echo &quot;repl-ping-replica-period 3&quot; &gt;&gt; /etc/redis/redis.conf\r\n          fi\r\n    \r\n        fi\r\n    ---\r\n    apiVersion: v1\r\n    kind: Secret\r\n    metadata:\r\n      name: redis-secret\r\n    type: Opaque\r\n    data:\r\n      REDIS_PASSWORD: c3BlZWR5R29uemFsZXMyMDIz\r\n    ---\r\n    # Headless service so sentinel could access redisses using syntax &lt;pod-name&gt;.&lt;service-name&gt;\r\n    \r\n    apiVersion: v1\r\n    kind: Service\r\n    metadata:\r\n      name: redis\r\n      labels:\r\n        app: redis\r\n        app.kubernetes.io/component: redis\r\n        app.kubernetes.io/instance: redis\r\n    spec:\r\n      clusterIP: None\r\n      ports:\r\n        - port: 6379\r\n          targetPort: 6379\r\n          name: redis\r\n      selector:\r\n        app: redis\r\n    \r\n    ---\r\n    \r\n    # Sentinel service used for project pod connection\r\n    \r\n    apiVersion: v1\r\n    kind: Service\r\n    metadata:\r\n      name: sentinel-redis\r\n      labels:\r\n        app: sentinel\r\n        app.kubernetes.io/component: sentinel\r\n        app.kubernetes.io/instance: sentinel\r\n    spec:\r\n      type: ClusterIP\r\n      sessionAffinity: None\r\n      ports:\r\n        - port: 5000\r\n          targetPort: 5000\r\n          name: sentinel\r\n      selector:\r\n        app: sentinel\r\n    ---\r\n    apiVersion: apps/v1\r\n    kind: StatefulSet\r\n    metadata:\r\n      name: redis\r\n    spec:\r\n      serviceName: redis\r\n      replicas: 3\r\n      selector:\r\n        matchLabels:\r\n          app: redis\r\n      template:\r\n        metadata:\r\n          labels:\r\n            app: redis\r\n        spec:\r\n          initContainers:\r\n            - name: config\r\n              image: &#39;scorenexus.isbank:8443/bitnami/redis:7.0&#39;\r\n              env:\r\n                - name: REDIS_PASSWORD\r\n                  valueFrom:\r\n                    secretKeyRef:\r\n                      name: redis-secret\r\n                      key: REDIS_PASSWORD\r\n              command: [ &quot;sh&quot;, &quot;-c&quot;, &quot;/scripts/redis_init.sh&quot; ]\r\n              volumeMounts:\r\n                - name: redis-config\r\n                  mountPath: /etc/redis/\r\n                - name: config\r\n                  mountPath: /tmp/redis/\r\n                - name: init-script\r\n                  mountPath: /scripts/\r\n          containers:\r\n            - name: redis\r\n              image: &#39;scorenexus.isbank:8443/bitnami/redis:7.0&#39;\r\n              command: [&quot;redis-server&quot;]\r\n              args: [&quot;/etc/redis/redis.conf&quot;]\r\n              ports:\r\n                - containerPort: 6379\r\n                  name: redis\r\n              volumeMounts:\r\n                - name: data\r\n                  mountPath: /data\r\n                - name: redis-config\r\n                  mountPath: /etc/redis/\r\n          volumes:\r\n            - name: data\r\n              emptyDir: {}\r\n            - name: redis-config\r\n              emptyDir: {}\r\n            - name: init-script\r\n              configMap:\r\n                name: redis-scripts-config-map\r\n                defaultMode: 0777\r\n                items:\r\n                  - key: redis_init.sh\r\n                    path: redis_init.sh\r\n            - name: config\r\n              configMap:\r\n                name: redis-config-map\r\n                items:\r\n                  - key: redis.conf\r\n                    path: redis.conf\r\n    ---\r\n    apiVersion: apps/v1\r\n    kind: StatefulSet\r\n    metadata:\r\n      name: sentinel-redis\r\n    spec:\r\n      serviceName: sentinel-redis\r\n      replicas: 3\r\n      selector:\r\n        matchLabels:\r\n          app: sentinel\r\n      template:\r\n        metadata:\r\n          labels:\r\n            app: sentinel\r\n        spec:\r\n          initContainers:\r\n            - name: config\r\n              image: &#39;scorenexus.isbank:8443/bitnami/redis:7.0&#39;\r\n              env:\r\n                - name: REDIS_NODES\r\n                  valueFrom:\r\n                    configMapKeyRef:\r\n                      name: redis-config-map\r\n                      key: REDIS_NODES\r\n                - name: REDIS_PASSWORD\r\n                  valueFrom:\r\n                    secretKeyRef:\r\n                      name: redis-secret\r\n                      key: REDIS_PASSWORD\r\n              command: [ &quot;sh&quot;, &quot;-c&quot;, &quot;/scripts/sentinel_init.sh&quot; ]\r\n              volumeMounts:\r\n                - name: redis-config\r\n                  mountPath: /etc/redis/\r\n                - name: init-script\r\n                  mountPath: /scripts/\r\n          containers:\r\n            - name: sentinel\r\n              image: &#39;scorenexus.isbank:8443/bitnami/redis:7.0&#39;\r\n              command: [&quot;redis-sentinel&quot;]\r\n              args: [&quot;/etc/redis/sentinel.conf&quot;]\r\n              ports:\r\n                - containerPort: 5000\r\n                  name: sentinel\r\n              volumeMounts:\r\n                - name: redis-config\r\n                  mountPath: /etc/redis/\r\n                - name: data\r\n                  mountPath: /data\r\n          volumes:\r\n            - name: init-script\r\n              configMap:\r\n                name: redis-scripts-config-map\r\n                defaultMode: 0777\r\n                items:\r\n                  - key: sentinel_init.sh\r\n                    path: sentinel_init.sh\r\n            - name: redis-config\r\n              emptyDir: {}\r\n            - name: data\r\n              emptyDir: {}\r\n    ---\r\n\r\n\r\n\r\n","title":"Sentinel Failed to resolve hostname redis","body":"<p>Dears,</p>\n<p>I tried to access remote redis cache services from redis sentinel services for high availability. But sentinel server couldnt resolve redis host name.</p>\n<pre><code>java.net.UnknownHostException: No such host is known (redis-0.redis.xxxx-service-platform.svc.cluster.local)\n    at java.net.Inet6AddressImpl.lookupAllHostAddr(Inet6AddressImpl.java)\n    at java.net.InetAddress$PlatformNameService.lookupAllHostAddr(InetAddress.java:929)\n    ... 38 frames excluded\nWrapped by: io.lettuce.core.RedisConnectionException: Unable to connect to redis-0.redis.xxxx-service-platform.svc.cluster.local:6379\n    at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:78)\n    at io.lettuce.core.RedisConnectionException.create(RedisConnectionException.java:56)\n    ... 6 frames excluded\n    ... 28 common frames omitted`\n</code></pre>\n<p>Also I see above the log on sentinel services like as the follows</p>\n<pre><code>1:X 12 Sep 2023 21:56:50.711 # Failed to resolve hostname 'redis-0.redis.xxxx-service-platform.svc.cluster.local'\n1:X 12 Sep 2023 21:56:51.773 # Failed to resolve hostname 'redis-0.redis.xxxx-service-platform.svc.cluster.local'\n1:X 12 Sep 2023 21:56:52.806 # Failed to resolve hostname 'redis-0.redis.xxxx-service-platform.svc.cluster.local'\n1:X 12 Sep 2023 21:56:53.838 # Failed to resolve hostname 'redis-0.redis.xxxx-service-platform.svc.cluster.local'\n1:X 12 Sep 2023 21:56:54.908 # Failed to resolve hostname 'redis-0.redis.xxxx-service-platform.svc.cluster.local'\n1:X 12 Sep 2023 21:56:55.914 # Failed to resolve hostname 'redis-0.redis.xxxx-service-platform.svc.cluster.local'\n1:X 12 Sep 2023 21:56:56.925 # Failed to resolve hostname 'redis-0.redis.xxxx-service-platform.svc.cluster.local'\n1:X 12 Sep 2023 21:56:57.967 # Failed to resolve hostname 'redis-0.redis.xxxx-service-platform.svc.cluster.local'\n1:X 12 Sep 2023 21:56:59.037 # Failed to resolve hostname 'redis-0.redis.xxxx-service-platform.svc.cluster.local'\n</code></pre>\n<p>Could you help me how to solve the problem?</p>\n<p>I tried too much configuration but they didnt work, Sentinel and redis works the same cluster but on remote server, but sentinel should solve redis hostname</p>\n<pre><code>apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: redis-config-map\ndata:\n  # Variable needed for sentinel init container\n  REDIS_NODES: &quot;redis-0.redis,redis-1.redis,redis-2.redis&quot;\n\n  # Config used in all redises\n  redis.conf: |\n    # Redis configuration file example.\n    # ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n    bind 0.0.0.0\n    # Protected mode is a layer of security protection, in order to avoid that\n   \n    # Close the connection after a client is idle for N seconds (0 to disable)\n    timeout 300\n    \n    # A reasonable value for this option is 300 seconds, which is the new\n    # Redis default starting with Redis 3.2.1.\n    tcp-keepalive 30\n   \n    # Configure allowed ciphers.  See the ciphers(1ssl) manpage for more information\n    # about the syntax of this string.\n    #\n    # Note: this configuration applies only to &lt;= TLSv1.2.\n    #\n    # tls-ciphers DEFAULT:!MEDIUM\n    # Configure allowed TLSv1.3 ciphersuites.  See the ciphers(1ssl) manpage for more\n    # information about the syntax of this string, and specifically for TLSv1.3\n    # ciphersuites.\n    #\n    # tls-ciphersuites TLS_CHACHA20_POLY1305_SHA256\n    # When choosing a cipher, use the server's preference instead of the client\n    # preference. By default, the server follows the client's preference.\n\n\n\n    # verbose (many rarely useful info, but not a mess like the debug level)\n    # notice (moderately verbose, what you want in production probably)\n    # warning (only very important / critical messages are logged)\n    loglevel notice\n    # Specify the log file name. Also the empty string can be used to force\n    # Redis to log on the standard output. Note that if you use standard\n    # output for logging but daemonize, logs will be sent to /dev/null\n    logfile &quot;&quot;\n    # To enable logging to the system logger, just set 'syslog-enabled' to yes,\n    # and optionally update the other syslog parameters to suit your needs.\n    # syslog-enabled no\n    # Specify the syslog identity.\n    # syslog-ident redis\n    # Specify the syslog facility. Must be USER or between LOCAL0-LOCAL7.\n    # syslog-facility local0\n    # Set the number of databases. The default database is DB 0, you can select\n    \n    # ASCII art logo in startup logs by setting the following option to yes.\n    always-show-logo yes\n    ################################ SNAPSHOTTING  ################################\n   \n    #\n    # RDB files created with checksum disabled have a checksum of zero that will\n    # tell the loading code to skip the check.\n    rdbchecksum yes\n    # The filename where to dump the DB\n    # dbfilename &quot;dump.rdb&quot;\n    # Remove RDB files used by replication in instances without persistence\n    # enabled. By default this option is disabled, however there are environments\n    # where for regulations or other security concerns, RDB files persisted on\n    # disk by masters in order to feed replicas, or stored on disk by replicas\n\n    #\n    # Note that you must specify a directory here, not a file name.\n    dir &quot;/data&quot;\n   \n    # When a replica loses its connection with the master, or when the replication\n    \n    \n    # With slow disks and fast (large bandwidth) networks, diskless replication\n    # works better.\n    repl-diskless-sync no\n    # When diskless replication is enabled, it is possible to configure the delay\n    \n    repl-diskless-sync-delay 5\n    \n    \n\n    repl-diskless-load disabled\n    # Replicas send PINGs to server in a predefined interval. It's possible to\n    # change this interval with the repl_ping_replica_period option. The default\n    # value is 10 seconds.\n    #\n    appendonly no\n    # repl-ping-replica-period 10\n    # The following option sets the replication timeout for:\n    #\n    \n    # It is important to make sure that this value is greater than the value\n    # specified for repl-ping-replica-period otherwise a timeout will be detected\n    # every time there is low traffic between the master and the replica.\n    #\n    # repl-timeout 60\n    \n    # Linux kernels using a default configuration.\n    #\n    # If you select &quot;no&quot; the delay for data to appear on the replica side will\n    # be reduced but more bandwidth will be used for replication.\n    #\n    # By default we optimize for low latency, but in very high traffic conditions\n    # or when the master and replicas are many hops away, turning this to &quot;yes&quot; may\n    # be a good idea.\n    repl-disable-tcp-nodelay no\n    # Set the replication backlog size. The backlog is a buffer that accumulates\n    # replica data when replicas are disconnected for some time, so that when a\n    # replica wants to reconnect again, often a full resync is not needed, but a\n    # partial resync is enough, just passing the portion of data the replica\n    # missed while disconnected.\n    #\n    # The bigger the replication backlog, the longer the time the replica can be\n    # disconnected and later be able to perform a partial resynchronization.\n    #\n    # The backlog is only allocated once there is at least a replica connected.\n    #\n    # repl-backlog-size 1mb\n    # After a master has no longer connected replicas for some time, the backlog\n    # will be freed. The following option configures the amount of seconds that\n    # need to elapse, starting from the time the last replica disconnected, for\n    # the backlog buffer to be freed.\n    #\n    # Note that replicas never free the backlog for timeout, since they may be\n    # promoted to masters later, and should be able to correctly &quot;partially\n    # resynchronize&quot; with the replicas: hence they should always accumulate backlog.\n    #\n    # A value of 0 means to never release the backlog.\n    #\n    # repl-backlog-ttl 3600\n    # The replica priority is an integer number published by Redis in the INFO\n    # output. It is used by Redis Sentinel in order to select a replica to promote\n    # into a master if the master is no longer working correctly.\n    #\n    # A replica with a low priority number is considered better for promotion, so\n    # for instance if there are three replicas with priority 10, 100, 25 Sentinel\n    # will pick the one with priority 10, that is the lowest.\n    #\n    # However a special priority of 0 marks the replica as not able to perform the\n    # role of master, so a replica with priority of 0 will never be selected by\n    # Redis Sentinel for promotion.\n    #\n    # By default the priority is 100.\n    replica-priority 100\n    # It is possible for a master to stop accepting writes if there are less than\n    # N replicas connected, having a lag less or equal than M seconds.\n    #\n    # The N replicas need to be in &quot;online&quot; state.\n    #\n    # The lag in seconds, that must be &lt;= the specified value, is calculated from\n    # the last ping received from the replica, that is usually sent every second.\n    #\n    # This option does not GUARANTEE that N replicas will accept the write, but\n    # will limit the window of exposure for lost writes in case not enough replicas\n    # are available, to the specified number of seconds.\n    #\n    # For example to require at least 3 replicas with a lag &lt;= 10 seconds use:\n    #\n    # min-replicas-to-write 3\n    # min-replicas-max-lag 10\n    #\n    # Setting one or the other to 0 disables the feature.\n    #\n    # By default min-replicas-to-write is set to 0 (feature disabled) and\n    # min-replicas-max-lag is set to 10.\n    # A Redis master is able to list the address and port of the attached\n    # replicas in different ways. For example the &quot;INFO replication&quot; section\n    # offers this information, which is used, among other tools, by\n    # Redis Sentinel in order to discover replica instances.\n    # Another place where this info is available is in the output of the\n    # &quot;ROLE&quot; command of a master.\n    #\n    # The listed IP and address normally reported by a replica is obtained\n    # in the following way:\n    #\n    #   IP: The address is auto detected by checking the peer address\n    #   of the socket used by the replica to connect with the master.\n    #\n    #   Port: The port is communicated by the replica during the replication\n    #   handshake, and is normally the port that the replica is using to\n    #   listen for connections.\n    #\n    # However when port forwarding or Network Address Translation (NAT) is\n    # used, the replica may be actually reachable via different IP and port\n    # pairs. The following two options can be used by a replica in order to\n    # report to its master a specific set of IP and port, so that both INFO\n    # and ROLE will report those values.\n    #\n    # There is no need to use both the options if you need to override just\n    # the port or the IP address.\n    #\n    # replica-announce-ip 5.5.5.5\n    # replica-announce-port 1234\n    ############################### KEYS TRACKING #################################\n    # Redis implements server assisted support for client side caching of values.\n    # This is implemented using an invalidation table that remembers, using\n    # 16 millions of slots, what clients may have certain subsets of keys. In turn\n    # this is used in order to send invalidation messages to clients. Please\n    # to understand more about the feature check this page:\n    #\n    #   https://redis.io/topics/client-side-caching\n    #\n    # When tracking is enabled for a client, all the read only queries are assumed\n    # to be cached: this will force Redis to store information in the invalidation\n    # table. When keys are modified, such information is flushed away, and\n    # invalidation messages are sent to the clients. However if the workload is\n    # heavily dominated by reads, Redis could use more and more memory in order\n    # to track the keys fetched by many clients.\n    #\n    # For this reason it is possible to configure a maximum fill value for the\n    # invalidation table. By default it is set to 1M of keys, and once this limit\n    # is reached, Redis will start to evict keys in the invalidation table\n    # even if they were not modified, just to reclaim memory: this will in turn\n    # force the clients to invalidate the cached values. Basically the table\n    # maximum size is a trade off between the memory you want to spend server\n    # side to track information about who cached what, and the ability of clients\n    # to retain cached objects in memory.\n    #\n    # If you set the value to 0, it means there are no limits, and Redis will\n    # retain as many keys as needed in the invalidation table.\n    # In the &quot;stats&quot; INFO section, you can find information about the number of\n    # keys in the invalidation table at every given moment.\n    #\n    # Note: when key tracking is used in broadcasting mode, no memory is used\n    # in the server side so this setting is useless.\n    #\n    # tracking-table-max-keys 1000000\n    ################################## SECURITY ###################################\n    # Warning: since Redis is pretty fast an outside user can try up to\n    # 1 million passwords per second against a modern box. This means that you\n    # should use very strong passwords, otherwise they will be very easy to break.\n    # Note that because the password is really a shared secret between the client\n    # and the server, and should not be memorized by any human, the password\n    # can be easily a long string from /dev/urandom or whatever, so by using a\n    # long and unguessable password no brute force attack will be possible.\n    # Redis ACL users are defined in the following format:\n    #\n    #   user &lt;username&gt; ... acl rules ...\n    #\n    # For example:\n    #\n    #   user worker +@list +@connection ~jobs:* on &gt;ffa9203c493aa99\n    #\n    # The special username &quot;default&quot; is used for new connections. If this user\n    # has the &quot;nopass&quot; rule, then new connections will be immediately authenticated\n    # as the &quot;default&quot; user without the need of any password provided via the\n    # AUTH command. Otherwise if the &quot;default&quot; user is not flagged with &quot;nopass&quot;\n    # the connections will start in not authenticated state, and will require\n    # AUTH (or the HELLO command AUTH option) in order to be authenticated and\n    # start to work.\n    #\n    # The ACL rules that describe what an user can do are the following:\n    #\n    #  on           Enable the user: it is possible to authenticate as this user.\n    #  off          Disable the user: it's no longer possible to authenticate\n    #               with this user, however the already authenticated connections\n    #               will still work.\n    #  +&lt;command&gt;   Allow the execution of that command\n    #  -&lt;command&gt;   Disallow the execution of that command\n    #  +@&lt;category&gt; Allow the execution of all the commands in such category\n    #               with valid categories are like @admin, @set, @sortedset, ...\n    #               and so forth, see the full list in the server.c file where\n    #               the Redis command table is described and defined.\n    #               The special category @all means all the commands, but currently\n    #               present in the server, and that will be loaded in the future\n    #               via modules.\n    #  +&lt;command&gt;|subcommand    Allow a specific subcommand of an otherwise\n    #                           disabled command. Note that this form is not\n    #                           allowed as negative like -DEBUG|SEGFAULT, but\n    #                           only additive starting with &quot;+&quot;.\n    #  allcommands  Alias for +@all. Note that it implies the ability to execute\n    #               all the future commands loaded via the modules system.\n    #  nocommands   Alias for -@all.\n    #  ~&lt;pattern&gt;   Add a pattern of keys that can be mentioned as part of\n    #               commands. For instance ~* allows all the keys. The pattern\n    #               is a glob-style pattern like the one of KEYS.\n    #               It is possible to specify multiple patterns.\n    #  allkeys      Alias for ~*\n    #  resetkeys    Flush the list of allowed keys patterns.\n    #  &gt;&lt;password&gt;  Add this passowrd to the list of valid password for the user.\n    #               For example &gt;mypass will add &quot;mypass&quot; to the list.\n    #               This directive clears the &quot;nopass&quot; flag (see later).\n    #  &lt;&lt;password&gt;  Remove this password from the list of valid passwords.\n    #  nopass       All the set passwords of the user are removed, and the user\n    #               is flagged as requiring no password: it means that every\n    #               password will work against this user. If this directive is\n    #               used for the default user, every new connection will be\n    #               immediately authenticated with the default user without\n    #               any explicit AUTH command required. Note that the &quot;resetpass&quot;\n    #               directive will clear this condition.\n    #  resetpass    Flush the list of allowed passwords. Moreover removes the\n    #               &quot;nopass&quot; status. After &quot;resetpass&quot; the user has no associated\n    #               passwords and there is no way to authenticate without adding\n    #               some password (or setting it as &quot;nopass&quot; later).\n    #  reset        Performs the following actions: resetpass, resetkeys, off,\n    #               -@all. The user returns to the same state it has immediately\n    #               after its creation.\n    #\n    # ACL rules can be specified in any order: for instance you can start with\n    # passwords, then flags, or key patterns. However note that the additive\n    # and subtractive rules will CHANGE MEANING depending on the ordering.\n    # For instance see the following example:\n    #\n    #   user alice on +@all -DEBUG ~* &gt;somepassword\n    #\n    # This will allow &quot;alice&quot; to use all the commands with the exception of the\n    # DEBUG command, since +@all added all the commands to the set of the commands\n    # alice can use, and later DEBUG was removed. However if we invert the order\n    # of two ACL rules the result will be different:\n    #\n    #   user alice on -DEBUG +@all ~* &gt;somepassword\n    #\n    # Now DEBUG was removed when alice had yet no commands in the set of allowed\n    # commands, later all the commands are added, so the user will be able to\n    # execute everything.\n    #\n    # Basically ACL rules are processed left-to-right.\n    #\n    # For more information about ACL configuration please refer to\n    # the Redis web site at https://redis.io/topics/acl\n    # ACL LOG\n    #\n    # The ACL Log tracks failed commands and authentication events associated\n    # with ACLs. The ACL Log is useful to troubleshoot failed commands blocked\n    # by ACLs. The ACL Log is stored in memory. You can reclaim memory with\n    # ACL LOG RESET. Define the maximum entry length of the ACL Log below.\n    acllog-max-len 128\n    # Using an external ACL file\n    #\n    # Instead of configuring users here in this file, it is possible to use\n    # a stand-alone file just listing users. The two methods cannot be mixed:\n    # if you configure users here and at the same time you activate the exteranl\n    # ACL file, the server will refuse to start.\n    #\n    # The format of the external ACL user file is exactly the same as the\n    # format that is used inside redis.conf to describe users.\n    #\n    # aclfile /etc/redis/users.acl\n    # IMPORTANT NOTE: starting with Redis 6 &quot;requirepass&quot; is just a compatiblity\n    # layer on top of the new ACL system. The option effect will be just setting\n    # the password for the default user. Clients will still authenticate using\n    # AUTH &lt;password&gt; as usually, or more explicitly with AUTH default &lt;password&gt;\n    # if they follow the new protocol: both will work.\n    #\n---\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: redis-scripts-config-map\ndata:\n\n  sentinel_init.sh: |\n    #!/bin/bash\n    REDIS_NODES= &quot;redis-0.redis,redis-1.redis,redis-2.redis&quot;\n    for i in ${REDIS_NODES//,/ }\n    do\n        echo &quot;finding master at $i&quot;\n        MASTER=$(redis-cli --no-auth-warning --raw -h $i -a ${REDIS_PASSWORD} info replication | awk '{print $1}' | grep master_host: | cut -d &quot;:&quot; -f2)\n    \n        if [ &quot;${MASTER}&quot; == &quot;&quot; ]; then\n            echo &quot;no master found&quot;\n            MASTER=\n        else\n            echo &quot;found ${MASTER}&quot;\n            break\n        fi\n    \n    done\n\n    POD_FQDN=$(hostname -f)\n    echo &quot;sentinel monitor mymaster ${MASTER} 6379 2&quot; &gt;&gt; /tmp/master\n    echo &quot;port 5000\n    $(cat /tmp/master)\n    protected-mode no\n    sentinel resolve-hostnames yes\n    sentinel announce-hostnames yes\n    sentinel announce-ip $POD_FQDN\n    sentinel announce-port 5000\n    sentinel down-after-milliseconds mymaster 1000\n    sentinel failover-timeout mymaster 60000\n    sentinel parallel-syncs mymaster 1\n    sentinel sentinel-pass ${REDIS_PASSWORD}\n    sentinel auth-pass mymaster ${REDIS_PASSWORD}\n    requirepass ${REDIS_PASSWORD}\n\n    &quot; &gt; /etc/redis/sentinel.conf\n    cat /etc/redis/sentinel.conf\n\n\n  redis_init.sh: |\n    #!/bin/bash\n\n    cp /tmp/redis/redis.conf /etc/redis/redis.conf\n    echo &quot;requirepass ${REDIS_PASSWORD}&quot; &gt;&gt; /etc/redis/redis.conf\n    echo &quot;masterauth ${REDIS_PASSWORD}&quot; &gt;&gt; /etc/redis/redis.conf\n    echo &quot;replica-announce-ip ${HOSTNAME}.redis&quot; &gt;&gt; /etc/redis/redis.conf\n    echo &quot;replica-announce-port 6379 &quot; &gt;&gt; /etc/redis/redis.conf\n    \n    echo &quot;finding master...&quot;\n\n    if [ &quot;$(timeout 5 redis-cli -h sentinel -p 5000 -a ${REDIS_PASSWORD} ping)&quot; != &quot;PONG&quot; ]; then\n\n      echo &quot;sentinel not found, defaulting to redis-0&quot;\n\n      if [ ${HOSTNAME} == &quot;redis-0&quot; ]; then\n        echo &quot;this is redis-0, not updating config...&quot;\n      else\n        echo &quot;updating redis.conf...&quot;\n        echo &quot;repl-ping-replica-period 3&quot; &gt;&gt; /etc/redis/redis.conf\n        echo &quot;slave-read-only no&quot; &gt;&gt; /etc/redis/redis.conf\n        echo &quot;slaveof redis-0.redis 6379&quot; &gt;&gt; /etc/redis/redis.conf\n      fi\n\n    else\n\n      echo &quot;sentinel found, finding master&quot;\n      MASTER=&quot;$(redis-cli -h sentinel -p 5000 -a ${REDIS_PASSWORD} sentinel get-master-addr-by-name mymaster | grep -E '(^redis-*)|([0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3})')&quot;\n\n      if [ &quot;${HOSTNAME}.redis&quot; == ${MASTER} ]; then\n        echo &quot;this is master, not updating config...&quot;\n      else\n        echo &quot;master found : ${MASTER}, updating redis.conf&quot;\n        echo &quot;slave-read-only no&quot; &gt;&gt; /etc/redis/redis.conf\n        echo &quot;slaveof ${MASTER} 6379&quot; &gt;&gt; /etc/redis/redis.conf\n        echo &quot;repl-ping-replica-period 3&quot; &gt;&gt; /etc/redis/redis.conf\n      fi\n\n    fi\n---\napiVersion: v1\nkind: Secret\nmetadata:\n  name: redis-secret\ntype: Opaque\ndata:\n  REDIS_PASSWORD: c3BlZWR5R29uemFsZXMyMDIz\n---\n# Headless service so sentinel could access redisses using syntax &lt;pod-name&gt;.&lt;service-name&gt;\n\napiVersion: v1\nkind: Service\nmetadata:\n  name: redis\n  labels:\n    app: redis\n    app.kubernetes.io/component: redis\n    app.kubernetes.io/instance: redis\nspec:\n  clusterIP: None\n  ports:\n    - port: 6379\n      targetPort: 6379\n      name: redis\n  selector:\n    app: redis\n\n---\n\n# Sentinel service used for project pod connection\n\napiVersion: v1\nkind: Service\nmetadata:\n  name: sentinel-redis\n  labels:\n    app: sentinel\n    app.kubernetes.io/component: sentinel\n    app.kubernetes.io/instance: sentinel\nspec:\n  type: ClusterIP\n  sessionAffinity: None\n  ports:\n    - port: 5000\n      targetPort: 5000\n      name: sentinel\n  selector:\n    app: sentinel\n---\napiVersion: apps/v1\nkind: StatefulSet\nmetadata:\n  name: redis\nspec:\n  serviceName: redis\n  replicas: 3\n  selector:\n    matchLabels:\n      app: redis\n  template:\n    metadata:\n      labels:\n        app: redis\n    spec:\n      initContainers:\n        - name: config\n          image: 'scorenexus.isbank:8443/bitnami/redis:7.0'\n          env:\n            - name: REDIS_PASSWORD\n              valueFrom:\n                secretKeyRef:\n                  name: redis-secret\n                  key: REDIS_PASSWORD\n          command: [ &quot;sh&quot;, &quot;-c&quot;, &quot;/scripts/redis_init.sh&quot; ]\n          volumeMounts:\n            - name: redis-config\n              mountPath: /etc/redis/\n            - name: config\n              mountPath: /tmp/redis/\n            - name: init-script\n              mountPath: /scripts/\n      containers:\n        - name: redis\n          image: 'scorenexus.isbank:8443/bitnami/redis:7.0'\n          command: [&quot;redis-server&quot;]\n          args: [&quot;/etc/redis/redis.conf&quot;]\n          ports:\n            - containerPort: 6379\n              name: redis\n          volumeMounts:\n            - name: data\n              mountPath: /data\n            - name: redis-config\n              mountPath: /etc/redis/\n      volumes:\n        - name: data\n          emptyDir: {}\n        - name: redis-config\n          emptyDir: {}\n        - name: init-script\n          configMap:\n            name: redis-scripts-config-map\n            defaultMode: 0777\n            items:\n              - key: redis_init.sh\n                path: redis_init.sh\n        - name: config\n          configMap:\n            name: redis-config-map\n            items:\n              - key: redis.conf\n                path: redis.conf\n---\napiVersion: apps/v1\nkind: StatefulSet\nmetadata:\n  name: sentinel-redis\nspec:\n  serviceName: sentinel-redis\n  replicas: 3\n  selector:\n    matchLabels:\n      app: sentinel\n  template:\n    metadata:\n      labels:\n        app: sentinel\n    spec:\n      initContainers:\n        - name: config\n          image: 'scorenexus.isbank:8443/bitnami/redis:7.0'\n          env:\n            - name: REDIS_NODES\n              valueFrom:\n                configMapKeyRef:\n                  name: redis-config-map\n                  key: REDIS_NODES\n            - name: REDIS_PASSWORD\n              valueFrom:\n                secretKeyRef:\n                  name: redis-secret\n                  key: REDIS_PASSWORD\n          command: [ &quot;sh&quot;, &quot;-c&quot;, &quot;/scripts/sentinel_init.sh&quot; ]\n          volumeMounts:\n            - name: redis-config\n              mountPath: /etc/redis/\n            - name: init-script\n              mountPath: /scripts/\n      containers:\n        - name: sentinel\n          image: 'scorenexus.isbank:8443/bitnami/redis:7.0'\n          command: [&quot;redis-sentinel&quot;]\n          args: [&quot;/etc/redis/sentinel.conf&quot;]\n          ports:\n            - containerPort: 5000\n              name: sentinel\n          volumeMounts:\n            - name: redis-config\n              mountPath: /etc/redis/\n            - name: data\n              mountPath: /data\n      volumes:\n        - name: init-script\n          configMap:\n            name: redis-scripts-config-map\n            defaultMode: 0777\n            items:\n              - key: sentinel_init.sh\n                path: sentinel_init.sh\n        - name: redis-config\n          emptyDir: {}\n        - name: data\n          emptyDir: {}\n---\n</code></pre>\n"},{"tags":["java","apache-kafka","apache-flink","flink-streaming"],"answers":[{"tags":[],"owner":{"account_id":1485238,"reputation":109,"user_id":1393650,"display_name":"user1393650"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1644479368,"creation_date":1644479368,"answer_id":71061438,"question_id":71022606,"body_markdown":"The solution is:\r\n\r\n        KafkaSource&lt;ObjectNode&gt; source = KafkaSource.&lt;ObjectNode&gt;builder()\r\n                .setProperties(kafkaProps)\r\n                .setProperty(&quot;ssl.truststore.type&quot;,trustStoreType)\r\n                .setProperty(&quot;ssl.truststore.password&quot;,trustStorePassword)\r\n                .setProperty(&quot;ssl.truststore.location&quot;,trustStoreLocation)\r\n                .setProperty(&quot;security.protocol&quot;,securityProtocol)\r\n                .setProperty(&quot;partition.discovery.interval.ms&quot;, partitionDiscoveryIntervalMs)\r\n                .setProperty(&quot;commit.offsets.on.checkpoint&quot;, commitOffsetsOnCheckpoint)\r\n                .setGroupId(groupId)\r\n                .setTopics(kafkaInputTopic)\r\n                .setDeserializer(KafkaRecordDeserializationSchema.of(new JSONKeyValueDeserializationSchema(fetchMetadata)))\r\n                .setStartingOffsets(OffsetsInitializer.committedOffsets(OffsetResetStrategy.EARLIEST))\r\n                .build();","title":"org.apache.flink.streaming.util.serialization.JSONKeyValueDeserializationSchema cannot be converted to ObjectNode","body":"<p>The solution is:</p>\n<pre><code>    KafkaSource&lt;ObjectNode&gt; source = KafkaSource.&lt;ObjectNode&gt;builder()\n            .setProperties(kafkaProps)\n            .setProperty(&quot;ssl.truststore.type&quot;,trustStoreType)\n            .setProperty(&quot;ssl.truststore.password&quot;,trustStorePassword)\n            .setProperty(&quot;ssl.truststore.location&quot;,trustStoreLocation)\n            .setProperty(&quot;security.protocol&quot;,securityProtocol)\n            .setProperty(&quot;partition.discovery.interval.ms&quot;, partitionDiscoveryIntervalMs)\n            .setProperty(&quot;commit.offsets.on.checkpoint&quot;, commitOffsetsOnCheckpoint)\n            .setGroupId(groupId)\n            .setTopics(kafkaInputTopic)\n            .setDeserializer(KafkaRecordDeserializationSchema.of(new JSONKeyValueDeserializationSchema(fetchMetadata)))\n            .setStartingOffsets(OffsetsInitializer.committedOffsets(OffsetResetStrategy.EARLIEST))\n            .build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29436489,"reputation":1,"user_id":22555227,"display_name":"user22555227"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694654107,"creation_date":1694654107,"answer_id":77101248,"question_id":71022606,"body_markdown":"I am passing truststore location as path and failing with below error and i noticed you are passing it as a variable, can you provide some insights on this?\r\n\r\nerror: Caused by: org.apache.kafka.common.KafkaException: Failed to load SSL keystore truststore.jks of type JKS","title":"org.apache.flink.streaming.util.serialization.JSONKeyValueDeserializationSchema cannot be converted to ObjectNode","body":"<p>I am passing truststore location as path and failing with below error and i noticed you are passing it as a variable, can you provide some insights on this?</p>\n<p>error: Caused by: org.apache.kafka.common.KafkaException: Failed to load SSL keystore truststore.jks of type JKS</p>\n"}],"owner":{"account_id":1485238,"reputation":109,"user_id":1393650,"display_name":"user1393650"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":522,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1694654107,"creation_date":1644254194,"question_id":71022606,"body_markdown":"When I used the following code:\r\n\r\n        KafkaSource&lt;ObjectNode&gt; source = KafkaSource.&lt;ObjectNode&gt;builder()\r\n                .setProperties(kafkaProps)\r\n                .setProperty(&quot;ssl.truststore.type&quot;,trustStoreType)\r\n                .setProperty(&quot;ssl.truststore.password&quot;,trustStorePassword)\r\n                .setProperty(&quot;ssl.truststore.location&quot;,trustStoreLocation)\r\n                .setProperty(&quot;security.protocol&quot;,securityProtocol)\r\n                .setProperty(&quot;partition.discovery.interval.ms&quot;, partitionDiscoveryIntervalMs)\r\n                .setProperty(&quot;commit.offsets.on.checkpoint&quot;, commitOffsetsOnCheckpoint)\r\n                .setGroupId(groupId)\r\n                .setTopics(kafkaInputTopic)\r\n                .setDeserializer(new JSONKeyValueDeserializationSchema(false))\r\n                .setStartingOffsets\r\n                 (OffsetsInitializer.committedOffsets(OffsetResetStrategy.EARLIEST))\r\n                .build();\r\n\r\nI get the following error during build\r\n`incompatible types: org.apache.flink.streaming.util.serialization.JSONKeyValueDeserializationSchema cannot be converted to org.apache.flink.connector.kafka.source.reader.deserializer.KafkaRecordDeserializationSchema&lt;org.apache.flink.shaded.jackson2.com.fasterxml.jackson.databind.node.ObjectNode&gt;`\r\n```\r\n                .setDeserializer(new JSONKeyValueDeserializationSchema(false))\r\n```\r\nSomeone a clue as to what is wrong?\r\n\r\n","title":"org.apache.flink.streaming.util.serialization.JSONKeyValueDeserializationSchema cannot be converted to ObjectNode","body":"<p>When I used the following code:</p>\n<pre><code>    KafkaSource&lt;ObjectNode&gt; source = KafkaSource.&lt;ObjectNode&gt;builder()\n            .setProperties(kafkaProps)\n            .setProperty(&quot;ssl.truststore.type&quot;,trustStoreType)\n            .setProperty(&quot;ssl.truststore.password&quot;,trustStorePassword)\n            .setProperty(&quot;ssl.truststore.location&quot;,trustStoreLocation)\n            .setProperty(&quot;security.protocol&quot;,securityProtocol)\n            .setProperty(&quot;partition.discovery.interval.ms&quot;, partitionDiscoveryIntervalMs)\n            .setProperty(&quot;commit.offsets.on.checkpoint&quot;, commitOffsetsOnCheckpoint)\n            .setGroupId(groupId)\n            .setTopics(kafkaInputTopic)\n            .setDeserializer(new JSONKeyValueDeserializationSchema(false))\n            .setStartingOffsets\n             (OffsetsInitializer.committedOffsets(OffsetResetStrategy.EARLIEST))\n            .build();\n</code></pre>\n<p>I get the following error during build\n<code>incompatible types: org.apache.flink.streaming.util.serialization.JSONKeyValueDeserializationSchema cannot be converted to org.apache.flink.connector.kafka.source.reader.deserializer.KafkaRecordDeserializationSchema&lt;org.apache.flink.shaded.jackson2.com.fasterxml.jackson.databind.node.ObjectNode&gt;</code></p>\n<pre><code>                .setDeserializer(new JSONKeyValueDeserializationSchema(false))\n</code></pre>\n<p>Someone a clue as to what is wrong?</p>\n"},{"tags":["java","drools","linkageerror"],"owner":{"account_id":29436283,"reputation":1,"user_id":22555061,"display_name":"randomprogrammerdude"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694653501,"creation_date":1694653501,"question_id":77101227,"body_markdown":"So I am getting the error below when using Drools to evaluate a set of rules \\[example below\\] using Stateful kieSessions. This error isn&#39;t consistent with it&#39;s appearance but it appeared enough times for it to be concerning. We are creating multiple sessions and calling `fireAllRules()` concurrenlty if that&#39;s useful.\r\n\r\n```\r\nCaused by: java.lang.LinkageError: loader (instance of org/drools/core/rule/JavaDialectRuntimeData$PackageClassLoader): attempted duplicate class definition for name: &quot;path/MY_SIMPLE_RULE&quot;\r\n    at &quot;path/MY_SIMPLE_RULE&quot;Eval1InvokerGenerated.evaluate(Unknown Source) ~[?:?]\r\n    at &quot;path/MY_SIMPLE_RULE&quot;Eval1Invoker.evaluate(Unknown Source) ~[?:?]\r\n    at org.drools.core.rule.EvalCondition.isAllowed(EvalCondition.java:118) ~[drools-core-6.3.0.Final.jar:6.3.0.Final]\r\n    at org.drools.core.phreak.PhreakEvalNode.doLeftInserts(PhreakEvalNode.java:70) ~[drools-core-6.3.0.Final.jar:6.3.0.Final]\r\n    at org.drools.core.phreak.PhreakEvalNode.doNode(PhreakEvalNode.java:54) ~[drools-core-6.3.0.Final.jar:6.3.0.Final]\r\n    at org.drools.core.phreak.RuleNetworkEvaluator.evalNode(RuleNetworkEvaluator.java:380) ~[drools-core-6.3.0.Final.jar:6.3.0.Final]\r\n    at org.drools.core.phreak.RuleNetworkEvaluator.innerEval(RuleNetworkEvaluator.java:332) ~[drools-core-6.3.0.Final.jar:6.3.0.Final]\r\n    at org.drools.core.phreak.RuleNetworkEvaluator.outerEval(RuleNetworkEvaluator.java:166) ~[drools-core-6.3.0.Final.jar:6.3.0.Final]\r\n    at org.drools.core.phreak.RuleNetworkEvaluator.evaluateNetwork(RuleNetworkEvaluator.java:123) ~[drools-core-6.3.0.Final.jar:6.3.0.Final]\r\n    at org.drools.core.phreak.RuleExecutor.evaluateNetwork(RuleExecutor.java:65) ~[drools-core-6.3.0.Final.jar:6.3.0.Final]\r\n    at org.drools.core.common.DefaultAgenda.evaluateEagerList(DefaultAgenda.java:1004) ~[drools-core-6.3.0.Final.jar:6.3.0.Final]\r\n    at org.drools.core.common.DefaultAgenda.fireNextItem(DefaultAgenda.java:961) ~[drools-core-6.3.0.Final.jar:6.3.0.Final]\r\n    at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1292) ~[drools-core-6.3.0.Final.jar:6.3.0.Final]\r\n```\r\n\r\nPseudo Rule\r\n\r\n```\r\nrule &quot;MY_SIMPLE_RULE&quot;\r\n    lock-on-active true\r\n    when\r\n        eval($myAge) == 44);\r\n        eval($myName == &quot;Luffy&quot;);\r\n    then\r\n        $title.add(&quot;Captain&quot;); \r\nend\r\n```\r\n\r\nDon&#39;t mind the correctness of the rule here because the rules that I am evaluating are reviewed and have been used for several years now. So somewhere down the line we use the kieSession to `fireAllRules()`.\r\n\r\nTried reproducing the error to no avail. So I am not sure what the exact issue is. The problem is the code works for majority of the rules and only broke for a few and those few don&#39;t even break all the times. It&#39;s sometimes they break, sometimes they do.","title":"java.lang.LinkageError: loader drools/./.JavaDialectRuntimeData$PackageClassLoader): attempted duplicate class definition for name:","body":"<p>So I am getting the error below when using Drools to evaluate a set of rules [example below] using Stateful kieSessions. This error isn't consistent with it's appearance but it appeared enough times for it to be concerning. We are creating multiple sessions and calling <code>fireAllRules()</code> concurrenlty if that's useful.</p>\n<pre><code>Caused by: java.lang.LinkageError: loader (instance of org/drools/core/rule/JavaDialectRuntimeData$PackageClassLoader): attempted duplicate class definition for name: &quot;path/MY_SIMPLE_RULE&quot;\n    at &quot;path/MY_SIMPLE_RULE&quot;Eval1InvokerGenerated.evaluate(Unknown Source) ~[?:?]\n    at &quot;path/MY_SIMPLE_RULE&quot;Eval1Invoker.evaluate(Unknown Source) ~[?:?]\n    at org.drools.core.rule.EvalCondition.isAllowed(EvalCondition.java:118) ~[drools-core-6.3.0.Final.jar:6.3.0.Final]\n    at org.drools.core.phreak.PhreakEvalNode.doLeftInserts(PhreakEvalNode.java:70) ~[drools-core-6.3.0.Final.jar:6.3.0.Final]\n    at org.drools.core.phreak.PhreakEvalNode.doNode(PhreakEvalNode.java:54) ~[drools-core-6.3.0.Final.jar:6.3.0.Final]\n    at org.drools.core.phreak.RuleNetworkEvaluator.evalNode(RuleNetworkEvaluator.java:380) ~[drools-core-6.3.0.Final.jar:6.3.0.Final]\n    at org.drools.core.phreak.RuleNetworkEvaluator.innerEval(RuleNetworkEvaluator.java:332) ~[drools-core-6.3.0.Final.jar:6.3.0.Final]\n    at org.drools.core.phreak.RuleNetworkEvaluator.outerEval(RuleNetworkEvaluator.java:166) ~[drools-core-6.3.0.Final.jar:6.3.0.Final]\n    at org.drools.core.phreak.RuleNetworkEvaluator.evaluateNetwork(RuleNetworkEvaluator.java:123) ~[drools-core-6.3.0.Final.jar:6.3.0.Final]\n    at org.drools.core.phreak.RuleExecutor.evaluateNetwork(RuleExecutor.java:65) ~[drools-core-6.3.0.Final.jar:6.3.0.Final]\n    at org.drools.core.common.DefaultAgenda.evaluateEagerList(DefaultAgenda.java:1004) ~[drools-core-6.3.0.Final.jar:6.3.0.Final]\n    at org.drools.core.common.DefaultAgenda.fireNextItem(DefaultAgenda.java:961) ~[drools-core-6.3.0.Final.jar:6.3.0.Final]\n    at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1292) ~[drools-core-6.3.0.Final.jar:6.3.0.Final]\n</code></pre>\n<p>Pseudo Rule</p>\n<pre><code>rule &quot;MY_SIMPLE_RULE&quot;\n    lock-on-active true\n    when\n        eval($myAge) == 44);\n        eval($myName == &quot;Luffy&quot;);\n    then\n        $title.add(&quot;Captain&quot;); \nend\n</code></pre>\n<p>Don't mind the correctness of the rule here because the rules that I am evaluating are reviewed and have been used for several years now. So somewhere down the line we use the kieSession to <code>fireAllRules()</code>.</p>\n<p>Tried reproducing the error to no avail. So I am not sure what the exact issue is. The problem is the code works for majority of the rules and only broke for a few and those few don't even break all the times. It's sometimes they break, sometimes they do.</p>\n"},{"tags":["java","log4j","apache-flink","slf4j","flink-streaming"],"comments":[{"owner":{"account_id":13472617,"reputation":427,"user_id":10060134,"display_name":"Niko"},"score":0,"creation_date":1694675686,"post_id":77101193,"comment_id":135923000,"body_markdown":"The log files can be accessed via the Job-/TaskManager pages of the WebUI. The used Resource Provider (e.g., YARN) may provide additional means of accessing them. On Yarn by default (I&#39;m not sure) you can&#39;t see logs while container is running...","body":"The log files can be accessed via the Job-/TaskManager pages of the WebUI. The used Resource Provider (e.g., YARN) may provide additional means of accessing them. On Yarn by default (I&#39;m not sure) you can&#39;t see logs while container is running..."}],"owner":{"account_id":15966961,"reputation":123,"user_id":11522265,"display_name":"Scott"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694652689,"creation_date":1694652689,"question_id":77101193,"body_markdown":"I have a flink job that uses slf4j for logging but when I run the job, the logs do not show up in yarn. Do I need a log4j.properties or is there something else I have to configure?\r\n\r\n\r\nI am just doing logger.info(&quot;info msg&quot;)","title":"How do I make my logs show up in yarn from my flink job?","body":"<p>I have a flink job that uses slf4j for logging but when I run the job, the logs do not show up in yarn. Do I need a log4j.properties or is there something else I have to configure?</p>\n<p>I am just doing logger.info(&quot;info msg&quot;)</p>\n"},{"tags":["java","micronaut","micronaut-data"],"answers":[{"tags":[],"owner":{"account_id":8642608,"reputation":11,"user_id":6470849,"display_name":"Wanderson Pimenta"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694652525,"creation_date":1694650058,"answer_id":77101090,"question_id":75202766,"body_markdown":"\r\nThis was the only way I found to register and configure datasource on demand.\r\n\r\n**In my case, I created a schedule to check if there are new configurations to update, checking if it is already in**\r\n\r\n    Collection&lt;DatasourceConfiguration&gt; beansOfType = applicationContext.getBeansOfType(DatasourceConfiguration.class);\r\n\r\n\r\n    // Class that contains database connection settings\r\n    @Getter\r\n    @Setter\r\n    public class DataBaseConfig {\r\n        private String tenantId;\r\n        private String host;\r\n        private String port;\r\n        private String user;\r\n        private String pass;\r\n        private String database;\r\n    }\r\n    \r\n    // This class loads the BeanContext to register the new datasource configuration\r\n    @Singleton\r\n    public class MyFactory {\r\n        private final BeanContext beanContext;\r\n        public MyFactory(BeanContext beanContext) {\r\n            this.beanContext = beanContext;\r\n        }\r\n    \r\n        public void create(DatasourceConfiguration datasourceConfigurationd) {\r\n            beanContext.registerSingleton(DatasourceConfiguration.class, datasourceConfiguration, Qualifiers.byName(datasourceConfigurationd.getName()));\r\n        }\r\n    }\r\n    \r\n    // connection to some service that returns the database connection settings\r\n    @Client(&quot;https://service.search.tenant/&quot;))\r\n    public interface IClientTenant{\r\n        @Get(&quot;/{tenantId}&quot;)\r\n        DataBaseConfig get(String tenantId)\r\n    }\r\n    \r\n    \r\n    \r\n    @Singleton\r\n    public class NewDataSources {\r\n    \r\n        private IClientTenant clientTenant;\r\n        private MyFactory myFactory;\r\n        public NewDataSources(IClientTenant clientTenant, MyFactory myFactory) {\r\n            this.clientTenant = clientTenant;\r\n            this.myFactory = myFactory;\r\n        }\r\n    \r\n    \r\n        public void addNewDatasourceConfiguration(String tenantId){\r\n            var dc = clientTenant.get(tenantId);\r\n    \r\n            var url = String.format(&quot;jdbc:sqlserver://%s:%s;database=%s;TrustServerCertificate=True&quot;, dc.getHost(), dc.getPort(),dc.getDatabase());\r\n            DatasourceConfiguration hikariConfig = new DatasourceConfiguration(dc.getTenantId());\r\n            hikariConfig.setJdbcUrl(url);\r\n            hikariConfig.setDriverClassName(&quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;);\r\n            hikariConfig.setUsername(dc.getUser());\r\n            hikariConfig.setPassword(dc.getPass());\r\n            hikariConfig.setMinimumIdle(2);\r\n            hikariConfig.setMaximumPoolSize(8);\r\n            hikariConfig.setConnectionTimeout(SECONDS.toMillis(15));\r\n            hikariConfig.setIdleTimeout(MINUTES.toMillis(2));\r\n            hikariConfig.setValidationTimeout(SECONDS.toMillis(2));\r\n            hikariConfig.setConnectionTestQuery(&quot;select 1&quot;);\r\n            hikariConfig.setMaxLifetime(MINUTES.toMillis(30));\r\n            hikariConfig.setPoolName(dc.getDatabase());\r\n    \r\n            myFactory.create(hikariConfig);\r\n        }\r\n    \r\n    }","title":"Register / Configure DataSource on demand in Micronaut - Data","body":"<p>This was the only way I found to register and configure datasource on demand.</p>\n<p><strong>In my case, I created a schedule to check if there are new configurations to update, checking if it is already in</strong></p>\n<pre><code>Collection&lt;DatasourceConfiguration&gt; beansOfType = applicationContext.getBeansOfType(DatasourceConfiguration.class);\n\n\n// Class that contains database connection settings\n@Getter\n@Setter\npublic class DataBaseConfig {\n    private String tenantId;\n    private String host;\n    private String port;\n    private String user;\n    private String pass;\n    private String database;\n}\n\n// This class loads the BeanContext to register the new datasource configuration\n@Singleton\npublic class MyFactory {\n    private final BeanContext beanContext;\n    public MyFactory(BeanContext beanContext) {\n        this.beanContext = beanContext;\n    }\n\n    public void create(DatasourceConfiguration datasourceConfigurationd) {\n        beanContext.registerSingleton(DatasourceConfiguration.class, datasourceConfiguration, Qualifiers.byName(datasourceConfigurationd.getName()));\n    }\n}\n\n// connection to some service that returns the database connection settings\n@Client(&quot;https://service.search.tenant/&quot;))\npublic interface IClientTenant{\n    @Get(&quot;/{tenantId}&quot;)\n    DataBaseConfig get(String tenantId)\n}\n\n\n\n@Singleton\npublic class NewDataSources {\n\n    private IClientTenant clientTenant;\n    private MyFactory myFactory;\n    public NewDataSources(IClientTenant clientTenant, MyFactory myFactory) {\n        this.clientTenant = clientTenant;\n        this.myFactory = myFactory;\n    }\n\n\n    public void addNewDatasourceConfiguration(String tenantId){\n        var dc = clientTenant.get(tenantId);\n\n        var url = String.format(&quot;jdbc:sqlserver://%s:%s;database=%s;TrustServerCertificate=True&quot;, dc.getHost(), dc.getPort(),dc.getDatabase());\n        DatasourceConfiguration hikariConfig = new DatasourceConfiguration(dc.getTenantId());\n        hikariConfig.setJdbcUrl(url);\n        hikariConfig.setDriverClassName(&quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;);\n        hikariConfig.setUsername(dc.getUser());\n        hikariConfig.setPassword(dc.getPass());\n        hikariConfig.setMinimumIdle(2);\n        hikariConfig.setMaximumPoolSize(8);\n        hikariConfig.setConnectionTimeout(SECONDS.toMillis(15));\n        hikariConfig.setIdleTimeout(MINUTES.toMillis(2));\n        hikariConfig.setValidationTimeout(SECONDS.toMillis(2));\n        hikariConfig.setConnectionTestQuery(&quot;select 1&quot;);\n        hikariConfig.setMaxLifetime(MINUTES.toMillis(30));\n        hikariConfig.setPoolName(dc.getDatabase());\n\n        myFactory.create(hikariConfig);\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":734,"reputation":4042,"user_id":959,"accept_rate":52,"display_name":"jatanp"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":152,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1694652525,"creation_date":1674411027,"question_id":75202766,"body_markdown":"I am building a framework for some multi tenant application and it needs some dynamism with respect to data sources.\r\n\r\nI did check micronaut-data 3.9 and 4.0 rc builds and found that the team has introduced TenantDataSourceResolver and TenantSchemaResolver interfaces to dynamically select datasource / schema based on MultiTenant strategy.\r\n\r\nHowever, it still requires all the datasources to be pre-registered via application.yml. In my case the new datasources may get added dynamically and hence the need of dynamic registration of DataSource beans.\r\n\r\nI studied the code of micronaut-data and everything starts from DatasourceConfiguration and wired via  @EachProperty / @EachBean annotations till DefaultJdbcRepositoryOperations. Some of the beans (e.g. io.micronaut.configuration.jdbc.hikari.DataSourceFactory#dataSource) are bound to @Context scope hence they are eager initialized and bound to the context.\r\n\r\nAny help in this direction is appreciated. I really like micronaut-data but it feels lots of magic (especially for one who comes from Spring background) of compile time AOP and dynamic classes (generated via asm).\r\n\r\nThanks !\r\n\r\n\r\n","title":"Register / Configure DataSource on demand in Micronaut - Data","body":"<p>I am building a framework for some multi tenant application and it needs some dynamism with respect to data sources.</p>\n<p>I did check micronaut-data 3.9 and 4.0 rc builds and found that the team has introduced TenantDataSourceResolver and TenantSchemaResolver interfaces to dynamically select datasource / schema based on MultiTenant strategy.</p>\n<p>However, it still requires all the datasources to be pre-registered via application.yml. In my case the new datasources may get added dynamically and hence the need of dynamic registration of DataSource beans.</p>\n<p>I studied the code of micronaut-data and everything starts from DatasourceConfiguration and wired via  @EachProperty / @EachBean annotations till DefaultJdbcRepositoryOperations. Some of the beans (e.g. io.micronaut.configuration.jdbc.hikari.DataSourceFactory#dataSource) are bound to @Context scope hence they are eager initialized and bound to the context.</p>\n<p>Any help in this direction is appreciated. I really like micronaut-data but it feels lots of magic (especially for one who comes from Spring background) of compile time AOP and dynamic classes (generated via asm).</p>\n<p>Thanks !</p>\n"},{"tags":["java","spring","transactions"],"comments":[{"owner":{"account_id":4829578,"reputation":4682,"user_id":3898076,"accept_rate":72,"display_name":"Naman Gala"},"score":2,"creation_date":1439963700,"post_id":32087469,"comment_id":52070621,"body_markdown":"Can you tell us which package you have imported for `@Transactional`.","body":"Can you tell us which package you have imported for <code>@Transactional</code>."},{"owner":{"account_id":5188476,"reputation":1415,"user_id":4160538,"accept_rate":12,"display_name":"Vipul Jain"},"score":1,"creation_date":1439965557,"post_id":32087469,"comment_id":52071370,"body_markdown":"@NamanGala I was importing `javax.trasaction.Transactional`, now I got that I have to use one that was provided by spring only.","body":"@NamanGala I was importing <code>javax.trasaction.Transactional</code>, now I got that I have to use one that was provided by spring only."}],"answers":[{"comments":[{"owner":{"account_id":5188476,"reputation":1415,"user_id":4160538,"accept_rate":12,"display_name":"Vipul Jain"},"score":0,"creation_date":1439965665,"post_id":32087495,"comment_id":52071429,"body_markdown":"Thanks for the information, I got that, can you please also tell me if there is any significant difference between these two apart from that ,one is provided by JavaEE and other by Spring.","body":"Thanks for the information, I got that, can you please also tell me if there is any significant difference between these two apart from that ,one is provided by JavaEE and other by Spring."},{"owner":{"account_id":1967545,"reputation":5365,"user_id":1767366,"accept_rate":90,"display_name":"Bnrdo"},"score":1,"creation_date":1439965785,"post_id":32087495,"comment_id":52071481,"body_markdown":"Check this out http://stackoverflow.com/questions/10505160/difference-between-jta-and-spring-transactional-annotations","body":"Check this out <a href=\"http://stackoverflow.com/questions/10505160/difference-between-jta-and-spring-transactional-annotations\" title=\"difference between jta and spring transactional annotations\">stackoverflow.com/questions/10505160/&hellip;</a>"}],"tags":[],"owner":{"account_id":1967545,"reputation":5365,"user_id":1767366,"accept_rate":90,"display_name":"Bnrdo"},"comment_count":2,"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1439964015,"creation_date":1439963659,"answer_id":32087495,"question_id":32087469,"body_markdown":"Make sure you import `@Transactional` from `org.springframework.transaction.annotation.Transactional` and not from `javax.transaction.Transactional` as `readOnly` attribute is specific to Spring transaction.\r\n\r\n","title":"The attribute readOnly is undefined for the annotation type Transactional","body":"<p>Make sure you import <code>@Transactional</code> from <code>org.springframework.transaction.annotation.Transactional</code> and not from <code>javax.transaction.Transactional</code> as <code>readOnly</code> attribute is specific to Spring transaction.</p>\n"},{"tags":[],"owner":{"account_id":5945359,"reputation":430,"user_id":4675016,"display_name":"Arun"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1535348267,"creation_date":1535348267,"answer_id":52033109,"question_id":32087469,"body_markdown":"Add \r\n\r\nimport org.springframework.transaction.annotation.Transactional;","title":"The attribute readOnly is undefined for the annotation type Transactional","body":"<p>Add </p>\n\n<p>import org.springframework.transaction.annotation.Transactional;</p>\n"}],"owner":{"account_id":5188476,"reputation":1415,"user_id":4160538,"accept_rate":12,"display_name":"Vipul Jain"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9043,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"answer_count":2,"score":14,"last_activity_date":1694651855,"creation_date":1439963514,"question_id":32087469,"body_markdown":"I am getting this error when I am putting this piece of code on a service method \r\n   \r\n\r\n     @Transactional(readOnly =true)\r\n\r\n\r\nI am writing this code to make a transaction read only. Can you please tell me What I did wrong in this case","title":"The attribute readOnly is undefined for the annotation type Transactional","body":"<p>I am getting this error when I am putting this piece of code on a service method </p>\n\n<pre><code> @Transactional(readOnly =true)\n</code></pre>\n\n<p>I am writing this code to make a transaction read only. Can you please tell me What I did wrong in this case</p>\n"},{"tags":["java","ssl","rsa","bouncycastle"],"answers":[{"comments":[{"owner":{"account_id":3312888,"reputation":571,"user_id":2785890,"accept_rate":52,"display_name":"Alex Pavlov"},"score":2,"creation_date":1544025289,"post_id":41953072,"comment_id":94131884,"body_markdown":"I got an error: `java.security.NoSuchProviderException: no such provider: BC`","body":"I got an error: <code>java.security.NoSuchProviderException: no such provider: BC</code>"},{"owner":{"account_id":3312888,"reputation":571,"user_id":2785890,"accept_rate":52,"display_name":"Alex Pavlov"},"score":8,"creation_date":1544026939,"post_id":41953072,"comment_id":94132808,"body_markdown":"I solved it by adding `Security.addProvider(new BouncyCastleProvider());`","body":"I solved it by adding <code>Security.addProvider(new BouncyCastleProvider());</code>"},{"owner":{"account_id":1087775,"reputation":42376,"user_id":1083093,"accept_rate":67,"display_name":"Devrath"},"score":0,"creation_date":1548402442,"post_id":41953072,"comment_id":95536137,"body_markdown":"@pedrofb ....    I am trying this in android I cannot resolve `PEMParser` and `JcaPEMKeyConverter` .... I tried using `https://mvnrepository.com/artifact/org.bouncycastle/bcprov-jdk15on/1.55` ... but didn&#39;t work .... Which Jar I need to use or which grade do I need to use for this ?","body":"@pedrofb ....    I am trying this in android I cannot resolve <code>PEMParser</code> and <code>JcaPEMKeyConverter</code> .... I tried using <code>https:&#47;&#47;mvnrepository.com&#47;artifact&#47;org.bouncycastle&#47;bcprov-j&zwnj;&#8203;dk15on&#47;1.55</code> ... but didn&#39;t work .... Which Jar I need to use or which grade do I need to use for this ?"},{"owner":{"account_id":8497217,"reputation":37844,"user_id":6371459,"accept_rate":25,"display_name":"pedrofb"},"score":3,"creation_date":1548402964,"post_id":41953072,"comment_id":95536359,"body_markdown":"You will need `bcpkix` and `bcprov`. Try with  `compile &quot;org.bouncycastle:bcprov-jdk15on:$bouncycastleVersion&quot;    compile &quot;org.bouncycastle:bcpkix-jdk15on:$bouncycastleVersion&quot;`","body":"You will need <code>bcpkix</code> and <code>bcprov</code>. Try with  <code>compile &quot;org.bouncycastle:bcprov-jdk15on:$bouncycastleVersion&quot;    compile &quot;org.bouncycastle:bcpkix-jdk15on:$bouncycastleVersion&quot;</code>"},{"owner":{"account_id":948742,"reputation":733,"user_id":975386,"display_name":"Jean-Alexis Aufauvre"},"score":2,"creation_date":1553521588,"post_id":41953072,"comment_id":97403642,"body_markdown":"Here is a solution without Bouncycastle: https://stackoverflow.com/a/55339208/975386","body":"Here is a solution without Bouncycastle: <a href=\"https://stackoverflow.com/a/55339208/975386\">stackoverflow.com/a/55339208/975386</a>"},{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1661736079,"post_id":41953072,"comment_id":129835209,"body_markdown":"With most Java (at least Oracle and OpenJDK) technically you don&#39;t need to `set` or have configured the BC provider; JcaPEMKeyConverter works fine with the default provider(s). But you do need the bcprov _jar_ because BC&#39;s asn1 classes are in it, and given you have the jar you might as well use the provider classes.","body":"With most Java (at least Oracle and OpenJDK) technically you don&#39;t need to <code>set</code> or have configured the BC provider; JcaPEMKeyConverter works fine with the default provider(s). But you do need the bcprov <i>jar</i> because BC&#39;s asn1 classes are in it, and given you have the jar you might as well use the provider classes."},{"owner":{"account_id":1368470,"reputation":2687,"user_id":1304351,"accept_rate":40,"display_name":"Nambi"},"score":0,"creation_date":1694620608,"post_id":41953072,"comment_id":135916143,"body_markdown":"This code throws exception `java.lang.ClassCastException: class org.bouncycastle.cert.X509CertificateHolder cannot be cast to class org.bouncycastle.openssl.PEMKeyPair (org.bouncycastle.cert.X509CertificateHolder and org.bouncycastle.openssl.PEMKeyPair are in unnamed module of loader &#39;app&#39;)`","body":"This code throws exception <code>java.lang.ClassCastException: class org.bouncycastle.cert.X509CertificateHolder cannot be cast to class org.bouncycastle.openssl.PEMKeyPair (org.bouncycastle.cert.X509CertificateHolder and org.bouncycastle.openssl.PEMKeyPair are in unnamed module of loader &#39;app&#39;)</code>"},{"owner":{"account_id":1368470,"reputation":2687,"user_id":1304351,"accept_rate":40,"display_name":"Nambi"},"score":0,"creation_date":1694650436,"post_id":41953072,"comment_id":135920656,"body_markdown":"This method doesn&#39;t work. I used Java 20.","body":"This method doesn&#39;t work. I used Java 20."},{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1694652664,"post_id":41953072,"comment_id":135920808,"body_markdown":"@Nambi: you tried to read a file that contains a certificate, not a PKCS1 (actually any OpenSSL-legacy) private key. This question and answer is only for reading a PKCS1/legacy private key, not a certificate, and not anything else that isn&#39;t a PKCS1/legacy private key. It does work for a correct file, in any Java version.","body":"@Nambi: you tried to read a file that contains a certificate, not a PKCS1 (actually any OpenSSL-legacy) private key. This question and answer is only for reading a PKCS1/legacy private key, not a certificate, and not anything else that isn&#39;t a PKCS1/legacy private key. It does work for a correct file, in any Java version."}],"tags":[],"owner":{"account_id":8497217,"reputation":37844,"user_id":6371459,"accept_rate":25,"display_name":"pedrofb"},"comment_count":9,"down_vote_count":0,"up_vote_count":31,"is_accepted":true,"score":31,"last_activity_date":1531993564,"creation_date":1485852130,"answer_id":41953072,"question_id":41934846,"body_markdown":"Java does not come with out-of-the-box support for PKCS1 keys. You can however use [Bouncycastle][1]\r\n\r\n\tPEMParser pemParser = new PEMParser(new FileReader(privateKeyFile));\r\n    JcaPEMKeyConverter converter = new JcaPEMKeyConverter().setProvider(&quot;BC&quot;);\r\n\tObject object = pemParser.readObject();\r\n\tKeyPair kp = converter.getKeyPair((PEMKeyPair) object);\r\n\tPrivateKey privateKey = kp.getPrivate();\r\n\r\n\r\n  [1]: https://www.bouncycastle.org","title":"Read RSA private key of format PKCS1 in JAVA","body":"<p>Java does not come with out-of-the-box support for PKCS1 keys. You can however use <a href=\"https://www.bouncycastle.org\" rel=\"noreferrer\">Bouncycastle</a></p>\n\n<pre><code>PEMParser pemParser = new PEMParser(new FileReader(privateKeyFile));\nJcaPEMKeyConverter converter = new JcaPEMKeyConverter().setProvider(\"BC\");\nObject object = pemParser.readObject();\nKeyPair kp = converter.getKeyPair((PEMKeyPair) object);\nPrivateKey privateKey = kp.getPrivate();\n</code></pre>\n"}],"owner":{"account_id":4374011,"reputation":1391,"user_id":3567488,"accept_rate":71,"display_name":"Jenananthan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21019,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"accepted_answer_id":41953072,"answer_count":1,"score":18,"last_activity_date":1694650416,"creation_date":1485775901,"question_id":41934846,"body_markdown":"Is it possible to read the RSA private key of format PKCS1 in JAVA without converting to PKCS8? if yes, sample code is appreciated.\r\n \r\n\r\n    -----BEGIN RSA PRIVATE KEY-----\r\n     BASE64 ENCODED DATA\r\n    -----END RSA PRIVATE KEY-----","title":"Read RSA private key of format PKCS1 in JAVA","body":"<p>Is it possible to read the RSA private key of format PKCS1 in JAVA without converting to PKCS8? if yes, sample code is appreciated.</p>\n\n<pre><code>-----BEGIN RSA PRIVATE KEY-----\n BASE64 ENCODED DATA\n-----END RSA PRIVATE KEY-----\n</code></pre>\n"},{"tags":["java","arraylist"],"answers":[{"comments":[{"owner":{"account_id":9507435,"reputation":13,"user_id":7066458,"display_name":"user7066458"},"score":0,"creation_date":1694647118,"post_id":77100982,"comment_id":135920359,"body_markdown":"Okay, that make sense to me. Thank you for answer.","body":"Okay, that make sense to me. Thank you for answer."},{"owner":{"account_id":9507435,"reputation":13,"user_id":7066458,"display_name":"user7066458"},"score":0,"creation_date":1694647852,"post_id":77100982,"comment_id":135920426,"body_markdown":"I have tried as you told me and worked well with do-while and switch case. Thank you so much.","body":"I have tried as you told me and worked well with do-while and switch case. Thank you so much."}],"tags":[],"owner":{"account_id":69443,"reputation":85343,"user_id":202009,"accept_rate":79,"display_name":"Andy Thomas"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694646838,"creation_date":1694646838,"answer_id":77100982,"question_id":77100936,"body_markdown":"Your `cars` list is local to one call of the method called `menu()`. \r\n\r\nWhen you call that method again, it gets a different `cars` list.\r\n\r\nYou can solve this by using a loop inside a single call of the `menu()` method -- such as a `do-while` loop. Then each pass through the loop will use the same list.","title":"how to add values in arraylist with Switch case in JAVA","body":"<p>Your <code>cars</code> list is local to one call of the method called <code>menu()</code>.</p>\n<p>When you call that method again, it gets a different <code>cars</code> list.</p>\n<p>You can solve this by using a loop inside a single call of the <code>menu()</code> method -- such as a <code>do-while</code> loop. Then each pass through the loop will use the same list.</p>\n"}],"owner":{"account_id":9507435,"reputation":13,"user_id":7066458,"display_name":"user7066458"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77100982,"answer_count":1,"score":0,"last_activity_date":1694646838,"creation_date":1694645888,"question_id":77100936,"body_markdown":"I am a new with Java and I have a question. How to add values or index in arrayList in Switch case?\r\n\r\nI have tried without switch case, it will work well, but in Switch case, not working at all!!. my code run but i cant add values for example in case 1.\r\n\r\nhere&#39;s my code. \r\n\r\n\r\n```\r\nimport java.util.ArrayList;\r\nimport java.util.Scanner;\r\n\r\npublic class Eqla3tech {\r\n\r\n    public static void main(String[] args) {\r\n\r\n        menu();\r\n\r\n}\r\n\r\nstatic void menu(){\r\n\r\n    ArrayList&lt;String&gt; cars = new ArrayList&lt;String&gt;();\r\n    Scanner input = new Scanner(System.in);\r\n\r\n    System.out.println(&quot;Add Student &lt;1&gt;&quot;);\r\n    System.out.println(&quot;remove Student &lt;2&gt;&quot;);\r\n    System.out.println(&quot;show list of students &lt;3&gt;&quot;);\r\n    System.out.println(&quot;how many students? &lt;4&gt;&quot;);\r\n    int num = input.nextInt();\r\n    input.nextLine();\r\n    switch(num){\r\n        case 1:\r\n            System.out.println(&quot;write student name!!&quot;);\r\n\r\n\r\n            cars.add(input.next());\r\n            menu();\r\n            break;\r\n\r\n        case 2:\r\n            System.out.println(&quot;what number of index of student to remove&quot;);\r\n            int index = input.nextInt();\r\n            cars.remove(index);\r\n            menu();\r\n            break;\r\n\r\n        case 3:\r\n            System.out.println(&quot;Here&#39;s a list you have added.&quot;);\r\n           System.out.println(cars);\r\n            menu();\r\n            break;\r\n\r\n        case 4:\r\n            System.out.println(&quot;Here&#39;s haw many students&quot;);\r\n            System.out.println(cars.size());\r\n            menu();\r\n            break;\r\n\r\n\r\n    }\r\n}\r\n}\r\n```\r\nwhat i try to do is make arrays as dynamic and i can add or remove from Switch without losing values. \r\n\r\nplease apology for my bad English. \r\n\r\nI have tried to make user enter input but not worked. I mean, eveytime user enter input, value dont save in add arrayList. \r\n\r\nI think i am close but i lost too. ","title":"how to add values in arraylist with Switch case in JAVA","body":"<p>I am a new with Java and I have a question. How to add values or index in arrayList in Switch case?</p>\n<p>I have tried without switch case, it will work well, but in Switch case, not working at all!!. my code run but i cant add values for example in case 1.</p>\n<p>here's my code.</p>\n<pre><code>import java.util.ArrayList;\nimport java.util.Scanner;\n\npublic class Eqla3tech {\n\n    public static void main(String[] args) {\n\n        menu();\n\n}\n\nstatic void menu(){\n\n    ArrayList&lt;String&gt; cars = new ArrayList&lt;String&gt;();\n    Scanner input = new Scanner(System.in);\n\n    System.out.println(&quot;Add Student &lt;1&gt;&quot;);\n    System.out.println(&quot;remove Student &lt;2&gt;&quot;);\n    System.out.println(&quot;show list of students &lt;3&gt;&quot;);\n    System.out.println(&quot;how many students? &lt;4&gt;&quot;);\n    int num = input.nextInt();\n    input.nextLine();\n    switch(num){\n        case 1:\n            System.out.println(&quot;write student name!!&quot;);\n\n\n            cars.add(input.next());\n            menu();\n            break;\n\n        case 2:\n            System.out.println(&quot;what number of index of student to remove&quot;);\n            int index = input.nextInt();\n            cars.remove(index);\n            menu();\n            break;\n\n        case 3:\n            System.out.println(&quot;Here's a list you have added.&quot;);\n           System.out.println(cars);\n            menu();\n            break;\n\n        case 4:\n            System.out.println(&quot;Here's haw many students&quot;);\n            System.out.println(cars.size());\n            menu();\n            break;\n\n\n    }\n}\n}\n</code></pre>\n<p>what i try to do is make arrays as dynamic and i can add or remove from Switch without losing values.</p>\n<p>please apology for my bad English.</p>\n<p>I have tried to make user enter input but not worked. I mean, eveytime user enter input, value dont save in add arrayList.</p>\n<p>I think i am close but i lost too.</p>\n"},{"tags":["java","jax-ws"],"answers":[{"tags":[],"owner":{"account_id":304325,"reputation":779,"user_id":613763,"accept_rate":100,"display_name":"Alexander Sobolev"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1297517722,"creation_date":1297517722,"answer_id":4978326,"question_id":4978275,"body_markdown":"You should declare add as a webmethod.\r\ntry following:\r\n\r\n       @WebMethod public int add(int a, int b){\r\n        return (a+b);\r\n        }\r\n","title":"Simple Web Service adding two numbers","body":"<p>You should declare add as a webmethod.\ntry following:</p>\n\n<pre><code>   @WebMethod public int add(int a, int b){\n    return (a+b);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":708095,"reputation":11,"user_id":614229,"display_name":"Joe Moore"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1297519100,"creation_date":1297519100,"answer_id":4978421,"question_id":4978275,"body_markdown":"My Fault! I forgot to start the App Server","title":"Simple Web Service adding two numbers","body":"<p>My Fault! I forgot to start the App Server</p>\n"}],"owner":{"account_id":708095,"reputation":11,"user_id":614229,"display_name":"Joe Moore"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11235,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1694646085,"creation_date":1297517131,"question_id":4978275,"body_markdown":"I have created a simple Webservice function as shown below;\r\n\r\n    /*\r\n     * To change this template, choose Tools | Templates\r\n     * and open the template in the editor.\r\n     */\r\n    package ws;\r\n    import javax.jws.WebService;\r\n    /**\r\n     *\r\n     * @author Joe\r\n     */\r\n    @WebService()\r\n    public class Add2Int {\r\n    public int add(int a, int b) {\r\n        return (a+b);\r\n    }\r\n    }\r\n\r\nand I have created a very simple gui that allows the user to enter 2 numbers and which should output the result however this does not work?  I tried it without the gui and it works but when i build the gui it does not work?  here is my code for that side of things\r\n\r\n \r\n\r\n    /*\r\n     * To change this template, choose Tools | Templates\r\n     * and open the template in the editor.\r\n     */\r\n    \r\n    package myjavawsclient;\r\n    //import java.io.*;\r\n    import javax.swing.*;\r\n    import java.awt.*;\r\n    import java.awt.event.*;\r\n    \r\n    /**\r\n     *\r\n     * @author Joe\r\n     */\r\n    public class Calculator extends JFrame implements FocusListener {\r\n        JTextField value1 = new JTextField(&quot;&quot;, 5);\r\n        JLabel plus = new JLabel(&quot;+&quot;);\r\n        JTextField value2 = new JTextField(&quot;&quot;,5);\r\n        JLabel equals = new JLabel(&quot;=&quot;);\r\n        JTextField sum = new JTextField(&quot;&quot;, 5);\r\n    \r\n        public Calculator() {\r\n            super(&quot;The Calculator&quot;);\r\n            setSize(350,90);\r\n            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            FlowLayout flow = new FlowLayout(FlowLayout.CENTER);\r\n            setLayout(flow);\r\n            // add the listners\r\n            value1.addFocusListener(this);\r\n            value2.addFocusListener(this);\r\n            // set up sum field\r\n            sum.setEditable(true);\r\n            //add componets\r\n            add(value1);\r\n            add(plus);\r\n            add(value2);\r\n            add(equals);\r\n            add(sum);\r\n            setVisible(true);\r\n        }\r\n\r\n        public void focusGained(FocusEvent event){\r\n            try { // Call Web Service Operation\r\n                ws.Add2IntService service = new ws.Add2IntService();\r\n                ws.Add2Int port = service.getAdd2IntPort();\r\n                // TODO initialize WS operation arguments here\r\n                int result = 0;\r\n                int result2 = 0;\r\n                result = Integer.parseInt(value1.getText());\r\n                result2 = Integer.parseInt(value2.getText());\r\n    \r\n                int total = port.add(result, result2);\r\n                sum.setText(&quot;&quot; +total);\r\n    \r\n                //float plusTotal = Float.parseFloat(value1.getText()) +\r\n                    Float.parseFloat(value2.getText());\r\n    \r\n            } catch (Exception ex) {\r\n                // TODO handle custom exceptions here\r\n                //value1.setText(&quot;0&quot;);\r\n                //value2.setText(&quot;0&quot;);\r\n                //sum.setText(&quot;0&quot;);\r\n            }\r\n        }\r\n\r\n        public void focusLost(FocusEvent event){\r\n          focusGained(event);\r\n        }\r\n    \r\n        /**\r\n         * @param args the command line arguments\r\n         */\r\n        public static void main(String[] args) {\r\n    \r\n            // TODO code application logic here\r\n    \r\n            Calculator frame = new Calculator();\r\n        }\r\n    }\r\n\r\nI am not getting any errors I am just not getting any result from the 2 numbers, for example 1+1=2 but with my application it allows the user to enter 1 + 1 = ? but where the question mark is nothing gets shown.\r\n\r\nI was wondering if anyone could solve this problem for me. Oh and I am using NetBeans and GlassFish App server with WSDL\r\n\r\nJoe\r\n\r\n\r\n\r\n","title":"Simple Web Service adding two numbers","body":"<p>I have created a simple Webservice function as shown below;</p>\n\n<pre><code>/*\n * To change this template, choose Tools | Templates\n * and open the template in the editor.\n */\npackage ws;\nimport javax.jws.WebService;\n/**\n *\n * @author Joe\n */\n@WebService()\npublic class Add2Int {\npublic int add(int a, int b) {\n    return (a+b);\n}\n}\n</code></pre>\n\n<p>and I have created a very simple gui that allows the user to enter 2 numbers and which should output the result however this does not work?  I tried it without the gui and it works but when i build the gui it does not work?  here is my code for that side of things</p>\n\n<pre><code>/*\n * To change this template, choose Tools | Templates\n * and open the template in the editor.\n */\n\npackage myjavawsclient;\n//import java.io.*;\nimport javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.*;\n\n/**\n *\n * @author Joe\n */\npublic class Calculator extends JFrame implements FocusListener {\n    JTextField value1 = new JTextField(\"\", 5);\n    JLabel plus = new JLabel(\"+\");\n    JTextField value2 = new JTextField(\"\",5);\n    JLabel equals = new JLabel(\"=\");\n    JTextField sum = new JTextField(\"\", 5);\n\n    public Calculator() {\n        super(\"The Calculator\");\n        setSize(350,90);\n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        FlowLayout flow = new FlowLayout(FlowLayout.CENTER);\n        setLayout(flow);\n        // add the listners\n        value1.addFocusListener(this);\n        value2.addFocusListener(this);\n        // set up sum field\n        sum.setEditable(true);\n        //add componets\n        add(value1);\n        add(plus);\n        add(value2);\n        add(equals);\n        add(sum);\n        setVisible(true);\n    }\n\n    public void focusGained(FocusEvent event){\n        try { // Call Web Service Operation\n            ws.Add2IntService service = new ws.Add2IntService();\n            ws.Add2Int port = service.getAdd2IntPort();\n            // TODO initialize WS operation arguments here\n            int result = 0;\n            int result2 = 0;\n            result = Integer.parseInt(value1.getText());\n            result2 = Integer.parseInt(value2.getText());\n\n            int total = port.add(result, result2);\n            sum.setText(\"\" +total);\n\n            //float plusTotal = Float.parseFloat(value1.getText()) +\n                Float.parseFloat(value2.getText());\n\n        } catch (Exception ex) {\n            // TODO handle custom exceptions here\n            //value1.setText(\"0\");\n            //value2.setText(\"0\");\n            //sum.setText(\"0\");\n        }\n    }\n\n    public void focusLost(FocusEvent event){\n      focusGained(event);\n    }\n\n    /**\n     * @param args the command line arguments\n     */\n    public static void main(String[] args) {\n\n        // TODO code application logic here\n\n        Calculator frame = new Calculator();\n    }\n}\n</code></pre>\n\n<p>I am not getting any errors I am just not getting any result from the 2 numbers, for example 1+1=2 but with my application it allows the user to enter 1 + 1 = ? but where the question mark is nothing gets shown.</p>\n\n<p>I was wondering if anyone could solve this problem for me. Oh and I am using NetBeans and GlassFish App server with WSDL</p>\n\n<p>Joe</p>\n"},{"tags":["java","spring-boot","netflix-zuul"],"comments":[{"owner":{"account_id":6169696,"reputation":155,"user_id":4808342,"display_name":"thurst0n"},"score":0,"creation_date":1596843844,"post_id":61748253,"comment_id":111950916,"body_markdown":"Researching something similar myself, not resolved yet. But here&#39;s some things I&quot;m looking at.\n\n\n***AbstractLoadBalancerAwareClient*** is catching ALL exceptions and re-throwing them as ClientException&#39;s. I believe this is the root of the bug.\n\n\n\nClientException includes things like number of retries exceeded, and read_timeout_exception.so it may already be a 400 when I wouldn&#39;t classify it as that myself.\n\n\n\n\n\nRibbonHttpRequest calls executeWithLoadBalancer() which will throw the above exception.\n\n\n\n\nDefaultResponseErrorHandler or RibbonRoutingFilter might also be in play.","body":"Researching something similar myself, not resolved yet. But here&#39;s some things I&quot;m looking at.   <b><i>AbstractLoadBalancerAwareClient</i></b> is catching ALL exceptions and re-throwing them as ClientException&#39;s. I believe this is the root of the bug.    ClientException includes things like number of retries exceeded, and read_timeout_exception.so it may already be a 400 when I wouldn&#39;t classify it as that myself.      RibbonHttpRequest calls executeWithLoadBalancer() which will throw the above exception.     DefaultResponseErrorHandler or RibbonRoutingFilter might also be in play."},{"owner":{"account_id":2931336,"reputation":425,"user_id":2511487,"accept_rate":33,"display_name":"vijaya lakshmi"},"score":0,"creation_date":1620740907,"post_id":61748253,"comment_id":119286174,"body_markdown":"By any chance did you resolve this issue ? I am also facing the same","body":"By any chance did you resolve this issue ? I am also facing the same"}],"owner":{"account_id":7581444,"reputation":63,"user_id":5752034,"display_name":"Abhishek Mishra"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":980,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694645545,"creation_date":1589275793,"question_id":61748253,"body_markdown":"I have Zuul gateway in my service which gets the request from UI and forward it to Downstream service. I am not using ribbon and using the simple routing filter of Zuul.\r\nmy application YAML file is:\r\n\r\n    zuul:\r\n    debug:\r\n        request: true\r\n      host:\r\n        connect-timeout-millis: 60000 # starting the connection\r\n        socket-timeout-millis: 600000  # monitor the continuous incoming data flow\r\n      add-proxy-headers: true\r\n      routes:\r\n        service:\r\n          path: /service/**\r\n          sensitive-headers:\r\n          url: &lt;service-url&gt;\r\n\r\nIt is working as expected but I am facing an intermittent issue where for some request I am getting 400 bad request error and the request is not even reaching to the downstream routed service.\r\n\r\nI enabled the debug logs and saw in the logs of apache wire that whenever I get the 400 response there is an additional string added in the headers(I guess):\r\nPlease see the logs:\r\n\r\n    05:46:59.366 default [http-nio-8080-exec-3] DEBUG org.apache.http.headers - http-outgoing-494 &gt;&gt; x-forwarded-host:  &lt;HOST&gt;\r\n    05:46:59.366 default [http-nio-8080-exec-3] DEBUG org.apache.http.headers - http-outgoing-494 &gt;&gt; x-forwarded-server: &lt;SERVER&gt;\r\n    05:46:59.366 default [http-nio-8080-exec-3] DEBUG org.apache.http.headers - http-outgoing-494 &gt;&gt; x-forwarded-proto: https,http\r\n    05:46:59.366 default [http-nio-8080-exec-3] DEBUG org.apache.http.headers - http-outgoing-494 &gt;&gt; x-envoy-external-address: &lt;EXTERNAL ADDRESS&gt;\r\n    05:46:59.366 default [http-nio-8080-exec-3] DEBUG org.apache.http.headers - http-outgoing-494 &gt;&gt; x-request-id: &lt;REQUEST ID&gt;[\r\n    05:46:59.366 default [http-nio-8080-exec-3] DEBUG org.apache.http.headers - http-outgoing-494 &gt;&gt; x-envoy-expected-rq-timeout-ms: 1200000\r\n    05:46:59.366 default [http-nio-8080-exec-3] DEBUG org.apache.http.headers - http-outgoing-494 &gt;&gt; x-request-start: t=1589262419.335\r\n    05:46:59.366 default [http-nio-8080-exec-3] DEBUG org.apache.http.headers - http-outgoing-494 &gt;&gt; x-forwarded-prefix: /api/service\r\n    05:46:59.366 default [http-nio-8080-exec-3] DEBUG org.apache.http.headers - http-outgoing-494 &gt;&gt; Accept-Encoding: gzip\r\n    05:46:59.366 default [http-nio-8080-exec-3] DEBUG org.apache.http.headers - http-outgoing-494 &gt;&gt; Host: &lt;HOST&gt;\r\n    05:46:59.366 default [http-nio-8080-exec-3] DEBUG org.apache.http.headers - http-outgoing-494 &gt;&gt; Connection: Keep-Alive\r\n    05:46:59.366 default [http-nio-8080-exec-3] DEBUG org.apache.http.wire - http-outgoing-494 &gt;&gt; &quot;pZCI6IkEwMkY0MjM4MUYxMjAzMTBFMDUzMTJFQjQyQTkxMjM2IiwiZW1haWwiOiJhYmhpc2hla21pc2hyYTIwMzdAZ21haWwuY29tIiwibGFzdG5hbWUiOiJNaXNocmEiLCJ1c2VybmFtZSI6IlhyOVIxUHdxeWciLCJleHAiOjE1ODkyOTA0OTl9.N1wC0ChcHwTncwcePPGq_xcwBrXbr9Igb3XaxkFKbFPv8JjhWoX68ZqT8LSUp7OU8SfPsiP4BVLIqF6hgAKkWZVWVCKc7oJ0I796qVXZUFNkUHq8GLFCdunQ1thLkqdLJ6YeIt0WoQmlfKTJe14krD8p0Ue9gheR0fvqdKIeSIY[\\r][\\n]&quot;\r\n    05:46:59.366 default [http-nio-8080-exec-3] DEBUG org.apache.http.wire - http-outgoing-494 &gt;&gt; &quot;x-forwarded-prefix: /api/service[\\r][\\n]&quot;\r\n    05:46:59.366 default [http-nio-8080-exec-3] DEBUG org.apache.http.wire - http-outgoing-494 &gt;&gt; &quot;Accept-Encoding: gzip[\\r][\\n]&quot;\r\n    05:46:59.366 default [http-nio-8080-exec-3] DEBUG org.apache.http.wire - http-outgoing-494 &gt;&gt; &quot;Host: &lt;HOST&gt;[\\r][\\n]&quot;\r\n    05:46:59.366 default [http-nio-8080-exec-3] DEBUG org.apache.http.wire - http-outgoing-494 &gt;&gt; &quot;Connection: Keep-Alive[\\r][\\n]&quot;\r\n    05:46:59.366 default [http-nio-8080-exec-3] DEBUG org.apache.http.wire - http-outgoing-494 &gt;&gt; &quot;[\\r][\\n]&quot;\r\n    05:46:59.367 default [http-nio-8080-exec-3] DEBUG org.apache.http.wire - http-outgoing-494 &lt;&lt; &quot;HTTP/1.1 400 Bad Request[\\r][\\n]&quot;\r\n    05:46:59.367 default [http-nio-8080-exec-3] DEBUG org.apache.http.wire - http-outgoing-494 &lt;&lt; &quot;[\\r][\\n]&quot;\r\n    05:46:59.367 default [http-nio-8080-exec-3] DEBUG org.apache.http.headers - http-outgoing-494 &lt;&lt; HTTP/1.1 400 Bad Request\r\n\r\n\r\n05:46:59.366 default [http-nio-8080-exec-3] DEBUG org.apache.http.wire - http-outgoing-494 &gt;&gt; &quot;***pZCI6IkEwMkY0MjM4MUYxMjAzMTBFMDUzMTJFQjQyQTkxMjM2IiwiZW1haWwiOiJhYmhpc2hla21pc2hyYTIwMzdAZ21haWwuY29tIiwibGFzdG5hbWUiOiJNaXNocmEiLCJ1c2VybmFtZSI6IlhyOVIxUHdxeWciLCJleHAiOjE1ODkyOTA0OTl9.N1wC0ChcHwTncwcePPGq_xcwBrXbr9Igb3XaxkFKbFPv8JjhWoX68ZqT8LSUp7OU8SfPsiP4BVLIqF6hgAKkWZVWVCKc7oJ0I796qVXZUFNkUHq8GLFCdunQ1thLkqdLJ6YeIt0WoQmlfKTJe14krD8p0Ue9gheR0fvqdKIeSIY***[\\r][\\n]&quot;\r\n\r\nthis the additional string I am talking about and not sure why is getting added here and also I am not adding anything in the original request headers other than my own two additional headers\r\nwhich is required by the downstream service.\r\n\r\nAlso if you see the logs for the Success scenario logs, this additional string is not present there:\r\n\r\n    08:58:21.865 default [http-nio-8080-exec-4] DEBUG org.apache.http.wire - http-outgoing-553 &gt;&gt; &quot;x-forwarded-host: &lt;HOST&gt;[\\r][\\n]&quot;\r\n    08:58:21.865 default [http-nio-8080-exec-4] DEBUG org.apache.http.wire - http-outgoing-553 &gt;&gt; &quot;x-forwarded-server: &lt;SERVER&gt;[\\r][\\n]&quot;\r\n    08:58:21.865 default [http-nio-8080-exec-4] DEBUG org.apache.http.wire - http-outgoing-553 &gt;&gt; &quot;x-forwarded-proto: https,http[\\r][\\n]&quot;\r\n    08:58:21.865 default [http-nio-8080-exec-4] DEBUG org.apache.http.wire - http-outgoing-553 &gt;&gt; &quot;x-envoy-external-address: &lt;EXTERNAL ADDRESS&gt;[\\r][\\n]&quot;\r\n    08:58:21.865 default [http-nio-8080-exec-4] DEBUG org.apache.http.wire - http-outgoing-553 &gt;&gt; &quot;x-request-id: &lt;REQUEST ID&gt;[\\r][\\n]&quot;\r\n    08:58:21.865 default [http-nio-8080-exec-4] DEBUG org.apache.http.wire - http-outgoing-553 &gt;&gt; &quot;x-envoy-expected-rq-timeout-ms: 1200000[\\r][\\n]&quot;\r\n    08:58:21.865 default [http-nio-8080-exec-4] DEBUG org.apache.http.wire - http-outgoing-553 &gt;&gt; &quot;x-request-start: t=1589273901.838[\\r][\\n]&quot;\r\n    08:58:21.865 default [http-nio-8080-exec-4] DEBUG org.apache.http.wire - http-outgoing-553 &gt;&gt; &quot;x-forwarded-prefix: /api/service[\\r][\\n]&quot;\r\n    08:58:21.865 default [http-nio-8080-exec-4] DEBUG org.apache.http.wire - http-outgoing-553 &gt;&gt; &quot;Accept-Encoding: gzip[\\r][\\n]&quot;\r\n    08:58:21.865 default [http-nio-8080-exec-4] DEBUG org.apache.http.wire - http-outgoing-553 &gt;&gt; &quot;Host: &lt;HOST&gt;[\\r][\\n]&quot;\r\n    08:58:21.865 default [http-nio-8080-exec-4] DEBUG org.apache.http.wire - http-outgoing-553 &gt;&gt; &quot;Connection: Keep-Alive[\\r][\\n]&quot;\r\n    08:58:21.865 default [http-nio-8080-exec-4] DEBUG org.apache.http.wire - http-outgoing-553 &gt;&gt; &quot;[\\r][\\n]&quot;\r\n    08:58:22.352 default [SimpleHostRoutingFilter.connectionManagerTimer] DEBUG o.a.h.i.c.PoolingHttpClientConnectionManager - Closing expired connections\r\n    08:58:23.989 default [http-nio-8080-exec-4] DEBUG org.apache.http.wire - http-outgoing-553 &lt;&lt; &quot;HTTP/1.1 200 OK[\\r][\\n]&quot;\r\n\r\n\r\nThis is very intermittent issue and I am unable to find what is the root cause for this error.\r\nAnd also in case of 400 error request is not even reaching to the downstream service.\r\n\r\nAlso in both the cases same API call was made (GET CALL).\r\n\r\nPlease help me with this, I am unable to figure it out why it is happening.","title":"Getting 400 bad request Error from apache Http client in Zuul gateway and request is not reaching to downstream service","body":"<p>I have Zuul gateway in my service which gets the request from UI and forward it to Downstream service. I am not using ribbon and using the simple routing filter of Zuul.\nmy application YAML file is:</p>\n\n<pre><code>zuul:\ndebug:\n    request: true\n  host:\n    connect-timeout-millis: 60000 # starting the connection\n    socket-timeout-millis: 600000  # monitor the continuous incoming data flow\n  add-proxy-headers: true\n  routes:\n    service:\n      path: /service/**\n      sensitive-headers:\n      url: &lt;service-url&gt;\n</code></pre>\n\n<p>It is working as expected but I am facing an intermittent issue where for some request I am getting 400 bad request error and the request is not even reaching to the downstream routed service.</p>\n\n<p>I enabled the debug logs and saw in the logs of apache wire that whenever I get the 400 response there is an additional string added in the headers(I guess):\nPlease see the logs:</p>\n\n<pre><code>05:46:59.366 default [http-nio-8080-exec-3] DEBUG org.apache.http.headers - http-outgoing-494 &gt;&gt; x-forwarded-host:  &lt;HOST&gt;\n05:46:59.366 default [http-nio-8080-exec-3] DEBUG org.apache.http.headers - http-outgoing-494 &gt;&gt; x-forwarded-server: &lt;SERVER&gt;\n05:46:59.366 default [http-nio-8080-exec-3] DEBUG org.apache.http.headers - http-outgoing-494 &gt;&gt; x-forwarded-proto: https,http\n05:46:59.366 default [http-nio-8080-exec-3] DEBUG org.apache.http.headers - http-outgoing-494 &gt;&gt; x-envoy-external-address: &lt;EXTERNAL ADDRESS&gt;\n05:46:59.366 default [http-nio-8080-exec-3] DEBUG org.apache.http.headers - http-outgoing-494 &gt;&gt; x-request-id: &lt;REQUEST ID&gt;[\n05:46:59.366 default [http-nio-8080-exec-3] DEBUG org.apache.http.headers - http-outgoing-494 &gt;&gt; x-envoy-expected-rq-timeout-ms: 1200000\n05:46:59.366 default [http-nio-8080-exec-3] DEBUG org.apache.http.headers - http-outgoing-494 &gt;&gt; x-request-start: t=1589262419.335\n05:46:59.366 default [http-nio-8080-exec-3] DEBUG org.apache.http.headers - http-outgoing-494 &gt;&gt; x-forwarded-prefix: /api/service\n05:46:59.366 default [http-nio-8080-exec-3] DEBUG org.apache.http.headers - http-outgoing-494 &gt;&gt; Accept-Encoding: gzip\n05:46:59.366 default [http-nio-8080-exec-3] DEBUG org.apache.http.headers - http-outgoing-494 &gt;&gt; Host: &lt;HOST&gt;\n05:46:59.366 default [http-nio-8080-exec-3] DEBUG org.apache.http.headers - http-outgoing-494 &gt;&gt; Connection: Keep-Alive\n05:46:59.366 default [http-nio-8080-exec-3] DEBUG org.apache.http.wire - http-outgoing-494 &gt;&gt; \"pZCI6IkEwMkY0MjM4MUYxMjAzMTBFMDUzMTJFQjQyQTkxMjM2IiwiZW1haWwiOiJhYmhpc2hla21pc2hyYTIwMzdAZ21haWwuY29tIiwibGFzdG5hbWUiOiJNaXNocmEiLCJ1c2VybmFtZSI6IlhyOVIxUHdxeWciLCJleHAiOjE1ODkyOTA0OTl9.N1wC0ChcHwTncwcePPGq_xcwBrXbr9Igb3XaxkFKbFPv8JjhWoX68ZqT8LSUp7OU8SfPsiP4BVLIqF6hgAKkWZVWVCKc7oJ0I796qVXZUFNkUHq8GLFCdunQ1thLkqdLJ6YeIt0WoQmlfKTJe14krD8p0Ue9gheR0fvqdKIeSIY[\\r][\\n]\"\n05:46:59.366 default [http-nio-8080-exec-3] DEBUG org.apache.http.wire - http-outgoing-494 &gt;&gt; \"x-forwarded-prefix: /api/service[\\r][\\n]\"\n05:46:59.366 default [http-nio-8080-exec-3] DEBUG org.apache.http.wire - http-outgoing-494 &gt;&gt; \"Accept-Encoding: gzip[\\r][\\n]\"\n05:46:59.366 default [http-nio-8080-exec-3] DEBUG org.apache.http.wire - http-outgoing-494 &gt;&gt; \"Host: &lt;HOST&gt;[\\r][\\n]\"\n05:46:59.366 default [http-nio-8080-exec-3] DEBUG org.apache.http.wire - http-outgoing-494 &gt;&gt; \"Connection: Keep-Alive[\\r][\\n]\"\n05:46:59.366 default [http-nio-8080-exec-3] DEBUG org.apache.http.wire - http-outgoing-494 &gt;&gt; \"[\\r][\\n]\"\n05:46:59.367 default [http-nio-8080-exec-3] DEBUG org.apache.http.wire - http-outgoing-494 &lt;&lt; \"HTTP/1.1 400 Bad Request[\\r][\\n]\"\n05:46:59.367 default [http-nio-8080-exec-3] DEBUG org.apache.http.wire - http-outgoing-494 &lt;&lt; \"[\\r][\\n]\"\n05:46:59.367 default [http-nio-8080-exec-3] DEBUG org.apache.http.headers - http-outgoing-494 &lt;&lt; HTTP/1.1 400 Bad Request\n</code></pre>\n\n<p>05:46:59.366 default [http-nio-8080-exec-3] DEBUG org.apache.http.wire - http-outgoing-494 >> \"<strong><em>pZCI6IkEwMkY0MjM4MUYxMjAzMTBFMDUzMTJFQjQyQTkxMjM2IiwiZW1haWwiOiJhYmhpc2hla21pc2hyYTIwMzdAZ21haWwuY29tIiwibGFzdG5hbWUiOiJNaXNocmEiLCJ1c2VybmFtZSI6IlhyOVIxUHdxeWciLCJleHAiOjE1ODkyOTA0OTl9.N1wC0ChcHwTncwcePPGq_xcwBrXbr9Igb3XaxkFKbFPv8JjhWoX68ZqT8LSUp7OU8SfPsiP4BVLIqF6hgAKkWZVWVCKc7oJ0I796qVXZUFNkUHq8GLFCdunQ1thLkqdLJ6YeIt0WoQmlfKTJe14krD8p0Ue9gheR0fvqdKIeSIY</em></strong>[\\r][\\n]\"</p>\n\n<p>this the additional string I am talking about and not sure why is getting added here and also I am not adding anything in the original request headers other than my own two additional headers\nwhich is required by the downstream service.</p>\n\n<p>Also if you see the logs for the Success scenario logs, this additional string is not present there:</p>\n\n<pre><code>08:58:21.865 default [http-nio-8080-exec-4] DEBUG org.apache.http.wire - http-outgoing-553 &gt;&gt; \"x-forwarded-host: &lt;HOST&gt;[\\r][\\n]\"\n08:58:21.865 default [http-nio-8080-exec-4] DEBUG org.apache.http.wire - http-outgoing-553 &gt;&gt; \"x-forwarded-server: &lt;SERVER&gt;[\\r][\\n]\"\n08:58:21.865 default [http-nio-8080-exec-4] DEBUG org.apache.http.wire - http-outgoing-553 &gt;&gt; \"x-forwarded-proto: https,http[\\r][\\n]\"\n08:58:21.865 default [http-nio-8080-exec-4] DEBUG org.apache.http.wire - http-outgoing-553 &gt;&gt; \"x-envoy-external-address: &lt;EXTERNAL ADDRESS&gt;[\\r][\\n]\"\n08:58:21.865 default [http-nio-8080-exec-4] DEBUG org.apache.http.wire - http-outgoing-553 &gt;&gt; \"x-request-id: &lt;REQUEST ID&gt;[\\r][\\n]\"\n08:58:21.865 default [http-nio-8080-exec-4] DEBUG org.apache.http.wire - http-outgoing-553 &gt;&gt; \"x-envoy-expected-rq-timeout-ms: 1200000[\\r][\\n]\"\n08:58:21.865 default [http-nio-8080-exec-4] DEBUG org.apache.http.wire - http-outgoing-553 &gt;&gt; \"x-request-start: t=1589273901.838[\\r][\\n]\"\n08:58:21.865 default [http-nio-8080-exec-4] DEBUG org.apache.http.wire - http-outgoing-553 &gt;&gt; \"x-forwarded-prefix: /api/service[\\r][\\n]\"\n08:58:21.865 default [http-nio-8080-exec-4] DEBUG org.apache.http.wire - http-outgoing-553 &gt;&gt; \"Accept-Encoding: gzip[\\r][\\n]\"\n08:58:21.865 default [http-nio-8080-exec-4] DEBUG org.apache.http.wire - http-outgoing-553 &gt;&gt; \"Host: &lt;HOST&gt;[\\r][\\n]\"\n08:58:21.865 default [http-nio-8080-exec-4] DEBUG org.apache.http.wire - http-outgoing-553 &gt;&gt; \"Connection: Keep-Alive[\\r][\\n]\"\n08:58:21.865 default [http-nio-8080-exec-4] DEBUG org.apache.http.wire - http-outgoing-553 &gt;&gt; \"[\\r][\\n]\"\n08:58:22.352 default [SimpleHostRoutingFilter.connectionManagerTimer] DEBUG o.a.h.i.c.PoolingHttpClientConnectionManager - Closing expired connections\n08:58:23.989 default [http-nio-8080-exec-4] DEBUG org.apache.http.wire - http-outgoing-553 &lt;&lt; \"HTTP/1.1 200 OK[\\r][\\n]\"\n</code></pre>\n\n<p>This is very intermittent issue and I am unable to find what is the root cause for this error.\nAnd also in case of 400 error request is not even reaching to the downstream service.</p>\n\n<p>Also in both the cases same API call was made (GET CALL).</p>\n\n<p>Please help me with this, I am unable to figure it out why it is happening.</p>\n"},{"tags":["java","regex","regex-group"],"comments":[{"owner":{"account_id":4076597,"reputation":4537,"user_id":3348112,"accept_rate":75,"display_name":"CAustin"},"score":1,"creation_date":1687813593,"post_id":76560166,"comment_id":134986507,"body_markdown":"Does your input data only consist of these numbers, or does the regex pattern need to find them within a larger body of text? If the former, I&#39;d suggest doing a simple character replacement on `+` and then another replacement on `,`. No need to bundle it all into one big regex pattern.","body":"Does your input data only consist of these numbers, or does the regex pattern need to find them within a larger body of text? If the former, I&#39;d suggest doing a simple character replacement on <code>+</code> and then another replacement on <code>,</code>. No need to bundle it all into one big regex pattern."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1687813960,"post_id":76560166,"comment_id":134986564,"body_markdown":"Does it have to be a single operation?","body":"Does it have to be a single operation?"},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1687814105,"post_id":76560166,"comment_id":134986587,"body_markdown":"@CAustin Even if they&#39;re in a block of text, you can search for the general pattern and modify each on replace using the functional [`replaceAll`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/regex/Matcher.html#replaceAll(java.util.function.Function)).","body":"@CAustin Even if they&#39;re in a block of text, you can search for the general pattern and modify each on replace using the functional <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/regex/Matcher.html#replaceAll(java.util.function.Function)\" rel=\"nofollow noreferrer\"><code>replaceAll</code></a>."},{"owner":{"account_id":18044315,"reputation":1227,"user_id":13115701,"display_name":"Paul Marcelin Bejan"},"score":0,"creation_date":1687814194,"post_id":76560166,"comment_id":134986603,"body_markdown":"@shmosel not necessarily","body":"@shmosel not necessarily"},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1687814290,"post_id":76560166,"comment_id":134986617,"body_markdown":"So do `line.replaceFirst(&quot;^\\\\+&quot;, &quot;&quot;).replace(&#39;,&#39;, &#39;.&#39;)`","body":"So do <code>line.replaceFirst(&quot;^\\\\+&quot;, &quot;&quot;).replace(&#39;,&#39;, &#39;.&#39;)</code>"},{"owner":{"account_id":18044315,"reputation":1227,"user_id":13115701,"display_name":"Paul Marcelin Bejan"},"score":0,"creation_date":1687814380,"post_id":76560166,"comment_id":134986624,"body_markdown":"@CAustin yes, is part of a larger body text, a csv basically, but I&#39;m splitting each line by separator, and I will apply only on those fields that contain only numbers and symbols (+ - , . )","body":"@CAustin yes, is part of a larger body text, a csv basically, but I&#39;m splitting each line by separator, and I will apply only on those fields that contain only numbers and symbols (+ - , . )"},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1687816668,"post_id":76560166,"comment_id":134986970,"body_markdown":"Do you want to retain the leading zeros?","body":"Do you want to retain the leading zeros?"},{"owner":{"account_id":18044315,"reputation":1227,"user_id":13115701,"display_name":"Paul Marcelin Bejan"},"score":0,"creation_date":1687817184,"post_id":76560166,"comment_id":134987018,"body_markdown":"@WJS not necessarily","body":"@WJS not necessarily"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1687822483,"post_id":76560166,"comment_id":134987502,"body_markdown":"be advised to select Java if testing regular expressions for Java. You selected PCR3 (PHP): [screenshot](https://i.stack.imgur.com/aEIGZ.png) - when you select Java and hover of the substitution text, you&#39;ll see that `${3:+...` is not a conditional replacement since not available in Java, actually shown as [error](https://i.stack.imgur.com/Mqj7O.png)","body":"be advised to select Java if testing regular expressions for Java. You selected PCR3 (PHP): <a href=\"https://i.stack.imgur.com/aEIGZ.png\" rel=\"nofollow noreferrer\">screenshot</a> - when you select Java and hover of the substitution text, you&#39;ll see that <code>${3:+...</code> is not a conditional replacement since not available in Java, actually shown as <a href=\"https://i.stack.imgur.com/Mqj7O.png\" rel=\"nofollow noreferrer\">error</a>"}],"answers":[{"tags":[],"owner":{"account_id":23419629,"reputation":81,"user_id":17480047,"display_name":"AleXeNoN"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1687814258,"creation_date":1687814258,"answer_id":76560297,"question_id":76560166,"body_markdown":"```\r\nprivate static String replaceUsingRegex(final String line) {\r\n    Pattern regex = Pattern.compile(&quot;(\\\\+?)(0*)([0-9]+)([,\\\\.])?([0-9]+)?&quot;);\r\n    Matcher regexMatcher = regex.matcher(line);\r\n\r\n    if (regexMatcher.find()) {\r\n        String result = regexMatcher.group(3).replaceFirst(&quot;^0+&quot;, &quot;&quot;);\r\n        if (regexMatcher.group(4) != null &amp;&amp; regexMatcher.group(5) != null) {\r\n            result += &quot;.&quot; + regexMatcher.group(5);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    return line;\r\n}\r\n```\r\n\r\n1st capturing group: `(\\\\+?)` - leading &#39;+&#39; sign &lt;br&gt;\r\n2nd capturing group: `(0*)` - zeroes more than 1 &lt;br&gt;\r\n3rd capturing group: `([0-9]+)` - All digits before dot/comma &lt;br&gt;\r\n4th capturing group: `([,\\\\.]?)` - Comma and dot, optional &lt;br&gt;\r\n5th capturing group: `([0-9]+)?` - Digits after separator &lt;br&gt;\r\n\r\n","title":"Regex Conditional replacement on Java","body":"<pre><code>private static String replaceUsingRegex(final String line) {\n    Pattern regex = Pattern.compile(&quot;(\\\\+?)(0*)([0-9]+)([,\\\\.])?([0-9]+)?&quot;);\n    Matcher regexMatcher = regex.matcher(line);\n\n    if (regexMatcher.find()) {\n        String result = regexMatcher.group(3).replaceFirst(&quot;^0+&quot;, &quot;&quot;);\n        if (regexMatcher.group(4) != null &amp;&amp; regexMatcher.group(5) != null) {\n            result += &quot;.&quot; + regexMatcher.group(5);\n        }\n        return result;\n    }\n\n    return line;\n}\n</code></pre>\n<p>1st capturing group: <code>(\\\\+?)</code> - leading '+' sign <br>\n2nd capturing group: <code>(0*)</code> - zeroes more than 1 <br>\n3rd capturing group: <code>([0-9]+)</code> - All digits before dot/comma <br>\n4th capturing group: <code>([,\\\\.]?)</code> - Comma and dot, optional <br>\n5th capturing group: <code>([0-9]+)?</code> - Digits after separator <br></p>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1687817680,"creation_date":1687817271,"answer_id":76560499,"question_id":76560166,"body_markdown":"In my opinion, a regex is overkill for this. First, just replace the plus sign, then replace the comma. \r\n```\r\nString[] values = {\r\n        &quot;+000123,456&quot;,&quot;+123&quot;,&quot;000123,456&quot;,&quot;123&quot;,&quot;+123.45&quot;,&quot;-123,45&quot;\r\n};\r\n\r\nfor (String value : values) {\r\n    String s = value.replace(&quot;+&quot;, &quot;&quot;).replace(&quot;,&quot;, &quot;.&quot;);\r\n    System.out.println(s);\r\n}\r\n```\r\nprints\r\n```\r\n000123.456\r\n123\r\n000123.456\r\n123\r\n123.45\r\n-123.45\r\n```\r\nYou could also write a lambda to do it.\r\n```\r\nUnaryOperator&lt;String&gt; convert = str-&gt;str.replace(&quot;+&quot;, &quot;&quot;).replace(&quot;,&quot;, &quot;.&quot;);\r\nString result = convert.apply(&quot;+1202,233&quot;);\r\nSystem.out.println(result);\r\n```\r\nprints\r\n```\r\n1202.233\r\n","title":"Regex Conditional replacement on Java","body":"<p>In my opinion, a regex is overkill for this. First, just replace the plus sign, then replace the comma.</p>\n<pre><code>String[] values = {\n        &quot;+000123,456&quot;,&quot;+123&quot;,&quot;000123,456&quot;,&quot;123&quot;,&quot;+123.45&quot;,&quot;-123,45&quot;\n};\n\nfor (String value : values) {\n    String s = value.replace(&quot;+&quot;, &quot;&quot;).replace(&quot;,&quot;, &quot;.&quot;);\n    System.out.println(s);\n}\n</code></pre>\n<p>prints</p>\n<pre><code>000123.456\n123\n000123.456\n123\n123.45\n-123.45\n</code></pre>\n<p>You could also write a lambda to do it.</p>\n<pre><code>UnaryOperator&lt;String&gt; convert = str-&gt;str.replace(&quot;+&quot;, &quot;&quot;).replace(&quot;,&quot;, &quot;.&quot;);\nString result = convert.apply(&quot;+1202,233&quot;);\nSystem.out.println(result);\n</code></pre>\n<p>prints</p>\n<pre><code>1202.233\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1694644736,"creation_date":1687817759,"answer_id":76560531,"question_id":76560166,"body_markdown":"&gt; _&quot;... IllegalArgumentException at the third line ...&quot;_\r\n\r\nThe reason you&#39;re receiving this error is because the Java regex implementation does not recognize the &quot;conditional&quot; replacement syntax of `$2${3:+.$5:}`.  \r\nThe `${ }` construct is expected to contain only a literal reference to a capturing group.\r\n\r\nFor example, `(?&lt;name&gt;abc)`, and `${name}`.\r\n\r\nI believe the syntax you&#39;re using is specific to the _perl_, _PCRE_, implementation.  \r\n_[Perldoc &amp;ndash; perlre &amp;ndash; Perl regular expressions](https://perldoc.perl.org/perlre)_.  \r\n_[Perldoc &amp;ndash; perlretut &amp;ndash; Perl regular expressions tutorial](https://perldoc.perl.org/perlretut#Search-and-replace)_.  \r\n\r\nHere are the JavaDocs for both the _Pattern_ and _Matcher_ classes.  \r\nYou can find the complete syntax specifications on the _Pattern_ JavaDoc page.  \r\n_[Pattern (Java SE 20 &amp;amp; JDK 20)](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Pattern.html)_.  \r\n_[Matcher (Java SE 20 &amp;amp; JDK 20)](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Matcher.html)_.\r\n\r\nAnd, a relevant excerpt,\r\n_[Matcher#appendReplacement (Java SE 20 &amp;amp; JDK 20)](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Matcher.html#appendReplacement(java.lang.StringBuffer,java.lang.String))_.\r\n\r\n&gt; _&quot;... The replacement string may contain references to subsequences captured during the previous match: Each occurrence of ${name} or $g will be replaced by the result of evaluating the corresponding group(name) or group(g) respectively. For $g, the first number after the $ is always treated as part of the group reference. Subsequent numbers are incorporated into g if they would form a legal group reference. Only the numerals &#39;0&#39; through &#39;9&#39; are considered as potential components of the group reference. ...&quot;_\r\n\r\nThere are a few things you can do to parse the values.\r\n\r\n&gt; _&quot;... I want to remove the + sign if present and replace the comma with a dot. The difficult part is that not all the numbers are decimals. ...&quot;_\r\n\r\nIf the values will only ever have 1 comma, and a possible + character, you can just use a _[String#replace](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#replace(java.lang.CharSequence,java.lang.CharSequence))_ call.\r\n\r\n```java\r\nString[] strings = {\r\n    &quot;+000123,456&quot;,\r\n    &quot;+123&quot;,\r\n    &quot;000123,456&quot;,\r\n    &quot;123&quot;,\r\n    &quot;+123.45&quot;,\r\n    &quot;-123,45&quot;\r\n};\r\nfor (String string : strings) {\r\n    string = string.replace(&quot;+&quot;, &quot;&quot;).replace(&quot;,&quot;, &quot;.&quot;);\r\n    System.out.println(string);\r\n}\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n000123.456\r\n123\r\n000123.456\r\n123\r\n123.45\r\n-123.45\r\n```\r\n\r\nThis, of course, would not suffice when the numbers are within a text which also contains unrelated commas and plus signs.\r\n\r\nFor this you can use the _Pattern_ and _Matcher_ class, to capture the values, and then append them to a new _[StringBuilder](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/StringBuilder.html)_ instance.\r\n\r\nThe pattern will be,\r\n\r\n```none\r\n\\+?(-?\\d+)(?:[,.](\\d+))?\r\n```\r\n\r\n```java\r\nString string = &quot;abc, +000123,456 def +123, ghi 000123,456 jkl, 123 mno +123.45, pqr -123,45&quot;;\r\nPattern pattern = Pattern.compile(&quot;\\\\+?(-?\\\\d+)(?:[,.](\\\\d+))?&quot;);\r\nMatcher matcher = pattern.matcher(string);\r\nStringBuilder stringB = new StringBuilder();\r\nint offset = 0;\r\nwhile (matcher.find()) {\r\n    stringB.append(string, offset, matcher.start());\r\n    stringB.append(matcher.group(1));\r\n    if (matcher.group(2) != null) stringB.append(&quot;.&quot;).append(matcher.group(2));\r\n    offset = matcher.end();\r\n}\r\n```\r\n\r\nOutput\r\n\r\n```none\r\nabc, 000123.456 def 123, ghi 000123.456 jkl, 123 mno 123.45, pqr -123.45\r\n```","title":"Regex Conditional replacement on Java","body":"<blockquote>\n<p><em>&quot;... IllegalArgumentException at the third line ...&quot;</em></p>\n</blockquote>\n<p>The reason you're receiving this error is because the Java regex implementation does not recognize the &quot;conditional&quot; replacement syntax of <code>$2${3:+.$5:}</code>.<br />\nThe <code>${ }</code> construct is expected to contain only a literal reference to a capturing group.</p>\n<p>For example, <code>(?&lt;name&gt;abc)</code>, and <code>${name}</code>.</p>\n<p>I believe the syntax you're using is specific to the <em>perl</em>, <em>PCRE</em>, implementation.<br />\n<em><a href=\"https://perldoc.perl.org/perlre\" rel=\"nofollow noreferrer\">Perldoc – perlre – Perl regular expressions</a></em>.<br />\n<em><a href=\"https://perldoc.perl.org/perlretut#Search-and-replace\" rel=\"nofollow noreferrer\">Perldoc – perlretut – Perl regular expressions tutorial</a></em>.</p>\n<p>Here are the JavaDocs for both the <em>Pattern</em> and <em>Matcher</em> classes.<br />\nYou can find the complete syntax specifications on the <em>Pattern</em> JavaDoc page.<br />\n<em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Pattern.html\" rel=\"nofollow noreferrer\">Pattern (Java SE 20 &amp; JDK 20)</a></em>.<br />\n<em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Matcher.html\" rel=\"nofollow noreferrer\">Matcher (Java SE 20 &amp; JDK 20)</a></em>.</p>\n<p>And, a relevant excerpt,\n<em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Matcher.html#appendReplacement(java.lang.StringBuffer,java.lang.String)\" rel=\"nofollow noreferrer\">Matcher#appendReplacement (Java SE 20 &amp; JDK 20)</a></em>.</p>\n<blockquote>\n<p><em>&quot;... The replacement string may contain references to subsequences captured during the previous match: Each occurrence of ${name} or $g will be replaced by the result of evaluating the corresponding group(name) or group(g) respectively. For $g, the first number after the $ is always treated as part of the group reference. Subsequent numbers are incorporated into g if they would form a legal group reference. Only the numerals '0' through '9' are considered as potential components of the group reference. ...&quot;</em></p>\n</blockquote>\n<p>There are a few things you can do to parse the values.</p>\n<blockquote>\n<p><em>&quot;... I want to remove the + sign if present and replace the comma with a dot. The difficult part is that not all the numbers are decimals. ...&quot;</em></p>\n</blockquote>\n<p>If the values will only ever have 1 comma, and a possible + character, you can just use a <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#replace(java.lang.CharSequence,java.lang.CharSequence)\" rel=\"nofollow noreferrer\">String#replace</a></em> call.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String[] strings = {\n    &quot;+000123,456&quot;,\n    &quot;+123&quot;,\n    &quot;000123,456&quot;,\n    &quot;123&quot;,\n    &quot;+123.45&quot;,\n    &quot;-123,45&quot;\n};\nfor (String string : strings) {\n    string = string.replace(&quot;+&quot;, &quot;&quot;).replace(&quot;,&quot;, &quot;.&quot;);\n    System.out.println(string);\n}\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>000123.456\n123\n000123.456\n123\n123.45\n-123.45\n</code></pre>\n<p>This, of course, would not suffice when the numbers are within a text which also contains unrelated commas and plus signs.</p>\n<p>For this you can use the <em>Pattern</em> and <em>Matcher</em> class, to capture the values, and then append them to a new <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/StringBuilder.html\" rel=\"nofollow noreferrer\">StringBuilder</a></em> instance.</p>\n<p>The pattern will be,</p>\n<pre class=\"lang-none prettyprint-override\"><code>\\+?(-?\\d+)(?:[,.](\\d+))?\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>String string = &quot;abc, +000123,456 def +123, ghi 000123,456 jkl, 123 mno +123.45, pqr -123,45&quot;;\nPattern pattern = Pattern.compile(&quot;\\\\+?(-?\\\\d+)(?:[,.](\\\\d+))?&quot;);\nMatcher matcher = pattern.matcher(string);\nStringBuilder stringB = new StringBuilder();\nint offset = 0;\nwhile (matcher.find()) {\n    stringB.append(string, offset, matcher.start());\n    stringB.append(matcher.group(1));\n    if (matcher.group(2) != null) stringB.append(&quot;.&quot;).append(matcher.group(2));\n    offset = matcher.end();\n}\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>abc, 000123.456 def 123, ghi 000123.456 jkl, 123 mno 123.45, pqr -123.45\n</code></pre>\n"}],"owner":{"account_id":18044315,"reputation":1227,"user_id":13115701,"display_name":"Paul Marcelin Bejan"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":133,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":76560531,"answer_count":3,"score":0,"last_activity_date":1694644736,"creation_date":1687812760,"question_id":76560166,"body_markdown":"I have some numbers on which I want to apply some regex replacement.\r\n\r\n+000123,456\r\n&lt;br&gt;+123\r\n&lt;br&gt;000123,456\r\n&lt;br&gt;123\r\n&lt;br&gt;+123.45\r\n&lt;br&gt;-123,45\r\n\r\nI want to remove the + sign if present and replace the comma with a dot.\r\nThe difficult part is that not all the numbers are decimals.\r\n\r\nI don&#39;t use regex really often, so I usually use [regex101][1] to do some tests.\r\n\r\nIn this case, I created the following regular expression:\r\n\r\n    ([+]*)([0-9]+)(([,])([0-9]+))*\r\n\r\n1st capturing group: `([+]*)`\r\n&lt;br&gt;2nd capturing group: `([0-9]+)`\r\n&lt;br&gt;3rd capturing group: `(([,])([0-9]+))*`\r\n&lt;br&gt;4th capturing group: `([,])`\r\n&lt;br&gt;5th capturing group: `([0-9]+)`\r\n\r\nand substitution :\r\n\r\n    $2${3:+.$5:}\r\n\r\nExplanation: use 2nd capturing group, then if 3rd capturing group is present use DOT and 5th capturing group, else nothing\r\n\r\nand seems to work fine, but trying to replicate the same on Java, it&#39;s not working:\r\n\r\n\tprivate String replaceUsingRegex(final String line) {\r\n\t\tPattern regex = Pattern.compile(&quot;([+]*)([0-9]+)(([,])([0-9]+))*&quot;);\r\n\t\tMatcher regexMatcher = regex.matcher(line);\r\n\t\treturn regexMatcher.replaceAll(&quot;$2${3:+.$5:}&quot;);\r\n\t}\r\n\r\ngived me an IllegalArgumentException at the third line:\r\n\r\n    java.lang.IllegalArgumentException: named capturing group is missing trailing &#39;}&#39;\r\n    \tat java.base/java.util.regex.Matcher.appendExpandedReplacement(Matcher.java:1051)\r\n    \tat java.base/java.util.regex.Matcher.appendReplacement(Matcher.java:997)\r\n    \tat java.base/java.util.regex.Matcher.replaceAll(Matcher.java:1181)\r\n    \tat com.mytest.TestRegex.replaceUsingRegex(TestRegex.java:20)\r\n\r\nI also tried to use the [java generated code by rege101][2] but is still not working.\r\n\r\n\r\n  [1]: https://regex101.com/r/oVhLeS/1\r\n  [2]: https://regex101.com/r/oVhLeS/1/codegen?language=java","title":"Regex Conditional replacement on Java","body":"<p>I have some numbers on which I want to apply some regex replacement.</p>\n<p>+000123,456\n<br>+123\n<br>000123,456\n<br>123\n<br>+123.45\n<br>-123,45</p>\n<p>I want to remove the + sign if present and replace the comma with a dot.\nThe difficult part is that not all the numbers are decimals.</p>\n<p>I don't use regex really often, so I usually use <a href=\"https://regex101.com/r/oVhLeS/1\" rel=\"nofollow noreferrer\">regex101</a> to do some tests.</p>\n<p>In this case, I created the following regular expression:</p>\n<pre><code>([+]*)([0-9]+)(([,])([0-9]+))*\n</code></pre>\n<p>1st capturing group: <code>([+]*)</code>\n<br>2nd capturing group: <code>([0-9]+)</code>\n<br>3rd capturing group: <code>(([,])([0-9]+))*</code>\n<br>4th capturing group: <code>([,])</code>\n<br>5th capturing group: <code>([0-9]+)</code></p>\n<p>and substitution :</p>\n<pre><code>$2${3:+.$5:}\n</code></pre>\n<p>Explanation: use 2nd capturing group, then if 3rd capturing group is present use DOT and 5th capturing group, else nothing</p>\n<p>and seems to work fine, but trying to replicate the same on Java, it's not working:</p>\n<pre><code>private String replaceUsingRegex(final String line) {\n    Pattern regex = Pattern.compile(&quot;([+]*)([0-9]+)(([,])([0-9]+))*&quot;);\n    Matcher regexMatcher = regex.matcher(line);\n    return regexMatcher.replaceAll(&quot;$2${3:+.$5:}&quot;);\n}\n</code></pre>\n<p>gived me an IllegalArgumentException at the third line:</p>\n<pre><code>java.lang.IllegalArgumentException: named capturing group is missing trailing '}'\n    at java.base/java.util.regex.Matcher.appendExpandedReplacement(Matcher.java:1051)\n    at java.base/java.util.regex.Matcher.appendReplacement(Matcher.java:997)\n    at java.base/java.util.regex.Matcher.replaceAll(Matcher.java:1181)\n    at com.mytest.TestRegex.replaceUsingRegex(TestRegex.java:20)\n</code></pre>\n<p>I also tried to use the <a href=\"https://regex101.com/r/oVhLeS/1/codegen?language=java\" rel=\"nofollow noreferrer\">java generated code by rege101</a> but is still not working.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1694640725,"post_id":77100603,"comment_id":135919627,"body_markdown":"Edit your post to show what you mean by &quot;breaks&quot;. I assume that is an error message? If so, edit your post and paste the error message there.","body":"Edit your post to show what you mean by &quot;breaks&quot;. I assume that is an error message? If so, edit your post and paste the error message there."},{"owner":{"account_id":24138064,"reputation":41,"user_id":18104674,"display_name":"Thomas Hutton"},"score":0,"creation_date":1694640751,"post_id":77100603,"comment_id":135919629,"body_markdown":"will do thank you","body":"will do thank you"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1694640847,"post_id":77100603,"comment_id":135919640,"body_markdown":"And in general, if you want to remove elements from an `ArrayList` while looping through it, it is better to use an instance of `java.util.Iterator` as opposed to just doing a for-each loop. A for-each loop is just for reading stuff. But if you plan to modify while reading, an `Iterator` is a better choice.","body":"And in general, if you want to remove elements from an <code>ArrayList</code> while looping through it, it is better to use an instance of <code>java.util.Iterator</code> as opposed to just doing a for-each loop. A for-each loop is just for reading stuff. But if you plan to modify while reading, an <code>Iterator</code> is a better choice."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1694640915,"post_id":77100603,"comment_id":135919654,"body_markdown":"Ah, `ConcurrentModificationException`. In that case, the other answer covers the solution you need to implement. Let either of us know if the link does not make sense.","body":"Ah, <code>ConcurrentModificationException</code>. In that case, the other answer covers the solution you need to implement. Let either of us know if the link does not make sense."},{"owner":{"account_id":24138064,"reputation":41,"user_id":18104674,"display_name":"Thomas Hutton"},"score":0,"creation_date":1694640968,"post_id":77100603,"comment_id":135919658,"body_markdown":"thanks I think this is what I needed but I&#39;ll let you know if it goes awry","body":"thanks I think this is what I needed but I&#39;ll let you know if it goes awry"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1694641114,"post_id":77100603,"comment_id":135919681,"body_markdown":"Actually, I really dislike the other answer now that I read the link. I am typing up my own.","body":"Actually, I really dislike the other answer now that I read the link. I am typing up my own."},{"owner":{"account_id":24138064,"reputation":41,"user_id":18104674,"display_name":"Thomas Hutton"},"score":0,"creation_date":1694641228,"post_id":77100603,"comment_id":135919704,"body_markdown":"Yeah I&#39;m still confused but at least I&#39;m in the ballpark now","body":"Yeah I&#39;m still confused but at least I&#39;m in the ballpark now"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1694642252,"post_id":77100603,"comment_id":135919858,"body_markdown":"@ThomasHutton, this is because the _for-each_ loop utilizes an _Iterator_.  For example, if you did this with a regular _for-loop_ you would not receive a _ConcurrentModificationException_.  Just modify the conditional statement as the list size changes.","body":"@ThomasHutton, this is because the <i>for-each</i> loop utilizes an <i>Iterator</i>.  For example, if you did this with a regular <i>for-loop</i> you would not receive a <i>ConcurrentModificationException</i>.  Just modify the conditional statement as the list size changes."}],"answers":[{"comments":[{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1694641000,"post_id":77100627,"comment_id":135919663,"body_markdown":"Maybe you meant to send a different link? I don&#39;t think this link is actually a relevant one to the question the OP has.","body":"Maybe you meant to send a different link? I don&#39;t think this link is actually a relevant one to the question the OP has."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1694641073,"post_id":77100627,"comment_id":135919674,"body_markdown":"Ok, that stackoverflow and javadocs links are ok, but your first link is just unhelpful and irrelevant.","body":"Ok, that stackoverflow and javadocs links are ok, but your first link is just unhelpful and irrelevant."},{"owner":{"account_id":25593916,"reputation":53,"user_id":19370127,"display_name":"rithvik"},"score":0,"creation_date":1694641140,"post_id":77100627,"comment_id":135919686,"body_markdown":"I added another stackoverflow page that&#39;s clearer, but the original link works too because the removeAll method of ArrayList performs the function that the OP wants to do, just inline rather than as a for loop","body":"I added another stackoverflow page that&#39;s clearer, but the original link works too because the removeAll method of ArrayList performs the function that the OP wants to do, just inline rather than as a for loop"},{"owner":{"account_id":25593916,"reputation":53,"user_id":19370127,"display_name":"rithvik"},"score":0,"creation_date":1694641273,"post_id":77100627,"comment_id":135919710,"body_markdown":"Granted it&#39;s not the official javadocs, so maybe I&#39;ll change that once I find the link","body":"Granted it&#39;s not the official javadocs, so maybe I&#39;ll change that once I find the link"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1694641456,"post_id":77100627,"comment_id":135919734,"body_markdown":"Eh, I guess it&#39;s fine. I&#39;ll type up my own answer though.","body":"Eh, I guess it&#39;s fine. I&#39;ll type up my own answer though."},{"owner":{"account_id":24138064,"reputation":41,"user_id":18104674,"display_name":"Thomas Hutton"},"score":0,"creation_date":1694641794,"post_id":77100627,"comment_id":135919792,"body_markdown":"The collect and remove method worked for me, thanks everybody","body":"The collect and remove method worked for me, thanks everybody"}],"tags":[],"owner":{"account_id":25593916,"reputation":53,"user_id":19370127,"display_name":"rithvik"},"comment_count":6,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1694641291,"creation_date":1694640798,"answer_id":77100627,"question_id":77100603,"body_markdown":"In this case, you&#39;re iterating over the list using a for loop. The trouble comes when you try to remove an object *while* you&#39;re still iterating with the for loop. Since the length of the ArrayList changes, you get a concurrent modification error because it&#39;s not permissible to edit a collection while simultaneously iterating over it. Look into these resources for more info on how to accomplish what you&#39;re trying to do:\r\n\r\nhttps://docs.oracle.com/javase%2F7%2Fdocs%2Fapi%2F%2F/java/util/ArrayList.html#removeAll(java.util.Collection)\r\n\r\nhttps://stackoverflow.com/a/10432084/19370127\r\n\r\nMore info about the exception: https://docs.oracle.com/javase/8/docs/api/java/util/ConcurrentModificationException.html","title":"Object not being removed from array after being found in array list","body":"<p>In this case, you're iterating over the list using a for loop. The trouble comes when you try to remove an object <em>while</em> you're still iterating with the for loop. Since the length of the ArrayList changes, you get a concurrent modification error because it's not permissible to edit a collection while simultaneously iterating over it. Look into these resources for more info on how to accomplish what you're trying to do:</p>\n<p><a href=\"https://docs.oracle.com/javase%2F7%2Fdocs%2Fapi%2F%2F/java/util/ArrayList.html#removeAll(java.util.Collection)\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase%2F7%2Fdocs%2Fapi%2F%2F/java/util/ArrayList.html#removeAll(java.util.Collection)</a></p>\n<p><a href=\"https://stackoverflow.com/a/10432084/19370127\">https://stackoverflow.com/a/10432084/19370127</a></p>\n<p>More info about the exception: <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/ConcurrentModificationException.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/util/ConcurrentModificationException.html</a></p>\n"},{"tags":[],"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694643007,"creation_date":1694641714,"answer_id":77100686,"question_id":77100603,"body_markdown":"Only use a for-each loop if you are doing READ-ONLY operations on a `Collection` (your `ArrayList` is a `Collection`).\r\n\r\nIf you want to DELETE while looping, you should use a [`java.util.Iterator`][1] instead.\r\n\r\nAn `Iterator` is easy to use, and your `ArrayList` even gives you a method to fetch an `Iterator`. All you have to do is add an import on the top (`import java.util.Iterator;`), then say `Iterator&lt;Student&gt; iterator = myList.iterator();`.\r\n\r\nHere is how it would be done with your code example. Don&#39;t forget to include the import at the top of your class.\r\n\r\n```java\r\npublic static void DeleteStudent(ArrayList&lt;Student&gt; Student_Class, String studentid)\r\n{\r\n\r\n    Iterator&lt;Student&gt; iterator = Student_Class.iterator();\r\n\r\n    while(iterator.hasNext())\r\n    {\r\n\r\n        Student student = iterator.next();\r\n\r\n        if(student.getId().equalsIgnoreCase(studentid))\r\n        {\r\n\r\n            iterator.remove(); //removes the most recently fetched student\r\n\r\n        }\r\n\r\n    }\r\n\r\n}\r\n```\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Iterator.html","title":"Object not being removed from array after being found in array list","body":"<p>Only use a for-each loop if you are doing READ-ONLY operations on a <code>Collection</code> (your <code>ArrayList</code> is a <code>Collection</code>).</p>\n<p>If you want to DELETE while looping, you should use a <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Iterator.html\" rel=\"nofollow noreferrer\"><code>java.util.Iterator</code></a> instead.</p>\n<p>An <code>Iterator</code> is easy to use, and your <code>ArrayList</code> even gives you a method to fetch an <code>Iterator</code>. All you have to do is add an import on the top (<code>import java.util.Iterator;</code>), then say <code>Iterator&lt;Student&gt; iterator = myList.iterator();</code>.</p>\n<p>Here is how it would be done with your code example. Don't forget to include the import at the top of your class.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void DeleteStudent(ArrayList&lt;Student&gt; Student_Class, String studentid)\n{\n\n    Iterator&lt;Student&gt; iterator = Student_Class.iterator();\n\n    while(iterator.hasNext())\n    {\n\n        Student student = iterator.next();\n\n        if(student.getId().equalsIgnoreCase(studentid))\n        {\n\n            iterator.remove(); //removes the most recently fetched student\n\n        }\n\n    }\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":24138064,"reputation":41,"user_id":18104674,"display_name":"Thomas Hutton"},"score":0,"creation_date":1694641834,"post_id":77100687,"comment_id":135919796,"body_markdown":"thank you for explaining this I didn&#39;t quite understand iterators","body":"thank you for explaining this I didn&#39;t quite understand iterators"}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694641715,"creation_date":1694641715,"answer_id":77100687,"question_id":77100603,"body_markdown":"ConcurrentModificationException occurs when you perform the following sequence of events:\r\n\r\n* You ask a collector for an `iterator()`. (and `for (String foo : collection)` does that).\r\n* You modify the collection directly, such as `collection.remove`.\r\n* You interact with that iterator. For example, by moving on to the next item (which is what looping that for loop would do).\r\n\r\nYou do that here: You ask for an iterator, remove from the collection, and then interact with the iterator.\r\n\r\niterators support what you want. Replace your code with:\r\n\r\n```\r\nvar it = studentClass.iterator();\r\nwhile (it.hasNext()) {\r\n  Student student = it.next();\r\n  if (student.getId().equalsIgnoreCase(studentId)) it.remove();\r\n}\r\n```\r\n\r\nHere we remove just the same, but... _via the iterator_, which, unlike removing directly on the collection, this means the iterator remains valid.\r\n","title":"Object not being removed from array after being found in array list","body":"<p>ConcurrentModificationException occurs when you perform the following sequence of events:</p>\n<ul>\n<li>You ask a collector for an <code>iterator()</code>. (and <code>for (String foo : collection)</code> does that).</li>\n<li>You modify the collection directly, such as <code>collection.remove</code>.</li>\n<li>You interact with that iterator. For example, by moving on to the next item (which is what looping that for loop would do).</li>\n</ul>\n<p>You do that here: You ask for an iterator, remove from the collection, and then interact with the iterator.</p>\n<p>iterators support what you want. Replace your code with:</p>\n<pre><code>var it = studentClass.iterator();\nwhile (it.hasNext()) {\n  Student student = it.next();\n  if (student.getId().equalsIgnoreCase(studentId)) it.remove();\n}\n</code></pre>\n<p>Here we remove just the same, but... <em>via the iterator</em>, which, unlike removing directly on the collection, this means the iterator remains valid.</p>\n"}],"owner":{"account_id":24138064,"reputation":41,"user_id":18104674,"display_name":"Thomas Hutton"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77100686,"answer_count":3,"score":1,"last_activity_date":1694643007,"creation_date":1694640526,"question_id":77100603,"body_markdown":"I have a method to delete an object from an array list based on an attribute of the class called id. When I call it, it finds the correct id then breaks. This is all very new to me\r\n```\r\n    public static void DeleteStudent(ArrayList&lt;Student&gt; Student_Class, String studentid) {\r\n        for(Student student : Student_Class)\r\n            if(student.getId().equalsIgnoreCase(studentid))\r\n                Student_Class.remove(student);\r\n    }\r\n```\r\nerror:\r\n\r\n&gt; Exception in thread &quot;main&quot; java.util.ConcurrentModificationException\r\n\tat java.base/java.util.ArrayList$Itr.checkForComodification(ArrayList.java:1013)\r\n\tat java.base/java.util.ArrayList$Itr.next(ArrayList.java:967)\r\n\tat StudentProgram.DeleteStudent(StudentProgram.java:39)\r\n\tat StudentProgram.main(StudentProgram.java:28)","title":"Object not being removed from array after being found in array list","body":"<p>I have a method to delete an object from an array list based on an attribute of the class called id. When I call it, it finds the correct id then breaks. This is all very new to me</p>\n<pre><code>    public static void DeleteStudent(ArrayList&lt;Student&gt; Student_Class, String studentid) {\n        for(Student student : Student_Class)\n            if(student.getId().equalsIgnoreCase(studentid))\n                Student_Class.remove(student);\n    }\n</code></pre>\n<p>error:</p>\n<blockquote>\n<p>Exception in thread &quot;main&quot; java.util.ConcurrentModificationException\nat java.base/java.util.ArrayList$Itr.checkForComodification(ArrayList.java:1013)\nat java.base/java.util.ArrayList$Itr.next(ArrayList.java:967)\nat StudentProgram.DeleteStudent(StudentProgram.java:39)\nat StudentProgram.main(StudentProgram.java:28)</p>\n</blockquote>\n"},{"tags":["java","spring","jpa","crud"],"comments":[{"owner":{"account_id":1223835,"reputation":75878,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":1,"creation_date":1627677296,"post_id":68596596,"comment_id":121229556,"body_markdown":"Your error message does not match your code; you did not define a query method `findNameLike` in this code. Also, (1) `nativeQuery` is an _absolute last_ resort; your query can trivially be written in JPQL, and (2) `findAll` is already implicitly declared.","body":"Your error message does not match your code; you did not define a query method <code>findNameLike</code> in this code. Also, (1) <code>nativeQuery</code> is an <i>absolute last</i> resort; your query can trivially be written in JPQL, and (2) <code>findAll</code> is already implicitly declared."},{"owner":{"account_id":19904499,"reputation":35,"user_id":14583857,"display_name":"Mr.Roy"},"score":0,"creation_date":1627831756,"post_id":68596596,"comment_id":121255857,"body_markdown":"Thank u so much i am able to solve the pblm.","body":"Thank u so much i am able to solve the pblm."}],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":4,"creation_date":1634716864,"post_id":69641803,"comment_id":123096804,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/69641803/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":23087810,"reputation":1,"user_id":17199077,"display_name":"Chaitanya Patil"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634714211,"creation_date":1634714211,"answer_id":69641803,"question_id":68596596,"body_markdown":"Use 2 annotations like enablejparepositories , entityscan","title":"Error creating bean with name &#39;userRepo&#39; defined in com.example.jpa.repository","body":"<p>Use 2 annotations like enablejparepositories , entityscan</p>\n"},{"tags":[],"owner":{"account_id":22661439,"reputation":66,"user_id":16834474,"display_name":"Ahmed Nafea"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667986285,"creation_date":1667986285,"answer_id":74372598,"question_id":68596596,"body_markdown":"i was solving this problem by add these annotation in model class\r\n\r\n    @Table //is a corresponding table that matches that entity in the database\r\n    @Entity // for specifies class is an entity and is mapped to a database table. \r\n    @Data // for getter and seter\r\n    public class UserModel {\r\n    }","title":"Error creating bean with name &#39;userRepo&#39; defined in com.example.jpa.repository","body":"<p>i was solving this problem by add these annotation in model class</p>\n<pre><code>@Table //is a corresponding table that matches that entity in the database\n@Entity // for specifies class is an entity and is mapped to a database table. \n@Data // for getter and seter\npublic class UserModel {\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29172605,"reputation":1,"user_id":22348604,"display_name":"user22348604"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691744788,"creation_date":1691348020,"answer_id":76847367,"question_id":68596596,"body_markdown":" \r\n\r\n    @Query (value=&quot;select * from User&quot;, nativeQuery=true)\r\n\r\nTable name should start with capital *U*, i.e. same as class name.\r\n\r\n","title":"Error creating bean with name &#39;userRepo&#39; defined in com.example.jpa.repository","body":"<pre><code>@Query (value=&quot;select * from User&quot;, nativeQuery=true)\n</code></pre>\n<p>Table name should start with capital <em>U</em>, i.e. same as class name.</p>\n"}],"owner":{"account_id":19904499,"reputation":35,"user_id":14583857,"display_name":"Mr.Roy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25813,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1694642810,"creation_date":1627675753,"question_id":68596596,"body_markdown":" This is tge **error** i am getting atthe time of compilation. I am new at spring and not able to understand the error.Plz help me to find out.  \r\n\r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;userRepo&#39; defined in com.example.jpa.repository.UserRepo defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract java.util.List com.example.jpa.repository.UserRepo.findNameLike(java.lang.String)! Reason: Failed to create query for method public abstract java.util.List com.example.jpa.repository.UserRepo.findNameLike(java.lang.String)! No property findName found for type User!; nested exception is java.lang.IllegalArgumentException: Failed to create query for method public abstract java.util.List com.example.jpa.repository.UserRepo.findNameLike(java.lang.String)! No property findName found for type User!\r\n\r\n\r\n**This is my Repository class** \r\n\r\nAccording to that  the error in the **@Query** But i am getting how to fix and wher is my mistake.\r\ni have created a tavle called user1 in mysql.\r\n\r\n    package com.example.jpa.repository;\r\n    \r\n    import java.util.List;\r\n    \r\n    import javax.persistence.criteria.CriteriaBuilder.In;\r\n    \r\n    import org.springframework.data.jpa.repository.JpaRepository;\r\n    import org.springframework.data.jpa.repository.Modifying;\r\n    import org.springframework.data.jpa.repository.Query;\r\n    import org.springframework.data.repository.CrudRepository;\r\n    import org.springframework.stereotype.Repository;\r\n    \r\n    import com.example.jpa.entity.User;\r\n    \r\n    @Repository\r\n    public interface UserRepo extends JpaRepository&lt;User, Integer&gt; {\r\n    \tpublic List&lt;User&gt; findByAgeGreaterThanEqual(int age) ;\r\n    \t\r\n    \tpublic List&lt;User&gt; findByAgeIn(int age);\r\n    \t\r\n    \tpublic List&lt;User&gt; findByNameOrderByName(String name);\r\n    \t@Modifying\r\n    \t@Query (value=&quot;select * from user1&quot;,nativeQuery=true)\r\n    \tpublic List&lt;User&gt; getAllUser();\r\n    }\r\n\r\n**This is my Entity class**\r\n\r\n    package com.example.jpa.entity;\r\n    \r\n    import javax.persistence.Entity;\r\n    import javax.persistence.GeneratedValue;\r\n    import javax.persistence.GenerationType;\r\n    import javax.persistence.Id;\r\n    import javax.persistence.Table;\r\n    \r\n    @Entity\r\n    //@Table(name = &quot;user&quot;)\r\n    public class User {\r\n    \t\r\n    \t@Id\r\n    \t@GeneratedValue(strategy = GenerationType.AUTO)\r\n    \tprivate int id;\r\n    \tprivate String name;\r\n    \tprivate String city;\r\n    \tprivate String status;\r\n    \t\r\n    \tpublic User() {\r\n    \t\tsuper();\r\n    \t\t\r\n    \t}\r\n    \tpublic User(int id, String name, String city, String status) {\r\n    \t\tsuper();\r\n    \t\tthis.id = id;\r\n    \t\tthis.name = name;\r\n    \t\tthis.city = city;\r\n    \t\tthis.status = status;\r\n    \t}\r\n    \t\r\n    \t\r\n    \tpublic int getId() {\r\n    \t\treturn id;\r\n    \t}\r\n    \tpublic void setId(int id) {\r\n    \t\tthis.id = id;\r\n    \t}\r\n    \tpublic String getName() {\r\n    \t\treturn name;\r\n    \t}\r\n    \tpublic void setName(String name) {\r\n    \t\tthis.name = name;\r\n    \t}\r\n    \tpublic String getCity() {\r\n    \t\treturn city;\r\n    \t}\r\n    \tpublic void setCity(String city) {\r\n    \t\tthis.city = city;\r\n    \t}\r\n    \tpublic String getStatus() {\r\n    \t\treturn status;\r\n    \t}\r\n    \tpublic void setStatus(String status) {\r\n    \t\tthis.status = status;\r\n    \t}\r\n    }\r\n\r\n**This is my main application main class**\r\n\r\n    package com.example.jpa;\r\n    \r\n    import java.util.List;\r\n    import java.util.Optional;\r\n    \r\n    import org.apache.catalina.core.ApplicationContext;\r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.context.ConfigurableApplicationContext;\r\n    import org.springframework.data.jpa.repository.config.EnableJpaRepositories;\r\n    \r\n    import com.example.jpa.entity.User;\r\n    import com.example.jpa.repository.UserRepo;\r\n    \r\n    \r\n    @SpringBootApplication\r\n    public class SpringApplicaton1Application {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tConfigurableApplicationContext context = SpringApplication.run(SpringApplicaton1Application.class, args);\r\n    \t\tUserRepo repo = context.getBean(UserRepo.class);\r\n    \r\n    \t\tUser user = new User();\r\n    \t\tuser.setId(1);\r\n    \t\tuser.setCity(&quot;Delhi&quot;);\r\n    \t\tuser.setName(&quot;Ramesh&quot;);\r\n    \t\tuser.setStatus(&quot;Java Developer&quot;);\r\n    \r\n    \t\tList&lt;User&gt; users= repo.getAllUser();\r\n    \t\t\r\n    \t\tusers.forEach(n-&gt;{\r\n    \t\t\tSystem.out.println(n);\r\n    \t\t\t\r\n    \t\t});\r\n    \t\t\r\n    \t}\r\n    \r\n    }\r\n\r\n**This is my Application.property file**\r\n\r\n    spring.datasource.name=test\r\n    spring.datasource.url=jdbc:mysql://${MYSQL_HOST:localhost}:3306/practice   \r\n    spring.datasource.username=root\r\n    spring.datasource.password=root\r\n    spring.datasource.driver-class-name=com.mysql.jdbc.Driver\r\n    spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL55Dialect\r\n    \r\n    spring.jpa.hibernate.use-new-id-generator-mappings= false\r\n    \r\n    spring.jpa.hibernate.ddl-auto=update","title":"Error creating bean with name &#39;userRepo&#39; defined in com.example.jpa.repository","body":"<p>This is tge <strong>error</strong> i am getting atthe time of compilation. I am new at spring and not able to understand the error.Plz help me to find out.</p>\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userRepo' defined in com.example.jpa.repository.UserRepo defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract java.util.List com.example.jpa.repository.UserRepo.findNameLike(java.lang.String)! Reason: Failed to create query for method public abstract java.util.List com.example.jpa.repository.UserRepo.findNameLike(java.lang.String)! No property findName found for type User!; nested exception is java.lang.IllegalArgumentException: Failed to create query for method public abstract java.util.List com.example.jpa.repository.UserRepo.findNameLike(java.lang.String)! No property findName found for type User!\n</code></pre>\n<p><strong>This is my Repository class</strong></p>\n<p>According to that  the error in the <strong>@Query</strong> But i am getting how to fix and wher is my mistake.\ni have created a tavle called user1 in mysql.</p>\n<pre><code>package com.example.jpa.repository;\n\nimport java.util.List;\n\nimport javax.persistence.criteria.CriteriaBuilder.In;\n\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.data.jpa.repository.Modifying;\nimport org.springframework.data.jpa.repository.Query;\nimport org.springframework.data.repository.CrudRepository;\nimport org.springframework.stereotype.Repository;\n\nimport com.example.jpa.entity.User;\n\n@Repository\npublic interface UserRepo extends JpaRepository&lt;User, Integer&gt; {\n    public List&lt;User&gt; findByAgeGreaterThanEqual(int age) ;\n    \n    public List&lt;User&gt; findByAgeIn(int age);\n    \n    public List&lt;User&gt; findByNameOrderByName(String name);\n    @Modifying\n    @Query (value=&quot;select * from user1&quot;,nativeQuery=true)\n    public List&lt;User&gt; getAllUser();\n}\n</code></pre>\n<p><strong>This is my Entity class</strong></p>\n<pre><code>package com.example.jpa.entity;\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\n\n@Entity\n//@Table(name = &quot;user&quot;)\npublic class User {\n    \n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private int id;\n    private String name;\n    private String city;\n    private String status;\n    \n    public User() {\n        super();\n        \n    }\n    public User(int id, String name, String city, String status) {\n        super();\n        this.id = id;\n        this.name = name;\n        this.city = city;\n        this.status = status;\n    }\n    \n    \n    public int getId() {\n        return id;\n    }\n    public void setId(int id) {\n        this.id = id;\n    }\n    public String getName() {\n        return name;\n    }\n    public void setName(String name) {\n        this.name = name;\n    }\n    public String getCity() {\n        return city;\n    }\n    public void setCity(String city) {\n        this.city = city;\n    }\n    public String getStatus() {\n        return status;\n    }\n    public void setStatus(String status) {\n        this.status = status;\n    }\n}\n</code></pre>\n<p><strong>This is my main application main class</strong></p>\n<pre><code>package com.example.jpa;\n\nimport java.util.List;\nimport java.util.Optional;\n\nimport org.apache.catalina.core.ApplicationContext;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.ConfigurableApplicationContext;\nimport org.springframework.data.jpa.repository.config.EnableJpaRepositories;\n\nimport com.example.jpa.entity.User;\nimport com.example.jpa.repository.UserRepo;\n\n\n@SpringBootApplication\npublic class SpringApplicaton1Application {\n\n    public static void main(String[] args) {\n        ConfigurableApplicationContext context = SpringApplication.run(SpringApplicaton1Application.class, args);\n        UserRepo repo = context.getBean(UserRepo.class);\n\n        User user = new User();\n        user.setId(1);\n        user.setCity(&quot;Delhi&quot;);\n        user.setName(&quot;Ramesh&quot;);\n        user.setStatus(&quot;Java Developer&quot;);\n\n        List&lt;User&gt; users= repo.getAllUser();\n        \n        users.forEach(n-&gt;{\n            System.out.println(n);\n            \n        });\n        \n    }\n\n}\n</code></pre>\n<p><strong>This is my Application.property file</strong></p>\n<pre><code>spring.datasource.name=test\nspring.datasource.url=jdbc:mysql://${MYSQL_HOST:localhost}:3306/practice   \nspring.datasource.username=root\nspring.datasource.password=root\nspring.datasource.driver-class-name=com.mysql.jdbc.Driver\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL55Dialect\n\nspring.jpa.hibernate.use-new-id-generator-mappings= false\n\nspring.jpa.hibernate.ddl-auto=update\n</code></pre>\n"},{"tags":["java","inheritance","arraylist","equals","lombok"],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1694642130,"creation_date":1694642130,"answer_id":77100717,"question_id":77100270,"body_markdown":"&gt; I can write my own logic for it but is there a way to customize this equal logic in Lombok?\r\n\r\nThere is. But you cannot do what you want. Not because of lombok, but because __equals and hashCode do not allow you to do this__.\r\n\r\n## problem 1: hashcode\r\n\r\nThere&#39;s a rule. If 2 objects are equal, their hashcode MUST BE equal. (the reverse need not be true; 2 objects with equal hashcodes do not have to be equal).\r\n\r\nSo how in the blazes would you write a hashCode impl that adheres to this rule? The only feasible option is `return 0;` - all instances of `subClass` have the same hashCode. Which obliterates any point of trying to use such a class in many contexts where you want `equals` at all, such as in hashmap. It&#39;s highly dubious to do this, but what other option do you have?\r\n\r\n## problem 2: Equivalence rules\r\n\r\nWhenever you override a method (i.e. implement a method defined by a supertype), you have to _adhere to the contract_. This at the very minimum involves the signature line: Your override _must_ have the same name, parameter types, and return type (or strictly compatible expansions of this), or you&#39;ve failed to adhere to the contract, and the compiler will refuse to compile if you mess that up.\r\n\r\n_But that is not the only contract you have to adhere to_.\r\n\r\nNot everything can be checked by the compiler. However, just because the compiler doesn&#39;t check it doesn&#39;t mean the rule doesn&#39;t exist or that you can just ignore it.\r\n\r\n__You cannot do this without breaking the contract__.\r\n\r\nThe specific problem is the rule of equivalence. The equals contract states that implementation must adhere to a bunch of rules. The rule that is problematic here is this one:\r\n\r\n&gt; If `a.equals(b)` and `b.equals(c)`, then `a.equals(c)` __must__ be true\r\n\r\nAnd you can&#39;t do that.\r\n\r\nImagine A having ids `[1,2,3]`, B having ids `[2,3,4]` and C having ids `[4,5,6]`.\r\n\r\nA is equals to B in your setup (because they have 2 and 3 in common), and B is equal to C as well (because they have 4 in common). But A and C are not equal to each other as they have no ID in common and __that breaks the contract__.\r\n\r\n","title":"Customize Lombok equalsAndHashCode() on list attribute","body":"<blockquote>\n<p>I can write my own logic for it but is there a way to customize this equal logic in Lombok?</p>\n</blockquote>\n<p>There is. But you cannot do what you want. Not because of lombok, but because <strong>equals and hashCode do not allow you to do this</strong>.</p>\n<h2>problem 1: hashcode</h2>\n<p>There's a rule. If 2 objects are equal, their hashcode MUST BE equal. (the reverse need not be true; 2 objects with equal hashcodes do not have to be equal).</p>\n<p>So how in the blazes would you write a hashCode impl that adheres to this rule? The only feasible option is <code>return 0;</code> - all instances of <code>subClass</code> have the same hashCode. Which obliterates any point of trying to use such a class in many contexts where you want <code>equals</code> at all, such as in hashmap. It's highly dubious to do this, but what other option do you have?</p>\n<h2>problem 2: Equivalence rules</h2>\n<p>Whenever you override a method (i.e. implement a method defined by a supertype), you have to <em>adhere to the contract</em>. This at the very minimum involves the signature line: Your override <em>must</em> have the same name, parameter types, and return type (or strictly compatible expansions of this), or you've failed to adhere to the contract, and the compiler will refuse to compile if you mess that up.</p>\n<p><em>But that is not the only contract you have to adhere to</em>.</p>\n<p>Not everything can be checked by the compiler. However, just because the compiler doesn't check it doesn't mean the rule doesn't exist or that you can just ignore it.</p>\n<p><strong>You cannot do this without breaking the contract</strong>.</p>\n<p>The specific problem is the rule of equivalence. The equals contract states that implementation must adhere to a bunch of rules. The rule that is problematic here is this one:</p>\n<blockquote>\n<p>If <code>a.equals(b)</code> and <code>b.equals(c)</code>, then <code>a.equals(c)</code> <strong>must</strong> be true</p>\n</blockquote>\n<p>And you can't do that.</p>\n<p>Imagine A having ids <code>[1,2,3]</code>, B having ids <code>[2,3,4]</code> and C having ids <code>[4,5,6]</code>.</p>\n<p>A is equals to B in your setup (because they have 2 and 3 in common), and B is equal to C as well (because they have 4 in common). But A and C are not equal to each other as they have no ID in common and <strong>that breaks the contract</strong>.</p>\n"}],"owner":{"account_id":16935487,"reputation":313,"user_id":12248597,"display_name":"EzyHoo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77100717,"answer_count":1,"score":0,"last_activity_date":1694642130,"creation_date":1694636553,"question_id":77100270,"body_markdown":"Is there a way to customize the Lombok equalsAndHashCode() on list attribute?\r\n\r\nI have a subclass that looks like so:\r\n\r\n````\r\npublic class subClass extends superClass {\r\n    private List&lt;Long&gt; ids;\r\n````\r\n\r\nFor 2 subClass objs, I consider them as equal if they have 1 or more ids in common.\r\n\r\nI can write my own logic for it but is there a way to customize this equal logic in Lombok?","title":"Customize Lombok equalsAndHashCode() on list attribute","body":"<p>Is there a way to customize the Lombok equalsAndHashCode() on list attribute?</p>\n<p>I have a subclass that looks like so:</p>\n<pre><code>public class subClass extends superClass {\n    private List&lt;Long&gt; ids;\n</code></pre>\n<p>For 2 subClass objs, I consider them as equal if they have 1 or more ids in common.</p>\n<p>I can write my own logic for it but is there a way to customize this equal logic in Lombok?</p>\n"},{"tags":["java","jboss","jax-rs","wildfly"],"comments":[{"owner":{"account_id":281082,"reputation":11615,"user_id":577181,"accept_rate":20,"display_name":"John Ament"},"score":0,"creation_date":1413638889,"post_id":26403934,"comment_id":41523984,"body_markdown":"Why don&#39;t we maybe start with a use case.  What is the use case for having the path configurable?","body":"Why don&#39;t we maybe start with a use case.  What is the use case for having the path configurable?"}],"answers":[{"tags":[],"owner":{"account_id":5138561,"reputation":111,"user_id":4116602,"display_name":"traianus"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1413463070,"creation_date":1413463070,"answer_id":26404675,"question_id":26403934,"body_markdown":"According to JAX-RS specification ([here][1]), there is no standard way to do this, I think.\r\n\r\n  [1]: http://download.oracle.com/otndocs/jcp/jaxrs-2_0_rev_A-mrel-eval-spec/index.html","title":"JAX-RS: Is it possible to have an externally configurable @PATH?","body":"<p>According to JAX-RS specification (<a href=\"http://download.oracle.com/otndocs/jcp/jaxrs-2_0_rev_A-mrel-eval-spec/index.html\" rel=\"nofollow\">here</a>), there is no standard way to do this, I think.</p>\n"},{"tags":[],"owner":{"account_id":1431364,"reputation":10713,"user_id":1353722,"accept_rate":81,"display_name":"lefloh"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1413824110,"creation_date":1413547374,"answer_id":26424624,"question_id":26403934,"body_markdown":"Independent of JAX-RS: Annotations in Java are compile time constants so they can&#39;t be changed at runtime. \r\n\r\nI don&#39;t know your use case but possible ways to change the values of the annotations are:\r\n\r\n* Replacing variables before compilation, e.g. through a maven plugin.\r\n* Adding the `@Path` annotations dynamically like [described here][1].\r\n* Using one generic ResourceClass mapped to `/*` which decides which [subresource][2] should be returned.\r\n\r\nNo comment if one of these approaches makes sense as I don&#39;t know why you want to change them. As the URI names a resource I don&#39;t see any reason to change it. See also: [Cool URIs don&#39;t change][3]\r\n\r\n**Update:** [JAX_RS_SPEC-60][4] requests &quot;A Dynamic way to register JAX-RS resources (not based on annotations)&quot;.\r\n\r\n [1]: http://ayoubelabbassi.blogspot.de/2011/01/how-to-add-annotations-at-runtime-to.html\r\n [2]: https://jersey.java.net/documentation/latest/jaxrs-resources.html#d0e2184\r\n [3]: http://www.w3.org/Provider/Style/URI.html.en\r\n [4]: https://java.net/jira/browse/JAX_RS_SPEC-60","title":"JAX-RS: Is it possible to have an externally configurable @PATH?","body":"<p>Independent of JAX-RS: Annotations in Java are compile time constants so they can't be changed at runtime. </p>\n\n<p>I don't know your use case but possible ways to change the values of the annotations are:</p>\n\n<ul>\n<li>Replacing variables before compilation, e.g. through a maven plugin.</li>\n<li>Adding the <code>@Path</code> annotations dynamically like <a href=\"http://ayoubelabbassi.blogspot.de/2011/01/how-to-add-annotations-at-runtime-to.html\" rel=\"nofollow\">described here</a>.</li>\n<li>Using one generic ResourceClass mapped to <code>/*</code> which decides which <a href=\"https://jersey.java.net/documentation/latest/jaxrs-resources.html#d0e2184\" rel=\"nofollow\">subresource</a> should be returned.</li>\n</ul>\n\n<p>No comment if one of these approaches makes sense as I don't know why you want to change them. As the URI names a resource I don't see any reason to change it. See also: <a href=\"http://www.w3.org/Provider/Style/URI.html.en\" rel=\"nofollow\">Cool URIs don't change</a></p>\n\n<p><strong>Update:</strong> <a href=\"https://java.net/jira/browse/JAX_RS_SPEC-60\" rel=\"nofollow\">JAX_RS_SPEC-60</a> requests \"A Dynamic way to register JAX-RS resources (not based on annotations)\".</p>\n"},{"tags":[],"owner":{"account_id":15207672,"reputation":1864,"user_id":10973514,"display_name":"pref"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694641040,"creation_date":1694641040,"answer_id":77100641,"question_id":26403934,"body_markdown":"You can add path programmatically, as shown in https://stackoverflow.com/questions/26881986/jax-rs-jersey-how-to-dynamic-adding-resources-or-providers-to-application\r\n\r\nwhich means you can then wire it your configuration .","title":"JAX-RS: Is it possible to have an externally configurable @PATH?","body":"<p>You can add path programmatically, as shown in <a href=\"https://stackoverflow.com/questions/26881986/jax-rs-jersey-how-to-dynamic-adding-resources-or-providers-to-application\">JAX-RS Jersey, how to dynamic adding resources or providers to Application</a></p>\n<p>which means you can then wire it your configuration .</p>\n"}],"owner":{"account_id":81204,"reputation":634,"user_id":229109,"accept_rate":78,"display_name":"praspa"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":303,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1694641040,"creation_date":1413461080,"question_id":26403934,"body_markdown":"Is it possible to load the value for the @PATH annotation from configuration (web.xml, etc) for a given class?\r\n\r\n    @Path(&lt;value loaded from config&gt;)\r\n    public class myRestService {\r\n    ...","title":"JAX-RS: Is it possible to have an externally configurable @PATH?","body":"<p>Is it possible to load the value for the @PATH annotation from configuration (web.xml, etc) for a given class?</p>\n\n<pre><code>@Path(&lt;value loaded from config&gt;)\npublic class myRestService {\n...\n</code></pre>\n"},{"tags":["java","spring-boot","amazon-sqs","spring-messaging","spring-cloud-aws"],"comments":[{"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"score":0,"creation_date":1694637699,"post_id":77100081,"comment_id":135919198,"body_markdown":"How did you do it with RabbitMQ? `@RabbitListener` would work the same way.","body":"How did you do it with RabbitMQ? <code>@RabbitListener</code> would work the same way."},{"owner":{"account_id":3041402,"reputation":1476,"user_id":2578324,"display_name":"jndietz"},"score":0,"creation_date":1694638322,"post_id":77100081,"comment_id":135919304,"body_markdown":"It looks like it&#39;s `@RabbitHandler` on the method level.  I&#39;m seeing some Spring `@Configuration` classes where we are using Spring amqp `QueueBinding` to bind the object type to the queue.","body":"It looks like it&#39;s <code>@RabbitHandler</code> on the method level.  I&#39;m seeing some Spring <code>@Configuration</code> classes where we are using Spring amqp <code>QueueBinding</code> to bind the object type to the queue."},{"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"score":0,"creation_date":1694638800,"post_id":77100081,"comment_id":135919381,"body_markdown":"Yes; that is special logic in spring-rabbit (`@RabbitListener` at the class level and `@RabbitHandler` at the method level). I am not familiar with it, but `@SqsListener` cannot be applied at the class level.","body":"Yes; that is special logic in spring-rabbit (<code>@RabbitListener</code> at the class level and <code>@RabbitHandler</code> at the method level). I am not familiar with it, but <code>@SqsListener</code> cannot be applied at the class level."},{"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"score":0,"creation_date":1694639582,"post_id":77100081,"comment_id":135919487,"body_markdown":"You could consume `Object` and then do `instanceof` checks in the listener to do the final routing (that&#39;s effectively what spring-rabbit does internally).","body":"You could consume <code>Object</code> and then do <code>instanceof</code> checks in the listener to do the final routing (that&#39;s effectively what spring-rabbit does internally)."}],"answers":[{"comments":[{"owner":{"account_id":3041402,"reputation":1476,"user_id":2578324,"display_name":"jndietz"},"score":0,"creation_date":1694662611,"post_id":77100472,"comment_id":135921577,"body_markdown":"I appreciate the response, Gary.  I tried to go the `Object` route, but either `@SqsListener` or the Spring Cloud AWS library in general, doesn&#39;t try to deserialize the JSON to an object before the annotated method is called.  I even tried to create a list of &quot;supported&quot; classes that the `@SqsListener` should support, then iterate over them with Jackson&#39;s `ObjectMapper`, but the message always deserializes into the provided type, regardless if the properties match, or not.  `ObjectMapper.readValue()` never throws an exception, even if none of the keys/properties match.","body":"I appreciate the response, Gary.  I tried to go the <code>Object</code> route, but either <code>@SqsListener</code> or the Spring Cloud AWS library in general, doesn&#39;t try to deserialize the JSON to an object before the annotated method is called.  I even tried to create a list of &quot;supported&quot; classes that the <code>@SqsListener</code> should support, then iterate over them with Jackson&#39;s <code>ObjectMapper</code>, but the message always deserializes into the provided type, regardless if the properties match, or not.  <code>ObjectMapper.readValue()</code> never throws an exception, even if none of the keys/properties match."},{"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"score":1,"creation_date":1694694494,"post_id":77100472,"comment_id":135926820,"body_markdown":"Spring for RabbitMQ supports two type of message conversion - inferred (where the type to convert to is inferred by the method signature) and native (where the type is determined from the message itself). Since we use the type to select the handler method, you cannot use inferred conversion, only native can be used (catch-22). I don&#39;t know if `SqsListener` supports native conversion. Best to find someone more familiar with that project.","body":"Spring for RabbitMQ supports two type of message conversion - inferred (where the type to convert to is inferred by the method signature) and native (where the type is determined from the message itself). Since we use the type to select the handler method, you cannot use inferred conversion, only native can be used (catch-22). I don&#39;t know if <code>SqsListener</code> supports native conversion. Best to find someone more familiar with that project."}],"tags":[],"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694639529,"creation_date":1694638863,"answer_id":77100472,"question_id":77100081,"body_markdown":"I assume you are using a class-level `@RabbitListener` with `@RabbitHandler` at the method level.\r\n\r\nI am not familiar with it but, looking at the javadocs, `@SqsListener` cannot be applied at the class level (only methods), so it doesn&#39;t support method routing by type.\r\n\r\n__EDIT__\r\n\r\nUnless, or until, the feature is added, you would have to consume `Object` and then add code to your listener to route by type.","title":"How to use @SqsListener with multiple object types?","body":"<p>I assume you are using a class-level <code>@RabbitListener</code> with <code>@RabbitHandler</code> at the method level.</p>\n<p>I am not familiar with it but, looking at the javadocs, <code>@SqsListener</code> cannot be applied at the class level (only methods), so it doesn't support method routing by type.</p>\n<p><strong>EDIT</strong></p>\n<p>Unless, or until, the feature is added, you would have to consume <code>Object</code> and then add code to your listener to route by type.</p>\n"}],"owner":{"account_id":3041402,"reputation":1476,"user_id":2578324,"display_name":"jndietz"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":115,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694639529,"creation_date":1694634248,"question_id":77100081,"body_markdown":"I am trying to migrate some application code from Spring Boot with rabbitmq to Spring Boot with SQS.  I&#39;d like my application to listen to a queue, but handle multiple object types, like this:\r\n\r\n```java\r\n\t@SqsListener(&quot;some-queue&quot;)\r\n\tpublic void handleTestModel(TestModel model) {\r\n\t\tLOGGER.info(&quot;Received a TestModel.&quot;);\r\n\t}\r\n\r\n\t@SqsListener(&quot;some-queue&quot;)\r\n\tpublic void handleAnotherTestModel(AnotherTestModel model) {\r\n\t\tLOGGER.info(&quot;Received AnotherTestModel.&quot;);\r\n\t}\r\n```\r\n\r\nThe above code will work, but the methods are picked at random regardless of the contents of the message/JSON shape.  How can I configure my application to use the correct method for the given object type?  Basically - I&#39;m looking for an equivalent of `@RabbitHandler` but is specific for SQS. ","title":"How to use @SqsListener with multiple object types?","body":"<p>I am trying to migrate some application code from Spring Boot with rabbitmq to Spring Boot with SQS.  I'd like my application to listen to a queue, but handle multiple object types, like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @SqsListener(&quot;some-queue&quot;)\n    public void handleTestModel(TestModel model) {\n        LOGGER.info(&quot;Received a TestModel.&quot;);\n    }\n\n    @SqsListener(&quot;some-queue&quot;)\n    public void handleAnotherTestModel(AnotherTestModel model) {\n        LOGGER.info(&quot;Received AnotherTestModel.&quot;);\n    }\n</code></pre>\n<p>The above code will work, but the methods are picked at random regardless of the contents of the message/JSON shape.  How can I configure my application to use the correct method for the given object type?  Basically - I'm looking for an equivalent of <code>@RabbitHandler</code> but is specific for SQS.</p>\n"},{"tags":["java","inputstream"],"comments":[{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1694629222,"post_id":77099527,"comment_id":135917743,"body_markdown":"Is it an option to read the bytes in a `byte[]` array and put it in a `ByteArrayInputStream`, which will be used for your BodyPublisher?","body":"Is it an option to read the bytes in a <code>byte[]</code> array and put it in a <code>ByteArrayInputStream</code>, which will be used for your BodyPublisher?"},{"owner":{"account_id":1700242,"reputation":656,"user_id":1560534,"accept_rate":82,"display_name":"broadbear"},"score":0,"creation_date":1694655574,"post_id":77099527,"comment_id":135921030,"body_markdown":"I was hoping to avoid the extra memory of reading the data into a byte array.","body":"I was hoping to avoid the extra memory of reading the data into a byte array."}],"answers":[{"comments":[{"owner":{"account_id":1700242,"reputation":656,"user_id":1560534,"accept_rate":82,"display_name":"broadbear"},"score":0,"creation_date":1694655692,"post_id":77099609,"comment_id":135921041,"body_markdown":"I was hoping to avoid the extra memory of reading the chunks into a byte array.","body":"I was hoping to avoid the extra memory of reading the chunks into a byte array."}],"tags":[],"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1694631128,"creation_date":1694629322,"answer_id":77099609,"question_id":77099527,"body_markdown":"You could read into a byte array and create a `ByteArrayInputStream` from that.\r\n\r\n```\r\nvar chunk = new byte[chunkSize];\r\nfor (int read; (read = is.read(chunk)) != -1;) {\r\n\tvar bais = new ByteArrayInputStream(chunk, 0, read);\r\n\t// use the ByteArrayInputStream\r\n}\r\n```","title":"Stop reading inputstream after specified number of bytes","body":"<p>You could read into a byte array and create a <code>ByteArrayInputStream</code> from that.</p>\n<pre><code>var chunk = new byte[chunkSize];\nfor (int read; (read = is.read(chunk)) != -1;) {\n    var bais = new ByteArrayInputStream(chunk, 0, read);\n    // use the ByteArrayInputStream\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1694630121,"creation_date":1694630121,"answer_id":77099691,"question_id":77099527,"body_markdown":"There is [BoundedInputStream][1] in [Apache Commons IO][2] that does exactly what you need:\r\n\r\n```java\r\nInputStream is = // my inputstream\r\nwhile (bytesRead &lt; numBytes) {\r\n   BoundedInputStream subsetIs = new BoundedInputStream(is, chunkSize);\r\n   ...\r\n   .POST(HttpRequest.BodyPublishers.ofInputStream(() -&gt; subsetIs));\r\n   ...\r\n   bytesRead += chunkSize;\r\n}\r\n```\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/input/BoundedInputStream.html\r\n  [2]: https://commons.apache.org/proper/commons-io/","title":"Stop reading inputstream after specified number of bytes","body":"<p>There is <a href=\"https://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/input/BoundedInputStream.html\" rel=\"nofollow noreferrer\">BoundedInputStream</a> in <a href=\"https://commons.apache.org/proper/commons-io/\" rel=\"nofollow noreferrer\">Apache Commons IO</a> that does exactly what you need:</p>\n<pre class=\"lang-java prettyprint-override\"><code>InputStream is = // my inputstream\nwhile (bytesRead &lt; numBytes) {\n   BoundedInputStream subsetIs = new BoundedInputStream(is, chunkSize);\n   ...\n   .POST(HttpRequest.BodyPublishers.ofInputStream(() -&gt; subsetIs));\n   ...\n   bytesRead += chunkSize;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1700242,"reputation":656,"user_id":1560534,"accept_rate":82,"display_name":"broadbear"},"score":0,"creation_date":1694655980,"post_id":77099701,"comment_id":135921060,"body_markdown":"This looks pretty good. Why did you extend FilterInputStream?","body":"This looks pretty good. Why did you extend FilterInputStream?"},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1694694227,"post_id":77099701,"comment_id":135926751,"body_markdown":"FilterInputStream conceptually is &#39;a stream that does not itself represent a resource, instead, it wraps around one and modifies how it works&#39;. And that&#39;s exactly what this is, so, appropriate. Implementation-wise it buys us virtually nothing, though. Actually, that `close()` method I wrote? I think you can just delete ethat, that&#39;s what FilterInputStream already does by default.","body":"FilterInputStream conceptually is &#39;a stream that does not itself represent a resource, instead, it wraps around one and modifies how it works&#39;. And that&#39;s exactly what this is, so, appropriate. Implementation-wise it buys us virtually nothing, though. Actually, that <code>close()</code> method I wrote? I think you can just delete ethat, that&#39;s what FilterInputStream already does by default."}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1694630269,"creation_date":1694630269,"answer_id":77099701,"question_id":77099527,"body_markdown":"Seems trivial to make it yourself:\r\n\r\n```\r\nimport java.io.*;\r\n\r\npublic class LimitedInputStream extends FilterInputStream {\r\n  private int limit;\r\n\r\n  public LimitedInputStream(InputStream in, int limit) {\r\n    super(in);\r\n    if (in == null) throw new NullPointerException(&quot;in&quot;);\r\n    if (limit &lt; 1) throw new IllegalArgumentException(&quot;limit must be positive&quot;);\r\n    this.limit = limit;\r\n  }\r\n\r\n  @Override public int read() throws IOException {\r\n    if (limit &lt; 1) return -1;\r\n    limit--;\r\n    return in.read();\r\n  }\r\n\r\n  @Override public int read(byte[] b, int off, int len) throws IOException {\r\n    if (limit &lt; 1) return -1;\r\n    int lim = Math.min(len, limit);\r\n    int r = in.read(b, off, lim);\r\n    if (r &gt; 0) limit -= r;\r\n    return r;\r\n  }\r\n\r\n  @Override public void close() throws IOException {\r\n    in.close();\r\n  }\r\n\r\n  @Override public long skip(long n) throws IOException {\r\n    long lim = Math.min(n, limit);\r\n    long r = in.skip(lim);\r\n    if (r &gt; 0) limit -= r;\r\n    return r;\r\n  }\r\n\r\n  @Override public int available() throws IOException {\r\n    return Math.min(in.available(), limit);\r\n  }\r\n\r\n  public static void main(String[] args) throws Exception {\r\n    var raw = new ByteArrayInputStream(new byte[256]);\r\n    var lim = new LimitedInputStream(raw, 100);\r\n    byte[] b = new byte[55];\r\n    System.out.println(lim.read(b)); // prints 55\r\n    lim.read();\r\n    lim.read();\r\n    System.out.println(lim.read(b)); // prints 43\r\n    System.out.println(lim.read(b)); // prints -1\r\n  }\r\n}\r\n```\r\n","title":"Stop reading inputstream after specified number of bytes","body":"<p>Seems trivial to make it yourself:</p>\n<pre><code>import java.io.*;\n\npublic class LimitedInputStream extends FilterInputStream {\n  private int limit;\n\n  public LimitedInputStream(InputStream in, int limit) {\n    super(in);\n    if (in == null) throw new NullPointerException(&quot;in&quot;);\n    if (limit &lt; 1) throw new IllegalArgumentException(&quot;limit must be positive&quot;);\n    this.limit = limit;\n  }\n\n  @Override public int read() throws IOException {\n    if (limit &lt; 1) return -1;\n    limit--;\n    return in.read();\n  }\n\n  @Override public int read(byte[] b, int off, int len) throws IOException {\n    if (limit &lt; 1) return -1;\n    int lim = Math.min(len, limit);\n    int r = in.read(b, off, lim);\n    if (r &gt; 0) limit -= r;\n    return r;\n  }\n\n  @Override public void close() throws IOException {\n    in.close();\n  }\n\n  @Override public long skip(long n) throws IOException {\n    long lim = Math.min(n, limit);\n    long r = in.skip(lim);\n    if (r &gt; 0) limit -= r;\n    return r;\n  }\n\n  @Override public int available() throws IOException {\n    return Math.min(in.available(), limit);\n  }\n\n  public static void main(String[] args) throws Exception {\n    var raw = new ByteArrayInputStream(new byte[256]);\n    var lim = new LimitedInputStream(raw, 100);\n    byte[] b = new byte[55];\n    System.out.println(lim.read(b)); // prints 55\n    lim.read();\n    lim.read();\n    System.out.println(lim.read(b)); // prints 43\n    System.out.println(lim.read(b)); // prints -1\n  }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1700242,"reputation":656,"user_id":1560534,"accept_rate":82,"display_name":"broadbear"},"score":0,"creation_date":1694656744,"post_id":77100395,"comment_id":135921121,"body_markdown":"I was hoping to avoid using extra memory required to read the bytes into byte arrays. What you describe about encapsulating InputStream seems like the direction I&#39;ll take; it is the solution @rzwitserloot proposes.","body":"I was hoping to avoid using extra memory required to read the bytes into byte arrays. What you describe about encapsulating InputStream seems like the direction I&#39;ll take; it is the solution @rzwitserloot proposes."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1694658700,"post_id":77100395,"comment_id":135921276,"body_markdown":"@broadbear, you&#39;ll still need a new object each time.  There is an _[ofByteArray](https://docs.oracle.com/en/java/javase/20/docs/api/java.net.http/java/net/http/HttpRequest.BodyPublishers.html#ofByteArray(byte%5B%5D,int,int))_ method.  I suggest switching to that unless the _InputStream_ is required.","body":"@broadbear, you&#39;ll still need a new object each time.  There is an <i><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.net.http/java/net/http/HttpRequest.BodyPublishers.html#ofByteArray(byte%5B%5D,int,int)\" rel=\"nofollow noreferrer\">ofByteArray</a></i> method.  I suggest switching to that unless the <i>InputStream</i> is required."}],"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694637892,"creation_date":1694637892,"answer_id":77100395,"question_id":77099527,"body_markdown":"&gt; _&quot;... Is there a way to divide an input stream into chunks? ...&quot;_\r\n\r\nYes, although it&#39;s not part of the syntax.  \r\nYou&#39;ll have to create a new _[ByteArrayInputStream](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/io/ByteArrayInputStream.html)_ object for every segment.\r\n\r\nThe _Java_ framework typically functions around _mutable_ and _immutable_ states, so dividing an object is not a common feature.  \r\nAlthough, some classes do provide this functionality&amp;mdash;e.g., the _[ByteBuffer](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/nio/ByteBuffer.html)_ class.\r\n\r\nNevertheless, you can utilize the pseudo-code you provided.\r\n\r\nI believe the simplest approach here is to use the _[InputStream#read](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/io/InputStream.html#read(byte[],int,int))_ method.\r\n\r\nThe _bytesRead_ here is not accumulative, and is per iteration.\r\n\r\n```java\r\ntry (InputStream is = // my inputstream) {\r\n    int bytesRead, chunkSize = 100;\r\n    byte[] b = new byte[chunkSize];\r\n    InputStream subsetIs;\r\n    while ((bytesRead = is.read(b)) != -1) {\r\n        subsetIs = new ByteArrayInputStream(b, 0, bytesRead);\r\n        .POST(HttpRequest.BodyPublishers.ofInputStream(() -&gt; subsetIs));\r\n    }\r\n}\r\n```\r\n\r\n&gt; _&quot;... I guess another way to ask this is, is there an input stream that can wrap another input stream and return end of stream after a specified number of bytes? ...&quot;_\r\n\r\nYou could encapsulate an _[InputStream](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/io/InputStream.html)_, and _override_ a _read_ method, delegating the data from there.  \r\nI recommend this if you plan on scaling the code.\r\n\r\nOtherwise, the _read_ method will return _&amp;minus;1_ once the end of the stream is reached.  \r\nHere is the _JavaDoc_ excerpt.\r\n\r\n&gt; _**Returns**:_  \r\n&gt; _the total number of bytes read into the buffer, or -1 if there is no more data because the end of the stream has been reached._","title":"Stop reading inputstream after specified number of bytes","body":"<blockquote>\n<p><em>&quot;... Is there a way to divide an input stream into chunks? ...&quot;</em></p>\n</blockquote>\n<p>Yes, although it's not part of the syntax.<br />\nYou'll have to create a new <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/io/ByteArrayInputStream.html\" rel=\"nofollow noreferrer\">ByteArrayInputStream</a></em> object for every segment.</p>\n<p>The <em>Java</em> framework typically functions around <em>mutable</em> and <em>immutable</em> states, so dividing an object is not a common feature.<br />\nAlthough, some classes do provide this functionality—e.g., the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/nio/ByteBuffer.html\" rel=\"nofollow noreferrer\">ByteBuffer</a></em> class.</p>\n<p>Nevertheless, you can utilize the pseudo-code you provided.</p>\n<p>I believe the simplest approach here is to use the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/io/InputStream.html#read(byte%5B%5D,int,int)\" rel=\"nofollow noreferrer\">InputStream#read</a></em> method.</p>\n<p>The <em>bytesRead</em> here is not accumulative, and is per iteration.</p>\n<pre class=\"lang-java prettyprint-override\"><code>try (InputStream is = // my inputstream) {\n    int bytesRead, chunkSize = 100;\n    byte[] b = new byte[chunkSize];\n    InputStream subsetIs;\n    while ((bytesRead = is.read(b)) != -1) {\n        subsetIs = new ByteArrayInputStream(b, 0, bytesRead);\n        .POST(HttpRequest.BodyPublishers.ofInputStream(() -&gt; subsetIs));\n    }\n}\n</code></pre>\n<blockquote>\n<p><em>&quot;... I guess another way to ask this is, is there an input stream that can wrap another input stream and return end of stream after a specified number of bytes? ...&quot;</em></p>\n</blockquote>\n<p>You could encapsulate an <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/io/InputStream.html\" rel=\"nofollow noreferrer\">InputStream</a></em>, and <em>override</em> a <em>read</em> method, delegating the data from there.<br />\nI recommend this if you plan on scaling the code.</p>\n<p>Otherwise, the <em>read</em> method will return <em>−1</em> once the end of the stream is reached.<br />\nHere is the <em>JavaDoc</em> excerpt.</p>\n<blockquote>\n<p><em><strong>Returns</strong>:</em><br />\n<em>the total number of bytes read into the buffer, or -1 if there is no more data because the end of the stream has been reached.</em></p>\n</blockquote>\n"}],"owner":{"account_id":1700242,"reputation":656,"user_id":1560534,"accept_rate":82,"display_name":"broadbear"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77099701,"answer_count":4,"score":0,"last_activity_date":1694637892,"creation_date":1694628590,"question_id":77099527,"body_markdown":"Is there a way to divide an input stream into chunks? For instance, I am sending an input stream to a BodyPublisher, and I would like that BodyPublisher to read a subset of the input stream and stop, then, the next iteration would read the next set of bytes in the input stream.\r\n\r\nI guess another way to ask this is, is there an input stream that can wrap another input stream and return end of stream after a specified number of bytes?\r\n\r\nIt might look something like:\r\n\r\n```\r\nInputStream is = // my inputstream\r\nwhile (bytesRead &lt; numBytes) {\r\n   SubsetInputStream subsetIs = new SubsetInputStream(is, chunkSize);\r\n   ...\r\n   .POST(HttpRequest.BodyPublishers.ofInputStream(() -&gt; subsetIs));\r\n   ...\r\n   bytesRead += chunkSize;\r\n}\r\n```","title":"Stop reading inputstream after specified number of bytes","body":"<p>Is there a way to divide an input stream into chunks? For instance, I am sending an input stream to a BodyPublisher, and I would like that BodyPublisher to read a subset of the input stream and stop, then, the next iteration would read the next set of bytes in the input stream.</p>\n<p>I guess another way to ask this is, is there an input stream that can wrap another input stream and return end of stream after a specified number of bytes?</p>\n<p>It might look something like:</p>\n<pre><code>InputStream is = // my inputstream\nwhile (bytesRead &lt; numBytes) {\n   SubsetInputStream subsetIs = new SubsetInputStream(is, chunkSize);\n   ...\n   .POST(HttpRequest.BodyPublishers.ofInputStream(() -&gt; subsetIs));\n   ...\n   bytesRead += chunkSize;\n}\n</code></pre>\n"},{"tags":["java","spring-boot","yaml","spring-boot-test"],"comments":[{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1694631709,"post_id":77099780,"comment_id":135918151,"body_markdown":"What happens when removing the `@Configuration`?","body":"What happens when removing the <code>@Configuration</code>?"},{"owner":{"account_id":317509,"reputation":877,"user_id":634236,"accept_rate":77,"display_name":"Justin"},"score":0,"creation_date":1694632096,"post_id":77099780,"comment_id":135918222,"body_markdown":"@dan1st same failing assertion. I had `@Component` for a while as well as my hope is to inject it into other classes, but that didn&#39;t work either","body":"@dan1st same failing assertion. I had <code>@Component</code> for a while as well as my hope is to inject it into other classes, but that didn&#39;t work either"}],"answers":[{"comments":[{"owner":{"account_id":15519832,"reputation":1026,"user_id":11478354,"display_name":"dcolazin"},"score":0,"creation_date":1694637695,"post_id":77100346,"comment_id":135919196,"body_markdown":"If you still have a mixture of junit 4 and 5 tests, it is time to update all the tests and exclude the old dependency. Quite the hassle to maintain both junit 5 and vintage tests.","body":"If you still have a mixture of junit 4 and 5 tests, it is time to update all the tests and exclude the old dependency. Quite the hassle to maintain both junit 5 and vintage tests."},{"owner":{"account_id":317509,"reputation":877,"user_id":634236,"accept_rate":77,"display_name":"Justin"},"score":1,"creation_date":1694688066,"post_id":77100346,"comment_id":135925458,"body_markdown":"@dcolzin couldn&#39;t agree more. I am excluding junit 4 in my pom.xml going forward. Something I didn&#39;t realize with Springboot, it just brings in both via transitive dependencies and you don&#39;t notice until your IDE suggests one over the other!","body":"@dcolzin couldn&#39;t agree more. I am excluding junit 4 in my pom.xml going forward. Something I didn&#39;t realize with Springboot, it just brings in both via transitive dependencies and you don&#39;t notice until your IDE suggests one over the other!"},{"owner":{"account_id":317509,"reputation":877,"user_id":634236,"accept_rate":77,"display_name":"Justin"},"score":0,"creation_date":1694808361,"post_id":77100346,"comment_id":135944893,"body_markdown":"Had a really old version of Cucumber that was bringing in junit 4 despite springboot-starter-test having junit 5 only","body":"Had a really old version of Cucumber that was bringing in junit 4 despite springboot-starter-test having junit 5 only"}],"tags":[],"owner":{"account_id":317509,"reputation":877,"user_id":634236,"accept_rate":77,"display_name":"Justin"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694637420,"creation_date":1694637420,"answer_id":77100346,"question_id":77099780,"body_markdown":"The problem was with my @Test annotation...\r\n\r\nI commented out almost the entire project and any dependencies. Finally took a look at my imports after it was still failing with nothing else remaining. I&#39;m using Junit 5 as is obvious from the @ExtendWith annotation but what IntelliJ did was auto import\r\n\r\n`import org.junit.Test` which is junit 4 \r\n\r\nand what I needed was `import org.junit.jupiter.api.Test` instead which is unit 5.\r\n\r\nUnbelievable... ","title":"SpringBoot 2 YAML Properties Test Not Working","body":"<p>The problem was with my @Test annotation...</p>\n<p>I commented out almost the entire project and any dependencies. Finally took a look at my imports after it was still failing with nothing else remaining. I'm using Junit 5 as is obvious from the @ExtendWith annotation but what IntelliJ did was auto import</p>\n<p><code>import org.junit.Test</code> which is junit 4</p>\n<p>and what I needed was <code>import org.junit.jupiter.api.Test</code> instead which is unit 5.</p>\n<p>Unbelievable...</p>\n"}],"owner":{"account_id":317509,"reputation":877,"user_id":634236,"accept_rate":77,"display_name":"Justin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77100346,"answer_count":1,"score":0,"last_activity_date":1694637420,"creation_date":1694631114,"question_id":77099780,"body_markdown":"Trying to test yaml properties mapping to a pojo in Springboot 2.7.11 but the pojo keeps coming up as null.\r\n\r\nsrc/test/resources/application-test.yml\r\n\r\n    configItems:\r\n      items:\r\n        - field1: name\r\n          field2: address\r\n        - field1: name\r\n          field2: address\r\n\r\nConfigItems.java\r\n\r\n    @Configuration\r\n    @ConfigurationProperties(prefix = &quot;configItems&quot;)\r\n    @Getter\r\n    @Setter\r\n    public class ConfigItems {\r\n\r\n      private List&lt;Item&gt; items;\r\n      \r\n      @Getter\r\n      @Setter\r\n      @NoArgsConstructor\r\n      @AllArgsConstructor\r\n      public static class Item {\r\n        private String field1;\r\n        private String field2;\r\n      }\r\n    }\r\n\r\nMapFromYamTest.java\r\n\r\n    @ExtendWith(SpringExtension.class)\r\n    @SpringBootTest\r\n    @EnableConfigurationProperties(value = ConfigItems.class)\r\n    @ActiveProfiles(&quot;test&quot;)\r\n    public class MapFromYamlTest {\r\n      \r\n      @Autowired\r\n      private ConfigItems configItems;\r\n\r\n      @Test\r\n      public void everythingMappedCorrectly() {\r\n        assertNotNull(configItems, &quot;Config is null&quot;);\r\n      }\r\n    }\r\n\r\nI&#39;ve tried a number of annotation variations on the test hence why it is now using both the ExtendWith and SpringBootTest annotations. I&#39;ve tried one or the other. I&#39;ve tried variations of ContextConfiguration in addition to the other annotations. I just don&#39;t get why the assertion keeps failing...","title":"SpringBoot 2 YAML Properties Test Not Working","body":"<p>Trying to test yaml properties mapping to a pojo in Springboot 2.7.11 but the pojo keeps coming up as null.</p>\n<p>src/test/resources/application-test.yml</p>\n<pre><code>configItems:\n  items:\n    - field1: name\n      field2: address\n    - field1: name\n      field2: address\n</code></pre>\n<p>ConfigItems.java</p>\n<pre><code>@Configuration\n@ConfigurationProperties(prefix = &quot;configItems&quot;)\n@Getter\n@Setter\npublic class ConfigItems {\n\n  private List&lt;Item&gt; items;\n  \n  @Getter\n  @Setter\n  @NoArgsConstructor\n  @AllArgsConstructor\n  public static class Item {\n    private String field1;\n    private String field2;\n  }\n}\n</code></pre>\n<p>MapFromYamTest.java</p>\n<pre><code>@ExtendWith(SpringExtension.class)\n@SpringBootTest\n@EnableConfigurationProperties(value = ConfigItems.class)\n@ActiveProfiles(&quot;test&quot;)\npublic class MapFromYamlTest {\n  \n  @Autowired\n  private ConfigItems configItems;\n\n  @Test\n  public void everythingMappedCorrectly() {\n    assertNotNull(configItems, &quot;Config is null&quot;);\n  }\n}\n</code></pre>\n<p>I've tried a number of annotation variations on the test hence why it is now using both the ExtendWith and SpringBootTest annotations. I've tried one or the other. I've tried variations of ContextConfiguration in addition to the other annotations. I just don't get why the assertion keeps failing...</p>\n"},{"tags":["java","javafx","network-programming","udp","client-server"],"answers":[{"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1694637089,"creation_date":1694635130,"answer_id":77100153,"question_id":77097427,"body_markdown":"Fields annotated `@FXML` are initialized *in the controller* when the `FXMLLoader` loads an FXML file. The controller is a specific object that is created by the `FXMLLoader`. It only makes sense to try to access those fields from within that specific object. Since `FXML`-annotated fields are only initialized in the specific instances of the controller class created by the `FXMLLoader`, it really doesn&#39;t make sense to annotate `static` fields with `@FXML`, and such fields will never be initialized. See also [this QA](https://stackoverflow.com/questions/23105433/javafx-8-compatibility-issues-fxml-static-fields-or-methods).\r\n\r\nIn your case, your server and client are not even represented by objects (since they just use static methods, which by definition are not part of any object). You first need to write this in an object-oriented fashion with the server and client represented by actual objects. Then you need to design the UI part of the application so the UI can be updated by changes in values from the client; a MVC-like approach is usually the best way to do this.\r\n\r\nHere is a quick example. I used Jackson for the JSON [de]serializing and plain sockets and server sockets as I know those technologies better. The same structure can be used with different underlying technologies.\r\n\r\nFirst, here is the `Quote` class, implemented simply as a `record`:\r\n\r\n`Quote.java`:\r\n\r\n```\r\npackage org.jamesd.examples.quoteserver;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonCreator;\r\nimport com.fasterxml.jackson.annotation.JsonProperty;\r\n\r\npublic record Quote(String text, String author) {\r\n\r\n    @JsonCreator\r\n    public Quote(@JsonProperty(&quot;text&quot;) String text, @JsonProperty(&quot;author&quot;) String author) {\r\n        this.text = text;\r\n        this.author = author;\r\n    }\r\n\r\n}\r\n```\r\n\r\nHere is a `QuoteServer`. This has a `serveQuotes()` method which blocks indefinitely (at least, until the server is closed) and hands off handling requests to an executor. The requests simply send an `int` representing which quote they want (in a real application you would handle invalid quote ids, etc):\r\n\r\n`QuoteServer.java`\r\n\r\n```\r\npackage org.jamesd.examples.quoteserver;\r\n\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\n\r\nimport java.io.DataInputStream;\r\nimport java.io.IOException;\r\nimport java.net.ServerSocket;\r\nimport java.net.Socket;\r\nimport java.net.SocketException;\r\nimport java.util.List;\r\nimport java.util.concurrent.ExecutorService;\r\nimport java.util.concurrent.Executors;\r\n\r\npublic class QuoteServer implements AutoCloseable{\r\n\r\n    public static final int PORT = 5555;\r\n\r\n    private final ServerSocket serverSocket;\r\n\r\n    private final ObjectMapper objectMapper = new ObjectMapper();\r\n\r\n    private final ExecutorService exec = Executors.newCachedThreadPool();\r\n\r\n    private final List&lt;Quote&gt; quotes = List.of(\r\n            new Quote(\r\n                &quot;&quot;&quot;\r\n                    There are only two ways to live your life.\r\n                    One is as though nothing is a miracle.\r\n                    The other is as though everything is a miracle.\r\n                    &quot;&quot;&quot;,\r\n                    &quot;Albert Einstein&quot;),\r\n            new Quote(\r\n                &quot;&quot;&quot;\r\n                    Good judgment comes from experience, and experience comes from bad judgment.\r\n                    &quot;&quot;&quot;,\r\n                    &quot;Rita Mae Brown&quot;\r\n            ),\r\n            new Quote(\r\n                &quot;&quot;&quot;\r\n                    Imagination was given to man to compensate him for what he is not,\r\n                    and a sense of humor was provided to console him for what he is.\r\n                    &quot;&quot;&quot;,\r\n            &quot;Oscar Wilde&quot;\r\n            )\r\n    );\r\n\r\n    public QuoteServer() throws IOException {\r\n        serverSocket = new ServerSocket(PORT);\r\n    }\r\n\r\n    public void serveQuotes() {\r\n        try {\r\n            while (!serverSocket.isClosed()) {\r\n                Socket socket = serverSocket.accept();\r\n                exec.execute(() -&gt; handleRequest(socket));\r\n            }\r\n        } catch (SocketException sockExc) {\r\n            if (serverSocket.isClosed()) {\r\n                System.out.println(&quot;Socket closed&quot;);\r\n            } else {\r\n                sockExc.printStackTrace();\r\n            }\r\n        } catch (IOException exc) {\r\n            exc.printStackTrace();\r\n        }\r\n    }\r\n\r\n    private void handleRequest(Socket socket) {\r\n        try {\r\n            DataInputStream input = new DataInputStream(socket.getInputStream());\r\n            int index = input.readInt();\r\n            Quote quote = quotes.get(index);\r\n            objectMapper.writeValue(socket.getOutputStream(), quote);\r\n            socket.close();\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void close() throws Exception {\r\n        exec.shutdown();\r\n        serverSocket.close();\r\n    }\r\n}\r\n```\r\n\r\nHere is a `QuoteClient` class. This just has a one-shot method, taking an `int` and returning a `Quote` that is sent from the server. Again, in real life you might add more functionality.\r\n\r\n`QuoteClient.java`\r\n\r\n```\r\npackage org.jamesd.examples.quoteserver;\r\n\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\n\r\nimport java.io.DataOutputStream;\r\nimport java.io.IOException;\r\nimport java.net.Socket;\r\n\r\npublic class QuoteClient {\r\n\r\n    private final ObjectMapper objectMapper = new ObjectMapper();\r\n\r\n    public Quote getQuote(int index) {\r\n        try {\r\n            Socket socket = new Socket(&quot;localhost&quot;, QuoteServer.PORT);\r\n            DataOutputStream output = new DataOutputStream(socket.getOutputStream());\r\n            output.writeInt(index);\r\n            Quote quote = objectMapper.readValue(socket.getInputStream(), Quote.class);\r\n            socket.close();\r\n            return quote;\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\nFor the UI part, use some kind of Model-View-Controller (MVC) or similar approach. The most important aspect of this is to separate out the data that is displayed in the application into a model class, and let the view update by observing the model. (The different flavors of MVC differ by how this is divided up between the view and controller.)\r\n\r\nIn this case, the model gets its data from the server, so it needs a client. To update on a regular basis (every five seconds, for example), you can use a `ScheduledService` that creates `Task`s that request data via the client. The service&#39;s `lastValueProperty()` holds the last value returned from a task, i.e. the last value retrieved from the server. So the model can simply look like:\r\n\r\n`Model.java`\r\n\r\n```\r\npackage org.jamesd.examples.quoteserver;\r\n\r\nimport javafx.beans.property.ReadOnlyObjectProperty;\r\nimport javafx.concurrent.ScheduledService;\r\nimport javafx.concurrent.Task;\r\nimport javafx.util.Duration;\r\n\r\nimport java.util.Random;\r\n\r\npublic class Model {\r\n\r\n    private final QuoteClient quoteClient = new QuoteClient();\r\n    private final ScheduledService&lt;Quote&gt; service;\r\n\r\n    public Model() {\r\n        service = new ScheduledService&lt;&gt;() {\r\n            private final Random rng = new Random();\r\n            @Override\r\n            protected Task&lt;Quote&gt; createTask() {\r\n                final int quoteIndex = rng.nextInt(3);\r\n                return new Task&lt;&gt;() {\r\n                    @Override\r\n                    protected Quote call() {\r\n                        return quoteClient.getQuote(quoteIndex);\r\n                    }\r\n                };\r\n            }\r\n        };\r\n        service.setPeriod(Duration.seconds(5));\r\n        service.start();\r\n\r\n    }\r\n\r\n    public ReadOnlyObjectProperty&lt;Quote&gt; currentQuoteProperty() {\r\n        return service.lastValueProperty();\r\n    }\r\n\r\n}\r\n```\r\n\r\nHere is a simple FXML file. It just has some labels (including one for the quote&#39;s text and one for its author):\r\n\r\n`Quotes.fxml`\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;?import javafx.geometry.Insets?&gt;\r\n&lt;?import javafx.scene.control.Label?&gt;\r\n&lt;?import javafx.scene.layout.VBox?&gt;\r\n\r\n&lt;?import javafx.scene.control.Button?&gt;\r\n&lt;?import javafx.scene.layout.HBox?&gt;\r\n&lt;VBox alignment=&quot;CENTER&quot; spacing=&quot;20.0&quot; xmlns:fx=&quot;http://javafx.com/fxml&quot;\r\n      fx:controller=&quot;org.jamesd.examples.quoteserver.QuoteController&quot;&gt;\r\n    &lt;padding&gt;\r\n        &lt;Insets bottom=&quot;20.0&quot; left=&quot;20.0&quot; right=&quot;20.0&quot; top=&quot;20.0&quot;/&gt;\r\n    &lt;/padding&gt;\r\n    &lt;Label fx:id=&quot;quoteLabel&quot;/&gt;\r\n    &lt;HBox spacing=&quot;5&quot;&gt;&lt;Label text=&quot; - &quot;/&gt;&lt;Label fx:id=&quot;authorLabel&quot; /&gt;&lt;/HBox&gt;\r\n&lt;/VBox&gt;\r\n```\r\n\r\nHere is the corresponding controller. It needs access to the model, so it has a `setModel(Model model)` method. When it receives a new model, it just binds the label&#39;s text to values in the model:\r\n\r\n`QuoteController.java`\r\n\r\n```\r\npackage org.jamesd.examples.quoteserver;\r\n\r\nimport javafx.fxml.FXML;\r\nimport javafx.scene.control.Label;\r\n\r\npublic class QuoteController {\r\n\r\n   @FXML\r\n   private Label quoteLabel ;\r\n   @FXML\r\n   private Label authorLabel;\r\n   public void setModel(Model model) {\r\n       quoteLabel.textProperty().bind(model.currentQuoteProperty().map(Quote::text));\r\n       authorLabel.textProperty().bind(model.currentQuoteProperty().map(Quote::author));\r\n   }\r\n}\r\n```\r\n\r\nAnd finally the application class. This starts a server in the `init()` method (which you probably wouldn&#39;t do in real life; the server would not be in the same JVM) and runs it in a background thread. It also creates a `Model`. The model is passed to the controller after loading the FXML.\r\n\r\n`QuoteApplication.java`\r\n\r\n```\r\npackage org.jamesd.examples.quoteserver;\r\n\r\nimport javafx.application.Application;\r\nimport javafx.fxml.FXMLLoader;\r\nimport javafx.scene.Scene;\r\nimport javafx.stage.Stage;\r\n\r\nimport java.io.IOException;\r\n\r\npublic class QuoteApplication extends Application {\r\n\r\n    private Model model;\r\n    private QuoteServer server ;\r\n\r\n    @Override\r\n    public void init() throws IOException {\r\n        server = new QuoteServer();\r\n        Thread serverThread = new Thread(server::serveQuotes);\r\n        serverThread.setDaemon(true);\r\n        serverThread.start();\r\n        model = new Model();\r\n    }\r\n\r\n    @Override\r\n    public void start(Stage stage) throws IOException {\r\n        FXMLLoader fxmlLoader = new FXMLLoader(QuoteApplication.class.getResource(&quot;Quotes.fxml&quot;));\r\n        Scene scene = new Scene(fxmlLoader.load(), 800, 500);\r\n        QuoteController controller = fxmlLoader.getController();\r\n        controller.setModel(model);\r\n        stage.setScene(scene);\r\n        stage.show();\r\n    }\r\n\r\n    @Override\r\n    public void stop() throws Exception {\r\n        server.close();\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        launch();\r\n    }\r\n}\r\n```\r\n\r\nFinally, for completeness, my `module-info.java`:\r\n\r\n```\r\nmodule org.jamesd.examples.quoteserver {\r\n    requires javafx.controls;\r\n    requires javafx.fxml;\r\n    requires com.fasterxml.jackson.databind;\r\n\r\n    opens org.jamesd.examples.quoteserver to javafx.fxml;\r\n    exports org.jamesd.examples.quoteserver;\r\n}\r\n```\r\n\r\nand `pom.xml`:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;org.jamesd.examples&lt;/groupId&gt;\r\n    &lt;artifactId&gt;quoteserver&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;name&gt;quoteserver&lt;/name&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;junit.version&gt;5.8.2&lt;/junit.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\r\n            &lt;version&gt;20.0.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\r\n            &lt;version&gt;20.0.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n            &lt;version&gt;2.15.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\r\n            &lt;version&gt;${junit.version}&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\r\n            &lt;version&gt;${junit.version}&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.10.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;20&lt;/source&gt;\r\n                    &lt;target&gt;20&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;0.0.8&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;!-- Default configuration for running with: mvn clean javafx:run --&gt;\r\n                        &lt;id&gt;default-cli&lt;/id&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;mainClass&gt;\r\n                                org.jamesd.examples.quoteserver/org.jamesd.examples.quoteserver.QuoteApplication\r\n                            &lt;/mainClass&gt;\r\n                            &lt;launcher&gt;app&lt;/launcher&gt;\r\n                            &lt;jlinkZipName&gt;app&lt;/jlinkZipName&gt;\r\n                            &lt;jlinkImageName&gt;app&lt;/jlinkImageName&gt;\r\n                            &lt;noManPages&gt;true&lt;/noManPages&gt;\r\n                            &lt;stripDebug&gt;true&lt;/stripDebug&gt;\r\n                            &lt;noHeaderFiles&gt;true&lt;/noHeaderFiles&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n&lt;/project&gt;\r\n```","title":"Changing JavaFX-Label Text in an small Client - Server Application","body":"<p>Fields annotated <code>@FXML</code> are initialized <em>in the controller</em> when the <code>FXMLLoader</code> loads an FXML file. The controller is a specific object that is created by the <code>FXMLLoader</code>. It only makes sense to try to access those fields from within that specific object. Since <code>FXML</code>-annotated fields are only initialized in the specific instances of the controller class created by the <code>FXMLLoader</code>, it really doesn't make sense to annotate <code>static</code> fields with <code>@FXML</code>, and such fields will never be initialized. See also <a href=\"https://stackoverflow.com/questions/23105433/javafx-8-compatibility-issues-fxml-static-fields-or-methods\">this QA</a>.</p>\n<p>In your case, your server and client are not even represented by objects (since they just use static methods, which by definition are not part of any object). You first need to write this in an object-oriented fashion with the server and client represented by actual objects. Then you need to design the UI part of the application so the UI can be updated by changes in values from the client; a MVC-like approach is usually the best way to do this.</p>\n<p>Here is a quick example. I used Jackson for the JSON [de]serializing and plain sockets and server sockets as I know those technologies better. The same structure can be used with different underlying technologies.</p>\n<p>First, here is the <code>Quote</code> class, implemented simply as a <code>record</code>:</p>\n<p><code>Quote.java</code>:</p>\n<pre><code>package org.jamesd.examples.quoteserver;\n\nimport com.fasterxml.jackson.annotation.JsonCreator;\nimport com.fasterxml.jackson.annotation.JsonProperty;\n\npublic record Quote(String text, String author) {\n\n    @JsonCreator\n    public Quote(@JsonProperty(&quot;text&quot;) String text, @JsonProperty(&quot;author&quot;) String author) {\n        this.text = text;\n        this.author = author;\n    }\n\n}\n</code></pre>\n<p>Here is a <code>QuoteServer</code>. This has a <code>serveQuotes()</code> method which blocks indefinitely (at least, until the server is closed) and hands off handling requests to an executor. The requests simply send an <code>int</code> representing which quote they want (in a real application you would handle invalid quote ids, etc):</p>\n<p><code>QuoteServer.java</code></p>\n<pre><code>package org.jamesd.examples.quoteserver;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\n\nimport java.io.DataInputStream;\nimport java.io.IOException;\nimport java.net.ServerSocket;\nimport java.net.Socket;\nimport java.net.SocketException;\nimport java.util.List;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\n\npublic class QuoteServer implements AutoCloseable{\n\n    public static final int PORT = 5555;\n\n    private final ServerSocket serverSocket;\n\n    private final ObjectMapper objectMapper = new ObjectMapper();\n\n    private final ExecutorService exec = Executors.newCachedThreadPool();\n\n    private final List&lt;Quote&gt; quotes = List.of(\n            new Quote(\n                &quot;&quot;&quot;\n                    There are only two ways to live your life.\n                    One is as though nothing is a miracle.\n                    The other is as though everything is a miracle.\n                    &quot;&quot;&quot;,\n                    &quot;Albert Einstein&quot;),\n            new Quote(\n                &quot;&quot;&quot;\n                    Good judgment comes from experience, and experience comes from bad judgment.\n                    &quot;&quot;&quot;,\n                    &quot;Rita Mae Brown&quot;\n            ),\n            new Quote(\n                &quot;&quot;&quot;\n                    Imagination was given to man to compensate him for what he is not,\n                    and a sense of humor was provided to console him for what he is.\n                    &quot;&quot;&quot;,\n            &quot;Oscar Wilde&quot;\n            )\n    );\n\n    public QuoteServer() throws IOException {\n        serverSocket = new ServerSocket(PORT);\n    }\n\n    public void serveQuotes() {\n        try {\n            while (!serverSocket.isClosed()) {\n                Socket socket = serverSocket.accept();\n                exec.execute(() -&gt; handleRequest(socket));\n            }\n        } catch (SocketException sockExc) {\n            if (serverSocket.isClosed()) {\n                System.out.println(&quot;Socket closed&quot;);\n            } else {\n                sockExc.printStackTrace();\n            }\n        } catch (IOException exc) {\n            exc.printStackTrace();\n        }\n    }\n\n    private void handleRequest(Socket socket) {\n        try {\n            DataInputStream input = new DataInputStream(socket.getInputStream());\n            int index = input.readInt();\n            Quote quote = quotes.get(index);\n            objectMapper.writeValue(socket.getOutputStream(), quote);\n            socket.close();\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    @Override\n    public void close() throws Exception {\n        exec.shutdown();\n        serverSocket.close();\n    }\n}\n</code></pre>\n<p>Here is a <code>QuoteClient</code> class. This just has a one-shot method, taking an <code>int</code> and returning a <code>Quote</code> that is sent from the server. Again, in real life you might add more functionality.</p>\n<p><code>QuoteClient.java</code></p>\n<pre><code>package org.jamesd.examples.quoteserver;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\n\nimport java.io.DataOutputStream;\nimport java.io.IOException;\nimport java.net.Socket;\n\npublic class QuoteClient {\n\n    private final ObjectMapper objectMapper = new ObjectMapper();\n\n    public Quote getQuote(int index) {\n        try {\n            Socket socket = new Socket(&quot;localhost&quot;, QuoteServer.PORT);\n            DataOutputStream output = new DataOutputStream(socket.getOutputStream());\n            output.writeInt(index);\n            Quote quote = objectMapper.readValue(socket.getInputStream(), Quote.class);\n            socket.close();\n            return quote;\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n}\n</code></pre>\n<p>For the UI part, use some kind of Model-View-Controller (MVC) or similar approach. The most important aspect of this is to separate out the data that is displayed in the application into a model class, and let the view update by observing the model. (The different flavors of MVC differ by how this is divided up between the view and controller.)</p>\n<p>In this case, the model gets its data from the server, so it needs a client. To update on a regular basis (every five seconds, for example), you can use a <code>ScheduledService</code> that creates <code>Task</code>s that request data via the client. The service's <code>lastValueProperty()</code> holds the last value returned from a task, i.e. the last value retrieved from the server. So the model can simply look like:</p>\n<p><code>Model.java</code></p>\n<pre><code>package org.jamesd.examples.quoteserver;\n\nimport javafx.beans.property.ReadOnlyObjectProperty;\nimport javafx.concurrent.ScheduledService;\nimport javafx.concurrent.Task;\nimport javafx.util.Duration;\n\nimport java.util.Random;\n\npublic class Model {\n\n    private final QuoteClient quoteClient = new QuoteClient();\n    private final ScheduledService&lt;Quote&gt; service;\n\n    public Model() {\n        service = new ScheduledService&lt;&gt;() {\n            private final Random rng = new Random();\n            @Override\n            protected Task&lt;Quote&gt; createTask() {\n                final int quoteIndex = rng.nextInt(3);\n                return new Task&lt;&gt;() {\n                    @Override\n                    protected Quote call() {\n                        return quoteClient.getQuote(quoteIndex);\n                    }\n                };\n            }\n        };\n        service.setPeriod(Duration.seconds(5));\n        service.start();\n\n    }\n\n    public ReadOnlyObjectProperty&lt;Quote&gt; currentQuoteProperty() {\n        return service.lastValueProperty();\n    }\n\n}\n</code></pre>\n<p>Here is a simple FXML file. It just has some labels (including one for the quote's text and one for its author):</p>\n<p><code>Quotes.fxml</code></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;?import javafx.geometry.Insets?&gt;\n&lt;?import javafx.scene.control.Label?&gt;\n&lt;?import javafx.scene.layout.VBox?&gt;\n\n&lt;?import javafx.scene.control.Button?&gt;\n&lt;?import javafx.scene.layout.HBox?&gt;\n&lt;VBox alignment=&quot;CENTER&quot; spacing=&quot;20.0&quot; xmlns:fx=&quot;http://javafx.com/fxml&quot;\n      fx:controller=&quot;org.jamesd.examples.quoteserver.QuoteController&quot;&gt;\n    &lt;padding&gt;\n        &lt;Insets bottom=&quot;20.0&quot; left=&quot;20.0&quot; right=&quot;20.0&quot; top=&quot;20.0&quot;/&gt;\n    &lt;/padding&gt;\n    &lt;Label fx:id=&quot;quoteLabel&quot;/&gt;\n    &lt;HBox spacing=&quot;5&quot;&gt;&lt;Label text=&quot; - &quot;/&gt;&lt;Label fx:id=&quot;authorLabel&quot; /&gt;&lt;/HBox&gt;\n&lt;/VBox&gt;\n</code></pre>\n<p>Here is the corresponding controller. It needs access to the model, so it has a <code>setModel(Model model)</code> method. When it receives a new model, it just binds the label's text to values in the model:</p>\n<p><code>QuoteController.java</code></p>\n<pre><code>package org.jamesd.examples.quoteserver;\n\nimport javafx.fxml.FXML;\nimport javafx.scene.control.Label;\n\npublic class QuoteController {\n\n   @FXML\n   private Label quoteLabel ;\n   @FXML\n   private Label authorLabel;\n   public void setModel(Model model) {\n       quoteLabel.textProperty().bind(model.currentQuoteProperty().map(Quote::text));\n       authorLabel.textProperty().bind(model.currentQuoteProperty().map(Quote::author));\n   }\n}\n</code></pre>\n<p>And finally the application class. This starts a server in the <code>init()</code> method (which you probably wouldn't do in real life; the server would not be in the same JVM) and runs it in a background thread. It also creates a <code>Model</code>. The model is passed to the controller after loading the FXML.</p>\n<p><code>QuoteApplication.java</code></p>\n<pre><code>package org.jamesd.examples.quoteserver;\n\nimport javafx.application.Application;\nimport javafx.fxml.FXMLLoader;\nimport javafx.scene.Scene;\nimport javafx.stage.Stage;\n\nimport java.io.IOException;\n\npublic class QuoteApplication extends Application {\n\n    private Model model;\n    private QuoteServer server ;\n\n    @Override\n    public void init() throws IOException {\n        server = new QuoteServer();\n        Thread serverThread = new Thread(server::serveQuotes);\n        serverThread.setDaemon(true);\n        serverThread.start();\n        model = new Model();\n    }\n\n    @Override\n    public void start(Stage stage) throws IOException {\n        FXMLLoader fxmlLoader = new FXMLLoader(QuoteApplication.class.getResource(&quot;Quotes.fxml&quot;));\n        Scene scene = new Scene(fxmlLoader.load(), 800, 500);\n        QuoteController controller = fxmlLoader.getController();\n        controller.setModel(model);\n        stage.setScene(scene);\n        stage.show();\n    }\n\n    @Override\n    public void stop() throws Exception {\n        server.close();\n    }\n\n    public static void main(String[] args) {\n        launch();\n    }\n}\n</code></pre>\n<p>Finally, for completeness, my <code>module-info.java</code>:</p>\n<pre><code>module org.jamesd.examples.quoteserver {\n    requires javafx.controls;\n    requires javafx.fxml;\n    requires com.fasterxml.jackson.databind;\n\n    opens org.jamesd.examples.quoteserver to javafx.fxml;\n    exports org.jamesd.examples.quoteserver;\n}\n</code></pre>\n<p>and <code>pom.xml</code>:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;org.jamesd.examples&lt;/groupId&gt;\n    &lt;artifactId&gt;quoteserver&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;quoteserver&lt;/name&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;junit.version&gt;5.8.2&lt;/junit.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\n            &lt;version&gt;20.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\n            &lt;version&gt;20.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n            &lt;version&gt;2.15.2&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n            &lt;version&gt;${junit.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n            &lt;version&gt;${junit.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.10.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;20&lt;/source&gt;\n                    &lt;target&gt;20&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n                &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;0.0.8&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;!-- Default configuration for running with: mvn clean javafx:run --&gt;\n                        &lt;id&gt;default-cli&lt;/id&gt;\n                        &lt;configuration&gt;\n                            &lt;mainClass&gt;\n                                org.jamesd.examples.quoteserver/org.jamesd.examples.quoteserver.QuoteApplication\n                            &lt;/mainClass&gt;\n                            &lt;launcher&gt;app&lt;/launcher&gt;\n                            &lt;jlinkZipName&gt;app&lt;/jlinkZipName&gt;\n                            &lt;jlinkImageName&gt;app&lt;/jlinkImageName&gt;\n                            &lt;noManPages&gt;true&lt;/noManPages&gt;\n                            &lt;stripDebug&gt;true&lt;/stripDebug&gt;\n                            &lt;noHeaderFiles&gt;true&lt;/noHeaderFiles&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n"}],"owner":{"account_id":26218746,"reputation":46,"user_id":19896523,"display_name":"Thriest"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77100153,"answer_count":1,"score":0,"last_activity_date":1694637089,"creation_date":1694610972,"question_id":77097427,"body_markdown":"Ive created a small client-server prorgramm which works as following: A Client sents all five seconds a random number to a server which sends then sends a (more or less famous) quote back to the client. The random number represents the index of the ArrayList in the ServerClass in which some quotes are located. The connection works well and the clients receives the quotes and i can easily print them out with sysout. \r\nMy Problem is now that i wanna display the received Quote as a Label in a small JavaFX / FXML File and the text should change every five seconds when a new quote comes in from the Server.\r\nThe Class QuotesClient (so the Client) is also the Controller of the corresponding FXML file but the Problem is since that the method in my Client class which is responsible for handling the incoming UDP Packets is static and of course i cant access the non-static Label in this method.\r\n\r\nIve tried to make the Label static as well but then i receive a NullPointerException:\r\n\r\n```\r\njava.lang.NullPointerException\r\n\tat Aufgabe1.QuotesClient.main(QuotesClient.java:48)\r\n\tat Aufgabe1.QuotesApp.lambda$1(QuotesApp.java:32)\r\n\tat java.base/java.lang.Thread.run(Thread.java:844)\r\n\r\n```\r\n\r\nHere is my ClientFile:\r\n```\r\npublic class QuotesClient {\r\n\tprivate static final int BUFSIZE = 508;\r\n\t\r\n\t@FXML\r\n\tprivate static Label zitatLabel; //Thats the quoteLabel i wanna change\r\n\r\n\tpublic static void main(String[] args) throws UnknownHostException {\r\n\t\tvar host = &quot;localhost&quot;;\r\n\t\tvar localPort = 40000;\r\n\t\tvar serverPort = 50000;\t\r\n\t\ttry (var socket = new DatagramSocket(localPort)) {\r\n\t\t\twhile(true) {\r\n\t\t\t\tRandom random = new Random();\r\n\t\t\t\tint randomNumber = random.nextInt(3);\r\n\t\t\t\tSystem.out.println(&quot;Die Zufallszahl ist: &quot; + randomNumber);\r\n\t\t\t\tvar data = serialize(randomNumber).getBytes();\r\n\t\t\t\t\r\n\t\t\t\t//Send packages (random number for the server)\r\n\t\t\t\tvar addr = InetAddress.getByName(host);\r\n\t\t\t\tvar packetOut = new DatagramPacket(data, data.length, addr, serverPort);\r\n\t\t\t\tsocket.send(packetOut);\r\n\t\t\t\t\r\n\t\t\t\t//Receive packeges (Quote-Objekts)\r\n\t\t\t\tvar packetIn = new DatagramPacket(new byte[BUFSIZE], BUFSIZE);\r\n\t\t\t\tsocket.receive(packetIn);\r\n\t\t\t\t\r\n\t\t\t\tvar json = new String(packetIn.getData());\r\n\t\t\t\tQuote quote = deserialize(json);\r\n\t\t\t\tSystem.out.println(&quot;Quote: &quot; + quote.getText());\r\n\t\t\t\tzitatLabel.setText(quote.getText()); //Throws the NullPointerException\r\n               \r\n\t\t\t\tThread.sleep(5000);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\tprivate static String serialize(int number) {\r\n\t\tvar jsonb = JsonbBuilder.create();\r\n\t\treturn jsonb.toJson(number);\r\n\t}\r\n\t\r\n\tprivate static Quote deserialize(String data) {\r\n\t\tvar jsonb = JsonbBuilder.create();\r\n\t\treturn jsonb.fromJson(data, Quote.class);\r\n\t}\r\n\t\r\n}\r\n```\r\nI start my whole Programm via the QuotesApp.java Class. Ive also created two seperate Threads, one for the server and one for the client:\r\n\r\n```\r\npublic class QuotesApp extends Application {\r\n\t\r\n    @Override\r\n    public void start(Stage primaryStage) throws Exception {\r\n        FXMLLoader loader = new FXMLLoader(QuotesApp.class.getResource(&quot;/Aufgabe1/GUIQuotes.fxml&quot;));\r\n        Parent root = loader.load();\r\n        Scene scene = new Scene(root);\r\n        primaryStage.setTitle(&quot;UserLogin&quot;);\r\n        primaryStage.setResizable(false);\r\n        primaryStage.setScene(scene);\r\n        primaryStage.show();\r\n        \r\n        \r\n        // Starte den Server und den Client in separaten Threads\r\n        Thread serverThread = new Thread(() -&gt; {\r\n\t\t\tQuotesServer.main(new String[0]);\r\n        });\r\n\r\n        Thread clientThread = new Thread(() -&gt; {\r\n            try {\r\n            QuotesClient.main(new String[0]);\r\n            } catch (UnknownHostException e) {\r\n                e.printStackTrace();\r\n            }\r\n        });\r\n\r\n        serverThread.start();\r\n        clientThread.start();        \r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        launch(args);\r\n        \r\n    }\r\n}\r\n```","title":"Changing JavaFX-Label Text in an small Client - Server Application","body":"<p>Ive created a small client-server prorgramm which works as following: A Client sents all five seconds a random number to a server which sends then sends a (more or less famous) quote back to the client. The random number represents the index of the ArrayList in the ServerClass in which some quotes are located. The connection works well and the clients receives the quotes and i can easily print them out with sysout.\nMy Problem is now that i wanna display the received Quote as a Label in a small JavaFX / FXML File and the text should change every five seconds when a new quote comes in from the Server.\nThe Class QuotesClient (so the Client) is also the Controller of the corresponding FXML file but the Problem is since that the method in my Client class which is responsible for handling the incoming UDP Packets is static and of course i cant access the non-static Label in this method.</p>\n<p>Ive tried to make the Label static as well but then i receive a NullPointerException:</p>\n<pre><code>java.lang.NullPointerException\n    at Aufgabe1.QuotesClient.main(QuotesClient.java:48)\n    at Aufgabe1.QuotesApp.lambda$1(QuotesApp.java:32)\n    at java.base/java.lang.Thread.run(Thread.java:844)\n\n</code></pre>\n<p>Here is my ClientFile:</p>\n<pre><code>public class QuotesClient {\n    private static final int BUFSIZE = 508;\n    \n    @FXML\n    private static Label zitatLabel; //Thats the quoteLabel i wanna change\n\n    public static void main(String[] args) throws UnknownHostException {\n        var host = &quot;localhost&quot;;\n        var localPort = 40000;\n        var serverPort = 50000; \n        try (var socket = new DatagramSocket(localPort)) {\n            while(true) {\n                Random random = new Random();\n                int randomNumber = random.nextInt(3);\n                System.out.println(&quot;Die Zufallszahl ist: &quot; + randomNumber);\n                var data = serialize(randomNumber).getBytes();\n                \n                //Send packages (random number for the server)\n                var addr = InetAddress.getByName(host);\n                var packetOut = new DatagramPacket(data, data.length, addr, serverPort);\n                socket.send(packetOut);\n                \n                //Receive packeges (Quote-Objekts)\n                var packetIn = new DatagramPacket(new byte[BUFSIZE], BUFSIZE);\n                socket.receive(packetIn);\n                \n                var json = new String(packetIn.getData());\n                Quote quote = deserialize(json);\n                System.out.println(&quot;Quote: &quot; + quote.getText());\n                zitatLabel.setText(quote.getText()); //Throws the NullPointerException\n               \n                Thread.sleep(5000);\n            }\n            \n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        \n    }\n    \n    private static String serialize(int number) {\n        var jsonb = JsonbBuilder.create();\n        return jsonb.toJson(number);\n    }\n    \n    private static Quote deserialize(String data) {\n        var jsonb = JsonbBuilder.create();\n        return jsonb.fromJson(data, Quote.class);\n    }\n    \n}\n</code></pre>\n<p>I start my whole Programm via the QuotesApp.java Class. Ive also created two seperate Threads, one for the server and one for the client:</p>\n<pre><code>public class QuotesApp extends Application {\n    \n    @Override\n    public void start(Stage primaryStage) throws Exception {\n        FXMLLoader loader = new FXMLLoader(QuotesApp.class.getResource(&quot;/Aufgabe1/GUIQuotes.fxml&quot;));\n        Parent root = loader.load();\n        Scene scene = new Scene(root);\n        primaryStage.setTitle(&quot;UserLogin&quot;);\n        primaryStage.setResizable(false);\n        primaryStage.setScene(scene);\n        primaryStage.show();\n        \n        \n        // Starte den Server und den Client in separaten Threads\n        Thread serverThread = new Thread(() -&gt; {\n            QuotesServer.main(new String[0]);\n        });\n\n        Thread clientThread = new Thread(() -&gt; {\n            try {\n            QuotesClient.main(new String[0]);\n            } catch (UnknownHostException e) {\n                e.printStackTrace();\n            }\n        });\n\n        serverThread.start();\n        clientThread.start();        \n    }\n\n    public static void main(String[] args) {\n        launch(args);\n        \n    }\n}\n</code></pre>\n"},{"tags":["java","java-native-interface"],"comments":[{"owner":{"account_id":12214,"reputation":23816,"user_id":23921,"display_name":"Pesto"},"score":0,"creation_date":1236183717,"post_id":611296,"comment_id":423699,"body_markdown":"Are these algorithms general enough that somebody else has probably already written them?","body":"Are these algorithms general enough that somebody else has probably already written them?"},{"owner":{"account_id":7704,"reputation":3214,"user_id":1459442,"accept_rate":100,"display_name":"Ryan Thames"},"score":0,"creation_date":1236183859,"post_id":611296,"comment_id":423716,"body_markdown":"Nah, they&#39;re not very general at all, unfortunately.","body":"Nah, they&#39;re not very general at all, unfortunately."}],"answers":[{"tags":[],"owner":{"account_id":13903,"reputation":393623,"user_id":28169,"accept_rate":88,"display_name":"unwind"},"comment_count":0,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1236183723,"creation_date":1236183723,"answer_id":611312,"question_id":611296,"body_markdown":"If the &quot;algorithms&quot; are well-packaged, perhaps it&#39;s possible to create some automatic glue code, through JNI? That would cut down on the risk of errors (creating hundreds of individual components manually sounds risky), and make the cost independent of the number of algorithms to add, more or less.\r\n\r\nRewriting hundreds of components sounds very risky, I would definitely recommend at least investigating JNI more closely first.\r\n\r\nWhat I/O requirements do the algorithms have with respect to the rest of the project? If they are fairly loosely coupled, perhaps it&#39;d be possible to run them as free-standing separate programs, invoked as sub-processes from Java and using e.g. stdio to share data?","title":"Should we rewrite our C code in Java or use JNI instead?","body":"<p>If the \"algorithms\" are well-packaged, perhaps it's possible to create some automatic glue code, through JNI? That would cut down on the risk of errors (creating hundreds of individual components manually sounds risky), and make the cost independent of the number of algorithms to add, more or less.</p>\n\n<p>Rewriting hundreds of components sounds very risky, I would definitely recommend at least investigating JNI more closely first.</p>\n\n<p>What I/O requirements do the algorithms have with respect to the rest of the project? If they are fairly loosely coupled, perhaps it'd be possible to run them as free-standing separate programs, invoked as sub-processes from Java and using e.g. stdio to share data?</p>\n"},{"comments":[{"owner":{"account_id":19115,"reputation":29081,"user_id":44523,"accept_rate":95,"display_name":"Esko"},"score":6,"creation_date":1236237525,"post_id":611316,"comment_id":426893,"body_markdown":"Related thought: When I consider rewriting C code in Java, I assess how much effort is needed by going through the original C code and looking how much pointer magic is used. In some cases the overuse of pointer &quot;shortcuts&quot; makes the code plain horrible (not impossible!) to turn into neat OO code.","body":"Related thought: When I consider rewriting C code in Java, I assess how much effort is needed by going through the original C code and looking how much pointer magic is used. In some cases the overuse of pointer &quot;shortcuts&quot; makes the code plain horrible (not impossible!) to turn into neat OO code."}],"tags":[],"owner":{"account_id":3393,"reputation":60796,"user_id":4893,"accept_rate":64,"display_name":"sblundy"},"comment_count":1,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1236183772,"creation_date":1236183772,"answer_id":611316,"question_id":611296,"body_markdown":"I think the answer lies in the amount of coupling there would be between the calling java code and the invoked C/C++ code and in the level of effort the rewrite would entail. If your C code takes a few integers, does some hairy calculation, and returns another int. Use JNI. If there&#39;s a lot of complex back and forth, but the algorithms are reasonably simple, rewrite &#39;em. The fault line is the JNI connection. If that&#39;s going to be complex, you may end up writing more JNI interface code than you would algorithm code for a rewrite.","title":"Should we rewrite our C code in Java or use JNI instead?","body":"<p>I think the answer lies in the amount of coupling there would be between the calling java code and the invoked C/C++ code and in the level of effort the rewrite would entail. If your C code takes a few integers, does some hairy calculation, and returns another int. Use JNI. If there's a lot of complex back and forth, but the algorithms are reasonably simple, rewrite 'em. The fault line is the JNI connection. If that's going to be complex, you may end up writing more JNI interface code than you would algorithm code for a rewrite.</p>\n"},{"tags":[],"owner":{"account_id":4495,"reputation":335863,"user_id":6782,"accept_rate":78,"display_name":"Alnitak"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1236183809,"creation_date":1236183809,"answer_id":611318,"question_id":611296,"body_markdown":"I&#39;d still seriously consider going for JNI, particularly if you&#39;re able to minimize the number of cross-language interfaces.\r\n\r\nIf, for example, there&#39;s a whole stack of C functions that all have the same inputs and outputs, but just do different work on the inputs, wrap that up in a single JNI wrapper with an additional parameter to specify which specific algorithm to use.","title":"Should we rewrite our C code in Java or use JNI instead?","body":"<p>I'd still seriously consider going for JNI, particularly if you're able to minimize the number of cross-language interfaces.</p>\n\n<p>If, for example, there's a whole stack of C functions that all have the same inputs and outputs, but just do different work on the inputs, wrap that up in a single JNI wrapper with an additional parameter to specify which specific algorithm to use.</p>\n"},{"tags":[],"owner":{"account_id":15271,"reputation":63428,"user_id":32090,"accept_rate":91,"display_name":"Boris Pavlović"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1236183813,"creation_date":1236183813,"answer_id":611320,"question_id":611296,"body_markdown":"Give JNI a try. Then if faced with any problems you may rewrite the problematic ones or wrap JNI calls with webservices and deploy them on different boxes or virtual boxes.","title":"Should we rewrite our C code in Java or use JNI instead?","body":"<p>Give JNI a try. Then if faced with any problems you may rewrite the problematic ones or wrap JNI calls with webservices and deploy them on different boxes or virtual boxes.</p>\n"},{"comments":[{"owner":{"account_id":7704,"reputation":3214,"user_id":1459442,"accept_rate":100,"display_name":"Ryan Thames"},"score":0,"creation_date":1236183985,"post_id":611324,"comment_id":423727,"body_markdown":"It&#39;s not a one time Java project, the C/C++ code is old.  I never thought about it from that perspective.  Good advice.","body":"It&#39;s not a one time Java project, the C/C++ code is old.  I never thought about it from that perspective.  Good advice."}],"tags":[],"owner":{"account_id":15970,"reputation":13290,"user_id":34329,"accept_rate":100,"display_name":"grieve"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1236183828,"creation_date":1236183828,"answer_id":611324,"question_id":611296,"body_markdown":"If you plan to write future projects in Java, as opposed to C/C++. I would bite the bullet now, and port the code over to java. The longer you wait the worse it will become. The JNI sounds attractive in this case, but then you will have the problem of somebody having to maintain the C++ code when everyone else is on the fun new Java projects.\r\n\r\nIf this is a one time Java project, then why are you writing it in Java?","title":"Should we rewrite our C code in Java or use JNI instead?","body":"<p>If you plan to write future projects in Java, as opposed to C/C++. I would bite the bullet now, and port the code over to java. The longer you wait the worse it will become. The JNI sounds attractive in this case, but then you will have the problem of somebody having to maintain the C++ code when everyone else is on the fun new Java projects.</p>\n\n<p>If this is a one time Java project, then why are you writing it in Java?</p>\n"},{"tags":[],"owner":{"account_id":19061,"reputation":185746,"user_id":44330,"accept_rate":70,"display_name":"Jason S"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1236186827,"creation_date":1236186827,"answer_id":611568,"question_id":611296,"body_markdown":"If this is Windows-only, and they&#39;re already in a DLL, perhaps [JNA][1] would be of use. (if the performance hit for function calls through JNA isn&#39;t too bad)\r\n\r\n\r\n  [1]: https://github.com/twall/jna/#getting_started","title":"Should we rewrite our C code in Java or use JNI instead?","body":"<p>If this is Windows-only, and they're already in a DLL, perhaps <a href=\"https://github.com/twall/jna/#getting_started\" rel=\"nofollow noreferrer\">JNA</a> would be of use. (if the performance hit for function calls through JNA isn't too bad)</p>\n"},{"tags":[],"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1236189107,"creation_date":1236189107,"answer_id":611701,"question_id":611296,"body_markdown":"Read Joel&#39;s receint post on &quot;[Paying down your technical debt][1]&quot; then go ahead and convert it now rather than pay interest over the next couple years and then paying it off.\r\n\r\nPerhaps the repackaged libraries could be useful in more places as well.  If they are useful and complex enough to make you consider keeping them in C, they must have even more use once packaged nicely in reusable, easily distributable and understandable classes.\r\n\r\n\r\n  [1]: http://www.codinghorror.com/blog/archives/001230.html","title":"Should we rewrite our C code in Java or use JNI instead?","body":"<p>Read Joel's receint post on \"<a href=\"http://www.codinghorror.com/blog/archives/001230.html\" rel=\"nofollow noreferrer\">Paying down your technical debt</a>\" then go ahead and convert it now rather than pay interest over the next couple years and then paying it off.</p>\n\n<p>Perhaps the repackaged libraries could be useful in more places as well.  If they are useful and complex enough to make you consider keeping them in C, they must have even more use once packaged nicely in reusable, easily distributable and understandable classes.</p>\n"},{"tags":[],"owner":{"account_id":25591,"reputation":61024,"user_id":65868,"accept_rate":68,"display_name":"TofuBeer"},"comment_count":0,"down_vote_count":1,"up_vote_count":19,"is_accepted":true,"score":18,"last_activity_date":1236194223,"creation_date":1236192675,"answer_id":611937,"question_id":611296,"body_markdown":"The simple answer is, if the code is going to be called a lot AND performance matters then convert it over to Java.\r\n\r\nThe more complex answers are:\r\n\r\n- if the library easily wrapped in JNI then go with JNI\r\n- if the tests you have for the C/C++ code easily converted over to Java then go for the port\r\n\r\nI would do the following:\r\n\r\n- take one of the algorithms and wrap it in JNI\r\n- take the same algorithm and convert it to Java\r\n- see which is more of a pain to do\r\n- if speed matters then profile both versions and see which of them is acceptable.\r\n\r\n\r\n","title":"Should we rewrite our C code in Java or use JNI instead?","body":"<p>The simple answer is, if the code is going to be called a lot AND performance matters then convert it over to Java.</p>\n\n<p>The more complex answers are:</p>\n\n<ul>\n<li>if the library easily wrapped in JNI then go with JNI</li>\n<li>if the tests you have for the C/C++ code easily converted over to Java then go for the port</li>\n</ul>\n\n<p>I would do the following:</p>\n\n<ul>\n<li>take one of the algorithms and wrap it in JNI</li>\n<li>take the same algorithm and convert it to Java</li>\n<li>see which is more of a pain to do</li>\n<li>if speed matters then profile both versions and see which of them is acceptable.</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":21271,"reputation":5855,"user_id":51560,"accept_rate":57,"display_name":"Paulo Lopes"},"score":0,"creation_date":1236194538,"post_id":611993,"comment_id":424608,"body_markdown":"LLVM generates bitcode and it is not related to JVM bytecode. LLVM is much more low level and to run in the JVM or CLR you need to use the VMKit project which is still in its infancy.","body":"LLVM generates bitcode and it is not related to JVM bytecode. LLVM is much more low level and to run in the JVM or CLR you need to use the VMKit project which is still in its infancy."},{"owner":{"account_id":98784,"reputation":10491,"user_id":267197,"accept_rate":68,"display_name":"dma_k"},"score":0,"creation_date":1271077225,"post_id":611993,"comment_id":2634535,"body_markdown":"&#248;rn: I think, big amount of data can be passed by reference. Do you mean with your message, that passing a data is a bottleneck? You you meant that frequent calls to JNI function may be a bottleneck?","body":"&#248;rn: I think, big amount of data can be passed by reference. Do you mean with your message, that passing a data is a bottleneck? You you meant that frequent calls to JNI function may be a bottleneck?"},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1271085567,"post_id":611993,"comment_id":2635589,"body_markdown":"Unless you design your data structures very carefully (which requires hands-on experience) you will need to transfer data between C data structures and Java objects.  That process is &quot;expensive&quot;.","body":"Unless you design your data structures very carefully (which requires hands-on experience) you will need to transfer data between C data structures and Java objects.  That process is &quot;expensive&quot;."}],"tags":[],"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1236193760,"creation_date":1236193760,"answer_id":611993,"question_id":611296,"body_markdown":"The bridge between C and Java is expensive, so if you have to pass a lot of data back and forth there is no win in calling C over JNI.\r\n\r\nI have seen JNA listed as a reasonable alternative to JNI with a lot less pain to call methods in a DLL/shared library from Java in a reflection like way.  I have not tried it yet.\r\n\r\nYou may want to consider compiling your C code as a Linux MIPS binary which can be interpreted in Java.  Reasonably fast, a bit hard to set up correctly.  See http://nestedvm.ibex.org/\r\n\r\nAlso you may use a llvm backend to gcc to compile to lowlevel bytecodes which can then be interpreted in Java.    THis is also the approach taken with the iPhone SDK afaik on Mac OS X.    http://llvm.org/","title":"Should we rewrite our C code in Java or use JNI instead?","body":"<p>The bridge between C and Java is expensive, so if you have to pass a lot of data back and forth there is no win in calling C over JNI.</p>\n\n<p>I have seen JNA listed as a reasonable alternative to JNI with a lot less pain to call methods in a DLL/shared library from Java in a reflection like way.  I have not tried it yet.</p>\n\n<p>You may want to consider compiling your C code as a Linux MIPS binary which can be interpreted in Java.  Reasonably fast, a bit hard to set up correctly.  See <a href=\"http://nestedvm.ibex.org/\" rel=\"nofollow noreferrer\">http://nestedvm.ibex.org/</a></p>\n\n<p>Also you may use a llvm backend to gcc to compile to lowlevel bytecodes which can then be interpreted in Java.    THis is also the approach taken with the iPhone SDK afaik on Mac OS X.    <a href=\"http://llvm.org/\" rel=\"nofollow noreferrer\">http://llvm.org/</a></p>\n"},{"tags":[],"owner":{"account_id":24842,"reputation":239,"user_id":63433,"display_name":"Jeremy Rishel"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1236206185,"creation_date":1236206185,"answer_id":612780,"question_id":611296,"body_markdown":"I think you&#39;ll find that using JNI is not as daunting as it seems prior to diving in. There are some important trade-offs and limitations but in general JNI works well and is reasonably easy to leverage as you intend.\r\n\r\nAs other have said the best case for JNI is:\r\n\r\n- Complex native code (bonus points if that code has already proven very reliable)\r\n- Minimal back-and-forth between Java and native code (you want to minimize the trips across the JNI layer)\r\n- Reasonably simple calling interface to the native code (or also back to Java if you&#39;re native code needs to leverage Java objects/methods)\r\n\r\nIt is definitely possible to automate or pseudo-automate the creation of a JNI layer for a reasonably structured set of native components. That would be well worth it if the number of components to wrap is large.\r\n\r\nThe good news with JNI is that it should be straightforward for you to build and test this interface, for example you should be able to write test cases from Java that exploit existing algorithm behavior and if there are problems they would most likely be in the JNI layer itself and not the algorithms (given your confidence in the native implementation). \r\n\r\nRewriting a large number of C/C++ algorithms in Java seems much more risky to me than using JNI. Without knowing the details it is hard to gauge, of course, but there are subtle differences between the technologies that I could imagine impacting the actual implementation of an algorithm, not to mention just the sheer engineering effort and risk of error.\r\n\r\nA final consideration is future life of these algorithms or related components. Is the set of algorithms more or less complete, or are you continuing to add? Either way, is there a strong maintenance and/or future development reason to favor one technology over the other? For example, if everything else is in Java and all new algorithms will be in Java and almost everyone on the team is almost always coding in Java, reimplementing in Java starts to look more attractive long-term. \r\n\r\nHowever even with that said, working trumps consistent. For a large number of well-functioning native components I would still be inclined to start with JNI even if you were going to transition to Java long-term.","title":"Should we rewrite our C code in Java or use JNI instead?","body":"<p>I think you'll find that using JNI is not as daunting as it seems prior to diving in. There are some important trade-offs and limitations but in general JNI works well and is reasonably easy to leverage as you intend.</p>\n\n<p>As other have said the best case for JNI is:</p>\n\n<ul>\n<li>Complex native code (bonus points if that code has already proven very reliable)</li>\n<li>Minimal back-and-forth between Java and native code (you want to minimize the trips across the JNI layer)</li>\n<li>Reasonably simple calling interface to the native code (or also back to Java if you're native code needs to leverage Java objects/methods)</li>\n</ul>\n\n<p>It is definitely possible to automate or pseudo-automate the creation of a JNI layer for a reasonably structured set of native components. That would be well worth it if the number of components to wrap is large.</p>\n\n<p>The good news with JNI is that it should be straightforward for you to build and test this interface, for example you should be able to write test cases from Java that exploit existing algorithm behavior and if there are problems they would most likely be in the JNI layer itself and not the algorithms (given your confidence in the native implementation). </p>\n\n<p>Rewriting a large number of C/C++ algorithms in Java seems much more risky to me than using JNI. Without knowing the details it is hard to gauge, of course, but there are subtle differences between the technologies that I could imagine impacting the actual implementation of an algorithm, not to mention just the sheer engineering effort and risk of error.</p>\n\n<p>A final consideration is future life of these algorithms or related components. Is the set of algorithms more or less complete, or are you continuing to add? Either way, is there a strong maintenance and/or future development reason to favor one technology over the other? For example, if everything else is in Java and all new algorithms will be in Java and almost everyone on the team is almost always coding in Java, reimplementing in Java starts to look more attractive long-term. </p>\n\n<p>However even with that said, working trumps consistent. For a large number of well-functioning native components I would still be inclined to start with JNI even if you were going to transition to Java long-term.</p>\n"},{"tags":[],"owner":{"account_id":33409,"reputation":335,"user_id":93518,"display_name":"johnstosh"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1694529574,"creation_date":1240278658,"answer_id":770753,"question_id":611296,"body_markdown":"I&#39;ve been in this situation.  I suggest that you get used to using the multi-threaded data structures that are available in Java.  At this point you won&#39;t want to go back to your C++ data structures any more.  \r\n\r\nYou&#39;ll also realize that you can re-write those algorithms much better using more thoughtful techniques, better polymorphism, adapter patterns and so forth.\r\n\r\nWhen you&#39;re sitting in the C/C++ code, you&#39;re thinking that you want to hang on to it.  You&#39;re thinking about all the love you put into it.   In a few years, you&#39;ll realize that by holding onto it and using JNI that you&#39;ve created a monster.  Every time you get a process crash you&#39;ll regret using JNI.  After fixing the process crash, someone will want to modify an algorithm in C++ and you&#39;ll want to throttle them.  They&#39;ll have a convenient excuse like &quot;I&#39;m not used to Java yet.&quot;\r\n\r\nTake a look at immutable data structures in Java.  Don&#39;t even think about the speed that these old C/C++ algorithms execute.  I&#39;ve found that my new code far out-paces any of my old C/C++ code.\r\n\r\nWrite unit tests.  Use NetBeans.\r\n\r\n","title":"Should we rewrite our C code in Java or use JNI instead?","body":"<p>I've been in this situation.  I suggest that you get used to using the multi-threaded data structures that are available in Java.  At this point you won't want to go back to your C++ data structures any more.</p>\n<p>You'll also realize that you can re-write those algorithms much better using more thoughtful techniques, better polymorphism, adapter patterns and so forth.</p>\n<p>When you're sitting in the C/C++ code, you're thinking that you want to hang on to it.  You're thinking about all the love you put into it.   In a few years, you'll realize that by holding onto it and using JNI that you've created a monster.  Every time you get a process crash you'll regret using JNI.  After fixing the process crash, someone will want to modify an algorithm in C++ and you'll want to throttle them.  They'll have a convenient excuse like &quot;I'm not used to Java yet.&quot;</p>\n<p>Take a look at immutable data structures in Java.  Don't even think about the speed that these old C/C++ algorithms execute.  I've found that my new code far out-paces any of my old C/C++ code.</p>\n<p>Write unit tests.  Use NetBeans.</p>\n"}],"owner":{"account_id":7704,"reputation":3214,"user_id":1459442,"accept_rate":100,"display_name":"Ryan Thames"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4343,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"accepted_answer_id":611937,"answer_count":11,"score":19,"last_activity_date":1694635579,"creation_date":1236183470,"question_id":611296,"body_markdown":"I&#39;m currently developing on a project written in Java.  We have a bunch of algorithms written in C/C++ (at least a couple hundred) that need to be incorporated in our project.  Our two options are to use JNI to call this code, or to rewrite all the algorithms in Java.\r\n\r\nI am aware of the consequences of using JNI, it can open up a whole new set of problems, which is why rewriting all the code in Java is even being considered.  But the thought of rewriting it seems...wrong.  The algorithms have been tested and work as far as I know, they&#39;re just in the wrong language.\r\n\r\nIn this situation, would JNI make this task easy?  Or would it cause more headache than rewriting the code in Java would?\r\n\r\nFYI - Our Java project is not meant to be portable in any way.  That might eliminate one of the downsides of JNI in that it supposedly reduces portability.\r\n\r\n  [1]: https://stackoverflow.com/questions/402408/usefulness-of-jni","title":"Should we rewrite our C code in Java or use JNI instead?","body":"<p>I'm currently developing on a project written in Java.  We have a bunch of algorithms written in C/C++ (at least a couple hundred) that need to be incorporated in our project.  Our two options are to use JNI to call this code, or to rewrite all the algorithms in Java.</p>\n<p>I am aware of the consequences of using JNI, it can open up a whole new set of problems, which is why rewriting all the code in Java is even being considered.  But the thought of rewriting it seems...wrong.  The algorithms have been tested and work as far as I know, they're just in the wrong language.</p>\n<p>In this situation, would JNI make this task easy?  Or would it cause more headache than rewriting the code in Java would?</p>\n<p>FYI - Our Java project is not meant to be portable in any way.  That might eliminate one of the downsides of JNI in that it supposedly reduces portability.</p>\n"},{"tags":["java","netbeans"],"answers":[{"comments":[{"owner":{"account_id":5442017,"reputation":837,"user_id":4329824,"accept_rate":80,"display_name":"DHerls"},"score":0,"creation_date":1423758580,"post_id":28482520,"comment_id":45287424,"body_markdown":"That was just sample code.  Replace the &quot;inputField&quot; with the names of your variables.  You should place it in the &quot;clear&quot; method.","body":"That was just sample code.  Replace the &quot;inputField&quot; with the names of your variables.  You should place it in the &quot;clear&quot; method."}],"tags":[],"owner":{"account_id":5442017,"reputation":837,"user_id":4329824,"accept_rate":80,"display_name":"DHerls"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1423758135,"creation_date":1423758135,"answer_id":28482520,"question_id":28482421,"body_markdown":"You can use `inputField.setText(&quot;&quot;);` to set the text of any field to nothing.","title":"Adding a button that reset all the text fields Netbeans Java","body":"<p>You can use <code>inputField.setText(\"\");</code> to set the text of any field to nothing.</p>\n"},{"tags":[],"owner":{"account_id":5671505,"reputation":364,"user_id":4485997,"accept_rate":83,"display_name":"meister_reineke"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1423758576,"creation_date":1423758576,"answer_id":28482699,"question_id":28482421,"body_markdown":"Your Code sniplet is quite short and I can&#39;t figure out, what it is there for, except giving the names of the Textfields?\r\n\r\nAnyway, in genereal your program could look like this:\r\n\r\n\tpublic class calculator implements ActionListener{\r\n\t\tJTextField inputXTextField;\r\n\t\tJTextField inputYTextField;\r\n\t\tJButton bClear=new JButton(&quot;clear all&quot;);\r\n\t\tJPanel panel;\r\n\t\t\r\n\t\tprivate void init(){\r\n\t\t\tbClear.addActionListener(this);\r\n\t\t\tpanel.add(bClear);\r\n\t\t\tpanel.add....\r\n\t\t}\r\n\t\t\r\n\t\tvoid actionPerformed(ActionEvent e){\r\n\t\t\tObject obj=e.getSource();\r\n\t\t\tif (obj=bClear){\r\n\t\t\t\tinputXTextField=new JTextField(...);\r\n\t\t\t\tor\r\n\t\t\t\tinputXTextField.setText(&quot;&quot;); //just to empty the field\r\n\t\t\t\t.\r\n\t\t\t\t.\r\n\t\t\t}\r\n\t\t}","title":"Adding a button that reset all the text fields Netbeans Java","body":"<p>Your Code sniplet is quite short and I can't figure out, what it is there for, except giving the names of the Textfields?</p>\n\n<p>Anyway, in genereal your program could look like this:</p>\n\n<pre><code>public class calculator implements ActionListener{\n    JTextField inputXTextField;\n    JTextField inputYTextField;\n    JButton bClear=new JButton(\"clear all\");\n    JPanel panel;\n\n    private void init(){\n        bClear.addActionListener(this);\n        panel.add(bClear);\n        panel.add....\n    }\n\n    void actionPerformed(ActionEvent e){\n        Object obj=e.getSource();\n        if (obj=bClear){\n            inputXTextField=new JTextField(...);\n            or\n            inputXTextField.setText(\"\"); //just to empty the field\n            .\n            .\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1975417,"reputation":5020,"user_id":1773303,"accept_rate":65,"display_name":"Vallabh Patade"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1423759282,"creation_date":1423759282,"answer_id":28482947,"question_id":28482421,"body_markdown":"     \r\n    JTextField textField1, textField2; //Or as many as you want;\r\n    JButton clear;\r\n\r\n    private void init(){\r\n        textField1 = new JTextField(); //Do this for all text fields.\r\n        clear=new JButton(&quot;C&quot;);\r\n        clear.addActionListener(this);\r\n        //Add controls to the panel/frame\r\n    }\r\n\r\n    void actionPerformed(ActionEvent e){\r\n        Object obj=e.getSource();\r\n        if (e.getSource==clear){\r\n           textField1.setText(&quot;&quot;);\r\n           textField2.setText(&quot;&quot;);\r\n           //... For all the textFields you have\r\n        }\r\n    }","title":"Adding a button that reset all the text fields Netbeans Java","body":"<pre><code>JTextField textField1, textField2; //Or as many as you want;\nJButton clear;\n\nprivate void init(){\n    textField1 = new JTextField(); //Do this for all text fields.\n    clear=new JButton(\"C\");\n    clear.addActionListener(this);\n    //Add controls to the panel/frame\n}\n\nvoid actionPerformed(ActionEvent e){\n    Object obj=e.getSource();\n    if (e.getSource==clear){\n       textField1.setText(\"\");\n       textField2.setText(\"\");\n       //... For all the textFields you have\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":4887124,"reputation":23,"user_id":3939253,"accept_rate":62,"display_name":"Harpreet Sunner"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11044,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1694635370,"creation_date":1423757867,"question_id":28482421,"body_markdown":"I&#39;m trying to make a simple calculator and i want a reset button when pressed it clears all the text fields. I&#39;ve already added an addActionListener and and ive already added the button panel just need to know the method on how do I do this. here is my code -\r\n\r\n    else if(choice.equals(&quot;c&quot;)) {\r\n                xValue = inputXTextField.getText();\r\n                yValue = inputYTextField.getText();\r\n                if(convertPreOperand(xValue) &amp;&amp; convertPostOperand(yValue)) {\r\n                    total = preOperand c postOperand;\r\n                    outputTextField.setText(Double.toString(total));\r\n                }\r\n           }\r\n\r\n","title":"Adding a button that reset all the text fields Netbeans Java","body":"<p>I'm trying to make a simple calculator and i want a reset button when pressed it clears all the text fields. I've already added an addActionListener and and ive already added the button panel just need to know the method on how do I do this. here is my code -</p>\n\n<pre><code>else if(choice.equals(\"c\")) {\n            xValue = inputXTextField.getText();\n            yValue = inputYTextField.getText();\n            if(convertPreOperand(xValue) &amp;&amp; convertPostOperand(yValue)) {\n                total = preOperand c postOperand;\n                outputTextField.setText(Double.toString(total));\n            }\n       }\n</code></pre>\n"},{"tags":["java","kotlin","elasticsearch","spring-data-elasticsearch"],"answers":[{"comments":[{"owner":{"account_id":20297592,"reputation":735,"user_id":14887783,"display_name":"SageJustus"},"score":0,"creation_date":1694686311,"post_id":77100165,"comment_id":135925090,"body_markdown":"I used version 5.1.3, but this error still exists. Is it because the fixed version has not been released to the maven repository?","body":"I used version 5.1.3, but this error still exists. Is it because the fixed version has not been released to the maven repository?"},{"owner":{"account_id":5534873,"reputation":18496,"user_id":4393565,"accept_rate":67,"display_name":"P.J.Meisch"},"score":0,"creation_date":1694778807,"post_id":77100165,"comment_id":135939398,"body_markdown":"Yes, when issues are fixed and backported, they will only be available with the next release. But you&#39;re lucky, 5.2.0-M3, 5.1.4 and 5.0.10 have just been released, so the y should be available in maven central soon.","body":"Yes, when issues are fixed and backported, they will only be available with the next release. But you&#39;re lucky, 5.2.0-M3, 5.1.4 and 5.0.10 have just been released, so the y should be available in maven central soon."}],"tags":[],"owner":{"account_id":5534873,"reputation":18496,"user_id":4393565,"accept_rate":67,"display_name":"P.J.Meisch"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694635323,"creation_date":1694635323,"answer_id":77100165,"question_id":77085928,"body_markdown":"That was a bug in Spring Data Elasticsearch, thanks for reporting; I just fixed it in _main_ and backported it to the 5.1 and 5.0 branches.","title":"Spring Data elasticsearch UpdateQuery withRefreshPolicy not working","body":"<p>That was a bug in Spring Data Elasticsearch, thanks for reporting; I just fixed it in <em>main</em> and backported it to the 5.1 and 5.0 branches.</p>\n"}],"owner":{"account_id":20297592,"reputation":735,"user_id":14887783,"display_name":"SageJustus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77100165,"answer_count":1,"score":1,"last_activity_date":1694635323,"creation_date":1694489495,"question_id":77085928,"body_markdown":"I use `ElasticsearchOperations` to implement update operations.\r\n```kotlin\r\nesOperations.update(\r\n    UpdateQuery.builder(old.id.toString())\r\n        .withDocument(Document.from(mapOf(&quot;browsed&quot; to item.browsed)))\r\n        .withRefreshPolicy(\r\n            RefreshPolicy.IMMEDIATE\r\n        )\r\n        .build(),\r\n    IndexCoordinates.of(&quot;t_telegram_message&quot;)\r\n)\r\n```\r\nBut it&#39;s not working properly, the post request is\r\n```\r\nPOST /t_telegram_message/_update/6150?refresh=false\r\n```\r\nWhat I expect is that the request parameter is `refresh=true`.\r\n\r\nwhat should I do?\r\n\r\nDependencies:\r\n```\r\n&lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\r\n&lt;artifactId&gt;spring-data-elasticsearch&lt;/artifactId&gt;\r\n&lt;version&gt;5.0.3&lt;/version&gt;\r\n```","title":"Spring Data elasticsearch UpdateQuery withRefreshPolicy not working","body":"<p>I use <code>ElasticsearchOperations</code> to implement update operations.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>esOperations.update(\n    UpdateQuery.builder(old.id.toString())\n        .withDocument(Document.from(mapOf(&quot;browsed&quot; to item.browsed)))\n        .withRefreshPolicy(\n            RefreshPolicy.IMMEDIATE\n        )\n        .build(),\n    IndexCoordinates.of(&quot;t_telegram_message&quot;)\n)\n</code></pre>\n<p>But it's not working properly, the post request is</p>\n<pre><code>POST /t_telegram_message/_update/6150?refresh=false\n</code></pre>\n<p>What I expect is that the request parameter is <code>refresh=true</code>.</p>\n<p>what should I do?</p>\n<p>Dependencies:</p>\n<pre><code>&lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\n&lt;artifactId&gt;spring-data-elasticsearch&lt;/artifactId&gt;\n&lt;version&gt;5.0.3&lt;/version&gt;\n</code></pre>\n"},{"tags":["javascript","java","netty","protocol-buffers","protobufjs"],"answers":[{"comments":[{"owner":{"account_id":1796346,"reputation":5164,"user_id":1635676,"accept_rate":46,"display_name":"Touqeer Shafi"},"score":0,"creation_date":1586587751,"post_id":38363742,"comment_id":108185403,"body_markdown":"actually I&#39;m also facing the same issue removing this frame decoder it works fine, I want to know the reason why it&#39;s happening","body":"actually I&#39;m also facing the same issue removing this frame decoder it works fine, I want to know the reason why it&#39;s happening"}],"tags":[],"owner":{"account_id":383107,"reputation":50638,"user_id":738746,"accept_rate":97,"display_name":"Bhesh Gurung"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1468456122,"creation_date":1468456122,"answer_id":38363742,"question_id":38363160,"body_markdown":"I only needed to remove the following -\r\n\r\n    pipeline.addLast(new ProtobufVarint32FrameDecoder());\r\n\r\nand it is working fine now.","title":"Netty, ProtoBuf, WebSocket; how to convert BinaryWebSocketFrame to protobuf type?","body":"<p>I only needed to remove the following -</p>\n\n<pre><code>pipeline.addLast(new ProtobufVarint32FrameDecoder());\n</code></pre>\n\n<p>and it is working fine now.</p>\n"},{"comments":[{"owner":{"account_id":3547959,"reputation":2574,"user_id":2963422,"display_name":"Procrastinator"},"score":0,"creation_date":1643356094,"post_id":70833506,"comment_id":125322383,"body_markdown":"While this link may answer the question, it is better to include the essential parts of the answer here and provide the link for reference.  Link-only answers can become invalid if the linked page changes. - [From Review](/review/late-answers/30895091)","body":"While this link may answer the question, it is better to include the essential parts of the answer here and provide the link for reference.  Link-only answers can become invalid if the linked page changes. - <a href=\"/review/late-answers/30895091\">From Review</a>"}],"tags":[],"owner":{"account_id":4290713,"reputation":31,"user_id":3507175,"display_name":"emaayan"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643025477,"creation_date":1643025477,"answer_id":70833506,"question_id":38363160,"body_markdown":"i believe the ProtobufVarint32FrameDecoder is an optimization from netty itself, which means the client also needs to use ProtobufVarint32LengthFieldPrepender according to this https://issues.redhat.com/browse/NETTY-203?page=com.atlassian.jira.plugin.system.issuetabpanels%3Aall-tabpanel","title":"Netty, ProtoBuf, WebSocket; how to convert BinaryWebSocketFrame to protobuf type?","body":"<p>i believe the ProtobufVarint32FrameDecoder is an optimization from netty itself, which means the client also needs to use ProtobufVarint32LengthFieldPrepender according to this <a href=\"https://issues.redhat.com/browse/NETTY-203?page=com.atlassian.jira.plugin.system.issuetabpanels%3Aall-tabpanel\" rel=\"nofollow noreferrer\">https://issues.redhat.com/browse/NETTY-203?page=com.atlassian.jira.plugin.system.issuetabpanels%3Aall-tabpanel</a></p>\n"},{"tags":[],"owner":{"account_id":3900416,"reputation":23,"user_id":3228402,"display_name":"Gregg Saffell"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694635269,"creation_date":1694635269,"answer_id":77100158,"question_id":38363160,"body_markdown":"You can send the varint that ProtobufVarint32FrameDecoder is looking for from javascript with this function:\r\n\r\n```\r\nfunction sendSeiralizedMsgWithVarInt(sock, data) {\r\n\t\r\n\tlet dataByteLen = data.byteLength;\r\n\t\r\n\tlet dynamicArray = [];\r\n\r\n\tlet done = false;\r\n    while (!done) {\r\n        if ((dataByteLen &amp; ~0x7F) === 0) {\r\n\t\t\tdynamicArray.push(dataByteLen);\r\n            done = true;\r\n        } else {\r\n            out.writeByte((dataByteLen &amp; 0x7F) | 0x80);\r\n            dataByteLen &gt;&gt;&gt;= 7;\r\n        }\r\n    }\r\n\t\r\n\tconst uint8Array = new Uint8Array(dynamicArray);\r\n\tsock.send(uint8Array);\r\n\tsock.send(data);\r\n}\r\n```\r\n","title":"Netty, ProtoBuf, WebSocket; how to convert BinaryWebSocketFrame to protobuf type?","body":"<p>You can send the varint that ProtobufVarint32FrameDecoder is looking for from javascript with this function:</p>\n<pre><code>function sendSeiralizedMsgWithVarInt(sock, data) {\n    \n    let dataByteLen = data.byteLength;\n    \n    let dynamicArray = [];\n\n    let done = false;\n    while (!done) {\n        if ((dataByteLen &amp; ~0x7F) === 0) {\n            dynamicArray.push(dataByteLen);\n            done = true;\n        } else {\n            out.writeByte((dataByteLen &amp; 0x7F) | 0x80);\n            dataByteLen &gt;&gt;&gt;= 7;\n        }\n    }\n    \n    const uint8Array = new Uint8Array(dynamicArray);\n    sock.send(uint8Array);\n    sock.send(data);\n}\n</code></pre>\n"}],"owner":{"account_id":383107,"reputation":50638,"user_id":738746,"accept_rate":97,"display_name":"Bhesh Gurung"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2876,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":38363742,"answer_count":3,"score":2,"last_activity_date":1694635269,"creation_date":1468451462,"question_id":38363160,"body_markdown":"I have a server using protobuf. The handler is defined as -\r\n\r\n    public class ServerHandler extends SimpleChannelInboundHandler&lt;MyProtoBufType&gt; {\r\n\r\nThe pipeline is as follows -\r\n\r\n    pipeline.addLast(new ProtobufVarint32FrameDecoder());\r\n    pipeline.addLast(new ProtobufDecoder(MyProtoBufType.getDefaultInstance()));\r\n    pipeline.addLast(new ProtobufVarint32LengthFieldPrepender());\r\n    pipeline.addLast(new ProtobufEncoder());\r\n    pipeline.addLast(&quot;ServerHandler&quot;, new ServerHandler());\r\n\r\nWith that and a Java client everything works fine. \r\n\r\nNow, to be able to connect using Javascript websocket, I modified the server pipeline as follows -\r\n\r\n    pipeline.addLast(new HttpServerCodec());\r\n    pipeline.addLast(new HttpObjectAggregator(65536));\r\n    pipeline.addLast(new WebSocketServerCompressionHandler());\r\n    pipeline.addLast(new WebSocketServerProtocolHandler(WEBSOCKET_PATH, null, true));\r\n    pipeline.addLast(new MessageToMessageDecoder&lt;WebSocketFrame&gt;() {\r\n    \t@Override\r\n    \tprotected void decode(ChannelHandlerContext ctx, WebSocketFrame frame, List&lt;Object&gt; objs) throws Exception {\r\n    \t\tByteBuf buf = ((BinaryWebSocketFrame) frame).content();\r\n    \t\tobjs.add(buf);\r\n    \t\tbuf.retain();\r\n    \t}\r\n    });\r\n    pipeline.addLast(new ProtobufVarint32FrameDecoder());\r\n    pipeline.addLast(new ProtobufDecoder(MyProtoBufType.getDefaultInstance()));\r\n    pipeline.addLast(new ProtobufVarint32LengthFieldPrepender());\r\n    pipeline.addLast(new ProtobufEncoder());\r\n    pipeline.addLast(&quot;ServerHandler&quot;, new ServerHandler());\r\n\r\nFollowing is the Javascript client code based on [protobufjs](https://github.com/dcodeIO/protobuf.js) library -\r\n\r\n    var ProtoBuf = dcodeIO.ProtoBuf,\r\n    \tbuilder = ProtoBuf.loadProtoFile(&quot;./example.proto&quot;),\r\n        pkg = builder.build(&quot;com.example&quot;);\r\n    \tsocket = new WebSocket(&quot;ws://localhost:8484&quot;);\r\n    \t\r\n    socket.binaryType = &quot;arraybuffer&quot;; \r\n    \r\n    socket.onopen = function() {\r\n        var login = new pkg.Login({&quot;userName&quot;: &quot;hello&quot;, &quot;password&quot;: &quot;pass&quot;});\r\n        var wrapper = new pkg.MyProtoBufType();\r\n        wrapper.set(&quot;login&quot;, login);\r\n        socket.send(wrapper.toArrayBuffer());\r\n    };\r\n\r\nWhen the above code is run, the server fails at protobuf decoder. Following is the stacktrace -\r\n\r\n    WARN [nioEventLoopGroup-3-6] (DefaultChannelPipeline.java:1144) - An exceptionCaught() event was fired, and it reached at the tail of the pipeline. It usually means the last handler in the pipeline did not handle the exception.\r\n    io.netty.handler.codec.DecoderException: com.google.protobuf.InvalidProtocolBufferException: While parsing a protocol message, the input ended unexpectedly in the middle of a field.  This could mean either than the input has been truncated or that an embedded message misreported its own length.\r\n    \tat io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:98)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:349)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:335)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:327)\r\n    \tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:288)\r\n    \tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:275)\r\n    \tat io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:391)\r\n    \tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:243)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:349)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:335)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:327)\r\n    \tat io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:102)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:349)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:335)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:327)\r\n    \tat io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:102)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:349)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:335)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:327)\r\n    \tat io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86)\r\n    \tat io.netty.handler.codec.http.websocketx.Utf8FrameValidator.channelRead(Utf8FrameValidator.java:77)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:349)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:335)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:327)\r\n    \tat io.netty.handler.codec.http.websocketx.WebSocketServerProtocolHandler$1.channelRead(WebSocketServerProtocolHandler.java:159)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:349)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:335)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:327)\r\n    \tat io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:102)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:349)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:335)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:327)\r\n    \tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:288)\r\n    \tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:262)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:349)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:335)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:327)\r\n    \tat io.netty.handler.logging.LoggingHandler.channelRead(LoggingHandler.java:233)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:349)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:335)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:327)\r\n    \tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1336)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:349)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:335)\r\n    \tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:911)\r\n    \tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:123)\r\n    \tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:544)\r\n    \tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:485)\r\n    \tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:399)\r\n    \tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:371)\r\n    \tat io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:742)\r\n    \tat io.netty.util.concurrent.DefaultThreadFactory$DefaultRunnableDecorator.run(DefaultThreadFactory.java:145)\r\n    \tat java.lang.Thread.run(Unknown Source)\r\n    Caused by: com.google.protobuf.InvalidProtocolBufferException: While parsing a protocol message, the input ended unexpectedly in the middle of a field.  This could mean either than the input has been truncated or that an embedded message misreported its own length.\r\n    \tat com.google.protobuf.InvalidProtocolBufferException.truncatedMessage(InvalidProtocolBufferException.java:70)\r\n    \tat com.google.protobuf.CodedInputStream.readRawBytesSlowPath(CodedInputStream.java:1187)\r\n    \tat com.google.protobuf.CodedInputStream.readBytes(CodedInputStream.java:517)\r\n    \tat com.google.protobuf.UnknownFieldSet$Builder.mergeFieldFrom(UnknownFieldSet.java:501)\r\n    \tat com.google.protobuf.UnknownFieldSet$Builder.mergeFrom(UnknownFieldSet.java:478)\r\n    \tat com.google.protobuf.UnknownFieldSet$Builder.mergeFrom(UnknownFieldSet.java:596)\r\n    \tat com.google.protobuf.UnknownFieldSet$Builder.mergeFrom(UnknownFieldSet.java:281)\r\n    \tat com.google.protobuf.CodedInputStream.readGroup(CodedInputStream.java:424)\r\n    \tat com.google.protobuf.UnknownFieldSet$Builder.mergeFieldFrom(UnknownFieldSet.java:505)\r\n    \tat com.google.protobuf.GeneratedMessage.parseUnknownField(GeneratedMessage.java:205)\r\n    \tat com.exmaple.MyProtoBufType.&lt;init&gt;(CallBreakProtocol.java:15290)\r\n    \tat com.exmaple.MyProtoBufType.&lt;init&gt;(CallBreakProtocol.java:15273)\r\n    \tat com.exmaple.MyProtoBufType$1.parsePartialFrom(CallBreakProtocol.java:15638)\r\n    \tat com.exmaple.MyProtoBufType$1.parsePartialFrom(CallBreakProtocol.java:1)\r\n    \tat com.google.protobuf.AbstractParser.parsePartialFrom(AbstractParser.java:137)\r\n    \tat com.google.protobuf.AbstractParser.parseFrom(AbstractParser.java:168)\r\n    \tat com.google.protobuf.AbstractParser.parseFrom(AbstractParser.java:174)\r\n    \tat com.google.protobuf.AbstractParser.parseFrom(AbstractParser.java:49)\r\n    \tat io.netty.handler.codec.protobuf.ProtobufDecoder.decode(ProtobufDecoder.java:121)\r\n    \tat io.netty.handler.codec.protobuf.ProtobufDecoder.decode(ProtobufDecoder.java:64)\r\n    \tat io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:88)\r\n    \t... 52 more\r\n\r\nHas anyone used Netty, ProtoBuf and WebSocket together? How can this be achieved?","title":"Netty, ProtoBuf, WebSocket; how to convert BinaryWebSocketFrame to protobuf type?","body":"<p>I have a server using protobuf. The handler is defined as -</p>\n\n<pre><code>public class ServerHandler extends SimpleChannelInboundHandler&lt;MyProtoBufType&gt; {\n</code></pre>\n\n<p>The pipeline is as follows -</p>\n\n<pre><code>pipeline.addLast(new ProtobufVarint32FrameDecoder());\npipeline.addLast(new ProtobufDecoder(MyProtoBufType.getDefaultInstance()));\npipeline.addLast(new ProtobufVarint32LengthFieldPrepender());\npipeline.addLast(new ProtobufEncoder());\npipeline.addLast(\"ServerHandler\", new ServerHandler());\n</code></pre>\n\n<p>With that and a Java client everything works fine. </p>\n\n<p>Now, to be able to connect using Javascript websocket, I modified the server pipeline as follows -</p>\n\n<pre><code>pipeline.addLast(new HttpServerCodec());\npipeline.addLast(new HttpObjectAggregator(65536));\npipeline.addLast(new WebSocketServerCompressionHandler());\npipeline.addLast(new WebSocketServerProtocolHandler(WEBSOCKET_PATH, null, true));\npipeline.addLast(new MessageToMessageDecoder&lt;WebSocketFrame&gt;() {\n    @Override\n    protected void decode(ChannelHandlerContext ctx, WebSocketFrame frame, List&lt;Object&gt; objs) throws Exception {\n        ByteBuf buf = ((BinaryWebSocketFrame) frame).content();\n        objs.add(buf);\n        buf.retain();\n    }\n});\npipeline.addLast(new ProtobufVarint32FrameDecoder());\npipeline.addLast(new ProtobufDecoder(MyProtoBufType.getDefaultInstance()));\npipeline.addLast(new ProtobufVarint32LengthFieldPrepender());\npipeline.addLast(new ProtobufEncoder());\npipeline.addLast(\"ServerHandler\", new ServerHandler());\n</code></pre>\n\n<p>Following is the Javascript client code based on <a href=\"https://github.com/dcodeIO/protobuf.js\" rel=\"nofollow\">protobufjs</a> library -</p>\n\n<pre><code>var ProtoBuf = dcodeIO.ProtoBuf,\n    builder = ProtoBuf.loadProtoFile(\"./example.proto\"),\n    pkg = builder.build(\"com.example\");\n    socket = new WebSocket(\"ws://localhost:8484\");\n\nsocket.binaryType = \"arraybuffer\"; \n\nsocket.onopen = function() {\n    var login = new pkg.Login({\"userName\": \"hello\", \"password\": \"pass\"});\n    var wrapper = new pkg.MyProtoBufType();\n    wrapper.set(\"login\", login);\n    socket.send(wrapper.toArrayBuffer());\n};\n</code></pre>\n\n<p>When the above code is run, the server fails at protobuf decoder. Following is the stacktrace -</p>\n\n<pre><code>WARN [nioEventLoopGroup-3-6] (DefaultChannelPipeline.java:1144) - An exceptionCaught() event was fired, and it reached at the tail of the pipeline. It usually means the last handler in the pipeline did not handle the exception.\nio.netty.handler.codec.DecoderException: com.google.protobuf.InvalidProtocolBufferException: While parsing a protocol message, the input ended unexpectedly in the middle of a field.  This could mean either than the input has been truncated or that an embedded message misreported its own length.\n    at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:98)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:349)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:335)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:327)\n    at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:288)\n    at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:275)\n    at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:391)\n    at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:243)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:349)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:335)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:327)\n    at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:102)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:349)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:335)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:327)\n    at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:102)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:349)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:335)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:327)\n    at io.netty.channel.ChannelInboundHandlerAdapter.channelRead(ChannelInboundHandlerAdapter.java:86)\n    at io.netty.handler.codec.http.websocketx.Utf8FrameValidator.channelRead(Utf8FrameValidator.java:77)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:349)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:335)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:327)\n    at io.netty.handler.codec.http.websocketx.WebSocketServerProtocolHandler$1.channelRead(WebSocketServerProtocolHandler.java:159)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:349)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:335)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:327)\n    at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:102)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:349)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:335)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:327)\n    at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:288)\n    at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:262)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:349)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:335)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:327)\n    at io.netty.handler.logging.LoggingHandler.channelRead(LoggingHandler.java:233)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:349)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:335)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:327)\n    at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1336)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:349)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:335)\n    at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:911)\n    at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:123)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:544)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:485)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:399)\n    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:371)\n    at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:742)\n    at io.netty.util.concurrent.DefaultThreadFactory$DefaultRunnableDecorator.run(DefaultThreadFactory.java:145)\n    at java.lang.Thread.run(Unknown Source)\nCaused by: com.google.protobuf.InvalidProtocolBufferException: While parsing a protocol message, the input ended unexpectedly in the middle of a field.  This could mean either than the input has been truncated or that an embedded message misreported its own length.\n    at com.google.protobuf.InvalidProtocolBufferException.truncatedMessage(InvalidProtocolBufferException.java:70)\n    at com.google.protobuf.CodedInputStream.readRawBytesSlowPath(CodedInputStream.java:1187)\n    at com.google.protobuf.CodedInputStream.readBytes(CodedInputStream.java:517)\n    at com.google.protobuf.UnknownFieldSet$Builder.mergeFieldFrom(UnknownFieldSet.java:501)\n    at com.google.protobuf.UnknownFieldSet$Builder.mergeFrom(UnknownFieldSet.java:478)\n    at com.google.protobuf.UnknownFieldSet$Builder.mergeFrom(UnknownFieldSet.java:596)\n    at com.google.protobuf.UnknownFieldSet$Builder.mergeFrom(UnknownFieldSet.java:281)\n    at com.google.protobuf.CodedInputStream.readGroup(CodedInputStream.java:424)\n    at com.google.protobuf.UnknownFieldSet$Builder.mergeFieldFrom(UnknownFieldSet.java:505)\n    at com.google.protobuf.GeneratedMessage.parseUnknownField(GeneratedMessage.java:205)\n    at com.exmaple.MyProtoBufType.&lt;init&gt;(CallBreakProtocol.java:15290)\n    at com.exmaple.MyProtoBufType.&lt;init&gt;(CallBreakProtocol.java:15273)\n    at com.exmaple.MyProtoBufType$1.parsePartialFrom(CallBreakProtocol.java:15638)\n    at com.exmaple.MyProtoBufType$1.parsePartialFrom(CallBreakProtocol.java:1)\n    at com.google.protobuf.AbstractParser.parsePartialFrom(AbstractParser.java:137)\n    at com.google.protobuf.AbstractParser.parseFrom(AbstractParser.java:168)\n    at com.google.protobuf.AbstractParser.parseFrom(AbstractParser.java:174)\n    at com.google.protobuf.AbstractParser.parseFrom(AbstractParser.java:49)\n    at io.netty.handler.codec.protobuf.ProtobufDecoder.decode(ProtobufDecoder.java:121)\n    at io.netty.handler.codec.protobuf.ProtobufDecoder.decode(ProtobufDecoder.java:64)\n    at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:88)\n    ... 52 more\n</code></pre>\n\n<p>Has anyone used Netty, ProtoBuf and WebSocket together? How can this be achieved?</p>\n"},{"tags":["java","selenium-webdriver","testng","log4j2"],"answers":[{"tags":[],"owner":{"account_id":116746,"reputation":12477,"user_id":306030,"accept_rate":70,"display_name":"forty-two"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694624642,"creation_date":1694624642,"answer_id":77099132,"question_id":77098810,"body_markdown":"I haven&#39;t really used log4j2, but I guess you&#39;re better of with programmatic configuration. Described here: https://logging.apache.org/log4j/2.x/manual/customconfig.html","title":"Log4j2 Dynamically setting the log directory during tests","body":"<p>I haven't really used log4j2, but I guess you're better of with programmatic configuration. Described here: <a href=\"https://logging.apache.org/log4j/2.x/manual/customconfig.html\" rel=\"nofollow noreferrer\">https://logging.apache.org/log4j/2.x/manual/customconfig.html</a></p>\n"},{"tags":[],"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694632954,"creation_date":1694632954,"answer_id":77099965,"question_id":77098810,"body_markdown":"If `${sys:logFileName}` is resolved to `${sys:logFileName}` it means that Log4j Core is initialized **before** you set the system property. You can set both `-Dlog4j2.debug=true` and `-Dlog4j2.loggerContextStacktraceOnStart=true` to pinpoint the moment the backend is initialized. This could be:\r\n * an explicit call to one of the `LogManager` methods,\r\n * one of your libraries initializes a logging API that is bridged to Log4j API.\r\n\r\n### Sequential tests\r\n\r\nIf you are **not** running your tests in parallel, you can easily ignore this problem by:\r\n * setting a nice default value for the log file if the system property is not present:\r\n   ```lang-xml\r\n   &lt;Properties&gt;\r\n       &lt;Property name=&quot;logFilename&quot;&gt;./target/logs/global.log&lt;/Property&gt;\r\n   &lt;/Properties&gt;\r\n\r\n   &lt;Appenders&gt;\r\n       &lt;File name=&quot;File&quot; fileName=&quot;${sys:logFilename}&quot;&gt;\r\n           &lt;PatternLayout pattern=&quot;%d %p %c{1.} [%t] %m%n&quot; /&gt;\r\n       &lt;/File&gt;\r\n   &lt;/Appenders&gt;\r\n   ```\r\n * after you set your system variable just reconfigure Log4j Core:\r\n   ```lang-java\r\n   Configurator.reconfigure();\r\n   ```\r\n   No log events will be lost during this time, although some of them might end up in the old and new log file.\r\n\r\n### Parallel tests\r\n\r\n**Parallel** tests are hard for most applications, since they usually use **static** loggers, so you can not just spawn a different `LoggerContext` per test (as it is done in Log4j Core own tests). The best results in this case could be obtained using a `RoutingAppender` (as in [this answer](https://stackoverflow.com/a/71455641/11748454)), which decides where to send a log event based on a thread-bound value. You can use `ThreadContext` and the `${ctx:...}` lookup for this.\r\n\r\n### Remark\r\n\r\nYou can of course combine the two approaches by using a `RoutingAppender` that checks `${sys:logFilename}` at each message. You will not need a reconfiguration in this case, but performance might suffer.","title":"Log4j2 Dynamically setting the log directory during tests","body":"<p>If <code>${sys:logFileName}</code> is resolved to <code>${sys:logFileName}</code> it means that Log4j Core is initialized <strong>before</strong> you set the system property. You can set both <code>-Dlog4j2.debug=true</code> and <code>-Dlog4j2.loggerContextStacktraceOnStart=true</code> to pinpoint the moment the backend is initialized. This could be:</p>\n<ul>\n<li>an explicit call to one of the <code>LogManager</code> methods,</li>\n<li>one of your libraries initializes a logging API that is bridged to Log4j API.</li>\n</ul>\n<h3>Sequential tests</h3>\n<p>If you are <strong>not</strong> running your tests in parallel, you can easily ignore this problem by:</p>\n<ul>\n<li>setting a nice default value for the log file if the system property is not present:\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;Properties&gt;\n    &lt;Property name=&quot;logFilename&quot;&gt;./target/logs/global.log&lt;/Property&gt;\n&lt;/Properties&gt;\n\n&lt;Appenders&gt;\n    &lt;File name=&quot;File&quot; fileName=&quot;${sys:logFilename}&quot;&gt;\n        &lt;PatternLayout pattern=&quot;%d %p %c{1.} [%t] %m%n&quot; /&gt;\n    &lt;/File&gt;\n&lt;/Appenders&gt;\n</code></pre>\n</li>\n<li>after you set your system variable just reconfigure Log4j Core:\n<pre class=\"lang-java prettyprint-override\"><code>Configurator.reconfigure();\n</code></pre>\nNo log events will be lost during this time, although some of them might end up in the old and new log file.</li>\n</ul>\n<h3>Parallel tests</h3>\n<p><strong>Parallel</strong> tests are hard for most applications, since they usually use <strong>static</strong> loggers, so you can not just spawn a different <code>LoggerContext</code> per test (as it is done in Log4j Core own tests). The best results in this case could be obtained using a <code>RoutingAppender</code> (as in <a href=\"https://stackoverflow.com/a/71455641/11748454\">this answer</a>), which decides where to send a log event based on a thread-bound value. You can use <code>ThreadContext</code> and the <code>${ctx:...}</code> lookup for this.</p>\n<h3>Remark</h3>\n<p>You can of course combine the two approaches by using a <code>RoutingAppender</code> that checks <code>${sys:logFilename}</code> at each message. You will not need a reconfiguration in this case, but performance might suffer.</p>\n"}],"owner":{"account_id":6996252,"reputation":432,"user_id":5363840,"accept_rate":50,"display_name":"Dr.Tautology"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1694632954,"creation_date":1694621612,"question_id":77098810,"body_markdown":"This problem seems to be so incredibly simple, but I&#39;ve been working for hours trying to solve it and come up with nothing.\r\n\r\nI have build a test framework using Selenium and Testng. I have a base class that gets extended to any test class that is created and this base class is responsible for a few different function one of which is creating a uniquely named directory where I am storing  my screenshots from tests. This functionality works fine. The problem is that I am now trying to integrate log4j2 into the test framework and what I want is for these logs to be written to a file inside of this unique directory that is created with each run. Here is what my log4j2.xml looks like:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;Configuration status=&quot;INFO&quot; monitorInterval=&quot;30&quot;&gt;\r\n    &lt;Properties&gt;\r\n        &lt;Property name=&quot;logFilename&quot;&gt;${sys:logFileName}&lt;/Property&gt;\r\n    &lt;/Properties&gt;\r\n\r\n    &lt;Appenders&gt;\r\n        &lt;File name=&quot;File&quot; fileName=&quot;${logFilename}&quot;&gt;\r\n            &lt;PatternLayout pattern=&quot;%d %p %c{1.} [%t] %m%n&quot; /&gt;\r\n        &lt;/File&gt;\r\n    &lt;/Appenders&gt;\r\n\r\n\r\n    &lt;Loggers&gt;\r\n        &lt;Root level=&quot;info&quot;&gt;\r\n            &lt;AppenderRef ref=&quot;File&quot; /&gt;\r\n        &lt;/Root&gt;\r\n    &lt;/Loggers&gt;\r\n&lt;/Configuration&gt;\r\n```\r\n\r\nAs you can see I&#39;m attempting to use use the property ```${sys:logFileName}``` where ```logFileName``` is defined in my base class like this:\r\n\r\n```\r\n        // Seting the log file path programmatically\r\n        // resultsDirName is the path to the unique directory that is being created\r\n        // at the start of each test.\r\n        String logFilePath = resultsDirName + &quot;/test.log&quot;;\r\n        System.out.println(logFilePath);\r\n        System.setProperty(&quot;logFileName&quot;, logFilePath);\r\n```\r\n\r\nWhen I run my test here is the error that I get:\r\n```\r\nERROR StatusConsoleListener FileManager (../${sys:logFileName}) java.io.IOException: The filename, directory name, or volume label syntax is incorrect\r\n java.io.IOException: The filename, directory name, or volume label syntax is incorrect\r\n```\r\n\r\nI know the path is correct, because the directory is being created and I am successfully saving my screenshots there. It&#39;s also important to note that I am not initializing the logger until after these sys variable have been created. I have tried a few other things that had some unexpected results. For example if I change my log4j2.xml to have this line:\r\n```&lt;Property name=&quot;logFilename&quot;&gt;${logFileName}&lt;/Property&gt;```\r\nI end up with a log file created in my project root that is actually called ${logFileName}.\r\n\r\nI have also tried the following in my xml:\r\n```    &lt;Properties&gt;\r\n        &lt;Property name=&quot;logDirectory&quot;&gt;${logDirectory}&lt;/Property&gt;\r\n        &lt;Property name=&quot;logFilename&quot;&gt;${logDirectory}/test.log&lt;/Property&gt;\r\n    &lt;/Properties&gt;\r\n```\r\nOnce again this is actually creating a directory called ```${logDirectory}``` and storing the log file there. I also get this error:\r\n```WARN StatusConsoleListener Infinite loop in property interpolation of logDirectory```\r\n\r\nI feel like a complete fool. I&#39;m building a similar test framework in python and had zero issues implementing this feature. I don&#39;t understand why this is so hard and convoluted in java, or perhaps it&#39;s just because I&#39;m more of a novice in Java. Please, any help is appreciated.\r\n\r\n","title":"Log4j2 Dynamically setting the log directory during tests","body":"<p>This problem seems to be so incredibly simple, but I've been working for hours trying to solve it and come up with nothing.</p>\n<p>I have build a test framework using Selenium and Testng. I have a base class that gets extended to any test class that is created and this base class is responsible for a few different function one of which is creating a uniquely named directory where I am storing  my screenshots from tests. This functionality works fine. The problem is that I am now trying to integrate log4j2 into the test framework and what I want is for these logs to be written to a file inside of this unique directory that is created with each run. Here is what my log4j2.xml looks like:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Configuration status=&quot;INFO&quot; monitorInterval=&quot;30&quot;&gt;\n    &lt;Properties&gt;\n        &lt;Property name=&quot;logFilename&quot;&gt;${sys:logFileName}&lt;/Property&gt;\n    &lt;/Properties&gt;\n\n    &lt;Appenders&gt;\n        &lt;File name=&quot;File&quot; fileName=&quot;${logFilename}&quot;&gt;\n            &lt;PatternLayout pattern=&quot;%d %p %c{1.} [%t] %m%n&quot; /&gt;\n        &lt;/File&gt;\n    &lt;/Appenders&gt;\n\n\n    &lt;Loggers&gt;\n        &lt;Root level=&quot;info&quot;&gt;\n            &lt;AppenderRef ref=&quot;File&quot; /&gt;\n        &lt;/Root&gt;\n    &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n<p>As you can see I'm attempting to use use the property <code>${sys:logFileName}</code> where <code>logFileName</code> is defined in my base class like this:</p>\n<pre><code>        // Seting the log file path programmatically\n        // resultsDirName is the path to the unique directory that is being created\n        // at the start of each test.\n        String logFilePath = resultsDirName + &quot;/test.log&quot;;\n        System.out.println(logFilePath);\n        System.setProperty(&quot;logFileName&quot;, logFilePath);\n</code></pre>\n<p>When I run my test here is the error that I get:</p>\n<pre><code>ERROR StatusConsoleListener FileManager (../${sys:logFileName}) java.io.IOException: The filename, directory name, or volume label syntax is incorrect\n java.io.IOException: The filename, directory name, or volume label syntax is incorrect\n</code></pre>\n<p>I know the path is correct, because the directory is being created and I am successfully saving my screenshots there. It's also important to note that I am not initializing the logger until after these sys variable have been created. I have tried a few other things that had some unexpected results. For example if I change my log4j2.xml to have this line:\n<code>&lt;Property name=&quot;logFilename&quot;&gt;${logFileName}&lt;/Property&gt;</code>\nI end up with a log file created in my project root that is actually called ${logFileName}.</p>\n<p>I have also tried the following in my xml:</p>\n<pre><code>        &lt;Property name=&quot;logDirectory&quot;&gt;${logDirectory}&lt;/Property&gt;\n        &lt;Property name=&quot;logFilename&quot;&gt;${logDirectory}/test.log&lt;/Property&gt;\n    &lt;/Properties&gt;\n</code></pre>\n<p>Once again this is actually creating a directory called <code>${logDirectory}</code> and storing the log file there. I also get this error:\n<code>WARN StatusConsoleListener Infinite loop in property interpolation of logDirectory</code></p>\n<p>I feel like a complete fool. I'm building a similar test framework in python and had zero issues implementing this feature. I don't understand why this is so hard and convoluted in java, or perhaps it's just because I'm more of a novice in Java. Please, any help is appreciated.</p>\n"},{"tags":["java","ssl-certificate","httpsurlconnection","unknown-host","sslsocketfactory"],"answers":[{"tags":[],"owner":{"account_id":13874157,"reputation":584,"user_id":10016327,"display_name":"satyesht"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1694632536,"creation_date":1694632536,"answer_id":77099923,"question_id":77099861,"body_markdown":"This is DNS resolution error \r\n\r\nDoes the API call requires proxy ? you may have to add http proxy in your call .\r\n\r\ndepending on the os \r\nyou can run \r\n**on windows** \r\n\r\n    ping  api-dir.com.es \r\n    or tracert api-dir.com.es   \r\n\r\nor linux \r\n\r\n    traceroute api-dir.com.es  \r\n\r\nto see if you have connectivity to this service/api\r\n\r\nor try to provide direct IP of api-dir.com.es  instead of the name in the URL\r\n\r\nor try to create entry of the IP In your host file\r\n\r\nlinux\r\n\r\n    /etc/host\r\n\r\nwindows \r\n\r\n    c:\\Windows\\System32\\Drivers\\etc\\hosts\r\n\r\nwith entry as \r\n\r\napi-dir.com.es  ip address","title":"UnknownHostException on HttpsURLConnection with SSLSocketFactory","body":"<p>This is DNS resolution error</p>\n<p>Does the API call requires proxy ? you may have to add http proxy in your call .</p>\n<p>depending on the os\nyou can run\n<strong>on windows</strong></p>\n<pre><code>ping  api-dir.com.es \nor tracert api-dir.com.es   \n</code></pre>\n<p>or linux</p>\n<pre><code>traceroute api-dir.com.es  \n</code></pre>\n<p>to see if you have connectivity to this service/api</p>\n<p>or try to provide direct IP of api-dir.com.es  instead of the name in the URL</p>\n<p>or try to create entry of the IP In your host file</p>\n<p>linux</p>\n<pre><code>/etc/host\n</code></pre>\n<p>windows</p>\n<pre><code>c:\\Windows\\System32\\Drivers\\etc\\hosts\n</code></pre>\n<p>with entry as</p>\n<p>api-dir.com.es  ip address</p>\n"}],"owner":{"account_id":8827261,"reputation":913,"user_id":6595116,"accept_rate":95,"display_name":"TimeToCode"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77099923,"answer_count":1,"score":0,"last_activity_date":1694632536,"creation_date":1694631797,"question_id":77099861,"body_markdown":"I&#39;m trying to consume an API, but I need to upload a certificate to consume it.\r\n\r\nThis is what I&#39;ve been trying to consume the API. In this method I open the connection for the consumption of the API:\r\n\r\n    public static String consumeAPI() {\r\n      String respAPI = &quot;&quot;;\r\n      String param = &quot;some_param&quot;;\r\n      String user = &quot;user&quot;;\r\n      String pswrd = &quot;pass&quot;;\r\n      try {\r\n        SSLSocketFactory ssl = createSSLSocketFactory(&quot;path_of_cert&quot;);\r\n        URL url = new URL(&quot;https://api-dir.com.es:8080/api&quot;);\r\n        HttpsURLConnection conn = (HttpsURLConnection) url.openConnection();\r\n        conn.setSSLSocketFactory(ssl);\r\n        conn.setDoOutput(true);\r\n        conn.setRequestMethod(&quot;POST&quot;);\r\n        conn.setRequestProperty(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;);\r\n        conn.setRequestProperty(&quot;Authorization&quot;, &quot;Basic &quot; + Base64.getEncoder().encodeToString((user + &quot;:&quot; + pswrd).getBytes(StandardCharsets.UTF_8)));\r\n        conn.setConnectTimeout(APIUtils.TIMEOUT);\r\n        try (OutputStream os = conn.getOutputStream()) {\r\n          os.write(parametros.getBytes(StandardCharsets.UTF_8));\r\n          os.flush();\r\n          if (conn.getResponseCode() == HttpURLConnection.HTTP_OK) {\r\n            try (BufferedReader br = new BufferedReader(new InputStreamReader(conn.getInputStream(), StandardCharsets.UTF_8))) {\r\n              StringBuilder result = new StringBuilder();\r\n              String auxStr;\r\n              while ((auxStr = br.readLine()) != null) {\r\n                result.append(auxStr);\r\n              }\r\n              respAPI = result.toString();\r\n            }\r\n          }\r\n        }\r\n        return respAPI;\r\n      }\r\n      catch(IOException | ClassCastException | IllegalStateException | IllegalArgumentException e) {\r\n        e.printStackTrace();\r\n        return null;\r\n      }\r\n    }\r\n\r\nAnd this is the method that generates the `SSLSocketFactory` with the certificate loaded:\r\n\r\n    private static SSLSocketFactory createSSLSocketFactory(String certPath) {\r\n      try {\r\n        try (InputStream in =APIUtils.class.getResourceAsStream(certPath)) {\r\n          Certificate certificate = CertificateFactory.getInstance(&quot;X.509&quot;).generateCertificate( in );\r\n          KeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType());\r\n          keyStore.load(null);\r\n          keyStore.setCertificateEntry(&quot;certalias&quot;, certificate);\r\n          TrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());\r\n          trustManagerFactory.init(keyStore);\r\n          SSLContext sslContext = SSLContext.getInstance(&quot;TLSv1.2&quot;);\r\n          sslContext.init(null, trustManagerFactory.getTrustManagers(), null);\r\n          return sslContext.getSocketFactory();\r\n        }\r\n      }\r\n      catch(CertificateException | KeyStoreException | NoSuchAlgorithmException | IOException | KeyManagementException e) {\r\n        e.printStackTrace();\r\n        return null;\r\n      }\r\n    }\r\n\r\nBut it is throwing `java.net.UnknownHostException`, here is the error trace:\r\n\r\n    java.net.UnknownHostException: api-dir.com.es\r\n            at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:567)\r\n            at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)\r\n            at java.base/java.net.Socket.connect(Socket.java:633)\r\n            at java.base/sun.security.ssl.SSLSocketImpl.connect(SSLSocketImpl.java:304)\r\n            at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:178)\r\n            at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:532)\r\n            at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:637)\r\n            at java.base/sun.net.www.protocol.https.HttpsClient.&lt;init&gt;(HttpsClient.java:266)\r\n            at java.base/sun.net.www.protocol.https.HttpsClient.New(HttpsClient.java:380)\r\n            at java.base/sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.getNewHttpClient(AbstractDelegateHttpsURLConnection.java:193)\r\n            at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1242)\r\n            at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1128)\r\n            at java.base/sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:179)\r\n            at java.base/sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1430)\r\n            at java.base/sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1401)\r\n            at java.base/sun.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream(HttpsURLConnectionImpl.java:220)\r\n            at deployment.regional.war//com.ekt.regional.web.api.SomeAPI.consumeAPI(SomeAPI.java:49)\r\n\r\nI made sure that the API url is correct and that we have the permissions to access it.\r\n\r\nIt is worth mentioning that the certificate is a `.crt` file and is for the development environment.","title":"UnknownHostException on HttpsURLConnection with SSLSocketFactory","body":"<p>I'm trying to consume an API, but I need to upload a certificate to consume it.</p>\n<p>This is what I've been trying to consume the API. In this method I open the connection for the consumption of the API:</p>\n<pre><code>public static String consumeAPI() {\n  String respAPI = &quot;&quot;;\n  String param = &quot;some_param&quot;;\n  String user = &quot;user&quot;;\n  String pswrd = &quot;pass&quot;;\n  try {\n    SSLSocketFactory ssl = createSSLSocketFactory(&quot;path_of_cert&quot;);\n    URL url = new URL(&quot;https://api-dir.com.es:8080/api&quot;);\n    HttpsURLConnection conn = (HttpsURLConnection) url.openConnection();\n    conn.setSSLSocketFactory(ssl);\n    conn.setDoOutput(true);\n    conn.setRequestMethod(&quot;POST&quot;);\n    conn.setRequestProperty(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;);\n    conn.setRequestProperty(&quot;Authorization&quot;, &quot;Basic &quot; + Base64.getEncoder().encodeToString((user + &quot;:&quot; + pswrd).getBytes(StandardCharsets.UTF_8)));\n    conn.setConnectTimeout(APIUtils.TIMEOUT);\n    try (OutputStream os = conn.getOutputStream()) {\n      os.write(parametros.getBytes(StandardCharsets.UTF_8));\n      os.flush();\n      if (conn.getResponseCode() == HttpURLConnection.HTTP_OK) {\n        try (BufferedReader br = new BufferedReader(new InputStreamReader(conn.getInputStream(), StandardCharsets.UTF_8))) {\n          StringBuilder result = new StringBuilder();\n          String auxStr;\n          while ((auxStr = br.readLine()) != null) {\n            result.append(auxStr);\n          }\n          respAPI = result.toString();\n        }\n      }\n    }\n    return respAPI;\n  }\n  catch(IOException | ClassCastException | IllegalStateException | IllegalArgumentException e) {\n    e.printStackTrace();\n    return null;\n  }\n}\n</code></pre>\n<p>And this is the method that generates the <code>SSLSocketFactory</code> with the certificate loaded:</p>\n<pre><code>private static SSLSocketFactory createSSLSocketFactory(String certPath) {\n  try {\n    try (InputStream in =APIUtils.class.getResourceAsStream(certPath)) {\n      Certificate certificate = CertificateFactory.getInstance(&quot;X.509&quot;).generateCertificate( in );\n      KeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType());\n      keyStore.load(null);\n      keyStore.setCertificateEntry(&quot;certalias&quot;, certificate);\n      TrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());\n      trustManagerFactory.init(keyStore);\n      SSLContext sslContext = SSLContext.getInstance(&quot;TLSv1.2&quot;);\n      sslContext.init(null, trustManagerFactory.getTrustManagers(), null);\n      return sslContext.getSocketFactory();\n    }\n  }\n  catch(CertificateException | KeyStoreException | NoSuchAlgorithmException | IOException | KeyManagementException e) {\n    e.printStackTrace();\n    return null;\n  }\n}\n</code></pre>\n<p>But it is throwing <code>java.net.UnknownHostException</code>, here is the error trace:</p>\n<pre><code>java.net.UnknownHostException: api-dir.com.es\n        at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:567)\n        at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)\n        at java.base/java.net.Socket.connect(Socket.java:633)\n        at java.base/sun.security.ssl.SSLSocketImpl.connect(SSLSocketImpl.java:304)\n        at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:178)\n        at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:532)\n        at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:637)\n        at java.base/sun.net.www.protocol.https.HttpsClient.&lt;init&gt;(HttpsClient.java:266)\n        at java.base/sun.net.www.protocol.https.HttpsClient.New(HttpsClient.java:380)\n        at java.base/sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.getNewHttpClient(AbstractDelegateHttpsURLConnection.java:193)\n        at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1242)\n        at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1128)\n        at java.base/sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:179)\n        at java.base/sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1430)\n        at java.base/sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1401)\n        at java.base/sun.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream(HttpsURLConnectionImpl.java:220)\n        at deployment.regional.war//com.ekt.regional.web.api.SomeAPI.consumeAPI(SomeAPI.java:49)\n</code></pre>\n<p>I made sure that the API url is correct and that we have the permissions to access it.</p>\n<p>It is worth mentioning that the certificate is a <code>.crt</code> file and is for the development environment.</p>\n"},{"tags":["java","eclipse","lambda","expression","java-8"],"comments":[{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":0,"creation_date":1376345351,"post_id":18197437,"comment_id":26668866,"body_markdown":"Your program compiles and runs fine for me (b100). Have you tried to compile it with javac from the command line? It seems to be an eclipse configuration issue.","body":"Your program compiles and runs fine for me (b100). Have you tried to compile it with javac from the command line? It seems to be an eclipse configuration issue."},{"owner":{"account_id":1853886,"reputation":210617,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"score":1,"creation_date":1376345431,"post_id":18197437,"comment_id":26668896,"body_markdown":"@assylias. Yeah it works without braces. Thanks. :)","body":"@assylias. Yeah it works without braces. Thanks. :)"},{"owner":{"account_id":3166607,"reputation":360,"user_id":2676480,"display_name":"DominikStyp"},"score":0,"creation_date":1376347801,"post_id":18197437,"comment_id":26669691,"body_markdown":"Eclipse doesn&#39;t show any errors, but if I run this code as Java Application it throws an exception.","body":"Eclipse doesn&#39;t show any errors, but if I run this code as Java Application it throws an exception."},{"owner":{"account_id":3166607,"reputation":360,"user_id":2676480,"display_name":"DominikStyp"},"score":0,"creation_date":1376348961,"post_id":18197437,"comment_id":26670038,"body_markdown":"@assylias: Thanks, javac solved the problem of compilation, but i still can&#39;t compile code properly in Eclipse. Any clues for Eclipse?","body":"@assylias: Thanks, javac solved the problem of compilation, but i still can&#39;t compile code properly in Eclipse. Any clues for Eclipse?"},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":0,"creation_date":1376349074,"post_id":18197437,"comment_id":26670079,"body_markdown":"@user2676480 Nop - I&#39;ve never liked eclipse ;-) You don&#39;t seem to be alone having troubles with eclipse+java8: http://stackoverflow.com/questions/17366615/java-8-hashmap-initialization-with-lambda-expressions","body":"@user2676480 Nop - I&#39;ve never liked eclipse ;-) You don&#39;t seem to be alone having troubles with eclipse+java8: <a href=\"http://stackoverflow.com/questions/17366615/java-8-hashmap-initialization-with-lambda-expressions\" title=\"java 8 hashmap initialization with lambda expressions\">stackoverflow.com/questions/17366615/&hellip;</a>"},{"owner":{"account_id":1165974,"reputation":4349,"user_id":1144275,"display_name":"TechTrip"},"score":0,"creation_date":1384447041,"post_id":18197437,"comment_id":29749012,"body_markdown":"Considering that it is a Beta I would think it more than unfair to make any judgements about eclipse on that baisis","body":"Considering that it is a Beta I would think it more than unfair to make any judgements about eclipse on that baisis"}],"answers":[{"tags":[],"owner":{"account_id":1165974,"reputation":4349,"user_id":1144275,"display_name":"TechTrip"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1384452224,"creation_date":1384452224,"answer_id":19985020,"question_id":18197437,"body_markdown":"I found that your example compiles fine for the latest beta. Not sure what you are trying to evaluate but I did a similar test as follows:\r\n\r\n    public class LambdaTesting {\r\n    \tpublic static String[] strs = { &quot;a&quot;, &quot;aa&quot;, &quot;aaa&quot;};\r\n    \r\n    \tpublic static void main(String args[]) throws Exception {\r\n    \t\tExecutorService pool = Executors.newFixedThreadPool(3);\r\n    \t\tSet&lt;Future&lt;Integer&gt;&gt; set = new HashSet&lt;Future&lt;Integer&gt;&gt;();\r\n    \t\tfor (String word : strs) {\r\n    \r\n    \t\t\tCallable&lt;Integer&gt; c = (() -&gt; word.length());\r\n    \r\n    \t\t\tFuture&lt;Integer&gt; future = pool.submit(c);\r\n    \t\t\tset.add(future);\r\n    \t\t}\r\n    \t\tint sum = 0;\r\n    \t\tfor (Future&lt;Integer&gt; future : set) {\r\n    \t\t\tsum += future.get();\r\n    \t\t}\r\n    \t\tSystem.out.printf(&quot;The sum of lengths is %s%n&quot;, sum);\r\n    \t\tSystem.exit(sum);\r\n    \t}\r\n    }\r\n\r\nI used an example executor I found here: https://stackoverflow.com/questions/13684468/java-runnable-run-method-returning-a-value as my base program and substituted a lambda expression for the wordcount. This all worked fine with the latest Java 8 beta and a September 2013 build of eclipse Kepler as found here: http://downloads.efxclipse.org/eclipse-java8/ - Trip","title":"Lambda Expressions java 8 exception : java.lang.NoSuchMethodError: java.lang.invoke.LambdaMetafactory.metaFactory","body":"<p>I found that your example compiles fine for the latest beta. Not sure what you are trying to evaluate but I did a similar test as follows:</p>\n\n<pre><code>public class LambdaTesting {\n    public static String[] strs = { \"a\", \"aa\", \"aaa\"};\n\n    public static void main(String args[]) throws Exception {\n        ExecutorService pool = Executors.newFixedThreadPool(3);\n        Set&lt;Future&lt;Integer&gt;&gt; set = new HashSet&lt;Future&lt;Integer&gt;&gt;();\n        for (String word : strs) {\n\n            Callable&lt;Integer&gt; c = (() -&gt; word.length());\n\n            Future&lt;Integer&gt; future = pool.submit(c);\n            set.add(future);\n        }\n        int sum = 0;\n        for (Future&lt;Integer&gt; future : set) {\n            sum += future.get();\n        }\n        System.out.printf(\"The sum of lengths is %s%n\", sum);\n        System.exit(sum);\n    }\n}\n</code></pre>\n\n<p>I used an example executor I found here: <a href=\"https://stackoverflow.com/questions/13684468/java-runnable-run-method-returning-a-value\">java Runnable run() method returning a value</a> as my base program and substituted a lambda expression for the wordcount. This all worked fine with the latest Java 8 beta and a September 2013 build of eclipse Kepler as found here: <a href=\"http://downloads.efxclipse.org/eclipse-java8/\" rel=\"nofollow noreferrer\">http://downloads.efxclipse.org/eclipse-java8/</a> - Trip</p>\n"}],"owner":{"account_id":3166607,"reputation":360,"user_id":2676480,"display_name":"DominikStyp"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8612,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1694631940,"creation_date":1376345118,"question_id":18197437,"body_markdown":"I have problem with running following code:\r\n\r\n\t\tpublic class LambdaTesting {\r\n\t\t\tpublic static void main(String[] args){\r\n\t\t\t\t new LambdaTesting();\t \r\n\t\t\t}\r\n\t\t\tpublic LambdaTesting(){\r\n\t\t\t\ttest1();\r\n\t\t\t}\r\n\t\t\tprivate void test1(){\r\n\t\t\t\tRunnable x = () -&gt; System.out.println(&quot;ok&quot;); //error\r\n\t\t\t}\r\n\t\t}\r\n\r\nwhich is causing following exception:\r\n\r\n    *Exception in thread &quot;main&quot; java.lang.IncompatibleClassChangeError \r\n    at java.lang.invoke.MethodHandleNatives.linkMethodHandleConstant(MethodHandleNatives.java:383)\r\n    \tat LambdaTesting.test1(LambdaTesting.java:24)\r\n    \tat LambdaTesting.&lt;init&gt;(LambdaTesting.java:20)\r\n    \tat LambdaTesting.main(LambdaTesting.java:15)\r\n    Caused by: java.lang.NoSuchMethodException: no such method: java.lang.invoke.LambdaMetafactory.metaFactory(Lookup,String,MethodType,MethodHandle,MethodHandle,MethodType)CallSite/invokeStatic\r\n    \tat java.lang.invoke.MemberName.makeAccessException(MemberName.java:765)\r\n    \tat java.lang.invoke.MemberName$Factory.resolveOrFail(MemberName.java:882)\r\n    \tat java.lang.invoke.MethodHandles$Lookup.resolveOrFail(MethodHandles.java:1019)\r\n    \tat java.lang.invoke.MethodHandles$Lookup.linkMethodHandleConstant(MethodHandles.java:1284)\r\n    \tat java.lang.invoke.MethodHandleNatives.linkMethodHandleConstant(MethodHandleNatives.java:381)\r\n    \t... 3 more\r\n    Caused by: java.lang.NoSuchMethodError: java.lang.invoke.LambdaMetafactory.metaFactory(Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/String;Ljava/lang/invoke/MethodType;Ljava/lang/invoke/MethodHandle;Ljava/lang/invoke/MethodHandle;Ljava/lang/invoke/MethodType;)Ljava/lang/invoke/CallSite;\r\n    \tat java.lang.invoke.MethodHandleNatives.resolve(Native Method)\r\n    \tat java.lang.invoke.MemberName$Factory.resolve(MemberName.java:854)\r\n    \tat java.lang.invoke.MemberName$Factory.resolveOrFail(MemberName.java:879)\r\n    \t... 6 more*\r\n\r\nI have installed jdk8 downloaded from: \r\n[http://jdk8.java.net/lambda/][1] (Windows x64 version)\r\n\r\nI run it in Eclipse Version: 4.4.0 downloaded from:\r\n[http://downloads.efxclipse.org/eclipse-java8/2013-06-30/][2]\r\n(file: org.eclipse.sdk.ide-win32.win32.x86_64.zip\t30-Jun-2013 17:35 \t180M)\r\n\r\neclipse.ini file: \r\n\r\n    -vm\r\n    C:\\Program Files\\Java\\jre8\\bin\\java.exe\r\n    -startup\r\n    plugins/org.eclipse.equinox.launcher_1.3.0.v20130327-1440.jar\r\n    --launcher.library\r\n    plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.200.v20130521-0416\r\n    -showsplash\r\n    org.eclipse.platform\r\n    --launcher.defaultAction\r\n    openFile\r\n    --launcher.appendVmargs\r\n    -vmargs\r\n    -Xms40m\r\n    -Xmx512m\r\n\r\nProject properties -&gt; Java Compiler -&gt; Compiler compliance level: 1.8 (BETA)\r\n(Use default compliance settings is checked).\r\n\r\nProject properties -&gt; Java Build Path -&gt; Libraries: \r\nJRE System Library [jre8]\r\n\r\nProject Run Configurations: \r\n\r\n[JRE tab] Project JRE (jre8) checked\r\n\r\n[Classpath tab] Boostrap Entries: JRE System Library [jre8]\r\n\r\nI have also tried to run LambdaTesting.class from command line inside jre8/bin directory\r\nbut same exception appeared.\r\n\r\nJava version:\r\n\r\n    C:\\Program Files\\Java\\jre8\\bin&gt;java.exe -version\r\n    java version &quot;1.8.0-ea&quot;\r\n    Java(TM) SE Runtime Environment (build 1.8.0-ea-b102)\r\n\r\nMy operating system is: Windows 7 x64\r\n\r\nAny clues ?\r\n\r\nThanks to **@assylias** i solved the problem of compilation from command line using **jdk1.8.0/bin/javac.exe**, but still no result in Eclipse. Seems that Eclipse has wrong compiler.\r\nI tried to change settings in: Preferences -&gt; Java -&gt; Compiler, but i can only choose version 1.7 in &quot;Generated .class files compatibility&quot; (no 1.8 available in this setting). \r\n&quot;Use default compliance settings&quot; causing above mentioned exception.\r\n\r\n\r\n  [1]: http://jdk8.java.net/lambda/\r\n  [2]: http://downloads.efxclipse.org/eclipse-java8/2013-06-30/","title":"Lambda Expressions java 8 exception : java.lang.NoSuchMethodError: java.lang.invoke.LambdaMetafactory.metaFactory","body":"<p>I have problem with running following code:</p>\n\n<pre><code>    public class LambdaTesting {\n        public static void main(String[] args){\n             new LambdaTesting();    \n        }\n        public LambdaTesting(){\n            test1();\n        }\n        private void test1(){\n            Runnable x = () -&gt; System.out.println(\"ok\"); //error\n        }\n    }\n</code></pre>\n\n<p>which is causing following exception:</p>\n\n<pre><code>*Exception in thread \"main\" java.lang.IncompatibleClassChangeError \nat java.lang.invoke.MethodHandleNatives.linkMethodHandleConstant(MethodHandleNatives.java:383)\n    at LambdaTesting.test1(LambdaTesting.java:24)\n    at LambdaTesting.&lt;init&gt;(LambdaTesting.java:20)\n    at LambdaTesting.main(LambdaTesting.java:15)\nCaused by: java.lang.NoSuchMethodException: no such method: java.lang.invoke.LambdaMetafactory.metaFactory(Lookup,String,MethodType,MethodHandle,MethodHandle,MethodType)CallSite/invokeStatic\n    at java.lang.invoke.MemberName.makeAccessException(MemberName.java:765)\n    at java.lang.invoke.MemberName$Factory.resolveOrFail(MemberName.java:882)\n    at java.lang.invoke.MethodHandles$Lookup.resolveOrFail(MethodHandles.java:1019)\n    at java.lang.invoke.MethodHandles$Lookup.linkMethodHandleConstant(MethodHandles.java:1284)\n    at java.lang.invoke.MethodHandleNatives.linkMethodHandleConstant(MethodHandleNatives.java:381)\n    ... 3 more\nCaused by: java.lang.NoSuchMethodError: java.lang.invoke.LambdaMetafactory.metaFactory(Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/String;Ljava/lang/invoke/MethodType;Ljava/lang/invoke/MethodHandle;Ljava/lang/invoke/MethodHandle;Ljava/lang/invoke/MethodType;)Ljava/lang/invoke/CallSite;\n    at java.lang.invoke.MethodHandleNatives.resolve(Native Method)\n    at java.lang.invoke.MemberName$Factory.resolve(MemberName.java:854)\n    at java.lang.invoke.MemberName$Factory.resolveOrFail(MemberName.java:879)\n    ... 6 more*\n</code></pre>\n\n<p>I have installed jdk8 downloaded from: \n<a href=\"http://jdk8.java.net/lambda/\" rel=\"nofollow\">http://jdk8.java.net/lambda/</a> (Windows x64 version)</p>\n\n<p>I run it in Eclipse Version: 4.4.0 downloaded from:\n<a href=\"http://downloads.efxclipse.org/eclipse-java8/2013-06-30/\" rel=\"nofollow\">http://downloads.efxclipse.org/eclipse-java8/2013-06-30/</a>\n(file: org.eclipse.sdk.ide-win32.win32.x86_64.zip   30-Jun-2013 17:35   180M)</p>\n\n<p>eclipse.ini file: </p>\n\n<pre><code>-vm\nC:\\Program Files\\Java\\jre8\\bin\\java.exe\n-startup\nplugins/org.eclipse.equinox.launcher_1.3.0.v20130327-1440.jar\n--launcher.library\nplugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.200.v20130521-0416\n-showsplash\norg.eclipse.platform\n--launcher.defaultAction\nopenFile\n--launcher.appendVmargs\n-vmargs\n-Xms40m\n-Xmx512m\n</code></pre>\n\n<p>Project properties -> Java Compiler -> Compiler compliance level: 1.8 (BETA)\n(Use default compliance settings is checked).</p>\n\n<p>Project properties -> Java Build Path -> Libraries: \nJRE System Library [jre8]</p>\n\n<p>Project Run Configurations: </p>\n\n<p>[JRE tab] Project JRE (jre8) checked</p>\n\n<p>[Classpath tab] Boostrap Entries: JRE System Library [jre8]</p>\n\n<p>I have also tried to run LambdaTesting.class from command line inside jre8/bin directory\nbut same exception appeared.</p>\n\n<p>Java version:</p>\n\n<pre><code>C:\\Program Files\\Java\\jre8\\bin&gt;java.exe -version\njava version \"1.8.0-ea\"\nJava(TM) SE Runtime Environment (build 1.8.0-ea-b102)\n</code></pre>\n\n<p>My operating system is: Windows 7 x64</p>\n\n<p>Any clues ?</p>\n\n<p>Thanks to <strong>@assylias</strong> i solved the problem of compilation from command line using <strong>jdk1.8.0/bin/javac.exe</strong>, but still no result in Eclipse. Seems that Eclipse has wrong compiler.\nI tried to change settings in: Preferences -> Java -> Compiler, but i can only choose version 1.7 in \"Generated .class files compatibility\" (no 1.8 available in this setting). \n\"Use default compliance settings\" causing above mentioned exception.</p>\n"},{"tags":["java","spring-boot","rest"],"comments":[{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1694622253,"post_id":77098764,"comment_id":135916434,"body_markdown":"If you will change `synchronized` to `ReentrantLock` class that implements the `Lock` interface all will work as expected. Can you try it ?","body":"If you will change <code>synchronized</code> to <code>ReentrantLock</code> class that implements the <code>Lock</code> interface all will work as expected. Can you try it ?"}],"answers":[{"comments":[{"owner":{"account_id":16100082,"reputation":37,"user_id":11621104,"display_name":"Gourav"},"score":0,"creation_date":1694756597,"post_id":77099873,"comment_id":135935594,"body_markdown":"Ok. If I understood correctly if I create multiple instances of Rest Controller in that case it can produce the expected output and synchronization + singleton instance provide the same behaviors as it is class-level synchronization.","body":"Ok. If I understood correctly if I create multiple instances of Rest Controller in that case it can produce the expected output and synchronization + singleton instance provide the same behaviors as it is class-level synchronization."}],"tags":[],"owner":{"account_id":13874157,"reputation":584,"user_id":10016327,"display_name":"satyesht"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694631850,"creation_date":1694631850,"answer_id":77099873,"question_id":77098764,"body_markdown":"\r\n\r\nThe Actual Output is correct ,and the expectation is not correct.\r\n\r\nif you see the actual output&#39;s first two lines \r\n\r\n&gt;     http-nio-8080-exec-1 hello ....StartWed Sep 13 21:23:37 IST 2023  4\r\n&gt;     http-nio-8080-exec-1 hello ....EndWed Sep 13 21:23:47 IST 2023\r\n\r\nThe first Thread of your app http-nio-8080-exec-1 got the lock and 2nd thread http-nio-8080-exec-2 was waiting until the 1st thread finished , since it is waiting outside for the lock it will not print anything\r\n\r\n&gt;  http-nio-8080-exec-2 helloworld ....StartWed Sep 13 21:23:47 IST 2023\r\n&gt; 3\r\n\r\nimmediate and the 2nd method will wait until 1st releases the lock.\r\n\r\n**so the flow will be** \r\n\r\n    http://localhost:8080/hello/4 --&gt; at Sep 13 21:23:37 IST 2023\r\n    call reaches public synchronized void hello()\r\n    Lock aquired\r\n\r\nprinted \r\n\r\n    http-nio-8080-exec-1 hello ....StartWed Sep 13 21:23:37 IST 2023  4\r\n    Assuming some where here you made the 2nd call \r\n\r\nhttp://localhost:8080/helloworld/3\r\n\r\npublic synchronized void helloWorld() --&gt; will attempt to accquire lock but will wait for 1st method because it would be in Thread.sleep()\r\n\r\n**2nd thread will wait until thread sleep() finish for the hello method()/1st Thread**\r\n\r\n    then 1st method will print \r\n    http-nio-8080-exec-1 hello ....EndWed Sep 13 21:23:47 IST 2023\r\n\r\n&gt;     Then only Lock will be release as method will exit then. and 2nd thread will be executed\r\n\r\n \r\n","title":"@RestController With Synchronization","body":"<p>The Actual Output is correct ,and the expectation is not correct.</p>\n<p>if you see the actual output's first two lines</p>\n<blockquote>\n<pre><code>http-nio-8080-exec-1 hello ....StartWed Sep 13 21:23:37 IST 2023  4\nhttp-nio-8080-exec-1 hello ....EndWed Sep 13 21:23:47 IST 2023\n</code></pre>\n</blockquote>\n<p>The first Thread of your app http-nio-8080-exec-1 got the lock and 2nd thread http-nio-8080-exec-2 was waiting until the 1st thread finished , since it is waiting outside for the lock it will not print anything</p>\n<blockquote>\n<p>http-nio-8080-exec-2 helloworld ....StartWed Sep 13 21:23:47 IST 2023\n3</p>\n</blockquote>\n<p>immediate and the 2nd method will wait until 1st releases the lock.</p>\n<p><strong>so the flow will be</strong></p>\n<pre><code>http://localhost:8080/hello/4 --&gt; at Sep 13 21:23:37 IST 2023\ncall reaches public synchronized void hello()\nLock aquired\n</code></pre>\n<p>printed</p>\n<pre><code>http-nio-8080-exec-1 hello ....StartWed Sep 13 21:23:37 IST 2023  4\nAssuming some where here you made the 2nd call \n</code></pre>\n<p>http://localhost:8080/helloworld/3</p>\n<p>public synchronized void helloWorld() --&gt; will attempt to accquire lock but will wait for 1st method because it would be in Thread.sleep()</p>\n<p><strong>2nd thread will wait until thread sleep() finish for the hello method()/1st Thread</strong></p>\n<pre><code>then 1st method will print \nhttp-nio-8080-exec-1 hello ....EndWed Sep 13 21:23:47 IST 2023\n</code></pre>\n<blockquote>\n<pre><code>Then only Lock will be release as method will exit then. and 2nd thread will be executed\n</code></pre>\n</blockquote>\n"}],"owner":{"account_id":16100082,"reputation":37,"user_id":11621104,"display_name":"Gourav"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":77099873,"answer_count":1,"score":1,"last_activity_date":1694631850,"creation_date":1694621269,"question_id":77098764,"body_markdown":"This is just for understanding as the below code didn&#39;t give the expected result. So wanted to know if there is anything I am missing.\r\n```\r\n\r\n@RestController\r\npublic class TestRestController {\r\n\r\n    @GetMapping(&quot;/helloworld/{parm}&quot;)\r\n    public synchronized void helloWorld(@PathVariable(&quot;parm&quot;) String data) throws Exception{\r\n\r\n        System.out.println(Thread.currentThread().getName()+&quot; helloworld ....Start&quot;+new Date() +&quot;  &quot;+ data);\r\n        Thread.sleep(5000);\r\n        System.out.println(Thread.currentThread().getName()+&quot; helloworld ....End&quot;+ new Date());\r\n\r\n    }\r\n\r\n    @GetMapping(&quot;/hello/{parm}&quot;)\r\n    public synchronized void hello(@PathVariable(&quot;parm&quot;) String data) throws Exception{\r\n\r\n        System.out.println(Thread.currentThread().getName()+&quot; hello ....Start&quot;+new Date() +&quot;  &quot;+ data);\r\n        Thread.sleep(10000);\r\n        System.out.println(Thread.currentThread().getName()+&quot; hello ....End&quot;+ new Date());\r\n\r\n    }\r\n}\r\n```\r\n\r\nExecuting these end-points in the below sequence. \r\n```\r\nhttp://localhost:8080/hello/4\r\nhttp://localhost:8080/helloworld/3\r\n```\r\n\r\nActual output\r\n```\r\nhttp-nio-8080-exec-1 hello ....StartWed Sep 13 21:23:37 IST 2023  4\r\nhttp-nio-8080-exec-1 hello ....EndWed Sep 13 21:23:47 IST 2023\r\nhttp-nio-8080-exec-2 helloworld ....StartWed Sep 13 21:23:47 IST 2023  3\r\nhttp-nio-8080-exec-2 helloworld ....EndWed Sep 13 21:23:52 IST 2023\r\n```\r\n\r\nExpecting output(Don&#39;t consider the timestamp. copypaste from the above)\r\n```\r\nhttp-nio-8080-exec-1 hello ....StartWed Sep 13 21:23:37 IST 2023  4\r\nhttp-nio-8080-exec-2 helloworld ....StartWed Sep 13 21:23:47 IST 2023  3\r\nhttp-nio-8080-exec-2 helloworld ....EndWed Sep 13 21:23:52 IST 2023\r\nhttp-nio-8080-exec-1 hello ....EndWed Sep 13 21:23:47 IST 2023\r\n\r\n```\r\n\r\nMy understanding is that Restcontroller is singleton and methods are non-thread safe in general. Now after adding synchronization only that method gets locked after getting the request the other method shouldn&#39;t locked and executed immediately when another request hits that endpoint. ","title":"@RestController With Synchronization","body":"<p>This is just for understanding as the below code didn't give the expected result. So wanted to know if there is anything I am missing.</p>\n<pre><code>\n@RestController\npublic class TestRestController {\n\n    @GetMapping(&quot;/helloworld/{parm}&quot;)\n    public synchronized void helloWorld(@PathVariable(&quot;parm&quot;) String data) throws Exception{\n\n        System.out.println(Thread.currentThread().getName()+&quot; helloworld ....Start&quot;+new Date() +&quot;  &quot;+ data);\n        Thread.sleep(5000);\n        System.out.println(Thread.currentThread().getName()+&quot; helloworld ....End&quot;+ new Date());\n\n    }\n\n    @GetMapping(&quot;/hello/{parm}&quot;)\n    public synchronized void hello(@PathVariable(&quot;parm&quot;) String data) throws Exception{\n\n        System.out.println(Thread.currentThread().getName()+&quot; hello ....Start&quot;+new Date() +&quot;  &quot;+ data);\n        Thread.sleep(10000);\n        System.out.println(Thread.currentThread().getName()+&quot; hello ....End&quot;+ new Date());\n\n    }\n}\n</code></pre>\n<p>Executing these end-points in the below sequence.</p>\n<pre><code>http://localhost:8080/hello/4\nhttp://localhost:8080/helloworld/3\n</code></pre>\n<p>Actual output</p>\n<pre><code>http-nio-8080-exec-1 hello ....StartWed Sep 13 21:23:37 IST 2023  4\nhttp-nio-8080-exec-1 hello ....EndWed Sep 13 21:23:47 IST 2023\nhttp-nio-8080-exec-2 helloworld ....StartWed Sep 13 21:23:47 IST 2023  3\nhttp-nio-8080-exec-2 helloworld ....EndWed Sep 13 21:23:52 IST 2023\n</code></pre>\n<p>Expecting output(Don't consider the timestamp. copypaste from the above)</p>\n<pre><code>http-nio-8080-exec-1 hello ....StartWed Sep 13 21:23:37 IST 2023  4\nhttp-nio-8080-exec-2 helloworld ....StartWed Sep 13 21:23:47 IST 2023  3\nhttp-nio-8080-exec-2 helloworld ....EndWed Sep 13 21:23:52 IST 2023\nhttp-nio-8080-exec-1 hello ....EndWed Sep 13 21:23:47 IST 2023\n\n</code></pre>\n<p>My understanding is that Restcontroller is singleton and methods are non-thread safe in general. Now after adding synchronization only that method gets locked after getting the request the other method shouldn't locked and executed immediately when another request hits that endpoint.</p>\n"},{"tags":["java","spring-boot","spring-security","jwt"],"comments":[{"owner":{"account_id":1193459,"reputation":3989,"user_id":1165724,"display_name":"swpalmer"},"score":6,"creation_date":1637170190,"post_id":70008960,"comment_id":123756514,"body_markdown":"You are missing JAXB the API for XML binding.  This used to be included in the JDK but it was removed in Java 11 and beyond and is now an external library.  How are you including it in your application?","body":"You are missing JAXB the API for XML binding.  This used to be included in the JDK but it was removed in Java 11 and beyond and is now an external library.  How are you including it in your application?"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1637170239,"post_id":70008960,"comment_id":123756546,"body_markdown":"`javax.xml.bind.*` was removed in Java 9 (or 10). You either need to upgrade to a version of the JWT library that uses `java.util.Base64` (assuming such version exists), or you need to add a dependency on JAXB.","body":"<code>javax.xml.bind.*</code> was removed in Java 9 (or 10). You either need to upgrade to a version of the JWT library that uses <code>java.util.Base64</code> (assuming such version exists), or you need to add a dependency on JAXB."},{"owner":{"account_id":1193459,"reputation":3989,"user_id":1165724,"display_name":"swpalmer"},"score":1,"creation_date":1637170283,"post_id":70008960,"comment_id":123756568,"body_markdown":"See https://stackoverflow.com/questions/9566620/include-jaxb-using-maven","body":"See <a href=\"https://stackoverflow.com/questions/9566620/include-jaxb-using-maven\" title=\"include jaxb using maven\">stackoverflow.com/questions/9566620/include-jaxb-using-maven</a>"},{"owner":{"account_id":2056257,"reputation":41415,"user_id":1833945,"accept_rate":65,"display_name":"AndreaNobili"},"score":0,"creation_date":1637170979,"post_id":70008960,"comment_id":123756820,"body_markdown":"@swpalmer Where is it used? I can&#39;t see method call to instance belonging to this dependency and I have no compilation error. What am I missing?","body":"@swpalmer Where is it used? I can&#39;t see method call to instance belonging to this dependency and I have no compilation error. What am I missing?"},{"owner":{"account_id":2056257,"reputation":41415,"user_id":1833945,"accept_rate":65,"display_name":"AndreaNobili"},"score":0,"creation_date":1637171150,"post_id":70008960,"comment_id":123756888,"body_markdown":"@MarkRotteveel where am I using this dependency? I can&#39;t find it. Do you mean that it is the Jwts class that it using? Have I to use a new version of this? or what am I missing?","body":"@MarkRotteveel where am I using this dependency? I can&#39;t find it. Do you mean that it is the Jwts class that it using? Have I to use a new version of this? or what am I missing?"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":3,"creation_date":1637171435,"post_id":70008960,"comment_id":123756989,"body_markdown":"That io.jsonwebtoken library uses it as shown in the stacktrace of `java.lang.NoClassDefFoundError: javax/xml/bind/DatatypeConverter`. That `DatatypeConverter` is part of JAXB. In the past JAXB was included in the JRE. This changed with Java 9 or 10, so you need to add an explicit dependency on JAXB for this version of the library to work.","body":"That io.jsonwebtoken library uses it as shown in the stacktrace of <code>java.lang.NoClassDefFoundError: javax&#47;xml&#47;bind&#47;DatatypeConverter</code>. That <code>DatatypeConverter</code> is part of JAXB. In the past JAXB was included in the JRE. This changed with Java 9 or 10, so you need to add an explicit dependency on JAXB for this version of the library to work."},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1637194700,"post_id":70008960,"comment_id":123764255,"body_markdown":"Spring security comes included with the JWT library Nimbus, so no need to pull in any additional jwtlibrary","body":"Spring security comes included with the JWT library Nimbus, so no need to pull in any additional jwtlibrary"}],"answers":[{"tags":[],"owner":{"account_id":25532809,"reputation":96,"user_id":19320496,"display_name":"Shadi Aldabbas"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1655001371,"creation_date":1655001313,"answer_id":72589147,"question_id":70008960,"body_markdown":"I don&#39;t know why I am facing this problem, when I run the code in postgres it works fine but I get thiss error with cassandra.\r\n\r\nI have just added those into my pom.xml \r\n\r\n    &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.2.7&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.2.5-b10&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\nI got them from here: https://stackoverflow.com/questions/9566620/include-jaxb-using-maven ","title":"Why am I obtaining this exception trying to build a JWT token? java.lang.NoClassDefFoundError: javax/xml/bind/DatatypeConverter","body":"<p>I don't know why I am facing this problem, when I run the code in postgres it works fine but I get thiss error with cassandra.</p>\n<p>I have just added those into my pom.xml</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n        &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n        &lt;version&gt;2.2.7&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n        &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\n        &lt;version&gt;2.2.5-b10&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>I got them from here: <a href=\"https://stackoverflow.com/questions/9566620/include-jaxb-using-maven\">Include JAXB using Maven</a></p>\n"},{"tags":[],"owner":{"account_id":15599136,"reputation":484,"user_id":11253712,"display_name":"Rahul Dudhane"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694631838,"creation_date":1694631838,"answer_id":77099869,"question_id":70008960,"body_markdown":"Adding the following dependency fixed my issue:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n        &lt;version&gt;2.2.7&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"Why am I obtaining this exception trying to build a JWT token? java.lang.NoClassDefFoundError: javax/xml/bind/DatatypeConverter","body":"<p>Adding the following dependency fixed my issue:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n    &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n    &lt;version&gt;2.2.7&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":2056257,"reputation":41415,"user_id":1833945,"accept_rate":65,"display_name":"AndreaNobili"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4306,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":72589147,"answer_count":2,"score":1,"last_activity_date":1694631838,"creation_date":1637170036,"question_id":70008960,"body_markdown":"I am working on a Spring Boot project implementing JWT authentication but I am finding some difficulties. It is based on an example found into a Udemy course that I am trying to adapt to my specific use case. It is composed by the following two microservices:\r\n\r\n1) **GET-USER-WS:** this is the microservice that obtains user information from the database.\r\n\r\n2) **AuthServerJWT:** this microservice calls the **GET-USER-WS** in order to obtain user information and build the JWT token that will be used by other microservices.\r\n\r\nBasically this second **AuthServerJWT** contains the following **JwtAuthenticationRestController** controller class:\r\n\r\n\t@RestController\r\n\t//@CrossOrigin(origins = &quot;http://localhost:4200&quot;)\r\n\tpublic class JwtAuthenticationRestController  {\r\n\r\n\t\t@Value(&quot;${sicurezza.header}&quot;)\r\n\t\tprivate String tokenHeader;\r\n\r\n\t\t@Autowired\r\n\t\tprivate AuthenticationManager authenticationManager;\r\n\r\n\t\t@Autowired\r\n\t\tprivate JwtTokenUtil jwtTokenUtil;\r\n\r\n\t\t@Autowired\r\n\t\t@Qualifier(&quot;customUserDetailsService&quot;)\r\n\t\tprivate UserDetailsService userDetailsService;\r\n\t\t\r\n\t\tprivate static final Logger logger = LoggerFactory.getLogger(JwtAuthenticationRestController.class);\r\n\r\n\t\t@PostMapping(value = &quot;${sicurezza.uri}&quot;)\r\n\t\tpublic ResponseEntity&lt;?&gt; createAuthenticationToken(@RequestBody JwtTokenRequest authenticationRequest)\r\n\t\t\t\tthrows AuthenticationException {\r\n\t\t\tlogger.info(&quot;Autenticazione e Generazione Token&quot;);\r\n\r\n\t\t\tauthenticate(authenticationRequest.getUsername(), authenticationRequest.getPassword());\r\n\r\n\t\t\tfinal UserDetails userDetails = userDetailsService.loadUserByUsername(authenticationRequest.getUsername());\r\n\r\n\t\t\tfinal String token = jwtTokenUtil.generateToken(userDetails);\r\n\t\t\t\r\n\t\t\tlogger.warn(String.format(&quot;Token %s&quot;, token));\r\n\r\n\t\t\treturn ResponseEntity.ok(new JwtTokenResponse(token));\r\n\t\t}\r\n\r\n\t\t@RequestMapping(value = &quot;${sicurezza.uri}&quot;, method = RequestMethod.GET)\r\n\t\tpublic ResponseEntity&lt;?&gt; refreshAndGetAuthenticationToken(HttpServletRequest request) \r\n\t\t\t\tthrows Exception \r\n\t\t{\r\n\t\t\tString authToken = request.getHeader(tokenHeader);\r\n\t\t\t\r\n\t\t\tif (authToken == null || authToken.length() &lt; 7)\r\n\t\t\t{\r\n\t\t\t\tthrow new Exception(&quot;Token assente o non valido!&quot;);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfinal String token = authToken.substring(7);\r\n\t\t\t\r\n\t\t\tif (jwtTokenUtil.canTokenBeRefreshed(token)) \r\n\t\t\t{\r\n\t\t\t\tString refreshedToken = jwtTokenUtil.refreshToken(token);\r\n\t\t\t\t\r\n\t\t\t\treturn ResponseEntity.ok(new JwtTokenResponse(refreshedToken));\r\n\t\t\t} \r\n\t\t\telse \r\n\t\t\t{\r\n\t\t\t\treturn ResponseEntity.badRequest().body(null);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t@ExceptionHandler({ AuthenticationException.class })\r\n\t\tpublic ResponseEntity&lt;String&gt; handleAuthenticationException(AuthenticationException e) \r\n\t\t{\r\n\t\t\treturn ResponseEntity.status(HttpStatus.UNAUTHORIZED).body(e.getMessage());\r\n\t\t}\r\n\r\n\t\tprivate void authenticate(String username, String password) \r\n\t\t{\r\n\t\t\tObjects.requireNonNull(username);\r\n\t\t\tObjects.requireNonNull(password);\r\n\r\n\t\t\ttry {\t\r\n\t\t\t\t/// ???\r\n\t\t\t\tauthenticationManager.authenticate(new UsernamePasswordAuthenticationToken(username, password));\r\n\t\t\t} \r\n\t\t\tcatch (DisabledException e) \r\n\t\t\t{\r\n\t\t\t\tlogger.warn(&quot;UTENTE DISABILITATO&quot;);\r\n\t\t\t\tthrow new AuthenticationException(&quot;UTENTE DISABILITATO&quot;, e);\r\n\t\t\t} \r\n\t\t\tcatch (BadCredentialsException e) \r\n\t\t\t{\r\n\t\t\t\tlogger.warn(&quot;CREDENZIALI NON VALIDE&quot;);\r\n\t\t\t\tthrow new AuthenticationException(&quot;CREDENZIALI NON VALIDE&quot;, e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\nAS you can see it contains two method: one to create a brand new JWT token and the other one to refresh an existing JWT token. Consider the **createAuthenticationToken()** used to create a new token.\r\n\r\nAt this line:\r\n\r\n    final UserDetails userDetails = userDetailsService.loadUserByUsername(authenticationRequest.getUsername());\r\n\r\nit call the **loadUserByUsername()** method defined in my **CustomUserDetailsService**. This method basically retrieve the user information calling a service of the ****GET-USER-WS** and build a **UserDetails** object (that is a Spring Security object, this one: **org.springframework.security.core.userdetails.UserDetails**).\r\n\r\nThis is the code of this method:\r\n\r\n\t@Override\r\n\tpublic UserDetails loadUserByUsername(String UserId) throws UsernameNotFoundException {\r\n\t\t\r\n\t\tString ErrMsg = &quot;&quot;;\r\n\t\t\r\n\t\tif (UserId == null || UserId.length() &lt; 2) {\r\n\t\t\tErrMsg = &quot;Nome utente assente o non valido&quot;;\r\n\t\t\t\r\n\t\t\tlogger.warn(ErrMsg);\r\n\t\t\t\r\n\t    \tthrow new UsernameNotFoundException(ErrMsg); \r\n\t\t} \r\n\t\t\r\n\t\tUser user = this.GetHttpValue(UserId);\r\n\t\t\r\n\t\tif (user == null) {\r\n\t\t\tErrMsg = String.format(&quot;User %s not found!!&quot;, UserId);\r\n\t\t\t\r\n\t\t\tlogger.warn(ErrMsg);\r\n\t\t\t\r\n\t\t\tthrow new UsernameNotFoundException(ErrMsg);\r\n\t\t}\r\n\t\t\r\n\t\tUserBuilder builder = null;\r\n\t\t\r\n\t\tbuilder = org.springframework.security.core.userdetails.User.withUsername(Integer.toString(user.getId()));\r\n\t\tbuilder.password(user.getPswd());\r\n\t\t\r\n\t\tString[] operations = user.getUserTypes().stream()\r\n\t\t\t    .map(UserType::getOperations)\r\n\t\t\t    .flatMap(Set::stream)\r\n\t\t\t    .map(Operation::getName)\r\n\t\t\t    .distinct()\r\n\t\t\t    .toArray(String[]::new);\r\n\t\t\r\n\t\tbuilder.authorities(operations);\r\n\t\t\r\n\t\t\r\n\t\treturn builder.build();\r\n\t\t\r\n\t}\r\n\r\nThis line simply execute the **GetHttpValue()** method used to perform the call with the RestTemplate in order to retrieve an **User** object containing the details of the user:\r\n\r\n    User user = this.GetHttpValue(UserId);\r\n\r\nSo, come back to the first **createAuthenticationToken()** of the previous **JwtAuthenticationRestController** controller class. My problem is that it retrieve this **UserDetails userDetails** object, at this line:\r\n\r\n    final UserDetails userDetails = userDetailsService.loadUserByUsername(authenticationRequest.getUsername());\r\n\r\nusing the deubugger this is the content of my **userDetails** instance:\r\n\r\n    org.springframework.security.core.userdetails.User [Username=50, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ADMIN]]\r\n\r\nit seems to me correct (except the **Username** field that contains the ID of the user and not the username...I will change in a second time, it should not be the problem).\r\n\r\nThen it perform this line in order to generate the JWT token starting from this **userDetails** object:\r\n\r\n    final String token = jwtTokenUtil.generateToken(userDetails);\r\n\r\nThis is the code of the **generateToken()** method defined into a class named **JwtTokenUtil**:\r\n\r\n\tpublic String generateToken(UserDetails userDetails) {\r\n\t\tMap&lt;String, Object&gt; claims = new HashMap&lt;&gt;();\r\n\t\treturn doGenerateToken(claims, userDetails);\r\n\t}\r\n\r\nIt first create an empty HashMap and then call the **doGenerateToken()**, this is the code:\r\n\r\n\tprivate String doGenerateToken(Map&lt;String, Object&gt; claims, UserDetails userDetails) {\r\n\t\tfinal Date createdDate = clock.now();\r\n\t\tfinal Date expirationDate = calculateExpirationDate(createdDate);\r\n\r\n\t\treturn Jwts.builder()\r\n\t\t\t\t.setClaims(claims)\r\n\t\t\t\t.setSubject(userDetails.getUsername())\r\n\t\t\t\t.claim(&quot;authorities&quot;, userDetails.getAuthorities().stream().map(GrantedAuthority::getAuthority).collect(Collectors.toList()))\r\n\t\t\t\t.setIssuedAt(createdDate)\r\n\t\t\t\t.setExpiration(expirationDate)\r\n\t\t\t\t.signWith(SignatureAlgorithm.HS512, jwtConfig.getSecret().getBytes())\r\n\t\t\t\t.compact();\r\n\t}\r\n\r\nIt correctly create the **expirationDate** date. Then at the end it throws the following exception (using the deubbugger it seems to me that it is thrown on the **compact()** execution):\r\nThe problem is that when this line is executed I am obtaining the following exception:\r\n\r\n\tjava.lang.NoClassDefFoundError: javax/xml/bind/DatatypeConverter\r\n\t\tat io.jsonwebtoken.impl.Base64Codec.encode(Base64Codec.java:21) ~[jjwt-0.9.1.jar:0.9.1]\r\n\t\tat io.jsonwebtoken.impl.Base64UrlCodec.encode(Base64UrlCodec.java:22) ~[jjwt-0.9.1.jar:0.9.1]\r\n\t\tat io.jsonwebtoken.impl.DefaultJwtBuilder.base64UrlEncode(DefaultJwtBuilder.java:349) ~[jjwt-0.9.1.jar:0.9.1]\r\n\t\tat io.jsonwebtoken.impl.DefaultJwtBuilder.compact(DefaultJwtBuilder.java:295) ~[jjwt-0.9.1.jar:0.9.1]\r\n\t\tat com.easydefi.authserverjwt.security.JwtTokenUtil.doGenerateToken(JwtTokenUtil.java:87) ~[classes/:na]\r\n\t\tat com.easydefi.authserverjwt.security.JwtTokenUtil.generateToken(JwtTokenUtil.java:72) ~[classes/:na]\r\n\t\tat com.easydefi.authserverjwt.controller.JwtAuthenticationRestController.createAuthenticationToken(JwtAuthenticationRestController.java:60) ~[classes/:na]\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]\r\n\t\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\t\tat java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]\r\n\t\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.12.jar:5.3.12]\r\n\t\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.12.jar:5.3.12]\r\n\t\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.12.jar:5.3.12]\r\n\t\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.12.jar:5.3.12]\r\n\t\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.12.jar:5.3.12]\r\n\t\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.12.jar:5.3.12]\r\n\t\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.12.jar:5.3.12]\r\n\t\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.12.jar:5.3.12]\r\n\t\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.12.jar:5.3.12]\r\n\t\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.12.jar:5.3.12]\r\n\t\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:681) ~[tomcat-embed-core-9.0.54.jar:4.0.FR]\r\n\t\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.12.jar:5.3.12]\r\n\t\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.54.jar:4.0.FR]\r\n\t\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n\t\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n\t\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.54.jar:9.0.54]\r\n\t\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n\t\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n\t\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:204) ~[spring-security-web-5.5.3.jar:5.5.3]\r\n\t\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) ~[spring-security-web-5.5.3.jar:5.5.3]\r\n\t\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358) ~[spring-web-5.3.12.jar:5.3.12]\r\n\t\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271) ~[spring-web-5.3.12.jar:5.3.12]\r\n\t\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n\t\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n\t\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.12.jar:5.3.12]\r\n\t\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.12.jar:5.3.12]\r\n\t\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n\t\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n\t\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.12.jar:5.3.12]\r\n\t\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.12.jar:5.3.12]\r\n\t\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n\t\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n\t\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.12.jar:5.3.12]\r\n\t\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.12.jar:5.3.12]\r\n\t\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n\t\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n\t\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n\t\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n\t\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n\t\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n\t\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n\t\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n\t\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n\t\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n\t\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n\t\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n\t\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1722) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n\t\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n\t\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n\t\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n\t\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n\t\tat java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]\r\n\r\nWhy? What am I missing? How can I try to solve this issue?\r\n\r\n\r\n\r\n\r\n\r\n","title":"Why am I obtaining this exception trying to build a JWT token? java.lang.NoClassDefFoundError: javax/xml/bind/DatatypeConverter","body":"<p>I am working on a Spring Boot project implementing JWT authentication but I am finding some difficulties. It is based on an example found into a Udemy course that I am trying to adapt to my specific use case. It is composed by the following two microservices:</p>\n<ol>\n<li><p><strong>GET-USER-WS:</strong> this is the microservice that obtains user information from the database.</p>\n</li>\n<li><p><strong>AuthServerJWT:</strong> this microservice calls the <strong>GET-USER-WS</strong> in order to obtain user information and build the JWT token that will be used by other microservices.</p>\n</li>\n</ol>\n<p>Basically this second <strong>AuthServerJWT</strong> contains the following <strong>JwtAuthenticationRestController</strong> controller class:</p>\n<pre><code>@RestController\n//@CrossOrigin(origins = &quot;http://localhost:4200&quot;)\npublic class JwtAuthenticationRestController  {\n\n    @Value(&quot;${sicurezza.header}&quot;)\n    private String tokenHeader;\n\n    @Autowired\n    private AuthenticationManager authenticationManager;\n\n    @Autowired\n    private JwtTokenUtil jwtTokenUtil;\n\n    @Autowired\n    @Qualifier(&quot;customUserDetailsService&quot;)\n    private UserDetailsService userDetailsService;\n    \n    private static final Logger logger = LoggerFactory.getLogger(JwtAuthenticationRestController.class);\n\n    @PostMapping(value = &quot;${sicurezza.uri}&quot;)\n    public ResponseEntity&lt;?&gt; createAuthenticationToken(@RequestBody JwtTokenRequest authenticationRequest)\n            throws AuthenticationException {\n        logger.info(&quot;Autenticazione e Generazione Token&quot;);\n\n        authenticate(authenticationRequest.getUsername(), authenticationRequest.getPassword());\n\n        final UserDetails userDetails = userDetailsService.loadUserByUsername(authenticationRequest.getUsername());\n\n        final String token = jwtTokenUtil.generateToken(userDetails);\n        \n        logger.warn(String.format(&quot;Token %s&quot;, token));\n\n        return ResponseEntity.ok(new JwtTokenResponse(token));\n    }\n\n    @RequestMapping(value = &quot;${sicurezza.uri}&quot;, method = RequestMethod.GET)\n    public ResponseEntity&lt;?&gt; refreshAndGetAuthenticationToken(HttpServletRequest request) \n            throws Exception \n    {\n        String authToken = request.getHeader(tokenHeader);\n        \n        if (authToken == null || authToken.length() &lt; 7)\n        {\n            throw new Exception(&quot;Token assente o non valido!&quot;);\n        }\n        \n        final String token = authToken.substring(7);\n        \n        if (jwtTokenUtil.canTokenBeRefreshed(token)) \n        {\n            String refreshedToken = jwtTokenUtil.refreshToken(token);\n            \n            return ResponseEntity.ok(new JwtTokenResponse(refreshedToken));\n        } \n        else \n        {\n            return ResponseEntity.badRequest().body(null);\n        }\n    }\n\n    @ExceptionHandler({ AuthenticationException.class })\n    public ResponseEntity&lt;String&gt; handleAuthenticationException(AuthenticationException e) \n    {\n        return ResponseEntity.status(HttpStatus.UNAUTHORIZED).body(e.getMessage());\n    }\n\n    private void authenticate(String username, String password) \n    {\n        Objects.requireNonNull(username);\n        Objects.requireNonNull(password);\n\n        try {   \n            /// ???\n            authenticationManager.authenticate(new UsernamePasswordAuthenticationToken(username, password));\n        } \n        catch (DisabledException e) \n        {\n            logger.warn(&quot;UTENTE DISABILITATO&quot;);\n            throw new AuthenticationException(&quot;UTENTE DISABILITATO&quot;, e);\n        } \n        catch (BadCredentialsException e) \n        {\n            logger.warn(&quot;CREDENZIALI NON VALIDE&quot;);\n            throw new AuthenticationException(&quot;CREDENZIALI NON VALIDE&quot;, e);\n        }\n    }\n}\n</code></pre>\n<p>AS you can see it contains two method: one to create a brand new JWT token and the other one to refresh an existing JWT token. Consider the <strong>createAuthenticationToken()</strong> used to create a new token.</p>\n<p>At this line:</p>\n<pre><code>final UserDetails userDetails = userDetailsService.loadUserByUsername(authenticationRequest.getUsername());\n</code></pre>\n<p>it call the <strong>loadUserByUsername()</strong> method defined in my <strong>CustomUserDetailsService</strong>. This method basically retrieve the user information calling a service of the **<strong>GET-USER-WS</strong> and build a <strong>UserDetails</strong> object (that is a Spring Security object, this one: <strong>org.springframework.security.core.userdetails.UserDetails</strong>).</p>\n<p>This is the code of this method:</p>\n<pre><code>@Override\npublic UserDetails loadUserByUsername(String UserId) throws UsernameNotFoundException {\n    \n    String ErrMsg = &quot;&quot;;\n    \n    if (UserId == null || UserId.length() &lt; 2) {\n        ErrMsg = &quot;Nome utente assente o non valido&quot;;\n        \n        logger.warn(ErrMsg);\n        \n        throw new UsernameNotFoundException(ErrMsg); \n    } \n    \n    User user = this.GetHttpValue(UserId);\n    \n    if (user == null) {\n        ErrMsg = String.format(&quot;User %s not found!!&quot;, UserId);\n        \n        logger.warn(ErrMsg);\n        \n        throw new UsernameNotFoundException(ErrMsg);\n    }\n    \n    UserBuilder builder = null;\n    \n    builder = org.springframework.security.core.userdetails.User.withUsername(Integer.toString(user.getId()));\n    builder.password(user.getPswd());\n    \n    String[] operations = user.getUserTypes().stream()\n            .map(UserType::getOperations)\n            .flatMap(Set::stream)\n            .map(Operation::getName)\n            .distinct()\n            .toArray(String[]::new);\n    \n    builder.authorities(operations);\n    \n    \n    return builder.build();\n    \n}\n</code></pre>\n<p>This line simply execute the <strong>GetHttpValue()</strong> method used to perform the call with the RestTemplate in order to retrieve an <strong>User</strong> object containing the details of the user:</p>\n<pre><code>User user = this.GetHttpValue(UserId);\n</code></pre>\n<p>So, come back to the first <strong>createAuthenticationToken()</strong> of the previous <strong>JwtAuthenticationRestController</strong> controller class. My problem is that it retrieve this <strong>UserDetails userDetails</strong> object, at this line:</p>\n<pre><code>final UserDetails userDetails = userDetailsService.loadUserByUsername(authenticationRequest.getUsername());\n</code></pre>\n<p>using the deubugger this is the content of my <strong>userDetails</strong> instance:</p>\n<pre><code>org.springframework.security.core.userdetails.User [Username=50, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ADMIN]]\n</code></pre>\n<p>it seems to me correct (except the <strong>Username</strong> field that contains the ID of the user and not the username...I will change in a second time, it should not be the problem).</p>\n<p>Then it perform this line in order to generate the JWT token starting from this <strong>userDetails</strong> object:</p>\n<pre><code>final String token = jwtTokenUtil.generateToken(userDetails);\n</code></pre>\n<p>This is the code of the <strong>generateToken()</strong> method defined into a class named <strong>JwtTokenUtil</strong>:</p>\n<pre><code>public String generateToken(UserDetails userDetails) {\n    Map&lt;String, Object&gt; claims = new HashMap&lt;&gt;();\n    return doGenerateToken(claims, userDetails);\n}\n</code></pre>\n<p>It first create an empty HashMap and then call the <strong>doGenerateToken()</strong>, this is the code:</p>\n<pre><code>private String doGenerateToken(Map&lt;String, Object&gt; claims, UserDetails userDetails) {\n    final Date createdDate = clock.now();\n    final Date expirationDate = calculateExpirationDate(createdDate);\n\n    return Jwts.builder()\n            .setClaims(claims)\n            .setSubject(userDetails.getUsername())\n            .claim(&quot;authorities&quot;, userDetails.getAuthorities().stream().map(GrantedAuthority::getAuthority).collect(Collectors.toList()))\n            .setIssuedAt(createdDate)\n            .setExpiration(expirationDate)\n            .signWith(SignatureAlgorithm.HS512, jwtConfig.getSecret().getBytes())\n            .compact();\n}\n</code></pre>\n<p>It correctly create the <strong>expirationDate</strong> date. Then at the end it throws the following exception (using the deubbugger it seems to me that it is thrown on the <strong>compact()</strong> execution):\nThe problem is that when this line is executed I am obtaining the following exception:</p>\n<pre><code>java.lang.NoClassDefFoundError: javax/xml/bind/DatatypeConverter\n    at io.jsonwebtoken.impl.Base64Codec.encode(Base64Codec.java:21) ~[jjwt-0.9.1.jar:0.9.1]\n    at io.jsonwebtoken.impl.Base64UrlCodec.encode(Base64UrlCodec.java:22) ~[jjwt-0.9.1.jar:0.9.1]\n    at io.jsonwebtoken.impl.DefaultJwtBuilder.base64UrlEncode(DefaultJwtBuilder.java:349) ~[jjwt-0.9.1.jar:0.9.1]\n    at io.jsonwebtoken.impl.DefaultJwtBuilder.compact(DefaultJwtBuilder.java:295) ~[jjwt-0.9.1.jar:0.9.1]\n    at com.easydefi.authserverjwt.security.JwtTokenUtil.doGenerateToken(JwtTokenUtil.java:87) ~[classes/:na]\n    at com.easydefi.authserverjwt.security.JwtTokenUtil.generateToken(JwtTokenUtil.java:72) ~[classes/:na]\n    at com.easydefi.authserverjwt.controller.JwtAuthenticationRestController.createAuthenticationToken(JwtAuthenticationRestController.java:60) ~[classes/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.12.jar:5.3.12]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.12.jar:5.3.12]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.12.jar:5.3.12]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.12.jar:5.3.12]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.12.jar:5.3.12]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.12.jar:5.3.12]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.12.jar:5.3.12]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.12.jar:5.3.12]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.12.jar:5.3.12]\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.12.jar:5.3.12]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) ~[tomcat-embed-core-9.0.54.jar:4.0.FR]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.12.jar:5.3.12]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.54.jar:4.0.FR]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.54.jar:9.0.54]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:204) ~[spring-security-web-5.5.3.jar:5.5.3]\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) ~[spring-security-web-5.5.3.jar:5.5.3]\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358) ~[spring-web-5.3.12.jar:5.3.12]\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271) ~[spring-web-5.3.12.jar:5.3.12]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.12.jar:5.3.12]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.12.jar:5.3.12]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.12.jar:5.3.12]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.12.jar:5.3.12]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.12.jar:5.3.12]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.12.jar:5.3.12]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1722) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]\n</code></pre>\n<p>Why? What am I missing? How can I try to solve this issue?</p>\n"},{"tags":["java","android","youtube","android-tv"],"comments":[{"owner":{"account_id":13962640,"reputation":723,"user_id":10086742,"display_name":"mahdi"},"score":0,"creation_date":1697613005,"post_id":77095006,"comment_id":136300176,"body_markdown":"Youtube uses different codec for videos, and your device may not support decoding some of the codes with hardware decoder. You need to first check the video codecs and the your device capabilities to make sure that the decoding is not done in software.","body":"Youtube uses different codec for videos, and your device may not support decoding some of the codes with hardware decoder. You need to first check the video codecs and the your device capabilities to make sure that the decoding is not done in software."}],"owner":{"account_id":12284483,"reputation":1,"user_id":8964617,"display_name":"Khaled Msouti"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694631572,"creation_date":1694590861,"question_id":77095006,"body_markdown":"When I try to run a YouTube video inside Android TV application the video is running so roughly. \r\n\r\nBefore 3 months I was using YouTube Android API to run the video on the same device but this library is fully deprecated now. \r\n\r\nMy code is the very base code from YouTube API (iframe) page: \r\n```\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html&gt;\r\n  &lt;body&gt;\r\n    &lt;!-- 1. The &lt;iframe&gt; (and video player) will replace this &lt;div&gt; tag. --&gt;\r\n    &lt;div id=&quot;player&quot;&gt;&lt;/div&gt;\r\n\r\n    &lt;script&gt;\r\n      // 2. This code loads the IFrame Player API code asynchronously.\r\n      var tag = document.createElement(&#39;script&#39;);\r\n\r\n      tag.src = &quot;https://www.youtube.com/iframe_api&quot;;\r\n      var firstScriptTag = document.getElementsByTagName(&#39;script&#39;)[0];\r\n      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\r\n\r\n      // 3. This function creates an &lt;iframe&gt; (and YouTube player)\r\n      //    after the API code downloads.\r\n      var player;\r\n      function onYouTubeIframeAPIReady() {\r\n        player = new YT.Player(&#39;player&#39;, {\r\n          height: &#39;390&#39;,\r\n          width: &#39;640&#39;,\r\n          videoId: &#39;M7lc1UVf-VE&#39;,\r\n          playerVars: {\r\n            &#39;playsinline&#39;: 1\r\n          },\r\n          events: {\r\n            &#39;onReady&#39;: onPlayerReady,\r\n            &#39;onStateChange&#39;: onPlayerStateChange\r\n          }\r\n        });\r\n      }\r\n\r\n      // 4. The API will call this function when the video player is ready.\r\n      function onPlayerReady(event) {\r\n        event.target.playVideo();\r\n      }\r\n\r\n      // 5. The API calls this function when the player&#39;s state changes.\r\n      //    The function indicates that when playing a video (state=1),\r\n      //    the player should play for six seconds and then stop.\r\n      var done = false;\r\n      function onPlayerStateChange(event) {\r\n        if (event.data == YT.PlayerState.PLAYING &amp;&amp; !done) {\r\n          setTimeout(stopVideo, 6000);\r\n          done = true;\r\n        }\r\n      }\r\n      function stopVideo() {\r\n        player.stopVideo();\r\n      }\r\n    &lt;/script&gt;\r\n  &lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\nthen I load this code inside a webview like this: \r\n\r\n\r\n```\r\n WebView videoView = findViewById(R.id.video);\r\n        videoView.getSettings().setJavaScriptEnabled(true);\r\n        videoView.getSettings().setMediaPlaybackRequiresUserGesture(false);\r\n        videoView.setWebChromeClient(new WebChromeClient());\r\n        videoView.getSettings().setCacheMode(WebSettings.LOAD_DEFAULT);\r\n\r\n        String html = getPageHTML();\r\n        videoView.loadDataWithBaseURL(null, html, &quot;text/html&quot;, &quot;utf-8&quot;, null);\r\n\r\n```\r\n\r\nwhere html is the previous code \r\n\r\nNOTES: \r\n1- I have tried 3rd party libraries and the same result is happening every single time \r\n2- In manifest `android:hardwareAccelerated=&quot;true&quot;`\r\n\r\n\r\nhope you can help me to find a way to run the video smoothly","title":"Run YouTube video smoothly in Android TV","body":"<p>When I try to run a YouTube video inside Android TV application the video is running so roughly.</p>\n<p>Before 3 months I was using YouTube Android API to run the video on the same device but this library is fully deprecated now.</p>\n<p>My code is the very base code from YouTube API (iframe) page:</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;body&gt;\n    &lt;!-- 1. The &lt;iframe&gt; (and video player) will replace this &lt;div&gt; tag. --&gt;\n    &lt;div id=&quot;player&quot;&gt;&lt;/div&gt;\n\n    &lt;script&gt;\n      // 2. This code loads the IFrame Player API code asynchronously.\n      var tag = document.createElement('script');\n\n      tag.src = &quot;https://www.youtube.com/iframe_api&quot;;\n      var firstScriptTag = document.getElementsByTagName('script')[0];\n      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\n\n      // 3. This function creates an &lt;iframe&gt; (and YouTube player)\n      //    after the API code downloads.\n      var player;\n      function onYouTubeIframeAPIReady() {\n        player = new YT.Player('player', {\n          height: '390',\n          width: '640',\n          videoId: 'M7lc1UVf-VE',\n          playerVars: {\n            'playsinline': 1\n          },\n          events: {\n            'onReady': onPlayerReady,\n            'onStateChange': onPlayerStateChange\n          }\n        });\n      }\n\n      // 4. The API will call this function when the video player is ready.\n      function onPlayerReady(event) {\n        event.target.playVideo();\n      }\n\n      // 5. The API calls this function when the player's state changes.\n      //    The function indicates that when playing a video (state=1),\n      //    the player should play for six seconds and then stop.\n      var done = false;\n      function onPlayerStateChange(event) {\n        if (event.data == YT.PlayerState.PLAYING &amp;&amp; !done) {\n          setTimeout(stopVideo, 6000);\n          done = true;\n        }\n      }\n      function stopVideo() {\n        player.stopVideo();\n      }\n    &lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>then I load this code inside a webview like this:</p>\n<pre><code> WebView videoView = findViewById(R.id.video);\n        videoView.getSettings().setJavaScriptEnabled(true);\n        videoView.getSettings().setMediaPlaybackRequiresUserGesture(false);\n        videoView.setWebChromeClient(new WebChromeClient());\n        videoView.getSettings().setCacheMode(WebSettings.LOAD_DEFAULT);\n\n        String html = getPageHTML();\n        videoView.loadDataWithBaseURL(null, html, &quot;text/html&quot;, &quot;utf-8&quot;, null);\n\n</code></pre>\n<p>where html is the previous code</p>\n<p>NOTES:\n1- I have tried 3rd party libraries and the same result is happening every single time\n2- In manifest <code>android:hardwareAccelerated=&quot;true&quot;</code></p>\n<p>hope you can help me to find a way to run the video smoothly</p>\n"},{"tags":["java","keycloak","openid-connect","keycloak-services","keycloak-rest-api"],"comments":[{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1694639384,"post_id":77099649,"comment_id":135919467,"body_markdown":"You&#39;ve &quot;not implemented spring security with keycloak&quot;. OK, but how is it implemented, then?","body":"You&#39;ve &quot;not implemented spring security with keycloak&quot;. OK, but how is it implemented, then?"},{"owner":{"account_id":9656555,"reputation":221,"user_id":7165917,"accept_rate":56,"display_name":"jane"},"score":0,"creation_date":1694895168,"post_id":77099649,"comment_id":135952465,"body_markdown":"@ch4mp - when the login fails, event listener is still able to print userId and username as part of the event, &quot;login_error&quot;, I am trying to get that userId &amp; userName.","body":"@ch4mp - when the login fails, event listener is still able to print userId and username as part of the event, &quot;login_error&quot;, I am trying to get that userId &amp; userName."},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1694912089,"post_id":77099649,"comment_id":135953665,"body_markdown":"You don&#39;t answer to my question. We have absolutely no info about your security configuration. How exactly are we supposed to explain how your login machanism behaves?","body":"You don&#39;t answer to my question. We have absolutely no info about your security configuration. How exactly are we supposed to explain how your login machanism behaves?"},{"owner":{"account_id":9656555,"reputation":221,"user_id":7165917,"accept_rate":56,"display_name":"jane"},"score":0,"creation_date":1694937108,"post_id":77099649,"comment_id":135955100,"body_markdown":"@ch4mp - application acts as a oAuth2-client, with keycloak configured to act as auth-server.","body":"@ch4mp - application acts as a oAuth2-client, with keycloak configured to act as auth-server."}],"owner":{"account_id":9656555,"reputation":221,"user_id":7165917,"accept_rate":56,"display_name":"jane"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694631183,"creation_date":1694629714,"question_id":77099649,"body_markdown":"I have not implemented spring security with keycloak. So, SecurityContext is null. I can see that eventlisteners are able to pull the userID and userName. I am implementing a custom logging mechanism, where I am intercepting every httpServletRequest to pull the attributes of the httpRequest. However, I am not able to find a way to stamp the userID and userName to the attributes of every httpRequest. I can see that userModel holds all the uer Attributes. Is there a way to fetch the userID and UserName and add them to my logging mechanism ?","title":"Pull user details from UserModel in Keycloak","body":"<p>I have not implemented spring security with keycloak. So, SecurityContext is null. I can see that eventlisteners are able to pull the userID and userName. I am implementing a custom logging mechanism, where I am intercepting every httpServletRequest to pull the attributes of the httpRequest. However, I am not able to find a way to stamp the userID and userName to the attributes of every httpRequest. I can see that userModel holds all the uer Attributes. Is there a way to fetch the userID and UserName and add them to my logging mechanism ?</p>\n"},{"tags":["java","get","apache-camel","quarkus"],"comments":[{"owner":{"account_id":11777559,"reputation":1172,"user_id":8627215,"display_name":"James Netherton"},"score":0,"creation_date":1694673260,"post_id":77099693,"comment_id":135922579,"body_markdown":"From the stack trace it seems like you are trying to produce to an HTTP endpoint but have not specified either a host or scheme in the URL.","body":"From the stack trace it seems like you are trying to produce to an HTTP endpoint but have not specified either a host or scheme in the URL."}],"owner":{"account_id":16016597,"reputation":743,"user_id":11559150,"display_name":"Cesar Justo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694631050,"creation_date":1694630166,"question_id":77099693,"body_markdown":" I am new with Camel in Quarkus and I am working on an API that has two GET Methods with a difference in the parameters sent, one with a specific parameter that is passed and another through QueryParam\r\n\r\nExample:\r\n\r\n- https://localhost:8084/userProfile/v3.6/users/{userid} ---&gt; UniqueParame\r\n- https://localhost:8084/userProfile/v3.6/users?identity1&amp;identity2 --&gt; QueryParam\r\n\r\nI am configuring the routes in my ResRoute in the following way, however, it is giving me an error:\r\n\r\n        rest(&quot;userProfile/v3.6/&quot;)\r\n                .get(&quot;/users/{user_id}&quot;).to(&quot;direct:/{user_id}&quot;)\r\n                    .outType(UserProfile.class)\r\n                    .param().name(&quot;UserProfile&quot;).type(body).description(&quot;parametro de salida&quot;).required(true)\r\n                    .endParam()\r\n                    .to(&quot;direct:userIdParam&quot;);\r\n\r\n        rest(&quot;userProfile/v3.6/&quot;)\r\n                .get(&quot;/users?&quot;).to(&quot;direct:/users?&quot;)\r\n                .outType(UserProfile.class)\r\n                .param().name(&quot;UserProfile&quot;).type(body).description(&quot;parametro de salida&quot;).required(true)\r\n                .endParam()\r\n                .to(&quot;direct:usersQueryParam&quot;);\r\n\r\nThe error it gives me is the following:\r\n\r\n    ---------------------------------------------------------------------------------------------------------------------------------------: java.lang.IllegalArgumentException: Invalid u\r\n    rl: /userProfile/v3.6/users/userProfile/v3.6/users?identity=+584242222222. If you are forwarding/bridging http endpoints, then enable the bridgeEndpoint option on the endpoint: https://10.162.128.94:30000/api/findCustomerDocumentBySubscriberId?bridgeEndpoint=false\r\n            at org.apache.camel.component.http.HttpProducer.createMethod(HttpProducer.java:643)\r\n            at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:162)\r\n            at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:66)\r\n            at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:172)\r\n            at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:392)\r\n            at org.apache.camel.processor.Pipeline$PipelineTask.run(Pipeline.java:104)\r\n            at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:181)\r\n            at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)\r\n            at org.apache.camel.processor.Pipeline.process(Pipeline.java:165)\r\n            at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:392)\r\n            at org.apache.camel.component.platform.http.vertx.VertxPlatformHttpConsumer.lambda$handleRequest$2(VertxPlatformHttpConsumer.java:201)\r\n            at io.vertx.core.impl.ContextBase.lambda$null$0(ContextBase.java:137)\r\n            at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:264)\r\n            at io.vertx.core.impl.ContextBase.lambda$executeBlocking$1(ContextBase.java:135)\r\n            at org.jboss.threads.ContextHandler$1.runWith(ContextHandler.java:18)\r\n            at org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2449)\r\n            at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1478)\r\n            at org.jboss.threads.DelegatingRunnable.run(DelegatingRunnable.java:29)\r\n            at org.jboss.threads.ThreadLocalResettingRunnable.run(ThreadLocalResettingRunnable.java:29)\r\n            at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n            at java.base/java.lang.Thread.run(Thread.java:833)\r\n\r\nWhat have I configured incorrectly that is why I get this error?\r\n\r\n","title":"Apache Camel with 2 GET operations (Parameter and QueryParams)","body":"<p>I am new with Camel in Quarkus and I am working on an API that has two GET Methods with a difference in the parameters sent, one with a specific parameter that is passed and another through QueryParam</p>\n<p>Example:</p>\n<ul>\n<li>https://localhost:8084/userProfile/v3.6/users/{userid} ---&gt; UniqueParame</li>\n<li>https://localhost:8084/userProfile/v3.6/users?identity1&amp;identity2 --&gt; QueryParam</li>\n</ul>\n<p>I am configuring the routes in my ResRoute in the following way, however, it is giving me an error:</p>\n<pre><code>    rest(&quot;userProfile/v3.6/&quot;)\n            .get(&quot;/users/{user_id}&quot;).to(&quot;direct:/{user_id}&quot;)\n                .outType(UserProfile.class)\n                .param().name(&quot;UserProfile&quot;).type(body).description(&quot;parametro de salida&quot;).required(true)\n                .endParam()\n                .to(&quot;direct:userIdParam&quot;);\n\n    rest(&quot;userProfile/v3.6/&quot;)\n            .get(&quot;/users?&quot;).to(&quot;direct:/users?&quot;)\n            .outType(UserProfile.class)\n            .param().name(&quot;UserProfile&quot;).type(body).description(&quot;parametro de salida&quot;).required(true)\n            .endParam()\n            .to(&quot;direct:usersQueryParam&quot;);\n</code></pre>\n<p>The error it gives me is the following:</p>\n<pre><code>---------------------------------------------------------------------------------------------------------------------------------------: java.lang.IllegalArgumentException: Invalid u\nrl: /userProfile/v3.6/users/userProfile/v3.6/users?identity=+584242222222. If you are forwarding/bridging http endpoints, then enable the bridgeEndpoint option on the endpoint: https://10.162.128.94:30000/api/findCustomerDocumentBySubscriberId?bridgeEndpoint=false\n        at org.apache.camel.component.http.HttpProducer.createMethod(HttpProducer.java:643)\n        at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:162)\n        at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:66)\n        at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:172)\n        at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:392)\n        at org.apache.camel.processor.Pipeline$PipelineTask.run(Pipeline.java:104)\n        at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:181)\n        at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)\n        at org.apache.camel.processor.Pipeline.process(Pipeline.java:165)\n        at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:392)\n        at org.apache.camel.component.platform.http.vertx.VertxPlatformHttpConsumer.lambda$handleRequest$2(VertxPlatformHttpConsumer.java:201)\n        at io.vertx.core.impl.ContextBase.lambda$null$0(ContextBase.java:137)\n        at io.vertx.core.impl.ContextInternal.dispatch(ContextInternal.java:264)\n        at io.vertx.core.impl.ContextBase.lambda$executeBlocking$1(ContextBase.java:135)\n        at org.jboss.threads.ContextHandler$1.runWith(ContextHandler.java:18)\n        at org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2449)\n        at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1478)\n        at org.jboss.threads.DelegatingRunnable.run(DelegatingRunnable.java:29)\n        at org.jboss.threads.ThreadLocalResettingRunnable.run(ThreadLocalResettingRunnable.java:29)\n        at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n        at java.base/java.lang.Thread.run(Thread.java:833)\n</code></pre>\n<p>What have I configured incorrectly that is why I get this error?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":1088874,"reputation":61123,"user_id":1083957,"accept_rate":93,"display_name":"azizbekian"},"score":0,"creation_date":1512637720,"post_id":47691310,"comment_id":82341557,"body_markdown":"Which warning ?","body":"Which warning ?"},{"owner":{"account_id":5758152,"reputation":508,"user_id":4545369,"accept_rate":67,"display_name":"StarterPack"},"score":3,"creation_date":1512638114,"post_id":47691310,"comment_id":82341822,"body_markdown":"It seems like the problem is not the fact that you used getString but that you should not be using hardware ids in your app at all. See: https://developer.android.com/training/articles/user-data-ids.html","body":"It seems like the problem is not the fact that you used getString but that you should not be using hardware ids in your app at all. See: <a href=\"https://developer.android.com/training/articles/user-data-ids.html\" rel=\"nofollow noreferrer\">developer.android.com/training/articles/user-data-ids.html</a>"},{"owner":{"account_id":8371279,"reputation":696,"user_id":6286328,"accept_rate":50,"display_name":"FabioR"},"score":1,"creation_date":1603897224,"post_id":47691310,"comment_id":114182288,"body_markdown":"@StarterPack actually the deal is whether the id is resettable or not (ids like the IMEI are not resettable, ANDROID_ID is through factory reset). So I believe it is possible to use ANDROID_ID, but I find it weird that this warning is displayed in AS.","body":"@StarterPack actually the deal is whether the id is resettable or not (ids like the IMEI are not resettable, ANDROID_ID is through factory reset). So I believe it is possible to use ANDROID_ID, but I find it weird that this warning is displayed in AS."}],"answers":[{"comments":[{"owner":{"account_id":8862722,"reputation":245394,"user_id":6618622,"display_name":"CopsOnRoad"},"score":12,"creation_date":1531056187,"post_id":47691574,"comment_id":89443927,"body_markdown":"So, what is the solution now, what should be used instead of this ID?","body":"So, what is the solution now, what should be used instead of this ID?"},{"owner":{"account_id":8405311,"reputation":996,"user_id":6308959,"display_name":"user_MGU"},"score":2,"creation_date":1548668521,"post_id":47691574,"comment_id":95608990,"body_markdown":"Again! What should be used instead of this ID?","body":"Again! What should be used instead of this ID?"},{"owner":{"account_id":3175248,"reputation":7363,"user_id":5457878,"accept_rate":67,"display_name":"gi097"},"score":7,"creation_date":1548686703,"post_id":47691574,"comment_id":95619296,"body_markdown":"Well, there is nothing wrong by using the `Secure.ANDROID_ID`. It&#39;s just a warning. I would say, if you need an id for Analytics, use `InstanceId.getId()`, for advertising use `AdvertisingIdClient.Info.getId()` and when both don&#39;t fit your needs, use `Secure.ANDROID_ID`. Keep in mind that a rooted user can change this id.","body":"Well, there is nothing wrong by using the <code>Secure.ANDROID_ID</code>. It&#39;s just a warning. I would say, if you need an id for Analytics, use <code>InstanceId.getId()</code>, for advertising use <code>AdvertisingIdClient.Info.getId()</code> and when both don&#39;t fit your needs, use <code>Secure.ANDROID_ID</code>. Keep in mind that a rooted user can change this id."},{"owner":{"account_id":1602979,"reputation":8003,"user_id":1483676,"accept_rate":56,"display_name":"cubuspl42"},"score":3,"creation_date":1599040652,"post_id":47691574,"comment_id":112647887,"body_markdown":"To sum up: preferably use either one alternative or the other, and when you can&#39;t, then mute this warning (for example for a single method).","body":"To sum up: preferably use either one alternative or the other, and when you can&#39;t, then mute this warning (for example for a single method)."},{"owner":{"account_id":5855287,"reputation":723,"user_id":4612755,"accept_rate":75,"display_name":"Ezequiel Adrian"},"score":1,"creation_date":1662840880,"post_id":47691574,"comment_id":130100770,"body_markdown":"I think using this ID is valid if you want to ban a user for terms of service infringement.","body":"I think using this ID is valid if you want to ban a user for terms of service infringement."},{"owner":{"account_id":14213540,"reputation":59,"user_id":10268044,"display_name":"Deerjon"},"score":4,"creation_date":1666367983,"post_id":47691574,"comment_id":130928170,"body_markdown":"We are using this ID to distinguish between user&#39;s devices. As we are keeping FCM tokens on server, we need to know if new token is actually a new device, or is it an old one and should be replaced. We do not want to end up with dozens of tokens for the same user having a single device. Is there a better solution to such problem?","body":"We are using this ID to distinguish between user&#39;s devices. As we are keeping FCM tokens on server, we need to know if new token is actually a new device, or is it an old one and should be replaced. We do not want to end up with dozens of tokens for the same user having a single device. Is there a better solution to such problem?"}],"tags":[],"owner":{"account_id":3175248,"reputation":7363,"user_id":5457878,"accept_rate":67,"display_name":"gi097"},"comment_count":6,"down_vote_count":1,"up_vote_count":66,"is_accepted":true,"score":65,"last_activity_date":1512638956,"creation_date":1512638468,"answer_id":47691574,"question_id":47691310,"body_markdown":"The full warning says:\n&gt; Using these device identifiers is not recommended other\n&gt; than for high value fraud prevention and advanced telephony use-cases.\n&gt; For advertising use-cases, use AdvertisingIdClient$Info#getId and for\n&gt; analytics, use InstanceId#getId.\n&gt;\n&gt; More info:\n&gt; https://developer.android.com/training/articles/user-data-ids.html\n\nI think Android does not recommend using this value, since it&#39;s a permanent unique id, which can be used to track your user, and he or she can&#39;t change this id or prevent you to read it. The other options given in the warning respects your user&#39;s wishes. That&#39;s why Android recommend you to use that.\n\nIt really depends on what you are going to do with that id. Privacy is a sensitive thing these days.\n\nAlso check this:\n\n&gt; ...you must abide by a user’s ‘Opt out of interest-based advertising’\n&gt; or &#39;Opt out of Ads Personalization&#39; setting. If a user has enabled\n&gt; this setting, you may not use the advertising identifier for creating\n&gt; user profiles for advertising purposes or for targeting users with\n&gt; personalized advertising. Allowed activities include contextual\n&gt; advertising, frequency capping, conversion tracking, reporting and\n&gt; security and fraud detection.\n\nSource: https://developer.android.com/training/articles/user-data-ids.html\n","title":"Why is &quot;using getString() to get device identifiers&quot; not recommended?","body":"<p>The full warning says:</p>\n<blockquote>\n<p>Using these device identifiers is not recommended other\nthan for high value fraud prevention and advanced telephony use-cases.\nFor advertising use-cases, use AdvertisingIdClient$Info#getId and for\nanalytics, use InstanceId#getId.</p>\n<p>More info:\n<a href=\"https://developer.android.com/training/articles/user-data-ids.html\" rel=\"noreferrer\">https://developer.android.com/training/articles/user-data-ids.html</a></p>\n</blockquote>\n<p>I think Android does not recommend using this value, since it's a permanent unique id, which can be used to track your user, and he or she can't change this id or prevent you to read it. The other options given in the warning respects your user's wishes. That's why Android recommend you to use that.</p>\n<p>It really depends on what you are going to do with that id. Privacy is a sensitive thing these days.</p>\n<p>Also check this:</p>\n<blockquote>\n<p>...you must abide by a user’s ‘Opt out of interest-based advertising’\nor 'Opt out of Ads Personalization' setting. If a user has enabled\nthis setting, you may not use the advertising identifier for creating\nuser profiles for advertising purposes or for targeting users with\npersonalized advertising. Allowed activities include contextual\nadvertising, frequency capping, conversion tracking, reporting and\nsecurity and fraud detection.</p>\n</blockquote>\n<p>Source: <a href=\"https://developer.android.com/training/articles/user-data-ids.html\" rel=\"noreferrer\">https://developer.android.com/training/articles/user-data-ids.html</a></p>\n"},{"tags":[],"owner":{"account_id":5442731,"reputation":656,"user_id":4330343,"display_name":"dicarlomagnus"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694630683,"creation_date":1694630683,"answer_id":77099741,"question_id":47691310,"body_markdown":"The warning you&#39;re seeing is related to the use of `Settings.Secure.getString()` to retrieve device identifiers like the Android ID. This approach is generally not recommended for a few reasons:\r\n\r\n### Reasons:\r\n\r\n1. **Privacy Concerns**: Accessing device identifiers can pose privacy risks and may be against the policies of some app stores.\r\n  \r\n2. **Unreliable Identifiers**: The Android ID can change upon performing a factory reset, and it can be null for some devices. It&#39;s also possible for it to be easily altered on a rooted device.\r\n\r\n3. **Limited Use Cases**: Android IDs are not suitable for several use-cases like user authentication, analytics tracking, etc., due to their limitations.\r\n\r\n### Alternatives:\r\n\r\n1. **Instance ID**: This provides a unique identifier for each app instance and is suitable for most use-cases that need a unique identifier.\r\n\r\n    ```kotlin\r\n    FirebaseInstanceId.getInstance().instanceId\r\n        .addOnCompleteListener(OnCompleteListener { task -&gt;\r\n            if (!task.isSuccessful) {\r\n                return@OnCompleteListener\r\n            }\r\n            val token = task.result?.token\r\n        })\r\n    ```\r\n  \r\n2. **GUID (Globally Unique Identifier)**: If you just need a unique identifier for each installation or user session, consider generating a GUID upon app installation and storing it in `SharedPreferences`.\r\n\r\n    ```kotlin\r\n    val uniqueID = UUID.randomUUID().toString()\r\n    ```\r\n\r\n3. **Use Advertising ID for Advertising**: If you need the identifier for advertising purposes, consider using Google&#39;s Advertising ID, which is user-resettable and recommended for advertising use-cases.\r\n\r\n    ```kotlin\r\n    AdvertisingIdClient.getAdvertisingIdInfo(context).id\r\n    ```\r\n\r\n4. **Scoped Storage or App-Specific IDs**: For device identification that doesn&#39;t need to persist across app installations, you can use identifiers that are scoped to your app&#39;s storage or generate a random ID and store it in your app&#39;s local storage.\r\n\r\n### Code Refactoring:\r\n\r\nIf you decide to use Instance ID, your utility function could look like this:\r\n\r\n```kotlin\r\nclass DeviceUtils {\r\n    fun getDeviceId(context: Context, callback: (String) -&gt; Unit) {\r\n        FirebaseInstanceId.getInstance().instanceId\r\n            .addOnCompleteListener(OnCompleteListener { task -&gt;\r\n                if (task.isSuccessful) {\r\n                    callback(task.result?.token ?: &quot;&quot;)\r\n                }\r\n            })\r\n    }\r\n}\r\n```\r\n\r\nRemember to add the necessary Firebase dependencies to your `build.gradle` file.\r\n\r\nHappy coding!","title":"Why is &quot;using getString() to get device identifiers&quot; not recommended?","body":"<p>The warning you're seeing is related to the use of <code>Settings.Secure.getString()</code> to retrieve device identifiers like the Android ID. This approach is generally not recommended for a few reasons:</p>\n<h3>Reasons:</h3>\n<ol>\n<li><p><strong>Privacy Concerns</strong>: Accessing device identifiers can pose privacy risks and may be against the policies of some app stores.</p>\n</li>\n<li><p><strong>Unreliable Identifiers</strong>: The Android ID can change upon performing a factory reset, and it can be null for some devices. It's also possible for it to be easily altered on a rooted device.</p>\n</li>\n<li><p><strong>Limited Use Cases</strong>: Android IDs are not suitable for several use-cases like user authentication, analytics tracking, etc., due to their limitations.</p>\n</li>\n</ol>\n<h3>Alternatives:</h3>\n<ol>\n<li><p><strong>Instance ID</strong>: This provides a unique identifier for each app instance and is suitable for most use-cases that need a unique identifier.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>FirebaseInstanceId.getInstance().instanceId\n    .addOnCompleteListener(OnCompleteListener { task -&gt;\n        if (!task.isSuccessful) {\n            return@OnCompleteListener\n        }\n        val token = task.result?.token\n    })\n</code></pre>\n</li>\n<li><p><strong>GUID (Globally Unique Identifier)</strong>: If you just need a unique identifier for each installation or user session, consider generating a GUID upon app installation and storing it in <code>SharedPreferences</code>.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val uniqueID = UUID.randomUUID().toString()\n</code></pre>\n</li>\n<li><p><strong>Use Advertising ID for Advertising</strong>: If you need the identifier for advertising purposes, consider using Google's Advertising ID, which is user-resettable and recommended for advertising use-cases.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>AdvertisingIdClient.getAdvertisingIdInfo(context).id\n</code></pre>\n</li>\n<li><p><strong>Scoped Storage or App-Specific IDs</strong>: For device identification that doesn't need to persist across app installations, you can use identifiers that are scoped to your app's storage or generate a random ID and store it in your app's local storage.</p>\n</li>\n</ol>\n<h3>Code Refactoring:</h3>\n<p>If you decide to use Instance ID, your utility function could look like this:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>class DeviceUtils {\n    fun getDeviceId(context: Context, callback: (String) -&gt; Unit) {\n        FirebaseInstanceId.getInstance().instanceId\n            .addOnCompleteListener(OnCompleteListener { task -&gt;\n                if (task.isSuccessful) {\n                    callback(task.result?.token ?: &quot;&quot;)\n                }\n            })\n    }\n}\n</code></pre>\n<p>Remember to add the necessary Firebase dependencies to your <code>build.gradle</code> file.</p>\n<p>Happy coding!</p>\n"}],"owner":{"account_id":8960180,"reputation":6051,"user_id":6683139,"accept_rate":85,"display_name":"Ege Kuzubasioglu"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30531,"favorite_count":0,"down_vote_count":2,"up_vote_count":98,"accepted_answer_id":47691574,"answer_count":2,"score":96,"last_activity_date":1694630683,"creation_date":1512637617,"question_id":47691310,"body_markdown":"I&#39;m trying to get my device ID to Logcat but Android Studio is giving me this warning. \r\n\r\n&gt; using getstring to get device identifiers is not recommended\r\n\r\n    String deviceID = Settings.Secure.getString(getApplicationContext().getContentResolver(),\r\n            Settings.Secure.ANDROID_ID);\r\n\r\nWhy is it not recommended?\r\n","title":"Why is &quot;using getString() to get device identifiers&quot; not recommended?","body":"<p>I'm trying to get my device ID to Logcat but Android Studio is giving me this warning. </p>\n\n<blockquote>\n  <p>using getstring to get device identifiers is not recommended</p>\n</blockquote>\n\n<pre><code>String deviceID = Settings.Secure.getString(getApplicationContext().getContentResolver(),\n        Settings.Secure.ANDROID_ID);\n</code></pre>\n\n<p>Why is it not recommended?</p>\n"},{"tags":["java","fonts"],"comments":[{"owner":{"account_id":2185299,"reputation":149,"user_id":1933832,"display_name":"Dhiren"},"score":0,"creation_date":1356689644,"post_id":14066525,"comment_id":19446197,"body_markdown":"Linux APAUTODNS1-1 2.6.32-202.el6.x86_64 #1 SMP Wed Sep 21 15:27:03 EDT 2011 x86_64 x86_64 x86_64 GNU/Linux\n2.6.32-202.el6.x86_64\njava version &quot;1.6.0_22&quot;\nOpenJDK Runtime Environment (IcedTea6 1.10.3) (rhel-1.40.1.10.3.el6-x86_64)\nOpenJDK 64-Bit Server VM (build 20.0-b11, mixed mode)\nServer version: Apache Tomcat/6.0.35\nServer built:   Nov 28 2011 11:20:06\nServer number:  6.0.35.0\nOS Name:        Linux\nOS Version:     2.6.32-202.el6.x86_64\nArchitecture:   amd64\nJVM Version:    1.6.0_22-b22\nJVM Vendor:     Sun Microsystems Inc.","body":"Linux APAUTODNS1-1 2.6.32-202.el6.x86_64 #1 SMP Wed Sep 21 15:27:03 EDT 2011 x86_64 x86_64 x86_64 GNU/Linux 2.6.32-202.el6.x86_64 java version &quot;1.6.0_22&quot; OpenJDK Runtime Environment (IcedTea6 1.10.3) (rhel-1.40.1.10.3.el6-x86_64) OpenJDK 64-Bit Server VM (build 20.0-b11, mixed mode) Server version: Apache Tomcat/6.0.35 Server built:   Nov 28 2011 11:20:06 Server number:  6.0.35.0 OS Name:        Linux OS Version:     2.6.32-202.el6.x86_64 Architecture:   amd64 JVM Version:    1.6.0_22-b22 JVM Vendor:     Sun Microsystems Inc."}],"answers":[{"comments":[{"owner":{"account_id":2185299,"reputation":149,"user_id":1933832,"display_name":"Dhiren"},"score":0,"creation_date":1356685508,"post_id":14066548,"comment_id":19444733,"body_markdown":"Hello Imran, Thanks for your reply. I have already tried it but it didn&#39;t work. Can you please tell me any other way in detail to solve it ?","body":"Hello Imran, Thanks for your reply. I have already tried it but it didn&#39;t work. Can you please tell me any other way in detail to solve it ?"},{"owner":{"account_id":184519,"reputation":22782,"user_id":420613,"accept_rate":87,"display_name":"Muhammad Imran Tariq"},"score":0,"creation_date":1356687242,"post_id":14066548,"comment_id":19445295,"body_markdown":"check your JDK. It might be an issue.","body":"check your JDK. It might be an issue."},{"owner":{"account_id":2185299,"reputation":149,"user_id":1933832,"display_name":"Dhiren"},"score":0,"creation_date":1356687923,"post_id":14066548,"comment_id":19445536,"body_markdown":"I also have uninstalld and again installed JDK. But it also didn&#39;t work.","body":"I also have uninstalld and again installed JDK. But it also didn&#39;t work."}],"tags":[],"owner":{"account_id":184519,"reputation":22782,"user_id":420613,"accept_rate":87,"display_name":"Muhammad Imran Tariq"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1356682174,"creation_date":1356682174,"answer_id":14066548,"question_id":14066525,"body_markdown":"Try putting same `Windows` fonts that are required for the application in `Linux` fonts directory.","title":"java.lang.Error: Probable fatal error:No fonts found","body":"<p>Try putting same <code>Windows</code> fonts that are required for the application in <code>Linux</code> fonts directory.</p>\n"},{"comments":[{"owner":{"account_id":143382,"reputation":2912,"user_id":351688,"accept_rate":91,"display_name":"A.W."},"score":0,"creation_date":1443428133,"post_id":19355276,"comment_id":53472887,"body_markdown":"Works. I also had to restart tomcat6.","body":"Works. I also had to restart tomcat6."},{"owner":{"account_id":5744167,"reputation":818,"user_id":4535836,"accept_rate":55,"display_name":"Vibin Guevara"},"score":0,"creation_date":1679581133,"post_id":19355276,"comment_id":133749814,"body_markdown":"If tested using java -jar command then the process needs to be stopped and re-run again to get it reflected.","body":"If tested using java -jar command then the process needs to be stopped and re-run again to get it reflected."}],"tags":[],"owner":{"account_id":1604214,"reputation":4524,"user_id":1484621,"accept_rate":70,"display_name":"Yu Jiaao"},"comment_count":2,"down_vote_count":1,"up_vote_count":20,"is_accepted":false,"score":19,"last_activity_date":1385737235,"creation_date":1381735472,"answer_id":19355276,"question_id":14066525,"body_markdown":"under Ubuntu you can install fonts by \r\n\r\n        sudo apt-get install ttf-dejavu\r\n\r\nor if you use CentOS, you can install fonts by\r\n\r\n        yum install dejavu*\r\n","title":"java.lang.Error: Probable fatal error:No fonts found","body":"<p>under Ubuntu you can install fonts by </p>\n\n<pre><code>    sudo apt-get install ttf-dejavu\n</code></pre>\n\n<p>or if you use CentOS, you can install fonts by</p>\n\n<pre><code>    yum install dejavu*\n</code></pre>\n"},{"comments":[{"owner":{"account_id":401525,"reputation":441,"user_id":768134,"display_name":"ericj"},"score":2,"creation_date":1545988458,"post_id":28330645,"comment_id":94750143,"body_markdown":"In CentOS 7, same result. Not only need to install dejavu* fonts, but also need to install fontconfig.","body":"In CentOS 7, same result. Not only need to install dejavu* fonts, but also need to install fontconfig."}],"tags":[],"owner":{"account_id":5736186,"reputation":51,"user_id":4530289,"display_name":"EnricoF"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1423081037,"creation_date":1423081037,"answer_id":28330645,"question_id":14066525,"body_markdown":"In my case (debian wheezy) installing the dejavu font does not solve the problem.\r\n\r\nI have solved after installing the fontconfig package \r\n\r\nsudo apt-get install fontconfig","title":"java.lang.Error: Probable fatal error:No fonts found","body":"<p>In my case (debian wheezy) installing the dejavu font does not solve the problem.</p>\n\n<p>I have solved after installing the fontconfig package </p>\n\n<p>sudo apt-get install fontconfig</p>\n"},{"tags":[],"owner":{"account_id":15889893,"reputation":11,"user_id":11465329,"display_name":"Fiskegubbe"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1557239407,"creation_date":1557239407,"answer_id":56024906,"question_id":14066525,"body_markdown":"Debian 9 Stretch\r\nInstall Fonts: sudo apt-get install ttf-dejavu\r\nInstall fontconfig: sudo apt-get install fontconfig\r\nRebuild the font cache: fc-cache -f -v\r\nRestart Tomcat\r\n\r\nWorks","title":"java.lang.Error: Probable fatal error:No fonts found","body":"<p>Debian 9 Stretch\nInstall Fonts: sudo apt-get install ttf-dejavu\nInstall fontconfig: sudo apt-get install fontconfig\nRebuild the font cache: fc-cache -f -v\nRestart Tomcat</p>\n\n<p>Works</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1694727365,"post_id":77099676,"comment_id":135933263,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77099676/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":29434392,"reputation":1,"user_id":22553516,"display_name":"Natan Bonfim"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694629938,"creation_date":1694629938,"answer_id":77099676,"question_id":14066525,"body_markdown":"I wrote a class, which ran on the server, to figure out which fonts the JVM could accept. And I used one of them, but it didn&#39;t work either. What really solved my problem was this command: sudo apt-get install fontconfig. I&#39;m using Ubuntu and consequently I had to restart the system.\r\n","title":"java.lang.Error: Probable fatal error:No fonts found","body":"<p>I wrote a class, which ran on the server, to figure out which fonts the JVM could accept. And I used one of them, but it didn't work either. What really solved my problem was this command: sudo apt-get install fontconfig. I'm using Ubuntu and consequently I had to restart the system.</p>\n"}],"owner":{"account_id":2185299,"reputation":149,"user_id":1933832,"display_name":"Dhiren"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20677,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"answer_count":5,"score":13,"last_activity_date":1694629938,"creation_date":1356681995,"question_id":14066525,"body_markdown":"I am using same code of jfreechart in linux and windows with zkoss.\r\n\r\nWhen i run same code in windows it runs fine, but in linux it gives font related error as under....\r\n\r\nCan anyone please suggest me how can i resolve this issue permanently ?\r\n\r\n\r\n\r\n**java.lang.Error: Probable fatal error:No fonts found.**\r\n\r\n    sun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1087)\r\n    sun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\r\n    sun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\r\n    sun.font.FontManager.findDeferredFont(FontManager.java:915)\r\n    sun.font.FontManager.findFont2D(FontManager.java:1903)\r\n    sun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\r\n    sun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\r\n    sun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\r\n    sun.font.FontManager.findDeferredFont(FontManager.java:915)\r\n    sun.font.FontManager.findFont2D(FontManager.java:1903)\r\n    sun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\r\n    sun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\r\n    sun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\r\n    sun.font.FontManager.findDeferredFont(FontManager.java:915)\r\n    sun.font.FontManager.findFont2D(FontManager.java:1903)\r\n    sun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\r\n    sun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\r\n    sun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\r\n    sun.font.FontManager.findDeferredFont(FontManager.java:915)\r\n    sun.font.FontManager.findFont2D(FontManager.java:1903)\r\n    sun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\r\n    sun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\r\n    sun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\r\n    sun.font.FontManager.findDeferredFont(FontManager.java:915)\r\n    sun.font.FontManager.findFont2D(FontManager.java:1903)\r\n    sun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\r\n    sun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\r\n    sun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\r\n    sun.font.FontManager.findDeferredFont(FontManager.java:915)\r\n    sun.font.FontManager.findFont2D(FontManager.java:1903)\r\n    sun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\r\n    sun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\r\n    sun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\r\n    sun.font.FontManager.findDeferredFont(FontManager.java:915)\r\n    sun.font.FontManager.findFont2D(FontManager.java:1903)\r\n    sun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\r\n    sun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\r\n    sun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\r\n    sun.font.FontManager.findDeferredFont(FontManager.java:915)\r\n    sun.font.FontManager.findFont2D(FontManager.java:1903)\r\n    sun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\r\n    sun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\r\n    sun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\r\n    sun.font.FontManager.findDeferredFont(FontManager.java:915)\r\n    sun.font.FontManager.findFont2D(FontManager.java:1903)\r\n    sun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\r\n    sun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\r\n    sun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\r\n    sun.font.FontManager.findDeferredFont(FontManager.java:915)\r\n    sun.font.FontManager.findFont2D(FontManager.java:1903)\r\n    sun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\r\n    sun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\r\n    sun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\r\n    sun.font.FontManager.findDeferredFont(FontManager.java:915)\r\n    sun.font.FontManager.findFont2D(FontManager.java:1903)\r\n    sun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\r\n    sun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\r\n    sun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\r\n    sun.font.FontManager.findDeferredFont(FontManager.java:915)\r\n    sun.font.FontManager.findFont2D(FontManager.java:1903)\r\n    sun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\r\n    sun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\r\n    sun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\r\n    sun.font.FontManager.findDeferredFont(FontManager.java:915)\r\n    sun.font.FontManager.findFont2D(FontManager.java:1903)\r\n    sun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\r\n    sun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\r\n    sun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\r\n    sun.font.FontManager.findDeferredFont(FontManager.java:915)\r\n    sun.font.FontManager.findFont2D(FontManager.java:1903)\r\n    sun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\r\n    sun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\r\n    sun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\r\n    sun.font.FontManager.findDeferredFont(FontManager.java:915)\r\n    sun.font.FontManager.findFont2D(FontManager.java:1903)\r\n    sun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\r\n    sun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\r\n    sun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\r\n    sun.font.FontManager.findDeferredFont(FontManager.java:915)\r\n    sun.font.FontManager.findFont2D(FontManager.java:1903)\r\n    sun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\r\n    sun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\r\n    sun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\r\n    sun.font.FontManager.findDeferredFont(FontManager.java:915)\r\n    sun.font.FontManager.findFont2D(FontManager.java:1903)\r\n    sun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\r\n    sun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\r\n    sun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\r\n    sun.font.FontManager.findDeferredFont(FontManager.java:915)\r\n    sun.font.FontManager.findFont2D(FontManager.java:1903)\r\n    sun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\r\n    sun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\r\n    sun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\r\n    sun.font.FontManager.findDeferredFont(FontManager.java:915)\r\n    sun.font.FontManager.findFont2D(FontManager.java:1903)\r\n    sun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\r\n    sun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\r\n    sun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\r\n    sun.font.FontManager.findDeferredFont(FontManager.java:915)\r\n    sun.font.FontManager.findFont2D(FontManager.java:1903)\r\n    sun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\r\n    sun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\r\n    sun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\r\n    sun.font.FontManager.findDeferredFont(FontManager.java:915)\r\n    sun.font.FontManager.findFont2D(FontManager.java:1903)\r\n    sun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\r\n    sun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\r\n    sun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\r\n    sun.font.FontManager.findDeferredFont(FontManager.java:915)\r\n    sun.font.FontManager.findFont2D(FontManager.java:1903)\r\n    sun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\r\n    sun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\r\n    sun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\r\n    sun.font.FontManager.findDeferredFont(FontManager.java:915)\r\n    sun.font.FontManager.findFont2D(FontManager.java:1903)\r\n    sun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\r\n    sun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\r\n    sun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\r\n    sun.font.FontManager.findDeferredFont(FontManager.java:915)\r\n    sun.font.FontManager.findFont2D(FontManager.java:1903)\r\n    sun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\r\n    sun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\r\n    sun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\r\n    sun.font.FontManager.findDeferredFont(FontManager.java:915)\r\n    sun.font.FontManager.findFont2D(FontManager.java:1903)\r\n    sun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\r\n    sun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\r\n    sun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\r\n    sun.font.FontManager.findDeferredFont(FontManager.java:915)\r\n    sun.font.FontManager.findFont2D(FontManager.java:1903)\r\n    sun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\r\n    sun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\r\n    sun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\r\n    sun.font.FontManager.findDeferredFont(FontManager.java:915)\r\n    sun.font.FontManager.findFont2D(FontManager.java:1903)\r\n    sun.font.FontManager.findFont2D(FontManager.java:1864)\r\n    java.awt.Font.getFont2D(Font.java:477)\r\n    sun.font.FontManager.getFont2D(Native Method)\r\n    sun.font.FontDesignMetrics.initMatrixAndMetrics(FontDesignMetrics.java:356)\r\n    sun.font.FontDesignMetrics.&lt;init&gt;(FontDesignMetrics.java:349)\r\n    sun.font.FontDesignMetrics.getMetrics(FontDesignMetrics.java:301)\r\n    sun.java2d.SunGraphics2D.getFontMetrics(SunGraphics2D.java:787)\r\n    org.jfree.text.TextFragment.calculateDimensions(TextFragment.java:229)\r\n    org.jfree.text.TextLine.calculateDimensions(TextLine.java:190)\r\n    org.jfree.text.TextBlock.calculateDimensions(TextBlock.java:171)\r\n    org.jfree.chart.block.LabelBlock.arrange(LabelBlock.java:316)\r\n    org.jfree.chart.block.BorderArrangement.arrangeNN(BorderArrangement.java:210)\r\n    org.jfree.chart.block.BorderArrangement.arrange(BorderArrangement.java:137)\r\n    org.jfree.chart.block.BlockContainer.arrange(BlockContainer.java:179)\r\n    org.jfree.chart.block.CenterArrangement.arrangeNN(CenterArrangement.java:284)\r\n    org.jfree.chart.block.CenterArrangement.arrange(CenterArrangement.java:98)\r\n    org.jfree.chart.block.BlockContainer.arrange(BlockContainer.java:179)\r\n    org.jfree.chart.block.FlowArrangement.arrangeNN(FlowArrangement.java:365)\r\n    org.jfree.chart.block.FlowArrangement.arrangeRR(FlowArrangement.java:283)\r\n    org.jfree.chart.block.FlowArrangement.arrange(FlowArrangement.java:158)\r\n    org.jfree.chart.block.BlockContainer.arrange(BlockContainer.java:179)\r\n    org.jfree.chart.title.LegendTitle.arrange(LegendTitle.java:501)\r\n    org.jfree.chart.JFreeChart.drawTitle(JFreeChart.java:1330)\r\n    org.jfree.chart.JFreeChart.draw(JFreeChart.java:1220)","title":"java.lang.Error: Probable fatal error:No fonts found","body":"<p>I am using same code of jfreechart in linux and windows with zkoss.</p>\n\n<p>When i run same code in windows it runs fine, but in linux it gives font related error as under....</p>\n\n<p>Can anyone please suggest me how can i resolve this issue permanently ?</p>\n\n<p><strong>java.lang.Error: Probable fatal error:No fonts found.</strong></p>\n\n<pre><code>sun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1087)\nsun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\nsun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\nsun.font.FontManager.findDeferredFont(FontManager.java:915)\nsun.font.FontManager.findFont2D(FontManager.java:1903)\nsun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\nsun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\nsun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\nsun.font.FontManager.findDeferredFont(FontManager.java:915)\nsun.font.FontManager.findFont2D(FontManager.java:1903)\nsun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\nsun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\nsun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\nsun.font.FontManager.findDeferredFont(FontManager.java:915)\nsun.font.FontManager.findFont2D(FontManager.java:1903)\nsun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\nsun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\nsun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\nsun.font.FontManager.findDeferredFont(FontManager.java:915)\nsun.font.FontManager.findFont2D(FontManager.java:1903)\nsun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\nsun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\nsun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\nsun.font.FontManager.findDeferredFont(FontManager.java:915)\nsun.font.FontManager.findFont2D(FontManager.java:1903)\nsun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\nsun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\nsun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\nsun.font.FontManager.findDeferredFont(FontManager.java:915)\nsun.font.FontManager.findFont2D(FontManager.java:1903)\nsun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\nsun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\nsun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\nsun.font.FontManager.findDeferredFont(FontManager.java:915)\nsun.font.FontManager.findFont2D(FontManager.java:1903)\nsun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\nsun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\nsun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\nsun.font.FontManager.findDeferredFont(FontManager.java:915)\nsun.font.FontManager.findFont2D(FontManager.java:1903)\nsun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\nsun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\nsun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\nsun.font.FontManager.findDeferredFont(FontManager.java:915)\nsun.font.FontManager.findFont2D(FontManager.java:1903)\nsun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\nsun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\nsun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\nsun.font.FontManager.findDeferredFont(FontManager.java:915)\nsun.font.FontManager.findFont2D(FontManager.java:1903)\nsun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\nsun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\nsun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\nsun.font.FontManager.findDeferredFont(FontManager.java:915)\nsun.font.FontManager.findFont2D(FontManager.java:1903)\nsun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\nsun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\nsun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\nsun.font.FontManager.findDeferredFont(FontManager.java:915)\nsun.font.FontManager.findFont2D(FontManager.java:1903)\nsun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\nsun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\nsun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\nsun.font.FontManager.findDeferredFont(FontManager.java:915)\nsun.font.FontManager.findFont2D(FontManager.java:1903)\nsun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\nsun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\nsun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\nsun.font.FontManager.findDeferredFont(FontManager.java:915)\nsun.font.FontManager.findFont2D(FontManager.java:1903)\nsun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\nsun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\nsun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\nsun.font.FontManager.findDeferredFont(FontManager.java:915)\nsun.font.FontManager.findFont2D(FontManager.java:1903)\nsun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\nsun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\nsun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\nsun.font.FontManager.findDeferredFont(FontManager.java:915)\nsun.font.FontManager.findFont2D(FontManager.java:1903)\nsun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\nsun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\nsun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\nsun.font.FontManager.findDeferredFont(FontManager.java:915)\nsun.font.FontManager.findFont2D(FontManager.java:1903)\nsun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\nsun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\nsun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\nsun.font.FontManager.findDeferredFont(FontManager.java:915)\nsun.font.FontManager.findFont2D(FontManager.java:1903)\nsun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\nsun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\nsun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\nsun.font.FontManager.findDeferredFont(FontManager.java:915)\nsun.font.FontManager.findFont2D(FontManager.java:1903)\nsun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\nsun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\nsun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\nsun.font.FontManager.findDeferredFont(FontManager.java:915)\nsun.font.FontManager.findFont2D(FontManager.java:1903)\nsun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\nsun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\nsun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\nsun.font.FontManager.findDeferredFont(FontManager.java:915)\nsun.font.FontManager.findFont2D(FontManager.java:1903)\nsun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\nsun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\nsun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\nsun.font.FontManager.findDeferredFont(FontManager.java:915)\nsun.font.FontManager.findFont2D(FontManager.java:1903)\nsun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\nsun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\nsun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\nsun.font.FontManager.findDeferredFont(FontManager.java:915)\nsun.font.FontManager.findFont2D(FontManager.java:1903)\nsun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\nsun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\nsun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\nsun.font.FontManager.findDeferredFont(FontManager.java:915)\nsun.font.FontManager.findFont2D(FontManager.java:1903)\nsun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\nsun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\nsun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\nsun.font.FontManager.findDeferredFont(FontManager.java:915)\nsun.font.FontManager.findFont2D(FontManager.java:1903)\nsun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\nsun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\nsun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\nsun.font.FontManager.findDeferredFont(FontManager.java:915)\nsun.font.FontManager.findFont2D(FontManager.java:1903)\nsun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1070)\nsun.font.FontManager.initialiseDeferredFont(FontManager.java:959)\nsun.font.FontManager.findOtherDeferredFont(FontManager.java:898)\nsun.font.FontManager.findDeferredFont(FontManager.java:915)\nsun.font.FontManager.findFont2D(FontManager.java:1903)\nsun.font.FontManager.findFont2D(FontManager.java:1864)\njava.awt.Font.getFont2D(Font.java:477)\nsun.font.FontManager.getFont2D(Native Method)\nsun.font.FontDesignMetrics.initMatrixAndMetrics(FontDesignMetrics.java:356)\nsun.font.FontDesignMetrics.&lt;init&gt;(FontDesignMetrics.java:349)\nsun.font.FontDesignMetrics.getMetrics(FontDesignMetrics.java:301)\nsun.java2d.SunGraphics2D.getFontMetrics(SunGraphics2D.java:787)\norg.jfree.text.TextFragment.calculateDimensions(TextFragment.java:229)\norg.jfree.text.TextLine.calculateDimensions(TextLine.java:190)\norg.jfree.text.TextBlock.calculateDimensions(TextBlock.java:171)\norg.jfree.chart.block.LabelBlock.arrange(LabelBlock.java:316)\norg.jfree.chart.block.BorderArrangement.arrangeNN(BorderArrangement.java:210)\norg.jfree.chart.block.BorderArrangement.arrange(BorderArrangement.java:137)\norg.jfree.chart.block.BlockContainer.arrange(BlockContainer.java:179)\norg.jfree.chart.block.CenterArrangement.arrangeNN(CenterArrangement.java:284)\norg.jfree.chart.block.CenterArrangement.arrange(CenterArrangement.java:98)\norg.jfree.chart.block.BlockContainer.arrange(BlockContainer.java:179)\norg.jfree.chart.block.FlowArrangement.arrangeNN(FlowArrangement.java:365)\norg.jfree.chart.block.FlowArrangement.arrangeRR(FlowArrangement.java:283)\norg.jfree.chart.block.FlowArrangement.arrange(FlowArrangement.java:158)\norg.jfree.chart.block.BlockContainer.arrange(BlockContainer.java:179)\norg.jfree.chart.title.LegendTitle.arrange(LegendTitle.java:501)\norg.jfree.chart.JFreeChart.drawTitle(JFreeChart.java:1330)\norg.jfree.chart.JFreeChart.draw(JFreeChart.java:1220)\n</code></pre>\n"},{"tags":["java","opengl-es","glsl"],"answers":[{"tags":[],"owner":{"account_id":19782926,"reputation":155,"user_id":14487542,"display_name":"AdrianHEY"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694629706,"creation_date":1694629706,"answer_id":77099646,"question_id":77099568,"body_markdown":"It appears that a uniform sampler2D is supposed to take in a int, not an unsigned int, i solved it by using simply ```GLES30.glUniform1i(locc, 1);```. I&#39;ll leave it here for others with the same problem.","title":"GLES sampler2d will only draw what is in the first texture slot","body":"<p>It appears that a uniform sampler2D is supposed to take in a int, not an unsigned int, i solved it by using simply <code>GLES30.glUniform1i(locc, 1);</code>. I'll leave it here for others with the same problem.</p>\n"}],"owner":{"account_id":19782926,"reputation":155,"user_id":14487542,"display_name":"AdrianHEY"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694629706,"creation_date":1694628952,"question_id":77099568,"body_markdown":"Currently using Android Studio, writing in Java and GLES3 a mobile app. I am trying to get multiple textures in my program and it seems that my shader will only draw what is in GL_TEXTURE0, regardless if I set it different or not.\r\nThis is the texture class I am using: \r\n```\r\n\r\npublic class Texture {\r\n    private int[] id;\r\n    byte tex[];\r\n    int slot;\r\n\r\n    private void loadImageBytes(Bitmap bm) {\r\n        // ...\r\n    }\r\n    public Texture(Context context, String filename, int textureslot) {\r\n        id = new int[1]; slot = textureslot;\r\n        GLES30.glGenTextures(1, id, 0);\r\n        GLES30.glActiveTexture(GLES30.GL_TEXTURE0 + textureslot);\r\n        GLES30.glBindTexture(GLES30.GL_TEXTURE_2D, id[0]);\r\n        GLES30.glTexParameteri(GLES30.GL_TEXTURE_2D, GLES30.GL_TEXTURE_WRAP_S, GLES30.GL_CLAMP_TO_EDGE);\r\n        GLES30.glTexParameteri(GLES30.GL_TEXTURE_2D, GLES30.GL_TEXTURE_WRAP_T, GLES30.GL_CLAMP_TO_EDGE);\r\n        //GLES30.glTexParameteri(GLES30.GL_TEXTURE_2D, GLES30.GL_TEXTURE_MIN_FILTER, GLES30.GL_LINEAR_MIPMAP_LINEAR);\r\n        //GLES30.glTexParameteri(GLES30.GL_TEXTURE_2D, GLES30.GL_TEXTURE_MAG_FILTER, GLES30.GL_LINEAR);\r\n\r\n        GLES30.glTexParameteri(GLES30.GL_TEXTURE_2D, GLES30.GL_TEXTURE_MAG_FILTER, GLES30.GL_NEAREST);\r\n\r\n        int height = 0;\r\n        int width = 0;\r\n        try {\r\n            Bitmap bm = BitmapFactory.decodeStream(context.getAssets().open(filename));\r\n            height = bm.getHeight();\r\n            width = bm.getWidth();\r\n            tex = new byte[height * width * 4];\r\n            loadImageBytes(bm);\r\n        }\r\n        catch (IOException e) {\r\n            Log.e(&quot;MYAPP&quot;, &quot;exception&quot;, e);\r\n        }\r\n\r\n        GLES30.glTexImage2D(GLES30.GL_TEXTURE_2D, 0, GLES30.GL_RGBA, width, height, 0, GLES30.GL_RGBA,\r\n                GLES30.GL_UNSIGNED_BYTE, ByteBuffer.wrap(tex));\r\n        GLES30.glGenerateMipmap(GLES30.GL_TEXTURE_2D);\r\n\r\n    }\r\n    public void activeToShader(ShaderProgram sp, String nume){\r\n        GLES30.glActiveTexture(GLES30.GL_TEXTURE0 + slot);\r\n        sp.setUniform1ui(nume, slot);\r\n    }\r\n    /* This is the function that is called here\r\n         void setUniform1ui(String name, int data) {\r\n             int locc = GLES30.glGetUniformLocation(id, name);\r\n             if (locc == -1){\r\n                 Log.e(&quot;UniformError&quot;, &quot;Uniform not found: &quot; + name);\r\n             }\r\n             GLES30.glUniform1ui(locc, data);\r\n         }\r\n    */\r\n}\r\n```\r\nI only use 1 shader program and 1 texture that are initialized once. \r\n```\r\nts2 = new Texture(getBaseContext(), &quot;apple.png&quot;, 1); // I will call this line A\r\n//shader.setUniform1ui(&quot;m_texture&quot;, ts2.slot);\r\nint locc = GLES30.glGetUniformLocation(shader.getId(), &quot;m_texture&quot;);\r\nif (locc == -1) Log.e(&quot;PROGRAM&quot;, &quot;Location not found&quot;);\r\nGLES30.glUniform1ui(locc, 1);                        // I will call this line B\r\n\r\nint locc = GLES30.glGetUniformLocation(shader.getId(), &quot;thing&quot;);\r\n            //GLES30.glUniform1f(locc, 1.0f);\r\n\r\nshader.setUniform1ui(&quot;thing&quot;, 1.0f);\r\n```\r\nThere are 2 integer arguments in the lines A and B. In the line A, if I put 0, it will draw the apple regardless of what I put in line B. If I put anything other then 0, it will not draw the apple regardless of what is in line B. \r\nAlso, I know it finds the uniform and writes something to it, as I get no errors. Also, I tested the uniform &quot;thing&quot; and it works fine.\r\n\r\nHere&#39;s the fragment shader:\r\n```\r\n                    &quot;#version 300 es \\n&quot; +\r\n\r\n                    &quot;precision mediump float;\\n&quot; +\r\n\r\n                    &quot;out vec4 fragColor;\\n&quot; +\r\n                    &quot;uniform sampler2D m_texture;\\n&quot; +\r\n                    &quot;uniform float thing;\\n&quot; +\r\n\r\n                    &quot;in vec2 texUV;\\n&quot; +\r\n\r\n                    &quot;void main() {\\n&quot; +\r\n                    &quot;  fragColor = vec4(1.0,0.0,1.0,1.0);\\n&quot; +\r\n                    &quot;  fragColor = texture(m_texture, vec2(texUV.x, 1.0 - texUV.y) );\\n&quot; +\r\n                    &quot;  if (fragColor.a == 0.0) fragColor = vec4(0, 0, 255, 255);\\n&quot; + // modifying the background color into something, works as expected if the texture is in slot 0\r\n\r\n                    &quot;  //fragColor = vec4(0.0f, 1.0f, thing, 1.0f);\\n&quot; +\r\n                    &quot;}&quot;;\r\n```\r\n(when binding the texture to slot 1)The program doesn&#39;t show the background, but a black screen most likely from the empty texture 0 slot.\r\nI also tried updating the sampler2d every frame (didn&#39;t work), modifying &#39;thing&#39; every frame (worked fine), using another texture (same results). Also, the max number of textures on my device are 32. I am running a pixel 2 emulator with api 28. Any help would be appreciated.\r\n\r\n\r\n\r\nUpdate: I tried using glGetError and found out that the line that&#39;s causing the problem is GLES30.glUniform1ui(locc, 1). I still do not know why nor how to solve it.","title":"GLES sampler2d will only draw what is in the first texture slot","body":"<p>Currently using Android Studio, writing in Java and GLES3 a mobile app. I am trying to get multiple textures in my program and it seems that my shader will only draw what is in GL_TEXTURE0, regardless if I set it different or not.\nThis is the texture class I am using:</p>\n<pre><code>\npublic class Texture {\n    private int[] id;\n    byte tex[];\n    int slot;\n\n    private void loadImageBytes(Bitmap bm) {\n        // ...\n    }\n    public Texture(Context context, String filename, int textureslot) {\n        id = new int[1]; slot = textureslot;\n        GLES30.glGenTextures(1, id, 0);\n        GLES30.glActiveTexture(GLES30.GL_TEXTURE0 + textureslot);\n        GLES30.glBindTexture(GLES30.GL_TEXTURE_2D, id[0]);\n        GLES30.glTexParameteri(GLES30.GL_TEXTURE_2D, GLES30.GL_TEXTURE_WRAP_S, GLES30.GL_CLAMP_TO_EDGE);\n        GLES30.glTexParameteri(GLES30.GL_TEXTURE_2D, GLES30.GL_TEXTURE_WRAP_T, GLES30.GL_CLAMP_TO_EDGE);\n        //GLES30.glTexParameteri(GLES30.GL_TEXTURE_2D, GLES30.GL_TEXTURE_MIN_FILTER, GLES30.GL_LINEAR_MIPMAP_LINEAR);\n        //GLES30.glTexParameteri(GLES30.GL_TEXTURE_2D, GLES30.GL_TEXTURE_MAG_FILTER, GLES30.GL_LINEAR);\n\n        GLES30.glTexParameteri(GLES30.GL_TEXTURE_2D, GLES30.GL_TEXTURE_MAG_FILTER, GLES30.GL_NEAREST);\n\n        int height = 0;\n        int width = 0;\n        try {\n            Bitmap bm = BitmapFactory.decodeStream(context.getAssets().open(filename));\n            height = bm.getHeight();\n            width = bm.getWidth();\n            tex = new byte[height * width * 4];\n            loadImageBytes(bm);\n        }\n        catch (IOException e) {\n            Log.e(&quot;MYAPP&quot;, &quot;exception&quot;, e);\n        }\n\n        GLES30.glTexImage2D(GLES30.GL_TEXTURE_2D, 0, GLES30.GL_RGBA, width, height, 0, GLES30.GL_RGBA,\n                GLES30.GL_UNSIGNED_BYTE, ByteBuffer.wrap(tex));\n        GLES30.glGenerateMipmap(GLES30.GL_TEXTURE_2D);\n\n    }\n    public void activeToShader(ShaderProgram sp, String nume){\n        GLES30.glActiveTexture(GLES30.GL_TEXTURE0 + slot);\n        sp.setUniform1ui(nume, slot);\n    }\n    /* This is the function that is called here\n         void setUniform1ui(String name, int data) {\n             int locc = GLES30.glGetUniformLocation(id, name);\n             if (locc == -1){\n                 Log.e(&quot;UniformError&quot;, &quot;Uniform not found: &quot; + name);\n             }\n             GLES30.glUniform1ui(locc, data);\n         }\n    */\n}\n</code></pre>\n<p>I only use 1 shader program and 1 texture that are initialized once.</p>\n<pre><code>ts2 = new Texture(getBaseContext(), &quot;apple.png&quot;, 1); // I will call this line A\n//shader.setUniform1ui(&quot;m_texture&quot;, ts2.slot);\nint locc = GLES30.glGetUniformLocation(shader.getId(), &quot;m_texture&quot;);\nif (locc == -1) Log.e(&quot;PROGRAM&quot;, &quot;Location not found&quot;);\nGLES30.glUniform1ui(locc, 1);                        // I will call this line B\n\nint locc = GLES30.glGetUniformLocation(shader.getId(), &quot;thing&quot;);\n            //GLES30.glUniform1f(locc, 1.0f);\n\nshader.setUniform1ui(&quot;thing&quot;, 1.0f);\n</code></pre>\n<p>There are 2 integer arguments in the lines A and B. In the line A, if I put 0, it will draw the apple regardless of what I put in line B. If I put anything other then 0, it will not draw the apple regardless of what is in line B.\nAlso, I know it finds the uniform and writes something to it, as I get no errors. Also, I tested the uniform &quot;thing&quot; and it works fine.</p>\n<p>Here's the fragment shader:</p>\n<pre><code>                    &quot;#version 300 es \\n&quot; +\n\n                    &quot;precision mediump float;\\n&quot; +\n\n                    &quot;out vec4 fragColor;\\n&quot; +\n                    &quot;uniform sampler2D m_texture;\\n&quot; +\n                    &quot;uniform float thing;\\n&quot; +\n\n                    &quot;in vec2 texUV;\\n&quot; +\n\n                    &quot;void main() {\\n&quot; +\n                    &quot;  fragColor = vec4(1.0,0.0,1.0,1.0);\\n&quot; +\n                    &quot;  fragColor = texture(m_texture, vec2(texUV.x, 1.0 - texUV.y) );\\n&quot; +\n                    &quot;  if (fragColor.a == 0.0) fragColor = vec4(0, 0, 255, 255);\\n&quot; + // modifying the background color into something, works as expected if the texture is in slot 0\n\n                    &quot;  //fragColor = vec4(0.0f, 1.0f, thing, 1.0f);\\n&quot; +\n                    &quot;}&quot;;\n</code></pre>\n<p>(when binding the texture to slot 1)The program doesn't show the background, but a black screen most likely from the empty texture 0 slot.\nI also tried updating the sampler2d every frame (didn't work), modifying 'thing' every frame (worked fine), using another texture (same results). Also, the max number of textures on my device are 32. I am running a pixel 2 emulator with api 28. Any help would be appreciated.</p>\n<p>Update: I tried using glGetError and found out that the line that's causing the problem is GLES30.glUniform1ui(locc, 1). I still do not know why nor how to solve it.</p>\n"},{"tags":["java","reflection","functional-interface"],"comments":[{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1611237005,"post_id":65828183,"comment_id":116389946,"body_markdown":"Depends on how hard you want to try. Easiest: `clazz.getConstructor(Param.class)::newInstance` - but that requires that the functional interface can throw some exceptions.","body":"Depends on how hard you want to try. Easiest: <code>clazz.getConstructor(Param.class)::newInstance</code> - but that requires that the functional interface can throw some exceptions."},{"owner":{"account_id":20194161,"reputation":29,"user_id":14811547,"display_name":"alyssa moon"},"score":0,"creation_date":1611238749,"post_id":65828183,"comment_id":116390923,"body_markdown":"@JohannesKuhn the point is to automatically infer the constructor signature.","body":"@JohannesKuhn the point is to automatically infer the constructor signature."},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1611240682,"post_id":65828183,"comment_id":116392013,"body_markdown":"Ehm, nope. Can&#39;t do.","body":"Ehm, nope. Can&#39;t do."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1611249960,"post_id":65828183,"comment_id":116396817,"body_markdown":"When you have a `Class` instance, it may represent an abstract class or interface which you can’t instantiate, it may represent an `enum` type that doesn’t allow creating more instance or a type having no matching constructor or the constructor is not accessible. None of these can be checked at compile time. On the other hand, the inferred generic signature needed to select the right constructor is not available at runtime.","body":"When you have a <code>Class</code> instance, it may represent an abstract class or interface which you can’t instantiate, it may represent an <code>enum</code> type that doesn’t allow creating more instance or a type having no matching constructor or the constructor is not accessible. None of these can be checked at compile time. On the other hand, the inferred generic signature needed to select the right constructor is not available at runtime."}],"answers":[{"tags":[],"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1611287500,"creation_date":1611287500,"answer_id":65839050,"question_id":65828183,"body_markdown":"***Standard disclaimer:** Use of reflection is almost always a bad idea.*\r\n\r\nIt is much better to go for a standard *Abstract Factory* or similar.\r\n\r\nHowever, `MethodHandle` will construct the required `Function` objct with minimal overhead (I think). If you do the lookup of `fn` every time, there is overhead in that. \r\n\r\n        Function&lt;T, R&gt; fn = (Function&lt;T, R&gt;)\r\n            MethodHandleProxies.asInterfaceInstance(\r\n                Function.class,\r\n                MethodHandles.lookup().findConstructor(clazz,\r\n                   MethodType.methodType(Void.TYPE, tClass)\r\n               )\r\n            );\r\n\r\nException handling elided.","title":"Get class constructor by functional interface method signature","body":"<p><em><strong>Standard disclaimer:</strong> Use of reflection is almost always a bad idea.</em></p>\n<p>It is much better to go for a standard <em>Abstract Factory</em> or similar.</p>\n<p>However, <code>MethodHandle</code> will construct the required <code>Function</code> objct with minimal overhead (I think). If you do the lookup of <code>fn</code> every time, there is overhead in that.</p>\n<pre><code>    Function&lt;T, R&gt; fn = (Function&lt;T, R&gt;)\n        MethodHandleProxies.asInterfaceInstance(\n            Function.class,\n            MethodHandles.lookup().findConstructor(clazz,\n               MethodType.methodType(Void.TYPE, tClass)\n           )\n        );\n</code></pre>\n<p>Exception handling elided.</p>\n"}],"owner":{"account_id":20194161,"reputation":29,"user_id":14811547,"display_name":"alyssa moon"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":374,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1694629662,"creation_date":1611234759,"question_id":65828183,"body_markdown":"I know i can use constructor reference as hihger-order method&#39;s argument like this:\r\n```java\r\ncollection.stream().map(MyClass::new);\r\n```\r\nBut I have `MyClass` as a variable `Class&lt;MyClass&gt; clazz = MyClass.class`.\r\nCan I use it to pass constructor reference to `.map(Function)` method?\r\nI want to do something like this, is there a way to do it?\r\n```java\r\nClass&lt;MyClass&gt; clazz = MyClass.class;\r\ncollection.stream().map(clazz.getConstructor())\r\n```\r\n","title":"Get class constructor by functional interface method signature","body":"<p>I know i can use constructor reference as hihger-order method's argument like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>collection.stream().map(MyClass::new);\n</code></pre>\n<p>But I have <code>MyClass</code> as a variable <code>Class&lt;MyClass&gt; clazz = MyClass.class</code>.\nCan I use it to pass constructor reference to <code>.map(Function)</code> method?\nI want to do something like this, is there a way to do it?</p>\n<pre class=\"lang-java prettyprint-override\"><code>Class&lt;MyClass&gt; clazz = MyClass.class;\ncollection.stream().map(clazz.getConstructor())\n</code></pre>\n"},{"tags":["java","apache-camel"],"answers":[{"comments":[{"owner":{"account_id":2858209,"reputation":644,"user_id":2453976,"accept_rate":57,"display_name":"Khaled"},"score":0,"creation_date":1493921557,"post_id":43775196,"comment_id":74620584,"body_markdown":"Great, thanks! The default is `false`, so no need to set it.","body":"Great, thanks! The default is <code>false</code>, so no need to set it."}],"tags":[],"owner":{"account_id":1051678,"reputation":6775,"user_id":3063077,"accept_rate":33,"display_name":"Ralf"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1493878539,"creation_date":1493878539,"answer_id":43775196,"question_id":43769429,"body_markdown":"According to the [documentation][1] you also have to set `streaming=false` to guarantee in-order aggregation.\r\n\r\n\r\n  [1]: http://camel.apache.org/splitter.html","title":"Camel Splitter Order of Processing","body":"<p>According to the <a href=\"http://camel.apache.org/splitter.html\" rel=\"nofollow noreferrer\">documentation</a> you also have to set <code>streaming=false</code> to guarantee in-order aggregation.</p>\n"},{"tags":[],"owner":{"account_id":19160379,"reputation":11,"user_id":13996264,"display_name":"Darrell Burk"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694629296,"creation_date":1694629296,"answer_id":77099606,"question_id":43769429,"body_markdown":"Ralf&#39;s answer addresses the order of *aggregation*, but the OP&#39;s question is about the order of *processing*. Those two orders don&#39;t have to be the same.\r\n\r\nThe Camel documentation doesn&#39;t seem to answer this question directly. \r\n\r\nBased on the docs, I think the following can be inferred\r\n\r\n - when `parallelProcessing` **is not** used:\r\n\r\n   - when `streaming` **is not** used (in this case the list is split completely before any items are processed) the order of execution depends on the element ordering in the structure that holds the split list. The type of this structure is not documented. We should not assume that the original message order of the list items will be preserved in this structure. Therefore, it is not safe to assume the items will be processed in the same order as they appear within the input message.\r\n   - when `streaming` **is** used, the input message will be split one item at a time and that item will be processed before the next item is split from the the input message. Here it is safer to assume that the items will be executed in the same order as those items are encountered in the input message. This is not a contract, though; just a safer assumption.\r\n - when `parallelProcessing` **is** used, the question itself is moot; all the items will be processed simultaneously. This is a contract.\r\n","title":"Camel Splitter Order of Processing","body":"<p>Ralf's answer addresses the order of <em>aggregation</em>, but the OP's question is about the order of <em>processing</em>. Those two orders don't have to be the same.</p>\n<p>The Camel documentation doesn't seem to answer this question directly.</p>\n<p>Based on the docs, I think the following can be inferred</p>\n<ul>\n<li><p>when <code>parallelProcessing</code> <strong>is not</strong> used:</p>\n<ul>\n<li>when <code>streaming</code> <strong>is not</strong> used (in this case the list is split completely before any items are processed) the order of execution depends on the element ordering in the structure that holds the split list. The type of this structure is not documented. We should not assume that the original message order of the list items will be preserved in this structure. Therefore, it is not safe to assume the items will be processed in the same order as they appear within the input message.</li>\n<li>when <code>streaming</code> <strong>is</strong> used, the input message will be split one item at a time and that item will be processed before the next item is split from the the input message. Here it is safer to assume that the items will be executed in the same order as those items are encountered in the input message. This is not a contract, though; just a safer assumption.</li>\n</ul>\n</li>\n<li><p>when <code>parallelProcessing</code> <strong>is</strong> used, the question itself is moot; all the items will be processed simultaneously. This is a contract.</p>\n</li>\n</ul>\n"}],"owner":{"account_id":2858209,"reputation":644,"user_id":2453976,"accept_rate":57,"display_name":"Khaled"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":613,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":43775196,"answer_count":2,"score":1,"last_activity_date":1694629296,"creation_date":1493843334,"question_id":43769429,"body_markdown":"If I DON&#39;T specify `parallelProcessing()` when I&#39;m splitting a `List` in camel, will Camel process the items in order?","title":"Camel Splitter Order of Processing","body":"<p>If I DON'T specify <code>parallelProcessing()</code> when I'm splitting a <code>List</code> in camel, will Camel process the items in order?</p>\n"},{"tags":["java","visual-studio-code"],"comments":[{"owner":{"account_id":7547772,"reputation":8593,"user_id":5730279,"display_name":"hc_dev"},"score":0,"creation_date":1694632549,"post_id":77099582,"comment_id":135918315,"body_markdown":"Did you search here on Stackoverflow for similar questions, or solutions like [Visual Studio Code - Java - Import Errors and More](https://stackoverflow.com/questions/45743779/visual-studio-code-java-import-errors-and-more) ?","body":"Did you search here on Stackoverflow for similar questions, or solutions like <a href=\"https://stackoverflow.com/questions/45743779/visual-studio-code-java-import-errors-and-more\">Visual Studio Code - Java - Import Errors and More</a> ?"},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":1,"creation_date":1694647353,"post_id":77099582,"comment_id":135920372,"body_markdown":"Does this answer your question? [Why is my build path suddenly incomplete for my java project in Visual Studio Code?](https://stackoverflow.com/questions/77092008/why-is-my-build-path-suddenly-incomplete-for-my-java-project-in-visual-studio-co)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/77092008/why-is-my-build-path-suddenly-incomplete-for-my-java-project-in-visual-studio-co\">Why is my build path suddenly incomplete for my java project in Visual Studio Code?</a>"},{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":0,"creation_date":1694670758,"post_id":77099582,"comment_id":135922251,"body_markdown":"https://stackoverflow.com/questions/77097506/the-project-was-not-built-since-its-build-path-is-incomplete-vscode-error","body":"<a href=\"https://stackoverflow.com/questions/77097506/the-project-was-not-built-since-its-build-path-is-incomplete-vscode-error\" title=\"the project was not built since its build path is incomplete vscode error\">stackoverflow.com/questions/77097506/&hellip;</a>"},{"owner":{"account_id":15396644,"reputation":25775,"user_id":11107541,"display_name":"starball"},"score":0,"creation_date":1694678354,"post_id":77099582,"comment_id":135923421,"body_markdown":"did you update anything recently? Your JDK? VS Code? Please give version numbers for all the things. Please also show us what you see in the Language Support for Java channel in the Output Panel","body":"did you update anything recently? Your JDK? VS Code? Please give version numbers for all the things. Please also show us what you see in the Language Support for Java channel in the Output Panel"}],"owner":{"account_id":17845964,"reputation":59,"user_id":12962784,"display_name":"Naman Nagelia"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":250,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694629051,"creation_date":1694629051,"question_id":77099582,"body_markdown":"On VS Code, recently when I imported a java project, I got this error\r\n\r\nThe type java.lang.Object cannot be resolved. It is indirectly referenced from required .class files\r\n\r\n\r\nI am on a mac operating system, a few days ago Java was working fine but now it is not, how do I fix this?","title":"The type java.lang.Object cannot be resolved error on VS Code","body":"<p>On VS Code, recently when I imported a java project, I got this error</p>\n<p>The type java.lang.Object cannot be resolved. It is indirectly referenced from required .class files</p>\n<p>I am on a mac operating system, a few days ago Java was working fine but now it is not, how do I fix this?</p>\n"},{"tags":["java","spring","ssl","spring-boot","bouncycastle"],"comments":[{"owner":{"account_id":1432365,"reputation":1061,"user_id":1354502,"display_name":"Ricardo Zanini"},"score":0,"creation_date":1512415481,"post_id":47633672,"comment_id":82239397,"body_markdown":"Your certificate is auto signed? If yes,the browser will always complain about it. That’s because your certificate was not generated by a certified institution.","body":"Your certificate is auto signed? If yes,the browser will always complain about it. That’s because your certificate was not generated by a certified institution."},{"owner":{"account_id":7213144,"reputation":13,"user_id":5506522,"display_name":"Yas"},"score":0,"creation_date":1512457786,"post_id":47633672,"comment_id":82254025,"body_markdown":"thank you  @RicardoZanini for your response. the certificate is auto signed by BC provider, it&#39;s self-signed certificate, how i can figure it to let the browser accept it as trust certificate ?","body":"thank you  @RicardoZanini for your response. the certificate is auto signed by BC provider, it&#39;s self-signed certificate, how i can figure it to let the browser accept it as trust certificate ?"}],"answers":[{"comments":[{"owner":{"account_id":7213144,"reputation":13,"user_id":5506522,"display_name":"Yas"},"score":0,"creation_date":1512482491,"post_id":47653485,"comment_id":82268982,"body_markdown":"Thank you @Ricardo Zanin for your help.","body":"Thank you @Ricardo Zanin for your help."}],"tags":[],"owner":{"account_id":1432365,"reputation":1061,"user_id":1354502,"display_name":"Ricardo Zanini"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1512476357,"creation_date":1512476357,"answer_id":47653485,"question_id":47633672,"body_markdown":"&gt; how i can figure it to let the browser accept it as trust certificate?\r\n\r\nFortunately, you can&#39;t. There&#39;s a discussion about the topic [in this question][1]:\r\n\r\n&gt; If we simply said &quot;HTTPS is now possible with self-signed certificates&quot;, your browser could not distinguish whether a site you are trying to visit has a self-signed cert because it is supposed to, or because you are being attacked. Thus, it would decrease security.\r\n\r\nYou have to add an exception to your browser to accept your certificate. Normally during development. For production use, you have to buy a certificate from a trusted vendor like [Verisign][2].\r\n\r\nTo add an exception to your browser, please see [this other question][3].\r\n\r\nCheers!\r\n\r\n\r\n  [1]: https://security.stackexchange.com/questions/62058/why-self-signed-https-is-less-trustworthy-than-unencrypted-http\r\n  [2]: https://www.verisign.com/en_US/website-presence/website-optimization/ssl-certificates/index.xhtml\r\n  [3]: https://stackoverflow.com/questions/7580508/getting-chrome-to-accept-self-signed-localhost-certificate","title":"Bouncy castle with spring boot","body":"<blockquote>\n  <p>how i can figure it to let the browser accept it as trust certificate?</p>\n</blockquote>\n\n<p>Fortunately, you can't. There's a discussion about the topic <a href=\"https://security.stackexchange.com/questions/62058/why-self-signed-https-is-less-trustworthy-than-unencrypted-http\">in this question</a>:</p>\n\n<blockquote>\n  <p>If we simply said \"HTTPS is now possible with self-signed certificates\", your browser could not distinguish whether a site you are trying to visit has a self-signed cert because it is supposed to, or because you are being attacked. Thus, it would decrease security.</p>\n</blockquote>\n\n<p>You have to add an exception to your browser to accept your certificate. Normally during development. For production use, you have to buy a certificate from a trusted vendor like <a href=\"https://www.verisign.com/en_US/website-presence/website-optimization/ssl-certificates/index.xhtml\" rel=\"nofollow noreferrer\">Verisign</a>.</p>\n\n<p>To add an exception to your browser, please see <a href=\"https://stackoverflow.com/questions/7580508/getting-chrome-to-accept-self-signed-localhost-certificate\">this other question</a>.</p>\n\n<p>Cheers!</p>\n"},{"tags":[],"owner":{"account_id":22639381,"reputation":45,"user_id":16815778,"display_name":"BustedChain"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694628996,"creation_date":1694628996,"answer_id":77099577,"question_id":47633672,"body_markdown":"I work on projects that are used on a local network with workstations that we control.  Since we maintain the systems, we can add the Root CA certificate to the trust on each computer within our environment.  \r\n\r\nThe other answers provided are excellent and they are written with the assumption that you are developing for the web where you can&#39;t make the client workstations trust your certificate.  I just wanted to call attention to this use case in case you or others are in a controlled environment where the workstations themselves need to have the CA trusted at the OS level.\r\n\r\nYou can use [Let&#39;s Encrypt][1] to generate a public cert, assuming their CA is already trusted on your system.\r\n\r\n  [1]: https://letsencrypt.org/getting-started/","title":"Bouncy castle with spring boot","body":"<p>I work on projects that are used on a local network with workstations that we control.  Since we maintain the systems, we can add the Root CA certificate to the trust on each computer within our environment.</p>\n<p>The other answers provided are excellent and they are written with the assumption that you are developing for the web where you can't make the client workstations trust your certificate.  I just wanted to call attention to this use case in case you or others are in a controlled environment where the workstations themselves need to have the CA trusted at the OS level.</p>\n<p>You can use <a href=\"https://letsencrypt.org/getting-started/\" rel=\"nofollow noreferrer\">Let's Encrypt</a> to generate a public cert, assuming their CA is already trusted on your system.</p>\n"}],"owner":{"account_id":7213144,"reputation":13,"user_id":5506522,"display_name":"Yas"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4525,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":47653485,"answer_count":2,"score":1,"last_activity_date":1694628996,"creation_date":1512391376,"question_id":47633672,"body_markdown":"I am trying to use Https over http, I generated the CA certificate with bouncy castle and generated from the `.cer` file the `jks` file, spring boot started successfully with the properties provided with an embedded tomcat.\r\n\r\nThe problem is that I&#39;m getting always **insecure ssl certificate** from the browser (for example from chrome : `This CA Root certificate is not trusted because it is not in the Trusted Root Certification Authorities store.`) while I add the trust store programatically with another config class.\r\n\r\nHere is my code: \r\n\r\n    import org.apache.commons.codec.binary.Base64; import org.bouncycastle.asn1.DERSequence; import org.bouncycastle.asn1.cmp.CertRepMessage; import org.bouncycastle.asn1.cmp.PKIBody; import org.bouncycastle.asn1.x500.X500Name; import org.bouncycastle.asn1.x509.GeneralName; import org.bouncycastle.cert.CertException; import org.bouncycastle.cert.X509CertificateHolder; import org.bouncycastle.cert.X509v3CertificateBuilder; import org.bouncycastle.cert.cmp.CMPException; import org.bouncycastle.cert.cmp.ProtectedPKIMessage; import org.bouncycastle.cert.cmp.ProtectedPKIMessageBuilder; import org.bouncycastle.cert.jcajce.JcaX509CertificateConverter; import org.bouncycastle.cert.jcajce.JcaX509v3CertificateBuilder; import org.bouncycastle.jce.provider.BouncyCastleProvider; import org.bouncycastle.operator.ContentSigner; import org.bouncycastle.operator.ContentVerifierProvider; import org.bouncycastle.operator.OperatorCreationException; import org.bouncycastle.operator.jcajce.JcaContentSignerBuilder; import org.bouncycastle.operator.jcajce.JcaContentVerifierProviderBuilder;\r\n    \r\n    import java.io.FileOutputStream; import java.io.IOException; import java.io.OutputStream; import java.math.BigInteger; import java.security.*; import java.security.cert.X509Certificate; import java.util.Date;\r\n    \r\n    public class generateService {\r\n    \r\n        private static final String BC = BouncyCastleProvider.PROVIDER_NAME;\r\n    \r\n    \r\n        private static X509CertificateHolder makeV3Certificate(KeyPair subKP, String _subDN, KeyPair issKP, String _issDN)\r\n                throws GeneralSecurityException, IOException, OperatorCreationException, CertException\r\n        {\r\n    \r\n            PublicKey subPub  = subKP.getPublic();\r\n            PrivateKey issPriv = issKP.getPrivate();\r\n            PublicKey  issPub  = issKP.getPublic();\r\n    \r\n            X509v3CertificateBuilder v1CertGen = new JcaX509v3CertificateBuilder(\r\n                    new X500Name(_issDN),\r\n                    BigInteger.valueOf(System.currentTimeMillis()),\r\n                    new Date(System.currentTimeMillis()),\r\n                    new Date(System.currentTimeMillis() + (1000L * 60 * 60 * 24 * 100)),\r\n                    new X500Name(_subDN),\r\n                    subPub);\r\n    \r\n            ContentSigner signer = new JcaContentSignerBuilder(&quot;SHA256WithRSA&quot;).setProvider(BC).build(issPriv);\r\n    \r\n            X509CertificateHolder certHolder = v1CertGen.build(signer);\r\n    \r\n            ContentVerifierProvider verifier = new JcaContentVerifierProviderBuilder().setProvider(BC).build(issPub);\r\n            return certHolder;\r\n        }\r\n    \r\n    \r\n        public X509Certificate test(KeyPair kp) throws OperatorCreationException, GeneralSecurityException, CertException, IOException, CMPException {\r\n    \r\n        Provider bcProvider = new BouncyCastleProvider();\r\n        Security.addProvider(bcProvider);\r\n        X509CertificateHolder cert = makeV3Certificate(kp, &quot;CN=CA&quot;, kp, &quot;CN=CA&quot;);\r\n        GeneralName sender = new GeneralName(new X500Name(&quot;CN=CA&quot;));\r\n        GeneralName recipient = new GeneralName(new X500Name(&quot;CN=CA&quot;));\r\n    \r\n        ContentSigner signer = new JcaContentSignerBuilder(&quot;SHA256WithRSAEncryption&quot;).setProvider(BC).build(kp.getPrivate());\r\n        ProtectedPKIMessage message = new ProtectedPKIMessageBuilder(sender, recipient)\r\n                .setBody(new PKIBody(PKIBody.TYPE_INIT_REP, CertRepMessage.getInstance(new DERSequence(new DERSequence()))))\r\n                .addCMPCertificate(cert)\r\n                .build(signer);\r\n    \r\n        X509Certificate jcaCert = new JcaX509CertificateConverter().setProvider(BC).getCertificate(message.getCertificates()[0]);\r\n        return jcaCert;\r\n        }\r\n    \r\n    \r\n    \r\n    \r\n        public void generateJKS() throws GeneralSecurityException, IOException, OperatorCreationException, CMPException, CertException {\r\n            Provider bcProvider = new BouncyCastleProvider();\r\n            Security.addProvider(bcProvider);\r\n            KeyPairGenerator keyPairGenerator = KeyPairGenerator.getInstance(&quot;RSA&quot;);\r\n            keyPairGenerator.initialize(1024);\r\n            KeyPair keyPair = keyPairGenerator.generateKeyPair();\r\n            X509Certificate certificate = test(keyPair);\r\n    \r\n            final FileOutputStream os = new FileOutputStream(&quot;E:\\\\cert4.cer&quot;);\r\n            os.write(&quot;-----BEGIN CERTIFICATE-----\\n&quot;.getBytes(&quot;US-ASCII&quot;));\r\n            os.write(Base64.encodeBase64(certificate.getEncoded(), true));\r\n            os.write(&quot;-----END CERTIFICATE-----\\n&quot;.getBytes(&quot;US-ASCII&quot;));\r\n            os.close();\r\n    \r\n            KeyStore keyStore = KeyStore.getInstance(&quot;JKS&quot;);\r\n            keyStore.load(null,null);\r\n            X509Certificate[] certChain = new X509Certificate[1];\r\n            certChain[0] = certificate;\r\n            keyStore.setKeyEntry(&quot;myaliaskey&quot;, (Key)keyPair.getPrivate(), &quot;secret&quot;.toCharArray(), certChain);\r\n            OutputStream outputStream = new FileOutputStream(&quot;E:\\\\keystoreRSA4.jks&quot;);\r\n            keyStore.store(outputStream, &quot;secret&quot;.toCharArray());\r\n            outputStream.flush();\r\n            outputStream.close();\r\n            \r\n        }\r\n    \r\n    \r\n    \r\n        public static void main(String[] args) throws Exception {\r\n           \r\n            new generateService().generateJKS();\r\n        } }\r\n\r\nApplication.properties:\r\n\r\n    server.port = 8443 server.http.port = 8080 server.ssl.key-store =  E:\\\\keystoreRSA4.jks server.ssl.key-password = secret server.ssl.keyAlias = myaliaskey\r\n\r\n/***************************************************************************/ \r\n\r\n    import org.springframework.context.annotation.Configuration;\r\n    \r\n    import javax.annotation.PostConstruct;\r\n    \r\n    @Configuration public class SSLConfig {\r\n    \r\n    \r\n        @PostConstruct\r\n        private void configureSSL() {\r\n            System.setProperty(&quot;https.protocols&quot;, &quot;TLSv1.2&quot;);\r\n            System.setProperty(&quot;javax.net.ssl.trustStore&quot;, &quot;E:\\\\keystoreRSA4.jks&quot;);\r\n            System.setProperty(&quot;javax.net.ssl.keyStore&quot;, &quot;E:\\\\keystoreRSA4.jks&quot;);\r\n            System.setProperty(&quot;javax.net.ssl.keyStorePassword&quot;, &quot;secret&quot;);\r\n          \r\n        } }\r\n    \r\n    \r\n    import org.apache.catalina.Context; import org.apache.catalina.connector.Connector; import org.apache.tomcat.util.descriptor.web.SecurityCollection; import org.apache.tomcat.util.descriptor.web.SecurityConstraint; import org.springframework.beans.factory.annotation.Value; import org.springframework.boot.context.embedded.EmbeddedServletContainerFactory; import org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainerFactory; import org.springframework.context.annotation.Bean; import org.springframework.context.annotation.Configuration;\r\n    \r\n    @Configuration public class TomcatConfig {\r\n        @Value(&quot;${server.http.port}&quot;)\r\n        private int httpPort;\r\n    \r\n        @Value(&quot;${server.port}&quot;)\r\n        private int httpsPort;\r\n    \r\n        @Bean\r\n        public EmbeddedServletContainerFactory servletContainer() {\r\n            TomcatEmbeddedServletContainerFactory tomcat = new TomcatEmbeddedServletContainerFactory() {\r\n                @Override\r\n                protected void postProcessContext(Context context) {\r\n                    SecurityConstraint securityConstraint = new SecurityConstraint();\r\n                    securityConstraint.setUserConstraint(&quot;CONFIDENTIAL&quot;);\r\n                    SecurityCollection collection = new SecurityCollection();\r\n                    collection.addPattern(&quot;/*&quot;);\r\n                    securityConstraint.addCollection(collection);\r\n                    context.addConstraint(securityConstraint);\r\n                }\r\n            };\r\n            tomcat.addAdditionalTomcatConnectors(initiateHttpConnector());\r\n            return tomcat;\r\n        }\r\n    \r\n        public Connector initiateHttpConnector() {\r\n            Connector connector = new Connector(&quot;org.apache.coyote.http11.Http11NioProtocol&quot;);\r\n            connector.setScheme(&quot;https&quot;);\r\n            connector.setPort(httpPort);\r\n            connector.setSecure(true);\r\n            connector.setRedirectPort(httpsPort); \r\n            return connector;\r\n        } }\r\n\r\nAny help will be appreciated and thank you in advance.\r\n\r\n\r\n","title":"Bouncy castle with spring boot","body":"<p>I am trying to use Https over http, I generated the CA certificate with bouncy castle and generated from the <code>.cer</code> file the <code>jks</code> file, spring boot started successfully with the properties provided with an embedded tomcat.</p>\n\n<p>The problem is that I'm getting always <strong>insecure ssl certificate</strong> from the browser (for example from chrome : <code>This CA Root certificate is not trusted because it is not in the Trusted Root Certification Authorities store.</code>) while I add the trust store programatically with another config class.</p>\n\n<p>Here is my code: </p>\n\n<pre><code>import org.apache.commons.codec.binary.Base64; import org.bouncycastle.asn1.DERSequence; import org.bouncycastle.asn1.cmp.CertRepMessage; import org.bouncycastle.asn1.cmp.PKIBody; import org.bouncycastle.asn1.x500.X500Name; import org.bouncycastle.asn1.x509.GeneralName; import org.bouncycastle.cert.CertException; import org.bouncycastle.cert.X509CertificateHolder; import org.bouncycastle.cert.X509v3CertificateBuilder; import org.bouncycastle.cert.cmp.CMPException; import org.bouncycastle.cert.cmp.ProtectedPKIMessage; import org.bouncycastle.cert.cmp.ProtectedPKIMessageBuilder; import org.bouncycastle.cert.jcajce.JcaX509CertificateConverter; import org.bouncycastle.cert.jcajce.JcaX509v3CertificateBuilder; import org.bouncycastle.jce.provider.BouncyCastleProvider; import org.bouncycastle.operator.ContentSigner; import org.bouncycastle.operator.ContentVerifierProvider; import org.bouncycastle.operator.OperatorCreationException; import org.bouncycastle.operator.jcajce.JcaContentSignerBuilder; import org.bouncycastle.operator.jcajce.JcaContentVerifierProviderBuilder;\n\nimport java.io.FileOutputStream; import java.io.IOException; import java.io.OutputStream; import java.math.BigInteger; import java.security.*; import java.security.cert.X509Certificate; import java.util.Date;\n\npublic class generateService {\n\n    private static final String BC = BouncyCastleProvider.PROVIDER_NAME;\n\n\n    private static X509CertificateHolder makeV3Certificate(KeyPair subKP, String _subDN, KeyPair issKP, String _issDN)\n            throws GeneralSecurityException, IOException, OperatorCreationException, CertException\n    {\n\n        PublicKey subPub  = subKP.getPublic();\n        PrivateKey issPriv = issKP.getPrivate();\n        PublicKey  issPub  = issKP.getPublic();\n\n        X509v3CertificateBuilder v1CertGen = new JcaX509v3CertificateBuilder(\n                new X500Name(_issDN),\n                BigInteger.valueOf(System.currentTimeMillis()),\n                new Date(System.currentTimeMillis()),\n                new Date(System.currentTimeMillis() + (1000L * 60 * 60 * 24 * 100)),\n                new X500Name(_subDN),\n                subPub);\n\n        ContentSigner signer = new JcaContentSignerBuilder(\"SHA256WithRSA\").setProvider(BC).build(issPriv);\n\n        X509CertificateHolder certHolder = v1CertGen.build(signer);\n\n        ContentVerifierProvider verifier = new JcaContentVerifierProviderBuilder().setProvider(BC).build(issPub);\n        return certHolder;\n    }\n\n\n    public X509Certificate test(KeyPair kp) throws OperatorCreationException, GeneralSecurityException, CertException, IOException, CMPException {\n\n    Provider bcProvider = new BouncyCastleProvider();\n    Security.addProvider(bcProvider);\n    X509CertificateHolder cert = makeV3Certificate(kp, \"CN=CA\", kp, \"CN=CA\");\n    GeneralName sender = new GeneralName(new X500Name(\"CN=CA\"));\n    GeneralName recipient = new GeneralName(new X500Name(\"CN=CA\"));\n\n    ContentSigner signer = new JcaContentSignerBuilder(\"SHA256WithRSAEncryption\").setProvider(BC).build(kp.getPrivate());\n    ProtectedPKIMessage message = new ProtectedPKIMessageBuilder(sender, recipient)\n            .setBody(new PKIBody(PKIBody.TYPE_INIT_REP, CertRepMessage.getInstance(new DERSequence(new DERSequence()))))\n            .addCMPCertificate(cert)\n            .build(signer);\n\n    X509Certificate jcaCert = new JcaX509CertificateConverter().setProvider(BC).getCertificate(message.getCertificates()[0]);\n    return jcaCert;\n    }\n\n\n\n\n    public void generateJKS() throws GeneralSecurityException, IOException, OperatorCreationException, CMPException, CertException {\n        Provider bcProvider = new BouncyCastleProvider();\n        Security.addProvider(bcProvider);\n        KeyPairGenerator keyPairGenerator = KeyPairGenerator.getInstance(\"RSA\");\n        keyPairGenerator.initialize(1024);\n        KeyPair keyPair = keyPairGenerator.generateKeyPair();\n        X509Certificate certificate = test(keyPair);\n\n        final FileOutputStream os = new FileOutputStream(\"E:\\\\cert4.cer\");\n        os.write(\"-----BEGIN CERTIFICATE-----\\n\".getBytes(\"US-ASCII\"));\n        os.write(Base64.encodeBase64(certificate.getEncoded(), true));\n        os.write(\"-----END CERTIFICATE-----\\n\".getBytes(\"US-ASCII\"));\n        os.close();\n\n        KeyStore keyStore = KeyStore.getInstance(\"JKS\");\n        keyStore.load(null,null);\n        X509Certificate[] certChain = new X509Certificate[1];\n        certChain[0] = certificate;\n        keyStore.setKeyEntry(\"myaliaskey\", (Key)keyPair.getPrivate(), \"secret\".toCharArray(), certChain);\n        OutputStream outputStream = new FileOutputStream(\"E:\\\\keystoreRSA4.jks\");\n        keyStore.store(outputStream, \"secret\".toCharArray());\n        outputStream.flush();\n        outputStream.close();\n\n    }\n\n\n\n    public static void main(String[] args) throws Exception {\n\n        new generateService().generateJKS();\n    } }\n</code></pre>\n\n<p>Application.properties:</p>\n\n<pre><code>server.port = 8443 server.http.port = 8080 server.ssl.key-store =  E:\\\\keystoreRSA4.jks server.ssl.key-password = secret server.ssl.keyAlias = myaliaskey\n</code></pre>\n\n<p>/***************************************************************************/ </p>\n\n<pre><code>import org.springframework.context.annotation.Configuration;\n\nimport javax.annotation.PostConstruct;\n\n@Configuration public class SSLConfig {\n\n\n    @PostConstruct\n    private void configureSSL() {\n        System.setProperty(\"https.protocols\", \"TLSv1.2\");\n        System.setProperty(\"javax.net.ssl.trustStore\", \"E:\\\\keystoreRSA4.jks\");\n        System.setProperty(\"javax.net.ssl.keyStore\", \"E:\\\\keystoreRSA4.jks\");\n        System.setProperty(\"javax.net.ssl.keyStorePassword\", \"secret\");\n\n    } }\n\n\nimport org.apache.catalina.Context; import org.apache.catalina.connector.Connector; import org.apache.tomcat.util.descriptor.web.SecurityCollection; import org.apache.tomcat.util.descriptor.web.SecurityConstraint; import org.springframework.beans.factory.annotation.Value; import org.springframework.boot.context.embedded.EmbeddedServletContainerFactory; import org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainerFactory; import org.springframework.context.annotation.Bean; import org.springframework.context.annotation.Configuration;\n\n@Configuration public class TomcatConfig {\n    @Value(\"${server.http.port}\")\n    private int httpPort;\n\n    @Value(\"${server.port}\")\n    private int httpsPort;\n\n    @Bean\n    public EmbeddedServletContainerFactory servletContainer() {\n        TomcatEmbeddedServletContainerFactory tomcat = new TomcatEmbeddedServletContainerFactory() {\n            @Override\n            protected void postProcessContext(Context context) {\n                SecurityConstraint securityConstraint = new SecurityConstraint();\n                securityConstraint.setUserConstraint(\"CONFIDENTIAL\");\n                SecurityCollection collection = new SecurityCollection();\n                collection.addPattern(\"/*\");\n                securityConstraint.addCollection(collection);\n                context.addConstraint(securityConstraint);\n            }\n        };\n        tomcat.addAdditionalTomcatConnectors(initiateHttpConnector());\n        return tomcat;\n    }\n\n    public Connector initiateHttpConnector() {\n        Connector connector = new Connector(\"org.apache.coyote.http11.Http11NioProtocol\");\n        connector.setScheme(\"https\");\n        connector.setPort(httpPort);\n        connector.setSecure(true);\n        connector.setRedirectPort(httpsPort); \n        return connector;\n    } }\n</code></pre>\n\n<p>Any help will be appreciated and thank you in advance.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":8362430,"reputation":856,"user_id":6280255,"display_name":"Just another Java programmer"},"score":0,"creation_date":1694634379,"post_id":77099525,"comment_id":135918638,"body_markdown":"It&#39;s still messy code . I have not run it, but noted a couple of things. Try to move your call to setVisible() last, so all you gui are done before. Also from the main method create the gui in the event thread, by using SwingUtilities.invokeLatet()","body":"It&#39;s still messy code . I have not run it, but noted a couple of things. Try to move your call to setVisible() last, so all you gui are done before. Also from the main method create the gui in the event thread, by using SwingUtilities.invokeLatet()"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1694637620,"post_id":77099525,"comment_id":135919180,"body_markdown":"Glad that you are trying to make changes but I still see many problems. There is no need for a GlobalVariables class. You should not be using all those static methods. I still see no need for the layered pane. I suggested you start by reading the Swing tutorial on [How to Use Lists](https://docs.oracle.com/javase/tutorial/uiswing/components/list.html). The &quot;ListDemo&quot; will provide a simple structure to build on. It show how to create the GUI on the Event Dispatch Thread and how to create the frame and then just add your &quot;application panel&quot; to the frame.","body":"Glad that you are trying to make changes but I still see many problems. There is no need for a GlobalVariables class. You should not be using all those static methods. I still see no need for the layered pane. I suggested you start by reading the Swing tutorial on <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/list.html\" rel=\"nofollow noreferrer\">How to Use Lists</a>. The &quot;ListDemo&quot; will provide a simple structure to build on. It show how to create the GUI on the Event Dispatch Thread and how to create the frame and then just add your &quot;application panel&quot; to the frame."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1694637626,"post_id":77099525,"comment_id":135919183,"body_markdown":"You should NOT be passing the frame reference around to your application.  So start with a frame with a couple of components and get it working then add more components and retest. Don&#39;t attempt to write the entire application before testing. One point, you can&#39;t add multiple components to the same BorderLayout area. I note that you try to add two components to the SOUTH. Instead you need to create a panel. Add the components to the panel and then add the panel to the SOUTH.","body":"You should NOT be passing the frame reference around to your application.  So start with a frame with a couple of components and get it working then add more components and retest. Don&#39;t attempt to write the entire application before testing. One point, you can&#39;t add multiple components to the same BorderLayout area. I note that you try to add two components to the SOUTH. Instead you need to create a panel. Add the components to the panel and then add the panel to the SOUTH."}],"owner":{"account_id":29397182,"reputation":13,"user_id":22524270,"display_name":"PokeCedGo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694628585,"creation_date":1694628585,"question_id":77099525,"body_markdown":"I was trying to implement suggestions of using layouts, not using JLayeredPane and having a more organized and structure coding in terms of variables. It took a while to recode my whole simple chat system and went from using a JScrollPane focused system to JList. However, for some reason, nothing in the &quot;UIVisuals&quot; displays at all? \r\n```\r\nimport javax.swing.*;\r\nimport javax.swing.border.LineBorder;\r\nimport java.awt.*;\r\nimport java.io.File;\r\nimport java.io.IOException;\r\n\r\npublic class ChatUI {\r\n    private JTextField chat_input = new JTextField(8);\r\n    private JPanel inner_background = new JPanel();\r\n    private JList&lt;String&gt; chatList; // Use JList for chat display\r\n    private DefaultListModel&lt;String&gt; chatModel; // Model to store chat data\r\n\r\n    // Add a method to update the chat display\r\n    public void updateChatDisplay(String message) {\r\n        chatModel.addElement(message);\r\n    }\r\n\r\n    public void createScrollingList(JPanel i_bg) {\r\n        // Other settings for the inner background panel\r\n        i_bg.setBorder(new LineBorder(Color.decode(&quot;#111214&quot;), 2, true));\r\n        i_bg.setLayout(new BoxLayout(i_bg, BoxLayout.Y_AXIS));\r\n        \r\n        chatModel = new DefaultListModel&lt;&gt;();\r\n        chatList = new JList&lt;&gt;(chatModel);\r\n        \r\n        // Set properties for the chatList\r\n        chatList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION); // You can change this based on your requirements\r\n        chatList.setBackground(Color.decode(&quot;#111214&quot;)); // Background color\r\n        chatList.setForeground(Color.WHITE); // Text color\r\n        chatList.setFont(new Font(Font.DIALOG, Font.BOLD, 15)); // Font\r\n        \r\n        JScrollPane sp = new JScrollPane(chatList);\r\n        sp.setPreferredSize(new Dimension(330, 450));\r\n        \r\n        // Auto-scrolls down\r\n        sp.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);\r\n        sp.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);\r\n        \r\n        // Set the background color of the scroll pane and its viewport\r\n        sp.setBackground(Color.decode(&quot;#111214&quot;));\r\n        sp.getViewport().setBackground(Color.decode(&quot;#111214&quot;));\r\n        \r\n        i_bg.add(sp); // Add the scroll pane to the inner background\r\n        \r\n        // Ensure the layout is updated\r\n        i_bg.revalidate();\r\n        i_bg.repaint();\r\n    }\r\n\r\n    static void UIVisuals(JFrame frame, JList&lt;String&gt; cl, JTextField cp) {\r\n        ChatUI chatUI = new ChatUI();\r\n\r\n        JPanel mainPanel = new JPanel();\r\n        mainPanel.setLayout(new BorderLayout());\r\n\r\n        // Left frame\r\n        JPanel topBackground = new JPanel();\r\n        topBackground.setBackground(Color.decode(&quot;#62D0F6&quot;));\r\n        topBackground.setPreferredSize(new Dimension(500, 80));\r\n\r\n        // Right frame\r\n        JPanel rightFrame = new JPanel();\r\n        rightFrame.setBackground(Color.decode(&quot;#9B90B2&quot;));\r\n        rightFrame.setPreferredSize(new Dimension(20, 20));\r\n\r\n        // User_Icon\r\n        ImageIcon userIcon = new ImageIcon(&quot;C:/Users/pokec/OneDrive/Pictures/user_java_icon.png&quot;);\r\n        JLabel userLabel = new JLabel(userIcon);\r\n\r\n        // Emoji Button\r\n        ImageIcon imageIcon = new ImageIcon(&quot;C:\\\\Users\\\\pokec\\\\OneDrive\\\\Pictures\\\\gift_icon.png&quot;);\r\n        JButton gift_button = new JButton(imageIcon);\r\n\r\n        // Make button transparent\r\n        gift_button.setOpaque(false);\r\n        gift_button.setContentAreaFilled(false);\r\n        gift_button.setBorderPainted(false);\r\n\r\n        // Texting Panel\r\n        cp.setBackground(Color.decode(&quot;#383A40&quot;));\r\n        cp.setForeground(Color.WHITE);\r\n        cp.setBorder(new LineBorder(Color.decode(&quot;#4B4D54&quot;), 1, true));\r\n        cp.setFont(new Font(Font.DIALOG, Font.BOLD, 15));\r\n\r\n        JPanel bottomPanel = new JPanel();\r\n        bottomPanel.setLayout(new BorderLayout());\r\n        bottomPanel.add(cp, BorderLayout.CENTER);\r\n\r\n        // Add components to mainPanel\r\n        mainPanel.add(topBackground, BorderLayout.NORTH);\r\n        mainPanel.add(rightFrame, BorderLayout.EAST);\r\n        mainPanel.add(userLabel, BorderLayout.WEST);\r\n        mainPanel.add(gift_button, BorderLayout.SOUTH);\r\n        mainPanel.add(bottomPanel, BorderLayout.SOUTH);\r\n\r\n        // Event Listeners\r\n        EventListeners eventListeners = new EventListeners(gift_button, cp, cl);\r\n        cp.addActionListener(eventListeners);\r\n        gift_button.addActionListener(eventListeners);\r\n\r\n        chatUI.createScrollingList(chatUI.inner_background); // Pass chatList as an argument\r\n\r\n        // Set the main panel as the content pane for the frame\r\n        frame.setContentPane(mainPanel);\r\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        frame.pack();\r\n        frame.setVisible(true);\r\n    }\r\n}\r\n```\r\n```\r\nimport javax.swing.*;\r\nimport java.awt.Font;\r\nimport java.awt.BorderLayout;\r\nimport java.awt.Color;\r\nimport java.awt.Dimension;\r\n\r\npublic class ChatSystem {   \r\n    private GlobalVariables gV = new GlobalVariables();\r\n\r\n    private JTextArea textArea = gV.getTextArea();\r\n    private JFrame frame = gV.getFrame();\r\n    private JTextField chat_input = gV.getChatInput();\r\n    private JList&lt;String&gt; chatList = gV.getChatList();\r\n\r\n    public static void createScrollingFrame(JFrame frame, JTextField cp, JList&lt;String&gt; cl) {\r\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        frame.pack();\r\n        frame.setVisible(true);\r\n\r\n        // UI Labels\r\n        JLabel client = new JLabel();\r\n        Font f3 = new Font(Font.DIALOG, Font.BOLD, 35);\r\n        client.setFont(f3);\r\n        client.setText(&quot;Mee6 | BOT&quot;);\r\n        client.setForeground(Color.WHITE);\r\n        \r\n        JPanel topPanel = new JPanel(); \r\n        topPanel.setOpaque(false);\r\n        topPanel.add(client);\r\n        \r\n        frame.add(topPanel, BorderLayout.NORTH); \r\n\r\n        // Create everything else\r\n        ChatUI.UIVisuals(frame, cl, cp);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n            ChatSystem chat = new ChatSystem();\r\n\r\n            chat.frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            chat.frame.setVisible(true);\r\n            chat.frame.setBackground(Color.decode(&quot;#313338&quot;));\r\n            chat.frame.setPreferredSize(new Dimension(380, 900)); \r\n            chat.frame.setMaximumSize(new Dimension(395, 1000));\r\n\r\n            createScrollingFrame(chat.frame, chat.chat_input, chat.chatList);\r\n   \r\n    }\r\n}\r\n```\r\n\r\n```\r\nimport javax.swing.DefaultListModel;\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JLayeredPane;\r\nimport javax.swing.JList;\r\nimport javax.swing.JPanel;\r\nimport javax.swing.JScrollPane;\r\nimport javax.swing.JTextArea;\r\nimport javax.swing.JTextField;\r\n\r\npublic class GlobalVariables {\r\n    private JTextField chat_input = new JTextField(8);\r\n    private JPanel inner_background = new JPanel();\r\n    private JTextArea textArea = new JTextArea(50, 2);\r\n    private JList&lt;String&gt; chatList; // Use JList for chat display\r\n    private DefaultListModel&lt;String&gt; chatModel; // Model to store chat data\r\n    \r\n    private JFrame frame = new JFrame(&quot;ChatBot&quot;);\r\n    private JFrame chatPanel = new JFrame();\r\n    private JLayeredPane layeredPane = new JLayeredPane();\r\n\r\n    //getters\r\n    public JTextField getChatInput() {\r\n        return chat_input;\r\n    }\r\n    public JPanel getInnerBackground() {\r\n        return inner_background;\r\n    }\r\n    public JTextArea getTextArea() {\r\n        return textArea;\r\n    }\r\n    public JList getChatList() {\r\n        return chatList;\r\n    }\r\n\r\n    public JFrame getFrame() {\r\n        return frame;\r\n    }\r\n\r\n    public JFrame getChatPanel() {\r\n        return chatPanel;\r\n    }\r\n\r\n    public JLayeredPane getLayeredPane() {\r\n        return layeredPane;\r\n    }\r\n}\r\n```","title":"UIs not Displaying?","body":"<p>I was trying to implement suggestions of using layouts, not using JLayeredPane and having a more organized and structure coding in terms of variables. It took a while to recode my whole simple chat system and went from using a JScrollPane focused system to JList. However, for some reason, nothing in the &quot;UIVisuals&quot; displays at all?</p>\n<pre><code>import javax.swing.*;\nimport javax.swing.border.LineBorder;\nimport java.awt.*;\nimport java.io.File;\nimport java.io.IOException;\n\npublic class ChatUI {\n    private JTextField chat_input = new JTextField(8);\n    private JPanel inner_background = new JPanel();\n    private JList&lt;String&gt; chatList; // Use JList for chat display\n    private DefaultListModel&lt;String&gt; chatModel; // Model to store chat data\n\n    // Add a method to update the chat display\n    public void updateChatDisplay(String message) {\n        chatModel.addElement(message);\n    }\n\n    public void createScrollingList(JPanel i_bg) {\n        // Other settings for the inner background panel\n        i_bg.setBorder(new LineBorder(Color.decode(&quot;#111214&quot;), 2, true));\n        i_bg.setLayout(new BoxLayout(i_bg, BoxLayout.Y_AXIS));\n        \n        chatModel = new DefaultListModel&lt;&gt;();\n        chatList = new JList&lt;&gt;(chatModel);\n        \n        // Set properties for the chatList\n        chatList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION); // You can change this based on your requirements\n        chatList.setBackground(Color.decode(&quot;#111214&quot;)); // Background color\n        chatList.setForeground(Color.WHITE); // Text color\n        chatList.setFont(new Font(Font.DIALOG, Font.BOLD, 15)); // Font\n        \n        JScrollPane sp = new JScrollPane(chatList);\n        sp.setPreferredSize(new Dimension(330, 450));\n        \n        // Auto-scrolls down\n        sp.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);\n        sp.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);\n        \n        // Set the background color of the scroll pane and its viewport\n        sp.setBackground(Color.decode(&quot;#111214&quot;));\n        sp.getViewport().setBackground(Color.decode(&quot;#111214&quot;));\n        \n        i_bg.add(sp); // Add the scroll pane to the inner background\n        \n        // Ensure the layout is updated\n        i_bg.revalidate();\n        i_bg.repaint();\n    }\n\n    static void UIVisuals(JFrame frame, JList&lt;String&gt; cl, JTextField cp) {\n        ChatUI chatUI = new ChatUI();\n\n        JPanel mainPanel = new JPanel();\n        mainPanel.setLayout(new BorderLayout());\n\n        // Left frame\n        JPanel topBackground = new JPanel();\n        topBackground.setBackground(Color.decode(&quot;#62D0F6&quot;));\n        topBackground.setPreferredSize(new Dimension(500, 80));\n\n        // Right frame\n        JPanel rightFrame = new JPanel();\n        rightFrame.setBackground(Color.decode(&quot;#9B90B2&quot;));\n        rightFrame.setPreferredSize(new Dimension(20, 20));\n\n        // User_Icon\n        ImageIcon userIcon = new ImageIcon(&quot;C:/Users/pokec/OneDrive/Pictures/user_java_icon.png&quot;);\n        JLabel userLabel = new JLabel(userIcon);\n\n        // Emoji Button\n        ImageIcon imageIcon = new ImageIcon(&quot;C:\\\\Users\\\\pokec\\\\OneDrive\\\\Pictures\\\\gift_icon.png&quot;);\n        JButton gift_button = new JButton(imageIcon);\n\n        // Make button transparent\n        gift_button.setOpaque(false);\n        gift_button.setContentAreaFilled(false);\n        gift_button.setBorderPainted(false);\n\n        // Texting Panel\n        cp.setBackground(Color.decode(&quot;#383A40&quot;));\n        cp.setForeground(Color.WHITE);\n        cp.setBorder(new LineBorder(Color.decode(&quot;#4B4D54&quot;), 1, true));\n        cp.setFont(new Font(Font.DIALOG, Font.BOLD, 15));\n\n        JPanel bottomPanel = new JPanel();\n        bottomPanel.setLayout(new BorderLayout());\n        bottomPanel.add(cp, BorderLayout.CENTER);\n\n        // Add components to mainPanel\n        mainPanel.add(topBackground, BorderLayout.NORTH);\n        mainPanel.add(rightFrame, BorderLayout.EAST);\n        mainPanel.add(userLabel, BorderLayout.WEST);\n        mainPanel.add(gift_button, BorderLayout.SOUTH);\n        mainPanel.add(bottomPanel, BorderLayout.SOUTH);\n\n        // Event Listeners\n        EventListeners eventListeners = new EventListeners(gift_button, cp, cl);\n        cp.addActionListener(eventListeners);\n        gift_button.addActionListener(eventListeners);\n\n        chatUI.createScrollingList(chatUI.inner_background); // Pass chatList as an argument\n\n        // Set the main panel as the content pane for the frame\n        frame.setContentPane(mainPanel);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.pack();\n        frame.setVisible(true);\n    }\n}\n</code></pre>\n<pre><code>import javax.swing.*;\nimport java.awt.Font;\nimport java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Dimension;\n\npublic class ChatSystem {   \n    private GlobalVariables gV = new GlobalVariables();\n\n    private JTextArea textArea = gV.getTextArea();\n    private JFrame frame = gV.getFrame();\n    private JTextField chat_input = gV.getChatInput();\n    private JList&lt;String&gt; chatList = gV.getChatList();\n\n    public static void createScrollingFrame(JFrame frame, JTextField cp, JList&lt;String&gt; cl) {\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.pack();\n        frame.setVisible(true);\n\n        // UI Labels\n        JLabel client = new JLabel();\n        Font f3 = new Font(Font.DIALOG, Font.BOLD, 35);\n        client.setFont(f3);\n        client.setText(&quot;Mee6 | BOT&quot;);\n        client.setForeground(Color.WHITE);\n        \n        JPanel topPanel = new JPanel(); \n        topPanel.setOpaque(false);\n        topPanel.add(client);\n        \n        frame.add(topPanel, BorderLayout.NORTH); \n\n        // Create everything else\n        ChatUI.UIVisuals(frame, cl, cp);\n    }\n\n    public static void main(String[] args) {\n            ChatSystem chat = new ChatSystem();\n\n            chat.frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n            chat.frame.setVisible(true);\n            chat.frame.setBackground(Color.decode(&quot;#313338&quot;));\n            chat.frame.setPreferredSize(new Dimension(380, 900)); \n            chat.frame.setMaximumSize(new Dimension(395, 1000));\n\n            createScrollingFrame(chat.frame, chat.chat_input, chat.chatList);\n   \n    }\n}\n</code></pre>\n<pre><code>import javax.swing.DefaultListModel;\nimport javax.swing.JFrame;\nimport javax.swing.JLayeredPane;\nimport javax.swing.JList;\nimport javax.swing.JPanel;\nimport javax.swing.JScrollPane;\nimport javax.swing.JTextArea;\nimport javax.swing.JTextField;\n\npublic class GlobalVariables {\n    private JTextField chat_input = new JTextField(8);\n    private JPanel inner_background = new JPanel();\n    private JTextArea textArea = new JTextArea(50, 2);\n    private JList&lt;String&gt; chatList; // Use JList for chat display\n    private DefaultListModel&lt;String&gt; chatModel; // Model to store chat data\n    \n    private JFrame frame = new JFrame(&quot;ChatBot&quot;);\n    private JFrame chatPanel = new JFrame();\n    private JLayeredPane layeredPane = new JLayeredPane();\n\n    //getters\n    public JTextField getChatInput() {\n        return chat_input;\n    }\n    public JPanel getInnerBackground() {\n        return inner_background;\n    }\n    public JTextArea getTextArea() {\n        return textArea;\n    }\n    public JList getChatList() {\n        return chatList;\n    }\n\n    public JFrame getFrame() {\n        return frame;\n    }\n\n    public JFrame getChatPanel() {\n        return chatPanel;\n    }\n\n    public JLayeredPane getLayeredPane() {\n        return layeredPane;\n    }\n}\n</code></pre>\n"},{"tags":["javascript","java","ajax","ajaxform"],"comments":[{"owner":{"account_id":27243397,"reputation":1331,"user_id":20769158,"display_name":"scrhartley"},"score":1,"creation_date":1694535180,"post_id":77090853,"comment_id":135902618,"body_markdown":"It looks like the URL is for myChannels and the channel I want is number 12, with the number being dynamic. So depending upon the backend, the endpoint may look something like &quot;myChannels/{id}&quot;. Look for just myChannels and see what you find.","body":"It looks like the URL is for myChannels and the channel I want is number 12, with the number being dynamic. So depending upon the backend, the endpoint may look something like &quot;myChannels/{id}&quot;. Look for just myChannels and see what you find."}],"answers":[{"comments":[{"owner":{"account_id":22674125,"reputation":5,"user_id":16845468,"display_name":"DesarrolladorNoob"},"score":0,"creation_date":1694627586,"post_id":77099428,"comment_id":135917443,"body_markdown":"suponiendo* que esta en MVC","body":"suponiendo* que esta en MVC"},{"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"score":0,"creation_date":1694628296,"post_id":77099428,"comment_id":135917595,"body_markdown":"Translated to English.","body":"Translated to English."}],"tags":[],"owner":{"account_id":22674125,"reputation":5,"user_id":16845468,"display_name":"DesarrolladorNoob"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694628290,"creation_date":1694627489,"answer_id":77099428,"question_id":77090853,"body_markdown":"(Newbie opinion) If you have access to the backend, where the service is deployed i.e. `myChannels`, it should be in the controllers assuming it is an MVC application.","title":"Find the location of ajax URL call on the server","body":"<p>(Newbie opinion) If you have access to the backend, where the service is deployed i.e. <code>myChannels</code>, it should be in the controllers assuming it is an MVC application.</p>\n"}],"owner":{"account_id":16501529,"reputation":4282,"user_id":11922765,"display_name":"Mainland"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694628290,"creation_date":1694534517,"question_id":77090853,"body_markdown":"This is first time I heard about ajax. Right now I have a perfectly working script to plot data using `armcharts`. Source of this data seems to be `ajax` call and it goes like this. \r\n\r\n    $.ajax(&quot;myChannels/12&quot;).done( function(data) {\r\n    \t\tcreateDeviceChart(&quot;chart&quot;, &quot;Product Channels&quot;, [&quot;Sensor1&quot;, &quot;Senso2&quot;], &quot;Pulses&quot;, data);\r\n\r\nI did `grep -R &quot;myChannels/12&quot; / ` on the server where this script is located. My present output is &quot;No such device or address&quot;. \r\n\r\nI did this on the browser: &quot;IP address/myChannels/12&quot; and I see JSON data in the dictionary format. How and where to locate source of this data? and script? \r\n","title":"Find the location of ajax URL call on the server","body":"<p>This is first time I heard about ajax. Right now I have a perfectly working script to plot data using <code>armcharts</code>. Source of this data seems to be <code>ajax</code> call and it goes like this.</p>\n<pre><code>$.ajax(&quot;myChannels/12&quot;).done( function(data) {\n        createDeviceChart(&quot;chart&quot;, &quot;Product Channels&quot;, [&quot;Sensor1&quot;, &quot;Senso2&quot;], &quot;Pulses&quot;, data);\n</code></pre>\n<p>I did <code>grep -R &quot;myChannels/12&quot; / </code> on the server where this script is located. My present output is &quot;No such device or address&quot;.</p>\n<p>I did this on the browser: &quot;IP address/myChannels/12&quot; and I see JSON data in the dictionary format. How and where to locate source of this data? and script?</p>\n"},{"tags":["java","hashcode"],"comments":[{"owner":{"account_id":8326,"reputation":258555,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":0,"creation_date":1334914536,"post_id":10243599,"comment_id":13164636,"body_markdown":"Related: http://stackoverflow.com/questions/2587442/hash-code-for-a-group-of-three-fields","body":"Related: <a href=\"http://stackoverflow.com/questions/2587442/hash-code-for-a-group-of-three-fields\" title=\"hash code for a group of three fields\">stackoverflow.com/questions/2587442/&hellip;</a>"},{"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":2,"creation_date":1334914689,"post_id":10243599,"comment_id":13164697,"body_markdown":"`(37*(17 + user.hashCode) + product.hashCode())`. Taken from Effective Java.","body":"<code>(37*(17 + user.hashCode) + product.hashCode())</code>. Taken from Effective Java."},{"owner":{"account_id":160574,"reputation":15892,"user_id":380734,"accept_rate":81,"display_name":"Noel M"},"score":3,"creation_date":1334914760,"post_id":10243599,"comment_id":13164724,"body_markdown":"Hashcodes are not unique. Equal objects return the same hashcode, but the same hashcode does not mean that objects are equal. Don&#39;t mistake hashcode for an ID.","body":"Hashcodes are not unique. Equal objects return the same hashcode, but the same hashcode does not mean that objects are equal. Don&#39;t mistake hashcode for an ID."}],"answers":[{"tags":[],"owner":{"account_id":1341284,"reputation":116,"user_id":1282893,"display_name":"bongi"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1334914757,"creation_date":1334914757,"answer_id":10243716,"question_id":10243599,"body_markdown":"A common solution is to multiply the first hash with a prime number and then add the second hash.","title":"Java hash of 2 hashes","body":"<p>A common solution is to multiply the first hash with a prime number and then add the second hash.</p>\n"},{"comments":[{"owner":{"display_name":"user1125394"},"score":0,"creation_date":1334917934,"post_id":10243726,"comment_id":13165942,"body_markdown":"so here you are using the same prime number as multiplier of user and product, why don&#39;t take 2 different ones?","body":"so here you are using the same prime number as multiplier of user and product, why don&#39;t take 2 different ones?"},{"owner":{"account_id":39206,"reputation":8779,"user_id":112964,"accept_rate":100,"display_name":"nd."},"score":1,"creation_date":1334921730,"post_id":10243726,"comment_id":13167296,"body_markdown":"@ca11111 there is already a post at stackoverflow that answers this much better than I ever could: http://stackoverflow.com/a/1147232/112964","body":"@ca11111 there is already a post at stackoverflow that answers this much better than I ever could: <a href=\"http://stackoverflow.com/a/1147232/112964\">stackoverflow.com/a/1147232/112964</a>"}],"tags":[],"owner":{"account_id":39206,"reputation":8779,"user_id":112964,"accept_rate":100,"display_name":"nd."},"comment_count":2,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1334915813,"creation_date":1334914794,"answer_id":10243726,"question_id":10243599,"body_markdown":"Your `hashCode` is not that bad if both user and product create pseudo-random hash-codes. If you are afraid of hash collisions because of bad hashCode implementations in either `user` or `product`, then multiply one of the source hash codes by a prime number:\r\n\r\n    public int hashCode() {\r\n      final int prime = 31;\r\n      int result = 1;\r\n      result = prime * result + ((product == null) ? 0 : product.hashCode());\r\n      result = prime * result + ((user == null) ? 0 : user.hashCode());\r\n      return result;\r\n    }\r\n\r\nEclipse builds this very code when selecting *Source | Generate hashCode() and equals()*.\r\n\r\nAs mentioned by Thilo, you can also simply use `Arrays.hashCode(new Object[]{ user, product })`; This call takes care of `null` values for user or product and also multiplies the result by 31 - same as the hand written code.\r\nIf you are using Google Guava, there is an `Objects.hashCode(Object...)` that makes your intent a little bit clearer and uses varargs, but it also only delegates to `Arrays.hashCode`.","title":"Java hash of 2 hashes","body":"<p>Your <code>hashCode</code> is not that bad if both user and product create pseudo-random hash-codes. If you are afraid of hash collisions because of bad hashCode implementations in either <code>user</code> or <code>product</code>, then multiply one of the source hash codes by a prime number:</p>\n\n<pre><code>public int hashCode() {\n  final int prime = 31;\n  int result = 1;\n  result = prime * result + ((product == null) ? 0 : product.hashCode());\n  result = prime * result + ((user == null) ? 0 : user.hashCode());\n  return result;\n}\n</code></pre>\n\n<p>Eclipse builds this very code when selecting <em>Source | Generate hashCode() and equals()</em>.</p>\n\n<p>As mentioned by Thilo, you can also simply use <code>Arrays.hashCode(new Object[]{ user, product })</code>; This call takes care of <code>null</code> values for user or product and also multiplies the result by 31 - same as the hand written code.\nIf you are using Google Guava, there is an <code>Objects.hashCode(Object...)</code> that makes your intent a little bit clearer and uses varargs, but it also only delegates to <code>Arrays.hashCode</code>.</p>\n"},{"tags":[],"owner":{"account_id":67532,"reputation":15704,"user_id":197574,"accept_rate":83,"display_name":"DerMike"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1392043502,"creation_date":1334914816,"answer_id":10243734,"question_id":10243599,"body_markdown":"You could let Apache Commons [HashCodeBuilder][1] do the work for you.\r\n\r\nIt lets you write something like\r\n\r\n    return new HashCodeBuilder(17, 37).\r\n       append(user).\r\n       append(product).\r\n       toHashCode();\r\n\r\n  [1]: https://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/builder/HashCodeBuilder.html","title":"Java hash of 2 hashes","body":"<p>You could let Apache Commons <a href=\"https://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/builder/HashCodeBuilder.html\" rel=\"nofollow\">HashCodeBuilder</a> do the work for you.</p>\n\n<p>It lets you write something like</p>\n\n<pre><code>return new HashCodeBuilder(17, 37).\n   append(user).\n   append(product).\n   toHashCode();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5514254,"reputation":101,"user_id":4379593,"display_name":"Филя Усков"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694628228,"creation_date":1694628228,"answer_id":77099486,"question_id":10243599,"body_markdown":"We need to do two points:\r\n\r\n 1. minimize collisions\r\n 2. hash(a,b)!=hash(b,a)\r\n\r\nI suggest such way:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nnumerically we have such algorithm:\r\n```\r\na = hash1\r\nb = hash2\r\np = a+b\r\nresult_hash = p*(p+1)/2+b\r\n```\r\nbut if we reduce algorithm, this will not affect collisions:\r\n```\r\na = hash1\r\nb = hash2\r\np = a+b\r\nresult_hash = p*p+b\r\n```\r\nwe can check this (in python):\r\n```\r\nN=256 # number of different values of hash\r\nd = {}\r\nfor a in range(N):\r\n  for b in range(N):\r\n    p = a+b\r\n    x = (p*p+b)%N\r\n    if x in d:\r\n      d[x]+=1\r\n    else:\r\n      d[x]=1\r\nprint(max(v for k,v in d.items()))\r\n```\r\n  [1]: https://i.stack.imgur.com/GrgGs.png","title":"Java hash of 2 hashes","body":"<p>We need to do two points:</p>\n<ol>\n<li>minimize collisions</li>\n<li>hash(a,b)!=hash(b,a)</li>\n</ol>\n<p>I suggest such way:</p>\n<p><a href=\"https://i.stack.imgur.com/GrgGs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GrgGs.png\" alt=\"enter image description here\" /></a></p>\n<p>numerically we have such algorithm:</p>\n<pre><code>a = hash1\nb = hash2\np = a+b\nresult_hash = p*(p+1)/2+b\n</code></pre>\n<p>but if we reduce algorithm, this will not affect collisions:</p>\n<pre><code>a = hash1\nb = hash2\np = a+b\nresult_hash = p*p+b\n</code></pre>\n<p>we can check this (in python):</p>\n<pre><code>N=256 # number of different values of hash\nd = {}\nfor a in range(N):\n  for b in range(N):\n    p = a+b\n    x = (p*p+b)%N\n    if x in d:\n      d[x]+=1\n    else:\n      d[x]=1\nprint(max(v for k,v in d.items()))\n</code></pre>\n"}],"owner":{"display_name":"user1125394"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":751,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":10243726,"answer_count":4,"score":7,"last_activity_date":1694628228,"creation_date":1334914293,"question_id":10243599,"body_markdown":"I&#39;m having two lists of objects, users and products\r\n\r\nusers own products, and each products is associated to 1 user\r\n\r\nbut a product type can be multiple and be owned by separate users\r\n\r\n- users: Ed, Rob\r\n- products: Coca, Sprites(1), Sprites(2), Beer\r\n- Ed has Coca and Sprites(1), Rob Sprites (2) and Beer\r\n\r\nI need to generate an id for each unique (user+product)\r\n\r\nIt&#39;s probably not a good idea to do \r\n\r\n    user.hashCode() + product.hashCode()\r\n\r\nWhat could be a good way to proceed?","title":"Java hash of 2 hashes","body":"<p>I'm having two lists of objects, users and products</p>\n\n<p>users own products, and each products is associated to 1 user</p>\n\n<p>but a product type can be multiple and be owned by separate users</p>\n\n<ul>\n<li>users: Ed, Rob</li>\n<li>products: Coca, Sprites(1), Sprites(2), Beer</li>\n<li>Ed has Coca and Sprites(1), Rob Sprites (2) and Beer</li>\n</ul>\n\n<p>I need to generate an id for each unique (user+product)</p>\n\n<p>It's probably not a good idea to do </p>\n\n<pre><code>user.hashCode() + product.hashCode()\n</code></pre>\n\n<p>What could be a good way to proceed?</p>\n"},{"tags":["java","http","http-headers","rest-assured"],"comments":[{"owner":{"account_id":10263942,"reputation":5676,"user_id":7574461,"display_name":"lucas-nguyen-17"},"score":0,"creation_date":1639192866,"post_id":70304301,"comment_id":124292643,"body_markdown":"Don&#39;t see anything that produces your request header. Please add correct code part .","body":"Don&#39;t see anything that produces your request header. Please add correct code part ."},{"owner":{"account_id":23608171,"reputation":1,"user_id":17643581,"display_name":"Валентин Алексеев"},"score":0,"creation_date":1639238423,"post_id":70304301,"comment_id":124299995,"body_markdown":"The problem is that I do not set any headers in the code, however, they are sent in the request. As I understand it, this is a certain set of default headers that rest assured initializes","body":"The problem is that I do not set any headers in the code, however, they are sent in the request. As I understand it, this is a certain set of default headers that rest assured initializes"},{"owner":{"account_id":23608171,"reputation":1,"user_id":17643581,"display_name":"Валентин Алексеев"},"score":0,"creation_date":1639238946,"post_id":70304301,"comment_id":124300109,"body_markdown":"@lucas-nguyen-17, i added en example in my &quot;post request&quot; code part","body":"@lucas-nguyen-17, i added en example in my &quot;post request&quot; code part"},{"owner":{"account_id":10263942,"reputation":5676,"user_id":7574461,"display_name":"lucas-nguyen-17"},"score":0,"creation_date":1639269784,"post_id":70304301,"comment_id":124306098,"body_markdown":"I guess `body(hexStringToByteArray(test1))` produces these headers. Since you want to send as `Byte[]` --&gt; Content-Type must be `application/octet-stream` with default charset `charset=ISO-8859-1`. Others header do NO harms.","body":"I guess <code>body(hexStringToByteArray(test1))</code> produces these headers. Since you want to send as <code>Byte[]</code> --&gt; Content-Type must be <code>application&#47;octet-stream</code> with default charset <code>charset=ISO-8859-1</code>. Others header do NO harms."}],"owner":{"account_id":23608171,"reputation":1,"user_id":17643581,"display_name":"Валентин Алексеев"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1499,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694626216,"creation_date":1639138263,"question_id":70304301,"body_markdown":"When I submit my HTTP POST request, I see headers that I did not expect (highlighted): \r\n\r\n***Accept: */*\r\nAccept-Encoding: none,gzip,deflate\r\nContent-Type: application/octet-stream; charset=ISO-8859-1**\r\nSSL-Client-CN: POS-1234-1234\r\n**Host: 123.123.123.123:8081\r\nConnection: Keep-Alive\r\nUser-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_312)***\r\n\r\nHow can i remove them?\r\n\r\n        @Test\r\n        public HeaderConfig sampleTest() {\r\n            try (InputStream input = new FileInputStream(&quot;src/test/resources/local.properties&quot;)) {\r\n                Properties prop = new Properties();\r\n                prop.load(input);\r\n                \r\n                RestAssured.baseURI = prop.getProperty(&quot;RestAssured.baseURI&quot;);\r\n                RestAssured.port =  Integer.parseInt(prop.getProperty(&quot;RestAssured.port&quot;));\r\n            } catch (IOException ex) {\r\n                ex.printStackTrace();\r\n            }\r\n\r\n            String test1 = &quot;some string data&quot;;\r\n\r\n           Response response = given().header(&quot;SSL-Client-CN&quot;,&quot;POS-1234-1234&quot;).body(hexStringToByteArray(test1)).when().post().then().using().extract().response();\r\n            \r\n            String body = response.getBody().asString();\r\n            int status = response.getStatusCode();\r\n            System.out.println(response.getBody().asString());\r\n            Assert.assertEquals(status, 200);\r\n\r\n            return null;\r\n        }\r\n","title":"Remove unnecessary HTTP headers in POST request using rest assured","body":"<p>When I submit my HTTP POST request, I see headers that I did not expect (highlighted):</p>\n<p><em><strong>Accept: <em>/</em>\nAccept-Encoding: none,gzip,deflate\nContent-Type: application/octet-stream; charset=ISO-8859-1</strong>\nSSL-Client-CN: POS-1234-1234\n<strong>Host: 123.123.123.123:8081\nConnection: Keep-Alive\nUser-Agent: Apache-HttpClient/4.5.13 (Java/1.8.0_312)</strong></em></p>\n<p>How can i remove them?</p>\n<pre><code>    @Test\n    public HeaderConfig sampleTest() {\n        try (InputStream input = new FileInputStream(&quot;src/test/resources/local.properties&quot;)) {\n            Properties prop = new Properties();\n            prop.load(input);\n            \n            RestAssured.baseURI = prop.getProperty(&quot;RestAssured.baseURI&quot;);\n            RestAssured.port =  Integer.parseInt(prop.getProperty(&quot;RestAssured.port&quot;));\n        } catch (IOException ex) {\n            ex.printStackTrace();\n        }\n\n        String test1 = &quot;some string data&quot;;\n\n       Response response = given().header(&quot;SSL-Client-CN&quot;,&quot;POS-1234-1234&quot;).body(hexStringToByteArray(test1)).when().post().then().using().extract().response();\n        \n        String body = response.getBody().asString();\n        int status = response.getStatusCode();\n        System.out.println(response.getBody().asString());\n        Assert.assertEquals(status, 200);\n\n        return null;\n    }\n</code></pre>\n"},{"tags":["java","swing","jfilechooser"],"answers":[{"comments":[{"owner":{"account_id":3969990,"reputation":7267,"user_id":3274830,"accept_rate":58,"display_name":"Mohsen Kamrani"},"score":0,"creation_date":1397661427,"post_id":23113324,"comment_id":35332698,"body_markdown":"@das_j&gt; You&#39;re right. I&#39;ll update my answer, please check it later.","body":"@das_j&gt; You&#39;re right. I&#39;ll update my answer, please check it later."},{"owner":{"account_id":1834196,"reputation":3360,"user_id":1664878,"accept_rate":67,"display_name":"Volodymyr Levytskyi"},"score":0,"creation_date":1397662548,"post_id":23113324,"comment_id":35333522,"body_markdown":"Thank you so much. But I need to get text from textField labelled &#39;File name&#39; in JFileChooser. User may not select any file at all but only type file name and program should create such file.","body":"Thank you so much. But I need to get text from textField labelled &#39;File name&#39; in JFileChooser. User may not select any file at all but only type file name and program should create such file."},{"owner":{"account_id":3969990,"reputation":7267,"user_id":3274830,"accept_rate":58,"display_name":"Mohsen Kamrani"},"score":0,"creation_date":1397662845,"post_id":23113324,"comment_id":35333718,"body_markdown":"@Volodia&gt; Do you want something like installers that if you select a folder that doesn&#39;t exist they create it?","body":"@Volodia&gt; Do you want something like installers that if you select a folder that doesn&#39;t exist they create it?"},{"owner":{"account_id":1834196,"reputation":3360,"user_id":1664878,"accept_rate":67,"display_name":"Volodymyr Levytskyi"},"score":0,"creation_date":1397663061,"post_id":23113324,"comment_id":35333848,"body_markdown":"I want to create file whose name is typed into text field &#39;File name&#39; but only after user pressed Approve button on JFileChooser","body":"I want to create file whose name is typed into text field &#39;File name&#39; but only after user pressed Approve button on JFileChooser"},{"owner":{"account_id":1834196,"reputation":3360,"user_id":1664878,"accept_rate":67,"display_name":"Volodymyr Levytskyi"},"score":0,"creation_date":1397716642,"post_id":23113324,"comment_id":35355893,"body_markdown":"SELECTED_FILE_CHANGED_PROPERTY is fired on single-selection mode! I checked it!","body":"SELECTED_FILE_CHANGED_PROPERTY is fired on single-selection mode! I checked it!"}],"tags":[],"owner":{"account_id":3969990,"reputation":7267,"user_id":3274830,"accept_rate":58,"display_name":"Mohsen Kamrani"},"comment_count":5,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1397661599,"creation_date":1397660897,"answer_id":23113324,"question_id":23113239,"body_markdown":"Note: `SELECTED_FILE_CHANGED_PROPERTY` events are fired only if a single item is selected.\r\n\r\nIn particular, if multiple items are selected while multiple-selection mode is enabled, this event is not fired. But if a single item is selected while in multiple-selection mode, this event is fired.\r\n\r\nWhen in multiple-selection mode, `SELECTED_FILES_CHANGED_PROPERTY` events are always fired regardless of whether a single or multiple files have been selected.\r\n\r\n\r\n\tJFileChooser chooser = new JFileChooser();\r\n\t\r\n\t// Add listener on chooser to detect changes to selected file\r\n\tchooser.addPropertyChangeListener(new PropertyChangeListener() {\r\n\t    public void propertyChange(PropertyChangeEvent evt) {\r\n\t        if (JFileChooser.SELECTED_FILE_CHANGED_PROPERTY\r\n\t                .equals(evt.getPropertyName())) {\r\n\t            JFileChooser chooser = (JFileChooser)evt.getSource();\r\n\t            File oldFile = (File)evt.getOldValue();\r\n\t            File newFile = (File)evt.getNewValue();\r\n\t\r\n\t            // The selected file should always be the same as newFile\r\n\t            File curFile = chooser.getSelectedFile();\r\n\t        } else if (JFileChooser.SELECTED_FILES_CHANGED_PROPERTY.equals(\r\n\t                evt.getPropertyName())) {\r\n\t            JFileChooser chooser = (JFileChooser)evt.getSource();\r\n\t            File[] oldFiles = (File[])evt.getOldValue();\r\n\t            File[] newFiles = (File[])evt.getNewValue();\r\n\t\r\n\t            // Get list of selected files\r\n\t            // The selected files should always be the same as newFiles\r\n\t            File[] files = chooser.getSelectedFiles();\r\n\t        }\r\n\t    }\r\n\t}) ;","title":"How to listen to changes on &#39;File Name&#39; TextField in JFileChooser?","body":"<p>Note: <code>SELECTED_FILE_CHANGED_PROPERTY</code> events are fired only if a single item is selected.</p>\n\n<p>In particular, if multiple items are selected while multiple-selection mode is enabled, this event is not fired. But if a single item is selected while in multiple-selection mode, this event is fired.</p>\n\n<p>When in multiple-selection mode, <code>SELECTED_FILES_CHANGED_PROPERTY</code> events are always fired regardless of whether a single or multiple files have been selected.</p>\n\n<pre><code>JFileChooser chooser = new JFileChooser();\n\n// Add listener on chooser to detect changes to selected file\nchooser.addPropertyChangeListener(new PropertyChangeListener() {\n    public void propertyChange(PropertyChangeEvent evt) {\n        if (JFileChooser.SELECTED_FILE_CHANGED_PROPERTY\n                .equals(evt.getPropertyName())) {\n            JFileChooser chooser = (JFileChooser)evt.getSource();\n            File oldFile = (File)evt.getOldValue();\n            File newFile = (File)evt.getNewValue();\n\n            // The selected file should always be the same as newFile\n            File curFile = chooser.getSelectedFile();\n        } else if (JFileChooser.SELECTED_FILES_CHANGED_PROPERTY.equals(\n                evt.getPropertyName())) {\n            JFileChooser chooser = (JFileChooser)evt.getSource();\n            File[] oldFiles = (File[])evt.getOldValue();\n            File[] newFiles = (File[])evt.getNewValue();\n\n            // Get list of selected files\n            // The selected files should always be the same as newFiles\n            File[] files = chooser.getSelectedFiles();\n        }\n    }\n}) ;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1536701,"reputation":4494,"user_id":1432545,"accept_rate":97,"display_name":"das_j"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1397661571,"creation_date":1397661571,"answer_id":23113602,"question_id":23113239,"body_markdown":"What you want is a `JFileChooser` with the `SAVE_DIALOG` Flag.\r\n\r\nSome demo code:\r\n\r\n    JFileChooser chooser = new JFileChooser(&quot;some path&quot;);\r\n    chooser.setDialogType(JFileChooser.SAVE_DIALOG);\r\n    // Stuff like setting the required file extension, the title, ...\r\n    int result = chooser.showSaveDialog(this);\r\n    if (result == JFileChooser.APPROVE_OPTION) {\r\n        String path = chooser.getSelectedFile().toString();\r\n        // Do something with the path\r\n    }\r\n    chooser.setVisible(false); // Don&#39;t forget to hide","title":"How to listen to changes on &#39;File Name&#39; TextField in JFileChooser?","body":"<p>What you want is a <code>JFileChooser</code> with the <code>SAVE_DIALOG</code> Flag.</p>\n\n<p>Some demo code:</p>\n\n<pre><code>JFileChooser chooser = new JFileChooser(\"some path\");\nchooser.setDialogType(JFileChooser.SAVE_DIALOG);\n// Stuff like setting the required file extension, the title, ...\nint result = chooser.showSaveDialog(this);\nif (result == JFileChooser.APPROVE_OPTION) {\n    String path = chooser.getSelectedFile().toString();\n    // Do something with the path\n}\nchooser.setVisible(false); // Don't forget to hide\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17883343,"reputation":1,"user_id":12991557,"display_name":"Richard Mangerie"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694625483,"creation_date":1694625483,"answer_id":77099229,"question_id":23113239,"body_markdown":"I was able to get this working by using the main concept of [another answer to a similar question][1]:\r\n\r\n    private JTextField getFilenameTextField(Container cont)\r\n    {\r\n      for (Component c : cont.getComponents())\r\n      {\r\n        if (c instanceof JTextField)\r\n        {\r\n          return (JTextField)c;\r\n        }\r\n        else if (c instanceof Container)\r\n        {\r\n          JTextField textField = getFilenameTextField(((Container) c));\r\n          if (textField != null) return textField;\r\n        }\r\n      }\r\n      return null;\r\n    }\r\n\r\nThis will take some container (in this case, a JFileChooser object) as the parameter and recursively search each of its components and sub-components until it finds the JTextField.  If it cannot be found for some reason, `null` is returned.  However, this should work just fine, as a standard vanilla JFileChooser should always have exactly one text field.\r\n\r\nThen you can get the text field object and add a document listener to it, which will track when the text changes:\r\n\r\n    JFileChooser chooser = new JFileChooser();\r\n    JTextField filenameTextField = getFilenameTextField(chooser);\r\n    filenameTextField.getDocument().addDocumentListener(new DocumentListener()\r\n    {\r\n      // implement the methods\r\n    });\r\n\r\n  [1]: https://stackoverflow.com/questions/71205132/how-can-you-name-the-component-jtextfield-that-shows-the-selected-file-inside","title":"How to listen to changes on &#39;File Name&#39; TextField in JFileChooser?","body":"<p>I was able to get this working by using the main concept of <a href=\"https://stackoverflow.com/questions/71205132/how-can-you-name-the-component-jtextfield-that-shows-the-selected-file-inside\">another answer to a similar question</a>:</p>\n<pre><code>private JTextField getFilenameTextField(Container cont)\n{\n  for (Component c : cont.getComponents())\n  {\n    if (c instanceof JTextField)\n    {\n      return (JTextField)c;\n    }\n    else if (c instanceof Container)\n    {\n      JTextField textField = getFilenameTextField(((Container) c));\n      if (textField != null) return textField;\n    }\n  }\n  return null;\n}\n</code></pre>\n<p>This will take some container (in this case, a JFileChooser object) as the parameter and recursively search each of its components and sub-components until it finds the JTextField.  If it cannot be found for some reason, <code>null</code> is returned.  However, this should work just fine, as a standard vanilla JFileChooser should always have exactly one text field.</p>\n<p>Then you can get the text field object and add a document listener to it, which will track when the text changes:</p>\n<pre><code>JFileChooser chooser = new JFileChooser();\nJTextField filenameTextField = getFilenameTextField(chooser);\nfilenameTextField.getDocument().addDocumentListener(new DocumentListener()\n{\n  // implement the methods\n});\n</code></pre>\n"}],"owner":{"account_id":1834196,"reputation":3360,"user_id":1664878,"accept_rate":67,"display_name":"Volodymyr Levytskyi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2293,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":23113324,"answer_count":3,"score":4,"last_activity_date":1694625483,"creation_date":1397660648,"question_id":23113239,"body_markdown":"I need to get the newest typed text inside text field labelled &#39;File name&#39; in `javax.swing.JFileChooser`.\r\n\r\nI don&#39;t need latest selected file because text typed into &#39;File name&#39; should serve as a name for newly created file.\r\n\r\nI used SELECTED_FILE_CHANGED_PROPERTY but it&#39;s fired only on file selections.\r\nThere is also FILE_FILTER_CHANGED_PROPERTY but it is fired when I change type of file.\r\n\r\nHow to listen to changes of &#39;File Name&#39; text field?\r\n\r\nThank you!\r\n\r\n","title":"How to listen to changes on &#39;File Name&#39; TextField in JFileChooser?","body":"<p>I need to get the newest typed text inside text field labelled 'File name' in <code>javax.swing.JFileChooser</code>.</p>\n\n<p>I don't need latest selected file because text typed into 'File name' should serve as a name for newly created file.</p>\n\n<p>I used SELECTED_FILE_CHANGED_PROPERTY but it's fired only on file selections.\nThere is also FILE_FILTER_CHANGED_PROPERTY but it is fired when I change type of file.</p>\n\n<p>How to listen to changes of 'File Name' text field?</p>\n\n<p>Thank you!</p>\n"},{"tags":["java","spring","spring-data-jpa","spring-bean"],"comments":[{"owner":{"account_id":29407677,"reputation":3,"user_id":22532367,"display_name":"Mat-Zaj"},"score":0,"creation_date":1694624657,"post_id":77099115,"comment_id":135916912,"body_markdown":"I forgot mention that I use MariaDB in xampp.","body":"I forgot mention that I use MariaDB in xampp."},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1694625176,"post_id":77099115,"comment_id":135917015,"body_markdown":"First of all: Take care of java naming convetions. Class names should be start with uppercase character.","body":"First of all: Take care of java naming convetions. Class names should be start with uppercase character."},{"owner":{"account_id":29407677,"reputation":3,"user_id":22532367,"display_name":"Mat-Zaj"},"score":0,"creation_date":1694625535,"post_id":77099115,"comment_id":135917077,"body_markdown":"I do. The class name was &quot;Product&quot; but I changed it when I read the end of the exception. And in my db the names are like (&quot;product_quantity&quot;).","body":"I do. The class name was &quot;Product&quot; but I changed it when I read the end of the exception. And in my db the names are like (&quot;product_quantity&quot;)."},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1694625617,"post_id":77099115,"comment_id":135917096,"body_markdown":"The name of the class and the name of the columns are unrelated here","body":"The name of the class and the name of the columns are unrelated here"},{"owner":{"account_id":29407677,"reputation":3,"user_id":22532367,"display_name":"Mat-Zaj"},"score":0,"creation_date":1694625926,"post_id":77099115,"comment_id":135917151,"body_markdown":"I noticed. I corrected repository and it works. Thanks","body":"I noticed. I corrected repository and it works. Thanks"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1694626057,"post_id":77099115,"comment_id":135917174,"body_markdown":"You are welcome. So if my answer helps you, feel free to accept and/or upvote them","body":"You are welcome. So if my answer helps you, feel free to accept and/or upvote them"}],"answers":[{"tags":[],"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694625327,"creation_date":1694625327,"answer_id":77099214,"question_id":77099115,"body_markdown":"The solution is simple. The method name must be `product findByProductId(long id);` not `product findByProduct_id(long id);`\r\n","title":"JpaRepository keeps throwing exceptions","body":"<p>The solution is simple. The method name must be <code>product findByProductId(long id);</code> not <code>product findByProduct_id(long id);</code></p>\n"}],"owner":{"account_id":29407677,"reputation":3,"user_id":22532367,"display_name":"Mat-Zaj"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77099214,"answer_count":1,"score":0,"last_activity_date":1694625327,"creation_date":1694624428,"question_id":77099115,"body_markdown":"I recently stared learning spring data jpa.\r\n\r\nI was directly following a bunch of tutorials but whan it comes to create repository I receive bean exceptions.\r\n\r\nI tried using annotations and bean creating in xml file but nothing helped.\r\n\r\nBeneath is my latest attepmt.\r\n\r\n```\r\npackage com.convential.mainclasspackage;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\nimport org.springframework.boot.CommandLineRunner;\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.context.annotation.Bean;\r\n\r\n@SpringBootApplication\r\npublic class SpringDataJpaConventialApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t\r\n\t\tSpringApplication.run(SpringDataJpaConventialApplication.class, args);\r\n\t}\r\n\r\n\t@Bean\r\n\tCommandLineRunner commandlineRunner(ProductRepository productRepository) {\r\n\t\t\r\n\t\treturn (args) -&gt; {\r\n\t\t\tproduct tv = new product(&quot;TV&quot;, 250);\r\n\t\t\tproductRepository.save(tv);\r\n\t\t};\r\n\t\t\r\n\t} \r\n}\r\n```\r\n\r\n```\r\npackage com.convential.mainclasspackage;\r\n\r\nimport jakarta.annotation.Nullable;\r\nimport jakarta.persistence.Column;\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.GeneratedValue;\r\nimport jakarta.persistence.GenerationType;\r\nimport jakarta.persistence.Id;\r\nimport jakarta.persistence.Table;\r\nimport jakarta.persistence.UniqueConstraint;\r\n\r\n@Entity(name = &quot;product&quot;)\r\n@Table(\r\n\r\n\t\tname = &quot;product&quot;, uniqueConstraints = {\r\n\t\t\t\t@UniqueConstraint(name = &quot;product_name_unique_constraint&quot;, columnNames = &quot;product_name&quot;) }\r\n\r\n)\r\npublic class product {\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.AUTO)\r\n\tprivate int productId;\r\n\r\n\t@Column(name = &quot;product_name&quot;, nullable = true, unique = true, columnDefinition = &quot;TEXT&quot;\r\n\r\n\t)\r\n\tprivate String productName;\r\n\r\n\t@Column(name = &quot;product_quantity&quot;, nullable = true, updatable = true)\r\n\tprivate int productQuantity;\r\n\r\n\tpublic product() {\r\n\t}\r\n\r\n\tpublic product(String productName, int productQuantity) {\r\n\t\tthis.productName = productName;\r\n\t\tthis.productQuantity = productQuantity;\r\n\t}\r\n\r\n\tpublic product(int productId, String productName, int productQuantity) {\r\n\t\tthis.productId = productId;\r\n\t\tthis.productName = productName;\r\n\t\tthis.productQuantity = productQuantity;\r\n\t}\r\n\r\n\tpublic int getProductId() {\r\n\t\treturn productId;\r\n\t}\r\n\r\n\tpublic String getProductName() {\r\n\t\treturn productName;\r\n\t}\r\n\r\n\tpublic void setProductName(String productName) {\r\n\t\tthis.productName = productName;\r\n\t}\r\n\r\n\tpublic int getProductQuantity() {\r\n\t\treturn productQuantity;\r\n\t}\r\n\r\n\tpublic void setProductQuantity(int productQuantity) {\r\n\t\tthis.productQuantity = productQuantity;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic String toString() {\r\n\t\treturn &quot;Product [productId=&quot; + productId + &quot;, productName=&quot; + productName + &quot;, productQuantity=&quot;\r\n\t\t\t\t+ productQuantity + &quot;]&quot;;\r\n\t}\r\n\r\n}\r\n\r\n\r\n\r\n\r\npackage com.convential.mainclasspackage;\r\n\r\nimport java.util.List;\r\n\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\nimport org.springframework.data.repository.CrudRepository;\r\nimport org.springframework.stereotype.Repository;\r\n\r\npublic interface ProductRepository extends JpaRepository&lt;product, Integer&gt; {\r\n\r\n\tList&lt;product&gt; findByName();\r\n\tproduct findByProduct_id(long id);\r\n\t\r\n\t\r\n}\r\n\r\n```\r\n\r\nException\r\n\r\n    org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;commandlineRunner&#39; defined in com.convential.mainclasspackage.SpringDataJpaConventialApplication: Unsatisfied dependency expressed through method &#39;commandlineRunner&#39; parameter 0: Error creating bean with name &#39;productRepository&#39; defined in com.convential.mainclasspackage.ProductRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract com.convential.mainclasspackage.product com.convential.mainclasspackage.ProductRepository.findByProduct_id(long); Reason: Failed to create query for method public abstract com.convential.mainclasspackage.product com.convential.mainclasspackage.ProductRepository.findByProduct_id(long); No property &#39;product&#39; found for type &#39;product&#39;; Did you mean &#39;productId&#39;","title":"JpaRepository keeps throwing exceptions","body":"<p>I recently stared learning spring data jpa.</p>\n<p>I was directly following a bunch of tutorials but whan it comes to create repository I receive bean exceptions.</p>\n<p>I tried using annotations and bean creating in xml file but nothing helped.</p>\n<p>Beneath is my latest attepmt.</p>\n<pre><code>package com.convential.mainclasspackage;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.boot.CommandLineRunner;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.annotation.Bean;\n\n@SpringBootApplication\npublic class SpringDataJpaConventialApplication {\n\n    public static void main(String[] args) {\n        \n        SpringApplication.run(SpringDataJpaConventialApplication.class, args);\n    }\n\n    @Bean\n    CommandLineRunner commandlineRunner(ProductRepository productRepository) {\n        \n        return (args) -&gt; {\n            product tv = new product(&quot;TV&quot;, 250);\n            productRepository.save(tv);\n        };\n        \n    } \n}\n</code></pre>\n<pre><code>package com.convential.mainclasspackage;\n\nimport jakarta.annotation.Nullable;\nimport jakarta.persistence.Column;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.Table;\nimport jakarta.persistence.UniqueConstraint;\n\n@Entity(name = &quot;product&quot;)\n@Table(\n\n        name = &quot;product&quot;, uniqueConstraints = {\n                @UniqueConstraint(name = &quot;product_name_unique_constraint&quot;, columnNames = &quot;product_name&quot;) }\n\n)\npublic class product {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private int productId;\n\n    @Column(name = &quot;product_name&quot;, nullable = true, unique = true, columnDefinition = &quot;TEXT&quot;\n\n    )\n    private String productName;\n\n    @Column(name = &quot;product_quantity&quot;, nullable = true, updatable = true)\n    private int productQuantity;\n\n    public product() {\n    }\n\n    public product(String productName, int productQuantity) {\n        this.productName = productName;\n        this.productQuantity = productQuantity;\n    }\n\n    public product(int productId, String productName, int productQuantity) {\n        this.productId = productId;\n        this.productName = productName;\n        this.productQuantity = productQuantity;\n    }\n\n    public int getProductId() {\n        return productId;\n    }\n\n    public String getProductName() {\n        return productName;\n    }\n\n    public void setProductName(String productName) {\n        this.productName = productName;\n    }\n\n    public int getProductQuantity() {\n        return productQuantity;\n    }\n\n    public void setProductQuantity(int productQuantity) {\n        this.productQuantity = productQuantity;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Product [productId=&quot; + productId + &quot;, productName=&quot; + productName + &quot;, productQuantity=&quot;\n                + productQuantity + &quot;]&quot;;\n    }\n\n}\n\n\n\n\npackage com.convential.mainclasspackage;\n\nimport java.util.List;\n\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.data.repository.CrudRepository;\nimport org.springframework.stereotype.Repository;\n\npublic interface ProductRepository extends JpaRepository&lt;product, Integer&gt; {\n\n    List&lt;product&gt; findByName();\n    product findByProduct_id(long id);\n    \n    \n}\n\n</code></pre>\n<p>Exception</p>\n<pre><code>org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'commandlineRunner' defined in com.convential.mainclasspackage.SpringDataJpaConventialApplication: Unsatisfied dependency expressed through method 'commandlineRunner' parameter 0: Error creating bean with name 'productRepository' defined in com.convential.mainclasspackage.ProductRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract com.convential.mainclasspackage.product com.convential.mainclasspackage.ProductRepository.findByProduct_id(long); Reason: Failed to create query for method public abstract com.convential.mainclasspackage.product com.convential.mainclasspackage.ProductRepository.findByProduct_id(long); No property 'product' found for type 'product'; Did you mean 'productId'\n</code></pre>\n"},{"tags":["java","user-interface","awt"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1694649775,"post_id":77097854,"comment_id":135920611,"body_markdown":"Instead of printing `e.getButton()`, print the event’s *modifiers* using `InputEvent.getModifiersExText(e.getModifiersEx())`.","body":"Instead of printing <code>e.getButton()</code>, print the event’s <i>modifiers</i> using <code>InputEvent.getModifiersExText(e.getModifiersEx())</code>."}],"answers":[{"tags":[],"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694614771,"creation_date":1694614771,"answer_id":77097955,"question_id":77097854,"body_markdown":"I assume you are actually using Swing (since there in no need to use AWT). \r\n\r\nYou can use the `SwingUtilities` class to check which button is pressed:\r\n\r\n    public void mouseDragged(MouseEvent e) {\r\n    \tSystem.out.println( SwingUtilities.isLeftMouseButton(e) );\r\n        System.out.println(&quot;MouseMotionListener:&quot;+e.getButton());\r\n        l.setText(&quot;X=&quot; + e.getX() + &quot; Y=&quot; + e.getY());\r\n    }\r\n","title":"Java AWT: MouseMotionListener cannot distinguish mouse buttons","body":"<p>I assume you are actually using Swing (since there in no need to use AWT).</p>\n<p>You can use the <code>SwingUtilities</code> class to check which button is pressed:</p>\n<pre><code>public void mouseDragged(MouseEvent e) {\n    System.out.println( SwingUtilities.isLeftMouseButton(e) );\n    System.out.println(&quot;MouseMotionListener:&quot;+e.getButton());\n    l.setText(&quot;X=&quot; + e.getX() + &quot; Y=&quot; + e.getY());\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1694626213,"post_id":77099180,"comment_id":135917210,"body_markdown":"*It looks like the framework recommends utilizing the SwingUtilities class for this situation.* - already suggested hours ago.","body":"<i>It looks like the framework recommends utilizing the SwingUtilities class for this situation.</i> - already suggested hours ago."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1694632136,"post_id":77099180,"comment_id":135918231,"body_markdown":"@camickr, there is no marked answer as of now.","body":"@camickr, there is no marked answer as of now."}],"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694625055,"creation_date":1694625055,"answer_id":77099180,"question_id":77097854,"body_markdown":"First, you can implement the _[MouseInputListener](https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/event/MouseInputListener.html)_ interface, which conveniently implements both _MouseListener_ and _MouseMotionListener_.\r\n\r\nRegarding your inquiry, here is a similar question and answer.  \r\n_[StackOverflow &amp;ndash; mouseDragged not returning appropriate button down](https://stackoverflow.com/a/18172343/17758716)_.\r\n\r\nIt looks like the framework recommends utilizing the _[SwingUtilities](https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/SwingUtilities.html)_ class for this situation.\r\n\r\nSpecifically, the following 3 methods.\r\n- _[isLeftMouseButton](https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/SwingUtilities.html#isLeftMouseButton(java.awt.event.MouseEvent))_\r\n- _[isMiddleMouseButton](https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/SwingUtilities.html#isMiddleMouseButton(java.awt.event.MouseEvent))_\r\n- and _[isRightMouseButton](https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/SwingUtilities.html#isRightMouseButton(java.awt.event.MouseEvent))_\r\n\r\nHere is an example.\r\n\r\n```java\r\npublic void mouseDragged(MouseEvent e) {\r\n    System.out.println(&quot;l= &quot; + SwingUtilities.isLeftMouseButton(e));\r\n    System.out.println(&quot;m= &quot; + SwingUtilities.isMiddleMouseButton(e));\r\n    System.out.println(&quot;r= &quot; + SwingUtilities.isRightMouseButton(e));\r\n    l.setText(&quot;X=&quot; + e.getX() + &quot; Y=&quot; + e.getY());\r\n}\r\n```\r\n\r\nOutput\r\n\r\n```none\r\nMouseListener:1\r\nl= true\r\nm= false\r\nr= false\r\nMouseListener:3\r\nl= false\r\nm= false\r\nr= true\r\n```\r\n\r\nAdditionally, here are two _Java_ tutorials, on implementing _mouse listeners_, and _mouse-motion listeners_.  \r\n- _[How to Write a Mouse Listener (The Java&amp;trade; Tutorials &amp;gt; Creating a GUI With Swing &amp;gt; Writing Event Listeners)](https://docs.oracle.com/javase/tutorial/uiswing/events/mouselistener.html)_.  \r\n- _[How to Write a Mouse-Motion Listener (The Java&amp;trade; Tutorials &amp;gt; Creating a GUI With Swing &amp;gt; Writing Event Listeners)](https://docs.oracle.com/javase/tutorial/uiswing/events/mousemotionlistener.html)_.","title":"Java AWT: MouseMotionListener cannot distinguish mouse buttons","body":"<p>First, you can implement the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/event/MouseInputListener.html\" rel=\"nofollow noreferrer\">MouseInputListener</a></em> interface, which conveniently implements both <em>MouseListener</em> and <em>MouseMotionListener</em>.</p>\n<p>Regarding your inquiry, here is a similar question and answer.<br />\n<em><a href=\"https://stackoverflow.com/a/18172343/17758716\">StackOverflow – mouseDragged not returning appropriate button down</a></em>.</p>\n<p>It looks like the framework recommends utilizing the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/SwingUtilities.html\" rel=\"nofollow noreferrer\">SwingUtilities</a></em> class for this situation.</p>\n<p>Specifically, the following 3 methods.</p>\n<ul>\n<li><em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/SwingUtilities.html#isLeftMouseButton(java.awt.event.MouseEvent)\" rel=\"nofollow noreferrer\">isLeftMouseButton</a></em></li>\n<li><em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/SwingUtilities.html#isMiddleMouseButton(java.awt.event.MouseEvent)\" rel=\"nofollow noreferrer\">isMiddleMouseButton</a></em></li>\n<li>and <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/SwingUtilities.html#isRightMouseButton(java.awt.event.MouseEvent)\" rel=\"nofollow noreferrer\">isRightMouseButton</a></em></li>\n</ul>\n<p>Here is an example.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void mouseDragged(MouseEvent e) {\n    System.out.println(&quot;l= &quot; + SwingUtilities.isLeftMouseButton(e));\n    System.out.println(&quot;m= &quot; + SwingUtilities.isMiddleMouseButton(e));\n    System.out.println(&quot;r= &quot; + SwingUtilities.isRightMouseButton(e));\n    l.setText(&quot;X=&quot; + e.getX() + &quot; Y=&quot; + e.getY());\n}\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>MouseListener:1\nl= true\nm= false\nr= false\nMouseListener:3\nl= false\nm= false\nr= true\n</code></pre>\n<p>Additionally, here are two <em>Java</em> tutorials, on implementing <em>mouse listeners</em>, and <em>mouse-motion listeners</em>.</p>\n<ul>\n<li><em><a href=\"https://docs.oracle.com/javase/tutorial/uiswing/events/mouselistener.html\" rel=\"nofollow noreferrer\">How to Write a Mouse Listener (The Java™ Tutorials &gt; Creating a GUI With Swing &gt; Writing Event Listeners)</a></em>.</li>\n<li><em><a href=\"https://docs.oracle.com/javase/tutorial/uiswing/events/mousemotionlistener.html\" rel=\"nofollow noreferrer\">How to Write a Mouse-Motion Listener (The Java™ Tutorials &gt; Creating a GUI With Swing &gt; Writing Event Listeners)</a></em>.</li>\n</ul>\n"}],"owner":{"account_id":19433998,"reputation":29,"user_id":14213818,"display_name":"Sri Kavipriyan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1694625055,"creation_date":1694613953,"question_id":77097854,"body_markdown":"So, in the code provided, I&#39;m printing out the type of button that is pressed by using two interfaces, viz., MouseListener and MouseMotionListener. How do I make MouseMotionListener&#39;s mouseDragged method to differentiate the button type just like the MouseListener&#39;s MousePressed method ?\r\n\r\nBelow is the code, followed by the console output.\r\n\r\n```\r\nimport java.awt.*;\r\nimport java.awt.event.MouseEvent;\r\nimport java.awt.event.MouseListener;\r\nimport java.awt.event.MouseMotionListener;\r\n\r\nclass Mouse extends Frame implements MouseMotionListener, MouseListener {\r\n    Label l;\r\n    Color color = Color.red;\r\n\r\n    public Mouse() {\r\n        l = new Label();\r\n        l.setBounds(20, 40, 100, 20);\r\n        add(l);\r\n\r\n        addMouseListener(this);\r\n        addMouseMotionListener(this);\r\n        setSize(400, 400);\r\n        setLayout(null);\r\n        setVisible(true);\r\n\r\n    }\r\n\r\n    public void mouseDragged(MouseEvent e) {\r\n        System.out.println(&quot;MouseMotionListener:&quot;+e.getButton());\r\n        l.setText(&quot;X=&quot; + e.getX() + &quot; Y=&quot; + e.getY());\r\n    }\r\n    @Override\r\n    public void mousePressed(MouseEvent e) {\r\n        System.out.println(&quot;MouseListener:&quot;+e.getButton());\r\n    }\r\n\r\n    public void mouseMoved(MouseEvent e) {\r\n        l.setText(&quot;X=&quot; + e.getX() + &quot; Y=&quot; + e.getY());\r\n    }\r\n\r\n    @Override\r\n    public void mouseClicked(MouseEvent e) {\r\n    }\r\n\r\n\r\n    @Override\r\n    public void mouseReleased(MouseEvent e) {\r\n    }\r\n\r\n    @Override\r\n    public void mouseEntered(MouseEvent e) {\r\n    }\r\n\r\n    @Override\r\n    public void mouseExited(MouseEvent e) {\r\n    }\r\n\r\n}\r\n```\r\n\r\nOutput:\r\n\r\n```\r\nMouseListener:1\r\nMouseListener:1\r\nMouseMotionListener:0\r\nMouseMotionListener:0\r\nMouseMotionListener:0\r\nMouseMotionListener:0\r\nMouseMotionListener:0\r\nMouseMotionListener:0\r\nMouseMotionListener:0\r\nMouseMotionListener:0\r\nMouseListener:2\r\nMouseListener:2\r\nMouseMotionListener:0\r\nMouseMotionListener:0\r\nMouseMotionListener:0\r\nMouseMotionListener:0\r\nMouseMotionListener:0\r\nMouseMotionListener:0\r\nMouseMotionListener:0\r\nMouseMotionListener:0\r\nMouseMotionListener:0\r\nMouseMotionListener:0\r\nMouseMotionListener:0\r\nMouseListener:3\r\nMouseListener:3\r\nMouseMotionListener:0\r\nMouseMotionListener:0\r\nMouseMotionListener:0\r\nMouseMotionListener:0\r\nMouseMotionListener:0\r\nMouseMotionListener:0\r\nMouseMotionListener:0\r\nMouseMotionListener:0\r\nMouseMotionListener:0\r\nMouseMotionListener:0\r\nMouseMotionListener:0\r\n```","title":"Java AWT: MouseMotionListener cannot distinguish mouse buttons","body":"<p>So, in the code provided, I'm printing out the type of button that is pressed by using two interfaces, viz., MouseListener and MouseMotionListener. How do I make MouseMotionListener's mouseDragged method to differentiate the button type just like the MouseListener's MousePressed method ?</p>\n<p>Below is the code, followed by the console output.</p>\n<pre><code>import java.awt.*;\nimport java.awt.event.MouseEvent;\nimport java.awt.event.MouseListener;\nimport java.awt.event.MouseMotionListener;\n\nclass Mouse extends Frame implements MouseMotionListener, MouseListener {\n    Label l;\n    Color color = Color.red;\n\n    public Mouse() {\n        l = new Label();\n        l.setBounds(20, 40, 100, 20);\n        add(l);\n\n        addMouseListener(this);\n        addMouseMotionListener(this);\n        setSize(400, 400);\n        setLayout(null);\n        setVisible(true);\n\n    }\n\n    public void mouseDragged(MouseEvent e) {\n        System.out.println(&quot;MouseMotionListener:&quot;+e.getButton());\n        l.setText(&quot;X=&quot; + e.getX() + &quot; Y=&quot; + e.getY());\n    }\n    @Override\n    public void mousePressed(MouseEvent e) {\n        System.out.println(&quot;MouseListener:&quot;+e.getButton());\n    }\n\n    public void mouseMoved(MouseEvent e) {\n        l.setText(&quot;X=&quot; + e.getX() + &quot; Y=&quot; + e.getY());\n    }\n\n    @Override\n    public void mouseClicked(MouseEvent e) {\n    }\n\n\n    @Override\n    public void mouseReleased(MouseEvent e) {\n    }\n\n    @Override\n    public void mouseEntered(MouseEvent e) {\n    }\n\n    @Override\n    public void mouseExited(MouseEvent e) {\n    }\n\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>MouseListener:1\nMouseListener:1\nMouseMotionListener:0\nMouseMotionListener:0\nMouseMotionListener:0\nMouseMotionListener:0\nMouseMotionListener:0\nMouseMotionListener:0\nMouseMotionListener:0\nMouseMotionListener:0\nMouseListener:2\nMouseListener:2\nMouseMotionListener:0\nMouseMotionListener:0\nMouseMotionListener:0\nMouseMotionListener:0\nMouseMotionListener:0\nMouseMotionListener:0\nMouseMotionListener:0\nMouseMotionListener:0\nMouseMotionListener:0\nMouseMotionListener:0\nMouseMotionListener:0\nMouseListener:3\nMouseListener:3\nMouseMotionListener:0\nMouseMotionListener:0\nMouseMotionListener:0\nMouseMotionListener:0\nMouseMotionListener:0\nMouseMotionListener:0\nMouseMotionListener:0\nMouseMotionListener:0\nMouseMotionListener:0\nMouseMotionListener:0\nMouseMotionListener:0\n</code></pre>\n"},{"tags":["java","soap","apache-axis","soap-client","webservice-client"],"owner":{"account_id":26599006,"reputation":1,"user_id":20220903,"display_name":"Muddu Madesh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694624588,"creation_date":1694624588,"question_id":77099126,"body_markdown":"I have a web service client, and I&#39;m sending a request to a web service. However, during the request, I must include the Content-Length and Accept headers in the SOAP call.\r\n\r\nCould you please guide me on how to include these headers in the request? I&#39;m making the web service call using Axis2, and the client code is written in Java 7.\r\n\r\nPlease note that I prefer not to set a custom header. Instead, I would like to directly add the headers to the request.\r\n\r\n\\*\\*My code skeleton:\r\n\\*\\*\r\n\r\n```\r\norg.apache.axis2.client.Stub serviceClient=new org.apache.axis2.client.ServiceClient(configurationContext,_service);\r\norg.apache.axis2.client.OperationClient operationClient =serviceClient.createClient(getname());\r\norg.apache.axis2.context.MessageContext messageContext = new org.apache.axis2.context.MessageContext();\r\norg.apache.axiom.soap.SOAPEnvelope envelope = null;\r\nstub.dummy dummyWrappedType = null;\r\nenvelope = toEnvelope(getFactory(operationClient.getOptions().getSoapVersionURI()),message5,dummyWrappedType,optimizeContent(new javax.xml.namespace.QName(&quot;http://dummy&quot;,&quot;test&quot;)));\r\nserviceClient.addHeadersToEnvelope(envelope);\r\nmessageContext.setEnvelope(envelope);\r\noperationClient.addMessageContext(_messageContext);\r\noperationClient.execute(true);\r\n```\r\n\r\n**FYI**\r\nJAVA Version : 7\r\nAxis2 Version : 1.5.6\r\n\r\n1. I attempted to add the property both in the message context and client.\r\n2. I also tried setting the options in both the message context and client.\r\n\r\n```\r\nOptions options = new Options();\r\noptions.setProperty(org.apache.axis2.transport.http.HTTPConstants.HEADER_CONTENT_LENGTH, &quot;123&quot;); \r\noptions.setProperty(org.apache.axis2.transport.http.HTTPConstants.HEADER_ACCEPT, &quot;application/xml&quot;); \r\nserviceClient.setOptions(options);\r\n```\r\n\r\n3. I explored this particular case mentioned in the following [link](http://blog.facilelogin.com/search/label/Axis2%201.5).\r\n4. Additionally, I explored this case also [link](https://stackoverflow.com/questions/24151112/axis2-disable-chunked-transfer-encoding-in-axis2-xml#:~:text=we%20were%20able%20to%20disable,%2C%20%22false%22)%3B%20this.)\r\n","title":"How can I directly incorporate HTTP headers into the SOAP call request when using Axis2 to invoke a web service?","body":"<p>I have a web service client, and I'm sending a request to a web service. However, during the request, I must include the Content-Length and Accept headers in the SOAP call.</p>\n<p>Could you please guide me on how to include these headers in the request? I'm making the web service call using Axis2, and the client code is written in Java 7.</p>\n<p>Please note that I prefer not to set a custom header. Instead, I would like to directly add the headers to the request.</p>\n<p>**My code skeleton:\n**</p>\n<pre><code>org.apache.axis2.client.Stub serviceClient=new org.apache.axis2.client.ServiceClient(configurationContext,_service);\norg.apache.axis2.client.OperationClient operationClient =serviceClient.createClient(getname());\norg.apache.axis2.context.MessageContext messageContext = new org.apache.axis2.context.MessageContext();\norg.apache.axiom.soap.SOAPEnvelope envelope = null;\nstub.dummy dummyWrappedType = null;\nenvelope = toEnvelope(getFactory(operationClient.getOptions().getSoapVersionURI()),message5,dummyWrappedType,optimizeContent(new javax.xml.namespace.QName(&quot;http://dummy&quot;,&quot;test&quot;)));\nserviceClient.addHeadersToEnvelope(envelope);\nmessageContext.setEnvelope(envelope);\noperationClient.addMessageContext(_messageContext);\noperationClient.execute(true);\n</code></pre>\n<p><strong>FYI</strong>\nJAVA Version : 7\nAxis2 Version : 1.5.6</p>\n<ol>\n<li>I attempted to add the property both in the message context and client.</li>\n<li>I also tried setting the options in both the message context and client.</li>\n</ol>\n<pre><code>Options options = new Options();\noptions.setProperty(org.apache.axis2.transport.http.HTTPConstants.HEADER_CONTENT_LENGTH, &quot;123&quot;); \noptions.setProperty(org.apache.axis2.transport.http.HTTPConstants.HEADER_ACCEPT, &quot;application/xml&quot;); \nserviceClient.setOptions(options);\n</code></pre>\n<ol start=\"3\">\n<li>I explored this particular case mentioned in the following <a href=\"http://blog.facilelogin.com/search/label/Axis2%201.5\" rel=\"nofollow noreferrer\">link</a>.</li>\n<li>Additionally, I explored this case also <a href=\"https://stackoverflow.com/questions/24151112/axis2-disable-chunked-transfer-encoding-in-axis2-xml#:%7E:text=we%20were%20able%20to%20disable,%2C%20%22false%22\">link</a>%3B%20this.)</li>\n</ol>\n"},{"tags":["java","parsing"],"comments":[{"owner":{"account_id":20937,"reputation":167576,"user_id":50476,"accept_rate":100,"display_name":"Bart Kiers"},"score":0,"creation_date":1694623704,"post_id":77097408,"comment_id":135916717,"body_markdown":"If you have an ANTLR related question, please add your ANTLR grammar (and re-tag your question with antlr tags)","body":"If you have an ANTLR related question, please add your ANTLR grammar (and re-tag your question with antlr tags)"},{"owner":{"account_id":13988272,"reputation":13,"user_id":10102838,"display_name":"User1512"},"score":0,"creation_date":1694625355,"post_id":77097408,"comment_id":135917045,"body_markdown":"I would like to know whether the above mentioned condition is possible to parse in ANTLR and I would like to have a sample grammar file which can satisfy it.","body":"I would like to know whether the above mentioned condition is possible to parse in ANTLR and I would like to have a sample grammar file which can satisfy it."},{"owner":{"account_id":20937,"reputation":167576,"user_id":50476,"accept_rate":100,"display_name":"Bart Kiers"},"score":0,"creation_date":1694626254,"post_id":77097408,"comment_id":135917220,"body_markdown":"Yes, that can easily be done with ANTLR. Here is an example: https://stackoverflow.com/questions/30976962/nested-boolean-expression-parser-using-antlr You only need some small changes to get it working. Try it yourself first, study how things work with ANTLR by reading some tutorials. And ask specific questions if you get stuck.","body":"Yes, that can easily be done with ANTLR. Here is an example: <a href=\"https://stackoverflow.com/questions/30976962/nested-boolean-expression-parser-using-antlr\" title=\"nested boolean expression parser using antlr\">stackoverflow.com/questions/30976962/&hellip;</a> You only need some small changes to get it working. Try it yourself first, study how things work with ANTLR by reading some tutorials. And ask specific questions if you get stuck."},{"owner":{"account_id":13988272,"reputation":13,"user_id":10102838,"display_name":"User1512"},"score":0,"creation_date":1694704722,"post_id":77097408,"comment_id":135929327,"body_markdown":"Thank you so much @Bart Kiers. I was able to do most of the conditions which I wanted. I would like to do with some string functions like CONTAINS and STARTS WITH can you give a sample for that?","body":"Thank you so much @Bart Kiers. I was able to do most of the conditions which I wanted. I would like to do with some string functions like CONTAINS and STARTS WITH can you give a sample for that?"},{"owner":{"account_id":20937,"reputation":167576,"user_id":50476,"accept_rate":100,"display_name":"Bart Kiers"},"score":0,"creation_date":1694705431,"post_id":77097408,"comment_id":135929494,"body_markdown":"Try it yourself first, study how things work with ANTLR by reading some tutorials. And ask specific questions if you get stuck by creating a new question. These comment boxes are ill suited for Q&amp;A&#39;s.","body":"Try it yourself first, study how things work with ANTLR by reading some tutorials. And ask specific questions if you get stuck by creating a new question. These comment boxes are ill suited for Q&amp;A&#39;s."},{"owner":{"account_id":13988272,"reputation":13,"user_id":10102838,"display_name":"User1512"},"score":0,"creation_date":1694707866,"post_id":77097408,"comment_id":135930034,"body_markdown":"https://stackoverflow.com/questions/77106698/antlr-accepting-special-characters-like-dot-and-comma-in-identifier-or-e","body":"<a href=\"https://stackoverflow.com/questions/77106698/antlr-accepting-special-characters-like-dot-and-comma-in-identifier-or-e\" title=\"antlr accepting special characters like dot and comma in identifier or e\">stackoverflow.com/questions/77106698/&hellip;</a>"}],"owner":{"account_id":13988272,"reputation":13,"user_id":10102838,"display_name":"User1512"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694623654,"creation_date":1694610823,"question_id":77097408,"body_markdown":"I have a requirement to execute dynamic expressions for the input data (Map) using Java Code. For Example,\r\n\r\n**Condition -**\r\n\r\n```\r\nEmployeeShift = &#39;General&#39; AND (EmployeeType = &#39;CONTRACT&#39; OR Designation IN &#39;ADMIN&#39;)\r\n```\r\nThis expression will be passed on as string variable and with this I have to evaluate my input data which comes at run time. So I&#39;m looking for a parser to parse the condition.\r\n\r\nUsing the answer of @TagirValeev from - [stackoverflow&#39;s post](https://stackoverflow.com/questions/32193036/resolving-logical-operations-and-or-looping-conditions-dynamically) I was able to parse AND, OR operations. But I&#39;m not sure how to extend it for NOT operation. I&#39;m expecting something to work like below where the expression checks for combined NOT operation for EmployeeType and Designation, rather than checking for each variable.\r\n\r\n```\r\nEmployeeShift = &#39;General&#39; AND NOT(EmployeeType = &#39;CONTRACT&#39; OR Designation IN &#39;ADMIN&#39;)\r\n```\r\n\r\n    if(EmployeeShift = &#39;General&#39; &amp;&amp; !(EmployeeType = &#39;CONTRACT&#39; || Designation IN &#39;ADMIN&#39;))\r\n\r\nI tried checking from native Java Code but none worked so decided to use ANTLR if any one can help me with some example for the above condition it will be of huge help. Thanks in Advance.\r\n","title":"ANTLR Evaluating Logical Operations AND, OR, NOT dynamically in Java","body":"<p>I have a requirement to execute dynamic expressions for the input data (Map) using Java Code. For Example,</p>\n<p><strong>Condition -</strong></p>\n<pre><code>EmployeeShift = 'General' AND (EmployeeType = 'CONTRACT' OR Designation IN 'ADMIN')\n</code></pre>\n<p>This expression will be passed on as string variable and with this I have to evaluate my input data which comes at run time. So I'm looking for a parser to parse the condition.</p>\n<p>Using the answer of @TagirValeev from - <a href=\"https://stackoverflow.com/questions/32193036/resolving-logical-operations-and-or-looping-conditions-dynamically\">stackoverflow's post</a> I was able to parse AND, OR operations. But I'm not sure how to extend it for NOT operation. I'm expecting something to work like below where the expression checks for combined NOT operation for EmployeeType and Designation, rather than checking for each variable.</p>\n<pre><code>EmployeeShift = 'General' AND NOT(EmployeeType = 'CONTRACT' OR Designation IN 'ADMIN')\n</code></pre>\n<pre><code>if(EmployeeShift = 'General' &amp;&amp; !(EmployeeType = 'CONTRACT' || Designation IN 'ADMIN'))\n</code></pre>\n<p>I tried checking from native Java Code but none worked so decided to use ANTLR if any one can help me with some example for the above condition it will be of huge help. Thanks in Advance.</p>\n"},{"tags":["java","hibernate","jboss","wildfly"],"comments":[{"owner":{"account_id":1491171,"reputation":3291,"user_id":1398228,"display_name":"ehsavoie"},"score":0,"creation_date":1694681268,"post_id":77098995,"comment_id":135923949,"body_markdown":"It seems that there is something around the &#39;tipo&#39; attribute that causes this.","body":"It seems that there is something around the &#39;tipo&#39; attribute that causes this."},{"owner":{"account_id":2892453,"reputation":126,"user_id":2909927,"display_name":"Martin Choma"},"score":1,"creation_date":1695064805,"post_id":77098995,"comment_id":135971636,"body_markdown":"You are saying you use 6.3.0, but stacktrace says 6.1.5 is used. Aren&#39;t you relying on feature from 6.3.0, which is not implemented in 6.1.5 yet?","body":"You are saying you use 6.3.0, but stacktrace says 6.1.5 is used. Aren&#39;t you relying on feature from 6.3.0, which is not implemented in 6.1.5 yet?"},{"owner":{"account_id":50594,"reputation":12311,"user_id":151004,"accept_rate":83,"display_name":"thoredge"},"score":0,"creation_date":1697703037,"post_id":77098995,"comment_id":136313840,"body_markdown":"Hibernate 6.1.5 is a &quot;feature pack&quot; with Wildfly 27","body":"Hibernate 6.1.5 is a &quot;feature pack&quot; with Wildfly 27"}],"owner":{"account_id":10118761,"reputation":11,"user_id":7476497,"display_name":"Emerson Diego"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":111,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694623316,"creation_date":1694623316,"question_id":77098995,"body_markdown":"I&#39;m in the process of migrating a system from Wildfly 21 to Wildfly 27. In the previous system, we were using hibernate-core 5, but for Wildfly 27, we&#39;ve upgraded to version 6.3.0.\r\n\r\nI managed to address all the issues related to migrating to jakarta.persistence, but now I&#39;m facing a specific problem that I can&#39;t resolve. Below are the error details:\r\n\r\n\r\n```\r\n10:50:21,061 DEBUG [org.hibernate.service.internal.AbstractServiceRegistryImpl] (ServerService Thread Pool -- 80) Implicitly destroying ServiceRegistry on de-registration of all child ServiceRegistries\r\n10:50:21,062 INFO  [org.hibernate.orm.beans] (ServerService Thread Pool -- 80) HHH10005004: Stopping BeanContainer : org.hibernate.resource.beans.container.internal.CdiBeanContainerExtendedAccessImpl@6c72da89\r\n10:50:21,063 INFO  [org.hibernate.service.internal.AbstractServiceRegistryImpl] (ServerService Thread Pool -- 80) HHH000369: Error stopping service [class org.hibernate.resource.beans.internal.ManagedBeanRegistryImpl]: java.lang.NullPointerException: Cannot invoke &quot;org.hibernate.resource.beans.container.spi.ContainedBeanImplementor.release()&quot; because &quot;this.delegateContainedBean&quot; is null\r\n\tat org.hibernate@6.1.5.Final//org.hibernate.resource.beans.container.internal.CdiBeanContainerExtendedAccessImpl$BeanImpl.release(CdiBeanContainerExtendedAccessImpl.java:132)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.hibernate@6.1.5.Final//org.hibernate.resource.beans.container.spi.AbstractCdiBeanContainer.forEachBean(AbstractCdiBeanContainer.java:138)\r\n\tat org.hibernate@6.1.5.Final//org.hibernate.resource.beans.container.spi.AbstractCdiBeanContainer.stop(AbstractCdiBeanContainer.java:144)\r\n\tat org.hibernate@6.1.5.Final//org.hibernate.resource.beans.internal.ManagedBeanRegistryImpl.stop(ManagedBeanRegistryImpl.java:134)\r\n\tat org.hibernate@6.1.5.Final//org.hibernate.service.internal.AbstractServiceRegistryImpl.stopService(AbstractServiceRegistryImpl.java:374)\r\n\tat org.hibernate@6.1.5.Final//org.hibernate.service.internal.AbstractServiceRegistryImpl.destroy(AbstractServiceRegistryImpl.java:357)\r\n\tat org.hibernate@6.1.5.Final//org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.destroy(StandardServiceRegistryImpl.java:131)\r\n\tat org.hibernate@6.1.5.Final//org.hibernate.service.internal.AbstractServiceRegistryImpl.deRegisterChild(AbstractServiceRegistryImpl.java:407)\r\n\tat org.hibernate@6.1.5.Final//org.hibernate.service.internal.AbstractServiceRegistryImpl.destroy(AbstractServiceRegistryImpl.java:364)\r\n\tat org.hibernate@6.1.5.Final//org.hibernate.service.spi.ServiceRegistryImplementor.close(ServiceRegistryImplementor.java:30)\r\n\tat org.hibernate@6.1.5.Final//org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:402)\r\n\tat org.hibernate@6.1.5.Final//org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)\r\n\tat org.hibernate@6.1.5.Final//org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425)\r\n\tat org.hibernate.jipijapa-hibernate6@27.0.1.Final//org.jboss.as.jpa.hibernate.TwoPhaseBootstrapImpl.build(TwoPhaseBootstrapImpl.java:45)\r\n\tat org.jboss.as.jpa@27.0.1.Final//org.jboss.as.jpa.service.PersistenceUnitServiceImpl$1$1.run(PersistenceUnitServiceImpl.java:171)\r\n\tat org.jboss.as.jpa@27.0.1.Final//org.jboss.as.jpa.service.PersistenceUnitServiceImpl$1$1.run(PersistenceUnitServiceImpl.java:129)\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n\tat org.wildfly.security.elytron-base@2.0.0.Final//org.wildfly.security.manager.WildFlySecurityManager.doChecked(WildFlySecurityManager.java:664)\r\n\tat org.jboss.as.jpa@27.0.1.Final//org.jboss.as.jpa.service.PersistenceUnitServiceImpl$1.run(PersistenceUnitServiceImpl.java:214)\r\n\tat org.jboss.threads@2.4.0.Final//org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\r\n\tat org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\r\n\tat org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\r\n\tat org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\n\tat org.jboss.threads@2.4.0.Final//org.jboss.threads.JBossThread.run(JBossThread.java:513)\r\n\r\n10:50:21,063 DEBUG [org.infinispan.hibernate.cache.v60.InfinispanRegionFactory] (ServerService Thread Pool -- 80) Stop region factory\r\n10:50:21,063 DEBUG [org.infinispan.hibernate.cache.v60.InfinispanRegionFactory] (ServerService Thread Pool -- 80) Clear region references\r\n10:50:21,063 DEBUG [org.infinispan.hibernate.cache.v60.InfinispanRegionFactory] (ServerService Thread Pool -- 80) Stop cache manager\r\n10:50:21,066 DEBUG [org.hibernate.boot.registry.internal.BootstrapServiceRegistryImpl] (ServerService Thread Pool -- 80) Implicitly destroying Boot-strap registry on de-registration of all child ServiceRegistries\r\n10:50:21,066 DEBUG [org.hibernate.internal.SessionFactoryImpl] (ServerService Thread Pool -- 80) HHH000031: Closing\r\n10:50:21,066 DEBUG [org.hibernate.internal.SessionFactoryImpl] (ServerService Thread Pool -- 80) Eating error closing SF on failed attempt to start it\r\n10:50:21,066 ERROR [org.jboss.msc.service.fail] (ServerService Thread Pool -- 80) MSC000001: Failed to start service jboss.persistenceunit.&quot;sigeprs-3.0.21-SNAPSHOT.war#SIGEP_PU&quot;: org.jboss.msc.service.StartException in service jboss.persistenceunit.&quot;sigeprs-3.0.21-SNAPSHOT.war#SIGEP_PU&quot;: jakarta.persistence.PersistenceException: [PersistenceUnit: SIGEP_PU] Unable to build Hibernate SessionFactory\r\n\tat org.jboss.as.jpa@27.0.1.Final//org.jboss.as.jpa.service.PersistenceUnitServiceImpl$1$1.run(PersistenceUnitServiceImpl.java:199)\r\n\tat org.jboss.as.jpa@27.0.1.Final//org.jboss.as.jpa.service.PersistenceUnitServiceImpl$1$1.run(PersistenceUnitServiceImpl.java:129)\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n\tat org.wildfly.security.elytron-base@2.0.0.Final//org.wildfly.security.manager.WildFlySecurityManager.doChecked(WildFlySecurityManager.java:664)\r\n\tat org.jboss.as.jpa@27.0.1.Final//org.jboss.as.jpa.service.PersistenceUnitServiceImpl$1.run(PersistenceUnitServiceImpl.java:214)\r\n\tat org.jboss.threads@2.4.0.Final//org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\r\n\tat org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\r\n\tat org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\r\n\tat org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\n\tat org.jboss.threads@2.4.0.Final//org.jboss.threads.JBossThread.run(JBossThread.java:513)\r\nCaused by: jakarta.persistence.PersistenceException: [PersistenceUnit: SIGEP_PU] Unable to build Hibernate SessionFactory\r\n\tat org.hibernate@6.1.5.Final//org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.persistenceException(EntityManagerFactoryBuilderImpl.java:1509)\r\n\tat org.hibernate@6.1.5.Final//org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1430)\r\n\tat org.hibernate.jipijapa-hibernate6@27.0.1.Final//org.jboss.as.jpa.hibernate.TwoPhaseBootstrapImpl.build(TwoPhaseBootstrapImpl.java:45)\r\n\tat org.jboss.as.jpa@27.0.1.Final//org.jboss.as.jpa.service.PersistenceUnitServiceImpl$1$1.run(PersistenceUnitServiceImpl.java:171)\r\n\t... 10 more\r\nCaused by: org.hibernate.NotYetImplementedFor6Exception: Only support for basic-valued, entity-valued and embedded model-parts have been implemented : tipo [null]\r\n\tat org.hibernate@6.1.5.Final//org.hibernate.boot.query.SqlResultSetMappingDescriptor$AttributeFetchDescriptor.getFetchMemento(SqlResultSetMappingDescriptor.java:439)\r\n\tat org.hibernate@6.1.5.Final//org.hibernate.boot.query.SqlResultSetMappingDescriptor$AttributeFetchDescriptor.resolve(SqlResultSetMappingDescriptor.java:421)\r\n\tat org.hibernate@6.1.5.Final//org.hibernate.boot.query.SqlResultSetMappingDescriptor$EntityResultDescriptor.lambda$resolve$0(SqlResultSetMappingDescriptor.java:285)\r\n\tat java.base/java.util.HashMap.forEach(HashMap.java:1421)\r\n\tat org.hibernate@6.1.5.Final//org.hibernate.boot.query.SqlResultSetMappingDescriptor$EntityResultDescriptor.resolve(SqlResultSetMappingDescriptor.java:282)\r\n\tat org.hibernate@6.1.5.Final//org.hibernate.boot.query.SqlResultSetMappingDescriptor.lambda$resolve$0(SqlResultSetMappingDescriptor.java:131)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.hibernate@6.1.5.Final//org.hibernate.boot.query.SqlResultSetMappingDescriptor.resolve(SqlResultSetMappingDescriptor.java:130)\r\n\tat org.hibernate@6.1.5.Final//org.hibernate.query.internal.NamedObjectRepositoryImpl.lambda$prepare$3(NamedObjectRepositoryImpl.java:193)\r\n\tat java.base/java.util.HashMap$Values.forEach(HashMap.java:1065)\r\n\tat org.hibernate@6.1.5.Final//org.hibernate.boot.internal.MetadataImpl.visitNamedResultSetMappingDefinition(MetadataImpl.java:261)\r\n\tat org.hibernate@6.1.5.Final//org.hibernate.query.internal.NamedObjectRepositoryImpl.prepare(NamedObjectRepositoryImpl.java:191)\r\n\tat org.hibernate@6.1.5.Final//org.hibernate.query.spi.QueryEngine.prepare(QueryEngine.java:380)\r\n\tat org.hibernate@6.1.5.Final//org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:315)\r\n\tat org.hibernate@6.1.5.Final//org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)\r\n\tat org.hibernate@6.1.5.Final//org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425)\r\n\t... 12 more\r\n\r\n10:50:21,069 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (&quot;deploy&quot;) failed - address: ([(&quot;deployment&quot; =&gt; &quot;sigeprs-3.0.21-SNAPSHOT.war&quot;)]) - failure description: {&quot;WFLYCTL0080: Failed services&quot; =&gt; {&quot;jboss.persistenceunit.\\&quot;sigeprs-3.0.21-SNAPSHOT.war#SIGEP_PU\\&quot;&quot; =&gt; &quot;jakarta.persistence.PersistenceException: [PersistenceUnit: SIGEP_PU] Unable to build Hibernate SessionFactory\r\n    Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: SIGEP_PU] Unable to build Hibernate SessionFactory\r\n    Caused by: org.hibernate.NotYetImplementedFor6Exception: Only support for basic-valued, entity-valued and embedded model-parts have been implemented : tipo [null]&quot;}}\r\n```\r\n\r\nBefore posting here, I tried the following solutions:\r\n\r\n - Checked all dependencies to ensure there are no conflicts. \r\n - Researched the NotYetImplementedFor6Exception error to better understand the issue. \r\n - Reviewed the persistence.xml configuration to ensure\r\n   everything is correct.\r\n\r\nHowever, I&#39;m still stuck with this error. Has anyone encountered this or have any suggestions on how to resolve it?\r\n\r\nThank you in advance for the help!","title":"Error migrating from Wildfly 21 to Wildfly 27 with Hibernate 6.3.0","body":"<p>I'm in the process of migrating a system from Wildfly 21 to Wildfly 27. In the previous system, we were using hibernate-core 5, but for Wildfly 27, we've upgraded to version 6.3.0.</p>\n<p>I managed to address all the issues related to migrating to jakarta.persistence, but now I'm facing a specific problem that I can't resolve. Below are the error details:</p>\n<pre><code>10:50:21,061 DEBUG [org.hibernate.service.internal.AbstractServiceRegistryImpl] (ServerService Thread Pool -- 80) Implicitly destroying ServiceRegistry on de-registration of all child ServiceRegistries\n10:50:21,062 INFO  [org.hibernate.orm.beans] (ServerService Thread Pool -- 80) HHH10005004: Stopping BeanContainer : org.hibernate.resource.beans.container.internal.CdiBeanContainerExtendedAccessImpl@6c72da89\n10:50:21,063 INFO  [org.hibernate.service.internal.AbstractServiceRegistryImpl] (ServerService Thread Pool -- 80) HHH000369: Error stopping service [class org.hibernate.resource.beans.internal.ManagedBeanRegistryImpl]: java.lang.NullPointerException: Cannot invoke &quot;org.hibernate.resource.beans.container.spi.ContainedBeanImplementor.release()&quot; because &quot;this.delegateContainedBean&quot; is null\n    at org.hibernate@6.1.5.Final//org.hibernate.resource.beans.container.internal.CdiBeanContainerExtendedAccessImpl$BeanImpl.release(CdiBeanContainerExtendedAccessImpl.java:132)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.hibernate@6.1.5.Final//org.hibernate.resource.beans.container.spi.AbstractCdiBeanContainer.forEachBean(AbstractCdiBeanContainer.java:138)\n    at org.hibernate@6.1.5.Final//org.hibernate.resource.beans.container.spi.AbstractCdiBeanContainer.stop(AbstractCdiBeanContainer.java:144)\n    at org.hibernate@6.1.5.Final//org.hibernate.resource.beans.internal.ManagedBeanRegistryImpl.stop(ManagedBeanRegistryImpl.java:134)\n    at org.hibernate@6.1.5.Final//org.hibernate.service.internal.AbstractServiceRegistryImpl.stopService(AbstractServiceRegistryImpl.java:374)\n    at org.hibernate@6.1.5.Final//org.hibernate.service.internal.AbstractServiceRegistryImpl.destroy(AbstractServiceRegistryImpl.java:357)\n    at org.hibernate@6.1.5.Final//org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.destroy(StandardServiceRegistryImpl.java:131)\n    at org.hibernate@6.1.5.Final//org.hibernate.service.internal.AbstractServiceRegistryImpl.deRegisterChild(AbstractServiceRegistryImpl.java:407)\n    at org.hibernate@6.1.5.Final//org.hibernate.service.internal.AbstractServiceRegistryImpl.destroy(AbstractServiceRegistryImpl.java:364)\n    at org.hibernate@6.1.5.Final//org.hibernate.service.spi.ServiceRegistryImplementor.close(ServiceRegistryImplementor.java:30)\n    at org.hibernate@6.1.5.Final//org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:402)\n    at org.hibernate@6.1.5.Final//org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)\n    at org.hibernate@6.1.5.Final//org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425)\n    at org.hibernate.jipijapa-hibernate6@27.0.1.Final//org.jboss.as.jpa.hibernate.TwoPhaseBootstrapImpl.build(TwoPhaseBootstrapImpl.java:45)\n    at org.jboss.as.jpa@27.0.1.Final//org.jboss.as.jpa.service.PersistenceUnitServiceImpl$1$1.run(PersistenceUnitServiceImpl.java:171)\n    at org.jboss.as.jpa@27.0.1.Final//org.jboss.as.jpa.service.PersistenceUnitServiceImpl$1$1.run(PersistenceUnitServiceImpl.java:129)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n    at org.wildfly.security.elytron-base@2.0.0.Final//org.wildfly.security.manager.WildFlySecurityManager.doChecked(WildFlySecurityManager.java:664)\n    at org.jboss.as.jpa@27.0.1.Final//org.jboss.as.jpa.service.PersistenceUnitServiceImpl$1.run(PersistenceUnitServiceImpl.java:214)\n    at org.jboss.threads@2.4.0.Final//org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\n    at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\n    at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\n    at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\n    at java.base/java.lang.Thread.run(Thread.java:833)\n    at org.jboss.threads@2.4.0.Final//org.jboss.threads.JBossThread.run(JBossThread.java:513)\n\n10:50:21,063 DEBUG [org.infinispan.hibernate.cache.v60.InfinispanRegionFactory] (ServerService Thread Pool -- 80) Stop region factory\n10:50:21,063 DEBUG [org.infinispan.hibernate.cache.v60.InfinispanRegionFactory] (ServerService Thread Pool -- 80) Clear region references\n10:50:21,063 DEBUG [org.infinispan.hibernate.cache.v60.InfinispanRegionFactory] (ServerService Thread Pool -- 80) Stop cache manager\n10:50:21,066 DEBUG [org.hibernate.boot.registry.internal.BootstrapServiceRegistryImpl] (ServerService Thread Pool -- 80) Implicitly destroying Boot-strap registry on de-registration of all child ServiceRegistries\n10:50:21,066 DEBUG [org.hibernate.internal.SessionFactoryImpl] (ServerService Thread Pool -- 80) HHH000031: Closing\n10:50:21,066 DEBUG [org.hibernate.internal.SessionFactoryImpl] (ServerService Thread Pool -- 80) Eating error closing SF on failed attempt to start it\n10:50:21,066 ERROR [org.jboss.msc.service.fail] (ServerService Thread Pool -- 80) MSC000001: Failed to start service jboss.persistenceunit.&quot;sigeprs-3.0.21-SNAPSHOT.war#SIGEP_PU&quot;: org.jboss.msc.service.StartException in service jboss.persistenceunit.&quot;sigeprs-3.0.21-SNAPSHOT.war#SIGEP_PU&quot;: jakarta.persistence.PersistenceException: [PersistenceUnit: SIGEP_PU] Unable to build Hibernate SessionFactory\n    at org.jboss.as.jpa@27.0.1.Final//org.jboss.as.jpa.service.PersistenceUnitServiceImpl$1$1.run(PersistenceUnitServiceImpl.java:199)\n    at org.jboss.as.jpa@27.0.1.Final//org.jboss.as.jpa.service.PersistenceUnitServiceImpl$1$1.run(PersistenceUnitServiceImpl.java:129)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n    at org.wildfly.security.elytron-base@2.0.0.Final//org.wildfly.security.manager.WildFlySecurityManager.doChecked(WildFlySecurityManager.java:664)\n    at org.jboss.as.jpa@27.0.1.Final//org.jboss.as.jpa.service.PersistenceUnitServiceImpl$1.run(PersistenceUnitServiceImpl.java:214)\n    at org.jboss.threads@2.4.0.Final//org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\n    at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\n    at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\n    at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\n    at java.base/java.lang.Thread.run(Thread.java:833)\n    at org.jboss.threads@2.4.0.Final//org.jboss.threads.JBossThread.run(JBossThread.java:513)\nCaused by: jakarta.persistence.PersistenceException: [PersistenceUnit: SIGEP_PU] Unable to build Hibernate SessionFactory\n    at org.hibernate@6.1.5.Final//org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.persistenceException(EntityManagerFactoryBuilderImpl.java:1509)\n    at org.hibernate@6.1.5.Final//org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1430)\n    at org.hibernate.jipijapa-hibernate6@27.0.1.Final//org.jboss.as.jpa.hibernate.TwoPhaseBootstrapImpl.build(TwoPhaseBootstrapImpl.java:45)\n    at org.jboss.as.jpa@27.0.1.Final//org.jboss.as.jpa.service.PersistenceUnitServiceImpl$1$1.run(PersistenceUnitServiceImpl.java:171)\n    ... 10 more\nCaused by: org.hibernate.NotYetImplementedFor6Exception: Only support for basic-valued, entity-valued and embedded model-parts have been implemented : tipo [null]\n    at org.hibernate@6.1.5.Final//org.hibernate.boot.query.SqlResultSetMappingDescriptor$AttributeFetchDescriptor.getFetchMemento(SqlResultSetMappingDescriptor.java:439)\n    at org.hibernate@6.1.5.Final//org.hibernate.boot.query.SqlResultSetMappingDescriptor$AttributeFetchDescriptor.resolve(SqlResultSetMappingDescriptor.java:421)\n    at org.hibernate@6.1.5.Final//org.hibernate.boot.query.SqlResultSetMappingDescriptor$EntityResultDescriptor.lambda$resolve$0(SqlResultSetMappingDescriptor.java:285)\n    at java.base/java.util.HashMap.forEach(HashMap.java:1421)\n    at org.hibernate@6.1.5.Final//org.hibernate.boot.query.SqlResultSetMappingDescriptor$EntityResultDescriptor.resolve(SqlResultSetMappingDescriptor.java:282)\n    at org.hibernate@6.1.5.Final//org.hibernate.boot.query.SqlResultSetMappingDescriptor.lambda$resolve$0(SqlResultSetMappingDescriptor.java:131)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.hibernate@6.1.5.Final//org.hibernate.boot.query.SqlResultSetMappingDescriptor.resolve(SqlResultSetMappingDescriptor.java:130)\n    at org.hibernate@6.1.5.Final//org.hibernate.query.internal.NamedObjectRepositoryImpl.lambda$prepare$3(NamedObjectRepositoryImpl.java:193)\n    at java.base/java.util.HashMap$Values.forEach(HashMap.java:1065)\n    at org.hibernate@6.1.5.Final//org.hibernate.boot.internal.MetadataImpl.visitNamedResultSetMappingDefinition(MetadataImpl.java:261)\n    at org.hibernate@6.1.5.Final//org.hibernate.query.internal.NamedObjectRepositoryImpl.prepare(NamedObjectRepositoryImpl.java:191)\n    at org.hibernate@6.1.5.Final//org.hibernate.query.spi.QueryEngine.prepare(QueryEngine.java:380)\n    at org.hibernate@6.1.5.Final//org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:315)\n    at org.hibernate@6.1.5.Final//org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415)\n    at org.hibernate@6.1.5.Final//org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425)\n    ... 12 more\n\n10:50:21,069 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (&quot;deploy&quot;) failed - address: ([(&quot;deployment&quot; =&gt; &quot;sigeprs-3.0.21-SNAPSHOT.war&quot;)]) - failure description: {&quot;WFLYCTL0080: Failed services&quot; =&gt; {&quot;jboss.persistenceunit.\\&quot;sigeprs-3.0.21-SNAPSHOT.war#SIGEP_PU\\&quot;&quot; =&gt; &quot;jakarta.persistence.PersistenceException: [PersistenceUnit: SIGEP_PU] Unable to build Hibernate SessionFactory\n    Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: SIGEP_PU] Unable to build Hibernate SessionFactory\n    Caused by: org.hibernate.NotYetImplementedFor6Exception: Only support for basic-valued, entity-valued and embedded model-parts have been implemented : tipo [null]&quot;}}\n</code></pre>\n<p>Before posting here, I tried the following solutions:</p>\n<ul>\n<li>Checked all dependencies to ensure there are no conflicts.</li>\n<li>Researched the NotYetImplementedFor6Exception error to better understand the issue.</li>\n<li>Reviewed the persistence.xml configuration to ensure\neverything is correct.</li>\n</ul>\n<p>However, I'm still stuck with this error. Has anyone encountered this or have any suggestions on how to resolve it?</p>\n<p>Thank you in advance for the help!</p>\n"},{"tags":["java","swing","gettext","jfilechooser"],"comments":[{"owner":{"account_id":18378473,"reputation":203,"user_id":13387015,"display_name":"DedS3t"},"score":0,"creation_date":1597788528,"post_id":63477293,"comment_id":112247336,"body_markdown":"Are you trying to get the file name?","body":"Are you trying to get the file name?"},{"owner":{"account_id":16345841,"reputation":45,"user_id":12816949,"display_name":"Miguel Clich&#233;"},"score":0,"creation_date":1597788674,"post_id":63477293,"comment_id":112247379,"body_markdown":"No, I am trying to get the text you write there, the file name only works if I select a file in the File Chooser","body":"No, I am trying to get the text you write there, the file name only works if I select a file in the File Chooser"}],"answers":[{"tags":[],"owner":{"account_id":18378473,"reputation":203,"user_id":13387015,"display_name":"DedS3t"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1600227159,"creation_date":1597789123,"answer_id":63477391,"question_id":63477293,"body_markdown":"Here is an example I wrote: \r\n\r\n    JFileChooser x=new JFileChooser();\r\n    int returnVal=x.showOpenDialog(this);\r\n    File file=x.getSelectedFile();\r\n    System.out.println(file.getName());\r\n\r\nEven though the file isn&#39;t an actual file it would still print out what is in the box when you call `file.getName()`. When I typed a random string of characters it returned the string of characters even though it&#39;s not a file.","title":"How can I get this value from a JFileChooser?","body":"<p>Here is an example I wrote:</p>\n<pre><code>JFileChooser x=new JFileChooser();\nint returnVal=x.showOpenDialog(this);\nFile file=x.getSelectedFile();\nSystem.out.println(file.getName());\n</code></pre>\n<p>Even though the file isn't an actual file it would still print out what is in the box when you call <code>file.getName()</code>. When I typed a random string of characters it returned the string of characters even though it's not a file.</p>\n"}],"owner":{"account_id":16345841,"reputation":45,"user_id":12816949,"display_name":"Miguel Clich&#233;"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":132,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":63477391,"answer_count":1,"score":3,"last_activity_date":1694623225,"creation_date":1597788479,"question_id":63477293,"body_markdown":"I want to know if there&#39;s a way to get the text the user writes in a `JFileChooser` after pressing &quot;accept&quot; (I removed the confirm and cancel buttons) like a text field (`.getText()`).\r\n\r\n[Screenshot][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/EcNaH.png","title":"How can I get this value from a JFileChooser?","body":"<p>I want to know if there's a way to get the text the user writes in a <code>JFileChooser</code> after pressing &quot;accept&quot; (I removed the confirm and cancel buttons) like a text field (<code>.getText()</code>).</p>\n<p><a href=\"https://i.stack.imgur.com/EcNaH.png\" rel=\"nofollow noreferrer\">Screenshot</a></p>\n"},{"tags":["java","docker","jvm","headless","alpine-linux"],"answers":[{"comments":[{"owner":{"account_id":515883,"reputation":4966,"user_id":1128668,"accept_rate":54,"display_name":"GlenPeterson"},"score":1,"creation_date":1531771816,"post_id":39861372,"comment_id":89711052,"body_markdown":"I tried using openjdk8-jre-base instead of openjdk8-jre, but it didn&#39;t work either.  Your answer is perfect, thank you!","body":"I tried using openjdk8-jre-base instead of openjdk8-jre, but it didn&#39;t work either.  Your answer is perfect, thank you!"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1694617721,"post_id":39861372,"comment_id":135915555,"body_markdown":"I assume this should say `openjdk8-jre-headless`?","body":"I assume this should say <code>openjdk8-jre-headless</code>?"},{"owner":{"account_id":5338362,"reputation":7671,"user_id":4256475,"display_name":"Jason Hoetger"},"score":0,"creation_date":1694622190,"post_id":39861372,"comment_id":135916423,"body_markdown":"Instead of `openjdk8-jre-head`? Yes quite possibly, that might be a typo. Did a quick check and couldn&#39;t find `openjdk8-jre-head[less]` in the Alpine pkg repository so I&#39;ll remove that to  avoid confusion. AL 3.4 (and JDK8) is ancient now but in principal the answer probably applies to any Java 8 install on more recent Alpines, too.","body":"Instead of <code>openjdk8-jre-head</code>? Yes quite possibly, that might be a typo. Did a quick check and couldn&#39;t find <code>openjdk8-jre-head[less]</code> in the Alpine pkg repository so I&#39;ll remove that to  avoid confusion. AL 3.4 (and JDK8) is ancient now but in principal the answer probably applies to any Java 8 install on more recent Alpines, too."}],"tags":[],"owner":{"account_id":5338362,"reputation":7671,"user_id":4256475,"display_name":"Jason Hoetger"},"comment_count":3,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1694622217,"creation_date":1475613610,"answer_id":39861372,"question_id":37251309,"body_markdown":"I ran into this exact same problem running Alpine Linux 3.4. I solved the problem by following the directions in [this github issue](https://github.com/docker-library/openjdk/issues/73):\r\n\r\n1. Install the JRE with GUI support, i.e. `openjdk8-jre`\r\n2. Install the `fontconfig` and `ttf-dejavu` packages\r\n\r\nThe RUN line in my Dockerfile looks like:\r\n\r\n    RUN apk add openjdk8-jre fontconfig ttf-dejavu\r\n\r\nAfter this, the JDK was able to load the default fonts automatically, and the exception went away.","title":"no fontmanager in java.library.path","body":"<p>I ran into this exact same problem running Alpine Linux 3.4. I solved the problem by following the directions in <a href=\"https://github.com/docker-library/openjdk/issues/73\" rel=\"nofollow noreferrer\">this github issue</a>:</p>\n<ol>\n<li>Install the JRE with GUI support, i.e. <code>openjdk8-jre</code></li>\n<li>Install the <code>fontconfig</code> and <code>ttf-dejavu</code> packages</li>\n</ol>\n<p>The RUN line in my Dockerfile looks like:</p>\n<pre><code>RUN apk add openjdk8-jre fontconfig ttf-dejavu\n</code></pre>\n<p>After this, the JDK was able to load the default fonts automatically, and the exception went away.</p>\n"},{"tags":[],"owner":{"account_id":3618585,"reputation":281,"user_id":3017908,"display_name":"Phani Chakradhar"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1612961042,"creation_date":1612960620,"answer_id":66137020,"question_id":37251309,"body_markdown":"I ran into the same issue with my docker image for which I used Java 11 app base which does not have GUI libraries installed. I got the error like **no font manager** and the cause for that error is -&gt; it is failing to read/create font using awt library.\r\n\r\nWhen used the java stretch image with GUI support the error gone away.","title":"no fontmanager in java.library.path","body":"<p>I ran into the same issue with my docker image for which I used Java 11 app base which does not have GUI libraries installed. I got the error like <strong>no font manager</strong> and the cause for that error is -&gt; it is failing to read/create font using awt library.</p>\n<p>When used the java stretch image with GUI support the error gone away.</p>\n"}],"owner":{"account_id":1268721,"reputation":2821,"user_id":1225463,"accept_rate":43,"display_name":"benjamin.d"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4465,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":39861372,"answer_count":2,"score":3,"last_activity_date":1694622217,"creation_date":1463393079,"question_id":37251309,"body_markdown":"The following code works just fine on my desktop:\r\n\r\n            BufferedImage image = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);\r\n            Graphics g = image.getGraphics();\r\n            g.setFont(new Font(&quot;SansSerif&quot;, Font.BOLD, 18));\r\n\r\n            Graphics2D graphics = (Graphics2D) g;\r\n            graphics.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING, RenderingHints.VALUE_TEXT_ANTIALIAS_ON);\r\n            graphics.drawString(s, 5, 20);\r\n\r\nHowever, when I run this code on my server (openjdk running on linux alpine within a Docker container), it fails with the following error: \r\n\r\n    java.lang.UnsatisfiedLinkError: no fontmanager in java.library.path\r\n    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1867)\r\n    at java.lang.Runtime.loadLibrary0(Runtime.java:870)\r\n    at java.lang.System.loadLibrary(System.java:1122)\r\n    at sun.font.FontManagerNativeLibrary$1.run(FontManagerNativeLibrary.java:61)\r\n    at java.security.AccessController.doPrivileged(Native Method)\r\n    at sun.font.FontManagerNativeLibrary.&lt;clinit&gt;(FontManagerNativeLibrary.java:32)\r\n    at sun.font.SunFontManager$1.run(SunFontManager.java:339)\r\n    at java.security.AccessController.doPrivileged(Native Method)\r\n    at sun.font.SunFontManager.&lt;clinit&gt;(SunFontManager.java:335)\r\n    at java.lang.Class.forName0(Native Method)\r\n    at java.lang.Class.forName(Class.java:348)\r\n    at sun.font.FontManagerFactory$1.run(FontManagerFactory.java:82)\r\n    at java.security.AccessController.doPrivileged(Native Method)\r\n    at sun.font.FontManagerFactory.getInstance(FontManagerFactory.java:74)\r\n    at java.awt.Font.getFont2D(Font.java:491)\r\n    at java.awt.Font.access$000(Font.java:224)\r\n    at java.awt.Font$FontAccessImpl.getFont2D(Font.java:228)\r\n    at sun.font.FontUtilities.getFont2D(FontUtilities.java:180)\r\n    at sun.java2d.SunGraphics2D.checkFontInfo(SunGraphics2D.java:669)\r\n    at sun.java2d.SunGraphics2D.getFontInfo(SunGraphics2D.java:830)\r\n    at sun.java2d.pipe.GlyphListPipe.drawString(GlyphListPipe.java:50)\r\n    at sun.java2d.pipe.ValidatePipe.drawString(ValidatePipe.java:165)\r\n    at sun.java2d.SunGraphics2D.drawString(SunGraphics2D.java:2928)\r\n\r\njava -version (on my server) gives: \r\n\r\n    openjdk version &quot;1.8.0_77-internal&quot;\r\n    OpenJDK Runtime Environment (build 1.8.0_77-internal-alpine-r0-b03)\r\n    OpenJDK 64-Bit Server VM (build 25.77-b03, mixed mode)\r\n\r\nI searched for awt libs and they could be found here:\r\n\r\n    /usr/lib/jvm/java-1.8-openjdk/jre/lib/amd64/libawt_headless.so\r\n    /usr/lib/jvm/java-1.8-openjdk/jre/lib/amd64/libawt.so\r\n\r\n","title":"no fontmanager in java.library.path","body":"<p>The following code works just fine on my desktop:</p>\n\n<pre><code>        BufferedImage image = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);\n        Graphics g = image.getGraphics();\n        g.setFont(new Font(\"SansSerif\", Font.BOLD, 18));\n\n        Graphics2D graphics = (Graphics2D) g;\n        graphics.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING, RenderingHints.VALUE_TEXT_ANTIALIAS_ON);\n        graphics.drawString(s, 5, 20);\n</code></pre>\n\n<p>However, when I run this code on my server (openjdk running on linux alpine within a Docker container), it fails with the following error: </p>\n\n<pre><code>java.lang.UnsatisfiedLinkError: no fontmanager in java.library.path\nat java.lang.ClassLoader.loadLibrary(ClassLoader.java:1867)\nat java.lang.Runtime.loadLibrary0(Runtime.java:870)\nat java.lang.System.loadLibrary(System.java:1122)\nat sun.font.FontManagerNativeLibrary$1.run(FontManagerNativeLibrary.java:61)\nat java.security.AccessController.doPrivileged(Native Method)\nat sun.font.FontManagerNativeLibrary.&lt;clinit&gt;(FontManagerNativeLibrary.java:32)\nat sun.font.SunFontManager$1.run(SunFontManager.java:339)\nat java.security.AccessController.doPrivileged(Native Method)\nat sun.font.SunFontManager.&lt;clinit&gt;(SunFontManager.java:335)\nat java.lang.Class.forName0(Native Method)\nat java.lang.Class.forName(Class.java:348)\nat sun.font.FontManagerFactory$1.run(FontManagerFactory.java:82)\nat java.security.AccessController.doPrivileged(Native Method)\nat sun.font.FontManagerFactory.getInstance(FontManagerFactory.java:74)\nat java.awt.Font.getFont2D(Font.java:491)\nat java.awt.Font.access$000(Font.java:224)\nat java.awt.Font$FontAccessImpl.getFont2D(Font.java:228)\nat sun.font.FontUtilities.getFont2D(FontUtilities.java:180)\nat sun.java2d.SunGraphics2D.checkFontInfo(SunGraphics2D.java:669)\nat sun.java2d.SunGraphics2D.getFontInfo(SunGraphics2D.java:830)\nat sun.java2d.pipe.GlyphListPipe.drawString(GlyphListPipe.java:50)\nat sun.java2d.pipe.ValidatePipe.drawString(ValidatePipe.java:165)\nat sun.java2d.SunGraphics2D.drawString(SunGraphics2D.java:2928)\n</code></pre>\n\n<p>java -version (on my server) gives: </p>\n\n<pre><code>openjdk version \"1.8.0_77-internal\"\nOpenJDK Runtime Environment (build 1.8.0_77-internal-alpine-r0-b03)\nOpenJDK 64-Bit Server VM (build 25.77-b03, mixed mode)\n</code></pre>\n\n<p>I searched for awt libs and they could be found here:</p>\n\n<pre><code>/usr/lib/jvm/java-1.8-openjdk/jre/lib/amd64/libawt_headless.so\n/usr/lib/jvm/java-1.8-openjdk/jre/lib/amd64/libawt.so\n</code></pre>\n"},{"tags":["javascript","java","android","html"],"comments":[{"owner":{"account_id":966579,"reputation":3980,"user_id":989920,"accept_rate":76,"display_name":"evolutionxbox"},"score":0,"creation_date":1694618652,"post_id":77098429,"comment_id":135915776,"body_markdown":"Please include the code you&#39;re using to fetch the page","body":"Please include the code you&#39;re using to fetch the page"},{"owner":{"account_id":10982996,"reputation":11,"user_id":8069555,"display_name":"Nicolas Ortiz"},"score":0,"creation_date":1694621762,"post_id":77098429,"comment_id":135916347,"body_markdown":"To fetch the page (with full html), im using only inspector though chrome","body":"To fetch the page (with full html), im using only inspector though chrome"}],"owner":{"account_id":10982996,"reputation":11,"user_id":8069555,"display_name":"Nicolas Ortiz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1694622030,"creation_date":1694618543,"question_id":77098429,"body_markdown":"I&#180;m trying to connect with an endpoint, but response is incomplete, because part of the html is on js. I&#39;m working on Android Studio with Java. How can I get full HTML on the response of the API request?\r\n\r\n**Request on Postman:**\r\n\r\nGET: https://tienda.mercadona.es/search-results?query=aceite\r\n\r\n**Response:**\r\n\r\n```\r\n&lt;!doctype html&gt;\r\n&lt;html lang=&quot;es&quot;&gt;\r\n\r\n&lt;head&gt;\r\n\t...\r\n\r\n&lt;body&gt;&lt;noscript&gt;You need to enable JavaScript to run this app.&lt;/noscript&gt;\r\n\t&lt;div id=&quot;root&quot;&gt;&lt;/div&gt;\r\n\t&lt;div id=&quot;modal-info&quot;&gt;&lt;/div&gt;\r\n\t&lt;script&gt;\r\n\t\t!function(e){function r(r){for(var n,l,f=r[0],i=r[1],a=r[2],c=0,s=[];c&lt;f.length;c++)l=f[c],Object.prototype.hasOwnProperty.call(o,l)&amp;&amp;o[l]&amp;&amp;s.push(o[l][0]),o[l]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&amp;&amp;(e[n]=i[n]);for(p&amp;&amp;p(r);s.length;)s.shift()();return u.push.apply(u,a||[]),t()}function t(){for(var e,r=0;r&lt;u.length;r++){for(var t=u[r],n=!0,f=1;f&lt;t.length;f++){var i=t[f];0!==o[i]&amp;&amp;(n=!1)}n&amp;&amp;(u.splice(r--,1),e=l(l.s=t[0]))}return e}var n={},o={1:0},u=[];function l(r){if(n[r])return n[r].exports;var t=n[r]={i:r,l:!1,exports:{}};return e[r].call(t.exports,t,t.exports,l),t.l=!0,t.exports}l.m=e,l.c=n,l.d=function(e,r,t){l.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},l.r=function(e){&quot;undefined&quot;!=typeof Symbol&amp;&amp;Symbol.toStringTag&amp;&amp;Object.defineProperty(e,Symbol.toStringTag,{value:&quot;Module&quot;}),Object.defineProperty(e,&quot;__esModule&quot;,{value:!0})},l.t=function(e,r){if(1&amp;r&amp;&amp;(e=l(e)),8&amp;r)return e;if(4&amp;r&amp;&amp;&quot;object&quot;==typeof e&amp;&amp;e&amp;&amp;e.__esModule)return e;var t=Object.create(null);if(l.r(t),Object.defineProperty(t,&quot;default&quot;,{enumerable:!0,value:e}),2&amp;r&amp;&amp;&quot;string&quot;!=typeof e)for(var n in e)l.d(t,n,function(r){return e[r]}.bind(null,n));return t},l.n=function(e){var r=e&amp;&amp;e.__esModule?function(){return e.default}:function(){return e};return l.d(r,&quot;a&quot;,r),r},l.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},l.p=&quot;/&quot;;var f=window.webpackJsonp=window.webpackJsonp||[],i=f.push.bind(f);f.push=r,f=f.slice();for(var a=0;a&lt;f.length;a++)r(f[a]);var p=i;t()}([])\r\n\t&lt;/script&gt;\r\n\t&lt;script src=&quot;/v616/static/js/2.2a3d3a37.chunk.js&quot;&gt;&lt;/script&gt;\r\n\t&lt;script src=&quot;/v616/static/js/main.e428a20b.chunk.js&quot;&gt;&lt;/script&gt;\r\n&lt;/body&gt;\r\n\r\n&lt;/html&gt;\r\n```\r\n\r\n[Postman request][1]\r\n\r\n\r\n\r\n**Full HTML from webpage directly:**\r\n\r\n\r\n```\r\n&lt;head&gt;\r\n...\r\n&lt;/head&gt;\r\n&lt;body class=&quot;&quot;&gt;\r\n&lt;noscript&gt;\r\nYou need to enable JavaScript to run this app.&lt;/noscript&gt;\r\n&lt;div id=&quot;root&quot;&gt;\r\n&lt;div class=&quot;cookie-banner&quot;&gt;\r\n&lt;img class=&quot;cookie-banner__image&quot; alt=&quot;cookie&quot; src=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAABo9JREFUWAmFVl1sVFUQnt3b7nbbbek/lFZsqUJKgEJKQSogJAoNSowkEhSjCQ9ijQ8kRI2IMWqwMWoCaeKLRqJIJAYDyINBqQZFFFGQ1lrb0NKW7R/t2r9l2Xb33ut85+5s767bOsnZmTNnznzfzDnnZh00uzhmX5511Zx1Nbo4E0AyfzKfHSMZYDKffQ8lS5rok3milkQCkqgT12Uep1NsMwEQl8yh7UPWRQMYAzEzkZDY/2ghIGASYAeE7eShfM/W0PoFxdlLn35sbWeWN73Q4XCEXmho//LoN01TsjmqhUyCO34qwKKxqoCiGsBqvPvccm9Fbrih8WLrDgStqSyjHQ+vgkmjgcgTudtPnmTT4AFgaIiQEG15bb/oQDJwqVjjdefAiUeezPe6Dn57obVA9vYPjZJh6Go6qYddbCAWAnDknBEUQSJyBJhL5bGqq6pyXI0H1tV707Q6Mg16YHU5FRVm0uSUTuUL8slkHyQSNkAA+wCKIUX9LwkhIOCikUxr3F9Tn+6iOqk0RXPSkvK5sfym6oCDXJp5D+J5CAHRyCeEkpIBkAiCpXqt++hDu661dtUd/vQ8tbT3qXabph7TsNEBaG+aYyvvBQF1ZLY8UhC7Yh22+6Zvty1Ae2nn4iyv2zh4urGF+gbHqamtj+swrTOPanRFhtNhLLvcsH4T55iNBIDtoohIB4SV6sDebcV1qRrledzWCaXyBGCmYcR0Z88wnb3QRv23xpS/otjz3s4N872MkIwE8gpGHJHElqnNr+8qf19zOgruLc2jdE8qVS8rpvS0VM5hHe3oeJA+OP4rdflG6M/2AVq7ooQ4Pru2KrfaNxw+09w1EYmWKqCY2u3ocvyZKfBjL65YWFHiPoCWexl8YUkOg3MneG7ygB6duEOXm3tjSdZW3kUpmoM0zbGgdlXeg4/eV3i97Xrv+OZFtDIlk/y9w2S919iOaQOs0Ge0CDrlt0Ortywu8XzB9qwyfnuSRsbuUH5OOhPEK+QSORs4Tk5FqOHY5fBEcCo1JyttcM/OVZ9FdGpZ80rXcZ/PBzLywTKtQ55ujzPDRfPk2Tm4a1w3/4InDsCyob2eFMr0ZCkfvhEQg9ERO+ifIIDDNzIemquHp/Z5PS768c2SYNlu32l2y5NUBORsFErE0B24bJBYlJpZP+JT69jBDtPipwKwXlyYQds2lgOcigoy1BGqj5Zp5PAyuo0wgDikA2wrcYwFIgMleYq8+GbW6De6o7Sl5BhWLMrnI+EO8poUxLkHrQ3RlvIEbOKkqTvQAbZ/tA3SiXPt5B8Nxt67vHvRSByOhCkUmrJA8GFC93AksPkjJRp2c3egk8HiniSah3LxAtQlZO1qOlTxy5FTrWVs08aq+bRuZRFMVY1UhflX57uo9cYIRXSTivLTacfmcsrkb7d6LQiQdrDmS/j3vGd+v5+9eKIyDDkP9BIDYg74Q42WaYHGKuaqYKNDgTuT1Hz9HwWO2P7hIHXeHIuuc9tV6xGLI9DJPx46xWG222IhyBEIAVwM88NzgXdqa4oDFWVzqKKUb7pqJ1o6PTwuJ2VlTN8VFFuY67Zi1FcTn2ociU5h3fC/+vnQR8htG4oBWg9Wci7Qzr98wcie2vm3apZm13rcWhQ4WhUq4oFcpUUZNBYIE2I2Vc3luZcB+V7oBv1wZYCutvlpZGKSQnrq/pc/6bnCm+QboArluQFwkACw+hKyRlm4D66Ww4vfys107o59BxjYfgc4Jqn03grSsbPdsbWL3VR56Qb1syMcHSCiyEgHQAQCjaGO5tSl4E/bV2fM8bhpZTAUoQ7fBA2Phvhda+rTixuuBFp1hWdsezwadfUF+Z5EKGzQ1yev0TFewcWTDkCrNgqYaOmCvAjVje/eKH28vWOovq3ntps30pJSL22tmcdUeRuAoSFR29BNf9vA5NuvHbn5/c/dqnKAo3ohIUTUNwy7hYD9KISE0s9vcO51O419HEvrK3OpuiIbZpyEdWofHNXPHDjh/7jxamCcFwEoA6BCIO4OCAHR9jshJFRnnqqmLYZJzruLC9qXl2vleZ4U/ltO5kgwMnS1Q++oPz3UwyBIDjAZAipzrAuBWAfYF3f+6IS9G3I0Qg5rICwiz0uS20kk2ogVAuq225PAxmKi2AEEPBkBSY4cAiw2tKzH8qPFcEoy2BAEQzDHACh8dnDZw24lEiuAmNttmSMYthIQSBRZxGYBkc12Asn2Ic4+kMM+xx7MRcx/AWYKLhCkO62qAAAAAElFTkSuQmCC&quot;&gt;\r\n&lt;div&gt;\r\n&lt;p class=&quot;cookie-banner__disclaimer footnote1-r&quot;&gt;\r\nUtilizamos cookies propias y de terceros, de sesi&#243;n y persistentes, con la finalidad de hacer que la navegaci&#243;n de los usuarios por nuestra p&#225;gina web sea f&#225;cil y segura. A su vez, utilizamos cookies para medir y obtener datos estad&#237;sticos de la navegaci&#243;n de los usuarios. Puedes configurar y aceptar el uso de cookies, as&#237; como modificar tus opciones de consentimiento en cualquier momento.&lt;a class=&quot;cookie-banner__info&quot; target=&quot;_blank&quot; href=&quot;/legal/cookies/es/&quot; rel=&quot;noopener noreferrer&quot;&gt;\r\nM&#225;s informaci&#243;n&lt;/a&gt;\r\n&lt;/p&gt;\r\n&lt;div class=&quot;cookie-banner__actions&quot;&gt;\r\n&lt;a class=&quot;cookie-banner__info&quot; target=&quot;_blank&quot; href=&quot;/legal/cookies/es/&quot; rel=&quot;noopener noreferrer&quot;&gt;\r\nM&#225;s informaci&#243;n&lt;/a&gt;\r\n&lt;button type=&quot;button&quot; class=&quot;ui-button ui-button--small ui-button--secondary ui-button--positive&quot;&gt;\r\nConfiguraci&#243;n&lt;/button&gt;\r\n&lt;button type=&quot;button&quot; class=&quot;ui-button ui-button--small ui-button--primary ui-button--positive&quot;&gt;\r\nAceptar todas&lt;/button&gt;\r\n&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;div class=&quot;snack-bars&quot;&gt;\r\n&lt;/div&gt;\r\n&lt;header role=&quot;banner&quot; class=&quot;header&quot;&gt;\r\n&lt;div class=&quot;header__left&quot;&gt;\r\n&lt;button class=&quot;logo&quot; aria-label=&quot;Home&quot;&gt;\r\n&lt;/button&gt;\r\n&lt;div class=&quot;search&quot; role=&quot;search&quot; aria-label=&quot;Buscar productos&quot;&gt;\r\n\r\n...\r\n\r\n```\r\n[Webpage][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/hKYHH.png\r\n  [2]: https://i.stack.imgur.com/dFjXO.png","title":"Get Full HTML response from an API call with HTML +JS response","body":"<p>I´m trying to connect with an endpoint, but response is incomplete, because part of the html is on js. I'm working on Android Studio with Java. How can I get full HTML on the response of the API request?</p>\n<p><strong>Request on Postman:</strong></p>\n<p>GET: <a href=\"https://tienda.mercadona.es/search-results?query=aceite\" rel=\"nofollow noreferrer\">https://tienda.mercadona.es/search-results?query=aceite</a></p>\n<p><strong>Response:</strong></p>\n<pre><code>&lt;!doctype html&gt;\n&lt;html lang=&quot;es&quot;&gt;\n\n&lt;head&gt;\n    ...\n\n&lt;body&gt;&lt;noscript&gt;You need to enable JavaScript to run this app.&lt;/noscript&gt;\n    &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;\n    &lt;div id=&quot;modal-info&quot;&gt;&lt;/div&gt;\n    &lt;script&gt;\n        !function(e){function r(r){for(var n,l,f=r[0],i=r[1],a=r[2],c=0,s=[];c&lt;f.length;c++)l=f[c],Object.prototype.hasOwnProperty.call(o,l)&amp;&amp;o[l]&amp;&amp;s.push(o[l][0]),o[l]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&amp;&amp;(e[n]=i[n]);for(p&amp;&amp;p(r);s.length;)s.shift()();return u.push.apply(u,a||[]),t()}function t(){for(var e,r=0;r&lt;u.length;r++){for(var t=u[r],n=!0,f=1;f&lt;t.length;f++){var i=t[f];0!==o[i]&amp;&amp;(n=!1)}n&amp;&amp;(u.splice(r--,1),e=l(l.s=t[0]))}return e}var n={},o={1:0},u=[];function l(r){if(n[r])return n[r].exports;var t=n[r]={i:r,l:!1,exports:{}};return e[r].call(t.exports,t,t.exports,l),t.l=!0,t.exports}l.m=e,l.c=n,l.d=function(e,r,t){l.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},l.r=function(e){&quot;undefined&quot;!=typeof Symbol&amp;&amp;Symbol.toStringTag&amp;&amp;Object.defineProperty(e,Symbol.toStringTag,{value:&quot;Module&quot;}),Object.defineProperty(e,&quot;__esModule&quot;,{value:!0})},l.t=function(e,r){if(1&amp;r&amp;&amp;(e=l(e)),8&amp;r)return e;if(4&amp;r&amp;&amp;&quot;object&quot;==typeof e&amp;&amp;e&amp;&amp;e.__esModule)return e;var t=Object.create(null);if(l.r(t),Object.defineProperty(t,&quot;default&quot;,{enumerable:!0,value:e}),2&amp;r&amp;&amp;&quot;string&quot;!=typeof e)for(var n in e)l.d(t,n,function(r){return e[r]}.bind(null,n));return t},l.n=function(e){var r=e&amp;&amp;e.__esModule?function(){return e.default}:function(){return e};return l.d(r,&quot;a&quot;,r),r},l.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},l.p=&quot;/&quot;;var f=window.webpackJsonp=window.webpackJsonp||[],i=f.push.bind(f);f.push=r,f=f.slice();for(var a=0;a&lt;f.length;a++)r(f[a]);var p=i;t()}([])\n    &lt;/script&gt;\n    &lt;script src=&quot;/v616/static/js/2.2a3d3a37.chunk.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;/v616/static/js/main.e428a20b.chunk.js&quot;&gt;&lt;/script&gt;\n&lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/hKYHH.png\" rel=\"nofollow noreferrer\">Postman request</a></p>\n<p><strong>Full HTML from webpage directly:</strong></p>\n<pre><code>&lt;head&gt;\n...\n&lt;/head&gt;\n&lt;body class=&quot;&quot;&gt;\n&lt;noscript&gt;\nYou need to enable JavaScript to run this app.&lt;/noscript&gt;\n&lt;div id=&quot;root&quot;&gt;\n&lt;div class=&quot;cookie-banner&quot;&gt;\n&lt;img class=&quot;cookie-banner__image&quot; alt=&quot;cookie&quot; src=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAABo9JREFUWAmFVl1sVFUQnt3b7nbbbek/lFZsqUJKgEJKQSogJAoNSowkEhSjCQ9ijQ8kRI2IMWqwMWoCaeKLRqJIJAYDyINBqQZFFFGQ1lrb0NKW7R/t2r9l2Xb33ut85+5s767bOsnZmTNnznzfzDnnZh00uzhmX5511Zx1Nbo4E0AyfzKfHSMZYDKffQ8lS5rok3milkQCkqgT12Uep1NsMwEQl8yh7UPWRQMYAzEzkZDY/2ghIGASYAeE7eShfM/W0PoFxdlLn35sbWeWN73Q4XCEXmho//LoN01TsjmqhUyCO34qwKKxqoCiGsBqvPvccm9Fbrih8WLrDgStqSyjHQ+vgkmjgcgTudtPnmTT4AFgaIiQEG15bb/oQDJwqVjjdefAiUeezPe6Dn57obVA9vYPjZJh6Go6qYddbCAWAnDknBEUQSJyBJhL5bGqq6pyXI0H1tV707Q6Mg16YHU5FRVm0uSUTuUL8slkHyQSNkAA+wCKIUX9LwkhIOCikUxr3F9Tn+6iOqk0RXPSkvK5sfym6oCDXJp5D+J5CAHRyCeEkpIBkAiCpXqt++hDu661dtUd/vQ8tbT3qXabph7TsNEBaG+aYyvvBQF1ZLY8UhC7Yh22+6Zvty1Ae2nn4iyv2zh4urGF+gbHqamtj+swrTOPanRFhtNhLLvcsH4T55iNBIDtoohIB4SV6sDebcV1qRrledzWCaXyBGCmYcR0Z88wnb3QRv23xpS/otjz3s4N872MkIwE8gpGHJHElqnNr+8qf19zOgruLc2jdE8qVS8rpvS0VM5hHe3oeJA+OP4rdflG6M/2AVq7ooQ4Pru2KrfaNxw+09w1EYmWKqCY2u3ocvyZKfBjL65YWFHiPoCWexl8YUkOg3MneG7ygB6duEOXm3tjSdZW3kUpmoM0zbGgdlXeg4/eV3i97Xrv+OZFtDIlk/y9w2S919iOaQOs0Ge0CDrlt0Ortywu8XzB9qwyfnuSRsbuUH5OOhPEK+QSORs4Tk5FqOHY5fBEcCo1JyttcM/OVZ9FdGpZ80rXcZ/PBzLywTKtQ55ujzPDRfPk2Tm4a1w3/4InDsCyob2eFMr0ZCkfvhEQg9ERO+ifIIDDNzIemquHp/Z5PS768c2SYNlu32l2y5NUBORsFErE0B24bJBYlJpZP+JT69jBDtPipwKwXlyYQds2lgOcigoy1BGqj5Zp5PAyuo0wgDikA2wrcYwFIgMleYq8+GbW6De6o7Sl5BhWLMrnI+EO8poUxLkHrQ3RlvIEbOKkqTvQAbZ/tA3SiXPt5B8Nxt67vHvRSByOhCkUmrJA8GFC93AksPkjJRp2c3egk8HiniSah3LxAtQlZO1qOlTxy5FTrWVs08aq+bRuZRFMVY1UhflX57uo9cYIRXSTivLTacfmcsrkb7d6LQiQdrDmS/j3vGd+v5+9eKIyDDkP9BIDYg74Q42WaYHGKuaqYKNDgTuT1Hz9HwWO2P7hIHXeHIuuc9tV6xGLI9DJPx46xWG222IhyBEIAVwM88NzgXdqa4oDFWVzqKKUb7pqJ1o6PTwuJ2VlTN8VFFuY67Zi1FcTn2ociU5h3fC/+vnQR8htG4oBWg9Wci7Qzr98wcie2vm3apZm13rcWhQ4WhUq4oFcpUUZNBYIE2I2Vc3luZcB+V7oBv1wZYCutvlpZGKSQnrq/pc/6bnCm+QboArluQFwkACw+hKyRlm4D66Ww4vfys107o59BxjYfgc4Jqn03grSsbPdsbWL3VR56Qb1syMcHSCiyEgHQAQCjaGO5tSl4E/bV2fM8bhpZTAUoQ7fBA2Phvhda+rTixuuBFp1hWdsezwadfUF+Z5EKGzQ1yev0TFewcWTDkCrNgqYaOmCvAjVje/eKH28vWOovq3ntps30pJSL22tmcdUeRuAoSFR29BNf9vA5NuvHbn5/c/dqnKAo3ohIUTUNwy7hYD9KISE0s9vcO51O419HEvrK3OpuiIbZpyEdWofHNXPHDjh/7jxamCcFwEoA6BCIO4OCAHR9jshJFRnnqqmLYZJzruLC9qXl2vleZ4U/ltO5kgwMnS1Q++oPz3UwyBIDjAZAipzrAuBWAfYF3f+6IS9G3I0Qg5rICwiz0uS20kk2ogVAuq225PAxmKi2AEEPBkBSY4cAiw2tKzH8qPFcEoy2BAEQzDHACh8dnDZw24lEiuAmNttmSMYthIQSBRZxGYBkc12Asn2Ic4+kMM+xx7MRcx/AWYKLhCkO62qAAAAAElFTkSuQmCC&quot;&gt;\n&lt;div&gt;\n&lt;p class=&quot;cookie-banner__disclaimer footnote1-r&quot;&gt;\nUtilizamos cookies propias y de terceros, de sesión y persistentes, con la finalidad de hacer que la navegación de los usuarios por nuestra página web sea fácil y segura. A su vez, utilizamos cookies para medir y obtener datos estadísticos de la navegación de los usuarios. Puedes configurar y aceptar el uso de cookies, así como modificar tus opciones de consentimiento en cualquier momento.&lt;a class=&quot;cookie-banner__info&quot; target=&quot;_blank&quot; href=&quot;/legal/cookies/es/&quot; rel=&quot;noopener noreferrer&quot;&gt;\nMás información&lt;/a&gt;\n&lt;/p&gt;\n&lt;div class=&quot;cookie-banner__actions&quot;&gt;\n&lt;a class=&quot;cookie-banner__info&quot; target=&quot;_blank&quot; href=&quot;/legal/cookies/es/&quot; rel=&quot;noopener noreferrer&quot;&gt;\nMás información&lt;/a&gt;\n&lt;button type=&quot;button&quot; class=&quot;ui-button ui-button--small ui-button--secondary ui-button--positive&quot;&gt;\nConfiguración&lt;/button&gt;\n&lt;button type=&quot;button&quot; class=&quot;ui-button ui-button--small ui-button--primary ui-button--positive&quot;&gt;\nAceptar todas&lt;/button&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;div class=&quot;snack-bars&quot;&gt;\n&lt;/div&gt;\n&lt;header role=&quot;banner&quot; class=&quot;header&quot;&gt;\n&lt;div class=&quot;header__left&quot;&gt;\n&lt;button class=&quot;logo&quot; aria-label=&quot;Home&quot;&gt;\n&lt;/button&gt;\n&lt;div class=&quot;search&quot; role=&quot;search&quot; aria-label=&quot;Buscar productos&quot;&gt;\n\n...\n\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/dFjXO.png\" rel=\"nofollow noreferrer\">Webpage</a></p>\n"},{"tags":["java","hashmap","equals","hashcode"],"comments":[{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1694016230,"post_id":77053602,"comment_id":135836755,"body_markdown":"&quot;then hashCode was already compared&quot; - by who? It&#39;s really not clear what code you&#39;re talking about. If you mean in HashMap, then yes, I&#39;d expect it to have checked the hash code already. But I&#39;d recommend reading the contract on java.lang.Object for what equals/hashCode implementations *must* abide by.","body":"&quot;then hashCode was already compared&quot; - by who? It&#39;s really not clear what code you&#39;re talking about. If you mean in HashMap, then yes, I&#39;d expect it to have checked the hash code already. But I&#39;d recommend reading the contract on java.lang.Object for what equals/hashCode implementations <i>must</i> abide by."},{"owner":{"account_id":7828782,"reputation":150,"user_id":7356882,"display_name":"HyperVol"},"score":0,"creation_date":1694016983,"post_id":77053602,"comment_id":135836922,"body_markdown":"@JonSkeet Yes Sorry I mean in context of hashmap.","body":"@JonSkeet Yes Sorry I mean in context of hashmap."},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":0,"creation_date":1694017286,"post_id":77053602,"comment_id":135836977,"body_markdown":"we cannot see what exactly `hashCode` is doing, neither how the corresponding object is declared, so we cannot say if it makes *any* sense (at least it is very dubious... also because different instances can still return the same hash code)","body":"we cannot see what exactly <code>hashCode</code> is doing, neither how the corresponding object is declared, so we cannot say if it makes <i>any</i> sense (at least it is very dubious... also because different instances can still return the same hash code)"},{"owner":{"account_id":9378,"reputation":14558,"user_id":17300,"display_name":"Stephen P"},"score":2,"creation_date":1694017386,"post_id":77053602,"comment_id":135836989,"body_markdown":"When you override `equals` you do not need to compare hashcodes within equals — what you _do_ need to do is **also** override `hashCode` and _make sure_ that two objects that are .equals to each other _generate_ the same hash code. -- Always override hashCode when you override equals.","body":"When you override <code>equals</code> you do not need to compare hashcodes within equals — what you <i>do</i> need to do is <b>also</b> override <code>hashCode</code> and <i>make sure</i> that two objects that are .equals to each other <i>generate</i> the same hash code. -- Always override hashCode when you override equals."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":2,"creation_date":1694018913,"post_id":77053602,"comment_id":135837273,"body_markdown":"*Does it mean that when eventually equals() method is called , then hashCode was already compared ...* Probably, but it’s not guaranteed. Exceptions, I neither know nor care. *Will it ever make sense to check hashCode() of both objects in equals() method ?* Hardly. I can’t think of a situation where it would. Remember that calculating the two hash codes will nearly always take more time and more code lines than just comparing the relevant instance variables of the two objects.","body":"<i>Does it mean that when eventually equals() method is called , then hashCode was already compared ...</i> Probably, but it’s not guaranteed. Exceptions, I neither know nor care. <i>Will it ever make sense to check hashCode() of both objects in equals() method ?</i> Hardly. I can’t think of a situation where it would. Remember that calculating the two hash codes will nearly always take more time and more code lines than just comparing the relevant instance variables of the two objects."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":3,"creation_date":1694020491,"post_id":77053602,"comment_id":135837598,"body_markdown":"Summary:  No, you should *never* make use of the hashCode in an equals method.  hashCodes are *not* guaranteed to be unique, by design.  But make sure any two objects which *are* equal, also return the same hashCode.","body":"Summary:  No, you should <i>never</i> make use of the hashCode in an equals method.  hashCodes are <i>not</i> guaranteed to be unique, by design.  But make sure any two objects which <i>are</i> equal, also return the same hashCode."},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1694034689,"post_id":77053602,"comment_id":135840001,"body_markdown":"It is conceivable and plausible that hashCode comparison in `equals` might be used as an optimization to quickly detect that two values are not equal,  if computing the hash code is cheaper than testing equality (perhaps because the hash has been cached), but that&#39;s all.","body":"It is conceivable and plausible that hashCode comparison in <code>equals</code> might be used as an optimization to quickly detect that two values are not equal,  if computing the hash code is cheaper than testing equality (perhaps because the hash has been cached), but that&#39;s all."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1694154714,"post_id":77053602,"comment_id":135856590,"body_markdown":"@LouisWasserman Conceivable, indeed. Something like if both objects have cached hash codes and they differ, immediately return false (meaning not equal), otherwise compare field by field. Plausible? Not with me. And for use with `HashMap` seen isolated, probably pointless since, as the questioner suggests, the map has probably already checked the hash codes.","body":"@LouisWasserman Conceivable, indeed. Something like if both objects have cached hash codes and they differ, immediately return false (meaning not equal), otherwise compare field by field. Plausible? Not with me. And for use with <code>HashMap</code> seen isolated, probably pointless since, as the questioner suggests, the map has probably already checked the hash codes."}],"answers":[{"tags":[],"owner":{"account_id":9378,"reputation":14558,"user_id":17300,"display_name":"Stephen P"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1694621991,"creation_date":1694023563,"answer_id":77054309,"question_id":77053602,"body_markdown":"To summarize from the comments:\r\n\r\n&gt; In Java, during Object#equals() call, do both objects necessarily have same hashCode?\r\n\r\nTwo objects that are `.equals` to each other do _need_ to have the same hashCode, but it is up to you to write the _equals_ method and the _hashCode_ method to make sure this is true.\r\n\r\n - Two objects can have the same hashCode and _not_ be equal, because of [hash collisions](https://wikipedia.org/wiki/Hash_collision).\r\n - Two objects that are equal _must_ generate the same hashCode.\r\n\r\nWhen a `HashMap` calls `equals()` on two key objects, has it first ensured that the hash codes are equal? Probably, but not guaranteed and it’s an implementation detail that we should not need to know about. Also the implementation of `HashMap` has changed more than once over the Java versions and may change again, so the answer may depend on Java version. You may inspect the source code of `HashMap` in your Java version to see.\r\n\r\nThe `HashMap` distributes the key-value pairs into so-called *buckets* based on the hash code of the key. In case of a *collision* — two or more pairs landing in the same bucket — it may conceivably compare keys belonging in the same bucket for equality. Since there are many more possible hash codes than there are buckets, this could mean also sometimes comparing objects with different hash codes using `equals()`.\r\n\r\nOther kinds of `Map` such as a `TreeMap` probably don&#39;t use hash codes at all.\r\n\r\n&gt; Do we need to ever compare hashCode within equals()?\r\n\r\nNo, you do not need to compare hashCodes in your implementation of `.equals`, in fact you should _not_ do that.","title":"In Java, during Object#equals() call, do both objects necessarily have same hashCode ? Do we need to ever compare hashCode within equals()?","body":"<p>To summarize from the comments:</p>\n<blockquote>\n<p>In Java, during Object#equals() call, do both objects necessarily have same hashCode?</p>\n</blockquote>\n<p>Two objects that are <code>.equals</code> to each other do <em>need</em> to have the same hashCode, but it is up to you to write the <em>equals</em> method and the <em>hashCode</em> method to make sure this is true.</p>\n<ul>\n<li>Two objects can have the same hashCode and <em>not</em> be equal, because of <a href=\"https://wikipedia.org/wiki/Hash_collision\" rel=\"nofollow noreferrer\">hash collisions</a>.</li>\n<li>Two objects that are equal <em>must</em> generate the same hashCode.</li>\n</ul>\n<p>When a <code>HashMap</code> calls <code>equals()</code> on two key objects, has it first ensured that the hash codes are equal? Probably, but not guaranteed and it’s an implementation detail that we should not need to know about. Also the implementation of <code>HashMap</code> has changed more than once over the Java versions and may change again, so the answer may depend on Java version. You may inspect the source code of <code>HashMap</code> in your Java version to see.</p>\n<p>The <code>HashMap</code> distributes the key-value pairs into so-called <em>buckets</em> based on the hash code of the key. In case of a <em>collision</em> — two or more pairs landing in the same bucket — it may conceivably compare keys belonging in the same bucket for equality. Since there are many more possible hash codes than there are buckets, this could mean also sometimes comparing objects with different hash codes using <code>equals()</code>.</p>\n<p>Other kinds of <code>Map</code> such as a <code>TreeMap</code> probably don't use hash codes at all.</p>\n<blockquote>\n<p>Do we need to ever compare hashCode within equals()?</p>\n</blockquote>\n<p>No, you do not need to compare hashCodes in your implementation of <code>.equals</code>, in fact you should <em>not</em> do that.</p>\n"}],"owner":{"account_id":7828782,"reputation":150,"user_id":7356882,"display_name":"HyperVol"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":96,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":77054309,"answer_count":1,"score":1,"last_activity_date":1694621991,"creation_date":1694015979,"question_id":77053602,"body_markdown":"I have read somewhere, in context of HashMap :\r\n`hashCode() allows sorting objects by their hash values, and then the Object#equals method only needs to be invoked when objects share the same hash value.`\r\n\r\nDoes it mean that when eventually equals() method is called , then hashCode was already compared and found to be necessarily equal? Is there any exception for this scenario?\r\n\r\n2nd part of question: Will it ever make sense to check hashCode() of both objects in equals() method ?\r\n\r\n\r\n    \r\n```\r\npublic boolean equals(Object obj) {\r\n        if (obj == this) {\r\n            return true;\r\n        }\r\n        if (obj == null) {\r\n            return false;\r\n        }\r\n\r\n        if (!(obj instanceof InternalObjectSerialized)) {\r\n            return false;\r\n        }\r\n        InternalObjectSerialized&lt;?&gt; inputObj = (InternalObjectSerialized&lt;?&gt;) obj;\r\n\r\n        if (!(Arrays.equals(this.bytes, inputObj.bytes))) {\r\n            return false;\r\n        }\r\n\r\n        // Does the following line make any sense ??\r\n        return this.hashCode() == inputObj.hashCode();\r\n    }\r\n```\r\n","title":"In Java, during Object#equals() call, do both objects necessarily have same hashCode ? Do we need to ever compare hashCode within equals()?","body":"<p>I have read somewhere, in context of HashMap :\n<code>hashCode() allows sorting objects by their hash values, and then the Object#equals method only needs to be invoked when objects share the same hash value.</code></p>\n<p>Does it mean that when eventually equals() method is called , then hashCode was already compared and found to be necessarily equal? Is there any exception for this scenario?</p>\n<p>2nd part of question: Will it ever make sense to check hashCode() of both objects in equals() method ?</p>\n<pre><code>public boolean equals(Object obj) {\n        if (obj == this) {\n            return true;\n        }\n        if (obj == null) {\n            return false;\n        }\n\n        if (!(obj instanceof InternalObjectSerialized)) {\n            return false;\n        }\n        InternalObjectSerialized&lt;?&gt; inputObj = (InternalObjectSerialized&lt;?&gt;) obj;\n\n        if (!(Arrays.equals(this.bytes, inputObj.bytes))) {\n            return false;\n        }\n\n        // Does the following line make any sense ??\n        return this.hashCode() == inputObj.hashCode();\n    }\n</code></pre>\n"},{"tags":["java","mapping","dozer"],"owner":{"account_id":3910638,"reputation":6001,"user_id":3236102,"accept_rate":80,"display_name":"Dakkaron"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694621683,"creation_date":1694621683,"question_id":77098820,"body_markdown":"I&#39;ve got two classes, one inheriting from the other\r\n\r\n    class A {\r\n        String s;\r\n    }\r\n    class B extends A {}\r\n\r\nThere are also other classes inheriting from A, but they don&#39;t matter right now.\r\n\r\nFor A and B I have the following mappings:\r\n\r\n    mapping(A.class, A.class, mapNull(false));\r\n    mapping(B.class, B.class, mapNull(true));\r\n\r\nWhat I&#39;d want is if I map A to A, a null value in the source should not be written to the target, so that the target keeps it&#39;s non-null value for the field.\r\n\r\nBut when I map B to B, all null values in the source (even for fields defined in A) should be written to the target, so that the target then also has the non-null value for the field.\r\n\r\nThe first part (`A -&gt; A`) works, but when I map `B -&gt; B`, it behaves like the `A -&gt; A` mapping, not overwriting the fields.\r\n\r\nEssentially, the result is the same as if I didn&#39;t define the second mapping.\r\n\r\nIs there a way to to what I want in Dozer?\r\n\r\nPS: regarding the other classes I mentioned in the beginning, they should still all behave like the `A -&gt; A` mapping.","title":"Dozer mapper: Override mapNull(false) of subclass with mapNull(true) of superclass","body":"<p>I've got two classes, one inheriting from the other</p>\n<pre><code>class A {\n    String s;\n}\nclass B extends A {}\n</code></pre>\n<p>There are also other classes inheriting from A, but they don't matter right now.</p>\n<p>For A and B I have the following mappings:</p>\n<pre><code>mapping(A.class, A.class, mapNull(false));\nmapping(B.class, B.class, mapNull(true));\n</code></pre>\n<p>What I'd want is if I map A to A, a null value in the source should not be written to the target, so that the target keeps it's non-null value for the field.</p>\n<p>But when I map B to B, all null values in the source (even for fields defined in A) should be written to the target, so that the target then also has the non-null value for the field.</p>\n<p>The first part (<code>A -&gt; A</code>) works, but when I map <code>B -&gt; B</code>, it behaves like the <code>A -&gt; A</code> mapping, not overwriting the fields.</p>\n<p>Essentially, the result is the same as if I didn't define the second mapping.</p>\n<p>Is there a way to to what I want in Dozer?</p>\n<p>PS: regarding the other classes I mentioned in the beginning, they should still all behave like the <code>A -&gt; A</code> mapping.</p>\n"},{"tags":["java","android","ip","byte","outputstream"],"owner":{"account_id":18688004,"reputation":11,"user_id":13623052,"display_name":"Pipo Karet"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1694621652,"creation_date":1694621652,"question_id":77098817,"body_markdown":"I am facing an issue with my APP.\r\n\r\nObjective: It allows configuring the URL of an IP camera and displays what that camera captures on the screen. I need to create a functionality where, when the user presses the button, the application starts recording the video and then saves it to the gallery.\r\n\r\nWhat I have achieved so far: The user can press the button to start recording. The camera is being managed by an external library, and it has a function that calls a callback for each new frame, loading the bytes of that frame. So, I created this code:\r\n\r\n```\r\n@Override\r\npublic void onCameraFrame(CameraFrame frame) {\r\n\r\n    if (this.mCameraRecordingInProgress) {\r\n        try {\r\n            byteArrayOutputStreamVideoData.write(frame.getData());\r\n        } catch (IOException e) {\r\n            Log.e(TAG, e.getMessage());\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAfter 15 seconds of recording, it stops and calls this piece of code:\r\n\r\n```\r\npublic void endRecording() {\r\n    if (!this.mCameraRecordingInProgress) {\r\n        return;\r\n    }\r\n\r\n    this.mCameraRecordingInProgress = false;\r\n\r\n    try {\r\n        byteArrayOutputStreamVideoData.close();\r\n        byte[] videoBytes = byteArrayOutputStreamVideoData.toByteArray();\r\n        this.reCreateVideoByBytes(videoBytes);\r\n    } catch (IOException e) {\r\n        throw new RuntimeException(e);\r\n    }\r\n}\r\n```\r\n\r\nHere&#39;s the code for the reCreateVideoByBytes(videoBytes) function:\r\n\r\n```\r\npublic void reCreateVideoByBytes(byte[] videoBytes) {\r\n    SimpleDateFormat simpleDateFormat = new SimpleDateFormat(SEREDUtils.DATE_FORMAT_FILE_NAME);\r\n    StringBuilder stringBuilder = new StringBuilder();\r\n\r\n    stringBuilder.append(mTextViewCamName.getText().toString()).append(SEREDUtils.PREFIX_DATE_INITIAL_FILE).append(simpleDateFormat.format(this.recordingInitDate)).append(SEREDUtils.PREFIX_DATE_END_FILE).append(simpleDateFormat.format(new Date())).append(SEREDUtils.SUFFIX_TYPE_VIDEO);\r\n\r\n    File inputFile = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_MOVIES), stringBuilder.toString());\r\n\r\n    try {\r\n        FileOutputStream fos = new FileOutputStream(inputFile);\r\n        fos.write(videoBytes);\r\n        fos.close();\r\n    } catch (Exception e) {\r\n        Log.e(TAG, e.getMessage());\r\n    }\r\n}\r\n```\r\n\r\nProblem: It is saving the recording to the local file, but the recording seems to be playing at 2x speed, and it always cuts about 8 seconds of the recording. It only shows half of it, even though it&#39;s writing all the frames.","title":"Record Frame by Frame into a byteArrayOutputStreamVideoData and Save to a File","body":"<p>I am facing an issue with my APP.</p>\n<p>Objective: It allows configuring the URL of an IP camera and displays what that camera captures on the screen. I need to create a functionality where, when the user presses the button, the application starts recording the video and then saves it to the gallery.</p>\n<p>What I have achieved so far: The user can press the button to start recording. The camera is being managed by an external library, and it has a function that calls a callback for each new frame, loading the bytes of that frame. So, I created this code:</p>\n<pre><code>@Override\npublic void onCameraFrame(CameraFrame frame) {\n\n    if (this.mCameraRecordingInProgress) {\n        try {\n            byteArrayOutputStreamVideoData.write(frame.getData());\n        } catch (IOException e) {\n            Log.e(TAG, e.getMessage());\n        }\n    }\n}\n</code></pre>\n<p>After 15 seconds of recording, it stops and calls this piece of code:</p>\n<pre><code>public void endRecording() {\n    if (!this.mCameraRecordingInProgress) {\n        return;\n    }\n\n    this.mCameraRecordingInProgress = false;\n\n    try {\n        byteArrayOutputStreamVideoData.close();\n        byte[] videoBytes = byteArrayOutputStreamVideoData.toByteArray();\n        this.reCreateVideoByBytes(videoBytes);\n    } catch (IOException e) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n<p>Here's the code for the reCreateVideoByBytes(videoBytes) function:</p>\n<pre><code>public void reCreateVideoByBytes(byte[] videoBytes) {\n    SimpleDateFormat simpleDateFormat = new SimpleDateFormat(SEREDUtils.DATE_FORMAT_FILE_NAME);\n    StringBuilder stringBuilder = new StringBuilder();\n\n    stringBuilder.append(mTextViewCamName.getText().toString()).append(SEREDUtils.PREFIX_DATE_INITIAL_FILE).append(simpleDateFormat.format(this.recordingInitDate)).append(SEREDUtils.PREFIX_DATE_END_FILE).append(simpleDateFormat.format(new Date())).append(SEREDUtils.SUFFIX_TYPE_VIDEO);\n\n    File inputFile = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_MOVIES), stringBuilder.toString());\n\n    try {\n        FileOutputStream fos = new FileOutputStream(inputFile);\n        fos.write(videoBytes);\n        fos.close();\n    } catch (Exception e) {\n        Log.e(TAG, e.getMessage());\n    }\n}\n</code></pre>\n<p>Problem: It is saving the recording to the local file, but the recording seems to be playing at 2x speed, and it always cuts about 8 seconds of the recording. It only shows half of it, even though it's writing all the frames.</p>\n"},{"tags":["java","swing","canvas","jframe"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1694137954,"post_id":77063682,"comment_id":135855178,"body_markdown":"I would by having a look at the [`BufferStrategy` JavaDocs](https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/java/awt/image/BufferStrategy.html), it has a really good example of how you should be using it","body":"I would by having a look at the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/java/awt/image/BufferStrategy.html\" rel=\"nofollow noreferrer\"><code>BufferStrategy</code> JavaDocs</a>, it has a really good example of how you should be using it"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1694138174,"post_id":77063682,"comment_id":135855195,"body_markdown":"This `this.pack();` followed by `gameEngine = new GameEngine(this.getWidth(), this.getHeight());` and `this.add(gameEngine);` is problematic, packing an empty window is basically going to make it assume it&#39;s smallest size, so you&#39;re probably going to get weird results from the `getWidth/Height` calls, probably with one been zero, so, nothing will ever get painted because of it","body":"This <code>this.pack();</code> followed by <code>gameEngine = new GameEngine(this.getWidth(), this.getHeight());</code> and <code>this.add(gameEngine);</code> is problematic, packing an empty window is basically going to make it assume it&#39;s smallest size, so you&#39;re probably going to get weird results from the <code>getWidth&#47;Height</code> calls, probably with one been zero, so, nothing will ever get painted because of it"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1694138506,"post_id":77063682,"comment_id":135855213,"body_markdown":"I&#39;d also be worried about `matrix = new String[WIDTH / cellSize][HEIGHT / cellSize];`, which may result in array of `0` length","body":"I&#39;d also be worried about <code>matrix = new String[WIDTH &#47; cellSize][HEIGHT &#47; cellSize];</code>, which may result in array of <code>0</code> length"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1694138749,"post_id":77063682,"comment_id":135855227,"body_markdown":"Get rid of `synchronized` on the `start` and `run` methods, this causing no end of issues","body":"Get rid of <code>synchronized</code> on the <code>start</code> and <code>run</code> methods, this causing no end of issues"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1694138944,"post_id":77063682,"comment_id":135855240,"body_markdown":"Rather then doing `BufferedImage layer = new BufferedImage` each time `render` is called, I would create a instance once (or every time the window size has changed), otherwise you&#39;re creating a lot of short lived objects which will add a GC overhead which will degrade the performance.  I would also pass the renderable area to `Background` and, again, resize the contents if it changes, otherwise re-use the previous cached values.  Your &quot;main loop&quot; is also free wheeling, which is going to degrade performance.  You will need to add in some kind of `Thread.sleep` call at some point","body":"Rather then doing <code>BufferedImage layer = new BufferedImage</code> each time <code>render</code> is called, I would create a instance once (or every time the window size has changed), otherwise you&#39;re creating a lot of short lived objects which will add a GC overhead which will degrade the performance.  I would also pass the renderable area to <code>Background</code> and, again, resize the contents if it changes, otherwise re-use the previous cached values.  Your &quot;main loop&quot; is also free wheeling, which is going to degrade performance.  You will need to add in some kind of <code>Thread.sleep</code> call at some point"},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":1,"creation_date":1694139103,"post_id":77063682,"comment_id":135855250,"body_markdown":"You are doing quite a few things wrong.  First, don&#39;t extend `JFrame`; just use an instance.  Don&#39;t use `Canvas`, use `JPanel`.  And painting should be done in the overridden `paintComponent(Graphics g)` method of `JPanel`  check out the [Java Tutorials](http://docs.oracle.com/javase/tutorial/index.html) section on painting.  You should also check out the Swing [Timer](https://docs.oracle.com/en/java/javase/19/docs/api/java.desktop/javax/swing/Timer.html) class.","body":"You are doing quite a few things wrong.  First, don&#39;t extend <code>JFrame</code>; just use an instance.  Don&#39;t use <code>Canvas</code>, use <code>JPanel</code>.  And painting should be done in the overridden <code>paintComponent(Graphics g)</code> method of <code>JPanel</code>  check out the <a href=\"http://docs.oracle.com/javase/tutorial/index.html\" rel=\"nofollow noreferrer\">Java Tutorials</a> section on painting.  You should also check out the Swing <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.desktop/javax/swing/Timer.html\" rel=\"nofollow noreferrer\">Timer</a> class."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1694139349,"post_id":77063682,"comment_id":135855260,"body_markdown":"@WJS - There&#39;s nothing &quot;wrong&quot; with using `Canvas` in this way, assuming you want to make use of the low level APIs and control the rendering process (ie make your own &quot;main loop&quot;), but that&#39;s contextual to the desired results &#129335;‍♂️","body":"@WJS - There&#39;s nothing &quot;wrong&quot; with using <code>Canvas</code> in this way, assuming you want to make use of the low level APIs and control the rendering process (ie make your own &quot;main loop&quot;), but that&#39;s contextual to the desired results 🤷‍♂️"},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":1,"creation_date":1694139540,"post_id":77063682,"comment_id":135855267,"body_markdown":"@MadProgrammer Well, everything I have read says it is antiquated, And I have never needed it when doing graphics.  But I will yield to the expert. BTW, the API says the paint method must be overridden when doing custom graphics.  Yet I see no `paint` method.","body":"@MadProgrammer Well, everything I have read says it is antiquated, And I have never needed it when doing graphics.  But I will yield to the expert. BTW, the API says the paint method must be overridden when doing custom graphics.  Yet I see no <code>paint</code> method."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":2,"creation_date":1694140314,"post_id":77063682,"comment_id":135855317,"body_markdown":"@WJS `BufferStrategy` gives you direct access to control over the paint pipeline, rather then relying on Swing&#39;s paint pipeline.  So, in this case, you become responsible for scheduling the paint passes, hence the &quot;main loop&quot; thread and `render` methods.  You&#39;re also not tied to the Event Dispatching Thread, which is another added complication, but what it does is it gives you access to the &quot;lowest level&quot; possible access to the rendering pipeline Java provides (closest to the metal), so it&#39;s generally used for &quot;high performance&quot; output - so again, it comes down to what you want to achieve.","body":"@WJS <code>BufferStrategy</code> gives you direct access to control over the paint pipeline, rather then relying on Swing&#39;s paint pipeline.  So, in this case, you become responsible for scheduling the paint passes, hence the &quot;main loop&quot; thread and <code>render</code> methods.  You&#39;re also not tied to the Event Dispatching Thread, which is another added complication, but what it does is it gives you access to the &quot;lowest level&quot; possible access to the rendering pipeline Java provides (closest to the metal), so it&#39;s generally used for &quot;high performance&quot; output - so again, it comes down to what you want to achieve."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1694140354,"post_id":77063682,"comment_id":135855320,"body_markdown":"@WJS I, personally, would start with a `JPanel` and Swing `Timer`, if that wasn&#39;t giving me the performance I needed, then I&#39;d consider a `BufferStrategy`","body":"@WJS I, personally, would start with a <code>JPanel</code> and Swing <code>Timer</code>, if that wasn&#39;t giving me the performance I needed, then I&#39;d consider a <code>BufferStrategy</code>"},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1694140876,"post_id":77063682,"comment_id":135855357,"body_markdown":"@MadProgrammer.  Interesting.  Did not know that about Canvas.  Thanks for the education.","body":"@MadProgrammer.  Interesting.  Did not know that about Canvas.  Thanks for the education."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1694141273,"post_id":77063682,"comment_id":135855385,"body_markdown":"But still, but still, it&#39;s pure *AWT*, technology from 1995 that was superseded Swing a few years later, and then superseded yet again by JavaFX in 2018.","body":"But still, but still, it&#39;s pure <i>AWT</i>, technology from 1995 that was superseded Swing a few years later, and then superseded yet again by JavaFX in 2018."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1694141477,"post_id":77063682,"comment_id":135855406,"body_markdown":"@HovercraftFullOfEels Well, you could just make use of the OpenGL bindings for Java ... if you really want some pain &#129315; - and all the trouble I&#39;ve had getting JavaFX just to work &#128545; (oh, and interestingly, Swing came first (or at least the core idea/concepts), but Netscape insisted that the API make use of native components, so they wrote AWT/released before it)","body":"@HovercraftFullOfEels Well, you could just make use of the OpenGL bindings for Java ... if you really want some pain 🤣 - and all the trouble I&#39;ve had getting JavaFX just to work 😡 (oh, and interestingly, Swing came first (or at least the core idea/concepts), but Netscape insisted that the API make use of native components, so they wrote AWT/released before it)"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1694141580,"post_id":77063682,"comment_id":135855411,"body_markdown":"@MadProgrammer: I haven&#39;t seen that mentioned in quite a while. To be honest, I&#39;ve been spending more of my time in JSS/CSS/HTML land, and all the myriad libraries and frameworks there.","body":"@MadProgrammer: I haven&#39;t seen that mentioned in quite a while. To be honest, I&#39;ve been spending more of my time in JSS/CSS/HTML land, and all the myriad libraries and frameworks there."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1694141646,"post_id":77063682,"comment_id":135855415,"body_markdown":"@HovercraftFullOfEels Oh wow, you really like pain &#129315;&#128540;","body":"@HovercraftFullOfEels Oh wow, you really like pain 🤣😜"}],"answers":[{"comments":[{"owner":{"account_id":17952665,"reputation":76,"user_id":13045462,"display_name":"Rafael Silva"},"score":0,"creation_date":1694179975,"post_id":77063804,"comment_id":135861382,"body_markdown":"Thanks so much for trying to help out, here are some points:\n - In the GameFrame the pack was unnecessary but unharmful in anyway, it makes sure the frame is packed in the maximum dimensions of the monitor. To make sure, I printed the `getWidth()` and `getHeight()` before instantiating the game and it never returned 0, even when the game didn&#39;t render;\n - Agree synchronized is not necessary, I was using some old code I had as a base and didn&#39;t pay enough attention to this part;\n - Thread starvation noted and fixed;\n - to be continued...","body":"Thanks so much for trying to help out, here are some points:  - In the GameFrame the pack was unnecessary but unharmful in anyway, it makes sure the frame is packed in the maximum dimensions of the monitor. To make sure, I printed the <code>getWidth()</code> and <code>getHeight()</code> before instantiating the game and it never returned 0, even when the game didn&#39;t render;  - Agree synchronized is not necessary, I was using some old code I had as a base and didn&#39;t pay enough attention to this part;  - Thread starvation noted and fixed;  - to be continued..."},{"owner":{"account_id":17952665,"reputation":76,"user_id":13045462,"display_name":"Rafael Silva"},"score":0,"creation_date":1694180096,"post_id":77063804,"comment_id":135861415,"body_markdown":"- I don&#39;t want the matrix to be calculated every loop, right now I&#39;m using zeros as a placeholder, but it is going to be random at first and then slowly changing;\n - Finally, agreed, I should have a better look at the BufferStrategy documentation, I fill like my mistake might be lying there.\n\nThis is just the first step of the project, and I will need to control the loop in the future.\n\nPlease let me know if you figure why it is randomly not working. I&#39;ll bring news in case I find anything.","body":"- I don&#39;t want the matrix to be calculated every loop, right now I&#39;m using zeros as a placeholder, but it is going to be random at first and then slowly changing;  - Finally, agreed, I should have a better look at the BufferStrategy documentation, I fill like my mistake might be lying there.  This is just the first step of the project, and I will need to control the loop in the future.  Please let me know if you figure why it is randomly not working. I&#39;ll bring news in case I find anything."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1694210663,"post_id":77063804,"comment_id":135866408,"body_markdown":"I didn’t say to recalculate each loop - but recalculate if the size changes","body":"I didn’t say to recalculate each loop - but recalculate if the size changes"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1694210731,"post_id":77063804,"comment_id":135866418,"body_markdown":"*” pack was unnecessary but unharmful in anyway, it makes sure the frame is packed in the maximum dimensions of the monitor”* isn’t actually how it works","body":"<i>” pack was unnecessary but unharmful in anyway, it makes sure the frame is packed in the maximum dimensions of the monitor”</i> isn’t actually how it works"}],"tags":[],"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694140064,"creation_date":1694140064,"answer_id":77063804,"question_id":77063682,"body_markdown":"This...\r\n\r\n    public GameFrame () {\r\n        this.setExtendedState(JFrame.MAXIMIZED_BOTH);\r\n        this.setUndecorated(true);\r\n        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        this.pack();\r\n        this.setVisible(true); \r\n        this.setBackground(Color.BLACK);\r\n        \r\n        gameEngine = new GameEngine(this.getWidth(), this.getHeight());\r\n        this.add(gameEngine);\r\n        gameEngine.start();\r\n    }\r\n\r\nis problematic on a number of levels.\r\n\r\nFirst, you maximize the window, then you call `pack` which will cause the window to &quot;pack&quot; itself around the preferred size of it&#39;s content, you&#39;ve not added anything to the window yet, so it&#39;s likely to size to `0x0` (because you&#39;ve removed the window decorations).  So when you call `getWidth`/`getHeight`, you&#39;re likely getting one or both to return `0`.\r\n\r\nFor me...\r\n\r\n    public synchronized void start () {\r\n        //...\r\n    }\r\n\r\n    @Override\r\n    public synchronized void run() {\r\n        //...\r\n    }\r\n\r\n`synchronized` was causing no end of issues, basically locked up the entire window.  I can&#39;t see how `run` needs to be `synchronized` anyway, doesn&#39;t really make sense to me.\r\n\r\nWhile on the subject, your &quot;main loop&quot; is free wheeling, this is a bad idea as it will consume all your CPU cycles and prevent anything else from getting done (thread starvation).  You should put a small `Thread.sleep` call in to allow other threads to be scheduled to run.\r\n\r\nThis...\r\n\r\n    private void render() {\r\n        // Get buffer strategy\r\n        BufferStrategy bs = this.getBufferStrategy();\r\n        if (bs == null) {\r\n            this.createBufferStrategy(3);\r\n            return;\r\n        }\r\n        // Init layer\r\n        BufferedImage layer = new BufferedImage(WIDTH, HEIGHT, BufferedImage.TYPE_INT_RGB);\r\n        Graphics2D g = layer.createGraphics();\r\n        g.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\r\n        // Render game\r\n        background.render(g);\r\n        // Draw Graphics\r\n        g = (Graphics2D) bs.getDrawGraphics();\r\n        g.drawImage(layer, 0, 0, WIDTH, HEIGHT, null);\r\n        // show\r\n        bs.show();\r\n    }\r\n\r\nis unoptimised.  You&#39;re creating a short lived `BufferedImage`, this is going to place strain on the garbage collection process and will have a degrading impact on your programs performance.  You&#39;re also creating two `Graphics` contexts but are never disposing of them.\r\n\r\nInstead, I would create a instance field and initialise the `BufferedImage` when it&#39;s need (ie is `nil` or the size of the window changes)\r\n\r\nYou should also have a read of the [BufferStrategy JavaDocs](https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/java/awt/image/BufferStrategy.html) as it has an excellent example of how you should be using `BufferStrategy`.\r\n\r\nI don&#39;t think there is any need to pass the `width` and `height` to the `Background` via it&#39;s constructor, you&#39;d be better passing it to the `render` method, this way you have a better chance of responding to window size changes.\r\n\r\n`BufferStrategy` is a low level API and unless you absolutely must have control of the rendering pipeline and need to be as close to &quot;metal&quot; as you can get in Java, I would consider, instead, staring with a `JPanel` and overriding it&#39;s `paintComponent` method and then using a Swing `Timer` as the main rendering loop.\r\n\r\nIf that&#39;s not giving your the performance level you desire, then I&#39;d consider \r\nusing a `BufferStrategy` \r\n\r\n# Possible runnable example...\r\n\r\n    import java.awt.Canvas;\r\n    import java.awt.Color;\r\n    import java.awt.Dimension;\r\n    import java.awt.EventQueue;\r\n    import java.awt.Graphics;\r\n    import java.awt.image.BufferStrategy;\r\n    import java.awt.image.BufferedImage;\r\n    import java.util.logging.Level;\r\n    import java.util.logging.Logger;\r\n    import javax.swing.JFrame;\r\n\r\n    public class Main {\r\n\r\n        public static void main(String[] args) {\r\n            new Main();\r\n        }\r\n\r\n        public Main() {\r\n            EventQueue.invokeLater(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    GameEngine engine = new GameEngine(100, 100);\r\n                    JFrame frame = new JFrame();\r\n                    frame.add(engine);\r\n                    frame.pack();\r\n                    frame.setLocationRelativeTo(null);\r\n                    frame.setVisible(true);\r\n\r\n                    engine.start();\r\n                }\r\n            });\r\n        }\r\n\r\n        public class GameEngine extends Canvas implements Runnable {\r\n            // Loop tools\r\n            private Thread thread;\r\n            private Boolean isRunning;\r\n            // Game attributes\r\n            private final int targetWidth, targetHeight;\r\n            // Game elements\r\n            private Background background;\r\n\r\n            public GameEngine(int width, int height) {\r\n                this.targetWidth = width;\r\n                this.targetHeight = height;\r\n                background = new Background();\r\n            }\r\n\r\n            @Override\r\n            public Dimension getPreferredSize() {\r\n                return new Dimension(targetWidth, targetHeight);\r\n            }\r\n\r\n            private void tick() {\r\n                background.tick();\r\n            }\r\n\r\n            private BufferedImage layer;\r\n\r\n            private void render() {\r\n                // Get buffer strategy\r\n                BufferStrategy bs = this.getBufferStrategy();\r\n                if (bs == null) {\r\n                    this.createBufferStrategy(3);\r\n                    return;\r\n                }\r\n\r\n                if (layer == null || layer.getWidth() != getWidth() || layer.getHeight() != getHeight()) {\r\n                    layer = new BufferedImage(getWidth(), getHeight(), BufferedImage.TYPE_INT_RGB);\r\n                }\r\n                Graphics layerGraphics = layer.createGraphics();\r\n                background.render(layerGraphics, getWidth(), getHeight());\r\n                layerGraphics.dispose();\r\n                do {\r\n                    // The following loop ensures that the contents of the drawing buffer\r\n                    // are consistent in case the underlying surface was recreated\r\n                    do {\r\n                        // Get a new graphics context every time through the loop\r\n                        // to make sure the strategy is validated\r\n                        Graphics graphics = bs.getDrawGraphics();\r\n\r\n                        // Render to graphics\r\n                        graphics.drawImage(layer, 0, 0, this);\r\n                        // Dispose the graphics\r\n                        graphics.dispose();\r\n\r\n                        // Repeat the rendering if the drawing buffer contents\r\n                        // were restored\r\n                    } while (bs.contentsRestored());\r\n\r\n                    // Display the buffer\r\n                    bs.show();\r\n\r\n                    // Repeat the rendering if the drawing buffer was lost\r\n                } while (bs.contentsLost());\r\n            }\r\n\r\n            public void start() {\r\n                thread = new Thread(this);\r\n                isRunning = true;\r\n                thread.start();\r\n            }\r\n\r\n            @Override\r\n            public void run() {\r\n                // Tools for the main loop\r\n                double desiredFPS = 60;\r\n                double nanoInterval = 1e9 / desiredFPS;\r\n                long lastTime = System.nanoTime();\r\n                long delta;\r\n                // Main loop\r\n                while (isRunning) {\r\n                    delta = System.nanoTime() - lastTime;\r\n                    if (delta &gt;= nanoInterval) {\r\n                        lastTime = System.nanoTime();\r\n                        // tick and render\r\n                        tick();\r\n                        render();\r\n                    }\r\n                    try {\r\n                        Thread.sleep(1000);\r\n                    } catch (InterruptedException ex) {\r\n                        Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);\r\n                    }\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        public class Background {\r\n            private static final int cellSize = 10;\r\n            private String[][] matrix;\r\n\r\n            public Background() {\r\n            }\r\n\r\n            public void tick() {\r\n\r\n            }\r\n\r\n            public void render(Graphics g, int width, int height) {\r\n                // render back background\r\n                if (matrix == null || matrix.length == 0 || matrix.length != width || matrix[0].length != height) {\r\n                    matrix = new String[width / cellSize][height / cellSize];\r\n                    for (int i = 0; i &lt; matrix.length; i++) {\r\n                        for (int j = 0; j &lt; matrix[i].length; j++) {\r\n                            matrix[i][j] = &quot;0&quot;;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                g.setColor(Color.BLACK);\r\n                g.fillRect(0, 0, width, height);\r\n                // render background\r\n                g.setColor(Color.GREEN);\r\n                for (int i = 0; i &lt; matrix.length; i++) {\r\n                    for (int j = 0; j &lt; matrix[i].length; j++) {\r\n                        g.drawString(matrix[i][j], i * cellSize, j * cellSize + cellSize);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n","title":"Canvas render sometimes and doesn&#39;t render other times","body":"<p>This...</p>\n<pre><code>public GameFrame () {\n    this.setExtendedState(JFrame.MAXIMIZED_BOTH);\n    this.setUndecorated(true);\n    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n    this.pack();\n    this.setVisible(true); \n    this.setBackground(Color.BLACK);\n    \n    gameEngine = new GameEngine(this.getWidth(), this.getHeight());\n    this.add(gameEngine);\n    gameEngine.start();\n}\n</code></pre>\n<p>is problematic on a number of levels.</p>\n<p>First, you maximize the window, then you call <code>pack</code> which will cause the window to &quot;pack&quot; itself around the preferred size of it's content, you've not added anything to the window yet, so it's likely to size to <code>0x0</code> (because you've removed the window decorations).  So when you call <code>getWidth</code>/<code>getHeight</code>, you're likely getting one or both to return <code>0</code>.</p>\n<p>For me...</p>\n<pre><code>public synchronized void start () {\n    //...\n}\n\n@Override\npublic synchronized void run() {\n    //...\n}\n</code></pre>\n<p><code>synchronized</code> was causing no end of issues, basically locked up the entire window.  I can't see how <code>run</code> needs to be <code>synchronized</code> anyway, doesn't really make sense to me.</p>\n<p>While on the subject, your &quot;main loop&quot; is free wheeling, this is a bad idea as it will consume all your CPU cycles and prevent anything else from getting done (thread starvation).  You should put a small <code>Thread.sleep</code> call in to allow other threads to be scheduled to run.</p>\n<p>This...</p>\n<pre><code>private void render() {\n    // Get buffer strategy\n    BufferStrategy bs = this.getBufferStrategy();\n    if (bs == null) {\n        this.createBufferStrategy(3);\n        return;\n    }\n    // Init layer\n    BufferedImage layer = new BufferedImage(WIDTH, HEIGHT, BufferedImage.TYPE_INT_RGB);\n    Graphics2D g = layer.createGraphics();\n    g.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n    // Render game\n    background.render(g);\n    // Draw Graphics\n    g = (Graphics2D) bs.getDrawGraphics();\n    g.drawImage(layer, 0, 0, WIDTH, HEIGHT, null);\n    // show\n    bs.show();\n}\n</code></pre>\n<p>is unoptimised.  You're creating a short lived <code>BufferedImage</code>, this is going to place strain on the garbage collection process and will have a degrading impact on your programs performance.  You're also creating two <code>Graphics</code> contexts but are never disposing of them.</p>\n<p>Instead, I would create a instance field and initialise the <code>BufferedImage</code> when it's need (ie is <code>nil</code> or the size of the window changes)</p>\n<p>You should also have a read of the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/java/awt/image/BufferStrategy.html\" rel=\"nofollow noreferrer\">BufferStrategy JavaDocs</a> as it has an excellent example of how you should be using <code>BufferStrategy</code>.</p>\n<p>I don't think there is any need to pass the <code>width</code> and <code>height</code> to the <code>Background</code> via it's constructor, you'd be better passing it to the <code>render</code> method, this way you have a better chance of responding to window size changes.</p>\n<p><code>BufferStrategy</code> is a low level API and unless you absolutely must have control of the rendering pipeline and need to be as close to &quot;metal&quot; as you can get in Java, I would consider, instead, staring with a <code>JPanel</code> and overriding it's <code>paintComponent</code> method and then using a Swing <code>Timer</code> as the main rendering loop.</p>\n<p>If that's not giving your the performance level you desire, then I'd consider\nusing a <code>BufferStrategy</code></p>\n<h1>Possible runnable example...</h1>\n<pre><code>import java.awt.Canvas;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.EventQueue;\nimport java.awt.Graphics;\nimport java.awt.image.BufferStrategy;\nimport java.awt.image.BufferedImage;\nimport java.util.logging.Level;\nimport java.util.logging.Logger;\nimport javax.swing.JFrame;\n\npublic class Main {\n\n    public static void main(String[] args) {\n        new Main();\n    }\n\n    public Main() {\n        EventQueue.invokeLater(new Runnable() {\n            @Override\n            public void run() {\n                GameEngine engine = new GameEngine(100, 100);\n                JFrame frame = new JFrame();\n                frame.add(engine);\n                frame.pack();\n                frame.setLocationRelativeTo(null);\n                frame.setVisible(true);\n\n                engine.start();\n            }\n        });\n    }\n\n    public class GameEngine extends Canvas implements Runnable {\n        // Loop tools\n        private Thread thread;\n        private Boolean isRunning;\n        // Game attributes\n        private final int targetWidth, targetHeight;\n        // Game elements\n        private Background background;\n\n        public GameEngine(int width, int height) {\n            this.targetWidth = width;\n            this.targetHeight = height;\n            background = new Background();\n        }\n\n        @Override\n        public Dimension getPreferredSize() {\n            return new Dimension(targetWidth, targetHeight);\n        }\n\n        private void tick() {\n            background.tick();\n        }\n\n        private BufferedImage layer;\n\n        private void render() {\n            // Get buffer strategy\n            BufferStrategy bs = this.getBufferStrategy();\n            if (bs == null) {\n                this.createBufferStrategy(3);\n                return;\n            }\n\n            if (layer == null || layer.getWidth() != getWidth() || layer.getHeight() != getHeight()) {\n                layer = new BufferedImage(getWidth(), getHeight(), BufferedImage.TYPE_INT_RGB);\n            }\n            Graphics layerGraphics = layer.createGraphics();\n            background.render(layerGraphics, getWidth(), getHeight());\n            layerGraphics.dispose();\n            do {\n                // The following loop ensures that the contents of the drawing buffer\n                // are consistent in case the underlying surface was recreated\n                do {\n                    // Get a new graphics context every time through the loop\n                    // to make sure the strategy is validated\n                    Graphics graphics = bs.getDrawGraphics();\n\n                    // Render to graphics\n                    graphics.drawImage(layer, 0, 0, this);\n                    // Dispose the graphics\n                    graphics.dispose();\n\n                    // Repeat the rendering if the drawing buffer contents\n                    // were restored\n                } while (bs.contentsRestored());\n\n                // Display the buffer\n                bs.show();\n\n                // Repeat the rendering if the drawing buffer was lost\n            } while (bs.contentsLost());\n        }\n\n        public void start() {\n            thread = new Thread(this);\n            isRunning = true;\n            thread.start();\n        }\n\n        @Override\n        public void run() {\n            // Tools for the main loop\n            double desiredFPS = 60;\n            double nanoInterval = 1e9 / desiredFPS;\n            long lastTime = System.nanoTime();\n            long delta;\n            // Main loop\n            while (isRunning) {\n                delta = System.nanoTime() - lastTime;\n                if (delta &gt;= nanoInterval) {\n                    lastTime = System.nanoTime();\n                    // tick and render\n                    tick();\n                    render();\n                }\n                try {\n                    Thread.sleep(1000);\n                } catch (InterruptedException ex) {\n                    Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);\n                }\n            }\n        }\n\n    }\n\n    public class Background {\n        private static final int cellSize = 10;\n        private String[][] matrix;\n\n        public Background() {\n        }\n\n        public void tick() {\n\n        }\n\n        public void render(Graphics g, int width, int height) {\n            // render back background\n            if (matrix == null || matrix.length == 0 || matrix.length != width || matrix[0].length != height) {\n                matrix = new String[width / cellSize][height / cellSize];\n                for (int i = 0; i &lt; matrix.length; i++) {\n                    for (int j = 0; j &lt; matrix[i].length; j++) {\n                        matrix[i][j] = &quot;0&quot;;\n                    }\n                }\n            }\n\n            g.setColor(Color.BLACK);\n            g.fillRect(0, 0, width, height);\n            // render background\n            g.setColor(Color.GREEN);\n            for (int i = 0; i &lt; matrix.length; i++) {\n                for (int j = 0; j &lt; matrix[i].length; j++) {\n                    g.drawString(matrix[i][j], i * cellSize, j * cellSize + cellSize);\n                }\n            }\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":17952665,"reputation":76,"user_id":13045462,"display_name":"Rafael Silva"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1694621112,"creation_date":1694137372,"question_id":77063682,"body_markdown":"It is not completely random, at some point in my code I create a matrix, the smaller the matrix, the higher the chances of the canvas rendering normally. Even if I completely remove the matrix it sometimes won&#39;t render and show me a white screen.\r\n\r\nHere is the code in case anyone wants to try:\r\n\r\n# Game Frame\r\n```java\r\npackage com.GameLearning.main;\r\n\r\nimport java.awt.Color;\r\n\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JPanel;\r\n\r\n\r\npublic class GameFrame extends JFrame {\r\n    public static JFrame frame;\r\n    public static JPanel panel;\r\n    private static GameEngine gameEngine;\r\n\r\n    public GameFrame () {\r\n        this.setExtendedState(JFrame.MAXIMIZED_BOTH);\r\n        this.setUndecorated(true);\r\n        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        this.pack();\r\n        this.setVisible(true); \r\n        this.setBackground(Color.BLACK);\r\n        \r\n        gameEngine = new GameEngine(this.getWidth(), this.getHeight());\r\n        this.add(gameEngine);\r\n        gameEngine.start();\r\n    }\r\n\r\n    public static void main (String[] args) {\r\n        frame = new GameFrame();\r\n    }\r\n}\r\n```\r\n\r\n# Game Engine\r\n```java\r\npackage com.GameLearning.main;\r\n\r\nimport java.awt.Canvas;\r\nimport java.awt.Graphics2D;\r\nimport java.awt.RenderingHints;\r\nimport java.awt.image.BufferStrategy;\r\nimport java.awt.image.BufferedImage;\r\n\r\npublic class GameEngine extends Canvas implements Runnable{\r\n    // Loop tools\r\n    private Thread thread;\r\n    private Boolean isRunning;\r\n    // Game attributes\r\n    private final int WIDTH, HEIGHT;\r\n    // Game elements\r\n    private Background background;\r\n\r\n    public GameEngine (int WIDTH, int HEIGHT) {\r\n        this.WIDTH = WIDTH;\r\n        this.HEIGHT = HEIGHT;\r\n\r\n        background = new Background(0, 0, WIDTH, HEIGHT);\r\n    }\r\n\r\n    private void tick() {\r\n        background.tick();\r\n    }\r\n\r\n    private void render() {\r\n        // Get buffer strategy\r\n        BufferStrategy bs = this.getBufferStrategy();\r\n        if (bs == null) {\r\n            this.createBufferStrategy(3);\r\n            return;\r\n        }\r\n        // Init layer\r\n        BufferedImage layer = new BufferedImage(WIDTH, HEIGHT, BufferedImage.TYPE_INT_RGB);\r\n        Graphics2D g = layer.createGraphics();\r\n        g.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\r\n        // Render game\r\n        background.render(g);\r\n        // Draw Graphics\r\n        g = (Graphics2D) bs.getDrawGraphics();\r\n        g.drawImage(layer, 0, 0, WIDTH, HEIGHT, null);\r\n        // show\r\n        bs.show();\r\n    }\r\n\r\n    public synchronized void start () {\r\n        thread = new Thread(this);\r\n        isRunning = true;\r\n        thread.start();\r\n    }\r\n\r\n    @Override\r\n    public synchronized void run() {\r\n        // Tools for the main loop\r\n        double desiredFPS = 60;\r\n        double nanoInterval = 1e9 / desiredFPS;\r\n        long lastTime = System.nanoTime();\r\n        long delta;\r\n        // Main loop\r\n        while (isRunning) {\r\n            delta = System.nanoTime() - lastTime;\r\n            if (delta &gt;= nanoInterval) {\r\n                lastTime = System.nanoTime();\r\n                // tick and render\r\n                tick();\r\n                render();\r\n            }\r\n        }        \r\n    }\r\n\r\n}\r\n```\r\n\r\n# Background\r\n```java\r\npackage com.GameLearning.main;\r\n\r\nimport java.awt.Color;\r\nimport java.awt.Graphics;\r\n\r\n\r\npublic class Background {\r\n    private static final int cellSize = 10;\r\n    private int x, y, WIDTH, HEIGHT;\r\n    private String[][] matrix;\r\n\r\n    public Background (int x, int y, int WIDTH, int HEIGHT) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.WIDTH = WIDTH;\r\n        this.HEIGHT = HEIGHT;\r\n         \r\n        matrix = new String[WIDTH / cellSize][HEIGHT / cellSize];\r\n        for (int i = 0; i &lt; matrix.length; i++) {\r\n            for (int j = 0; j &lt; matrix[i].length; j++) {\r\n                matrix[i][j] = &quot;0&quot;;\r\n            }\r\n        }\r\n    }\r\n\r\n    public void tick () {\r\n\r\n    }\r\n\r\n    public void render(Graphics g) {\r\n        // render back background\r\n        g.setColor(Color.BLACK);\r\n        g.fillRect(x, y, WIDTH, HEIGHT);\r\n        // render background\r\n        g.setColor(Color.GREEN);\r\n        for (int i = 0; i &lt; matrix.length; i++) {\r\n            for (int j = 0; j &lt; matrix[i].length; j++) {\r\n                g.drawString(matrix[i][j], i * cellSize, j * cellSize + cellSize);\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\nThe background is where I create the matrix, increasing the cellSize reduces the size of the matrix, increasing the chances of the canvas render (but not providing me the results I want)","title":"Canvas render sometimes and doesn&#39;t render other times","body":"<p>It is not completely random, at some point in my code I create a matrix, the smaller the matrix, the higher the chances of the canvas rendering normally. Even if I completely remove the matrix it sometimes won't render and show me a white screen.</p>\n<p>Here is the code in case anyone wants to try:</p>\n<h1>Game Frame</h1>\n<pre class=\"lang-java prettyprint-override\"><code>package com.GameLearning.main;\n\nimport java.awt.Color;\n\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\n\n\npublic class GameFrame extends JFrame {\n    public static JFrame frame;\n    public static JPanel panel;\n    private static GameEngine gameEngine;\n\n    public GameFrame () {\n        this.setExtendedState(JFrame.MAXIMIZED_BOTH);\n        this.setUndecorated(true);\n        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        this.pack();\n        this.setVisible(true); \n        this.setBackground(Color.BLACK);\n        \n        gameEngine = new GameEngine(this.getWidth(), this.getHeight());\n        this.add(gameEngine);\n        gameEngine.start();\n    }\n\n    public static void main (String[] args) {\n        frame = new GameFrame();\n    }\n}\n</code></pre>\n<h1>Game Engine</h1>\n<pre class=\"lang-java prettyprint-override\"><code>package com.GameLearning.main;\n\nimport java.awt.Canvas;\nimport java.awt.Graphics2D;\nimport java.awt.RenderingHints;\nimport java.awt.image.BufferStrategy;\nimport java.awt.image.BufferedImage;\n\npublic class GameEngine extends Canvas implements Runnable{\n    // Loop tools\n    private Thread thread;\n    private Boolean isRunning;\n    // Game attributes\n    private final int WIDTH, HEIGHT;\n    // Game elements\n    private Background background;\n\n    public GameEngine (int WIDTH, int HEIGHT) {\n        this.WIDTH = WIDTH;\n        this.HEIGHT = HEIGHT;\n\n        background = new Background(0, 0, WIDTH, HEIGHT);\n    }\n\n    private void tick() {\n        background.tick();\n    }\n\n    private void render() {\n        // Get buffer strategy\n        BufferStrategy bs = this.getBufferStrategy();\n        if (bs == null) {\n            this.createBufferStrategy(3);\n            return;\n        }\n        // Init layer\n        BufferedImage layer = new BufferedImage(WIDTH, HEIGHT, BufferedImage.TYPE_INT_RGB);\n        Graphics2D g = layer.createGraphics();\n        g.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n        // Render game\n        background.render(g);\n        // Draw Graphics\n        g = (Graphics2D) bs.getDrawGraphics();\n        g.drawImage(layer, 0, 0, WIDTH, HEIGHT, null);\n        // show\n        bs.show();\n    }\n\n    public synchronized void start () {\n        thread = new Thread(this);\n        isRunning = true;\n        thread.start();\n    }\n\n    @Override\n    public synchronized void run() {\n        // Tools for the main loop\n        double desiredFPS = 60;\n        double nanoInterval = 1e9 / desiredFPS;\n        long lastTime = System.nanoTime();\n        long delta;\n        // Main loop\n        while (isRunning) {\n            delta = System.nanoTime() - lastTime;\n            if (delta &gt;= nanoInterval) {\n                lastTime = System.nanoTime();\n                // tick and render\n                tick();\n                render();\n            }\n        }        \n    }\n\n}\n</code></pre>\n<h1>Background</h1>\n<pre class=\"lang-java prettyprint-override\"><code>package com.GameLearning.main;\n\nimport java.awt.Color;\nimport java.awt.Graphics;\n\n\npublic class Background {\n    private static final int cellSize = 10;\n    private int x, y, WIDTH, HEIGHT;\n    private String[][] matrix;\n\n    public Background (int x, int y, int WIDTH, int HEIGHT) {\n        this.x = x;\n        this.y = y;\n        this.WIDTH = WIDTH;\n        this.HEIGHT = HEIGHT;\n         \n        matrix = new String[WIDTH / cellSize][HEIGHT / cellSize];\n        for (int i = 0; i &lt; matrix.length; i++) {\n            for (int j = 0; j &lt; matrix[i].length; j++) {\n                matrix[i][j] = &quot;0&quot;;\n            }\n        }\n    }\n\n    public void tick () {\n\n    }\n\n    public void render(Graphics g) {\n        // render back background\n        g.setColor(Color.BLACK);\n        g.fillRect(x, y, WIDTH, HEIGHT);\n        // render background\n        g.setColor(Color.GREEN);\n        for (int i = 0; i &lt; matrix.length; i++) {\n            for (int j = 0; j &lt; matrix[i].length; j++) {\n                g.drawString(matrix[i][j], i * cellSize, j * cellSize + cellSize);\n            }\n        }\n    }\n}\n</code></pre>\n<p>The background is where I create the matrix, increasing the cellSize reduces the size of the matrix, increasing the chances of the canvas render (but not providing me the results I want)</p>\n"},{"tags":["java","android","reflection","material-design"],"owner":{"account_id":14266486,"reputation":4054,"user_id":10305444,"display_name":"Maifee Ul Asad"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694620968,"creation_date":1694620968,"question_id":77098733,"body_markdown":"I&#39;m trying to change the font size of the label / hint of `TextInputLayout`. As it has a property `collapsingTextHelper` where it holds all data related to font of label / hint, accessing it, would solve the problem. But it&#39;s private. So I&#39;m trying to use reflect.\r\n\r\nRelavent code:\r\n```\r\nField field = TextInputLayout.class.getDeclaredField(&quot;collapsingTextHelper&quot;);\r\n                field.setAccessible(true);\r\n                Object collapsingTextHelper = field.get(this);\r\n\r\n                Field expandedTextSizeField = collapsingTextHelper.getClass().getDeclaredField(&quot;expandedTextSize&quot;);\r\n                Field collapsedTextSizeField = collapsingTextHelper.getClass().getDeclaredField(&quot;collapsedTextSize&quot;);\r\n\r\n                expandedTextSizeField.setAccessible(true);\r\n                expandedTextSizeField.setFloat(collapsingTextHelper, mainHintTextSize);\r\n                collapsedTextSizeField.setAccessible(true);\r\n                collapsedTextSizeField.setFloat(collapsingTextHelper, mainHintTextSize);\r\n```\r\n\r\nHere is my full code:\r\n```\r\n\r\npublic class CustomTextInputLayout extends TextInputLayout {\r\n    private final float mainHintTextSize = 24;\r\n\r\n    public CustomTextInputLayout(@NonNull Context context) {\r\n        super(context);\r\n    }\r\n\r\n    public CustomTextInputLayout(@NonNull Context context, @Nullable AttributeSet attrs) {\r\n        super(context, attrs);\r\n    }\r\n\r\n    public CustomTextInputLayout(@NonNull Context context, @Nullable AttributeSet attrs, int defStyleAttr) {\r\n        super(context, attrs, defStyleAttr);\r\n\r\n        TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.CustomTextInputLayout);\r\n//        mainHintTextSize = a.getDimensionPixelSize(R.styleable.CustomTextInputLayout_mainHintTextSize, 0);\r\n        a.recycle();\r\n    }\r\n\r\n    @Override\r\n    public void addView(@NonNull View child, int index, @NonNull ViewGroup.LayoutParams params) {\r\n        super.addView(child, index, params);\r\n        if (child instanceof EditText) {\r\n            try {\r\n                Field field = TextInputLayout.class.getDeclaredField(&quot;collapsingTextHelper&quot;);\r\n                field.setAccessible(true);\r\n                Object collapsingTextHelper = field.get(this);\r\n\r\n                Field expandedTextSizeField = collapsingTextHelper.getClass().getDeclaredField(&quot;expandedTextSize&quot;);\r\n                Field collapsedTextSizeField = collapsingTextHelper.getClass().getDeclaredField(&quot;collapsedTextSize&quot;);\r\n\r\n                expandedTextSizeField.setAccessible(true);\r\n                expandedTextSizeField.setFloat(collapsingTextHelper, mainHintTextSize);\r\n                collapsedTextSizeField.setAccessible(true);\r\n                collapsedTextSizeField.setFloat(collapsingTextHelper, mainHintTextSize);\r\n\r\n            } catch (NoSuchFieldException | IllegalAccessException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n    public float getMainHintTextSize() {\r\n        return mainHintTextSize;\r\n    }\r\n\r\n    public void setMainHintTextSize(float size) {\r\n        if (getEditText() != null) {\r\n            throw new IllegalStateException(&quot;Hint text size must be set before EditText is added&quot;);\r\n        }\r\n\r\n//        mainHintTextSize = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_SP, size, getResources().getDisplayMetrics());\r\n    }\r\n}\r\n\r\n```\r\n\r\nAnd it doesn&#39;t raise any error.\r\n\r\nBut even the code has been executed, it doesn&#39;t change the font size of the collapsed text.","title":"Trying to override the font size of label of the TextInputLayout, using reflection","body":"<p>I'm trying to change the font size of the label / hint of <code>TextInputLayout</code>. As it has a property <code>collapsingTextHelper</code> where it holds all data related to font of label / hint, accessing it, would solve the problem. But it's private. So I'm trying to use reflect.</p>\n<p>Relavent code:</p>\n<pre><code>Field field = TextInputLayout.class.getDeclaredField(&quot;collapsingTextHelper&quot;);\n                field.setAccessible(true);\n                Object collapsingTextHelper = field.get(this);\n\n                Field expandedTextSizeField = collapsingTextHelper.getClass().getDeclaredField(&quot;expandedTextSize&quot;);\n                Field collapsedTextSizeField = collapsingTextHelper.getClass().getDeclaredField(&quot;collapsedTextSize&quot;);\n\n                expandedTextSizeField.setAccessible(true);\n                expandedTextSizeField.setFloat(collapsingTextHelper, mainHintTextSize);\n                collapsedTextSizeField.setAccessible(true);\n                collapsedTextSizeField.setFloat(collapsingTextHelper, mainHintTextSize);\n</code></pre>\n<p>Here is my full code:</p>\n<pre><code>\npublic class CustomTextInputLayout extends TextInputLayout {\n    private final float mainHintTextSize = 24;\n\n    public CustomTextInputLayout(@NonNull Context context) {\n        super(context);\n    }\n\n    public CustomTextInputLayout(@NonNull Context context, @Nullable AttributeSet attrs) {\n        super(context, attrs);\n    }\n\n    public CustomTextInputLayout(@NonNull Context context, @Nullable AttributeSet attrs, int defStyleAttr) {\n        super(context, attrs, defStyleAttr);\n\n        TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.CustomTextInputLayout);\n//        mainHintTextSize = a.getDimensionPixelSize(R.styleable.CustomTextInputLayout_mainHintTextSize, 0);\n        a.recycle();\n    }\n\n    @Override\n    public void addView(@NonNull View child, int index, @NonNull ViewGroup.LayoutParams params) {\n        super.addView(child, index, params);\n        if (child instanceof EditText) {\n            try {\n                Field field = TextInputLayout.class.getDeclaredField(&quot;collapsingTextHelper&quot;);\n                field.setAccessible(true);\n                Object collapsingTextHelper = field.get(this);\n\n                Field expandedTextSizeField = collapsingTextHelper.getClass().getDeclaredField(&quot;expandedTextSize&quot;);\n                Field collapsedTextSizeField = collapsingTextHelper.getClass().getDeclaredField(&quot;collapsedTextSize&quot;);\n\n                expandedTextSizeField.setAccessible(true);\n                expandedTextSizeField.setFloat(collapsingTextHelper, mainHintTextSize);\n                collapsedTextSizeField.setAccessible(true);\n                collapsedTextSizeField.setFloat(collapsingTextHelper, mainHintTextSize);\n\n            } catch (NoSuchFieldException | IllegalAccessException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n\n    public float getMainHintTextSize() {\n        return mainHintTextSize;\n    }\n\n    public void setMainHintTextSize(float size) {\n        if (getEditText() != null) {\n            throw new IllegalStateException(&quot;Hint text size must be set before EditText is added&quot;);\n        }\n\n//        mainHintTextSize = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_SP, size, getResources().getDisplayMetrics());\n    }\n}\n\n</code></pre>\n<p>And it doesn't raise any error.</p>\n<p>But even the code has been executed, it doesn't change the font size of the collapsed text.</p>\n"},{"tags":["java","oracle","google-cloud-dataflow","apache-beam","avro"],"owner":{"account_id":11959487,"reputation":1,"user_id":8750893,"display_name":"pijars"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694620968,"creation_date":1694605990,"question_id":77096836,"body_markdown":"I use Apache Beam 2.49. I have to get data from Oracle database and save it in Avro file on Google Cloud Storage. I know how to get this data, schema and generate `GenericRecord` from Oracle but I have problem with use this schema during saving to Avro:\r\n\r\n\r\n    PCollection&lt;GenericRecord&gt; inputData = inputData.applay(&quot;Write to Avro&quot;, AvroIO.writeGenericRecords(SCHEMA)\r\n                        .to(inputOptions.getOutputPath())\r\n                        .withSuffix(&quot;.avro&quot;)\r\n                        .withoutSharding()\r\n                        .withCodec(CodecFactory.snappyCodec())\r\n                        .withNumShards(1))\r\n\r\n\r\nI tried to get Schema from `GenericRecord` to `PCollectionView` but I don&#39;t know how can I use it during writing:\r\n\r\n\r\n    PCollectionView&lt;Schema&gt; schemaView = parsedData.apply(&quot;Prepare Schema&quot;, Sample.any(1))\r\n                .apply(&quot;Add schema to memory&quot;,\r\n                        MapElements.into(TypeDescriptor.of(Schema.class))\r\n                                .via((GenericRecord record) -&gt; record.getSchema()))\r\n                .apply(View.asSingleton());\r\n\r\nSecond thing which I tried was save schema to file and read it before saving `Schema schema  =  readSchemaFromGCS()`\r\nand use it but then I have two ways in job so creating file wasn&#39;t waiting for saving schema. \r\nI can&#39;t use `Wait.on(previousStep)` because `TextIO.write()` output type is `PDone`.\r\nAnyone know how to use schema from `GenericRecord` generated during job in one pipeline? \r\nCreating to separate pipelines doesn&#39;t satisfy me.","title":"Use Avro schema generated during the process in writing operation to Avro file in Apache Beam pipeline/Java","body":"<p>I use Apache Beam 2.49. I have to get data from Oracle database and save it in Avro file on Google Cloud Storage. I know how to get this data, schema and generate <code>GenericRecord</code> from Oracle but I have problem with use this schema during saving to Avro:</p>\n<pre><code>PCollection&lt;GenericRecord&gt; inputData = inputData.applay(&quot;Write to Avro&quot;, AvroIO.writeGenericRecords(SCHEMA)\n                    .to(inputOptions.getOutputPath())\n                    .withSuffix(&quot;.avro&quot;)\n                    .withoutSharding()\n                    .withCodec(CodecFactory.snappyCodec())\n                    .withNumShards(1))\n</code></pre>\n<p>I tried to get Schema from <code>GenericRecord</code> to <code>PCollectionView</code> but I don't know how can I use it during writing:</p>\n<pre><code>PCollectionView&lt;Schema&gt; schemaView = parsedData.apply(&quot;Prepare Schema&quot;, Sample.any(1))\n            .apply(&quot;Add schema to memory&quot;,\n                    MapElements.into(TypeDescriptor.of(Schema.class))\n                            .via((GenericRecord record) -&gt; record.getSchema()))\n            .apply(View.asSingleton());\n</code></pre>\n<p>Second thing which I tried was save schema to file and read it before saving <code>Schema schema  =  readSchemaFromGCS()</code>\nand use it but then I have two ways in job so creating file wasn't waiting for saving schema.\nI can't use <code>Wait.on(previousStep)</code> because <code>TextIO.write()</code> output type is <code>PDone</code>.\nAnyone know how to use schema from <code>GenericRecord</code> generated during job in one pipeline?\nCreating to separate pipelines doesn't satisfy me.</p>\n"},{"tags":["java","java-ee-7","payara"],"owner":{"account_id":327501,"reputation":1769,"user_id":649923,"accept_rate":86,"display_name":"Xtroce"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694620302,"creation_date":1694620302,"question_id":77098659,"body_markdown":"I have a main app EJB and a war in a package. The main_app.ejb holds the persistenceContext\r\n\r\nI now have a library that is used in multiple other applications on other webServices (with a similar built up but different persistence configurations on different web servers).\r\n\r\nThis one needs the persitenceContext to function. We previously had each class in the lib extended in the main EJB with the manager as a member. This works but you have a lot of manual handling since each class needs to be extended.\r\n\r\nTo understand my problem let me scetch teh following dynamic:\r\n\r\n    app.ear\r\n     \\ lib/dependecy.jar (needs persistence context)\r\n     \\ main_app.ejb (has persistence context | needs dependency.jar)\r\n     \\ main_app.war\r\n     \\ module.ejb\r\n     \\ module.war\r\n\r\n\r\nFirst approach:\r\n\r\nThe idea now is to include the library as it&#39;s own EJB and load it alongside the other EJB&#39;s and WAR&#39;s in the ear. The problem we face now is, since the main EJB is dependent on the lib, it seems to cannot find the EntityManager.\r\n\r\nTo understand my problem let me scetch teh following dynamic:\r\n\r\n    app.ear\r\n     \\ dependecy.ejb (I transformed that into an ejb and loaded it alongside the others)\r\n     \\ main_app.ejb (needs dependency.ejb)\r\n     \\ main_app.war\r\n     \\ persistence.ejb (extracted from the main_app.ejb w the META-INF/persistence.xml and a class implementing an interface for the EntityManager)\r\n     \\ module.ejb\r\n     \\ module.war\r\n\r\n\r\nMy first approach to solve this was to abstract the persistence into it&#39;s own EJB and then load that before the actual EJB which has the lib as a dependency. But this also does not seem to work.\r\n\r\nI suspect the problem is that the dependency.ejb has no dependency from the persistence.ejb (and I cannot create one in the maven config, since i need this to work with the other servers as well, and they have different configurations.)\r\n\r\ne.g. the dependency structure is:\r\n\r\n                   main_app.ejb\r\n                   /         \\ \r\n    dependency.ejb            peristence.ejb\r\n\r\nbut persistence needs to be loaded before dependeny without me adding it to the actual dependencies.\r\n\r\nbtw I am using payara 5 atm.\r\n\r\nis that possible?","title":"loading an EJB in lib after the EJB in the ear on payara","body":"<p>I have a main app EJB and a war in a package. The main_app.ejb holds the persistenceContext</p>\n<p>I now have a library that is used in multiple other applications on other webServices (with a similar built up but different persistence configurations on different web servers).</p>\n<p>This one needs the persitenceContext to function. We previously had each class in the lib extended in the main EJB with the manager as a member. This works but you have a lot of manual handling since each class needs to be extended.</p>\n<p>To understand my problem let me scetch teh following dynamic:</p>\n<pre><code>app.ear\n \\ lib/dependecy.jar (needs persistence context)\n \\ main_app.ejb (has persistence context | needs dependency.jar)\n \\ main_app.war\n \\ module.ejb\n \\ module.war\n</code></pre>\n<p>First approach:</p>\n<p>The idea now is to include the library as it's own EJB and load it alongside the other EJB's and WAR's in the ear. The problem we face now is, since the main EJB is dependent on the lib, it seems to cannot find the EntityManager.</p>\n<p>To understand my problem let me scetch teh following dynamic:</p>\n<pre><code>app.ear\n \\ dependecy.ejb (I transformed that into an ejb and loaded it alongside the others)\n \\ main_app.ejb (needs dependency.ejb)\n \\ main_app.war\n \\ persistence.ejb (extracted from the main_app.ejb w the META-INF/persistence.xml and a class implementing an interface for the EntityManager)\n \\ module.ejb\n \\ module.war\n</code></pre>\n<p>My first approach to solve this was to abstract the persistence into it's own EJB and then load that before the actual EJB which has the lib as a dependency. But this also does not seem to work.</p>\n<p>I suspect the problem is that the dependency.ejb has no dependency from the persistence.ejb (and I cannot create one in the maven config, since i need this to work with the other servers as well, and they have different configurations.)</p>\n<p>e.g. the dependency structure is:</p>\n<pre><code>               main_app.ejb\n               /         \\ \ndependency.ejb            peristence.ejb\n</code></pre>\n<p>but persistence needs to be loaded before dependeny without me adding it to the actual dependencies.</p>\n<p>btw I am using payara 5 atm.</p>\n<p>is that possible?</p>\n"},{"tags":["java","spring","performance","file","null"],"comments":[{"owner":{"account_id":187094,"reputation":5113,"user_id":424903,"display_name":"Gimby"},"score":1,"creation_date":1694620230,"post_id":77098596,"comment_id":135916079,"body_markdown":"There is no real performant way as the size of the file will determine processing speed. If a file is going to be 20 gigs, it&#39;s going to be slow no matter what. Unless you can take a shortcut, like check say at most the first 200 bytes.","body":"There is no real performant way as the size of the file will determine processing speed. If a file is going to be 20 gigs, it&#39;s going to be slow no matter what. Unless you can take a shortcut, like check say at most the first 200 bytes."},{"owner":{"account_id":2229513,"reputation":5172,"user_id":1967484,"display_name":"Deadron"},"score":1,"creation_date":1694620378,"post_id":77098596,"comment_id":135916099,"body_markdown":"Its unlikely that an unexpected shutdown results in a file being filled with null characters on accident.  If the file was full of null characters that means something had to explicitly write them into the file.  Either way its a really bad idea to have two applications that can read write the same file. If you want concurrent writes to a file you need something like sqlite that can manage the access.  The failure cases are dependent on the file system but mostly result in access issues and or intermixed writes.","body":"Its unlikely that an unexpected shutdown results in a file being filled with null characters on accident.  If the file was full of null characters that means something had to explicitly write them into the file.  Either way its a really bad idea to have two applications that can read write the same file. If you want concurrent writes to a file you need something like sqlite that can manage the access.  The failure cases are dependent on the file system but mostly result in access issues and or intermixed writes."},{"owner":{"account_id":15030475,"reputation":21,"user_id":10848756,"display_name":"SymbolKina"},"score":0,"creation_date":1694682818,"post_id":77098596,"comment_id":135924286,"body_markdown":"Thank you all for you replies. @Gimby you gave me a great idea to check only a first part of the file.","body":"Thank you all for you replies. @Gimby you gave me a great idea to check only a first part of the file."},{"owner":{"account_id":15030475,"reputation":21,"user_id":10848756,"display_name":"SymbolKina"},"score":0,"creation_date":1694683073,"post_id":77098596,"comment_id":135924333,"body_markdown":"@Deadron i can&#39;t understand why after shutdown the file content is replaced by NULL characters, i debuggued all possible cases without any result. you are right writing on the same file by differents application is a bad idea but it is how the service is developped.","body":"@Deadron i can&#39;t understand why after shutdown the file content is replaced by NULL characters, i debuggued all possible cases without any result. you are right writing on the same file by differents application is a bad idea but it is how the service is developped."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1695371280,"post_id":77098596,"comment_id":136018190,"body_markdown":"By “null characters” you mean zero bytes? Maybe, they are not written over the content but the intended content hadn’t been written in the first place but was residing in a cache.","body":"By “null characters” you mean zero bytes? Maybe, they are not written over the content but the intended content hadn’t been written in the first place but was residing in a cache."}],"answers":[{"comments":[{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":2,"creation_date":1694620377,"post_id":77098640,"comment_id":135916098,"body_markdown":"This code is needlessly complicated. The point of `BufferedInputStream` is that you can call `read()` (as in, the no-args one that returns a single byte) efficiently. You&#39;re double-buffering: You&#39;ve wrapped it in a BIS __and__ you using a `byte[] buffer = new byte[1024];`. You only need one of those.  Fix that, plus the minor nit of teaching bad habits, and this downvote can be turned into an upvote.","body":"This code is needlessly complicated. The point of <code>BufferedInputStream</code> is that you can call <code>read()</code> (as in, the no-args one that returns a single byte) efficiently. You&#39;re double-buffering: You&#39;ve wrapped it in a BIS <b>and</b> you using a <code>byte[] buffer = new byte[1024];</code>. You only need one of those.  Fix that, plus the minor nit of teaching bad habits, and this downvote can be turned into an upvote."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":1,"creation_date":1694620414,"post_id":77098640,"comment_id":135916104,"body_markdown":"The bad habit is `e.printStackTrace();`. That is __toxically__ bad, it needs to be stamped out. The simple fix here is that `main` can, and almost always should, be declared as `throws Exception`. Do that here too. Less code, better code, easier debugging. win-win-win.","body":"The bad habit is <code>e.printStackTrace();</code>. That is <b>toxically</b> bad, it needs to be stamped out. The simple fix here is that <code>main</code> can, and almost always should, be declared as <code>throws Exception</code>. Do that here too. Less code, better code, easier debugging. win-win-win."},{"owner":{"account_id":15030475,"reputation":21,"user_id":10848756,"display_name":"SymbolKina"},"score":0,"creation_date":1694686758,"post_id":77098640,"comment_id":135925176,"body_markdown":"Thank you, i will try this solution then let you know","body":"Thank you, i will try this solution then let you know"}],"tags":[],"owner":{"account_id":4561774,"reputation":1,"user_id":3703919,"display_name":"Leonidas Sokoridas"},"comment_count":3,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1694620174,"creation_date":1694620174,"answer_id":77098640,"question_id":77098596,"body_markdown":"To perform a check in Java if a file contains only null characters, you can read the file in chunks of bytes and verify if all the bytes in each chunk are zero. Here is how you might go about it using a `BufferedInputStream`:\n\n```java\nimport java.io.BufferedInputStream;\nimport java.io.FileInputStream;\nimport java.io.IOException;\n\npublic class Main {\n    public static void main(String[] args) {\n        try {\n            System.out.println(isFileNull(&quot;path/to/your/file.txt&quot;));\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    public static boolean isFileNull(String filepath) throws IOException {\n        try (BufferedInputStream bis = new BufferedInputStream(new FileInputStream(filepath))) {\n            byte[] buffer = new byte[1024];\n            int bytesRead;\n            while ((bytesRead = bis.read(buffer)) != -1) {\n                for (int i = 0; i &lt; bytesRead; i++) {\n                    if (buffer[i] != 0) {\n                        return false;\n                    }\n                }\n            }\n        }\n        return true;\n    }\n}\n```\n\nExplanation:\n\n- We use `BufferedInputStream` to read the file in chunks.\n- Inside the `isFileNull` method, we read chunks of the file into a byte array buffer using the `read` method, which returns the number of bytes read or -1 if the end of the stream is reached.\n- We then iterate over each byte in the buffer and check if any of them are non-zero using a simple comparison (`buffer[i] != 0`). If we find any non-zero bytes, we return `false` immediately.\n- If we reach the end of the file without finding any non-zero bytes, we return `true`.\n- Note that we are using a try-with-resources statement to ensure that the `BufferedInputStream` is closed properly, even if an exception is thrown.","title":"Java-best way to check if file contains only null characters","body":"<p>To perform a check in Java if a file contains only null characters, you can read the file in chunks of bytes and verify if all the bytes in each chunk are zero. Here is how you might go about it using a <code>BufferedInputStream</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.BufferedInputStream;\nimport java.io.FileInputStream;\nimport java.io.IOException;\n\npublic class Main {\n    public static void main(String[] args) {\n        try {\n            System.out.println(isFileNull(&quot;path/to/your/file.txt&quot;));\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    public static boolean isFileNull(String filepath) throws IOException {\n        try (BufferedInputStream bis = new BufferedInputStream(new FileInputStream(filepath))) {\n            byte[] buffer = new byte[1024];\n            int bytesRead;\n            while ((bytesRead = bis.read(buffer)) != -1) {\n                for (int i = 0; i &lt; bytesRead; i++) {\n                    if (buffer[i] != 0) {\n                        return false;\n                    }\n                }\n            }\n        }\n        return true;\n    }\n}\n</code></pre>\n<p>Explanation:</p>\n<ul>\n<li>We use <code>BufferedInputStream</code> to read the file in chunks.</li>\n<li>Inside the <code>isFileNull</code> method, we read chunks of the file into a byte array buffer using the <code>read</code> method, which returns the number of bytes read or -1 if the end of the stream is reached.</li>\n<li>We then iterate over each byte in the buffer and check if any of them are non-zero using a simple comparison (<code>buffer[i] != 0</code>). If we find any non-zero bytes, we return <code>false</code> immediately.</li>\n<li>If we reach the end of the file without finding any non-zero bytes, we return <code>true</code>.</li>\n<li>Note that we are using a try-with-resources statement to ensure that the <code>BufferedInputStream</code> is closed properly, even if an exception is thrown.</li>\n</ul>\n"}],"owner":{"account_id":15030475,"reputation":21,"user_id":10848756,"display_name":"SymbolKina"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694620174,"creation_date":1694619840,"question_id":77098596,"body_markdown":"I&#39;m facing a problem and i can&#39;t fix it. \r\nI have a file that is accessible from 2 applications for read and write. when the Device unexpectadly shuts down, the content of the file keep the same size but each character is replaced by Null Character. \r\nNow I need a way to check the content file if is null or not. what is the best performant way to do it?\r\nthank you ","title":"Java-best way to check if file contains only null characters","body":"<p>I'm facing a problem and i can't fix it.\nI have a file that is accessible from 2 applications for read and write. when the Device unexpectadly shuts down, the content of the file keep the same size but each character is replaced by Null Character.\nNow I need a way to check the content file if is null or not. what is the best performant way to do it?\nthank you</p>\n"},{"tags":["java","x509certificate","bouncycastle","pem","pki"],"comments":[{"owner":{"account_id":19498047,"reputation":23,"user_id":14264766,"display_name":"mister.durden"},"score":0,"creation_date":1694611856,"post_id":77097540,"comment_id":135914052,"body_markdown":"The Algorithm that is being used is SHA256WITHECDSA","body":"The Algorithm that is being used is SHA256WITHECDSA"},{"owner":{"account_id":85671,"reputation":40858,"user_id":238704,"display_name":"President James K. Polk"},"score":0,"creation_date":1694613264,"post_id":77097540,"comment_id":135914443,"body_markdown":"Of course it doesn&#39;t since you only wrote out a single certificate. If you want the other certificates in the chain in the same file then write them out too.","body":"Of course it doesn&#39;t since you only wrote out a single certificate. If you want the other certificates in the chain in the same file then write them out too."},{"owner":{"account_id":19498047,"reputation":23,"user_id":14264766,"display_name":"mister.durden"},"score":0,"creation_date":1694618253,"post_id":77097540,"comment_id":135915672,"body_markdown":"@PresidentJamesK.Polk How should I do that? Should I add a second certificate during the Export using JcaPEMWriter? Any resources I can refer to?","body":"@PresidentJamesK.Polk How should I do that? Should I add a second certificate during the Export using JcaPEMWriter? Any resources I can refer to?"},{"owner":{"account_id":19498047,"reputation":23,"user_id":14264766,"display_name":"mister.durden"},"score":0,"creation_date":1694619782,"post_id":77097540,"comment_id":135915998,"body_markdown":"@PresidentJamesK.Polk I tried to write both certificates by creating a list and writing using JcaPEMWriter over a loop and the exported string had 2 certificates. While opening it in XCA, it only recognized the first one and the Certificate Chain is still not recognizing the root CA which I have already imported separately previously.","body":"@PresidentJamesK.Polk I tried to write both certificates by creating a list and writing using JcaPEMWriter over a loop and the exported string had 2 certificates. While opening it in XCA, it only recognized the first one and the Certificate Chain is still not recognizing the root CA which I have already imported separately previously."}],"owner":{"account_id":19498047,"reputation":23,"user_id":14264766,"display_name":"mister.durden"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694620079,"creation_date":1694611802,"question_id":77097540,"body_markdown":"I have generated an X509 Certificate like this:\r\n\r\n```java\r\npublic static X509Certificate createEndEntity(\r\n    X509Certificate signerCert, PrivateKey signerKey,\r\n    String sigAlg, PublicKey certKey)\r\n  throws CertIOException, OperatorCreationException, CertificateException\r\n{\r\n  X500Principal subject = new X500Principal(&quot;CN=End Entity&quot;);\r\n\r\n \r\n  X509v3CertificateBuilder  certBldr = new JcaX509v3CertificateBuilder(\r\n      signerCert.getSubjectX500Principal(),\r\n      calculateSerialNumber(),\r\n      calculateDate(0),\r\n      calculateDate(24 * 31),\r\n      subject,\r\n      certKey);\r\n\r\n \r\n  certBldr.addExtension(Extension.basicConstraints,\r\n          true, new BasicConstraints(false))\r\n      .addExtension(Extension.keyUsage,\r\n          true, new KeyUsage(KeyUsage.digitalSignature));\r\n\r\n \r\n  ContentSigner signer = new JcaContentSignerBuilder(sigAlg)\r\n                  .setProvider(&quot;BC&quot;).build(signerKey);\r\n\r\n \r\n  JcaX509CertificateConverter converter = new JcaX509CertificateConverter().setProvider(&quot;BC&quot;);\r\n\r\n \r\n  return converter.getCertificate(certBldr.build(signer));\r\n}\r\n\r\n\r\n\r\n```\r\n\r\nAnd exported it to a PEM format like this:\r\n\r\n```\r\nStringWriter sw = new StringWriter();\r\nJcaPEMWriter jpw = new JcaPEMWriter(sw);\r\njpw.writeObject(certificate);\r\njpw.flush();\r\nString pem = sw.toString();\r\n```\r\n\r\nStill, the generated certificate doesn&#39;t include the certificate Chain to the Root Certificate, and the Signer in the Signature is showing as Unknown.\r\n\r\nP.S. : I have already imported Root CA separately in XCA prior to generation. The signer in the Signature is showing as unknown.\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fucCn.png","title":"Not able to get the Certificate Chain while exporting an End Entity X.509 Certificate generated using Bouncy Castle in Java","body":"<p>I have generated an X509 Certificate like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static X509Certificate createEndEntity(\n    X509Certificate signerCert, PrivateKey signerKey,\n    String sigAlg, PublicKey certKey)\n  throws CertIOException, OperatorCreationException, CertificateException\n{\n  X500Principal subject = new X500Principal(&quot;CN=End Entity&quot;);\n\n \n  X509v3CertificateBuilder  certBldr = new JcaX509v3CertificateBuilder(\n      signerCert.getSubjectX500Principal(),\n      calculateSerialNumber(),\n      calculateDate(0),\n      calculateDate(24 * 31),\n      subject,\n      certKey);\n\n \n  certBldr.addExtension(Extension.basicConstraints,\n          true, new BasicConstraints(false))\n      .addExtension(Extension.keyUsage,\n          true, new KeyUsage(KeyUsage.digitalSignature));\n\n \n  ContentSigner signer = new JcaContentSignerBuilder(sigAlg)\n                  .setProvider(&quot;BC&quot;).build(signerKey);\n\n \n  JcaX509CertificateConverter converter = new JcaX509CertificateConverter().setProvider(&quot;BC&quot;);\n\n \n  return converter.getCertificate(certBldr.build(signer));\n}\n\n\n\n</code></pre>\n<p>And exported it to a PEM format like this:</p>\n<pre><code>StringWriter sw = new StringWriter();\nJcaPEMWriter jpw = new JcaPEMWriter(sw);\njpw.writeObject(certificate);\njpw.flush();\nString pem = sw.toString();\n</code></pre>\n<p>Still, the generated certificate doesn't include the certificate Chain to the Root Certificate, and the Signer in the Signature is showing as Unknown.</p>\n<p>P.S. : I have already imported Root CA separately in XCA prior to generation. The signer in the Signature is showing as unknown.\n<a href=\"https://i.stack.imgur.com/fucCn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fucCn.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","linux","maven","jenkins"],"comments":[{"owner":{"account_id":1260099,"reputation":18217,"user_id":1218618,"accept_rate":100,"display_name":"albciff"},"score":0,"creation_date":1693575317,"post_id":77022635,"comment_id":135783142,"body_markdown":"Did you try config tools or export path as explained in some answers here: https://stackoverflow.com/questions/45777031/maven-not-found-in-jenkins","body":"Did you try config tools or export path as explained in some answers here: <a href=\"https://stackoverflow.com/questions/45777031/maven-not-found-in-jenkins\" title=\"maven not found in jenkins\">stackoverflow.com/questions/45777031/maven-not-found-in-jenk&zwnj;&#8203;ins</a>"},{"owner":{"account_id":14168015,"reputation":45,"user_id":10235443,"display_name":"Guillermo Moreno Casta&#241;o"},"score":0,"creation_date":1693590259,"post_id":77022635,"comment_id":135785990,"body_markdown":"I couldn&#39;t make it work using any of these. I think the problem is that Jenkins is not loading ~/.bashrc which contains the correct values for everything. I get it doesn&#39;t load it cause it&#39;s not an interactive shell, but I&#39;m not sure how to make something similar :D","body":"I couldn&#39;t make it work using any of these. I think the problem is that Jenkins is not loading ~/.bashrc which contains the correct values for everything. I get it doesn&#39;t load it cause it&#39;s not an interactive shell, but I&#39;m not sure how to make something similar :D"},{"owner":{"account_id":14168015,"reputation":45,"user_id":10235443,"display_name":"Guillermo Moreno Casta&#241;o"},"score":0,"creation_date":1693591170,"post_id":77022635,"comment_id":135786110,"body_markdown":"If I run `alias mvn=/opt/apache-maven-3.9.4/bin/mvn` on top of my Jenkins script, it does work, but I don&#39;t think this is an ideal solution","body":"If I run <code>alias mvn=&#47;opt&#47;apache-maven-3.9.4&#47;bin&#47;mvn</code> on top of my Jenkins script, it does work, but I don&#39;t think this is an ideal solution"}],"answers":[{"tags":[],"owner":{"account_id":12073555,"reputation":379,"user_id":8828021,"display_name":"George"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693719945,"creation_date":1693719945,"answer_id":77031059,"question_id":77022635,"body_markdown":"The best course of action is to consistently define both the JDK and maven in the &quot;tools&quot; section of your Jenkinsfile and define both tools in your Jenkins configuration to have Jenkins automatically download the necessary commands. \r\n\r\nI have a golden rule that you should never explicitly install build packages on the Jenkins Master/Workers in order to be able to transition to other platforms in the future (I&#39;m not suggesting this is good or best industry practice).","title":"Jenkins can&#39;t find Maven after updating to Java 17","body":"<p>The best course of action is to consistently define both the JDK and maven in the &quot;tools&quot; section of your Jenkinsfile and define both tools in your Jenkins configuration to have Jenkins automatically download the necessary commands.</p>\n<p>I have a golden rule that you should never explicitly install build packages on the Jenkins Master/Workers in order to be able to transition to other platforms in the future (I'm not suggesting this is good or best industry practice).</p>\n"},{"tags":[],"owner":{"account_id":14168015,"reputation":45,"user_id":10235443,"display_name":"Guillermo Moreno Casta&#241;o"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694619306,"creation_date":1694619306,"answer_id":77098542,"question_id":77022635,"body_markdown":"I ended up setting the PATH as a Jenkins environment variable from the settings with the same value as *outside* of Jenkins. I&#39;m not sure this is a proper way to do it or an industry standard but it was the only way I could make it work.","title":"Jenkins can&#39;t find Maven after updating to Java 17","body":"<p>I ended up setting the PATH as a Jenkins environment variable from the settings with the same value as <em>outside</em> of Jenkins. I'm not sure this is a proper way to do it or an industry standard but it was the only way I could make it work.</p>\n"}],"owner":{"account_id":14168015,"reputation":45,"user_id":10235443,"display_name":"Guillermo Moreno Casta&#241;o"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":238,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1694619306,"creation_date":1693566758,"question_id":77022635,"body_markdown":"I have a Raspberry Pi that I&#39;m running Jenkins on to compile and deploy Java applications. We have migrated to Spring 3 so now it requires Java 17 to run. For some reason, it&#39;s not possible to install Java 17 using apt-get, so I uninstalled all of the previous Java versions and installed it directly from the tar file as it&#39;s documented resulting in:\r\n\r\n```bash\r\npi@raspberrypi:~ $ echo $JAVA_HOME\r\n/opt/jdk/jdk-17.0.1+12\r\n\r\npi@raspberrypi:~ $ java -version\r\nopenjdk version &quot;17.0.1&quot; 2021-10-19\r\nOpenJDK Runtime Environment Temurin-17.0.1+12 (build 17.0.1+12)\r\nOpenJDK Server VM Temurin-17.0.1+12 (build 17.0.1+12, mixed mode, sharing)\r\n```\r\n\r\nI have proceeded the same way for maven:\r\n```bash\r\npi@raspberrypi:~ $ echo $MAVEN_HOME\r\n/opt/maven\r\n\r\npi@raspberrypi:~ $ echo $M2_HOME\r\n/opt/apache-maven-3.9.4\r\n\r\npi@raspberrypi:~ $ mvn -version\r\nApache Maven 3.9.4 (dfbb324ad4a7c8fb0bf182e6d91b0ae20e3d2dd9)\r\nMaven home: /opt/maven\r\nJava version: 17.0.1, vendor: Eclipse Adoptium, runtime: /opt/jdk/jdk-17.0.1+12\r\nDefault locale: en_GB, platform encoding: UTF-8\r\nOS name: &quot;linux&quot;, version: &quot;5.10.103-v7l+&quot;, arch: &quot;arm&quot;, family: &quot;unix&quot;\r\n```\r\nSo I believe both are properly installed for user **pi**, but not installing it in an *official* way doesn&#39;t set up everything automatically.\r\n\r\nI have set up a Jenkins job to print all of these for debugging purposes:\r\n```bash\r\necho $JAVA_HOME\r\necho $M2_HOME\r\necho $MAVEN_HOME\r\njava -version\r\njavac -version\r\nmvn -v\r\n```\r\nwhich prints to console the following:\r\n```bash\r\nStarted by user Master Gui\r\nRunning as SYSTEM\r\nBuilding in workspace /var/lib/jenkins/workspace/echo\r\n[echo] $ /bin/sh -xe /tmp/jenkins3152995503405589329.sh\r\n+ echo /usr/lib/jvm/default-java\r\n/usr/lib/jvm/default-java\r\n+ echo\r\n\r\n+ echo\r\n\r\n+ java -version\r\nopenjdk version &quot;17.0.1&quot; 2021-10-19\r\nOpenJDK Runtime Environment Temurin-17.0.1+12 (build 17.0.1+12)\r\nOpenJDK Server VM Temurin-17.0.1+12 (build 17.0.1+12, mixed mode, sharing)\r\n+ javac -version\r\njavac 17.0.1\r\n+ mvn -v\r\n/tmp/jenkins3152995503405589329.sh: 7: /tmp/jenkins3152995503405589329.sh: mvn: not found\r\nBuild step &#39;Execute shell&#39; marked build as failure\r\nFinished: FAILURE\r\n```\r\n\r\nJava seems to be working, Maven doesn&#39;t, and all of the env variables are wrong. Does anybody know what I&#39;m missing here?\r\n\r\nThank you!","title":"Jenkins can&#39;t find Maven after updating to Java 17","body":"<p>I have a Raspberry Pi that I'm running Jenkins on to compile and deploy Java applications. We have migrated to Spring 3 so now it requires Java 17 to run. For some reason, it's not possible to install Java 17 using apt-get, so I uninstalled all of the previous Java versions and installed it directly from the tar file as it's documented resulting in:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>pi@raspberrypi:~ $ echo $JAVA_HOME\n/opt/jdk/jdk-17.0.1+12\n\npi@raspberrypi:~ $ java -version\nopenjdk version &quot;17.0.1&quot; 2021-10-19\nOpenJDK Runtime Environment Temurin-17.0.1+12 (build 17.0.1+12)\nOpenJDK Server VM Temurin-17.0.1+12 (build 17.0.1+12, mixed mode, sharing)\n</code></pre>\n<p>I have proceeded the same way for maven:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>pi@raspberrypi:~ $ echo $MAVEN_HOME\n/opt/maven\n\npi@raspberrypi:~ $ echo $M2_HOME\n/opt/apache-maven-3.9.4\n\npi@raspberrypi:~ $ mvn -version\nApache Maven 3.9.4 (dfbb324ad4a7c8fb0bf182e6d91b0ae20e3d2dd9)\nMaven home: /opt/maven\nJava version: 17.0.1, vendor: Eclipse Adoptium, runtime: /opt/jdk/jdk-17.0.1+12\nDefault locale: en_GB, platform encoding: UTF-8\nOS name: &quot;linux&quot;, version: &quot;5.10.103-v7l+&quot;, arch: &quot;arm&quot;, family: &quot;unix&quot;\n</code></pre>\n<p>So I believe both are properly installed for user <strong>pi</strong>, but not installing it in an <em>official</em> way doesn't set up everything automatically.</p>\n<p>I have set up a Jenkins job to print all of these for debugging purposes:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>echo $JAVA_HOME\necho $M2_HOME\necho $MAVEN_HOME\njava -version\njavac -version\nmvn -v\n</code></pre>\n<p>which prints to console the following:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>Started by user Master Gui\nRunning as SYSTEM\nBuilding in workspace /var/lib/jenkins/workspace/echo\n[echo] $ /bin/sh -xe /tmp/jenkins3152995503405589329.sh\n+ echo /usr/lib/jvm/default-java\n/usr/lib/jvm/default-java\n+ echo\n\n+ echo\n\n+ java -version\nopenjdk version &quot;17.0.1&quot; 2021-10-19\nOpenJDK Runtime Environment Temurin-17.0.1+12 (build 17.0.1+12)\nOpenJDK Server VM Temurin-17.0.1+12 (build 17.0.1+12, mixed mode, sharing)\n+ javac -version\njavac 17.0.1\n+ mvn -v\n/tmp/jenkins3152995503405589329.sh: 7: /tmp/jenkins3152995503405589329.sh: mvn: not found\nBuild step 'Execute shell' marked build as failure\nFinished: FAILURE\n</code></pre>\n<p>Java seems to be working, Maven doesn't, and all of the env variables are wrong. Does anybody know what I'm missing here?</p>\n<p>Thank you!</p>\n"},{"tags":["java","enums","compilation","findbugs"],"comments":[{"owner":{"account_id":95910,"reputation":238649,"user_id":260990,"accept_rate":81,"display_name":"jmj"},"score":0,"creation_date":1287773433,"post_id":3999942,"comment_id":4284032,"body_markdown":"add comment near enum declaration:-)","body":"add comment near enum declaration:-)"},{"owner":{"account_id":83469,"reputation":9224,"user_id":234009,"display_name":"robert_x44"},"score":2,"creation_date":1287773439,"post_id":3999942,"comment_id":4284034,"body_markdown":"+1 for adding FILENOTFOUND to an unrelated set of enum constants","body":"+1 for adding FILENOTFOUND to an unrelated set of enum constants"},{"owner":{"account_id":80775,"reputation":80366,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"score":0,"creation_date":1287774420,"post_id":3999942,"comment_id":4284221,"body_markdown":"+0 for adding FILENOTFOUND to an unrelated set of enum constants.  Why do people still find this funny?  (I don&#39;t mind the OP or anybody using it in an ad-hoc example, but honestly people still think this is funny and upvote accordingly, even after seeing this reference like 8000 times?)","body":"+0 for adding FILENOTFOUND to an unrelated set of enum constants.  Why do people still find this funny?  (I don&#39;t mind the OP or anybody using it in an ad-hoc example, but honestly people still think this is funny and upvote accordingly, even after seeing this reference like 8000 times?)"},{"owner":{"account_id":80775,"reputation":80366,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"score":0,"creation_date":1287774452,"post_id":3999942,"comment_id":4284224,"body_markdown":"BTW, +1 for it being a good question.","body":"BTW, +1 for it being a good question."},{"owner":{"account_id":83469,"reputation":9224,"user_id":234009,"display_name":"robert_x44"},"score":0,"creation_date":1287774650,"post_id":3999942,"comment_id":4284258,"body_markdown":"my + 1 was also for being a good question.  Calm down and breathe.","body":"my + 1 was also for being a good question.  Calm down and breathe."},{"owner":{"account_id":80775,"reputation":80366,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"score":0,"creation_date":1287774921,"post_id":3999942,"comment_id":4284306,"body_markdown":"I&#39;m calm.  I&#39;m just losing faith in our collective sense of humour.","body":"I&#39;m calm.  I&#39;m just losing faith in our collective sense of humour."},{"owner":{"account_id":88014,"reputation":60053,"user_id":1178669,"accept_rate":93,"display_name":"helpermethod"},"score":0,"creation_date":1287775991,"post_id":3999942,"comment_id":4284516,"body_markdown":"This actually looks like using Polymorphism would be a better idea.","body":"This actually looks like using Polymorphism would be a better idea."},{"owner":{"account_id":332245,"reputation":16487,"user_id":657427,"accept_rate":67,"display_name":"Christophe Roussy"},"score":0,"creation_date":1446634800,"post_id":3999942,"comment_id":54821551,"body_markdown":"Potential duplicate: http://stackoverflow.com/questions/16797529/how-to-ensure-completeness-in-an-enum-switch-at-compile-time","body":"Potential duplicate: <a href=\"http://stackoverflow.com/questions/16797529/how-to-ensure-completeness-in-an-enum-switch-at-compile-time\" title=\"how to ensure completeness in an enum switch at compile time\">stackoverflow.com/questions/16797529/&hellip;</a>"},{"owner":{"account_id":35821,"reputation":15653,"user_id":101762,"accept_rate":87,"display_name":"Persimmonium"},"score":0,"creation_date":1446715228,"post_id":3999942,"comment_id":54861922,"body_markdown":"the duplicate is probably the one asked 3 years later, don&#39;t you think?","body":"the duplicate is probably the one asked 3 years later, don&#39;t you think?"},{"owner":{"account_id":892671,"reputation":17469,"user_id":930640,"accept_rate":62,"display_name":"Magnus"},"score":0,"creation_date":1523426232,"post_id":3999942,"comment_id":86550243,"body_markdown":"Possible duplicate of [How to ensure completeness in an enum switch at compile time?](https://stackoverflow.com/questions/16797529/how-to-ensure-completeness-in-an-enum-switch-at-compile-time)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/16797529/how-to-ensure-completeness-in-an-enum-switch-at-compile-time\">How to ensure completeness in an enum switch at compile time?</a>"}],"answers":[{"comments":[{"owner":{"account_id":62440,"reputation":23185,"user_id":185541,"display_name":"rsp"},"score":0,"creation_date":1287773694,"post_id":3999990,"comment_id":4284089,"body_markdown":"That&#39;s a nice feature but it won&#39;t help on existing switches on the enum you are adding a new value to.","body":"That&#39;s a nice feature but it won&#39;t help on existing switches on the enum you are adding a new value to."},{"owner":{"account_id":80775,"reputation":80366,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"score":0,"creation_date":1287773864,"post_id":3999990,"comment_id":4284119,"body_markdown":"@rsp: Yes it does.  If you go back and edit the enum, adding a new value, it will generate warnings/errors over all switch statements that use that enum.","body":"@rsp: Yes it does.  If you go back and edit the enum, adding a new value, it will generate warnings/errors over all switch statements that use that enum."},{"owner":{"account_id":80775,"reputation":80366,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"score":1,"creation_date":1287774030,"post_id":3999990,"comment_id":4284145,"body_markdown":"It does surprise me that Eclipse would have this while Findbugs doesn&#39;t.","body":"It does surprise me that Eclipse would have this while Findbugs doesn&#39;t."},{"owner":{"account_id":62440,"reputation":23185,"user_id":185541,"display_name":"rsp"},"score":0,"creation_date":1287774110,"post_id":3999990,"comment_id":4284158,"body_markdown":"@Mark Peters, yes, for code in the same project, how about code in projects using your enum from a library.jar?","body":"@Mark Peters, yes, for code in the same project, how about code in projects using your enum from a library.jar?"},{"owner":{"account_id":80775,"reputation":80366,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"score":1,"creation_date":1287774268,"post_id":3999990,"comment_id":4284192,"body_markdown":"@rsp: What about them?  If they&#39;re compiled through eclipse, this will catch them.  If they&#39;re not under your control, obviously you can&#39;t catch those errors but then neither will anything else.  E.g. if it&#39;s a distributed library jar, do you expect to see error messages from all 800,000 clients that use your jar?  Obviously you need control of your jar to find it.  He asked for a compile error, **which implies he&#39;s compiling it**.","body":"@rsp: What about them?  If they&#39;re compiled through eclipse, this will catch them.  If they&#39;re not under your control, obviously you can&#39;t catch those errors but then neither will anything else.  E.g. if it&#39;s a distributed library jar, do you expect to see error messages from all 800,000 clients that use your jar?  Obviously you need control of your jar to find it.  He asked for a compile error, <b>which implies he&#39;s compiling it</b>."},{"owner":{"account_id":62440,"reputation":23185,"user_id":185541,"display_name":"rsp"},"score":1,"creation_date":1287774918,"post_id":3999990,"comment_id":4284305,"body_markdown":"@Mark Peters, my point is that an IDE feature does not make the cient code containing switches on enums robust against changes unless they are recompiled against the new version. It does help when the client code logs unhandled cases.","body":"@Mark Peters, my point is that an IDE feature does not make the cient code containing switches on enums robust against changes unless they are recompiled against the new version. It does help when the client code logs unhandled cases."},{"owner":{"account_id":80775,"reputation":80366,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"score":2,"creation_date":1287775025,"post_id":3999990,"comment_id":4284326,"body_markdown":"@rsp: Sure, but that&#39;s not what the OP asked for.  He asked for a compile-time error which obviously implies he&#39;s going to be recompiling the client code.","body":"@rsp: Sure, but that&#39;s not what the OP asked for.  He asked for a compile-time error which obviously implies he&#39;s going to be recompiling the client code."},{"owner":{"account_id":62440,"reputation":23185,"user_id":185541,"display_name":"rsp"},"score":1,"creation_date":1287775265,"post_id":3999990,"comment_id":4284378,"body_markdown":"I like to think we are also here to help people create better code, even if the advice is not what they asked for exactly.","body":"I like to think we are also here to help people create better code, even if the advice is not what they asked for exactly."}],"tags":[],"owner":{"account_id":80775,"reputation":80366,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"comment_count":8,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1287774741,"creation_date":1287773579,"answer_id":3999990,"question_id":3999942,"body_markdown":"Eclipse has a compile-time warning/error you can enable: **Enum constant not covered on &quot;switch&quot;.**\r\n\r\nFrom your Project properties (or general preferences), go to *Java Compiler*-&gt;*Errors/Warnings* , check *Enable project specific settings*.  You&#39;ll find the warning under *Potential programming problems*.  It&#39;s set to **Ignore** by default but you can bump it up to **Warning** or **Error**.\r\n\r\n\r\n**Edit:** I thought this goes without saying but I suppose I&#39;ll say it anyway: this is only applicable if you&#39;re developing in Eclipse or using it for your build management.  Obviously a Findbugs or similar equivalent would be the &quot;real&quot; answer since it transcends the IDE and can be integrated into the build process.","title":"How to detect a new value was added to an enum and is not handled in a switch","body":"<p>Eclipse has a compile-time warning/error you can enable: <strong>Enum constant not covered on \"switch\".</strong></p>\n\n<p>From your Project properties (or general preferences), go to <em>Java Compiler</em>-><em>Errors/Warnings</em> , check <em>Enable project specific settings</em>.  You'll find the warning under <em>Potential programming problems</em>.  It's set to <strong>Ignore</strong> by default but you can bump it up to <strong>Warning</strong> or <strong>Error</strong>.</p>\n\n<p><strong>Edit:</strong> I thought this goes without saying but I suppose I'll say it anyway: this is only applicable if you're developing in Eclipse or using it for your build management.  Obviously a Findbugs or similar equivalent would be the \"real\" answer since it transcends the IDE and can be integrated into the build process.</p>\n"},{"comments":[{"owner":{"account_id":64324,"reputation":76490,"user_id":189950,"accept_rate":79,"display_name":"Kirk Woll"},"score":2,"creation_date":1287773660,"post_id":3999991,"comment_id":4284082,"body_markdown":"this is a compile-time check as the OP requested?","body":"this is a compile-time check as the OP requested?"},{"owner":{"account_id":80775,"reputation":80366,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"score":0,"creation_date":1287774051,"post_id":3999991,"comment_id":4284147,"body_markdown":"Not compile-time so limited in use and unapplicable to the question.  Edit: removed d/v, this is still useful so I can&#39;t call it &quot;wrong&quot;.","body":"Not compile-time so limited in use and unapplicable to the question.  Edit: removed d/v, this is still useful so I can&#39;t call it &quot;wrong&quot;."},{"owner":{"account_id":62440,"reputation":23185,"user_id":185541,"display_name":"rsp"},"score":1,"creation_date":1287774379,"post_id":3999991,"comment_id":4284214,"body_markdown":"@Kirk Woll, no it isn&#39;t. Using this pattern makes your code more robust against changes to used classes/enums even if you don&#39;t recompile the code containing the switch. As I see it is is a better alternative to make sure you don&#39;t miss this kind of situation even if your IDE does support this type of check.","body":"@Kirk Woll, no it isn&#39;t. Using this pattern makes your code more robust against changes to used classes/enums even if you don&#39;t recompile the code containing the switch. As I see it is is a better alternative to make sure you don&#39;t miss this kind of situation even if your IDE does support this type of check."},{"owner":{"account_id":80775,"reputation":80366,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"score":1,"creation_date":1287774524,"post_id":3999991,"comment_id":4284234,"body_markdown":"If runtime is the route this might be a good candidate for an assert or similar; something that can be removed when building production code.","body":"If runtime is the route this might be a good candidate for an assert or similar; something that can be removed when building production code."},{"owner":{"account_id":62440,"reputation":23185,"user_id":185541,"display_name":"rsp"},"score":1,"creation_date":1287775700,"post_id":3999991,"comment_id":4284462,"body_markdown":"@Mark, part of my point is that checks like these should be present in production code, not just during the development / test / acceptance phases.","body":"@Mark, part of my point is that checks like these should be present in production code, not just during the development / test / acceptance phases."}],"tags":[],"owner":{"account_id":62440,"reputation":23185,"user_id":185541,"display_name":"rsp"},"comment_count":5,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1287775621,"creation_date":1287773580,"answer_id":3999991,"question_id":3999942,"body_markdown":"You could do that by adding a default clause and logging when it is visited:\r\n\r\n    switch (color) {\r\n    default:\r\n        log.error(&quot;Unknown color in switch: &quot; + color);\r\n        break\r\n\r\n    case MONDAY: /*FALLTHROUGH*/\r\n    case TUESDAY: \r\n\r\n(adding fallthrough comments help later maintainers to decide whether you forgot code or not :-))\r\n\r\n**Edit** Clarification copied from comments on Mark&#39;s answer:\r\n\r\nAn IDE feature signalling cases like this is fine for the developer at the moment of the change but it does not catch changes in other parts of code that your code depends on.\r\n\r\nIt does not make the cient code containing switches on enums robust against changes unless they are recompiled against the new version. \r\n\r\nIt does help when the client code logs unhandled cases; deployed code does not always have full control over its classpath or the versions of libraries on it.","title":"How to detect a new value was added to an enum and is not handled in a switch","body":"<p>You could do that by adding a default clause and logging when it is visited:</p>\n\n<pre><code>switch (color) {\ndefault:\n    log.error(\"Unknown color in switch: \" + color);\n    break\n\ncase MONDAY: /*FALLTHROUGH*/\ncase TUESDAY: \n</code></pre>\n\n<p>(adding fallthrough comments help later maintainers to decide whether you forgot code or not :-))</p>\n\n<p><strong>Edit</strong> Clarification copied from comments on Mark's answer:</p>\n\n<p>An IDE feature signalling cases like this is fine for the developer at the moment of the change but it does not catch changes in other parts of code that your code depends on.</p>\n\n<p>It does not make the cient code containing switches on enums robust against changes unless they are recompiled against the new version. </p>\n\n<p>It does help when the client code logs unhandled cases; deployed code does not always have full control over its classpath or the versions of libraries on it.</p>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1287779983,"creation_date":1287779983,"answer_id":4000774,"question_id":3999942,"body_markdown":"IntelliJ was a check where not all case have been set. It has an auto-fix to fill in the missing cases.","title":"How to detect a new value was added to an enum and is not handled in a switch","body":"<p>IntelliJ was a check where not all case have been set. It has an auto-fix to fill in the missing cases.</p>\n"},{"tags":[],"owner":{"account_id":2190659,"reputation":2306,"user_id":1937795,"accept_rate":75,"display_name":"Itchy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694619175,"creation_date":1694619175,"answer_id":77098518,"question_id":3999942,"body_markdown":"Since Java 14 (with [JEP 361][1]) there are now **Switch Expressions** which lets you do that. For your example this would then look like that:\r\n\r\n    String feeling = switch (day) {\r\n        case MONDAY =&gt; &quot;Mondays are bad.&quot;;\r\n        case TUESDAY =&gt; &quot;Tuesdays are bad.&quot;;\r\n        case WEDNESDAY =&gt; &quot;Wednesdays are bad.&quot;;\r\n        case THURSDAY =&gt; &quot;Thursdays are bad.&quot;;\r\n        case FRIDAY =&gt; &quot;Fridays are better.&quot;;\r\n        case SATURDAY =&gt; &quot;Weekends are best.&quot;;\r\n        case SUNDAY =&gt; &quot;Weekends are best.&quot;\r\n    }\r\n    System.out.println(feeling);\r\n\r\nIf you add a new enum value `FILENOTFOUND` then you get a compile error: `java: the switch expression does not cover all possible input values`.\r\n\r\n  [1]: https://openjdk.org/jeps/361","title":"How to detect a new value was added to an enum and is not handled in a switch","body":"<p>Since Java 14 (with <a href=\"https://openjdk.org/jeps/361\" rel=\"nofollow noreferrer\">JEP 361</a>) there are now <strong>Switch Expressions</strong> which lets you do that. For your example this would then look like that:</p>\n<pre><code>String feeling = switch (day) {\n    case MONDAY =&gt; &quot;Mondays are bad.&quot;;\n    case TUESDAY =&gt; &quot;Tuesdays are bad.&quot;;\n    case WEDNESDAY =&gt; &quot;Wednesdays are bad.&quot;;\n    case THURSDAY =&gt; &quot;Thursdays are bad.&quot;;\n    case FRIDAY =&gt; &quot;Fridays are better.&quot;;\n    case SATURDAY =&gt; &quot;Weekends are best.&quot;;\n    case SUNDAY =&gt; &quot;Weekends are best.&quot;\n}\nSystem.out.println(feeling);\n</code></pre>\n<p>If you add a new enum value <code>FILENOTFOUND</code> then you get a compile error: <code>java: the switch expression does not cover all possible input values</code>.</p>\n"}],"owner":{"account_id":35821,"reputation":15653,"user_id":101762,"accept_rate":87,"display_name":"Persimmonium"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2396,"favorite_count":0,"down_vote_count":1,"up_vote_count":8,"accepted_answer_id":3999990,"answer_count":4,"score":7,"last_activity_date":1694619175,"creation_date":1287773253,"question_id":3999942,"body_markdown":"From time to time I have to add a new value to a enum type in my project.\r\n\r\n    public enum Day {\r\n      SUNDAY, MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY, SATURDAY, \r\n       FILENOTFOUND //this one is new one\r\n    }\r\n\r\n\r\n \r\nWhat I would like is to have a *compile time error* for every switch I have that is not treating the new value, like this one:\r\n \r\n\r\n    switch (color) {\r\n\t\t\tcase MONDAY: \r\n\t\t\tcase TUESDAY: \r\n\t\t\tcase WEDNESDAY: \r\n\t\t\tcase THURSDAY: \r\n\t\t\t\t\t\tSystem.out.println(&quot;Mondays are bad.&quot;);\r\n\t\t\t\t\t     break;\r\n\t\t\t\t\t\r\n\t\t\tcase FRIDAY: System.out.println(&quot;Fridays are better.&quot;);\r\n\t\t\t\t\t     break;\r\n\t\t\t\t\t     \r\n\t\t\tcase SATURDAY:\r\n\t\t\tcase SUNDAY: System.out.println(&quot;Weekends are best.&quot;);\r\n\t\t\t\t\t     break;\r\n\t\t} \r\n\r\nHaving a default: that throws some exception is not good enough, I would like it to be compile time.\r\n\t\t\r\nI don&#39;t think this is possible but maybe someone has a neat trick...\r\n\r\nI thought Findbugs would have a rule to find those but I only saw this:\r\n[Eq: Covariant equals() method defined for enum (EQ_DONT_DEFINE_EQUALS_FOR_ENUM)][1]\t\t\r\n\r\n\r\n  [1]: http://findbugs.sourceforge.net/bugDescriptions.html#EQ_DONT_DEFINE_EQUALS_FOR_ENUM\r\n\r\n**EDIT:** I&#39;m choosing Mark&#39;s reply, I do use Eclipse and that sounds just like what I needed! I am not an expert in findbugs at all so I might have missed such functionality, though I don&#39;t think so. ","title":"How to detect a new value was added to an enum and is not handled in a switch","body":"<p>From time to time I have to add a new value to a enum type in my project.</p>\n\n<pre><code>public enum Day {\n  SUNDAY, MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY, SATURDAY, \n   FILENOTFOUND //this one is new one\n}\n</code></pre>\n\n<p>What I would like is to have a <em>compile time error</em> for every switch I have that is not treating the new value, like this one:</p>\n\n<pre><code>switch (color) {\n        case MONDAY: \n        case TUESDAY: \n        case WEDNESDAY: \n        case THURSDAY: \n                    System.out.println(\"Mondays are bad.\");\n                     break;\n\n        case FRIDAY: System.out.println(\"Fridays are better.\");\n                     break;\n\n        case SATURDAY:\n        case SUNDAY: System.out.println(\"Weekends are best.\");\n                     break;\n    } \n</code></pre>\n\n<p>Having a default: that throws some exception is not good enough, I would like it to be compile time.</p>\n\n<p>I don't think this is possible but maybe someone has a neat trick...</p>\n\n<p>I thought Findbugs would have a rule to find those but I only saw this:\n<a href=\"http://findbugs.sourceforge.net/bugDescriptions.html#EQ_DONT_DEFINE_EQUALS_FOR_ENUM\" rel=\"noreferrer\">Eq: Covariant equals() method defined for enum (EQ_DONT_DEFINE_EQUALS_FOR_ENUM)</a>        </p>\n\n<p><strong>EDIT:</strong> I'm choosing Mark's reply, I do use Eclipse and that sounds just like what I needed! I am not an expert in findbugs at all so I might have missed such functionality, though I don't think so. </p>\n"},{"tags":["java","mariadb","sqlexception","connector"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1694608673,"post_id":77097128,"comment_id":135913310,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1694609192,"post_id":77097128,"comment_id":135913428,"body_markdown":"[Please never post images of text](https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors/285557#285557). They are not searchable, we cannot copy-paste... Always copy-paste the text and format it properly.\nYou need to add the MariaDB dependency, but you&#39;ve given no details of what type of project you&#39;ve got so it&#39;s hard to day how to do that","body":"<a href=\"https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors/285557#285557\">Please never post images of text</a>. They are not searchable, we cannot copy-paste... Always copy-paste the text and format it properly. You need to add the MariaDB dependency, but you&#39;ve given no details of what type of project you&#39;ve got so it&#39;s hard to day how to do that"}],"answers":[{"comments":[{"owner":{"account_id":26240396,"reputation":1,"user_id":20808338,"display_name":"patrickstart974"},"score":0,"creation_date":1694619501,"post_id":77097447,"comment_id":135915954,"body_markdown":"The driver was loaded properly, however, it was the wrong file. But thank you very much for this command, it&#39;s very useful!","body":"The driver was loaded properly, however, it was the wrong file. But thank you very much for this command, it&#39;s very useful!"}],"tags":[],"owner":{"account_id":12635385,"reputation":527,"user_id":9185029,"display_name":"Alexander Katsenelenbogen"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694611123,"creation_date":1694611123,"answer_id":77097447,"question_id":77097128,"body_markdown":"You should verify that the jdbc driver jar is in fact on the class path. One trick you can use is to simply [print out the classpath at the start of program execution.][1] If it *is* on your classpath, I&#39;d be very surprised. If it is *not*, then you now have a line of investigation: How do you ensure that the driver jar is on your classpath when running within Eclipse?\r\n\r\n\r\n  [1]: https://java2blog.com/print-classpath-java/","title":"Java MariaDB no suitable driver found","body":"<p>You should verify that the jdbc driver jar is in fact on the class path. One trick you can use is to simply <a href=\"https://java2blog.com/print-classpath-java/\" rel=\"nofollow noreferrer\">print out the classpath at the start of program execution.</a> If it <em>is</em> on your classpath, I'd be very surprised. If it is <em>not</em>, then you now have a line of investigation: How do you ensure that the driver jar is on your classpath when running within Eclipse?</p>\n"},{"comments":[{"owner":{"account_id":26240396,"reputation":1,"user_id":20808338,"display_name":"patrickstart974"},"score":0,"creation_date":1694617186,"post_id":77097539,"comment_id":135915430,"body_markdown":"I think this is the legacy way to load the driver : Exception in thread &quot;main&quot; java.lang.ClassNotFoundException: org.mariadb.jdbc.Driver","body":"I think this is the legacy way to load the driver : Exception in thread &quot;main&quot; java.lang.ClassNotFoundException: org.mariadb.jdbc.Driver"}],"tags":[],"owner":{"account_id":18803236,"reputation":9,"user_id":13713129,"display_name":"Gavr"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694611801,"creation_date":1694611801,"answer_id":77097539,"question_id":77097128,"body_markdown":"the problem is propably the string at line 14, try this .\r\n\r\n                String url = &quot;jdbc:mariadb://localhost:3306/your_database_name&quot;;\r\n                String username = &quot;username&quot;;\r\n                String password = &quot;password&quot;;\r\n        \r\n              try {\r\n                    Class.forName(&quot;org.mariadb.jdbc.Driver&quot;);\r\n        \r\n                    // Create a database connection\r\n                Connection connection = DriverManager.getConnection(url,username, \r\n       password);\r\n    }catch (ClassNotFoundException e) {\r\n       e.printStackTrace();\r\n    }catch (SQLException e){\r\n       e.printStackTrace();\r\n    }","title":"Java MariaDB no suitable driver found","body":"<p>the problem is propably the string at line 14, try this .</p>\n<pre><code>            String url = &quot;jdbc:mariadb://localhost:3306/your_database_name&quot;;\n            String username = &quot;username&quot;;\n            String password = &quot;password&quot;;\n    \n          try {\n                Class.forName(&quot;org.mariadb.jdbc.Driver&quot;);\n    \n                // Create a database connection\n            Connection connection = DriverManager.getConnection(url,username, \n   password);\n}catch (ClassNotFoundException e) {\n   e.printStackTrace();\n}catch (SQLException e){\n   e.printStackTrace();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26240396,"reputation":1,"user_id":20808338,"display_name":"patrickstart974"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694619036,"creation_date":1694619036,"answer_id":77098498,"question_id":77097128,"body_markdown":"I found the issue I was using the wrong file : mariadb-java-client-3.2.0-sources.jar I use this instead : mariadb-java-client-3.2.0.jar It&#39;s working now ","title":"Java MariaDB no suitable driver found","body":"<p>I found the issue I was using the wrong file : mariadb-java-client-3.2.0-sources.jar I use this instead : mariadb-java-client-3.2.0.jar It's working now</p>\n"}],"owner":{"account_id":26240396,"reputation":1,"user_id":20808338,"display_name":"patrickstart974"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":106,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":3,"score":-1,"last_activity_date":1694619036,"creation_date":1694608311,"question_id":77097128,"body_markdown":"I&#39;m trying to connect my Java app to MariaDB database. MariaDB is properly installed and it can be used with DBeaver without any issue. However, my Java app cannot connect to the database. Here is how my project looks like. I have imported the mariaDB connector to the project properly. Am I doing something wrong? I can&#39;t figure out what could be the problem. Please, can anyone can help regarding this issue?\r\n\r\nSpecs:\r\nMac \r\nIDE Eclipse\r\nJDK17 \r\nMariaDB \r\nv11.1.2 \r\nMariaDB connector 3.2\r\n\r\n[enter image description here](https://i.stack.imgur.com/Lwyrs.png)\r\n[enter image description here](https://i.stack.imgur.com/kLvOe.png)\r\n\r\nI use to work with Java19, so I downgraded to 17 but the error is the same. I have tried many restart the IDE after importing the MariaDB connector jar file. I have followed many tutorials but it didn&#39;t solve the issue.","title":"Java MariaDB no suitable driver found","body":"<p>I'm trying to connect my Java app to MariaDB database. MariaDB is properly installed and it can be used with DBeaver without any issue. However, my Java app cannot connect to the database. Here is how my project looks like. I have imported the mariaDB connector to the project properly. Am I doing something wrong? I can't figure out what could be the problem. Please, can anyone can help regarding this issue?</p>\n<p>Specs:\nMac\nIDE Eclipse\nJDK17\nMariaDB\nv11.1.2\nMariaDB connector 3.2</p>\n<p><a href=\"https://i.stack.imgur.com/Lwyrs.png\" rel=\"nofollow noreferrer\">enter image description here</a>\n<a href=\"https://i.stack.imgur.com/kLvOe.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I use to work with Java19, so I downgraded to 17 but the error is the same. I have tried many restart the IDE after importing the MariaDB connector jar file. I have followed many tutorials but it didn't solve the issue.</p>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1694619210,"post_id":77098473,"comment_id":135915900,"body_markdown":"`#findViewById` returned `null`.","body":"<code>#findViewById</code> returned <code>null</code>."},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1694619225,"post_id":77098473,"comment_id":135915905,"body_markdown":"Does this answer your question? [What is a NullPointerException, and how do I fix it?](https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it\">What is a NullPointerException, and how do I fix it?</a>"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1694689230,"post_id":77098473,"comment_id":135925724,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"owner":{"account_id":29432717,"reputation":11,"user_id":22552098,"display_name":"lanaksa"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1694618852,"creation_date":1694618852,"question_id":77098473,"body_markdown":"i am learning android development.\r\nI want to make the sliding puzzle game.\r\nI just seent the Youtube Tutorial, and i am sure this code is same as the tutorial.\r\nBut this code got error then cause the app force close.\r\n\r\nThis problem make the app force closed. Please help.\r\n\r\nHere is the code\r\n\r\n**MainActiviy.java**\r\n\r\n```\r\npackage com.maulana.slidingpuzzle;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n    private Button buttonStart;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        buttonStart = findViewById(R.id.startButton);\r\n        buttonStart.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Intent intent = new Intent(MainActivity.this, GameActivity.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n    }\r\n}\r\n```\r\n\r\n\r\n**GameActivity.java**\r\n\r\n```\r\npackage com.maulana.slidingpuzzle;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.content.ContextCompat;\r\n\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.Toast;\r\n\r\nimport java.util.Random;\r\n\r\npublic class GameActivity extends AppCompatActivity {\r\n\r\n    private  int emptyX=3;\r\n    private  int emptyY=3;\r\n    private RelativeLayout group;\r\n    private Button[][] buttons;\r\n    private int[] tiles;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_game);\r\n        loadNumbers();\r\n        loadViews();\r\n        generateNumbers();\r\n        loadDataToViews();\r\n    }\r\n    private void loadViews(){\r\n        group = findViewById(R.id.groupPuzzle);\r\n        buttons = new Button[3][4];\r\n\r\n        for (int i =0; i&lt;group.getChildCount();i++){\r\n            buttons[i/3][i%4] = (Button) group.getChildAt(i);\r\n        }\r\n        return;\r\n    }\r\n\r\n    private void loadDataToViews(){\r\n        emptyX=3;\r\n        emptyY=3;\r\n        for(int i = 0; i &lt;group.getChildCount()-1; i++){\r\n            buttons[i/3][i%4].setText(String.valueOf(tiles[i]));\r\n            buttons[i/3][i%4].setBackgroundResource(android.R.drawable.btn_default);\r\n        }\r\n        buttons[emptyX][emptyY].setText(&quot;&quot;);\r\n        buttons[emptyX][emptyY].setBackgroundColor(ContextCompat.getColor(this,R.color.colorFreeButton));\r\n    }\r\n    private void loadNumbers(){\r\n        tiles = new int[16];\r\n        for(int i =0; i&lt; group.getChildCount() -1;i++){\r\n            tiles[i]=i+1;\r\n        }\r\n    }\r\n\r\n    private  void generateNumbers(){\r\n        int n = 11;\r\n        Random random = new Random();\r\n        while (n&gt;1){\r\n            int randomNum = random.nextInt(n--);\r\n            int temp = tiles[randomNum];\r\n            tiles[randomNum]=tiles[n];\r\n            tiles[n] =temp;\r\n        }\r\n        if(!isSolvable())\r\n            generateNumbers();\r\n    }\r\n    private boolean isSolvable(){\r\n        int countInversion = 0;\r\n        for (int i = 0; i&lt;11;i++){\r\n            for (int j =0; j&lt;i; j++){\r\n                if(tiles[j]&gt;tiles[i])\r\n                    countInversion++;\r\n            }\r\n        }\r\n        return countInversion%2 == 0;\r\n    }\r\n\r\n    public void buttonClick(View view){\r\n        Button button = (Button) view;\r\n        int x = button.getTag().toString().charAt(0)-&#39;0&#39;;\r\n        int y = button.getTag().toString().charAt(1)-&#39;0&#39;;\r\n\r\n        if ((Math.abs(emptyX-x)==1&amp;&amp;emptyY==y) || (Math.abs(emptyY-y)==1 &amp;&amp; emptyX ==x)){\r\n            buttons[emptyX][emptyY].setText((button.getText().toString()));\r\n            buttons[emptyX][emptyY].setBackgroundResource(android.R.drawable.btn_default);\r\n            button.setText(&quot;&quot;);\r\n            button.setBackgroundColor(ContextCompat.getColor(this,R.color.colorFreeButton));\r\n            emptyY = y;\r\n            emptyX = x;\r\n            checkWin();\r\n        }\r\n    }\r\n\r\n    private  void checkWin(){\r\n        boolean isWin = false;\r\n        if(emptyX==3 &amp;&amp; emptyY==3){\r\n            for (int i = 0; i &lt; group.getChildCount()-1; i++){\r\n                if(buttons[i/3][i%4].getText().toString().equals(String.valueOf(i+1))){\r\n                    isWin = true;\r\n                }\r\n                else {\r\n                    isWin = false;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (isWin){\r\n            Toast.makeText(this, &quot;MENANG&quot;, Toast.LENGTH_SHORT).show();\r\n            for (int i = 0; i &lt;group.getChildCount();i++){\r\n                buttons[i/3][i%4].setClickable(false);\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n**activity_game.xml**\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.GameActivity&quot;&gt;\r\n\r\n    &lt;RelativeLayout\r\n        android:id=&quot;@+id/groupPuzzle&quot;\r\n        android:layout_gravity=&quot;center&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;&gt;\r\n        &lt;Button\r\n            android:id=&quot;@+id/buttonA&quot;\r\n            android:onClick=&quot;buttonClick&quot;\r\n            android:layout_alignParentStart=&quot;true&quot;\r\n            android:layout_alignParentTop=&quot;true&quot;\r\n            android:tag=&quot;01&quot;\r\n            android:text=&quot;A&quot;\r\n            style=&quot;@style/ButtonStyle&quot;\r\n            /&gt;\r\n        &lt;Button\r\n            android:id=&quot;@+id/buttonB&quot;\r\n            android:onClick=&quot;buttonClick&quot;\r\n            android:layout_alignParentTop=&quot;true&quot;\r\n            android:layout_toEndOf=&quot;@+id/buttonA&quot;\r\n            android:tag=&quot;02&quot;\r\n            android:text=&quot;B&quot;\r\n            style=&quot;@style/ButtonStyle&quot;\r\n            /&gt;\r\n        &lt;Button\r\n            android:id=&quot;@+id/buttonC&quot;\r\n            android:onClick=&quot;buttonClick&quot;\r\n            android:layout_alignParentTop=&quot;true&quot;\r\n            android:layout_toEndOf=&quot;@+id/buttonB&quot;\r\n            android:tag=&quot;03&quot;\r\n            android:text=&quot;C&quot;\r\n            style=&quot;@style/ButtonStyle&quot;\r\n            /&gt;\r\n        &lt;Button\r\n            android:id=&quot;@+id/buttonD&quot;\r\n            android:onClick=&quot;buttonClick&quot;\r\n            android:layout_alignParentStart=&quot;true&quot;\r\n            android:layout_below=&quot;@+id/buttonA&quot;\r\n            android:tag=&quot;04&quot;\r\n            android:text=&quot;D&quot;\r\n            style=&quot;@style/ButtonStyle&quot;\r\n            /&gt;\r\n        &lt;Button\r\n            android:id=&quot;@+id/buttonE&quot;\r\n            android:onClick=&quot;buttonClick&quot;\r\n            android:layout_below=&quot;@+id/buttonB&quot;\r\n            android:layout_toEndOf=&quot;@+id/buttonD&quot;\r\n            android:tag=&quot;05&quot;\r\n            android:text=&quot;E&quot;\r\n            style=&quot;@style/ButtonStyle&quot;\r\n            /&gt;\r\n        &lt;Button\r\n            android:id=&quot;@+id/buttonF&quot;\r\n            android:onClick=&quot;buttonClick&quot;\r\n            android:layout_below=&quot;@+id/buttonC&quot;\r\n            android:layout_toEndOf=&quot;@+id/buttonE&quot;\r\n            android:tag=&quot;06&quot;\r\n            android:text=&quot;F&quot;\r\n            style=&quot;@style/ButtonStyle&quot;\r\n            /&gt;\r\n        &lt;Button\r\n            android:id=&quot;@+id/buttonG&quot;\r\n            android:onClick=&quot;buttonClick&quot;\r\n            android:layout_alignParentStart=&quot;true&quot;\r\n            android:layout_below=&quot;@+id/buttonD&quot;\r\n            android:tag=&quot;07&quot;\r\n            android:text=&quot;G&quot;\r\n            style=&quot;@style/ButtonStyle&quot;\r\n            /&gt;\r\n        &lt;Button\r\n            android:id=&quot;@+id/buttonH&quot;\r\n            android:onClick=&quot;buttonClick&quot;\r\n            android:layout_below=&quot;@+id/buttonE&quot;\r\n            android:layout_toEndOf=&quot;@+id/buttonG&quot;\r\n            android:tag=&quot;08&quot;\r\n            android:text=&quot;H&quot;\r\n            style=&quot;@style/ButtonStyle&quot;\r\n            /&gt;\r\n        &lt;Button\r\n            android:id=&quot;@+id/buttonI&quot;\r\n            android:onClick=&quot;buttonClick&quot;\r\n            android:layout_below=&quot;@+id/buttonF&quot;\r\n            android:layout_toEndOf=&quot;@+id/buttonH&quot;\r\n            android:tag=&quot;09&quot;\r\n            android:text=&quot;I&quot;\r\n            style=&quot;@style/ButtonStyle&quot;\r\n            /&gt;\r\n        &lt;Button\r\n            android:id=&quot;@+id/buttonJ&quot;\r\n            android:onClick=&quot;buttonClick&quot;\r\n            android:layout_alignParentStart=&quot;true&quot;\r\n            android:layout_below=&quot;@+id/buttonG&quot;\r\n            android:tag=&quot;10&quot;\r\n            android:text=&quot;J&quot;\r\n            style=&quot;@style/ButtonStyle&quot;\r\n            /&gt;\r\n        &lt;Button\r\n            android:id=&quot;@+id/buttonK&quot;\r\n            android:onClick=&quot;buttonClick&quot;\r\n            android:layout_below=&quot;@+id/buttonH&quot;\r\n            android:layout_toEndOf=&quot;@+id/buttonJ&quot;\r\n            android:tag=&quot;11&quot;\r\n            android:text=&quot;K&quot;\r\n            style=&quot;@style/ButtonStyle&quot;\r\n            /&gt;\r\n        &lt;Button\r\n            android:id=&quot;@+id/freeButton&quot;\r\n            android:onClick=&quot;buttonClick&quot;\r\n            android:layout_below=&quot;@+id/buttonI&quot;\r\n            android:layout_toEndOf=&quot;@+id/buttonK&quot;\r\n            android:tag=&quot;12&quot;\r\n            android:text=&quot;-&quot;\r\n            android:background=&quot;@color/colorFreeButton&quot;\r\n            style=&quot;@style/ButtonStyle&quot;\r\n            /&gt;\r\n\r\n    &lt;/RelativeLayout&gt;\r\n&lt;/FrameLayout&gt;\r\n```\r\n\r\n**activity_main.xml**\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.MainActivity&quot;&gt;\r\n\r\n    &lt;LinearLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        android:layout_gravity=&quot;center&quot;&gt;\r\n\r\n        &lt;Button\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:id=&quot;@+id/startButton&quot;\r\n            android:layout_marginTop=&quot;20dp&quot;\r\n            android:text=&quot;Start Puzzle Game&quot;/&gt;\r\n    &lt;/LinearLayout&gt;\r\n\r\n&lt;/FrameLayout&gt;\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\nSo i want when the button was clicked, the app open the GameActivity.","title":"java.lang.NullPointerException: Attempt to invoke virtual method &#39;int android.widget.RelativeLayout.getChildCount()&#39; on a null object reference","body":"<p>i am learning android development.\nI want to make the sliding puzzle game.\nI just seent the Youtube Tutorial, and i am sure this code is same as the tutorial.\nBut this code got error then cause the app force close.</p>\n<p>This problem make the app force closed. Please help.</p>\n<p>Here is the code</p>\n<p><strong>MainActiviy.java</strong></p>\n<pre><code>package com.maulana.slidingpuzzle;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.Button;\n\npublic class MainActivity extends AppCompatActivity {\n    private Button buttonStart;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        buttonStart = findViewById(R.id.startButton);\n        buttonStart.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                Intent intent = new Intent(MainActivity.this, GameActivity.class);\n                startActivity(intent);\n            }\n        });\n    }\n}\n</code></pre>\n<p><strong>GameActivity.java</strong></p>\n<pre><code>package com.maulana.slidingpuzzle;\n\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.core.content.ContextCompat;\n\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.RelativeLayout;\nimport android.widget.Toast;\n\nimport java.util.Random;\n\npublic class GameActivity extends AppCompatActivity {\n\n    private  int emptyX=3;\n    private  int emptyY=3;\n    private RelativeLayout group;\n    private Button[][] buttons;\n    private int[] tiles;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_game);\n        loadNumbers();\n        loadViews();\n        generateNumbers();\n        loadDataToViews();\n    }\n    private void loadViews(){\n        group = findViewById(R.id.groupPuzzle);\n        buttons = new Button[3][4];\n\n        for (int i =0; i&lt;group.getChildCount();i++){\n            buttons[i/3][i%4] = (Button) group.getChildAt(i);\n        }\n        return;\n    }\n\n    private void loadDataToViews(){\n        emptyX=3;\n        emptyY=3;\n        for(int i = 0; i &lt;group.getChildCount()-1; i++){\n            buttons[i/3][i%4].setText(String.valueOf(tiles[i]));\n            buttons[i/3][i%4].setBackgroundResource(android.R.drawable.btn_default);\n        }\n        buttons[emptyX][emptyY].setText(&quot;&quot;);\n        buttons[emptyX][emptyY].setBackgroundColor(ContextCompat.getColor(this,R.color.colorFreeButton));\n    }\n    private void loadNumbers(){\n        tiles = new int[16];\n        for(int i =0; i&lt; group.getChildCount() -1;i++){\n            tiles[i]=i+1;\n        }\n    }\n\n    private  void generateNumbers(){\n        int n = 11;\n        Random random = new Random();\n        while (n&gt;1){\n            int randomNum = random.nextInt(n--);\n            int temp = tiles[randomNum];\n            tiles[randomNum]=tiles[n];\n            tiles[n] =temp;\n        }\n        if(!isSolvable())\n            generateNumbers();\n    }\n    private boolean isSolvable(){\n        int countInversion = 0;\n        for (int i = 0; i&lt;11;i++){\n            for (int j =0; j&lt;i; j++){\n                if(tiles[j]&gt;tiles[i])\n                    countInversion++;\n            }\n        }\n        return countInversion%2 == 0;\n    }\n\n    public void buttonClick(View view){\n        Button button = (Button) view;\n        int x = button.getTag().toString().charAt(0)-'0';\n        int y = button.getTag().toString().charAt(1)-'0';\n\n        if ((Math.abs(emptyX-x)==1&amp;&amp;emptyY==y) || (Math.abs(emptyY-y)==1 &amp;&amp; emptyX ==x)){\n            buttons[emptyX][emptyY].setText((button.getText().toString()));\n            buttons[emptyX][emptyY].setBackgroundResource(android.R.drawable.btn_default);\n            button.setText(&quot;&quot;);\n            button.setBackgroundColor(ContextCompat.getColor(this,R.color.colorFreeButton));\n            emptyY = y;\n            emptyX = x;\n            checkWin();\n        }\n    }\n\n    private  void checkWin(){\n        boolean isWin = false;\n        if(emptyX==3 &amp;&amp; emptyY==3){\n            for (int i = 0; i &lt; group.getChildCount()-1; i++){\n                if(buttons[i/3][i%4].getText().toString().equals(String.valueOf(i+1))){\n                    isWin = true;\n                }\n                else {\n                    isWin = false;\n                    break;\n                }\n            }\n        }\n        if (isWin){\n            Toast.makeText(this, &quot;MENANG&quot;, Toast.LENGTH_SHORT).show();\n            for (int i = 0; i &lt;group.getChildCount();i++){\n                buttons[i/3][i%4].setClickable(false);\n            }\n        }\n    }\n}\n</code></pre>\n<p><strong>activity_game.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.GameActivity&quot;&gt;\n\n    &lt;RelativeLayout\n        android:id=&quot;@+id/groupPuzzle&quot;\n        android:layout_gravity=&quot;center&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;&gt;\n        &lt;Button\n            android:id=&quot;@+id/buttonA&quot;\n            android:onClick=&quot;buttonClick&quot;\n            android:layout_alignParentStart=&quot;true&quot;\n            android:layout_alignParentTop=&quot;true&quot;\n            android:tag=&quot;01&quot;\n            android:text=&quot;A&quot;\n            style=&quot;@style/ButtonStyle&quot;\n            /&gt;\n        &lt;Button\n            android:id=&quot;@+id/buttonB&quot;\n            android:onClick=&quot;buttonClick&quot;\n            android:layout_alignParentTop=&quot;true&quot;\n            android:layout_toEndOf=&quot;@+id/buttonA&quot;\n            android:tag=&quot;02&quot;\n            android:text=&quot;B&quot;\n            style=&quot;@style/ButtonStyle&quot;\n            /&gt;\n        &lt;Button\n            android:id=&quot;@+id/buttonC&quot;\n            android:onClick=&quot;buttonClick&quot;\n            android:layout_alignParentTop=&quot;true&quot;\n            android:layout_toEndOf=&quot;@+id/buttonB&quot;\n            android:tag=&quot;03&quot;\n            android:text=&quot;C&quot;\n            style=&quot;@style/ButtonStyle&quot;\n            /&gt;\n        &lt;Button\n            android:id=&quot;@+id/buttonD&quot;\n            android:onClick=&quot;buttonClick&quot;\n            android:layout_alignParentStart=&quot;true&quot;\n            android:layout_below=&quot;@+id/buttonA&quot;\n            android:tag=&quot;04&quot;\n            android:text=&quot;D&quot;\n            style=&quot;@style/ButtonStyle&quot;\n            /&gt;\n        &lt;Button\n            android:id=&quot;@+id/buttonE&quot;\n            android:onClick=&quot;buttonClick&quot;\n            android:layout_below=&quot;@+id/buttonB&quot;\n            android:layout_toEndOf=&quot;@+id/buttonD&quot;\n            android:tag=&quot;05&quot;\n            android:text=&quot;E&quot;\n            style=&quot;@style/ButtonStyle&quot;\n            /&gt;\n        &lt;Button\n            android:id=&quot;@+id/buttonF&quot;\n            android:onClick=&quot;buttonClick&quot;\n            android:layout_below=&quot;@+id/buttonC&quot;\n            android:layout_toEndOf=&quot;@+id/buttonE&quot;\n            android:tag=&quot;06&quot;\n            android:text=&quot;F&quot;\n            style=&quot;@style/ButtonStyle&quot;\n            /&gt;\n        &lt;Button\n            android:id=&quot;@+id/buttonG&quot;\n            android:onClick=&quot;buttonClick&quot;\n            android:layout_alignParentStart=&quot;true&quot;\n            android:layout_below=&quot;@+id/buttonD&quot;\n            android:tag=&quot;07&quot;\n            android:text=&quot;G&quot;\n            style=&quot;@style/ButtonStyle&quot;\n            /&gt;\n        &lt;Button\n            android:id=&quot;@+id/buttonH&quot;\n            android:onClick=&quot;buttonClick&quot;\n            android:layout_below=&quot;@+id/buttonE&quot;\n            android:layout_toEndOf=&quot;@+id/buttonG&quot;\n            android:tag=&quot;08&quot;\n            android:text=&quot;H&quot;\n            style=&quot;@style/ButtonStyle&quot;\n            /&gt;\n        &lt;Button\n            android:id=&quot;@+id/buttonI&quot;\n            android:onClick=&quot;buttonClick&quot;\n            android:layout_below=&quot;@+id/buttonF&quot;\n            android:layout_toEndOf=&quot;@+id/buttonH&quot;\n            android:tag=&quot;09&quot;\n            android:text=&quot;I&quot;\n            style=&quot;@style/ButtonStyle&quot;\n            /&gt;\n        &lt;Button\n            android:id=&quot;@+id/buttonJ&quot;\n            android:onClick=&quot;buttonClick&quot;\n            android:layout_alignParentStart=&quot;true&quot;\n            android:layout_below=&quot;@+id/buttonG&quot;\n            android:tag=&quot;10&quot;\n            android:text=&quot;J&quot;\n            style=&quot;@style/ButtonStyle&quot;\n            /&gt;\n        &lt;Button\n            android:id=&quot;@+id/buttonK&quot;\n            android:onClick=&quot;buttonClick&quot;\n            android:layout_below=&quot;@+id/buttonH&quot;\n            android:layout_toEndOf=&quot;@+id/buttonJ&quot;\n            android:tag=&quot;11&quot;\n            android:text=&quot;K&quot;\n            style=&quot;@style/ButtonStyle&quot;\n            /&gt;\n        &lt;Button\n            android:id=&quot;@+id/freeButton&quot;\n            android:onClick=&quot;buttonClick&quot;\n            android:layout_below=&quot;@+id/buttonI&quot;\n            android:layout_toEndOf=&quot;@+id/buttonK&quot;\n            android:tag=&quot;12&quot;\n            android:text=&quot;-&quot;\n            android:background=&quot;@color/colorFreeButton&quot;\n            style=&quot;@style/ButtonStyle&quot;\n            /&gt;\n\n    &lt;/RelativeLayout&gt;\n&lt;/FrameLayout&gt;\n</code></pre>\n<p><strong>activity_main.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n    &lt;LinearLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:orientation=&quot;vertical&quot;\n        android:layout_gravity=&quot;center&quot;&gt;\n\n        &lt;Button\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:id=&quot;@+id/startButton&quot;\n            android:layout_marginTop=&quot;20dp&quot;\n            android:text=&quot;Start Puzzle Game&quot;/&gt;\n    &lt;/LinearLayout&gt;\n\n&lt;/FrameLayout&gt;\n</code></pre>\n<p>So i want when the button was clicked, the app open the GameActivity.</p>\n"},{"tags":["java","java-stream","collectors"],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1694618575,"creation_date":1662845136,"answer_id":73675258,"question_id":73674457,"body_markdown":"There are several issues in your code:\r\n\r\n* The filtering logic is incorrect: you said you need to retain only roles `&quot;admin&quot;` and `&quot;user&quot;`, but according to your code any `List` of `Employee` that contains at least one employee with either of these roles is good to go (meaning the **whole** list, not only employee having the required role). That&#39;s why you see roles `”super”` in your output. You need to filter the *employees* in each *list*, instead of filtering the *lists*.\r\n\r\n* That&#39;s not a job for `Stream.forEach`, which operates via *side-effects*. It&#39;s **discouraged** to be used in place of [*reduction operations*](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/package-summary.html#Reduction). Have a look at the [API documentation](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/package-summary.html#SideEffects), especially pay attention to the code examples.\r\n\r\n* Instead of iterating over the `Set` of roles, we can simply use `contains()` check, and iterate only over the entries of the map which you&#39;re retrieving by calling `Either.left(dataInput).value()`.\r\n\r\nTo accumulate the values from the stream we have a wide range of operations, and the most suitable of them in this case is `collect()`, because we need to perform mutable reduction.\r\n\r\nIn this case we can&#39;t apply the filtering logic inside the stream without creating new objects (*which costs performance*), or without mutating the existing data (*even if you no longer need it, it&#39;s not the way to go because mutating the objects in the stream goes against the Functional programming paradigm*).\r\n\r\nAnother option we have is to perform filtering inside a `Collector` while accumulating the data. I&#39;ll proceed with it.\r\n\r\nIn order to generate the resulting map, we can use *collector* [`groupingBy()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html#groupingBy(java.util.function.Function,java.util.stream.Collector)) in conjunction with [`flatMapping()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html#flatMapping(java.util.function.Function,java.util.stream.Collector)) + `toList()` applied as the downstream.\r\n\r\nThat&#39;s how it might be implemented:\r\n\r\n```\r\nMap&lt;String, List&lt;? extends Employee&gt;&gt; dataInput = // initializing dataInput\r\n        \r\nSet&lt;String&gt; realmroles = // initializing realmroles\r\n\r\nreturn Either.left().value().entrySet().stream()\r\n    .collect(Collectors.groupingBy(\r\n        Map.Entry::getKey,\r\n        Collectors.flatMapping(entry -&gt; entry.getValue().stream()\r\n                .filter(emp -&gt; realmroles.contains(((Employee) emp).getRole())),\r\n            Collectors.toList())\r\n    ));\r\n```","title":"Map&lt;String, List&lt;? extends Object&gt;&gt; filtering issue with Stream API","body":"<p>There are several issues in your code:</p>\n<ul>\n<li><p>The filtering logic is incorrect: you said you need to retain only roles <code>&quot;admin&quot;</code> and <code>&quot;user&quot;</code>, but according to your code any <code>List</code> of <code>Employee</code> that contains at least one employee with either of these roles is good to go (meaning the <strong>whole</strong> list, not only employee having the required role). That's why you see roles <code>”super”</code> in your output. You need to filter the <em>employees</em> in each <em>list</em>, instead of filtering the <em>lists</em>.</p>\n</li>\n<li><p>That's not a job for <code>Stream.forEach</code>, which operates via <em>side-effects</em>. It's <strong>discouraged</strong> to be used in place of <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/package-summary.html#Reduction\" rel=\"nofollow noreferrer\"><em>reduction operations</em></a>. Have a look at the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/package-summary.html#SideEffects\" rel=\"nofollow noreferrer\">API documentation</a>, especially pay attention to the code examples.</p>\n</li>\n<li><p>Instead of iterating over the <code>Set</code> of roles, we can simply use <code>contains()</code> check, and iterate only over the entries of the map which you're retrieving by calling <code>Either.left(dataInput).value()</code>.</p>\n</li>\n</ul>\n<p>To accumulate the values from the stream we have a wide range of operations, and the most suitable of them in this case is <code>collect()</code>, because we need to perform mutable reduction.</p>\n<p>In this case we can't apply the filtering logic inside the stream without creating new objects (<em>which costs performance</em>), or without mutating the existing data (<em>even if you no longer need it, it's not the way to go because mutating the objects in the stream goes against the Functional programming paradigm</em>).</p>\n<p>Another option we have is to perform filtering inside a <code>Collector</code> while accumulating the data. I'll proceed with it.</p>\n<p>In order to generate the resulting map, we can use <em>collector</em> <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html#groupingBy(java.util.function.Function,java.util.stream.Collector)\" rel=\"nofollow noreferrer\"><code>groupingBy()</code></a> in conjunction with <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html#flatMapping(java.util.function.Function,java.util.stream.Collector)\" rel=\"nofollow noreferrer\"><code>flatMapping()</code></a> + <code>toList()</code> applied as the downstream.</p>\n<p>That's how it might be implemented:</p>\n<pre><code>Map&lt;String, List&lt;? extends Employee&gt;&gt; dataInput = // initializing dataInput\n        \nSet&lt;String&gt; realmroles = // initializing realmroles\n\nreturn Either.left().value().entrySet().stream()\n    .collect(Collectors.groupingBy(\n        Map.Entry::getKey,\n        Collectors.flatMapping(entry -&gt; entry.getValue().stream()\n                .filter(emp -&gt; realmroles.contains(((Employee) emp).getRole())),\n            Collectors.toList())\n    ));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1663225069,"post_id":73675743,"comment_id":130189791,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/73675743/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":23022074,"reputation":1,"user_id":17142959,"display_name":"hcan"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662851030,"creation_date":1662851030,"answer_id":73675743,"question_id":73674457,"body_markdown":"You have to set the value (emp list) in your map.\r\n\r\n    followedResourcesServices.left().value().entrySet().stream().forEach(e -&gt; {\r\n    \t\te.setValue(e.getValue().stream().filter(i -&gt; realmroles.stream().anyMatch(role -&gt; ((Employee) i).getRole().equals(role))).\r\n    \t\t\t\tcollect(Collectors.toList()));\r\n    \t\tdataResponse.put(e.getKey(), e.getValue());\r\n    \t});","title":"Map&lt;String, List&lt;? extends Object&gt;&gt; filtering issue with Stream API","body":"<p>You have to set the value (emp list) in your map.</p>\n<pre><code>followedResourcesServices.left().value().entrySet().stream().forEach(e -&gt; {\n        e.setValue(e.getValue().stream().filter(i -&gt; realmroles.stream().anyMatch(role -&gt; ((Employee) i).getRole().equals(role))).\n                collect(Collectors.toList()));\n        dataResponse.put(e.getKey(), e.getValue());\n    });\n</code></pre>\n"}],"owner":{"account_id":26301124,"reputation":11,"user_id":19966480,"display_name":"Ajith"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":331,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1694618575,"creation_date":1662836045,"question_id":73674457,"body_markdown":"I have `Employee` object that has `3` fields: `name`, `role`, `companyName`.\r\n\r\nI need to filter `Employee` objects based on a `role` property.\r\n\r\nDespite that I&#39;m applying `filter` in the stream in the code below, it&#39;s returning the **entire** data.\r\n\r\n*My code:*\r\n\r\n    public static Map&lt;String, List&lt;? extends Employee&gt;&gt; testMappingFilter(List&lt;Employee&gt; emp) {\r\n        Map&lt;String, List&lt;? extends Employee&gt;&gt; dataInput = new HashMap&lt;&gt;();\r\n        for (Employee entry : emp) {\r\n            dataInput.put(&quot;senior&quot;, new ArrayList(emp));\r\n            dataInput.put(&quot;junior&quot;, new ArrayList(emp));\r\n        }\r\n        \r\n        Map&lt;String, List&lt;? extends Employee&gt;&gt; dataResponse = new HashMap&lt;&gt;();\r\n        \r\n        Set&lt;String&gt; realmroles = new HashSet&lt;&gt;();\r\n        realmroles.add(&quot;admin&quot;);\r\n        realmroles.add(&quot;user&quot;);\r\n        \r\n        Either&lt;Map&lt;String, List&lt;? extends Employee&gt;&gt;, ResponseFormat&gt; followedResourcesServices = Either.left(dataInput);\r\n        \r\n        realmroles.stream().forEach(role -&gt; \r\n            followedResourcesServices.left().value().entrySet().stream()\r\n                    .filter(elements -&gt; elements.getValue().stream().anyMatch(i -&gt; ((Employee) i).getRole().contains(role)))\r\n                .forEach(elements -&gt; dataResponse.put(elements.getKey(), elements.getValue())));\r\n        \r\n        return dataResponse;\r\n    }\r\n\r\n***Sample data:***\r\n\r\n*Expected Output:*\r\n\r\n(expected roles are only `&quot;admin&quot;` and `&quot;user&quot;`, data related to role `&quot;super&quot;` should not come)\r\n\r\n```json\r\n{ “senior” :\r\n   [ { ”name”:”ABC”, “role”:”admin”, “companyName”:”ABC &amp;Co” },\r\n     { ”name”:”XYZ”, “role”:”admin”, “companyName”:”XYZ &amp;Co” },\r\n     { ”name”:”RST”, “role”:”user”, “companyName”:”RST &amp;Co” } ],\r\n  “junior” :\r\n   [ { ”name”:”ABC”, “role”:”admin”, “companyName”:”ABC &amp;Co” },\r\n     { ”name”:”XYZ”, “role”:”admin”, “companyName”:”XYZ &amp;Co” },\r\n     { ”name”:”RST”, “role”:”user”, “companyName”:”RST &amp;Co” } ] \r\n}\r\n```\r\n\r\n*Actual output:*\r\n\r\n```json\r\n{ “senior” :\r\n   [ { ”name”:”ABC”, “role”:”admin”, “companyName”:”ABC &amp;Co” },\r\n     { ”name”:”DDD”, “role”:”super”, “companyName”:”DDD &amp;Co” },\r\n     { ”name”:”XYZ”, “role”:”admin”, “companyName”:”XYZ &amp;Co” },\r\n     { ”name”:”RST”, “role”:”user”, “companyName”:”RST &amp;Co” } ],\r\n  “junior” :\r\n   [ { ”name”:”ABC”, “role”:”admin”, “companyName”:”ABC &amp;Co” },\r\n     { ”name”:”DDD”, “role”:”super”, “companyName”:”DDD &amp;Co” },\r\n     { ”name”:”XYZ”, “role”:”admin”, “companyName”:”XYZ &amp;Co” },\r\n     { ”name”:”RST”, “role”:”user”, “companyName”:”RST &amp;Co” } ] \r\n}\r\n```","title":"Map&lt;String, List&lt;? extends Object&gt;&gt; filtering issue with Stream API","body":"<p>I have <code>Employee</code> object that has <code>3</code> fields: <code>name</code>, <code>role</code>, <code>companyName</code>.</p>\n<p>I need to filter <code>Employee</code> objects based on a <code>role</code> property.</p>\n<p>Despite that I'm applying <code>filter</code> in the stream in the code below, it's returning the <strong>entire</strong> data.</p>\n<p><em>My code:</em></p>\n<pre><code>public static Map&lt;String, List&lt;? extends Employee&gt;&gt; testMappingFilter(List&lt;Employee&gt; emp) {\n    Map&lt;String, List&lt;? extends Employee&gt;&gt; dataInput = new HashMap&lt;&gt;();\n    for (Employee entry : emp) {\n        dataInput.put(&quot;senior&quot;, new ArrayList(emp));\n        dataInput.put(&quot;junior&quot;, new ArrayList(emp));\n    }\n    \n    Map&lt;String, List&lt;? extends Employee&gt;&gt; dataResponse = new HashMap&lt;&gt;();\n    \n    Set&lt;String&gt; realmroles = new HashSet&lt;&gt;();\n    realmroles.add(&quot;admin&quot;);\n    realmroles.add(&quot;user&quot;);\n    \n    Either&lt;Map&lt;String, List&lt;? extends Employee&gt;&gt;, ResponseFormat&gt; followedResourcesServices = Either.left(dataInput);\n    \n    realmroles.stream().forEach(role -&gt; \n        followedResourcesServices.left().value().entrySet().stream()\n                .filter(elements -&gt; elements.getValue().stream().anyMatch(i -&gt; ((Employee) i).getRole().contains(role)))\n            .forEach(elements -&gt; dataResponse.put(elements.getKey(), elements.getValue())));\n    \n    return dataResponse;\n}\n</code></pre>\n<p><em><strong>Sample data:</strong></em></p>\n<p><em>Expected Output:</em></p>\n<p>(expected roles are only <code>&quot;admin&quot;</code> and <code>&quot;user&quot;</code>, data related to role <code>&quot;super&quot;</code> should not come)</p>\n<pre class=\"lang-json prettyprint-override\"><code>{ “senior” :\n   [ { ”name”:”ABC”, “role”:”admin”, “companyName”:”ABC &amp;Co” },\n     { ”name”:”XYZ”, “role”:”admin”, “companyName”:”XYZ &amp;Co” },\n     { ”name”:”RST”, “role”:”user”, “companyName”:”RST &amp;Co” } ],\n  “junior” :\n   [ { ”name”:”ABC”, “role”:”admin”, “companyName”:”ABC &amp;Co” },\n     { ”name”:”XYZ”, “role”:”admin”, “companyName”:”XYZ &amp;Co” },\n     { ”name”:”RST”, “role”:”user”, “companyName”:”RST &amp;Co” } ] \n}\n</code></pre>\n<p><em>Actual output:</em></p>\n<pre class=\"lang-json prettyprint-override\"><code>{ “senior” :\n   [ { ”name”:”ABC”, “role”:”admin”, “companyName”:”ABC &amp;Co” },\n     { ”name”:”DDD”, “role”:”super”, “companyName”:”DDD &amp;Co” },\n     { ”name”:”XYZ”, “role”:”admin”, “companyName”:”XYZ &amp;Co” },\n     { ”name”:”RST”, “role”:”user”, “companyName”:”RST &amp;Co” } ],\n  “junior” :\n   [ { ”name”:”ABC”, “role”:”admin”, “companyName”:”ABC &amp;Co” },\n     { ”name”:”DDD”, “role”:”super”, “companyName”:”DDD &amp;Co” },\n     { ”name”:”XYZ”, “role”:”admin”, “companyName”:”XYZ &amp;Co” },\n     { ”name”:”RST”, “role”:”user”, “companyName”:”RST &amp;Co” } ] \n}\n</code></pre>\n"},{"tags":["java","spring-boot","build","spring-data-jpa","jar"],"owner":{"account_id":26003956,"reputation":11,"user_id":19713960,"display_name":"dev.akdogan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1694620815,"answer_count":0,"score":0,"last_activity_date":1694617697,"creation_date":1694617526,"question_id":77098306,"body_markdown":"I have never encountered such a problem before. My project, which runs smoothly when I run it with Intellij IDEA, gives the following error when I try to run it locally after building the artifact and generating a JAR:\r\n\r\n```\r\n17:30:42.980 [main] WARN org.springframework.context.annotation.AnnotationConfigApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;newsController&#39; defined in URL [jar:file:/C:/Users/akdogan/Downloads/News%20Panel/News-Panel/out/artifacts/News_Panel_jar/News-Panel.jar!/com/istanify/controller/NewsController.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;newsService&#39; defined in URL [jar:file:/C:/Users/akdogan/Downloads/News%20Panel/News-Panel/out/artifacts/News_Panel_jar/News-Panel.jar!/com/istanify/service/NewsService.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;entityManager&#39; defined in class path resource [com/istanify/bean/EntityManagerBean.class]: Unsatisfied dependency expressed through method &#39;entityManager&#39; parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;javax.persistence.EntityManagerFactory&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\r\n```\r\n\r\nWhen I completely remove the injection related to EntityManager from the service, it gives the following error:\r\n\r\n```\r\n17:38:49.630 [main] WARN org.springframework.context.annotation.AnnotationConfigApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;newsController&#39; defined in URL [jar:file:/C:/Users/akdogan/Downloads/News%20Panel/News-Panel/out/artifacts/News_Panel_jar/News-Panel.jar!/com/istanify/controller/NewsController.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;newsService&#39; defined in URL [jar:file:/C:/Users/akdogan/Downloads/News%20Panel/News-Panel/out/artifacts/News_Panel_jar/News-Panel.jar!/com/istanify/service/NewsService.class]: Unsatisfied dependency expressed through constructor parameter 1; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;com.istanify.repository.NewsRepository&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\r\n       \r\n```\r\n\r\nThats are my classes and settings:\r\n\r\nController;\r\n\r\n```\r\npackage com.istanify.controller;\r\n\r\n//imports\r\n\r\n@RestController\r\n@RequiredArgsConstructor\r\n@RequestMapping(&quot;/news&quot;)\r\npublic class NewsController {\r\n\r\n    private final NewsService newsService;\r\n\r\n  //some methods\r\n}\r\n```\r\n\r\nService;\r\n\r\n```\r\npackage com.istanify.service;\r\n\r\n\r\n//imports\r\n\r\n\r\n@Service\r\n@Slf4j\r\n@RequiredArgsConstructor\r\npublic class NewsService {\r\n\r\n\r\n/*    @PersistenceContext\r\n    private final EntityManager entityManager;*/ manager in comment here\r\n    private final NewsMapper newsMapper;\r\n    private final NewsRepository newsRepository;\r\n    private final TagService tagService;\r\n\r\n\r\n\r\n   //some methods\r\n\r\n}\r\n```\r\n\r\nRepository;\r\n\r\n```\r\npackage com.istanify.repository;\r\n\r\nimport com.istanify.model.concrete.News;\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\nimport org.springframework.stereotype.Repository;\r\n\r\n@Repository\r\npublic interface NewsRepository extends JpaRepository&lt;News,Long&gt; {\r\n}\r\n```\r\n\r\nmodel;\r\n\r\n```\r\npackage com.istanify.model.concrete;\r\n\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Getter;\r\nimport lombok.NoArgsConstructor;\r\nimport lombok.Setter;\r\n\r\nimport javax.persistence.*;\r\nimport java.util.List;\r\n\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Entity\r\n@Table(name = &quot;t_news&quot;)\r\npublic class News {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    private String newsTitle;\r\n\r\n    private String newsContent;\r\n\r\n    private String newsSource;\r\n\r\n    private String author;\r\n\r\n    @ManyToMany\r\n    @JoinTable(name = &quot;t_news_tags&quot;,\r\n    joinColumns = @JoinColumn(name = &quot;news_id&quot;),\r\n    inverseJoinColumns = @JoinColumn(name = &quot;tag_id&quot;))\r\n    private List&lt;Tag&gt; tags;\r\n}\r\n```\r\n\r\napplication.yml;\r\n```\r\n\r\nserver:\r\n  port:  8081\r\n  error:\r\n    include-binding-errors: always\r\n    include-message: always\r\n    include-stacktrace: never\r\n\r\nspring:\r\n  config:\r\n    import:\r\n  datasource:\r\n    url: jdbc:postgresql://localhost:5432/${task_database}\r\n    username: ${database_username}\r\n    password: ${database_password}\r\n    driver-class-name: org.postgresql.Driver\r\n  jpa:\r\n    hibernate:\r\n      ddl-auto: update\r\n    show-sql: true\r\n    database-platform: org.hibernate.dialect.PostgreSQLDialect\r\n    properties:\r\n      &#39;[hibernate.format_sql]&#39;: true\r\n  #image\r\n  servlet:\r\n    multipart:\r\n      max-file-size: 2MB\r\n      max-request-size: 2MB\r\n\r\nlogging:\r\n  file:\r\n    name: log/istanify.log\r\n  pattern:\r\n    file: &quot;%d %-5level [%thread]  %logger:%msg%n&quot;\r\n  level:\r\n    &#39;[org.springframework.web]&#39;: WARN\r\n    &#39;[org.hibernate]&#39;: INFO\r\n    &#39;[org.istanify]&#39;: DEBUG\r\n\r\nmanagement:\r\n  endpoints:\r\n    web:\r\n      exposure:\r\n        include: &#39;*&#39;\r\n  info:\r\n    env:\r\n      enabled: true\r\n  endpoint:\r\n    health:\r\n      show-details: always\r\n    shutdown:\r\n      enabled:  true\r\n\r\ninfo:\r\n  application:\r\n    name: &#39;Istanify Remote API 1&#39;\r\n    description: &#39;Istanify Remote API Project&#39;\r\n    version: &#39;@project.version@&#39;\r\n```\r\n\r\npom.xml;\r\n```\r\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.7.15&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.istanify&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;News-Panel&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;News-Panel&lt;/name&gt;\r\n\t&lt;description&gt;News Panel project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t\t&lt;org.mapstruct.version&gt;1.5.5.Final&lt;/org.mapstruct.version&gt;\r\n\t\t&lt;lombok-mapstruct-binding.version&gt;0.2.0&lt;/lombok-mapstruct-binding.version&gt;\r\n\t\t&lt;springdoc.openapi.version&gt;1.6.9&lt;/springdoc.openapi.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mapstruct&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${org.mapstruct.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${springdoc.openapi.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;source&gt;${java.version}&lt;/source&gt; &lt;!-- depending on your project --&gt;\r\n\t\t\t\t\t&lt;target&gt;${java.version}&lt;/target&gt; &lt;!-- depending on your project --&gt;\r\n\t\t\t\t\t&lt;annotationProcessorPaths&gt;\r\n\t\t\t\t\t\t&lt;path&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\r\n\t\t\t\t\t\t\t&lt;version&gt;${org.mapstruct.version}&lt;/version&gt;\r\n\t\t\t\t\t\t&lt;/path&gt;\r\n\t\t\t\t\t\t&lt;path&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t\t&lt;version&gt;${lombok.version}&lt;/version&gt;\r\n\t\t\t\t\t\t&lt;/path&gt;\r\n\t\t\t\t\t\t&lt;path&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok-mapstruct-binding&lt;/artifactId&gt;\r\n\t\t\t\t\t\t\t&lt;version&gt;${lombok-mapstruct-binding.version}&lt;/version&gt;\r\n\t\t\t\t\t\t&lt;/path&gt;\r\n\t\t\t\t\t&lt;/annotationProcessorPaths&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n```\r\n\r\nWhile the project runs smoothly, it seems absurd that it starts causing problems immediately after building. I&#39;m wondering if there might be an issue related to Lombok because there have been no issues during development. As soon as the project turns into News-Panel.jar file, it starts failing to find EntityManager. If I comment it out, it becomes unable to find any repository. I would greatly appreciate it if someone who knows could help. I am currently experiencing this issue with all of my projects. Thank you.","title":"My Spring Boot project doesn&#39;t work after building a JAR","body":"<p>I have never encountered such a problem before. My project, which runs smoothly when I run it with Intellij IDEA, gives the following error when I try to run it locally after building the artifact and generating a JAR:</p>\n<pre><code>17:30:42.980 [main] WARN org.springframework.context.annotation.AnnotationConfigApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'newsController' defined in URL [jar:file:/C:/Users/akdogan/Downloads/News%20Panel/News-Panel/out/artifacts/News_Panel_jar/News-Panel.jar!/com/istanify/controller/NewsController.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'newsService' defined in URL [jar:file:/C:/Users/akdogan/Downloads/News%20Panel/News-Panel/out/artifacts/News_Panel_jar/News-Panel.jar!/com/istanify/service/NewsService.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'entityManager' defined in class path resource [com/istanify/bean/EntityManagerBean.class]: Unsatisfied dependency expressed through method 'entityManager' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'javax.persistence.EntityManagerFactory' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\n</code></pre>\n<p>When I completely remove the injection related to EntityManager from the service, it gives the following error:</p>\n<pre><code>17:38:49.630 [main] WARN org.springframework.context.annotation.AnnotationConfigApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'newsController' defined in URL [jar:file:/C:/Users/akdogan/Downloads/News%20Panel/News-Panel/out/artifacts/News_Panel_jar/News-Panel.jar!/com/istanify/controller/NewsController.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'newsService' defined in URL [jar:file:/C:/Users/akdogan/Downloads/News%20Panel/News-Panel/out/artifacts/News_Panel_jar/News-Panel.jar!/com/istanify/service/NewsService.class]: Unsatisfied dependency expressed through constructor parameter 1; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'com.istanify.repository.NewsRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\n       \n</code></pre>\n<p>Thats are my classes and settings:</p>\n<p>Controller;</p>\n<pre><code>package com.istanify.controller;\n\n//imports\n\n@RestController\n@RequiredArgsConstructor\n@RequestMapping(&quot;/news&quot;)\npublic class NewsController {\n\n    private final NewsService newsService;\n\n  //some methods\n}\n</code></pre>\n<p>Service;</p>\n<pre><code>package com.istanify.service;\n\n\n//imports\n\n\n@Service\n@Slf4j\n@RequiredArgsConstructor\npublic class NewsService {\n\n\n/*    @PersistenceContext\n    private final EntityManager entityManager;*/ manager in comment here\n    private final NewsMapper newsMapper;\n    private final NewsRepository newsRepository;\n    private final TagService tagService;\n\n\n\n   //some methods\n\n}\n</code></pre>\n<p>Repository;</p>\n<pre><code>package com.istanify.repository;\n\nimport com.istanify.model.concrete.News;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\n@Repository\npublic interface NewsRepository extends JpaRepository&lt;News,Long&gt; {\n}\n</code></pre>\n<p>model;</p>\n<pre><code>package com.istanify.model.concrete;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Getter;\nimport lombok.NoArgsConstructor;\nimport lombok.Setter;\n\nimport javax.persistence.*;\nimport java.util.List;\n\n@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@Entity\n@Table(name = &quot;t_news&quot;)\npublic class News {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    private String newsTitle;\n\n    private String newsContent;\n\n    private String newsSource;\n\n    private String author;\n\n    @ManyToMany\n    @JoinTable(name = &quot;t_news_tags&quot;,\n    joinColumns = @JoinColumn(name = &quot;news_id&quot;),\n    inverseJoinColumns = @JoinColumn(name = &quot;tag_id&quot;))\n    private List&lt;Tag&gt; tags;\n}\n</code></pre>\n<p>application.yml;</p>\n<pre><code>\nserver:\n  port:  8081\n  error:\n    include-binding-errors: always\n    include-message: always\n    include-stacktrace: never\n\nspring:\n  config:\n    import:\n  datasource:\n    url: jdbc:postgresql://localhost:5432/${task_database}\n    username: ${database_username}\n    password: ${database_password}\n    driver-class-name: org.postgresql.Driver\n  jpa:\n    hibernate:\n      ddl-auto: update\n    show-sql: true\n    database-platform: org.hibernate.dialect.PostgreSQLDialect\n    properties:\n      '[hibernate.format_sql]': true\n  #image\n  servlet:\n    multipart:\n      max-file-size: 2MB\n      max-request-size: 2MB\n\nlogging:\n  file:\n    name: log/istanify.log\n  pattern:\n    file: &quot;%d %-5level [%thread]  %logger:%msg%n&quot;\n  level:\n    '[org.springframework.web]': WARN\n    '[org.hibernate]': INFO\n    '[org.istanify]': DEBUG\n\nmanagement:\n  endpoints:\n    web:\n      exposure:\n        include: '*'\n  info:\n    env:\n      enabled: true\n  endpoint:\n    health:\n      show-details: always\n    shutdown:\n      enabled:  true\n\ninfo:\n  application:\n    name: 'Istanify Remote API 1'\n    description: 'Istanify Remote API Project'\n    version: '@project.version@'\n</code></pre>\n<p>pom.xml;</p>\n<pre><code>&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.15&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.istanify&lt;/groupId&gt;\n    &lt;artifactId&gt;News-Panel&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;News-Panel&lt;/name&gt;\n    &lt;description&gt;News Panel project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n        &lt;org.mapstruct.version&gt;1.5.5.Final&lt;/org.mapstruct.version&gt;\n        &lt;lombok-mapstruct-binding.version&gt;0.2.0&lt;/lombok-mapstruct-binding.version&gt;\n        &lt;springdoc.openapi.version&gt;1.6.9&lt;/springdoc.openapi.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n            &lt;artifactId&gt;mapstruct&lt;/artifactId&gt;\n            &lt;version&gt;${org.mapstruct.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n            &lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\n            &lt;version&gt;${springdoc.openapi.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n                            &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;${java.version}&lt;/source&gt; &lt;!-- depending on your project --&gt;\n                    &lt;target&gt;${java.version}&lt;/target&gt; &lt;!-- depending on your project --&gt;\n                    &lt;annotationProcessorPaths&gt;\n                        &lt;path&gt;\n                            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n                            &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\n                            &lt;version&gt;${org.mapstruct.version}&lt;/version&gt;\n                        &lt;/path&gt;\n                        &lt;path&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                            &lt;version&gt;${lombok.version}&lt;/version&gt;\n                        &lt;/path&gt;\n                        &lt;path&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok-mapstruct-binding&lt;/artifactId&gt;\n                            &lt;version&gt;${lombok-mapstruct-binding.version}&lt;/version&gt;\n                        &lt;/path&gt;\n                    &lt;/annotationProcessorPaths&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n</code></pre>\n<p>While the project runs smoothly, it seems absurd that it starts causing problems immediately after building. I'm wondering if there might be an issue related to Lombok because there have been no issues during development. As soon as the project turns into News-Panel.jar file, it starts failing to find EntityManager. If I comment it out, it becomes unable to find any repository. I would greatly appreciate it if someone who knows could help. I am currently experiencing this issue with all of my projects. Thank you.</p>\n"},{"tags":["java","callback","java-native-interface","ffi","project-panama"],"comments":[{"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"score":1,"creation_date":1672664585,"post_id":74982535,"comment_id":132322163,"body_markdown":"Could you give it a try with the JDK20 early access build? (https://jdk.java.net/20/) The `ArrayIndexOutOfBoundsException` could be caused by a bug that exists in 19 (https://github.com/openjdk/panama-foreign/pull/720)","body":"Could you give it a try with the JDK20 early access build? (<a href=\"https://jdk.java.net/20/\" rel=\"nofollow noreferrer\">jdk.java.net/20</a>) The <code>ArrayIndexOutOfBoundsException</code> could be caused by a bug that exists in 19 (<a href=\"https://github.com/openjdk/panama-foreign/pull/720\" rel=\"nofollow noreferrer\">github.com/openjdk/panama-foreign/pull/720</a>)"},{"owner":{"account_id":7234121,"reputation":2010,"user_id":5519975,"accept_rate":89,"display_name":"Tristan"},"score":0,"creation_date":1672666269,"post_id":74982535,"comment_id":132322651,"body_markdown":"@JornVernee It does work in the JDK20 early access build, so that explains it. Thanks!","body":"@JornVernee It does work in the JDK20 early access build, so that explains it. Thanks!"}],"answers":[{"tags":[],"owner":{"account_id":7234121,"reputation":2010,"user_id":5519975,"accept_rate":89,"display_name":"Tristan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694617695,"creation_date":1694617695,"answer_id":77098327,"question_id":74982535,"body_markdown":"There was [a bug in JDK19](https://bugs.openjdk.org/browse/JDK-8291873) such that there was no value normalization in upcalls.\r\n\r\nThis is now fixed.","title":"Callback function&#39;s byte parameter has value out of bounds in project Panama function interface","body":"<p>There was <a href=\"https://bugs.openjdk.org/browse/JDK-8291873\" rel=\"nofollow noreferrer\">a bug in JDK19</a> such that there was no value normalization in upcalls.</p>\n<p>This is now fixed.</p>\n"}],"owner":{"account_id":7234121,"reputation":2010,"user_id":5519975,"accept_rate":89,"display_name":"Tristan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77098327,"answer_count":1,"score":0,"last_activity_date":1694617695,"creation_date":1672663196,"question_id":74982535,"body_markdown":"I&#39;m using the new Foreign function &amp; memory API which is part of project Panama and available in preview in JAVA 19.\r\n\r\nThis is a simple Java callback function\r\n\r\n    public static byte addFive(byte t) {\r\n        Byte test = (Byte) t;\r\n        return (byte) (Long.valueOf(test) + 5);\r\n    }\r\n\r\nI have a native library function that is called with parameters `addFive` and `(byte) -41`.\r\n\r\n```\r\nuint8_t callback_test(uint8_t (*fn)(uint8_t), uint8_t arg) {\r\n    uint8_t res = fn(arg + 1) * 2;\r\n    return res;\r\n}\r\n```\r\n\r\nI expect `t` to have value `-40`, and this does show in the Intellij debugger. But when you print it, it prints `216` instead. In addition, casting to `Byte` gives an `ArrayIndexOutOfBoundsException`.\r\n\r\nI do realize that the native function is an unsigned int, so the returned value of `216` makes sense. However, a `java byte` should not be allowed that value, so, I expect java to automatically convert it to `-41`. \r\n\r\nIs this behavior expected? \r\n\r\nWhat is the correct way to get the unsigned int from the native code passed to the java function as a byte in the range [-128, 127]?","title":"Callback function&#39;s byte parameter has value out of bounds in project Panama function interface","body":"<p>I'm using the new Foreign function &amp; memory API which is part of project Panama and available in preview in JAVA 19.</p>\n<p>This is a simple Java callback function</p>\n<pre><code>public static byte addFive(byte t) {\n    Byte test = (Byte) t;\n    return (byte) (Long.valueOf(test) + 5);\n}\n</code></pre>\n<p>I have a native library function that is called with parameters <code>addFive</code> and <code>(byte) -41</code>.</p>\n<pre><code>uint8_t callback_test(uint8_t (*fn)(uint8_t), uint8_t arg) {\n    uint8_t res = fn(arg + 1) * 2;\n    return res;\n}\n</code></pre>\n<p>I expect <code>t</code> to have value <code>-40</code>, and this does show in the Intellij debugger. But when you print it, it prints <code>216</code> instead. In addition, casting to <code>Byte</code> gives an <code>ArrayIndexOutOfBoundsException</code>.</p>\n<p>I do realize that the native function is an unsigned int, so the returned value of <code>216</code> makes sense. However, a <code>java byte</code> should not be allowed that value, so, I expect java to automatically convert it to <code>-41</code>.</p>\n<p>Is this behavior expected?</p>\n<p>What is the correct way to get the unsigned int from the native code passed to the java function as a byte in the range [-128, 127]?</p>\n"},{"tags":["java","macos","intellij-idea","download"],"answers":[{"comments":[{"owner":{"account_id":24731384,"reputation":103,"user_id":18619318,"display_name":"user18619318"},"score":1,"creation_date":1652876213,"post_id":71669455,"comment_id":127711836,"body_markdown":"`/Library` is the system wide installation location.  `~/Library` is for you only.","body":"<code>&#47;Library</code> is the system wide installation location.  <code>~&#47;Library</code> is for you only."}],"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1684738637,"creation_date":1648592857,"answer_id":71669455,"question_id":71669393,"body_markdown":"# tl;dr\r\n\r\n&gt;`/Users/your_username_here/Library/Java/JavaVirtualMachines/`\r\n\r\n# Details\r\n\r\nYou can inspect the JDKs known to IntelliJ by choosing *File &gt; Project Structure &gt; Platform Settings &gt; SDKs*.\r\n\r\n[![Screenshot of IntelliJ&#39;s list of known SDKS with inspector for their location][1]][1]\r\n\r\nNotice how the location of the selected JDK is shown in the *JDK home path* field.\r\n\r\nIn this example, the JDK downloaded by IntelliJ was put in:\r\n\r\n```bash\r\n/Users/your_username_here/Library/Java/JavaVirtualMachines/\r\n```\r\n\r\nNote that this location contrasts with the location used by some of the independent JDK installers. In my experience, those tools use the root `/Library` path, rather than in the user’s `~/Library`. That full path would be: `/Library/Java/JavaVirtualMachines`.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/D6aBX.jpg","title":"Where does IntelliJ store the JDKs that it downloads on my behalf?","body":"<h1>tl;dr</h1>\n<blockquote>\n<p><code>/Users/your_username_here/Library/Java/JavaVirtualMachines/</code></p>\n</blockquote>\n<h1>Details</h1>\n<p>You can inspect the JDKs known to IntelliJ by choosing <em>File &gt; Project Structure &gt; Platform Settings &gt; SDKs</em>.</p>\n<p><a href=\"https://i.stack.imgur.com/D6aBX.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/D6aBX.jpg\" alt=\"Screenshot of IntelliJ's list of known SDKS with inspector for their location\" /></a></p>\n<p>Notice how the location of the selected JDK is shown in the <em>JDK home path</em> field.</p>\n<p>In this example, the JDK downloaded by IntelliJ was put in:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>/Users/your_username_here/Library/Java/JavaVirtualMachines/\n</code></pre>\n<p>Note that this location contrasts with the location used by some of the independent JDK installers. In my experience, those tools use the root <code>/Library</code> path, rather than in the user’s <code>~/Library</code>. That full path would be: <code>/Library/Java/JavaVirtualMachines</code>.</p>\n"},{"tags":[],"owner":{"account_id":3278108,"reputation":3291,"user_id":2759473,"accept_rate":41,"display_name":"Tomas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694606642,"creation_date":1694606642,"answer_id":77096917,"question_id":71669393,"body_markdown":"It&#39;s changing form version to version, but can be easily inspected via:\r\n\r\nFile &gt; Project Structure &gt; Platform Settings | SDKs\r\n\r\nnow it&#39;s in `.jdks` subfolder in 2023 :)","title":"Where does IntelliJ store the JDKs that it downloads on my behalf?","body":"<p>It's changing form version to version, but can be easily inspected via:</p>\n<p>File &gt; Project Structure &gt; Platform Settings | SDKs</p>\n<p>now it's in <code>.jdks</code> subfolder in 2023 :)</p>\n"}],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4969,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":71669455,"answer_count":2,"score":2,"last_activity_date":1694617318,"creation_date":1648592282,"question_id":71669393,"body_markdown":"Recent versions of IntelliJ can download a JDK for the convenience of the user. \r\n\r\nHowever, those downloaded JDKs are not appearing in the canonical place, at least not on my Mac:\r\n\r\n```bash\r\n/Library/Java/JavaVirtualMachines \r\n```\r\n\r\nSo where are the downloaded JDKs being stored?\r\n\r\nI would like to inspect them, and possibly delete some.\r\n\r\nI have found this documentation page, [*SDKs*](https://www.jetbrains.com/help/idea/sdk.html), but did not see the storage location mentioned there.\r\n","title":"Where does IntelliJ store the JDKs that it downloads on my behalf?","body":"<p>Recent versions of IntelliJ can download a JDK for the convenience of the user.</p>\n<p>However, those downloaded JDKs are not appearing in the canonical place, at least not on my Mac:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>/Library/Java/JavaVirtualMachines \n</code></pre>\n<p>So where are the downloaded JDKs being stored?</p>\n<p>I would like to inspect them, and possibly delete some.</p>\n<p>I have found this documentation page, <a href=\"https://www.jetbrains.com/help/idea/sdk.html\" rel=\"nofollow noreferrer\"><em>SDKs</em></a>, but did not see the storage location mentioned there.</p>\n"},{"tags":["java","maven","maven-dependency-plugin"],"comments":[{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1694615745,"post_id":77097989,"comment_id":135915086,"body_markdown":"If using `compile` or `package` works fine.. What is exactly the issue to only run the life cycle phase `process-sources`? Can you give a real example, show the configuration? Maven version etc.","body":"If using <code>compile</code> or <code>package</code> works fine.. What is exactly the issue to only run the life cycle phase <code>process-sources</code>? Can you give a real example, show the configuration? Maven version etc."},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1694615781,"post_id":77097989,"comment_id":135915103,"body_markdown":"Have you read https://stackoverflow.com/questions/16205778/what-are-maven-goals-and-phases-and-what-is-their-difference?","body":"Have you read <a href=\"https://stackoverflow.com/questions/16205778/what-are-maven-goals-and-phases-and-what-is-their-difference\" title=\"what are maven goals and phases and what is their difference\">stackoverflow.com/questions/16205778/&hellip;</a>?"},{"owner":{"display_name":"user3367378"},"score":0,"creation_date":1694616347,"post_id":77097989,"comment_id":135915241,"body_markdown":"@khmarbaise I can&#39;t put much code up due to it being proprietary... I&#39;ll add the error output to the question, with some redactions though.","body":"@khmarbaise I can&#39;t put much code up due to it being proprietary... I&#39;ll add the error output to the question, with some redactions though."},{"owner":{"display_name":"user3367378"},"score":0,"creation_date":1694616678,"post_id":77097989,"comment_id":135915311,"body_markdown":"@Kayaman yes, I saw that, and it states what I thought would be the case, where if goal Z is executed then Goals X and Y (preceding) would be included.","body":"@Kayaman yes, I saw that, and it states what I thought would be the case, where if goal Z is executed then Goals X and Y (preceding) would be included."},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1694617325,"post_id":77097989,"comment_id":135915464,"body_markdown":"So you read it, but you did not understand it &quot;If you specify a phase then Maven will run all phases up to the phase you specified in order (e.g. if you specify package it will first run through the compile phase and then the test phase and finally the package phase) and for each phase it will run all goals attached to that phase.&quot;","body":"So you read it, but you did not understand it &quot;If you specify a phase then Maven will run all phases up to the phase you specified in order (e.g. if you specify package it will first run through the compile phase and then the test phase and finally the package phase) and for each phase it will run all goals attached to that phase.&quot;"},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1694617412,"post_id":77097989,"comment_id":135915483,"body_markdown":"&quot;If you specify a goal when you execute Maven then it will run that goal and only that goal.&quot;.","body":"&quot;If you specify a goal when you execute Maven then it will run that goal and only that goal.&quot;."},{"owner":{"display_name":"user3367378"},"score":0,"creation_date":1694617428,"post_id":77097989,"comment_id":135915487,"body_markdown":"No I get it, and that&#39;s exactly what I&#39;m trying to do, run only the phases up-to-and-including &#39;process-sources&#39; by running `mvn process-sources`\n\nAre you saying that this should or should not work?","body":"No I get it, and that&#39;s exactly what I&#39;m trying to do, run only the phases up-to-and-including &#39;process-sources&#39; by running <code>mvn process-sources</code>  Are you saying that this should or should not work?"},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1694617515,"post_id":77097989,"comment_id":135915512,"body_markdown":"I quote you &quot;How do I execute only the process-sources phase&quot;, so is it only or up to? What are you expecting to run in the process-sources phase anyway?","body":"I quote you &quot;How do I execute only the process-sources phase&quot;, so is it only or up to? What are you expecting to run in the process-sources phase anyway?"},{"owner":{"display_name":"user3367378"},"score":0,"creation_date":1694617632,"post_id":77097989,"comment_id":135915535,"body_markdown":"Your point? This is getting aggressive dude - should `mvn process-sources` work or not when `mvn compile` does?","body":"Your point? This is getting aggressive dude - should <code>mvn process-sources</code> work or not when <code>mvn compile</code> does?"},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1694618551,"post_id":77097989,"comment_id":135915745,"body_markdown":"That error message `was not found in https://artifactory-na.unnamedcorp.com:443/artifactor` shows simply that artifacts are not there... and based on that it is SNAPSHOT version which might be cleaned up after a time... without more information it&#39;s hard to even make an educated gues...Also the question would be is this a single module build or a multi module setup?","body":"That error message <code>was not found in https:&#47;&#47;artifactory-na.unnamedcorp.com:443&#47;artifactor</code> shows simply that artifacts are not there... and based on that it is SNAPSHOT version which might be cleaned up after a time... without more information it&#39;s hard to even make an educated gues...Also the question would be is this a single module build or a multi module setup?"}],"owner":{"display_name":"user3367378"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694616585,"creation_date":1694614942,"question_id":77097989,"body_markdown":"So according this this: https://maven.apache.org/ref/3.9.4/maven-core/lifecycles.html\r\n\r\nI should be able to run something like: `mvn process-sources`\r\n\r\nBut it fails, for being unable to resolve an artifact from a module in this project...\r\n\r\nAnd when I run: `mvn clean compile` OR `mvn clean package`, etc, they all work.\r\n\r\nAm I missing something with Maven?\r\n\r\nHow do I **execute only the process-sources phase** without building the whole maven project?\r\n\r\nEdit/Addition:\r\n\r\nHere is the error output: `Failed to execute goal on project alarmsandevents-configuration: Could not resolve dependencies for project com.unnamedcorp.alarmsandevents:alarmsandevents-configuration:jar:23.02.01.1-SNAPSHOT: com.unnamedcorp.alarmsandevents:alarmsandevents-common:jar:23.02.01.1-SNAPSHOT was not found in https://artifactory-na.unnamedcorp.com:443/artifactory/embeddedservices-maven-stable-virtual during a previous attempt.`\r\n\r\nWhat I don&#39;t understand is why it&#39;s looking for an artifact that hasn&#39;t been built yet when I run `mvn process-sources` but when I run `mvn compile` it doesn&#39;t, even though that is a later phase. I thought maven runs all preceeding phases when running one, which should yield the same error.","title":"How do I execute only the process-sources phase without building the whole maven project?","body":"<p>So according this this: <a href=\"https://maven.apache.org/ref/3.9.4/maven-core/lifecycles.html\" rel=\"nofollow noreferrer\">https://maven.apache.org/ref/3.9.4/maven-core/lifecycles.html</a></p>\n<p>I should be able to run something like: <code>mvn process-sources</code></p>\n<p>But it fails, for being unable to resolve an artifact from a module in this project...</p>\n<p>And when I run: <code>mvn clean compile</code> OR <code>mvn clean package</code>, etc, they all work.</p>\n<p>Am I missing something with Maven?</p>\n<p>How do I <strong>execute only the process-sources phase</strong> without building the whole maven project?</p>\n<p>Edit/Addition:</p>\n<p>Here is the error output: <code>Failed to execute goal on project alarmsandevents-configuration: Could not resolve dependencies for project com.unnamedcorp.alarmsandevents:alarmsandevents-configuration:jar:23.02.01.1-SNAPSHOT: com.unnamedcorp.alarmsandevents:alarmsandevents-common:jar:23.02.01.1-SNAPSHOT was not found in https://artifactory-na.unnamedcorp.com:443/artifactory/embeddedservices-maven-stable-virtual during a previous attempt.</code></p>\n<p>What I don't understand is why it's looking for an artifact that hasn't been built yet when I run <code>mvn process-sources</code> but when I run <code>mvn compile</code> it doesn't, even though that is a later phase. I thought maven runs all preceeding phases when running one, which should yield the same error.</p>\n"},{"tags":["java","postgresql","scala","jdbc"],"comments":[{"owner":{"account_id":7848,"reputation":108920,"user_id":13792,"accept_rate":100,"display_name":"ColinD"},"score":7,"creation_date":1296836310,"post_id":4900200,"comment_id":5453970,"body_markdown":"Shouldn&#39;t any escaping be handled for you by using a `PreparedStatement` and setting values in it? A batch update won&#39;t work for inserting many rows?","body":"Shouldn&#39;t any escaping be handled for you by using a <code>PreparedStatement</code> and setting values in it? A batch update won&#39;t work for inserting many rows?"},{"owner":{"display_name":"user330315"},"score":0,"creation_date":1296836793,"post_id":4900200,"comment_id":5454074,"body_markdown":"What exactly do you mean with: *No function to escape values for consuming*","body":"What exactly do you mean with: <i>No function to escape values for consuming</i>"},{"owner":{"account_id":61375,"reputation":6905,"user_id":182954,"accept_rate":71,"display_name":"andreypopp"},"score":0,"creation_date":1296839172,"post_id":4900200,"comment_id":5454666,"body_markdown":"@ColinD It&#39;s ok for homogeneous statements, but I&#39;m also need to execute heterogeneous statements in batch and Statement.addBatch can accepts only SQL statements as String, not as another statement.","body":"@ColinD It&#39;s ok for homogeneous statements, but I&#39;m also need to execute heterogeneous statements in batch and Statement.addBatch can accepts only SQL statements as String, not as another statement."},{"owner":{"account_id":61375,"reputation":6905,"user_id":182954,"accept_rate":71,"display_name":"andreypopp"},"score":0,"creation_date":1296839315,"post_id":4900200,"comment_id":5454700,"body_markdown":"@a_horse_with_no_name Escape &quot;I&#39;m&quot; into E&#39;I\\&#39;m&#39;. See above comment for explaining why I need such functionality.","body":"@a_horse_with_no_name Escape &quot;I&#39;m&quot; into E&#39;I\\&#39;m&#39;. See above comment for explaining why I need such functionality."},{"owner":{"account_id":7848,"reputation":108920,"user_id":13792,"accept_rate":100,"display_name":"ColinD"},"score":1,"creation_date":1296840576,"post_id":4900200,"comment_id":5454958,"body_markdown":"@andreypopp: I honestly don&#39;t know what you&#39;re trying to do as far as the batch thing, and as far as string escaping... `PreparedStatement.setString` should handle any escaping for you. That&#39;s the point.","body":"@andreypopp: I honestly don&#39;t know what you&#39;re trying to do as far as the batch thing, and as far as string escaping... <code>PreparedStatement.setString</code> should handle any escaping for you. That&#39;s the point."},{"owner":{"display_name":"user330315"},"score":1,"creation_date":1296841615,"post_id":4900200,"comment_id":5455202,"body_markdown":"@andreypopp: Escaping single quotes is precisely what a PreparedStatement will do for you. Regarding addBatch(): I don&#39;t understand what you mean with &quot;heterogeneous statements&quot; if you have different statements anyway (e.g. different tables) you will not be able to take advantage of PostgreSQL&#39;s multi row inserts as well.","body":"@andreypopp: Escaping single quotes is precisely what a PreparedStatement will do for you. Regarding addBatch(): I don&#39;t understand what you mean with &quot;heterogeneous statements&quot; if you have different statements anyway (e.g. different tables) you will not be able to take advantage of PostgreSQL&#39;s multi row inserts as well."}],"answers":[{"comments":[{"owner":{"account_id":61375,"reputation":6905,"user_id":182954,"accept_rate":71,"display_name":"andreypopp"},"score":0,"creation_date":1296839380,"post_id":4900343,"comment_id":5454715,"body_markdown":"But, I&#39;m also need to work with UUID, that&#39;s why I ask about existence of other PostgreSQL drivers.","body":"But, I&#39;m also need to work with UUID, that&#39;s why I ask about existence of other PostgreSQL drivers."}],"tags":[],"owner":{"display_name":"user330315"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1405933801,"creation_date":1296836772,"answer_id":4900343,"question_id":4900200,"body_markdown":"The driver supports batched statements to speed up bulk inserts. \r\n\r\nAnd using batched statements is a lot more portable than using proprietary INSERT syntax (and as far as I can tell, there is no big different between a multi-row insert and batched inserts)\r\n\r\nCheck out PreparedStatement.addBatch() \r\n\r\nThe reason why UUID is not supported is probably that UUID is not part of the Postgres core, just a contrib module. \r\n\r\n**Edit**&lt;br/&gt;\r\nRegarding the *execute heterogeneous statements*\r\n\r\nThe Postgres driver does support different types of statements in the a batch. \r\n\r\nThe following works fine:\r\n\r\n    Connection con = DriverManager.getConnection(&quot;jdbc:postgresql://localhost/postgres&quot;, &quot;foo&quot;, &quot;bar&quot;);\r\n    con.setAutoCommit(false);\r\n    Statement stmt = con.createStatement();\r\n    stmt.addBatch(&quot;create table foo (id integer, data varchar(100))&quot;);\r\n    stmt.addBatch(&quot;insert into foo values (1, &#39;one&#39;)&quot;);\r\n    stmt.addBatch(&quot;insert into foo values (2, &#39;two&#39;)&quot;);\r\n    stmt.addBatch(&quot;update foo set data = &#39;one_other&#39; where id = 1&quot;);\r\n    stmt.executeBatch();\r\n    con.commit();\r\n\r\nAlthough you do lose the automatic escaping that PreparedStatement gives you.\r\n\r\n\r\n\r\n","title":"What are alternatives to JDBC driver for access PostgreSQL database","body":"<p>The driver supports batched statements to speed up bulk inserts. </p>\n\n<p>And using batched statements is a lot more portable than using proprietary INSERT syntax (and as far as I can tell, there is no big different between a multi-row insert and batched inserts)</p>\n\n<p>Check out PreparedStatement.addBatch() </p>\n\n<p>The reason why UUID is not supported is probably that UUID is not part of the Postgres core, just a contrib module. </p>\n\n<p><strong>Edit</strong><br/>\nRegarding the <em>execute heterogeneous statements</em></p>\n\n<p>The Postgres driver does support different types of statements in the a batch. </p>\n\n<p>The following works fine:</p>\n\n<pre><code>Connection con = DriverManager.getConnection(\"jdbc:postgresql://localhost/postgres\", \"foo\", \"bar\");\ncon.setAutoCommit(false);\nStatement stmt = con.createStatement();\nstmt.addBatch(\"create table foo (id integer, data varchar(100))\");\nstmt.addBatch(\"insert into foo values (1, 'one')\");\nstmt.addBatch(\"insert into foo values (2, 'two')\");\nstmt.addBatch(\"update foo set data = 'one_other' where id = 1\");\nstmt.executeBatch();\ncon.commit();\n</code></pre>\n\n<p>Although you do lose the automatic escaping that PreparedStatement gives you.</p>\n"},{"comments":[{"owner":{"account_id":61375,"reputation":6905,"user_id":182954,"accept_rate":71,"display_name":"andreypopp"},"score":0,"creation_date":1296839702,"post_id":4900419,"comment_id":5454787,"body_markdown":"Thanks for providing example for registering own types handles, but other issues are still unresolved for me.","body":"Thanks for providing example for registering own types handles, but other issues are still unresolved for me."}],"tags":[],"owner":{"account_id":28947,"reputation":90769,"user_id":77779,"accept_rate":89,"display_name":"Yishai"},"comment_count":1,"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1536394906,"creation_date":1296837157,"answer_id":4900419,"question_id":4900200,"body_markdown":"Some of this seems to be (unless I&#39;m not understanding) user error in using JDBC. JDBC is a pretty ugly API, so never ask if you can do it elegantly, just ask if you can do it at all.\r\n\r\nEscaping and inserting multiple rows should be handled, as @ColinD and @a_horse pointed out, with Prepared statements and batch operations. Under the hood, I would expect a good JDBC implementation to do the things you want (I am not familiar with PostgreSQL&#39;s implementation).\r\n\r\nRegarding UUIDs, [here][1] is a solution:\r\n\r\n&gt; All that PostgreSQL can do is convert string literals to uuid.\r\n&gt; \r\n&gt; You can make use of this by using the data type\r\n&gt; org.postgresql.util.PGobject, which is a general class used to\r\n&gt; represent data types unknown to JDBC.\r\n&gt; \r\n&gt; You can define a helper class:\r\n&gt; \r\n&gt;     public class UUID extends org.postgresql.util.PGobject {\r\n&gt;         public static final long serialVersionUID = 668353936136517917L;\r\n&gt;         public UUID(String s) throws java.sql.SQLException {\r\n&gt;             super();\r\n&gt;             this.setType(&quot;uuid&quot;);\r\n&gt;             this.setValue(s);\r\n&gt;         }\r\n&gt;     }\r\n&gt; \r\n&gt; Then the following piece of code will succeed:\r\n&gt; \r\n&gt;      java.sql.PreparedStatement stmt =\r\n&gt;      conn.prepareStatement(&quot;UPDATE t SET uid = ? WHERE id = 1&quot;);\r\n&gt;      stmt.setObject(1, new UUID(&quot;a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11&quot;));\r\n&gt;      stmt.executeUpdate();\r\n\r\n\r\n  [1]: http://dbaspot.com/forums/postgresql/362027-pg-8-3-rc1-uuid-column-jdbc-preparedstatement-column-type.html","title":"What are alternatives to JDBC driver for access PostgreSQL database","body":"<p>Some of this seems to be (unless I'm not understanding) user error in using JDBC. JDBC is a pretty ugly API, so never ask if you can do it elegantly, just ask if you can do it at all.</p>\n\n<p>Escaping and inserting multiple rows should be handled, as @ColinD and @a_horse pointed out, with Prepared statements and batch operations. Under the hood, I would expect a good JDBC implementation to do the things you want (I am not familiar with PostgreSQL's implementation).</p>\n\n<p>Regarding UUIDs, <a href=\"http://dbaspot.com/forums/postgresql/362027-pg-8-3-rc1-uuid-column-jdbc-preparedstatement-column-type.html\" rel=\"nofollow noreferrer\">here</a> is a solution:</p>\n\n<blockquote>\n  <p>All that PostgreSQL can do is convert string literals to uuid.</p>\n  \n  <p>You can make use of this by using the data type\n  org.postgresql.util.PGobject, which is a general class used to\n  represent data types unknown to JDBC.</p>\n  \n  <p>You can define a helper class:</p>\n\n<pre><code>public class UUID extends org.postgresql.util.PGobject {\n    public static final long serialVersionUID = 668353936136517917L;\n    public UUID(String s) throws java.sql.SQLException {\n        super();\n        this.setType(\"uuid\");\n        this.setValue(s);\n    }\n}\n</code></pre>\n  \n  <p>Then the following piece of code will succeed:</p>\n\n<pre><code> java.sql.PreparedStatement stmt =\n conn.prepareStatement(\"UPDATE t SET uid = ? WHERE id = 1\");\n stmt.setObject(1, new UUID(\"a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11\"));\n stmt.executeUpdate();\n</code></pre>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":35998,"reputation":3107,"user_id":102375,"accept_rate":53,"display_name":"nilskp"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1304083602,"creation_date":1304083602,"answer_id":5832659,"question_id":4900200,"body_markdown":"Take a look at [O/R Broker][1], which is a Scala JDBC-based library for relational database access.\r\n\r\n\r\n  [1]: http://www.orbroker.org","title":"What are alternatives to JDBC driver for access PostgreSQL database","body":"<p>Take a look at <a href=\"http://www.orbroker.org\" rel=\"nofollow\">O/R Broker</a>, which is a Scala JDBC-based library for relational database access.</p>\n"},{"comments":[{"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"score":0,"creation_date":1357376139,"post_id":9378534,"comment_id":19634108,"body_markdown":"I&#39;ve noticed that the Postgres JDBC driver seems to support `java.util.UUID` through `getObject()` and `setObject()` methods. Is this documented somewhere?","body":"I&#39;ve noticed that the Postgres JDBC driver seems to support <code>java.util.UUID</code> through <code>getObject()</code> and <code>setObject()</code> methods. Is this documented somewhere?"}],"tags":[],"owner":{"account_id":41747,"reputation":4762,"user_id":121416,"accept_rate":96,"display_name":"Brian Beckett"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1536397950,"creation_date":1329831315,"answer_id":9378534,"question_id":4900200,"body_markdown":"I realise this doesn&#39;t answer your entire question, but hopefully it will be useful all the same.\r\n\r\nI&#39;m using Java 6 and Postgres 8.4.  The driver I&#39;m using is in my Maven POM file as:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;postgresql&lt;/groupId&gt;\r\n        &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n        &lt;version&gt;8.4-702.jdbc4&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nI&#39;m using `PreparedStatement.getObject()` and `PreparedStatement.setObject()` with Java&#39;s `java.util.UUID` class to retrieve and store UUIDs.\r\n\r\nFor example:\r\n\r\n    pstm.setObject(1, guid); //where pstm is a PreparedStatement and guid is a UUID\r\n\r\nand:\r\n\r\n    //where rs is a ResultSet\r\n    UUID myGuid = (UUID) rs.getObject(&quot;my_uuid_column_name&quot;); \r\n\r\nWorks fine.\r\n\r\nWith newer drivers, the following is alsow supported\r\n\r\n    UUID myGuid = rs.getObject(&quot;my_uuid_column_name&quot;, UUID.class); \r\n\r\n","title":"What are alternatives to JDBC driver for access PostgreSQL database","body":"<p>I realise this doesn't answer your entire question, but hopefully it will be useful all the same.</p>\n\n<p>I'm using Java 6 and Postgres 8.4.  The driver I'm using is in my Maven POM file as:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;postgresql&lt;/groupId&gt;\n    &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n    &lt;version&gt;8.4-702.jdbc4&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>I'm using <code>PreparedStatement.getObject()</code> and <code>PreparedStatement.setObject()</code> with Java's <code>java.util.UUID</code> class to retrieve and store UUIDs.</p>\n\n<p>For example:</p>\n\n<pre><code>pstm.setObject(1, guid); //where pstm is a PreparedStatement and guid is a UUID\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>//where rs is a ResultSet\nUUID myGuid = (UUID) rs.getObject(\"my_uuid_column_name\"); \n</code></pre>\n\n<p>Works fine.</p>\n\n<p>With newer drivers, the following is alsow supported</p>\n\n<pre><code>UUID myGuid = rs.getObject(\"my_uuid_column_name\", UUID.class); \n</code></pre>\n"},{"comments":[{"owner":{"account_id":136785,"reputation":663,"user_id":340535,"accept_rate":22,"display_name":"user340535"},"score":0,"creation_date":1375271967,"post_id":17357283,"comment_id":26266594,"body_markdown":"That&#39;s great, but it doesn&#39;t always seem to work: http://stackoverflow.com/questions/17969431/postgres-uuid-jdbc-not-working","body":"That&#39;s great, but it doesn&#39;t always seem to work: <a href=\"http://stackoverflow.com/questions/17969431/postgres-uuid-jdbc-not-working\" title=\"postgres uuid jdbc not working\">stackoverflow.com/questions/17969431/&hellip;</a>"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1383472579,"post_id":17357283,"comment_id":29351020,"body_markdown":"@user340535 Unfortunately, that question you link to is useless. No source code, detail, or context is provided, so no conclusion can be drawn. On the other hand, you can run my source code posted in this answer and posted in my linked blog post. It has run consistently without problems for me.","body":"@user340535 Unfortunately, that question you link to is useless. No source code, detail, or context is provided, so no conclusion can be drawn. On the other hand, you can run my source code posted in this answer and posted in my linked blog post. It has run consistently without problems for me."}],"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1536394949,"creation_date":1372394360,"answer_id":17357283,"question_id":4900200,"body_markdown":"&gt; No support for PostgreSQL-ish data structures such as UUIDs.\r\n\r\nOn the contrary, the [current JDBC driver][1] (9.2-1002 JDBC 4) for [Postgres][2] 9.x does indeed support [UUID][3] via the [setObject][4] and [getObject][5] commands. You cannot get any more direct or simpler than that (in any database, Postgres or any other) because JDBC does not recognize UUID as a data type.\r\n\r\nAs far as I can tell, there is no need to create a helper class as suggest in another answer by Yishai.\r\n\r\nNo need to do any casting or go through strings.\r\n\r\n![enter image description here][6]\r\n\r\nSee [my blog post][7] for more discussion and code example.\r\n\r\nCode example excerpt:\r\n\r\n    java.util.UUID uuid = java.util.UUID.randomUUID();\r\n    …\r\n    preparedStatement.setObject( nthPlaceholder++, uuid ); // Pass UUID to database.\r\n\r\n\r\n  [1]: http://jdbc.postgresql.org/\r\n  [2]: http://www.postgresql.org/\r\n  [3]: http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html\r\n  [4]: http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html#setObject%28int,%20java.lang.Object%29\r\n  [5]: http://docs.oracle.com/javase/7/docs/api/java/sql/ResultSet.html#getObject%28int%29\r\n  [6]: http://i.stack.imgur.com/ssrUj.png\r\n  [7]: http://crafted-software.blogspot.com/2013/03/uuid-values-from-jdbc-to-postgres.html","title":"What are alternatives to JDBC driver for access PostgreSQL database","body":"<blockquote>\n  <p>No support for PostgreSQL-ish data structures such as UUIDs.</p>\n</blockquote>\n\n<p>On the contrary, the <a href=\"http://jdbc.postgresql.org/\" rel=\"nofollow noreferrer\">current JDBC driver</a> (9.2-1002 JDBC 4) for <a href=\"http://www.postgresql.org/\" rel=\"nofollow noreferrer\">Postgres</a> 9.x does indeed support <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html\" rel=\"nofollow noreferrer\">UUID</a> via the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html#setObject%28int,%20java.lang.Object%29\" rel=\"nofollow noreferrer\">setObject</a> and <a href=\"http://docs.oracle.com/javase/7/docs/api/java/sql/ResultSet.html#getObject%28int%29\" rel=\"nofollow noreferrer\">getObject</a> commands. You cannot get any more direct or simpler than that (in any database, Postgres or any other) because JDBC does not recognize UUID as a data type.</p>\n\n<p>As far as I can tell, there is no need to create a helper class as suggest in another answer by Yishai.</p>\n\n<p>No need to do any casting or go through strings.</p>\n\n<p><img src=\"https://i.stack.imgur.com/ssrUj.png\" alt=\"enter image description here\"></p>\n\n<p>See <a href=\"http://crafted-software.blogspot.com/2013/03/uuid-values-from-jdbc-to-postgres.html\" rel=\"nofollow noreferrer\">my blog post</a> for more discussion and code example.</p>\n\n<p>Code example excerpt:</p>\n\n<pre><code>java.util.UUID uuid = java.util.UUID.randomUUID();\n…\npreparedStatement.setObject( nthPlaceholder++, uuid ); // Pass UUID to database.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14636270,"reputation":133,"user_id":10570318,"display_name":"BeatEngine"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694616560,"creation_date":1694616560,"answer_id":77098194,"question_id":4900200,"body_markdown":"Here is some experiment with a self implemented (experimental) minimal client library: https://github.com/BeatEngine/postgresql-client-minimal\r\n(I try to work with this on Android API level &lt; 24)","title":"What are alternatives to JDBC driver for access PostgreSQL database","body":"<p>Here is some experiment with a self implemented (experimental) minimal client library: <a href=\"https://github.com/BeatEngine/postgresql-client-minimal\" rel=\"nofollow noreferrer\">https://github.com/BeatEngine/postgresql-client-minimal</a>\n(I try to work with this on Android API level &lt; 24)</p>\n"}],"owner":{"account_id":61375,"reputation":6905,"user_id":182954,"accept_rate":71,"display_name":"andreypopp"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5426,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":4900419,"answer_count":6,"score":7,"last_activity_date":1694616560,"creation_date":1296836013,"question_id":4900200,"body_markdown":"I&#39;m using official JDBC driver for PostgreSQL, but I&#39;m stuck with the following issues:\r\n\r\n  * No support for PostgreSQL-ish data structures such as UUIDs.\r\n  * Common JDBC weirdness, such as:\r\n     * No function to escape values for consuming by PostgreSQL.\r\n     * Limited support for executing heterogeneous statements in batch.\r\n     * No rewriting of multiple insert statements into single insert statement when inserting many rows in one table.\r\n\r\nSo, the question — is there any PostgreSQL database driver which can leverage full power of PostgreSQL without much boilerplate? I&#39;m also use Scala language for development, so if driver is designed specifically for Scala it would be so much awesome awesome.","title":"What are alternatives to JDBC driver for access PostgreSQL database","body":"<p>I'm using official JDBC driver for PostgreSQL, but I'm stuck with the following issues:</p>\n\n<ul>\n<li>No support for PostgreSQL-ish data structures such as UUIDs.</li>\n<li>Common JDBC weirdness, such as:\n<ul>\n<li>No function to escape values for consuming by PostgreSQL.</li>\n<li>Limited support for executing heterogeneous statements in batch.</li>\n<li>No rewriting of multiple insert statements into single insert statement when inserting many rows in one table.</li>\n</ul></li>\n</ul>\n\n<p>So, the question — is there any PostgreSQL database driver which can leverage full power of PostgreSQL without much boilerplate? I'm also use Scala language for development, so if driver is designed specifically for Scala it would be so much awesome awesome.</p>\n"},{"tags":["java","android","bitmap","image-cropper"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1694598812,"post_id":77094649,"comment_id":135911288,"body_markdown":"`new CropImageContract()` What would be that?","body":"<code>new CropImageContract()</code> What would be that?"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1694598881,"post_id":77094649,"comment_id":135911304,"body_markdown":"`Android image cropper ...` ???","body":"<code>Android image cropper ...</code> ???"},{"owner":{"account_id":2531294,"reputation":97,"user_id":11277353,"display_name":"Shashi Ranjan"},"score":0,"creation_date":1694616326,"post_id":77094649,"comment_id":135915236,"body_markdown":"Yes Android image cropper.","body":"Yes Android image cropper."}],"owner":{"account_id":2531294,"reputation":97,"user_id":11277353,"display_name":"Shashi Ranjan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694616398,"creation_date":1694587693,"question_id":77094649,"body_markdown":"I am trying to access both cropped image as well as the original image. Using `registerForActivityResult` I am able to get the cropped image. I also want to access the original image. I am using only camera as `cropImageOptions`. I tried using method `result.getOriginalBitmap()` but it is not returning any bitmap. Any idea how can I access the original image after cropping is done?\r\n\r\nMy Java code of android-image-cropper:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    ActivityResultLauncher&lt;CropImageContractOptions&gt; cropImage = registerForActivityResult(new CropImageContract(), result -&gt; {\r\n            if (result.isSuccessful()) {\r\n                originalBitmap = result.getOriginalBitmap();\r\n                croppedBitmap = BitmapFactory.decodeFile(result.getUriFilePath(getApplicationContext(), true));\r\n                croppedImageView.setImageBitmap(croppedBitmap);\r\n                originalImageView.setImageBitmap(originalBitmap);\r\n            }\r\n        });\r\n\r\n        private void launchCropImage() {\r\n            CropImageOptions cropImageOptions = new CropImageOptions();\r\n            cropImageOptions.imageSourceIncludeGallery = false;\r\n            cropImageOptions.imageSourceIncludeCamera = true;\r\n            CropImageContractOptions cropImageContractOptions = new CropImageContractOptions(null, cropImageOptions);\r\n            cropImage.launch(cropImageContractOptions);\r\n        }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"Android image cropper not returning original bitmap","body":"<p>I am trying to access both cropped image as well as the original image. Using <code>registerForActivityResult</code> I am able to get the cropped image. I also want to access the original image. I am using only camera as <code>cropImageOptions</code>. I tried using method <code>result.getOriginalBitmap()</code> but it is not returning any bitmap. Any idea how can I access the original image after cropping is done?</p>\n<p>My Java code of android-image-cropper:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>ActivityResultLauncher&lt;CropImageContractOptions&gt; cropImage = registerForActivityResult(new CropImageContract(), result -&gt; {\n        if (result.isSuccessful()) {\n            originalBitmap = result.getOriginalBitmap();\n            croppedBitmap = BitmapFactory.decodeFile(result.getUriFilePath(getApplicationContext(), true));\n            croppedImageView.setImageBitmap(croppedBitmap);\n            originalImageView.setImageBitmap(originalBitmap);\n        }\n    });\n\n    private void launchCropImage() {\n        CropImageOptions cropImageOptions = new CropImageOptions();\n        cropImageOptions.imageSourceIncludeGallery = false;\n        cropImageOptions.imageSourceIncludeCamera = true;\n        CropImageContractOptions cropImageContractOptions = new CropImageContractOptions(null, cropImageOptions);\n        cropImage.launch(cropImageContractOptions);\n    }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":["java","spring","azure-cosmosdb","azure-cosmosdb-sqlapi"],"answers":[{"tags":[],"owner":{"account_id":14879218,"reputation":383,"user_id":10744429,"display_name":"WLefever"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694594416,"creation_date":1694594416,"answer_id":77095433,"question_id":77095031,"body_markdown":"From the [documentation](https://javadoc.io/doc/com.microsoft.azure/spring-data-cosmosdb/2.3.0/com/microsoft/azure/spring/data/cosmosdb/repository/ReactiveCosmosRepository.html) I understand that `ReactiveCosmosRepository` inherits from `ReactiveCrudRepository` which has a `count` method that returns `Mono&lt;Long&gt;`. It&#39;s likely that `getMaxIntID()` and `test()` will work using that same return type `Mono&lt;Long&gt;`.","title":"How can I get numerical data from an sql query in Java Spring?","body":"<p>From the <a href=\"https://javadoc.io/doc/com.microsoft.azure/spring-data-cosmosdb/2.3.0/com/microsoft/azure/spring/data/cosmosdb/repository/ReactiveCosmosRepository.html\" rel=\"nofollow noreferrer\">documentation</a> I understand that <code>ReactiveCosmosRepository</code> inherits from <code>ReactiveCrudRepository</code> which has a <code>count</code> method that returns <code>Mono&lt;Long&gt;</code>. It's likely that <code>getMaxIntID()</code> and <code>test()</code> will work using that same return type <code>Mono&lt;Long&gt;</code>.</p>\n"}],"owner":{"account_id":16859442,"reputation":126,"user_id":12190586,"display_name":"Kronos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694616262,"creation_date":1694591086,"question_id":77095031,"body_markdown":"Currently my repo class looks like this:\r\n    \r\n\r\n    @Repository\r\n    public interface RepoCosmos extends ReactiveCosmosRepository&lt;MyClass, String&gt; {\r\n    \r\n        @Query(&quot;SELECT * FROM c WHERE c.Foo = @Foo&quot;)\r\n        Mono&lt;MyClass&gt; get(@Param(&quot;Foo&quot;) String Foo);\r\n    \r\n        @Query(&quot;SELECT VALUE MAX(c.intID) FROM c WHERE NOT c.condition&quot;)\r\n        Mono&lt;?&gt; getMaxIntID();\r\n    \r\n        @Query(&quot;SELECT VALUE COUNT(1) FROM c&quot;)\r\n        Mono&lt;?&gt; test();\r\n       }\r\n\r\nThe top query works fine. Neither of the bottom two work however. Both return an error mono so that running:\r\n\r\n    Mono&lt;?&gt; b = RepoCosmos.getMaxIntID();\r\n    b.block();\r\n\r\ncauses an exception:\r\n\r\n    Error starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.\r\n    2023-09-13 07:37:45.672 ERROR 19908 --- [           main] o.s.boot.SpringApplication               : Application run failed\r\n    \r\n    java.lang.IllegalStateException: Failed to execute ApplicationRunner\r\n            at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:785) ~[spring-boot-2.5.6.jar:2.5.6]\r\n            at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772) ~[spring-boot-2.5.6.jar:2.5.6]\r\n            at org.springframework.boot.SpringApplication.run(SpringApplication.java:345) ~[spring-boot-2.5.6.jar:2.5.6]\r\n            at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343) ~[spring-boot-2.5.6.jar:2.5.6]\r\n            at org.springframework.boot.SpringApplication.run(SpringApplication.java:1332) ~[spring-boot-2.5.6.jar:2.5.6]\r\n            at com.careerswales.urlservice.UrlApplication.main(UrlApplication.java:13) ~[main/:na]\r\n    Caused by: java.lang.IllegalArgumentException: domain should contain @Id field or field named id\r\n            at com.azure.spring.data.cosmos.repository.support.CosmosEntityInformation.getIdField(CosmosEntityInformation.java:317) ~[azure-spring-data-cosmos-3.17.0.jar:3.17.0]\r\n            Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: \r\n    Assembly trace from producer [reactor.core.publisher.FluxMapFuseable] :\r\n            reactor.core.publisher.Flux.map(Flux.java:6273)\r\n            com.azure.spring.data.cosmos.core.ReactiveCosmosTemplate.runQuery(ReactiveCosmosTemplate.java:660)\r\n    Error has been observed at the following site(s):\r\n            *________Flux.map ⇢ at com.azure.spring.data.cosmos.core.ReactiveCosmosTemplate.runQuery(ReactiveCosmosTemplate.java:660)\r\n            *__Flux.usingWhen ⇢ at org.springframework.data.repository.core.support.RepositoryMethodInvoker$ReactiveInvocationListenerDecorator.decorate(RepositoryMethodInvoker.java:242)\r\n            |_      Mono.from ⇢ at org.springframework.data.repository.util.ReactiveWrapperConverters$PublisherToMonoConverter.convert(ReactiveWrapperConverters.java:564)\r\n\r\n\r\nHow can I run a query that will return a number rather than a `MyClass`? I am aware there is a built in method for count() but I have a few more complex queries that I would like to be able to run.\r\nI have tried having the return type be Mono\\&lt;Integer&gt;, Mono\\&lt;Long&gt;, Mono\\&lt;Object&gt; and Mono\\&lt;Object[]&gt; with similar results.","title":"How can I get numerical data from an sql query in Java Spring?","body":"<p>Currently my repo class looks like this:</p>\n<pre><code>@Repository\npublic interface RepoCosmos extends ReactiveCosmosRepository&lt;MyClass, String&gt; {\n\n    @Query(&quot;SELECT * FROM c WHERE c.Foo = @Foo&quot;)\n    Mono&lt;MyClass&gt; get(@Param(&quot;Foo&quot;) String Foo);\n\n    @Query(&quot;SELECT VALUE MAX(c.intID) FROM c WHERE NOT c.condition&quot;)\n    Mono&lt;?&gt; getMaxIntID();\n\n    @Query(&quot;SELECT VALUE COUNT(1) FROM c&quot;)\n    Mono&lt;?&gt; test();\n   }\n</code></pre>\n<p>The top query works fine. Neither of the bottom two work however. Both return an error mono so that running:</p>\n<pre><code>Mono&lt;?&gt; b = RepoCosmos.getMaxIntID();\nb.block();\n</code></pre>\n<p>causes an exception:</p>\n<pre><code>Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.\n2023-09-13 07:37:45.672 ERROR 19908 --- [           main] o.s.boot.SpringApplication               : Application run failed\n\njava.lang.IllegalStateException: Failed to execute ApplicationRunner\n        at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:785) ~[spring-boot-2.5.6.jar:2.5.6]\n        at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772) ~[spring-boot-2.5.6.jar:2.5.6]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:345) ~[spring-boot-2.5.6.jar:2.5.6]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343) ~[spring-boot-2.5.6.jar:2.5.6]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1332) ~[spring-boot-2.5.6.jar:2.5.6]\n        at com.careerswales.urlservice.UrlApplication.main(UrlApplication.java:13) ~[main/:na]\nCaused by: java.lang.IllegalArgumentException: domain should contain @Id field or field named id\n        at com.azure.spring.data.cosmos.repository.support.CosmosEntityInformation.getIdField(CosmosEntityInformation.java:317) ~[azure-spring-data-cosmos-3.17.0.jar:3.17.0]\n        Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: \nAssembly trace from producer [reactor.core.publisher.FluxMapFuseable] :\n        reactor.core.publisher.Flux.map(Flux.java:6273)\n        com.azure.spring.data.cosmos.core.ReactiveCosmosTemplate.runQuery(ReactiveCosmosTemplate.java:660)\nError has been observed at the following site(s):\n        *________Flux.map ⇢ at com.azure.spring.data.cosmos.core.ReactiveCosmosTemplate.runQuery(ReactiveCosmosTemplate.java:660)\n        *__Flux.usingWhen ⇢ at org.springframework.data.repository.core.support.RepositoryMethodInvoker$ReactiveInvocationListenerDecorator.decorate(RepositoryMethodInvoker.java:242)\n        |_      Mono.from ⇢ at org.springframework.data.repository.util.ReactiveWrapperConverters$PublisherToMonoConverter.convert(ReactiveWrapperConverters.java:564)\n</code></pre>\n<p>How can I run a query that will return a number rather than a <code>MyClass</code>? I am aware there is a built in method for count() but I have a few more complex queries that I would like to be able to run.\nI have tried having the return type be Mono&lt;Integer&gt;, Mono&lt;Long&gt;, Mono&lt;Object&gt; and Mono&lt;Object[]&gt; with similar results.</p>\n"},{"tags":["java","spring-boot","docker","docker-compose","dockerfile"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1693740165,"post_id":77031797,"comment_id":135797776,"body_markdown":"Please include the full stack trace of the exception.","body":"Please include the full stack trace of the exception."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1693901777,"post_id":77031797,"comment_id":135817013,"body_markdown":"_&quot;Caused by: java.net.ConnectException: Connection refused&quot;_, you&#39;re specifying the wrong host name, or the MySQL server isn&#39;t running.","body":"<i>&quot;Caused by: java.net.ConnectException: Connection refused&quot;</i>, you&#39;re specifying the wrong host name, or the MySQL server isn&#39;t running."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1693901884,"post_id":77031797,"comment_id":135817028,"body_markdown":"See [Solving a &quot;communications link failure&quot; with JDBC and MySQL](https://stackoverflow.com/questions/6865538/solving-a-communications-link-failure-with-jdbc-and-mysql) and its duplicate.","body":"See <a href=\"https://stackoverflow.com/questions/6865538/solving-a-communications-link-failure-with-jdbc-and-mysql\">Solving a &quot;communications link failure&quot; with JDBC and MySQL</a> and its duplicate."}],"owner":{"account_id":29356016,"reputation":1,"user_id":22491951,"display_name":"shiv"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":141,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694616256,"creation_date":1693735421,"question_id":77031797,"body_markdown":"This is the error message, I&#39;m getting while running the spring-boot 3 image with mysql 8 image on docker:\r\n```\r\nspringboot-mysql-with-docker-compose-master-api_service-1  | 2023-09-04T16:33:53.448Z  WARN 1 --- [           main] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 0, SQLState: 08S01\r\nspringboot-mysql-with-docker-compose-master-api_service-1  | 2023-09-04T16:33:53.449Z ERROR 1 --- [           main] o.h.engine.jdbc.spi.SqlExceptionHelper   : Communications link failure\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |\r\nspringboot-mysql-with-docker-compose-master-api_service-1  | The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |\r\nspringboot-mysql-with-docker-compose-master-api_service-1  | 2023-09-04T16:33:53.481Z ERROR 1 --- [           main] j.LocalContainerEntityManagerFactoryBean : Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution\r\nspringboot-mysql-with-docker-compose-master-api_service-1  | 2023-09-04T16:33:53.490Z  WARN 1 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution\r\nspringboot-mysql-with-docker-compose-master-api_service-1  | 2023-09-04T16:33:53.510Z  INFO 1 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  | 2023-09-04T16:33:53.553Z  INFO 1 --- [           main] .s.b.a.l.ConditionEvaluationReportLogger :\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |\r\nspringboot-mysql-with-docker-compose-master-api_service-1  | Error starting ApplicationContext. To display the condition evaluation report re-run your application with &#39;debug&#39; enabled.\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |\r\nspringboot-mysql-with-docker-compose-master-api_service-1  | 2023-09-04T16:33:53.660Z ERROR 1 --- [           main] o.s.boot.SpringApplication               : Application run failed\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |\r\nspringboot-mysql-with-docker-compose-master-api_service-1  | org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751) ~[spring-beans-6.0.2.jar!/:6.0.2]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599) ~[spring-beans-6.0.2.jar!/:6.0.2]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521) ~[spring-beans-6.0.2.jar!/:6.0.2]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.2.jar!/:6.0.2]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.2.jar!/:6.0.2]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.2.jar!/:6.0.2]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.2.jar!/:6.0.2]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130) ~[spring-context-6.0.2.jar!/:6.0.2]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905) ~[spring-context-6.0.2.jar!/:6.0.2]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584) ~[spring-context-6.0.2.jar!/:6.0.2]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.0.0.jar!/:3.0.0]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730) ~[spring-boot-3.0.0.jar!/:3.0.0]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432) ~[spring-boot-3.0.0.jar!/:3.0.0]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-3.0.0.jar!/:3.0.0]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302) ~[spring-boot-3.0.0.jar!/:3.0.0]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291) ~[spring-boot-3.0.0.jar!/:3.0.0]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.example.demo.BasicApplication.main(BasicApplication.java:10) ~[classes!/:0.0.1-SNAPSHOT]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49) ~[spring_rest_docker.jar:0.0.1-SNAPSHOT]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.boot.loader.Launcher.launch(Launcher.java:95) ~[spring_rest_docker.jar:0.0.1-SNAPSHOT]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.boot.loader.Launcher.launch(Launcher.java:58) ~[spring_rest_docker.jar:0.0.1-SNAPSHOT]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:65) ~[spring_rest_docker.jar:0.0.1-SNAPSHOT]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  | Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421) ~[spring-orm-6.0.2.jar!/:6.0.2]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.0.2.jar!/:6.0.2]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352) ~[spring-orm-6.0.2.jar!/:6.0.2]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797) ~[spring-beans-6.0.2.jar!/:6.0.2]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747) ~[spring-beans-6.0.2.jar!/:6.0.2]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    ... 24 common frames omitted\r\nspringboot-mysql-with-docker-compose-master-api_service-1  | Caused by: org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:98) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:68) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.tool.schema.internal.exec.ImprovedExtractionContextImpl.getJdbcConnection(ImprovedExtractionContextImpl.java:63) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.tool.schema.internal.exec.ImprovedExtractionContextImpl.getJdbcDatabaseMetaData(ImprovedExtractionContextImpl.java:70) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.tool.schema.extract.internal.InformationExtractorJdbcDatabaseMetaDataImpl.processTableResultSet(InformationExtractorJdbcDatabaseMetaDataImpl.java:64) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.tool.schema.extract.internal.AbstractInformationExtractorImpl.getTables(AbstractInformationExtractorImpl.java:564) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.tool.schema.extract.internal.DatabaseInformationImpl.getTablesInformation(DatabaseInformationImpl.java:122) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.tool.schema.internal.GroupedSchemaMigratorImpl.performTablesMigration(GroupedSchemaMigratorImpl.java:71) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.performMigration(AbstractSchemaMigrator.java:225) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.doMigration(AbstractSchemaMigrator.java:126) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:284) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at java.base/java.util.HashMap.forEach(HashMap.java:1421) ~[na:na]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:334) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66) ~[spring-orm-6.0.2.jar!/:6.0.2]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376) ~[spring-orm-6.0.2.jar!/:6.0.2]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.0.2.jar!/:6.0.2]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    ... 28 common frames omitted\r\nspringboot-mysql-with-docker-compose-master-api_service-1  | Caused by: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |\r\nspringboot-mysql-with-docker-compose-master-api_service-1  | The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174) ~[mysql-connector-j-8.0.31.jar!/:8.0.31]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64) ~[mysql-connector-j-8.0.31.jar!/:8.0.31]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:828) ~[mysql-connector-j-8.0.31.jar!/:8.0.31]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:448) ~[mysql-connector-j-8.0.31.jar!/:8.0.31]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:241) ~[mysql-connector-j-8.0.31.jar!/:8.0.31]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:198) ~[mysql-connector-j-8.0.31.jar!/:8.0.31]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138) ~[HikariCP-5.0.1.jar!/:na]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359) ~[HikariCP-5.0.1.jar!/:na]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201) ~[HikariCP-5.0.1.jar!/:na]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470) ~[HikariCP-5.0.1.jar!/:na]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561) ~[HikariCP-5.0.1.jar!/:na]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:100) ~[HikariCP-5.0.1.jar!/:na]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112) ~[HikariCP-5.0.1.jar!/:na]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:284) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:41) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    ... 46 common frames omitted\r\nspringboot-mysql-with-docker-compose-master-api_service-1  | Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |\r\nspringboot-mysql-with-docker-compose-master-api_service-1  | The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:na]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77) ~[na:na]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:na]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499) ~[na:na]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480) ~[na:na]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61) ~[mysql-connector-j-8.0.31.jar!/:8.0.31]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105) ~[mysql-connector-j-8.0.31.jar!/:8.0.31]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151) ~[mysql-connector-j-8.0.31.jar!/:8.0.31]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:167) ~[mysql-connector-j-8.0.31.jar!/:8.0.31]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:89) ~[mysql-connector-j-8.0.31.jar!/:8.0.31]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.mysql.cj.NativeSession.connect(NativeSession.java:120) ~[mysql-connector-j-8.0.31.jar!/:8.0.31]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:948) ~[mysql-connector-j-8.0.31.jar!/:8.0.31]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:818) ~[mysql-connector-j-8.0.31.jar!/:8.0.31]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    ... 59 common frames omitted\r\nspringboot-mysql-with-docker-compose-master-api_service-1  | Caused by: java.net.ConnectException: Connection refused\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at java.base/sun.nio.ch.Net.pollConnect(Native Method) ~[na:na]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672) ~[na:na]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542) ~[na:na]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:597) ~[na:na]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327) ~[na:na]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at java.base/java.net.Socket.connect(Socket.java:633) ~[na:na]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:153) ~[mysql-connector-j-8.0.31.jar!/:8.0.31]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:63) ~[mysql-connector-j-8.0.31.jar!/:8.0.31]\r\nspringboot-mysql-with-docker-compose-master-api_service-1  |    ... 62 common frames omitted\r\n\r\n```\r\nHere is my spring-boot application dependency file.&lt;br&gt;\r\npom.xml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;basic&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;basic&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n       &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        \r\n        &lt;!-- MySQL --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t\t&lt;finalName&gt;spring_rest_docker&lt;/finalName&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\nThese are the database configuration of my spring-boot application&lt;br&gt;\r\napplication.properties\r\n```\r\nspring.datasource.url=jdbc:mysql://localhost:3306/basics?allowPublicKeyRetrieval=true\r\nspring.datasource.username=root\r\nspring.datasource.password=root\r\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect\r\nspring.jpa.hibernate.ddl-auto=update\r\n\r\n```\r\nDocker file code for configuring application jar&lt;br&gt;\r\nDockerfile\r\n```\r\n#\r\n# Build stage\r\n#\r\nFROM maven:3.8.3-openjdk-17 AS build\r\nCOPY src /home/app/src\r\nCOPY pom.xml /home/app\r\nRUN mvn -f /home/app/pom.xml clean package\r\nEXPOSE 8080\r\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/home/app/target/spring_rest_docker.jar&quot;]\r\n\r\n```\r\nDocker Compose file&lt;br&gt;\r\ndocker-compose.yml\r\n```\r\nversion: &quot;3.7&quot;\r\nservices:\r\n  api_service:\r\n    build: .\r\n    restart: on-failure\r\n    ports:\r\n      - 8080:8080\r\n    networks:\r\n      - springapimysql-net\r\n    environment:\r\n      - spring.datasource.url= jdbc:mysql://mysqldb:3306/basics?allowPublicKeyRetrieval=true\r\n    depends_on:\r\n      - mysqldb\r\n    \r\n    volumes:\r\n      - .m2:/var/lib/mysql\r\n      \r\n  mysqldb:\r\n    image: &quot;mysql:8.0&quot;\r\n    restart: always\r\n    ports:\r\n      - 3306:3306\r\n    networks:\r\n      - springapimysql-net\r\n    environment:\r\n      MYSQL_DATABASE: basics\r\n      MYSQL_PASSWORD: root\r\n      MYSQL_ROOT_PASSWORD: root\r\nnetworks:\r\n  springapimysql-net:\r\n```","title":"Error: Unable to open JDBC Connection for DDL execution while running springboot image with mysql image on docker","body":"<p>This is the error message, I'm getting while running the spring-boot 3 image with mysql 8 image on docker:</p>\n<pre><code>springboot-mysql-with-docker-compose-master-api_service-1  | 2023-09-04T16:33:53.448Z  WARN 1 --- [           main] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 0, SQLState: 08S01\nspringboot-mysql-with-docker-compose-master-api_service-1  | 2023-09-04T16:33:53.449Z ERROR 1 --- [           main] o.h.engine.jdbc.spi.SqlExceptionHelper   : Communications link failure\nspringboot-mysql-with-docker-compose-master-api_service-1  |\nspringboot-mysql-with-docker-compose-master-api_service-1  | The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\nspringboot-mysql-with-docker-compose-master-api_service-1  |\nspringboot-mysql-with-docker-compose-master-api_service-1  | 2023-09-04T16:33:53.481Z ERROR 1 --- [           main] j.LocalContainerEntityManagerFactoryBean : Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution\nspringboot-mysql-with-docker-compose-master-api_service-1  | 2023-09-04T16:33:53.490Z  WARN 1 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution\nspringboot-mysql-with-docker-compose-master-api_service-1  | 2023-09-04T16:33:53.510Z  INFO 1 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\nspringboot-mysql-with-docker-compose-master-api_service-1  | 2023-09-04T16:33:53.553Z  INFO 1 --- [           main] .s.b.a.l.ConditionEvaluationReportLogger :\nspringboot-mysql-with-docker-compose-master-api_service-1  |\nspringboot-mysql-with-docker-compose-master-api_service-1  | Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.\nspringboot-mysql-with-docker-compose-master-api_service-1  |\nspringboot-mysql-with-docker-compose-master-api_service-1  | 2023-09-04T16:33:53.660Z ERROR 1 --- [           main] o.s.boot.SpringApplication               : Application run failed\nspringboot-mysql-with-docker-compose-master-api_service-1  |\nspringboot-mysql-with-docker-compose-master-api_service-1  | org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751) ~[spring-beans-6.0.2.jar!/:6.0.2]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599) ~[spring-beans-6.0.2.jar!/:6.0.2]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521) ~[spring-beans-6.0.2.jar!/:6.0.2]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.2.jar!/:6.0.2]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.2.jar!/:6.0.2]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.2.jar!/:6.0.2]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.2.jar!/:6.0.2]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130) ~[spring-context-6.0.2.jar!/:6.0.2]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905) ~[spring-context-6.0.2.jar!/:6.0.2]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584) ~[spring-context-6.0.2.jar!/:6.0.2]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.0.0.jar!/:3.0.0]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730) ~[spring-boot-3.0.0.jar!/:3.0.0]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432) ~[spring-boot-3.0.0.jar!/:3.0.0]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-3.0.0.jar!/:3.0.0]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302) ~[spring-boot-3.0.0.jar!/:3.0.0]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291) ~[spring-boot-3.0.0.jar!/:3.0.0]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.example.demo.BasicApplication.main(BasicApplication.java:10) ~[classes!/:0.0.1-SNAPSHOT]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49) ~[spring_rest_docker.jar:0.0.1-SNAPSHOT]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.boot.loader.Launcher.launch(Launcher.java:95) ~[spring_rest_docker.jar:0.0.1-SNAPSHOT]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.boot.loader.Launcher.launch(Launcher.java:58) ~[spring_rest_docker.jar:0.0.1-SNAPSHOT]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:65) ~[spring_rest_docker.jar:0.0.1-SNAPSHOT]\nspringboot-mysql-with-docker-compose-master-api_service-1  | Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421) ~[spring-orm-6.0.2.jar!/:6.0.2]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.0.2.jar!/:6.0.2]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352) ~[spring-orm-6.0.2.jar!/:6.0.2]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797) ~[spring-beans-6.0.2.jar!/:6.0.2]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747) ~[spring-beans-6.0.2.jar!/:6.0.2]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    ... 24 common frames omitted\nspringboot-mysql-with-docker-compose-master-api_service-1  | Caused by: org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:98) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:109) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:95) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:68) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.tool.schema.internal.exec.ImprovedExtractionContextImpl.getJdbcConnection(ImprovedExtractionContextImpl.java:63) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.tool.schema.internal.exec.ImprovedExtractionContextImpl.getJdbcDatabaseMetaData(ImprovedExtractionContextImpl.java:70) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.tool.schema.extract.internal.InformationExtractorJdbcDatabaseMetaDataImpl.processTableResultSet(InformationExtractorJdbcDatabaseMetaDataImpl.java:64) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.tool.schema.extract.internal.AbstractInformationExtractorImpl.getTables(AbstractInformationExtractorImpl.java:564) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.tool.schema.extract.internal.DatabaseInformationImpl.getTablesInformation(DatabaseInformationImpl.java:122) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.tool.schema.internal.GroupedSchemaMigratorImpl.performTablesMigration(GroupedSchemaMigratorImpl.java:71) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.performMigration(AbstractSchemaMigrator.java:225) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.doMigration(AbstractSchemaMigrator.java:126) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:284) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at java.base/java.util.HashMap.forEach(HashMap.java:1421) ~[na:na]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:334) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:415) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1425) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66) ~[spring-orm-6.0.2.jar!/:6.0.2]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376) ~[spring-orm-6.0.2.jar!/:6.0.2]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.0.2.jar!/:6.0.2]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    ... 28 common frames omitted\nspringboot-mysql-with-docker-compose-master-api_service-1  | Caused by: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure\nspringboot-mysql-with-docker-compose-master-api_service-1  |\nspringboot-mysql-with-docker-compose-master-api_service-1  | The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174) ~[mysql-connector-j-8.0.31.jar!/:8.0.31]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64) ~[mysql-connector-j-8.0.31.jar!/:8.0.31]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:828) ~[mysql-connector-j-8.0.31.jar!/:8.0.31]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:448) ~[mysql-connector-j-8.0.31.jar!/:8.0.31]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:241) ~[mysql-connector-j-8.0.31.jar!/:8.0.31]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:198) ~[mysql-connector-j-8.0.31.jar!/:8.0.31]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138) ~[HikariCP-5.0.1.jar!/:na]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359) ~[HikariCP-5.0.1.jar!/:na]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201) ~[HikariCP-5.0.1.jar!/:na]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470) ~[HikariCP-5.0.1.jar!/:na]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561) ~[HikariCP-5.0.1.jar!/:na]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:100) ~[HikariCP-5.0.1.jar!/:na]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112) ~[HikariCP-5.0.1.jar!/:na]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:284) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:41) ~[hibernate-core-6.1.5.Final.jar!/:6.1.5.Final]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    ... 46 common frames omitted\nspringboot-mysql-with-docker-compose-master-api_service-1  | Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure\nspringboot-mysql-with-docker-compose-master-api_service-1  |\nspringboot-mysql-with-docker-compose-master-api_service-1  | The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:na]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77) ~[na:na]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:na]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499) ~[na:na]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480) ~[na:na]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61) ~[mysql-connector-j-8.0.31.jar!/:8.0.31]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105) ~[mysql-connector-j-8.0.31.jar!/:8.0.31]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151) ~[mysql-connector-j-8.0.31.jar!/:8.0.31]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:167) ~[mysql-connector-j-8.0.31.jar!/:8.0.31]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:89) ~[mysql-connector-j-8.0.31.jar!/:8.0.31]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.mysql.cj.NativeSession.connect(NativeSession.java:120) ~[mysql-connector-j-8.0.31.jar!/:8.0.31]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:948) ~[mysql-connector-j-8.0.31.jar!/:8.0.31]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:818) ~[mysql-connector-j-8.0.31.jar!/:8.0.31]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    ... 59 common frames omitted\nspringboot-mysql-with-docker-compose-master-api_service-1  | Caused by: java.net.ConnectException: Connection refused\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at java.base/sun.nio.ch.Net.pollConnect(Native Method) ~[na:na]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672) ~[na:na]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542) ~[na:na]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:597) ~[na:na]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327) ~[na:na]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at java.base/java.net.Socket.connect(Socket.java:633) ~[na:na]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:153) ~[mysql-connector-j-8.0.31.jar!/:8.0.31]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:63) ~[mysql-connector-j-8.0.31.jar!/:8.0.31]\nspringboot-mysql-with-docker-compose-master-api_service-1  |    ... 62 common frames omitted\n\n</code></pre>\n<p>Here is my spring-boot application dependency file.<br>\npom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;basic&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;basic&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n       &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n         &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        \n        &lt;!-- MySQL --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n        &lt;finalName&gt;spring_rest_docker&lt;/finalName&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>These are the database configuration of my spring-boot application<br>\napplication.properties</p>\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/basics?allowPublicKeyRetrieval=true\nspring.datasource.username=root\nspring.datasource.password=root\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect\nspring.jpa.hibernate.ddl-auto=update\n\n</code></pre>\n<p>Docker file code for configuring application jar<br>\nDockerfile</p>\n<pre><code>#\n# Build stage\n#\nFROM maven:3.8.3-openjdk-17 AS build\nCOPY src /home/app/src\nCOPY pom.xml /home/app\nRUN mvn -f /home/app/pom.xml clean package\nEXPOSE 8080\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/home/app/target/spring_rest_docker.jar&quot;]\n\n</code></pre>\n<p>Docker Compose file<br>\ndocker-compose.yml</p>\n<pre><code>version: &quot;3.7&quot;\nservices:\n  api_service:\n    build: .\n    restart: on-failure\n    ports:\n      - 8080:8080\n    networks:\n      - springapimysql-net\n    environment:\n      - spring.datasource.url= jdbc:mysql://mysqldb:3306/basics?allowPublicKeyRetrieval=true\n    depends_on:\n      - mysqldb\n    \n    volumes:\n      - .m2:/var/lib/mysql\n      \n  mysqldb:\n    image: &quot;mysql:8.0&quot;\n    restart: always\n    ports:\n      - 3306:3306\n    networks:\n      - springapimysql-net\n    environment:\n      MYSQL_DATABASE: basics\n      MYSQL_PASSWORD: root\n      MYSQL_ROOT_PASSWORD: root\nnetworks:\n  springapimysql-net:\n</code></pre>\n"},{"tags":["java","spring-boot","gradle"],"comments":[{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":1,"creation_date":1694617137,"post_id":77098133,"comment_id":135915421,"body_markdown":"You can use `publish.dependsOn bootJar` but you also have to put `publish.dependsOn bootJar` in your task.","body":"You can use <code>publish.dependsOn bootJar</code> but you also have to put <code>publish.dependsOn bootJar</code> in your task."}],"owner":{"account_id":221010,"reputation":71,"user_id":478752,"display_name":"HirenP"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694616105,"creation_date":1694616105,"question_id":77098133,"body_markdown":"Multi-module Java API project using spring boot gradle plugin \r\n\r\nFollowing works and produces jar that is executable.\r\n```\r\n./gradlew build bootJar \r\n```\r\nI can run it using command \r\n```\r\njava -jar api.jar\r\n```\r\n\r\nBut the build pipeline can only execute \r\n```\r\n./graldew publish (unable modify task to bootJar due to the build template being a custom one)\r\n```\r\nwhich results in an error\r\n```\r\nno main manifest attribute in api.jar\r\n```\r\n\r\n\r\nHere is bootJar task\r\n```\r\nbootJar {\r\n\tmainClass = &#39;com.my-company.api-main-class&#39;\r\n}\r\n```\r\n\r\nQuestion is \r\nis it possible to modify build.gradle and override publish task so that when publish task is executed, it actually runs bootJar task instead?\r\n\r\n\r\n\r\n","title":"is it possible to override Gradle publish task to excute bootJar task instead?","body":"<p>Multi-module Java API project using spring boot gradle plugin</p>\n<p>Following works and produces jar that is executable.</p>\n<pre><code>./gradlew build bootJar \n</code></pre>\n<p>I can run it using command</p>\n<pre><code>java -jar api.jar\n</code></pre>\n<p>But the build pipeline can only execute</p>\n<pre><code>./graldew publish (unable modify task to bootJar due to the build template being a custom one)\n</code></pre>\n<p>which results in an error</p>\n<pre><code>no main manifest attribute in api.jar\n</code></pre>\n<p>Here is bootJar task</p>\n<pre><code>bootJar {\n    mainClass = 'com.my-company.api-main-class'\n}\n</code></pre>\n<p>Question is\nis it possible to modify build.gradle and override publish task so that when publish task is executed, it actually runs bootJar task instead?</p>\n"},{"tags":["java","snmp","snmp4j","snmp-trap"],"owner":{"account_id":29432271,"reputation":1,"user_id":22551738,"display_name":"simoirs"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694616030,"creation_date":1694616030,"question_id":77098122,"body_markdown":"I have to send an SNMP v3 Trap to a server using SNMP4J but I can&#39;t seem to make it work.\r\nWith a TCP dump, the remote server guys confirm they&#39;re receiving packets but they seem to be malformed in some way.\r\n\r\nCode is below:\r\n\r\n\r\n```\r\nTransportMapping transportMapping = new DefaultUdpTransportMapping();\r\n\r\n        Snmp snmp = new Snmp(transportMapping);\r\n\r\n        OctetString localEngineId = new OctetString(MPv3.createLocalEngineID());\r\n\r\n        USM usm = new USM(SecurityProtocols.getInstance()\r\n                .addDefaultProtocols(), new OctetString(\r\n                MPv3.createLocalEngineID()), 0);\r\n\r\n        SecurityModels.getInstance().addSecurityModel(usm);\r\n        OctetString securityName = new OctetString(username);\r\n        OctetString authPassphrase = new OctetString(authPassword);\r\n        OctetString privPassphrase = new OctetString(privPassword);\r\n\r\n        OID authProtocol = AuthHMAC192SHA256.ID;\r\n        OID privProtocol = PrivAES128.ID;\r\n\r\n        snmp.getUSM().addUser(securityName, new UsmUser(securityName, authProtocol, authPassphrase, privProtocol, privPassphrase));\r\n\r\n        UserTarget target = new UserTarget();\r\n        target.setSecurityLevel(SecurityLevel.AUTH_PRIV);\r\n        target.setSecurityName(securityName);\r\n        target.setAddress(new UdpAddress(agentIp + &quot;/&quot; + agentPort));\r\n        target.setVersion(SnmpConstants.version3);\r\n\r\n        ScopedPDU pdu = new ScopedPDU();\r\n        pdu.setType(PDU.SET);\r\n        pdu.setContextEngineID(localEngineId);\r\n\r\n        pdu.add(new VariableBinding(new OID(trapOID), new OctetString(\r\n                &quot;beginraisetime:2023-09-10 16:00:00;&quot; +\r\n                        &quot;endraisetime:&quot; +\r\n                        &quot;2023-09-13 15:00:00&quot; + &quot;;&quot;)));\r\n        pdu.setContextName(new OctetString(&quot;context name&quot;));\r\n\r\n\r\n        System.out.println(&quot;Sending V3 trap&quot;);\r\n        System.out.println(&quot;PDU: &quot; + pdu);\r\n\r\n        snmp.listen();\r\n        snmp.send(pdu, target);\r\n        snmp.close();\r\n```\r\n\r\n\r\nI tried to find answers online, there is not a lot of help but I keep reading issues about the Engine ID.. maybe there&#39;s something wrong in the way it&#39;s generated.","title":"SNMP4J: malformed SNMP v3 trap","body":"<p>I have to send an SNMP v3 Trap to a server using SNMP4J but I can't seem to make it work.\nWith a TCP dump, the remote server guys confirm they're receiving packets but they seem to be malformed in some way.</p>\n<p>Code is below:</p>\n<pre><code>TransportMapping transportMapping = new DefaultUdpTransportMapping();\n\n        Snmp snmp = new Snmp(transportMapping);\n\n        OctetString localEngineId = new OctetString(MPv3.createLocalEngineID());\n\n        USM usm = new USM(SecurityProtocols.getInstance()\n                .addDefaultProtocols(), new OctetString(\n                MPv3.createLocalEngineID()), 0);\n\n        SecurityModels.getInstance().addSecurityModel(usm);\n        OctetString securityName = new OctetString(username);\n        OctetString authPassphrase = new OctetString(authPassword);\n        OctetString privPassphrase = new OctetString(privPassword);\n\n        OID authProtocol = AuthHMAC192SHA256.ID;\n        OID privProtocol = PrivAES128.ID;\n\n        snmp.getUSM().addUser(securityName, new UsmUser(securityName, authProtocol, authPassphrase, privProtocol, privPassphrase));\n\n        UserTarget target = new UserTarget();\n        target.setSecurityLevel(SecurityLevel.AUTH_PRIV);\n        target.setSecurityName(securityName);\n        target.setAddress(new UdpAddress(agentIp + &quot;/&quot; + agentPort));\n        target.setVersion(SnmpConstants.version3);\n\n        ScopedPDU pdu = new ScopedPDU();\n        pdu.setType(PDU.SET);\n        pdu.setContextEngineID(localEngineId);\n\n        pdu.add(new VariableBinding(new OID(trapOID), new OctetString(\n                &quot;beginraisetime:2023-09-10 16:00:00;&quot; +\n                        &quot;endraisetime:&quot; +\n                        &quot;2023-09-13 15:00:00&quot; + &quot;;&quot;)));\n        pdu.setContextName(new OctetString(&quot;context name&quot;));\n\n\n        System.out.println(&quot;Sending V3 trap&quot;);\n        System.out.println(&quot;PDU: &quot; + pdu);\n\n        snmp.listen();\n        snmp.send(pdu, target);\n        snmp.close();\n</code></pre>\n<p>I tried to find answers online, there is not a lot of help but I keep reading issues about the Engine ID.. maybe there's something wrong in the way it's generated.</p>\n"},{"tags":["java","spring-boot","spring-oauth2"],"comments":[{"owner":{"account_id":111563,"reputation":13269,"user_id":294657,"accept_rate":85,"display_name":"kaqqao"},"score":0,"creation_date":1693928416,"post_id":76986230,"comment_id":135822801,"body_markdown":"The &quot;duplicate&quot; is in way related to this question. The exception message merely begins similarly, but the root cause is entirely different.","body":"The &quot;duplicate&quot; is in way related to this question. The exception message merely begins similarly, but the root cause is entirely different."}],"owner":{"account_id":29233432,"reputation":17,"user_id":22396570,"display_name":"loner00"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":0,"score":0,"last_activity_date":1694615162,"creation_date":1693124205,"question_id":76986230,"body_markdown":"I am working on OAuth security. OAuth client config file has a problem in bean SecurityFilterChain, giving many errors.\r\n\r\nHere are my files.\r\n\r\n# config file\r\n\r\n```java\r\n@EnableWebSecurity\r\npublic class WebSecurityConfig {\r\n\r\n    private static final String[] WHITE_LIST_URLS = {\r\n            &quot;/hello&quot;,\r\n            &quot;/register&quot;,\r\n            &quot;/verifyRegistration*&quot;,\r\n            &quot;/resendVerifyToken*&quot;\r\n    };\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder(){\r\n        return new BCryptPasswordEncoder(11);\r\n    }\r\n\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws \r\n    Exception {\r\n        http\r\n                .cors()\r\n                .and()\r\n                .csrf()\r\n                .disable()\r\n                .authorizeHttpRequests()\r\n                .antMatchers(WHITE_LIST_URLS).permitAll()\r\n                .antMatchers(&quot;/api/**&quot;).authenticated()\r\n                .and()\r\n                .oauth2Login(oauth2login -&gt;\r\n                        oauth2login.loginPage(&quot;/oauth2/authorization/api-client-oidc&quot;))\r\n                .oauth2Client(Customizer.withDefaults())\r\n                .securityContext((securityContext) -&gt; securityContext\r\n                        .securityContextRepository(new RequestAttributeSecurityContextRepository()))\r\n                .securityContext((securityContext) -&gt; securityContext\r\n                        .requireExplicitSave(true));\r\n\r\n        return http.build();\r\n    }\r\n}\r\n```\r\n\r\n\r\n# POM.xml file\r\n\r\n```xml\r\n&lt;dependencies&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n\r\n&lt;build&gt;\r\n\t&lt;plugins&gt;\r\n\t\t&lt;plugin&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;configuration&gt;\r\n\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t&lt;/configuration&gt;\r\n\t\t&lt;/plugin&gt;\r\n\t&lt;/plugins&gt;\r\n&lt;/build&gt;\r\n```\r\n\r\n# Authorization server config\r\n\r\n```java\r\n@Configuration(proxyBeanMethods = false)\r\npublic class AuthorizationServerConfig {\r\n\r\n    @Autowired\r\n    private PasswordEncoder passwordEncoder;\r\n\r\n    @Bean\r\n    @Order(Ordered.HIGHEST_PRECEDENCE)\r\n    public SecurityFilterChain authServerSecurityFilterChain(HttpSecurity http) throws Exception{\r\n        OAuth2AuthorizationServerConfiguration.applyDefaultSecurity(http);\r\n\r\n        return http.formLogin(Customizer.withDefaults()).build();\r\n    }\r\n\r\n    @Bean\r\n    public RegisteredClientRepository registeredClientRepository() {\r\n        RegisteredClient registeredClient = RegisteredClient.withId(UUID.randomUUID().toString())\r\n                .clientId(&quot;api-client&quot;)\r\n                .clientSecret(passwordEncoder.encode(&quot;secret&quot;))\r\n                .clientAuthenticationMethod(ClientAuthenticationMethod.CLIENT_SECRET_BASIC)\r\n                .authorizationGrantType(AuthorizationGrantType.AUTHORIZATION_CODE)\r\n                .authorizationGrantType(AuthorizationGrantType.PASSWORD)\r\n                .authorizationGrantType(AuthorizationGrantType.REFRESH_TOKEN)\r\n                .redirectUri(&quot;http://127.0.0.1:8080/login/oauth2/code/api-client-oidc&quot;)\r\n                .redirectUri(&quot;http://127.0.0.1:8080/authorized&quot;)\r\n                .scope(OidcScopes.OPENID)\r\n                .scope(&quot;api.read&quot;)\r\n                .clientSettings(ClientSettings.builder().requireAuthorizationConsent(true).build())\r\n                .build();\r\n\r\n\r\n        return new InMemoryRegisteredClientRepository(registeredClient);\r\n    }\r\n\r\n    @Bean\r\n    public JWKSource&lt;SecurityContext&gt; jwkSource() {\r\n        RSAKey rsaKey = generateRsa();\r\n        JWKSet jwkSet = new JWKSet(rsaKey);\r\n        return (jwkSelector, securityContext) -&gt; jwkSelector.select(jwkSet);\r\n    }\r\n\r\n    private static RSAKey generateRsa() {\r\n        KeyPair keyPair = generateRsaKey();\r\n        RSAPublicKey publicKey = (RSAPublicKey) keyPair.getPublic();\r\n        RSAPrivateKey privateKey = (RSAPrivateKey) keyPair.getPrivate();\r\n        return new RSAKey.Builder(publicKey)\r\n                .privateKey(privateKey)\r\n                .keyID(UUID.randomUUID().toString())\r\n                .build();\r\n    }\r\n\r\n    private static KeyPair generateRsaKey() {\r\n        KeyPair keyPair;\r\n        try {\r\n            KeyPairGenerator keyPairGenerator = KeyPairGenerator.getInstance(&quot;RSA&quot;);\r\n            keyPairGenerator.initialize(2048);\r\n            keyPair = keyPairGenerator.generateKeyPair();\r\n        } catch (Exception ex) {\r\n            throw new IllegalStateException(ex);\r\n        }\r\n        return keyPair;\r\n    }\r\n\r\n    @Bean\r\n    public ProviderSettings providerSettings() {\r\n        return ProviderSettings.builder()\r\n                .issuer(&quot;http://auth-server:9000&quot;)\r\n                .build();\r\n    }\r\n}\r\n```\r\n\r\n# Stack trace\r\n\r\n```none\r\nError starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.\r\n2023-08-27 13:27:19.433 ERROR 9308 --- [           main] o.s.boot.SpringApplication               : Application run failed\r\n\r\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration&#39;: Unsatisfied dependency expressed through method &#39;setFilterChains&#39; parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;securityFilterChain&#39; defined in class path resource [com/springsecuritylearn/client/config/WebSecurityConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method &#39;securityFilterChain&#39; threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;clientRegistrationRepository&#39; defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2ClientRegistrationRepositoryConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method &#39;clientRegistrationRepository&#39; threw exception; nested exception is java.lang.IllegalArgumentException: Unable to resolve Configuration with the provided Issuer of &quot;http://auth-server:9000&quot;\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:774) ~[spring-beans-5.3.29.jar:5.3.29]\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:727) ~[spring-beans-5.3.29.jar:5.3.29]\r\n\tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119) ~[spring-beans-5.3.29.jar:5.3.29]\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399) ~[spring-beans-5.3.29.jar:5.3.29]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431) ~[spring-beans-5.3.29.jar:5.3.29]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619) ~[spring-beans-5.3.29.jar:5.3.29]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.29.jar:5.3.29]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.29.jar:5.3.29]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.29.jar:5.3.29]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.29.jar:5.3.29]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.29.jar:5.3.29]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955) ~[spring-beans-5.3.29.jar:5.3.29]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:921) ~[spring-context-5.3.29.jar:5.3.29]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.29.jar:5.3.29]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.14.jar:2.7.14]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:731) ~[spring-boot-2.7.14.jar:2.7.14]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.14.jar:2.7.14]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:307) ~[spring-boot-2.7.14.jar:2.7.14]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1303) ~[spring-boot-2.7.14.jar:2.7.14]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1292) ~[spring-boot-2.7.14.jar:2.7.14]\r\n\tat com.springsecuritylearn.client.SpringSecurityClientApplication.main(SpringSecurityClientApplication.java:10) ~[classes/:na]\r\n```\r\n","title":"OAuth authorization server is not able to handle the Oauthclient","body":"<p>I am working on OAuth security. OAuth client config file has a problem in bean SecurityFilterChain, giving many errors.</p>\n<p>Here are my files.</p>\n<h1>config file</h1>\n<pre class=\"lang-java prettyprint-override\"><code>@EnableWebSecurity\npublic class WebSecurityConfig {\n\n    private static final String[] WHITE_LIST_URLS = {\n            &quot;/hello&quot;,\n            &quot;/register&quot;,\n            &quot;/verifyRegistration*&quot;,\n            &quot;/resendVerifyToken*&quot;\n    };\n\n    @Bean\n    public PasswordEncoder passwordEncoder(){\n        return new BCryptPasswordEncoder(11);\n    }\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws \n    Exception {\n        http\n                .cors()\n                .and()\n                .csrf()\n                .disable()\n                .authorizeHttpRequests()\n                .antMatchers(WHITE_LIST_URLS).permitAll()\n                .antMatchers(&quot;/api/**&quot;).authenticated()\n                .and()\n                .oauth2Login(oauth2login -&gt;\n                        oauth2login.loginPage(&quot;/oauth2/authorization/api-client-oidc&quot;))\n                .oauth2Client(Customizer.withDefaults())\n                .securityContext((securityContext) -&gt; securityContext\n                        .securityContextRepository(new RequestAttributeSecurityContextRepository()))\n                .securityContext((securityContext) -&gt; securityContext\n                        .requireExplicitSave(true));\n\n        return http.build();\n    }\n}\n</code></pre>\n<h1>POM.xml file</h1>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;optional&gt;true&lt;/optional&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;excludes&gt;\n                    &lt;exclude&gt;\n                        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                    &lt;/exclude&gt;\n                &lt;/excludes&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n<h1>Authorization server config</h1>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration(proxyBeanMethods = false)\npublic class AuthorizationServerConfig {\n\n    @Autowired\n    private PasswordEncoder passwordEncoder;\n\n    @Bean\n    @Order(Ordered.HIGHEST_PRECEDENCE)\n    public SecurityFilterChain authServerSecurityFilterChain(HttpSecurity http) throws Exception{\n        OAuth2AuthorizationServerConfiguration.applyDefaultSecurity(http);\n\n        return http.formLogin(Customizer.withDefaults()).build();\n    }\n\n    @Bean\n    public RegisteredClientRepository registeredClientRepository() {\n        RegisteredClient registeredClient = RegisteredClient.withId(UUID.randomUUID().toString())\n                .clientId(&quot;api-client&quot;)\n                .clientSecret(passwordEncoder.encode(&quot;secret&quot;))\n                .clientAuthenticationMethod(ClientAuthenticationMethod.CLIENT_SECRET_BASIC)\n                .authorizationGrantType(AuthorizationGrantType.AUTHORIZATION_CODE)\n                .authorizationGrantType(AuthorizationGrantType.PASSWORD)\n                .authorizationGrantType(AuthorizationGrantType.REFRESH_TOKEN)\n                .redirectUri(&quot;http://127.0.0.1:8080/login/oauth2/code/api-client-oidc&quot;)\n                .redirectUri(&quot;http://127.0.0.1:8080/authorized&quot;)\n                .scope(OidcScopes.OPENID)\n                .scope(&quot;api.read&quot;)\n                .clientSettings(ClientSettings.builder().requireAuthorizationConsent(true).build())\n                .build();\n\n\n        return new InMemoryRegisteredClientRepository(registeredClient);\n    }\n\n    @Bean\n    public JWKSource&lt;SecurityContext&gt; jwkSource() {\n        RSAKey rsaKey = generateRsa();\n        JWKSet jwkSet = new JWKSet(rsaKey);\n        return (jwkSelector, securityContext) -&gt; jwkSelector.select(jwkSet);\n    }\n\n    private static RSAKey generateRsa() {\n        KeyPair keyPair = generateRsaKey();\n        RSAPublicKey publicKey = (RSAPublicKey) keyPair.getPublic();\n        RSAPrivateKey privateKey = (RSAPrivateKey) keyPair.getPrivate();\n        return new RSAKey.Builder(publicKey)\n                .privateKey(privateKey)\n                .keyID(UUID.randomUUID().toString())\n                .build();\n    }\n\n    private static KeyPair generateRsaKey() {\n        KeyPair keyPair;\n        try {\n            KeyPairGenerator keyPairGenerator = KeyPairGenerator.getInstance(&quot;RSA&quot;);\n            keyPairGenerator.initialize(2048);\n            keyPair = keyPairGenerator.generateKeyPair();\n        } catch (Exception ex) {\n            throw new IllegalStateException(ex);\n        }\n        return keyPair;\n    }\n\n    @Bean\n    public ProviderSettings providerSettings() {\n        return ProviderSettings.builder()\n                .issuer(&quot;http://auth-server:9000&quot;)\n                .build();\n    }\n}\n</code></pre>\n<h1>Stack trace</h1>\n<pre class=\"lang-none prettyprint-override\"><code>Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.\n2023-08-27 13:27:19.433 ERROR 9308 --- [           main] o.s.boot.SpringApplication               : Application run failed\n\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration': Unsatisfied dependency expressed through method 'setFilterChains' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'securityFilterChain' defined in class path resource [com/springsecuritylearn/client/config/WebSecurityConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'clientRegistrationRepository' defined in class path resource [org/springframework/boot/autoconfigure/security/oauth2/client/servlet/OAuth2ClientRegistrationRepositoryConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.oauth2.client.registration.InMemoryClientRegistrationRepository]: Factory method 'clientRegistrationRepository' threw exception; nested exception is java.lang.IllegalArgumentException: Unable to resolve Configuration with the provided Issuer of &quot;http://auth-server:9000&quot;\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:774) ~[spring-beans-5.3.29.jar:5.3.29]\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:727) ~[spring-beans-5.3.29.jar:5.3.29]\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119) ~[spring-beans-5.3.29.jar:5.3.29]\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399) ~[spring-beans-5.3.29.jar:5.3.29]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431) ~[spring-beans-5.3.29.jar:5.3.29]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619) ~[spring-beans-5.3.29.jar:5.3.29]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.29.jar:5.3.29]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.29.jar:5.3.29]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.29.jar:5.3.29]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.29.jar:5.3.29]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.29.jar:5.3.29]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955) ~[spring-beans-5.3.29.jar:5.3.29]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:921) ~[spring-context-5.3.29.jar:5.3.29]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.29.jar:5.3.29]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.14.jar:2.7.14]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:731) ~[spring-boot-2.7.14.jar:2.7.14]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.14.jar:2.7.14]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:307) ~[spring-boot-2.7.14.jar:2.7.14]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1303) ~[spring-boot-2.7.14.jar:2.7.14]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1292) ~[spring-boot-2.7.14.jar:2.7.14]\n    at com.springsecuritylearn.client.SpringSecurityClientApplication.main(SpringSecurityClientApplication.java:10) ~[classes/:na]\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":0,"creation_date":1694456583,"post_id":77082915,"comment_id":135890607,"body_markdown":"This code is Java, not Kotlin. You probably want to tag Android since that&#39;s what it&#39;s primarily about.","body":"This code is Java, not Kotlin. You probably want to tag Android since that&#39;s what it&#39;s primarily about."},{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":0,"creation_date":1694456879,"post_id":77082915,"comment_id":135890657,"body_markdown":"Can you show the code of the `loadById()` method? What is its return type?","body":"Can you show the code of the <code>loadById()</code> method? What is its return type?"},{"owner":{"account_id":29291795,"reputation":1,"user_id":22442079,"display_name":"Nahuel Perez"},"score":0,"creation_date":1694470096,"post_id":77082915,"comment_id":135892539,"body_markdown":"@Query(&quot;SELECT * FROM Repo WHERE id in(:repoIds)&quot;)\n        protected abstract LiveData&lt;List&lt;Repo&gt;&gt; loadById(List&lt;Integer&gt; repoIds); @Tenfour04","body":"@Query(&quot;SELECT * FROM Repo WHERE id in(:repoIds)&quot;)         protected abstract LiveData&lt;List&lt;Repo&gt;&gt; loadById(List&lt;Integer&gt; repoIds); @Tenfour04"},{"owner":{"account_id":29291795,"reputation":1,"user_id":22442079,"display_name":"Nahuel Perez"},"score":0,"creation_date":1694470472,"post_id":77082915,"comment_id":135892585,"body_markdown":"@Tenfour04 \nThis is the version of Android Studio that I have installed: Android Studio Flammngo | 2022.2.1","body":"@Tenfour04  This is the version of Android Studio that I have installed: Android Studio Flammngo | 2022.2.1"},{"owner":{"account_id":29291795,"reputation":1,"user_id":22442079,"display_name":"Nahuel Perez"},"score":0,"creation_date":1694473135,"post_id":77082915,"comment_id":135892872,"body_markdown":"`return Transformations.map(loadById(repoIds), (Function1&lt;List&lt;Repo&gt;, List&lt;Repo&gt;&gt;) repositories -&gt; {\n            repositories.sort(new Comparator&lt;Repo&gt;() {\n                @Override\n                public int compare(Repo o1, Repo o2) {\n                    int pos1 = order.get(o1.id);\n                    int pos2 = order.get(o2.id);\n                    return pos1 - pos2;\n                }\n            });\n            return repositories;\n        });`","body":"<code>return Transformations.map(loadById(repoIds), (Function1&lt;List&lt;Repo&gt;, List&lt;Repo&gt;&gt;) repositories -&gt; {             repositories.sort(new Comparator&lt;Repo&gt;() {                 @Override                 public int compare(Repo o1, Repo o2) {                     int pos1 = order.get(o1.id);                     int pos2 = order.get(o2.id);                     return pos1 - pos2;                 }             });             return repositories;         });</code>"},{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":0,"creation_date":1694614897,"post_id":77082915,"comment_id":135914851,"body_markdown":"For future reference, tag [tag:android] instead of [tag:android-studio] for questions about Android development. Android Studio&#39;s tag is for questions specifically about the IDE so there are far fewer people watching that tag and it&#39;s not really relevant to questions like this. If you tag Android, a lot more people will see your question. If you had tagged `android` and `java` to begin with, you probably would have had an answer within minutes. And don&#39;t tag Kotlin unless you are fine with answers that have only Kotlin examples in them.","body":"For future reference, tag <a href=\"https://stackoverflow.com/questions/tagged/android\">android</a> instead of <a href=\"https://stackoverflow.com/questions/tagged/android-studio\">android-studio</a> for questions about Android development. Android Studio&#39;s tag is for questions specifically about the IDE so there are far fewer people watching that tag and it&#39;s not really relevant to questions like this. If you tag Android, a lot more people will see your question. If you had tagged <code>android</code> and <code>java</code> to begin with, you probably would have had an answer within minutes. And don&#39;t tag Kotlin unless you are fine with answers that have only Kotlin examples in them."}],"answers":[{"tags":[],"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694615074,"creation_date":1694614761,"answer_id":77097952,"question_id":77082915,"body_markdown":"The second argument for the `map` method is a `Function1`, not a `Function`. But you wouldn&#39;t have to worry about this if you&#39;re using lambdas, which is the intended way to use it, and much more concise/readable:\r\n\r\n```java\r\npublic LiveData&lt;List&lt;Repo&gt;&gt; loadOrdered(List&lt;Integer&gt; repoIds) {\r\n    SparseIntArray order = new SparseIntArray();\r\n    int index = 0;\r\n    for (int repoId : repoIds) { // might as well avoid boxing\r\n        order.put(repoId, index++);\r\n    }\r\n    return Transformations.map(\r\n        loadById(repoIds),\r\n        repositories -&gt; {\r\n            Collections.sort(repositories, Comparator.comparingInt(repo -&gt; order.get(repo.id)));\r\n            return repositories;\r\n        }\r\n    );\r\n}\r\n```","title":"Corregir error no instance(s) of type variable(s) X exist so that LiveData&lt;List&lt;Repo&gt;&gt; conforms to LiveData&lt;X&gt;","body":"<p>The second argument for the <code>map</code> method is a <code>Function1</code>, not a <code>Function</code>. But you wouldn't have to worry about this if you're using lambdas, which is the intended way to use it, and much more concise/readable:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public LiveData&lt;List&lt;Repo&gt;&gt; loadOrdered(List&lt;Integer&gt; repoIds) {\n    SparseIntArray order = new SparseIntArray();\n    int index = 0;\n    for (int repoId : repoIds) { // might as well avoid boxing\n        order.put(repoId, index++);\n    }\n    return Transformations.map(\n        loadById(repoIds),\n        repositories -&gt; {\n            Collections.sort(repositories, Comparator.comparingInt(repo -&gt; order.get(repo.id)));\n            return repositories;\n        }\n    );\n}\n</code></pre>\n"}],"owner":{"account_id":29291795,"reputation":1,"user_id":22442079,"display_name":"Nahuel Perez"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694615074,"creation_date":1694445872,"question_id":77082915,"body_markdown":"I&#39;m doing a test application and the example I am following uses Java functions in Visual Studio to receive a list of integers and return a `LiveData`. Everything was OK up to this point, but when I write the example syntax it gives me the following error:\r\n```\r\nno instance(s) of type variable(s) X exist so that LiveData&lt;List&lt;Repo&gt;&gt; conforms to LiveData&lt;X&gt;\r\n```\r\n\r\nI understand that it must be a version problem of Android Studio. Or it could be that it is written differently?\r\nThis is the code I am trying to use which gives me the error:\r\n```\r\npublic LiveData&lt;List&lt;Repo&gt;&gt; loadOrdered(List&lt;Integer&gt; repoIds) {\r\n    SparseIntArray order = new SparseIntArray();\r\n    int index = 0;\r\n    for (Integer repoId : repoIds) {\r\n        order.put(repoId, index++);\r\n    }\r\n    return Transformations.map(loadById(repoIds), new Function&lt;List&lt;Repo&gt;, List&lt;Repo&gt;&gt;() {\r\n        @Override\r\n        public List&lt;Repo&gt; apply(List&lt;Repo&gt; repositories) {\r\n            Collections.sort(repositories, new Comparator&lt;Repo&gt;() {\r\n                @Override\r\n                public int compare(Repo o1, Repo o2) {\r\n                    int pos1 = order.get(o1.id);\r\n                    int pos2 = order.get(o2.id);\r\n                    return pos1 - pos2;\r\n                }\r\n            });\r\n            return repositories;\r\n        }\r\n    });\r\n```\r\nI leave the declaration of this function:\r\n```\r\nloadById(repoIds):\r\n        @Query(&quot;SELECT * FROM Repo WHERE id in(:repoIds)&quot;)\r\n        protected abstract LiveData&lt;List&lt;Repo&gt;&gt; loadById(List&lt;Integer&gt; repoIds);\r\n```\r\nThis is the `Repo` class:\r\n```\r\n@Entity(indices = {@Index(&quot;id&quot;), @Index(&quot;owner_login&quot;)},\r\n        primaryKeys = {&quot;name&quot;, &quot;owner_login&quot;})\r\npublic class Repo {\r\n\r\n    public final int id;\r\n    @SerializedName(&quot;name&quot;)\r\n    public  final String name;\r\n    @SerializedName(&quot;full_name&quot;)\r\n    public  final String fullName;\r\n    @SerializedName(&quot;description&quot;)\r\n    public  final String description;\r\n    @SerializedName(&quot;stargazers_count&quot;)\r\n    public  final String stars;\r\n    @SerializedName(&quot;owner&quot;)\r\n    @Embedded(prefix = &quot;owner_&quot;)\r\n    public final Owner owner;\r\n\r\n    public Repo(int id, String name, String fullName, String description, String stars, Owner owner) {\r\n        this.id = id;\r\n        this.name = name;\r\n        this.fullName = fullName;\r\n        this.description = description;\r\n        this.stars = stars;\r\n        this.owner = owner;\r\n    }\r\n\r\n    public static class Owner{\r\n        @SerializedName(&quot;login&quot;)\r\n        public  final String login;\r\n        @SerializedName(&quot;url&quot;)\r\n        public final String url;\r\n\r\n        public Owner(String login, String url) {\r\n            this.login = login;\r\n            this.url = url;\r\n        }\r\n    }\r\n}\r\n```\r\nFinally this the `build.gradle`:\r\n```\r\nandroid {\r\n    namespace &#39;com.example.arquitecturamvvm&#39;\r\n    compileSdk 34\r\n\r\n    defaultConfig {\r\n        applicationId &quot;com.example.arquitecturamvvm&quot;\r\n        minSdk 24\r\n        targetSdk 34\r\n        versionCode 1\r\n        versionName &quot;1.0&quot;\r\n\r\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n        vectorDrawables {\r\n            useSupportLibrary true\r\n        }\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n    }\r\n\r\n    compileOptions {\r\n        sourceCompatibility = JavaVersion.VERSION_1_8\r\n        targetCompatibility = JavaVersion.VERSION_1_8\r\n    }\r\n\r\n    kotlinOptions {\r\n        jvmTarget = &#39;1.8&#39;\r\n    }\r\n    buildFeatures {\r\n        compose true\r\n    }\r\n    composeOptions {\r\n        kotlinCompilerExtensionVersion &#39;1.3.2&#39;\r\n    }\r\n    packagingOptions {\r\n        resources {\r\n            excludes += &#39;/META-INF/{AL2.0,LGPL2.1}&#39;\r\n        }\r\n    }\r\n}\r\n```","title":"Corregir error no instance(s) of type variable(s) X exist so that LiveData&lt;List&lt;Repo&gt;&gt; conforms to LiveData&lt;X&gt;","body":"<p>I'm doing a test application and the example I am following uses Java functions in Visual Studio to receive a list of integers and return a <code>LiveData</code>. Everything was OK up to this point, but when I write the example syntax it gives me the following error:</p>\n<pre><code>no instance(s) of type variable(s) X exist so that LiveData&lt;List&lt;Repo&gt;&gt; conforms to LiveData&lt;X&gt;\n</code></pre>\n<p>I understand that it must be a version problem of Android Studio. Or it could be that it is written differently?\nThis is the code I am trying to use which gives me the error:</p>\n<pre><code>public LiveData&lt;List&lt;Repo&gt;&gt; loadOrdered(List&lt;Integer&gt; repoIds) {\n    SparseIntArray order = new SparseIntArray();\n    int index = 0;\n    for (Integer repoId : repoIds) {\n        order.put(repoId, index++);\n    }\n    return Transformations.map(loadById(repoIds), new Function&lt;List&lt;Repo&gt;, List&lt;Repo&gt;&gt;() {\n        @Override\n        public List&lt;Repo&gt; apply(List&lt;Repo&gt; repositories) {\n            Collections.sort(repositories, new Comparator&lt;Repo&gt;() {\n                @Override\n                public int compare(Repo o1, Repo o2) {\n                    int pos1 = order.get(o1.id);\n                    int pos2 = order.get(o2.id);\n                    return pos1 - pos2;\n                }\n            });\n            return repositories;\n        }\n    });\n</code></pre>\n<p>I leave the declaration of this function:</p>\n<pre><code>loadById(repoIds):\n        @Query(&quot;SELECT * FROM Repo WHERE id in(:repoIds)&quot;)\n        protected abstract LiveData&lt;List&lt;Repo&gt;&gt; loadById(List&lt;Integer&gt; repoIds);\n</code></pre>\n<p>This is the <code>Repo</code> class:</p>\n<pre><code>@Entity(indices = {@Index(&quot;id&quot;), @Index(&quot;owner_login&quot;)},\n        primaryKeys = {&quot;name&quot;, &quot;owner_login&quot;})\npublic class Repo {\n\n    public final int id;\n    @SerializedName(&quot;name&quot;)\n    public  final String name;\n    @SerializedName(&quot;full_name&quot;)\n    public  final String fullName;\n    @SerializedName(&quot;description&quot;)\n    public  final String description;\n    @SerializedName(&quot;stargazers_count&quot;)\n    public  final String stars;\n    @SerializedName(&quot;owner&quot;)\n    @Embedded(prefix = &quot;owner_&quot;)\n    public final Owner owner;\n\n    public Repo(int id, String name, String fullName, String description, String stars, Owner owner) {\n        this.id = id;\n        this.name = name;\n        this.fullName = fullName;\n        this.description = description;\n        this.stars = stars;\n        this.owner = owner;\n    }\n\n    public static class Owner{\n        @SerializedName(&quot;login&quot;)\n        public  final String login;\n        @SerializedName(&quot;url&quot;)\n        public final String url;\n\n        public Owner(String login, String url) {\n            this.login = login;\n            this.url = url;\n        }\n    }\n}\n</code></pre>\n<p>Finally this the <code>build.gradle</code>:</p>\n<pre><code>android {\n    namespace 'com.example.arquitecturamvvm'\n    compileSdk 34\n\n    defaultConfig {\n        applicationId &quot;com.example.arquitecturamvvm&quot;\n        minSdk 24\n        targetSdk 34\n        versionCode 1\n        versionName &quot;1.0&quot;\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n        vectorDrawables {\n            useSupportLibrary true\n        }\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n\n    compileOptions {\n        sourceCompatibility = JavaVersion.VERSION_1_8\n        targetCompatibility = JavaVersion.VERSION_1_8\n    }\n\n    kotlinOptions {\n        jvmTarget = '1.8'\n    }\n    buildFeatures {\n        compose true\n    }\n    composeOptions {\n        kotlinCompilerExtensionVersion '1.3.2'\n    }\n    packagingOptions {\n        resources {\n            excludes += '/META-INF/{AL2.0,LGPL2.1}'\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","sts"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1694615002,"post_id":77097939,"comment_id":135914883,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":10426581,"reputation":1,"user_id":7687627,"display_name":"Mundru Suresh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694614647,"creation_date":1694614647,"question_id":77097939,"body_markdown":"I have downloaded the latest version of spring tool suite (spring-tool-suite-4-4.19.1.RELEASE), when I tried to import spring getting started content, it return as below error:  Get started Guide SunCertPathBuilderException: unable to find valid certification path to requested target\r\n\r\ni tried to imort the proxy certificate but still i face the same issue","title":"Get started Guide SunCertPathBuilderException: unable to find valid certification path to requested target","body":"<p>I have downloaded the latest version of spring tool suite (spring-tool-suite-4-4.19.1.RELEASE), when I tried to import spring getting started content, it return as below error:  Get started Guide SunCertPathBuilderException: unable to find valid certification path to requested target</p>\n<p>i tried to imort the proxy certificate but still i face the same issue</p>\n"},{"tags":["java","sorting","java-stream","groupingby"],"comments":[{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1457453479,"post_id":35872236,"comment_id":59408575,"body_markdown":"Nope, there isn&#39;t.  (That said -- why do you think it wouldn&#39;t work in parallel streams?  Sure it would.)","body":"Nope, there isn&#39;t.  (That said -- why do you think it wouldn&#39;t work in parallel streams?  Sure it would.)"},{"owner":{"account_id":7635619,"reputation":1640,"user_id":5789263,"accept_rate":100,"display_name":"ctst"},"score":0,"creation_date":1457453837,"post_id":35872236,"comment_id":59408832,"body_markdown":"@LouisWasserman Are you sure about that (the second part of your comment)? Looking at the docs of `sorted` and `collect` I have a strong hunch this will break with parallel streaming, but I can be completely wrong here. Feel free, to correct me in my question, wouldn&#39;t want to spread wrong information.","body":"@LouisWasserman Are you sure about that (the second part of your comment)? Looking at the docs of <code>sorted</code> and <code>collect</code> I have a strong hunch this will break with parallel streaming, but I can be completely wrong here. Feel free, to correct me in my question, wouldn&#39;t want to spread wrong information."},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1457453864,"post_id":35872236,"comment_id":59408847,"body_markdown":"Yes, yes I am.  Parallelism doesn&#39;t interfere with the ordering property of a stream.","body":"Yes, yes I am.  Parallelism doesn&#39;t interfere with the ordering property of a stream."},{"owner":{"account_id":1936546,"reputation":133675,"user_id":1743880,"accept_rate":100,"display_name":"Tunaki"},"score":2,"creation_date":1457454903,"post_id":35872236,"comment_id":59409587,"body_markdown":"Probably because there are no built-in `SortedList`: http://stackoverflow.com/q/8725387/1743880","body":"Probably because there are no built-in <code>SortedList</code>: <a href=\"http://stackoverflow.com/q/8725387/1743880\">stackoverflow.com/q/8725387/1743880</a>"},{"owner":{"account_id":4440133,"reputation":13373,"user_id":3614835,"accept_rate":67,"display_name":"Jeffrey Bosboom"},"score":0,"creation_date":1457474811,"post_id":35872236,"comment_id":59421290,"body_markdown":"You can slightly compact the second code snippet using `Collectors.collectingAndThen(groupingBy(Person::getGender), l -&gt; {Collections.sort(l, Person::compareByAge); return l;});`, which may be worth it if you store and reuse the resulting Collector in many places.  But if you want to sort while collecting, you&#39;ll need to write it yourself.  This kind of makes sense, because it&#39;s probably faster to build an unsorted list and quick/merge sort at the end, rather than maintaining a sorted list during collection by inserting each element in its place (insertion sort).","body":"You can slightly compact the second code snippet using <code>Collectors.collectingAndThen(groupingBy(Person::getGender), l -&gt; {Collections.sort(l, Person::compareByAge); return l;});</code>, which may be worth it if you store and reuse the resulting Collector in many places.  But if you want to sort while collecting, you&#39;ll need to write it yourself.  This kind of makes sense, because it&#39;s probably faster to build an unsorted list and quick/merge sort at the end, rather than maintaining a sorted list during collection by inserting each element in its place (insertion sort)."},{"owner":{"account_id":6243460,"reputation":97907,"user_id":4856258,"accept_rate":100,"display_name":"Tagir Valeev"},"score":0,"creation_date":1457496229,"post_id":35872236,"comment_id":59428085,"body_markdown":"@JeffreyBosboom, note that [by specification](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#groupingBy-java.util.function.Function-), `groupingBy` collector does not guarantee that Lists created inside map are mutable. Thus theoretically your code might break in future Java versions. It would be more correct to group via `Collectors.groupingBy(Person::getGender, Collectors.toCollection(ArrayList::new))`.","body":"@JeffreyBosboom, note that <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#groupingBy-java.util.function.Function-\" rel=\"nofollow noreferrer\">by specification</a>, <code>groupingBy</code> collector does not guarantee that Lists created inside map are mutable. Thus theoretically your code might break in future Java versions. It would be more correct to group via <code>Collectors.groupingBy(Person::getGender, Collectors.toCollection(ArrayList::new))</code>."},{"owner":{"account_id":4440133,"reputation":13373,"user_id":3614835,"accept_rate":67,"display_name":"Jeffrey Bosboom"},"score":0,"creation_date":1457496746,"post_id":35872236,"comment_id":59428190,"body_markdown":"@TagirValeev Good catch.  Switching collectors to a linked-list-of-segments implementation would allow for better merging, but if the developers are serious about doing that, they should have returned an immutable list in the first place, because lots of code will accidentally depend on the mutability.  Given Java&#39;s preference for backwards compatibility, it will be interesting to see if they&#39;re willing to break things.  (Really, the problem is that mutability should be part of the type, but that ship sailed in Java 1.3.)","body":"@TagirValeev Good catch.  Switching collectors to a linked-list-of-segments implementation would allow for better merging, but if the developers are serious about doing that, they should have returned an immutable list in the first place, because lots of code will accidentally depend on the mutability.  Given Java&#39;s preference for backwards compatibility, it will be interesting to see if they&#39;re willing to break things.  (Really, the problem is that mutability should be part of the type, but that ship sailed in Java 1.3.)"}],"answers":[{"comments":[{"owner":{"account_id":6243460,"reputation":97907,"user_id":4856258,"accept_rate":100,"display_name":"Tagir Valeev"},"score":4,"creation_date":1457572197,"post_id":35901839,"comment_id":59471804,"body_markdown":"Erm... AFAIK, downstream finisher is [executed](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/util/stream/Collectors.java#921) sequentially for all map entries during the upstream finisher execution and upstream finisher is always [executed](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/util/stream/ReferencePipeline.java#503) only once in a caller thread. Finisher is never executed on intermediate containers. That would not work as finisher may change the object type.","body":"Erm... AFAIK, downstream finisher is <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/util/stream/Collectors.java#921\" rel=\"nofollow noreferrer\">executed</a> sequentially for all map entries during the upstream finisher execution and upstream finisher is always <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/util/stream/ReferencePipeline.java#503\" rel=\"nofollow noreferrer\">executed</a> only once in a caller thread. Finisher is never executed on intermediate containers. That would not work as finisher may change the object type."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1457606013,"post_id":35901839,"comment_id":59486674,"body_markdown":"@Tagir Valeev: you’re right, I was focused too much on the merge function.","body":"@Tagir Valeev: you’re right, I was focused too much on the merge function."},{"owner":{"account_id":7635619,"reputation":1640,"user_id":5789263,"accept_rate":100,"display_name":"ctst"},"score":0,"creation_date":1457613019,"post_id":35901839,"comment_id":59491503,"body_markdown":"Thanks for your elaborated answer! I am still checking the performances (which vary heavily depending on amount of persons (and gender :-) ) and if sequential or parallel streams are used). Hopefully some of this will get implemented in future versions.","body":"Thanks for your elaborated answer! I am still checking the performances (which vary heavily depending on amount of persons (and gender :-) ) and if sequential or parallel streams are used). Hopefully some of this will get implemented in future versions."}],"tags":[],"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"comment_count":3,"down_vote_count":0,"up_vote_count":45,"is_accepted":true,"score":45,"last_activity_date":1457605560,"creation_date":1457555039,"answer_id":35901839,"question_id":35872236,"body_markdown":"When using `sorted(comparator)` on the stream before the `collect` operation, the stream has to buffer the entire stream contents to be able to sort it and the sorting may involve much more data movement within that buffer, compared to sorting the smaller lists of the groups afterwards. So the performance is not as good as sorting the individual groups though the implementation will utilize multiple cores if parallel processing has been enabled.\r\n\r\nBut note that using `sortedListsByGender.values().forEach(…)` is not a parallelizable operation and even using `sortedListsByGender.values().parallelStream().forEach(…)` would only allow parallel processing of groups while each sort operation still is sequential.\r\n\r\nWhen performing the sort operation within a collector as in\r\n\r\n    static &lt;T&gt; Collector&lt;T,?,List&lt;T&gt;&gt; toSortedList(Comparator&lt;? super T&gt; c) {\r\n        return Collectors.collectingAndThen(\r\n            Collectors.toCollection(ArrayList::new), l-&gt;{ l.sort(c); return l; } );\r\n    }\r\n&#160;\r\n\r\n    Map&lt;Gender, List&lt;Person&gt;&gt; sortedListsByGender = roster.stream()\r\n        .collect(Collectors.groupingBy(Person::getGender, toSortedList(Person::compareByAge)));\r\n\r\nthe sort operation behaves the same (thanks to Tagir Valeev for correcting me), but you can easily check how a sort-on-insertion strategy performs. Just change the collector implementation to:\r\n\r\n    static &lt;T&gt; Collector&lt;T,?,List&lt;T&gt;&gt; toSortedList(Comparator&lt;? super T&gt; c) {\r\n        return Collectors.collectingAndThen(\r\n            Collectors.toCollection(()-&gt;new TreeSet&lt;&gt;(c)), ArrayList::new);\r\n    }\r\n\r\nFor completeness, if you want a collector which inserts sorted into an `ArrayList` in the first place to avoid the final copy step, you can use a more elaborated collector like this:\r\n\r\n    static &lt;T&gt; Collector&lt;T,?,List&lt;T&gt;&gt; toSortedList(Comparator&lt;? super T&gt; c) {\r\n        return Collector.of(ArrayList::new,\r\n            (l,t) -&gt; {\r\n                int ix=Collections.binarySearch(l, t, c);\r\n                l.add(ix&lt;0? ~ix: ix, t);\r\n            },\r\n            (list1,list2) -&gt; {\r\n                final int s1=list1.size();\r\n                if(list1.isEmpty()) return list2;\r\n                if(!list2.isEmpty()) {\r\n                    list1.addAll(list2);\r\n                    if(c.compare(list1.get(s1-1), list2.get(0))&gt;0)\r\n                        list1.sort(c);\r\n                }\r\n                return list1;\r\n            });\r\n    }\r\nIt’s efficient for the sequential usage but its merge function is not optimal. The underlying sort algorithm will benefit from presorted ranges but has to find these ranges first despite our merge function actually knows these ranges. Unfortunately, there’s no public API in the JRE allowing us to utilize these information (efficiently; we can pass `subList`s to `binarySearch` but creating a new sub list for each element of `list2` may turn out to be too expensive). If we want to raise the performance of the parallel execution further, we have to re-implement the merge part of the sorting algorithm:\r\n\r\n    static &lt;T&gt; Collector&lt;T,?,List&lt;T&gt;&gt; toSortedList(Comparator&lt;? super T&gt; c) {\r\n        return Collector.of(ArrayList::new,\r\n            (l,t) -&gt; l.add(insertPos(l, 0, l.size(), t, c), t),\r\n            (list1,list2) -&gt; merge(list1, list2, c));\r\n    }\r\n    static &lt;T&gt; List&lt;T&gt; merge(List&lt;T&gt; list1, List&lt;T&gt; list2, Comparator&lt;? super T&gt; c) {\r\n        if(list1.isEmpty()) return list2;\r\n        for(int ix1=0, ix2=0, num1=list1.size(), num2=list2.size(); ix2&lt;num2; ix2++, num1++) {\r\n            final T element = list2.get(ix2);\r\n            ix1=insertPos(list1, ix1, num1, element, c);\r\n            list1.add(ix1, element);\r\n            if(ix1==num1) {\r\n                while(++ix2&lt;num2) list1.add(list2.get(ix2));\r\n                return list1;\r\n            }\r\n        }\r\n        return list1;\r\n    }\r\n    static &lt;T&gt; int insertPos(\r\n        List&lt;? extends T&gt; list, int low, int high, T t, Comparator&lt;? super T&gt; c) {\r\n        high--;\r\n        while(low &lt;= high) {\r\n            int mid = (low+high)&gt;&gt;&gt;1, cmp = c.compare(list.get(mid), t);\r\n            if(cmp &lt; 0) low = mid + 1;\r\n            else if(cmp &gt; 0) high = mid - 1;\r\n            else {\r\n                mid++;\r\n                while(mid&lt;=high &amp;&amp; c.compare(list.get(mid), t)==0) mid++;\r\n                return mid;\r\n            }\r\n        }\r\n        return low;\r\n    }\r\nNote that this last solution, unlike the simple `binarySearch` based insertion, is a stable sort implementation, i.e. in your case, `Person`s with the same age and `Gender` won’t change their relative order, if the source stream has a defined encounter order.\r\n","title":"sorting Lists after groupingBy","body":"<p>When using <code>sorted(comparator)</code> on the stream before the <code>collect</code> operation, the stream has to buffer the entire stream contents to be able to sort it and the sorting may involve much more data movement within that buffer, compared to sorting the smaller lists of the groups afterwards. So the performance is not as good as sorting the individual groups though the implementation will utilize multiple cores if parallel processing has been enabled.</p>\n\n<p>But note that using <code>sortedListsByGender.values().forEach(…)</code> is not a parallelizable operation and even using <code>sortedListsByGender.values().parallelStream().forEach(…)</code> would only allow parallel processing of groups while each sort operation still is sequential.</p>\n\n<p>When performing the sort operation within a collector as in</p>\n\n<pre><code>static &lt;T&gt; Collector&lt;T,?,List&lt;T&gt;&gt; toSortedList(Comparator&lt;? super T&gt; c) {\n    return Collectors.collectingAndThen(\n        Collectors.toCollection(ArrayList::new), l-&gt;{ l.sort(c); return l; } );\n}\n</code></pre>\n\n<p> </p>\n\n<pre><code>Map&lt;Gender, List&lt;Person&gt;&gt; sortedListsByGender = roster.stream()\n    .collect(Collectors.groupingBy(Person::getGender, toSortedList(Person::compareByAge)));\n</code></pre>\n\n<p>the sort operation behaves the same (thanks to Tagir Valeev for correcting me), but you can easily check how a sort-on-insertion strategy performs. Just change the collector implementation to:</p>\n\n<pre><code>static &lt;T&gt; Collector&lt;T,?,List&lt;T&gt;&gt; toSortedList(Comparator&lt;? super T&gt; c) {\n    return Collectors.collectingAndThen(\n        Collectors.toCollection(()-&gt;new TreeSet&lt;&gt;(c)), ArrayList::new);\n}\n</code></pre>\n\n<p>For completeness, if you want a collector which inserts sorted into an <code>ArrayList</code> in the first place to avoid the final copy step, you can use a more elaborated collector like this:</p>\n\n<pre><code>static &lt;T&gt; Collector&lt;T,?,List&lt;T&gt;&gt; toSortedList(Comparator&lt;? super T&gt; c) {\n    return Collector.of(ArrayList::new,\n        (l,t) -&gt; {\n            int ix=Collections.binarySearch(l, t, c);\n            l.add(ix&lt;0? ~ix: ix, t);\n        },\n        (list1,list2) -&gt; {\n            final int s1=list1.size();\n            if(list1.isEmpty()) return list2;\n            if(!list2.isEmpty()) {\n                list1.addAll(list2);\n                if(c.compare(list1.get(s1-1), list2.get(0))&gt;0)\n                    list1.sort(c);\n            }\n            return list1;\n        });\n}\n</code></pre>\n\n<p>It’s efficient for the sequential usage but its merge function is not optimal. The underlying sort algorithm will benefit from presorted ranges but has to find these ranges first despite our merge function actually knows these ranges. Unfortunately, there’s no public API in the JRE allowing us to utilize these information (efficiently; we can pass <code>subList</code>s to <code>binarySearch</code> but creating a new sub list for each element of <code>list2</code> may turn out to be too expensive). If we want to raise the performance of the parallel execution further, we have to re-implement the merge part of the sorting algorithm:</p>\n\n<pre><code>static &lt;T&gt; Collector&lt;T,?,List&lt;T&gt;&gt; toSortedList(Comparator&lt;? super T&gt; c) {\n    return Collector.of(ArrayList::new,\n        (l,t) -&gt; l.add(insertPos(l, 0, l.size(), t, c), t),\n        (list1,list2) -&gt; merge(list1, list2, c));\n}\nstatic &lt;T&gt; List&lt;T&gt; merge(List&lt;T&gt; list1, List&lt;T&gt; list2, Comparator&lt;? super T&gt; c) {\n    if(list1.isEmpty()) return list2;\n    for(int ix1=0, ix2=0, num1=list1.size(), num2=list2.size(); ix2&lt;num2; ix2++, num1++) {\n        final T element = list2.get(ix2);\n        ix1=insertPos(list1, ix1, num1, element, c);\n        list1.add(ix1, element);\n        if(ix1==num1) {\n            while(++ix2&lt;num2) list1.add(list2.get(ix2));\n            return list1;\n        }\n    }\n    return list1;\n}\nstatic &lt;T&gt; int insertPos(\n    List&lt;? extends T&gt; list, int low, int high, T t, Comparator&lt;? super T&gt; c) {\n    high--;\n    while(low &lt;= high) {\n        int mid = (low+high)&gt;&gt;&gt;1, cmp = c.compare(list.get(mid), t);\n        if(cmp &lt; 0) low = mid + 1;\n        else if(cmp &gt; 0) high = mid - 1;\n        else {\n            mid++;\n            while(mid&lt;=high &amp;&amp; c.compare(list.get(mid), t)==0) mid++;\n            return mid;\n        }\n    }\n    return low;\n}\n</code></pre>\n\n<p>Note that this last solution, unlike the simple <code>binarySearch</code> based insertion, is a stable sort implementation, i.e. in your case, <code>Person</code>s with the same age and <code>Gender</code> won’t change their relative order, if the source stream has a defined encounter order.</p>\n"},{"tags":[],"owner":{"account_id":1317626,"reputation":187,"user_id":1264157,"accept_rate":50,"display_name":"Tulshiram Pawde"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694614344,"creation_date":1694583737,"answer_id":77094331,"question_id":35872236,"body_markdown":"Yes, we can sort by gender and then sort by age in one line. Below line of code first sort by gender and then apply sort by age [assuming getGender() &amp; getAge() as getter]. But here sort will be based on Gender.\r\n\r\n\r\n    roster.stream().sorted(Comparator.comparing(Person::getGender).thenComparing(Person::getAge, String::compareToIgnoreCase)).collect(Collectors.toList()))\r\n\r\n","title":"sorting Lists after groupingBy","body":"<p>Yes, we can sort by gender and then sort by age in one line. Below line of code first sort by gender and then apply sort by age [assuming getGender() &amp; getAge() as getter]. But here sort will be based on Gender.</p>\n<pre><code>roster.stream().sorted(Comparator.comparing(Person::getGender).thenComparing(Person::getAge, String::compareToIgnoreCase)).collect(Collectors.toList()))\n</code></pre>\n"}],"owner":{"account_id":7635619,"reputation":1640,"user_id":5789263,"accept_rate":100,"display_name":"ctst"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40901,"favorite_count":0,"down_vote_count":0,"up_vote_count":55,"accepted_answer_id":35901839,"answer_count":2,"score":55,"last_activity_date":1694614344,"creation_date":1457453211,"question_id":35872236,"body_markdown":"I am wondering, if there is already an implemented feature in streams (or Collectors) which has sorted Lists as values. E.g. the following codes both produce gender-grouped Lists of persons, sorted by age. The first solution has some overhead sorting (and looks a little bit scruffy). The second solution needs to look at every person twice but does the job in a pretty way.\r\n\r\nFirst sorting then grouping in one stream:\r\n\r\n    Map&lt;Gender, List&lt;Person&gt;&gt; sortedListsByGender = (List&lt;Person&gt;) roster\r\n\t\t\t.stream()\r\n\t\t\t.sorted(Person::compareByAge)\r\n\t\t\t.collect(Collectors.groupingBy(Person::getGender));\r\n\r\nFirst grouping, then sorting every value:\r\n\r\n    Map&lt;Gender, List&lt;Person&gt;&gt; sortedListsByGender = (List&lt;Person&gt;) roster\r\n\t\t\t.stream()\r\n\t\t\t.collect(Collectors.groupingBy(Person::getGender));\r\n    sortedListsByGender.values()\r\n            .forEach(list -&gt; Collections.sort(list, Person::compareByAge));\r\n\r\nI am just wondering, if there is already something implemented, which does this in one run, like `groupingBySorted`.","title":"sorting Lists after groupingBy","body":"<p>I am wondering, if there is already an implemented feature in streams (or Collectors) which has sorted Lists as values. E.g. the following codes both produce gender-grouped Lists of persons, sorted by age. The first solution has some overhead sorting (and looks a little bit scruffy). The second solution needs to look at every person twice but does the job in a pretty way.</p>\n\n<p>First sorting then grouping in one stream:</p>\n\n<pre><code>Map&lt;Gender, List&lt;Person&gt;&gt; sortedListsByGender = (List&lt;Person&gt;) roster\n        .stream()\n        .sorted(Person::compareByAge)\n        .collect(Collectors.groupingBy(Person::getGender));\n</code></pre>\n\n<p>First grouping, then sorting every value:</p>\n\n<pre><code>Map&lt;Gender, List&lt;Person&gt;&gt; sortedListsByGender = (List&lt;Person&gt;) roster\n        .stream()\n        .collect(Collectors.groupingBy(Person::getGender));\nsortedListsByGender.values()\n        .forEach(list -&gt; Collections.sort(list, Person::compareByAge));\n</code></pre>\n\n<p>I am just wondering, if there is already something implemented, which does this in one run, like <code>groupingBySorted</code>.</p>\n"},{"tags":["java","spring","lombok","springdoc"],"owner":{"account_id":1072602,"reputation":3808,"user_id":1071515,"accept_rate":93,"display_name":"tomaytotomato"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694614339,"creation_date":1694614339,"question_id":77097901,"body_markdown":"I have setup a new Spring Boot 3 project with the OpenAPI starter dependency\r\n\r\n\r\n```xml\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.2.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n```\r\n\r\nWith the following class annotated with @Data\r\n\r\n```java\r\n@Data\r\npublic class SearchRequestDto {\r\n\r\n    private String make;\r\n    private String model;\r\n    private String trim;\r\n}\r\n\r\n```\r\n\r\nHowever when viewing the Swagger UI it shows the schema of this request as being empty.\r\n\r\nAssuming it was an issue with reflection, I added my own getters/setters manually and it showed the properties of the class on Swagger UI.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nHow can I configure Spring OpenAPI to use the generated Lombok classes?\r\n\r\n\r\nGoogling only results in code generation (OpenAPI spec --&gt; Java POJO) for example [here][2]\r\n\r\n\r\nI have the Lombok annotation processor correctly configured in the Maven compiler plugin\r\n\r\n  [1]: https://i.stack.imgur.com/GPdMH.png\r\n  [2]: https://github.com/OpenAPITools/openapi-generator/issues/324#issuecomment-785438335","title":"SpringDoc Open API MVC Starter not showing fields of class annotated with Lombok @Data?","body":"<p>I have setup a new Spring Boot 3 project with the OpenAPI starter dependency</p>\n<pre class=\"lang-xml prettyprint-override\"><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n            &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\n            &lt;version&gt;2.2.0&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>With the following class annotated with @Data</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\npublic class SearchRequestDto {\n\n    private String make;\n    private String model;\n    private String trim;\n}\n\n</code></pre>\n<p>However when viewing the Swagger UI it shows the schema of this request as being empty.</p>\n<p>Assuming it was an issue with reflection, I added my own getters/setters manually and it showed the properties of the class on Swagger UI.</p>\n<p><a href=\"https://i.stack.imgur.com/GPdMH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GPdMH.png\" alt=\"enter image description here\" /></a></p>\n<p>How can I configure Spring OpenAPI to use the generated Lombok classes?</p>\n<p>Googling only results in code generation (OpenAPI spec --&gt; Java POJO) for example <a href=\"https://github.com/OpenAPITools/openapi-generator/issues/324#issuecomment-785438335\" rel=\"nofollow noreferrer\">here</a></p>\n<p>I have the Lombok annotation processor correctly configured in the Maven compiler plugin</p>\n"},{"tags":["java","divide-and-conquer"],"comments":[{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1694612505,"post_id":77097454,"comment_id":135914219,"body_markdown":"Please provide all input data, expected output, and your output.","body":"Please provide all input data, expected output, and your output."},{"owner":{"account_id":26850915,"reputation":33,"user_id":20535828,"display_name":"Nom"},"score":0,"creation_date":1694613312,"post_id":77097454,"comment_id":135914457,"body_markdown":"@WJS I edited my question. If you need more inputs please let me know. I will be happy to get some and add them as well.","body":"@WJS I edited my question. If you need more inputs please let me know. I will be happy to get some and add them as well."},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1694617013,"post_id":77097454,"comment_id":135915388,"body_markdown":"I found out that adding the `height` to  `points.add(new Point(width, 0));` will result in the next to last answer being correct.  It doesn&#39;t work for the other incorrect answers but it may give you a clue.","body":"I found out that adding the <code>height</code> to  <code>points.add(new Point(width, 0));</code> will result in the next to last answer being correct.  It doesn&#39;t work for the other incorrect answers but it may give you a clue."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1694621723,"post_id":77097454,"comment_id":135916345,"body_markdown":"@Nom, the maximum area of a rectangle can be found with _⌈p &#247; 4⌉ ⨯ ⌊p &#247; 4⌋_, where _p_ is the perimeter; how do the _points_ play a role in this solution?","body":"@Nom, the maximum area of a rectangle can be found with <i>⌈p &#247; 4⌉ ⨯ ⌊p &#247; 4⌋</i>, where <i>p</i> is the perimeter; how do the <i>points</i> play a role in this solution?"}],"owner":{"account_id":26850915,"reputation":33,"user_id":20535828,"display_name":"Nom"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1694614262,"creation_date":1694611197,"question_id":77097454,"body_markdown":"The task is to write a Java program that uses a divide and conquer approach to find the rectangle with the maximum surface area that can be drawn within a given rectangle, without containing any of a set of points. \r\nThe base of the rectangle must be on the x-axis. The input data is provided in a file, with the first line containing the dimensions of the outer rectangle (which is our working space), the second line containing the number of points inside this area, and the remaining lines containing the coordinates of the points, sorted in increasing order of abscissa.\r\n\r\nI have written this code but I still have issues as it does not always give the correct answer, and I don&#39;t know why. I believe the height of the rectangle is the issue.\r\n\r\nI tried to do the dividing on the points with lowest ordinates.\r\n\r\n\r\n```\r\nimport java.util.*;\r\nimport java.io.*;\r\n\r\nclass Point{\r\n    int x, y;\r\n    public Point(int x, int y) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n}\r\n\r\npublic class MaxRectangle {\r\n    static List&lt;Point&gt; points = new ArrayList&lt;&gt;();\r\n    static int width, height;\r\n\r\n    public static void main(String[] args) throws FileNotFoundException {\r\n        // Load points from file\r\n        File file = new File(&quot;input.txt&quot;);\r\n        Scanner scanner = new Scanner(file);\r\n\r\n        width = scanner.nextInt();  \r\n        height = scanner.nextInt();  \r\n        int n = scanner.nextInt();  \r\n\r\n        points.add(new Point(0, 0));\r\n\r\n        for (int i = 0; i &lt; n; i++) {\r\n            points.add(new Point(scanner.nextInt(), scanner.nextInt()));\r\n        }\r\n        \r\n        points.add(new Point(width, 0));\r\n\r\n        scanner.close();\r\n\r\n        System.out.println(divideAndConquer(0, points.size() -1)); \r\n    }\r\n\r\n    static int divideAndConquer(int left, int right) {\r\n        if (left &gt; right) {\r\n            return 0;\r\n        }\r\n\r\n        int minIndex = left;\r\n        for (int i = left + 1; i &lt;= right; i++) {\r\n            if (points.get(i).y &lt; points.get(minIndex).y &amp;&amp; points.get(i).y !=0) {\r\n            \tminIndex = i;\r\n            }\r\n        }\r\n\r\n        int leftArea = divideAndConquer(left, minIndex - 1);\r\n        int rightArea = divideAndConquer(minIndex + 1, right);\r\n        int minArea = points.get(minIndex).y * (points.get(right).x - (left &gt; 0 ? points.get(left - 1).x : 0));\r\n\r\n        return Math.max(Math.max(leftArea, rightArea), minArea);\r\n    }\r\n}\r\n```\r\n**Here is some test data.**\r\n\r\nAs previously stated:\r\n\r\n- First line containing the dimensions of the outer rectangle (which is our working space)\r\n- Second line containing the number of points inside this area.\r\n- Remaining lines containing the coordinates of the points, sorted in increasing order of abscissa.\r\n\r\nSome input data with wrong output given by this program:\r\n\r\n    100000 500\r\n    10\r\n    106 100\r\n    1090 420\r\n    11000 495\r\n    22000 402\r\n    45000 376\r\n    65000 120\r\n    68000 360\r\n    78000 390\r\n    80000 100\r\n    99001 322\r\n\r\nThe expected output is 24400144 yet the answer I got is 16880144.\r\n\r\nAnother one is:\r\n\r\n    100 100\r\n    2\r\n    0 0\r\n    100 0\r\n\r\nThe expected output is 10000 but I got 0.\r\n\r\nAnother one is:\r\n\r\n    100000 500\r\n    5\r\n    1 4\r\n    2 3\r\n    3 2\r\n    5 1\r\n    5 2\r\n\r\nThe expected output is 49997500 but I got 199990.\r\n\r\nOne of the test cases that worked fine is:\r\n\r\n    10 5\r\n    4\r\n    1 4\r\n    2 3\r\n    3 1\r\n    4 5\r\n\r\nThe expected area is 35 and I got 35.","title":"Solving Maximum Area Rectangle using a divide and conquer approach","body":"<p>The task is to write a Java program that uses a divide and conquer approach to find the rectangle with the maximum surface area that can be drawn within a given rectangle, without containing any of a set of points.\nThe base of the rectangle must be on the x-axis. The input data is provided in a file, with the first line containing the dimensions of the outer rectangle (which is our working space), the second line containing the number of points inside this area, and the remaining lines containing the coordinates of the points, sorted in increasing order of abscissa.</p>\n<p>I have written this code but I still have issues as it does not always give the correct answer, and I don't know why. I believe the height of the rectangle is the issue.</p>\n<p>I tried to do the dividing on the points with lowest ordinates.</p>\n<pre><code>import java.util.*;\nimport java.io.*;\n\nclass Point{\n    int x, y;\n    public Point(int x, int y) {\n        this.x = x;\n        this.y = y;\n    }\n}\n\npublic class MaxRectangle {\n    static List&lt;Point&gt; points = new ArrayList&lt;&gt;();\n    static int width, height;\n\n    public static void main(String[] args) throws FileNotFoundException {\n        // Load points from file\n        File file = new File(&quot;input.txt&quot;);\n        Scanner scanner = new Scanner(file);\n\n        width = scanner.nextInt();  \n        height = scanner.nextInt();  \n        int n = scanner.nextInt();  \n\n        points.add(new Point(0, 0));\n\n        for (int i = 0; i &lt; n; i++) {\n            points.add(new Point(scanner.nextInt(), scanner.nextInt()));\n        }\n        \n        points.add(new Point(width, 0));\n\n        scanner.close();\n\n        System.out.println(divideAndConquer(0, points.size() -1)); \n    }\n\n    static int divideAndConquer(int left, int right) {\n        if (left &gt; right) {\n            return 0;\n        }\n\n        int minIndex = left;\n        for (int i = left + 1; i &lt;= right; i++) {\n            if (points.get(i).y &lt; points.get(minIndex).y &amp;&amp; points.get(i).y !=0) {\n                minIndex = i;\n            }\n        }\n\n        int leftArea = divideAndConquer(left, minIndex - 1);\n        int rightArea = divideAndConquer(minIndex + 1, right);\n        int minArea = points.get(minIndex).y * (points.get(right).x - (left &gt; 0 ? points.get(left - 1).x : 0));\n\n        return Math.max(Math.max(leftArea, rightArea), minArea);\n    }\n}\n</code></pre>\n<p><strong>Here is some test data.</strong></p>\n<p>As previously stated:</p>\n<ul>\n<li>First line containing the dimensions of the outer rectangle (which is our working space)</li>\n<li>Second line containing the number of points inside this area.</li>\n<li>Remaining lines containing the coordinates of the points, sorted in increasing order of abscissa.</li>\n</ul>\n<p>Some input data with wrong output given by this program:</p>\n<pre><code>100000 500\n10\n106 100\n1090 420\n11000 495\n22000 402\n45000 376\n65000 120\n68000 360\n78000 390\n80000 100\n99001 322\n</code></pre>\n<p>The expected output is 24400144 yet the answer I got is 16880144.</p>\n<p>Another one is:</p>\n<pre><code>100 100\n2\n0 0\n100 0\n</code></pre>\n<p>The expected output is 10000 but I got 0.</p>\n<p>Another one is:</p>\n<pre><code>100000 500\n5\n1 4\n2 3\n3 2\n5 1\n5 2\n</code></pre>\n<p>The expected output is 49997500 but I got 199990.</p>\n<p>One of the test cases that worked fine is:</p>\n<pre><code>10 5\n4\n1 4\n2 3\n3 1\n4 5\n</code></pre>\n<p>The expected area is 35 and I got 35.</p>\n"},{"tags":["java","micrometer","spring-micrometer","micrometer-tracing"],"answers":[{"tags":[],"owner":{"account_id":4640,"reputation":6242,"user_id":7059,"accept_rate":90,"display_name":"S&#233;bastien Nussbaumer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694614145,"creation_date":1694614145,"answer_id":77097876,"question_id":77090898,"body_markdown":"Got the answer from Marcin Grzejszczak : you have to use a NullObservation to clear all the thread stuff and create a new observation from there :  \r\n\r\n```\r\nnew NullObservation(observationRegistry)\r\n        .observe(() -&gt; Observation.start(name, observationRegistry)\r\n                           .observe(() -&gt; {\r\n                               // code to execute with a new observation\r\n                           }));\r\n```","title":"How to properly create a new trace with micrometer and spring boot 3","body":"<p>Got the answer from Marcin Grzejszczak : you have to use a NullObservation to clear all the thread stuff and create a new observation from there :</p>\n<pre><code>new NullObservation(observationRegistry)\n        .observe(() -&gt; Observation.start(name, observationRegistry)\n                           .observe(() -&gt; {\n                               // code to execute with a new observation\n                           }));\n</code></pre>\n"}],"owner":{"account_id":4640,"reputation":6242,"user_id":7059,"accept_rate":90,"display_name":"S&#233;bastien Nussbaumer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1467,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1694614145,"creation_date":1694534834,"question_id":77090898,"body_markdown":"In some rare cases, I have to create a completely new trace, separate from any parent TraceContext or ObservationContext. \r\n\r\nAn example : I could have an api that starts the processing of 100 items, and let&#39;s say that for each of these items there will be feign calls, spring cloud stream hops, etc...\r\nSpring will automatically creates an ObservationContext from the api, so I will have the same trace for the api call and all the processing for each of these items. I&#39;m using kibana, If I find an error log and filters on the traceId I get all the items, it&#39;s almost the same as no correlation at all, there are too many lines. I can&#39;t correlate on the spanId either, new spans are created all the time !\r\n\r\nSo in some specific and controlled cases I want to start a new trace for each of these items : I know I will loose the correlation with the api call, but that&#39;s OK.\r\n\r\nI&#39;ve played quite extensively with the ObservationRegistry, the ContextSnapshot, etc... but can&#39;t get it to working. The code always finds a way to find the parent ObservationContext of TracingContext.\r\n\r\nIdeally I&#39;d like to \r\n- backup the current trace context\r\n- create a new trace context from scratch\r\n- execute some code with that new trace context\r\n- restore the former trace context\r\n\r\nThis could be done quite easily before (with sleuth) ... but now it&#39;s a head scratcher :smile:\r\n\r\nI don&#39;t know if this helps but I&#39;m looking for the `runWithNewTrace` method that would be used this way :   \r\n\r\n```java\r\nList&lt;String&gt; traceIds = new ArrayList&lt;&gt;();\r\n\r\nObservation.createNotStarted(&quot;test.traceObservation&quot;, observationRegistry) // 1\r\n        .contextualName(&quot;create test with Observation API&quot;) // 2\r\n        .observe(() -&gt; {\r\n            traceIds.add(getCurrentTraceId());\r\n            runWithNewTrace(&quot;test&quot;, () -&gt; traceIds.add(getCurrentTraceId()));\r\n            traceIds.add(getCurrentTraceId());\r\n        });\r\n\r\nString traceIdBefore = traceIds.get(0);\r\nString traceIdThatShouldBeDifferent = traceIds.get(1);\r\nString traceIdAfterThatShouldBeSameAsBefore = traceIds.get(2);\r\n\r\nassertThat(traceIdThatShouldBeDifferent).isNotNull().isNotEqualTo(&quot;no-trace&quot;);\r\nassertThat(traceIdBefore).isNotEqualTo(traceIdThatShouldBeDifferent);\r\nassertThat(traceIdBefore).isEqualTo(traceIdAfterThatShouldBeSameAsBefore);\r\n\r\n```\r\n\r\ngetTraceId looks like this :  \r\n\r\n```java\r\npublic String getCurrentTraceId() {\r\n    Span currentSpan = tracer.currentSpan();\r\n    if (currentSpan != null &amp;&amp; currentSpan.context() != null) {\r\n        return currentSpan.context().traceId();\r\n    }\r\n    return &quot;no-trace&quot;;\r\n}\r\n```\r\n\r\n\r\n","title":"How to properly create a new trace with micrometer and spring boot 3","body":"<p>In some rare cases, I have to create a completely new trace, separate from any parent TraceContext or ObservationContext.</p>\n<p>An example : I could have an api that starts the processing of 100 items, and let's say that for each of these items there will be feign calls, spring cloud stream hops, etc...\nSpring will automatically creates an ObservationContext from the api, so I will have the same trace for the api call and all the processing for each of these items. I'm using kibana, If I find an error log and filters on the traceId I get all the items, it's almost the same as no correlation at all, there are too many lines. I can't correlate on the spanId either, new spans are created all the time !</p>\n<p>So in some specific and controlled cases I want to start a new trace for each of these items : I know I will loose the correlation with the api call, but that's OK.</p>\n<p>I've played quite extensively with the ObservationRegistry, the ContextSnapshot, etc... but can't get it to working. The code always finds a way to find the parent ObservationContext of TracingContext.</p>\n<p>Ideally I'd like to</p>\n<ul>\n<li>backup the current trace context</li>\n<li>create a new trace context from scratch</li>\n<li>execute some code with that new trace context</li>\n<li>restore the former trace context</li>\n</ul>\n<p>This could be done quite easily before (with sleuth) ... but now it's a head scratcher :smile:</p>\n<p>I don't know if this helps but I'm looking for the <code>runWithNewTrace</code> method that would be used this way :</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;String&gt; traceIds = new ArrayList&lt;&gt;();\n\nObservation.createNotStarted(&quot;test.traceObservation&quot;, observationRegistry) // 1\n        .contextualName(&quot;create test with Observation API&quot;) // 2\n        .observe(() -&gt; {\n            traceIds.add(getCurrentTraceId());\n            runWithNewTrace(&quot;test&quot;, () -&gt; traceIds.add(getCurrentTraceId()));\n            traceIds.add(getCurrentTraceId());\n        });\n\nString traceIdBefore = traceIds.get(0);\nString traceIdThatShouldBeDifferent = traceIds.get(1);\nString traceIdAfterThatShouldBeSameAsBefore = traceIds.get(2);\n\nassertThat(traceIdThatShouldBeDifferent).isNotNull().isNotEqualTo(&quot;no-trace&quot;);\nassertThat(traceIdBefore).isNotEqualTo(traceIdThatShouldBeDifferent);\nassertThat(traceIdBefore).isEqualTo(traceIdAfterThatShouldBeSameAsBefore);\n\n</code></pre>\n<p>getTraceId looks like this :</p>\n<pre class=\"lang-java prettyprint-override\"><code>public String getCurrentTraceId() {\n    Span currentSpan = tracer.currentSpan();\n    if (currentSpan != null &amp;&amp; currentSpan.context() != null) {\n        return currentSpan.context().traceId();\n    }\n    return &quot;no-trace&quot;;\n}\n</code></pre>\n"},{"tags":["java","android","android-studio","alias","keystore"],"answers":[{"comments":[{"owner":{"account_id":354056,"reputation":7203,"user_id":692167,"accept_rate":84,"display_name":"Tom"},"score":0,"creation_date":1626383057,"post_id":38073687,"comment_id":120885550,"body_markdown":"There are valid reasons for adding a new key, eg. migrating to use .AAB&#39;s with Google Play and wanting to generate an upload key.","body":"There are valid reasons for adding a new key, eg. migrating to use .AAB&#39;s with Google Play and wanting to generate an upload key."}],"tags":[],"owner":{"account_id":3365385,"reputation":22807,"user_id":2826147,"accept_rate":60,"display_name":"Amit Vaghela"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1467110416,"creation_date":1467109721,"answer_id":38073687,"question_id":38073219,"body_markdown":"According to suggestion by google, it says\r\n\r\n**Signing Considarations:**\r\n\r\n&gt; You should sign all of your APKs with the same certificate throughout\r\n&gt; the expected lifespan of your apps. There are several reasons why you\r\n&gt; should do so\r\n&gt; \r\n&gt; **App upgrade**: When the system is installing an update to an app, it compares the certificate(s) in the new version with those in the\r\n&gt; existing version. The system allows the update if the certificates\r\n&gt; match. If you sign the new version with a different certificate, you\r\n&gt; must assign a different package name to the app—in this case, the user\r\n&gt; installs the new version as a completely new app.\r\n&gt; \r\n&gt; **App modularity**: Android allows APKs signed by the same certificate to run in the same process, if the apps so request, so that the system\r\n&gt; treats them as a single app. In this way you can deploy your app in\r\n&gt; modules, and users can update each of the modules independently.\r\n&gt; \r\n&gt; **Code/data sharing through permissions**: Android provides signature-based permissions enforcement, so that an app can expose\r\n&gt; functionality to another app that is signed with a specified\r\n&gt; certificate. By signing multiple APKs with the same certificate and\r\n&gt; using signature-based permissions checks, your apps can share code and\r\n&gt; data in a secure manner.\r\n\r\ncheck https://developer.android.com/studio/publish/app-signing.html#strategies\r\n\r\nread this answer to understant more on [keystore, certificates and alias](https://stackoverflow.com/questions/5724631/understanding-keystore-certificates-and-alias/5724912#5724912)","title":"How to add an Alias to Android (Java) Keystore","body":"<p>According to suggestion by google, it says</p>\n\n<p><strong>Signing Considarations:</strong></p>\n\n<blockquote>\n  <p>You should sign all of your APKs with the same certificate throughout\n  the expected lifespan of your apps. There are several reasons why you\n  should do so</p>\n  \n  <p><strong>App upgrade</strong>: When the system is installing an update to an app, it compares the certificate(s) in the new version with those in the\n  existing version. The system allows the update if the certificates\n  match. If you sign the new version with a different certificate, you\n  must assign a different package name to the app—in this case, the user\n  installs the new version as a completely new app.</p>\n  \n  <p><strong>App modularity</strong>: Android allows APKs signed by the same certificate to run in the same process, if the apps so request, so that the system\n  treats them as a single app. In this way you can deploy your app in\n  modules, and users can update each of the modules independently.</p>\n  \n  <p><strong>Code/data sharing through permissions</strong>: Android provides signature-based permissions enforcement, so that an app can expose\n  functionality to another app that is signed with a specified\n  certificate. By signing multiple APKs with the same certificate and\n  using signature-based permissions checks, your apps can share code and\n  data in a secure manner.</p>\n</blockquote>\n\n<p>check <a href=\"https://developer.android.com/studio/publish/app-signing.html#strategies\" rel=\"nofollow noreferrer\">https://developer.android.com/studio/publish/app-signing.html#strategies</a></p>\n\n<p>read this answer to understant more on <a href=\"https://stackoverflow.com/questions/5724631/understanding-keystore-certificates-and-alias/5724912#5724912\">keystore, certificates and alias</a></p>\n"},{"comments":[{"owner":{"account_id":1252086,"reputation":566,"user_id":1212298,"accept_rate":100,"display_name":"Jon Tinsman"},"score":5,"creation_date":1519712259,"post_id":38073769,"comment_id":85009218,"body_markdown":"Although they say you should sign all your apps with the same certificate, it put some constraints through the reasons. Like having your apps communicate with each other or sharing data between your applications. For instance if you have a suite of applications like (Docs, Sheets, etc) then they should have shared data and be signed with the same certificate.\n\nDown side is if you make a viral app and want to sell it, you need to provide the certificate as well. This means that the buyer will have the certificate for other apps if you shared. I personally sign unrelated apps separately.","body":"Although they say you should sign all your apps with the same certificate, it put some constraints through the reasons. Like having your apps communicate with each other or sharing data between your applications. For instance if you have a suite of applications like (Docs, Sheets, etc) then they should have shared data and be signed with the same certificate.  Down side is if you make a viral app and want to sell it, you need to provide the certificate as well. This means that the buyer will have the certificate for other apps if you shared. I personally sign unrelated apps separately."}],"tags":[],"owner":{"account_id":3122250,"reputation":3155,"user_id":2641792,"accept_rate":60,"display_name":"mdDroid"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1519715738,"creation_date":1467109957,"answer_id":38073769,"question_id":38073219,"body_markdown":"Official Document says\r\n\r\n&gt; In general, the recommended strategy for all developers is to sign all of your applications with the same certificate, throughout the expected lifespan of your applications. There are several reasons why you should do so ...\r\n\r\n[https://developer.android.com/studio/publish/app-signing.html#considerations][1]\r\n\r\nyou can use same certificate. for all applications and also for make it simple you can use same Alias for all your apps\r\n\r\n\r\n  [1]: http://developer.android.com/guide/publishing/app-signing.html#strategies","title":"How to add an Alias to Android (Java) Keystore","body":"<p>Official Document says</p>\n\n<blockquote>\n  <p>In general, the recommended strategy for all developers is to sign all of your applications with the same certificate, throughout the expected lifespan of your applications. There are several reasons why you should do so ...</p>\n</blockquote>\n\n<p><a href=\"http://developer.android.com/guide/publishing/app-signing.html#strategies\" rel=\"nofollow noreferrer\">https://developer.android.com/studio/publish/app-signing.html#considerations</a></p>\n\n<p>you can use same certificate. for all applications and also for make it simple you can use same Alias for all your apps</p>\n"},{"comments":[{"owner":{"account_id":6682008,"reputation":1708,"user_id":5154783,"accept_rate":50,"display_name":"Shahzain ali"},"score":0,"creation_date":1690930011,"post_id":38073875,"comment_id":135420871,"body_markdown":"It would be great if you can show using screenshots, I am unable to find any three dots. if this answer is not valid anymore, then please edit the answer and add an update. Thanks","body":"It would be great if you can show using screenshots, I am unable to find any three dots. if this answer is not valid anymore, then please edit the answer and add an update. Thanks"},{"owner":{"account_id":2287887,"reputation":2894,"user_id":2011505,"accept_rate":83,"display_name":"Tharkius"},"score":0,"creation_date":1691019120,"post_id":38073875,"comment_id":135435616,"body_markdown":"@Shahzainali you are definitely right. I&#39;m not sure how this answer has been standing strong for 7 years. I&#39;ll review it as soon as I get the chance.","body":"@Shahzainali you are definitely right. I&#39;m not sure how this answer has been standing strong for 7 years. I&#39;ll review it as soon as I get the chance."},{"owner":{"account_id":6682008,"reputation":1708,"user_id":5154783,"accept_rate":50,"display_name":"Shahzain ali"},"score":0,"creation_date":1691156201,"post_id":38073875,"comment_id":135457616,"body_markdown":"Thanks for helping the community :) I have checked now we have a folder icon instead of three dots, and on macOS this thing isn&#39;t working, on Linux, it is working :)","body":"Thanks for helping the community :) I have checked now we have a folder icon instead of three dots, and on macOS this thing isn&#39;t working, on Linux, it is working :)"},{"owner":{"account_id":2287887,"reputation":2894,"user_id":2011505,"accept_rate":83,"display_name":"Tharkius"},"score":1,"creation_date":1694163535,"post_id":38073875,"comment_id":135858146,"body_markdown":"@Shahzainali Sorry for the late reply, I forgot about it, but I just edited the answer with updated instructions and a screenshot.","body":"@Shahzainali Sorry for the late reply, I forgot about it, but I just edited the answer with updated instructions and a screenshot."}],"tags":[],"owner":{"account_id":2287887,"reputation":2894,"user_id":2011505,"accept_rate":83,"display_name":"Tharkius"},"comment_count":4,"down_vote_count":0,"up_vote_count":30,"is_accepted":true,"score":30,"last_activity_date":1694614092,"creation_date":1467110246,"answer_id":38073875,"question_id":38073219,"body_markdown":"You can also do that in Android Studio. Just go to &quot;Build &gt; Generate Signed Bundle / APK&quot;, skip to the next step, then there should be a folder icon right at the end of the &quot;Key alias&quot; field. Click on it and a new window will open up for you to input the information for the new alias.\r\n\r\nScreenshot for reference:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/mfaTR.png","title":"How to add an Alias to Android (Java) Keystore","body":"<p>You can also do that in Android Studio. Just go to &quot;Build &gt; Generate Signed Bundle / APK&quot;, skip to the next step, then there should be a folder icon right at the end of the &quot;Key alias&quot; field. Click on it and a new window will open up for you to input the information for the new alias.</p>\n<p>Screenshot for reference:</p>\n<p><a href=\"https://i.stack.imgur.com/mfaTR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mfaTR.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":5579147,"reputation":2129,"user_id":4421627,"accept_rate":89,"display_name":"Flummox - don&#39;t be evil SE"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13035,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"accepted_answer_id":38073875,"answer_count":3,"score":20,"last_activity_date":1694614092,"creation_date":1467108442,"question_id":38073219,"body_markdown":"It is easy to create a new Java Keystore in Android-Studio. But I&#39;d like to add a second Alias to this Keystore. For a second app for the same client. How do I do that? Or, if it is a not-so-good idea, what would be a better way?\r\n\r\n*edit:* I do not intend to use different Keystores for same project. First project is done in Android Studio, second in Intel XDK. They will not share process or need accesses to data in the other.","title":"How to add an Alias to Android (Java) Keystore","body":"<p>It is easy to create a new Java Keystore in Android-Studio. But I'd like to add a second Alias to this Keystore. For a second app for the same client. How do I do that? Or, if it is a not-so-good idea, what would be a better way?</p>\n\n<p><em>edit:</em> I do not intend to use different Keystores for same project. First project is done in Android Studio, second in Intel XDK. They will not share process or need accesses to data in the other.</p>\n"},{"tags":["java","httpclient"],"answers":[{"comments":[{"owner":{"account_id":358039,"reputation":5846,"user_id":3248158,"display_name":"derkoe"},"score":0,"creation_date":1694412716,"post_id":77061759,"comment_id":135882451,"body_markdown":"I have tried that - no Exceptions but the applications hangs in line `res1.get();`","body":"I have tried that - no Exceptions but the applications hangs in line <code>res1.get();</code>"},{"owner":{"account_id":358039,"reputation":5846,"user_id":3248158,"display_name":"derkoe"},"score":1,"creation_date":1694613947,"post_id":77061759,"comment_id":135914628,"body_markdown":"seems like you either need to manage the connection manager on your own or only call setConnectionManagerShared on one client: https://issues.apache.org/jira/browse/HTTPASYNC-83","body":"seems like you either need to manage the connection manager on your own or only call setConnectionManagerShared on one client: <a href=\"https://issues.apache.org/jira/browse/HTTPASYNC-83\" rel=\"nofollow noreferrer\">issues.apache.org/jira/browse/HTTPASYNC-83</a>"}],"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694614050,"creation_date":1694108265,"answer_id":77061759,"question_id":77060419,"body_markdown":"Tell both builders that the connection manager is shared:\r\n```\r\nCloseableHttpAsyncClient client1 = HttpAsyncClientBuilder.create()\r\n        .setConnectionManager(connManager)\r\n        .setRedirectStrategy(new LaxRedirectStrategy())\r\n        .build();\r\nclient1.start();\r\nCloseableHttpAsyncClient client2 = HttpAsyncClientBuilder.create()\r\n        .setConnectionManager(connManager)\r\n        // do not call setConnectionManagerShared on the first client, only on all others sharing the same connManager\r\n        .setConnectionManagerShared(true) \r\n        .build();\r\nclient2.start();\r\n```","title":"Can I run multiple HttpAsyncClients with one PoolingNHttpClientConnectionManager?","body":"<p>Tell both builders that the connection manager is shared:</p>\n<pre><code>CloseableHttpAsyncClient client1 = HttpAsyncClientBuilder.create()\n        .setConnectionManager(connManager)\n        .setRedirectStrategy(new LaxRedirectStrategy())\n        .build();\nclient1.start();\nCloseableHttpAsyncClient client2 = HttpAsyncClientBuilder.create()\n        .setConnectionManager(connManager)\n        // do not call setConnectionManagerShared on the first client, only on all others sharing the same connManager\n        .setConnectionManagerShared(true) \n        .build();\nclient2.start();\n</code></pre>\n"}],"owner":{"account_id":358039,"reputation":5846,"user_id":3248158,"display_name":"derkoe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77061759,"answer_count":1,"score":1,"last_activity_date":1694614050,"creation_date":1694096209,"question_id":77060419,"body_markdown":"I want to create multiple `HttpAsyncClient` with a single connection manager (similar to the [the example in the Baeldung article][1]).\r\n\r\nThe problem is that this does not seem to work with the `HttpAsyncClient` (only with the `HttpClient`). The application fails with the following errors in the log:\r\n\r\n\r\n```\r\n14:00:56.443 [pool-2-thread-1] ERROR org.apache.http.impl.nio.client.InternalHttpAsyncClient - I/O reactor terminated abnormally\r\njava.lang.IllegalStateException: Illegal state ACTIVE\r\n\tat org.apache.http.util.Asserts.check(Asserts.java:46)\r\n\tat org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor.execute(AbstractMultiworkerIOReactor.java:316)\r\n\tat org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager.execute(PoolingNHttpClientConnectionManager.java:221)\r\n\tat org.apache.http.impl.nio.client.CloseableHttpAsyncClientBase$1.run(CloseableHttpAsyncClientBase.java:64)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\n\r\nException in thread &quot;main&quot; java.util.concurrent.ExecutionException: java.util.concurrent.CancellationException: Request execution cancelled\r\n\tat org.apache.http.concurrent.BasicFuture.getResult(BasicFuture.java:71)\r\n\tat org.apache.http.concurrent.BasicFuture.get(BasicFuture.java:84)\r\n\tat org.apache.http.impl.nio.client.FutureWrapper.get(FutureWrapper.java:70)\r\n\tat com.example.Test.main(Test.java:32)\r\nCaused by: java.util.concurrent.CancellationException: Request execution cancelled\r\n\tat org.apache.http.impl.nio.client.CloseableHttpAsyncClientBase.execute(CloseableHttpAsyncClientBase.java:114)\r\n\tat org.apache.http.impl.nio.client.InternalHttpAsyncClient.execute(InternalHttpAsyncClient.java:138)\r\n\tat org.apache.http.impl.nio.client.CloseableHttpAsyncClient.execute(CloseableHttpAsyncClient.java:75)\r\n\tat org.apache.http.impl.nio.client.CloseableHttpAsyncClient.execute(CloseableHttpAsyncClient.java:108)\r\n\tat org.apache.http.impl.nio.client.CloseableHttpAsyncClient.execute(CloseableHttpAsyncClient.java:92)\r\n\tat com.example.Test.main(Test.java:31)\r\n```\r\n\r\n\r\nThis is the code I am running:\r\n\r\n```java\r\npackage com.example;\r\n\r\nimport org.apache.http.client.methods.HttpGet;\r\nimport org.apache.http.impl.client.LaxRedirectStrategy;\r\nimport org.apache.http.impl.nio.client.CloseableHttpAsyncClient;\r\nimport org.apache.http.impl.nio.client.HttpAsyncClientBuilder;\r\nimport org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager;\r\nimport org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor;\r\nimport org.apache.http.impl.nio.reactor.IOReactorConfig;\r\nimport org.apache.http.nio.reactor.ConnectingIOReactor;\r\nimport org.apache.http.nio.reactor.IOReactorException;\r\n\r\nimport java.util.concurrent.ExecutionException;\r\n\r\npublic class Test {\r\n    public static void main(String[] args) throws IOReactorException, ExecutionException, InterruptedException {\r\n        ConnectingIOReactor ioReactor = new DefaultConnectingIOReactor(IOReactorConfig.custom().build());\r\n        PoolingNHttpClientConnectionManager connManager = new PoolingNHttpClientConnectionManager(ioReactor);\r\n        CloseableHttpAsyncClient client1 = HttpAsyncClientBuilder.create()\r\n                .setConnectionManager(connManager)\r\n                .setRedirectStrategy(new LaxRedirectStrategy())\r\n                .build();\r\n        client1.start();\r\n        CloseableHttpAsyncClient client2 = HttpAsyncClientBuilder.create()\r\n                .setConnectionManager(connManager)\r\n                .build();\r\n        client2.start();\r\n\r\n        var res1 = client1.execute(new HttpGet(&quot;https://www.google.com&quot;), null);\r\n        res1.get();\r\n        var res2 = client2.execute(new HttpGet(&quot;https://www.google.com&quot;), null);\r\n        res2.get();\r\n    }\r\n}\r\n\r\n```\r\n\r\nI use the version 4.4.15 of https://hc.apache.org/\r\n\r\n  [1]: https://www.baeldung.com/httpclient-connection-management#multiple","title":"Can I run multiple HttpAsyncClients with one PoolingNHttpClientConnectionManager?","body":"<p>I want to create multiple <code>HttpAsyncClient</code> with a single connection manager (similar to the <a href=\"https://www.baeldung.com/httpclient-connection-management#multiple\" rel=\"nofollow noreferrer\">the example in the Baeldung article</a>).</p>\n<p>The problem is that this does not seem to work with the <code>HttpAsyncClient</code> (only with the <code>HttpClient</code>). The application fails with the following errors in the log:</p>\n<pre><code>14:00:56.443 [pool-2-thread-1] ERROR org.apache.http.impl.nio.client.InternalHttpAsyncClient - I/O reactor terminated abnormally\njava.lang.IllegalStateException: Illegal state ACTIVE\n    at org.apache.http.util.Asserts.check(Asserts.java:46)\n    at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor.execute(AbstractMultiworkerIOReactor.java:316)\n    at org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager.execute(PoolingNHttpClientConnectionManager.java:221)\n    at org.apache.http.impl.nio.client.CloseableHttpAsyncClientBase$1.run(CloseableHttpAsyncClientBase.java:64)\n    at java.base/java.lang.Thread.run(Thread.java:833)\n\nException in thread &quot;main&quot; java.util.concurrent.ExecutionException: java.util.concurrent.CancellationException: Request execution cancelled\n    at org.apache.http.concurrent.BasicFuture.getResult(BasicFuture.java:71)\n    at org.apache.http.concurrent.BasicFuture.get(BasicFuture.java:84)\n    at org.apache.http.impl.nio.client.FutureWrapper.get(FutureWrapper.java:70)\n    at com.example.Test.main(Test.java:32)\nCaused by: java.util.concurrent.CancellationException: Request execution cancelled\n    at org.apache.http.impl.nio.client.CloseableHttpAsyncClientBase.execute(CloseableHttpAsyncClientBase.java:114)\n    at org.apache.http.impl.nio.client.InternalHttpAsyncClient.execute(InternalHttpAsyncClient.java:138)\n    at org.apache.http.impl.nio.client.CloseableHttpAsyncClient.execute(CloseableHttpAsyncClient.java:75)\n    at org.apache.http.impl.nio.client.CloseableHttpAsyncClient.execute(CloseableHttpAsyncClient.java:108)\n    at org.apache.http.impl.nio.client.CloseableHttpAsyncClient.execute(CloseableHttpAsyncClient.java:92)\n    at com.example.Test.main(Test.java:31)\n</code></pre>\n<p>This is the code I am running:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example;\n\nimport org.apache.http.client.methods.HttpGet;\nimport org.apache.http.impl.client.LaxRedirectStrategy;\nimport org.apache.http.impl.nio.client.CloseableHttpAsyncClient;\nimport org.apache.http.impl.nio.client.HttpAsyncClientBuilder;\nimport org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager;\nimport org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor;\nimport org.apache.http.impl.nio.reactor.IOReactorConfig;\nimport org.apache.http.nio.reactor.ConnectingIOReactor;\nimport org.apache.http.nio.reactor.IOReactorException;\n\nimport java.util.concurrent.ExecutionException;\n\npublic class Test {\n    public static void main(String[] args) throws IOReactorException, ExecutionException, InterruptedException {\n        ConnectingIOReactor ioReactor = new DefaultConnectingIOReactor(IOReactorConfig.custom().build());\n        PoolingNHttpClientConnectionManager connManager = new PoolingNHttpClientConnectionManager(ioReactor);\n        CloseableHttpAsyncClient client1 = HttpAsyncClientBuilder.create()\n                .setConnectionManager(connManager)\n                .setRedirectStrategy(new LaxRedirectStrategy())\n                .build();\n        client1.start();\n        CloseableHttpAsyncClient client2 = HttpAsyncClientBuilder.create()\n                .setConnectionManager(connManager)\n                .build();\n        client2.start();\n\n        var res1 = client1.execute(new HttpGet(&quot;https://www.google.com&quot;), null);\n        res1.get();\n        var res2 = client2.execute(new HttpGet(&quot;https://www.google.com&quot;), null);\n        res2.get();\n    }\n}\n\n</code></pre>\n<p>I use the version 4.4.15 of <a href=\"https://hc.apache.org/\" rel=\"nofollow noreferrer\">https://hc.apache.org/</a></p>\n"},{"tags":["java","postgresql","activerecord","lazy-loading","jooq"],"comments":[{"owner":{"account_id":27243397,"reputation":1331,"user_id":20769158,"display_name":"scrhartley"},"score":0,"creation_date":1694609239,"post_id":77097076,"comment_id":135913437,"body_markdown":"Not lazy, but I imagine you could select the columns you want and the use `into` to then turn it into a `MyTableRecord`: https://www.jooq.org/doc/3.17/manual/sql-execution/fetching/record-vs-tablerecord/","body":"Not lazy, but I imagine you could select the columns you want and the use <code>into</code> to then turn it into a <code>MyTableRecord</code>: <a href=\"https://www.jooq.org/doc/3.17/manual/sql-execution/fetching/record-vs-tablerecord/\" rel=\"nofollow noreferrer\">jooq.org/doc/3.17/manual/sql-execution/fetching/&hellip;</a>"},{"owner":{"account_id":3552273,"reputation":894,"user_id":3340829,"accept_rate":62,"display_name":"Leprechaun"},"score":0,"creation_date":1694609403,"post_id":77097076,"comment_id":135913481,"body_markdown":"@scrhartley yeah, but then when I actually want to load the data, I&#39;d have to call `setData(byte[])` on the record object, which raises the `changed` flag, and so on... I want this fetching to be done behind the scenes without the need to manipulate the record.","body":"@scrhartley yeah, but then when I actually want to load the data, I&#39;d have to call <code>setData(byte[])</code> on the record object, which raises the <code>changed</code> flag, and so on... I want this fetching to be done behind the scenes without the need to manipulate the record."},{"owner":{"account_id":27243397,"reputation":1331,"user_id":20769158,"display_name":"scrhartley"},"score":0,"creation_date":1694610324,"post_id":77097076,"comment_id":135913700,"body_markdown":"If you literally just want to retrieve the data, then you could turn off that functionality and not attach the records: https://www.jooq.org/doc/3.18/manual/sql-building/dsl-context/custom-settings/settings-attach-records/","body":"If you literally just want to retrieve the data, then you could turn off that functionality and not attach the records: <a href=\"https://www.jooq.org/doc/3.18/manual/sql-building/dsl-context/custom-settings/settings-attach-records/\" rel=\"nofollow noreferrer\">jooq.org/doc/3.18/manual/sql-building/dsl-context/&hellip;</a>"},{"owner":{"account_id":3552273,"reputation":894,"user_id":3340829,"accept_rate":62,"display_name":"Leprechaun"},"score":0,"creation_date":1694610618,"post_id":77097076,"comment_id":135913768,"body_markdown":"No, I want to be able to modify the data (that&#39;s what I meant by updatable/active record), I just want to avoid fetching the byte array when not needed by postponing the action until the first `getData()` is called.","body":"No, I want to be able to modify the data (that&#39;s what I meant by updatable/active record), I just want to avoid fetching the byte array when not needed by postponing the action until the first <code>getData()</code> is called."},{"owner":{"account_id":27243397,"reputation":1331,"user_id":20769158,"display_name":"scrhartley"},"score":0,"creation_date":1694612284,"post_id":77097076,"comment_id":135914159,"body_markdown":"Still not what you want: rather than calling `setData(byte[])`, `refresh()` would not have the problem of the `changed` flag, but would result in over-fetching and wouldn&#39;t get all the data in the collection of records in one go.","body":"Still not what you want: rather than calling <code>setData(byte[])</code>, <code>refresh()</code> would not have the problem of the <code>changed</code> flag, but would result in over-fetching and wouldn&#39;t get all the data in the collection of records in one go."}],"answers":[{"tags":[],"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694613924,"creation_date":1694613618,"answer_id":77097805,"question_id":77097076,"body_markdown":"You can work with your `MyTableRecord` even when you don&#39;t fetch all columns. Just make sure you include the primary key:\r\n\r\n```java\r\nResult&lt;MyTableRecord&gt; result =\r\nctx.select(MY_TABLE.ID, MY_TABLE.DESCRIPTION)\r\n   .from(MY_TABLE)\r\n   .fetchInto(MY_TABLE);\r\n```\r\n\r\nNow, when you&#39;re ready, refresh the record in question:\r\n\r\n```java\r\nmyTableRecord.refresh(MY_TABLE.DATA);\r\n```\r\n\r\nYou can also fetch *some* of those values up front, and others only later, like this:\r\n\r\n```java\r\nResult&lt;MyTableRecord&gt; result =\r\nctx.select(\r\n      MY_TABLE.ID, \r\n      MY_TABLE.DESCRIPTION,\r\n      when(MY_TABLE.ID.in(1, 2, 3), MY_TABLE.HEAVY_COL1).as(MY_TABLE.DATA))\r\n   .from(MY_TABLE)\r\n   .fetchInto(MY_TABLE);\r\n```\r\n\r\nObviously, this approach is prone to [N+1 queries][1], but you seem to have measured the difference and are certain that N queries are faster/better for you, *in this case*.\r\n\r\n### A remark on other RDBMS\r\n\r\nSince you&#39;re using PostgreSQL, there&#39;s probably no other way, but other RDBMS support JDBC&#39;s `Clob` and `Blob` APIs, which serve as pointers towards the actual LOB data. By default, jOOQ always fetches everything eagerly, but you can make jOOQ expose those JDBC `Clob` or `Blob` types instead, in order to read the binary data only later on *without* a second query:\r\n\r\nhttps://www.jooq.org/doc/latest/manual/reference/reference-data-types/data-types-lobs/\r\n\r\n\r\n  [1]: https://www.jooq.org/doc/latest/manual/reference/dont-do-this/dont-do-this-n-plus-one/","title":"How to fetch fetch one column lazily with a jOOQ active record","body":"<p>You can work with your <code>MyTableRecord</code> even when you don't fetch all columns. Just make sure you include the primary key:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Result&lt;MyTableRecord&gt; result =\nctx.select(MY_TABLE.ID, MY_TABLE.DESCRIPTION)\n   .from(MY_TABLE)\n   .fetchInto(MY_TABLE);\n</code></pre>\n<p>Now, when you're ready, refresh the record in question:</p>\n<pre class=\"lang-java prettyprint-override\"><code>myTableRecord.refresh(MY_TABLE.DATA);\n</code></pre>\n<p>You can also fetch <em>some</em> of those values up front, and others only later, like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Result&lt;MyTableRecord&gt; result =\nctx.select(\n      MY_TABLE.ID, \n      MY_TABLE.DESCRIPTION,\n      when(MY_TABLE.ID.in(1, 2, 3), MY_TABLE.HEAVY_COL1).as(MY_TABLE.DATA))\n   .from(MY_TABLE)\n   .fetchInto(MY_TABLE);\n</code></pre>\n<p>Obviously, this approach is prone to <a href=\"https://www.jooq.org/doc/latest/manual/reference/dont-do-this/dont-do-this-n-plus-one/\" rel=\"nofollow noreferrer\">N+1 queries</a>, but you seem to have measured the difference and are certain that N queries are faster/better for you, <em>in this case</em>.</p>\n<h3>A remark on other RDBMS</h3>\n<p>Since you're using PostgreSQL, there's probably no other way, but other RDBMS support JDBC's <code>Clob</code> and <code>Blob</code> APIs, which serve as pointers towards the actual LOB data. By default, jOOQ always fetches everything eagerly, but you can make jOOQ expose those JDBC <code>Clob</code> or <code>Blob</code> types instead, in order to read the binary data only later on <em>without</em> a second query:</p>\n<p><a href=\"https://www.jooq.org/doc/latest/manual/reference/reference-data-types/data-types-lobs/\" rel=\"nofollow noreferrer\">https://www.jooq.org/doc/latest/manual/reference/reference-data-types/data-types-lobs/</a></p>\n"}],"owner":{"account_id":3552273,"reputation":894,"user_id":3340829,"accept_rate":62,"display_name":"Leprechaun"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77097805,"answer_count":1,"score":1,"last_activity_date":1694613924,"creation_date":1694607839,"question_id":77097076,"body_markdown":"I have a PostgreSQL table that defines a couple of small simple columns and one column `data` that stores large binary data:\r\n\r\n```sql\r\ncreate table my_table\r\n(\r\n    id          serial primary key,\r\n    data        bytea  not null,\r\n    description text\r\n);\r\n```\r\n\r\nWhen I&#39;m fetching rows of this table through jOOQ (into a `MyTableRecord`), jOOQ fetches every column at once. I know jOOQ supports lazy fetching of records via `fetchLazy()` and `stream()`, but that applies only on the level of rows, not individual columns.\r\n \r\nThus, the resulting `MyTableRecord` class always has a simple getter for `data` stored in memory:\r\n\r\n```java\r\n...\r\npublic byte[] getData() {\r\n    return (byte[]) get(1);\r\n}\r\n...\r\n```\r\n\r\nThis means that whenever I want to work with an active record instance of `MyTableRecord` I have to fetch all the data from DB, even when I don&#39;t need it.\r\nHow can I change the behaviour of jOOQ/MyTableRecord to fetch the `data` column lazily, only when I first call `.getData()` on the record object?\r\n\r\n\r\nI know this problem can be solved by a workaround where I offload the binary data to another table and introduce a 1:1 foreign key relationship, but that is a complication I&#39;m not looking for, as it would (among other issues) require adding a join operation each time to my data queries.\r\n","title":"How to fetch fetch one column lazily with a jOOQ active record","body":"<p>I have a PostgreSQL table that defines a couple of small simple columns and one column <code>data</code> that stores large binary data:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>create table my_table\n(\n    id          serial primary key,\n    data        bytea  not null,\n    description text\n);\n</code></pre>\n<p>When I'm fetching rows of this table through jOOQ (into a <code>MyTableRecord</code>), jOOQ fetches every column at once. I know jOOQ supports lazy fetching of records via <code>fetchLazy()</code> and <code>stream()</code>, but that applies only on the level of rows, not individual columns.</p>\n<p>Thus, the resulting <code>MyTableRecord</code> class always has a simple getter for <code>data</code> stored in memory:</p>\n<pre class=\"lang-java prettyprint-override\"><code>...\npublic byte[] getData() {\n    return (byte[]) get(1);\n}\n...\n</code></pre>\n<p>This means that whenever I want to work with an active record instance of <code>MyTableRecord</code> I have to fetch all the data from DB, even when I don't need it.\nHow can I change the behaviour of jOOQ/MyTableRecord to fetch the <code>data</code> column lazily, only when I first call <code>.getData()</code> on the record object?</p>\n<p>I know this problem can be solved by a workaround where I offload the binary data to another table and introduce a 1:1 foreign key relationship, but that is a complication I'm not looking for, as it would (among other issues) require adding a join operation each time to my data queries.</p>\n"},{"tags":["java","amazon-web-services","spring-boot","amazon-s3","webclient"],"answers":[{"tags":[],"owner":{"account_id":12635385,"reputation":527,"user_id":9185029,"display_name":"Alexander Katsenelenbogen"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1694612009,"creation_date":1694611404,"answer_id":77097476,"question_id":77096702,"body_markdown":"Two things I would do to investigate - \r\n\r\n1. Check the URI in your browser. Does it give you a response? \r\n2. Where is the signature being generated?\r\n\r\nAll that said, you may just want to use the AWS SDK S3 library to generate the URL and invoke it directly instead of building it from scratch: https://docs.aws.amazon.com/AmazonS3/latest/userguide/example_s3_Scenario_PresignedUrl_section.html","title":"BadRequest when getting presigned object with token and credential values changing","body":"<p>Two things I would do to investigate -</p>\n<ol>\n<li>Check the URI in your browser. Does it give you a response?</li>\n<li>Where is the signature being generated?</li>\n</ol>\n<p>All that said, you may just want to use the AWS SDK S3 library to generate the URL and invoke it directly instead of building it from scratch: <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/userguide/example_s3_Scenario_PresignedUrl_section.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/AmazonS3/latest/userguide/example_s3_Scenario_PresignedUrl_section.html</a></p>\n"},{"tags":[],"owner":{"account_id":6157899,"reputation":19810,"user_id":4800344,"display_name":"Ermiya Eskandary"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1694613108,"creation_date":1694611929,"answer_id":77097553,"question_id":77096702,"body_markdown":"&gt; any other ways to retrieve the data from presigned URL\r\n\r\n**Yes, you should ideally be using the AWS SDK for Java to get presigned objects - and as much as possible for any other interaction with AWS** - as the SDK handles all of the low-level detail for you. \r\n\r\nThere&#39;s an AWS provided example [here][1] of how to do so.\r\n\r\nHowever, if for some reason the SDK is not an option, or if you’re just curious to understand the issue, the remainder of this answer addresses that.\r\n\r\n&gt; For instance, a segment of the token in the URL, returned by the error, appears as &quot;HYVG6%252F202309&quot; instead of the original &quot;HYVG6%2F202309&quot;.\r\n\r\n**Your token and credential values are being double encoded.**\r\n\r\nUsing the example you&#39;ve provided, your token has already been URL encoded - `HYVG6%2F202309`. The presence of `%2F` proves this, as in ASCII, the `/` character is represented as `2F` in hex. Encoding `HYVG6/202309` will result in the above value, with `/` being encoded as `%2F`.\r\n\r\nThe error throws `HYVG6%252F202309` as the token value. When you see “%252F”, it means that your “%” character is being encoded *again*. In ASCII, the `%` character is represented as `25` in hex. So `%2F` becomes `%252F` after the second round of encoding. Encoding `HYVG6%2F202309` will result in the above value, with the `%` being encoded as `%25`.\r\n\r\nAn easy way to fix this would be to first decode the values before passing them to the `uriBuilder`. This way, when the `uriBuilder` does its encoding, it will return your values to their original form.\r\n\r\nOr alternatively, you can also change the encoding mode of the `WebClient` by creating a [`DefaultUriBuilderFactory`][2] with the [`EncodingMode`][3] set to [`NONE`][4] &amp; setting it as the desired factory for the [`WebClient.Builder`][5].\r\n\r\nAs per [the source code][6], the default encoding mode is `TEMPLATE_AND_VALUES` which encodes the URI template as well as the template values (your token and credential values). \r\n\r\n`EncodingMode.NONE` will result in no encoding being applied, and the request being sent successfully.\r\n\r\nThis should work:\r\n\r\n```java\r\n@Autowired\r\npublic Demo(WebClient.Builder webClientBuilder) {\r\n    DefaultUriBuilderFactory factory = new DefaultUriBuilderFactory();\r\n    factory.setEncodingMode(DefaultUriBuilderFactory.EncodingMode.NONE);\r\n\r\n    this.client = webClientBuilder\r\n        .baseUrl(&quot;https://&lt;base_url&gt;.s3.amazonaws.com&quot;)\r\n        .uriBuilderFactory(factory)\r\n        .build();\r\n}\r\n```\r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/examples-s3-presign.html#get-presignedobject\r\n  [2]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/util/DefaultUriBuilderFactory.html\r\n  [3]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/util/DefaultUriBuilderFactory.EncodingMode.html\r\n  [4]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/util/DefaultUriBuilderFactory.EncodingMode.html#NONE\r\n  [5]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/reactive/function/client/WebClient.Builder.html\r\n  [6]: https://github.com/spring-projects/spring-framework/blob/main/spring-web/src/main/java/org/springframework/web/util/DefaultUriBuilderFactory.java#L47","title":"BadRequest when getting presigned object with token and credential values changing","body":"<blockquote>\n<p>any other ways to retrieve the data from presigned URL</p>\n</blockquote>\n<p><strong>Yes, you should ideally be using the AWS SDK for Java to get presigned objects - and as much as possible for any other interaction with AWS</strong> - as the SDK handles all of the low-level detail for you.</p>\n<p>There's an AWS provided example <a href=\"https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/examples-s3-presign.html#get-presignedobject\" rel=\"nofollow noreferrer\">here</a> of how to do so.</p>\n<p>However, if for some reason the SDK is not an option, or if you’re just curious to understand the issue, the remainder of this answer addresses that.</p>\n<blockquote>\n<p>For instance, a segment of the token in the URL, returned by the error, appears as &quot;HYVG6%252F202309&quot; instead of the original &quot;HYVG6%2F202309&quot;.</p>\n</blockquote>\n<p><strong>Your token and credential values are being double encoded.</strong></p>\n<p>Using the example you've provided, your token has already been URL encoded - <code>HYVG6%2F202309</code>. The presence of <code>%2F</code> proves this, as in ASCII, the <code>/</code> character is represented as <code>2F</code> in hex. Encoding <code>HYVG6/202309</code> will result in the above value, with <code>/</code> being encoded as <code>%2F</code>.</p>\n<p>The error throws <code>HYVG6%252F202309</code> as the token value. When you see “%252F”, it means that your “%” character is being encoded <em>again</em>. In ASCII, the <code>%</code> character is represented as <code>25</code> in hex. So <code>%2F</code> becomes <code>%252F</code> after the second round of encoding. Encoding <code>HYVG6%2F202309</code> will result in the above value, with the <code>%</code> being encoded as <code>%25</code>.</p>\n<p>An easy way to fix this would be to first decode the values before passing them to the <code>uriBuilder</code>. This way, when the <code>uriBuilder</code> does its encoding, it will return your values to their original form.</p>\n<p>Or alternatively, you can also change the encoding mode of the <code>WebClient</code> by creating a <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/util/DefaultUriBuilderFactory.html\" rel=\"nofollow noreferrer\"><code>DefaultUriBuilderFactory</code></a> with the <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/util/DefaultUriBuilderFactory.EncodingMode.html\" rel=\"nofollow noreferrer\"><code>EncodingMode</code></a> set to <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/util/DefaultUriBuilderFactory.EncodingMode.html#NONE\" rel=\"nofollow noreferrer\"><code>NONE</code></a> &amp; setting it as the desired factory for the <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/reactive/function/client/WebClient.Builder.html\" rel=\"nofollow noreferrer\"><code>WebClient.Builder</code></a>.</p>\n<p>As per <a href=\"https://github.com/spring-projects/spring-framework/blob/main/spring-web/src/main/java/org/springframework/web/util/DefaultUriBuilderFactory.java#L47\" rel=\"nofollow noreferrer\">the source code</a>, the default encoding mode is <code>TEMPLATE_AND_VALUES</code> which encodes the URI template as well as the template values (your token and credential values).</p>\n<p><code>EncodingMode.NONE</code> will result in no encoding being applied, and the request being sent successfully.</p>\n<p>This should work:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Autowired\npublic Demo(WebClient.Builder webClientBuilder) {\n    DefaultUriBuilderFactory factory = new DefaultUriBuilderFactory();\n    factory.setEncodingMode(DefaultUriBuilderFactory.EncodingMode.NONE);\n\n    this.client = webClientBuilder\n        .baseUrl(&quot;https://&lt;base_url&gt;.s3.amazonaws.com&quot;)\n        .uriBuilderFactory(factory)\n        .build();\n}\n</code></pre>\n"}],"owner":{"account_id":18045956,"reputation":41,"user_id":13116949,"display_name":"Kstackr"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77097553,"answer_count":2,"score":1,"last_activity_date":1694613631,"creation_date":1694604911,"question_id":77096702,"body_markdown":"I have a presigned S3 URL that returns a JSON file. I need to use this URL in my Spring Boot application to retrieve the file, so I&#39;m using `WebClient`.\r\n\r\nHere is my code:\r\n\r\n```java\r\n@RestController\r\npublic class Demo {\r\n\r\n    private final WebClient client;\r\n\r\n    @Autowired\r\n    public Demo(WebClient.Builder webClientBuilder) {\r\n        this.client = webClientBuilder\r\n                .baseUrl(&quot;https://&lt;base_url&gt;.s3.amazonaws.com&quot;)\r\n                .build();\r\n    }\r\n\r\n    @GetMapping(&quot;/data&quot;)\r\n    public String processS3URL() {\r\n\r\n        return client.get()\r\n                .uri(uriBuilder -&gt; uriBuilder\r\n                        .path(&quot;/&lt;urlPath&gt;.json&quot;)\r\n                        .queryParam(&quot;X-Amz-Security-Token&quot;, &lt;securityToken&gt;)\r\n                        .queryParam(&quot;X-Amz-Algorithm&quot;, &quot;AWS4-HMAC-SHA256&quot;)\r\n                        .queryParam(&quot;X-Amz-Date&quot;, &quot;20230913T103914Z&quot;)\r\n                        .queryParam(&quot;X-Amz-SignedHeaders&quot;, &quot;host&quot;)\r\n                        .queryParam(&quot;X-Amz-Expires&quot;, &quot;172800&quot;)\r\n                        .queryParam(&quot;X-Amz-Credential&quot;, &lt;credential&gt;)\r\n                        .queryParam(&quot;X-Amz-Signature&quot;, &lt;signature&gt;)\r\n                        .build())\r\n                .retrieve()\r\n                .bodyToMono(String.class)\r\n                .block();\r\n    }\r\n}\r\n```\r\n\r\nHowever, I&#39;m encountering an issue:\r\n\r\n&gt; java.lang.Exception: org.springframework.web.reactive.function.client.WebClientResponseException$BadRequest: 400 Bad Request from GET {givenURL}\r\n\r\nUpon careful inspection, I noticed that the token and credential values have been altered by WebClient. Specifically, the token and credential values in the error URL differ from the original values I provided.\r\n\r\nFor instance, a segment of the token in the URL, returned by the error, appears as &quot;HYVG6%252F202309&quot; instead of the original &quot;HYVG6%2F202309&quot;. The same issue occurs with the signature.\r\n\r\nWhy is this happening? How can I retrieve the expected result using WebClient?\r\n\r\nAlternatively, are there other methods to retrieve data from a presigned URL?","title":"BadRequest when getting presigned object with token and credential values changing","body":"<p>I have a presigned S3 URL that returns a JSON file. I need to use this URL in my Spring Boot application to retrieve the file, so I'm using <code>WebClient</code>.</p>\n<p>Here is my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\npublic class Demo {\n\n    private final WebClient client;\n\n    @Autowired\n    public Demo(WebClient.Builder webClientBuilder) {\n        this.client = webClientBuilder\n                .baseUrl(&quot;https://&lt;base_url&gt;.s3.amazonaws.com&quot;)\n                .build();\n    }\n\n    @GetMapping(&quot;/data&quot;)\n    public String processS3URL() {\n\n        return client.get()\n                .uri(uriBuilder -&gt; uriBuilder\n                        .path(&quot;/&lt;urlPath&gt;.json&quot;)\n                        .queryParam(&quot;X-Amz-Security-Token&quot;, &lt;securityToken&gt;)\n                        .queryParam(&quot;X-Amz-Algorithm&quot;, &quot;AWS4-HMAC-SHA256&quot;)\n                        .queryParam(&quot;X-Amz-Date&quot;, &quot;20230913T103914Z&quot;)\n                        .queryParam(&quot;X-Amz-SignedHeaders&quot;, &quot;host&quot;)\n                        .queryParam(&quot;X-Amz-Expires&quot;, &quot;172800&quot;)\n                        .queryParam(&quot;X-Amz-Credential&quot;, &lt;credential&gt;)\n                        .queryParam(&quot;X-Amz-Signature&quot;, &lt;signature&gt;)\n                        .build())\n                .retrieve()\n                .bodyToMono(String.class)\n                .block();\n    }\n}\n</code></pre>\n<p>However, I'm encountering an issue:</p>\n<blockquote>\n<p>java.lang.Exception: org.springframework.web.reactive.function.client.WebClientResponseException$BadRequest: 400 Bad Request from GET {givenURL}</p>\n</blockquote>\n<p>Upon careful inspection, I noticed that the token and credential values have been altered by WebClient. Specifically, the token and credential values in the error URL differ from the original values I provided.</p>\n<p>For instance, a segment of the token in the URL, returned by the error, appears as &quot;HYVG6%252F202309&quot; instead of the original &quot;HYVG6%2F202309&quot;. The same issue occurs with the signature.</p>\n<p>Why is this happening? How can I retrieve the expected result using WebClient?</p>\n<p>Alternatively, are there other methods to retrieve data from a presigned URL?</p>\n"},{"tags":["python","java","input","key","interception"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1694618062,"post_id":77097782,"comment_id":135915635,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":22601136,"reputation":1,"user_id":16782675,"display_name":"Andy De Gheldere"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694613506,"creation_date":1694613506,"question_id":77097782,"body_markdown":"I&#39;m trying to get unflagged key inputs like possible with: https://github.com/kennyhml/pyinterception, but for java. Currently I&#39;m just using Robot but I was wondering if a library like that exists for java, or if I could use this somehow in java, or if there is any other way for this to be possible.\r\n\r\nThanks in advance.\r\n\r\nI tried several java libraries but didn&#39;t seem to work.","title":"How to get Java Unflagged Key Inputs Like With Pyinterception?","body":"<p>I'm trying to get unflagged key inputs like possible with: <a href=\"https://github.com/kennyhml/pyinterception\" rel=\"nofollow noreferrer\">https://github.com/kennyhml/pyinterception</a>, but for java. Currently I'm just using Robot but I was wondering if a library like that exists for java, or if I could use this somehow in java, or if there is any other way for this to be possible.</p>\n<p>Thanks in advance.</p>\n<p>I tried several java libraries but didn't seem to work.</p>\n"},{"tags":["java","spring-boot","microservices","retry-logic","resilience4j-retry"],"owner":{"account_id":24567235,"reputation":21,"user_id":18474219,"display_name":"Slow Starter"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694613257,"creation_date":1694184430,"question_id":77067877,"body_markdown":"I am using RegistryEventConsumer Bean in order to add event consumers to any Retry instance and logging the event to know how many times a specific endpoint got retried in case of any issues with the endpoint. below is the snippet.\r\n\r\n    @Bean\r\n    public RegistryEventConsumer&lt;Retry&gt; myRetryRegistryEventConsumer() {\r\n\r\n        return new RegistryEventConsumer&lt;Retry&gt;() {\r\n            @Override\r\n            public void onEntryAddedEvent(EntryAddedEvent&lt;Retry&gt; entryAddedEvent) {\r\n                entryAddedEvent.getAddedEntry().getEventPublisher()\r\n                   .onEvent(event -&gt; LOG.info(event.toString()));\r\n            }\r\n\r\n            @Override\r\n            public void onEntryRemovedEvent(EntryRemovedEvent&lt;Retry&gt; entryRemoveEvent) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onEntryReplacedEvent(EntryReplacedEvent&lt;Retry&gt; entryReplacedEvent) {\r\n\r\n            }\r\n        };\r\n    }\r\n\r\nLog Entries look like below\r\n```none\r\n2020-10-26T13:00:19.807034700+01:00[Europe/Berlin]: Retry &#39;backendA&#39;, waiting PT1S until attempt &#39;1&#39;. Last attempt failed with exception &#39;org.abc.exception.MyCustomException: call to http://localhost:8080/endpointA is failed :connect error\r\n\r\n2020-10-26T13:00:19.912028800+01:00[Europe/Berlin]: Retry &#39;backendA&#39;, waiting PT2S until attempt &#39;2&#39;. Last attempt failed with exception &#39;org.abc.exception.MyCustomException: call to http://localhost:8080/endpointA is failed :connect error.\r\n\r\n2020-10-26T13:00:20.023250+01:00[Europe/Berlin]: Retry &#39;backendA&#39; recorded a failed retry attempt. Number of retry attempts: &#39;3&#39;. Giving up. Last exception was: &#39;org.abc.exception.MyCustomException: call to http://localhost:8080/endpointA is failed :connect error\r\n```\r\ni would like to log the request input which my endpoint takes(lets say it takes Student object with name , id ,age as input ) along with the event . how to achieve this?\r\n\r\n1.a) the expectation is to customize the logging and it should something like below.\r\n\r\n```none\r\nRetry &#39;backendA&#39;, waiting PT1S until attempt &#39;1&#39;. Last attempt failed for url http://localhost:8080/endpointA for input : &quot;Student (&quot;Arun&quot;, A11,18)&quot; with exception &#39;org.abc.exception.MyCustomException: call to http://localhost:8080/endpointA is failed :connect error\r\n```\r\n\r\n1.b) and How to capture the metrics?","title":"Resilience4j Retry -&gt; how to log the request input along with event while logging retry count?","body":"<p>I am using RegistryEventConsumer Bean in order to add event consumers to any Retry instance and logging the event to know how many times a specific endpoint got retried in case of any issues with the endpoint. below is the snippet.</p>\n<pre><code>@Bean\npublic RegistryEventConsumer&lt;Retry&gt; myRetryRegistryEventConsumer() {\n\n    return new RegistryEventConsumer&lt;Retry&gt;() {\n        @Override\n        public void onEntryAddedEvent(EntryAddedEvent&lt;Retry&gt; entryAddedEvent) {\n            entryAddedEvent.getAddedEntry().getEventPublisher()\n               .onEvent(event -&gt; LOG.info(event.toString()));\n        }\n\n        @Override\n        public void onEntryRemovedEvent(EntryRemovedEvent&lt;Retry&gt; entryRemoveEvent) {\n\n        }\n\n        @Override\n        public void onEntryReplacedEvent(EntryReplacedEvent&lt;Retry&gt; entryReplacedEvent) {\n\n        }\n    };\n}\n</code></pre>\n<p>Log Entries look like below</p>\n<pre class=\"lang-none prettyprint-override\"><code>2020-10-26T13:00:19.807034700+01:00[Europe/Berlin]: Retry 'backendA', waiting PT1S until attempt '1'. Last attempt failed with exception 'org.abc.exception.MyCustomException: call to http://localhost:8080/endpointA is failed :connect error\n\n2020-10-26T13:00:19.912028800+01:00[Europe/Berlin]: Retry 'backendA', waiting PT2S until attempt '2'. Last attempt failed with exception 'org.abc.exception.MyCustomException: call to http://localhost:8080/endpointA is failed :connect error.\n\n2020-10-26T13:00:20.023250+01:00[Europe/Berlin]: Retry 'backendA' recorded a failed retry attempt. Number of retry attempts: '3'. Giving up. Last exception was: 'org.abc.exception.MyCustomException: call to http://localhost:8080/endpointA is failed :connect error\n</code></pre>\n<p>i would like to log the request input which my endpoint takes(lets say it takes Student object with name , id ,age as input ) along with the event . how to achieve this?</p>\n<p>1.a) the expectation is to customize the logging and it should something like below.</p>\n<pre class=\"lang-none prettyprint-override\"><code>Retry 'backendA', waiting PT1S until attempt '1'. Last attempt failed for url http://localhost:8080/endpointA for input : &quot;Student (&quot;Arun&quot;, A11,18)&quot; with exception 'org.abc.exception.MyCustomException: call to http://localhost:8080/endpointA is failed :connect error\n</code></pre>\n<p>1.b) and How to capture the metrics?</p>\n"},{"tags":["java","hashmap","java-stream","collectors"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1661786065,"post_id":73530811,"comment_id":129848427,"body_markdown":"Your current code looks good. What benefit do you expect to get from using streams instead?","body":"Your current code looks good. What benefit do you expect to get from using streams instead?"},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":2,"creation_date":1661786612,"post_id":73530811,"comment_id":129848630,"body_markdown":"Besides using an `enum KeyEnum { TYPES, MESSAGES } and an EnumMap` it looks okay.","body":"Besides using an <code>enum KeyEnum { TYPES, MESSAGES } and an EnumMap</code> it looks okay."},{"owner":{"account_id":16276241,"reputation":17,"user_id":16187547,"display_name":"Aleksey Bakharev"},"score":0,"creation_date":1661832084,"post_id":73530811,"comment_id":129858673,"body_markdown":"@BasilBourque solely for compactness, and for general study","body":"@BasilBourque solely for compactness, and for general study"},{"owner":{"account_id":16276241,"reputation":17,"user_id":16187547,"display_name":"Aleksey Bakharev"},"score":0,"creation_date":1661832260,"post_id":73530811,"comment_id":129858703,"body_markdown":"@JoopEggen good point, thanks, added Enum","body":"@JoopEggen good point, thanks, added Enum"}],"answers":[{"comments":[{"owner":{"account_id":16276241,"reputation":17,"user_id":16187547,"display_name":"Aleksey Bakharev"},"score":0,"creation_date":1661832202,"post_id":73531066,"comment_id":129858692,"body_markdown":"unfortunately, I&#39;m using java 11, is there any similar solution?","body":"unfortunately, I&#39;m using java 11, is there any similar solution?"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1661837796,"post_id":73531066,"comment_id":129859568,"body_markdown":"@AlekseyBakharev You should put such constraints into your Question.","body":"@AlekseyBakharev You should put such constraints into your Question."}],"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1694612852,"creation_date":1661786722,"answer_id":73531066,"question_id":73530811,"body_markdown":"# Java 12 - `Collectors.teeing`\r\n\r\nYou can use Java 12 *collector* [`teeing`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html#teeing(java.util.stream.Collector,java.util.stream.Collector,java.util.function.BiFunction)), which expects *three arguments*: two *collectors* and a *function*. Each stream element gets consumed by both of the provided *collectors* and when they are done the *function* merges their results.\r\n\r\nAs both *downstream collectors* of `teeing` we can use *collector* [`mapping()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html#mapping(java.util.function.Function,java.util.stream.Collector)) in conjunction with the *collector* `toSet()`.\r\n\r\n    public static Map&lt;String, Set&lt;String&gt;&gt; toMessagesByType(List&lt;LoggerMessageDto&gt; loggerMessageList,\r\n                                                            String typesKey,\r\n                                                            String messagesKey) {\r\n        return  loggerMessageList.stream()\r\n            .collect(Collectors.teeing(\r\n                Collectors.mapping(LoggerMessageDto::getType, Collectors.toSet()),\r\n                Collectors.mapping(LoggerMessageDto::getMessage, Collectors.toSet()),\r\n                (types, messages) -&gt; Map.of(\r\n                    typesKey, types,\r\n                    messagesKey, messages\r\n                )\r\n            ));\r\n    }\r\n\r\n# Java 8 - String Keys\r\n\r\nHere&#39;s a Java 8 compliant code which makes use of *three-argument* version of [`collect()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Stream.html#collect(java.util.function.Supplier,java.util.function.BiConsumer,java.util.function.BiConsumer)) and produces the same result as solution with `teeing()`:\r\n\r\n    public static Map&lt;String, Set&lt;String&gt;&gt; toMessagesByType(List&lt;LoggerMessageDto&gt; loggerMessageList,\r\n                                                            String typesKey,\r\n                                                            String messagesKey) {\r\n        return loggerMessageList.stream()\r\n            .collect(\r\n                () -&gt; Map.of(\r\n                    typesKey, new HashSet&lt;&gt;(),\r\n                    messagesKey,  new HashSet&lt;&gt;()\r\n                ),\r\n                (Map&lt;String, Set&lt;String&gt;&gt; map, LoggerMessageDto next) -&gt; {\r\n                    map.get(typesKey).add(next.getType());\r\n                    map.get(messagesKey).add(next.getMessage());\r\n                },\r\n                (left, right) -&gt;\r\n                    right.forEach((k, v) -&gt; left.get(k).addAll(v))\r\n            );\r\n    }\r\n\r\n# Enum\r\n\r\nAlso, it&#39;s worth to mention that *enums* are more handy and reliable than strings, as *@Joop Eggen* has point out in the [comment](https://stackoverflow.com/questions/73530811/how-can-i-create-a-mapstring-setstring-from-listobject-use-stream-api-jav/73531066#comment129848630_73530811). Apart from saving you from typo which might occur while using strings, *enums* have an extensive language support (specialized collections: `EnumMap`, `EnumSet`; they can be used in custom annotations; and in `switch` expression/statements, etc.).\r\n\r\n# Java 8 - Enum &amp; EnumMap\r\n\r\nSimilarly to the solution shown above, we can use of *three-args* `collect()` and provide a prepopulated `EnumMap` in the *supplier*.\r\n\r\n    public static Map&lt;LoggerKeys, Set&lt;String&gt;&gt; toMessagesByType(List&lt;LoggerMessageDto&gt; loggerMessageList) {\r\n        \r\n        return loggerMessageList.stream()\r\n            .collect(\r\n                () -&gt; EnumSet.allOf(LoggerKeys.class).stream()\r\n                    .collect(Collectors.toMap(\r\n                        Function.identity(),\r\n                        e -&gt; new HashSet&lt;&gt;(),\r\n                        (v1, v2) -&gt; { throw new AssertionError(&quot;duplicates are not expected&quot;); },\r\n                        () -&gt; new EnumMap&lt;&gt;(LoggerKeys.class)\r\n                    )),\r\n                (Map&lt;LoggerKey, Set&lt;String&gt;&gt; map, LoggerMessageDto next) -&gt;\r\n                    map.forEach((loggerKey, set) -&gt; set.add(loggerKey.getKey(next))),\r\n                (left, right) -&gt;\r\n                    right.forEach((k, v) -&gt; left.get(k).addAll(v))\r\n            );\r\n    }\r\n\r\n`LoggerKey` *enum* having a *keyExtractor* `Function` as a property:\r\n\r\n    public enum LoggerKey {\r\n        TYPES(LoggerMessageDto::getType), MESSAGES(LoggerMessageDto::getMessage);\r\n        \r\n        private Function&lt;LoggerMessageDto, String&gt; keyExtractor;\r\n    \r\n        LoggerKeys(Function&lt;LoggerMessageDto, String&gt; keyExtractor) {\r\n            this.keyExtractor = keyExtractor;\r\n        }\r\n    \r\n        public Function&lt;LoggerMessageDto, String&gt; getKey(LoggerMessageDto dto) {\r\n            return keyExtractor.apply(dto);\r\n        }\r\n    }","title":"Create a Map&lt;String, Set&lt;String&gt;&gt; from a List&lt;MyObject&gt; using Stream API","body":"<h1>Java 12 - <code>Collectors.teeing</code></h1>\n<p>You can use Java 12 <em>collector</em> <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html#teeing(java.util.stream.Collector,java.util.stream.Collector,java.util.function.BiFunction)\" rel=\"nofollow noreferrer\"><code>teeing</code></a>, which expects <em>three arguments</em>: two <em>collectors</em> and a <em>function</em>. Each stream element gets consumed by both of the provided <em>collectors</em> and when they are done the <em>function</em> merges their results.</p>\n<p>As both <em>downstream collectors</em> of <code>teeing</code> we can use <em>collector</em> <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html#mapping(java.util.function.Function,java.util.stream.Collector)\" rel=\"nofollow noreferrer\"><code>mapping()</code></a> in conjunction with the <em>collector</em> <code>toSet()</code>.</p>\n<pre><code>public static Map&lt;String, Set&lt;String&gt;&gt; toMessagesByType(List&lt;LoggerMessageDto&gt; loggerMessageList,\n                                                        String typesKey,\n                                                        String messagesKey) {\n    return  loggerMessageList.stream()\n        .collect(Collectors.teeing(\n            Collectors.mapping(LoggerMessageDto::getType, Collectors.toSet()),\n            Collectors.mapping(LoggerMessageDto::getMessage, Collectors.toSet()),\n            (types, messages) -&gt; Map.of(\n                typesKey, types,\n                messagesKey, messages\n            )\n        ));\n}\n</code></pre>\n<h1>Java 8 - String Keys</h1>\n<p>Here's a Java 8 compliant code which makes use of <em>three-argument</em> version of <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Stream.html#collect(java.util.function.Supplier,java.util.function.BiConsumer,java.util.function.BiConsumer)\" rel=\"nofollow noreferrer\"><code>collect()</code></a> and produces the same result as solution with <code>teeing()</code>:</p>\n<pre><code>public static Map&lt;String, Set&lt;String&gt;&gt; toMessagesByType(List&lt;LoggerMessageDto&gt; loggerMessageList,\n                                                        String typesKey,\n                                                        String messagesKey) {\n    return loggerMessageList.stream()\n        .collect(\n            () -&gt; Map.of(\n                typesKey, new HashSet&lt;&gt;(),\n                messagesKey,  new HashSet&lt;&gt;()\n            ),\n            (Map&lt;String, Set&lt;String&gt;&gt; map, LoggerMessageDto next) -&gt; {\n                map.get(typesKey).add(next.getType());\n                map.get(messagesKey).add(next.getMessage());\n            },\n            (left, right) -&gt;\n                right.forEach((k, v) -&gt; left.get(k).addAll(v))\n        );\n}\n</code></pre>\n<h1>Enum</h1>\n<p>Also, it's worth to mention that <em>enums</em> are more handy and reliable than strings, as <em>@Joop Eggen</em> has point out in the <a href=\"https://stackoverflow.com/questions/73530811/how-can-i-create-a-mapstring-setstring-from-listobject-use-stream-api-jav/73531066#comment129848630_73530811\">comment</a>. Apart from saving you from typo which might occur while using strings, <em>enums</em> have an extensive language support (specialized collections: <code>EnumMap</code>, <code>EnumSet</code>; they can be used in custom annotations; and in <code>switch</code> expression/statements, etc.).</p>\n<h1>Java 8 - Enum &amp; EnumMap</h1>\n<p>Similarly to the solution shown above, we can use of <em>three-args</em> <code>collect()</code> and provide a prepopulated <code>EnumMap</code> in the <em>supplier</em>.</p>\n<pre><code>public static Map&lt;LoggerKeys, Set&lt;String&gt;&gt; toMessagesByType(List&lt;LoggerMessageDto&gt; loggerMessageList) {\n    \n    return loggerMessageList.stream()\n        .collect(\n            () -&gt; EnumSet.allOf(LoggerKeys.class).stream()\n                .collect(Collectors.toMap(\n                    Function.identity(),\n                    e -&gt; new HashSet&lt;&gt;(),\n                    (v1, v2) -&gt; { throw new AssertionError(&quot;duplicates are not expected&quot;); },\n                    () -&gt; new EnumMap&lt;&gt;(LoggerKeys.class)\n                )),\n            (Map&lt;LoggerKey, Set&lt;String&gt;&gt; map, LoggerMessageDto next) -&gt;\n                map.forEach((loggerKey, set) -&gt; set.add(loggerKey.getKey(next))),\n            (left, right) -&gt;\n                right.forEach((k, v) -&gt; left.get(k).addAll(v))\n        );\n}\n</code></pre>\n<p><code>LoggerKey</code> <em>enum</em> having a <em>keyExtractor</em> <code>Function</code> as a property:</p>\n<pre><code>public enum LoggerKey {\n    TYPES(LoggerMessageDto::getType), MESSAGES(LoggerMessageDto::getMessage);\n    \n    private Function&lt;LoggerMessageDto, String&gt; keyExtractor;\n\n    LoggerKeys(Function&lt;LoggerMessageDto, String&gt; keyExtractor) {\n        this.keyExtractor = keyExtractor;\n    }\n\n    public Function&lt;LoggerMessageDto, String&gt; getKey(LoggerMessageDto dto) {\n        return keyExtractor.apply(dto);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661838820,"creation_date":1661838328,"answer_id":73537637,"question_id":73530811,"body_markdown":"The [Answer by Ivanchenko][1] is correct and quite clever. But that solution requires Java 12+, and [you later commented][2] that you must use Java 11. \r\n\r\n# `list.stream().map( getter ).collect( …`\r\n\r\nHere is another solution, this one working in Java 11.\r\n\r\nHere we run through the list twice. On the first run, we use the getter method `type` to extract the `type` member field on the `Log` class. We collect those strings into a `Set`. Then we make a second run through the `List` of `Log` objects, this time extracting the `message` member field by calling the getter `message`. Those strings are also collected into a `Set`. \r\n\r\nWe put each of the two sets into a `Map`.\r\n\r\n\r\n\r\n```java\r\nMap &lt; String, Set &lt; String &gt; &gt; map =\r\n        Map.of(\r\n                &quot;types&quot; , list.stream().map( Log :: type ).collect( Collectors.toSet() ) ,\r\n                &quot;messages&quot; , list.stream().map( Log :: message ).collect( Collectors.toSet() )\r\n        );\r\n```\r\n\r\nCaveat: This approach is a little bit inefficient in that it loops the list twice, once for &quot;types&quot; and once for &quot;messages&quot;. But unless you are doing this many times for huge amounts of data, the impact on performance should be insignificant. \r\n\r\nGenerally best to work with unmodifiable collections until you know otherwise.  So let&#39;s make those [sets unmodifiable][3]. The `Map.of` is already producing an [unmodifiable `Map`][4] object.\r\n\r\n```java\r\nMap &lt; String, Set &lt; String &gt; &gt; map =\r\n        Map.of(\r\n                &quot;types&quot; , list.stream().map( Log :: type ).collect( Collectors.toUnmodifiableSet() ) ,\r\n                &quot;messages&quot; , list.stream().map( Log :: message ).collect( Collectors.toUnmodifiableSet() )\r\n        );\r\n```\r\n\r\nHere is a complete example. For brevity I used the [records][5] feature in Java 16+, but you could just as well define a conventional class. By the way, note that in Java 16+, records, enums, and interfaces can all be declared locally. \r\n\r\n```java\r\nrecord Log( String type , String message ) { }\r\nList &lt; Log &gt; list =\r\n        List.of(\r\n                new Log( &quot;INFO&quot; , &quot;dog&quot; ) ,\r\n                new Log( &quot;ERROR&quot; , &quot;dog&quot; ) ,\r\n                new Log( &quot;INFO&quot; , &quot;cat&quot; ) ,\r\n                new Log( &quot;INFO&quot; , &quot;cat&quot; ) ,\r\n                new Log( &quot;DEBUG&quot; , &quot;cat&quot; )\r\n        );\r\n\r\nMap &lt; String, Set &lt; String &gt; &gt; map =\r\n        Map.of(\r\n                &quot;types&quot; , list.stream().map( Log :: type ).collect( Collectors.toUnmodifiableSet() ) ,\r\n                &quot;messages&quot; , list.stream().map( Log :: message ).collect( Collectors.toUnmodifiableSet() )\r\n        );\r\n\r\nSystem.out.println( &quot;map = &quot; + map );\r\n```\r\n\r\n&gt;map = {types=[INFO, DEBUG, ERROR], messages=[cat, dog]}\r\n\r\nBy the way, be aware that `Set` and `Map` by definition may **iterate in any arbitrary order**. The order may change even between two iterations done one after another. If order matters to you, use a [`NavigableSet`][6] implementation and a [`NavigableMap`][7] implementation. \r\n\r\n\r\n  [1]: https://stackoverflow.com/a/73531066/642706\r\n  [2]: https://stackoverflow.com/questions/73530811/create-a-mapstring-setstring-from-a-listmyobject-using-stream-api/73537637#comment129858692_73531066\r\n  [3]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html#unmodifiable\r\n  [4]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html#unmodifiable\r\n  [5]: https://openjdk.org/jeps/395\r\n  [6]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/NavigableSet.html\r\n  [7]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/NavigableMap.html","title":"Create a Map&lt;String, Set&lt;String&gt;&gt; from a List&lt;MyObject&gt; using Stream API","body":"<p>The <a href=\"https://stackoverflow.com/a/73531066/642706\">Answer by Ivanchenko</a> is correct and quite clever. But that solution requires Java 12+, and <a href=\"https://stackoverflow.com/questions/73530811/create-a-mapstring-setstring-from-a-listmyobject-using-stream-api/73537637#comment129858692_73531066\">you later commented</a> that you must use Java 11.</p>\n<h1><code>list.stream().map( getter ).collect( …</code></h1>\n<p>Here is another solution, this one working in Java 11.</p>\n<p>Here we run through the list twice. On the first run, we use the getter method <code>type</code> to extract the <code>type</code> member field on the <code>Log</code> class. We collect those strings into a <code>Set</code>. Then we make a second run through the <code>List</code> of <code>Log</code> objects, this time extracting the <code>message</code> member field by calling the getter <code>message</code>. Those strings are also collected into a <code>Set</code>.</p>\n<p>We put each of the two sets into a <code>Map</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map &lt; String, Set &lt; String &gt; &gt; map =\n        Map.of(\n                &quot;types&quot; , list.stream().map( Log :: type ).collect( Collectors.toSet() ) ,\n                &quot;messages&quot; , list.stream().map( Log :: message ).collect( Collectors.toSet() )\n        );\n</code></pre>\n<p>Caveat: This approach is a little bit inefficient in that it loops the list twice, once for &quot;types&quot; and once for &quot;messages&quot;. But unless you are doing this many times for huge amounts of data, the impact on performance should be insignificant.</p>\n<p>Generally best to work with unmodifiable collections until you know otherwise.  So let's make those <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html#unmodifiable\" rel=\"nofollow noreferrer\">sets unmodifiable</a>. The <code>Map.of</code> is already producing an <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html#unmodifiable\" rel=\"nofollow noreferrer\">unmodifiable <code>Map</code></a> object.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map &lt; String, Set &lt; String &gt; &gt; map =\n        Map.of(\n                &quot;types&quot; , list.stream().map( Log :: type ).collect( Collectors.toUnmodifiableSet() ) ,\n                &quot;messages&quot; , list.stream().map( Log :: message ).collect( Collectors.toUnmodifiableSet() )\n        );\n</code></pre>\n<p>Here is a complete example. For brevity I used the <a href=\"https://openjdk.org/jeps/395\" rel=\"nofollow noreferrer\">records</a> feature in Java 16+, but you could just as well define a conventional class. By the way, note that in Java 16+, records, enums, and interfaces can all be declared locally.</p>\n<pre class=\"lang-java prettyprint-override\"><code>record Log( String type , String message ) { }\nList &lt; Log &gt; list =\n        List.of(\n                new Log( &quot;INFO&quot; , &quot;dog&quot; ) ,\n                new Log( &quot;ERROR&quot; , &quot;dog&quot; ) ,\n                new Log( &quot;INFO&quot; , &quot;cat&quot; ) ,\n                new Log( &quot;INFO&quot; , &quot;cat&quot; ) ,\n                new Log( &quot;DEBUG&quot; , &quot;cat&quot; )\n        );\n\nMap &lt; String, Set &lt; String &gt; &gt; map =\n        Map.of(\n                &quot;types&quot; , list.stream().map( Log :: type ).collect( Collectors.toUnmodifiableSet() ) ,\n                &quot;messages&quot; , list.stream().map( Log :: message ).collect( Collectors.toUnmodifiableSet() )\n        );\n\nSystem.out.println( &quot;map = &quot; + map );\n</code></pre>\n<blockquote>\n<p>map = {types=[INFO, DEBUG, ERROR], messages=[cat, dog]}</p>\n</blockquote>\n<p>By the way, be aware that <code>Set</code> and <code>Map</code> by definition may <strong>iterate in any arbitrary order</strong>. The order may change even between two iterations done one after another. If order matters to you, use a <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/NavigableSet.html\" rel=\"nofollow noreferrer\"><code>NavigableSet</code></a> implementation and a <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/NavigableMap.html\" rel=\"nofollow noreferrer\"><code>NavigableMap</code></a> implementation.</p>\n"}],"owner":{"account_id":16276241,"reputation":17,"user_id":16187547,"display_name":"Aleksey Bakharev"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":479,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73531066,"answer_count":2,"score":1,"last_activity_date":1694612852,"creation_date":1661785420,"question_id":73530811,"body_markdown":"I have a list of `LoggerMessageDto` objects.\r\n\r\n`LoggerMessageDto` has two `String` *fields:* `message` and `type`.\r\n\r\nI want to convert this `List` into a `Map` with the following contents:\r\n\r\n     key: &quot;types&quot;,     value: Set.of(LoggerMessageDto::gettype) \r\n     key: &quot;messages&quot; , value: Set.of(LoggerMessageDto::getMessage)\r\n\r\n*My attempt:*\r\n```\r\nList&lt;LoggerMessageDto&gt; result = getSomeResult();\r\nSet&lt;String&gt; journalTypes = new HashSet&lt;&gt;();\r\nSet&lt;String&gt; messages = new HashSet&lt;&gt;();\r\n\r\nresult.forEach(item -&gt; {\r\n    journalTypes.add(item.getType());\r\n    messages.add(item.getMessage());\r\n});\r\n\r\nString typesKey = &quot;types&quot;;\r\nString messagesKey = &quot;messages&quot;;\r\n\r\nMap&lt;String, Set&lt;String&gt;&gt; map = Map.of(\r\n    typesKey, journalTypes,\r\n    messagesKey, messages\r\n);\r\n```\r\nHow can I achieve this using Stream API?","title":"Create a Map&lt;String, Set&lt;String&gt;&gt; from a List&lt;MyObject&gt; using Stream API","body":"<p>I have a list of <code>LoggerMessageDto</code> objects.</p>\n<p><code>LoggerMessageDto</code> has two <code>String</code> <em>fields:</em> <code>message</code> and <code>type</code>.</p>\n<p>I want to convert this <code>List</code> into a <code>Map</code> with the following contents:</p>\n<pre><code> key: &quot;types&quot;,     value: Set.of(LoggerMessageDto::gettype) \n key: &quot;messages&quot; , value: Set.of(LoggerMessageDto::getMessage)\n</code></pre>\n<p><em>My attempt:</em></p>\n<pre><code>List&lt;LoggerMessageDto&gt; result = getSomeResult();\nSet&lt;String&gt; journalTypes = new HashSet&lt;&gt;();\nSet&lt;String&gt; messages = new HashSet&lt;&gt;();\n\nresult.forEach(item -&gt; {\n    journalTypes.add(item.getType());\n    messages.add(item.getMessage());\n});\n\nString typesKey = &quot;types&quot;;\nString messagesKey = &quot;messages&quot;;\n\nMap&lt;String, Set&lt;String&gt;&gt; map = Map.of(\n    typesKey, journalTypes,\n    messagesKey, messages\n);\n</code></pre>\n<p>How can I achieve this using Stream API?</p>\n"},{"tags":["java","quartz-scheduler"],"comments":[{"owner":{"account_id":1323534,"reputation":7793,"user_id":1268844,"accept_rate":100,"display_name":"Anshu"},"score":0,"creation_date":1349681211,"post_id":12777057,"comment_id":17270192,"body_markdown":"Inject the externalInstance in your job","body":"Inject the externalInstance in your job"}],"answers":[{"comments":[{"owner":{"account_id":42992,"reputation":8592,"user_id":125470,"accept_rate":44,"display_name":"janetsmith"},"score":0,"creation_date":1349685109,"post_id":12777248,"comment_id":17271465,"body_markdown":"external instance I mean could be any custom data type, not limited to native data type, like String, Float, Int etc. I read from the documentation, it says that instance needs to be serializable.","body":"external instance I mean could be any custom data type, not limited to native data type, like String, Float, Int etc. I read from the documentation, it says that instance needs to be serializable."},{"owner":{"account_id":86297,"reputation":23984,"user_id":240078,"accept_rate":58,"display_name":"Vikdor"},"score":0,"creation_date":1349685364,"post_id":12777248,"comment_id":17271559,"body_markdown":"In our case, the objects to work on are DB objects, so we used store the criteria to retrieve them from DB, in the JobDataMap and retrieve them in the execute method. So, you also need to figure out a way to pass the information required to retrieve the external instance from some store iff you cannot make all of them serializable.","body":"In our case, the objects to work on are DB objects, so we used store the criteria to retrieve them from DB, in the JobDataMap and retrieve them in the execute method. So, you also need to figure out a way to pass the information required to retrieve the external instance from some store iff you cannot make all of them serializable."},{"owner":{"account_id":2470791,"reputation":1829,"user_id":2152704,"display_name":"Mohammed Elrashidy"},"score":0,"creation_date":1573131865,"post_id":12777248,"comment_id":103787137,"body_markdown":"The answer didn&#39;t added a value, actually I came to this question trying to figure out this &quot;way&quot;","body":"The answer didn&#39;t added a value, actually I came to this question trying to figure out this &quot;way&quot;"},{"owner":{"account_id":86297,"reputation":23984,"user_id":240078,"accept_rate":58,"display_name":"Vikdor"},"score":0,"creation_date":1573240661,"post_id":12777248,"comment_id":103831079,"body_markdown":"@MohammedElrashidy, one of the ways is to store the jobdatamap (key, value) pairs in the database. This is under the assumption that the values are serializable. If they are not serializable, then more details on the nature of such data will help suggest more &quot;ways&quot; to pass this information. HTH.","body":"@MohammedElrashidy, one of the ways is to store the jobdatamap (key, value) pairs in the database. This is under the assumption that the values are serializable. If they are not serializable, then more details on the nature of such data will help suggest more &quot;ways&quot; to pass this information. HTH."},{"owner":{"account_id":2470791,"reputation":1829,"user_id":2152704,"display_name":"Mohammed Elrashidy"},"score":0,"creation_date":1573477404,"post_id":12777248,"comment_id":103883771,"body_markdown":"@Vikdor I understand, my concern was that your answer was really general without giving real working answer. \nThanks, it is still giving hints\nBTW I was able to pass instances and left that as an answer in this question\nhttps://stackoverflow.com/a/58801887/2152704","body":"@Vikdor I understand, my concern was that your answer was really general without giving real working answer.  Thanks, it is still giving hints BTW I was able to pass instances and left that as an answer in this question <a href=\"https://stackoverflow.com/a/58801887/2152704\">stackoverflow.com/a/58801887/2152704</a>"}],"tags":[],"owner":{"account_id":86297,"reputation":23984,"user_id":240078,"accept_rate":58,"display_name":"Vikdor"},"comment_count":5,"down_vote_count":2,"up_vote_count":12,"is_accepted":false,"score":10,"last_activity_date":1349681864,"creation_date":1349681864,"answer_id":12777248,"question_id":12777057,"body_markdown":"While scheduling the job using a trigger, you would have defined `JobDataMap` that is added to the `JobDetail`. That JobDetail object will be present in the `JobExecutionContext` passed to the `execute()` method in your `Job`. So, you should figure out a way to pass your externalInstance through the `JobDataMap`. HTH.","title":"How to pass instance variables into Quartz job?","body":"<p>While scheduling the job using a trigger, you would have defined <code>JobDataMap</code> that is added to the <code>JobDetail</code>. That JobDetail object will be present in the <code>JobExecutionContext</code> passed to the <code>execute()</code> method in your <code>Job</code>. So, you should figure out a way to pass your externalInstance through the <code>JobDataMap</code>. HTH.</p>\n"},{"comments":[{"owner":{"account_id":1234911,"reputation":576,"user_id":1198692,"accept_rate":67,"display_name":"Vivek Rao"},"score":0,"creation_date":1388033801,"post_id":12782677,"comment_id":31146739,"body_markdown":"This works fine for serializable objects, and it&#39;ll work for classes that you have access to. What if I want to inject something from an external jar?\nFor instance, I&#39;m trying to write a StatefulJob that lists all the files in an S3 bucket since a certain date and stores the files it listed in JobDetailMap. I want to inject a spring configured AmazonS3Client into my job. I cannot do this because that class is not serializable, and so I have to inject the secret key, access key and write code to manage creation of an s3 client. Is that the best way to do it? Any suggestions would be helpful.","body":"This works fine for serializable objects, and it&#39;ll work for classes that you have access to. What if I want to inject something from an external jar? For instance, I&#39;m trying to write a StatefulJob that lists all the files in an S3 bucket since a certain date and stores the files it listed in JobDetailMap. I want to inject a spring configured AmazonS3Client into my job. I cannot do this because that class is not serializable, and so I have to inject the secret key, access key and write code to manage creation of an s3 client. Is that the best way to do it? Any suggestions would be helpful."},{"owner":{"account_id":1234911,"reputation":576,"user_id":1198692,"accept_rate":67,"display_name":"Vivek Rao"},"score":0,"creation_date":1388156170,"post_id":12782677,"comment_id":31187957,"body_markdown":"Answering my own question - autowire the job, found this really good solution online - http://stackoverflow.com/questions/4258313/how-to-use-autowired-in-a-quartz-job","body":"Answering my own question - autowire the job, found this really good solution online - <a href=\"http://stackoverflow.com/questions/4258313/how-to-use-autowired-in-a-quartz-job\" title=\"how to use autowired in a quartz job\">stackoverflow.com/questions/4258313/&hellip;</a>"},{"owner":{"account_id":1575356,"reputation":1536,"user_id":1461967,"accept_rate":17,"display_name":"JavaYouth"},"score":0,"creation_date":1524461206,"post_id":12782677,"comment_id":86963684,"body_markdown":"I was having a tough time to get a Spring managed bean in my Job class. I tried setting my object to JobDetail map but it could not serialize and was failing. Setting in scheduler context worked like a charm. Thank you!","body":"I was having a tough time to get a Spring managed bean in my Job class. I tried setting my object to JobDetail map but it could not serialize and was failing. Setting in scheduler context worked like a charm. Thank you!"},{"owner":{"account_id":1628571,"reputation":6081,"user_id":1503570,"accept_rate":51,"display_name":"lorraine batol"},"score":0,"creation_date":1564048899,"post_id":12782677,"comment_id":100906684,"body_markdown":"what if you are passing different instance of object for every schedule you made? i mean the object parameter should be tied to job not the scheduler","body":"what if you are passing different instance of object for every schedule you made? i mean the object parameter should be tied to job not the scheduler"},{"owner":{"account_id":11998659,"reputation":508,"user_id":8779309,"display_name":"Lior"},"score":0,"creation_date":1580801840,"post_id":12782677,"comment_id":106207351,"body_markdown":"Best and simple answer i have found. Thanks!","body":"Best and simple answer i have found. Thanks!"}],"tags":[],"owner":{"account_id":904403,"reputation":1974,"user_id":939618,"accept_rate":84,"display_name":"Rips"},"comment_count":5,"down_vote_count":1,"up_vote_count":62,"is_accepted":true,"score":61,"last_activity_date":1564651030,"creation_date":1349702605,"answer_id":12782677,"question_id":12777057,"body_markdown":"you can put your instance in the schedulerContext.When you are going to schedule the job ,just before that you can do below:\r\n\r\n    getScheduler().getContext().put(&quot;externalInstance&quot;, externalInstance);\r\n\r\nYour job class would be like below:\r\n\r\n    public class SimpleJob implements Job {\r\n        @Override\r\n        public void execute(JobExecutionContext context)\r\n                throws JobExecutionException {\r\n            SchedulerContext schedulerContext = null;\r\n            try {\r\n                schedulerContext = context.getScheduler().getContext();\r\n            } catch (SchedulerException e1) {\r\n                e1.printStackTrace();\r\n            }\r\n            ExternalInstance externalInstance =\r\n                (ExternalInstance) schedulerContext.get(&quot;externalInstance&quot;);\r\n\r\n            float avg = externalInstance.calculateAvg();\r\n        }\r\n    }\r\n\r\n\r\nIf you are using Spring ,you can actually using spring&#39;s support to inject the whole applicationContext like answered in the [Link][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/12707383/data-retrival-using-quartz &quot;Link&quot;","title":"How to pass instance variables into Quartz job?","body":"<p>you can put your instance in the schedulerContext.When you are going to schedule the job ,just before that you can do below:</p>\n\n<pre><code>getScheduler().getContext().put(\"externalInstance\", externalInstance);\n</code></pre>\n\n<p>Your job class would be like below:</p>\n\n<pre><code>public class SimpleJob implements Job {\n    @Override\n    public void execute(JobExecutionContext context)\n            throws JobExecutionException {\n        SchedulerContext schedulerContext = null;\n        try {\n            schedulerContext = context.getScheduler().getContext();\n        } catch (SchedulerException e1) {\n            e1.printStackTrace();\n        }\n        ExternalInstance externalInstance =\n            (ExternalInstance) schedulerContext.get(\"externalInstance\");\n\n        float avg = externalInstance.calculateAvg();\n    }\n}\n</code></pre>\n\n<p>If you are using Spring ,you can actually using spring's support to inject the whole applicationContext like answered in the <a href=\"https://stackoverflow.com/questions/12707383/data-retrival-using-quartz\" title=\"Link\">Link</a></p>\n"},{"tags":[],"owner":{"account_id":220392,"reputation":10621,"user_id":5209935,"accept_rate":14,"display_name":"Matthew"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1472649798,"creation_date":1472649798,"answer_id":39250865,"question_id":12777057,"body_markdown":"This is the responsibility of the `JobFactory`. The default `PropertySettingJobFactory` implementation will invoke any bean-setter methods, based on properties found in the schdeuler context, the trigger, and the job detail. So as long as you have implemnted an appropriate `setContext()` setter method you should be able to do any of the following:\r\n\r\n    scheduler.getContext().put(&quot;context&quot;, context);\r\n\r\nOr\r\n\r\n    Trigger trigger = TriggerBuilder.newTrigger()\r\n      ...\r\n      .usingJobData(&quot;context&quot;, context)\r\n      .build()\r\n\r\nOr\r\n\r\n    JobDetail job = JobBuilder.newJob(SimpleJob.class)\r\n      ...\r\n      .usingJobData(&quot;context&quot;, context)\r\n      .build()\r\n\r\nOr if that isn&#39;t enough you can provide your own `JobFactory` class which instantiates the Job objects however you please.\r\n","title":"How to pass instance variables into Quartz job?","body":"<p>This is the responsibility of the <code>JobFactory</code>. The default <code>PropertySettingJobFactory</code> implementation will invoke any bean-setter methods, based on properties found in the schdeuler context, the trigger, and the job detail. So as long as you have implemnted an appropriate <code>setContext()</code> setter method you should be able to do any of the following:</p>\n\n<pre><code>scheduler.getContext().put(\"context\", context);\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>Trigger trigger = TriggerBuilder.newTrigger()\n  ...\n  .usingJobData(\"context\", context)\n  .build()\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>JobDetail job = JobBuilder.newJob(SimpleJob.class)\n  ...\n  .usingJobData(\"context\", context)\n  .build()\n</code></pre>\n\n<p>Or if that isn't enough you can provide your own <code>JobFactory</code> class which instantiates the Job objects however you please.</p>\n"},{"tags":[],"owner":{"account_id":8751392,"reputation":487,"user_id":6544491,"display_name":"Harsh Maheswari"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1476356398,"creation_date":1476355106,"answer_id":40018679,"question_id":12777057,"body_markdown":"Solve this problem by creating one interface with one `HashMap` putting required information there.\r\n\r\nImplement this interface in your Quartz `Job` class this information will be accessible.\r\n\r\nIn `IFace`\r\n\r\n    Map&lt;JobKey,Object&gt; map = new HashMap&lt;&gt;();\r\n\r\nIn `Job`\r\n\r\n    map.get(context.getJobDetail().getKey()) =&gt;  will give you Object\r\n\r\n","title":"How to pass instance variables into Quartz job?","body":"<p>Solve this problem by creating one interface with one <code>HashMap</code> putting required information there.</p>\n\n<p>Implement this interface in your Quartz <code>Job</code> class this information will be accessible.</p>\n\n<p>In <code>IFace</code></p>\n\n<pre><code>Map&lt;JobKey,Object&gt; map = new HashMap&lt;&gt;();\n</code></pre>\n\n<p>In <code>Job</code></p>\n\n<pre><code>map.get(context.getJobDetail().getKey()) =&gt;  will give you Object\n</code></pre>\n"},{"tags":[],"owner":{"account_id":107117,"reputation":480,"user_id":973085,"display_name":"Evvo"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1570456144,"creation_date":1570456144,"answer_id":58270938,"question_id":12777057,"body_markdown":"Add the object to the JobDataMap:\r\n\r\n    JobDetail job = JobBuilder.newJob(MyJobClass.class)\r\n                              .withIdentity(&quot;MyIdentity&quot;,\r\n                                            &quot;MyGroup&quot;)\r\n                              .build();\r\n    job.getJobDataMap()\r\n       .put(&quot;MyObject&quot;,\r\n            myObject);\r\n\r\nAccess the data from the JobDataMap:\r\n\r\n    var myObject = (MyObjectClass) context.getJobDetail()\r\n                                          .getJobDataMap()\r\n                                          .get(&quot;carrier&quot;);\r\n\r\n","title":"How to pass instance variables into Quartz job?","body":"<p>Add the object to the JobDataMap:</p>\n\n<pre><code>JobDetail job = JobBuilder.newJob(MyJobClass.class)\n                          .withIdentity(\"MyIdentity\",\n                                        \"MyGroup\")\n                          .build();\njob.getJobDataMap()\n   .put(\"MyObject\",\n        myObject);\n</code></pre>\n\n<p>Access the data from the JobDataMap:</p>\n\n<pre><code>var myObject = (MyObjectClass) context.getJobDetail()\n                                      .getJobDataMap()\n                                      .get(\"carrier\");\n</code></pre>\n"},{"comments":[{"owner":{"account_id":968743,"reputation":3452,"user_id":991710,"accept_rate":82,"display_name":"filpa"},"score":0,"creation_date":1574258743,"post_id":58801887,"comment_id":104168036,"body_markdown":"Did you mean `String text = data.getText();`? `Data` does not have a `getB()` method.","body":"Did you mean <code>String text = data.getText();</code>? <code>Data</code> does not have a <code>getB()</code> method."},{"owner":{"account_id":2470791,"reputation":1829,"user_id":2152704,"display_name":"Mohammed Elrashidy"},"score":0,"creation_date":1643709928,"post_id":58801887,"comment_id":125406161,"body_markdown":"@filpa yes, the answer is edited","body":"@filpa yes, the answer is edited"}],"tags":[],"owner":{"account_id":2470791,"reputation":1829,"user_id":2152704,"display_name":"Mohammed Elrashidy"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1574420927,"creation_date":1573477202,"answer_id":58801887,"question_id":12777057,"body_markdown":"Quartz has a simple way to grep params from JobDataMap using setters\r\n\r\nI am using Quartz 2.3 and I simply used setter to fetch passed instance objects\r\n\r\nFor example I created this class\r\n```\r\npublic class Data implements Serializable {\r\n    @JsonProperty(&quot;text&quot;)\r\n    private String text;\r\n    \r\n    @JsonCreator\r\n    public Data(@JsonProperty(&quot;b&quot;) String text) {this.text = text;}\r\n   \r\n    public String getText() {return text;}\r\n}\r\n```\r\n\r\nThen I created an instance of this class&#160;and put it inside the JobDataMap\r\n```\r\nJobDataMap jobDataMap = new JobDataMap();\r\njobDataMap.put(&quot;data&quot;, new Data(1, &quot;One!&quot;));\r\nJobDetail job = newJob(HelloJob.class)\r\n                .withIdentity(&quot;myJob&quot;, &quot;group&quot;)\r\n                .withDescription(&quot;bla bla bla&quot;)\r\n                .usingJobData(jobDataMap) // &lt;!!!\r\n                .build();\r\n```\r\n\r\nAnd my job class looks like this\r\n```\r\npublic class HelloJob implements Job {\r\n    Data data;\r\n\r\n    public HelloJob() {}\r\n\r\n    public void execute(JobExecutionContext context)\r\n            throws JobExecutionException\r\n    {\r\n        String text = data.getText();\r\n        System.out.println(text);\r\n    }\r\n\r\n    public void setData(Data data) {this.data = data;}\r\n}\r\n```\r\n* Note: it is mandatory that the field and the setter matched the key\r\n\r\nThis code will print `One!` when you schedule the job.\r\n\r\nThat&#39;s it, clean and efficient\r\n","title":"How to pass instance variables into Quartz job?","body":"<p>Quartz has a simple way to grep params from JobDataMap using setters</p>\n\n<p>I am using Quartz 2.3 and I simply used setter to fetch passed instance objects</p>\n\n<p>For example I created this class</p>\n\n<pre><code>public class Data implements Serializable {\n    @JsonProperty(\"text\")\n    private String text;\n\n    @JsonCreator\n    public Data(@JsonProperty(\"b\") String text) {this.text = text;}\n\n    public String getText() {return text;}\n}\n</code></pre>\n\n<p>Then I created an instance of this class and put it inside the JobDataMap</p>\n\n<pre><code>JobDataMap jobDataMap = new JobDataMap();\njobDataMap.put(\"data\", new Data(1, \"One!\"));\nJobDetail job = newJob(HelloJob.class)\n                .withIdentity(\"myJob\", \"group\")\n                .withDescription(\"bla bla bla\")\n                .usingJobData(jobDataMap) // &lt;!!!\n                .build();\n</code></pre>\n\n<p>And my job class looks like this</p>\n\n<pre><code>public class HelloJob implements Job {\n    Data data;\n\n    public HelloJob() {}\n\n    public void execute(JobExecutionContext context)\n            throws JobExecutionException\n    {\n        String text = data.getText();\n        System.out.println(text);\n    }\n\n    public void setData(Data data) {this.data = data;}\n}\n</code></pre>\n\n<ul>\n<li>Note: it is mandatory that the field and the setter matched the key</li>\n</ul>\n\n<p>This code will print <code>One!</code> when you schedule the job.</p>\n\n<p>That's it, clean and efficient</p>\n"},{"tags":[],"owner":{"account_id":7746434,"reputation":537,"user_id":5864025,"display_name":"Anthony Vinay"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694612398,"creation_date":1694612398,"answer_id":77097636,"question_id":12777057,"body_markdown":"Just do the following :\r\n\r\n    public class NightlyJob implements Job {\r\n    \r\n        @Override\r\n        public void execute(JobExecutionContext context) throws JobExecutionException {\r\n            JobDataMap mergedJobDataMap = context.getMergedJobDataMap();\r\n            String orgCode = mergedJobDataMap.getString(&quot;dataName&quot;);\r\n            System.out.println(MessageFormat.format(&quot;Nightly Job {0}&quot;, orgCode));\r\n        }\r\n    \r\n    }","title":"How to pass instance variables into Quartz job?","body":"<p>Just do the following :</p>\n<pre><code>public class NightlyJob implements Job {\n\n    @Override\n    public void execute(JobExecutionContext context) throws JobExecutionException {\n        JobDataMap mergedJobDataMap = context.getMergedJobDataMap();\n        String orgCode = mergedJobDataMap.getString(&quot;dataName&quot;);\n        System.out.println(MessageFormat.format(&quot;Nightly Job {0}&quot;, orgCode));\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":42992,"reputation":8592,"user_id":125470,"accept_rate":44,"display_name":"janetsmith"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51592,"favorite_count":0,"down_vote_count":0,"up_vote_count":30,"accepted_answer_id":12782677,"answer_count":7,"score":30,"last_activity_date":1694612398,"creation_date":1349680982,"question_id":12777057,"body_markdown":"I wonder how to pass an instance variable externally in Quartz?\r\n\r\nBelow is pseudo code I would like to write. How can I pass externalInstance into this Job?\r\n\r\n    public class SimpleJob implements Job {\r\n    \t\t@Override\r\n    \t\tpublic void execute(JobExecutionContext context)\r\n    \t\t\t\tthrows JobExecutionException {\r\n\r\n\t\t\t\tfloat avg = externalInstance.calculateAvg();\r\n    \t\t}\r\n    }","title":"How to pass instance variables into Quartz job?","body":"<p>I wonder how to pass an instance variable externally in Quartz?</p>\n\n<p>Below is pseudo code I would like to write. How can I pass externalInstance into this Job?</p>\n\n<pre><code>public class SimpleJob implements Job {\n        @Override\n        public void execute(JobExecutionContext context)\n                throws JobExecutionException {\n\n            float avg = externalInstance.calculateAvg();\n        }\n}\n</code></pre>\n"},{"tags":["java","postgresql","spring-boot","junit5","testcontainers"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1694612367,"post_id":77097566,"comment_id":135914177,"body_markdown":"Either you define a bean in the configuration and use `@ServiceConnection` or the URL but not both. The `url` takes precedence over your container.","body":"Either you define a bean in the configuration and use <code>@ServiceConnection</code> or the URL but not both. The <code>url</code> takes precedence over your container."},{"owner":{"account_id":10516436,"reputation":653,"user_id":7752551,"display_name":"Adrien H"},"score":0,"creation_date":1694617856,"post_id":77097566,"comment_id":135915583,"body_markdown":"@M.Deinum Indeed, that was the issue. Thanks! Does that mean I now have to import my Configuration in every single class annotated with `@SpringBootTest` ? If I don&#39;t do something, Spring will fail to load the datasource as the URL is no longer provided by the properties.","body":"@M.Deinum Indeed, that was the issue. Thanks! Does that mean I now have to import my Configuration in every single class annotated with <code>@SpringBootTest</code> ? If I don&#39;t do something, Spring will fail to load the datasource as the URL is no longer provided by the properties."},{"owner":{"account_id":10516436,"reputation":653,"user_id":7752551,"display_name":"Adrien H"},"score":0,"creation_date":1694619099,"post_id":77097566,"comment_id":135915883,"body_markdown":"For reference for other people, the following article from Spring Boot was very helpful: https://spring.io/blog/2023/06/23/improved-testcontainers-support-in-spring-boot-3-1 .","body":"For reference for other people, the following article from Spring Boot was very helpful: <a href=\"https://spring.io/blog/2023/06/23/improved-testcontainers-support-in-spring-boot-3-1\" rel=\"nofollow noreferrer\">spring.io/blog/2023/06/23/&hellip;</a> ."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1694671552,"post_id":77097566,"comment_id":135922348,"body_markdown":"Creating a base class and have other test classes extend this will fix this.","body":"Creating a base class and have other test classes extend this will fix this."}],"owner":{"account_id":10516436,"reputation":653,"user_id":7752551,"display_name":"Adrien H"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":181,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694611988,"creation_date":1694611988,"question_id":77097566,"body_markdown":"I have a Spring Boot 3 project where I write integration tests that use test containers to run the PostgreSQL database.\r\nI&#39;d like to introduce fuzzy matching in one endpoint, and thus require the PostgresQL extension pg_trgm.\r\n\r\nFurthermore, I read the documentation, but it&#39;s still not clear how I&#39;m supposed to do such a thing.\r\n\r\n - https://java.testcontainers.org/modules/databases/postgres/ is basically empty.\r\n - https://java.testcontainers.org/features/configuration/ looked promising, but is missing the feature I need.\r\n\r\nFollowing what I found in some [GitHub issue][1], I tried defining a bean in a test configuration, but testcontainer doesn&#39;t seem to care:\r\n\r\n    @TestConfiguration(proxyBeanMethods = false)\r\n    public class DatabaseConfiguration {\r\n    \r\n        @Bean\r\n        public PostgreSQLContainer&lt;?&gt; postgreSQLContainer() {\r\n            var name = DockerImageName\r\n                    .parse(&quot;localhost/cadonym/database&quot;)\r\n                    .asCompatibleSubstituteFor(&quot;postgres&quot;);\r\n            return new PostgreSQLContainer&lt;&gt;(name);\r\n        }\r\n    }\r\n\r\nWhere the image is defined by:\r\n\r\n    # This image is meant to be used during development only.\r\n    FROM docker.io/library/postgres:15.3\r\n    \r\n    ENV POSTGRES_USER=postgres\r\n    ENV POSTGRES_PASSWORD=postgres\r\n    ENV POSTGRES_DB=cadonym\r\n    \r\n    RUN echo &quot;CREATE EXTENSION pg_trgm&quot; &gt;&gt; /docker-entrypoint-initdb.d/pg_trgm.sql\r\n\r\nWhile running my test, I could see testcontainer creating containers based on `docker.io/testcontainers/ryuk:0.5.1` and `docker.io/library/postgres:15.1`. The custom image isn&#39;t used, and the test behavior didn&#39;t change despite my test configuration: &quot;function similarity(character varying, character varying) does not exist&quot;.\r\n\r\nI verified that my configuration is loaded by changing the argument of the call &quot;asCompatibleSubstituteFor&quot; (&quot;postgres&quot;) to a random value, and it&#39;s indeed loaded, as the aforementioned change stops the context from loading as expected.\r\n\r\nOther relevant configuration can be found in my test properties:\r\n\r\n    spring.datasource.driver-class-name=org.testcontainers.jdbc.ContainerDatabaseDriver\r\n    spring.datasource.url=jdbc:tc:postgresql:15.1:///integration-tests-db\r\n\r\n\r\n  [1]: https://github.com/testcontainers/testcontainers-java/issues/2728","title":"How to create a PostgresQL extension inside a testcontainer started by Junit5 and configured by Spring Boot","body":"<p>I have a Spring Boot 3 project where I write integration tests that use test containers to run the PostgreSQL database.\nI'd like to introduce fuzzy matching in one endpoint, and thus require the PostgresQL extension pg_trgm.</p>\n<p>Furthermore, I read the documentation, but it's still not clear how I'm supposed to do such a thing.</p>\n<ul>\n<li><a href=\"https://java.testcontainers.org/modules/databases/postgres/\" rel=\"nofollow noreferrer\">https://java.testcontainers.org/modules/databases/postgres/</a> is basically empty.</li>\n<li><a href=\"https://java.testcontainers.org/features/configuration/\" rel=\"nofollow noreferrer\">https://java.testcontainers.org/features/configuration/</a> looked promising, but is missing the feature I need.</li>\n</ul>\n<p>Following what I found in some <a href=\"https://github.com/testcontainers/testcontainers-java/issues/2728\" rel=\"nofollow noreferrer\">GitHub issue</a>, I tried defining a bean in a test configuration, but testcontainer doesn't seem to care:</p>\n<pre><code>@TestConfiguration(proxyBeanMethods = false)\npublic class DatabaseConfiguration {\n\n    @Bean\n    public PostgreSQLContainer&lt;?&gt; postgreSQLContainer() {\n        var name = DockerImageName\n                .parse(&quot;localhost/cadonym/database&quot;)\n                .asCompatibleSubstituteFor(&quot;postgres&quot;);\n        return new PostgreSQLContainer&lt;&gt;(name);\n    }\n}\n</code></pre>\n<p>Where the image is defined by:</p>\n<pre><code># This image is meant to be used during development only.\nFROM docker.io/library/postgres:15.3\n\nENV POSTGRES_USER=postgres\nENV POSTGRES_PASSWORD=postgres\nENV POSTGRES_DB=cadonym\n\nRUN echo &quot;CREATE EXTENSION pg_trgm&quot; &gt;&gt; /docker-entrypoint-initdb.d/pg_trgm.sql\n</code></pre>\n<p>While running my test, I could see testcontainer creating containers based on <code>docker.io/testcontainers/ryuk:0.5.1</code> and <code>docker.io/library/postgres:15.1</code>. The custom image isn't used, and the test behavior didn't change despite my test configuration: &quot;function similarity(character varying, character varying) does not exist&quot;.</p>\n<p>I verified that my configuration is loaded by changing the argument of the call &quot;asCompatibleSubstituteFor&quot; (&quot;postgres&quot;) to a random value, and it's indeed loaded, as the aforementioned change stops the context from loading as expected.</p>\n<p>Other relevant configuration can be found in my test properties:</p>\n<pre><code>spring.datasource.driver-class-name=org.testcontainers.jdbc.ContainerDatabaseDriver\nspring.datasource.url=jdbc:tc:postgresql:15.1:///integration-tests-db\n</code></pre>\n"},{"tags":["java","c#","c++","c","performance"],"comments":[{"owner":{"account_id":264156,"reputation":2599,"user_id":550235,"accept_rate":50,"display_name":"Russ Schultz"},"score":0,"creation_date":1446177365,"post_id":33428297,"comment_id":54645543,"body_markdown":"in the C++ version, try making the smallerA and smallerB holders be pointers, rather than making copies of the current smallest point, then copy at the end.    Or follow the method used by java to assign to a local result variable and return the value.   I suspect you&#39;re spending a lot of time copying data in the C++ and C# version, and not in the java version","body":"in the C++ version, try making the smallerA and smallerB holders be pointers, rather than making copies of the current smallest point, then copy at the end.    Or follow the method used by java to assign to a local result variable and return the value.   I suspect you&#39;re spending a lot of time copying data in the C++ and C# version, and not in the java version"},{"owner":{"account_id":178655,"reputation":103646,"user_id":410767,"accept_rate":89,"display_name":"Tony Delroy"},"score":1,"creation_date":1446177403,"post_id":33428297,"comment_id":54645553,"body_markdown":"Perhaps Java is optimising the `Math.pow(p1.X - p2.X, 2)` call to a multiplication: you could explicitly change it to a multiplication in the C version and see if that accounts for the performance difference.  `QueryPerformanceCounter` is also famously unreliable, depending on your exact OS version and hardware, though if your machine is otherwise idle and it doesn&#39;t flip the program across cores you shouldn&#39;t be affected by the bugs.","body":"Perhaps Java is optimising the <code>Math.pow(p1.X - p2.X, 2)</code> call to a multiplication: you could explicitly change it to a multiplication in the C version and see if that accounts for the performance difference.  <code>QueryPerformanceCounter</code> is also famously unreliable, depending on your exact OS version and hardware, though if your machine is otherwise idle and it doesn&#39;t flip the program across cores you shouldn&#39;t be affected by the bugs."},{"owner":{"account_id":6154727,"reputation":11053,"user_id":4798077,"accept_rate":100,"display_name":"Ron Beyer"},"score":1,"creation_date":1446177462,"post_id":33428297,"comment_id":54645563,"body_markdown":"Why does the java version have a `Result` class, but the C# and C++ versions do not? Are you sure you are comparing apples to apples? Is the output from these 3 programs equivalent?","body":"Why does the java version have a <code>Result</code> class, but the C# and C++ versions do not? Are you sure you are comparing apples to apples? Is the output from these 3 programs equivalent?"},{"owner":{"account_id":395272,"reputation":24521,"user_id":758133,"accept_rate":100,"display_name":"Martin James"},"score":2,"creation_date":1446177492,"post_id":33428297,"comment_id":54645569,"body_markdown":"Is this after the obligatory 40 sec warmup?","body":"Is this after the obligatory 40 sec warmup?"},{"owner":{"account_id":2618929,"reputation":1215,"user_id":2267418,"accept_rate":58,"display_name":"andre_ss6"},"score":0,"creation_date":1446177523,"post_id":33428297,"comment_id":54645578,"body_markdown":"@TonyD I thought about that when making the benchmark, but then I decided that the compiler&#39;s abilities to inline functions should also be evaluated. Should have done it anyway after obtaining these absurd results. And about the `QueryPerformanceCount`, I don&#39;t think it is a reliability problem: the C version is obviously slower, and I even checked against the clock to see if it was really taking 9 seconds.","body":"@TonyD I thought about that when making the benchmark, but then I decided that the compiler&#39;s abilities to inline functions should also be evaluated. Should have done it anyway after obtaining these absurd results. And about the <code>QueryPerformanceCount</code>, I don&#39;t think it is a reliability problem: the C version is obviously slower, and I even checked against the clock to see if it was really taking 9 seconds."},{"owner":{"account_id":1025310,"reputation":9017,"user_id":1034749,"accept_rate":67,"display_name":"fghj"},"score":0,"creation_date":1446177639,"post_id":33428297,"comment_id":54645602,"body_markdown":"Java version look incomplete, `int size = Integer.parseInt(file[0]);` file not defined, may be in java version you not read or init input data?","body":"Java version look incomplete, <code>int size = Integer.parseInt(file[0]);</code> file not defined, may be in java version you not read or init input data?"},{"owner":{"account_id":2618929,"reputation":1215,"user_id":2267418,"accept_rate":58,"display_name":"andre_ss6"},"score":0,"creation_date":1446177648,"post_id":33428297,"comment_id":54645604,"body_markdown":"@RussSchultz I&#39;ve tried that in the C# version, didn&#39;t make any difference. I&#39;ll try it again though, both in C# and C.\n\n\nRonBeyer Because Java can&#39;t pass by reference; I&#39;ll change it anyway though, I got so nervous with the result that I forgot to make everything absolutely equal. I&#39;m sorry, I&#39;ll fix it right now and post the results. And yes, all of the three outputs the same thing.","body":"@RussSchultz I&#39;ve tried that in the C# version, didn&#39;t make any difference. I&#39;ll try it again though, both in C# and C.   RonBeyer Because Java can&#39;t pass by reference; I&#39;ll change it anyway though, I got so nervous with the result that I forgot to make everything absolutely equal. I&#39;m sorry, I&#39;ll fix it right now and post the results. And yes, all of the three outputs the same thing."},{"owner":{"account_id":2618929,"reputation":1215,"user_id":2267418,"accept_rate":58,"display_name":"andre_ss6"},"score":0,"creation_date":1446177728,"post_id":33428297,"comment_id":54645618,"body_markdown":"@user1034749 I&#39;ve deleted everything about file reading, as that occurs only on application start. The file is never touched after the timer starts (or the timestamp is acquired, in the case of C and java).","body":"@user1034749 I&#39;ve deleted everything about file reading, as that occurs only on application start. The file is never touched after the timer starts (or the timestamp is acquired, in the case of C and java)."},{"owner":{"account_id":6154727,"reputation":11053,"user_id":4798077,"accept_rate":100,"display_name":"Ron Beyer"},"score":0,"creation_date":1446177857,"post_id":33428297,"comment_id":54645642,"body_markdown":"Also, for the C# version, run the test more than once to allow JIT to properly optimize and emit machine code. For all the tests, I&#39;d take an average of 100 runs (you are saying it takes max 10 seconds, so this would take about 17 minutes to run).","body":"Also, for the C# version, run the test more than once to allow JIT to properly optimize and emit machine code. For all the tests, I&#39;d take an average of 100 runs (you are saying it takes max 10 seconds, so this would take about 17 minutes to run)."},{"owner":{"account_id":2618929,"reputation":1215,"user_id":2267418,"accept_rate":58,"display_name":"andre_ss6"},"score":0,"creation_date":1446177974,"post_id":33428297,"comment_id":54645670,"body_markdown":"@RonBeyer Yes, I&#39;m aware of that and I ran all three multiple times.","body":"@RonBeyer Yes, I&#39;m aware of that and I ran all three multiple times."},{"owner":{"account_id":6154727,"reputation":11053,"user_id":4798077,"accept_rate":100,"display_name":"Ron Beyer"},"score":0,"creation_date":1446178145,"post_id":33428297,"comment_id":54645705,"body_markdown":"I mean put a loop in main, not run the program multiple times, the main methods you have above don&#39;t reflect that, and JIT doesn&#39;t save across application runs in C# (not sure about Java).","body":"I mean put a loop in main, not run the program multiple times, the main methods you have above don&#39;t reflect that, and JIT doesn&#39;t save across application runs in C# (not sure about Java)."},{"owner":{"account_id":178655,"reputation":103646,"user_id":410767,"accept_rate":89,"display_name":"Tony Delroy"},"score":2,"creation_date":1446178959,"post_id":33428297,"comment_id":54645910,"body_markdown":"I&#39;ve copied the program into VC++2012 - for 1000 points initialised with random numbers, it takes ~6.8ms on this PC.  For 10k points, ~738ms.  Release mode build with no care taken over other optimisation settings.  (You have a bug: if not other points are closer together than points[0] and points[1], you never set `*smallerA` and `*smallerB`).  Avoiding pow in favour of manual multiplication: ~700ms.","body":"I&#39;ve copied the program into VC++2012 - for 1000 points initialised with random numbers, it takes ~6.8ms on this PC.  For 10k points, ~738ms.  Release mode build with no care taken over other optimisation settings.  (You have a bug: if not other points are closer together than points[0] and points[1], you never set <code>*smallerA</code> and <code>*smallerB</code>).  Avoiding pow in favour of manual multiplication: ~700ms."},{"owner":{"account_id":264156,"reputation":2599,"user_id":550235,"accept_rate":50,"display_name":"Russ Schultz"},"score":2,"creation_date":1446179050,"post_id":33428297,"comment_id":54645929,"body_markdown":"In fiddling with things, that which made the largest difference was changing `sqrt(pow(p1.X - p2.X, 2) + pow(p1.Y - p2.Y, 2))` to `sqrt((p1.X - p2.X)*(p1.X - p2.X) + (p1.Y - p2.Y)*(p1.Y - p2.Y));` made it take 1/10 the time.  (10000 random points, 4500mS down to 322mS)  this is with 2015 community edition","body":"In fiddling with things, that which made the largest difference was changing <code>sqrt(pow(p1.X - p2.X, 2) + pow(p1.Y - p2.Y, 2))</code> to <code>sqrt((p1.X - p2.X)*(p1.X - p2.X) + (p1.Y - p2.Y)*(p1.Y - p2.Y));</code> made it take 1/10 the time.  (10000 random points, 4500mS down to 322mS)  this is with 2015 community edition"},{"owner":{"account_id":1441892,"reputation":13687,"user_id":1361787,"accept_rate":68,"display_name":"ChiefTwoPencils"},"score":0,"creation_date":1446179269,"post_id":33428297,"comment_id":54645978,"body_markdown":"I did a similar test recently with sequential/threaded sorts. Comparing C++ (g++ -O3), VC++(Full opts), and Java. For insertion sorts &lt;= 300k, Java was ~2x faster across all categories of various # threads. About 2x slower with quick sort. Including time to merge threads.","body":"I did a similar test recently with sequential/threaded sorts. Comparing C++ (g++ -O3), VC++(Full opts), and Java. For insertion sorts &lt;= 300k, Java was ~2x faster across all categories of various # threads. About 2x slower with quick sort. Including time to merge threads."},{"owner":{"account_id":12831983,"reputation":882,"user_id":9282847,"display_name":"viraltaco_"},"score":0,"creation_date":1598989417,"post_id":33428297,"comment_id":112632903,"body_markdown":"It&#39;s illegal C. It may compile, it&#39;s all undefined behavior. The speed is just as undefined. \nTry [this](https://godbolt.org/z/1zn4Wb) instead. Should be pretty fast. Far from the fastest. This is keeping the data model you picked, and using managed memory.","body":"It&#39;s illegal C. It may compile, it&#39;s all undefined behavior. The speed is just as undefined.  Try <a href=\"https://godbolt.org/z/1zn4Wb\" rel=\"nofollow noreferrer\">this</a> instead. Should be pretty fast. Far from the fastest. This is keeping the data model you picked, and using managed memory."}],"answers":[{"comments":[{"owner":{"account_id":1637842,"reputation":155176,"user_id":1708801,"accept_rate":30,"display_name":"Shafik Yaghmour"},"score":1,"creation_date":1446197131,"post_id":33429389,"comment_id":54653252,"body_markdown":"Also, note that using `x*x` allows it [to be used in a constexpr](http://stackoverflow.com/a/25170731/1708801) in C++11 which is not true to `cmath` libraries.","body":"Also, note that using <code>x*x</code> allows it <a href=\"http://stackoverflow.com/a/25170731/1708801\">to be used in a constexpr</a> in C++11 which is not true to <code>cmath</code> libraries."}],"tags":[],"owner":{"account_id":268250,"reputation":5373,"user_id":556899,"accept_rate":50,"display_name":"stgatilov"},"comment_count":1,"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1446184135,"creation_date":1446183709,"answer_id":33429389,"question_id":33428297,"body_markdown":"As explained [here][1] and checked [here][2], in pure C there is **no** overload with integer power, like this one:\r\n\r\n    double pow(double base, int exponent );\r\n\r\nIt means that when you call `pow` in C, it is processed in a way similar to:\r\n\r\n    double pow(double base, double exponent) {\r\n        return exp(log(base) * exponent);\r\n    }\r\n\r\nAlso there should be some check for the case of negative base and integer power, which is handled in special way. It is not a good idea to add conditions like `if (exponent == 1.0)` and `if (exponent == 2.0)` here, because it would slow down mathematical code that really uses `pow` for proper purposes. As a result, squaring becomes slower [in twelve times or something like that][3].\r\n\r\nIn principle, the only reasonable way to optimize `pow(x, 2)` to `x * x` is to make compiler recognize such antipatterns and generate special code for them.  It just happened so that your C and C# compilers with your settings are not able to do it, while Java compiler can do it. Note that it has nothing to do with inlining capabilities: just inlining `exp(log(a) * b)` would not make this code any faster.\r\n\r\nAs a conclusion, I&#39;d like to note that no programmer good in writing mathematical code would ever write `pow(x, 2)` in his code.\r\n\r\n  [1]: http://en.cppreference.com/w/c/numeric/math/pow\r\n  [2]: https://stackoverflow.com/a/2940800/556899\r\n  [3]: http://dhruba.name/2012/09/01/performance-pattern-multiplication-is-20x-faster-than-math-pow/","title":"Why is this code so faster in java than in C++ and C#","body":"<p>As explained <a href=\"http://en.cppreference.com/w/c/numeric/math/pow\" rel=\"nofollow noreferrer\">here</a> and checked <a href=\"https://stackoverflow.com/a/2940800/556899\">here</a>, in pure C there is <strong>no</strong> overload with integer power, like this one:</p>\n\n<pre><code>double pow(double base, int exponent );\n</code></pre>\n\n<p>It means that when you call <code>pow</code> in C, it is processed in a way similar to:</p>\n\n<pre><code>double pow(double base, double exponent) {\n    return exp(log(base) * exponent);\n}\n</code></pre>\n\n<p>Also there should be some check for the case of negative base and integer power, which is handled in special way. It is not a good idea to add conditions like <code>if (exponent == 1.0)</code> and <code>if (exponent == 2.0)</code> here, because it would slow down mathematical code that really uses <code>pow</code> for proper purposes. As a result, squaring becomes slower <a href=\"http://dhruba.name/2012/09/01/performance-pattern-multiplication-is-20x-faster-than-math-pow/\" rel=\"nofollow noreferrer\">in twelve times or something like that</a>.</p>\n\n<p>In principle, the only reasonable way to optimize <code>pow(x, 2)</code> to <code>x * x</code> is to make compiler recognize such antipatterns and generate special code for them.  It just happened so that your C and C# compilers with your settings are not able to do it, while Java compiler can do it. Note that it has nothing to do with inlining capabilities: just inlining <code>exp(log(a) * b)</code> would not make this code any faster.</p>\n\n<p>As a conclusion, I'd like to note that no programmer good in writing mathematical code would ever write <code>pow(x, 2)</code> in his code.</p>\n"},{"comments":[{"owner":{"account_id":2618929,"reputation":1215,"user_id":2267418,"accept_rate":58,"display_name":"andre_ss6"},"score":1,"creation_date":1694787266,"post_id":77097538,"comment_id":135941184,"body_markdown":"The C# version uses a struct, and thus it also copies. You’re right about Java, though.","body":"The C# version uses a struct, and thus it also copies. You’re right about Java, though."}],"tags":[],"owner":{"account_id":26355819,"reputation":21,"user_id":20012811,"display_name":"Viktor Engelmann"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694611798,"creation_date":1694611798,"answer_id":77097538,"question_id":33428297,"body_markdown":"Another thing I noticed is that in the C-Version, you have pointers to your &quot;Point&quot; structure. When you do the assignments `*smallerA = points[i];` and `*smallerB = points[j];` you dereference the target.\r\n\r\nI.e. you don&#39;t change a pointer, as you do in the C# and Java codes. You *copy* the whole instance. That&#39;s twice as many move-operations.","title":"Why is this code so faster in java than in C++ and C#","body":"<p>Another thing I noticed is that in the C-Version, you have pointers to your &quot;Point&quot; structure. When you do the assignments <code>*smallerA = points[i];</code> and <code>*smallerB = points[j];</code> you dereference the target.</p>\n<p>I.e. you don't change a pointer, as you do in the C# and Java codes. You <em>copy</em> the whole instance. That's twice as many move-operations.</p>\n"}],"owner":{"account_id":2618929,"reputation":1215,"user_id":2267418,"accept_rate":58,"display_name":"andre_ss6"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1699,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":33429389,"answer_count":2,"score":3,"last_activity_date":1694611798,"creation_date":1446176475,"question_id":33428297,"body_markdown":"I was making a simple homework in which I had to develop a software in C to find the two nearest points between 100 of them. \r\n\r\nWhen I finished, I was curious to see how much time it would take to run it with a lot more points and with full VC++ optimizations enabled. I tried with 10000 and it took about 8~9 seconds. Then I was curious to see how much time C# and Java would take to do the same thing. As expected, C# took a little longer, 9~10 seconds; Java, however, took only ~400 milliseconds! Why does this happen?!\r\n\r\nThis is my code in C, C# and Java:\r\n\r\nC: \r\n\r\n    #include &lt;stdio.h&gt;\r\n    #include &lt;stdlib.h&gt;\r\n    #include &lt;math.h&gt;\r\n    #include &lt;Windows.h&gt;\r\n    \r\n    long perfFrequency = 0;\r\n    \r\n    typedef struct\r\n    {\r\n    \tdouble X;\r\n    \tdouble Y;\r\n    } Point;\r\n    \r\n    double distance(Point p1, Point p2)\r\n    {\r\n    \treturn sqrt(pow(p1.X - p2.X, 2) + pow(p1.Y - p2.Y, 2));\r\n    }\r\n    \r\n    double smallerDistance(Point *points, int size, Point *smallerA, Point  *smallerB)\r\n    {\r\n    \tint i, j;\r\n    \tdouble smaller = distance(points[0], points[1]);\r\n    \r\n    \tfor (i = 0; i &lt; size; i++)\r\n    \t{\r\n    \t\tfor (j = i + 1; j &lt; size; j++)\r\n    \t\t{\r\n    \t\t\tdouble dist = distance(points[i], points[j]);\r\n    \t\t\tif (dist &lt; smaller)\r\n    \t\t\t{\r\n    \t\t\t\tsmaller= dist;\r\n    \t\t\t\t*smallerA = points[i];\r\n    \t\t\t\t*smallerB = points[j];\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \treturn smaller;\r\n    }\r\n    \r\n    void main()\r\n    {\r\n        // read size and points from file.\r\n    \tint size;\r\n    \tPoint *points= (Point *)malloc(size * sizeof(Point));\r\n    \t\r\n        // just to make sure everything is ready before the benchmark begins    \r\n    \tsystem(&quot;pause&quot;);\r\n    \r\n    \tPoint smallerA, smallerB;\r\n    \tif (!QueryPerformanceFrequency((LARGE_INTEGER *)&amp;perfFrequency))\r\n    \t\tprintf(&quot;Couldn&#39;t query performance frequency.&quot;);\r\n    \r\n    \tlong long start, end;\t\r\n    \tdouble smaller;\r\n    \tQueryPerformanceCounter((LARGE_INTEGER *)&amp;start);\r\n    \r\n    \tsmaller= smallerDistance(points, size, &amp;smallerA, &amp;smallerB);\r\n    \t\t\r\n    \tQueryPerformanceCounter((LARGE_INTEGER *)&amp;end);\r\n    \r\n    \tprintf(&quot;The smaller distance is: %lf. The coordinates of the most close points are: (%lf, %lf) and (%lf, %lf). Time taken: %lfms\\n&quot;,\r\n    \t\tsmaller, smallerA.X, smallerA.Y, smallerB.X, smallerB.Y, (end - start) * 1000.0 / perfFrequency);\r\n    \t\r\n    }\r\n\r\nC#:\r\n\r\n    using System;\r\n    using System.IO;\r\n    using System.Collections.Generic;\r\n    using System.Linq;\r\n    using System.Text;\r\n    using System.Threading.Tasks;\r\n    using System.Diagnostics;\r\n    \r\n    namespace StructuredTest\r\n    {\r\n        struct Point\r\n        {\r\n            public double X;\r\n            public double Y;\r\n        }\r\n    \r\n        class Program\r\n        {\r\n            static double Distance(Point p1, Point p2)\r\n            {\r\n                return Math.Sqrt(Math.Pow(p1.X - p2.X, 2) + Math.Pow(p1.Y - p2.Y, 2));\r\n            }\r\n    \r\n            static double SmallerDistance(Point[] points, int size, out Point smallerA, out Point smallerB)\r\n            {\r\n                int i, j;\r\n                double smaller = Distance(points[0], points[1]);\r\n                smallerA = default(Point);\r\n                smallerB = default(Point);\r\n    \r\n                for (i = 0; i &lt; size; i++)\r\n                {\r\n                    for (j = i + 1; j &lt; size; j++)\r\n                    {\r\n                        double dist = Distance(points[i], points[j]);\r\n                        if (dist &lt; smaller)\r\n                        {\r\n                            smaller = dist;\r\n                            smallerA = points[i];\r\n                            smallerB = points[j];\r\n                        }\r\n                    }\r\n                }\r\n    \r\n                return smaller;\r\n            }\r\n    \r\n            static void Main(string[] args)\r\n            {\r\n                // read size and points from file \r\n                int size = int.Parse(file[0]);\r\n                Point[] points= new Point[size];                   \r\n    \r\n                // make sure everything is ready\r\n                Console.WriteLine(&quot;Press any key to continue...&quot;);\r\n                Console.ReadKey(true);\r\n    \r\n                Point smallerA, smallerB;\r\n                double smaller;\r\n    \r\n                Stopwatch sw = new Stopwatch();\r\n                sw.Restart();\r\n    \r\n                smaller = SmallerDistance(points, size, out smallerA, out smallerB);\r\n    \r\n                sw.Stop();\r\n    \r\n                Console.WriteLine($&quot;The smaller distance is: {smaller}. The coordinates of the most close points are: ({smallerA.X}, {smallerA.Y}) and &quot; +\r\n                    $&quot;({smallerB.X}, {smallerB.Y}). Time taken: {sw.ElapsedMilliseconds}ms.&quot;);\r\n    \r\n            }\r\n        }\r\n    }\r\n\r\nJava:\r\n\r\n    package structuredtest;\r\n    \r\n    import java.io.IOException;\r\n    import java.nio.charset.Charset;\r\n    import java.nio.file.Files;\r\n    import java.nio.file.Paths;\r\n    import java.util.List;\r\n    \r\n    class Point {\r\n    \r\n        public Point(double X, double Y) {\r\n            this.X = X;\r\n            this.Y = Y;\r\n        }\r\n    \r\n        double X;\r\n        double Y;\r\n    }\r\n    \r\n    class Result {\r\n    \r\n        double distance;\r\n        Point p1;\r\n        Point p2;\r\n    }\r\n    \r\n    public class StructuredTest {\r\n    \r\n        static double distance(Point p1, Point p2) {\r\n            return Math.sqrt(Math.pow(p1.X - p2.X, 2) + Math.pow(p1.Y - p2.Y, 2));\r\n        }\r\n    \r\n        static Result smallerDistance(Point[] points, int size) {\r\n            int i, j;\r\n            double smaller = distance(points[0], points[1]);\r\n            Result r = new Result();\r\n            \r\n            for (i = 0; i &lt; size; i++) {\r\n                for (j = i + 1; j &lt; size; j++) {\r\n                    double dist = distance(points[i], points[j]);\r\n                    if (dist &lt; smaller) {\r\n                        smaller = dist;\r\n                        r.p1 = points[i];\r\n                        r.p2 = points[j];\r\n                    }\r\n                }\r\n            }\r\n    \r\n            r.distance = smaller;\r\n            return r;\r\n        }\r\n    \r\n        public static void main(String[] args) throws IOException {\r\n            // read size and points from file\r\n            int size = Integer.parseInt(file[0]);\r\n            Point[] points = new Point[size];\r\n\r\n            // make sure everything is ready    \r\n            System.out.println(&quot;Press any key to continue...&quot;);\r\n            System.in.read();\r\n    \r\n            double start = System.nanoTime(), end;\r\n    \r\n            Result r = smallerDistance(points, size);\r\n    \r\n            end = System.nanoTime();\r\n    \r\n            System.out.println(&quot;The smaller distance is: &quot; + r.distance + &quot;. The most close points are: (&quot;\r\n                    + r.p1.X + &quot;,&quot; + r.p1.Y + &quot;) and &quot; + r.p2.X + &quot;,&quot; + r.p2.Y + &quot;). Time taken: &quot; + (end - start) / 1000000 + &quot;ms.&quot;);\r\n    \r\n        }\r\n    \r\n    }\r\n\r\nIf java had beaten both C and C# by a small margin I wouldn&#39;t be surprised, but 20 times faster?!\r\n\r\nThe file is in the following format:\r\n\r\n    3 // number of points in the file. Note that there no comments in the actual file\r\n    (3.7098722472288, 4.49056397953787) // point (X,Y)\r\n    (8.90232811621332, 9.67982769279173)\r\n    (5.68254334818822, 1.71918922506136)\r\n    (6.22585901842366, 9.51660500242835)\r\n\r\nFunny thing: At first, the file with 10000 points that I mentioned earlier, which I was using to benchmark, was actually just a 100 times copy paste of another file with 100 random points. Like this:\r\n\r\n    (Point 1)\r\n    (Point 2)\r\n    (Point 3)\r\n    (Point 1)\r\n    (Point 2)\r\n    (Point 3)\r\n\r\nI thought that there was no need of generating 10000 random points because as the code has to run through all of the numbers anyway, it would make little difference (only more assignments). But then I decided to generate 10000 random points to see how they would react: both C and C# still ran in about the same time (~50ms increase); Java, on the other hand, had a increase of ~500ms.\r\n\r\nAlso, I think it is worth noting that java takes about 11 seconds when running inside NetBeans (even in &quot;Run&quot; mode, not &quot;Debug&quot;).\r\n\r\nAnd I also tried compiling as C++ instead of C, but it made no difference. \r\n\r\nI&#39;m using VS 2015 for both C and C#.\r\n\r\nThese are the settings for each language:\r\n\r\nC:\r\n\r\n    x64\r\n    Optimization: Maximize Speed (/O2)\r\n    Intrinsic Functions: Yes (/Oi)\r\n    Favor Size or Speed: Favor fast code (/Ot)\r\n    Enable Fiber-Safe Optimizations: Yes (/GT)\r\n    Security Check: Disable Security Check (/GS-)\r\n    Floating point model: Fast (/fp:fast)\r\n    Everything else: default\r\n\r\nC#:\r\n\r\n    x64\r\n    Release Mode\r\n    Optimize Code: Enabled\r\n    Check for arithmetic overflow: Disabled\r\n    .NET 4.5.2 \r\n\r\nJava:\r\n\r\n    JRE/JDK 1.8\r\n    Default settings (if there are any)\r\n\r\n#EDIT:\r\n\r\nOkay, I re-did the tests, following the suggestions:\r\n\r\nFirst off, I used the `Result` class/struct in both C and C#. The reason I used it in java but not in C/C# is because java can&#39;t pass by reference. \r\nSecond, I now repeat the test in the main() function.\r\nAnd thanks @Tony D for catching that bug! :)\r\n\r\nI won&#39;t post the code because the changes are minor: simply implement exactly the java version in the other tests, that&#39;s what I did.\r\n\r\nThis time I tested with only 7000 Points (not 10000) and with only 30 iterations, because it is taking a long time to test and its quite late here.\r\n\r\nThe results didn&#39;t change much: C# took 5228ms in average, C 4424ms and Java 223ms. Java still wins by being 20 or more times faster.\r\n\r\nThen I tried removing the calls to Math.Pow (simply changing for `((p1.X - p2.X) * (p1.X - p2.X)) + ((p1.Y - p2.Y) * (p1.Y - p2.Y))`), then everything changed. The new results:\r\n\r\nJava: 220ms average\r\n\r\nC#: 195ms average\r\n\r\nC: 195ms average\r\n\r\nIf I only checked that before :p \r\n\r\nAs I commented, I thought about doing that, but then decided that it would be better to test each compiler&#39;s ability to inline functions and optimize this kind of simple calls. However, when I obtained those strange results, I should&#39;ve gone back and done this, but I got so nervous that I forgot about doing it.\r\n\r\nAnyway, to be really honest, I&#39;m surprised that the Java compiler was able to completely optimize that line of code while C#&#39;s and C++&#39;s weren&#39;t. Although I know about the corner case checks and the internal calls on C#, I find it really interesting that the Java compiler was able to notice that no corner-case checks were necessary in that code whatsoever.","title":"Why is this code so faster in java than in C++ and C#","body":"<p>I was making a simple homework in which I had to develop a software in C to find the two nearest points between 100 of them. </p>\n\n<p>When I finished, I was curious to see how much time it would take to run it with a lot more points and with full VC++ optimizations enabled. I tried with 10000 and it took about 8~9 seconds. Then I was curious to see how much time C# and Java would take to do the same thing. As expected, C# took a little longer, 9~10 seconds; Java, however, took only ~400 milliseconds! Why does this happen?!</p>\n\n<p>This is my code in C, C# and Java:</p>\n\n<p>C: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n#include &lt;Windows.h&gt;\n\nlong perfFrequency = 0;\n\ntypedef struct\n{\n    double X;\n    double Y;\n} Point;\n\ndouble distance(Point p1, Point p2)\n{\n    return sqrt(pow(p1.X - p2.X, 2) + pow(p1.Y - p2.Y, 2));\n}\n\ndouble smallerDistance(Point *points, int size, Point *smallerA, Point  *smallerB)\n{\n    int i, j;\n    double smaller = distance(points[0], points[1]);\n\n    for (i = 0; i &lt; size; i++)\n    {\n        for (j = i + 1; j &lt; size; j++)\n        {\n            double dist = distance(points[i], points[j]);\n            if (dist &lt; smaller)\n            {\n                smaller= dist;\n                *smallerA = points[i];\n                *smallerB = points[j];\n            }\n        }\n    }\n    return smaller;\n}\n\nvoid main()\n{\n    // read size and points from file.\n    int size;\n    Point *points= (Point *)malloc(size * sizeof(Point));\n\n    // just to make sure everything is ready before the benchmark begins    \n    system(\"pause\");\n\n    Point smallerA, smallerB;\n    if (!QueryPerformanceFrequency((LARGE_INTEGER *)&amp;perfFrequency))\n        printf(\"Couldn't query performance frequency.\");\n\n    long long start, end;   \n    double smaller;\n    QueryPerformanceCounter((LARGE_INTEGER *)&amp;start);\n\n    smaller= smallerDistance(points, size, &amp;smallerA, &amp;smallerB);\n\n    QueryPerformanceCounter((LARGE_INTEGER *)&amp;end);\n\n    printf(\"The smaller distance is: %lf. The coordinates of the most close points are: (%lf, %lf) and (%lf, %lf). Time taken: %lfms\\n\",\n        smaller, smallerA.X, smallerA.Y, smallerB.X, smallerB.Y, (end - start) * 1000.0 / perfFrequency);\n\n}\n</code></pre>\n\n<p>C#:</p>\n\n<pre><code>using System;\nusing System.IO;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Text;\nusing System.Threading.Tasks;\nusing System.Diagnostics;\n\nnamespace StructuredTest\n{\n    struct Point\n    {\n        public double X;\n        public double Y;\n    }\n\n    class Program\n    {\n        static double Distance(Point p1, Point p2)\n        {\n            return Math.Sqrt(Math.Pow(p1.X - p2.X, 2) + Math.Pow(p1.Y - p2.Y, 2));\n        }\n\n        static double SmallerDistance(Point[] points, int size, out Point smallerA, out Point smallerB)\n        {\n            int i, j;\n            double smaller = Distance(points[0], points[1]);\n            smallerA = default(Point);\n            smallerB = default(Point);\n\n            for (i = 0; i &lt; size; i++)\n            {\n                for (j = i + 1; j &lt; size; j++)\n                {\n                    double dist = Distance(points[i], points[j]);\n                    if (dist &lt; smaller)\n                    {\n                        smaller = dist;\n                        smallerA = points[i];\n                        smallerB = points[j];\n                    }\n                }\n            }\n\n            return smaller;\n        }\n\n        static void Main(string[] args)\n        {\n            // read size and points from file \n            int size = int.Parse(file[0]);\n            Point[] points= new Point[size];                   \n\n            // make sure everything is ready\n            Console.WriteLine(\"Press any key to continue...\");\n            Console.ReadKey(true);\n\n            Point smallerA, smallerB;\n            double smaller;\n\n            Stopwatch sw = new Stopwatch();\n            sw.Restart();\n\n            smaller = SmallerDistance(points, size, out smallerA, out smallerB);\n\n            sw.Stop();\n\n            Console.WriteLine($\"The smaller distance is: {smaller}. The coordinates of the most close points are: ({smallerA.X}, {smallerA.Y}) and \" +\n                $\"({smallerB.X}, {smallerB.Y}). Time taken: {sw.ElapsedMilliseconds}ms.\");\n\n        }\n    }\n}\n</code></pre>\n\n<p>Java:</p>\n\n<pre><code>package structuredtest;\n\nimport java.io.IOException;\nimport java.nio.charset.Charset;\nimport java.nio.file.Files;\nimport java.nio.file.Paths;\nimport java.util.List;\n\nclass Point {\n\n    public Point(double X, double Y) {\n        this.X = X;\n        this.Y = Y;\n    }\n\n    double X;\n    double Y;\n}\n\nclass Result {\n\n    double distance;\n    Point p1;\n    Point p2;\n}\n\npublic class StructuredTest {\n\n    static double distance(Point p1, Point p2) {\n        return Math.sqrt(Math.pow(p1.X - p2.X, 2) + Math.pow(p1.Y - p2.Y, 2));\n    }\n\n    static Result smallerDistance(Point[] points, int size) {\n        int i, j;\n        double smaller = distance(points[0], points[1]);\n        Result r = new Result();\n\n        for (i = 0; i &lt; size; i++) {\n            for (j = i + 1; j &lt; size; j++) {\n                double dist = distance(points[i], points[j]);\n                if (dist &lt; smaller) {\n                    smaller = dist;\n                    r.p1 = points[i];\n                    r.p2 = points[j];\n                }\n            }\n        }\n\n        r.distance = smaller;\n        return r;\n    }\n\n    public static void main(String[] args) throws IOException {\n        // read size and points from file\n        int size = Integer.parseInt(file[0]);\n        Point[] points = new Point[size];\n\n        // make sure everything is ready    \n        System.out.println(\"Press any key to continue...\");\n        System.in.read();\n\n        double start = System.nanoTime(), end;\n\n        Result r = smallerDistance(points, size);\n\n        end = System.nanoTime();\n\n        System.out.println(\"The smaller distance is: \" + r.distance + \". The most close points are: (\"\n                + r.p1.X + \",\" + r.p1.Y + \") and \" + r.p2.X + \",\" + r.p2.Y + \"). Time taken: \" + (end - start) / 1000000 + \"ms.\");\n\n    }\n\n}\n</code></pre>\n\n<p>If java had beaten both C and C# by a small margin I wouldn't be surprised, but 20 times faster?!</p>\n\n<p>The file is in the following format:</p>\n\n<pre><code>3 // number of points in the file. Note that there no comments in the actual file\n(3.7098722472288, 4.49056397953787) // point (X,Y)\n(8.90232811621332, 9.67982769279173)\n(5.68254334818822, 1.71918922506136)\n(6.22585901842366, 9.51660500242835)\n</code></pre>\n\n<p>Funny thing: At first, the file with 10000 points that I mentioned earlier, which I was using to benchmark, was actually just a 100 times copy paste of another file with 100 random points. Like this:</p>\n\n<pre><code>(Point 1)\n(Point 2)\n(Point 3)\n(Point 1)\n(Point 2)\n(Point 3)\n</code></pre>\n\n<p>I thought that there was no need of generating 10000 random points because as the code has to run through all of the numbers anyway, it would make little difference (only more assignments). But then I decided to generate 10000 random points to see how they would react: both C and C# still ran in about the same time (~50ms increase); Java, on the other hand, had a increase of ~500ms.</p>\n\n<p>Also, I think it is worth noting that java takes about 11 seconds when running inside NetBeans (even in \"Run\" mode, not \"Debug\").</p>\n\n<p>And I also tried compiling as C++ instead of C, but it made no difference. </p>\n\n<p>I'm using VS 2015 for both C and C#.</p>\n\n<p>These are the settings for each language:</p>\n\n<p>C:</p>\n\n<pre><code>x64\nOptimization: Maximize Speed (/O2)\nIntrinsic Functions: Yes (/Oi)\nFavor Size or Speed: Favor fast code (/Ot)\nEnable Fiber-Safe Optimizations: Yes (/GT)\nSecurity Check: Disable Security Check (/GS-)\nFloating point model: Fast (/fp:fast)\nEverything else: default\n</code></pre>\n\n<p>C#:</p>\n\n<pre><code>x64\nRelease Mode\nOptimize Code: Enabled\nCheck for arithmetic overflow: Disabled\n.NET 4.5.2 \n</code></pre>\n\n<p>Java:</p>\n\n<pre><code>JRE/JDK 1.8\nDefault settings (if there are any)\n</code></pre>\n\n<h1>EDIT:</h1>\n\n<p>Okay, I re-did the tests, following the suggestions:</p>\n\n<p>First off, I used the <code>Result</code> class/struct in both C and C#. The reason I used it in java but not in C/C# is because java can't pass by reference. \nSecond, I now repeat the test in the main() function.\nAnd thanks @Tony D for catching that bug! :)</p>\n\n<p>I won't post the code because the changes are minor: simply implement exactly the java version in the other tests, that's what I did.</p>\n\n<p>This time I tested with only 7000 Points (not 10000) and with only 30 iterations, because it is taking a long time to test and its quite late here.</p>\n\n<p>The results didn't change much: C# took 5228ms in average, C 4424ms and Java 223ms. Java still wins by being 20 or more times faster.</p>\n\n<p>Then I tried removing the calls to Math.Pow (simply changing for <code>((p1.X - p2.X) * (p1.X - p2.X)) + ((p1.Y - p2.Y) * (p1.Y - p2.Y))</code>), then everything changed. The new results:</p>\n\n<p>Java: 220ms average</p>\n\n<p>C#: 195ms average</p>\n\n<p>C: 195ms average</p>\n\n<p>If I only checked that before :p </p>\n\n<p>As I commented, I thought about doing that, but then decided that it would be better to test each compiler's ability to inline functions and optimize this kind of simple calls. However, when I obtained those strange results, I should've gone back and done this, but I got so nervous that I forgot about doing it.</p>\n\n<p>Anyway, to be really honest, I'm surprised that the Java compiler was able to completely optimize that line of code while C#'s and C++'s weren't. Although I know about the corner case checks and the internal calls on C#, I find it really interesting that the Java compiler was able to notice that no corner-case checks were necessary in that code whatsoever.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9947,"page":187,"page_size":100}
