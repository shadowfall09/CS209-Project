{"items":[{"tags":["java","jaxb"],"answers":[{"tags":[],"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695664290,"creation_date":1695664290,"answer_id":77174778,"question_id":77174579,"body_markdown":"Your `Processor` is expecting a list of elements, but your xml provide a `&lt;cats&gt;` tag. In my oppinion the best solution is to **deal with `&lt;cats&gt;` as an *Object***.\r\n\r\nFirst, create the object that represents `&lt;cats&gt;`:\r\n```java\r\n@XmlRootElement(name = &quot;cats&quot;)\r\npublic class CatList {\r\n\r\n\t@XmlElement(name = &quot;cat&quot;)\r\n\tprivate List&lt;CatXML&gt; cats;\r\n\r\n\tpublic List&lt;CatXML&gt; getCats() {\r\n\t\treturn cats;\r\n\t}\r\n}\r\n```\r\n\r\nThen, change your `Processor` to deal with an *Object* instead of a `List`:\r\n```java\r\npublic class Processor {\r\n\tpublic &lt;T&gt; T xmlToObject(String xml, Class&lt;T&gt; clazz) throws JAXBException {\r\n\t\tJAXBContext context = JAXBContext.newInstance(clazz);\r\n\t\tUnmarshaller unmarshaller = context.createUnmarshaller();\r\n\t\tStringReader reader = new StringReader(xml);\r\n\t\treturn (T) unmarshaller.unmarshal(reader);\r\n\t}\r\n}\r\n```\r\n\r\nFinally, change your main method:\r\n```java\r\nString xml = &quot;&lt;cats&gt;&lt;cat&gt;&lt;name&gt;Ms. Piggy&lt;/name&gt;&lt;city&gt;Londen&lt;/city&gt;&lt;/cat&gt;&lt;cat&gt;&lt;name&gt;Ms. Jerry&lt;/name&gt;&lt;city&gt;Londen&lt;/city&gt;&lt;/cat&gt;&lt;/cats&gt;&quot;;\r\nProcessor pr = new Processor();\r\n\r\n// Use CatList.class instead of CatXML.class\r\nList&lt;CatXML&gt; cats = pr.xmlToObject(xml, CatList.class).getCats();\r\n```\r\n\r\nNow if you run:\r\n```java\r\ncats.forEach(cat -&gt; System.out.printf(&quot;Name: %s - City: %s\\n&quot;, cat.getName(), cat.getCity()));\r\n```\r\n\r\nYou get:\r\n```\r\nName: Ms. Piggy - City: Londen\r\nName: Ms. Jerry - City: Londen\r\n```","title":"How to unmarshal list of XML elements using Generics","body":"<p>Your <code>Processor</code> is expecting a list of elements, but your xml provide a <code>&lt;cats&gt;</code> tag. In my oppinion the best solution is to <strong>deal with <code>&lt;cats&gt;</code> as an <em>Object</em></strong>.</p>\n<p>First, create the object that represents <code>&lt;cats&gt;</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@XmlRootElement(name = &quot;cats&quot;)\npublic class CatList {\n\n    @XmlElement(name = &quot;cat&quot;)\n    private List&lt;CatXML&gt; cats;\n\n    public List&lt;CatXML&gt; getCats() {\n        return cats;\n    }\n}\n</code></pre>\n<p>Then, change your <code>Processor</code> to deal with an <em>Object</em> instead of a <code>List</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Processor {\n    public &lt;T&gt; T xmlToObject(String xml, Class&lt;T&gt; clazz) throws JAXBException {\n        JAXBContext context = JAXBContext.newInstance(clazz);\n        Unmarshaller unmarshaller = context.createUnmarshaller();\n        StringReader reader = new StringReader(xml);\n        return (T) unmarshaller.unmarshal(reader);\n    }\n}\n</code></pre>\n<p>Finally, change your main method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String xml = &quot;&lt;cats&gt;&lt;cat&gt;&lt;name&gt;Ms. Piggy&lt;/name&gt;&lt;city&gt;Londen&lt;/city&gt;&lt;/cat&gt;&lt;cat&gt;&lt;name&gt;Ms. Jerry&lt;/name&gt;&lt;city&gt;Londen&lt;/city&gt;&lt;/cat&gt;&lt;/cats&gt;&quot;;\nProcessor pr = new Processor();\n\n// Use CatList.class instead of CatXML.class\nList&lt;CatXML&gt; cats = pr.xmlToObject(xml, CatList.class).getCats();\n</code></pre>\n<p>Now if you run:</p>\n<pre class=\"lang-java prettyprint-override\"><code>cats.forEach(cat -&gt; System.out.printf(&quot;Name: %s - City: %s\\n&quot;, cat.getName(), cat.getCity()));\n</code></pre>\n<p>You get:</p>\n<pre><code>Name: Ms. Piggy - City: Londen\nName: Ms. Jerry - City: Londen\n</code></pre>\n"}],"owner":{"account_id":12377973,"reputation":242,"user_id":10053673,"display_name":"user10053673"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77174778,"answer_count":1,"score":1,"last_activity_date":1695664290,"creation_date":1695661956,"question_id":77174579,"body_markdown":"Does anyone know how to unmarshal a list of XML elements using Generics? This doesn&#39;t seem to work ...\r\n\r\n    xml = &quot;&lt;cats&gt;&lt;cat&gt;&lt;name&gt;Ms. Piggy&lt;/name&gt;&lt;city&gt;Londen&lt;/city&gt;&lt;/cat&gt;&lt;cat&gt;&lt;name&gt;Ms. Jerry&lt;/name&gt;&lt;city&gt;Londen&lt;/city&gt;&lt;/cat&gt;&lt;/cats&gt;&quot;;\r\n\r\n    Processor pr = new Processor();\r\n    List&lt;CatXML&gt; cats = pr.xmlToObjectList( xml, CatXML.class);\r\n\r\n\r\n Processor class:\r\n\r\n\r\n    public class Processor {\r\n        public &lt;T&gt; List&lt;T&gt; xmlToObjectList(String xmlContainsObject, Class&lt;T&gt; objectType) {\r\n\r\n            try {\r\n                JAXBContext context = JAXBContext.newInstance(objectType);\r\n                Unmarshaller unmarshaller = context.createUnmarshaller();\r\n                StringReader reader = new StringReader(xmlContainsObject);\r\n                return (List&lt;T&gt;) unmarshaller.unmarshal(reader);\r\n            } catch (Exception e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\nCat class:\r\n\r\n    @XmlRootElement(name = &quot;cat&quot;)\r\n    @XmlAccessorType(XmlAccessType.FIELD)\r\n    public class CatXML implements Serializable {\r\n\r\n        private String name = &quot;&quot;;\r\n        private String city = &quot;&quot;;\r\n\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public String getCity() {\r\n        return city;\r\n    }\r\n\r\n    public void setCity(String city) {\r\n        this.city = city;\r\n    }\r\n    }\r\n\r\nI got an error:\r\n\r\nException in thread &quot;main&quot; java.lang.RuntimeException: jakarta.xml.bind.UnmarshalException: unexpected element (uri:&quot;&quot;, local:&quot;cats&quot;). Expected elements are &lt;{}cat&gt;\r\n\tat org.example.Processor.xmlToObjectList(Processor.java:90)\r\n\tat org.example.Main.main(Main.java:36)\r\nCaused by: jakarta.xml.bind.UnmarshalException: unexpected element (uri:&quot;&quot;, local:&quot;cats&quot;). Expected elements are &lt;{}cat&gt;\r\n\tat org.glassfish.jaxb.runtime.v2.runtime.unmarshaller.UnmarshallingContext.handleEvent(UnmarshallingContext.java:701)\r\n","title":"How to unmarshal list of XML elements using Generics","body":"<p>Does anyone know how to unmarshal a list of XML elements using Generics? This doesn't seem to work ...</p>\n<pre><code>xml = &quot;&lt;cats&gt;&lt;cat&gt;&lt;name&gt;Ms. Piggy&lt;/name&gt;&lt;city&gt;Londen&lt;/city&gt;&lt;/cat&gt;&lt;cat&gt;&lt;name&gt;Ms. Jerry&lt;/name&gt;&lt;city&gt;Londen&lt;/city&gt;&lt;/cat&gt;&lt;/cats&gt;&quot;;\n\nProcessor pr = new Processor();\nList&lt;CatXML&gt; cats = pr.xmlToObjectList( xml, CatXML.class);\n</code></pre>\n<p>Processor class:</p>\n<pre><code>public class Processor {\n    public &lt;T&gt; List&lt;T&gt; xmlToObjectList(String xmlContainsObject, Class&lt;T&gt; objectType) {\n\n        try {\n            JAXBContext context = JAXBContext.newInstance(objectType);\n            Unmarshaller unmarshaller = context.createUnmarshaller();\n            StringReader reader = new StringReader(xmlContainsObject);\n            return (List&lt;T&gt;) unmarshaller.unmarshal(reader);\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n}\n</code></pre>\n<p>Cat class:</p>\n<pre><code>@XmlRootElement(name = &quot;cat&quot;)\n@XmlAccessorType(XmlAccessType.FIELD)\npublic class CatXML implements Serializable {\n\n    private String name = &quot;&quot;;\n    private String city = &quot;&quot;;\n\n\npublic String getName() {\n    return name;\n}\n\npublic void setName(String name) {\n    this.name = name;\n}\n\npublic String getCity() {\n    return city;\n}\n\npublic void setCity(String city) {\n    this.city = city;\n}\n}\n</code></pre>\n<p>I got an error:</p>\n<p>Exception in thread &quot;main&quot; java.lang.RuntimeException: jakarta.xml.bind.UnmarshalException: unexpected element (uri:&quot;&quot;, local:&quot;cats&quot;). Expected elements are &lt;{}cat&gt;\nat org.example.Processor.xmlToObjectList(Processor.java:90)\nat org.example.Main.main(Main.java:36)\nCaused by: jakarta.xml.bind.UnmarshalException: unexpected element (uri:&quot;&quot;, local:&quot;cats&quot;). Expected elements are &lt;{}cat&gt;\nat org.glassfish.jaxb.runtime.v2.runtime.unmarshaller.UnmarshallingContext.handleEvent(UnmarshallingContext.java:701)</p>\n"},{"tags":["java","generator","openapi"],"answers":[{"comments":[{"owner":{"account_id":10507668,"reputation":367,"user_id":7744348,"accept_rate":86,"display_name":"StopTheRain"},"score":0,"creation_date":1614864749,"post_id":66475243,"comment_id":117519283,"body_markdown":"Unfortunately, that also doesn&#39;t work:\n`public Response somethingPost(@ApiParam(value = &quot;&quot; ,required=true) @NotNull @Valid SomethingRequest somethingRequest, , allowableValues=&quot;en, de&quot; @DefaultValue(&quot;en&quot;) @QueryParam(&quot;language&quot;) String language,@Context SecurityContext securityContext);`\nas you can see, there&#39;s that double comma again","body":"Unfortunately, that also doesn&#39;t work: <code>public Response somethingPost(@ApiParam(value = &quot;&quot; ,required=true) @NotNull @Valid SomethingRequest somethingRequest, , allowableValues=&quot;en, de&quot; @DefaultValue(&quot;en&quot;) @QueryParam(&quot;language&quot;) String language,@Context SecurityContext securityContext);</code> as you can see, there&#39;s that double comma again"},{"owner":{"account_id":4982414,"reputation":1977,"user_id":4006969,"accept_rate":60,"display_name":"Pratiyush Kumar Singh"},"score":0,"creation_date":1614869181,"post_id":66475243,"comment_id":117521723,"body_markdown":"@StopTheRain It generated fine for me. May be need to have close look into the maven configuration. Could you update question with minimal POM details like dependencies you are using.","body":"@StopTheRain It generated fine for me. May be need to have close look into the maven configuration. Could you update question with minimal POM details like dependencies you are using."},{"owner":{"account_id":10507668,"reputation":367,"user_id":7744348,"accept_rate":86,"display_name":"StopTheRain"},"score":0,"creation_date":1614947570,"post_id":66475243,"comment_id":117547548,"body_markdown":"I updated the question with all the dependencies I have. The only other thing defined in the POM is the plugin I provided. Could you please send me your plugin configuration?","body":"I updated the question with all the dependencies I have. The only other thing defined in the POM is the plugin I provided. Could you please send me your plugin configuration?"}],"tags":[],"owner":{"account_id":4982414,"reputation":1977,"user_id":4006969,"accept_rate":60,"display_name":"Pratiyush Kumar Singh"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1614861641,"creation_date":1614861641,"answer_id":66475243,"question_id":66470627,"body_markdown":"Try out with below demo yaml.\r\n\r\nEnums should be defined as enum: [en, de].\r\n\r\n\r\n    openapi: 3.0.2\r\n    info: {title: Demo Info., description: Demo Description., version: 1.0.0}\r\n    servers:\r\n    - {url: &#39;https://something.com&#39;, description: Demo Description.}\r\n    paths:\r\n      /something:\r\n        post:\r\n          tags: [Something]\r\n          requestBody:\r\n            required: true\r\n            content:\r\n              application/json:\r\n                schema: {$ref: &#39;#/components/schemas/SomethingRequest&#39;}\r\n          parameters:\r\n          - {$ref: &#39;#/components/parameters/language&#39;}\r\n          responses:\r\n            200:\r\n              description: OK\r\n              content:\r\n                application/json:\r\n                  schema: {$ref: &#39;#/components/schemas/SomethingResponse&#39;}\r\n    components:\r\n      parameters:\r\n        language:\r\n          name: language\r\n          schema:\r\n            type: string\r\n            enum: [en, de]\r\n            default: en\r\n          in: query\r\n      schemas:\r\n        SomethingRequest:\r\n          properties:\r\n            demo: {type: string}\r\n        SomethingResponse:\r\n          properties:\r\n            demo: {type: string}","title":"Openapi generator cannot generate query param with enum","body":"<p>Try out with below demo yaml.</p>\n<p>Enums should be defined as enum: [en, de].</p>\n<pre><code>openapi: 3.0.2\ninfo: {title: Demo Info., description: Demo Description., version: 1.0.0}\nservers:\n- {url: 'https://something.com', description: Demo Description.}\npaths:\n  /something:\n    post:\n      tags: [Something]\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema: {$ref: '#/components/schemas/SomethingRequest'}\n      parameters:\n      - {$ref: '#/components/parameters/language'}\n      responses:\n        200:\n          description: OK\n          content:\n            application/json:\n              schema: {$ref: '#/components/schemas/SomethingResponse'}\ncomponents:\n  parameters:\n    language:\n      name: language\n      schema:\n        type: string\n        enum: [en, de]\n        default: en\n      in: query\n  schemas:\n    SomethingRequest:\n      properties:\n        demo: {type: string}\n    SomethingResponse:\n      properties:\n        demo: {type: string}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2312621,"reputation":177,"user_id":2030411,"display_name":"johnlon"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1643771460,"creation_date":1643771460,"answer_id":70950117,"question_id":66470627,"body_markdown":"Multiple long standing enum bugs exist in the generators (for all languages as far as I can tell).\r\n\r\nFor example https://github.com/OpenAPITools/openapi-generator/issues/4300\r\n\r\nBut also .. https://github.com/OpenAPITools/openapi-generator/issues/2645\r\n","title":"Openapi generator cannot generate query param with enum","body":"<p>Multiple long standing enum bugs exist in the generators (for all languages as far as I can tell).</p>\n<p>For example <a href=\"https://github.com/OpenAPITools/openapi-generator/issues/4300\" rel=\"nofollow noreferrer\">https://github.com/OpenAPITools/openapi-generator/issues/4300</a></p>\n<p>But also .. <a href=\"https://github.com/OpenAPITools/openapi-generator/issues/2645\" rel=\"nofollow noreferrer\">https://github.com/OpenAPITools/openapi-generator/issues/2645</a></p>\n"},{"tags":[],"owner":{"account_id":11584010,"reputation":465,"user_id":8486854,"display_name":"SinunHenkka"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655376661,"creation_date":1655375326,"answer_id":72644390,"question_id":66470627,"body_markdown":"It depends what generator you are using but jaxrs-resteasy-eap is broken when using enums in query parameters.\r\n\r\nI think [this][1] commit is causing the problem.\r\n\r\nAs a temporary fix in my project I edited the queryParams.mustache template file to as this:\r\n\r\n    {{#isQueryParam}}{{#useBeanValidation}}{{&gt;beanValidationQueryParams}}{{/useBeanValidation}}{{^isContainer}}{{#allowableValues}}@ApiParam(value = &quot;{{{description}}}&quot;{{#required}},required=true{{/required}}, {{&gt; allowableValues }}){{/allowableValues}}{{#defaultValue}} @DefaultValue(&quot;{{{.}}}&quot;){{/defaultValue}}{{/isContainer}} @QueryParam(&quot;{{baseName}}&quot;) {{{dataType}}} {{paramName}}{{/isQueryParam}}\r\n\r\nJust noticed that there are also [github issue][2] of this. The recommendation of removing the allowableValues from queryParams.mustache might be the correct way to go:\r\n\r\n    {{#isQueryParam}}{{#useBeanValidation}}{{&gt;beanValidationQueryParams}}{{/useBeanValidation}}{{^isContainer}}{{#defaultValue}} @DefaultValue(&quot;{{{.}}}&quot;){{/defaultValue}}{{/isContainer}} @QueryParam(&quot;{{baseName}}&quot;) {{{dataType}}} {{paramName}}{{/isQueryParam}}\r\n\r\nIt depends how you are using the generator how to use own templates.\r\n\r\nI am using it from npm @openapitools/openapi-generator-cli\r\nThere you can apply your own templates by adding -t/--template-dir &lt;template folder&gt; option into your generate command. Here is mine as example:\r\n\r\n    npx @openapitools/openapi-generator-cli generate -t=templates/jaxrs -i openapi.yaml -o generated/jaxrs -g jaxrs-resteasy-eap -c config-jaxrs.yaml\r\n\r\nI just copied my modified queryParams.mustache to root of templates/jaxrs and the generated api functions did not have double comma syntax problems anymore:\r\n\r\n    public Response getPets( @ApiParam(value = &quot;My param description&quot;, allowableValues=&quot;AA, BB, CC&quot;) @QueryParam(&quot;petType&quot;) PetType petType,@Context SecurityContext securityContext);\r\n\r\nI haven&#39;t used these files yet, so I don&#39;t know if everything is correct, but atleast the syntax is correct now.\r\n\r\nMore info here: [templating documentation][3]\r\n\r\n\r\n  [1]: https://github.com/OpenAPITools/openapi-generator/commit/5e92ec1b4c3743026ade9a55bf9345f894877f15#diff-1b2fac13dd3086346026a61b6c76dbe6af49c8f70de616c7cbe92bfe7a83289e\r\n  [2]: https://github.com/OpenAPITools/openapi-generator/issues/4376\r\n  [3]: https://openapi-generator.tech/docs/templating","title":"Openapi generator cannot generate query param with enum","body":"<p>It depends what generator you are using but jaxrs-resteasy-eap is broken when using enums in query parameters.</p>\n<p>I think <a href=\"https://github.com/OpenAPITools/openapi-generator/commit/5e92ec1b4c3743026ade9a55bf9345f894877f15#diff-1b2fac13dd3086346026a61b6c76dbe6af49c8f70de616c7cbe92bfe7a83289e\" rel=\"nofollow noreferrer\">this</a> commit is causing the problem.</p>\n<p>As a temporary fix in my project I edited the queryParams.mustache template file to as this:</p>\n<pre><code>{{#isQueryParam}}{{#useBeanValidation}}{{&gt;beanValidationQueryParams}}{{/useBeanValidation}}{{^isContainer}}{{#allowableValues}}@ApiParam(value = &quot;{{{description}}}&quot;{{#required}},required=true{{/required}}, {{&gt; allowableValues }}){{/allowableValues}}{{#defaultValue}} @DefaultValue(&quot;{{{.}}}&quot;){{/defaultValue}}{{/isContainer}} @QueryParam(&quot;{{baseName}}&quot;) {{{dataType}}} {{paramName}}{{/isQueryParam}}\n</code></pre>\n<p>Just noticed that there are also <a href=\"https://github.com/OpenAPITools/openapi-generator/issues/4376\" rel=\"nofollow noreferrer\">github issue</a> of this. The recommendation of removing the allowableValues from queryParams.mustache might be the correct way to go:</p>\n<pre><code>{{#isQueryParam}}{{#useBeanValidation}}{{&gt;beanValidationQueryParams}}{{/useBeanValidation}}{{^isContainer}}{{#defaultValue}} @DefaultValue(&quot;{{{.}}}&quot;){{/defaultValue}}{{/isContainer}} @QueryParam(&quot;{{baseName}}&quot;) {{{dataType}}} {{paramName}}{{/isQueryParam}}\n</code></pre>\n<p>It depends how you are using the generator how to use own templates.</p>\n<p>I am using it from npm @openapitools/openapi-generator-cli\nThere you can apply your own templates by adding -t/--template-dir  option into your generate command. Here is mine as example:</p>\n<pre><code>npx @openapitools/openapi-generator-cli generate -t=templates/jaxrs -i openapi.yaml -o generated/jaxrs -g jaxrs-resteasy-eap -c config-jaxrs.yaml\n</code></pre>\n<p>I just copied my modified queryParams.mustache to root of templates/jaxrs and the generated api functions did not have double comma syntax problems anymore:</p>\n<pre><code>public Response getPets( @ApiParam(value = &quot;My param description&quot;, allowableValues=&quot;AA, BB, CC&quot;) @QueryParam(&quot;petType&quot;) PetType petType,@Context SecurityContext securityContext);\n</code></pre>\n<p>I haven't used these files yet, so I don't know if everything is correct, but atleast the syntax is correct now.</p>\n<p>More info here: <a href=\"https://openapi-generator.tech/docs/templating\" rel=\"nofollow noreferrer\">templating documentation</a></p>\n"},{"comments":[{"owner":{"account_id":3405149,"reputation":454,"user_id":2856415,"accept_rate":45,"display_name":"Kovo"},"score":0,"creation_date":1695711221,"post_id":77174766,"comment_id":136057071,"body_markdown":"Just adding note, this file looks like openAPI v3 schema, I tried simmilar approach with swagger v2 schema but no luck.\nAnd yes, this finally works for me, now just find a way why YAML/JSON generator cannot add enums as referenced objects first","body":"Just adding note, this file looks like openAPI v3 schema, I tried simmilar approach with swagger v2 schema but no luck. And yes, this finally works for me, now just find a way why YAML/JSON generator cannot add enums as referenced objects first"}],"tags":[],"owner":{"account_id":8734251,"reputation":106,"user_id":6533388,"display_name":"Thorsten Hilker"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695664187,"creation_date":1695664187,"answer_id":77174766,"question_id":66470627,"body_markdown":"This works for me:\r\n```\r\n...\r\npaths:\r\n...\r\n        - name: semesterType\r\n          in: query\r\n          required: true\r\n          schema:\r\n            $ref: &#39;#/components/schemas/SemesterType&#39;\r\n...\r\ncomponents:\r\n  schemas:\r\n    SemesterType:\r\n      type: string\r\n      enum:\r\n        - SOMMERSEMESTER\r\n        - WINTERSEMESTER\r\n```","title":"Openapi generator cannot generate query param with enum","body":"<p>This works for me:</p>\n<pre><code>...\npaths:\n...\n        - name: semesterType\n          in: query\n          required: true\n          schema:\n            $ref: '#/components/schemas/SemesterType'\n...\ncomponents:\n  schemas:\n    SemesterType:\n      type: string\n      enum:\n        - SOMMERSEMESTER\n        - WINTERSEMESTER\n</code></pre>\n"}],"owner":{"account_id":10507668,"reputation":367,"user_id":7744348,"accept_rate":86,"display_name":"StopTheRain"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9581,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":4,"score":5,"last_activity_date":1695664187,"creation_date":1614844098,"question_id":66470627,"body_markdown":"I&#39;m trying to generate a service that has enum as query parameter, but it keeps generating it wrong.\r\nHere&#39;s the part of yaml:\r\n```    language:\r\n      name: language\r\n      in: query\r\n      description: language\r\n      schema:\r\n        type: string\r\n        enum:\r\n        - en\r\n        - de\r\n```\r\n\r\nand I&#39;m using it in parameters:\r\n```      parameters:\r\n        - $ref: &#39;#/components/parameters/language&#39;\r\n```\r\n\r\nThe error that I get is:\r\n```\r\n[ERROR] .../api/TestApi.java:[110,65] illegal start of type\r\n[ERROR] .../api/TestApi.java:[110,66] &#39;)&#39; expected\r\n[ERROR] .../api/TestApi.java:[110,82] &#39;;&#39; expected\r\n```\r\n\r\nHere&#39;s what the code looks like:\r\n\r\n```\r\npublic Response getByLanguage( @PathParam(&quot;id&quot;) Long id, , allowableValues=&quot;en, de&quot; @QueryParam(&quot;language&quot;) String language\r\n```\r\n\r\nAnd here&#39;s my plugin:\r\n```\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.openapitools&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;openapi-generator-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;5.0.1&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;inputSpec&gt;${basedir}/src/main/resources/openapi.yaml&lt;/inputSpec&gt;\r\n                        &lt;output&gt;${project.build.directory}/generated-sources/java&lt;/output&gt;\r\n                        &lt;generatorName&gt;jaxrs-resteasy-eap&lt;/generatorName&gt;\r\n                        &lt;modelPackage&gt;com.openapi.example.model&lt;/modelPackage&gt;\r\n                        &lt;apiPackage&gt;com.openapi.example.api&lt;/apiPackage&gt;\r\n                        &lt;generateSupportingFiles&gt;false&lt;/generateSupportingFiles&gt;\r\n                        &lt;configOptions&gt;\r\n                            &lt;sourceFolder&gt;openapi&lt;/sourceFolder&gt;\r\n                            &lt;dateLibrary&gt;java8&lt;/dateLibrary&gt;\r\n                            &lt;interfaceOnly&gt;true&lt;/interfaceOnly&gt;\r\n                            &lt;java8&gt;true&lt;/java8&gt;\r\n                            &lt;serializableModel&gt;true&lt;/serializableModel&gt;\r\n                            &lt;useTags&gt;true&lt;/useTags&gt;\r\n                            &lt;performBeanValidation&gt;true&lt;/performBeanValidation&gt;\r\n                            &lt;useBeanValidation&gt;true&lt;/useBeanValidation&gt;\r\n                        &lt;/configOptions&gt;\r\n                    &lt;/configuration&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;phase&gt;generate-resources&lt;/phase&gt;\r\n                            &lt;id&gt;generate&lt;/id&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;generate&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n```\r\n\r\nThe only way I&#39;ve managed to get it to work is to make it as an array of enum values, but that&#39;s not what I need here.\r\n\r\nEDIT:\r\ndependencies I have defined in the project:\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.maven.shared&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-dependency-analyzer&lt;/artifactId&gt;\r\n            &lt;version&gt;1.11.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.swagger&lt;/groupId&gt;\r\n            &lt;artifactId&gt;swagger-jaxrs&lt;/artifactId&gt;\r\n            &lt;version&gt;1.5.8&lt;/version&gt;\r\n            &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.swagger.core.v3&lt;/groupId&gt;\r\n            &lt;artifactId&gt;swagger-annotations&lt;/artifactId&gt;\r\n            &lt;version&gt;2.1.5&lt;/version&gt;\r\n            &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\r\n            &lt;version&gt;2.11.3&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```","title":"Openapi generator cannot generate query param with enum","body":"<p>I'm trying to generate a service that has enum as query parameter, but it keeps generating it wrong.\nHere's the part of yaml:</p>\n<pre><code>      name: language\n      in: query\n      description: language\n      schema:\n        type: string\n        enum:\n        - en\n        - de\n</code></pre>\n<p>and I'm using it in parameters:</p>\n<pre><code>        - $ref: '#/components/parameters/language'\n</code></pre>\n<p>The error that I get is:</p>\n<pre><code>[ERROR] .../api/TestApi.java:[110,65] illegal start of type\n[ERROR] .../api/TestApi.java:[110,66] ')' expected\n[ERROR] .../api/TestApi.java:[110,82] ';' expected\n</code></pre>\n<p>Here's what the code looks like:</p>\n<pre><code>public Response getByLanguage( @PathParam(&quot;id&quot;) Long id, , allowableValues=&quot;en, de&quot; @QueryParam(&quot;language&quot;) String language\n</code></pre>\n<p>And here's my plugin:</p>\n<pre><code>                &lt;plugin&gt;\n                    &lt;groupId&gt;org.openapitools&lt;/groupId&gt;\n                    &lt;artifactId&gt;openapi-generator-maven-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;5.0.1&lt;/version&gt;\n                    &lt;configuration&gt;\n                        &lt;inputSpec&gt;${basedir}/src/main/resources/openapi.yaml&lt;/inputSpec&gt;\n                        &lt;output&gt;${project.build.directory}/generated-sources/java&lt;/output&gt;\n                        &lt;generatorName&gt;jaxrs-resteasy-eap&lt;/generatorName&gt;\n                        &lt;modelPackage&gt;com.openapi.example.model&lt;/modelPackage&gt;\n                        &lt;apiPackage&gt;com.openapi.example.api&lt;/apiPackage&gt;\n                        &lt;generateSupportingFiles&gt;false&lt;/generateSupportingFiles&gt;\n                        &lt;configOptions&gt;\n                            &lt;sourceFolder&gt;openapi&lt;/sourceFolder&gt;\n                            &lt;dateLibrary&gt;java8&lt;/dateLibrary&gt;\n                            &lt;interfaceOnly&gt;true&lt;/interfaceOnly&gt;\n                            &lt;java8&gt;true&lt;/java8&gt;\n                            &lt;serializableModel&gt;true&lt;/serializableModel&gt;\n                            &lt;useTags&gt;true&lt;/useTags&gt;\n                            &lt;performBeanValidation&gt;true&lt;/performBeanValidation&gt;\n                            &lt;useBeanValidation&gt;true&lt;/useBeanValidation&gt;\n                        &lt;/configOptions&gt;\n                    &lt;/configuration&gt;\n                    &lt;executions&gt;\n                        &lt;execution&gt;\n                            &lt;phase&gt;generate-resources&lt;/phase&gt;\n                            &lt;id&gt;generate&lt;/id&gt;\n                            &lt;goals&gt;\n                                &lt;goal&gt;generate&lt;/goal&gt;\n                            &lt;/goals&gt;\n                        &lt;/execution&gt;\n                    &lt;/executions&gt;\n                &lt;/plugin&gt;\n</code></pre>\n<p>The only way I've managed to get it to work is to make it as an array of enum values, but that's not what I need here.</p>\n<p>EDIT:\ndependencies I have defined in the project:</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.maven.shared&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-dependency-analyzer&lt;/artifactId&gt;\n            &lt;version&gt;1.11.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.swagger&lt;/groupId&gt;\n            &lt;artifactId&gt;swagger-jaxrs&lt;/artifactId&gt;\n            &lt;version&gt;1.5.8&lt;/version&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.swagger.core.v3&lt;/groupId&gt;\n            &lt;artifactId&gt;swagger-annotations&lt;/artifactId&gt;\n            &lt;version&gt;2.1.5&lt;/version&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\n            &lt;version&gt;2.11.3&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":0,"creation_date":1695662894,"post_id":77174615,"comment_id":136051639,"body_markdown":"**Yes, indeed**","body":"<b>Yes, indeed</b>"},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1695663158,"post_id":77174615,"comment_id":136051672,"body_markdown":"What do you mean? Provide an example.","body":"What do you mean? Provide an example."},{"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"score":0,"creation_date":1695663888,"post_id":77174615,"comment_id":136051801,"body_markdown":"Not sure it&#39;s relevant, but keep in mind a decent logger will not evaluate the String interpolation if the logging level is not enabled.  But, a concatenated String will likely always be evaluated (unless it&#39;s like your example with a constant compile time value).","body":"Not sure it&#39;s relevant, but keep in mind a decent logger will not evaluate the String interpolation if the logging level is not enabled.  But, a concatenated String will likely always be evaluated (unless it&#39;s like your example with a constant compile time value)."}],"answers":[{"tags":[],"owner":{"account_id":1888343,"reputation":176617,"user_id":1707091,"display_name":"rgettman"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695663436,"creation_date":1695663436,"answer_id":77174704,"question_id":77174615,"body_markdown":"Yes, you have a _constant expression_, according to the [JLS, Section 15.29][1].\r\n\r\n&gt; Constant expressions of type `String` are always &quot;interned&quot; so as to share unique instances, using the method `String.intern`. \r\n\r\nYour expression is made of string literals and the `+` operator, which are in the list of things allowed in constant expressions.\r\n\r\n&gt; A constant expression is an expression denoting a value of primitive type or a String that does not complete abruptly and is composed using only the following:\r\n&gt; - Literals of primitive type (&#167;3.10.1, &#167;3.10.2, &#167;3.10.3, &#167;3.10.4), string literals (&#167;3.10.5), and text blocks (&#167;3.10.6)\r\n\r\n_(snip)_\r\n\r\n&gt; - The additive operators `+` and `-` (&#167;15.18) \r\n\r\nThere is no mention of any limitations based on context as to whether it&#39;s a constant expression, so even it&#39;s being passed to a method, it&#39;s still a constant expression, and it&#39;s still stored in the interned string pool.\r\n\r\n[1]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-15.html#jls-15.29","title":"Are string literal concatenation using + in log parameter store in compiler constant pool?","body":"<p>Yes, you have a <em>constant expression</em>, according to the <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-15.html#jls-15.29\" rel=\"nofollow noreferrer\">JLS, Section 15.29</a>.</p>\n<blockquote>\n<p>Constant expressions of type <code>String</code> are always &quot;interned&quot; so as to share unique instances, using the method <code>String.intern</code>.</p>\n</blockquote>\n<p>Your expression is made of string literals and the <code>+</code> operator, which are in the list of things allowed in constant expressions.</p>\n<blockquote>\n<p>A constant expression is an expression denoting a value of primitive type or a String that does not complete abruptly and is composed using only the following:</p>\n<ul>\n<li>Literals of primitive type (§3.10.1, §3.10.2, §3.10.3, §3.10.4), string literals (§3.10.5), and text blocks (§3.10.6)</li>\n</ul>\n</blockquote>\n<p><em>(snip)</em></p>\n<blockquote>\n<ul>\n<li>The additive operators <code>+</code> and <code>-</code> (§15.18)</li>\n</ul>\n</blockquote>\n<p>There is no mention of any limitations based on context as to whether it's a constant expression, so even it's being passed to a method, it's still a constant expression, and it's still stored in the interned string pool.</p>\n"}],"owner":{"account_id":24939850,"reputation":253,"user_id":18805881,"display_name":"olaf"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77174704,"answer_count":1,"score":0,"last_activity_date":1695663436,"creation_date":1695662394,"question_id":77174615,"body_markdown":"Consider the following\r\n\r\n\r\n    log.info(&quot;very long string  {}, &quot; + &quot; another string {}&quot;, a, b)\r\n\r\nvs \r\n\r\n    log.info(&quot;very long string {}, another string {}&quot;, a, b)\r\n\r\n\r\nIn java specification https://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.5\r\n\r\n\r\nString literals are stored in compiler constant and create in compile time\r\n\r\n\r\n    String x = &quot;very long string &quot; + &quot;another string&quot;\r\n\r\nis equal to \r\n\r\n    String y = &quot;very long string another string&quot;\r\n\r\nBoth `x` and `y` share the same reference because they are literals that are evaluated at compile time.\r\n\r\nBut is that true if the string are part of perameter calls?\r\n\r\n\r\n","title":"Are string literal concatenation using + in log parameter store in compiler constant pool?","body":"<p>Consider the following</p>\n<pre><code>log.info(&quot;very long string  {}, &quot; + &quot; another string {}&quot;, a, b)\n</code></pre>\n<p>vs</p>\n<pre><code>log.info(&quot;very long string {}, another string {}&quot;, a, b)\n</code></pre>\n<p>In java specification <a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.5\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.5</a></p>\n<p>String literals are stored in compiler constant and create in compile time</p>\n<pre><code>String x = &quot;very long string &quot; + &quot;another string&quot;\n</code></pre>\n<p>is equal to</p>\n<pre><code>String y = &quot;very long string another string&quot;\n</code></pre>\n<p>Both <code>x</code> and <code>y</code> share the same reference because they are literals that are evaluated at compile time.</p>\n<p>But is that true if the string are part of perameter calls?</p>\n"},{"tags":["java","minecraft","mysql-connector","forge"],"comments":[{"owner":{"account_id":5584931,"reputation":2048,"user_id":4425643,"accept_rate":64,"display_name":"CausingUnderflowsEverywhere"},"score":1,"creation_date":1695329897,"post_id":77152907,"comment_id":136013797,"body_markdown":"What&#39;s the error you receive?","body":"What&#39;s the error you receive?"},{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1695364142,"post_id":77152907,"comment_id":136016963,"body_markdown":"Did you run the &quot;shadowJar&quot; command?","body":"Did you run the &quot;shadowJar&quot; command?"}],"owner":{"account_id":20873572,"reputation":13,"user_id":15332940,"display_name":"Louis"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695662780,"creation_date":1695322082,"question_id":77152907,"body_markdown":"I&#39;ve been trying for 2 weeks to add a dependency to my Forge mod which connects my client to my SQL server, in the IDE it finds the server but not in the client with the built mod.\r\n\r\nTherefore, I would be happy if some of you could help me as a last hope.\r\n\r\nHere is my Total gradle.build: https://pastebin.com/7QTGFdDT\r\n\r\nI already tried adding **com.github.johnrengelman.shadow** to load the packages in the mod as well, but failed or did something wrong.\r\n\r\n```java\r\ntry {\r\nClass.forName(&quot;com.mysql.jdbc.Driver&quot;);\r\n            Connection connection = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/test&quot;, &quot;User&quot;, &quot;Password&quot;);\r\n            String sql = &quot;INSERT INTO chat_messages (Test) VALUES (?)&quot;;\r\n            PreparedStatement statement = connection.prepareStatement(sql);\r\n            statement.setString(1, Test);\r\n statement.executeUpdate();\r\n            statement.close();\r\n } catch (SQLException e) {\r\n            System.out.println(e.getMessage());\r\n\r\n        } catch (ClassNotFoundException e) {\r\n            e.printStackTrace();\r\n        }\r\n```\r\n\r\nThat is what i tried so far, it would be nice of someone could help me.\r\n\r\n---\r\n\r\n\r\nWhat&#39;s the error you receive?\r\nhttps://pastebin.com/HT5uPrrx\r\n\r\nDid you run the &quot;shadowJar&quot; command?\r\nYes quite a lot of Times, with Different Options","title":"Forge java Modding adding mysql-connector-java to a Mod","body":"<p>I've been trying for 2 weeks to add a dependency to my Forge mod which connects my client to my SQL server, in the IDE it finds the server but not in the client with the built mod.</p>\n<p>Therefore, I would be happy if some of you could help me as a last hope.</p>\n<p>Here is my Total gradle.build: <a href=\"https://pastebin.com/7QTGFdDT\" rel=\"nofollow noreferrer\">https://pastebin.com/7QTGFdDT</a></p>\n<p>I already tried adding <strong>com.github.johnrengelman.shadow</strong> to load the packages in the mod as well, but failed or did something wrong.</p>\n<pre class=\"lang-java prettyprint-override\"><code>try {\nClass.forName(&quot;com.mysql.jdbc.Driver&quot;);\n            Connection connection = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/test&quot;, &quot;User&quot;, &quot;Password&quot;);\n            String sql = &quot;INSERT INTO chat_messages (Test) VALUES (?)&quot;;\n            PreparedStatement statement = connection.prepareStatement(sql);\n            statement.setString(1, Test);\n statement.executeUpdate();\n            statement.close();\n } catch (SQLException e) {\n            System.out.println(e.getMessage());\n\n        } catch (ClassNotFoundException e) {\n            e.printStackTrace();\n        }\n</code></pre>\n<p>That is what i tried so far, it would be nice of someone could help me.</p>\n<hr />\n<p>What's the error you receive?\n<a href=\"https://pastebin.com/HT5uPrrx\" rel=\"nofollow noreferrer\">https://pastebin.com/HT5uPrrx</a></p>\n<p>Did you run the &quot;shadowJar&quot; command?\nYes quite a lot of Times, with Different Options</p>\n"},{"tags":["java","jms","activemq-artemis"],"answers":[{"tags":[],"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695662668,"creation_date":1695662668,"answer_id":77174642,"question_id":77170478,"body_markdown":"Your code is already looping through all of the property names and looking for a property named `_AMQ_LARGE_SIZE`. All you need to do is change the code so it gets the property value and does something with it, e.g.:\r\n```java\r\nboolean isLarge = false;\r\nArrayList&lt;Message&gt; messages = new ArrayList&lt;&gt;();\r\nEnumeration propertyNames = messages.get(0).getPropertyNames();\r\nwhile (propertyNames.hasMoreElements()) {\r\n    String propertyName = propertyNames.nextElement();\r\n    System.out.println(&quot;Property name: &quot; + propertyName + &quot;; property value: &quot; + messages.get(0).getObjectProperty(propertyName));\r\n    if (propertyName.equals(&quot;_AMQ_LARGE_SIZE&quot;)) {\r\n        isLarge = true;\r\n    }\r\n}\r\n```","title":"How to get message properties in ActiveMQ Artemis broker queue via JMS?","body":"<p>Your code is already looping through all of the property names and looking for a property named <code>_AMQ_LARGE_SIZE</code>. All you need to do is change the code so it gets the property value and does something with it, e.g.:</p>\n<pre class=\"lang-java prettyprint-override\"><code>boolean isLarge = false;\nArrayList&lt;Message&gt; messages = new ArrayList&lt;&gt;();\nEnumeration propertyNames = messages.get(0).getPropertyNames();\nwhile (propertyNames.hasMoreElements()) {\n    String propertyName = propertyNames.nextElement();\n    System.out.println(&quot;Property name: &quot; + propertyName + &quot;; property value: &quot; + messages.get(0).getObjectProperty(propertyName));\n    if (propertyName.equals(&quot;_AMQ_LARGE_SIZE&quot;)) {\n        isLarge = true;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":29527172,"reputation":1,"user_id":22628508,"display_name":"Limbarunda"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1695662668,"creation_date":1695625621,"question_id":77170478,"body_markdown":"I have a code that gets the property name `_AMQ_LARGE_SIZE`, but I don&#39;t understand how I can get all the headers.\r\n```java\r\nArrayList&lt;Message&gt; messages = new ArrayList&lt;&gt;();\r\nEnumeration propertyNames = messages.get(0).getPropertyNames();\r\nwhile (propertyNames.hasMoreElements()) {\r\n    if (propertyNames.nextElement().equals(&quot;_AMQ_LARGE_SIZE&quot;)) {\r\n        isLarge = true;\r\n        break;\r\n    }\r\n}\r\n```","title":"How to get message properties in ActiveMQ Artemis broker queue via JMS?","body":"<p>I have a code that gets the property name <code>_AMQ_LARGE_SIZE</code>, but I don't understand how I can get all the headers.</p>\n<pre class=\"lang-java prettyprint-override\"><code>ArrayList&lt;Message&gt; messages = new ArrayList&lt;&gt;();\nEnumeration propertyNames = messages.get(0).getPropertyNames();\nwhile (propertyNames.hasMoreElements()) {\n    if (propertyNames.nextElement().equals(&quot;_AMQ_LARGE_SIZE&quot;)) {\n        isLarge = true;\n        break;\n    }\n}\n</code></pre>\n"},{"tags":["java","swing","exe","screenshot","graalvm-native-image"],"comments":[{"owner":{"account_id":1927984,"reputation":357,"user_id":1738007,"display_name":"Tugalsan Karabacak"},"score":0,"creation_date":1695680791,"post_id":77174620,"comment_id":136054201,"body_markdown":"I figured, it is related to Windows-Settings-System-Display-Scale being %150. Now have to figure out, how to make java detect scale percent?","body":"I figured, it is related to Windows-Settings-System-Display-Scale being %150. Now have to figure out, how to make java detect scale percent?"},{"owner":{"account_id":1927984,"reputation":357,"user_id":1738007,"display_name":"Tugalsan Karabacak"},"score":0,"creation_date":1695682258,"post_id":77174620,"comment_id":136054330,"body_markdown":"I figured that, graalvm native exe cannot detect scaling factor. using this java function-&gt;  static float scaleFactor() {return Toolkit.getDefaultToolkit().getScreenResolution() / 96f;}","body":"I figured that, graalvm native exe cannot detect scaling factor. using this java function-&gt;  static float scaleFactor() {return Toolkit.getDefaultToolkit().getScreenResolution() / 96f;}"}],"owner":{"account_id":1927984,"reputation":357,"user_id":1738007,"display_name":"Tugalsan Karabacak"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695662445,"creation_date":1695662445,"question_id":77174620,"body_markdown":"For the java [project][1] below that screencaptures to a jpg file, why&lt;br&gt;\r\n- jar version creates proper jpg file, \r\n- graalvm exe version creates magnified jpg file\r\n- even though they both detects screen size correctly\r\n- Is there any temporary fix?\r\n~~~\r\npublic static void main(String... s) {\r\n\tvar size = size();\r\n\tlog.ci(&quot;main&quot;, &quot;size&quot;, size);\r\n\tvar img = shotPicture(size);\r\n\tif (img == null) {\r\n\t\treturn;\r\n\t}\r\n\tvar jpg = Path.of(&quot;D:\\\\git\\\\tst\\\\com.tugalsan.tst.input\\\\out.jpg&quot;);\r\n\ttoJpg(img, jpg);\r\n}\r\n\r\nstatic void toJpg(BufferedImage input, Path output) {\r\n\ttry {\r\n\t\tImageIO.write(input, &quot;jpg&quot;, output.toFile());\r\n\t} catch (IOException ex) {\r\n\t\tex.printStackTrace();\r\n\t}\r\n}\r\n\r\nstatic Rectangle size() {\r\n\tvar localGrapicsEnv = GraphicsEnvironment.getLocalGraphicsEnvironment();\r\n\tvar screensDevices = localGrapicsEnv.getScreenDevices();\r\n\tvar allScreenBounds = new java.awt.Rectangle();\r\n\tfor (var screen : screensDevices) {\r\n\t\tvar screenBounds = screen.getDefaultConfiguration().getBounds();\r\n\t\tallScreenBounds.width += screenBounds.width;\r\n\t\tallScreenBounds.height = Math.max(allScreenBounds.height, screenBounds.height);\r\n\t}\r\n\treturn allScreenBounds;\r\n}\r\n\r\nstatic BufferedImage shotPicture(Rectangle size) {\r\n\ttry {\r\n\t\treturn new Robot().createScreenCapture(size);\r\n\t} catch (AWTException ex) {\r\n\t\tex.printStackTrace();\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nstatic class log {\r\n\r\n\tpublic static void ci(String funcName, Object... oAll) {\r\n\t\tout.print(funcName);\r\n\t\tArrays.stream(oAll).forEachOrdered(oi -&gt; {\r\n\t\t\tout.print(&quot; &quot;);\r\n\t\t\tout.print(oi);\r\n\t\t});\r\n\t\tout.println();\r\n\t}\r\n}\r\n~~~\r\n \r\n\r\n  [1]: https://github.com/tugalsan/com.tugalsan.tst.input","title":"graalvm 21 new Robot().createScreenCapture(size) returns magnified","body":"<p>For the java <a href=\"https://github.com/tugalsan/com.tugalsan.tst.input\" rel=\"nofollow noreferrer\">project</a> below that screencaptures to a jpg file, why<br></p>\n<ul>\n<li>jar version creates proper jpg file,</li>\n<li>graalvm exe version creates magnified jpg file</li>\n<li>even though they both detects screen size correctly</li>\n<li>Is there any temporary fix?</li>\n</ul>\n<pre><code>public static void main(String... s) {\n    var size = size();\n    log.ci(&quot;main&quot;, &quot;size&quot;, size);\n    var img = shotPicture(size);\n    if (img == null) {\n        return;\n    }\n    var jpg = Path.of(&quot;D:\\\\git\\\\tst\\\\com.tugalsan.tst.input\\\\out.jpg&quot;);\n    toJpg(img, jpg);\n}\n\nstatic void toJpg(BufferedImage input, Path output) {\n    try {\n        ImageIO.write(input, &quot;jpg&quot;, output.toFile());\n    } catch (IOException ex) {\n        ex.printStackTrace();\n    }\n}\n\nstatic Rectangle size() {\n    var localGrapicsEnv = GraphicsEnvironment.getLocalGraphicsEnvironment();\n    var screensDevices = localGrapicsEnv.getScreenDevices();\n    var allScreenBounds = new java.awt.Rectangle();\n    for (var screen : screensDevices) {\n        var screenBounds = screen.getDefaultConfiguration().getBounds();\n        allScreenBounds.width += screenBounds.width;\n        allScreenBounds.height = Math.max(allScreenBounds.height, screenBounds.height);\n    }\n    return allScreenBounds;\n}\n\nstatic BufferedImage shotPicture(Rectangle size) {\n    try {\n        return new Robot().createScreenCapture(size);\n    } catch (AWTException ex) {\n        ex.printStackTrace();\n        return null;\n    }\n}\n\nstatic class log {\n\n    public static void ci(String funcName, Object... oAll) {\n        out.print(funcName);\n        Arrays.stream(oAll).forEachOrdered(oi -&gt; {\n            out.print(&quot; &quot;);\n            out.print(oi);\n        });\n        out.println();\n    }\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3023214,"reputation":20361,"user_id":2563754,"display_name":"Seelenvirtuose"},"score":1,"creation_date":1552483947,"post_id":55143045,"comment_id":97026498,"body_markdown":"Is the `calc` function specialized for `Order` instances? Or is it a general method that does nothing have to do with such orders?","body":"Is the <code>calc</code> function specialized for <code>Order</code> instances? Or is it a general method that does nothing have to do with such orders?"},{"owner":{"account_id":2465829,"reputation":11057,"user_id":2148953,"accept_rate":96,"display_name":"aran"},"score":0,"creation_date":1552483975,"post_id":55143045,"comment_id":97026526,"body_markdown":"those logics(z,y,...) could be part of the Order object, or another intermediate Class (as, for example, a list strings storing those logics, if they can be from 0 to n), so you could easily pass just the reference to the class. This way, &quot;calc&quot;&#39;s signature never changes, even if more params are in game","body":"those logics(z,y,...) could be part of the Order object, or another intermediate Class (as, for example, a list strings storing those logics, if they can be from 0 to n), so you could easily pass just the reference to the class. This way, &quot;calc&quot;&#39;s signature never changes, even if more params are in game"}],"answers":[{"tags":[],"owner":{"account_id":6223505,"reputation":1464,"user_id":4842504,"accept_rate":83,"display_name":"Sirmyself"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1695662055,"creation_date":1552484694,"answer_id":55143382,"question_id":55143045,"body_markdown":"Answer to your question is yes, especially in Java where the only way to provide a parameter by reference is by using an object and calling its methods.\r\n\r\nParameter by reference means the function may change the value of the variable outside the scope of the called function. If you&#39;re not using an object, those parameters are always sent by value, meaning that only a copy of the value is sent to the function/method and the variable used in the function call will not change.\r\n\r\n[![enter image description here][1]][1] [image source][2]\r\n\r\nBoth are important in programming, it just depends on what your function is supposed to do.\r\n\r\nMoreover, using an object as an argument in a function call encapsulates the data that is related together anyways.\r\n\r\n----\r\n\r\nThat said, a good class design will avoid grouping objects too deeply (the **screw** in the **piston** of the **engine** that is in the **car** in a **warehouse** might not be relevant to a car seller&#39;s inventory application). Prefer the bare minimum, but don&#39;t be afraid to make an object hold an other one either. Perfect balance does not exist, but imbalance does&#173;. This is not a problem in your case, just something to keep in mind. The final goal being to write as little *readable* code as possible\r\n\r\nA problem I see in your design though is that you are breaking the object to manipulate the data outside it. Hold the urge to break an object inside an other object and prefer declaring a method inside the first object to call it from the second.\r\n\r\nIn your example, it would be preferable to call `calc` directly from the `order` object and add parameters as needed.\r\n\r\n    Class ABC{\r\n       private test(Order o){\r\n         String z = //some logic to evaluate z\r\n         String y = // some logic to evaluate y\r\n         int p = o.calc(z, y)\r\n       }\r\n    }\r\n\r\n\r\n    Class Order {\r\n      public int calc(String a, String b){\r\n        \t//Product, User and your code are already stored in this object anyways\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fhgaS.gif\r\n  [2]: https://www.mathwarehouse.com/programming/passing-by-value-vs-by-reference-visual-explanation.php","title":"Is it a good practice to pass object as a paramater than separate variables to a function?","body":"<p>Answer to your question is yes, especially in Java where the only way to provide a parameter by reference is by using an object and calling its methods.</p>\n<p>Parameter by reference means the function may change the value of the variable outside the scope of the called function. If you're not using an object, those parameters are always sent by value, meaning that only a copy of the value is sent to the function/method and the variable used in the function call will not change.</p>\n<p><a href=\"https://i.stack.imgur.com/fhgaS.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fhgaS.gif\" alt=\"enter image description here\" /></a> <a href=\"https://www.mathwarehouse.com/programming/passing-by-value-vs-by-reference-visual-explanation.php\" rel=\"nofollow noreferrer\">image source</a></p>\n<p>Both are important in programming, it just depends on what your function is supposed to do.</p>\n<p>Moreover, using an object as an argument in a function call encapsulates the data that is related together anyways.</p>\n<hr />\n<p>That said, a good class design will avoid grouping objects too deeply (the <strong>screw</strong> in the <strong>piston</strong> of the <strong>engine</strong> that is in the <strong>car</strong> in a <strong>warehouse</strong> might not be relevant to a car seller's inventory application). Prefer the bare minimum, but don't be afraid to make an object hold an other one either. Perfect balance does not exist, but imbalance does­. This is not a problem in your case, just something to keep in mind. The final goal being to write as little <em>readable</em> code as possible</p>\n<p>A problem I see in your design though is that you are breaking the object to manipulate the data outside it. Hold the urge to break an object inside an other object and prefer declaring a method inside the first object to call it from the second.</p>\n<p>In your example, it would be preferable to call <code>calc</code> directly from the <code>order</code> object and add parameters as needed.</p>\n<pre><code>Class ABC{\n   private test(Order o){\n     String z = //some logic to evaluate z\n     String y = // some logic to evaluate y\n     int p = o.calc(z, y)\n   }\n}\n\n\nClass Order {\n  public int calc(String a, String b){\n        //Product, User and your code are already stored in this object anyways\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":985197,"reputation":12521,"user_id":1003886,"accept_rate":66,"display_name":"kajacx"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1552485083,"creation_date":1552485083,"answer_id":55143533,"question_id":55143045,"body_markdown":"Depends, if you would only call your function like this: `calc(z, y, o.getProduct(), o.getUser(), o.getCode())`, then there is no point having 5 paramters and you should just use 3 parameters and pass the entire `o` object.\r\n\r\nOn the other hand, if you would want to pass different arguments as well, for example `calc(z, y, o.getProduct(), o.getUser(), &quot;anotherString&quot;)`, the best practice is to have methods like this:\r\n\r\n    public int calc(String a, String b, ABC c) {\r\n        return this.calc(a, b, c.getProduct(), c.getUser(), c.getCode());\r\n    }\r\n    \r\n    public int calc(String a, String b, Product a, User b, String d) {\r\n         //do the calculation here\r\n    }\r\n\r\nThe first function offers the convinience of passing only 1 parameter, while the second function offers the flexibility of passing different parameters.","title":"Is it a good practice to pass object as a paramater than separate variables to a function?","body":"<p>Depends, if you would only call your function like this: <code>calc(z, y, o.getProduct(), o.getUser(), o.getCode())</code>, then there is no point having 5 paramters and you should just use 3 parameters and pass the entire <code>o</code> object.</p>\n\n<p>On the other hand, if you would want to pass different arguments as well, for example <code>calc(z, y, o.getProduct(), o.getUser(), \"anotherString\")</code>, the best practice is to have methods like this:</p>\n\n<pre><code>public int calc(String a, String b, ABC c) {\n    return this.calc(a, b, c.getProduct(), c.getUser(), c.getCode());\n}\n\npublic int calc(String a, String b, Product a, User b, String d) {\n     //do the calculation here\n}\n</code></pre>\n\n<p>The first function offers the convinience of passing only 1 parameter, while the second function offers the flexibility of passing different parameters.</p>\n"}],"owner":{"account_id":14784642,"reputation":69,"user_id":10677223,"display_name":"user10677223"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2820,"favorite_count":0,"down_vote_count":2,"up_vote_count":3,"answer_count":2,"score":1,"last_activity_date":1695662055,"creation_date":1552483709,"question_id":55143045,"body_markdown":"Is it a good practice to pass object as a paramater than separate variable. I have a class below. Instead of passing separate paramaters to **calc** function, is it a good practice to create an object say **CalcFields** and store z,l,y, product,user and code in it and pass that object to calc function. My concern is this list of paramters may grow in future, say 5 more fields need to be passed\r\n\r\n    Class ABC{\r\n       private test(Order o){\r\n         String z = //some logic to evaluate z\r\n         String y = // some logic to evaluate y\r\n         int p = calc(z, y, o.getProduct(), o.getUser(), o.getCode())\r\n       }\r\n    }\r\n    \r\n    \r\n    Class Calculate{\r\n      public int calc(String a, String b, Product a, User b, String d){\r\n         ..........\r\n        }\r\n    }","title":"Is it a good practice to pass object as a paramater than separate variables to a function?","body":"<p>Is it a good practice to pass object as a paramater than separate variable. I have a class below. Instead of passing separate paramaters to <strong>calc</strong> function, is it a good practice to create an object say <strong>CalcFields</strong> and store z,l,y, product,user and code in it and pass that object to calc function. My concern is this list of paramters may grow in future, say 5 more fields need to be passed</p>\n\n<pre><code>Class ABC{\n   private test(Order o){\n     String z = //some logic to evaluate z\n     String y = // some logic to evaluate y\n     int p = calc(z, y, o.getProduct(), o.getUser(), o.getCode())\n   }\n}\n\n\nClass Calculate{\n  public int calc(String a, String b, Product a, User b, String d){\n     ..........\n    }\n}\n</code></pre>\n"},{"tags":["java","image","printing","thermal-printer"],"comments":[{"owner":{"account_id":2000530,"reputation":2026,"user_id":1791696,"accept_rate":80,"display_name":"joeking"},"score":0,"creation_date":1412829431,"post_id":26269019,"comment_id":41214918,"body_markdown":"image.getWidth() &gt;&gt; 16 --- should be &quot;&gt;&gt; 8&quot;. 8-bits per byte.","body":"image.getWidth() &gt;&gt; 16 --- should be &quot;&gt;&gt; 8&quot;. 8-bits per byte."},{"owner":{"account_id":430115,"reputation":1407,"user_id":813353,"accept_rate":54,"display_name":"Diego Fernando Murillo Valenci"},"score":0,"creation_date":1412860270,"post_id":26269019,"comment_id":41230589,"body_markdown":"hey joeking publish your comment as an answers, this solved my problem :D","body":"hey joeking publish your comment as an answers, this solved my problem :D"},{"owner":{"account_id":2666377,"reputation":3513,"user_id":2304737,"accept_rate":50,"display_name":"mr5"},"score":0,"creation_date":1531242162,"post_id":26269019,"comment_id":89519533,"body_markdown":"Hi. I just want to thank you for posting your code. It works better than my previous code :)","body":"Hi. I just want to thank you for posting your code. It works better than my previous code :)"}],"answers":[{"tags":[],"owner":{"account_id":2000530,"reputation":2026,"user_id":1791696,"accept_rate":80,"display_name":"joeking"},"comment_count":0,"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1412896714,"creation_date":1412896714,"answer_id":26289485,"question_id":26269019,"body_markdown":"In the code above, \r\n\r\nimage.getWidth() &gt;&gt; 16 --- should be &quot;&gt;&gt; 8&quot;. 8-bits per byte.\r\n","title":"Print bitmap full page width in thermal dot printer using ESC/POS in java","body":"<p>In the code above, </p>\n\n<p>image.getWidth() >> 16 --- should be \">> 8\". 8-bits per byte.</p>\n"}],"owner":{"account_id":430115,"reputation":1407,"user_id":813353,"accept_rate":54,"display_name":"Diego Fernando Murillo Valenci"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16934,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"accepted_answer_id":26289485,"answer_count":1,"score":15,"last_activity_date":1695662007,"creation_date":1412818782,"question_id":26269019,"body_markdown":"I&#39;m trying to print an image of 576 pixels width in a thermal printer that supports ESC commands, the problem is that the command &quot;ESC *&quot; for printing image bits only let me print images of 255 pixels width (if i use a 576 pixels image some parts are printed and the rest are random symbols), in the documentacion saids that the commands accepts a max of 255 bytes like this:\r\n\r\n    ESC * m nL nH d1&#214;dk\r\n    Name Specify bit image mode \r\n    Code ASCII ESC * m nL nHd1...dk \r\n     Hex. 1B 2A m nL nHd1...dk \r\n     Decimal 27 42 m nL nHd1...dk \r\n    Defined Region m = 0,1,32,33 \r\n     0 ≤ nL ≤ 255 \r\n     0 ≤ nH ≤ 3 \r\n     0 ≤ d ≤ 255 \r\n\r\nSo i don&#39;t know how to print a image that is the max of width of the printer page (576 px), i have this code that prints the image:\r\n\r\n    public class ESCPOSApi {\r\n    \r\n        private final byte[] INITIALIZE_PRINTER = new byte[]{0x1B,0x40};\r\n        \r\n        private final byte[] PRINT_AND_FEED_PAPER = new byte[]{0x0A};\r\n        \r\n        private final byte[] SELECT_BIT_IMAGE_MODE = new byte[]{(byte)0x1B, (byte)0x2A};\r\n        private final byte[] SET_LINE_SPACING = new byte[]{0x1B, 0x33};\r\n    \r\n        private FileOutputStream printOutput;\r\n        \r\n        public int maxBitsWidth = 255;\r\n    \r\n        public ESCPOSApi(String device) {\r\n            try {\r\n                printOutput = new FileOutputStream(device);\r\n            } catch (FileNotFoundException ex) {\r\n                Logger.getLogger(ESCPOSApi.class.getName()).log(Level.SEVERE, null, ex);\r\n            }\r\n        }\r\n    \r\n        private byte[] buildPOSCommand(byte[] command, byte... args) {\r\n            byte[] posCommand = new byte[command.length + args.length];\r\n    \r\n            System.arraycopy(command, 0, posCommand, 0, command.length);\r\n            System.arraycopy(args, 0, posCommand, command.length, args.length);\r\n    \r\n            return posCommand;\r\n        }\r\n    \r\n        private BitSet getBitsImageData(BufferedImage image) {\r\n            int threshold = 127;\r\n            int index = 0;\r\n            int dimenssions = image.getWidth() * image.getHeight();\r\n            BitSet imageBitsData = new BitSet(dimenssions);\r\n            \r\n            for (int y = 0; y &lt; image.getHeight(); y++)\r\n            {\r\n                for (int x = 0; x &lt; image.getWidth(); x++)\r\n                {\r\n                    int color = image.getRGB(x, y);\r\n                    int  red = (color &amp; 0x00ff0000) &gt;&gt; 16;\r\n                    int  green = (color &amp; 0x0000ff00) &gt;&gt; 8;\r\n                    int  blue = color &amp; 0x000000ff;\r\n                    int luminance = (int)(red * 0.3 + green * 0.59 + blue * 0.11);\r\n                    //dots[index] = (luminance &lt; threshold);\r\n                    imageBitsData.set(index, (luminance &lt; threshold));\r\n                    index++;\r\n                }\r\n            }\r\n            \r\n            return imageBitsData;\r\n        }\r\n    \r\n        public void printImage(BufferedImage image) {\r\n            try {\r\n                BitSet imageBits = getBitsImageData(image);\r\n                \r\n                byte widthLSB = (byte)(image.getWidth() &amp; 0xFF);\r\n                byte widthMSB = (byte)((image.getWidth() &gt;&gt; 16) &amp; 0xFF);\r\n                \r\n                // COMMANDS\r\n                byte[] selectBitImageModeCommand = buildPOSCommand(SELECT_BIT_IMAGE_MODE, (byte) 33, widthLSB, widthMSB);\r\n                byte[] setLineSpacing24Dots = buildPOSCommand(SET_LINE_SPACING, (byte) 24);\r\n                byte[] setLineSpacing30Dots = buildPOSCommand(SET_LINE_SPACING, (byte) 30);\r\n                \r\n                \r\n                printOutput.write(INITIALIZE_PRINTER);\r\n                printOutput.write(setLineSpacing24Dots);\r\n    \r\n                int offset = 0;\r\n                while (offset &lt; image.getHeight()) {\r\n                    printOutput.write(selectBitImageModeCommand);\r\n                    \r\n                    int imageDataLineIndex = 0;\r\n                    byte[] imageDataLine = new byte[3 * image.getWidth()];\r\n                    \r\n                    for (int x = 0; x &lt; image.getWidth(); ++x) {\r\n                        \r\n                        // Remember, 24 dots = 24 bits = 3 bytes.\r\n                        // The &#39;k&#39; variable keeps track of which of those\r\n                        // three bytes that we&#39;re currently scribbling into.\r\n                        for (int k = 0; k &lt; 3; ++k) {\r\n                            byte slice = 0;\r\n    \r\n                            // A byte is 8 bits. The &#39;b&#39; variable keeps track\r\n                            // of which bit in the byte we&#39;re recording.\r\n                            for (int b = 0; b &lt; 8; ++b) {\r\n                                // Calculate the y position that we&#39;re currently\r\n                                // trying to draw. We take our offset, divide it\r\n                                // by 8 so we&#39;re talking about the y offset in\r\n                                // terms of bytes, add our current &#39;k&#39; byte\r\n                                // offset to that, multiple by 8 to get it in terms\r\n                                // of bits again, and add our bit offset to it.\r\n                                int y = (((offset / 8) + k) * 8) + b;\r\n    \r\n                                // Calculate the location of the pixel we want in the bit array.\r\n                                // It&#39;ll be at (y * width) + x.\r\n                                int i = (y * image.getWidth()) + x;\r\n    \r\n                                // If the image (or this stripe of the image)\r\n                                // is shorter than 24 dots, pad with zero.\r\n                                boolean v = false;\r\n                                if (i &lt; imageBits.length()) {\r\n                                    v = imageBits.get(i);\r\n                                }\r\n                                // Finally, store our bit in the byte that we&#39;re currently\r\n                                // scribbling to. Our current &#39;b&#39; is actually the exact\r\n                                // opposite of where we want it to be in the byte, so\r\n                                // subtract it from 7, shift our bit into place in a temp\r\n                                // byte, and OR it with the target byte to get it into there.\r\n                                slice |= (byte) ((v ? 1 : 0) &lt;&lt; (7 - b));\r\n                            }\r\n                            \r\n                            imageDataLine[imageDataLineIndex + k] = slice;\r\n                            \r\n                            // Phew! Write the damn byte to the buffer\r\n                            //printOutput.write(slice);\r\n                        }\r\n                        \r\n                        imageDataLineIndex += 3;\r\n                    }\r\n                    \r\n                    printOutput.write(imageDataLine);\r\n                    offset += 24;\r\n                    printOutput.write(PRINT_AND_FEED_PAPER);\r\n                }\r\n                \r\n                \r\n                printOutput.write(setLineSpacing30Dots);\r\n            } catch (IOException ex) {\r\n                Logger.getLogger(ESCPOSApi.class\r\n                        .getName()).log(Level.SEVERE, null, ex);\r\n            }\r\n        }\r\n    }\r\n\r\nI want to use 24-dots double-density but for now i&#39;m using 24-dots sigle-density with images of 255 pixels (this let me print images in full page width but i need double density)","title":"Print bitmap full page width in thermal dot printer using ESC/POS in java","body":"<p>I'm trying to print an image of 576 pixels width in a thermal printer that supports ESC commands, the problem is that the command \"ESC *\" for printing image bits only let me print images of 255 pixels width (if i use a 576 pixels image some parts are printed and the rest are random symbols), in the documentacion saids that the commands accepts a max of 255 bytes like this:</p>\n\n<pre><code>ESC * m nL nH d1Ödk\nName Specify bit image mode \nCode ASCII ESC * m nL nHd1...dk \n Hex. 1B 2A m nL nHd1...dk \n Decimal 27 42 m nL nHd1...dk \nDefined Region m = 0,1,32,33 \n 0 ≤ nL ≤ 255 \n 0 ≤ nH ≤ 3 \n 0 ≤ d ≤ 255 \n</code></pre>\n\n<p>So i don't know how to print a image that is the max of width of the printer page (576 px), i have this code that prints the image:</p>\n\n<pre><code>public class ESCPOSApi {\n\n    private final byte[] INITIALIZE_PRINTER = new byte[]{0x1B,0x40};\n\n    private final byte[] PRINT_AND_FEED_PAPER = new byte[]{0x0A};\n\n    private final byte[] SELECT_BIT_IMAGE_MODE = new byte[]{(byte)0x1B, (byte)0x2A};\n    private final byte[] SET_LINE_SPACING = new byte[]{0x1B, 0x33};\n\n    private FileOutputStream printOutput;\n\n    public int maxBitsWidth = 255;\n\n    public ESCPOSApi(String device) {\n        try {\n            printOutput = new FileOutputStream(device);\n        } catch (FileNotFoundException ex) {\n            Logger.getLogger(ESCPOSApi.class.getName()).log(Level.SEVERE, null, ex);\n        }\n    }\n\n    private byte[] buildPOSCommand(byte[] command, byte... args) {\n        byte[] posCommand = new byte[command.length + args.length];\n\n        System.arraycopy(command, 0, posCommand, 0, command.length);\n        System.arraycopy(args, 0, posCommand, command.length, args.length);\n\n        return posCommand;\n    }\n\n    private BitSet getBitsImageData(BufferedImage image) {\n        int threshold = 127;\n        int index = 0;\n        int dimenssions = image.getWidth() * image.getHeight();\n        BitSet imageBitsData = new BitSet(dimenssions);\n\n        for (int y = 0; y &lt; image.getHeight(); y++)\n        {\n            for (int x = 0; x &lt; image.getWidth(); x++)\n            {\n                int color = image.getRGB(x, y);\n                int  red = (color &amp; 0x00ff0000) &gt;&gt; 16;\n                int  green = (color &amp; 0x0000ff00) &gt;&gt; 8;\n                int  blue = color &amp; 0x000000ff;\n                int luminance = (int)(red * 0.3 + green * 0.59 + blue * 0.11);\n                //dots[index] = (luminance &lt; threshold);\n                imageBitsData.set(index, (luminance &lt; threshold));\n                index++;\n            }\n        }\n\n        return imageBitsData;\n    }\n\n    public void printImage(BufferedImage image) {\n        try {\n            BitSet imageBits = getBitsImageData(image);\n\n            byte widthLSB = (byte)(image.getWidth() &amp; 0xFF);\n            byte widthMSB = (byte)((image.getWidth() &gt;&gt; 16) &amp; 0xFF);\n\n            // COMMANDS\n            byte[] selectBitImageModeCommand = buildPOSCommand(SELECT_BIT_IMAGE_MODE, (byte) 33, widthLSB, widthMSB);\n            byte[] setLineSpacing24Dots = buildPOSCommand(SET_LINE_SPACING, (byte) 24);\n            byte[] setLineSpacing30Dots = buildPOSCommand(SET_LINE_SPACING, (byte) 30);\n\n\n            printOutput.write(INITIALIZE_PRINTER);\n            printOutput.write(setLineSpacing24Dots);\n\n            int offset = 0;\n            while (offset &lt; image.getHeight()) {\n                printOutput.write(selectBitImageModeCommand);\n\n                int imageDataLineIndex = 0;\n                byte[] imageDataLine = new byte[3 * image.getWidth()];\n\n                for (int x = 0; x &lt; image.getWidth(); ++x) {\n\n                    // Remember, 24 dots = 24 bits = 3 bytes.\n                    // The 'k' variable keeps track of which of those\n                    // three bytes that we're currently scribbling into.\n                    for (int k = 0; k &lt; 3; ++k) {\n                        byte slice = 0;\n\n                        // A byte is 8 bits. The 'b' variable keeps track\n                        // of which bit in the byte we're recording.\n                        for (int b = 0; b &lt; 8; ++b) {\n                            // Calculate the y position that we're currently\n                            // trying to draw. We take our offset, divide it\n                            // by 8 so we're talking about the y offset in\n                            // terms of bytes, add our current 'k' byte\n                            // offset to that, multiple by 8 to get it in terms\n                            // of bits again, and add our bit offset to it.\n                            int y = (((offset / 8) + k) * 8) + b;\n\n                            // Calculate the location of the pixel we want in the bit array.\n                            // It'll be at (y * width) + x.\n                            int i = (y * image.getWidth()) + x;\n\n                            // If the image (or this stripe of the image)\n                            // is shorter than 24 dots, pad with zero.\n                            boolean v = false;\n                            if (i &lt; imageBits.length()) {\n                                v = imageBits.get(i);\n                            }\n                            // Finally, store our bit in the byte that we're currently\n                            // scribbling to. Our current 'b' is actually the exact\n                            // opposite of where we want it to be in the byte, so\n                            // subtract it from 7, shift our bit into place in a temp\n                            // byte, and OR it with the target byte to get it into there.\n                            slice |= (byte) ((v ? 1 : 0) &lt;&lt; (7 - b));\n                        }\n\n                        imageDataLine[imageDataLineIndex + k] = slice;\n\n                        // Phew! Write the damn byte to the buffer\n                        //printOutput.write(slice);\n                    }\n\n                    imageDataLineIndex += 3;\n                }\n\n                printOutput.write(imageDataLine);\n                offset += 24;\n                printOutput.write(PRINT_AND_FEED_PAPER);\n            }\n\n\n            printOutput.write(setLineSpacing30Dots);\n        } catch (IOException ex) {\n            Logger.getLogger(ESCPOSApi.class\n                    .getName()).log(Level.SEVERE, null, ex);\n        }\n    }\n}\n</code></pre>\n\n<p>I want to use 24-dots double-density but for now i'm using 24-dots sigle-density with images of 255 pixels (this let me print images in full page width but i need double density)</p>\n"},{"tags":["java","string","pdf","hyperlink","pdfbox"],"comments":[{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1695665603,"post_id":77174576,"comment_id":136052085,"body_markdown":"remove &quot;/FXX0 Do&quot; from the page content stream. Look at the file with PDFDebugger.","body":"remove &quot;/FXX0 Do&quot; from the page content stream. Look at the file with PDFDebugger."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1695674889,"post_id":77174576,"comment_id":136053595,"body_markdown":"The call of that form XObject even is tagged as Watermark Pagination Artifact. You might want to remove all marked content sections marked like that.","body":"The call of that form XObject even is tagged as Watermark Pagination Artifact. You might want to remove all marked content sections marked like that."}],"owner":{"account_id":3464949,"reputation":227,"user_id":2900798,"accept_rate":50,"display_name":"Arunas Jaspelkis"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695661921,"creation_date":1695661921,"question_id":77174576,"body_markdown":"I&#39;m trying to clean a some of PDF documents from hyperlinks and unwanted, not original text\r\n\r\nI&#39;m using this function, to clean all hyperlinks and some unwanted text from PDF\r\n\r\n    private int processText(PDPage page) throws IOException {\r\n            int counter = 0;\r\n            boolean found = false;\r\n            List&lt;Object&gt; filteredTokens = new ArrayList&lt;&gt;();\r\n    \r\n            PDFStreamParser parser = new PDFStreamParser(page);\r\n            Object token = parser.parseNextToken();\r\n            while (token != null) {\r\n                boolean filtered = true;\r\n                if (token instanceof Operator) {\r\n                    String name = ((Operator) token).getName();\r\n                    if (&quot;Tj&quot;.equals(name)) {\r\n                        COSString stringToken = (COSString) filteredTokens.get(filteredTokens.size() - 1);\r\n    \r\n                        if (stringToken.getString().contains(&quot;http://&quot;) || stringToken.getString().contains(&quot;https://&quot;) || stringToken.getString().contains(&quot;Dr-Bios.com&quot;)\r\n                                || stringToken.getString().contains(&quot;www.kythuatvitinh.com&quot;)) {\r\n                            print(stringToken.getString());\r\n                            filteredTokens.remove(filteredTokens.size() - 1);\r\n                            filtered = false;\r\n                            found = true;\r\n                            counter++;\r\n                        }\r\n                    }\r\n                }\r\n                if (filtered)\r\n                    filteredTokens.add(token);\r\n                token = parser.parseNextToken();\r\n            }\r\n    \r\n            if (found) {\r\n                PDStream newContents = new PDStream(_document);\r\n                try (OutputStream out = newContents.createOutputStream()) {\r\n                    ContentStreamWriter writer = new ContentStreamWriter(out);\r\n                    writer.writeTokens(filteredTokens);\r\n                }\r\n                page.setContents(newContents);\r\n            }\r\n    \r\n            return counter;\r\n        }\r\n\r\nThis function works great with hyperlinks, but it doesn&#39;t find texts like, &quot;Dr-Bios.com&quot;, I think they using some tricks. Can help me someone figure it out? They are adding the same text on all pages (Just text, not hyperlinks).\r\n\r\nImage with example bellow:\r\n\r\n[![pdf file example][1]][1]\r\n\r\nPDF file example here: [ACER 4253 ZQE ZQG.pdf][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/5FgtF.png\r\n  [2]: https://easyupload.io/q0dv0f","title":"Using PDFBox v2 remove some unwanted text from PDF files","body":"<p>I'm trying to clean a some of PDF documents from hyperlinks and unwanted, not original text</p>\n<p>I'm using this function, to clean all hyperlinks and some unwanted text from PDF</p>\n<pre><code>private int processText(PDPage page) throws IOException {\n        int counter = 0;\n        boolean found = false;\n        List&lt;Object&gt; filteredTokens = new ArrayList&lt;&gt;();\n\n        PDFStreamParser parser = new PDFStreamParser(page);\n        Object token = parser.parseNextToken();\n        while (token != null) {\n            boolean filtered = true;\n            if (token instanceof Operator) {\n                String name = ((Operator) token).getName();\n                if (&quot;Tj&quot;.equals(name)) {\n                    COSString stringToken = (COSString) filteredTokens.get(filteredTokens.size() - 1);\n\n                    if (stringToken.getString().contains(&quot;http://&quot;) || stringToken.getString().contains(&quot;https://&quot;) || stringToken.getString().contains(&quot;Dr-Bios.com&quot;)\n                            || stringToken.getString().contains(&quot;www.kythuatvitinh.com&quot;)) {\n                        print(stringToken.getString());\n                        filteredTokens.remove(filteredTokens.size() - 1);\n                        filtered = false;\n                        found = true;\n                        counter++;\n                    }\n                }\n            }\n            if (filtered)\n                filteredTokens.add(token);\n            token = parser.parseNextToken();\n        }\n\n        if (found) {\n            PDStream newContents = new PDStream(_document);\n            try (OutputStream out = newContents.createOutputStream()) {\n                ContentStreamWriter writer = new ContentStreamWriter(out);\n                writer.writeTokens(filteredTokens);\n            }\n            page.setContents(newContents);\n        }\n\n        return counter;\n    }\n</code></pre>\n<p>This function works great with hyperlinks, but it doesn't find texts like, &quot;Dr-Bios.com&quot;, I think they using some tricks. Can help me someone figure it out? They are adding the same text on all pages (Just text, not hyperlinks).</p>\n<p>Image with example bellow:</p>\n<p><a href=\"https://i.stack.imgur.com/5FgtF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5FgtF.png\" alt=\"pdf file example\" /></a></p>\n<p>PDF file example here: <a href=\"https://easyupload.io/q0dv0f\" rel=\"nofollow noreferrer\">ACER 4253 ZQE ZQG.pdf</a></p>\n"},{"tags":["java","apache-axis"],"comments":[{"owner":{"account_id":1060224,"reputation":4167,"user_id":1062015,"accept_rate":81,"display_name":"Jaco Van Niekerk"},"score":1,"creation_date":1358230843,"post_id":14331959,"comment_id":19918975,"body_markdown":"Have you tried intercepting the XML as it is being sent between the components? Wireshark works well with this.","body":"Have you tried intercepting the XML as it is being sent between the components? Wireshark works well with this."},{"owner":{"account_id":140150,"reputation":1081,"user_id":346247,"display_name":"Jim Bethancourt"},"score":0,"creation_date":1369838293,"post_id":14331959,"comment_id":24914121,"body_markdown":"I&#39;ve run into the same problem, and apparently there are a number of others who have as well, but I&#39;m not finding any silver bullets. The only possible hint I&#39;ve found [here](http://mail-archives.apache.org/mod_mbox/axis-java-user/201006.mbox/%3CBLU142-W370CC9EC14CCF880F84E6AED20@phx.gbl%3E) indicates that &quot;wstx expects the character to be a valid IsoControl character&quot;.","body":"I&#39;ve run into the same problem, and apparently there are a number of others who have as well, but I&#39;m not finding any silver bullets. The only possible hint I&#39;ve found <a href=\"http://mail-archives.apache.org/mod_mbox/axis-java-user/201006.mbox/%3CBLU142-W370CC9EC14CCF880F84E6AED20@phx.gbl%3E\" rel=\"nofollow noreferrer\">here</a> indicates that &quot;wstx expects the character to be a valid IsoControl character&quot;."},{"owner":{"account_id":1090698,"reputation":1009,"user_id":1085396,"accept_rate":65,"display_name":"RizN81"},"score":0,"creation_date":1395306447,"post_id":14331959,"comment_id":34280849,"body_markdown":"Have you got the solution for this issue ?","body":"Have you got the solution for this issue ?"}],"answers":[{"tags":[],"owner":{"account_id":448785,"reputation":79,"user_id":843200,"display_name":"dosakiller"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1358231245,"creation_date":1358231245,"answer_id":14332235,"question_id":14331959,"body_markdown":"Check for the address and port in the endpoint in the wsdl.\r\n\r\n    &lt;wsdl:port binding=&quot;&quot; name=&quot;&quot;&gt;\r\n      &lt;soap:address location=&quot;&quot;/&gt;\r\n    &lt;/wsdl:port&gt;\r\n\r\nGenerate the client again and try calling the web service.","title":"apache axis2 com.ctc.wstx.exc.WstxUnexpectedCharException error","body":"<p>Check for the address and port in the endpoint in the wsdl.</p>\n\n<pre><code>&lt;wsdl:port binding=\"\" name=\"\"&gt;\n  &lt;soap:address location=\"\"/&gt;\n&lt;/wsdl:port&gt;\n</code></pre>\n\n<p>Generate the client again and try calling the web service.</p>\n"},{"tags":[],"owner":{"account_id":2293919,"reputation":2910,"user_id":2015911,"accept_rate":89,"display_name":"BlueMoon93"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1453377225,"creation_date":1453377225,"answer_id":34923113,"question_id":14331959,"body_markdown":"Which encoding are you using and what encoding is on your received text? `wstx expects the character to be a valid IsoControl character` suggests you&#39;re using ISO in your system and maybe receiving UTF-8 or some other incompatible encoding. Make sure encodings match and there should be no problem.","title":"apache axis2 com.ctc.wstx.exc.WstxUnexpectedCharException error","body":"<p>Which encoding are you using and what encoding is on your received text? <code>wstx expects the character to be a valid IsoControl character</code> suggests you're using ISO in your system and maybe receiving UTF-8 or some other incompatible encoding. Make sure encodings match and there should be no problem.</p>\n"},{"tags":[],"owner":{"account_id":21910001,"reputation":247,"user_id":16194563,"display_name":"Ramya Musunuru"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695661382,"creation_date":1695652957,"answer_id":77173638,"question_id":14331959,"body_markdown":"Sometimes I get this error when the application with WSDL file (the service that you are trying to reach) is not deployed properly.","title":"apache axis2 com.ctc.wstx.exc.WstxUnexpectedCharException error","body":"<p>Sometimes I get this error when the application with WSDL file (the service that you are trying to reach) is not deployed properly.</p>\n"}],"owner":{"account_id":356125,"reputation":481,"user_id":695455,"accept_rate":50,"display_name":"Martin"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17189,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"answer_count":3,"score":3,"last_activity_date":1695661382,"creation_date":1358229780,"question_id":14331959,"body_markdown":"I working on a web service using apache `axis2`, I have generated client stub code from `wsdl` file how when I call the web service I&#39;m getting this error:\r\n\r\n    org.apache.axis2.AxisFault: com.ctc.wstx.exc.WstxUnexpectedCharException: Unexpected character &#39;&quot;&#39; (code 34) in DOCTYPE declaration; expected a space between public and system identifiers\r\n     at [row,col {unknown-source}]: [1,50]\r\n    \tat org.apache.axis2.AxisFault.makeFault(AxisFault.java:430)\r\n    \tat org.apache.axis2.transport.TransportUtils.createSOAPMessage(TransportUtils.java:123)\r\n    \tat org.apache.axis2.transport.TransportUtils.createSOAPMessage(TransportUtils.java:67)\r\n    \tat org.apache.axis2.description.OutInAxisOperationClient.handleResponse(OutInAxisOperation.java:354)\r\n    \tat org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:421)\r\n    \tat org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229)\r\n    \tat org.apache.axis2.client.OperationClient.execute(OperationClient.java:165)\r\n    \tat org.csapi.www.wsdl.parlayx.sms.notification_manager.v2_3.service.SmsNotificationManagerServiceStub.startSmsNotification(SmsNotificationManagerServiceStub.java:618)\r\n    \tat org.csapi.www.wsdl.parlayx.sms.notification_manager.v2_3.service.Notification.startNotification(Notification.java:118)\r\n    \tat org.csapi.www.wsdl.parlayx.sms.notification_manager.v2_3.service.Notification.main(Notification.java:39)\r\n    Caused by: org.apache.axiom.om.OMException: com.ctc.wstx.exc.WstxUnexpectedCharException: Unexpected character &#39;&quot;&#39; (code 34) in DOCTYPE declaration; expected a space between public and system identifiers\r\n     at [row,col {unknown-source}]: [1,50]\r\n    \tat org.apache.axiom.om.impl.builder.StAXOMBuilder.next(StAXOMBuilder.java:296)\r\n    \tat org.apache.axiom.soap.impl.builder.StAXSOAPModelBuilder.getSOAPEnvelope(StAXSOAPModelBuilder.java:198)\r\n    \tat org.apache.axiom.soap.impl.builder.StAXSOAPModelBuilder.&lt;init&gt;(StAXSOAPModelBuilder.java:154)\r\n    \tat org.apache.axiom.soap.impl.builder.StAXSOAPModelBuilder.&lt;init&gt;(StAXSOAPModelBuilder.java:140)\r\n    \tat org.apache.axis2.builder.BuilderUtil.getSOAPBuilder(BuilderUtil.java:686)\r\n    \tat org.apache.axis2.transport.TransportUtils.createDocumentElement(TransportUtils.java:197)\r\n    \tat org.apache.axis2.transport.TransportUtils.createSOAPMessage(TransportUtils.java:145)\r\n    \tat org.apache.axis2.transport.TransportUtils.createSOAPMessage(TransportUtils.java:108)\r\n    \t... 8 more\r\n    Caused by: com.ctc.wstx.exc.WstxUnexpectedCharException: Unexpected character &#39;&quot;&#39; (code 34) in DOCTYPE declaration; expected a space between public and system identifiers\r\n     at [row,col {unknown-source}]: [1,50]I working on a web service using apache axis2, i have generated client stub code from wsdl file how when i call the web service i&#39;m getting this error:\r\n    \tat com.ctc.wstx.sr.StreamScanner.throwUnexpectedChar(StreamScanner.java:648)\r\n    \tat com.ctc.wstx.sr.BasicStreamReader.startDTD(BasicStreamReader.java:2482)\r\n    \tat com.ctc.wstx.sr.BasicStreamReader.nextFromPrologBang(BasicStreamReader.java:2398)\r\n    \tat com.ctc.wstx.sr.BasicStreamReader.nextFromProlog(BasicStreamReader.java:2058)\r\n    \tat com.ctc.wstx.sr.BasicStreamReader.next(BasicStreamReader.java:1069)\r\n    \tat org.apache.axiom.util.stax.wrapper.XMLStreamReaderWrapper.next(XMLStreamReaderWrapper.java:225)\r\n    \tat org.apache.axiom.om.impl.builder.StAXOMBuilder.parserNext(StAXOMBuilder.java:668)\r\n    \tat org.apache.axiom.om.impl.builder.StAXOMBuilder.next(StAXOMBuilder.java:214)\r\n    \t... 15 more\r\n\r\nAny idea on what could wrong with my code?","title":"apache axis2 com.ctc.wstx.exc.WstxUnexpectedCharException error","body":"<p>I working on a web service using apache <code>axis2</code>, I have generated client stub code from <code>wsdl</code> file how when I call the web service I'm getting this error:</p>\n\n<pre><code>org.apache.axis2.AxisFault: com.ctc.wstx.exc.WstxUnexpectedCharException: Unexpected character '\"' (code 34) in DOCTYPE declaration; expected a space between public and system identifiers\n at [row,col {unknown-source}]: [1,50]\n    at org.apache.axis2.AxisFault.makeFault(AxisFault.java:430)\n    at org.apache.axis2.transport.TransportUtils.createSOAPMessage(TransportUtils.java:123)\n    at org.apache.axis2.transport.TransportUtils.createSOAPMessage(TransportUtils.java:67)\n    at org.apache.axis2.description.OutInAxisOperationClient.handleResponse(OutInAxisOperation.java:354)\n    at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:421)\n    at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229)\n    at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165)\n    at org.csapi.www.wsdl.parlayx.sms.notification_manager.v2_3.service.SmsNotificationManagerServiceStub.startSmsNotification(SmsNotificationManagerServiceStub.java:618)\n    at org.csapi.www.wsdl.parlayx.sms.notification_manager.v2_3.service.Notification.startNotification(Notification.java:118)\n    at org.csapi.www.wsdl.parlayx.sms.notification_manager.v2_3.service.Notification.main(Notification.java:39)\nCaused by: org.apache.axiom.om.OMException: com.ctc.wstx.exc.WstxUnexpectedCharException: Unexpected character '\"' (code 34) in DOCTYPE declaration; expected a space between public and system identifiers\n at [row,col {unknown-source}]: [1,50]\n    at org.apache.axiom.om.impl.builder.StAXOMBuilder.next(StAXOMBuilder.java:296)\n    at org.apache.axiom.soap.impl.builder.StAXSOAPModelBuilder.getSOAPEnvelope(StAXSOAPModelBuilder.java:198)\n    at org.apache.axiom.soap.impl.builder.StAXSOAPModelBuilder.&lt;init&gt;(StAXSOAPModelBuilder.java:154)\n    at org.apache.axiom.soap.impl.builder.StAXSOAPModelBuilder.&lt;init&gt;(StAXSOAPModelBuilder.java:140)\n    at org.apache.axis2.builder.BuilderUtil.getSOAPBuilder(BuilderUtil.java:686)\n    at org.apache.axis2.transport.TransportUtils.createDocumentElement(TransportUtils.java:197)\n    at org.apache.axis2.transport.TransportUtils.createSOAPMessage(TransportUtils.java:145)\n    at org.apache.axis2.transport.TransportUtils.createSOAPMessage(TransportUtils.java:108)\n    ... 8 more\nCaused by: com.ctc.wstx.exc.WstxUnexpectedCharException: Unexpected character '\"' (code 34) in DOCTYPE declaration; expected a space between public and system identifiers\n at [row,col {unknown-source}]: [1,50]I working on a web service using apache axis2, i have generated client stub code from wsdl file how when i call the web service i'm getting this error:\n    at com.ctc.wstx.sr.StreamScanner.throwUnexpectedChar(StreamScanner.java:648)\n    at com.ctc.wstx.sr.BasicStreamReader.startDTD(BasicStreamReader.java:2482)\n    at com.ctc.wstx.sr.BasicStreamReader.nextFromPrologBang(BasicStreamReader.java:2398)\n    at com.ctc.wstx.sr.BasicStreamReader.nextFromProlog(BasicStreamReader.java:2058)\n    at com.ctc.wstx.sr.BasicStreamReader.next(BasicStreamReader.java:1069)\n    at org.apache.axiom.util.stax.wrapper.XMLStreamReaderWrapper.next(XMLStreamReaderWrapper.java:225)\n    at org.apache.axiom.om.impl.builder.StAXOMBuilder.parserNext(StAXOMBuilder.java:668)\n    at org.apache.axiom.om.impl.builder.StAXOMBuilder.next(StAXOMBuilder.java:214)\n    ... 15 more\n</code></pre>\n\n<p>Any idea on what could wrong with my code?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":551394,"reputation":8315,"user_id":916225,"accept_rate":69,"display_name":"seenukarthi"},"score":3,"creation_date":1582638924,"post_id":60396228,"comment_id":106840689,"body_markdown":"`id` is Long but you are passing `user` which is not a long.","body":"<code>id</code> is Long but you are passing <code>user</code> which is not a long."},{"owner":{"account_id":11939237,"reputation":1048,"user_id":8736602,"display_name":"yali"},"score":0,"creation_date":1582639049,"post_id":60396228,"comment_id":106840768,"body_markdown":"I edit my code, a user is a super path request","body":"I edit my code, a user is a super path request"}],"answers":[{"tags":[],"owner":{"account_id":9304187,"reputation":1405,"user_id":6908551,"display_name":"Alexandru Somai"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1582641737,"creation_date":1582639738,"answer_id":60396527,"question_id":60396228,"body_markdown":"You are mixing up `PathParam` with `PathVariable`.\r\n\r\nIn your example, I think what you need is the [`PathVariable`](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/bind/annotation/PathVariable.html). Moreover, you can remove the `name` field, since the parameter&#39;s name is the same: `id`. \r\n\r\nHere&#39;s the updated code:\r\n\r\n```Java\r\n@GetMapping(&quot;/{id}&quot;)\r\npublic ResponseData getUser(@PathVariable Long id) {\r\n   ...\r\n}\r\n```\r\n\r\nAlso, what you are looking for to define your `user` mappings under the same controller, is the [`RequestMapping`](https://www.baeldung.com/spring-requestmapping) annotation:\r\n\r\n```Java\r\n@RestController\r\n@RequestMapping(&quot;/user&quot;)\r\npublic class UserRestController {\r\n    ...\r\n}\r\n```","title":"@GetMapping and @GetMapping(&quot;/{id}&quot;) always return @GetMapping(&quot;/{id}&quot;)","body":"<p>You are mixing up <code>PathParam</code> with <code>PathVariable</code>.</p>\n\n<p>In your example, I think what you need is the <a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/bind/annotation/PathVariable.html\" rel=\"noreferrer\"><code>PathVariable</code></a>. Moreover, you can remove the <code>name</code> field, since the parameter's name is the same: <code>id</code>. </p>\n\n<p>Here's the updated code:</p>\n\n<pre><code>@GetMapping(\"/{id}\")\npublic ResponseData getUser(@PathVariable Long id) {\n   ...\n}\n</code></pre>\n\n<p>Also, what you are looking for to define your <code>user</code> mappings under the same controller, is the <a href=\"https://www.baeldung.com/spring-requestmapping\" rel=\"noreferrer\"><code>RequestMapping</code></a> annotation:</p>\n\n<pre><code>@RestController\n@RequestMapping(\"/user\")\npublic class UserRestController {\n    ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19748211,"reputation":519,"user_id":14460109,"display_name":"Yasiru Padmasiri"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1695660640,"creation_date":1622395989,"answer_id":67764048,"question_id":60396228,"body_markdown":"you can use this method\r\n\r\n```\r\n@GetMapping(&quot;/&quot;)\r\npublic ResponseData getUser(@RequestParam Long id)\r\n{\r\n  ResponseData responseData = new ResponseData();\r\n\r\n  //.......\r\n\r\n  return responseData;\r\n}\r\n```","title":"@GetMapping and @GetMapping(&quot;/{id}&quot;) always return @GetMapping(&quot;/{id}&quot;)","body":"<p>you can use this method</p>\n<pre><code>@GetMapping(&quot;/&quot;)\npublic ResponseData getUser(@RequestParam Long id)\n{\n  ResponseData responseData = new ResponseData();\n\n  //.......\n\n  return responseData;\n}\n</code></pre>\n"}],"owner":{"account_id":11939237,"reputation":1048,"user_id":8736602,"display_name":"yali"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12174,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":60396527,"answer_count":2,"score":3,"last_activity_date":1695660640,"creation_date":1582638763,"question_id":60396228,"body_markdown":"I have two methods @GetMapping and @GetMapping(&quot;/{id}&quot;)\r\n\r\n    @RestController(&quot;/user&quot;){\r\n    public class UserRestController {\r\n\r\n\t@GetMapping\r\n\tpublic ResponseData get() {\r\n          ...........\r\n\t\treturn responseData;\r\n\t}\r\n\r\n\t@GetMapping(&quot;/{id}&quot;)\r\n\tpublic ResponseData getUser(@PathParam(&quot;id&quot;) Long id) {\r\n\t\tResponseData responseData = new ResponseData();\r\n          ...........\r\n\t\treturn responseData;\r\n\t}\r\n\r\nWhen I hit a URL *`http://localhost:8080/user`* I took I @GetMapping(&quot;/{id}&quot;) method \r\nbecause it takes `id` null, how can I solve this issue?\r\n","title":"@GetMapping and @GetMapping(&quot;/{id}&quot;) always return @GetMapping(&quot;/{id}&quot;)","body":"<p>I have two methods @GetMapping and @GetMapping(\"/{id}\")</p>\n\n<pre><code>@RestController(\"/user\"){\npublic class UserRestController {\n\n@GetMapping\npublic ResponseData get() {\n      ...........\n    return responseData;\n}\n\n@GetMapping(\"/{id}\")\npublic ResponseData getUser(@PathParam(\"id\") Long id) {\n    ResponseData responseData = new ResponseData();\n      ...........\n    return responseData;\n}\n</code></pre>\n\n<p>When I hit a URL <em><code>http://localhost:8080/user</code></em> I took I @GetMapping(\"/{id}\") method \nbecause it takes <code>id</code> null, how can I solve this issue?</p>\n"},{"tags":["java","maven","pom.xml","solrj","solr-9.3.0"],"comments":[{"owner":{"account_id":3925658,"reputation":5569,"user_id":3246362,"display_name":"Sam"},"score":0,"creation_date":1695660670,"post_id":77174360,"comment_id":136051265,"body_markdown":"What happens if you create an empty project with SolrJ only? Or with your lib only?","body":"What happens if you create an empty project with SolrJ only? Or with your lib only?"}],"owner":{"account_id":12813879,"reputation":35,"user_id":9271107,"display_name":"Beqa Naveriani"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":124,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695659617,"creation_date":1695659617,"question_id":77174360,"body_markdown":"I&#39;m trying to upgrade current projects to SolrJ 9.3.0. To give you context we have a general indexing library that has dependency on SolrJ and concrete implementation of this lib to support indexing of different documents. \r\n\r\nWhen I upgraded SolrJ from 8.11.2 to 9.3.0, different issues occurred. Mainly, tests are failing because of transitive dependency classes aren&#39;t found, then in the concrete implementation project, it picks up 8.11.2 again instead of 9.3.0. I&#39;ve cleaned up .m2 repository but it again fetched 8.11.2. Then we tried to another machine but same behaviour happened there. I&#39;ll list all dependencies, dependency tree and issues that occurred. \r\n\r\nThanks\r\n\r\n**Indexing Lib dependencies:**\r\n\r\n[pom.xml URL for indexing lib](https://pastebin.com/F2SL0v37)\r\n\r\n**Indexing Lib Dependency Tree:**\r\n\r\n\r\n```\r\n[INFO] --- maven-dependency-plugin:3.3.0:tree (default-cli) @ search-solr-indexing-lib ---\r\n[INFO] com.xxx.search:search-solr-indexing-lib:jar:0.0.1-SNAPSHOT\r\n[INFO] +- org.springframework.boot:spring-boot-starter:jar:2.7.15:compile\r\n[INFO] |  +- org.springframework.boot:spring-boot:jar:2.7.15:compile\r\n[INFO] |  |  \\- org.springframework:spring-context:jar:5.3.29:compile\r\n[INFO] |  |     +- org.springframework:spring-beans:jar:5.3.29:compile\r\n[INFO] |  |     \\- org.springframework:spring-expression:jar:5.3.29:compile\r\n[INFO] |  +- org.springframework.boot:spring-boot-autoconfigure:jar:2.7.15:compile\r\n[INFO] |  +- org.springframework.boot:spring-boot-starter-logging:jar:2.7.15:compile\r\n[INFO] |  |  +- ch.qos.logback:logback-classic:jar:1.2.12:compile\r\n[INFO] |  |  |  \\- ch.qos.logback:logback-core:jar:1.2.12:compile\r\n[INFO] |  |  +- org.apache.logging.log4j:log4j-to-slf4j:jar:2.17.2:compile\r\n[INFO] |  |  |  \\- org.apache.logging.log4j:log4j-api:jar:2.17.2:compile\r\n[INFO] |  |  \\- org.slf4j:jul-to-slf4j:jar:1.7.36:compile\r\n[INFO] |  +- jakarta.annotation:jakarta.annotation-api:jar:1.3.5:compile\r\n[INFO] |  +- org.springframework:spring-core:jar:5.3.29:compile\r\n[INFO] |  |  \\- org.springframework:spring-jcl:jar:5.3.29:compile\r\n[INFO] |  \\- org.yaml:snakeyaml:jar:1.30:compile\r\n[INFO] +- org.springframework.boot:spring-boot-starter-data-redis:jar:2.7.15:compile\r\n[INFO] |  +- org.springframework.data:spring-data-redis:jar:2.7.15:compile\r\n[INFO] |  |  +- org.springframework.data:spring-data-keyvalue:jar:2.7.15:compile\r\n[INFO] |  |  |  \\- org.springframework.data:spring-data-commons:jar:2.7.15:compile\r\n[INFO] |  |  +- org.springframework:spring-tx:jar:5.3.29:compile\r\n[INFO] |  |  +- org.springframework:spring-oxm:jar:5.3.29:compile\r\n[INFO] |  |  +- org.springframework:spring-aop:jar:5.3.29:compile\r\n[INFO] |  |  \\- org.springframework:spring-context-support:jar:5.3.29:compile\r\n[INFO] |  \\- io.lettuce:lettuce-core:jar:6.1.10.RELEASE:compile\r\n[INFO] |     +- io.netty:netty-common:jar:4.1.97.Final:compile\r\n[INFO] |     +- io.netty:netty-handler:jar:4.1.97.Final:compile\r\n[INFO] |     |  +- io.netty:netty-resolver:jar:4.1.97.Final:compile\r\n[INFO] |     |  \\- io.netty:netty-transport-native-unix-common:jar:4.1.97.Final:compile\r\n[INFO] |     +- io.netty:netty-transport:jar:4.1.97.Final:compile\r\n[INFO] |     \\- io.projectreactor:reactor-core:jar:3.4.32:compile\r\n[INFO] +- org.springframework.boot:spring-boot-starter-test:jar:2.7.15:test\r\n[INFO] |  +- org.springframework.boot:spring-boot-test:jar:2.7.15:test\r\n[INFO] |  +- org.springframework.boot:spring-boot-test-autoconfigure:jar:2.7.15:test\r\n[INFO] |  +- com.jayway.jsonpath:json-path:jar:2.7.0:test\r\n[INFO] |  |  \\- net.minidev:json-smart:jar:2.4.11:test\r\n[INFO] |  |     \\- net.minidev:accessors-smart:jar:2.4.11:test\r\n[INFO] |  |        \\- org.ow2.asm:asm:jar:9.3:test\r\n[INFO] |  +- jakarta.xml.bind:jakarta.xml.bind-api:jar:2.3.3:test\r\n[INFO] |  |  \\- jakarta.activation:jakarta.activation-api:jar:1.2.2:test\r\n[INFO] |  +- org.assertj:assertj-core:jar:3.22.0:test\r\n[INFO] |  +- org.hamcrest:hamcrest:jar:2.2:test\r\n[INFO] |  +- org.junit.jupiter:junit-jupiter:jar:5.8.2:test\r\n[INFO] |  |  +- org.junit.jupiter:junit-jupiter-api:jar:5.8.2:test\r\n[INFO] |  |  |  +- org.opentest4j:opentest4j:jar:1.2.0:test\r\n[INFO] |  |  |  +- org.junit.platform:junit-platform-commons:jar:1.8.2:test\r\n[INFO] |  |  |  \\- org.apiguardian:apiguardian-api:jar:1.1.2:test\r\n[INFO] |  |  +- org.junit.jupiter:junit-jupiter-params:jar:5.8.2:test\r\n[INFO] |  |  \\- org.junit.jupiter:junit-jupiter-engine:jar:5.8.2:test\r\n[INFO] |  |     \\- org.junit.platform:junit-platform-engine:jar:1.8.2:test\r\n[INFO] |  +- org.mockito:mockito-core:jar:4.5.1:test\r\n[INFO] |  |  +- net.bytebuddy:byte-buddy:jar:1.12.23:test\r\n[INFO] |  |  +- net.bytebuddy:byte-buddy-agent:jar:1.12.23:test\r\n[INFO] |  |  \\- org.objenesis:objenesis:jar:3.2:test\r\n[INFO] |  +- org.mockito:mockito-junit-jupiter:jar:4.5.1:test\r\n[INFO] |  +- org.skyscreamer:jsonassert:jar:1.5.1:test\r\n[INFO] |  |  \\- com.vaadin.external.google:android-json:jar:0.0.20131108.vaadin1:test\r\n[INFO] |  +- org.springframework:spring-test:jar:5.3.29:test\r\n[INFO] |  \\- org.xmlunit:xmlunit-core:jar:2.9.1:test\r\n[INFO] +- com.google.code.gson:gson:jar:2.10.1:compile\r\n[INFO] +- io.github.resilience4j:resilience4j-retry:jar:1.7.1:compile\r\n[INFO] |  +- io.vavr:vavr:jar:0.10.2:compile\r\n[INFO] |  |  \\- io.vavr:vavr-match:jar:0.10.2:compile\r\n[INFO] |  +- io.github.resilience4j:resilience4j-core:jar:1.7.1:compile\r\n[INFO] |  \\- org.slf4j:slf4j-api:jar:1.7.36:compile\r\n[INFO] +- org.apache.solr:solr-solrj:jar:9.3.0:compile\r\n[INFO] |  +- org.eclipse.jetty.http2:http2-client:jar:9.4.51.v20230217:compile\r\n[INFO] |  |  +- org.eclipse.jetty.http2:http2-common:jar:9.4.51.v20230217:compile\r\n[INFO] |  |  |  \\- org.eclipse.jetty.http2:http2-hpack:jar:9.4.51.v20230217:compile\r\n[INFO] |  |  \\- org.eclipse.jetty:jetty-alpn-client:jar:9.4.51.v20230217:compile\r\n[INFO] |  +- org.apache.httpcomponents:httpmime:jar:4.5.14:compile\r\n[INFO] |  +- org.eclipse.jetty.http2:http2-http-client-transport:jar:9.4.51.v20230217:runtime\r\n[INFO] |  +- org.eclipse.jetty:jetty-http:jar:9.4.51.v20230217:compile\r\n[INFO] |  +- org.eclipse.jetty:jetty-client:jar:9.4.51.v20230217:runtime\r\n[INFO] |  +- org.eclipse.jetty:jetty-util:jar:9.4.51.v20230217:compile\r\n[INFO] |  +- org.eclipse.jetty:jetty-io:jar:9.4.51.v20230217:compile\r\n[INFO] |  +- org.apache.httpcomponents:httpclient:jar:4.5.14:compile\r\n[INFO] |  |  \\- commons-codec:commons-codec:jar:1.15:compile\r\n[INFO] |  +- org.apache.httpcomponents:httpcore:jar:4.4.16:compile\r\n[INFO] |  +- org.eclipse.jetty:jetty-alpn-java-client:jar:9.4.51.v20230217:runtime\r\n[INFO] |  +- org.apache.solr:solr-solrj-streaming:jar:9.3.0:runtime\r\n[INFO] |  |  \\- org.apache.commons:commons-math3:jar:3.6.1:runtime\r\n[INFO] |  \\- org.apache.solr:solr-solrj-zookeeper:jar:9.3.0:runtime\r\n[INFO] |     +- org.apache.zookeeper:zookeeper:jar:3.8.1:runtime\r\n[INFO] |     |  \\- io.netty:netty-transport-native-epoll:jar:4.1.97.Final:runtime\r\n[INFO] |     \\- org.apache.zookeeper:zookeeper-jute:jar:3.8.1:runtime\r\n[INFO] +- software.amazon.awssdk:s3:jar:2.15.0:compile\r\n[INFO] |  +- software.amazon.awssdk:aws-xml-protocol:jar:2.15.0:compile\r\n[INFO] |  |  \\- software.amazon.awssdk:aws-query-protocol:jar:2.15.0:compile\r\n[INFO] |  +- software.amazon.awssdk:protocol-core:jar:2.15.0:compile\r\n[INFO] |  +- software.amazon.awssdk:arns:jar:2.15.0:compile\r\n[INFO] |  +- software.amazon.awssdk:profiles:jar:2.15.0:compile\r\n[INFO] |  +- software.amazon.awssdk:sdk-core:jar:2.15.0:compile\r\n[INFO] |  |  \\- org.reactivestreams:reactive-streams:jar:1.0.4:compile\r\n[INFO] |  +- software.amazon.awssdk:http-client-spi:jar:2.15.0:compile\r\n[INFO] |  +- software.amazon.awssdk:regions:jar:2.15.0:compile\r\n[INFO] |  +- software.amazon.awssdk:annotations:jar:2.15.0:compile\r\n[INFO] |  +- software.amazon.awssdk:utils:jar:2.15.0:compile\r\n[INFO] |  +- software.amazon.awssdk:aws-core:jar:2.15.0:compile\r\n[INFO] |  +- software.amazon.awssdk:metrics-spi:jar:2.15.0:compile\r\n[INFO] |  +- software.amazon.awssdk:apache-client:jar:2.15.0:runtime\r\n[INFO] |  \\- software.amazon.awssdk:netty-nio-client:jar:2.15.0:runtime\r\n[INFO] |     +- io.netty:netty-codec-http:jar:4.1.97.Final:runtime\r\n[INFO] |     +- io.netty:netty-codec-http2:jar:4.1.97.Final:runtime\r\n[INFO] |     +- io.netty:netty-codec:jar:4.1.97.Final:compile\r\n[INFO] |     +- io.netty:netty-buffer:jar:4.1.97.Final:compile\r\n[INFO] |     +- io.netty:netty-transport-native-epoll:jar:linux-x86_64:4.1.97.Final:runtime\r\n[INFO] |     |  \\- io.netty:netty-transport-classes-epoll:jar:4.1.97.Final:runtime\r\n[INFO] |     \\- com.typesafe.netty:netty-reactive-streams-http:jar:2.0.4:runtime\r\n[INFO] |        \\- com.typesafe.netty:netty-reactive-streams:jar:2.0.4:runtime\r\n[INFO] +- software.amazon.awssdk:auth:jar:2.15.0:compile\r\n[INFO] |  +- com.fasterxml.jackson.core:jackson-databind:jar:2.13.5:compile\r\n[INFO] |  \\- software.amazon.eventstream:eventstream:jar:1.0.1:compile\r\n[INFO] +- org.apache.commons:commons-collections4:jar:4.4:compile\r\n[INFO] +- redis.clients:jedis:jar:3.9.0:compile\r\n[INFO] |  \\- org.apache.commons:commons-pool2:jar:2.11.1:compile\r\n[INFO] +- com.joyent.util:fast-md5:jar:2.7.1:compile\r\n[INFO] +- com.fasterxml.jackson.datatype:jackson-datatype-jsr310:jar:2.15.2:compile\r\n[INFO] |  \\- com.fasterxml.jackson.core:jackson-annotations:jar:2.13.5:compile\r\n[INFO] +- com.fasterxml.jackson.dataformat:jackson-dataformat-xml:jar:2.15.2:compile\r\n[INFO] |  +- org.codehaus.woodstox:stax2-api:jar:4.2.1:compile\r\n[INFO] |  \\- com.fasterxml.woodstox:woodstox-core:jar:6.5.1:compile\r\n[INFO] +- com.fasterxml.jackson.core:jackson-core:jar:2.15.2:compile\r\n[INFO] +- org.apache.commons:commons-lang3:jar:3.13.0:compile\r\n[INFO] +- commons-io:commons-io:jar:2.13.0:compile\r\n[INFO] +- com.google.api-client:google-api-client:jar:2.0.0:compile\r\n[INFO] |  +- com.google.oauth-client:google-oauth-client:jar:1.34.1:compile\r\n[INFO] |  +- com.google.http-client:google-http-client-gson:jar:1.42.1:compile\r\n[INFO] |  +- com.google.guava:guava:jar:31.1-jre:compile\r\n[INFO] |  |  +- com.google.guava:failureaccess:jar:1.0.1:compile\r\n[INFO] |  |  +- com.google.guava:listenablefuture:jar:9999.0-empty-to-avoid-conflict-with-guava:compile\r\n[INFO] |  |  +- com.google.errorprone:error_prone_annotations:jar:2.11.0:compile\r\n[INFO] |  |  \\- com.google.j2objc:j2objc-annotations:jar:1.3:compile\r\n[INFO] |  +- com.google.http-client:google-http-client-apache-v2:jar:1.42.1:compile\r\n[INFO] |  \\- com.google.http-client:google-http-client:jar:1.42.1:compile\r\n[INFO] |     +- io.opencensus:opencensus-api:jar:0.31.1:compile\r\n[INFO] |     |  \\- io.grpc:grpc-context:jar:1.27.2:compile\r\n[INFO] |     \\- io.opencensus:opencensus-contrib-http-util:jar:0.31.1:compile\r\n[INFO] +- com.google.oauth-client:google-oauth-client-jetty:jar:1.34.1:compile\r\n[INFO] |  \\- com.google.oauth-client:google-oauth-client-java6:jar:1.34.1:compile\r\n[INFO] +- com.google.apis:google-api-services-sheets:jar:v4-rev20220927-2.0.0:compile\r\n[INFO] +- com.google.auth:google-auth-library-oauth2-http:jar:1.19.0:compile\r\n[INFO] |  +- com.google.auto.value:auto-value-annotations:jar:1.10.1:compile\r\n[INFO] |  +- com.google.code.findbugs:jsr305:jar:3.0.2:compile\r\n[INFO] |  \\- com.google.auth:google-auth-library-credentials:jar:1.19.0:compile\r\n[INFO] +- com.oracle.database.jdbc:ojdbc10:jar:19.20.0.0:compile\r\n[INFO] +- org.postgresql:postgresql:jar:42.6.0:compile\r\n[INFO] |  \\- org.checkerframework:checker-qual:jar:3.31.0:compile\r\n[INFO] +- org.testcontainers:postgresql:jar:1.18.0:test\r\n[INFO] |  \\- org.testcontainers:jdbc:jar:1.18.0:test\r\n[INFO] |     \\- org.testcontainers:database-commons:jar:1.18.0:test\r\n[INFO] |        \\- org.testcontainers:testcontainers:jar:1.18.0:test\r\n[INFO] |           +- junit:junit:jar:4.13.2:test\r\n[INFO] |           |  \\- org.hamcrest:hamcrest-core:jar:2.2:test\r\n[INFO] |           +- org.apache.commons:commons-compress:jar:1.22:test\r\n[INFO] |           +- org.rnorth.duct-tape:duct-tape:jar:1.0.8:test\r\n[INFO] |           |  \\- org.jetbrains:annotations:jar:17.0.0:test\r\n[INFO] |           +- com.github.docker-java:docker-java-api:jar:3.3.0:test\r\n[INFO] |           \\- com.github.docker-java:docker-java-transport-zerodep:jar:3.3.0:test\r\n[INFO] |              +- com.github.docker-java:docker-java-transport:jar:3.3.0:test\r\n[INFO] |              \\- net.java.dev.jna:jna:jar:5.12.1:test\r\n[INFO] \\- org.testcontainers:oracle-xe:jar:1.19.0:test\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD SUCCESS\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  3.643 s\r\n[INFO] Finished at: 2023-09-25T20:01:50+04:00\r\n[INFO] ------------------------------------------------------------------------\r\n```\r\n\r\n\r\n\r\n**Indexing Lib Issues while running &quot;mvn clean install&quot;**\r\n\r\n\r\n```\r\nUnderlying exception : java.lang.IllegalArgumentException: Could not create type\r\n\tat com.XXX.search.service.SolrServiceImplTest.init(SolrServiceImplTest.java:41)\r\nCaused by: java.lang.IllegalArgumentException: Could not create type\r\n\tat com.XXX.search.service.SolrServiceImplTest.init(SolrServiceImplTest.java:41)\r\nCaused by: java.lang.NoClassDefFoundError: org/eclipse/jetty/http/HttpFields$Mutable\r\n\tat com.XXX.search.service.SolrServiceImplTest.init(SolrServiceImplTest.java:41)\r\nCaused by: java.lang.ClassNotFoundException: org.eclipse.jetty.http.HttpFields$Mutable\r\n\tat com.xxx.search.service.SolrServiceImplTest.init(SolrServiceImplTest.java:41)\r\n[ERROR] test_canRetryAddDocumentsIfStatusIsNonZero  Time elapsed: 0.004 s  &lt;&lt;&lt; ERROR!\r\norg.mockito.exceptions.base.MockitoException: \r\nMockito cannot mock this class: class org.apache.solr.client.solrj.impl.Http2SolrClient.\r\nMockito can only mock non-private &amp; non-final classes.\r\nIf you&#39;re not sure why you&#39;re getting this error, please report to the mailing list.\r\nJava               : 17\r\nJVM vendor name    : Amazon.com Inc.\r\nJVM vendor version : 17.0.8.1+8-LTS\r\nJVM name           : OpenJDK 64-Bit Server VM\r\nJVM version        : 17.0.8.1+8-LTS\r\nJVM info           : mixed mode, sharing\r\nOS name            : Windows 11\r\nOS version         : 10.0\r\n\r\n```\r\n\r\nNow let&#39;s say that I&#39;m not running the tests and able to build the project to check it&#39;s usage in concrete implementation of indexing job.\r\n\r\n**Concrete indexing job pom**\r\n[POM Link](https://pastebin.com/s7CB6K8K)\r\n\r\n\r\nIt&#39;s dependency tree says that the lib uses 8.11.2 when I have put 9.3.0 in pom and even lib recognizes 9.3.0 :) .m2 repo was cleaned and I&#39;ve build lib with 0.0.2-SNAPSHOT version that is even not in artifactory.. Here is dependency tree:\r\n\r\n\r\n```\r\n[INFO] --- maven-dependency-plugin:3.3.0:tree (default-cli) @ search-solr-indexing-rq ---\r\n[INFO] com.xxx.search:search-solr-indexing-rq:jar:0.0.1-SNAPSHOT\r\n[INFO] +- org.springframework.boot:spring-boot-starter:jar:2.7.15:compile\r\n[INFO] |  +- org.springframework.boot:spring-boot:jar:2.7.15:compile\r\n[INFO] |  |  \\- org.springframework:spring-context:jar:5.3.29:compile\r\n[INFO] |  |     +- org.springframework:spring-aop:jar:5.3.29:compile\r\n[INFO] |  |     +- org.springframework:spring-beans:jar:5.3.29:compile\r\n[INFO] |  |     \\- org.springframework:spring-expression:jar:5.3.29:compile\r\n[INFO] |  +- org.springframework.boot:spring-boot-autoconfigure:jar:2.7.15:compile\r\n[INFO] |  +- org.springframework.boot:spring-boot-starter-logging:jar:2.7.15:compile\r\n[INFO] |  |  +- ch.qos.logback:logback-classic:jar:1.2.12:compile\r\n[INFO] |  |  |  \\- ch.qos.logback:logback-core:jar:1.2.12:compile\r\n[INFO] |  |  +- org.apache.logging.log4j:log4j-to-slf4j:jar:2.17.2:compile\r\n[INFO] |  |  |  \\- org.apache.logging.log4j:log4j-api:jar:2.17.2:compile\r\n[INFO] |  |  \\- org.slf4j:jul-to-slf4j:jar:1.7.36:compile\r\n[INFO] |  +- jakarta.annotation:jakarta.annotation-api:jar:1.3.5:compile\r\n[INFO] |  +- org.springframework:spring-core:jar:5.3.29:compile\r\n[INFO] |  |  \\- org.springframework:spring-jcl:jar:5.3.29:compile\r\n[INFO] |  \\- org.yaml:snakeyaml:jar:1.30:compile\r\n[INFO] +- org.springframework.boot:spring-boot-starter-test:jar:2.7.15:test\r\n[INFO] |  +- org.springframework.boot:spring-boot-test:jar:2.7.15:test\r\n[INFO] |  +- org.springframework.boot:spring-boot-test-autoconfigure:jar:2.7.15:test\r\n[INFO] |  +- com.jayway.jsonpath:json-path:jar:2.7.0:test\r\n[INFO] |  |  +- net.minidev:json-smart:jar:2.4.11:test\r\n[INFO] |  |  |  \\- net.minidev:accessors-smart:jar:2.4.11:test\r\n[INFO] |  |  |     \\- org.ow2.asm:asm:jar:9.3:test\r\n[INFO] |  |  \\- org.slf4j:slf4j-api:jar:1.7.36:compile\r\n[INFO] |  +- jakarta.xml.bind:jakarta.xml.bind-api:jar:2.3.3:test\r\n[INFO] |  |  \\- jakarta.activation:jakarta.activation-api:jar:1.2.2:test\r\n[INFO] |  +- org.assertj:assertj-core:jar:3.22.0:test\r\n[INFO] |  +- org.hamcrest:hamcrest:jar:2.2:test\r\n[INFO] |  +- org.junit.jupiter:junit-jupiter:jar:5.8.2:test\r\n[INFO] |  |  +- org.junit.jupiter:junit-jupiter-api:jar:5.8.2:test\r\n[INFO] |  |  |  +- org.opentest4j:opentest4j:jar:1.2.0:test\r\n[INFO] |  |  |  +- org.junit.platform:junit-platform-commons:jar:1.8.2:test\r\n[INFO] |  |  |  \\- org.apiguardian:apiguardian-api:jar:1.1.2:test\r\n[INFO] |  |  +- org.junit.jupiter:junit-jupiter-params:jar:5.8.2:test\r\n[INFO] |  |  \\- org.junit.jupiter:junit-jupiter-engine:jar:5.8.2:test\r\n[INFO] |  |     \\- org.junit.platform:junit-platform-engine:jar:1.8.2:test\r\n[INFO] |  +- org.mockito:mockito-core:jar:4.5.1:test\r\n[INFO] |  |  +- net.bytebuddy:byte-buddy:jar:1.12.23:test\r\n[INFO] |  |  +- net.bytebuddy:byte-buddy-agent:jar:1.12.23:test\r\n[INFO] |  |  \\- org.objenesis:objenesis:jar:3.2:test\r\n[INFO] |  +- org.mockito:mockito-junit-jupiter:jar:4.5.1:test\r\n[INFO] |  +- org.skyscreamer:jsonassert:jar:1.5.1:test\r\n[INFO] |  |  \\- com.vaadin.external.google:android-json:jar:0.0.20131108.vaadin1:test\r\n[INFO] |  +- org.springframework:spring-test:jar:5.3.29:test\r\n[INFO] |  \\- org.xmlunit:xmlunit-core:jar:2.9.1:test\r\n[INFO] \\- com.xxx.search:search-solr-indexing-lib:jar:0.0.2-SNAPSHOT:compile\r\n[INFO]    +- org.springframework.boot:spring-boot-starter-data-redis:jar:2.7.15:compile\r\n[INFO]    |  +- org.springframework.data:spring-data-redis:jar:2.7.15:compile\r\n[INFO]    |  |  +- org.springframework.data:spring-data-keyvalue:jar:2.7.15:compile\r\n[INFO]    |  |  |  \\- org.springframework.data:spring-data-commons:jar:2.7.15:compile\r\n[INFO]    |  |  +- org.springframework:spring-tx:jar:5.3.29:compile\r\n[INFO]    |  |  +- org.springframework:spring-oxm:jar:5.3.29:compile\r\n[INFO]    |  |  \\- org.springframework:spring-context-support:jar:5.3.29:compile\r\n[INFO]    |  \\- io.lettuce:lettuce-core:jar:6.1.10.RELEASE:compile\r\n[INFO]    |     \\- io.projectreactor:reactor-core:jar:3.4.32:compile\r\n[INFO]    +- com.google.code.gson:gson:jar:2.9.1:compile\r\n[INFO]    +- io.github.resilience4j:resilience4j-retry:jar:1.7.1:compile\r\n[INFO]    |  +- io.vavr:vavr:jar:0.10.2:compile\r\n[INFO]    |  |  \\- io.vavr:vavr-match:jar:0.10.2:compile\r\n[INFO]    |  \\- io.github.resilience4j:resilience4j-core:jar:1.7.1:compile\r\n[INFO]    +- org.apache.solr:solr-solrj:jar:8.11.2:compile\r\n[INFO]    |  +- com.fasterxml.woodstox:woodstox-core:jar:6.2.4:compile\r\n[INFO]    |  +- commons-lang:commons-lang:jar:2.6:compile\r\n[INFO]    |  +- io.netty:netty-buffer:jar:4.1.97.Final:compile\r\n[INFO]    |  +- io.netty:netty-codec:jar:4.1.97.Final:compile\r\n[INFO]    |  +- io.netty:netty-common:jar:4.1.97.Final:compile\r\n[INFO]    |  +- io.netty:netty-handler:jar:4.1.97.Final:compile\r\n[INFO]    |  +- io.netty:netty-resolver:jar:4.1.97.Final:compile\r\n[INFO]    |  +- io.netty:netty-transport:jar:4.1.97.Final:compile\r\n[INFO]    |  +- io.netty:netty-transport-native-epoll:jar:4.1.97.Final:compile\r\n[INFO]    |  |  \\- io.netty:netty-transport-classes-epoll:jar:4.1.97.Final:compile\r\n[INFO]    |  +- io.netty:netty-transport-native-unix-common:jar:4.1.97.Final:compile\r\n[INFO]    |  +- org.apache.commons:commons-math3:jar:3.6.1:compile\r\n[INFO]    |  +- org.apache.httpcomponents:httpclient:jar:4.5.14:compile\r\n[INFO]    |  +- org.apache.httpcomponents:httpcore:jar:4.4.16:compile\r\n[INFO]    |  +- org.apache.httpcomponents:httpmime:jar:4.5.14:compile\r\n[INFO]    |  +- org.apache.zookeeper:zookeeper:jar:3.6.2:compile\r\n[INFO]    |  +- org.apache.zookeeper:zookeeper-jute:jar:3.6.2:compile\r\n[INFO]    |  +- org.codehaus.woodstox:stax2-api:jar:4.2.1:compile\r\n[INFO]    |  +- org.eclipse.jetty:jetty-alpn-client:jar:9.4.51.v20230217:compile\r\n[INFO]    |  +- org.eclipse.jetty:jetty-alpn-java-client:jar:9.4.51.v20230217:compile\r\n[INFO]    |  +- org.eclipse.jetty:jetty-client:jar:9.4.51.v20230217:compile\r\n[INFO]    |  +- org.eclipse.jetty:jetty-http:jar:9.4.51.v20230217:compile\r\n[INFO]    |  +- org.eclipse.jetty:jetty-io:jar:9.4.51.v20230217:compile\r\n[INFO]    |  +- org.eclipse.jetty:jetty-util:jar:9.4.51.v20230217:compile\r\n[INFO]    |  +- org.eclipse.jetty.http2:http2-client:jar:9.4.51.v20230217:compile\r\n[INFO]    |  +- org.eclipse.jetty.http2:http2-common:jar:9.4.51.v20230217:compile\r\n[INFO]    |  +- org.eclipse.jetty.http2:http2-hpack:jar:9.4.51.v20230217:compile\r\n[INFO]    |  +- org.eclipse.jetty.http2:http2-http-client-transport:jar:9.4.51.v20230217:compile\r\n[INFO]    |  \\- org.xerial.snappy:snappy-java:jar:1.1.7.6:compile\r\n[INFO]    +- software.amazon.awssdk:s3:jar:2.15.0:compile\r\n[INFO]    |  +- software.amazon.awssdk:aws-xml-protocol:jar:2.15.0:compile\r\n[INFO]    |  |  \\- software.amazon.awssdk:aws-query-protocol:jar:2.15.0:compile\r\n[INFO]    |  +- software.amazon.awssdk:protocol-core:jar:2.15.0:compile\r\n[INFO]    |  +- software.amazon.awssdk:arns:jar:2.15.0:compile\r\n[INFO]    |  +- software.amazon.awssdk:profiles:jar:2.15.0:compile\r\n[INFO]    |  +- software.amazon.awssdk:sdk-core:jar:2.15.0:compile\r\n[INFO]    |  |  \\- org.reactivestreams:reactive-streams:jar:1.0.4:compile\r\n[INFO]    |  +- software.amazon.awssdk:http-client-spi:jar:2.15.0:compile\r\n[INFO]    |  +- software.amazon.awssdk:regions:jar:2.15.0:compile\r\n[INFO]    |  +- software.amazon.awssdk:annotations:jar:2.15.0:compile\r\n[INFO]    |  +- software.amazon.awssdk:utils:jar:2.15.0:compile\r\n[INFO]    |  +- software.amazon.awssdk:aws-core:jar:2.15.0:compile\r\n[INFO]    |  +- software.amazon.awssdk:metrics-spi:jar:2.15.0:compile\r\n[INFO]    |  +- software.amazon.awssdk:apache-client:jar:2.15.0:runtime\r\n[INFO]    |  \\- software.amazon.awssdk:netty-nio-client:jar:2.15.0:runtime\r\n[INFO]    |     +- io.netty:netty-codec-http:jar:4.1.97.Final:runtime\r\n[INFO]    |     +- io.netty:netty-codec-http2:jar:4.1.97.Final:runtime\r\n[INFO]    |     +- io.netty:netty-transport-native-epoll:jar:linux-x86_64:4.1.97.Final:runtime\r\n[INFO]    |     \\- com.typesafe.netty:netty-reactive-streams-http:jar:2.0.4:runtime\r\n[INFO]    |        \\- com.typesafe.netty:netty-reactive-streams:jar:2.0.4:runtime\r\n[INFO]    +- software.amazon.awssdk:auth:jar:2.15.0:compile\r\n[INFO]    |  +- com.fasterxml.jackson.core:jackson-databind:jar:2.13.5:compile\r\n[INFO]    |  \\- software.amazon.eventstream:eventstream:jar:1.0.1:compile\r\n[INFO]    +- org.apache.commons:commons-collections4:jar:4.4:compile\r\n[INFO]    +- redis.clients:jedis:jar:3.8.0:compile\r\n[INFO]    |  \\- org.apache.commons:commons-pool2:jar:2.11.1:compile\r\n[INFO]    +- com.joyent.util:fast-md5:jar:2.7.1:compile\r\n[INFO]    +- com.fasterxml.jackson.datatype:jackson-datatype-jsr310:jar:2.13.5:compile\r\n[INFO]    |  \\- com.fasterxml.jackson.core:jackson-annotations:jar:2.13.5:compile\r\n[INFO]    +- com.fasterxml.jackson.dataformat:jackson-dataformat-xml:jar:2.13.5:compile\r\n[INFO]    +- com.fasterxml.jackson.core:jackson-core:jar:2.13.5:compile\r\n[INFO]    +- org.apache.commons:commons-lang3:jar:3.12.0:compile\r\n[INFO]    +- commons-io:commons-io:jar:2.13.0:compile\r\n[INFO]    +- com.google.api-client:google-api-client:jar:2.0.0:compile\r\n[INFO]    |  +- com.google.oauth-client:google-oauth-client:jar:1.34.1:compile\r\n[INFO]    |  +- com.google.http-client:google-http-client-gson:jar:1.42.1:compile\r\n[INFO]    |  +- com.google.guava:guava:jar:31.1-jre:compile\r\n[INFO]    |  |  +- com.google.guava:failureaccess:jar:1.0.1:compile\r\n[INFO]    |  |  +- com.google.guava:listenablefuture:jar:9999.0-empty-to-avoid-conflict-with-guava:compile\r\n[INFO]    |  |  +- com.google.errorprone:error_prone_annotations:jar:2.11.0:compile\r\n[INFO]    |  |  \\- com.google.j2objc:j2objc-annotations:jar:1.3:compile\r\n[INFO]    |  +- com.google.http-client:google-http-client-apache-v2:jar:1.42.1:compile\r\n[INFO]    |  \\- com.google.http-client:google-http-client:jar:1.42.1:compile\r\n[INFO]    |     +- io.opencensus:opencensus-api:jar:0.31.1:compile\r\n[INFO]    |     |  \\- io.grpc:grpc-context:jar:1.27.2:compile\r\n[INFO]    |     \\- io.opencensus:opencensus-contrib-http-util:jar:0.31.1:compile\r\n[INFO]    +- com.google.oauth-client:google-oauth-client-jetty:jar:1.34.1:compile\r\n[INFO]    |  \\- com.google.oauth-client:google-oauth-client-java6:jar:1.34.1:compile\r\n[INFO]    +- com.google.apis:google-api-services-sheets:jar:v4-rev20220927-2.0.0:compile\r\n[INFO]    +- com.google.auth:google-auth-library-oauth2-http:jar:1.19.0:compile\r\n[INFO]    |  +- com.google.auto.value:auto-value-annotations:jar:1.10.1:compile\r\n[INFO]    |  +- com.google.code.findbugs:jsr305:jar:3.0.2:compile\r\n[INFO]    |  \\- com.google.auth:google-auth-library-credentials:jar:1.19.0:compile\r\n[INFO]    +- com.oracle.database.jdbc:ojdbc10:jar:19.20.0.0:compile\r\n[INFO]    \\- org.postgresql:postgresql:jar:42.3.8:compile\r\n[INFO]       \\- org.checkerframework:checker-qual:jar:3.5.0:compile\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD SUCCESS\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  3.501 s\r\n[INFO] Finished at: 2023-09-25T20:12:06+04:00\r\n[INFO] ------------------------------------------------------------------------\r\n\r\n```\r\n\r\n\r\n**And then on runtime we get this error**\r\n\r\n\r\n```\r\njava.lang.NoSuchMethodError: &#39;org.apache.solr.client.solrj.impl.Http2SolrClient$Builder org.apache.solr.client.solrj.impl.Http2SolrClient$Builder.withResponseParser(org.apache.solr.client.solrj.ResponseParser)&#39;\r\n\tat com.xxx.search.service.impl.SolrServiceImpl.initSolrClient(SolrServiceImpl.java:144) ~[search-solr-indexing-lib-0.0.2-SNAPSHOT.jar:0.0.2-SNAPSHOT]\r\n\tat com.xxx.search.service.impl.SolrServiceImpl.&lt;init&gt;(SolrServiceImpl.java:38) ~[search-solr-indexing-lib-0.0.2-SNAPSHOT.jar:0.0.2-SNAPSHOT]\r\n\tat com.xxx.search.util.SolrServiceFactory.lambda$getSolrServices$0(SolrServiceFactory.java:26) ~[search-solr-indexing-lib-0.0.2-SNAPSHOT.jar:0.0.2-SNAPSHOT]\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195) ~[na:na]\r\n\tat java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:948) ~[na:na]\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484) ~[na:na]\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474) ~[na:na]\r\n\tat java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:913) ~[na:na]\r\n\tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]\r\n\tat java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:578) ~[na:na]\r\n\tat com.xxx.search.util.SolrServiceFactory.lambda$getSolrServices$1(SolrServiceFactory.java:26) ~[search-solr-indexing-lib-0.0.2-SNAPSHOT.jar:0.0.2-SNAPSHOT]\r\n\tat java.base/java.util.HashMap.computeIfAbsent(HashMap.java:1134) ~[na:na]\r\n\tat com.xxx.search.util.SolrServiceFactory.getSolrServices(SolrServiceFactory.java:26) ~[search-solr-indexing-lib-0.0.2-SNAPSHOT.jar:0.0.2-SNAPSHOT]\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195) ~[na:na]\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195) ~[na:na]\r\n```\r\n\r\n\r\n\r\n\r\nI&#39;ve tried to add transitive dependencies manually but issue is still there.\r\n\r\n\r\n```\r\n[Transitive dependency list](https://pastebin.com/47zJatcm)\r\n```\r\n","title":"SolrJ 9.3.0 Upgrade issues","body":"<p>I'm trying to upgrade current projects to SolrJ 9.3.0. To give you context we have a general indexing library that has dependency on SolrJ and concrete implementation of this lib to support indexing of different documents.</p>\n<p>When I upgraded SolrJ from 8.11.2 to 9.3.0, different issues occurred. Mainly, tests are failing because of transitive dependency classes aren't found, then in the concrete implementation project, it picks up 8.11.2 again instead of 9.3.0. I've cleaned up .m2 repository but it again fetched 8.11.2. Then we tried to another machine but same behaviour happened there. I'll list all dependencies, dependency tree and issues that occurred.</p>\n<p>Thanks</p>\n<p><strong>Indexing Lib dependencies:</strong></p>\n<p><a href=\"https://pastebin.com/F2SL0v37\" rel=\"nofollow noreferrer\">pom.xml URL for indexing lib</a></p>\n<p><strong>Indexing Lib Dependency Tree:</strong></p>\n<pre><code>[INFO] --- maven-dependency-plugin:3.3.0:tree (default-cli) @ search-solr-indexing-lib ---\n[INFO] com.xxx.search:search-solr-indexing-lib:jar:0.0.1-SNAPSHOT\n[INFO] +- org.springframework.boot:spring-boot-starter:jar:2.7.15:compile\n[INFO] |  +- org.springframework.boot:spring-boot:jar:2.7.15:compile\n[INFO] |  |  \\- org.springframework:spring-context:jar:5.3.29:compile\n[INFO] |  |     +- org.springframework:spring-beans:jar:5.3.29:compile\n[INFO] |  |     \\- org.springframework:spring-expression:jar:5.3.29:compile\n[INFO] |  +- org.springframework.boot:spring-boot-autoconfigure:jar:2.7.15:compile\n[INFO] |  +- org.springframework.boot:spring-boot-starter-logging:jar:2.7.15:compile\n[INFO] |  |  +- ch.qos.logback:logback-classic:jar:1.2.12:compile\n[INFO] |  |  |  \\- ch.qos.logback:logback-core:jar:1.2.12:compile\n[INFO] |  |  +- org.apache.logging.log4j:log4j-to-slf4j:jar:2.17.2:compile\n[INFO] |  |  |  \\- org.apache.logging.log4j:log4j-api:jar:2.17.2:compile\n[INFO] |  |  \\- org.slf4j:jul-to-slf4j:jar:1.7.36:compile\n[INFO] |  +- jakarta.annotation:jakarta.annotation-api:jar:1.3.5:compile\n[INFO] |  +- org.springframework:spring-core:jar:5.3.29:compile\n[INFO] |  |  \\- org.springframework:spring-jcl:jar:5.3.29:compile\n[INFO] |  \\- org.yaml:snakeyaml:jar:1.30:compile\n[INFO] +- org.springframework.boot:spring-boot-starter-data-redis:jar:2.7.15:compile\n[INFO] |  +- org.springframework.data:spring-data-redis:jar:2.7.15:compile\n[INFO] |  |  +- org.springframework.data:spring-data-keyvalue:jar:2.7.15:compile\n[INFO] |  |  |  \\- org.springframework.data:spring-data-commons:jar:2.7.15:compile\n[INFO] |  |  +- org.springframework:spring-tx:jar:5.3.29:compile\n[INFO] |  |  +- org.springframework:spring-oxm:jar:5.3.29:compile\n[INFO] |  |  +- org.springframework:spring-aop:jar:5.3.29:compile\n[INFO] |  |  \\- org.springframework:spring-context-support:jar:5.3.29:compile\n[INFO] |  \\- io.lettuce:lettuce-core:jar:6.1.10.RELEASE:compile\n[INFO] |     +- io.netty:netty-common:jar:4.1.97.Final:compile\n[INFO] |     +- io.netty:netty-handler:jar:4.1.97.Final:compile\n[INFO] |     |  +- io.netty:netty-resolver:jar:4.1.97.Final:compile\n[INFO] |     |  \\- io.netty:netty-transport-native-unix-common:jar:4.1.97.Final:compile\n[INFO] |     +- io.netty:netty-transport:jar:4.1.97.Final:compile\n[INFO] |     \\- io.projectreactor:reactor-core:jar:3.4.32:compile\n[INFO] +- org.springframework.boot:spring-boot-starter-test:jar:2.7.15:test\n[INFO] |  +- org.springframework.boot:spring-boot-test:jar:2.7.15:test\n[INFO] |  +- org.springframework.boot:spring-boot-test-autoconfigure:jar:2.7.15:test\n[INFO] |  +- com.jayway.jsonpath:json-path:jar:2.7.0:test\n[INFO] |  |  \\- net.minidev:json-smart:jar:2.4.11:test\n[INFO] |  |     \\- net.minidev:accessors-smart:jar:2.4.11:test\n[INFO] |  |        \\- org.ow2.asm:asm:jar:9.3:test\n[INFO] |  +- jakarta.xml.bind:jakarta.xml.bind-api:jar:2.3.3:test\n[INFO] |  |  \\- jakarta.activation:jakarta.activation-api:jar:1.2.2:test\n[INFO] |  +- org.assertj:assertj-core:jar:3.22.0:test\n[INFO] |  +- org.hamcrest:hamcrest:jar:2.2:test\n[INFO] |  +- org.junit.jupiter:junit-jupiter:jar:5.8.2:test\n[INFO] |  |  +- org.junit.jupiter:junit-jupiter-api:jar:5.8.2:test\n[INFO] |  |  |  +- org.opentest4j:opentest4j:jar:1.2.0:test\n[INFO] |  |  |  +- org.junit.platform:junit-platform-commons:jar:1.8.2:test\n[INFO] |  |  |  \\- org.apiguardian:apiguardian-api:jar:1.1.2:test\n[INFO] |  |  +- org.junit.jupiter:junit-jupiter-params:jar:5.8.2:test\n[INFO] |  |  \\- org.junit.jupiter:junit-jupiter-engine:jar:5.8.2:test\n[INFO] |  |     \\- org.junit.platform:junit-platform-engine:jar:1.8.2:test\n[INFO] |  +- org.mockito:mockito-core:jar:4.5.1:test\n[INFO] |  |  +- net.bytebuddy:byte-buddy:jar:1.12.23:test\n[INFO] |  |  +- net.bytebuddy:byte-buddy-agent:jar:1.12.23:test\n[INFO] |  |  \\- org.objenesis:objenesis:jar:3.2:test\n[INFO] |  +- org.mockito:mockito-junit-jupiter:jar:4.5.1:test\n[INFO] |  +- org.skyscreamer:jsonassert:jar:1.5.1:test\n[INFO] |  |  \\- com.vaadin.external.google:android-json:jar:0.0.20131108.vaadin1:test\n[INFO] |  +- org.springframework:spring-test:jar:5.3.29:test\n[INFO] |  \\- org.xmlunit:xmlunit-core:jar:2.9.1:test\n[INFO] +- com.google.code.gson:gson:jar:2.10.1:compile\n[INFO] +- io.github.resilience4j:resilience4j-retry:jar:1.7.1:compile\n[INFO] |  +- io.vavr:vavr:jar:0.10.2:compile\n[INFO] |  |  \\- io.vavr:vavr-match:jar:0.10.2:compile\n[INFO] |  +- io.github.resilience4j:resilience4j-core:jar:1.7.1:compile\n[INFO] |  \\- org.slf4j:slf4j-api:jar:1.7.36:compile\n[INFO] +- org.apache.solr:solr-solrj:jar:9.3.0:compile\n[INFO] |  +- org.eclipse.jetty.http2:http2-client:jar:9.4.51.v20230217:compile\n[INFO] |  |  +- org.eclipse.jetty.http2:http2-common:jar:9.4.51.v20230217:compile\n[INFO] |  |  |  \\- org.eclipse.jetty.http2:http2-hpack:jar:9.4.51.v20230217:compile\n[INFO] |  |  \\- org.eclipse.jetty:jetty-alpn-client:jar:9.4.51.v20230217:compile\n[INFO] |  +- org.apache.httpcomponents:httpmime:jar:4.5.14:compile\n[INFO] |  +- org.eclipse.jetty.http2:http2-http-client-transport:jar:9.4.51.v20230217:runtime\n[INFO] |  +- org.eclipse.jetty:jetty-http:jar:9.4.51.v20230217:compile\n[INFO] |  +- org.eclipse.jetty:jetty-client:jar:9.4.51.v20230217:runtime\n[INFO] |  +- org.eclipse.jetty:jetty-util:jar:9.4.51.v20230217:compile\n[INFO] |  +- org.eclipse.jetty:jetty-io:jar:9.4.51.v20230217:compile\n[INFO] |  +- org.apache.httpcomponents:httpclient:jar:4.5.14:compile\n[INFO] |  |  \\- commons-codec:commons-codec:jar:1.15:compile\n[INFO] |  +- org.apache.httpcomponents:httpcore:jar:4.4.16:compile\n[INFO] |  +- org.eclipse.jetty:jetty-alpn-java-client:jar:9.4.51.v20230217:runtime\n[INFO] |  +- org.apache.solr:solr-solrj-streaming:jar:9.3.0:runtime\n[INFO] |  |  \\- org.apache.commons:commons-math3:jar:3.6.1:runtime\n[INFO] |  \\- org.apache.solr:solr-solrj-zookeeper:jar:9.3.0:runtime\n[INFO] |     +- org.apache.zookeeper:zookeeper:jar:3.8.1:runtime\n[INFO] |     |  \\- io.netty:netty-transport-native-epoll:jar:4.1.97.Final:runtime\n[INFO] |     \\- org.apache.zookeeper:zookeeper-jute:jar:3.8.1:runtime\n[INFO] +- software.amazon.awssdk:s3:jar:2.15.0:compile\n[INFO] |  +- software.amazon.awssdk:aws-xml-protocol:jar:2.15.0:compile\n[INFO] |  |  \\- software.amazon.awssdk:aws-query-protocol:jar:2.15.0:compile\n[INFO] |  +- software.amazon.awssdk:protocol-core:jar:2.15.0:compile\n[INFO] |  +- software.amazon.awssdk:arns:jar:2.15.0:compile\n[INFO] |  +- software.amazon.awssdk:profiles:jar:2.15.0:compile\n[INFO] |  +- software.amazon.awssdk:sdk-core:jar:2.15.0:compile\n[INFO] |  |  \\- org.reactivestreams:reactive-streams:jar:1.0.4:compile\n[INFO] |  +- software.amazon.awssdk:http-client-spi:jar:2.15.0:compile\n[INFO] |  +- software.amazon.awssdk:regions:jar:2.15.0:compile\n[INFO] |  +- software.amazon.awssdk:annotations:jar:2.15.0:compile\n[INFO] |  +- software.amazon.awssdk:utils:jar:2.15.0:compile\n[INFO] |  +- software.amazon.awssdk:aws-core:jar:2.15.0:compile\n[INFO] |  +- software.amazon.awssdk:metrics-spi:jar:2.15.0:compile\n[INFO] |  +- software.amazon.awssdk:apache-client:jar:2.15.0:runtime\n[INFO] |  \\- software.amazon.awssdk:netty-nio-client:jar:2.15.0:runtime\n[INFO] |     +- io.netty:netty-codec-http:jar:4.1.97.Final:runtime\n[INFO] |     +- io.netty:netty-codec-http2:jar:4.1.97.Final:runtime\n[INFO] |     +- io.netty:netty-codec:jar:4.1.97.Final:compile\n[INFO] |     +- io.netty:netty-buffer:jar:4.1.97.Final:compile\n[INFO] |     +- io.netty:netty-transport-native-epoll:jar:linux-x86_64:4.1.97.Final:runtime\n[INFO] |     |  \\- io.netty:netty-transport-classes-epoll:jar:4.1.97.Final:runtime\n[INFO] |     \\- com.typesafe.netty:netty-reactive-streams-http:jar:2.0.4:runtime\n[INFO] |        \\- com.typesafe.netty:netty-reactive-streams:jar:2.0.4:runtime\n[INFO] +- software.amazon.awssdk:auth:jar:2.15.0:compile\n[INFO] |  +- com.fasterxml.jackson.core:jackson-databind:jar:2.13.5:compile\n[INFO] |  \\- software.amazon.eventstream:eventstream:jar:1.0.1:compile\n[INFO] +- org.apache.commons:commons-collections4:jar:4.4:compile\n[INFO] +- redis.clients:jedis:jar:3.9.0:compile\n[INFO] |  \\- org.apache.commons:commons-pool2:jar:2.11.1:compile\n[INFO] +- com.joyent.util:fast-md5:jar:2.7.1:compile\n[INFO] +- com.fasterxml.jackson.datatype:jackson-datatype-jsr310:jar:2.15.2:compile\n[INFO] |  \\- com.fasterxml.jackson.core:jackson-annotations:jar:2.13.5:compile\n[INFO] +- com.fasterxml.jackson.dataformat:jackson-dataformat-xml:jar:2.15.2:compile\n[INFO] |  +- org.codehaus.woodstox:stax2-api:jar:4.2.1:compile\n[INFO] |  \\- com.fasterxml.woodstox:woodstox-core:jar:6.5.1:compile\n[INFO] +- com.fasterxml.jackson.core:jackson-core:jar:2.15.2:compile\n[INFO] +- org.apache.commons:commons-lang3:jar:3.13.0:compile\n[INFO] +- commons-io:commons-io:jar:2.13.0:compile\n[INFO] +- com.google.api-client:google-api-client:jar:2.0.0:compile\n[INFO] |  +- com.google.oauth-client:google-oauth-client:jar:1.34.1:compile\n[INFO] |  +- com.google.http-client:google-http-client-gson:jar:1.42.1:compile\n[INFO] |  +- com.google.guava:guava:jar:31.1-jre:compile\n[INFO] |  |  +- com.google.guava:failureaccess:jar:1.0.1:compile\n[INFO] |  |  +- com.google.guava:listenablefuture:jar:9999.0-empty-to-avoid-conflict-with-guava:compile\n[INFO] |  |  +- com.google.errorprone:error_prone_annotations:jar:2.11.0:compile\n[INFO] |  |  \\- com.google.j2objc:j2objc-annotations:jar:1.3:compile\n[INFO] |  +- com.google.http-client:google-http-client-apache-v2:jar:1.42.1:compile\n[INFO] |  \\- com.google.http-client:google-http-client:jar:1.42.1:compile\n[INFO] |     +- io.opencensus:opencensus-api:jar:0.31.1:compile\n[INFO] |     |  \\- io.grpc:grpc-context:jar:1.27.2:compile\n[INFO] |     \\- io.opencensus:opencensus-contrib-http-util:jar:0.31.1:compile\n[INFO] +- com.google.oauth-client:google-oauth-client-jetty:jar:1.34.1:compile\n[INFO] |  \\- com.google.oauth-client:google-oauth-client-java6:jar:1.34.1:compile\n[INFO] +- com.google.apis:google-api-services-sheets:jar:v4-rev20220927-2.0.0:compile\n[INFO] +- com.google.auth:google-auth-library-oauth2-http:jar:1.19.0:compile\n[INFO] |  +- com.google.auto.value:auto-value-annotations:jar:1.10.1:compile\n[INFO] |  +- com.google.code.findbugs:jsr305:jar:3.0.2:compile\n[INFO] |  \\- com.google.auth:google-auth-library-credentials:jar:1.19.0:compile\n[INFO] +- com.oracle.database.jdbc:ojdbc10:jar:19.20.0.0:compile\n[INFO] +- org.postgresql:postgresql:jar:42.6.0:compile\n[INFO] |  \\- org.checkerframework:checker-qual:jar:3.31.0:compile\n[INFO] +- org.testcontainers:postgresql:jar:1.18.0:test\n[INFO] |  \\- org.testcontainers:jdbc:jar:1.18.0:test\n[INFO] |     \\- org.testcontainers:database-commons:jar:1.18.0:test\n[INFO] |        \\- org.testcontainers:testcontainers:jar:1.18.0:test\n[INFO] |           +- junit:junit:jar:4.13.2:test\n[INFO] |           |  \\- org.hamcrest:hamcrest-core:jar:2.2:test\n[INFO] |           +- org.apache.commons:commons-compress:jar:1.22:test\n[INFO] |           +- org.rnorth.duct-tape:duct-tape:jar:1.0.8:test\n[INFO] |           |  \\- org.jetbrains:annotations:jar:17.0.0:test\n[INFO] |           +- com.github.docker-java:docker-java-api:jar:3.3.0:test\n[INFO] |           \\- com.github.docker-java:docker-java-transport-zerodep:jar:3.3.0:test\n[INFO] |              +- com.github.docker-java:docker-java-transport:jar:3.3.0:test\n[INFO] |              \\- net.java.dev.jna:jna:jar:5.12.1:test\n[INFO] \\- org.testcontainers:oracle-xe:jar:1.19.0:test\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  3.643 s\n[INFO] Finished at: 2023-09-25T20:01:50+04:00\n[INFO] ------------------------------------------------------------------------\n</code></pre>\n<p><strong>Indexing Lib Issues while running &quot;mvn clean install&quot;</strong></p>\n<pre><code>Underlying exception : java.lang.IllegalArgumentException: Could not create type\n    at com.XXX.search.service.SolrServiceImplTest.init(SolrServiceImplTest.java:41)\nCaused by: java.lang.IllegalArgumentException: Could not create type\n    at com.XXX.search.service.SolrServiceImplTest.init(SolrServiceImplTest.java:41)\nCaused by: java.lang.NoClassDefFoundError: org/eclipse/jetty/http/HttpFields$Mutable\n    at com.XXX.search.service.SolrServiceImplTest.init(SolrServiceImplTest.java:41)\nCaused by: java.lang.ClassNotFoundException: org.eclipse.jetty.http.HttpFields$Mutable\n    at com.xxx.search.service.SolrServiceImplTest.init(SolrServiceImplTest.java:41)\n[ERROR] test_canRetryAddDocumentsIfStatusIsNonZero  Time elapsed: 0.004 s  &lt;&lt;&lt; ERROR!\norg.mockito.exceptions.base.MockitoException: \nMockito cannot mock this class: class org.apache.solr.client.solrj.impl.Http2SolrClient.\nMockito can only mock non-private &amp; non-final classes.\nIf you're not sure why you're getting this error, please report to the mailing list.\nJava               : 17\nJVM vendor name    : Amazon.com Inc.\nJVM vendor version : 17.0.8.1+8-LTS\nJVM name           : OpenJDK 64-Bit Server VM\nJVM version        : 17.0.8.1+8-LTS\nJVM info           : mixed mode, sharing\nOS name            : Windows 11\nOS version         : 10.0\n\n</code></pre>\n<p>Now let's say that I'm not running the tests and able to build the project to check it's usage in concrete implementation of indexing job.</p>\n<p><strong>Concrete indexing job pom</strong>\n<a href=\"https://pastebin.com/s7CB6K8K\" rel=\"nofollow noreferrer\">POM Link</a></p>\n<p>It's dependency tree says that the lib uses 8.11.2 when I have put 9.3.0 in pom and even lib recognizes 9.3.0 :) .m2 repo was cleaned and I've build lib with 0.0.2-SNAPSHOT version that is even not in artifactory.. Here is dependency tree:</p>\n<pre><code>[INFO] --- maven-dependency-plugin:3.3.0:tree (default-cli) @ search-solr-indexing-rq ---\n[INFO] com.xxx.search:search-solr-indexing-rq:jar:0.0.1-SNAPSHOT\n[INFO] +- org.springframework.boot:spring-boot-starter:jar:2.7.15:compile\n[INFO] |  +- org.springframework.boot:spring-boot:jar:2.7.15:compile\n[INFO] |  |  \\- org.springframework:spring-context:jar:5.3.29:compile\n[INFO] |  |     +- org.springframework:spring-aop:jar:5.3.29:compile\n[INFO] |  |     +- org.springframework:spring-beans:jar:5.3.29:compile\n[INFO] |  |     \\- org.springframework:spring-expression:jar:5.3.29:compile\n[INFO] |  +- org.springframework.boot:spring-boot-autoconfigure:jar:2.7.15:compile\n[INFO] |  +- org.springframework.boot:spring-boot-starter-logging:jar:2.7.15:compile\n[INFO] |  |  +- ch.qos.logback:logback-classic:jar:1.2.12:compile\n[INFO] |  |  |  \\- ch.qos.logback:logback-core:jar:1.2.12:compile\n[INFO] |  |  +- org.apache.logging.log4j:log4j-to-slf4j:jar:2.17.2:compile\n[INFO] |  |  |  \\- org.apache.logging.log4j:log4j-api:jar:2.17.2:compile\n[INFO] |  |  \\- org.slf4j:jul-to-slf4j:jar:1.7.36:compile\n[INFO] |  +- jakarta.annotation:jakarta.annotation-api:jar:1.3.5:compile\n[INFO] |  +- org.springframework:spring-core:jar:5.3.29:compile\n[INFO] |  |  \\- org.springframework:spring-jcl:jar:5.3.29:compile\n[INFO] |  \\- org.yaml:snakeyaml:jar:1.30:compile\n[INFO] +- org.springframework.boot:spring-boot-starter-test:jar:2.7.15:test\n[INFO] |  +- org.springframework.boot:spring-boot-test:jar:2.7.15:test\n[INFO] |  +- org.springframework.boot:spring-boot-test-autoconfigure:jar:2.7.15:test\n[INFO] |  +- com.jayway.jsonpath:json-path:jar:2.7.0:test\n[INFO] |  |  +- net.minidev:json-smart:jar:2.4.11:test\n[INFO] |  |  |  \\- net.minidev:accessors-smart:jar:2.4.11:test\n[INFO] |  |  |     \\- org.ow2.asm:asm:jar:9.3:test\n[INFO] |  |  \\- org.slf4j:slf4j-api:jar:1.7.36:compile\n[INFO] |  +- jakarta.xml.bind:jakarta.xml.bind-api:jar:2.3.3:test\n[INFO] |  |  \\- jakarta.activation:jakarta.activation-api:jar:1.2.2:test\n[INFO] |  +- org.assertj:assertj-core:jar:3.22.0:test\n[INFO] |  +- org.hamcrest:hamcrest:jar:2.2:test\n[INFO] |  +- org.junit.jupiter:junit-jupiter:jar:5.8.2:test\n[INFO] |  |  +- org.junit.jupiter:junit-jupiter-api:jar:5.8.2:test\n[INFO] |  |  |  +- org.opentest4j:opentest4j:jar:1.2.0:test\n[INFO] |  |  |  +- org.junit.platform:junit-platform-commons:jar:1.8.2:test\n[INFO] |  |  |  \\- org.apiguardian:apiguardian-api:jar:1.1.2:test\n[INFO] |  |  +- org.junit.jupiter:junit-jupiter-params:jar:5.8.2:test\n[INFO] |  |  \\- org.junit.jupiter:junit-jupiter-engine:jar:5.8.2:test\n[INFO] |  |     \\- org.junit.platform:junit-platform-engine:jar:1.8.2:test\n[INFO] |  +- org.mockito:mockito-core:jar:4.5.1:test\n[INFO] |  |  +- net.bytebuddy:byte-buddy:jar:1.12.23:test\n[INFO] |  |  +- net.bytebuddy:byte-buddy-agent:jar:1.12.23:test\n[INFO] |  |  \\- org.objenesis:objenesis:jar:3.2:test\n[INFO] |  +- org.mockito:mockito-junit-jupiter:jar:4.5.1:test\n[INFO] |  +- org.skyscreamer:jsonassert:jar:1.5.1:test\n[INFO] |  |  \\- com.vaadin.external.google:android-json:jar:0.0.20131108.vaadin1:test\n[INFO] |  +- org.springframework:spring-test:jar:5.3.29:test\n[INFO] |  \\- org.xmlunit:xmlunit-core:jar:2.9.1:test\n[INFO] \\- com.xxx.search:search-solr-indexing-lib:jar:0.0.2-SNAPSHOT:compile\n[INFO]    +- org.springframework.boot:spring-boot-starter-data-redis:jar:2.7.15:compile\n[INFO]    |  +- org.springframework.data:spring-data-redis:jar:2.7.15:compile\n[INFO]    |  |  +- org.springframework.data:spring-data-keyvalue:jar:2.7.15:compile\n[INFO]    |  |  |  \\- org.springframework.data:spring-data-commons:jar:2.7.15:compile\n[INFO]    |  |  +- org.springframework:spring-tx:jar:5.3.29:compile\n[INFO]    |  |  +- org.springframework:spring-oxm:jar:5.3.29:compile\n[INFO]    |  |  \\- org.springframework:spring-context-support:jar:5.3.29:compile\n[INFO]    |  \\- io.lettuce:lettuce-core:jar:6.1.10.RELEASE:compile\n[INFO]    |     \\- io.projectreactor:reactor-core:jar:3.4.32:compile\n[INFO]    +- com.google.code.gson:gson:jar:2.9.1:compile\n[INFO]    +- io.github.resilience4j:resilience4j-retry:jar:1.7.1:compile\n[INFO]    |  +- io.vavr:vavr:jar:0.10.2:compile\n[INFO]    |  |  \\- io.vavr:vavr-match:jar:0.10.2:compile\n[INFO]    |  \\- io.github.resilience4j:resilience4j-core:jar:1.7.1:compile\n[INFO]    +- org.apache.solr:solr-solrj:jar:8.11.2:compile\n[INFO]    |  +- com.fasterxml.woodstox:woodstox-core:jar:6.2.4:compile\n[INFO]    |  +- commons-lang:commons-lang:jar:2.6:compile\n[INFO]    |  +- io.netty:netty-buffer:jar:4.1.97.Final:compile\n[INFO]    |  +- io.netty:netty-codec:jar:4.1.97.Final:compile\n[INFO]    |  +- io.netty:netty-common:jar:4.1.97.Final:compile\n[INFO]    |  +- io.netty:netty-handler:jar:4.1.97.Final:compile\n[INFO]    |  +- io.netty:netty-resolver:jar:4.1.97.Final:compile\n[INFO]    |  +- io.netty:netty-transport:jar:4.1.97.Final:compile\n[INFO]    |  +- io.netty:netty-transport-native-epoll:jar:4.1.97.Final:compile\n[INFO]    |  |  \\- io.netty:netty-transport-classes-epoll:jar:4.1.97.Final:compile\n[INFO]    |  +- io.netty:netty-transport-native-unix-common:jar:4.1.97.Final:compile\n[INFO]    |  +- org.apache.commons:commons-math3:jar:3.6.1:compile\n[INFO]    |  +- org.apache.httpcomponents:httpclient:jar:4.5.14:compile\n[INFO]    |  +- org.apache.httpcomponents:httpcore:jar:4.4.16:compile\n[INFO]    |  +- org.apache.httpcomponents:httpmime:jar:4.5.14:compile\n[INFO]    |  +- org.apache.zookeeper:zookeeper:jar:3.6.2:compile\n[INFO]    |  +- org.apache.zookeeper:zookeeper-jute:jar:3.6.2:compile\n[INFO]    |  +- org.codehaus.woodstox:stax2-api:jar:4.2.1:compile\n[INFO]    |  +- org.eclipse.jetty:jetty-alpn-client:jar:9.4.51.v20230217:compile\n[INFO]    |  +- org.eclipse.jetty:jetty-alpn-java-client:jar:9.4.51.v20230217:compile\n[INFO]    |  +- org.eclipse.jetty:jetty-client:jar:9.4.51.v20230217:compile\n[INFO]    |  +- org.eclipse.jetty:jetty-http:jar:9.4.51.v20230217:compile\n[INFO]    |  +- org.eclipse.jetty:jetty-io:jar:9.4.51.v20230217:compile\n[INFO]    |  +- org.eclipse.jetty:jetty-util:jar:9.4.51.v20230217:compile\n[INFO]    |  +- org.eclipse.jetty.http2:http2-client:jar:9.4.51.v20230217:compile\n[INFO]    |  +- org.eclipse.jetty.http2:http2-common:jar:9.4.51.v20230217:compile\n[INFO]    |  +- org.eclipse.jetty.http2:http2-hpack:jar:9.4.51.v20230217:compile\n[INFO]    |  +- org.eclipse.jetty.http2:http2-http-client-transport:jar:9.4.51.v20230217:compile\n[INFO]    |  \\- org.xerial.snappy:snappy-java:jar:1.1.7.6:compile\n[INFO]    +- software.amazon.awssdk:s3:jar:2.15.0:compile\n[INFO]    |  +- software.amazon.awssdk:aws-xml-protocol:jar:2.15.0:compile\n[INFO]    |  |  \\- software.amazon.awssdk:aws-query-protocol:jar:2.15.0:compile\n[INFO]    |  +- software.amazon.awssdk:protocol-core:jar:2.15.0:compile\n[INFO]    |  +- software.amazon.awssdk:arns:jar:2.15.0:compile\n[INFO]    |  +- software.amazon.awssdk:profiles:jar:2.15.0:compile\n[INFO]    |  +- software.amazon.awssdk:sdk-core:jar:2.15.0:compile\n[INFO]    |  |  \\- org.reactivestreams:reactive-streams:jar:1.0.4:compile\n[INFO]    |  +- software.amazon.awssdk:http-client-spi:jar:2.15.0:compile\n[INFO]    |  +- software.amazon.awssdk:regions:jar:2.15.0:compile\n[INFO]    |  +- software.amazon.awssdk:annotations:jar:2.15.0:compile\n[INFO]    |  +- software.amazon.awssdk:utils:jar:2.15.0:compile\n[INFO]    |  +- software.amazon.awssdk:aws-core:jar:2.15.0:compile\n[INFO]    |  +- software.amazon.awssdk:metrics-spi:jar:2.15.0:compile\n[INFO]    |  +- software.amazon.awssdk:apache-client:jar:2.15.0:runtime\n[INFO]    |  \\- software.amazon.awssdk:netty-nio-client:jar:2.15.0:runtime\n[INFO]    |     +- io.netty:netty-codec-http:jar:4.1.97.Final:runtime\n[INFO]    |     +- io.netty:netty-codec-http2:jar:4.1.97.Final:runtime\n[INFO]    |     +- io.netty:netty-transport-native-epoll:jar:linux-x86_64:4.1.97.Final:runtime\n[INFO]    |     \\- com.typesafe.netty:netty-reactive-streams-http:jar:2.0.4:runtime\n[INFO]    |        \\- com.typesafe.netty:netty-reactive-streams:jar:2.0.4:runtime\n[INFO]    +- software.amazon.awssdk:auth:jar:2.15.0:compile\n[INFO]    |  +- com.fasterxml.jackson.core:jackson-databind:jar:2.13.5:compile\n[INFO]    |  \\- software.amazon.eventstream:eventstream:jar:1.0.1:compile\n[INFO]    +- org.apache.commons:commons-collections4:jar:4.4:compile\n[INFO]    +- redis.clients:jedis:jar:3.8.0:compile\n[INFO]    |  \\- org.apache.commons:commons-pool2:jar:2.11.1:compile\n[INFO]    +- com.joyent.util:fast-md5:jar:2.7.1:compile\n[INFO]    +- com.fasterxml.jackson.datatype:jackson-datatype-jsr310:jar:2.13.5:compile\n[INFO]    |  \\- com.fasterxml.jackson.core:jackson-annotations:jar:2.13.5:compile\n[INFO]    +- com.fasterxml.jackson.dataformat:jackson-dataformat-xml:jar:2.13.5:compile\n[INFO]    +- com.fasterxml.jackson.core:jackson-core:jar:2.13.5:compile\n[INFO]    +- org.apache.commons:commons-lang3:jar:3.12.0:compile\n[INFO]    +- commons-io:commons-io:jar:2.13.0:compile\n[INFO]    +- com.google.api-client:google-api-client:jar:2.0.0:compile\n[INFO]    |  +- com.google.oauth-client:google-oauth-client:jar:1.34.1:compile\n[INFO]    |  +- com.google.http-client:google-http-client-gson:jar:1.42.1:compile\n[INFO]    |  +- com.google.guava:guava:jar:31.1-jre:compile\n[INFO]    |  |  +- com.google.guava:failureaccess:jar:1.0.1:compile\n[INFO]    |  |  +- com.google.guava:listenablefuture:jar:9999.0-empty-to-avoid-conflict-with-guava:compile\n[INFO]    |  |  +- com.google.errorprone:error_prone_annotations:jar:2.11.0:compile\n[INFO]    |  |  \\- com.google.j2objc:j2objc-annotations:jar:1.3:compile\n[INFO]    |  +- com.google.http-client:google-http-client-apache-v2:jar:1.42.1:compile\n[INFO]    |  \\- com.google.http-client:google-http-client:jar:1.42.1:compile\n[INFO]    |     +- io.opencensus:opencensus-api:jar:0.31.1:compile\n[INFO]    |     |  \\- io.grpc:grpc-context:jar:1.27.2:compile\n[INFO]    |     \\- io.opencensus:opencensus-contrib-http-util:jar:0.31.1:compile\n[INFO]    +- com.google.oauth-client:google-oauth-client-jetty:jar:1.34.1:compile\n[INFO]    |  \\- com.google.oauth-client:google-oauth-client-java6:jar:1.34.1:compile\n[INFO]    +- com.google.apis:google-api-services-sheets:jar:v4-rev20220927-2.0.0:compile\n[INFO]    +- com.google.auth:google-auth-library-oauth2-http:jar:1.19.0:compile\n[INFO]    |  +- com.google.auto.value:auto-value-annotations:jar:1.10.1:compile\n[INFO]    |  +- com.google.code.findbugs:jsr305:jar:3.0.2:compile\n[INFO]    |  \\- com.google.auth:google-auth-library-credentials:jar:1.19.0:compile\n[INFO]    +- com.oracle.database.jdbc:ojdbc10:jar:19.20.0.0:compile\n[INFO]    \\- org.postgresql:postgresql:jar:42.3.8:compile\n[INFO]       \\- org.checkerframework:checker-qual:jar:3.5.0:compile\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  3.501 s\n[INFO] Finished at: 2023-09-25T20:12:06+04:00\n[INFO] ------------------------------------------------------------------------\n\n</code></pre>\n<p><strong>And then on runtime we get this error</strong></p>\n<pre><code>java.lang.NoSuchMethodError: 'org.apache.solr.client.solrj.impl.Http2SolrClient$Builder org.apache.solr.client.solrj.impl.Http2SolrClient$Builder.withResponseParser(org.apache.solr.client.solrj.ResponseParser)'\n    at com.xxx.search.service.impl.SolrServiceImpl.initSolrClient(SolrServiceImpl.java:144) ~[search-solr-indexing-lib-0.0.2-SNAPSHOT.jar:0.0.2-SNAPSHOT]\n    at com.xxx.search.service.impl.SolrServiceImpl.&lt;init&gt;(SolrServiceImpl.java:38) ~[search-solr-indexing-lib-0.0.2-SNAPSHOT.jar:0.0.2-SNAPSHOT]\n    at com.xxx.search.util.SolrServiceFactory.lambda$getSolrServices$0(SolrServiceFactory.java:26) ~[search-solr-indexing-lib-0.0.2-SNAPSHOT.jar:0.0.2-SNAPSHOT]\n    at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195) ~[na:na]\n    at java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:948) ~[na:na]\n    at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484) ~[na:na]\n    at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474) ~[na:na]\n    at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:913) ~[na:na]\n    at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]\n    at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:578) ~[na:na]\n    at com.xxx.search.util.SolrServiceFactory.lambda$getSolrServices$1(SolrServiceFactory.java:26) ~[search-solr-indexing-lib-0.0.2-SNAPSHOT.jar:0.0.2-SNAPSHOT]\n    at java.base/java.util.HashMap.computeIfAbsent(HashMap.java:1134) ~[na:na]\n    at com.xxx.search.util.SolrServiceFactory.getSolrServices(SolrServiceFactory.java:26) ~[search-solr-indexing-lib-0.0.2-SNAPSHOT.jar:0.0.2-SNAPSHOT]\n    at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195) ~[na:na]\n    at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195) ~[na:na]\n</code></pre>\n<p>I've tried to add transitive dependencies manually but issue is still there.</p>\n<pre><code>[Transitive dependency list](https://pastebin.com/47zJatcm)\n</code></pre>\n"},{"tags":["java","string","match"],"answers":[{"tags":[],"owner":{"account_id":118337,"reputation":170832,"user_id":309308,"accept_rate":74,"display_name":"Michael Mrozek"},"comment_count":0,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1270950361,"creation_date":1270950361,"answer_id":2615753,"question_id":2615749,"body_markdown":"    text.indexOf(match);\r\n\r\nSee the [String javadoc][1]\r\n\r\n\r\n  [1]: http://java.sun.com/j2se/1.5.0/docs/api/java/lang/String.html#indexOf(java.lang.String)","title":"Java: method to get position of a match in a String?","body":"<pre><code>text.indexOf(match);\n</code></pre>\n\n<p>See the <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/lang/String.html#indexOf(java.lang.String)\" rel=\"noreferrer\">String javadoc</a></p>\n"},{"comments":[{"owner":{"account_id":54832,"reputation":51238,"user_id":164148,"accept_rate":82,"display_name":"hhh"},"score":2,"creation_date":1270952618,"post_id":2615834,"comment_id":2627425,"body_markdown":"lolz, just realised an assignment inside while-loop, then you post an assignment inside for-loop +1","body":"lolz, just realised an assignment inside while-loop, then you post an assignment inside for-loop +1"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":4,"creation_date":1270956222,"post_id":2615834,"comment_id":2627574,"body_markdown":"@polygenelubricants - your &quot;find all occurrences&quot; examples are clever.  But if was code-reviewing that, you would get a lecture about code maintainability.","body":"@polygenelubricants - your &quot;find all occurrences&quot; examples are clever.  But if was code-reviewing that, you would get a lecture about code maintainability."},{"owner":{"account_id":102991,"reputation":378292,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"score":3,"creation_date":1270956423,"post_id":2615834,"comment_id":2627584,"body_markdown":"How would you write it? I&#39;m honestly asking, because I haven&#39;t had a professional code review experience before.","body":"How would you write it? I&#39;m honestly asking, because I haven&#39;t had a professional code review experience before."},{"owner":{"account_id":4500804,"reputation":2165,"user_id":3659361,"accept_rate":62,"display_name":"May Rest in Peace"},"score":1,"creation_date":1517904163,"post_id":2615834,"comment_id":84272535,"body_markdown":"In find all occurrences, instead of i++, we can write i += word.length(). It should be slightly faster.","body":"In find all occurrences, instead of i++, we can write i += word.length(). It should be slightly faster."},{"owner":{"account_id":3436139,"reputation":198,"user_id":2879235,"display_name":"Strauteka"},"score":0,"creation_date":1580730606,"post_id":2615834,"comment_id":106181036,"body_markdown":"First loop will fail to find all positions if matching one char. You don&#39;t need +1 in for loop second statement, because third statement does counting i++ try for String text = &quot;0011100&quot;; matching word char &quot;1&quot; it will print 2,4 not 2,3,4","body":"First loop will fail to find all positions if matching one char. You don&#39;t need +1 in for loop second statement, because third statement does counting i++ try for String text = &quot;0011100&quot;; matching word char &quot;1&quot; it will print 2,4 not 2,3,4"},{"owner":{"account_id":2068418,"reputation":337,"user_id":1843452,"accept_rate":82,"display_name":"Conor"},"score":0,"creation_date":1596035810,"post_id":2615834,"comment_id":111682217,"body_markdown":"@polygenelubricants Hi, this kind of for loop is interesting to me. I&#39;d like to know more about why the variable i = -1, and how i++ seems to make it scan to the end of the text, can it be explained more? I&#39;m not refuting it, I know it works, I just want to understand the logic","body":"@polygenelubricants Hi, this kind of for loop is interesting to me. I&#39;d like to know more about why the variable i = -1, and how i++ seems to make it scan to the end of the text, can it be explained more? I&#39;m not refuting it, I know it works, I just want to understand the logic"},{"owner":{"account_id":416701,"reputation":4306,"user_id":792238,"accept_rate":87,"display_name":"Siddhartha"},"score":0,"creation_date":1613948795,"post_id":2615834,"comment_id":117226873,"body_markdown":"It&#39;s inclusive of `fromIndex` for anyone wondering.","body":"It&#39;s inclusive of <code>fromIndex</code> for anyone wondering."},{"owner":{"account_id":4116229,"reputation":348,"user_id":3377696,"accept_rate":42,"display_name":"Kalpa-W"},"score":0,"creation_date":1639159223,"post_id":2615834,"comment_id":124285804,"body_markdown":"Find all occurrences backward should be corrected as i--. not i++","body":"Find all occurrences backward should be corrected as i--. not i++"}],"tags":[],"owner":{"account_id":102991,"reputation":378292,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"comment_count":8,"down_vote_count":0,"up_vote_count":281,"is_accepted":true,"score":281,"last_activity_date":1500519186,"creation_date":1270952494,"answer_id":2615834,"question_id":2615749,"body_markdown":"The family of methods that does this are:\r\n\r\n* [`int indexOf(String str)`](http://java.sun.com/javase/6/docs/api/java/lang/String.html#indexOf(java.lang.String))\r\n  * [`indexOf(String str, int fromIndex)`](http://java.sun.com/javase/6/docs/api/java/lang/String.html#indexOf(java.lang.String,%20int))\r\n* [`int lastIndexOf(String str)`](http://java.sun.com/javase/6/docs/api/java/lang/String.html#lastIndexOf(java.lang.String))\r\n  * [`lastIndexOf(String str, int fromIndex)`](http://java.sun.com/javase/6/docs/api/java/lang/String.html#lastIndexOf(java.lang.String,%20int))\r\n\r\n&gt; Returns the index within this string of the first (_or last_) occurrence of the specified substring [searching forward (_or backward_) starting at the specified index].\r\n\r\n---\r\n\r\n\tString text = &quot;0123hello9012hello8901hello7890&quot;;\r\n\tString word = &quot;hello&quot;;\r\n\r\n\tSystem.out.println(text.indexOf(word)); // prints &quot;4&quot;\r\n\tSystem.out.println(text.lastIndexOf(word)); // prints &quot;22&quot;\r\n\r\n\t// find all occurrences forward\r\n\tfor (int i = -1; (i = text.indexOf(word, i + 1)) != -1; i++) {\r\n\t\tSystem.out.println(i);\r\n\t} // prints &quot;4&quot;, &quot;13&quot;, &quot;22&quot;\r\n\r\n\t// find all occurrences backward\r\n\tfor (int i = text.length(); (i = text.lastIndexOf(word, i - 1)) != -1; i++) {\r\n\t\tSystem.out.println(i);\r\n\t} // prints &quot;22&quot;, &quot;13&quot;, &quot;4&quot;\r\n","title":"Java: method to get position of a match in a String?","body":"<p>The family of methods that does this are:</p>\n\n<ul>\n<li><a href=\"http://java.sun.com/javase/6/docs/api/java/lang/String.html#indexOf(java.lang.String)\" rel=\"noreferrer\"><code>int indexOf(String str)</code></a>\n\n<ul>\n<li><a href=\"http://java.sun.com/javase/6/docs/api/java/lang/String.html#indexOf(java.lang.String,%20int)\" rel=\"noreferrer\"><code>indexOf(String str, int fromIndex)</code></a></li>\n</ul></li>\n<li><a href=\"http://java.sun.com/javase/6/docs/api/java/lang/String.html#lastIndexOf(java.lang.String)\" rel=\"noreferrer\"><code>int lastIndexOf(String str)</code></a>\n\n<ul>\n<li><a href=\"http://java.sun.com/javase/6/docs/api/java/lang/String.html#lastIndexOf(java.lang.String,%20int)\" rel=\"noreferrer\"><code>lastIndexOf(String str, int fromIndex)</code></a></li>\n</ul></li>\n</ul>\n\n<blockquote>\n  <p>Returns the index within this string of the first (<em>or last</em>) occurrence of the specified substring [searching forward (<em>or backward</em>) starting at the specified index].</p>\n</blockquote>\n\n<hr>\n\n<pre><code>String text = \"0123hello9012hello8901hello7890\";\nString word = \"hello\";\n\nSystem.out.println(text.indexOf(word)); // prints \"4\"\nSystem.out.println(text.lastIndexOf(word)); // prints \"22\"\n\n// find all occurrences forward\nfor (int i = -1; (i = text.indexOf(word, i + 1)) != -1; i++) {\n    System.out.println(i);\n} // prints \"4\", \"13\", \"22\"\n\n// find all occurrences backward\nfor (int i = text.length(); (i = text.lastIndexOf(word, i - 1)) != -1; i++) {\n    System.out.println(i);\n} // prints \"22\", \"13\", \"4\"\n</code></pre>\n"},{"comments":[{"owner":{"account_id":102991,"reputation":378292,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"score":2,"creation_date":1270952799,"post_id":2615837,"comment_id":2627436,"body_markdown":"The way you offset `i` by `+1` works, but in a rather roundabout way. As you&#39;ve shown here, it reports the first `hello` at `i == 1`. It&#39;s much more consistent if you always use 0-based indexing.","body":"The way you offset <code>i</code> by <code>+1</code> works, but in a rather roundabout way. As you&#39;ve shown here, it reports the first <code>hello</code> at <code>i == 1</code>. It&#39;s much more consistent if you always use 0-based indexing."},{"owner":{"account_id":54832,"reputation":51238,"user_id":164148,"accept_rate":82,"display_name":"hhh"},"score":1,"creation_date":1270953097,"post_id":2615837,"comment_id":2627453,"body_markdown":"... will steal your thing :P Thank you.","body":"... will steal your thing :P Thank you."}],"tags":[],"owner":{"account_id":54832,"reputation":51238,"user_id":164148,"accept_rate":82,"display_name":"hhh"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1270952507,"creation_date":1270952507,"answer_id":2615837,"question_id":2615749,"body_markdown":"You can get all matches in a file simply by assigning inside while-loop, cool:\r\n\r\n    $ javac MatchTest.java \r\n    $ java MatchTest \r\n    1\r\n    16\r\n    31\r\n    46\r\n    $ cat MatchTest.java \r\n    import java.util.*;\r\n    import java.io.*;\r\n    \r\n    public class MatchTest {\r\n    \tpublic static void main(String[] args){\r\n    \t\tString match = &quot;hello&quot;;\r\n    \t\tString text = &quot;hello0123456789hello0123456789hello1234567890hello3423243423232&quot;;\r\n    \t\tint i =0;\r\n    \t\twhile((i=(text.indexOf(match,i)+1))&gt;0)\r\n    \t\t\tSystem.out.println(i);\r\n    \t}\r\n    }\r\n\r\n","title":"Java: method to get position of a match in a String?","body":"<p>You can get all matches in a file simply by assigning inside while-loop, cool:</p>\n\n<pre><code>$ javac MatchTest.java \n$ java MatchTest \n1\n16\n31\n46\n$ cat MatchTest.java \nimport java.util.*;\nimport java.io.*;\n\npublic class MatchTest {\n    public static void main(String[] args){\n        String match = \"hello\";\n        String text = \"hello0123456789hello0123456789hello1234567890hello3423243423232\";\n        int i =0;\n        while((i=(text.indexOf(match,i)+1))&gt;0)\n            System.out.println(i);\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2774190,"reputation":13369,"user_id":3195526,"accept_rate":71,"display_name":"Paul Hicks"},"score":1,"creation_date":1391979224,"post_id":21664676,"comment_id":32747018,"body_markdown":"Can you explain why this works and what&#39;s going on in the guard of the inner loop?  An explanation might be useful to a novice reader.","body":"Can you explain why this works and what&#39;s going on in the guard of the inner loop?  An explanation might be useful to a novice reader."},{"owner":{"account_id":3991944,"reputation":1372,"user_id":3290584,"display_name":"Noorus Khan"},"score":1,"creation_date":1410786387,"post_id":21664676,"comment_id":40443975,"body_markdown":"int indexOf(String str, int fromIndex): Returns the index within this string of the first occurrence of the specified substring, starting at the specified index. If it does not occur, -1 is returned.\nHere the inner loop of while would be able to get all the occource of token(here specified by variable named as &#39;key&#39;).","body":"int indexOf(String str, int fromIndex): Returns the index within this string of the first occurrence of the specified substring, starting at the specified index. If it does not occur, -1 is returned. Here the inner loop of while would be able to get all the occource of token(here specified by variable named as &#39;key&#39;)."}],"tags":[],"owner":{"account_id":3991944,"reputation":1372,"user_id":3290584,"display_name":"Noorus Khan"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1391979267,"creation_date":1391978099,"answer_id":21664676,"question_id":2615749,"body_markdown":"    import java.util.StringTokenizer;\r\n\r\n    public class Occourence {\r\n\r\n      public static void main(String[] args) {\r\n\t\tString key=null,str =&quot;my name noorus my name noorus&quot;;\t\t \r\n\t\tint i=0,tot=0;\r\n\r\n\t\tStringTokenizer st=new StringTokenizer(str,&quot; &quot;);\r\n\t\twhile(st.hasMoreTokens())\r\n\t\t{   \r\n\t\t\ttot=tot+1;\r\n\t\t\tkey = st.nextToken();\r\n\t\t\twhile((i=(str.indexOf(key,i)+1))&gt;0)\r\n\t\t\t{\r\n\t\t\t\tSystem.out.println(&quot;position of &quot;+key+&quot; &quot;+&quot;is &quot;+(i-1));\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tSystem.out.println(&quot;total words present in string &quot;+tot);\r\n\t  }\r\n    }\r\n\r\n","title":"Java: method to get position of a match in a String?","body":"<pre><code>import java.util.StringTokenizer;\n\npublic class Occourence {\n\n  public static void main(String[] args) {\n    String key=null,str =\"my name noorus my name noorus\";        \n    int i=0,tot=0;\n\n    StringTokenizer st=new StringTokenizer(str,\" \");\n    while(st.hasMoreTokens())\n    {   \n        tot=tot+1;\n        key = st.nextToken();\n        while((i=(str.indexOf(key,i)+1))&gt;0)\n        {\n            System.out.println(\"position of \"+key+\" \"+\"is \"+(i-1));\n        }\n    }\n\n    System.out.println(\"total words present in string \"+tot);\n  }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1500491,"reputation":23273,"user_id":1405330,"accept_rate":71,"display_name":"Fabio"},"score":1,"creation_date":1393843345,"post_id":22144166,"comment_id":33601616,"body_markdown":"Please explain what you did","body":"Please explain what you did"},{"owner":{"account_id":4111864,"reputation":21,"user_id":3374457,"display_name":"Sayed"},"score":1,"creation_date":1395740555,"post_id":22144166,"comment_id":34463539,"body_markdown":"@Fabio getPosition(match, text){\nint match_position=text.indexOf(match); return match_position;}","body":"@Fabio getPosition(match, text){ int match_position=text.indexOf(match); return match_position;}"}],"tags":[],"owner":{"account_id":4111864,"reputation":21,"user_id":3374457,"display_name":"Sayed"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1393843628,"creation_date":1393842281,"answer_id":22144166,"question_id":2615749,"body_markdown":"    int match_position=text.indexOf(match);","title":"Java: method to get position of a match in a String?","body":"<pre><code>int match_position=text.indexOf(match);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4531600,"reputation":491537,"user_id":3681880,"accept_rate":90,"display_name":"Suragch"},"comment_count":0,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1517934705,"creation_date":1434500924,"answer_id":30880424,"question_id":2615749,"body_markdown":"#Finding a single index\r\n\r\nAs others have said, use `text.indexOf(match)` to find a single match.\r\n\r\n    String text = &quot;0123456789hello0123456789&quot;;\r\n    String match = &quot;hello&quot;;\r\n    int position = text.indexOf(match); // position = 10\r\n\r\n#Finding multiple indexes\r\n\r\nBecause of [@StephenC&#39;s comment][1] about code maintainability and my own difficulty in understanding [@polygenelubricants&#39; answer][2], I wanted to find another way to get all the indexes of a match in a text string. The following code (which is modified from [this answer][3]) does so:\r\n\r\n    String text = &quot;0123hello9012hello8901hello7890&quot;;\r\n    String match = &quot;hello&quot;;\r\n    \r\n    int index = text.indexOf(match);\r\n    int matchLength = match.length();\r\n    while (index &gt;= 0) {  // indexOf returns -1 if no match found\r\n        System.out.println(index);\r\n        index = text.indexOf(match, index + matchLength);\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/2615749/java-method-to-get-position-of-a-match-in-a-string/30204724#comment2627574_2615834\r\n  [2]: https://stackoverflow.com/a/2615834/3681880\r\n  [3]: https://stackoverflow.com/a/5034592/3681880","title":"Java: method to get position of a match in a String?","body":"<h1>Finding a single index</h1>\n\n<p>As others have said, use <code>text.indexOf(match)</code> to find a single match.</p>\n\n<pre><code>String text = \"0123456789hello0123456789\";\nString match = \"hello\";\nint position = text.indexOf(match); // position = 10\n</code></pre>\n\n<h1>Finding multiple indexes</h1>\n\n<p>Because of <a href=\"https://stackoverflow.com/questions/2615749/java-method-to-get-position-of-a-match-in-a-string/30204724#comment2627574_2615834\">@StephenC's comment</a> about code maintainability and my own difficulty in understanding <a href=\"https://stackoverflow.com/a/2615834/3681880\">@polygenelubricants' answer</a>, I wanted to find another way to get all the indexes of a match in a text string. The following code (which is modified from <a href=\"https://stackoverflow.com/a/5034592/3681880\">this answer</a>) does so:</p>\n\n<pre><code>String text = \"0123hello9012hello8901hello7890\";\nString match = \"hello\";\n\nint index = text.indexOf(match);\nint matchLength = match.length();\nwhile (index &gt;= 0) {  // indexOf returns -1 if no match found\n    System.out.println(index);\n    index = text.indexOf(match, index + matchLength);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":187340,"reputation":19497,"user_id":425313,"accept_rate":88,"display_name":"Brad Koch"},"score":2,"creation_date":1444920604,"post_id":30982491,"comment_id":54112813,"body_markdown":"Suggestion: Include an example of getting position from a regular expression. Just &quot;try using regular expressions&quot; is a rather basic comment and doesn&#39;t answer the OP&#39;s question.","body":"Suggestion: Include an example of getting position from a regular expression. Just &quot;try using regular expressions&quot; is a rather basic comment and doesn&#39;t answer the OP&#39;s question."}],"tags":[],"owner":{"account_id":2003109,"reputation":113,"user_id":1793659,"display_name":"JPeraita"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1434983215,"creation_date":1434983215,"answer_id":30982491,"question_id":2615749,"body_markdown":"If you&#39;re going to scan for &#39;n&#39; matches of the search string, I&#39;d recommend using *[regular expressions][1]*.\r\nThey have a steep learning curve, but they&#39;ll save you hours when it comes to complex searches.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/essential/regex/","title":"Java: method to get position of a match in a String?","body":"<p>If you're going to scan for 'n' matches of the search string, I'd recommend using <em><a href=\"https://docs.oracle.com/javase/tutorial/essential/regex/\" rel=\"nofollow\">regular expressions</a></em>.\nThey have a steep learning curve, but they'll save you hours when it comes to complex searches.</p>\n"},{"comments":[{"owner":{"account_id":4109174,"reputation":1770,"user_id":3372184,"accept_rate":43,"display_name":"himawan_r"},"score":2,"creation_date":1436343580,"post_id":31286745,"comment_id":50566236,"body_markdown":"put some explaination/comment in your code will make people easier to understand your code especially it&#39;s long code :)","body":"put some explaination/comment in your code will make people easier to understand your code especially it&#39;s long code :)"}],"tags":[],"owner":{"account_id":6591737,"reputation":15,"user_id":5092665,"display_name":"Nitika Goswami"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1436342319,"creation_date":1436342319,"answer_id":31286745,"question_id":2615749,"body_markdown":"I have some big code but working nicely....\r\n\r\n\r\n\r\n       class strDemo\r\n       { \r\n           public static void main(String args[])\r\n           {\r\n\t       String s1=new String(&quot;The Ghost of The Arabean Sea&quot;);\r\n               String s2=new String (&quot;The&quot;);\r\n               String s6=new String (&quot;ehT&quot;);\r\n               StringBuffer s3;\r\n               StringBuffer s4=new StringBuffer(s1);\r\n               StringBuffer s5=new StringBuffer(s2);\r\n               char c1[]=new char[30];\r\n               char c2[]=new char[5];\r\n               char c3[]=new char[5];\r\n               s1.getChars(0,28,c1,0);\r\n               s2.getChars(0,3,c2,0);\r\n               s6.getChars(0,3,c3,0); s3=s4.reverse();      \r\n               int pf=0,pl=0;\r\n               char c5[]=new char[30];\r\n               s3.getChars(0,28,c5,0);\r\n               for(int i=0;i&lt;(s1.length()-s2.length());i++)\r\n               {\r\n                   int j=0;\r\n                   if(pf&lt;=1)\r\n                   {\r\n                      while (c1[i+j]==c2[j] &amp;&amp; j&lt;=s2.length())\r\n                      {           \r\n                        j++;\r\n                        System.out.println(s2.length()+&quot; &quot;+j);\r\n                        if(j&gt;=s2.length())\r\n                        {\r\n                           System.out.println(&quot;first match of(The) :-&gt;&quot;+i);\r\n                       \r\n                         }\r\n                         pf=pf+1;         \r\n                      }   \r\n                 }                \r\n           }       \r\n             for(int i=0;i&lt;(s3.length()-s6.length()+1);i++)\r\n            {\r\n                int j=0;\r\n                if(pl&lt;=1)\r\n                {\r\n                 while (c5[i+j]==c3[j] &amp;&amp; j&lt;=s6.length())\r\n                 {\r\n                     j++;\r\n                     System.out.println(s6.length()+&quot; &quot;+j);\r\n                     if(j&gt;=s6.length())\r\n                     {\r\n                             System.out.println((s3.length()-i-3));\r\n                             pl=pl+1;\r\n                      \r\n                     }   \r\n                    }                 \r\n                  }  \r\n               }  \r\n             }\r\n           }","title":"Java: method to get position of a match in a String?","body":"<p>I have some big code but working nicely....</p>\n\n<pre><code>   class strDemo\n   { \n       public static void main(String args[])\n       {\n       String s1=new String(\"The Ghost of The Arabean Sea\");\n           String s2=new String (\"The\");\n           String s6=new String (\"ehT\");\n           StringBuffer s3;\n           StringBuffer s4=new StringBuffer(s1);\n           StringBuffer s5=new StringBuffer(s2);\n           char c1[]=new char[30];\n           char c2[]=new char[5];\n           char c3[]=new char[5];\n           s1.getChars(0,28,c1,0);\n           s2.getChars(0,3,c2,0);\n           s6.getChars(0,3,c3,0); s3=s4.reverse();      \n           int pf=0,pl=0;\n           char c5[]=new char[30];\n           s3.getChars(0,28,c5,0);\n           for(int i=0;i&lt;(s1.length()-s2.length());i++)\n           {\n               int j=0;\n               if(pf&lt;=1)\n               {\n                  while (c1[i+j]==c2[j] &amp;&amp; j&lt;=s2.length())\n                  {           \n                    j++;\n                    System.out.println(s2.length()+\" \"+j);\n                    if(j&gt;=s2.length())\n                    {\n                       System.out.println(\"first match of(The) :-&gt;\"+i);\n\n                     }\n                     pf=pf+1;         \n                  }   \n             }                \n       }       \n         for(int i=0;i&lt;(s3.length()-s6.length()+1);i++)\n        {\n            int j=0;\n            if(pl&lt;=1)\n            {\n             while (c5[i+j]==c3[j] &amp;&amp; j&lt;=s6.length())\n             {\n                 j++;\n                 System.out.println(s6.length()+\" \"+j);\n                 if(j&gt;=s6.length())\n                 {\n                         System.out.println((s3.length()-i-3));\n                         pl=pl+1;\n\n                 }   \n                }                 \n              }  \n           }  \n         }\n       }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6445376,"reputation":13519,"user_id":4994021,"display_name":"Peter Brittain"},"score":3,"creation_date":1441093813,"post_id":32325749,"comment_id":52526946,"body_markdown":"While this code may answer the question, providing additional context regarding how and/or why it solves the problem would improve the answer&#39;s long-term value.","body":"While this code may answer the question, providing additional context regarding how and/or why it solves the problem would improve the answer&#39;s long-term value."}],"tags":[],"owner":{"account_id":6880518,"reputation":11,"user_id":5287374,"display_name":"shravan"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1441091936,"creation_date":1441091936,"answer_id":32325749,"question_id":2615749,"body_markdown":"    //finding a particular word any where inthe string and printing its index and occurence  \r\n    class IndOc\r\n    {\r\n    \tpublic static void main(String[] args) \r\n    \t{\r\n    \t\tString s=&quot;this is hyderabad city and this is&quot;;\r\n    \t\tSystem.out.println(&quot;the given string is &quot;);\r\n    \t\tSystem.out.println(&quot;----------&quot;+s);\r\n    \t\tchar ch[]=s.toCharArray();\r\n    \t\tSystem.out.println(&quot; ----word is found at &quot;);\r\n    \t\tint j=0,noc=0;\r\n    \t\tfor(int i=0;i&lt;ch.length;i++)\r\n    \t\t{\r\n    \t\t\tj=i;\r\n    \t\t\t\r\n    \t\t\tif(ch[i]==&#39;i&#39; &amp;&amp; ch[j+1]==&#39;s&#39;)\r\n    \t\t\t{\r\n    \t\t\t\tSystem.out.println(&quot; index &quot;+i);\r\n    \t\t\tnoc++;\t\r\n    \t\t\t}\r\n              \r\n    \t\t}\r\n    \t\tSystem.out.println(&quot;----- no of occurences are &quot;+noc);\r\n    \t\t\r\n    \t}\r\n    }\r\n\r\n","title":"Java: method to get position of a match in a String?","body":"<pre><code>//finding a particular word any where inthe string and printing its index and occurence  \nclass IndOc\n{\n    public static void main(String[] args) \n    {\n        String s=\"this is hyderabad city and this is\";\n        System.out.println(\"the given string is \");\n        System.out.println(\"----------\"+s);\n        char ch[]=s.toCharArray();\n        System.out.println(\" ----word is found at \");\n        int j=0,noc=0;\n        for(int i=0;i&lt;ch.length;i++)\n        {\n            j=i;\n\n            if(ch[i]=='i' &amp;&amp; ch[j+1]=='s')\n            {\n                System.out.println(\" index \"+i);\n            noc++;  \n            }\n\n        }\n        System.out.println(\"----- no of occurences are \"+noc);\n\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3182594,"reputation":332,"user_id":2688998,"display_name":"Gaurav Pangam"},"score":30,"creation_date":1516186905,"post_id":33583575,"comment_id":83583444,"body_markdown":"This works awesome, but for this sentence i got the output saying &quot;I have a boyfriend&quot; :-)","body":"This works awesome, but for this sentence i got the output saying &quot;I have a boyfriend&quot; :-)"}],"tags":[],"owner":{"account_id":7259602,"reputation":501,"user_id":5536904,"display_name":"Aldwane Viegan"},"comment_count":1,"down_vote_count":0,"up_vote_count":50,"is_accepted":false,"score":50,"last_activity_date":1517935178,"creation_date":1446904849,"answer_id":33583575,"question_id":2615749,"body_markdown":"\t\t\r\nThis works using regex.\r\n\r\n    String text = &quot;I love you so much&quot;;\r\n\tString wordToFind = &quot;love&quot;;\r\n\tPattern word = Pattern.compile(wordToFind);\r\n\tMatcher match = word.matcher(text);\r\n\r\n\twhile (match.find()) {\r\n\t\t System.out.println(&quot;Found love at index &quot;+ match.start() +&quot; - &quot;+ (match.end()-1));\r\n\t}\r\n\r\n__Output :__\r\n\r\n&gt; Found &#39;love&#39; at index 2 - 5\r\n\r\n__General Rule :__\r\n\r\n* Regex search left to right, and once the match characters has been used, it cannot be reused.","title":"Java: method to get position of a match in a String?","body":"<p>This works using regex.</p>\n\n<pre><code>String text = \"I love you so much\";\nString wordToFind = \"love\";\nPattern word = Pattern.compile(wordToFind);\nMatcher match = word.matcher(text);\n\nwhile (match.find()) {\n     System.out.println(\"Found love at index \"+ match.start() +\" - \"+ (match.end()-1));\n}\n</code></pre>\n\n<p><strong>Output :</strong></p>\n\n<blockquote>\n  <p>Found 'love' at index 2 - 5</p>\n</blockquote>\n\n<p><strong>General Rule :</strong></p>\n\n<ul>\n<li>Regex search left to right, and once the match characters has been used, it cannot be reused.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":12612920,"reputation":1,"user_id":9171360,"display_name":"Sarthak Ghosh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1515047662,"creation_date":1515047441,"answer_id":48089844,"question_id":2615749,"body_markdown":"for multiple occurrence and the character found in string??yes or no\r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.InputStreamReader;\r\n    \r\n    public class SubStringtest {\r\n    \r\n    \tpublic static void main(String[] args)throws Exception {\r\n    \tBufferedReader br=new BufferedReader(new InputStreamReader(System.in));\r\n    \t System.out.println(&quot;enter the string&quot;);\r\n    \tString str=br.readLine();\r\n    \tSystem.out.println(&quot;enter the character which you want&quot;);\r\n    \tCharSequence ch=br.readLine();   \r\n    \tboolean bool=str.contains(ch);\r\n    \tSystem.out.println(&quot;the character found is &quot; +bool);\r\n    \tint position=str.indexOf(ch.toString());\r\n    \t\r\n    \twhile(position&gt;=0){\r\n    \t\tSystem.out.println(&quot;the index no of character is &quot; +position); \r\n    \t\tposition=str.indexOf(ch.toString(),position+1);\r\n    \t}\r\n    \t\r\n    \r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"Java: method to get position of a match in a String?","body":"<p>for multiple occurrence and the character found in string??yes or no</p>\n\n<pre><code>import java.io.BufferedReader;\nimport java.io.InputStreamReader;\n\npublic class SubStringtest {\n\n    public static void main(String[] args)throws Exception {\n    BufferedReader br=new BufferedReader(new InputStreamReader(System.in));\n     System.out.println(\"enter the string\");\n    String str=br.readLine();\n    System.out.println(\"enter the character which you want\");\n    CharSequence ch=br.readLine();   \n    boolean bool=str.contains(ch);\n    System.out.println(\"the character found is \" +bool);\n    int position=str.indexOf(ch.toString());\n\n    while(position&gt;=0){\n        System.out.println(\"the index no of character is \" +position); \n        position=str.indexOf(ch.toString(),position+1);\n    }\n\n\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13011427,"reputation":11,"user_id":9404308,"display_name":"Shukhrat Aliyev"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1523637129,"creation_date":1523637129,"answer_id":49821532,"question_id":2615749,"body_markdown":"\t\tString match = &quot;hello&quot;;\r\n\t\tString text = &quot;0123456789hello0123456789hello&quot;;\r\n\r\n\t\tint j = 0;\r\n\t\tString indxOfmatch = &quot;&quot;;\r\n\t\t\t\t\r\n\t\tfor (int i = -1; i &lt; text.length()+1; i++) {\r\n\t\t\tj =  text.indexOf(&quot;hello&quot;, i);\r\n\t\t\tif (i&gt;=j &amp;&amp; j &gt; -1) {\r\n\t\t\t\tindxOfmatch += text.indexOf(&quot;hello&quot;, i)+&quot; &quot;;\r\n\t\t\t}\r\n\t\t}\r\n\t\tSystem.out.println(indxOfmatch);\r\n","title":"Java: method to get position of a match in a String?","body":"<pre><code>    String match = \"hello\";\n    String text = \"0123456789hello0123456789hello\";\n\n    int j = 0;\n    String indxOfmatch = \"\";\n\n    for (int i = -1; i &lt; text.length()+1; i++) {\n        j =  text.indexOf(\"hello\", i);\n        if (i&gt;=j &amp;&amp; j &gt; -1) {\n            indxOfmatch += text.indexOf(\"hello\", i)+\" \";\n        }\n    }\n    System.out.println(indxOfmatch);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":17117724,"reputation":1321,"user_id":12386821,"display_name":"Jaimil Patel"},"score":0,"creation_date":1590742423,"post_id":62081768,"comment_id":109801293,"body_markdown":"Hope It will solve issue but please add explanation of your code with it so user will get perfect understanding which he/she really wants.","body":"Hope It will solve issue but please add explanation of your code with it so user will get perfect understanding which he/she really wants."}],"tags":[],"owner":{"account_id":8420204,"reputation":151,"user_id":6319209,"display_name":"yacine"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1590740969,"creation_date":1590740969,"answer_id":62081768,"question_id":2615749,"body_markdown":"    public int NumberWordsInText(String FullText_, String WordToFind_, int[] positions_)\r\n       {\r\n        int iii1=0;\r\n        int iii2=0;\r\n        int iii3=0;\r\n        while((iii1=(FullText_.indexOf(WordToFind_,iii1)+1))&gt;0){iii2=iii2+1;}\r\n        // iii2 is the number of the occurences\r\n        if(iii2&gt;0) {\r\n            positions_ = new int[iii2];\r\n            while ((iii1 = (FullText_.indexOf(WordToFind_, iii1) + 1)) &gt; 0) {\r\n                positions_[iii3] = iii1-1;\r\n                iii3 = iii3 + 1;\r\n                System.out.println(&quot;position=&quot; + positions_[iii3 - 1]);\r\n            }\r\n        }\r\n        return iii2;\r\n    }","title":"Java: method to get position of a match in a String?","body":"<pre><code>public int NumberWordsInText(String FullText_, String WordToFind_, int[] positions_)\n   {\n    int iii1=0;\n    int iii2=0;\n    int iii3=0;\n    while((iii1=(FullText_.indexOf(WordToFind_,iii1)+1))&gt;0){iii2=iii2+1;}\n    // iii2 is the number of the occurences\n    if(iii2&gt;0) {\n        positions_ = new int[iii2];\n        while ((iii1 = (FullText_.indexOf(WordToFind_, iii1) + 1)) &gt; 0) {\n            positions_[iii3] = iii1-1;\n            iii3 = iii3 + 1;\n            System.out.println(\"position=\" + positions_[iii3 - 1]);\n        }\n    }\n    return iii2;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1663775692,"post_id":73755942,"comment_id":130320243,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/73755942/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":26017021,"reputation":1,"user_id":19725211,"display_name":"LOGOUT"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663426781,"creation_date":1663426781,"answer_id":73755942,"question_id":2615749,"body_markdown":"\r\n\r\n         class Main{\r\n         public static int string(String str, String str1){\r\n         for (int i = 0; i &lt;= str.length() - str1.length(); i++){ \r\n            int j;\r\n            for (j = 0; j &lt; str1.length(); j++) {\r\n                if (str1.charAt(j) != str.charAt(i + j)) {\r\n                    break;\r\n                }\r\n                }\r\n               if (j == str1.length()) {\r\n\t\t\t   return i;\r\n               }}\r\n               return -1;\r\n                 }\r\n        public static void main(String[] args)\r\n        {\r\n    \tScanner sc=new Scanner(System.in);\r\n    \tSystem.out.println(&quot;Enter the string&quot;);\r\n    \tString str=sc.nextLine();\r\n    \tSystem.out.println(&quot;Enter the Substring&quot;);\r\n    \tString str1=sc.nextLine();\r\n        System.out.println(&quot;The position of the Substring is &quot;+string(str, str1));\r\n        }\r\n        }","title":"Java: method to get position of a match in a String?","body":"<pre><code>     class Main{\n     public static int string(String str, String str1){\n     for (int i = 0; i &lt;= str.length() - str1.length(); i++){ \n        int j;\n        for (j = 0; j &lt; str1.length(); j++) {\n            if (str1.charAt(j) != str.charAt(i + j)) {\n                break;\n            }\n            }\n           if (j == str1.length()) {\n           return i;\n           }}\n           return -1;\n             }\n    public static void main(String[] args)\n    {\n    Scanner sc=new Scanner(System.in);\n    System.out.println(&quot;Enter the string&quot;);\n    String str=sc.nextLine();\n    System.out.println(&quot;Enter the Substring&quot;);\n    String str1=sc.nextLine();\n    System.out.println(&quot;The position of the Substring is &quot;+string(str, str1));\n    }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29497936,"reputation":11,"user_id":22605570,"display_name":"yash pal"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695659343,"creation_date":1695280803,"answer_id":77147993,"question_id":2615749,"body_markdown":"I have created a function which is very easy to understand for find word&#39;s location in a string, check it :-\r\n\r\n```java\r\npublic static void indexOfWordByYash() {\r\n\tString str = &quot;01yash898989yashyashyashgggggg&quot;;\r\n\tString find = &quot;yash&quot;;\r\n\tint sizeOfFind = find.length();\r\n\tSystem.out.println(&quot;length of string =&quot;+str.length());\r\n\tSystem.out.println(&quot;size of find =&quot;+sizeOfFind);\r\n\t\t\r\n\t//In here we are checking if find_word available from index 0, becouse \r\n    //in loop we are not checking from 0 index.\r\n\tint index = str.indexOf(&quot;yash&quot;, 0);\r\n\tfor(int loop=0; loop &lt; str.length(); loop++) {\r\n\t\t\t\r\n\t    //Only if index greater then 0 will print the index.\r\n\t    if(index &gt;= 0) {\r\n\t\t    System.out.println(&quot;Index of yash =&quot;+index);\r\n\t\t    index = str.indexOf(&quot;yash&quot;, index+sizeOfFind);\r\n\t\t}\r\n\t\t\t\r\n\t\t//Break the loop if no any more find_word in string.\r\n\t\tif(index == -1) {\r\n\t\t    System.out.println(&quot;index =&quot;+index);\r\n\t\t    break;\r\n\t\t}\r\n\t}\r\n}\r\n```","title":"Java: method to get position of a match in a String?","body":"<p>I have created a function which is very easy to understand for find word's location in a string, check it :-</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void indexOfWordByYash() {\n    String str = &quot;01yash898989yashyashyashgggggg&quot;;\n    String find = &quot;yash&quot;;\n    int sizeOfFind = find.length();\n    System.out.println(&quot;length of string =&quot;+str.length());\n    System.out.println(&quot;size of find =&quot;+sizeOfFind);\n        \n    //In here we are checking if find_word available from index 0, becouse \n    //in loop we are not checking from 0 index.\n    int index = str.indexOf(&quot;yash&quot;, 0);\n    for(int loop=0; loop &lt; str.length(); loop++) {\n            \n        //Only if index greater then 0 will print the index.\n        if(index &gt;= 0) {\n            System.out.println(&quot;Index of yash =&quot;+index);\n            index = str.indexOf(&quot;yash&quot;, index+sizeOfFind);\n        }\n            \n        //Break the loop if no any more find_word in string.\n        if(index == -1) {\n            System.out.println(&quot;index =&quot;+index);\n            break;\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":54832,"reputation":51238,"user_id":164148,"accept_rate":82,"display_name":"hhh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":508653,"favorite_count":0,"down_vote_count":2,"up_vote_count":152,"accepted_answer_id":2615834,"answer_count":15,"score":150,"last_activity_date":1695659343,"creation_date":1270950255,"question_id":2615749,"body_markdown":"    String match = &quot;hello&quot;;\r\n    String text = &quot;0123456789hello0123456789&quot;;\r\n    \r\n    int position = getPosition(match, text); // should be 10, is there such a method?","title":"Java: method to get position of a match in a String?","body":"<pre><code>String match = \"hello\";\nString text = \"0123456789hello0123456789\";\n\nint position = getPosition(match, text); // should be 10, is there such a method?\n</code></pre>\n"},{"tags":["java","maven","intellij-idea","pom.xml","protoc"],"comments":[{"owner":{"account_id":28411028,"reputation":416,"user_id":21734429,"display_name":"romanv-jb"},"score":0,"creation_date":1695725688,"post_id":77172897,"comment_id":136059973,"body_markdown":"So, you already have &quot;Shorten command line&quot; option enabled, correct?\nCan you run mvn -X clean install and post the output here?\nEDIT: That actually looks like a PROTOBUF error. Which version of the plugin are you using?","body":"So, you already have &quot;Shorten command line&quot; option enabled, correct? Can you run mvn -X clean install and post the output here? EDIT: That actually looks like a PROTOBUF error. Which version of the plugin are you using?"},{"owner":{"account_id":12511956,"reputation":197,"user_id":9106699,"accept_rate":100,"display_name":"syd"},"score":0,"creation_date":1700334595,"post_id":77172897,"comment_id":136642886,"body_markdown":"Apparently if you are trying to compile all the files in your project you get this error. After trying to compile just one .proto file i started getting a different error: &quot;&#39;protoc&#39; is not recognized as an internal or external command&quot;. its like the compiler is not even there","body":"Apparently if you are trying to compile all the files in your project you get this error. After trying to compile just one .proto file i started getting a different error: &quot;&#39;protoc&#39; is not recognized as an internal or external command&quot;. its like the compiler is not even there"}],"owner":{"account_id":29529903,"reputation":11,"user_id":22630731,"display_name":"KshitijS"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695658516,"creation_date":1695646994,"question_id":77172897,"body_markdown":"I am trying to build a maven project but when I am doing &quot;mvn clean install&quot; I am getting this error [ERROR] PROTOC FAILED: [0:0]:  The command line is too long. I am using Windows 11\r\n\r\nI have already tried the solutions provided on \r\nhttps://stackoverflow.com/questions/6381213/idea-10-5-command-line-is-too-long\r\nhttps://stackoverflow.com/questions/8181098/the-command-line-is-too-long-in-java-project-with-maven\r\nbut it is not working","title":"Windows 11: Intellij IDEA [ERROR] PROTOC FAILED: The command line is too long","body":"<p>I am trying to build a maven project but when I am doing &quot;mvn clean install&quot; I am getting this error [ERROR] PROTOC FAILED: [0:0]:  The command line is too long. I am using Windows 11</p>\n<p>I have already tried the solutions provided on\n<a href=\"https://stackoverflow.com/questions/6381213/idea-10-5-command-line-is-too-long\">IDEA 10.5 Command line is too long</a>\n<a href=\"https://stackoverflow.com/questions/8181098/the-command-line-is-too-long-in-java-project-with-maven\">The command line is too long. in java project with maven</a>\nbut it is not working</p>\n"},{"tags":["java","xpath","saxon","xslt-3.0"],"comments":[{"owner":{"account_id":91947,"reputation":161829,"user_id":252228,"accept_rate":80,"display_name":"Martin Honnen"},"score":0,"creation_date":1695646060,"post_id":77172499,"comment_id":136048030,"body_markdown":"If you have found that `/array/object[number[@name=&#39;DATA&#39;]=&#39;1&#39;]` fixes the problem then what is your question about? As you mention it is Saxon EE, is the XSLT 2 or 3 schema-aware? Which error message do you get when the code that worked with Saxon 8 fails with Saxon 10?","body":"If you have found that <code>&#47;array&#47;object[number[@name=&#39;DATA&#39;]=&#39;1&#39;]</code> fixes the problem then what is your question about? As you mention it is Saxon EE, is the XSLT 2 or 3 schema-aware? Which error message do you get when the code that worked with Saxon 8 fails with Saxon 10?"},{"owner":{"account_id":91947,"reputation":161829,"user_id":252228,"accept_rate":80,"display_name":"Martin Honnen"},"score":0,"creation_date":1695647198,"post_id":77172499,"comment_id":136048283,"body_markdown":"It would also help if you tell us which Saxon 8 version exactly you used as version before 8.9 (I hope to remember that correctly) were basically whatever XSLT 2 draft existed at the time of development/publication so any difference for such old versions might be due to changes before XSLT 2.0 was finalized (and 8.9 published); but of course with such big differences in version (some 8.x to 10) you might just find that some detail changed due to a bug fix. We basically would need to know more details of the XML input and the XSLT to tell.","body":"It would also help if you tell us which Saxon 8 version exactly you used as version before 8.9 (I hope to remember that correctly) were basically whatever XSLT 2 draft existed at the time of development/publication so any difference for such old versions might be due to changes before XSLT 2.0 was finalized (and 8.9 published); but of course with such big differences in version (some 8.x to 10) you might just find that some detail changed due to a bug fix. We basically would need to know more details of the XML input and the XSLT to tell."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1695648027,"post_id":77172499,"comment_id":136048500,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"tags":[],"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695658319,"creation_date":1695658319,"answer_id":77174228,"question_id":77172499,"body_markdown":"It&#39;s hard to provide concrete advice on this. Saxon 8 was a long time ago; in fact it was not one release but a series of major releases from Saxon 8.0 in 2004 through to 8.9 in 2007. During that time the XSLT 2.0 specification was under development in W3C, and Saxon implemented new features of that specification as the spec evolved; XSLT 2.0 was finalised only in 2007, so during the lifetime of Saxon 8.x, the spec was constantly changing. One of the areas of change was the exact rules for comparing values of different types, like strings and integers (as in your example). \r\n\r\nIn addition, new optimizations were constantly being introduced in Saxon; the construct you have highlighted is likely to be significantly faster if supported by indexing, and indexing is notoriously difficult if your expression involves mixed types.\r\n\r\nSo the conclusion is that it&#39;s not at all surprising that Saxon today should should have evolved both in functionality and in its performance profile from the product released 16-19 years ago.","title":"XSLT transformation is stuck after migrating from saxon 8 to 10.6 EE","body":"<p>It's hard to provide concrete advice on this. Saxon 8 was a long time ago; in fact it was not one release but a series of major releases from Saxon 8.0 in 2004 through to 8.9 in 2007. During that time the XSLT 2.0 specification was under development in W3C, and Saxon implemented new features of that specification as the spec evolved; XSLT 2.0 was finalised only in 2007, so during the lifetime of Saxon 8.x, the spec was constantly changing. One of the areas of change was the exact rules for comparing values of different types, like strings and integers (as in your example).</p>\n<p>In addition, new optimizations were constantly being introduced in Saxon; the construct you have highlighted is likely to be significantly faster if supported by indexing, and indexing is notoriously difficult if your expression involves mixed types.</p>\n<p>So the conclusion is that it's not at all surprising that Saxon today should should have evolved both in functionality and in its performance profile from the product released 16-19 years ago.</p>\n"}],"owner":{"account_id":29498965,"reputation":1,"user_id":22606401,"display_name":"Rajarshi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695658319,"creation_date":1695643606,"question_id":77172499,"body_markdown":"My customer has an input xml file of size 28 MB (~7L+ lines of code) to be transformed using Saxon.\r\nTransformation was working while in Saxon 8. After migrating to Saxon 10.6 EE, the transformation gets stuck and does not complete processing.\r\n\r\n\r\nAdditional observations- \r\nThe culprit could be in the XSLT Stylesheet having an Xpath as below: \r\n**/array/object[number[@name=&#39;DATA&#39;]=1]**\r\n\r\nchanging it to either\r\n**/array/object[number[@name=&#39;DATA&#39;]=&#39;1&#39;]**\r\nor\r\n**/array/object[number(number[@name=&#39;DATA&#39;])=1]**\r\nseems to work and provides results in ~1.5 seconds.\r\n\r\n\r\nPlease support.","title":"XSLT transformation is stuck after migrating from saxon 8 to 10.6 EE","body":"<p>My customer has an input xml file of size 28 MB (~7L+ lines of code) to be transformed using Saxon.\nTransformation was working while in Saxon 8. After migrating to Saxon 10.6 EE, the transformation gets stuck and does not complete processing.</p>\n<p>Additional observations-\nThe culprit could be in the XSLT Stylesheet having an Xpath as below:\n<strong>/array/object[number[@name='DATA']=1]</strong></p>\n<p>changing it to either\n<strong>/array/object[number[@name='DATA']='1']</strong>\nor\n<strong>/array/object[number(number[@name='DATA'])=1]</strong>\nseems to work and provides results in ~1.5 seconds.</p>\n<p>Please support.</p>\n"},{"tags":["java","android","machine-learning","speech-recognition","tensorflow-lite"],"owner":{"account_id":25427920,"reputation":1,"user_id":19232844,"display_name":"Selina Arokiaswamy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695658105,"creation_date":1695658105,"question_id":77174209,"body_markdown":"I am getting the following error while loading the input and output audio buffers to tensorflow-lite interpreter for inferencing. I am using the TensorAudio and TensorAudioFormat packages from the tflite-support.audio package. The tflite-lite model I am using is trained for audio samples with a 16kHz sample rate and mono channel. Please take a look at the code below.\r\n\r\n```\r\nfloat audioData [] = wavObj.ReadingAudioFile(getExternalFilesDir(Environment.DIRECTORY_DOWNLOADS).getPath()+ &quot;/final_record.wav&quot;);\r\nfloat [] outputBuffer;\r\nTensorAudioFormat.Builder audioFormat = TensorAudioFormat.builder();\r\naudioFormat.setChannels(1);\r\naudioFormat.setSampleRate(16000);\r\nTensorAudio tensorAudio = TensorAudio.create(audioFormat.build(), audioFormat.build().getSampleRate());\r\ntensorAudio.load(audioData);\r\ntflite.run(tensorAudio.getTensorBuffer().getBuffer(), outputBuffer);\r\n```\r\n\r\n\r\nHere, **wavObj.ReadingAudioFile** is returning the audio buffer for the saved audio file. I am using TensorAudioFormat to explicitly set the channel type and sample rate to match the trained model. I have load the tflite-trained model into tflite Interpreter using the below code.\r\n\r\n\r\n```\r\nAssetFileDescriptor fileDescriptor = this.getAssets().openFd(modelPath); \r\nFileInputStream inputStream = new FileInputStream(fileDescriptor.getFileDescriptor()); \r\nFileChannel fileChannel = inputStream.getChannel(); \r\nlong startOffset = fileDescriptor.getStartOffset(); \r\nlong declaredLength = fileDescriptor.getDeclaredLength(); \r\nByteBuffer model = fileChannel.map(FileChannel.MapMode.READ_ONLY, startOffset, declaredLength); \r\nInterpreter.Options options = new Interpreter.Options(); \r\ntflite = new Interpreter(model, options);\r\n```\r\n\r\nPlease suggest a solution to this problem.\r\n\r\nThe TFlite model Interpreter should accept the audioBuffer for wav file and return the label id for the output classification.","title":"Getting &quot;Cannot copy to a TensorFlowLite tensor with 63984 bytes from a Java Buffer with 64000 bytes&quot; error passing I/O TensorAudio to TFLite model","body":"<p>I am getting the following error while loading the input and output audio buffers to tensorflow-lite interpreter for inferencing. I am using the TensorAudio and TensorAudioFormat packages from the tflite-support.audio package. The tflite-lite model I am using is trained for audio samples with a 16kHz sample rate and mono channel. Please take a look at the code below.</p>\n<pre><code>float audioData [] = wavObj.ReadingAudioFile(getExternalFilesDir(Environment.DIRECTORY_DOWNLOADS).getPath()+ &quot;/final_record.wav&quot;);\nfloat [] outputBuffer;\nTensorAudioFormat.Builder audioFormat = TensorAudioFormat.builder();\naudioFormat.setChannels(1);\naudioFormat.setSampleRate(16000);\nTensorAudio tensorAudio = TensorAudio.create(audioFormat.build(), audioFormat.build().getSampleRate());\ntensorAudio.load(audioData);\ntflite.run(tensorAudio.getTensorBuffer().getBuffer(), outputBuffer);\n</code></pre>\n<p>Here, <strong>wavObj.ReadingAudioFile</strong> is returning the audio buffer for the saved audio file. I am using TensorAudioFormat to explicitly set the channel type and sample rate to match the trained model. I have load the tflite-trained model into tflite Interpreter using the below code.</p>\n<pre><code>AssetFileDescriptor fileDescriptor = this.getAssets().openFd(modelPath); \nFileInputStream inputStream = new FileInputStream(fileDescriptor.getFileDescriptor()); \nFileChannel fileChannel = inputStream.getChannel(); \nlong startOffset = fileDescriptor.getStartOffset(); \nlong declaredLength = fileDescriptor.getDeclaredLength(); \nByteBuffer model = fileChannel.map(FileChannel.MapMode.READ_ONLY, startOffset, declaredLength); \nInterpreter.Options options = new Interpreter.Options(); \ntflite = new Interpreter(model, options);\n</code></pre>\n<p>Please suggest a solution to this problem.</p>\n<p>The TFlite model Interpreter should accept the audioBuffer for wav file and return the label id for the output classification.</p>\n"},{"tags":["java","android","maui"],"answers":[{"tags":[],"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695658032,"creation_date":1695658032,"answer_id":77174198,"question_id":77174130,"body_markdown":"If you&#39;re trying to launch your activity at startup-  you can&#39;t.  A broadcast receiver of a bakgrounded app cannot launch a foreground activity on modern android.  \r\n\r\nIf this is because you&#39;re writing a kiosk app, consider writing a launcher app to replace the home screen.  If this is any other app, the best you can do is put up a notification.","title":"How do I programmatically &quot;restart&quot; an Android app in.Net maui?","body":"<p>If you're trying to launch your activity at startup-  you can't.  A broadcast receiver of a bakgrounded app cannot launch a foreground activity on modern android.</p>\n<p>If this is because you're writing a kiosk app, consider writing a launcher app to replace the home screen.  If this is any other app, the best you can do is put up a notification.</p>\n"}],"owner":{"account_id":26757607,"reputation":1,"user_id":20355998,"display_name":"SAN SHEVA"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":256,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695658032,"creation_date":1695657214,"question_id":77174130,"body_markdown":"How do I programmatically &quot;restart&quot; an Android app in.Net maui?\r\n\r\n \r\n\r\nI have been trying to restart the application when the system reboot in .net maui app\r\n\r\n\r\nAndroidManifest.xml\r\n\r\n \r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n&lt;application android:allowBackup=&quot;true&quot; android:icon=&quot;@mipmap/appicon&quot; android:roundIcon=&quot;@mipmap/appicon_round&quot; android:supportsRtl=&quot;true&quot;&gt;\r\n&lt;receiver android:enabled=&quot;true&quot; android:name=&quot;com.companyname.mauiapp3.BootBroadcastReceiver&quot; android:exported=&quot;true&quot;&gt;\r\n&lt;intent-filter&gt;\r\n&lt;action android:name=&quot;android.intent.action.ACTION_BOOT_COMPLETED&quot; /&gt;\r\n&lt;/intent-filter&gt;\r\n&lt;/receiver&gt;\r\n&lt;/application&gt;\r\n&lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n&lt;uses-permission android:name=&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot; /&gt;\r\n&lt;/manifest&gt;\r\n```\r\n \r\n\r\n \r\n\r\nBootBroadcastReceiver.cs\r\n\r\n \r\n```\r\nusing global::Android.App;\r\nusing global::Android.Content; \r\n\r\n[BroadcastReceiver(Enabled = true, DirectBootAware = true,Exported = true)]\r\n[IntentFilter(new[] { Intent.ActionBootCompleted })]\r\n  public class BootBroadcastReceiver : BroadcastReceiver\r\n{\r\n   public override void OnReceive(Context context, Intent intent)\r\n   {\r\n      Intent i = new Intent(context, typeof(MainActivity));\r\n      i.AddFlags(ActivityFlags.NewTask);\r\n      context.StartActivity(i);\r\n    }\r\n}\r\n\r\n```\r\n\r\nMainActivity.cs\r\n\r\n \r\n```\r\n[Activity(Theme = &quot;@style/Maui.SplashTheme&quot;, MainLauncher = true, ConfigurationChanges = ConfigChanges.ScreenSize | ConfigChanges.Orientation | ConfigChanges.UiMode | ConfigChanges.ScreenLayout | ConfigChanges.SmallestScreenSize | ConfigChanges.Density)]\r\npublic class MainActivity : MauiAppCompatActivity\r\n{\r\n    BootBroadcastReceiver receiver;\r\n    protected override void OnCreate(Bundle savedInstanceState)\r\n    {\r\n        base.OnCreate(savedInstanceState);\r\n        receiver = new BootBroadcastReceiver();\r\n    }\r\n}\r\n```\r\n\r\n\r\nI already tried all answers related to this in stackoverflow it is not working.\r\n\r\n \r\n\r\nEnvironment: visual studio 2022 .NET MAUI version: MAUI 7.0","title":"How do I programmatically &quot;restart&quot; an Android app in.Net maui?","body":"<p>How do I programmatically &quot;restart&quot; an Android app in.Net maui?</p>\n<p>I have been trying to restart the application when the system reboot in .net maui app</p>\n<p>AndroidManifest.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\n&lt;application android:allowBackup=&quot;true&quot; android:icon=&quot;@mipmap/appicon&quot; android:roundIcon=&quot;@mipmap/appicon_round&quot; android:supportsRtl=&quot;true&quot;&gt;\n&lt;receiver android:enabled=&quot;true&quot; android:name=&quot;com.companyname.mauiapp3.BootBroadcastReceiver&quot; android:exported=&quot;true&quot;&gt;\n&lt;intent-filter&gt;\n&lt;action android:name=&quot;android.intent.action.ACTION_BOOT_COMPLETED&quot; /&gt;\n&lt;/intent-filter&gt;\n&lt;/receiver&gt;\n&lt;/application&gt;\n&lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot; /&gt;\n&lt;/manifest&gt;\n</code></pre>\n<p>BootBroadcastReceiver.cs</p>\n<pre><code>using global::Android.App;\nusing global::Android.Content; \n\n[BroadcastReceiver(Enabled = true, DirectBootAware = true,Exported = true)]\n[IntentFilter(new[] { Intent.ActionBootCompleted })]\n  public class BootBroadcastReceiver : BroadcastReceiver\n{\n   public override void OnReceive(Context context, Intent intent)\n   {\n      Intent i = new Intent(context, typeof(MainActivity));\n      i.AddFlags(ActivityFlags.NewTask);\n      context.StartActivity(i);\n    }\n}\n\n</code></pre>\n<p>MainActivity.cs</p>\n<pre><code>[Activity(Theme = &quot;@style/Maui.SplashTheme&quot;, MainLauncher = true, ConfigurationChanges = ConfigChanges.ScreenSize | ConfigChanges.Orientation | ConfigChanges.UiMode | ConfigChanges.ScreenLayout | ConfigChanges.SmallestScreenSize | ConfigChanges.Density)]\npublic class MainActivity : MauiAppCompatActivity\n{\n    BootBroadcastReceiver receiver;\n    protected override void OnCreate(Bundle savedInstanceState)\n    {\n        base.OnCreate(savedInstanceState);\n        receiver = new BootBroadcastReceiver();\n    }\n}\n</code></pre>\n<p>I already tried all answers related to this in stackoverflow it is not working.</p>\n<p>Environment: visual studio 2022 .NET MAUI version: MAUI 7.0</p>\n"},{"tags":["java","arangodb"],"comments":[{"owner":{"account_id":3912201,"reputation":6012,"user_id":3237176,"accept_rate":75,"display_name":"dothebart"},"score":0,"creation_date":1457455172,"post_id":35868466,"comment_id":59409783,"body_markdown":"Can you locate the stack trace where in the source this occured?","body":"Can you locate the stack trace where in the source this occured?"},{"owner":{"account_id":6890625,"reputation":607,"user_id":5294283,"accept_rate":69,"display_name":"Haseb Ansari"},"score":0,"creation_date":1457522830,"post_id":35868466,"comment_id":59441409,"body_markdown":"`CursorResult&lt;BaseDocument&gt; rs = driver.executeAqlQuery(query, null, null, BaseDocument.class);`  -- here","body":"<code>CursorResult&lt;BaseDocument&gt; rs = driver.executeAqlQuery(query, null, null, BaseDocument.class);</code>  -- here"},{"owner":{"account_id":3912201,"reputation":6012,"user_id":3237176,"accept_rate":75,"display_name":"dothebart"},"score":0,"creation_date":1457523650,"post_id":35868466,"comment_id":59442096,"body_markdown":"you did see that the example you pasted uses `executeAqlQueryRaw` and not `executeAqlQuery`?","body":"you did see that the example you pasted uses <code>executeAqlQueryRaw</code> and not <code>executeAqlQuery</code>?"},{"owner":{"account_id":6890625,"reputation":607,"user_id":5294283,"accept_rate":69,"display_name":"Haseb Ansari"},"score":0,"creation_date":1457548433,"post_id":35868466,"comment_id":59460021,"body_markdown":"whats the difference ?","body":"whats the difference ?"},{"owner":{"account_id":6890625,"reputation":607,"user_id":5294283,"accept_rate":69,"display_name":"Haseb Ansari"},"score":0,"creation_date":1457553613,"post_id":35868466,"comment_id":59463262,"body_markdown":"And also I have tried both ways","body":"And also I have tried both ways"}],"answers":[{"tags":[],"owner":{"account_id":6825774,"reputation":211,"user_id":5251539,"display_name":"Achim Brandt"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1460115594,"creation_date":1460115594,"answer_id":36498659,"question_id":35868466,"body_markdown":"Normally you have to use *driver.executeDocumentQuery(...)* for document queries.\r\n\r\nTo illustrate the differences between *driver.executeDocumentQuery(...)* and *driver.executeAqlQuery(...)* I added an [example](https://gist.github.com/bd68b523647548e5fb36d27c29561cfe).\r\n\r\nDownload the ArangoDB java driver on github and compile it with maven:\r\n\r\n    mvn clean install -DskipTests=true -Dgpg.skip=true -Dmaven.javadoc.skip=true -B\r\n\r\nMaven creates the standalone driver JAR file (arangodb-java-driver-X.X.X-SNAPSHOT-standalone.jar) containing all dependencies in the target directory.\r\n\r\nFetch the example code:\r\n\r\n     wget https://gist.githubusercontent.com/anonymous/bd68b523647548e5fb36d27c29561cfe/raw/f2922d431b9f1e5a3f3239e9024cf342536f55f7/AqlExample.java\r\n\r\nCompile the example code:\r\n\r\n     javac -classpath arangodb-java-driver-X.X.X-SNAPSHOT-standalone.jar AqlExample.java\r\n\r\nStart the ArangoDB without authentication on the default port and run the example code:\r\n\r\n     java -classpath arangodb-java-driver-X.X.X-SNAPSHOT-standalone.jar:. AqlExample\r\n\r\n","title":"How to execute an AQL query with Java API?","body":"<p>Normally you have to use <em>driver.executeDocumentQuery(...)</em> for document queries.</p>\n\n<p>To illustrate the differences between <em>driver.executeDocumentQuery(...)</em> and <em>driver.executeAqlQuery(...)</em> I added an <a href=\"https://gist.github.com/bd68b523647548e5fb36d27c29561cfe\" rel=\"noreferrer\">example</a>.</p>\n\n<p>Download the ArangoDB java driver on github and compile it with maven:</p>\n\n<pre><code>mvn clean install -DskipTests=true -Dgpg.skip=true -Dmaven.javadoc.skip=true -B\n</code></pre>\n\n<p>Maven creates the standalone driver JAR file (arangodb-java-driver-X.X.X-SNAPSHOT-standalone.jar) containing all dependencies in the target directory.</p>\n\n<p>Fetch the example code:</p>\n\n<pre><code> wget https://gist.githubusercontent.com/anonymous/bd68b523647548e5fb36d27c29561cfe/raw/f2922d431b9f1e5a3f3239e9024cf342536f55f7/AqlExample.java\n</code></pre>\n\n<p>Compile the example code:</p>\n\n<pre><code> javac -classpath arangodb-java-driver-X.X.X-SNAPSHOT-standalone.jar AqlExample.java\n</code></pre>\n\n<p>Start the ArangoDB without authentication on the default port and run the example code:</p>\n\n<pre><code> java -classpath arangodb-java-driver-X.X.X-SNAPSHOT-standalone.jar:. AqlExample\n</code></pre>\n"}],"owner":{"account_id":6890625,"reputation":607,"user_id":5294283,"accept_rate":69,"display_name":"Haseb Ansari"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1318,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":36498659,"answer_count":1,"score":3,"last_activity_date":1695657226,"creation_date":1457442990,"question_id":35868466,"body_markdown":"I have a collection named `docCollection` and I want to perform a normal AQL query on for example:\r\n\r\n    FOR id IN docCollection FILTER id.center == &quot;Germany&quot; RETURN id\r\n\r\nI have tried to use the example as stated here:\r\n\r\nhttps://github.com/arangodb/docs/blob/2f0a96c23630719e09f1b7af6aaf106c44332555/drivers/java-examples-xml-data.md\r\n\r\nBut it didn&#39;t worked for me and it showed me \r\n\r\n&gt;Exception in thread &quot;main&quot; java.lang.NullPointerException","title":"How to execute an AQL query with Java API?","body":"<p>I have a collection named <code>docCollection</code> and I want to perform a normal AQL query on for example:</p>\n<pre><code>FOR id IN docCollection FILTER id.center == &quot;Germany&quot; RETURN id\n</code></pre>\n<p>I have tried to use the example as stated here:</p>\n<p><a href=\"https://github.com/arangodb/docs/blob/2f0a96c23630719e09f1b7af6aaf106c44332555/drivers/java-examples-xml-data.md\" rel=\"nofollow noreferrer\">https://github.com/arangodb/docs/blob/2f0a96c23630719e09f1b7af6aaf106c44332555/drivers/java-examples-xml-data.md</a></p>\n<p>But it didn't worked for me and it showed me</p>\n<blockquote>\n<p>Exception in thread &quot;main&quot; java.lang.NullPointerException</p>\n</blockquote>\n"},{"tags":["java","maven","alfresco"],"comments":[{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1640511226,"post_id":70485211,"comment_id":124596616,"body_markdown":"Please check your filter: `org.alfresco.maven.archetype` see the docs you have linked...  see https://search.maven.org/search?q=org.alfresco.maven.archetype","body":"Please check your filter: <code>org.alfresco.maven.archetype</code> see the docs you have linked...  see <a href=\"https://search.maven.org/search?q=org.alfresco.maven.archetype\" rel=\"nofollow noreferrer\">search.maven.org/search?q=org.alfresco.maven.archetype</a>"},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1640514666,"post_id":70485211,"comment_id":124597115,"body_markdown":"Also use a more recent version of Maven...","body":"Also use a more recent version of Maven..."},{"owner":{"account_id":13146926,"reputation":1,"user_id":9496699,"display_name":"Mohamde amine Karek"},"score":0,"creation_date":1640523434,"post_id":70485211,"comment_id":124598619,"body_markdown":"@khmarbaise I did try it with Apache Maven 3.8.4 and I got the same message!","body":"@khmarbaise I did try it with Apache Maven 3.8.4 and I got the same message!"},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1640524274,"post_id":70485211,"comment_id":124598769,"body_markdown":"The issue not really the Maven version it&#39;s more important that you are using the wrong filter value...","body":"The issue not really the Maven version it&#39;s more important that you are using the wrong filter value..."},{"owner":{"account_id":13146926,"reputation":1,"user_id":9496699,"display_name":"Mohamde amine Karek"},"score":0,"creation_date":1640526653,"post_id":70485211,"comment_id":124599202,"body_markdown":"@khmarbaise I followed the tutorial step by step, I don&#39;t where I&#39;m wrong PS: I&#39;m new to Alfresco","body":"@khmarbaise I followed the tutorial step by step, I don&#39;t where I&#39;m wrong PS: I&#39;m new to Alfresco"},{"owner":{"account_id":8344973,"reputation":106,"user_id":6269054,"display_name":"AHT"},"score":0,"creation_date":1700002177,"post_id":70485211,"comment_id":136600968,"body_markdown":"Try with quotes in the Dfilter like this: mvn archetype:generate &quot;-Dfilter=org.alfresco:&quot;","body":"Try with quotes in the Dfilter like this: mvn archetype:generate &quot;-Dfilter=org.alfresco:&quot;"}],"answers":[{"tags":[],"owner":{"account_id":306132,"reputation":414,"user_id":616703,"display_name":"Will"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695657001,"creation_date":1695657001,"answer_id":77174109,"question_id":70485211,"body_markdown":"Maven: 3.9.2\r\n\r\nJava: Oracle 17.0.2\r\n\r\nRun with `-DinteractiveMode=true`\r\n\r\nThis will allow you to select from the list\r\n\r\n`mvn archetype:generate -DinteractiveMode=true`","title":"No archetype found in remote catalog, Alfresco Maven SDK","body":"<p>Maven: 3.9.2</p>\n<p>Java: Oracle 17.0.2</p>\n<p>Run with <code>-DinteractiveMode=true</code></p>\n<p>This will allow you to select from the list</p>\n<p><code>mvn archetype:generate -DinteractiveMode=true</code></p>\n"}],"owner":{"account_id":13146926,"reputation":1,"user_id":9496699,"display_name":"Mohamde amine Karek"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":165,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695657001,"creation_date":1640508288,"question_id":70485211,"body_markdown":"I&#39;m following this tutorial: https://docs.alfresco.com/content-services/latest/develop/sdk/#gettingstarted\r\n```\r\njava -version\r\njava version &quot;11.0.13&quot; 2021-10-19 LTS\r\nJava(TM) SE Runtime Environment 18.9 (build 11.0.13+10-LTS-370)\r\nJava HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.13+10-LTS-370, mixed mode)\r\n\r\nmvn -v\r\nApache Maven 3.3.9 (bb52d8502b132ec0a5a3f4c09453c07478323dc5; 2015-11-10T17:41:47+01:00)\r\nMaven home: C:\\apache-maven-3.3.9\\bin\\..\r\nJava version: 11.0.13, vendor: Oracle Corporation\r\nJava home: C:\\Program Files\\Java\\jdk-11.0.13\r\nDefault locale: fr_FR, platform encoding: Cp1252\r\nOS name: &quot;windows 10&quot;, version: &quot;10.0&quot;, arch: &quot;amd64&quot;, family: &quot;dos&quot;\r\n\r\ndocker -v\r\nDocker version 20.10.11, build dea9396\r\n```\r\nJAVA_HOME = C:\\Program Files\\Java\\jdk-11.0.13.\r\n\r\nthen when I try to generate a new alfresco project I get the following message:\r\n\r\n``` \r\nmvn archetype:generate -Dfilter=org.alfresco:\r\n[INFO] Scanning for projects...\r\n[INFO]\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Building Maven Stub Project (No POM) 1\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO]\r\n[INFO] &gt;&gt;&gt; maven-archetype-plugin:3.2.0:generate (default-cli) &gt; generate-sources @ standalone-pom &gt;&gt;&gt;\r\n[INFO]\r\n[INFO] &lt;&lt;&lt; maven-archetype-plugin:3.2.0:generate (default-cli) &lt; generate-sources @ standalone-pom &lt;&lt;&lt;\r\n[INFO]\r\n[INFO] --- maven-archetype-plugin:3.2.0:generate (default-cli) @ standalone-pom ---\r\n[INFO] Generating project in Interactive mode\r\n[WARNING] No archetype found in remote catalog. Defaulting to internal catalog\r\n[INFO] Your filter doesn&#39;t match any archetype, so try again with another value.\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD SUCCESS\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time: 47.903 s\r\n[INFO] Finished at: 2021-12-26T09:34:02+01:00\r\n[INFO] Final Memory: 14M/60M\r\n[INFO] ------------------------------------------------------------------------\r\n\r\n```\r\nWhat could be the problem?\r\n\r\nThanks\r\n\r\n\r\n","title":"No archetype found in remote catalog, Alfresco Maven SDK","body":"<p>I'm following this tutorial: <a href=\"https://docs.alfresco.com/content-services/latest/develop/sdk/#gettingstarted\" rel=\"nofollow noreferrer\">https://docs.alfresco.com/content-services/latest/develop/sdk/#gettingstarted</a></p>\n<pre><code>java -version\njava version &quot;11.0.13&quot; 2021-10-19 LTS\nJava(TM) SE Runtime Environment 18.9 (build 11.0.13+10-LTS-370)\nJava HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.13+10-LTS-370, mixed mode)\n\nmvn -v\nApache Maven 3.3.9 (bb52d8502b132ec0a5a3f4c09453c07478323dc5; 2015-11-10T17:41:47+01:00)\nMaven home: C:\\apache-maven-3.3.9\\bin\\..\nJava version: 11.0.13, vendor: Oracle Corporation\nJava home: C:\\Program Files\\Java\\jdk-11.0.13\nDefault locale: fr_FR, platform encoding: Cp1252\nOS name: &quot;windows 10&quot;, version: &quot;10.0&quot;, arch: &quot;amd64&quot;, family: &quot;dos&quot;\n\ndocker -v\nDocker version 20.10.11, build dea9396\n</code></pre>\n<p>JAVA_HOME = C:\\Program Files\\Java\\jdk-11.0.13.</p>\n<p>then when I try to generate a new alfresco project I get the following message:</p>\n<pre><code>mvn archetype:generate -Dfilter=org.alfresco:\n[INFO] Scanning for projects...\n[INFO]\n[INFO] ------------------------------------------------------------------------\n[INFO] Building Maven Stub Project (No POM) 1\n[INFO] ------------------------------------------------------------------------\n[INFO]\n[INFO] &gt;&gt;&gt; maven-archetype-plugin:3.2.0:generate (default-cli) &gt; generate-sources @ standalone-pom &gt;&gt;&gt;\n[INFO]\n[INFO] &lt;&lt;&lt; maven-archetype-plugin:3.2.0:generate (default-cli) &lt; generate-sources @ standalone-pom &lt;&lt;&lt;\n[INFO]\n[INFO] --- maven-archetype-plugin:3.2.0:generate (default-cli) @ standalone-pom ---\n[INFO] Generating project in Interactive mode\n[WARNING] No archetype found in remote catalog. Defaulting to internal catalog\n[INFO] Your filter doesn't match any archetype, so try again with another value.\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 47.903 s\n[INFO] Finished at: 2021-12-26T09:34:02+01:00\n[INFO] Final Memory: 14M/60M\n[INFO] ------------------------------------------------------------------------\n\n</code></pre>\n<p>What could be the problem?</p>\n<p>Thanks</p>\n"},{"tags":["java","tomcat","out-of-memory","redisson"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1695147140,"post_id":77136932,"comment_id":135984137,"body_markdown":"Use a profiler to see what&#39;s taking so much memory, or take a heap dump and analyze that.","body":"Use a profiler to see what&#39;s taking so much memory, or take a heap dump and analyze that."},{"owner":{"account_id":16306907,"reputation":117,"user_id":11776660,"display_name":"dssof"},"score":0,"creation_date":1695147530,"post_id":77136932,"comment_id":135984191,"body_markdown":"Actually the app uses normally uses a lot of memory, but It didn&#39;t crash until I made this change","body":"Actually the app uses normally uses a lot of memory, but It didn&#39;t crash until I made this change"},{"owner":{"account_id":16306907,"reputation":117,"user_id":11776660,"display_name":"dssof"},"score":0,"creation_date":1695148112,"post_id":77136932,"comment_id":135984279,"body_markdown":"That&#39;s not a very nice or useful answer, are you suggesting that I should never make changes on my app?","body":"That&#39;s not a very nice or useful answer, are you suggesting that I should never make changes on my app?"},{"owner":{"account_id":16306907,"reputation":117,"user_id":11776660,"display_name":"dssof"},"score":0,"creation_date":1695149692,"post_id":77136932,"comment_id":135984512,"body_markdown":"Actually it is an interesting detail, the same app is replicated in other servers without using redisson (the only change so far) and in those servers is working fine. So mostly it is a problem with that last change. I&#39;m trying to understand if it is memory leak problem or something else. Thanks anyway","body":"Actually it is an interesting detail, the same app is replicated in other servers without using redisson (the only change so far) and in those servers is working fine. So mostly it is a problem with that last change. I&#39;m trying to understand if it is memory leak problem or something else. Thanks anyway"}],"answers":[{"comments":[{"owner":{"account_id":16306907,"reputation":117,"user_id":11776660,"display_name":"dssof"},"score":0,"creation_date":1695648725,"post_id":77137055,"comment_id":136048656,"body_markdown":"How do you solve it? \nDid you limit the direct memory that netty can use?","body":"How do you solve it?  Did you limit the direct memory that netty can use?"},{"owner":{"account_id":24877985,"reputation":11,"user_id":18751556,"display_name":"Jeffery K"},"score":0,"creation_date":1695914782,"post_id":77137055,"comment_id":136090267,"body_markdown":"Well, a co-worker worked on it directly, but we ended up forking the redid-session-manager code, and limited the size of object we would save in certain use cases. But, this was 4 years ago, and there might be a better solution today.\nAlso, make sure your redis dependency versions are in-line with other dependencies, so it&#39;s not being downgraded, or upgraded, such that you have mis-matched client/netty code. That can also play into things somewhat.","body":"Well, a co-worker worked on it directly, but we ended up forking the redid-session-manager code, and limited the size of object we would save in certain use cases. But, this was 4 years ago, and there might be a better solution today. Also, make sure your redis dependency versions are in-line with other dependencies, so it&#39;s not being downgraded, or upgraded, such that you have mis-matched client/netty code. That can also play into things somewhat."}],"tags":[],"owner":{"account_id":24877985,"reputation":11,"user_id":18751556,"display_name":"Jeffery K"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695147707,"creation_date":1695147707,"answer_id":77137055,"question_id":77136932,"body_markdown":"I had a similar problem 4 years ago doing the same user session management in Redis, and I think the client library, specifically Netty, was using non-heap memory. \r\n\r\nAlso, when stuff starts to use non-heap memory, you may want to lower the allocation of tomcat, so it doesn&#39;t trigger that OOM-killer thread you saw the OS invoke to protect the kernel. The fix for oom-killer issues is opposite what you might think, and you need to reduce JVM allocation, to allow more memory for the OS/kernel. ","title":"Tomcat 8.5 Java 8 Out of Memory Error After Introducing Redis for Session Management","body":"<p>I had a similar problem 4 years ago doing the same user session management in Redis, and I think the client library, specifically Netty, was using non-heap memory.</p>\n<p>Also, when stuff starts to use non-heap memory, you may want to lower the allocation of tomcat, so it doesn't trigger that OOM-killer thread you saw the OS invoke to protect the kernel. The fix for oom-killer issues is opposite what you might think, and you need to reduce JVM allocation, to allow more memory for the OS/kernel.</p>\n"}],"owner":{"account_id":16306907,"reputation":117,"user_id":11776660,"display_name":"dssof"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":114,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695655806,"creation_date":1695146475,"question_id":77136932,"body_markdown":"I have a Java 8 application deployed on Tomcat 8.5, which has been running smoothly until recently when Tomcat abruptly stopped. After examining the logs, I identified an &quot;out of memory&quot; error:\r\n\r\n    java invoked oom-killer: gfp_mask=0x100dca(GFP_HIGHUSER_MOVABLE|__GFP_ZERO), order=0, oom_score_adj=0\r\n\r\n\r\nThe application had been functioning correctly until now, and the only major change was the introduction of Redis for user session management, utilizing the Redisson library. Redis is installed on the same physical server where the Tomcat application resides. The application is allocated the majority of the available memory, leaving approximately 2 GB for everything else.\r\n\r\nOn the first day of the crash, I noticed that the garbage collector was releasing memory, but the jvm crashed anyway.\r\n[![enter image description here][1]][1]\r\n\r\n[![enter image description here][2]][2]\r\n\r\nOn the second day, this was the state of Old Gen heap usage:\r\n\r\n[![enter image description here][3]][3]\r\n\r\nAnd this was the GC activity:\r\n\r\n[![enter image description here][4]][4]\r\n\r\nIt appears that there were no major garbage collections despite memory approaching its limit.\r\n\r\nI&#39;m trying to understand if this is a problem related to sharing the server resources between Tomcat and Redis or if it&#39;s potentially a memory leak within the application. Any insights or suggestions on how to diagnose and resolve this issue would be greatly appreciated.\r\n\r\n  [1]: https://i.stack.imgur.com/bIGMp.png\r\n  [2]: https://i.stack.imgur.com/xEkMM.png\r\n  [3]: https://i.stack.imgur.com/jws87.png\r\n  [4]: https://i.stack.imgur.com/ihQIY.png","title":"Tomcat 8.5 Java 8 Out of Memory Error After Introducing Redis for Session Management","body":"<p>I have a Java 8 application deployed on Tomcat 8.5, which has been running smoothly until recently when Tomcat abruptly stopped. After examining the logs, I identified an &quot;out of memory&quot; error:</p>\n<pre><code>java invoked oom-killer: gfp_mask=0x100dca(GFP_HIGHUSER_MOVABLE|__GFP_ZERO), order=0, oom_score_adj=0\n</code></pre>\n<p>The application had been functioning correctly until now, and the only major change was the introduction of Redis for user session management, utilizing the Redisson library. Redis is installed on the same physical server where the Tomcat application resides. The application is allocated the majority of the available memory, leaving approximately 2 GB for everything else.</p>\n<p>On the first day of the crash, I noticed that the garbage collector was releasing memory, but the jvm crashed anyway.\n<a href=\"https://i.stack.imgur.com/bIGMp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bIGMp.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/xEkMM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xEkMM.png\" alt=\"enter image description here\" /></a></p>\n<p>On the second day, this was the state of Old Gen heap usage:</p>\n<p><a href=\"https://i.stack.imgur.com/jws87.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jws87.png\" alt=\"enter image description here\" /></a></p>\n<p>And this was the GC activity:</p>\n<p><a href=\"https://i.stack.imgur.com/ihQIY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ihQIY.png\" alt=\"enter image description here\" /></a></p>\n<p>It appears that there were no major garbage collections despite memory approaching its limit.</p>\n<p>I'm trying to understand if this is a problem related to sharing the server resources between Tomcat and Redis or if it's potentially a memory leak within the application. Any insights or suggestions on how to diagnose and resolve this issue would be greatly appreciated.</p>\n"},{"tags":["java","windows","selenium-webdriver","selenium-chromedriver","portability"],"owner":{"account_id":15843819,"reputation":1,"user_id":11431598,"display_name":"Alex Blade"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695655283,"creation_date":1695655283,"question_id":77173940,"body_markdown":"I have fresh new win 10 pro PC. w/o any google apps. and w/o any bluetooth card/devices.\r\nI have installed last Intelij IDEA + chromedriver + chromeportable from portableapps.com\r\n\r\nand when I run my code (as admin)\r\n```\r\n        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;drivers/chromedriver.exe&quot;);\r\n        ChromeOptions options = new ChromeOptions();\r\n        options.setBinary(&quot;D:\\\\Program Files\\\\ChromePortable\\\\ChromePortable.exe&quot;);\r\n        options.addArguments(&quot;--user-data-dir=d:\\\\Documents\\\\Temp\\\\&quot;); // If I comment this I get sandbox error\r\n//        options.addArguments(&quot;--disable-features=WebBluetooth&quot;);\r\n//        options.addArguments(&quot;--headless&quot;); // Run Chrome in headless mode\r\n//        options.addArguments(&quot;--no-sandbox&quot;);\r\n&#160;\r\n        // Create a WebDriver instance with the specified options.\r\n        WebDriver driver = new ChromeDriver(options);\r\n&#160;\r\n        // Navigate to Google.\r\n        driver.get(&quot;https://www.gmail.com/&quot;);\r\n```\r\n\r\nI get error \r\n```\r\nDevTools listening on ws://127.0.0.1:51790/devtools/browser/43cdaac2-0bcb-4785-ad8f-b6a8717d0657\r\n[3884:10284:0922/175934.295:ERROR:device_event_log_impl.cc(215)] [17:59:34.295] Bluetooth: bluetooth_adapter_winrt.cc:1074 Getting Default Adapter failed.\r\n```\r\n\r\nwhen I run w/o admin rights I get error\r\n\r\n```\r\nFailed to grant sandbox access to network context data directory D:\\Program Files\\ChromePortable\\Data\\profile\\Default\\Network: Access is denied. (0x5)\r\n```\r\n\r\n\r\nPS: When I have the same config on win 7 I could easily ran chromedriver\r\n\r\nrun with and without administrator.\r\nrun with and without argument options","title":"Is it possible to run chromedriver on win 10 using portable chrome?","body":"<p>I have fresh new win 10 pro PC. w/o any google apps. and w/o any bluetooth card/devices.\nI have installed last Intelij IDEA + chromedriver + chromeportable from portableapps.com</p>\n<p>and when I run my code (as admin)</p>\n<pre><code>        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;drivers/chromedriver.exe&quot;);\n        ChromeOptions options = new ChromeOptions();\n        options.setBinary(&quot;D:\\\\Program Files\\\\ChromePortable\\\\ChromePortable.exe&quot;);\n        options.addArguments(&quot;--user-data-dir=d:\\\\Documents\\\\Temp\\\\&quot;); // If I comment this I get sandbox error\n//        options.addArguments(&quot;--disable-features=WebBluetooth&quot;);\n//        options.addArguments(&quot;--headless&quot;); // Run Chrome in headless mode\n//        options.addArguments(&quot;--no-sandbox&quot;);\n \n        // Create a WebDriver instance with the specified options.\n        WebDriver driver = new ChromeDriver(options);\n \n        // Navigate to Google.\n        driver.get(&quot;https://www.gmail.com/&quot;);\n</code></pre>\n<p>I get error</p>\n<pre><code>DevTools listening on ws://127.0.0.1:51790/devtools/browser/43cdaac2-0bcb-4785-ad8f-b6a8717d0657\n[3884:10284:0922/175934.295:ERROR:device_event_log_impl.cc(215)] [17:59:34.295] Bluetooth: bluetooth_adapter_winrt.cc:1074 Getting Default Adapter failed.\n</code></pre>\n<p>when I run w/o admin rights I get error</p>\n<pre><code>Failed to grant sandbox access to network context data directory D:\\Program Files\\ChromePortable\\Data\\profile\\Default\\Network: Access is denied. (0x5)\n</code></pre>\n<p>PS: When I have the same config on win 7 I could easily ran chromedriver</p>\n<p>run with and without administrator.\nrun with and without argument options</p>\n"},{"tags":["java","mysql","spring","spring-boot","jdbctemplate"],"comments":[{"owner":{"account_id":7291967,"reputation":57515,"user_id":5558072,"accept_rate":100,"display_name":"Youcef LAIDANI"},"score":0,"creation_date":1505297620,"post_id":46194762,"comment_id":79351786,"body_markdown":"can show us the `sqlString` please?","body":"can show us the <code>sqlString</code> please?"},{"owner":{"account_id":63444,"reputation":7018,"user_id":187808,"accept_rate":100,"display_name":"Tamas Rev"},"score":0,"creation_date":1505297656,"post_id":46194762,"comment_id":79351810,"body_markdown":"What kind of exception do you get? Can you run this `SELECT INTO` manually?","body":"What kind of exception do you get? Can you run this <code>SELECT INTO</code> manually?"},{"owner":{"account_id":1587997,"reputation":6860,"user_id":1471921,"accept_rate":59,"display_name":"Akshay Lokur"},"score":0,"creation_date":1505297694,"post_id":46194762,"comment_id":79351839,"body_markdown":"@YCF_L: sqlString is the SQLs I have given in question...","body":"@YCF_L: sqlString is the SQLs I have given in question..."},{"owner":{"account_id":1587997,"reputation":6860,"user_id":1471921,"accept_rate":59,"display_name":"Akshay Lokur"},"score":0,"creation_date":1505297793,"post_id":46194762,"comment_id":79351918,"body_markdown":"@Tamas Rev: I am not getting any exception. Just data is not getting inserted. Select statement when run manually on its own does return data...","body":"@Tamas Rev: I am not getting any exception. Just data is not getting inserted. Select statement when run manually on its own does return data..."},{"owner":{"account_id":1133647,"reputation":2061,"user_id":1119161,"accept_rate":31,"display_name":"dsp_user"},"score":1,"creation_date":1505298223,"post_id":46194762,"comment_id":79352277,"body_markdown":"Run the select statement in a DB client program (SqlSquirrel, DB Visualizer etc) and see if it returns any rows.","body":"Run the select statement in a DB client program (SqlSquirrel, DB Visualizer etc) and see if it returns any rows."},{"owner":{"account_id":63444,"reputation":7018,"user_id":187808,"accept_rate":100,"display_name":"Tamas Rev"},"score":0,"creation_date":1505298274,"post_id":46194762,"comment_id":79352313,"body_markdown":"So, what happens when you run this SQL manually? Maybe that doesn&#39;t return data either. In that case, your template works perfectly.","body":"So, what happens when you run this SQL manually? Maybe that doesn&#39;t return data either. In that case, your template works perfectly."},{"owner":{"account_id":1587997,"reputation":6860,"user_id":1471921,"accept_rate":59,"display_name":"Akshay Lokur"},"score":0,"creation_date":1505298462,"post_id":46194762,"comment_id":79352436,"body_markdown":"@dsp_user: :) yes off course I have done that! Please read comment reply I have given to Tamas Rev on top of your comment!","body":"@dsp_user: :) yes off course I have done that! Please read comment reply I have given to Tamas Rev on top of your comment!"},{"owner":{"account_id":1587997,"reputation":6860,"user_id":1471921,"accept_rate":59,"display_name":"Akshay Lokur"},"score":0,"creation_date":1505298509,"post_id":46194762,"comment_id":79352465,"body_markdown":"@Tamas Rev: I mentioned to you in my comment above - &quot;Select statement when run manually on its own does return data&quot;","body":"@Tamas Rev: I mentioned to you in my comment above - &quot;Select statement when run manually on its own does return data&quot;"}],"answers":[{"comments":[{"owner":{"account_id":2085695,"reputation":1023,"user_id":1856744,"accept_rate":4,"display_name":"Stunner"},"score":1,"creation_date":1582264921,"post_id":46195877,"comment_id":106724635,"body_markdown":"do u have the answer why the jdbc template dint work.. what was the issue","body":"do u have the answer why the jdbc template dint work.. what was the issue"}],"tags":[],"owner":{"account_id":1587997,"reputation":6860,"user_id":1471921,"accept_rate":59,"display_name":"Akshay Lokur"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1505300745,"creation_date":1505300745,"answer_id":46195877,"question_id":46194762,"body_markdown":"I had to resort to plain JDBC and it worked:\r\n\r\n    Class.forName(&quot;com.mysql.jdbc.Driver&quot;);\r\n    Connection conn = DriverManager.getConnection(&quot;jdbc:mysql://localhost/mySchema?autoReconnect=true&amp;useSSL=false&amp;rewriteBatchedStatements=true&quot;,\r\n        &quot;root&quot;, &quot;root&quot;);\r\n    Statement stmt = conn.createStatement();\r\n    int flag = stmt.executeUpdate(sqlString);\r\n    LOGGER.info(&quot;Flag = {}&quot;, flag);\r\n\r\nNot sure why Spring JdbcTemplate can not handle such thing!","title":"Spring JdbcTemplate &quot;insert into.. select from..&quot; not working","body":"<p>I had to resort to plain JDBC and it worked:</p>\n\n<pre><code>Class.forName(\"com.mysql.jdbc.Driver\");\nConnection conn = DriverManager.getConnection(\"jdbc:mysql://localhost/mySchema?autoReconnect=true&amp;useSSL=false&amp;rewriteBatchedStatements=true\",\n    \"root\", \"root\");\nStatement stmt = conn.createStatement();\nint flag = stmt.executeUpdate(sqlString);\nLOGGER.info(\"Flag = {}\", flag);\n</code></pre>\n\n<p>Not sure why Spring JdbcTemplate can not handle such thing!</p>\n"},{"tags":[],"owner":{"account_id":2774008,"reputation":18025,"user_id":2387977,"accept_rate":69,"display_name":"Dherik"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1600425181,"creation_date":1600425181,"answer_id":63954059,"question_id":46194762,"body_markdown":"You can use the `execute` method. Like:\r\n\r\n    jdbcTemplate.execute(&quot;INSERT INTO table1 (some_id, some_key, some_text) &quot; +\r\n          &quot;SELECT id, key, text from table2 t2 &quot; +\r\n          &quot;LIMIT ?&quot;, (PreparedStatementCallback&lt;Boolean&gt;) ps -&gt; {\r\n                          ps.setInt(1, 400);\r\n                          return ps.execute();\r\n                      });","title":"Spring JdbcTemplate &quot;insert into.. select from..&quot; not working","body":"<p>You can use the <code>execute</code> method. Like:</p>\n<pre><code>jdbcTemplate.execute(&quot;INSERT INTO table1 (some_id, some_key, some_text) &quot; +\n      &quot;SELECT id, key, text from table2 t2 &quot; +\n      &quot;LIMIT ?&quot;, (PreparedStatementCallback&lt;Boolean&gt;) ps -&gt; {\n                      ps.setInt(1, 400);\n                      return ps.execute();\n                  });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16106192,"reputation":11,"user_id":11625650,"display_name":"mrNormal Kolos"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695654481,"creation_date":1695654481,"answer_id":77173853,"question_id":46194762,"body_markdown":"If you run it in IDEA, check temporally files if you open DB from resource file.\r\nI store my DB file exampleDB.db in src/main/resorces/db folder, so i found my temporally db file in build/resources/main/db/exampleDB.db. Try to open it temporally file to check it contain. ","title":"Spring JdbcTemplate &quot;insert into.. select from..&quot; not working","body":"<p>If you run it in IDEA, check temporally files if you open DB from resource file.\nI store my DB file exampleDB.db in src/main/resorces/db folder, so i found my temporally db file in build/resources/main/db/exampleDB.db. Try to open it temporally file to check it contain.</p>\n"}],"owner":{"account_id":1587997,"reputation":6860,"user_id":1471921,"accept_rate":59,"display_name":"Akshay Lokur"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5808,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":46195877,"answer_count":3,"score":2,"last_activity_date":1695654481,"creation_date":1505297498,"question_id":46194762,"body_markdown":"I am trying to execute following SQL with Spring JdbcTemplate:\r\n\r\n    INSERT INTO japan_wht.PIVOT_20427002(doc_header_text, value_date, total_amt, is_refund)\t\t\t\t\t   \r\n     (SELECT \r\n        doc_header_text, DATE(value_date), SUM(LOCAL_CCY_AMT), is_refund\r\n     FROM\r\n        (SELECT \r\n            *\r\n        FROM\r\n            japan_wht.DATA_20427002\r\n    \tWHERE IS_REFUND in (&#39;N&#39;)\r\n        ) t \r\n    GROUP BY DATE(value_date) , doc_header_text, is_refund)\r\n\r\nHowever, it does not insert anything into database table and no error is thrown.\r\n\r\nWhen I tried to execute following SQL with JdbcTemplate, it works and inserts data in DB table:\r\n\r\n    INSERT INTO japan_wht.PIVOT_20427002(id, doc_header_text, value_date, total_amt, is_refund)\tvalues(&#39;1&#39;, &#39;1&#39;, &#39;2017-12-31&#39;, 3000, &#39;Y&#39;);\r\n\r\nBelow is my call to execute above SQLs:\r\n\r\n    jdbcTemplate.update(sqlString);\r\n\r\nNot sure what is going wrong here.\r\n","title":"Spring JdbcTemplate &quot;insert into.. select from..&quot; not working","body":"<p>I am trying to execute following SQL with Spring JdbcTemplate:</p>\n\n<pre><code>INSERT INTO japan_wht.PIVOT_20427002(doc_header_text, value_date, total_amt, is_refund)                    \n (SELECT \n    doc_header_text, DATE(value_date), SUM(LOCAL_CCY_AMT), is_refund\n FROM\n    (SELECT \n        *\n    FROM\n        japan_wht.DATA_20427002\n    WHERE IS_REFUND in ('N')\n    ) t \nGROUP BY DATE(value_date) , doc_header_text, is_refund)\n</code></pre>\n\n<p>However, it does not insert anything into database table and no error is thrown.</p>\n\n<p>When I tried to execute following SQL with JdbcTemplate, it works and inserts data in DB table:</p>\n\n<pre><code>INSERT INTO japan_wht.PIVOT_20427002(id, doc_header_text, value_date, total_amt, is_refund) values('1', '1', '2017-12-31', 3000, 'Y');\n</code></pre>\n\n<p>Below is my call to execute above SQLs:</p>\n\n<pre><code>jdbcTemplate.update(sqlString);\n</code></pre>\n\n<p>Not sure what is going wrong here.</p>\n"},{"tags":["java","rest","postman"],"comments":[{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":1,"creation_date":1693975271,"post_id":77049015,"comment_id":135828802,"body_markdown":"You’re looking for the [Accept](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept) header","body":"You’re looking for the <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept\" rel=\"nofollow noreferrer\">Accept</a> header"},{"owner":{"account_id":9469211,"reputation":131,"user_id":7040519,"accept_rate":38,"display_name":"ASP"},"score":0,"creation_date":1693995627,"post_id":77049015,"comment_id":135832106,"body_markdown":"Yes, How can I add it from java application and not from postman request header","body":"Yes, How can I add it from java application and not from postman request header"},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1693997814,"post_id":77049015,"comment_id":135832517,"body_markdown":"The Accept header needs to appear in the request. If you want your application to _only_ produce JSON, remove “application/xml” from the Produces annotation.","body":"The Accept header needs to appear in the request. If you want your application to <i>only</i> produce JSON, remove “application/xml” from the Produces annotation."},{"owner":{"account_id":9469211,"reputation":131,"user_id":7040519,"accept_rate":38,"display_name":"ASP"},"score":0,"creation_date":1694001540,"post_id":77049015,"comment_id":135833177,"body_markdown":"Actually response is dynamic that&#39;s why I have added  @Produces({&quot;application/xml&quot;, &quot;application/json&quot;}) . If response is json then I want application/json in response header and wise a versa","body":"Actually response is dynamic that&#39;s why I have added  @Produces({&quot;application/xml&quot;, &quot;application/json&quot;}) . If response is json then I want application/json in response header and wise a versa"},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1694002331,"post_id":77049015,"comment_id":135833345,"body_markdown":"Does this answer your question? [@Produces annotation in JAX-RS](https://stackoverflow.com/questions/24257314/produces-annotation-in-jax-rs)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/24257314/produces-annotation-in-jax-rs\">@Produces annotation in JAX-RS</a>"}],"owner":{"account_id":9469211,"reputation":131,"user_id":7040519,"accept_rate":38,"display_name":"ASP"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695654351,"creation_date":1693974382,"question_id":77049015,"body_markdown":"I am using postman to call REST API providing Content-Type as application/json and response is in JSON format only, but when I check for response header in postman it is showing as application/xml how can I change this according to my request Content-Type.\r\n\r\nRequest\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nResponse Header :\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\nI have tried proving `@Produces({&quot;application/xml&quot;, &quot;application/json&quot;})` annotation in my Java action class. Also tried to override header in `HttpServletResponse (response.setHeader(&quot;Content-Type&quot;, &quot;application/json&quot;);` but still it is not working. \r\n\r\n  [1]: https://i.stack.imgur.com/uBprW.png\r\n  [2]: https://i.stack.imgur.com/ZdUt1.png","title":"Unable to change postman Content-Type while running rest API","body":"<p>I am using postman to call REST API providing Content-Type as application/json and response is in JSON format only, but when I check for response header in postman it is showing as application/xml how can I change this according to my request Content-Type.</p>\n<p>Request</p>\n<p><a href=\"https://i.stack.imgur.com/uBprW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uBprW.png\" alt=\"enter image description here\" /></a></p>\n<p>Response Header :</p>\n<p><a href=\"https://i.stack.imgur.com/ZdUt1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZdUt1.png\" alt=\"enter image description here\" /></a></p>\n<p>I have tried proving <code>@Produces({&quot;application/xml&quot;, &quot;application/json&quot;})</code> annotation in my Java action class. Also tried to override header in <code>HttpServletResponse (response.setHeader(&quot;Content-Type&quot;, &quot;application/json&quot;);</code> but still it is not working.</p>\n"},{"tags":["java","mockito"],"comments":[{"owner":{"account_id":20228,"reputation":40720,"user_id":48136,"display_name":"bric3"},"score":0,"creation_date":1464617549,"post_id":37527038,"comment_id":62546649,"body_markdown":"Not enough information : Java version, actual test, OSGI, etc. ? I don&#39;t have any problem mocking the afore mentioned code. To me this seems to be a classloading issue that may be caused by the environment setup.","body":"Not enough information : Java version, actual test, OSGI, etc. ? I don&#39;t have any problem mocking the afore mentioned code. To me this seems to be a classloading issue that may be caused by the environment setup."},{"owner":{"account_id":20228,"reputation":40720,"user_id":48136,"display_name":"bric3"},"score":0,"creation_date":1464618136,"post_id":37527038,"comment_id":62546964,"body_markdown":"However with a second look at the stacktrace this may looke like a problem a classloading issue caused by the Android environment setup. This could be something that bytebuddy can deal with however.","body":"However with a second look at the stacktrace this may looke like a problem a classloading issue caused by the Android environment setup. This could be something that bytebuddy can deal with however."},{"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"score":0,"creation_date":1464618459,"post_id":37527038,"comment_id":62547163,"body_markdown":"OK, @Brice, I added a specific commit for you to check out and specific test code.","body":"OK, @Brice, I added a specific commit for you to check out and specific test code."},{"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"score":0,"creation_date":1464618480,"post_id":37527038,"comment_id":62547183,"body_markdown":"I am not using Android for this project.","body":"I am not using Android for this project."},{"owner":{"account_id":20228,"reputation":40720,"user_id":48136,"display_name":"bric3"},"score":1,"creation_date":1464620862,"post_id":37527038,"comment_id":62548508,"body_markdown":"Oups context switch on some code about the Android comment. Anyway I agree with Rafael, you may want to upgrade Java. Also does the same problem appears o the command line (with Eclipse **not** started, I&#39;ve seen the Eclipse compiler interfere with maven compilation and in a bad way)","body":"Oups context switch on some code about the Android comment. Anyway I agree with Rafael, you may want to upgrade Java. Also does the same problem appears o the command line (with Eclipse <b>not</b> started, I&#39;ve seen the Eclipse compiler interfere with maven compilation and in a bad way)"}],"answers":[{"comments":[{"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"score":0,"creation_date":1556381256,"post_id":37528479,"comment_id":98423395,"body_markdown":"I&#39;m not sure that I ever reported back, but updating the JVM indeed solved the problem. Thanks!","body":"I&#39;m not sure that I ever reported back, but updating the JVM indeed solved the problem. Thanks!"}],"tags":[],"owner":{"account_id":1284143,"reputation":43090,"user_id":1237575,"accept_rate":96,"display_name":"Rafael Winterhalter"},"comment_count":1,"down_vote_count":0,"up_vote_count":26,"is_accepted":true,"score":26,"last_activity_date":1464619627,"creation_date":1464619627,"answer_id":37528479,"question_id":37527038,"body_markdown":"Your Java runtime version is from March 2014; plenty of bugs have been fixed in the VM ever since and you should really upgrade. I am 99% sure that this problem is related to type annotations (`@NonNull`) which were introduced in this version for the first time in this exact release. I am sure that your problem will go away if you upgrade your VM.\r\n\r\nI can successfully execute your proposed test with a recent build of the HotSpot VM.","title":"Mockito object is not an instance of declaring class","body":"<p>Your Java runtime version is from March 2014; plenty of bugs have been fixed in the VM ever since and you should really upgrade. I am 99% sure that this problem is related to type annotations (<code>@NonNull</code>) which were introduced in this version for the first time in this exact release. I am sure that your problem will go away if you upgrade your VM.</p>\n\n<p>I can successfully execute your proposed test with a recent build of the HotSpot VM.</p>\n"},{"tags":[],"owner":{"account_id":7140279,"reputation":141,"user_id":5458232,"display_name":"dqromney"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1533766550,"creation_date":1533766550,"answer_id":51756407,"question_id":37527038,"body_markdown":"Had the same issue with my project and used the Rincl project above to confirm I was having the same issue. Using JDK 1.8.0_11 on Mac the reported errors were the same as Garret. Updating to version JDK 1.8.0_181 I ran the Rincl test with NO errors. Apparently Mockito is using the latest of the JDK 1.8.0. ","title":"Mockito object is not an instance of declaring class","body":"<p>Had the same issue with my project and used the Rincl project above to confirm I was having the same issue. Using JDK 1.8.0_11 on Mac the reported errors were the same as Garret. Updating to version JDK 1.8.0_181 I ran the Rincl test with NO errors. Apparently Mockito is using the latest of the JDK 1.8.0. </p>\n"},{"tags":[],"owner":{"account_id":2819789,"reputation":455,"user_id":2423793,"accept_rate":40,"display_name":"Divas"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1566737645,"creation_date":1566737645,"answer_id":57646194,"question_id":37527038,"body_markdown":"If this is helpful to anyone, I got the same above issue and tried all other options like upgrading the JVM etc, but what solved my issue is :\r\nhttps://github.com/mockito/mockito/issues/1606\r\n\r\nBy and large reverting my mockito version to 2.23.+ solved the issue for me.","title":"Mockito object is not an instance of declaring class","body":"<p>If this is helpful to anyone, I got the same above issue and tried all other options like upgrading the JVM etc, but what solved my issue is :\n<a href=\"https://github.com/mockito/mockito/issues/1606\" rel=\"nofollow noreferrer\">https://github.com/mockito/mockito/issues/1606</a></p>\n\n<p>By and large reverting my mockito version to 2.23.+ solved the issue for me.</p>\n"}],"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22363,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":37528479,"answer_count":3,"score":16,"last_activity_date":1695654257,"creation_date":1464615293,"question_id":37527038,"body_markdown":"I haven&#39;t touched Mockito for a while, and I have never used it extensively. But today in some new code I wanted to use best practices so I pulled out mockito-core 2.0.54-beta using the following Java version:\r\n\r\n    java version &quot;1.8.0&quot;\r\n    Java(TM) SE Runtime Environment (build 1.8.0-b132)\r\n    Java HotSpot(TM) 64-Bit Server VM (build 25.0-b70, mixed mode)\r\n\r\nI needed an instance of this interface for testing:\r\n\r\nhttps://bitbucket.org/globalmentor/rincl/src/bf0e8875a1bae16247dd904e0b8bc067c9f8abc9/src/main/java/io/rincl/ResourceI18nConcern.java\r\n\r\n\tpublic interface ResourceI18nConcern extends Concern {\r\n\r\n\t\tpublic Locale getLocale(@Nonnull Locale.Category category);\r\n\r\n\t\tpublic void setLocale(@Nonnull Locale.Category category, @Nonnull Locale locale);\r\n\r\n\t\tpublic default void setLocale(@Nonnull Locale locale) {...}\r\n\r\n\t\tpublic Resources getResources(@Nonnull final Class&lt;?&gt; contextClass) throws ResourceConfigurationException;\r\n\r\n\t}\r\n\r\nThat interface extends this one (just an empty marker interface):\r\n\r\nhttps://bitbucket.org/globalmentor/csar/src/125b837e9936ddb8d6340fa99b6b5da872d1e6e5/src/main/java/io/csar/Concern.java\r\n\r\nIn my test I tried to do this simple thing:\r\n\r\n    final ResourceI18nConcern defaultConcern=mock(ResourceI18nConcern.class);\r\n\r\nI get the following stack trace:\r\n\r\n\torg.mockito.exceptions.base.MockitoException:\r\n\tMockito cannot mock this class: interface io.rincl.ResourceI18nConcern\r\n\r\n\tMockito can only mock visible &amp; non-final classes.\r\n\tIf you&#39;re not sure why you&#39;re getting this error, please report to the mailing list.\r\n\r\n\tUnderlying exception : java.lang.IllegalArgumentException: object is not an instance of declaring class\r\n\t    at io.rincl.RinclTest.defaultConcernRinclGetLocaleIsConcernLocale(RinclTest.java:91)\r\n\t    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\t    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\t    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\t    at java.lang.reflect.Method.invoke(Method.java:483)\r\n\t    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\r\n\t    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\t    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\r\n\t    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n\t    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\r\n\t    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\r\n\t    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\r\n\t    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\r\n\t    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\r\n\t    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n\t    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n\t    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n\t    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n\t    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n\t    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n\t    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:86)\r\n\t    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\r\n\t    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)\r\n\t    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:675)\r\n\t    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)\r\n\t    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)\r\n\tCaused by: java.lang.IllegalArgumentException: object is not an instance of declaring class\r\n\t    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\t    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\t    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\t    at java.lang.reflect.Method.invoke(Method.java:483)\r\n\t    at net.bytebuddy.description.type.TypeDescription$Generic$AnnotationReader$ForTypeArgument.resolve(TypeDescription.java:3875)\r\n\t    at net.bytebuddy.description.type.TypeDescription$Generic$AnnotationReader$Delegator$Chained.resolve(TypeDescription.java:3501)\r\n\t    at net.bytebuddy.description.type.TypeDescription$Generic$AnnotationReader$ForTypeArgument.resolve(TypeDescription.java:3834)\r\n\t    at net.bytebuddy.description.type.TypeDescription$Generic$AnnotationReader$Delegator.asList(TypeDescription.java:3477)\r\n\t    at net.bytebuddy.description.type.TypeDescription$Generic$OfWildcardType$ForLoadedType.getDeclaredAnnotations(TypeDescription.java:4771)\r\n\t    at net.bytebuddy.description.type.TypeDescription$Generic$Visitor$TypeVariableErasing.onWildcard(TypeDescription.java:676)\r\n\t    at net.bytebuddy.description.type.TypeDescription$Generic$Visitor$TypeVariableErasing.onWildcard(TypeDescription.java:659)\r\n\t    at net.bytebuddy.description.type.TypeDescription$Generic$OfWildcardType.accept(TypeDescription.java:4679)\r\n\t    at net.bytebuddy.description.type.TypeDescription$Generic$Visitor$TypeVariableErasing.onParameterizedType(TypeDescription.java:687)\r\n\t    at net.bytebuddy.description.type.TypeDescription$Generic$Visitor$TypeVariableErasing.onParameterizedType(TypeDescription.java:659)\r\n\t    at net.bytebuddy.description.type.TypeDescription$Generic$OfParameterizedType.accept(TypeDescription.java:5021)\r\n\t    at net.bytebuddy.description.type.TypeDescription$Generic$LazyProjection.accept(TypeDescription.java:5794)\r\n\t    at net.bytebuddy.description.method.ParameterDescription$TypeSubstituting.getType(ParameterDescription.java:866)\r\n\t    at net.bytebuddy.description.method.ParameterList$AbstractBase.asTypeList(ParameterList.java:85)\r\n\t    at net.bytebuddy.description.method.MethodDescription$AbstractBase.asTypeToken(MethodDescription.java:635)\r\n\t    at net.bytebuddy.dynamic.scaffold.MethodGraph$Compiler$Default$Key$Harmonized.of(MethodGraph.java:862)\r\n\t    at net.bytebuddy.dynamic.scaffold.MethodGraph$Compiler$Default$Key$Store.registerTopLevel(MethodGraph.java:1059)\r\n\t    at net.bytebuddy.dynamic.scaffold.MethodGraph$Compiler$Default.doAnalyze(MethodGraph.java:569)\r\n\t    at net.bytebuddy.dynamic.scaffold.MethodGraph$Compiler$Default.analyze(MethodGraph.java:529)\r\n\t    at net.bytebuddy.dynamic.scaffold.MethodGraph$Compiler$Default.doAnalyze(MethodGraph.java:565)\r\n\t    at net.bytebuddy.dynamic.scaffold.MethodGraph$Compiler$Default.compile(MethodGraph.java:502)\r\n\t    at net.bytebuddy.dynamic.scaffold.MethodGraph$Compiler$AbstractBase.compile(MethodGraph.java:423)\r\n\t    at net.bytebuddy.dynamic.scaffold.MethodRegistry$Default.prepare(MethodRegistry.java:489)\r\n\t    at net.bytebuddy.dynamic.scaffold.subclass.SubclassDynamicTypeBuilder.make(SubclassDynamicTypeBuilder.java:153)\r\n\t    at net.bytebuddy.dynamic.DynamicType$Builder$AbstractBase$Delegator.make(DynamicType.java:2564)\r\n\t    at org.mockito.internal.creation.bytebuddy.MockBytecodeGenerator.generateMockClass(MockBytecodeGenerator.java:60)\r\n\t    at org.mockito.internal.creation.bytebuddy.CachingMockBytecodeGenerator$CachedBytecodeGenerator.generate(CachingMockBytecodeGenerator.java:72)\r\n\t    at org.mockito.internal.creation.bytebuddy.CachingMockBytecodeGenerator$CachedBytecodeGenerator.getOrGenerateMockClass(CachingMockBytecodeGenerator.java:64)\r\n\t    at org.mockito.internal.creation.bytebuddy.CachingMockBytecodeGenerator.get(CachingMockBytecodeGenerator.java:27)\r\n\t    at org.mockito.internal.creation.bytebuddy.ByteBuddyMockMaker.createProxyClass(ByteBuddyMockMaker.java:54)\r\n\t    at org.mockito.internal.creation.bytebuddy.ByteBuddyMockMaker.createMock(ByteBuddyMockMaker.java:27)\r\n\t    at org.mockito.internal.util.MockUtil.createMock(MockUtil.java:32)\r\n\t    at org.mockito.internal.MockitoCore.mock(MockitoCore.java:54)\r\n\t    at org.mockito.Mockito.mock(Mockito.java:1443)\r\n\t    at org.mockito.Mockito.mock(Mockito.java:1356)\r\n\t    ... 26 more\r\n\r\nAm I doing something wrong? This seemed to me as if it should be straightforward.\r\n\r\nTo reproduce this problem, clone https://bitbucket.org/globalmentor/rincl.git and check out commit 2f88d7c5e5ac17b6d316ed54c12cb7b447b7d6ac. Then try to run the following test:\r\n\r\n\timport static org.junit.Assert.*;\r\n\timport static org.hamcrest.Matchers.*;\r\n\timport static org.mockito.Mockito.*;\r\n\timport java.util.Locale;\r\n\timport java.util.Locale.Category;\r\n\timport org.junit.*;\r\n\t\r\n\tpublic class RinclTest {\r\n\t\t@Test\r\n\t\tpublic void defaultConcernRinclGetLocaleIsConcernLocale() {\r\n\t\t\tfinal ResourceI18nConcern defaultConcern=mock(ResourceI18nConcern.class);\r\n\t\t}\r\n\t}","title":"Mockito object is not an instance of declaring class","body":"<p>I haven't touched Mockito for a while, and I have never used it extensively. But today in some new code I wanted to use best practices so I pulled out mockito-core 2.0.54-beta using the following Java version:</p>\n\n<pre><code>java version \"1.8.0\"\nJava(TM) SE Runtime Environment (build 1.8.0-b132)\nJava HotSpot(TM) 64-Bit Server VM (build 25.0-b70, mixed mode)\n</code></pre>\n\n<p>I needed an instance of this interface for testing:</p>\n\n<p><a href=\"https://bitbucket.org/globalmentor/rincl/src/bf0e8875a1bae16247dd904e0b8bc067c9f8abc9/src/main/java/io/rincl/ResourceI18nConcern.java\" rel=\"noreferrer\">https://bitbucket.org/globalmentor/rincl/src/bf0e8875a1bae16247dd904e0b8bc067c9f8abc9/src/main/java/io/rincl/ResourceI18nConcern.java</a></p>\n\n<pre><code>public interface ResourceI18nConcern extends Concern {\n\n    public Locale getLocale(@Nonnull Locale.Category category);\n\n    public void setLocale(@Nonnull Locale.Category category, @Nonnull Locale locale);\n\n    public default void setLocale(@Nonnull Locale locale) {...}\n\n    public Resources getResources(@Nonnull final Class&lt;?&gt; contextClass) throws ResourceConfigurationException;\n\n}\n</code></pre>\n\n<p>That interface extends this one (just an empty marker interface):</p>\n\n<p><a href=\"https://bitbucket.org/globalmentor/csar/src/125b837e9936ddb8d6340fa99b6b5da872d1e6e5/src/main/java/io/csar/Concern.java\" rel=\"noreferrer\">https://bitbucket.org/globalmentor/csar/src/125b837e9936ddb8d6340fa99b6b5da872d1e6e5/src/main/java/io/csar/Concern.java</a></p>\n\n<p>In my test I tried to do this simple thing:</p>\n\n<pre><code>final ResourceI18nConcern defaultConcern=mock(ResourceI18nConcern.class);\n</code></pre>\n\n<p>I get the following stack trace:</p>\n\n<pre><code>org.mockito.exceptions.base.MockitoException:\nMockito cannot mock this class: interface io.rincl.ResourceI18nConcern\n\nMockito can only mock visible &amp; non-final classes.\nIf you're not sure why you're getting this error, please report to the mailing list.\n\nUnderlying exception : java.lang.IllegalArgumentException: object is not an instance of declaring class\n    at io.rincl.RinclTest.defaultConcernRinclGetLocaleIsConcernLocale(RinclTest.java:91)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:483)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\n    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\n    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\n    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:86)\n    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:675)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)\nCaused by: java.lang.IllegalArgumentException: object is not an instance of declaring class\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:483)\n    at net.bytebuddy.description.type.TypeDescription$Generic$AnnotationReader$ForTypeArgument.resolve(TypeDescription.java:3875)\n    at net.bytebuddy.description.type.TypeDescription$Generic$AnnotationReader$Delegator$Chained.resolve(TypeDescription.java:3501)\n    at net.bytebuddy.description.type.TypeDescription$Generic$AnnotationReader$ForTypeArgument.resolve(TypeDescription.java:3834)\n    at net.bytebuddy.description.type.TypeDescription$Generic$AnnotationReader$Delegator.asList(TypeDescription.java:3477)\n    at net.bytebuddy.description.type.TypeDescription$Generic$OfWildcardType$ForLoadedType.getDeclaredAnnotations(TypeDescription.java:4771)\n    at net.bytebuddy.description.type.TypeDescription$Generic$Visitor$TypeVariableErasing.onWildcard(TypeDescription.java:676)\n    at net.bytebuddy.description.type.TypeDescription$Generic$Visitor$TypeVariableErasing.onWildcard(TypeDescription.java:659)\n    at net.bytebuddy.description.type.TypeDescription$Generic$OfWildcardType.accept(TypeDescription.java:4679)\n    at net.bytebuddy.description.type.TypeDescription$Generic$Visitor$TypeVariableErasing.onParameterizedType(TypeDescription.java:687)\n    at net.bytebuddy.description.type.TypeDescription$Generic$Visitor$TypeVariableErasing.onParameterizedType(TypeDescription.java:659)\n    at net.bytebuddy.description.type.TypeDescription$Generic$OfParameterizedType.accept(TypeDescription.java:5021)\n    at net.bytebuddy.description.type.TypeDescription$Generic$LazyProjection.accept(TypeDescription.java:5794)\n    at net.bytebuddy.description.method.ParameterDescription$TypeSubstituting.getType(ParameterDescription.java:866)\n    at net.bytebuddy.description.method.ParameterList$AbstractBase.asTypeList(ParameterList.java:85)\n    at net.bytebuddy.description.method.MethodDescription$AbstractBase.asTypeToken(MethodDescription.java:635)\n    at net.bytebuddy.dynamic.scaffold.MethodGraph$Compiler$Default$Key$Harmonized.of(MethodGraph.java:862)\n    at net.bytebuddy.dynamic.scaffold.MethodGraph$Compiler$Default$Key$Store.registerTopLevel(MethodGraph.java:1059)\n    at net.bytebuddy.dynamic.scaffold.MethodGraph$Compiler$Default.doAnalyze(MethodGraph.java:569)\n    at net.bytebuddy.dynamic.scaffold.MethodGraph$Compiler$Default.analyze(MethodGraph.java:529)\n    at net.bytebuddy.dynamic.scaffold.MethodGraph$Compiler$Default.doAnalyze(MethodGraph.java:565)\n    at net.bytebuddy.dynamic.scaffold.MethodGraph$Compiler$Default.compile(MethodGraph.java:502)\n    at net.bytebuddy.dynamic.scaffold.MethodGraph$Compiler$AbstractBase.compile(MethodGraph.java:423)\n    at net.bytebuddy.dynamic.scaffold.MethodRegistry$Default.prepare(MethodRegistry.java:489)\n    at net.bytebuddy.dynamic.scaffold.subclass.SubclassDynamicTypeBuilder.make(SubclassDynamicTypeBuilder.java:153)\n    at net.bytebuddy.dynamic.DynamicType$Builder$AbstractBase$Delegator.make(DynamicType.java:2564)\n    at org.mockito.internal.creation.bytebuddy.MockBytecodeGenerator.generateMockClass(MockBytecodeGenerator.java:60)\n    at org.mockito.internal.creation.bytebuddy.CachingMockBytecodeGenerator$CachedBytecodeGenerator.generate(CachingMockBytecodeGenerator.java:72)\n    at org.mockito.internal.creation.bytebuddy.CachingMockBytecodeGenerator$CachedBytecodeGenerator.getOrGenerateMockClass(CachingMockBytecodeGenerator.java:64)\n    at org.mockito.internal.creation.bytebuddy.CachingMockBytecodeGenerator.get(CachingMockBytecodeGenerator.java:27)\n    at org.mockito.internal.creation.bytebuddy.ByteBuddyMockMaker.createProxyClass(ByteBuddyMockMaker.java:54)\n    at org.mockito.internal.creation.bytebuddy.ByteBuddyMockMaker.createMock(ByteBuddyMockMaker.java:27)\n    at org.mockito.internal.util.MockUtil.createMock(MockUtil.java:32)\n    at org.mockito.internal.MockitoCore.mock(MockitoCore.java:54)\n    at org.mockito.Mockito.mock(Mockito.java:1443)\n    at org.mockito.Mockito.mock(Mockito.java:1356)\n    ... 26 more\n</code></pre>\n\n<p>Am I doing something wrong? This seemed to me as if it should be straightforward.</p>\n\n<p>To reproduce this problem, clone <a href=\"https://bitbucket.org/globalmentor/rincl.git\" rel=\"noreferrer\">https://bitbucket.org/globalmentor/rincl.git</a> and check out commit 2f88d7c5e5ac17b6d316ed54c12cb7b447b7d6ac. Then try to run the following test:</p>\n\n<pre><code>import static org.junit.Assert.*;\nimport static org.hamcrest.Matchers.*;\nimport static org.mockito.Mockito.*;\nimport java.util.Locale;\nimport java.util.Locale.Category;\nimport org.junit.*;\n\npublic class RinclTest {\n    @Test\n    public void defaultConcernRinclGetLocaleIsConcernLocale() {\n        final ResourceI18nConcern defaultConcern=mock(ResourceI18nConcern.class);\n    }\n}\n</code></pre>\n"},{"tags":["java","maven","pdf","itext"],"comments":[{"owner":{"account_id":1939636,"reputation":28467,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":0,"creation_date":1481777089,"post_id":14213195,"comment_id":69514730,"body_markdown":"I am not sure if this should be closed or not. But such a question would always require an updated answer. Marking it `too broad` for such concern, unless updated.","body":"I am not sure if this should be closed or not. But such a question would always require an updated answer. Marking it <code>too broad</code> for such concern, unless updated."}],"answers":[{"comments":[{"owner":{"account_id":389997,"reputation":8148,"user_id":749782,"display_name":"Ari Maniatis"},"score":2,"creation_date":1432302024,"post_id":14213851,"comment_id":48884199,"body_markdown":"You can&#39;t &quot;deprecate&quot; a library, you deprecate classes or methods. Pushing people toward your commercially licensed versions isn&#39;t terribly subtle.","body":"You can&#39;t &quot;deprecate&quot; a library, you deprecate classes or methods. Pushing people toward your commercially licensed versions isn&#39;t terribly subtle."},{"owner":{"account_id":400683,"reputation":7350,"user_id":766786,"accept_rate":68,"display_name":"Amedee Van Gasse"},"score":0,"creation_date":1436350816,"post_id":14213851,"comment_id":50570984,"body_markdown":"(iText Software QA/Release Engineer here) iText 4.2.0 was never released into the wild. It only existed as an svn tag, used to sync up iText and iTextSharp, which was at 4.1.6 at the time. It also happens to be the last commit before the commit where the AGPL headers were added to all .java files. When I moved iText&#39;s code hosting from svn (SourceForge) to git (GitHub), I cleaned up all tags that weren&#39;t official releases.","body":"(iText Software QA/Release Engineer here) iText 4.2.0 was never released into the wild. It only existed as an svn tag, used to sync up iText and iTextSharp, which was at 4.1.6 at the time. It also happens to be the last commit before the commit where the AGPL headers were added to all .java files. When I moved iText&#39;s code hosting from svn (SourceForge) to git (GitHub), I cleaned up all tags that weren&#39;t official releases."},{"owner":{"account_id":400683,"reputation":7350,"user_id":766786,"accept_rate":68,"display_name":"Amedee Van Gasse"},"score":1,"creation_date":1436355665,"post_id":14213851,"comment_id":50574017,"body_markdown":"iText 4.2.2 is now on Maven Central, sync to other Maven servers will automatically happen in the following hours and days: http://search.maven.org/#artifactdetails%7Ccom.lowagie%7Citext%7C4.2.2%7Cjar. It is a POM-only release, with relocation to com.itextpdf:itextpdf. The relocation has the following message: &quot;After release 2.1.7, iText moved from the MPLicense to the AGPLicense. The groupId changed from com.lowagie to com.itextpdf and the artifactId from itext to itextpdf. See http://itextpdf.com/functionalitycomparison for more information.&quot;","body":"iText 4.2.2 is now on Maven Central, sync to other Maven servers will automatically happen in the following hours and days: <a href=\"http://search.maven.org/#artifactdetails%7Ccom.lowagie%7Citext%7C4.2.2%7Cjar\" rel=\"nofollow noreferrer\">search.maven.org/&hellip;</a>. It is a POM-only release, with relocation to com.itextpdf:itextpdf. The relocation has the following message: &quot;After release 2.1.7, iText moved from the MPLicense to the AGPLicense. The groupId changed from com.lowagie to com.itextpdf and the artifactId from itext to itextpdf. See <a href=\"http://itextpdf.com/functionalitycomparison\" rel=\"nofollow noreferrer\">itextpdf.com/functionalitycomparison</a> for more information.&quot;"},{"owner":{"account_id":93208,"reputation":6939,"user_id":255139,"accept_rate":44,"display_name":"Kalpesh Soni"},"score":0,"creation_date":1454081094,"post_id":14213851,"comment_id":57897860,"body_markdown":"and what are the dependencies of itext itself?","body":"and what are the dependencies of itext itself?"},{"owner":{"account_id":1820003,"reputation":49625,"user_id":1654265,"accept_rate":93,"display_name":"Andrea Ligios"},"score":0,"creation_date":1454081144,"post_id":14213851,"comment_id":57897888,"body_markdown":"Which one ? For the latest they&#39;re [here](http://mvnrepository.com/artifact/com.itextpdf/itextpdf/5.5.8#snippets). BTW that&#39;s the reason you should use Maven, that handles all this stuff for you","body":"Which one ? For the latest they&#39;re <a href=\"http://mvnrepository.com/artifact/com.itextpdf/itextpdf/5.5.8#snippets\" rel=\"nofollow noreferrer\">here</a>. BTW that&#39;s the reason you should use Maven, that handles all this stuff for you"}],"tags":[],"owner":{"account_id":1820003,"reputation":49625,"user_id":1654265,"accept_rate":93,"display_name":"Andrea Ligios"},"comment_count":5,"down_vote_count":0,"up_vote_count":25,"is_accepted":true,"score":25,"last_activity_date":1464184581,"creation_date":1357644037,"answer_id":14213851,"question_id":14213195,"body_markdown":"You need to pay attention to the license for the Java version of iText:\r\n\r\n - iText `2.1.7`: the latest **official** release by iText Group NV, under the `MPL` &amp; `GPL` license, with `com.lowagie` groupId;\r\n - iText `4.2.1`: the latest **unofficial** release by ymasory/InProTopia, under the `MPL` &amp; `GPL` license, with `com.lowagie` groupId;\r\n - iText `5.0.0` and higher: released by iText Group NV, under the `AGPL` license, with `com.itextpdf` groupId. One monolithic jar.\r\n - iText `7.0.0` and higher: released by iText Group NV, under the `AGPL` license, with `com.itextpdf` groupId. Several modular jars.\r\n\r\nHere you can find 2.1.7 and 4.2.x versions on Maven Repository:\r\n\r\nFind before 5.x versions:\r\nhttp://search.maven.org/#search|gav|1|g%3A%22com.lowagie%22%20AND%20a%3A%22itext%22\r\n\r\nFind 5.x versions:\r\nhttp://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22com.itextpdf%22%20AND%20a%3A%22itextpdf%22\r\n\r\n&lt;strike&gt;You may want to stick with the MPL &amp; GPL versions, unless you are available to follow the AGPL license specification... &lt;/strike&gt;\r\n\r\n\r\nEDIT: \r\nYou should pay attention on which version you are choosing;\r\n\r\nAccording to Bruno Lowagie comment, [versions 2.1.x are deprecated][1] and should not be used due to technical and legal reasons.\r\n\r\n\r\n\r\n  [1]: http://lowagie.com/itext2","title":"iText latest Maven dependency","body":"<p>You need to pay attention to the license for the Java version of iText:</p>\n\n<ul>\n<li>iText <code>2.1.7</code>: the latest <strong>official</strong> release by iText Group NV, under the <code>MPL</code> &amp; <code>GPL</code> license, with <code>com.lowagie</code> groupId;</li>\n<li>iText <code>4.2.1</code>: the latest <strong>unofficial</strong> release by ymasory/InProTopia, under the <code>MPL</code> &amp; <code>GPL</code> license, with <code>com.lowagie</code> groupId;</li>\n<li>iText <code>5.0.0</code> and higher: released by iText Group NV, under the <code>AGPL</code> license, with <code>com.itextpdf</code> groupId. One monolithic jar.</li>\n<li>iText <code>7.0.0</code> and higher: released by iText Group NV, under the <code>AGPL</code> license, with <code>com.itextpdf</code> groupId. Several modular jars.</li>\n</ul>\n\n<p>Here you can find 2.1.7 and 4.2.x versions on Maven Repository:</p>\n\n<p>Find before 5.x versions:\n<a href=\"http://search.maven.org/#search|gav|1|g%3A%22com.lowagie%22%20AND%20a%3A%22itext%22\" rel=\"noreferrer\">http://search.maven.org/#search|gav|1|g%3A%22com.lowagie%22%20AND%20a%3A%22itext%22</a></p>\n\n<p>Find 5.x versions:\n<a href=\"http://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22com.itextpdf%22%20AND%20a%3A%22itextpdf%22\" rel=\"noreferrer\">http://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22com.itextpdf%22%20AND%20a%3A%22itextpdf%22</a></p>\n\n<p><strike>You may want to stick with the MPL &amp; GPL versions, unless you are available to follow the AGPL license specification... </strike></p>\n\n<p>EDIT: \nYou should pay attention on which version you are choosing;</p>\n\n<p>According to Bruno Lowagie comment, <a href=\"http://lowagie.com/itext2\" rel=\"noreferrer\">versions 2.1.x are deprecated</a> and should not be used due to technical and legal reasons.</p>\n"},{"tags":[],"owner":{"account_id":517043,"reputation":171,"user_id":1738380,"display_name":"faskunji"},"comment_count":0,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1357644211,"creation_date":1357644211,"answer_id":14213906,"question_id":14213195,"body_markdown":"looks like 5.3.5 is not in repository yet so 5.3.4 works for me:\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;com.itextpdf&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;itextpdf&lt;/artifactId&gt;\r\n    \t&lt;version&gt;5.3.4&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n","title":"iText latest Maven dependency","body":"<p>looks like 5.3.5 is not in repository yet so 5.3.4 works for me:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.itextpdf&lt;/groupId&gt;\n    &lt;artifactId&gt;itextpdf&lt;/artifactId&gt;\n    &lt;version&gt;5.3.4&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1064637,"reputation":7437,"user_id":1065525,"display_name":"Alexis Pigeon"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1531214581,"creation_date":1357645604,"answer_id":14214263,"question_id":14213195,"body_markdown":"As with many (any?) open-source library, their website contains a changelog. iText&#39;s one can be found [here][1].\r\n\r\nAnd as of today, the latest version is &lt;s&gt;[5.5.9][2]&lt;/s&gt; [7.0.0][3].\r\n\r\nThe dependency for version 5.5.9 would be \r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.itextpdf&lt;/groupId&gt;\r\n        &lt;artifactId&gt;itextpdf&lt;/artifactId&gt;\r\n        &lt;version&gt;5.5.9&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n  [1]: https://itextpdf.com/posts/changelog\r\n  [2]: https://itextpdf.com/posts/changelog/559\r\n  [3]: https://developers.itextpdf.com/itext-7-java","title":"iText latest Maven dependency","body":"<p>As with many (any?) open-source library, their website contains a changelog. iText's one can be found <a href=\"https://itextpdf.com/posts/changelog\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>And as of today, the latest version is <s><a href=\"https://itextpdf.com/posts/changelog/559\" rel=\"nofollow noreferrer\">5.5.9</a></s> <a href=\"https://developers.itextpdf.com/itext-7-java\" rel=\"nofollow noreferrer\">7.0.0</a>.</p>\n\n<p>The dependency for version 5.5.9 would be </p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.itextpdf&lt;/groupId&gt;\n    &lt;artifactId&gt;itextpdf&lt;/artifactId&gt;\n    &lt;version&gt;5.5.9&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":400683,"reputation":7350,"user_id":766786,"accept_rate":68,"display_name":"Amedee Van Gasse"},"score":0,"creation_date":1464183795,"post_id":37437272,"comment_id":62380529,"body_markdown":"The most recent version of iText is 7.0.0, see http://developers.itextpdf.com/itext-7-java","body":"The most recent version of iText is 7.0.0, see <a href=\"http://developers.itextpdf.com/itext-7-java\" rel=\"nofollow noreferrer\">developers.itextpdf.com/itext-7-java</a>"}],"tags":[],"owner":{"account_id":8509127,"reputation":3,"user_id":6379659,"display_name":"prasad"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1464179547,"creation_date":1464179547,"answer_id":37437272,"question_id":14213195,"body_markdown":"    This was the latest release as of today\r\n\r\n    &lt;!-- http://mvnrepository.com/artifact/com.itextpdf/itextpdf --&gt;\r\n\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;com.itextpdf&lt;/groupId&gt;\r\n    &lt;artifactId&gt;itextpdf&lt;/artifactId&gt;\r\n    &lt;version&gt;5.5.9&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\n\r\n\r\n","title":"iText latest Maven dependency","body":"<pre><code>This was the latest release as of today\n\n&lt;!-- http://mvnrepository.com/artifact/com.itextpdf/itextpdf --&gt;\n\n&lt;dependency&gt;\n&lt;groupId&gt;com.itextpdf&lt;/groupId&gt;\n&lt;artifactId&gt;itextpdf&lt;/artifactId&gt;\n&lt;version&gt;5.5.9&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":400683,"reputation":7350,"user_id":766786,"accept_rate":68,"display_name":"Amedee Van Gasse"},"score":0,"creation_date":1469596927,"post_id":37440168,"comment_id":64595685,"body_markdown":"What do you mean? I don&#39;t understand your question.","body":"What do you mean? I don&#39;t understand your question."},{"owner":{"account_id":1202806,"reputation":23223,"user_id":1173112,"accept_rate":89,"display_name":"Koray Tugay"},"score":0,"creation_date":1469597514,"post_id":37440168,"comment_id":64595890,"body_markdown":"There are nice modules but which is the one that I require to create a &quot;Hello World&quot; pdf?","body":"There are nice modules but which is the one that I require to create a &quot;Hello World&quot; pdf?"},{"owner":{"account_id":400683,"reputation":7350,"user_id":766786,"accept_rate":68,"display_name":"Amedee Van Gasse"},"score":0,"creation_date":1469597629,"post_id":37440168,"comment_id":64595938,"body_markdown":"That is explained in the documentation. http://developers.itextpdf.com/content/itext-7-jump-start-tutorial","body":"That is explained in the documentation. <a href=\"http://developers.itextpdf.com/content/itext-7-jump-start-tutorial\" rel=\"nofollow noreferrer\">developers.itextpdf.com/content/itext-7-jump-start-tutorial</a>"},{"owner":{"account_id":1202806,"reputation":23223,"user_id":1173112,"accept_rate":89,"display_name":"Koray Tugay"},"score":0,"creation_date":1469597694,"post_id":37440168,"comment_id":64595964,"body_markdown":"Is kernel, io and layout the minimum dependencies I need for Hello World? I am not sure I can find it in documentation..","body":"Is kernel, io and layout the minimum dependencies I need for Hello World? I am not sure I can find it in documentation.."},{"owner":{"account_id":400683,"reputation":7350,"user_id":766786,"accept_rate":68,"display_name":"Amedee Van Gasse"},"score":0,"creation_date":1470643868,"post_id":37440168,"comment_id":65014458,"body_markdown":"I am really sure that this answers your question: http://developers.itextpdf.com/content/itext-7-jump-start-tutorial/installing-itext-7 and if not, please explain what is missing.","body":"I am really sure that this answers your question: <a href=\"http://developers.itextpdf.com/content/itext-7-jump-start-tutorial/installing-itext-7\" rel=\"nofollow noreferrer\">developers.itextpdf.com/content/itext-7-jump-start-tutorial/&zwnj;&#8203;&hellip;</a> and if not, please explain what is missing."}],"tags":[],"owner":{"account_id":400683,"reputation":7350,"user_id":766786,"accept_rate":68,"display_name":"Amedee Van Gasse"},"comment_count":5,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1531214611,"creation_date":1464186537,"answer_id":37440168,"question_id":14213195,"body_markdown":"iText 7 was released in May 2016. iText 7 is no longer one monolithic jar file, like iText 5 used to be. You use only those modules you need.\r\n\r\nPut this in your POM file:\r\n\r\n    &lt;dependencies&gt;\r\n    \r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;com.itextpdf&lt;/groupId&gt;\r\n        &lt;artifactId&gt;barcodes&lt;/artifactId&gt;\r\n        &lt;version&gt;7.0.0&lt;/version&gt;\r\n        &lt;!-- barcodes depends on kernel --&gt;\r\n      &lt;/dependency&gt;\r\n    \r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;com.itextpdf&lt;/groupId&gt;\r\n        &lt;artifactId&gt;font-asian&lt;/artifactId&gt;\r\n        &lt;version&gt;7.0.0&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n    \r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;com.itextpdf&lt;/groupId&gt;\r\n        &lt;artifactId&gt;forms&lt;/artifactId&gt;\r\n        &lt;version&gt;7.0.0&lt;/version&gt;\r\n        &lt;!-- forms depends on kernel and layout --&gt;\r\n      &lt;/dependency&gt;\r\n    \r\n      &lt;dependency&gt;\r\n          &lt;groupId&gt;com.itextpdf&lt;/groupId&gt;\r\n          &lt;artifactId&gt;hyph&lt;/artifactId&gt;\r\n          &lt;version&gt;7.0.0&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n    \r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;com.itextpdf&lt;/groupId&gt;\r\n        &lt;artifactId&gt;io&lt;/artifactId&gt;\r\n        &lt;version&gt;7.0.0&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n    \r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;com.itextpdf&lt;/groupId&gt;\r\n        &lt;artifactId&gt;kernel&lt;/artifactId&gt;\r\n        &lt;version&gt;7.0.0&lt;/version&gt;\r\n        &lt;!-- kernel depends on io --&gt;\r\n      &lt;/dependency&gt;\r\n    \r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;com.itextpdf&lt;/groupId&gt;\r\n        &lt;artifactId&gt;layout&lt;/artifactId&gt;\r\n        &lt;version&gt;7.0.0&lt;/version&gt;\r\n        &lt;!-- layout depends on kernel --&gt;\r\n      &lt;/dependency&gt;\r\n    \r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;com.itextpdf&lt;/groupId&gt;\r\n        &lt;artifactId&gt;pdfa&lt;/artifactId&gt;\r\n        &lt;version&gt;7.0.0&lt;/version&gt;\r\n        &lt;!-- pdfa depends on kernel --&gt;\r\n      &lt;/dependency&gt;\r\n    \r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;com.itextpdf&lt;/groupId&gt;\r\n        &lt;artifactId&gt;sign&lt;/artifactId&gt;\r\n        &lt;version&gt;7.0.0&lt;/version&gt;\r\n        &lt;!-- sign depends on kernel, layout and forms --&gt;\r\n      &lt;/dependency&gt;\r\n    \r\n    &lt;/dependencies&gt;\r\n\r\nThis, and more information, can be found on https://developers.itextpdf.com/itext-7-java","title":"iText latest Maven dependency","body":"<p>iText 7 was released in May 2016. iText 7 is no longer one monolithic jar file, like iText 5 used to be. You use only those modules you need.</p>\n\n<p>Put this in your POM file:</p>\n\n<pre><code>&lt;dependencies&gt;\n\n  &lt;dependency&gt;\n    &lt;groupId&gt;com.itextpdf&lt;/groupId&gt;\n    &lt;artifactId&gt;barcodes&lt;/artifactId&gt;\n    &lt;version&gt;7.0.0&lt;/version&gt;\n    &lt;!-- barcodes depends on kernel --&gt;\n  &lt;/dependency&gt;\n\n  &lt;dependency&gt;\n    &lt;groupId&gt;com.itextpdf&lt;/groupId&gt;\n    &lt;artifactId&gt;font-asian&lt;/artifactId&gt;\n    &lt;version&gt;7.0.0&lt;/version&gt;\n  &lt;/dependency&gt;\n\n  &lt;dependency&gt;\n    &lt;groupId&gt;com.itextpdf&lt;/groupId&gt;\n    &lt;artifactId&gt;forms&lt;/artifactId&gt;\n    &lt;version&gt;7.0.0&lt;/version&gt;\n    &lt;!-- forms depends on kernel and layout --&gt;\n  &lt;/dependency&gt;\n\n  &lt;dependency&gt;\n      &lt;groupId&gt;com.itextpdf&lt;/groupId&gt;\n      &lt;artifactId&gt;hyph&lt;/artifactId&gt;\n      &lt;version&gt;7.0.0&lt;/version&gt;\n  &lt;/dependency&gt;\n\n  &lt;dependency&gt;\n    &lt;groupId&gt;com.itextpdf&lt;/groupId&gt;\n    &lt;artifactId&gt;io&lt;/artifactId&gt;\n    &lt;version&gt;7.0.0&lt;/version&gt;\n  &lt;/dependency&gt;\n\n  &lt;dependency&gt;\n    &lt;groupId&gt;com.itextpdf&lt;/groupId&gt;\n    &lt;artifactId&gt;kernel&lt;/artifactId&gt;\n    &lt;version&gt;7.0.0&lt;/version&gt;\n    &lt;!-- kernel depends on io --&gt;\n  &lt;/dependency&gt;\n\n  &lt;dependency&gt;\n    &lt;groupId&gt;com.itextpdf&lt;/groupId&gt;\n    &lt;artifactId&gt;layout&lt;/artifactId&gt;\n    &lt;version&gt;7.0.0&lt;/version&gt;\n    &lt;!-- layout depends on kernel --&gt;\n  &lt;/dependency&gt;\n\n  &lt;dependency&gt;\n    &lt;groupId&gt;com.itextpdf&lt;/groupId&gt;\n    &lt;artifactId&gt;pdfa&lt;/artifactId&gt;\n    &lt;version&gt;7.0.0&lt;/version&gt;\n    &lt;!-- pdfa depends on kernel --&gt;\n  &lt;/dependency&gt;\n\n  &lt;dependency&gt;\n    &lt;groupId&gt;com.itextpdf&lt;/groupId&gt;\n    &lt;artifactId&gt;sign&lt;/artifactId&gt;\n    &lt;version&gt;7.0.0&lt;/version&gt;\n    &lt;!-- sign depends on kernel, layout and forms --&gt;\n  &lt;/dependency&gt;\n\n&lt;/dependencies&gt;\n</code></pre>\n\n<p>This, and more information, can be found on <a href=\"https://developers.itextpdf.com/itext-7-java\" rel=\"nofollow noreferrer\">https://developers.itextpdf.com/itext-7-java</a></p>\n"},{"tags":[],"owner":{"account_id":263115,"reputation":16960,"user_id":548473,"display_name":"Grigory Kislin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695654050,"creation_date":1695653085,"answer_id":77173658,"question_id":14213195,"body_markdown":"Last dependency is (for pdf form java code):\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.itextpdf&lt;/groupId&gt;\r\n            &lt;artifactId&gt;itext-core&lt;/artifactId&gt;\r\n            &lt;version&gt;${itextpdf.version}&lt;/version&gt;  // at post time 8.0.1\r\n            &lt;type&gt;pom&lt;/type&gt;\r\n        &lt;/dependency&gt;\r\n\r\n```\r\nSee [itext7 repo pom](https://github.com/itext/itext7/blob/develop/itext7core/pom.xml#L50) and [Maven Central](https://central.sonatype.com/artifact/com.itextpdf/itext-core/versions)\r\n","title":"iText latest Maven dependency","body":"<p>Last dependency is (for pdf form java code):</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;com.itextpdf&lt;/groupId&gt;\n            &lt;artifactId&gt;itext-core&lt;/artifactId&gt;\n            &lt;version&gt;${itextpdf.version}&lt;/version&gt;  // at post time 8.0.1\n            &lt;type&gt;pom&lt;/type&gt;\n        &lt;/dependency&gt;\n\n</code></pre>\n<p>See <a href=\"https://github.com/itext/itext7/blob/develop/itext7core/pom.xml#L50\" rel=\"nofollow noreferrer\">itext7 repo pom</a> and <a href=\"https://central.sonatype.com/artifact/com.itextpdf/itext-core/versions\" rel=\"nofollow noreferrer\">Maven Central</a></p>\n"}],"owner":{"account_id":902001,"reputation":39942,"user_id":937892,"accept_rate":63,"display_name":"PSR"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38837,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":14213851,"answer_count":6,"score":14,"last_activity_date":1695654050,"creation_date":1357641841,"question_id":14213195,"body_markdown":"What is the latest version of iText? And what is the maven dependency for that?","title":"iText latest Maven dependency","body":"<p>What is the latest version of iText? And what is the maven dependency for that?</p>\n"},{"tags":["java","subset","backtracking"],"answers":[{"tags":[],"owner":{"account_id":18999437,"reputation":2461,"user_id":13867124,"display_name":"AztecCodes"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695653510,"creation_date":1695653510,"answer_id":77173728,"question_id":77173613,"body_markdown":"The main reason for the behaviour discrepancy lies in how Java handles objects and references. When you pass `t` to the recursive function and modify it with `t.add(s[i]);`, you are altering the same `ArrayList` object that other recursive calls use. Java passes object references by value, leading to undesired behaviour and incorrect results, as modifications in one call affect others. In your initial non-working attempt:\r\n```\r\nfindSubsets(s,t,i+1,result);  // Recursive call with original t\r\nt.add(s[i]);  // Modifying t\r\nfindSubsets(s,t,i+1,result);  // Recursive call with modified t\r\n```\r\n\r\nIn this code snippet, when you invoke the `t.add(s[i]);` method, you&#39;re actually altering the same `ArrayList` object called &#39;t&#39;. What happens next is that any subsequent recursive calls and any function calls up the call stack that have a reference to this `ArrayList` object will also perceive this modification. As a result this leads to the generation of incorrect subsets.\r\n\r\nIn your successful second attempt:\r\n```\r\nfindSubsets(s,t,i+1,result);  // Recursive call with the original t\r\nArrayList&lt;Character&gt; tmp1 = new ArrayList&lt;&gt;(t);  // Creating a new ArrayList object with the same content as t\r\ntmp1.add(s[i]);  // Modifying tmp1\r\nfindSubsets(s,tmp1,i+1,result);  // Recursive call with tmp1\r\n```","title":"finding subsets of a Array in java using backtracking/recursion","body":"<p>The main reason for the behaviour discrepancy lies in how Java handles objects and references. When you pass <code>t</code> to the recursive function and modify it with <code>t.add(s[i]);</code>, you are altering the same <code>ArrayList</code> object that other recursive calls use. Java passes object references by value, leading to undesired behaviour and incorrect results, as modifications in one call affect others. In your initial non-working attempt:</p>\n<pre><code>findSubsets(s,t,i+1,result);  // Recursive call with original t\nt.add(s[i]);  // Modifying t\nfindSubsets(s,t,i+1,result);  // Recursive call with modified t\n</code></pre>\n<p>In this code snippet, when you invoke the <code>t.add(s[i]);</code> method, you're actually altering the same <code>ArrayList</code> object called 't'. What happens next is that any subsequent recursive calls and any function calls up the call stack that have a reference to this <code>ArrayList</code> object will also perceive this modification. As a result this leads to the generation of incorrect subsets.</p>\n<p>In your successful second attempt:</p>\n<pre><code>findSubsets(s,t,i+1,result);  // Recursive call with the original t\nArrayList&lt;Character&gt; tmp1 = new ArrayList&lt;&gt;(t);  // Creating a new ArrayList object with the same content as t\ntmp1.add(s[i]);  // Modifying tmp1\nfindSubsets(s,tmp1,i+1,result);  // Recursive call with tmp1\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18304023,"reputation":2622,"user_id":13328195,"display_name":"Roshin Raphel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695653626,"creation_date":1695653626,"answer_id":77173749,"question_id":77173613,"body_markdown":"I hope you tried with:\r\n```\r\n        findSubsets(s,t,i+1,result);\r\n        ArrayList&lt;Character&gt; tmp1 = new ArrayList&lt;&gt;(t); \r\n        t.add(s[i]); \r\n        findSubsets(s,tmp1,i+1,result);\r\n```\r\nand not :\r\n````\r\n        findSubsets(s,t,i+1,result);\r\n        t.add(s[i]); \r\n        findSubsets(s,tmp1,i+1,result);\r\n````\r\nIn this case, t is non-zero, but when you call the function again recursively, `findSubsets(s,tmp1,i+1,result)`, for the prototype, `findSubsets(char[] s,ArrayList&lt;Character&gt; t,int i,ArrayList&lt;ArrayList&lt;Character&gt;&gt; result)`, `t` becomes null again, thus the condition `if(t.size()&gt;0)` fails. So `result` is not updated.","title":"finding subsets of a Array in java using backtracking/recursion","body":"<p>I hope you tried with:</p>\n<pre><code>        findSubsets(s,t,i+1,result);\n        ArrayList&lt;Character&gt; tmp1 = new ArrayList&lt;&gt;(t); \n        t.add(s[i]); \n        findSubsets(s,tmp1,i+1,result);\n</code></pre>\n<p>and not :</p>\n<pre><code>        findSubsets(s,t,i+1,result);\n        t.add(s[i]); \n        findSubsets(s,tmp1,i+1,result);\n</code></pre>\n<p>In this case, t is non-zero, but when you call the function again recursively, <code>findSubsets(s,tmp1,i+1,result)</code>, for the prototype, <code>findSubsets(char[] s,ArrayList&lt;Character&gt; t,int i,ArrayList&lt;ArrayList&lt;Character&gt;&gt; result)</code>, <code>t</code> becomes null again, thus the condition <code>if(t.size()&gt;0)</code> fails. So <code>result</code> is not updated.</p>\n"}],"owner":{"account_id":3353784,"reputation":25,"user_id":2817235,"display_name":"user2817235"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77173728,"answer_count":2,"score":0,"last_activity_date":1695653626,"creation_date":1695652712,"question_id":77173613,"body_markdown":"i am trying to find all subsets of a ArrayList&lt;Character&gt; using backtracking/recursion and below are my main meathod and method to findSubsets\r\n\r\n\r\n```\r\n\tpublic static void main(String[] args) {\r\n\t\tchar[] s = {&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,&#39;d&#39;,&#39;e&#39;};\r\n\t\tArrayList&lt;ArrayList&lt;Character&gt;&gt; result= new ArrayList&lt;ArrayList&lt;Character&gt;&gt;();\r\n\t\tArrayList&lt;Character&gt; t= new ArrayList&lt;Character&gt;();\r\n\t\tfindSubsets(s,t,0,result);\r\n\t}\r\n\tstatic void findSubsets(char[] s,ArrayList&lt;Character&gt; t,int i,ArrayList&lt;ArrayList&lt;Character&gt;&gt; result) {\r\n\t\tif(i &gt;= s.length) {\r\n\t\t\tif(t.size()&gt;0) {\r\n\t\t\t\tresult.add(t);\r\n\t\t\t\tprintArrayListOfArrayList(result);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tfindSubsets(s,t,i+1,result);\r\n\t\tArrayList&lt;Character&gt; tmp1 = new ArrayList&lt;&gt;(t);  \r\n\t\ttmp1.add(s[i]); \r\n\t\tfindSubsets(s,tmp1,i+1,result);\r\n\t}\r\n```\r\n\r\n\r\ni tried earlier with\r\n\r\n```\r\n\t\tfindSubsets(s,t,i+1,result);\r\n\t\tt.add(s[i]); \r\n\t\tfindSubsets(s,tmp1,i+1,result);\r\n```\r\n\r\nit didnt worked, and below code works perfectly\r\n```\r\n\t\tfindSubsets(s,t,i+1,result);\r\n\t\tArrayList&lt;Character&gt; tmp1 = new ArrayList&lt;&gt;(t);  \r\n\t\ttmp1.add(s[i]); \r\n\t\tfindSubsets(s,tmp1,i+1,result);\r\n```\r\n\r\n\r\nwhy t.add(s[i]) and then calling recursion function wont find subsets?\r\nwhere as new List with same data added tmp1.add(s[i]) will find subsets?","title":"finding subsets of a Array in java using backtracking/recursion","body":"<p>i am trying to find all subsets of a ArrayList using backtracking/recursion and below are my main meathod and method to findSubsets</p>\n<pre><code>    public static void main(String[] args) {\n        char[] s = {'a','b','c','d','e'};\n        ArrayList&lt;ArrayList&lt;Character&gt;&gt; result= new ArrayList&lt;ArrayList&lt;Character&gt;&gt;();\n        ArrayList&lt;Character&gt; t= new ArrayList&lt;Character&gt;();\n        findSubsets(s,t,0,result);\n    }\n    static void findSubsets(char[] s,ArrayList&lt;Character&gt; t,int i,ArrayList&lt;ArrayList&lt;Character&gt;&gt; result) {\n        if(i &gt;= s.length) {\n            if(t.size()&gt;0) {\n                result.add(t);\n                printArrayListOfArrayList(result);\n            }\n            return;\n        }\n        findSubsets(s,t,i+1,result);\n        ArrayList&lt;Character&gt; tmp1 = new ArrayList&lt;&gt;(t);  \n        tmp1.add(s[i]); \n        findSubsets(s,tmp1,i+1,result);\n    }\n</code></pre>\n<p>i tried earlier with</p>\n<pre><code>        findSubsets(s,t,i+1,result);\n        t.add(s[i]); \n        findSubsets(s,tmp1,i+1,result);\n</code></pre>\n<p>it didnt worked, and below code works perfectly</p>\n<pre><code>        findSubsets(s,t,i+1,result);\n        ArrayList&lt;Character&gt; tmp1 = new ArrayList&lt;&gt;(t);  \n        tmp1.add(s[i]); \n        findSubsets(s,tmp1,i+1,result);\n</code></pre>\n<p>why t.add(s[i]) and then calling recursion function wont find subsets?\nwhere as new List with same data added tmp1.add(s[i]) will find subsets?</p>\n"},{"tags":["java","events","messaging","nats.io"],"answers":[{"tags":[],"owner":{"account_id":17954348,"reputation":36,"user_id":13046799,"display_name":"Cory Hagerman"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1695653220,"creation_date":1583946944,"answer_id":60641313,"question_id":60617016,"body_markdown":"You should change your &quot;replyer&quot; code to publish to the replyTo subject from the original message. \r\n\r\n```Java\r\n@PostConstruct\r\nprivate void init() {\r\n    Dispatcher dispatcher = natsConnector.getConnection().createDispatcher(message -&gt; {});\r\n\r\n    Subscription assetsInfo = dispatcher.subscribe(&quot;assets-info&quot;, message -&gt; {\r\n        JSONObject requestMessage = new JSONObject(\r\n            new String(message.getData(), StandardCharsets.UTF_8)\r\n        );\r\n\r\n        if (requestMessage.getString(&quot;requestType&quot;).equals(&quot;stock-status&quot;)) {\r\n            if (requestMessage.getString(&quot;of&quot;).equals(&quot;all&quot;)) {\r\n                JSONObject response = assetQuery.retrieveYesterdayStockStatus();\r\n                LOG.info(&quot;response ready&quot;);\r\n                //See Change Here\r\n                natsOperation.publish(message.getReplyTo(), response);\r\n                LOG.info(&quot;message sent&quot;);\r\n            }\r\n        }\r\n    });\r\n}\r\n```\r\n\r\nThe request reply mechanism is looking for a single response on the generated replyTo subject. \r\n\r\nSee https://docs.nats.io/nats-concepts/reqreply","title":"Nats request/reply in Java","body":"<p>You should change your &quot;replyer&quot; code to publish to the replyTo subject from the original message.</p>\n<pre><code>@PostConstruct\nprivate void init() {\n    Dispatcher dispatcher = natsConnector.getConnection().createDispatcher(message -&gt; {});\n\n    Subscription assetsInfo = dispatcher.subscribe(&quot;assets-info&quot;, message -&gt; {\n        JSONObject requestMessage = new JSONObject(\n            new String(message.getData(), StandardCharsets.UTF_8)\n        );\n\n        if (requestMessage.getString(&quot;requestType&quot;).equals(&quot;stock-status&quot;)) {\n            if (requestMessage.getString(&quot;of&quot;).equals(&quot;all&quot;)) {\n                JSONObject response = assetQuery.retrieveYesterdayStockStatus();\n                LOG.info(&quot;response ready&quot;);\n                //See Change Here\n                natsOperation.publish(message.getReplyTo(), response);\n                LOG.info(&quot;message sent&quot;);\n            }\n        }\n    });\n}\n</code></pre>\n<p>The request reply mechanism is looking for a single response on the generated replyTo subject.</p>\n<p>See <a href=\"https://docs.nats.io/nats-concepts/reqreply\" rel=\"nofollow noreferrer\">https://docs.nats.io/nats-concepts/reqreply</a></p>\n"}],"owner":{"account_id":16609578,"reputation":43,"user_id":12003012,"display_name":"Gabriele Biagini"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1380,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":60641313,"answer_count":1,"score":0,"last_activity_date":1695653220,"creation_date":1583840899,"question_id":60617016,"body_markdown":"I&#39;ve previous Kafka knowledge and I&#39;ve been playing around with Nats.io which seems a really solid choice for messaging.\r\n\r\nIn particular, I&#39;m interested in the well-documented Request/Reply mechanism but I&#39;ve had difficulties correctly implementing it in Java with the Jnats driver.\r\n\r\nThis is my Connector:\r\n\r\n``` Java\r\n // Single server nats connection\r\n    @PostConstruct\r\n    public void connect() throws ExternalServiceUnavailableException {\r\n\r\n        Options options = new Options.Builder()\r\n                .server(connectionString)\r\n                .maxReconnects(20)\r\n                .reconnectWait(Duration.ofSeconds(5))\r\n                .connectionTimeout(Duration.ofSeconds(5))\r\n                .connectionListener((conn, type) -&gt; {\r\n                    if (type == ConnectionListener.Events.CONNECTED) {\r\n                        LOG.info(&quot;Connected to Nats Server&quot;);\r\n                    } else if (type == ConnectionListener.Events.RECONNECTED) {\r\n                        LOG.info(&quot;Reconnected to Nats Server&quot;);\r\n                    } else if (type == ConnectionListener.Events.DISCONNECTED) {\r\n                        LOG.error(&quot;Disconnected to Nats Server, reconnect attempt in seconds&quot;);\r\n                    } else if (type == ConnectionListener.Events.CLOSED) {\r\n                        LOG.info(&quot;Closed connection with Nats Server&quot;);\r\n                    }\r\n                })\r\n                .build();\r\n\r\n\r\n        try {\r\n            connection = Nats.connect(options);\r\n\r\n        } catch (Exception e) {\r\n            LOG.error(&quot;Unable to connect to Nats Server&quot;);\r\n            throw new ExternalServiceUnavailableException(ExternalServiceUnavailableException.Service.NATS);\r\n        }\r\n\r\n    }\r\n```\r\n\r\nThis is the request method (with very high await time for testing purposes):\r\n```Java\r\n public Optional&lt;String&gt; asyncRequest(String topic, String message) throws ExternalServiceUnavailableException {\r\n\r\n        Future&lt;Message&gt; reply = natsConnector.getConnection().request(topic, message.getBytes());\r\n        try {\r\n\r\n            Message msg = reply.get(10L, TimeUnit.SECONDS);\r\n\r\n            LOG.info(new String(msg.getData()));\r\n\r\n            return Optional.of(new String(msg.getData(), StandardCharsets.UTF_8));\r\n\r\n        } catch (InterruptedException | ExecutionException | TimeoutException e) {\r\n            e.printStackTrace();\r\n            LOG.error(&quot;Unable to retrieve response for the sent request: &quot; + message);\r\n            throw new ExternalServiceUnavailableException(ExternalServiceUnavailableException.Service.NATS);\r\n        }\r\n\r\n    }\r\n```\r\n\r\nAnd this is the Response Handler with the reply mechanism:\r\n```Java\r\n @PostConstruct\r\n    private void init() {\r\n        Dispatcher dispatcher = natsConnector.getConnection().createDispatcher(message -&gt; {\r\n        });\r\n\r\n        Subscription assetsInfo = dispatcher.subscribe(&quot;assets-info&quot;, message -&gt; {\r\n        JSONObject requestMessage = new JSONObject(new String(message.getData(), StandardCharsets.UTF_8));\r\n\r\n            if (requestMessage.getString(&quot;requestType&quot;).equals(&quot;stock-status&quot;)) {\r\n\r\n                if (requestMessage.getString(&quot;of&quot;).equals(&quot;all&quot;)) {\r\n\r\n                    JSONObject response = assetQuery.retrieveYesterdayStockStatus();\r\n                    LOG.info(&quot;response ready&quot;);\r\n                    natsOperation.publishEvent(&quot;assets-info&quot;, response);\r\n                    LOG.info(&quot;message sent&quot;);\r\n                }\r\n            }\r\n        });\r\n    }\r\n```\r\n\r\nMy two independent Services communicate via a dockerized Nats.io, and I can correctly check via the Nats Go client that messages have been sent by both Services on the same topic.\r\n\r\nUnfortunately, the &quot;Requestor&quot; when invokes the `asyncRequest` function doesn&#39;t quite handle the reply even with very high await in the `reply.get(...)`.\r\n\r\nWhen I try to evaluate the `reply` Object in debug mode, it does not have any data in it and shows a `TimeoutException`.\r\n\r\nAt `msg.getData()` the program crashes.\r\n\r\nDo you guys have any hints for me? \r\nThanks!  ","title":"Nats request/reply in Java","body":"<p>I've previous Kafka knowledge and I've been playing around with Nats.io which seems a really solid choice for messaging.</p>\n\n<p>In particular, I'm interested in the well-documented Request/Reply mechanism but I've had difficulties correctly implementing it in Java with the Jnats driver.</p>\n\n<p>This is my Connector:</p>\n\n<pre><code> // Single server nats connection\n    @PostConstruct\n    public void connect() throws ExternalServiceUnavailableException {\n\n        Options options = new Options.Builder()\n                .server(connectionString)\n                .maxReconnects(20)\n                .reconnectWait(Duration.ofSeconds(5))\n                .connectionTimeout(Duration.ofSeconds(5))\n                .connectionListener((conn, type) -&gt; {\n                    if (type == ConnectionListener.Events.CONNECTED) {\n                        LOG.info(\"Connected to Nats Server\");\n                    } else if (type == ConnectionListener.Events.RECONNECTED) {\n                        LOG.info(\"Reconnected to Nats Server\");\n                    } else if (type == ConnectionListener.Events.DISCONNECTED) {\n                        LOG.error(\"Disconnected to Nats Server, reconnect attempt in seconds\");\n                    } else if (type == ConnectionListener.Events.CLOSED) {\n                        LOG.info(\"Closed connection with Nats Server\");\n                    }\n                })\n                .build();\n\n\n        try {\n            connection = Nats.connect(options);\n\n        } catch (Exception e) {\n            LOG.error(\"Unable to connect to Nats Server\");\n            throw new ExternalServiceUnavailableException(ExternalServiceUnavailableException.Service.NATS);\n        }\n\n    }\n</code></pre>\n\n<p>This is the request method (with very high await time for testing purposes):</p>\n\n<pre><code> public Optional&lt;String&gt; asyncRequest(String topic, String message) throws ExternalServiceUnavailableException {\n\n        Future&lt;Message&gt; reply = natsConnector.getConnection().request(topic, message.getBytes());\n        try {\n\n            Message msg = reply.get(10L, TimeUnit.SECONDS);\n\n            LOG.info(new String(msg.getData()));\n\n            return Optional.of(new String(msg.getData(), StandardCharsets.UTF_8));\n\n        } catch (InterruptedException | ExecutionException | TimeoutException e) {\n            e.printStackTrace();\n            LOG.error(\"Unable to retrieve response for the sent request: \" + message);\n            throw new ExternalServiceUnavailableException(ExternalServiceUnavailableException.Service.NATS);\n        }\n\n    }\n</code></pre>\n\n<p>And this is the Response Handler with the reply mechanism:</p>\n\n<pre><code> @PostConstruct\n    private void init() {\n        Dispatcher dispatcher = natsConnector.getConnection().createDispatcher(message -&gt; {\n        });\n\n        Subscription assetsInfo = dispatcher.subscribe(\"assets-info\", message -&gt; {\n        JSONObject requestMessage = new JSONObject(new String(message.getData(), StandardCharsets.UTF_8));\n\n            if (requestMessage.getString(\"requestType\").equals(\"stock-status\")) {\n\n                if (requestMessage.getString(\"of\").equals(\"all\")) {\n\n                    JSONObject response = assetQuery.retrieveYesterdayStockStatus();\n                    LOG.info(\"response ready\");\n                    natsOperation.publishEvent(\"assets-info\", response);\n                    LOG.info(\"message sent\");\n                }\n            }\n        });\n    }\n</code></pre>\n\n<p>My two independent Services communicate via a dockerized Nats.io, and I can correctly check via the Nats Go client that messages have been sent by both Services on the same topic.</p>\n\n<p>Unfortunately, the \"Requestor\" when invokes the <code>asyncRequest</code> function doesn't quite handle the reply even with very high await in the <code>reply.get(...)</code>.</p>\n\n<p>When I try to evaluate the <code>reply</code> Object in debug mode, it does not have any data in it and shows a <code>TimeoutException</code>.</p>\n\n<p>At <code>msg.getData()</code> the program crashes.</p>\n\n<p>Do you guys have any hints for me? \nThanks!  </p>\n"},{"tags":["java","split","filereader"],"answers":[{"tags":[],"owner":{"account_id":2177522,"reputation":120796,"user_id":1927832,"accept_rate":49,"display_name":"Suresh Atta"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1378278648,"creation_date":1378278345,"answer_id":18607445,"question_id":18607418,"body_markdown":"\r\n     String[] splited = read.split(&quot;\\\\s+&quot;);\r\n      for (int i= 0; i&lt;splited.length; i++){\r\n      System.out.println(splited[i]);\r\n      }\r\n\r\nYou should loop the result after you split the string.","title":"How to split the strings in a file and read them?","body":"<pre><code> String[] splited = read.split(\"\\\\s+\");\n  for (int i= 0; i&lt;splited.length; i++){\n  System.out.println(splited[i]);\n  }\n</code></pre>\n\n<p>You should loop the result after you split the string.</p>\n"},{"comments":[{"owner":{"account_id":6932217,"reputation":4050,"user_id":5321363,"accept_rate":80,"display_name":"Rann Lifshitz"},"score":0,"creation_date":1523973707,"post_id":18607545,"comment_id":86776023,"body_markdown":"Love your answers buddy. Always well formulated and articulated.","body":"Love your answers buddy. Always well formulated and articulated."}],"tags":[],"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"comment_count":1,"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1442093647,"creation_date":1378278695,"answer_id":18607545,"question_id":18607418,"body_markdown":"You&#39;re part way there which is great.\r\n\r\nWhen reading a file, the `Reader` will return `null` when it reaches the end of the stream, meaning nothing else is available to be read.  Your current approach means that you want to read at least 100 lines, but no more...this will become problematic in the future if you file size increases...it&#39;s also somewhat wasteful\r\n\r\nInstead, we should use the fact a `null` value indicates the end of the file..\r\n\r\nWhen you split a line, it will contain a number of elements.  You are using the `linenum` variable to print these.  The problem is, you&#39;ve already read and split the line, the `linenum` is irrelevant for this task, as it represents the number of lines you&#39;ve already read, not the part of the string you&#39;ve just split.\r\n\r\nInstead, you need to use a inner loop to display the individual split elements for each line...\r\n\r\nFor example...\r\n\r\n    BufferedReader in = null;\r\n    try {\r\n        in = new BufferedReader(new FileReader(&quot;fileeditor.txt&quot;));\r\n        String read = null;\r\n        while ((read = in.readLine()) != null) {\r\n            String[] splited = read.split(&quot;\\\\s+&quot;);\r\n            for (String part : splited) {\r\n                System.out.println(part);\r\n            }\r\n        }\r\n    } catch (IOException e) {\r\n        System.out.println(&quot;There was a problem: &quot; + e);\r\n        e.printStackTrace();\r\n    } finally {\r\n        try {\r\n            in.close();\r\n        } catch (Exception e) {\r\n        }\r\n    }\r\n\r\nAlso, don&#39;t forget, if you open it, you musty close it ;)\r\n\r\n\r\nYou might want to take a little more time going through [Basic I/O](http://docs.oracle.com/javase/tutorial/essential/io/) as well ;)","title":"How to split the strings in a file and read them?","body":"<p>You're part way there which is great.</p>\n\n<p>When reading a file, the <code>Reader</code> will return <code>null</code> when it reaches the end of the stream, meaning nothing else is available to be read.  Your current approach means that you want to read at least 100 lines, but no more...this will become problematic in the future if you file size increases...it's also somewhat wasteful</p>\n\n<p>Instead, we should use the fact a <code>null</code> value indicates the end of the file..</p>\n\n<p>When you split a line, it will contain a number of elements.  You are using the <code>linenum</code> variable to print these.  The problem is, you've already read and split the line, the <code>linenum</code> is irrelevant for this task, as it represents the number of lines you've already read, not the part of the string you've just split.</p>\n\n<p>Instead, you need to use a inner loop to display the individual split elements for each line...</p>\n\n<p>For example...</p>\n\n<pre><code>BufferedReader in = null;\ntry {\n    in = new BufferedReader(new FileReader(\"fileeditor.txt\"));\n    String read = null;\n    while ((read = in.readLine()) != null) {\n        String[] splited = read.split(\"\\\\s+\");\n        for (String part : splited) {\n            System.out.println(part);\n        }\n    }\n} catch (IOException e) {\n    System.out.println(\"There was a problem: \" + e);\n    e.printStackTrace();\n} finally {\n    try {\n        in.close();\n    } catch (Exception e) {\n    }\n}\n</code></pre>\n\n<p>Also, don't forget, if you open it, you musty close it ;)</p>\n\n<p>You might want to take a little more time going through <a href=\"http://docs.oracle.com/javase/tutorial/essential/io/\" rel=\"noreferrer\">Basic I/O</a> as well ;)</p>\n"},{"comments":[{"owner":{"account_id":398094,"reputation":636,"user_id":762588,"display_name":"Viktor Seifert"},"score":0,"creation_date":1382540017,"post_id":18608136,"comment_id":29000018,"body_markdown":"On second thought using a `Scanner` seems to be better.  `StreamTokenizer`is outdated.","body":"On second thought using a <code>Scanner</code> seems to be better.  <code>StreamTokenizer</code>is outdated."}],"tags":[],"owner":{"account_id":398094,"reputation":636,"user_id":762588,"display_name":"Viktor Seifert"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1378280665,"creation_date":1378280665,"answer_id":18608136,"question_id":18607418,"body_markdown":"You can use a [`StreamTokenizer`][1].  It will split a stream into tokens according to its settings.  From your question I think that you want to treat line endings just as token separators.  The code would look like this:\r\n\r\n\r\n\timport java.io.BufferedReader;\r\n\timport java.io.FileReader;\r\n\timport java.io.IOException;\r\n\timport java.io.StreamTokenizer;\r\n\r\n\tpublic class ReaderSample {\r\n\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\tBufferedReader in = null;\r\n\t\t\ttry {\r\n\t\t\t\tin = new BufferedReader(new FileReader(&quot;fileeditor.txt&quot;));\r\n\t\t\t\tStreamTokenizer st = new StreamTokenizer(in);\r\n\t\t\t\tst.eolIsSignificant(false);\r\n\t\t\t\t// remove comment handling\r\n\t\t\t\tst.slashSlashComments(false);\r\n\t\t\t\tst.slashStarComments(false);\r\n\t\t\t\t\r\n\t\t\t\twhile(st.nextToken() != StreamTokenizer.TT_EOF) {\r\n\t\t\t\t\tif (st.ttype == StreamTokenizer.TT_NUMBER) {\r\n\t\t\t\t\t\t// the default is to treat numbers differently than words\r\n\t\t\t\t\t\t// also the numbers are doubles\r\n\t\t\t\t\t\tSystem.out.println((int)st.nval);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tSystem.out.println(st.sval);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcatch(IOException ex) {\r\n\t\t\t\tSystem.err.println(ex.getMessage());\r\n\t\t\t}\r\n\t\t\tfinally {\r\n\t\t\t\tif (in != null) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tin.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcatch (IOException ex) {\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\nDepending on what you need to do woth the input you may need to set different options, the documentation should help you here.\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/io/StreamTokenizer.html","title":"How to split the strings in a file and read them?","body":"<p>You can use a <a href=\"http://docs.oracle.com/javase/6/docs/api/java/io/StreamTokenizer.html\" rel=\"nofollow\"><code>StreamTokenizer</code></a>.  It will split a stream into tokens according to its settings.  From your question I think that you want to treat line endings just as token separators.  The code would look like this:</p>\n\n<pre><code>import java.io.BufferedReader;\nimport java.io.FileReader;\nimport java.io.IOException;\nimport java.io.StreamTokenizer;\n\npublic class ReaderSample {\n\n    public static void main(String[] args) {\n        BufferedReader in = null;\n        try {\n            in = new BufferedReader(new FileReader(\"fileeditor.txt\"));\n            StreamTokenizer st = new StreamTokenizer(in);\n            st.eolIsSignificant(false);\n            // remove comment handling\n            st.slashSlashComments(false);\n            st.slashStarComments(false);\n\n            while(st.nextToken() != StreamTokenizer.TT_EOF) {\n                if (st.ttype == StreamTokenizer.TT_NUMBER) {\n                    // the default is to treat numbers differently than words\n                    // also the numbers are doubles\n                    System.out.println((int)st.nval);\n                }\n                else {\n                    System.out.println(st.sval);\n                }\n            }\n        }\n        catch(IOException ex) {\n            System.err.println(ex.getMessage());\n        }\n        finally {\n            if (in != null) {\n                try {\n                    in.close();\n                }\n                catch (IOException ex) {\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Depending on what you need to do woth the input you may need to set different options, the documentation should help you here.</p>\n"},{"tags":[],"owner":{"account_id":29517307,"reputation":1,"user_id":22620980,"display_name":"bobo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695652889,"creation_date":1695652889,"answer_id":77173628,"question_id":18607418,"body_markdown":"I have restructured the [answer code provided by @MadProgrammer][1] into a Java method that you can easily incorporate into your development:\r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.FileReader;\r\n    import java.io.IOException;\r\n    \r\n    public class Post18607545 {\r\n        public static void splitAndReadFile(String fileName) throws IOException {\r\n            BufferedReader in = null;\r\n            try {\r\n                in = new BufferedReader(new FileReader(fileName));\r\n                String read = null;\r\n                while ((read = in.readLine()) != null) {\r\n                    String[] splited = read.split(&quot;\\\\s+&quot;);\r\n                    for (String part : splited) {\r\n                        System.out.println(part);\r\n                    }\r\n                }\r\n            } catch (IOException e) {\r\n                System.out.println(&quot;There was a problem: &quot; + e);\r\n                e.printStackTrace();\r\n            } finally {\r\n                try {\r\n                    in.close();\r\n                } catch (Exception e) {\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n[1]: https://stackoverflow.com/a/18607545\r\n\r\n","title":"How to split the strings in a file and read them?","body":"<p>I have restructured the <a href=\"https://stackoverflow.com/a/18607545\">answer code provided by @MadProgrammer</a> into a Java method that you can easily incorporate into your development:</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.FileReader;\nimport java.io.IOException;\n\npublic class Post18607545 {\n    public static void splitAndReadFile(String fileName) throws IOException {\n        BufferedReader in = null;\n        try {\n            in = new BufferedReader(new FileReader(fileName));\n            String read = null;\n            while ((read = in.readLine()) != null) {\n                String[] splited = read.split(&quot;\\\\s+&quot;);\n                for (String part : splited) {\n                    System.out.println(part);\n                }\n            }\n        } catch (IOException e) {\n            System.out.println(&quot;There was a problem: &quot; + e);\n            e.printStackTrace();\n        } finally {\n            try {\n                in.close();\n            } catch (Exception e) {\n            }\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3259849,"reputation":464,"user_id":2745609,"accept_rate":57,"display_name":"Solijoli"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51772,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":18607545,"answer_count":4,"score":9,"last_activity_date":1695652889,"creation_date":1378278259,"question_id":18607418,"body_markdown":"I have a file with information in it. It looks like:\r\n \r\n        Michael 19 180 Miami\r\n        George 25 176 Washington\r\n        William 43 188 Seattle\r\n\r\nI want to split the lines and strings and read them. I want it to look like:\r\n\r\n        Michael\r\n        19\r\n        180\r\n        Miami\r\n        George\r\n        ...\r\n\r\ni used a code like this:\r\n\r\n        BufferedReader in = null;\r\n\t    String read;\r\n\t    int linenum;\r\n        try{\r\n\t\t    in = new BufferedReader(new FileReader(&quot;fileeditor.txt&quot;)); \r\n\t\t}\r\n\t\tcatch (FileNotFoundException e) {System.out.println(&quot;There was a problem: &quot; + e);}\r\n        try{\r\n\t\t    for (linenum = 0; linenum&lt;100; linenum++){\r\n\t\t        read = in.readLine();\r\n\t\t        if(read == null){} \r\n\t\t        else{\r\n\t\t            String[] splited = read.split(&quot;\\\\s+&quot;);\r\n\t\t            System.out.println(splited[linenum]);\r\n\t\t       }\r\n\t       }\r\n\t    }\r\n\t\tcatch (IOException e) {System.out.println(&quot;There was a problem: &quot; + e);} \r\n\t}\r\nWhat this gave me was \r\n\r\n        Michael\r\n        25\r\n        188\r\n\r\nI think its probably an issue with my for loop but I&#39;m not very advanced in programming and I&#39;ll appreciate help. Thanks.","title":"How to split the strings in a file and read them?","body":"<p>I have a file with information in it. It looks like:</p>\n\n<pre><code>    Michael 19 180 Miami\n    George 25 176 Washington\n    William 43 188 Seattle\n</code></pre>\n\n<p>I want to split the lines and strings and read them. I want it to look like:</p>\n\n<pre><code>    Michael\n    19\n    180\n    Miami\n    George\n    ...\n</code></pre>\n\n<p>i used a code like this:</p>\n\n<pre><code>    BufferedReader in = null;\n    String read;\n    int linenum;\n    try{\n        in = new BufferedReader(new FileReader(\"fileeditor.txt\")); \n    }\n    catch (FileNotFoundException e) {System.out.println(\"There was a problem: \" + e);}\n    try{\n        for (linenum = 0; linenum&lt;100; linenum++){\n            read = in.readLine();\n            if(read == null){} \n            else{\n                String[] splited = read.split(\"\\\\s+\");\n                System.out.println(splited[linenum]);\n           }\n       }\n    }\n    catch (IOException e) {System.out.println(\"There was a problem: \" + e);} \n}\n</code></pre>\n\n<p>What this gave me was </p>\n\n<pre><code>    Michael\n    25\n    188\n</code></pre>\n\n<p>I think its probably an issue with my for loop but I'm not very advanced in programming and I'll appreciate help. Thanks.</p>\n"},{"tags":["java","hibernate","jpa"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":1,"creation_date":1647530639,"post_id":71509040,"comment_id":126399068,"body_markdown":"You might try &quot;Select c FROM Company c join c.products p WHERE p IN (:prods)&quot;, but as the validation comes from spring, you might show the repository methods being used as well. The first error mentions phones which you haven&#39;t specified at all in your description, so I suspect your method signature is the problem there.","body":"You might try &quot;Select c FROM Company c join c.products p WHERE p IN (:prods)&quot;, but as the validation comes from spring, you might show the repository methods being used as well. The first error mentions phones which you haven&#39;t specified at all in your description, so I suspect your method signature is the problem there."},{"owner":{"account_id":64566,"reputation":125,"user_id":190548,"display_name":"Horst der Pferd"},"score":0,"creation_date":1647604421,"post_id":71509040,"comment_id":126418235,"body_markdown":"The phones were a copy/paste error. I fixed my post but your suggestion already solved the problem. Thanks a lot.","body":"The phones were a copy/paste error. I fixed my post but your suggestion already solved the problem. Thanks a lot."}],"answers":[{"tags":[],"owner":{"account_id":64566,"reputation":125,"user_id":190548,"display_name":"Horst der Pferd"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1647604030,"creation_date":1647604030,"answer_id":71526594,"question_id":71509040,"body_markdown":"Thanks Chris. Your suggested query `Select c FROM Company c join c.products p WHERE p IN (:prods)` works. Thanks for looking into it.","title":"Query JPA ElementCollection with List","body":"<p>Thanks Chris. Your suggested query <code>Select c FROM Company c join c.products p WHERE p IN (:prods)</code> works. Thanks for looking into it.</p>\n"},{"tags":[],"owner":{"account_id":25900984,"reputation":1,"user_id":19626867,"display_name":"damianwnukowski"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695652650,"creation_date":1695652650,"answer_id":77173602,"question_id":71509040,"body_markdown":"In my case I&#39;ve had to do left join:\r\n\r\n    Select c FROM Company c left join c.products p WHERE p IN (:prods)\r\n\r\nJoin by default is an inner join, so you won&#39;t get any results with empty c.products.","title":"Query JPA ElementCollection with List","body":"<p>In my case I've had to do left join:</p>\n<pre><code>Select c FROM Company c left join c.products p WHERE p IN (:prods)\n</code></pre>\n<p>Join by default is an inner join, so you won't get any results with empty c.products.</p>\n"}],"owner":{"account_id":64566,"reputation":125,"user_id":190548,"display_name":"Horst der Pferd"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1588,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1695652650,"creation_date":1647505138,"question_id":71509040,"body_markdown":"How do I query an `@ElementCollection` containing at least one element of my search criteria?\r\n\r\n\r\nGiven this corresponding database schema\r\n\r\n[![ER diagram][1]][1]\r\n\r\nfor this entity class\r\n\r\n```java\r\n@Entity\r\n@Table(name = &quot;companies&quot;)\r\npublic class Company {\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate Integer id;\r\n\r\n\t@Column(nullable = false)\r\n\tprivate String name;\r\n\r\n\t@ElementCollection\r\n\t@CollectionTable(\r\n\t\tname=&quot;companies_products&quot;,\r\n\t\tjoinColumns = @JoinColumn(name=&quot;company_id&quot;)\r\n\t)\r\n\t@Column(name=&quot;product&quot;)\r\n\tprivate List&lt;String&gt; products = new ArrayList&lt;&gt;();\r\n\r\n    // ... getters/setters\r\n}\r\n```\r\n\r\nI want to query the database for companies with a list of products. In SQL I can do\r\n\r\n```sql\r\nSELECT DISTINCT\r\n    c.*\r\n    FROM companies c\r\n    LEFT JOIN companies_products cp ON c.id = cp.company_id\r\n    WHERE\r\n        cp.product IN (&#39;food&#39;, &#39;electronics&#39;, &#39;books&#39;)\r\n```\r\n\r\nHow whould an equivalent HQL/JPQL query look like?\r\n\r\nI found [Hibernate&#39;s collection-related expressions][2] and [qualified-path expressions][3] but I was unable to create a working query.\r\n- `FROM Company c WHERE c.products IN (:prods)` using `List.of(&quot;food&quot;, &quot;electronics&quot;, &quot;books&quot;)` as named parameter\r\n\r\n  org.springframework.dao.InvalidDataAccessApiUsageException: Parameter value [phones] did not match expected type [java.util.Collection (n/a)]; nested exception is java.lang.IllegalArgumentException: Parameter value [food] did not match expected type [java.util.Collection (n/a)]\r\n\r\n- `FROM Company c WHERE value(c.products) IN (:prods)`\r\n\r\n  Could not create query for public abstract java.util.List com.example.demo.CompanyRepository.findWithProducts(java.util.List)! Reason: Validation failed for query for method public abstract java.util.List com.example.demo.CompanyRepository.findWithProducts(java.util.List)!; nested exception is java.lang.IllegalArgumentException: Validation failed for query for method public abstract java.util.List com.example.demo.CompanyRepository.findWithProducts(java.util.List)!\r\n\r\n- `FROM Company c WHERE elements(c.products) IN (:prods)`\r\n\r\n  Could not create query for public abstract java.util.List com.example.demo.CompanyRepository.findWithProducts(java.util.List)! Reason: Validation failed for query for method public abstract java.util.List com.example.demo.CompanyRepository.findWithProducts(java.util.List)!; nested exception is java.lang.IllegalArgumentException: Validation failed for query for method public abstract java.util.List com.example.demo.CompanyRepository.findWithProducts(java.util.List)!\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/7Zhaf.png\r\n  [2]: https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#hql-collection-expressions\r\n  [3]: https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#hql-collection-qualification","title":"Query JPA ElementCollection with List","body":"<p>How do I query an <code>@ElementCollection</code> containing at least one element of my search criteria?</p>\n<p>Given this corresponding database schema</p>\n<p><a href=\"https://i.stack.imgur.com/7Zhaf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7Zhaf.png\" alt=\"ER diagram\" /></a></p>\n<p>for this entity class</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;companies&quot;)\npublic class Company {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Integer id;\n\n    @Column(nullable = false)\n    private String name;\n\n    @ElementCollection\n    @CollectionTable(\n        name=&quot;companies_products&quot;,\n        joinColumns = @JoinColumn(name=&quot;company_id&quot;)\n    )\n    @Column(name=&quot;product&quot;)\n    private List&lt;String&gt; products = new ArrayList&lt;&gt;();\n\n    // ... getters/setters\n}\n</code></pre>\n<p>I want to query the database for companies with a list of products. In SQL I can do</p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT DISTINCT\n    c.*\n    FROM companies c\n    LEFT JOIN companies_products cp ON c.id = cp.company_id\n    WHERE\n        cp.product IN ('food', 'electronics', 'books')\n</code></pre>\n<p>How whould an equivalent HQL/JPQL query look like?</p>\n<p>I found <a href=\"https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#hql-collection-expressions\" rel=\"nofollow noreferrer\">Hibernate's collection-related expressions</a> and <a href=\"https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#hql-collection-qualification\" rel=\"nofollow noreferrer\">qualified-path expressions</a> but I was unable to create a working query.</p>\n<ul>\n<li><p><code>FROM Company c WHERE c.products IN (:prods)</code> using <code>List.of(&quot;food&quot;, &quot;electronics&quot;, &quot;books&quot;)</code> as named parameter</p>\n<p>org.springframework.dao.InvalidDataAccessApiUsageException: Parameter value [phones] did not match expected type [java.util.Collection (n/a)]; nested exception is java.lang.IllegalArgumentException: Parameter value [food] did not match expected type [java.util.Collection (n/a)]</p>\n</li>\n<li><p><code>FROM Company c WHERE value(c.products) IN (:prods)</code></p>\n<p>Could not create query for public abstract java.util.List com.example.demo.CompanyRepository.findWithProducts(java.util.List)! Reason: Validation failed for query for method public abstract java.util.List com.example.demo.CompanyRepository.findWithProducts(java.util.List)!; nested exception is java.lang.IllegalArgumentException: Validation failed for query for method public abstract java.util.List com.example.demo.CompanyRepository.findWithProducts(java.util.List)!</p>\n</li>\n<li><p><code>FROM Company c WHERE elements(c.products) IN (:prods)</code></p>\n<p>Could not create query for public abstract java.util.List com.example.demo.CompanyRepository.findWithProducts(java.util.List)! Reason: Validation failed for query for method public abstract java.util.List com.example.demo.CompanyRepository.findWithProducts(java.util.List)!; nested exception is java.lang.IllegalArgumentException: Validation failed for query for method public abstract java.util.List com.example.demo.CompanyRepository.findWithProducts(java.util.List)!</p>\n</li>\n</ul>\n"},{"tags":["java","selenium-webdriver"],"answers":[{"tags":[],"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695652528,"creation_date":1695652528,"answer_id":77173581,"question_id":77173554,"body_markdown":"You can do it being more specific in the `By.xpath()`:\r\n\r\n```java\r\ndriver.findElement(By.xpath(&quot;//span[contains(@class, &#39;MuiButton-label&#39;) and contains(text(),&#39;Create&#39;)]&quot;)).click();\r\n```","title":"Path for button without id or name in selenium java","body":"<p>You can do it being more specific in the <code>By.xpath()</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>driver.findElement(By.xpath(&quot;//span[contains(@class, 'MuiButton-label') and contains(text(),'Create')]&quot;)).click();\n</code></pre>\n"}],"owner":{"account_id":29197708,"reputation":47,"user_id":22368447,"display_name":"Rajeesha R"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77173581,"answer_count":1,"score":1,"last_activity_date":1695652528,"creation_date":1695652299,"question_id":77173554,"body_markdown":"````\r\n&lt;span class=“MuiButton-label&quot;&gt;\r\n&lt;span class=&quot;MuiButton-startIcon MuiButton-iconSizeMedium”&gt;\r\n&lt;span class=“MuiButton-label&quot;&gt; &lt;span class=&quot;MuiButton-startIcon MuiButton-iconSizeMedium”&gt; &lt;svg class=&quot;MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-vubbuv&quot; focusable=&quot;false&quot; aria-hidden=&quot;true&quot; viewBox=&quot;0 enter code here0 24 24&quot; data-testid=“SaveIcon&quot;&gt; &lt;path d=&quot;somevalue”&gt; Create\r\n````\r\n\r\n\r\nHow do I create an path for above code?\r\n````\r\ndriver.findElement(By.xpath(&quot;//*[contains(text(),&#39;Create&#39;)]&quot;)).click();\r\n````\r\nI tried like this but didn&#39;t work and not giving any error\r\n\r\n","title":"Path for button without id or name in selenium java","body":"<pre><code>&lt;span class=“MuiButton-label&quot;&gt;\n&lt;span class=&quot;MuiButton-startIcon MuiButton-iconSizeMedium”&gt;\n&lt;span class=“MuiButton-label&quot;&gt; &lt;span class=&quot;MuiButton-startIcon MuiButton-iconSizeMedium”&gt; &lt;svg class=&quot;MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-vubbuv&quot; focusable=&quot;false&quot; aria-hidden=&quot;true&quot; viewBox=&quot;0 enter code here0 24 24&quot; data-testid=“SaveIcon&quot;&gt; &lt;path d=&quot;somevalue”&gt; Create\n</code></pre>\n<p>How do I create an path for above code?</p>\n<pre><code>driver.findElement(By.xpath(&quot;//*[contains(text(),'Create')]&quot;)).click();\n</code></pre>\n<p>I tried like this but didn't work and not giving any error</p>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa","spring-transactions"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":1,"creation_date":1695639410,"post_id":77172012,"comment_id":136046725,"body_markdown":"The `@Column` annotation is only used for generating the tables. It is not used for validation","body":"The <code>@Column</code> annotation is only used for generating the tables. It is not used for validation"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1695639460,"post_id":77172012,"comment_id":136046731,"body_markdown":"BTW: You should do the validation not on the database layer. Do it in the businesslogic","body":"BTW: You should do the validation not on the database layer. Do it in the businesslogic"},{"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"score":0,"creation_date":1695651250,"post_id":77172012,"comment_id":136049267,"body_markdown":"i think the repository.save() should throw exception immediately now if it fails to insert the user to the DB . what do you want to do actually ?","body":"i think the repository.save() should throw exception immediately now if it fails to insert the user to the DB . what do you want to do actually ?"},{"owner":{"account_id":16228733,"reputation":26,"user_id":11718232,"display_name":"tabool"},"score":0,"creation_date":1695722521,"post_id":77172012,"comment_id":136059361,"body_markdown":"epository.save() throws exception immediately, but @Transactional catches this exception and returns to continue execution of my method but it shouldn&#39;t continue execution.","body":"epository.save() throws exception immediately, but @Transactional catches this exception and returns to continue execution of my method but it shouldn&#39;t continue execution."}],"answers":[{"tags":[],"owner":{"account_id":3388916,"reputation":1080,"user_id":7537885,"display_name":"Hermann Steidel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695652468,"creation_date":1695652468,"answer_id":77173572,"question_id":77172012,"body_markdown":"I would consider a different approach. Getting the database or persistence framework to auto-throw errors that you then catch to control the flow of you code can be improved upon. There are many ways you can do this but I would consider something like the following:\r\n\r\n```\r\n@Transactional \r\npublic void doWork() {\r\n    User user = new User(1);\r\n    if (isUserValid(user)) {\r\n       user = userRepository.save(user);\r\n       doOtherWork(user);\r\n    } else {\r\n     //log.warn(&quot;user is invalid&quot;);\r\n    }\r\n\r\n   \r\n}\r\n\r\nprivate boolean isUserValid(User user) {\r\n   //check user, return false if not valid\r\n   // perhaps logging at debug level what&#39;s wrong is also helpful\r\n}\r\n\r\n```\r\n\r\nThere are a couple of points to this:\r\n\r\n - You explicitly declare what makes a user invalid which can be tested independent of a database or database framework. Additionally, the way your code is now, someone else or you in the future, would not intuitively know what makes a user valid.\r\n - Using exceptions for flow control is usually a bad idea and an anti-pattern. Exceptions should be exceptional, not part of your normal business logic\r\n - Since you mentioned `nullable = false`, you may want to look at the Hibernate Validation project to use annotation based validation. If you are dealing with a Spring Web project, you can enable this easily. However, one thing I would also suggest is that you do not expose your database class / entity `User` at the web or presentation layer that is accepting the form fields. It is better to work with, so called, data transfer objects that handle the validation for you. Once that is valid, you can create database objects from that to save to your DB.\r\n\r\nExample:\r\n```\r\npublic class NewUserForm {\r\n\r\n  @NotNull\r\n  private String username;\r\n\r\n}\r\n\r\n//validation happens by the caller of this service layer method or before transforming here\r\npublic saveUser(NewUserForm userForm) {\r\n    User user = transformToUser(userForm);\r\n    userRepository.save(user);\r\n    \r\n}\r\n```\r\n\r\nFor more info on getting started with validation in Spring, you can Google `Spring Hibernate Validation` and you will find plenty of &quot;getting started&quot; guides on this.\r\n\r\n \r\n\r\n ","title":"@Transactional avoids exception in repository methods","body":"<p>I would consider a different approach. Getting the database or persistence framework to auto-throw errors that you then catch to control the flow of you code can be improved upon. There are many ways you can do this but I would consider something like the following:</p>\n<pre><code>@Transactional \npublic void doWork() {\n    User user = new User(1);\n    if (isUserValid(user)) {\n       user = userRepository.save(user);\n       doOtherWork(user);\n    } else {\n     //log.warn(&quot;user is invalid&quot;);\n    }\n\n   \n}\n\nprivate boolean isUserValid(User user) {\n   //check user, return false if not valid\n   // perhaps logging at debug level what's wrong is also helpful\n}\n\n</code></pre>\n<p>There are a couple of points to this:</p>\n<ul>\n<li>You explicitly declare what makes a user invalid which can be tested independent of a database or database framework. Additionally, the way your code is now, someone else or you in the future, would not intuitively know what makes a user valid.</li>\n<li>Using exceptions for flow control is usually a bad idea and an anti-pattern. Exceptions should be exceptional, not part of your normal business logic</li>\n<li>Since you mentioned <code>nullable = false</code>, you may want to look at the Hibernate Validation project to use annotation based validation. If you are dealing with a Spring Web project, you can enable this easily. However, one thing I would also suggest is that you do not expose your database class / entity <code>User</code> at the web or presentation layer that is accepting the form fields. It is better to work with, so called, data transfer objects that handle the validation for you. Once that is valid, you can create database objects from that to save to your DB.</li>\n</ul>\n<p>Example:</p>\n<pre><code>public class NewUserForm {\n\n  @NotNull\n  private String username;\n\n}\n\n//validation happens by the caller of this service layer method or before transforming here\npublic saveUser(NewUserForm userForm) {\n    User user = transformToUser(userForm);\n    userRepository.save(user);\n    \n}\n</code></pre>\n<p>For more info on getting started with validation in Spring, you can Google <code>Spring Hibernate Validation</code> and you will find plenty of &quot;getting started&quot; guides on this.</p>\n"}],"owner":{"account_id":16228733,"reputation":26,"user_id":11718232,"display_name":"tabool"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1695652468,"creation_date":1695638960,"question_id":77172012,"body_markdown":"I am using `@Transactional` for service method\r\n\r\nSuppose we have such methods\r\n\r\n    @Transactional \r\n    public void doWork() {\r\n        User user = new User(1);\r\n        user = userRepository.save(user);\r\n    \r\n        doOtherWorkIfAllIsOk(user);\r\n    }\r\n    \r\n    private void doOtherWorkIfAllIsOk(User user) {\r\n        System.out.println(&quot;Everything is alright&quot;);\r\n        user.setName(&quot;Bob&quot;)\r\n        userRepository.save(user);\r\n    }\r\n\r\nIf, for example, I did not fill in some required field for the User, which has `nullable = false`, the transaction will catch an exception that will throw the repository method and my method will continue execution by calling the method `doOtherWorkIfAllIsOk()`.\r\n\r\n\r\n How to configure transaction behavior so that Spring does not catch exceptions when calling a repository method. I need that if an error occurs in the repository method, then the doWork() method throws this exception and is interrupted and the doOtherWorkIfAllIsOk(User user) method should not be called, because now if there is an error in the repository method, the doOtherWorkIfAllIsOk(User user) method is called.\r\n","title":"@Transactional avoids exception in repository methods","body":"<p>I am using <code>@Transactional</code> for service method</p>\n<p>Suppose we have such methods</p>\n<pre><code>@Transactional \npublic void doWork() {\n    User user = new User(1);\n    user = userRepository.save(user);\n\n    doOtherWorkIfAllIsOk(user);\n}\n\nprivate void doOtherWorkIfAllIsOk(User user) {\n    System.out.println(&quot;Everything is alright&quot;);\n    user.setName(&quot;Bob&quot;)\n    userRepository.save(user);\n}\n</code></pre>\n<p>If, for example, I did not fill in some required field for the User, which has <code>nullable = false</code>, the transaction will catch an exception that will throw the repository method and my method will continue execution by calling the method <code>doOtherWorkIfAllIsOk()</code>.</p>\n<p>How to configure transaction behavior so that Spring does not catch exceptions when calling a repository method. I need that if an error occurs in the repository method, then the doWork() method throws this exception and is interrupted and the doOtherWorkIfAllIsOk(User user) method should not be called, because now if there is an error in the repository method, the doOtherWorkIfAllIsOk(User user) method is called.</p>\n"},{"tags":["java","apache","indexing","lucene","jackrabbit-oak"],"comments":[{"owner":{"account_id":137882,"reputation":1165,"user_id":342409,"display_name":"catholicon"},"score":0,"creation_date":1564736763,"post_id":57284650,"comment_id":101136888,"body_markdown":"isn&#39;t this a duplicate of https://stackoverflow.com/questions/56655489?","body":"isn&#39;t this a duplicate of <a href=\"https://stackoverflow.com/questions/56655489\">stackoverflow.com/questions/56655489</a>?"}],"owner":{"account_id":4188742,"reputation":97,"user_id":3431808,"accept_rate":33,"display_name":"sandy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":101,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695651070,"creation_date":1564555068,"question_id":57284650,"body_markdown":"Can anyone share an example of initializing RDBMS Oak Repository with Lucene Index?\r\n\r\nI have tried below but getting \r\n\r\n    The index update failed\r\n    org.apache.jackrabbit.oak.api.CommitFailedException: OakAsync0002: Missing index provider detected for type [counter] on index [/oak:index/counter] error\r\n\r\n\r\n```   \r\nLuceneIndexProvider provider = new LuceneIndexProvider();\r\n\r\n\t\t\t\trepository = new Oak(documentNodeStoreService)\r\n            .with(new InitialContent())\r\n\t\t\t\t\t\t.with(new OpenSecurityProvider())\r\n            .with((QueryIndexProvider) provider)\r\n            .with((Observer) provider)\r\n\t\t\t\t\t\t.with(new LucenePropertyInitialiser(&quot;testluceneIndex&quot;, of(&quot;^[^\\\\/]*$&quot;)))\r\n\t\t\t\t\t\t.with(new LuceneIndexEditorProvider())\r\n\t\t\t\t\t\t.with(new NodeCounterEditorProvider())\r\n\t\t\t\t\t\t.withAsyncIndexing(&quot;async&quot;, 5)\r\n            .with(&quot;custom&quot;)\r\n            .createContentRepository();\r\n```","title":"How to create RDBMS oak repository with lucene index","body":"<p>Can anyone share an example of initializing RDBMS Oak Repository with Lucene Index?</p>\n\n<p>I have tried below but getting </p>\n\n<pre><code>The index update failed\norg.apache.jackrabbit.oak.api.CommitFailedException: OakAsync0002: Missing index provider detected for type [counter] on index [/oak:index/counter] error\n</code></pre>\n\n<pre><code>LuceneIndexProvider provider = new LuceneIndexProvider();\n\n                repository = new Oak(documentNodeStoreService)\n            .with(new InitialContent())\n                        .with(new OpenSecurityProvider())\n            .with((QueryIndexProvider) provider)\n            .with((Observer) provider)\n                        .with(new LucenePropertyInitialiser(\"testluceneIndex\", of(\"^[^\\\\/]*$\")))\n                        .with(new LuceneIndexEditorProvider())\n                        .with(new NodeCounterEditorProvider())\n                        .withAsyncIndexing(\"async\", 5)\n            .with(\"custom\")\n            .createContentRepository();\n</code></pre>\n"},{"tags":["java","maven","osgi-bundle","flying-saucer"],"owner":{"account_id":1076957,"reputation":1015,"user_id":1074881,"accept_rate":57,"display_name":"ezhil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695650448,"creation_date":1695650448,"question_id":77173326,"body_markdown":"I am creating OSGI bundle for Flying Saucer(https://github.com/flyingsaucerproject/flyingsaucer) module but is failing due to com.apple.mrj -- Cannot be resolved in Imported Packages section.  \r\n\r\nBelow is the dependency I am trying to add,\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.xhtmlrenderer&lt;/groupId&gt;\r\n        &lt;artifactId&gt;flying-saucer-pdf-itext5&lt;/artifactId&gt;\r\n        &lt;version&gt;9.0.1&lt;/version&gt;\r\n        &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\nSince dependency have dependency with others so I am adding below dependencies\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.xhtmlrenderer&lt;/groupId&gt;\r\n        &lt;artifactId&gt;flying-saucer-pdf&lt;/artifactId&gt;\r\n        &lt;version&gt;9.2.2&lt;/version&gt;\r\n        &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.lowagie&lt;/groupId&gt;\r\n        &lt;artifactId&gt;itext&lt;/artifactId&gt;\r\n        &lt;version&gt;2.1.7&lt;/version&gt;\r\n        &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.apple&lt;/groupId&gt;\r\n        &lt;artifactId&gt;AppleJavaExtensions&lt;/artifactId&gt;\r\n        &lt;version&gt;1.4&lt;/version&gt;\r\n        &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\nI get below error while activaging this bundle,\r\n\r\n    25.09.2023 19:20:05.329 *ERROR* [qtp1339983583-2215] org.apache.felix.http.jetty Bundles: Cannot start (org.osgi.framework.BundleException: Unable to resolve com.adobe [689](R 689.1): missing requirement [com.adobe [689](R 689.1)] osgi.wiring.package; (osgi.wiring.package=com.apple.mrj) Unresolved requirements: [[com.adobe [689](R 689.1)] osgi.wiring.package; (osgi.wiring.package=com.apple.mrj)])\r\n    org.osgi.framework.BundleException: Unable to resolve com.adobe [689](R 689.1): missing requirement [com.adobe [689](R 689.1)] osgi.wiring.package; (osgi.wiring.package=com.apple.mrj) Unresolved requirements: [[com.adobe [689](R 689.1)] osgi.wiring.package; (osgi.wiring.package=com.apple.mrj)]\r\n\r\nLooks like it could not import &quot;com.apple.mrj -- Cannot be resolved&quot; and com.lowagie.toolbox -- Cannot be resolved\r\n\r\nBelow in my bnd-maven-plugin. Here I am importing and exporting all packages using *\r\n\r\n    &lt;configuration&gt;\r\n                                &lt;bnd&gt;&lt;![CDATA[\r\n    Bundle-Category: VeevaCoreCommon\r\n    Bundle-SymbolicName: com.adobe\r\n    Import-Package: javax.annotation;version=0.0.0,\\\r\n    \t\t\t\t!sun.*,!*.internal.*,\\\r\n    \t\t\t\t!junit.*,!com.aayushatharva.*,!com.github.*,\\\r\n    \t\t\t\t!com.googl.*,!com.jcraft.*,!com.ning.*,\\\r\n    \t\t\t\t!com.oracle.*,!kotlin,!lzma.*,!net.jpountz.*,\\\r\n    \t\t\t\t!org.apache.avalon.*,!org.apache.log,!org.bouncycastle.*,\\\r\n    \t\t\t\t!org.apache.logging.*,!reactor.*,\\\r\n    \t\t\t\t!org.conscrypt,!org.eclipse.*,!org.jboss.*,!scala.util,\\\r\n    \t\t\t\t!com.google.protobuf.*,*\r\n    Export-Package:  !sun.*,\\\r\n    \t\t\t\t !junit.*,*\r\n    \r\n              ]]&gt;&lt;/bnd&gt;\r\n    &lt;/configuration&gt;\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/RqpDj.png\r\n\r\nI added the dependency for the package com.lowagie.toolbox &amp; com.apple.mrj. Can anyone tell me how to fix this issue ? Actually I want to import below in my java class\r\n\r\n    import org.xhtmlrenderer.pdf.ITextRenderer;\r\n\r\nSo I am trying to add all dependencies. How do I ensure I am adding all inter dependencies correctly ? is there any way ? Why this import is not resolving even after adding it&#39;s dependency? Any idea/input would be really helpful.","title":"How to fix package Cannot be resolved issue in OSGI?","body":"<p>I am creating OSGI bundle for Flying Saucer(<a href=\"https://github.com/flyingsaucerproject/flyingsaucer\" rel=\"nofollow noreferrer\">https://github.com/flyingsaucerproject/flyingsaucer</a>) module but is failing due to com.apple.mrj -- Cannot be resolved in Imported Packages section.</p>\n<p>Below is the dependency I am trying to add,</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.xhtmlrenderer&lt;/groupId&gt;\n    &lt;artifactId&gt;flying-saucer-pdf-itext5&lt;/artifactId&gt;\n    &lt;version&gt;9.0.1&lt;/version&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Since dependency have dependency with others so I am adding below dependencies</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.xhtmlrenderer&lt;/groupId&gt;\n    &lt;artifactId&gt;flying-saucer-pdf&lt;/artifactId&gt;\n    &lt;version&gt;9.2.2&lt;/version&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;com.lowagie&lt;/groupId&gt;\n    &lt;artifactId&gt;itext&lt;/artifactId&gt;\n    &lt;version&gt;2.1.7&lt;/version&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;com.apple&lt;/groupId&gt;\n    &lt;artifactId&gt;AppleJavaExtensions&lt;/artifactId&gt;\n    &lt;version&gt;1.4&lt;/version&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I get below error while activaging this bundle,</p>\n<pre><code>25.09.2023 19:20:05.329 *ERROR* [qtp1339983583-2215] org.apache.felix.http.jetty Bundles: Cannot start (org.osgi.framework.BundleException: Unable to resolve com.adobe [689](R 689.1): missing requirement [com.adobe [689](R 689.1)] osgi.wiring.package; (osgi.wiring.package=com.apple.mrj) Unresolved requirements: [[com.adobe [689](R 689.1)] osgi.wiring.package; (osgi.wiring.package=com.apple.mrj)])\norg.osgi.framework.BundleException: Unable to resolve com.adobe [689](R 689.1): missing requirement [com.adobe [689](R 689.1)] osgi.wiring.package; (osgi.wiring.package=com.apple.mrj) Unresolved requirements: [[com.adobe [689](R 689.1)] osgi.wiring.package; (osgi.wiring.package=com.apple.mrj)]\n</code></pre>\n<p>Looks like it could not import &quot;com.apple.mrj -- Cannot be resolved&quot; and com.lowagie.toolbox -- Cannot be resolved</p>\n<p>Below in my bnd-maven-plugin. Here I am importing and exporting all packages using *</p>\n<pre><code>&lt;configuration&gt;\n                            &lt;bnd&gt;&lt;![CDATA[\nBundle-Category: VeevaCoreCommon\nBundle-SymbolicName: com.adobe\nImport-Package: javax.annotation;version=0.0.0,\\\n                !sun.*,!*.internal.*,\\\n                !junit.*,!com.aayushatharva.*,!com.github.*,\\\n                !com.googl.*,!com.jcraft.*,!com.ning.*,\\\n                !com.oracle.*,!kotlin,!lzma.*,!net.jpountz.*,\\\n                !org.apache.avalon.*,!org.apache.log,!org.bouncycastle.*,\\\n                !org.apache.logging.*,!reactor.*,\\\n                !org.conscrypt,!org.eclipse.*,!org.jboss.*,!scala.util,\\\n                !com.google.protobuf.*,*\nExport-Package:  !sun.*,\\\n                 !junit.*,*\n\n          ]]&gt;&lt;/bnd&gt;\n&lt;/configuration&gt;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/RqpDj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RqpDj.png\" alt=\"enter image description here\" /></a></p>\n<p>I added the dependency for the package com.lowagie.toolbox &amp; com.apple.mrj. Can anyone tell me how to fix this issue ? Actually I want to import below in my java class</p>\n<pre><code>import org.xhtmlrenderer.pdf.ITextRenderer;\n</code></pre>\n<p>So I am trying to add all dependencies. How do I ensure I am adding all inter dependencies correctly ? is there any way ? Why this import is not resolving even after adding it's dependency? Any idea/input would be really helpful.</p>\n"},{"tags":["java","spring-boot","docker","gradle","docker-compose"],"owner":{"account_id":24354886,"reputation":15,"user_id":18290244,"display_name":"bblex"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695650119,"creation_date":1695646145,"question_id":77172796,"body_markdown":"\r\nI&#39;m trying to run Spring Boot application (gradle) via docker compose on VPS and ran into a problem, that it fails on `RUN gradle build -x test --no-daemon` step. Locally it works fine.\r\n\r\n**Error:**\r\n\r\n     &gt; [stay_focused_bot build 4/4] RUN gradle build -x test --no-daemon:                                                                                           \r\n    0.855                                                                                                                                                           \r\n    0.855 Welcome to Gradle 8.3!                                                                                                                                    \r\n    0.855                                                                                                                                                           \r\n    0.855 Here are the highlights of this release:                                                                                                                  \r\n    0.855  - Faster Java compilation\r\n    0.855  - Reduced memory usage\r\n    0.855  - Support for running on Java 20\r\n    0.855 \r\n    0.855 For more details see https://docs.gradle.org/8.3/release-notes.html\r\n    0.855 \r\n    0.953 To honour the JVM settings for this build a single-use Daemon process will be forked. For more on this, please refer to https://docs.gradle.org/8.3/userguide/gradle_daemon.html#sec:disabling_the_daemon in the Gradle documentation.\r\n    2.153 Daemon will be stopped at the end of the build \r\n    52.16 &gt; Task :compileJava\r\n    386.1 &gt; Task :compileJava FAILED\r\n    386.2 \r\n    386.2 FAILURE: Build failed with an exception.\r\n    386.2 \r\n    386.2 * What went wrong:\r\n    386.2 Execution failed for task &#39;:compileJava&#39;.\r\n    386.2 &gt; Could not resolve all dependencies for configuration &#39;:detachedConfiguration1&#39;.\r\n    386.2    &gt; Could not resolve org.springframework.boot:spring-boot-dependencies:3.1.3.\r\n    386.2      Required by:\r\n    386.2          project :\r\n    386.2       &gt; Could not resolve org.springframework.boot:spring-boot-dependencies:3.1.3.\r\n    386.2          &gt; Could not get resource &#39;https://repo.maven.apache.org/maven2/org/springframework/boot/spring-boot-dependencies/3.1.3/spring-boot-dependencies-3.1.3.pom&#39;.\r\n    386.2             &gt; Could not GET &#39;https://repo.maven.apache.org/maven2/org/springframework/boot/spring-boot-dependencies/3.1.3/spring-boot-dependencies-3.1.3.pom&#39;.\r\n    386.2                &gt; Connect to repo.maven.apache.org:443 [repo.maven.apache.org/151.101.0.215, repo.maven.apache.org/151.101.64.215, repo.maven.apache.org/151.101.128.215, repo.maven.apache.org/151.101.192.215] failed: Read timed out\r\n\r\n\r\n**Dockerfile:**\r\n\r\n    FROM gradle:latest AS build\r\n    COPY --chown=gradle:gradle . /home/gradle/src\r\n    WORKDIR /home/gradle/src\r\n    RUN gradle build -x test --no-daemon\r\n    \r\n    FROM openjdk:17\r\n    \r\n    EXPOSE 8080\r\n    \r\n    RUN mkdir /app\r\n    \r\n    COPY --from=build /home/gradle/src/build/libs/*.jar /app/bot.jar\r\n    \r\n    ENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;,&quot;/app/bot.jar&quot;]\r\n\r\n\r\n**docker-compose.yml**\r\n\r\n    version: &#39;3&#39;\r\n    services:\r\n      stay_focused_db:\r\n        image: postgres:14\r\n        volumes:\r\n          - db-data:/var/lib/postgres/data\r\n        ports:\r\n          - &quot;5432:5432&quot;\r\n        environment:\r\n          POSTGRES_DB: stay_focused_db\r\n          POSTGRES_USER: stay_focused_user\r\n          POSTGRES_PASSWORD: stay_focused_pass\r\n        restart: unless-stopped\r\n        networks:\r\n          - bot_network\r\n      stay_focused_bot:\r\n        depends_on:\r\n          - stay_focused_db\r\n        image: bot:0.0.1\r\n        build:\r\n          context: .\r\n          dockerfile: Dockerfile\r\n        ports:\r\n          - &quot;8080:8080&quot;\r\n        networks:\r\n          - bot_network\r\n    \r\n    volumes:\r\n      db-data:\r\n    \r\n    networks:\r\n      bot_network:\r\n\r\n\r\n\r\n\r\n","title":"Connect to repo.maven.apache.org:443 failed: Read timed out","body":"<p>I'm trying to run Spring Boot application (gradle) via docker compose on VPS and ran into a problem, that it fails on <code>RUN gradle build -x test --no-daemon</code> step. Locally it works fine.</p>\n<p><strong>Error:</strong></p>\n<pre><code> &gt; [stay_focused_bot build 4/4] RUN gradle build -x test --no-daemon:                                                                                           \n0.855                                                                                                                                                           \n0.855 Welcome to Gradle 8.3!                                                                                                                                    \n0.855                                                                                                                                                           \n0.855 Here are the highlights of this release:                                                                                                                  \n0.855  - Faster Java compilation\n0.855  - Reduced memory usage\n0.855  - Support for running on Java 20\n0.855 \n0.855 For more details see https://docs.gradle.org/8.3/release-notes.html\n0.855 \n0.953 To honour the JVM settings for this build a single-use Daemon process will be forked. For more on this, please refer to https://docs.gradle.org/8.3/userguide/gradle_daemon.html#sec:disabling_the_daemon in the Gradle documentation.\n2.153 Daemon will be stopped at the end of the build \n52.16 &gt; Task :compileJava\n386.1 &gt; Task :compileJava FAILED\n386.2 \n386.2 FAILURE: Build failed with an exception.\n386.2 \n386.2 * What went wrong:\n386.2 Execution failed for task ':compileJava'.\n386.2 &gt; Could not resolve all dependencies for configuration ':detachedConfiguration1'.\n386.2    &gt; Could not resolve org.springframework.boot:spring-boot-dependencies:3.1.3.\n386.2      Required by:\n386.2          project :\n386.2       &gt; Could not resolve org.springframework.boot:spring-boot-dependencies:3.1.3.\n386.2          &gt; Could not get resource 'https://repo.maven.apache.org/maven2/org/springframework/boot/spring-boot-dependencies/3.1.3/spring-boot-dependencies-3.1.3.pom'.\n386.2             &gt; Could not GET 'https://repo.maven.apache.org/maven2/org/springframework/boot/spring-boot-dependencies/3.1.3/spring-boot-dependencies-3.1.3.pom'.\n386.2                &gt; Connect to repo.maven.apache.org:443 [repo.maven.apache.org/151.101.0.215, repo.maven.apache.org/151.101.64.215, repo.maven.apache.org/151.101.128.215, repo.maven.apache.org/151.101.192.215] failed: Read timed out\n</code></pre>\n<p><strong>Dockerfile:</strong></p>\n<pre><code>FROM gradle:latest AS build\nCOPY --chown=gradle:gradle . /home/gradle/src\nWORKDIR /home/gradle/src\nRUN gradle build -x test --no-daemon\n\nFROM openjdk:17\n\nEXPOSE 8080\n\nRUN mkdir /app\n\nCOPY --from=build /home/gradle/src/build/libs/*.jar /app/bot.jar\n\nENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;,&quot;/app/bot.jar&quot;]\n</code></pre>\n<p><strong>docker-compose.yml</strong></p>\n<pre><code>version: '3'\nservices:\n  stay_focused_db:\n    image: postgres:14\n    volumes:\n      - db-data:/var/lib/postgres/data\n    ports:\n      - &quot;5432:5432&quot;\n    environment:\n      POSTGRES_DB: stay_focused_db\n      POSTGRES_USER: stay_focused_user\n      POSTGRES_PASSWORD: stay_focused_pass\n    restart: unless-stopped\n    networks:\n      - bot_network\n  stay_focused_bot:\n    depends_on:\n      - stay_focused_db\n    image: bot:0.0.1\n    build:\n      context: .\n      dockerfile: Dockerfile\n    ports:\n      - &quot;8080:8080&quot;\n    networks:\n      - bot_network\n\nvolumes:\n  db-data:\n\nnetworks:\n  bot_network:\n</code></pre>\n"},{"tags":["java","multithreading","reentrantlock"],"comments":[{"owner":{"account_id":1781636,"reputation":7670,"user_id":1624202,"accept_rate":61,"display_name":"Cruncher"},"score":0,"creation_date":1378222373,"post_id":18596080,"comment_id":27367994,"body_markdown":"This kind of thing happens a lot with file access with read/writing","body":"This kind of thing happens a lot with file access with read/writing"},{"owner":{"account_id":1781636,"reputation":7670,"user_id":1624202,"accept_rate":61,"display_name":"Cruncher"},"score":0,"creation_date":1378222507,"post_id":18596080,"comment_id":27368067,"body_markdown":"`http://en.wikipedia.org/wiki/Semaphore_(programming)` There are some good analogies here.","body":"<code>http:&#47;&#47;en.wikipedia.org&#47;wiki&#47;Semaphore_(programming)</code> There are some good analogies here."}],"answers":[{"tags":[],"owner":{"account_id":1503255,"reputation":4458,"user_id":1407222,"accept_rate":75,"display_name":"coder"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1378222399,"creation_date":1378222399,"answer_id":18596147,"question_id":18596080,"body_markdown":"Suppose in a class you have two methods m1 and m2, both synchronized and m2 is calling m1.\r\nIn that case if thread a has taken a lock on m1 and taking a lock again is not allowed then that thresad will keep on waiting for calling m2 (as it already has a the lock)","title":"java.concurrent.ReentrantLock - why we want to acquire the same lock multiple times","body":"<p>Suppose in a class you have two methods m1 and m2, both synchronized and m2 is calling m1.\nIn that case if thread a has taken a lock on m1 and taking a lock again is not allowed then that thresad will keep on waiting for calling m2 (as it already has a the lock)</p>\n"},{"comments":[{"owner":{"account_id":1332320,"reputation":12406,"user_id":1275937,"accept_rate":84,"display_name":"Shengjie"},"score":0,"creation_date":1378223455,"post_id":18596239,"comment_id":27368594,"body_markdown":"it makes sense now, this differentiate ReentrantLock to synchronized(this), right? in this case, sychronized(this) would deadlock at get(index).","body":"it makes sense now, this differentiate ReentrantLock to synchronized(this), right? in this case, sychronized(this) would deadlock at get(index)."},{"owner":{"account_id":65386,"reputation":39895,"user_id":192444,"accept_rate":100,"display_name":"John Vint"},"score":2,"creation_date":1378224543,"post_id":18596239,"comment_id":27369235,"body_markdown":"@Shengjie Actually `synchronized` is also reentrant so in neither case would you dead lock.","body":"@Shengjie Actually <code>synchronized</code> is also reentrant so in neither case would you dead lock."},{"owner":{"account_id":4321939,"reputation":1282,"user_id":3529850,"accept_rate":67,"display_name":"user3529850"},"score":1,"creation_date":1695556818,"post_id":18596239,"comment_id":136037634,"body_markdown":"@John Vint wouldn&#39;t you deadlock on `set` (where you would indefinitely wait for the release of the lock that you hold) rather than `get` ?","body":"@John Vint wouldn&#39;t you deadlock on <code>set</code> (where you would indefinitely wait for the release of the lock that you hold) rather than <code>get</code> ?"},{"owner":{"account_id":65386,"reputation":39895,"user_id":192444,"accept_rate":100,"display_name":"John Vint"},"score":1,"creation_date":1695649929,"post_id":18596239,"comment_id":136048929,"body_markdown":"Yes, @user3529850, you&#39;re absolutely right. Must have been a typo long ago.","body":"Yes, @user3529850, you&#39;re absolutely right. Must have been a typo long ago."}],"tags":[],"owner":{"account_id":65386,"reputation":39895,"user_id":192444,"accept_rate":100,"display_name":"John Vint"},"comment_count":4,"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1695649894,"creation_date":1378222705,"answer_id":18596239,"question_id":18596080,"body_markdown":"Consider the following case in which you need a set of operations which isn&#39;t atomic, be atomic.  For example you may want to set a value of an array but return its current value upon setting. (try-finally removed for brevity).\r\n\r\n    final ReentrantLock lock = new ReentrantLock();\r\n    \r\n    final Object[] objects = new Object[10]\r\n    public Object setAndReturnPrevious(int index, Object val){\r\n       lock.lock();\r\n          Object prev = get(index);\r\n          set(index,val);\r\n          return prev;\r\n       lock.unlock();\r\n    }\r\n    public void set(int index, Object val){\r\n        lock.lock();\r\n             objects[index] = val;\r\n        lock.unlock();\r\n    }\r\n    public Object get(index index){...}\r\n\r\nIf ReentrantLock wasn&#39;t reentrant you would deadlock at `set(index)`\r\n","title":"java.concurrent.ReentrantLock - why we want to acquire the same lock multiple times","body":"<p>Consider the following case in which you need a set of operations which isn't atomic, be atomic.  For example you may want to set a value of an array but return its current value upon setting. (try-finally removed for brevity).</p>\n<pre><code>final ReentrantLock lock = new ReentrantLock();\n\nfinal Object[] objects = new Object[10]\npublic Object setAndReturnPrevious(int index, Object val){\n   lock.lock();\n      Object prev = get(index);\n      set(index,val);\n      return prev;\n   lock.unlock();\n}\npublic void set(int index, Object val){\n    lock.lock();\n         objects[index] = val;\n    lock.unlock();\n}\npublic Object get(index index){...}\n</code></pre>\n<p>If ReentrantLock wasn't reentrant you would deadlock at <code>set(index)</code></p>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1378223654,"creation_date":1378223654,"answer_id":18596563,"question_id":18596080,"body_markdown":"Consider this synchronized example. The same applies to lock but with more code.\r\n\r\n\r\n    synchronized int getSum() {\r\n         return getValue() + getOtherValue();\r\n    }\r\n\r\n    synchronized int getValue() {\r\n         return value;\r\n    }\r\n\r\n    synchronized int getOtherValue() {\r\n         return value;\r\n    }\r\n\r\nThe only way to avoid being re-entrant is to create locked and unlocked versions of each method.  However what if you have two instances A and B.  A calls B which calls A.  How does B know not to call a synchronized method in A.\r\n ","title":"java.concurrent.ReentrantLock - why we want to acquire the same lock multiple times","body":"<p>Consider this synchronized example. The same applies to lock but with more code.</p>\n\n<pre><code>synchronized int getSum() {\n     return getValue() + getOtherValue();\n}\n\nsynchronized int getValue() {\n     return value;\n}\n\nsynchronized int getOtherValue() {\n     return value;\n}\n</code></pre>\n\n<p>The only way to avoid being re-entrant is to create locked and unlocked versions of each method.  However what if you have two instances A and B.  A calls B which calls A.  How does B know not to call a synchronized method in A.</p>\n"},{"tags":[],"owner":{"account_id":2478127,"reputation":19514,"user_id":2158288,"display_name":"ZhongYu"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1378224219,"creation_date":1378224219,"answer_id":18596757,"question_id":18596080,"body_markdown":"Some argue that reentrant locking should be avoided. In a critical section, you should know exactly what is going on. If a local critical section may call a foreign code that may call a local code back, that seems pretty complicated and potentially dangerous. It is better to have just a few well defined critical sections containing only local code.","title":"java.concurrent.ReentrantLock - why we want to acquire the same lock multiple times","body":"<p>Some argue that reentrant locking should be avoided. In a critical section, you should know exactly what is going on. If a local critical section may call a foreign code that may call a local code back, that seems pretty complicated and potentially dangerous. It is better to have just a few well defined critical sections containing only local code.</p>\n"}],"owner":{"account_id":1332320,"reputation":12406,"user_id":1275937,"accept_rate":84,"display_name":"Shengjie"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7017,"favorite_count":0,"down_vote_count":1,"up_vote_count":10,"closed_date":1378244051,"accepted_answer_id":18596239,"answer_count":4,"score":9,"last_activity_date":1695649894,"creation_date":1378222221,"question_id":18596080,"body_markdown":"I know if using ReentrantLock, it allows the same thread to acquire the same lock more than once. Internally, it has a counter to count the number of the lock acquisition. If you acquired the same lock twice, you would need to release it twice. But my question is that why would someone want to acquire the lock multiple times, should one time acquisition be enough? Can someone give me a common use case?  ","title":"java.concurrent.ReentrantLock - why we want to acquire the same lock multiple times","body":"<p>I know if using ReentrantLock, it allows the same thread to acquire the same lock more than once. Internally, it has a counter to count the number of the lock acquisition. If you acquired the same lock twice, you would need to release it twice. But my question is that why would someone want to acquire the lock multiple times, should one time acquisition be enough? Can someone give me a common use case?  </p>\n"},{"tags":["java","google-speech-api"],"owner":{"account_id":8805558,"reputation":41,"user_id":6580382,"display_name":"Igor Vieira"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":740,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":0,"score":4,"last_activity_date":1695649844,"creation_date":1555884588,"question_id":55787208,"body_markdown":"I&#39;m making an application with Google SpeechClient that has the requirements to set a GOOGLE_APPLICATION_CREDENTIALS environment variable that, once set, you can use the voice to text api.\r\n\r\nMy application is required to run in linux and windows. In linux it runs perfectly, however, on windows, when running the project, it throws an exception com.google.api.gax.rpc.UnavailableException: &quot;io.grpc.StatusRuntimeException: UNAVAILABLE: Credentials failed to obtain metadata&quot; when trying to run this thread \r\n\r\n    package Controller.Runnables;\r\n    \r\n    import Controller.GUI.VoxSpeechGUIController;\r\n    import Model.SpokenTextHistory;\r\n    import com.google.api.gax.rpc.ClientStream;\r\n    import com.google.api.gax.rpc.ResponseObserver;\r\n    import com.google.api.gax.rpc.StreamController;\r\n    import com.google.cloud.speech.v1.*;\r\n    import com.google.protobuf.ByteString;\r\n    \r\n    import javax.sound.sampled.AudioFormat;\r\n    import javax.sound.sampled.AudioSystem;\r\n    import javax.sound.sampled.DataLine;\r\n    import javax.sound.sampled.TargetDataLine;\r\n    import java.io.IOException;\r\n    import java.util.ArrayList;\r\n    \r\n    \r\n    public class SpeechRecognizerRunnable implements Runnable{\r\n    \r\n        private VoxSpeechGUIController controller;\r\n    \r\n        public SpeechRecognizerRunnable(VoxSpeechGUIController voxSpeechGUIController) {\r\n            this.controller = voxSpeechGUIController;\r\n        }\r\n    \r\n        @Override\r\n        public void run() {\r\n            MicrofoneRunnable micrunnable = MicrofoneRunnable.getInstance();\r\n            Thread micThread = new Thread(micrunnable);\r\n            ResponseObserver&lt;StreamingRecognizeResponse&gt; responseObserver = null;\r\n            try (SpeechClient client = SpeechClient.create()) {\r\n                ClientStream&lt;StreamingRecognizeRequest&gt; clientStream;\r\n                responseObserver =\r\n                        new ResponseObserver&lt;StreamingRecognizeResponse&gt;() {\r\n    \r\n                            ArrayList&lt;StreamingRecognizeResponse&gt; responses = new ArrayList&lt;&gt;();\r\n    \r\n                            public void onStart(StreamController controller) {}\r\n    \r\n                            public void onResponse(StreamingRecognizeResponse response) {\r\n    \r\n                                try {\r\n                                    responses.add(response);\r\n                                    StreamingRecognitionResult result = response.getResultsList().get(0);\r\n                                    // There can be several alternative transcripts for a given chunk of speech. Just\r\n                                    // use the first (most likely) one here.\r\n                                    SpeechRecognitionAlternative alternative = result.getAlternativesList().get(0);\r\n                                    String transcript = alternative.getTranscript();\r\n                                    System.out.printf(&quot;Transcript : %s\\n&quot;, transcript);\r\n                                    String newText = SpokenTextHistory.getInstance().getActualSpeechString() + &quot; &quot; + transcript;\r\n                                    SpokenTextHistory.getInstance().setActualSpeechString(newText);\r\n                                    controller.setLabelText(newText);\r\n                                }\r\n                                catch (Exception ex){\r\n                                    System.out.println(ex.getMessage());\r\n                                    ex.printStackTrace();\r\n                                }\r\n                            }\r\n    \r\n                            public void onComplete() {\r\n                            }\r\n    \r\n                            public void onError(Throwable t) {\r\n                                System.out.println(t);\r\n                            }\r\n                        };\r\n    \r\n                clientStream = client.streamingRecognizeCallable().splitCall(responseObserver);\r\n    \r\n                RecognitionConfig recognitionConfig =\r\n                        RecognitionConfig.newBuilder()\r\n                                .setEncoding(RecognitionConfig.AudioEncoding.LINEAR16)\r\n                                .setLanguageCode(&quot;pt-BR&quot;)\r\n                                .setSampleRateHertz(16000)\r\n                                .build();\r\n                StreamingRecognitionConfig streamingRecognitionConfig =\r\n                        StreamingRecognitionConfig.newBuilder().setConfig(recognitionConfig).build();\r\n    \r\n                StreamingRecognizeRequest request =\r\n                        StreamingRecognizeRequest.newBuilder()\r\n                                .setStreamingConfig(streamingRecognitionConfig)\r\n                                .build(); // The first request in a streaming call has to be a config\r\n    \r\n                clientStream.send(request);\r\n    \r\n                try {\r\n                    // SampleRate:16000Hz, SampleSizeInBits: 16, Number of channels: 1, Signed: true,\r\n                    // bigEndian: false\r\n                    AudioFormat audioFormat = new AudioFormat(16000, 16, 1, true, false);\r\n                    DataLine.Info targetInfo =\r\n                            new DataLine.Info(\r\n                                    TargetDataLine.class,\r\n                                    audioFormat); // Set the system information to read from the microphone audio\r\n                    // stream\r\n    \r\n                    if (!AudioSystem.isLineSupported(targetInfo)) {\r\n                        System.out.println(&quot;Microphone not supported&quot;);\r\n                        System.exit(0);\r\n                    }\r\n                    // Target data line captures the audio stream the microphone produces.\r\n                    micrunnable.targetDataLine = (TargetDataLine) AudioSystem.getLine(targetInfo);\r\n                    micrunnable.targetDataLine.open(audioFormat);\r\n                    micThread.start();\r\n    \r\n                    long startTime = System.currentTimeMillis();\r\n    \r\n                    while (!micrunnable.stopFlag) {\r\n    \r\n                        long estimatedTime = System.currentTimeMillis() - startTime;\r\n    \r\n                        if (estimatedTime &gt;= 55000) {\r\n    \r\n                            clientStream.closeSend();\r\n                            clientStream = client.streamingRecognizeCallable().splitCall(responseObserver);\r\n    \r\n                            request =\r\n                                    StreamingRecognizeRequest.newBuilder()\r\n                                            .setStreamingConfig(streamingRecognitionConfig)\r\n                                            .build();\r\n    \r\n                            startTime = System.currentTimeMillis();\r\n    \r\n                        } else {\r\n                            request =\r\n                                    StreamingRecognizeRequest.newBuilder()\r\n                                            .setAudioContent(ByteString.copyFrom(micrunnable.sharedQueue.take()))\r\n                                            .build();\r\n                        }\r\n    \r\n                        clientStream.send(request);\r\n                    }\r\n                } catch (Exception e) {\r\n                    System.out.println(e);\r\n                }\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\nI&#39;ve been working hard for hours and have not found a solution that solves my problem.\r\nIt is worth mentioning that the environment variable is being set correctly.\r\n\r\nHas anyone ever had this problem with Google? What should I do to fix this? \r\n\r\nThis is my envirounment variable creator:\r\nPS: I`ve already tried use all google alternatives to validate credentials, but all return me errors.\r\n\r\n    package Controller.Autentication;\r\n    \r\n    import java.io.*;\r\n    import java.lang.reflect.Field;\r\n    import java.util.Collections;\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    \r\n    public class GoogleAuthentication {\r\n        private static final String GOOGLE_APPLICATION_CREDENTIALS = &quot;GOOGLE_APPLICATION_CREDENTIALS&quot;;\r\n        private static final String VoxSpeechFolder = &quot;.vox&quot;;\r\n        private static final String GoogleAuthenticationJsonFile = &quot;VoxAuthentication.json&quot;;\r\n    \r\n        public static void setupGoogleCredentials() {\r\n            String directory = defaultDirectory();\r\n            directory += File.separator+VoxSpeechFolder;\r\n            File voxPath = new File(directory);\r\n            if (!voxPath.exists()) {\r\n                voxPath.mkdirs();\r\n            }\r\n            ClassLoader classLoader = new GoogleAuthentication().getClass().getClassLoader();\r\n            File srcFile = new File(classLoader.getResource(GoogleAuthenticationJsonFile).getFile());\r\n    \r\n            if(srcFile.exists()){\r\n                try {\r\n                    String voxDestPath = defaultDirectory() + File.separator + VoxSpeechFolder +File.separator+ GoogleAuthenticationJsonFile;\r\n                    File destFile = new File(voxDestPath);\r\n                    copyFile(srcFile,destFile);\r\n                } catch (IOException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n            try {\r\n                Map&lt;String,String&gt; googleEnv = new HashMap&lt;&gt;();\r\n                String path = defaultDirectory() +File.separator+ VoxSpeechFolder +File.separator+ GoogleAuthenticationJsonFile;\r\n                googleEnv.put(GOOGLE_APPLICATION_CREDENTIALS, path);\r\n                setGoogleEnv(googleEnv);\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n        static void copyFile(File sourceFile, File destFile)\r\n                throws IOException {\r\n            InputStream inStream ;\r\n            OutputStream outStream ;\r\n            System.out.println(destFile.getPath());\r\n            if(destFile.createNewFile()){\r\n                inStream = new FileInputStream(sourceFile);\r\n                outStream = new FileOutputStream(destFile);\r\n    \r\n                byte[] buffer = new byte[1024];\r\n    \r\n                int length;\r\n                while ((length = inStream.read(buffer)) &gt; 0){\r\n                    outStream.write(buffer, 0, length);\r\n    \r\n                }\r\n    \r\n                inStream.close();\r\n                outStream.close();\r\n            }\r\n        }\r\n    \r\n        static String defaultDirectory()\r\n        {\r\n            String OS = getOperationSystem();\r\n            if (OS.contains(&quot;WIN&quot;))\r\n                return System.getenv(&quot;APPDATA&quot;);\r\n            else if (OS.contains(&quot;MAC&quot;))\r\n                return System.getProperty(&quot;user.home&quot;) + &quot;/Library/Application &quot;\r\n                        + &quot;Support&quot;;\r\n            else if (OS.contains(&quot;LINUX&quot;)) {\r\n                return System.getProperty(&quot;user.home&quot;);\r\n            }\r\n            return System.getProperty(&quot;user.dir&quot;);\r\n        }\r\n    \r\n        static String getOperationSystem() {\r\n            return System.getProperty(&quot;os.name&quot;).toUpperCase();\r\n        }\r\n        protected static void setGoogleEnv(Map&lt;String, String&gt; newenv) throws Exception {\r\n            try {\r\n                Class&lt;?&gt; processEnvironmentClass = Class.forName(&quot;java.lang.ProcessEnvironment&quot;);\r\n                Field theEnvironmentField = processEnvironmentClass.getDeclaredField(&quot;theEnvironment&quot;);\r\n                theEnvironmentField.setAccessible(true);\r\n                Map&lt;String, String&gt; env = (Map&lt;String, String&gt;) theEnvironmentField.get(null);\r\n                env.putAll(newenv);\r\n                Field theCaseInsensitiveEnvironmentField = processEnvironmentClass.getDeclaredField(&quot;theCaseInsensitiveEnvironment&quot;);\r\n                theCaseInsensitiveEnvironmentField.setAccessible(true);\r\n                Map&lt;String, String&gt; cienv = (Map&lt;String, String&gt;)     theCaseInsensitiveEnvironmentField.get(null);\r\n                cienv.putAll(newenv);\r\n            } catch (NoSuchFieldException e) {\r\n                Class[] classes = Collections.class.getDeclaredClasses();\r\n                Map&lt;String, String&gt; env = System.getenv();\r\n                for(Class cl : classes) {\r\n                    if(&quot;java.util.Collections$UnmodifiableMap&quot;.equals(cl.getName())) {\r\n                        Field field = cl.getDeclaredField(&quot;m&quot;);\r\n                        field.setAccessible(true);\r\n                        Object obj = field.get(env);\r\n                        Map&lt;String, String&gt; map = (Map&lt;String, String&gt;) obj;\r\n                        map.clear();\r\n                        map.putAll(newenv);\r\n                    }\r\n                }\r\n            }\r\n    \r\n            String genv = System.getenv(GOOGLE_APPLICATION_CREDENTIALS);\r\n            System.out.println(genv);\r\n        }\r\n    }\r\n\r\n","title":"Google SpeechClient io.grpc.StatusRuntimeException: UNAVAILABLE: Credentials failed to obtain metadata","body":"<p>I'm making an application with Google SpeechClient that has the requirements to set a GOOGLE_APPLICATION_CREDENTIALS environment variable that, once set, you can use the voice to text api.</p>\n\n<p>My application is required to run in linux and windows. In linux it runs perfectly, however, on windows, when running the project, it throws an exception com.google.api.gax.rpc.UnavailableException: \"io.grpc.StatusRuntimeException: UNAVAILABLE: Credentials failed to obtain metadata\" when trying to run this thread </p>\n\n<pre><code>package Controller.Runnables;\n\nimport Controller.GUI.VoxSpeechGUIController;\nimport Model.SpokenTextHistory;\nimport com.google.api.gax.rpc.ClientStream;\nimport com.google.api.gax.rpc.ResponseObserver;\nimport com.google.api.gax.rpc.StreamController;\nimport com.google.cloud.speech.v1.*;\nimport com.google.protobuf.ByteString;\n\nimport javax.sound.sampled.AudioFormat;\nimport javax.sound.sampled.AudioSystem;\nimport javax.sound.sampled.DataLine;\nimport javax.sound.sampled.TargetDataLine;\nimport java.io.IOException;\nimport java.util.ArrayList;\n\n\npublic class SpeechRecognizerRunnable implements Runnable{\n\n    private VoxSpeechGUIController controller;\n\n    public SpeechRecognizerRunnable(VoxSpeechGUIController voxSpeechGUIController) {\n        this.controller = voxSpeechGUIController;\n    }\n\n    @Override\n    public void run() {\n        MicrofoneRunnable micrunnable = MicrofoneRunnable.getInstance();\n        Thread micThread = new Thread(micrunnable);\n        ResponseObserver&lt;StreamingRecognizeResponse&gt; responseObserver = null;\n        try (SpeechClient client = SpeechClient.create()) {\n            ClientStream&lt;StreamingRecognizeRequest&gt; clientStream;\n            responseObserver =\n                    new ResponseObserver&lt;StreamingRecognizeResponse&gt;() {\n\n                        ArrayList&lt;StreamingRecognizeResponse&gt; responses = new ArrayList&lt;&gt;();\n\n                        public void onStart(StreamController controller) {}\n\n                        public void onResponse(StreamingRecognizeResponse response) {\n\n                            try {\n                                responses.add(response);\n                                StreamingRecognitionResult result = response.getResultsList().get(0);\n                                // There can be several alternative transcripts for a given chunk of speech. Just\n                                // use the first (most likely) one here.\n                                SpeechRecognitionAlternative alternative = result.getAlternativesList().get(0);\n                                String transcript = alternative.getTranscript();\n                                System.out.printf(\"Transcript : %s\\n\", transcript);\n                                String newText = SpokenTextHistory.getInstance().getActualSpeechString() + \" \" + transcript;\n                                SpokenTextHistory.getInstance().setActualSpeechString(newText);\n                                controller.setLabelText(newText);\n                            }\n                            catch (Exception ex){\n                                System.out.println(ex.getMessage());\n                                ex.printStackTrace();\n                            }\n                        }\n\n                        public void onComplete() {\n                        }\n\n                        public void onError(Throwable t) {\n                            System.out.println(t);\n                        }\n                    };\n\n            clientStream = client.streamingRecognizeCallable().splitCall(responseObserver);\n\n            RecognitionConfig recognitionConfig =\n                    RecognitionConfig.newBuilder()\n                            .setEncoding(RecognitionConfig.AudioEncoding.LINEAR16)\n                            .setLanguageCode(\"pt-BR\")\n                            .setSampleRateHertz(16000)\n                            .build();\n            StreamingRecognitionConfig streamingRecognitionConfig =\n                    StreamingRecognitionConfig.newBuilder().setConfig(recognitionConfig).build();\n\n            StreamingRecognizeRequest request =\n                    StreamingRecognizeRequest.newBuilder()\n                            .setStreamingConfig(streamingRecognitionConfig)\n                            .build(); // The first request in a streaming call has to be a config\n\n            clientStream.send(request);\n\n            try {\n                // SampleRate:16000Hz, SampleSizeInBits: 16, Number of channels: 1, Signed: true,\n                // bigEndian: false\n                AudioFormat audioFormat = new AudioFormat(16000, 16, 1, true, false);\n                DataLine.Info targetInfo =\n                        new DataLine.Info(\n                                TargetDataLine.class,\n                                audioFormat); // Set the system information to read from the microphone audio\n                // stream\n\n                if (!AudioSystem.isLineSupported(targetInfo)) {\n                    System.out.println(\"Microphone not supported\");\n                    System.exit(0);\n                }\n                // Target data line captures the audio stream the microphone produces.\n                micrunnable.targetDataLine = (TargetDataLine) AudioSystem.getLine(targetInfo);\n                micrunnable.targetDataLine.open(audioFormat);\n                micThread.start();\n\n                long startTime = System.currentTimeMillis();\n\n                while (!micrunnable.stopFlag) {\n\n                    long estimatedTime = System.currentTimeMillis() - startTime;\n\n                    if (estimatedTime &gt;= 55000) {\n\n                        clientStream.closeSend();\n                        clientStream = client.streamingRecognizeCallable().splitCall(responseObserver);\n\n                        request =\n                                StreamingRecognizeRequest.newBuilder()\n                                        .setStreamingConfig(streamingRecognitionConfig)\n                                        .build();\n\n                        startTime = System.currentTimeMillis();\n\n                    } else {\n                        request =\n                                StreamingRecognizeRequest.newBuilder()\n                                        .setAudioContent(ByteString.copyFrom(micrunnable.sharedQueue.take()))\n                                        .build();\n                    }\n\n                    clientStream.send(request);\n                }\n            } catch (Exception e) {\n                System.out.println(e);\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n\n<p>I've been working hard for hours and have not found a solution that solves my problem.\nIt is worth mentioning that the environment variable is being set correctly.</p>\n\n<p>Has anyone ever had this problem with Google? What should I do to fix this? </p>\n\n<p>This is my envirounment variable creator:\nPS: I`ve already tried use all google alternatives to validate credentials, but all return me errors.</p>\n\n<pre><code>package Controller.Autentication;\n\nimport java.io.*;\nimport java.lang.reflect.Field;\nimport java.util.Collections;\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class GoogleAuthentication {\n    private static final String GOOGLE_APPLICATION_CREDENTIALS = \"GOOGLE_APPLICATION_CREDENTIALS\";\n    private static final String VoxSpeechFolder = \".vox\";\n    private static final String GoogleAuthenticationJsonFile = \"VoxAuthentication.json\";\n\n    public static void setupGoogleCredentials() {\n        String directory = defaultDirectory();\n        directory += File.separator+VoxSpeechFolder;\n        File voxPath = new File(directory);\n        if (!voxPath.exists()) {\n            voxPath.mkdirs();\n        }\n        ClassLoader classLoader = new GoogleAuthentication().getClass().getClassLoader();\n        File srcFile = new File(classLoader.getResource(GoogleAuthenticationJsonFile).getFile());\n\n        if(srcFile.exists()){\n            try {\n                String voxDestPath = defaultDirectory() + File.separator + VoxSpeechFolder +File.separator+ GoogleAuthenticationJsonFile;\n                File destFile = new File(voxDestPath);\n                copyFile(srcFile,destFile);\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n        try {\n            Map&lt;String,String&gt; googleEnv = new HashMap&lt;&gt;();\n            String path = defaultDirectory() +File.separator+ VoxSpeechFolder +File.separator+ GoogleAuthenticationJsonFile;\n            googleEnv.put(GOOGLE_APPLICATION_CREDENTIALS, path);\n            setGoogleEnv(googleEnv);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n    static void copyFile(File sourceFile, File destFile)\n            throws IOException {\n        InputStream inStream ;\n        OutputStream outStream ;\n        System.out.println(destFile.getPath());\n        if(destFile.createNewFile()){\n            inStream = new FileInputStream(sourceFile);\n            outStream = new FileOutputStream(destFile);\n\n            byte[] buffer = new byte[1024];\n\n            int length;\n            while ((length = inStream.read(buffer)) &gt; 0){\n                outStream.write(buffer, 0, length);\n\n            }\n\n            inStream.close();\n            outStream.close();\n        }\n    }\n\n    static String defaultDirectory()\n    {\n        String OS = getOperationSystem();\n        if (OS.contains(\"WIN\"))\n            return System.getenv(\"APPDATA\");\n        else if (OS.contains(\"MAC\"))\n            return System.getProperty(\"user.home\") + \"/Library/Application \"\n                    + \"Support\";\n        else if (OS.contains(\"LINUX\")) {\n            return System.getProperty(\"user.home\");\n        }\n        return System.getProperty(\"user.dir\");\n    }\n\n    static String getOperationSystem() {\n        return System.getProperty(\"os.name\").toUpperCase();\n    }\n    protected static void setGoogleEnv(Map&lt;String, String&gt; newenv) throws Exception {\n        try {\n            Class&lt;?&gt; processEnvironmentClass = Class.forName(\"java.lang.ProcessEnvironment\");\n            Field theEnvironmentField = processEnvironmentClass.getDeclaredField(\"theEnvironment\");\n            theEnvironmentField.setAccessible(true);\n            Map&lt;String, String&gt; env = (Map&lt;String, String&gt;) theEnvironmentField.get(null);\n            env.putAll(newenv);\n            Field theCaseInsensitiveEnvironmentField = processEnvironmentClass.getDeclaredField(\"theCaseInsensitiveEnvironment\");\n            theCaseInsensitiveEnvironmentField.setAccessible(true);\n            Map&lt;String, String&gt; cienv = (Map&lt;String, String&gt;)     theCaseInsensitiveEnvironmentField.get(null);\n            cienv.putAll(newenv);\n        } catch (NoSuchFieldException e) {\n            Class[] classes = Collections.class.getDeclaredClasses();\n            Map&lt;String, String&gt; env = System.getenv();\n            for(Class cl : classes) {\n                if(\"java.util.Collections$UnmodifiableMap\".equals(cl.getName())) {\n                    Field field = cl.getDeclaredField(\"m\");\n                    field.setAccessible(true);\n                    Object obj = field.get(env);\n                    Map&lt;String, String&gt; map = (Map&lt;String, String&gt;) obj;\n                    map.clear();\n                    map.putAll(newenv);\n                }\n            }\n        }\n\n        String genv = System.getenv(GOOGLE_APPLICATION_CREDENTIALS);\n        System.out.println(genv);\n    }\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1939636,"reputation":28467,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":0,"creation_date":1484972124,"post_id":41775645,"comment_id":70742506,"body_markdown":"Please share the code as text and not image.","body":"Please share the code as text and not image."},{"owner":{"account_id":10077380,"reputation":21,"user_id":7449002,"display_name":"Kah Shing Chee"},"score":0,"creation_date":1484972438,"post_id":41775645,"comment_id":70742559,"body_markdown":"@nullpointer added","body":"@nullpointer added"},{"owner":{"display_name":"user5156016"},"score":0,"creation_date":1484972567,"post_id":41775645,"comment_id":70742580,"body_markdown":"Do you know the test cases you fail? What is the reasonning behind your solution? Maybe you should add it to the solution","body":"Do you know the test cases you fail? What is the reasonning behind your solution? Maybe you should add it to the solution"},{"owner":{"display_name":"user5156016"},"score":0,"creation_date":1484973846,"post_id":41775645,"comment_id":70742830,"body_markdown":"Please add an explanation of what you did. You probably didn&#39;t analyze the problem well enough to take into account all possible scenarios. I have a working solution for you when you will update your question.","body":"Please add an explanation of what you did. You probably didn&#39;t analyze the problem well enough to take into account all possible scenarios. I have a working solution for you when you will update your question."},{"owner":{"account_id":9359411,"reputation":1060,"user_id":6946274,"display_name":"David Choweller"},"score":0,"creation_date":1484975603,"post_id":41775645,"comment_id":70743143,"body_markdown":"A brute force solution would be to first try to divide the cake into n slices of 1 character each.  If they are not all equal (you can find this out very quickly) check if n is divisible by two, and if so, split the cake into slices 2 characters long, and check if they are equal, and so on, until you find a slice-length for which all slices are equal.","body":"A brute force solution would be to first try to divide the cake into n slices of 1 character each.  If they are not all equal (you can find this out very quickly) check if n is divisible by two, and if so, split the cake into slices 2 characters long, and check if they are equal, and so on, until you find a slice-length for which all slices are equal."},{"owner":{"account_id":10077380,"reputation":21,"user_id":7449002,"display_name":"Kah Shing Chee"},"score":0,"creation_date":1484975663,"post_id":41775645,"comment_id":70743156,"body_markdown":"Test cases unknown as google did not show out all, so i expect my solution was just success for the sample test cases example shown as above @JawadLeWywadi","body":"Test cases unknown as google did not show out all, so i expect my solution was just success for the sample test cases example shown as above @JawadLeWywadi"},{"owner":{"display_name":"user5156016"},"score":0,"creation_date":1484975726,"post_id":41775645,"comment_id":70743164,"body_markdown":"I can trade my solution with an entry to your site lol.","body":"I can trade my solution with an entry to your site lol."},{"owner":{"account_id":10077380,"reputation":21,"user_id":7449002,"display_name":"Kah Shing Chee"},"score":0,"creation_date":1484975898,"post_id":41775645,"comment_id":70743198,"body_markdown":"@JawadLeWywadi not really get what you mean lol","body":"@JawadLeWywadi not really get what you mean lol"},{"owner":{"display_name":"user5156016"},"score":0,"creation_date":1484975934,"post_id":41775645,"comment_id":70743205,"body_markdown":"How Can i acces this site I mean the google foobar challenge thing","body":"How Can i acces this site I mean the google foobar challenge thing"},{"owner":{"account_id":10077380,"reputation":21,"user_id":7449002,"display_name":"Kah Shing Chee"},"score":0,"creation_date":1484976011,"post_id":41775645,"comment_id":70743220,"body_markdown":"i think this can be access by anyone now https://foobar.withgoogle.com/","body":"i think this can be access by anyone now <a href=\"https://foobar.withgoogle.com/\" rel=\"nofollow noreferrer\">foobar.withgoogle.com</a>"},{"owner":{"display_name":"user5156016"},"score":0,"creation_date":1484976125,"post_id":41775645,"comment_id":70743245,"body_markdown":"Nah It does not work for me But try my solution it is not optimized but it works. Tell me how many tests you pass with this.","body":"Nah It does not work for me But try my solution it is not optimized but it works. Tell me how many tests you pass with this."},{"owner":{"account_id":1886776,"reputation":2985,"user_id":1705829,"accept_rate":43,"display_name":"Timo"},"score":0,"creation_date":1689172021,"post_id":41775645,"comment_id":135176183,"body_markdown":"[on medium](https://medium.com/swlh/google-python-challenge-1-58c0eb760c92) you have it","body":"<a href=\"https://medium.com/swlh/google-python-challenge-1-58c0eb760c92\" rel=\"nofollow noreferrer\">on medium</a> you have it"}],"answers":[{"comments":[{"owner":{"display_name":"user5156016"},"score":0,"creation_date":1484976239,"post_id":41776012,"comment_id":70743261,"body_markdown":"As I said it is not optimized at all.","body":"As I said it is not optimized at all."},{"owner":{"account_id":10077380,"reputation":21,"user_id":7449002,"display_name":"Kah Shing Chee"},"score":0,"creation_date":1484976267,"post_id":41776012,"comment_id":70743268,"body_markdown":"This is working all test cases passed! Great solution","body":"This is working all test cases passed! Great solution"},{"owner":{"display_name":"user5156016"},"score":0,"creation_date":1484976321,"post_id":41776012,"comment_id":70743276,"body_markdown":"It is only a solution not a great one. But if you happen to know how to access that challenge site, please share.","body":"It is only a solution not a great one. But if you happen to know how to access that challenge site, please share."},{"owner":{"account_id":10077380,"reputation":21,"user_id":7449002,"display_name":"Kah Shing Chee"},"score":1,"creation_date":1484976647,"post_id":41776012,"comment_id":70743321,"body_markdown":"It happens when search a lot of programming term, then will pop out something like this [link](http://www.ibtimes.co.uk/google-foobar-how-searching-web-earned-software-graduate-job-google-1517284) shown. Google track on your browsing history based on what i google, cause i was enter this accidentally while researching some programming stuff.","body":"It happens when search a lot of programming term, then will pop out something like this <a href=\"http://www.ibtimes.co.uk/google-foobar-how-searching-web-earned-software-graduate-job-google-1517284\" rel=\"nofollow noreferrer\">link</a> shown. Google track on your browsing history based on what i google, cause i was enter this accidentally while researching some programming stuff."}],"tags":[],"owner":{"display_name":"user5156016"},"comment_count":4,"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1484976027,"creation_date":1484976027,"answer_id":41776012,"question_id":41775645,"body_markdown":"I think this is a quick working not optimized solution. You basically suppose that you can have n parts. If it works you return, if not you suppose that you can have n-1 part and so one.\r\n\r\n    int result = -1;\r\n\t\tint len = s.length();\r\n\t\tfor(int i = len; i &gt; 0; i--){\t\t\t\r\n\t\t\tint n = len/i;\r\n\t\t\tif( n * i == len){\r\n\t\t\t\tboolean valid = true;\r\n\t\t\t\tString part = s.substring(0,n);\r\n\t\t\t\tfor(int j = 1; j &lt; i; j++){\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(!s.substring(j*n,j*n+n).equals(part)){\r\n\t\t\t\t\t\tvalid = false;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\tif(valid){\r\n\t\t\t\t\tresult = i;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\r\n\t\t}","title":"Google foobar The Cake is not a lie","body":"<p>I think this is a quick working not optimized solution. You basically suppose that you can have n parts. If it works you return, if not you suppose that you can have n-1 part and so one.</p>\n\n<pre><code>int result = -1;\n    int len = s.length();\n    for(int i = len; i &gt; 0; i--){           \n        int n = len/i;\n        if( n * i == len){\n            boolean valid = true;\n            String part = s.substring(0,n);\n            for(int j = 1; j &lt; i; j++){\n\n                if(!s.substring(j*n,j*n+n).equals(part)){\n                    valid = false;\n                    break;\n                }\n\n            }\n            if(valid){\n                result = i;\n                break;\n            }\n\n        }\n\n\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14817473,"reputation":629,"user_id":10700946,"display_name":"Atharva Kulkarni"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1584282490,"creation_date":1584282490,"answer_id":60693932,"question_id":41775645,"body_markdown":"For a python based solution, this is what I could come up with, I know I could have used regex (findall) to get a better solution, and that the code could be further optimized. But this passed all the tests, and I was a bit lazy to optimize\r\nthe solution further. Please comment if you have any cool suggestions\r\n\r\n    def sample(leng, split_list):\r\n        for i in range(0, leng-1):\r\n    \r\n            if(split_list[i] == split_list[i+1]):\r\n                if(i == leng-2):\r\n                    return leng\r\n                else:\r\n                    continue\r\n            else:\r\n                return 1\r\n    \r\n    \r\n    def solution(s):\r\n        # Your code here\r\n        gem_str = s\r\n        sample_num = 1\r\n        str_length = len(gem_str)  # 12\r\n    \r\n        # gem_split_list = []\r\n    \r\n        for divider_value in range(1, str_length):\r\n            split_list = []\r\n            if(str_length % divider_value == 0):\r\n                for x in range(0, str_length, divider_value):\r\n                    split_list.append(gem_str[x:x+divider_value])\r\n                split_list_length = len(split_list)\r\n    \r\n                sample_num = sample(split_list_length, split_list)\r\n                if(sample_num != 1):\r\n                    return sample_num\r\n        return sample_num\r\n","title":"Google foobar The Cake is not a lie","body":"<p>For a python based solution, this is what I could come up with, I know I could have used regex (findall) to get a better solution, and that the code could be further optimized. But this passed all the tests, and I was a bit lazy to optimize\nthe solution further. Please comment if you have any cool suggestions</p>\n\n<pre><code>def sample(leng, split_list):\n    for i in range(0, leng-1):\n\n        if(split_list[i] == split_list[i+1]):\n            if(i == leng-2):\n                return leng\n            else:\n                continue\n        else:\n            return 1\n\n\ndef solution(s):\n    # Your code here\n    gem_str = s\n    sample_num = 1\n    str_length = len(gem_str)  # 12\n\n    # gem_split_list = []\n\n    for divider_value in range(1, str_length):\n        split_list = []\n        if(str_length % divider_value == 0):\n            for x in range(0, str_length, divider_value):\n                split_list.append(gem_str[x:x+divider_value])\n            split_list_length = len(split_list)\n\n            sample_num = sample(split_list_length, split_list)\n            if(sample_num != 1):\n                return sample_num\n    return sample_num\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16067988,"reputation":1512,"user_id":11597114,"display_name":"Tanishq Vyas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1584382358,"creation_date":1584382358,"answer_id":60711166,"question_id":41775645,"body_markdown":"```python\r\ndef solution(s):\r\n\t\r\n\tlength_of_str = len(s)\r\n\r\n\tfor i in range(1,length_of_str):\r\n\r\n\t\tcmp_str = s[:i]\r\n\r\n\t\tcount = s.count(cmp_str)\r\n\r\n\t\tif count*i == length_of_str:\r\n\t\t\treturn count\r\n\r\n\r\n\r\nprint(&quot;Test case 1 : &quot;)\r\nprint(solution(&quot;abccbaabccba&quot;))\r\n\r\nprint(&quot;\\nTest case 2 : &quot;)\r\nprint(solution(&quot;abcabcabcabc&quot;))\r\n```","title":"Google foobar The Cake is not a lie","body":"<pre class=\"lang-py prettyprint-override\"><code>def solution(s):\n\n    length_of_str = len(s)\n\n    for i in range(1,length_of_str):\n\n        cmp_str = s[:i]\n\n        count = s.count(cmp_str)\n\n        if count*i == length_of_str:\n            return count\n\n\n\nprint(\"Test case 1 : \")\nprint(solution(\"abccbaabccba\"))\n\nprint(\"\\nTest case 2 : \")\nprint(solution(\"abcabcabcabc\"))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15352153,"reputation":1,"user_id":11075575,"display_name":"shubham shukla"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1584730921,"creation_date":1584730921,"answer_id":60780178,"question_id":41775645,"body_markdown":"Here is a short and quick solution for python which has cleared all verification test,please comment and suggest if you have any cool idea.\r\n    \r\n    def solution(s):\r\n        length = len(exmp)  \r\n        for x in range(1,length):\r\n            if (length % x == 0):\r\n                lis =[exmp[y:y+x] for y in range(0,length,x) ]   # for x in range(0,length,y): ;  lis.append(exmp[x:x+y])\r\n                lis_len = len(lis)\r\n                for z in range(0,lis_len-1):\r\n                    if (lis[z] == lis[z+1]): \r\n                        if (z==lis_len-2):\r\n                            return lis_len\r\n        return lis_len\r\n\r\n    #s= &quot;abcabcabcabc&quot; \r\n    #s= &quot;jaishreeramjaishreeramjaishreeram&quot;\r\n    #s= &quot;harekrishnaharekrishnaharekrishnaharekrishna&quot;\r\n    solution(s)\r\n","title":"Google foobar The Cake is not a lie","body":"<p>Here is a short and quick solution for python which has cleared all verification test,please comment and suggest if you have any cool idea.</p>\n\n<pre><code>def solution(s):\n    length = len(exmp)  \n    for x in range(1,length):\n        if (length % x == 0):\n            lis =[exmp[y:y+x] for y in range(0,length,x) ]   # for x in range(0,length,y): ;  lis.append(exmp[x:x+y])\n            lis_len = len(lis)\n            for z in range(0,lis_len-1):\n                if (lis[z] == lis[z+1]): \n                    if (z==lis_len-2):\n                        return lis_len\n    return lis_len\n\n#s= \"abcabcabcabc\" \n#s= \"jaishreeramjaishreeramjaishreeram\"\n#s= \"harekrishnaharekrishnaharekrishnaharekrishna\"\nsolution(s)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11247666,"reputation":11,"user_id":8249838,"display_name":"Ming"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1585215154,"creation_date":1585214584,"answer_id":60864146,"question_id":41775645,"body_markdown":"My sol pass all the test cases and I believe it is O(N) speed.\r\n    \r\n```python\r\ndef solution(s):\r\n    n = len(s)\r\n    if n&lt;1:\r\n        return 0\r\n    # two pointers\r\n    p1 = 0\r\n    p2 = n-1\r\n    seq1, seq2 = &#39;&#39;, &#39;&#39;\r\n    while p1&lt;p2:\r\n        seq1 = seq1+s[p1]\r\n        seq2 = s[p2]+seq2\r\n        if seq1 == seq2 and seq1 == s[p1+1:p1+len(seq1)+1]:\r\n            return n/len(seq1)\r\n        p1+=1\r\n        p2-=1\r\n    return 1\r\n```\r\n\r\nEven though it pass the test cases in foobar, but there is a type of corner case that this sol cannot pass, such as `s=&#39;aabbaaaabbaa&#39;`.\r\n\r\n[solution with a few test cases in notebook.][1]\r\n\r\n\r\n  [1]: https://github.com/songzhm/google-foobar-challenge-2020/blob/master/level_1/level_1_the_cake_is_not_a_lie.ipynb","title":"Google foobar The Cake is not a lie","body":"<p>My sol pass all the test cases and I believe it is O(N) speed.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def solution(s):\n    n = len(s)\n    if n&lt;1:\n        return 0\n    # two pointers\n    p1 = 0\n    p2 = n-1\n    seq1, seq2 = '', ''\n    while p1&lt;p2:\n        seq1 = seq1+s[p1]\n        seq2 = s[p2]+seq2\n        if seq1 == seq2 and seq1 == s[p1+1:p1+len(seq1)+1]:\n            return n/len(seq1)\n        p1+=1\n        p2-=1\n    return 1\n</code></pre>\n\n<p>Even though it pass the test cases in foobar, but there is a type of corner case that this sol cannot pass, such as <code>s='aabbaaaabbaa'</code>.</p>\n\n<p><a href=\"https://github.com/songzhm/google-foobar-challenge-2020/blob/master/level_1/level_1_the_cake_is_not_a_lie.ipynb\" rel=\"nofollow noreferrer\">solution with a few test cases in notebook.</a></p>\n"},{"tags":[],"owner":{"account_id":18678862,"reputation":21,"user_id":13615923,"display_name":"Minimalizer"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1590441494,"creation_date":1590441494,"answer_id":62010932,"question_id":41775645,"body_markdown":"I am not going to share the code right away since I guess Google uses Plagiarism checks on the codes. But I&#39;ll share the algorithm that I had used.\r\n\r\nAlgorithm:\r\n\r\nloop from 1 to length of the string \r\ncalculate if length/i is a whole number(because that&#39;s one of the possible answers) \r\ntake the sub-string from index 0 to length/i \r\ncount number of occurrences \r\nif number of occurrences equals length/i, \r\ncheck if you have a max value greater than length/i\r\nif yes make it as max\r\n\r\nPseudo-code:\r\n\r\n    max=1\r\n    loop i from (0 to length(string))\r\n    {\r\n    if length(array)%i equals 0\r\n    {\r\n    substring=array[0 TO length(array)/i)\r\n    number=count(substring in string)\r\n    }\r\n    if number==length(array)/i and number&gt;max\r\n    max=number\r\n    }\r\n    return max\r\n\r\n  \r\n  \r\n    \r\n\r\n\r\n\r\nComplexity: O(M*K) where M is the length of string and K is the number of factors of length of the string. \r\n\r\nNote: I don&#39;t exactly know how good/bad this algo is but it took very less time to execute all 10 test-cases.","title":"Google foobar The Cake is not a lie","body":"<p>I am not going to share the code right away since I guess Google uses Plagiarism checks on the codes. But I'll share the algorithm that I had used.</p>\n\n<p>Algorithm:</p>\n\n<p>loop from 1 to length of the string \ncalculate if length/i is a whole number(because that's one of the possible answers) \ntake the sub-string from index 0 to length/i \ncount number of occurrences \nif number of occurrences equals length/i, \ncheck if you have a max value greater than length/i\nif yes make it as max</p>\n\n<p>Pseudo-code:</p>\n\n<pre><code>max=1\nloop i from (0 to length(string))\n{\nif length(array)%i equals 0\n{\nsubstring=array[0 TO length(array)/i)\nnumber=count(substring in string)\n}\nif number==length(array)/i and number&gt;max\nmax=number\n}\nreturn max\n</code></pre>\n\n<p>Complexity: O(M*K) where M is the length of string and K is the number of factors of length of the string. </p>\n\n<p>Note: I don't exactly know how good/bad this algo is but it took very less time to execute all 10 test-cases.</p>\n"},{"comments":[{"owner":{"account_id":1086154,"reputation":123,"user_id":1081830,"accept_rate":14,"display_name":"Daragh"},"score":0,"creation_date":1615153318,"post_id":62045468,"comment_id":117597242,"body_markdown":"Similar - BUT -\nI added this code to the top :\n    if (len_sequence) &lt;= 0:\n        print(&quot;No sequence was passed to the function&quot;)\n        return 0\n\nAlso in order to see if we string fitted in correctly I used a find and replace - so if the sequence is not correct , then there would be some leftover charaters (below) :\n            count_remainder= len(s.replace(s[:z],&quot;&quot;))\n      \n            if count_remainder ==0:\n                return s.count(temp_lst_seq)","body":"Similar - BUT - I added this code to the top :     if (len_sequence) &lt;= 0:         print(&quot;No sequence was passed to the function&quot;)         return 0  Also in order to see if we string fitted in correctly I used a find and replace - so if the sequence is not correct , then there would be some leftover charaters (below) :             count_remainder= len(s.replace(s[:z],&quot;&quot;))                    if count_remainder ==0:                 return s.count(temp_lst_seq)"}],"tags":[],"owner":{"account_id":11979149,"reputation":11,"user_id":8765467,"display_name":"saps"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1590593981,"creation_date":1590589429,"answer_id":62045468,"question_id":41775645,"body_markdown":"This is passing all the test cases.\r\n```python\r\ndef solution(s):\r\n\r\n    length_of_str = len(s)\r\n\r\n    for i in range(1,length_of_str+1):\r\n\r\n        cmp_str = s[:i]\r\n\r\n        count = s.count(cmp_str)\r\n\r\n        if count*i == length_of_str:\r\n            return count\r\n\r\nprint(&quot;Test case 1 : &quot;)\r\nprint(solution(&quot;abccbaabccba&quot;))\r\n\r\nprint(&quot;\\nTest case 2 : &quot;)\r\nprint(solution(&quot;abcabcabcabc&quot;))\r\n```","title":"Google foobar The Cake is not a lie","body":"<p>This is passing all the test cases.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def solution(s):\n\n    length_of_str = len(s)\n\n    for i in range(1,length_of_str+1):\n\n        cmp_str = s[:i]\n\n        count = s.count(cmp_str)\n\n        if count*i == length_of_str:\n            return count\n\nprint(\"Test case 1 : \")\nprint(solution(\"abccbaabccba\"))\n\nprint(\"\\nTest case 2 : \")\nprint(solution(\"abcabcabcabc\"))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11585701,"reputation":456,"user_id":8487956,"display_name":"sem1Colon"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1594837769,"creation_date":1594837769,"answer_id":62921524,"question_id":41775645,"body_markdown":"This not the optimised one.. but passes all the test cases with O(n^2).\r\n\r\n    public class Solution {\r\n     public static int solution(String s) {\r\n        // Function calls are expensive, so to avoid calling length() multiple times\r\n        int howLong = s.length();\r\n        int count = 0;\r\n\r\n        // Iterating through length of the input string from backwards\r\n        for (int i = howLong; i &gt; 0; i--) {\r\n            int n = howLong / i;\r\n            boolean flag = true;\r\n            // Storing substring\r\n            String subString = s.substring(0, n);\r\n\r\n            // Check for substring repeated no. of times\r\n            for (int j = 1; j &lt; i; j++) {\r\n                if (!s.substring(j * n, j * n + n).equals(subString)) {\r\n                    flag = false;\r\n                    break;\r\n                }\r\n            }\r\n            if (flag) {\r\n                count = i;\r\n                break;\r\n            }\r\n        }\r\n        return count;\r\n      }\r\n    }","title":"Google foobar The Cake is not a lie","body":"<p>This not the optimised one.. but passes all the test cases with O(n^2).</p>\n<pre><code>public class Solution {\n public static int solution(String s) {\n    // Function calls are expensive, so to avoid calling length() multiple times\n    int howLong = s.length();\n    int count = 0;\n\n    // Iterating through length of the input string from backwards\n    for (int i = howLong; i &gt; 0; i--) {\n        int n = howLong / i;\n        boolean flag = true;\n        // Storing substring\n        String subString = s.substring(0, n);\n\n        // Check for substring repeated no. of times\n        for (int j = 1; j &lt; i; j++) {\n            if (!s.substring(j * n, j * n + n).equals(subString)) {\n                flag = false;\n                break;\n            }\n        }\n        if (flag) {\n            count = i;\n            break;\n        }\n    }\n    return count;\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13748793,"reputation":290,"user_id":9921564,"display_name":"Chagai Friedlander"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636490326,"creation_date":1636490326,"answer_id":69904778,"question_id":41775645,"body_markdown":"Java recursive solution, passes all tests, including the edge case [Ming](https://stackoverflow.com/users/8249838/ming) mentioned. I added [psvm](https://acronyms.thefreedictionary.com/PSVM) so I can test ;)\r\n\r\n```\r\npublic class App {\r\n    public static void main(String[] args) throws Exception {\r\n        System.out.println(solution(&quot;aabbaaaabbaa&quot;)); // one test case for example\r\n    }\r\n    public static int solution(String x) {\r\n        int i = 1; // the smallest sequence we can have is 1 for example &quot;aaaaaaaaaaa&quot; would have the sequence of 1\r\n        int sizeOfCake = x.length();\r\n        while (i&lt;=sizeOfCake/2){ // no need to go through all amounts of sequences because the smallest amount of pieces of cake is 2\r\n            if(helpMethod(x.substring(i,sizeOfCake), x.substring(0,i))) {\r\n                return sizeOfCake/i;\r\n            }\r\n            i++;\r\n        }\r\n        return 1; // You could argue that the whole cake is one peace so you are &quot;cutting&quot; 1 peace. If so it&#39;s probably going to Commander Lambda.\r\n        // The tests only passed with 1 but I originally was going for: Math.round(Math.random())\r\n    }\r\n    \r\n    static boolean helpMethod(String oneSliceLess, String sliceSequence) {\r\n        int sizeOfSliceSequence = sliceSequence.length();\r\n        int sizeOfOneSliceLess = oneSliceLess.length();\r\n        if(sizeOfOneSliceLess &gt;= sizeOfSliceSequence){\r\n            return oneSliceLess.substring(0,sizeOfSliceSequence).equals(sliceSequence) &amp;&amp;\r\n            helpMethod(oneSliceLess.substring(sizeOfSliceSequence,sizeOfOneSliceLess), sliceSequence);\r\n        }\r\n        return true;\r\n    }\r\n}\r\n```\r\n\r\n\r\n","title":"Google foobar The Cake is not a lie","body":"<p>Java recursive solution, passes all tests, including the edge case <a href=\"https://stackoverflow.com/users/8249838/ming\">Ming</a> mentioned. I added <a href=\"https://acronyms.thefreedictionary.com/PSVM\" rel=\"nofollow noreferrer\">psvm</a> so I can test ;)</p>\n<pre><code>public class App {\n    public static void main(String[] args) throws Exception {\n        System.out.println(solution(&quot;aabbaaaabbaa&quot;)); // one test case for example\n    }\n    public static int solution(String x) {\n        int i = 1; // the smallest sequence we can have is 1 for example &quot;aaaaaaaaaaa&quot; would have the sequence of 1\n        int sizeOfCake = x.length();\n        while (i&lt;=sizeOfCake/2){ // no need to go through all amounts of sequences because the smallest amount of pieces of cake is 2\n            if(helpMethod(x.substring(i,sizeOfCake), x.substring(0,i))) {\n                return sizeOfCake/i;\n            }\n            i++;\n        }\n        return 1; // You could argue that the whole cake is one peace so you are &quot;cutting&quot; 1 peace. If so it's probably going to Commander Lambda.\n        // The tests only passed with 1 but I originally was going for: Math.round(Math.random())\n    }\n    \n    static boolean helpMethod(String oneSliceLess, String sliceSequence) {\n        int sizeOfSliceSequence = sliceSequence.length();\n        int sizeOfOneSliceLess = oneSliceLess.length();\n        if(sizeOfOneSliceLess &gt;= sizeOfSliceSequence){\n            return oneSliceLess.substring(0,sizeOfSliceSequence).equals(sliceSequence) &amp;&amp;\n            helpMethod(oneSliceLess.substring(sizeOfSliceSequence,sizeOfOneSliceLess), sliceSequence);\n        }\n        return true;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4741803,"reputation":463,"user_id":3834292,"accept_rate":71,"display_name":"loalexzzzz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636557724,"creation_date":1636557724,"answer_id":69915891,"question_id":41775645,"body_markdown":"Try this?\r\n\r\n    public class Solution {\r\n        public static int solution(String x) {\r\n            if((x == null) || (x.length() == 0))\r\n                return 0;\r\n    \r\n            int len = x.length();\r\n            String targetString = x.toLowerCase();\r\n            String pattern = &quot;&quot;;\r\n            for(int i = 0; i &lt; len; i++) {\r\n                String subString = targetString.substring(0, i);\r\n                int len2 = targetString.replaceAll(subString, &quot;&quot;).length();\r\n                if(len2 == 0) {\r\n                    if ((pattern.length() == 0) || (subString.length() &lt;= pattern.length()))\r\n                        pattern = subString;\r\n                }\r\n            }\r\n    \r\n            if (pattern.length() == 0) {\r\n                return 1;\r\n            }\r\n    \r\n            return len / pattern.length();\r\n        }\r\n    }\r\n\r\n\r\n","title":"Google foobar The Cake is not a lie","body":"<p>Try this?</p>\n<pre><code>public class Solution {\n    public static int solution(String x) {\n        if((x == null) || (x.length() == 0))\n            return 0;\n\n        int len = x.length();\n        String targetString = x.toLowerCase();\n        String pattern = &quot;&quot;;\n        for(int i = 0; i &lt; len; i++) {\n            String subString = targetString.substring(0, i);\n            int len2 = targetString.replaceAll(subString, &quot;&quot;).length();\n            if(len2 == 0) {\n                if ((pattern.length() == 0) || (subString.length() &lt;= pattern.length()))\n                    pattern = subString;\n            }\n        }\n\n        if (pattern.length() == 0) {\n            return 1;\n        }\n\n        return len / pattern.length();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17746790,"reputation":11,"user_id":12885905,"display_name":"MoonZ"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659524445,"creation_date":1659524445,"answer_id":73220591,"question_id":41775645,"body_markdown":"I did this test 3 months ago, wrote this solution in Python that passes every test:\r\n\r\n``` lang-python\r\nimport re\r\n    \r\ndef solution(s):\r\n    seq = re.search(&#39;^(.+?)\\\\1*$&#39;, s).group(1)\r\n    return len(s) / len(seq)\r\n","title":"Google foobar The Cake is not a lie","body":"<p>I did this test 3 months ago, wrote this solution in Python that passes every test:</p>\n<pre class=\"lang-python prettyprint-override\"><code>import re\n    \ndef solution(s):\n    seq = re.search('^(.+?)\\\\1*$', s).group(1)\n    return len(s) / len(seq)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11480313,"reputation":11,"user_id":8414586,"display_name":"Sridhar T"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691599411,"creation_date":1691599411,"answer_id":76869750,"question_id":41775645,"body_markdown":"**Solution**\r\n\r\n```\r\ndef solution(s):\r\n    if s:\r\n        n = len(s)\r\n        if n &lt; 200:\r\n            count = 0\r\n            for length in range(1, n//2 + 1):\r\n                if n % length == 0:\r\n                    substring = s[:length]\r\n                    repeats = n // length\r\n                    if substring * repeats == s:\r\n                        # consider only max no. of parts\r\n                        if count &lt; repeats:\r\n                            count = repeats\r\n            if count == 0:\r\n                # if all parts are unique\r\n                if len(s) == len(set(s)):\r\n                    return 1\r\n            return count\r\n```\r\n\r\nStill, I passed 7 out of 10 test cases, failed 3 hidden test cases.\r\n\r\nShare optimized solution","title":"Google foobar The Cake is not a lie","body":"<p><strong>Solution</strong></p>\n<pre><code>def solution(s):\n    if s:\n        n = len(s)\n        if n &lt; 200:\n            count = 0\n            for length in range(1, n//2 + 1):\n                if n % length == 0:\n                    substring = s[:length]\n                    repeats = n // length\n                    if substring * repeats == s:\n                        # consider only max no. of parts\n                        if count &lt; repeats:\n                            count = repeats\n            if count == 0:\n                # if all parts are unique\n                if len(s) == len(set(s)):\n                    return 1\n            return count\n</code></pre>\n<p>Still, I passed 7 out of 10 test cases, failed 3 hidden test cases.</p>\n<p>Share optimized solution</p>\n"}],"owner":{"account_id":10077380,"reputation":21,"user_id":7449002,"display_name":"Kah Shing Chee"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14346,"favorite_count":0,"down_vote_count":14,"up_vote_count":4,"accepted_answer_id":41776012,"answer_count":12,"score":-10,"last_activity_date":1695649388,"creation_date":1484971931,"question_id":41775645,"body_markdown":"The cake is not a lie!\r\n======================\r\n\r\nCommander Lambda has had an incredibly successful week: she completed the first test run of her LAMBCHOP doomsday device, she captured six key members of the Bunny Rebellion, and she beat her personal high score in Tetris. To celebrate, she&#39;s ordered cake for everyone - even the lowliest of minions! But competition among minions is fierce, and if you don&#39;t cut exactly equal slices of cake for everyone, you&#39;ll get in big trouble. \r\n\r\nThe cake is round, and decorated with M&amp;Ms in a circle around the edge. But while the rest of the cake is uniform, the M&amp;Ms are not: there are multiple colors, and every minion must get exactly the same sequence of M&amp;Ms. Commander Lambda hates waste and will not tolerate any leftovers, so you also want to make sure you can serve the entire cake.\r\n\r\nTo help you best cut the cake, you have turned the sequence of colors of the M&amp;Ms on the cake into a string: each possible letter (between a and z) corresponds to a unique color, and the sequence of M&amp;Ms is given clockwise (the decorations form a circle around the outer edge of the cake).\r\n\r\nWrite a function called answer(s) that, given a non-empty string less than 200 characters in length describing the sequence of M&amp;Ms, returns the maximum number of equal parts that can be cut from the cake without leaving any leftovers.\r\n\r\nLanguages\r\n=========\r\n\r\nTo provide a Python solution, edit `solution.py`&lt;br /&gt;\r\nTo provide a Java solution, edit `solution.java`\r\n\r\nTest cases\r\n==========\r\n\r\nInputs:\r\n\r\n    (string) s = &quot;abccbaabccba&quot;\r\n\r\nOutput:\r\n\r\n    (int) 2\r\n\r\nInputs:\r\n\r\n    (string) s = &quot;abcabcabcabc&quot;\r\n\r\nOutput:\r\n\r\n    (int) 4\r\n\r\n**Anyone have idea on solving this?\r\nHere is my answer but failed for 6 test cases.**\r\n\r\n    public class Answer {   \r\n        public static int answer(String s) { \r\n            int split = 1;\r\n            char c = s.charAt(0);\r\n            for (int i = 1; i &lt; s.length() - 1; i++) {\r\n                if (c == s.charAt(i)) {\r\n                    if(s.charAt(i)!=s.charAt(i+1)){\r\n                        split++;\r\n                    }\r\n                }\r\n            }\r\n            return split;\r\n        } \r\n    }\r\n\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/BEy20.png","title":"Google foobar The Cake is not a lie","body":"<h1>The cake is not a lie!</h1>\n<p>Commander Lambda has had an incredibly successful week: she completed the first test run of her LAMBCHOP doomsday device, she captured six key members of the Bunny Rebellion, and she beat her personal high score in Tetris. To celebrate, she's ordered cake for everyone - even the lowliest of minions! But competition among minions is fierce, and if you don't cut exactly equal slices of cake for everyone, you'll get in big trouble.</p>\n<p>The cake is round, and decorated with M&amp;Ms in a circle around the edge. But while the rest of the cake is uniform, the M&amp;Ms are not: there are multiple colors, and every minion must get exactly the same sequence of M&amp;Ms. Commander Lambda hates waste and will not tolerate any leftovers, so you also want to make sure you can serve the entire cake.</p>\n<p>To help you best cut the cake, you have turned the sequence of colors of the M&amp;Ms on the cake into a string: each possible letter (between a and z) corresponds to a unique color, and the sequence of M&amp;Ms is given clockwise (the decorations form a circle around the outer edge of the cake).</p>\n<p>Write a function called answer(s) that, given a non-empty string less than 200 characters in length describing the sequence of M&amp;Ms, returns the maximum number of equal parts that can be cut from the cake without leaving any leftovers.</p>\n<h1>Languages</h1>\n<p>To provide a Python solution, edit <code>solution.py</code><br />\nTo provide a Java solution, edit <code>solution.java</code></p>\n<h1>Test cases</h1>\n<p>Inputs:</p>\n<pre><code>(string) s = &quot;abccbaabccba&quot;\n</code></pre>\n<p>Output:</p>\n<pre><code>(int) 2\n</code></pre>\n<p>Inputs:</p>\n<pre><code>(string) s = &quot;abcabcabcabc&quot;\n</code></pre>\n<p>Output:</p>\n<pre><code>(int) 4\n</code></pre>\n<p><strong>Anyone have idea on solving this?\nHere is my answer but failed for 6 test cases.</strong></p>\n<pre><code>public class Answer {   \n    public static int answer(String s) { \n        int split = 1;\n        char c = s.charAt(0);\n        for (int i = 1; i &lt; s.length() - 1; i++) {\n            if (c == s.charAt(i)) {\n                if(s.charAt(i)!=s.charAt(i+1)){\n                    split++;\n                }\n            }\n        }\n        return split;\n    } \n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/BEy20.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BEy20.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","selenium-webdriver"],"answers":[{"tags":[],"owner":{"account_id":24354886,"reputation":15,"user_id":18290244,"display_name":"bblex"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695635419,"creation_date":1695635419,"answer_id":77171583,"question_id":77171158,"body_markdown":"You can check the correctness of your xpath by going to \r\n\r\n`Developer Tools in your browser` -&gt; `Elements` -&gt; `Ctrl + F` -&gt; `Paste your xpath into the search bar`\r\n\r\nI`ve tried search on https://www.youtube.com/ by your xpath:\r\n\r\n    //button[@aria-label=&#39;Accept the use of cookies and other data for the purposes described&#39;] \r\n\r\nand there were not any matches. So try to edit your xpath.","title":"Not able to locate an Element using selenium with java","body":"<p>You can check the correctness of your xpath by going to</p>\n<p><code>Developer Tools in your browser</code> -&gt; <code>Elements</code> -&gt; <code>Ctrl + F</code> -&gt; <code>Paste your xpath into the search bar</code></p>\n<p>I`ve tried search on <a href=\"https://www.youtube.com/\" rel=\"nofollow noreferrer\">https://www.youtube.com/</a> by your xpath:</p>\n<pre><code>//button[@aria-label='Accept the use of cookies and other data for the purposes described'] \n</code></pre>\n<p>and there were not any matches. So try to edit your xpath.</p>\n"},{"comments":[{"owner":{"account_id":9197152,"reputation":1142,"user_id":6835509,"display_name":"Vasanth Subramanian"},"score":0,"creation_date":1695641055,"post_id":77171774,"comment_id":136047036,"body_markdown":"This is working after commenting out code for &quot;Accept All button&quot; and replacing search by id with xpath  -       wait.until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;//input[@id=&#39;search&#39;]&quot;))).sendKeys(&quot;Selenium&quot;);","body":"This is working after commenting out code for &quot;Accept All button&quot; and replacing search by id with xpath  -       wait.until(ExpectedConditions.elementToBeClickable(By.xpath(&zwnj;&#8203;&quot;//input[@id=&#39;search&zwnj;&#8203;&#39;]&quot;))).sendKeys(&quot;Sel&zwnj;&#8203;enium&quot;);"},{"owner":{"account_id":10299692,"reputation":5744,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"score":1,"creation_date":1695649474,"post_id":77171774,"comment_id":136048825,"body_markdown":"@VasanthSubramanian - Yes you are right. Updated answer and changed locator strategy from `ID` to `XPATH`. There seems to be more than one elements with `id=search`. Hence `ID` locator seems to be not working.","body":"@VasanthSubramanian - Yes you are right. Updated answer and changed locator strategy from <code>ID</code> to <code>XPATH</code>. There seems to be more than one elements with <code>id=search</code>. Hence <code>ID</code> locator seems to be not working."}],"tags":[],"owner":{"account_id":10299692,"reputation":5744,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1695649315,"creation_date":1695636934,"answer_id":77171774,"question_id":77171158,"body_markdown":"Try the below code:\r\n````\r\nWebDriver driver = new ChromeDriver();\r\ndriver.get(&quot;https://www.youtube.com/&quot;);\r\ndriver.manage().window().maximize();\r\n//Create an object of selenium&#39;s explicit wait\r\nWebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(30));\r\n        \r\n//Click on Accept All button\r\nwait.until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;//button[@aria-label=&#39;Accept the use of cookies and other data for the purposes described&#39;]&quot;))).click();\r\n\r\n//Send keys Selenium into search box\r\nwait.until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;//input[@id=&#39;search&#39;]&quot;))).sendKeys(&quot;Selenium&quot;);\r\n````\r\n\r\nImports required:\r\n````\r\nimport org.openqa.selenium.support.ui.ExpectedConditions;\r\nimport org.openqa.selenium.By;\r\nimport org.openqa.selenium.support.ui.WebDriverWait;\r\nimport java.time.Duration;\r\n````","title":"Not able to locate an Element using selenium with java","body":"<p>Try the below code:</p>\n<pre><code>WebDriver driver = new ChromeDriver();\ndriver.get(&quot;https://www.youtube.com/&quot;);\ndriver.manage().window().maximize();\n//Create an object of selenium's explicit wait\nWebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(30));\n        \n//Click on Accept All button\nwait.until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;//button[@aria-label='Accept the use of cookies and other data for the purposes described']&quot;))).click();\n\n//Send keys Selenium into search box\nwait.until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;//input[@id='search']&quot;))).sendKeys(&quot;Selenium&quot;);\n</code></pre>\n<p>Imports required:</p>\n<pre><code>import org.openqa.selenium.support.ui.ExpectedConditions;\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.support.ui.WebDriverWait;\nimport java.time.Duration;\n</code></pre>\n"}],"owner":{"account_id":7827196,"reputation":178,"user_id":5918374,"accept_rate":50,"display_name":"AmeyaG"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77171774,"answer_count":2,"score":0,"last_activity_date":1695649315,"creation_date":1695631715,"question_id":77171158,"body_markdown":"I&#39;m new to selenium + java and I&#39;m trying to locate an element (search bar) on the page &quot;https://www.youtube.com/&quot;\r\nWhen I use the xpath on the browser tools, it highlights the correct element.\r\nWhen I run the code, I keep getting an exception **&quot; org.openqa.selenium.NoSuchElementException&quot;**\r\n\r\nThe code that I&#39;m using can be found below \r\n```\r\nWebDriver driver = new ChromeDriver();\r\n\t\t\r\ndriver.get(&quot;https://www.youtube.com/&quot;);\r\ndriver.manage().window().maximize();\r\n\r\ntry {\r\n\t\tThread.sleep(5000);\r\n\t} catch (InterruptedException e) {\r\n\t\t// TODO Auto-generated catch block\r\n\t\te.printStackTrace();\r\n}\r\n\t\t\r\n//To click on the cookie pop pup\r\ndriver.findElement(By.xpath(&quot;//button[@aria-label=&#39;Accept the use of cookies and other data for the purposes described&#39;]&quot;)).click();\r\n\t\t\r\ntry {\r\n\t\tThread.sleep(5000);\r\n\t} catch (InterruptedException e) {\r\n\t\t// TODO Auto-generated catch block\r\n\t\te.printStackTrace();\r\n}\r\n\r\n//To send text to the search field\r\ndriver.findElement(By.xpath(&quot;//input[@class=&#39;ytd-searchbox&#39;]&quot;)).sendKeys(&quot;Selenium&quot;);\r\n```\r\n","title":"Not able to locate an Element using selenium with java","body":"<p>I'm new to selenium + java and I'm trying to locate an element (search bar) on the page &quot;https://www.youtube.com/&quot;\nWhen I use the xpath on the browser tools, it highlights the correct element.\nWhen I run the code, I keep getting an exception <strong>&quot; org.openqa.selenium.NoSuchElementException&quot;</strong></p>\n<p>The code that I'm using can be found below</p>\n<pre><code>WebDriver driver = new ChromeDriver();\n        \ndriver.get(&quot;https://www.youtube.com/&quot;);\ndriver.manage().window().maximize();\n\ntry {\n        Thread.sleep(5000);\n    } catch (InterruptedException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n}\n        \n//To click on the cookie pop pup\ndriver.findElement(By.xpath(&quot;//button[@aria-label='Accept the use of cookies and other data for the purposes described']&quot;)).click();\n        \ntry {\n        Thread.sleep(5000);\n    } catch (InterruptedException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n}\n\n//To send text to the search field\ndriver.findElement(By.xpath(&quot;//input[@class='ytd-searchbox']&quot;)).sendKeys(&quot;Selenium&quot;);\n</code></pre>\n"},{"tags":["java","amazon-web-services","spring-boot","amazon-dynamodb","microservices"],"comments":[{"owner":{"account_id":3533020,"reputation":3091,"user_id":2952011,"accept_rate":80,"display_name":"Mukit09"},"score":0,"creation_date":1695521863,"post_id":77165486,"comment_id":136035157,"body_markdown":"share your aws config codes.","body":"share your aws config codes."},{"owner":{"account_id":2255480,"reputation":835,"user_id":1986760,"accept_rate":14,"display_name":"nsingla85"},"score":0,"creation_date":1695523428,"post_id":77165486,"comment_id":136035234,"body_markdown":"Shared on the registered email address","body":"Shared on the registered email address"},{"owner":{"account_id":12179143,"reputation":12245,"user_id":8891224,"display_name":"Nadav Har&#39;El"},"score":0,"creation_date":1695544089,"post_id":77165486,"comment_id":136036482,"body_markdown":"If I remember correctly, the message &quot;The security token included in the request is invalid.&quot; doesn&#39;t refer specifically to the &quot;session token&quot; (the third part of the authentication when using temporary sessions) but can also mean that your access key id or secret key are wrong.","body":"If I remember correctly, the message &quot;The security token included in the request is invalid.&quot; doesn&#39;t refer specifically to the &quot;session token&quot; (the third part of the authentication when using temporary sessions) but can also mean that your access key id or secret key are wrong."},{"owner":{"account_id":2255480,"reputation":835,"user_id":1986760,"accept_rate":14,"display_name":"nsingla85"},"score":0,"creation_date":1695565847,"post_id":77165486,"comment_id":136038506,"body_markdown":"@NadavHar&#39;El, Access key id and Secret key are correct, I validated the same.\nWhen I include all three: Accesskey, Secret, and Session in the code, I used &#39;BasicSessionCredentials,&#39; instead of BasicAWSCredentials in Code and it works. However, when I tried with just Accesskey and Secret, I encountered the mentioned exception. My concern is that connecting to AWS DynamoDB requires a security token, and I couldn&#39;t find any sample code that includes a security token. I would like to know how to connect to DynamoDB using just the Accesskey and Secret without needing to pass a security token","body":"@NadavHar&#39;El, Access key id and Secret key are correct, I validated the same. When I include all three: Accesskey, Secret, and Session in the code, I used &#39;BasicSessionCredentials,&#39; instead of BasicAWSCredentials in Code and it works. However, when I tried with just Accesskey and Secret, I encountered the mentioned exception. My concern is that connecting to AWS DynamoDB requires a security token, and I couldn&#39;t find any sample code that includes a security token. I would like to know how to connect to DynamoDB using just the Accesskey and Secret without needing to pass a security token"},{"owner":{"account_id":1540816,"reputation":10259,"user_id":1435543,"display_name":"smac2020"},"score":0,"creation_date":1695642826,"post_id":77165486,"comment_id":136047376,"body_markdown":"You are using an SDK version that is considered not best practice.","body":"You are using an SDK version that is considered not best practice."},{"owner":{"account_id":2255480,"reputation":835,"user_id":1986760,"accept_rate":14,"display_name":"nsingla85"},"score":0,"creation_date":1695648092,"post_id":77165486,"comment_id":136048521,"body_markdown":"@smac2020, can you please suggest the correct one ?","body":"@smac2020, can you please suggest the correct one ?"},{"owner":{"account_id":1540816,"reputation":10259,"user_id":1435543,"display_name":"smac2020"},"score":0,"creation_date":1695648679,"post_id":77165486,"comment_id":136048642,"body_markdown":"See response. A lot of information there.","body":"See response. A lot of information there."},{"owner":{"account_id":2255480,"reputation":835,"user_id":1986760,"accept_rate":14,"display_name":"nsingla85"},"score":0,"creation_date":1695655639,"post_id":77165486,"comment_id":136050306,"body_markdown":"@smac2020, Still getting the similar Issue:\n\nThe security token included in the request is invalid. (Service: DynamoDb, Status Code: 400, Request ID: I843LDSR6O0K011KEI8O0BPQIFVV4KQNSO5AEMVJF66Q9ASUAAJG)\n\nProcess finished with exit code 1","body":"@smac2020, Still getting the similar Issue:  The security token included in the request is invalid. (Service: DynamoDb, Status Code: 400, Request ID: I843LDSR6O0K011KEI8O0BPQIFVV4KQNSO5AEMVJF66Q9ASUAAJG)  Process finished with exit code 1"},{"owner":{"account_id":1540816,"reputation":10259,"user_id":1435543,"display_name":"smac2020"},"score":0,"creation_date":1695655750,"post_id":77165486,"comment_id":136050330,"body_markdown":"Try a fresh Java Maven project and pull in the POM file located here - https://github.com/awsdocs/aws-doc-sdk-examples/tree/main/javav2/example_code/dynamodb.  I want to make sure you get a basic AWS DynanoDB project working. Also - put your creds under \\.aws\\credentials as discussed in the link in my answer","body":"Try a fresh Java Maven project and pull in the POM file located here - <a href=\"https://github.com/awsdocs/aws-doc-sdk-examples/tree/main/javav2/example_code/dynamodb\" rel=\"nofollow noreferrer\">github.com/awsdocs/aws-doc-sdk-examples/tree/main/javav2/&hellip;</a>.  I want to make sure you get a basic AWS DynanoDB project working. Also - put your creds under \\.aws\\credentials as discussed in the link in my answer"}],"answers":[{"tags":[],"owner":{"account_id":1540816,"reputation":10259,"user_id":1435543,"display_name":"smac2020"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":true,"score":2,"last_activity_date":1695587575,"creation_date":1695566808,"answer_id":77167576,"question_id":77165486,"body_markdown":"You are using an outdated version of the Java SDK. You should strongly consider moving to [AWS SDK for Java V2][1]. V1 is not best practice. \r\n\r\nThe Amazon DynamoDB V2 Java API lets you perform service operations using your keys. To do so, ensure you configure your keys properly. See [Credential settings retrieval order][2]. \r\n\r\nHere is an example that simply lists your tables. Try this code to make sure it works.\r\n\r\n    package com.example.dynamodb;\r\n    \r\n    // snippet-start:[dynamodb.java2.list_tables.import]\r\n    import software.amazon.awssdk.auth.credentials.ProfileCredentialsProvider;\r\n    import software.amazon.awssdk.regions.Region;\r\n    import software.amazon.awssdk.services.dynamodb.DynamoDbClient;\r\n    import software.amazon.awssdk.services.dynamodb.model.DynamoDbException;\r\n    import software.amazon.awssdk.services.dynamodb.model.ListTablesRequest;\r\n    import software.amazon.awssdk.services.dynamodb.model.ListTablesResponse;\r\n    import java.util.List;\r\n    // snippet-end:[dynamodb.java2.list_tables.import]\r\n    \r\n    /**\r\n     * Before running this Java V2 code example, set up your development environment, including your credentials.\r\n     *\r\n     * For more information, see the following documentation topic:\r\n     *\r\n     * https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/get-started.html\r\n     */\r\n    public class ListTables {\r\n    \r\n        public static void main(String[] args) {\r\n    \r\n            System.out.println(&quot;Listing your Amazon DynamoDB tables:\\n&quot;);\r\n            ProfileCredentialsProvider credentialsProvider = ProfileCredentialsProvider.create();\r\n            Region region = Region.US_EAST_1;\r\n            DynamoDbClient ddb = DynamoDbClient.builder()\r\n                   .credentialsProvider(credentialsProvider)\r\n                    .region(region)\r\n                    .build();\r\n            listAllTables(ddb);\r\n            ddb.close();\r\n        }\r\n    \r\n        // snippet-start:[dynamodb.java2.list_tables.main]\r\n        public static void listAllTables(DynamoDbClient ddb){\r\n    \r\n            boolean moreTables = true;\r\n            String lastName = null;\r\n    \r\n            while(moreTables) {\r\n                try {\r\n                    ListTablesResponse response = null;\r\n                    if (lastName == null) {\r\n                        ListTablesRequest request = ListTablesRequest.builder().build();\r\n                        response = ddb.listTables(request);\r\n                    } else {\r\n                        ListTablesRequest request = ListTablesRequest.builder()\r\n                                .exclusiveStartTableName(lastName).build();\r\n                        response = ddb.listTables(request);\r\n                    }\r\n    \r\n                    List&lt;String&gt; tableNames = response.tableNames();\r\n                    if (tableNames.size() &gt; 0) {\r\n                        for (String curName : tableNames) {\r\n                            System.out.format(&quot;* %s\\n&quot;, curName);\r\n                        }\r\n                    } else {\r\n                        System.out.println(&quot;No tables found!&quot;);\r\n                        System.exit(0);\r\n                    }\r\n    \r\n                    lastName = response.lastEvaluatedTableName();\r\n                    if (lastName == null) {\r\n                        moreTables = false;\r\n                    }\r\n    \r\n                } catch (DynamoDbException e) {\r\n                    System.err.println(e.getMessage());\r\n                    System.exit(1);\r\n                }\r\n            }\r\n            System.out.println(&quot;\\nDone!&quot;);\r\n        }\r\n        // snippet-end:[dynamodb.java2.list_tables.main]\r\n    }\r\n\r\nAfter you get that working, you can try more advanced examples such as: \r\n\r\n*Discusses how to develop a Spring Boot application that queries Amazon DynamoDB data. The Spring Boot application uses the AWS SDK for Java (v2) to invoke AWS services and is used by a React application that displays the data. The React application uses Cloudscape.*\r\n\r\nSee - https://github.com/awsdocs/aws-doc-sdk-examples/tree/main/javav2/usecases/creating_dynamodb_web_app\r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/home.html\r\n  [2]: https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/credentials-chain.html","title":"Amazon DynamoDB Exception: The security token included in the request is invalid","body":"<p>You are using an outdated version of the Java SDK. You should strongly consider moving to <a href=\"https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/home.html\" rel=\"nofollow noreferrer\">AWS SDK for Java V2</a>. V1 is not best practice.</p>\n<p>The Amazon DynamoDB V2 Java API lets you perform service operations using your keys. To do so, ensure you configure your keys properly. See <a href=\"https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/credentials-chain.html\" rel=\"nofollow noreferrer\">Credential settings retrieval order</a>.</p>\n<p>Here is an example that simply lists your tables. Try this code to make sure it works.</p>\n<pre><code>package com.example.dynamodb;\n\n// snippet-start:[dynamodb.java2.list_tables.import]\nimport software.amazon.awssdk.auth.credentials.ProfileCredentialsProvider;\nimport software.amazon.awssdk.regions.Region;\nimport software.amazon.awssdk.services.dynamodb.DynamoDbClient;\nimport software.amazon.awssdk.services.dynamodb.model.DynamoDbException;\nimport software.amazon.awssdk.services.dynamodb.model.ListTablesRequest;\nimport software.amazon.awssdk.services.dynamodb.model.ListTablesResponse;\nimport java.util.List;\n// snippet-end:[dynamodb.java2.list_tables.import]\n\n/**\n * Before running this Java V2 code example, set up your development environment, including your credentials.\n *\n * For more information, see the following documentation topic:\n *\n * https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/get-started.html\n */\npublic class ListTables {\n\n    public static void main(String[] args) {\n\n        System.out.println(&quot;Listing your Amazon DynamoDB tables:\\n&quot;);\n        ProfileCredentialsProvider credentialsProvider = ProfileCredentialsProvider.create();\n        Region region = Region.US_EAST_1;\n        DynamoDbClient ddb = DynamoDbClient.builder()\n               .credentialsProvider(credentialsProvider)\n                .region(region)\n                .build();\n        listAllTables(ddb);\n        ddb.close();\n    }\n\n    // snippet-start:[dynamodb.java2.list_tables.main]\n    public static void listAllTables(DynamoDbClient ddb){\n\n        boolean moreTables = true;\n        String lastName = null;\n\n        while(moreTables) {\n            try {\n                ListTablesResponse response = null;\n                if (lastName == null) {\n                    ListTablesRequest request = ListTablesRequest.builder().build();\n                    response = ddb.listTables(request);\n                } else {\n                    ListTablesRequest request = ListTablesRequest.builder()\n                            .exclusiveStartTableName(lastName).build();\n                    response = ddb.listTables(request);\n                }\n\n                List&lt;String&gt; tableNames = response.tableNames();\n                if (tableNames.size() &gt; 0) {\n                    for (String curName : tableNames) {\n                        System.out.format(&quot;* %s\\n&quot;, curName);\n                    }\n                } else {\n                    System.out.println(&quot;No tables found!&quot;);\n                    System.exit(0);\n                }\n\n                lastName = response.lastEvaluatedTableName();\n                if (lastName == null) {\n                    moreTables = false;\n                }\n\n            } catch (DynamoDbException e) {\n                System.err.println(e.getMessage());\n                System.exit(1);\n            }\n        }\n        System.out.println(&quot;\\nDone!&quot;);\n    }\n    // snippet-end:[dynamodb.java2.list_tables.main]\n}\n</code></pre>\n<p>After you get that working, you can try more advanced examples such as:</p>\n<p><em>Discusses how to develop a Spring Boot application that queries Amazon DynamoDB data. The Spring Boot application uses the AWS SDK for Java (v2) to invoke AWS services and is used by a React application that displays the data. The React application uses Cloudscape.</em></p>\n<p>See - <a href=\"https://github.com/awsdocs/aws-doc-sdk-examples/tree/main/javav2/usecases/creating_dynamodb_web_app\" rel=\"nofollow noreferrer\">https://github.com/awsdocs/aws-doc-sdk-examples/tree/main/javav2/usecases/creating_dynamodb_web_app</a></p>\n"}],"owner":{"account_id":2255480,"reputation":835,"user_id":1986760,"accept_rate":14,"display_name":"nsingla85"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":258,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77167576,"answer_count":1,"score":1,"last_activity_date":1695648736,"creation_date":1695519550,"question_id":77165486,"body_markdown":"I&#39;m encountering an issue while attempting to establish a connection to Amazon DynamoDB through a Spring Boot component using &#39;**aws-java-sdk-dynamodb**&#39;. \r\n\r\nI&#39;m providing the Access Key and Secret Key, but I&#39;m receiving an exception indicating an invalid security token, even though I&#39;m not passing one.\r\n\r\nHere&#39;s the exception I&#39;m encountering:\r\n\r\n       com.amazonaws.services.dynamodbv2.model.AmazonDynamoDBException: The security token included in the request is invalid. (Service: AmazonDynamoDBv2; Status Code: 400; Error Code: UnrecognizedClientException; Request ID: 3JNS4E8K8PR6MG2VLLH6M152R3VV4KQNSO5AEMVJF66Q9ASUAAJG)\r\n        \tat com.amazonaws.http.AmazonHttpClient$RequestExecutor.handleErrorResponse(AmazonHttpClient.java:1799) ~[aws-java-sdk-core-1.11.725.jar:na]\r\n        \tat com.amazonaws.http.AmazonHttpClient$RequestExecutor.handleServiceErrorResponse(AmazonHttpClient.java:1383) ~[aws-java-sdk-core-1.11.725.jar:na]\r\n\r\nI&#39;d like to clarify whether a security token is required to connect to AWS DynamoDB from a Spring Boot component in Java. I have gone through with so many sample codes but didn&#39;t find any with Security Token.\r\nI&#39;m following the code reference in the repository at:\r\nhttps://github.com/yogsma/betterjavacode/tree/main/dynamodbdemo\r\n\r\nCould you please provide references on how to establish a successful connection to DynamoDB from a Spring Boot Java component?\r\n\r\n","title":"Amazon DynamoDB Exception: The security token included in the request is invalid","body":"<p>I'm encountering an issue while attempting to establish a connection to Amazon DynamoDB through a Spring Boot component using '<strong>aws-java-sdk-dynamodb</strong>'.</p>\n<p>I'm providing the Access Key and Secret Key, but I'm receiving an exception indicating an invalid security token, even though I'm not passing one.</p>\n<p>Here's the exception I'm encountering:</p>\n<pre><code>   com.amazonaws.services.dynamodbv2.model.AmazonDynamoDBException: The security token included in the request is invalid. (Service: AmazonDynamoDBv2; Status Code: 400; Error Code: UnrecognizedClientException; Request ID: 3JNS4E8K8PR6MG2VLLH6M152R3VV4KQNSO5AEMVJF66Q9ASUAAJG)\n        at com.amazonaws.http.AmazonHttpClient$RequestExecutor.handleErrorResponse(AmazonHttpClient.java:1799) ~[aws-java-sdk-core-1.11.725.jar:na]\n        at com.amazonaws.http.AmazonHttpClient$RequestExecutor.handleServiceErrorResponse(AmazonHttpClient.java:1383) ~[aws-java-sdk-core-1.11.725.jar:na]\n</code></pre>\n<p>I'd like to clarify whether a security token is required to connect to AWS DynamoDB from a Spring Boot component in Java. I have gone through with so many sample codes but didn't find any with Security Token.\nI'm following the code reference in the repository at:\n<a href=\"https://github.com/yogsma/betterjavacode/tree/main/dynamodbdemo\" rel=\"nofollow noreferrer\">https://github.com/yogsma/betterjavacode/tree/main/dynamodbdemo</a></p>\n<p>Could you please provide references on how to establish a successful connection to DynamoDB from a Spring Boot Java component?</p>\n"},{"tags":["java","spring-webflux","spring-kafka","project-reactor","reactor-kafka"],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695648721,"creation_date":1695648721,"answer_id":77173089,"question_id":77162588,"body_markdown":"`.receiveBatch()` was recently added; it is available in 1.3.21.\r\n\r\nhttps://github.com/reactor/reactor-kafka/commit/9597c9388f33b03817c439159a81807ab6300123","title":"How to get a list of messages with reactor-kafka receiver?","body":"<p><code>.receiveBatch()</code> was recently added; it is available in 1.3.21.</p>\n<p><a href=\"https://github.com/reactor/reactor-kafka/commit/9597c9388f33b03817c439159a81807ab6300123\" rel=\"nofollow noreferrer\">https://github.com/reactor/reactor-kafka/commit/9597c9388f33b03817c439159a81807ab6300123</a></p>\n"}],"owner":{"account_id":4792887,"reputation":1023,"user_id":4003272,"accept_rate":88,"display_name":"Mikhail Geyer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77173089,"answer_count":1,"score":0,"last_activity_date":1695648721,"creation_date":1695464557,"question_id":77162588,"body_markdown":"When we deal with synchronous approach we can receive from kafka a list of messages easily:\r\n\r\n    @Bean\r\n    public ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; testContainerFactory() {\r\n        ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; factory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\r\n        ConsumerFactory&lt;String, String&gt; consumerFactory = new DefaultKafkaConsumerFactory&lt;&gt;(Map.of(\r\n        ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;localhost:9092&quot;,\r\n        ...\r\n        ConsumerConfig.MAX_POLL_RECORDS_CONFIG, 500)),\r\n                new StringDeserializer(),\r\n                new StringDeserializer());\r\n        factory.setConsumerFactory(consumerFactory);\r\n        factory.setBatchListener(true);\r\n        return factory;\r\n    }\r\n\r\n    @KafkaListener(topics = {&quot;topic&quot;}, containerFactory = &quot;testContainerFactory&quot;, groupId = &quot;group-id&quot;)\r\n    public void receiveMessages(List&lt;String&gt; messages) {\r\n        processorService.process(messages); // imagine that processorService  works with lists more efficiently than with multiple calls by one message\r\n    }\r\n\r\nIf I understand correctly it is guaranteed that the list will not exceed 500 messages.\r\n\r\nI need a similar behavior with a reactive solution for my app. I know that we can use `reactor-kafka`:\r\n\r\n    @Bean\r\n    public ApplicationRunner runner() {\r\n        return args -&gt; {\r\n            ReceiverOptions&lt;String, String&gt; ro = ReceiverOptions.&lt;String, String&gt;create(\r\n                    Map.of(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;localhost:9092&quot;,\r\n                           ...\r\n                           ConsumerConfig.MAX_POLL_RECORDS_CONFIG, 500))\r\n            .withKeyDeserializer(new StringDeserializer())\r\n            .withValueDeserializer(new StringDeserializer())\r\n            .subscription(Collections.singletonList(&quot;topic&quot;));\r\n            KafkaReceiver.create(ro)\r\n                    .receive()\r\n                    .doOnNext(message -&gt; processorService.process(List.of(message)))\r\n                    .subscribe();\r\n        };\r\n    }\r\n\r\nAs `.receive()` returns a `Flux` I need to wrap it to a list to feed `processorService.process` with a real list (not with only one value). \r\nIs it ok to collect flux to a list like this in terms of kafka efficiency?\r\n\r\n            KafkaReceiver.create(ro)\r\n                    .receive()\r\n                    .collectToList()\r\n                    .doOnNext(processorService::process))\r\n                    .subscribe();\r\n\r\nHow many items will be in the list in such a case? Will it not exceed 500 as we set ConsumerConfig.MAX_POLL_RECORDS_CONFIG=500 in `ReceiverOptions`, right? ","title":"How to get a list of messages with reactor-kafka receiver?","body":"<p>When we deal with synchronous approach we can receive from kafka a list of messages easily:</p>\n<pre><code>@Bean\npublic ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; testContainerFactory() {\n    ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; factory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\n    ConsumerFactory&lt;String, String&gt; consumerFactory = new DefaultKafkaConsumerFactory&lt;&gt;(Map.of(\n    ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;localhost:9092&quot;,\n    ...\n    ConsumerConfig.MAX_POLL_RECORDS_CONFIG, 500)),\n            new StringDeserializer(),\n            new StringDeserializer());\n    factory.setConsumerFactory(consumerFactory);\n    factory.setBatchListener(true);\n    return factory;\n}\n\n@KafkaListener(topics = {&quot;topic&quot;}, containerFactory = &quot;testContainerFactory&quot;, groupId = &quot;group-id&quot;)\npublic void receiveMessages(List&lt;String&gt; messages) {\n    processorService.process(messages); // imagine that processorService  works with lists more efficiently than with multiple calls by one message\n}\n</code></pre>\n<p>If I understand correctly it is guaranteed that the list will not exceed 500 messages.</p>\n<p>I need a similar behavior with a reactive solution for my app. I know that we can use <code>reactor-kafka</code>:</p>\n<pre><code>@Bean\npublic ApplicationRunner runner() {\n    return args -&gt; {\n        ReceiverOptions&lt;String, String&gt; ro = ReceiverOptions.&lt;String, String&gt;create(\n                Map.of(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;localhost:9092&quot;,\n                       ...\n                       ConsumerConfig.MAX_POLL_RECORDS_CONFIG, 500))\n        .withKeyDeserializer(new StringDeserializer())\n        .withValueDeserializer(new StringDeserializer())\n        .subscription(Collections.singletonList(&quot;topic&quot;));\n        KafkaReceiver.create(ro)\n                .receive()\n                .doOnNext(message -&gt; processorService.process(List.of(message)))\n                .subscribe();\n    };\n}\n</code></pre>\n<p>As <code>.receive()</code> returns a <code>Flux</code> I need to wrap it to a list to feed <code>processorService.process</code> with a real list (not with only one value).\nIs it ok to collect flux to a list like this in terms of kafka efficiency?</p>\n<pre><code>        KafkaReceiver.create(ro)\n                .receive()\n                .collectToList()\n                .doOnNext(processorService::process))\n                .subscribe();\n</code></pre>\n<p>How many items will be in the list in such a case? Will it not exceed 500 as we set ConsumerConfig.MAX_POLL_RECORDS_CONFIG=500 in <code>ReceiverOptions</code>, right?</p>\n"},{"tags":["java","apache-kafka","spring-kafka"],"comments":[{"owner":{"account_id":251784,"reputation":321,"user_id":529398,"accept_rate":40,"display_name":"St&#233;phane Derosiaux"},"score":0,"creation_date":1695507350,"post_id":77163674,"comment_id":136034274,"body_markdown":"How did you setup your consumer concurrency? Also, did you check if these records belong to the same partition? (they should because same key—but maybe there is an issue with the producer?)","body":"How did you setup your consumer concurrency? Also, did you check if these records belong to the same partition? (they should because same key—but maybe there is an issue with the producer?)"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1695561954,"post_id":77163674,"comment_id":136038139,"body_markdown":"The Javadoc for the rebalance listener explains it gives you more direct control over offset storage, and a final chance to commit, or place to seek, which is especially useful if you do not depend on Kafka for that offset storage. In any case, multiple listeners shouldn&#39;t be assigned the same partition (to process the same key), but multiple threads can be started from a consumer poll batch to process offsets from one partition in parallel. https://github.com/confluentinc/parallel-consumer","body":"The Javadoc for the rebalance listener explains it gives you more direct control over offset storage, and a final chance to commit, or place to seek, which is especially useful if you do not depend on Kafka for that offset storage. In any case, multiple listeners shouldn&#39;t be assigned the same partition (to process the same key), but multiple threads can be started from a consumer poll batch to process offsets from one partition in parallel. <a href=\"https://github.com/confluentinc/parallel-consumer\" rel=\"nofollow noreferrer\">github.com/confluentinc/parallel-consumer</a>"},{"owner":{"account_id":252715,"reputation":6160,"user_id":530933,"accept_rate":97,"display_name":"owen gerig"},"score":0,"creation_date":1695575672,"post_id":77163674,"comment_id":136039652,"body_markdown":"@St&#233;phaneD. i updated the question to answer your questions..","body":"@St&#233;phaneD. i updated the question to answer your questions.."},{"owner":{"account_id":252715,"reputation":6160,"user_id":530933,"accept_rate":97,"display_name":"owen gerig"},"score":0,"creation_date":1695575693,"post_id":77163674,"comment_id":136039657,"body_markdown":"@OneCricketeer &quot;multiple threads can be started from a consumer poll batch to process offsets from one partition in parallel.&quot;  looking at the screenshot above those look like different listener container threads; do you agree?  what would it look like if they were consumer parallel threads","body":"@OneCricketeer &quot;multiple threads can be started from a consumer poll batch to process offsets from one partition in parallel.&quot;  looking at the screenshot above those look like different listener container threads; do you agree?  what would it look like if they were consumer parallel threads"},{"owner":{"account_id":251784,"reputation":321,"user_id":529398,"accept_rate":40,"display_name":"St&#233;phane Derosiaux"},"score":0,"creation_date":1695594361,"post_id":77163674,"comment_id":136041402,"body_markdown":"a key does not move between partitions (the whole Kafka ecosystem is built on this concept). This can happen only if you&#39;ve added partitions manually (which is very rarely the case). Is that the case? If not, how are produced your records? (language, framework)","body":"a key does not move between partitions (the whole Kafka ecosystem is built on this concept). This can happen only if you&#39;ve added partitions manually (which is very rarely the case). Is that the case? If not, how are produced your records? (language, framework)"},{"owner":{"account_id":252715,"reputation":6160,"user_id":530933,"accept_rate":97,"display_name":"owen gerig"},"score":0,"creation_date":1695646381,"post_id":77163674,"comment_id":136048109,"body_markdown":"afaik we have not added any partitions manually (we use julie).  we use the eventKafkaTemplate.send(topic, key, event);","body":"afaik we have not added any partitions manually (we use julie).  we use the eventKafkaTemplate.send(topic, key, event);"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1695648057,"post_id":77163674,"comment_id":136048510,"body_markdown":"I don&#39;t have experience with spring-kafka, in particular, but assume you polled 100 records, and set concurrency as 4. This may try to distribute 25 records to be processed by each thread... Depending on your records, this may result in bad order or race-conditions. If that&#39;s not what you want, then you may not want to use the concurrent listener, and rather simply run 4 instances of your Spring process, each with one consumer KafkaListener thread","body":"I don&#39;t have experience with spring-kafka, in particular, but assume you polled 100 records, and set concurrency as 4. This may try to distribute 25 records to be processed by each thread... Depending on your records, this may result in bad order or race-conditions. If that&#39;s not what you want, then you may not want to use the concurrent listener, and rather simply run 4 instances of your Spring process, each with one consumer KafkaListener thread"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1695648380,"post_id":77163674,"comment_id":136048581,"body_markdown":"Regarding your update, keys cannot move topics unless the producer code was explicitly sending it to each; did you mean partition?","body":"Regarding your update, keys cannot move topics unless the producer code was explicitly sending it to each; did you mean partition?"},{"owner":{"account_id":252715,"reputation":6160,"user_id":530933,"accept_rate":97,"display_name":"owen gerig"},"score":0,"creation_date":1695649526,"post_id":77163674,"comment_id":136048838,"body_markdown":"ya sorry guys after investigation the number of partitions changed, likely causing the same key to end up in multiple partitions.  today we have deleted and recreated that topic so hopefully that will resolve that","body":"ya sorry guys after investigation the number of partitions changed, likely causing the same key to end up in multiple partitions.  today we have deleted and recreated that topic so hopefully that will resolve that"},{"owner":{"account_id":252715,"reputation":6160,"user_id":530933,"accept_rate":97,"display_name":"owen gerig"},"score":0,"creation_date":1695747980,"post_id":77163674,"comment_id":136064842,"body_markdown":"thank you all for your comments.  i believe this was caused from a completely  different topic resulting in the same object being updated concurrently.  there was some other issues with keys in the partition, but recreating the topic fixed that.","body":"thank you all for your comments.  i believe this was caused from a completely  different topic resulting in the same object being updated concurrently.  there was some other issues with keys in the partition, but recreating the topic fixed that."}],"owner":{"account_id":252715,"reputation":6160,"user_id":530933,"accept_rate":97,"display_name":"owen gerig"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695648315,"creation_date":1695482330,"question_id":77163674,"body_markdown":"We are using kafka to deliver events to our micro service.  We populate/utilize the &quot;key&quot; field to ensure events with the same key are put in the same partition and processed sequentially.  We have also configured consumer concurrency giving birth to many listener containers within a single micro service instance.  recently while testing we saw 5 out of the 6 listener containers processing events with the same key.\r\n[![enter image description here][1]][1]\r\n(here we see the listenerContainer- &lt;0,1,2,3,4&gt; all processing an event with the same key.  the breakpointer were conditional on the key)\r\n\r\nI have seen [other post][2] ([or here][3]) recommend creation of a ConsumerRebalanceListener\r\n\r\nIs it really necessary to manually handle partition assignment when using consumer concurrency?\r\n\r\nusing keys to maintain partition assignment seems like default behavior why would it need to be re-written?\r\n\r\n\r\nsome updates and replies to comments...\r\n\r\nHow we set consumer concurrency (in our factory):\r\n\r\n    /**\r\n    \t * {@inheritDoc}\r\n    \t */\r\n    \t@Override\r\n    \tpublic &lt;T&gt; ConcurrentKafkaListenerContainerFactory&lt;String, T&gt; listenerContainerFactory() {\r\n    \t\tConcurrentKafkaListenerContainerFactory&lt;String, T&gt; factory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\r\n    \t\tfactory.setConsumerFactory(new DefaultKafkaConsumerFactory&lt;&gt;(consumerJsonProperties()));\r\n    \t\tfactory.setConcurrency(kp.getConsumerConcurrency());\r\n    \t\treturn factory;\r\n    \t}\r\n\r\nI did double check the topics for producing issue.\r\nThe key (a uuid) does show up in 2 different partitions (out of 12 total), however one topic only has older events while the other has all the newer events for this key.  So it seems to be working as expected, I just think the key moved topics at some point.\r\n\r\n  [1]: https://i.stack.imgur.com/s2LTD.png\r\n  [2]: https://stackoverflow.com/a/53541369/530933\r\n  [3]: https://stackoverflow.com/a/52284186/530933","title":"Kafka concurrent consumers and partitions assigned","body":"<p>We are using kafka to deliver events to our micro service.  We populate/utilize the &quot;key&quot; field to ensure events with the same key are put in the same partition and processed sequentially.  We have also configured consumer concurrency giving birth to many listener containers within a single micro service instance.  recently while testing we saw 5 out of the 6 listener containers processing events with the same key.\n<a href=\"https://i.stack.imgur.com/s2LTD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/s2LTD.png\" alt=\"enter image description here\" /></a>\n(here we see the listenerContainer- &lt;0,1,2,3,4&gt; all processing an event with the same key.  the breakpointer were conditional on the key)</p>\n<p>I have seen <a href=\"https://stackoverflow.com/a/53541369/530933\">other post</a> (<a href=\"https://stackoverflow.com/a/52284186/530933\">or here</a>) recommend creation of a ConsumerRebalanceListener</p>\n<p>Is it really necessary to manually handle partition assignment when using consumer concurrency?</p>\n<p>using keys to maintain partition assignment seems like default behavior why would it need to be re-written?</p>\n<p>some updates and replies to comments...</p>\n<p>How we set consumer concurrency (in our factory):</p>\n<pre><code>/**\n     * {@inheritDoc}\n     */\n    @Override\n    public &lt;T&gt; ConcurrentKafkaListenerContainerFactory&lt;String, T&gt; listenerContainerFactory() {\n        ConcurrentKafkaListenerContainerFactory&lt;String, T&gt; factory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\n        factory.setConsumerFactory(new DefaultKafkaConsumerFactory&lt;&gt;(consumerJsonProperties()));\n        factory.setConcurrency(kp.getConsumerConcurrency());\n        return factory;\n    }\n</code></pre>\n<p>I did double check the topics for producing issue.\nThe key (a uuid) does show up in 2 different partitions (out of 12 total), however one topic only has older events while the other has all the newer events for this key.  So it seems to be working as expected, I just think the key moved topics at some point.</p>\n"},{"tags":["java","spring-data","spring-annotations"],"owner":{"account_id":3779597,"reputation":73,"user_id":3139461,"display_name":"user3139461"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695648074,"creation_date":1695648074,"question_id":77173027,"body_markdown":"So I have a spring application with many DAOs that need to be pageable.\r\nEvery time I want to use a native query I need to wrap it into a separate count query eg.\r\n\r\n```\r\npublic interface UserDao extends JpaRepository&lt;UserEntity, Long&gt;  {\r\n\tString QUERY = &quot;select user_id,user_name from users&quot;;//a simplified example\r\n\t\r\n\t@Query(\r\n\t\tvalue = QUERY, \r\n\t\tcountQuery = &quot;select count(1) from (&quot;+QUERY+&quot;)&quot;\r\n\t\tnativeQuery = true)\r\n    Page&lt;UserEntity&gt; findUsers(Pageable pageable);\r\n}\r\n\r\n```\r\n\r\nWhat I would like is to go away with repeatable parts eg.\r\n```\r\npublic interface UserDao extends JpaRepository&lt;UserEntity, Long&gt;  {\r\n\t@PageableNativeQuery(value = &quot;select user_id,user_name from users&quot;)\r\n    Page&lt;UserEntity&gt; findUsers(Pageable pageable);\r\n}\r\n\r\n```\r\nSo I made an new annotation using @AliasFor:\r\n```\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Target({ElementType.METHOD, ElementType.ANNOTATION_TYPE})\r\n@QueryAnnotation\r\n@Documented\r\n@Query(\r\n\tnativeQuery = true, //this works\r\n\tcountQuery = &quot;select count(1) from (&quot;+value+&quot;)&quot;//this does not work\r\n\t)\r\npublic @interface PageableNativeQuery {\r\n    @AliasFor(annotation = Query.class, attribute = &quot;value&quot;) String value() default &quot;&quot;;\r\n}\r\n\r\n```\r\nI can&#39;t figure out how to wrap up the query value into the count query. Any ideas are appreciated. ","title":"Annotation @AliasFor for derived property values","body":"<p>So I have a spring application with many DAOs that need to be pageable.\nEvery time I want to use a native query I need to wrap it into a separate count query eg.</p>\n<pre><code>public interface UserDao extends JpaRepository&lt;UserEntity, Long&gt;  {\n    String QUERY = &quot;select user_id,user_name from users&quot;;//a simplified example\n    \n    @Query(\n        value = QUERY, \n        countQuery = &quot;select count(1) from (&quot;+QUERY+&quot;)&quot;\n        nativeQuery = true)\n    Page&lt;UserEntity&gt; findUsers(Pageable pageable);\n}\n\n</code></pre>\n<p>What I would like is to go away with repeatable parts eg.</p>\n<pre><code>public interface UserDao extends JpaRepository&lt;UserEntity, Long&gt;  {\n    @PageableNativeQuery(value = &quot;select user_id,user_name from users&quot;)\n    Page&lt;UserEntity&gt; findUsers(Pageable pageable);\n}\n\n</code></pre>\n<p>So I made an new annotation using @AliasFor:</p>\n<pre><code>@Retention(RetentionPolicy.RUNTIME)\n@Target({ElementType.METHOD, ElementType.ANNOTATION_TYPE})\n@QueryAnnotation\n@Documented\n@Query(\n    nativeQuery = true, //this works\n    countQuery = &quot;select count(1) from (&quot;+value+&quot;)&quot;//this does not work\n    )\npublic @interface PageableNativeQuery {\n    @AliasFor(annotation = Query.class, attribute = &quot;value&quot;) String value() default &quot;&quot;;\n}\n\n</code></pre>\n<p>I can't figure out how to wrap up the query value into the count query. Any ideas are appreciated.</p>\n"},{"tags":["java","spring-boot","redis","spring-data-redis"],"comments":[{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1688126401,"post_id":76588420,"comment_id":135035611,"body_markdown":"Hello, your code looks good for me and should work. Please share the application log during startup and the dependencies (pom.xml or gradle file).","body":"Hello, your code looks good for me and should work. Please share the application log during startup and the dependencies (pom.xml or gradle file)."},{"owner":{"account_id":28924384,"reputation":1,"user_id":22154602,"display_name":"Biljana"},"score":0,"creation_date":1688127884,"post_id":76588420,"comment_id":135035917,"body_markdown":"@Mar-Z in my gradle file I have those dependencies for redis:\n`org.springframework.boot:spring-boot-configuration-processor:2.7.5`\n`org.springframework.data:spring-data-redis:2.7.3`\n`redis.clients:jedis:3.9.0`\n`org.springframework.boot:spring-boot-starter-data-redis`\n\nAlso the redis server is started and there I make good connection with the redis database","body":"@Mar-Z in my gradle file I have those dependencies for redis: <code>org.springframework.boot:spring-boot-configuration-processor&zwnj;&#8203;:2.7.5</code> <code>org.springframework.data:spring-data-redis:2.7.3</code> <code>redis.clients:jedis:3.9.0</code> <code>org.springframework.boot:spring-boot-starter-data-redis</code>  Also the redis server is started and there I make good connection with the redis database"},{"owner":{"account_id":22866981,"reputation":131,"user_id":17010647,"display_name":"Ksu"},"score":0,"creation_date":1688127925,"post_id":76588420,"comment_id":135035933,"body_markdown":"https://stackoverflow.com/questions/60729716/how-can-i-search-a-redis-hash-table-for-entities-that-have-a-particular-values-u","body":"<a href=\"https://stackoverflow.com/questions/60729716/how-can-i-search-a-redis-hash-table-for-entities-that-have-a-particular-values-u\" title=\"how can i search a redis hash table for entities that have a particular values u\">stackoverflow.com/questions/60729716/&hellip;</a>"},{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1688129322,"post_id":76588420,"comment_id":135036245,"body_markdown":"What url you&#39;re using exactly for testing? Can you set a breakpoint in controller to check the parameter?","body":"What url you&#39;re using exactly for testing? Can you set a breakpoint in controller to check the parameter?"},{"owner":{"account_id":28924384,"reputation":1,"user_id":22154602,"display_name":"Biljana"},"score":0,"creation_date":1688129665,"post_id":76588420,"comment_id":135036328,"body_markdown":"@Mar-Z \nlocalhost:8085/filterAppsByAppsTypes?appTypes=${appTypes}","body":"@Mar-Z  localhost:8085/filterAppsByAppsTypes?appTypes=${appTypes}"},{"owner":{"account_id":28924384,"reputation":1,"user_id":22154602,"display_name":"Biljana"},"score":0,"creation_date":1688129811,"post_id":76588420,"comment_id":135036358,"body_markdown":"@Ksu it works, thanks :)","body":"@Ksu it works, thanks :)"},{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1688129835,"post_id":76588420,"comment_id":135036370,"body_markdown":"This is wrong. Should be appType according to controller. And one string only. Not a list, right?","body":"This is wrong. Should be appType according to controller. And one string only. Not a list, right?"},{"owner":{"account_id":28924384,"reputation":1,"user_id":22154602,"display_name":"Biljana"},"score":0,"creation_date":1688131603,"post_id":76588420,"comment_id":135036805,"body_markdown":"@Mar-Z to be exact, I need List of appTypes, but first I did it for one appType, just to make it work","body":"@Mar-Z to be exact, I need List of appTypes, but first I did it for one appType, just to make it work"},{"owner":{"account_id":1693221,"reputation":2947,"user_id":1555190,"accept_rate":72,"display_name":"user1555190"},"score":0,"creation_date":1699998466,"post_id":76588420,"comment_id":136600450,"body_markdown":"@Mar-Z did you get this working?","body":"@Mar-Z did you get this working?"}],"answers":[{"tags":[],"owner":{"account_id":19631406,"reputation":11,"user_id":14369649,"display_name":"Abdulaziz Pulatjonov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695648041,"creation_date":1695648041,"answer_id":77173021,"question_id":76588420,"body_markdown":"to make this work you should include @Indexed annotation for the field you are searching by when declaring entity:\r\n    \r\n    import org.springframework.data.redis.core.index.Indexed;\r\n\r\n    @Data\r\n        @AllArgsConstructor\r\n        @NoArgsConstructor\r\n        @Getter\r\n        @Setter\r\n        @ToString\r\n        @RedisHash(&quot;Applications&quot;)\r\n        public class Applications implements Serializable {\r\n            private String appName;\r\n            @Indexed\r\n            private String appType;\r\n            @Id\r\n            private String appId;\r\n        }\r\n\r\nmake sure it is imported from as org.springframework.data.redis.core.index.Indexed","title":"Spring Data Redis. JPA Repository findBy is not working","body":"<p>to make this work you should include @Indexed annotation for the field you are searching by when declaring entity:</p>\n<pre><code>import org.springframework.data.redis.core.index.Indexed;\n\n@Data\n    @AllArgsConstructor\n    @NoArgsConstructor\n    @Getter\n    @Setter\n    @ToString\n    @RedisHash(&quot;Applications&quot;)\n    public class Applications implements Serializable {\n        private String appName;\n        @Indexed\n        private String appType;\n        @Id\n        private String appId;\n    }\n</code></pre>\n<p>make sure it is imported from as org.springframework.data.redis.core.index.Indexed</p>\n"}],"owner":{"account_id":28924384,"reputation":1,"user_id":22154602,"display_name":"Biljana"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":206,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695648041,"creation_date":1688123727,"question_id":76588420,"body_markdown":"I&#39;m using `spring-data-redis` 2.7.5 version. \r\n\r\nObject declaration:\r\n```\r\n   @Data\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Getter\r\n    @Setter\r\n    @ToString\r\n    @RedisHash(&quot;Applications&quot;)\r\n    public class Applications implements Serializable {\r\n        private String appName;\r\n        private String appType;\r\n        @Id\r\n        private String appId;\r\n    }\r\n```\r\nController method:\r\n```\r\n    @GetMapping(&quot;/filterAppsByAppsTypes&quot;)\r\n        public List&lt;Applications&gt; filterAppsByAppsTypes(@RequestParam String appType) {\r\n            List&lt;Applications&gt; apps = applicationRepository.findByAppType(appType);\r\n        return apps;\r\n    }\r\n```\r\nRepository:\r\n\r\n```\r\n    @Repository\r\n    public interface ApplicationsRepository extends CrudRepository&lt;Applications, String&gt; {\r\n        List&lt;Applications&gt; findByAppType(String appType);\r\n    }\r\n```\r\nI have objects with the value I want to filter, but it is returning an empty array.\r\nI tried adding `@Indexed` annotation but it does not fix it.","title":"Spring Data Redis. JPA Repository findBy is not working","body":"<p>I'm using <code>spring-data-redis</code> 2.7.5 version.</p>\n<p>Object declaration:</p>\n<pre><code>   @Data\n    @AllArgsConstructor\n    @NoArgsConstructor\n    @Getter\n    @Setter\n    @ToString\n    @RedisHash(&quot;Applications&quot;)\n    public class Applications implements Serializable {\n        private String appName;\n        private String appType;\n        @Id\n        private String appId;\n    }\n</code></pre>\n<p>Controller method:</p>\n<pre><code>    @GetMapping(&quot;/filterAppsByAppsTypes&quot;)\n        public List&lt;Applications&gt; filterAppsByAppsTypes(@RequestParam String appType) {\n            List&lt;Applications&gt; apps = applicationRepository.findByAppType(appType);\n        return apps;\n    }\n</code></pre>\n<p>Repository:</p>\n<pre><code>    @Repository\n    public interface ApplicationsRepository extends CrudRepository&lt;Applications, String&gt; {\n        List&lt;Applications&gt; findByAppType(String appType);\n    }\n</code></pre>\n<p>I have objects with the value I want to filter, but it is returning an empty array.\nI tried adding <code>@Indexed</code> annotation but it does not fix it.</p>\n"},{"tags":["java","multithreading","synchronized","memory-barriers","memory-visibility"],"comments":[{"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"score":1,"creation_date":1695643571,"post_id":77172465,"comment_id":136047512,"body_markdown":"Why an empty `synchronized` block?","body":"Why an empty <code>synchronized</code> block?"},{"owner":{"account_id":12947592,"reputation":309,"user_id":9361451,"display_name":"Anonemous"},"score":0,"creation_date":1695643679,"post_id":77172465,"comment_id":136047531,"body_markdown":"@MauricePerry If without the empty synchronized block, the code will always run and never exits.","body":"@MauricePerry If without the empty synchronized block, the code will always run and never exits."},{"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"score":0,"creation_date":1695643704,"post_id":77172465,"comment_id":136047540,"body_markdown":"It seams your goal is to protect `i`. so I you should put the test inside the `synchronized` block.","body":"It seams your goal is to protect <code>i</code>. so I you should put the test inside the <code>synchronized</code> block."},{"owner":{"account_id":12947592,"reputation":309,"user_id":9361451,"display_name":"Anonemous"},"score":0,"creation_date":1695643761,"post_id":77172465,"comment_id":136047551,"body_markdown":"@MauricePerry I want to know why the empty `synchronized ` make the code exits?","body":"@MauricePerry I want to know why the empty <code>synchronized </code> make the code exits?"},{"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"score":0,"creation_date":1695643981,"post_id":77172465,"comment_id":136047591,"body_markdown":"The `synchronized` block in addition to ensuring mutual exclusions, also ensures that the processor cache is flushed so that changes in the cache are seen by other cores/processors.","body":"The <code>synchronized</code> block in addition to ensuring mutual exclusions, also ensures that the processor cache is flushed so that changes in the cache are seen by other cores/processors."},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1695644295,"post_id":77172465,"comment_id":136047665,"body_markdown":"AFAIK it&#39;s a side-effect and not guaranteed. If `i` is not declared `volatile` then there is no guarantee that the observed value of `i` inside the loop ever changes. There are many situations where (with the current OpenJDK implementation) it *will* become visible, but those aren&#39;t guaranteed by the spec.","body":"AFAIK it&#39;s a side-effect and not guaranteed. If <code>i</code> is not declared <code>volatile</code> then there is no guarantee that the observed value of <code>i</code> inside the loop ever changes. There are many situations where (with the current OpenJDK implementation) it <i>will</i> become visible, but those aren&#39;t guaranteed by the spec."},{"owner":{"account_id":12947592,"reputation":309,"user_id":9361451,"display_name":"Anonemous"},"score":0,"creation_date":1695644404,"post_id":77172465,"comment_id":136047689,"body_markdown":"@JoachimSauer That&#39;s also what I thought, but I am not sure, so want to discuss about this.","body":"@JoachimSauer That&#39;s also what I thought, but I am not sure, so want to discuss about this."},{"owner":{"account_id":12947592,"reputation":309,"user_id":9361451,"display_name":"Anonemous"},"score":0,"creation_date":1695647998,"post_id":77172465,"comment_id":136048488,"body_markdown":"I edited the question and added one further case.","body":"I edited the question and added one further case."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1695657093,"post_id":77172465,"comment_id":136050614,"body_markdown":"There is nothing specific about the synchronization here that would ensure the text _&quot;END&quot;_ is printed.  You would need to synchronize the _i_ accessors, use an _[AtomicInteger](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/atomic/AtomicInteger.html)_ object, or the _[volatile](https://docs.oracle.com/javase/tutorial/essential/concurrency/sync.html)_ modifier.","body":"There is nothing specific about the synchronization here that would ensure the text <i>&quot;END&quot;</i> is printed.  You would need to synchronize the <i>i</i> accessors, use an <i><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/atomic/AtomicInteger.html\" rel=\"nofollow noreferrer\">AtomicInteger</a></i> object, or the <i><a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/sync.html\" rel=\"nofollow noreferrer\">volatile</a></i> modifier."},{"owner":{"account_id":12947592,"reputation":309,"user_id":9361451,"display_name":"Anonemous"},"score":0,"creation_date":1695695957,"post_id":77172465,"comment_id":136055487,"body_markdown":"@Reilas What about the latter &#39;added one line&#39; version?","body":"@Reilas What about the latter &#39;added one line&#39; version?"}],"answers":[{"comments":[{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1695644597,"post_id":77172577,"comment_id":136047731,"body_markdown":"Great detailed answer as always. Only minor nit: I&#39;d be a bit more explicit what &quot;the answer is no&quot; means, as that depends very much on the specific phrasing of the question and sometimes questions are unclear about which way around they phrase it (or use different phrasing throughout the question).","body":"Great detailed answer as always. Only minor nit: I&#39;d be a bit more explicit what &quot;the answer is no&quot; means, as that depends very much on the specific phrasing of the question and sometimes questions are unclear about which way around they phrase it (or use different phrasing throughout the question)."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1695646283,"post_id":77172577,"comment_id":136048084,"body_markdown":"@JoachimSauer I&#39;ve qualified my `no` a little bit, you know, by changing it to a &#39;yes&#39; - between eyeballs and brain neurons the question flipped into &#39;is this code problematic?&#39;, but the actual question is: &quot;Is it guaranteed to print &#39;END&#39;&quot;. Which it is, for this very specific code, the way I understand the JMM, yes, that is a guarantee. For an encore I&#39;ve added an addendum that delves into whether the empty-ness of the `synchronized`  block is an issue. It isn&#39;t.","body":"@JoachimSauer I&#39;ve qualified my <code>no</code> a little bit, you know, by changing it to a &#39;yes&#39; - between eyeballs and brain neurons the question flipped into &#39;is this code problematic?&#39;, but the actual question is: &quot;Is it guaranteed to print &#39;END&#39;&quot;. Which it is, for this very specific code, the way I understand the JMM, yes, that is a guarantee. For an encore I&#39;ve added an addendum that delves into whether the empty-ness of the <code>synchronized</code>  block is an issue. It isn&#39;t."},{"owner":{"account_id":12947592,"reputation":309,"user_id":9361451,"display_name":"Anonemous"},"score":0,"creation_date":1695647284,"post_id":77172577,"comment_id":136048308,"body_markdown":"Thanks for the great answers, just one more question, what if we add one line inside the empty `synchronized`, it becomes to: `synchronized (Visibility.class){ int x = i;}`, now is it be guaranteed by the JVM that it will always print &#39;END&#39;?","body":"Thanks for the great answers, just one more question, what if we add one line inside the empty <code>synchronized</code>, it becomes to: <code>synchronized (Visibility.class){ int x = i;}</code>, now is it be guaranteed by the JVM that it will always print &#39;END&#39;?"},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1695648090,"post_id":77172577,"comment_id":136048520,"body_markdown":"@Anonemous I edited the answer in a rather crucial way - it was guaranteed to print END always. With &#39;no&#39;, I meant: &quot;No, this code doesn&#39;t have JMM problems&quot;.","body":"@Anonemous I edited the answer in a rather crucial way - it was guaranteed to print END always. With &#39;no&#39;, I meant: &quot;No, this code doesn&#39;t have JMM problems&quot;."}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":4,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1695646560,"creation_date":1695644376,"answer_id":77172577,"question_id":77172465,"body_markdown":"As per [JLS &#167;17.4.5: Happens-before order](https://docs.oracle.com/javase/specs/jls/se8/html/jls-17.html#jls-17.4.5):\r\n\r\n&gt; If hb(x, y) and hb(y, z), then hb(x, z).\r\n\r\nIn other words, HB (Happens-before) is transitive. And HB is the primary player in observability: It is not possible to observe state in line Y as it was before line X executed if `hb(x, y)` - and that&#39;s exactly what you are trying to do (or rather, prevent from happening): You are interested in whether line Y (`if (i == 1)`) can observe state as it was prior to line X (`i = 1`, in the synchronized block at the bottom of the snippet).\r\n\r\nGiven that transitivity rule, the answer for your specific snippet is &#39;yes&#39; - you&#39;re guaranteed that it prints `END`. Always take care in extrapolating an analysis for one particular snippet to a more general case - this stuff doesn&#39;t simplify easily, you have to apply happens-before analysis every time (or, more usually, avoid interactions between threads by way of field writes as much as you can):\r\n\r\n* `hb(exiting a synchronized block, entering it)` is a thing. different threads acquiring the monitor is an ordered affair, and there are HB relationships between these. Hence, there&#39;s an hb relationship between the second-to-last `}` (exiting the block) &lt;sup&gt;1&lt;/sup&gt; and the zero-statements `synchronized` block in the thread.\r\n\r\n* If the inner thread somehow runs afterwards (weird, as that would mean it has taken _more_ than 1 second to even start, but technically a JVM makes no timing guarantees, so possible in theory), `i` is already 1. It&#39;s possible this change has not been &#39;synced&#39; yet, except then the while loop hits that no-content `synchronized` block which then established hb, and thus forces visibility of `i` being `1`.\r\n* If the inner thread runs before (100% of all cases, what with that `Thread.sleep(1000)` in there, pretty much), the same logic applies eventually.\r\n* To actually add it together, we need to add the &#39;natural&#39; hb rule: Bytecode X and Y establish `hb(x, y)` if X and Y are executed by the same thread and Y comes after X in program order. i.e. given: `y = 5; System.out.println(y)` you can&#39;t observe y being as it was before `y = 5;` ran - this is the &#39;duh!&#39; HB rule - java would be rather useless as a language if the JVM can just reorder stuff in a single thread at will, of course. That + the transitivity rule is enough.\r\n\r\n## One technical issue here\r\n\r\nThe thread you fire up never voluntarily relinquishes which can cause some havoc (nothing in that code will &#39;sleep&#39; the CPU). You should __never__ write code that just busy-spins like this, the JVM is not particularly clear about how things work then, and it&#39;ll cause massive heat/power issues on the CPU! On a single core processor, the JVM is essentially allowed to spend all its time on that busy-wait, __forever__, and this is the one way in which you can make a JVM not print `END`, ever: Because the main thread that sets `i` to 1 __never__ gets around to it. This breaks the general point of threads. `synchronized` introduces a savepoint, so it&#39;ll eventually get pre-empted, but that can take quite a while. It can take far longer than a second on the right hardware.\r\n\r\nTrivially fixed by shoving some sort of `sleep` or `wait` in that busy-loop, or using `j.u.concurrent` locks/semaphores/etc.\r\n\r\n## But won&#39;t that empty `synchronized` block get optimized out?\r\n\r\nNo. The JLS dictates pretty much down to the byte exactly what `javac` __must__ produce. It is not allowed to optimize empty loops. It&#39;s the hotspot engine (i.e. `java.exe` - the runtime) that does things like &#39;oh, this loop has no observable effects that I&#39;m supposed to guarantee, therefore, I can optimize the whole thing away entirely&#39;, and the JMM 17.4.5 indicates it cannot do that. If a JVM impl &#39;optimizes it away&#39;, it&#39;d be buggy.\r\n\r\nWe can confirm this with `javap`:\r\n\r\n```\r\n&gt; cat Test.java\r\nclass Test {\r\n  void test() {\r\n    synchronized(this) {}\r\n  }\r\n}\r\n&gt; javac Test.java; javap -c -v Test\r\n[ ... loads of output elided ...]\r\n3: monitorenter\r\n4: aload_1\r\n5: monitorexit\r\n```\r\n\r\n`monitorenter` is bytecode for the opening brace in a `synchronized (x){}` block, and `monitorexit` is bytecode for the closing brace (or any other control flow out of one - exception throwing and `break` / `continue` / `return` also make `javac` emit `monitorexit` bytecode.\r\n\r\n## Closing note\r\n\r\nI assume the question was asked in the spirit of: Soo.. what happens here? Not in the spirit of: &quot;Is this fine to write&quot;. It&#39;s __not__ okay - other than the spinloop (never good), forcing the reader to go on a goose chase determining that HB is in fact set up to ensure this code does what you think it does, and requiring multiple details about the HB ruleset (the synchronized stuff _and_ the transitivity rule _and_ knowledge that empty sync blocks aren&#39;t optimized away) - not to mention an obvious bit of bizarro code (an empty sync block) which nevertheless does have a function here, none of that is particularly maintainable. The proper way to do this specific job is most likely to use a simple lock from `java.util.concurrent`, or at least to move the `synchronized` block to encompass all content in the `while` block. Also, locking on things code outside your direct control can acquire (and `Visibility.class` is, trivially, a global singleton) is a very bad idea: The only non-broken way to do that, is to extensively document your locking behaviour (and therefore, you&#39;re now signed up to maintain that behaviour indefinitely, or you&#39;re forced to release a major (i.e. backwards incompatible) version if you change it). Almost always you want to lock on things you control - i.e. `private final Object lock = new Object[0];` - an object that cannot possibly be referred to outside your direct control.\r\n\r\n\r\n----\r\n\r\n[1] Technically HB is a JVM affair and applies to bytecode. That closing brace, however, really does have a bytecode equivalent (most closing braces do not; that one does): It&#39;s the release of the monitor (&#39;freeing&#39; the `synchronized` lock). Which is exactly the bytecode that is HB relative to a later-ordered acquiring of that same lock object.\r\n","title":"Java memory visibility outside the synchronized lock","body":"<p>As per <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-17.html#jls-17.4.5\" rel=\"nofollow noreferrer\">JLS §17.4.5: Happens-before order</a>:</p>\n<blockquote>\n<p>If hb(x, y) and hb(y, z), then hb(x, z).</p>\n</blockquote>\n<p>In other words, HB (Happens-before) is transitive. And HB is the primary player in observability: It is not possible to observe state in line Y as it was before line X executed if <code>hb(x, y)</code> - and that's exactly what you are trying to do (or rather, prevent from happening): You are interested in whether line Y (<code>if (i == 1)</code>) can observe state as it was prior to line X (<code>i = 1</code>, in the synchronized block at the bottom of the snippet).</p>\n<p>Given that transitivity rule, the answer for your specific snippet is 'yes' - you're guaranteed that it prints <code>END</code>. Always take care in extrapolating an analysis for one particular snippet to a more general case - this stuff doesn't simplify easily, you have to apply happens-before analysis every time (or, more usually, avoid interactions between threads by way of field writes as much as you can):</p>\n<ul>\n<li><p><code>hb(exiting a synchronized block, entering it)</code> is a thing. different threads acquiring the monitor is an ordered affair, and there are HB relationships between these. Hence, there's an hb relationship between the second-to-last <code>}</code> (exiting the block) <sup>1</sup> and the zero-statements <code>synchronized</code> block in the thread.</p>\n</li>\n<li><p>If the inner thread somehow runs afterwards (weird, as that would mean it has taken <em>more</em> than 1 second to even start, but technically a JVM makes no timing guarantees, so possible in theory), <code>i</code> is already 1. It's possible this change has not been 'synced' yet, except then the while loop hits that no-content <code>synchronized</code> block which then established hb, and thus forces visibility of <code>i</code> being <code>1</code>.</p>\n</li>\n<li><p>If the inner thread runs before (100% of all cases, what with that <code>Thread.sleep(1000)</code> in there, pretty much), the same logic applies eventually.</p>\n</li>\n<li><p>To actually add it together, we need to add the 'natural' hb rule: Bytecode X and Y establish <code>hb(x, y)</code> if X and Y are executed by the same thread and Y comes after X in program order. i.e. given: <code>y = 5; System.out.println(y)</code> you can't observe y being as it was before <code>y = 5;</code> ran - this is the 'duh!' HB rule - java would be rather useless as a language if the JVM can just reorder stuff in a single thread at will, of course. That + the transitivity rule is enough.</p>\n</li>\n</ul>\n<h2>One technical issue here</h2>\n<p>The thread you fire up never voluntarily relinquishes which can cause some havoc (nothing in that code will 'sleep' the CPU). You should <strong>never</strong> write code that just busy-spins like this, the JVM is not particularly clear about how things work then, and it'll cause massive heat/power issues on the CPU! On a single core processor, the JVM is essentially allowed to spend all its time on that busy-wait, <strong>forever</strong>, and this is the one way in which you can make a JVM not print <code>END</code>, ever: Because the main thread that sets <code>i</code> to 1 <strong>never</strong> gets around to it. This breaks the general point of threads. <code>synchronized</code> introduces a savepoint, so it'll eventually get pre-empted, but that can take quite a while. It can take far longer than a second on the right hardware.</p>\n<p>Trivially fixed by shoving some sort of <code>sleep</code> or <code>wait</code> in that busy-loop, or using <code>j.u.concurrent</code> locks/semaphores/etc.</p>\n<h2>But won't that empty <code>synchronized</code> block get optimized out?</h2>\n<p>No. The JLS dictates pretty much down to the byte exactly what <code>javac</code> <strong>must</strong> produce. It is not allowed to optimize empty loops. It's the hotspot engine (i.e. <code>java.exe</code> - the runtime) that does things like 'oh, this loop has no observable effects that I'm supposed to guarantee, therefore, I can optimize the whole thing away entirely', and the JMM 17.4.5 indicates it cannot do that. If a JVM impl 'optimizes it away', it'd be buggy.</p>\n<p>We can confirm this with <code>javap</code>:</p>\n<pre><code>&gt; cat Test.java\nclass Test {\n  void test() {\n    synchronized(this) {}\n  }\n}\n&gt; javac Test.java; javap -c -v Test\n[ ... loads of output elided ...]\n3: monitorenter\n4: aload_1\n5: monitorexit\n</code></pre>\n<p><code>monitorenter</code> is bytecode for the opening brace in a <code>synchronized (x){}</code> block, and <code>monitorexit</code> is bytecode for the closing brace (or any other control flow out of one - exception throwing and <code>break</code> / <code>continue</code> / <code>return</code> also make <code>javac</code> emit <code>monitorexit</code> bytecode.</p>\n<h2>Closing note</h2>\n<p>I assume the question was asked in the spirit of: Soo.. what happens here? Not in the spirit of: &quot;Is this fine to write&quot;. It's <strong>not</strong> okay - other than the spinloop (never good), forcing the reader to go on a goose chase determining that HB is in fact set up to ensure this code does what you think it does, and requiring multiple details about the HB ruleset (the synchronized stuff <em>and</em> the transitivity rule <em>and</em> knowledge that empty sync blocks aren't optimized away) - not to mention an obvious bit of bizarro code (an empty sync block) which nevertheless does have a function here, none of that is particularly maintainable. The proper way to do this specific job is most likely to use a simple lock from <code>java.util.concurrent</code>, or at least to move the <code>synchronized</code> block to encompass all content in the <code>while</code> block. Also, locking on things code outside your direct control can acquire (and <code>Visibility.class</code> is, trivially, a global singleton) is a very bad idea: The only non-broken way to do that, is to extensively document your locking behaviour (and therefore, you're now signed up to maintain that behaviour indefinitely, or you're forced to release a major (i.e. backwards incompatible) version if you change it). Almost always you want to lock on things you control - i.e. <code>private final Object lock = new Object[0];</code> - an object that cannot possibly be referred to outside your direct control.</p>\n<hr />\n<p>[1] Technically HB is a JVM affair and applies to bytecode. That closing brace, however, really does have a bytecode equivalent (most closing braces do not; that one does): It's the release of the monitor ('freeing' the <code>synchronized</code> lock). Which is exactly the bytecode that is HB relative to a later-ordered acquiring of that same lock object.</p>\n"}],"owner":{"account_id":12947592,"reputation":309,"user_id":9361451,"display_name":"Anonemous"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77172577,"answer_count":1,"score":0,"last_activity_date":1695647908,"creation_date":1695643279,"question_id":77172465,"body_markdown":"Does the synchronized lock guarantee the following code always print &#39;END&#39;?\r\n```\r\npublic class Visibility {\r\n\r\n    private static int i = 0;\r\n\r\n    public static void main(String[] args) throws InterruptedException {\r\n\r\n        Thread thread_1 = new Thread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                System.out.println(i);\r\n                while (true) {\r\n                    if (i == 1) {\r\n                        System.out.println(&quot;END&quot;);\r\n                        return;\r\n                    }\r\n                    synchronized (Visibility.class){}\r\n                }\r\n            }\r\n        });\r\n        thread_1.start();\r\n        Thread.sleep(1000);\r\n        synchronized (Visibility.class) {\r\n            i = 1;\r\n        }\r\n    }\r\n}\r\n\r\n```\r\nI run it on my laptop, it always print &#39;END&#39;, but I am wondering is it be guaranteed by the JVM that this code will always print &#39;END&#39;? \r\n\r\nFurther, If we add one line inside the empty `synchronized` block, and it becomes to:\r\n```\r\npublic class Visibility {\r\n\r\n    private static int i = 0;\r\n\r\n    public static void main(String[] args) throws InterruptedException {\r\n\r\n        Thread thread_1 = new Thread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                System.out.println(i);\r\n                while (true) {\r\n                    if (i == 1) {\r\n                        System.out.println(&quot;END&quot;);\r\n                        return;\r\n                    }\r\n                    synchronized (Visibility.class){\r\n                        int x = i; // Added this line.\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        thread_1.start();\r\n        Thread.sleep(1000);\r\n        synchronized (Visibility.class) {\r\n            i = 1;\r\n        }\r\n    }\r\n}\r\n\r\n```\r\nNow is it be guaranteed by the JVM that this code will always print &#39;END&#39;?","title":"Java memory visibility outside the synchronized lock","body":"<p>Does the synchronized lock guarantee the following code always print 'END'?</p>\n<pre><code>public class Visibility {\n\n    private static int i = 0;\n\n    public static void main(String[] args) throws InterruptedException {\n\n        Thread thread_1 = new Thread(new Runnable() {\n            @Override\n            public void run() {\n                System.out.println(i);\n                while (true) {\n                    if (i == 1) {\n                        System.out.println(&quot;END&quot;);\n                        return;\n                    }\n                    synchronized (Visibility.class){}\n                }\n            }\n        });\n        thread_1.start();\n        Thread.sleep(1000);\n        synchronized (Visibility.class) {\n            i = 1;\n        }\n    }\n}\n\n</code></pre>\n<p>I run it on my laptop, it always print 'END', but I am wondering is it be guaranteed by the JVM that this code will always print 'END'?</p>\n<p>Further, If we add one line inside the empty <code>synchronized</code> block, and it becomes to:</p>\n<pre><code>public class Visibility {\n\n    private static int i = 0;\n\n    public static void main(String[] args) throws InterruptedException {\n\n        Thread thread_1 = new Thread(new Runnable() {\n            @Override\n            public void run() {\n                System.out.println(i);\n                while (true) {\n                    if (i == 1) {\n                        System.out.println(&quot;END&quot;);\n                        return;\n                    }\n                    synchronized (Visibility.class){\n                        int x = i; // Added this line.\n                    }\n                }\n            }\n        });\n        thread_1.start();\n        Thread.sleep(1000);\n        synchronized (Visibility.class) {\n            i = 1;\n        }\n    }\n}\n\n</code></pre>\n<p>Now is it be guaranteed by the JVM that this code will always print 'END'?</p>\n"},{"tags":["java","unit-testing","dependency-injection","dependencies","automated-tests"],"answers":[{"tags":[],"owner":{"account_id":4764104,"reputation":9906,"user_id":3850730,"accept_rate":83,"display_name":"Sabir Khan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1475663876,"creation_date":1475663876,"answer_id":39871711,"question_id":39871400,"body_markdown":"Testing `Dependency` shouldn&#39;t be part of your unit tests of class `SomeClass` i.e. don&#39;t test method calls of `Dependency` for correctness and accuracy.\r\n\r\nYou can check parameter values passed to methods of `Dependency` if those values are local to class `SomeClass` i.e. created and managed by `SomeClass` otherwise perform normal input check assertions. \r\n\r\n","title":"Verify calls to dependency in unit test?","body":"<p>Testing <code>Dependency</code> shouldn't be part of your unit tests of class <code>SomeClass</code> i.e. don't test method calls of <code>Dependency</code> for correctness and accuracy.</p>\n\n<p>You can check parameter values passed to methods of <code>Dependency</code> if those values are local to class <code>SomeClass</code> i.e. created and managed by <code>SomeClass</code> otherwise perform normal input check assertions. </p>\n"},{"tags":[],"owner":{"account_id":5031641,"reputation":3025,"user_id":4041633,"accept_rate":100,"display_name":"Thomas Stets"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1475665013,"creation_date":1475665013,"answer_id":39872115,"question_id":39871400,"body_markdown":"That really depends on the situation, and is highly opinion-based...\r\n\r\nI would say, if the calls to the dependency just helps your method to do its job, don&#39;t test the call. Just test whether your method does its job.\r\n\r\nIf the call to the dependency is important, like when the call to the dependency is an important part of the functionality, or even the whole reason for the execution of your method, you should consider testing that the dependency is called correctly.\r\n\r\nAsk yourself: do you really care that the dependency is called, and called correctly, or do you just care that your method under test does its job?\r\n\r\nOr to look at it from a different perspective: Is the dependency just a part of your class, or is it an independent Object your class is interacting with?\r\n\r\nI know, this is rather ambiguous, but I hope you get the idea.","title":"Verify calls to dependency in unit test?","body":"<p>That really depends on the situation, and is highly opinion-based...</p>\n\n<p>I would say, if the calls to the dependency just helps your method to do its job, don't test the call. Just test whether your method does its job.</p>\n\n<p>If the call to the dependency is important, like when the call to the dependency is an important part of the functionality, or even the whole reason for the execution of your method, you should consider testing that the dependency is called correctly.</p>\n\n<p>Ask yourself: do you really care that the dependency is called, and called correctly, or do you just care that your method under test does its job?</p>\n\n<p>Or to look at it from a different perspective: Is the dependency just a part of your class, or is it an independent Object your class is interacting with?</p>\n\n<p>I know, this is rather ambiguous, but I hope you get the idea.</p>\n"},{"tags":[],"owner":{"account_id":925311,"reputation":36,"user_id":6925056,"display_name":"Rafał Krajnik"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1475666993,"creation_date":1475666993,"answer_id":39872786,"question_id":39871400,"body_markdown":"I would say that if dependency is invoked then you should have at least one test case to check if it is called. If you don&#39;t want to cover this case, that means (for me) you don&#39;t need to call it anyway. This is very important when you have any conditional statements like if/else/switch. Can you imagine that just by mistake you removed this line of code\r\n\r\n     dep.doSomethingElse(processed);\r\nWithout checking if dependency was invoked you will even not notice that you removed it.\r\n\r\nThe test can looks like:\r\n\r\n    import static org.fest.assertions.Assertions.assertThat;\r\n    \r\n    import org.junit.Test;\r\n    import org.junit.runner.RunWith;\r\n    import org.mockito.ArgumentCaptor;\r\n    import org.mockito.Captor;\r\n    import org.mockito.InjectMocks;\r\n    import org.mockito.Mock;\r\n    import org.mockito.Mockito;\r\n    import org.mockito.runners.MockitoJUnitRunner;\r\n    \r\n    @RunWith(MockitoJUnitRunner.class)\r\n    public class SomeClassTest {\r\n    \r\n      @Mock\r\n      private Dependency dependency;\r\n    \r\n      @InjectMocks\r\n      private SomeClass someClass;\r\n    \r\n      @Captor\r\n      private ArgumentCaptor&lt;String&gt; argumentCaptor;\r\n    \r\n      @Test\r\n      public void shouldCallDependency() throws Exception {\r\n        //given\r\n        String arg = &quot;arg&quot;;\r\n    \r\n        //when\r\n        someClass.doSomething(arg);\r\n    \r\n        //then\r\n        Mockito.verify(dependency).doSomethingElse(argumentCaptor.capture());\r\n        assertThat(argumentCaptor.getValue()).isEqualTo(&quot;processed&quot;);\r\n      }\r\n    \r\n    }","title":"Verify calls to dependency in unit test?","body":"<p>I would say that if dependency is invoked then you should have at least one test case to check if it is called. If you don't want to cover this case, that means (for me) you don't need to call it anyway. This is very important when you have any conditional statements like if/else/switch. Can you imagine that just by mistake you removed this line of code</p>\n\n<pre><code> dep.doSomethingElse(processed);\n</code></pre>\n\n<p>Without checking if dependency was invoked you will even not notice that you removed it.</p>\n\n<p>The test can looks like:</p>\n\n<pre><code>import static org.fest.assertions.Assertions.assertThat;\n\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.mockito.ArgumentCaptor;\nimport org.mockito.Captor;\nimport org.mockito.InjectMocks;\nimport org.mockito.Mock;\nimport org.mockito.Mockito;\nimport org.mockito.runners.MockitoJUnitRunner;\n\n@RunWith(MockitoJUnitRunner.class)\npublic class SomeClassTest {\n\n  @Mock\n  private Dependency dependency;\n\n  @InjectMocks\n  private SomeClass someClass;\n\n  @Captor\n  private ArgumentCaptor&lt;String&gt; argumentCaptor;\n\n  @Test\n  public void shouldCallDependency() throws Exception {\n    //given\n    String arg = \"arg\";\n\n    //when\n    someClass.doSomething(arg);\n\n    //then\n    Mockito.verify(dependency).doSomethingElse(argumentCaptor.capture());\n    assertThat(argumentCaptor.getValue()).isEqualTo(\"processed\");\n  }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5745825,"reputation":11553,"user_id":4537090,"accept_rate":79,"display_name":"WesternGun"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695647592,"creation_date":1695647592,"answer_id":77172966,"question_id":39871400,"body_markdown":"I think so. You should capture the args. I think it&#39;s worth checking you interacted with the dependency, and also *how* you did it. ","title":"Verify calls to dependency in unit test?","body":"<p>I think so. You should capture the args. I think it's worth checking you interacted with the dependency, and also <em>how</em> you did it.</p>\n"}],"owner":{"account_id":3845303,"reputation":565,"user_id":3187049,"accept_rate":91,"display_name":"flxh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2318,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":39872786,"answer_count":4,"score":5,"last_activity_date":1695647592,"creation_date":1475662923,"question_id":39871400,"body_markdown":"For this following class I want to write a unit test:\r\n\r\n    public class SomeClass {\r\n    \r\n        private Dependency dependency;\r\n\r\n        public SomeClass(Dependency dep){\r\n            this.dependency = dep;\r\n        }\r\n    \r\n        private String processString(String s){\r\n            /*\r\n            edit the string and return\r\n             */\r\n        }\r\n    \r\n        public void doSomething(String arg){\r\n        \r\n            String processed = processString(arg);\r\n        \r\n            dep.doSomethingElse(processed);\r\n        }\r\n    }\r\n\r\n\r\nAt first I would stub all the methods `SomeClass` calls on `Dependency` in order to test my class in isolation. \r\nBut the question I couldn&#39;t yet find an answer to is :\r\n\r\nShould I check *how* `SomeClass` calls methods of `Dependency` e.g. what parameters are passed etc. ? \r\nOf course this is a pretty trivial example, but I want to know if this should be part of a unit test in general.\r\n\r\nEdit: In my case `Dependency` would be third party api library which I dont control. So I would consider it important what parameters are passed to these functions however I&#39;m not sure this should be part of a unit test.","title":"Verify calls to dependency in unit test?","body":"<p>For this following class I want to write a unit test:</p>\n\n<pre><code>public class SomeClass {\n\n    private Dependency dependency;\n\n    public SomeClass(Dependency dep){\n        this.dependency = dep;\n    }\n\n    private String processString(String s){\n        /*\n        edit the string and return\n         */\n    }\n\n    public void doSomething(String arg){\n\n        String processed = processString(arg);\n\n        dep.doSomethingElse(processed);\n    }\n}\n</code></pre>\n\n<p>At first I would stub all the methods <code>SomeClass</code> calls on <code>Dependency</code> in order to test my class in isolation. \nBut the question I couldn't yet find an answer to is :</p>\n\n<p>Should I check <em>how</em> <code>SomeClass</code> calls methods of <code>Dependency</code> e.g. what parameters are passed etc. ? \nOf course this is a pretty trivial example, but I want to know if this should be part of a unit test in general.</p>\n\n<p>Edit: In my case <code>Dependency</code> would be third party api library which I dont control. So I would consider it important what parameters are passed to these functions however I'm not sure this should be part of a unit test.</p>\n"},{"tags":["windows","java"],"comments":[{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":1,"creation_date":1695646189,"post_id":77172758,"comment_id":136048055,"body_markdown":"You mean like with getFileAttributeView and readAttributes? I’d try searching the web for something like “Java get windows file attributes” or something because there seems to be a fair amount of information available.","body":"You mean like with getFileAttributeView and readAttributes? I’d try searching the web for something like “Java get windows file attributes” or something because there seems to be a fair amount of information available."},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1695646222,"post_id":77172758,"comment_id":136048064,"body_markdown":"Tangential: Why write a platform-specific backup app in Java? Seems off.","body":"Tangential: Why write a platform-specific backup app in Java? Seems off."},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1695646491,"post_id":77172758,"comment_id":136048131,"body_markdown":"@DaveNewton Just because Java *supports* multi-platform doesn&#39;t mean you should *only* use it for multi-platform purposes","body":"@DaveNewton Just because Java <i>supports</i> multi-platform doesn&#39;t mean you should <i>only</i> use it for multi-platform purposes"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1695647977,"post_id":77172758,"comment_id":136048483,"body_markdown":"[File Attributes List](http://www.foldermatch.com/helpfile/file-attributes-list.htm)","body":"<a href=\"http://www.foldermatch.com/helpfile/file-attributes-list.htm\" rel=\"nofollow noreferrer\">File Attributes List</a>"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":2,"creation_date":1695648953,"post_id":77172758,"comment_id":136048704,"body_markdown":"Can&#39;t you just use the `COPY_ATTRIBUTES` option when calling method [copy](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/nio/file/Files.html#copy(java.nio.file.Path,java.nio.file.Path,java.nio.file.CopyOption...))?","body":"Can&#39;t you just use the <code>COPY_ATTRIBUTES</code> option when calling method <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/nio/file/Files.html#copy(java.nio.file.Path,java.nio.file.Path,java.nio.file.CopyOption...)\" rel=\"nofollow noreferrer\">copy</a>?"},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1695650582,"post_id":77172758,"comment_id":136049096,"body_markdown":"@Jorn I didn’t say otherwise. It still doesn’t make sense in this case, even not knowing an MS platform. YMMV &#129335;&#127996;‍♂️","body":"@Jorn I didn’t say otherwise. It still doesn’t make sense in this case, even not knowing an MS platform. YMMV 🤷🏼‍♂️"}],"answers":[{"tags":[],"owner":{"account_id":370994,"reputation":35154,"user_id":719263,"accept_rate":100,"display_name":"Jean-Baptiste Yun&#232;s"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695647472,"creation_date":1695647472,"answer_id":77172949,"question_id":77172758,"body_markdown":"Since Java 7 you have platform specific attributes.\r\nSee https://docs.oracle.com/javase/8/docs/api/java/nio/file/attribute/DosFileAttributes.html","title":"Getting and setting all attributes for a file in Java","body":"<p>Since Java 7 you have platform specific attributes.\nSee <a href=\"https://docs.oracle.com/javase/8/docs/api/java/nio/file/attribute/DosFileAttributes.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/nio/file/attribute/DosFileAttributes.html</a></p>\n"}],"owner":{"account_id":12938905,"reputation":107,"user_id":10753724,"display_name":"Devorious"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695647472,"creation_date":1695644153,"question_id":77172758,"body_markdown":"I made an app (**Windows only**) with which you can create a backup of a folder/file locally or to a server. I&#39;m done with the copy/restore process, but when it comes to restoring I have a small technical problem. If the file in originally hidden, then this is easy as you can call **Files.setAttribute(file.toPath(), &quot;dos:hidden&quot;, true);** which will make the file hidden on client side after it is created/restored, but there are files like **desktop.ini** which aren&#39;t simply hidden but are **system file hidden** and the above code will only give it the hidden status, and not system file hidden (and maybe other files with other attributes as well).\r\n\r\nThere is also `Files.getAttribute()` but as the name suggests it only returns the attribute value for a single attribute, and not all of them to easily be able to do something like `Files.setAttributes(file.toPath(), Files.getAttributes(file.toPath()));`.\r\n\r\nSo my question is, is there a way to get a list will all the attributes a file has and then setting them in a more dynamically way and not having to call `Files.getAttribute();` / `Files.setAttribute();` for each of them line by line?\r\n\r\nIf unfortunately there isn&#39;t one, and you do have to set them line by line, can someone give me a list with all the attributes for **Windows OS**, like there is here for example the table of pattern symbols for [DateTimeFormatter][1]?\r\n\r\nIf you have to read/set them one by one, then I can make a template class which has a function that has a `File` as parameter to read the attributes and store them in a variable (maybe an **Array**), and a second function which has the same a `File` as parameter only that this time it will set the attributes read before. Doing it like this, I can even send this template class object over the socket with all the attributes to set them after the backup file is restored on client.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html","title":"Getting and setting all attributes for a file in Java","body":"<p>I made an app (<strong>Windows only</strong>) with which you can create a backup of a folder/file locally or to a server. I'm done with the copy/restore process, but when it comes to restoring I have a small technical problem. If the file in originally hidden, then this is easy as you can call <strong>Files.setAttribute(file.toPath(), &quot;dos:hidden&quot;, true);</strong> which will make the file hidden on client side after it is created/restored, but there are files like <strong>desktop.ini</strong> which aren't simply hidden but are <strong>system file hidden</strong> and the above code will only give it the hidden status, and not system file hidden (and maybe other files with other attributes as well).</p>\n<p>There is also <code>Files.getAttribute()</code> but as the name suggests it only returns the attribute value for a single attribute, and not all of them to easily be able to do something like <code>Files.setAttributes(file.toPath(), Files.getAttributes(file.toPath()));</code>.</p>\n<p>So my question is, is there a way to get a list will all the attributes a file has and then setting them in a more dynamically way and not having to call <code>Files.getAttribute();</code> / <code>Files.setAttribute();</code> for each of them line by line?</p>\n<p>If unfortunately there isn't one, and you do have to set them line by line, can someone give me a list with all the attributes for <strong>Windows OS</strong>, like there is here for example the table of pattern symbols for <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html\" rel=\"nofollow noreferrer\">DateTimeFormatter</a>?</p>\n<p>If you have to read/set them one by one, then I can make a template class which has a function that has a <code>File</code> as parameter to read the attributes and store them in a variable (maybe an <strong>Array</strong>), and a second function which has the same a <code>File</code> as parameter only that this time it will set the attributes read before. Doing it like this, I can even send this template class object over the socket with all the attributes to set them after the backup file is restored on client.</p>\n"},{"tags":["java","spring-boot","spring-boot-starter"],"comments":[{"owner":{"account_id":307291,"reputation":1568,"user_id":618499,"display_name":"Iogui"},"score":0,"creation_date":1661479936,"post_id":73484864,"comment_id":129787915,"body_markdown":"I&#39;m also searching for info on it to start some tests. Assure you didn&#39;t forget to put the `@AutoConfiguration` annotation on the top-level of your auto-configuration classes as mentioned [here](https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.7.0-M2-Release-Notes). I think that this is mandatory for the new imports file to work.","body":"I&#39;m also searching for info on it to start some tests. Assure you didn&#39;t forget to put the <code>@AutoConfiguration</code> annotation on the top-level of your auto-configuration classes as mentioned <a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.7.0-M2-Release-Notes\" rel=\"nofollow noreferrer\">here</a>. I think that this is mandatory for the new imports file to work."},{"owner":{"account_id":5279068,"reputation":895,"user_id":4215032,"display_name":"Pp88"},"score":0,"creation_date":1661496002,"post_id":73484864,"comment_id":129790312,"body_markdown":"I’ve tryed everything.  `@Configuration\\@AutoConfoguration` , copiy the dependency in the pom of `spring-boot-starter-actuator/auto configure`, refactor the package of the configuration class with autoconfiguration in it. Nothing worked","body":"I’ve tryed everything.  <code>@Configuration\\@AutoConfoguration</code> , copiy the dependency in the pom of <code>spring-boot-starter-actuator&#47;auto configure</code>, refactor the package of the configuration class with autoconfiguration in it. Nothing worked"},{"owner":{"account_id":5279068,"reputation":895,"user_id":4215032,"display_name":"Pp88"},"score":0,"creation_date":1661506137,"post_id":73484864,"comment_id":129793467,"body_markdown":"Tryed also to remove all annotation from `ExampleAutoConfiguration` leaving only `@AutoCOnfiguration` and declaring a single bean, still the configuration is not loaded","body":"Tryed also to remove all annotation from <code>ExampleAutoConfiguration</code> leaving only <code>@AutoCOnfiguration</code> and declaring a single bean, still the configuration is not loaded"},{"owner":{"account_id":307291,"reputation":1568,"user_id":618499,"display_name":"Iogui"},"score":0,"creation_date":1661616097,"post_id":73484864,"comment_id":129816524,"body_markdown":"I have made some tests yesterday and I was able to make it work. I will provide a sample in a github public repository but I am using kotlin with gradle and not java with maven.","body":"I have made some tests yesterday and I was able to make it work. I will provide a sample in a github public repository but I am using kotlin with gradle and not java with maven."}],"answers":[{"comments":[{"owner":{"account_id":5279068,"reputation":895,"user_id":4215032,"display_name":"Pp88"},"score":1,"creation_date":1661841224,"post_id":73537350,"comment_id":129860342,"body_markdown":"I’ve not access to my laptop right  now. After I test I will accept don’t worry. I’m not that kind of users…","body":"I’ve not access to my laptop right  now. After I test I will accept don’t worry. I’m not that kind of users…"},{"owner":{"account_id":5279068,"reputation":895,"user_id":4215032,"display_name":"Pp88"},"score":0,"creation_date":1661841613,"post_id":73537350,"comment_id":129860463,"body_markdown":"Anyway was you able to setup a starter with entities in it? I’ve tryed to load entities in the starter with `@Import` But it doesn’t work. The only way is to use `@EntityScan` in the consumer because if also in the consumer we have entities we declare all the packages of the entities. But this breaks the autoconfiguration meaning. If it’s off tipici I will ask another question. I wonder how `spring-boot-batch-starter` Works, because it uses some tables in order to make the batch work","body":"Anyway was you able to setup a starter with entities in it? I’ve tryed to load entities in the starter with <code>@Import</code> But it doesn’t work. The only way is to use <code>@EntityScan</code> in the consumer because if also in the consumer we have entities we declare all the packages of the entities. But this breaks the autoconfiguration meaning. If it’s off tipici I will ask another question. I wonder how <code>spring-boot-batch-starter</code> Works, because it uses some tables in order to make the batch work"},{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":1,"creation_date":1661842851,"post_id":73537350,"comment_id":129860830,"body_markdown":"@Pp88 I did not start that project, no, just skimmed over it... you can ask a separate question and I&#39;l take a look","body":"@Pp88 I did not start that project, no, just skimmed over it... you can ask a separate question and I&#39;l take a look"},{"owner":{"account_id":5279068,"reputation":895,"user_id":4215032,"display_name":"Pp88"},"score":0,"creation_date":1661846004,"post_id":73537350,"comment_id":129861898,"body_markdown":"the [question](https://stackoverflow.com/questions/73538904/spring-boot-custom-starter-define-entities-in-it-without-using-entityscan-is) is here if interested @Eugene","body":"the <a href=\"https://stackoverflow.com/questions/73538904/spring-boot-custom-starter-define-entities-in-it-without-using-entityscan-is\">question</a> is here if interested @Eugene"},{"owner":{"account_id":10463908,"reputation":1211,"user_id":7785738,"display_name":"Artem Ptushkin"},"score":0,"creation_date":1684920265,"post_id":73537350,"comment_id":134586701,"body_markdown":"that&#39;s important to mention that format is different now, here is an example https://github.com/spring-projects/spring-boot/blob/main/spring-boot-project/spring-boot-autoconfigure/src/main/resources/META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports","body":"that&#39;s important to mention that format is different now, here is an example <a href=\"https://github.com/spring-projects/spring-boot/blob/main/spring-boot-project/spring-boot-autoconfigure/src/main/resources/META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-boot/blob/main/&hellip;</a>"}],"tags":[],"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"comment_count":5,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1661835766,"creation_date":1661835766,"answer_id":73537350,"question_id":73484864,"body_markdown":"Your file is called `org.springframework.boot.autoconfigure.AutoConfiguration.import`,\r\n\r\nand must be `org.springframework.boot.autoconfigure.AutoConfiguration.imports` (notice the extra `s`) at the end.  ","title":"Spring boot custom starter org.springframework.boot.autoconfigure.AutoConfiguration.import not detecting configuration classes version 2.7.2","body":"<p>Your file is called <code>org.springframework.boot.autoconfigure.AutoConfiguration.import</code>,</p>\n<p>and must be <code>org.springframework.boot.autoconfigure.AutoConfiguration.imports</code> (notice the extra <code>s</code>) at the end.</p>\n"},{"tags":[],"owner":{"account_id":29483046,"reputation":11,"user_id":22593545,"display_name":"Balraj"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695647359,"creation_date":1695326789,"answer_id":77153338,"question_id":73484864,"body_markdown":"Put the file `org.springframework.boot.autoconfigure.AutoConfiguration.imports` under `resource/META-INF/spring package-&gt;\r\n~ProjectName/src/main/resources/META-INF/spring/`\r\n\r\nThis file then can contain your custom configuration file fully qualified name\r\nlike example below\r\n`com.test.autoconfigure.MongoApplicationDBConfig`\r\n","title":"Spring boot custom starter org.springframework.boot.autoconfigure.AutoConfiguration.import not detecting configuration classes version 2.7.2","body":"<p>Put the file <code>org.springframework.boot.autoconfigure.AutoConfiguration.imports</code> under <code>resource/META-INF/spring package-&gt; ~ProjectName/src/main/resources/META-INF/spring/</code></p>\n<p>This file then can contain your custom configuration file fully qualified name\nlike example below\n<code>com.test.autoconfigure.MongoApplicationDBConfig</code></p>\n"}],"owner":{"account_id":5279068,"reputation":895,"user_id":4215032,"display_name":"Pp88"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7930,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":73537350,"answer_count":2,"score":5,"last_activity_date":1695647359,"creation_date":1661418594,"question_id":73484864,"body_markdown":"I&#39;ve read that I should not open an issue on github so I ask here. I&#39;ve digged into the code and for example `spring-boot-actuator-autoconfigure` doesn&#39;t define the `@Configuration\\@AutoConfiguration` classes inside `META-INF/spring.factories` follow the content of the file:\r\n```\r\norg.springframework.boot.diagnostics.FailureAnalyzer=\\\r\norg.springframework.boot.actuate.autoconfigure.metrics.ValidationFailureAnalyzer\r\n```\r\nI&#39;ve checked and `ValidationFailureAnalyzer` is not even annotated with `@Configuration\\@AutoConfiguration`. Then I see the file `META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports` declaring all the classes `@AutoConfiguration` follow a little extraction of the file:\r\n```\r\norg.springframework.boot.actuate.autoconfigure.amqp.RabbitHealthContributorAutoConfiguration\r\norg.springframework.boot.actuate.autoconfigure.audit.AuditAutoConfiguration\r\norg.springframework.boot.actuate.autoconfigure.audit.AuditEventsEndpointAutoConfiguration\r\norg.springframework.boot.actuate.autoconfigure.availability.AvailabilityHealthContributorAutoConfiguration\r\n...\r\n```\r\nall these classes are annotated with `@AutoConfiguration`. So far so good If we read the [docs](https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.developing-auto-configuration.locating-auto-configuration-candidates) they say that:\r\n&gt; Spring Boot checks for the presence of a META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports file within your published jar.\r\n\r\nIndeed if we import:\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n    &lt;version&gt;2.7.3&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\neverything works just fine. I&#39;m not skilled with gradle but I don&#39;t see any special dependecy in `spring-boot-actuator-starter` or `spring-boot-actuator-autoconfigure`.\r\nSearching on google I&#39;ve found a discussion [here](https://youtrack.jetbrains.com/issue/IDEA-289633) where they say:\r\n&gt; In Spring Boot v. 2.7 auto-configuration registration is moved from spring.factories to a new file named META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports.\r\nEach line contains the fully qualified name of the auto-configuration.\r\nFor backwards compatibility, entries in spring.factories will still be honored.\r\n\r\nBut honestly I&#39;ve tryed to move the configuration classes in the new file but the configuration class is not loaded. I&#39;ve writed an example [here](https://github.com/paolopiccinini/spring-boot-starter-example).\r\nMy `org.springframework.boot.autoconfigure.AutoConfiguration.imports` file:\r\n```\r\ncom.example.springbootstarterexample.configuration.Config\r\n```\r\nIf I move to the old configuration `spring.factries` everything works fine.\r\n\r\nMy `@AutoConfiguration` class:\r\n``` \r\n@AutoConfiguration(after = JpaRepositoriesAutoConfiguration.class)\r\n//@AutoConfigureAfter(JpaRepositoriesAutoConfiguration.class)\r\n@EnableJpaRepositories(basePackages = &quot;com.example.springbootstarterexample.repository&quot;)\r\n@Import({SomeServiceImpl.class, SomeEntityController.class})\r\npublic class ExampleAutoConfiguration {\r\n\r\n} \r\n```\r\nam I doing something wrong? why the `spring-boot-starter-actuator` works and my `spring-boot-starter-example` dosn&#39;t?\r\n","title":"Spring boot custom starter org.springframework.boot.autoconfigure.AutoConfiguration.import not detecting configuration classes version 2.7.2","body":"<p>I've read that I should not open an issue on github so I ask here. I've digged into the code and for example <code>spring-boot-actuator-autoconfigure</code> doesn't define the <code>@Configuration\\@AutoConfiguration</code> classes inside <code>META-INF/spring.factories</code> follow the content of the file:</p>\n<pre><code>org.springframework.boot.diagnostics.FailureAnalyzer=\\\norg.springframework.boot.actuate.autoconfigure.metrics.ValidationFailureAnalyzer\n</code></pre>\n<p>I've checked and <code>ValidationFailureAnalyzer</code> is not even annotated with <code>@Configuration\\@AutoConfiguration</code>. Then I see the file <code>META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</code> declaring all the classes <code>@AutoConfiguration</code> follow a little extraction of the file:</p>\n<pre><code>org.springframework.boot.actuate.autoconfigure.amqp.RabbitHealthContributorAutoConfiguration\norg.springframework.boot.actuate.autoconfigure.audit.AuditAutoConfiguration\norg.springframework.boot.actuate.autoconfigure.audit.AuditEventsEndpointAutoConfiguration\norg.springframework.boot.actuate.autoconfigure.availability.AvailabilityHealthContributorAutoConfiguration\n...\n</code></pre>\n<p>all these classes are annotated with <code>@AutoConfiguration</code>. So far so good If we read the <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.developing-auto-configuration.locating-auto-configuration-candidates\" rel=\"nofollow noreferrer\">docs</a> they say that:</p>\n<blockquote>\n<p>Spring Boot checks for the presence of a META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports file within your published jar.</p>\n</blockquote>\n<p>Indeed if we import:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n    &lt;version&gt;2.7.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>everything works just fine. I'm not skilled with gradle but I don't see any special dependecy in <code>spring-boot-actuator-starter</code> or <code>spring-boot-actuator-autoconfigure</code>.\nSearching on google I've found a discussion <a href=\"https://youtrack.jetbrains.com/issue/IDEA-289633\" rel=\"nofollow noreferrer\">here</a> where they say:</p>\n<blockquote>\n<p>In Spring Boot v. 2.7 auto-configuration registration is moved from spring.factories to a new file named META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports.\nEach line contains the fully qualified name of the auto-configuration.\nFor backwards compatibility, entries in spring.factories will still be honored.</p>\n</blockquote>\n<p>But honestly I've tryed to move the configuration classes in the new file but the configuration class is not loaded. I've writed an example <a href=\"https://github.com/paolopiccinini/spring-boot-starter-example\" rel=\"nofollow noreferrer\">here</a>.\nMy <code>org.springframework.boot.autoconfigure.AutoConfiguration.imports</code> file:</p>\n<pre><code>com.example.springbootstarterexample.configuration.Config\n</code></pre>\n<p>If I move to the old configuration <code>spring.factries</code> everything works fine.</p>\n<p>My <code>@AutoConfiguration</code> class:</p>\n<pre><code>@AutoConfiguration(after = JpaRepositoriesAutoConfiguration.class)\n//@AutoConfigureAfter(JpaRepositoriesAutoConfiguration.class)\n@EnableJpaRepositories(basePackages = &quot;com.example.springbootstarterexample.repository&quot;)\n@Import({SomeServiceImpl.class, SomeEntityController.class})\npublic class ExampleAutoConfiguration {\n\n} \n</code></pre>\n<p>am I doing something wrong? why the <code>spring-boot-starter-actuator</code> works and my <code>spring-boot-starter-example</code> dosn't?</p>\n"},{"tags":["java","spring-boot","swagger"],"comments":[{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1695634240,"post_id":77171422,"comment_id":136045705,"body_markdown":"just try to access swagger to `http://localhost:8080/swagger-ui/index.html` path","body":"just try to access swagger to <code>http:&#47;&#47;localhost:8080&#47;swagger-ui&#47;index.html</code> path"},{"owner":{"account_id":29528139,"reputation":31,"user_id":22629324,"display_name":"Stefano Suunto Di Blasio"},"score":0,"creation_date":1695634348,"post_id":77171422,"comment_id":136045723,"body_markdown":"@AndreiLisa i just tried, but it doesn&#39;t work. Thank you very much.","body":"@AndreiLisa i just tried, but it doesn&#39;t work. Thank you very much."},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1695634491,"post_id":77171422,"comment_id":136045752,"body_markdown":"`http://localhost:8080/api/swagger-ui/index.html` maybe it is the path to swagger ui ? just  try and tell me if it is","body":"<code>http:&#47;&#47;localhost:8080&#47;api&#47;swagger-ui&#47;index.html</code> maybe it is the path to swagger ui ? just  try and tell me if it is"},{"owner":{"account_id":29528139,"reputation":31,"user_id":22629324,"display_name":"Stefano Suunto Di Blasio"},"score":0,"creation_date":1695634578,"post_id":77171422,"comment_id":136045767,"body_markdown":"yet again, this is not working. Thank you for the effort.","body":"yet again, this is not working. Thank you for the effort."},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1695634891,"post_id":77171422,"comment_id":136045825,"body_markdown":"I am going to check your code on my machine i will came with an answer on this question.","body":"I am going to check your code on my machine i will came with an answer on this question."},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1695635624,"post_id":77171422,"comment_id":136045966,"body_markdown":"instead of `http://localhost:8080/swagger-ui/` try to access with next one path `http://127.0.0.1:8080/api/swagger-ui/index.html`","body":"instead of <code>http:&#47;&#47;localhost:8080&#47;swagger-ui&#47;</code> try to access with next one path <code>http:&#47;&#47;127.0.0.1:8080&#47;api&#47;swagger-ui&#47;index.html</code>"},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1695635749,"post_id":77171422,"comment_id":136045999,"body_markdown":"i am sure it will work, i am going to write an answer","body":"i am sure it will work, i am going to write an answer"},{"owner":{"account_id":29528139,"reputation":31,"user_id":22629324,"display_name":"Stefano Suunto Di Blasio"},"score":0,"creation_date":1695635961,"post_id":77171422,"comment_id":136046060,"body_markdown":"I tried but still doesn&#39;t work.  Thank you anyway. At this point i think that the problem is Java 17.","body":"I tried but still doesn&#39;t work.  Thank you anyway. At this point i think that the problem is Java 17."},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1695636047,"post_id":77171422,"comment_id":136046077,"body_markdown":"can you try also disable the cors and retry, add something like this into  `securityFilterChain` `http.cors(AbstractHttpConfigurer::disable);`","body":"can you try also disable the cors and retry, add something like this into  <code>securityFilterChain</code> <code>http.cors(AbstractHttpConfigurer::disable);</code>"},{"owner":{"account_id":29528139,"reputation":31,"user_id":22629324,"display_name":"Stefano Suunto Di Blasio"},"score":0,"creation_date":1695636405,"post_id":77171422,"comment_id":136046148,"body_markdown":"Still have the same problem, but i noticed that also the other endpoints required the authentication","body":"Still have the same problem, but i noticed that also the other endpoints required the authentication"},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1695636618,"post_id":77171422,"comment_id":136046192,"body_markdown":"If you will comment the security chain filter, will it work ?","body":"If you will comment the security chain filter, will it work ?"},{"owner":{"account_id":29528139,"reputation":31,"user_id":22629324,"display_name":"Stefano Suunto Di Blasio"},"score":0,"creation_date":1695636973,"post_id":77171422,"comment_id":136046277,"body_markdown":"As i thought this time it&#39;s even worse. If i try to go to `http://localhost:8080/swagger-ui/` it re-directs me to the authentication page.","body":"As i thought this time it&#39;s even worse. If i try to go to <code>http:&#47;&#47;localhost:8080&#47;swagger-ui&#47;</code> it re-directs me to the authentication page."},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1695637036,"post_id":77171422,"comment_id":136046291,"body_markdown":"Remove `.httpBasic(Customizer.withDefaults());` it is the cause","body":"Remove <code>.httpBasic(Customizer.withDefaults());</code> it is the cause"},{"owner":{"account_id":19580981,"reputation":106,"user_id":14330061,"display_name":"dauthDaert06"},"score":1,"creation_date":1695640003,"post_id":77171422,"comment_id":136046832,"body_markdown":"AFAIK springfox wasn&#39;t compatible with Spring Boot 3.X.X. I don&#39;t know if that changed over the months. When I first upgraded to 3.X.X I had to remove springfox, and I added openapi. [Here](https://mvnrepository.com/artifact/org.springdoc/springdoc-openapi-starter-webmvc-ui/2.2.0) it&#39;s maven dependency.","body":"AFAIK springfox wasn&#39;t compatible with Spring Boot 3.X.X. I don&#39;t know if that changed over the months. When I first upgraded to 3.X.X I had to remove springfox, and I added openapi. <a href=\"https://mvnrepository.com/artifact/org.springdoc/springdoc-openapi-starter-webmvc-ui/2.2.0\" rel=\"nofollow noreferrer\">Here</a> it&#39;s maven dependency."}],"answers":[{"tags":[],"owner":{"account_id":29528139,"reputation":31,"user_id":22629324,"display_name":"Stefano Suunto Di Blasio"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695647298,"creation_date":1695647298,"answer_id":77172923,"question_id":77171422,"body_markdown":"I solved the problem also thanks to @dauthDaert06&#39;s comment. I simply changed the dependency, following some tips on this [link][1]. SpringFox is not compatible with 3.0.0 and upper Spring Boot versions. \r\n\r\n\r\n  [1]: https://stackoverflow.com/a/65848200/22629324","title":"Swagger authentication permitAll() not working","body":"<p>I solved the problem also thanks to @dauthDaert06's comment. I simply changed the dependency, following some tips on this <a href=\"https://stackoverflow.com/a/65848200/22629324\">link</a>. SpringFox is not compatible with 3.0.0 and upper Spring Boot versions.</p>\n"}],"owner":{"account_id":29528139,"reputation":31,"user_id":22629324,"display_name":"Stefano Suunto Di Blasio"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77172923,"answer_count":1,"score":1,"last_activity_date":1695647298,"creation_date":1695633975,"question_id":77171422,"body_markdown":"I created a `JWT` project with Java 17 and Spring Boot 3. I was trying to include Swagger UI in my application, but when i try to access the `http://localhost:8080/swagger-ui/`, he asks me the credentials to access it.\r\n\r\nMy code:\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    @RequiredArgsConstructor\r\n    public class SecurityConfiguration {\r\n    \r\n        private final JwtAuthenticationFilter jwtAuthFilter;\r\n    \r\n        private final AuthenticationProvider authenticationProvider;\r\n    \r\n        @Bean\r\n        public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n    \r\n            http\r\n                .csrf(csrf -&gt; csrf.disable())\r\n                .authorizeHttpRequests(auth -&gt; auth\r\n                        .requestMatchers(&quot;/api/v1/auth/**&quot;, &quot;/v2/api-docs&quot;,\r\n                                &quot;/swagger-resources&quot;,\r\n                                &quot;/swagger-resources/**&quot;,\r\n                                &quot;/configuration/ui&quot;,\r\n                                &quot;/configuration/security&quot;,\r\n                                &quot;/swagger-ui.html&quot;,\r\n                                &quot;/webjars/**&quot;,\r\n                                &quot;/v3/api-docs/**&quot;,\r\n                                &quot;/swagger-ui/**&quot;, &quot;/configuration/**&quot;, &quot;/swagger-ui.html&quot;).permitAll()\r\n                        .anyRequest().authenticated()\r\n                )\r\n                .sessionManagement(session -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\r\n                .authenticationProvider(authenticationProvider)\r\n                .addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class)\r\n                .httpBasic(Customizer.withDefaults());\r\n    \r\n        return http.build();\r\n    \r\n        }\r\n    }\r\n\r\nMy dependencies:\r\n\r\n        &lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;springfox-boot-starter&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\nAny help is highly appreciated.\r\n\r\nI already tried to configure the WebConfigSecurity class with the necessary endpoints like it&#39;s explained [here](https://stackoverflow.com/a/48971992).\r\nI also tried to refactor the method as i&#39;ve seen on this [link](https://www.baeldung.com/swagger-2-documentation-for-spring-rest-api)  and upgraded the springfox version from 2.9.2 to 3.0.0 with no results.","title":"Swagger authentication permitAll() not working","body":"<p>I created a <code>JWT</code> project with Java 17 and Spring Boot 3. I was trying to include Swagger UI in my application, but when i try to access the <code>http://localhost:8080/swagger-ui/</code>, he asks me the credentials to access it.</p>\n<p>My code:</p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@RequiredArgsConstructor\npublic class SecurityConfiguration {\n\n    private final JwtAuthenticationFilter jwtAuthFilter;\n\n    private final AuthenticationProvider authenticationProvider;\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n\n        http\n            .csrf(csrf -&gt; csrf.disable())\n            .authorizeHttpRequests(auth -&gt; auth\n                    .requestMatchers(&quot;/api/v1/auth/**&quot;, &quot;/v2/api-docs&quot;,\n                            &quot;/swagger-resources&quot;,\n                            &quot;/swagger-resources/**&quot;,\n                            &quot;/configuration/ui&quot;,\n                            &quot;/configuration/security&quot;,\n                            &quot;/swagger-ui.html&quot;,\n                            &quot;/webjars/**&quot;,\n                            &quot;/v3/api-docs/**&quot;,\n                            &quot;/swagger-ui/**&quot;, &quot;/configuration/**&quot;, &quot;/swagger-ui.html&quot;).permitAll()\n                    .anyRequest().authenticated()\n            )\n            .sessionManagement(session -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\n            .authenticationProvider(authenticationProvider)\n            .addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class)\n            .httpBasic(Customizer.withDefaults());\n\n    return http.build();\n\n    }\n}\n</code></pre>\n<p>My dependencies:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n        &lt;artifactId&gt;springfox-boot-starter&lt;/artifactId&gt;\n        &lt;version&gt;3.0.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n        &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\n        &lt;version&gt;3.0.0&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>Any help is highly appreciated.</p>\n<p>I already tried to configure the WebConfigSecurity class with the necessary endpoints like it's explained <a href=\"https://stackoverflow.com/a/48971992\">here</a>.\nI also tried to refactor the method as i've seen on this <a href=\"https://www.baeldung.com/swagger-2-documentation-for-spring-rest-api\" rel=\"nofollow noreferrer\">link</a>  and upgraded the springfox version from 2.9.2 to 3.0.0 with no results.</p>\n"},{"tags":["java","selenium","google-chrome","jenkins","selenium-chromedriver"],"answers":[{"comments":[{"owner":{"account_id":15091498,"reputation":181,"user_id":10891278,"display_name":"Eamon Mac"},"score":0,"creation_date":1574820548,"post_id":59045542,"comment_id":104363180,"body_markdown":"Hi , i have updated JDK to latest version, selenium to latest version, cleaned and rebuilt my project but i still get the same error about time outs. The tiny difference in chrome and chromer driver surely cant be the reason i am getting this error?","body":"Hi , i have updated JDK to latest version, selenium to latest version, cleaned and rebuilt my project but i still get the same error about time outs. The tiny difference in chrome and chromer driver surely cant be the reason i am getting this error?"}],"tags":[],"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1574752260,"creation_date":1574752260,"answer_id":59045542,"question_id":59042521,"body_markdown":"This error message...\r\n\r\n\tunknown error: cannot determine loading status from disconnected: Unable to receive message from renderer   (Session info: chrome=78.0.3904.108)   (Driver info: chromedriver=78.0.3904.105 (60e2d8774a8151efa6a00b1f358371b1e0e07ee2-refs/branch-heads/3904@{#877}),platform=Mac OS X 10.13.6 x86_64) (WARNING: The server did not provide any stacktrace information) Command duration or timeout: 7.77 seconds Build info: version: &#39;2.45.0&#39;, revision: &#39;5017cb8e7ca8e37638dc3091b2440b90a1d8686f&#39;, time: &#39;2015-02-27 09:10:26&#39; System info: host: &#39;Eamons-MBP.hitronhub.home&#39;, ip: &#39;192.168.0.23&#39;, os.name: &#39;Mac OS X&#39;, os.arch: &#39;x86_64&#39;, os.version: &#39;10.13.6&#39;, java.version: &#39;1.8.0_101&#39; Driver info: org.openqa.selenium.chrome.ChromeDriver Capabilities [{mobileEmulationEnabled=false, timeouts={implicit=0, pageLoad=300000, script=30000}, hasTouchScreen=false, platform=MAC, acceptSslCerts=false, goog:chromeOptions={debuggerAddress=localhost:60317}, acceptInsecureCerts=false, webStorageEnabled=true, browserName=chrome, takesScreenshot=true, javascriptEnabled=true, setWindowRect=true, unexpectedAlertBehaviour=ignore, applicationCacheEnabled=false, rotatable=false, networkConnectionEnabled=false, chrome={chromedriverVersion=78.0.3904.105 (60e2d8774a8151efa6a00b1f358371b1e0e07ee2-refs/branch-heads/3904@{#877}), userDataDir=/var/folders/q3/3hrl35417q113_mhrglxf5cw00008b/T/.com.google.Chrome.Opshna}, takesHeapSnapshot=true, pageLoadStrategy=normal, strictFileInteractability=false, databaseEnabled=false, handlesAlerts=true, version=78.0.3904.108, browserConnectionEnabled=false, proxy={}, nativeEvents=true, locationContextEnabled=true, cssSelectorsEnabled=true}] Session ID: 7261e3005842ddc3d850504ba249d136\r\n\tStacktrace\r\n\torg.openqa.selenium.WebDriverException: unknown error: cannot determine loading status\r\n\tfrom disconnected: Unable to receive message from renderer\r\n\t  (Session info: chrome=78.0.3904.108)\r\n\t  (Driver info: chromedriver=78.0.3904.105 (60e2d8774a8151efa6a00b1f358371b1e0e07ee2-refs/branch-heads/3904@{#877}),platform=Mac OS X 10.13.6 x86_64) (WARNING: The server did not provide any stacktrace information)\r\n\tCommand duration or timeout: 7.77 seconds\r\n\tBuild info: version: &#39;2.45.0&#39;, revision: &#39;5017cb8e7ca8e37638dc3091b2440b90a1d8686f&#39;, time: &#39;2015-02-27 09:10:26&#39;\r\n\tSystem info: host: &#39;Eamons-MBP.hitronhub.home&#39;, ip: &#39;192.168.0.23&#39;, os.name: &#39;Mac OS X&#39;, os.arch: &#39;x86_64&#39;, os.version: &#39;10.13.6&#39;, java.version: &#39;1.8.0_101&#39;\r\n\tDriver info: org.openqa.selenium.chrome.ChromeDriver\r\n\t.\r\n\tStandard Error\r\n\tStarting ChromeDriver 78.0.3904.105 (60e2d8774a8151efa6a00b1f358371b1e0e07ee2-refs/branch-heads/3904@{#877}) on port 40247\r\n\tOnly local connections are allowed.\r\n\tPlease protect ports used by ChromeDriver and related test frameworks to prevent access by malicious code.\r\n\t[1574697681.040][WARNING]: Timed out connecting to Chrome, retrying...\r\n\t[1574697692.398][SEVERE]: Unable to receive message from renderer\r\n\r\n...implies that the **ChromeDriver** was unable to initiate/spawn a new **WebBrowser** i.e. **Chrome Browser** session.\r\n\r\nYour main issue is the **incompatibility** between the version of the binaries you are using as follows:\r\n\r\n- You are using _chromedriver=78.0.3904.105_ \r\n- You are using _chrome=78.0.3904.108_\r\n- Your _Selenium Client_ version is **2.45.0** of _2015-02-27 09:10:26_ which is **ancient** and almost **5** years older.\r\n- Your _JDK version_ is **1.8.0_101** which is pretty ancient.\r\n\r\nSo there is a clear mismatch between the _JDK v8u101_ , _Selenium Client v2.45.0_ , _ChromeDriver v78.0_ and the _Chrome Browser v78.0_\r\n\r\n\r\n----------\r\n\r\n\r\nSolution\r\n--------\r\nEnsure that:\r\n\r\n- _JDK_ is upgraded to  current levels [JDK 8u222](https://www.oracle.com/technetwork/java/javase/downloads/index.html).\r\n- _Selenium_ is upgraded to  current levels [Version 3.141.59](https://docs.seleniumhq.org/download/).\r\n- _Clean_ your _Project Workspace_ through your _IDE_ and _Rebuild_ your project with required dependencies only.\r\n- If your base _Web Client_ version is too old, then uninstall it through [_Revo Uninstaller_](https://www.revouninstaller.com/revo_uninstaller_free_download.html) and install a recent GA and released version of _Web Client_.\r\n- Take a _System Reboot_.\r\n- Execute your `@Test` as **non-root** user.","title":"unknown error: cannot determine loading status from disconnected: Unable to receive message from renderer error with Selenium Java scripts on jenkins","body":"<p>This error message...</p>\n\n<pre><code>unknown error: cannot determine loading status from disconnected: Unable to receive message from renderer   (Session info: chrome=78.0.3904.108)   (Driver info: chromedriver=78.0.3904.105 (60e2d8774a8151efa6a00b1f358371b1e0e07ee2-refs/branch-heads/3904@{#877}),platform=Mac OS X 10.13.6 x86_64) (WARNING: The server did not provide any stacktrace information) Command duration or timeout: 7.77 seconds Build info: version: '2.45.0', revision: '5017cb8e7ca8e37638dc3091b2440b90a1d8686f', time: '2015-02-27 09:10:26' System info: host: 'Eamons-MBP.hitronhub.home', ip: '192.168.0.23', os.name: 'Mac OS X', os.arch: 'x86_64', os.version: '10.13.6', java.version: '1.8.0_101' Driver info: org.openqa.selenium.chrome.ChromeDriver Capabilities [{mobileEmulationEnabled=false, timeouts={implicit=0, pageLoad=300000, script=30000}, hasTouchScreen=false, platform=MAC, acceptSslCerts=false, goog:chromeOptions={debuggerAddress=localhost:60317}, acceptInsecureCerts=false, webStorageEnabled=true, browserName=chrome, takesScreenshot=true, javascriptEnabled=true, setWindowRect=true, unexpectedAlertBehaviour=ignore, applicationCacheEnabled=false, rotatable=false, networkConnectionEnabled=false, chrome={chromedriverVersion=78.0.3904.105 (60e2d8774a8151efa6a00b1f358371b1e0e07ee2-refs/branch-heads/3904@{#877}), userDataDir=/var/folders/q3/3hrl35417q113_mhrglxf5cw00008b/T/.com.google.Chrome.Opshna}, takesHeapSnapshot=true, pageLoadStrategy=normal, strictFileInteractability=false, databaseEnabled=false, handlesAlerts=true, version=78.0.3904.108, browserConnectionEnabled=false, proxy={}, nativeEvents=true, locationContextEnabled=true, cssSelectorsEnabled=true}] Session ID: 7261e3005842ddc3d850504ba249d136\nStacktrace\norg.openqa.selenium.WebDriverException: unknown error: cannot determine loading status\nfrom disconnected: Unable to receive message from renderer\n  (Session info: chrome=78.0.3904.108)\n  (Driver info: chromedriver=78.0.3904.105 (60e2d8774a8151efa6a00b1f358371b1e0e07ee2-refs/branch-heads/3904@{#877}),platform=Mac OS X 10.13.6 x86_64) (WARNING: The server did not provide any stacktrace information)\nCommand duration or timeout: 7.77 seconds\nBuild info: version: '2.45.0', revision: '5017cb8e7ca8e37638dc3091b2440b90a1d8686f', time: '2015-02-27 09:10:26'\nSystem info: host: 'Eamons-MBP.hitronhub.home', ip: '192.168.0.23', os.name: 'Mac OS X', os.arch: 'x86_64', os.version: '10.13.6', java.version: '1.8.0_101'\nDriver info: org.openqa.selenium.chrome.ChromeDriver\n.\nStandard Error\nStarting ChromeDriver 78.0.3904.105 (60e2d8774a8151efa6a00b1f358371b1e0e07ee2-refs/branch-heads/3904@{#877}) on port 40247\nOnly local connections are allowed.\nPlease protect ports used by ChromeDriver and related test frameworks to prevent access by malicious code.\n[1574697681.040][WARNING]: Timed out connecting to Chrome, retrying...\n[1574697692.398][SEVERE]: Unable to receive message from renderer\n</code></pre>\n\n<p>...implies that the <strong>ChromeDriver</strong> was unable to initiate/spawn a new <strong>WebBrowser</strong> i.e. <strong>Chrome Browser</strong> session.</p>\n\n<p>Your main issue is the <strong>incompatibility</strong> between the version of the binaries you are using as follows:</p>\n\n<ul>\n<li>You are using <em>chromedriver=78.0.3904.105</em> </li>\n<li>You are using <em>chrome=78.0.3904.108</em></li>\n<li>Your <em>Selenium Client</em> version is <strong>2.45.0</strong> of <em>2015-02-27 09:10:26</em> which is <strong>ancient</strong> and almost <strong>5</strong> years older.</li>\n<li>Your <em>JDK version</em> is <strong>1.8.0_101</strong> which is pretty ancient.</li>\n</ul>\n\n<p>So there is a clear mismatch between the <em>JDK v8u101</em> , <em>Selenium Client v2.45.0</em> , <em>ChromeDriver v78.0</em> and the <em>Chrome Browser v78.0</em></p>\n\n<hr>\n\n<h2>Solution</h2>\n\n<p>Ensure that:</p>\n\n<ul>\n<li><em>JDK</em> is upgraded to  current levels <a href=\"https://www.oracle.com/technetwork/java/javase/downloads/index.html\" rel=\"nofollow noreferrer\">JDK 8u222</a>.</li>\n<li><em>Selenium</em> is upgraded to  current levels <a href=\"https://docs.seleniumhq.org/download/\" rel=\"nofollow noreferrer\">Version 3.141.59</a>.</li>\n<li><em>Clean</em> your <em>Project Workspace</em> through your <em>IDE</em> and <em>Rebuild</em> your project with required dependencies only.</li>\n<li>If your base <em>Web Client</em> version is too old, then uninstall it through <a href=\"https://www.revouninstaller.com/revo_uninstaller_free_download.html\" rel=\"nofollow noreferrer\"><em>Revo Uninstaller</em></a> and install a recent GA and released version of <em>Web Client</em>.</li>\n<li>Take a <em>System Reboot</em>.</li>\n<li>Execute your <code>@Test</code> as <strong>non-root</strong> user.</li>\n</ul>\n"}],"owner":{"account_id":15091498,"reputation":181,"user_id":10891278,"display_name":"Eamon Mac"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8502,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695647215,"creation_date":1574732672,"question_id":59042521,"body_markdown":"I am following a tutorial on how to create and run java selenium scripts both **locally** and **on a jenkins server** using **maven** and **eclipse**.\r\n\r\nMy script is pretty basic and runs fine locally when ran through eclipse via maven and TestNG.\r\nWhen i run them on Jenkins the build takes between 3 minutes to 15 minutes and then it fails with a timeout rendering issue usually.\r\n\r\nMy script when ran locally only takes about 2 minutes at most.\r\n\r\nHas anyone had this issue before?\r\nI am not sure why they timeout.\r\n\r\nError from Jenkins\r\n==================\r\n```\r\nunknown error: cannot determine loading status from disconnected: Unable to receive message from renderer   (Session info: chrome=78.0.3904.108)   (Driver info: chromedriver=78.0.3904.105 (60e2d8774a8151efa6a00b1f358371b1e0e07ee2-refs/branch-heads/3904@{#877}),platform=Mac OS X 10.13.6 x86_64) (WARNING: The server did not provide any stacktrace information) Command duration or timeout: 7.77 seconds Build info: version: &#39;2.45.0&#39;, revision: &#39;5017cb8e7ca8e37638dc3091b2440b90a1d8686f&#39;, time: &#39;2015-02-27 09:10:26&#39; System info: host: &#39;Eamons-MBP.hitronhub.home&#39;, ip: &#39;192.168.0.23&#39;, os.name: &#39;Mac OS X&#39;, os.arch: &#39;x86_64&#39;, os.version: &#39;10.13.6&#39;, java.version: &#39;1.8.0_101&#39; Driver info: org.openqa.selenium.chrome.ChromeDriver Capabilities [{mobileEmulationEnabled=false, timeouts={implicit=0, pageLoad=300000, script=30000}, hasTouchScreen=false, platform=MAC, acceptSslCerts=false, goog:chromeOptions={debuggerAddress=localhost:60317}, acceptInsecureCerts=false, webStorageEnabled=true, browserName=chrome, takesScreenshot=true, javascriptEnabled=true, setWindowRect=true, unexpectedAlertBehaviour=ignore, applicationCacheEnabled=false, rotatable=false, networkConnectionEnabled=false, chrome={chromedriverVersion=78.0.3904.105 (60e2d8774a8151efa6a00b1f358371b1e0e07ee2-refs/branch-heads/3904@{#877}), userDataDir=/var/folders/q3/3hrl35417q113_mhrglxf5cw00008b/T/.com.google.Chrome.Opshna}, takesHeapSnapshot=true, pageLoadStrategy=normal, strictFileInteractability=false, databaseEnabled=false, handlesAlerts=true, version=78.0.3904.108, browserConnectionEnabled=false, proxy={}, nativeEvents=true, locationContextEnabled=true, cssSelectorsEnabled=true}] Session ID: 7261e3005842ddc3d850504ba249d136\r\nStacktrace\r\norg.openqa.selenium.WebDriverException: unknown error: cannot determine loading status\r\nfrom disconnected: Unable to receive message from renderer\r\n  (Session info: chrome=78.0.3904.108)\r\n  (Driver info: chromedriver=78.0.3904.105 (60e2d8774a8151efa6a00b1f358371b1e0e07ee2-refs/branch-heads/3904@{#877}),platform=Mac OS X 10.13.6 x86_64) (WARNING: The server did not provide any stacktrace information)\r\nCommand duration or timeout: 7.77 seconds\r\nBuild info: version: &#39;2.45.0&#39;, revision: &#39;5017cb8e7ca8e37638dc3091b2440b90a1d8686f&#39;, time: &#39;2015-02-27 09:10:26&#39;\r\nSystem info: host: &#39;Eamons-MBP.hitronhub.home&#39;, ip: &#39;192.168.0.23&#39;, os.name: &#39;Mac OS X&#39;, os.arch: &#39;x86_64&#39;, os.version: &#39;10.13.6&#39;, java.version: &#39;1.8.0_101&#39;\r\nDriver info: org.openqa.selenium.chrome.ChromeDriver\r\nCapabilities [{mobileEmulationEnabled=false, timeouts={implicit=0, pageLoad=300000, script=30000}, hasTouchScreen=false, platform=MAC, acceptSslCerts=false, goog:chromeOptions={debuggerAddress=localhost:60317}, acceptInsecureCerts=false, webStorageEnabled=true, browserName=chrome, takesScreenshot=true, javascriptEnabled=true, setWindowRect=true, unexpectedAlertBehaviour=ignore, applicationCacheEnabled=false, rotatable=false, networkConnectionEnabled=false, chrome={chromedriverVersion=78.0.3904.105 (60e2d8774a8151efa6a00b1f358371b1e0e07ee2-refs/branch-heads/3904@{#877}), userDataDir=/var/folders/q3/3hrl35417q113_mhrglxf5cw00008b/T/.com.google.Chrome.Opshna}, takesHeapSnapshot=true, pageLoadStrategy=normal, strictFileInteractability=false, databaseEnabled=false, handlesAlerts=true, version=78.0.3904.108, browserConnectionEnabled=false, proxy={}, nativeEvents=true, locationContextEnabled=true, cssSelectorsEnabled=true}]\r\nSession ID: 7261e3005842ddc3d850504ba249d136\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n\tat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n\tat org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:204)\r\n\tat org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:156)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:599)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.get(RemoteWebDriver.java:304)\r\n\tat Eamon.EamonTest.doSomething(EamonTest.java:37)\r\nStandard Error\r\nStarting ChromeDriver 78.0.3904.105 (60e2d8774a8151efa6a00b1f358371b1e0e07ee2-refs/branch-heads/3904@{#877}) on port 40247\r\nOnly local connections are allowed.\r\nPlease protect ports used by ChromeDriver and related test frameworks to prevent access by malicious code.\r\n[1574697681.040][WARNING]: Timed out connecting to Chrome, retrying...\r\n[1574697692.398][SEVERE]: Unable to receive message from renderer\r\n```\r\n\r\nMy Script\r\n=============\r\n\r\n       @Test\r\n       public class NewTest {\r\n\t\r\n\t    \t@Test\r\n\t    \t public void doSomething() {\r\n\t    \t\r\n\t    \tSystem.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;/Users/Eamon/Desktop/chromedriver&quot;);\r\n\t\t\tWebDriver driver = new ChromeDriver();\r\n\t\t\tdriver.manage().window().maximize();\r\n\t\t\t\r\n\t\t\tJavascriptExecutor js = (JavascriptExecutor) driver;\r\n\t\t\t\r\n\t    \t\r\n\t        String baseUrl = &quot;http://www.nfl.com/probowl/ballot&quot;;\r\n\t        //&quot;http://www.nfl.com/probowl/ballot&quot;;\r\n\t        driver.get(baseUrl);\r\n\t        driver.manage().timeouts().implicitlyWait(20, TimeUnit.SECONDS);\r\n\t        \r\n\t        WebElement html = driver.findElement(By.tagName(&quot;html&quot;));\r\n\t        html.sendKeys(Keys.chord(Keys.CONTROL, Keys.ADD));\r\n\t        html.sendKeys(Keys.chord(Keys.CONTROL, &quot;25&quot;));\r\n\t        \r\n\t        driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);\r\n\t        \r\n\t        js.executeScript(&quot;window.scrollBy(0,500)&quot;);\r\n\t        driver.findElement(By.id(&quot;1015811_13_1_10&quot;)).click();\r\n\t        \r\n\t        js.executeScript(&quot;window.scrollBy(0,1000)&quot;);\r\n\t        driver.findElement(By.id(&quot;ballot-submit&quot;)).click();\r\n\t        \r\n\t        driver.close();\r\n\t        driver.quit();\r\n\t    \t }\r\n\t  \r\n\t}\r\n\r\n\r\n\r\n\r\n","title":"unknown error: cannot determine loading status from disconnected: Unable to receive message from renderer error with Selenium Java scripts on jenkins","body":"<p>I am following a tutorial on how to create and run java selenium scripts both <strong>locally</strong> and <strong>on a jenkins server</strong> using <strong>maven</strong> and <strong>eclipse</strong>.</p>\n\n<p>My script is pretty basic and runs fine locally when ran through eclipse via maven and TestNG.\nWhen i run them on Jenkins the build takes between 3 minutes to 15 minutes and then it fails with a timeout rendering issue usually.</p>\n\n<p>My script when ran locally only takes about 2 minutes at most.</p>\n\n<p>Has anyone had this issue before?\nI am not sure why they timeout.</p>\n\n<h1>Error from Jenkins</h1>\n\n<pre><code>unknown error: cannot determine loading status from disconnected: Unable to receive message from renderer   (Session info: chrome=78.0.3904.108)   (Driver info: chromedriver=78.0.3904.105 (60e2d8774a8151efa6a00b1f358371b1e0e07ee2-refs/branch-heads/3904@{#877}),platform=Mac OS X 10.13.6 x86_64) (WARNING: The server did not provide any stacktrace information) Command duration or timeout: 7.77 seconds Build info: version: '2.45.0', revision: '5017cb8e7ca8e37638dc3091b2440b90a1d8686f', time: '2015-02-27 09:10:26' System info: host: 'Eamons-MBP.hitronhub.home', ip: '192.168.0.23', os.name: 'Mac OS X', os.arch: 'x86_64', os.version: '10.13.6', java.version: '1.8.0_101' Driver info: org.openqa.selenium.chrome.ChromeDriver Capabilities [{mobileEmulationEnabled=false, timeouts={implicit=0, pageLoad=300000, script=30000}, hasTouchScreen=false, platform=MAC, acceptSslCerts=false, goog:chromeOptions={debuggerAddress=localhost:60317}, acceptInsecureCerts=false, webStorageEnabled=true, browserName=chrome, takesScreenshot=true, javascriptEnabled=true, setWindowRect=true, unexpectedAlertBehaviour=ignore, applicationCacheEnabled=false, rotatable=false, networkConnectionEnabled=false, chrome={chromedriverVersion=78.0.3904.105 (60e2d8774a8151efa6a00b1f358371b1e0e07ee2-refs/branch-heads/3904@{#877}), userDataDir=/var/folders/q3/3hrl35417q113_mhrglxf5cw00008b/T/.com.google.Chrome.Opshna}, takesHeapSnapshot=true, pageLoadStrategy=normal, strictFileInteractability=false, databaseEnabled=false, handlesAlerts=true, version=78.0.3904.108, browserConnectionEnabled=false, proxy={}, nativeEvents=true, locationContextEnabled=true, cssSelectorsEnabled=true}] Session ID: 7261e3005842ddc3d850504ba249d136\nStacktrace\norg.openqa.selenium.WebDriverException: unknown error: cannot determine loading status\nfrom disconnected: Unable to receive message from renderer\n  (Session info: chrome=78.0.3904.108)\n  (Driver info: chromedriver=78.0.3904.105 (60e2d8774a8151efa6a00b1f358371b1e0e07ee2-refs/branch-heads/3904@{#877}),platform=Mac OS X 10.13.6 x86_64) (WARNING: The server did not provide any stacktrace information)\nCommand duration or timeout: 7.77 seconds\nBuild info: version: '2.45.0', revision: '5017cb8e7ca8e37638dc3091b2440b90a1d8686f', time: '2015-02-27 09:10:26'\nSystem info: host: 'Eamons-MBP.hitronhub.home', ip: '192.168.0.23', os.name: 'Mac OS X', os.arch: 'x86_64', os.version: '10.13.6', java.version: '1.8.0_101'\nDriver info: org.openqa.selenium.chrome.ChromeDriver\nCapabilities [{mobileEmulationEnabled=false, timeouts={implicit=0, pageLoad=300000, script=30000}, hasTouchScreen=false, platform=MAC, acceptSslCerts=false, goog:chromeOptions={debuggerAddress=localhost:60317}, acceptInsecureCerts=false, webStorageEnabled=true, browserName=chrome, takesScreenshot=true, javascriptEnabled=true, setWindowRect=true, unexpectedAlertBehaviour=ignore, applicationCacheEnabled=false, rotatable=false, networkConnectionEnabled=false, chrome={chromedriverVersion=78.0.3904.105 (60e2d8774a8151efa6a00b1f358371b1e0e07ee2-refs/branch-heads/3904@{#877}), userDataDir=/var/folders/q3/3hrl35417q113_mhrglxf5cw00008b/T/.com.google.Chrome.Opshna}, takesHeapSnapshot=true, pageLoadStrategy=normal, strictFileInteractability=false, databaseEnabled=false, handlesAlerts=true, version=78.0.3904.108, browserConnectionEnabled=false, proxy={}, nativeEvents=true, locationContextEnabled=true, cssSelectorsEnabled=true}]\nSession ID: 7261e3005842ddc3d850504ba249d136\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n    at org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:204)\n    at org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:156)\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:599)\n    at org.openqa.selenium.remote.RemoteWebDriver.get(RemoteWebDriver.java:304)\n    at Eamon.EamonTest.doSomething(EamonTest.java:37)\nStandard Error\nStarting ChromeDriver 78.0.3904.105 (60e2d8774a8151efa6a00b1f358371b1e0e07ee2-refs/branch-heads/3904@{#877}) on port 40247\nOnly local connections are allowed.\nPlease protect ports used by ChromeDriver and related test frameworks to prevent access by malicious code.\n[1574697681.040][WARNING]: Timed out connecting to Chrome, retrying...\n[1574697692.398][SEVERE]: Unable to receive message from renderer\n</code></pre>\n\n<h1>My Script</h1>\n\n<pre><code>   @Test\n   public class NewTest {\n\n        @Test\n         public void doSomething() {\n\n        System.setProperty(\"webdriver.chrome.driver\",\"/Users/Eamon/Desktop/chromedriver\");\n        WebDriver driver = new ChromeDriver();\n        driver.manage().window().maximize();\n\n        JavascriptExecutor js = (JavascriptExecutor) driver;\n\n\n        String baseUrl = \"http://www.nfl.com/probowl/ballot\";\n        //\"http://www.nfl.com/probowl/ballot\";\n        driver.get(baseUrl);\n        driver.manage().timeouts().implicitlyWait(20, TimeUnit.SECONDS);\n\n        WebElement html = driver.findElement(By.tagName(\"html\"));\n        html.sendKeys(Keys.chord(Keys.CONTROL, Keys.ADD));\n        html.sendKeys(Keys.chord(Keys.CONTROL, \"25\"));\n\n        driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);\n\n        js.executeScript(\"window.scrollBy(0,500)\");\n        driver.findElement(By.id(\"1015811_13_1_10\")).click();\n\n        js.executeScript(\"window.scrollBy(0,1000)\");\n        driver.findElement(By.id(\"ballot-submit\")).click();\n\n        driver.close();\n        driver.quit();\n         }\n\n}\n</code></pre>\n"},{"tags":["java","spring","hibernate","spring-mvc"],"comments":[{"owner":{"account_id":5955901,"reputation":10524,"user_id":4682610,"accept_rate":29,"display_name":"Florian Schaetz"},"score":2,"creation_date":1437739026,"post_id":31609909,"comment_id":51169445,"body_markdown":"Have you checked what the length of the column in the database is?","body":"Have you checked what the length of the column in the database is?"},{"owner":{"account_id":2497295,"reputation":3931,"user_id":2173392,"display_name":"pdem"},"score":0,"creation_date":1695648544,"post_id":31609909,"comment_id":136048614,"body_markdown":"https://stackoverflow.com/questions/1281188/text-field-using-hibernate-annotation","body":"<a href=\"https://stackoverflow.com/questions/1281188/text-field-using-hibernate-annotation\" title=\"text field using hibernate annotation\">stackoverflow.com/questions/1281188/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":1940935,"reputation":1396,"user_id":1747165,"accept_rate":44,"display_name":"Avinash Mishra"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1437739895,"creation_date":1437739549,"answer_id":31610134,"question_id":31609909,"body_markdown":"In MySql alter the table if column type is `varchar` then change it to `text`. There are many datatypes in MySql other then text. Like `MEDIUM TEXT`,`LONGTEXT` etc.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/ACs9I.jpg\r\n\r\nIt may be work for that. I have already face this error.","title":"spring mysql: Data truncation (data too long for column)","body":"<p>In MySql alter the table if column type is <code>varchar</code> then change it to <code>text</code>. There are many datatypes in MySql other then text. Like <code>MEDIUM TEXT</code>,<code>LONGTEXT</code> etc.</p>\n\n<p><a href=\"https://i.stack.imgur.com/ACs9I.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ACs9I.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>It may be work for that. I have already face this error.</p>\n"},{"tags":[],"owner":{"account_id":17446692,"reputation":456,"user_id":12647580,"display_name":"menoktaokan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1587286968,"creation_date":1587286968,"answer_id":61301844,"question_id":31609909,"body_markdown":"I had `SQL [n/a]; nested exception is org.hibernate.exception.DataException: could not execute statement` exception. I have `Date` column and just changed the input syntax from `2003-09-17 00:00:00` to `17.09.2003`. The problem has solved.","title":"spring mysql: Data truncation (data too long for column)","body":"<p>I had <code>SQL [n/a]; nested exception is org.hibernate.exception.DataException: could not execute statement</code> exception. I have <code>Date</code> column and just changed the input syntax from <code>2003-09-17 00:00:00</code> to <code>17.09.2003</code>. The problem has solved.</p>\n"}],"owner":{"account_id":6678123,"reputation":31,"user_id":5152151,"display_name":"Hloro Fil"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9244,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1695647215,"creation_date":1437738796,"question_id":31609909,"body_markdown":"I have my class Movie :\r\n\r\n    @Entity\r\n    @Table(name=&quot;movies&quot;)\r\n    \r\n    public class Movie {\r\n    \r\n    \tprivate String genre_ids;\r\n    \t@Id\r\n    \t@GeneratedValue(strategy=GenerationType.IDENTITY)\r\n    \tprivate long id;\r\n    \t@Lob\r\n    \t@Column(length=1000000)\r\n    \tprivate String overview;\t\r\n    \tprivate String release_date;\r\n    \tprivate String poster_path;\r\n    \tprivate String popularity;\r\n    \tprivate String title;\r\n    \t\r\n    \tpublic Movie() {\r\n    \t\tsuper();\r\n    \t\t// TODO Auto-generated constructor stub\r\n    \t}\r\n    \r\n    \tpublic String getGenre_ids() {\r\n    \t\treturn genre_ids;\r\n    \t}\r\n    \r\n    \tpublic void setGenre_ids(String genre_ids) {\r\n    \t\tthis.genre_ids = genre_ids;\r\n    \t}\r\n    \r\n    \tpublic long getId() {\r\n    \t\treturn id;\r\n    \t}\r\n    \r\n    \tpublic void setId(long id) {\r\n    \t\tthis.id = id;\r\n    \t}\r\n    \r\n    \tpublic String getOverview() {\r\n    \t\treturn overview;\r\n    \t}\r\n    \r\n    \tpublic void setOverview(String overview) {\r\n    \t\tthis.overview = overview;\r\n    \t}\r\n    \r\n    \tpublic String getRelease_date() {\r\n    \t\treturn release_date;\r\n    \t}\r\n    \r\n    \tpublic void setRelease_date(String release_date) {\r\n    \t\tthis.release_date = release_date;\r\n    \t}\r\n    \r\n    \tpublic String getPoster_path() {\r\n    \t\treturn poster_path;\r\n    \t}\r\n    \r\n    \tpublic void setPoster_path(String poster_path) {\r\n    \t\tthis.poster_path = poster_path;\r\n    \t}\r\n    \r\n    \tpublic String getPopularity() {\r\n    \t\treturn popularity;\r\n    \t}\r\n    \r\n    \tpublic void setPopularity(String popularity) {\r\n    \t\tthis.popularity = popularity;\r\n    \t}\r\n    \r\n    \tpublic String getTitle() {\r\n    \t\treturn title;\r\n    \t}\r\n    \r\n    \tpublic void setTitle(String title) {\r\n    \t\tthis.title = title;\r\n    \t}\r\n    \r\n    \tpublic Movie(String genre_ids, long id, String overview, String release_date, String poster_path, String popularity,\r\n    \t\t\tString title) {\r\n    \t\tsuper();\r\n    \t\tthis.genre_ids = genre_ids;\r\n    \t\tthis.id = id;\r\n    \t\tthis.overview = overview;\r\n    \t\tthis.release_date = release_date;\r\n    \t\tthis.poster_path = poster_path;\r\n    \t\tthis.popularity = popularity;\r\n    \t\tthis.title = title;\r\n    \t}\r\n    \t\r\n    \t\r\n    \t\r\n    }\r\n\r\n\r\nand my controller method:\r\n\r\n    @RequestMapping(value=&quot;/moviesPage&quot;,method=RequestMethod.GET)\r\n    \r\n    \tpublic ModelAndView showMoviesPage() {\r\n    \t\t\tModelAndView model=new ModelAndView(&quot;moviePage&quot;);\r\n    \t\t\ttry {\r\n    \t\t\t\tJSONObject json=readJsonFromUrl(&quot;http://api.themoviedb.org/3/discover/movie?api_key=cbb012e4e7ece74ac4c32a77b00a43eb&amp;sort_by=popularity.desc&amp;page=1&quot;);\r\n    \t\t\t\tJSONArray array=json.getJSONArray(&quot;results&quot;);\r\n    \t\t\t\tfor(int i=0;i&lt;array.length();i++)\r\n    \t\t\t\t{\r\n    \t\t\t\t\tJSONObject jsonMovie=array.getJSONObject(i);\r\n    \t\t\t\t\tMovie movie=new Movie(jsonMovie.getString(&quot;genre_ids&quot;),jsonMovie.getLong(&quot;id&quot;),jsonMovie.getString(&quot;overview&quot;),jsonMovie.getString(&quot;release_date&quot;),jsonMovie.getString(&quot;poster_path&quot;),jsonMovie.getString(&quot;popularity&quot;),jsonMovie.getString(&quot;title&quot;));\r\n    \t\t\t\t\tmovieServiceImpl.createMovie(movie);\r\n    \t\t\t\t\tSystem.out.println(movie);\r\n    \t\t\t\t}\r\n    \t\t\t} catch (IOException e) {\r\n    \t\t\t\t// TODO Auto-generated catch block\r\n    \t\t\t\te.printStackTrace();\r\n    \t\t\t} catch (JSONException e) {\r\n    \t\t\t\t// TODO Auto-generated catch block\r\n    \t\t\t\te.printStackTrace();\r\n    \t\t\t}\r\n                 return model; }\r\n\r\nand I&#39;m getting this error:\r\n&gt; Servlet.service() for servlet [springDispatcher] in context with path [/web-programming] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; nested exception is org.hibernate.exception.DataException: could not execute statement] with root cause\r\ncom.mysql.jdbc.MysqlDataTruncation: Data truncation: Data too long for column &#39;overview&#39; at row 1\r\n","title":"spring mysql: Data truncation (data too long for column)","body":"<p>I have my class Movie :</p>\n\n<pre><code>@Entity\n@Table(name=\"movies\")\n\npublic class Movie {\n\n    private String genre_ids;\n    @Id\n    @GeneratedValue(strategy=GenerationType.IDENTITY)\n    private long id;\n    @Lob\n    @Column(length=1000000)\n    private String overview;    \n    private String release_date;\n    private String poster_path;\n    private String popularity;\n    private String title;\n\n    public Movie() {\n        super();\n        // TODO Auto-generated constructor stub\n    }\n\n    public String getGenre_ids() {\n        return genre_ids;\n    }\n\n    public void setGenre_ids(String genre_ids) {\n        this.genre_ids = genre_ids;\n    }\n\n    public long getId() {\n        return id;\n    }\n\n    public void setId(long id) {\n        this.id = id;\n    }\n\n    public String getOverview() {\n        return overview;\n    }\n\n    public void setOverview(String overview) {\n        this.overview = overview;\n    }\n\n    public String getRelease_date() {\n        return release_date;\n    }\n\n    public void setRelease_date(String release_date) {\n        this.release_date = release_date;\n    }\n\n    public String getPoster_path() {\n        return poster_path;\n    }\n\n    public void setPoster_path(String poster_path) {\n        this.poster_path = poster_path;\n    }\n\n    public String getPopularity() {\n        return popularity;\n    }\n\n    public void setPopularity(String popularity) {\n        this.popularity = popularity;\n    }\n\n    public String getTitle() {\n        return title;\n    }\n\n    public void setTitle(String title) {\n        this.title = title;\n    }\n\n    public Movie(String genre_ids, long id, String overview, String release_date, String poster_path, String popularity,\n            String title) {\n        super();\n        this.genre_ids = genre_ids;\n        this.id = id;\n        this.overview = overview;\n        this.release_date = release_date;\n        this.poster_path = poster_path;\n        this.popularity = popularity;\n        this.title = title;\n    }\n\n\n\n}\n</code></pre>\n\n<p>and my controller method:</p>\n\n<pre><code>@RequestMapping(value=\"/moviesPage\",method=RequestMethod.GET)\n\n    public ModelAndView showMoviesPage() {\n            ModelAndView model=new ModelAndView(\"moviePage\");\n            try {\n                JSONObject json=readJsonFromUrl(\"http://api.themoviedb.org/3/discover/movie?api_key=cbb012e4e7ece74ac4c32a77b00a43eb&amp;sort_by=popularity.desc&amp;page=1\");\n                JSONArray array=json.getJSONArray(\"results\");\n                for(int i=0;i&lt;array.length();i++)\n                {\n                    JSONObject jsonMovie=array.getJSONObject(i);\n                    Movie movie=new Movie(jsonMovie.getString(\"genre_ids\"),jsonMovie.getLong(\"id\"),jsonMovie.getString(\"overview\"),jsonMovie.getString(\"release_date\"),jsonMovie.getString(\"poster_path\"),jsonMovie.getString(\"popularity\"),jsonMovie.getString(\"title\"));\n                    movieServiceImpl.createMovie(movie);\n                    System.out.println(movie);\n                }\n            } catch (IOException e) {\n                // TODO Auto-generated catch block\n                e.printStackTrace();\n            } catch (JSONException e) {\n                // TODO Auto-generated catch block\n                e.printStackTrace();\n            }\n             return model; }\n</code></pre>\n\n<p>and I'm getting this error:</p>\n\n<blockquote>\n  <p>Servlet.service() for servlet [springDispatcher] in context with path [/web-programming] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; nested exception is org.hibernate.exception.DataException: could not execute statement] with root cause\n  com.mysql.jdbc.MysqlDataTruncation: Data truncation: Data too long for column 'overview' at row 1</p>\n</blockquote>\n"},{"tags":["java","algorithm","hashmap"],"comments":[{"owner":{"account_id":22723,"reputation":224023,"user_id":56338,"accept_rate":44,"display_name":"sth"},"score":1,"creation_date":1290280886,"post_id":4234462,"comment_id":4584314,"body_markdown":"You should add a tag for the programming language you are using.","body":"You should add a tag for the programming language you are using."}],"answers":[{"tags":[],"owner":{"account_id":42964,"reputation":26240,"user_id":125382,"accept_rate":91,"display_name":"MAK"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1290280953,"creation_date":1290280953,"answer_id":4234511,"question_id":4234462,"body_markdown":"You can&#39;t do a `m.put(new Float(a[i]),&quot;cat&quot;);` because you value has to be an `Integer`. To do that you have to declare it as `Map&lt;Float,String&gt; m = new HashMap()&lt;Float,String&gt;;`.","title":"using Float numbers for the map&#39;s key","body":"<p>You can't do a <code>m.put(new Float(a[i]),\"cat\");</code> because you value has to be an <code>Integer</code>. To do that you have to declare it as <code>Map&lt;Float,String&gt; m = new HashMap()&lt;Float,String&gt;;</code>.</p>\n"},{"comments":[{"owner":{"account_id":537299,"reputation":16550,"user_id":696535,"accept_rate":29,"display_name":"Pawel"},"score":0,"creation_date":1549113735,"post_id":4234583,"comment_id":95792438,"body_markdown":"That&#39;s why in these situations precision is being used i.e.","body":"That&#39;s why in these situations precision is being used i.e."}],"tags":[],"owner":{"account_id":12846,"reputation":15674,"user_id":25498,"accept_rate":64,"display_name":"Adam Crume"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1290281798,"creation_date":1290281798,"answer_id":4234583,"question_id":4234462,"body_markdown":"I would recommend against using floating point numbers as hash map keys if possible.  Your keys must match exactly when you look up values, and it&#39;s easy to get floating point numbers that aren&#39;t exactly right.","title":"using Float numbers for the map&#39;s key","body":"<p>I would recommend against using floating point numbers as hash map keys if possible.  Your keys must match exactly when you look up values, and it's easy to get floating point numbers that aren't exactly right.</p>\n"},{"tags":[],"owner":{"account_id":220789,"reputation":114430,"user_id":478399,"accept_rate":83,"display_name":"AlexR"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1290282957,"creation_date":1290282957,"answer_id":4234692,"question_id":4234462,"body_markdown":"Just to take all answers together.\r\n\r\n1. The mentioned Map&lt;Float, Integer&gt; cannot accept strings, so you cannot say m.put(f, &quot;cat&quot;)\r\n2. You can but do not have to wrap float using Float: auto-boxing does it for you automatically, so you can just say m.put(a[i],&quot;cat&quot;)\r\n3. You are not recommended to use floating point types (Float and Double) as map key. It may cause problems when you try to extract value from map using get(key) method\r\n4. Note also that default type for floating constants is double, not float. So, be careful with floats, use them only if you really need them. In any case use float modifier near constants like 3.14f. ","title":"using Float numbers for the map&#39;s key","body":"<p>Just to take all answers together.</p>\n\n<ol>\n<li>The mentioned Map cannot accept strings, so you cannot say m.put(f, \"cat\")</li>\n<li>You can but do not have to wrap float using Float: auto-boxing does it for you automatically, so you can just say m.put(a[i],\"cat\")</li>\n<li>You are not recommended to use floating point types (Float and Double) as map key. It may cause problems when you try to extract value from map using get(key) method</li>\n<li>Note also that default type for floating constants is double, not float. So, be careful with floats, use them only if you really need them. In any case use float modifier near constants like 3.14f. </li>\n</ol>\n"},{"tags":[],"owner":{"account_id":537299,"reputation":16550,"user_id":696535,"accept_rate":29,"display_name":"Pawel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1549114237,"creation_date":1549114237,"answer_id":54493560,"question_id":4234462,"body_markdown":"Truncate to given precision to generate predictable keys based on floats. An example in JavaScript\r\n\r\n    const precision = Math.pow(10, 4); // where 4 is number of decimal places to retain\r\n    const a = 12.5678912331; b = 13.75324122; c = 21.32112221\r\n    const key = &#39;&#39; + Math.floor(a * precision) + &#39;_&#39; + Math.floor(b * precision) + &#39;_&#39; + Math.floor(c * precision);\r\n    const aMap = new Map();\r\n    aMap.set(key, &#39;some value&#39;);\r\n\r\nUseless fact: This is taken from code used to index vertices in 3d objects. By setting lower precision it allows to merge nearby vertices","title":"using Float numbers for the map&#39;s key","body":"<p>Truncate to given precision to generate predictable keys based on floats. An example in JavaScript</p>\n\n<pre><code>const precision = Math.pow(10, 4); // where 4 is number of decimal places to retain\nconst a = 12.5678912331; b = 13.75324122; c = 21.32112221\nconst key = '' + Math.floor(a * precision) + '_' + Math.floor(b * precision) + '_' + Math.floor(c * precision);\nconst aMap = new Map();\naMap.set(key, 'some value');\n</code></pre>\n\n<p>Useless fact: This is taken from code used to index vertices in 3d objects. By setting lower precision it allows to merge nearby vertices</p>\n"},{"tags":[],"owner":{"account_id":15068226,"reputation":1,"user_id":10874621,"display_name":"Ghassen Kannou"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695647043,"creation_date":1695647043,"answer_id":77172901,"question_id":4234462,"body_markdown":"You can use Float instead of float it will convert float to an object.\r\ni have never try it but i think it will work","title":"using Float numbers for the map&#39;s key","body":"<p>You can use Float instead of float it will convert float to an object.\ni have never try it but i think it will work</p>\n"}],"owner":{"account_id":216781,"reputation":3014,"user_id":472221,"accept_rate":75,"display_name":"user472221"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15035,"favorite_count":0,"down_vote_count":1,"up_vote_count":7,"accepted_answer_id":4234583,"answer_count":5,"score":6,"last_activity_date":1695647043,"creation_date":1290280411,"question_id":4234462,"body_markdown":"after I create a new object : `Map&lt;Float,Integer&gt; m = new HashMap()&lt;Float,Integer&gt;;`\r\n\r\nI have an array with `&quot;float&quot;` numbers which are unique . I want to add these float numbers as the `m&#39;s key`! can I do this like :  `m.put(new Float(a[i]),&quot;cat&quot;);`   ?\r\n\r\nthanks","title":"using Float numbers for the map&#39;s key","body":"<p>after I create a new object : <code>Map&lt;Float,Integer&gt; m = new HashMap()&lt;Float,Integer&gt;;</code></p>\n\n<p>I have an array with <code>\"float\"</code> numbers which are unique . I want to add these float numbers as the <code>m's key</code>! can I do this like :  <code>m.put(new Float(a[i]),\"cat\");</code>   ?</p>\n\n<p>thanks</p>\n"},{"tags":["java","spring","spring-boot","dependency-injection"],"comments":[{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":3,"creation_date":1695640763,"post_id":77172089,"comment_id":136046982,"body_markdown":"Why don&#39;t you just make `RemoteService` a bean and let spring autowire it?","body":"Why don&#39;t you just make <code>RemoteService</code> a bean and let spring autowire it?"},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1695641145,"post_id":77172089,"comment_id":136047054,"body_markdown":"I don&#39;t understand why standard constructor injection wouldn&#39;t work here. If there is a reason, please update the question and explain why normal autowiring doesn&#39;t cover your use case.","body":"I don&#39;t understand why standard constructor injection wouldn&#39;t work here. If there is a reason, please update the question and explain why normal autowiring doesn&#39;t cover your use case."},{"owner":{"account_id":2401591,"reputation":416,"user_id":2099153,"accept_rate":91,"display_name":"D051P0"},"score":0,"creation_date":1695642933,"post_id":77172089,"comment_id":136047391,"body_markdown":"@Chaosfire do you mean a wrapper over this legacy initialization so I can inject it? RemoteService isn&#39;t a bean","body":"@Chaosfire do you mean a wrapper over this legacy initialization so I can inject it? RemoteService isn&#39;t a bean"},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1695643019,"post_id":77172089,"comment_id":136047412,"body_markdown":"No need for a wrapper, declare it using `@Bean`. Edit - there is already an [answer](https://stackoverflow.com/a/77172421/17795888) showing exactly what i meant.","body":"No need for a wrapper, declare it using <code>@Bean</code>. Edit - there is already an <a href=\"https://stackoverflow.com/a/77172421/17795888\">answer</a> showing exactly what i meant."},{"owner":{"account_id":2401591,"reputation":416,"user_id":2099153,"accept_rate":91,"display_name":"D051P0"},"score":0,"creation_date":1695643035,"post_id":77172089,"comment_id":136047419,"body_markdown":"@Jorn I&#39;ve updated my question. My problem is that RemoteService is a legacy implemention which is not a bean and couldn&#39;t been autowired. I&#39;m looking for best practies for such cases whith such legacy implementations.","body":"@Jorn I&#39;ve updated my question. My problem is that RemoteService is a legacy implemention which is not a bean and couldn&#39;t been autowired. I&#39;m looking for best practies for such cases whith such legacy implementations."}],"answers":[{"comments":[{"owner":{"account_id":2401591,"reputation":416,"user_id":2099153,"accept_rate":91,"display_name":"D051P0"},"score":0,"creation_date":1695643507,"post_id":77172421,"comment_id":136047500,"body_markdown":"Thank you. This is the solution I was looking for.","body":"Thank you. This is the solution I was looking for."},{"owner":{"account_id":3477991,"reputation":3445,"user_id":2910751,"accept_rate":90,"display_name":"Martin Frank"},"score":0,"creation_date":1695644541,"post_id":77172421,"comment_id":136047717,"body_markdown":"that is the proper way to use dependecy injection (+1), see [why field injection is evil](https://odrotbohm.de/2013/11/why-field-injection-is-evil/)","body":"that is the proper way to use dependecy injection (+1), see <a href=\"https://odrotbohm.de/2013/11/why-field-injection-is-evil/\" rel=\"nofollow noreferrer\">why field injection is evil</a>"}],"tags":[],"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1695642839,"creation_date":1695642839,"answer_id":77172421,"question_id":77172089,"body_markdown":"Just do dependency injection like you normally would and move the `RemoteServiceFactory.newInstance()` to an `@Bean` annotated method. Problem solved. \r\n\r\n```java\r\n@Bean\r\npublic RemoveService remoteService() {\r\n  return RemoteServiceFactory.newInstance()\r\n}\r\n```\r\n\r\n```java\r\n@Service\r\npublic class MyService {\r\n   private final RemoteService remoteService;\r\n   private final MySecondService secondService;\r\n\r\n  public MyService(RemoteService remoteService, MySecondService secondService) {\r\n    this.remoteService = remoteService;\r\n    this.secondService = secondService;\r\n  }\r\n  // Remainder of methods\r\n}\r\n```\r\n\r\n**NOTE:** I removed the use of Lombok here due to personal preference not to use it, you can ofcourse use the `@RequiredArgsConstructor` if you prefer. ","title":"Spring Boot best practicies for static factory initializations of non-bean objects in service-class","body":"<p>Just do dependency injection like you normally would and move the <code>RemoteServiceFactory.newInstance()</code> to an <code>@Bean</code> annotated method. Problem solved.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic RemoveService remoteService() {\n  return RemoteServiceFactory.newInstance()\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class MyService {\n   private final RemoteService remoteService;\n   private final MySecondService secondService;\n\n  public MyService(RemoteService remoteService, MySecondService secondService) {\n    this.remoteService = remoteService;\n    this.secondService = secondService;\n  }\n  // Remainder of methods\n}\n</code></pre>\n<p><strong>NOTE:</strong> I removed the use of Lombok here due to personal preference not to use it, you can ofcourse use the <code>@RequiredArgsConstructor</code> if you prefer.</p>\n"},{"tags":[],"owner":{"account_id":2401591,"reputation":416,"user_id":2099153,"accept_rate":91,"display_name":"D051P0"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695644450,"creation_date":1695644450,"answer_id":77172592,"question_id":77172089,"body_markdown":"Thank you for previous answers. \r\n\r\nI&#39;ve ended up with a configuration which generates bean definition of RemoteService from thrid-party lib.\r\n\r\n```java \r\n@Configuration\r\npublic RemoteServiceConfig {\r\n    @Bean\r\n    public RemoteService remoteService() {\r\n        return RemoteServiceFactory.newInstance();\r\n    }\r\n}\r\n```\r\nNot I can be autowired.\r\n","title":"Spring Boot best practicies for static factory initializations of non-bean objects in service-class","body":"<p>Thank you for previous answers.</p>\n<p>I've ended up with a configuration which generates bean definition of RemoteService from thrid-party lib.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic RemoteServiceConfig {\n    @Bean\n    public RemoteService remoteService() {\n        return RemoteServiceFactory.newInstance();\n    }\n}\n</code></pre>\n<p>Not I can be autowired.</p>\n"},{"comments":[{"owner":{"account_id":2401591,"reputation":416,"user_id":2099153,"accept_rate":91,"display_name":"D051P0"},"score":0,"creation_date":1695648017,"post_id":77172889,"comment_id":136048497,"body_markdown":"Thanks! This was my solution. I&#39;ve written it as an answer. :D","body":"Thanks! This was my solution. I&#39;ve written it as an answer. :D"}],"tags":[],"owner":{"account_id":17867155,"reputation":442,"user_id":12979271,"display_name":"siiraaj"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695646940,"creation_date":1695646940,"answer_id":77172889,"question_id":77172089,"body_markdown":"**Step 1** : Define RemoteService as a Bean so you can create a Java Config class (annotated with @Configuration) to define RemoteService as a Spring bean.\r\n\r\n    @Configuration\r\n    public class RemoteServiceConfig {\r\n\r\n       @Bean\r\n        public RemoteService remoteService() {\r\n        return RemoteServiceFactory.newInstance();\r\n       }\r\n    }\r\n\r\n**Step 2** :  Inject RemoteService through Constructor\r\n\r\n    @Service\r\n    @RequiredArgsConstructor\r\n    public class MyService {\r\n       private final RemoteService remoteService;\r\n       private final MySecondService secondService;\r\n    }\r\n\r\n**Step 3**  : Unit test, you can use mocking frameworks like Mockito to mock the RemoteService and MySecondService.\r\n\r\n    @RunWith(SpringRunner.class)\r\n    public class MyServiceTest {\r\n    \r\n    @Mock\r\n    private RemoteService remoteService;\r\n    \r\n    @Mock\r\n    private MySecondService secondService;\r\n    \r\n    private MyService myService;\r\n    \r\n    @Before\r\n    public void setUp() {\r\n        MockitoAnnotations.openMocks(this);\r\n        myService = new MyService(remoteService, secondService);\r\n    }\r\n    \r\n    // ... Your test methods\r\n}\r\n","title":"Spring Boot best practicies for static factory initializations of non-bean objects in service-class","body":"<p><strong>Step 1</strong> : Define RemoteService as a Bean so you can create a Java Config class (annotated with @Configuration) to define RemoteService as a Spring bean.</p>\n<pre><code>@Configuration\npublic class RemoteServiceConfig {\n\n   @Bean\n    public RemoteService remoteService() {\n    return RemoteServiceFactory.newInstance();\n   }\n}\n</code></pre>\n<p><strong>Step 2</strong> :  Inject RemoteService through Constructor</p>\n<pre><code>@Service\n@RequiredArgsConstructor\npublic class MyService {\n   private final RemoteService remoteService;\n   private final MySecondService secondService;\n}\n</code></pre>\n<p><strong>Step 3</strong>  : Unit test, you can use mocking frameworks like Mockito to mock the RemoteService and MySecondService.</p>\n<pre><code>@RunWith(SpringRunner.class)\npublic class MyServiceTest {\n\n@Mock\nprivate RemoteService remoteService;\n\n@Mock\nprivate MySecondService secondService;\n\nprivate MyService myService;\n\n@Before\npublic void setUp() {\n    MockitoAnnotations.openMocks(this);\n    myService = new MyService(remoteService, secondService);\n}\n\n// ... Your test methods\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":2401591,"reputation":416,"user_id":2099153,"accept_rate":91,"display_name":"D051P0"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"closed_date":1695756286,"accepted_answer_id":77172889,"answer_count":3,"score":-1,"last_activity_date":1695646940,"creation_date":1695639731,"question_id":77172089,"body_markdown":"I would like to refactor an application where some fields are initialized with static factory methods. It makes unit testing difficult and these fields can only be set via reflection in unit tests. \r\nHere is one code example I would like to refactor\r\n```java \r\n@Service\r\n@RequiredArgsConstructor \r\npublic class MyService {\r\n   private final RemoteService remoteService = RemoteServiceFactory.newInstance();\r\n\r\n   private final MySecondService secondService;\r\n\r\n   .... \r\n\r\n}\r\n\r\n```\r\n\r\nAs you can see there is a field which is initialized via factory. Autowiring is not possible because no beans of this type are found. RemoteService is legacy code from maven dependency. \r\n\r\nI&#39;m searching for some solution for dependency injection because you cannot really test my service properly without reflection. \r\n\r\nWhat are best practicies to avoid such initialization in service classes? \r\n\r\n","title":"Spring Boot best practicies for static factory initializations of non-bean objects in service-class","body":"<p>I would like to refactor an application where some fields are initialized with static factory methods. It makes unit testing difficult and these fields can only be set via reflection in unit tests.\nHere is one code example I would like to refactor</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\n@RequiredArgsConstructor \npublic class MyService {\n   private final RemoteService remoteService = RemoteServiceFactory.newInstance();\n\n   private final MySecondService secondService;\n\n   .... \n\n}\n\n</code></pre>\n<p>As you can see there is a field which is initialized via factory. Autowiring is not possible because no beans of this type are found. RemoteService is legacy code from maven dependency.</p>\n<p>I'm searching for some solution for dependency injection because you cannot really test my service properly without reflection.</p>\n<p>What are best practicies to avoid such initialization in service classes?</p>\n"},{"tags":["java","spring-batch"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1695635845,"post_id":77171592,"comment_id":136046032,"body_markdown":"Be specific with the return type as yuou noticed. The configuration classes are processed very early on and they can only determine what to do based on the return-type of the method as there is no actual instance of the class that is being returned. Hence you need to be specific. So unless your own custom itemwriter is also an `ItemStreamWriter`  your only option is to create 2 configurations.","body":"Be specific with the return type as yuou noticed. The configuration classes are processed very early on and they can only determine what to do based on the return-type of the method as there is no actual instance of the class that is being returned. Hence you need to be specific. So unless your own custom itemwriter is also an <code>ItemStreamWriter</code>  your only option is to create 2 configurations."}],"answers":[{"tags":[],"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695646834,"creation_date":1695646834,"answer_id":77172882,"question_id":77171592,"body_markdown":"When using the Java configuration style to define step scoped `ItemStream` beans, the return type of the bean definition method should be at least `ItemStream`. This is required so that Spring Batch correctly creates a proxy that implements this interface, and therefore honors its contract by calling `open`, `update` and `close` methods as expected.\r\n\r\nThis is mentioned in the documentation here: [Scoping ItemStream components](https://docs.spring.io/spring-batch/docs/current/reference/html/step.html#scoping-item-streams)","title":"Spring-Batch does not open FlatFileItemWriter if bean is declared as ItemWriter","body":"<p>When using the Java configuration style to define step scoped <code>ItemStream</code> beans, the return type of the bean definition method should be at least <code>ItemStream</code>. This is required so that Spring Batch correctly creates a proxy that implements this interface, and therefore honors its contract by calling <code>open</code>, <code>update</code> and <code>close</code> methods as expected.</p>\n<p>This is mentioned in the documentation here: <a href=\"https://docs.spring.io/spring-batch/docs/current/reference/html/step.html#scoping-item-streams\" rel=\"nofollow noreferrer\">Scoping ItemStream components</a></p>\n"}],"owner":{"account_id":15519832,"reputation":1026,"user_id":11478354,"display_name":"dcolazin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77172882,"answer_count":1,"score":0,"last_activity_date":1695646834,"creation_date":1695635508,"question_id":77171592,"body_markdown":"I&#39;m using Spring Batch 4.3.8 and I&#39;m trying to use the following code in my configuration to define a ItemWriter\r\n\r\n    @Bean\r\n\t@StepScope\r\n\tpublic ItemWriter&lt;MyData&gt; itemWriter(MyFileConfig fileConfig) {\r\n\t\tString outputFileName = fileConfig.retrieveOutputFileName();\r\n\t\tif (StringUtils.isBlank(outputFileName)) {\r\n\t\t\treturn new MyOtherWriter&lt;&gt;();\r\n\t\t}\r\n\t\treturn new FlatFileItemWriterBuilder&lt;MyData&gt;().name(WRITER_NAME)\r\n\t\t\t\t.resource(new FileSystemResource(outputFileName))\r\n\t\t\t\t.delimited()\r\n\t\t\t\t.delimiter(DELIMITER)\r\n\t\t\t\t.names(NAMES)\r\n\t\t\t\t.build();\r\n\t}\r\n\r\nbut I&#39;m getting the following error when `outputFileName` is not blank\r\n\r\n    org.springframework.batch.item.WriterNotOpenException: Writer must be open before it can be written to\r\n    \tat org.springframework.batch.item.support.AbstractFileItemWriter.write(AbstractFileItemWriter.java:239)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n    \tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n    \tat org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:137)\r\n    \tat org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:124)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:241)\r\n    \tat com.sun.proxy.$Proxy124.write(Unknown Source)\r\n    \tat org.springframework.batch.core.step.item.SimpleChunkProcessor.writeItems(SimpleChunkProcessor.java:193)\r\n    \tat org.springframework.batch.core.step.item.SimpleChunkProcessor.doWrite(SimpleChunkProcessor.java:159)\r\n    \tat org.springframework.batch.core.step.item.SimpleChunkProcessor.write(SimpleChunkProcessor.java:294)\r\n    \tat org.springframework.batch.core.step.item.SimpleChunkProcessor.process(SimpleChunkProcessor.java:217)\r\n    \tat org.springframework.batch.core.step.item.ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:77)\r\n    \tat org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:407)\r\n    \tat org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:331)\r\n    \tat org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)\r\n    \tat org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:273)\r\n    \tat org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:82)\r\n    \tat org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:375)\r\n    \tat org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:215)\r\n    \tat org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:145)\r\n    \tat org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:258)\r\n    \tat org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:208)\r\n    \tat org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)\r\n    \tat org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)\r\n    \tat org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)\r\n    \tat org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)\r\n    \tat org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)\r\n    \tat org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)\r\n    \tat org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n    \tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n    \tat org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:241)\r\n    \tat com.sun.proxy.$Proxy120.run(Unknown Source)\r\n    \tat org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.execute(JobLauncherApplicationRunner.java:199)\r\n    \tat org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.executeLocalJobs(JobLauncherApplicationRunner.java:173)\r\n    \tat org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.launchJobFromProperties(JobLauncherApplicationRunner.java:160)\r\n    \tat org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:155)\r\n    \tat org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:150)\r\n    \tat org.springframework.cloud.sleuth.instrument.task.TraceApplicationRunner.run(TraceApplicationRunner.java:51)\r\n    \tat org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:759)\r\n    \tat org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:749)\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:314)\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1303)\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1292)\r\n\r\nYet this code is working fine\r\n\r\n    @Bean\r\n\t@StepScope\r\n\tpublic FlatFileItemWriter&lt;MyData&gt; itemWriter(MyFileConfig fileConfig) {\r\n\t\treturn new FlatFileItemWriterBuilder&lt;MyData&gt;().name(WRITER_NAME)\r\n\t\t\t\t.resource(new FileSystemResource(fileConfig.retrieveOutputFileName()))\r\n\t\t\t\t.delimited()\r\n\t\t\t\t.delimiter(DELIMITER)\r\n\t\t\t\t.names(NAMES)\r\n\t\t\t\t.build();\r\n\t}\r\n\r\nso I&#39;m assuming the issue is that Spring Batch is not checking that the ItemWriter is actually a FlatFileItemWriter and doing the proper init. Is there a way to comfortably handle this case, without duplicating config (the various `@Conditional` annotations on beans)?","title":"Spring-Batch does not open FlatFileItemWriter if bean is declared as ItemWriter","body":"<p>I'm using Spring Batch 4.3.8 and I'm trying to use the following code in my configuration to define a ItemWriter</p>\n<pre><code>@Bean\n@StepScope\npublic ItemWriter&lt;MyData&gt; itemWriter(MyFileConfig fileConfig) {\n    String outputFileName = fileConfig.retrieveOutputFileName();\n    if (StringUtils.isBlank(outputFileName)) {\n        return new MyOtherWriter&lt;&gt;();\n    }\n    return new FlatFileItemWriterBuilder&lt;MyData&gt;().name(WRITER_NAME)\n            .resource(new FileSystemResource(outputFileName))\n            .delimited()\n            .delimiter(DELIMITER)\n            .names(NAMES)\n            .build();\n}\n</code></pre>\n<p>but I'm getting the following error when <code>outputFileName</code> is not blank</p>\n<pre><code>org.springframework.batch.item.WriterNotOpenException: Writer must be open before it can be written to\n    at org.springframework.batch.item.support.AbstractFileItemWriter.write(AbstractFileItemWriter.java:239)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n    at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:137)\n    at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:124)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:241)\n    at com.sun.proxy.$Proxy124.write(Unknown Source)\n    at org.springframework.batch.core.step.item.SimpleChunkProcessor.writeItems(SimpleChunkProcessor.java:193)\n    at org.springframework.batch.core.step.item.SimpleChunkProcessor.doWrite(SimpleChunkProcessor.java:159)\n    at org.springframework.batch.core.step.item.SimpleChunkProcessor.write(SimpleChunkProcessor.java:294)\n    at org.springframework.batch.core.step.item.SimpleChunkProcessor.process(SimpleChunkProcessor.java:217)\n    at org.springframework.batch.core.step.item.ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:77)\n    at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:407)\n    at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:331)\n    at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)\n    at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:273)\n    at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:82)\n    at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:375)\n    at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:215)\n    at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:145)\n    at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:258)\n    at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:208)\n    at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)\n    at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)\n    at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)\n    at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)\n    at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)\n    at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)\n    at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n    at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:241)\n    at com.sun.proxy.$Proxy120.run(Unknown Source)\n    at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.execute(JobLauncherApplicationRunner.java:199)\n    at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.executeLocalJobs(JobLauncherApplicationRunner.java:173)\n    at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.launchJobFromProperties(JobLauncherApplicationRunner.java:160)\n    at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:155)\n    at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:150)\n    at org.springframework.cloud.sleuth.instrument.task.TraceApplicationRunner.run(TraceApplicationRunner.java:51)\n    at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:759)\n    at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:749)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:314)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1303)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1292)\n</code></pre>\n<p>Yet this code is working fine</p>\n<pre><code>@Bean\n@StepScope\npublic FlatFileItemWriter&lt;MyData&gt; itemWriter(MyFileConfig fileConfig) {\n    return new FlatFileItemWriterBuilder&lt;MyData&gt;().name(WRITER_NAME)\n            .resource(new FileSystemResource(fileConfig.retrieveOutputFileName()))\n            .delimited()\n            .delimiter(DELIMITER)\n            .names(NAMES)\n            .build();\n}\n</code></pre>\n<p>so I'm assuming the issue is that Spring Batch is not checking that the ItemWriter is actually a FlatFileItemWriter and doing the proper init. Is there a way to comfortably handle this case, without duplicating config (the various <code>@Conditional</code> annotations on beans)?</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":28029077,"reputation":949,"user_id":21408550,"display_name":"inkredusk"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695646576,"creation_date":1695646576,"answer_id":77172847,"question_id":77172528,"body_markdown":"Can you try something like this please?\r\n\r\n    Drawable originalDrawable = AppCompatResources.getDrawable(context, R.drawable.icon_name); \r\n    Drawable modifiedDrawable = DrawableCompat.wrap(originalDrawable);\r\n    DrawableCompat.setTint(modifiedDrawable, Color.RED);  \r\n\r\nP.S: I am using `DrawableCompat` here since it provides backwards compatibility and bug fixes on API 22 devices and earlier. ","title":"How to change color of the icon in android R.drawable?","body":"<p>Can you try something like this please?</p>\n<pre><code>Drawable originalDrawable = AppCompatResources.getDrawable(context, R.drawable.icon_name); \nDrawable modifiedDrawable = DrawableCompat.wrap(originalDrawable);\nDrawableCompat.setTint(modifiedDrawable, Color.RED);  \n</code></pre>\n<p>P.S: I am using <code>DrawableCompat</code> here since it provides backwards compatibility and bug fixes on API 22 devices and earlier.</p>\n"},{"tags":[],"owner":{"account_id":18535094,"reputation":71,"user_id":13504941,"display_name":"Aditya Sharma"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695646666,"creation_date":1695646666,"answer_id":77172861,"question_id":77172528,"body_markdown":"You can extract the drawable using context.getDrawable(R.drawable.your_drawable)\r\n\r\nand can simply set the tint color of your drawable using\r\n\r\n    var drawable = context.getDrawable(R.drawable.your_drawable)\r\n    drawable.setTint(R.color.your_color)\r\n\r\nAnother way would to give tint color directly to your imageView\r\n1. in xml \r\n2. or programatically.    `imageView.imageTintList=context.getColorStateList(R.color.your_color)`\r\n\r\n  \r\n\r\n\r\n\r\n\r\n","title":"How to change color of the icon in android R.drawable?","body":"<p>You can extract the drawable using context.getDrawable(R.drawable.your_drawable)</p>\n<p>and can simply set the tint color of your drawable using</p>\n<pre><code>var drawable = context.getDrawable(R.drawable.your_drawable)\ndrawable.setTint(R.color.your_color)\n</code></pre>\n<p>Another way would to give tint color directly to your imageView</p>\n<ol>\n<li>in xml</li>\n<li>or programatically.    <code>imageView.imageTintList=context.getColorStateList(R.color.your_color)</code></li>\n</ol>\n"}],"owner":{"account_id":18025801,"reputation":149,"user_id":13101805,"display_name":"HappyProgrammer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695646666,"creation_date":1695643956,"question_id":77172528,"body_markdown":"Hello I have the method which returns the int `R.drawable.icon_name`.\r\nHow can I set the color of that icon ? \r\nIs there any possibility to return the &#39;int&#39; with changing the color ? \r\n\r\nI&#39;ve tried the `R.color` but can I connect this two possibilities ? ","title":"How to change color of the icon in android R.drawable?","body":"<p>Hello I have the method which returns the int <code>R.drawable.icon_name</code>.\nHow can I set the color of that icon ?\nIs there any possibility to return the 'int' with changing the color ?</p>\n<p>I've tried the <code>R.color</code> but can I connect this two possibilities ?</p>\n"},{"tags":["java","spring","spring-batch"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1695641504,"post_id":77172132,"comment_id":136047131,"body_markdown":"Listeners is what you want, a job listener would do the trick. Trying to shoehorn this into steps will only make it more difficult.","body":"Listeners is what you want, a job listener would do the trick. Trying to shoehorn this into steps will only make it more difficult."},{"owner":{"account_id":15152869,"reputation":183,"user_id":10934684,"display_name":"Luigi"},"score":0,"creation_date":1695719385,"post_id":77172132,"comment_id":136058735,"body_markdown":"@M.Deinum I have replaced the delete step with a listeners but, although the related method is the last to be executed, its properties are not valued.","body":"@M.Deinum I have replaced the delete step with a listeners but, although the related method is the last to be executed, its properties are not valued."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1695719630,"post_id":77172132,"comment_id":136058794,"body_markdown":"Let me guess you are doing a `new MyLIstener()` in your `Job` configuration method instead of having an `@Bean` method for the listener?","body":"Let me guess you are doing a <code>new MyLIstener()</code> in your <code>Job</code> configuration method instead of having an <code>@Bean</code> method for the listener?"},{"owner":{"account_id":15152869,"reputation":183,"user_id":10934684,"display_name":"Luigi"},"score":0,"creation_date":1695720255,"post_id":77172132,"comment_id":136058924,"body_markdown":"In the xml file that defines the job flow, I replaced the file deletion step with a listener. The class of this listener implements a JobExecutionListener. In the afterJob() method, I placed the instructions that delete the temporary directory. These instructions make use of injected variables, but they are not valued, whereas in the tasklet they were valued. Just as was done in the step, in the listener I added the properties like this\n &lt;property name=&quot;propertyName&quot; value=&quot;propertyValue&quot; /&gt; \nI also tried adding a bean in the applicationContext.xml, but the properties are still null.","body":"In the xml file that defines the job flow, I replaced the file deletion step with a listener. The class of this listener implements a JobExecutionListener. In the afterJob() method, I placed the instructions that delete the temporary directory. These instructions make use of injected variables, but they are not valued, whereas in the tasklet they were valued. Just as was done in the step, in the listener I added the properties like this  &lt;property name=&quot;propertyName&quot; value=&quot;propertyValue&quot; /&gt;  I also tried adding a bean in the applicationContext.xml, but the properties are still null."},{"owner":{"account_id":15152869,"reputation":183,"user_id":10934684,"display_name":"Luigi"},"score":0,"creation_date":1695720357,"post_id":77172132,"comment_id":136058939,"body_markdown":"@M.Deinum Finally, I also tried defining the variables in the class that implements the JobExecutionListener as static, but they keep getting null.","body":"@M.Deinum Finally, I also tried defining the variables in the class that implements the JobExecutionListener as static, but they keep getting null."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1695720819,"post_id":77172132,"comment_id":136059020,"body_markdown":"I&#39;m lost as to what you did and tried. THe fact that your listener doesn&#39;t work is a different question and is not something we should try to answer here or discuss in comments.","body":"I&#39;m lost as to what you did and tried. THe fact that your listener doesn&#39;t work is a different question and is not something we should try to answer here or discuss in comments."}],"answers":[{"comments":[{"owner":{"account_id":15152869,"reputation":183,"user_id":10934684,"display_name":"Luigi"},"score":0,"creation_date":1695712969,"post_id":77172852,"comment_id":136057429,"body_markdown":"In the xml file that defines the job flow, I replaced the file deletion step with a listener. The class of this listener implements a JobExecutionListener. In the afterJob() method, I placed the instructions that delete the temporary directory. These instructions make use of injected variables, but they are not valued, whereas in the tasklet they were valued.\nJust as was done in the step, in the listener I added the properties like this\n&lt;property name=&quot;propertyName&quot; value=&quot;propertyValue&quot; /&gt;\nI also tried adding a bean in the applicationContext.xml, but the properties are still null.","body":"In the xml file that defines the job flow, I replaced the file deletion step with a listener. The class of this listener implements a JobExecutionListener. In the afterJob() method, I placed the instructions that delete the temporary directory. These instructions make use of injected variables, but they are not valued, whereas in the tasklet they were valued. Just as was done in the step, in the listener I added the properties like this &lt;property name=&quot;propertyName&quot; value=&quot;propertyValue&quot; /&gt; I also tried adding a bean in the applicationContext.xml, but the properties are still null."},{"owner":{"account_id":15152869,"reputation":183,"user_id":10934684,"display_name":"Luigi"},"score":0,"creation_date":1695713449,"post_id":77172852,"comment_id":136057515,"body_markdown":"However, I confirm that the afterJob() method is the last to be executed. I inserted some debug prints and they are the last messages to appear in the logs.","body":"However, I confirm that the afterJob() method is the last to be executed. I inserted some debug prints and they are the last messages to appear in the logs."}],"tags":[],"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695646634,"creation_date":1695646634,"answer_id":77172852,"question_id":77172132,"body_markdown":"If your requirement is only to delete temporary files created by steps no matter the exit status of those steps is, then a `JobExecutionListener#afterJob` is a good option. This listener is always executed.\r\n\r\nHowever, if you want to introduce a complex flow of execution with conditional/branching like `step 7, is a step that should always be performed, even if one of the previous steps fails` or `Step 8, on the other hand, should be executed only when none of the previous steps generates an exception`, then you need to define a job execution `Flow`, as described in this section: [Controlling Step Flow](https://docs.spring.io/spring-batch/docs/current/reference/html/step.html#controllingStepFlow)","title":"How to still run a step spring batch even when an exception occurs","body":"<p>If your requirement is only to delete temporary files created by steps no matter the exit status of those steps is, then a <code>JobExecutionListener#afterJob</code> is a good option. This listener is always executed.</p>\n<p>However, if you want to introduce a complex flow of execution with conditional/branching like <code>step 7, is a step that should always be performed, even if one of the previous steps fails</code> or <code>Step 8, on the other hand, should be executed only when none of the previous steps generates an exception</code>, then you need to define a job execution <code>Flow</code>, as described in this section: <a href=\"https://docs.spring.io/spring-batch/docs/current/reference/html/step.html#controllingStepFlow\" rel=\"nofollow noreferrer\">Controlling Step Flow</a></p>\n"}],"owner":{"account_id":15152869,"reputation":183,"user_id":10934684,"display_name":"Luigi"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77172852,"answer_count":1,"score":0,"last_activity_date":1695646634,"creation_date":1695640102,"question_id":77172132,"body_markdown":"I have a spring batch program where execution flows of various steps are defined via xml files. One of these xml files is structured something like this.\r\n\r\n    &lt;step id=&quot;step1&quot; next=&quot;step2&quot;&gt;\r\n    \t&lt;!-- Configuration of step 1 --&gt;\r\n    &lt;/step&gt;\r\n\r\n    &lt;step id=&quot;step2&quot; next=&quot;step3&quot;&gt;\r\n    \t&lt;!-- Configuration of step 2 --&gt;\r\n    &lt;/step&gt;\r\n\r\n    &lt;step id=&quot;step3&quot; next=&quot;step4&quot;&gt;\r\n    \t&lt;!-- Configuration of step 3 --&gt;\r\n    &lt;/step&gt;\r\n\r\n    &lt;step id=&quot;step4&quot; next=&quot;step5&quot;&gt;\r\n    \t&lt;!-- Configuration of step 4 --&gt;\r\n    &lt;/step&gt;\r\n\r\n    &lt;step id=&quot;step5&quot; next=&quot;step6&quot;&gt;\r\n    \t&lt;!-- Configuration of step 5 --&gt;\r\n    &lt;/step&gt;\r\n\r\n    &lt;step id=&quot;step6&quot; next=&quot;step7&quot;&gt;\r\n    \t&lt;!-- Configuration of step 6 --&gt;\r\n    &lt;/step&gt;\r\n\r\n    &lt;step id=&quot;step7&quot; next=&quot;step8&quot;&gt;\r\n    \t&lt;!-- Configuration of step 7 --&gt;\r\n    &lt;/step&gt;\r\n\r\n    &lt;step id=&quot;step8&quot;&gt;\r\n    \t&lt;!-- Configuration of step 8 --&gt;\r\n    &lt;/step&gt;\r\n\r\nOne of the last steps, let&#39;s say step 7, is a step that should always be performed, even if one of the previous steps fails, as it takes care of deleting temporary files that were generated during the execution of the flow. At the moment, when one of steps 1 to 6 generates an exception, step 7 is not reached, so the files to be deleted have to be deleted manually. I should make sure that step 7 is executed both when all the previous steps succeed and when one of them generates an exception that stops the program. Step 8, on the other hand, should be executed only when none of the previous steps generates an exception.\r\nSearching the web, it seems that it is conceivable to use listeners to achieve the desired behavior, but I would like to understand how to configure it for the purpose or if there are other more suitable ways.","title":"How to still run a step spring batch even when an exception occurs","body":"<p>I have a spring batch program where execution flows of various steps are defined via xml files. One of these xml files is structured something like this.</p>\n<pre><code>&lt;step id=&quot;step1&quot; next=&quot;step2&quot;&gt;\n    &lt;!-- Configuration of step 1 --&gt;\n&lt;/step&gt;\n\n&lt;step id=&quot;step2&quot; next=&quot;step3&quot;&gt;\n    &lt;!-- Configuration of step 2 --&gt;\n&lt;/step&gt;\n\n&lt;step id=&quot;step3&quot; next=&quot;step4&quot;&gt;\n    &lt;!-- Configuration of step 3 --&gt;\n&lt;/step&gt;\n\n&lt;step id=&quot;step4&quot; next=&quot;step5&quot;&gt;\n    &lt;!-- Configuration of step 4 --&gt;\n&lt;/step&gt;\n\n&lt;step id=&quot;step5&quot; next=&quot;step6&quot;&gt;\n    &lt;!-- Configuration of step 5 --&gt;\n&lt;/step&gt;\n\n&lt;step id=&quot;step6&quot; next=&quot;step7&quot;&gt;\n    &lt;!-- Configuration of step 6 --&gt;\n&lt;/step&gt;\n\n&lt;step id=&quot;step7&quot; next=&quot;step8&quot;&gt;\n    &lt;!-- Configuration of step 7 --&gt;\n&lt;/step&gt;\n\n&lt;step id=&quot;step8&quot;&gt;\n    &lt;!-- Configuration of step 8 --&gt;\n&lt;/step&gt;\n</code></pre>\n<p>One of the last steps, let's say step 7, is a step that should always be performed, even if one of the previous steps fails, as it takes care of deleting temporary files that were generated during the execution of the flow. At the moment, when one of steps 1 to 6 generates an exception, step 7 is not reached, so the files to be deleted have to be deleted manually. I should make sure that step 7 is executed both when all the previous steps succeed and when one of them generates an exception that stops the program. Step 8, on the other hand, should be executed only when none of the previous steps generates an exception.\nSearching the web, it seems that it is conceivable to use listeners to achieve the desired behavior, but I would like to understand how to configure it for the purpose or if there are other more suitable ways.</p>\n"},{"tags":["java","spring","mybatis-mapper"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1695643282,"post_id":77172458,"comment_id":136047456,"body_markdown":"the above is not exactly Java code.","body":"the above is not exactly Java code."},{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1695643661,"post_id":77172458,"comment_id":136047529,"body_markdown":"Try: `select to_char(sysdate, &#39;yyyymmdd&#39;) || order_seq.nextval || #{storeCode} AS orderCode from dual`","body":"Try: <code>select to_char(sysdate, &#39;yyyymmdd&#39;) || order_seq.nextval || #{storeCode} AS orderCode from dual</code>"}],"answers":[{"tags":[],"owner":{"account_id":17867155,"reputation":442,"user_id":12979271,"display_name":"siiraaj"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695646416,"creation_date":1695646416,"answer_id":77172826,"question_id":77172458,"body_markdown":"Instead of using the fully qualified class name java.lang.String, try using the lowercase primitive string \r\n\r\n    &lt;selectKey resultType=&quot;string&quot; keyProperty=&quot;orderCode&quot; order=&quot;BEFORE&quot;&gt;\r\n    select to_char(sysdate, &#39;yyyymmdd&#39;) || order_seq.nextval || #{storeCode} from dual\r\n&lt;/selectKey&gt;\r\n\r\nTry also to explicitly cast the result to VARCHAR or CHAR in SQL:\r\n\r\n    &lt;selectKey resultType=&quot;string&quot; keyProperty=&quot;orderCode&quot; order=&quot;BEFORE&quot;&gt;\r\n    select cast(to_char(sysdate, &#39;yyyymmdd&#39;) || order_seq.nextval || #{storeCode} as VARCHAR2(255)) from dual\r\n&lt;/selectKey&gt;\r\n","title":"How to solve &quot;has an unsupported return type: class java.lang.String&quot; when using Mybatis insert","body":"<p>Instead of using the fully qualified class name java.lang.String, try using the lowercase primitive string</p>\n<pre><code>&lt;selectKey resultType=&quot;string&quot; keyProperty=&quot;orderCode&quot; order=&quot;BEFORE&quot;&gt;\nselect to_char(sysdate, 'yyyymmdd') || order_seq.nextval || #{storeCode} from dual\n</code></pre>\n\n<p>Try also to explicitly cast the result to VARCHAR or CHAR in SQL:</p>\n<pre><code>&lt;selectKey resultType=&quot;string&quot; keyProperty=&quot;orderCode&quot; order=&quot;BEFORE&quot;&gt;\nselect cast(to_char(sysdate, 'yyyymmdd') || order_seq.nextval || #{storeCode} as VARCHAR2(255)) from dual\n</code></pre>\n\n"}],"owner":{"account_id":23673654,"reputation":11,"user_id":17700120,"display_name":"Mizue Lee"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695646416,"creation_date":1695643167,"question_id":77172458,"body_markdown":"in my project i need to use pk just i insert.\r\nso i used selectKey in my xml and it returns error : has an unsupported return type: class java.lang.String\r\n\r\ni am using Spring, Java1.8, Oracle DB\r\nand my code goes\r\n\r\n```\r\n&lt;insert id=&quot;makeNewOrder&quot; parameterType=&quot;Order&quot;&gt;\r\n\t&lt;selectKey resultType=&quot;java.lang.String&quot; keyProperty=&quot;orderCode&quot; order=&quot;BEFORE&quot;&gt;\r\n\t\tselect to_char(sysdate, &#39;yyyymmdd&#39;) || order_seq.nextval || #{storeCode} from dual\r\n\t&lt;/selectKey&gt;\r\n    \tinsert into\r\n    \t\torders \r\n    \t\t(orderCode\r\n       \t\t , storeCode\r\n       \t\t &lt;if test=&quot;memberId != null&quot;&gt; , memberId &lt;/if&gt;\r\n       \t\t , orderState)\r\n    \tvalues\r\n    \t\t( #{orderCode}\r\n       \t\t, #{storeCode}\r\n       \t\t&lt;if test=&quot;memberId != null&quot;&gt; , #{memberId} &lt;/if&gt;\r\n       \t\t, &#39;apply&#39;)\r\n&lt;/insert&gt;\r\n```\r\n\r\nhow can i fix it?\r\n\r\nmy dao returns String and i&#39;ve googled...","title":"How to solve &quot;has an unsupported return type: class java.lang.String&quot; when using Mybatis insert","body":"<p>in my project i need to use pk just i insert.\nso i used selectKey in my xml and it returns error : has an unsupported return type: class java.lang.String</p>\n<p>i am using Spring, Java1.8, Oracle DB\nand my code goes</p>\n<pre><code>&lt;insert id=&quot;makeNewOrder&quot; parameterType=&quot;Order&quot;&gt;\n    &lt;selectKey resultType=&quot;java.lang.String&quot; keyProperty=&quot;orderCode&quot; order=&quot;BEFORE&quot;&gt;\n        select to_char(sysdate, 'yyyymmdd') || order_seq.nextval || #{storeCode} from dual\n    &lt;/selectKey&gt;\n        insert into\n            orders \n            (orderCode\n             , storeCode\n             &lt;if test=&quot;memberId != null&quot;&gt; , memberId &lt;/if&gt;\n             , orderState)\n        values\n            ( #{orderCode}\n            , #{storeCode}\n            &lt;if test=&quot;memberId != null&quot;&gt; , #{memberId} &lt;/if&gt;\n            , 'apply')\n&lt;/insert&gt;\n</code></pre>\n<p>how can i fix it?</p>\n<p>my dao returns String and i've googled...</p>\n"},{"tags":["java","batch-processing","mssql-jdbc","jtds"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1695645866,"post_id":77172739,"comment_id":136047987,"body_markdown":"afaicr jtds died some time ago and shouldn&#39;t be considered reliable now. Use the latest driver from MS","body":"afaicr jtds died some time ago and shouldn&#39;t be considered reliable now. Use the latest driver from MS"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":1,"creation_date":1695650005,"post_id":77172739,"comment_id":136048951,"body_markdown":"If you are using at least Java 8, then you need version 1.3.1 (and not 1.2.8)","body":"If you are using at least Java 8, then you need version 1.3.1 (and not 1.2.8)"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":1,"creation_date":1695650234,"post_id":77172739,"comment_id":136049003,"body_markdown":"You wrote (in your question): _For run the project with this driver change, I have to do several changes in the project._ As far as I am aware (or afaiaa - as @g00se would write), those changes are very minor. We initially used [jTDS](https://jtds.sourceforge.net/) and moved to [Microsoft JDBC driver](https://learn.microsoft.com/en-us/sql/connect/jdbc/microsoft-jdbc-driver-for-sql-server?view=sql-server-ver16) and only required very minimal changes.","body":"You wrote (in your question): <i>For run the project with this driver change, I have to do several changes in the project.</i> As far as I am aware (or afaiaa - as @g00se would write), those changes are very minor. We initially used <a href=\"https://jtds.sourceforge.net/\" rel=\"nofollow noreferrer\">jTDS</a> and moved to <a href=\"https://learn.microsoft.com/en-us/sql/connect/jdbc/microsoft-jdbc-driver-for-sql-server?view=sql-server-ver16\" rel=\"nofollow noreferrer\">Microsoft JDBC driver</a> and only required very minimal changes."},{"owner":{"account_id":1964182,"reputation":147,"user_id":1764850,"display_name":"Linidu Praneeth Gunathilaka"},"score":0,"creation_date":1695659564,"post_id":77172739,"comment_id":136051069,"body_markdown":"yeah, useful thoughts, have anyone got the output of the getUpdateCounts() method, in a real world scenario?","body":"yeah, useful thoughts, have anyone got the output of the getUpdateCounts() method, in a real world scenario?"},{"owner":{"account_id":17972905,"reputation":5290,"user_id":13061224,"display_name":"siggemannen"},"score":0,"creation_date":1699695103,"post_id":77172739,"comment_id":136565891,"body_markdown":"Are you sure the rest of your batch is even getting executed? if sql server aborted your batch after first failure, the rest of the batches will be populated with failures automatically. we need some sort of code that reproduces the issue i think. Also, you&#39;re using an old jtds version (which is itself very old).","body":"Are you sure the rest of your batch is even getting executed? if sql server aborted your batch after first failure, the rest of the batches will be populated with failures automatically. we need some sort of code that reproduces the issue i think. Also, you&#39;re using an old jtds version (which is itself very old)."}],"owner":{"account_id":1964182,"reputation":147,"user_id":1764850,"display_name":"Linidu Praneeth Gunathilaka"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695645679,"creation_date":1695645679,"question_id":77172739,"body_markdown":"Currently I&#39;m processing a batch of data which saves into MSSQL database.\r\nAnd I&#39;m using this jtds driver to get establish the database transactions.\r\n    \r\n       &lt;dependency&gt;\r\n            &lt;groupId&gt;net.sourceforge.jtds&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jtds&lt;/artifactId&gt;\r\n            &lt;version&gt;1.2.8&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\nWhile processing the batch I&#39;m expecting there can be some rows which fail while inserting.\r\nI want to get to know exactly what are the failed rows for my requirement.\r\n\r\nI used this getUpdateCounts() method to find the status of the processed records in the batch.\r\n\r\nhttps://docs.oracle.com/javase/7/docs/api/java/sql/BatchUpdateException.html\r\n\r\nBut I&#39;m not getting the expected result from this method.\r\nAssume the first record success and the second one failed.\r\nthen the out put is something like this.\r\n \r\n\r\n    [-2, -3, -3, -3, -3, -3, -3, -3, -3, -3]\r\n\r\nAnd if the first one fails and others success, still it&#39;s resulting like this way.\r\n \r\n\r\n    [-3, -3, -3, -3, -3, -3, -3, -3, -3, -3]\r\n\r\nThen I thought of using the mssql-jdbc driver instead of the jtds driver.\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.microsoft.sqlserver&lt;/groupId&gt;\r\n        &lt;artifactId&gt;mssql-jdbc&lt;/artifactId&gt;\r\n        &lt;version&gt;12.4.1.jre8&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nFor run the project with this driver change, I have to do several changes in the project.\r\n\r\nSo I&#39;m expecting valuable thoughts regarding this scenario.","title":"Return value of the getUpdateCounts() of theh mssql-jdbc driver which comes with com.microsoft.sqlserver","body":"<p>Currently I'm processing a batch of data which saves into MSSQL database.\nAnd I'm using this jtds driver to get establish the database transactions.</p>\n<pre><code>   &lt;dependency&gt;\n        &lt;groupId&gt;net.sourceforge.jtds&lt;/groupId&gt;\n        &lt;artifactId&gt;jtds&lt;/artifactId&gt;\n        &lt;version&gt;1.2.8&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>While processing the batch I'm expecting there can be some rows which fail while inserting.\nI want to get to know exactly what are the failed rows for my requirement.</p>\n<p>I used this getUpdateCounts() method to find the status of the processed records in the batch.</p>\n<p><a href=\"https://docs.oracle.com/javase/7/docs/api/java/sql/BatchUpdateException.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/7/docs/api/java/sql/BatchUpdateException.html</a></p>\n<p>But I'm not getting the expected result from this method.\nAssume the first record success and the second one failed.\nthen the out put is something like this.</p>\n<pre><code>[-2, -3, -3, -3, -3, -3, -3, -3, -3, -3]\n</code></pre>\n<p>And if the first one fails and others success, still it's resulting like this way.</p>\n<pre><code>[-3, -3, -3, -3, -3, -3, -3, -3, -3, -3]\n</code></pre>\n<p>Then I thought of using the mssql-jdbc driver instead of the jtds driver.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.microsoft.sqlserver&lt;/groupId&gt;\n    &lt;artifactId&gt;mssql-jdbc&lt;/artifactId&gt;\n    &lt;version&gt;12.4.1.jre8&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>For run the project with this driver change, I have to do several changes in the project.</p>\n<p>So I'm expecting valuable thoughts regarding this scenario.</p>\n"},{"tags":["java","java-21"],"comments":[{"owner":{"account_id":13203350,"reputation":868,"user_id":9535950,"display_name":"Thomas Behr"},"score":5,"creation_date":1695646348,"post_id":77172733,"comment_id":136048097,"body_markdown":"Can you explain why you need &quot;to lock down the JRE&quot; in more detail? If you actually succeed in doing so, what is preventing me from using a JRE other than yours to run your application?","body":"Can you explain why you need &quot;to lock down the JRE&quot; in more detail? If you actually succeed in doing so, what is preventing me from using a JRE other than yours to run your application?"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1695646768,"post_id":77172733,"comment_id":136048182,"body_markdown":"What does “lock down the JRE” even mean? The security manager was never responsible for a feature like “to let JRE only run JAR&#39;s that are signed with a specific certifcate”, even before its deprecation. As Thomas Behr said, you need to explain how your requested feature was supposed to work in the first place, e.g. in Java&#160;8.","body":"What does “lock down the JRE” even mean? The security manager was never responsible for a feature like “to let JRE only run JAR&#39;s that are signed with a specific certifcate”, even before its deprecation. As Thomas Behr said, you need to explain how your requested feature was supposed to work in the first place, e.g. in Java 8."},{"owner":{"account_id":29529674,"reputation":11,"user_id":22630549,"display_name":"Torben"},"score":0,"creation_date":1695647538,"post_id":77172733,"comment_id":136048380,"body_markdown":"@ThomasBehr Locking down meaning only JAR&#39;s that are signed by a trusted CA should be allowed to run.\n@ Holger I think I have mixed it up with Java Applets/JWS. There you can enforce the JARs to be signed by a specific certificate.\nNontheless is there any way to prevent JRE from running arbitrary JREs? Excluding the applications that bring their own.","body":"@ThomasBehr Locking down meaning only JAR&#39;s that are signed by a trusted CA should be allowed to run. @ Holger I think I have mixed it up with Java Applets/JWS. There you can enforce the JARs to be signed by a specific certificate. Nontheless is there any way to prevent JRE from running arbitrary JREs? Excluding the applications that bring their own."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1695647791,"post_id":77172733,"comment_id":136048446,"body_markdown":"I think that the answer is No ... unless you want to modify OpenJDK and make your own JRE builds.","body":"I think that the answer is No ... unless you want to modify OpenJDK and make your own JRE builds."},{"owner":{"account_id":13203350,"reputation":868,"user_id":9535950,"display_name":"Thomas Behr"},"score":2,"creation_date":1695648094,"post_id":77172733,"comment_id":136048522,"body_markdown":"@Torben My question was *why* you want to lock down the JRE, not what you mean by &quot;locking&quot; (you already explained that in your initial post). I am asking for your reasons, because I do not understand why you need to do that. If the JRE is on a machine which you do not control, you cannot prevent people from using a JRE other than your locked one. If the JRE is on a machine you do control, simply do not run applications you do not trust. In the first case, &quot;locking&quot; won&#39;t do any good, in the second case, there is no need for &quot;locking&quot; at all.","body":"@Torben My question was <i>why</i> you want to lock down the JRE, not what you mean by &quot;locking&quot; (you already explained that in your initial post). I am asking for your reasons, because I do not understand why you need to do that. If the JRE is on a machine which you do not control, you cannot prevent people from using a JRE other than your locked one. If the JRE is on a machine you do control, simply do not run applications you do not trust. In the first case, &quot;locking&quot; won&#39;t do any good, in the second case, there is no need for &quot;locking&quot; at all."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1695655709,"post_id":77172733,"comment_id":136050321,"body_markdown":"Well, Applets and JWS had a need for such a feature, as jar files were coming from external sources. JWS has been gone already, Applets have been marked *deprecated, for removal*, expect it to go together with the security manager. So what is the hypothetical feature for? In case of local launches, you are in control of the launch, you decide which jars to specify to the JVM. Or, to look at it from the other side, if you do not take control over the launch process, you don’t have control over the hypothetical signed-jars-only restriction either.","body":"Well, Applets and JWS had a need for such a feature, as jar files were coming from external sources. JWS has been gone already, Applets have been marked <i>deprecated, for removal</i>, expect it to go together with the security manager. So what is the hypothetical feature for? In case of local launches, you are in control of the launch, you decide which jars to specify to the JVM. Or, to look at it from the other side, if you do not take control over the launch process, you don’t have control over the hypothetical signed-jars-only restriction either."},{"owner":{"account_id":13203350,"reputation":868,"user_id":9535950,"display_name":"Thomas Behr"},"score":0,"creation_date":1695657967,"post_id":77172733,"comment_id":136050799,"body_markdown":"@Holger Well, any application can load jars from external sources (think plug-ins). So, this applet/webstart security issue is there for &quot;normal&quot; applications as well. However, an application that loads external, unsigned jars or simply fails to verify signatures for external jars should not be &quot;trusted&quot; in the first place. Unfortunately, it takes quite some effort to check if an application loads insecure stuff. Moreover, it is fairly easy for a malicious party to sign their evil plug-in which begs the question how secure a signed jar really is.","body":"@Holger Well, any application can load jars from external sources (think plug-ins). So, this applet/webstart security issue is there for &quot;normal&quot; applications as well. However, an application that loads external, unsigned jars or simply fails to verify signatures for external jars should not be &quot;trusted&quot; in the first place. Unfortunately, it takes quite some effort to check if an application loads insecure stuff. Moreover, it is fairly easy for a malicious party to sign their evil plug-in which begs the question how secure a signed jar really is."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1695658474,"post_id":77172733,"comment_id":136050897,"body_markdown":"@ThomasBehr …and every application can download a binary file and run it. Or contain the problematic stuff already in the first place, without the need to download it.","body":"@ThomasBehr …and every application can download a binary file and run it. Or contain the problematic stuff already in the first place, without the need to download it."},{"owner":{"account_id":13203350,"reputation":868,"user_id":9535950,"display_name":"Thomas Behr"},"score":0,"creation_date":1695658624,"post_id":77172733,"comment_id":136050925,"body_markdown":"@Holger Exactly. I think we&#39;re on the same page, here. ;)","body":"@Holger Exactly. I think we&#39;re on the same page, here. ;)"}],"owner":{"account_id":29529674,"reputation":11,"user_id":22630549,"display_name":"Torben"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695645624,"creation_date":1695645624,"question_id":77172733,"body_markdown":"I have to lock down the JRE as much as possible. \r\nWith the deprecation of Java Security Manager in Java 21, there is (to my knowledge) no way to lock down the JRE to run only a selected handful of standalone JAR&#39;s.\r\n\r\nAm I missing something or is there no way to let JRE only run JAR&#39;s that are signed with a specific certifcate?\r\n\r\nAll documentation regarding this topic points to Java SE 8 and using Security Manager. The official documentation mention a Java Cryptography Extension Policy file but there is no further documentation about it.","title":"How to prevent JRE from running JAR&#39;s that are not signed?","body":"<p>I have to lock down the JRE as much as possible.\nWith the deprecation of Java Security Manager in Java 21, there is (to my knowledge) no way to lock down the JRE to run only a selected handful of standalone JAR's.</p>\n<p>Am I missing something or is there no way to let JRE only run JAR's that are signed with a specific certifcate?</p>\n<p>All documentation regarding this topic points to Java SE 8 and using Security Manager. The official documentation mention a Java Cryptography Extension Policy file but there is no further documentation about it.</p>\n"},{"tags":["java","networking","ip"],"answers":[{"comments":[{"owner":{"account_id":12786,"reputation":5749,"user_id":25343,"display_name":"carson"},"score":4,"creation_date":1235414581,"post_id":578552,"comment_id":390607,"body_markdown":"Be careful using this. There is a bug that will keep it from working correctly. You may want to pull it out of SVN.\n\nhttp://mail-archives.apache.org/mod_mbox/commons-issues/200902.mbox/%3C2039253761.1233796319684.JavaMail.jira@brutus%3E","body":"Be careful using this. There is a bug that will keep it from working correctly. You may want to pull it out of SVN.  <a href=\"http://mail-archives.apache.org/mod_mbox/commons-issues/200902.mbox/%3C2039253761.1233796319684.JavaMail.jira@brutus%3E\" rel=\"nofollow noreferrer\">mail-archives.apache.org/mod_mbox/commons-issues/200902.mbox&zwnj;&#8203;/&hellip;</a>"},{"owner":{"account_id":23143,"reputation":53986,"user_id":57752,"accept_rate":73,"display_name":"Eddie"},"score":0,"creation_date":1235420969,"post_id":578552,"comment_id":391085,"body_markdown":"@carson: Thanks for the warning.  I edited my answer to include this information.","body":"@carson: Thanks for the warning.  I edited my answer to include this information."},{"owner":{"account_id":1240435,"reputation":3209,"user_id":1203182,"display_name":"spy"},"score":1,"creation_date":1548595037,"post_id":578552,"comment_id":95589044,"body_markdown":"doesn&#39;t look like this supports IPv6 either","body":"doesn&#39;t look like this supports IPv6 either"}],"tags":[],"owner":{"account_id":23143,"reputation":53986,"user_id":57752,"accept_rate":73,"display_name":"Eddie"},"comment_count":3,"down_vote_count":0,"up_vote_count":39,"is_accepted":true,"score":39,"last_activity_date":1556909845,"creation_date":1235410490,"answer_id":578552,"question_id":577363,"body_markdown":"&lt;a href=&quot;http://commons.apache.org/net/&quot;&gt;Apache Commons Net&lt;/a&gt; has `org.apache.commons.net.util.SubnetUtils` that appears to satisfy your needs.  It looks like you do something like this:\r\n\r\n    SubnetInfo subnet = (new SubnetUtils(&quot;10.10.10.0&quot;, &quot;255.255.255.128&quot;)).getInfo();\r\n    boolean test = subnet.isInRange(&quot;10.10.10.10&quot;);\r\n\r\nNote, as &lt;a href=&quot;https://stackoverflow.com/users/25343/carson&quot;&gt;carson&lt;/a&gt; points out, that Apache Commons Net has &lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/commons-issues/200902.mbox/%3C2039253761.1233796319684.JavaMail.jira@brutus%3E&quot;&gt;a bug&lt;/a&gt; that prevents it from giving the correct answer in some cases.  Carson suggests using the SVN version to avoid this bug.","title":"How to check if an IP address is from a particular network/netmask in Java?","body":"<p><a href=\"http://commons.apache.org/net/\" rel=\"noreferrer\">Apache Commons Net</a> has <code>org.apache.commons.net.util.SubnetUtils</code> that appears to satisfy your needs.  It looks like you do something like this:</p>\n\n<pre><code>SubnetInfo subnet = (new SubnetUtils(\"10.10.10.0\", \"255.255.255.128\")).getInfo();\nboolean test = subnet.isInRange(\"10.10.10.10\");\n</code></pre>\n\n<p>Note, as <a href=\"https://stackoverflow.com/users/25343/carson\">carson</a> points out, that Apache Commons Net has <a href=\"http://mail-archives.apache.org/mod_mbox/commons-issues/200902.mbox/%3C2039253761.1233796319684.JavaMail.jira@brutus%3E\" rel=\"noreferrer\">a bug</a> that prevents it from giving the correct answer in some cases.  Carson suggests using the SVN version to avoid this bug.</p>\n"},{"comments":[{"owner":{"account_id":476146,"reputation":1754,"user_id":886895,"accept_rate":67,"display_name":"simgineer"},"score":0,"creation_date":1377552142,"post_id":579300,"comment_id":27118015,"body_markdown":"Are ip and netmask ints or longs?","body":"Are ip and netmask ints or longs?"},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1377589022,"post_id":579300,"comment_id":27128642,"body_markdown":"32-bit addresses, IPv4, are ints.  I suspect IPv6 are 64-bit values, but I haven&#39;t used hem myself","body":"32-bit addresses, IPv4, are ints.  I suspect IPv6 are 64-bit values, but I haven&#39;t used hem myself"},{"owner":{"account_id":1573273,"reputation":3033,"user_id":1460467,"accept_rate":88,"display_name":"Alexandre Jacob"},"score":3,"creation_date":1590876807,"post_id":579300,"comment_id":109849043,"body_markdown":"IPv6 are 128-bit values (16 bytes), hence they can&#39;t be stored on a single long","body":"IPv6 are 128-bit values (16 bytes), hence they can&#39;t be stored on a single long"},{"owner":{"account_id":13060408,"reputation":707,"user_id":9437799,"display_name":"Sam Ginrich"},"score":1,"creation_date":1694350317,"post_id":579300,"comment_id":135876995,"body_markdown":"So, in the omitted prologue you convert IPv4 addresses and the network mask to integers","body":"So, in the omitted prologue you convert IPv4 addresses and the network mask to integers"}],"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":4,"down_vote_count":1,"up_vote_count":22,"is_accepted":false,"score":21,"last_activity_date":1695644824,"creation_date":1235422437,"answer_id":579300,"question_id":577363,"body_markdown":"You can also try the following for IPv4, or the equivalent for IPv6.\r\nNOTE: The IP is the address as a 32-bit `int`\r\n\r\n    boolean inSubnet = (ip &amp; netmask) == (subnet &amp; netmask);\r\n\r\nor shorter\r\n\r\n    boolean inSubnet = (ip ^ subnet) &amp; netmask == 0;\r\n","title":"How to check if an IP address is from a particular network/netmask in Java?","body":"<p>You can also try the following for IPv4, or the equivalent for IPv6.\nNOTE: The IP is the address as a 32-bit <code>int</code></p>\n<pre><code>boolean inSubnet = (ip &amp; netmask) == (subnet &amp; netmask);\n</code></pre>\n<p>or shorter</p>\n<pre><code>boolean inSubnet = (ip ^ subnet) &amp; netmask == 0;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":164351,"reputation":5883,"user_id":387048,"accept_rate":100,"display_name":"Omid"},"comment_count":0,"down_vote_count":0,"up_vote_count":56,"is_accepted":false,"score":56,"last_activity_date":1594370686,"creation_date":1483610800,"answer_id":41482123,"question_id":577363,"body_markdown":"Option 1:\r\n----------\r\n\r\nUse [`spring-security-web`][1]&#39;s [IpAddressMatcher][2]. Unlike Apache Commons Net, it supports both ipv4 and ipv6.\r\n\r\n\r\n    import org.springframework.security.web.util.matcher.IpAddressMatcher;\r\n    ...\r\n\r\n    private void checkIpMatch() {\r\n\t\tmatches(&quot;192.168.2.1&quot;, &quot;192.168.2.1&quot;); // true\r\n\t\tmatches(&quot;192.168.2.1&quot;, &quot;192.168.2.0/32&quot;); // false\r\n\t\tmatches(&quot;192.168.2.5&quot;, &quot;192.168.2.0/24&quot;); // true\r\n\t\tmatches(&quot;92.168.2.1&quot;, &quot;fe80:0:0:0:0:0:c0a8:1/120&quot;); // false\r\n\t\tmatches(&quot;fe80:0:0:0:0:0:c0a8:11&quot;, &quot;fe80:0:0:0:0:0:c0a8:1/120&quot;); // true\r\n\t\tmatches(&quot;fe80:0:0:0:0:0:c0a8:11&quot;, &quot;fe80:0:0:0:0:0:c0a8:1/128&quot;); // false\r\n\t\tmatches(&quot;fe80:0:0:0:0:0:c0a8:11&quot;, &quot;192.168.2.0/32&quot;); // false\r\n    }\r\n\r\n    private boolean matches(String ip, String subnet) {\r\n    \tIpAddressMatcher ipAddressMatcher = new IpAddressMatcher(subnet);\r\n    \treturn ipAddressMatcher.matches(ip);\r\n    }\r\n\r\n\r\n----------\r\n## Option 2 (a lightweight solution!): ##\r\n\r\n*The code in previous part works perfectly fine* but it needs `spring-security-web` to be included.\r\n\r\nIf you are not willing to include Spring framework in your project, you may use this class which is a slightly modified version of the [original class][3] from Spring, so that it has no non-JRE dependencies.\r\n\r\n    /*\r\n     * Copyright 2002-2019 the original author or authors.\r\n     *\r\n     * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);\r\n     * you may not use this file except in compliance with the License.\r\n     * You may obtain a copy of the License at\r\n     *\r\n     *      https://www.apache.org/licenses/LICENSE-2.0\r\n     *\r\n     * Unless required by applicable law or agreed to in writing, software\r\n     * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,\r\n     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n     * See the License for the specific language governing permissions and\r\n     * limitations under the License.\r\n     */\r\n    \r\n    import java.net.InetAddress;\r\n    import java.net.UnknownHostException;\r\n    \r\n    /**\r\n     * Matches a request based on IP Address or subnet mask matching against the remote\r\n     * address.\r\n     * &lt;p&gt;\r\n     * Both IPv6 and IPv4 addresses are supported, but a matcher which is configured with an\r\n     * IPv4 address will never match a request which returns an IPv6 address, and vice-versa.\r\n     *\r\n     * @author Luke Taylor\r\n     * @since 3.0.2\r\n     * \r\n     * Slightly modified by omidzk to have zero dependency to any frameworks other than the JRE.\r\n     */\r\n    public final class IpAddressMatcher {\r\n    \tprivate final int nMaskBits;\r\n    \tprivate final InetAddress requiredAddress;\r\n    \r\n    \t/**\r\n    \t * Takes a specific IP address or a range specified using the IP/Netmask (e.g.\r\n    \t * 192.168.1.0/24 or 202.24.0.0/14).\r\n    \t *\r\n    \t * @param ipAddress the address or range of addresses from which the request must\r\n    \t * come.\r\n    \t */\r\n    \tpublic IpAddressMatcher(String ipAddress) {\r\n    \r\n    \t\tif (ipAddress.indexOf(&#39;/&#39;) &gt; 0) {\r\n    \t\t\tString[] addressAndMask = ipAddress.split(&quot;/&quot;);\r\n    \t\t\tipAddress = addressAndMask[0];\r\n    \t\t\tnMaskBits = Integer.parseInt(addressAndMask[1]);\r\n    \t\t}\r\n    \t\telse {\r\n    \t\t\tnMaskBits = -1;\r\n    \t\t}\r\n    \t\trequiredAddress = parseAddress(ipAddress);\r\n    \t\tassert\t(requiredAddress.getAddress().length * 8 &gt;= nMaskBits) :\r\n    \t\t\t\tString.format(&quot;IP address %s is too short for bitmask of length %d&quot;,\r\n    \t\t\t\t\t\tipAddress, nMaskBits);\r\n    \t}\r\n    \r\n    \tpublic boolean matches(String address) {\r\n    \t\tInetAddress remoteAddress = parseAddress(address);\r\n    \r\n    \t\tif (!requiredAddress.getClass().equals(remoteAddress.getClass())) {\r\n    \t\t\treturn false;\r\n    \t\t}\r\n    \r\n    \t\tif (nMaskBits &lt; 0) {\r\n    \t\t\treturn remoteAddress.equals(requiredAddress);\r\n    \t\t}\r\n    \r\n    \t\tbyte[] remAddr = remoteAddress.getAddress();\r\n    \t\tbyte[] reqAddr = requiredAddress.getAddress();\r\n    \r\n    \t\tint nMaskFullBytes = nMaskBits / 8;\r\n    \t\tbyte finalByte = (byte) (0xFF00 &gt;&gt; (nMaskBits &amp; 0x07));\r\n    \r\n    \t\t// System.out.println(&quot;Mask is &quot; + new sun.misc.HexDumpEncoder().encode(mask));\r\n    \r\n    \t\tfor (int i = 0; i &lt; nMaskFullBytes; i++) {\r\n    \t\t\tif (remAddr[i] != reqAddr[i]) {\r\n    \t\t\t\treturn false;\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\tif (finalByte != 0) {\r\n    \t\t\treturn (remAddr[nMaskFullBytes] &amp; finalByte) == (reqAddr[nMaskFullBytes] &amp; finalByte);\r\n    \t\t}\r\n    \r\n    \t\treturn true;\r\n    \t}\r\n    \r\n    \tprivate InetAddress parseAddress(String address) {\r\n    \t\ttry {\r\n    \t\t\treturn InetAddress.getByName(address);\r\n    \t\t}\r\n    \t\tcatch (UnknownHostException e) {\r\n    \t\t\tthrow new IllegalArgumentException(&quot;Failed to parse address&quot; + address, e);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n\r\n\r\n**NOTICE**: Notice that for using this option, it&#39;s your responsibility to carefully examine the [license][4] to make sure by using this code, you are not in violation of any terms mandated by the aforementioned license. (Of course publishing this code to Stackoverflow.com by me is not a violation.)\r\n\r\n\r\n  [1]: https://mvnrepository.com/artifact/org.springframework.security/spring-security-web\r\n  [2]: http://docs.spring.io/spring-security/site/docs/3.2.8.RELEASE/apidocs/org/springframework/security/web/util/matcher/IpAddressMatcher.html#matches(java.lang.String)\r\n  [3]: https://github.com/spring-projects/spring-security/blob/master/web/src/main/java/org/springframework/security/web/util/matcher/IpAddressMatcher.java\r\n  [4]: https://www.apache.org/licenses/LICENSE-2.0","title":"How to check if an IP address is from a particular network/netmask in Java?","body":"<h2>Option 1:</h2>\n<p>Use <a href=\"https://mvnrepository.com/artifact/org.springframework.security/spring-security-web\" rel=\"noreferrer\"><code>spring-security-web</code></a>'s <a href=\"http://docs.spring.io/spring-security/site/docs/3.2.8.RELEASE/apidocs/org/springframework/security/web/util/matcher/IpAddressMatcher.html#matches(java.lang.String)\" rel=\"noreferrer\">IpAddressMatcher</a>. Unlike Apache Commons Net, it supports both ipv4 and ipv6.</p>\n<pre><code>import org.springframework.security.web.util.matcher.IpAddressMatcher;\n...\n\nprivate void checkIpMatch() {\n    matches(&quot;192.168.2.1&quot;, &quot;192.168.2.1&quot;); // true\n    matches(&quot;192.168.2.1&quot;, &quot;192.168.2.0/32&quot;); // false\n    matches(&quot;192.168.2.5&quot;, &quot;192.168.2.0/24&quot;); // true\n    matches(&quot;92.168.2.1&quot;, &quot;fe80:0:0:0:0:0:c0a8:1/120&quot;); // false\n    matches(&quot;fe80:0:0:0:0:0:c0a8:11&quot;, &quot;fe80:0:0:0:0:0:c0a8:1/120&quot;); // true\n    matches(&quot;fe80:0:0:0:0:0:c0a8:11&quot;, &quot;fe80:0:0:0:0:0:c0a8:1/128&quot;); // false\n    matches(&quot;fe80:0:0:0:0:0:c0a8:11&quot;, &quot;192.168.2.0/32&quot;); // false\n}\n\nprivate boolean matches(String ip, String subnet) {\n    IpAddressMatcher ipAddressMatcher = new IpAddressMatcher(subnet);\n    return ipAddressMatcher.matches(ip);\n}\n</code></pre>\n<hr />\n<h2>Option 2 (a lightweight solution!):</h2>\n<p><em>The code in previous part works perfectly fine</em> but it needs <code>spring-security-web</code> to be included.</p>\n<p>If you are not willing to include Spring framework in your project, you may use this class which is a slightly modified version of the <a href=\"https://github.com/spring-projects/spring-security/blob/master/web/src/main/java/org/springframework/security/web/util/matcher/IpAddressMatcher.java\" rel=\"noreferrer\">original class</a> from Spring, so that it has no non-JRE dependencies.</p>\n<pre><code>/*\n * Copyright 2002-2019 the original author or authors.\n *\n * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport java.net.InetAddress;\nimport java.net.UnknownHostException;\n\n/**\n * Matches a request based on IP Address or subnet mask matching against the remote\n * address.\n * &lt;p&gt;\n * Both IPv6 and IPv4 addresses are supported, but a matcher which is configured with an\n * IPv4 address will never match a request which returns an IPv6 address, and vice-versa.\n *\n * @author Luke Taylor\n * @since 3.0.2\n * \n * Slightly modified by omidzk to have zero dependency to any frameworks other than the JRE.\n */\npublic final class IpAddressMatcher {\n    private final int nMaskBits;\n    private final InetAddress requiredAddress;\n\n    /**\n     * Takes a specific IP address or a range specified using the IP/Netmask (e.g.\n     * 192.168.1.0/24 or 202.24.0.0/14).\n     *\n     * @param ipAddress the address or range of addresses from which the request must\n     * come.\n     */\n    public IpAddressMatcher(String ipAddress) {\n\n        if (ipAddress.indexOf('/') &gt; 0) {\n            String[] addressAndMask = ipAddress.split(&quot;/&quot;);\n            ipAddress = addressAndMask[0];\n            nMaskBits = Integer.parseInt(addressAndMask[1]);\n        }\n        else {\n            nMaskBits = -1;\n        }\n        requiredAddress = parseAddress(ipAddress);\n        assert  (requiredAddress.getAddress().length * 8 &gt;= nMaskBits) :\n                String.format(&quot;IP address %s is too short for bitmask of length %d&quot;,\n                        ipAddress, nMaskBits);\n    }\n\n    public boolean matches(String address) {\n        InetAddress remoteAddress = parseAddress(address);\n\n        if (!requiredAddress.getClass().equals(remoteAddress.getClass())) {\n            return false;\n        }\n\n        if (nMaskBits &lt; 0) {\n            return remoteAddress.equals(requiredAddress);\n        }\n\n        byte[] remAddr = remoteAddress.getAddress();\n        byte[] reqAddr = requiredAddress.getAddress();\n\n        int nMaskFullBytes = nMaskBits / 8;\n        byte finalByte = (byte) (0xFF00 &gt;&gt; (nMaskBits &amp; 0x07));\n\n        // System.out.println(&quot;Mask is &quot; + new sun.misc.HexDumpEncoder().encode(mask));\n\n        for (int i = 0; i &lt; nMaskFullBytes; i++) {\n            if (remAddr[i] != reqAddr[i]) {\n                return false;\n            }\n        }\n\n        if (finalByte != 0) {\n            return (remAddr[nMaskFullBytes] &amp; finalByte) == (reqAddr[nMaskFullBytes] &amp; finalByte);\n        }\n\n        return true;\n    }\n\n    private InetAddress parseAddress(String address) {\n        try {\n            return InetAddress.getByName(address);\n        }\n        catch (UnknownHostException e) {\n            throw new IllegalArgumentException(&quot;Failed to parse address&quot; + address, e);\n        }\n    }\n}\n</code></pre>\n<p><strong>NOTICE</strong>: Notice that for using this option, it's your responsibility to carefully examine the <a href=\"https://www.apache.org/licenses/LICENSE-2.0\" rel=\"noreferrer\">license</a> to make sure by using this code, you are not in violation of any terms mandated by the aforementioned license. (Of course publishing this code to Stackoverflow.com by me is not a violation.)</p>\n"},{"comments":[{"owner":{"account_id":13060408,"reputation":707,"user_id":9437799,"display_name":"Sam Ginrich"},"score":0,"creation_date":1694350512,"post_id":45952162,"comment_id":135877028,"body_markdown":"SubnetUtils seems to be that Apache Common class","body":"SubnetUtils seems to be that Apache Common class"}],"tags":[],"owner":{"account_id":2990453,"reputation":324,"user_id":2538133,"display_name":"Hossein"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1504069135,"creation_date":1504068778,"answer_id":45952162,"question_id":577363,"body_markdown":"To check An IP in a subnet, I used isInRange method in SubnetUtils class. But this method have a bug that if your subnet was X, every IP address that lower than X, isInRange return true. For example if your subnet was 10.10.30.0/24 and you want to check 10.10.20.5, this method return true. To deal with this bug I used below code.\r\n\r\n    \r\n    public static void main(String[] args){\r\n        String list = &quot;10.10.20.0/24&quot;;\r\n        String IP1 = &quot;10.10.20.5&quot;;\r\n        String IP2 = &quot;10.10.30.5&quot;;\r\n        SubnetUtils  subnet = new SubnetUtils(list);\r\n        SubnetUtils.SubnetInfo subnetInfo = subnet.getInfo();\r\n        if(MyisInRange(subnetInfo , IP1) == true)\r\n           System.out.println(&quot;True&quot;);\r\n        else \r\n           System.out.println(&quot;False&quot;);\r\n        if(MyisInRange(subnetInfo , IP2) == true)\r\n           System.out.println(&quot;True&quot;);\r\n        else\r\n           System.out.println(&quot;False&quot;);\r\n    }\r\n\r\n    private boolean MyisInRange(SubnetUtils.SubnetInfo info, String Addr )\r\n    {\r\n        int address = info.asInteger( Addr );\r\n        int low = info.asInteger( info.getLowAddress() );\r\n        int high = info.asInteger( info.getHighAddress() );\r\n        return low &lt;= address &amp;&amp; address &lt;= high;\r\n    }","title":"How to check if an IP address is from a particular network/netmask in Java?","body":"<p>To check An IP in a subnet, I used isInRange method in SubnetUtils class. But this method have a bug that if your subnet was X, every IP address that lower than X, isInRange return true. For example if your subnet was 10.10.30.0/24 and you want to check 10.10.20.5, this method return true. To deal with this bug I used below code.</p>\n\n<pre><code>public static void main(String[] args){\n    String list = \"10.10.20.0/24\";\n    String IP1 = \"10.10.20.5\";\n    String IP2 = \"10.10.30.5\";\n    SubnetUtils  subnet = new SubnetUtils(list);\n    SubnetUtils.SubnetInfo subnetInfo = subnet.getInfo();\n    if(MyisInRange(subnetInfo , IP1) == true)\n       System.out.println(\"True\");\n    else \n       System.out.println(\"False\");\n    if(MyisInRange(subnetInfo , IP2) == true)\n       System.out.println(\"True\");\n    else\n       System.out.println(\"False\");\n}\n\nprivate boolean MyisInRange(SubnetUtils.SubnetInfo info, String Addr )\n{\n    int address = info.asInteger( Addr );\n    int low = info.asInteger( info.getLowAddress() );\n    int high = info.asInteger( info.getHighAddress() );\n    return low &lt;= address &amp;&amp; address &lt;= high;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3569155,"reputation":3306,"user_id":2979955,"display_name":"Chris Sprague"},"score":0,"creation_date":1588857079,"post_id":54085333,"comment_id":109065218,"body_markdown":"Excellent library! I really like how easy to use it is and that it works in the vast majority of cases. It does not work correctly for the IPv5 cases stated in @Omid&#39;s response though. Could you incorporate that functionality please?","body":"Excellent library! I really like how easy to use it is and that it works in the vast majority of cases. It does not work correctly for the IPv5 cases stated in @Omid&#39;s response though. Could you incorporate that functionality please?"},{"owner":{"account_id":9144834,"reputation":4430,"user_id":6801443,"display_name":"Sean F"},"score":0,"creation_date":1588903948,"post_id":54085333,"comment_id":109086653,"body_markdown":"The difference is intentional and is simply a difference in interpretation and in library implementation, see https://github.com/seancfoley/IPAddress/issues/40","body":"The difference is intentional and is simply a difference in interpretation and in library implementation, see <a href=\"https://github.com/seancfoley/IPAddress/issues/40\" rel=\"nofollow noreferrer\">github.com/seancfoley/IPAddress/issues/40</a>"}],"tags":[],"owner":{"account_id":9144834,"reputation":4430,"user_id":6801443,"display_name":"Sean F"},"comment_count":2,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1546924463,"creation_date":1546922653,"answer_id":54085333,"question_id":577363,"body_markdown":"[The open-source IPAddress Java library](https://seancfoley.github.io/IPAddress/) will do this in a polymorphic manner for both IPv4 and IPv6 and handles subnets.  Disclaimer: I am the project manager of that library.\r\n\r\nExample code:\r\n\r\n    contains(&quot;10.10.20.0/30&quot;, &quot;10.10.20.3&quot;);\r\n\tcontains(&quot;10.10.20.0/30&quot;, &quot;10.10.20.5&quot;);\r\n\tcontains(&quot;1::/64&quot;, &quot;1::1&quot;);\r\n\tcontains(&quot;1::/64&quot;, &quot;2::1&quot;);\r\n    contains(&quot;1::3-4:5-6&quot;, &quot;1::4:5&quot;);   \t\r\n    contains(&quot;1-2::/64&quot;, &quot;2::&quot;);\r\n    contains(&quot;bla&quot;, &quot;foo&quot;);\r\n\r\n    static void contains(String network, String address) {\r\n\t\tIPAddressString one = new IPAddressString(network);\r\n\t\tIPAddressString two = new IPAddressString(address);\r\n\t\tSystem.out.println(one +  &quot; contains &quot; + two + &quot; &quot; + one.contains(two));\r\n\t}\r\n\r\nOutput:\r\n\r\n    10.10.20.0/30 contains 10.10.20.3 true\r\n    10.10.20.0/30 contains 10.10.20.5 false\r\n    1::/64 contains 1::1 true\r\n    1::/64 contains 2::1 false\r\n    1::3-4:5-6 contains 1::4:5 true\r\n    1-2::/64 contains 2:: true\r\n    bla contains foo false","title":"How to check if an IP address is from a particular network/netmask in Java?","body":"<p><a href=\"https://seancfoley.github.io/IPAddress/\" rel=\"noreferrer\">The open-source IPAddress Java library</a> will do this in a polymorphic manner for both IPv4 and IPv6 and handles subnets.  Disclaimer: I am the project manager of that library.</p>\n\n<p>Example code:</p>\n\n<pre><code>contains(\"10.10.20.0/30\", \"10.10.20.3\");\ncontains(\"10.10.20.0/30\", \"10.10.20.5\");\ncontains(\"1::/64\", \"1::1\");\ncontains(\"1::/64\", \"2::1\");\ncontains(\"1::3-4:5-6\", \"1::4:5\");       \ncontains(\"1-2::/64\", \"2::\");\ncontains(\"bla\", \"foo\");\n\nstatic void contains(String network, String address) {\n    IPAddressString one = new IPAddressString(network);\n    IPAddressString two = new IPAddressString(address);\n    System.out.println(one +  \" contains \" + two + \" \" + one.contains(two));\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>10.10.20.0/30 contains 10.10.20.3 true\n10.10.20.0/30 contains 10.10.20.5 false\n1::/64 contains 1::1 true\n1::/64 contains 2::1 false\n1::3-4:5-6 contains 1::4:5 true\n1-2::/64 contains 2:: true\nbla contains foo false\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2182639,"reputation":812,"user_id":1931774,"display_name":"SkateScout"},"comment_count":0,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1549275622,"creation_date":1549275622,"answer_id":54514071,"question_id":577363,"body_markdown":"here is an Version that works with IPv4 and IPv6 one with Prefix and one with Network Mask.\r\n\r\n    /**\r\n     * Check if IP is within an Subnet defined by Network Address and Network Mask\r\n     * @param  ip\r\n     * @param  net\r\n     * @param  mask\r\n     * @return\r\n     */\r\n    public static final boolean isIpInSubnet(final String ip, final String net, final int prefix) {\r\n        try {\r\n            final byte[] ipBin   = java.net.InetAddress.getByName(ip  ).getAddress();\r\n            final byte[] netBin  = java.net.InetAddress.getByName(net ).getAddress();\r\n            if(ipBin.length  != netBin.length ) return false;\r\n            int p = prefix;\r\n            int i = 0;\r\n            while(p&gt;=8) { if(ipBin[i] != netBin[i] ) return false; ++i; p-=8; }\r\n            final int m = (65280 &gt;&gt; p) &amp; 255;\r\n            if((ipBin[i] &amp; m) != (netBin[i]&amp;m) ) return false;\r\n\r\n            return true;\r\n        } catch(final Throwable t) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Check if IP is within an Subnet defined by Network Address and Network Mask\r\n     * @param  ip\r\n     * @param  net\r\n     * @param  mask\r\n     * @return\r\n     */\r\n    public static final boolean isIpInSubnet(final String ip, final String net, final String mask) {\r\n        try {\r\n            final byte[] ipBin   = java.net.InetAddress.getByName(ip  ).getAddress();\r\n            final byte[] netBin  = java.net.InetAddress.getByName(net ).getAddress();\r\n            final byte[] maskBin = java.net.InetAddress.getByName(mask).getAddress();\r\n            if(ipBin.length  != netBin.length ) return false;\r\n            if(netBin.length != maskBin.length) return false;\r\n            for(int i = 0; i &lt; ipBin.length; ++i) if((ipBin[i] &amp; maskBin[i]) != (netBin[i] &amp; maskBin[i])) return false;\r\n            return true;\r\n        } catch(final Throwable t) {\r\n            return false;\r\n        }\r\n    }\r\n","title":"How to check if an IP address is from a particular network/netmask in Java?","body":"<p>here is an Version that works with IPv4 and IPv6 one with Prefix and one with Network Mask.</p>\n\n<pre><code>/**\n * Check if IP is within an Subnet defined by Network Address and Network Mask\n * @param  ip\n * @param  net\n * @param  mask\n * @return\n */\npublic static final boolean isIpInSubnet(final String ip, final String net, final int prefix) {\n    try {\n        final byte[] ipBin   = java.net.InetAddress.getByName(ip  ).getAddress();\n        final byte[] netBin  = java.net.InetAddress.getByName(net ).getAddress();\n        if(ipBin.length  != netBin.length ) return false;\n        int p = prefix;\n        int i = 0;\n        while(p&gt;=8) { if(ipBin[i] != netBin[i] ) return false; ++i; p-=8; }\n        final int m = (65280 &gt;&gt; p) &amp; 255;\n        if((ipBin[i] &amp; m) != (netBin[i]&amp;m) ) return false;\n\n        return true;\n    } catch(final Throwable t) {\n        return false;\n    }\n}\n\n/**\n * Check if IP is within an Subnet defined by Network Address and Network Mask\n * @param  ip\n * @param  net\n * @param  mask\n * @return\n */\npublic static final boolean isIpInSubnet(final String ip, final String net, final String mask) {\n    try {\n        final byte[] ipBin   = java.net.InetAddress.getByName(ip  ).getAddress();\n        final byte[] netBin  = java.net.InetAddress.getByName(net ).getAddress();\n        final byte[] maskBin = java.net.InetAddress.getByName(mask).getAddress();\n        if(ipBin.length  != netBin.length ) return false;\n        if(netBin.length != maskBin.length) return false;\n        for(int i = 0; i &lt; ipBin.length; ++i) if((ipBin[i] &amp; maskBin[i]) != (netBin[i] &amp; maskBin[i])) return false;\n        return true;\n    } catch(final Throwable t) {\n        return false;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5049338,"reputation":855,"user_id":4054389,"accept_rate":33,"display_name":"djpanda"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1556741421,"creation_date":1556739769,"answer_id":55941780,"question_id":577363,"body_markdown":"I know this is very old question, but I stumbled upon this when I was looking to solve the same problem.\r\n\r\nThere is [commons-ip-math](https://github.com/jgonian/commons-ip-math) library that I believe does a very good job. Please note that as of May 2019, there hasn&#39;t been any updates to the library (Could be that its already very mature library). Its available on [maven-central](https://search.maven.org/artifact/com.github.jgonian/commons-ip-math/1.32/jar)\r\n\r\nIt supports working with both IPv4 and IPv6 addresses. Their brief documentation has examples on how you can check if an address is in a specific range for [IPv4](https://github.com/jgonian/commons-ip-math#ipv4-addresses) and [IPv6](https://github.com/jgonian/commons-ip-math#ipv6-addresses)\r\n\r\nExample for IPv4 range checking:\r\n```\r\n        String input1 = &quot;192.168.1.0&quot;;\r\n        Ipv4 ipv41 = Ipv4.parse(input1);\r\n\r\n        // Using CIDR notation to specify the networkID and netmask\r\n        Ipv4Range range = Ipv4Range.parse(&quot;192.168.0.0/24&quot;);\r\n        boolean result = range.contains(ipv41);\r\n        System.out.println(result); //false\r\n\r\n        String input2 = &quot;192.168.0.251&quot;;\r\n        Ipv4 ipv42 = Ipv4.parse(input2);\r\n\r\n        // Specifying the range with a start and end.\r\n        Ipv4 start = Ipv4.of(&quot;192.168.0.0&quot;);\r\n        Ipv4 end = Ipv4.of(&quot;192.168.0.255&quot;);\r\n        range = Ipv4Range.from(start).to(end);\r\n\r\n        result = range.contains(ipv42); //true\r\n        System.out.println(result);\r\n```\r\n\r\n","title":"How to check if an IP address is from a particular network/netmask in Java?","body":"<p>I know this is very old question, but I stumbled upon this when I was looking to solve the same problem.</p>\n\n<p>There is <a href=\"https://github.com/jgonian/commons-ip-math\" rel=\"nofollow noreferrer\">commons-ip-math</a> library that I believe does a very good job. Please note that as of May 2019, there hasn't been any updates to the library (Could be that its already very mature library). Its available on <a href=\"https://search.maven.org/artifact/com.github.jgonian/commons-ip-math/1.32/jar\" rel=\"nofollow noreferrer\">maven-central</a></p>\n\n<p>It supports working with both IPv4 and IPv6 addresses. Their brief documentation has examples on how you can check if an address is in a specific range for <a href=\"https://github.com/jgonian/commons-ip-math#ipv4-addresses\" rel=\"nofollow noreferrer\">IPv4</a> and <a href=\"https://github.com/jgonian/commons-ip-math#ipv6-addresses\" rel=\"nofollow noreferrer\">IPv6</a></p>\n\n<p>Example for IPv4 range checking:</p>\n\n<pre><code>        String input1 = \"192.168.1.0\";\n        Ipv4 ipv41 = Ipv4.parse(input1);\n\n        // Using CIDR notation to specify the networkID and netmask\n        Ipv4Range range = Ipv4Range.parse(\"192.168.0.0/24\");\n        boolean result = range.contains(ipv41);\n        System.out.println(result); //false\n\n        String input2 = \"192.168.0.251\";\n        Ipv4 ipv42 = Ipv4.parse(input2);\n\n        // Specifying the range with a start and end.\n        Ipv4 start = Ipv4.of(\"192.168.0.0\");\n        Ipv4 end = Ipv4.of(\"192.168.0.255\");\n        range = Ipv4Range.from(start).to(end);\n\n        result = range.contains(ipv42); //true\n        System.out.println(result);\n</code></pre>\n"}],"owner":{"account_id":12422,"reputation":3337,"user_id":24443,"accept_rate":58,"display_name":"miceuz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49647,"favorite_count":0,"down_vote_count":1,"up_vote_count":39,"accepted_answer_id":578552,"answer_count":7,"score":38,"last_activity_date":1695644824,"creation_date":1235389326,"question_id":577363,"body_markdown":"I need to determine if given IP address is from some special network in order to authenticate automatically.","title":"How to check if an IP address is from a particular network/netmask in Java?","body":"<p>I need to determine if given IP address is from some special network in order to authenticate automatically.</p>\n"},{"tags":["java","enums"],"owner":{"account_id":18904360,"reputation":1,"user_id":13791793,"display_name":"Pranav Seth"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695644768,"creation_date":1695642322,"question_id":77172360,"body_markdown":"```\r\npublic class HttpMethodMessageReader extends      AbstractEnumMessageReader&lt;HttpMethod&gt;{}\r\n```\r\nHere argument HttpMethod gives error as “Bound mismatch: The type HttpMethod is not valid substitute for the bounded parameter &lt;E extends Enum&lt;E&gt;&gt; of the type AbstractEnumMessageReader&lt;E&gt;”\r\n\r\nFor Class:\r\n```\r\npublic abstract class AbstractEnumMessageReader&lt;E extends Enum&lt;E&gt;&gt; {\r\n     public       AbstractEnumMessageReader(MessageReader      defaultReader, Class&lt;E&gt; e){\r\nSuper(defaultReader, new EnumMap(e));\r\n}\r\n\r\n\r\npublic class HttpMethodMessageReader extends AbstractEnumMessageReader&lt;HttpMethod&gt;{}\r\n```\r\nHere argument HttpMethod gives error as “Bound mismatch: The type HttpMethod is not valid substitute for the bounded parameter &lt;E extends Enum&lt;E&gt;&gt; of the type AbstractEnumMessageReader&lt;E&gt;”\r\n\r\nFor Class:\r\n```\r\npublic abstract class AbstractEnumMessageReader&lt;E extends Enum&lt;E&gt;&gt; {\r\n     public      AbstractEnumMessageReader(MessageReader      defaultReader, Class&lt;E&gt; e){\r\n     Super(defaultReader, new EnumMap(e));\r\n}\r\n```\r\nSuggest a way to resolve this bound mismatch error\r\n","title":"Bound mismatch error in case of argument being passed for enum type in abstract class","body":"<pre><code>public class HttpMethodMessageReader extends      AbstractEnumMessageReader&lt;HttpMethod&gt;{}\n</code></pre>\n<p>Here argument HttpMethod gives error as “Bound mismatch: The type HttpMethod is not valid substitute for the bounded parameter &lt;E extends Enum&gt; of the type AbstractEnumMessageReader”</p>\n<p>For Class:</p>\n<pre><code>public abstract class AbstractEnumMessageReader&lt;E extends Enum&lt;E&gt;&gt; {\n     public       AbstractEnumMessageReader(MessageReader      defaultReader, Class&lt;E&gt; e){\nSuper(defaultReader, new EnumMap(e));\n}\n\n\npublic class HttpMethodMessageReader extends AbstractEnumMessageReader&lt;HttpMethod&gt;{}\n</code></pre>\n<p>Here argument HttpMethod gives error as “Bound mismatch: The type HttpMethod is not valid substitute for the bounded parameter &lt;E extends Enum&gt; of the type AbstractEnumMessageReader”</p>\n<p>For Class:</p>\n<pre><code>public abstract class AbstractEnumMessageReader&lt;E extends Enum&lt;E&gt;&gt; {\n     public      AbstractEnumMessageReader(MessageReader      defaultReader, Class&lt;E&gt; e){\n     Super(defaultReader, new EnumMap(e));\n}\n</code></pre>\n<p>Suggest a way to resolve this bound mismatch error</p>\n"},{"tags":["java","tomcat","intellij-idea"],"comments":[{"owner":{"account_id":282589,"reputation":8239,"user_id":579580,"accept_rate":85,"display_name":"aviad"},"score":0,"creation_date":1336219885,"post_id":10461702,"comment_id":13511254,"body_markdown":"Check your tomcat configuration inside the intellij - I think you can configure it there","body":"Check your tomcat configuration inside the intellij - I think you can configure it there"},{"owner":{"account_id":36734,"reputation":392137,"user_id":104891,"display_name":"CrazyCoder"},"score":2,"creation_date":1336220458,"post_id":10461702,"comment_id":13511374,"body_markdown":"possible duplicate of [How is Tomcat handled by IntelliJ IDEA 10.5](http://stackoverflow.com/questions/7699354/how-is-tomcat-handled-by-intellij-idea-10-5)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/7699354/how-is-tomcat-handled-by-intellij-idea-10-5\">How is Tomcat handled by IntelliJ IDEA 10.5</a>"}],"answers":[{"tags":[],"owner":{"account_id":1170165,"reputation":23155,"user_id":1147529,"accept_rate":95,"display_name":"Paulius Matulionis"},"comment_count":0,"down_vote_count":1,"up_vote_count":30,"is_accepted":true,"score":29,"last_activity_date":1490697348,"creation_date":1336220121,"answer_id":10461746,"question_id":10461702,"body_markdown":"Yes, If you are using IntelliJ IDEA the application does not turn up on Tomcat `webapps` directory. Your artifacts are in directory, for example:\r\n\r\n    ${dir.to.idea.project}\\YourWebApp\\out\\artifacts\r\n\r\nThis is default directory created by IntelliJ. \r\n\r\nTomcat configuration is in the different folder. I am using windows 7. So it is:\r\n\r\n    C:\\Users\\User\\.IntelliJIdea10\\system\\tomcat\\YourApplicationName","title":"Where is my app placed when deploying to Tomcat using IntelliJ IDEA?","body":"<p>Yes, If you are using IntelliJ IDEA the application does not turn up on Tomcat <code>webapps</code> directory. Your artifacts are in directory, for example:</p>\n\n<pre><code>${dir.to.idea.project}\\YourWebApp\\out\\artifacts\n</code></pre>\n\n<p>This is default directory created by IntelliJ. </p>\n\n<p>Tomcat configuration is in the different folder. I am using windows 7. So it is:</p>\n\n<pre><code>C:\\Users\\User\\.IntelliJIdea10\\system\\tomcat\\YourApplicationName\n</code></pre>\n"},{"tags":[],"owner":{"account_id":380612,"reputation":476,"user_id":734743,"display_name":"dewtea"},"comment_count":0,"down_vote_count":2,"up_vote_count":33,"is_accepted":false,"score":31,"last_activity_date":1402093121,"creation_date":1402093121,"answer_id":24091449,"question_id":10461702,"body_markdown":"Just for reference, the corresponding folder on a mac (for IntelliJ 13) is:\r\n\r\n    /Users/&lt;username&gt;/Library/Caches/IntelliJIdea13/tomcat/","title":"Where is my app placed when deploying to Tomcat using IntelliJ IDEA?","body":"<p>Just for reference, the corresponding folder on a mac (for IntelliJ 13) is:</p>\n\n<pre><code>/Users/&lt;username&gt;/Library/Caches/IntelliJIdea13/tomcat/\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2339925,"reputation":15581,"user_id":2051454,"accept_rate":60,"display_name":"Software Engineer"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1403279740,"creation_date":1403279740,"answer_id":24331233,"question_id":10461702,"body_markdown":"If you&#39;re following the standard maven approach, which is highly recommended, then your output goes to the `target` directory, not `out`. With the maven approach you&#39;ll probably have multiple modules under your project root, and the `target` directory will be found under each module. The web application is then built into an exploded directory named after the module, but with `.war` as an extension. So, you have:\r\n\r\n    project/module/target/webapp.war\r\n\r\n ","title":"Where is my app placed when deploying to Tomcat using IntelliJ IDEA?","body":"<p>If you're following the standard maven approach, which is highly recommended, then your output goes to the <code>target</code> directory, not <code>out</code>. With the maven approach you'll probably have multiple modules under your project root, and the <code>target</code> directory will be found under each module. The web application is then built into an exploded directory named after the module, but with <code>.war</code> as an extension. So, you have:</p>\n\n<pre><code>project/module/target/webapp.war\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1532531,"reputation":36089,"user_id":1429387,"accept_rate":63,"display_name":"naXa stands with Ukraine"},"comment_count":0,"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1681944926,"creation_date":1459263199,"answer_id":36287809,"question_id":10461702,"body_markdown":"If you are using Intellij IDEA your artifacts are deployed directly from output directory: `${project.dir}\\${web.module}\\out\\artifacts` or `${project.dir}\\${web.module}\\target` if you&#39;re using Maven and follow [Standard Directory Layout][1].\r\n\r\nTomcat configuration is in different folder:\r\n&lt;pre&gt;\r\nMac:     /Users/${user}/Library/Caches/IntelliJIdea${version}/tomcat/  \r\nLinux:   /home/${user}/.IntelliJIdea${version}/system/tomcat/\r\nWindows: C:\\Users\\${user}\\AppData\\Local\\JetBrains\\IntelliJIdea${version}\\tomcat\r\n&lt;/pre&gt;\r\n\r\n\r\n  [1]: https://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html","title":"Where is my app placed when deploying to Tomcat using IntelliJ IDEA?","body":"<p>If you are using Intellij IDEA your artifacts are deployed directly from output directory: <code>${project.dir}\\${web.module}\\out\\artifacts</code> or <code>${project.dir}\\${web.module}\\target</code> if you're using Maven and follow <a href=\"https://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html\" rel=\"nofollow noreferrer\">Standard Directory Layout</a>.</p>\n<p>Tomcat configuration is in different folder:</p>\n<pre>\nMac:     /Users/${user}/Library/Caches/IntelliJIdea${version}/tomcat/  \nLinux:   /home/${user}/.IntelliJIdea${version}/system/tomcat/\nWindows: C:\\Users\\${user}\\AppData\\Local\\JetBrains\\IntelliJIdea${version}\\tomcat\n</pre>\n"},{"tags":[],"owner":{"account_id":8538081,"reputation":1031,"user_id":6399074,"display_name":"alan9uo"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1535427583,"creation_date":1535427583,"answer_id":52049749,"question_id":10461702,"body_markdown":"I am new to IntelliJ IDEA. In my config. I add a local tomcat server. My tomcat container is run the project&#39;s target folder.\r\n\r\n&gt; **${your project&#39;s path}\\target\\ ${your project&#39;s name}**\r\n\r\nIn this path ,you will find the file that IDEA has build. And tomcat server would run this folder.","title":"Where is my app placed when deploying to Tomcat using IntelliJ IDEA?","body":"<p>I am new to IntelliJ IDEA. In my config. I add a local tomcat server. My tomcat container is run the project's target folder.</p>\n\n<blockquote>\n  <p><strong>${your project's path}\\target\\ ${your project's name}</strong></p>\n</blockquote>\n\n<p>In this path ,you will find the file that IDEA has build. And tomcat server would run this folder.</p>\n"},{"comments":[{"owner":{"account_id":251960,"reputation":1067,"user_id":529674,"display_name":"Pere"},"score":1,"creation_date":1673445668,"post_id":64168608,"comment_id":132500723,"body_markdown":"Can you specify further, please? Inside the directory I only see a folder with a UUID-like name; inside it there&#39;s a conf, logs, sessions and work sub-directory structure, but neither of them contains the deployed app.","body":"Can you specify further, please? Inside the directory I only see a folder with a UUID-like name; inside it there&#39;s a conf, logs, sessions and work sub-directory structure, but neither of them contains the deployed app."}],"tags":[],"owner":{"account_id":28874,"reputation":12117,"user_id":2352432,"accept_rate":74,"display_name":"Pool"},"comment_count":1,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1681944869,"creation_date":1601628257,"answer_id":64168608,"question_id":10461702,"body_markdown":"From IntelliJ 2020 onwards the Tomcat configuration and work directories have moved to:\r\n\r\n    C:\\Users\\${user}\\AppData\\Local\\JetBrains\\IntelliJIdea${version}\\tomcat","title":"Where is my app placed when deploying to Tomcat using IntelliJ IDEA?","body":"<p>From IntelliJ 2020 onwards the Tomcat configuration and work directories have moved to:</p>\n<pre><code>C:\\Users\\${user}\\AppData\\Local\\JetBrains\\IntelliJIdea${version}\\tomcat\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6383646,"reputation":111,"user_id":4952226,"display_name":"mike"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1629545412,"creation_date":1629545412,"answer_id":68872608,"question_id":10461702,"body_markdown":"The server log output the env variable &quot;CATALINA_BASE&quot; which contains the exploaded location","title":"Where is my app placed when deploying to Tomcat using IntelliJ IDEA?","body":"<p>The server log output the env variable &quot;CATALINA_BASE&quot; which contains the exploaded location</p>\n"},{"tags":[],"owner":{"account_id":29064699,"reputation":1,"user_id":22264581,"display_name":"Ron Trask"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694467757,"creation_date":1694467757,"answer_id":77084878,"question_id":10461702,"body_markdown":"I am still trying to track down my own issue which is a tangent off of this, but the information here helped me.  However, the location of where Intellij puts the tomcat config files on a Mac has changed.  As of 2023 I found the tomcat conf directory here:\r\n\r\n~/Library/Caches/JetBrains/IntelliJIdea2023.1/tomcat/8d90d524-8dae-4654-af6d-8ce0573e0cb3/conf\r\n\r\nThe uuid in this case 8d90d524-8dae-4654-af6d-8ce0573e0cb3 probably ties the configuration to a specific project, because in my case there were multiple UUID directory I found the correct one via ls -lrt which lists the most recent directory last.\r\n\r\nThere seems to be some ambiguity on the where the application is actually deployed, because the server.xml file also points to the tomcat installation webapps directory.  By experiment, I believe that exploded install is left in the target directory. ","title":"Where is my app placed when deploying to Tomcat using IntelliJ IDEA?","body":"<p>I am still trying to track down my own issue which is a tangent off of this, but the information here helped me.  However, the location of where Intellij puts the tomcat config files on a Mac has changed.  As of 2023 I found the tomcat conf directory here:</p>\n<p>~/Library/Caches/JetBrains/IntelliJIdea2023.1/tomcat/8d90d524-8dae-4654-af6d-8ce0573e0cb3/conf</p>\n<p>The uuid in this case 8d90d524-8dae-4654-af6d-8ce0573e0cb3 probably ties the configuration to a specific project, because in my case there were multiple UUID directory I found the correct one via ls -lrt which lists the most recent directory last.</p>\n<p>There seems to be some ambiguity on the where the application is actually deployed, because the server.xml file also points to the tomcat installation webapps directory.  By experiment, I believe that exploded install is left in the target directory.</p>\n"},{"tags":[],"owner":{"account_id":3116542,"reputation":1299,"user_id":3450840,"accept_rate":56,"display_name":"Florian F"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695644738,"creation_date":1695644738,"answer_id":77172621,"question_id":10461702,"body_markdown":"When you start your tomcat, the very first lines in the console tell you all you need.  For example:\r\n\r\n    C:\\opt\\local\\apache-tomcat-8.5.85\\bin\\catalina.bat run\r\n    [2023-09-25 02:08:23,777] Artifact Gradle : ch.hcuge.dpi : yourapp.war    (exploded): Waiting for server connection to start artifact deployment...\r\n    Using CATALINA_BASE:   &quot;C:\\Users\\(user)\\AppData\\Local\\JetBrains\\IntelliJIdea2023.2\\tomcat\\8f03b7c3-fe03-4abd-bfc1-b30021a4aa53&quot;\r\n    Using CATALINA_HOME:   &quot;C:\\opt\\local\\apache-tomcat-8.5.85&quot;\r\n    Using CATALINA_TMPDIR: &quot;C:\\opt\\local\\apache-tomcat-8.5.85\\temp&quot;\r\n    Using JRE_HOME:        &quot;C:\\Program Files\\Java\\jdk-11.0.18+10&quot;\r\n    Using CLASSPATH:       &quot;C:\\opt\\local\\apache-tomcat-8.5.85\\bin\\bootstrap.jar;C:\\opt\\local\\apache-tomcat-8.5.85\\bin\\tomcat-juli.jar&quot;\r\n    Using CATALINA_OPTS:   &quot;&quot;\r\n\r\nCATALINA_BASE is where your project is deployed.  The directory uses a random UUID as a name, but seems to remain the same between deployments.  Besides, from the last modification date you can identify which directory was deployed last.","title":"Where is my app placed when deploying to Tomcat using IntelliJ IDEA?","body":"<p>When you start your tomcat, the very first lines in the console tell you all you need.  For example:</p>\n<pre><code>C:\\opt\\local\\apache-tomcat-8.5.85\\bin\\catalina.bat run\n[2023-09-25 02:08:23,777] Artifact Gradle : ch.hcuge.dpi : yourapp.war    (exploded): Waiting for server connection to start artifact deployment...\nUsing CATALINA_BASE:   &quot;C:\\Users\\(user)\\AppData\\Local\\JetBrains\\IntelliJIdea2023.2\\tomcat\\8f03b7c3-fe03-4abd-bfc1-b30021a4aa53&quot;\nUsing CATALINA_HOME:   &quot;C:\\opt\\local\\apache-tomcat-8.5.85&quot;\nUsing CATALINA_TMPDIR: &quot;C:\\opt\\local\\apache-tomcat-8.5.85\\temp&quot;\nUsing JRE_HOME:        &quot;C:\\Program Files\\Java\\jdk-11.0.18+10&quot;\nUsing CLASSPATH:       &quot;C:\\opt\\local\\apache-tomcat-8.5.85\\bin\\bootstrap.jar;C:\\opt\\local\\apache-tomcat-8.5.85\\bin\\tomcat-juli.jar&quot;\nUsing CATALINA_OPTS:   &quot;&quot;\n</code></pre>\n<p>CATALINA_BASE is where your project is deployed.  The directory uses a random UUID as a name, but seems to remain the same between deployments.  Besides, from the last modification date you can identify which directory was deployed last.</p>\n"}],"owner":{"account_id":205346,"reputation":48091,"user_id":454049,"accept_rate":72,"display_name":"LuckyLuke"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44971,"favorite_count":0,"down_vote_count":0,"up_vote_count":41,"accepted_answer_id":10461746,"answer_count":9,"score":41,"last_activity_date":1695644738,"creation_date":1336219718,"question_id":10461702,"body_markdown":"I am deploying an application from IntelliJ IDEA to the local Tomcat server. I thought the apps you deploy are placed in the `webapps` folder, however it does not turn up there.\r\n\r\nIs this correct? Where is it?","title":"Where is my app placed when deploying to Tomcat using IntelliJ IDEA?","body":"<p>I am deploying an application from IntelliJ IDEA to the local Tomcat server. I thought the apps you deploy are placed in the <code>webapps</code> folder, however it does not turn up there.</p>\n\n<p>Is this correct? Where is it?</p>\n"},{"tags":["java","spring-boot","spring-webflux","reactive-programming","spring-cloud"],"owner":{"account_id":8909143,"reputation":35,"user_id":6650030,"accept_rate":33,"display_name":"Shubham Pratap Singh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":171,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695643825,"creation_date":1687455888,"question_id":76534467,"body_markdown":" When a log statement is encountered inside doOnNext block of flux&lt;DataBuffer&gt;, traceid and spanId not getting populated. but outside of block its getting printed in webFilter. below is the WebFliter implementation in Reactive SpringBoot Application with Sleuth.\r\n\r\n\r\n    import lombok.extern.slf4j.Slf4j;\r\n    import org.apache.commons.io.IOUtils;\r\n    import org.apache.commons.lang.StringUtils;\r\n    import org.reactivestreams.Publisher;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.core.io.buffer.DataBuffer;\r\n    import org.springframework.http.server.reactive.ServerHttpRequest;\r\n    import org.springframework.http.server.reactive.ServerHttpRequestDecorator;\r\n    import org.springframework.http.server.reactive.ServerHttpResponseDecorator;\r\n    import org.springframework.web.server.ServerWebExchange;\r\n    import org.springframework.web.server.WebFilter;\r\n    import org.springframework.web.server.WebFilterChain;\r\n    import reactor.core.publisher.Flux;\r\n    import reactor.core.publisher.Mono;\r\n    \r\n    import java.io.ByteArrayOutputStream;\r\n    import java.io.IOException;\r\n    import java.nio.channels.Channels;\r\n    \r\n    @Slf4j\r\n    @Configuration\r\n    public class APILoggingFilter implements WebFilter {\r\n    \r\n        @Override\r\n        public Mono&lt;Void&gt; filter(ServerWebExchange exchange, WebFilterChain chain) {\r\n            ServerHttpRequest httpRequest = exchange.getRequest();\r\n            final String httpUrl = httpRequest.getURI().toString();\r\n    \r\n            ServerHttpRequestDecorator loggingServerHttpRequestDecorator = new ServerHttpRequestDecorator(exchange.getRequest()) {\r\n                String requestBody = &quot;&quot;;\r\n    \r\n                @Override\r\n                public Flux&lt;DataBuffer&gt; getBody() {\r\n                    log.info(&quot;Service Request URL before {}&quot;, httpUrl);\r\n                    Flux&lt;DataBuffer&gt; response =  super.getBody().doOnNext(dataBuffer -&gt; {\r\n                        try (ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream()) {\r\n                            Channels.newChannel(byteArrayOutputStream).write(dataBuffer.asByteBuffer().asReadOnlyBuffer());\r\n                            requestBody = IOUtils.toString(byteArrayOutputStream.toByteArray(), &quot;UTF-8&quot;).replaceAll(System.lineSeparator(),StringUtils.EMPTY);\r\n                            log.info(&quot; Service Request json, {}&quot;, httpUrl, requestBody);\r\n                        } catch (IOException e) {\r\n                            log.info(&quot;Service Request, URL {}, {}, {}&quot;, httpUrl, requestBody, e);\r\n                        }\r\n                    });\r\n                    log.info(&quot;Service Request URL after {}&quot;, httpUrl);\r\n                    return response;\r\n                }\r\n            };\r\n    \r\n            ServerHttpResponseDecorator loggingServerHttpResponseDecorator = new ServerHttpResponseDecorator(exchange.getResponse()) {\r\n                String responseBody = &quot;&quot;;\r\n                @Override\r\n                public Mono&lt;Void&gt; writeWith(Publisher&lt;? extends DataBuffer&gt; body) {\r\n                    Mono&lt;DataBuffer&gt; buffer = Mono.from(body);\r\n                    log.info(&quot;Service Response, URL {}&quot;, httpUrl);\r\n                    return super.writeWith(buffer.doOnNext(dataBuffer -&gt; {\r\n                        try (ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream()) {\r\n                            Channels.newChannel(byteArrayOutputStream).write(dataBuffer.asByteBuffer().asReadOnlyBuffer());\r\n                            responseBody = IOUtils.toString(byteArrayOutputStream.toByteArray(), &quot;UTF-8&quot;).replaceAll(System.lineSeparator(), StringUtils.EMPTY);\r\n                            log.info(&quot;Service Response, URL {}, {}&quot;, httpUrl, responseBody);\r\n                        } catch (Exception e) {\r\n                            log.info(&quot;Service Response, URL {}, {}, {}&quot;, httpUrl, responseBody, e);\r\n                        }\r\n                    }));\r\n                }\r\n            };\r\n            return chain.filter(exchange.mutate().request(loggingServerHttpRequestDecorator).response(loggingServerHttpResponseDecorator).build());\r\n        }\r\n    \r\n    }\r\n\r\nLogs Printed :\r\n\r\n2023-06-22 22:43:40.859  INFO [emp-mgmt,4edae7c9825b4698,4edae7c9825b4698,false] 6596 --- [ctor-http-nio-3] c.a.e.p.config.APILoggingFilter          : Service Request URL before http://localhost:8083/api/v1/addEmp\r\n2023-06-22 22:43:40.867  INFO [emp-mgmt,4edae7c9825b4698,4edae7c9825b4698,false] 6596 --- [ctor-http-nio-3] c.a.e.p.config.APILoggingFilter          : Service Request URL after http://localhost:8083/api/v1/addEmp\r\n2023-06-22 22:43:40.935  INFO **[emp-mgmt,,,]** 6596 --- [ctor-http-nio-3] c.a.e.p.config.APILoggingFilter          :  Service Request json, http://localhost:8083/api/v1/getEmp, {\r\n    &quot;uId&quot;:null,\r\n\t&quot;empId&quot;: &quot;932046783773&quot;,\r\n    &quot;empName&quot;: &quot;Adam&quot;,\r\n    &quot;idNumber&quot;: &quot;860937&quot;\r\n}\r\n\r\n\r\n\r\n2023-06-22 22:43:49.270  INFO [emp-mgmt,4edae7c9825b4698,4edae7c9825b4698,false] 6596 --- [     parallel-2] config.APILoggingFilter          : Service Response, URL http://localhost:8083/api/v1/addEmp\r\n2023-06-22 22:43:49.283  INFO [emp-mgmt,4edae7c9825b4698,4edae7c9825b4698,false] 6596 --- [     parallel-2] config.APILoggingFilter          : Service Response, URL http://localhost:8083/api/v1/addEmp, {\r\n    &quot;uId&quot;:76543467,\r\n    &quot;empId&quot;: &quot;932046783773&quot;,\r\n    &quot;empName&quot;: &quot;Adam&quot;,\r\n    &quot;idNumber&quot;: &quot;860937&quot;\r\n}\r\n\r\n### Log statement with &quot;Service Request json&quot; does not have traceId and SpanId. ###\r\nUsing spring-webFlux:5.1.5.RELEASE and Sleuth 2.1.0.RELEASE.\r\nPlease help. \r\n\r\n\r\n","title":"TraceId / SpanId is not getting printed inside flux doOnNext lambda block in webflux application with Sleuth","body":"<p>When a log statement is encountered inside doOnNext block of flux, traceid and spanId not getting populated. but outside of block its getting printed in webFilter. below is the WebFliter implementation in Reactive SpringBoot Application with Sleuth.</p>\n<pre><code>import lombok.extern.slf4j.Slf4j;\nimport org.apache.commons.io.IOUtils;\nimport org.apache.commons.lang.StringUtils;\nimport org.reactivestreams.Publisher;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.core.io.buffer.DataBuffer;\nimport org.springframework.http.server.reactive.ServerHttpRequest;\nimport org.springframework.http.server.reactive.ServerHttpRequestDecorator;\nimport org.springframework.http.server.reactive.ServerHttpResponseDecorator;\nimport org.springframework.web.server.ServerWebExchange;\nimport org.springframework.web.server.WebFilter;\nimport org.springframework.web.server.WebFilterChain;\nimport reactor.core.publisher.Flux;\nimport reactor.core.publisher.Mono;\n\nimport java.io.ByteArrayOutputStream;\nimport java.io.IOException;\nimport java.nio.channels.Channels;\n\n@Slf4j\n@Configuration\npublic class APILoggingFilter implements WebFilter {\n\n    @Override\n    public Mono&lt;Void&gt; filter(ServerWebExchange exchange, WebFilterChain chain) {\n        ServerHttpRequest httpRequest = exchange.getRequest();\n        final String httpUrl = httpRequest.getURI().toString();\n\n        ServerHttpRequestDecorator loggingServerHttpRequestDecorator = new ServerHttpRequestDecorator(exchange.getRequest()) {\n            String requestBody = &quot;&quot;;\n\n            @Override\n            public Flux&lt;DataBuffer&gt; getBody() {\n                log.info(&quot;Service Request URL before {}&quot;, httpUrl);\n                Flux&lt;DataBuffer&gt; response =  super.getBody().doOnNext(dataBuffer -&gt; {\n                    try (ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream()) {\n                        Channels.newChannel(byteArrayOutputStream).write(dataBuffer.asByteBuffer().asReadOnlyBuffer());\n                        requestBody = IOUtils.toString(byteArrayOutputStream.toByteArray(), &quot;UTF-8&quot;).replaceAll(System.lineSeparator(),StringUtils.EMPTY);\n                        log.info(&quot; Service Request json, {}&quot;, httpUrl, requestBody);\n                    } catch (IOException e) {\n                        log.info(&quot;Service Request, URL {}, {}, {}&quot;, httpUrl, requestBody, e);\n                    }\n                });\n                log.info(&quot;Service Request URL after {}&quot;, httpUrl);\n                return response;\n            }\n        };\n\n        ServerHttpResponseDecorator loggingServerHttpResponseDecorator = new ServerHttpResponseDecorator(exchange.getResponse()) {\n            String responseBody = &quot;&quot;;\n            @Override\n            public Mono&lt;Void&gt; writeWith(Publisher&lt;? extends DataBuffer&gt; body) {\n                Mono&lt;DataBuffer&gt; buffer = Mono.from(body);\n                log.info(&quot;Service Response, URL {}&quot;, httpUrl);\n                return super.writeWith(buffer.doOnNext(dataBuffer -&gt; {\n                    try (ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream()) {\n                        Channels.newChannel(byteArrayOutputStream).write(dataBuffer.asByteBuffer().asReadOnlyBuffer());\n                        responseBody = IOUtils.toString(byteArrayOutputStream.toByteArray(), &quot;UTF-8&quot;).replaceAll(System.lineSeparator(), StringUtils.EMPTY);\n                        log.info(&quot;Service Response, URL {}, {}&quot;, httpUrl, responseBody);\n                    } catch (Exception e) {\n                        log.info(&quot;Service Response, URL {}, {}, {}&quot;, httpUrl, responseBody, e);\n                    }\n                }));\n            }\n        };\n        return chain.filter(exchange.mutate().request(loggingServerHttpRequestDecorator).response(loggingServerHttpResponseDecorator).build());\n    }\n\n}\n</code></pre>\n<p>Logs Printed :</p>\n<p>2023-06-22 22:43:40.859  INFO [emp-mgmt,4edae7c9825b4698,4edae7c9825b4698,false] 6596 --- [ctor-http-nio-3] c.a.e.p.config.APILoggingFilter          : Service Request URL before http://localhost:8083/api/v1/addEmp\n2023-06-22 22:43:40.867  INFO [emp-mgmt,4edae7c9825b4698,4edae7c9825b4698,false] 6596 --- [ctor-http-nio-3] c.a.e.p.config.APILoggingFilter          : Service Request URL after http://localhost:8083/api/v1/addEmp\n2023-06-22 22:43:40.935  INFO <strong>[emp-mgmt,,,]</strong> 6596 --- [ctor-http-nio-3] c.a.e.p.config.APILoggingFilter          :  Service Request json, http://localhost:8083/api/v1/getEmp, {\n&quot;uId&quot;:null,\n&quot;empId&quot;: &quot;932046783773&quot;,\n&quot;empName&quot;: &quot;Adam&quot;,\n&quot;idNumber&quot;: &quot;860937&quot;\n}</p>\n<p>2023-06-22 22:43:49.270  INFO [emp-mgmt,4edae7c9825b4698,4edae7c9825b4698,false] 6596 --- [     parallel-2] config.APILoggingFilter          : Service Response, URL http://localhost:8083/api/v1/addEmp\n2023-06-22 22:43:49.283  INFO [emp-mgmt,4edae7c9825b4698,4edae7c9825b4698,false] 6596 --- [     parallel-2] config.APILoggingFilter          : Service Response, URL http://localhost:8083/api/v1/addEmp, {\n&quot;uId&quot;:76543467,\n&quot;empId&quot;: &quot;932046783773&quot;,\n&quot;empName&quot;: &quot;Adam&quot;,\n&quot;idNumber&quot;: &quot;860937&quot;\n}</p>\n<h3>Log statement with &quot;Service Request json&quot; does not have traceId and SpanId.</h3>\n<p>Using spring-webFlux:5.1.5.RELEASE and Sleuth 2.1.0.RELEASE.\nPlease help.</p>\n"},{"tags":["java","sql","spring","mybatis"],"comments":[{"owner":{"account_id":8591840,"reputation":46475,"user_id":6436191,"display_name":"The Impaler"},"score":0,"creation_date":1695646184,"post_id":77172362,"comment_id":136048054,"body_markdown":"Now, what do you want to do when the list is empty? Return the entire table, no rows at all, something else? A simple `&lt;if test=&quot;list.size == 0&quot;&gt;` can produce the behavior you want.","body":"Now, what do you want to do when the list is empty? Return the entire table, no rows at all, something else? A simple <code>&lt;if test=&quot;list.size == 0&quot;&gt;</code> can produce the behavior you want."},{"owner":{"account_id":9921152,"reputation":79,"user_id":7344226,"accept_rate":71,"display_name":"senz"},"score":0,"creation_date":1695657902,"post_id":77172362,"comment_id":136050774,"body_markdown":"@TheImpaler I know this solution, but now I want to know, why there will be error sql, because I have already judged the empty in the java code.","body":"@TheImpaler I know this solution, but now I want to know, why there will be error sql, because I have already judged the empty in the java code."},{"owner":{"account_id":9921152,"reputation":79,"user_id":7344226,"accept_rate":71,"display_name":"senz"},"score":0,"creation_date":1695659287,"post_id":77172362,"comment_id":136051031,"body_markdown":"@TheImpaler I know the answer, because parallelStream makes the size different from the real length of the collection.","body":"@TheImpaler I know the answer, because parallelStream makes the size different from the real length of the collection."},{"owner":{"account_id":8591840,"reputation":46475,"user_id":6436191,"display_name":"The Impaler"},"score":0,"creation_date":1695668888,"post_id":77172362,"comment_id":136052678,"body_markdown":"I fail to understand your question. You say &quot;...Sometimes the production sql is...&quot;; well, that&#39;s not a valid SQL statement and will crash your application. What do you need?","body":"I fail to understand your question. You say &quot;...Sometimes the production sql is...&quot;; well, that&#39;s not a valid SQL statement and will crash your application. What do you need?"}],"owner":{"account_id":9921152,"reputation":79,"user_id":7344226,"accept_rate":71,"display_name":"senz"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695643256,"creation_date":1695642343,"question_id":77172362,"body_markdown":"I&#39;ve already determined in the java code that the list is not empty before executing the sql, but occasionally there are sql&#39;s here that are wrong.\r\n\r\nSometimes the production sql is\r\n\r\n    select name from user where id in\r\n\r\n\r\nService.java      ObjectUtils is org.apache.commons.lang3.ObjectUtils\r\n\r\nI know can&#39;t add directly in parallelStream, should use Collectors.toSet.\r\n\r\nWhat I&#39;d like to know is that this error sql is related to list.parallelStream\r\n  \r\n    public List&lt;String&gt; queryByIds() {\r\n        Set&lt;Long&gt; ids = new HashSet&lt;&gt;();\r\n        list.parallelStream().forEach(obj -&gt; {\r\n           ids.add(obj.id)\r\n        }\r\n\r\n        if (ObjectUtils.isEmpty(ids)){\r\n            return Collections.emptyList();\r\n        }\r\n        return mapper.queryByIds(ids);\r\n    }\r\n\r\nmapper.java \r\n\r\n    List&lt;String&gt; queryByIds(@Param(&quot;list&quot;) Set&lt;Long&gt; ids);\r\n\r\nmapper.xml\r\n\r\n    &lt;select id=&quot;queryByIds&quot; resultType=&quot;java.lang.String&quot;&gt;\r\n        select name from user where id in\r\n        &lt;foreach collection=&quot;list&quot; item=&quot;item&quot; index=&quot;index&quot; open=&quot;(&quot; separator=&quot;,&quot; close=&quot;)&quot;&gt;\r\n            #{item}\r\n        &lt;/foreach&gt;\r\n    &lt;/select&gt;\r\n\r\n\r\n","title":"mybatis list foreach is null","body":"<p>I've already determined in the java code that the list is not empty before executing the sql, but occasionally there are sql's here that are wrong.</p>\n<p>Sometimes the production sql is</p>\n<pre><code>select name from user where id in\n</code></pre>\n<p>Service.java      ObjectUtils is org.apache.commons.lang3.ObjectUtils</p>\n<p>I know can't add directly in parallelStream, should use Collectors.toSet.</p>\n<p>What I'd like to know is that this error sql is related to list.parallelStream</p>\n<pre><code>public List&lt;String&gt; queryByIds() {\n    Set&lt;Long&gt; ids = new HashSet&lt;&gt;();\n    list.parallelStream().forEach(obj -&gt; {\n       ids.add(obj.id)\n    }\n\n    if (ObjectUtils.isEmpty(ids)){\n        return Collections.emptyList();\n    }\n    return mapper.queryByIds(ids);\n}\n</code></pre>\n<p>mapper.java</p>\n<pre><code>List&lt;String&gt; queryByIds(@Param(&quot;list&quot;) Set&lt;Long&gt; ids);\n</code></pre>\n<p>mapper.xml</p>\n<pre><code>&lt;select id=&quot;queryByIds&quot; resultType=&quot;java.lang.String&quot;&gt;\n    select name from user where id in\n    &lt;foreach collection=&quot;list&quot; item=&quot;item&quot; index=&quot;index&quot; open=&quot;(&quot; separator=&quot;,&quot; close=&quot;)&quot;&gt;\n        #{item}\n    &lt;/foreach&gt;\n&lt;/select&gt;\n</code></pre>\n"},{"tags":["java","swt"],"comments":[{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1695643779,"post_id":77172423,"comment_id":136047556,"body_markdown":"This works fine for me on macOS 13.6 with SWT 4962r3 from Eclipse 4.29 (2023-09)","body":"This works fine for me on macOS 13.6 with SWT 4962r3 from Eclipse 4.29 (2023-09)"},{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1695644529,"post_id":77172423,"comment_id":136047711,"body_markdown":"I do get both Selection and DefaultSelection events for double click. I also note that none of the standard Mac items on the tray support double click so I don&#39;t think it is something a Mac user would expect.","body":"I do get both Selection and DefaultSelection events for double click. I also note that none of the standard Mac items on the tray support double click so I don&#39;t think it is something a Mac user would expect."},{"owner":{"account_id":9796447,"reputation":392,"user_id":7259317,"display_name":"A7exSchin"},"score":0,"creation_date":1695645988,"post_id":77172423,"comment_id":136048014,"body_markdown":"@greg-449 Thanks for the quick reply. If you want to check the full source, you can find it here:\nhttps://github.com/klibio/EclipseInstallationManager/blob/main/eim.tray/src/tray/impl/TrayApplication.java\n\nI want to keep the set of features for this programm completely the same for all platforms. As the double click &quot;quickaction&quot; feature is relatively important I want to enable Mac users to have this feature too.\n\nIf you have any hints on why this doesnt work properly for me, I would appreciate that greatly. (You could even download the latest release and try it out yourself)","body":"@greg-449 Thanks for the quick reply. If you want to check the full source, you can find it here: <a href=\"https://github.com/klibio/EclipseInstallationManager/blob/main/eim.tray/src/tray/impl/TrayApplication.java\" rel=\"nofollow noreferrer\">github.com/klibio/EclipseInstallationManager/blob/main/eim.t&zwnj;&#8203;ray/&hellip;</a>  I want to keep the set of features for this programm completely the same for all platforms. As the double click &quot;quickaction&quot; feature is relatively important I want to enable Mac users to have this feature too.  If you have any hints on why this doesnt work properly for me, I would appreciate that greatly. (You could even download the latest release and try it out yourself)"},{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1695709469,"post_id":77172423,"comment_id":136056745,"body_markdown":"Sorry, but I am not going to do that. This is all very non-standard for a Mac app. The standard behaviour for icons on the Mac Menu Bar is to display a menu on left click, possibly with an extended menu if the ⌥ (Option Key) is held down. No right click action, no double click action.","body":"Sorry, but I am not going to do that. This is all very non-standard for a Mac app. The standard behaviour for icons on the Mac Menu Bar is to display a menu on left click, possibly with an extended menu if the ⌥ (Option Key) is held down. No right click action, no double click action."},{"owner":{"account_id":9796447,"reputation":392,"user_id":7259317,"display_name":"A7exSchin"},"score":0,"creation_date":1695724252,"post_id":77172423,"comment_id":136059672,"body_markdown":"@greg-449 I can understand that. How would I react to the Option Key + Left click event then? A quick google search did not result in any valuable information.","body":"@greg-449 I can understand that. How would I react to the Option Key + Left click event then? A quick google search did not result in any valuable information."},{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1695726239,"post_id":77172423,"comment_id":136060080,"body_markdown":"`(event.stateMask &amp; SWT.ALT) != 0` tests the Option key being pressed in the selection listener.","body":"<code>(event.stateMask &amp; SWT.ALT) != 0</code> tests the Option key being pressed in the selection listener."},{"owner":{"account_id":9796447,"reputation":392,"user_id":7259317,"display_name":"A7exSchin"},"score":0,"creation_date":1695727057,"post_id":77172423,"comment_id":136060230,"body_markdown":"@greg-449 Thanks again, I&#39;ll try and rethink the Tray Icon Menus for MacOS. Maybe I will add the possibilities to the extended menu.","body":"@greg-449 Thanks again, I&#39;ll try and rethink the Tray Icon Menus for MacOS. Maybe I will add the possibilities to the extended menu."}],"owner":{"account_id":9796447,"reputation":392,"user_id":7259317,"display_name":"A7exSchin"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695642845,"creation_date":1695642845,"question_id":77172423,"body_markdown":"I have a somewhat simple SWT Application which creates a TrayIcon. The TrayIcon is supposed to reacht to Selection Events (single left click), MenuDetect events (single right click) and a DefaultSelection event (double left click).\r\n\r\nWhile this works fine using Windows, under MacOS only the Selection and MenuDetect events work. The DefaultSelection event does only work if you are spamming the Tray Icon like a maniac and even then not reliably - completely unusable.\r\n\r\nThe (shortened) code used is\r\n\r\n    Display display = Display.getDefault();\r\n    Shell shell = new Shell(display);\r\n    Tray tray = display.getSystemTray();\r\n    final TrayItem item = new TrayItem(tray, SWT.NONE);\r\n    \r\n    item.addListener(SWT.Selection, event -&gt; showMenu());\r\n    item.addListener(SWT.MenuDetect, event -&gt; showContextMenu());\r\n    item.addListener(SWT.DefaultSelection, event -&gt; quickAction());\r\n\r\nIs there any way to properly do this? I tried to write my own Listener for a doubleclick event, but because it is a TrayItem, I cannot add a MouseListener so I cannot stop the first function which was fired before the second one.\r\nAny idea is appreciated!\r\n\r\n","title":"Java SWT - Default Selection unusable on MacOS?","body":"<p>I have a somewhat simple SWT Application which creates a TrayIcon. The TrayIcon is supposed to reacht to Selection Events (single left click), MenuDetect events (single right click) and a DefaultSelection event (double left click).</p>\n<p>While this works fine using Windows, under MacOS only the Selection and MenuDetect events work. The DefaultSelection event does only work if you are spamming the Tray Icon like a maniac and even then not reliably - completely unusable.</p>\n<p>The (shortened) code used is</p>\n<pre><code>Display display = Display.getDefault();\nShell shell = new Shell(display);\nTray tray = display.getSystemTray();\nfinal TrayItem item = new TrayItem(tray, SWT.NONE);\n\nitem.addListener(SWT.Selection, event -&gt; showMenu());\nitem.addListener(SWT.MenuDetect, event -&gt; showContextMenu());\nitem.addListener(SWT.DefaultSelection, event -&gt; quickAction());\n</code></pre>\n<p>Is there any way to properly do this? I tried to write my own Listener for a doubleclick event, but because it is a TrayItem, I cannot add a MouseListener so I cannot stop the first function which was fired before the second one.\nAny idea is appreciated!</p>\n"},{"tags":["java","c++","libusb"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1695371777,"post_id":77155965,"comment_id":136018286,"body_markdown":"*but the problem is that I can&#39;t find a way to check or connect those two strings to see if it&#39;s the same device.* So, you need some sort of UID?","body":"<i>but the problem is that I can&#39;t find a way to check or connect those two strings to see if it&#39;s the same device.</i> So, you need some sort of UID?"},{"owner":{"account_id":9576179,"reputation":83,"user_id":7112195,"accept_rate":75,"display_name":"TerZer"},"score":0,"creation_date":1695373351,"post_id":77155965,"comment_id":136018581,"body_markdown":"Kinda, yeah. I need to get the same UID via libusb and from MF to check if this is the same device","body":"Kinda, yeah. I need to get the same UID via libusb and from MF to check if this is the same device"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1695377326,"post_id":77155965,"comment_id":136019441,"body_markdown":"I would have thought your current `serial` will give you exactly that ..?","body":"I would have thought your current <code>serial</code> will give you exactly that ..?"},{"owner":{"account_id":9576179,"reputation":83,"user_id":7112195,"accept_rate":75,"display_name":"TerZer"},"score":0,"creation_date":1695377820,"post_id":77155965,"comment_id":136019545,"body_markdown":"`serial` returns - `$Rev:0001_CID:0009011D01502130_SN:76543210$`\nsymlink returns - `\\\\?\\usb#vid_----&amp;pid_----&amp;mi_00#8&amp;20ba1d94&amp;0&amp;0000#{e5323777-f976-4f5b-9b55-b94699c46e44}\\global`\nMy current think process is to try to get the serial value from symlink somehow.","body":"<code>serial</code> returns - <code>$Rev:0001_CID:0009011D01502130_SN:76543210$</code> symlink returns - <code>\\\\?\\usb#vid_----&amp;pid_----&amp;mi_00#8&amp;20ba1d94&amp;0&amp;0000#{e5323777-&zwnj;&#8203;f976-4f5b-9b55-b9469&zwnj;&#8203;9c46e44}\\global</code> My current think process is to try to get the serial value from symlink somehow."}],"answers":[{"tags":[],"owner":{"account_id":9576179,"reputation":83,"user_id":7112195,"accept_rate":75,"display_name":"TerZer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695642080,"creation_date":1695642080,"answer_id":77172337,"question_id":77155965,"body_markdown":"So after some time, I discovered that the video streaming device is a child of the whole USB device. So this is how I get same serial number same as libusb:\r\n```\r\nCONFIGRET LocateParent(PCWSTR pszDeviceInterface, WCHAR* parentDeviceID)\r\n{\r\n    WCHAR buf[1024];\r\n\r\n    DEVPROPTYPE PropertyType;\r\n\r\n    ULONG BufferSize = sizeof(buf);\r\n\r\n    CONFIGRET err;\r\n\r\n    if (!(err = CM_Get_Device_Interface_Property(pszDeviceInterface, &amp;DEVPKEY_Device_InstanceId, &amp;PropertyType, (PBYTE)buf, &amp;BufferSize, 0))) {\r\n        if (PropertyType == DEVPROP_TYPE_STRING) {\r\n            DEVINST dnDevInst;\r\n            if (!(err = CM_Locate_DevNode(&amp;dnDevInst, buf, CM_LOCATE_DEVNODE_NORMAL))) {\r\n                // Get Parent Device ID\r\n                DEVINST devInstParent;\r\n                err = CM_Get_Parent(&amp;devInstParent, dnDevInst, 0);\r\n                if (err == CR_SUCCESS) {\r\n                    return CM_Get_Device_ID(devInstParent, parentDeviceID, 1024, 0);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            err = CR_WRONG_TYPE;\r\n        }\r\n    }\r\n    return err;\r\n}\r\n```","title":"How to connect to libusb device using symbolic link?","body":"<p>So after some time, I discovered that the video streaming device is a child of the whole USB device. So this is how I get same serial number same as libusb:</p>\n<pre><code>CONFIGRET LocateParent(PCWSTR pszDeviceInterface, WCHAR* parentDeviceID)\n{\n    WCHAR buf[1024];\n\n    DEVPROPTYPE PropertyType;\n\n    ULONG BufferSize = sizeof(buf);\n\n    CONFIGRET err;\n\n    if (!(err = CM_Get_Device_Interface_Property(pszDeviceInterface, &amp;DEVPKEY_Device_InstanceId, &amp;PropertyType, (PBYTE)buf, &amp;BufferSize, 0))) {\n        if (PropertyType == DEVPROP_TYPE_STRING) {\n            DEVINST dnDevInst;\n            if (!(err = CM_Locate_DevNode(&amp;dnDevInst, buf, CM_LOCATE_DEVNODE_NORMAL))) {\n                // Get Parent Device ID\n                DEVINST devInstParent;\n                err = CM_Get_Parent(&amp;devInstParent, dnDevInst, 0);\n                if (err == CR_SUCCESS) {\n                    return CM_Get_Device_ID(devInstParent, parentDeviceID, 1024, 0);\n                }\n            }\n        }\n        else {\n            err = CR_WRONG_TYPE;\n        }\n    }\n    return err;\n}\n</code></pre>\n"}],"owner":{"account_id":9576179,"reputation":83,"user_id":7112195,"accept_rate":75,"display_name":"TerZer"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77172337,"answer_count":1,"score":0,"last_activity_date":1695642080,"creation_date":1695371132,"question_id":77155965,"body_markdown":"I have a video-streaming device that I am accessing using Microsoft Media Foundation. It has additional functionality using bulk. I want to connect to it using libusb. My problem is that I need to connect precisely to the same device as with `IMFMediaSource`. Connecting 2 same devices I can&#39;t find a way to separate them. VID and PID are the same. The only thing I have from MF is a symlink: `\\\\?\\usb#vid_----&amp;pid_----&amp;mi_00#8&amp;20ba1d94&amp;0&amp;0000#{e5323777-f976-4f5b-9b55-b94699c46e44}\\global` (removed vid and pid). With libusb using device descriptor I can read Serial: `$Rev:0001_CID:0009011D01502130_SN:76543210$`. On connected devices they are different, but the problem is that I can&#39;t find a way to check or connect those two strings to see if it&#39;s the same device.\r\nCode where I get symlink:\r\n```\r\n    IMFAttributes* pAttributes = NULL;\r\n    IMFActivate** ppDevices = NULL;\r\n\r\n    HRESULT hr = EnumerateVideoDevices(pAttributes, ppDevices, availDeviceCount);\r\n\r\n    availDevice = new Device[availDeviceCount]; // initialise empty return array\r\n\r\n    // populate return array w/ devices\r\n    for (int i = 0; i &lt; availDeviceCount; i++)\r\n    {\r\n        wchar_t* deviceFriendlyName;\r\n        UINT len = 0;\r\n\r\n        hr = ppDevices[i]-&gt;GetAllocatedString(MF_DEVSOURCE_ATTRIBUTE_FRIENDLY_NAME, &amp;deviceFriendlyName, &amp;len);\r\n        Device newDevice{ i, ToNarrow(deviceFriendlyName), NULL, 0 }; // TODO: check that change from unicode to String doesn&#39;t screw anything up (see ToNarrow, misc.h)\r\n\r\n        // retain for device change notificatios\r\n        ppDevices[i]-&gt;GetAllocatedString(MF_DEVSOURCE_ATTRIBUTE_SOURCE_TYPE_VIDCAP_SYMBOLIC_LINK,\r\n            &amp;newDevice.g_pwszSymbolicLink, &amp;newDevice.g_cchSymbolicLink);\r\n\r\n        availDevice[i] = newDevice;\r\n    }\r\n```\r\nThis is how I get serial using libusb:\r\n```\r\nString serial = LibUsb.getStringDescriptor(handle, descriptor.iSerialNumber());\r\n```","title":"How to connect to libusb device using symbolic link?","body":"<p>I have a video-streaming device that I am accessing using Microsoft Media Foundation. It has additional functionality using bulk. I want to connect to it using libusb. My problem is that I need to connect precisely to the same device as with <code>IMFMediaSource</code>. Connecting 2 same devices I can't find a way to separate them. VID and PID are the same. The only thing I have from MF is a symlink: <code>\\\\?\\usb#vid_----&amp;pid_----&amp;mi_00#8&amp;20ba1d94&amp;0&amp;0000#{e5323777-f976-4f5b-9b55-b94699c46e44}\\global</code> (removed vid and pid). With libusb using device descriptor I can read Serial: <code>$Rev:0001_CID:0009011D01502130_SN:76543210$</code>. On connected devices they are different, but the problem is that I can't find a way to check or connect those two strings to see if it's the same device.\nCode where I get symlink:</p>\n<pre><code>    IMFAttributes* pAttributes = NULL;\n    IMFActivate** ppDevices = NULL;\n\n    HRESULT hr = EnumerateVideoDevices(pAttributes, ppDevices, availDeviceCount);\n\n    availDevice = new Device[availDeviceCount]; // initialise empty return array\n\n    // populate return array w/ devices\n    for (int i = 0; i &lt; availDeviceCount; i++)\n    {\n        wchar_t* deviceFriendlyName;\n        UINT len = 0;\n\n        hr = ppDevices[i]-&gt;GetAllocatedString(MF_DEVSOURCE_ATTRIBUTE_FRIENDLY_NAME, &amp;deviceFriendlyName, &amp;len);\n        Device newDevice{ i, ToNarrow(deviceFriendlyName), NULL, 0 }; // TODO: check that change from unicode to String doesn't screw anything up (see ToNarrow, misc.h)\n\n        // retain for device change notificatios\n        ppDevices[i]-&gt;GetAllocatedString(MF_DEVSOURCE_ATTRIBUTE_SOURCE_TYPE_VIDCAP_SYMBOLIC_LINK,\n            &amp;newDevice.g_pwszSymbolicLink, &amp;newDevice.g_cchSymbolicLink);\n\n        availDevice[i] = newDevice;\n    }\n</code></pre>\n<p>This is how I get serial using libusb:</p>\n<pre><code>String serial = LibUsb.getStringDescriptor(handle, descriptor.iSerialNumber());\n</code></pre>\n"},{"tags":["java","spring","spring-boot","hibernate","microservices"],"comments":[{"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"score":0,"creation_date":1695620075,"post_id":77169960,"comment_id":136043377,"body_markdown":"dont understand what you want to do.why the clearcache method need to make a query ? why just clear the 1st item in the result list but not the remaining ?","body":"dont understand what you want to do.why the clearcache method need to make a query ? why just clear the 1st item in the result list but not the remaining ?"},{"owner":{"account_id":5726178,"reputation":345,"user_id":4523095,"display_name":"RathanaKumar"},"score":0,"creation_date":1695621830,"post_id":77169960,"comment_id":136043562,"body_markdown":"i wanted to make the call twice . after first call the DB entry deleted and new entry gets added. during 2nd call, old data was returned since its returning from cache. so i wanted to evict the cache for the 2nd call. so that i will get the latest data. i kept the method name clearcache just for understanding.","body":"i wanted to make the call twice . after first call the DB entry deleted and new entry gets added. during 2nd call, old data was returned since its returning from cache. so i wanted to evict the cache for the 2nd call. so that i will get the latest data. i kept the method name clearcache just for understanding."},{"owner":{"account_id":5726178,"reputation":345,"user_id":4523095,"display_name":"RathanaKumar"},"score":0,"creation_date":1695625346,"post_id":77169960,"comment_id":136044055,"body_markdown":"@KenChan.       can u please help","body":"@KenChan.       can u please help"},{"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"score":0,"creation_date":1695627870,"post_id":77169960,"comment_id":136044491,"body_markdown":"how many entities will be returned from that query ? So in short , you just want the `select p from  Person p` will always return the data from DB but not from the cache ?  ?","body":"how many entities will be returned from that query ? So in short , you just want the <code>select p from  Person p</code> will always return the data from DB but not from the cache ?  ?"},{"owner":{"account_id":5726178,"reputation":345,"user_id":4523095,"display_name":"RathanaKumar"},"score":0,"creation_date":1695628109,"post_id":77169960,"comment_id":136044533,"body_markdown":"Person table has only one data object... when i call the same query 2nd time i should get different person data , becoz while doing first call the person data fetched and removed from DB and a new entry will get added. so for the 2nd time , i am expecting the latest one. but it returns the older data whic was removed in the DB. hope this will give some betetr idea  @KenChan","body":"Person table has only one data object... when i call the same query 2nd time i should get different person data , becoz while doing first call the person data fetched and removed from DB and a new entry will get added. so for the 2nd time , i am expecting the latest one. but it returns the older data whic was removed in the DB. hope this will give some betetr idea  @KenChan"},{"owner":{"account_id":5726178,"reputation":345,"user_id":4523095,"display_name":"RathanaKumar"},"score":0,"creation_date":1695628799,"post_id":77169960,"comment_id":136044653,"body_markdown":"@KenChan  edited description for better understanding","body":"@KenChan  edited description for better understanding"}],"owner":{"account_id":5726178,"reputation":345,"user_id":4523095,"display_name":"RathanaKumar"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695642055,"creation_date":1695617202,"question_id":77169960,"body_markdown":"My scenario is to evict the object from the hibernate primary cache. so that i can get the fresh object whenever i call the same query. i have tried evict(Obj) in my call. but still i am receiving the old object. below are my code snippet\r\n\r\nPerson Object for mapping the dataSet\r\n\r\n    @Data\r\n    Class person{\r\n    private String name;\r\n    }\r\n\r\nclearCache method used to fetch the object\r\n\r\n      main(){\r\n        clearcache()// should return person data with name rathna\r\n        clearcache()// should return person data with name kumar, but \r\n                       its returning rathna again.\r\n        \r\n     }\r\n\r\n\r\n     Person clearcache()\r\n    {\r\n     List&lt;Person&gt; pList = session.createQuery( &quot;select p from  Person p &quot;);\r\n     session.evict(pList.get(0));\r\n     return pList.get(0);\r\n     }\r\n\r\nNot sure my implementaion is correct. it is not evicting the data object in it.","title":"Hibernate Evict is not evicting the object","body":"<p>My scenario is to evict the object from the hibernate primary cache. so that i can get the fresh object whenever i call the same query. i have tried evict(Obj) in my call. but still i am receiving the old object. below are my code snippet</p>\n<p>Person Object for mapping the dataSet</p>\n<pre><code>@Data\nClass person{\nprivate String name;\n}\n</code></pre>\n<p>clearCache method used to fetch the object</p>\n<pre><code>  main(){\n    clearcache()// should return person data with name rathna\n    clearcache()// should return person data with name kumar, but \n                   its returning rathna again.\n    \n }\n\n\n Person clearcache()\n{\n List&lt;Person&gt; pList = session.createQuery( &quot;select p from  Person p &quot;);\n session.evict(pList.get(0));\n return pList.get(0);\n }\n</code></pre>\n<p>Not sure my implementaion is correct. it is not evicting the data object in it.</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"comments":[{"owner":{"account_id":3121211,"reputation":198,"user_id":2640934,"display_name":"gad_gadskiy"},"score":0,"creation_date":1695649838,"post_id":77172326,"comment_id":136048913,"body_markdown":"In general, their approach means adding this for me in the AerospikeConfiguration:\n```\n@Bean\npublic DataSource dataSource() {\n    return DataSourceBuilder.create().url(&quot;jdbc:mariadb://fake&quot;).build();\n}\n```\nbecause Aerospike doesn&#39;t need dataSource at all. Looks like a hack, but I still can&#39;t do it better.","body":"In general, their approach means adding this for me in the AerospikeConfiguration: ``` @Bean public DataSource dataSource() {     return DataSourceBuilder.create().url(&quot;jdbc:mariadb://fake&quot;).build(&zwnj;&#8203;); } ``` because Aerospike doesn&#39;t need dataSource at all. Looks like a hack, but I still can&#39;t do it better."}],"tags":[],"owner":{"account_id":29298615,"reputation":81,"user_id":22447401,"display_name":"Tony"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1695641992,"creation_date":1695641992,"answer_id":77172326,"question_id":77171899,"body_markdown":"I think you could use Datasource routing. You can follow this Baeldung article : [AbstractRoutingDatasource][1]\r\n\r\nWith this you could setup your datasource depdending the properties enabled.\r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-abstract-routing-data-source","title":"Disable Spring configuration by a property","body":"<p>I think you could use Datasource routing. You can follow this Baeldung article : <a href=\"https://www.baeldung.com/spring-abstract-routing-data-source\" rel=\"nofollow noreferrer\">AbstractRoutingDatasource</a></p>\n<p>With this you could setup your datasource depdending the properties enabled.</p>\n"}],"owner":{"account_id":3121211,"reputation":198,"user_id":2640934,"display_name":"gad_gadskiy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77172326,"answer_count":1,"score":1,"last_activity_date":1695641992,"creation_date":1695637999,"question_id":77171899,"body_markdown":"I have a library that should support connections to Aerospike or MariaDb, depending on the properties. It has two appropriate configs:\r\n```\r\n@Configuration(proxyBeanMethods = false)\r\n@ConditionalOnProperty(prefix = &quot;aerospike&quot;, name = &quot;enabled&quot;, havingValue = &quot;true&quot;, matchIfMissing = true)\r\npublic class AerospikeConfiguration {\r\n```\r\nand\r\n```\r\n@Configuration(proxyBeanMethods = false)\r\n@ConditionalOnProperty(prefix = &quot;mariadb&quot;, name = &quot;enabled&quot;, havingValue = &quot;true&quot;)\r\npublic class MariadbConfiguration {\r\n```\r\nand the main config, including both of them\r\n```\r\n@Configuration\r\n@EnableConfigurationProperties\r\n@Import({\r\n        AerospikeConfiguration.class, MariadbConfiguration.class, // and other\r\n})\r\npublic class MainAutoConfiguration {\r\n```\r\nAerospike separately works well, but when I include Maria with all its dependencies, it fails because of the absent `dataSource` bean.\r\n\r\nThe fastest fix is to add empty properties like `spring.datasource.url`, but I don&#39;t want to do it this way.\r\n\r\nOther options found here didn&#39;t help me:\r\n1. Add `@EnableAutoConfiguration(exclude = {DataSourceAutoConfiguration.class, DataSourceTransactionManagerAutoConfiguration.class, HibernateJpaAutoConfiguration.class})` to AerospikeConfiguration leads to the circular @Import error with MainAutoConfiguration.\r\n2. Add `exclude ` to @ SpringBootApplication - I can&#39;t do this because the application will be called on clients of my library (and I shouldn&#39;t bother them with adding some magic from the start).\r\n\r\nIs there a way to change my configs to resolve this conflict?","title":"Disable Spring configuration by a property","body":"<p>I have a library that should support connections to Aerospike or MariaDb, depending on the properties. It has two appropriate configs:</p>\n<pre><code>@Configuration(proxyBeanMethods = false)\n@ConditionalOnProperty(prefix = &quot;aerospike&quot;, name = &quot;enabled&quot;, havingValue = &quot;true&quot;, matchIfMissing = true)\npublic class AerospikeConfiguration {\n</code></pre>\n<p>and</p>\n<pre><code>@Configuration(proxyBeanMethods = false)\n@ConditionalOnProperty(prefix = &quot;mariadb&quot;, name = &quot;enabled&quot;, havingValue = &quot;true&quot;)\npublic class MariadbConfiguration {\n</code></pre>\n<p>and the main config, including both of them</p>\n<pre><code>@Configuration\n@EnableConfigurationProperties\n@Import({\n        AerospikeConfiguration.class, MariadbConfiguration.class, // and other\n})\npublic class MainAutoConfiguration {\n</code></pre>\n<p>Aerospike separately works well, but when I include Maria with all its dependencies, it fails because of the absent <code>dataSource</code> bean.</p>\n<p>The fastest fix is to add empty properties like <code>spring.datasource.url</code>, but I don't want to do it this way.</p>\n<p>Other options found here didn't help me:</p>\n<ol>\n<li>Add <code>@EnableAutoConfiguration(exclude = {DataSourceAutoConfiguration.class, DataSourceTransactionManagerAutoConfiguration.class, HibernateJpaAutoConfiguration.class})</code> to AerospikeConfiguration leads to the circular @Import error with MainAutoConfiguration.</li>\n<li>Add <code>exclude </code> to @ SpringBootApplication - I can't do this because the application will be called on clients of my library (and I shouldn't bother them with adding some magic from the start).</li>\n</ol>\n<p>Is there a way to change my configs to resolve this conflict?</p>\n"},{"tags":["java","regex","generator"],"comments":[{"owner":{"account_id":220789,"reputation":114430,"user_id":478399,"accept_rate":83,"display_name":"AlexR"},"score":1,"creation_date":1365687281,"post_id":15950113,"comment_id":22728460,"body_markdown":"+1 for question but for most regular expressions number of matching strings is unlimited. For example `[0-9]+`","body":"+1 for question but for most regular expressions number of matching strings is unlimited. For example <code>[0-9]+</code>"},{"owner":{"account_id":152622,"reputation":490044,"user_id":367273,"accept_rate":96,"display_name":"NPE"},"score":1,"creation_date":1365687287,"post_id":15950113,"comment_id":22728464,"body_markdown":"This can only work for regexes that only admit finite-length inputs. For example, the `*` and `+` operators are out. Presumably you&#39;re OK with this?","body":"This can only work for regexes that only admit finite-length inputs. For example, the <code>*</code> and <code>+</code> operators are out. Presumably you&#39;re OK with this?"},{"owner":{"account_id":232333,"reputation":21533,"user_id":497106,"display_name":"Patashu"},"score":0,"creation_date":1365687576,"post_id":15950113,"comment_id":22728694,"body_markdown":"@NPE You don&#39;t have to generate infinitely many values to return a generator that constructs each possible result, throws it out, constructs the next, etc. Think python generators :)","body":"@NPE You don&#39;t have to generate infinitely many values to return a generator that constructs each possible result, throws it out, constructs the next, etc. Think python generators :)"},{"owner":{"account_id":10843,"reputation":330387,"user_id":20670,"accept_rate":100,"display_name":"Tim Pietzcker"},"score":2,"creation_date":1365689878,"post_id":15950113,"comment_id":22730265,"body_markdown":"Even without that limitation, you&#39;ll run into trouble pretty darn quickly. Storing all possible strings for `\\w{10}` (if `\\w` is defined as only ASCII letters/digits/underscore) will require about 43 Petabytes of storage. Enjoy.","body":"Even without that limitation, you&#39;ll run into trouble pretty darn quickly. Storing all possible strings for <code>\\w{10}</code> (if <code>\\w</code> is defined as only ASCII letters/digits/underscore) will require about 43 Petabytes of storage. Enjoy."},{"owner":{"account_id":40221,"reputation":32100,"user_id":116509,"accept_rate":100,"display_name":"artbristol"},"score":0,"creation_date":1365697380,"post_id":15950113,"comment_id":22735336,"body_markdown":"possible duplicate of [Enumerate Possible Matches of Regular Expression in Java](http://stackoverflow.com/questions/13688778/enumerate-possible-matches-of-regular-expression-in-java)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/13688778/enumerate-possible-matches-of-regular-expression-in-java\">Enumerate Possible Matches of Regular Expression in Java</a>"},{"owner":{"account_id":111132,"reputation":1851,"user_id":293735,"accept_rate":90,"display_name":"berdario"},"score":0,"creation_date":1366134594,"post_id":15950113,"comment_id":22891604,"body_markdown":"Can you please upvote the useful answers, and accept the best one? I see that you still have to accept an answer in your other month-long answer... it&#39;s not required, but as you can see SO is very limited for low-reputation users, and not everyone of us has a &gt;1000 rep score","body":"Can you please upvote the useful answers, and accept the best one? I see that you still have to accept an answer in your other month-long answer... it&#39;s not required, but as you can see SO is very limited for low-reputation users, and not everyone of us has a &gt;1000 rep score"}],"answers":[{"comments":[{"owner":{"account_id":3141989,"reputation":854,"user_id":2657277,"accept_rate":38,"display_name":"nzy"},"score":0,"creation_date":1509052978,"post_id":15951072,"comment_id":80875855,"body_markdown":"I downloaded the RegLdg but it gives me error while I hit the make all command:\ncollect2: error: ld returned 1 exit status\nMakefile:21: recipe for target &#39;all&#39; failed\nmake: *** [all] Error 1","body":"I downloaded the RegLdg but it gives me error while I hit the make all command: collect2: error: ld returned 1 exit status Makefile:21: recipe for target &#39;all&#39; failed make: *** [all] Error 1"}],"tags":[],"owner":{"account_id":1597725,"reputation":34231,"user_id":1479414,"accept_rate":71,"display_name":"Andremoniy"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1695641497,"creation_date":1365689586,"answer_id":15951072,"question_id":15950113,"body_markdown":"Here is am open-source generator [RegLdg][1], written in `C` language -  the regular expression grammar language dictionary generator.\r\n\r\nI believe it will be not very difficult to make a Java port of this program.\r\n\r\n\r\n  [1]: http://regldg.com","title":"Generate all valid values for a regular expression","body":"<p>Here is am open-source generator <a href=\"http://regldg.com\" rel=\"nofollow noreferrer\">RegLdg</a>, written in <code>C</code> language -  the regular expression grammar language dictionary generator.</p>\n<p>I believe it will be not very difficult to make a Java port of this program.</p>\n"},{"comments":[{"owner":{"account_id":10045,"reputation":5505,"user_id":18796,"display_name":"Ian McLaird"},"score":3,"creation_date":1365691676,"post_id":15951083,"comment_id":22731565,"body_markdown":"Isn&#39;t the hard part of this generating the `alphabets` in such a way that you&#39;re not throwing away over 99.9% of the work you&#39;re doing?  Doesn&#39;t this basically just generate every possible string and compare it to the regex?","body":"Isn&#39;t the hard part of this generating the <code>alphabets</code> in such a way that you&#39;re not throwing away over 99.9% of the work you&#39;re doing?  Doesn&#39;t this basically just generate every possible string and compare it to the regex?"}],"tags":[],"owner":{"account_id":118410,"reputation":62929,"user_id":309412,"accept_rate":74,"display_name":"Lie Ryan"},"comment_count":1,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1365690739,"creation_date":1365689609,"answer_id":15951083,"question_id":15950113,"body_markdown":"A trivial implementation of such algorithm is simply:\r\n\r\n\r\n    def generate_matching(pattern):\r\n        alphabets = [...]\r\n        l = 1\r\n        while True:\r\n            # generate all Cartesian product of the alphabets of length `l`\r\n            for s in itertools.product(alphabets, repeat=l):\r\n                s = &quot;&quot;.join(s)\r\n                if pattern.match(s):\r\n                    print s\r\n            l += 1","title":"Generate all valid values for a regular expression","body":"<p>A trivial implementation of such algorithm is simply:</p>\n\n<pre><code>def generate_matching(pattern):\n    alphabets = [...]\n    l = 1\n    while True:\n        # generate all Cartesian product of the alphabets of length `l`\n        for s in itertools.product(alphabets, repeat=l):\n            s = \"\".join(s)\n            if pattern.match(s):\n                print s\n        l += 1\n</code></pre>\n"},{"tags":[],"owner":{"account_id":359943,"reputation":2697,"user_id":701653,"accept_rate":80,"display_name":"Sergiu Toarca"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1365697190,"creation_date":1365696753,"answer_id":15953778,"question_id":15950113,"body_markdown":"Finding all matches is very similar to finding a random match. Below is a simple modification of the logic that generates random matches on [www.debuggex.com][1], assuming you already have a parse tree.\r\n\r\nThe idea is that for every subtree, you return a list of all possible generated strings, given a string that was generated by all previous nodes in your parse tree.\r\n\r\n    AltTree.all = (prefix) -&gt;\r\n        rets = []\r\n        for child in children\r\n            rets.extend(child.all(prefix))\r\n\r\n    ConcatTree.all = (prefix) -&gt;\r\n        prefixes = [prefix]\r\n        for child in children\r\n            newPrefixes = []\r\n            for p in prefixes\r\n                newPrefixes.extend(child.all(p))\r\n            prefixes = newPrefixes\r\n        return prefixes\r\n            \r\n    RepeatTree.all = (prefix) -&gt;\r\n        prefixes = [prefix]\r\n        rets = []\r\n        for i up to max\r\n            newPrefixes = []\r\n            for p in prefixes\r\n                newPrefixes.extend(onlyChild.all(p))\r\n            prefixes = newPrefixes\r\n            if i &gt;= min\r\n                rets.extend(prefixes)\r\n        return rets\r\n\r\n    CharsetTree.all = (prefix) -&gt;\r\n        rets = []\r\n        for char in allValidChars():\r\n            rets.push(prefix + char)\r\n        return rets\r\n\r\nThe rest of the trees are left as exercises (most notably the literal tree). \r\n\r\nNote that there are intentionally no optimizations for the sake of clarity. Calling `myTree.all(&#39;&#39;)` will generate a list such that every valid matching string appears once **for every path that generates this string**. You will probably want to add deduplication and get rid of the excessive copying.\r\n\r\nI should also add that this will only work for regular expressions that have a *small* number of total matching strings. This is because all of the strings are being stored. If you want to get around this limitation, you can `yield`ify this algorithm. You will need to maintain a stack (think of it as being a bread crumb trail) of where you are in the tree. When a new string is asked for, you will create it from the path you travelled, and then update the path.\r\n\r\n  [1]: http://www.debuggex.com","title":"Generate all valid values for a regular expression","body":"<p>Finding all matches is very similar to finding a random match. Below is a simple modification of the logic that generates random matches on <a href=\"http://www.debuggex.com\" rel=\"nofollow\">www.debuggex.com</a>, assuming you already have a parse tree.</p>\n\n<p>The idea is that for every subtree, you return a list of all possible generated strings, given a string that was generated by all previous nodes in your parse tree.</p>\n\n<pre><code>AltTree.all = (prefix) -&gt;\n    rets = []\n    for child in children\n        rets.extend(child.all(prefix))\n\nConcatTree.all = (prefix) -&gt;\n    prefixes = [prefix]\n    for child in children\n        newPrefixes = []\n        for p in prefixes\n            newPrefixes.extend(child.all(p))\n        prefixes = newPrefixes\n    return prefixes\n\nRepeatTree.all = (prefix) -&gt;\n    prefixes = [prefix]\n    rets = []\n    for i up to max\n        newPrefixes = []\n        for p in prefixes\n            newPrefixes.extend(onlyChild.all(p))\n        prefixes = newPrefixes\n        if i &gt;= min\n            rets.extend(prefixes)\n    return rets\n\nCharsetTree.all = (prefix) -&gt;\n    rets = []\n    for char in allValidChars():\n        rets.push(prefix + char)\n    return rets\n</code></pre>\n\n<p>The rest of the trees are left as exercises (most notably the literal tree). </p>\n\n<p>Note that there are intentionally no optimizations for the sake of clarity. Calling <code>myTree.all('')</code> will generate a list such that every valid matching string appears once <strong>for every path that generates this string</strong>. You will probably want to add deduplication and get rid of the excessive copying.</p>\n\n<p>I should also add that this will only work for regular expressions that have a <em>small</em> number of total matching strings. This is because all of the strings are being stored. If you want to get around this limitation, you can <code>yield</code>ify this algorithm. You will need to maintain a stack (think of it as being a bread crumb trail) of where you are in the tree. When a new string is asked for, you will create it from the path you travelled, and then update the path.</p>\n"},{"tags":[],"owner":{"account_id":111132,"reputation":1851,"user_id":293735,"accept_rate":90,"display_name":"berdario"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1365891974,"creation_date":1365891560,"answer_id":15993563,"question_id":15950113,"body_markdown":"Since a regexp is defined by a finite state machine, I wondered if there was something out there able to automatically reason on such machines and that was a good fit to be repurposed for this work... and [clojure.core.logic delivered][1]\r\n\r\nSo, I looked at this [definition of the regexp grammar][2] (unfortunately, it lacks the {} quantifiers, but they should be pretty easy to add to my code) adapted it to the java escapes, and worked out this 110 lines long clojure program:\r\n\r\n    (ns regexp-unfolder.core\r\n      (:require [instaparse.core :as insta])\r\n      (:require [clojure.core.logic :as l])\r\n      (:require [clojure.set :refer [union difference]])\r\n      (:gen-class :methods [#^{:static true} [unfold [String] clojure.lang.LazySeq]])\r\n    )\r\n    \r\n    (def parse-regexp (insta/parser \r\n                 &quot;re = union | simple-re?\r\n                 union = re &#39;|&#39; simple-re\r\n                 simple-re = concat | base-re\r\n                 concat = simple-re base-re\r\n                 base-re = elementary-re | star | plus\r\n                 star = elementary-re &#39;*&#39;\r\n                 plus = elementary-re &#39;+&#39;\r\n                 elementary-re = group | char | &#39;$&#39; | any | set\r\n                 any = &#39;.&#39;\r\n                 group = &#39;(&#39; re &#39;)&#39;\r\n                 set = positive-set | negative-set\r\n                 positive-set = &#39;[&#39;  set-items &#39;]&#39;\r\n                 negative-set = &#39;[^&#39; set-items &#39;]&#39;\r\n                 set-items = set-item*\r\n                 set-item = range | char\r\n                 range = char &#39;-&#39; char\r\n                 char = #&#39;[^\\\\\\\\\\\\-\\\\[\\\\]]|\\\\.&#39;&quot; ))\r\n    \r\n    (def printables (set (map char (range 32 127))))\r\n    \r\n    (declare fns handle-first)\r\n    \r\n    (defn handle-tree [q qto [ type &amp; nodes]]\r\n      (if (nil? nodes)\r\n        [[q [&quot;&quot;] qto]]\r\n        ((fns type handle-first) q qto nodes)))\r\n    \r\n    (defn star [q qto node &amp;]\r\n      (cons [q [&quot;&quot;] qto]\r\n             (handle-tree q q (first node))))\r\n    \r\n    (defn plus [q qto node &amp;] \r\n      (concat (handle-tree q qto (first node))\r\n              (handle-tree qto qto (first node))))\r\n    \r\n    (defn any-char [q qto &amp; _] [[q (vec printables) qto]] )\r\n    \r\n    (defn char-range [[c1 _ c2]]\r\n      (let [extract-char (comp int first seq second)]\r\n        (set (map char (range (extract-char c1) (inc (extract-char c2)))))))\r\n    \r\n    (defn items [nodes]\r\n      (union (mapcat\r\n        (fn [[_ [type &amp; ns]]]\r\n          (if (= type :char)\r\n            #{(first ns)}        \r\n            (char-range ns)))\r\n        (rest (second nodes)))))\r\n    \r\n    (defn handle-set [q qto node &amp;] [[q (vec (items node)) qto]])\r\n    \r\n    (defn handle-negset [q qto node &amp;] [[q (vec (difference printables (items node))) qto]])\r\n    \r\n    (defn handle-range [q qto &amp; nodes] [[q (vec (char-range nodes)) qto]])\r\n    \r\n    (defn handle-char [q qto node &amp;] [[q (vec node) qto]] )\r\n    \r\n    (defn handle-concat [q qto nodes] \r\n      (let [syms (for [x  (rest nodes)] (gensym q))]\r\n        (mapcat handle-tree  (cons q syms) (concat syms [qto] ) nodes)\r\n      ))\r\n    \r\n    (defn handle-first [q qto [node &amp; _]] (handle-tree q qto node))\r\n    \r\n    (def fns {:concat handle-concat, :star star, :plus plus, :any any-char, :positive-set handle-set, :negative-set handle-negset, :char handle-char})\r\n    \r\n    (l/defne transition-membero\r\n      [state trans newstate otransition]\r\n      ([_ _ _ [state trans-set newstate]]\r\n         (l/membero trans trans-set)))\r\n     \r\n    (defn transitiono [state trans newstate transitions]\r\n      (l/conde\r\n       [(l/fresh [f] \r\n                 (l/firsto transitions f)\r\n                 (transition-membero state trans newstate f))]\r\n       [(l/fresh [r]\r\n                 (l/resto transitions r)\r\n                 (transitiono state trans newstate r))])\r\n      )\r\n    \r\n    (declare transitions)\r\n     \r\n    ;; Recognize a regexp finite state machine encoded in triplets [state, transition, next-state], adapted from a snippet made by Peteris Erins\r\n    \r\n    (defn recognizeo\r\n      ([input]\r\n         (recognizeo &#39;q0 input))\r\n      ([q input]\r\n         (l/matche [input] ; start pattern matching on the input\r\n            ([&#39;(&quot;&quot;)]\r\n               (l/== q &#39;ok)) ; accept the empty string if we are in an accepting state\r\n            ([[i . nput]]\r\n               (l/fresh [qto]\r\n                      (transitiono q i qto transitions) ; assert it must be what we transition to qto from q with input symbol i\r\n                      (recognizeo qto nput)))))) ; recognize the remainder\r\n     \r\n    \r\n    (defn -unfold [regex] \r\n      (def transitions \r\n        (handle-tree &#39;q0 &#39;ok (parse-regexp regex)))\r\n      (map (partial apply str) (l/run* [q] (recognizeo q))))\r\n\r\nBeing written with core.logic, it should be fairly easy to adapt it to work also as a regexp matcher\r\n\r\nI limited the printables characters from 32 to 126 ascii, otherwise it&#39;d be too cumbersome to deal with regexps such as `[^c]`, but you can extend it quite easily... also, I haven&#39;t implemented yet unions, optional patterns, and the \\w, \\s, etc. escapes for character classes\r\n\r\nThis is the biggest thing I wrote in clojure up to now, but the basics seems to be covered just fine... some examples:\r\n\r\n    regexp-unfolder.core=&gt; (-unfold &quot;ba[rz]&quot;)\r\n    (&quot;bar&quot; &quot;baz&quot;)\r\n    regexp-unfolder.core=&gt; (-unfold &quot;[a-z3-7]&quot;)\r\n    (&quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot; &quot;f&quot; &quot;g&quot; &quot;h&quot; &quot;i&quot; &quot;j&quot; &quot;k&quot; &quot;l&quot; &quot;m&quot; &quot;n&quot; &quot;o&quot; &quot;p&quot; &quot;q&quot; &quot;r&quot; &quot;s&quot; &quot;t&quot; &quot;u&quot; &quot;v&quot; &quot;w&quot; &quot;x&quot; &quot;y&quot; &quot;z&quot; &quot;3&quot; &quot;4&quot; &quot;5&quot; &quot;6&quot; &quot;7&quot;)\r\n    regexp-unfolder.core=&gt; (-unfold &quot;[a-z3-7][01]&quot;)\r\n    (&quot;a0&quot; &quot;a1&quot; &quot;b0&quot; &quot;b1&quot; &quot;c0&quot; &quot;c1&quot; &quot;d0&quot; &quot;d1&quot; &quot;e0&quot; &quot;e1&quot; &quot;f0&quot; &quot;f1&quot; &quot;g0&quot; &quot;g1&quot; &quot;h0&quot; &quot;h1&quot; &quot;i0&quot; &quot;i1&quot; &quot;j0&quot; &quot;j1&quot; &quot;k0&quot; &quot;k1&quot; &quot;l0&quot; &quot;l1&quot; &quot;m0&quot; &quot;m1&quot; &quot;n0&quot; &quot;n1&quot; &quot;o0&quot; &quot;o1&quot; &quot;p0&quot; &quot;p1&quot; &quot;q0&quot; &quot;q1&quot; &quot;r0&quot; &quot;r1&quot; &quot;s0&quot; &quot;s1&quot; &quot;t0&quot; &quot;t1&quot; &quot;u0&quot; &quot;u1&quot; &quot;v0&quot; &quot;v1&quot; &quot;w0&quot; &quot;w1&quot; &quot;x0&quot; &quot;x1&quot; &quot;y0&quot; &quot;y1&quot; &quot;z0&quot; &quot;z1&quot; &quot;30&quot; &quot;31&quot; &quot;40&quot; &quot;41&quot; &quot;50&quot; &quot;51&quot; &quot;60&quot; &quot;70&quot; &quot;61&quot; &quot;71&quot;)\r\n    regexp-unfolder.core=&gt; (-unfold &quot;[^A-z]&quot;)\r\n    (&quot; &quot; &quot;@&quot; &quot;!&quot; &quot;\\&quot;&quot; &quot;#&quot; &quot;$&quot; &quot;%&quot; &quot;&amp;&quot; &quot;&#39;&quot; &quot;(&quot; &quot;)&quot; &quot;*&quot; &quot;+&quot; &quot;,&quot; &quot;-&quot; &quot;.&quot; &quot;/&quot; &quot;0&quot; &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; &quot;5&quot; &quot;6&quot; &quot;7&quot; &quot;8&quot; &quot;9&quot; &quot;:&quot; &quot;;&quot; &quot;{&quot; &quot;&lt;&quot; &quot;|&quot; &quot;=&quot; &quot;}&quot; &quot;&gt;&quot; &quot;~&quot; &quot;?&quot;)\r\n    regexp-unfolder.core=&gt; (take 20 (-unfold &quot;[abc]*&quot;))\r\n    (&quot;&quot; &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;aa&quot; &quot;ab&quot; &quot;ac&quot; &quot;ba&quot; &quot;ca&quot; &quot;aaa&quot; &quot;bb&quot; &quot;cb&quot; &quot;aab&quot; &quot;bc&quot; &quot;cc&quot; &quot;aac&quot; &quot;aba&quot; &quot;aca&quot; &quot;baa&quot; &quot;caa&quot;)\r\n    regexp-unfolder.core=&gt; (take 20 (-unfold &quot;a+b+&quot;))\r\n    (&quot;ab&quot; &quot;aab&quot; &quot;abb&quot; &quot;abbb&quot; &quot;aaab&quot; &quot;abbbb&quot; &quot;aabb&quot; &quot;abbbbb&quot; &quot;abbbbbb&quot; &quot;aabbb&quot; &quot;abbbbbbb&quot; &quot;abbbbbbbb&quot; &quot;aaaab&quot; &quot;aabbbb&quot; &quot;aaabb&quot; &quot;abbbbbbbbb&quot; &quot;abbbbbbbbbb&quot; &quot;aabbbbb&quot; &quot;abbbbbbbbbbb&quot; &quot;abbbbbbbbbbbb&quot;)\r\n\r\nSince I started this way, I implemented also infinite outputs :)\r\n\r\nIf someone is interested, I [uploaded it here][3]\r\n\r\nand obviously, here&#39;s an example of how to invoke `unfold` from plain old Java:\r\n\r\n\r\n    import static regexp_unfolder.core.unfold;\r\n    \r\n    public class UnfolderExample{\r\n    \tpublic static void main(String[] args){\r\n    \t\t@SuppressWarnings(&quot;unchecked&quot;)\r\n    \t\tIterable&lt;String&gt; strings = unfold(&quot;a+b+&quot;);\r\n    \t\tfor (String s : strings){\r\n    \t\t\tSystem.out.println(s);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n\r\n  [1]: https://gist.github.com/Pet3ris/1676242\r\n  [2]: http://www.cs.sfu.ca/~cameron/Teaching/384/99-3/regexp-plg.html\r\n  [3]: https://launchpad.net/regexp-unfolder","title":"Generate all valid values for a regular expression","body":"<p>Since a regexp is defined by a finite state machine, I wondered if there was something out there able to automatically reason on such machines and that was a good fit to be repurposed for this work... and <a href=\"https://gist.github.com/Pet3ris/1676242\" rel=\"noreferrer\">clojure.core.logic delivered</a></p>\n\n<p>So, I looked at this <a href=\"http://www.cs.sfu.ca/~cameron/Teaching/384/99-3/regexp-plg.html\" rel=\"noreferrer\">definition of the regexp grammar</a> (unfortunately, it lacks the {} quantifiers, but they should be pretty easy to add to my code) adapted it to the java escapes, and worked out this 110 lines long clojure program:</p>\n\n<pre><code>(ns regexp-unfolder.core\n  (:require [instaparse.core :as insta])\n  (:require [clojure.core.logic :as l])\n  (:require [clojure.set :refer [union difference]])\n  (:gen-class :methods [#^{:static true} [unfold [String] clojure.lang.LazySeq]])\n)\n\n(def parse-regexp (insta/parser \n             \"re = union | simple-re?\n             union = re '|' simple-re\n             simple-re = concat | base-re\n             concat = simple-re base-re\n             base-re = elementary-re | star | plus\n             star = elementary-re '*'\n             plus = elementary-re '+'\n             elementary-re = group | char | '$' | any | set\n             any = '.'\n             group = '(' re ')'\n             set = positive-set | negative-set\n             positive-set = '['  set-items ']'\n             negative-set = '[^' set-items ']'\n             set-items = set-item*\n             set-item = range | char\n             range = char '-' char\n             char = #'[^\\\\\\\\\\\\-\\\\[\\\\]]|\\\\.'\" ))\n\n(def printables (set (map char (range 32 127))))\n\n(declare fns handle-first)\n\n(defn handle-tree [q qto [ type &amp; nodes]]\n  (if (nil? nodes)\n    [[q [\"\"] qto]]\n    ((fns type handle-first) q qto nodes)))\n\n(defn star [q qto node &amp;]\n  (cons [q [\"\"] qto]\n         (handle-tree q q (first node))))\n\n(defn plus [q qto node &amp;] \n  (concat (handle-tree q qto (first node))\n          (handle-tree qto qto (first node))))\n\n(defn any-char [q qto &amp; _] [[q (vec printables) qto]] )\n\n(defn char-range [[c1 _ c2]]\n  (let [extract-char (comp int first seq second)]\n    (set (map char (range (extract-char c1) (inc (extract-char c2)))))))\n\n(defn items [nodes]\n  (union (mapcat\n    (fn [[_ [type &amp; ns]]]\n      (if (= type :char)\n        #{(first ns)}        \n        (char-range ns)))\n    (rest (second nodes)))))\n\n(defn handle-set [q qto node &amp;] [[q (vec (items node)) qto]])\n\n(defn handle-negset [q qto node &amp;] [[q (vec (difference printables (items node))) qto]])\n\n(defn handle-range [q qto &amp; nodes] [[q (vec (char-range nodes)) qto]])\n\n(defn handle-char [q qto node &amp;] [[q (vec node) qto]] )\n\n(defn handle-concat [q qto nodes] \n  (let [syms (for [x  (rest nodes)] (gensym q))]\n    (mapcat handle-tree  (cons q syms) (concat syms [qto] ) nodes)\n  ))\n\n(defn handle-first [q qto [node &amp; _]] (handle-tree q qto node))\n\n(def fns {:concat handle-concat, :star star, :plus plus, :any any-char, :positive-set handle-set, :negative-set handle-negset, :char handle-char})\n\n(l/defne transition-membero\n  [state trans newstate otransition]\n  ([_ _ _ [state trans-set newstate]]\n     (l/membero trans trans-set)))\n\n(defn transitiono [state trans newstate transitions]\n  (l/conde\n   [(l/fresh [f] \n             (l/firsto transitions f)\n             (transition-membero state trans newstate f))]\n   [(l/fresh [r]\n             (l/resto transitions r)\n             (transitiono state trans newstate r))])\n  )\n\n(declare transitions)\n\n;; Recognize a regexp finite state machine encoded in triplets [state, transition, next-state], adapted from a snippet made by Peteris Erins\n\n(defn recognizeo\n  ([input]\n     (recognizeo 'q0 input))\n  ([q input]\n     (l/matche [input] ; start pattern matching on the input\n        (['(\"\")]\n           (l/== q 'ok)) ; accept the empty string if we are in an accepting state\n        ([[i . nput]]\n           (l/fresh [qto]\n                  (transitiono q i qto transitions) ; assert it must be what we transition to qto from q with input symbol i\n                  (recognizeo qto nput)))))) ; recognize the remainder\n\n\n(defn -unfold [regex] \n  (def transitions \n    (handle-tree 'q0 'ok (parse-regexp regex)))\n  (map (partial apply str) (l/run* [q] (recognizeo q))))\n</code></pre>\n\n<p>Being written with core.logic, it should be fairly easy to adapt it to work also as a regexp matcher</p>\n\n<p>I limited the printables characters from 32 to 126 ascii, otherwise it'd be too cumbersome to deal with regexps such as <code>[^c]</code>, but you can extend it quite easily... also, I haven't implemented yet unions, optional patterns, and the \\w, \\s, etc. escapes for character classes</p>\n\n<p>This is the biggest thing I wrote in clojure up to now, but the basics seems to be covered just fine... some examples:</p>\n\n<pre><code>regexp-unfolder.core=&gt; (-unfold \"ba[rz]\")\n(\"bar\" \"baz\")\nregexp-unfolder.core=&gt; (-unfold \"[a-z3-7]\")\n(\"a\" \"b\" \"c\" \"d\" \"e\" \"f\" \"g\" \"h\" \"i\" \"j\" \"k\" \"l\" \"m\" \"n\" \"o\" \"p\" \"q\" \"r\" \"s\" \"t\" \"u\" \"v\" \"w\" \"x\" \"y\" \"z\" \"3\" \"4\" \"5\" \"6\" \"7\")\nregexp-unfolder.core=&gt; (-unfold \"[a-z3-7][01]\")\n(\"a0\" \"a1\" \"b0\" \"b1\" \"c0\" \"c1\" \"d0\" \"d1\" \"e0\" \"e1\" \"f0\" \"f1\" \"g0\" \"g1\" \"h0\" \"h1\" \"i0\" \"i1\" \"j0\" \"j1\" \"k0\" \"k1\" \"l0\" \"l1\" \"m0\" \"m1\" \"n0\" \"n1\" \"o0\" \"o1\" \"p0\" \"p1\" \"q0\" \"q1\" \"r0\" \"r1\" \"s0\" \"s1\" \"t0\" \"t1\" \"u0\" \"u1\" \"v0\" \"v1\" \"w0\" \"w1\" \"x0\" \"x1\" \"y0\" \"y1\" \"z0\" \"z1\" \"30\" \"31\" \"40\" \"41\" \"50\" \"51\" \"60\" \"70\" \"61\" \"71\")\nregexp-unfolder.core=&gt; (-unfold \"[^A-z]\")\n(\" \" \"@\" \"!\" \"\\\"\" \"#\" \"$\" \"%\" \"&amp;\" \"'\" \"(\" \")\" \"*\" \"+\" \",\" \"-\" \".\" \"/\" \"0\" \"1\" \"2\" \"3\" \"4\" \"5\" \"6\" \"7\" \"8\" \"9\" \":\" \";\" \"{\" \"&lt;\" \"|\" \"=\" \"}\" \"&gt;\" \"~\" \"?\")\nregexp-unfolder.core=&gt; (take 20 (-unfold \"[abc]*\"))\n(\"\" \"a\" \"b\" \"c\" \"aa\" \"ab\" \"ac\" \"ba\" \"ca\" \"aaa\" \"bb\" \"cb\" \"aab\" \"bc\" \"cc\" \"aac\" \"aba\" \"aca\" \"baa\" \"caa\")\nregexp-unfolder.core=&gt; (take 20 (-unfold \"a+b+\"))\n(\"ab\" \"aab\" \"abb\" \"abbb\" \"aaab\" \"abbbb\" \"aabb\" \"abbbbb\" \"abbbbbb\" \"aabbb\" \"abbbbbbb\" \"abbbbbbbb\" \"aaaab\" \"aabbbb\" \"aaabb\" \"abbbbbbbbb\" \"abbbbbbbbbb\" \"aabbbbb\" \"abbbbbbbbbbb\" \"abbbbbbbbbbbb\")\n</code></pre>\n\n<p>Since I started this way, I implemented also infinite outputs :)</p>\n\n<p>If someone is interested, I <a href=\"https://launchpad.net/regexp-unfolder\" rel=\"noreferrer\">uploaded it here</a></p>\n\n<p>and obviously, here's an example of how to invoke <code>unfold</code> from plain old Java:</p>\n\n<pre><code>import static regexp_unfolder.core.unfold;\n\npublic class UnfolderExample{\n    public static void main(String[] args){\n        @SuppressWarnings(\"unchecked\")\n        Iterable&lt;String&gt; strings = unfold(\"a+b+\");\n        for (String s : strings){\n            System.out.println(s);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":2464835,"reputation":785,"user_id":2148176,"accept_rate":50,"display_name":"Eve"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4728,"favorite_count":0,"down_vote_count":1,"up_vote_count":20,"accepted_answer_id":15993563,"answer_count":4,"score":19,"last_activity_date":1695641497,"creation_date":1365687026,"question_id":15950113,"body_markdown":"I know by using Xeger, we can get a random value for a specified pattern.\r\n\r\n    String regex = &quot;[0-9]{2}&quot;; \r\n    Xeger generator = new Xeger(regex);\r\n    String result = generator.generate();\r\n\r\nI want to know is there a way to return all of the valid strings for the specified regex. For example, for pattern: `[0-9]{2}`, we can get all of the values from `00` to `99`.\r\n\r\nThanks\r\n\r\nEdit:\r\n\r\nHere we don&#39;t consider the infinite outputs like + and *; how can we get all values for a finite regex?\r\n\r\nLast edit:\r\n\r\nThanks everyone! Finally I don&#39;t consider all the possible values as there may be thousands. I limit a specific number as the number of values to reduce the amount.","title":"Generate all valid values for a regular expression","body":"<p>I know by using Xeger, we can get a random value for a specified pattern.</p>\n\n<pre><code>String regex = \"[0-9]{2}\"; \nXeger generator = new Xeger(regex);\nString result = generator.generate();\n</code></pre>\n\n<p>I want to know is there a way to return all of the valid strings for the specified regex. For example, for pattern: <code>[0-9]{2}</code>, we can get all of the values from <code>00</code> to <code>99</code>.</p>\n\n<p>Thanks</p>\n\n<p>Edit:</p>\n\n<p>Here we don't consider the infinite outputs like + and *; how can we get all values for a finite regex?</p>\n\n<p>Last edit:</p>\n\n<p>Thanks everyone! Finally I don't consider all the possible values as there may be thousands. I limit a specific number as the number of values to reduce the amount.</p>\n"},{"tags":["java","alpine-linux","inetaddress","libnet"],"comments":[{"owner":{"account_id":350117,"reputation":8663,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":0,"creation_date":1695642025,"post_id":77172263,"comment_id":136047236,"body_markdown":"I suggest opening a bug to Alpine.","body":"I suggest opening a bug to Alpine."},{"owner":{"account_id":10198646,"reputation":33,"user_id":7529717,"display_name":"Daniel Stefanik"},"score":0,"creation_date":1695979308,"post_id":77172263,"comment_id":136098163,"body_markdown":"Created [Alpine issue](https://gitlab.alpinelinux.org/alpine/aports/-/issues/15320).","body":"Created <a href=\"https://gitlab.alpinelinux.org/alpine/aports/-/issues/15320\" rel=\"nofollow noreferrer\">Alpine issue</a>."}],"owner":{"account_id":10198646,"reputation":33,"user_id":7529717,"display_name":"Daniel Stefanik"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":162,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695641343,"creation_date":1695641343,"question_id":77172263,"body_markdown":"I&#39;m using:\r\n\r\n- Docker image: `alpine:3.18.3`,\r\n- Java: `openjdk11-jre`:\r\n\r\n```\r\nopenjdk version &quot;11.0.20&quot; 2023-07-18\r\nOpenJDK Runtime Environment (build 11.0.20+8-alpine-r0)\r\nOpenJDK 64-Bit Server VM (build 11.0.20+8-alpine-r0, mixed mode)\r\n```\r\n\r\n#### Problem description:\r\n\r\nWhen I try to use `java.net.InetAddress#getAllByName` to get all IP addresses for host with more than 63 addresses I&#39;m getting exception:\r\n\r\n```\r\njava.net.UnknownHostException: 70ips.test-domain.com: Name has no usable address\r\n    at java.base/java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method)\r\n    at java.base/java.net.InetAddress$PlatformNameService.lookupAllHostAddr(InetAddress.java:930)\r\n    at java.base/java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1543)\r\n    at java.base/java.net.InetAddress$NameServiceAddresses.get(InetAddress.java:848)\r\n    at java.base/java.net.InetAddress.getAllByName0(InetAddress.java:1533)\r\n    at java.base/java.net.InetAddress.getAllByName(InetAddress.java:1386)\r\n    at java.base/java.net.InetAddress.getAllByName(InetAddress.java:1307)\r\n    at com.issue.Main.main(Main.java:27)\r\n```\r\n\r\nIt looks that the native implementation of `java.net.InetAddress#getAllByName` in `libnet` is failing.\r\nI encountered this problem only for Alpine image. For other Linux distribution (e.g. Ubuntu) it seems that there is no such a problem. The problem does not appear when the host is resolved for less than 64 IP addresses.\r\n\r\n#### Reproduce the problem:\r\n\r\n1. Create record of type `A` using Route 53 in AWS [see documentation](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/resource-record-sets-creating.html) with host `70ips.test-domain.com` and 70 IPs as a value;\r\n2. Create Java code which resolves IP addresses for that host:\r\n\r\n   ```java\r\n   import java.net.InetAddress;\r\n   import java.net.UnknownHostException;\r\n   import java.util.Arrays;\r\n   import java.util.stream.Collectors;\r\n   \r\n   public class TestApp {\r\n   \r\n     public static void main(String[] args) throws UnknownHostException {\r\n       final String host = &quot;70ips.test-domain.com&quot;;\r\n   \r\n       final InetAddress[] all = InetAddress.getAllByName(host);\r\n   \r\n       printResults(all, host);\r\n     }\r\n   \r\n     private static void printResults(InetAddress[] all, String host) {\r\n       final String addressesAsString = Arrays.stream(all)\r\n         .map(InetAddress::getHostAddress)\r\n         .collect(Collectors.joining(&quot;, &quot;, &quot;\\n&quot;, &quot;&quot;));\r\n       final String msg = String.format(\r\n         &quot;URL: &#39;%s&#39;. InetAddresses[%s]: %s&quot;,\r\n         host,\r\n         all.length,\r\n         addressesAsString\r\n       );\r\n       System.out.println(msg);\r\n     }\r\n   }\r\n   ```\r\n3. Create Docker image based on Alpine image using Dockerfile like:\r\n\r\n   ```dockerfile\r\n   FROM alpine:3.18.3\r\n   RUN sed -ie &quot;s/https/http/g&quot; /etc/apk/repositories\r\n   RUN apk add \\\r\n         --no-cache \\\r\n         --repository http://dl-cdn.alpinelinux.org/alpine/v3.14/main \\\r\n         ca-certificates\r\n   RUN apk add openjdk11-jre\r\n   COPY target/app-jar-with-dependencies.jar app.jar\r\n   CMD [&quot;sh&quot;, &quot;-c&quot;, &quot;exec java -jar app.jar&quot;]\r\n   ```\r\n4. Run the docker container using command: `docker run &lt;image_name&gt;`;\r\n5. In logs there will be exception:\r\n\r\n   ```\r\n   java.net.UnknownHostException: 70ips.test-domain.com: Name has no usable address\r\n       at java.base/java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method)\r\n       at java.base/java.net.InetAddress$PlatformNameService.lookupAllHostAddr(InetAddress.java:930)\r\n       at java.base/java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1543)\r\n       at java.base/java.net.InetAddress$NameServiceAddresses.get(InetAddress.java:848)\r\n       at java.base/java.net.InetAddress.getAllByName0(InetAddress.java:1533)\r\n       at java.base/java.net.InetAddress.getAllByName(InetAddress.java:1386)\r\n       at java.base/java.net.InetAddress.getAllByName(InetAddress.java:1307)\r\n       at com.issue.Main.main(Main.java:27)\r\n   ```\r\n\r\n#### Questions:\r\n\r\n1. Is 63 IP addresses some known limitation?\r\n2. Do you know how can I fix the issue?\r\n\r\n#### Expected and actual outcome:\r\n\r\nI tried to use `java.net.InetAddress#getAllByName` to get all IP addresses for host with more than 63 addresses. I expected to get the array of IP addresses for given host. Actually I got exception `java.net.UnknownHostException` with &quot;Name has no usable address&quot; message.","title":"Alpine image unable to resolve more than 63 IP addresses for domain (`java.net.InetAddress`)","body":"<p>I'm using:</p>\n<ul>\n<li>Docker image: <code>alpine:3.18.3</code>,</li>\n<li>Java: <code>openjdk11-jre</code>:</li>\n</ul>\n<pre><code>openjdk version &quot;11.0.20&quot; 2023-07-18\nOpenJDK Runtime Environment (build 11.0.20+8-alpine-r0)\nOpenJDK 64-Bit Server VM (build 11.0.20+8-alpine-r0, mixed mode)\n</code></pre>\n<h4>Problem description:</h4>\n<p>When I try to use <code>java.net.InetAddress#getAllByName</code> to get all IP addresses for host with more than 63 addresses I'm getting exception:</p>\n<pre><code>java.net.UnknownHostException: 70ips.test-domain.com: Name has no usable address\n    at java.base/java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method)\n    at java.base/java.net.InetAddress$PlatformNameService.lookupAllHostAddr(InetAddress.java:930)\n    at java.base/java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1543)\n    at java.base/java.net.InetAddress$NameServiceAddresses.get(InetAddress.java:848)\n    at java.base/java.net.InetAddress.getAllByName0(InetAddress.java:1533)\n    at java.base/java.net.InetAddress.getAllByName(InetAddress.java:1386)\n    at java.base/java.net.InetAddress.getAllByName(InetAddress.java:1307)\n    at com.issue.Main.main(Main.java:27)\n</code></pre>\n<p>It looks that the native implementation of <code>java.net.InetAddress#getAllByName</code> in <code>libnet</code> is failing.\nI encountered this problem only for Alpine image. For other Linux distribution (e.g. Ubuntu) it seems that there is no such a problem. The problem does not appear when the host is resolved for less than 64 IP addresses.</p>\n<h4>Reproduce the problem:</h4>\n<ol>\n<li><p>Create record of type <code>A</code> using Route 53 in AWS <a href=\"https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/resource-record-sets-creating.html\" rel=\"nofollow noreferrer\">see documentation</a> with host <code>70ips.test-domain.com</code> and 70 IPs as a value;</p>\n</li>\n<li><p>Create Java code which resolves IP addresses for that host:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.net.InetAddress;\nimport java.net.UnknownHostException;\nimport java.util.Arrays;\nimport java.util.stream.Collectors;\n\npublic class TestApp {\n\n  public static void main(String[] args) throws UnknownHostException {\n    final String host = &quot;70ips.test-domain.com&quot;;\n\n    final InetAddress[] all = InetAddress.getAllByName(host);\n\n    printResults(all, host);\n  }\n\n  private static void printResults(InetAddress[] all, String host) {\n    final String addressesAsString = Arrays.stream(all)\n      .map(InetAddress::getHostAddress)\n      .collect(Collectors.joining(&quot;, &quot;, &quot;\\n&quot;, &quot;&quot;));\n    final String msg = String.format(\n      &quot;URL: '%s'. InetAddresses[%s]: %s&quot;,\n      host,\n      all.length,\n      addressesAsString\n    );\n    System.out.println(msg);\n  }\n}\n</code></pre>\n</li>\n<li><p>Create Docker image based on Alpine image using Dockerfile like:</p>\n<pre><code>FROM alpine:3.18.3\nRUN sed -ie &quot;s/https/http/g&quot; /etc/apk/repositories\nRUN apk add \\\n      --no-cache \\\n      --repository http://dl-cdn.alpinelinux.org/alpine/v3.14/main \\\n      ca-certificates\nRUN apk add openjdk11-jre\nCOPY target/app-jar-with-dependencies.jar app.jar\nCMD [&quot;sh&quot;, &quot;-c&quot;, &quot;exec java -jar app.jar&quot;]\n</code></pre>\n</li>\n<li><p>Run the docker container using command: <code>docker run &lt;image_name&gt;</code>;</p>\n</li>\n<li><p>In logs there will be exception:</p>\n<pre><code>java.net.UnknownHostException: 70ips.test-domain.com: Name has no usable address\n    at java.base/java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method)\n    at java.base/java.net.InetAddress$PlatformNameService.lookupAllHostAddr(InetAddress.java:930)\n    at java.base/java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1543)\n    at java.base/java.net.InetAddress$NameServiceAddresses.get(InetAddress.java:848)\n    at java.base/java.net.InetAddress.getAllByName0(InetAddress.java:1533)\n    at java.base/java.net.InetAddress.getAllByName(InetAddress.java:1386)\n    at java.base/java.net.InetAddress.getAllByName(InetAddress.java:1307)\n    at com.issue.Main.main(Main.java:27)\n</code></pre>\n</li>\n</ol>\n<h4>Questions:</h4>\n<ol>\n<li>Is 63 IP addresses some known limitation?</li>\n<li>Do you know how can I fix the issue?</li>\n</ol>\n<h4>Expected and actual outcome:</h4>\n<p>I tried to use <code>java.net.InetAddress#getAllByName</code> to get all IP addresses for host with more than 63 addresses. I expected to get the array of IP addresses for given host. Actually I got exception <code>java.net.UnknownHostException</code> with &quot;Name has no usable address&quot; message.</p>\n"},{"tags":["java","multithreading","asynchronous","heap-memory"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1695627421,"post_id":77170569,"comment_id":136044404,"body_markdown":"How many ids are you operating on?","body":"How many ids are you operating on?"},{"owner":{"account_id":29505823,"reputation":19,"user_id":22611816,"display_name":"Shreya Aggarwal"},"score":0,"creation_date":1695628783,"post_id":77170569,"comment_id":136044649,"body_markdown":"@M.Deinum the no of ids can be variable however for testing purposes I am using 11 ids . When I do this sequentially the performance is better compared to when using this approach . I tried by changing the core and max pool size to 4 , it does work then but the performance is even slow compared to sequential processing","body":"@M.Deinum the no of ids can be variable however for testing purposes I am using 11 ids . When I do this sequentially the performance is better compared to when using this approach . I tried by changing the core and max pool size to 4 , it does work then but the performance is even slow compared to sequential processing"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1695629014,"post_id":77170569,"comment_id":136044691,"body_markdown":"Then either your heap size is way too small or you are creating and retaining a lot of objects in memory (without knowing what your `ShopifyBulkSyncCoupons` does this would be impossible to answer. Instead of calling `run` you might be even better of making `ShopifyBulkSyncCoupons` a `Runnable` and create a constructor for the `id` saves you a bit of code and an anonymous class. Also `@Async` on an controller is a bit weird and doesn&#39;t add anything here. This also feels dangerous as the `ShopifyBulkSyncCoupons` seems to be a singleton that gets replaced in-flight.","body":"Then either your heap size is way too small or you are creating and retaining a lot of objects in memory (without knowing what your <code>ShopifyBulkSyncCoupons</code> does this would be impossible to answer. Instead of calling <code>run</code> you might be even better of making <code>ShopifyBulkSyncCoupons</code> a <code>Runnable</code> and create a constructor for the <code>id</code> saves you a bit of code and an anonymous class. Also <code>@Async</code> on an controller is a bit weird and doesn&#39;t add anything here. This also feels dangerous as the <code>ShopifyBulkSyncCoupons</code> seems to be a singleton that gets replaced in-flight."},{"owner":{"account_id":29505823,"reputation":19,"user_id":22611816,"display_name":"Shreya Aggarwal"},"score":0,"creation_date":1695629211,"post_id":77170569,"comment_id":136044725,"body_markdown":"@M.Deinum my ShopifyBulkSyncCoupons class does implement Runnable .","body":"@M.Deinum my ShopifyBulkSyncCoupons class does implement Runnable ."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1695629382,"post_id":77170569,"comment_id":136044749,"body_markdown":"I find this `ShopifyBulkSyncCoupons task = shopifyBulkSyncCoupons;` dangerous. As it re-assigns values to a singleton instance of `ShopifyBulkSyncCoupons` in a multi-threaded environment. This is trouble waiting to happen. I would expect something like `new ShopifyBylkSyncCoupons(id);` which wouldn&#39;t need a call to `run` either. But as stated, you either have a very low memory settings or are retaining a lot of object for too long. Please add `ShopifyBulkSyncCoupons` to your question.","body":"I find this <code>ShopifyBulkSyncCoupons task = shopifyBulkSyncCoupons;</code> dangerous. As it re-assigns values to a singleton instance of <code>ShopifyBulkSyncCoupons</code> in a multi-threaded environment. This is trouble waiting to happen. I would expect something like <code>new ShopifyBylkSyncCoupons(id);</code> which wouldn&#39;t need a call to <code>run</code> either. But as stated, you either have a very low memory settings or are retaining a lot of object for too long. Please add <code>ShopifyBulkSyncCoupons</code> to your question."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1695640494,"post_id":77170569,"comment_id":136046923,"body_markdown":"Why are you creating a new service, that feels wrong, there is also no autowired field, so it feels like dumbed down code instead of oactual code.","body":"Why are you creating a new service, that feels wrong, there is also no autowired field, so it feels like dumbed down code instead of oactual code."}],"answers":[{"comments":[{"owner":{"account_id":29505823,"reputation":19,"user_id":22611816,"display_name":"Shreya Aggarwal"},"score":0,"creation_date":1695634422,"post_id":77171060,"comment_id":136045735,"body_markdown":"thanks for giving the improved version of code . by doing new ShopifyBulkSyncCoupons(id) I get an error like APPLICATION FAILED TO START\n***************************\n\nDescription:\n\nParameter 0 of constructor in com.johnjacobs.catalog.config.ShopifyBulkSyncCoupons required a bean of type &#39;java.lang.Long&#39; that could not be found.\n\n\nAction:\n\nConsider defining a bean of type &#39;java.lang.Long&#39; in your configuration. my class is annotated with Component .","body":"thanks for giving the improved version of code . by doing new ShopifyBulkSyncCoupons(id) I get an error like APPLICATION FAILED TO START ***************************  Description:  Parameter 0 of constructor in com.johnjacobs.catalog.config.ShopifyBulkSyncCoupons required a bean of type &#39;java.lang.Long&#39; that could not be found.   Action:  Consider defining a bean of type &#39;java.lang.Long&#39; in your configuration. my class is annotated with Component ."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1695634712,"post_id":77171060,"comment_id":136045790,"body_markdown":"You shouldn&#39;t be annotating that class with `@Component` nor inject it, just create an instance as this is more or less a task. Unless you need dependency injection, you could make it a prototype and use the context to create an instance (and discard it afterwards). But as requested we need to see the specific class to determine what to do.","body":"You shouldn&#39;t be annotating that class with <code>@Component</code> nor inject it, just create an instance as this is more or less a task. Unless you need dependency injection, you could make it a prototype and use the context to create an instance (and discard it afterwards). But as requested we need to see the specific class to determine what to do."},{"owner":{"account_id":29505823,"reputation":19,"user_id":22611816,"display_name":"Shreya Aggarwal"},"score":0,"creation_date":1695638153,"post_id":77171060,"comment_id":136046491,"body_markdown":"I have a few places where i need to use the derived query methods to fetch result and process them therefore I need to autowire the repository and use the bean to call find method . Through an instance created with new that won&#39;t be possible .\n\nPlease see the edited code snippet .","body":"I have a few places where i need to use the derived query methods to fetch result and process them therefore I need to autowire the repository and use the bean to call find method . Through an instance created with new that won&#39;t be possible .  Please see the edited code snippet ."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1695640587,"post_id":77171060,"comment_id":136046937,"body_markdown":"You can make it a prototype scoped bean to let Spring create instances as needed or autowire it after creation using the beanfactory/applicationcontext. Either way you either still have too little memory or are retaining too many objects. But the actual import part (which does the work) still isn&#39;t in your question. It also feels you are using the wrong tool for the job and this is something that should be run with Spring Batch for instance.","body":"You can make it a prototype scoped bean to let Spring create instances as needed or autowire it after creation using the beanfactory/applicationcontext. Either way you either still have too little memory or are retaining too many objects. But the actual import part (which does the work) still isn&#39;t in your question. It also feels you are using the wrong tool for the job and this is something that should be run with Spring Batch for instance."}],"tags":[],"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695640797,"creation_date":1695630873,"answer_id":77171060,"question_id":77170569,"body_markdown":"**NOTE:** This answer is sort of a work-in-progress. \r\n\r\nIssues with the code:\r\n\r\n1. `@Async` on the controller method, which should be on a service method (including the code in the controller) or properly utilize the async servlet API. \r\n2. Re-using a single instance `ShopifyBulkSyncCoupons` to re-use an `id` property in a multi-threaded environment is trouble waiting to happen. \r\n\r\n`@Async` to service method\r\n--\r\nThe `@Async` should be on a service method and the code which is in the controller, should be moved to that method as well. That way the controller will return quickly and promptly. Or properly use the async servlet API by returning a `[Completable]Future` or `Callable` from the controller method. \r\n\r\nRe-use of a singleton instance\r\n--\r\nThe code inside the lambda indicates re-use of a statefuo singleton in a multithreaded environment. Don&#39;t do things like this as that is trouble waiting to happen. \r\n\r\n```java\r\nShopifyBulkSyncCoupons task = shopifyBulkSyncCoupons;\r\ntask.setCouponId(id);\r\ntask.run(); // Manually invoke the run method\r\n```\r\n\r\nModified code\r\n==\r\n\r\nActual runnable\r\n\r\n```java\r\n@Component\r\n@Scope(&quot;prototype&quot;)\r\npublic class ShopifyBulkSyncCoupons {\r\n\r\n  private final long couponId;\r\n\r\n  @Autowired\r\n  private final SomeRepository repo;\r\n\r\n  public ShopifyBulkSyncCoupons(long couponId) {\r\n    this.couponId = couponId;\r\n  }\r\n  // Other methods\r\n}\r\n```\r\n\r\nService\r\n```java\r\npublic MyProcessingService {\r\n\r\n  private final AsyncTaskExecutor taskExecutor;\r\n  private final ApplicationContext context;\r\n\r\n  public MyProcessingService(AsyncTaskExecutor taskExecutor, ApplicationContext context) {\r\n    this.taskExecutor = taskExecutor;\r\n    this.context = context;\r\n  }\r\n\r\n  @Async(&quot;taskExecutor&quot;)\r\n  public CompletableFuture&lt;Void&gt; processCoupons(List&lt;Long&gt; ids) {\r\n    logger.info(&quot;Start :: syncShopifyPriceRulesListToMongoV3 for ids size = &quot; + ids.size());\r\n    \r\n    CompletableFuture&lt;Void&gt;[] futures = \r\n     ids.stream()\r\n       .map( (id) -&gt; this.context.getBean(ShopifyBulkSyncCoupons.class, id))\r\n       .map( (task) -&gt; CompletableFuture.runAsync(task, taskExecutor)\r\n       .toArray(CompletableFuture[]::new);\r\n\r\n     return CompletableFuture.allOf(futures);\r\n  }\r\n}\r\n\r\n```\r\n\r\n```java\r\n@RequestMapping(value = &quot;/coupons/bulk/syncCoupons&quot;, method = RequestMethod.POST)\r\npublic CompletableFuture&lt;Void&gt; syncShopifyCouponsV4(@RequestBody List&lt;Long&gt; ids) { \r\n  return service.processCoupons(ids);\r\n```","title":"Getting java.lang.OutOfMemoryError: Java heap space error when using Async method","body":"<p><strong>NOTE:</strong> This answer is sort of a work-in-progress.</p>\n<p>Issues with the code:</p>\n<ol>\n<li><code>@Async</code> on the controller method, which should be on a service method (including the code in the controller) or properly utilize the async servlet API.</li>\n<li>Re-using a single instance <code>ShopifyBulkSyncCoupons</code> to re-use an <code>id</code> property in a multi-threaded environment is trouble waiting to happen.</li>\n</ol>\n<h2><code>@Async</code> to service method</h2>\n<p>The <code>@Async</code> should be on a service method and the code which is in the controller, should be moved to that method as well. That way the controller will return quickly and promptly. Or properly use the async servlet API by returning a <code>[Completable]Future</code> or <code>Callable</code> from the controller method.</p>\n<h2>Re-use of a singleton instance</h2>\n<p>The code inside the lambda indicates re-use of a statefuo singleton in a multithreaded environment. Don't do things like this as that is trouble waiting to happen.</p>\n<pre class=\"lang-java prettyprint-override\"><code>ShopifyBulkSyncCoupons task = shopifyBulkSyncCoupons;\ntask.setCouponId(id);\ntask.run(); // Manually invoke the run method\n</code></pre>\n<h1>Modified code</h1>\n<p>Actual runnable</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\n@Scope(&quot;prototype&quot;)\npublic class ShopifyBulkSyncCoupons {\n\n  private final long couponId;\n\n  @Autowired\n  private final SomeRepository repo;\n\n  public ShopifyBulkSyncCoupons(long couponId) {\n    this.couponId = couponId;\n  }\n  // Other methods\n}\n</code></pre>\n<p>Service</p>\n<pre class=\"lang-java prettyprint-override\"><code>public MyProcessingService {\n\n  private final AsyncTaskExecutor taskExecutor;\n  private final ApplicationContext context;\n\n  public MyProcessingService(AsyncTaskExecutor taskExecutor, ApplicationContext context) {\n    this.taskExecutor = taskExecutor;\n    this.context = context;\n  }\n\n  @Async(&quot;taskExecutor&quot;)\n  public CompletableFuture&lt;Void&gt; processCoupons(List&lt;Long&gt; ids) {\n    logger.info(&quot;Start :: syncShopifyPriceRulesListToMongoV3 for ids size = &quot; + ids.size());\n    \n    CompletableFuture&lt;Void&gt;[] futures = \n     ids.stream()\n       .map( (id) -&gt; this.context.getBean(ShopifyBulkSyncCoupons.class, id))\n       .map( (task) -&gt; CompletableFuture.runAsync(task, taskExecutor)\n       .toArray(CompletableFuture[]::new);\n\n     return CompletableFuture.allOf(futures);\n  }\n}\n\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@RequestMapping(value = &quot;/coupons/bulk/syncCoupons&quot;, method = RequestMethod.POST)\npublic CompletableFuture&lt;Void&gt; syncShopifyCouponsV4(@RequestBody List&lt;Long&gt; ids) { \n  return service.processCoupons(ids);\n</code></pre>\n"}],"owner":{"account_id":29505823,"reputation":19,"user_id":22611816,"display_name":"Shreya Aggarwal"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":135,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1695640797,"creation_date":1695626498,"question_id":77170569,"body_markdown":"I am receiving the below error when I am invoking an async method and using ThreadPoolExecutorService.\r\n\r\n```\r\n@Bean(name = &quot;taskExecutor&quot;)\r\npublic ThreadPoolTaskExecutor taskExecutor() {\r\n\tThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\r\n\texecutor.setCorePoolSize(5);\r\n\texecutor.setMaxPoolSize(5);\r\n\texecutor.setQueueCapacity(10);\r\n\texecutor.setThreadNamePrefix(&quot;SyncThread&quot;);\r\n\texecutor.initialize();\r\n\treturn executor;\r\n}\r\n```\r\n\r\n```\r\n@RequestMapping(value = &quot;/coupons/bulk/syncCoupons&quot;, method = RequestMethod.POST)\r\n@Async(&quot;taskExecutor&quot;)\r\npublic ResponseEntity&lt;?&gt; syncShopifyCouponsV4(@RequestBody List&lt;Long&gt; ids) {\r\n    logger.info(&quot;Start :: syncShopifyPriceRulesListToMongoV3 for ids size = &quot; + ids.size());\r\n    try {\r\n        if (!ids.isEmpty()) {\r\n            List&lt;CompletableFuture&lt;Void&gt;&gt; futures = ids.stream()\r\n                    .map(id -&gt; CompletableFuture.runAsync(() -&gt; {\r\n                        logger.info(&quot;id inside CompletableFuture: &quot; + id);\r\n                        ShopifyBulkSyncCoupons task = shopifyBulkSyncCoupons;\r\n                        task.setCouponId(id);\r\n                        task.run(); // Manually invoke the run method\r\n                    }, taskExecutor)) // Use your configured taskExecutor here\r\n                    .collect(Collectors.toList());\r\n\r\n            CompletableFuture&lt;Void&gt;[] futureArray = futures.toArray(new CompletableFuture[0]);\r\n            CompletableFuture&lt;Void&gt; allOf = CompletableFuture.allOf(futureArray);\r\n            allOf.join(); // Wait for all tasks to complete\r\n        }\r\n    }\r\n    catch (Exception e) {\r\n        throw new RuntimeException(e);\r\n    }\r\n\r\n    logger.info(&quot;End :: syncShopifyPriceRulesListToMongoV3&quot;);\r\n    return new ResponseEntity&lt;&gt;(HttpStatus.OK);\r\n}\r\n```\r\n```\r\npublic void syncShopifyPriceRulesListToMongoV2( Long id)\r\n{\r\n\tShopifyClient shopifyClient1 = new ShopifyClient();\r\n\tShopifyPriceRuleResponse priceRuleResponse = shopifyClient1.getPriceRuleById(id);\r\n\tif(null!=priceRuleResponse &amp;&amp; null!=priceRuleResponse.getPriceRule()) {\r\n\t\tPriceRuleDetails priceRuleDetails = new PriceRuleDetails();\r\n\t\tList&lt;Long&gt; finalEntitledVariants = new ArrayList&lt;&gt;();\r\n\t\tpriceRuleDetails = mapShopifyPriceRuleToModel(priceRuleResponse.getPriceRule());\r\n\t\tif (!CollectionUtils.isEmpty(priceRuleDetails.getEntitledCollectionIds())) {\r\n\t\t\tList&lt;Long&gt; collectionIds = priceRuleDetails.getEntitledCollectionIds();\r\n\t\t\tList&lt;ProductAttributes&gt; prodAttr = productAttrRepository.findByCollectionsIn(collectionIds);\r\n\t\t\tfor (ProductAttributes prod : prodAttr) {\r\n\t\t\t\tfinalEntitledVariants.add(prod.getVariantId());\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!CollectionUtils.isEmpty(priceRuleDetails.getEntitledProductIds())) {\r\n\t\t\tList&lt;ProductAttributes&gt; productAttributesList = productAttrRepository.findByProductIdIn(priceRuleDetails.getEntitledProductIds());\r\n\t\t\tfor (ProductAttributes prod : productAttributesList) {\r\n\t\t\t\tfinalEntitledVariants.add(prod.getVariantId());\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!CollectionUtils.isEmpty(priceRuleDetails.getEntitledVariantIds())) {\r\n\t\t\tfinalEntitledVariants.addAll(priceRuleDetails.getEntitledVariantIds());\r\n\t\t}\r\n\t\tpriceRuleDetails.setEntitledVariantIds(finalEntitledVariants);\r\n\t\tpriceRuleDetailsRepo.save(priceRuleDetails);\r\n\t}\r\n\r\n}\r\n```\r\n```\r\npublic class ShopifyBulkSyncCoupons implements Runnable\r\n{\r\n\r\n    private static final Logger logger = \r\n    Logger.getLogger(PriceRuleServiceImpl.class);\r\n    private  Long couponId ;\r\n\r\n    public ShopifyBulkSyncCoupons(Long couponId) {\r\n        this.couponId = couponId;\r\n    }\r\n\r\n    public Long getCouponId() {\r\n        return couponId;\r\n    }\r\n\r\n    public void setCouponId(Long couponId) {\r\n        couponId = couponId;\r\n    }\r\n\r\n    @Override\r\n    @Async(&quot;taskExecutor&quot;)\r\n    public void run()\r\n    {\r\n        logger.info(&quot;Inside run for id &quot;+couponId+&quot; Thread is \r\n       &quot;+Thread.currentThread().getName());\r\n         PriceRuleServiceImpl priceRuleService = new \r\n         PriceRuleServiceImpl();\r\n         priceRuleService.\r\n         syncShopifyPriceRulesListToMongoV2(couponId);\r\n    }\r\n}\r\n```\r\nI tried by removing the line executor.setQueueCapacity(10); but still getting the same error. Can someone please point out what is wrong here.","title":"Getting java.lang.OutOfMemoryError: Java heap space error when using Async method","body":"<p>I am receiving the below error when I am invoking an async method and using ThreadPoolExecutorService.</p>\n<pre><code>@Bean(name = &quot;taskExecutor&quot;)\npublic ThreadPoolTaskExecutor taskExecutor() {\n    ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\n    executor.setCorePoolSize(5);\n    executor.setMaxPoolSize(5);\n    executor.setQueueCapacity(10);\n    executor.setThreadNamePrefix(&quot;SyncThread&quot;);\n    executor.initialize();\n    return executor;\n}\n</code></pre>\n<pre><code>@RequestMapping(value = &quot;/coupons/bulk/syncCoupons&quot;, method = RequestMethod.POST)\n@Async(&quot;taskExecutor&quot;)\npublic ResponseEntity&lt;?&gt; syncShopifyCouponsV4(@RequestBody List&lt;Long&gt; ids) {\n    logger.info(&quot;Start :: syncShopifyPriceRulesListToMongoV3 for ids size = &quot; + ids.size());\n    try {\n        if (!ids.isEmpty()) {\n            List&lt;CompletableFuture&lt;Void&gt;&gt; futures = ids.stream()\n                    .map(id -&gt; CompletableFuture.runAsync(() -&gt; {\n                        logger.info(&quot;id inside CompletableFuture: &quot; + id);\n                        ShopifyBulkSyncCoupons task = shopifyBulkSyncCoupons;\n                        task.setCouponId(id);\n                        task.run(); // Manually invoke the run method\n                    }, taskExecutor)) // Use your configured taskExecutor here\n                    .collect(Collectors.toList());\n\n            CompletableFuture&lt;Void&gt;[] futureArray = futures.toArray(new CompletableFuture[0]);\n            CompletableFuture&lt;Void&gt; allOf = CompletableFuture.allOf(futureArray);\n            allOf.join(); // Wait for all tasks to complete\n        }\n    }\n    catch (Exception e) {\n        throw new RuntimeException(e);\n    }\n\n    logger.info(&quot;End :: syncShopifyPriceRulesListToMongoV3&quot;);\n    return new ResponseEntity&lt;&gt;(HttpStatus.OK);\n}\n</code></pre>\n<pre><code>public void syncShopifyPriceRulesListToMongoV2( Long id)\n{\n    ShopifyClient shopifyClient1 = new ShopifyClient();\n    ShopifyPriceRuleResponse priceRuleResponse = shopifyClient1.getPriceRuleById(id);\n    if(null!=priceRuleResponse &amp;&amp; null!=priceRuleResponse.getPriceRule()) {\n        PriceRuleDetails priceRuleDetails = new PriceRuleDetails();\n        List&lt;Long&gt; finalEntitledVariants = new ArrayList&lt;&gt;();\n        priceRuleDetails = mapShopifyPriceRuleToModel(priceRuleResponse.getPriceRule());\n        if (!CollectionUtils.isEmpty(priceRuleDetails.getEntitledCollectionIds())) {\n            List&lt;Long&gt; collectionIds = priceRuleDetails.getEntitledCollectionIds();\n            List&lt;ProductAttributes&gt; prodAttr = productAttrRepository.findByCollectionsIn(collectionIds);\n            for (ProductAttributes prod : prodAttr) {\n                finalEntitledVariants.add(prod.getVariantId());\n            }\n        }\n        if (!CollectionUtils.isEmpty(priceRuleDetails.getEntitledProductIds())) {\n            List&lt;ProductAttributes&gt; productAttributesList = productAttrRepository.findByProductIdIn(priceRuleDetails.getEntitledProductIds());\n            for (ProductAttributes prod : productAttributesList) {\n                finalEntitledVariants.add(prod.getVariantId());\n            }\n        }\n        if (!CollectionUtils.isEmpty(priceRuleDetails.getEntitledVariantIds())) {\n            finalEntitledVariants.addAll(priceRuleDetails.getEntitledVariantIds());\n        }\n        priceRuleDetails.setEntitledVariantIds(finalEntitledVariants);\n        priceRuleDetailsRepo.save(priceRuleDetails);\n    }\n\n}\n</code></pre>\n<pre><code>public class ShopifyBulkSyncCoupons implements Runnable\n{\n\n    private static final Logger logger = \n    Logger.getLogger(PriceRuleServiceImpl.class);\n    private  Long couponId ;\n\n    public ShopifyBulkSyncCoupons(Long couponId) {\n        this.couponId = couponId;\n    }\n\n    public Long getCouponId() {\n        return couponId;\n    }\n\n    public void setCouponId(Long couponId) {\n        couponId = couponId;\n    }\n\n    @Override\n    @Async(&quot;taskExecutor&quot;)\n    public void run()\n    {\n        logger.info(&quot;Inside run for id &quot;+couponId+&quot; Thread is \n       &quot;+Thread.currentThread().getName());\n         PriceRuleServiceImpl priceRuleService = new \n         PriceRuleServiceImpl();\n         priceRuleService.\n         syncShopifyPriceRulesListToMongoV2(couponId);\n    }\n}\n</code></pre>\n<p>I tried by removing the line executor.setQueueCapacity(10); but still getting the same error. Can someone please point out what is wrong here.</p>\n"},{"tags":["java","date"],"comments":[{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1695652836,"post_id":1655357,"comment_id":136049648,"body_markdown":"For new readers to this question don’t use `Date`. It was a poorly designed class in Java 1.0 and was supplanted by [java.time, the modern Java date and time API,](https://docs.oracle.com/javase/tutorial/datetime/index.html) a decade ago.","body":"For new readers to this question don’t use <code>Date</code>. It was a poorly designed class in Java 1.0 and was supplanted by <a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">java.time, the modern Java date and time API,</a> a decade ago."}],"answers":[{"comments":[{"owner":{"account_id":54738,"reputation":6746,"user_id":163849,"accept_rate":100,"display_name":"Waleed Amjad"},"score":4,"creation_date":1257017705,"post_id":1655366,"comment_id":1526823,"body_markdown":"As I press F5, your post populates with more and more useful information, it&#39;s magic =/","body":"As I press F5, your post populates with more and more useful information, it&#39;s magic =/"},{"owner":{"account_id":3437,"reputation":42021,"user_id":4960,"accept_rate":95,"display_name":"Nick Stinemates"},"score":0,"creation_date":1257018018,"post_id":1655366,"comment_id":1526833,"body_markdown":"What about using the Calendar?","body":"What about using the Calendar?"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":6,"creation_date":1257018031,"post_id":1655366,"comment_id":1526834,"body_markdown":"Well I couldn&#39;t let a java.util.Date question go without mentioning Joda :)","body":"Well I couldn&#39;t let a java.util.Date question go without mentioning Joda :)"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1257018102,"post_id":1655366,"comment_id":1526837,"body_markdown":"@Nick: Calendar is a very tricky API to work with properly, and doesn&#39;t let you express the idea of &quot;just a date&quot; (no time) or &quot;a local date/time&quot; etc. Go for Joda :)","body":"@Nick: Calendar is a very tricky API to work with properly, and doesn&#39;t let you express the idea of &quot;just a date&quot; (no time) or &quot;a local date/time&quot; etc. Go for Joda :)"},{"owner":{"account_id":26957,"reputation":564381,"user_id":70604,"display_name":"Pascal Thivent"},"score":0,"creation_date":1257020035,"post_id":1655366,"comment_id":1526925,"body_markdown":"Well, to add 5 seconds to &quot;now&quot;, expressing a date with time seems useful :)","body":"Well, to add 5 seconds to &quot;now&quot;, expressing a date with time seems useful :)"}],"tags":[],"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"comment_count":5,"down_vote_count":0,"up_vote_count":62,"is_accepted":false,"score":62,"last_activity_date":1422782208,"creation_date":1257017580,"answer_id":1655366,"question_id":1655357,"body_markdown":"You can use:\r\n\r\n    now.setTime(now.getTime() + 5000);\r\n\r\n`Date.getTime()` and `setTime()` always refer to milliseconds since January 1st 1970 12am UTC.\n\n# Joda-Time\r\n\r\nHowever, I would strongly advise you to use [Joda Time][1] if you&#39;re doing anything more than the very simplest of date/time handling. It&#39;s a *much* more capable and friendly library than the built-in support in Java.\n\n    DateTime later = DateTime.now().plusSeconds( 5 );\n\n# java.time\n\nJoda-Time later inspired the new [java.time package][2] built into Java 8.\r\n\r\n\r\n\n\n  [1]: http://www.joda.org/joda-time/\n  [2]: http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html","title":"How do I say 5 seconds from now in Java?","body":"<p>You can use:</p>\n\n<pre><code>now.setTime(now.getTime() + 5000);\n</code></pre>\n\n<p><code>Date.getTime()</code> and <code>setTime()</code> always refer to milliseconds since January 1st 1970 12am UTC.</p>\n\n<h1>Joda-Time</h1>\n\n<p>However, I would strongly advise you to use <a href=\"http://www.joda.org/joda-time/\" rel=\"noreferrer\">Joda Time</a> if you're doing anything more than the very simplest of date/time handling. It's a <em>much</em> more capable and friendly library than the built-in support in Java.</p>\n\n<pre><code>DateTime later = DateTime.now().plusSeconds( 5 );\n</code></pre>\n\n<h1>java.time</h1>\n\n<p>Joda-Time later inspired the new <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html\" rel=\"noreferrer\">java.time package</a> built into Java 8.</p>\n"},{"comments":[{"owner":{"account_id":16527,"reputation":8987,"user_id":36093,"accept_rate":100,"display_name":"Karl"},"score":0,"creation_date":1257024783,"post_id":1655392,"comment_id":1527182,"body_markdown":"Wow.  Java can be really verbose when it is correctly written.  Your variable name was only three letters long!","body":"Wow.  Java can be really verbose when it is correctly written.  Your variable name was only three letters long!"}],"tags":[],"owner":{"account_id":3437,"reputation":42021,"user_id":4960,"accept_rate":95,"display_name":"Nick Stinemates"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1257018110,"creation_date":1257018110,"answer_id":1655392,"question_id":1655357,"body_markdown":"I just found this from [java docs][1]\r\n\r\n    import java.util.Calendar;\r\n    \r\n    public class Main {\r\n    \r\n      public static void main(String[] args) {\r\n        Calendar now = Calendar.getInstance();\r\n        System.out.println(&quot;Current time : &quot; + now.get(Calendar.HOUR_OF_DAY) + &quot;:&quot;\r\n            + now.get(Calendar.MINUTE) + &quot;:&quot; + now.get(Calendar.SECOND));\r\n    \r\n        now.add(Calendar.SECOND, 100);\r\n        System.out.println(&quot;New time after adding 100 seconds : &quot; + now.get(Calendar.HOUR_OF_DAY) + &quot;:&quot;\r\n            + now.get(Calendar.MINUTE) + &quot;:&quot; + now.get(Calendar.SECOND));\r\n      }\r\n    }\r\n\r\nIs there a convention I should be aware of?\r\n  [1]: http://www.java2s.com/Code/Java/Development-Class/AddsecondstocurrentdateusingCalendaraddmethod.htm","title":"How do I say 5 seconds from now in Java?","body":"<p>I just found this from <a href=\"http://www.java2s.com/Code/Java/Development-Class/AddsecondstocurrentdateusingCalendaraddmethod.htm\" rel=\"nofollow noreferrer\">java docs</a></p>\n\n<pre><code>import java.util.Calendar;\n\npublic class Main {\n\n  public static void main(String[] args) {\n    Calendar now = Calendar.getInstance();\n    System.out.println(\"Current time : \" + now.get(Calendar.HOUR_OF_DAY) + \":\"\n        + now.get(Calendar.MINUTE) + \":\" + now.get(Calendar.SECOND));\n\n    now.add(Calendar.SECOND, 100);\n    System.out.println(\"New time after adding 100 seconds : \" + now.get(Calendar.HOUR_OF_DAY) + \":\"\n        + now.get(Calendar.MINUTE) + \":\" + now.get(Calendar.SECOND));\n  }\n}\n</code></pre>\n\n<p>Is there a convention I should be aware of?</p>\n"},{"comments":[{"owner":{"account_id":16527,"reputation":8987,"user_id":36093,"accept_rate":100,"display_name":"Karl"},"score":1,"creation_date":1257024722,"post_id":1655450,"comment_id":1527176,"body_markdown":"Does almost entirely deprecated mean its going to break if my clients upgrade their JVM?  Holy crap... this could be really bad.  Why would they kill Date?!","body":"Does almost entirely deprecated mean its going to break if my clients upgrade their JVM?  Holy crap... this could be really bad.  Why would they kill Date?!"},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":6,"creation_date":1257026011,"post_id":1655450,"comment_id":1527238,"body_markdown":"Very, very rarely is deprecated stuff really removed from the JRE and usually it&#39;s only done if the functionality is actively harmful. I think there is no danger that Date will be removed in any of the next few major releases. It&#39;s deprecated, because it has some severe drawbacks, but it will stay around.","body":"Very, very rarely is deprecated stuff really removed from the JRE and usually it&#39;s only done if the functionality is actively harmful. I think there is no danger that Date will be removed in any of the next few major releases. It&#39;s deprecated, because it has some severe drawbacks, but it will stay around."},{"owner":{"account_id":26957,"reputation":564381,"user_id":70604,"display_name":"Pascal Thivent"},"score":1,"creation_date":1257026182,"post_id":1655450,"comment_id":1527251,"body_markdown":"@Karl I have nothing to add to Joachim&#39;s answer.","body":"@Karl I have nothing to add to Joachim&#39;s answer."},{"owner":{"account_id":3437,"reputation":42021,"user_id":4960,"accept_rate":95,"display_name":"Nick Stinemates"},"score":0,"creation_date":1257029214,"post_id":1655450,"comment_id":1527384,"body_markdown":"I accepted this as the answer because the getTime() setTime() methods are considered &#39;deprecated&#39; by the Java API. This is succinct.","body":"I accepted this as the answer because the getTime() setTime() methods are considered &#39;deprecated&#39; by the Java API. This is succinct."},{"owner":{"account_id":3437,"reputation":42021,"user_id":4960,"accept_rate":95,"display_name":"Nick Stinemates"},"score":10,"creation_date":1257034885,"post_id":1655450,"comment_id":1527624,"body_markdown":"@Karl, as an FYI calendar.getTime() in this example returns a Date. I don&#39;t think they&#39;re deprecating Date as much as they&#39;re deprecating some of its functionality.","body":"@Karl, as an FYI calendar.getTime() in this example returns a Date. I don&#39;t think they&#39;re deprecating Date as much as they&#39;re deprecating some of its functionality."},{"owner":{"account_id":1032845,"reputation":3336,"user_id":2698167,"accept_rate":33,"display_name":"Tuntable"},"score":0,"creation_date":1532158994,"post_id":1655450,"comment_id":89877473,"body_markdown":"Calendar has also been replaced by JodaTime.  But if you are using any external API that needs a date, it will use Date(), so that is what you should probably use, with lots of conversions.  The deprecated Date methods were not that bad either, and should have been fixed rather than adding a vast amount of complexity to deal with arcane issues like Hebrew calendars.","body":"Calendar has also been replaced by JodaTime.  But if you are using any external API that needs a date, it will use Date(), so that is what you should probably use, with lots of conversions.  The deprecated Date methods were not that bad either, and should have been fixed rather than adding a vast amount of complexity to deal with arcane issues like Hebrew calendars."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":2,"creation_date":1560285317,"post_id":1655450,"comment_id":99684348,"body_markdown":"@Tuntable The [*Joda-Time*](https://www.joda.org/joda-time/) project was succeeded by the *java.time* classes defined in [JSR 310](https://www.jcp.org/en/jsr/detail?id=310), as were the terrible `Date`/`Calendar` classes. Ex: `java.time.Instant.now().plusSeconds( 5 )`","body":"@Tuntable The <a href=\"https://www.joda.org/joda-time/\" rel=\"nofollow noreferrer\"><i>Joda-Time</i></a> project was succeeded by the <i>java.time</i> classes defined in <a href=\"https://www.jcp.org/en/jsr/detail?id=310\" rel=\"nofollow noreferrer\">JSR 310</a>, as were the terrible <code>Date</code>/<code>Calendar</code> classes. Ex: <code>java.time.Instant.now().plusSeconds( 5 )</code>"}],"tags":[],"owner":{"account_id":26957,"reputation":564381,"user_id":70604,"display_name":"Pascal Thivent"},"comment_count":7,"down_vote_count":1,"up_vote_count":102,"is_accepted":true,"score":101,"last_activity_date":1257019021,"creation_date":1257019021,"answer_id":1655450,"question_id":1655357,"body_markdown":"[Date][1] is almost entirely deprecated and is still there for backward compatibility reasons. If you need to set particular dates or do date arithmetic, use a [Calendar][2]:\r\n\r\n    Calendar calendar = Calendar.getInstance(); // gets a calendar using the default time zone and locale.\r\n    calendar.add(Calendar.SECOND, 5);\r\n    System.out.println(calendar.getTime());\r\n\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/util/Date.html\r\n  [2]: http://java.sun.com/javase/6/docs/api/java/util/Calendar.html","title":"How do I say 5 seconds from now in Java?","body":"<p><a href=\"http://java.sun.com/javase/6/docs/api/java/util/Date.html\" rel=\"noreferrer\">Date</a> is almost entirely deprecated and is still there for backward compatibility reasons. If you need to set particular dates or do date arithmetic, use a <a href=\"http://java.sun.com/javase/6/docs/api/java/util/Calendar.html\" rel=\"noreferrer\">Calendar</a>:</p>\n\n<pre><code>Calendar calendar = Calendar.getInstance(); // gets a calendar using the default time zone and locale.\ncalendar.add(Calendar.SECOND, 5);\nSystem.out.println(calendar.getTime());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":49287,"reputation":454,"user_id":146697,"display_name":"AlexPat"},"comment_count":0,"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1257021069,"creation_date":1257021069,"answer_id":1655538,"question_id":1655357,"body_markdown":"From the one-liner-hacky dep.:\r\n\r\n`new Date( System.currentTimeMillis() + 5000L)`\r\n\r\nAs I understand it from your example, &#39;now&#39; is really &#39;now&#39;, and &quot;System.currentTimeMillis()&#39; happens to represent that same &#39;now&#39; concept :-)\r\n\r\nBut, yup, for everything more complicated than that the Joda time API rocks.\r\n\r\n\r\n\r\n\r\n","title":"How do I say 5 seconds from now in Java?","body":"<p>From the one-liner-hacky dep.:</p>\n\n<p><code>new Date( System.currentTimeMillis() + 5000L)</code></p>\n\n<p>As I understand it from your example, 'now' is really 'now', and \"System.currentTimeMillis()' happens to represent that same 'now' concept :-)</p>\n\n<p>But, yup, for everything more complicated than that the Joda time API rocks.</p>\n"},{"comments":[{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":5,"creation_date":1257024942,"post_id":1655667,"comment_id":1527189,"body_markdown":"&quot;java.util.Date&quot; is to &quot;use Joda Time&quot; as &quot;Random is giving me repeated values&quot; is to &quot;don&#39;t keep creating new instances of Random&quot; :)","body":"&quot;java.util.Date&quot; is to &quot;use Joda Time&quot; as &quot;Random is giving me repeated values&quot; is to &quot;don&#39;t keep creating new instances of Random&quot; :)"}],"tags":[],"owner":{"account_id":7450,"reputation":269220,"user_id":12960,"display_name":"Brian Agnew"},"comment_count":1,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1257024046,"creation_date":1257024046,"answer_id":1655667,"question_id":1655357,"body_markdown":"As others have pointed out, in [Joda][1] it&#39;s much easier:\r\n\r\n    DateTime dt = new DateTime();\r\n    DateTime added = dt.plusSeconds(5);\r\n\r\nI would strongly recommend you migrate to Joda. Almost any Java date-related question on SO resolves to a Joda recommendation :-) The Joda API is supposed to be the basis of the new standard Java date API (JSR310), so you&#39;ll be migrating towards a new standard.\r\n\r\n\r\n  [1]: http://joda-time.sourceforge.net/","title":"How do I say 5 seconds from now in Java?","body":"<p>As others have pointed out, in <a href=\"http://joda-time.sourceforge.net/\" rel=\"noreferrer\">Joda</a> it's much easier:</p>\n\n<pre><code>DateTime dt = new DateTime();\nDateTime added = dt.plusSeconds(5);\n</code></pre>\n\n<p>I would strongly recommend you migrate to Joda. Almost any Java date-related question on SO resolves to a Joda recommendation :-) The Joda API is supposed to be the basis of the new standard Java date API (JSR310), so you'll be migrating towards a new standard.</p>\n"},{"tags":[],"owner":{"account_id":4704766,"reputation":145,"user_id":3807278,"display_name":"overflow"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1436830211,"creation_date":1409217809,"answer_id":25545253,"question_id":1655357,"body_markdown":"    public class datetime {\r\n    \r\n        public String CurrentDate() {        \r\n            java.util.Date dt = new java.util.Date();\r\n            java.text.SimpleDateFormat sdf = new java.text.SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;); \r\n            String currentTime = sdf.format(dt);\r\n            return currentTime;\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            class SayHello extends TimerTask {\r\n                datetime thisObj = new datetime();\r\n                public void run() {\r\n                    String todaysdate = thisObj.CurrentDate();\r\n                    System.out.println(todaysdate);\r\n                }\r\n            }\r\n            Timer timer = new Timer();\r\n            timer.schedule(new SayHello(), 0, 5000); \r\n        }\r\n    }","title":"How do I say 5 seconds from now in Java?","body":"<pre><code>public class datetime {\n\n    public String CurrentDate() {        \n        java.util.Date dt = new java.util.Date();\n        java.text.SimpleDateFormat sdf = new java.text.SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\"); \n        String currentTime = sdf.format(dt);\n        return currentTime;\n    }\n\n    public static void main(String[] args) {\n        class SayHello extends TimerTask {\n            datetime thisObj = new datetime();\n            public void run() {\n                String todaysdate = thisObj.CurrentDate();\n                System.out.println(todaysdate);\n            }\n        }\n        Timer timer = new Timer();\n        timer.schedule(new SayHello(), 0, 5000); \n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":557322,"reputation":8250,"user_id":919710,"accept_rate":80,"display_name":"Alexandre Santos"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1422650331,"creation_date":1422650331,"answer_id":28244221,"question_id":1655357,"body_markdown":"Ignoring `Dates` and focusing on the question.\r\n\r\nMy preference is to use `java.util.concurrent.TimeUnit` since it adds clarity to my code.\r\n\r\nIn Java,\r\n\r\n    long now = System.currentTimeMillis();\r\n\r\n5 seconds from `now` using `TimeUtil` is:\r\n\r\n    long nowPlus5Seconds = now + TimeUnit.SECONDS.toMillis(5);\r\n\r\nReference: http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/TimeUnit.html\r\n","title":"How do I say 5 seconds from now in Java?","body":"<p>Ignoring <code>Dates</code> and focusing on the question.</p>\n\n<p>My preference is to use <code>java.util.concurrent.TimeUnit</code> since it adds clarity to my code.</p>\n\n<p>In Java,</p>\n\n<pre><code>long now = System.currentTimeMillis();\n</code></pre>\n\n<p>5 seconds from <code>now</code> using <code>TimeUtil</code> is:</p>\n\n<pre><code>long nowPlus5Seconds = now + TimeUnit.SECONDS.toMillis(5);\n</code></pre>\n\n<p>Reference: <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/TimeUnit.html\" rel=\"noreferrer\">http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/TimeUnit.html</a></p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1593913647,"creation_date":1422782920,"answer_id":28261305,"question_id":1655357,"body_markdown":"**UPDATE:** See [my new Answer](https://stackoverflow.com/a/56548247/642706) using *java.time* classes. I am leaving this Answer intact as history.\r\n\r\n\r\n----------\r\n\r\n\r\n[The Answer][1] by Pascal Thivent and [the Answer][2] by Jon Skeet are both correct and good. Here&#39;s a bit of extra info.\r\n\r\n# Five Seconds = `PT5S` (ISO 8601)\r\n\r\nAnother way to express the idea of &quot;five seconds later&quot; is in a string using the standard formats defined by [ISO 8601][3]. The [duration/period format][4] has this pattern `PnYnMnDTnHnMnS` where the `P` marks the beginning and the `T` separates the date portion from time portion. \r\n\r\nSo five seconds is `PT5S`.\r\n\r\n# Joda-Time\r\n\r\nThe [Joda-Time][5] 2.8 library can both generate and parse such duration/period strings. See the [`Period`][6], [`Duration`][7], and [`Interval`][8] classes. You can add and subtract Period objects to/from [`DateTime`][9] objects.\r\n\r\nSearch StackOverflow for many examples and discussions. Here&#39;s one quick example.\r\n\r\n    DateTimeZone zone = DateTimeZone.forID( &quot;America/Montreal&quot; );\r\n    DateTime now = DateTime.now( zone );\r\n    DateTime then = now.plusSeconds( 5 );\r\n    Interval interval = new Interval( now, then );\r\n    Period period = interval.toPeriod( );\r\n\r\n    DateTime thenAgain = now.plus( period );\r\n\r\nDump to console.\r\n\r\n    System.out.println( &quot;zone: &quot; + zone );\r\n    System.out.println( &quot;From now: &quot; + now + &quot; to then: &quot; + then );\r\n    System.out.println( &quot;interval: &quot; + interval );\r\n    System.out.println( &quot;period: &quot; + period );\r\n    System.out.println( &quot;thenAgain: &quot; + thenAgain );\r\n    \r\nWhen run.\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    zone: America/Montreal\r\n    From now: 2015-06-15T19:38:21.242-04:00 to then: 2015-06-15T19:38:26.242-04:00\r\n    interval: 2015-06-15T19:38:21.242-04:00/2015-06-15T19:38:26.242-04:00\r\n    period: PT5S\r\n    thenAgain: 2015-06-15T19:38:26.242-04:00\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/1655450/642706\r\n  [2]: https://stackoverflow.com/a/1655366/642706\r\n  [3]: http://en.m.wikipedia.org/wiki/ISO_8601\r\n  [4]: http://en.wikipedia.org/wiki/ISO_8601%23Durations\r\n  [5]: http://www.joda.org/joda-time/\r\n  [6]: http://www.joda.org/joda-time/apidocs/org/joda/time/Period.html\r\n  [7]: http://www.joda.org/joda-time/apidocs/org/joda/time/Duration.html\r\n  [8]: http://www.joda.org/joda-time/apidocs/org/joda/time/Interval.html\r\n  [9]: http://www.joda.org/joda-time/apidocs/org/joda/time/DateTime.html","title":"How do I say 5 seconds from now in Java?","body":"<p><strong>UPDATE:</strong> See <a href=\"https://stackoverflow.com/a/56548247/642706\">my new Answer</a> using <em>java.time</em> classes. I am leaving this Answer intact as history.</p>\n<hr />\n<p><a href=\"https://stackoverflow.com/a/1655450/642706\">The Answer</a> by Pascal Thivent and <a href=\"https://stackoverflow.com/a/1655366/642706\">the Answer</a> by Jon Skeet are both correct and good. Here's a bit of extra info.</p>\n<h1>Five Seconds = <code>PT5S</code> (ISO 8601)</h1>\n<p>Another way to express the idea of &quot;five seconds later&quot; is in a string using the standard formats defined by <a href=\"http://en.m.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a>. The <a href=\"http://en.wikipedia.org/wiki/ISO_8601%23Durations\" rel=\"nofollow noreferrer\">duration/period format</a> has this pattern <code>PnYnMnDTnHnMnS</code> where the <code>P</code> marks the beginning and the <code>T</code> separates the date portion from time portion.</p>\n<p>So five seconds is <code>PT5S</code>.</p>\n<h1>Joda-Time</h1>\n<p>The <a href=\"http://www.joda.org/joda-time/\" rel=\"nofollow noreferrer\">Joda-Time</a> 2.8 library can both generate and parse such duration/period strings. See the <a href=\"http://www.joda.org/joda-time/apidocs/org/joda/time/Period.html\" rel=\"nofollow noreferrer\"><code>Period</code></a>, <a href=\"http://www.joda.org/joda-time/apidocs/org/joda/time/Duration.html\" rel=\"nofollow noreferrer\"><code>Duration</code></a>, and <a href=\"http://www.joda.org/joda-time/apidocs/org/joda/time/Interval.html\" rel=\"nofollow noreferrer\"><code>Interval</code></a> classes. You can add and subtract Period objects to/from <a href=\"http://www.joda.org/joda-time/apidocs/org/joda/time/DateTime.html\" rel=\"nofollow noreferrer\"><code>DateTime</code></a> objects.</p>\n<p>Search StackOverflow for many examples and discussions. Here's one quick example.</p>\n<pre><code>DateTimeZone zone = DateTimeZone.forID( &quot;America/Montreal&quot; );\nDateTime now = DateTime.now( zone );\nDateTime then = now.plusSeconds( 5 );\nInterval interval = new Interval( now, then );\nPeriod period = interval.toPeriod( );\n\nDateTime thenAgain = now.plus( period );\n</code></pre>\n<p>Dump to console.</p>\n<pre><code>System.out.println( &quot;zone: &quot; + zone );\nSystem.out.println( &quot;From now: &quot; + now + &quot; to then: &quot; + then );\nSystem.out.println( &quot;interval: &quot; + interval );\nSystem.out.println( &quot;period: &quot; + period );\nSystem.out.println( &quot;thenAgain: &quot; + thenAgain );\n</code></pre>\n<p>When run.</p>\n<pre class=\"lang-none prettyprint-override\"><code>zone: America/Montreal\nFrom now: 2015-06-15T19:38:21.242-04:00 to then: 2015-06-15T19:38:26.242-04:00\ninterval: 2015-06-15T19:38:21.242-04:00/2015-06-15T19:38:26.242-04:00\nperiod: PT5S\nthenAgain: 2015-06-15T19:38:26.242-04:00\n</code></pre>\n"},{"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1480063615,"post_id":40798843,"comment_id":68822964,"body_markdown":"Can you explain your code, and discuss the value it adds beyond that of the several existing answers? Stack Overflow is intended to more than a code snippet library.","body":"Can you explain your code, and discuss the value it adds beyond that of the several existing answers? Stack Overflow is intended to more than a code snippet library."},{"owner":{"account_id":6752008,"reputation":141,"user_id":5201760,"accept_rate":43,"display_name":"Kalai Prakash"},"score":0,"creation_date":1480144261,"post_id":40798843,"comment_id":68851641,"body_markdown":"am having a timeprofile.txt in device.iwas read thrw andriod bufferreader.and then adding a 15 seconds forgetting server time","body":"am having a timeprofile.txt in device.iwas read thrw andriod bufferreader.and then adding a 15 seconds forgetting server time"}],"tags":[],"owner":{"account_id":6752008,"reputation":141,"user_id":5201760,"accept_rate":43,"display_name":"Kalai Prakash"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1480054719,"creation_date":1480054719,"answer_id":40798843,"question_id":1655357,"body_markdown":"            String serverTimeSync = serverTimeFile.toString();\r\n            SimpleDateFormat serverTime = new SimpleDateFormat(&quot;yyyy,MM,dd,HH,mm,ss&quot;);\r\n            Calendar c = Calendar.getInstance();\r\n            c.setTime(serverTime.parse(serverTimeSync));\r\n            c.add(Calendar.MILLISECOND, 15000);\r\n            serverTimeSync = serverTime.format(c.getTime());","title":"How do I say 5 seconds from now in Java?","body":"<pre><code>        String serverTimeSync = serverTimeFile.toString();\n        SimpleDateFormat serverTime = new SimpleDateFormat(\"yyyy,MM,dd,HH,mm,ss\");\n        Calendar c = Calendar.getInstance();\n        c.setTime(serverTime.parse(serverTimeSync));\n        c.add(Calendar.MILLISECOND, 15000);\n        serverTimeSync = serverTime.format(c.getTime());\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3093821,"reputation":53931,"user_id":3182664,"accept_rate":55,"display_name":"Marco13"},"score":1,"creation_date":1560251560,"post_id":56542023,"comment_id":99666429,"body_markdown":"No, don&#39;t try this. `Calendar` and `Date` are almost entirely deprecated. Nowadays, the answer to this question is as trivial as `LocalDateTime result = LocalDateTime.now().plusSeconds(5);`. (Where &quot;trivial&quot; comes with the usual disclaimers: &quot;... unless you pass some strange time zone change with these 5 seconds, yadda yadda...&quot;)","body":"No, don&#39;t try this. <code>Calendar</code> and <code>Date</code> are almost entirely deprecated. Nowadays, the answer to this question is as trivial as <code>LocalDateTime result = LocalDateTime.now().plusSeconds(5);</code>. (Where &quot;trivial&quot; comes with the usual disclaimers: &quot;... unless you pass some strange time zone change with these 5 seconds, yadda yadda...&quot;)"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1560270596,"post_id":56542023,"comment_id":99678009,"body_markdown":"@Marco13 No, never use `LocalDateTime` to track a specific moment, as explained in its Javadoc.  For a moment use `ZonedDateTime`, `OffsetDateTime`, or `Instant`. Ex: `ZonedDateTime.now( ZoneId.systemDefault() ).plusSeconds( 5 )`","body":"@Marco13 No, never use <code>LocalDateTime</code> to track a specific moment, as explained in its Javadoc.  For a moment use <code>ZonedDateTime</code>, <code>OffsetDateTime</code>, or <code>Instant</code>. Ex: <code>ZonedDateTime.now( ZoneId.systemDefault() ).plusSeconds( 5 )</code>"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1560270799,"post_id":56542023,"comment_id":99678104,"body_markdown":"The classes used in this Answer are terrible. So terrible that Sun, Oracle, and the JCP community gave up on them years ago with the adoption of JSR 310 defining the modern *java.time* classes.  Suggesting these legacy classes in 2019 is poor advice.","body":"The classes used in this Answer are terrible. So terrible that Sun, Oracle, and the JCP community gave up on them years ago with the adoption of JSR 310 defining the modern <i>java.time</i> classes.  Suggesting these legacy classes in 2019 is poor advice."}],"tags":[],"owner":{"account_id":7060641,"reputation":857,"user_id":5406023,"accept_rate":39,"display_name":"Mr. Mak"},"comment_count":3,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1560250109,"creation_date":1560250109,"answer_id":56542023,"question_id":1655357,"body_markdown":"Try This..\r\n\r\n        Date now = new Date();\r\n        System.out.println(now);\r\n\r\n        Calendar c = Calendar.getInstance();\r\n        c.setTime(now);\r\n        c.add(Calendar.SECOND, 5);\r\n        now = c.getTime();\r\n\r\n        System.out.println(now);\r\n\t\t\r\n\t\t// Output\r\n\t\tTue Jun 11 16:46:43 BDT 2019\r\n\t\tTue Jun 11 16:46:48 BDT 2019","title":"How do I say 5 seconds from now in Java?","body":"<p>Try This..</p>\n\n<pre><code>    Date now = new Date();\n    System.out.println(now);\n\n    Calendar c = Calendar.getInstance();\n    c.setTime(now);\n    c.add(Calendar.SECOND, 5);\n    now = c.getTime();\n\n    System.out.println(now);\n\n    // Output\n    Tue Jun 11 16:46:43 BDT 2019\n    Tue Jun 11 16:46:48 BDT 2019\n</code></pre>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1596348214,"creation_date":1560271235,"answer_id":56548247,"question_id":1655357,"body_markdown":"# tl;dr\r\n\r\n    Instant             // Use modern `java.time.Instant` class to represent a moment in UTC.\r\n    .now()              // Capture the current moment in UTC.\r\n    .plusSeconds( 5 )   // Add five seconds into the future. Returns another `Instant` object per the Immutable Objects pattern.\r\n\r\n# *java.time*\r\n\r\nUse the modern *java.time* classes that years ago supplanted the terrible `Date` &amp; `Calendar` classes.\r\n\r\n## UTC\r\n\r\nTo work in UTC, use [`Instant`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/Instant.html).\r\n\r\n    Instant later = Instant.now().plusSeconds( 5 ) ;\r\n\r\n## Time zone\r\n\r\nTo work in a specific time zone, use [`ZonedDateTime`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/ZonedDateTime.html).\r\n\r\n    ZoneId z = ZoneId.of( &quot;America/Montreal&quot; ) ;\r\n    ZonedDateTime later = ZonedDateTime.now( z ).pluSeconds( 5 ) ;\r\n\r\n## `Duration` \r\n\r\nYou can soft-code the amount and granularity of time to add. Use the [`Duration`][1] class.\r\n\r\n    Duration d = Duration.ofSeconds( 5 ) ;\r\n    Instant later = Instant.now().plus( d ) ;  // Soft-code the amount of time to add or subtract.\r\n\r\n\r\n\r\n----------\r\n\r\n# About *java.time*\r\n\r\nThe [*java.time*](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/package-summary.html) framework is built into Java 8 and later. These classes supplant the troublesome old [legacy](https://en.wikipedia.org/wiki/Legacy_system) date-time classes such as [`java.util.Date`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Date.html), [`Calendar`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Calendar.html), &amp; [`SimpleDateFormat`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/text/SimpleDateFormat.html).\r\n\r\nTo learn more, see the [*Oracle Tutorial*](http://docs.oracle.com/javase/tutorial/datetime/TOC.html). And search Stack Overflow for many examples and explanations. Specification is [JSR 310](https://jcp.org/en/jsr/detail?id=310).\r\n\r\nThe [*Joda-Time*](http://www.joda.org/joda-time/) project, now in [maintenance mode](https://en.wikipedia.org/wiki/Maintenance_mode), advises migration to the [java.time](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/package-summary.html) classes.\r\n\r\nYou may exchange *java.time* objects directly with your database. Use a [JDBC driver](https://en.wikipedia.org/wiki/JDBC_driver) compliant with [JDBC 4.2](http://openjdk.java.net/jeps/170) or later. No need for strings, no need for `java.sql.*` classes. Hibernate 5 &amp; JPA 2.2 support *java.time*. \r\n\r\nWhere to obtain the java.time classes? \r\n\r\n - [**Java SE 8**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8), [**Java SE 9**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9), [**Java SE 10**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_10), [**Java SE 11**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_11), and later  - Part of the standard Java API with a bundled implementation.\r\n   - [**Java 9**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9) brought some minor features and fixes.\r\n - [**Java SE 6**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_6) and [**Java SE 7**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_7)\r\n   - Most of the *java.time* functionality is back-ported to Java 6 &amp; 7 in [***ThreeTen-Backport***](http://www.threeten.org/threetenbp/).\r\n - [**Android**](https://en.wikipedia.org/wiki/Android_(operating_system))\r\n   - Later versions of Android (26+) bundle implementations of the *java.time* classes.\r\n   - For earlier Android (&lt;26), a process known as [*API desugaring*](https://developer.android.com/studio/write/java8-support#library-desugaring) brings a [subset of the *java.time*](https://developer.android.com/studio/write/java8-support-table) functionality not originally built into Android.\r\n     - If the desugaring does not offer what you need, the [***ThreeTenABP***](https://github.com/JakeWharton/ThreeTenABP) project adapts [***ThreeTen-Backport***](http://www.threeten.org/threetenbp/) (mentioned above) to Android. See [*How to use ThreeTenABP…*](http://stackoverflow.com/q/38922754/642706).\r\n\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/Duration.html","title":"How do I say 5 seconds from now in Java?","body":"<h1>tl;dr</h1>\n<pre><code>Instant             // Use modern `java.time.Instant` class to represent a moment in UTC.\n.now()              // Capture the current moment in UTC.\n.plusSeconds( 5 )   // Add five seconds into the future. Returns another `Instant` object per the Immutable Objects pattern.\n</code></pre>\n<h1><em>java.time</em></h1>\n<p>Use the modern <em>java.time</em> classes that years ago supplanted the terrible <code>Date</code> &amp; <code>Calendar</code> classes.</p>\n<h2>UTC</h2>\n<p>To work in UTC, use <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/Instant.html\" rel=\"noreferrer\"><code>Instant</code></a>.</p>\n<pre><code>Instant later = Instant.now().plusSeconds( 5 ) ;\n</code></pre>\n<h2>Time zone</h2>\n<p>To work in a specific time zone, use <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/ZonedDateTime.html\" rel=\"noreferrer\"><code>ZonedDateTime</code></a>.</p>\n<pre><code>ZoneId z = ZoneId.of( &quot;America/Montreal&quot; ) ;\nZonedDateTime later = ZonedDateTime.now( z ).pluSeconds( 5 ) ;\n</code></pre>\n<h2><code>Duration</code></h2>\n<p>You can soft-code the amount and granularity of time to add. Use the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/Duration.html\" rel=\"noreferrer\"><code>Duration</code></a> class.</p>\n<pre><code>Duration d = Duration.ofSeconds( 5 ) ;\nInstant later = Instant.now().plus( d ) ;  // Soft-code the amount of time to add or subtract.\n</code></pre>\n<hr />\n<h1>About <em>java.time</em></h1>\n<p>The <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/package-summary.html\" rel=\"noreferrer\"><em>java.time</em></a> framework is built into Java 8 and later. These classes supplant the troublesome old <a href=\"https://en.wikipedia.org/wiki/Legacy_system\" rel=\"noreferrer\">legacy</a> date-time classes such as <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Date.html\" rel=\"noreferrer\"><code>java.util.Date</code></a>, <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Calendar.html\" rel=\"noreferrer\"><code>Calendar</code></a>, &amp; <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/text/SimpleDateFormat.html\" rel=\"noreferrer\"><code>SimpleDateFormat</code></a>.</p>\n<p>To learn more, see the <a href=\"http://docs.oracle.com/javase/tutorial/datetime/TOC.html\" rel=\"noreferrer\"><em>Oracle Tutorial</em></a>. And search Stack Overflow for many examples and explanations. Specification is <a href=\"https://jcp.org/en/jsr/detail?id=310\" rel=\"noreferrer\">JSR 310</a>.</p>\n<p>The <a href=\"http://www.joda.org/joda-time/\" rel=\"noreferrer\"><em>Joda-Time</em></a> project, now in <a href=\"https://en.wikipedia.org/wiki/Maintenance_mode\" rel=\"noreferrer\">maintenance mode</a>, advises migration to the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/package-summary.html\" rel=\"noreferrer\">java.time</a> classes.</p>\n<p>You may exchange <em>java.time</em> objects directly with your database. Use a <a href=\"https://en.wikipedia.org/wiki/JDBC_driver\" rel=\"noreferrer\">JDBC driver</a> compliant with <a href=\"http://openjdk.java.net/jeps/170\" rel=\"noreferrer\">JDBC 4.2</a> or later. No need for strings, no need for <code>java.sql.*</code> classes. Hibernate 5 &amp; JPA 2.2 support <em>java.time</em>.</p>\n<p>Where to obtain the java.time classes?</p>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8\" rel=\"noreferrer\"><strong>Java SE 8</strong></a>, <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9\" rel=\"noreferrer\"><strong>Java SE 9</strong></a>, <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_10\" rel=\"noreferrer\"><strong>Java SE 10</strong></a>, <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_11\" rel=\"noreferrer\"><strong>Java SE 11</strong></a>, and later  - Part of the standard Java API with a bundled implementation.\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9\" rel=\"noreferrer\"><strong>Java 9</strong></a> brought some minor features and fixes.</li>\n</ul>\n</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_6\" rel=\"noreferrer\"><strong>Java SE 6</strong></a> and <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_7\" rel=\"noreferrer\"><strong>Java SE 7</strong></a>\n<ul>\n<li>Most of the <em>java.time</em> functionality is back-ported to Java 6 &amp; 7 in <a href=\"http://www.threeten.org/threetenbp/\" rel=\"noreferrer\"><em><strong>ThreeTen-Backport</strong></em></a>.</li>\n</ul>\n</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Android_(operating_system)\" rel=\"noreferrer\"><strong>Android</strong></a>\n<ul>\n<li>Later versions of Android (26+) bundle implementations of the <em>java.time</em> classes.</li>\n<li>For earlier Android (&lt;26), a process known as <a href=\"https://developer.android.com/studio/write/java8-support#library-desugaring\" rel=\"noreferrer\"><em>API desugaring</em></a> brings a <a href=\"https://developer.android.com/studio/write/java8-support-table\" rel=\"noreferrer\">subset of the <em>java.time</em></a> functionality not originally built into Android.\n<ul>\n<li>If the desugaring does not offer what you need, the <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"noreferrer\"><em><strong>ThreeTenABP</strong></em></a> project adapts <a href=\"http://www.threeten.org/threetenbp/\" rel=\"noreferrer\"><em><strong>ThreeTen-Backport</strong></em></a> (mentioned above) to Android. See <a href=\"http://stackoverflow.com/q/38922754/642706\"><em>How to use ThreeTenABP…</em></a>.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":2,"creation_date":1695652962,"post_id":77172149,"comment_id":136049676,"body_markdown":"Definitely not recommended. Use java.time, the modern Java date and time API, as shown in [this answer by Basil Bourque](https://stackoverflow.com/a/56548247/5772882). The `Date` and `Calendar` classes were poorly designed and cumbersome to work with and for that reason were supplanted by java.time a decade ago.","body":"Definitely not recommended. Use java.time, the modern Java date and time API, as shown in <a href=\"https://stackoverflow.com/a/56548247/5772882\">this answer by Basil Bourque</a>. The <code>Date</code> and <code>Calendar</code> classes were poorly designed and cumbersome to work with and for that reason were supplanted by java.time a decade ago."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1695691135,"post_id":77172149,"comment_id":136055153,"body_markdown":"[JSR 310](https://jcp.org/en/jsr/detail?id=310)","body":"<a href=\"https://jcp.org/en/jsr/detail?id=310\" rel=\"nofollow noreferrer\">JSR 310</a>"}],"tags":[],"owner":{"account_id":29517307,"reputation":1,"user_id":22620980,"display_name":"bobo"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695640301,"creation_date":1695640301,"answer_id":77172149,"question_id":1655357,"body_markdown":"I have restructured the [answer code provided by @Pascal Thivent][1] into a Java method that you can easily incorporate into your development:\r\n\r\n    import java.util.Calendar;\r\n    \r\n    public class Post1655450 {\r\n        public static Date getFutureTime() {\r\n            Calendar calendar = Calendar.getInstance();\r\n            calendar.add(Calendar.SECOND, 5);\r\n            return calendar.getTime();\r\n        }\r\n    }\r\n\r\n[1]: https://stackoverflow.com/a/1655450\r\n\r\n","title":"How do I say 5 seconds from now in Java?","body":"<p>I have restructured the <a href=\"https://stackoverflow.com/a/1655450\">answer code provided by @Pascal Thivent</a> into a Java method that you can easily incorporate into your development:</p>\n<pre><code>import java.util.Calendar;\n\npublic class Post1655450 {\n    public static Date getFutureTime() {\n        Calendar calendar = Calendar.getInstance();\n        calendar.add(Calendar.SECOND, 5);\n        return calendar.getTime();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3437,"reputation":42021,"user_id":4960,"accept_rate":95,"display_name":"Nick Stinemates"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":128455,"favorite_count":0,"down_vote_count":0,"up_vote_count":75,"accepted_answer_id":1655450,"answer_count":12,"score":75,"last_activity_date":1695640301,"creation_date":1257017435,"question_id":1655357,"body_markdown":"I am looking at the Date [documentation][1] and trying to figure out how I can express NOW + 5 seconds. Here&#39;s some pseudocode:\r\n\r\n    import java.util.Date\r\n    public class Main {\r\n\r\n        public static void main(String args[]) {\r\n             Date now = new Date();\r\n             now.setSeconds(now.getSeconds() + 5);\r\n        }\r\n    }\r\n\r\n\r\n  [1]: http://www.j2ee.me/javase/6/docs/api/java/util/Date.html","title":"How do I say 5 seconds from now in Java?","body":"<p>I am looking at the Date <a href=\"http://www.j2ee.me/javase/6/docs/api/java/util/Date.html\" rel=\"noreferrer\">documentation</a> and trying to figure out how I can express NOW + 5 seconds. Here's some pseudocode:</p>\n\n<pre><code>import java.util.Date\npublic class Main {\n\n    public static void main(String args[]) {\n         Date now = new Date();\n         now.setSeconds(now.getSeconds() + 5);\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-mvc","encoding","spring-restcontroller"],"owner":{"account_id":1956083,"reputation":4432,"user_id":1759063,"accept_rate":53,"display_name":"Eljah"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695640237,"creation_date":1695640237,"question_id":77172144,"body_markdown":"How to decode response body to another encoding with `ResponseBodyAdvice`?\r\n\r\nI have a @ControllerAdvice that just sets the header for the encoding, but doesn&#39;t touch the inside body. I need to decode it to another encoding:\r\n\r\n    @ControllerAdvice(basePackageClasses = MyController.class)\r\n        public class CharsetAdvice implements ResponseBodyAdvice&lt;Object&gt; {\r\n            @Override\r\n            public boolean supports(MethodParameter returnType, Class&lt;? extends HttpMessageConverter&lt;?&gt;&gt; converterType) {\r\n                return true;\r\n            }\r\n    \r\n            @Override\r\n            public Object beforeBodyWrite(Object body, MethodParameter returnType, MediaType selectedContentType,\r\n                                          Class&lt;? extends HttpMessageConverter&lt;?&gt;&gt; selectedConverterType,\r\n                                          ServerHttpRequest request, ServerHttpResponse response) {\r\n                HttpHeaders headers = response.getHeaders();\r\n                headers.set(&quot;Content-Type&quot;, &quot;application/xml;charset=windows-1251&quot;);\r\n                return body;\r\n            }\r\n        }\r\n\r\nAfter applying the header, the content of the body is like `&lt;tag field=&quot;РђР&#177;РѕРЅР&#181;РЅС‚ РЅР&#176;Р№РґР&#181;РЅ&quot;/&gt;`, which looks like `UTF-8` bytes being decoded to `windows-1251` and then flushed to the HTTP response. But in fact, I need just my `UTF-8 String` with the same characters, but just in `windows-1251` encoding.\r\n\r\nWhat I can to do with `Object` body in Java 8? How I can produce another body object with updated String?\r\n\r\nWhat I should take from the `ResponseBodyAdvice`, the `request` or the `response` objects to get an updated body?","title":"How to change the body of the Http Response with ResponseBodyAdvice&#39;s beforeBodyWrite in order to change the encoding of the XML text to be returned?","body":"<p>How to decode response body to another encoding with <code>ResponseBodyAdvice</code>?</p>\n<p>I have a @ControllerAdvice that just sets the header for the encoding, but doesn't touch the inside body. I need to decode it to another encoding:</p>\n<pre><code>@ControllerAdvice(basePackageClasses = MyController.class)\n    public class CharsetAdvice implements ResponseBodyAdvice&lt;Object&gt; {\n        @Override\n        public boolean supports(MethodParameter returnType, Class&lt;? extends HttpMessageConverter&lt;?&gt;&gt; converterType) {\n            return true;\n        }\n\n        @Override\n        public Object beforeBodyWrite(Object body, MethodParameter returnType, MediaType selectedContentType,\n                                      Class&lt;? extends HttpMessageConverter&lt;?&gt;&gt; selectedConverterType,\n                                      ServerHttpRequest request, ServerHttpResponse response) {\n            HttpHeaders headers = response.getHeaders();\n            headers.set(&quot;Content-Type&quot;, &quot;application/xml;charset=windows-1251&quot;);\n            return body;\n        }\n    }\n</code></pre>\n<p>After applying the header, the content of the body is like <code>&lt;tag field=&quot;РђР±РѕРЅРµРЅС‚ РЅР°Р№РґРµРЅ&quot;/&gt;</code>, which looks like <code>UTF-8</code> bytes being decoded to <code>windows-1251</code> and then flushed to the HTTP response. But in fact, I need just my <code>UTF-8 String</code> with the same characters, but just in <code>windows-1251</code> encoding.</p>\n<p>What I can to do with <code>Object</code> body in Java 8? How I can produce another body object with updated String?</p>\n<p>What I should take from the <code>ResponseBodyAdvice</code>, the <code>request</code> or the <code>response</code> objects to get an updated body?</p>\n"},{"tags":["java","amazon-web-services","amazon-dynamodb","javabeans","aws-sdk-java-2.0"],"answers":[{"comments":[{"owner":{"account_id":19482640,"reputation":13,"user_id":14252593,"display_name":"Cabbage_Lower"},"score":1,"creation_date":1695637707,"post_id":77171832,"comment_id":136046424,"body_markdown":"That was also my hunch, Thanks for confirming","body":"That was also my hunch, Thanks for confirming"}],"tags":[],"owner":{"account_id":6157899,"reputation":19810,"user_id":4800344,"display_name":"Ermiya Eskandary"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695637838,"creation_date":1695637444,"answer_id":77171832,"question_id":77171474,"body_markdown":"[`DynamoDbBean`][1] should only be used for a class that conforms to the [JavaBeans specification][2] (also mentioned [here][3]) &amp; your class doesn&#39;t.\r\n\r\nAs per the spec (*8.3.1 Simple properties*), the getter for a non-boolean property should be prefixed with `get` and `is` is only allowed as an extra prefix for `boolean` properties. That&#39;s why it works when you change the datatype to `boolean` and stops working when you change it back to `string`.\r\n\r\nThe enhanced client most likely uses reflection to infer the attribute names and values from the getter and setter methods, and to invoke those methods when reading or writing data to DynamoDB - not adhering to the spec is causing an issue for that process.\r\n\r\nEither:\r\n\r\n - change the attribute to a `boolean`\r\n - use `get`, as per the JavaBeans specification\r\n - create a custom `AttributeConverterProvider` implementation ([example][4]) \r\n\r\n\r\n  [1]: https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/enhanced/dynamodb/mapper/annotations/DynamoDbBean.html\r\n  [2]: http://download.oracle.com/otn-pub/jcp/7224-javabeans-1.01-fr-spec-oth-JSpec/beans.101.pdf\r\n  [3]: https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/ddb-en-client-adv-features.html\r\n  [4]: https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/ddb-en-client-adv-features-conversion.html#ddb-en-client-adv-features-conversion-example","title":"Attribute not getting updated while using DynamoDB Enhanced Client","body":"<p><a href=\"https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/enhanced/dynamodb/mapper/annotations/DynamoDbBean.html\" rel=\"nofollow noreferrer\"><code>DynamoDbBean</code></a> should only be used for a class that conforms to the <a href=\"http://download.oracle.com/otn-pub/jcp/7224-javabeans-1.01-fr-spec-oth-JSpec/beans.101.pdf\" rel=\"nofollow noreferrer\">JavaBeans specification</a> (also mentioned <a href=\"https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/ddb-en-client-adv-features.html\" rel=\"nofollow noreferrer\">here</a>) &amp; your class doesn't.</p>\n<p>As per the spec (<em>8.3.1 Simple properties</em>), the getter for a non-boolean property should be prefixed with <code>get</code> and <code>is</code> is only allowed as an extra prefix for <code>boolean</code> properties. That's why it works when you change the datatype to <code>boolean</code> and stops working when you change it back to <code>string</code>.</p>\n<p>The enhanced client most likely uses reflection to infer the attribute names and values from the getter and setter methods, and to invoke those methods when reading or writing data to DynamoDB - not adhering to the spec is causing an issue for that process.</p>\n<p>Either:</p>\n<ul>\n<li>change the attribute to a <code>boolean</code></li>\n<li>use <code>get</code>, as per the JavaBeans specification</li>\n<li>create a custom <code>AttributeConverterProvider</code> implementation (<a href=\"https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/ddb-en-client-adv-features-conversion.html#ddb-en-client-adv-features-conversion-example\" rel=\"nofollow noreferrer\">example</a>)</li>\n</ul>\n"}],"owner":{"account_id":19482640,"reputation":13,"user_id":14252593,"display_name":"Cabbage_Lower"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":184,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77171832,"answer_count":1,"score":1,"last_activity_date":1695639935,"creation_date":1695634455,"question_id":77171474,"body_markdown":"I was updating one of our DynamoDB entities with new attributes.\r\n\r\nOne of the new attribute is called `isEnabled` which is of type of `String`.\r\n\r\nIt isn’t getting stored in DynamoDB.\r\n\r\nThis is an example of the entity object:\r\n\r\n```java\r\n@NoArgConstructor\r\n@DynamoDbBean\r\n@DynamoDbTableName(tableName = &quot;tableName&quot;)\r\ndata class DynamoEntity (\r\n@get:DynamoDbAttribute(&quot;isEnabled&quot;)\r\n    var isEnabled: String;\r\n)\r\n...\r\n```\r\n\r\nIf I change the type to `Boolean` it works.\r\n\r\nIf I update the attribute name like so, it also works:\r\n\r\n```java\r\n@NoArgConstructor\r\n@DynamoDbBean\r\n@DynamoDbTableName(tableName = &quot;tableName&quot;)\r\ndata class DynamoEntity (\r\n@get:DynamoDbAttribute(&quot;isEnabled&quot;)\r\n    var enabled: String;\r\n)\r\n...\r\n```\r\n\r\nI couldn&#39;t find any documentation around this and if the attribute name starting with `is` is an issue.\r\n\r\nIs this expected behaviour?","title":"Attribute not getting updated while using DynamoDB Enhanced Client","body":"<p>I was updating one of our DynamoDB entities with new attributes.</p>\n<p>One of the new attribute is called <code>isEnabled</code> which is of type of <code>String</code>.</p>\n<p>It isn’t getting stored in DynamoDB.</p>\n<p>This is an example of the entity object:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@NoArgConstructor\n@DynamoDbBean\n@DynamoDbTableName(tableName = &quot;tableName&quot;)\ndata class DynamoEntity (\n@get:DynamoDbAttribute(&quot;isEnabled&quot;)\n    var isEnabled: String;\n)\n...\n</code></pre>\n<p>If I change the type to <code>Boolean</code> it works.</p>\n<p>If I update the attribute name like so, it also works:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@NoArgConstructor\n@DynamoDbBean\n@DynamoDbTableName(tableName = &quot;tableName&quot;)\ndata class DynamoEntity (\n@get:DynamoDbAttribute(&quot;isEnabled&quot;)\n    var enabled: String;\n)\n...\n</code></pre>\n<p>I couldn't find any documentation around this and if the attribute name starting with <code>is</code> is an issue.</p>\n<p>Is this expected behaviour?</p>\n"},{"tags":["java","dynamic","height","report","ireport"],"comments":[{"owner":{"account_id":1587104,"reputation":1012,"user_id":1471179,"accept_rate":20,"display_name":"Ahamed Ishak"},"score":1,"creation_date":1340262015,"post_id":11132757,"comment_id":14591109,"body_markdown":"yep!!!!! i got the way how to do that \n\nset the prosperity   ignore **pagination =true** in the report\n\nRegards..","body":"yep!!!!! i got the way how to do that   set the prosperity   ignore <b>pagination =true</b> in the report  Regards.."}],"answers":[{"comments":[{"owner":{"account_id":1587104,"reputation":1012,"user_id":1471179,"accept_rate":20,"display_name":"Ahamed Ishak"},"score":1,"creation_date":1340261963,"post_id":11132987,"comment_id":14591099,"body_markdown":"yep!!!!! i got the way how to do that \n\nset the prosperity   ignore **pagination =true** in the report\n\nRegards..","body":"yep!!!!! i got the way how to do that   set the prosperity   ignore <b>pagination =true</b> in the report  Regards.."}],"tags":[],"owner":{"account_id":1548636,"reputation":658,"user_id":1441544,"display_name":"esmoreno"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1340261570,"creation_date":1340261570,"answer_id":11132987,"question_id":11132757,"body_markdown":"You must put the fields in detail band. This is an basic tutorial: http://jasperforge.org/uploads/publish/ireportwebsite/IR%20Website/ir_design_a_report.html\r\n\r\nRegards","title":"How to set iReport page height dynamically when it generate","body":"<p>You must put the fields in detail band. This is an basic tutorial: <a href=\"http://jasperforge.org/uploads/publish/ireportwebsite/IR%20Website/ir_design_a_report.html\" rel=\"nofollow\">http://jasperforge.org/uploads/publish/ireportwebsite/IR%20Website/ir_design_a_report.html</a></p>\n\n<p>Regards</p>\n"},{"tags":[],"owner":{"account_id":8373468,"reputation":2915,"user_id":6287771,"display_name":"Carlos Chaguendo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1597969400,"creation_date":1597968775,"answer_id":63514792,"question_id":11132757,"body_markdown":"select report &gt; Properties &gt; Ignore pagination = true\r\n\r\n\r\n    &lt;jasperReport \r\n     xmlns=....\r\n     ...\r\n     ...\r\n     isIgnorePagination=&quot;true&quot; \r\n     &gt;\r\n\r\n  ","title":"How to set iReport page height dynamically when it generate","body":"<p>select report &gt; Properties &gt; Ignore pagination = true</p>\n<pre><code>&lt;jasperReport \n xmlns=....\n ...\n ...\n isIgnorePagination=&quot;true&quot; \n &gt;\n</code></pre>\n"}],"owner":{"account_id":1587104,"reputation":1012,"user_id":1471179,"accept_rate":20,"display_name":"Ahamed Ishak"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8545,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695639660,"creation_date":1340260481,"question_id":11132757,"body_markdown":"i&#39;m new for iReport. i&#39;m building a point of sale system using java. to print the receipt i used the irepot. my problem is when i&#39;m generate a report report height is not get reduce or increase dynamically.\r\n\r\nfor ex : when there are 2 rows in the report report height must be reduce. if there the 50 rows in the report, report height must be increase dynamically.\r\n\r\nHow can i do that....\r\n\r\n","title":"How to set iReport page height dynamically when it generate","body":"<p>i'm new for iReport. i'm building a point of sale system using java. to print the receipt i used the irepot. my problem is when i'm generate a report report height is not get reduce or increase dynamically.</p>\n\n<p>for ex : when there are 2 rows in the report report height must be reduce. if there the 50 rows in the report, report height must be increase dynamically.</p>\n\n<p>How can i do that....</p>\n"},{"tags":["java","reactjs","spring-boot","axios"],"comments":[{"owner":{"account_id":45934,"reputation":203679,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":0,"creation_date":1695639762,"post_id":77172084,"comment_id":136046785,"body_markdown":"What does the actual JSON look like? Are the values for each of the fields (name, phone, username, password) indeed strings or are one or more of them an object (something between `{ ... }`)?","body":"What does the actual JSON look like? Are the values for each of the fields (name, phone, username, password) indeed strings or are one or more of them an object (something between <code>{ ... }</code>)?"},{"owner":{"account_id":16657879,"reputation":2625,"user_id":12038714,"display_name":"J Asgarov"},"score":1,"creation_date":1695640125,"post_id":77172084,"comment_id":136046851,"body_markdown":"the problem is most likely that the json you are sending doesn&#39;t match (and hence can&#39;t be deserialized to) `RegistrationDTO`. Show us the JSON you are sending - you can find it in the `Network` tab in chrome, in `Request Payload` section","body":"the problem is most likely that the json you are sending doesn&#39;t match (and hence can&#39;t be deserialized to) <code>RegistrationDTO</code>. Show us the JSON you are sending - you can find it in the <code>Network</code> tab in chrome, in <code>Request Payload</code> section"},{"owner":{"account_id":14352417,"reputation":171,"user_id":10367451,"display_name":"JohnnySmith88"},"score":0,"creation_date":1695640129,"post_id":77172084,"comment_id":136046853,"body_markdown":"They&#39;re all strings.","body":"They&#39;re all strings."},{"owner":{"account_id":14352417,"reputation":171,"user_id":10367451,"display_name":"JohnnySmith88"},"score":0,"creation_date":1695641412,"post_id":77172084,"comment_id":136047107,"body_markdown":"I didn&#39;t know about Network-Request payload --- thank you. my JSON was wrong","body":"I didn&#39;t know about Network-Request payload --- thank you. my JSON was wrong"}],"owner":{"account_id":14352417,"reputation":171,"user_id":10367451,"display_name":"JohnnySmith88"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1695710698,"answer_count":0,"score":0,"last_activity_date":1695639606,"creation_date":1695639606,"question_id":77172084,"body_markdown":"I cannot POST an object from my React frontend to Spring Boot. \r\nI&#39;m receiving this error `Cannot deserialize value of type java.lang.String from Object value (token JsonToken.START_OBJECT)]`\r\nThis is the API endpoint\r\n\r\n    @PostMapping(&quot;/register&quot;)\r\n    public String registerUser(@RequestBody RegistrationDTO body){\r\n        ....\r\n    }\r\n\r\nThis is my DTO that I&#39;m expecting as a body \r\n\r\n    public class RegistrationDTO {\r\n        private String name;\r\n        private String phone;\r\n        private String username;\r\n        private String password;\r\n        //getters, setters, constructors...\r\n    }\r\nNow this is the React frontend code...\r\n\r\n    const registerUser = async (name, phone, email, password) =&gt; {\r\n  \r\n    const apiEndpoint = &#39;http://localhost:8000/auth/register&#39;\r\n\r\n    const req = {        \r\n        name:name,\r\n        phone:phone,\r\n        username:email,\r\n        password:password\r\n    }\r\n    \r\n\r\n    const customConfig = {\r\n        headers: {\r\n        &#39;Content-Type&#39;: &#39;application/json&#39;\r\n        }\r\n    }\r\n\r\n    try {\r\n        const resp = await axios.post(apiEndpoint, req, customConfig)\r\n        return resp.data\r\n    } catch (error) {\r\n        console.log(JSON.stringify(error))\r\n        return null\r\n    }\r\n  }\r\n\r\n  \r\n\r\n","title":"Cannot POST object from React to Spring Boot","body":"<p>I cannot POST an object from my React frontend to Spring Boot.\nI'm receiving this error <code>Cannot deserialize value of type java.lang.String from Object value (token JsonToken.START_OBJECT)]</code>\nThis is the API endpoint</p>\n<pre><code>@PostMapping(&quot;/register&quot;)\npublic String registerUser(@RequestBody RegistrationDTO body){\n    ....\n}\n</code></pre>\n<p>This is my DTO that I'm expecting as a body</p>\n<pre><code>public class RegistrationDTO {\n    private String name;\n    private String phone;\n    private String username;\n    private String password;\n    //getters, setters, constructors...\n}\n</code></pre>\n<p>Now this is the React frontend code...</p>\n<pre><code>const registerUser = async (name, phone, email, password) =&gt; {\n\nconst apiEndpoint = 'http://localhost:8000/auth/register'\n\nconst req = {        \n    name:name,\n    phone:phone,\n    username:email,\n    password:password\n}\n\n\nconst customConfig = {\n    headers: {\n    'Content-Type': 'application/json'\n    }\n}\n\ntry {\n    const resp = await axios.post(apiEndpoint, req, customConfig)\n    return resp.data\n} catch (error) {\n    console.log(JSON.stringify(error))\n    return null\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","apache-kafka","quarkus","smallrye-reactive-messaging"],"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1695388569,"post_id":77157637,"comment_id":136021655,"body_markdown":"I&#39;m not sure you can use smallrye for this. Generally, people use AdminClient to check Kafka health","body":"I&#39;m not sure you can use smallrye for this. Generally, people use AdminClient to check Kafka health"}],"answers":[{"tags":[],"owner":{"account_id":18144706,"reputation":196,"user_id":13198160,"display_name":"Ozan G&#252;nalp"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695638590,"creation_date":1695638590,"answer_id":77171962,"question_id":77157637,"body_markdown":"One way of doing this is to rely on the [`HealthCenter`][1] that Smallrye reactive messaging provides. For the Kafka connector, the default health check looks at the Kafka client APIs metrics and check for the connection status. You can look at other options from the documentation too.\r\n\r\nUnfortunately, Kafka Client APIs don&#39;t provide anything more helpful to check the connection status. Here is a sample code : \r\n\r\n```java\r\n\r\n    @Channel(&quot;quote-requests&quot;)\r\n    Emitter&lt;String&gt; emitter;\r\n\r\n    @Inject\r\n    HealthCenter healthCenter;\r\n\r\n    @POST\r\n    @Path(&quot;/request&quot;)\r\n    @Produces(MediaType.TEXT_PLAIN)\r\n    public String createRequest() {\r\n        if (healthCenter.getReadiness().getChannels().stream().noneMatch(c -&gt; c.getChannel().equals(&quot;quote-requests&quot;) &amp;&amp; c.isOk())) {\r\n            throw new WebApplicationException(503);\r\n        }\r\n        UUID uuid = UUID.randomUUID();\r\n        emitter.send(uuid.toString());\r\n        return uuid.toString();\r\n    }\r\n\r\n```\r\n\r\nNote that, this is not optimal though, it&#39;ll get the readiness of all reactive messaging channels, and won&#39;t work if you disable the health checks for these channels. Another option is to use the [`KafkaClientService`][2] and access the KafkaProducer directly in order to get the metrics yourself. The connector checks the [`connection-count`][3] metric.\r\n\r\nHope this helps.\r\n\r\n\r\n  [1]: https://smallrye.io/smallrye-reactive-messaging/4.9.0/kafka/health/\r\n  [2]: https://smallrye.io/smallrye-reactive-messaging/4.9.0/kafka/client-service/\r\n  [3]: https://docs.confluent.io/platform/current/kafka/monitoring.html#producer-global-connection-metrics","title":"Kafka liveness with Quarkus SmallRye","body":"<p>One way of doing this is to rely on the <a href=\"https://smallrye.io/smallrye-reactive-messaging/4.9.0/kafka/health/\" rel=\"nofollow noreferrer\"><code>HealthCenter</code></a> that Smallrye reactive messaging provides. For the Kafka connector, the default health check looks at the Kafka client APIs metrics and check for the connection status. You can look at other options from the documentation too.</p>\n<p>Unfortunately, Kafka Client APIs don't provide anything more helpful to check the connection status. Here is a sample code :</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n    @Channel(&quot;quote-requests&quot;)\n    Emitter&lt;String&gt; emitter;\n\n    @Inject\n    HealthCenter healthCenter;\n\n    @POST\n    @Path(&quot;/request&quot;)\n    @Produces(MediaType.TEXT_PLAIN)\n    public String createRequest() {\n        if (healthCenter.getReadiness().getChannels().stream().noneMatch(c -&gt; c.getChannel().equals(&quot;quote-requests&quot;) &amp;&amp; c.isOk())) {\n            throw new WebApplicationException(503);\n        }\n        UUID uuid = UUID.randomUUID();\n        emitter.send(uuid.toString());\n        return uuid.toString();\n    }\n\n</code></pre>\n<p>Note that, this is not optimal though, it'll get the readiness of all reactive messaging channels, and won't work if you disable the health checks for these channels. Another option is to use the <a href=\"https://smallrye.io/smallrye-reactive-messaging/4.9.0/kafka/client-service/\" rel=\"nofollow noreferrer\"><code>KafkaClientService</code></a> and access the KafkaProducer directly in order to get the metrics yourself. The connector checks the <a href=\"https://docs.confluent.io/platform/current/kafka/monitoring.html#producer-global-connection-metrics\" rel=\"nofollow noreferrer\"><code>connection-count</code></a> metric.</p>\n<p>Hope this helps.</p>\n"}],"owner":{"account_id":29121825,"reputation":1,"user_id":22309101,"display_name":"hunter662"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695638590,"creation_date":1695385936,"question_id":77157637,"body_markdown":"I&#39;m fairly new to Quarkus and I&#39;m trying to send some data to Kafka. To do so, I&#39;m using smallrye-kafka:\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n    &lt;artifactId&gt;quarkus-smallrye-reactive-messaging-kafka&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nTo send data, I&#39;m using an Emitter like this:\r\n\r\n```java\r\n@Inject\r\n@Channel(&quot;my-channel&quot;)\r\nprivate Emitter&lt;Record&lt;String, Hotel&gt;&gt; emitter;\r\n\r\nemitter.send(Record.of(hotel.getId(), hotel))\r\n```\r\n\r\nIs it possible to check if Kafka server is up and in case to handle the error with an exception? Or is it available some documentation which describe how to do so?","title":"Kafka liveness with Quarkus SmallRye","body":"<p>I'm fairly new to Quarkus and I'm trying to send some data to Kafka. To do so, I'm using smallrye-kafka:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n    &lt;artifactId&gt;quarkus-smallrye-reactive-messaging-kafka&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>To send data, I'm using an Emitter like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Inject\n@Channel(&quot;my-channel&quot;)\nprivate Emitter&lt;Record&lt;String, Hotel&gt;&gt; emitter;\n\nemitter.send(Record.of(hotel.getId(), hotel))\n</code></pre>\n<p>Is it possible to check if Kafka server is up and in case to handle the error with an exception? Or is it available some documentation which describe how to do so?</p>\n"},{"tags":["java","hashmap"],"comments":[{"owner":{"account_id":2345668,"reputation":13002,"user_id":2055998,"accept_rate":68,"display_name":"PM 77-1"},"score":3,"creation_date":1556820277,"post_id":55957899,"comment_id":98567505,"body_markdown":"Map needs both *key* and *value* for each entry.","body":"Map needs both <i>key</i> and <i>value</i> for each entry."},{"owner":{"account_id":2345668,"reputation":13002,"user_id":2055998,"accept_rate":68,"display_name":"PM 77-1"},"score":0,"creation_date":1556820388,"post_id":55957899,"comment_id":98567560,"body_markdown":"Also, do not give variable its type name. You will confuse yourself.","body":"Also, do not give variable its type name. You will confuse yourself."},{"owner":{"account_id":8502740,"reputation":203,"user_id":6375240,"accept_rate":100,"display_name":"Isaac Palacio"},"score":0,"creation_date":1556822891,"post_id":55957899,"comment_id":98568675,"body_markdown":"Okay, but this happens to the method: `catalogue1.addResource(book);`","body":"Okay, but this happens to the method: <code>catalogue1.addResource(book);</code>"},{"owner":{"account_id":2345668,"reputation":13002,"user_id":2055998,"accept_rate":68,"display_name":"PM 77-1"},"score":1,"creation_date":1556833265,"post_id":55957899,"comment_id":98572767,"body_markdown":"Do you understand what `Map` is and what parameters `put()` requires?  See https://www.geeksforgeeks.org/map-put-method-in-java-with-examples/","body":"Do you understand what <code>Map</code> is and what parameters <code>put()</code> requires?  See <a href=\"https://www.geeksforgeeks.org/map-put-method-in-java-with-examples/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/map-put-method-in-java-with-examples</a>"}],"answers":[{"tags":[],"owner":{"account_id":9537825,"reputation":1490,"user_id":7275056,"display_name":"vsfDawg"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695638512,"creation_date":1695638512,"answer_id":77171949,"question_id":55957899,"body_markdown":"Per the exception message\r\n\r\n&gt; The method put(String, Resource) in the type HashMap is not applicable\r\n&gt; for the arguments (Resource)\r\n\r\nYour `resources` is a HashMap.  The `put` method requires both a key and a value.  I don&#39;t know what you should be using as a key here - it may be enough to do the following.\r\n\r\n    resources.put(resources.getResourceName(), resource);","title":"HashMap: Error insert VariableDeclaratorId to complete FormalParameterList","body":"<p>Per the exception message</p>\n<blockquote>\n<p>The method put(String, Resource) in the type HashMap is not applicable\nfor the arguments (Resource)</p>\n</blockquote>\n<p>Your <code>resources</code> is a HashMap.  The <code>put</code> method requires both a key and a value.  I don't know what you should be using as a key here - it may be enough to do the following.</p>\n<pre><code>resources.put(resources.getResourceName(), resource);\n</code></pre>\n"}],"owner":{"account_id":8502740,"reputation":203,"user_id":6375240,"accept_rate":100,"display_name":"Isaac Palacio"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1116,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1695638512,"creation_date":1556820085,"question_id":55957899,"body_markdown":"\r\nJava gives me this error: `Syntax error, insert &quot;... VariableDeclaratorId&quot; to complete FormalParameterList` when I try to add a resource through the **addResource** method:\r\n\r\n    private HashMap&lt;String,Resource&gt; resources = new HashMap&lt;String, Resource&gt;();\t\t\r\n    private String id;\r\n    private Resource Resource;\r\n    \r\n    private void addResource(Resource) {\t\r\n      resources.put(Resource);\t\t\r\n    }\r\n\r\nThe error is thrown at me in Resource, as if I hadn&#39;t declared the type of parameter data.\r\n\r\n&gt; Error =&gt; Description\tResource\tPath\tLocation\tType The method\r\n&gt; put(String, Resource) in the type HashMap&lt;String,Resource&gt; is not\r\n&gt; applicable for the arguments\r\n&gt; (Resource)\tCatalogue.java\t/PRAC3_ex2/src/PRAC3_ex2\tline 32\tJava\r\n&gt; Problem\r\n\r\n\r\n\r\n","title":"HashMap: Error insert VariableDeclaratorId to complete FormalParameterList","body":"<p>Java gives me this error: <code>Syntax error, insert \"... VariableDeclaratorId\" to complete FormalParameterList</code> when I try to add a resource through the <strong>addResource</strong> method:</p>\n\n<pre><code>private HashMap&lt;String,Resource&gt; resources = new HashMap&lt;String, Resource&gt;();       \nprivate String id;\nprivate Resource Resource;\n\nprivate void addResource(Resource) {    \n  resources.put(Resource);      \n}\n</code></pre>\n\n<p>The error is thrown at me in Resource, as if I hadn't declared the type of parameter data.</p>\n\n<blockquote>\n  <p>Error => Description  Resource    Path    Location    Type The method\n  put(String, Resource) in the type HashMap is not\n  applicable for the arguments\n  (Resource)    Catalogue.java  /PRAC3_ex2/src/PRAC3_ex2    line 32 Java\n  Problem</p>\n</blockquote>\n"},{"tags":["java","hibernate","repository","micronaut"],"comments":[{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":1,"creation_date":1695631850,"post_id":77171001,"comment_id":136045213,"body_markdown":"Does it make sense to define the method on the repository as transactional? Shouldn&#39;t the service method be transactional and then call the repo&#39;s method?","body":"Does it make sense to define the method on the repository as transactional? Shouldn&#39;t the service method be transactional and then call the repo&#39;s method?"},{"owner":{"account_id":27664477,"reputation":21,"user_id":21116591,"display_name":"codingdictionary"},"score":0,"creation_date":1695636023,"post_id":77171001,"comment_id":136046072,"body_markdown":"Yeah, I&#39;ve tried adding the transactional annotation on the method that calls the repo&#39;s method too. Still seems to be getting the same exception.","body":"Yeah, I&#39;ve tried adding the transactional annotation on the method that calls the repo&#39;s method too. Still seems to be getting the same exception."}],"owner":{"account_id":27664477,"reputation":21,"user_id":21116591,"display_name":"codingdictionary"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695638488,"creation_date":1695630287,"question_id":77171001,"body_markdown":"I am trying to return a Stream&lt;Object&gt; instead of a Collection&lt;&gt; in a repository method written with the micronaut framework.\r\n\r\nDocumentation says this is supported and to do 2 things:\r\n- Make the method transactional\r\n- Execute this method within a try with resources statement\r\n\r\nI have done both but I am still getting an error saying that the connection to the database is closed for some reason.\r\n`org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl is closed`\r\n\r\n\r\n\r\nThis is my code:\r\n\r\nRepository (JPA)\r\n```\r\npublic interface ProductRepository&lt;T extends ProductDataAccessObject&gt; extends CrudRepository&lt;T, UUID&gt; {\r\n    @Nonnull\r\n    Stream&lt;T&gt; findByPriceBetween(double min, double max);\r\n}\r\n```\r\n\r\nClass:\r\n\r\n```\r\n@Transactional\r\n    protected void test(double min, double max) throws Exception {\r\n        try (var products = this.products.findByPriceBetween(min, max)) {\r\n            final var list = products.map(ProductDataAccessObject::entity).toList();\r\n        }\r\n    }\r\n```\r\n\r\n\r\nNote: I&#39;m just trying it into a list just to see if it&#39;s working, but I will add the actual code on a forEach() method.\r\n\r\nAny tips would be greatly appreciated! ","title":"How to return type of Stream of Objects with a Micronaut Repository","body":"<p>I am trying to return a Stream instead of a Collection&lt;&gt; in a repository method written with the micronaut framework.</p>\n<p>Documentation says this is supported and to do 2 things:</p>\n<ul>\n<li>Make the method transactional</li>\n<li>Execute this method within a try with resources statement</li>\n</ul>\n<p>I have done both but I am still getting an error saying that the connection to the database is closed for some reason.\n<code>org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl is closed</code></p>\n<p>This is my code:</p>\n<p>Repository (JPA)</p>\n<pre><code>public interface ProductRepository&lt;T extends ProductDataAccessObject&gt; extends CrudRepository&lt;T, UUID&gt; {\n    @Nonnull\n    Stream&lt;T&gt; findByPriceBetween(double min, double max);\n}\n</code></pre>\n<p>Class:</p>\n<pre><code>@Transactional\n    protected void test(double min, double max) throws Exception {\n        try (var products = this.products.findByPriceBetween(min, max)) {\n            final var list = products.map(ProductDataAccessObject::entity).toList();\n        }\n    }\n</code></pre>\n<p>Note: I'm just trying it into a list just to see if it's working, but I will add the actual code on a forEach() method.</p>\n<p>Any tips would be greatly appreciated!</p>\n"},{"tags":["java","spring-webflux","project-reactor"],"comments":[{"owner":{"account_id":264830,"reputation":70811,"user_id":551406,"accept_rate":95,"display_name":"Michael Berry"},"score":0,"creation_date":1619704428,"post_id":67317255,"comment_id":118990194,"body_markdown":"You should be able to use the `Deflator` class present in the JDK - since 11 that&#39;s been able to work with `ByteBuffer` directly.","body":"You should be able to use the <code>Deflator</code> class present in the JDK - since 11 that&#39;s been able to work with <code>ByteBuffer</code> directly."}],"answers":[{"tags":[],"owner":{"account_id":9874198,"reputation":489,"user_id":8632023,"display_name":"Daniel Zin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1620339733,"creation_date":1620338844,"answer_id":67426539,"question_id":67317255,"body_markdown":"You want to avoid buffering of full data, but you can archive each ByteBuffer chunk or, if your chunks are sufficiently small, to consolidate chunks in groups and then to archive.\r\n\r\nThis will not require too long memory, but will compress your data.\r\nThe actual level of compression depends on *content* of your source data and on *number of chunks* consolidated before archiving. I think, you cat adjust it manually to have the best ratio.\r\n\r\nThe example of probable code is below:\r\n   \r\n    public class Test_GzipFlux {\r\n\r\n\t/**\r\n\t * Returns Flux of gzip-ed buffers after (optional) buffer consolidation\r\n\t * @param inFlux input stream of buffers\r\n\t * @param consolidatedBufCount number of buffers to consolidate before gzip-ing\r\n\t */\r\n\tpublic static Flux&lt;ByteBuffer&gt; gzipFlux(Flux&lt;ByteBuffer&gt; inFlux, \r\n                                            int consolidatedBufCount, int outChunkMaxLength) {\r\n\t\treturn inFlux.buffer(consolidatedBufCount)\r\n                     .map(inList-&gt;zipBuffers(inList, outChunkMaxLength));\r\n\t}\r\n\r\n\t/**\r\n\t * Consolidates buffers from input list, applies gzip, returns result as single buffer\r\n\t * @param inList portion of chunks to be consolidated\r\n\t * @param outChunkMaxLength estimated length of output chunk. \r\n\t *        !!! to avoid pipe deadlock, this length to be sufficient\r\n     *        !!! for consolidated data after gzip \r\n\t */\r\n\tprivate static ByteBuffer zipBuffers(List&lt;ByteBuffer&gt; inList, int outChunkMaxLength) {\r\n\t\ttry {\r\n\t\t\tPipedInputStream pis = new PipedInputStream(outChunkMaxLength);\r\n\t\t\tGZIPOutputStream gos = new GZIPOutputStream(new PipedOutputStream(pis));\r\n\r\n\t\t\tfor (var buf: inList) {\r\n\t\t\t\tgos.write(buf.array());\r\n\t\t\t}\r\n\t\t\tgos.close();\r\n\t\t\tbyte[] outBytes = new byte[pis.available()];\r\n\t\t\tpis.read(outBytes);\r\n\t\t\tpis.close();\r\n\t\t\treturn ByteBuffer.wrap(outBytes);\r\n\t\t} catch (IOException e) {\r\n\t\t\tthrow new RuntimeException(e.getMessage(), e);\r\n\t\t}\t\t\r\n\t}\r\n\t\r\n    private static void test() {\r\n\t\tint inLength  = ... // actual full length of source data\r\n\t\tFlux&lt;ByteBuffer&gt; source = ... // your source Flux\r\n\t\t\r\n        // these are parameters for your adjustment\r\n\t\tint consolidationCount = 5;\r\n\t\tint outChunkMaxLength= 30 * 1024;\r\n\r\n\t\tFlux&lt;ByteBuffer&gt; result = gzipFlux(source,consolidationCount, outChunkMaxLength);\t\t\t\r\n\t\r\n\t\tint outLen = result.reduce(0, (res, bb) -&gt; res + bb.array().length).block();\r\n\t\tSystem.out.println(&quot;ratio=&quot; + (double)inLength/outLen);\r\n\t}\r\n    }\r\n","title":"Reactor - How to compress Flux&lt;ByteBuffer&gt; on the fly?","body":"<p>You want to avoid buffering of full data, but you can archive each ByteBuffer chunk or, if your chunks are sufficiently small, to consolidate chunks in groups and then to archive.</p>\n<p>This will not require too long memory, but will compress your data.\nThe actual level of compression depends on <em>content</em> of your source data and on <em>number of chunks</em> consolidated before archiving. I think, you cat adjust it manually to have the best ratio.</p>\n<p>The example of probable code is below:</p>\n<pre><code>public class Test_GzipFlux {\n\n/**\n * Returns Flux of gzip-ed buffers after (optional) buffer consolidation\n * @param inFlux input stream of buffers\n * @param consolidatedBufCount number of buffers to consolidate before gzip-ing\n */\npublic static Flux&lt;ByteBuffer&gt; gzipFlux(Flux&lt;ByteBuffer&gt; inFlux, \n                                        int consolidatedBufCount, int outChunkMaxLength) {\n    return inFlux.buffer(consolidatedBufCount)\n                 .map(inList-&gt;zipBuffers(inList, outChunkMaxLength));\n}\n\n/**\n * Consolidates buffers from input list, applies gzip, returns result as single buffer\n * @param inList portion of chunks to be consolidated\n * @param outChunkMaxLength estimated length of output chunk. \n *        !!! to avoid pipe deadlock, this length to be sufficient\n *        !!! for consolidated data after gzip \n */\nprivate static ByteBuffer zipBuffers(List&lt;ByteBuffer&gt; inList, int outChunkMaxLength) {\n    try {\n        PipedInputStream pis = new PipedInputStream(outChunkMaxLength);\n        GZIPOutputStream gos = new GZIPOutputStream(new PipedOutputStream(pis));\n\n        for (var buf: inList) {\n            gos.write(buf.array());\n        }\n        gos.close();\n        byte[] outBytes = new byte[pis.available()];\n        pis.read(outBytes);\n        pis.close();\n        return ByteBuffer.wrap(outBytes);\n    } catch (IOException e) {\n        throw new RuntimeException(e.getMessage(), e);\n    }       \n}\n\nprivate static void test() {\n    int inLength  = ... // actual full length of source data\n    Flux&lt;ByteBuffer&gt; source = ... // your source Flux\n    \n    // these are parameters for your adjustment\n    int consolidationCount = 5;\n    int outChunkMaxLength= 30 * 1024;\n\n    Flux&lt;ByteBuffer&gt; result = gzipFlux(source,consolidationCount, outChunkMaxLength);           \n\n    int outLen = result.reduce(0, (res, bb) -&gt; res + bb.array().length).block();\n    System.out.println(&quot;ratio=&quot; + (double)inLength/outLen);\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5650328,"reputation":1113,"user_id":4471199,"display_name":"RoBeaToZ"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695638251,"creation_date":1695638251,"answer_id":77171924,"question_id":67317255,"body_markdown":"I had a similar task to do with `org.springframework.core.io.buffer.DataBuffer` instead of `ByteBuffer`. Here is my solution you can adapt from:\r\n\r\n```java\r\nprivate Flux&lt;DataBuffer&gt; compressDataBufferFlux(Flux&lt;DataBuffer&gt; dataBufferFlux) {\r\n    return Flux.create(\r\n            sink -&gt; {\r\n                try (ZipOutputStream zipOutputStream = createZipOutputStream(sink)) {\r\n                    compressDataBufferStream(dataBufferFlux, zipOutputStream, sink);\r\n                } catch (Exception e) {\r\n                    sink.error(e);\r\n                }\r\n            }\r\n    );\r\n}\r\n\r\n@SneakyThrows\r\nprivate void compressDataBufferStream(\r\n        Flux&lt;DataBuffer&gt; dataBufferFlux,\r\n        ZipOutputStream zipOutputStream,\r\n        FluxSink&lt;DataBuffer&gt; sink) {\r\n    zipOutputStream.putNextEntry(new ZipEntry(&quot;file.txt&quot;));\r\n    dataBufferFlux.subscribe(\r\n            dataBuffer -&gt; writeDataBuffer(dataBuffer, zipOutputStream, sink),\r\n            err -&gt; closeAndError(err, sink, zipOutputStream),\r\n            () -&gt; closeAndComplete(zipOutputStream, sink)\r\n    );\r\n}\r\n\r\nprivate ZipOutputStream createZipOutputStream(FluxSink&lt;DataBuffer&gt; sink) {\r\n    OutputStream outputStream =\r\n            new OutputStream() {\r\n                public void write(int b) {\r\n                    DataBuffer buffer = dataBufferFactory.allocateBuffer(1);\r\n                    buffer.write((byte) b);\r\n                    sink.next(buffer);\r\n                }\r\n            };\r\n    return new ZipOutputStream(outputStream);\r\n}\r\n\r\nprivate void writeDataBuffer(DataBuffer dataBuffer, ZipOutputStream zipOutputStream, FluxSink&lt;DataBuffer&gt; sink) {\r\n    try {\r\n        byte[] bytes = new byte[dataBuffer.readableByteCount()];\r\n        dataBuffer.read(bytes);\r\n        zipOutputStream.write(bytes);\r\n    } catch (IOException e) {\r\n        sink.error(e);\r\n    }\r\n}\r\n\r\nprivate void closeAndError(Throwable err, FluxSink&lt;DataBuffer&gt; sink, ZipOutputStream zipOutputStream) {\r\n    try {\r\n        zipOutputStream.close();\r\n    } catch (IOException e) {\r\n        sink.error(e);\r\n    }\r\n    sink.error(err);\r\n}\r\n\r\nprivate void closeAndComplete(ZipOutputStream zipOutputStream, FluxSink&lt;DataBuffer&gt; sink) {\r\n    try {\r\n        zipOutputStream.closeEntry();\r\n        zipOutputStream.close();\r\n    } catch (IOException e) {\r\n        sink.error(e);\r\n    }\r\n    sink.complete();\r\n}\r\n```\r\n\r\nFeedback is welcome!","title":"Reactor - How to compress Flux&lt;ByteBuffer&gt; on the fly?","body":"<p>I had a similar task to do with <code>org.springframework.core.io.buffer.DataBuffer</code> instead of <code>ByteBuffer</code>. Here is my solution you can adapt from:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private Flux&lt;DataBuffer&gt; compressDataBufferFlux(Flux&lt;DataBuffer&gt; dataBufferFlux) {\n    return Flux.create(\n            sink -&gt; {\n                try (ZipOutputStream zipOutputStream = createZipOutputStream(sink)) {\n                    compressDataBufferStream(dataBufferFlux, zipOutputStream, sink);\n                } catch (Exception e) {\n                    sink.error(e);\n                }\n            }\n    );\n}\n\n@SneakyThrows\nprivate void compressDataBufferStream(\n        Flux&lt;DataBuffer&gt; dataBufferFlux,\n        ZipOutputStream zipOutputStream,\n        FluxSink&lt;DataBuffer&gt; sink) {\n    zipOutputStream.putNextEntry(new ZipEntry(&quot;file.txt&quot;));\n    dataBufferFlux.subscribe(\n            dataBuffer -&gt; writeDataBuffer(dataBuffer, zipOutputStream, sink),\n            err -&gt; closeAndError(err, sink, zipOutputStream),\n            () -&gt; closeAndComplete(zipOutputStream, sink)\n    );\n}\n\nprivate ZipOutputStream createZipOutputStream(FluxSink&lt;DataBuffer&gt; sink) {\n    OutputStream outputStream =\n            new OutputStream() {\n                public void write(int b) {\n                    DataBuffer buffer = dataBufferFactory.allocateBuffer(1);\n                    buffer.write((byte) b);\n                    sink.next(buffer);\n                }\n            };\n    return new ZipOutputStream(outputStream);\n}\n\nprivate void writeDataBuffer(DataBuffer dataBuffer, ZipOutputStream zipOutputStream, FluxSink&lt;DataBuffer&gt; sink) {\n    try {\n        byte[] bytes = new byte[dataBuffer.readableByteCount()];\n        dataBuffer.read(bytes);\n        zipOutputStream.write(bytes);\n    } catch (IOException e) {\n        sink.error(e);\n    }\n}\n\nprivate void closeAndError(Throwable err, FluxSink&lt;DataBuffer&gt; sink, ZipOutputStream zipOutputStream) {\n    try {\n        zipOutputStream.close();\n    } catch (IOException e) {\n        sink.error(e);\n    }\n    sink.error(err);\n}\n\nprivate void closeAndComplete(ZipOutputStream zipOutputStream, FluxSink&lt;DataBuffer&gt; sink) {\n    try {\n        zipOutputStream.closeEntry();\n        zipOutputStream.close();\n    } catch (IOException e) {\n        sink.error(e);\n    }\n    sink.complete();\n}\n</code></pre>\n<p>Feedback is welcome!</p>\n"}],"owner":{"account_id":14401555,"reputation":319,"user_id":10789057,"display_name":"Termin4t0r "},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":846,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1695638251,"creation_date":1619698887,"question_id":67317255,"body_markdown":"I have a requirement to read and write compressed (gzip/brotli) streams without intermediate storage. The data is received from the underlying in `Flux&lt;ByteBuffer&gt;` format. The data is large enough that buffering is out of option. How do I compress `Flux&lt;ByteBuffer&gt;` on the fly without having to store the full data either in memory or writing out to disk? ","title":"Reactor - How to compress Flux&lt;ByteBuffer&gt; on the fly?","body":"<p>I have a requirement to read and write compressed (gzip/brotli) streams without intermediate storage. The data is received from the underlying in <code>Flux&lt;ByteBuffer&gt;</code> format. The data is large enough that buffering is out of option. How do I compress <code>Flux&lt;ByteBuffer&gt;</code> on the fly without having to store the full data either in memory or writing out to disk?</p>\n"},{"tags":["java","selenium-webdriver","selenium-chromedriver"],"owner":{"account_id":17111308,"reputation":53,"user_id":12382025,"display_name":"jakesh gowda"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695638156,"creation_date":1695638156,"question_id":77171916,"body_markdown":"I&#39;m unable to close save address popup in chrome and it is affecting my test case.\r\nI&#39;m using chrome versio 114.0.5735.110 and chrome driver version 114.0.5735.90.\r\nI tried using chrome option, My code is as below\r\n\r\n    ChromeOptions options = new ChromeOptions();\r\n    options.addArguments(&quot;--disable-popup-blocking&quot;); \r\n    options.addArguments(&quot;--disable-notifications&quot;);\r\n    options.addArguments(&quot;--disable-infobars&quot;);\r\n    options.addArguments(&quot;--disable-extensions&quot;); \r\n    options.addArguments(&quot;--disable-save-password-bubble&quot;);\r\n\r\nCan anyone suggest me some way to disable the popup.","title":"Enable to close the save address popup in Selenium","body":"<p>I'm unable to close save address popup in chrome and it is affecting my test case.\nI'm using chrome versio 114.0.5735.110 and chrome driver version 114.0.5735.90.\nI tried using chrome option, My code is as below</p>\n<pre><code>ChromeOptions options = new ChromeOptions();\noptions.addArguments(&quot;--disable-popup-blocking&quot;); \noptions.addArguments(&quot;--disable-notifications&quot;);\noptions.addArguments(&quot;--disable-infobars&quot;);\noptions.addArguments(&quot;--disable-extensions&quot;); \noptions.addArguments(&quot;--disable-save-password-bubble&quot;);\n</code></pre>\n<p>Can anyone suggest me some way to disable the popup.</p>\n"},{"tags":["java","unit-testing","gradle","code-coverage","jacoco"],"comments":[{"owner":{"account_id":2163431,"reputation":2667,"user_id":1917078,"accept_rate":50,"display_name":"Steve Peak"},"score":1,"creation_date":1430767906,"post_id":29887805,"comment_id":48192734,"body_markdown":"A third party option (FD I&#39;m founder of): If you upload reports to [Codecov](https://codecov.io) you can **ignore any files** you like after the fact in the features section of the product. Thanks.","body":"A third party option (FD I&#39;m founder of): If you upload reports to <a href=\"https://codecov.io\" rel=\"nofollow noreferrer\">Codecov</a> you can <b>ignore any files</b> you like after the fact in the features section of the product. Thanks."},{"owner":{"account_id":918082,"reputation":54574,"user_id":950427,"accept_rate":91,"display_name":"Jared Burrows"},"score":0,"creation_date":1430931735,"post_id":29887805,"comment_id":48279302,"body_markdown":"@StevePeak So you can filter by `packages` online using `Codecov`? Also, I saw the `Github`, what about `Android` support, I saw `Java`. I should still have to send you all of the reports then filter after vs filtering before.","body":"@StevePeak So you can filter by <code>packages</code> online using <code>Codecov</code>? Also, I saw the <code>Github</code>, what about <code>Android</code> support, I saw <code>Java</code>. I should still have to send you all of the reports then filter after vs filtering before."},{"owner":{"account_id":2163431,"reputation":2667,"user_id":1917078,"accept_rate":50,"display_name":"Steve Peak"},"score":0,"creation_date":1430934437,"post_id":29887805,"comment_id":48281065,"body_markdown":"You can filter based on a regexp method of any filed you do not want to include. All java is supported via Jacoco reports. Just filtering after the fact on Codecov works. It will remember your filters and apply it to all future reports. Thanks!","body":"You can filter based on a regexp method of any filed you do not want to include. All java is supported via Jacoco reports. Just filtering after the fact on Codecov works. It will remember your filters and apply it to all future reports. Thanks!"},{"owner":{"account_id":96837,"reputation":94466,"user_id":263004,"accept_rate":96,"display_name":"Vivin Paliath"},"score":7,"creation_date":1446233784,"post_id":29887805,"comment_id":54675524,"body_markdown":"I&#39;m curious; what does the `excludes` from the official documentation actually *do* then? Is it pretty much useless?","body":"I&#39;m curious; what does the <code>excludes</code> from the official documentation actually <i>do</i> then? Is it pretty much useless?"},{"owner":{"account_id":288740,"reputation":36435,"user_id":589329,"accept_rate":40,"display_name":"Vampire"},"score":0,"creation_date":1569399243,"post_id":29887805,"comment_id":102580299,"body_markdown":"That `excludes` is not on the coverage task, but on the test task. It excludes files from being instrumented by JaCoCo and thus coverage being recorded. You can use this if you don&#39;t want to record coverage for some classes, if you cannot because of some conflict with another instrumenting agent, or because you pre-instrumented classes. This will not exclude a class from the report, especially in the last case mentioned, this would be a horrible idea.","body":"That <code>excludes</code> is not on the coverage task, but on the test task. It excludes files from being instrumented by JaCoCo and thus coverage being recorded. You can use this if you don&#39;t want to record coverage for some classes, if you cannot because of some conflict with another instrumenting agent, or because you pre-instrumented classes. This will not exclude a class from the report, especially in the last case mentioned, this would be a horrible idea."}],"answers":[{"comments":[{"owner":{"account_id":918082,"reputation":54574,"user_id":950427,"accept_rate":91,"display_name":"Jared Burrows"},"score":2,"creation_date":1432698337,"post_id":29887806,"comment_id":49025671,"body_markdown":"@BradPitcher No problem! It took me a while to find the right answer. It just seems so &quot;hackish&quot;. I hope they come up with a nicer way.","body":"@BradPitcher No problem! It took me a while to find the right answer. It just seems so &quot;hackish&quot;. I hope they come up with a nicer way."},{"owner":{"account_id":5153635,"reputation":619,"user_id":4127481,"accept_rate":52,"display_name":"Pedro Henrique"},"score":0,"creation_date":1445364936,"post_id":29887806,"comment_id":54290096,"body_markdown":"So, what is the correct approach if I just want to exclude one class from package?","body":"So, what is the correct approach if I just want to exclude one class from package?"},{"owner":{"account_id":918082,"reputation":54574,"user_id":950427,"accept_rate":91,"display_name":"Jared Burrows"},"score":2,"creation_date":1445366199,"post_id":29887806,"comment_id":54290843,"body_markdown":"Something like: `exclude: [&#39;**/*Test*.*&#39;])`","body":"Something like: <code>exclude: [&#39;**&#47;*Test*.*&#39;])</code>"},{"owner":{"account_id":1752462,"reputation":431,"user_id":1601251,"accept_rate":62,"display_name":"Asker"},"score":0,"creation_date":1453687459,"post_id":29887806,"comment_id":57697085,"body_markdown":"I get the error  Gradle DSL method not found: &#39;jacocoTestReport()&#39;. What could be wrong?","body":"I get the error  Gradle DSL method not found: &#39;jacocoTestReport()&#39;. What could be wrong?"},{"owner":{"account_id":918082,"reputation":54574,"user_id":950427,"accept_rate":91,"display_name":"Jared Burrows"},"score":0,"creation_date":1453688249,"post_id":29887806,"comment_id":57697226,"body_markdown":"@Asker, It looks like you are not applying the plugin: `apply plugin: jacoco`.","body":"@Asker, It looks like you are not applying the plugin: <code>apply plugin: jacoco</code>."},{"owner":{"account_id":1752462,"reputation":431,"user_id":1601251,"accept_rate":62,"display_name":"Asker"},"score":0,"creation_date":1453688347,"post_id":29887806,"comment_id":57697255,"body_markdown":"I added apply plugin: &#39;jacoco&#39; right after apply plugin: &#39;com.android.application&#39;. I think it should be ok?","body":"I added apply plugin: &#39;jacoco&#39; right after apply plugin: &#39;com.android.application&#39;. I think it should be ok?"},{"owner":{"account_id":1752462,"reputation":431,"user_id":1601251,"accept_rate":62,"display_name":"Asker"},"score":0,"creation_date":1453688979,"post_id":29887806,"comment_id":57697390,"body_markdown":"now I restarted Android studio and get the following Errow &quot;Cannot get property &#39;files&#39; on null object&quot;. Any ideas?","body":"now I restarted Android studio and get the following Errow &quot;Cannot get property &#39;files&#39; on null object&quot;. Any ideas?"},{"owner":{"account_id":918082,"reputation":54574,"user_id":950427,"accept_rate":91,"display_name":"Jared Burrows"},"score":2,"creation_date":1453694012,"post_id":29887806,"comment_id":57698518,"body_markdown":"`jacocoTestReport` only works with both `jacoco` and `java` plugins. This is not for Android. Please see my repo here for android: https://github.com/jaredsburrows/android-gradle-java-template/blob/master/common.gradle#L160","body":"<code>jacocoTestReport</code> only works with both <code>jacoco</code> and <code>java</code> plugins. This is not for Android. Please see my repo here for android: <a href=\"https://github.com/jaredsburrows/android-gradle-java-template/blob/master/common.gradle#L160\" rel=\"nofollow noreferrer\">github.com/jaredsburrows/android-gradle-java-template/blob/&hellip;</a>"},{"owner":{"account_id":1752462,"reputation":431,"user_id":1601251,"accept_rate":62,"display_name":"Asker"},"score":0,"creation_date":1453744113,"post_id":29887806,"comment_id":57725815,"body_markdown":"@JaredBurrows Hi, thank you for your answer. How do i run my InstrumentationTests with this setup? They are saved in this folder &quot;app\\src\\androidTest&quot;.","body":"@JaredBurrows Hi, thank you for your answer. How do i run my InstrumentationTests with this setup? They are saved in this folder &quot;app\\src\\androidTest&quot;."},{"owner":{"account_id":1161345,"reputation":1837,"user_id":1140783,"accept_rate":67,"display_name":"Syed Ali"},"score":0,"creation_date":1477490090,"post_id":29887806,"comment_id":67788839,"body_markdown":"@JaredBurrows this link for android solution is broken. Can you please share it again or add it to your answer? Thanks","body":"@JaredBurrows this link for android solution is broken. Can you please share it again or add it to your answer? Thanks"},{"owner":{"account_id":918082,"reputation":54574,"user_id":950427,"accept_rate":91,"display_name":"Jared Burrows"},"score":0,"creation_date":1477497748,"post_id":29887806,"comment_id":67794375,"body_markdown":"@sttaq Thanks. I added it in the answer and check it out here: https://github.com/jaredsburrows/android-gradle-java-app-template/blob/master/gradle/codeQuality.gradle#L49.","body":"@sttaq Thanks. I added it in the answer and check it out here: <a href=\"https://github.com/jaredsburrows/android-gradle-java-app-template/blob/master/gradle/codeQuality.gradle#L49\" rel=\"nofollow noreferrer\">github.com/jaredsburrows/android-gradle-java-app-template/bl&zwnj;&#8203;ob/&hellip;</a>."},{"owner":{"account_id":107315,"reputation":10683,"user_id":285417,"accept_rate":88,"display_name":"Wonko the Sane"},"score":0,"creation_date":1495811995,"post_id":29887806,"comment_id":75422618,"body_markdown":"Side note - I&#39;ve found that excluding `**/*Constants*.*` (using wildcard for extension) will exclude a file called `Constants.java` but `**/*Constants*.java` (explicitly providing the extension) will not.","body":"Side note - I&#39;ve found that excluding <code>**&#47;*Constants*.*</code> (using wildcard for extension) will exclude a file called <code>Constants.java</code> but <code>**&#47;*Constants*.java</code> (explicitly providing the extension) will not."},{"owner":{"account_id":2126282,"reputation":667,"user_id":1888360,"accept_rate":67,"display_name":"Aditya Peshave"},"score":0,"creation_date":1509470702,"post_id":29887806,"comment_id":81029131,"body_markdown":"In my case it is not ACTUALLY excluding them from calculation but it is just not showing them on the report. does it have to do under `beforeEvaluate` ?","body":"In my case it is not ACTUALLY excluding them from calculation but it is just not showing them on the report. does it have to do under <code>beforeEvaluate</code> ?"},{"owner":{"account_id":253214,"reputation":19917,"user_id":531762,"accept_rate":82,"display_name":"Thunderforge"},"score":21,"creation_date":1565989030,"post_id":29887806,"comment_id":101528131,"body_markdown":"The `classDirectories =` results in this warning. `The JacocoReportBase.setClassDirectories(FileCollection) method has been deprecated. This is scheduled to be removed in Gradle 6.0. Use getClassDirectories().from(...)`. It would be great to show a solution compatible with Gradle 6.0.","body":"The <code>classDirectories =</code> results in this warning. <code>The JacocoReportBase.setClassDirectories(FileCollection) method has been deprecated. This is scheduled to be removed in Gradle 6.0. Use getClassDirectories().from(...)</code>. It would be great to show a solution compatible with Gradle 6.0."},{"owner":{"account_id":1215394,"reputation":6741,"user_id":1183098,"display_name":"user9869932"},"score":6,"creation_date":1604694683,"post_id":29887806,"comment_id":114435171,"body_markdown":"getting `Cannot set the value of read-only property &#39;classDirectories&#39; for task &#39;:jacocoTestReport&#39; of type org.gradle.testing.jacoco.tasks.JacocoReport` using this configuration. Using gradle 5.6 and Java 8","body":"getting <code>Cannot set the value of read-only property &#39;classDirectories&#39; for task &#39;:jacocoTestReport&#39; of type org.gradle.testing.jacoco.tasks.JacocoReport</code> using this configuration. Using gradle 5.6 and Java 8"},{"owner":{"account_id":2123818,"reputation":969,"user_id":1886510,"display_name":"darw"},"score":0,"creation_date":1674053113,"post_id":29887806,"comment_id":132632967,"body_markdown":"More straightforward: replace `files.collect { fileTree(dir: it, exclude` with `.getAsFileTree().matching { exclude `","body":"More straightforward: replace <code>files.collect { fileTree(dir: it, exclude</code> with <code>.getAsFileTree().matching { exclude </code>"}],"tags":[],"owner":{"account_id":918082,"reputation":54574,"user_id":950427,"accept_rate":91,"display_name":"Jared Burrows"},"comment_count":16,"down_vote_count":2,"up_vote_count":168,"is_accepted":true,"score":166,"last_activity_date":1610071983,"creation_date":1430112313,"answer_id":29887806,"question_id":29887805,"body_markdown":"# Thanks to, `Yannick Welsch`:\r\n\r\nAfter searching Google, reading the Gradle docs and going through older StackOverflow posts, I found this answer on the Official [tag:Gradle] forums!\r\n\r\n    jacocoTestReport {\r\n        afterEvaluate {\r\n            classDirectories.setFrom(files(classDirectories.files.collect {\r\n                fileTree(dir: it, exclude: &#39;com/blah/**&#39;)\r\n            }))\r\n        }\r\n    }\r\n\r\n**Source:** https://issues.gradle.org/browse/GRADLE-2955\r\n\r\nFor older gradle versions &lt; 5.x may need to use \r\n`classDirectories = files(classDirectories.files.collect {` instead of `classDirectories.setFrom`\r\n\r\n# Solution to my `build.gradle` for Java/Groovy projects:\r\n\r\n    apply plugin: &#39;java&#39;\r\n    apply plugin: &#39;jacoco&#39;\r\n    \r\n    jacocoTestReport {\r\n        reports {\r\n            xml {\r\n                enabled true // coveralls plugin depends on xml format report\r\n            }\r\n    \r\n            html {\r\n                enabled true\r\n            }\r\n        }\r\n    \r\n        afterEvaluate {\r\n            classDirectories = files(classDirectories.files.collect {\r\n                fileTree(dir: it,\r\n                        exclude: [&#39;codeeval/**&#39;,\r\n                                  &#39;crackingthecode/part3knowledgebased/**&#39;,\r\n                                  &#39;**/Chapter7ObjectOrientedDesign**&#39;,\r\n                                  &#39;**/Chapter11Testing**&#39;,\r\n                                  &#39;**/Chapter12SystemDesignAndMemoryLimits**&#39;,\r\n                                  &#39;projecteuler/**&#39;])\r\n            })\r\n        }\r\n    }\r\n\r\nAs you can see, I was successfully able to add more to `exclude:` in order to filter a few packages.\r\n\r\n**Source:** https://github.com/jaredsburrows/CS-Interview-Questions/blob/master/build.gradle\r\n\r\n# Custom tasks for other projects such as Android:\r\n\r\n    apply plugin: &#39;jacoco&#39;\r\n    \r\n    task jacocoReport(type: JacocoReport) {\r\n        reports {\r\n            xml {\r\n                enabled true // coveralls plugin depends on xml format report\r\n            }\r\n    \r\n            html {\r\n                enabled true\r\n            }\r\n        }\r\n    \r\n        afterEvaluate {\r\n            classDirectories = files(classDirectories.files.collect {\r\n                fileTree(dir: it,\r\n                        exclude: [&#39;codeeval/**&#39;,\r\n                                  &#39;crackingthecode/part3knowledgebased/**&#39;,\r\n                                  &#39;**/Chapter7ObjectOrientedDesign**&#39;,\r\n                                  &#39;**/Chapter11Testing**&#39;,\r\n                                  &#39;**/Chapter12SystemDesignAndMemoryLimits**&#39;,\r\n                                  &#39;projecteuler/**&#39;])\r\n            })\r\n        }\r\n    }\r\n\r\n**Source:** https://github.com/jaredsburrows/android-gradle-java-app-template/blob/master/gradle/quality.gradle#L59","title":"Filter JaCoCo coverage reports with Gradle","body":"<h1>Thanks to, <code>Yannick Welsch</code>:</h1>\n<p>After searching Google, reading the Gradle docs and going through older StackOverflow posts, I found this answer on the Official <a href=\"/questions/tagged/gradle\" class=\"post-tag\" title=\"show questions tagged &#39;gradle&#39;\" rel=\"tag\">gradle</a> forums!</p>\n<pre><code>jacocoTestReport {\n    afterEvaluate {\n        classDirectories.setFrom(files(classDirectories.files.collect {\n            fileTree(dir: it, exclude: 'com/blah/**')\n        }))\n    }\n}\n</code></pre>\n<p><strong>Source:</strong> <a href=\"https://issues.gradle.org/browse/GRADLE-2955\" rel=\"noreferrer\">https://issues.gradle.org/browse/GRADLE-2955</a></p>\n<p>For older gradle versions &lt; 5.x may need to use\n<code>classDirectories = files(classDirectories.files.collect {</code> instead of <code>classDirectories.setFrom</code></p>\n<h1>Solution to my <code>build.gradle</code> for Java/Groovy projects:</h1>\n<pre><code>apply plugin: 'java'\napply plugin: 'jacoco'\n\njacocoTestReport {\n    reports {\n        xml {\n            enabled true // coveralls plugin depends on xml format report\n        }\n\n        html {\n            enabled true\n        }\n    }\n\n    afterEvaluate {\n        classDirectories = files(classDirectories.files.collect {\n            fileTree(dir: it,\n                    exclude: ['codeeval/**',\n                              'crackingthecode/part3knowledgebased/**',\n                              '**/Chapter7ObjectOrientedDesign**',\n                              '**/Chapter11Testing**',\n                              '**/Chapter12SystemDesignAndMemoryLimits**',\n                              'projecteuler/**'])\n        })\n    }\n}\n</code></pre>\n<p>As you can see, I was successfully able to add more to <code>exclude:</code> in order to filter a few packages.</p>\n<p><strong>Source:</strong> <a href=\"https://github.com/jaredsburrows/CS-Interview-Questions/blob/master/build.gradle\" rel=\"noreferrer\">https://github.com/jaredsburrows/CS-Interview-Questions/blob/master/build.gradle</a></p>\n<h1>Custom tasks for other projects such as Android:</h1>\n<pre><code>apply plugin: 'jacoco'\n\ntask jacocoReport(type: JacocoReport) {\n    reports {\n        xml {\n            enabled true // coveralls plugin depends on xml format report\n        }\n\n        html {\n            enabled true\n        }\n    }\n\n    afterEvaluate {\n        classDirectories = files(classDirectories.files.collect {\n            fileTree(dir: it,\n                    exclude: ['codeeval/**',\n                              'crackingthecode/part3knowledgebased/**',\n                              '**/Chapter7ObjectOrientedDesign**',\n                              '**/Chapter11Testing**',\n                              '**/Chapter12SystemDesignAndMemoryLimits**',\n                              'projecteuler/**'])\n        })\n    }\n}\n</code></pre>\n<p><strong>Source:</strong> <a href=\"https://github.com/jaredsburrows/android-gradle-java-app-template/blob/master/gradle/quality.gradle#L59\" rel=\"noreferrer\">https://github.com/jaredsburrows/android-gradle-java-app-template/blob/master/gradle/quality.gradle#L59</a></p>\n"},{"comments":[{"owner":{"account_id":918082,"reputation":54574,"user_id":950427,"accept_rate":91,"display_name":"Jared Burrows"},"score":0,"creation_date":1431009802,"post_id":30104366,"comment_id":48319931,"body_markdown":"Alright, thank you for confirming that my findings are correct! I hope they make it easier to filter in the future or simply document how to filter using Gradle.","body":"Alright, thank you for confirming that my findings are correct! I hope they make it easier to filter in the future or simply document how to filter using Gradle."},{"owner":{"account_id":353069,"reputation":7200,"user_id":690553,"accept_rate":76,"display_name":"Amir Pashazadeh"},"score":0,"creation_date":1520409226,"post_id":30104366,"comment_id":85298003,"body_markdown":"Is there any way to exclude a source set from inclusion in jacoco report? I want to exclude all source files which are located in `generated/java/` instead of `main/java`.","body":"Is there any way to exclude a source set from inclusion in jacoco report? I want to exclude all source files which are located in <code>generated&#47;java&#47;</code> instead of <code>main&#47;java</code>."},{"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"score":0,"creation_date":1601108841,"post_id":30104366,"comment_id":113307066,"body_markdown":"This won&#39;t work for a clean build. afterEvaluate runs in Gradle&#39;s configuration phase which is before any tasks have executed and before any classes have been compiled. So the classes dirs will be empty","body":"This won&#39;t work for a clean build. afterEvaluate runs in Gradle&#39;s configuration phase which is before any tasks have executed and before any classes have been compiled. So the classes dirs will be empty"}],"tags":[],"owner":{"account_id":2779394,"reputation":671,"user_id":2392229,"display_name":"Andre Compagno"},"comment_count":3,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1431009698,"creation_date":1431009698,"answer_id":30104366,"question_id":29887805,"body_markdown":"[Here][1] is a solution for this problem in ANT. This can be adapted to gradle by adding the following under the `jacocoTestReport` task. Although this isn&#39;t really documented by jacoco, it seems like the only way to filter the test results for now.\r\n\r\n    afterEvaluate {\r\n        classDirectories = files(classDirectories.files.collect {\r\n            fileTree(dir: it, exclude: &#39;excluded/files/**&#39;)\r\n        })\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/14404790/jacoco-not-excluding-classes-when-using-ant","title":"Filter JaCoCo coverage reports with Gradle","body":"<p><a href=\"https://stackoverflow.com/questions/14404790/jacoco-not-excluding-classes-when-using-ant\">Here</a> is a solution for this problem in ANT. This can be adapted to gradle by adding the following under the <code>jacocoTestReport</code> task. Although this isn't really documented by jacoco, it seems like the only way to filter the test results for now.</p>\n\n<pre><code>afterEvaluate {\n    classDirectories = files(classDirectories.files.collect {\n        fileTree(dir: it, exclude: 'excluded/files/**')\n    })\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4514046,"reputation":749,"user_id":3669400,"display_name":"Randy"},"score":0,"creation_date":1539115963,"post_id":35735072,"comment_id":92382453,"body_markdown":"Just saw this again.  This was taken directly from a working config.  Perhaps your version of Gradle and Jacoco were different than mine.  Sorry.","body":"Just saw this again.  This was taken directly from a working config.  Perhaps your version of Gradle and Jacoco were different than mine.  Sorry."}],"tags":[],"owner":{"account_id":4514046,"reputation":749,"user_id":3669400,"display_name":"Randy"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1456877805,"creation_date":1456872120,"answer_id":35735072,"question_id":29887805,"body_markdown":"This has been out for a while, but I just ran across this.  I was struggling with all the exclusions needed.  I found it was something much more simple for me.  If you follow the Maven project layout style /src/main/java and /src/test/java, you simply need to put **buildDir/classes/*main***  in your **classDirectories** config like so:\r\n\r\n    afterEvaluate {\r\n        jacocoTestReport {\r\n            def coverageSourceDirs = [&#39;src/main/java&#39;]\r\n            reports {\r\n                xml.enabled false\r\n                csv.enabled false\r\n                html.destination &quot;${buildDir}/reports/jacocoHtml&quot;\r\n            }\r\n            sourceDirectories = files(coverageSourceDirs)\r\n            classDirectories = fileTree(\r\n                    dir: &quot;${project.buildDir}/classes/main&quot;,\r\n                    excludes: [\r\n                          //whatever here like JavaConfig etc. in /src/main/java\r\n                         ]\r\n            )\r\n        }\r\n    }","title":"Filter JaCoCo coverage reports with Gradle","body":"<p>This has been out for a while, but I just ran across this.  I was struggling with all the exclusions needed.  I found it was something much more simple for me.  If you follow the Maven project layout style /src/main/java and /src/test/java, you simply need to put <strong>buildDir/classes/<em>main</em></strong>  in your <strong>classDirectories</strong> config like so:</p>\n\n<pre><code>afterEvaluate {\n    jacocoTestReport {\n        def coverageSourceDirs = ['src/main/java']\n        reports {\n            xml.enabled false\n            csv.enabled false\n            html.destination \"${buildDir}/reports/jacocoHtml\"\n        }\n        sourceDirectories = files(coverageSourceDirs)\n        classDirectories = fileTree(\n                dir: \"${project.buildDir}/classes/main\",\n                excludes: [\n                      //whatever here like JavaConfig etc. in /src/main/java\n                     ]\n        )\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6688303,"reputation":2926,"user_id":5158636,"display_name":"tschumann"},"score":3,"creation_date":1572322128,"post_id":37942137,"comment_id":103514680,"body_markdown":"This seems to give the classes 0% coverage rather than omit them altogether. I&#39;m using JaCoCi 0.8.5 and Gradle 6.0","body":"This seems to give the classes 0% coverage rather than omit them altogether. I&#39;m using JaCoCi 0.8.5 and Gradle 6.0"},{"owner":{"account_id":20228,"reputation":40720,"user_id":48136,"display_name":"bric3"},"score":1,"creation_date":1591967579,"post_id":37942137,"comment_id":110262717,"body_markdown":"This the right way to tell jacoco to not meddle with some classes, other approaches only affect the reporting part.","body":"This the right way to tell jacoco to not meddle with some classes, other approaches only affect the reporting part."}],"tags":[],"owner":{"account_id":252146,"reputation":4740,"user_id":529977,"accept_rate":62,"display_name":"childno͡.de"},"comment_count":2,"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1466505451,"creation_date":1466505451,"answer_id":37942137,"question_id":29887805,"body_markdown":"for me, it&#39;s fine working with\r\n\r\n    test {\r\n      jacoco {\r\n        excludes += [&#39;codeeval/**&#39;,\r\n                     &#39;crackingthecode/part3knowledgebased/**&#39;,\r\n                     &#39;**/Chapter7ObjectOrientedDesign**&#39;,\r\n                     &#39;**/Chapter11Testing**&#39;,\r\n                     &#39;**/Chapter12SystemDesignAndMemoryLimits**&#39;,\r\n                     &#39;projecteuler/**&#39;]\r\n      }\r\n    }\r\n\r\nas stated out in documentation\r\nhttps://docs.gradle.org/current/userguide/jacoco_plugin.html#N16E62 and initally asked\r\nso the answer is:\r\n\r\nso if you ask me: it&#39;s not a question of\r\n\r\n    excludes = [&quot;projecteuler/**&quot;]\r\n\r\nor\r\n\r\n    excludes += [&quot;projecteuler/**&quot;]\r\n\r\nbut\r\n\r\n    excludes = [&quot;**/projecteuler/**&quot;]\r\n\r\nto exclude a package `*.projecteuler.*`\r\n\r\nand `test {}` on project level, not nested in `jacocoTestReport`","title":"Filter JaCoCo coverage reports with Gradle","body":"<p>for me, it's fine working with</p>\n\n<pre><code>test {\n  jacoco {\n    excludes += ['codeeval/**',\n                 'crackingthecode/part3knowledgebased/**',\n                 '**/Chapter7ObjectOrientedDesign**',\n                 '**/Chapter11Testing**',\n                 '**/Chapter12SystemDesignAndMemoryLimits**',\n                 'projecteuler/**']\n  }\n}\n</code></pre>\n\n<p>as stated out in documentation\n<a href=\"https://docs.gradle.org/current/userguide/jacoco_plugin.html#N16E62\" rel=\"noreferrer\">https://docs.gradle.org/current/userguide/jacoco_plugin.html#N16E62</a> and initally asked\nso the answer is:</p>\n\n<p>so if you ask me: it's not a question of</p>\n\n<pre><code>excludes = [\"projecteuler/**\"]\n</code></pre>\n\n<p>or</p>\n\n<pre><code>excludes += [\"projecteuler/**\"]\n</code></pre>\n\n<p>but</p>\n\n<pre><code>excludes = [\"**/projecteuler/**\"]\n</code></pre>\n\n<p>to exclude a package <code>*.projecteuler.*</code></p>\n\n<p>and <code>test {}</code> on project level, not nested in <code>jacocoTestReport</code></p>\n"},{"comments":[{"owner":{"account_id":9992410,"reputation":460,"user_id":8710383,"display_name":"Oleksandr"},"score":0,"creation_date":1638355664,"post_id":48521980,"comment_id":124064333,"body_markdown":"Hey, your version throws the following exception message: &quot;Cannot set the value of read-only property &#39;classDirectories&#39;&quot;.\n\nFixed with change classDirectories -&gt; classDirectories.from\n\n.But unfortunately my package still exists inside of the report","body":"Hey, your version throws the following exception message: &quot;Cannot set the value of read-only property &#39;classDirectories&#39;&quot;.  Fixed with change classDirectories -&gt; classDirectories.from  .But unfortunately my package still exists inside of the report"}],"tags":[],"owner":{"account_id":7371229,"reputation":1869,"user_id":5611328,"display_name":"er-han"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1517316869,"creation_date":1517316869,"answer_id":48521980,"question_id":29887805,"body_markdown":"The code below excludes classes from coverage verification as well:\r\n\r\n    jacocoTestCoverageVerification {\r\n        afterEvaluate {\r\n            classDirectories = files(classDirectories.files.collect {\r\n                fileTree(dir: &quot;${project.buildDir}/classes/main&quot;,\r\n                        exclude: [&#39;**/packagename/**&#39;])\r\n            })\r\n        }\r\n    }","title":"Filter JaCoCo coverage reports with Gradle","body":"<p>The code below excludes classes from coverage verification as well:</p>\n\n<pre><code>jacocoTestCoverageVerification {\n    afterEvaluate {\n        classDirectories = files(classDirectories.files.collect {\n            fileTree(dir: \"${project.buildDir}/classes/main\",\n                    exclude: ['**/packagename/**'])\n        })\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1850603,"reputation":912,"user_id":1677222,"display_name":"Mohamed El-Beltagy"},"score":4,"creation_date":1562065949,"post_id":54213986,"comment_id":100252440,"body_markdown":"Or simply use classDirectories.from (to append to the list instead of overriding list)","body":"Or simply use classDirectories.from (to append to the list instead of overriding list)"},{"owner":{"account_id":5745825,"reputation":11553,"user_id":4537090,"accept_rate":79,"display_name":"WesternGun"},"score":3,"creation_date":1572337117,"post_id":54213986,"comment_id":103518412,"body_markdown":"You will add `[]` after `exclude: ` to include several paths.","body":"You will add <code>[]</code> after <code>exclude: </code> to include several paths."},{"owner":{"account_id":5396611,"reputation":372,"user_id":4297651,"accept_rate":80,"display_name":"Dargenn"},"score":0,"creation_date":1587715658,"post_id":54213986,"comment_id":108624001,"body_markdown":"Excellent, I use gradle 6.0.1 and this solution worked for me.","body":"Excellent, I use gradle 6.0.1 and this solution worked for me."},{"owner":{"account_id":7523732,"reputation":137,"user_id":5714761,"display_name":"krishna110293"},"score":0,"creation_date":1606843322,"post_id":54213986,"comment_id":115082628,"body_markdown":"this worked, can someone please explain what exactly is happening","body":"this worked, can someone please explain what exactly is happening"},{"owner":{"account_id":2078462,"reputation":10342,"user_id":2986984,"accept_rate":80,"display_name":"tkruse"},"score":0,"creation_date":1610072017,"post_id":54213986,"comment_id":116023478,"body_markdown":"I have changed the acccepted answer to reflect this change","body":"I have changed the acccepted answer to reflect this change"},{"owner":{"account_id":6134092,"reputation":197,"user_id":4783487,"display_name":"gsmachado"},"score":0,"creation_date":1615985697,"post_id":54213986,"comment_id":117860548,"body_markdown":"Or, even, use `getClassDirectories().from()`.","body":"Or, even, use <code>getClassDirectories().from()</code>."},{"owner":{"account_id":2179848,"reputation":2922,"user_id":1929603,"display_name":"Karthik Reddy"},"score":0,"creation_date":1619083926,"post_id":54213986,"comment_id":118799658,"body_markdown":"I am trying to exclude my dtos and i am using the below code. But it is not working Please let me know if i am missing anything here. Tried in build.gradle                                                                                    jacocoTestReport {\n\t\tafterEvaluate {\n        classDirectories.setFrom(files(classDirectories.files.collect {\n            fileTree(dir: it, exclude: &#39;**/dto/**&#39;)\n        }))\n\t}\n   }","body":"I am trying to exclude my dtos and i am using the below code. But it is not working Please let me know if i am missing anything here. Tried in build.gradle                                                                                    jacocoTestReport { \t\tafterEvaluate {         classDirectories.setFrom(files(classDirectories.files.collec&zwnj;&#8203;t {             fileTree(dir: it, exclude: &#39;<b>/dto/</b>&#39;)         })) \t}    }"},{"owner":{"account_id":2123818,"reputation":969,"user_id":1886510,"display_name":"darw"},"score":0,"creation_date":1674053183,"post_id":54213986,"comment_id":132632995,"body_markdown":"If `afterEvaluate` necessary?","body":"If <code>afterEvaluate</code> necessary?"}],"tags":[],"owner":{"account_id":427053,"reputation":4001,"user_id":808615,"display_name":"uwe"},"comment_count":8,"down_vote_count":0,"up_vote_count":101,"is_accepted":false,"score":101,"last_activity_date":1579015808,"creation_date":1547631109,"answer_id":54213986,"question_id":29887805,"body_markdown":"For Gradle version 5.x, the `classDirectories = files(...)` gives a deprecation warning and does not work at all starting from Gradle 6.0\r\nThis is the nondeprecated way of excluding classes:\r\n\r\n```\r\njacocoTestReport {\r\n    afterEvaluate {\r\n        classDirectories.setFrom(files(classDirectories.files.collect {\r\n            fileTree(dir: it, exclude: &#39;com/exclude/**&#39;)\r\n        }))\r\n    }\r\n}\r\n```","title":"Filter JaCoCo coverage reports with Gradle","body":"<p>For Gradle version 5.x, the <code>classDirectories = files(...)</code> gives a deprecation warning and does not work at all starting from Gradle 6.0\nThis is the nondeprecated way of excluding classes:</p>\n\n<pre><code>jacocoTestReport {\n    afterEvaluate {\n        classDirectories.setFrom(files(classDirectories.files.collect {\n            fileTree(dir: it, exclude: 'com/exclude/**')\n        }))\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":44158,"reputation":1152,"user_id":129437,"accept_rate":57,"display_name":"Gus"},"score":1,"creation_date":1594313303,"post_id":57884984,"comment_id":111089568,"body_markdown":"`coverageExcludeClasses` doesn&#39;t appear to be a thing in JaCoCo/Gradle","body":"<code>coverageExcludeClasses</code> doesn&#39;t appear to be a thing in JaCoCo/Gradle"}],"tags":[],"owner":{"account_id":1347697,"reputation":1424,"user_id":1288120,"accept_rate":52,"display_name":"Bharat Pahalwani"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1568189994,"creation_date":1568189994,"answer_id":57884984,"question_id":29887805,"body_markdown":"add below config in gradle.properties file \r\n\r\n`coverageExcludeClasses=[&quot;com.example.package.elasticsearch.*&quot;, &quot;com.example.package2.*&quot;,]`","title":"Filter JaCoCo coverage reports with Gradle","body":"<p>add below config in gradle.properties file </p>\n\n<p><code>coverageExcludeClasses=[\"com.example.package.elasticsearch.*\", \"com.example.package2.*\",]</code></p>\n"},{"tags":[],"owner":{"account_id":3516256,"reputation":883,"user_id":2939601,"display_name":"riiich"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1572038800,"creation_date":1572038800,"answer_id":58565935,"question_id":29887805,"body_markdown":"some comments mentioned the deprecation warning.  to solve just use the getter:\r\n\r\n    afterEvaluate {\r\n        getClassDirectories().from(files(classDirectories.files.collect {\r\n            fileTree(dir: it, exclude: &#39;com/blah/**&#39;)\r\n        }))\r\n    }","title":"Filter JaCoCo coverage reports with Gradle","body":"<p>some comments mentioned the deprecation warning.  to solve just use the getter:</p>\n\n<pre><code>afterEvaluate {\n    getClassDirectories().from(files(classDirectories.files.collect {\n        fileTree(dir: it, exclude: 'com/blah/**')\n    }))\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2179848,"reputation":2922,"user_id":1929603,"display_name":"Karthik Reddy"},"score":1,"creation_date":1619084467,"post_id":59474116,"comment_id":118799891,"body_markdown":"I am trying to use the below snippet in build.gradle to exclude my dtos but it is not working. I am using gradle 6.6.1 version. Let me know if any changes  jacocoTestReport {\n    reports {\n        xml.enabled true\n        html.enabled true\n        html.destination file(&quot;$buildDir/reports/jacoco&quot;)\n    }\n\n    afterEvaluate {\n        classDirectories.setFrom(files(classDirectories.files.collect {\n            fileTree(dir: it,\n                    exclude: [&#39;**/dto/**&#39;\n                    ]\n            )\n        }))\n    }\n}","body":"I am trying to use the below snippet in build.gradle to exclude my dtos but it is not working. I am using gradle 6.6.1 version. Let me know if any changes  jacocoTestReport {     reports {         xml.enabled true         html.enabled true         html.destination file(&quot;$buildDir/reports/jacoco&quot;)     }      afterEvaluate {         classDirectories.setFrom(files(classDirectories.files.collec&zwnj;&#8203;t {             fileTree(dir: it,                     exclude: [&#39;<b>/dto/</b>&#39;                     ]             )         }))     } }"}],"tags":[],"owner":{"account_id":5299090,"reputation":349,"user_id":4229356,"display_name":"Ankur Srivastava"},"comment_count":1,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1577229842,"creation_date":1577229842,"answer_id":59474116,"question_id":29887805,"body_markdown":"For Gradle6\r\nUse something like below, because they made `classDirectories as final`, we cannot re-assign it, but a setter method exists `classDirectories.setFrom` which can be utilized\r\n\r\n\r\n        jacocoTestReport {\r\n        reports {\r\n            xml.enabled true\r\n            html.enabled true\r\n            html.destination file(&quot;$buildDir/reports/jacoco&quot;)\r\n        }\r\n    \r\n        afterEvaluate {\r\n            classDirectories.setFrom(files(classDirectories.files.collect {\r\n                fileTree(dir: it,\r\n                        exclude: [&#39;**/server/**&#39;,\r\n                                  &#39;**/model/**&#39;,\r\n                                  &#39;**/command/**&#39;\r\n                        ]\r\n                )\r\n            }))\r\n        }\r\n    }\r\n\r\n","title":"Filter JaCoCo coverage reports with Gradle","body":"<p>For Gradle6\nUse something like below, because they made <code>classDirectories as final</code>, we cannot re-assign it, but a setter method exists <code>classDirectories.setFrom</code> which can be utilized</p>\n\n<pre><code>    jacocoTestReport {\n    reports {\n        xml.enabled true\n        html.enabled true\n        html.destination file(\"$buildDir/reports/jacoco\")\n    }\n\n    afterEvaluate {\n        classDirectories.setFrom(files(classDirectories.files.collect {\n            fileTree(dir: it,\n                    exclude: ['**/server/**',\n                              '**/model/**',\n                              '**/command/**'\n                    ]\n            )\n        }))\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":556695,"reputation":3222,"user_id":918858,"accept_rate":86,"display_name":"Dexter Legaspi"},"score":0,"creation_date":1672068914,"post_id":62911084,"comment_id":132215993,"body_markdown":"actually (at least with Gradle 7.x) you don&#39;t need to set the exclusion for `jacocoTestCoverageVerification`","body":"actually (at least with Gradle 7.x) you don&#39;t need to set the exclusion for <code>jacocoTestCoverageVerification</code>"},{"owner":{"account_id":2123818,"reputation":969,"user_id":1886510,"display_name":"darw"},"score":1,"creation_date":1674053153,"post_id":62911084,"comment_id":132632983,"body_markdown":"Variable can be avoided if we say `classDirectories.setFrom(tasks.jacocoTestReport.classDirectories)`","body":"Variable can be avoided if we say <code>classDirectories.setFrom(tasks.jacocoTestReport.classDirecto&zwnj;&#8203;ries)</code>"}],"tags":[],"owner":{"account_id":8205417,"reputation":171,"user_id":6175308,"display_name":"WIlkins LIang"},"comment_count":2,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1594803117,"creation_date":1594803117,"answer_id":62911084,"question_id":29887805,"body_markdown":"In order to filter in jacoco report, exclusion need to be done in two task `jacocoTestReport` and `jacocoTestCoverageVerification`.\r\n\r\nsample code\r\n```\r\n    def jacocoExclude = [&#39;**/example/**&#39;, &#39;**/*Module*.class&#39;]\r\n\r\n    jacocoTestReport {\r\n        afterEvaluate {\r\n            getClassDirectories().setFrom(classDirectories.files.collect {\r\n                fileTree(dir: it, exclude: jacocoExclude)\r\n            })\r\n        }\r\n    }\r\n\r\n    jacocoTestCoverageVerification {\r\n        afterEvaluate {\r\n            getClassDirectories().setFrom(classDirectories.files.collect {\r\n                fileTree(dir: it, exclude: jacocoExclude)\r\n            })\r\n        }\r\n\r\n        ...\r\n    }\r\n\r\n\r\n\r\n```","title":"Filter JaCoCo coverage reports with Gradle","body":"<p>In order to filter in jacoco report, exclusion need to be done in two task <code>jacocoTestReport</code> and <code>jacocoTestCoverageVerification</code>.</p>\n<p>sample code</p>\n<pre><code>    def jacocoExclude = ['**/example/**', '**/*Module*.class']\n\n    jacocoTestReport {\n        afterEvaluate {\n            getClassDirectories().setFrom(classDirectories.files.collect {\n                fileTree(dir: it, exclude: jacocoExclude)\n            })\n        }\n    }\n\n    jacocoTestCoverageVerification {\n        afterEvaluate {\n            getClassDirectories().setFrom(classDirectories.files.collect {\n                fileTree(dir: it, exclude: jacocoExclude)\n            })\n        }\n\n        ...\n    }\n\n\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3171905,"reputation":10222,"user_id":2680640,"display_name":"sendon1982"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1605161444,"creation_date":1605161444,"answer_id":64798773,"question_id":29887805,"body_markdown":"For me, i have to do exclude in 2 places\r\n\r\n    jacocoTestReport {\r\n        dependsOn test // tests are required to run before generating the report\r\n\r\n\r\n        afterEvaluate {\r\n            excludedClassFilesForReport(classDirectories)\r\n        }\r\n    }\r\n\r\n    jacocoTestCoverageVerification {\r\n\r\n        afterEvaluate {\r\n            excludedClassFilesForReport(classDirectories)\r\n        }\r\n    }\r\n\r\n    private excludedClassFilesForReport(classDirectories) {\r\n        classDirectories.setFrom(files(classDirectories.files.collect {\r\n            fileTree(dir: it,\r\n                exclude: [\r\n                        &#39;com/test/a/config/**&#39;,\r\n                        &#39;com/test/b/constant/**&#39;,\r\n                        &#39;com/test/c/MainApp.class&#39;\r\n                ]\r\n        )\r\n    }))\r\n    }","title":"Filter JaCoCo coverage reports with Gradle","body":"<p>For me, i have to do exclude in 2 places</p>\n<pre><code>jacocoTestReport {\n    dependsOn test // tests are required to run before generating the report\n\n\n    afterEvaluate {\n        excludedClassFilesForReport(classDirectories)\n    }\n}\n\njacocoTestCoverageVerification {\n\n    afterEvaluate {\n        excludedClassFilesForReport(classDirectories)\n    }\n}\n\nprivate excludedClassFilesForReport(classDirectories) {\n    classDirectories.setFrom(files(classDirectories.files.collect {\n        fileTree(dir: it,\n            exclude: [\n                    'com/test/a/config/**',\n                    'com/test/b/constant/**',\n                    'com/test/c/MainApp.class'\n            ]\n    )\n}))\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9719109,"reputation":1190,"user_id":7208392,"display_name":"saif"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1617385669,"creation_date":1617385669,"answer_id":66923244,"question_id":29887805,"body_markdown":"Gradle 6.8.3 thrown an exception.\r\n`Cannot set the value of read-only property &#39;classDirectories&#39; for task &#39;:jacocoTestReport&#39; of type org.gradle.testing.jacoco.tasks.JacocoReport.`\r\n\r\nso I found a way to fix the issue by using \r\n\r\n```groovy\r\nclassDirectories.setFrom(\r\n\t\t\tfileTree(dir: &quot;build/classes/java/main&quot;)\r\n\t\t\t\t\t.filter({file -&gt; !file.path.contains(&#39;/dir1&#39;)})\r\n\t\t\t\t\t.filter({file -&gt; !file.path.contains(&#39;/dir2&#39;)})\r\n\t\t\t\t\t.filter({file -&gt; !file.path.contains(&#39;/dir3&#39;)})\r\n\t)\r\n```","title":"Filter JaCoCo coverage reports with Gradle","body":"<p>Gradle 6.8.3 thrown an exception.\n<code>Cannot set the value of read-only property 'classDirectories' for task ':jacocoTestReport' of type org.gradle.testing.jacoco.tasks.JacocoReport.</code></p>\n<p>so I found a way to fix the issue by using</p>\n<pre><code>classDirectories.setFrom(\n            fileTree(dir: &quot;build/classes/java/main&quot;)\n                    .filter({file -&gt; !file.path.contains('/dir1')})\n                    .filter({file -&gt; !file.path.contains('/dir2')})\n                    .filter({file -&gt; !file.path.contains('/dir3')})\n    )\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3508684,"reputation":1445,"user_id":2933593,"accept_rate":100,"display_name":"edelagnier"},"comment_count":0,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1617884883,"creation_date":1617884883,"answer_id":67003991,"question_id":29887805,"body_markdown":"for Kotlin users, here is what I used (gradle 6.7)\r\n\r\nbuild.gradle.kts\r\n\r\n\r\n    tasks.jacocoTestReport {\r\n        // tests are required to run before generating the report\r\n        dependsOn(tasks.test) \r\n        // print the report url for easier access\r\n        doLast {\r\n            println(&quot;file://${project.rootDir}/build/reports/jacoco/test/html/index.html&quot;)\r\n        }\r\n        classDirectories.setFrom(\r\n            files(classDirectories.files.map {\r\n                fileTree(it) {\r\n                    exclude(&quot;**/generated/**&quot;, &quot;**/other-excluded/**&quot;)\r\n                }\r\n            })\r\n        )\r\n    }\r\n \r\nas suggested here : https://github.com/gradle/kotlin-dsl-samples/issues/1176#issuecomment-610643709","title":"Filter JaCoCo coverage reports with Gradle","body":"<p>for Kotlin users, here is what I used (gradle 6.7)</p>\n<p>build.gradle.kts</p>\n<pre><code>tasks.jacocoTestReport {\n    // tests are required to run before generating the report\n    dependsOn(tasks.test) \n    // print the report url for easier access\n    doLast {\n        println(&quot;file://${project.rootDir}/build/reports/jacoco/test/html/index.html&quot;)\n    }\n    classDirectories.setFrom(\n        files(classDirectories.files.map {\n            fileTree(it) {\n                exclude(&quot;**/generated/**&quot;, &quot;**/other-excluded/**&quot;)\n            }\n        })\n    )\n}\n</code></pre>\n<p>as suggested here : <a href=\"https://github.com/gradle/kotlin-dsl-samples/issues/1176#issuecomment-610643709\" rel=\"noreferrer\">https://github.com/gradle/kotlin-dsl-samples/issues/1176#issuecomment-610643709</a></p>\n"},{"tags":[],"owner":{"account_id":81231,"reputation":3313,"user_id":229178,"accept_rate":100,"display_name":"sbzoom"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1618276648,"creation_date":1618276648,"answer_id":67067504,"question_id":29887805,"body_markdown":"For anyone going out of their mind looking for this answer in Kotlin DSL, here it is:\r\n\r\n```kotlin\r\nval jacocoExclude = listOf(&quot;**/entities/**&quot;, &quot;**/dtos/**&quot;)\r\njacocoTestReport {\r\n    reports {\r\n        xml.isEnabled = true\r\n        csv.isEnabled = false\r\n    }\r\n    classDirectories.setFrom(classDirectories.files.map {\r\n        fileTree(it).matching {\r\n            exclude(jacocoExclude)\r\n        }\r\n        })\r\n}\r\ntest {\r\n    useJUnitPlatform()\r\n    systemProperty(&quot;gradle.build.dir&quot;, project.buildDir)\r\n    finalizedBy(jacocoTestReport)\r\n    extensions.configure(JacocoTaskExtension::class) {\r\n        excludes = jacocoExclude\r\n    }\r\n}\r\n```","title":"Filter JaCoCo coverage reports with Gradle","body":"<p>For anyone going out of their mind looking for this answer in Kotlin DSL, here it is:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val jacocoExclude = listOf(&quot;**/entities/**&quot;, &quot;**/dtos/**&quot;)\njacocoTestReport {\n    reports {\n        xml.isEnabled = true\n        csv.isEnabled = false\n    }\n    classDirectories.setFrom(classDirectories.files.map {\n        fileTree(it).matching {\n            exclude(jacocoExclude)\n        }\n        })\n}\ntest {\n    useJUnitPlatform()\n    systemProperty(&quot;gradle.build.dir&quot;, project.buildDir)\n    finalizedBy(jacocoTestReport)\n    extensions.configure(JacocoTaskExtension::class) {\n        excludes = jacocoExclude\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2123818,"reputation":969,"user_id":1886510,"display_name":"darw"},"score":0,"creation_date":1674052966,"post_id":67313048,"comment_id":132632900,"body_markdown":"Private method can be avoided via `classDirectories.setFrom(tasks.jacocoTestReport.classDirectories)`","body":"Private method can be avoided via <code>classDirectories.setFrom(tasks.jacocoTestReport.classDirecto&zwnj;&#8203;ries)</code>"}],"tags":[],"owner":{"account_id":7009911,"reputation":81,"user_id":6816421,"display_name":"Shreyas Patankar"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1667916313,"creation_date":1619682088,"answer_id":67313048,"question_id":29887805,"body_markdown":"For those who still scratching their heads to filter certain packages from the coverage report, here is the configuration that works for me using the most recent libraries.\r\n\r\n```\r\n   Build tool: Gradle 6.5 (also tried for 6.7)\r\n   Coverage Tool: Jacoco 0.8.5\r\n```\r\nThings to consider/Justifications\r\n\r\n- `afterScript` is not required\r\n- Need to exclude it twice, one for report generation and coverage verification\r\n- The intellij IDE recommends to use `excludes` param instead of `exclude`. Either of which just works fine\r\n- While providing the regex, be sure to provide the `.class` files and not the `.java` files. \r\n- Post Gradle 5, `classDirectories` is a read-only field, therefore, use `classDirectories.setFrom`\r\n\r\n```\r\njacocoTestReport {\r\n    doLast {\r\n        println(&quot;See report file://${project.rootDir}/build/reports/jacoco/test/html/index.html&quot;)\r\n    }\r\n    excludedClassFilesForReport(classDirectories)\r\n}\r\n\r\njacocoTestCoverageVerification {\r\n    excludedClassFilesForReport(classDirectories)\r\n    violationRules {\r\n        rule {\r\n            limit {\r\n                minimum = 0.55\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nprivate excludedClassFilesForReport(classDirectories) {\r\n    classDirectories.setFrom(files(classDirectories.files.collect {\r\n        fileTree(dir: it, exclude: [\r\n                &#39;**/common/apigateway/*.class&#39;,\r\n                &#39;**/common/*/client/*Client*.class&#39;,\r\n                &#39;**/configuration/*ClientConfiguration.class&#39;,\r\n                &#39;**/model/search/*SearchService.class&#39;\r\n        ])\r\n    }))\r\n}\r\n\r\ncheck.dependsOn jacocoTestCoverageVerification\r\n```\r\n\r\n","title":"Filter JaCoCo coverage reports with Gradle","body":"<p>For those who still scratching their heads to filter certain packages from the coverage report, here is the configuration that works for me using the most recent libraries.</p>\n<pre><code>   Build tool: Gradle 6.5 (also tried for 6.7)\n   Coverage Tool: Jacoco 0.8.5\n</code></pre>\n<p>Things to consider/Justifications</p>\n<ul>\n<li><code>afterScript</code> is not required</li>\n<li>Need to exclude it twice, one for report generation and coverage verification</li>\n<li>The intellij IDE recommends to use <code>excludes</code> param instead of <code>exclude</code>. Either of which just works fine</li>\n<li>While providing the regex, be sure to provide the <code>.class</code> files and not the <code>.java</code> files.</li>\n<li>Post Gradle 5, <code>classDirectories</code> is a read-only field, therefore, use <code>classDirectories.setFrom</code></li>\n</ul>\n<pre><code>jacocoTestReport {\n    doLast {\n        println(&quot;See report file://${project.rootDir}/build/reports/jacoco/test/html/index.html&quot;)\n    }\n    excludedClassFilesForReport(classDirectories)\n}\n\njacocoTestCoverageVerification {\n    excludedClassFilesForReport(classDirectories)\n    violationRules {\n        rule {\n            limit {\n                minimum = 0.55\n            }\n        }\n    }\n}\n\nprivate excludedClassFilesForReport(classDirectories) {\n    classDirectories.setFrom(files(classDirectories.files.collect {\n        fileTree(dir: it, exclude: [\n                '**/common/apigateway/*.class',\n                '**/common/*/client/*Client*.class',\n                '**/configuration/*ClientConfiguration.class',\n                '**/model/search/*SearchService.class'\n        ])\n    }))\n}\n\ncheck.dependsOn jacocoTestCoverageVerification\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4514046,"reputation":749,"user_id":3669400,"display_name":"Randy"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1642538628,"creation_date":1642538628,"answer_id":70762138,"question_id":29887805,"body_markdown":"Here is my working config in Gradle with Jacoco 0.8.5 :\r\n\r\n    def jacocoExclusions = [\r\n            &#39;**/config/*Config.class&#39;,\r\n            &#39;**/config/*Advice.class&#39;,\r\n            &#39;**/security/*AuthorityRoles.class&#39;,\r\n            &#39;**/*Application.class&#39;\r\n    ];\r\n    \r\n    jacocoTestReport {\r\n      reports {\r\n        xml.enabled false\r\n        csv.enabled false\r\n        html.destination file(&quot;${buildDir}/reports/jacocoHtml&quot;)\r\n      }\r\n      afterEvaluate {\r\n        classDirectories.setFrom(files(classDirectories.files.collect {\r\n          fileTree(dir: it,\r\n                  exclude: jacocoExclusions\r\n          )\r\n        }))\r\n      }\r\n    }\r\n    \r\n    jacocoTestCoverageVerification {\r\n      afterEvaluate {\r\n        classDirectories.setFrom(files(classDirectories.files.collect {\r\n          fileTree(dir: it,\r\n                  exclude: jacocoExclusions\r\n          )\r\n        }))\r\n      }\r\n      violationRules {\r\n        rule {\r\n          excludes = jacocoExclusions\r\n          limit {\r\n            minimum = 0.90\r\n          }\r\n        }\r\n      }\r\n    }","title":"Filter JaCoCo coverage reports with Gradle","body":"<p>Here is my working config in Gradle with Jacoco 0.8.5 :</p>\n<pre><code>def jacocoExclusions = [\n        '**/config/*Config.class',\n        '**/config/*Advice.class',\n        '**/security/*AuthorityRoles.class',\n        '**/*Application.class'\n];\n\njacocoTestReport {\n  reports {\n    xml.enabled false\n    csv.enabled false\n    html.destination file(&quot;${buildDir}/reports/jacocoHtml&quot;)\n  }\n  afterEvaluate {\n    classDirectories.setFrom(files(classDirectories.files.collect {\n      fileTree(dir: it,\n              exclude: jacocoExclusions\n      )\n    }))\n  }\n}\n\njacocoTestCoverageVerification {\n  afterEvaluate {\n    classDirectories.setFrom(files(classDirectories.files.collect {\n      fileTree(dir: it,\n              exclude: jacocoExclusions\n      )\n    }))\n  }\n  violationRules {\n    rule {\n      excludes = jacocoExclusions\n      limit {\n        minimum = 0.90\n      }\n    }\n  }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5065608,"reputation":644,"user_id":4065769,"display_name":"Ahamed Mujeeb"},"score":0,"creation_date":1700732465,"post_id":77171915,"comment_id":136691462,"body_markdown":"Hi. Whats your Jacoco version ? Im facing an issue this is my code.\n\nhttps://stackoverflow.com/questions/77514743/cannot-obtain-expected-coverage-report-by-excluding-classes-and-packages-using-j","body":"Hi. Whats your Jacoco version ? Im facing an issue this is my code.  <a href=\"https://stackoverflow.com/questions/77514743/cannot-obtain-expected-coverage-report-by-excluding-classes-and-packages-using-j\" title=\"cannot obtain expected coverage report by excluding classes and packages using j\">stackoverflow.com/questions/77514743/&hellip;</a>"},{"owner":{"account_id":17029076,"reputation":298,"user_id":12319598,"display_name":"Jacek Sawko"},"score":0,"creation_date":1702292433,"post_id":77171915,"comment_id":136874214,"body_markdown":"This is Jacoco in version 0.8.8. \nI didn&#39;t set this version explicitly, I left it for gradle to figure it out","body":"This is Jacoco in version 0.8.8.  I didn&#39;t set this version explicitly, I left it for gradle to figure it out"}],"tags":[],"owner":{"account_id":17029076,"reputation":298,"user_id":12319598,"display_name":"Jacek Sawko"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695638139,"creation_date":1695638139,"answer_id":77171915,"question_id":29887805,"body_markdown":"For Gradle 7.6.1 in Kotlin syntax this works for me (using `setExcludes` instead of `exclude`) \r\n\r\n\r\n```\r\ntasks.jacocoTestReport {\r\n    reports {\r\n        html.required.set(true)\r\n        xml.required.set(true)\r\n    }\r\n    classDirectories.setFrom(files(classDirectories.files.map {\r\n        fileTree(it) {\r\n            setExcludes(listOf(\r\n                    &quot;**/first/path/to/skip/*.class&quot;,\r\n                    &quot;**/second/path/to/skip/*.class&quot;\r\n            ))\r\n        }\r\n    }))\r\n}\r\n","title":"Filter JaCoCo coverage reports with Gradle","body":"<p>For Gradle 7.6.1 in Kotlin syntax this works for me (using <code>setExcludes</code> instead of <code>exclude</code>)</p>\n<pre><code>tasks.jacocoTestReport {\n    reports {\n        html.required.set(true)\n        xml.required.set(true)\n    }\n    classDirectories.setFrom(files(classDirectories.files.map {\n        fileTree(it) {\n            setExcludes(listOf(\n                    &quot;**/first/path/to/skip/*.class&quot;,\n                    &quot;**/second/path/to/skip/*.class&quot;\n            ))\n        }\n    }))\n}\n</code></pre>\n"}],"owner":{"account_id":918082,"reputation":54574,"user_id":950427,"accept_rate":91,"display_name":"Jared Burrows"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":160134,"favorite_count":0,"down_vote_count":0,"up_vote_count":186,"accepted_answer_id":29887806,"answer_count":17,"score":186,"last_activity_date":1695638139,"creation_date":1430112313,"question_id":29887805,"body_markdown":"# Problem:\n\nI have a project with [tag:JaCoCo] and I want to be able to filter certain classes and/or packages.\n\n# Related Documentation:\n\nI have read the following documentation:\n\n**Official [tag:JaCoCo] site:**\nhttp://www.eclemma.org/jacoco/index.html\n\n**Official [tag:JaCoCo] docs for [tag:Gradle]:** https://gradle.org/docs/current/userguide/jacoco_plugin.html\n\n**Official [tag:JaCoCo] `Github` issues, working on coverage:**\nhttps://github.com/jacoco/jacoco/wiki/FilteringOptions\nhttps://github.com/jacoco/jacoco/issues/14\n\n# Related StackOverflow Links:\nhttps://stackoverflow.com/questions/19625640/jacoco-gradle-filtering-options (No answer)\n\nhttps://stackoverflow.com/questions/27033757/exclude-packages-from-jacoco-report-using-sonarrunner-and-gradle (Not using [tag:sonar])\n\nhttps://stackoverflow.com/questions/14682389/jacoco-exclude-jsp-from-report (It seems to work for [tag:maven], I am using [tag:gradle])\n\nhttps://stackoverflow.com/questions/27799419/maven-jacoco-configuration-exclude-classes-packages-from-report-not-working (It seems to work for [tag:maven], I am using [tag:gradle])\n\nhttps://stackoverflow.com/questions/23756014/jacoco-gradle-plugin-exclude (Could not get this to work)\n\nhttps://stackoverflow.com/questions/17394427/gradle-jacoco-coverage-reports-includes-classes-excluded-in-configuration (Seems very close, it used `doFirst`, did not work for me)\n\n# Example of what I have tried:\n\n    apply plugin: &#39;java&#39;\n    apply plugin: &#39;jacoco&#39;\n    \n    buildscript {\n        repositories {\n            mavenCentral()\n            jcenter()\n        }\n    }\n    \n    repositories {\n        jcenter()\n    }\n    \n    jacocoTestReport {\n        reports {\n            xml {\n                enabled true // coveralls plugin depends on xml format report\n            }\n    \n            html {\n                enabled true\n            }\n        }\n\n        test {\n            jacoco {\n                destinationFile = file(&quot;$buildDir/jacoco/jacocoTest.exec&quot;)\n                classDumpFile = file(&quot;$buildDir/jacoco/classpathdumps&quot;)\n                excludes = [&quot;projecteuler/**&quot;] // &lt;-- does not work\n                // excludes = [&quot;projecteuler&quot;]\n            }\n        }\n    }\n\n# Question:\n**How can I exclude certain packages and classes when generating the [tag:JaCoCo] coverage reports?**","title":"Filter JaCoCo coverage reports with Gradle","body":"<h1>Problem:</h1>\n<p>I have a project with <a href=\"/questions/tagged/jacoco\" class=\"post-tag\" title=\"show questions tagged &#39;jacoco&#39;\" rel=\"tag\">jacoco</a> and I want to be able to filter certain classes and/or packages.</p>\n<h1>Related Documentation:</h1>\n<p>I have read the following documentation:</p>\n<p><strong>Official <a href=\"/questions/tagged/jacoco\" class=\"post-tag\" title=\"show questions tagged &#39;jacoco&#39;\" rel=\"tag\">jacoco</a> site:</strong>\n<a href=\"http://www.eclemma.org/jacoco/index.html\" rel=\"noreferrer\">http://www.eclemma.org/jacoco/index.html</a></p>\n<p><strong>Official <a href=\"/questions/tagged/jacoco\" class=\"post-tag\" title=\"show questions tagged &#39;jacoco&#39;\" rel=\"tag\">jacoco</a> docs for <a href=\"/questions/tagged/gradle\" class=\"post-tag\" title=\"show questions tagged &#39;gradle&#39;\" rel=\"tag\">gradle</a>:</strong> <a href=\"https://gradle.org/docs/current/userguide/jacoco_plugin.html\" rel=\"noreferrer\">https://gradle.org/docs/current/userguide/jacoco_plugin.html</a></p>\n<p><strong>Official <a href=\"/questions/tagged/jacoco\" class=\"post-tag\" title=\"show questions tagged &#39;jacoco&#39;\" rel=\"tag\">jacoco</a> <code>Github</code> issues, working on coverage:</strong>\n<a href=\"https://github.com/jacoco/jacoco/wiki/FilteringOptions\" rel=\"noreferrer\">https://github.com/jacoco/jacoco/wiki/FilteringOptions</a>\n<a href=\"https://github.com/jacoco/jacoco/issues/14\" rel=\"noreferrer\">https://github.com/jacoco/jacoco/issues/14</a></p>\n<h1>Related StackOverflow Links:</h1>\n<p><a href=\"https://stackoverflow.com/questions/19625640/jacoco-gradle-filtering-options\">JaCoCo &amp; Gradle - Filtering Options</a> (No answer)</p>\n<p><a href=\"https://stackoverflow.com/questions/27033757/exclude-packages-from-jacoco-report-using-sonarrunner-and-gradle\">Exclude packages from Jacoco report using Sonarrunner and Gradle</a> (Not using <a href=\"/questions/tagged/sonar\" class=\"post-tag\" title=\"show questions tagged &#39;sonar&#39;\" rel=\"tag\">sonar</a>)</p>\n<p><a href=\"https://stackoverflow.com/questions/14682389/jacoco-exclude-jsp-from-report\">JaCoCo - exclude JSP from report</a> (It seems to work for <a href=\"/questions/tagged/maven\" class=\"post-tag\" title=\"show questions tagged &#39;maven&#39;\" rel=\"tag\">maven</a>, I am using <a href=\"/questions/tagged/gradle\" class=\"post-tag\" title=\"show questions tagged &#39;gradle&#39;\" rel=\"tag\">gradle</a>)</p>\n<p><a href=\"https://stackoverflow.com/questions/27799419/maven-jacoco-configuration-exclude-classes-packages-from-report-not-working\">Maven Jacoco Configuration - Exclude classes/packages from report not working</a> (It seems to work for <a href=\"/questions/tagged/maven\" class=\"post-tag\" title=\"show questions tagged &#39;maven&#39;\" rel=\"tag\">maven</a>, I am using <a href=\"/questions/tagged/gradle\" class=\"post-tag\" title=\"show questions tagged &#39;gradle&#39;\" rel=\"tag\">gradle</a>)</p>\n<p><a href=\"https://stackoverflow.com/questions/23756014/jacoco-gradle-plugin-exclude\">JaCoCo gradle plugin exclude</a> (Could not get this to work)</p>\n<p><a href=\"https://stackoverflow.com/questions/17394427/gradle-jacoco-coverage-reports-includes-classes-excluded-in-configuration\">Gradle Jacoco - coverage reports includes classes excluded in configuration</a> (Seems very close, it used <code>doFirst</code>, did not work for me)</p>\n<h1>Example of what I have tried:</h1>\n<pre><code>apply plugin: 'java'\napply plugin: 'jacoco'\n\nbuildscript {\n    repositories {\n        mavenCentral()\n        jcenter()\n    }\n}\n\nrepositories {\n    jcenter()\n}\n\njacocoTestReport {\n    reports {\n        xml {\n            enabled true // coveralls plugin depends on xml format report\n        }\n\n        html {\n            enabled true\n        }\n    }\n\n    test {\n        jacoco {\n            destinationFile = file(&quot;$buildDir/jacoco/jacocoTest.exec&quot;)\n            classDumpFile = file(&quot;$buildDir/jacoco/classpathdumps&quot;)\n            excludes = [&quot;projecteuler/**&quot;] // &lt;-- does not work\n            // excludes = [&quot;projecteuler&quot;]\n        }\n    }\n}\n</code></pre>\n<h1>Question:</h1>\n<p><strong>How can I exclude certain packages and classes when generating the <a href=\"/questions/tagged/jacoco\" class=\"post-tag\" title=\"show questions tagged &#39;jacoco&#39;\" rel=\"tag\">jacoco</a> coverage reports?</strong></p>\n"},{"tags":["java","hibernate","hibernate-mapping"],"comments":[{"owner":{"account_id":4688171,"reputation":11056,"user_id":3795036,"accept_rate":88,"display_name":"K.Nicholas"},"score":0,"creation_date":1532367526,"post_id":51482774,"comment_id":89937769,"body_markdown":"clear out the database and try again.","body":"clear out the database and try again."},{"owner":{"account_id":198938,"reputation":1576,"user_id":443908,"accept_rate":82,"display_name":"badperson"},"score":0,"creation_date":1532368862,"post_id":51482774,"comment_id":89938441,"body_markdown":"I dropped the database and re-created, and had the same problem. Also note that I have the &#39;create&#39; property set, so a new db is created on each run of a unit test","body":"I dropped the database and re-created, and had the same problem. Also note that I have the &#39;create&#39; property set, so a new db is created on each run of a unit test"},{"owner":{"account_id":4688171,"reputation":11056,"user_id":3795036,"accept_rate":88,"display_name":"K.Nicholas"},"score":0,"creation_date":1532369532,"post_id":51482774,"comment_id":89938749,"body_markdown":"Works fine for me: `Hibernate: alter table Rating_RatingComponent add constraint FKaudjguwlo1i8tm2jgli5bbnq6 foreign key (componentList_compId) references RatingComponent` Removed the Tag from Widget since you didn&#39;t bother to post a Complete, Minimal, Verifiable example","body":"Works fine for me: <code>Hibernate: alter table Rating_RatingComponent add constraint FKaudjguwlo1i8tm2jgli5bbnq6 foreign key (componentList_compId) references RatingComponent</code> Removed the Tag from Widget since you didn&#39;t bother to post a Complete, Minimal, Verifiable example"},{"owner":{"account_id":198938,"reputation":1576,"user_id":443908,"accept_rate":82,"display_name":"badperson"},"score":0,"creation_date":1532375595,"post_id":51482774,"comment_id":89941645,"body_markdown":"I see your output shows a table name of Rating_RatingComponent, wheras mine only shows RatingComponent, and that table does not exist in the db....","body":"I see your output shows a table name of Rating_RatingComponent, wheras mine only shows RatingComponent, and that table does not exist in the db...."},{"owner":{"account_id":4688171,"reputation":11056,"user_id":3795036,"accept_rate":88,"display_name":"K.Nicholas"},"score":0,"creation_date":1532378965,"post_id":51482774,"comment_id":89943059,"body_markdown":"Your question is about the Rating_RatingComponent table. That&#39;s what your error is. It&#39;s a join table between Rating and RatingComponent. If you have an existing database structure you should be using auto value validate.","body":"Your question is about the Rating_RatingComponent table. That&#39;s what your error is. It&#39;s a join table between Rating and RatingComponent. If you have an existing database structure you should be using auto value validate."}],"answers":[{"comments":[{"owner":{"account_id":13056879,"reputation":137,"user_id":9435428,"display_name":"adflytec"},"score":1,"creation_date":1637449554,"post_id":55222150,"comment_id":123830340,"body_markdown":"3 years later, you save my ass bro. Thanks!","body":"3 years later, you save my ass bro. Thanks!"}],"tags":[],"owner":{"account_id":10908817,"reputation":3683,"user_id":8018837,"accept_rate":100,"display_name":"Svenmarim"},"comment_count":1,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1552914517,"creation_date":1552914517,"answer_id":55222150,"question_id":51482774,"body_markdown":"replacing \r\n\r\n    &lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQL5InnoDBDialect&lt;/property&gt;\r\n\r\nby \r\n\r\n    &lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQL8InnoDBDialect&lt;/property&gt;\r\n\r\nwill do the trick\r\n\r\n","title":"hibernate foreign key issue : Error executing DDL &quot;alter table...&quot;","body":"<p>replacing </p>\n\n<pre><code>&lt;property name=\"hibernate.dialect\"&gt;org.hibernate.dialect.MySQL5InnoDBDialect&lt;/property&gt;\n</code></pre>\n\n<p>by </p>\n\n<pre><code>&lt;property name=\"hibernate.dialect\"&gt;org.hibernate.dialect.MySQL8InnoDBDialect&lt;/property&gt;\n</code></pre>\n\n<p>will do the trick</p>\n"},{"tags":[],"owner":{"account_id":9614215,"reputation":243,"user_id":7137594,"display_name":"Po&#231;i"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1583835067,"creation_date":1583835067,"answer_id":60615428,"question_id":51482774,"body_markdown":"I had to drop-create all the tables to make it work. Also check if you are using any reserved words as your table names.","title":"hibernate foreign key issue : Error executing DDL &quot;alter table...&quot;","body":"<p>I had to drop-create all the tables to make it work. Also check if you are using any reserved words as your table names.</p>\n"},{"tags":[],"owner":{"account_id":10024184,"reputation":119,"user_id":7412847,"display_name":"vkumar22"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1583875931,"creation_date":1583875931,"answer_id":60626235,"question_id":51482774,"body_markdown":"In my case the DB User didnt have the sufficient permission to alter the table using the reference command. Hint Stack trace had the error like \r\n\r\nCaused by: java.sql.SQLSyntaxErrorException: REFERENCES command denied to user \r\n\r\nUpdating the DB User privileges fixed the issue\r\n\r\nAlso use the update as ddl-auto \r\n\r\njpa:\r\n    hibernate:\r\n      ddl-auto: update","title":"hibernate foreign key issue : Error executing DDL &quot;alter table...&quot;","body":"<p>In my case the DB User didnt have the sufficient permission to alter the table using the reference command. Hint Stack trace had the error like </p>\n\n<p>Caused by: java.sql.SQLSyntaxErrorException: REFERENCES command denied to user </p>\n\n<p>Updating the DB User privileges fixed the issue</p>\n\n<p>Also use the update as ddl-auto </p>\n\n<p>jpa:\n    hibernate:\n      ddl-auto: update</p>\n"},{"comments":[{"owner":{"account_id":1069908,"reputation":405,"user_id":1069452,"display_name":"Johannes"},"score":0,"creation_date":1641502881,"post_id":63981076,"comment_id":124827579,"body_markdown":"I&#39;ve had a similar issue with a class named &quot;Match&quot;.","body":"I&#39;ve had a similar issue with a class named &quot;Match&quot;."}],"tags":[],"owner":{"account_id":7376373,"reputation":497,"user_id":5614823,"accept_rate":20,"display_name":"Mohammed Siddiq"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1600618527,"creation_date":1600618527,"answer_id":63981076,"question_id":51482774,"body_markdown":"I had used an SQL reserved word `&#39;order&#39;` as the entity name, due to which I was getting a similar error. Renaming it solved it for me. Look at your entity names, have you used any reserved word in them?","title":"hibernate foreign key issue : Error executing DDL &quot;alter table...&quot;","body":"<p>I had used an SQL reserved word <code>'order'</code> as the entity name, due to which I was getting a similar error. Renaming it solved it for me. Look at your entity names, have you used any reserved word in them?</p>\n"},{"tags":[],"owner":{"account_id":3756387,"reputation":802,"user_id":3122668,"display_name":"capo11"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695638002,"creation_date":1695638002,"answer_id":77171900,"question_id":51482774,"body_markdown":"I had this error in a `@OneToMany` relation with the option `orphanRemoval = true`. In fact, from JPA documentation:\r\n\r\n&gt; Whether to apply the remove operation to entities that have been\r\n&gt; removed from the relationship and to cascade the remove operation to\r\n&gt; those entities.\r\n\r\nSo, if you create a table A, populate it, and then you want to create a table B (empty at begining, of course) with a foreign key to table A, then you&#39;ll get the &quot;alter table xxx drop foreign key&quot; error.\r\n\r\nRemoving the property from:\r\n\r\n    @OneToMany(cascade = CascadeType.ALL, orphanRemoval = true)\r\n\r\nto:\r\n\r\n    @OneToMany(cascade = CascadeType.ALL)","title":"hibernate foreign key issue : Error executing DDL &quot;alter table...&quot;","body":"<p>I had this error in a <code>@OneToMany</code> relation with the option <code>orphanRemoval = true</code>. In fact, from JPA documentation:</p>\n<blockquote>\n<p>Whether to apply the remove operation to entities that have been\nremoved from the relationship and to cascade the remove operation to\nthose entities.</p>\n</blockquote>\n<p>So, if you create a table A, populate it, and then you want to create a table B (empty at begining, of course) with a foreign key to table A, then you'll get the &quot;alter table xxx drop foreign key&quot; error.</p>\n<p>Removing the property from:</p>\n<pre><code>@OneToMany(cascade = CascadeType.ALL, orphanRemoval = true)\n</code></pre>\n<p>to:</p>\n<pre><code>@OneToMany(cascade = CascadeType.ALL)\n</code></pre>\n"}],"owner":{"account_id":198938,"reputation":1576,"user_id":443908,"accept_rate":82,"display_name":"badperson"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21997,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":5,"score":8,"last_activity_date":1695638002,"creation_date":1532360990,"question_id":51482774,"body_markdown":"I have a pretty simple object structure that is giving me an error I&#39;m not able to resolve. Have done a bunch of searching, and I think this must be a pretty common use case, so not sure what the issue is. I have these three classes:\r\n\r\n    @Entity\r\n    public class Widget {\r\n\t\r\n\t\t@Id\r\n\t\t@GeneratedValue(strategy=GenerationType.AUTO)\r\n\t\tprivate int idd;\r\n\t\tprivate Date date;\r\n\t\tprivate String type;\r\n\t\tprivate int ownerId;\r\n\t\t\r\n\t\t@OneToOne(cascade = CascadeType.ALL)\r\n\t\tprivate Rating rating;\r\n\t\t\r\n\t\t\r\n\t\t@OneToMany(cascade = CascadeType.ALL)\r\n\t\tprivate List&lt;Tag&gt; tagList;\r\n\r\n\r\n    }\r\n\r\n\r\n    @Entity\r\n    public class Rating {\r\n\tpublic enum ChartType  {RADAR, BAR, LINE, STAR};\r\n\t\r\n\t@Id\r\n\t@GeneratedValue(strategy=GenerationType.AUTO)\r\n\tprivate int ratingId;\r\n\tprivate String name;\r\n\t\r\n\t@Enumerated(EnumType.STRING)\r\n\tprivate ChartType chartType;\r\n\tprivate double normalizedValue;\r\n\t\r\n\t@OneToMany(cascade = CascadeType.ALL, orphanRemoval = true)\r\n\tprivate List&lt;RatingComponent&gt; componentList = new ArrayList&lt;&gt;();\r\n\r\n\t\r\n\tpublic Rating() {\r\n\t\tbuildNormalizedValue();\r\n\t}\r\n\t}\r\n\r\n\r\n    @Entity\r\n    public class RatingComponent {\r\n\t\r\n\t\r\n\t@Id\r\n\t@GeneratedValue()\r\n\tprivate int compId;\r\n\t\r\n\tprivate String name;\r\n\tprivate double value;\r\n\tprivate double maxValue;\r\n\r\n    }\r\n\r\n\r\n\r\nwhen saving in the DAO I&#39;m getting errors I don&#39;t really understand, such as \r\n\r\n    2018-07-23 11:43:07,208 WARN o.h.t.s.i.ExceptionHandlerLoggedImpl [main] GenerationTarget encountered exception accepting command : \r\n    Error executing DDL &quot;alter table Rating_RatingComponent drop foreign key FKaudjguwlo1i8tm2jgli5bbnq6&quot; via JDBC Statement\r\n    org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL &quot;alter table Rating_RatingComponent drop foreign key FKaudjguwlo1i8tm2jgli5bbnq6&quot; via JDBC Statement\r\n\r\n\r\nand further down\r\n\r\n\r\n    2018-07-23 11:43:07,644 WARN o.h.t.s.i.ExceptionHandlerLoggedImpl [main] GenerationTarget encountered exception accepting command : Error executing DDL &quot;create table RatingComponent (compId integer not null, maxValue double precision not null, name varchar(255), value double precision not null, primary key (compId)) engine=InnoDB&quot; via JDBC Statement\r\n    org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL &quot;create table RatingComponent (compId integer not null, maxValue double precision not null, name varchar(255), value double precision not null, primary key (compId)) engine=InnoDB&quot; via JDBC Statement\r\n\r\n\r\nI have these properties in my config\r\n\r\n        &lt;property name=&quot;hibernate.hbm2ddl.auto&quot;&gt;create&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQL5InnoDBDialect&lt;/property&gt; \r\n\r\n\r\nI thought I had gone thru the docs pretty carefully, and think this is a pretty straight forward object design...any ideas as to how to resolve, and where in the docs should I research more carefully to understand the root cause?\r\n\r\nthanks!","title":"hibernate foreign key issue : Error executing DDL &quot;alter table...&quot;","body":"<p>I have a pretty simple object structure that is giving me an error I'm not able to resolve. Have done a bunch of searching, and I think this must be a pretty common use case, so not sure what the issue is. I have these three classes:</p>\n\n<pre><code>@Entity\npublic class Widget {\n\n    @Id\n    @GeneratedValue(strategy=GenerationType.AUTO)\n    private int idd;\n    private Date date;\n    private String type;\n    private int ownerId;\n\n    @OneToOne(cascade = CascadeType.ALL)\n    private Rating rating;\n\n\n    @OneToMany(cascade = CascadeType.ALL)\n    private List&lt;Tag&gt; tagList;\n\n\n}\n\n\n@Entity\npublic class Rating {\npublic enum ChartType  {RADAR, BAR, LINE, STAR};\n\n@Id\n@GeneratedValue(strategy=GenerationType.AUTO)\nprivate int ratingId;\nprivate String name;\n\n@Enumerated(EnumType.STRING)\nprivate ChartType chartType;\nprivate double normalizedValue;\n\n@OneToMany(cascade = CascadeType.ALL, orphanRemoval = true)\nprivate List&lt;RatingComponent&gt; componentList = new ArrayList&lt;&gt;();\n\n\npublic Rating() {\n    buildNormalizedValue();\n}\n}\n\n\n@Entity\npublic class RatingComponent {\n\n\n@Id\n@GeneratedValue()\nprivate int compId;\n\nprivate String name;\nprivate double value;\nprivate double maxValue;\n\n}\n</code></pre>\n\n<p>when saving in the DAO I'm getting errors I don't really understand, such as </p>\n\n<pre><code>2018-07-23 11:43:07,208 WARN o.h.t.s.i.ExceptionHandlerLoggedImpl [main] GenerationTarget encountered exception accepting command : \nError executing DDL \"alter table Rating_RatingComponent drop foreign key FKaudjguwlo1i8tm2jgli5bbnq6\" via JDBC Statement\norg.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL \"alter table Rating_RatingComponent drop foreign key FKaudjguwlo1i8tm2jgli5bbnq6\" via JDBC Statement\n</code></pre>\n\n<p>and further down</p>\n\n<pre><code>2018-07-23 11:43:07,644 WARN o.h.t.s.i.ExceptionHandlerLoggedImpl [main] GenerationTarget encountered exception accepting command : Error executing DDL \"create table RatingComponent (compId integer not null, maxValue double precision not null, name varchar(255), value double precision not null, primary key (compId)) engine=InnoDB\" via JDBC Statement\norg.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL \"create table RatingComponent (compId integer not null, maxValue double precision not null, name varchar(255), value double precision not null, primary key (compId)) engine=InnoDB\" via JDBC Statement\n</code></pre>\n\n<p>I have these properties in my config</p>\n\n<pre><code>    &lt;property name=\"hibernate.hbm2ddl.auto\"&gt;create&lt;/property&gt;\n    &lt;property name=\"hibernate.dialect\"&gt;org.hibernate.dialect.MySQL5InnoDBDialect&lt;/property&gt; \n</code></pre>\n\n<p>I thought I had gone thru the docs pretty carefully, and think this is a pretty straight forward object design...any ideas as to how to resolve, and where in the docs should I research more carefully to understand the root cause?</p>\n\n<p>thanks!</p>\n"},{"tags":["java","testing","junit"],"comments":[{"owner":{"account_id":4291439,"reputation":176,"user_id":3507691,"accept_rate":60,"display_name":"Tocchetto"},"score":0,"creation_date":1687270766,"post_id":76177625,"comment_id":134911313,"body_markdown":"I haven&#39;t used the LoggingListener but I&#39;ve had success with the OutputCapture, although I&#39;ve run into issues with timing... Check this out, might help\nhttps://stackoverflow.com/questions/24439151/how-to-unit-test-logging-error-with-spock-framework-in-groovy/61268662#comment134910935_61268662","body":"I haven&#39;t used the LoggingListener but I&#39;ve had success with the OutputCapture, although I&#39;ve run into issues with timing... Check this out, might help <a href=\"https://stackoverflow.com/questions/24439151/how-to-unit-test-logging-error-with-spock-framework-in-groovy/61268662#comment134910935_61268662\" title=\"how to unit test logging error with spock framework in groovy\">stackoverflow.com/questions/24439151/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":6044098,"reputation":420,"user_id":6875099,"accept_rate":82,"display_name":"zer_ik"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695637574,"creation_date":1695637574,"answer_id":77171845,"question_id":76177625,"body_markdown":"In this simple example we create two tests, create custom `TestExecutionListener` which prints the content of `ReportEntry`, and execute the tests using configured `Launcher`. This launcher registers our custom listener and set-up properties.\r\n\r\n    package test;\r\n        \r\n        //imports...\r\n        \r\n        public class MyTest {\r\n        \r\n            @Test\r\n            public void test1() {\r\n                System.out.println(&quot;System.out.println: test1()&quot;);\r\n                System.err.println(&quot;System.err.println: test1()&quot;);\r\n            }\r\n        \r\n            @Test\r\n            public void test2() {\r\n                System.out.println(&quot;System.out.println: test2()&quot;);\r\n                System.err.println(&quot;System.err.println: test2()&quot;);\r\n            }\r\n        \r\n            public static class CustomListener implements TestExecutionListener {\r\n        \r\n                @Override\r\n                public void reportingEntryPublished(TestIdentifier testIdentifier, ReportEntry entry) {\r\n                    Map&lt;String, String&gt; entryMap = entry.getKeyValuePairs();\r\n                    if(testIdentifier.isTest()) {\r\n                        System.out.println(&quot;Captured: &quot; + testIdentifier.getDisplayName() +\r\n                                &quot;, stdout: &quot; + entryMap.get(&quot;stdout&quot;).trim() +\r\n                                &quot;, stderr: &quot; + entryMap.get(&quot;stderr&quot;).trim());\r\n                    }\r\n                }\r\n            }\r\n        \r\n            public static void main(String[] args) {\r\n                LauncherDiscoveryRequest request = LauncherDiscoveryRequestBuilder.request()\r\n                        .selectors(selectPackage(&quot;test&quot;))\r\n                        .configurationParameter(&quot;junit.platform.output.capture.stdout&quot;, &quot;true&quot;)\r\n                        .configurationParameter(&quot;junit.platform.output.capture.stderr&quot;, &quot;true&quot;)\r\n                        .build();\r\n                try (LauncherSession session = LauncherFactory.openSession()) {\r\n                    Launcher launcher = session.getLauncher();\r\n                    launcher.registerTestExecutionListeners(new CustomListener());\r\n                    TestPlan testPlan = launcher.discover(request);\r\n                    launcher.execute(testPlan);\r\n                }\r\n            }\r\n        }","title":"How do you use LoggingListener in JUnit 5 to capture log output","body":"<p>In this simple example we create two tests, create custom <code>TestExecutionListener</code> which prints the content of <code>ReportEntry</code>, and execute the tests using configured <code>Launcher</code>. This launcher registers our custom listener and set-up properties.</p>\n<pre><code>package test;\n    \n    //imports...\n    \n    public class MyTest {\n    \n        @Test\n        public void test1() {\n            System.out.println(&quot;System.out.println: test1()&quot;);\n            System.err.println(&quot;System.err.println: test1()&quot;);\n        }\n    \n        @Test\n        public void test2() {\n            System.out.println(&quot;System.out.println: test2()&quot;);\n            System.err.println(&quot;System.err.println: test2()&quot;);\n        }\n    \n        public static class CustomListener implements TestExecutionListener {\n    \n            @Override\n            public void reportingEntryPublished(TestIdentifier testIdentifier, ReportEntry entry) {\n                Map&lt;String, String&gt; entryMap = entry.getKeyValuePairs();\n                if(testIdentifier.isTest()) {\n                    System.out.println(&quot;Captured: &quot; + testIdentifier.getDisplayName() +\n                            &quot;, stdout: &quot; + entryMap.get(&quot;stdout&quot;).trim() +\n                            &quot;, stderr: &quot; + entryMap.get(&quot;stderr&quot;).trim());\n                }\n            }\n        }\n    \n        public static void main(String[] args) {\n            LauncherDiscoveryRequest request = LauncherDiscoveryRequestBuilder.request()\n                    .selectors(selectPackage(&quot;test&quot;))\n                    .configurationParameter(&quot;junit.platform.output.capture.stdout&quot;, &quot;true&quot;)\n                    .configurationParameter(&quot;junit.platform.output.capture.stderr&quot;, &quot;true&quot;)\n                    .build();\n            try (LauncherSession session = LauncherFactory.openSession()) {\n                Launcher launcher = session.getLauncher();\n                launcher.registerTestExecutionListeners(new CustomListener());\n                TestPlan testPlan = launcher.discover(request);\n                launcher.execute(testPlan);\n            }\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":53556,"reputation":2957,"user_id":160137,"accept_rate":38,"display_name":"kousen"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":460,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1695637574,"creation_date":1683237671,"question_id":76177625,"body_markdown":"Section 4.7 of the JUnit user manual (https://junit.org/junit5/docs/current/user-guide/#running-tests-capturing-output) talks about capturing standard output/error using listeners, and the following section says that the API already contains a class called `LoggingListener`. I can create one using:\r\n\r\n```\r\nLoggingListener listener = LoggingListener.forJavaUtilLogging(Level.INFO);\r\n```\r\n\r\nbut I&#39;m not sure how to proceed after that. I want to capture the log output happening at INFO level. I already added\r\n```\r\njunit.platform.output.capture.stdout=true\r\njunit.platform.output.capture.stderr=true\r\n```\r\nto `junit-platform.properties` under `src/test/resources`, as it says to do. The listener class contains a method called `reportingEntryPublished` which takes a `TestIdentifier` and a `ReportEntry`, but I&#39;m not sure how to use that, assuming that&#39;s even the right method to call.\r\n\r\nAny advice would be appreciated. The User Manual section makes it sound easy, but I can&#39;t find any examples anywhere (including in the tests of the source code on GitHub).\r\n\r\nBTW, suggestions from both ChatGPT and Bard are hilarious.","title":"How do you use LoggingListener in JUnit 5 to capture log output","body":"<p>Section 4.7 of the JUnit user manual (<a href=\"https://junit.org/junit5/docs/current/user-guide/#running-tests-capturing-output\" rel=\"nofollow noreferrer\">https://junit.org/junit5/docs/current/user-guide/#running-tests-capturing-output</a>) talks about capturing standard output/error using listeners, and the following section says that the API already contains a class called <code>LoggingListener</code>. I can create one using:</p>\n<pre><code>LoggingListener listener = LoggingListener.forJavaUtilLogging(Level.INFO);\n</code></pre>\n<p>but I'm not sure how to proceed after that. I want to capture the log output happening at INFO level. I already added</p>\n<pre><code>junit.platform.output.capture.stdout=true\njunit.platform.output.capture.stderr=true\n</code></pre>\n<p>to <code>junit-platform.properties</code> under <code>src/test/resources</code>, as it says to do. The listener class contains a method called <code>reportingEntryPublished</code> which takes a <code>TestIdentifier</code> and a <code>ReportEntry</code>, but I'm not sure how to use that, assuming that's even the right method to call.</p>\n<p>Any advice would be appreciated. The User Manual section makes it sound easy, but I can't find any examples anywhere (including in the tests of the source code on GitHub).</p>\n<p>BTW, suggestions from both ChatGPT and Bard are hilarious.</p>\n"},{"tags":["java","environment-variables"],"comments":[{"owner":{"account_id":5090314,"reputation":2138,"user_id":4083590,"display_name":"Johny"},"score":0,"creation_date":1415708075,"post_id":26864662,"comment_id":42288761,"body_markdown":"check this link to know how to set environment variables. http://stackoverflow.com/q/1672281/4083590","body":"check this link to know how to set environment variables. <a href=\"http://stackoverflow.com/q/1672281/4083590\">stackoverflow.com/q/1672281/4083590</a>"},{"owner":{"account_id":5313956,"reputation":541,"user_id":4239395,"display_name":"JavaBeginner"},"score":0,"creation_date":1415708465,"post_id":26864662,"comment_id":42288983,"body_markdown":"@johny What I did is similar to the post on the link. Do I not need a \\lib at the end of classpath? I tried it with and without. I still got the error message when I tried to run the class file.","body":"@johny What I did is similar to the post on the link. Do I not need a \\lib at the end of classpath? I tried it with and without. I still got the error message when I tried to run the class file."},{"owner":{"account_id":1866186,"reputation":4221,"user_id":1689695,"accept_rate":100,"display_name":"CocoNess"},"score":0,"creation_date":1415709045,"post_id":26864662,"comment_id":42289323,"body_markdown":"you can check your environment variables by opening up a Command Prompt and type `set`","body":"you can check your environment variables by opening up a Command Prompt and type <code>set</code>"},{"owner":{"account_id":5090314,"reputation":2138,"user_id":4083590,"display_name":"Johny"},"score":0,"creation_date":1415709181,"post_id":26864662,"comment_id":42289404,"body_markdown":"it would be good if you provide a screen shot of the environment variables as @CocoNess told.","body":"it would be good if you provide a screen shot of the environment variables as @CocoNess told."},{"owner":{"account_id":5313956,"reputation":541,"user_id":4239395,"display_name":"JavaBeginner"},"score":1,"creation_date":1415710761,"post_id":26864662,"comment_id":42290296,"body_markdown":"an irrelevant question though.. is it dangerous to reveal my environment variables like that??","body":"an irrelevant question though.. is it dangerous to reveal my environment variables like that??"},{"owner":{"account_id":1866186,"reputation":4221,"user_id":1689695,"accept_rate":100,"display_name":"CocoNess"},"score":1,"creation_date":1415711403,"post_id":26864662,"comment_id":42290666,"body_markdown":"Your screenshot has a strange character instead of a \\ . Why? I cant identify the character. It&#39;s probably not a good idea to reveal your environment variables. You should only show the relevant ones","body":"Your screenshot has a strange character instead of a \\ . Why? I cant identify the character. It&#39;s probably not a good idea to reveal your environment variables. You should only show the relevant ones"},{"owner":{"account_id":5313956,"reputation":541,"user_id":4239395,"display_name":"JavaBeginner"},"score":0,"creation_date":1415712013,"post_id":26864662,"comment_id":42291038,"body_markdown":"here is a picture of the related environment variables: http://i58.tinypic.com/5aq4om.jpg","body":"here is a picture of the related environment variables: <a href=\"http://i58.tinypic.com/5aq4om.jpg\" rel=\"nofollow noreferrer\">i58.tinypic.com/5aq4om.jpg</a>"},{"owner":{"account_id":5313956,"reputation":541,"user_id":4239395,"display_name":"JavaBeginner"},"score":0,"creation_date":1415712146,"post_id":26864662,"comment_id":42291106,"body_markdown":"@CocoNess It is the equivalent of the &#39;\\&#39; sign. Sorry for the inconvenience.","body":"@CocoNess It is the equivalent of the &#39;\\&#39; sign. Sorry for the inconvenience."}],"answers":[{"comments":[{"owner":{"account_id":4692856,"reputation":218,"user_id":3798537,"display_name":"Morgan"},"score":1,"creation_date":1499780212,"post_id":26865048,"comment_id":77046157,"body_markdown":"Source : [Java Installation Instructions](http://www.oracle.com/technetwork/java/javase/install-windows-189425.html)","body":"Source : <a href=\"http://www.oracle.com/technetwork/java/javase/install-windows-189425.html\" rel=\"nofollow noreferrer\">Java Installation Instructions</a>"}],"tags":[],"owner":{"account_id":2113203,"reputation":9798,"user_id":1878022,"accept_rate":96,"display_name":"VedantK"},"comment_count":1,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1415709216,"creation_date":1415709216,"answer_id":26865048,"question_id":26864662,"body_markdown":"**Updating the PATH Environment Variable**&lt;br&gt;\r\n\r\nIf you do not set the PATH variable, you need to specify the full path to the executable file every time you run it, such as:&lt;br&gt;\r\n\r\n    C:\\&gt; &quot;C:\\Program Files\\Java\\jdk1.8.0\\bin\\javac&quot; MyClass.java\r\n&lt;br&gt;\r\nIt is useful to set the PATH variable permanently so it will persist after rebooting.\r\n&lt;br&gt;\r\nTo set the PATH variable permanently, add the full path of the jdk1.8.0\\bin directory to the PATH variable. Typically, this full path looks something like\r\n&lt;br&gt; `C:\\Program Files\\Java\\jdk1.8.0\\bin`.&lt;br&gt; **Set the PATH variable as follows on Microsoft Windows:**&lt;br&gt;\r\n\r\n - Click Start, then Control Panel, then System.\r\n - Click Advanced, then Environment Variables.\r\n - Add the location of the bin folder of the JDK installation to the PATH variable in System Variables. \r\n&lt;br&gt;The following is a typical value for the PATH variable:\r\n\r\n    C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\Program Files\\Java\\jdk1.8.0\\bin\r\n&lt;br&gt;\r\n&lt;br&gt;\r\n**Note:**\r\n\r\n - The PATH environment variable is a series of directories separated by semicolons (;) and is not case-sensitive. Microsoft Windows looks for programs in the PATH directories in order, from left to right.\r\n\r\n - You should only have one bin directory for a JDK in the path at a time. Those following the first instance are ignored.\r\n\r\n - If you are not sure where to add the JDK path, append it.\r\n\r\nThe new path takes effect in each new command window you open after setting the PATH variable.","title":"&quot;The system cannot find the file C:\\ProgramData\\Oracle\\Java\\javapath\\java.exe&quot;","body":"<p><strong>Updating the PATH Environment Variable</strong><br></p>\n\n<p>If you do not set the PATH variable, you need to specify the full path to the executable file every time you run it, such as:<br></p>\n\n<pre><code>C:\\&gt; \"C:\\Program Files\\Java\\jdk1.8.0\\bin\\javac\" MyClass.java\n</code></pre>\n\n<p><br>\nIt is useful to set the PATH variable permanently so it will persist after rebooting.\n<br>\nTo set the PATH variable permanently, add the full path of the jdk1.8.0\\bin directory to the PATH variable. Typically, this full path looks something like\n<br> <code>C:\\Program Files\\Java\\jdk1.8.0\\bin</code>.<br> <strong>Set the PATH variable as follows on Microsoft Windows:</strong><br></p>\n\n<ul>\n<li>Click Start, then Control Panel, then System.</li>\n<li>Click Advanced, then Environment Variables.</li>\n<li><p>Add the location of the bin folder of the JDK installation to the PATH variable in System Variables. \n<br>The following is a typical value for the PATH variable:</p>\n\n<p>C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\Program Files\\Java\\jdk1.8.0\\bin\n<br>\n<br>\n<strong>Note:</strong></p></li>\n<li><p>The PATH environment variable is a series of directories separated by semicolons (;) and is not case-sensitive. Microsoft Windows looks for programs in the PATH directories in order, from left to right.</p></li>\n<li><p>You should only have one bin directory for a JDK in the path at a time. Those following the first instance are ignored.</p></li>\n<li><p>If you are not sure where to add the JDK path, append it.</p></li>\n</ul>\n\n<p>The new path takes effect in each new command window you open after setting the PATH variable.</p>\n"},{"comments":[{"owner":{"account_id":5313956,"reputation":541,"user_id":4239395,"display_name":"JavaBeginner"},"score":0,"creation_date":1415712849,"post_id":26865645,"comment_id":42291489,"body_markdown":"I checked and I noticed there was something from the java 6 version but I couldn&#39;t get rid of it. Do you know what this error means? pic: http://i62.tinypic.com/vxn0vn.jpg","body":"I checked and I noticed there was something from the java 6 version but I couldn&#39;t get rid of it. Do you know what this error means? pic: <a href=\"http://i62.tinypic.com/vxn0vn.jpg\" rel=\"nofollow noreferrer\">i62.tinypic.com/vxn0vn.jpg</a>"}],"tags":[],"owner":{"account_id":5090314,"reputation":2138,"user_id":4083590,"display_name":"Johny"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1415713622,"creation_date":1415711155,"answer_id":26865645,"question_id":26864662,"body_markdown":"There are 2 versions of jdk in your `PATH VARIABLE` `jdk1.6.0_45` and `jdk1.8.0_25`. Try removing the first one ie.  `jdk1.6.0_45` from the `PATH`","title":"&quot;The system cannot find the file C:\\ProgramData\\Oracle\\Java\\javapath\\java.exe&quot;","body":"<p>There are 2 versions of jdk in your <code>PATH VARIABLE</code> <code>jdk1.6.0_45</code> and <code>jdk1.8.0_25</code>. Try removing the first one ie.  <code>jdk1.6.0_45</code> from the <code>PATH</code></p>\n"},{"comments":[{"owner":{"account_id":3546725,"reputation":1194,"user_id":2962507,"display_name":"dinvlad"},"score":6,"creation_date":1442508499,"post_id":27572837,"comment_id":53120123,"body_markdown":"It doesn&#39;t seem to work on Windows 7 - due to a recent change in how it handles symlinks, its GUI displays an error saying it cannot find &quot;java[w/ws].exe&quot; when using symlinks. It&#39;s safer to just create a directory junction: `rmdir /s /q %ProgramData%\\Oracle\\Java\\javapath &amp; mlink /d %ProgramData%\\Oracle\\Java\\javapath %ProgramFiles%\\Java\\jre1.8.0_60\\bin`","body":"It doesn&#39;t seem to work on Windows 7 - due to a recent change in how it handles symlinks, its GUI displays an error saying it cannot find &quot;java[w/ws].exe&quot; when using symlinks. It&#39;s safer to just create a directory junction: <code>rmdir &#47;s &#47;q %ProgramData%\\Oracle\\Java\\javapath &amp; mlink &#47;d %ProgramData%\\Oracle\\Java\\javapath %ProgramFiles%\\Java\\jre1.8.0_60\\bin</code>"},{"owner":{"account_id":332924,"reputation":15827,"user_id":658497,"accept_rate":50,"display_name":"Noam Manos"},"score":4,"creation_date":1464533752,"post_id":27572837,"comment_id":62516246,"body_markdown":"Before running those mklink, make sure to `cd C:\\ProgramData\\Oracle\\Java\\javapath` and `del java*.exe`, otherwise you&#39;ll create the new symbolic links in your current cmd directory...","body":"Before running those mklink, make sure to <code>cd C:\\ProgramData\\Oracle\\Java\\javapath</code> and <code>del java*.exe</code>, otherwise you&#39;ll create the new symbolic links in your current cmd directory..."},{"owner":{"account_id":2043549,"reputation":1360,"user_id":1824182,"accept_rate":83,"display_name":"Ti Strga"},"score":4,"creation_date":1477086140,"post_id":27572837,"comment_id":67639346,"body_markdown":"You may need to be running your command prompt as administrator, otherwise you might run into permissions problems (as Igor may have above).","body":"You may need to be running your command prompt as administrator, otherwise you might run into permissions problems (as Igor may have above)."},{"owner":{"account_id":4723347,"reputation":918,"user_id":3820701,"accept_rate":50,"display_name":"Ivan_a_bit_Ukrainivan"},"score":0,"creation_date":1653040356,"post_id":27572837,"comment_id":127758890,"body_markdown":"I am wondered why java even requires for something to be in &quot;C:\\Program Files\\Common Files\\Oracle\\Java\\javapath&quot; directory. This is quite confusing. What should I do if I want to target different JDK?","body":"I am wondered why java even requires for something to be in &quot;C:\\Program Files\\Common Files\\Oracle\\Java\\javapath&quot; directory. This is quite confusing. What should I do if I want to target different JDK?"}],"tags":[],"owner":{"display_name":"user2603432"},"comment_count":4,"down_vote_count":1,"up_vote_count":56,"is_accepted":false,"score":55,"last_activity_date":1695637366,"creation_date":1419018009,"answer_id":27572837,"question_id":26864662,"body_markdown":"I&#39;ve got a similar problem I&#39;m currently working on solving. I can&#39;t say this will solve your error since there may be issues with other software (which is my case with Eclipse Luna).\r\n\r\nJava is using the path given in your PATH variable, which is,\r\n\r\n      C:\\ProgramData\\Oracle\\Java\\javapath\r\n\r\nGo to this folder (ProgramData is hidden, so unhide it if necessary) and right click on the java.exe symlink. You&#39;ll see in the Target field where it&#39;s looking for java.exe. It may be pointing to the java.exe file from your previous jdk1.6.0_45 install. Either paste in new shortcuts here or change the PATH setting as others have mentioned.\r\n\r\nI&#39;ve found that the Java installer doesn&#39;t change the javapath or update the system path, at least when going from 1.8 to 1.7. In my case changing the shortcuts only led to a problem with Eclipse on startup.\r\n\r\nEDIT:-----\r\nAfter playing with javapath folder shortcuts it turns out you need symlinks, at least for Eclipse. See, https://stackoverflow.com/questions/24240286/windows-how-to-create-directory-symlink#24240393.\r\n\r\nYou don&#39;t need the /d switch for a file symlink,\r\n\r\n\r\n      cd C:\\ProgramData\\Oracle\\Java\\javapath \r\n\r\n      mklink java.exe &quot;C:\\Program Files\\Java\\jdk1.8.0_20\\bin\\java.exe&quot;\r\n      mklink javaw.exe &quot;C:\\Program Files\\Java\\jdk1.8.0_20\\bin\\javaw.exe&quot;\r\n      mklink javaws.exe &quot;C:\\Program Files\\Java\\jdk1.8.0_20\\bin\\javaws.exe&quot;\r\n\r\nThis now works for me.\r\n\r\n","title":"&quot;The system cannot find the file C:\\ProgramData\\Oracle\\Java\\javapath\\java.exe&quot;","body":"<p>I've got a similar problem I'm currently working on solving. I can't say this will solve your error since there may be issues with other software (which is my case with Eclipse Luna).</p>\n<p>Java is using the path given in your PATH variable, which is,</p>\n<pre><code>  C:\\ProgramData\\Oracle\\Java\\javapath\n</code></pre>\n<p>Go to this folder (ProgramData is hidden, so unhide it if necessary) and right click on the java.exe symlink. You'll see in the Target field where it's looking for java.exe. It may be pointing to the java.exe file from your previous jdk1.6.0_45 install. Either paste in new shortcuts here or change the PATH setting as others have mentioned.</p>\n<p>I've found that the Java installer doesn't change the javapath or update the system path, at least when going from 1.8 to 1.7. In my case changing the shortcuts only led to a problem with Eclipse on startup.</p>\n<p>EDIT:-----\nAfter playing with javapath folder shortcuts it turns out you need symlinks, at least for Eclipse. See, <a href=\"https://stackoverflow.com/questions/24240286/windows-how-to-create-directory-symlink#24240393\">Windows how to create directory symlink</a>.</p>\n<p>You don't need the /d switch for a file symlink,</p>\n<pre><code>  cd C:\\ProgramData\\Oracle\\Java\\javapath \n\n  mklink java.exe &quot;C:\\Program Files\\Java\\jdk1.8.0_20\\bin\\java.exe&quot;\n  mklink javaw.exe &quot;C:\\Program Files\\Java\\jdk1.8.0_20\\bin\\javaw.exe&quot;\n  mklink javaws.exe &quot;C:\\Program Files\\Java\\jdk1.8.0_20\\bin\\javaws.exe&quot;\n</code></pre>\n<p>This now works for me.</p>\n"},{"tags":[],"owner":{"account_id":5314821,"reputation":88,"user_id":4240057,"display_name":"Jitesh Beniwal"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1541911493,"creation_date":1423574731,"answer_id":28432860,"question_id":26864662,"body_markdown":"This will solve all problems relating to Java and environment variables:\r\n\r\n 1. Make your way to Windows&#39; [Environment Variables dialog](https://www.computerhope.com/issues/ch000549.htm).\r\n 2. Under **System variables**, select the variable named **Path**. Click **Edit...**\r\n 3. Remove the entry that looks like:\r\n\r\n        C:\\ProgramData\\Oracle\\Java\\javapath\r\n\r\n 4. Add the path of your JDK/JRE&#39;s `bin` folder.\r\n 5. Don&#39;t forget to set **JAVA_HOME**.","title":"&quot;The system cannot find the file C:\\ProgramData\\Oracle\\Java\\javapath\\java.exe&quot;","body":"<p>This will solve all problems relating to Java and environment variables:</p>\n\n<ol>\n<li>Make your way to Windows' <a href=\"https://www.computerhope.com/issues/ch000549.htm\" rel=\"nofollow noreferrer\">Environment Variables dialog</a>.</li>\n<li>Under <strong>System variables</strong>, select the variable named <strong>Path</strong>. Click <strong>Edit...</strong></li>\n<li><p>Remove the entry that looks like:</p>\n\n<pre><code>C:\\ProgramData\\Oracle\\Java\\javapath\n</code></pre></li>\n<li><p>Add the path of your JDK/JRE's <code>bin</code> folder.</p></li>\n<li>Don't forget to set <strong>JAVA_HOME</strong>.</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":1244574,"reputation":13277,"user_id":1206301,"accept_rate":10,"display_name":"Alexei Kaigorodov"},"score":1,"creation_date":1454518893,"post_id":29121070,"comment_id":58083387,"body_markdown":"this works for java but not for javac: cannot find or load main class com.sun.tools.javac.Main","body":"this works for java but not for javac: cannot find or load main class com.sun.tools.javac.Main"},{"owner":{"account_id":2048853,"reputation":1976,"user_id":1828296,"accept_rate":75,"display_name":"lospejos"},"score":9,"creation_date":1469048806,"post_id":29121070,"comment_id":64383287,"body_markdown":"`Why Oracle did such a poor way to point to java is beyond me` I guess the reason was that when you have relatively constant env var (pointing always to the one place - f.e. `javapath` folder), you can change paths dynamically, on on the fly (changing a link does not require shell restart). While if you change env var (f.e. PATH) you&#39;ll have to restart shell to reload and apply new ENVVARs values. Sure I&#39;m not an Oracle advocate and of course it&#39;s just my suggestion.","body":"<code>Why Oracle did such a poor way to point to java is beyond me</code> I guess the reason was that when you have relatively constant env var (pointing always to the one place - f.e. <code>javapath</code> folder), you can change paths dynamically, on on the fly (changing a link does not require shell restart). While if you change env var (f.e. PATH) you&#39;ll have to restart shell to reload and apply new ENVVARs values. Sure I&#39;m not an Oracle advocate and of course it&#39;s just my suggestion."},{"owner":{"account_id":16535035,"reputation":437,"user_id":11947303,"display_name":"CodeSlave"},"score":2,"creation_date":1576137862,"post_id":29121070,"comment_id":104803276,"body_markdown":"I received &quot;Cannot create a file when that file already exists.&quot;","body":"I received &quot;Cannot create a file when that file already exists.&quot;"}],"tags":[],"owner":{"account_id":5959428,"reputation":211,"user_id":4685039,"display_name":"Vincent Risi"},"comment_count":3,"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1449018246,"creation_date":1426678780,"answer_id":29121070,"question_id":26864662,"body_markdown":"Why Oracle did such a poor way to point to java is beyond me. We solved this problem by creating a new link to the JDK\r\n\r\n    mklink /d C:\\ProgramData\\Oracle\\Java\\javapath &quot;C:\\Program Files\\Java\\jdk1.8.0_40\\bin\\&quot;\r\n\r\nThe same would work for a JRE if that is all that is required. \r\n\r\nThis replaces the old symlinks in `C:\\ProgramData\\Oracle\\Java\\javapath` (if they existed previously)","title":"&quot;The system cannot find the file C:\\ProgramData\\Oracle\\Java\\javapath\\java.exe&quot;","body":"<p>Why Oracle did such a poor way to point to java is beyond me. We solved this problem by creating a new link to the JDK</p>\n\n<pre><code>mklink /d C:\\ProgramData\\Oracle\\Java\\javapath \"C:\\Program Files\\Java\\jdk1.8.0_40\\bin\\\"\n</code></pre>\n\n<p>The same would work for a JRE if that is all that is required. </p>\n\n<p>This replaces the old symlinks in <code>C:\\ProgramData\\Oracle\\Java\\javapath</code> (if they existed previously)</p>\n"},{"tags":[],"owner":{"account_id":2138268,"reputation":7872,"user_id":1897528,"accept_rate":62,"display_name":"Farrukh Chishti"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1429169183,"creation_date":1429169183,"answer_id":29668047,"question_id":26864662,"body_markdown":"There must be two or more PATH variables. Try merging all of them into one using semi-colon (;)","title":"&quot;The system cannot find the file C:\\ProgramData\\Oracle\\Java\\javapath\\java.exe&quot;","body":"<p>There must be two or more PATH variables. Try merging all of them into one using semi-colon (;)</p>\n"},{"tags":[],"owner":{"account_id":6789562,"reputation":1,"user_id":5227143,"display_name":"john godfrey"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1439551392,"creation_date":1439551392,"answer_id":32008879,"question_id":26864662,"body_markdown":"I got the same after installing java8 from a non-permissioned account.\r\nTo fix I simply reinstalled from admin user account.\r\nThis created the quoted directory with file links to java exes.","title":"&quot;The system cannot find the file C:\\ProgramData\\Oracle\\Java\\javapath\\java.exe&quot;","body":"<p>I got the same after installing java8 from a non-permissioned account.\nTo fix I simply reinstalled from admin user account.\nThis created the quoted directory with file links to java exes.</p>\n"},{"tags":[],"owner":{"account_id":7165800,"reputation":1,"user_id":5474953,"display_name":"Murari Goswami"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1445503562,"creation_date":1445503562,"answer_id":33276855,"question_id":26864662,"body_markdown":"I had also similar problem where by I had to un-install JDK 1.8 and needed jdk 1.7. \r\nWhat i did was removed the symbolic links from the javapath and then imported the shortcuts of java, javaw, javaws from the bin directory to the javapath folder. However, I found some permission issues in the enterprise laptop where by I did not have the privilege to modify/ update this directory. I had given appropriate permission from the administrator and there by resolved it.","title":"&quot;The system cannot find the file C:\\ProgramData\\Oracle\\Java\\javapath\\java.exe&quot;","body":"<p>I had also similar problem where by I had to un-install JDK 1.8 and needed jdk 1.7. \nWhat i did was removed the symbolic links from the javapath and then imported the shortcuts of java, javaw, javaws from the bin directory to the javapath folder. However, I found some permission issues in the enterprise laptop where by I did not have the privilege to modify/ update this directory. I had given appropriate permission from the administrator and there by resolved it.</p>\n"},{"tags":[],"owner":{"account_id":49945,"reputation":1266,"user_id":148889,"display_name":"roblogic"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1449017772,"creation_date":1449017772,"answer_id":34033093,"question_id":26864662,"body_markdown":"If you&#39;re on a corporate PC that&#39;s fairly restricted by group policy, this might work....\r\n\r\nAssuming that \r\n\r\n1. your Windows `PATH` includes `C:\\ProgramData\\Oracle\\Java\\javapath`\r\n2. you have JDK installed to `C:\\Program Files\\Java\\jdk1.8.0_60\\bin`\r\n\r\nThen create the following text file `mklink.bat` and put it on your desktop:\r\n\r\n    rem mklink.bat\r\n    mklink /d C:\\ProgramData\\Oracle\\Java\\javapath &quot;C:\\Program Files\\Java\\jdk1.8.0_60\\bin&quot;\r\n    pause\r\n\r\nNow right-click it and choose &quot;Run as Administrator&quot;. Provide admin credentials. The script should report success. Now you can compile or run Java.","title":"&quot;The system cannot find the file C:\\ProgramData\\Oracle\\Java\\javapath\\java.exe&quot;","body":"<p>If you're on a corporate PC that's fairly restricted by group policy, this might work....</p>\n\n<p>Assuming that </p>\n\n<ol>\n<li>your Windows <code>PATH</code> includes <code>C:\\ProgramData\\Oracle\\Java\\javapath</code></li>\n<li>you have JDK installed to <code>C:\\Program Files\\Java\\jdk1.8.0_60\\bin</code></li>\n</ol>\n\n<p>Then create the following text file <code>mklink.bat</code> and put it on your desktop:</p>\n\n<pre><code>rem mklink.bat\nmklink /d C:\\ProgramData\\Oracle\\Java\\javapath \"C:\\Program Files\\Java\\jdk1.8.0_60\\bin\"\npause\n</code></pre>\n\n<p>Now right-click it and choose \"Run as Administrator\". Provide admin credentials. The script should report success. Now you can compile or run Java.</p>\n"},{"comments":[{"owner":{"account_id":5619902,"reputation":2178,"user_id":4450098,"accept_rate":35,"display_name":"Sagar Nayak"},"score":0,"creation_date":1461769067,"post_id":36893084,"comment_id":61351296,"body_markdown":"please do tell what is your question. what are your progress . explain more and with proper formatting.","body":"please do tell what is your question. what are your progress . explain more and with proper formatting."}],"tags":[],"owner":{"account_id":8313225,"reputation":331,"user_id":6247532,"display_name":"Vandana Manhas"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1502342068,"creation_date":1461767946,"answer_id":36893084,"question_id":26864662,"body_markdown":"This problem exists when you upgrade from one version to another.because jdk is not automatically upgraded.\r\n\r\nFor the same you can change the environmental varibles.\r\nIn system variables look for the **PATH** and add the jdk bin location in the front of the string(not at the back).\r\nOnce you have done that check in CMD if &quot;**java**&quot; and &quot;**javac**&quot; works.\r\nif it works, again go to system variables.\r\nadd &quot;**CLASSPATH**&quot; A the variable and set value &quot; **.\r\nc:\\Program Files\\Java\\jdk1.8.0_91\\lib;**&quot;\r\n","title":"&quot;The system cannot find the file C:\\ProgramData\\Oracle\\Java\\javapath\\java.exe&quot;","body":"<p>This problem exists when you upgrade from one version to another.because jdk is not automatically upgraded.</p>\n\n<p>For the same you can change the environmental varibles.\nIn system variables look for the <strong>PATH</strong> and add the jdk bin location in the front of the string(not at the back).\nOnce you have done that check in CMD if \"<strong>java</strong>\" and \"<strong>javac</strong>\" works.\nif it works, again go to system variables.\nadd \"<strong>CLASSPATH</strong>\" A the variable and set value \" <strong>.\nc:\\Program Files\\Java\\jdk1.8.0_91\\lib;</strong>\"</p>\n"},{"comments":[{"owner":{"account_id":16267787,"reputation":77,"user_id":11747307,"display_name":"Marcellin Wabo"},"score":1,"creation_date":1634256322,"post_id":37246553,"comment_id":122982890,"body_markdown":"This has just fixed the issue for me. Thanks.","body":"This has just fixed the issue for me. Thanks."}],"tags":[],"owner":{"account_id":7772262,"reputation":151,"user_id":5881369,"display_name":"Amit"},"comment_count":1,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1541910637,"creation_date":1463371437,"answer_id":37246553,"question_id":26864662,"body_markdown":"&lt;!-- language-all: lang-none --&gt;\r\n\r\nI had in `PATH`:\r\n\r\n    C:\\ProgramData\\Oracle\\Java\\javapath;C:\\Program Files\\Java\\jdk1.8.0_92\\bin;&lt;others omitted&gt;\r\n\r\nI removed:\r\n\r\n    C:\\ProgramData\\Oracle\\Java\\javapath;\r\n\r\nand that fixed the issue for me. `java -version` now gives details about the Java version, etc.\r\n","title":"&quot;The system cannot find the file C:\\ProgramData\\Oracle\\Java\\javapath\\java.exe&quot;","body":"\n\n<p>I had in <code>PATH</code>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>C:\\ProgramData\\Oracle\\Java\\javapath;C:\\Program Files\\Java\\jdk1.8.0_92\\bin;&lt;others omitted&gt;\n</code></pre>\n\n<p>I removed:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>C:\\ProgramData\\Oracle\\Java\\javapath;\n</code></pre>\n\n<p>and that fixed the issue for me. <code>java -version</code> now gives details about the Java version, etc.</p>\n"},{"tags":[],"owner":{"account_id":9466443,"reputation":11,"user_id":7038632,"display_name":"Rajat"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1476820572,"creation_date":1476820572,"answer_id":40116975,"question_id":26864662,"body_markdown":"This usually happens when you update the java,\r\nthe easiest way to solve this is to just uninstall the JDK &amp; then reinstall it.\r\nNOTE: This doesnt remove the path or classpath so no need to worry.\r\n","title":"&quot;The system cannot find the file C:\\ProgramData\\Oracle\\Java\\javapath\\java.exe&quot;","body":"<p>This usually happens when you update the java,\nthe easiest way to solve this is to just uninstall the JDK &amp; then reinstall it.\nNOTE: This doesnt remove the path or classpath so no need to worry.</p>\n"},{"tags":[],"owner":{"account_id":9716058,"reputation":29,"user_id":7206442,"display_name":"Eshwarya"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1480010305,"creation_date":1480007774,"answer_id":40791855,"question_id":26864662,"body_markdown":"1. Uninstall all JDKs installed on your computer from the Java Control Panel\r\n2. Search for `C:\\ProgramData\\Oracle\\Java` and delete that directory and all files contained within. You can do this from the command line using `rmdir /S C:\\ProgramData\\Oracle\\Java`\r\n3. Then search for C:\\ProgramData\\Oracle and delete the oracle folder. You can do this using `rmdir /S C:\\ProgramData\\Oracle`\r\n4. Now install JDK and set the path. \r\n\r\n5. Run the program.You won&#39;t find the same problem anymore.","title":"&quot;The system cannot find the file C:\\ProgramData\\Oracle\\Java\\javapath\\java.exe&quot;","body":"<ol>\n<li>Uninstall all JDKs installed on your computer from the Java Control Panel</li>\n<li>Search for <code>C:\\ProgramData\\Oracle\\Java</code> and delete that directory and all files contained within. You can do this from the command line using <code>rmdir /S C:\\ProgramData\\Oracle\\Java</code></li>\n<li>Then search for C:\\ProgramData\\Oracle and delete the oracle folder. You can do this using <code>rmdir /S C:\\ProgramData\\Oracle</code></li>\n<li><p>Now install JDK and set the path. </p></li>\n<li><p>Run the program.You won't find the same problem anymore.</p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":10860667,"reputation":1,"user_id":7985647,"display_name":"Martin Carr"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1494327691,"creation_date":1494326183,"answer_id":43867514,"question_id":26864662,"body_markdown":"`c:\\ProgramData\\Java\\javapath` is used for symlinks. You can of course add the full path to your Java Path to `%PATH%`, but equally you can create a symlink to the path to the above location.\r\n\r\n1. Open `CMD` as Administrator.\r\n2. Type `mklink java.exe` (full path to your Java.exe)\r\neg\r\n\r\n`mklink java.exe &quot;C:\\Program Files\\Java\\jdk1.8.0_25\\bin\\java.exe&quot;`\r\n\r\n\r\n","title":"&quot;The system cannot find the file C:\\ProgramData\\Oracle\\Java\\javapath\\java.exe&quot;","body":"<p><code>c:\\ProgramData\\Java\\javapath</code> is used for symlinks. You can of course add the full path to your Java Path to <code>%PATH%</code>, but equally you can create a symlink to the path to the above location.</p>\n\n<ol>\n<li>Open <code>CMD</code> as Administrator.</li>\n<li>Type <code>mklink java.exe</code> (full path to your Java.exe)\neg</li>\n</ol>\n\n<p><code>mklink java.exe \"C:\\Program Files\\Java\\jdk1.8.0_25\\bin\\java.exe\"</code></p>\n"},{"tags":[],"owner":{"account_id":9860130,"reputation":2293,"user_id":7303415,"display_name":"Abhishek D K"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1516464386,"creation_date":1516463184,"answer_id":48357992,"question_id":26864662,"body_markdown":"Don&#39;t worry.\r\nJust uninstall jdk as well as jdk updates\r\nBefore re installing jdk ,delete the oracle folder inside programData hidden folder in C:\\ \r\nThen reinstall.\r\nSet the following,\r\n\r\n    JAVA_HOME\r\n    CLASSPATH\r\n    PATH\r\n    JRE_HOME ( is optional)","title":"&quot;The system cannot find the file C:\\ProgramData\\Oracle\\Java\\javapath\\java.exe&quot;","body":"<p>Don't worry.\nJust uninstall jdk as well as jdk updates\nBefore re installing jdk ,delete the oracle folder inside programData hidden folder in C:\\ \nThen reinstall.\nSet the following,</p>\n\n<pre><code>JAVA_HOME\nCLASSPATH\nPATH\nJRE_HOME ( is optional)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2697049,"reputation":51,"user_id":2328802,"display_name":"Hari Tyagi"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1550986451,"creation_date":1550986328,"answer_id":54849049,"question_id":26864662,"body_markdown":"I got same error while running JAVA command. To resolve this, I moved the java path as the first entry in the path, and it resolved the issue. Please have look at this screenshot for reference:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Apafr.png","title":"&quot;The system cannot find the file C:\\ProgramData\\Oracle\\Java\\javapath\\java.exe&quot;","body":"<p>I got same error while running JAVA command. To resolve this, I moved the java path as the first entry in the path, and it resolved the issue. Please have look at this screenshot for reference:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Apafr.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Apafr.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":6017082,"reputation":1,"user_id":4725512,"display_name":"Gowtham Epparla"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1563444091,"creation_date":1563444091,"answer_id":57091950,"question_id":26864662,"body_markdown":"Please remove &quot;C:\\ProgramData\\Oracle\\Java\\javapath\\java.exe&quot; from the Path variable and add your jdk bin path. It will work.\r\n\r\nIn my case the I have removed the the above path and added my JDK path which is &quot;C:\\Program Files\\Java\\jdk1.8.0_221\\bin&quot;","title":"&quot;The system cannot find the file C:\\ProgramData\\Oracle\\Java\\javapath\\java.exe&quot;","body":"<p>Please remove \"C:\\ProgramData\\Oracle\\Java\\javapath\\java.exe\" from the Path variable and add your jdk bin path. It will work.</p>\n\n<p>In my case the I have removed the the above path and added my JDK path which is \"C:\\Program Files\\Java\\jdk1.8.0_221\\bin\"</p>\n"},{"tags":[],"owner":{"account_id":16468051,"reputation":1,"user_id":11897756,"display_name":"Abhigna"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1577360022,"creation_date":1565200949,"answer_id":57399998,"question_id":26864662,"body_markdown":"For New version of Java JavaPath folder is located \r\n\r\n64 bit OS\r\n\r\n`&quot;C:\\Program Files \\Common Files\\Oracle\\Java\\javapath\\&quot;`\r\n\r\nX86\r\n\r\n`&quot;C:\\Program Files(x86) \\Common Files\\Oracle\\Java\\javapath\\&quot;`","title":"&quot;The system cannot find the file C:\\ProgramData\\Oracle\\Java\\javapath\\java.exe&quot;","body":"<p>For New version of Java JavaPath folder is located </p>\n\n<p>64 bit OS</p>\n\n<p><code>\"C:\\Program Files \\Common Files\\Oracle\\Java\\javapath\\\"</code></p>\n\n<p>X86</p>\n\n<p><code>\"C:\\Program Files(x86) \\Common Files\\Oracle\\Java\\javapath\\\"</code></p>\n"},{"comments":[{"owner":{"account_id":4676201,"reputation":1102,"user_id":3786453,"accept_rate":100,"display_name":"menaka_"},"score":2,"creation_date":1579658151,"post_id":59851201,"comment_id":105836655,"body_markdown":"Add more descriptive answer.","body":"Add more descriptive answer."}],"tags":[],"owner":{"account_id":17585124,"reputation":1,"user_id":12758019,"display_name":"Mike"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1579653967,"creation_date":1579653967,"answer_id":59851201,"question_id":26864662,"body_markdown":"&lt;&gt;\\Common Files\\Oracle\\Java\\javapath\\ is now created as a junction, no symlinks anymore","title":"&quot;The system cannot find the file C:\\ProgramData\\Oracle\\Java\\javapath\\java.exe&quot;","body":"<p>&lt;>\\Common Files\\Oracle\\Java\\javapath\\ is now created as a junction, no symlinks anymore</p>\n"},{"tags":[],"owner":{"account_id":19848453,"reputation":1,"user_id":14539470,"display_name":"Mahmoud Gado"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662746737,"creation_date":1662746737,"answer_id":73665998,"question_id":26864662,"body_markdown":"This will solve all problems relating to Java and environment variables:\r\n\r\nMake your way to Windows&#39; Environment Variables dialog.\r\nUnder System variables, select the variable named Path. Click Edit...\r\nRemove the entry that looks like:\r\n\r\nC:\\ProgramData\\Oracle\\Java\\javapath\r\nAdd the path of your JDK/JRE&#39;s bin folder.\r\n\r\nDon&#39;t forget to set JAVA_HOME.\r\n\r\nThis helped me.......:-)","title":"&quot;The system cannot find the file C:\\ProgramData\\Oracle\\Java\\javapath\\java.exe&quot;","body":"<p>This will solve all problems relating to Java and environment variables:</p>\n<p>Make your way to Windows' Environment Variables dialog.\nUnder System variables, select the variable named Path. Click Edit...\nRemove the entry that looks like:</p>\n<p>C:\\ProgramData\\Oracle\\Java\\javapath\nAdd the path of your JDK/JRE's bin folder.</p>\n<p>Don't forget to set JAVA_HOME.</p>\n<p>This helped me.......:-)</p>\n"},{"tags":[],"owner":{"account_id":18772787,"reputation":43,"user_id":13689270,"display_name":"eScape CS"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675887068,"creation_date":1675887068,"answer_id":75391235,"question_id":26864662,"body_markdown":"For me it worked like this:\r\nOn your desktop go to ```Search-&gt;View advanced system settings-&gt;Environment Variables```\r\nUnder System Variables look for path and click ```Edit```.\r\nClick on ```New``` and add the new Path and move it to the top.\r\nTo find your java path if you don&#39;t know where it is installed in cmd type ```where javac```\r\n\r\n","title":"&quot;The system cannot find the file C:\\ProgramData\\Oracle\\Java\\javapath\\java.exe&quot;","body":"<p>For me it worked like this:\nOn your desktop go to <code>Search-&gt;View advanced system settings-&gt;Environment Variables</code>\nUnder System Variables look for path and click <code>Edit</code>.\nClick on <code>New</code> and add the new Path and move it to the top.\nTo find your java path if you don't know where it is installed in cmd type <code>where javac</code></p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1694020608,"post_id":77046800,"comment_id":135837625,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/77046800/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":28678441,"reputation":1,"user_id":21960112,"display_name":"Harnek"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1694122663,"creation_date":1693936943,"answer_id":77046800,"question_id":26864662,"body_markdown":"Faced the same issue while upgrading to OpenJDK17 from JDK8 and got this error while executing **Java -version** in cmd.\r\n\r\nFix: goto path C:\\Program Files\\Java\\jdk-17\\bin copy files **java.exe** and **javaw.exe**, goto path C:\\ProgramData\\Oracle\\Java\\javapath and delete the existing shortcuts( I had java 8 before this and shortcuts were placed to java.exe, javaw.exe &amp; javaws.exe.) and paste these two files there.","title":"&quot;The system cannot find the file C:\\ProgramData\\Oracle\\Java\\javapath\\java.exe&quot;","body":"<p>Faced the same issue while upgrading to OpenJDK17 from JDK8 and got this error while executing <strong>Java -version</strong> in cmd.</p>\n<p>Fix: goto path C:\\Program Files\\Java\\jdk-17\\bin copy files <strong>java.exe</strong> and <strong>javaw.exe</strong>, goto path C:\\ProgramData\\Oracle\\Java\\javapath and delete the existing shortcuts( I had java 8 before this and shortcuts were placed to java.exe, javaw.exe &amp; javaws.exe.) and paste these two files there.</p>\n"}],"owner":{"account_id":5313956,"reputation":541,"user_id":4239395,"display_name":"JavaBeginner"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":195659,"favorite_count":0,"down_vote_count":0,"up_vote_count":54,"answer_count":22,"score":54,"last_activity_date":1695637366,"creation_date":1415707874,"question_id":26864662,"body_markdown":"&lt;!-- language-all: lang-none --&gt;\r\n\r\nI am on JDK 8u25 on Windows 8, and I am experiencing a problem with my Java installation. I can run `javac` perfectly fine, but running `java` produces this error message:\r\n\r\n    The system cannot find the file C:\\ProgramData\\Oracle\\Java\\javapath\\java.exe\r\n\r\nHow do I fix this?\r\n\r\n----\r\n\r\nI think the problem has to do with my environment variables.\r\n\r\nThe important variables, as I have set them, are:\r\n\r\n - `JAVA_HOME` – `C:\\Program Files\\Java\\jdk1.8.0_25`\r\n - `CLASSPATH` – `.;%JAVA_HOME%\\lib`\r\n - `PATH` – `&lt;other paths omitted&gt;;%JAVA_HOME%\\bin`\r\n\r\nAnd their expansions, as viewed with `set` in cmd, are:\r\n\r\n - `JAVA_HOME` – `C:\\Program Files\\Java\\jdk1.8.0_25`\r\n - `CLASSPATH` – `.;C:\\Program Files\\Java\\jdk1.8.0_25\\lib;%CLASSPATH%;`\r\n - `PATH` – `C:\\ProgramData\\Oracle\\Java\\javapath;C:\\Program Files\\Java\\jdk1.6.0_45\\bin;&lt;other paths omitted&gt;;C:\\Program Files\\Java\\jdk1.8.0_25\\bin`\r\n\r\nThe full output of `set` can be viewed [here](https://i.stack.imgur.com/Zjrrg.png).","title":"&quot;The system cannot find the file C:\\ProgramData\\Oracle\\Java\\javapath\\java.exe&quot;","body":"\n\n<p>I am on JDK 8u25 on Windows 8, and I am experiencing a problem with my Java installation. I can run <code>javac</code> perfectly fine, but running <code>java</code> produces this error message:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>The system cannot find the file C:\\ProgramData\\Oracle\\Java\\javapath\\java.exe\n</code></pre>\n\n<p>How do I fix this?</p>\n\n<hr>\n\n<p>I think the problem has to do with my environment variables.</p>\n\n<p>The important variables, as I have set them, are:</p>\n\n<ul>\n<li><code>JAVA_HOME</code> – <code>C:\\Program Files\\Java\\jdk1.8.0_25</code></li>\n<li><code>CLASSPATH</code> – <code>.;%JAVA_HOME%\\lib</code></li>\n<li><code>PATH</code> – <code>&lt;other paths omitted&gt;;%JAVA_HOME%\\bin</code></li>\n</ul>\n\n<p>And their expansions, as viewed with <code>set</code> in cmd, are:</p>\n\n<ul>\n<li><code>JAVA_HOME</code> – <code>C:\\Program Files\\Java\\jdk1.8.0_25</code></li>\n<li><code>CLASSPATH</code> – <code>.;C:\\Program Files\\Java\\jdk1.8.0_25\\lib;%CLASSPATH%;</code></li>\n<li><code>PATH</code> – <code>C:\\ProgramData\\Oracle\\Java\\javapath;C:\\Program Files\\Java\\jdk1.6.0_45\\bin;&lt;other paths omitted&gt;;C:\\Program Files\\Java\\jdk1.8.0_25\\bin</code></li>\n</ul>\n\n<p>The full output of <code>set</code> can be viewed <a href=\"https://i.stack.imgur.com/Zjrrg.png\" rel=\"noreferrer\">here</a>.</p>\n"},{"tags":["java","activemq-artemis"],"answers":[{"comments":[{"owner":{"account_id":10473591,"reputation":858,"user_id":7720801,"display_name":"LDropl"},"score":0,"creation_date":1637837130,"post_id":70109435,"comment_id":123934622,"body_markdown":"the error in logs says &quot;failed to find a store&quot;, I think the main problem here that it searches in the wrong directory and keystore format may be secondary problem because it works without format if the keystore located in the right folder","body":"the error in logs says &quot;failed to find a store&quot;, I think the main problem here that it searches in the wrong directory and keystore format may be secondary problem because it works without format if the keystore located in the right folder"},{"owner":{"account_id":1491171,"reputation":3291,"user_id":1398228,"display_name":"ehsavoie"},"score":2,"creation_date":1637837872,"post_id":70109435,"comment_id":123934933,"body_markdown":"Once the initial connection is opened, the client will select a broker using the topology of the cluster which has a different path. I think you need to call setUseTopologyForLoadBalancing to false on your client connection factory.","body":"Once the initial connection is opened, the client will select a broker using the topology of the cluster which has a different path. I think you need to call setUseTopologyForLoadBalancing to false on your client connection factory."}],"tags":[],"owner":{"account_id":1491171,"reputation":3291,"user_id":1398228,"display_name":"ehsavoie"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637835952,"creation_date":1637835952,"answer_id":70109435,"question_id":70108898,"body_markdown":"I think the default format for keystores is JKS, you need to tell the connector/acceptor about this format using trustStoreType=PKCS12 in your connection URL.","title":"Spring JMS producer cannot connect with Artemis MQ via SSL","body":"<p>I think the default format for keystores is JKS, you need to tell the connector/acceptor about this format using trustStoreType=PKCS12 in your connection URL.</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1695781641,"post_id":77171810,"comment_id":136069052,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77171810/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":29528379,"reputation":11,"user_id":22629519,"display_name":"Андрей Андреев"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695637248,"creation_date":1695637248,"answer_id":77171810,"question_id":70108898,"body_markdown":"I had the same behavior when I tried to use **useTopologyForLoadBalancing = true**, installed by default in the class ServerLocatorConfig (artemis-jms-client-2.19.1). I installed **connectionFactory.setUseTopologyForLoadBalancing(false)**, then this strange behavior has stopped. I got a working producer, but I don&#39;t know how this setting affects the load balance.","title":"Spring JMS producer cannot connect with Artemis MQ via SSL","body":"<p>I had the same behavior when I tried to use <strong>useTopologyForLoadBalancing = true</strong>, installed by default in the class ServerLocatorConfig (artemis-jms-client-2.19.1). I installed <strong>connectionFactory.setUseTopologyForLoadBalancing(false)</strong>, then this strange behavior has stopped. I got a working producer, but I don't know how this setting affects the load balance.</p>\n"}],"owner":{"account_id":10473591,"reputation":858,"user_id":7720801,"display_name":"LDropl"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":875,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695637248,"creation_date":1637833540,"question_id":70108898,"body_markdown":"I have Artemis ActiveMQ version 2.19.0 with 3 group of master/slave:\r\n\r\n    amq1-master\r\n    amq2-slave\r\n    amq3-master\r\n    amq4-slave\r\n    amq5-master\r\n    amq6-slave\r\n\r\nI&#39;m also using SSL connection between connectors here is broker.xml from one of the machine:\r\n```xml\r\n    &lt;connectors&gt;\r\n        &lt;connector name=&quot;amq1-master&quot;&gt;tcp://amq1:61616?sslEnabled=true;trustStorePath=/home/artemis_certs/amq1/client_ts.p12;trustStorePassword=trustStorePassword&lt;/connector&gt;\r\n\t\t&lt;connector name=&quot;amq1-slave&quot;&gt;tcp://amq2:61616?sslEnabled=true;trustStorePath=/home/artemis_certs/amq2/client_ts.p12;trustStorePassword=trustStorePassword&lt;/connector&gt;\r\n\t\t&lt;connector name=&quot;amq2-master&quot;&gt;tcp://amq3:61616?sslEnabled=true;trustStorePath=/home/artemis_certs/amq3/client_ts.p12;trustStorePassword=trustStorePassword&lt;/connector&gt;\r\n\t\t&lt;connector name=&quot;amq2-slave&quot;&gt;tcp://amq4:61616?sslEnabled=true;trustStorePath=/home/artemis_certs/amq4/client_ts.p12;trustStorePassword=trustStorePassword&lt;/connector&gt;\r\n\t\t&lt;connector name=&quot;amq3-master&quot;&gt;tcp://amq5:61616?sslEnabled=true;trustStorePath=/home/artemis_certs/amq5/client_ts.p12;trustStorePassword=trustStorePassword&lt;/connector&gt;\r\n\t\t&lt;connector name=&quot;amq3-slave&quot;&gt;tcp://amq6:61616?sslEnabled=true;trustStorePath=/home/artemis_certs/amq6/client_ts.p12;trustStorePassword=trustStorePassword&lt;/connector&gt;\r\n    &lt;/connectors&gt;\r\n\r\n\t  &lt;acceptors&gt;\r\n\t\t &lt;acceptor name=&quot;netty-acceptor&quot;&gt;tcp://amq1:61616?sslEnabled=true;keyStorePath=/home/artemis_certs/amq1/broker_ks.p12;keyStorePassword=keyStorePassword&lt;/acceptor&gt;\r\n      &lt;/acceptors&gt;\r\n```\r\n\r\nThe connections between brokers works fine. When I&#39;m trying to send messages from one of the producer I&#39;m getting this error\r\n\r\n```\r\n{&quot;@timestamp&quot;:&quot;2021-11-24T20:31:29.439Z&quot;, &quot;log.level&quot;: &quot;WARN&quot;, &quot;message&quot;:&quot;Failed to initialize a channel. Closing: [id: 0x424f0276]&quot;, &quot;ecs.version&quot;: &quot;1.2.0&quot;,&quot;service.name&quot;:&quot;test-artemis&quot;,&quot;event.dataset&quot;:&quot;test-artemis.log&quot;,\r\n&quot;process.thread.name&quot;:&quot;Thread-2 (ActiveMQ-client-netty-threads)&quot;,&quot;log.logger&quot;:&quot;io.netty.channel.ChannelInitializer&quot;,&quot;error.type&quot;:&quot;java.lang.Exception&quot;,&quot;error.message&quot;:&quot;Failed to find a store at /home/artemis_cert/amq5/client_ts.p12\r\n&quot;,&quot;error.stack_trace&quot;:[\r\n        &quot;java.lang.Exception: Failed to find a store at /home/artemis_cert/amq5/client_ts.p12&quot;,\r\n        &quot;\\tat org.apache.activemq.artemis.core.remoting.impl.ssl.SSLSupport.validateStoreURL(SSLSupport.java:314)&quot;,\r\n        &quot;\\tat org.apache.activemq.artemis.core.remoting.impl.ssl.SSLSupport.loadKeystore(SSLSupport.java:262)&quot;,\r\n        &quot;\\tat org.apache.activemq.artemis.core.remoting.impl.ssl.SSLSupport.loadTrustManagerFactory(SSLSupport.java:213)&quot;,\r\n        &quot;\\tat org.apache.activemq.artemis.core.remoting.impl.ssl.SSLSupport.loadTrustManagers(SSLSupport.java:238)&quot;,\r\n        &quot;\\tat org.apache.activemq.artemis.core.remoting.impl.ssl.SSLSupport.createContext(SSLSupport.java:162)&quot;,\r\n        &quot;\\tat org.apache.activemq.artemis.core.remoting.impl.ssl.DefaultSSLContextFactory.createSSLContext(DefaultSSLContextFactory.java:64)&quot;,\r\n        &quot;\\tat org.apache.activemq.artemis.core.remoting.impl.ssl.DefaultSSLContextFactory.getSSLContext(DefaultSSLContextFactory.java:35)&quot;,\r\n        &quot;\\tat org.apache.activemq.artemis.core.remoting.impl.netty.NettyConnector.loadJdkSslEngine(NettyConnector.java:719)&quot;,\r\n        &quot;\\tat org.apache.activemq.artemis.core.remoting.impl.netty.NettyConnector.access$1400(NettyConnector.java:129)&quot;,\r\n        &quot;\\tat org.apache.activemq.artemis.core.remoting.impl.netty.NettyConnector$1.initChannel(NettyConnector.java:628)&quot;,\r\n        &quot;\\tat io.netty.channel.ChannelInitializer.initChannel(ChannelInitializer.java:129)&quot;,\r\n        &quot;\\tat io.netty.channel.ChannelInitializer.handlerAdded(ChannelInitializer.java:112)&quot;,\r\n        &quot;\\tat io.netty.channel.AbstractChannelHandlerContext.callHandlerAdded(AbstractChannelHandlerContext.java:938)&quot;,\r\n        &quot;\\tat io.netty.channel.DefaultChannelPipeline.callHandlerAdded0(DefaultChannelPipeline.java:609)&quot;,\r\n        &quot;\\tat io.netty.channel.DefaultChannelPipeline.access$100(DefaultChannelPipeline.java:46)&quot;,\r\n        &quot;\\tat io.netty.channel.DefaultChannelPipeline$PendingHandlerAddedTask.execute(DefaultChannelPipeline.java:1463)&quot;,\r\n        &quot;\\tat io.netty.channel.DefaultChannelPipeline.callHandlerAddedForAllHandlers(DefaultChannelPipeline.java:1115)&quot;,\r\n        &quot;\\tat io.netty.channel.DefaultChannelPipeline.invokeHandlerAddedIfNeeded(DefaultChannelPipeline.java:650)&quot;,\r\n        &quot;\\tat io.netty.channel.AbstractChannel$AbstractUnsafe.register0(AbstractChannel.java:514)&quot;,\r\n        &quot;\\tat io.netty.channel.AbstractChannel$AbstractUnsafe.access$200(AbstractChannel.java:429)&quot;,\r\n        &quot;\\tat io.netty.channel.AbstractChannel$AbstractUnsafe$1.run(AbstractChannel.java:486)&quot;,\r\n        &quot;\\tat io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)&quot;,\r\n        &quot;\\tat io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:469)&quot;,\r\n        &quot;\\tat io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:387)&quot;,\r\n        &quot;\\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:986)&quot;,\r\n        &quot;\\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)&quot;,\r\n        &quot;\\tat org.apache.activemq.artemis.utils.ActiveMQThreadFactory$1.run(ActiveMQThreadFactory.java:118)&quot;]}\r\n{&quot;@timestamp&quot;:&quot;2021-11-24T20:31:29.441Z&quot;, &quot;log.level&quot;:&quot;ERROR&quot;, &quot;message&quot;:&quot;AMQ214016: Failed to create netty connection&quot;, &quot;ecs.version&quot;: &quot;1.2.0&quot;,&quot;service.name&quot;:&quot;test-artemis&quot;,&quot;event.dataset&quot;:&quot;test-artemis.log&quot;,&quot;process.thread.name&quot;:&quot;Camel (camel-1) thread #0 - JmsConsumer[example-queue]&quot;,&quot;log.logger&quot;:&quot;org.apache.activemq.artemis.core.client&quot;,&quot;error.type&quot;:&quot;io.netty.channel.StacklessClosedChannelException&quot;,&quot;error.stack_trace&quot;:[\r\n        &quot;io.netty.channel.StacklessClosedChannelException&quot;,\r\n        &quot;\\tat io.netty.channel.AbstractChannel$AbstractUnsafe.ensureOpen(ChannelPromise)(Unknown Source)&quot;]}\r\n{&quot;@timestamp&quot;:&quot;2021-11-24T20:31:33.841Z&quot;, &quot;log.level&quot;: &quot;WARN&quot;, &quot;message&quot;:&quot;Failed to initialize a channel. Closing: [id: 0x62825c92]&quot;, &quot;ecs.version&quot;: &quot;1.2.0&quot;,&quot;service.name&quot;:&quot;test-artemis&quot;,&quot;event.dataset&quot;:&quot;test-artemis.log&quot;,&quot;process.thread.name&quot;:&quot;Thread-0 (ActiveMQ-client-netty-threads)&quot;,&quot;log.logger&quot;:&quot;io.netty.channel.ChannelInitializer&quot;,&quot;error.type&quot;:&quot;java.lang.Exception&quot;,&quot;error.message&quot;:&quot;Failed to find a store at /home/artemis_cert/amq5/client_ts.p12&quot;,&quot;error.stack_trace&quot;:[\r\n```\r\nHere is how my JMS connection url looks like:\r\n\r\n```java\r\njms.artemis.broker.url=(tcp://amq1:61616,tcp://amq2:61616,tcp://amq3:61616,tcp://amq4:61616,tcp://amq5:61616,tcp://amq6:61616)?ha=true&amp;sslEnabled=true&amp;trustStorePath=/home/cert/client_ts.p12&amp;trustStorePassword=trustStorePassword&amp;keyStorePath=/home/cert/broker_ks.p12&amp;keyStorePassword=keyStorePassword\r\njms.artemis.user=admin\r\njms.artemis.password=admin\r\n\r\n\r\n\r\n@Configuration\r\npublic class ArtemisJmsConfiguration extends JmsConfiguration{\r\n    @Override\r\n    @Bean\r\n    public ConnectionFactory artemisConnectionFactory(\r\n            @Value(&quot;${jms.artemis.broker.url}&quot;) String brokerUrl,\r\n            @Value(&quot;${jms.artemis.user}&quot;) String user,\r\n            @Value(&quot;${jms.artemis.password}&quot;) String password\r\n    ) {\r\n        ActiveMQConnectionFactory conn = new ActiveMQConnectionFactory(brokerUrl, user, password);\r\n        JmsPoolConnectionFactory factory = new JmsPoolConnectionFactory();\r\n        factory.setConnectionFactory(conn);\r\n        factory.setMaxConnections(10);\r\n        return factory;\r\n    }\r\n}\r\n```\r\n\r\nFirstly I dont understand why in logs I see the wrong path for my store it says:\r\n***&quot;Failed to find a store at /home/artemis_cert/amq5/client_ts.p12&quot;*** and in connection url I have different path *&quot;trustStorePath=/home/cert/client_ts.p12&quot;* ?\r\n\r\n - */home/artemis_cert/amq5/* this folder located on all artemis broker servers\r\n - */home/cert/* this folder located on the client machine and this file ***&quot;/home/cert/client_ts.p12&quot;*** includes all trustores from all 6 artemis broker servers\r\n\r\nI&#39;m also getting errors for other stores it&#39;s just one example which I mentioned above for example:\r\n\r\n    Failed to find a store at /home/artemis_cert/amq1/client_ts.p12; \r\n    Failed to find a store at /home/artemis_cert/amq2/client_ts.p12 \r\n    etc.","title":"Spring JMS producer cannot connect with Artemis MQ via SSL","body":"<p>I have Artemis ActiveMQ version 2.19.0 with 3 group of master/slave:</p>\n<pre><code>amq1-master\namq2-slave\namq3-master\namq4-slave\namq5-master\namq6-slave\n</code></pre>\n<p>I'm also using SSL connection between connectors here is broker.xml from one of the machine:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;connectors&gt;\n        &lt;connector name=&quot;amq1-master&quot;&gt;tcp://amq1:61616?sslEnabled=true;trustStorePath=/home/artemis_certs/amq1/client_ts.p12;trustStorePassword=trustStorePassword&lt;/connector&gt;\n        &lt;connector name=&quot;amq1-slave&quot;&gt;tcp://amq2:61616?sslEnabled=true;trustStorePath=/home/artemis_certs/amq2/client_ts.p12;trustStorePassword=trustStorePassword&lt;/connector&gt;\n        &lt;connector name=&quot;amq2-master&quot;&gt;tcp://amq3:61616?sslEnabled=true;trustStorePath=/home/artemis_certs/amq3/client_ts.p12;trustStorePassword=trustStorePassword&lt;/connector&gt;\n        &lt;connector name=&quot;amq2-slave&quot;&gt;tcp://amq4:61616?sslEnabled=true;trustStorePath=/home/artemis_certs/amq4/client_ts.p12;trustStorePassword=trustStorePassword&lt;/connector&gt;\n        &lt;connector name=&quot;amq3-master&quot;&gt;tcp://amq5:61616?sslEnabled=true;trustStorePath=/home/artemis_certs/amq5/client_ts.p12;trustStorePassword=trustStorePassword&lt;/connector&gt;\n        &lt;connector name=&quot;amq3-slave&quot;&gt;tcp://amq6:61616?sslEnabled=true;trustStorePath=/home/artemis_certs/amq6/client_ts.p12;trustStorePassword=trustStorePassword&lt;/connector&gt;\n    &lt;/connectors&gt;\n\n      &lt;acceptors&gt;\n         &lt;acceptor name=&quot;netty-acceptor&quot;&gt;tcp://amq1:61616?sslEnabled=true;keyStorePath=/home/artemis_certs/amq1/broker_ks.p12;keyStorePassword=keyStorePassword&lt;/acceptor&gt;\n      &lt;/acceptors&gt;\n</code></pre>\n<p>The connections between brokers works fine. When I'm trying to send messages from one of the producer I'm getting this error</p>\n<pre><code>{&quot;@timestamp&quot;:&quot;2021-11-24T20:31:29.439Z&quot;, &quot;log.level&quot;: &quot;WARN&quot;, &quot;message&quot;:&quot;Failed to initialize a channel. Closing: [id: 0x424f0276]&quot;, &quot;ecs.version&quot;: &quot;1.2.0&quot;,&quot;service.name&quot;:&quot;test-artemis&quot;,&quot;event.dataset&quot;:&quot;test-artemis.log&quot;,\n&quot;process.thread.name&quot;:&quot;Thread-2 (ActiveMQ-client-netty-threads)&quot;,&quot;log.logger&quot;:&quot;io.netty.channel.ChannelInitializer&quot;,&quot;error.type&quot;:&quot;java.lang.Exception&quot;,&quot;error.message&quot;:&quot;Failed to find a store at /home/artemis_cert/amq5/client_ts.p12\n&quot;,&quot;error.stack_trace&quot;:[\n        &quot;java.lang.Exception: Failed to find a store at /home/artemis_cert/amq5/client_ts.p12&quot;,\n        &quot;\\tat org.apache.activemq.artemis.core.remoting.impl.ssl.SSLSupport.validateStoreURL(SSLSupport.java:314)&quot;,\n        &quot;\\tat org.apache.activemq.artemis.core.remoting.impl.ssl.SSLSupport.loadKeystore(SSLSupport.java:262)&quot;,\n        &quot;\\tat org.apache.activemq.artemis.core.remoting.impl.ssl.SSLSupport.loadTrustManagerFactory(SSLSupport.java:213)&quot;,\n        &quot;\\tat org.apache.activemq.artemis.core.remoting.impl.ssl.SSLSupport.loadTrustManagers(SSLSupport.java:238)&quot;,\n        &quot;\\tat org.apache.activemq.artemis.core.remoting.impl.ssl.SSLSupport.createContext(SSLSupport.java:162)&quot;,\n        &quot;\\tat org.apache.activemq.artemis.core.remoting.impl.ssl.DefaultSSLContextFactory.createSSLContext(DefaultSSLContextFactory.java:64)&quot;,\n        &quot;\\tat org.apache.activemq.artemis.core.remoting.impl.ssl.DefaultSSLContextFactory.getSSLContext(DefaultSSLContextFactory.java:35)&quot;,\n        &quot;\\tat org.apache.activemq.artemis.core.remoting.impl.netty.NettyConnector.loadJdkSslEngine(NettyConnector.java:719)&quot;,\n        &quot;\\tat org.apache.activemq.artemis.core.remoting.impl.netty.NettyConnector.access$1400(NettyConnector.java:129)&quot;,\n        &quot;\\tat org.apache.activemq.artemis.core.remoting.impl.netty.NettyConnector$1.initChannel(NettyConnector.java:628)&quot;,\n        &quot;\\tat io.netty.channel.ChannelInitializer.initChannel(ChannelInitializer.java:129)&quot;,\n        &quot;\\tat io.netty.channel.ChannelInitializer.handlerAdded(ChannelInitializer.java:112)&quot;,\n        &quot;\\tat io.netty.channel.AbstractChannelHandlerContext.callHandlerAdded(AbstractChannelHandlerContext.java:938)&quot;,\n        &quot;\\tat io.netty.channel.DefaultChannelPipeline.callHandlerAdded0(DefaultChannelPipeline.java:609)&quot;,\n        &quot;\\tat io.netty.channel.DefaultChannelPipeline.access$100(DefaultChannelPipeline.java:46)&quot;,\n        &quot;\\tat io.netty.channel.DefaultChannelPipeline$PendingHandlerAddedTask.execute(DefaultChannelPipeline.java:1463)&quot;,\n        &quot;\\tat io.netty.channel.DefaultChannelPipeline.callHandlerAddedForAllHandlers(DefaultChannelPipeline.java:1115)&quot;,\n        &quot;\\tat io.netty.channel.DefaultChannelPipeline.invokeHandlerAddedIfNeeded(DefaultChannelPipeline.java:650)&quot;,\n        &quot;\\tat io.netty.channel.AbstractChannel$AbstractUnsafe.register0(AbstractChannel.java:514)&quot;,\n        &quot;\\tat io.netty.channel.AbstractChannel$AbstractUnsafe.access$200(AbstractChannel.java:429)&quot;,\n        &quot;\\tat io.netty.channel.AbstractChannel$AbstractUnsafe$1.run(AbstractChannel.java:486)&quot;,\n        &quot;\\tat io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)&quot;,\n        &quot;\\tat io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:469)&quot;,\n        &quot;\\tat io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:387)&quot;,\n        &quot;\\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:986)&quot;,\n        &quot;\\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)&quot;,\n        &quot;\\tat org.apache.activemq.artemis.utils.ActiveMQThreadFactory$1.run(ActiveMQThreadFactory.java:118)&quot;]}\n{&quot;@timestamp&quot;:&quot;2021-11-24T20:31:29.441Z&quot;, &quot;log.level&quot;:&quot;ERROR&quot;, &quot;message&quot;:&quot;AMQ214016: Failed to create netty connection&quot;, &quot;ecs.version&quot;: &quot;1.2.0&quot;,&quot;service.name&quot;:&quot;test-artemis&quot;,&quot;event.dataset&quot;:&quot;test-artemis.log&quot;,&quot;process.thread.name&quot;:&quot;Camel (camel-1) thread #0 - JmsConsumer[example-queue]&quot;,&quot;log.logger&quot;:&quot;org.apache.activemq.artemis.core.client&quot;,&quot;error.type&quot;:&quot;io.netty.channel.StacklessClosedChannelException&quot;,&quot;error.stack_trace&quot;:[\n        &quot;io.netty.channel.StacklessClosedChannelException&quot;,\n        &quot;\\tat io.netty.channel.AbstractChannel$AbstractUnsafe.ensureOpen(ChannelPromise)(Unknown Source)&quot;]}\n{&quot;@timestamp&quot;:&quot;2021-11-24T20:31:33.841Z&quot;, &quot;log.level&quot;: &quot;WARN&quot;, &quot;message&quot;:&quot;Failed to initialize a channel. Closing: [id: 0x62825c92]&quot;, &quot;ecs.version&quot;: &quot;1.2.0&quot;,&quot;service.name&quot;:&quot;test-artemis&quot;,&quot;event.dataset&quot;:&quot;test-artemis.log&quot;,&quot;process.thread.name&quot;:&quot;Thread-0 (ActiveMQ-client-netty-threads)&quot;,&quot;log.logger&quot;:&quot;io.netty.channel.ChannelInitializer&quot;,&quot;error.type&quot;:&quot;java.lang.Exception&quot;,&quot;error.message&quot;:&quot;Failed to find a store at /home/artemis_cert/amq5/client_ts.p12&quot;,&quot;error.stack_trace&quot;:[\n</code></pre>\n<p>Here is how my JMS connection url looks like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>jms.artemis.broker.url=(tcp://amq1:61616,tcp://amq2:61616,tcp://amq3:61616,tcp://amq4:61616,tcp://amq5:61616,tcp://amq6:61616)?ha=true&amp;sslEnabled=true&amp;trustStorePath=/home/cert/client_ts.p12&amp;trustStorePassword=trustStorePassword&amp;keyStorePath=/home/cert/broker_ks.p12&amp;keyStorePassword=keyStorePassword\njms.artemis.user=admin\njms.artemis.password=admin\n\n\n\n@Configuration\npublic class ArtemisJmsConfiguration extends JmsConfiguration{\n    @Override\n    @Bean\n    public ConnectionFactory artemisConnectionFactory(\n            @Value(&quot;${jms.artemis.broker.url}&quot;) String brokerUrl,\n            @Value(&quot;${jms.artemis.user}&quot;) String user,\n            @Value(&quot;${jms.artemis.password}&quot;) String password\n    ) {\n        ActiveMQConnectionFactory conn = new ActiveMQConnectionFactory(brokerUrl, user, password);\n        JmsPoolConnectionFactory factory = new JmsPoolConnectionFactory();\n        factory.setConnectionFactory(conn);\n        factory.setMaxConnections(10);\n        return factory;\n    }\n}\n</code></pre>\n<p>Firstly I dont understand why in logs I see the wrong path for my store it says:\n<em><strong>&quot;Failed to find a store at /home/artemis_cert/amq5/client_ts.p12&quot;</strong></em> and in connection url I have different path <em>&quot;trustStorePath=/home/cert/client_ts.p12&quot;</em> ?</p>\n<ul>\n<li><em>/home/artemis_cert/amq5/</em> this folder located on all artemis broker servers</li>\n<li><em>/home/cert/</em> this folder located on the client machine and this file <em><strong>&quot;/home/cert/client_ts.p12&quot;</strong></em> includes all trustores from all 6 artemis broker servers</li>\n</ul>\n<p>I'm also getting errors for other stores it's just one example which I mentioned above for example:</p>\n<pre><code>Failed to find a store at /home/artemis_cert/amq1/client_ts.p12; \nFailed to find a store at /home/artemis_cert/amq2/client_ts.p12 \netc.\n</code></pre>\n"},{"tags":["java","spring","spring-boot","http-status-code-404","http-status-code-401"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1576656558,"post_id":59387737,"comment_id":104966231,"body_markdown":"No. Filters execute before servlets (which handle the mapping).","body":"No. Filters execute before servlets (which handle the mapping)."},{"owner":{"account_id":1912441,"reputation":2961,"user_id":1725871,"accept_rate":88,"display_name":"JoSSte"},"score":2,"creation_date":1576657276,"post_id":59387737,"comment_id":104966530,"body_markdown":"I would also say that it makes sense not to tell people that have no session whether a page exists or not.","body":"I would also say that it makes sense not to tell people that have no session whether a page exists or not."},{"owner":{"account_id":4114299,"reputation":71,"user_id":3376310,"display_name":"Crist Lam"},"score":0,"creation_date":1576658755,"post_id":59387737,"comment_id":104967146,"body_markdown":"I know right. My friend suggests an option that is to have all of the valid mapping in a List and then for every request, iterate through the list in the Filter and throw a HTTP 404 if the request url is not in the list. But I don&#39;t think it&#39;s is okay to do that.","body":"I know right. My friend suggests an option that is to have all of the valid mapping in a List and then for every request, iterate through the list in the Filter and throw a HTTP 404 if the request url is not in the list. But I don&#39;t think it&#39;s is okay to do that."}],"answers":[{"comments":[{"owner":{"account_id":4114299,"reputation":71,"user_id":3376310,"display_name":"Crist Lam"},"score":2,"creation_date":1576658555,"post_id":59387970,"comment_id":104967041,"body_markdown":"Thanks but I think it doesn&#39;t solve my problem. Assume the correct URL is like /secure/abc and the request is like /secure/abcd, it would still return a HTTP 401","body":"Thanks but I think it doesn&#39;t solve my problem. Assume the correct URL is like /secure/abc and the request is like /secure/abcd, it would still return a HTTP 401"},{"owner":{"account_id":17154908,"reputation":31,"user_id":12416034,"display_name":"PavelBahBah"},"score":0,"creation_date":1576659223,"post_id":59387970,"comment_id":104967361,"body_markdown":"For more precise setting you can use `requestMatchers` method with something like this:\nhttps://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/actuate/autoconfigure/security/servlet/EndpointRequest.html#toAnyEndpoint--\nThis way you can include all your actual endpoints into some group.","body":"For more precise setting you can use <code>requestMatchers</code> method with something like this: <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/actuate/autoconfigure/security/servlet/EndpointRequest.html#toAnyEndpoint--\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/api/org/springframew&zwnj;&#8203;ork/&hellip;</a> This way you can include all your actual endpoints into some group."},{"owner":{"account_id":4114299,"reputation":71,"user_id":3376310,"display_name":"Crist Lam"},"score":0,"creation_date":1576660338,"post_id":59387970,"comment_id":104967868,"body_markdown":"Thanks for your link. It gives me an idea. I ll gather a list of valid endpoint, and then validate the request manually with that list.","body":"Thanks for your link. It gives me an idea. I ll gather a list of valid endpoint, and then validate the request manually with that list."}],"tags":[],"owner":{"account_id":17154908,"reputation":31,"user_id":12416034,"display_name":"PavelBahBah"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1576657182,"creation_date":1576657182,"answer_id":59387970,"question_id":59387737,"body_markdown":"You can try to config access settings inside your WebSecurityConfigurerAdapter class.\r\n```\r\n@Override\r\nprotected void configure(HttpSecurity http) throws Exception {\r\n    http\r\n        .authorizeRequests()\r\n        .antMatchers(&quot;/secure/**&quot;).authenticated()\r\n        .and()\r\n        .authorizeRequests().anyRequest().permitAll();\r\n}\r\n```\r\nSo the filter won&#39;t return HTTP 401 for any request which is not match &quot;/secure/**&quot; pattern.","title":"Spring Boot, Spring Security returns a status 401 instead of 404 for &quot;no mapping found for HTTP request&quot;","body":"<p>You can try to config access settings inside your WebSecurityConfigurerAdapter class.</p>\n\n<pre><code>@Override\nprotected void configure(HttpSecurity http) throws Exception {\n    http\n        .authorizeRequests()\n        .antMatchers(\"/secure/**\").authenticated()\n        .and()\n        .authorizeRequests().anyRequest().permitAll();\n}\n</code></pre>\n\n<p>So the filter won't return HTTP 401 for any request which is not match \"/secure/**\" pattern.</p>\n"},{"tags":[],"owner":{"account_id":9916994,"reputation":454,"user_id":7341454,"display_name":"scruel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1609172559,"creation_date":1609171207,"answer_id":65480411,"question_id":59387737,"body_markdown":"Put this filter as the first filter in the Spring Security:\r\n\r\n    public class NoHandlerFoundFilter extends OncePerRequestFilter {\r\n    \r\n      private final DispatcherServlet dispatcherServlet;\r\n    \r\n      public NoHandlerFoundFilter(DispatcherServlet dispatcherServlet) {\r\n        this.dispatcherServlet = dispatcherServlet;\r\n      }\r\n    \r\n      @Override\r\n      protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\r\n        if (null == getHandler(request)) {\r\n          throw new NoHandlerFoundException(request.getMethod(), getRequestUri(request),\r\n              new ServletServerHttpRequest(request).getHeaders());\r\n        }\r\n        filterChain.doFilter(request, response);\r\n      }\r\n    \r\n      private static String getRequestUri(HttpServletRequest request) {\r\n        String uri = (String) request.getAttribute(WebUtils.INCLUDE_REQUEST_URI_ATTRIBUTE);\r\n        if (uri == null) {\r\n          uri = request.getRequestURI();\r\n        }\r\n        return uri;\r\n      }\r\n    \r\n      protected HandlerExecutionChain getHandler(HttpServletRequest request) {\r\n        if (dispatcherServlet.getHandlerMappings() != null) {\r\n          for (HandlerMapping mapping : dispatcherServlet.getHandlerMappings()) {\r\n            try {\r\n              HandlerExecutionChain handler = mapping.getHandler(request);\r\n              if (handler != null) {\r\n                return handler;\r\n              }\r\n            } catch (Exception ex) {\r\n              // Ignore\r\n            }\r\n          }\r\n        }\r\n        return null;\r\n      }\r\n    }","title":"Spring Boot, Spring Security returns a status 401 instead of 404 for &quot;no mapping found for HTTP request&quot;","body":"<p>Put this filter as the first filter in the Spring Security:</p>\n<pre><code>public class NoHandlerFoundFilter extends OncePerRequestFilter {\n\n  private final DispatcherServlet dispatcherServlet;\n\n  public NoHandlerFoundFilter(DispatcherServlet dispatcherServlet) {\n    this.dispatcherServlet = dispatcherServlet;\n  }\n\n  @Override\n  protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\n    if (null == getHandler(request)) {\n      throw new NoHandlerFoundException(request.getMethod(), getRequestUri(request),\n          new ServletServerHttpRequest(request).getHeaders());\n    }\n    filterChain.doFilter(request, response);\n  }\n\n  private static String getRequestUri(HttpServletRequest request) {\n    String uri = (String) request.getAttribute(WebUtils.INCLUDE_REQUEST_URI_ATTRIBUTE);\n    if (uri == null) {\n      uri = request.getRequestURI();\n    }\n    return uri;\n  }\n\n  protected HandlerExecutionChain getHandler(HttpServletRequest request) {\n    if (dispatcherServlet.getHandlerMappings() != null) {\n      for (HandlerMapping mapping : dispatcherServlet.getHandlerMappings()) {\n        try {\n          HandlerExecutionChain handler = mapping.getHandler(request);\n          if (handler != null) {\n            return handler;\n          }\n        } catch (Exception ex) {\n          // Ignore\n        }\n      }\n    }\n    return null;\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2311085,"reputation":149,"user_id":2029198,"display_name":"Hiro_Hamada"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695637219,"creation_date":1695637219,"answer_id":77171809,"question_id":59387737,"body_markdown":"\r\n\r\n    @Order(Ordered.HIGHEST_PRECEDENCE)\r\n    @Component\r\n    @Slf4j\r\n    @WebFilter\r\n    public class NoHandlerFoundFilter extends OncePerRequestFilter {\r\n    \r\n      private final DispatcherServlet dispatcherServlet;\r\n    \r\n      public NoHandlerFoundFilter(DispatcherServlet dispatcherServlet) {\r\n        this.dispatcherServlet = dispatcherServlet;\r\n      }\r\n    \r\n      @Override\r\n      protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\r\n        try{\r\n\t\t\tboolean flag = validateUrl(request, response);\r\n\t\t\tif(flag)\r\n\t\t\t\tfilterChain.doFilter(request, response);\r\n\t\t}catch (Exception ex){\r\n\t\t\tlog.error(&quot;URL Filter Chain Exception:&quot;, ex);\r\n\t\t\t//throw new UrlNotFoundException(request, response, getRequestUri(request), ex);\r\n\t\t}\r\n      }\r\n      private boolean validateUrl(HttpServletRequest request, HttpServletResponse response) throws NoHandlerFoundException, IOException {\r\n\t\tif (null == getHandler(request)) {\r\n\t\t\tStatus errorStatus = this.getErrorStatus(HttpStatus.NOT_FOUND.toString(), &quot;URL not found&quot;, null);\r\n\t\t\tPlatformResponse errorResponse = new PlatformResponse();\r\n\t\t\terrorResponse.setStatus(errorStatus);\r\n\t\t\tresponse.setStatus(HttpStatus.NOT_FOUND.value());\r\n\t\t\tresponse.getWriter().write(objectMapper.writeValueAsString(errorResponse));\r\n\t\t\treturn false;\r\n\t\t\t//throw new UrlNotFoundException(request, response, &quot;test&quot;, null);\r\n\t\t}\r\n\t\treturn true;\r\n\t  }\r\n      private static String getRequestUri(HttpServletRequest request) {\r\n        String uri = (String) request.getAttribute(WebUtils.INCLUDE_REQUEST_URI_ATTRIBUTE);\r\n        if (uri == null) {\r\n          uri = request.getRequestURI();\r\n        }\r\n        return uri;\r\n      }\r\n    \r\n      protected HandlerExecutionChain getHandler(HttpServletRequest request) {\r\n        if (dispatcherServlet.getHandlerMappings() != null) {\r\n          for (HandlerMapping mapping : dispatcherServlet.getHandlerMappings()) {\r\n            try {\r\n              HandlerExecutionChain handler = mapping.getHandler(request);\r\n              if (handler != null) {\r\n                return handler;\r\n              }\r\n            } catch (Exception ex) {\r\n              // Ignore\r\n            }\r\n          }\r\n        }\r\n        return null;\r\n      }\r\n    }\r\nslight modification to scruel answer.\r\n\r\nworks for `springBootVersion: 3`","title":"Spring Boot, Spring Security returns a status 401 instead of 404 for &quot;no mapping found for HTTP request&quot;","body":"<pre><code>@Order(Ordered.HIGHEST_PRECEDENCE)\n@Component\n@Slf4j\n@WebFilter\npublic class NoHandlerFoundFilter extends OncePerRequestFilter {\n\n  private final DispatcherServlet dispatcherServlet;\n\n  public NoHandlerFoundFilter(DispatcherServlet dispatcherServlet) {\n    this.dispatcherServlet = dispatcherServlet;\n  }\n\n  @Override\n  protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\n    try{\n        boolean flag = validateUrl(request, response);\n        if(flag)\n            filterChain.doFilter(request, response);\n    }catch (Exception ex){\n        log.error(&quot;URL Filter Chain Exception:&quot;, ex);\n        //throw new UrlNotFoundException(request, response, getRequestUri(request), ex);\n    }\n  }\n  private boolean validateUrl(HttpServletRequest request, HttpServletResponse response) throws NoHandlerFoundException, IOException {\n    if (null == getHandler(request)) {\n        Status errorStatus = this.getErrorStatus(HttpStatus.NOT_FOUND.toString(), &quot;URL not found&quot;, null);\n        PlatformResponse errorResponse = new PlatformResponse();\n        errorResponse.setStatus(errorStatus);\n        response.setStatus(HttpStatus.NOT_FOUND.value());\n        response.getWriter().write(objectMapper.writeValueAsString(errorResponse));\n        return false;\n        //throw new UrlNotFoundException(request, response, &quot;test&quot;, null);\n    }\n    return true;\n  }\n  private static String getRequestUri(HttpServletRequest request) {\n    String uri = (String) request.getAttribute(WebUtils.INCLUDE_REQUEST_URI_ATTRIBUTE);\n    if (uri == null) {\n      uri = request.getRequestURI();\n    }\n    return uri;\n  }\n\n  protected HandlerExecutionChain getHandler(HttpServletRequest request) {\n    if (dispatcherServlet.getHandlerMappings() != null) {\n      for (HandlerMapping mapping : dispatcherServlet.getHandlerMappings()) {\n        try {\n          HandlerExecutionChain handler = mapping.getHandler(request);\n          if (handler != null) {\n            return handler;\n          }\n        } catch (Exception ex) {\n          // Ignore\n        }\n      }\n    }\n    return null;\n  }\n}\n</code></pre>\n<p>slight modification to scruel answer.</p>\n<p>works for <code>springBootVersion: 3</code></p>\n"}],"owner":{"account_id":4114299,"reputation":71,"user_id":3376310,"display_name":"Crist Lam"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3307,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":3,"score":7,"last_activity_date":1695637219,"creation_date":1576656118,"question_id":59387737,"body_markdown":"I am having a project using Spring Boot and Spring Security. Spring Security validate the header with the session id for every request. If the session id is invalid or expired, an error code 401 will be returned. The session id is validated before it gets to the controller.\r\n\r\nNow, I am facing an issue that if the user enters an invalid URL without a valid session id, still the response code is 401 because the session id is validated first. My expectation is that if the URL is invalid, an error code 404 (no mapping found for HTTP request) will be returned. In other words, I want to validate the URL before validating session id.\r\n\r\nIs there any way to do so because the session id in the header is validated in the GenericFilterBean before it gets to the controller?\r\n\r\nAny help is appreciated. Thank you.","title":"Spring Boot, Spring Security returns a status 401 instead of 404 for &quot;no mapping found for HTTP request&quot;","body":"<p>I am having a project using Spring Boot and Spring Security. Spring Security validate the header with the session id for every request. If the session id is invalid or expired, an error code 401 will be returned. The session id is validated before it gets to the controller.</p>\n\n<p>Now, I am facing an issue that if the user enters an invalid URL without a valid session id, still the response code is 401 because the session id is validated first. My expectation is that if the URL is invalid, an error code 404 (no mapping found for HTTP request) will be returned. In other words, I want to validate the URL before validating session id.</p>\n\n<p>Is there any way to do so because the session id in the header is validated in the GenericFilterBean before it gets to the controller?</p>\n\n<p>Any help is appreciated. Thank you.</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":28537030,"reputation":1,"user_id":21843597,"display_name":"Dave"},"score":0,"creation_date":1695625703,"post_id":77170402,"comment_id":136044123,"body_markdown":"@Phil when i run with [3,2,2,3] with val = 3, the output array is [2,2]. But I don&#39;t know why it wouldn&#39;t be [2,2,3] instead.","body":"@Phil when i run with [3,2,2,3] with val = 3, the output array is [2,2]. But I don&#39;t know why it wouldn&#39;t be [2,2,3] instead."}],"answers":[{"tags":[],"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695628055,"creation_date":1695628055,"answer_id":77170746,"question_id":77170402,"body_markdown":"&gt; If &quot;val&quot; is at the last index, wouldn&#39;t my code just ignore it and leave it as where it is?\r\n\r\nyes, and that will give a correct answer - acording to the problem text\r\n\r\n\r\n\r\n&gt; when i run with [3,2,2,3] with val = 3, the output array is [2,2]. But I don&#39;t know why it wouldn&#39;t be [2,2,3] instead. \r\n\r\nI tested your code:\r\n\r\nhttp://tpcg.io/_0AFGLH\r\n\r\nand it prints:\r\n\r\n    [2, 2, 2, 3]\r\n\r\nand that is correct, 3 is supposed to be not included in the result. You are supposed to return integer value, lets name it `k`, of number of elements different from val, and that is correct in your code. You are also supposed to modify array so that initial `k` elements are different from val. That is also correct in your code. You dont need to care about the elements `k`+1 in the returned array. ","title":"I don&#39;t understand my code at the last index","body":"<blockquote>\n<p>If &quot;val&quot; is at the last index, wouldn't my code just ignore it and leave it as where it is?</p>\n</blockquote>\n<p>yes, and that will give a correct answer - acording to the problem text</p>\n<blockquote>\n<p>when i run with [3,2,2,3] with val = 3, the output array is [2,2]. But I don't know why it wouldn't be [2,2,3] instead.</p>\n</blockquote>\n<p>I tested your code:</p>\n<p><a href=\"http://tpcg.io/_0AFGLH\" rel=\"nofollow noreferrer\">http://tpcg.io/_0AFGLH</a></p>\n<p>and it prints:</p>\n<pre><code>[2, 2, 2, 3]\n</code></pre>\n<p>and that is correct, 3 is supposed to be not included in the result. You are supposed to return integer value, lets name it <code>k</code>, of number of elements different from val, and that is correct in your code. You are also supposed to modify array so that initial <code>k</code> elements are different from val. That is also correct in your code. You dont need to care about the elements <code>k</code>+1 in the returned array.</p>\n"},{"tags":[],"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695637088,"creation_date":1695636782,"answer_id":77171750,"question_id":77170402,"body_markdown":"The method returns the number of elements actually in use, the following elements should be be ignored. If you want to avoid reallocating a new array, you may consider passing an additional argument `n` giving the actual length:\r\n\r\n    public int removeElement(int[] nums, int n, int val) {\r\n        int newIndex = 0;\r\n        for (int i = 0; i &lt; n; i++){\r\n            if (nums[i] != val){\r\n                nums[newIndex] = nums[i];\r\n                newIndex++;\r\n\r\n            }\r\n        }\r\n        return newIndex;\r\n    }\r\n\r\nOtherwise, you can just return a new array:\r\n\r\n    public int[] removeElement(int[] nums, int val) {\r\n        int newIndex = 0;\r\n        for (int i = 0; i &lt; nums.length; i++){\r\n            if (nums[i] != val){\r\n                nums[newIndex] = nums[i];\r\n                newIndex++;\r\n\r\n            }\r\n        }\r\n        return Arrays.copyOfRange(nums, 0, newIndex);\r\n    }\r\n\r\nUPDATE:\r\n\r\nNote however that if your array elements were objects instead of `int`s, the first approach could cause memory leaks, unless you were to set to `null` elements at positions from `newIndex` to `n-1`.\r\n","title":"I don&#39;t understand my code at the last index","body":"<p>The method returns the number of elements actually in use, the following elements should be be ignored. If you want to avoid reallocating a new array, you may consider passing an additional argument <code>n</code> giving the actual length:</p>\n<pre><code>public int removeElement(int[] nums, int n, int val) {\n    int newIndex = 0;\n    for (int i = 0; i &lt; n; i++){\n        if (nums[i] != val){\n            nums[newIndex] = nums[i];\n            newIndex++;\n\n        }\n    }\n    return newIndex;\n}\n</code></pre>\n<p>Otherwise, you can just return a new array:</p>\n<pre><code>public int[] removeElement(int[] nums, int val) {\n    int newIndex = 0;\n    for (int i = 0; i &lt; nums.length; i++){\n        if (nums[i] != val){\n            nums[newIndex] = nums[i];\n            newIndex++;\n\n        }\n    }\n    return Arrays.copyOfRange(nums, 0, newIndex);\n}\n</code></pre>\n<p>UPDATE:</p>\n<p>Note however that if your array elements were objects instead of <code>int</code>s, the first approach could cause memory leaks, unless you were to set to <code>null</code> elements at positions from <code>newIndex</code> to <code>n-1</code>.</p>\n"}],"owner":{"account_id":28537030,"reputation":1,"user_id":21843597,"display_name":"Dave"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"answer_count":2,"score":-4,"last_activity_date":1695637088,"creation_date":1695624607,"question_id":77170402,"body_markdown":"Given an integer array nums and an integer val, remove all occurrences of val in nums in-place. The order of the elements may be changed. Then return the number of elements in nums which are not equal to val.\r\n\r\nConsider the number of elements in nums which are not equal to val be k, to get accepted, you need to do the following things:\r\n\r\nChange the array nums such that the first k elements of nums contain the elements which are not equal to val. The remaining elements of nums are not important as well as the size of nums.\r\nReturn k.\r\n\r\n\r\nInput: nums = [3,2,2,3], val = 3\r\nOutput: 2, nums = [2,2,_,_]\r\n\r\nInput: nums = [0,1,2,2,3,0,4,2], val = 2\r\nOutput: 5, nums = [0,1,4,0,3,_,_,_]\r\n\r\n\r\n\r\n\r\n\r\n```\r\nclass Solution {\r\n    public int removeElement(int[] nums, int val) {\r\n        int newIndex = 0;\r\n        for (int i = 0; i &lt; nums.length; i++){\r\n            if (nums[i] != val){\r\n                nums[newIndex] = nums[i];\r\n                newIndex++;\r\n\r\n            }\r\n        }\r\n        return newIndex;\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n1) With my code, what happens when val is at the last index? \r\ne.g [1,2,3,4,5,2,2], val = 2; \r\n\r\n\r\nIf &quot;val&quot; is at the last index, wouldn&#39;t my code just ignore it and leave it as where it is?","title":"I don&#39;t understand my code at the last index","body":"<p>Given an integer array nums and an integer val, remove all occurrences of val in nums in-place. The order of the elements may be changed. Then return the number of elements in nums which are not equal to val.</p>\n<p>Consider the number of elements in nums which are not equal to val be k, to get accepted, you need to do the following things:</p>\n<p>Change the array nums such that the first k elements of nums contain the elements which are not equal to val. The remaining elements of nums are not important as well as the size of nums.\nReturn k.</p>\n<p>Input: nums = [3,2,2,3], val = 3\nOutput: 2, nums = [2,2,<em>,</em>]</p>\n<p>Input: nums = [0,1,2,2,3,0,4,2], val = 2\nOutput: 5, nums = [0,1,4,0,3,<em>,</em>,_]</p>\n<pre><code>class Solution {\n    public int removeElement(int[] nums, int val) {\n        int newIndex = 0;\n        for (int i = 0; i &lt; nums.length; i++){\n            if (nums[i] != val){\n                nums[newIndex] = nums[i];\n                newIndex++;\n\n            }\n        }\n        return newIndex;\n    }\n}\n\n</code></pre>\n<ol>\n<li>With my code, what happens when val is at the last index?\ne.g [1,2,3,4,5,2,2], val = 2;</li>\n</ol>\n<p>If &quot;val&quot; is at the last index, wouldn't my code just ignore it and leave it as where it is?</p>\n"},{"tags":["java","spring-boot","code-coverage","jacoco","mockmvc"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1661863800,"post_id":73542635,"comment_id":129868628,"body_markdown":"You are sure the contoller is called? Have checked it with a debugger?","body":"You are sure the contoller is called? Have checked it with a debugger?"},{"owner":{"account_id":18624324,"reputation":186,"user_id":13573784,"display_name":"Vitor Nilson"},"score":0,"creation_date":1661863884,"post_id":73542635,"comment_id":129868660,"body_markdown":"Yep. I debbugged and my controller is called.","body":"Yep. I debbugged and my controller is called."},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1661863954,"post_id":73542635,"comment_id":129868686,"body_markdown":"Are the class and package declaration the same in test and main?","body":"Are the class and package declaration the same in test and main?"},{"owner":{"account_id":18624324,"reputation":186,"user_id":13573784,"display_name":"Vitor Nilson"},"score":0,"creation_date":1661864278,"post_id":73542635,"comment_id":129868825,"body_markdown":"I&#39;m sorry, i didn&#39;t get it. Did you mean if they are on same structure? Here is how they are: https://imgur.com/a/wSPXktl","body":"I&#39;m sorry, i didn&#39;t get it. Did you mean if they are on same structure? Here is how they are: <a href=\"https://imgur.com/a/wSPXktl\" rel=\"nofollow noreferrer\">imgur.com/a/wSPXktl</a>"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1661864886,"post_id":73542635,"comment_id":129869062,"body_markdown":"I am a little bit confused. Your Controller returns 201 but you check against 200 in your test? So the test should fail. You should use `MockMvcResultMatchers.status().isCreate()`","body":"I am a little bit confused. Your Controller returns 201 but you check against 200 in your test? So the test should fail. You should use <code>MockMvcResultMatchers.status().isCreate()</code>"},{"owner":{"account_id":18624324,"reputation":186,"user_id":13573784,"display_name":"Vitor Nilson"},"score":0,"creation_date":1661865392,"post_id":73542635,"comment_id":129869264,"body_markdown":"Yep. This project has some structural issues, and I&#39;ve just started doing maintenance on it. If you just look at RestController it gets confusing, but legacyService.crud(...) returns a ResponseEntity wtih 200 as status code. Therefore, it overrides the @ResponseStatus annotation in the controller. So just have faith that the tests are working well hehe.","body":"Yep. This project has some structural issues, and I&#39;ve just started doing maintenance on it. If you just look at RestController it gets confusing, but legacyService.crud(...) returns a ResponseEntity wtih 200 as status code. Therefore, it overrides the @ResponseStatus annotation in the controller. So just have faith that the tests are working well hehe."},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1661865504,"post_id":73542635,"comment_id":129869314,"body_markdown":"You are mocking a compete other function `Mockito.doReturn(&quot;OK&quot;).when(legacyService).request(`?","body":"You are mocking a compete other function <code>Mockito.doReturn(&quot;OK&quot;).when(legacyService).request(</code>?"},{"owner":{"account_id":18624324,"reputation":186,"user_id":13573784,"display_name":"Vitor Nilson"},"score":0,"creation_date":1661865622,"post_id":73542635,"comment_id":129869355,"body_markdown":"The `legacyService.crud(...)` calls the `legacyService.request(...)`. I need to Mock the inner method because `crud(...)` has a validation that need to be tested.","body":"The <code>legacyService.crud(...)</code> calls the <code>legacyService.request(...)</code>. I need to Mock the inner method because <code>crud(...)</code> has a validation that need to be tested."},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1661865703,"post_id":73542635,"comment_id":129869392,"body_markdown":"But that should not tested in a controller unittest. A unit testt should only test one unit","body":"But that should not tested in a controller unittest. A unit testt should only test one unit"},{"owner":{"account_id":18624324,"reputation":186,"user_id":13573784,"display_name":"Vitor Nilson"},"score":0,"creation_date":1661876732,"post_id":73542635,"comment_id":129874041,"body_markdown":"I agree with you, but there were a few reasons why the test was done this way. Now about the problem, any way to solve it?","body":"I agree with you, but there were a few reasons why the test was done this way. Now about the problem, any way to solve it?"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1661925601,"post_id":73542635,"comment_id":129884430,"body_markdown":"Have you tried in your IDE. Is the coverage shown there?","body":"Have you tried in your IDE. Is the coverage shown there?"}],"answers":[{"tags":[],"owner":{"account_id":557476,"reputation":553,"user_id":919930,"accept_rate":100,"display_name":"Slaven Glumac"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695637068,"creation_date":1695637068,"answer_id":77171795,"question_id":73542635,"body_markdown":"I had the same problem and I solved by replacing `org.junit.Test` with `org.junit.jupiter.api.Test`\r\n\r\n[![enter image description here][1]][1]\r\n\r\nHowever, I don&#39;t know why it worked.\r\n\r\n  [1]: https://i.stack.imgur.com/DQTlp.png","title":"Jacoco does not update completeness of MockMvc tests","body":"<p>I had the same problem and I solved by replacing <code>org.junit.Test</code> with <code>org.junit.jupiter.api.Test</code></p>\n<p><a href=\"https://i.stack.imgur.com/DQTlp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DQTlp.png\" alt=\"enter image description here\" /></a></p>\n<p>However, I don't know why it worked.</p>\n"}],"owner":{"account_id":18624324,"reputation":186,"user_id":13573784,"display_name":"Vitor Nilson"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":572,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695637068,"creation_date":1661863282,"question_id":73542635,"body_markdown":"I have a Spring Boot application with some RestControllers.\r\n\r\nI am testing the RestControllers With MockMvc to reproduce same behaviour as the end user.\r\n\r\nThe problem is that Jacoco does not update completeness coverage of those tests:\r\n\r\nJacocoReport:\r\n\r\n_My testes were made to **LegacyController**_\r\n[![enter image description here][1]][1]\r\n\r\n\r\nLegacyController has a simple strucuture, like this (I need to modify because my company&#39;s policy):\r\n\r\n```java\r\n  @GetMapping(&quot;/{thing}/{thing2}&quot;)\r\n    @ResponseStatus(value = HttpStatus.CREATED)\r\n    public ResponseEntity&lt;Object&gt; doSomeThing(@PathVariable(&quot;thing&quot;) String thing,\r\n                                                     @PathVariable(&quot;service&quot;) String thing2,\r\n                                                     @RequestBody(required = false) String boody,\r\n                                                     @RequestHeader(&quot;Header1&quot;) String Header1,\r\n                                                     @RequestHeader(&quot;Content-Type&quot;) String contentType,\r\n                                                     @RequestParam(value = &quot;OtherThing&quot;) String OtherThing,\r\n                                                     @RequestParam(value = &quot;OtherThing2&quot;, defaultValue = &quot;defaultValue&quot;, required = false) String OtherThing2) {\r\n\r\n        return legacyService.crud(thing, thing2, request, Header1, OtherThing, outputType, OtherThing2);\r\n    }\r\n```\r\n\r\n\r\nAnd My tests do something like this:\r\n\r\n```java\r\n@RunWith(SpringRunner.class)\r\n@Import(LegacyController.class)\r\n@SpringBootTest\r\n@AutoConfigureMockMvc\r\n@WebAppConfiguration\r\n@ActiveProfiles(&quot;test&quot;)\r\npublic class LegacyControllerTest {\r\n\r\n    private MockMvc mockMvc;\r\n\r\n    @MockBean\r\n    private LegacyService legacyService;\r\n\r\n\r\n    @Autowired\r\n    private WebApplicationContext context;\r\n\r\n    @Before\r\n    public void setUp(){\r\n        this.mockMvc = MockMvcBuilders.webAppContextSetup(context).build();\r\n    }\r\n\r\n    @Test\r\n    public void givenGetJson_WhenOffsetPageIsPresent_ThenReturnsOk() throws Exception {\r\n        Mockito.doReturn(&quot;OK&quot;).when(legacyService).request(Mockito.any(), Mockito.anyString(), Mockito.any(TokenDTO.class), Mockito.any(HttpHeaders.class));\r\n       \r\n\r\n        mockMvc.perform(MockMvcRequestBuilders\r\n                .get(&quot;/gateway/v1/{thing}/{thing2}&quot;, &quot;value-thing&quot;, &quot;value-thing2&quot;)\r\n\r\n                .header(&quot;Content-Type&quot;, &quot;application/json&quot;)\r\n\r\n                .header(&quot;Header1&quot;, &quot;Header1 value&quot;)\r\n                .queryParam(&quot;OtherThing&quot;, &quot;OtherThing value&quot;)\r\n                .queryParam(&quot;OtherThing2&quot;, &quot;OtherThing2 Value&quot;)\r\n                .content(&quot;A BODY GOES HERE&quot;))\r\n\r\n                .andDo(MockMvcResultHandlers.print())\r\n                .andExpect(MockMvcResultMatchers.status().isOk());\r\n\r\n    }\r\n    }\r\n\r\n```\r\n\r\nHere are the pom.xml\r\n\r\n```xml\r\n\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.5.2&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt;\r\n\t\t&lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\r\n\r\n ***HIDDEN DATA****\r\n\r\n&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.projectreactor&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;reactor-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;junit&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n*** MORE HIDDEN DATA ***\r\n\r\n\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.0.0-M7&lt;/version&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.jacoco&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;0.8.8&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;**/constant/*&lt;/exclude&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;**/dto/*&lt;/exclude&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;**/enuns/*&lt;/exclude&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;**/exception/*&lt;/exclude&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;**/ApiApplication.class&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;prepare-agent&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;id&gt;generate-code-coverage-report&lt;/id&gt;\r\n\t\t\t\t\t\t&lt;phase&gt;test&lt;/phase&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;report&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\r\n\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nMy tests works fine, do what it was built to do.\r\n\r\nThe problem is the code coverage does not changing.\r\n\r\n  [1]: https://i.stack.imgur.com/2aPP9.png","title":"Jacoco does not update completeness of MockMvc tests","body":"<p>I have a Spring Boot application with some RestControllers.</p>\n<p>I am testing the RestControllers With MockMvc to reproduce same behaviour as the end user.</p>\n<p>The problem is that Jacoco does not update completeness coverage of those tests:</p>\n<p>JacocoReport:</p>\n<p><em>My testes were made to <strong>LegacyController</strong></em>\n<a href=\"https://i.stack.imgur.com/2aPP9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2aPP9.png\" alt=\"enter image description here\" /></a></p>\n<p>LegacyController has a simple strucuture, like this (I need to modify because my company's policy):</p>\n<pre class=\"lang-java prettyprint-override\"><code>  @GetMapping(&quot;/{thing}/{thing2}&quot;)\n    @ResponseStatus(value = HttpStatus.CREATED)\n    public ResponseEntity&lt;Object&gt; doSomeThing(@PathVariable(&quot;thing&quot;) String thing,\n                                                     @PathVariable(&quot;service&quot;) String thing2,\n                                                     @RequestBody(required = false) String boody,\n                                                     @RequestHeader(&quot;Header1&quot;) String Header1,\n                                                     @RequestHeader(&quot;Content-Type&quot;) String contentType,\n                                                     @RequestParam(value = &quot;OtherThing&quot;) String OtherThing,\n                                                     @RequestParam(value = &quot;OtherThing2&quot;, defaultValue = &quot;defaultValue&quot;, required = false) String OtherThing2) {\n\n        return legacyService.crud(thing, thing2, request, Header1, OtherThing, outputType, OtherThing2);\n    }\n</code></pre>\n<p>And My tests do something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RunWith(SpringRunner.class)\n@Import(LegacyController.class)\n@SpringBootTest\n@AutoConfigureMockMvc\n@WebAppConfiguration\n@ActiveProfiles(&quot;test&quot;)\npublic class LegacyControllerTest {\n\n    private MockMvc mockMvc;\n\n    @MockBean\n    private LegacyService legacyService;\n\n\n    @Autowired\n    private WebApplicationContext context;\n\n    @Before\n    public void setUp(){\n        this.mockMvc = MockMvcBuilders.webAppContextSetup(context).build();\n    }\n\n    @Test\n    public void givenGetJson_WhenOffsetPageIsPresent_ThenReturnsOk() throws Exception {\n        Mockito.doReturn(&quot;OK&quot;).when(legacyService).request(Mockito.any(), Mockito.anyString(), Mockito.any(TokenDTO.class), Mockito.any(HttpHeaders.class));\n       \n\n        mockMvc.perform(MockMvcRequestBuilders\n                .get(&quot;/gateway/v1/{thing}/{thing2}&quot;, &quot;value-thing&quot;, &quot;value-thing2&quot;)\n\n                .header(&quot;Content-Type&quot;, &quot;application/json&quot;)\n\n                .header(&quot;Header1&quot;, &quot;Header1 value&quot;)\n                .queryParam(&quot;OtherThing&quot;, &quot;OtherThing value&quot;)\n                .queryParam(&quot;OtherThing2&quot;, &quot;OtherThing2 Value&quot;)\n                .content(&quot;A BODY GOES HERE&quot;))\n\n                .andDo(MockMvcResultHandlers.print())\n                .andExpect(MockMvcResultMatchers.status().isOk());\n\n    }\n    }\n\n</code></pre>\n<p>Here are the pom.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.5.2&lt;/version&gt;\n        &lt;relativePath/&gt;\n        &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n\n\n ***HIDDEN DATA****\n\n&lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.projectreactor&lt;/groupId&gt;\n            &lt;artifactId&gt;reactor-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n*** MORE HIDDEN DATA ***\n\n\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.0.0-M7&lt;/version&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n                &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;0.8.8&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;**/constant/*&lt;/exclude&gt;\n                        &lt;exclude&gt;**/dto/*&lt;/exclude&gt;\n                        &lt;exclude&gt;**/enuns/*&lt;/exclude&gt;\n                        &lt;exclude&gt;**/exception/*&lt;/exclude&gt;\n                        &lt;exclude&gt;**/ApiApplication.class&lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;prepare-agent&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;generate-code-coverage-report&lt;/id&gt;\n                        &lt;phase&gt;test&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;report&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n\n\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>My tests works fine, do what it was built to do.</p>\n<p>The problem is the code coverage does not changing.</p>\n"},{"tags":["java","android","dagger-hilt"],"comments":[{"owner":{"account_id":10446401,"reputation":406,"user_id":7701297,"display_name":"zmunm"},"score":0,"creation_date":1695636512,"post_id":77171686,"comment_id":136046174,"body_markdown":"It&#39;s impossible. Anything installed from a higher-level component cannot be removed from a lower-level component. If you want to inject multiple instances of the same type, you must use a qualifier.","body":"It&#39;s impossible. Anything installed from a higher-level component cannot be removed from a lower-level component. If you want to inject multiple instances of the same type, you must use a qualifier."},{"owner":{"account_id":7740136,"reputation":672,"user_id":5860233,"display_name":"Tajuddin Khandaker"},"score":0,"creation_date":1695636674,"post_id":77171686,"comment_id":136046208,"body_markdown":"@bambam you are right updated ... please now focus on the point","body":"@bambam you are right updated ... please now focus on the point"}],"answers":[{"tags":[],"owner":{"account_id":10446401,"reputation":406,"user_id":7701297,"display_name":"zmunm"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695637026,"creation_date":1695637026,"answer_id":77171790,"question_id":77171686,"body_markdown":"I think you can install it individually.\r\n\r\n    \r\n    @Module\r\n    @InstallIn(ActivityComponent.class)\r\n    public absrtact class MyHiltModule {\r\n        @Binds\r\n        @SomeQualifier\r\n        abstract SomeInterface bindSomething(SomeImpl someimpl); =======&gt; for activity scoped lifecycle\r\n    }\r\n\r\n    @Module\r\n    @InstallIn(SingletonComponent.class)\r\n    public absrtact class MyHiltModule2 {\r\n        @Binds\r\n        @AnotherQualifier\r\n        abstract SomeInterface binsAnotherThing(AnotherImpl anotherImpl); ===&gt; for application scope lifecycle\r\n    }\r\n","title":"ActivityComponent and SingletonComponent relations together in hilt module class","body":"<p>I think you can install it individually.</p>\n<pre><code>@Module\n@InstallIn(ActivityComponent.class)\npublic absrtact class MyHiltModule {\n    @Binds\n    @SomeQualifier\n    abstract SomeInterface bindSomething(SomeImpl someimpl); =======&gt; for activity scoped lifecycle\n}\n\n@Module\n@InstallIn(SingletonComponent.class)\npublic absrtact class MyHiltModule2 {\n    @Binds\n    @AnotherQualifier\n    abstract SomeInterface binsAnotherThing(AnotherImpl anotherImpl); ===&gt; for application scope lifecycle\n}\n</code></pre>\n"}],"owner":{"account_id":7740136,"reputation":672,"user_id":5860233,"display_name":"Tajuddin Khandaker"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77171790,"answer_count":1,"score":1,"last_activity_date":1695637026,"creation_date":1695636199,"question_id":77171686,"body_markdown":"I have some binds or provides relations for ActivityComponent and some for SingletonComponent in one Hilt Module class .... how could i achieve that?\r\n\r\nExample:\r\n\r\n    @Module\r\n    @InstallIn({ActivityComponent.class, SingletonComponent.class})\r\n    public absrtact class MyHiltModule {\r\n       @Binds\r\n       @SomeQualifier\r\n       abstract SomeInterface bindSomething(SomeImpl someimpl); =======&gt; for activity scoped lifecycle\r\n       \r\n\r\n       @Binds\r\n       @AnotherQualifier\r\n       abstract SomeInterface binsAnotherThing(AnotherImpl anotherImpl); ===&gt; for application scope lifecycle\r\n    }","title":"ActivityComponent and SingletonComponent relations together in hilt module class","body":"<p>I have some binds or provides relations for ActivityComponent and some for SingletonComponent in one Hilt Module class .... how could i achieve that?</p>\n<p>Example:</p>\n<pre><code>@Module\n@InstallIn({ActivityComponent.class, SingletonComponent.class})\npublic absrtact class MyHiltModule {\n   @Binds\n   @SomeQualifier\n   abstract SomeInterface bindSomething(SomeImpl someimpl); =======&gt; for activity scoped lifecycle\n   \n\n   @Binds\n   @AnotherQualifier\n   abstract SomeInterface binsAnotherThing(AnotherImpl anotherImpl); ===&gt; for application scope lifecycle\n}\n</code></pre>\n"},{"tags":["java","spring-boot","apache-camel","ibm-mq"],"answers":[{"comments":[{"owner":{"account_id":2516329,"reputation":2318,"user_id":2187694,"display_name":"Prabu"},"score":0,"creation_date":1695096176,"post_id":77120619,"comment_id":135974817,"body_markdown":"Its not working. Getting the following error, when I add   \n \n connectionFactory.setMQConnectionOptions(MQConstants.MQOO_INPUT_EXCLUSIVE);\n\n\n  Could not refresh JMS Connection for destination &#39;TESTQ&#39; - retrying using FixedBackOff{interval=5000, currentAttempts=0, maxAttempts=unlimited}. Cause: JMSWMQ0018: Failed to connect to queue manager &#39;QM1&#39; with connection mode &#39;Client&#39; and host name &#39;localhost(1414)&#39;.; nested exception is com.ibm.mq.MQException: JMSCMQ0001: IBM MQ call failed with compcode &#39;2&#39; (&#39;MQCC_FAILED&#39;) reason &#39;2046&#39; (&#39;MQRC_OPTIONS_ERROR&#39;).","body":"Its not working. Getting the following error, when I add       connectionFactory.setMQConnectionOptions(MQConstants.MQOO_IN&zwnj;&#8203;PUT_EXCLUSIVE);     Could not refresh JMS Connection for destination &#39;TESTQ&#39; - retrying using FixedBackOff{interval=5000, currentAttempts=0, maxAttempts=unlimited}. Cause: JMSWMQ0018: Failed to connect to queue manager &#39;QM1&#39; with connection mode &#39;Client&#39; and host name &#39;localhost(1414)&#39;.; nested exception is com.ibm.mq.MQException: JMSCMQ0001: IBM MQ call failed with compcode &#39;2&#39; (&#39;MQCC_FAILED&#39;) reason &#39;2046&#39; (&#39;MQRC_OPTIONS_ERROR&#39;)."},{"owner":{"account_id":2516329,"reputation":2318,"user_id":2187694,"display_name":"Prabu"},"score":1,"creation_date":1695147795,"post_id":77120619,"comment_id":135984234,"body_markdown":"Thanks for the help and detailed explanation. Was hoping to handle it with camel way of RouterBuilder option itself. Changing to MQQueue based session handling will be too much of change for the application we handle. \n\nIs there any working example available for consumer setup to continuously listening to messages from queue using  MQQueue approach?","body":"Thanks for the help and detailed explanation. Was hoping to handle it with camel way of RouterBuilder option itself. Changing to MQQueue based session handling will be too much of change for the application we handle.   Is there any working example available for consumer setup to continuously listening to messages from queue using  MQQueue approach?"},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1695292016,"post_id":77120619,"comment_id":136006326,"body_markdown":"@Prabu There is an working example here : https://stackoverflow.com/questions/1526213/ibm-mq-message-listener","body":"@Prabu There is an working example here : <a href=\"https://stackoverflow.com/questions/1526213/ibm-mq-message-listener\" title=\"ibm mq message listener\">stackoverflow.com/questions/1526213/ibm-mq-message-listener</a>"},{"owner":{"account_id":2516329,"reputation":2318,"user_id":2187694,"display_name":"Prabu"},"score":1,"creation_date":1695624226,"post_id":77120619,"comment_id":136043886,"body_markdown":"Though the question was specific to creating exclusive connection through camel MQQueueConnectionFactory &amp; RouteBuilder, you answer helps to understand that it can&#39;t be done. Hence happy accept it as more helpful answer","body":"Though the question was specific to creating exclusive connection through camel MQQueueConnectionFactory &amp; RouteBuilder, you answer helps to understand that it can&#39;t be done. Hence happy accept it as more helpful answer"}],"tags":[],"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695105608,"creation_date":1694929447,"answer_id":77120619,"question_id":77099201,"body_markdown":"**Update:** I checked from on my side that setting `MQConstants.MQOO_INPUT_EXCLUSIVE` (package - **com.ibm.mq.constants**) in the method `setMQConnectionOptions(int cTagOpt)` from `MQQueueConnectionFactory` doesn&#39;t work at all and throws error.\r\n\r\nSo, It&#39;s impossible to set the `MQOO_INPUT_EXCLUSIVE` via `MQQueueConnectionFactory`.\r\n\r\nI have some useful links which will help you to understand why it&#39;s impossible and check if this helps.\r\n\r\n- [Open Input exclusive option (MQC.MQOO_INPUT_EXCLUSIVE )][1] \r\n- [Setting MQ exclusive-read client properties in JMS][2]\r\n\r\nOnly the option that&#39;s available to you is to access queue from queueManager with the openOption as `MQOO_INPUT_EXCLUSIVE`\r\n\r\n    MQQueue queue = queueManager.accessQueue(&quot;name-of-the-queue&quot;, MQConstants.MQOO_INPUT_EXCLUSIVE);\r\n\r\n\r\nRefer to Java Docs on MQConstants [here][3].\r\n\r\n\r\n  [1]: http://www.mqseries.net/phpBB/viewtopic.php?t=55218&amp;sid=26556302782b5df6fbf3633524bc8141\r\n  [2]: http://www.mqseries.net/phpBB2/viewtopic.php?p=286663\r\n  [3]: https://www.ibm.com/docs/api/v1/content/SSFKSJ_9.2.0/com.ibm.mq.javadoc.doc/WMQJavaClasses/com/ibm/mq/constants/MQConstants.html","title":"How to set MQOO_INPUT_EXCLUSIVE option for IBM MQ Connection Factory in Camel Consumer with Spring boot?","body":"<p><strong>Update:</strong> I checked from on my side that setting <code>MQConstants.MQOO_INPUT_EXCLUSIVE</code> (package - <strong>com.ibm.mq.constants</strong>) in the method <code>setMQConnectionOptions(int cTagOpt)</code> from <code>MQQueueConnectionFactory</code> doesn't work at all and throws error.</p>\n<p>So, It's impossible to set the <code>MQOO_INPUT_EXCLUSIVE</code> via <code>MQQueueConnectionFactory</code>.</p>\n<p>I have some useful links which will help you to understand why it's impossible and check if this helps.</p>\n<ul>\n<li><a href=\"http://www.mqseries.net/phpBB/viewtopic.php?t=55218&amp;sid=26556302782b5df6fbf3633524bc8141\" rel=\"nofollow noreferrer\">Open Input exclusive option (MQC.MQOO_INPUT_EXCLUSIVE )</a></li>\n<li><a href=\"http://www.mqseries.net/phpBB2/viewtopic.php?p=286663\" rel=\"nofollow noreferrer\">Setting MQ exclusive-read client properties in JMS</a></li>\n</ul>\n<p>Only the option that's available to you is to access queue from queueManager with the openOption as <code>MQOO_INPUT_EXCLUSIVE</code></p>\n<pre><code>MQQueue queue = queueManager.accessQueue(&quot;name-of-the-queue&quot;, MQConstants.MQOO_INPUT_EXCLUSIVE);\n</code></pre>\n<p>Refer to Java Docs on MQConstants <a href=\"https://www.ibm.com/docs/api/v1/content/SSFKSJ_9.2.0/com.ibm.mq.javadoc.doc/WMQJavaClasses/com/ibm/mq/constants/MQConstants.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}],"owner":{"account_id":2516329,"reputation":2318,"user_id":2187694,"display_name":"Prabu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":212,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77120619,"answer_count":1,"score":2,"last_activity_date":1695637012,"creation_date":1694625271,"question_id":77099201,"body_markdown":"I am trying to setup spring boot application that needs to consume messages from an IBM MQ queue while ensuring that only one instance of the application receives all messages to maintain message ordering. To achieve this, I need to configure the Camel consumer to open a connection with the MQOO_INPUT_EXCLUSIVE option enabled.\r\n\r\nI have already set up the JmsComponent, MQQueueConnectionFactory and RouteBuilder in my application, but I couldn&#39;t find the property key and value to enable the MQOO_INPUT_EXCLUSIVE option for the connection via MQQueueConnectionFactory.\r\n\r\nTried this approach by changing the Default input open option in the queue setting and it works, but is there a way to achieve this by passing this property while opening connection? \r\n\r\nI have tried searching online for information on how to set this option, but I haven&#39;t been able to find a solution,the results were either not relevant to camel based configuration or those were outdated. Can anyone help me with this? Any help would be greatly appreciated!","title":"How to set MQOO_INPUT_EXCLUSIVE option for IBM MQ Connection Factory in Camel Consumer with Spring boot?","body":"<p>I am trying to setup spring boot application that needs to consume messages from an IBM MQ queue while ensuring that only one instance of the application receives all messages to maintain message ordering. To achieve this, I need to configure the Camel consumer to open a connection with the MQOO_INPUT_EXCLUSIVE option enabled.</p>\n<p>I have already set up the JmsComponent, MQQueueConnectionFactory and RouteBuilder in my application, but I couldn't find the property key and value to enable the MQOO_INPUT_EXCLUSIVE option for the connection via MQQueueConnectionFactory.</p>\n<p>Tried this approach by changing the Default input open option in the queue setting and it works, but is there a way to achieve this by passing this property while opening connection?</p>\n<p>I have tried searching online for information on how to set this option, but I haven't been able to find a solution,the results were either not relevant to camel based configuration or those were outdated. Can anyone help me with this? Any help would be greatly appreciated!</p>\n"},{"tags":["java","android","kotlin","kotlin-script"],"answers":[{"tags":[],"owner":{"account_id":3517713,"reputation":1240,"user_id":2940733,"display_name":"Amin Mousavi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695409047,"creation_date":1695409047,"answer_id":77160105,"question_id":77159765,"body_markdown":"As the error is saying, you have duplicated classes in your modules. It means a class is included in two or more of your added dependencies. You should check the dependencies of these modules and use `exclude` to exclude duplicated dependencies from them so that only one of your dependencies contains that duplicated dependency.\r\n&lt;br&gt;You can read more about Gradle&#39;s exclude [here][1].\r\n&lt;br&gt; Also, you can use Gradle&#39;s [dependencies][2] command to generate a tree of all of your project&#39;s dependencies.\r\n\r\n&lt;p&gt;Note that there are other ways to resolve this problem, Just search for &#39;Removing duplicated classes in gradle modules&#39; or something like this :)\r\n\r\n\r\n  [1]: https://docs.gradle.org/current/kotlin-dsl/gradle/org.gradle.api.artifacts/-module-dependency/exclude.html\r\n  [2]: https://docs.gradle.org/current/userguide/viewing_debugging_dependencies.html","title":"How to run kotlin script in the scripting host of Android app","body":"<p>As the error is saying, you have duplicated classes in your modules. It means a class is included in two or more of your added dependencies. You should check the dependencies of these modules and use <code>exclude</code> to exclude duplicated dependencies from them so that only one of your dependencies contains that duplicated dependency.\n<br>You can read more about Gradle's exclude <a href=\"https://docs.gradle.org/current/kotlin-dsl/gradle/org.gradle.api.artifacts/-module-dependency/exclude.html\" rel=\"nofollow noreferrer\">here</a>.\n<br> Also, you can use Gradle's <a href=\"https://docs.gradle.org/current/userguide/viewing_debugging_dependencies.html\" rel=\"nofollow noreferrer\">dependencies</a> command to generate a tree of all of your project's dependencies.</p>\n<p>Note that there are other ways to resolve this problem, Just search for 'Removing duplicated classes in gradle modules' or something like this :)\n"}],"owner":{"account_id":9979751,"reputation":31,"user_id":7383082,"display_name":"Taylor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695637000,"creation_date":1695405237,"question_id":77159765,"body_markdown":"I want to run kotlin script(in string form) within Android:\r\n```kotlin\r\nclass MainActivity : AppCompatActivity() {\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        val engine = KotlinJsr223DefaultScriptEngineFactory().getScriptEngine()\r\n        engine.eval(&quot;val x =3&quot;)\r\n        val result = engine.eval(&quot;x+2&quot;)\r\n        Log.d(&quot;test&quot;, &quot;onCreate: result=$result&quot;)\r\n    }\r\n}\r\n```\r\n\r\nthe dependency i added:\r\n```\r\nimplementation &quot;org.jetbrains.kotlin:kotlin-scripting-jsr223:1.4.0&quot;\r\nimplementation &quot;org.jetbrains.kotlin:kotlin-script-runtime:1.4.0&quot;\r\nimplementation &quot;org.jetbrains.kotlin:kotlin-compiler-embeddable:1.4.0&quot;\r\n```\r\nBut i cant compile the code,the error is &quot;Duplicate class&quot; :\r\n```\r\nDuplicate class org.jetbrains.kotlin.daemon.common.WallTotalProfiler found in modules jetified-kotlin-daemon-client-1.4.0 (org.jetbrains.kotlin:kotlin-daemon-client:1.4.0) and jetified-kotlin-daemon-embeddable-1.4.0 (org.jetbrains.kotlin:kotlin-daemon-embeddable:1.4.0)   \r\n```\r\n\r\nIf i remove the dependency of kotlin-compiler-embeddable, Duplicate class error is gone.But a new error occur:\r\n```\r\nCannot access &#39;javax.script.ScriptEngineFactory&#39; which is a supertype of &#39;kotlin.script.experimental.jsr223.KotlinJsr223DefaultScriptEngineFactory&#39;. Check your module classpath for missing or conflicting dependencies\r\n```\r\n\r\n\r\nHow can i make it?","title":"How to run kotlin script in the scripting host of Android app","body":"<p>I want to run kotlin script(in string form) within Android:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>class MainActivity : AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        val engine = KotlinJsr223DefaultScriptEngineFactory().getScriptEngine()\n        engine.eval(&quot;val x =3&quot;)\n        val result = engine.eval(&quot;x+2&quot;)\n        Log.d(&quot;test&quot;, &quot;onCreate: result=$result&quot;)\n    }\n}\n</code></pre>\n<p>the dependency i added:</p>\n<pre><code>implementation &quot;org.jetbrains.kotlin:kotlin-scripting-jsr223:1.4.0&quot;\nimplementation &quot;org.jetbrains.kotlin:kotlin-script-runtime:1.4.0&quot;\nimplementation &quot;org.jetbrains.kotlin:kotlin-compiler-embeddable:1.4.0&quot;\n</code></pre>\n<p>But i cant compile the code,the error is &quot;Duplicate class&quot; :</p>\n<pre><code>Duplicate class org.jetbrains.kotlin.daemon.common.WallTotalProfiler found in modules jetified-kotlin-daemon-client-1.4.0 (org.jetbrains.kotlin:kotlin-daemon-client:1.4.0) and jetified-kotlin-daemon-embeddable-1.4.0 (org.jetbrains.kotlin:kotlin-daemon-embeddable:1.4.0)   \n</code></pre>\n<p>If i remove the dependency of kotlin-compiler-embeddable, Duplicate class error is gone.But a new error occur:</p>\n<pre><code>Cannot access 'javax.script.ScriptEngineFactory' which is a supertype of 'kotlin.script.experimental.jsr223.KotlinJsr223DefaultScriptEngineFactory'. Check your module classpath for missing or conflicting dependencies\n</code></pre>\n<p>How can i make it?</p>\n"},{"tags":["java","android","button","alarmmanager"],"comments":[{"owner":{"account_id":6979173,"reputation":942,"user_id":6576302,"display_name":"C.F.G"},"score":0,"creation_date":1695650160,"post_id":77171744,"comment_id":136048988,"body_markdown":"Have you tried this using service?","body":"Have you tried this using service?"},{"owner":{"account_id":6979173,"reputation":942,"user_id":6576302,"display_name":"C.F.G"},"score":0,"creation_date":1695650394,"post_id":77171744,"comment_id":136049049,"body_markdown":"Just for local use (not persistence) https://stackoverflow.com/q/41368127/6576302","body":"Just for local use (not persistence) <a href=\"https://stackoverflow.com/q/41368127/6576302\">stackoverflow.com/q/41368127/6576302</a>"}],"owner":{"account_id":23726554,"reputation":21,"user_id":17746378,"display_name":"pradeep72767"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695636713,"creation_date":1695636713,"question_id":77171744,"body_markdown":"i am working on project in that i am use alarm manager , i am setting alarm which will ring on 3.40 pm time will show on button , on 3.40 set alarm button need to gone and cancel  button need to visible.\r\n\r\nI tried many options those are not working.\r\nhelp me . \r\n\r\n[![this is the screen shot before alarm set ](https://i.stack.imgur.com/rjw1T.jpg)](https://i.stack.imgur.com/rjw1T.jpg)[![this is after alarm set ](https://i.stack.imgur.com/K407R.jpg)](https://i.stack.imgur.com/K407R.jpg)\r\n\r\n\r\non 3.40 PM that button need to gone and cancel button need to visible","title":"Set button visibility gone and visible on selected time for alarm?","body":"<p>i am working on project in that i am use alarm manager , i am setting alarm which will ring on 3.40 pm time will show on button , on 3.40 set alarm button need to gone and cancel  button need to visible.</p>\n<p>I tried many options those are not working.\nhelp me .</p>\n<p><a href=\"https://i.stack.imgur.com/rjw1T.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rjw1T.jpg\" alt=\"this is the screen shot before alarm set \" /></a><a href=\"https://i.stack.imgur.com/K407R.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/K407R.jpg\" alt=\"this is after alarm set \" /></a></p>\n<p>on 3.40 PM that button need to gone and cancel button need to visible</p>\n"},{"tags":["java","java-8"],"comments":[{"owner":{"account_id":1463176,"reputation":4443,"user_id":1376885,"accept_rate":34,"display_name":"Viktor M."},"score":0,"creation_date":1442588062,"post_id":32654929,"comment_id":53156624,"body_markdown":"I need to move on next item in loop.","body":"I need to move on next item in loop."},{"owner":{"account_id":3562114,"reputation":1493,"user_id":2974766,"accept_rate":73,"display_name":"DoubleDouble"},"score":2,"creation_date":1442588131,"post_id":32654929,"comment_id":53156684,"body_markdown":"His point is, with the code you&#39;ve shown, not having the `continue` would still move onto the next item without any functional changes anyway.","body":"His point is, with the code you&#39;ve shown, not having the <code>continue</code> would still move onto the next item without any functional changes anyway."},{"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":0,"creation_date":1442588534,"post_id":32654929,"comment_id":53156974,"body_markdown":"If the goal is to avoid executing lines coming after the call to continue, and that you&#39;re not showing us, just put all these lines in an `else` block. If there is nothing after `continue`, then drop the if block and the continue: they&#39;re useless.","body":"If the goal is to avoid executing lines coming after the call to continue, and that you&#39;re not showing us, just put all these lines in an <code>else</code> block. If there is nothing after <code>continue</code>, then drop the if block and the continue: they&#39;re useless."}],"answers":[{"tags":[],"owner":{"account_id":6388289,"reputation":35625,"user_id":4955425,"display_name":"sstan"},"comment_count":0,"down_vote_count":0,"up_vote_count":449,"is_accepted":true,"score":449,"last_activity_date":1510667777,"creation_date":1442588103,"answer_id":32655038,"question_id":32654929,"body_markdown":"Using `return;` will work just fine.  It will not prevent the full loop from completing.  It will only stop executing the current iteration of the `forEach` loop.\r\n\r\nTry the following little program:\r\n\r\n    public static void main(String[] args) {\r\n        ArrayList&lt;String&gt; stringList = new ArrayList&lt;&gt;();\r\n        stringList.add(&quot;a&quot;);\r\n        stringList.add(&quot;b&quot;);\r\n        stringList.add(&quot;c&quot;);\r\n\r\n        stringList.stream().forEach(str -&gt; {\r\n            if (str.equals(&quot;b&quot;)) return; // only skips this iteration.\r\n            \r\n            System.out.println(str);\r\n        });\r\n    }\r\n\r\nOutput:\r\n\r\n&gt; a  \r\n&gt; c\r\n\r\nNotice how the `return;` is executed for the `b` iteration, but `c` prints on the following iteration just fine.\r\n\r\n&lt;h2&gt;Why does this work?&lt;/h2&gt;\r\n\r\nThe reason the behavior seems unintuitive at first is because we are used to the `return` statement interrupting the execution of the whole method.  So in this case, we expect the `main` method execution as a whole to be halted.\r\n\r\nHowever, what needs to be understood is that a lambda expression, such as:\r\n\r\n    str -&gt; {\r\n        if (str.equals(&quot;b&quot;)) return;\r\n\r\n        System.out.println(str);\r\n    }\r\n\r\n... really needs to be considered as its own distinct &quot;method&quot;, completely separate from the `main` method, despite it being conveniently located within it. So really, the `return` statement only halts the execution of the lambda expression.\r\n\r\nThe second thing that needs to be understood is that:\r\n\r\n    stringList.stream().forEach()\r\n\r\n... is really just a normal loop under the covers that executes the lambda expression for every iteration.\r\n\r\nWith these 2 points in mind, the above code can be rewritten in the following equivalent way (for educational purposes only):\r\n\r\n    public static void main(String[] args) {\r\n        ArrayList&lt;String&gt; stringList = new ArrayList&lt;&gt;();\r\n        stringList.add(&quot;a&quot;);\r\n        stringList.add(&quot;b&quot;);\r\n        stringList.add(&quot;c&quot;);\r\n\r\n        for(String s : stringList) {\r\n            lambdaExpressionEquivalent(s);\r\n        }\r\n    }\r\n\r\n    private static void lambdaExpressionEquivalent(String str) {\r\n        if (str.equals(&quot;b&quot;)) {\r\n            return;\r\n        }\r\n        \r\n        System.out.println(str);\r\n    }\r\n\r\nWith this &quot;less magic&quot; code equivalent, the scope of the `return` statement becomes more apparent.\r\n","title":"Move to next item using Java 8 foreach loop in stream","body":"<p>Using <code>return;</code> will work just fine.  It will not prevent the full loop from completing.  It will only stop executing the current iteration of the <code>forEach</code> loop.</p>\n\n<p>Try the following little program:</p>\n\n<pre><code>public static void main(String[] args) {\n    ArrayList&lt;String&gt; stringList = new ArrayList&lt;&gt;();\n    stringList.add(\"a\");\n    stringList.add(\"b\");\n    stringList.add(\"c\");\n\n    stringList.stream().forEach(str -&gt; {\n        if (str.equals(\"b\")) return; // only skips this iteration.\n\n        System.out.println(str);\n    });\n}\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>a<br>\n  c</p>\n</blockquote>\n\n<p>Notice how the <code>return;</code> is executed for the <code>b</code> iteration, but <code>c</code> prints on the following iteration just fine.</p>\n\n<h2>Why does this work?</h2>\n\n<p>The reason the behavior seems unintuitive at first is because we are used to the <code>return</code> statement interrupting the execution of the whole method.  So in this case, we expect the <code>main</code> method execution as a whole to be halted.</p>\n\n<p>However, what needs to be understood is that a lambda expression, such as:</p>\n\n<pre><code>str -&gt; {\n    if (str.equals(\"b\")) return;\n\n    System.out.println(str);\n}\n</code></pre>\n\n<p>... really needs to be considered as its own distinct \"method\", completely separate from the <code>main</code> method, despite it being conveniently located within it. So really, the <code>return</code> statement only halts the execution of the lambda expression.</p>\n\n<p>The second thing that needs to be understood is that:</p>\n\n<pre><code>stringList.stream().forEach()\n</code></pre>\n\n<p>... is really just a normal loop under the covers that executes the lambda expression for every iteration.</p>\n\n<p>With these 2 points in mind, the above code can be rewritten in the following equivalent way (for educational purposes only):</p>\n\n<pre><code>public static void main(String[] args) {\n    ArrayList&lt;String&gt; stringList = new ArrayList&lt;&gt;();\n    stringList.add(\"a\");\n    stringList.add(\"b\");\n    stringList.add(\"c\");\n\n    for(String s : stringList) {\n        lambdaExpressionEquivalent(s);\n    }\n}\n\nprivate static void lambdaExpressionEquivalent(String str) {\n    if (str.equals(\"b\")) {\n        return;\n    }\n\n    System.out.println(str);\n}\n</code></pre>\n\n<p>With this \"less magic\" code equivalent, the scope of the <code>return</code> statement becomes more apparent.</p>\n"},{"tags":[],"owner":{"display_name":"user377628"},"comment_count":0,"down_vote_count":4,"up_vote_count":4,"is_accepted":false,"score":0,"last_activity_date":1442588165,"creation_date":1442588165,"answer_id":32655060,"question_id":32654929,"body_markdown":"You can use a simple `if` statement instead of continue. So instead of the way you have your code, you can try:\r\n\r\n    try(Stream&lt;String&gt; lines = Files.lines(path, StandardCharsets.ISO_8859_1)){\r\n                filteredLines = lines.filter(...).foreach(line -&gt; {\r\n               ...\r\n               if(!...) {\r\n                  // Code you want to run\r\n               }\r\n               // Once the code runs, it will continue anyway\r\n        });\r\n    }\r\n\r\nThe predicate in the if statement will just be the opposite of the predicate in your `if(pred) continue;` statement, so just use `!` (logical not).","title":"Move to next item using Java 8 foreach loop in stream","body":"<p>You can use a simple <code>if</code> statement instead of continue. So instead of the way you have your code, you can try:</p>\n\n<pre><code>try(Stream&lt;String&gt; lines = Files.lines(path, StandardCharsets.ISO_8859_1)){\n            filteredLines = lines.filter(...).foreach(line -&gt; {\n           ...\n           if(!...) {\n              // Code you want to run\n           }\n           // Once the code runs, it will continue anyway\n    });\n}\n</code></pre>\n\n<p>The predicate in the if statement will just be the opposite of the predicate in your <code>if(pred) continue;</code> statement, so just use <code>!</code> (logical not).</p>\n"},{"tags":[],"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1442588221,"creation_date":1442588221,"answer_id":32655089,"question_id":32654929,"body_markdown":"The lambda you are passing to `forEach()` is evaluated for each element received from the stream.  The iteration itself is not visible from within the scope of the lambda, so you cannot `continue` it as if `forEach()` were a C preprocessor macro.  Instead, you can conditionally skip the rest of the statements in it.","title":"Move to next item using Java 8 foreach loop in stream","body":"<p>The lambda you are passing to <code>forEach()</code> is evaluated for each element received from the stream.  The iteration itself is not visible from within the scope of the lambda, so you cannot <code>continue</code> it as if <code>forEach()</code> were a C preprocessor macro.  Instead, you can conditionally skip the rest of the statements in it.</p>\n"},{"tags":[],"owner":{"account_id":4634192,"reputation":497,"user_id":3755871,"display_name":"Anarkopsykotik"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1499863227,"creation_date":1499863227,"answer_id":45057964,"question_id":32654929,"body_markdown":"Another solution: go through a filter with your inverted conditions :\r\nExample :\r\n\r\n    if(subscribtion.isOnce() &amp;&amp; subscribtion.isCalled()){\r\n                    continue;\r\n    }\r\n\r\ncan be replaced with\r\n\r\n    .filter(s -&gt; !(s.isOnce() &amp;&amp; s.isCalled()))\r\n\r\nThe most straightforward approach seem to be using &quot;return;&quot; though.","title":"Move to next item using Java 8 foreach loop in stream","body":"<p>Another solution: go through a filter with your inverted conditions :\nExample :</p>\n\n<pre><code>if(subscribtion.isOnce() &amp;&amp; subscribtion.isCalled()){\n                continue;\n}\n</code></pre>\n\n<p>can be replaced with</p>\n\n<pre><code>.filter(s -&gt; !(s.isOnce() &amp;&amp; s.isCalled()))\n</code></pre>\n\n<p>The most straightforward approach seem to be using \"return;\" though.</p>\n"},{"tags":[],"owner":{"account_id":1682782,"reputation":7143,"user_id":2096986,"accept_rate":37,"display_name":"Felipe"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695636489,"creation_date":1695636489,"answer_id":77171725,"question_id":32654929,"body_markdown":"you can use `takeWhile` lambda function.\r\n&gt; Returns, if this stream is ordered, a stream consisting of the longest prefix of elements taken from this stream that match the given predicate. Otherwise returns, if this stream is unordered, a stream consisting of a subset of elements taken from this stream that match the given predicate.\r\n\r\n```\r\npublic class TestFilterLoop {\r\n    public static void main(String[] args) {\r\n        ArrayList&lt;String&gt; stringList = new ArrayList&lt;&gt;();\r\n        stringList.add(&quot;a&quot;);\r\n        stringList.add(&quot;b&quot;);\r\n        stringList.add(&quot;c&quot;);\r\n        stringList.add(&quot;d&quot;);\r\n\r\n        stringList.stream()\r\n                .takeWhile(str -&gt; !str.equals(&quot;c&quot;))\r\n                .forEach(System.out::println);\r\n    }\r\n}\r\n```\r\nprints only until the string is not `c`. So it will return and not continue the loop. Output:\r\n```\r\na\r\nb\r\n```","title":"Move to next item using Java 8 foreach loop in stream","body":"<p>you can use <code>takeWhile</code> lambda function.</p>\n<blockquote>\n<p>Returns, if this stream is ordered, a stream consisting of the longest prefix of elements taken from this stream that match the given predicate. Otherwise returns, if this stream is unordered, a stream consisting of a subset of elements taken from this stream that match the given predicate.</p>\n</blockquote>\n<pre><code>public class TestFilterLoop {\n    public static void main(String[] args) {\n        ArrayList&lt;String&gt; stringList = new ArrayList&lt;&gt;();\n        stringList.add(&quot;a&quot;);\n        stringList.add(&quot;b&quot;);\n        stringList.add(&quot;c&quot;);\n        stringList.add(&quot;d&quot;);\n\n        stringList.stream()\n                .takeWhile(str -&gt; !str.equals(&quot;c&quot;))\n                .forEach(System.out::println);\n    }\n}\n</code></pre>\n<p>prints only until the string is not <code>c</code>. So it will return and not continue the loop. Output:</p>\n<pre><code>a\nb\n</code></pre>\n"}],"owner":{"account_id":1463176,"reputation":4443,"user_id":1376885,"accept_rate":34,"display_name":"Viktor M."},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":173967,"favorite_count":0,"down_vote_count":2,"up_vote_count":217,"accepted_answer_id":32655038,"answer_count":5,"score":215,"last_activity_date":1695636489,"creation_date":1442587804,"question_id":32654929,"body_markdown":"I have a problem with the stream of Java 8 foreach attempting to move on next item in loop. I cannot set the command like `continue;`, only `return;` works but you will exit from the loop in this case. I need to move on next item in loop. How can I do that?\r\n\r\nExample(not working):\r\n\r\n    try(Stream&lt;String&gt; lines = Files.lines(path, StandardCharsets.ISO_8859_1)){\r\n                filteredLines = lines.filter(...).foreach(line -&gt; {\r\n               ...\r\n               if(...)\r\n                  continue; // this command doesn&#39;t working here\r\n        });\r\n    }\r\n\r\nExample(working):\r\n   \r\n\r\n    try(Stream&lt;String&gt; lines = Files.lines(path, StandardCharsets.ISO_8859_1)){\r\n        filteredLines = lines.filter(...).collect(Collectors.toList());\r\n    }\r\n    \r\n    for(String filteredLine : filteredLines){\r\n       ...\r\n       if(...)\r\n          continue; // it&#39;s working!\r\n    }\r\n\r\n","title":"Move to next item using Java 8 foreach loop in stream","body":"<p>I have a problem with the stream of Java 8 foreach attempting to move on next item in loop. I cannot set the command like <code>continue;</code>, only <code>return;</code> works but you will exit from the loop in this case. I need to move on next item in loop. How can I do that?</p>\n\n<p>Example(not working):</p>\n\n<pre><code>try(Stream&lt;String&gt; lines = Files.lines(path, StandardCharsets.ISO_8859_1)){\n            filteredLines = lines.filter(...).foreach(line -&gt; {\n           ...\n           if(...)\n              continue; // this command doesn't working here\n    });\n}\n</code></pre>\n\n<p>Example(working):</p>\n\n<pre><code>try(Stream&lt;String&gt; lines = Files.lines(path, StandardCharsets.ISO_8859_1)){\n    filteredLines = lines.filter(...).collect(Collectors.toList());\n}\n\nfor(String filteredLine : filteredLines){\n   ...\n   if(...)\n      continue; // it's working!\n}\n</code></pre>\n"},{"tags":["python","java","excel","automation","power-automate"],"comments":[{"owner":{"account_id":963516,"reputation":10188,"user_id":987358,"accept_rate":40,"display_name":"Michael Butscher"},"score":0,"creation_date":1695634432,"post_id":77171328,"comment_id":136045740,"body_markdown":"Format the code properly.","body":"Format the code properly."},{"owner":{"account_id":18740842,"reputation":3833,"user_id":13664137,"display_name":"moken"},"score":0,"creation_date":1695714760,"post_id":77171328,"comment_id":136057785,"body_markdown":"You can use msoffcrypto  or even just Xlwings instead of win32com","body":"You can use msoffcrypto  or even just Xlwings instead of win32com"},{"owner":{"account_id":24526462,"reputation":1,"user_id":18438858,"display_name":"WildJester"},"score":0,"creation_date":1695805136,"post_id":77171328,"comment_id":136071964,"body_markdown":"Have you tried this and do you have a working script for operation?","body":"Have you tried this and do you have a working script for operation?"},{"owner":{"account_id":24526462,"reputation":1,"user_id":18438858,"display_name":"WildJester"},"score":0,"creation_date":1695821867,"post_id":77171328,"comment_id":136075395,"body_markdown":"Managed to get it this working \n\nimport msoffcrypto\nimport io\nimport pandas as pd\n\ndecrypted = io.BytesIO()\n\nwith open(r&quot;C:\\DIRECTORY\\NAME\\AND\\THEN\\FILE\\NAME.xlsx&quot;, &quot;rb&quot;) as f:\n    file = msoffcrypto.OfficeFile(f)\n    file.load_key(password=&quot;Password&quot;)  # Use password\n    file.decrypt(decrypted)\n\ndf = pd.read_excel(decrypted)\nprint(df)","body":"Managed to get it this working   import msoffcrypto import io import pandas as pd  decrypted = io.BytesIO()  with open(r&quot;C:\\DIRECTORY\\NAME\\AND\\THEN\\FILE\\NAME.xlsx&quot;, &quot;rb&quot;) as f:     file = msoffcrypto.OfficeFile(f)     file.load_key(password=&quot;Password&quot;)  # Use password     file.decrypt(decrypted)  df = pd.read_excel(decrypted) print(df)"}],"owner":{"account_id":24526462,"reputation":1,"user_id":18438858,"display_name":"WildJester"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695636205,"creation_date":1695633169,"question_id":77171328,"body_markdown":"Essentially I receive a bunch of files every so often, the files are excel documents that are password protected ( the password is the same for all and static). I want the script to iterate through each file within the directory and remove the password protection feature you apply locally within Excel settings.  \r\n\r\nI have tried using the following python script but get consistent errors \r\nI have also tried looking into using power automate though it does not have the functionality required.\r\n\r\n    enter code here import os import win32com.client as win32\r\n     input_directory = (r&#39;C:direcotry\\path\\etc&#39;) \r\n    output_directory = (r&#39;C:\\Users\\Downloads&#39;) \r\n    password = &#39;password&#39; \r\n    try: excel = win32.gencache.EnsureDispatch(&#39;Excel.Application&#39;)\r\n    excel.DisplayAlerts = False  \r\n    \r\n    for filename in os.listdir(input_directory):\r\n        if filename.endswith(&quot;.xlsx&quot;):\r\n            input_file_path = os.path.join(input_directory, filename)\r\n            output_file_path = os.path.join(output_directory, filename)\r\n            \r\n            workbook = excel.Workbooks.Open(input_file_path, False, True, None, password)\r\n            \r\n            workbook.SaveAs(output_file_path, None, &#39;&#39;, &#39;&#39;, &#39;&#39;, &#39;&#39;, 0, None, False)\r\n            workbook.Close(False)\r\n            \r\n    excel.Quit()\r\n    except Exception as e: print(f&quot;An error occurred: {str(e)}&quot;) \r\n","title":"Automate Password Removal in directory with password in excel with script","body":"<p>Essentially I receive a bunch of files every so often, the files are excel documents that are password protected ( the password is the same for all and static). I want the script to iterate through each file within the directory and remove the password protection feature you apply locally within Excel settings.</p>\n<p>I have tried using the following python script but get consistent errors\nI have also tried looking into using power automate though it does not have the functionality required.</p>\n<pre><code>enter code here import os import win32com.client as win32\n input_directory = (r'C:direcotry\\path\\etc') \noutput_directory = (r'C:\\Users\\Downloads') \npassword = 'password' \ntry: excel = win32.gencache.EnsureDispatch('Excel.Application')\nexcel.DisplayAlerts = False  \n\nfor filename in os.listdir(input_directory):\n    if filename.endswith(&quot;.xlsx&quot;):\n        input_file_path = os.path.join(input_directory, filename)\n        output_file_path = os.path.join(output_directory, filename)\n        \n        workbook = excel.Workbooks.Open(input_file_path, False, True, None, password)\n        \n        workbook.SaveAs(output_file_path, None, '', '', '', '', 0, None, False)\n        workbook.Close(False)\n        \nexcel.Quit()\nexcept Exception as e: print(f&quot;An error occurred: {str(e)}&quot;) \n</code></pre>\n"},{"tags":["java","rest","rest-assured"],"comments":[{"owner":{"account_id":4565343,"reputation":12775,"user_id":3710490,"accept_rate":64,"display_name":"Valijon"},"score":0,"creation_date":1566939718,"post_id":57682105,"comment_id":101810855,"body_markdown":"workaround: Log rotation. Increase log level. Create some class for log (allow logging only this class) and disable rest of them.","body":"workaround: Log rotation. Increase log level. Create some class for log (allow logging only this class) and disable rest of them."}],"answers":[{"comments":[{"owner":{"account_id":1126768,"reputation":3596,"user_id":1113873,"display_name":"el roso"},"score":0,"creation_date":1567181352,"post_id":57682455,"comment_id":101900383,"body_markdown":"Thank you for the response but I can&#39;t quite make this work. Can you expand your example and explain where the logger object is initiated?","body":"Thank you for the response but I can&#39;t quite make this work. Can you expand your example and explain where the logger object is initiated?"},{"owner":{"account_id":6872174,"reputation":1350,"user_id":6168167,"display_name":"bhusak"},"score":1,"creation_date":1567203903,"post_id":57682455,"comment_id":101907419,"body_markdown":"@elroso it&#39;s actually up to you where and how you want to instantiate logger. it can be inside a filter class or maybe a global one. or even passing logger instance in FailedRequestFilter constructor (if that works for you)","body":"@elroso it&#39;s actually up to you where and how you want to instantiate logger. it can be inside a filter class or maybe a global one. or even passing logger instance in FailedRequestFilter constructor (if that works for you)"}],"tags":[],"owner":{"account_id":6872174,"reputation":1350,"user_id":6168167,"display_name":"bhusak"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1567182418,"creation_date":1566941085,"answer_id":57682455,"question_id":57682105,"body_markdown":"You can create your own filter by implementing `io.restassured.filter.Filter` interface:\r\n\r\n      public class FailedRequestFilter implements Filter {\r\n\r\n        private static final Logger logger = Logger.getLogger(FailedRequestFilter.class.getName());\r\n    \r\n        @Override\r\n        public Response filter(FilterableRequestSpecification requestSpec, FilterableResponseSpecification responseSpec, FilterContext ctx) {\r\n          Response response = ctx.next(requestSpec, responseSpec);\r\n          if (response.statusCode() &gt;= 400) {\r\n            logger.log(Level.INFO, requestSpec.getMethod() + &quot; &quot; + requestSpec.getURI() + &quot; =&gt; &quot; +\r\n                response.getStatusCode() + &quot; &quot; + response.getStatusLine());\r\n          }\r\n          return response;\r\n        }\r\n      }\r\nAnd then use it in your requests:\r\n\r\n    RestAssured.given()\r\n        .filter(new FailedRequestFilter())\r\n        .when()\r\n        .get(&quot;http://www.example.com&quot;);\r\nUsing Java 8 lambda expression can also work:\r\n\r\n    Logger logger = Logger.getLogger(&quot;SomeLoggerName&quot;);\r\n    RestAssured.given()\r\n        .filter(\r\n            (request, response, ctx) -&gt; {\r\n              Response resp = ctx.next(request, response);\r\n              if (resp.statusCode() &gt;= 400) {\r\n                logger.log(Level.INFO, request.getMethod() + &quot; &quot; + request.getURI() + &quot; =&gt; &quot;\r\n                    + response.getStatusCode() + &quot; &quot; + response.getStatusLine());\r\n              }\r\n              return resp;\r\n            })\r\n        .when()\r\n        .get(&quot;http://wwww.example.com&quot;);","title":"REST Assured - How to log Request only if response contains an HTTP error","body":"<p>You can create your own filter by implementing <code>io.restassured.filter.Filter</code> interface:</p>\n\n<pre><code>  public class FailedRequestFilter implements Filter {\n\n    private static final Logger logger = Logger.getLogger(FailedRequestFilter.class.getName());\n\n    @Override\n    public Response filter(FilterableRequestSpecification requestSpec, FilterableResponseSpecification responseSpec, FilterContext ctx) {\n      Response response = ctx.next(requestSpec, responseSpec);\n      if (response.statusCode() &gt;= 400) {\n        logger.log(Level.INFO, requestSpec.getMethod() + \" \" + requestSpec.getURI() + \" =&gt; \" +\n            response.getStatusCode() + \" \" + response.getStatusLine());\n      }\n      return response;\n    }\n  }\n</code></pre>\n\n<p>And then use it in your requests:</p>\n\n<pre><code>RestAssured.given()\n    .filter(new FailedRequestFilter())\n    .when()\n    .get(\"http://www.example.com\");\n</code></pre>\n\n<p>Using Java 8 lambda expression can also work:</p>\n\n<pre><code>Logger logger = Logger.getLogger(\"SomeLoggerName\");\nRestAssured.given()\n    .filter(\n        (request, response, ctx) -&gt; {\n          Response resp = ctx.next(request, response);\n          if (resp.statusCode() &gt;= 400) {\n            logger.log(Level.INFO, request.getMethod() + \" \" + request.getURI() + \" =&gt; \"\n                + response.getStatusCode() + \" \" + response.getStatusLine());\n          }\n          return resp;\n        })\n    .when()\n    .get(\"http://wwww.example.com\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24989810,"reputation":1,"user_id":18851149,"display_name":"Kevin Kraft"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678481225,"creation_date":1678481225,"answer_id":75700872,"question_id":57682105,"body_markdown":"I created an optional config parameter to enable failure logging for debugging failing tests:\r\n```\r\npublic static Response sendRequest(Method method, String url, RequestSpecification spec, Integer expectedStatus) {\r\n        try {\r\n            ValidatableResponse response = given().spec(spec).request(method, new URL(url)).then();\r\n            if (getConfig().restAssuredDebuggingEnabled()) {\r\n                response.log().all();\r\n            }\r\n            if (expectedStatus != null) {\r\n                response.statusCode(expectedStatus);\r\n            }\r\n            return response.extract().response();\r\n        }\r\n        catch (Exception ex) {\r\n            throw new RuntimeException(method + &quot; call to &quot; + url + &quot; failed&quot;, ex);\r\n        }\r\n    }\r\n```","title":"REST Assured - How to log Request only if response contains an HTTP error","body":"<p>I created an optional config parameter to enable failure logging for debugging failing tests:</p>\n<pre><code>public static Response sendRequest(Method method, String url, RequestSpecification spec, Integer expectedStatus) {\n        try {\n            ValidatableResponse response = given().spec(spec).request(method, new URL(url)).then();\n            if (getConfig().restAssuredDebuggingEnabled()) {\n                response.log().all();\n            }\n            if (expectedStatus != null) {\n                response.statusCode(expectedStatus);\n            }\n            return response.extract().response();\n        }\n        catch (Exception ex) {\n            throw new RuntimeException(method + &quot; call to &quot; + url + &quot; failed&quot;, ex);\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10608508,"reputation":158,"user_id":7940542,"display_name":"Dzmitry Sankouski"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695635808,"creation_date":1695635808,"answer_id":77171633,"question_id":57682105,"body_markdown":"You have `.log(LogDetail.ALL)` in your RequestSpecBuilder. This method adds `new RequestLoggingFilter` to your filter chain. It causes your request to be logged.\r\n\r\nSee `log` method [source code][1]\r\n\r\n\r\n  [1]: https://github.com/rest-assured/rest-assured/blob/718ad4b684656547a4561c1bbbbcfbec409efadf/rest-assured/src/main/java/io/restassured/builder/RequestSpecBuilder.java#L1173","title":"REST Assured - How to log Request only if response contains an HTTP error","body":"<p>You have <code>.log(LogDetail.ALL)</code> in your RequestSpecBuilder. This method adds <code>new RequestLoggingFilter</code> to your filter chain. It causes your request to be logged.</p>\n<p>See <code>log</code> method <a href=\"https://github.com/rest-assured/rest-assured/blob/718ad4b684656547a4561c1bbbbcfbec409efadf/rest-assured/src/main/java/io/restassured/builder/RequestSpecBuilder.java#L1173\" rel=\"nofollow noreferrer\">source code</a></p>\n"}],"owner":{"account_id":1126768,"reputation":3596,"user_id":1113873,"display_name":"el roso"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6115,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1695635808,"creation_date":1566939110,"question_id":57682105,"body_markdown":"I&#39;m using test assured to load a reasonable large set of test data into my application under test.\r\n\r\nI want to log the request and response details for ONLY the requests that generate an error response (HTTP 4xx or 5xx)\r\n\r\nI&#39;ve tried these snippets but end up with ALL requests logged and only the error responses logged. The problem is that my log files become really large and it&#39;s causing issues in Jenkins. I just want to see the errors and the request that caused them.\r\n\r\n        RequestSpecBuilder build = new RequestSpecBuilder();\r\n        build.addFilter(new ErrorLoggingFilter()).log(LogDetail.ALL);\r\n        requestSpec = build.build();\r\n\r\n        RequestSpecBuilder build = new RequestSpecBuilder();\r\n        build.log(LogDetail.ALL).addFilter(new ErrorLoggingFilter());\r\n        requestSpec = build.build();\r\n\r\n  \r\n\r\n","title":"REST Assured - How to log Request only if response contains an HTTP error","body":"<p>I'm using test assured to load a reasonable large set of test data into my application under test.</p>\n\n<p>I want to log the request and response details for ONLY the requests that generate an error response (HTTP 4xx or 5xx)</p>\n\n<p>I've tried these snippets but end up with ALL requests logged and only the error responses logged. The problem is that my log files become really large and it's causing issues in Jenkins. I just want to see the errors and the request that caused them.</p>\n\n<pre><code>    RequestSpecBuilder build = new RequestSpecBuilder();\n    build.addFilter(new ErrorLoggingFilter()).log(LogDetail.ALL);\n    requestSpec = build.build();\n\n    RequestSpecBuilder build = new RequestSpecBuilder();\n    build.log(LogDetail.ALL).addFilter(new ErrorLoggingFilter());\n    requestSpec = build.build();\n</code></pre>\n"},{"tags":["java","spring-boot","rest"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1695635760,"post_id":77170988,"comment_id":136046003,"body_markdown":"And the error is?","body":"And the error is?"},{"owner":{"account_id":5912501,"reputation":3,"user_id":4652260,"display_name":"Mahadi Hasan"},"score":0,"creation_date":1695641441,"post_id":77170988,"comment_id":136047114,"body_markdown":"Hi @M.Deinum , this is the first time I am working on this type of coding. I cannot save image with other data.","body":"Hi @M.Deinum , this is the first time I am working on this type of coding. I cannot save image with other data."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1695641603,"post_id":77170988,"comment_id":136047152,"body_markdown":"And the problem is? No data being saved? Only image data not saved, an error? Please describe the problem you have in more detail. Currently there is only code and you expect us to figure out what is happening from that. This is not how stackoverflow works.","body":"And the problem is? No data being saved? Only image data not saved, an error? Please describe the problem you have in more detail. Currently there is only code and you expect us to figure out what is happening from that. This is not how stackoverflow works."}],"answers":[{"comments":[{"owner":{"account_id":5912501,"reputation":3,"user_id":4652260,"display_name":"Mahadi Hasan"},"score":0,"creation_date":1695641281,"post_id":77171617,"comment_id":136047071,"body_markdown":"what should I do instead of Modelattribute in springboot?","body":"what should I do instead of Modelattribute in springboot?"},{"owner":{"account_id":17377678,"reputation":20,"user_id":16888582,"display_name":"Yustas"},"score":0,"creation_date":1695644919,"post_id":77171617,"comment_id":136047781,"body_markdown":"you can look at the whole code, something like this:  https://github.com/YustasDev/NewMedicalService","body":"you can look at the whole code, something like this:  <a href=\"https://github.com/YustasDev/NewMedicalService\" rel=\"nofollow noreferrer\">github.com/YustasDev/NewMedicalService</a>"}],"tags":[],"owner":{"account_id":17377678,"reputation":20,"user_id":16888582,"display_name":"Yustas"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695635698,"creation_date":1695635698,"answer_id":77171617,"question_id":77170988,"body_markdown":"You can create an entity class like this way:\r\n\r\n    @Component\r\n    @Data\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @Builder\r\n    @Entity\r\n    @Table(name = &quot;imageTemplates&quot;)\r\n    public class ImageTemplatesClientDocuments implements Serializable {\r\n        @Id\r\n        @Column(name = &quot;id&quot;)\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Long id;\r\n    \r\n        @Lob\r\n        @Basic\r\n        @Column(name = &quot;templateContract&quot;)\r\n        @ToString.Exclude\r\n        private byte[] templateContract;\r\n    \r\n        @Lob\r\n        @Basic\r\n        @Column(name = &quot;TemplateAgreement&quot;)\r\n        @ToString.Exclude\r\n        private byte[] templateAgreement;\r\n    \r\n        @Lob\r\n        @Basic\r\n        @Column(name = &quot;templateQuestionnaire&quot;)\r\n        @ToString.Exclude\r\n        private byte[] templateQuestionnaire;\r\n    \r\n        @Lob\r\n        @Basic\r\n        @Column(name = &quot;templateClientFoto&quot;)\r\n        @ToString.Exclude\r\n        private byte[] templateClientFoto;\r\n    }\r\n\r\nand your images will be saved in the database as &#39;longblob&#39; (for MySQL).\r\nSince you are using the Rest API this should work (it works for me), using @ModelAttribute is possible for Spring MVC (https://www.baeldung.com/spring-mvc-and-the-modelattribute-annotation)\r\n","title":"Springboot save registration form with image altogether","body":"<p>You can create an entity class like this way:</p>\n<pre><code>@Component\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\n@Entity\n@Table(name = &quot;imageTemplates&quot;)\npublic class ImageTemplatesClientDocuments implements Serializable {\n    @Id\n    @Column(name = &quot;id&quot;)\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Lob\n    @Basic\n    @Column(name = &quot;templateContract&quot;)\n    @ToString.Exclude\n    private byte[] templateContract;\n\n    @Lob\n    @Basic\n    @Column(name = &quot;TemplateAgreement&quot;)\n    @ToString.Exclude\n    private byte[] templateAgreement;\n\n    @Lob\n    @Basic\n    @Column(name = &quot;templateQuestionnaire&quot;)\n    @ToString.Exclude\n    private byte[] templateQuestionnaire;\n\n    @Lob\n    @Basic\n    @Column(name = &quot;templateClientFoto&quot;)\n    @ToString.Exclude\n    private byte[] templateClientFoto;\n}\n</code></pre>\n<p>and your images will be saved in the database as 'longblob' (for MySQL).\nSince you are using the Rest API this should work (it works for me), using @ModelAttribute is possible for Spring MVC (<a href=\"https://www.baeldung.com/spring-mvc-and-the-modelattribute-annotation\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-mvc-and-the-modelattribute-annotation</a>)</p>\n"}],"owner":{"account_id":5912501,"reputation":3,"user_id":4652260,"display_name":"Mahadi Hasan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695635698,"creation_date":1695630176,"question_id":77170988,"body_markdown":"I am struggling about  6 days to create a registration form using spring rest API that will save a patient&#39;s data with image. I tried every possible way and failed every time. All I need is your support.  I wanted to use @ModelAttribute, not RequestParam. Could anyone please help me? \r\n\r\nThis is the Entity class \r\n```\r\n@Entity\r\n@Getter\r\n@Setter\r\n@RequiredArgsConstructor\r\n@ToString\r\n@Table (name = &quot;patient_registration&quot;)\r\npublic class PatientRegistrationEntity {\r\n\t\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.AUTO)\r\n\tprivate Integer id;\r\n\t\r\n\tprivate String patientName; \r\n\tprivate String salutation; \r\n\tprivate String age;\r\n\tprivate String patientPhone; \r\n\tprivate String patientAddress; \r\n\tprivate String gender;\r\n\tprivate String religion;\r\n\tprivate String dateOfBirth; \r\n\tprivate String marritalStatus; \r\n\tprivate String fatherName; \r\n\tprivate String motherName;\r\n\t\r\n//  private byte [] patientImage;\r\n\r\n\t@Lob\r\n\tprivate String patientImage;\r\n}\r\n```\r\nThis is repository interace\r\n```\r\npublic interface PatientRegistrationRepository extends JpaRepository&lt;PatientRegistrationEntity, Integer&gt; {}\r\n```\r\nThis is the service class\r\n```\r\n@Service\r\npublic class PatientRegistrationService {\r\n\t\r\n\t@Autowired\r\n\tprivate PatientRegistrationRepository repository;\r\n\t\r\n\tpublic List&lt;PatientRegistrationEntity&gt;getPatientList(){\r\n\t\treturn repository.findAll();\r\n\t}\r\n\t\r\n\tpublic PatientRegistrationEntity createPatient(PatientRegistrationEntity patient, MultipartFile image) throws IOException {\r\n\r\n        return patient;\r\n    }\r\n```\r\n\r\nThis is the controller class. \r\n```\r\n@RestController\r\n@RequestMapping(&quot;/patient/&quot;)\r\n@CrossOrigin(origins = &quot;http://localhost:4200&quot;, allowCredentials = &quot;true&quot;)\r\n\r\npublic class PatientRegistrationController {\r\n\t@Autowired\r\n\tPatientRegistrationService registrationService;\r\n\t\r\n\t@PostMapping(&quot;post&quot;)\r\n\t public void savePatient(@ModelAttribute PatientRegistrationEntity patient, @RequestParam(&quot;image&quot;) MultipartFile image) throws IOException {\r\n        registrationService.createPatient(patient, image);    \r\n    }\r\n```","title":"Springboot save registration form with image altogether","body":"<p>I am struggling about  6 days to create a registration form using spring rest API that will save a patient's data with image. I tried every possible way and failed every time. All I need is your support.  I wanted to use @ModelAttribute, not RequestParam. Could anyone please help me?</p>\n<p>This is the Entity class</p>\n<pre><code>@Entity\n@Getter\n@Setter\n@RequiredArgsConstructor\n@ToString\n@Table (name = &quot;patient_registration&quot;)\npublic class PatientRegistrationEntity {\n    \n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Integer id;\n    \n    private String patientName; \n    private String salutation; \n    private String age;\n    private String patientPhone; \n    private String patientAddress; \n    private String gender;\n    private String religion;\n    private String dateOfBirth; \n    private String marritalStatus; \n    private String fatherName; \n    private String motherName;\n    \n//  private byte [] patientImage;\n\n    @Lob\n    private String patientImage;\n}\n</code></pre>\n<p>This is repository interace</p>\n<pre><code>public interface PatientRegistrationRepository extends JpaRepository&lt;PatientRegistrationEntity, Integer&gt; {}\n</code></pre>\n<p>This is the service class</p>\n<pre><code>@Service\npublic class PatientRegistrationService {\n    \n    @Autowired\n    private PatientRegistrationRepository repository;\n    \n    public List&lt;PatientRegistrationEntity&gt;getPatientList(){\n        return repository.findAll();\n    }\n    \n    public PatientRegistrationEntity createPatient(PatientRegistrationEntity patient, MultipartFile image) throws IOException {\n\n        return patient;\n    }\n</code></pre>\n<p>This is the controller class.</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/patient/&quot;)\n@CrossOrigin(origins = &quot;http://localhost:4200&quot;, allowCredentials = &quot;true&quot;)\n\npublic class PatientRegistrationController {\n    @Autowired\n    PatientRegistrationService registrationService;\n    \n    @PostMapping(&quot;post&quot;)\n     public void savePatient(@ModelAttribute PatientRegistrationEntity patient, @RequestParam(&quot;image&quot;) MultipartFile image) throws IOException {\n        registrationService.createPatient(patient, image);    \n    }\n</code></pre>\n"},{"tags":["java","android","firebase","gradle","firebase-realtime-database"],"comments":[{"owner":{"account_id":72426,"reputation":573804,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":1,"creation_date":1631419067,"post_id":69148219,"comment_id":122214524,"body_markdown":"Make sure you download the `google-services.json` **after** you created your database in the Firebase console, as otherwise it won&#39;t contain the correct URL. You can also try putting the URL of the database directly in the code: `DatabaseReference ref= FirebaseDatabase.getInstance(&quot;database URL here&quot;)`.","body":"Make sure you download the <code>google-services.json</code> <b>after</b> you created your database in the Firebase console, as otherwise it won&#39;t contain the correct URL. You can also try putting the URL of the database directly in the code: <code>DatabaseReference ref= FirebaseDatabase.getInstance(&quot;database URL here&quot;)</code>."},{"owner":{"account_id":21151801,"reputation":85,"user_id":16889846,"display_name":"Nikita K"},"score":0,"creation_date":1631419767,"post_id":69148219,"comment_id":122214586,"body_markdown":"@FrankvanPuffelen I have already followed this. But still not working. Can you please mention a proper link to follow connection steps with firebase android","body":"@FrankvanPuffelen I have already followed this. But still not working. Can you please mention a proper link to follow connection steps with firebase android"},{"owner":{"account_id":9081167,"reputation":765,"user_id":6760962,"display_name":"Muhib Pirani"},"score":0,"creation_date":1631420186,"post_id":69148219,"comment_id":122214626,"body_markdown":"Put a debug on this code block and check if it&#39;s executed","body":"Put a debug on this code block and check if it&#39;s executed"},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1631437029,"post_id":69148219,"comment_id":122217327,"body_markdown":"What is the exact location of your database?","body":"What is the exact location of your database?"},{"owner":{"account_id":21151801,"reputation":85,"user_id":16889846,"display_name":"Nikita K"},"score":0,"creation_date":1631437162,"post_id":69148219,"comment_id":122217355,"body_markdown":"@AlexMamo It shows: Database location: United States (us-central1)","body":"@AlexMamo It shows: Database location: United States (us-central1)"},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1631437283,"post_id":69148219,"comment_id":122217384,"body_markdown":"Is onSuccess or onFailure even triggered?","body":"Is onSuccess or onFailure even triggered?"},{"owner":{"account_id":21151801,"reputation":85,"user_id":16889846,"display_name":"Nikita K"},"score":0,"creation_date":1631437381,"post_id":69148219,"comment_id":122217405,"body_markdown":"@AlexMamo None of any method invoked from them.","body":"@AlexMamo None of any method invoked from them."},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":3,"creation_date":1631438240,"post_id":69148219,"comment_id":122217559,"body_markdown":"Are you sure you have an internet connection on that device?","body":"Are you sure you have an internet connection on that device?"}],"answers":[{"tags":[],"owner":{"account_id":14682196,"reputation":464,"user_id":10603313,"display_name":"Sakhawat Hossain"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631419933,"creation_date":1631419933,"answer_id":69148376,"question_id":69148219,"body_markdown":"**You can try with the following possible solutions:**\r\n1. Check service JSON file is placed under the app folder.\r\n2. Check-in the firebase console and your database reference is valid or not null.\r\n","title":"Data is not inserting into Firebase Realtime Database throw Android","body":"<p><strong>You can try with the following possible solutions:</strong></p>\n<ol>\n<li>Check service JSON file is placed under the app folder.</li>\n<li>Check-in the firebase console and your database reference is valid or not null.</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":21151801,"reputation":85,"user_id":16889846,"display_name":"Nikita K"},"score":0,"creation_date":1631435161,"post_id":69149680,"comment_id":122216910,"body_markdown":"Generated both Getters &amp; Setter but still no change.","body":"Generated both Getters &amp; Setter but still no change."}],"tags":[],"owner":{"account_id":19912146,"reputation":460,"user_id":14589948,"display_name":"MoonLight"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631434880,"creation_date":1631434880,"answer_id":69149680,"question_id":69148219,"body_markdown":"Add setter methods in your class and then try again.","title":"Data is not inserting into Firebase Realtime Database throw Android","body":"<p>Add setter methods in your class and then try again.</p>\n"},{"tags":[],"owner":{"account_id":21151801,"reputation":85,"user_id":16889846,"display_name":"Nikita K"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1632898398,"creation_date":1631456784,"answer_id":69152303,"question_id":69148219,"body_markdown":"The problem was in Internet connection of the Emulator. Device was offline. Because I have used my Phone&#39;s hotspot connection for the emulator. When hotspot was turned off and emulator started then emulator always stays in a offline mode until we restart it.\r\n\r\nInformation log or warning, error messages are expected for this problem from Firebase or Android Studio.","title":"Data is not inserting into Firebase Realtime Database throw Android","body":"<p>The problem was in Internet connection of the Emulator. Device was offline. Because I have used my Phone's hotspot connection for the emulator. When hotspot was turned off and emulator started then emulator always stays in a offline mode until we restart it.</p>\n<p>Information log or warning, error messages are expected for this problem from Firebase or Android Studio.</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1631993107,"post_id":69237745,"comment_id":122375347,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-ask).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/69237745/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-ask\">in the help center</a>."}],"tags":[],"owner":{"account_id":21537633,"reputation":31,"user_id":15875916,"display_name":"Yogesh Pathania"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1632207611,"creation_date":1631992516,"answer_id":69237745,"question_id":69148219,"body_markdown":"I facing this issue from last 3 Days finally i found some solution \r\n\r\nFirst thing update your json file\r\n\r\nSecond check read, Write Rules is True\r\n\r\nThird Go to Project Seetting-&gt;Open Tab Data Usage-&gt; Now You will see Product Section pls make sure you unenforced the dataBase if you Bymistake enforced that option \r\nAfter this you will finally Read or Write the Data in DataBase\r\n\r\nThanks\r\n\r\nHappy Caoding\r\n\r\nHere Check Screen Short for unenforced data Like this\r\n  [1]: https://i.stack.imgur.com/s0pzI.png","title":"Data is not inserting into Firebase Realtime Database throw Android","body":"<p>I facing this issue from last 3 Days finally i found some solution</p>\n<p>First thing update your json file</p>\n<p>Second check read, Write Rules is True</p>\n<p>Third Go to Project Seetting-&gt;Open Tab Data Usage-&gt; Now You will see Product Section pls make sure you unenforced the dataBase if you Bymistake enforced that option\nAfter this you will finally Read or Write the Data in DataBase</p>\n<p>Thanks</p>\n<p>Happy Caoding</p>\n<p>Here Check Screen Short for unenforced data Like this\n[1]: <a href=\"https://i.stack.imgur.com/s0pzI.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/s0pzI.png</a></p>\n"},{"tags":[],"owner":{"account_id":10983414,"reputation":1,"user_id":8069880,"display_name":"Steve Vaius"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695635623,"creation_date":1695635623,"answer_id":77171605,"question_id":69148219,"body_markdown":"I had the same issue and now I found that problem was firebase data central setting in google-services.json file. Before I set my data center other than US_Central, I downloaded and put json file in app folder. This causes to not find database file because of different URL for Belgium. I hope this helps to others in case they have similar problems","title":"Data is not inserting into Firebase Realtime Database throw Android","body":"<p>I had the same issue and now I found that problem was firebase data central setting in google-services.json file. Before I set my data center other than US_Central, I downloaded and put json file in app folder. This causes to not find database file because of different URL for Belgium. I hope this helps to others in case they have similar problems</p>\n"}],"owner":{"account_id":21151801,"reputation":85,"user_id":16889846,"display_name":"Nikita K"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4156,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":69152303,"answer_count":5,"score":2,"last_activity_date":1695635623,"creation_date":1631417286,"question_id":69148219,"body_markdown":"I have written simple Firebase Realtime Database code to insert data in it using android java code. Whenever i click on upload button then button is get clicked but firebase code is not  executed without showing any error message or warning about data insertion. I have tried to create many different new projects to test the same code but no work.\r\n\r\n**My code:** \r\n\r\nIn below code none of any method is get invoked from SuccessListener() or FailureListener() but button got clicked.\r\n\r\n\r\n    public void onClick(View v) {\r\n            if(v.getId()==uploadBtn.getId()){ \r\n    \r\n        DatabaseReference ref= FirebaseDatabase.getInstance().getReference().child(&quot;Users&quot;);\r\n                    TestModel tm=new TestModel(&quot;Angela&quot;,&quot;angela@123&quot;);\r\n                    ref.child(&quot;Angela&quot;).setValue(tm).addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) {\r\n                            Log.d(&quot;app&quot;,&quot;data inserted&quot;);\r\n                        }\r\n                    }).addOnFailureListener(new OnFailureListener() {\r\n                        @Override\r\n                        public void onFailure(@NonNull Exception e) {\r\n                            Log.d(&quot;app&quot;,&quot;failed to inserted: &quot;+e.getMessage());\r\n                        }\r\n                    });\r\n    }\r\n\r\n\r\nNot getting any error message or warning from above code. And also there is no any change in the firebase database.\r\n\r\n**My TestModel class:**\r\n\r\n    public class TestModel {\r\n        public String name,passwd;\r\n    \r\n        public TestModel(String name, String passwd) {\r\n            this.name = name;\r\n            this.passwd = passwd;\r\n        }\r\n    }\r\n\r\n**Rules:** \r\n\r\n    &quot;rules&quot;: {\r\n    \t&quot;.read&quot;: true,\r\n    \t&quot;.write&quot;:true\r\n    }\r\n\r\n**Firebase Node Structure:**\r\n\r\n    first-app-default-rtdb:null\r\n\r\n**build.gradle (Project):**\r\n\r\n    buildscript {\r\n        \r\n        repositories {\r\n            google()\r\n            jcenter()\r\n            \r\n        }\r\n        dependencies {\r\n            classpath &#39;com.android.tools.build:gradle:7.0.2&#39;\r\n            classpath &#39;com.google.gms:google-services:4.3.10&#39;\r\n        }\r\n    }\r\n    \r\n    allprojects {\r\n        repositories {\r\n            google()\r\n            jcenter()\r\n            \r\n        }\r\n    }\r\n    \r\n    task clean(type: Delete) {\r\n        delete rootProject.buildDir\r\n    }\r\n\r\n**build.gradle (app):**\r\n\r\n    apply plugin: &#39;com.android.application&#39;\r\n    apply plugin: &#39;com.google.gms.google-services&#39;\r\n    \r\n    android {\r\n        compileSdkVersion 29\r\n        buildToolsVersion &quot;29.0.3&quot;\r\n    \r\n        defaultConfig {\r\n            applicationId &quot;com.simpleapp&quot;\r\n            minSdkVersion 26\r\n            targetSdkVersion 29\r\n            versionCode 1\r\n            versionName &quot;1.0&quot;\r\n    \r\n            testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n        }\r\n    \r\n        buildTypes {\r\n            release {\r\n                minifyEnabled false\r\n                proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            }\r\n        }\r\n        compileOptions {\r\n            sourceCompatibility JavaVersion.VERSION_1_8\r\n            targetCompatibility JavaVersion.VERSION_1_8\r\n        }\r\n    \r\n    }\r\n    \r\n    dependencies {\r\n        implementation fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])\r\n    \r\n        implementation &#39;androidx.appcompat:appcompat:1.3.1&#39;\r\n        implementation &#39;com.google.firebase:firebase-database:20.0.1&#39;\r\n        testImplementation &#39;junit:junit:4.13&#39;\r\n        androidTestImplementation &#39;androidx.test.ext:junit:1.1.3&#39;\r\n        androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.4.0&#39;\r\n    }\r\n\r\n\r\n**I have tried below but same issue:**\r\n\r\n- Upgraded studio to 2020.3\r\n- Added Getter and Setters\r\n- New project created for checking\r\n- Select,Update,Delete also tried to do\r\n- .Json file added manually\r\n- New google account created and connected\r\n- Test app on Real and Emulator device (Version 7.0 - 11)\r\n- Cleaned project several times. Removed and added firebase in gradle\r\n- Migrated to android jetpack\r\n- VPN and Normal connection tried\r\n- Gradle plugins upgraded to latest version.\r\n- Target device changed, MIN and Target version changed\r\n- Antivirus blocked. Firewall disabled.\r\n- Firebase rules changed.\r\n- Database URL path added \r\n\r\n\r\nPlease help me.","title":"Data is not inserting into Firebase Realtime Database throw Android","body":"<p>I have written simple Firebase Realtime Database code to insert data in it using android java code. Whenever i click on upload button then button is get clicked but firebase code is not  executed without showing any error message or warning about data insertion. I have tried to create many different new projects to test the same code but no work.</p>\n<p><strong>My code:</strong></p>\n<p>In below code none of any method is get invoked from SuccessListener() or FailureListener() but button got clicked.</p>\n<pre><code>public void onClick(View v) {\n        if(v.getId()==uploadBtn.getId()){ \n\n    DatabaseReference ref= FirebaseDatabase.getInstance().getReference().child(&quot;Users&quot;);\n                TestModel tm=new TestModel(&quot;Angela&quot;,&quot;angela@123&quot;);\n                ref.child(&quot;Angela&quot;).setValue(tm).addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\n                    @Override\n                    public void onSuccess(Void aVoid) {\n                        Log.d(&quot;app&quot;,&quot;data inserted&quot;);\n                    }\n                }).addOnFailureListener(new OnFailureListener() {\n                    @Override\n                    public void onFailure(@NonNull Exception e) {\n                        Log.d(&quot;app&quot;,&quot;failed to inserted: &quot;+e.getMessage());\n                    }\n                });\n}\n</code></pre>\n<p>Not getting any error message or warning from above code. And also there is no any change in the firebase database.</p>\n<p><strong>My TestModel class:</strong></p>\n<pre><code>public class TestModel {\n    public String name,passwd;\n\n    public TestModel(String name, String passwd) {\n        this.name = name;\n        this.passwd = passwd;\n    }\n}\n</code></pre>\n<p><strong>Rules:</strong></p>\n<pre><code>&quot;rules&quot;: {\n    &quot;.read&quot;: true,\n    &quot;.write&quot;:true\n}\n</code></pre>\n<p><strong>Firebase Node Structure:</strong></p>\n<pre><code>first-app-default-rtdb:null\n</code></pre>\n<p><strong>build.gradle (Project):</strong></p>\n<pre><code>buildscript {\n    \n    repositories {\n        google()\n        jcenter()\n        \n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:7.0.2'\n        classpath 'com.google.gms:google-services:4.3.10'\n    }\n}\n\nallprojects {\n    repositories {\n        google()\n        jcenter()\n        \n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n<p><strong>build.gradle (app):</strong></p>\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'com.google.gms.google-services'\n\nandroid {\n    compileSdkVersion 29\n    buildToolsVersion &quot;29.0.3&quot;\n\n    defaultConfig {\n        applicationId &quot;com.simpleapp&quot;\n        minSdkVersion 26\n        targetSdkVersion 29\n        versionCode 1\n        versionName &quot;1.0&quot;\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n\n}\n\ndependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n\n    implementation 'androidx.appcompat:appcompat:1.3.1'\n    implementation 'com.google.firebase:firebase-database:20.0.1'\n    testImplementation 'junit:junit:4.13'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.3'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.4.0'\n}\n</code></pre>\n<p><strong>I have tried below but same issue:</strong></p>\n<ul>\n<li>Upgraded studio to 2020.3</li>\n<li>Added Getter and Setters</li>\n<li>New project created for checking</li>\n<li>Select,Update,Delete also tried to do</li>\n<li>.Json file added manually</li>\n<li>New google account created and connected</li>\n<li>Test app on Real and Emulator device (Version 7.0 - 11)</li>\n<li>Cleaned project several times. Removed and added firebase in gradle</li>\n<li>Migrated to android jetpack</li>\n<li>VPN and Normal connection tried</li>\n<li>Gradle plugins upgraded to latest version.</li>\n<li>Target device changed, MIN and Target version changed</li>\n<li>Antivirus blocked. Firewall disabled.</li>\n<li>Firebase rules changed.</li>\n<li>Database URL path added</li>\n</ul>\n<p>Please help me.</p>\n"},{"tags":["java","protocol-buffers","grpc","grpc-java","proto"],"comments":[{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1612215461,"post_id":66000415,"comment_id":116692613,"body_markdown":"Can you explain why you would want this?","body":"Can you explain why you would want this?"},{"owner":{"account_id":18460371,"reputation":31,"user_id":13448037,"display_name":"Suneli"},"score":0,"creation_date":1612218195,"post_id":66000415,"comment_id":116693488,"body_markdown":"There is a custom workflow engine which currently supports http calls, where clients are able to configure url/headers/retry options. This needs to be extended to support grpc calls as well. So that users of workflow engine could specify grpc host/port, serviceName/operation and  it&#39;ll be invoked. The workflow engine itself has no knowledge about client .proto types.","body":"There is a custom workflow engine which currently supports http calls, where clients are able to configure url/headers/retry options. This needs to be extended to support grpc calls as well. So that users of workflow engine could specify grpc host/port, serviceName/operation and  it&#39;ll be invoked. The workflow engine itself has no knowledge about client .proto types."},{"owner":{"account_id":5967476,"reputation":24635,"user_id":4690866,"display_name":"Eric Anderson"},"score":1,"creation_date":1612219179,"post_id":66000415,"comment_id":116693745,"body_markdown":"You might be interested in https://github.com/grpc/grpc-java/compare/v1.6.1...ejona86:grpc-proxy which just treats messages a opaque bytes. Also, don&#39;t discount &quot;How to create GRPC client directly from protobuf without compiling it into java code&quot; as server reflection is basically just one possible way to get &quot;descriptors&quot; (the .proto file encoded in binary proto). Generated code also has them; you basically just have one fewer steps if you have the generated code already available.","body":"You might be interested in <a href=\"https://github.com/grpc/grpc-java/compare/v1.6.1...ejona86:grpc-proxy\" rel=\"nofollow noreferrer\">github.com/grpc/grpc-java/compare/v1.6.1...ejona86:grpc-prox&zwnj;&#8203;y</a> which just treats messages a opaque bytes. Also, don&#39;t discount &quot;How to create GRPC client directly from protobuf without compiling it into java code&quot; as server reflection is basically just one possible way to get &quot;descriptors&quot; (the .proto file encoded in binary proto). Generated code also has them; you basically just have one fewer steps if you have the generated code already available."},{"owner":{"account_id":18460371,"reputation":31,"user_id":13448037,"display_name":"Suneli"},"score":0,"creation_date":1612222930,"post_id":66000415,"comment_id":116694739,"body_markdown":"Thank you, Eric! Just was hoping that it&#39;s quite common usecase and there&#39;s already some plugable out-of-the-box solution :)","body":"Thank you, Eric! Just was hoping that it&#39;s quite common usecase and there&#39;s already some plugable out-of-the-box solution :)"}],"answers":[{"tags":[],"owner":{"account_id":7569765,"reputation":123,"user_id":5744081,"display_name":"ptomaszek"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695634786,"creation_date":1695634786,"answer_id":77171511,"question_id":66000415,"body_markdown":"`camel-grpc` does it. \r\n\r\nIt&#39;s a generic Client/Server wrapper which relies on generated gRPC classes. See https://camel.apache.org/components/4.0.x/grpc-component.html and especially `service` path parameter and `method` query parameter.\r\n\r\nThen check out source code:\r\n - [GrpcUtils][1] \r\n - and its use in [GrpcProducer][2]\r\n\r\n\r\n  [1]: https://github.com/apache/camel/blob/main/components/camel-grpc/src/main/java/org/apache/camel/component/grpc/GrpcUtils.java\r\n  [2]:https://github.com/apache/camel/blob/main/components/camel-grpc/src/main/java/org/apache/camel/component/grpc/GrpcProducer.java","title":"Generic gRPC Java Client - existing implementation","body":"<p><code>camel-grpc</code> does it.</p>\n<p>It's a generic Client/Server wrapper which relies on generated gRPC classes. See <a href=\"https://camel.apache.org/components/4.0.x/grpc-component.html\" rel=\"nofollow noreferrer\">https://camel.apache.org/components/4.0.x/grpc-component.html</a> and especially <code>service</code> path parameter and <code>method</code> query parameter.</p>\n<p>Then check out source code:</p>\n<ul>\n<li><a href=\"https://github.com/apache/camel/blob/main/components/camel-grpc/src/main/java/org/apache/camel/component/grpc/GrpcUtils.java\" rel=\"nofollow noreferrer\">GrpcUtils</a></li>\n<li>and its use in <a href=\"https://github.com/apache/camel/blob/main/components/camel-grpc/src/main/java/org/apache/camel/component/grpc/GrpcProducer.java\" rel=\"nofollow noreferrer\">GrpcProducer</a></li>\n</ul>\n"}],"owner":{"account_id":18460371,"reputation":31,"user_id":13448037,"display_name":"Suneli"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1218,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1695634786,"creation_date":1612214988,"question_id":66000415,"body_markdown":"I&#39;m searching for a way to implement generic gRPC client in java which would allow to execute calls providing *.proto* definition (or at least relying on generated grpc classes), service and method names as parameters.\r\n\r\nProbably you could advice if there are any existing libs/frameworks containing implemented solution of such client in java?\r\n\r\nI was able to find only this one in Apache Camel: &lt;https://github.com/apache/camel/blob/master/components/camel-grpc/src/main/java/org/apache/camel/component/grpc/GrpcProducer.java&gt;. It relies on generated grpc classes and uses utility methods to find necessary stub implementation using service name + method provided &lt;https://github.com/apache/camel/blob/master/components/camel-grpc/src/main/java/org/apache/camel/component/grpc/GrpcUtils.java&gt;.\r\n\r\nand also this post, &lt;https://stackoverflow.com/questions/61133529/how-to-create-grpc-client-directly-from-protobuf-without-compiling-it-into-java&gt;, but this implementation uses ServerReflectionGrpc which is not what I&#39;m looking for.\r\n\r\nDo you know any other existing generic java gRPC Client implementations? Or probably a decent way to implement this? Thanks a lot!\r\n\r\n \r\n\r\n\r\n\r\n\r\n","title":"Generic gRPC Java Client - existing implementation","body":"<p>I'm searching for a way to implement generic gRPC client in java which would allow to execute calls providing <em>.proto</em> definition (or at least relying on generated grpc classes), service and method names as parameters.</p>\n<p>Probably you could advice if there are any existing libs/frameworks containing implemented solution of such client in java?</p>\n<p>I was able to find only this one in Apache Camel: <a href=\"https://github.com/apache/camel/blob/master/components/camel-grpc/src/main/java/org/apache/camel/component/grpc/GrpcProducer.java\" rel=\"nofollow noreferrer\">https://github.com/apache/camel/blob/master/components/camel-grpc/src/main/java/org/apache/camel/component/grpc/GrpcProducer.java</a>. It relies on generated grpc classes and uses utility methods to find necessary stub implementation using service name + method provided <a href=\"https://github.com/apache/camel/blob/master/components/camel-grpc/src/main/java/org/apache/camel/component/grpc/GrpcUtils.java\" rel=\"nofollow noreferrer\">https://github.com/apache/camel/blob/master/components/camel-grpc/src/main/java/org/apache/camel/component/grpc/GrpcUtils.java</a>.</p>\n<p>and also this post, <a href=\"https://stackoverflow.com/questions/61133529/how-to-create-grpc-client-directly-from-protobuf-without-compiling-it-into-java\">How to create GRPC client directly from protobuf without compiling it into java code</a>, but this implementation uses ServerReflectionGrpc which is not what I'm looking for.</p>\n<p>Do you know any other existing generic java gRPC Client implementations? Or probably a decent way to implement this? Thanks a lot!</p>\n"},{"tags":["java","rest","okhttp"],"comments":[{"owner":{"account_id":326480,"reputation":368,"user_id":5047819,"display_name":"Anders Lindgren"},"score":0,"creation_date":1692531674,"post_id":76937370,"comment_id":135633439,"body_markdown":"have you checked https://stackoverflow.com/questions/60224181/how-to-add-ssl-certificates-to-okhttp-mutual-tls-connection ?","body":"have you checked <a href=\"https://stackoverflow.com/questions/60224181/how-to-add-ssl-certificates-to-okhttp-mutual-tls-connection\" title=\"how to add ssl certificates to okhttp mutual tls connection\">stackoverflow.com/questions/60224181/&hellip;</a> ?"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1695599505,"post_id":76937370,"comment_id":136041765,"body_markdown":"Make up your mind. Are you trying to (a) complete a 2-way TLS handshake or (b) sign the REST request? They aren&#39;t the same thing. Please clarify.","body":"Make up your mind. Are you trying to (a) complete a 2-way TLS handshake or (b) sign the REST request? They aren&#39;t the same thing. Please clarify."}],"answers":[{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1695599568,"post_id":77169256,"comment_id":136041768,"body_markdown":"Evidently this is what the OP want,s as he as accepted the answer, but there is nothing here that constitutes &#39;sign[ing] the REST API request&#39;.","body":"Evidently this is what the OP want,s as he as accepted the answer, but there is nothing here that constitutes &#39;sign[ing] the REST API request&#39;."}],"tags":[],"owner":{"account_id":15229450,"reputation":41,"user_id":10988973,"display_name":"Karol Jan Kosiński"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695597222,"creation_date":1695597222,"answer_id":77169256,"question_id":76937370,"body_markdown":"Using:\r\n\r\n      private String submitPostRequest(String url, Map&lt;String, String&gt; headers, String body) throws Exception {\r\n\r\n        OkHttpClient client = createOkHttpClient(pfxCert, pfxCertPass);\r\n        RequestBody requestBody = RequestBody.create(okhttp3.MediaType.parse(&quot;application/json; charset=utf-8&quot;), body);\r\n        Request.Builder builder = new Request.Builder()\r\n                .url(url)\r\n                .post(requestBody);\r\n        for (Map.Entry&lt;String, String&gt; header : headers.entrySet()) {\r\n            builder.addHeader(header.getKey(), header.getValue());\r\n        }\r\n        Request request = builder.build();\r\n\r\n        try (Response response = client.newCall(request).execute()) {\r\n            String responseContent = response.body().string();\r\n            System.out.println(response.code());\r\n            System.out.println(&quot;Server response: &quot; + responseContent);\r\n\r\n            return responseContent;\r\n        }\r\n    }\r\n\r\nMethod:\r\n\r\n    private static OkHttpClient createOkHttpClient(String pfxFilePath, String pfxPassword) throws Exception {\r\n        KeyStore keyStore = KeyStore.getInstance(&quot;PKCS12&quot;);\r\n        try (FileInputStream pfxInputStream = new FileInputStream(pfxFilePath)) {\r\n            keyStore.load(pfxInputStream, pfxPassword.toCharArray());\r\n        }\r\n\r\n        SSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\r\n        KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance(&quot;SunX509&quot;);\r\n        keyManagerFactory.init(keyStore, pfxPassword.toCharArray());\r\n        TrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());\r\n        trustManagerFactory.init((KeyStore) null);\r\n        sslContext.init(keyManagerFactory.getKeyManagers(), trustManagerFactory.getTrustManagers(), null);\r\n\r\n        SSLSocketFactory sslSocketFactory = sslContext.getSocketFactory();\r\n        OkHttpClient.Builder builder = new OkHttpClient.Builder()\r\n                .sslSocketFactory(sslSocketFactory, (X509TrustManager) trustManagerFactory.getTrustManagers()[0]);\r\n\r\n        return builder.build();\r\n    }","title":"Java okHttp 2-way handshake SSL","body":"<p>Using:</p>\n<pre><code>  private String submitPostRequest(String url, Map&lt;String, String&gt; headers, String body) throws Exception {\n\n    OkHttpClient client = createOkHttpClient(pfxCert, pfxCertPass);\n    RequestBody requestBody = RequestBody.create(okhttp3.MediaType.parse(&quot;application/json; charset=utf-8&quot;), body);\n    Request.Builder builder = new Request.Builder()\n            .url(url)\n            .post(requestBody);\n    for (Map.Entry&lt;String, String&gt; header : headers.entrySet()) {\n        builder.addHeader(header.getKey(), header.getValue());\n    }\n    Request request = builder.build();\n\n    try (Response response = client.newCall(request).execute()) {\n        String responseContent = response.body().string();\n        System.out.println(response.code());\n        System.out.println(&quot;Server response: &quot; + responseContent);\n\n        return responseContent;\n    }\n}\n</code></pre>\n<p>Method:</p>\n<pre><code>private static OkHttpClient createOkHttpClient(String pfxFilePath, String pfxPassword) throws Exception {\n    KeyStore keyStore = KeyStore.getInstance(&quot;PKCS12&quot;);\n    try (FileInputStream pfxInputStream = new FileInputStream(pfxFilePath)) {\n        keyStore.load(pfxInputStream, pfxPassword.toCharArray());\n    }\n\n    SSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\n    KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance(&quot;SunX509&quot;);\n    keyManagerFactory.init(keyStore, pfxPassword.toCharArray());\n    TrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());\n    trustManagerFactory.init((KeyStore) null);\n    sslContext.init(keyManagerFactory.getKeyManagers(), trustManagerFactory.getTrustManagers(), null);\n\n    SSLSocketFactory sslSocketFactory = sslContext.getSocketFactory();\n    OkHttpClient.Builder builder = new OkHttpClient.Builder()\n            .sslSocketFactory(sslSocketFactory, (X509TrustManager) trustManagerFactory.getTrustManagers()[0]);\n\n    return builder.build();\n}\n</code></pre>\n"}],"owner":{"account_id":15229450,"reputation":41,"user_id":10988973,"display_name":"Karol Jan Kosiński"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1695634758,"accepted_answer_id":77169256,"answer_count":1,"score":-1,"last_activity_date":1695634743,"creation_date":1692486800,"question_id":76937370,"body_markdown":"How can I put my certificate to sign REST API request, for 2-way handshake?\r\n\r\nMy code:\r\n\r\n```\r\nHttpUrl httpUrl = HttpUrl.parse(url);\r\nHttpUrl.Builder httpUrlBuilder = httpUrl.newBuilder();\r\nRequest.Builder builder = new Request.Builder()\r\n        .url(httpUrlBuilder.build())\r\n        .post(okhttp3.RequestBody.create(okhttp3.MediaType.parse(&quot;application/json; charset=utf-8&quot;), body));\r\nfor (Map.Entry&lt;String, String&gt; header : headers.entrySet()) {\r\n    builder.addHeader(header.getKey(), header.getValue());\r\n}\r\nRequest request = builder.build();\r\nOkHttpClient httpClient = new OkHttpClient.Builder().sslSocketFactory(SSLContext.getDefault().getSocketFactory()).build();\r\nResponse response = httpClient.newCall(request).execute();\r\nString res =  response.body().string();\r\nSystem.out.print(&quot;Response: &quot; +res);\r\n```\r\n\r\nI&#39;m using Spring Boot and the certificate is loaded by:\r\n```ini\r\nserver.ssl.key-store=certFile.pfx\r\nserver.ssl.key-store-password=****\r\nserver.ssl.keyStoreType=PKCS12\r\nsecurity.require-ssl=true\r\n```\r\n\r\nThis code works correctly, but without certificate signing, it is useless for me.","title":"Java okHttp 2-way handshake SSL","body":"<p>How can I put my certificate to sign REST API request, for 2-way handshake?</p>\n<p>My code:</p>\n<pre><code>HttpUrl httpUrl = HttpUrl.parse(url);\nHttpUrl.Builder httpUrlBuilder = httpUrl.newBuilder();\nRequest.Builder builder = new Request.Builder()\n        .url(httpUrlBuilder.build())\n        .post(okhttp3.RequestBody.create(okhttp3.MediaType.parse(&quot;application/json; charset=utf-8&quot;), body));\nfor (Map.Entry&lt;String, String&gt; header : headers.entrySet()) {\n    builder.addHeader(header.getKey(), header.getValue());\n}\nRequest request = builder.build();\nOkHttpClient httpClient = new OkHttpClient.Builder().sslSocketFactory(SSLContext.getDefault().getSocketFactory()).build();\nResponse response = httpClient.newCall(request).execute();\nString res =  response.body().string();\nSystem.out.print(&quot;Response: &quot; +res);\n</code></pre>\n<p>I'm using Spring Boot and the certificate is loaded by:</p>\n<pre class=\"lang-ini prettyprint-override\"><code>server.ssl.key-store=certFile.pfx\nserver.ssl.key-store-password=****\nserver.ssl.keyStoreType=PKCS12\nsecurity.require-ssl=true\n</code></pre>\n<p>This code works correctly, but without certificate signing, it is useless for me.</p>\n"},{"tags":["java","java-8","java-stream"],"comments":[{"owner":{"account_id":5553464,"reputation":17547,"user_id":4405757,"accept_rate":57,"display_name":"Thiyagu"},"score":2,"creation_date":1694502028,"post_id":77086682,"comment_id":135895247,"body_markdown":"This is a low/no effort question. Please edit your question to include what you&#39;ve tried so far.","body":"This is a low/no effort question. Please edit your question to include what you&#39;ve tried so far."},{"owner":{"account_id":17592368,"reputation":13891,"user_id":12763954,"display_name":"Olivier"},"score":1,"creation_date":1694502297,"post_id":77086682,"comment_id":135895301,"body_markdown":"There is no reason to use the Stream API for that.","body":"There is no reason to use the Stream API for that."},{"owner":{"account_id":22519773,"reputation":51,"user_id":16713520,"display_name":"Janvi Kadu"},"score":0,"creation_date":1694502451,"post_id":77086682,"comment_id":135895324,"body_markdown":"I was asked to use stream api only, without stream api i know how to do but using stream api i dont","body":"I was asked to use stream api only, without stream api i know how to do but using stream api i dont"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":1,"creation_date":1694502778,"post_id":77086682,"comment_id":135895385,"body_markdown":"the logic is the same as when you don&#39;t use streams. If you know how to do it without streams, you should be able to figure out how to do (or at least try) it with streams","body":"the logic is the same as when you don&#39;t use streams. If you know how to do it without streams, you should be able to figure out how to do (or at least try) it with streams"},{"owner":{"account_id":370994,"reputation":35154,"user_id":719263,"accept_rate":100,"display_name":"Jean-Baptiste Yun&#232;s"},"score":0,"creation_date":1694593899,"post_id":77086682,"comment_id":135910229,"body_markdown":"Convert both to sets, and then use a stream to filter elements of a set that are in the other?","body":"Convert both to sets, and then use a stream to filter elements of a set that are in the other?"}],"answers":[{"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":3,"creation_date":1694505641,"post_id":77087034,"comment_id":135895917,"body_markdown":"please don&#39;t just spoonfeed code.","body":"please don&#39;t just spoonfeed code."},{"owner":{"account_id":18991005,"reputation":1312,"user_id":13860286,"display_name":"Shila Mosammami"},"score":0,"creation_date":1694507764,"post_id":77087034,"comment_id":135896275,"body_markdown":"@Stultuske done","body":"@Stultuske done"}],"tags":[],"owner":{"account_id":18991005,"reputation":1312,"user_id":13860286,"display_name":"Shila Mosammami"},"comment_count":2,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1694761403,"creation_date":1694505018,"answer_id":77087034,"question_id":77086682,"body_markdown":" - Convert both arrays to a stream.\r\n   \r\n  - Use filter() to keep only the elements of arr1 that are also present in arr2.\r\n   \r\n  - Collect the results to a list.\r\n\r\n \r\n\r\n        import java.util.Arrays;\r\n        import java.util.List;\r\n        import java.util.stream.Collectors;\r\n        public class duplicate {\r\n        public static void main(String[] args) {\r\n        \tint[] arr1 = {1, 2, 3, 4};\r\n            int[] arr2 = {2, 3, 5, 6};\r\n        \r\n            List&lt;Integer&gt; duplicates = Arrays.stream(arr1)\r\n                    .boxed()\r\n                    .filter(i -&gt; Arrays.stream(arr2).anyMatch(j -&gt; j == i))\r\n                    .collect(Collectors.toList());\r\n        \r\n            System.out.println(duplicates);   \r\n        \r\n        }\r\n\r\n\r\n \r\n\r\n\r\nThe output \r\n\r\n[![enter image description here][1]][1]\r\n\r\nIn the above code:\r\n\r\n`Arrays.stream(arr1).boxed()` converts the int array arr1 to a stream of Integer objects.\r\n\r\nThe `filter()` method keeps only those numbers from arr1 that are also present in arr2.\r\nThe `collect()` method collects the result into a list.\r\n\r\n**Another way is:**\r\n\r\n    public static void main(String[] args) {\r\n\t\t int[] arr1 = {1, 2, 3, 4};\r\n\t\t int[] arr2 = {2, 3, 5, 6};\r\n\t\t    Set&lt;Integer&gt; set1 = IntStream.of(arr1).boxed().collect(Collectors.toSet());\r\n\t        Set&lt;Integer&gt; intersection = IntStream.of(arr2).boxed()\r\n\t                                          .filter(set1::contains)\r\n\t                                          .collect(Collectors.toSet());\r\n\r\n\t        System.out.println(&quot;Duplicated elements: &quot; + intersection);\r\n\t}\r\n\r\n1. **IntStream.of(arr1).boxed()**:\r\n    - `IntStream.of(arr1)`: This creates an `IntStream` (a stream of `int` values) from the `arr1` array.\r\n    - `.boxed()`: This converts the `IntStream` (stream of primitive `int`s) to a `Stream&lt;Integer&gt;` (stream of `Integer` objects).\r\n\r\n2. **collect(Collectors.toSet())**:\r\n    - The `collect` method is a terminal operation that transforms the elements of the stream into a different kind of result or a mutable reduction.\r\n    - `Collectors.toSet()` is a collector that accumulates input elements into a new `Set`. So, after `boxed()`, it collects the `Integer` objects into a `Set&lt;Integer&gt;`.\r\n\r\n3. **.filter(set1::contains)**:\r\n    - The `filter` method is an intermediate operation that allows you to filter elements from the stream based on a predicate.\r\n    - `set1::contains`: This is a method reference to the `contains` method of `set1`. It means each element of `IntStream.of(arr2).boxed()` will be passed to the `contains` method of `set1` to check if it&#39;s present in `set1`. If it&#39;s present, it means it&#39;s a common element between `arr1` and `arr2`.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/pqGfT.png","title":"Find duplicates from 2 different integer array using stream api","body":"<ul>\n<li><p>Convert both arrays to a stream.</p>\n</li>\n<li><p>Use filter() to keep only the elements of arr1 that are also present in arr2.</p>\n</li>\n<li><p>Collect the results to a list.</p>\n<pre><code>import java.util.Arrays;\nimport java.util.List;\nimport java.util.stream.Collectors;\npublic class duplicate {\npublic static void main(String[] args) {\n    int[] arr1 = {1, 2, 3, 4};\n    int[] arr2 = {2, 3, 5, 6};\n\n    List&lt;Integer&gt; duplicates = Arrays.stream(arr1)\n            .boxed()\n            .filter(i -&gt; Arrays.stream(arr2).anyMatch(j -&gt; j == i))\n            .collect(Collectors.toList());\n\n    System.out.println(duplicates);   \n\n}\n</code></pre>\n</li>\n</ul>\n<p>The output</p>\n<p><a href=\"https://i.stack.imgur.com/pqGfT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pqGfT.png\" alt=\"enter image description here\" /></a></p>\n<p>In the above code:</p>\n<p><code>Arrays.stream(arr1).boxed()</code> converts the int array arr1 to a stream of Integer objects.</p>\n<p>The <code>filter()</code> method keeps only those numbers from arr1 that are also present in arr2.\nThe <code>collect()</code> method collects the result into a list.</p>\n<p><strong>Another way is:</strong></p>\n<pre><code>public static void main(String[] args) {\n     int[] arr1 = {1, 2, 3, 4};\n     int[] arr2 = {2, 3, 5, 6};\n        Set&lt;Integer&gt; set1 = IntStream.of(arr1).boxed().collect(Collectors.toSet());\n        Set&lt;Integer&gt; intersection = IntStream.of(arr2).boxed()\n                                          .filter(set1::contains)\n                                          .collect(Collectors.toSet());\n\n        System.out.println(&quot;Duplicated elements: &quot; + intersection);\n}\n</code></pre>\n<ol>\n<li><p><strong>IntStream.of(arr1).boxed()</strong>:</p>\n<ul>\n<li><code>IntStream.of(arr1)</code>: This creates an <code>IntStream</code> (a stream of <code>int</code> values) from the <code>arr1</code> array.</li>\n<li><code>.boxed()</code>: This converts the <code>IntStream</code> (stream of primitive <code>int</code>s) to a <code>Stream&lt;Integer&gt;</code> (stream of <code>Integer</code> objects).</li>\n</ul>\n</li>\n<li><p><strong>collect(Collectors.toSet())</strong>:</p>\n<ul>\n<li>The <code>collect</code> method is a terminal operation that transforms the elements of the stream into a different kind of result or a mutable reduction.</li>\n<li><code>Collectors.toSet()</code> is a collector that accumulates input elements into a new <code>Set</code>. So, after <code>boxed()</code>, it collects the <code>Integer</code> objects into a <code>Set&lt;Integer&gt;</code>.</li>\n</ul>\n</li>\n<li><p><strong>.filter(set1::contains)</strong>:</p>\n<ul>\n<li>The <code>filter</code> method is an intermediate operation that allows you to filter elements from the stream based on a predicate.</li>\n<li><code>set1::contains</code>: This is a method reference to the <code>contains</code> method of <code>set1</code>. It means each element of <code>IntStream.of(arr2).boxed()</code> will be passed to the <code>contains</code> method of <code>set1</code> to check if it's present in <code>set1</code>. If it's present, it means it's a common element between <code>arr1</code> and <code>arr2</code>.</li>\n</ul>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1694521583,"creation_date":1694520665,"answer_id":77088985,"question_id":77086682,"body_markdown":"For efficiency I suggest using set for caching. Below code is O(n + m) (where n and m are lengths of arr1 and arr2)\r\n\r\n        int arr1[] = {1, 2, 3, 4};\r\n        int arr2[] = {2, 3, 5, 6};\r\n\r\n        //convert arr2 to Set for later quick O(1) lookup\r\n        Set&lt;Integer&gt; set2 = Arrays\r\n                .stream(arr2) // Turn arr2 into IntStream\r\n                .boxed() // boxed() converts IntStream to Stream&lt;Integer&gt;\r\n                         //  this is needed because Set can only hold objects\r\n                .collect(Collectors.toSet()); // Collect all incoming Integer objects into a Set (HashSet&lt;Integer&gt;)\r\n        \r\n        //filter arr1 elements that exist in the set2 (arr2)\r\n        Set&lt;Integer&gt; duplicates = Arrays.stream(arr1) // Turn arr1 into IntStream \r\n                .boxed()    // boxed() converts IntStream to Stream&lt;Integer&gt;\r\n                            //  this is needed because set2::contains expects an Integer object\r\n                .filter(set2::contains) // Filter out all elements that are not in set2 (*)\r\n                .collect(Collectors.toSet()); // Collect all incoming Integer objects into a Set (HashSet&lt;Integer&gt;) for final results\r\n\r\n        System.out.println(duplicates);\r\n        \r\n(*) `set2::contains` is a method reference, it is equivalent to the lambda expression `(x) -&gt; set2.contains(x)`.","title":"Find duplicates from 2 different integer array using stream api","body":"<p>For efficiency I suggest using set for caching. Below code is O(n + m) (where n and m are lengths of arr1 and arr2)</p>\n<pre><code>    int arr1[] = {1, 2, 3, 4};\n    int arr2[] = {2, 3, 5, 6};\n\n    //convert arr2 to Set for later quick O(1) lookup\n    Set&lt;Integer&gt; set2 = Arrays\n            .stream(arr2) // Turn arr2 into IntStream\n            .boxed() // boxed() converts IntStream to Stream&lt;Integer&gt;\n                     //  this is needed because Set can only hold objects\n            .collect(Collectors.toSet()); // Collect all incoming Integer objects into a Set (HashSet&lt;Integer&gt;)\n    \n    //filter arr1 elements that exist in the set2 (arr2)\n    Set&lt;Integer&gt; duplicates = Arrays.stream(arr1) // Turn arr1 into IntStream \n            .boxed()    // boxed() converts IntStream to Stream&lt;Integer&gt;\n                        //  this is needed because set2::contains expects an Integer object\n            .filter(set2::contains) // Filter out all elements that are not in set2 (*)\n            .collect(Collectors.toSet()); // Collect all incoming Integer objects into a Set (HashSet&lt;Integer&gt;) for final results\n\n    System.out.println(duplicates);\n    \n</code></pre>\n<p>(*) <code>set2::contains</code> is a method reference, it is equivalent to the lambda expression <code>(x) -&gt; set2.contains(x)</code>.</p>\n"},{"tags":[],"owner":{"account_id":29422493,"reputation":1,"user_id":22543933,"display_name":"user22543933"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694520845,"creation_date":1694520718,"answer_id":77088992,"question_id":77086682,"body_markdown":"You can also use a set to filter like this:\r\n\r\n        int[] arr1 = {1,2,3,4};\r\n        int[] arr2 = {2,3,4,5,6};\r\n\r\n        Set&lt;Integer&gt;  uniqueItems = new HashSet&lt;&gt;();\r\n        List&lt;Integer&gt; dupplicates = Stream.concat(Arrays.stream(arr1).boxed(), Arrays.stream(arr2).boxed())\r\n              .filter(i -&gt; !uniqueItems.add(i))\r\n              .collect(Collectors.toList());\r\n\r\nif an element is already in a set the call to uniqueItems.add(i) will return false. ","title":"Find duplicates from 2 different integer array using stream api","body":"<p>You can also use a set to filter like this:</p>\n<pre><code>    int[] arr1 = {1,2,3,4};\n    int[] arr2 = {2,3,4,5,6};\n\n    Set&lt;Integer&gt;  uniqueItems = new HashSet&lt;&gt;();\n    List&lt;Integer&gt; dupplicates = Stream.concat(Arrays.stream(arr1).boxed(), Arrays.stream(arr2).boxed())\n          .filter(i -&gt; !uniqueItems.add(i))\n          .collect(Collectors.toList());\n</code></pre>\n<p>if an element is already in a set the call to uniqueItems.add(i) will return false.</p>\n"}],"owner":{"account_id":22519773,"reputation":51,"user_id":16713520,"display_name":"Janvi Kadu"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":107,"favorite_count":0,"down_vote_count":3,"up_vote_count":4,"answer_count":3,"score":1,"last_activity_date":1695634738,"creation_date":1694501609,"question_id":77086682,"body_markdown":"I have 2 different integer arrays:\r\n```\r\nint arr1[] = [1,2,3,4]\r\nint arr2[] = [2,3,5,6]\r\n```\r\nHow to find duplicates from the above 2 arrays using the Stream API of Java 8?\r\n\r\nIn Java 7 I have done;\r\n\r\n        public class FindDuplicates {\r\n        public static void main(String[] args) {\r\n            int arr1[] = {1, 2, 3, 4};\r\n            int arr2[] = {2, 3, 5, 6};\r\n    \r\n            // Using two loops to find duplicates\r\n            for (int i = 0; i &lt; arr1.length; i++) {\r\n                for (int j = 0; j &lt; arr2.length; j++) {\r\n                    if (arr1[i] == arr2[j]) {\r\n                        System.out.println(&quot;Duplicate: &quot; + arr1[i]);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"Find duplicates from 2 different integer array using stream api","body":"<p>I have 2 different integer arrays:</p>\n<pre><code>int arr1[] = [1,2,3,4]\nint arr2[] = [2,3,5,6]\n</code></pre>\n<p>How to find duplicates from the above 2 arrays using the Stream API of Java 8?</p>\n<p>In Java 7 I have done;</p>\n<pre><code>    public class FindDuplicates {\n    public static void main(String[] args) {\n        int arr1[] = {1, 2, 3, 4};\n        int arr2[] = {2, 3, 5, 6};\n\n        // Using two loops to find duplicates\n        for (int i = 0; i &lt; arr1.length; i++) {\n            for (int j = 0; j &lt; arr2.length; j++) {\n                if (arr1[i] == arr2[j]) {\n                    System.out.println(&quot;Duplicate: &quot; + arr1[i]);\n                }\n            }\n        }\n    }\n}\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9970,"page":164,"page_size":100}
