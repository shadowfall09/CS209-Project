{"items":[{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1692954671,"post_id":76975747,"comment_id":135697907,"body_markdown":"another solution would be to simply change the name","body":"another solution would be to simply change the name"},{"owner":{"account_id":18044315,"reputation":1227,"user_id":13115701,"display_name":"Paul Marcelin Bejan"},"score":0,"creation_date":1692954850,"post_id":76975747,"comment_id":135697942,"body_markdown":"@Stultuske change the name of what? There is only one AccountRepository class and is part of the ACCOUNTS module. The issue is that it is scanned through EnableJpaRepositories by both applications.","body":"@Stultuske change the name of what? There is only one AccountRepository class and is part of the ACCOUNTS module. The issue is that it is scanned through EnableJpaRepositories by both applications."},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1692954967,"post_id":76975747,"comment_id":135697964,"body_markdown":"idd I missed that. Why do you have two applications there?","body":"idd I missed that. Why do you have two applications there?"}],"answers":[{"tags":[],"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1692970711,"creation_date":1692957968,"answer_id":76976208,"question_id":76975747,"body_markdown":"If you have multiple Spring Boot applications in one Maven project you need something to distinguish between them. One possible solution is to use different Spring profiles and activate only one per application.\r\n\r\nAdd @Profile annotation to the configuration class like this:\r\n```\r\n@Profile(&quot;types&quot;)\r\n@SpringBootApplication\r\npublic class MyProjectTypesApplication {\r\n// ...\r\n}\r\n\r\n@Profile(&quot;accounts&quot;)\r\n@SpringBootApplication\r\npublic class MyProjectAccountsApplication {\r\n// ...\r\n}\r\n```\r\nYou can then activate specific profile by setting JVM system parameter when running application:\r\n```\r\n-Dspring.profiles.active=types/accounts\r\n```","title":"Repository bean defined in @EnableJpaRepositories declared on Application, could not be registered. A bean with that name has already been defined","body":"<p>If you have multiple Spring Boot applications in one Maven project you need something to distinguish between them. One possible solution is to use different Spring profiles and activate only one per application.</p>\n<p>Add @Profile annotation to the configuration class like this:</p>\n<pre><code>@Profile(&quot;types&quot;)\n@SpringBootApplication\npublic class MyProjectTypesApplication {\n// ...\n}\n\n@Profile(&quot;accounts&quot;)\n@SpringBootApplication\npublic class MyProjectAccountsApplication {\n// ...\n}\n</code></pre>\n<p>You can then activate specific profile by setting JVM system parameter when running application:</p>\n<pre><code>-Dspring.profiles.active=types/accounts\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9588131,"reputation":206,"user_id":7120065,"display_name":"CodeSun"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692967403,"creation_date":1692967403,"answer_id":76977292,"question_id":76975747,"body_markdown":"Use different paths for the project (com.myproject.accounts.account).\r\nAnd then try @EnableJpaRepositories(&quot;com.set.new.path*&quot;)\r\n\r\n","title":"Repository bean defined in @EnableJpaRepositories declared on Application, could not be registered. A bean with that name has already been defined","body":"<p>Use different paths for the project (com.myproject.accounts.account).\nAnd then try @EnableJpaRepositories(&quot;com.set.new.path*&quot;)</p>\n"}],"owner":{"account_id":18044315,"reputation":1227,"user_id":13115701,"display_name":"Paul Marcelin Bejan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":250,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76976208,"answer_count":2,"score":0,"last_activity_date":1692970711,"creation_date":1692954202,"question_id":76975747,"body_markdown":"I have a multi maven project\r\n\r\non the **ACCOUNTS**:\r\n\r\n    @SpringBootApplication\r\n    @ComponentScan({ &quot;com.myproject*&quot; })\r\n    @EntityScan(&quot;com.myproject*&quot;)\r\n    @EnableJpaRepositories(&quot;com.myproject*&quot;)\r\n    public class MyProjectAccountsApplication {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(MyProjectAccountsApplication.class, args);\r\n    \t}\r\n    \r\n    }\r\n\r\nI have a CustomerIndividual Entity\r\n\r\n    @Data\r\n    @Entity\r\n    @Table(name = &quot;customer_individual&quot;)\r\n    public class CustomerIndividual {\r\n    \r\n    \t@Id\r\n    \t@Column(name = &quot;id_customer&quot;, nullable = false)\r\n    \tprivate Long id;\r\n    \r\n    \t@Column(name = &quot;fk_nationality&quot;, nullable = false)\r\n    \tprivate Integer fkNationality;\r\n    \r\n    \t@Column(name = &quot;fk_residence&quot;, nullable = false)\r\n    \tprivate Long fkResidence;\r\n    \r\n    \t@ManyToOne(fetch = FetchType.LAZY, optional = false)\r\n    \t@JoinColumn(name = &quot;fk_sex_type&quot;, nullable = false)\r\n    \tprivate SexType sexType;\r\n    \r\n    \t@Column(name = &quot;birth_date&quot;, nullable = false)\r\n    \tprivate LocalDate birthDate;\r\n    \r\n    \t@Column(name = &quot;name&quot;, nullable = false)\r\n    \tprivate String name;\r\n    \r\n    \t@Column(name = &quot;surname&quot;, nullable = false)\r\n    \tprivate String surname;\r\n    \r\n    \t@Column(name = &quot;email&quot;, nullable = false)\r\n    \tprivate String email;\r\n    \r\n    \t@Column(name = &quot;phone_number&quot;, nullable = false)\r\n    \tprivate String phoneNumber;\r\n    \t\r\n    \t@OneToOne(fetch = FetchType.LAZY, orphanRemoval = true)\r\n    \t@JoinColumn(name = &quot;id_customer&quot;)\r\n        @MapsId\r\n    \tprivate Customer customer;\r\n    \t\r\n    } \r\n\r\nthat has a ManyToOne relationship with an entity (SexType) into another module called **TYPES**.\r\n\r\nSo **ACCOUNTS** module has **TYPES** as a dependency.\r\n\r\n\r\n    @SpringBootApplication\r\n    @ComponentScan({ &quot;com.myproject*&quot; })\r\n    @EntityScan(&quot;com.myproject*&quot;)\r\n    @EnableJpaRepositories(&quot;com.myproject*&quot;)\r\n    public class MyProjectTypesApplication {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(MyProjectTypesApplication.class, args);\r\n    \t}\r\n    \r\n    }\r\n\r\nSexType:\r\n\r\n    @Data\r\n    @EqualsAndHashCode(callSuper = true)\r\n    @Entity\r\n    @Table(name = &quot;sex_type&quot;)\r\n    @AttributeOverride(name = &quot;id&quot;, column = @Column(name = &quot;id_sex_type&quot;, nullable = false))\r\n    public class SexType extends TypeEntity {\r\n    \r\n    }\r\n\r\n**ACCOUNTS** application failed to starts due to given exception:\r\n\r\n&gt; The bean &#39;accountRepository&#39;, defined in\r\n&gt; com.myproject.accounts.account.repository.AccountRepository defined in\r\n&gt; @EnableJpaRepositories declared on MyProjectAccountsApplication, could\r\n&gt; not be registered. A bean with that name has already been defined in\r\n&gt; com.myproject.accounts.account.repository.AccountRepository defined in\r\n&gt; @EnableJpaRepositories declared on MyProjectTypesApplication and\r\n&gt; overriding is disabled.\r\n\r\n\r\nA solution for that is to create a separate Maven module for the application types with the controller and put the **TYPES** module as a dependency.\r\n\r\nBut I&#39;m wondering if there is a better solution to avoid creating a new maven module.\r\n\r\n\r\n","title":"Repository bean defined in @EnableJpaRepositories declared on Application, could not be registered. A bean with that name has already been defined","body":"<p>I have a multi maven project</p>\n<p>on the <strong>ACCOUNTS</strong>:</p>\n<pre><code>@SpringBootApplication\n@ComponentScan({ &quot;com.myproject*&quot; })\n@EntityScan(&quot;com.myproject*&quot;)\n@EnableJpaRepositories(&quot;com.myproject*&quot;)\npublic class MyProjectAccountsApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(MyProjectAccountsApplication.class, args);\n    }\n\n}\n</code></pre>\n<p>I have a CustomerIndividual Entity</p>\n<pre><code>@Data\n@Entity\n@Table(name = &quot;customer_individual&quot;)\npublic class CustomerIndividual {\n\n    @Id\n    @Column(name = &quot;id_customer&quot;, nullable = false)\n    private Long id;\n\n    @Column(name = &quot;fk_nationality&quot;, nullable = false)\n    private Integer fkNationality;\n\n    @Column(name = &quot;fk_residence&quot;, nullable = false)\n    private Long fkResidence;\n\n    @ManyToOne(fetch = FetchType.LAZY, optional = false)\n    @JoinColumn(name = &quot;fk_sex_type&quot;, nullable = false)\n    private SexType sexType;\n\n    @Column(name = &quot;birth_date&quot;, nullable = false)\n    private LocalDate birthDate;\n\n    @Column(name = &quot;name&quot;, nullable = false)\n    private String name;\n\n    @Column(name = &quot;surname&quot;, nullable = false)\n    private String surname;\n\n    @Column(name = &quot;email&quot;, nullable = false)\n    private String email;\n\n    @Column(name = &quot;phone_number&quot;, nullable = false)\n    private String phoneNumber;\n    \n    @OneToOne(fetch = FetchType.LAZY, orphanRemoval = true)\n    @JoinColumn(name = &quot;id_customer&quot;)\n    @MapsId\n    private Customer customer;\n    \n} \n</code></pre>\n<p>that has a ManyToOne relationship with an entity (SexType) into another module called <strong>TYPES</strong>.</p>\n<p>So <strong>ACCOUNTS</strong> module has <strong>TYPES</strong> as a dependency.</p>\n<pre><code>@SpringBootApplication\n@ComponentScan({ &quot;com.myproject*&quot; })\n@EntityScan(&quot;com.myproject*&quot;)\n@EnableJpaRepositories(&quot;com.myproject*&quot;)\npublic class MyProjectTypesApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(MyProjectTypesApplication.class, args);\n    }\n\n}\n</code></pre>\n<p>SexType:</p>\n<pre><code>@Data\n@EqualsAndHashCode(callSuper = true)\n@Entity\n@Table(name = &quot;sex_type&quot;)\n@AttributeOverride(name = &quot;id&quot;, column = @Column(name = &quot;id_sex_type&quot;, nullable = false))\npublic class SexType extends TypeEntity {\n\n}\n</code></pre>\n<p><strong>ACCOUNTS</strong> application failed to starts due to given exception:</p>\n<blockquote>\n<p>The bean 'accountRepository', defined in\ncom.myproject.accounts.account.repository.AccountRepository defined in\n@EnableJpaRepositories declared on MyProjectAccountsApplication, could\nnot be registered. A bean with that name has already been defined in\ncom.myproject.accounts.account.repository.AccountRepository defined in\n@EnableJpaRepositories declared on MyProjectTypesApplication and\noverriding is disabled.</p>\n</blockquote>\n<p>A solution for that is to create a separate Maven module for the application types with the controller and put the <strong>TYPES</strong> module as a dependency.</p>\n<p>But I'm wondering if there is a better solution to avoid creating a new maven module.</p>\n"},{"tags":["java","flutter","gradle"],"owner":{"account_id":24603611,"reputation":1,"user_id":19447778,"display_name":"Miguel Moura"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692970298,"creation_date":1692970298,"question_id":76977694,"body_markdown":"I cloned a repository of an appFlutter in production, I had several problems to be able to validate the flutter doctor, because the app was made in old versions.\r\nBut after a lot of research and attempts, getting it validated and approved; flutter, dart and java versions.\r\n\r\nBut when running Flutter run, I still get this error, and I can&#39;t understand what&#39;s wrong and how to solve it. Can you help? If you need any more information please let me know.\r\n\r\nERROR:\r\n```\r\nmurillo@murillo-Inspiron-3442:~/Projects/brflor-app-cubagem/app_floresta$ flutter run\r\nLaunching lib/main.dart on Redmi Note 8 in debug mode...\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nExecution failed for task &#39;:app:processDebugMainManifest&#39;.\r\n&gt; Unable to make field private final java.lang.String java.io.File.path accessible: module java.base does not &quot;opens java.io&quot; to unnamed module @47972fab\r\n\r\n* Try:\r\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\r\n\r\n* Get more help at https://help.gradle.org\r\n\r\nBUILD FAILED in 25s\r\nRunning Gradle task &#39;assembleDebug&#39;...                             26.2s\r\nException: Gradle task assembleDebug failed with exit code 1\r\n```\r\n\r\nTry checking the environments and versions again, as well as looking back at the grandle location, to try to understand the problem. But still without success...","title":"Error in flutter run &#39;app:processDebugMAinManifest&#39;. &gt; : Unable to make field private final java.lang.String java.io.File.path accessible...&#39;","body":"<p>I cloned a repository of an appFlutter in production, I had several problems to be able to validate the flutter doctor, because the app was made in old versions.\nBut after a lot of research and attempts, getting it validated and approved; flutter, dart and java versions.</p>\n<p>But when running Flutter run, I still get this error, and I can't understand what's wrong and how to solve it. Can you help? If you need any more information please let me know.</p>\n<p>ERROR:</p>\n<pre><code>murillo@murillo-Inspiron-3442:~/Projects/brflor-app-cubagem/app_floresta$ flutter run\nLaunching lib/main.dart on Redmi Note 8 in debug mode...\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':app:processDebugMainManifest'.\n&gt; Unable to make field private final java.lang.String java.io.File.path accessible: module java.base does not &quot;opens java.io&quot; to unnamed module @47972fab\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nBUILD FAILED in 25s\nRunning Gradle task 'assembleDebug'...                             26.2s\nException: Gradle task assembleDebug failed with exit code 1\n</code></pre>\n<p>Try checking the environments and versions again, as well as looking back at the grandle location, to try to understand the problem. But still without success...</p>\n"},{"tags":["java","sql-server"],"comments":[{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":1,"creation_date":1692958094,"post_id":76976059,"comment_id":135698582,"body_markdown":"What&#39;s the ProductType for each ProductsName?","body":"What&#39;s the ProductType for each ProductsName?"},{"owner":{"account_id":1326208,"reputation":2583,"user_id":1270958,"accept_rate":31,"display_name":"abc cba"},"score":0,"creation_date":1692958148,"post_id":76976059,"comment_id":135698593,"body_markdown":"@GilbertLeBlanc all same product type","body":"@GilbertLeBlanc all same product type"},{"owner":{"account_id":6715571,"reputation":4013,"user_id":5177506,"display_name":"hunter"},"score":0,"creation_date":1692958157,"post_id":76976059,"comment_id":135698597,"body_markdown":"execute &quot;call dbo.sp_GetProducts(8)&quot; directly from DB client tool you use. probably it will also return 8 records. check you java application connects to the same database that you  connects via you DB client tool","body":"execute &quot;call dbo.sp_GetProducts(8)&quot; directly from DB client tool you use. probably it will also return 8 records. check you java application connects to the same database that you  connects via you DB client tool"},{"owner":{"account_id":1326208,"reputation":2583,"user_id":1270958,"accept_rate":31,"display_name":"abc cba"},"score":0,"creation_date":1692958227,"post_id":76976059,"comment_id":135698616,"body_markdown":"@hunter same db , and execute &quot;call dbo.sp_GetProducts(8)&quot; directly DB it return all the 8 record as above , but not from java application","body":"@hunter same db , and execute &quot;call dbo.sp_GetProducts(8)&quot; directly DB it return all the 8 record as above , but not from java application"},{"owner":{"account_id":3097035,"reputation":1105,"user_id":2622026,"accept_rate":71,"display_name":"hermit"},"score":2,"creation_date":1692958273,"post_id":76976059,"comment_id":135698630,"body_markdown":"[dbo].[sp_tbl_Prodcuts_Get]  I guess the typo has nothing to do with the issue","body":"[dbo].[sp_tbl_Prodcuts_Get]  I guess the typo has nothing to do with the issue"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":2,"creation_date":1692958414,"post_id":76976059,"comment_id":135698663,"body_markdown":"Don&#39;t you need to use [CallableStatement](https://docs.oracle.com/javase/tutorial/jdbc/basics/storedprocedures.html) to call stored procedure from JDBC?","body":"Don&#39;t you need to use <a href=\"https://docs.oracle.com/javase/tutorial/jdbc/basics/storedprocedures.html\" rel=\"nofollow noreferrer\">CallableStatement</a> to call stored procedure from JDBC?"},{"owner":{"account_id":6389739,"reputation":2892,"user_id":4956336,"display_name":"p3consulting"},"score":0,"creation_date":1692971871,"post_id":76976059,"comment_id":135701754,"body_markdown":"CallableStatement cs, cs.registerOutParameter for the implicit cursor, cs.execute, and cs.getObject to get the resultSet.","body":"CallableStatement cs, cs.registerOutParameter for the implicit cursor, cs.execute, and cs.getObject to get the resultSet."}],"owner":{"account_id":1326208,"reputation":2583,"user_id":1270958,"accept_rate":31,"display_name":"abc cba"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692970177,"creation_date":1692956675,"question_id":76976059,"body_markdown":"I am using MSSQL store procedure with a select statement \r\n\r\n    ALTER PROCEDURE [dbo].[sp_GetProducts]\r\n\t@ProductType bigint\r\n    AS\r\n    BEGIN\r\n\t\r\n\tSET NOCOUNT ON;\r\n\r\n\tSELECT ProductsName FROM tbl_Products WITH(NOLOCK)\r\n\tWHERE ProductType = @ProductType \r\n\tORDER BY ProductType DESC\r\n     \r\n    END\r\n\r\nFor Database return\r\n\r\n    ------------------\r\n    ProductsName \r\n    ------------------\r\n    Apple\r\n    Orange\r\n    Honey\r\n    Watermelon\r\n    Table\r\n    Chair\r\n    Watch\r\n    Cup\r\n\r\n\r\n\r\n\r\n\r\nFor the JDBC part\r\n\r\n    Connection conn = null;\r\n    conn = DriverManager.getConnection(connString);\r\n    PreparedStatement pstmt = conn.prepareStatement(&quot;{call dbo.sp_GetProducts(8)}&quot;);               \r\n    ResultSet resultSet = pstmt.executeQuery(); \r\n    int size = 0;\r\n    while (resultSet.next()) {         \r\n    size = size + 1;\r\n    }\r\n    //End of program the size is only 2 instead of 8 (it only return Apple and Table)\r\n\r\nI did an inspection in the SQL profile for the execution part, it also returned all 8 rows, but form the program resultset it only has 2 rows , what is the possible issue ?\r\n    \r\n\r\n\r\n ","title":"Java JDBC not returning all rows from Database","body":"<p>I am using MSSQL store procedure with a select statement</p>\n<pre><code>ALTER PROCEDURE [dbo].[sp_GetProducts]\n@ProductType bigint\nAS\nBEGIN\n\nSET NOCOUNT ON;\n\nSELECT ProductsName FROM tbl_Products WITH(NOLOCK)\nWHERE ProductType = @ProductType \nORDER BY ProductType DESC\n \nEND\n</code></pre>\n<p>For Database return</p>\n<pre><code>------------------\nProductsName \n------------------\nApple\nOrange\nHoney\nWatermelon\nTable\nChair\nWatch\nCup\n</code></pre>\n<p>For the JDBC part</p>\n<pre><code>Connection conn = null;\nconn = DriverManager.getConnection(connString);\nPreparedStatement pstmt = conn.prepareStatement(&quot;{call dbo.sp_GetProducts(8)}&quot;);               \nResultSet resultSet = pstmt.executeQuery(); \nint size = 0;\nwhile (resultSet.next()) {         \nsize = size + 1;\n}\n//End of program the size is only 2 instead of 8 (it only return Apple and Table)\n</code></pre>\n<p>I did an inspection in the SQL profile for the execution part, it also returned all 8 rows, but form the program resultset it only has 2 rows , what is the possible issue ?</p>\n"},{"tags":["java","keycloak"],"answers":[{"tags":[],"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692970158,"creation_date":1692970158,"answer_id":76977676,"question_id":76940787,"body_markdown":"You can specify the field &quot;Base URL&quot; in the client configuration in KeyCloak - this determines the link from the Applications List. You can use an absolute URL with protocol and host there. But as you could configure multiple valid redirect URIs it&#39;s probably not possible to make this configuration dependent on that field.","title":"Keycloak Account Console list clients","body":"<p>You can specify the field &quot;Base URL&quot; in the client configuration in KeyCloak - this determines the link from the Applications List. You can use an absolute URL with protocol and host there. But as you could configure multiple valid redirect URIs it's probably not possible to make this configuration dependent on that field.</p>\n"}],"owner":{"account_id":29262977,"reputation":3,"user_id":22419481,"display_name":"Nicholas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76977676,"answer_count":1,"score":0,"last_activity_date":1692970158,"creation_date":1692555739,"question_id":76940787,"body_markdown":"There is a list of client application in the Account Console =&gt; Applications. One is a Spring Boot web application:\r\n![enter image description here](https://i.stack.imgur.com/iFs3T.png)\r\n\r\nanother one is the Account Console itself:\r\n![enter image description here](https://i.stack.imgur.com/vX5p8.png)\r\n\r\nIs it possible to make the &quot;prosto-client&quot; clicable so that the user could be redirected from his Account Console to `http://localhost:8082/` which is the Valid Redirect URI of the client?\r\n\r\nI have created a realm &quot;test&quot;, in that realm created a user and set a password to the user. Also I have created a client &quot;prosto-client&quot; in the realm with the following settings:\r\n&gt; Client Protocol: openid-connect&lt;br&gt;\r\n&gt; Access type: Confidential&lt;br&gt;\r\n&gt; Standard flow enabled: On&lt;br&gt;\r\n&gt; Direct access grants enabled: On&lt;br&gt;\r\n&gt; Valid redirects URI: `http://localhost:8082/*`&lt;br&gt;\r\n\r\nThen I have created a Spring Boot application and configured it as a Keycloak client for the realm &quot;test&quot;. When the user makes a request to `http://localhost:8082`, he is redirected to Keycloak authorization url `http://localhost:9990/auth/` and after successful authentication the user is redirected back to `http://localhost:8082`. Everything works fine here.","title":"Keycloak Account Console list clients","body":"<p>There is a list of client application in the Account Console =&gt; Applications. One is a Spring Boot web application:\n<img src=\"https://i.stack.imgur.com/iFs3T.png\" alt=\"enter image description here\" /></p>\n<p>another one is the Account Console itself:\n<img src=\"https://i.stack.imgur.com/vX5p8.png\" alt=\"enter image description here\" /></p>\n<p>Is it possible to make the &quot;prosto-client&quot; clicable so that the user could be redirected from his Account Console to <code>http://localhost:8082/</code> which is the Valid Redirect URI of the client?</p>\n<p>I have created a realm &quot;test&quot;, in that realm created a user and set a password to the user. Also I have created a client &quot;prosto-client&quot; in the realm with the following settings:</p>\n<blockquote>\n<p>Client Protocol: openid-connect<br>\nAccess type: Confidential<br>\nStandard flow enabled: On<br>\nDirect access grants enabled: On<br>\nValid redirects URI: <code>http://localhost:8082/*</code><br></p>\n</blockquote>\n<p>Then I have created a Spring Boot application and configured it as a Keycloak client for the realm &quot;test&quot;. When the user makes a request to <code>http://localhost:8082</code>, he is redirected to Keycloak authorization url <code>http://localhost:9990/auth/</code> and after successful authentication the user is redirected back to <code>http://localhost:8082</code>. Everything works fine here.</p>\n"},{"tags":["java","spring","db2","liquibase"],"comments":[{"owner":{"account_id":7966981,"reputation":6819,"user_id":6012939,"accept_rate":100,"display_name":"htshame"},"score":0,"creation_date":1559136121,"post_id":56358331,"comment_id":99326596,"body_markdown":"Do you want it to be a primary key?","body":"Do you want it to be a primary key?"},{"owner":{"account_id":941858,"reputation":2136,"user_id":969812,"accept_rate":90,"display_name":"Alex"},"score":0,"creation_date":1559136363,"post_id":56358331,"comment_id":99326759,"body_markdown":"yes but not necessary...","body":"yes but not necessary..."}],"answers":[{"tags":[],"owner":{"account_id":1270839,"reputation":18313,"user_id":1227152,"display_name":"mustaccio"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1559157410,"creation_date":1559157410,"answer_id":56367166,"question_id":56358331,"body_markdown":"An identity column cannot be nullable, this is what the [error message tells you][1]:\r\n\r\n&gt; A nullable column cannot be changed to become an identity\r\n         column.\r\n\r\nChange the column constraint to `nullable=&quot;false&quot;` I guess.\r\n\r\n\r\n  [1]: https://www.ibm.com/support/knowledgecenter/en/SSEPGG_10.5.0/com.ibm.db2.luw.messages.sql.doc/com.ibm.db2.luw.messages.sql.doc-gentopic1.html#sql0270n","title":"Liquibase: Change column to an autoincrement column (identity) in DB2","body":"<p>An identity column cannot be nullable, this is what the <a href=\"https://www.ibm.com/support/knowledgecenter/en/SSEPGG_10.5.0/com.ibm.db2.luw.messages.sql.doc/com.ibm.db2.luw.messages.sql.doc-gentopic1.html#sql0270n\" rel=\"nofollow noreferrer\">error message tells you</a>:</p>\n\n<blockquote>\n  <p>A nullable column cannot be changed to become an identity\n           column.</p>\n</blockquote>\n\n<p>Change the column constraint to <code>nullable=\"false\"</code> I guess.</p>\n"},{"tags":[],"owner":{"account_id":941858,"reputation":2136,"user_id":969812,"accept_rate":90,"display_name":"Alex"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1559214740,"creation_date":1559206440,"answer_id":56374845,"question_id":56358331,"body_markdown":"I found an answer myself at [this link][1] and the explanation is this:\r\n\r\n&gt; Every DB2 admin discovers sooner or later that DB2 can not add\r\n&gt; identity column to existing table easily. Following statements fails\r\n&gt; due to syntax error: alter table public.clicks add column id integer\r\n&gt; generated always as identity   But i have good news for everyone. It\r\n&gt; can be still done, but it requires more steps.\r\n\r\n \r\n1. Add **not null integer** column\r\nYou need to provide default value for it otherwise db2 will refuse it to make not null\r\nalter table public.clicks add column id integer not null default 0\r\n \r\n2. **Drop default value from column**\r\nI am not exactly sure why it is needed because some manuals on internet omits this step but i was not able to make it work without this on DB2 9.7.3 LUW\r\nalter table public.clicks alter column id drop default\r\n \r\n3. Now set column to always generated (**add the autoincrement**)\r\nalter table public.clicks alter column id set generated always as identity\r\n \r\n4. Reorg table to make it writeable **(I didn&#39;t do this and it still works)**\r\nreorg table public.clicks\r\n \r\n5. Now replace zeros with generated itentity values\r\n**update public.clicks set id = default**\r\n \r\n6. **And optionally make id column primary key for table**\r\nalter table public.clicks add constraint pkey primary key(id)\r\n\r\nAnd the liquibase code for it:\r\n\r\n&gt; defaultSchemaNames comes from spring properties which I defined like this. I don&#39;t know if there&#39;s a better way to get the schema but this one works also\r\n\r\n\r\n```\r\n# in application.properties I&#39;ve set this\r\nliquibase.parameters.defaultSchemaName=MY_SCHEMA_NAME\r\n```\r\n\r\nThe `liquibase.xml`\r\n```\r\n    &lt;property name=&quot;defaultSchema&quot; value=&quot;${defaultSchemaName}&quot; /&gt; \r\n\r\n    &lt;changeSet id=&quot;08.01.00&quot; author=&quot;alex@mail.com&quot;&gt;\r\n        &lt;dropPrimaryKey tableName=&quot;members&quot; constraintName=&quot;pk_members_relation&quot;/&gt;\r\n    &lt;/changeSet&gt;\r\n\r\n    &lt;changeSet id=&quot;08.01&quot; author=&quot;alex@mail.com&quot;&gt;\r\n        &lt;addColumn tableName=&quot;members&quot;&gt;\r\n            &lt;column name=&quot;id&quot; type=&quot;BIGINT&quot; defaultValue=&quot;0&quot;&gt;\r\n                &lt;constraints nullable=&quot;false&quot;/&gt;\r\n            &lt;/column&gt;\r\n\r\n            &lt;column name=&quot;member_type&quot; type=&quot;varchar(100)&quot;&gt;\r\n                &lt;constraints nullable=&quot;true&quot;/&gt;\r\n            &lt;/column&gt;\r\n        &lt;/addColumn&gt;\r\n    &lt;/changeSet&gt;\r\n\r\n    &lt;changeSet id=&quot;08.02&quot; author=&quot;alex@mail.com&quot;&gt;\r\n        &lt;dropDefaultValue tableName=&quot;members&quot; columnName=&quot;id&quot;/&gt;\r\n    &lt;/changeSet&gt;\r\n\r\n    &lt;changeSet id=&quot;08.03&quot; author=&quot;alex@mail.com&quot;&gt;\r\n        &lt;addAutoIncrement tableName=&quot;members&quot; columnName=&quot;id&quot; columnDataType=&quot;bigint&quot;/&gt;\r\n    &lt;/changeSet&gt;\r\n\r\n    &lt;changeSet id=&quot;08.04&quot; author=&quot;alex@mail.com&quot;&gt;\r\n        &lt;sql&gt;\r\n            UPDATE ${defaultSchema}.members SET id = default\r\n        &lt;/sql&gt;\r\n    &lt;/changeSet&gt;\r\n```\r\n\r\n\r\n  [1]: http://www.channeldb2.com/profiles/blogs/how-to-add-identity-column-to","title":"Liquibase: Change column to an autoincrement column (identity) in DB2","body":"<p>I found an answer myself at <a href=\"http://www.channeldb2.com/profiles/blogs/how-to-add-identity-column-to\" rel=\"nofollow noreferrer\">this link</a> and the explanation is this:</p>\n\n<blockquote>\n  <p>Every DB2 admin discovers sooner or later that DB2 can not add\n  identity column to existing table easily. Following statements fails\n  due to syntax error: alter table public.clicks add column id integer\n  generated always as identity   But i have good news for everyone. It\n  can be still done, but it requires more steps.</p>\n</blockquote>\n\n<ol>\n<li><p>Add <strong>not null integer</strong> column\nYou need to provide default value for it otherwise db2 will refuse it to make not null\nalter table public.clicks add column id integer not null default 0</p></li>\n<li><p><strong>Drop default value from column</strong>\nI am not exactly sure why it is needed because some manuals on internet omits this step but i was not able to make it work without this on DB2 9.7.3 LUW\nalter table public.clicks alter column id drop default</p></li>\n<li><p>Now set column to always generated (<strong>add the autoincrement</strong>)\nalter table public.clicks alter column id set generated always as identity</p></li>\n<li><p>Reorg table to make it writeable <strong>(I didn't do this and it still works)</strong>\nreorg table public.clicks</p></li>\n<li><p>Now replace zeros with generated itentity values\n<strong>update public.clicks set id = default</strong></p></li>\n<li><p><strong>And optionally make id column primary key for table</strong>\nalter table public.clicks add constraint pkey primary key(id)</p></li>\n</ol>\n\n<p>And the liquibase code for it:</p>\n\n<blockquote>\n  <p>defaultSchemaNames comes from spring properties which I defined like this. I don't know if there's a better way to get the schema but this one works also</p>\n</blockquote>\n\n<pre><code># in application.properties I've set this\nliquibase.parameters.defaultSchemaName=MY_SCHEMA_NAME\n</code></pre>\n\n<p>The <code>liquibase.xml</code></p>\n\n<pre><code>    &lt;property name=\"defaultSchema\" value=\"${defaultSchemaName}\" /&gt; \n\n    &lt;changeSet id=\"08.01.00\" author=\"alex@mail.com\"&gt;\n        &lt;dropPrimaryKey tableName=\"members\" constraintName=\"pk_members_relation\"/&gt;\n    &lt;/changeSet&gt;\n\n    &lt;changeSet id=\"08.01\" author=\"alex@mail.com\"&gt;\n        &lt;addColumn tableName=\"members\"&gt;\n            &lt;column name=\"id\" type=\"BIGINT\" defaultValue=\"0\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n\n            &lt;column name=\"member_type\" type=\"varchar(100)\"&gt;\n                &lt;constraints nullable=\"true\"/&gt;\n            &lt;/column&gt;\n        &lt;/addColumn&gt;\n    &lt;/changeSet&gt;\n\n    &lt;changeSet id=\"08.02\" author=\"alex@mail.com\"&gt;\n        &lt;dropDefaultValue tableName=\"members\" columnName=\"id\"/&gt;\n    &lt;/changeSet&gt;\n\n    &lt;changeSet id=\"08.03\" author=\"alex@mail.com\"&gt;\n        &lt;addAutoIncrement tableName=\"members\" columnName=\"id\" columnDataType=\"bigint\"/&gt;\n    &lt;/changeSet&gt;\n\n    &lt;changeSet id=\"08.04\" author=\"alex@mail.com\"&gt;\n        &lt;sql&gt;\n            UPDATE ${defaultSchema}.members SET id = default\n        &lt;/sql&gt;\n    &lt;/changeSet&gt;\n</code></pre>\n"}],"owner":{"account_id":941858,"reputation":2136,"user_id":969812,"accept_rate":90,"display_name":"Alex"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7245,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":56367166,"answer_count":2,"score":1,"last_activity_date":1692969761,"creation_date":1559125415,"question_id":56358331,"body_markdown":"I&#39;m trying to change a BIGINT Column to an autoincremented column in DB2 but I can&#39;t seem find how.\r\nI tried doing it like this:\r\n```\r\n    &lt;changeSet id=&quot;08.01&quot; author=&quot;...&quot;&gt;\r\n        &lt;addColumn tableName=&quot;table_name&quot;&gt;\r\n            &lt;column name=&quot;id&quot; type=&quot;bigint&quot;&gt;\r\n                &lt;constraints nullable=&quot;true&quot;/&gt;\r\n            &lt;/column&gt;\r\n\r\n            &lt;column name=&quot;member_type&quot; type=&quot;varchar(100)&quot;&gt;\r\n                &lt;constraints nullable=&quot;true&quot;/&gt;\r\n            &lt;/column&gt;\r\n        &lt;/addColumn&gt;\r\n    &lt;/changeSet&gt;\r\n\r\n    &lt;changeSet id=&quot;08.02&quot; author=&quot;...&quot;&gt;\r\n        &lt;addAutoIncrement tableName=&quot;table_name&quot;\r\n                          columnDataType=&quot;bigint&quot;\r\n                          columnName=&quot;id&quot;/&gt;\r\n    &lt;/changeSet&gt;\r\n```\r\n\r\nand when it runs I get this error:\r\n\r\n```\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;liquibase&#39; defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: Invocation of init method failed; nested exception is liquibase.exception.MigrationFailedException: Migration failed for change set classpath:db/changelog/08-separation.xml::08.01::author:\r\n     Reason: liquibase.exception.DatabaseException: DB2 SQL Error: SQLCODE=-270, SQLSTATE=42997, SQLERRMC=72, DRIVER=4.13.127 [Failed SQL: ALTER TABLE SCHEMATEST.table_name ALTER COLUMN id SET GENERATED BY DEFAULT AS IDENTITY]\r\n\tat org.springframework.bean\r\n...\r\n...\r\n...\r\nCaused by: liquibase.exception.MigrationFailedException: Migration failed for change set classpath:db/changelog/08separation.xml::08.01::author:\r\n     Reason: liquibase.exception.DatabaseException: DB2 SQL Error: SQLCODE=-270, SQLSTATE=42997, SQLERRMC=72, DRIVER=4.13.127 [Failed SQL: ALTER TABLE SCHEMATEST.table_name ALTER COLUMN id SET GENERATED BY DEFAULT AS IDENTITY]\r\n...\r\n...\r\n...\r\nCaused by: com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-270, SQLSTATE=42997, SQLERRMC=72, DRIVER=4.13.127\r\n```","title":"Liquibase: Change column to an autoincrement column (identity) in DB2","body":"<p>I'm trying to change a BIGINT Column to an autoincremented column in DB2 but I can't seem find how.\nI tried doing it like this:</p>\n\n<pre><code>    &lt;changeSet id=\"08.01\" author=\"...\"&gt;\n        &lt;addColumn tableName=\"table_name\"&gt;\n            &lt;column name=\"id\" type=\"bigint\"&gt;\n                &lt;constraints nullable=\"true\"/&gt;\n            &lt;/column&gt;\n\n            &lt;column name=\"member_type\" type=\"varchar(100)\"&gt;\n                &lt;constraints nullable=\"true\"/&gt;\n            &lt;/column&gt;\n        &lt;/addColumn&gt;\n    &lt;/changeSet&gt;\n\n    &lt;changeSet id=\"08.02\" author=\"...\"&gt;\n        &lt;addAutoIncrement tableName=\"table_name\"\n                          columnDataType=\"bigint\"\n                          columnName=\"id\"/&gt;\n    &lt;/changeSet&gt;\n</code></pre>\n\n<p>and when it runs I get this error:</p>\n\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: Invocation of init method failed; nested exception is liquibase.exception.MigrationFailedException: Migration failed for change set classpath:db/changelog/08-separation.xml::08.01::author:\n     Reason: liquibase.exception.DatabaseException: DB2 SQL Error: SQLCODE=-270, SQLSTATE=42997, SQLERRMC=72, DRIVER=4.13.127 [Failed SQL: ALTER TABLE SCHEMATEST.table_name ALTER COLUMN id SET GENERATED BY DEFAULT AS IDENTITY]\n    at org.springframework.bean\n...\n...\n...\nCaused by: liquibase.exception.MigrationFailedException: Migration failed for change set classpath:db/changelog/08separation.xml::08.01::author:\n     Reason: liquibase.exception.DatabaseException: DB2 SQL Error: SQLCODE=-270, SQLSTATE=42997, SQLERRMC=72, DRIVER=4.13.127 [Failed SQL: ALTER TABLE SCHEMATEST.table_name ALTER COLUMN id SET GENERATED BY DEFAULT AS IDENTITY]\n...\n...\n...\nCaused by: com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-270, SQLSTATE=42997, SQLERRMC=72, DRIVER=4.13.127\n</code></pre>\n"},{"tags":["java","integer","double","long-integer"],"comments":[{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":1,"creation_date":1622827868,"post_id":67841630,"comment_id":119912657,"body_markdown":"Note that there are also `BigDecimal` and `BigInteger` types.","body":"Note that there are also <code>BigDecimal</code> and <code>BigInteger</code> types."},{"owner":{"account_id":14247473,"reputation":1113,"user_id":10292075,"display_name":"Yoshikage Kira"},"score":5,"creation_date":1622827935,"post_id":67841630,"comment_id":119912680,"body_markdown":"Personally, I would use long since earth population is going to be a whole number. You can use `BigInteger` or `BigDecimal` as well although they might be overkill.","body":"Personally, I would use long since earth population is going to be a whole number. You can use <code>BigInteger</code> or <code>BigDecimal</code> as well although they might be overkill."},{"owner":{"account_id":2684795,"reputation":182430,"user_id":2319407,"display_name":"Dmitry Bychenko"},"score":3,"creation_date":1622828345,"post_id":67841630,"comment_id":119912822,"body_markdown":"`long` is for *precise integer values*, e.g. `1234567890123`; if value is larger the `MAX_VALUE` (~`1e19`) you&#39;ll have *integer overflow* (totally wrong value). `double` is for *approximate* values: up to (`2^53 - 1` ~ `1e16`) integer values are *exact*, but then they becomes *approximate* up to `~1e308` (no catastrophy integer overflow)","body":"<code>long</code> is for <i>precise integer values</i>, e.g. <code>1234567890123</code>; if value is larger the <code>MAX_VALUE</code> (~<code>1e19</code>) you&#39;ll have <i>integer overflow</i> (totally wrong value). <code>double</code> is for <i>approximate</i> values: up to (<code>2^53 - 1</code> ~ <code>1e16</code>) integer values are <i>exact</i>, but then they becomes <i>approximate</i> up to <code>~1e308</code> (no catastrophy integer overflow)"},{"owner":{"account_id":45934,"reputation":203649,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":0,"creation_date":1622829187,"post_id":67841630,"comment_id":119913112,"body_markdown":"The big difference between `long` and `double` is that `long` can hold integer numbers only, while `double` is a floating-point number type (it can hold fractions). See: [Primitive Data Types](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)","body":"The big difference between <code>long</code> and <code>double</code> is that <code>long</code> can hold integer numbers only, while <code>double</code> is a floating-point number type (it can hold fractions). See: <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html\" rel=\"nofollow noreferrer\">Primitive Data Types</a>"}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1692968852,"creation_date":1622829460,"answer_id":67841954,"question_id":67841630,"body_markdown":"# tl;dr\r\n\r\nFor population of humans, use `long` primitive or `Long` class.\r\n\r\n\r\n# Details\r\n\r\nThe floating-point types [trade away accuracy][1] in exchange for speed of execution. These types in Java include `float`/`Float` and `double`/`Double`.\r\n\r\n| Size | Whole numbers | Fractional numbers |\r\n| ----: | :----: |  :---: |\r\n| 32-bit    | `int` / `Integer`  | `float` / `Float` |\r\n| 64-bit   | `long` / `Long`  | `double` / `Double` |\r\n| varies  | `BigInteger`  | `BigDecimal` |\r\n\r\nIf working with whole numbers (no fractions):\r\n\r\n - For smaller numbers ranging from -2^31 to 2^31-1 (roughly plus or minus 2 billion , use `int`/`Integer`. Needs 32-bits for content.\r\n - For larger numbers, use `long`/`Long`. Needs 64-bits for content.\r\n - For extremely large numbers, use `BigInteger`.\r\n\r\nIf working with fractional numbers (not integers):\r\n\r\n - For numbers between (2-2^-23) * 2^127 and 2^-149 where you do *not* care about accuracy, use `float`/[`Float`][2]. Needs 32-bits for content.\r\n - For larger/smaller numbers where you do *not* care about accuracy, use `double`/`Double`. Needs 64-bits for content.\r\n - For more extreme numbers, use `BigDecimal`.\r\n - If you care about accuracy (such as money matters), use `BigDecimal`.\r\n\r\nSo for the earth’s population of humans, use `long`/`Long`.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Floating-point_arithmetic#Accuracy_problems\r\n  [2]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Float.html","title":"double versus long for large numbers in Java","body":"<h1>tl;dr</h1>\n<p>For population of humans, use <code>long</code> primitive or <code>Long</code> class.</p>\n<h1>Details</h1>\n<p>The floating-point types <a href=\"https://en.wikipedia.org/wiki/Floating-point_arithmetic#Accuracy_problems\" rel=\"nofollow noreferrer\">trade away accuracy</a> in exchange for speed of execution. These types in Java include <code>float</code>/<code>Float</code> and <code>double</code>/<code>Double</code>.</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: right;\">Size</th>\n<th style=\"text-align: center;\">Whole numbers</th>\n<th style=\"text-align: center;\">Fractional numbers</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: right;\">32-bit</td>\n<td style=\"text-align: center;\"><code>int</code> / <code>Integer</code></td>\n<td style=\"text-align: center;\"><code>float</code> / <code>Float</code></td>\n</tr>\n<tr>\n<td style=\"text-align: right;\">64-bit</td>\n<td style=\"text-align: center;\"><code>long</code> / <code>Long</code></td>\n<td style=\"text-align: center;\"><code>double</code> / <code>Double</code></td>\n</tr>\n<tr>\n<td style=\"text-align: right;\">varies</td>\n<td style=\"text-align: center;\"><code>BigInteger</code></td>\n<td style=\"text-align: center;\"><code>BigDecimal</code></td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>If working with whole numbers (no fractions):</p>\n<ul>\n<li>For smaller numbers ranging from -2^31 to 2^31-1 (roughly plus or minus 2 billion , use <code>int</code>/<code>Integer</code>. Needs 32-bits for content.</li>\n<li>For larger numbers, use <code>long</code>/<code>Long</code>. Needs 64-bits for content.</li>\n<li>For extremely large numbers, use <code>BigInteger</code>.</li>\n</ul>\n<p>If working with fractional numbers (not integers):</p>\n<ul>\n<li>For numbers between (2-2^-23) * 2^127 and 2^-149 where you do <em>not</em> care about accuracy, use <code>float</code>/<a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Float.html\" rel=\"nofollow noreferrer\"><code>Float</code></a>. Needs 32-bits for content.</li>\n<li>For larger/smaller numbers where you do <em>not</em> care about accuracy, use <code>double</code>/<code>Double</code>. Needs 64-bits for content.</li>\n<li>For more extreme numbers, use <code>BigDecimal</code>.</li>\n<li>If you care about accuracy (such as money matters), use <code>BigDecimal</code>.</li>\n</ul>\n<p>So for the earth’s population of humans, use <code>long</code>/<code>Long</code>.</p>\n"}],"owner":{"account_id":21472348,"reputation":31,"user_id":15821133,"display_name":"Christoffer Druvg&#229;rden"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":988,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1692968852,"creation_date":1622827735,"question_id":67841630,"body_markdown":"I&#39;m just starting to learn to code and this might be a very simple question but I have seen double used for numbers that are larger than int can hold. If I understand correctly, double is less precise than using long might be. \r\n\r\nSo if I have a number larger than int can hold, would it be best to use double or long? In what cases is one preferred over the other? What is best practice for this? \r\n\r\n(Say I would like to store a variable with Earth&#39;s population. Is double or long preferred?)","title":"double versus long for large numbers in Java","body":"<p>I'm just starting to learn to code and this might be a very simple question but I have seen double used for numbers that are larger than int can hold. If I understand correctly, double is less precise than using long might be.</p>\n<p>So if I have a number larger than int can hold, would it be best to use double or long? In what cases is one preferred over the other? What is best practice for this?</p>\n<p>(Say I would like to store a variable with Earth's population. Is double or long preferred?)</p>\n"},{"tags":["java","servlets","jersey","servlet-filters"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1692966710,"post_id":76977201,"comment_id":135700429,"body_markdown":"Every filter is supposed to call the next one in the chain. If you do that, it&#39;ll work as you expect.","body":"Every filter is supposed to call the next one in the chain. If you do that, it&#39;ll work as you expect."},{"owner":{"account_id":4133056,"reputation":532,"user_id":5967354,"display_name":"user27772"},"score":0,"creation_date":1692968414,"post_id":76977201,"comment_id":135700838,"body_markdown":"As far as I know, each servlet filter can decide to call the next filter via chain.doFilter() or not. I my case, I declared two servlet filters (first jersey filter, then another filter) in web.xml, both matching on url-pattern /*. When requesting a non-existing endpoint, the jersey filter is always executed, but the second filter runs only if the FILTER_FORWARD_ON_404 property has been set to true and no ExceptionMapper is registered.","body":"As far as I know, each servlet filter can decide to call the next filter via chain.doFilter() or not. I my case, I declared two servlet filters (first jersey filter, then another filter) in web.xml, both matching on url-pattern /*. When requesting a non-existing endpoint, the jersey filter is always executed, but the second filter runs only if the FILTER_FORWARD_ON_404 property has been set to true and no ExceptionMapper is registered."}],"owner":{"account_id":4133056,"reputation":532,"user_id":5967354,"display_name":"user27772"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692968625,"creation_date":1692966633,"question_id":76977201,"body_markdown":"I&#39;d like to use Jersey (3.1.3) to filter http requests at endpoint */x* as follows:\r\n\r\n - if */x* exists: serve the request,\r\n - if */x* does not exist: continue with the next servlet filter in the chain that may handle */x*\r\n\r\nThe whole works when setting *property(ServletProperties.FILTER_FORWARD_ON_404, true)*. But, as soon as I add an *jakarta.ws.rs.ext.ExceptionMapper* as resource, the request gets aborted and upcoming servlet filters are not executed.\r\n\r\nHas anybody a solution of my problem?\r\n\r\n\r\nSidemark: Looking at the Jersey sources, I&#39;m looking for a way to handle the *NotFoundException* thrown in *org.glassfish.jersey.server.ServerRuntime* in case that no endpoint has been found - before calling the *ExceptionMapper* which effectively aborts the request. I tried also *ServerProperties.RESPONSE_SET_STATUS_OVER_SEND_ERROR* but this doesn&#39;t seem to be relevant here.","title":"Jersey - how to continue with next servlet filter on 404?","body":"<p>I'd like to use Jersey (3.1.3) to filter http requests at endpoint <em>/x</em> as follows:</p>\n<ul>\n<li>if <em>/x</em> exists: serve the request,</li>\n<li>if <em>/x</em> does not exist: continue with the next servlet filter in the chain that may handle <em>/x</em></li>\n</ul>\n<p>The whole works when setting <em>property(ServletProperties.FILTER_FORWARD_ON_404, true)</em>. But, as soon as I add an <em>jakarta.ws.rs.ext.ExceptionMapper</em> as resource, the request gets aborted and upcoming servlet filters are not executed.</p>\n<p>Has anybody a solution of my problem?</p>\n<p>Sidemark: Looking at the Jersey sources, I'm looking for a way to handle the <em>NotFoundException</em> thrown in <em>org.glassfish.jersey.server.ServerRuntime</em> in case that no endpoint has been found - before calling the <em>ExceptionMapper</em> which effectively aborts the request. I tried also <em>ServerProperties.RESPONSE_SET_STATUS_OVER_SEND_ERROR</em> but this doesn't seem to be relevant here.</p>\n"},{"tags":["java","collections","dictionary","hashmap"],"comments":[{"owner":{"account_id":1924671,"reputation":94541,"user_id":1735406,"accept_rate":95,"display_name":"Maroun"},"score":1,"creation_date":1372322396,"post_id":17338480,"comment_id":25153794,"body_markdown":"In the loop you should do `screen_dataz.put(k,longValues[k]);` Look at your `HashMap` again and you&#39;ll understand why.","body":"In the loop you should do <code>screen_dataz.put(k,longValues[k]);</code> Look at your <code>HashMap</code> again and you&#39;ll understand why."},{"owner":{"account_id":1944253,"reputation":37590,"user_id":1749753,"display_name":"jlordo"},"score":7,"creation_date":1372322424,"post_id":17338480,"comment_id":25153804,"body_markdown":"Please use generics to avoid potential errors due to wrong typecasting.","body":"Please use generics to avoid potential errors due to wrong typecasting."},{"owner":{"account_id":2515499,"reputation":16966,"user_id":2187042,"accept_rate":53,"display_name":"Richard Tingle"},"score":1,"creation_date":1372322552,"post_id":17338480,"comment_id":25153886,"body_markdown":"99% of the time using Object is wrong. All the times you&#39;ve used Object[] they seem to actually be String[] in this case","body":"99% of the time using Object is wrong. All the times you&#39;ve used Object[] they seem to actually be String[] in this case"},{"owner":{"account_id":1944253,"reputation":37590,"user_id":1749753,"display_name":"jlordo"},"score":0,"creation_date":1372322863,"post_id":17338480,"comment_id":25154048,"body_markdown":"As proposed on your earlier questions: Java is an OOP language. You&#39;ll produce easier to write and maintain code if you start using custom classes. `Object`, `Object[]` and `Object[][]` are very bad design decisions (in most cases - most certainly in yours).","body":"As proposed on your earlier questions: Java is an OOP language. You&#39;ll produce easier to write and maintain code if you start using custom classes. <code>Object</code>, <code>Object[]</code> and <code>Object[][]</code> are very bad design decisions (in most cases - most certainly in yours)."}],"answers":[{"tags":[],"owner":{"account_id":2678195,"reputation":68091,"user_id":2314073,"accept_rate":56,"display_name":"Juned Ahsan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1372322423,"creation_date":1372322423,"answer_id":17338528,"question_id":17338480,"body_markdown":"One correction in your code:\r\n\r\nYou may want to update your for loop\r\n\r\nas \r\n\r\n     for (int k=0; k&lt;longValues.length; k++)\r\n        {\r\n        screen_dataz.put(k,longValues[k]);\r\n        }\r\n\r\n","title":"How to retrieve key &amp; values from hashmap","body":"<p>One correction in your code:</p>\n\n<p>You may want to update your for loop</p>\n\n<p>as </p>\n\n<pre><code> for (int k=0; k&lt;longValues.length; k++)\n    {\n    screen_dataz.put(k,longValues[k]);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1308022,"reputation":9735,"user_id":1256583,"display_name":"darijan"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1372322541,"creation_date":1372322541,"answer_id":17338555,"question_id":17338480,"body_markdown":"First, you must add a row of the `longValues` matrix to the map, and not the whole matrix:\r\n\r\n     for (int k=0; k&lt;longValues.length; k++)\r\n     {\r\n         screen_dataz.put(k,longValues[k]);\r\n     }\r\n\r\nThen, while iterating extract the value as `Object[]` and not `String`, and key as `Integer`\r\n\r\n     while (mapIterator.hasNext()) \r\n     {\r\n         Map.Entry mapEntry = (Map.Entry) mapIterator.next();\r\n         Integer keyValue = (Integer) mapEntry.getKey();\r\n         Object[] value = (Object[]) mapEntry.getValue();\r\n         //iterate over the array and print each value\r\n         for (int i=0; i&lt;value.length; i++) {\r\n             System.out.print(value[i] + &quot; &quot;);\r\n         }\r\n         System.out.println();\r\n     }","title":"How to retrieve key &amp; values from hashmap","body":"<p>First, you must add a row of the <code>longValues</code> matrix to the map, and not the whole matrix:</p>\n\n<pre><code> for (int k=0; k&lt;longValues.length; k++)\n {\n     screen_dataz.put(k,longValues[k]);\n }\n</code></pre>\n\n<p>Then, while iterating extract the value as <code>Object[]</code> and not <code>String</code>, and key as <code>Integer</code></p>\n\n<pre><code> while (mapIterator.hasNext()) \n {\n     Map.Entry mapEntry = (Map.Entry) mapIterator.next();\n     Integer keyValue = (Integer) mapEntry.getKey();\n     Object[] value = (Object[]) mapEntry.getValue();\n     //iterate over the array and print each value\n     for (int i=0; i&lt;value.length; i++) {\n         System.out.print(value[i] + \" \");\n     }\n     System.out.println();\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2719313,"reputation":15631,"user_id":2345933,"accept_rate":84,"display_name":"Adam Siemion"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1411150263,"creation_date":1372322683,"answer_id":17338593,"question_id":17338480,"body_markdown":"Your code with a few fixes/improvements:\r\n\r\n* **do not use casting when using generics**\r\n* the loop adding elements to `screen_dataz` was always adding the same object\r\n* the value stored in the map is an array which means it will not be printed as you expect with a simple call to `toString()`\r\n\r\n        public class TaskList {\r\n        \tprivate static HashMap&lt;Integer, String[]&gt; dataz = new HashMap&lt;Integer, String[]&gt;();\r\n        \tprivate static HashMap&lt;Integer, String[]&gt; screen_dataz = new HashMap&lt;Integer, String[]&gt;();\r\n        \tpublic final static String[][] longValues = {\r\n        \t\t\t{ &quot;10&quot;, &quot;kstc-proc&quot;, &quot;10.10.10.10.10.&quot;, &quot;5&quot;, &quot;O&quot; },\r\n        \t\t\t{ &quot;11&quot;, &quot;proc-lvk1&quot;, &quot;12.1.2.&quot;, &quot;4&quot;, &quot;O&quot; },\r\n        \t\t\t{ &quot;13&quot;, &quot;trng-lvk1&quot;, &quot;4.6.1.&quot;, &quot;3&quot;, &quot;O&quot; } };\r\n        \tprivate static String sl, pid, tid, mval, status;\r\n\r\n        \tpublic static void main(String args[]) {\r\n        \t\taddTask();\r\n        \t}\r\n\r\n        \tpublic static void addTask() {\r\n        \t\tfor (int k = 0; k &lt; longValues.length; k++) {\r\n        \t\t\tscreen_dataz.put(k, longValues[k]);\r\n        \t\t}\r\n        \t\tSet&lt;Entry&lt;Integer, String[]&gt;&gt; mapSet = screen_dataz.entrySet();\r\n        \t\tIterator&lt;Entry&lt;Integer, String[]&gt;&gt; mapIterator = mapSet.iterator();\r\n        \t\twhile (mapIterator.hasNext()) {\r\n        \t\t\tEntry&lt;Integer, String[]&gt; mapEntry = mapIterator.next();\r\n        \t\t\tInteger keyValue = mapEntry.getKey();\r\n        \t\t\tString[] value = mapEntry.getValue();\r\n        \t\t\tSystem.out.println(Arrays.toString(value));\r\n        \t\t}\r\n        \t}\r\n        }","title":"How to retrieve key &amp; values from hashmap","body":"<p>Your code with a few fixes/improvements:</p>\n\n<ul>\n<li><strong>do not use casting when using generics</strong></li>\n<li>the loop adding elements to <code>screen_dataz</code> was always adding the same object</li>\n<li><p>the value stored in the map is an array which means it will not be printed as you expect with a simple call to <code>toString()</code></p>\n\n<pre><code>public class TaskList {\n    private static HashMap&lt;Integer, String[]&gt; dataz = new HashMap&lt;Integer, String[]&gt;();\n    private static HashMap&lt;Integer, String[]&gt; screen_dataz = new HashMap&lt;Integer, String[]&gt;();\n    public final static String[][] longValues = {\n            { \"10\", \"kstc-proc\", \"10.10.10.10.10.\", \"5\", \"O\" },\n            { \"11\", \"proc-lvk1\", \"12.1.2.\", \"4\", \"O\" },\n            { \"13\", \"trng-lvk1\", \"4.6.1.\", \"3\", \"O\" } };\n    private static String sl, pid, tid, mval, status;\n\n    public static void main(String args[]) {\n        addTask();\n    }\n\n    public static void addTask() {\n        for (int k = 0; k &lt; longValues.length; k++) {\n            screen_dataz.put(k, longValues[k]);\n        }\n        Set&lt;Entry&lt;Integer, String[]&gt;&gt; mapSet = screen_dataz.entrySet();\n        Iterator&lt;Entry&lt;Integer, String[]&gt;&gt; mapIterator = mapSet.iterator();\n        while (mapIterator.hasNext()) {\n            Entry&lt;Integer, String[]&gt; mapEntry = mapIterator.next();\n            Integer keyValue = mapEntry.getKey();\n            String[] value = mapEntry.getValue();\n            System.out.println(Arrays.toString(value));\n        }\n    }\n}\n</code></pre></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2305374,"reputation":44549,"user_id":2024761,"display_name":"Rahul"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1372322709,"creation_date":1372322709,"answer_id":17338599,"question_id":17338480,"body_markdown":"First, change your `for` loop to populate to `screen_dataz` like this.\r\n\r\n    for (int k=0; k&lt;longValues.length; k++)\r\n    {\r\n        screen_dataz.put(k,longValues[k]);\r\n    }\r\n\r\nNext, make the below change:-\r\n\r\n    String keyValue = mapEntry.getKey().toString();\r\n    String value = Arrays.asList((Object[])mapEntry.getValue()).toString();\r\n\r\nThis will print your value properly.","title":"How to retrieve key &amp; values from hashmap","body":"<p>First, change your <code>for</code> loop to populate to <code>screen_dataz</code> like this.</p>\n\n<pre><code>for (int k=0; k&lt;longValues.length; k++)\n{\n    screen_dataz.put(k,longValues[k]);\n}\n</code></pre>\n\n<p>Next, make the below change:-</p>\n\n<pre><code>String keyValue = mapEntry.getKey().toString();\nString value = Arrays.asList((Object[])mapEntry.getValue()).toString();\n</code></pre>\n\n<p>This will print your value properly.</p>\n"},{"tags":[],"owner":{"account_id":368269,"reputation":93629,"user_id":714969,"accept_rate":86,"display_name":"Kevin Bowersox"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1372323263,"creation_date":1372322883,"answer_id":17338659,"question_id":17338480,"body_markdown":"Quite a few things to comment about this code.\r\n\r\nFirst, the generic arguments of the parameterized type are incorrect.  The map is currently storing `Map&lt;Long,Object[]&gt;` however objects of type `Object[][]` are added to the `Map`.  I assume you want to enter each `Object[]` as a separate `Entry` in the `Map`.\r\n\r\n        for (int k=0; k&lt;longValues.length; k++)\r\n        {\r\n        screen_dataz.put(k,longValues[k]);\r\n        }\r\n\r\nThe second piece to look at is the iteration over the `Map` entries.  Instead of using the `Iterator` use a `for..each` loop.\r\n\r\n        for(Entry&lt;Integer,Object[]&gt; entry: screen_dataz.entrySet()){\r\n           //repetitive task\r\n        }\r\n\r\n**Final Output**\r\n\r\n    import java.util.HashMap;\r\n    import java.util.Iterator;\r\n    import java.util.Map;\r\n    import java.util.Map.Entry;\r\n    import java.util.Set;\r\n    \r\n    public class TaskList\r\n    {   \r\n    \r\n        private static HashMap&lt;Integer, Object[]&gt; dataz = new HashMap&lt;Integer,Object[]&gt;();\r\n        private static  HashMap&lt;Integer, Object[]&gt; screen_dataz = new HashMap&lt;Integer,Object[]&gt;();\r\n        public final static Object[][] longValues = {{&quot;10&quot;, &quot;kstc-proc&quot;, &quot;10.10.10.10.10.&quot;,&quot;5&quot;,&quot;O&quot;},{&quot;11&quot;, &quot;proc-lvk1&quot;, &quot;12.1.2.&quot;,&quot;4&quot;,&quot;O&quot;},{&quot;13&quot;, &quot;trng-lvk1&quot;, &quot;4.6.1.&quot;,&quot;3&quot;,&quot;O&quot;}};\r\n        private static String sl,pid,tid,mval,status;\r\n    \r\n        public static void main(String args[])\r\n        {\r\n            addTask();\r\n        }\r\n    \r\n        public static void addTask()\r\n        {  \r\n            for (int k=0; k&lt;longValues.length; k++)\r\n            {\r\n            screen_dataz.put(k,longValues[k]);\r\n            }\r\n            \r\n            for(Entry&lt;Integer,Object[]&gt; entry: screen_dataz.entrySet()){\r\n            \tSystem.out.println(entry.getKey());\r\n            \tfor(Object obj: entry.getValue()){\r\n            \t\t\tSystem.out.println(obj.toString());\r\n            \t}\r\n            }\r\n        }\r\n        \r\n    }","title":"How to retrieve key &amp; values from hashmap","body":"<p>Quite a few things to comment about this code.</p>\n\n<p>First, the generic arguments of the parameterized type are incorrect.  The map is currently storing <code>Map&lt;Long,Object[]&gt;</code> however objects of type <code>Object[][]</code> are added to the <code>Map</code>.  I assume you want to enter each <code>Object[]</code> as a separate <code>Entry</code> in the <code>Map</code>.</p>\n\n<pre><code>    for (int k=0; k&lt;longValues.length; k++)\n    {\n    screen_dataz.put(k,longValues[k]);\n    }\n</code></pre>\n\n<p>The second piece to look at is the iteration over the <code>Map</code> entries.  Instead of using the <code>Iterator</code> use a <code>for..each</code> loop.</p>\n\n<pre><code>    for(Entry&lt;Integer,Object[]&gt; entry: screen_dataz.entrySet()){\n       //repetitive task\n    }\n</code></pre>\n\n<p><strong>Final Output</strong></p>\n\n<pre><code>import java.util.HashMap;\nimport java.util.Iterator;\nimport java.util.Map;\nimport java.util.Map.Entry;\nimport java.util.Set;\n\npublic class TaskList\n{   \n\n    private static HashMap&lt;Integer, Object[]&gt; dataz = new HashMap&lt;Integer,Object[]&gt;();\n    private static  HashMap&lt;Integer, Object[]&gt; screen_dataz = new HashMap&lt;Integer,Object[]&gt;();\n    public final static Object[][] longValues = {{\"10\", \"kstc-proc\", \"10.10.10.10.10.\",\"5\",\"O\"},{\"11\", \"proc-lvk1\", \"12.1.2.\",\"4\",\"O\"},{\"13\", \"trng-lvk1\", \"4.6.1.\",\"3\",\"O\"}};\n    private static String sl,pid,tid,mval,status;\n\n    public static void main(String args[])\n    {\n        addTask();\n    }\n\n    public static void addTask()\n    {  \n        for (int k=0; k&lt;longValues.length; k++)\n        {\n        screen_dataz.put(k,longValues[k]);\n        }\n\n        for(Entry&lt;Integer,Object[]&gt; entry: screen_dataz.entrySet()){\n            System.out.println(entry.getKey());\n            for(Object obj: entry.getValue()){\n                    System.out.println(obj.toString());\n            }\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2261099,"reputation":214,"user_id":1991181,"accept_rate":86,"display_name":"LTKD"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1372327567,"creation_date":1372327567,"answer_id":17340301,"question_id":17338480,"body_markdown":"I think using `screen_dataz.put(k,longValues[k]);` in a loop will help you.\r\nYou could also use an Iterator for this.","title":"How to retrieve key &amp; values from hashmap","body":"<p>I think using <code>screen_dataz.put(k,longValues[k]);</code> in a loop will help you.\nYou could also use an Iterator for this.</p>\n"}],"owner":{"account_id":2775449,"reputation":475,"user_id":2389127,"accept_rate":87,"display_name":"milano"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":92791,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"accepted_answer_id":17338555,"answer_count":6,"score":3,"last_activity_date":1692968503,"creation_date":1372322259,"question_id":17338480,"body_markdown":"I am trying to insert the values to hash map through object, and i want to check if the values are inserted in to hash map. so i am using this code but in runtime i am not able to get any output.\r\n\r\nHow to resolve this? \r\n\r\nCode:\r\n\r\n    import java.util.*;\r\n    import java.io.*;\r\n    import java.lang.*;\r\n     \r\n    public class TaskList\r\n    {   \r\n       \r\n        private static HashMap&lt;Integer, Object[]&gt; dataz = new HashMap&lt;Integer,Object[]&gt;();\r\n        private static  HashMap&lt;Integer, Object[]&gt; screen_dataz = new HashMap&lt;Integer,Object[]&gt;();\r\n        public final static Object[][] longValues = {{&quot;10&quot;, &quot;kstc-proc&quot;, &quot;10.10.10.10.10.&quot;,&quot;5&quot;,&quot;O&quot;},{&quot;11&quot;, &quot;proc-lvk1&quot;, &quot;12.1.2.&quot;,&quot;4&quot;,&quot;O&quot;},{&quot;13&quot;, &quot;trng-lvk1&quot;, &quot;4.6.1.&quot;,&quot;3&quot;,&quot;O&quot;}};\r\n        private static String sl,pid,tid,mval,status;\r\n       \r\n        public static void main(String args[])\r\n        {\r\n            addTask();\r\n        }\r\n         \r\n        public static void addTask()\r\n        {  \r\n            for (int k=0; k&lt;longValues.length; k++)\r\n            {\r\n            screen_dataz.put(k,longValues);\r\n            }\r\n            Set mapSet = (Set) screen_dataz.entrySet();\r\n            Iterator mapIterator = mapSet.iterator();\r\n            while (mapIterator.hasNext()) \r\n            {\r\n            Map.Entry mapEntry = (Map.Entry) mapIterator.next();\r\n            String keyValue = (String) mapEntry.getKey();\r\n            String value = (String) mapEntry.getValue();\r\n            System.out.println(value);\r\n            }\r\n        }\r\n    }\r\n\r\n ","title":"How to retrieve key &amp; values from hashmap","body":"<p>I am trying to insert the values to hash map through object, and i want to check if the values are inserted in to hash map. so i am using this code but in runtime i am not able to get any output.</p>\n\n<p>How to resolve this? </p>\n\n<p>Code:</p>\n\n<pre><code>import java.util.*;\nimport java.io.*;\nimport java.lang.*;\n\npublic class TaskList\n{   \n\n    private static HashMap&lt;Integer, Object[]&gt; dataz = new HashMap&lt;Integer,Object[]&gt;();\n    private static  HashMap&lt;Integer, Object[]&gt; screen_dataz = new HashMap&lt;Integer,Object[]&gt;();\n    public final static Object[][] longValues = {{\"10\", \"kstc-proc\", \"10.10.10.10.10.\",\"5\",\"O\"},{\"11\", \"proc-lvk1\", \"12.1.2.\",\"4\",\"O\"},{\"13\", \"trng-lvk1\", \"4.6.1.\",\"3\",\"O\"}};\n    private static String sl,pid,tid,mval,status;\n\n    public static void main(String args[])\n    {\n        addTask();\n    }\n\n    public static void addTask()\n    {  \n        for (int k=0; k&lt;longValues.length; k++)\n        {\n        screen_dataz.put(k,longValues);\n        }\n        Set mapSet = (Set) screen_dataz.entrySet();\n        Iterator mapIterator = mapSet.iterator();\n        while (mapIterator.hasNext()) \n        {\n        Map.Entry mapEntry = (Map.Entry) mapIterator.next();\n        String keyValue = (String) mapEntry.getKey();\n        String value = (String) mapEntry.getValue();\n        System.out.println(value);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","tcp","jboss","netty"],"answers":[{"tags":[],"owner":{"account_id":2374267,"reputation":563,"user_id":2078080,"accept_rate":60,"display_name":"mac"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1538720345,"creation_date":1538720345,"answer_id":52659401,"question_id":52658774,"body_markdown":"OK, I have figured out a way to print the values. If anyone is interested,\r\n\r\n    byte[] bytes = new byte[buf.readableBytes()];\r\n    buf.duplicate().readBytes(bytes);\r\n    System.out.println(new String(bytes));","title":"Netty io.netty.buffer.ByteBuf.array() throws exception - direct buffer","body":"<p>OK, I have figured out a way to print the values. If anyone is interested,</p>\n\n<pre><code>byte[] bytes = new byte[buf.readableBytes()];\nbuf.duplicate().readBytes(bytes);\nSystem.out.println(new String(bytes));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18897,"reputation":15976,"user_id":43786,"accept_rate":83,"display_name":"Nicholas"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1538733616,"creation_date":1538733616,"answer_id":52663041,"question_id":52658774,"body_markdown":"To print the contents of a ByteBuf as a string, you can use *buf.toString(java.nio.charset.Charset)*.","title":"Netty io.netty.buffer.ByteBuf.array() throws exception - direct buffer","body":"<p>To print the contents of a ByteBuf as a string, you can use <em>buf.toString(java.nio.charset.Charset)</em>.</p>\n"},{"tags":[],"owner":{"account_id":1733989,"reputation":31003,"user_id":1586965,"accept_rate":76,"display_name":"samthebest"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692968498,"creation_date":1692968498,"answer_id":76977461,"question_id":52658774,"body_markdown":"Netty has a method for this\r\n\r\n```\r\nio.netty.buffer.ByteBufUtil.hexDump(buf)\r\n```","title":"Netty io.netty.buffer.ByteBuf.array() throws exception - direct buffer","body":"<p>Netty has a method for this</p>\n<pre><code>io.netty.buffer.ByteBufUtil.hexDump(buf)\n</code></pre>\n"}],"owner":{"account_id":2374267,"reputation":563,"user_id":2078080,"accept_rate":60,"display_name":"mac"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3329,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":52659401,"answer_count":3,"score":3,"last_activity_date":1692968498,"creation_date":1538716760,"question_id":52658774,"body_markdown":"I wanted to print io.netty.buffer.ByteBuf as string. But io.netty.buffer.ByteBuf.array() throws exception as follows.\r\n\r\njava.lang.UnsupportedOperationException: direct buffer\r\n\tat io.netty.buffer.PooledUnsafeDirectByteBuf.array(PooledUnsafeDirectByteBuf.java:343)\r\n\r\nCould some one help me to get the byte[] from byte io.netty.buffer.ByteBuf.\r\n\r\nThanks.\r\n","title":"Netty io.netty.buffer.ByteBuf.array() throws exception - direct buffer","body":"<p>I wanted to print io.netty.buffer.ByteBuf as string. But io.netty.buffer.ByteBuf.array() throws exception as follows.</p>\n\n<p>java.lang.UnsupportedOperationException: direct buffer\n    at io.netty.buffer.PooledUnsafeDirectByteBuf.array(PooledUnsafeDirectByteBuf.java:343)</p>\n\n<p>Could some one help me to get the byte[] from byte io.netty.buffer.ByteBuf.</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","arrays","indexing","runtime-error","arrayindexoutofboundsexception"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1692968357,"post_id":76977419,"comment_id":135700822,"body_markdown":"this means you are trying to access the second element of an array which has zero or one element. Also, for future reference, try and keep the code as minimal as possible. There&#39;s no need for such lengthy code to reproduce this issue, is there?","body":"this means you are trying to access the second element of an array which has zero or one element. Also, for future reference, try and keep the code as minimal as possible. There&#39;s no need for such lengthy code to reproduce this issue, is there?"},{"owner":{"account_id":1778502,"reputation":913,"user_id":1621777,"accept_rate":17,"display_name":"Ashish Bansal"},"score":0,"creation_date":1692968809,"post_id":76977419,"comment_id":135700948,"body_markdown":"replace this code answers[0][1]=&quot;Execute Java Code&quot;;   with answer[0][0]...note : there is no index 0,1 or 9,1 for array answer[10][1]  as size is only 1 .","body":"replace this code answers[0][1]=&quot;Execute Java Code&quot;;   with answer[0][0]...note : there is no index 0,1 or 9,1 for array answer[10][1]  as size is only 1 ."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1692969757,"post_id":76977419,"comment_id":135701188,"body_markdown":"you must be aware that indexes start at `0` and so can only go up to `length-1`  - so, for example, if you instantiate an array as `int[] array = new int[1];` - only one element - the only valid index is `0` and you will get that error if trying to access (read or set) `array[1]`","body":"you must be aware that indexes start at <code>0</code> and so can only go up to <code>length-1</code>  - so, for example, if you instantiate an array as <code>int[] array = new int[1];</code> - only one element - the only valid index is <code>0</code> and you will get that error if trying to access (read or set) <code>array[1]</code>"}],"owner":{"account_id":28035101,"reputation":1,"user_id":21413634,"display_name":"Hafsa Izhar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1692968456,"answer_count":0,"score":0,"last_activity_date":1692968196,"creation_date":1692968196,"question_id":76977419,"body_markdown":"HERE IS THE JAVA CODE.HAVING ARRAY INDEX OUT OF BOUND ERROR ON RUNTIME.\r\ni don&#39;t know what to do. I have tried every possible solution for this.\r\nThis is the error i am getting &quot;Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.ArrayIndexOutOfBoundsException: 1\r\n\tat QuizPG1.&lt;init&gt;(QuizPG1.java:90)\r\n\tat QuizPG1$3.run(QuizPG1.java:330)&quot;\r\n\r\n```\r\nimport java.awt.Color;\r\nimport java.awt.Font;\r\nimport java.awt.Graphics;\r\nimport java.util.logging.Level;\r\nimport java.util.logging.Logger;\r\nimport javax.swing.ButtonGroup;\r\nimport java.util.Timer;\r\nimport java.util.TimerTask;\r\nimport javax.swing.table.DefaultTableModel;\r\n\r\n\r\npublic class QuizPG1 extends javax.swing.JFrame {\r\n      String questions[][]=new String [10][5];\r\n      String answers [][]=new String [10][1];\r\n      String userans[][]=new String[10][1];\r\n      public static int timer = 15;\r\n      public static int answerGiven = 0;\r\n      public static int count = 0;\r\n      public static int score = 0;\r\n      String name;\r\n    public QuizPG1(String name) {\r\n        this.name = name;\r\n        initComponents();\r\n        setSize(950,750);\r\n        setLocation(500,150);\r\n        \r\n        questions[0][0]=&quot;What is the general purpose of JAVA VIRTUAL MACHINE(JVM)?&quot;;\r\n        questions[0][1]=&quot;Compile Java Code&quot;;\r\n        questions[0][2]=&quot;Execute Java Code&quot;;  //correct \r\n        questions[0][3]=&quot;Debug Java Code&quot;;\r\n        questions[0][4]=&quot;Package Java Code&quot;;\r\n        \r\n        questions[1][0]=&quot;Which keyword is used to define constant variable in JAVA?&quot;;\r\n        questions[1][1]=&quot;final&quot;;   //correct\r\n        questions[1][2]=&quot;const&quot;;\r\n        questions[1][3]=&quot;var&quot;;\r\n        questions[1][4]=&quot;static&quot;;\r\n        \r\n        \r\n        questions[2][0]=&quot;In JAVA which access modifier provides the widest visibility?&quot;;\r\n        questions[2][1]=&quot;private&quot;;\r\n        questions[2][2]=&quot;default&quot;;\r\n        questions[2][3]=&quot;protected&quot;;\r\n        questions[2][4]=&quot;public&quot;;  //correct\r\n        \r\n        questions[3][0]=&quot;Which is the correct syntax to create an object of a class named &#39;My Class&#39;?&quot;;\r\n        questions[3][1]=&quot;object MyClass = new object;&quot;;\r\n        questions[3][2]=&quot;MyClass obj = create MyClass();&quot;;\r\n        questions[3][3]=&quot;MyClass obj = new MyClass();&quot;;   //correct\r\n        questions[3][4]=&quot;object obj = new MyClass;&quot;;\r\n        \r\n        questions[4][0]=&quot;Which data type is used to store a single Unicode character in JAVA?&quot;;\r\n        questions[4][1]=&quot;char&quot;;  //correct\r\n        questions[4][2]=&quot;string&quot;;\r\n        questions[4][3]=&quot;character&quot;;\r\n        questions[4][4]=&quot;unicode&quot;;\r\n        \r\n        questions[5][0]=&quot;Which statement is used to exit a loop in JAVA?&quot;;\r\n        questions[5][1]=&quot;halt&quot;;\r\n        questions[5][2]=&quot;stop&quot;;\r\n        questions[5][3]=&quot;end&quot;;\r\n        questions[5][4]=&quot;break&quot;;  //correct\r\n        \r\n        questions[6][0]=&quot;Which of the following is not a primitive data type in JAVA?&quot;;\r\n        questions[6][1]=&quot;int&quot;;\r\n        questions[6][2]=&quot;float&quot;;\r\n        questions[6][3]=&quot;boolean&quot;;\r\n        questions[6][4]=&quot;object&quot;;  //correct\r\n        \r\n        questions[7][0]=&quot;Which JAVA loop is guaranteed to execute at least once?&quot;;\r\n        questions[7][1]=&quot;while&quot;;\r\n        questions[7][2]=&quot;do-while&quot;;  //correct\r\n        questions[7][3]=&quot;for&quot;;\r\n        questions[7][4]=&quot;for-each&quot;;\r\n        \r\n        questions[8][0]=&quot;Which method is called automatically when an object is created from a class?&quot;;\r\n        questions[8][1]=&quot;start()&quot;;\r\n        questions[8][2]=&quot;initialize()&quot;;\r\n        questions[8][3]=&quot;main()&quot;;\r\n        questions[8][4]=&quot;constructor()&quot;;  //correct\r\n\r\n        \r\n        questions[9][0]=&quot;Which JAVA keyword is used to explicitly raise an exception?&quot;;\r\n        questions[9][1]=&quot;raise&quot;;\r\n        questions[9][2]=&quot;throw&quot;;   //correct\r\n        questions[9][3]=&quot;exception&quot;;\r\n        questions[9][4]=&quot;try&quot;;   \r\n        \r\n        answers[0][1]=&quot;Execute Java Code&quot;;\r\n        answers[1][1]=&quot;final&quot;;\r\n        answers[2][1]=&quot;public&quot;;\r\n        answers[3][1]=&quot;MyClass obj = new MyClass();&quot;;\r\n        answers[4][1]=&quot;char&quot;;\r\n        answers[5][1]=&quot;break&quot;;\r\n        answers[6][1]=&quot;object&quot;;\r\n        answers[7][1]=&quot;do-while&quot;;\r\n        answers[8][1]=&quot;constructor()&quot;;\r\n        answers[9][1]=&quot;throw&quot;;\r\n        \r\n        buttonGroup1.add(opt1);\r\n        buttonGroup1.add(opt2);\r\n        buttonGroup1.add(opt3);\r\n        buttonGroup1.add(opt4);\r\n        submit.setEnabled(false);\r\n        add(submit);\r\n        start(count);\r\n        setVisible(true);\r\n        \r\n    }\r\n\r\n    QuizPG1() {\r\n        throw new UnsupportedOperationException(&quot;Not supported yet.&quot;); //To change body of generated methods, choose Tools | Templates.\r\n    }\r\n private void nextActionPerformed(java.awt.event.ActionEvent evt) {                                     \r\n        // TODO add your handling code here:\r\n     //   DefaultTableModel tb = (DefaultTableModel) tablemodel1.getModel();\r\n        repaint();\r\n        \r\n        answerGiven = 1;\r\n        if (buttonGroup1.getSelection()== null){\r\n               userans[count][0]=&quot;&quot;;\r\n           }else{\r\n               userans[count][0]=buttonGroup1.getSelection().getActionCommand();\r\n           }\r\n        if(count == 8){\r\n            next.setEnabled(false);\r\n            submit.setEnabled(true);\r\n        }\r\n        count++;\r\n        start(count);\r\n    }                                    \r\n\r\n    private void submitActionPerformed(java.awt.event.ActionEvent evt) {                                       \r\n        // TODO add your handling code here:\r\n        \r\n        answerGiven = 1;\r\n        if (buttonGroup1.getSelection()==null){\r\n               userans[count][0]=&quot;&quot;;\r\n           }else{\r\n               userans[count][0]=buttonGroup1.getSelection().getActionCommand();\r\n           }\r\n             for(int i=0 ; i&lt;userans.length;i++){\r\n                 if(userans[i][0].equals(answers[i][1])){\r\n                     score += 10;\r\n                 }\r\n             }\r\n             setVisible(false);\r\n             new Score(name,score);\r\n             //SCOREtf.setText(score);\r\n                 \r\n    }                                      \r\n\r\n    /**\r\n     * @param args the command line arguments\r\n     */\r\n    public void paint(Graphics g){\r\n        super.paint(g);\r\n        \r\n        String time = &quot;Time Left:&quot;+ timer + &quot;seconds&quot;;\r\n        g.setColor(Color.RED);\r\n        g.setFont(new Font(&quot;Tahoma&quot;,Font.BOLD,25));\r\n        if (timer &gt; 0){\r\n           g.drawString(time, 900, 500);    \r\n        }else{\r\n            g.drawString(&quot;Times Up!!&quot;, 900, 500);   \r\n        }\r\n       timer--;\r\n       \r\n       try{\r\n           Thread.sleep(1000);\r\n           repaint();\r\n       }  catch (InterruptedException ex) {\r\n              Logger.getLogger(QuizPG1.class.getName()).log(Level.SEVERE, null, ex);\r\n          }\r\n       if (answerGiven == 1){\r\n           answerGiven = 0;\r\n           timer = 15;\r\n       }else if (timer &lt; 0) {\r\n           \r\n           if(count == 8){\r\n            next.setEnabled(false);\r\n            submit.setEnabled(true);\r\n         } \r\n           if(count == 9){  //submit button\r\n               if(count &lt; userans.length){\r\n             if (buttonGroup1.getSelection()==null){\r\n               userans[count][0]=&quot;&quot;;\r\n           }else{\r\n               userans[count][0]=buttonGroup1.getSelection().getActionCommand();\r\n           }\r\n       }\r\n              \r\n             for(int i=0 ; i&lt;userans.length;i++){\r\n                 if(userans[i][0]!= null &amp;&amp; userans[i][0].equals(answers[i][1])){\r\n                     score += 10;\r\n                 }\r\n             }\r\n             setVisible(false);\r\n              new Score(name,score);\r\n         } else{      // next button\r\n           \r\n           if (buttonGroup1.getSelection()==null){\r\n               userans[count][0]=&quot;&quot;;\r\n           }else{\r\n               userans[count][0]=buttonGroup1.getSelection().getActionCommand();\r\n           }\r\n           count++;\r\n           start(count); \r\n           }\r\n       }\r\n    \r\n    }\r\n   \r\n    public void start(int count){\r\n        qno.setText(&quot;&quot;+ (count +1)+&quot;.&quot;);\r\n        question.setText(questions[count][0]);\r\n        opt1.setText(questions[count][1]);\r\n        opt1.setActionCommand(questions[count][1]);\r\n        \r\n        opt2.setText(questions[count][2]);    \r\n        opt2.setActionCommand(questions[count][2]);\r\n        \r\n        opt3.setText(questions[count][3]);        \r\n        opt3.setActionCommand(questions[count][3]);\r\n        \r\n        opt4.setText(questions[count][4]);\r\n        opt4.setActionCommand(questions[count][4]);\r\n        \r\n        buttonGroup1.clearSelection();\r\n    }\r\n    public static void main(String args[]) {\r\n        /* Set the Nimbus look and feel */\r\n        //&lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot; Look and feel setting code (optional) &quot;&gt;\r\n        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.\r\n         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html \r\n         */\r\n        try {\r\n            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {\r\n                if (&quot;Nimbus&quot;.equals(info.getName())) {\r\n                    javax.swing.UIManager.setLookAndFeel(info.getClassName());\r\n                    break;\r\n                }\r\n            }\r\n        } catch (ClassNotFoundException ex) {\r\n            java.util.logging.Logger.getLogger(QuizPG1.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\r\n        } catch (InstantiationException ex) {\r\n            java.util.logging.Logger.getLogger(QuizPG1.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\r\n        } catch (IllegalAccessException ex) {\r\n            java.util.logging.Logger.getLogger(QuizPG1.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\r\n        } catch (javax.swing.UnsupportedLookAndFeelException ex) {\r\n            java.util.logging.Logger.getLogger(QuizPG1.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\r\n        }\r\n        //&lt;/editor-fold&gt;\r\n\r\n        /* Create and display the form */\r\n        java.awt.EventQueue.invokeLater(new Runnable() {\r\n            public void run() {\r\n                new QuizPG1(&quot;user&quot;).setVisible(true);\r\n            }\r\n        });\r\n    }\r\n\r\n    // Variables declaration - do not modify                     \r\n    private javax.swing.ButtonGroup buttonGroup1;\r\n    private javax.swing.JLabel jLabel1;\r\n    private javax.swing.JPanel jPanel1;\r\n    private javax.swing.JButton next;\r\n    private javax.swing.JRadioButton opt1;\r\n    private javax.swing.JRadioButton opt2;\r\n    private javax.swing.JRadioButton opt3;\r\n    private javax.swing.JRadioButton opt4;\r\n    private javax.swing.JLabel qno;\r\n    private javax.swing.JLabel question;\r\n    private javax.swing.JButton submit;\r\n    // End of variables declaration                   \r\n}\r\n\r\n```\r\n\r\n\r\n\r\nI tried this piece of code in paint method.\r\n\r\n\r\n```\r\nfor(int i = 0; i &lt; userans.length; i++){\r\n    if(userans[i][0] != null &amp;&amp; userans[i][0].equals(answers[i][1])){\r\n        score += 10;\r\n    }\r\n}```\r\n\r\nBut it is still giving error.So i removed that amendment from my original code. Please provide me the solution.\r\nThe program is simple but on runtime I am having the Array index out of bound error.\r\n","title":"I have having Array Index Out Of Bound Error in this code","body":"<p>HERE IS THE JAVA CODE.HAVING ARRAY INDEX OUT OF BOUND ERROR ON RUNTIME.\ni don't know what to do. I have tried every possible solution for this.\nThis is the error i am getting &quot;Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.ArrayIndexOutOfBoundsException: 1\nat QuizPG1.(QuizPG1.java:90)\nat QuizPG1$3.run(QuizPG1.java:330)&quot;</p>\n<pre><code>import java.awt.Color;\nimport java.awt.Font;\nimport java.awt.Graphics;\nimport java.util.logging.Level;\nimport java.util.logging.Logger;\nimport javax.swing.ButtonGroup;\nimport java.util.Timer;\nimport java.util.TimerTask;\nimport javax.swing.table.DefaultTableModel;\n\n\npublic class QuizPG1 extends javax.swing.JFrame {\n      String questions[][]=new String [10][5];\n      String answers [][]=new String [10][1];\n      String userans[][]=new String[10][1];\n      public static int timer = 15;\n      public static int answerGiven = 0;\n      public static int count = 0;\n      public static int score = 0;\n      String name;\n    public QuizPG1(String name) {\n        this.name = name;\n        initComponents();\n        setSize(950,750);\n        setLocation(500,150);\n        \n        questions[0][0]=&quot;What is the general purpose of JAVA VIRTUAL MACHINE(JVM)?&quot;;\n        questions[0][1]=&quot;Compile Java Code&quot;;\n        questions[0][2]=&quot;Execute Java Code&quot;;  //correct \n        questions[0][3]=&quot;Debug Java Code&quot;;\n        questions[0][4]=&quot;Package Java Code&quot;;\n        \n        questions[1][0]=&quot;Which keyword is used to define constant variable in JAVA?&quot;;\n        questions[1][1]=&quot;final&quot;;   //correct\n        questions[1][2]=&quot;const&quot;;\n        questions[1][3]=&quot;var&quot;;\n        questions[1][4]=&quot;static&quot;;\n        \n        \n        questions[2][0]=&quot;In JAVA which access modifier provides the widest visibility?&quot;;\n        questions[2][1]=&quot;private&quot;;\n        questions[2][2]=&quot;default&quot;;\n        questions[2][3]=&quot;protected&quot;;\n        questions[2][4]=&quot;public&quot;;  //correct\n        \n        questions[3][0]=&quot;Which is the correct syntax to create an object of a class named 'My Class'?&quot;;\n        questions[3][1]=&quot;object MyClass = new object;&quot;;\n        questions[3][2]=&quot;MyClass obj = create MyClass();&quot;;\n        questions[3][3]=&quot;MyClass obj = new MyClass();&quot;;   //correct\n        questions[3][4]=&quot;object obj = new MyClass;&quot;;\n        \n        questions[4][0]=&quot;Which data type is used to store a single Unicode character in JAVA?&quot;;\n        questions[4][1]=&quot;char&quot;;  //correct\n        questions[4][2]=&quot;string&quot;;\n        questions[4][3]=&quot;character&quot;;\n        questions[4][4]=&quot;unicode&quot;;\n        \n        questions[5][0]=&quot;Which statement is used to exit a loop in JAVA?&quot;;\n        questions[5][1]=&quot;halt&quot;;\n        questions[5][2]=&quot;stop&quot;;\n        questions[5][3]=&quot;end&quot;;\n        questions[5][4]=&quot;break&quot;;  //correct\n        \n        questions[6][0]=&quot;Which of the following is not a primitive data type in JAVA?&quot;;\n        questions[6][1]=&quot;int&quot;;\n        questions[6][2]=&quot;float&quot;;\n        questions[6][3]=&quot;boolean&quot;;\n        questions[6][4]=&quot;object&quot;;  //correct\n        \n        questions[7][0]=&quot;Which JAVA loop is guaranteed to execute at least once?&quot;;\n        questions[7][1]=&quot;while&quot;;\n        questions[7][2]=&quot;do-while&quot;;  //correct\n        questions[7][3]=&quot;for&quot;;\n        questions[7][4]=&quot;for-each&quot;;\n        \n        questions[8][0]=&quot;Which method is called automatically when an object is created from a class?&quot;;\n        questions[8][1]=&quot;start()&quot;;\n        questions[8][2]=&quot;initialize()&quot;;\n        questions[8][3]=&quot;main()&quot;;\n        questions[8][4]=&quot;constructor()&quot;;  //correct\n\n        \n        questions[9][0]=&quot;Which JAVA keyword is used to explicitly raise an exception?&quot;;\n        questions[9][1]=&quot;raise&quot;;\n        questions[9][2]=&quot;throw&quot;;   //correct\n        questions[9][3]=&quot;exception&quot;;\n        questions[9][4]=&quot;try&quot;;   \n        \n        answers[0][1]=&quot;Execute Java Code&quot;;\n        answers[1][1]=&quot;final&quot;;\n        answers[2][1]=&quot;public&quot;;\n        answers[3][1]=&quot;MyClass obj = new MyClass();&quot;;\n        answers[4][1]=&quot;char&quot;;\n        answers[5][1]=&quot;break&quot;;\n        answers[6][1]=&quot;object&quot;;\n        answers[7][1]=&quot;do-while&quot;;\n        answers[8][1]=&quot;constructor()&quot;;\n        answers[9][1]=&quot;throw&quot;;\n        \n        buttonGroup1.add(opt1);\n        buttonGroup1.add(opt2);\n        buttonGroup1.add(opt3);\n        buttonGroup1.add(opt4);\n        submit.setEnabled(false);\n        add(submit);\n        start(count);\n        setVisible(true);\n        \n    }\n\n    QuizPG1() {\n        throw new UnsupportedOperationException(&quot;Not supported yet.&quot;); //To change body of generated methods, choose Tools | Templates.\n    }\n private void nextActionPerformed(java.awt.event.ActionEvent evt) {                                     \n        // TODO add your handling code here:\n     //   DefaultTableModel tb = (DefaultTableModel) tablemodel1.getModel();\n        repaint();\n        \n        answerGiven = 1;\n        if (buttonGroup1.getSelection()== null){\n               userans[count][0]=&quot;&quot;;\n           }else{\n               userans[count][0]=buttonGroup1.getSelection().getActionCommand();\n           }\n        if(count == 8){\n            next.setEnabled(false);\n            submit.setEnabled(true);\n        }\n        count++;\n        start(count);\n    }                                    \n\n    private void submitActionPerformed(java.awt.event.ActionEvent evt) {                                       \n        // TODO add your handling code here:\n        \n        answerGiven = 1;\n        if (buttonGroup1.getSelection()==null){\n               userans[count][0]=&quot;&quot;;\n           }else{\n               userans[count][0]=buttonGroup1.getSelection().getActionCommand();\n           }\n             for(int i=0 ; i&lt;userans.length;i++){\n                 if(userans[i][0].equals(answers[i][1])){\n                     score += 10;\n                 }\n             }\n             setVisible(false);\n             new Score(name,score);\n             //SCOREtf.setText(score);\n                 \n    }                                      \n\n    /**\n     * @param args the command line arguments\n     */\n    public void paint(Graphics g){\n        super.paint(g);\n        \n        String time = &quot;Time Left:&quot;+ timer + &quot;seconds&quot;;\n        g.setColor(Color.RED);\n        g.setFont(new Font(&quot;Tahoma&quot;,Font.BOLD,25));\n        if (timer &gt; 0){\n           g.drawString(time, 900, 500);    \n        }else{\n            g.drawString(&quot;Times Up!!&quot;, 900, 500);   \n        }\n       timer--;\n       \n       try{\n           Thread.sleep(1000);\n           repaint();\n       }  catch (InterruptedException ex) {\n              Logger.getLogger(QuizPG1.class.getName()).log(Level.SEVERE, null, ex);\n          }\n       if (answerGiven == 1){\n           answerGiven = 0;\n           timer = 15;\n       }else if (timer &lt; 0) {\n           \n           if(count == 8){\n            next.setEnabled(false);\n            submit.setEnabled(true);\n         } \n           if(count == 9){  //submit button\n               if(count &lt; userans.length){\n             if (buttonGroup1.getSelection()==null){\n               userans[count][0]=&quot;&quot;;\n           }else{\n               userans[count][0]=buttonGroup1.getSelection().getActionCommand();\n           }\n       }\n              \n             for(int i=0 ; i&lt;userans.length;i++){\n                 if(userans[i][0]!= null &amp;&amp; userans[i][0].equals(answers[i][1])){\n                     score += 10;\n                 }\n             }\n             setVisible(false);\n              new Score(name,score);\n         } else{      // next button\n           \n           if (buttonGroup1.getSelection()==null){\n               userans[count][0]=&quot;&quot;;\n           }else{\n               userans[count][0]=buttonGroup1.getSelection().getActionCommand();\n           }\n           count++;\n           start(count); \n           }\n       }\n    \n    }\n   \n    public void start(int count){\n        qno.setText(&quot;&quot;+ (count +1)+&quot;.&quot;);\n        question.setText(questions[count][0]);\n        opt1.setText(questions[count][1]);\n        opt1.setActionCommand(questions[count][1]);\n        \n        opt2.setText(questions[count][2]);    \n        opt2.setActionCommand(questions[count][2]);\n        \n        opt3.setText(questions[count][3]);        \n        opt3.setActionCommand(questions[count][3]);\n        \n        opt4.setText(questions[count][4]);\n        opt4.setActionCommand(questions[count][4]);\n        \n        buttonGroup1.clearSelection();\n    }\n    public static void main(String args[]) {\n        /* Set the Nimbus look and feel */\n        //&lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot; Look and feel setting code (optional) &quot;&gt;\n        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.\n         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html \n         */\n        try {\n            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {\n                if (&quot;Nimbus&quot;.equals(info.getName())) {\n                    javax.swing.UIManager.setLookAndFeel(info.getClassName());\n                    break;\n                }\n            }\n        } catch (ClassNotFoundException ex) {\n            java.util.logging.Logger.getLogger(QuizPG1.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\n        } catch (InstantiationException ex) {\n            java.util.logging.Logger.getLogger(QuizPG1.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\n        } catch (IllegalAccessException ex) {\n            java.util.logging.Logger.getLogger(QuizPG1.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\n        } catch (javax.swing.UnsupportedLookAndFeelException ex) {\n            java.util.logging.Logger.getLogger(QuizPG1.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\n        }\n        //&lt;/editor-fold&gt;\n\n        /* Create and display the form */\n        java.awt.EventQueue.invokeLater(new Runnable() {\n            public void run() {\n                new QuizPG1(&quot;user&quot;).setVisible(true);\n            }\n        });\n    }\n\n    // Variables declaration - do not modify                     \n    private javax.swing.ButtonGroup buttonGroup1;\n    private javax.swing.JLabel jLabel1;\n    private javax.swing.JPanel jPanel1;\n    private javax.swing.JButton next;\n    private javax.swing.JRadioButton opt1;\n    private javax.swing.JRadioButton opt2;\n    private javax.swing.JRadioButton opt3;\n    private javax.swing.JRadioButton opt4;\n    private javax.swing.JLabel qno;\n    private javax.swing.JLabel question;\n    private javax.swing.JButton submit;\n    // End of variables declaration                   \n}\n\n</code></pre>\n<p>I tried this piece of code in paint method.</p>\n<pre><code>for(int i = 0; i &lt; userans.length; i++){\n    if(userans[i][0] != null &amp;&amp; userans[i][0].equals(answers[i][1])){\n        score += 10;\n    }\n}```\n\nBut it is still giving error.So i removed that amendment from my original code. Please provide me the solution.\nThe program is simple but on runtime I am having the Array index out of bound error.\n</code></pre>\n"},{"tags":["java","spring","event-listener"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1692966630,"post_id":76977187,"comment_id":135700416,"body_markdown":"Probably by design. Don&#39;t count on `publishEvent` calling all listeners synchronously.","body":"Probably by design. Don&#39;t count on <code>publishEvent</code> calling all listeners synchronously."},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1692966771,"post_id":76977187,"comment_id":135700444,"body_markdown":"@Jorn No. It is synchronous by default. You annotate your listener with `@Async` if it can be async. https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/event/EventListener.html They haven&#39;t used that annotation, so they can count on it.","body":"@Jorn No. It is synchronous by default. You annotate your listener with <code>@Async</code> if it can be async. <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/event/EventListener.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-framework/docs/current/javadoc-api/org&zwnj;&#8203;/&hellip;</a> They haven&#39;t used that annotation, so they can count on it."}],"answers":[{"tags":[],"owner":{"account_id":9588131,"reputation":206,"user_id":7120065,"display_name":"CodeSun"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692968091,"creation_date":1692968091,"answer_id":76977406,"question_id":76977187,"body_markdown":"Have a look at the ApplicationEventPublisher.html documentation. [https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/ApplicationEventPublisher.html#publishEvent(java.lang.Object)][1]\r\n\r\n&gt; Such an event publication step is effectively a hand-off to the multicaster and does not imply synchronous/asynchronous execution or even immediate execution at all. Event listeners are encouraged to be as efficient as possible, individually using asynchronous execution for longer-running and potentially blocking operations.","title":"Spring event publisher is not waiting listener","body":"<p>Have a look at the ApplicationEventPublisher.html documentation. [https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/ApplicationEventPublisher.html#publishEvent(java.lang.Object)][1]</p>\n<blockquote>\n<p>Such an event publication step is effectively a hand-off to the multicaster and does not imply synchronous/asynchronous execution or even immediate execution at all. Event listeners are encouraged to be as efficient as possible, individually using asynchronous execution for longer-running and potentially blocking operations.</p>\n</blockquote>\n"}],"owner":{"account_id":16760288,"reputation":41,"user_id":12115215,"display_name":"Bedirhan G&#246;kce"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":113,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1692968091,"creation_date":1692966553,"question_id":76977187,"body_markdown":"I have 3 classes on 2 different projects. I want to publish event from one project and wait for the end of the listener method on the other project. But in my case publisher method is not waiting for the listeners. After the end of publisher method, listener methods starts running.\r\n\r\nHere is Minimal, Reproducible Example:\r\n\r\nIn project 1 I have 2 classes:\r\n\r\n    import org.springframework.context.ApplicationEvent;\r\n\r\n    public class ConfigEvent extends ApplicationEvent {\r\n\r\n        private static final long serialVersionUID = 144711L;\r\n\r\n        public ConfigEvent(Object source) {\r\n            super(source);\r\n        }\r\n    }\r\n \r\n\r\n\r\n    @Configuration\r\n    public class Config {\r\n\r\n        @Autowired\r\n        ApplicationEventPublisher publisher;\r\n\r\n        @Bean\r\n        public Object object(Object unnecessaryObject) {\r\n            System.out.println(&quot;Before publish&quot;);\r\n            publisher.publishEvent(new ConfigEvent(this));\r\n            System.out.println(&quot;After publish&quot;);\r\n            Object obj= new Object ();\r\n\r\n            System.out.println(&quot;End of publisher&quot;);\r\n            return obj;\r\n        }\r\n    }\r\nIn project 2:\r\n\r\n    @Component\r\n    public class MyConfig implements ApplicationListener&lt;ConfigEvent&gt; {\r\n        @Override\r\n        public void onApplicationEvent(ConfigEvent event) {\r\n            System.out.println(&quot;Start of Event listener&quot;);\r\n            System.out.println(&quot;End of Event listener&quot;);\r\n        }\r\n    }\r\n\r\n\r\nIn the above case output order is like this:\r\n\r\n - Before publish \r\n - After publish \r\n - End of publish method \r\n - Start of Event listener \r\n - End of Event listener\r\n\r\nMy publisher method was waiting for the listeners. But after the changing spring version, it&#39;s not waiting anymore.\r\n\r\nHere is the expected output order:\r\n - Before publish \r\n - Start of Event listener \r\n - End of Event listener\r\n - After publish \r\n - End of publish method \r\n\r\nIs there a bug or this is the correct working of application listeners? And what can I do to achieve this? \r\n \r\n","title":"Spring event publisher is not waiting listener","body":"<p>I have 3 classes on 2 different projects. I want to publish event from one project and wait for the end of the listener method on the other project. But in my case publisher method is not waiting for the listeners. After the end of publisher method, listener methods starts running.</p>\n<p>Here is Minimal, Reproducible Example:</p>\n<p>In project 1 I have 2 classes:</p>\n<pre><code>import org.springframework.context.ApplicationEvent;\n\npublic class ConfigEvent extends ApplicationEvent {\n\n    private static final long serialVersionUID = 144711L;\n\n    public ConfigEvent(Object source) {\n        super(source);\n    }\n}\n\n\n\n@Configuration\npublic class Config {\n\n    @Autowired\n    ApplicationEventPublisher publisher;\n\n    @Bean\n    public Object object(Object unnecessaryObject) {\n        System.out.println(&quot;Before publish&quot;);\n        publisher.publishEvent(new ConfigEvent(this));\n        System.out.println(&quot;After publish&quot;);\n        Object obj= new Object ();\n\n        System.out.println(&quot;End of publisher&quot;);\n        return obj;\n    }\n}\n</code></pre>\n<p>In project 2:</p>\n<pre><code>@Component\npublic class MyConfig implements ApplicationListener&lt;ConfigEvent&gt; {\n    @Override\n    public void onApplicationEvent(ConfigEvent event) {\n        System.out.println(&quot;Start of Event listener&quot;);\n        System.out.println(&quot;End of Event listener&quot;);\n    }\n}\n</code></pre>\n<p>In the above case output order is like this:</p>\n<ul>\n<li>Before publish</li>\n<li>After publish</li>\n<li>End of publish method</li>\n<li>Start of Event listener</li>\n<li>End of Event listener</li>\n</ul>\n<p>My publisher method was waiting for the listeners. But after the changing spring version, it's not waiting anymore.</p>\n<p>Here is the expected output order:</p>\n<ul>\n<li>Before publish</li>\n<li>Start of Event listener</li>\n<li>End of Event listener</li>\n<li>After publish</li>\n<li>End of publish method</li>\n</ul>\n<p>Is there a bug or this is the correct working of application listeners? And what can I do to achieve this?</p>\n"},{"tags":["java","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":15390740,"reputation":186,"user_id":11103550,"display_name":"Mauricio"},"score":0,"creation_date":1692910888,"post_id":76972633,"comment_id":135692610,"body_markdown":"Could you provide examples of the code for the save procedure of both entities?","body":"Could you provide examples of the code for the save procedure of both entities?"},{"owner":{"account_id":22307976,"reputation":95,"user_id":16532376,"display_name":"sai23"},"score":0,"creation_date":1692911631,"post_id":76972633,"comment_id":135692745,"body_markdown":"updated the question with more details","body":"updated the question with more details"},{"owner":{"account_id":15390740,"reputation":186,"user_id":11103550,"display_name":"Mauricio"},"score":0,"creation_date":1692911840,"post_id":76972633,"comment_id":135692781,"body_markdown":"Still missing the part where you build the entities used by the Repository.","body":"Still missing the part where you build the entities used by the Repository."},{"owner":{"account_id":22307976,"reputation":95,"user_id":16532376,"display_name":"sai23"},"score":0,"creation_date":1692913330,"post_id":76972633,"comment_id":135692989,"body_markdown":"updated now, please check","body":"updated now, please check"}],"answers":[{"tags":[],"owner":{"account_id":15390740,"reputation":186,"user_id":11103550,"display_name":"Mauricio"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692968086,"creation_date":1692968086,"answer_id":76977405,"question_id":76972633,"body_markdown":"According to your code, you are not associating EntityOne to EntityTwo has a field directly (using @OneToMany is not enough). Try saving EntityOne and then EntityTwo having it assigned its entityOne field. That should be enough.","title":"PK of the first Entity is not updating in second Entites referenced column --&gt; hibernate spring boot","body":"<p>According to your code, you are not associating EntityOne to EntityTwo has a field directly (using @OneToMany is not enough). Try saving EntityOne and then EntityTwo having it assigned its entityOne field. That should be enough.</p>\n"}],"owner":{"account_id":22307976,"reputation":95,"user_id":16532376,"display_name":"sai23"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692968086,"creation_date":1692907782,"question_id":76972633,"body_markdown":"As the title says, I&#39;ve 2 entity classes \r\n\r\nEntity - 1\r\n\r\n    @Entity\r\n    @Table(name = &quot;entity1&quot;, schema = &quot;schema&quot;)\r\n    public class EntityOne {\r\n       \r\n       @Id\r\n       @GeneratedValue(strategy=GenerationType.SEQUENCE, generator = &quot;first_id_seq&quot;)\r\n       @SequenceGenerator(sequenceName = &quot;[schema].[first_id_seq]&quot;, name = &quot;first_id_seq&quot;, allocationSize = 1)\r\n       \r\n       @Column(name = &quot;id&quot;)\r\n       private Integer id;\r\n       \r\n       private String name;\r\n       \r\n       @OneToMany(mappedBy = &quot;entityOne&quot;, cascade=CascadeType.ALL)\r\n       private List&lt;EntityTwo&gt; entityTwo;\r\n    }\r\nEntity - 2\r\n\r\n    @Entity\r\n    @Table(name = &quot;entity2&quot;, schema = &quot;schema&quot;)\r\n    public class EntityTwo {\r\n       \r\n       @Id\r\n       @GeneratedValue(strategy=GenerationType.SEQUENCE, generator = &quot;second_id_seq&quot;)\r\n       @SequenceGenerator(sequenceName = &quot;[schema].[second_id_seq]&quot;, name = &quot;second_id_seq&quot;, allocationSize = 1)\r\n       @Column(name = &quot;id&quot;)\r\n       private Integer id;\r\n       \r\n       @Column(name = &quot;vendor_id&quot;)\r\n       private Integer vendorId;\r\n\r\n       private String name;\r\n       \r\n       @ManyToOne(fetch = FetchType.LAZY)\r\n       @JoinColumn(name = &quot;vendor_id&quot;, referencedColumnName = &quot;id&quot;, nullable = false, insertable = false, updatable = false)\r\n       private EntityOne entityOne;\r\n    }\r\n\r\nFinally when saving it i&#39;ve DAO layer with method like this\r\n\r\n    @Repository\r\n    public interface Repository extends JpaRepository&lt;EntityOne, Integer&gt; {\r\n    }\r\n\r\n    public class DAO {\r\n        \r\n        @Autowired\r\n        private Repository repository;\r\n\r\n    //consider this method getting called from controller\r\n            public EnitityOne mapRequestToEntity(Request request) {\r\n             EntityOne entityOne = new EntityOne();\r\n             entityOne.setName(request.getName);\r\n             List&lt;EntityTwo&gt; entityTwo = new ArrayList&lt;&gt;();\r\n             // setting entityTwo values here from the request\r\n             entityOne.setEntityTwo(entityTwo);\r\n             entityOne = save(entityOne);\r\n             return entityOne;\r\n    }\r\n        \r\n        public EntityOne save(EntityOne entityOne) {\r\n            repository.saveAndFlush(entityOne);\r\n        }\r\n    }\r\n\r\nI&#39;m saving the EntityOne from the controller, but when saving EnityOne&#39;s id(PK) should be mapped to EntityTwo&#39;s vendor_id and save but this is not happening. It is saving as `NULL`(null is accepted in db just for POC)\r\n","title":"PK of the first Entity is not updating in second Entites referenced column --&gt; hibernate spring boot","body":"<p>As the title says, I've 2 entity classes</p>\n<p>Entity - 1</p>\n<pre><code>@Entity\n@Table(name = &quot;entity1&quot;, schema = &quot;schema&quot;)\npublic class EntityOne {\n   \n   @Id\n   @GeneratedValue(strategy=GenerationType.SEQUENCE, generator = &quot;first_id_seq&quot;)\n   @SequenceGenerator(sequenceName = &quot;[schema].[first_id_seq]&quot;, name = &quot;first_id_seq&quot;, allocationSize = 1)\n   \n   @Column(name = &quot;id&quot;)\n   private Integer id;\n   \n   private String name;\n   \n   @OneToMany(mappedBy = &quot;entityOne&quot;, cascade=CascadeType.ALL)\n   private List&lt;EntityTwo&gt; entityTwo;\n}\n</code></pre>\n<p>Entity - 2</p>\n<pre><code>@Entity\n@Table(name = &quot;entity2&quot;, schema = &quot;schema&quot;)\npublic class EntityTwo {\n   \n   @Id\n   @GeneratedValue(strategy=GenerationType.SEQUENCE, generator = &quot;second_id_seq&quot;)\n   @SequenceGenerator(sequenceName = &quot;[schema].[second_id_seq]&quot;, name = &quot;second_id_seq&quot;, allocationSize = 1)\n   @Column(name = &quot;id&quot;)\n   private Integer id;\n   \n   @Column(name = &quot;vendor_id&quot;)\n   private Integer vendorId;\n\n   private String name;\n   \n   @ManyToOne(fetch = FetchType.LAZY)\n   @JoinColumn(name = &quot;vendor_id&quot;, referencedColumnName = &quot;id&quot;, nullable = false, insertable = false, updatable = false)\n   private EntityOne entityOne;\n}\n</code></pre>\n<p>Finally when saving it i've DAO layer with method like this</p>\n<pre><code>@Repository\npublic interface Repository extends JpaRepository&lt;EntityOne, Integer&gt; {\n}\n\npublic class DAO {\n    \n    @Autowired\n    private Repository repository;\n\n//consider this method getting called from controller\n        public EnitityOne mapRequestToEntity(Request request) {\n         EntityOne entityOne = new EntityOne();\n         entityOne.setName(request.getName);\n         List&lt;EntityTwo&gt; entityTwo = new ArrayList&lt;&gt;();\n         // setting entityTwo values here from the request\n         entityOne.setEntityTwo(entityTwo);\n         entityOne = save(entityOne);\n         return entityOne;\n}\n    \n    public EntityOne save(EntityOne entityOne) {\n        repository.saveAndFlush(entityOne);\n    }\n}\n</code></pre>\n<p>I'm saving the EntityOne from the controller, but when saving EnityOne's id(PK) should be mapped to EntityTwo's vendor_id and save but this is not happening. It is saving as <code>NULL</code>(null is accepted in db just for POC)</p>\n"},{"tags":["java","arrays","algorithm","matrix","point"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1692963891,"post_id":76976614,"comment_id":135699811,"body_markdown":"Your question is really how to find the points. You don&#39;t have a problem printing them, do you?","body":"Your question is really how to find the points. You don&#39;t have a problem printing them, do you?"},{"owner":{"account_id":29257380,"reputation":19,"user_id":22415274,"display_name":"imtrying727"},"score":0,"creation_date":1692965725,"post_id":76976614,"comment_id":135700207,"body_markdown":"@aled I have this application that find the delta minimum, and it works, I have problem to how put the closest pair of point into an array to make them in a bright color in the panel. Cause the program always color the wrong points.","body":"@aled I have this application that find the delta minimum, and it works, I have problem to how put the closest pair of point into an array to make them in a bright color in the panel. Cause the program always color the wrong points."}],"answers":[{"tags":[],"owner":{"account_id":28578269,"reputation":142,"user_id":21879587,"display_name":"tamtejszystan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1692963231,"creation_date":1692963231,"answer_id":76976807,"question_id":76976614,"body_markdown":"Your solution is not correct, because in your outer loop you are adding the points to `bfList`:\r\n```java\r\nbfList.add(P[i]);\r\n```\r\nbefore even checking any condition. So, you have to move it to inner loop:\r\n```java\r\nfor (int i = 0; i &lt; n; i++) {\r\n    for (int j = i + 1; j &lt; n; j++) {\r\n        double deltam = distance(P[i], P[j]);\r\n        if (deltam &lt; delta1) {\r\n            delta1 = deltam;\r\n            bfList.clear(); // Clear the list and add the new closest points\r\n            bfList.add(P[i]);\r\n            bfList.add(P[j]);\r\n        }\r\n    }\r\n}\r\n\r\n```","title":"How can I print the closest Point?","body":"<p>Your solution is not correct, because in your outer loop you are adding the points to <code>bfList</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>bfList.add(P[i]);\n</code></pre>\n<p>before even checking any condition. So, you have to move it to inner loop:</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (int i = 0; i &lt; n; i++) {\n    for (int j = i + 1; j &lt; n; j++) {\n        double deltam = distance(P[i], P[j]);\n        if (deltam &lt; delta1) {\n            delta1 = deltam;\n            bfList.clear(); // Clear the list and add the new closest points\n            bfList.add(P[i]);\n            bfList.add(P[j]);\n        }\n    }\n}\n\n</code></pre>\n"}],"owner":{"account_id":29257380,"reputation":19,"user_id":22415274,"display_name":"imtrying727"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":1,"score":0,"last_activity_date":1692968049,"creation_date":1692961554,"question_id":76976614,"body_markdown":"I have my program with the closest pair of point in a array of n (number inserted by the user) points, I created the algorithm for it and it works giving back the minor delta (distance between points), I used the divide et impera approach.\r\nI tried to put them in a list when they go inside the BruteForce() method, like inside the brute force I start a method that do this:\r\n\r\n    public double bruteForce(Point[] P, int n) {\r\n\t\tdouble delta1 = Math.sqrt(Math.pow(FTCPPanel.WIDTH, 2) + Math.pow(FTCPPanel.HEIGHT, 2));\r\n\t\tfor (int i = 0; i &lt; n; i++) {\r\n\t\t\tbfList.add(P[i]);\r\n\t\t\t\r\n\t        for (int j = i+1; j &lt; n; j++) {\r\n\t\t\t    double deltam = distance(P[i],P[j]);\r\n\t\t\t    if(deltam &lt; delta1) {\r\n\t\t\t\t    delta1 = deltam;\t\t\t\r\n\t\t\t    }\r\n\t\t    }\r\n\t    }\r\n\t\t\r\n\t\treturn delta1;\r\n\t}\r\n\r\nBut it insert all the points of the beginning array P[n] inside it.\r\nI don&#39;t understand if the brute force works for every 2 or 3 points and then insert all the points in the list or idk.\r\nI just want to print my pair of closest points.\r\n\r\nI modified my code in this way:\r\n```\r\ndouble delta1=Math.sqrt(Math.pow(FTCPPanel.WIDTH, 2)+Math.pow(FTCPPanel.HEIGHT, 2));\r\n\t\tfor(int i=0; i&lt;n;i++) {\r\n\t\t\tfor(int j=i+1;j&lt;n;j++) {\r\n\t\t\t\tdouble deltam=distance(P[i],P[j]);\r\n\t\t\t\tif(deltam&lt;delta1) {\r\n\t\t\t\t\tdelta1=deltam;\t\r\n\t\t\t\t\tbfList.add(P[i]);\r\n\t\t\t\t\tbfList.add(P[j]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn delta1;\r\n\t}\r\n```\r\nand then I modified another class in this way:\r\n```\r\npublic Point[] closestPointsArray(List&lt;Point&gt; list,List&lt;Point&gt; list1) {\r\n\t\tint size1 = list.size(); //another list with other points that I checked\r\n\t\tint size = list1.size(); //the bruteforce one\r\n\t\tdouble dist = Double.MAX_VALUE;\r\n\t\tSystem.out.println(&quot;list&quot;+list); //this is just for my output\r\n\t\tPoint[]cp=list.toArray(new Point[size1]);\r\n\t\tPoint[] l= list1.toArray(new Point[size]);\r\n\t\tPoint[]cp1 = new Point[2];\r\n\t\t\r\n\t\tSystem.out.println(&quot;list l&quot;+list1);\r\n\t\tSystem.out.println(&quot;list cp&quot;+list);\r\n\t\t\r\n\t\tfor(int i=0;i&lt;size; i=i+2) { //I use this one to can the array and found the closest here in the bruteforce, but something is wrong\r\n\t\t\t    int j=i+1;\r\n\t\t\t\tdouble distij=distance(l[i],l[j]);\r\n\t\t\t\tif(distij&lt;=dist) {\r\n\t\t\t\t\tdist=distij;\r\n\t\t\t\t\tcp1[0]=l[i];\r\n\t\t\t\t\tcp1[1]=l[j];\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(list.isEmpty()) {\r\n\t\t\treturn cp1;\r\n\t\t}else {\r\n\t\t\tdouble distL=distance(cp1[0],cp1[1]);\r\n\t\t\tdouble distCP=distance(cp[0],cp[1]);\r\n\t\t\tSystem.out.println(&quot;dist L&quot;+distL);\r\n\t\t\tSystem.out.println(&quot;dist CP&quot;+distCP);\r\n\t\t\t\r\n\t\t\tif(distCP&lt;distL) {\r\n\t\t\t\treturn cp;\r\n\t\t\t}else {\r\n\t\t\t\treturn cp1;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t}\r\n```\r\nI think that in this way I can scan my list in pair of (0,1),(2,3)....\r\nbut I don&#39;t know why sometimes the distance is 0.... when it isn&#39;t.","title":"How can I print the closest Point?","body":"<p>I have my program with the closest pair of point in a array of n (number inserted by the user) points, I created the algorithm for it and it works giving back the minor delta (distance between points), I used the divide et impera approach.\nI tried to put them in a list when they go inside the BruteForce() method, like inside the brute force I start a method that do this:</p>\n<pre><code>public double bruteForce(Point[] P, int n) {\n    double delta1 = Math.sqrt(Math.pow(FTCPPanel.WIDTH, 2) + Math.pow(FTCPPanel.HEIGHT, 2));\n    for (int i = 0; i &lt; n; i++) {\n        bfList.add(P[i]);\n        \n        for (int j = i+1; j &lt; n; j++) {\n            double deltam = distance(P[i],P[j]);\n            if(deltam &lt; delta1) {\n                delta1 = deltam;            \n            }\n        }\n    }\n    \n    return delta1;\n}\n</code></pre>\n<p>But it insert all the points of the beginning array P[n] inside it.\nI don't understand if the brute force works for every 2 or 3 points and then insert all the points in the list or idk.\nI just want to print my pair of closest points.</p>\n<p>I modified my code in this way:</p>\n<pre><code>double delta1=Math.sqrt(Math.pow(FTCPPanel.WIDTH, 2)+Math.pow(FTCPPanel.HEIGHT, 2));\n        for(int i=0; i&lt;n;i++) {\n            for(int j=i+1;j&lt;n;j++) {\n                double deltam=distance(P[i],P[j]);\n                if(deltam&lt;delta1) {\n                    delta1=deltam;  \n                    bfList.add(P[i]);\n                    bfList.add(P[j]);\n                }\n            }\n        }\n        return delta1;\n    }\n</code></pre>\n<p>and then I modified another class in this way:</p>\n<pre><code>public Point[] closestPointsArray(List&lt;Point&gt; list,List&lt;Point&gt; list1) {\n        int size1 = list.size(); //another list with other points that I checked\n        int size = list1.size(); //the bruteforce one\n        double dist = Double.MAX_VALUE;\n        System.out.println(&quot;list&quot;+list); //this is just for my output\n        Point[]cp=list.toArray(new Point[size1]);\n        Point[] l= list1.toArray(new Point[size]);\n        Point[]cp1 = new Point[2];\n        \n        System.out.println(&quot;list l&quot;+list1);\n        System.out.println(&quot;list cp&quot;+list);\n        \n        for(int i=0;i&lt;size; i=i+2) { //I use this one to can the array and found the closest here in the bruteforce, but something is wrong\n                int j=i+1;\n                double distij=distance(l[i],l[j]);\n                if(distij&lt;=dist) {\n                    dist=distij;\n                    cp1[0]=l[i];\n                    cp1[1]=l[j];\n                \n            }\n        }\n        if(list.isEmpty()) {\n            return cp1;\n        }else {\n            double distL=distance(cp1[0],cp1[1]);\n            double distCP=distance(cp[0],cp[1]);\n            System.out.println(&quot;dist L&quot;+distL);\n            System.out.println(&quot;dist CP&quot;+distCP);\n            \n            if(distCP&lt;distL) {\n                return cp;\n            }else {\n                return cp1;\n            }\n        }\n        \n        \n    }\n</code></pre>\n<p>I think that in this way I can scan my list in pair of (0,1),(2,3)....\nbut I don't know why sometimes the distance is 0.... when it isn't.</p>\n"},{"tags":["java","maven","opencv","nixos"],"answers":[{"tags":[],"owner":{"account_id":12484704,"reputation":183,"user_id":9088304,"display_name":"Djaff"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692967886,"creation_date":1692967886,"answer_id":76977374,"question_id":76977042,"body_markdown":"Found the problem: my shade-plugin wasn&#39;t running since it was in the pluginManagement section. Moved it out and removed the pluginManagement entirely which solved it. ","title":"NoClassDefFoundError when attempting to use openCV in java while running NixOS","body":"<p>Found the problem: my shade-plugin wasn't running since it was in the pluginManagement section. Moved it out and removed the pluginManagement entirely which solved it.</p>\n"}],"owner":{"account_id":12484704,"reputation":183,"user_id":9088304,"display_name":"Djaff"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692967886,"creation_date":1692965181,"question_id":76977042,"body_markdown":"I&#39;m trying to follow a tutorial on the use of openCV in java while also learning how to use NixOS. \r\n\r\nI have the following flake:\r\n\r\n        {\r\n          inputs = {\r\n            nixpkgs.url = &quot;github:NixOS/nixpkgs/nixos-unstable&quot;;\r\n        flake-utils.url = &quot;github:numtide/flake-utils&quot;;\r\n      };\r\n      outputs = {\r\n        nixpkgs,\r\n        flake-utils,\r\n        ...\r\n      }:\r\n        flake-utils.lib.eachDefaultSystem (system: let\r\n          javaVersion = 19;\r\n    \r\n          overlays = [\r\n            (self: super: rec {\r\n              jdk = super.&quot;jdk${toString javaVersion}&quot;;\r\n              maven = super.maven.override {\r\n                inherit jdk;\r\n              };\r\n            })\r\n          ];\r\n          pkgs = import nixpkgs {inherit overlays system;};\r\n        in {\r\n          devShell = let\r\n            generateEditorConfig = pkgs.writeShellScriptBin &quot;generateEditorConfig&quot; &#39;&#39;\r\n              if [ ! -f .editorconfig ]; then\r\n                echo &quot;root = true&quot; &gt; .editorconfig\r\n                echo &quot;&quot; &gt;&gt; .editorconfig\r\n                echo &quot;[*]&quot; &gt;&gt; .editorconfig\r\n                echo &quot;end_of_line = lf&quot; &gt;&gt; .editorconfig\r\n                echo &quot;insert_final_newline = true&quot; &gt;&gt; .editorconfig\r\n                echo &quot;indent_style = tab&quot; &gt;&gt; .editorconfig\r\n                echo &quot;tab_width = 4&quot; &gt;&gt; .editorconfig\r\n                echo &quot;charset = utf-8&quot; &gt;&gt; .editorconfig\r\n                echo &quot;&quot; &gt;&gt; .editorconfig\r\n                echo &quot;[*.{yaml,yml}]&quot; &gt;&gt; .editorconfig\r\n                echo &quot;indent_style = space&quot; &gt;&gt; .editorconfig\r\n                echo &quot;indent_size = 2&quot; &gt;&gt; .editorconfig\r\n                echo &quot;&quot; &gt;&gt; .editorconfig\r\n                echo &quot;[*.{md,nix}]&quot; &gt;&gt; .editorconfig\r\n                echo &quot;indent_style = space&quot; &gt;&gt; .editorconfig\r\n                echo &quot;indent_size = 2&quot; &gt;&gt; .editorconfig\r\n              fi\r\n            &#39;&#39;;\r\n          in\r\n            pkgs.mkShell {\r\n              name = &quot;java&quot;;\r\n              buildInputs = with pkgs; [\r\n                jdk\r\n                maven\r\n                tomcat9\r\n                opencv\r\n              ];\r\n              shellHook = &#39;&#39;\r\n                export JAVA_HOME=${pkgs.jdk}\r\n                ${generateEditorConfig}/bin/generateEditorConfig\r\n              &#39;&#39;;\r\n            };\r\n        });\r\n    }\r\n\r\nJava file: src/main/java/NerfThis.java\r\n\r\n    import org.opencv.core.Mat;\r\n    import org.opencv.core.MatOfRect;\r\n    import org.opencv.core.Rect;\r\n    import org.opencv.core.Scalar;\r\n    import org.opencv.core.Size;\r\n    import org.opencv.imgcodecs.Imgcodecs;\r\n    import org.opencv.imgproc.Imgproc;\r\n    import org.opencv.objdetect.CascadeClassifier;\r\n    import org.opencv.objdetect.Objdetect;\r\n    \r\n    import nu.pattern.OpenCV;\r\n    \r\n    public class NerfThis {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tSystem.out.println(&quot;Test&quot;);\r\n    \t\tOpenCV.loadShared();\r\n    \t\t\r\n    \t\tString sourceImagePath = &quot;src/main/resources/face.jpeg&quot;;\r\n    \t\tString targetImagePath = &quot;src/main/resources/result.jpeg&quot;;\r\n    \t\t\r\n    \r\n    \t\tMat loadedImage = loadImage(sourceImagePath);\r\n    \t\tint minFaceSize = Math.round(loadedImage.rows() * 0.1f); \r\n    \t\tMatOfRect facesDetected = new MatOfRect();\r\n    \t\tCascadeClassifier cascadeClassifier = new CascadeClassifier();\r\n    \t\tcascadeClassifier.load(&quot;./src/main/resources/haarcascades/haarcascade_frontalface_alt.xml&quot;);\r\n    \t\tcascadeClassifier.detectMultiScale(loadedImage, \r\n      \t\t\tfacesDetected, \r\n      \t\t\t1.1, \r\n      \t\t\t3, \r\n    \t\t  Objdetect.CASCADE_SCALE_IMAGE, \r\n    \t\t  new Size(minFaceSize, minFaceSize), \r\n    \t\t  new Size() \r\n    \t\t);\r\n    \t\t\r\n    \t\tRect[] facesArray = facesDetected.toArray(); \r\n    \t\tfor(Rect face : facesArray) { \r\n    \t\t\tImgproc.rectangle(loadedImage, face.tl(), face.br(), new Scalar(0, 0, 255), 3); \r\n    \t\t} \r\n    \t\tsaveImage(loadedImage, targetImagePath);\r\n    \r\n    \t}\r\n    \r\n    \tpublic static Mat loadImage(String imagePath) {\r\n    \t\tImgcodecs imageCodecs = new Imgcodecs();\r\n    \t\treturn imageCodecs.imread(imagePath);\r\n    \t}\r\n    \r\n    \tpublic static void saveImage(Mat imageMatrix, String targetPath) {\r\n        \tImgcodecs imgcodecs = new Imgcodecs();\r\n        \timgcodecs.imwrite(targetPath, imageMatrix);\r\n    \t}\r\n    }\r\n\r\nAnd my pom:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    \r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n      xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n      &lt;groupId&gt;sigubrat-nerfThis&lt;/groupId&gt;\r\n      &lt;artifactId&gt;NerfThis&lt;/artifactId&gt;\r\n      &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    \r\n      &lt;name&gt;NerfThis&lt;/name&gt;\r\n      &lt;!-- FIXME change it to the project&#39;s website --&gt;\r\n      &lt;url&gt;http://www.example.com&lt;/url&gt;\r\n    \r\n      &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;maven.compiler.source&gt;19&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;19&lt;/maven.compiler.target&gt;\r\n      &lt;/properties&gt;\r\n    \r\n      &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;junit&lt;/groupId&gt;\r\n          &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n          &lt;version&gt;4.11&lt;/version&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.openpnp&lt;/groupId&gt;\r\n            &lt;artifactId&gt;opencv&lt;/artifactId&gt;\r\n            &lt;version&gt;4.7.0-0&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n      &lt;/dependencies&gt;\r\n    \r\n      &lt;build&gt;\r\n        &lt;pluginManagement&gt;&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;\r\n          &lt;plugins&gt;\r\n            &lt;!-- clean lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#clean_Lifecycle --&gt;\r\n            &lt;plugin&gt;\r\n              &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\r\n              &lt;version&gt;3.1.0&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;!-- default lifecycle, jar packaging: see https://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_jar_packaging --&gt;\r\n            &lt;plugin&gt;\r\n              &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n              &lt;version&gt;3.0.2&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n              &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n              &lt;version&gt;3.8.0&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n              &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n              &lt;version&gt;2.22.1&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n              &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\r\n              &lt;version&gt;2.5.2&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n              &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\r\n              &lt;version&gt;2.8.2&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;!-- site lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#site_Lifecycle --&gt;\r\n            &lt;plugin&gt;\r\n              &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\r\n              &lt;version&gt;3.7.1&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n              &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\r\n              &lt;version&gt;3.0.0&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n    \t\t\r\n    \t\t&lt;plugin&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;3.2.0&lt;/version&gt;\r\n    \t\t\t&lt;configuration&gt;\r\n    \t\t\t  &lt;archive&gt;\r\n    \t\t\t\t&lt;manifest&gt;\r\n    \t\t\t\t  &lt;addClasspath&gt;true&lt;/addClasspath&gt;\r\n    \t\t\t\t  &lt;mainClass&gt;NerfThis&lt;/mainClass&gt;\r\n    \t\t\t\t&lt;/manifest&gt;\r\n    \t\t\t  &lt;/archive&gt;\r\n    \t\t\t&lt;/configuration&gt;\r\n    \t  &lt;/plugin&gt;\r\n    \r\n    \t\t &lt;/plugins&gt;\r\n        &lt;/pluginManagement&gt;\r\n      &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\nI can build it just fine using Maven, but when I try to run the jar I get the following error:\r\n\r\n    java -jar target/NerfThis-1.0-SNAPSHOT.jar\r\n    Error: Unable to initialize main class NerfThis\r\n    Caused by: java.lang.NoClassDefFoundError: org/opencv/core/Mat\r\n\r\nI&#39;ve been debugging this for hours now and can&#39;t understand why it&#39;s struggling to find the Definition for Mat. ","title":"NoClassDefFoundError when attempting to use openCV in java while running NixOS","body":"<p>I'm trying to follow a tutorial on the use of openCV in java while also learning how to use NixOS.</p>\n<p>I have the following flake:</p>\n<pre><code>    {\n      inputs = {\n        nixpkgs.url = &quot;github:NixOS/nixpkgs/nixos-unstable&quot;;\n    flake-utils.url = &quot;github:numtide/flake-utils&quot;;\n  };\n  outputs = {\n    nixpkgs,\n    flake-utils,\n    ...\n  }:\n    flake-utils.lib.eachDefaultSystem (system: let\n      javaVersion = 19;\n\n      overlays = [\n        (self: super: rec {\n          jdk = super.&quot;jdk${toString javaVersion}&quot;;\n          maven = super.maven.override {\n            inherit jdk;\n          };\n        })\n      ];\n      pkgs = import nixpkgs {inherit overlays system;};\n    in {\n      devShell = let\n        generateEditorConfig = pkgs.writeShellScriptBin &quot;generateEditorConfig&quot; ''\n          if [ ! -f .editorconfig ]; then\n            echo &quot;root = true&quot; &gt; .editorconfig\n            echo &quot;&quot; &gt;&gt; .editorconfig\n            echo &quot;[*]&quot; &gt;&gt; .editorconfig\n            echo &quot;end_of_line = lf&quot; &gt;&gt; .editorconfig\n            echo &quot;insert_final_newline = true&quot; &gt;&gt; .editorconfig\n            echo &quot;indent_style = tab&quot; &gt;&gt; .editorconfig\n            echo &quot;tab_width = 4&quot; &gt;&gt; .editorconfig\n            echo &quot;charset = utf-8&quot; &gt;&gt; .editorconfig\n            echo &quot;&quot; &gt;&gt; .editorconfig\n            echo &quot;[*.{yaml,yml}]&quot; &gt;&gt; .editorconfig\n            echo &quot;indent_style = space&quot; &gt;&gt; .editorconfig\n            echo &quot;indent_size = 2&quot; &gt;&gt; .editorconfig\n            echo &quot;&quot; &gt;&gt; .editorconfig\n            echo &quot;[*.{md,nix}]&quot; &gt;&gt; .editorconfig\n            echo &quot;indent_style = space&quot; &gt;&gt; .editorconfig\n            echo &quot;indent_size = 2&quot; &gt;&gt; .editorconfig\n          fi\n        '';\n      in\n        pkgs.mkShell {\n          name = &quot;java&quot;;\n          buildInputs = with pkgs; [\n            jdk\n            maven\n            tomcat9\n            opencv\n          ];\n          shellHook = ''\n            export JAVA_HOME=${pkgs.jdk}\n            ${generateEditorConfig}/bin/generateEditorConfig\n          '';\n        };\n    });\n}\n</code></pre>\n<p>Java file: src/main/java/NerfThis.java</p>\n<pre><code>import org.opencv.core.Mat;\nimport org.opencv.core.MatOfRect;\nimport org.opencv.core.Rect;\nimport org.opencv.core.Scalar;\nimport org.opencv.core.Size;\nimport org.opencv.imgcodecs.Imgcodecs;\nimport org.opencv.imgproc.Imgproc;\nimport org.opencv.objdetect.CascadeClassifier;\nimport org.opencv.objdetect.Objdetect;\n\nimport nu.pattern.OpenCV;\n\npublic class NerfThis {\n    public static void main(String[] args) {\n        System.out.println(&quot;Test&quot;);\n        OpenCV.loadShared();\n        \n        String sourceImagePath = &quot;src/main/resources/face.jpeg&quot;;\n        String targetImagePath = &quot;src/main/resources/result.jpeg&quot;;\n        \n\n        Mat loadedImage = loadImage(sourceImagePath);\n        int minFaceSize = Math.round(loadedImage.rows() * 0.1f); \n        MatOfRect facesDetected = new MatOfRect();\n        CascadeClassifier cascadeClassifier = new CascadeClassifier();\n        cascadeClassifier.load(&quot;./src/main/resources/haarcascades/haarcascade_frontalface_alt.xml&quot;);\n        cascadeClassifier.detectMultiScale(loadedImage, \n            facesDetected, \n            1.1, \n            3, \n          Objdetect.CASCADE_SCALE_IMAGE, \n          new Size(minFaceSize, minFaceSize), \n          new Size() \n        );\n        \n        Rect[] facesArray = facesDetected.toArray(); \n        for(Rect face : facesArray) { \n            Imgproc.rectangle(loadedImage, face.tl(), face.br(), new Scalar(0, 0, 255), 3); \n        } \n        saveImage(loadedImage, targetImagePath);\n\n    }\n\n    public static Mat loadImage(String imagePath) {\n        Imgcodecs imageCodecs = new Imgcodecs();\n        return imageCodecs.imread(imagePath);\n    }\n\n    public static void saveImage(Mat imageMatrix, String targetPath) {\n        Imgcodecs imgcodecs = new Imgcodecs();\n        imgcodecs.imwrite(targetPath, imageMatrix);\n    }\n}\n</code></pre>\n<p>And my pom:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;sigubrat-nerfThis&lt;/groupId&gt;\n  &lt;artifactId&gt;NerfThis&lt;/artifactId&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n  &lt;name&gt;NerfThis&lt;/name&gt;\n  &lt;!-- FIXME change it to the project's website --&gt;\n  &lt;url&gt;http://www.example.com&lt;/url&gt;\n\n  &lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;maven.compiler.source&gt;19&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;19&lt;/maven.compiler.target&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;4.11&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.openpnp&lt;/groupId&gt;\n        &lt;artifactId&gt;opencv&lt;/artifactId&gt;\n        &lt;version&gt;4.7.0-0&lt;/version&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n\n  &lt;build&gt;\n    &lt;pluginManagement&gt;&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;\n      &lt;plugins&gt;\n        &lt;!-- clean lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#clean_Lifecycle --&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;!-- default lifecycle, jar packaging: see https://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_jar_packaging --&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.8.0&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.22.1&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.5.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.8.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;!-- site lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#site_Lifecycle --&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.7.1&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/plugin&gt;\n        \n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.2.0&lt;/version&gt;\n            &lt;configuration&gt;\n              &lt;archive&gt;\n                &lt;manifest&gt;\n                  &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n                  &lt;mainClass&gt;NerfThis&lt;/mainClass&gt;\n                &lt;/manifest&gt;\n              &lt;/archive&gt;\n            &lt;/configuration&gt;\n      &lt;/plugin&gt;\n\n         &lt;/plugins&gt;\n    &lt;/pluginManagement&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>I can build it just fine using Maven, but when I try to run the jar I get the following error:</p>\n<pre><code>java -jar target/NerfThis-1.0-SNAPSHOT.jar\nError: Unable to initialize main class NerfThis\nCaused by: java.lang.NoClassDefFoundError: org/opencv/core/Mat\n</code></pre>\n<p>I've been debugging this for hours now and can't understand why it's struggling to find the Definition for Mat.</p>\n"},{"tags":["java","osgi","apache-karaf","osgi-fragment"],"comments":[{"owner":{"account_id":15519832,"reputation":1026,"user_id":11478354,"display_name":"dcolazin"},"score":0,"creation_date":1692715858,"post_id":76954399,"comment_id":135660527,"body_markdown":"What do you mean &quot;is not working&quot;? Do you receive some sorts of error?","body":"What do you mean &quot;is not working&quot;? Do you receive some sorts of error?"},{"owner":{"account_id":29276261,"reputation":33,"user_id":22429926,"display_name":"biplob ghosh"},"score":0,"creation_date":1692771711,"post_id":76954399,"comment_id":135668003,"body_markdown":"there is no error but there is some unpredictable behaviour as only one host bundle is available in the console","body":"there is no error but there is some unpredictable behaviour as only one host bundle is available in the console"}],"answers":[{"tags":[],"owner":{"account_id":482558,"reputation":29183,"user_id":897024,"accept_rate":100,"display_name":"kapex"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692967433,"creation_date":1692832064,"answer_id":76965392,"question_id":76954399,"body_markdown":"You are right that a fragment can have multiple hosts according to the specification. But it seems to be limited to different versions of bundles with the same symbolic name:\r\n\r\nThe grammar for [`Fragment-Host`][1] is defined as\r\n\r\n&gt;     Fragment-Host       ::= bundle-description\r\n&gt;     bundle-description  ::= symbolic-name ( &#39;;&#39; parameter )*\r\n\r\nand by using a version range, you technically define multiple host:\r\n\r\n&gt; bundle-version - The version range to select the host bundle. If a range is used, then the fragment can attach to multiple hosts.\r\n\r\nIt doesn&#39;t seem to be possible to attach a fragment to host bundles with different names like in your example.\r\n\r\n  [1]: https://docs.osgi.org/specification/osgi.core/8.0.0/framework.module.html#framework.module.fragmenthost\r\n  [2]: https://docs.osgi.org/specification/osgi.core/8.0.0/framework.module.html#framework.module.fragmentbundles","title":"How to specify multiple hosts in the manifest of an OSGI fragment bundle in apache karaf","body":"<p>You are right that a fragment can have multiple hosts according to the specification. But it seems to be limited to different versions of bundles with the same symbolic name:</p>\n<p>The grammar for <a href=\"https://docs.osgi.org/specification/osgi.core/8.0.0/framework.module.html#framework.module.fragmenthost\" rel=\"nofollow noreferrer\"><code>Fragment-Host</code></a> is defined as</p>\n<blockquote>\n<pre><code>Fragment-Host       ::= bundle-description\nbundle-description  ::= symbolic-name ( ';' parameter )*\n</code></pre>\n</blockquote>\n<p>and by using a version range, you technically define multiple host:</p>\n<blockquote>\n<p>bundle-version - The version range to select the host bundle. If a range is used, then the fragment can attach to multiple hosts.</p>\n</blockquote>\n<p>It doesn't seem to be possible to attach a fragment to host bundles with different names like in your example.</p>\n"}],"owner":{"account_id":29276261,"reputation":33,"user_id":22429926,"display_name":"biplob ghosh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76965392,"answer_count":1,"score":1,"last_activity_date":1692967433,"creation_date":1692715129,"question_id":76954399,"body_markdown":"According to the OSGI specification, a fragment bundle in OSGI can have multiple hosts. But in apache karaf it does not seem to work.\r\n\r\n\r\n\r\nI have tried the following.\r\n```\r\nFragment-Host: default_host;bundle-version=1.0.0,Second_host;bundle-version=1.0.0\r\n```","title":"How to specify multiple hosts in the manifest of an OSGI fragment bundle in apache karaf","body":"<p>According to the OSGI specification, a fragment bundle in OSGI can have multiple hosts. But in apache karaf it does not seem to work.</p>\n<p>I have tried the following.</p>\n<pre><code>Fragment-Host: default_host;bundle-version=1.0.0,Second_host;bundle-version=1.0.0\n</code></pre>\n"},{"tags":["java","pdfbox","rectangles"],"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":1,"creation_date":1531842832,"post_id":51380677,"comment_id":89743259,"body_markdown":"*&quot;More specific, can i change the rectangle according to every row&#39;s height using a function?&quot;* - At first glance the lines might be vector graphic lines or rectangles. You can extract these vector graphics, derive table cells from them, and then use these cells for extraction by area. Please share the PDF for a more in-detail analysis.","body":"<i>&quot;More specific, can i change the rectangle according to every row&#39;s height using a function?&quot;</i> - At first glance the lines might be vector graphic lines or rectangles. You can extract these vector graphics, derive table cells from them, and then use these cells for extraction by area. Please share the PDF for a more in-detail analysis."},{"owner":{"account_id":13975915,"reputation":33,"user_id":10093356,"display_name":"A. Groza"},"score":0,"creation_date":1531892656,"post_id":51380677,"comment_id":89760007,"body_markdown":"https://www.info.uvt.ro/wp-content/uploads/2018/07/Programare-licenta-5-Iulie-2018_1.pdf","body":"<a href=\"https://www.info.uvt.ro/wp-content/uploads/2018/07/Programare-licenta-5-Iulie-2018_1.pdf\" rel=\"nofollow noreferrer\">info.uvt.ro/wp-content/uploads/2018/07/&hellip;</a>"},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1531901988,"post_id":51380677,"comment_id":89764898,"body_markdown":"Ok, the lines are drawn as thin rectangles. I&#39;ll try and think of something later.","body":"Ok, the lines are drawn as thin rectangles. I&#39;ll try and think of something later."},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1531904533,"post_id":51380677,"comment_id":89766579,"body_markdown":"Here&#39;s code to collect paths https://stackoverflow.com/questions/38931422/pdfbox-2-0-2-calling-of-pagedrawer-processpage-method-caught-exceptions","body":"Here&#39;s code to collect paths <a href=\"https://stackoverflow.com/questions/38931422/pdfbox-2-0-2-calling-of-pagedrawer-processpage-method-caught-exceptions\" title=\"pdfbox 2 0 2 calling of pagedrawer processpage method caught exceptions\">stackoverflow.com/questions/38931422/&hellip;</a>"},{"owner":{"account_id":13975915,"reputation":33,"user_id":10093356,"display_name":"A. Groza"},"score":0,"creation_date":1531916805,"post_id":51380677,"comment_id":89774698,"body_markdown":"In the meantime i&#39;ve done this: converted the pdf to image and scanned every pixel of it. set a counter at every Y and set a threshold so if the X Y rgb is not white and the counter is higher than the threshold it will print the X coordinate and the length of the line. but since the resolution was high, same line has 3 consecutive X coordinates. i think, if i can define regions between the lines of X coordinates that are not close to 1-2 pixels of each other, i may easier extract information later.","body":"In the meantime i&#39;ve done this: converted the pdf to image and scanned every pixel of it. set a counter at every Y and set a threshold so if the X Y rgb is not white and the counter is higher than the threshold it will print the X coordinate and the length of the line. but since the resolution was high, same line has 3 consecutive X coordinates. i think, if i can define regions between the lines of X coordinates that are not close to 1-2 pixels of each other, i may easier extract information later."}],"answers":[{"tags":[],"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1532701495,"creation_date":1532701495,"answer_id":51560024,"question_id":51380677,"body_markdown":"As proposed in comments, you can automatically recognize the table cell regions of your example PDF by parsing the vector graphics instructions of the page.\n\nFor such a task you can extend the PDFBox `PDFGraphicsStreamEngine` which provides abstract methods called for path building and drawing instructions.\n\nBeware: The stream engine class I show here is specialized on recognizing table cell frame lines drawn as long, small rectangles filled with black as used in your example document. For a general solution you should at least also recognize frame lines drawn as vector graphics line segments or as stroked rectangles.\n\n### The stream engine class `PdfBoxFinder`\n\nThis stream engine class collects the *y* coordinate ranges of horizontal lines and the *x* coordinate ranges of vertical lines and afterwards provides the boxes of the grid defined by these coordinate ranges. In particular this means that row spans or column spans are not supported; in the case at hand this is ok as there are no such spans.\n\n&lt;!-- language-all: lang-java --&gt;\n\n    public class PdfBoxFinder extends PDFGraphicsStreamEngine {\n        /**\n         * Supply the page to analyze here; to analyze multiple pages\n         * create multiple {@link PdfBoxFinder} instances.\n         */\n        public PdfBoxFinder(PDPage page) {\n            super(page);\n        }\n    \n        /**\n         * The boxes ({@link Rectangle2D} instances with coordinates according to\n         * the PDF coordinate system, e.g. for decorating the table cells) the\n         * {@link PdfBoxFinder} has recognized on the current page.\n         */\n        public Map&lt;String, Rectangle2D&gt; getBoxes() {\n            consolidateLists();\n            Map&lt;String, Rectangle2D&gt; result = new HashMap&lt;&gt;();\n            if (!horizontalLines.isEmpty() &amp;&amp; !verticalLines.isEmpty())\n            {\n                Interval top = horizontalLines.get(horizontalLines.size() - 1);\n                char rowLetter = &#39;A&#39;;\n                for (int i = horizontalLines.size() - 2; i &gt;= 0; i--, rowLetter++) {\n                    Interval bottom = horizontalLines.get(i);\n                    Interval left = verticalLines.get(0);\n                    int column = 1;\n                    for (int j = 1; j &lt; verticalLines.size(); j++, column++) {\n                        Interval right = verticalLines.get(j);\n                        String name = String.format(&quot;%s%s&quot;, rowLetter, column);\n                        Rectangle2D rectangle = new Rectangle2D.Float(left.from, bottom.from, right.to - left.from, top.to - bottom.from);\n                        result.put(name, rectangle);\n                        left = right;\n                    }\n                    top = bottom;\n                }\n            }\n            return result;\n        }\n    \n        /**\n         * The regions ({@link Rectangle2D} instances with coordinates according\n         * to the PDFBox text extraction API, e.g. for initializing the regions of\n         * a {@link PDFTextStripperByArea}) the {@link PdfBoxFinder} has recognized\n         * on the current page.\n         */\n        public Map&lt;String, Rectangle2D&gt; getRegions() {\n            PDRectangle cropBox = getPage().getCropBox();\n            float xOffset = cropBox.getLowerLeftX();\n            float yOffset = cropBox.getUpperRightY();\n            Map&lt;String, Rectangle2D&gt; result = getBoxes();\n            for (Map.Entry&lt;String, Rectangle2D&gt; entry : result.entrySet()) {\n                Rectangle2D box = entry.getValue();\n                Rectangle2D region = new Rectangle2D.Float(xOffset + (float)box.getX(), yOffset - (float)(box.getY() + box.getHeight()), (float)box.getWidth(), (float)box.getHeight());\n                entry.setValue(region);\n            }\n            return result;\n        }\n    \n        /**\n         * &lt;p&gt;\n         * Processes the path elements currently in the {@link #path} list and\n         * eventually clears the list.\n         * &lt;/p&gt;\n         * &lt;p&gt;\n         * Currently only elements are considered which \n         * &lt;/p&gt;\n         * &lt;ul&gt;\n         * &lt;li&gt;are {@link Rectangle} instances;\n         * &lt;li&gt;are filled fairly black;\n         * &lt;li&gt;have a thin and long form; and\n         * &lt;li&gt;have sides fairly parallel to the coordinate axis.\n         * &lt;/ul&gt;\n         */\n        void processPath() throws IOException {\n            PDColor color = getGraphicsState().getNonStrokingColor();\n            if (!isBlack(color)) {\n                logger.debug(&quot;Dropped path due to non-black fill-color.&quot;);\n                return;\n            }\n    \n            for (PathElement pathElement : path) {\n                if (pathElement instanceof Rectangle) {\n                    Rectangle rectangle = (Rectangle) pathElement;\n    \n                    double p0p1 = rectangle.p0.distance(rectangle.p1);\n                    double p1p2 = rectangle.p1.distance(rectangle.p2);\n                    boolean p0p1small = p0p1 &lt; 3;\n                    boolean p1p2small = p1p2 &lt; 3;\n    \n                    if (p0p1small) {\n                        if (p1p2small) {\n                            logger.debug(&quot;Dropped rectangle too small on both sides.&quot;);\n                        } else {\n                            processThinRectangle(rectangle.p0, rectangle.p1, rectangle.p2, rectangle.p3);\n                        }\n                    } else if (p1p2small) {\n                        processThinRectangle(rectangle.p1, rectangle.p2, rectangle.p3, rectangle.p0);\n                    } else {\n                        logger.debug(&quot;Dropped rectangle too large on both sides.&quot;);\n                    }\n                }\n            }\n            path.clear();\n        }\n    \n        /**\n         * The argument points shall be sorted to have (p0, p1) and (p2, p3) be the small\n         * edges and (p1, p2) and (p3, p0) the long ones.\n         */\n        void processThinRectangle(Point2D p0, Point2D p1, Point2D p2, Point2D p3) {\n            float longXDiff = (float)Math.abs(p2.getX() - p1.getX());\n            float longYDiff = (float)Math.abs(p2.getY() - p1.getY());\n            boolean longXDiffSmall = longXDiff * 10 &lt; longYDiff;\n            boolean longYDiffSmall = longYDiff * 10 &lt; longXDiff;\n    \n            if (longXDiffSmall) {\n                verticalLines.add(new Interval(p0.getX(), p1.getX(), p2.getX(), p3.getX()));\n            } else if (longYDiffSmall) {\n                horizontalLines.add(new Interval(p0.getY(), p1.getY(), p2.getY(), p3.getY()));\n            } else {\n                logger.debug(&quot;Dropped rectangle too askew.&quot;);\n            }\n        }\n    \n        /**\n         * Sorts the {@link #horizontalLines} and {@link #verticalLines} lists and\n         * merges fairly identical entries.\n         */\n        void consolidateLists() {\n            for (List&lt;Interval&gt; intervals : Arrays.asList(horizontalLines, verticalLines)) {\n                intervals.sort(null);\n                for (int i = 1; i &lt; intervals.size();) {\n                    if (intervals.get(i-1).combinableWith(intervals.get(i))) {\n                        Interval interval = intervals.get(i-1).combineWith(intervals.get(i));\n                        intervals.set(i-1, interval);\n                        intervals.remove(i);\n                    } else {\n                        i++;\n                    }\n                }\n            }\n        }\n    \n        /**\n         * Checks whether the given color is black&#39;ish.\n         */\n        boolean isBlack(PDColor color) throws IOException {\n            int value = color.toRGB();\n            for (int i = 0; i &lt; 2; i++) {\n                int component = value &amp; 0xff;\n                if (component &gt; 5)\n                    return false;\n                value /= 256;\n            }\n            return true;\n        }\n    \n        //\n        // PDFGraphicsStreamEngine overrides\n        //\n        @Override\n        public void appendRectangle(Point2D p0, Point2D p1, Point2D p2, Point2D p3) throws IOException {\n            path.add(new Rectangle(p0, p1, p2, p3));\n        }\n    \n        @Override\n        public void endPath() throws IOException {\n            path.clear();\n        }\n    \n        @Override\n        public void strokePath() throws IOException {\n            path.clear();\n        }\n    \n        @Override\n        public void fillPath(int windingRule) throws IOException {\n            processPath();\n        }\n    \n        @Override\n        public void fillAndStrokePath(int windingRule) throws IOException {\n            processPath();\n        }\n    \n        @Override public void drawImage(PDImage pdImage) throws IOException { }\n        @Override public void clip(int windingRule) throws IOException { }\n        @Override public void moveTo(float x, float y) throws IOException { }\n        @Override public void lineTo(float x, float y) throws IOException { }\n        @Override public void curveTo(float x1, float y1, float x2, float y2, float x3, float y3) throws IOException { }\n        @Override public Point2D getCurrentPoint() throws IOException { return null; }\n        @Override public void closePath() throws IOException { }\n        @Override public void shadingFill(COSName shadingName) throws IOException { }\n    \n        //\n        // inner classes\n        //\n        class Interval implements Comparable&lt;Interval&gt; {\n            final float from;\n            final float to;\n    \n            Interval(float... values) {\n                Arrays.sort(values);\n                this.from = values[0];\n                this.to = values[values.length - 1];\n            }\n    \n            Interval(double... values) {\n                Arrays.sort(values);\n                this.from = (float) values[0];\n                this.to = (float) values[values.length - 1];\n            }\n    \n            boolean combinableWith(Interval other) {\n                if (this.from &gt; other.from)\n                    return other.combinableWith(this);\n                if (this.to &lt; other.from)\n                    return false;\n                float intersectionLength = Math.min(this.to, other.to) - other.from;\n                float thisLength = this.to - this.from;\n                float otherLength = other.to - other.from;\n                return (intersectionLength &gt;= thisLength * .9f) || (intersectionLength &gt;= otherLength * .9f);\n            }\n    \n            Interval combineWith(Interval other) {\n                return new Interval(this.from, this.to, other.from, other.to);\n            }\n    \n            @Override\n            public int compareTo(Interval o) {\n                return this.from == o.from ? Float.compare(this.to, o.to) : Float.compare(this.from, o.from);\n            }\n    \n            @Override\n            public String toString() {\n                return String.format(&quot;[%3.2f, %3.2f]&quot;, from, to);\n            }\n        }\n    \n        interface PathElement {\n        }\n    \n        class Rectangle implements PathElement {\n            final Point2D p0, p1, p2, p3;\n    \n            Rectangle(Point2D p0, Point2D p1, Point2D p2, Point2D p3) {\n                this.p0 = p0;\n                this.p1 = p1;\n                this.p2 = p2;\n                this.p3 = p3;\n            }\n        }\n    \n        //\n        // members\n        //\n        final List&lt;PathElement&gt; path = new ArrayList&lt;&gt;();\n        final List&lt;Interval&gt; horizontalLines = new ArrayList&lt;&gt;();\n        final List&lt;Interval&gt; verticalLines = new ArrayList&lt;&gt;();\n        final Logger logger = LoggerFactory.getLogger(PdfBoxFinder.class);\n    }\n\n*([PdfBoxFinder.java][1])*\n\n### Example use\n\nYou can use the `PdfBoxFinder` like this to extract text from the table cells of the sample document located at `FILE_PATH`:\n\n    try (   PDDocument document = PDDocument.load(FILE_PATH) ) {\n        for (PDPage page : document.getDocumentCatalog().getPages()) {\n            PdfBoxFinder boxFinder = new PdfBoxFinder(page);\n            boxFinder.processPage(page);\n\n            PDFTextStripperByArea stripperByArea = new PDFTextStripperByArea();\n            for (Map.Entry&lt;String, Rectangle2D&gt; entry : boxFinder.getRegions().entrySet()) {\n                stripperByArea.addRegion(entry.getKey(), entry.getValue());\n            }\n\n            stripperByArea.extractRegions(page);\n            List&lt;String&gt; names = stripperByArea.getRegions();\n            names.sort(null);\n            for (String name : names) {\n                System.out.printf(&quot;[%s] %s\\n&quot;, name, stripperByArea.getTextForRegion(name));\n            }\n        }\n    }\n\n*([ExtractBoxedText][2] test `testExtractBoxedTexts`)*\n\nThe start of the output:\n\n&lt;!-- language: lang-none --&gt;\n\n    [A1] Nr. \n    crt. \n    \n    [A2] Nume şi prenume \n    \n    [A3] Titlul lucrării \n    \n    [A4] Coordonator ştiinţific \n    \n    [A5] Ora \n    \n    [B1] 1. \n    \n    [B2] SFETCU I. JESSICA-\n    LARISA \n    \n    [B3] Analiza fluxurilor de date twitter \n    \n    [B4] Conf. univ. dr. Fr&#238;ncu Marc \n    Eduard \n     \n    \n    [B5] 8:00 \n    \n    [C1] 2. \n    \n    [C2] TARBA V. IONUȚ-\n    ADRIAN \n    \n    [C3] Test me - rest api folosind java şi \n    play framework \n    \n    [C4] Conf.univ.dr. Fortiş Teodor \n    Florin \n     \n    \n    [C5] 8:12 \n\nThe first page of the document:\n\n[![screen shot][3a]][3]\n\n\n  [1]: https://github.com/mkl-public/testarea-pdfbox2/blob/master/src/main/java/mkl/testarea/pdfbox2/extract/PdfBoxFinder.java#L54\n  [2]: https://github.com/mkl-public/testarea-pdfbox2/blob/master/src/test/java/mkl/testarea/pdfbox2/extract/ExtractBoxedText.java#L104\n  [3]: https://i.stack.imgur.com/QQRxL.png\n  [3a]: https://i.stack.imgur.com/QQRxLl.png\n","title":"Extracting text from pdf (java using pdfbox library) from a table&#39;s rows with different heights","body":"<p>As proposed in comments, you can automatically recognize the table cell regions of your example PDF by parsing the vector graphics instructions of the page.</p>\n<p>For such a task you can extend the PDFBox <code>PDFGraphicsStreamEngine</code> which provides abstract methods called for path building and drawing instructions.</p>\n<p>Beware: The stream engine class I show here is specialized on recognizing table cell frame lines drawn as long, small rectangles filled with black as used in your example document. For a general solution you should at least also recognize frame lines drawn as vector graphics line segments or as stroked rectangles.</p>\n<h3>The stream engine class <code>PdfBoxFinder</code></h3>\n<p>This stream engine class collects the <em>y</em> coordinate ranges of horizontal lines and the <em>x</em> coordinate ranges of vertical lines and afterwards provides the boxes of the grid defined by these coordinate ranges. In particular this means that row spans or column spans are not supported; in the case at hand this is ok as there are no such spans.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class PdfBoxFinder extends PDFGraphicsStreamEngine {\n    /**\n     * Supply the page to analyze here; to analyze multiple pages\n     * create multiple {@link PdfBoxFinder} instances.\n     */\n    public PdfBoxFinder(PDPage page) {\n        super(page);\n    }\n\n    /**\n     * The boxes ({@link Rectangle2D} instances with coordinates according to\n     * the PDF coordinate system, e.g. for decorating the table cells) the\n     * {@link PdfBoxFinder} has recognized on the current page.\n     */\n    public Map&lt;String, Rectangle2D&gt; getBoxes() {\n        consolidateLists();\n        Map&lt;String, Rectangle2D&gt; result = new HashMap&lt;&gt;();\n        if (!horizontalLines.isEmpty() &amp;&amp; !verticalLines.isEmpty())\n        {\n            Interval top = horizontalLines.get(horizontalLines.size() - 1);\n            char rowLetter = 'A';\n            for (int i = horizontalLines.size() - 2; i &gt;= 0; i--, rowLetter++) {\n                Interval bottom = horizontalLines.get(i);\n                Interval left = verticalLines.get(0);\n                int column = 1;\n                for (int j = 1; j &lt; verticalLines.size(); j++, column++) {\n                    Interval right = verticalLines.get(j);\n                    String name = String.format(&quot;%s%s&quot;, rowLetter, column);\n                    Rectangle2D rectangle = new Rectangle2D.Float(left.from, bottom.from, right.to - left.from, top.to - bottom.from);\n                    result.put(name, rectangle);\n                    left = right;\n                }\n                top = bottom;\n            }\n        }\n        return result;\n    }\n\n    /**\n     * The regions ({@link Rectangle2D} instances with coordinates according\n     * to the PDFBox text extraction API, e.g. for initializing the regions of\n     * a {@link PDFTextStripperByArea}) the {@link PdfBoxFinder} has recognized\n     * on the current page.\n     */\n    public Map&lt;String, Rectangle2D&gt; getRegions() {\n        PDRectangle cropBox = getPage().getCropBox();\n        float xOffset = cropBox.getLowerLeftX();\n        float yOffset = cropBox.getUpperRightY();\n        Map&lt;String, Rectangle2D&gt; result = getBoxes();\n        for (Map.Entry&lt;String, Rectangle2D&gt; entry : result.entrySet()) {\n            Rectangle2D box = entry.getValue();\n            Rectangle2D region = new Rectangle2D.Float(xOffset + (float)box.getX(), yOffset - (float)(box.getY() + box.getHeight()), (float)box.getWidth(), (float)box.getHeight());\n            entry.setValue(region);\n        }\n        return result;\n    }\n\n    /**\n     * &lt;p&gt;\n     * Processes the path elements currently in the {@link #path} list and\n     * eventually clears the list.\n     * &lt;/p&gt;\n     * &lt;p&gt;\n     * Currently only elements are considered which \n     * &lt;/p&gt;\n     * &lt;ul&gt;\n     * &lt;li&gt;are {@link Rectangle} instances;\n     * &lt;li&gt;are filled fairly black;\n     * &lt;li&gt;have a thin and long form; and\n     * &lt;li&gt;have sides fairly parallel to the coordinate axis.\n     * &lt;/ul&gt;\n     */\n    void processPath() throws IOException {\n        PDColor color = getGraphicsState().getNonStrokingColor();\n        if (!isBlack(color)) {\n            logger.debug(&quot;Dropped path due to non-black fill-color.&quot;);\n            return;\n        }\n\n        for (PathElement pathElement : path) {\n            if (pathElement instanceof Rectangle) {\n                Rectangle rectangle = (Rectangle) pathElement;\n\n                double p0p1 = rectangle.p0.distance(rectangle.p1);\n                double p1p2 = rectangle.p1.distance(rectangle.p2);\n                boolean p0p1small = p0p1 &lt; 3;\n                boolean p1p2small = p1p2 &lt; 3;\n\n                if (p0p1small) {\n                    if (p1p2small) {\n                        logger.debug(&quot;Dropped rectangle too small on both sides.&quot;);\n                    } else {\n                        processThinRectangle(rectangle.p0, rectangle.p1, rectangle.p2, rectangle.p3);\n                    }\n                } else if (p1p2small) {\n                    processThinRectangle(rectangle.p1, rectangle.p2, rectangle.p3, rectangle.p0);\n                } else {\n                    logger.debug(&quot;Dropped rectangle too large on both sides.&quot;);\n                }\n            }\n        }\n        path.clear();\n    }\n\n    /**\n     * The argument points shall be sorted to have (p0, p1) and (p2, p3) be the small\n     * edges and (p1, p2) and (p3, p0) the long ones.\n     */\n    void processThinRectangle(Point2D p0, Point2D p1, Point2D p2, Point2D p3) {\n        float longXDiff = (float)Math.abs(p2.getX() - p1.getX());\n        float longYDiff = (float)Math.abs(p2.getY() - p1.getY());\n        boolean longXDiffSmall = longXDiff * 10 &lt; longYDiff;\n        boolean longYDiffSmall = longYDiff * 10 &lt; longXDiff;\n\n        if (longXDiffSmall) {\n            verticalLines.add(new Interval(p0.getX(), p1.getX(), p2.getX(), p3.getX()));\n        } else if (longYDiffSmall) {\n            horizontalLines.add(new Interval(p0.getY(), p1.getY(), p2.getY(), p3.getY()));\n        } else {\n            logger.debug(&quot;Dropped rectangle too askew.&quot;);\n        }\n    }\n\n    /**\n     * Sorts the {@link #horizontalLines} and {@link #verticalLines} lists and\n     * merges fairly identical entries.\n     */\n    void consolidateLists() {\n        for (List&lt;Interval&gt; intervals : Arrays.asList(horizontalLines, verticalLines)) {\n            intervals.sort(null);\n            for (int i = 1; i &lt; intervals.size();) {\n                if (intervals.get(i-1).combinableWith(intervals.get(i))) {\n                    Interval interval = intervals.get(i-1).combineWith(intervals.get(i));\n                    intervals.set(i-1, interval);\n                    intervals.remove(i);\n                } else {\n                    i++;\n                }\n            }\n        }\n    }\n\n    /**\n     * Checks whether the given color is black'ish.\n     */\n    boolean isBlack(PDColor color) throws IOException {\n        int value = color.toRGB();\n        for (int i = 0; i &lt; 2; i++) {\n            int component = value &amp; 0xff;\n            if (component &gt; 5)\n                return false;\n            value /= 256;\n        }\n        return true;\n    }\n\n    //\n    // PDFGraphicsStreamEngine overrides\n    //\n    @Override\n    public void appendRectangle(Point2D p0, Point2D p1, Point2D p2, Point2D p3) throws IOException {\n        path.add(new Rectangle(p0, p1, p2, p3));\n    }\n\n    @Override\n    public void endPath() throws IOException {\n        path.clear();\n    }\n\n    @Override\n    public void strokePath() throws IOException {\n        path.clear();\n    }\n\n    @Override\n    public void fillPath(int windingRule) throws IOException {\n        processPath();\n    }\n\n    @Override\n    public void fillAndStrokePath(int windingRule) throws IOException {\n        processPath();\n    }\n\n    @Override public void drawImage(PDImage pdImage) throws IOException { }\n    @Override public void clip(int windingRule) throws IOException { }\n    @Override public void moveTo(float x, float y) throws IOException { }\n    @Override public void lineTo(float x, float y) throws IOException { }\n    @Override public void curveTo(float x1, float y1, float x2, float y2, float x3, float y3) throws IOException { }\n    @Override public Point2D getCurrentPoint() throws IOException { return null; }\n    @Override public void closePath() throws IOException { }\n    @Override public void shadingFill(COSName shadingName) throws IOException { }\n\n    //\n    // inner classes\n    //\n    class Interval implements Comparable&lt;Interval&gt; {\n        final float from;\n        final float to;\n\n        Interval(float... values) {\n            Arrays.sort(values);\n            this.from = values[0];\n            this.to = values[values.length - 1];\n        }\n\n        Interval(double... values) {\n            Arrays.sort(values);\n            this.from = (float) values[0];\n            this.to = (float) values[values.length - 1];\n        }\n\n        boolean combinableWith(Interval other) {\n            if (this.from &gt; other.from)\n                return other.combinableWith(this);\n            if (this.to &lt; other.from)\n                return false;\n            float intersectionLength = Math.min(this.to, other.to) - other.from;\n            float thisLength = this.to - this.from;\n            float otherLength = other.to - other.from;\n            return (intersectionLength &gt;= thisLength * .9f) || (intersectionLength &gt;= otherLength * .9f);\n        }\n\n        Interval combineWith(Interval other) {\n            return new Interval(this.from, this.to, other.from, other.to);\n        }\n\n        @Override\n        public int compareTo(Interval o) {\n            return this.from == o.from ? Float.compare(this.to, o.to) : Float.compare(this.from, o.from);\n        }\n\n        @Override\n        public String toString() {\n            return String.format(&quot;[%3.2f, %3.2f]&quot;, from, to);\n        }\n    }\n\n    interface PathElement {\n    }\n\n    class Rectangle implements PathElement {\n        final Point2D p0, p1, p2, p3;\n\n        Rectangle(Point2D p0, Point2D p1, Point2D p2, Point2D p3) {\n            this.p0 = p0;\n            this.p1 = p1;\n            this.p2 = p2;\n            this.p3 = p3;\n        }\n    }\n\n    //\n    // members\n    //\n    final List&lt;PathElement&gt; path = new ArrayList&lt;&gt;();\n    final List&lt;Interval&gt; horizontalLines = new ArrayList&lt;&gt;();\n    final List&lt;Interval&gt; verticalLines = new ArrayList&lt;&gt;();\n    final Logger logger = LoggerFactory.getLogger(PdfBoxFinder.class);\n}\n</code></pre>\n<p><em>(<a href=\"https://github.com/mkl-public/testarea-pdfbox2/blob/master/src/main/java/mkl/testarea/pdfbox2/extract/PdfBoxFinder.java#L54\" rel=\"nofollow noreferrer\">PdfBoxFinder.java</a>)</em></p>\n<h3>Example use</h3>\n<p>You can use the <code>PdfBoxFinder</code> like this to extract text from the table cells of the sample document located at <code>FILE_PATH</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>try (   PDDocument document = PDDocument.load(FILE_PATH) ) {\n    for (PDPage page : document.getDocumentCatalog().getPages()) {\n        PdfBoxFinder boxFinder = new PdfBoxFinder(page);\n        boxFinder.processPage(page);\n\n        PDFTextStripperByArea stripperByArea = new PDFTextStripperByArea();\n        for (Map.Entry&lt;String, Rectangle2D&gt; entry : boxFinder.getRegions().entrySet()) {\n            stripperByArea.addRegion(entry.getKey(), entry.getValue());\n        }\n\n        stripperByArea.extractRegions(page);\n        List&lt;String&gt; names = stripperByArea.getRegions();\n        names.sort(null);\n        for (String name : names) {\n            System.out.printf(&quot;[%s] %s\\n&quot;, name, stripperByArea.getTextForRegion(name));\n        }\n    }\n}\n</code></pre>\n<p><em>(<a href=\"https://github.com/mkl-public/testarea-pdfbox2/blob/master/src/test/java/mkl/testarea/pdfbox2/extract/ExtractBoxedText.java#L104\" rel=\"nofollow noreferrer\">ExtractBoxedText</a> test <code>testExtractBoxedTexts</code>)</em></p>\n<p>The start of the output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>[A1] Nr. \ncrt. \n\n[A2] Nume şi prenume \n\n[A3] Titlul lucrării \n\n[A4] Coordonator ştiinţific \n\n[A5] Ora \n\n[B1] 1. \n\n[B2] SFETCU I. JESSICA-\nLARISA \n\n[B3] Analiza fluxurilor de date twitter \n\n[B4] Conf. univ. dr. Frîncu Marc \nEduard \n \n\n[B5] 8:00 \n\n[C1] 2. \n\n[C2] TARBA V. IONUȚ-\nADRIAN \n\n[C3] Test me - rest api folosind java şi \nplay framework \n\n[C4] Conf.univ.dr. Fortiş Teodor \nFlorin \n \n\n[C5] 8:12 \n</code></pre>\n<p>The first page of the document:</p>\n<p><a href=\"https://i.stack.imgur.com/QQRxL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QQRxLl.png\" alt=\"screen shot\" /></a></p>\n"}],"owner":{"account_id":13975915,"reputation":33,"user_id":10093356,"display_name":"A. Groza"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4279,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":51560024,"answer_count":1,"score":3,"last_activity_date":1692967262,"creation_date":1531828254,"question_id":51380677,"body_markdown":"Black shapes are text that need to be extracted:\r\n\r\n[![Black shapes are text that need to be extracted][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/KhWWF.png\r\n\r\nSo far, i&#39;ve extracted the text from columns, but manually, because there are only 5 (using the Rectangle class for the regions). My question is: is there a way to do so for rows since the size (height) of the Rectangles are different and manually doing it to 50+ rows would be an atrocity? More specific, can i change the rectangle according to every row&#39;s height using a function? Or any suggestion that may help?","title":"Extracting text from pdf (java using pdfbox library) from a table&#39;s rows with different heights","body":"<p>Black shapes are text that need to be extracted:</p>\n\n<p><a href=\"https://i.stack.imgur.com/KhWWF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KhWWF.png\" alt=\"Black shapes are text that need to be extracted\"></a></p>\n\n<p>So far, i've extracted the text from columns, but manually, because there are only 5 (using the Rectangle class for the regions). My question is: is there a way to do so for rows since the size (height) of the Rectangles are different and manually doing it to 50+ rows would be an atrocity? More specific, can i change the rectangle according to every row's height using a function? Or any suggestion that may help?</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":2829929,"reputation":5163,"user_id":2431702,"display_name":"DanielBarbarian"},"score":0,"creation_date":1692803069,"post_id":76962580,"comment_id":135674496,"body_markdown":"The file is hardly stored in a database, it is stored on the local disk. `src/main/resources` may be easily available when you are running the application locally but after the application is built and deployed, that directory is not automatically available to serve content through a web server. If you are going for this solution you need to store the file in a directory that is available to the web server.","body":"The file is hardly stored in a database, it is stored on the local disk. <code>src&#47;main&#47;resources</code> may be easily available when you are running the application locally but after the application is built and deployed, that directory is not automatically available to serve content through a web server. If you are going for this solution you need to store the file in a directory that is available to the web server."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1692805794,"post_id":76962580,"comment_id":135675108,"body_markdown":"Quite right. Don&#39;t use your source tree. You want `Path filename = Path.of(originalFilename, &quot;_&quot;, uidString, extension);Path dest = Path.of(System.getProperty(&quot;user.home&quot;), filename);` You might not want to put the file in your home directory, in which case choose another. But be aware that `user.dir` is redundant as the default target would be the current directory anyway.","body":"Quite right. Don&#39;t use your source tree. You want <code>Path filename = Path.of(originalFilename, &quot;_&quot;, uidString, extension);Path dest = Path.of(System.getProperty(&quot;user.home&quot;), filename);</code> You might not want to put the file in your home directory, in which case choose another. But be aware that <code>user.dir</code> is redundant as the default target would be the current directory anyway."}],"answers":[{"tags":[],"owner":{"account_id":16341513,"reputation":209,"user_id":11802330,"display_name":"Eric"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692966538,"creation_date":1692966538,"answer_id":76977184,"question_id":76962580,"body_markdown":"You can programmatically create directory in project&#39;s root directory to save uploaded files this way\r\n\r\n    public static final String UPLOAD_DIR = &quot;uploads/images/&quot;;\r\n\r\n    @Component\r\n    public class FilesHelper {\r\n        public String saveFile(MultipartFile file) throws IOException {\r\n\r\n            File fileSaveDir = new File(UPLOAD_DIR);\r\n            if (!fileSaveDir.exists()) {\r\n                fileSaveDir.mkdirs();\r\n            }\r\n        }\r\n    }\r\n\r\nAfter deploying the directory will be created in `tomcat/bin` \r\n\r\nFor local test you can save uploaded file url in database as\r\n\r\n    http://localhost:9000/uploads/images/hello.png\r\n\r\nAfter deploying url will be \r\n\r\n    http://yourdomain.com:9000/YourJarFileName/uploads/images/hello.png\r\n\r\nTherefore you should change upload base url before building jar to be deployed\r\n\r\neg. change \r\n \r\n    http://localhost:9000/ \r\n\r\n   to\r\n\r\n    http://yourdomain.com:9000/YourJarFileName/","title":"Spring boot jar deploy file upload system","body":"<p>You can programmatically create directory in project's root directory to save uploaded files this way</p>\n<pre><code>public static final String UPLOAD_DIR = &quot;uploads/images/&quot;;\n\n@Component\npublic class FilesHelper {\n    public String saveFile(MultipartFile file) throws IOException {\n\n        File fileSaveDir = new File(UPLOAD_DIR);\n        if (!fileSaveDir.exists()) {\n            fileSaveDir.mkdirs();\n        }\n    }\n}\n</code></pre>\n<p>After deploying the directory will be created in <code>tomcat/bin</code></p>\n<p>For local test you can save uploaded file url in database as</p>\n<pre><code>http://localhost:9000/uploads/images/hello.png\n</code></pre>\n<p>After deploying url will be</p>\n<pre><code>http://yourdomain.com:9000/YourJarFileName/uploads/images/hello.png\n</code></pre>\n<p>Therefore you should change upload base url before building jar to be deployed</p>\n<p>eg. change</p>\n<pre><code>http://localhost:9000/ \n</code></pre>\n<p>to</p>\n<pre><code>http://yourdomain.com:9000/YourJarFileName/\n</code></pre>\n"}],"owner":{"account_id":29121688,"reputation":1,"user_id":22308987,"display_name":"nirah tmg"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692966538,"creation_date":1692802447,"question_id":76962580,"body_markdown":"hello sir i build the springboot app which serves as backend for electron app which we made from react so i was saving file inside project folder resource&gt;static and saving the details of photo in database as localhost:9000/hello.png ...in development phase i was able to get the image by that name which i have stored in database but when i build a jar file and tried to run it i was able to create file but cannot get the file \r\nand my requirment is i have to run that server locally also and in future in cloud also \r\n\r\n\r\n```\r\n/**class that have server url\r\npublic class KanchanjungaApplication implements CommandLineRunner {\r\n\r\n\tpublic static final String SERVERURL = &quot;http://localhost:9000/&quot;;\r\n**/\r\n\r\nand this is my code that saves file  \r\npackage Kanchanjunga.Utility;\r\n\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.nio.file.Files;\r\nimport java.nio.file.Path;\r\nimport java.nio.file.Paths;\r\nimport java.nio.file.StandardCopyOption;\r\nimport java.rmi.server.UID;\r\n\r\nimport org.springframework.stereotype.Component;\r\nimport org.springframework.web.multipart.MultipartFile;\r\n\r\nimport Kanchanjunga.KanchanjungaApplication;\r\n\r\n@Component\r\npublic class FilesHelper {\r\n\tpublic String saveFile(MultipartFile file) throws IOException {\r\n\t\t// uid for unique name of image\r\n\t\tUID uid = new UID();\r\n\t\tString uidString = uid.toString().replace(&#39;:&#39;, &#39;_&#39;);\r\n\t\tString originalFilename = file.getOriginalFilename();\r\n\t\tString extension = &quot;&quot;;\r\n\t\tif (originalFilename != null) {\r\n\t\t\tint dotIndex = originalFilename.lastIndexOf(&#39;.&#39;);\r\n\t\t\tif (dotIndex &gt;= 0) {\r\n\t\t\t\textension = originalFilename.substring(dotIndex);\r\n\t\t\t\toriginalFilename = originalFilename.substring(0, dotIndex);\r\n\t\t\t}\r\n\t\t}\r\n\t\tString filename = originalFilename + &quot;_&quot; + uidString + extension;\r\n\t\tString uploadDir = System.getProperty(&quot;user.dir&quot;) + &quot;/src/main/resources/static&quot;;\r\n                Path paths = Paths.get(uploadDir);\r\n\t\tif (!Files.exists(paths)) {\r\n\t\t\tFiles.createDirectories(paths);\r\n\t\t}\r\n\t\tPath imagePath = paths.resolve(filename);\r\n\t\ttry (InputStream inputStream = file.getInputStream()) {\r\n\t\t\tFiles.copy(inputStream, imagePath, StandardCopyOption.REPLACE_EXISTING);\r\n\t\t} catch (IOException e) {\r\n\t\t\tthrow new RuntimeException(&quot;Fail to save file &quot; + filename, e);\r\n\t\t}\r\n\t\treturn KanchanjungaApplication.SERVERURL + filename;\r\n\t}\r\n\r\n\tpublic Boolean deleteExistingFile(String fileName) {\r\n\t\tString uploadDirectory = System.getProperty(&quot;user.dir&quot;) + &quot;/src/main/resources/static&quot;;\r\n\t\tString filePathString = fileName.replace(KanchanjungaApplication.SERVERURL, &quot;&quot;);\r\n\t\tPath filePath = Paths.get(uploadDirectory, filePathString);\r\n\t\ttry {\r\n\t\t\tFiles.deleteIfExists(filePath);\r\n\t\t\treturn true;\r\n\t\t} catch (IOException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n}\r\n```\r\n\r\n\r\ni researched and tried to find solution but failed i really need help and your expertise`\r\n","title":"Spring boot jar deploy file upload system","body":"<p>hello sir i build the springboot app which serves as backend for electron app which we made from react so i was saving file inside project folder resource&gt;static and saving the details of photo in database as localhost:9000/hello.png ...in development phase i was able to get the image by that name which i have stored in database but when i build a jar file and tried to run it i was able to create file but cannot get the file\nand my requirment is i have to run that server locally also and in future in cloud also</p>\n<pre><code>/**class that have server url\npublic class KanchanjungaApplication implements CommandLineRunner {\n\n    public static final String SERVERURL = &quot;http://localhost:9000/&quot;;\n**/\n\nand this is my code that saves file  \npackage Kanchanjunga.Utility;\n\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.nio.file.Paths;\nimport java.nio.file.StandardCopyOption;\nimport java.rmi.server.UID;\n\nimport org.springframework.stereotype.Component;\nimport org.springframework.web.multipart.MultipartFile;\n\nimport Kanchanjunga.KanchanjungaApplication;\n\n@Component\npublic class FilesHelper {\n    public String saveFile(MultipartFile file) throws IOException {\n        // uid for unique name of image\n        UID uid = new UID();\n        String uidString = uid.toString().replace(':', '_');\n        String originalFilename = file.getOriginalFilename();\n        String extension = &quot;&quot;;\n        if (originalFilename != null) {\n            int dotIndex = originalFilename.lastIndexOf('.');\n            if (dotIndex &gt;= 0) {\n                extension = originalFilename.substring(dotIndex);\n                originalFilename = originalFilename.substring(0, dotIndex);\n            }\n        }\n        String filename = originalFilename + &quot;_&quot; + uidString + extension;\n        String uploadDir = System.getProperty(&quot;user.dir&quot;) + &quot;/src/main/resources/static&quot;;\n                Path paths = Paths.get(uploadDir);\n        if (!Files.exists(paths)) {\n            Files.createDirectories(paths);\n        }\n        Path imagePath = paths.resolve(filename);\n        try (InputStream inputStream = file.getInputStream()) {\n            Files.copy(inputStream, imagePath, StandardCopyOption.REPLACE_EXISTING);\n        } catch (IOException e) {\n            throw new RuntimeException(&quot;Fail to save file &quot; + filename, e);\n        }\n        return KanchanjungaApplication.SERVERURL + filename;\n    }\n\n    public Boolean deleteExistingFile(String fileName) {\n        String uploadDirectory = System.getProperty(&quot;user.dir&quot;) + &quot;/src/main/resources/static&quot;;\n        String filePathString = fileName.replace(KanchanjungaApplication.SERVERURL, &quot;&quot;);\n        Path filePath = Paths.get(uploadDirectory, filePathString);\n        try {\n            Files.deleteIfExists(filePath);\n            return true;\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        return false;\n    }\n}\n</code></pre>\n<p>i researched and tried to find solution but failed i really need help and your expertise`</p>\n"},{"tags":["java","jackson"],"comments":[{"owner":{"account_id":52616,"reputation":1042915,"user_id":157247,"accept_rate":91,"display_name":"T.J. Crowder"},"score":0,"creation_date":1536073931,"post_id":52169272,"comment_id":91289096,"body_markdown":"*&quot;The LocalDateTime.toString is not either in ISO 8601, the letter z in ISO8601 is gone.&quot;* Yes, it is. ISO-8601 doesn&#39;t require a timezone on strings; the string shown is a perfectly valid ISO-8601 datetime string. If there is no timezone, ISO-8601 assumes &quot;local time.&quot; Given that the class is `LocalDateTime`, that representation makes sense.","body":"<i>&quot;The LocalDateTime.toString is not either in ISO 8601, the letter z in ISO8601 is gone.&quot;</i> Yes, it is. ISO-8601 doesn&#39;t require a timezone on strings; the string shown is a perfectly valid ISO-8601 datetime string. If there is no timezone, ISO-8601 assumes &quot;local time.&quot; Given that the class is <code>LocalDateTime</code>, that representation makes sense."},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":1,"creation_date":1536074123,"post_id":52169272,"comment_id":91289214,"body_markdown":"The &quot;local&quot; part indicates the LocalDateTime is for a date/time without a timezone.","body":"The &quot;local&quot; part indicates the LocalDateTime is for a date/time without a timezone."},{"owner":{"account_id":13546677,"reputation":517,"user_id":9772778,"display_name":"Cosaic"},"score":0,"creation_date":1536074210,"post_id":52169272,"comment_id":91289274,"body_markdown":"Should I use `Instant` instead of `LocalDateTime`? If so, what should I change in my PostgreSQL DB?","body":"Should I use <code>Instant</code> instead of <code>LocalDateTime</code>? If so, what should I change in my PostgreSQL DB?"},{"owner":{"account_id":1528364,"reputation":125594,"user_id":1426227,"accept_rate":79,"display_name":"cassiomolin"},"score":0,"creation_date":1536074361,"post_id":52169272,"comment_id":91289383,"body_markdown":"@Cosaic See the [documentation](https://jdbc.postgresql.org/documentation/head/8-date-time.html).","body":"@Cosaic See the <a href=\"https://jdbc.postgresql.org/documentation/head/8-date-time.html\" rel=\"nofollow noreferrer\">documentation</a>."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1536077698,"post_id":52169272,"comment_id":91291279,"body_markdown":"@Cosaic Use `Instant` for an actual moment, a point on the timeline, in UTC. Use `LocalDateTime` when you mean all time zones or any time zone.  These are completely different animals, not at all interchangeable, because **`LocalDateTime` cannot represent a moment**. See: [*What’s the difference between `Instant` and `LocalDateTime`?*](https://stackoverflow.com/q/32437550/642706).","body":"@Cosaic Use <code>Instant</code> for an actual moment, a point on the timeline, in UTC. Use <code>LocalDateTime</code> when you mean all time zones or any time zone.  These are completely different animals, not at all interchangeable, because <b><code>LocalDateTime</code> cannot represent a moment</b>. See: <a href=\"https://stackoverflow.com/q/32437550/642706\"><i>What’s the difference between <code>Instant</code> and <code>LocalDateTime</code>?</i></a>."},{"owner":{"account_id":1528364,"reputation":125594,"user_id":1426227,"accept_rate":79,"display_name":"cassiomolin"},"score":0,"creation_date":1536078480,"post_id":52169272,"comment_id":91291654,"body_markdown":"@BasilBourque Your answer is golden. I wish I could upvote it again.","body":"@BasilBourque Your answer is golden. I wish I could upvote it again."}],"answers":[{"tags":[],"owner":{"account_id":1528364,"reputation":125594,"user_id":1426227,"accept_rate":79,"display_name":"cassiomolin"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1692966240,"creation_date":1536073928,"answer_id":52169382,"question_id":52169272,"body_markdown":"&gt; The `LocalDateTime.toString` is not either in ISO 8601, the letter `Z` in ISO8601 is gone.\r\n\r\n[`LocalDateTime`][1] a description of the date, as used for birthdays, combined with the local time as seen on a wall clock. It cannot represent an instant on the time-line without additional information such as an offset or time-zone.\r\n\r\n`Z` is the zone designator for the zero UTC offset and that&#39;s why you won&#39;t see it when invoking [`toString()`][2] from a [`LocalDateTime`][1] instance. Use [`ZonedDateTime`][3] or [`OffsetDateTime`][4] if you need a time-zone or an offset.\r\n\r\nTo (de)serialize [JSR-310][5] types with Jackson, consider the [`JavaTimeModule`][6]. See the [documentation][7] for details. \r\n\r\n---\r\n\r\n&gt; Should I use `Instant` instead of `LocalDateTime`? If so, what should I change in my PostgreSQL DB?\r\n\r\nCheck what the PostgreSQL JDBC driver [documentation][8] says about it:\r\n\r\n&gt; The PostgreSQL™ JDBC driver implements native support for the [Java 8 Date and Time API][9] (JSR-310) using JDBC 4.2.\r\n&gt;\r\n&gt;```\r\n&gt; +--------------------------------+----------------+\r\n&gt; | PostgreSQL™                    | Java SE 8      |\r\n&gt; +--------------------------------+----------------+\r\n&gt; | DATE                           | LocalDate      |\r\n&gt; | TIME [ WITHOUT TIMEZONE ]      | LocalTime      |\r\n&gt; | TIMESTAMP [ WITHOUT TIMEZONE ] | LocalDateTime  |\r\n&gt; | TIMESTAMP WITH TIMEZONE        | OffsetDateTime |\r\n&gt; +--------------------------------+----------------+\r\n&gt;```\r\n&gt;\r\n&gt; This is closely aligned with tables B-4 and B-5 of the JDBC 4.2 specification.\r\n&gt;\r\n&gt; **Note**  \r\n&gt; `ZonedDateTime`, `Instant` and `OffsetTime / TIME [ WITHOUT TIMEZONE ]` are not supported. Also note that all `OffsetDateTime` will instances will have be in UTC (have offset 0). This is because the backend stores them as UTC.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/10/docs/api/java/time/LocalDateTime.html\r\n  [2]: https://docs.oracle.com/javase/10/docs/api/java/time/LocalDateTime.html#toString()\r\n  [3]: https://docs.oracle.com/javase/10/docs/api/java/time/ZonedDateTime.html\r\n  [4]: https://docs.oracle.com/javase/10/docs/api/java/time/OffsetDateTime.html\r\n  [5]: https://docs.oracle.com/javase/10/docs/api/java/time/package-summary.html\r\n  [6]: https://fasterxml.github.io/jackson-modules-java8/javadoc/datetime/2.9/com/fasterxml/jackson/datatype/jsr310/JavaTimeModule.html\r\n  [7]: https://github.com/FasterXML/jackson-modules-java8/tree/master/datetime\r\n  [8]: https://jdbc.postgresql.org/documentation/query/\r\n  [9]: http://www.oracle.com/technetwork/articles/java/jf14-date-time-2125367.html","title":"LocalDateTime is not ISO8601 by default","body":"<blockquote>\n<p>The <code>LocalDateTime.toString</code> is not either in ISO 8601, the letter <code>Z</code> in ISO8601 is gone.</p>\n</blockquote>\n<p><a href=\"https://docs.oracle.com/javase/10/docs/api/java/time/LocalDateTime.html\" rel=\"nofollow noreferrer\"><code>LocalDateTime</code></a> a description of the date, as used for birthdays, combined with the local time as seen on a wall clock. It cannot represent an instant on the time-line without additional information such as an offset or time-zone.</p>\n<p><code>Z</code> is the zone designator for the zero UTC offset and that's why you won't see it when invoking <a href=\"https://docs.oracle.com/javase/10/docs/api/java/time/LocalDateTime.html#toString()\" rel=\"nofollow noreferrer\"><code>toString()</code></a> from a <a href=\"https://docs.oracle.com/javase/10/docs/api/java/time/LocalDateTime.html\" rel=\"nofollow noreferrer\"><code>LocalDateTime</code></a> instance. Use <a href=\"https://docs.oracle.com/javase/10/docs/api/java/time/ZonedDateTime.html\" rel=\"nofollow noreferrer\"><code>ZonedDateTime</code></a> or <a href=\"https://docs.oracle.com/javase/10/docs/api/java/time/OffsetDateTime.html\" rel=\"nofollow noreferrer\"><code>OffsetDateTime</code></a> if you need a time-zone or an offset.</p>\n<p>To (de)serialize <a href=\"https://docs.oracle.com/javase/10/docs/api/java/time/package-summary.html\" rel=\"nofollow noreferrer\">JSR-310</a> types with Jackson, consider the <a href=\"https://fasterxml.github.io/jackson-modules-java8/javadoc/datetime/2.9/com/fasterxml/jackson/datatype/jsr310/JavaTimeModule.html\" rel=\"nofollow noreferrer\"><code>JavaTimeModule</code></a>. See the <a href=\"https://github.com/FasterXML/jackson-modules-java8/tree/master/datetime\" rel=\"nofollow noreferrer\">documentation</a> for details.</p>\n<hr />\n<blockquote>\n<p>Should I use <code>Instant</code> instead of <code>LocalDateTime</code>? If so, what should I change in my PostgreSQL DB?</p>\n</blockquote>\n<p>Check what the PostgreSQL JDBC driver <a href=\"https://jdbc.postgresql.org/documentation/query/\" rel=\"nofollow noreferrer\">documentation</a> says about it:</p>\n<blockquote>\n<p>The PostgreSQL™ JDBC driver implements native support for the <a href=\"http://www.oracle.com/technetwork/articles/java/jf14-date-time-2125367.html\" rel=\"nofollow noreferrer\">Java 8 Date and Time API</a> (JSR-310) using JDBC 4.2.</p>\n<pre><code>+--------------------------------+----------------+\n| PostgreSQL™                    | Java SE 8      |\n+--------------------------------+----------------+\n| DATE                           | LocalDate      |\n| TIME [ WITHOUT TIMEZONE ]      | LocalTime      |\n| TIMESTAMP [ WITHOUT TIMEZONE ] | LocalDateTime  |\n| TIMESTAMP WITH TIMEZONE        | OffsetDateTime |\n+--------------------------------+----------------+\n</code></pre>\n<p>This is closely aligned with tables B-4 and B-5 of the JDBC 4.2 specification.</p>\n<p><strong>Note</strong><br />\n<code>ZonedDateTime</code>, <code>Instant</code> and <code>OffsetTime / TIME [ WITHOUT TIMEZONE ]</code> are not supported. Also note that all <code>OffsetDateTime</code> will instances will have be in UTC (have offset 0). This is because the backend stores them as UTC.</p>\n</blockquote>\n"}],"owner":{"account_id":13546677,"reputation":517,"user_id":9772778,"display_name":"Cosaic"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4613,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":52169382,"answer_count":1,"score":2,"last_activity_date":1692966240,"creation_date":1536073614,"question_id":52169272,"body_markdown":"I&#39;m using `LocalDateTime` to represent time.\r\nIn the debugging mode, I noticed that the time format is not in ISO 8601, which makes me hard to send directly to other apis.\r\n\r\nRequest class：\r\n\r\n    public class AgreementRequest {\r\n        @NonNull\r\n        private String name;\r\n        @NonNull\r\n        private String description;\r\n        @JsonProperty(&quot;start_date&quot;)\r\n        @DateTimeFormat(iso = DATE_TIME)\r\n        @NonNull\r\n        private String startDate;\r\n    }\r\n\r\nInitialization:\r\n\r\n    request = AgreementRequest.builder()\r\n                    .name(&quot;Premium subscription&quot;)\r\n                    .description(&quot;Montly subscription&quot;)\r\n                    .startDate(LocalDateTime.now().plusDays(1).toString()).build();\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nThe `LocalDateTime.toString` is not either in ISO 8601, the letter `z` in ISO8601 is gone.\r\n\r\n\r\nI have `objectMapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false);` disabled, is this the problem?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/IylN4.png","title":"LocalDateTime is not ISO8601 by default","body":"<p>I'm using <code>LocalDateTime</code> to represent time.\nIn the debugging mode, I noticed that the time format is not in ISO 8601, which makes me hard to send directly to other apis.</p>\n\n<p>Request class：</p>\n\n<pre><code>public class AgreementRequest {\n    @NonNull\n    private String name;\n    @NonNull\n    private String description;\n    @JsonProperty(\"start_date\")\n    @DateTimeFormat(iso = DATE_TIME)\n    @NonNull\n    private String startDate;\n}\n</code></pre>\n\n<p>Initialization:</p>\n\n<pre><code>request = AgreementRequest.builder()\n                .name(\"Premium subscription\")\n                .description(\"Montly subscription\")\n                .startDate(LocalDateTime.now().plusDays(1).toString()).build();\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/IylN4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IylN4.png\" alt=\"enter image description here\"></a></p>\n\n<p>The <code>LocalDateTime.toString</code> is not either in ISO 8601, the letter <code>z</code> in ISO8601 is gone.</p>\n\n<p>I have <code>objectMapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false);</code> disabled, is this the problem?</p>\n"},{"tags":["java","javafx","locale","badass-runtime-plugin"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1692966540,"post_id":76977146,"comment_id":135700392,"body_markdown":"You&#39;ll probably get a quicker answer to this if you ask on the plugin&#39;s Github","body":"You&#39;ll probably get a quicker answer to this if you ask on the plugin&#39;s Github"},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1693281184,"post_id":76977146,"comment_id":135736465,"body_markdown":"I think, behind the scenes, badass uses jlink and/or jpackage.  To [include locales using jlink you need a special option](https://docs.oracle.com/en/java/javase/17/docs/specs/man/jlink.html). You also need the `jdk.localedata` module added. Example: `--add-modules jdk.localedata --include-locales=en,ja,*-IN`. I don’t know how you configure badass to pass the required option to jlink, perhaps it will be mentioned in the plugin documentation.","body":"I think, behind the scenes, badass uses jlink and/or jpackage.  To <a href=\"https://docs.oracle.com/en/java/javase/17/docs/specs/man/jlink.html\" rel=\"nofollow noreferrer\">include locales using jlink you need a special option</a>. You also need the <code>jdk.localedata</code> module added. Example: <code>--add-modules jdk.localedata --include-locales=en,ja,*-IN</code>. I don’t know how you configure badass to pass the required option to jlink, perhaps it will be mentioned in the plugin documentation."}],"owner":{"account_id":9183711,"reputation":25,"user_id":6826736,"display_name":"Nessarose"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692966184,"creation_date":1692966184,"question_id":76977146,"body_markdown":"I&#39;m creating an image of my javafx application using Badass Runtime plugin https://github.com/beryx/badass-runtime-plugin\r\nWhen I execute the bat file to launch my application the locale is not set to Spanish which is the locale of my code.\r\nAny idea why is it happening and how can I solve it?\r\nThank you!","title":"Badass runtime plugin locale","body":"<p>I'm creating an image of my javafx application using Badass Runtime plugin <a href=\"https://github.com/beryx/badass-runtime-plugin\" rel=\"nofollow noreferrer\">https://github.com/beryx/badass-runtime-plugin</a>\nWhen I execute the bat file to launch my application the locale is not set to Spanish which is the locale of my code.\nAny idea why is it happening and how can I solve it?\nThank you!</p>\n"},{"tags":["java","generics","types","collections"],"comments":[{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1692715246,"post_id":76950367,"comment_id":135660381,"body_markdown":"You can see with [`Collections::swap`](https://github.com/openjdk/jdk/blob/20e94784c9f7c30e95550c72aedb5e986a153114/src/java.base/share/classes/java/util/Collections.java#L520) that using `List&lt;?&gt;` requires raw types and suppressing warnings. Given a swap method inherently needs to both read and _write_ to the list, I never understood why the built-in `swap` method _did not_ use `List&lt;T&gt;`.","body":"You can see with <a href=\"https://github.com/openjdk/jdk/blob/20e94784c9f7c30e95550c72aedb5e986a153114/src/java.base/share/classes/java/util/Collections.java#L520\" rel=\"nofollow noreferrer\"><code>Collections::swap</code></a> that using <code>List&lt;?&gt;</code> requires raw types and suppressing warnings. Given a swap method inherently needs to both read and <i>write</i> to the list, I never understood why the built-in <code>swap</code> method <i>did not</i> use <code>List&lt;T&gt;</code>."}],"answers":[{"tags":[],"owner":{"account_id":16834351,"reputation":171,"user_id":12171447,"display_name":"Francesco"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692683284,"creation_date":1692683284,"answer_id":76950391,"question_id":76950367,"body_markdown":"The wildcard symbol &#39;?&#39;, can add complexity to the code in certain situations, while the `swapHelper` method it might not be necessary or advantageous in many common scenarios.\r\nIn many cases, when you&#39;re working with generics and collections, you already know the type of elements you&#39;re dealing with so there&#39;s no need to use a captured type and by doing this you make the code more straightforward and less error-prone.\r\n\r\nCaptured types typically come into play when you&#39;re dealing with unknown or mixed types within a collection. However, in practice, we often try to structure the code in a way that avoids such situations to keep the codebase more manageable and comprehensible.","title":"Why does Java ArrayList&#39;s reverse method doesn&#39;t use capture of wildcard?","body":"<p>The wildcard symbol '?', can add complexity to the code in certain situations, while the <code>swapHelper</code> method it might not be necessary or advantageous in many common scenarios.\nIn many cases, when you're working with generics and collections, you already know the type of elements you're dealing with so there's no need to use a captured type and by doing this you make the code more straightforward and less error-prone.</p>\n<p>Captured types typically come into play when you're dealing with unknown or mixed types within a collection. However, in practice, we often try to structure the code in a way that avoids such situations to keep the codebase more manageable and comprehensible.</p>\n"},{"tags":[],"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692965886,"creation_date":1692965886,"answer_id":76977109,"question_id":76950367,"body_markdown":"The short answer -- generics are powerful and useful, but not every method needs them.\r\n\r\nThink about it. You want to reverse a list. Not take something out, or put something back in. What would generics give you here?\r\n\r\nIf you wanted to extract something from the list, generics would allow you to maintain type-safety by ensuring that what comes out is of a particular type.\r\n\r\nIf you wanted to put something into the list, generics would allow you to ensure that the item you are inserting into the list is a type that the list can handle.\r\n\r\nBut in your situation, your items are already in the list, and you are not taking them out right at this moment. Specifically, the method&#39;s return type is void. Therefore, what do generics give you?\r\n\r\nThe answer is - nothing useful. At least not for this shuffle method. Like I said, they are useful elsewhere, but not for this shuffle method.\r\n\r\nAnd you will see similar things for other methods. Consider the following.\r\n\r\n* [`Collections.disjoint(Collection&lt;?&gt; c1, Collection&lt;?&gt; c2) --&gt; boolean`][1]\r\n* [`Collections.frequency(Collection&lt;?&gt; c1, Object o) --&gt; int`][2]\r\n\r\nFor both of the above examples, they don&#39;t actually care about what the parameterized type is for each of the `Collection` parameters. So, they simply put those aside, and focus on doing the actual task given. Also notice that their return types are unrelated to the parameterized types of each `Collection`, so again, there is no benefit to be had by inserting a type parameter here.\r\n\r\nUse generics where they are useful. They add complexity, so the only time you should include them is when the tradeoff actually gives you something good in exchange.\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Collections.html#disjoint(java.util.Collection,java.util.Collection)\r\n  [2]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Collections.html#frequency(java.util.Collection,java.lang.Object)","title":"Why does Java ArrayList&#39;s reverse method doesn&#39;t use capture of wildcard?","body":"<p>The short answer -- generics are powerful and useful, but not every method needs them.</p>\n<p>Think about it. You want to reverse a list. Not take something out, or put something back in. What would generics give you here?</p>\n<p>If you wanted to extract something from the list, generics would allow you to maintain type-safety by ensuring that what comes out is of a particular type.</p>\n<p>If you wanted to put something into the list, generics would allow you to ensure that the item you are inserting into the list is a type that the list can handle.</p>\n<p>But in your situation, your items are already in the list, and you are not taking them out right at this moment. Specifically, the method's return type is void. Therefore, what do generics give you?</p>\n<p>The answer is - nothing useful. At least not for this shuffle method. Like I said, they are useful elsewhere, but not for this shuffle method.</p>\n<p>And you will see similar things for other methods. Consider the following.</p>\n<ul>\n<li><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Collections.html#disjoint(java.util.Collection,java.util.Collection)\" rel=\"nofollow noreferrer\"><code>Collections.disjoint(Collection&lt;?&gt; c1, Collection&lt;?&gt; c2) --&gt; boolean</code></a></li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Collections.html#frequency(java.util.Collection,java.lang.Object)\" rel=\"nofollow noreferrer\"><code>Collections.frequency(Collection&lt;?&gt; c1, Object o) --&gt; int</code></a></li>\n</ul>\n<p>For both of the above examples, they don't actually care about what the parameterized type is for each of the <code>Collection</code> parameters. So, they simply put those aside, and focus on doing the actual task given. Also notice that their return types are unrelated to the parameterized types of each <code>Collection</code>, so again, there is no benefit to be had by inserting a type parameter here.</p>\n<p>Use generics where they are useful. They add complexity, so the only time you should include them is when the tradeoff actually gives you something good in exchange.</p>\n"}],"owner":{"account_id":20301213,"reputation":13,"user_id":14890564,"display_name":"CHAEHOON PARK"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76977109,"answer_count":2,"score":1,"last_activity_date":1692965886,"creation_date":1692682937,"question_id":76950367,"body_markdown":"I&#39;m currently studying on Effective Java Item 26, 27.\r\n\r\nI learned about the captured type and looked up on Java Collections&#39;s reverse method,\r\n\r\nand recognized that Java developers didn&#39;t use capture of type.\r\n\r\n\r\n\r\n\r\nLooked up on GPT, and is replies that Java Developers might not have used it\r\n\r\nbecause using type capture would increase the complexity of the code.\r\n\r\nI kind of get the idea, but wonder this is the actual idea.\r\n\r\n[Understanding a captured type in Java (symbol &#39;?&#39;)](https://stackoverflow.com/questions/30797805/understanding-a-captured-type-in-java-symbol#answer-30798066)\r\n\r\n[Chapter&#160;5.&#160;Conversions and Contexts](https://docs.oracle.com/javase/specs/jls/se8/html/jls-5.html#jls-5.1.10)\r\n\r\n\r\n```java\r\nprivate static &lt;T&gt; void swapHelper(List&lt;T&gt; list, int i, int j) {    // captured!\r\n        T temp = list.get(i);\r\n        list.set(i, list.get(j));\r\n        list.set(j, temp);\r\n}\r\n```\r\nI know the method above (swapHelper) can be used. Just curious why they didn&#39;t used it.\r\n","title":"Why does Java ArrayList&#39;s reverse method doesn&#39;t use capture of wildcard?","body":"<p>I'm currently studying on Effective Java Item 26, 27.</p>\n<p>I learned about the captured type and looked up on Java Collections's reverse method,</p>\n<p>and recognized that Java developers didn't use capture of type.</p>\n<p>Looked up on GPT, and is replies that Java Developers might not have used it</p>\n<p>because using type capture would increase the complexity of the code.</p>\n<p>I kind of get the idea, but wonder this is the actual idea.</p>\n<p><a href=\"https://stackoverflow.com/questions/30797805/understanding-a-captured-type-in-java-symbol#answer-30798066\">Understanding a captured type in Java (symbol '?')</a></p>\n<p><a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-5.html#jls-5.1.10\" rel=\"nofollow noreferrer\">Chapter 5. Conversions and Contexts</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>private static &lt;T&gt; void swapHelper(List&lt;T&gt; list, int i, int j) {    // captured!\n        T temp = list.get(i);\n        list.set(i, list.get(j));\n        list.set(j, temp);\n}\n</code></pre>\n<p>I know the method above (swapHelper) can be used. Just curious why they didn't used it.</p>\n"},{"tags":["java","arrays","selenium-webdriver"],"comments":[{"owner":{"account_id":1203541,"reputation":24718,"user_id":1173729,"accept_rate":75,"display_name":"Arran"},"score":0,"creation_date":1377679244,"post_id":18475578,"comment_id":27169462,"body_markdown":"Well what information from the WebElement you want? Do you want it&#39;s `text`? Some other attribute?","body":"Well what information from the WebElement you want? Do you want it&#39;s <code>text</code>? Some other attribute?"},{"owner":{"account_id":2652108,"reputation":95,"user_id":2293498,"accept_rate":44,"display_name":"vslat"},"score":0,"creation_date":1377781711,"post_id":18475578,"comment_id":27219411,"body_markdown":"I was trying to get the text, then do a string comparison.","body":"I was trying to get the text, then do a string comparison."}],"answers":[{"tags":[],"owner":{"account_id":2121679,"reputation":1115,"user_id":1884792,"accept_rate":43,"display_name":"Lingaraj R M"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1398412676,"creation_date":1398412676,"answer_id":23287368,"question_id":18475578,"body_markdown":"Please try using following sample code, change xpath/data accordingly        \r\n\r\n    List&lt;WebElement&gt; resultList = _driver.findElements(By.xpath(&quot;//img[contains(@src,&#39;tab-close.png&#39;)]/preceding-sibling::span[@class=&#39;tab-name ng-binding&#39;]&quot;));\r\n            for (WebElement resultItem : resultList){\r\n               String tabname=resultItem.getText();\r\n               if(resultItem.getText().equalsIgnoreCase(&quot;Dashboard&quot;)){\r\n               GlobalFunctions.clickOnButtonCustomised(false, _driver, By.xpath(&quot;//span[@class=&#39;tab-name ng-binding&#39; and contains(text(),&#39;&quot;+tabname+&quot;&#39;)]/following-sibling::img[contains(@src,&#39;tab-close.png&#39;)]&quot;), &quot;&quot;);\r\n                }\r\n            }","title":"Selenium adding items from a Web element list to a string array list","body":"<p>Please try using following sample code, change xpath/data accordingly        </p>\n\n<pre><code>List&lt;WebElement&gt; resultList = _driver.findElements(By.xpath(\"//img[contains(@src,'tab-close.png')]/preceding-sibling::span[@class='tab-name ng-binding']\"));\n        for (WebElement resultItem : resultList){\n           String tabname=resultItem.getText();\n           if(resultItem.getText().equalsIgnoreCase(\"Dashboard\")){\n           GlobalFunctions.clickOnButtonCustomised(false, _driver, By.xpath(\"//span[@class='tab-name ng-binding' and contains(text(),'\"+tabname+\"')]/following-sibling::img[contains(@src,'tab-close.png')]\"), \"\");\n            }\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1470573,"reputation":29818,"user_id":1382251,"accept_rate":68,"display_name":"barak manos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1398417049,"creation_date":1398417049,"answer_id":23288840,"question_id":18475578,"body_markdown":"Change this:\r\n\r\n    for (int i=0; i&lt;tbl1; i++)\r\n        webList.add(emailFolders.get(0));\r\n\r\nTo this:\r\n\r\n    for (WebElement emailFolder : emailFolders)\r\n        webList.add(emailFolder.getAttribute(XXX));\r\n\r\nThen, replace `XXX` with the name of the attribute which stores the actual folder name.\r\n\r\nA few examples:\r\n\r\n- For `&lt;tag&gt;&lt;class=&quot;folder-name&quot; id=&quot;folder1&quot;&gt;&lt;/tag&gt;`, replace `XXX` with `&quot;id&quot;`\r\n- For `&lt;tag&gt;&lt;class=&quot;folder-name&quot; value=&quot;folder1&quot;&gt;&lt;/tag&gt;`, replace `XXX` with `&quot;value&quot;`\r\n- For `&lt;tag&gt;&lt;class=&quot;folder-name&quot;&gt;folder1&lt;/tag&gt;`, replace `XXX` with `&quot;innerHTML&quot;`\r\n\r\nBTW, instead of `getAttribute(&quot;innerHTML&quot;)`, you can simply use `getText()`.\r\n","title":"Selenium adding items from a Web element list to a string array list","body":"<p>Change this:</p>\n\n<pre><code>for (int i=0; i&lt;tbl1; i++)\n    webList.add(emailFolders.get(0));\n</code></pre>\n\n<p>To this:</p>\n\n<pre><code>for (WebElement emailFolder : emailFolders)\n    webList.add(emailFolder.getAttribute(XXX));\n</code></pre>\n\n<p>Then, replace <code>XXX</code> with the name of the attribute which stores the actual folder name.</p>\n\n<p>A few examples:</p>\n\n<ul>\n<li>For <code>&lt;tag&gt;&lt;class=\"folder-name\" id=\"folder1\"&gt;&lt;/tag&gt;</code>, replace <code>XXX</code> with <code>\"id\"</code></li>\n<li>For <code>&lt;tag&gt;&lt;class=\"folder-name\" value=\"folder1\"&gt;&lt;/tag&gt;</code>, replace <code>XXX</code> with <code>\"value\"</code></li>\n<li>For <code>&lt;tag&gt;&lt;class=\"folder-name\"&gt;folder1&lt;/tag&gt;</code>, replace <code>XXX</code> with <code>\"innerHTML\"</code></li>\n</ul>\n\n<p>BTW, instead of <code>getAttribute(\"innerHTML\")</code>, you can simply use <code>getText()</code>.</p>\n"},{"tags":[],"owner":{"account_id":3234687,"reputation":165,"user_id":2729186,"display_name":"Chris Liston"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1487780761,"creation_date":1487780414,"answer_id":42396897,"question_id":18475578,"body_markdown":"There may be an easier way to convert a List of WebElements to String[] array, but this generic method works -\r\n\r\n\t//\titerate through all elements adding to array we are returning\r\n\tpublic static String[] listToStringArray(List&lt;WebElement&gt; inList) {\r\n\t\tString[] outArray = new String[inList.size()];\t// instantiate Array\r\n\t\t\r\n\t\tfor (int i = 0; i &lt; inList.size(); i++) {\r\n\t\t\toutArray[i] = inList.get(i).getText();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn outArray;\r\n\t}\r\n","title":"Selenium adding items from a Web element list to a string array list","body":"<p>There may be an easier way to convert a List of WebElements to String[] array, but this generic method works -</p>\n\n<pre><code>//  iterate through all elements adding to array we are returning\npublic static String[] listToStringArray(List&lt;WebElement&gt; inList) {\n    String[] outArray = new String[inList.size()];  // instantiate Array\n\n    for (int i = 0; i &lt; inList.size(); i++) {\n        outArray[i] = inList.get(i).getText();\n        }\n    }\n    return outArray;\n}\n</code></pre>\n"}],"owner":{"account_id":2652108,"reputation":95,"user_id":2293498,"accept_rate":44,"display_name":"vslat"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32106,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1692965296,"creation_date":1377637946,"question_id":18475578,"body_markdown":"I&#39;m doing some automated testing and I&#39;m trying to save some items from a web element list to a string array, there should be some parsing involved but I&#39;m not sure how, see code snippet below\r\n\r\n\tpublic void I_should_see_the_following_folders(DataTable expectedData) throws Throwable {\r\n\t\tint tbl1; int tbl2;\r\n\t\tList&lt;List&lt;String&gt;&gt; featureTable = expectedData.raw();\r\n\t\tWebElement folders = driver.findElement(By.id(&quot;folders&quot;));\r\n\t\tList &lt;WebElement&gt; emailFolders = folders.findElements(By.className(&quot;folder-name&quot;));\r\n\t\t\r\n\t\tList&lt;String&gt; foo = new ArrayList&lt;String&gt;();\r\n\t\tfor (List&lt;String&gt; featuresList : expectedData.raw())\r\n\t\t\tfoo.add(featuresList.get(0));\r\n\t\t\t\r\n\t\t\ttbl1 = emailFolders.size();\r\n\t\t\ttbl2 = featureTable.size();\r\n\t\t\t\r\n\t\tList&lt;String&gt; webList = new ArrayList&lt;String&gt;();\r\n\t\tfor(int i=0;i&lt;tbl1;i++){\r\n\t\t\twebList.add(emailFolders.get(0));\r\n\t\t}\r\n\t\t\t\r\n\t\t\r\n\r\n\t}\r\n\r\nwhat I&#39;m trying to do is take a datatable list of items, convert it into a string array and then take a list of items from the webpage and also store it into a string array and then compare each array to determine if the elements are present and are the same in not particular order.\r\n\r\nI think I got the data table array list to work, but need some help with the web elements array list. \r\n\r\nThanks!!!","title":"Selenium adding items from a Web element list to a string array list","body":"<p>I'm doing some automated testing and I'm trying to save some items from a web element list to a string array, there should be some parsing involved but I'm not sure how, see code snippet below</p>\n\n<pre><code>public void I_should_see_the_following_folders(DataTable expectedData) throws Throwable {\n    int tbl1; int tbl2;\n    List&lt;List&lt;String&gt;&gt; featureTable = expectedData.raw();\n    WebElement folders = driver.findElement(By.id(\"folders\"));\n    List &lt;WebElement&gt; emailFolders = folders.findElements(By.className(\"folder-name\"));\n\n    List&lt;String&gt; foo = new ArrayList&lt;String&gt;();\n    for (List&lt;String&gt; featuresList : expectedData.raw())\n        foo.add(featuresList.get(0));\n\n        tbl1 = emailFolders.size();\n        tbl2 = featureTable.size();\n\n    List&lt;String&gt; webList = new ArrayList&lt;String&gt;();\n    for(int i=0;i&lt;tbl1;i++){\n        webList.add(emailFolders.get(0));\n    }\n\n\n\n}\n</code></pre>\n\n<p>what I'm trying to do is take a datatable list of items, convert it into a string array and then take a list of items from the webpage and also store it into a string array and then compare each array to determine if the elements are present and are the same in not particular order.</p>\n\n<p>I think I got the data table array list to work, but need some help with the web elements array list. </p>\n\n<p>Thanks!!!</p>\n"},{"tags":["java","maven","classnotfoundexception","methodnotfound"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":3,"creation_date":1692965223,"post_id":76976965,"comment_id":135700121,"body_markdown":"it says NoSuchMethod, not NoSuchClass. Chances are, you have dependencies to several versions which contain that class, and one has that method, but the other doesn&#39;t","body":"it says NoSuchMethod, not NoSuchClass. Chances are, you have dependencies to several versions which contain that class, and one has that method, but the other doesn&#39;t"},{"owner":{"account_id":8054037,"reputation":1564,"user_id":6071721,"display_name":"Gremi64"},"score":0,"creation_date":1695995190,"post_id":76976965,"comment_id":136101025,"body_markdown":"did you find a solution ? can you share it please ?","body":"did you find a solution ? can you share it please ?"},{"owner":{"account_id":18056483,"reputation":17,"user_id":13260382,"display_name":"koque"},"score":0,"creation_date":1696083738,"post_id":76976965,"comment_id":136110145,"body_markdown":"I relocated the wrong package instead of relocating com.google.cloud relocate com.google.collect.","body":"I relocated the wrong package instead of relocating com.google.cloud relocate com.google.collect."}],"owner":{"account_id":18056483,"reputation":17,"user_id":13260382,"display_name":"koque"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692964602,"creation_date":1692964602,"question_id":76976965,"body_markdown":"I&#39;m getting the following error:\r\n\r\n    java.lang.NoSuchMethodError: &#39;com.google.common.collect.ImmutableMap com.google.common.collect.ImmutableMap$Builder.buildKeepingLast()&#39;\r\n\r\nMy pom file looks like that:\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n      xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n      &lt;groupId&gt;de.kastenklicker&lt;/groupId&gt;\r\n      &lt;artifactId&gt;ActivateServer&lt;/artifactId&gt;\r\n      &lt;version&gt;0.0.1&lt;/version&gt;\r\n    \r\n      &lt;name&gt;activateServer&lt;/name&gt;\r\n      &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n    \r\n      &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n      &lt;/properties&gt;\r\n    \r\n      &lt;repositories&gt;\r\n        &lt;repository&gt;\r\n          &lt;id&gt;papermc&lt;/id&gt;\r\n          &lt;url&gt;https://repo.papermc.io/repository/maven-public/&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n      &lt;/repositories&gt;\r\n    \r\n      &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;com.velocitypowered&lt;/groupId&gt;\r\n          &lt;artifactId&gt;velocity-api&lt;/artifactId&gt;\r\n          &lt;version&gt;3.2.0-SNAPSHOT&lt;/version&gt;\r\n          &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;com.github.t9t.minecraft-rcon-client&lt;/groupId&gt;\r\n          &lt;artifactId&gt;minecraft-rcon-client&lt;/artifactId&gt;\r\n          &lt;version&gt;1.0.0&lt;/version&gt;\r\n          &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/com.google.cloud/google-cloud-compute --&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\r\n          &lt;artifactId&gt;google-cloud-compute&lt;/artifactId&gt;\r\n          &lt;version&gt;1.33.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n      &lt;/dependencies&gt;\r\n    \r\n      &lt;build&gt;\r\n        &lt;plugins&gt;\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;3.5.0&lt;/version&gt;\r\n            &lt;configuration&gt;\r\n              &lt;relocations&gt;\r\n                &lt;relocation&gt;\r\n                  &lt;pattern&gt;com.github.t9t.minecraft-rcon-client&lt;/pattern&gt;\r\n                  &lt;shadedPattern&gt;de.kastenklicker.activeserver.com.github.t9t.minecraft-rcon-client&lt;/shadedPattern&gt;\r\n                &lt;/relocation&gt;\r\n                &lt;relocation&gt;\r\n                  &lt;pattern&gt;com.google.cloud&lt;/pattern&gt;\r\n                  &lt;shadedPattern&gt;de.kastenklicker.activeserver.com.google.cloud&lt;/shadedPattern&gt;\r\n                &lt;/relocation&gt;\r\n              &lt;/relocations&gt;\r\n            &lt;/configuration&gt;\r\n            &lt;executions&gt;\r\n              &lt;execution&gt;\r\n                &lt;phase&gt;package&lt;/phase&gt;\r\n                &lt;goals&gt;\r\n                  &lt;goal&gt;shade&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n                &lt;configuration&gt;\r\n                  &lt;filters&gt;\r\n                    &lt;filter&gt;\r\n                      &lt;artifact&gt;*:*&lt;/artifact&gt;\r\n                      &lt;excludes&gt;\r\n                        &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\r\n                        &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\r\n                        &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\r\n                      &lt;/excludes&gt;\r\n                    &lt;/filter&gt;\r\n                  &lt;/filters&gt;\r\n                &lt;/configuration&gt;\r\n              &lt;/execution&gt;\r\n            &lt;/executions&gt;\r\n          &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n      &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\nWhat I tried so far:\r\nAdding google guava, like suggested in another [question](https://stackoverflow.com/questions/71095560/java-lang-nosuchmethoderror-com-google-common-collect-immutablemap-error-when).\r\n\r\nIncluding the class manual:\r\n\r\n    &lt;artifactSet&gt;\r\n        &lt;includes&gt;\r\n            &lt;include&gt;com.google.common.collect.ImmutableMap&lt;/include&gt;\r\n        &lt;/includes&gt;\r\n    &lt;/artifactSet&gt;\r\n\r\nwhich results in:\r\n\r\n    java.lang.NoClassDefFoundError: com/google/auth/Credentials\r\n\r\nand adding:\r\n\r\n    &lt;include&gt;com.google.auth.Credentials&lt;/include&gt;\r\ndoes nothing.\r\n\r\nFor context, the code I wrote is a plugin for the velocitypowered proxy and should start a Google Compute Engine, when a server connects to the proxy. My code works fine as standalone application.\r\n\r\nI don&#39;t know any further, any help is appreciated. Thx","title":"java.lang.NoSuchMethodError caused by maven shade","body":"<p>I'm getting the following error:</p>\n<pre><code>java.lang.NoSuchMethodError: 'com.google.common.collect.ImmutableMap com.google.common.collect.ImmutableMap$Builder.buildKeepingLast()'\n</code></pre>\n<p>My pom file looks like that:</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;de.kastenklicker&lt;/groupId&gt;\n  &lt;artifactId&gt;ActivateServer&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1&lt;/version&gt;\n\n  &lt;name&gt;activateServer&lt;/name&gt;\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n\n  &lt;properties&gt;\n    &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n  &lt;/properties&gt;\n\n  &lt;repositories&gt;\n    &lt;repository&gt;\n      &lt;id&gt;papermc&lt;/id&gt;\n      &lt;url&gt;https://repo.papermc.io/repository/maven-public/&lt;/url&gt;\n    &lt;/repository&gt;\n  &lt;/repositories&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.velocitypowered&lt;/groupId&gt;\n      &lt;artifactId&gt;velocity-api&lt;/artifactId&gt;\n      &lt;version&gt;3.2.0-SNAPSHOT&lt;/version&gt;\n      &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.github.t9t.minecraft-rcon-client&lt;/groupId&gt;\n      &lt;artifactId&gt;minecraft-rcon-client&lt;/artifactId&gt;\n      &lt;version&gt;1.0.0&lt;/version&gt;\n      &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/com.google.cloud/google-cloud-compute --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\n      &lt;artifactId&gt;google-cloud-compute&lt;/artifactId&gt;\n      &lt;version&gt;1.33.0&lt;/version&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.5.0&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;relocations&gt;\n            &lt;relocation&gt;\n              &lt;pattern&gt;com.github.t9t.minecraft-rcon-client&lt;/pattern&gt;\n              &lt;shadedPattern&gt;de.kastenklicker.activeserver.com.github.t9t.minecraft-rcon-client&lt;/shadedPattern&gt;\n            &lt;/relocation&gt;\n            &lt;relocation&gt;\n              &lt;pattern&gt;com.google.cloud&lt;/pattern&gt;\n              &lt;shadedPattern&gt;de.kastenklicker.activeserver.com.google.cloud&lt;/shadedPattern&gt;\n            &lt;/relocation&gt;\n          &lt;/relocations&gt;\n        &lt;/configuration&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;phase&gt;package&lt;/phase&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;shade&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n              &lt;filters&gt;\n                &lt;filter&gt;\n                  &lt;artifact&gt;*:*&lt;/artifact&gt;\n                  &lt;excludes&gt;\n                    &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\n                    &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\n                    &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\n                  &lt;/excludes&gt;\n                &lt;/filter&gt;\n              &lt;/filters&gt;\n            &lt;/configuration&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>What I tried so far:\nAdding google guava, like suggested in another <a href=\"https://stackoverflow.com/questions/71095560/java-lang-nosuchmethoderror-com-google-common-collect-immutablemap-error-when\">question</a>.</p>\n<p>Including the class manual:</p>\n<pre><code>&lt;artifactSet&gt;\n    &lt;includes&gt;\n        &lt;include&gt;com.google.common.collect.ImmutableMap&lt;/include&gt;\n    &lt;/includes&gt;\n&lt;/artifactSet&gt;\n</code></pre>\n<p>which results in:</p>\n<pre><code>java.lang.NoClassDefFoundError: com/google/auth/Credentials\n</code></pre>\n<p>and adding:</p>\n<pre><code>&lt;include&gt;com.google.auth.Credentials&lt;/include&gt;\n</code></pre>\n<p>does nothing.</p>\n<p>For context, the code I wrote is a plugin for the velocitypowered proxy and should start a Google Compute Engine, when a server connects to the proxy. My code works fine as standalone application.</p>\n<p>I don't know any further, any help is appreciated. Thx</p>\n"},{"tags":["java","bouncycastle","provider"],"comments":[{"owner":{"account_id":213468,"reputation":103492,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1604085566,"post_id":64614376,"comment_id":114249758,"body_markdown":"Why do you need to install the provider in the JVM, isn&#39;t it sufficient to have it on your classpath and add it from within your application?","body":"Why do you need to install the provider in the JVM, isn&#39;t it sufficient to have it on your classpath and add it from within your application?"},{"owner":{"account_id":18437987,"reputation":23,"user_id":14512808,"display_name":"MaXbeMan"},"score":0,"creation_date":1604302915,"post_id":64614376,"comment_id":114295746,"body_markdown":"I thought it made more sense to set it as a provider. Is this not possible or is it not recommended?","body":"I thought it made more sense to set it as a provider. Is this not possible or is it not recommended?"}],"answers":[{"tags":[],"owner":{"account_id":10647443,"reputation":118,"user_id":7839582,"display_name":"Ripal Patel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692964533,"creation_date":1605116464,"answer_id":64791444,"question_id":64614376,"body_markdown":"if you are using Maven then add BouncyCastle dependency in pom.xml.\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\r\n        &lt;artifactId&gt;bcprov-ext-jdk15to18&lt;/artifactId&gt;\r\n        &lt;version&gt;1.67&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nLater, you can dynamically add BouncyCastleProvider using below line when you need it.\r\n\r\n    Security.addProvider(new BouncyCastleProvider());\r\n\r\nTo add statically, \r\n\r\nAdd the Bouncy Castle provider jar to the $JAVA_HOME/jre/lib/ext directory\r\n\r\nadd below line in this file {JAVA_HOME}/jre/lib/security/java.security\r\n\r\n    security.provider.N = org.bouncycastle.jce.provider.BouncyCastleProvider\r\n\r\n\r\n\r\n\r\n\r\n","title":"Installing the Bouncy Castle Provider in java version &quot;15.0.1&quot;","body":"<p>if you are using Maven then add BouncyCastle dependency in pom.xml.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\n    &lt;artifactId&gt;bcprov-ext-jdk15to18&lt;/artifactId&gt;\n    &lt;version&gt;1.67&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Later, you can dynamically add BouncyCastleProvider using below line when you need it.</p>\n<pre><code>Security.addProvider(new BouncyCastleProvider());\n</code></pre>\n<p>To add statically,</p>\n<p>Add the Bouncy Castle provider jar to the $JAVA_HOME/jre/lib/ext directory</p>\n<p>add below line in this file {JAVA_HOME}/jre/lib/security/java.security</p>\n<pre><code>security.provider.N = org.bouncycastle.jce.provider.BouncyCastleProvider\n</code></pre>\n"}],"owner":{"account_id":18437987,"reputation":23,"user_id":14512808,"display_name":"MaXbeMan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4462,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":64791444,"answer_count":1,"score":0,"last_activity_date":1692964533,"creation_date":1604084867,"question_id":64614376,"body_markdown":"I need to install this provider in windows 10.\r\nThis is the java version:\r\n\r\n    java version &quot;15.0.1&quot; 2020-10-20\r\n    Java(TM) SE Runtime Environment (build 15.0.1+9-18)\r\n    Java HotSpot(TM) 64-Bit Server VM (build 15.0.1+9-18, mixed mode, sharing)\r\n\r\nNow, I changed the java.security file to\r\n\r\n    Java\\jdk-15.0.1\\conf\\security\r\n\r\nI added the provider like this:\r\n\r\n    # List of providers and their preference orders (see above):\r\n    #\r\n    security.provider.1=SUN\r\n    security.provider.2=SunRsaSign\r\n    security.provider.3=SunEC\r\n    security.provider.4=SunJSSE\r\n    security.provider.5=SunJCE\r\n    security.provider.6=SunJGSS\r\n    security.provider.7=SunSASL\r\n    security.provider.8=XMLDSig\r\n    security.provider.9=SunPCSC\r\n    security.provider.10=JdkLDAP\r\n    security.provider.11=JdkSASL\r\n    security.provider.12=SunMSCAPI\r\n    security.provider.13=SunPKCS11\r\n    security.provider.14=org.bouncycastle.jce.provider.BouncyCastleProvider\r\n\r\nIn this version of Java where should jar files be placed? I don&#39;t have the \\lib\\ext path\r\n\r\nDid I edit the correct file?","title":"Installing the Bouncy Castle Provider in java version &quot;15.0.1&quot;","body":"<p>I need to install this provider in windows 10.\nThis is the java version:</p>\n<pre><code>java version &quot;15.0.1&quot; 2020-10-20\nJava(TM) SE Runtime Environment (build 15.0.1+9-18)\nJava HotSpot(TM) 64-Bit Server VM (build 15.0.1+9-18, mixed mode, sharing)\n</code></pre>\n<p>Now, I changed the java.security file to</p>\n<pre><code>Java\\jdk-15.0.1\\conf\\security\n</code></pre>\n<p>I added the provider like this:</p>\n<pre><code># List of providers and their preference orders (see above):\n#\nsecurity.provider.1=SUN\nsecurity.provider.2=SunRsaSign\nsecurity.provider.3=SunEC\nsecurity.provider.4=SunJSSE\nsecurity.provider.5=SunJCE\nsecurity.provider.6=SunJGSS\nsecurity.provider.7=SunSASL\nsecurity.provider.8=XMLDSig\nsecurity.provider.9=SunPCSC\nsecurity.provider.10=JdkLDAP\nsecurity.provider.11=JdkSASL\nsecurity.provider.12=SunMSCAPI\nsecurity.provider.13=SunPKCS11\nsecurity.provider.14=org.bouncycastle.jce.provider.BouncyCastleProvider\n</code></pre>\n<p>In this version of Java where should jar files be placed? I don't have the \\lib\\ext path</p>\n<p>Did I edit the correct file?</p>\n"},{"tags":["java","sockets","client-server","serversocket"],"answers":[{"tags":[],"owner":{"account_id":179924,"reputation":3558,"user_id":412908,"accept_rate":67,"display_name":"Neil Brown"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1692476550,"creation_date":1692476550,"answer_id":76936896,"question_id":76935177,"body_markdown":"One thing that looks odd is that in `updatePosition()` you call `receiveInts()` twice, so the first one will read from the socket then discard it, and the second one will have to wait for the next corresponding `sendInts()` call.  I suspect you want the assignment to `w1` before the if statement in `updatePosition()`, then check if `w1` is null.","title":"Program stop when server try to receive client data","body":"<p>One thing that looks odd is that in <code>updatePosition()</code> you call <code>receiveInts()</code> twice, so the first one will read from the socket then discard it, and the second one will have to wait for the next corresponding <code>sendInts()</code> call.  I suspect you want the assignment to <code>w1</code> before the if statement in <code>updatePosition()</code>, then check if <code>w1</code> is null.</p>\n"}],"owner":{"account_id":29256899,"reputation":3,"user_id":22414897,"display_name":"Gianluca"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76936896,"answer_count":1,"score":0,"last_activity_date":1692964333,"creation_date":1692449222,"question_id":76935177,"body_markdown":"I&#39;m trying to make a simple multiplayer game in Greenfoot for a school project.\r\n\r\nIf I remove `updatePosition();` in the player script, the server can move and the client gets the data. However, when I try to get the data from the client and call `updatePosition();` in the player script, it stops when the server tries to call `receiveInt()`. The terminal of the server side shows &quot;Works Server&quot; &quot;2&quot; &quot;Works Server&quot; &quot;2&quot; and then the program stops on the client and server.\r\n\r\n**&quot;GameManager&quot;:**\r\n\r\n```\r\nimport greenfoot.*;\r\nimport java.io.*;\r\nimport java.net.*;\r\n\r\nimport javax.swing.JOptionPane;\r\nimport java.util.ArrayList;\r\n\r\npublic class MyWorld extends World\r\n{\r\n    public Server server;\r\n    public Client client;\r\n    public boolean Server = false;\r\n\r\n    /**\r\n     * Constructor for objects of class MyWorld.\r\n     * \r\n     */\r\n    public MyWorld()\r\n    {    \r\n        super(600, 400, 1);\r\n        Player player = new Player(this);\r\n        addObject(player, getWidth()/2, getHeight()/2);\r\n    }\r\n\r\n    public void act()\r\n    {\r\n        if(Greenfoot.isKeyDown(&quot;q&quot;))\r\n        {\r\n            if(Server)\r\n            {\r\n                server.close();\r\n            }else\r\n            {\r\n                client.close();\r\n            }\r\n        }\r\n    }\r\n\r\n    public void init()\r\n    {\r\n        Object[] options = {&quot;Server&quot;,&quot;Client&quot;};\r\n        int i = JOptionPane.showOptionDialog(null, &quot;Host as server or join as client?&quot;, &quot;Selection&quot;, JOptionPane.DEFAULT_OPTION, JOptionPane.INFORMATION_MESSAGE, null, options, options[0]);\r\n        if(i == 0)\r\n        {\r\n            server = new Server(this);\r\n            Server = true;\r\n\r\n            Player2 player2 = new Player2();\r\n            addObject(player2, 0, 0);\r\n        }else if(i == 1)\r\n        {\r\n            client = new Client(this);\r\n            \r\n            Player2 player2 = new Player2();\r\n            addObject(player2, 0, 0);\r\n        }\r\n    }\r\n\r\n    public class Server\r\n    {\r\n        MyWorld myWorld;\r\n        public ServerSocket serverSocket;\r\n        public Socket skt;\r\n        private ObjectInputStream inServer;\r\n        private ObjectOutputStream outServer;\r\n        public Server(MyWorld myWorl)\r\n        {\r\n            this.myWorld = myWorl;\r\n            try\r\n            {\r\n                serverSocket = new ServerSocket(8888);\r\n                skt = serverSocket.accept();\r\n                inServer = new ObjectInputStream(skt.getInputStream());\r\n                outServer = new ObjectOutputStream(skt.getOutputStream());\r\n            }catch(IOException e)\r\n            {\r\n                close();\r\n            }\r\n        }\r\n\r\n        public void sendInts(int ...arr) {\r\n            try {\r\n                outServer.writeObject(arr);\r\n                Greenfoot.delay(1);\r\n                outServer.flush();\r\n            }\r\n            catch(NullPointerException ex) {\r\n            }\r\n            catch(IOException ex) {\r\n            }\r\n        }\r\n\r\n        public int[] receiveInts() {\r\n            int[] datServer = null;\r\n            try {\r\n                datServer = (int[])inServer.readObject();\r\n            }\r\n            catch(ClassNotFoundException ex) {\r\n                ex.printStackTrace();\r\n                close();\r\n            }\r\n            catch(NullPointerException ex) {\r\n                close();\r\n            }\r\n            catch(IOException ex) {\r\n                close();\r\n            }\r\n            return datServer;\r\n        }\r\n\r\n        public void close()\r\n        {\r\n            try {\r\n                outServer.close();\r\n                inServer.close();\r\n                skt.close();\r\n                serverSocket.close();\r\n            }\r\n            catch(IOException ex) {\r\n                throw new RuntimeException(&quot;Error closing streams...&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\n    public class Client\r\n    {\r\n        MyWorld myWorld;\r\n        private ObjectOutputStream outClient;\r\n        private ObjectInputStream inClient;\r\n        public Socket clientSocket;\r\n        public Client(MyWorld myWorl)\r\n        {\r\n            this.myWorld = myWorl;\r\n            try\r\n            {\r\n                clientSocket = new Socket(&quot;localhost&quot;,8888);\r\n                outClient = new ObjectOutputStream(clientSocket.getOutputStream());\r\n                inClient = new ObjectInputStream(clientSocket.getInputStream());\r\n            }catch(IOException e)\r\n            {\r\n                close();\r\n            }   \r\n        }\r\n\r\n        public void sendInts(int ...arr) {\r\n            try {\r\n                outClient.writeObject(arr);\r\n                Greenfoot.delay(1);\r\n                outClient.flush();\r\n            }\r\n            catch(NullPointerException ex) {\r\n            }\r\n            catch(IOException ex) {\r\n            }\r\n        }\r\n\r\n        public int[] receiveInts() {\r\n            int[] datClient = null;\r\n            try {\r\n                datClient = (int[])inClient.readObject();\r\n            }\r\n            catch(ClassNotFoundException ex) {\r\n                ex.printStackTrace();\r\n            }\r\n            catch(NullPointerException ex) {\r\n            }\r\n            catch(IOException ex) {\r\n                close();\r\n            }\r\n            return datClient;\r\n        }\r\n\r\n        public void close()\r\n        {\r\n            try {\r\n                outClient.close();\r\n                inClient.close();\r\n                clientSocket.close();\r\n            }\r\n            catch(IOException ex) {\r\n                throw new RuntimeException(&quot;Error closing streams...&quot;);\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n**Player:**\r\n\r\n```\r\nimport greenfoot.*;\r\n\r\npublic class Player extends Actor\r\n{\r\n    private MyWorld myWorld;\r\n    private Player2 player2;\r\n\r\n    public Player(MyWorld myWorl)\r\n    {\r\n        myWorld = myWorl;\r\n    }\r\n\r\n    private boolean startSelectionBool = false;\r\n\r\n    public void act() \r\n    {\r\n        if(!startSelectionBool)\r\n        {\r\n            if(Greenfoot.getMouseInfo() != null)\r\n            {\r\n                if(Greenfoot.mouseClicked(this))\r\n                {\r\n                    myWorld.init();\r\n                    startSelectionBool = true;\r\n                }\r\n            }\r\n        }\r\n        else\r\n        {\r\n            if(myWorld.Server == true)\r\n            {\r\n                updateServer();\r\n                //System.out.println(&quot;Server&quot;);\r\n            }else\r\n            {\r\n                updateClient();\r\n                //System.out.println(&quot;Client&quot;);\r\n            }\r\n        }\r\n    }   \r\n\r\n    public void updateServer()\r\n    {\r\n        if(Greenfoot.isKeyDown(&quot;w&quot;))\r\n        {\r\n            setLocation(this.getX(), this.getY()-1);\r\n        }\r\n        if(Greenfoot.isKeyDown(&quot;s&quot;))\r\n        {\r\n            setLocation(this.getX(), this.getY()+1);\r\n        }\r\n        if(Greenfoot.isKeyDown(&quot;a&quot;))\r\n        {\r\n            setLocation(this.getX()-1, this.getY());\r\n        }\r\n        if(Greenfoot.isKeyDown(&quot;d&quot;))\r\n        {\r\n            setLocation(this.getX()+1, this.getY());\r\n        }\r\n        myWorld.server.sendInts(this.getX(), this.getY());\r\n\r\n        updatePosition();\r\n    }\r\n\r\n    public void updatePosition()\r\n    {\r\n        int[] w1 = myWorld.server.receiveInts();\r\n        \r\n        if (w1 != null)\r\n        {\r\n            Greenfoot.delay(5);\r\n            player2 = getWorld().getObjects(Player2.class).get(0);\r\n\r\n            System.out.println(&quot;Works Server&quot;);\r\n            player2.setLocation(w1[0], w1[1]);\r\n            System.out.println(&quot;2&quot;);\r\n        }\r\n        else\r\n        {\r\n            System.out.println(&quot;1&quot;);\r\n        }\r\n    }\r\n\r\n    public void updateClient()\r\n    {\r\n        if(Greenfoot.isKeyDown(&quot;w&quot;))\r\n        {\r\n            setLocation(this.getX(), this.getY()-1);\r\n        }\r\n        if(Greenfoot.isKeyDown(&quot;s&quot;))\r\n        {\r\n            setLocation(this.getX(), this.getY()+1);\r\n        }\r\n        if(Greenfoot.isKeyDown(&quot;a&quot;))\r\n        {\r\n            setLocation(this.getX()-1, this.getY());\r\n        }\r\n        if(Greenfoot.isKeyDown(&quot;d&quot;))\r\n        {\r\n            setLocation(this.getX()+1, this.getY());\r\n        }\r\n        myWorld.client.sendInts(this.getX(), this.getY());\r\n\r\n        int[] w2 = myWorld.client.receiveInts();\r\n        \r\n        if (w2 == null)\r\n        {\r\n            System.out.println(&quot;Return Client&quot;);\r\n            return;\r\n        }\r\n        else\r\n        {\r\n            player2 = getWorld().getObjects(Player2.class).get(0);\r\n\r\n            player2.setLocation(w2[0], w2[1]);\r\n        }\r\n    }\r\n}\r\n```","title":"Program stop when server try to receive client data","body":"<p>I'm trying to make a simple multiplayer game in Greenfoot for a school project.</p>\n<p>If I remove <code>updatePosition();</code> in the player script, the server can move and the client gets the data. However, when I try to get the data from the client and call <code>updatePosition();</code> in the player script, it stops when the server tries to call <code>receiveInt()</code>. The terminal of the server side shows &quot;Works Server&quot; &quot;2&quot; &quot;Works Server&quot; &quot;2&quot; and then the program stops on the client and server.</p>\n<p><strong>&quot;GameManager&quot;:</strong></p>\n<pre><code>import greenfoot.*;\nimport java.io.*;\nimport java.net.*;\n\nimport javax.swing.JOptionPane;\nimport java.util.ArrayList;\n\npublic class MyWorld extends World\n{\n    public Server server;\n    public Client client;\n    public boolean Server = false;\n\n    /**\n     * Constructor for objects of class MyWorld.\n     * \n     */\n    public MyWorld()\n    {    \n        super(600, 400, 1);\n        Player player = new Player(this);\n        addObject(player, getWidth()/2, getHeight()/2);\n    }\n\n    public void act()\n    {\n        if(Greenfoot.isKeyDown(&quot;q&quot;))\n        {\n            if(Server)\n            {\n                server.close();\n            }else\n            {\n                client.close();\n            }\n        }\n    }\n\n    public void init()\n    {\n        Object[] options = {&quot;Server&quot;,&quot;Client&quot;};\n        int i = JOptionPane.showOptionDialog(null, &quot;Host as server or join as client?&quot;, &quot;Selection&quot;, JOptionPane.DEFAULT_OPTION, JOptionPane.INFORMATION_MESSAGE, null, options, options[0]);\n        if(i == 0)\n        {\n            server = new Server(this);\n            Server = true;\n\n            Player2 player2 = new Player2();\n            addObject(player2, 0, 0);\n        }else if(i == 1)\n        {\n            client = new Client(this);\n            \n            Player2 player2 = new Player2();\n            addObject(player2, 0, 0);\n        }\n    }\n\n    public class Server\n    {\n        MyWorld myWorld;\n        public ServerSocket serverSocket;\n        public Socket skt;\n        private ObjectInputStream inServer;\n        private ObjectOutputStream outServer;\n        public Server(MyWorld myWorl)\n        {\n            this.myWorld = myWorl;\n            try\n            {\n                serverSocket = new ServerSocket(8888);\n                skt = serverSocket.accept();\n                inServer = new ObjectInputStream(skt.getInputStream());\n                outServer = new ObjectOutputStream(skt.getOutputStream());\n            }catch(IOException e)\n            {\n                close();\n            }\n        }\n\n        public void sendInts(int ...arr) {\n            try {\n                outServer.writeObject(arr);\n                Greenfoot.delay(1);\n                outServer.flush();\n            }\n            catch(NullPointerException ex) {\n            }\n            catch(IOException ex) {\n            }\n        }\n\n        public int[] receiveInts() {\n            int[] datServer = null;\n            try {\n                datServer = (int[])inServer.readObject();\n            }\n            catch(ClassNotFoundException ex) {\n                ex.printStackTrace();\n                close();\n            }\n            catch(NullPointerException ex) {\n                close();\n            }\n            catch(IOException ex) {\n                close();\n            }\n            return datServer;\n        }\n\n        public void close()\n        {\n            try {\n                outServer.close();\n                inServer.close();\n                skt.close();\n                serverSocket.close();\n            }\n            catch(IOException ex) {\n                throw new RuntimeException(&quot;Error closing streams...&quot;);\n            }\n        }\n    }\n\n    public class Client\n    {\n        MyWorld myWorld;\n        private ObjectOutputStream outClient;\n        private ObjectInputStream inClient;\n        public Socket clientSocket;\n        public Client(MyWorld myWorl)\n        {\n            this.myWorld = myWorl;\n            try\n            {\n                clientSocket = new Socket(&quot;localhost&quot;,8888);\n                outClient = new ObjectOutputStream(clientSocket.getOutputStream());\n                inClient = new ObjectInputStream(clientSocket.getInputStream());\n            }catch(IOException e)\n            {\n                close();\n            }   \n        }\n\n        public void sendInts(int ...arr) {\n            try {\n                outClient.writeObject(arr);\n                Greenfoot.delay(1);\n                outClient.flush();\n            }\n            catch(NullPointerException ex) {\n            }\n            catch(IOException ex) {\n            }\n        }\n\n        public int[] receiveInts() {\n            int[] datClient = null;\n            try {\n                datClient = (int[])inClient.readObject();\n            }\n            catch(ClassNotFoundException ex) {\n                ex.printStackTrace();\n            }\n            catch(NullPointerException ex) {\n            }\n            catch(IOException ex) {\n                close();\n            }\n            return datClient;\n        }\n\n        public void close()\n        {\n            try {\n                outClient.close();\n                inClient.close();\n                clientSocket.close();\n            }\n            catch(IOException ex) {\n                throw new RuntimeException(&quot;Error closing streams...&quot;);\n            }\n        }\n    }\n}\n</code></pre>\n<p><strong>Player:</strong></p>\n<pre><code>import greenfoot.*;\n\npublic class Player extends Actor\n{\n    private MyWorld myWorld;\n    private Player2 player2;\n\n    public Player(MyWorld myWorl)\n    {\n        myWorld = myWorl;\n    }\n\n    private boolean startSelectionBool = false;\n\n    public void act() \n    {\n        if(!startSelectionBool)\n        {\n            if(Greenfoot.getMouseInfo() != null)\n            {\n                if(Greenfoot.mouseClicked(this))\n                {\n                    myWorld.init();\n                    startSelectionBool = true;\n                }\n            }\n        }\n        else\n        {\n            if(myWorld.Server == true)\n            {\n                updateServer();\n                //System.out.println(&quot;Server&quot;);\n            }else\n            {\n                updateClient();\n                //System.out.println(&quot;Client&quot;);\n            }\n        }\n    }   \n\n    public void updateServer()\n    {\n        if(Greenfoot.isKeyDown(&quot;w&quot;))\n        {\n            setLocation(this.getX(), this.getY()-1);\n        }\n        if(Greenfoot.isKeyDown(&quot;s&quot;))\n        {\n            setLocation(this.getX(), this.getY()+1);\n        }\n        if(Greenfoot.isKeyDown(&quot;a&quot;))\n        {\n            setLocation(this.getX()-1, this.getY());\n        }\n        if(Greenfoot.isKeyDown(&quot;d&quot;))\n        {\n            setLocation(this.getX()+1, this.getY());\n        }\n        myWorld.server.sendInts(this.getX(), this.getY());\n\n        updatePosition();\n    }\n\n    public void updatePosition()\n    {\n        int[] w1 = myWorld.server.receiveInts();\n        \n        if (w1 != null)\n        {\n            Greenfoot.delay(5);\n            player2 = getWorld().getObjects(Player2.class).get(0);\n\n            System.out.println(&quot;Works Server&quot;);\n            player2.setLocation(w1[0], w1[1]);\n            System.out.println(&quot;2&quot;);\n        }\n        else\n        {\n            System.out.println(&quot;1&quot;);\n        }\n    }\n\n    public void updateClient()\n    {\n        if(Greenfoot.isKeyDown(&quot;w&quot;))\n        {\n            setLocation(this.getX(), this.getY()-1);\n        }\n        if(Greenfoot.isKeyDown(&quot;s&quot;))\n        {\n            setLocation(this.getX(), this.getY()+1);\n        }\n        if(Greenfoot.isKeyDown(&quot;a&quot;))\n        {\n            setLocation(this.getX()-1, this.getY());\n        }\n        if(Greenfoot.isKeyDown(&quot;d&quot;))\n        {\n            setLocation(this.getX()+1, this.getY());\n        }\n        myWorld.client.sendInts(this.getX(), this.getY());\n\n        int[] w2 = myWorld.client.receiveInts();\n        \n        if (w2 == null)\n        {\n            System.out.println(&quot;Return Client&quot;);\n            return;\n        }\n        else\n        {\n            player2 = getWorld().getObjects(Player2.class).get(0);\n\n            player2.setLocation(w2[0], w2[1]);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","redis"],"comments":[{"owner":{"account_id":14870040,"reputation":500,"user_id":10737796,"display_name":"A. Guy"},"score":0,"creation_date":1692896261,"post_id":76969641,"comment_id":135689803,"body_markdown":"I’m not too familiar with Jedis, but I know for sure that it is possible to use cursors and sorter together, and it should work as expected (sort by something, limit 0 100, cursor count 10 will give you 10 results at first, and then 10 on every read until you got all 100)","body":"I’m not too familiar with Jedis, but I know for sure that it is possible to use cursors and sorter together, and it should work as expected (sort by something, limit 0 100, cursor count 10 will give you 10 results at first, and then 10 on every read until you got all 100)"},{"owner":{"account_id":4829511,"reputation":5855,"user_id":4021802,"display_name":"sazzad"},"score":0,"creation_date":1692900120,"post_id":76969641,"comment_id":135690597,"body_markdown":"1) How many total results do you have for the ft.aggregate query? 2) How you certain that everything is working fine if you just remove the sortby?","body":"1) How many total results do you have for the ft.aggregate query? 2) How you certain that everything is working fine if you just remove the sortby?"}],"answers":[{"tags":[],"owner":{"account_id":14870040,"reputation":500,"user_id":10737796,"display_name":"A. Guy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692964103,"creation_date":1692896481,"answer_id":76971516,"question_id":76969641,"body_markdown":"It seem to me that you simply deplete your query on the first iteration.\r\n\r\nTry giving a smaller read count to the cursor. The default sort limit is 10 and can be larger, but it represents the **total number of results** your query will yield.\r\n\r\nThe cursor should get the number of results to give on every read, and if you give it the number of results you limited the query to, you will get them all on the first call.\r\n\r\nFrom Jedis code:\r\n```java\r\n  public AggregationBuilder cursor(int count) {\r\n    isWithCursor = true;\r\n    aggrArgs.add(SearchKeyword.WITHCURSOR);\r\n    aggrArgs.add(SearchKeyword.COUNT);\r\n    aggrArgs.add(count);\r\n    return this;\r\n  }\r\n\r\n  public AggregationBuilder cursor(int count, long maxIdle) {\r\n    isWithCursor = true;\r\n    aggrArgs.add(SearchKeyword.WITHCURSOR);\r\n    aggrArgs.add(SearchKeyword.COUNT);\r\n    aggrArgs.add(count);\r\n    aggrArgs.add(SearchKeyword.MAXIDLE);\r\n    aggrArgs.add(maxIdle);\r\n    return this;\r\n  }\r\n```\r\n\r\nSeems like a cursor gets either the chunk size, or the chunk size and an expatriation limit (like other keys in redis).\r\n\r\nYou need to define your query limit.\r\nTry something like this:\r\n```Java\r\npublic void fetchData() {\r\n   var chuckSize = 1000;\r\n   var queryLimit = chunkSize * 10;\r\n   var result = jedis.ftAggregate(&quot;myIndex&quot;, new AggregationBuilder(&quot;*&quot;)\r\n                     .loadAll()\r\n                     .sortBy(&quot;myField&quot;)\r\n                     .limit(queryLimit)\r\n                     .cursor(chuckSize));\r\n   var cursor = new AtomicLong(result.getCursorId());\r\n   while(true) {\r\n       try {\r\n         //process result\r\n         result = jedis.ftCursorRead(&quot;myIndex&quot;,cursor.get(), chunckSize);\r\n         cursor.set(result.getCursorId());\r\n       } catch(JedisDataException e) {\r\n         //data read end\r\n         break;\r\n       }\r\n}\r\n```","title":"Redis FTAggregate with SORT BY doesnt work with Cursor","body":"<p>It seem to me that you simply deplete your query on the first iteration.</p>\n<p>Try giving a smaller read count to the cursor. The default sort limit is 10 and can be larger, but it represents the <strong>total number of results</strong> your query will yield.</p>\n<p>The cursor should get the number of results to give on every read, and if you give it the number of results you limited the query to, you will get them all on the first call.</p>\n<p>From Jedis code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  public AggregationBuilder cursor(int count) {\n    isWithCursor = true;\n    aggrArgs.add(SearchKeyword.WITHCURSOR);\n    aggrArgs.add(SearchKeyword.COUNT);\n    aggrArgs.add(count);\n    return this;\n  }\n\n  public AggregationBuilder cursor(int count, long maxIdle) {\n    isWithCursor = true;\n    aggrArgs.add(SearchKeyword.WITHCURSOR);\n    aggrArgs.add(SearchKeyword.COUNT);\n    aggrArgs.add(count);\n    aggrArgs.add(SearchKeyword.MAXIDLE);\n    aggrArgs.add(maxIdle);\n    return this;\n  }\n</code></pre>\n<p>Seems like a cursor gets either the chunk size, or the chunk size and an expatriation limit (like other keys in redis).</p>\n<p>You need to define your query limit.\nTry something like this:</p>\n<pre><code>public void fetchData() {\n   var chuckSize = 1000;\n   var queryLimit = chunkSize * 10;\n   var result = jedis.ftAggregate(&quot;myIndex&quot;, new AggregationBuilder(&quot;*&quot;)\n                     .loadAll()\n                     .sortBy(&quot;myField&quot;)\n                     .limit(queryLimit)\n                     .cursor(chuckSize));\n   var cursor = new AtomicLong(result.getCursorId());\n   while(true) {\n       try {\n         //process result\n         result = jedis.ftCursorRead(&quot;myIndex&quot;,cursor.get(), chunckSize);\n         cursor.set(result.getCursorId());\n       } catch(JedisDataException e) {\n         //data read end\n         break;\n       }\n}\n</code></pre>\n"}],"owner":{"account_id":13527984,"reputation":53,"user_id":9759267,"display_name":"Vlad"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692964103,"creation_date":1692882718,"question_id":76969641,"body_markdown":"I am trying to process some data in batches using FTAggregate in Java. If I use sortBy I get results only on the ft.aggregate call and no results on subsequent cursor reads. My sort field is indexed as NUMERIC and SORTABLE. Am I doing something wrong or is it desired behaviour? Because I couldn&#39;t find any info on CURSOR and SORT BY interaction on Redis doc. Everything works fine if i remove the sortBy(). If I let only the sortBy() without limit() I get only 10 results and no subsequent ones because default limit for sort by is 10 if not specified otherwise. So my question is, can sortBy can work with CURSOR or should I use LIMIT with offset for paginating even if it would mean nuking the performance?\r\n\r\n    public void fetchData() {\r\n       var chuckSize = 1000;\r\n       var result = jedis.ftAggregate(&quot;myIndex&quot;, new AggregationBuilder(&quot;*&quot;)\r\n                         .loadAll()\r\n                         .sortBy(&quot;myField&quot;)\r\n                         .limit(chuckSize)\r\n                         .cursor(chuckSize, 1000));\r\n       var cursor = new AtomicLong(result.getCursorId());\r\n       while(true) {\r\n           try {\r\n             //process result\r\n             result = jedis.ftCursorRead(&quot;myIndex&quot;,cursor.get(), chunckSize);\r\n             cursor.set(result.getCursorId());\r\n           } catch(JedisDataException e) {\r\n             //data read end\r\n             break;\r\n           }\r\n    }","title":"Redis FTAggregate with SORT BY doesnt work with Cursor","body":"<p>I am trying to process some data in batches using FTAggregate in Java. If I use sortBy I get results only on the ft.aggregate call and no results on subsequent cursor reads. My sort field is indexed as NUMERIC and SORTABLE. Am I doing something wrong or is it desired behaviour? Because I couldn't find any info on CURSOR and SORT BY interaction on Redis doc. Everything works fine if i remove the sortBy(). If I let only the sortBy() without limit() I get only 10 results and no subsequent ones because default limit for sort by is 10 if not specified otherwise. So my question is, can sortBy can work with CURSOR or should I use LIMIT with offset for paginating even if it would mean nuking the performance?</p>\n<pre><code>public void fetchData() {\n   var chuckSize = 1000;\n   var result = jedis.ftAggregate(&quot;myIndex&quot;, new AggregationBuilder(&quot;*&quot;)\n                     .loadAll()\n                     .sortBy(&quot;myField&quot;)\n                     .limit(chuckSize)\n                     .cursor(chuckSize, 1000));\n   var cursor = new AtomicLong(result.getCursorId());\n   while(true) {\n       try {\n         //process result\n         result = jedis.ftCursorRead(&quot;myIndex&quot;,cursor.get(), chunckSize);\n         cursor.set(result.getCursorId());\n       } catch(JedisDataException e) {\n         //data read end\n         break;\n       }\n}\n</code></pre>\n"},{"tags":["java","android","android-custom-view"],"owner":{"account_id":21832269,"reputation":1,"user_id":16127074,"display_name":"Amir Rehail"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692963963,"creation_date":1692963963,"question_id":76976900,"body_markdown":"I am working on my custom **bottomNavigationBar** by extending the view class , everything is working very well, i made a method to get the selected item from my customView ,but when i try to get in in my MainActivity it doesn&#39;t work.\r\n\r\nThis is my BottomNavBar class :\r\n\r\n```\r\npublic class BottomNavBar extends View\r\n{\r\n\tprivate RectF outerRect;\r\n\tprivate Rect[] items;\r\n\tprivate Paint outerPaint,shadowPaint,itemPaint,itemClickedPaint,itemCutPaint;\r\n\tprivate Path outerPath;\r\n\tprivate int width,height;\r\n\tprivate float[] outerRadii={50,50,50,50,50,50,50,50},circle={60,60,60,60,60,60,60,60};\r\n\tprivate Drawable[] icon;\r\n\tprivate ArrayList&lt;Integer&gt; iconsList;\r\n\tprivate int outerShapeColor,itemCircleColor;\r\n\tprivate int itemClickedCount=0;\r\n\tprivate long pressStartTime,pressDuration;\r\n\tprivate int clickXpos,clickYpos;\r\n\tpublic boolean itemClicked,click,longPress;\r\n\tprivate bottomBarSet set;\r\n\tpublic BottomNavBar (Context context) {super(context);}\r\n\tpublic BottomNavBar(Context context , AttributeSet attr) {super(context, attr);}\r\n\r\n\t@Override\r\n\tprotected void onDraw(Canvas canvas)\r\n\t{\r\n\t\tthis.getLayoutParams().width=getWidth();\r\n\t\tthis.getLayoutParams().height=120;\r\n\t\tthis.setLayoutParams(this.getLayoutParams());\r\n\t\tint xPos=getLeft()+50;\r\n\t\tint yPos=getHeight() -110;\r\n\t\twidth=getMeasuredWidth()-50;\r\n\t\theight=100;\r\n\t\tdrawOuterShape(canvas,xPos,yPos,width,height);\r\n\t\tdrawItems(canvas,xPos,yPos);\r\n\t\tsuper.onDraw(canvas);\r\n\t}\r\n\r\n\tprivate void drawOuterShape(Canvas canvas, float xPos,float yPos, float width ,float height)\r\n\t{\r\n\t\touterRect =new RectF(xPos,yPos,width,height);\r\n\t\tshadowPaint=new Paint();\r\n\t\tshadowPaint.setAntiAlias(true);\r\n\t\tshadowPaint.setMaskFilter(new BlurMaskFilter(15,BlurMaskFilter.Blur.NORMAL));\r\n\t\tshadowPaint.setColor(Color.parseColor(&quot;#181818&quot;));\r\n\t\tshadowPaint.setAlpha(80);\r\n\t\t\r\n\t\tif (android.os.Build.VERSION.SDK_INT &gt;= 11) {\r\n\t\t\tsetLayerType(View.LAYER_TYPE_SOFTWARE, null);\r\n\t\t}\r\n\t\touterPaint=new Paint();\r\n\t\touterPaint.setAntiAlias(true);\r\n\t\touterPaint.setStyle(Paint.Style.FILL);\r\n\t\touterPaint.setColor(outerShapeColor);\r\n\r\n\t\touterPath =new Path();\r\n\t\touterPath.addRoundRect(xPos-5,yPos+10,width+5,height+10,outerRadii,Path.Direction.CW);\r\n\t\tcanvas.drawPath(outerPath,shadowPaint);\r\n\t\touterPath.reset();\r\n\t\touterPath.addRoundRect(outerRect,outerRadii,Path.Direction.CW);\r\n\t\tcanvas.drawPath(outerPath,outerPaint);\r\n\t}\r\n\r\n\tprivate void drawItems(Canvas canvas,int Xpos,int Ypos)\r\n\t{\r\n//init paint \r\n\t\titemPaint =new Paint();\r\n\t\titemPaint.setAntiAlias(true);\r\n\t\titemPaint.setStyle(Paint.Style.FILL);\r\n\t\titemPaint.setColor(Color.TRANSPARENT);\r\n\t\titems=new Rect[4];\r\n\r\n\t\t\r\n\t\tint itemWidth=(width-50)/items.length;\r\n\t\tfor(int i=0;i&lt;items.length;i++){\r\n\t\t\tint startLeft=Xpos;\r\n\t\t\tint itemLeft =startLeft +(i*itemWidth);\r\n\t\t\tint itemTop = Ypos;\r\n\t\t\tint itemRight=startLeft+((i+1)*itemWidth);\r\n\t\t\tint itemBottom=height;\r\n\r\n\t\t\titems[i] =new Rect(itemLeft,itemTop,itemRight,itemBottom);\r\n\t\t\tPath path=new Path();\r\n\t\t\t//draw item\r\n\t\t\t\r\n\t\t\tRectF[] rect=new RectF[4];\r\n\t\t\trect[i] =new RectF();\r\n\t\t\trect[i].set(items[i]);\r\n\r\n\t\t\tpath.addRoundRect(rect[i],circle,Path.Direction.CW);\r\n\t\t\tcanvas.drawPath(path,itemPaint);\r\n\t\t\t//draw clicked item\r\n\t\t\tif(i==itemClickedCount){\r\n\t\t\t\titemClickedPaint=new Paint(Paint.ANTI_ALIAS_FLAG);\r\n\t\t\t\titemClickedPaint.setStyle(Paint.Style.FILL);\r\n\t\t\t\titemClickedPaint.setColor(itemCircleColor);\r\n\t\t\t\tpath.reset();\r\n\t\t\t\r\n\t\t\t\tpath.addRoundRect(itemLeft-5,itemTop-5,itemRight+5,itemBottom+5,circle,Path.Direction.CW);\r\n\t\t\t\tcanvas.drawPath(path,itemClickedPaint);\r\n\t\t\t\titemCutPaint=new Paint();\r\n\t\t\t\titemCutPaint.setAntiAlias(true);\r\n\t\t\t\titemCutPaint.setAlpha(0);\r\n\t\t\t\titemCutPaint.setColor(0xFFFFFF);\r\n\t\t\t\titemCutPaint.setColor(Color.TRANSPARENT);\r\n\t\t\t\titemCutPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));\r\n\t\t\t\t\r\n\t\t\t\tpath.reset();\r\n\t\t\t\t//path.addCircle(items[i].centerX(),items[i].centerY(),35,Path.Direction.CW);\r\n\t\t\t\tpath.addRoundRect(itemLeft+10,itemTop+10,itemRight-10,itemBottom-10,circle,Path.Direction.CW);\r\n\t\t\t\tcanvas.drawPath(path,itemCutPaint);\r\n\t\t\t\t\r\n\t\t\t\t//Toast.makeText(getContext(),&quot;Count: &quot;+ i,Toast.LENGTH_SHORT).show();\r\n\t\t\t}\r\n\t\t\t//check click item\r\n\t\t\tif(items[i].contains(clickXpos,clickYpos)) {\r\n\t\t\t\titemClicked=true;\r\n\t\t\t\tfinal Handler handler = new Handler();\r\n\t\t\t\thandler.postDelayed(new Runnable() {\r\n\t\t\t\t\t\t@Override\r\n\t\t\t\t\t\tpublic void run() {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\titemClicked=false;\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, 5);\r\n\r\n\t\t\t} else {itemClicked=false;}\r\n\r\n\t\t\tif(itemClicked==true){\r\n\t\t\t\t\r\n\t\t\t\titemClickedCount=i;\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\r\n\r\n\t\t\t//draw icon\r\n\r\n\t\t\ticon=new Drawable[4];\r\n\t\t\ticon[i]=getContext().getResources().getDrawable(iconsList.get(i));\r\n\t\t\tif(icon[i]!=null){\r\n\t\t\t\t\r\n\t\t\t\ticon[i].setBounds(items[i].centerX()-30,items[i].centerY()-30,items[i].centerX() +30,items[i].centerY()+30);\r\n\t\t\t\ticon[i].draw(canvas);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\t\r\n\t\t\t\ticon[i]=getResources().getDrawable(R.drawable.ic_delete);\r\n\t\t\t\ticon[i].setBounds(items[i].centerX()-30,items[i].centerY()-30,items[i].centerX() +30,items[i].centerY()+30);\r\n\r\n\t\t\t\ticon[i].draw(canvas);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\r\n\t@Override\r\n\tpublic boolean onTouchEvent(MotionEvent event)\r\n\t{\r\n\t\tswitch(event.getAction()){\r\n\t\t\tcase MotionEvent.ACTION_DOWN:\r\n\t\t\t\tpressStartTime=System.currentTimeMillis();\r\n\t\t\t\tclickXpos=(int)event.getX();\r\n\t\t\t\tclickYpos=(int)event.getY();\r\n\r\n\t\t\t\treturn true;\r\n\t\t\tcase MotionEvent.ACTION_UP:\r\n\t\t\t\tpressDuration=System.currentTimeMillis()-pressStartTime;\r\n\t\t\t\tif(pressDuration&lt;500 &amp;&amp; distance(clickXpos,clickYpos,event.getX(),event.getY())&lt;15){\r\n\t\t\t\t\t// duration less than half second and distance less than 15 PXs\r\n\t\t\t\t\tclick=true;\r\n\t\t\t\t\tlongPress=false;\r\n\t\t\t\t\t\r\n\t\t\t\t\t//clicked\r\n\t\t\t\t}\r\n\t\t\t\tif(pressDuration&gt;=1000 &amp;&amp; distance(clickXpos,clickYpos,event.getX(),event.getY())&lt;15){\r\n\t\t\t\t\t// duration greater than 1 second and distance less than 15 PXs\r\n\t\t\t\t\tclick=false;\r\n\t\t\t\t\tlongPress=true;\r\n\t\t\t\t\t\r\n\t\t\t\t\t//long press\r\n\t\t\t\t}\r\n\r\n\t\t\t\tinvalidate();\r\n\t\t\t\treturn true;\r\n\t\t\tdefault :\r\n\t\t\t\treturn super.onTouchEvent(event);\r\n\r\n\r\n\r\n\t\t}\r\n\r\n\t\t// TODO: Implement this method\r\n\t}\r\n\r\n\tprivate static float distance(float x1,float y1,float x2,float y2)\r\n\t{\r\n\t\tfloat dx = x1 - x2;\r\n\t\tfloat dy = y1 - y2;\r\n\t\tfloat distanceInPx = (float) Math.sqrt(dx * dx + dy * dy);\r\n\t\treturn distanceInPx;\r\n\t}\r\n\t\r\n\t\r\n\t//Setters\r\n\t\r\n\tpublic void setOuterShapeColor(int color){\r\n\t\tthis.outerShapeColor=color;\r\n\t}\r\n\tpublic void setItemCircleColor(int color){\r\n\t\tthis.itemCircleColor=color;\r\n\t}\r\n\tpublic void setIcons(ArrayList&lt;Integer&gt; icons){\r\n\t\tthis.iconsList=icons;\r\n\t}\r\n\r\n\t//Getters\r\n\t\r\n\tpublic int getSelectedItem(){\r\n\t\treturn itemClickedCount;\r\n\t}\r\n\tpublic boolean isClicked(){\r\n\t\treturn itemClicked;\r\n\t}\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\r\n\r\n}\r\n```\r\nWhen i add a Toast inside DrawItem() shows the selected item count successfully.\r\nI tried to do a Listener for items and it didn&#39;t work too\r\nPlease help me guys and thanks .\r\n","title":"how to get selected item from a custom bottomNavBar in android","body":"<p>I am working on my custom <strong>bottomNavigationBar</strong> by extending the view class , everything is working very well, i made a method to get the selected item from my customView ,but when i try to get in in my MainActivity it doesn't work.</p>\n<p>This is my BottomNavBar class :</p>\n<pre><code>public class BottomNavBar extends View\n{\n    private RectF outerRect;\n    private Rect[] items;\n    private Paint outerPaint,shadowPaint,itemPaint,itemClickedPaint,itemCutPaint;\n    private Path outerPath;\n    private int width,height;\n    private float[] outerRadii={50,50,50,50,50,50,50,50},circle={60,60,60,60,60,60,60,60};\n    private Drawable[] icon;\n    private ArrayList&lt;Integer&gt; iconsList;\n    private int outerShapeColor,itemCircleColor;\n    private int itemClickedCount=0;\n    private long pressStartTime,pressDuration;\n    private int clickXpos,clickYpos;\n    public boolean itemClicked,click,longPress;\n    private bottomBarSet set;\n    public BottomNavBar (Context context) {super(context);}\n    public BottomNavBar(Context context , AttributeSet attr) {super(context, attr);}\n\n    @Override\n    protected void onDraw(Canvas canvas)\n    {\n        this.getLayoutParams().width=getWidth();\n        this.getLayoutParams().height=120;\n        this.setLayoutParams(this.getLayoutParams());\n        int xPos=getLeft()+50;\n        int yPos=getHeight() -110;\n        width=getMeasuredWidth()-50;\n        height=100;\n        drawOuterShape(canvas,xPos,yPos,width,height);\n        drawItems(canvas,xPos,yPos);\n        super.onDraw(canvas);\n    }\n\n    private void drawOuterShape(Canvas canvas, float xPos,float yPos, float width ,float height)\n    {\n        outerRect =new RectF(xPos,yPos,width,height);\n        shadowPaint=new Paint();\n        shadowPaint.setAntiAlias(true);\n        shadowPaint.setMaskFilter(new BlurMaskFilter(15,BlurMaskFilter.Blur.NORMAL));\n        shadowPaint.setColor(Color.parseColor(&quot;#181818&quot;));\n        shadowPaint.setAlpha(80);\n        \n        if (android.os.Build.VERSION.SDK_INT &gt;= 11) {\n            setLayerType(View.LAYER_TYPE_SOFTWARE, null);\n        }\n        outerPaint=new Paint();\n        outerPaint.setAntiAlias(true);\n        outerPaint.setStyle(Paint.Style.FILL);\n        outerPaint.setColor(outerShapeColor);\n\n        outerPath =new Path();\n        outerPath.addRoundRect(xPos-5,yPos+10,width+5,height+10,outerRadii,Path.Direction.CW);\n        canvas.drawPath(outerPath,shadowPaint);\n        outerPath.reset();\n        outerPath.addRoundRect(outerRect,outerRadii,Path.Direction.CW);\n        canvas.drawPath(outerPath,outerPaint);\n    }\n\n    private void drawItems(Canvas canvas,int Xpos,int Ypos)\n    {\n//init paint \n        itemPaint =new Paint();\n        itemPaint.setAntiAlias(true);\n        itemPaint.setStyle(Paint.Style.FILL);\n        itemPaint.setColor(Color.TRANSPARENT);\n        items=new Rect[4];\n\n        \n        int itemWidth=(width-50)/items.length;\n        for(int i=0;i&lt;items.length;i++){\n            int startLeft=Xpos;\n            int itemLeft =startLeft +(i*itemWidth);\n            int itemTop = Ypos;\n            int itemRight=startLeft+((i+1)*itemWidth);\n            int itemBottom=height;\n\n            items[i] =new Rect(itemLeft,itemTop,itemRight,itemBottom);\n            Path path=new Path();\n            //draw item\n            \n            RectF[] rect=new RectF[4];\n            rect[i] =new RectF();\n            rect[i].set(items[i]);\n\n            path.addRoundRect(rect[i],circle,Path.Direction.CW);\n            canvas.drawPath(path,itemPaint);\n            //draw clicked item\n            if(i==itemClickedCount){\n                itemClickedPaint=new Paint(Paint.ANTI_ALIAS_FLAG);\n                itemClickedPaint.setStyle(Paint.Style.FILL);\n                itemClickedPaint.setColor(itemCircleColor);\n                path.reset();\n            \n                path.addRoundRect(itemLeft-5,itemTop-5,itemRight+5,itemBottom+5,circle,Path.Direction.CW);\n                canvas.drawPath(path,itemClickedPaint);\n                itemCutPaint=new Paint();\n                itemCutPaint.setAntiAlias(true);\n                itemCutPaint.setAlpha(0);\n                itemCutPaint.setColor(0xFFFFFF);\n                itemCutPaint.setColor(Color.TRANSPARENT);\n                itemCutPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));\n                \n                path.reset();\n                //path.addCircle(items[i].centerX(),items[i].centerY(),35,Path.Direction.CW);\n                path.addRoundRect(itemLeft+10,itemTop+10,itemRight-10,itemBottom-10,circle,Path.Direction.CW);\n                canvas.drawPath(path,itemCutPaint);\n                \n                //Toast.makeText(getContext(),&quot;Count: &quot;+ i,Toast.LENGTH_SHORT).show();\n            }\n            //check click item\n            if(items[i].contains(clickXpos,clickYpos)) {\n                itemClicked=true;\n                final Handler handler = new Handler();\n                handler.postDelayed(new Runnable() {\n                        @Override\n                        public void run() {\n                            \n                            itemClicked=false;\n\n                        }\n                    }, 5);\n\n            } else {itemClicked=false;}\n\n            if(itemClicked==true){\n                \n                itemClickedCount=i;\n                \n                \n            }\n            \n\n\n            //draw icon\n\n            icon=new Drawable[4];\n            icon[i]=getContext().getResources().getDrawable(iconsList.get(i));\n            if(icon[i]!=null){\n                \n                icon[i].setBounds(items[i].centerX()-30,items[i].centerY()-30,items[i].centerX() +30,items[i].centerY()+30);\n                icon[i].draw(canvas);\n            }\n            else{\n                \n                icon[i]=getResources().getDrawable(R.drawable.ic_delete);\n                icon[i].setBounds(items[i].centerX()-30,items[i].centerY()-30,items[i].centerX() +30,items[i].centerY()+30);\n\n                icon[i].draw(canvas);\n            }\n            \n        \n            \n        }\n    }\n\n    @Override\n    public boolean onTouchEvent(MotionEvent event)\n    {\n        switch(event.getAction()){\n            case MotionEvent.ACTION_DOWN:\n                pressStartTime=System.currentTimeMillis();\n                clickXpos=(int)event.getX();\n                clickYpos=(int)event.getY();\n\n                return true;\n            case MotionEvent.ACTION_UP:\n                pressDuration=System.currentTimeMillis()-pressStartTime;\n                if(pressDuration&lt;500 &amp;&amp; distance(clickXpos,clickYpos,event.getX(),event.getY())&lt;15){\n                    // duration less than half second and distance less than 15 PXs\n                    click=true;\n                    longPress=false;\n                    \n                    //clicked\n                }\n                if(pressDuration&gt;=1000 &amp;&amp; distance(clickXpos,clickYpos,event.getX(),event.getY())&lt;15){\n                    // duration greater than 1 second and distance less than 15 PXs\n                    click=false;\n                    longPress=true;\n                    \n                    //long press\n                }\n\n                invalidate();\n                return true;\n            default :\n                return super.onTouchEvent(event);\n\n\n\n        }\n\n        // TODO: Implement this method\n    }\n\n    private static float distance(float x1,float y1,float x2,float y2)\n    {\n        float dx = x1 - x2;\n        float dy = y1 - y2;\n        float distanceInPx = (float) Math.sqrt(dx * dx + dy * dy);\n        return distanceInPx;\n    }\n    \n    \n    //Setters\n    \n    public void setOuterShapeColor(int color){\n        this.outerShapeColor=color;\n    }\n    public void setItemCircleColor(int color){\n        this.itemCircleColor=color;\n    }\n    public void setIcons(ArrayList&lt;Integer&gt; icons){\n        this.iconsList=icons;\n    }\n\n    //Getters\n    \n    public int getSelectedItem(){\n        return itemClickedCount;\n    }\n    public boolean isClicked(){\n        return itemClicked;\n    }\n    \n    \n    \n    \n    \n\n\n}\n</code></pre>\n<p>When i add a Toast inside DrawItem() shows the selected item count successfully.\nI tried to do a Listener for items and it didn't work too\nPlease help me guys and thanks .</p>\n"},{"tags":["java","spring","filter","stream"],"comments":[{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":1,"creation_date":1692964231,"post_id":76976884,"comment_id":135699891,"body_markdown":"because you are doing `equals()` on 2 different values for example : `&quot;2022-2023&quot;.equals(&quot;2022-23&quot;)` witch is `false` !","body":"because you are doing <code>equals()</code> on 2 different values for example : <code>&quot;2022-2023&quot;.equals(&quot;2022-23&quot;)</code> witch is <code>false</code> !"},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1692964291,"post_id":76976884,"comment_id":135699901,"body_markdown":"In other words, &quot;even though I compare the right strings&quot; just isn&#39;t true","body":"In other words, &quot;even though I compare the right strings&quot; just isn&#39;t true"},{"owner":{"account_id":28350442,"reputation":1,"user_id":21682019,"display_name":"Adzhiew"},"score":0,"creation_date":1692964393,"post_id":76976884,"comment_id":135699915,"body_markdown":"I do not get it how could be false?","body":"I do not get it how could be false?"},{"owner":{"account_id":28350442,"reputation":1,"user_id":21682019,"display_name":"Adzhiew"},"score":2,"creation_date":1692964549,"post_id":76976884,"comment_id":135699956,"body_markdown":"Sorry my bad, i see it now, i overlooked the database inconsistency","body":"Sorry my bad, i see it now, i overlooked the database inconsistency"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1692975917,"post_id":76976884,"comment_id":135702796,"body_markdown":"Side note:  `String.format(&quot;Groups &quot; + courseGroupList)` is exactly the same as writing `&quot;Groups &quot; + courseGroupList`.  String.format adds nothing here.","body":"Side note:  <code>String.format(&quot;Groups &quot; + courseGroupList)</code> is exactly the same as writing <code>&quot;Groups &quot; + courseGroupList</code>.  String.format adds nothing here."}],"owner":{"account_id":28350442,"reputation":1,"user_id":21682019,"display_name":"Adzhiew"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692963881,"creation_date":1692963805,"question_id":76976884,"body_markdown":"The filter is supposed to compare two strings, but it doesnt work\r\n\r\n\r\n```\r\n        this.courseGroupRepository.findAll()\r\n                .stream().forEach(courseGroup -&gt; {\r\n                    System.out.println(courseGroup.getCourse().getSemester().getYear() + &quot; &quot; + semesterExamSession.getYear());\r\n                });\r\n\r\n//               List&lt;CourseGroup&gt; courseGroupList = this.courseGroupRepository\r\n//                .findAllByCourse_Semester_Year(semesterExamSession.getYear());\r\n\r\n//        List&lt;CourseGroup&gt; courseGroupList = this.courseGroupRepository.findAll()\r\n//                .stream()\r\n//                .filter(courseGroup -&gt; (courseGroup.getCourse().getSemester().getYear()).equals(semesterExamSession.getYear()))\r\n//                .collect(Collectors.toList());\r\n\r\n\r\n        System.out.println(String.format(&quot;Groups &quot; + courseGroupList));\r\n```\r\nBoth commented methods do not work, I tried printing the strings that need to be compared and got this, but list still empty\r\n[print screenshot](https://i.stack.imgur.com/ITDMQ.png)\r\n","title":"Why is java filter returning empty list even though I compare the right strings","body":"<p>The filter is supposed to compare two strings, but it doesnt work</p>\n<pre><code>        this.courseGroupRepository.findAll()\n                .stream().forEach(courseGroup -&gt; {\n                    System.out.println(courseGroup.getCourse().getSemester().getYear() + &quot; &quot; + semesterExamSession.getYear());\n                });\n\n//               List&lt;CourseGroup&gt; courseGroupList = this.courseGroupRepository\n//                .findAllByCourse_Semester_Year(semesterExamSession.getYear());\n\n//        List&lt;CourseGroup&gt; courseGroupList = this.courseGroupRepository.findAll()\n//                .stream()\n//                .filter(courseGroup -&gt; (courseGroup.getCourse().getSemester().getYear()).equals(semesterExamSession.getYear()))\n//                .collect(Collectors.toList());\n\n\n        System.out.println(String.format(&quot;Groups &quot; + courseGroupList));\n</code></pre>\n<p>Both commented methods do not work, I tried printing the strings that need to be compared and got this, but list still empty\n<a href=\"https://i.stack.imgur.com/ITDMQ.png\" rel=\"nofollow noreferrer\">print screenshot</a></p>\n"},{"tags":["java","exception","junit","mockito"],"comments":[{"owner":{"account_id":36858,"reputation":113744,"user_id":105224,"accept_rate":73,"display_name":"Andreas Dolk"},"score":1,"creation_date":1310376667,"post_id":6647957,"comment_id":7856148,"body_markdown":"Not a duplicate but another question on that topic: http://stackoverflow.com/questions/3762047/throw-checked-exceptions-from-mocks-with-mockito","body":"Not a duplicate but another question on that topic: <a href=\"http://stackoverflow.com/questions/3762047/throw-checked-exceptions-from-mocks-with-mockito\" title=\"throw checked exceptions from mocks with mockito\">stackoverflow.com/questions/3762047/&hellip;</a>"},{"owner":{"account_id":338994,"reputation":455,"user_id":668184,"accept_rate":62,"display_name":"Edheene"},"score":0,"creation_date":1310376843,"post_id":6647957,"comment_id":7856174,"body_markdown":"I have seen that, but it doesn&#39;t answer my question. thanks though","body":"I have seen that, but it doesn&#39;t answer my question. thanks though"},{"owner":{"display_name":"user545680"},"score":0,"creation_date":1310376942,"post_id":6647957,"comment_id":7856195,"body_markdown":"What is the type of testObj? Is it `MocSbb` or is it a super class or interface? Does the interface/parent class declare the exception also?","body":"What is the type of testObj? Is it <code>MocSbb</code> or is it a super class or interface? Does the interface/parent class declare the exception also?"}],"answers":[{"tags":[],"owner":{"account_id":334761,"reputation":318,"user_id":661423,"accept_rate":60,"display_name":"Szczepan"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1310653317,"creation_date":1310653317,"answer_id":6694742,"question_id":6647957,"body_markdown":"I have a feeling the solution is to use doThrow() syntax instead of when().thenThrow(). When spying it is safer to use doThrow/doReturn syntax for stubbing. The reasons are somewhat described in the documentation: http://docs.mockito.googlecode.com/hg/org/mockito/Mockito.html#13\r\n\r\nI think we can improve an exception message in this instance so that it is m","title":"Mockito refuses to throw checked exception","body":"<p>I have a feeling the solution is to use doThrow() syntax instead of when().thenThrow(). When spying it is safer to use doThrow/doReturn syntax for stubbing. The reasons are somewhat described in the documentation: <a href=\"http://docs.mockito.googlecode.com/hg/org/mockito/Mockito.html#13\" rel=\"nofollow\">http://docs.mockito.googlecode.com/hg/org/mockito/Mockito.html#13</a></p>\n\n<p>I think we can improve an exception message in this instance so that it is m</p>\n"},{"tags":[],"owner":{"account_id":338994,"reputation":455,"user_id":668184,"accept_rate":62,"display_name":"Edheene"},"down_vote_count":1,"up_vote_count":11,"is_accepted":true,"score":10,"last_activity_date":1311176077,"creation_date":1311145743,"answer_id":6758221,"question_id":6647957,"body_markdown":"I have finally found the solution for this problem.  \r\n\r\nWe have used an anonymous class extending original `Sbb` class which was tested and in this extended class implementation of mentioned method was altered and `throws` expression was removed which caused the problem.\r\n\r\nI should have read my colleagues code more carefully.","title":"Mockito refuses to throw checked exception","body":"<p>I have finally found the solution for this problem.  </p>\n\n<p>We have used an anonymous class extending original <code>Sbb</code> class which was tested and in this extended class implementation of mentioned method was altered and <code>throws</code> expression was removed which caused the problem.</p>\n\n<p>I should have read my colleagues code more carefully.</p>\n"},{"tags":[],"owner":{"account_id":8762422,"reputation":3387,"user_id":6552016,"display_name":"Rub&#233;n Viguera"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1488455556,"creation_date":1488455556,"answer_id":42554771,"question_id":6647957,"body_markdown":"I know this post is very old but my solution it could be of help to someone:\r\nI solved this same error by changing the visibility of my method to be test to public.\r\n\r\nIn this case you whould have change\r\n\r\n    protected MocFsm getSs7Fsm() throws FsmInitializationException {\r\n        ...\r\n    }\r\n\r\nto\r\n\r\n    public MocFsm getSs7Fsm() throws FsmInitializationException {\r\n        ...\r\n    }","title":"Mockito refuses to throw checked exception","body":"<p>I know this post is very old but my solution it could be of help to someone:\nI solved this same error by changing the visibility of my method to be test to public.</p>\n\n<p>In this case you whould have change</p>\n\n<pre><code>protected MocFsm getSs7Fsm() throws FsmInitializationException {\n    ...\n}\n</code></pre>\n\n<p>to</p>\n\n<pre><code>public MocFsm getSs7Fsm() throws FsmInitializationException {\n    ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3555029,"reputation":1963,"user_id":2968988,"accept_rate":100,"display_name":"Mohamed Nageh"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1616331064,"creation_date":1616331064,"answer_id":66732489,"question_id":6647957,"body_markdown":"Following [this answer][1]. Using Mockito&#39;s `doAnswer` instead of `thenThrow` method solved my issue.\r\n\r\n    Mockito.doAnswer(\r\n          invocation -&gt; {\r\n            throw new Exception(&quot;Something went wrong&quot;);\r\n          })\r\n      .when(moc)\r\n      .getSs7Fsm();\r\n\r\nI know it&#39;s too late but just in case anyone faces the same issue.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/55351849/2968988","title":"Mockito refuses to throw checked exception","body":"<p>Following <a href=\"https://stackoverflow.com/a/55351849/2968988\">this answer</a>. Using Mockito's <code>doAnswer</code> instead of <code>thenThrow</code> method solved my issue.</p>\n<pre><code>Mockito.doAnswer(\n      invocation -&gt; {\n        throw new Exception(&quot;Something went wrong&quot;);\n      })\n  .when(moc)\n  .getSs7Fsm();\n</code></pre>\n<p>I know it's too late but just in case anyone faces the same issue.</p>\n"},{"tags":[],"owner":{"account_id":2794316,"reputation":1918,"user_id":2403836,"accept_rate":72,"display_name":"mr nooby noob"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692963855,"creation_date":1692963855,"answer_id":76976891,"question_id":6647957,"body_markdown":"In my case, since I was using @SneakyThrows on my void method, I had to throw a RuntimeException, instead of a normal exception, in my mock, so\r\n\r\n    doThrow(new RuntimeException()).when(mock).doStuff(any());\r\n\r\n","title":"Mockito refuses to throw checked exception","body":"<p>In my case, since I was using @SneakyThrows on my void method, I had to throw a RuntimeException, instead of a normal exception, in my mock, so</p>\n<pre><code>doThrow(new RuntimeException()).when(mock).doStuff(any());\n</code></pre>\n"}],"owner":{"account_id":338994,"reputation":455,"user_id":668184,"accept_rate":62,"display_name":"Edheene"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33663,"favorite_count":0,"down_vote_count":1,"up_vote_count":16,"accepted_answer_id":6758221,"answer_count":5,"score":15,"last_activity_date":1692963855,"creation_date":1310375406,"question_id":6647957,"body_markdown":"I&#39;m using Mockito for my unit tests and I encounetered a problem with throwing exception on spied object. I have done this before on this object (in different test case and it worked).\r\nHere&#39;s the test code:  \r\n \r\n    @Test\r\n    public void callInitiated_FsmInitializationException() throws FsmInitializationException, Exception {\r\n        MocSbb moc = Mockito.spy(testObj);\r\n\r\n        MocTracer tracer = Mockito.mock(MocTracer.class);\r\n        Mockito.doReturn(tracer).when(moc).getTracer();\r\n\r\n        CAP2InitialDPArg idp = Mockito.mock(CAP2InitialDPArg.class);\r\n        MocFsm mocFsm = Mockito.mock(MocFsm.class);\r\n        //Mockito.doReturn(mocFsm).when(moc).getSs7Fsm();\r\n\r\n        TicketingLocalInterface ticketing = mockTicketingLocalInterface();\r\n        CAP2InitialDPArgWrap idpWrap = Mockito.mock(CAP2InitialDPArgWrap.class);\r\n        PowerMockito.whenNew(CAP2InitialDPArgWrap.class).withArguments(idp, tracer).thenReturn(idpWrap);\r\n\r\n        MocSession mocSession = Mockito.mock(MocSession.class);\r\n        Mockito.doReturn(mocSession).when(moc).getMocSession();\r\n\r\n        Mockito.when(moc.getSs7Fsm()).thenThrow(new FsmInitializationException()); ////HERE&#39;S THE PROBLEM\r\n        \r\n        moc.callInitiated(idp);\r\n\r\n        verify(moc).getFailedFsm();\r\n    } \r\n \r\nhere&#39;s the method on which the exception should be thrown: \r\n \r\n    protected MocFsm getSs7Fsm() throws FsmInitializationException {\r\n        mocFsm.setContextProvider(getMocLocalObject());\r\n        return mocFsm;\r\n    }  \r\n\r\nthe error I get during test execution looks like this:\r\n\r\n    Testcase: callInitiated_FsmInitializationException(com.nsn.as.ccs.moc.sbb.MocSbbTest):\tCaused an ERROR\r\n\r\n    Checked exception is invalid for this method!\r\n    Invalid: com.nsn.as.ccs.moc.fsm.FsmInitializationException\r\n    org.mockito.exceptions.base.MockitoException: \r\n    Checked exception is invalid for this method!\r\n    Invalid: com.nsn.as.ccs.moc.fsm.FsmInitializationException\r\n\tat com.nsn.as.ccs.moc.sbb.MocSbbTest.callInitiated_FsmInitializationException(MocSbbTest.java:1194)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:322)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.executeTest(PowerMockJUnit44RunnerDelegateImpl.java:309)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTestInSuper(PowerMockJUnit47RunnerDelegateImpl.java:112)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTest(PowerMockJUnit47RunnerDelegateImpl.java:73)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runBeforesThenTestThenAfters(PowerMockJUnit44RunnerDelegateImpl.java:297)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.invokeTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:222)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.runMethods(PowerMockJUnit44RunnerDelegateImpl.java:161)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$1.run(PowerMockJUnit44RunnerDelegateImpl.java:135)\r\n\tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.run(PowerMockJUnit44RunnerDelegateImpl.java:133)\r\n\tat org.powermock.modules.junit4.common.internal.impl.JUnit4TestSuiteChunkerImpl.run(JUnit4TestSuiteChunkerImpl.java:112)\r\n\tat org.powermock.modules.junit4.common.internal.impl.AbstractCommonPowerMockRunner.run(AbstractCommonPowerMockRunner.java:57)  \r\n\r\nDoes anyone have any idea why it doesn&#39;t work in this case?","title":"Mockito refuses to throw checked exception","body":"<p>I'm using Mockito for my unit tests and I encounetered a problem with throwing exception on spied object. I have done this before on this object (in different test case and it worked).\nHere's the test code:  </p>\n\n<pre><code>@Test\npublic void callInitiated_FsmInitializationException() throws FsmInitializationException, Exception {\n    MocSbb moc = Mockito.spy(testObj);\n\n    MocTracer tracer = Mockito.mock(MocTracer.class);\n    Mockito.doReturn(tracer).when(moc).getTracer();\n\n    CAP2InitialDPArg idp = Mockito.mock(CAP2InitialDPArg.class);\n    MocFsm mocFsm = Mockito.mock(MocFsm.class);\n    //Mockito.doReturn(mocFsm).when(moc).getSs7Fsm();\n\n    TicketingLocalInterface ticketing = mockTicketingLocalInterface();\n    CAP2InitialDPArgWrap idpWrap = Mockito.mock(CAP2InitialDPArgWrap.class);\n    PowerMockito.whenNew(CAP2InitialDPArgWrap.class).withArguments(idp, tracer).thenReturn(idpWrap);\n\n    MocSession mocSession = Mockito.mock(MocSession.class);\n    Mockito.doReturn(mocSession).when(moc).getMocSession();\n\n    Mockito.when(moc.getSs7Fsm()).thenThrow(new FsmInitializationException()); ////HERE'S THE PROBLEM\n\n    moc.callInitiated(idp);\n\n    verify(moc).getFailedFsm();\n} \n</code></pre>\n\n<p>here's the method on which the exception should be thrown: </p>\n\n<pre><code>protected MocFsm getSs7Fsm() throws FsmInitializationException {\n    mocFsm.setContextProvider(getMocLocalObject());\n    return mocFsm;\n}  \n</code></pre>\n\n<p>the error I get during test execution looks like this:</p>\n\n<pre><code>Testcase: callInitiated_FsmInitializationException(com.nsn.as.ccs.moc.sbb.MocSbbTest):  Caused an ERROR\n\nChecked exception is invalid for this method!\nInvalid: com.nsn.as.ccs.moc.fsm.FsmInitializationException\norg.mockito.exceptions.base.MockitoException: \nChecked exception is invalid for this method!\nInvalid: com.nsn.as.ccs.moc.fsm.FsmInitializationException\nat com.nsn.as.ccs.moc.sbb.MocSbbTest.callInitiated_FsmInitializationException(MocSbbTest.java:1194)\nat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:322)\nat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.executeTest(PowerMockJUnit44RunnerDelegateImpl.java:309)\nat org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTestInSuper(PowerMockJUnit47RunnerDelegateImpl.java:112)\nat org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTest(PowerMockJUnit47RunnerDelegateImpl.java:73)\nat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runBeforesThenTestThenAfters(PowerMockJUnit44RunnerDelegateImpl.java:297)\nat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.invokeTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:222)\nat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.runMethods(PowerMockJUnit44RunnerDelegateImpl.java:161)\nat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$1.run(PowerMockJUnit44RunnerDelegateImpl.java:135)\nat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.run(PowerMockJUnit44RunnerDelegateImpl.java:133)\nat org.powermock.modules.junit4.common.internal.impl.JUnit4TestSuiteChunkerImpl.run(JUnit4TestSuiteChunkerImpl.java:112)\nat org.powermock.modules.junit4.common.internal.impl.AbstractCommonPowerMockRunner.run(AbstractCommonPowerMockRunner.java:57)  \n</code></pre>\n\n<p>Does anyone have any idea why it doesn't work in this case?</p>\n"},{"tags":["java","spring","caching","caffeine-cache"],"comments":[{"owner":{"account_id":22979257,"reputation":61,"user_id":17106454,"display_name":"Axiomatic-1"},"score":0,"creation_date":1692963511,"post_id":76976773,"comment_id":135699725,"body_markdown":"I think you can find answer here: https://stackoverflow.com/questions/74130063/is-there-anyway-to-refresh-the-caffeine-cache-on-certain-interval-wihtout-adding\n\nOr here: https://stackoverflow.com/questions/57886754/how-to-update-cache-every-30-minutes-in-spring","body":"I think you can find answer here: <a href=\"https://stackoverflow.com/questions/74130063/is-there-anyway-to-refresh-the-caffeine-cache-on-certain-interval-wihtout-adding\" title=\"is there anyway to refresh the caffeine cache on certain interval wihtout adding\">stackoverflow.com/questions/74130063/&hellip;</a>  Or here: <a href=\"https://stackoverflow.com/questions/57886754/how-to-update-cache-every-30-minutes-in-spring\" title=\"how to update cache every 30 minutes in spring\">stackoverflow.com/questions/57886754/&hellip;</a>"}],"owner":{"display_name":"user6450105"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692963355,"creation_date":1692962860,"question_id":76976773,"body_markdown":"I have currently this code for Caffeine cache(I want to have all rules from DB in my cache, since there is no lot of them):\r\n\r\n    public class CaffeineCache {\r\n        LoadingCache&lt;String, Rule&gt; cache = Caffeine.newBuilder()\r\n                .maximumSize(10_000)\r\n                .build(key -&gt; Rule.builder().build());\r\n    \r\n        public Collection&lt;Rule&gt; getRules() {\r\n            return cache.asMap().values();\r\n        }\r\n    \r\n        public void addRule(Rule rule) {\r\n            cache.put(rule.getRuleId(), rule);\r\n        }\r\n    \r\n        public void refreshCache() {\r\n            Executors.newScheduledThreadPool(1).scheduleAtFixedRate(\r\n                    () -&gt; cache.refresh(&quot;SOME_KEY&quot;),\r\n                    0, 15, TimeUnit.MINUTES\r\n            );\r\n        }\r\n\r\nI want to update my cache every 15 minutes(no matter if there are new values or not). If it not correct approach, what should I do?","title":"How to update Caffeine cache every N minutes?","body":"<p>I have currently this code for Caffeine cache(I want to have all rules from DB in my cache, since there is no lot of them):</p>\n<pre><code>public class CaffeineCache {\n    LoadingCache&lt;String, Rule&gt; cache = Caffeine.newBuilder()\n            .maximumSize(10_000)\n            .build(key -&gt; Rule.builder().build());\n\n    public Collection&lt;Rule&gt; getRules() {\n        return cache.asMap().values();\n    }\n\n    public void addRule(Rule rule) {\n        cache.put(rule.getRuleId(), rule);\n    }\n\n    public void refreshCache() {\n        Executors.newScheduledThreadPool(1).scheduleAtFixedRate(\n                () -&gt; cache.refresh(&quot;SOME_KEY&quot;),\n                0, 15, TimeUnit.MINUTES\n        );\n    }\n</code></pre>\n<p>I want to update my cache every 15 minutes(no matter if there are new values or not). If it not correct approach, what should I do?</p>\n"},{"tags":["java","visual-studio-code","intellij-idea","syntax-highlighting"],"comments":[{"owner":{"account_id":95983,"reputation":1408,"user_id":261123,"accept_rate":86,"display_name":"boardtc"},"score":0,"creation_date":1692889954,"post_id":76970598,"comment_id":135688203,"body_markdown":"Can you explain what I did wrong to get a -1?  I added some example pictures to improve the question.","body":"Can you explain what I did wrong to get a -1?  I added some example pictures to improve the question."},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":2,"creation_date":1692890149,"post_id":76970598,"comment_id":135688254,"body_markdown":"Might not be easy, but you have the capability to set up your own now: https://www.jetbrains.com/help/idea/configuring-colors-and-fonts.html#share-color-scheme","body":"Might not be easy, but you have the capability to set up your own now: <a href=\"https://www.jetbrains.com/help/idea/configuring-colors-and-fonts.html#share-color-scheme\" rel=\"nofollow noreferrer\">jetbrains.com/help/idea/&hellip;</a>"},{"owner":{"account_id":13770793,"reputation":25892,"user_id":9938317,"display_name":"rioV8"},"score":0,"creation_date":1692890263,"post_id":76970598,"comment_id":135688288,"body_markdown":"just like you can create a theme for VSC create one for IntelliJ, borrow the colors from the theme you like","body":"just like you can create a theme for VSC create one for IntelliJ, borrow the colors from the theme you like"}],"answers":[{"tags":[],"owner":{"account_id":26535163,"reputation":53,"user_id":20166797,"display_name":"therealvirtuoso"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1692890314,"creation_date":1692890314,"answer_id":76970746,"question_id":76970598,"body_markdown":"There’s a really nice looking theme plugin you can use for IntelliJ called “**nightfall**”, and based on your first picture, it will give syntax highlighting of a similar shade / similar hues to that.","title":"How can I get Visual Studio Code&#39;s Dark Modern Java color syntax in IntelliJ","body":"<p>There’s a really nice looking theme plugin you can use for IntelliJ called “<strong>nightfall</strong>”, and based on your first picture, it will give syntax highlighting of a similar shade / similar hues to that.</p>\n"},{"tags":[],"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692942161,"creation_date":1692942161,"answer_id":76974516,"question_id":76970598,"body_markdown":"You can [customize syntax highlighting][1] and enable [semantic highlighting][2]. \r\n\r\nOr search and use similar themed extensions (might take many trials)。\r\n\r\n\r\n  [1]: https://www.jetbrains.com/help/idea/configuring-colors-and-fonts.html#customize-color-scheme\r\n  [2]: https://www.jetbrains.com/help/idea/configuring-colors-and-fonts.html#semantic-highlighting","title":"How can I get Visual Studio Code&#39;s Dark Modern Java color syntax in IntelliJ","body":"<p>You can <a href=\"https://www.jetbrains.com/help/idea/configuring-colors-and-fonts.html#customize-color-scheme\" rel=\"nofollow noreferrer\">customize syntax highlighting</a> and enable <a href=\"https://www.jetbrains.com/help/idea/configuring-colors-and-fonts.html#semantic-highlighting\" rel=\"nofollow noreferrer\">semantic highlighting</a>.</p>\n<p>Or search and use similar themed extensions (might take many trials)。</p>\n"}],"owner":{"account_id":95983,"reputation":1408,"user_id":261123,"accept_rate":86,"display_name":"boardtc"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":135,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":76970746,"answer_count":2,"score":1,"last_activity_date":1692963212,"creation_date":1692889195,"question_id":76970598,"body_markdown":"The default theme in VS Code is dark modern:\r\n\r\n[![VS Code default theme][1]][1]\r\n\r\nExample Java:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nI like how this shows Java code with the yellow method names and the method parameters with their own distinctive color. \r\n\r\nBut my main IDE is IntelliJ, where I use the dark color scheme. \r\nExample Java:\r\n\r\n[![enter image description here][3]][3]\r\n\r\nDoes anyone have any suggestions about how I can use (free) plugins to add VS Code&#39;s Java syntax coloring scheme to IntelliJ?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/C9sPX.png\r\n  [2]: https://i.stack.imgur.com/qzz3z.png\r\n  [3]: https://i.stack.imgur.com/QY3wj.png","title":"How can I get Visual Studio Code&#39;s Dark Modern Java color syntax in IntelliJ","body":"<p>The default theme in VS Code is dark modern:</p>\n<p><a href=\"https://i.stack.imgur.com/C9sPX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/C9sPX.png\" alt=\"VS Code default theme\" /></a></p>\n<p>Example Java:</p>\n<p><a href=\"https://i.stack.imgur.com/qzz3z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qzz3z.png\" alt=\"enter image description here\" /></a></p>\n<p>I like how this shows Java code with the yellow method names and the method parameters with their own distinctive color.</p>\n<p>But my main IDE is IntelliJ, where I use the dark color scheme.\nExample Java:</p>\n<p><a href=\"https://i.stack.imgur.com/QY3wj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QY3wj.png\" alt=\"enter image description here\" /></a></p>\n<p>Does anyone have any suggestions about how I can use (free) plugins to add VS Code's Java syntax coloring scheme to IntelliJ?</p>\n"},{"tags":["java","jdbc","prepared-statement"],"answers":[{"tags":[],"owner":{"account_id":30285,"reputation":55210,"user_id":82511,"accept_rate":71,"display_name":"djna"},"down_vote_count":1,"up_vote_count":86,"is_accepted":true,"score":85,"last_activity_date":1647546835,"creation_date":1251725000,"answer_id":1357449,"question_id":1357429,"body_markdown":"This [guide](https://docs.oracle.com/javase/1.5.0/docs/guide/jdbc/getstart/preparedstatement.html) says:\r\n\r\n&gt; #### 6.1.5 Sending JDBC NULL as an IN parameter\r\n&gt;\r\n&gt; The `setNull` method allows a programmer to send a JDBC `NULL` (a generic SQL `NULL`) value to the database as an IN parameter. Note, however, that one must still specify the JDBC type of the parameter.\r\n&gt;\r\n&gt; A JDBC `NULL` will also be sent to the database when a Java `null` value is passed to a `setXXX` method (if it takes Java objects as arguments). The method `setObject`, however, can take a `null` value only if the JDBC type is specified.\r\n\r\nSo yes they&#39;re equivalent.","title":"PreparedStatement setNull(..)","body":"<p>This <a href=\"https://docs.oracle.com/javase/1.5.0/docs/guide/jdbc/getstart/preparedstatement.html\" rel=\"noreferrer\">guide</a> says:</p>\n<blockquote>\n<h4>6.1.5 Sending JDBC NULL as an IN parameter</h4>\n<p>The <code>setNull</code> method allows a programmer to send a JDBC <code>NULL</code> (a generic SQL <code>NULL</code>) value to the database as an IN parameter. Note, however, that one must still specify the JDBC type of the parameter.</p>\n<p>A JDBC <code>NULL</code> will also be sent to the database when a Java <code>null</code> value is passed to a <code>setXXX</code> method (if it takes Java objects as arguments). The method <code>setObject</code>, however, can take a <code>null</code> value only if the JDBC type is specified.</p>\n</blockquote>\n<p>So yes they're equivalent.</p>\n"},{"tags":[],"owner":{"account_id":28626,"reputation":18594,"user_id":76661,"accept_rate":59,"display_name":"paweloque"},"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1251803796,"creation_date":1251803401,"answer_id":1361850,"question_id":1357429,"body_markdown":"Finally I did a small test and while I was programming it it came to my mind, that without the setNull(..) method there would be no way to set null values for the Java primitives. For Objects both ways \r\n\r\n    setNull(..)\r\n\r\nand \r\n\r\n    set&lt;ClassName&gt;(.., null)) \r\n\r\nbehave the same way.","title":"PreparedStatement setNull(..)","body":"<p>Finally I did a small test and while I was programming it it came to my mind, that without the setNull(..) method there would be no way to set null values for the Java primitives. For Objects both ways </p>\n\n<pre><code>setNull(..)\n</code></pre>\n\n<p>and </p>\n\n<pre><code>set&lt;ClassName&gt;(.., null)) \n</code></pre>\n\n<p>behave the same way.</p>\n"},{"tags":[],"owner":{"account_id":1295047,"reputation":839,"user_id":1246329,"display_name":"Owen"},"down_vote_count":1,"up_vote_count":84,"is_accepted":false,"score":83,"last_activity_date":1393299086,"creation_date":1330741914,"answer_id":9542866,"question_id":1357429,"body_markdown":"but watch out for this....\r\n\r\n    Long nullLong = null;\r\n\r\n    preparedStatement.setLong( nullLong );\r\n\r\n-thows null pointer exception-\r\n\r\n\r\n\r\nbecause the protype is\r\n\r\n    setLong( long )   \r\nNOT\r\n\r\n    setLong( Long )\r\n\r\nnice one to catch you out eh.","title":"PreparedStatement setNull(..)","body":"<p>but watch out for this....</p>\n\n<pre><code>Long nullLong = null;\n\npreparedStatement.setLong( nullLong );\n</code></pre>\n\n<p>-thows null pointer exception-</p>\n\n<p>because the protype is</p>\n\n<pre><code>setLong( long )   \n</code></pre>\n\n<p>NOT</p>\n\n<pre><code>setLong( Long )\n</code></pre>\n\n<p>nice one to catch you out eh.</p>\n"},{"tags":[],"owner":{"account_id":5675474,"reputation":186,"user_id":4488812,"accept_rate":80,"display_name":"bithom"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1448346314,"creation_date":1448337571,"answer_id":33885209,"question_id":1357429,"body_markdown":"You could also consider using `preparedStatement.setObject(index,value,type);`","title":"PreparedStatement setNull(..)","body":"<p>You could also consider using <code>preparedStatement.setObject(index,value,type);</code></p>\n"},{"tags":[],"owner":{"account_id":505795,"reputation":390,"user_id":1689489,"display_name":"Dmitriy Pichugin"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1692963004,"creation_date":1581551283,"answer_id":60198554,"question_id":1357429,"body_markdown":"    preparedStatement.setNull(index, java.sql.Types.NULL);\r\n\r\nthat should work for any type.\r\nThough in some cases failure happens on the server-side, like:\r\nfor SQL:\r\n\r\n    COALESCE(?, CURRENT_TIMESTAMP)\r\n\r\nOracle 18XE fails with the wrong type: expected DATE, got STRING -- that is a perfectly valid failure; \r\n\r\nBottom line: it is good to know the type if you call `.setNull()`.","title":"PreparedStatement setNull(..)","body":"<pre><code>preparedStatement.setNull(index, java.sql.Types.NULL);\n</code></pre>\n<p>that should work for any type.\nThough in some cases failure happens on the server-side, like:\nfor SQL:</p>\n<pre><code>COALESCE(?, CURRENT_TIMESTAMP)\n</code></pre>\n<p>Oracle 18XE fails with the wrong type: expected DATE, got STRING -- that is a perfectly valid failure;</p>\n<p>Bottom line: it is good to know the type if you call <code>.setNull()</code>.</p>\n"}],"owner":{"account_id":28626,"reputation":18594,"user_id":76661,"accept_rate":59,"display_name":"paweloque"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":189157,"favorite_count":0,"down_vote_count":0,"up_vote_count":107,"accepted_answer_id":1357449,"answer_count":5,"score":107,"last_activity_date":1692963004,"creation_date":1251724708,"question_id":1357429,"body_markdown":"Java PreparedStatement provides a possibility to explicitely set a Null value. This possibility is:\r\n\r\n    prepStmt.setNull(parameterIndex, Types.VARCHAR);\r\n\r\nAre the semantics of this call the same as when using a specific setType with a null parameter?\r\n\r\n    prepStmt.setString(null);\r\n\r\n?","title":"PreparedStatement setNull(..)","body":"<p>Java PreparedStatement provides a possibility to explicitely set a Null value. This possibility is:</p>\n\n<pre><code>prepStmt.setNull(parameterIndex, Types.VARCHAR);\n</code></pre>\n\n<p>Are the semantics of this call the same as when using a specific setType with a null parameter?</p>\n\n<pre><code>prepStmt.setString(null);\n</code></pre>\n\n<p>?</p>\n"},{"tags":["java","mapstruct"],"owner":{"account_id":15043990,"reputation":1,"user_id":10857744,"display_name":"AHensel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692962816,"creation_date":1692961130,"question_id":76976561,"body_markdown":"We use MapStruct 1.5.3 for class mapping between several layers. One layer has &#39;simple&#39; properties (i.e. int, Integer, BigDecimal, String), the other container properties, where the containers has additional metadata:\r\n\r\n```\r\n@ lombok.Data\r\nclass SimpleClass {\r\n    String name;\r\n    String title;\r\n    [...]\r\n}\r\n```\r\n\r\n```\r\n@ lombok.Data\r\nclass ContaineredClass {\r\n    StringContainer name;\r\n    StringContainer title;\r\n    [...]\r\n}\r\n\r\n@ lombok.Data\r\nclass StringCountainer extends Container&lt;String&gt;{\r\n     String value;\r\n     int allowedMaxLength;\r\n     boolean mandatory;\r\n     [...]\r\n}\r\n```\r\nFor the class mapping we are using the &quot;update&quot; variant:\r\n\r\n```\r\nvoid mapSimpletoContainer(SimpleClass simple, @MappingTarget ContaineredClass containered);\r\n```\r\n\r\nWe do have special &quot;update&quot; functions which are used to update the inner value inside the container, so updating works, even if the source value is NULL (in that case, the inner value is cleared as intended):\r\n\r\n```\r\nclass persistenceUtils {\r\n      public void update(String value, @MappingTarget StringContainer container) {\r\n            container.setValue(value);\r\n      }\r\n}\r\n```\r\n\r\nBefore mapping from SimpleClass to ContaineredClass, we initialise all the containers, esp. setting metadata.\r\n\r\nFor the mapper implementation, MapStruct renders a null check on the target container, but this is no problem, we make sure the target container will never be null.\r\n\r\nUnfortunately, MapStruct also renders a null check on the *source* value before updating, and in case of source-NULL the whole container will be nulled:\r\n\r\n```\r\npublic void mapSimpletoContainer(SimpleClass simple, ContaineredClass containered) {\r\n      [...]\r\n      if ( simple.getName() != null ) { // This IF is the problem\r\n            if ( containered.getName() == null ) {\r\n                containered.setName( new StringContainer() );\r\n            }\r\n            persistenceUtils.update( simple.getName(), containered.setName() );\r\n      }\r\n      else {\r\n            containered.setName( null ); // This is the error\r\n      }\r\n      [...]\r\n}\r\n```\r\n\r\nThis NULL container causes fails. \r\n\r\nHow can one get rid of the outer IF-construct at all?\\\r\n-OR-\\\r\nHow can one cause a special updating for the ELSE part?\\\r\n-OR-\\\r\nWhere a better documentation for the @Condition configuration, esp. how to finetune its configuration for respecting when rendering of the Mapper implementation?\r\n\r\nWe tried NullValuePropertyMappingStrategy.IGNORE, this eliminates the else-branch of the outer if-construct, but this means, in case of NULL the container value will not be altered.\r\n\r\nWe don&#39;t want to add a @Condition for every property, as this is error prone: the set of properties will change over the life of the application.\r\n\r\nWe tried an appropriate global @Condition (which will always return true) but suffered problems to have it used in the Mapper implementation:\r\n\r\n1) catch all\r\n\r\n    ```\r\n    @Condition\r\n    default boolean always(Object value) { return true; }\r\n    ```\r\n\r\n    This catch-all-approach is too broad; it will be used for ALL mappings of the Mapper implementation (we define both directions in the same mapper and would like to keep it that way, but this would certainly be a workaround).\r\n\r\n\r\n2) Narrow by source value class\r\n\r\n    ```\r\n    @Condition\r\n    default boolean always(String value) { return true; }\r\n    ```\r\n\r\n    This is too specific and would needed to be repeated for all &quot;simple&quot; types; but also a workaround.\r\n\r\n3) Using @Mapping target\r\n\r\n    ```\r\n    @Condition\r\n    default boolean always(Object value, @MappingTarget ContaineredClass containered) {\r\n          return true;\r\n    }\r\n    ```\r\n\r\n    This would be preferable, but somehow will not be picked/applied when rendering the Mapper implementation.\r\n","title":"How to instrument correct handling of null source values, when target is custom container (i.e. not List, Map, Optional)?","body":"<p>We use MapStruct 1.5.3 for class mapping between several layers. One layer has 'simple' properties (i.e. int, Integer, BigDecimal, String), the other container properties, where the containers has additional metadata:</p>\n<pre><code>@ lombok.Data\nclass SimpleClass {\n    String name;\n    String title;\n    [...]\n}\n</code></pre>\n<pre><code>@ lombok.Data\nclass ContaineredClass {\n    StringContainer name;\n    StringContainer title;\n    [...]\n}\n\n@ lombok.Data\nclass StringCountainer extends Container&lt;String&gt;{\n     String value;\n     int allowedMaxLength;\n     boolean mandatory;\n     [...]\n}\n</code></pre>\n<p>For the class mapping we are using the &quot;update&quot; variant:</p>\n<pre><code>void mapSimpletoContainer(SimpleClass simple, @MappingTarget ContaineredClass containered);\n</code></pre>\n<p>We do have special &quot;update&quot; functions which are used to update the inner value inside the container, so updating works, even if the source value is NULL (in that case, the inner value is cleared as intended):</p>\n<pre><code>class persistenceUtils {\n      public void update(String value, @MappingTarget StringContainer container) {\n            container.setValue(value);\n      }\n}\n</code></pre>\n<p>Before mapping from SimpleClass to ContaineredClass, we initialise all the containers, esp. setting metadata.</p>\n<p>For the mapper implementation, MapStruct renders a null check on the target container, but this is no problem, we make sure the target container will never be null.</p>\n<p>Unfortunately, MapStruct also renders a null check on the <em>source</em> value before updating, and in case of source-NULL the whole container will be nulled:</p>\n<pre><code>public void mapSimpletoContainer(SimpleClass simple, ContaineredClass containered) {\n      [...]\n      if ( simple.getName() != null ) { // This IF is the problem\n            if ( containered.getName() == null ) {\n                containered.setName( new StringContainer() );\n            }\n            persistenceUtils.update( simple.getName(), containered.setName() );\n      }\n      else {\n            containered.setName( null ); // This is the error\n      }\n      [...]\n}\n</code></pre>\n<p>This NULL container causes fails.</p>\n<p>How can one get rid of the outer IF-construct at all?<br />\n-OR-<br />\nHow can one cause a special updating for the ELSE part?<br />\n-OR-<br />\nWhere a better documentation for the @Condition configuration, esp. how to finetune its configuration for respecting when rendering of the Mapper implementation?</p>\n<p>We tried NullValuePropertyMappingStrategy.IGNORE, this eliminates the else-branch of the outer if-construct, but this means, in case of NULL the container value will not be altered.</p>\n<p>We don't want to add a @Condition for every property, as this is error prone: the set of properties will change over the life of the application.</p>\n<p>We tried an appropriate global @Condition (which will always return true) but suffered problems to have it used in the Mapper implementation:</p>\n<ol>\n<li><p>catch all</p>\n<pre><code>@Condition\ndefault boolean always(Object value) { return true; }\n</code></pre>\n<p>This catch-all-approach is too broad; it will be used for ALL mappings of the Mapper implementation (we define both directions in the same mapper and would like to keep it that way, but this would certainly be a workaround).</p>\n</li>\n<li><p>Narrow by source value class</p>\n<pre><code>@Condition\ndefault boolean always(String value) { return true; }\n</code></pre>\n<p>This is too specific and would needed to be repeated for all &quot;simple&quot; types; but also a workaround.</p>\n</li>\n<li><p>Using @Mapping target</p>\n<pre><code>@Condition\ndefault boolean always(Object value, @MappingTarget ContaineredClass containered) {\n      return true;\n}\n</code></pre>\n<p>This would be preferable, but somehow will not be picked/applied when rendering the Mapper implementation.</p>\n</li>\n</ol>\n"},{"tags":["java","swing","popup","jbutton","popupmenu"],"comments":[{"owner":{"account_id":436678,"reputation":5234,"user_id":823991,"accept_rate":83,"display_name":"John Snow"},"score":0,"creation_date":1333525380,"post_id":10006853,"comment_id":12792672,"body_markdown":"It would be helpful if you posted some code that includes how you create the buttons and the menus. Does the menu hide the button, or do they just &quot;dissapear&quot; ?","body":"It would be helpful if you posted some code that includes how you create the buttons and the menus. Does the menu hide the button, or do they just &quot;dissapear&quot; ?"},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":1,"creation_date":1333525522,"post_id":10006853,"comment_id":12792714,"body_markdown":"*&quot;Why is it like this?&quot;*  Because of the code used.  For better help sooner, post an [SSCCE](http://sscce.org/).","body":"<i>&quot;Why is it like this?&quot;</i>  Because of the code used.  For better help sooner, post an <a href=\"http://sscce.org/\" rel=\"nofollow noreferrer\">SSCCE</a>."},{"owner":{"account_id":1367126,"reputation":1154,"user_id":1303334,"accept_rate":60,"display_name":"mbaydar"},"score":0,"creation_date":1333525854,"post_id":10006853,"comment_id":12792802,"body_markdown":"You can add some code so we can understand what is wrong.","body":"You can add some code so we can understand what is wrong."},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1333528727,"post_id":10006853,"comment_id":12793640,"body_markdown":"@RahulBorkar *&quot;to receive something personally from you&quot;*  It does not count for much, but you already have.  I regularly see answers from you that make me think *&quot;Great answer, now I don&#39;t have to deal with that.  +1&quot;*.  ;)","body":"@RahulBorkar <i>&quot;to receive something personally from you&quot;</i>  It does not count for much, but you already have.  I regularly see answers from you that make me think <i>&quot;Great answer, now I don&#39;t have to deal with that.  +1&quot;</i>.  ;)"},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1333529167,"post_id":10006853,"comment_id":12793815,"body_markdown":"*&quot;all the methods here are in the same class&quot;*  Thanks for the edit, but note that I still think you are more likely to get help by posting an **SSCCE**, rather than uncompilable code snippets.","body":"<i>&quot;all the methods here are in the same class&quot;</i>  Thanks for the edit, but note that I still think you are more likely to get help by posting an <b>SSCCE</b>, rather than uncompilable code snippets."},{"owner":{"account_id":1333615,"reputation":1556,"user_id":1276897,"accept_rate":77,"display_name":"Zik"},"score":0,"creation_date":1333529178,"post_id":10006853,"comment_id":12793821,"body_markdown":"my class implements the mouse listener of course","body":"my class implements the mouse listener of course"},{"owner":{"account_id":1333615,"reputation":1556,"user_id":1276897,"accept_rate":77,"display_name":"Zik"},"score":0,"creation_date":1333529217,"post_id":10006853,"comment_id":12793837,"body_markdown":"@AndrewThompson ok. sorry, I&#39;m new here","body":"@AndrewThompson ok. sorry, I&#39;m new here"},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1333529301,"post_id":10006853,"comment_id":12793874,"body_markdown":"No need to be sorry.  We were all new at one stage, and some very experienced folk have not heard of an SSCCE.  :)  (In addition to that, many code problems ***are solved*** without an SSCCE.)","body":"No need to be sorry.  We were all new at one stage, and some very experienced folk have not heard of an SSCCE.  :)  (In addition to that, many code problems <b><i>are solved</i></b> without an SSCCE.)"}],"answers":[{"tags":[],"owner":{"account_id":1054151,"reputation":24498,"user_id":1057230,"accept_rate":100,"display_name":"nIcE cOw"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1333537748,"creation_date":1333537131,"answer_id":10009740,"question_id":10006853,"body_markdown":"Stop using `null` Layout, seems like that can be one of the issues regarding this. Your `JFrame` appears sort of `BLACK` to me, is this some `THEME` or a new `LOOK AND FEEL` you are using, that can be the cause of this thing too. Here check this out, it&#39;s working flawlessly here with this code : \r\n\r\n    import java.awt.*;\r\n    import java.awt.event.*;\r\n    import javax.swing.*;\r\n    \r\n    public class ButtonPopUp\r\n    {\r\n    \tprivate static final int SIZE = 30;\r\n    \tprivate JButton[] button = new JButton[SIZE];\r\n    \tprivate JPopupMenu popup = new JPopupMenu(&quot;Hello World&quot;);\r\n    \t\r\n    \tprivate void createAndDisplayGUI()\r\n    \t{\r\n    \t\tJFrame frame = new JFrame(&quot;Button POP UP Example&quot;);\r\n    \t\tframe.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\r\n    \t\tframe.setLocationByPlatform(true);\r\n    \t\t\r\n    \t\tfinal JPanel contentPane = new JPanel();\r\n    \t\tcontentPane.setLayout(new GridLayout(0, 5));\r\n    \t\t\r\n    \t\tJMenuItem menuItem1 = new JMenuItem(&quot;Menu Item 1&quot;);\r\n    \t\tJMenuItem menuItem2 = new JMenuItem(&quot;Menu Item 2&quot;);\r\n    \t\t//popup.add(greetings);\r\n    \t\tpopup.insert(menuItem1, 0);\r\n    \t\tpopup.insert(menuItem2, 1);\r\n    \t\t\r\n    \t\tfor (int i = 0; i &lt; SIZE; i++)\r\n    \t\t{\r\n    \t\t\tbutton[i] = new JButton();\r\n    \t\t\tbutton[i].setBorder(BorderFactory.createEtchedBorder());\r\n    \t\t\tbutton[i].addMouseListener(new MouseAdapter()\r\n                {\r\n                \tpublic void mouseClicked(MouseEvent me)\r\n                \t{\r\n                \t\tSystem.out.println(&quot;I am WORKING!!&quot;);\r\n                \t\tpopup.show((JComponent)me.getSource(), me.getX(), me.getY());\r\n                \t}\r\n                });\r\n                contentPane.add(button[i]);\r\n    \t\t}\r\n    \t\t\r\n    \t\tframe.getContentPane().add(contentPane);\r\n    \t\tframe.setSize(175, 250);\r\n    \t\tframe.setVisible(true);\r\n    \t}\r\n    \t\r\n    \tpublic static void main(String... args)\r\n    \t{\r\n    \t\tSwingUtilities.invokeLater(new Runnable()\r\n            {\r\n    \t\t\tpublic void run()\r\n    \t\t\t{\r\n    \t\t\t\tnew ButtonPopUp().createAndDisplayGUI();\r\n    \t\t\t}\r\n            });\r\n    \t}\r\n    }\r\n\r\nHere is the output : \r\n\r\n![Before Event][1] ![After Event][2]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/VgBwG.png\r\n  [2]: http://i.stack.imgur.com/CFWLF.png","title":"JButtons disappear after the popup menu shows","body":"<p>Stop using <code>null</code> Layout, seems like that can be one of the issues regarding this. Your <code>JFrame</code> appears sort of <code>BLACK</code> to me, is this some <code>THEME</code> or a new <code>LOOK AND FEEL</code> you are using, that can be the cause of this thing too. Here check this out, it's working flawlessly here with this code : </p>\n\n<pre><code>import java.awt.*;\nimport java.awt.event.*;\nimport javax.swing.*;\n\npublic class ButtonPopUp\n{\n    private static final int SIZE = 30;\n    private JButton[] button = new JButton[SIZE];\n    private JPopupMenu popup = new JPopupMenu(\"Hello World\");\n\n    private void createAndDisplayGUI()\n    {\n        JFrame frame = new JFrame(\"Button POP UP Example\");\n        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\n        frame.setLocationByPlatform(true);\n\n        final JPanel contentPane = new JPanel();\n        contentPane.setLayout(new GridLayout(0, 5));\n\n        JMenuItem menuItem1 = new JMenuItem(\"Menu Item 1\");\n        JMenuItem menuItem2 = new JMenuItem(\"Menu Item 2\");\n        //popup.add(greetings);\n        popup.insert(menuItem1, 0);\n        popup.insert(menuItem2, 1);\n\n        for (int i = 0; i &lt; SIZE; i++)\n        {\n            button[i] = new JButton();\n            button[i].setBorder(BorderFactory.createEtchedBorder());\n            button[i].addMouseListener(new MouseAdapter()\n            {\n                public void mouseClicked(MouseEvent me)\n                {\n                    System.out.println(\"I am WORKING!!\");\n                    popup.show((JComponent)me.getSource(), me.getX(), me.getY());\n                }\n            });\n            contentPane.add(button[i]);\n        }\n\n        frame.getContentPane().add(contentPane);\n        frame.setSize(175, 250);\n        frame.setVisible(true);\n    }\n\n    public static void main(String... args)\n    {\n        SwingUtilities.invokeLater(new Runnable()\n        {\n            public void run()\n            {\n                new ButtonPopUp().createAndDisplayGUI();\n            }\n        });\n    }\n}\n</code></pre>\n\n<p>Here is the output : </p>\n\n<p><img src=\"https://i.stack.imgur.com/VgBwG.png\" alt=\"Before Event\"> <img src=\"https://i.stack.imgur.com/CFWLF.png\" alt=\"After Event\"></p>\n"}],"owner":{"account_id":1333615,"reputation":1556,"user_id":1276897,"accept_rate":77,"display_name":"Zik"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1472,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":10009740,"answer_count":1,"score":2,"last_activity_date":1692962792,"creation_date":1333525221,"question_id":10006853,"body_markdown":"I added listeners to my JButtons for the popup menu but when the popup menu appears the JButtons disappear and I would need to hover my cursor on the buttons to make them appear again. Why is it like this?\r\n\r\n(all the methods here are in the same class)\r\n\r\n    public Inventory() {\r\n\t\tsetLayout(null);\r\n\t\tsetBounds(0, 0, 175, 210);\r\n\t\t\r\n\t\tinitPopupMenu(); // this just sets what is inside the popup menu\r\n\t\tint x;\r\n                // 30 buttons\r\n\t\tfor(x = 0; x &lt; 30; x++) {\r\n\t\t\tbutton[x] = new JButton();\r\n\t\t\tadd(button[x]);\r\n\t\t\tbutton[x].addMouseListener(this);\r\n\t\t}\r\n\r\n\t\tx = 0;\r\n                // it&#39;s a grid of buttons\r\n\t\tfor(int i = 0; i &lt; 5; i++) \r\n\t\t\tfor(int j = 0; j &lt; 6; j++) {\r\n\t\t\t\tbutton[x].setBounds(i*35+1,j*35+1, 33,33);\t\r\n\t\t\t\tx++;\r\n\t\t\t}\r\n\t\t\r\n\t\t\r\n    }\r\n\r\n    public void mouseClicked(MouseEvent e) {\r\n\t\tfor(int j = 0; j &lt; 30; j++) // i tried this one but it still disappears\r\n\t\t\tbutton[j].repaint();\r\n\t\t\r\n\t\tfor(int i = 0; i &lt; 30; i++) {\r\n\t\t\tif(e.getSource() == button[i]) {\r\n\t\t\t\tSystem.out.println(&quot;You pressed Button &quot;+i);\r\n\t\t\t\tpopup.show(e.getComponent(), e.getX(), e.getY());\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\nThis is what happens, [![jbuttons][1]][1]  \n&lt;sub&gt;(source: [uploadir.com](https://uploadir.com/u/115577))&lt;/sub&gt;  \n\r\n[![popup][2]][2]  \n&lt;sub&gt;(source: [uploadir.com](https://uploadir.com/u/4h9t6n))&lt;/sub&gt;  \n\n\n [1]: https://i.stack.imgur.com/u7NnP.jpg\n [2]: https://i.stack.imgur.com/kQwUe.jpg","title":"JButtons disappear after the popup menu shows","body":"<p>I added listeners to my JButtons for the popup menu but when the popup menu appears the JButtons disappear and I would need to hover my cursor on the buttons to make them appear again. Why is it like this?</p>\n<p>(all the methods here are in the same class)</p>\n<pre><code>public Inventory() {\n    setLayout(null);\n    setBounds(0, 0, 175, 210);\n    \n    initPopupMenu(); // this just sets what is inside the popup menu\n    int x;\n            // 30 buttons\n    for(x = 0; x &lt; 30; x++) {\n        button[x] = new JButton();\n        add(button[x]);\n        button[x].addMouseListener(this);\n    }\n\n    x = 0;\n            // it's a grid of buttons\n    for(int i = 0; i &lt; 5; i++) \n        for(int j = 0; j &lt; 6; j++) {\n            button[x].setBounds(i*35+1,j*35+1, 33,33);  \n            x++;\n        }\n    \n    \n}\n\npublic void mouseClicked(MouseEvent e) {\n    for(int j = 0; j &lt; 30; j++) // i tried this one but it still disappears\n        button[j].repaint();\n    \n    for(int i = 0; i &lt; 30; i++) {\n        if(e.getSource() == button[i]) {\n            System.out.println(&quot;You pressed Button &quot;+i);\n            popup.show(e.getComponent(), e.getX(), e.getY());\n        }\n        \n    }\n    \n}\n</code></pre>\n<p>This is what happens, <a href=\"https://i.stack.imgur.com/u7NnP.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/u7NnP.jpg\" alt=\"jbuttons\" /></a><br />\n<sub>(source: <a href=\"https://uploadir.com/u/115577\" rel=\"nofollow noreferrer\">uploadir.com</a>)</sub></p>\n<p><a href=\"https://i.stack.imgur.com/kQwUe.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kQwUe.jpg\" alt=\"popup\" /></a><br />\n<sub>(source: <a href=\"https://uploadir.com/u/4h9t6n\" rel=\"nofollow noreferrer\">uploadir.com</a>)</sub></p>\n"},{"tags":["java","maven","maven-surefire-plugin"],"answers":[{"tags":[],"owner":{"account_id":10807091,"reputation":972,"user_id":7949076,"display_name":"coffman21"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692962744,"creation_date":1692962744,"answer_id":76976756,"question_id":76976675,"body_markdown":"After digging a while on docs page, I found [this setting][1]:\r\n\r\n&gt; `&lt;systemPropertyVariables&gt;`  \r\n&gt; List of System properties to pass to a provider.\r\n\r\nThat worked, however special properties like `-Xmx` [must be set up externally:][2]  \r\n&gt; Some system properties must be set on the command line of the forked VM, and cannot be set after the VM has been started. These properties must be added to the `argLine` parameter of the Surefire plugin.\r\n\r\nSo my plugin configuration now looks like:\r\n``` lang-pom\r\n&lt;plugin&gt;\r\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n    &lt;configuration&gt;\r\n        &lt;forkCount&gt;0&lt;/forkCount&gt;\r\n        &lt;systemPropertyVariables&gt;\r\n            &lt;spring.profiles.active&gt;${spring.profiles.active}&lt;/spring.profiles.active&gt;\r\n        &lt;/systemPropertyVariables&gt;\r\n    &lt;/configuration&gt;\r\n&lt;/plugin&gt;\r\n```\r\n  [1]: https://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html#systempropertyvariables\r\n  [2]: https://maven.apache.org/surefire/maven-surefire-plugin/examples/system-properties.html#special-vm-properties\r\n\r\n","title":"maven-surefire-plugin ignores argLine when setting forkCount=0","body":"<p>After digging a while on docs page, I found <a href=\"https://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html#systempropertyvariables\" rel=\"nofollow noreferrer\">this setting</a>:</p>\n<blockquote>\n<p><code>&lt;systemPropertyVariables&gt;</code><br />\nList of System properties to pass to a provider.</p>\n</blockquote>\n<p>That worked, however special properties like <code>-Xmx</code> <a href=\"https://maven.apache.org/surefire/maven-surefire-plugin/examples/system-properties.html#special-vm-properties\" rel=\"nofollow noreferrer\">must be set up externally:</a></p>\n<blockquote>\n<p>Some system properties must be set on the command line of the forked VM, and cannot be set after the VM has been started. These properties must be added to the <code>argLine</code> parameter of the Surefire plugin.</p>\n</blockquote>\n<p>So my plugin configuration now looks like:</p>\n<pre class=\"lang-pom prettyprint-override\"><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n    &lt;configuration&gt;\n        &lt;forkCount&gt;0&lt;/forkCount&gt;\n        &lt;systemPropertyVariables&gt;\n            &lt;spring.profiles.active&gt;${spring.profiles.active}&lt;/spring.profiles.active&gt;\n        &lt;/systemPropertyVariables&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n"}],"owner":{"account_id":10807091,"reputation":972,"user_id":7949076,"display_name":"coffman21"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":123,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1692962744,"creation_date":1692962100,"question_id":76976675,"body_markdown":"I want to update build of my project to not forking process, due to limitation of provided build agents. We run two profiles on each build, with different databases used for testing, each profile set system property like so:\r\n\r\n``` lang-pom\r\n&lt;build&gt;\r\n    &lt;plugins&gt;\r\n        &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n            &lt;configuration&gt;\r\n                &lt;argLine&gt;-Dspring.profiles.active=${spring.profiles.active}&lt;/argLine&gt;\r\n            &lt;/configuration&gt;\r\n        &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n&lt;/build&gt;\r\n\r\n&lt;profiles&gt;\r\n    &lt;profile&gt;\r\n        &lt;id&gt;ignite&lt;/id&gt;\r\n        &lt;properties&gt;\r\n            &lt;spring.profiles.active&gt;ignite&lt;/spring.profiles.active&gt;\r\n        &lt;/properties&gt;\r\n    &lt;/profile&gt;\r\n    &lt;profile&gt;\r\n        &lt;id&gt;oracle&lt;/id&gt;\r\n        &lt;properties&gt;\r\n            &lt;spring.profiles.active&gt;oracle&lt;/spring.profiles.active&gt;\r\n        &lt;/properties&gt;\r\n    &lt;/profile&gt;\r\n&lt;/profiles&gt;\r\n```\r\nThen different Spring configurations are used depending on `@Profile`.  \r\nNow I want to run tests without forking VM, so I configure plugin accordingly:\r\n```  lang-pom\r\n&lt;plugin&gt;\r\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n    &lt;configuration&gt;\r\n        &lt;forkCount&gt;0&lt;/forkCount&gt;\r\n        &lt;argLine&gt;-Dspring.profiles.active=${spring.profiles.active}&lt;/argLine&gt;\r\n    &lt;/configuration&gt;\r\n&lt;/plugin&gt;\r\n```\r\nHowever, surefire-plugin does not use `argLine` on tests run, resulting in empty `spring.profiles.active` system property failure of tests on incomplete configured project. How  do I work this around?","title":"maven-surefire-plugin ignores argLine when setting forkCount=0","body":"<p>I want to update build of my project to not forking process, due to limitation of provided build agents. We run two profiles on each build, with different databases used for testing, each profile set system property like so:</p>\n<pre class=\"lang-pom prettyprint-override\"><code>&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;argLine&gt;-Dspring.profiles.active=${spring.profiles.active}&lt;/argLine&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n\n&lt;profiles&gt;\n    &lt;profile&gt;\n        &lt;id&gt;ignite&lt;/id&gt;\n        &lt;properties&gt;\n            &lt;spring.profiles.active&gt;ignite&lt;/spring.profiles.active&gt;\n        &lt;/properties&gt;\n    &lt;/profile&gt;\n    &lt;profile&gt;\n        &lt;id&gt;oracle&lt;/id&gt;\n        &lt;properties&gt;\n            &lt;spring.profiles.active&gt;oracle&lt;/spring.profiles.active&gt;\n        &lt;/properties&gt;\n    &lt;/profile&gt;\n&lt;/profiles&gt;\n</code></pre>\n<p>Then different Spring configurations are used depending on <code>@Profile</code>.<br />\nNow I want to run tests without forking VM, so I configure plugin accordingly:</p>\n<pre class=\"lang-pom prettyprint-override\"><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n    &lt;configuration&gt;\n        &lt;forkCount&gt;0&lt;/forkCount&gt;\n        &lt;argLine&gt;-Dspring.profiles.active=${spring.profiles.active}&lt;/argLine&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>However, surefire-plugin does not use <code>argLine</code> on tests run, resulting in empty <code>spring.profiles.active</code> system property failure of tests on incomplete configured project. How  do I work this around?</p>\n"},{"tags":["java","docker","gitlab-ci"],"answers":[{"tags":[],"owner":{"account_id":7575391,"reputation":32359,"user_id":5747944,"display_name":"sytech"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1644843628,"creation_date":1644843628,"answer_id":71112311,"question_id":71109409,"body_markdown":"The image `gradle:jdk16` does not include the docker client. You&#39;ll have to install it in your job. Additionally, you&#39;ll need to use the service `docker:dind` in your `services:` configuration (not `docker:latest`)\r\n\r\n```yaml\r\ntest:\r\n  stage: test\r\n  image: gradle:jdk16\r\n  services:\r\n    - docker:dind # use the docker-in-docker image\r\n  before_script: # install docker\r\n    - apt update &amp;&amp; apt install --no-install-recommends -y docker.io  \r\n  script:\r\n    - docker --version\r\n```\r\n\r\nRunning this on gitlab.com runners, you should see an output like this:\r\n\r\n[![job on gitlab.com][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/KCNKM.png","title":"Gitlab-ci docker inside java image","body":"<p>The image <code>gradle:jdk16</code> does not include the docker client. You'll have to install it in your job. Additionally, you'll need to use the service <code>docker:dind</code> in your <code>services:</code> configuration (not <code>docker:latest</code>)</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>test:\n  stage: test\n  image: gradle:jdk16\n  services:\n    - docker:dind # use the docker-in-docker image\n  before_script: # install docker\n    - apt update &amp;&amp; apt install --no-install-recommends -y docker.io  \n  script:\n    - docker --version\n</code></pre>\n<p>Running this on gitlab.com runners, you should see an output like this:</p>\n<p><a href=\"https://i.stack.imgur.com/KCNKM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KCNKM.png\" alt=\"job on gitlab.com\" /></a></p>\n"},{"tags":[],"owner":{"account_id":1948280,"reputation":185,"user_id":1752949,"accept_rate":36,"display_name":"Rafael"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692962276,"creation_date":1692962276,"answer_id":76976701,"question_id":71109409,"body_markdown":"We finally realized that our gitlab runner had locked the docker-in-docker so we couldn&#39;t start testcontainer for aur test in gitlab. Our solution was to use the kafka a postresql services provided by gitlab:\r\n\r\n\r\nhttps://docs.gitlab.com/ee/ci/services/","title":"Gitlab-ci docker inside java image","body":"<p>We finally realized that our gitlab runner had locked the docker-in-docker so we couldn't start testcontainer for aur test in gitlab. Our solution was to use the kafka a postresql services provided by gitlab:</p>\n<p><a href=\"https://docs.gitlab.com/ee/ci/services/\" rel=\"nofollow noreferrer\">https://docs.gitlab.com/ee/ci/services/</a></p>\n"}],"owner":{"account_id":1948280,"reputation":185,"user_id":1752949,"accept_rate":36,"display_name":"Rafael"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1062,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76976701,"answer_count":2,"score":0,"last_activity_date":1692962276,"creation_date":1644829853,"question_id":71109409,"body_markdown":"To use a integration test library https://www.testcontainers.org/&quot; I need a image with java a docker installed at same time.\r\n\r\nI&#39;m trying o use this stage:\r\n```\r\ntest:\r\n  stage: test\r\n  image: gradle:jdk16\r\n  services:\r\n    - docker:latest\r\n  script:\r\n    - docker --version\r\n    - chmod +x ./gradlew\r\n    - export GRADLE_USER_HOME=`pwd`/.gradle\r\n    - ./gradlew test  --stacktrace\r\n  rules:\r\n    - !reference [.rules_merge_request, rules]\r\n```\r\nBut It does not work:\r\n```\r\n$ docker --version\r\n/scripts-33119345-2089057982/step_script: line 154: docker: command not found\r\n```\r\n\r\nAny help?","title":"Gitlab-ci docker inside java image","body":"<p>To use a integration test library <a href=\"https://www.testcontainers.org/%22\" rel=\"nofollow noreferrer\">https://www.testcontainers.org/&quot;</a> I need a image with java a docker installed at same time.</p>\n<p>I'm trying o use this stage:</p>\n<pre><code>test:\n  stage: test\n  image: gradle:jdk16\n  services:\n    - docker:latest\n  script:\n    - docker --version\n    - chmod +x ./gradlew\n    - export GRADLE_USER_HOME=`pwd`/.gradle\n    - ./gradlew test  --stacktrace\n  rules:\n    - !reference [.rules_merge_request, rules]\n</code></pre>\n<p>But It does not work:</p>\n<pre><code>$ docker --version\n/scripts-33119345-2089057982/step_script: line 154: docker: command not found\n</code></pre>\n<p>Any help?</p>\n"},{"tags":["java","spring","dependencies","autowired","circular-dependency"],"answers":[{"tags":[],"owner":{"account_id":7152799,"reputation":331,"user_id":5466236,"display_name":"StrongPoint"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661163430,"creation_date":1661160245,"answer_id":73442862,"question_id":73421264,"body_markdown":"Circular Dependencies are usually a sign of bad design and should be avoided, as you correctly mentioned. To improve your design you might want to get familiar with the SOLID principles. Especially, the Single Responsibility Principle. \r\n\r\nFrom your description, ServiceB seems to be doing more than one thing. It validates your event and makes sure a ServiceC is called to created a new event. Instead you could have both ServiceB and ServiceC as dependencies of ServiceA. That would get rid of your circular dependency. Maybe this helps: \r\n\r\n    void process(Event event) {\r\n      if(!serviceB.isValid(event)) {\r\n        Event correctedEvent = serviceC.correctEvent(event);\r\n        processValidEvent(correctedEvent);\r\n      }\r\n      processValidEvent(event);\r\n    }","title":"Circular dependencies solutions?","body":"<p>Circular Dependencies are usually a sign of bad design and should be avoided, as you correctly mentioned. To improve your design you might want to get familiar with the SOLID principles. Especially, the Single Responsibility Principle.</p>\n<p>From your description, ServiceB seems to be doing more than one thing. It validates your event and makes sure a ServiceC is called to created a new event. Instead you could have both ServiceB and ServiceC as dependencies of ServiceA. That would get rid of your circular dependency. Maybe this helps:</p>\n<pre><code>void process(Event event) {\n  if(!serviceB.isValid(event)) {\n    Event correctedEvent = serviceC.correctEvent(event);\n    processValidEvent(correctedEvent);\n  }\n  processValidEvent(event);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8742544,"reputation":33,"user_id":6539123,"display_name":"singla_02"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692962138,"creation_date":1692957363,"answer_id":76976142,"question_id":73421264,"body_markdown":"Service C requires Service A but it not necessarily has to be a blocker for its instance creation. Instead of autowiring Service A in Service C, declare it as non-final field. A setter method to be exposed which could be called from `@PostConstruct` of Service A. Hence, service A is providing its instance to Service C after creation.\r\n\r\nRef: [Circular Dependencies in Spring][1]\r\n\r\n\r\n  [1]: https://www.baeldung.com/circular-dependencies-in-spring#4-use-postconstruct","title":"Circular dependencies solutions?","body":"<p>Service C requires Service A but it not necessarily has to be a blocker for its instance creation. Instead of autowiring Service A in Service C, declare it as non-final field. A setter method to be exposed which could be called from <code>@PostConstruct</code> of Service A. Hence, service A is providing its instance to Service C after creation.</p>\n<p>Ref: <a href=\"https://www.baeldung.com/circular-dependencies-in-spring#4-use-postconstruct\" rel=\"nofollow noreferrer\">Circular Dependencies in Spring</a></p>\n"}],"owner":{"account_id":26110461,"reputation":1,"user_id":19804483,"display_name":"CraigL"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":378,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1692962138,"creation_date":1660936135,"question_id":73421264,"body_markdown":"I recently upgraded to the latest Spring, and I&#39;m now getting circular dependencies issues (I know the default is now no longer true to allow for circular dependencies) but even setting it to true still causes issues...  A perfect time to update my code:\r\n\r\nMy problem is this (where serviceA is autowired and has autowired service B, service B has autowired serviceC, service C has autowired serviceA):\r\n\r\n  \r\n\r\n      ---&gt;---serviceA\r\n      |\t       |\t\r\n      |       \\/\r\n      |\t    serviceB\r\n      |\t       |\r\n      |       \\/\r\n      ---&lt;---serviceC\r\n\r\n  \r\n\r\nThe above (very simplified) scenario could be that ServiceA processes an event.  Service B checks the event -if it&#39;s not valid it sends it to ServiceC that creates a corrected event and resubmits to ServiceA....  I want the services to be singletons (and autowiring seems to provide the perfect answer with singletons in a context)\r\n\r\nI&#39;ve tried using autowired setters and lazy initialization but no luck and am still getting circular dependencies.  I know the documentation says to not use circular dependencies -which obviously I would prefer -but what is the best way to do this? Or can I not use autowiring and have to use a singleton pattern in serviceA to get it from within serviceC?  And in which case if I have any other autowiring in serviceA (such as the autowired serviceB!), I then have to apply a singleton pattern to serviceB, etc, etc (which would be a pain as wouldn&#39;t this negate the advantage of using autowiring?).","title":"Circular dependencies solutions?","body":"<p>I recently upgraded to the latest Spring, and I'm now getting circular dependencies issues (I know the default is now no longer true to allow for circular dependencies) but even setting it to true still causes issues...  A perfect time to update my code:</p>\n<p>My problem is this (where serviceA is autowired and has autowired service B, service B has autowired serviceC, service C has autowired serviceA):</p>\n<pre><code>  ---&gt;---serviceA\n  |        |    \n  |       \\/\n  |     serviceB\n  |        |\n  |       \\/\n  ---&lt;---serviceC\n</code></pre>\n<p>The above (very simplified) scenario could be that ServiceA processes an event.  Service B checks the event -if it's not valid it sends it to ServiceC that creates a corrected event and resubmits to ServiceA....  I want the services to be singletons (and autowiring seems to provide the perfect answer with singletons in a context)</p>\n<p>I've tried using autowired setters and lazy initialization but no luck and am still getting circular dependencies.  I know the documentation says to not use circular dependencies -which obviously I would prefer -but what is the best way to do this? Or can I not use autowiring and have to use a singleton pattern in serviceA to get it from within serviceC?  And in which case if I have any other autowiring in serviceA (such as the autowired serviceB!), I then have to apply a singleton pattern to serviceB, etc, etc (which would be a pain as wouldn't this negate the advantage of using autowiring?).</p>\n"},{"tags":["java","spring-webflux","project-reactor","spring-data-r2dbc","blockhound"],"comments":[{"owner":{"account_id":78088,"reputation":35600,"user_id":222467,"accept_rate":67,"display_name":"Igor Artamonov"},"score":0,"creation_date":1692964872,"post_id":76976622,"comment_id":135700038,"body_markdown":"As stacktrace shows, you have Hibernate trying to replace a message placesholder with data in classpath, and to do so it needs an IO operation, which is blocking","body":"As stacktrace shows, you have Hibernate trying to replace a message placesholder with data in classpath, and to do so it needs an IO operation, which is blocking"},{"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1693234064,"post_id":76976622,"comment_id":135729904,"body_markdown":"Can you share with us, please, your `ServicesApi.getServiceIntegrations()` which is marked with `@Validated`?","body":"Can you share with us, please, your <code>ServicesApi.getServiceIntegrations()</code> which is marked with <code>@Validated</code>?"}],"owner":{"account_id":8921227,"reputation":1,"user_id":6673576,"display_name":"Ifeanyi Onyejekwe"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":124,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692961630,"creation_date":1692961630,"question_id":76976622,"body_markdown":"I added postgres support to my application, but when I try to run the tests, I keep getting a blocking call error from blockhound, and I&#39;m not sure why this is happening. The application it&#39;s runs fine, only the tests fail with the blocking call error. \r\n\r\nThese are my app dependencies:\r\n\r\n        plugins {\r\n        id &#39;org.springframework.boot&#39;\r\n    }\r\n    \r\n        dependencies {\r\n            annotationProcessor &#39;org.projectlombok:lombok&#39;\r\n            testAnnotationProcessor &#39;org.projectlombok:lombok&#39;\r\n            compileOnly &#39;org.projectlombok:lombok&#39;\r\n            testCompileOnly &#39;org.projectlombok:lombok&#39;\r\n        implementation &#39;io.projectreactor:reactor-tools&#39;\r\n    \r\n        implementation &#39;software.amazon.awssdk:dynamodb-enhanced&#39;\r\n    \r\n        implementation &#39;org.springframework.boot:spring-boot-starter-webflux&#39;\r\n        implementation &#39;org.springframework.boot:spring-boot-starter-actuator&#39;\r\n        implementation &#39;org.springframework.boot:spring-boot-starter-validation&#39;\r\n        implementation &#39;org.springframework.boot:spring-boot-starter-data-redis-reactive&#39;\r\n    \r\n        implementation &#39;org.springframework.boot:spring-boot-starter-data-r2dbc&#39;\r\n        implementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\r\n        implementation &#39;io.r2dbc:r2dbc-postgresql&#39;\r\n        implementation &#39;org.postgresql:postgresql&#39;\r\n        implementation &#39;org.flywaydb:flyway-core&#39;\r\n    \r\n        implementation &#39;com.github.bsideup.liiklus:client&#39;\r\n    \r\n        implementation &#39;com.auth0:java-jwt&#39;\r\n    \r\n        implementation &#39;org.springdoc:springdoc-openapi-webflux-core&#39;\r\n        implementation &#39;org.springdoc:springdoc-openapi-security&#39;\r\n        implementation &#39;org.springdoc:springdoc-openapi-webflux-ui&#39;\r\n    \r\n        runtimeOnly &#39;io.sentry:sentry-logback&#39;\r\n    \r\n        testRuntimeOnly &#39;io.sentry:sentry-logback&#39;\r\n    \r\n        testImplementation &#39;com.amazonaws:aws-java-sdk-dynamodb&#39;\r\n        testImplementation &#39;com.github.bsideup.liiklus:testing&#39;\r\n        testImplementation &#39;io.projectreactor.tools:blockhound-junit-platform&#39;\r\n        testImplementation &#39;io.projectreactor:reactor-test&#39;\r\n        testImplementation &#39;io.rest-assured:rest-assured&#39;\r\n        testImplementation &#39;org.assertj:assertj-core&#39;\r\n        testImplementation &#39;org.awaitility:awaitility&#39;\r\n        testImplementation &#39;org.bouncycastle:bcprov-jdk15on&#39;\r\n        testImplementation &#39;org.mock-server:mockserver-client-java&#39;\r\n        testImplementation &#39;org.mock-server:mockserver-netty&#39;\r\n        testImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n        testImplementation &#39;org.testcontainers:localstack&#39;\r\n        testImplementation &quot;org.testcontainers:testcontainers&quot;\r\n        testImplementation &#39;org.testcontainers:mockserver&#39;\r\n        testImplementation &quot;org.testcontainers:junit-jupiter&quot;\r\n    \r\n        testImplementation &quot;org.testcontainers:postgresql&quot;\r\n        testImplementation &quot;org.testcontainers:r2dbc&quot;\r\n    \r\n        testRuntimeOnly &quot;net.java.dev.jna:jna:5.12.1&quot;\r\n    \r\n        //http://github.com/gradle/gradle/issues/8806 requires platform launcher in test runtime explicitly\r\n        testRuntimeOnly &#39;org.junit.platform:junit-platform-launcher&#39;\r\n    }\r\n\r\nThen I added these dependencies in the project build.gradle:\r\n\r\n            dependency &#39;io.r2dbc:r2dbc-postgresql:0.8.12.RELEASE&#39;\r\n            dependency &#39;org.flywaydb:flyway-core:8.5.10&#39;\r\n            testImplementation &#39;org.postgresql:postgresql&#39;\r\n\r\n\r\nThen I have a test container logic like so:\r\n\r\n    var jdbcUrl = postgresqlContainer.getJdbcUrl();\r\n        var r2dbcUrl = jdbcUrl.replaceAll(&quot;jdbc&quot;, &quot;r2dbc&quot;);\r\n\r\n        log.info(&quot;Set JDBC url: {}&quot;, jdbcUrl);\r\n        log.info(&quot;Set R2DBC url: {}&quot;, r2dbcUrl);\r\n\r\n        System.getProperties().put(&quot;spring.flyway.url&quot;, jdbcUrl);\r\n        System.getProperties().put(&quot;spring.r2dbc.url&quot;, r2dbcUrl);\r\n\r\n        Flyway flyway = Flyway.configure().dataSource(\r\n                postgresqlContainer.getJdbcUrl(),\r\n                postgresqlContainer.getUsername(),\r\n                postgresqlContainer.getPassword()\r\n        ).load();\r\n\r\n        flyway.migrate();\r\n\r\nFinally I had some configurations in app.yml, for setting test postgres url and credentials. And that&#39;s basically it. But when I run the tests, I get this error/stack trace:\r\n\r\n        reactor.blockhound.BlockingOperationError: Blocking call! java.io.RandomAccessFile#readBytes\r\n    \tat java.base/java.io.RandomAccessFile.readBytes(RandomAccessFile.java)\r\n    \tSuppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: \r\n    Assembly trace from producer [reactor.core.publisher.MonoFlatMap] :\r\n    \treactor.core.publisher.Mono.flatMap\r\n    \torg.springframework.web.reactive.result.method.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:137)\r\n    Error has been observed at the following site(s):\r\n    \t|_           Mono.flatMap ⇢ at org.springframework.web.reactive.result.method.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:137)\r\n    \t|_                        ⇢ at org.springframework.web.reactive.result.method.annotation.RequestMappingHandlerAdapter.lambda$handle$1(RequestMappingHandlerAdapter.java:199)\r\n    \t|_             Mono.defer ⇢ at org.springframework.web.reactive.result.method.annotation.RequestMappingHandlerAdapter.handle(RequestMappingHandlerAdapter.java:199)\r\n    \t|_              Mono.then ⇢ at org.springframework.web.reactive.result.method.annotation.RequestMappingHandlerAdapter.handle(RequestMappingHandlerAdapter.java:199)\r\n    \t|_          Mono.doOnNext ⇢ at org.springframework.web.reactive.result.method.annotation.RequestMappingHandlerAdapter.handle(RequestMappingHandlerAdapter.java:200)\r\n    \t|_          Mono.doOnNext ⇢ at org.springframework.web.reactive.result.method.annotation.RequestMappingHandlerAdapter.handle(RequestMappingHandlerAdapter.java:201)\r\n    \t|_             Mono.error ⇢ at org.springframework.web.reactive.result.method.annotation.RequestMappingHandlerAdapter.handleException(RequestMappingHandlerAdapter.java:235)\r\n    \t|_                        ⇢ at org.springframework.web.reactive.result.method.annotation.RequestMappingHandlerAdapter.lambda$handle$0(RequestMappingHandlerAdapter.java:195)\r\n    \t|_     Mono.onErrorResume ⇢ at org.springframework.web.reactive.result.method.annotation.RequestMappingHandlerAdapter.handle(RequestMappingHandlerAdapter.java:202)\r\n    \t|_                        ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:120)\r\n    \t|_             Mono.defer ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.filter(DefaultWebFilterChain.java:119)\r\n    \t|_                        ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:120)\r\n    \t|_             Mono.defer ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.filter(DefaultWebFilterChain.java:119)\r\n    \t|_     Mono.switchIfEmpty ⇢ at org.springframework.security.web.server.authorization.AuthorizationWebFilter.filter(AuthorizationWebFilter.java:55)\r\n    \t|_             checkpoint ⇢ org.springframework.security.web.server.authorization.AuthorizationWebFilter [DefaultWebFilterChain]\r\n    \t|_                        ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:120)\r\n    \t|_             Mono.defer ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.filter(DefaultWebFilterChain.java:119)\r\n    \t|_     Mono.onErrorResume ⇢ at org.springframework.security.web.server.authorization.ExceptionTranslationWebFilter.filter(ExceptionTranslationWebFilter.java:44)\r\n    \t|_             checkpoint ⇢ org.springframework.security.web.server.authorization.ExceptionTranslationWebFilter [DefaultWebFilterChain]\r\n    \t|_                        ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:120)\r\n    \t|_             Mono.defer ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.filter(DefaultWebFilterChain.java:119)\r\n    \t|_              Mono.then ⇢ at org.springframework.security.web.server.authentication.logout.LogoutWebFilter.filter(LogoutWebFilter.java:62)\r\n    \t|_     Mono.switchIfEmpty ⇢ at org.springframework.security.web.server.authentication.logout.LogoutWebFilter.filter(LogoutWebFilter.java:62)\r\n    \t|_               Mono.map ⇢ at org.springframework.security.web.server.authentication.logout.LogoutWebFilter.filter(LogoutWebFilter.java:62)\r\n    \t|_           Mono.flatMap ⇢ at org.springframework.security.web.server.authentication.logout.LogoutWebFilter.filter(LogoutWebFilter.java:63)\r\n    \t|_           Mono.flatMap ⇢ at org.springframework.security.web.server.authentication.logout.LogoutWebFilter.filter(LogoutWebFilter.java:63)\r\n    \t|_             checkpoint ⇢ org.springframework.security.web.server.authentication.logout.LogoutWebFilter [DefaultWebFilterChain]\r\n    \t|_                        ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:120)\r\n    \t|_             Mono.defer ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.filter(DefaultWebFilterChain.java:119)\r\n    \t|_                        ⇢ at org.springframework.security.web.server.savedrequest.ServerRequestCacheWebFilter.lambda$filter$1(ServerRequestCacheWebFilter.java:39)\r\n    \t|_           Mono.flatMap ⇢ at org.springframework.security.web.server.savedrequest.ServerRequestCacheWebFilter.filter(ServerRequestCacheWebFilter.java:39)\r\n    \t|_             checkpoint ⇢ org.springframework.security.web.server.savedrequest.ServerRequestCacheWebFilter [DefaultWebFilterChain]\r\n    \t|_                        ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:120)\r\n    \t|_             Mono.defer ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.filter(DefaultWebFilterChain.java:119)\r\n    \t|_                        ⇢ at org.springframework.security.web.server.context.SecurityContextServerWebExchangeWebFilter.filter(SecurityContextServerWebExchangeWebFilter.java:38)\r\n    \t|_             checkpoint ⇢ org.springframework.security.web.server.context.SecurityContextServerWebExchangeWebFilter [DefaultWebFilterChain]\r\n    \t|_                        ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:120)\r\n    \t|_             Mono.defer ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.filter(DefaultWebFilterChain.java:119)\r\n    \t|_                        ⇢ at org.springframework.security.web.server.authentication.WebFilterChainServerAuthenticationSuccessHandler.onAuthenticationSuccess(WebFilterChainServerAuthenticationSuccessHandler.java:36)\r\n    \t|_              Mono.then ⇢ at org.springframework.security.web.server.authentication.AuthenticationWebFilter.onAuthenticationSuccess(AuthenticationWebFilter.java:135)\r\n    \t|_ Mono.subscriberContext ⇢ at org.springframework.security.web.server.authentication.AuthenticationWebFilter.onAuthenticationSuccess(AuthenticationWebFilter.java:136)\r\n    \t|_                        ⇢ at org.springframework.security.web.server.authentication.AuthenticationWebFilter.lambda$authenticate$7(AuthenticationWebFilter.java:124)\r\n    \t|_           Mono.flatMap ⇢ at org.springframework.security.web.server.authentication.AuthenticationWebFilter.authenticate(AuthenticationWebFilter.java:124)\r\n    \t|_         Mono.doOnError ⇢ at org.springframework.security.web.server.authentication.AuthenticationWebFilter.authenticate(AuthenticationWebFilter.java:126)\r\n    \t|_                        ⇢ at org.springframework.security.web.server.authentication.AuthenticationWebFilter.lambda$filter$3(AuthenticationWebFilter.java:114)\r\n    \t|_           Mono.flatMap ⇢ at org.springframework.security.web.server.authentication.AuthenticationWebFilter.filter(AuthenticationWebFilter.java:114)\r\n    \t|_     Mono.onErrorResume ⇢ at org.springframework.security.web.server.authentication.AuthenticationWebFilter.filter(AuthenticationWebFilter.java:115)\r\n    \t|_             checkpoint ⇢ org.springframework.security.web.server.authentication.AuthenticationWebFilter [DefaultWebFilterChain]\r\n    \t|_                        ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:120)\r\n    \t|_             Mono.defer ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.filter(DefaultWebFilterChain.java:119)\r\n    \t|_ Mono.subscriberContext ⇢ at org.springframework.security.web.server.context.ReactorContextWebFilter.filter(ReactorContextWebFilter.java:47)\r\n    \t|_             checkpoint ⇢ org.springframework.security.web.server.context.ReactorContextWebFilter [DefaultWebFilterChain]\r\n    \t|_                        ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:120)\r\n    \t|_             Mono.defer ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.filter(DefaultWebFilterChain.java:119)\r\n    \t|_                        ⇢ at org.springframework.security.web.server.csrf.CsrfWebFilter.lambda$continueFilterChain$10(CsrfWebFilter.java:165)\r\n    \t|_             Mono.defer ⇢ at org.springframework.security.web.server.csrf.CsrfWebFilter.continueFilterChain(CsrfWebFilter.java:162)\r\n    \t|_              Mono.then ⇢ at org.springframework.security.web.server.csrf.CsrfWebFilter.filter(CsrfWebFilter.java:124)\r\n    \t|_     Mono.switchIfEmpty ⇢ at org.springframework.security.web.server.csrf.CsrfWebFilter.filter(CsrfWebFilter.java:124)\r\n    \t|_     Mono.onErrorResume ⇢ at org.springframework.security.web.server.csrf.CsrfWebFilter.filter(CsrfWebFilter.java:125)\r\n    \t|_             checkpoint ⇢ org.springframework.security.web.server.csrf.CsrfWebFilter [DefaultWebFilterChain]\r\n    \t|_                        ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:120)\r\n    \t|_             Mono.defer ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.filter(DefaultWebFilterChain.java:119)\r\n    \t|_                        ⇢ at org.springframework.security.web.server.header.HttpHeaderWriterWebFilter.filter(HttpHeaderWriterWebFilter.java:44)\r\n    \t|_             checkpoint ⇢ org.springframework.security.web.server.header.HttpHeaderWriterWebFilter [DefaultWebFilterChain]\r\n    \t|_                        ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:120)\r\n    \t|_             Mono.defer ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.filter(DefaultWebFilterChain.java:119)\r\n    \t|_ Mono.subscriberContext ⇢ at org.springframework.security.config.web.server.ServerHttpSecurity$ServerWebExchangeReactorContextWebFilter.filter(ServerHttpSecurity.java:2936)\r\n    \t|_             checkpoint ⇢ org.springframework.security.config.web.server.ServerHttpSecurity$ServerWebExchangeReactorContextWebFilter [DefaultWebFilterChain]\r\n    \t|_                        ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:120)\r\n    \t|_             Mono.defer ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.filter(DefaultWebFilterChain.java:119)\r\n    \t|_                        ⇢ at org.springframework.web.server.handler.FilteringWebHandler.handle(FilteringWebHandler.java:59)\r\n    \t|_                        ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:120)\r\n    \t|_             Mono.defer ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.filter(DefaultWebFilterChain.java:119)\r\n    \t|_                        ⇢ at org.springframework.security.web.server.WebFilterChainProxy.lambda$filter$4(WebFilterChainProxy.java:56)\r\n    \t|_           Mono.flatMap ⇢ at org.springframework.security.web.server.WebFilterChainProxy.filter(WebFilterChainProxy.java:56)\r\n    \t|_             checkpoint ⇢ org.springframework.security.web.server.WebFilterChainProxy [DefaultWebFilterChain]\r\n    \t|_                        ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:120)\r\n    \t|_             Mono.defer ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.filter(DefaultWebFilterChain.java:119)\r\n    \t|_          Mono.doOnEach ⇢ at org.springframework.boot.actuate.metrics.web.reactive.server.MetricsWebFilter.filter(MetricsWebFilter.java:87)\r\n    \t|_        Mono.doOnCancel ⇢ at org.springframework.boot.actuate.metrics.web.reactive.server.MetricsWebFilter.filter(MetricsWebFilter.java:88)\r\n    \t|_ Mono.transformDeferred ⇢ at org.springframework.boot.actuate.metrics.web.reactive.server.MetricsWebFilter.filter(MetricsWebFilter.java:82)\r\n    \t|_             checkpoint ⇢ org.springframework.boot.actuate.metrics.web.reactive.server.MetricsWebFilter [DefaultWebFilterChain]\r\n    \t|_                        ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:120)\r\n    \t|_             Mono.defer ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.filter(DefaultWebFilterChain.java:119)\r\n    \t|_                        ⇢ at org.springframework.web.server.handler.FilteringWebHandler.handle(FilteringWebHandler.java:59)\r\n    \t|_                        ⇢ at org.springframework.web.server.handler.WebHandlerDecorator.handle(WebHandlerDecorator.java:56)\r\n    \t|_             Mono.error ⇢ at org.springframework.web.server.handler.ExceptionHandlingWebHandler$CheckpointInsertingHandler.handle(ExceptionHandlingWebHandler.java:98)\r\n    \t|_             checkpoint ⇢ HTTP GET &quot;/subjects/me/services/health&quot; [ExceptionHandlingWebHandler]\r\n    \t|_                        ⇢ at org.springframework.web.server.handler.ExceptionHandlingWebHandler.lambda$handle$0(ExceptionHandlingWebHandler.java:77)\r\n    \t|_     Mono.onErrorResume ⇢ at org.springframework.web.server.handler.ExceptionHandlingWebHandler.handle(ExceptionHandlingWebHandler.java:77)\r\n    Stack trace:\r\n    \t\tat java.base/java.io.RandomAccessFile.readBytes(RandomAccessFile.java)\r\n    \t\tat java.base/java.io.RandomAccessFile.read(RandomAccessFile.java:404)\r\n    \t\tat java.base/java.io.RandomAccessFile.readFully(RandomAccessFile.java:468)\r\n    \t\tat java.base/java.util.zip.ZipFile$Source.readFullyAt(ZipFile.java:1314)\r\n    \t\tat java.base/java.util.zip.ZipFile$ZipFileInputStream.initDataOffset(ZipFile.java:913)\r\n    \t\tat java.base/java.util.zip.ZipFile$ZipFileInputStream.read(ZipFile.java:929)\r\n    \t\tat java.base/java.util.zip.ZipFile$ZipFileInflaterInputStream.fill(ZipFile.java:446)\r\n    \t\tat java.base/java.util.zip.InflaterInputStream.read(InflaterInputStream.java:158)\r\n    \t\tat java.base/java.io.InputStream.readNBytes(InputStream.java:506)\r\n    \t\tat java.base/java.util.jar.JarFile.getBytes(JarFile.java:813)\r\n    \t\tat java.base/java.util.jar.JarFile.checkForSpecialAttributes(JarFile.java:1003)\r\n    \t\tat java.base/java.util.jar.JarFile.isMultiRelease(JarFile.java:390)\r\n    \t\tat java.base/java.util.jar.JarFile.getEntry(JarFile.java:512)\r\n    \t\tat java.base/sun.net.www.protocol.jar.URLJarFile.getEntry(URLJarFile.java:131)\r\n    \t\tat java.base/sun.net.www.protocol.jar.JarURLConnection.connect(JarURLConnection.java:137)\r\n    \t\tat java.base/sun.net.www.protocol.jar.JarURLConnection.getInputStream(JarURLConnection.java:155)\r\n    \t\tat java.base/java.util.ResourceBundle$Control$2.run(ResourceBundle.java:3227)\r\n    \t\tat java.base/java.util.ResourceBundle$Control$2.run(ResourceBundle.java:3216)\r\n    \t\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:554)\r\n    \t\tat java.base/java.util.ResourceBundle$Control.newBundle(ResourceBundle.java:3215)\r\n    \t\tat java.base/java.util.ResourceBundle.loadBundle(ResourceBundle.java:1987)\r\n    \t\tat java.base/java.util.ResourceBundle.findBundle(ResourceBundle.java:1769)\r\n    \t\tat java.base/java.util.ResourceBundle.findBundle(ResourceBundle.java:1721)\r\n    \t\tat java.base/java.util.ResourceBundle.findBundle(ResourceBundle.java:1721)\r\n    \t\tat java.base/java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:1655)\r\n    \t\tat java.base/java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:1586)\r\n    \t\tat java.base/java.util.ResourceBundle.getBundle(ResourceBundle.java:1278)\r\n    \t\tat org.hibernate.validator.resourceloading.PlatformResourceBundleLocator.loadBundle(PlatformResourceBundleLocator.java:234)\r\n    \t\tat org.hibernate.validator.resourceloading.PlatformResourceBundleLocator.doGetResourceBundle(PlatformResourceBundleLocator.java:199)\r\n    \t\tat org.hibernate.validator.resourceloading.PlatformResourceBundleLocator.getResourceBundle(PlatformResourceBundleLocator.java:183)\r\n    \t\tat org.hibernate.validator.messageinterpolation.AbstractMessageInterpolator.resolveMessage(AbstractMessageInterpolator.java:455)\r\n    \t\tat org.hibernate.validator.messageinterpolation.AbstractMessageInterpolator.lambda$interpolateMessage$0(AbstractMessageInterpolator.java:399)\r\n    \t\tat java.base/java.util.concurrent.ConcurrentMap.computeIfAbsent(ConcurrentMap.java:330)\r\n    \t\tat org.hibernate.validator.messageinterpolation.AbstractMessageInterpolator.interpolateMessage(AbstractMessageInterpolator.java:399)\r\n    \t\tat org.hibernate.validator.messageinterpolation.AbstractMessageInterpolator.interpolate(AbstractMessageInterpolator.java:355)\r\n    \t\tat org.springframework.validation.beanvalidation.LocaleContextMessageInterpolator.interpolate(LocaleContextMessageInterpolator.java:51)\r\n    \t\tat org.hibernate.validator.internal.engine.validationcontext.AbstractValidationContext.interpolate(AbstractValidationContext.java:322)\r\n    \t\tat org.hibernate.validator.internal.engine.validationcontext.AbstractValidationContext.addConstraintFailure(AbstractValidationContext.java:231)\r\n    \t\tat org.hibernate.validator.internal.engine.validationcontext.ParameterExecutableValidationContext.addConstraintFailure(ParameterExecutableValidationContext.java:38)\r\n    \t\tat org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.validateConstraints(ConstraintTree.java:79)\r\n    \t\tat org.hibernate.validator.internal.metadata.core.MetaConstraint.doValidateConstraint(MetaConstraint.java:130)\r\n    \t\tat org.hibernate.validator.internal.metadata.core.MetaConstraint.validateConstraint(MetaConstraint.java:123)\r\n    \t\tat org.hibernate.validator.internal.engine.ValidatorImpl.validateMetaConstraint(ValidatorImpl.java:555)\r\n    \t\tat org.hibernate.validator.internal.engine.ValidatorImpl.validateMetaConstraints(ValidatorImpl.java:537)\r\n    \t\tat org.hibernate.validator.internal.engine.ValidatorImpl.validateParametersForSingleGroup(ValidatorImpl.java:991)\r\n    \t\tat org.hibernate.validator.internal.engine.ValidatorImpl.validateParametersForGroup(ValidatorImpl.java:932)\r\n    \t\tat org.hibernate.validator.internal.engine.ValidatorImpl.validateParametersInContext(ValidatorImpl.java:863)\r\n    \t\tat org.hibernate.validator.internal.engine.ValidatorImpl.validateParameters(ValidatorImpl.java:283)\r\n    \t\tat org.hibernate.validator.internal.engine.ValidatorImpl.validateParameters(ValidatorImpl.java:235)\r\n    \t\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:110)\r\n    \t\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \t\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)\r\n    \t\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)\r\n    \t\tat services.vivy.integrations.api.ServicesApi$$EnhancerBySpringCGLIB$$60998295.getServiceIntegrations(&lt;generated&gt;)\r\n    \t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78)\r\n    \t\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \t\tat java.base/java.lang.reflect.Method.invoke(Method.java:567)\r\n    \t\tat org.springframework.web.reactive.result.method.InvocableHandlerMethod.lambda$invoke$0(InvocableHandlerMethod.java:146)\r\n    \t\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:125)\r\n    \t\tat reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1815)\r\n    \t\tat reactor.core.publisher.MonoZip$ZipCoordinator.signal(MonoZip.java:251)\r\n    \t\tat reactor.core.publisher.MonoZip$ZipInner.onNext(MonoZip.java:336)\r\n    \t\tat reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onNext(MonoPeekTerminal.java:180)\r\n    \t\tat reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1815)\r\n    \t\tat reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.onComplete(FluxDefaultIfEmpty.java:108)\r\n    \t\tat reactor.core.publisher.Operators.complete(Operators.java:136)\r\n    \t\tat reactor.core.publisher.MonoEmpty.subscribe(MonoEmpty.java:45)\r\n    \t\tat reactor.core.publisher.Mono.subscribe(Mono.java:4150)\r\n    \t\tat reactor.core.publisher.MonoZip.subscribe(MonoZip.java:128)\r\n    \t\tat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64)\r\n\r\nI also have a blockhound configuration class:\r\n\r\n        @Override\r\n    public void applyTo(BlockHound.Builder builder) {\r\n        builder\r\n                .allowBlockingCallsInside(\r\n                        UUID.class.getName(),\r\n                        &quot;randomUUID&quot;\r\n                )\r\n                .allowBlockingCallsInside(\r\n                        &quot;software.amazon.awssdk.http.nio.netty.internal.BetterSimpleChannelPool&quot;,\r\n                        &quot;close&quot;\r\n                )\r\n                .allowBlockingCallsInside(\r\n                        &quot;org.springframework.validation.beanvalidation.MethodValidationInterceptor&quot;,\r\n                        &quot;invoke&quot;\r\n                )\r\n        ;\r\n    }\r\n\r\nPlease is there something I need to do differently to make this work? I have gone through the stack trace, but I don&#39;t have much understanding of what the issue could be. I tried allowing calls from beanVaildation in blockhound like so:\r\n\r\n    .allowBlockingCallsInside(\r\n                            &quot;org.springframework.validation.beanvalidation.MethodValidationInterceptor&quot;,\r\n                            &quot;invoke&quot;\r\n                    )\r\n\r\nBut the issue still persists. \r\n\r\n","title":"Why is Blockhound detecting a blocking call after I added r2dbms to spring?","body":"<p>I added postgres support to my application, but when I try to run the tests, I keep getting a blocking call error from blockhound, and I'm not sure why this is happening. The application it's runs fine, only the tests fail with the blocking call error.</p>\n<p>These are my app dependencies:</p>\n<pre><code>    plugins {\n    id 'org.springframework.boot'\n}\n\n    dependencies {\n        annotationProcessor 'org.projectlombok:lombok'\n        testAnnotationProcessor 'org.projectlombok:lombok'\n        compileOnly 'org.projectlombok:lombok'\n        testCompileOnly 'org.projectlombok:lombok'\n    implementation 'io.projectreactor:reactor-tools'\n\n    implementation 'software.amazon.awssdk:dynamodb-enhanced'\n\n    implementation 'org.springframework.boot:spring-boot-starter-webflux'\n    implementation 'org.springframework.boot:spring-boot-starter-actuator'\n    implementation 'org.springframework.boot:spring-boot-starter-validation'\n    implementation 'org.springframework.boot:spring-boot-starter-data-redis-reactive'\n\n    implementation 'org.springframework.boot:spring-boot-starter-data-r2dbc'\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n    implementation 'io.r2dbc:r2dbc-postgresql'\n    implementation 'org.postgresql:postgresql'\n    implementation 'org.flywaydb:flyway-core'\n\n    implementation 'com.github.bsideup.liiklus:client'\n\n    implementation 'com.auth0:java-jwt'\n\n    implementation 'org.springdoc:springdoc-openapi-webflux-core'\n    implementation 'org.springdoc:springdoc-openapi-security'\n    implementation 'org.springdoc:springdoc-openapi-webflux-ui'\n\n    runtimeOnly 'io.sentry:sentry-logback'\n\n    testRuntimeOnly 'io.sentry:sentry-logback'\n\n    testImplementation 'com.amazonaws:aws-java-sdk-dynamodb'\n    testImplementation 'com.github.bsideup.liiklus:testing'\n    testImplementation 'io.projectreactor.tools:blockhound-junit-platform'\n    testImplementation 'io.projectreactor:reactor-test'\n    testImplementation 'io.rest-assured:rest-assured'\n    testImplementation 'org.assertj:assertj-core'\n    testImplementation 'org.awaitility:awaitility'\n    testImplementation 'org.bouncycastle:bcprov-jdk15on'\n    testImplementation 'org.mock-server:mockserver-client-java'\n    testImplementation 'org.mock-server:mockserver-netty'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n    testImplementation 'org.testcontainers:localstack'\n    testImplementation &quot;org.testcontainers:testcontainers&quot;\n    testImplementation 'org.testcontainers:mockserver'\n    testImplementation &quot;org.testcontainers:junit-jupiter&quot;\n\n    testImplementation &quot;org.testcontainers:postgresql&quot;\n    testImplementation &quot;org.testcontainers:r2dbc&quot;\n\n    testRuntimeOnly &quot;net.java.dev.jna:jna:5.12.1&quot;\n\n    //http://github.com/gradle/gradle/issues/8806 requires platform launcher in test runtime explicitly\n    testRuntimeOnly 'org.junit.platform:junit-platform-launcher'\n}\n</code></pre>\n<p>Then I added these dependencies in the project build.gradle:</p>\n<pre><code>        dependency 'io.r2dbc:r2dbc-postgresql:0.8.12.RELEASE'\n        dependency 'org.flywaydb:flyway-core:8.5.10'\n        testImplementation 'org.postgresql:postgresql'\n</code></pre>\n<p>Then I have a test container logic like so:</p>\n<pre><code>var jdbcUrl = postgresqlContainer.getJdbcUrl();\n    var r2dbcUrl = jdbcUrl.replaceAll(&quot;jdbc&quot;, &quot;r2dbc&quot;);\n\n    log.info(&quot;Set JDBC url: {}&quot;, jdbcUrl);\n    log.info(&quot;Set R2DBC url: {}&quot;, r2dbcUrl);\n\n    System.getProperties().put(&quot;spring.flyway.url&quot;, jdbcUrl);\n    System.getProperties().put(&quot;spring.r2dbc.url&quot;, r2dbcUrl);\n\n    Flyway flyway = Flyway.configure().dataSource(\n            postgresqlContainer.getJdbcUrl(),\n            postgresqlContainer.getUsername(),\n            postgresqlContainer.getPassword()\n    ).load();\n\n    flyway.migrate();\n</code></pre>\n<p>Finally I had some configurations in app.yml, for setting test postgres url and credentials. And that's basically it. But when I run the tests, I get this error/stack trace:</p>\n<pre><code>    reactor.blockhound.BlockingOperationError: Blocking call! java.io.RandomAccessFile#readBytes\n    at java.base/java.io.RandomAccessFile.readBytes(RandomAccessFile.java)\n    Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: \nAssembly trace from producer [reactor.core.publisher.MonoFlatMap] :\n    reactor.core.publisher.Mono.flatMap\n    org.springframework.web.reactive.result.method.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:137)\nError has been observed at the following site(s):\n    |_           Mono.flatMap ⇢ at org.springframework.web.reactive.result.method.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:137)\n    |_                        ⇢ at org.springframework.web.reactive.result.method.annotation.RequestMappingHandlerAdapter.lambda$handle$1(RequestMappingHandlerAdapter.java:199)\n    |_             Mono.defer ⇢ at org.springframework.web.reactive.result.method.annotation.RequestMappingHandlerAdapter.handle(RequestMappingHandlerAdapter.java:199)\n    |_              Mono.then ⇢ at org.springframework.web.reactive.result.method.annotation.RequestMappingHandlerAdapter.handle(RequestMappingHandlerAdapter.java:199)\n    |_          Mono.doOnNext ⇢ at org.springframework.web.reactive.result.method.annotation.RequestMappingHandlerAdapter.handle(RequestMappingHandlerAdapter.java:200)\n    |_          Mono.doOnNext ⇢ at org.springframework.web.reactive.result.method.annotation.RequestMappingHandlerAdapter.handle(RequestMappingHandlerAdapter.java:201)\n    |_             Mono.error ⇢ at org.springframework.web.reactive.result.method.annotation.RequestMappingHandlerAdapter.handleException(RequestMappingHandlerAdapter.java:235)\n    |_                        ⇢ at org.springframework.web.reactive.result.method.annotation.RequestMappingHandlerAdapter.lambda$handle$0(RequestMappingHandlerAdapter.java:195)\n    |_     Mono.onErrorResume ⇢ at org.springframework.web.reactive.result.method.annotation.RequestMappingHandlerAdapter.handle(RequestMappingHandlerAdapter.java:202)\n    |_                        ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:120)\n    |_             Mono.defer ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.filter(DefaultWebFilterChain.java:119)\n    |_                        ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:120)\n    |_             Mono.defer ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.filter(DefaultWebFilterChain.java:119)\n    |_     Mono.switchIfEmpty ⇢ at org.springframework.security.web.server.authorization.AuthorizationWebFilter.filter(AuthorizationWebFilter.java:55)\n    |_             checkpoint ⇢ org.springframework.security.web.server.authorization.AuthorizationWebFilter [DefaultWebFilterChain]\n    |_                        ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:120)\n    |_             Mono.defer ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.filter(DefaultWebFilterChain.java:119)\n    |_     Mono.onErrorResume ⇢ at org.springframework.security.web.server.authorization.ExceptionTranslationWebFilter.filter(ExceptionTranslationWebFilter.java:44)\n    |_             checkpoint ⇢ org.springframework.security.web.server.authorization.ExceptionTranslationWebFilter [DefaultWebFilterChain]\n    |_                        ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:120)\n    |_             Mono.defer ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.filter(DefaultWebFilterChain.java:119)\n    |_              Mono.then ⇢ at org.springframework.security.web.server.authentication.logout.LogoutWebFilter.filter(LogoutWebFilter.java:62)\n    |_     Mono.switchIfEmpty ⇢ at org.springframework.security.web.server.authentication.logout.LogoutWebFilter.filter(LogoutWebFilter.java:62)\n    |_               Mono.map ⇢ at org.springframework.security.web.server.authentication.logout.LogoutWebFilter.filter(LogoutWebFilter.java:62)\n    |_           Mono.flatMap ⇢ at org.springframework.security.web.server.authentication.logout.LogoutWebFilter.filter(LogoutWebFilter.java:63)\n    |_           Mono.flatMap ⇢ at org.springframework.security.web.server.authentication.logout.LogoutWebFilter.filter(LogoutWebFilter.java:63)\n    |_             checkpoint ⇢ org.springframework.security.web.server.authentication.logout.LogoutWebFilter [DefaultWebFilterChain]\n    |_                        ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:120)\n    |_             Mono.defer ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.filter(DefaultWebFilterChain.java:119)\n    |_                        ⇢ at org.springframework.security.web.server.savedrequest.ServerRequestCacheWebFilter.lambda$filter$1(ServerRequestCacheWebFilter.java:39)\n    |_           Mono.flatMap ⇢ at org.springframework.security.web.server.savedrequest.ServerRequestCacheWebFilter.filter(ServerRequestCacheWebFilter.java:39)\n    |_             checkpoint ⇢ org.springframework.security.web.server.savedrequest.ServerRequestCacheWebFilter [DefaultWebFilterChain]\n    |_                        ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:120)\n    |_             Mono.defer ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.filter(DefaultWebFilterChain.java:119)\n    |_                        ⇢ at org.springframework.security.web.server.context.SecurityContextServerWebExchangeWebFilter.filter(SecurityContextServerWebExchangeWebFilter.java:38)\n    |_             checkpoint ⇢ org.springframework.security.web.server.context.SecurityContextServerWebExchangeWebFilter [DefaultWebFilterChain]\n    |_                        ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:120)\n    |_             Mono.defer ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.filter(DefaultWebFilterChain.java:119)\n    |_                        ⇢ at org.springframework.security.web.server.authentication.WebFilterChainServerAuthenticationSuccessHandler.onAuthenticationSuccess(WebFilterChainServerAuthenticationSuccessHandler.java:36)\n    |_              Mono.then ⇢ at org.springframework.security.web.server.authentication.AuthenticationWebFilter.onAuthenticationSuccess(AuthenticationWebFilter.java:135)\n    |_ Mono.subscriberContext ⇢ at org.springframework.security.web.server.authentication.AuthenticationWebFilter.onAuthenticationSuccess(AuthenticationWebFilter.java:136)\n    |_                        ⇢ at org.springframework.security.web.server.authentication.AuthenticationWebFilter.lambda$authenticate$7(AuthenticationWebFilter.java:124)\n    |_           Mono.flatMap ⇢ at org.springframework.security.web.server.authentication.AuthenticationWebFilter.authenticate(AuthenticationWebFilter.java:124)\n    |_         Mono.doOnError ⇢ at org.springframework.security.web.server.authentication.AuthenticationWebFilter.authenticate(AuthenticationWebFilter.java:126)\n    |_                        ⇢ at org.springframework.security.web.server.authentication.AuthenticationWebFilter.lambda$filter$3(AuthenticationWebFilter.java:114)\n    |_           Mono.flatMap ⇢ at org.springframework.security.web.server.authentication.AuthenticationWebFilter.filter(AuthenticationWebFilter.java:114)\n    |_     Mono.onErrorResume ⇢ at org.springframework.security.web.server.authentication.AuthenticationWebFilter.filter(AuthenticationWebFilter.java:115)\n    |_             checkpoint ⇢ org.springframework.security.web.server.authentication.AuthenticationWebFilter [DefaultWebFilterChain]\n    |_                        ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:120)\n    |_             Mono.defer ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.filter(DefaultWebFilterChain.java:119)\n    |_ Mono.subscriberContext ⇢ at org.springframework.security.web.server.context.ReactorContextWebFilter.filter(ReactorContextWebFilter.java:47)\n    |_             checkpoint ⇢ org.springframework.security.web.server.context.ReactorContextWebFilter [DefaultWebFilterChain]\n    |_                        ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:120)\n    |_             Mono.defer ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.filter(DefaultWebFilterChain.java:119)\n    |_                        ⇢ at org.springframework.security.web.server.csrf.CsrfWebFilter.lambda$continueFilterChain$10(CsrfWebFilter.java:165)\n    |_             Mono.defer ⇢ at org.springframework.security.web.server.csrf.CsrfWebFilter.continueFilterChain(CsrfWebFilter.java:162)\n    |_              Mono.then ⇢ at org.springframework.security.web.server.csrf.CsrfWebFilter.filter(CsrfWebFilter.java:124)\n    |_     Mono.switchIfEmpty ⇢ at org.springframework.security.web.server.csrf.CsrfWebFilter.filter(CsrfWebFilter.java:124)\n    |_     Mono.onErrorResume ⇢ at org.springframework.security.web.server.csrf.CsrfWebFilter.filter(CsrfWebFilter.java:125)\n    |_             checkpoint ⇢ org.springframework.security.web.server.csrf.CsrfWebFilter [DefaultWebFilterChain]\n    |_                        ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:120)\n    |_             Mono.defer ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.filter(DefaultWebFilterChain.java:119)\n    |_                        ⇢ at org.springframework.security.web.server.header.HttpHeaderWriterWebFilter.filter(HttpHeaderWriterWebFilter.java:44)\n    |_             checkpoint ⇢ org.springframework.security.web.server.header.HttpHeaderWriterWebFilter [DefaultWebFilterChain]\n    |_                        ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:120)\n    |_             Mono.defer ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.filter(DefaultWebFilterChain.java:119)\n    |_ Mono.subscriberContext ⇢ at org.springframework.security.config.web.server.ServerHttpSecurity$ServerWebExchangeReactorContextWebFilter.filter(ServerHttpSecurity.java:2936)\n    |_             checkpoint ⇢ org.springframework.security.config.web.server.ServerHttpSecurity$ServerWebExchangeReactorContextWebFilter [DefaultWebFilterChain]\n    |_                        ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:120)\n    |_             Mono.defer ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.filter(DefaultWebFilterChain.java:119)\n    |_                        ⇢ at org.springframework.web.server.handler.FilteringWebHandler.handle(FilteringWebHandler.java:59)\n    |_                        ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:120)\n    |_             Mono.defer ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.filter(DefaultWebFilterChain.java:119)\n    |_                        ⇢ at org.springframework.security.web.server.WebFilterChainProxy.lambda$filter$4(WebFilterChainProxy.java:56)\n    |_           Mono.flatMap ⇢ at org.springframework.security.web.server.WebFilterChainProxy.filter(WebFilterChainProxy.java:56)\n    |_             checkpoint ⇢ org.springframework.security.web.server.WebFilterChainProxy [DefaultWebFilterChain]\n    |_                        ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:120)\n    |_             Mono.defer ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.filter(DefaultWebFilterChain.java:119)\n    |_          Mono.doOnEach ⇢ at org.springframework.boot.actuate.metrics.web.reactive.server.MetricsWebFilter.filter(MetricsWebFilter.java:87)\n    |_        Mono.doOnCancel ⇢ at org.springframework.boot.actuate.metrics.web.reactive.server.MetricsWebFilter.filter(MetricsWebFilter.java:88)\n    |_ Mono.transformDeferred ⇢ at org.springframework.boot.actuate.metrics.web.reactive.server.MetricsWebFilter.filter(MetricsWebFilter.java:82)\n    |_             checkpoint ⇢ org.springframework.boot.actuate.metrics.web.reactive.server.MetricsWebFilter [DefaultWebFilterChain]\n    |_                        ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.lambda$filter$0(DefaultWebFilterChain.java:120)\n    |_             Mono.defer ⇢ at org.springframework.web.server.handler.DefaultWebFilterChain.filter(DefaultWebFilterChain.java:119)\n    |_                        ⇢ at org.springframework.web.server.handler.FilteringWebHandler.handle(FilteringWebHandler.java:59)\n    |_                        ⇢ at org.springframework.web.server.handler.WebHandlerDecorator.handle(WebHandlerDecorator.java:56)\n    |_             Mono.error ⇢ at org.springframework.web.server.handler.ExceptionHandlingWebHandler$CheckpointInsertingHandler.handle(ExceptionHandlingWebHandler.java:98)\n    |_             checkpoint ⇢ HTTP GET &quot;/subjects/me/services/health&quot; [ExceptionHandlingWebHandler]\n    |_                        ⇢ at org.springframework.web.server.handler.ExceptionHandlingWebHandler.lambda$handle$0(ExceptionHandlingWebHandler.java:77)\n    |_     Mono.onErrorResume ⇢ at org.springframework.web.server.handler.ExceptionHandlingWebHandler.handle(ExceptionHandlingWebHandler.java:77)\nStack trace:\n        at java.base/java.io.RandomAccessFile.readBytes(RandomAccessFile.java)\n        at java.base/java.io.RandomAccessFile.read(RandomAccessFile.java:404)\n        at java.base/java.io.RandomAccessFile.readFully(RandomAccessFile.java:468)\n        at java.base/java.util.zip.ZipFile$Source.readFullyAt(ZipFile.java:1314)\n        at java.base/java.util.zip.ZipFile$ZipFileInputStream.initDataOffset(ZipFile.java:913)\n        at java.base/java.util.zip.ZipFile$ZipFileInputStream.read(ZipFile.java:929)\n        at java.base/java.util.zip.ZipFile$ZipFileInflaterInputStream.fill(ZipFile.java:446)\n        at java.base/java.util.zip.InflaterInputStream.read(InflaterInputStream.java:158)\n        at java.base/java.io.InputStream.readNBytes(InputStream.java:506)\n        at java.base/java.util.jar.JarFile.getBytes(JarFile.java:813)\n        at java.base/java.util.jar.JarFile.checkForSpecialAttributes(JarFile.java:1003)\n        at java.base/java.util.jar.JarFile.isMultiRelease(JarFile.java:390)\n        at java.base/java.util.jar.JarFile.getEntry(JarFile.java:512)\n        at java.base/sun.net.www.protocol.jar.URLJarFile.getEntry(URLJarFile.java:131)\n        at java.base/sun.net.www.protocol.jar.JarURLConnection.connect(JarURLConnection.java:137)\n        at java.base/sun.net.www.protocol.jar.JarURLConnection.getInputStream(JarURLConnection.java:155)\n        at java.base/java.util.ResourceBundle$Control$2.run(ResourceBundle.java:3227)\n        at java.base/java.util.ResourceBundle$Control$2.run(ResourceBundle.java:3216)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:554)\n        at java.base/java.util.ResourceBundle$Control.newBundle(ResourceBundle.java:3215)\n        at java.base/java.util.ResourceBundle.loadBundle(ResourceBundle.java:1987)\n        at java.base/java.util.ResourceBundle.findBundle(ResourceBundle.java:1769)\n        at java.base/java.util.ResourceBundle.findBundle(ResourceBundle.java:1721)\n        at java.base/java.util.ResourceBundle.findBundle(ResourceBundle.java:1721)\n        at java.base/java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:1655)\n        at java.base/java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:1586)\n        at java.base/java.util.ResourceBundle.getBundle(ResourceBundle.java:1278)\n        at org.hibernate.validator.resourceloading.PlatformResourceBundleLocator.loadBundle(PlatformResourceBundleLocator.java:234)\n        at org.hibernate.validator.resourceloading.PlatformResourceBundleLocator.doGetResourceBundle(PlatformResourceBundleLocator.java:199)\n        at org.hibernate.validator.resourceloading.PlatformResourceBundleLocator.getResourceBundle(PlatformResourceBundleLocator.java:183)\n        at org.hibernate.validator.messageinterpolation.AbstractMessageInterpolator.resolveMessage(AbstractMessageInterpolator.java:455)\n        at org.hibernate.validator.messageinterpolation.AbstractMessageInterpolator.lambda$interpolateMessage$0(AbstractMessageInterpolator.java:399)\n        at java.base/java.util.concurrent.ConcurrentMap.computeIfAbsent(ConcurrentMap.java:330)\n        at org.hibernate.validator.messageinterpolation.AbstractMessageInterpolator.interpolateMessage(AbstractMessageInterpolator.java:399)\n        at org.hibernate.validator.messageinterpolation.AbstractMessageInterpolator.interpolate(AbstractMessageInterpolator.java:355)\n        at org.springframework.validation.beanvalidation.LocaleContextMessageInterpolator.interpolate(LocaleContextMessageInterpolator.java:51)\n        at org.hibernate.validator.internal.engine.validationcontext.AbstractValidationContext.interpolate(AbstractValidationContext.java:322)\n        at org.hibernate.validator.internal.engine.validationcontext.AbstractValidationContext.addConstraintFailure(AbstractValidationContext.java:231)\n        at org.hibernate.validator.internal.engine.validationcontext.ParameterExecutableValidationContext.addConstraintFailure(ParameterExecutableValidationContext.java:38)\n        at org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.validateConstraints(ConstraintTree.java:79)\n        at org.hibernate.validator.internal.metadata.core.MetaConstraint.doValidateConstraint(MetaConstraint.java:130)\n        at org.hibernate.validator.internal.metadata.core.MetaConstraint.validateConstraint(MetaConstraint.java:123)\n        at org.hibernate.validator.internal.engine.ValidatorImpl.validateMetaConstraint(ValidatorImpl.java:555)\n        at org.hibernate.validator.internal.engine.ValidatorImpl.validateMetaConstraints(ValidatorImpl.java:537)\n        at org.hibernate.validator.internal.engine.ValidatorImpl.validateParametersForSingleGroup(ValidatorImpl.java:991)\n        at org.hibernate.validator.internal.engine.ValidatorImpl.validateParametersForGroup(ValidatorImpl.java:932)\n        at org.hibernate.validator.internal.engine.ValidatorImpl.validateParametersInContext(ValidatorImpl.java:863)\n        at org.hibernate.validator.internal.engine.ValidatorImpl.validateParameters(ValidatorImpl.java:283)\n        at org.hibernate.validator.internal.engine.ValidatorImpl.validateParameters(ValidatorImpl.java:235)\n        at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:110)\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)\n        at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)\n        at services.vivy.integrations.api.ServicesApi$$EnhancerBySpringCGLIB$$60998295.getServiceIntegrations(&lt;generated&gt;)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:567)\n        at org.springframework.web.reactive.result.method.InvocableHandlerMethod.lambda$invoke$0(InvocableHandlerMethod.java:146)\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:125)\n        at reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1815)\n        at reactor.core.publisher.MonoZip$ZipCoordinator.signal(MonoZip.java:251)\n        at reactor.core.publisher.MonoZip$ZipInner.onNext(MonoZip.java:336)\n        at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onNext(MonoPeekTerminal.java:180)\n        at reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1815)\n        at reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.onComplete(FluxDefaultIfEmpty.java:108)\n        at reactor.core.publisher.Operators.complete(Operators.java:136)\n        at reactor.core.publisher.MonoEmpty.subscribe(MonoEmpty.java:45)\n        at reactor.core.publisher.Mono.subscribe(Mono.java:4150)\n        at reactor.core.publisher.MonoZip.subscribe(MonoZip.java:128)\n        at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64)\n</code></pre>\n<p>I also have a blockhound configuration class:</p>\n<pre><code>    @Override\npublic void applyTo(BlockHound.Builder builder) {\n    builder\n            .allowBlockingCallsInside(\n                    UUID.class.getName(),\n                    &quot;randomUUID&quot;\n            )\n            .allowBlockingCallsInside(\n                    &quot;software.amazon.awssdk.http.nio.netty.internal.BetterSimpleChannelPool&quot;,\n                    &quot;close&quot;\n            )\n            .allowBlockingCallsInside(\n                    &quot;org.springframework.validation.beanvalidation.MethodValidationInterceptor&quot;,\n                    &quot;invoke&quot;\n            )\n    ;\n}\n</code></pre>\n<p>Please is there something I need to do differently to make this work? I have gone through the stack trace, but I don't have much understanding of what the issue could be. I tried allowing calls from beanVaildation in blockhound like so:</p>\n<pre><code>.allowBlockingCallsInside(\n                        &quot;org.springframework.validation.beanvalidation.MethodValidationInterceptor&quot;,\n                        &quot;invoke&quot;\n                )\n</code></pre>\n<p>But the issue still persists.</p>\n"},{"tags":["java","converters","currency"],"comments":[{"owner":{"account_id":3359942,"reputation":4710,"user_id":2821954,"display_name":"Andrew T."},"score":6,"creation_date":1413772105,"post_id":26457601,"comment_id":41555588,"body_markdown":"I assume this program works (as you wrote there)? If it is, then it&#39;s better to post it in [codereview.se] instead.","body":"I assume this program works (as you wrote there)? If it is, then it&#39;s better to post it in <a href=\"https://codereview.stackexchange.com\">Code Review</a> instead."}],"answers":[{"tags":[],"owner":{"account_id":4732429,"reputation":78,"user_id":3827664,"display_name":"DasScooter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1413771552,"creation_date":1413771552,"answer_id":26457681,"question_id":26457601,"body_markdown":"I am always cautious of using integer input. If someone types a char, your program would likely crash as an exception would occur. Accepting a char of the number might be a safer alternative.\r\n\r\nWhen you check the &quot;choice&quot; and &quot;output&quot; in the same if statement it requires more resources. Nesting the if statements might improve efficiency. This would be having the if statement for choice with the if statements for output within them.","title":"Basic Currency Converter - Looking for feedback","body":"<p>I am always cautious of using integer input. If someone types a char, your program would likely crash as an exception would occur. Accepting a char of the number might be a safer alternative.</p>\n\n<p>When you check the \"choice\" and \"output\" in the same if statement it requires more resources. Nesting the if statements might improve efficiency. This would be having the if statement for choice with the if statements for output within them.</p>\n"},{"tags":[],"owner":{"account_id":4654736,"reputation":316,"user_id":3770608,"display_name":"Luc Berthiaume"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1413772150,"creation_date":1413772150,"answer_id":26457752,"question_id":26457601,"body_markdown":"Since you refer to your currency as int, I would use an n by m matrix for storing the exchange rate.  n would be the first currency and m the second.  With both int you can retrace the correct exchange rate.\r\n\r\nThe diagonal in the matrix would be 1 (since USD &gt;&gt; USD =1 ).\r\n\r\nFinally, write a function to compute the exchange rate and return the corresponding text (you can use an hashmap for that, with the int as a key and the name ( string) as the value)\r\n\r\n    exchange_rate = currency[1][2];\r\n\r\n      \r\n    HashMap hm = new HashMap();\r\n\r\n    hm.put(1, new string(&quot;USD&quot;);\r\n\r\netc...","title":"Basic Currency Converter - Looking for feedback","body":"<p>Since you refer to your currency as int, I would use an n by m matrix for storing the exchange rate.  n would be the first currency and m the second.  With both int you can retrace the correct exchange rate.</p>\n\n<p>The diagonal in the matrix would be 1 (since USD >> USD =1 ).</p>\n\n<p>Finally, write a function to compute the exchange rate and return the corresponding text (you can use an hashmap for that, with the int as a key and the name ( string) as the value)</p>\n\n<pre><code>exchange_rate = currency[1][2];\n\n\nHashMap hm = new HashMap();\n\nhm.put(1, new string(\"USD\");\n</code></pre>\n\n<p>etc...</p>\n"},{"tags":[],"owner":{"account_id":16559,"reputation":1856,"user_id":36223,"display_name":"DaveB"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1413774633,"creation_date":1413774633,"answer_id":26458027,"question_id":26457601,"body_markdown":"Express all of your rates as a multiplier of one standard value, for instance use the USD as the standard value.  Then the conversion values for GBP would be 1.60, the USD would be 1.0 and the Euro would be 1.29.  Then the conversion calculation would be:\r\n\r\nFrom Value * From Conversion * 1/To Conversion\r\n\r\nFor instance from 1 GBP to Euro would be:\r\n\r\n1 * 1.60 * (1/1.29) = 1.24 \r\n\r\nIf  you store all of your rates in a HashMap&lt;Integer, Double&gt; then you can avoid the switch statements completely.","title":"Basic Currency Converter - Looking for feedback","body":"<p>Express all of your rates as a multiplier of one standard value, for instance use the USD as the standard value.  Then the conversion values for GBP would be 1.60, the USD would be 1.0 and the Euro would be 1.29.  Then the conversion calculation would be:</p>\n\n<p>From Value * From Conversion * 1/To Conversion</p>\n\n<p>For instance from 1 GBP to Euro would be:</p>\n\n<p>1 * 1.60 * (1/1.29) = 1.24 </p>\n\n<p>If  you store all of your rates in a HashMap then you can avoid the switch statements completely.</p>\n"},{"tags":[],"owner":{"account_id":7837687,"reputation":1295,"user_id":5925085,"accept_rate":97,"display_name":"Tano"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1473246626,"creation_date":1473246626,"answer_id":39368306,"question_id":26457601,"body_markdown":"Why you are using this way to convert currency. You have the **JSR 354 Money and Currency API** here are some examples you can use, its really easy to use and fast:\r\n\r\n    MonetaryAmount&#160;monetaryAmount&#160;=&#160;Money.of(100.20,&#160;usd);\r\n    CurrencyUnit&#160;currency&#160;=&#160;monetaryAmount.getCurrency();\r\n    NumberValue&#160;numberValue&#160;=&#160;monetaryAmount.getNumber();\r\n    &#160;\r\n    int&#160;value=&#160;numberValue.intValue();","title":"Basic Currency Converter - Looking for feedback","body":"<p>Why you are using this way to convert currency. You have the <strong>JSR 354 Money and Currency API</strong> here are some examples you can use, its really easy to use and fast:</p>\n\n<pre><code>MonetaryAmount monetaryAmount = Money.of(100.20, usd);\nCurrencyUnit currency = monetaryAmount.getCurrency();\nNumberValue numberValue = monetaryAmount.getNumber();\n \nint value= numberValue.intValue();\n</code></pre>\n"}],"owner":{"account_id":5197257,"reputation":73,"user_id":4158039,"accept_rate":83,"display_name":"2redgoose"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23021,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":4,"score":0,"last_activity_date":1692961620,"creation_date":1413770801,"question_id":26457601,"body_markdown":"This is my basic currency converter for my intro to java class. I&#39;m supposed to be able to convert between yen, dollars, pounds and euros using static rates. It works, but I was curious to know if I did it in the most efficient way possible. It seems quite long and looks like a huge mess. Just wanting some feedback.\r\n\r\n    import java.util.Scanner;\r\n\r\n    public class currency\r\n    {\r\n       \r\n         public currency()\r\n        {\r\n            char us_dollar_sym = 36;\r\n            char pound_sym = 163;\r\n            char yen_sym = 165;\r\n            char euro_sym = 8364; \r\n        \r\n            String us_dollar = &quot;Dollars&quot;; \r\n            String pound = &quot;Pounds&quot;;\r\n            String yen = &quot;Yen&quot;;\r\n            String euro = &quot;Euros&quot;;\r\n            double rate = 0;\r\n            \r\n          \r\n            // Interface\r\n            System.out.println(&quot;Welcome to the Currency Converter Program \\n&quot;);\r\n            System.out.println(&quot;Use the following codes to input your currency choices: \\n 1 - US dollars \\n 2 - Euros \\n 3 - British Pounds \\n 4 - Japanese Yen \\n&quot;);\r\n           \r\n            // \r\n            System.out.println(&quot;Please choose the input currency:&quot;);\r\n            Scanner in = new Scanner(System.in);\r\n            int choice = in.nextInt(); \r\n            \r\n           String inType = null;\r\n            switch(choice) {\r\n            case 1: inType = &quot;US Dollars &gt;&gt; &quot; + us_dollar_sym;  break;\r\n            case 2: inType = &quot;Euros &gt;&gt; &quot; + euro_sym; break;\r\n            case 3: inType = &quot;British Pounds &gt;&gt; &quot; + pound_sym; break;\r\n            case 4: inType = &quot;Japanese Yen &gt;&gt; &quot; + yen_sym; break;\r\n            default:\r\n            System.out.println(&quot;Please restart the program &amp; enter a number from the list.&quot;);\r\n            return;\r\n          }\r\n    \r\n            System.out.println(&quot;Please choose the output currency&quot;);\r\n            int output = in.nextInt();\r\n            \r\n            System.out.printf(&quot;Now enter the input in &quot; + inType);\r\n            double input = in.nextDouble(); \r\n            \r\n          if (choice == output) \r\n            System.out.println(&quot;Same currency no need to convert&quot;);\r\n       \r\n          if (choice == 1 &amp;&amp; output == 2)\r\n            { \r\n               double dollar_euro_rate = 0.78391;\r\n               rate = input * dollar_euro_rate;\r\n               System.out.printf( &quot;%s&quot; + input + &quot; at a conversion rate of &quot; + dollar_euro_rate + &quot; Dollars to %s = %.2f\\n&quot;, (char)us_dollar_sym, euro, rate);\r\n            }\r\n            else if (choice == 1 &amp;&amp; output == 3){ \r\n               double dollar_pound_rate = 0.621484;\r\n               rate = input * dollar_pound_rate;\r\n               System.out.printf( &quot;%s&quot; + input + &quot; at a conversion rate of &quot; + dollar_pound_rate + &quot; Dollars to %s = %.2f\\n&quot;, (char)us_dollar_sym, pound, rate);\r\n            }\r\n            else if (choice == 1 &amp;&amp; output == 4){ \r\n              double dollar_yen_rate = 107.174;\r\n              rate = input * dollar_yen_rate;\r\n              System.out.printf( &quot;%s&quot; + input + &quot; at a conversion rate of &quot; + dollar_yen_rate + &quot; Dollars to %s = %.2f\\n&quot;, (char)us_dollar_sym, yen, rate);\r\n            }\r\n          if (choice == 2 &amp;&amp; output == 1)\r\n          {\r\n              double euro_dollar_rate = 1.27579;\r\n              rate = input * euro_dollar_rate;\r\n              System.out.printf( &quot;%s&quot; + input + &quot; at a conversion rate of &quot; + euro_dollar_rate + &quot; Euros to %s = %.2f\\n&quot;, (char)euro_sym, us_dollar, rate);\r\n            }\r\n            else if (choice == 2 &amp;&amp; output == 3)\r\n            {\r\n              double euro_pound_rate = 0.792648;\r\n              rate = input * euro_pound_rate;\r\n              System.out.printf( &quot;%s&quot; + input + &quot; at a conversion rate of &quot; + euro_pound_rate + &quot; Euros to %s = %.2f\\n&quot;, (char)euro_sym, pound, rate);\r\n            }\r\n            else if (choice == 2 &amp;&amp; output == 4)\r\n            {\r\n              double euro_yen_rate = 136.708;\r\n              rate = input * euro_yen_rate;\r\n              System.out.printf( &quot;%s&quot; + input + &quot; at a conversion rate of &quot; + euro_yen_rate + &quot; Euros to %s = %.2f\\n&quot;, (char)euro_sym, yen, rate);\r\n            }\r\n          if (choice == 3 &amp;&amp; output == 1)\r\n          {\r\n              double pound_dollar_rate = 1.60972;\r\n              System.out.printf( &quot;%s&quot; + input + &quot; at a conversion rate of &quot; + pound_dollar_rate + &quot; Pounds to %s = %.2f\\n&quot;, (char)pound_sym, us_dollar, rate);\r\n            }\r\n            else if (choice == 3 &amp;&amp; output == 2)\r\n            {\r\n              double pound_euro_rate = 1.26161;\r\n              System.out.printf( &quot;%s&quot; + input + &quot; at a conversion rate of &quot; + pound_euro_rate + &quot; Pounds to %s = %.2f\\n&quot;, (char)pound_sym, euro, rate);\r\n            }\r\n            else if (choice == 3 &amp;&amp; output == 4)\r\n            {\r\n              double pound_yen_rate = 172.511;\r\n              System.out.printf( &quot;%s&quot; + input + &quot; at a conversion rate of &quot; + pound_yen_rate + &quot; Pounds to %s = %.2f\\n&quot;, (char)pound_sym, yen, rate);\r\n            }\r\n          if (choice == 4 &amp;&amp; output == 1)\r\n          { \r\n              double yen_dollar_rate = 0.00932574;\r\n              System.out.printf( &quot;%s&quot; + input + &quot; at a conversion rate of &quot; + yen_dollar_rate + &quot; Yen to %s = %.2f\\n&quot;, (char)yen_sym, us_dollar, rate);\r\n            }\r\n            else if (choice == 4 &amp;&amp; output == 2)\r\n            { \r\n              double yen_euro_rate = 0.00730615;\r\n              System.out.printf( &quot;%s&quot; + input + &quot; at a conversion rate of &quot; + yen_euro_rate + &quot; Yen to %s = %.2f\\n&quot;, (char)yen_sym, euro, rate);\r\n            }\r\n            else if (choice == 4 &amp;&amp; output == 3)\r\n            {\r\n              double yen_pound_rate = 0.00579135;\r\n              System.out.printf( &quot;%s&quot; + input + &quot; at a conversion rate of &quot; + yen_pound_rate + &quot; Yen to %s = %.2f\\n&quot;, (char)yen_sym, pound, rate);\r\n            }\r\n           System.out.println(&quot;Thank you for using the currency converter&quot;);\r\n        }\r\n    }","title":"Basic Currency Converter - Looking for feedback","body":"<p>This is my basic currency converter for my intro to java class. I'm supposed to be able to convert between yen, dollars, pounds and euros using static rates. It works, but I was curious to know if I did it in the most efficient way possible. It seems quite long and looks like a huge mess. Just wanting some feedback.</p>\n\n<pre><code>import java.util.Scanner;\n\npublic class currency\n{\n\n     public currency()\n    {\n        char us_dollar_sym = 36;\n        char pound_sym = 163;\n        char yen_sym = 165;\n        char euro_sym = 8364; \n\n        String us_dollar = \"Dollars\"; \n        String pound = \"Pounds\";\n        String yen = \"Yen\";\n        String euro = \"Euros\";\n        double rate = 0;\n\n\n        // Interface\n        System.out.println(\"Welcome to the Currency Converter Program \\n\");\n        System.out.println(\"Use the following codes to input your currency choices: \\n 1 - US dollars \\n 2 - Euros \\n 3 - British Pounds \\n 4 - Japanese Yen \\n\");\n\n        // \n        System.out.println(\"Please choose the input currency:\");\n        Scanner in = new Scanner(System.in);\n        int choice = in.nextInt(); \n\n       String inType = null;\n        switch(choice) {\n        case 1: inType = \"US Dollars &gt;&gt; \" + us_dollar_sym;  break;\n        case 2: inType = \"Euros &gt;&gt; \" + euro_sym; break;\n        case 3: inType = \"British Pounds &gt;&gt; \" + pound_sym; break;\n        case 4: inType = \"Japanese Yen &gt;&gt; \" + yen_sym; break;\n        default:\n        System.out.println(\"Please restart the program &amp; enter a number from the list.\");\n        return;\n      }\n\n        System.out.println(\"Please choose the output currency\");\n        int output = in.nextInt();\n\n        System.out.printf(\"Now enter the input in \" + inType);\n        double input = in.nextDouble(); \n\n      if (choice == output) \n        System.out.println(\"Same currency no need to convert\");\n\n      if (choice == 1 &amp;&amp; output == 2)\n        { \n           double dollar_euro_rate = 0.78391;\n           rate = input * dollar_euro_rate;\n           System.out.printf( \"%s\" + input + \" at a conversion rate of \" + dollar_euro_rate + \" Dollars to %s = %.2f\\n\", (char)us_dollar_sym, euro, rate);\n        }\n        else if (choice == 1 &amp;&amp; output == 3){ \n           double dollar_pound_rate = 0.621484;\n           rate = input * dollar_pound_rate;\n           System.out.printf( \"%s\" + input + \" at a conversion rate of \" + dollar_pound_rate + \" Dollars to %s = %.2f\\n\", (char)us_dollar_sym, pound, rate);\n        }\n        else if (choice == 1 &amp;&amp; output == 4){ \n          double dollar_yen_rate = 107.174;\n          rate = input * dollar_yen_rate;\n          System.out.printf( \"%s\" + input + \" at a conversion rate of \" + dollar_yen_rate + \" Dollars to %s = %.2f\\n\", (char)us_dollar_sym, yen, rate);\n        }\n      if (choice == 2 &amp;&amp; output == 1)\n      {\n          double euro_dollar_rate = 1.27579;\n          rate = input * euro_dollar_rate;\n          System.out.printf( \"%s\" + input + \" at a conversion rate of \" + euro_dollar_rate + \" Euros to %s = %.2f\\n\", (char)euro_sym, us_dollar, rate);\n        }\n        else if (choice == 2 &amp;&amp; output == 3)\n        {\n          double euro_pound_rate = 0.792648;\n          rate = input * euro_pound_rate;\n          System.out.printf( \"%s\" + input + \" at a conversion rate of \" + euro_pound_rate + \" Euros to %s = %.2f\\n\", (char)euro_sym, pound, rate);\n        }\n        else if (choice == 2 &amp;&amp; output == 4)\n        {\n          double euro_yen_rate = 136.708;\n          rate = input * euro_yen_rate;\n          System.out.printf( \"%s\" + input + \" at a conversion rate of \" + euro_yen_rate + \" Euros to %s = %.2f\\n\", (char)euro_sym, yen, rate);\n        }\n      if (choice == 3 &amp;&amp; output == 1)\n      {\n          double pound_dollar_rate = 1.60972;\n          System.out.printf( \"%s\" + input + \" at a conversion rate of \" + pound_dollar_rate + \" Pounds to %s = %.2f\\n\", (char)pound_sym, us_dollar, rate);\n        }\n        else if (choice == 3 &amp;&amp; output == 2)\n        {\n          double pound_euro_rate = 1.26161;\n          System.out.printf( \"%s\" + input + \" at a conversion rate of \" + pound_euro_rate + \" Pounds to %s = %.2f\\n\", (char)pound_sym, euro, rate);\n        }\n        else if (choice == 3 &amp;&amp; output == 4)\n        {\n          double pound_yen_rate = 172.511;\n          System.out.printf( \"%s\" + input + \" at a conversion rate of \" + pound_yen_rate + \" Pounds to %s = %.2f\\n\", (char)pound_sym, yen, rate);\n        }\n      if (choice == 4 &amp;&amp; output == 1)\n      { \n          double yen_dollar_rate = 0.00932574;\n          System.out.printf( \"%s\" + input + \" at a conversion rate of \" + yen_dollar_rate + \" Yen to %s = %.2f\\n\", (char)yen_sym, us_dollar, rate);\n        }\n        else if (choice == 4 &amp;&amp; output == 2)\n        { \n          double yen_euro_rate = 0.00730615;\n          System.out.printf( \"%s\" + input + \" at a conversion rate of \" + yen_euro_rate + \" Yen to %s = %.2f\\n\", (char)yen_sym, euro, rate);\n        }\n        else if (choice == 4 &amp;&amp; output == 3)\n        {\n          double yen_pound_rate = 0.00579135;\n          System.out.printf( \"%s\" + input + \" at a conversion rate of \" + yen_pound_rate + \" Yen to %s = %.2f\\n\", (char)yen_sym, pound, rate);\n        }\n       System.out.println(\"Thank you for using the currency converter\");\n    }\n}\n</code></pre>\n"},{"tags":["java","arrays","json","parsing","webclient"],"comments":[{"owner":{"account_id":4663157,"reputation":15204,"user_id":3776927,"display_name":"derpirscher"},"score":0,"creation_date":1693064652,"post_id":76976507,"comment_id":135711971,"body_markdown":"your JSON response is an array, yet you are trying to parse it to an object.","body":"your JSON response is an array, yet you are trying to parse it to an object."},{"owner":{"account_id":5137581,"reputation":340,"user_id":4115835,"accept_rate":15,"display_name":"Loren"},"score":0,"creation_date":1693152621,"post_id":76976507,"comment_id":135719409,"body_markdown":"so should I convert private List&lt;Error&gt; errors to array?","body":"so should I convert private List&lt;Error&gt; errors to array?"},{"owner":{"account_id":4663157,"reputation":15204,"user_id":3776927,"display_name":"derpirscher"},"score":0,"creation_date":1693154106,"post_id":76976507,"comment_id":135719588,"body_markdown":"No, you should parse your JSON to a `List&lt;Response&gt;`","body":"No, you should parse your JSON to a <code>List&lt;Response&gt;</code>"}],"owner":{"account_id":5137581,"reputation":340,"user_id":4115835,"accept_rate":15,"display_name":"Loren"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1692960759,"creation_date":1692960759,"question_id":76976507,"body_markdown":"I am trying to map failed response of an api to a java class. The failed response looks like this . The 200OK response is getting mapped correctly in ordersList object but in failure scenario , server is returning below json (I cannot change the response owned by 3rdParty)\r\n\r\n    [\r\n        {\r\n        &quot;errorCode&quot;: &quot;404&quot;,\r\n        &quot;errorMessage&quot;: &quot;Data not found&quot;\r\n        }\r\n    ] \r\n\r\nPojo\r\n\r\n    @JsonIgnoreProperties(ignoreUnknown = true)\r\n    @Data\r\n    @Builder\r\n    public class Response {\r\n\r\n    private int total;\r\n    private String errorCode;\r\n    private String errorMessage;\r\n    private String description;\r\n    private List&lt;Order&gt; ordersList;\r\n    private List&lt;Error&gt; errors;\r\n    }\r\n\r\nThis is how I am calling the api\r\n\r\n      Response response =\r\n          webClient\r\n              .post()\r\n              .uri(url, uri -&gt; uri.queryParam(Constants.QUERY_PARAM).build())\r\n              .header(&quot;Content-Type&quot;, &quot;application/json&quot;)\r\n              .bodyValue(request)\r\n              .retrieve()\r\n              .bodyToMono(Response.class)\r\n              .block();\r\n   ","title":"Parse JsonArray without any root to POJO class in Java","body":"<p>I am trying to map failed response of an api to a java class. The failed response looks like this . The 200OK response is getting mapped correctly in ordersList object but in failure scenario , server is returning below json (I cannot change the response owned by 3rdParty)</p>\n<pre><code>[\n    {\n    &quot;errorCode&quot;: &quot;404&quot;,\n    &quot;errorMessage&quot;: &quot;Data not found&quot;\n    }\n] \n</code></pre>\n<p>Pojo</p>\n<pre><code>@JsonIgnoreProperties(ignoreUnknown = true)\n@Data\n@Builder\npublic class Response {\n\nprivate int total;\nprivate String errorCode;\nprivate String errorMessage;\nprivate String description;\nprivate List&lt;Order&gt; ordersList;\nprivate List&lt;Error&gt; errors;\n}\n</code></pre>\n<p>This is how I am calling the api</p>\n<pre><code>  Response response =\n      webClient\n          .post()\n          .uri(url, uri -&gt; uri.queryParam(Constants.QUERY_PARAM).build())\n          .header(&quot;Content-Type&quot;, &quot;application/json&quot;)\n          .bodyValue(request)\n          .retrieve()\n          .bodyToMono(Response.class)\n          .block();\n</code></pre>\n"},{"tags":["java","web","tomcat","jaas"],"owner":{"account_id":19503247,"reputation":83,"user_id":14268800,"display_name":"ironmanAJ"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1692960395,"creation_date":1692946307,"question_id":76974887,"body_markdown":"**Quick Question:** Does Tomcat authentication (JAAS) maintain the `HttpRequest` object throughout the authentication process?\r\n\r\nFor example, let&#39;s say the request has an attribute `id`. Is this attribute maintained after the authentication flow, such as:\r\n\r\n`Custom Form` -&gt; `LoginContext` -&gt; `Appropriate Login Module` -&gt; `Creation of user principal` -&gt; `Custom Form`?\r\n\r\nAfter all these processes, does the request still contain the `id`? If it is maintained, how exactly is it preserved?\r\n\r\nPS I am not talking about Callbacks. ","title":"Tomcat Authentication Request","body":"<p><strong>Quick Question:</strong> Does Tomcat authentication (JAAS) maintain the <code>HttpRequest</code> object throughout the authentication process?</p>\n<p>For example, let's say the request has an attribute <code>id</code>. Is this attribute maintained after the authentication flow, such as:</p>\n<p><code>Custom Form</code> -&gt; <code>LoginContext</code> -&gt; <code>Appropriate Login Module</code> -&gt; <code>Creation of user principal</code> -&gt; <code>Custom Form</code>?</p>\n<p>After all these processes, does the request still contain the <code>id</code>? If it is maintained, how exactly is it preserved?</p>\n<p>PS I am not talking about Callbacks.</p>\n"},{"tags":["java","android","speech-recognition","speech-to-text","android-13"],"owner":{"account_id":12518162,"reputation":1,"user_id":9110544,"display_name":"Zaid"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":237,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692959925,"creation_date":1692955193,"question_id":76975870,"body_markdown":"I am building an android app and I&#39;m using speech recognition but while the app work just fine with Android 11 and any versions below, I&#39;ve encountered a roadblock with anything beyond Android 12. Despite investing a considerable amount of time into troubleshooting, the root cause of this issue is unknown to me. \r\n\r\nI even attempted to follow the suggestions provided in a related Stack Overflow post [**Here**](https://stackoverflow.com/questions/73516849/how-to-get-devices-default-speechservice-provider-android-api-13)\r\n\r\nUnfortunately, even after following these recommendations the result is the same.\r\n\r\n\r\n```\r\n@Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n\r\n           *************************\r\n\r\n          initSpeechRecognition(this);\r\n        speech.setRecognitionListener(this);\r\n        recognizerIntent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);\r\n        recognizerIntent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_PREFERENCE, &quot;en&quot;);\r\n        recognizerIntent.putExtra(RecognizerIntent.EXTRA_CALLING_PACKAGE, this.getPackageName());\r\n        recognizerIntent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,                 RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);\r\n        recognizerIntent.putExtra(RecognizerIntent.EXTRA_CALLING_PACKAGE, this.getPackageName());\r\n\r\n}\r\n```\r\n\r\n\r\n```\r\npublic void initSpeechRecognition(Activity activity) {\r\n        String recognitionServiceName = getAvailableVoiceRecognitionService(activity);\r\n        if (recognitionServiceName == null)\r\n            return;\r\n\r\n        speech = SpeechRecognizer.createSpeechRecognizer(activity,\r\n                ComponentName.unflattenFromString(recognitionServiceName));\r\n        Log.i(&quot;TEST&quot;, recognitionServiceName);\r\n    }\r\n\r\n    public static String getAvailableVoiceRecognitionService(Activity activity) {\r\n        final List&lt;ResolveInfo&gt; services = activity.getPackageManager().queryIntentServices(\r\n                new Intent(RecognitionService.SERVICE_INTERFACE), 0);\r\n\r\n        String recognitionServiceName = null;\r\n\r\n        for (final ResolveInfo info : services) {\r\n            String packageName = info.serviceInfo.packageName;\r\n            String serviceName = info.serviceInfo.name;\r\n\r\n            String testRecognitionServiceName = packageName + &quot;/&quot; + serviceName;\r\n\r\n            ServiceConnection connection = new ServiceConnection() {\r\n                @Override\r\n                public void onServiceConnected(ComponentName name, IBinder service) {\r\n                    Log.i(&quot;TEST&quot;, name + &quot;::&quot; + service);\r\n                }\r\n\r\n                @Override\r\n                public void onServiceDisconnected(ComponentName name) {\r\n                    Log.i(&quot;TEST&quot;, name + &quot;::Disconnected&quot;);\r\n                }\r\n            };\r\n\r\n            Intent serviceIntent = new Intent(RecognitionService.SERVICE_INTERFACE);\r\n\r\n            ComponentName recognizerServiceComponent = ComponentName.unflattenFromString(testRecognitionServiceName);\r\n\r\n            if (recognizerServiceComponent != null) {\r\n                serviceIntent.setComponent(recognizerServiceComponent);\r\n                try {\r\n                    boolean isServiceAvailableToBind = activity.bindService(serviceIntent, connection, Context.BIND_AUTO_CREATE);\r\n                    if (isServiceAvailableToBind) {\r\n                        activity.unbindService(connection);\r\n                        recognitionServiceName = testRecognitionServiceName;\r\n                        break;\r\n                    }\r\n                } catch (SecurityException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        }\r\n\r\n        return recognitionServiceName;\r\n    }\r\n```\r\n\r\nand these are the rest of the methods\r\n\r\n\r\n```\r\n@Override\r\n    public void onBeginningOfSpeech() {\r\n        Log.i(VOICE_RECOGNITION, &quot;onBeginningOfSpeech&quot;);\r\n    }\r\n\r\n    @Override\r\n    public void onBufferReceived(byte[] buffer) {\r\n        Log.i(VOICE_RECOGNITION, &quot;onBufferReceived: &quot; + Arrays.toString(buffer));\r\n    }\r\n\r\n    @Override\r\n    public void onEndOfSpeech() {\r\n        Log.i(VOICE_RECOGNITION, &quot;onEndOfSpeech&quot;);\r\n    }\r\n\r\n    @Override\r\n    public void onError(int errorCode) {\r\n        String errorMessage = getErrorText(errorCode);\r\n        Log.d(VOICE_RECOGNITION, &quot;FAILED &quot; + errorMessage);\r\n    }\r\n\r\n    @Override\r\n    public void onEvent(int arg0, Bundle arg1) {\r\n        Log.i(VOICE_RECOGNITION, &quot;onEvent&quot;);\r\n    }\r\n\r\n    @Override\r\n    public void onPartialResults(Bundle arg0) {\r\n        Log.i(VOICE_RECOGNITION, &quot;onPartialResults&quot;);\r\n    }\r\n\r\n    @Override\r\n    public void onReadyForSpeech(Bundle arg0) {\r\n        Log.i(VOICE_RECOGNITION, &quot;onReadyForSpeech&quot;);\r\n    }\r\n\r\n    @Override\r\n    public void onResults(Bundle results) {\r\n        Log.i(VOICE_RECOGNITION, &quot;onResults&quot;);\r\n        ArrayList&lt;String&gt; matches = results.getStringArrayList(SpeechRecognizer.RESULTS_RECOGNITION);\r\n        StringBuilder text = new StringBuilder();\r\n        assert matches != null;\r\n        for (String result : matches) text.append(result).append(&quot;\\n&quot;);\r\n        audioToText.add(text.toString());\r\n        Log.i(VOICE_RECOGNITION, String.valueOf(audioToText));\r\n    }\r\n\r\n    @Override\r\n    public void onRmsChanged(float rmsdB) {\r\n        Log.i(VOICE_RECOGNITION, &quot;onRmsChanged: &quot; + rmsdB);\r\n    }\r\n\r\n    public static String getErrorText(int errorCode) {\r\n        String message;\r\n        switch (errorCode) {\r\n            case SpeechRecognizer.ERROR_AUDIO:\r\n                message = &quot;Audio recording error&quot;;\r\n                audioToText.add(&quot;audio recording error&quot;);\r\n                break;\r\n            case SpeechRecognizer.ERROR_CLIENT:\r\n                message = &quot;Client side error&quot;;\r\n                audioToText.add(&quot;client side error&quot;);\r\n                break;\r\n            case SpeechRecognizer.ERROR_INSUFFICIENT_PERMISSIONS:\r\n                message = &quot;Insufficient permissions&quot;;\r\n                audioToText.add(&quot;insufficient permissions&quot;);\r\n                break;\r\n            case SpeechRecognizer.ERROR_NETWORK:\r\n                message = &quot;Network error&quot;;\r\n                audioToText.add(&quot;network error&quot;);\r\n                break;\r\n            case SpeechRecognizer.ERROR_NETWORK_TIMEOUT:\r\n                message = &quot;Network timeout&quot;;\r\n                audioToText.add(&quot;network timeout&quot;);\r\n                break;\r\n            case SpeechRecognizer.ERROR_NO_MATCH:\r\n                message = &quot;No match&quot;;\r\n                audioToText.add(&quot;no audio detected&quot;);\r\n                break;\r\n            case SpeechRecognizer.ERROR_RECOGNIZER_BUSY:\r\n                message = &quot;RecognitionService busy&quot;;\r\n                audioToText.add(&quot;recognition service busy&quot;);\r\n                break;\r\n            case SpeechRecognizer.ERROR_SERVER:\r\n                message = &quot;error from server&quot;;\r\n                audioToText.add(&quot;error from server&quot;);\r\n                break;\r\n            case SpeechRecognizer.ERROR_SPEECH_TIMEOUT:\r\n                message = &quot;No speech input&quot;;\r\n                audioToText.add(&quot;no speech input&quot;);\r\n                break;\r\n            default:\r\n                message = &quot;Didn&#39;t understand, please try again.&quot;;\r\n                audioToText.add(&quot;no audio detected&quot;);\r\n                break;\r\n        }\r\n        return message;\r\n    }\r\n```\r\n\r\nI also have the code for startListening() and stopListening() in their appropriate positions and they are triggered just fine.\r\n\r\nhere is also my the part of the log that get triggered when the app start listening to the speech \r\n\r\n\r\n```\r\n2023-08-25 12:07:55.696 31209-31209 Voice Recognition     I  onReadyForSpeech\r\n2023-08-25 12:07:55.730 31209-31209 Voice Recognition     I  onRmsChanged: -2.0\r\n2023-08-25 12:07:58.091 31209-31209 Voice Recognition     D  FAILED No match\r\n```\r\n\r\n\r\nI know the app is working fine on a device with android 10 that I have but not with another device that has android 13 and I know that google had made some changes in the Speech Recognizer in android 12 and 13 but there is no place on the internet that properly show how you can implement the changes to the SpeechService and make it work on android 13 even on the official documentation website there is no single snippet of code to show how to implement speech recognition with android 13.\r\n\r\n\r\nCould anyone provide insights into this matter or suggest potential solutions? Your assistance would be immensely appreciated.\r\n","title":"Speech Recognition on Android 13","body":"<p>I am building an android app and I'm using speech recognition but while the app work just fine with Android 11 and any versions below, I've encountered a roadblock with anything beyond Android 12. Despite investing a considerable amount of time into troubleshooting, the root cause of this issue is unknown to me.</p>\n<p>I even attempted to follow the suggestions provided in a related Stack Overflow post <a href=\"https://stackoverflow.com/questions/73516849/how-to-get-devices-default-speechservice-provider-android-api-13\"><strong>Here</strong></a></p>\n<p>Unfortunately, even after following these recommendations the result is the same.</p>\n<pre><code>@Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n           *************************\n\n          initSpeechRecognition(this);\n        speech.setRecognitionListener(this);\n        recognizerIntent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);\n        recognizerIntent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_PREFERENCE, &quot;en&quot;);\n        recognizerIntent.putExtra(RecognizerIntent.EXTRA_CALLING_PACKAGE, this.getPackageName());\n        recognizerIntent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,                 RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);\n        recognizerIntent.putExtra(RecognizerIntent.EXTRA_CALLING_PACKAGE, this.getPackageName());\n\n}\n</code></pre>\n<pre><code>public void initSpeechRecognition(Activity activity) {\n        String recognitionServiceName = getAvailableVoiceRecognitionService(activity);\n        if (recognitionServiceName == null)\n            return;\n\n        speech = SpeechRecognizer.createSpeechRecognizer(activity,\n                ComponentName.unflattenFromString(recognitionServiceName));\n        Log.i(&quot;TEST&quot;, recognitionServiceName);\n    }\n\n    public static String getAvailableVoiceRecognitionService(Activity activity) {\n        final List&lt;ResolveInfo&gt; services = activity.getPackageManager().queryIntentServices(\n                new Intent(RecognitionService.SERVICE_INTERFACE), 0);\n\n        String recognitionServiceName = null;\n\n        for (final ResolveInfo info : services) {\n            String packageName = info.serviceInfo.packageName;\n            String serviceName = info.serviceInfo.name;\n\n            String testRecognitionServiceName = packageName + &quot;/&quot; + serviceName;\n\n            ServiceConnection connection = new ServiceConnection() {\n                @Override\n                public void onServiceConnected(ComponentName name, IBinder service) {\n                    Log.i(&quot;TEST&quot;, name + &quot;::&quot; + service);\n                }\n\n                @Override\n                public void onServiceDisconnected(ComponentName name) {\n                    Log.i(&quot;TEST&quot;, name + &quot;::Disconnected&quot;);\n                }\n            };\n\n            Intent serviceIntent = new Intent(RecognitionService.SERVICE_INTERFACE);\n\n            ComponentName recognizerServiceComponent = ComponentName.unflattenFromString(testRecognitionServiceName);\n\n            if (recognizerServiceComponent != null) {\n                serviceIntent.setComponent(recognizerServiceComponent);\n                try {\n                    boolean isServiceAvailableToBind = activity.bindService(serviceIntent, connection, Context.BIND_AUTO_CREATE);\n                    if (isServiceAvailableToBind) {\n                        activity.unbindService(connection);\n                        recognitionServiceName = testRecognitionServiceName;\n                        break;\n                    }\n                } catch (SecurityException e) {\n                    e.printStackTrace();\n                }\n            }\n        }\n\n        return recognitionServiceName;\n    }\n</code></pre>\n<p>and these are the rest of the methods</p>\n<pre><code>@Override\n    public void onBeginningOfSpeech() {\n        Log.i(VOICE_RECOGNITION, &quot;onBeginningOfSpeech&quot;);\n    }\n\n    @Override\n    public void onBufferReceived(byte[] buffer) {\n        Log.i(VOICE_RECOGNITION, &quot;onBufferReceived: &quot; + Arrays.toString(buffer));\n    }\n\n    @Override\n    public void onEndOfSpeech() {\n        Log.i(VOICE_RECOGNITION, &quot;onEndOfSpeech&quot;);\n    }\n\n    @Override\n    public void onError(int errorCode) {\n        String errorMessage = getErrorText(errorCode);\n        Log.d(VOICE_RECOGNITION, &quot;FAILED &quot; + errorMessage);\n    }\n\n    @Override\n    public void onEvent(int arg0, Bundle arg1) {\n        Log.i(VOICE_RECOGNITION, &quot;onEvent&quot;);\n    }\n\n    @Override\n    public void onPartialResults(Bundle arg0) {\n        Log.i(VOICE_RECOGNITION, &quot;onPartialResults&quot;);\n    }\n\n    @Override\n    public void onReadyForSpeech(Bundle arg0) {\n        Log.i(VOICE_RECOGNITION, &quot;onReadyForSpeech&quot;);\n    }\n\n    @Override\n    public void onResults(Bundle results) {\n        Log.i(VOICE_RECOGNITION, &quot;onResults&quot;);\n        ArrayList&lt;String&gt; matches = results.getStringArrayList(SpeechRecognizer.RESULTS_RECOGNITION);\n        StringBuilder text = new StringBuilder();\n        assert matches != null;\n        for (String result : matches) text.append(result).append(&quot;\\n&quot;);\n        audioToText.add(text.toString());\n        Log.i(VOICE_RECOGNITION, String.valueOf(audioToText));\n    }\n\n    @Override\n    public void onRmsChanged(float rmsdB) {\n        Log.i(VOICE_RECOGNITION, &quot;onRmsChanged: &quot; + rmsdB);\n    }\n\n    public static String getErrorText(int errorCode) {\n        String message;\n        switch (errorCode) {\n            case SpeechRecognizer.ERROR_AUDIO:\n                message = &quot;Audio recording error&quot;;\n                audioToText.add(&quot;audio recording error&quot;);\n                break;\n            case SpeechRecognizer.ERROR_CLIENT:\n                message = &quot;Client side error&quot;;\n                audioToText.add(&quot;client side error&quot;);\n                break;\n            case SpeechRecognizer.ERROR_INSUFFICIENT_PERMISSIONS:\n                message = &quot;Insufficient permissions&quot;;\n                audioToText.add(&quot;insufficient permissions&quot;);\n                break;\n            case SpeechRecognizer.ERROR_NETWORK:\n                message = &quot;Network error&quot;;\n                audioToText.add(&quot;network error&quot;);\n                break;\n            case SpeechRecognizer.ERROR_NETWORK_TIMEOUT:\n                message = &quot;Network timeout&quot;;\n                audioToText.add(&quot;network timeout&quot;);\n                break;\n            case SpeechRecognizer.ERROR_NO_MATCH:\n                message = &quot;No match&quot;;\n                audioToText.add(&quot;no audio detected&quot;);\n                break;\n            case SpeechRecognizer.ERROR_RECOGNIZER_BUSY:\n                message = &quot;RecognitionService busy&quot;;\n                audioToText.add(&quot;recognition service busy&quot;);\n                break;\n            case SpeechRecognizer.ERROR_SERVER:\n                message = &quot;error from server&quot;;\n                audioToText.add(&quot;error from server&quot;);\n                break;\n            case SpeechRecognizer.ERROR_SPEECH_TIMEOUT:\n                message = &quot;No speech input&quot;;\n                audioToText.add(&quot;no speech input&quot;);\n                break;\n            default:\n                message = &quot;Didn't understand, please try again.&quot;;\n                audioToText.add(&quot;no audio detected&quot;);\n                break;\n        }\n        return message;\n    }\n</code></pre>\n<p>I also have the code for startListening() and stopListening() in their appropriate positions and they are triggered just fine.</p>\n<p>here is also my the part of the log that get triggered when the app start listening to the speech</p>\n<pre><code>2023-08-25 12:07:55.696 31209-31209 Voice Recognition     I  onReadyForSpeech\n2023-08-25 12:07:55.730 31209-31209 Voice Recognition     I  onRmsChanged: -2.0\n2023-08-25 12:07:58.091 31209-31209 Voice Recognition     D  FAILED No match\n</code></pre>\n<p>I know the app is working fine on a device with android 10 that I have but not with another device that has android 13 and I know that google had made some changes in the Speech Recognizer in android 12 and 13 but there is no place on the internet that properly show how you can implement the changes to the SpeechService and make it work on android 13 even on the official documentation website there is no single snippet of code to show how to implement speech recognition with android 13.</p>\n<p>Could anyone provide insights into this matter or suggest potential solutions? Your assistance would be immensely appreciated.</p>\n"},{"tags":["java","apache-poi","pdfbox"],"comments":[{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":1,"creation_date":1692969464,"post_id":76976308,"comment_id":135701117,"body_markdown":"Please link to your PDF so we can have a look. Your code looks ok IMHO. (Unrelated: you&#39;ll get more performance with `PDDocument.load(new File(filepath))` than by using a stream)","body":"Please link to your PDF so we can have a look. Your code looks ok IMHO. (Unrelated: you&#39;ll get more performance with <code>PDDocument.load(new File(filepath))</code> than by using a stream)"},{"owner":{"account_id":22450291,"reputation":364,"user_id":16653700,"display_name":"Alias Cartellano"},"score":1,"creation_date":1692988893,"post_id":76976308,"comment_id":135705322,"body_markdown":"Try looking at [How to extract hyperlink information PDFBox](https://stackoverflow.com/questions/38587567/how-to-extract-hyperlink-information-pdfbox).","body":"Try looking at <a href=\"https://stackoverflow.com/questions/38587567/how-to-extract-hyperlink-information-pdfbox\">How to extract hyperlink information PDFBox</a>."},{"owner":{"account_id":29274493,"reputation":11,"user_id":22428538,"display_name":"Esha Agarwal"},"score":0,"creation_date":1693196738,"post_id":76976308,"comment_id":135723210,"body_markdown":"Hi, I am getting this error in my console screen:\n\nUsage: AddDimensionedImage imageFile outputFile","body":"Hi, I am getting this error in my console screen:  Usage: AddDimensionedImage imageFile outputFile"},{"owner":{"account_id":29274493,"reputation":11,"user_id":22428538,"display_name":"Esha Agarwal"},"score":0,"creation_date":1693196788,"post_id":76976308,"comment_id":135723213,"body_markdown":"I am using normal sample pdf doc with a link to google and yahoo site.","body":"I am using normal sample pdf doc with a link to google and yahoo site."},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1693208071,"post_id":76976308,"comment_id":135724662,"body_markdown":"Your code does not have &quot;AddDimensionedImage&quot; in it.","body":"Your code does not have &quot;AddDimensionedImage&quot; in it."},{"owner":{"account_id":29274493,"reputation":11,"user_id":22428538,"display_name":"Esha Agarwal"},"score":0,"creation_date":1693209894,"post_id":76976308,"comment_id":135724997,"body_markdown":"So what we need to do in this case?","body":"So what we need to do in this case?"},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1693237671,"post_id":76976308,"comment_id":135730822,"body_markdown":"1) Share your document, 2) Post the relevant code. You claim that you&#39;re getting the error &quot;AddDimensionedImage imageFile outputFile&quot; but your code does no such thing.","body":"1) Share your document, 2) Post the relevant code. You claim that you&#39;re getting the error &quot;AddDimensionedImage imageFile outputFile&quot; but your code does no such thing."}],"owner":{"account_id":29274493,"reputation":11,"user_id":22428538,"display_name":"Esha Agarwal"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692958731,"creation_date":1692958731,"question_id":76976308,"body_markdown":"I am trying to extract hyperlinks and its corresponding URL by hovering on it from PDF file and trying to print it.\r\n\r\n\r\n\r\n\r\nI tried to use Apache PDFBox library in my code but getting no results. Can anyone help me through this?\r\n\r\nCode which i am trying:\r\n\r\n    FileInputStream fis = new FileInputStream(filepath);\r\n\t\t\tPDDocument document = PDDocument.load(fis);\r\n\t\t\tList&lt;PDPage&gt; pages = (List&lt;PDPage&gt;) document.getPages();\r\n\t\t\tfor (PDPage page : pages) {\r\n                List&lt;PDAnnotation&gt; annotations = page.getAnnotations();\r\n                for (PDAnnotation annotation : annotations) {\r\n                    if (annotation instanceof PDAnnotationLink) {\r\n                        PDAnnotationLink link = (PDAnnotationLink) annotation;\r\n                        PDActionURI action = (PDActionURI) link.getAction();\r\n                        if (action != null) {\r\n                            String url = action.getURI();\r\n                            System.out.println(&quot;URL: &quot; + url);\r\n                        }\r\n                    }\r\n                }\r\n\t\t\t}","title":"Extract hyperlinks from PDF file","body":"<p>I am trying to extract hyperlinks and its corresponding URL by hovering on it from PDF file and trying to print it.</p>\n<p>I tried to use Apache PDFBox library in my code but getting no results. Can anyone help me through this?</p>\n<p>Code which i am trying:</p>\n<pre><code>FileInputStream fis = new FileInputStream(filepath);\n        PDDocument document = PDDocument.load(fis);\n        List&lt;PDPage&gt; pages = (List&lt;PDPage&gt;) document.getPages();\n        for (PDPage page : pages) {\n            List&lt;PDAnnotation&gt; annotations = page.getAnnotations();\n            for (PDAnnotation annotation : annotations) {\n                if (annotation instanceof PDAnnotationLink) {\n                    PDAnnotationLink link = (PDAnnotationLink) annotation;\n                    PDActionURI action = (PDActionURI) link.getAction();\n                    if (action != null) {\n                        String url = action.getURI();\n                        System.out.println(&quot;URL: &quot; + url);\n                    }\n                }\n            }\n        }\n</code></pre>\n"},{"tags":["java","cookies","servlets"],"answers":[{"tags":[],"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1692958418,"creation_date":1692901517,"answer_id":76972037,"question_id":74526476,"body_markdown":"## Servlet 6.0+\r\n\r\nIt&#39;s only possible since Servlet API version 6.0 (part of Jakarta EE 10) which introduced a new [`Cookie#setAttribute()`][1] method.\r\n\r\n```java\r\nCookie cookie = new Cookie(name, value);\r\ncookie.setMaxAge(maxAge);\r\ncookie.setAttribute(&quot;SameSite&quot;, &quot;None&quot;);\r\nresponse.addCookie(cookie);\r\n```\r\n\r\nNote that there&#39;s no [`Cookie#setSameSite()`][2] method for the very simple reason that [the proposal for the `SameSite` attribute][3], which was posted at 7 August 2017, is to the day of today [**still**][4] not part of the official HTTP cookie spec. This was also the reason why it took so long before it was possible to manipulate the `SameSite` attribute via the Servlet API. The Servlet API guys basically waited for it to end up in the official spec. But in the end it didn&#39;t seem to make it into the final spec as quick as expected but yet Google Chrome is already using it to full extent without backwards compatibility. So ultimately a more generic method was introduced and the rest of Cookie API was slightly adjusted ([initiated by yours truly][5]).\r\n\r\n## Servlet 5.0-\r\n\r\nIf you can&#39;t upgrade your servletcontainer to a version implementing a minimum of Servlet API version 6.0 (e.g. Tomcat 10.1+, Jetty 12+, WildFly 27+, GlassFish 7+, etc), then you&#39;ll have to create the cookie as a plain vanilla `String` [following the syntax of the `Set-Cookie` header][6] and add it to the response using [`HttpServletResponse#addHeader()`][7].\r\n\r\n```java\r\nString cookie = name + &quot;=&quot; + value + &quot;; Max-Age=&quot; + maxAge + &quot;; SameSite=None&quot;;\r\nresponse.addHeader(&quot;Set-Cookie&quot;, cookie);\r\n```\r\n\r\n\r\n## JSESSIONID cookie\r\n\r\nIf you actually wanted to manipulate the `SameSite` attribute of the servletcontainer&#39;s built-in `JSESSIONID` cookie, then you have to adjust the configuration of the server itself and/or the proxy in front of it. Consult its documentation for detail. \r\n\r\nIn case of for example Tomcat 8.5.48+/9.0.28+ you can [configure][8] it from the webapp on via `META-INF/context.xml` as follows:\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;Context&gt;\r\n   &lt;CookieProcessor sameSiteCookies=&quot;none&quot; /&gt;\r\n&lt;/Context&gt;\r\n```\r\n\r\nAnd in case of Jetty 9.4.23+ you can configure it from the webapp on via `WEB-INF/web.xml` with one of `__SAME_SITE_*__` constants defined in [`org.eclipse.jetty.http.HttpCookie`][9] as a cookie config **comment** as follows:\r\n\r\n```xml\r\n&lt;session-config&gt;\r\n    &lt;cookie-config&gt;\r\n        &lt;comment&gt;__SAME_SITE_NONE__&lt;/comment&gt;\r\n    &lt;/cookie-config&gt;\r\n&lt;/session-config&gt;\r\n```\r\n\r\n\r\n  [1]: https://jakarta.ee/specifications/servlet/6.0/apidocs/jakarta.servlet/jakarta/servlet/http/cookie#setAttribute(java.lang.String,java.lang.String)\r\n  [2]: https://github.com/jakartaee/servlet/issues/175\r\n  [3]: https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-rfc6265bis-02\r\n  [4]: https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-rfc6265bis-12\r\n  [5]: https://github.com/jakartaee/servlet/pull/399\r\n  [6]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie#syntax\r\n  [7]: https://jakarta.ee/specifications/servlet/6.0/apidocs/jakarta.servlet/jakarta/servlet/http/httpservletresponse#addHeader(java.lang.String,java.lang.String)\r\n  [8]: https://tomcat.apache.org/tomcat-8.5-doc/config/cookie-processor.html#Standard_Implementation\r\n  [9]: https://javadoc.io/static/org.eclipse.jetty/jetty-http/10.0.0.beta0/org.eclipse.jetty.http/org/eclipse/jetty/http/HttpCookie.html#field.summary","title":"How to specify SameSite value for javax.servlet.http.Cookie","body":"<h2>Servlet 6.0+</h2>\n<p>It's only possible since Servlet API version 6.0 (part of Jakarta EE 10) which introduced a new <a href=\"https://jakarta.ee/specifications/servlet/6.0/apidocs/jakarta.servlet/jakarta/servlet/http/cookie#setAttribute(java.lang.String,java.lang.String)\" rel=\"nofollow noreferrer\"><code>Cookie#setAttribute()</code></a> method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Cookie cookie = new Cookie(name, value);\ncookie.setMaxAge(maxAge);\ncookie.setAttribute(&quot;SameSite&quot;, &quot;None&quot;);\nresponse.addCookie(cookie);\n</code></pre>\n<p>Note that there's no <a href=\"https://github.com/jakartaee/servlet/issues/175\" rel=\"nofollow noreferrer\"><code>Cookie#setSameSite()</code></a> method for the very simple reason that <a href=\"https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-rfc6265bis-02\" rel=\"nofollow noreferrer\">the proposal for the <code>SameSite</code> attribute</a>, which was posted at 7 August 2017, is to the day of today <a href=\"https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-rfc6265bis-12\" rel=\"nofollow noreferrer\"><strong>still</strong></a> not part of the official HTTP cookie spec. This was also the reason why it took so long before it was possible to manipulate the <code>SameSite</code> attribute via the Servlet API. The Servlet API guys basically waited for it to end up in the official spec. But in the end it didn't seem to make it into the final spec as quick as expected but yet Google Chrome is already using it to full extent without backwards compatibility. So ultimately a more generic method was introduced and the rest of Cookie API was slightly adjusted (<a href=\"https://github.com/jakartaee/servlet/pull/399\" rel=\"nofollow noreferrer\">initiated by yours truly</a>).</p>\n<h2>Servlet 5.0-</h2>\n<p>If you can't upgrade your servletcontainer to a version implementing a minimum of Servlet API version 6.0 (e.g. Tomcat 10.1+, Jetty 12+, WildFly 27+, GlassFish 7+, etc), then you'll have to create the cookie as a plain vanilla <code>String</code> <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie#syntax\" rel=\"nofollow noreferrer\">following the syntax of the <code>Set-Cookie</code> header</a> and add it to the response using <a href=\"https://jakarta.ee/specifications/servlet/6.0/apidocs/jakarta.servlet/jakarta/servlet/http/httpservletresponse#addHeader(java.lang.String,java.lang.String)\" rel=\"nofollow noreferrer\"><code>HttpServletResponse#addHeader()</code></a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String cookie = name + &quot;=&quot; + value + &quot;; Max-Age=&quot; + maxAge + &quot;; SameSite=None&quot;;\nresponse.addHeader(&quot;Set-Cookie&quot;, cookie);\n</code></pre>\n<h2>JSESSIONID cookie</h2>\n<p>If you actually wanted to manipulate the <code>SameSite</code> attribute of the servletcontainer's built-in <code>JSESSIONID</code> cookie, then you have to adjust the configuration of the server itself and/or the proxy in front of it. Consult its documentation for detail.</p>\n<p>In case of for example Tomcat 8.5.48+/9.0.28+ you can <a href=\"https://tomcat.apache.org/tomcat-8.5-doc/config/cookie-processor.html#Standard_Implementation\" rel=\"nofollow noreferrer\">configure</a> it from the webapp on via <code>META-INF/context.xml</code> as follows:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Context&gt;\n   &lt;CookieProcessor sameSiteCookies=&quot;none&quot; /&gt;\n&lt;/Context&gt;\n</code></pre>\n<p>And in case of Jetty 9.4.23+ you can configure it from the webapp on via <code>WEB-INF/web.xml</code> with one of <code>__SAME_SITE_*__</code> constants defined in <a href=\"https://javadoc.io/static/org.eclipse.jetty/jetty-http/10.0.0.beta0/org.eclipse.jetty.http/org/eclipse/jetty/http/HttpCookie.html#field.summary\" rel=\"nofollow noreferrer\"><code>org.eclipse.jetty.http.HttpCookie</code></a> as a cookie config <strong>comment</strong> as follows:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;session-config&gt;\n    &lt;cookie-config&gt;\n        &lt;comment&gt;__SAME_SITE_NONE__&lt;/comment&gt;\n    &lt;/cookie-config&gt;\n&lt;/session-config&gt;\n</code></pre>\n"}],"owner":{"account_id":633896,"reputation":3552,"user_id":399637,"accept_rate":90,"display_name":"res1"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":236,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76972037,"answer_count":1,"score":2,"last_activity_date":1692958418,"creation_date":1669079418,"question_id":74526476,"body_markdown":"Having for example:\r\n\r\n```\r\nimport javax.servlet.http.Cookie;\r\n\r\n// some code ....\r\n\r\n\r\n\t\tCookie cookie = new Cookie(name, value);\r\n\t\t\r\n\t\tcookie.setMaxAge(someValue);\r\n```\r\nHow do I set [SameSite](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie/SameSite) value for it ?\r\n\r\nThanks for the help.","title":"How to specify SameSite value for javax.servlet.http.Cookie","body":"<p>Having for example:</p>\n<pre><code>import javax.servlet.http.Cookie;\n\n// some code ....\n\n\n        Cookie cookie = new Cookie(name, value);\n        \n        cookie.setMaxAge(someValue);\n</code></pre>\n<p>How do I set <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie/SameSite\" rel=\"nofollow noreferrer\">SameSite</a> value for it ?</p>\n<p>Thanks for the help.</p>\n"},{"tags":["java","performance","polymorphism","downcast","upcasting"],"comments":[{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1690747148,"post_id":76798687,"comment_id":135392883,"body_markdown":"Tip: Casting objects back and forth is often a sign of a poor design in your classes.","body":"Tip: Casting objects back and forth is often a sign of a poor design in your classes."},{"owner":{"account_id":27037859,"reputation":51,"user_id":20593183,"display_name":"Sourav Karjole"},"score":0,"creation_date":1690814848,"post_id":76798687,"comment_id":135401785,"body_markdown":"@BasilBourque Can you tell me where to learn these things properly and also i need someone so that i can clear my doubts ? I am already learning from Youtube but i need guidance too.","body":"@BasilBourque Can you tell me where to learn these things properly and also i need someone so that i can clear my doubts ? I am already learning from Youtube but i need guidance too."},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1690870346,"post_id":76798687,"comment_id":135409384,"body_markdown":"You cannot become a &quot;machine&quot; in programming, this part might be taken over by AI soon. Coding is a creative process, and like painting you just can learn the basic techniques, but then you have to practice and do life-long-learning on the job. There are online programming classes and automated courses, some of them are free, some are paid. I didn&#39;t participate in any of them so I cannot recommend a specific one, but if you search for &quot;code training&quot; or similar, you will find enough results.","body":"You cannot become a &quot;machine&quot; in programming, this part might be taken over by AI soon. Coding is a creative process, and like painting you just can learn the basic techniques, but then you have to practice and do life-long-learning on the job. There are online programming classes and automated courses, some of them are free, some are paid. I didn&#39;t participate in any of them so I cannot recommend a specific one, but if you search for &quot;code training&quot; or similar, you will find enough results."},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1690870417,"post_id":76798687,"comment_id":135409395,"body_markdown":"I also would like to add that [SO] is not the ideal place for learning programming in general, but more to solve specific problems, nuts that are hard to crack for you.","body":"I also would like to add that <a href=\"https://stackoverflow.com\">Stack Overflow</a> is not the ideal place for learning programming in general, but more to solve specific problems, nuts that are hard to crack for you."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1690873326,"post_id":76798687,"comment_id":135409936,"body_markdown":"Your question doesn&#39;t really make sense. You wouldn&#39;t create two objects just for the sake of having access to extra APIs. You would create an instance of the derived class, as in your first example, and then cast it to `Pen` if there were `Pen`-only APIs you wanted to call on it.","body":"Your question doesn&#39;t really make sense. You wouldn&#39;t create two objects just for the sake of having access to extra APIs. You would create an instance of the derived class, as in your first example, and then cast it to <code>Pen</code> if there were <code>Pen</code>-only APIs you wanted to call on it."},{"owner":{"account_id":18670408,"reputation":143,"user_id":13609359,"display_name":"Slevin"},"score":0,"creation_date":1690881038,"post_id":76798687,"comment_id":135411455,"body_markdown":"@cyberbrain you&#39;re right, SO is not the best platform to learn coding in general. But the big problem nowerdays is, that all former major forums (just to name Spring as an example) decided to close their doors and move to Stack Overflow - leaving a quick note that from now on the user should go to SO. But SO has much more restrictions in what you are allowed and what not than the former userfriendly communities. That&#39;s a big problem and a shame in general. So I will not blame a user who just wants to get information and clarification in any possible way ;)","body":"@cyberbrain you&#39;re right, SO is not the best platform to learn coding in general. But the big problem nowerdays is, that all former major forums (just to name Spring as an example) decided to close their doors and move to Stack Overflow - leaving a quick note that from now on the user should go to SO. But SO has much more restrictions in what you are allowed and what not than the former userfriendly communities. That&#39;s a big problem and a shame in general. So I will not blame a user who just wants to get information and clarification in any possible way ;)"},{"owner":{"account_id":27037859,"reputation":51,"user_id":20593183,"display_name":"Sourav Karjole"},"score":0,"creation_date":1690910705,"post_id":76798687,"comment_id":135417837,"body_markdown":"@cyberbrain Ohh thats fine i myself thought that i can get to learn actual thoughts of others like what they have to say about it, thats why i posted above doubt, to get to know if i am on a right track or need to learn still from different sources correctly. Whole meaning was to just understand the concept. And thanks to reply.","body":"@cyberbrain Ohh thats fine i myself thought that i can get to learn actual thoughts of others like what they have to say about it, thats why i posted above doubt, to get to know if i am on a right track or need to learn still from different sources correctly. Whole meaning was to just understand the concept. And thanks to reply."}],"answers":[{"tags":[],"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1690869956,"creation_date":1690739926,"answer_id":76799044,"question_id":76798687,"body_markdown":"You are addressing two related questions: Which interface to use to access an object (for this, I see `class` also as a kind of interface).\r\n\r\nIf you know in advance that you will need to access `Pen` methods, you should type your variable as `Pen` in the first place. But on the other hand, you should [refer to objects by their interfaces][1] (from Effective Java by Joshua Bloch) so if you do not need the access to `Pen` methods, don&#39;t access it via that class.\r\n\r\nYour second question is about creating objects to access the classes methods. But this approach is not what object oriented programming is made for: you create a class so you can access the inside data (in the object) only via the classes&#39; methods. So your idea of first creating a `Gift` instance and then creating a `Pen` instance again for more methods is less than ideal because the methods of `Pen` also need more data, that have to be initialized at some point in time (usually at the construction of `Pen`). Where do you get that data from if you only have a `Gift` instance available?\r\n\r\nIf you have the data in the first place, why did you not create a `Pen` right away?\r\n\r\nYou could also provide a factory method for `Pen` that creates a new instance from a `Gift` instance plus all the extra data necessary for a `Pen` instance.\r\n\r\nThis is not always an ideal solution, so the answer to your question is neither yes or no, but: it depends. Depending on the actual problem you want to solve, the best solution to pick could vary, so if you have an actual problem to solve, you should add it to your question to get more advice, or add another question.\r\n\r\n---\r\n\r\nUPDATE: (per OPs request)\r\n&gt; Can you just tell me why we use `Gift gift = new Pen()`?\r\n\r\nAs you do not supply any surrounding code, I cannot name the exact reason, but in the link above you find an explanation why you should use the &quot;least specific&quot; interface. \r\n\r\nFor this we see classes also as interfaces (with an implementation). Also a method is kind of a contract with the implementer of an interface. So if you use the least specific interface, you do not rely on the actual implementation, but on the contract of the methods of that interface. So you can easily change the implementation later if that is necessary.\r\n\r\nA good and very commonly used example for this is e.g. the `java.util.List` interface. You just want to know that (basically) you are operating on an ordered collection. As &quot;user&quot; of the interface you don&#39;t care how the list is ordered, or if it is backed by an array or a linked list (or lazy loaded from a database, etc.). If you used `java.util.ArrayList` you always have to load everything into an array, or at least pretend that you do that - if you inherit from that class and override methods, and that would be super complex to handle for code maintainers.\r\n\r\n&gt; Why we use Downcasting?\r\n\r\nA good use case for this (but probably not the only one) is: Quite often you have existing code that you want to use that expects objects of a certain `class` or `interface`. But the existing class doesn&#39;t fit your needs, so you inherit of or implement what is existing and expected. You create a more specific implementation. But you cannot or don&#39;t want to change the existing code, so you downcast your implementation to whatever is needed. Often the inherited classes do not even implement new methods, but just override some existing ones. \r\n\r\n&gt; I want to understand the concept of Downcasting, Polymorphism in Java (Why to use and When to use it)\r\n\r\nPolymorphism is not always helpful, the past showed that it also can be a burden, especially for code that is maintained and extended over a longer period of time, but also for new code that is just badly designed. It&#39;s hard to give a general advice, but it&#39;s good that you try to learn about it. \r\n\r\nI would recommend that you read at least the chapter [Favor composition over inheritance][2] in the book &quot;Effective Java&quot;, but can recommend the whole book. It&#39;s not only useful for Java developers, but OOP in general (the examples and specific chapters are Java only).\r\n\r\n\r\n[1]:https://ia801009.us.archive.org/16/items/effectivejava2017addisonwesley/Effective%20Java%20%282017%2C%20Addison-Wesley%29.pdf#%5B%7B%22num%22%3A446%2C%22gen%22%3A0%7D%2C%7B%22name%22%3A%22Fit%22%7D%5D\r\n\r\n[2]:https://ia801009.us.archive.org/16/items/effectivejava2017addisonwesley/Effective%20Java%20%282017%2C%20Addison-Wesley%29.pdf#%5B%7B%22num%22%3A446%2C%22gen%22%3A0%7D%2C%7B%22name%22%3A%22Fit%22%7D%5D","title":"upcasting and downcasting in Java and Polymorphism","body":"<p>You are addressing two related questions: Which interface to use to access an object (for this, I see <code>class</code> also as a kind of interface).</p>\n<p>If you know in advance that you will need to access <code>Pen</code> methods, you should type your variable as <code>Pen</code> in the first place. But on the other hand, you should <a href=\"https://ia801009.us.archive.org/16/items/effectivejava2017addisonwesley/Effective%20Java%20%282017%2C%20Addison-Wesley%29.pdf#%5B%7B%22num%22%3A446%2C%22gen%22%3A0%7D%2C%7B%22name%22%3A%22Fit%22%7D%5D\" rel=\"nofollow noreferrer\">refer to objects by their interfaces</a> (from Effective Java by Joshua Bloch) so if you do not need the access to <code>Pen</code> methods, don't access it via that class.</p>\n<p>Your second question is about creating objects to access the classes methods. But this approach is not what object oriented programming is made for: you create a class so you can access the inside data (in the object) only via the classes' methods. So your idea of first creating a <code>Gift</code> instance and then creating a <code>Pen</code> instance again for more methods is less than ideal because the methods of <code>Pen</code> also need more data, that have to be initialized at some point in time (usually at the construction of <code>Pen</code>). Where do you get that data from if you only have a <code>Gift</code> instance available?</p>\n<p>If you have the data in the first place, why did you not create a <code>Pen</code> right away?</p>\n<p>You could also provide a factory method for <code>Pen</code> that creates a new instance from a <code>Gift</code> instance plus all the extra data necessary for a <code>Pen</code> instance.</p>\n<p>This is not always an ideal solution, so the answer to your question is neither yes or no, but: it depends. Depending on the actual problem you want to solve, the best solution to pick could vary, so if you have an actual problem to solve, you should add it to your question to get more advice, or add another question.</p>\n<hr />\n<p>UPDATE: (per OPs request)</p>\n<blockquote>\n<p>Can you just tell me why we use <code>Gift gift = new Pen()</code>?</p>\n</blockquote>\n<p>As you do not supply any surrounding code, I cannot name the exact reason, but in the link above you find an explanation why you should use the &quot;least specific&quot; interface.</p>\n<p>For this we see classes also as interfaces (with an implementation). Also a method is kind of a contract with the implementer of an interface. So if you use the least specific interface, you do not rely on the actual implementation, but on the contract of the methods of that interface. So you can easily change the implementation later if that is necessary.</p>\n<p>A good and very commonly used example for this is e.g. the <code>java.util.List</code> interface. You just want to know that (basically) you are operating on an ordered collection. As &quot;user&quot; of the interface you don't care how the list is ordered, or if it is backed by an array or a linked list (or lazy loaded from a database, etc.). If you used <code>java.util.ArrayList</code> you always have to load everything into an array, or at least pretend that you do that - if you inherit from that class and override methods, and that would be super complex to handle for code maintainers.</p>\n<blockquote>\n<p>Why we use Downcasting?</p>\n</blockquote>\n<p>A good use case for this (but probably not the only one) is: Quite often you have existing code that you want to use that expects objects of a certain <code>class</code> or <code>interface</code>. But the existing class doesn't fit your needs, so you inherit of or implement what is existing and expected. You create a more specific implementation. But you cannot or don't want to change the existing code, so you downcast your implementation to whatever is needed. Often the inherited classes do not even implement new methods, but just override some existing ones.</p>\n<blockquote>\n<p>I want to understand the concept of Downcasting, Polymorphism in Java (Why to use and When to use it)</p>\n</blockquote>\n<p>Polymorphism is not always helpful, the past showed that it also can be a burden, especially for code that is maintained and extended over a longer period of time, but also for new code that is just badly designed. It's hard to give a general advice, but it's good that you try to learn about it.</p>\n<p>I would recommend that you read at least the chapter <a href=\"https://ia801009.us.archive.org/16/items/effectivejava2017addisonwesley/Effective%20Java%20%282017%2C%20Addison-Wesley%29.pdf#%5B%7B%22num%22%3A446%2C%22gen%22%3A0%7D%2C%7B%22name%22%3A%22Fit%22%7D%5D\" rel=\"nofollow noreferrer\">Favor composition over inheritance</a> in the book &quot;Effective Java&quot;, but can recommend the whole book. It's not only useful for Java developers, but OOP in general (the examples and specific chapters are Java only).</p>\n"}],"owner":{"account_id":27037859,"reputation":51,"user_id":20593183,"display_name":"Sourav Karjole"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":99,"favorite_count":0,"down_vote_count":4,"up_vote_count":2,"answer_count":1,"score":-2,"last_activity_date":1692958086,"creation_date":1690734537,"question_id":76798687,"body_markdown":"I&#39;m confused why or when to use downcasting and upcasting and polymorphism. \r\n\r\nPlease tell me if I am correct or wrong. It would be a great help.\r\n\r\nIf we say this `Gift gift = new Pen();` not only we can leverage the use of polymorphism (if subclass has any overridden methods), but also we will create only one object in the heap, like if further if we say want to access Pen class methods we can just say `Pen pen = (Pen) gift;` this line can be used to access both superclass methods as well as its own method. \r\n\r\nBut my point is that here we would not have to create a new object in heap instead we can just downcast. \r\n\r\nSo, if we say like `Gift gift = new Gift()` and than we want to use Pen class methods we would need to create object again in heap like `Pen pen = new Pen()`. \r\n\r\nBasically instead of creating 2 objects in heap we can just create one object and downcast it later. This not only helps to write an efficient code, but also can leverage the use of polymorphism with well maintained code.","title":"upcasting and downcasting in Java and Polymorphism","body":"<p>I'm confused why or when to use downcasting and upcasting and polymorphism.</p>\n<p>Please tell me if I am correct or wrong. It would be a great help.</p>\n<p>If we say this <code>Gift gift = new Pen();</code> not only we can leverage the use of polymorphism (if subclass has any overridden methods), but also we will create only one object in the heap, like if further if we say want to access Pen class methods we can just say <code>Pen pen = (Pen) gift;</code> this line can be used to access both superclass methods as well as its own method.</p>\n<p>But my point is that here we would not have to create a new object in heap instead we can just downcast.</p>\n<p>So, if we say like <code>Gift gift = new Gift()</code> and than we want to use Pen class methods we would need to create object again in heap like <code>Pen pen = new Pen()</code>.</p>\n<p>Basically instead of creating 2 objects in heap we can just create one object and downcast it later. This not only helps to write an efficient code, but also can leverage the use of polymorphism with well maintained code.</p>\n"},{"tags":["java","oop","uml","aggregation","composition"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1692958172,"post_id":76976202,"comment_id":135698601,"body_markdown":"composition IS a form of aggregation. https://www.geeksforgeeks.org/association-composition-aggregation-java/","body":"composition IS a form of aggregation. <a href=\"https://www.geeksforgeeks.org/association-composition-aggregation-java/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/association-composition-aggregation-java</a>"}],"owner":{"account_id":29296472,"reputation":53,"user_id":22445705,"display_name":"r&#39;ouster"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"closed_date":1692959824,"answer_count":0,"score":2,"last_activity_date":1692957993,"creation_date":1692957929,"question_id":76976202,"body_markdown":"Now I understand the theory of these types of associations:\r\n\r\n- Aggregation implies a relationship where the child can exist independently of the parent. Example: Class (parent) and Student (child). Delete the Class and the Students still exist.\r\n- Composition implies a relationship where the child cannot exist independent of the parent. Example: House (parent) and Room (child). Rooms don&#39;t exist separate to a House.\r\n\r\nBut it&#39;s difficult for me to understand how it works in practice.\r\n\r\n\r\nSo far this is my understanding and I would be glad if someone could correct me if I am wrong\r\n\r\n```java\r\n// A simple separate class called Address\r\npublic class Address {\r\n\r\n\tprivate String address;\r\n\r\n\tpublic Address(String address) {\r\n            this.address = address;\r\n        }\r\n}\r\n```\r\n\r\n```java\r\n// And a person class that has address field\r\npublic class Person {\r\n\t\r\n\tprivate String firstName;\r\n\tprivate String lastName;\r\n\r\n\tprivate Address address;\r\n\r\n\t}\r\n\tpublic void setAddress(Address address) {\r\n\t\tthis.address = address;\r\n\t}\r\n\tpublic Address getAddress() {\r\n\t\treturn address;\r\n\t}\r\n        ....\r\n}\r\n```\r\n\r\nI think this type of association is `aggregation` because **I have to** set the address from client code  so Address class hypothetically lives without a Person. Heres how it would look like:\r\n```java\r\npublic class Main{\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tAddress address = new Address(&quot;308 Negra Arroyo Lane, Albuquerque, New Mexico&quot;);\r\n\t\tPerson person = new Person();\r\n\t\tperson.setAddress(address);\r\n                // address object still lives without person object and I can reuse it\r\n\t}\r\n}\r\n```\r\n\r\nOn the other hand this seems like an `composition` to me, since the Address class is instantiated within the Person class and it doesn&#39;t exist anywhere else (It&#39;s bound to one specific class)\r\n```java\r\npublic class Person {\r\n\r\n\tprivate String firstName;\r\n\tprivate String lastName;\r\n\r\n\tprivate Address address;\r\n\t\r\n\tpublic Person() {\r\n\t\taddress = new Address(&quot;308 Negra Arroyo Lane, Albuquerque, New Mexico&quot;);\r\n\t}\r\n\r\n\tpublic Address getAddress() {\r\n\t\treturn address;\r\n\t}\r\n        ....\r\n}\r\n```\r\n\r\nAnd here&#39;s a client app\r\n```java\r\npublic class Main{\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tPerson person = new Person();\r\n\t\tperson.getAddress();\r\n                // address object has no meaning outside of Person class\r\n\t}\r\n}\r\n```\r\n\r\nAtleast that&#39;s how I understand the concept, I may be wrong tho so I&#39;d like if someone experienced could confirm this (or correct me if am wrong). Also the main reason why I do this is to write efficient UML so any thought of that would be appreciated too","title":"Aggregation vs Composition in OOP (Java example)","body":"<p>Now I understand the theory of these types of associations:</p>\n<ul>\n<li>Aggregation implies a relationship where the child can exist independently of the parent. Example: Class (parent) and Student (child). Delete the Class and the Students still exist.</li>\n<li>Composition implies a relationship where the child cannot exist independent of the parent. Example: House (parent) and Room (child). Rooms don't exist separate to a House.</li>\n</ul>\n<p>But it's difficult for me to understand how it works in practice.</p>\n<p>So far this is my understanding and I would be glad if someone could correct me if I am wrong</p>\n<pre class=\"lang-java prettyprint-override\"><code>// A simple separate class called Address\npublic class Address {\n\n    private String address;\n\n    public Address(String address) {\n            this.address = address;\n        }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>// And a person class that has address field\npublic class Person {\n    \n    private String firstName;\n    private String lastName;\n\n    private Address address;\n\n    }\n    public void setAddress(Address address) {\n        this.address = address;\n    }\n    public Address getAddress() {\n        return address;\n    }\n        ....\n}\n</code></pre>\n<p>I think this type of association is <code>aggregation</code> because <strong>I have to</strong> set the address from client code  so Address class hypothetically lives without a Person. Heres how it would look like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Main{\n\n    public static void main(String[] args) {\n        Address address = new Address(&quot;308 Negra Arroyo Lane, Albuquerque, New Mexico&quot;);\n        Person person = new Person();\n        person.setAddress(address);\n                // address object still lives without person object and I can reuse it\n    }\n}\n</code></pre>\n<p>On the other hand this seems like an <code>composition</code> to me, since the Address class is instantiated within the Person class and it doesn't exist anywhere else (It's bound to one specific class)</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Person {\n\n    private String firstName;\n    private String lastName;\n\n    private Address address;\n    \n    public Person() {\n        address = new Address(&quot;308 Negra Arroyo Lane, Albuquerque, New Mexico&quot;);\n    }\n\n    public Address getAddress() {\n        return address;\n    }\n        ....\n}\n</code></pre>\n<p>And here's a client app</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Main{\n\n    public static void main(String[] args) {\n        Person person = new Person();\n        person.getAddress();\n                // address object has no meaning outside of Person class\n    }\n}\n</code></pre>\n<p>Atleast that's how I understand the concept, I may be wrong tho so I'd like if someone experienced could confirm this (or correct me if am wrong). Also the main reason why I do this is to write efficient UML so any thought of that would be appreciated too</p>\n"},{"tags":["java","jboss","ejb","jboss7.x","jaas"],"comments":[{"owner":{"account_id":68965,"reputation":3142,"user_id":200924,"accept_rate":74,"display_name":"Timmo"},"score":0,"creation_date":1336118593,"post_id":10444795,"comment_id":13484722,"body_markdown":"You want to catch the exception on the client right?","body":"You want to catch the exception on the client right?"},{"owner":{"account_id":68965,"reputation":3142,"user_id":200924,"accept_rate":74,"display_name":"Timmo"},"score":0,"creation_date":1336119222,"post_id":10444795,"comment_id":13484915,"body_markdown":"You could try to extend the security module class and wrap the security check code in a try/catch. In case you would get an exception to throw it back to the client. I just hope it&#39;s not further up that the Exception is suppressed.","body":"You could try to extend the security module class and wrap the security check code in a try/catch. In case you would get an exception to throw it back to the client. I just hope it&#39;s not further up that the Exception is suppressed."},{"owner":{"account_id":68965,"reputation":3142,"user_id":200924,"accept_rate":74,"display_name":"Timmo"},"score":0,"creation_date":1336119664,"post_id":10444795,"comment_id":13485064,"body_markdown":"With security module class I meant DatabaseServerLoginModule","body":"With security module class I meant DatabaseServerLoginModule"},{"owner":{"account_id":1459671,"reputation":21,"user_id":1374321,"display_name":"fpu"},"score":0,"creation_date":1336121311,"post_id":10444795,"comment_id":13485666,"body_markdown":"Thanks, but I&#39;m wondering why LoginContext doesn&#39;t work. It is deprecated for JBossAS 7?","body":"Thanks, but I&#39;m wondering why LoginContext doesn&#39;t work. It is deprecated for JBossAS 7?"},{"owner":{"account_id":249310,"reputation":2533,"user_id":525271,"accept_rate":67,"display_name":"Sergiu"},"score":0,"creation_date":1341390238,"post_id":10444795,"comment_id":14908402,"body_markdown":"Did you find an answer regarding the LoginContext ? I&#39;m trying to migrate similar code from JBoss 5 to JBoss 7. Thank you.","body":"Did you find an answer regarding the LoginContext ? I&#39;m trying to migrate similar code from JBoss 5 to JBoss 7. Thank you."},{"owner":{"account_id":1459671,"reputation":21,"user_id":1374321,"display_name":"fpu"},"score":0,"creation_date":1341398210,"post_id":10444795,"comment_id":14911779,"body_markdown":"Unfortunately nope. This is the only reason for using older version of JBoss for me. :(","body":"Unfortunately nope. This is the only reason for using older version of JBoss for me. :("}],"answers":[{"tags":[],"owner":{"account_id":1254635,"reputation":942,"user_id":1214373,"accept_rate":0,"display_name":"Darran L"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1338288196,"creation_date":1338288196,"answer_id":10797554,"question_id":10444795,"body_markdown":"ClientLoginModule is not currently supported on AS7 - all that login module does is associate the username and password with a thread local it does not perform any real authentication.\r\n\r\nRegarding the InitialContext you should be seeing an exception thrown when you try and use it.","title":"JBoss AS 7 remote standalone client auth","body":"<p>ClientLoginModule is not currently supported on AS7 - all that login module does is associate the username and password with a thread local it does not perform any real authentication.</p>\n\n<p>Regarding the InitialContext you should be seeing an exception thrown when you try and use it.</p>\n"}],"owner":{"account_id":1459671,"reputation":21,"user_id":1374321,"display_name":"fpu"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9326,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1692957985,"creation_date":1336117621,"question_id":10444795,"body_markdown":"I have a some ear deployed on JBoss AS7 with\r\njboss-app.xml\r\n\r\n    &lt;jboss-app xmlns=&quot;http://www.jboss.com/xml/ns/javaee&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n           version=&quot;7.0&quot; xsi:schemaLocation=&quot;http://www.jboss.com/xml/ns/javaee &quot;&gt;\r\n    &lt;security-domain&gt;FooDomain&lt;/security-domain&gt;\r\n&lt;/jboss-app&gt;\r\n\r\nIn standalone.xml I have\r\n\r\n    &lt;security-realm name=&quot;ApplicationRealm&quot;&gt;\r\n       &lt;authentication&gt;\r\n           &lt;jaas name=&quot;FooDomain&quot;/&gt;\r\n       &lt;/authentication&gt;\r\n    &lt;/security-realm&gt;\r\n    ...\r\n    &lt;security-domain name=&quot;FooDomain&quot; cache-type=&quot;default&quot;&gt;\r\n\t&lt;authentication&gt;\r\n\t\t&lt;login-module code=&quot;Remoting&quot; flag=&quot;optional&quot;&gt;\r\n\t\t\t&lt;module-option name=&quot;password-stacking&quot; value=&quot;useFirstPass&quot;/&gt;\r\n\t\t&lt;/login-module&gt;\r\n\t\t&lt;login-module code=&quot;Database&quot; flag=&quot;required&quot;&gt;\r\n\t\t\t&lt;module-option name=&quot;dsJndiName&quot; value=&quot;java:/MyDS&quot;/&gt;\r\n\t\t\t&lt;module-option name=&quot;principalsQuery&quot; value=&quot;select password from users where user_id=?&quot;/&gt;\r\n\t\t\t&lt;module-option name=&quot;rolesQuery&quot; value=&quot;select role, &#39;Roles&#39; from roles where user_id=?&quot;/&gt;\r\n\t\t\t&lt;module-option name=&quot;password-stacking&quot; value=&quot;useFirstPass&quot;/&gt;\r\n\t\t&lt;/login-module&gt;\r\n\t&lt;/authentication&gt;\r\n    &lt;/security-domain&gt;\r\n\r\nI can make a lookup some ejb from standalone client and authentication is successful when I use code like this:\r\n\r\n    final Hashtable&lt;Object, Object&gt; p = new Hashtable&lt;Object, Object&gt;();\r\n    p.put(Context.URL_PKG_PREFIXES, &quot;org.jboss.ejb.client.naming&quot;);\r\n    p.put(Context.SECURITY_PRINCIPAL, username);\r\n    p.put(Context.SECURITY_CREDENTIALS, password);\r\n    p.put(&quot;jboss.naming.client.ejb.context&quot;, true);\r\n    p.put(Context.PROVIDER_URL, &quot;remote://10.10.1.18:4447&quot;);\r\n    p.put(&quot;jboss.naming.client.connect.options.org.xnio.Options.SASL_POLICY_NOPLAINTEXT&quot;, &quot;false&quot;);\r\n    p.put(Context.INITIAL_CONTEXT_FACTORY, org.jboss.naming.remote.client.InitialContextFactory.class.getName());\r\n    context = new InitialContext(p);\r\n\r\nThe problem is that if I provide wrong credentials, I see in debug console\r\n\r\n    javax.security.sasl.SaslException: Authentication failed: all available authentication mechanisms failed\r\n\r\n but I can&#39;t catch it.\r\n\r\nServer logs (not important parts cutted):\r\n\r\n    TRACE [DatabaseServerLoginModule] initialize\r\n    TRACE [DatabaseServerLoginModule] Security domain: FooDomain\r\n    TRACE [DatabaseServerLoginModule] DatabaseServerLoginModule, dsJndiName=java:/MyDS\r\n    TRACE [DatabaseServerLoginModule] principalsQuery=select password from users where user_id=?\r\n    TRACE [DatabaseServerLoginModule] rolesQuery=select role, &#39;Roles&#39; from roles where user_id=?\r\n    TRACE [DatabaseServerLoginModule] suspendResume=true\r\n    TRACE [DatabaseServerLoginModule] login\r\n    TRACE [DatabaseServerLoginModule] suspendAnyTransaction\r\n    TRACE [DatabaseServerLoginModule] Excuting query: select password from users where user_id=?, with username: test\r\n    TRACE [DatabaseServerLoginModule] Obtained user password\r\n    TRACE [DatabaseServerLoginModule] resumeAnyTransaction\r\n    DEBUG [DatabaseServerLoginModule] Bad password for username=test\r\n    TRACE [DatabaseServerLoginModule] abort\r\n\r\nWhen I try to use LoginContext just nothing happens on server.\r\nConfiguration\r\n\r\n    public class DefaultJassConfiguration extends Configuration {\r\n\t@Override\r\n\tpublic AppConfigurationEntry[] getAppConfigurationEntry(String name) {\r\n\t\tMap options = new HashMap();\r\n\t\toptions.put(&quot;debug&quot;, true);\r\n\t\tAppConfigurationEntry[] entries = {\r\n\t\t\t\tnew AppConfigurationEntry(&quot;org.jboss.security.ClientLoginModule&quot;, AppConfigurationEntry.LoginModuleControlFlag.REQUIRED, options)\r\n\t\t};\r\n\t\treturn entries;\r\n\t}\r\n    }\r\n\r\nTest\r\n\r\n    Configuration.setConfiguration(new DefaultJassConfiguration());\r\n    try {\r\n            LoginContext lc = new LoginContext(&quot;FooDomain&quot;, new UsernamePasswordHandler(&quot;test&quot;, &quot;test&quot;.toCharArray()));\r\n            lc.login();\r\n            System.out.println(lc.getSubject());\r\n        } catch (LoginException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\nPerhaps LoginContext don&#39;t know server address? I try to add \r\n\r\n    System.setProperty(&quot;java.naming.provider.url&quot;, &quot;remote://10.10.1.18:4447&quot;);\r\n\r\nbut with no effect.\r\n\r\nHow to make LoginContext work? Or how to catch SaslException?\r\nI consider to make some dummy bean with method always returned true and call it after login, but it looks ugly.\r\n\r\nP.S. I&#39;m sorry for my English (It makes me a bit shy)","title":"JBoss AS 7 remote standalone client auth","body":"<p>I have a some ear deployed on JBoss AS7 with\njboss-app.xml</p>\n\n<pre><code>&lt;jboss-app xmlns=\"http://www.jboss.com/xml/ns/javaee\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       version=\"7.0\" xsi:schemaLocation=\"http://www.jboss.com/xml/ns/javaee \"&gt;\n&lt;security-domain&gt;FooDomain&lt;/security-domain&gt;\n</code></pre>\n\n<p></p>\n\n<p>In standalone.xml I have</p>\n\n<pre><code>&lt;security-realm name=\"ApplicationRealm\"&gt;\n   &lt;authentication&gt;\n       &lt;jaas name=\"FooDomain\"/&gt;\n   &lt;/authentication&gt;\n&lt;/security-realm&gt;\n...\n&lt;security-domain name=\"FooDomain\" cache-type=\"default\"&gt;\n&lt;authentication&gt;\n    &lt;login-module code=\"Remoting\" flag=\"optional\"&gt;\n        &lt;module-option name=\"password-stacking\" value=\"useFirstPass\"/&gt;\n    &lt;/login-module&gt;\n    &lt;login-module code=\"Database\" flag=\"required\"&gt;\n        &lt;module-option name=\"dsJndiName\" value=\"java:/MyDS\"/&gt;\n        &lt;module-option name=\"principalsQuery\" value=\"select password from users where user_id=?\"/&gt;\n        &lt;module-option name=\"rolesQuery\" value=\"select role, 'Roles' from roles where user_id=?\"/&gt;\n        &lt;module-option name=\"password-stacking\" value=\"useFirstPass\"/&gt;\n    &lt;/login-module&gt;\n&lt;/authentication&gt;\n&lt;/security-domain&gt;\n</code></pre>\n\n<p>I can make a lookup some ejb from standalone client and authentication is successful when I use code like this:</p>\n\n<pre><code>final Hashtable&lt;Object, Object&gt; p = new Hashtable&lt;Object, Object&gt;();\np.put(Context.URL_PKG_PREFIXES, \"org.jboss.ejb.client.naming\");\np.put(Context.SECURITY_PRINCIPAL, username);\np.put(Context.SECURITY_CREDENTIALS, password);\np.put(\"jboss.naming.client.ejb.context\", true);\np.put(Context.PROVIDER_URL, \"remote://10.10.1.18:4447\");\np.put(\"jboss.naming.client.connect.options.org.xnio.Options.SASL_POLICY_NOPLAINTEXT\", \"false\");\np.put(Context.INITIAL_CONTEXT_FACTORY, org.jboss.naming.remote.client.InitialContextFactory.class.getName());\ncontext = new InitialContext(p);\n</code></pre>\n\n<p>The problem is that if I provide wrong credentials, I see in debug console</p>\n\n<pre><code>javax.security.sasl.SaslException: Authentication failed: all available authentication mechanisms failed\n</code></pre>\n\n<p>but I can't catch it.</p>\n\n<p>Server logs (not important parts cutted):</p>\n\n<pre><code>TRACE [DatabaseServerLoginModule] initialize\nTRACE [DatabaseServerLoginModule] Security domain: FooDomain\nTRACE [DatabaseServerLoginModule] DatabaseServerLoginModule, dsJndiName=java:/MyDS\nTRACE [DatabaseServerLoginModule] principalsQuery=select password from users where user_id=?\nTRACE [DatabaseServerLoginModule] rolesQuery=select role, 'Roles' from roles where user_id=?\nTRACE [DatabaseServerLoginModule] suspendResume=true\nTRACE [DatabaseServerLoginModule] login\nTRACE [DatabaseServerLoginModule] suspendAnyTransaction\nTRACE [DatabaseServerLoginModule] Excuting query: select password from users where user_id=?, with username: test\nTRACE [DatabaseServerLoginModule] Obtained user password\nTRACE [DatabaseServerLoginModule] resumeAnyTransaction\nDEBUG [DatabaseServerLoginModule] Bad password for username=test\nTRACE [DatabaseServerLoginModule] abort\n</code></pre>\n\n<p>When I try to use LoginContext just nothing happens on server.\nConfiguration</p>\n\n<pre><code>public class DefaultJassConfiguration extends Configuration {\n@Override\npublic AppConfigurationEntry[] getAppConfigurationEntry(String name) {\n    Map options = new HashMap();\n    options.put(\"debug\", true);\n    AppConfigurationEntry[] entries = {\n            new AppConfigurationEntry(\"org.jboss.security.ClientLoginModule\", AppConfigurationEntry.LoginModuleControlFlag.REQUIRED, options)\n    };\n    return entries;\n}\n}\n</code></pre>\n\n<p>Test</p>\n\n<pre><code>Configuration.setConfiguration(new DefaultJassConfiguration());\ntry {\n        LoginContext lc = new LoginContext(\"FooDomain\", new UsernamePasswordHandler(\"test\", \"test\".toCharArray()));\n        lc.login();\n        System.out.println(lc.getSubject());\n    } catch (LoginException e) {\n        e.printStackTrace();\n    }\n</code></pre>\n\n<p>Perhaps LoginContext don't know server address? I try to add </p>\n\n<pre><code>System.setProperty(\"java.naming.provider.url\", \"remote://10.10.1.18:4447\");\n</code></pre>\n\n<p>but with no effect.</p>\n\n<p>How to make LoginContext work? Or how to catch SaslException?\nI consider to make some dummy bean with method always returned true and call it after login, but it looks ugly.</p>\n\n<p>P.S. I'm sorry for my English (It makes me a bit shy)</p>\n"},{"tags":["java","minecraft","minecraft-forge"],"comments":[{"owner":{"account_id":19500004,"reputation":19,"user_id":14266334,"display_name":"Jackman6"},"score":0,"creation_date":1693054531,"post_id":76976188,"comment_id":135710921,"body_markdown":"Turns out it was the graphics driver.... Thank you!","body":"Turns out it was the graphics driver.... Thank you!"}],"owner":{"account_id":19500004,"reputation":19,"user_id":14266334,"display_name":"Jackman6"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1693054560,"answer_count":0,"score":0,"last_activity_date":1692957793,"creation_date":1692957793,"question_id":76976188,"body_markdown":"I don&#39;t know if I changed something accidentally, but normally things run just fine before.\r\nYesterday, I clicked runClient on Gradle, and it did not open minecraft on forge. It could not. The error is this:\r\n`[error occurred during error reporting (), id 0xc0000005, EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x00007ff9d32b9b30]`\r\n\r\nI tried to get a log, and this is what I ended up with:\r\n\r\n```\r\n#\r\n# A fatal error has been detected by the Java Runtime Environment:\r\n#\r\n#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x00007ffe02b10590, pid=2248, tid=16132\r\n#\r\n# JRE version: OpenJDK Runtime Environment Temurin-17.0.8+7 (17.0.8+7) (build 17.0.8+7)\r\n# Java VM: OpenJDK 64-Bit Server VM Temurin-17.0.8+7 (17.0.8+7, mixed mode, sharing, tiered, compressed oops, compressed class ptrs, g1 gc, windows-amd64)\r\n# Problematic frame:\r\n# C  [atio6axx.dll+0x190590]\r\n#\r\n# No core dump will be written. Minidumps are not enabled by default on client versions of Windows\r\n#\r\n# If you would like to submit a bug report, please visit:\r\n#   https://github.com/adoptium/adoptium-support/issues\r\n# The crash happened outside the Java Virtual Machine in native code.\r\n# See problematic frame for where to report the bug.\r\n#\r\n\r\n---------------  S U M M A R Y ------------\r\nI cannot add the rest because it&#39;s too big.\r\n```\r\n\r\n\r\nI&#39;ve tried clearing the cache, reinstalling IntelliJ, reinstalling Java, and restarting my PC.\r\nNothing has worked so far.\r\n\r\nNormally, clicking &#39;runClient&#39; should just load up a small window with MC on it. And the mod I developed should be in there. Last week it worked fine, but now it just doesn&#39;t. Nothing changed in the hardware of my computer, I checked for a corrupt OS but it isn&#39;t that either.","title":"Error when running client for Minecraft forge from IntelliJ","body":"<p>I don't know if I changed something accidentally, but normally things run just fine before.\nYesterday, I clicked runClient on Gradle, and it did not open minecraft on forge. It could not. The error is this:\n<code>[error occurred during error reporting (), id 0xc0000005, EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x00007ff9d32b9b30]</code></p>\n<p>I tried to get a log, and this is what I ended up with:</p>\n<pre><code>#\n# A fatal error has been detected by the Java Runtime Environment:\n#\n#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x00007ffe02b10590, pid=2248, tid=16132\n#\n# JRE version: OpenJDK Runtime Environment Temurin-17.0.8+7 (17.0.8+7) (build 17.0.8+7)\n# Java VM: OpenJDK 64-Bit Server VM Temurin-17.0.8+7 (17.0.8+7, mixed mode, sharing, tiered, compressed oops, compressed class ptrs, g1 gc, windows-amd64)\n# Problematic frame:\n# C  [atio6axx.dll+0x190590]\n#\n# No core dump will be written. Minidumps are not enabled by default on client versions of Windows\n#\n# If you would like to submit a bug report, please visit:\n#   https://github.com/adoptium/adoptium-support/issues\n# The crash happened outside the Java Virtual Machine in native code.\n# See problematic frame for where to report the bug.\n#\n\n---------------  S U M M A R Y ------------\nI cannot add the rest because it's too big.\n</code></pre>\n<p>I've tried clearing the cache, reinstalling IntelliJ, reinstalling Java, and restarting my PC.\nNothing has worked so far.</p>\n<p>Normally, clicking 'runClient' should just load up a small window with MC on it. And the mod I developed should be in there. Last week it worked fine, but now it just doesn't. Nothing changed in the hardware of my computer, I checked for a corrupt OS but it isn't that either.</p>\n"},{"tags":["java","spring-boot","datadog","graalvm-native-image"],"comments":[{"owner":{"account_id":23020603,"reputation":341,"user_id":17141716,"display_name":"peterz"},"score":0,"creation_date":1692976973,"post_id":76976153,"comment_id":135703060,"body_markdown":"[This issue](https://github.com/oracle/graal/issues/1065) seems relevant","body":"<a href=\"https://github.com/oracle/graal/issues/1065\" rel=\"nofollow noreferrer\">This issue</a> seems relevant"}],"owner":{"account_id":1605165,"reputation":1630,"user_id":1485401,"accept_rate":91,"display_name":"Roman T"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":338,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1692957462,"creation_date":1692957462,"question_id":76976153,"body_markdown":"I use spring boot 3.1.x and I prepared a native images with Spring Boot GraalVM tooling. Previously with using fat jar we passed datadog java agent to application to add tracing like that:\r\n```\r\njava -javaagent:/usr/src/app/dd-java-agent.jar -jar app-fat-jar.jar\r\n```\r\nAfter compiling a native image I tried to pass it to the executable in the same manner:\r\n```\r\n/cnb/process/web -javaagent:/workspace/dd-java-agent.jar\r\n```\r\nBut it seems not to have any effect on running native image. So the datadog traces don&#39;t get exported to datadog at all.\r\n\r\nAny idea how to fix it?","title":"Datadog java agent and GraalVM native executable","body":"<p>I use spring boot 3.1.x and I prepared a native images with Spring Boot GraalVM tooling. Previously with using fat jar we passed datadog java agent to application to add tracing like that:</p>\n<pre><code>java -javaagent:/usr/src/app/dd-java-agent.jar -jar app-fat-jar.jar\n</code></pre>\n<p>After compiling a native image I tried to pass it to the executable in the same manner:</p>\n<pre><code>/cnb/process/web -javaagent:/workspace/dd-java-agent.jar\n</code></pre>\n<p>But it seems not to have any effect on running native image. So the datadog traces don't get exported to datadog at all.</p>\n<p>Any idea how to fix it?</p>\n"},{"tags":["java","tiff","javax.imageio","twelvemonkeys"],"comments":[{"owner":{"account_id":81168,"reputation":234336,"user_id":229044,"accept_rate":83,"display_name":"user229044"},"score":3,"creation_date":1692790615,"post_id":76960852,"comment_id":135671606,"body_markdown":"This is mostly speculation, but: Tiffs are a big, lossless file format. Typically they&#39;re used to store source files prior to editing, not output files. Very few people want to *output* Tiff files. At a guess I would say the size is expected, and the speed (vs png) is a combination of Tiff producing *much* larger files, and the Tiff encoder being much less optimized than the PNG encoder, due to lack of use.","body":"This is mostly speculation, but: Tiffs are a big, lossless file format. Typically they&#39;re used to store source files prior to editing, not output files. Very few people want to <i>output</i> Tiff files. At a guess I would say the size is expected, and the speed (vs png) is a combination of Tiff producing <i>much</i> larger files, and the Tiff encoder being much less optimized than the PNG encoder, due to lack of use."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1692802872,"post_id":76960852,"comment_id":135674455,"body_markdown":"Disk I/O is slow.  Compression is probably the best way to address that.  I’m not sure what you mean by “extra compression”;  would you consider writing a [compressed TIFF](https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/imageio/metadata/doc-files/tiff_metadata.html#Compression)?","body":"Disk I/O is slow.  Compression is probably the best way to address that.  I’m not sure what you mean by “extra compression”;  would you consider writing a <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/imageio/metadata/doc-files/tiff_metadata.html#Compression\" rel=\"nofollow noreferrer\">compressed TIFF</a>?"},{"owner":{"account_id":1531514,"reputation":26639,"user_id":1428606,"accept_rate":71,"display_name":"Harald K"},"score":1,"creation_date":1692804433,"post_id":76960852,"comment_id":135674826,"body_markdown":"First, I have to say that 5 minutes seems unreasonably long, for writing a 25 MB TIFF... Seems something is off... If I/O is the big bottleneck here, I would expect writing a 25 MB TIFF to take about 2x the time writing a 12 MB PNG. Please tell more about your environment, like Java version, OS, type of disk, memory etc. 5 minutes makes it sound like your process is very low on memory.","body":"First, I have to say that 5 minutes seems unreasonably long, for writing a 25 MB TIFF... Seems something is off... If I/O is the big bottleneck here, I would expect writing a 25 MB TIFF to take about 2x the time writing a 12 MB PNG. Please tell more about your environment, like Java version, OS, type of disk, memory etc. 5 minutes makes it sound like your process is very low on memory."},{"owner":{"account_id":1531514,"reputation":26639,"user_id":1428606,"accept_rate":71,"display_name":"Harald K"},"score":0,"creation_date":1692804609,"post_id":76960852,"comment_id":135674866,"body_markdown":"That said, the TwelveMonkeys TIFF plugin does write uncompressed by default (for historical reasons). You could try specifying a compression, like &quot;deflate&quot; which should produce a size similar to that of PNG (although the TIFF &quot;horizontal predictor&quot; is less sophisticated than PNG&#39;s predictor, so expect slightly larger files).","body":"That said, the TwelveMonkeys TIFF plugin does write uncompressed by default (for historical reasons). You could try specifying a compression, like &quot;deflate&quot; which should produce a size similar to that of PNG (although the TIFF &quot;horizontal predictor&quot; is less sophisticated than PNG&#39;s predictor, so expect slightly larger files)."},{"owner":{"account_id":1531514,"reputation":26639,"user_id":1428606,"accept_rate":71,"display_name":"Harald K"},"score":2,"creation_date":1692811995,"post_id":76960852,"comment_id":135676292,"body_markdown":"I made a small sample program, writing a 3400x2550 `TYPE_3BYTE_BGR` (~25MB) image with a gradient. The results on my 2019 MBP/i7 with decent SSD was: \nPNG size: 303385/time: 396ms,\nJPEG size: 143073/time: 125ms,\nTIFF uncompressed size: 26010190/time: 88ms,\nTIFF deflate/zlib compressed size: 686038/time: 189ms. Yes, all times in *milliseconds*. In other words... 5 minutes sounds VERY odd.","body":"I made a small sample program, writing a 3400x2550 <code>TYPE_3BYTE_BGR</code> (~25MB) image with a gradient. The results on my 2019 MBP/i7 with decent SSD was:  PNG size: 303385/time: 396ms, JPEG size: 143073/time: 125ms, TIFF uncompressed size: 26010190/time: 88ms, TIFF deflate/zlib compressed size: 686038/time: 189ms. Yes, all times in <i>milliseconds</i>. In other words... 5 minutes sounds VERY odd."},{"owner":{"account_id":2294271,"reputation":1861,"user_id":2016165,"accept_rate":45,"display_name":"Neph"},"score":0,"creation_date":1692955458,"post_id":76960852,"comment_id":135698074,"body_markdown":"Sorry about the delay. @user229044 I&#39;m aware TIFF isn&#39;t used as much and that it creates larger files than e.g. png but storage isn&#39;t a problem and the people these files are for are in a field that mostly uses TIFF. I don&#39;t expect TIFF to be exported as fast as e.g. png but 5 minutes seems a bit off and I&#39;m wondering if I missed something in Twelve Monkeys that might be obvious to others.","body":"Sorry about the delay. @user229044 I&#39;m aware TIFF isn&#39;t used as much and that it creates larger files than e.g. png but storage isn&#39;t a problem and the people these files are for are in a field that mostly uses TIFF. I don&#39;t expect TIFF to be exported as fast as e.g. png but 5 minutes seems a bit off and I&#39;m wondering if I missed something in Twelve Monkeys that might be obvious to others."},{"owner":{"account_id":2294271,"reputation":1861,"user_id":2016165,"accept_rate":45,"display_name":"Neph"},"score":0,"creation_date":1692955893,"post_id":76960852,"comment_id":135698168,"body_markdown":"@VGR Sorry, my mistake. I just checked again, comparing the imported to the exported TIFF and the former uses LZW compresses, which would at least explain the size difference. Using LZW for the exported file would be okay too (haven&#39;t checked yet if that&#39;s possible with this library). The link you provided is for JDK 20, I&#39;m using Java 8.","body":"@VGR Sorry, my mistake. I just checked again, comparing the imported to the exported TIFF and the former uses LZW compresses, which would at least explain the size difference. Using LZW for the exported file would be okay too (haven&#39;t checked yet if that&#39;s possible with this library). The link you provided is for JDK 20, I&#39;m using Java 8."},{"owner":{"account_id":2294271,"reputation":1861,"user_id":2016165,"accept_rate":45,"display_name":"Neph"},"score":0,"creation_date":1692956639,"post_id":76960852,"comment_id":135698326,"body_markdown":"@HaraldK Yes, 5 minutes does seem off, looking at how fast exporting as png/jpg is, that&#39;s why I asked this question, maybe I missed something in the library that&#39;s obvious to others. I&#39;m using: Java 8, Win 10, old Ivy Bridge Xeon, 24gb RAM, both my Java project and the images (about 2700x3400) are on the system SSD (Samsung 860 EVO). I made a mistake, the input files use LZW compression, so that one would be fine for the exported ones too. Not sure if the library supports that one (haven&#39;t checked yet). MBP?","body":"@HaraldK Yes, 5 minutes does seem off, looking at how fast exporting as png/jpg is, that&#39;s why I asked this question, maybe I missed something in the library that&#39;s obvious to others. I&#39;m using: Java 8, Win 10, old Ivy Bridge Xeon, 24gb RAM, both my Java project and the images (about 2700x3400) are on the system SSD (Samsung 860 EVO). I made a mistake, the input files use LZW compression, so that one would be fine for the exported ones too. Not sure if the library supports that one (haven&#39;t checked yet). MBP?"},{"owner":{"account_id":81168,"reputation":234336,"user_id":229044,"accept_rate":83,"display_name":"user229044"},"score":0,"creation_date":1692973879,"post_id":76960852,"comment_id":135702247,"body_markdown":"If 5 minutes is an actual, timed number, yes, that is absurd. I assumed that was an exaggeration, similar to calling a 25 mb tiff &quot;huge&quot; (that&#39;s a very normal sized tiff).","body":"If 5 minutes is an actual, timed number, yes, that is absurd. I assumed that was an exaggeration, similar to calling a 25 mb tiff &quot;huge&quot; (that&#39;s a very normal sized tiff)."},{"owner":{"account_id":1531514,"reputation":26639,"user_id":1428606,"accept_rate":71,"display_name":"Harald K"},"score":1,"creation_date":1693156414,"post_id":76960852,"comment_id":135719844,"body_markdown":"Hmmm.. Just remembered this: https://github.com/haraldk/TwelveMonkeys/issues/744... Which version of the library are you using? Perhaps upgrading will fix it... &#128512;","body":"Hmmm.. Just remembered this: <a href=\"https://github.com/haraldk/TwelveMonkeys/issues/744\" rel=\"nofollow noreferrer\">github.com/haraldk/TwelveMonkeys/issues/744</a>... Which version of the library are you using? Perhaps upgrading will fix it... 😀"},{"owner":{"account_id":2294271,"reputation":1861,"user_id":2016165,"accept_rate":45,"display_name":"Neph"},"score":0,"creation_date":1693215290,"post_id":76960852,"comment_id":135725981,"body_markdown":"@user229044 I didn&#39;t time it the first couple of tries (only added that code after it took so long) but I checked the Win clock. The latest test (just now) took 322s seconds.","body":"@user229044 I didn&#39;t time it the first couple of tries (only added that code after it took so long) but I checked the Win clock. The latest test (just now) took 322s seconds."},{"owner":{"account_id":2294271,"reputation":1861,"user_id":2016165,"accept_rate":45,"display_name":"Neph"},"score":0,"creation_date":1693215885,"post_id":76960852,"comment_id":135726113,"body_markdown":"@HaraldK Thanks for the link! I wanted to post on their issues page first but they tell you to use Stackexchange instead, no idea how I missed that. But yes, I&#39;m using exactly that version (3.9.4), which is the latest/only version in the &quot;Links to prebuilt binaries&quot; section (older versions can be found [here](https://repo1.maven.org/maven2/com/twelvemonkeys/common/common-lang/)). There are a lot of snapshot jars [here](https://oss.sonatype.org/content/repositories/snapshots/com/twelvemonkeys/common/), should I just take the latest ones (from August 25th)? Does TM support LZW compression?","body":"@HaraldK Thanks for the link! I wanted to post on their issues page first but they tell you to use Stackexchange instead, no idea how I missed that. But yes, I&#39;m using exactly that version (3.9.4), which is the latest/only version in the &quot;Links to prebuilt binaries&quot; section (older versions can be found <a href=\"https://repo1.maven.org/maven2/com/twelvemonkeys/common/common-lang/\" rel=\"nofollow noreferrer\">here</a>). There are a lot of snapshot jars <a href=\"https://oss.sonatype.org/content/repositories/snapshots/com/twelvemonkeys/common/\" rel=\"nofollow noreferrer\">here</a>, should I just take the latest ones (from August 25th)? Does TM support LZW compression?"},{"owner":{"account_id":1531514,"reputation":26639,"user_id":1428606,"accept_rate":71,"display_name":"Harald K"},"score":1,"creation_date":1693218137,"post_id":76960852,"comment_id":135726506,"body_markdown":"I see. I just have a bit too much on my plate these days... &#128533; Should make a new release soon. Try the latest 3.10.0-SNAPSHOT! And yes, LZW compression is supported, but it&#39;s probably not as fast as Deflate/ZLib.","body":"I see. I just have a bit too much on my plate these days... 😕 Should make a new release soon. Try the latest 3.10.0-SNAPSHOT! And yes, LZW compression is supported, but it&#39;s probably not as fast as Deflate/ZLib."},{"owner":{"account_id":2294271,"reputation":1861,"user_id":2016165,"accept_rate":45,"display_name":"Neph"},"score":1,"creation_date":1693828332,"post_id":76960852,"comment_id":135807431,"body_markdown":"@HaraldK Thanks for your help (didn&#39;t see you are the author)! I tested it with the &quot;20230829.085702&quot; snapshot files and now the same tiffs only take around 280ms to export - it&#39;s even faster than png (2s) and about the same as jpg (~290ms). :) I also managed to get LZW compression to work (like [this](https://github.com/haraldk/TwelveMonkeys/issues/439)), the export takes a little bit longer (800-900ms, &quot;Deflate&quot; takes 4s) but even with default compression quality the exported files are smaller than the imported ones.","body":"@HaraldK Thanks for your help (didn&#39;t see you are the author)! I tested it with the &quot;20230829.085702&quot; snapshot files and now the same tiffs only take around 280ms to export - it&#39;s even faster than png (2s) and about the same as jpg (~290ms). :) I also managed to get LZW compression to work (like <a href=\"https://github.com/haraldk/TwelveMonkeys/issues/439\" rel=\"nofollow noreferrer\">this</a>), the export takes a little bit longer (800-900ms, &quot;Deflate&quot; takes 4s) but even with default compression quality the exported files are smaller than the imported ones."}],"owner":{"account_id":2294271,"reputation":1861,"user_id":2016165,"accept_rate":45,"display_name":"Neph"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692956766,"creation_date":1692789503,"question_id":76960852,"body_markdown":"I&#39;m using the &quot;Twelve Monkeys&quot; ([Github][1]) library to read a .tif/.tiff file in Java 8, add a logo and export the new image as a new .tif/.tiff file:\r\n\r\n    try {\r\n        BufferedImage buffLogo = ImageIO.read(fLogo);\r\n        BufferedImage buffInput = ImageIO.read(fImg);\r\n        int image_type = buffInput.getType();\r\n    \r\n        //Computing correct position and size of logo here...\r\n    \r\n        BufferedImage buffOutput = new BufferedImage(buffInput.getWidth(), buffInput.getHeight(), image_type);\r\n        File out = new File(outputImg);\r\n    \r\n        Graphics2D g = buffOutput.createGraphics();\r\n        g.drawImage(buffInput, 0,0,null);\r\n        g.drawImage(buffLogo, pos_x,pos_y,size_x,size_y,null);\r\n        g.dispose();\r\n    \r\n        System.out.println(&quot;Beginning to write to: &#39;&quot;+out.getAbsolutePath()+&quot;&#39;&quot;);\r\n        long start = System.currentTimeMillis();\r\n        ImageIO.write(buffOutput, &quot;tif&quot;, out);\r\n        long dur = (System.currentTimeMillis() - start) / 1000;\r\n        System.out.println(&quot;Writing finished successfully (&quot;+dur+&quot;s)!&quot;);\r\n    } catch (IOException e) {\r\n        System.out.println(&quot;Exception:\\n&quot;+e.getMessage());\r\n    }\r\n\r\nThe input files I&#39;ve tested this with so far are about 12mb each, `TYPE_3BYTE_BGR` and use LZW compression. Exporting as .png only takes a couple of seconds and the files are slightly smaller than the originals. Jpg is even faster and each file is &lt;1mb. If I export as .tif/.tiff, then `ImageIO.write` not only takes about 5 minutes to finish writing a single file but the files are also huge, about 25mb with the same type (more with e.g. `TYPE_INT_ARGB` but I don&#39;t need transparency).\r\n\r\nIs that just the way the library works or is there anything specific I have to do, any specific parameters I have to set or other functions to use to make exporting tifs faster and the resulting files a lot smaller (more like the original size, edit: LZW compression would be fine)?\r\n\r\n  [1]: https://github.com/haraldk/TwelveMonkeys","title":"Exporting TIFF takes a long time and creates big files","body":"<p>I'm using the &quot;Twelve Monkeys&quot; (<a href=\"https://github.com/haraldk/TwelveMonkeys\" rel=\"nofollow noreferrer\">Github</a>) library to read a .tif/.tiff file in Java 8, add a logo and export the new image as a new .tif/.tiff file:</p>\n<pre><code>try {\n    BufferedImage buffLogo = ImageIO.read(fLogo);\n    BufferedImage buffInput = ImageIO.read(fImg);\n    int image_type = buffInput.getType();\n\n    //Computing correct position and size of logo here...\n\n    BufferedImage buffOutput = new BufferedImage(buffInput.getWidth(), buffInput.getHeight(), image_type);\n    File out = new File(outputImg);\n\n    Graphics2D g = buffOutput.createGraphics();\n    g.drawImage(buffInput, 0,0,null);\n    g.drawImage(buffLogo, pos_x,pos_y,size_x,size_y,null);\n    g.dispose();\n\n    System.out.println(&quot;Beginning to write to: '&quot;+out.getAbsolutePath()+&quot;'&quot;);\n    long start = System.currentTimeMillis();\n    ImageIO.write(buffOutput, &quot;tif&quot;, out);\n    long dur = (System.currentTimeMillis() - start) / 1000;\n    System.out.println(&quot;Writing finished successfully (&quot;+dur+&quot;s)!&quot;);\n} catch (IOException e) {\n    System.out.println(&quot;Exception:\\n&quot;+e.getMessage());\n}\n</code></pre>\n<p>The input files I've tested this with so far are about 12mb each, <code>TYPE_3BYTE_BGR</code> and use LZW compression. Exporting as .png only takes a couple of seconds and the files are slightly smaller than the originals. Jpg is even faster and each file is &lt;1mb. If I export as .tif/.tiff, then <code>ImageIO.write</code> not only takes about 5 minutes to finish writing a single file but the files are also huge, about 25mb with the same type (more with e.g. <code>TYPE_INT_ARGB</code> but I don't need transparency).</p>\n<p>Is that just the way the library works or is there anything specific I have to do, any specific parameters I have to set or other functions to use to make exporting tifs faster and the resulting files a lot smaller (more like the original size, edit: LZW compression would be fine)?</p>\n"},{"tags":["java","fingerprint","musicg"],"answers":[{"tags":[],"owner":{"account_id":2114000,"reputation":1,"user_id":1878676,"display_name":"user1878676"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1484331769,"creation_date":1484331769,"answer_id":41641092,"question_id":40358055,"body_markdown":"For FingerprintSimilarityComputer(input1, input2), it suppose to take in the fingerprint of the loaded audio data and not the loaded audio data itself.\r\n\r\nIn your case, it should be:\r\n\r\n    // Convert your audio to wav using FFMpeg\r\n\r\n    Wave w1 = new Wave(&quot;first.wav&quot;);\r\n    Wave w2 = new Wave(&quot;second.wav&quot;);\r\n\r\n    FingerprintSimilarityComputer fingerprint = \r\n            new FingerprintSimilarityComputer(w1.getFingerprint(), w2.getFingerprint());\r\n\r\n    // print fingerprint.getFingerprintSimilarity()","title":"Java compare two audio files with fingerprint","body":"<p>For FingerprintSimilarityComputer(input1, input2), it suppose to take in the fingerprint of the loaded audio data and not the loaded audio data itself.</p>\n\n<p>In your case, it should be:</p>\n\n<pre><code>// Convert your audio to wav using FFMpeg\n\nWave w1 = new Wave(\"first.wav\");\nWave w2 = new Wave(\"second.wav\");\n\nFingerprintSimilarityComputer fingerprint = \n        new FingerprintSimilarityComputer(w1.getFingerprint(), w2.getFingerprint());\n\n// print fingerprint.getFingerprintSimilarity()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2370886,"reputation":2194,"user_id":2075537,"accept_rate":55,"display_name":"Torge"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680164829,"creation_date":1491767122,"answer_id":43311123,"question_id":40358055,"body_markdown":"Maybe I am missing a point, but if I understood you right, this should do:\r\n\r\n    byte[] firstAudio = readAudioFileData(&quot;first.mp3&quot;);\r\n    byte[] secondAudio = readAudioFileData(&quot;second.mp3&quot;);\r\n\r\n    byte[] smaller = firstAudio.length &lt;= secondAudio.length ? firstAudio : secondAudio;\r\n    byte[] bigger = firstAudio.length &gt; secondAudio.length ? firstAudio : secondAudio;\r\n\r\n    int ixS = 0;\r\n    int ixB = 0;\r\n\r\n    boolean contains = false;\r\n\r\n    for (; ixB&lt;bigger.length; ixB++) {\r\n        \r\n        if (smaller[ixS] == bigger[ixB]) {\r\n            ixS++;\r\n            if (ixS == smaller.length) {\r\n                contains = true;\r\n                break;\r\n            }\r\n        }\r\n        else {\r\n            ixS = 0;\r\n        }\r\n    }\r\n\r\n    if (contains) {\r\n        if (smaller.length == bigger.length) {\r\n            System.out.println(&quot;Both tracks are equal&quot;);\r\n        }\r\n        else {\r\n            System.out.println(&quot;The bigger track, fully contains the smaller track starting at byte: &quot;+(ixB-smaller.lenght));\r\n        }\r\n    }\r\n    else {\r\n        System.out.println(&quot;No track completely contains the other track&quot;);\r\n    }","title":"Java compare two audio files with fingerprint","body":"<p>Maybe I am missing a point, but if I understood you right, this should do:</p>\n<pre><code>byte[] firstAudio = readAudioFileData(&quot;first.mp3&quot;);\nbyte[] secondAudio = readAudioFileData(&quot;second.mp3&quot;);\n\nbyte[] smaller = firstAudio.length &lt;= secondAudio.length ? firstAudio : secondAudio;\nbyte[] bigger = firstAudio.length &gt; secondAudio.length ? firstAudio : secondAudio;\n\nint ixS = 0;\nint ixB = 0;\n\nboolean contains = false;\n\nfor (; ixB&lt;bigger.length; ixB++) {\n    \n    if (smaller[ixS] == bigger[ixB]) {\n        ixS++;\n        if (ixS == smaller.length) {\n            contains = true;\n            break;\n        }\n    }\n    else {\n        ixS = 0;\n    }\n}\n\nif (contains) {\n    if (smaller.length == bigger.length) {\n        System.out.println(&quot;Both tracks are equal&quot;);\n    }\n    else {\n        System.out.println(&quot;The bigger track, fully contains the smaller track starting at byte: &quot;+(ixB-smaller.lenght));\n    }\n}\nelse {\n    System.out.println(&quot;No track completely contains the other track&quot;);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1491799088,"creation_date":1491799088,"answer_id":43315074,"question_id":40358055,"body_markdown":"I never did any audio stuff in Java before, but I looked into your code briefly. I think that _musicg_ only works for WAV files, not for MP3. Thus, you need to convert the files first. A web search reveals that you can e.g. use [JLayer](http://www.javazoom.net/javalayer/javalayer.html) for that purpose. The corresponding code looks like this:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package de.scrum_master.so;\r\n    \r\n    import com.musicg.fingerprint.FingerprintManager;\r\n    import com.musicg.fingerprint.FingerprintSimilarity;\r\n    import com.musicg.fingerprint.FingerprintSimilarityComputer;\r\n    import com.musicg.wave.Wave;\r\n    import javazoom.jl.converter.Converter;\r\n    import javazoom.jl.decoder.JavaLayerException;\r\n    \r\n    public class Application {\r\n      public static void main(String[] args) throws JavaLayerException {\r\n        // MP3 to WAV\r\n        new Converter().convert(&quot;White Wedding.mp3&quot;, &quot;White Wedding.wav&quot;);\r\n        new Converter().convert(&quot;Poison.mp3&quot;, &quot;Poison.wav&quot;);\r\n        // Fingerprint from WAV\r\n        byte[] firstFingerPrint = new FingerprintManager().extractFingerprint(new Wave(&quot;White Wedding.wav&quot;));\r\n        byte[] secondFingerPrint = new FingerprintManager().extractFingerprint(new Wave(&quot;Poison.wav&quot;));\r\n        // Compare fingerprints\r\n        FingerprintSimilarity fingerprintSimilarity = new FingerprintSimilarityComputer(firstFingerPrint, secondFingerPrint).getFingerprintsSimilarity();\r\n        System.out.println(&quot;Similarity score = &quot; + fingerprintSimilarity.getScore());\r\n      }\r\n    }\r\n\r\nOf course you should make sure that you do not convert each file again whenever the program starts, i.e. you should check if the WAV files already exist. I skipped this step and reduced the sample code to a minimal working version.","title":"Java compare two audio files with fingerprint","body":"<p>I never did any audio stuff in Java before, but I looked into your code briefly. I think that <em>musicg</em> only works for WAV files, not for MP3. Thus, you need to convert the files first. A web search reveals that you can e.g. use <a href=\"http://www.javazoom.net/javalayer/javalayer.html\" rel=\"nofollow noreferrer\">JLayer</a> for that purpose. The corresponding code looks like this:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.so;\n\nimport com.musicg.fingerprint.FingerprintManager;\nimport com.musicg.fingerprint.FingerprintSimilarity;\nimport com.musicg.fingerprint.FingerprintSimilarityComputer;\nimport com.musicg.wave.Wave;\nimport javazoom.jl.converter.Converter;\nimport javazoom.jl.decoder.JavaLayerException;\n\npublic class Application {\n  public static void main(String[] args) throws JavaLayerException {\n    // MP3 to WAV\n    new Converter().convert(\"White Wedding.mp3\", \"White Wedding.wav\");\n    new Converter().convert(\"Poison.mp3\", \"Poison.wav\");\n    // Fingerprint from WAV\n    byte[] firstFingerPrint = new FingerprintManager().extractFingerprint(new Wave(\"White Wedding.wav\"));\n    byte[] secondFingerPrint = new FingerprintManager().extractFingerprint(new Wave(\"Poison.wav\"));\n    // Compare fingerprints\n    FingerprintSimilarity fingerprintSimilarity = new FingerprintSimilarityComputer(firstFingerPrint, secondFingerPrint).getFingerprintsSimilarity();\n    System.out.println(\"Similarity score = \" + fingerprintSimilarity.getScore());\n  }\n}\n</code></pre>\n\n<p>Of course you should make sure that you do not convert each file again whenever the program starts, i.e. you should check if the WAV files already exist. I skipped this step and reduced the sample code to a minimal working version.</p>\n"}],"owner":{"account_id":3913302,"reputation":1664,"user_id":3237946,"accept_rate":73,"display_name":"anatoli"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5977,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":43315074,"answer_count":3,"score":5,"last_activity_date":1692956548,"creation_date":1477995474,"question_id":40358055,"body_markdown":"I want find out, if two audio files are same or one contains the other.\r\n\r\nFor this I use Fingerprint of [musicg][1] \r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    byte[] firstAudio = readAudioFileData(&quot;first.mp3&quot;);\r\n    byte[] secondAudio = readAudioFileData(&quot;second.mp3&quot;);\r\n        \r\n    FingerprintSimilarityComputer fingerprint = \r\n        \t\tnew FingerprintSimilarityComputer(firstAudio, secondAudio);\r\n        \r\n    FingerprintSimilarity fingerprintSimilarity = fingerprint.getFingerprintsSimilarity();\r\n\r\n    System.out.println(&quot;clip is found at &quot; + fingerprintSimilarity.getScore());\r\n        \r\nto convert audio to byte array I use sound API\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    public static byte[] readAudioFileData(final String filePath) {\r\n        byte[] data = null;\r\n        try {\r\n            final ByteArrayOutputStream baout = new ByteArrayOutputStream();\r\n            final File file = new File(filePath);\r\n            final AudioInputStream audioInputStream = AudioSystem.getAudioInputStream(file);\r\n\r\n            byte[] buffer = new byte[4096];\r\n            int c;\r\n            while ((c = audioInputStream.read(buffer, 0, buffer.length)) != -1) {\r\n                baout.write(buffer, 0, c);\r\n            }\r\n            audioInputStream.close();\r\n            baout.close();\r\n            data = baout.toByteArray();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n        return data;\r\n    }\r\n\r\nbut when I execute it, I became at `fingerprint.getFingerprintsSimilarity()` an `Exception`.\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    Exception in thread &quot;main&quot; java.lang.ArrayIndexOutOfBoundsException: 15999\r\n\tat com.musicg.fingerprint.PairManager.getPairPositionList(PairManager.java:133)\r\n\tat com.musicg.fingerprint.PairManager.getPair_PositionList_Table(PairManager.java:80)\r\n\tat com.musicg.fingerprint.FingerprintSimilarityComputer.getFingerprintsSimilarity(FingerprintSimilarityComputer.java:71)\r\n\tat Main.main(Main.java:42)\r\n\r\nHow can I compare 2 mp3 files with fingerprint in Java?\r\n\r\n  [1]: https://code.google.com/archive/p/musicg/","title":"Java compare two audio files with fingerprint","body":"<p>I want find out, if two audio files are same or one contains the other.</p>\n\n<p>For this I use Fingerprint of <a href=\"https://code.google.com/archive/p/musicg/\" rel=\"noreferrer\">musicg</a> </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>byte[] firstAudio = readAudioFileData(\"first.mp3\");\nbyte[] secondAudio = readAudioFileData(\"second.mp3\");\n\nFingerprintSimilarityComputer fingerprint = \n            new FingerprintSimilarityComputer(firstAudio, secondAudio);\n\nFingerprintSimilarity fingerprintSimilarity = fingerprint.getFingerprintsSimilarity();\n\nSystem.out.println(\"clip is found at \" + fingerprintSimilarity.getScore());\n</code></pre>\n\n<p>to convert audio to byte array I use sound API</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public static byte[] readAudioFileData(final String filePath) {\n    byte[] data = null;\n    try {\n        final ByteArrayOutputStream baout = new ByteArrayOutputStream();\n        final File file = new File(filePath);\n        final AudioInputStream audioInputStream = AudioSystem.getAudioInputStream(file);\n\n        byte[] buffer = new byte[4096];\n        int c;\n        while ((c = audioInputStream.read(buffer, 0, buffer.length)) != -1) {\n            baout.write(buffer, 0, c);\n        }\n        audioInputStream.close();\n        baout.close();\n        data = baout.toByteArray();\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n    return data;\n}\n</code></pre>\n\n<p>but when I execute it, I became at <code>fingerprint.getFingerprintsSimilarity()</code> an <code>Exception</code>.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>Exception in thread \"main\" java.lang.ArrayIndexOutOfBoundsException: 15999\nat com.musicg.fingerprint.PairManager.getPairPositionList(PairManager.java:133)\nat com.musicg.fingerprint.PairManager.getPair_PositionList_Table(PairManager.java:80)\nat com.musicg.fingerprint.FingerprintSimilarityComputer.getFingerprintsSimilarity(FingerprintSimilarityComputer.java:71)\nat Main.main(Main.java:42)\n</code></pre>\n\n<p>How can I compare 2 mp3 files with fingerprint in Java?</p>\n"},{"tags":["java","exception","lombok","checked-exceptions","intellij-lombok-plugin"],"answers":[{"tags":[],"owner":{"account_id":4750084,"reputation":2919,"user_id":3840344,"accept_rate":73,"display_name":"Raghuveer"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1601903234,"creation_date":1601902531,"answer_id":64209043,"question_id":64208790,"body_markdown":"In the JAVA 8 and above when using lambda especially its not an easy way to use. \r\n\r\n1. Consider it mostly for older versions of Java 8.\r\n2. The purpose itself is to throw an exception deliberately for example for warning. By this the other services/program/code can identify how the request/response flow should be handled. If you already have mechanism in place no need to worry about it.\r\n\r\n`@SneakyThrows` is not of much use in current traditional application development, could be used in some kinda state machine programs where it would be necessary (i do not have expertise in it though) to determine the state of the programs current flow. This is just 1 example of different scenarios there maybe more.","title":"Application of @Sneaky Throws in lombok","body":"<p>In the JAVA 8 and above when using lambda especially its not an easy way to use.</p>\n<ol>\n<li>Consider it mostly for older versions of Java 8.</li>\n<li>The purpose itself is to throw an exception deliberately for example for warning. By this the other services/program/code can identify how the request/response flow should be handled. If you already have mechanism in place no need to worry about it.</li>\n</ol>\n<p><code>@SneakyThrows</code> is not of much use in current traditional application development, could be used in some kinda state machine programs where it would be necessary (i do not have expertise in it though) to determine the state of the programs current flow. This is just 1 example of different scenarios there maybe more.</p>\n"},{"tags":[],"owner":{"account_id":5379853,"reputation":535,"user_id":4285435,"display_name":"MarkAddison"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1601903150,"creation_date":1601903150,"answer_id":64209225,"question_id":64208790,"body_markdown":"I believe the intention here is to cause the compiler to not require a throws whatever Exception to be added to the method declaration.\r\n\r\nFor example if the method was\r\n\r\n    public void throwsCheckedException() {\r\n        throw new IOException(&quot;IO exception thrown&quot;);\r\n    }\r\n\r\nThis would cause a compile time exception requiring\r\n\r\n    public void throwsCheckedException() throws IOException {\r\n        throw new IOException(&quot;IO exception thrown&quot;);\r\n    }\r\n\r\nThe annotation @SneakThrows mitigates this - original method declared as\r\n\r\n    @SneakyThrows\r\n    public void throwsCheckedException() {\r\n        throw new IOException(&quot;IO exception thrown&quot;);\r\n    }\r\n\r\nThis will not cause a compile time error.\r\nNote IDEs might still highlight this as an error, for example in IntelliJ you will need to utilise the Lombok plugin.","title":"Application of @Sneaky Throws in lombok","body":"<p>I believe the intention here is to cause the compiler to not require a throws whatever Exception to be added to the method declaration.</p>\n<p>For example if the method was</p>\n<pre><code>public void throwsCheckedException() {\n    throw new IOException(&quot;IO exception thrown&quot;);\n}\n</code></pre>\n<p>This would cause a compile time exception requiring</p>\n<pre><code>public void throwsCheckedException() throws IOException {\n    throw new IOException(&quot;IO exception thrown&quot;);\n}\n</code></pre>\n<p>The annotation @SneakThrows mitigates this - original method declared as</p>\n<pre><code>@SneakyThrows\npublic void throwsCheckedException() {\n    throw new IOException(&quot;IO exception thrown&quot;);\n}\n</code></pre>\n<p>This will not cause a compile time error.\nNote IDEs might still highlight this as an error, for example in IntelliJ you will need to utilise the Lombok plugin.</p>\n"},{"tags":[],"owner":{"account_id":8371327,"reputation":734,"user_id":6286358,"display_name":"SnowmanXL"},"down_vote_count":0,"up_vote_count":36,"is_accepted":true,"score":36,"last_activity_date":1601904774,"creation_date":1601904774,"answer_id":64209669,"question_id":64208790,"body_markdown":"To add to the existing answers. I personally dislike checked exceptions. See for more info: https://phauer.com/2015/checked-exceptions-are-evil/\r\n\r\nTo add insult to injury, the code gets bloated when avoiding the checked exceptions. Consider the usage of @SneakyThrows: \r\n\r\n     List&lt;Instant&gt; instantsSneaky = List.of(&quot;2020-09-28T12:30:08.797481Z&quot;)\r\n            .stream()\r\n            .map(Example::parseSneaky)\r\n            .collect(Collectors.toList());\r\n\r\n    @SneakyThrows\r\n    private static Instant parseSneaky(String queryValue) {\r\n        return new SimpleDateFormat(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSS&#39;Z&#39;&quot;).parse(queryValue).toInstant();\r\n    }\r\n\r\nversus non-@SneakyThrows\r\n\r\n     private static Instant parseNonSneaky(String queryValue) throws ParseException {\r\n        return new SimpleDateFormat(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSS&#39;Z&#39;&quot;).parse(queryValue).toInstant();\r\n    }\r\n\r\n    List&lt;Instant&gt; instantsNonSneaky = List.of(&quot;2020-09-28T12:30:08.797481Z&quot;)\r\n            .stream()\r\n            .map(timeStamp -&gt; {\r\n                try {\r\n                    return parseNonSneaky(timeStamp);\r\n                } catch (ParseException e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n            })\r\n            .collect(Collectors.toList());\r\n\r\nHence the applicance of @SneakyThrows enables much cleaner code. ","title":"Application of @Sneaky Throws in lombok","body":"<p>To add to the existing answers. I personally dislike checked exceptions. See for more info: <a href=\"https://phauer.com/2015/checked-exceptions-are-evil/\" rel=\"noreferrer\">https://phauer.com/2015/checked-exceptions-are-evil/</a></p>\n<p>To add insult to injury, the code gets bloated when avoiding the checked exceptions. Consider the usage of @SneakyThrows:</p>\n<pre><code> List&lt;Instant&gt; instantsSneaky = List.of(&quot;2020-09-28T12:30:08.797481Z&quot;)\n        .stream()\n        .map(Example::parseSneaky)\n        .collect(Collectors.toList());\n\n@SneakyThrows\nprivate static Instant parseSneaky(String queryValue) {\n    return new SimpleDateFormat(&quot;yyyy-MM-dd'T'HH:mm:ss.SSS'Z'&quot;).parse(queryValue).toInstant();\n}\n</code></pre>\n<p>versus non-@SneakyThrows</p>\n<pre><code> private static Instant parseNonSneaky(String queryValue) throws ParseException {\n    return new SimpleDateFormat(&quot;yyyy-MM-dd'T'HH:mm:ss.SSS'Z'&quot;).parse(queryValue).toInstant();\n}\n\nList&lt;Instant&gt; instantsNonSneaky = List.of(&quot;2020-09-28T12:30:08.797481Z&quot;)\n        .stream()\n        .map(timeStamp -&gt; {\n            try {\n                return parseNonSneaky(timeStamp);\n            } catch (ParseException e) {\n                throw new RuntimeException(e);\n            }\n        })\n        .collect(Collectors.toList());\n</code></pre>\n<p>Hence the applicance of @SneakyThrows enables much cleaner code.</p>\n"},{"tags":[],"owner":{"account_id":5876312,"reputation":961,"user_id":4627040,"display_name":"Saeed Hassanvand"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1666847924,"creation_date":1666847924,"answer_id":74217112,"question_id":64208790,"body_markdown":"I think the [documentation][1] is very clear on this:\r\n\r\n    \r\n\r\n&gt; Common use cases for when you want to opt out of the checked exception\r\n&gt; mechanism center around 2 situations:\r\n&gt;     \r\n&gt; \r\n&gt;  1. A needlessly strict interface, such as Runnable - whatever exception propagates out of your run() method, checked or not, it will\r\n&gt; be passed to the Thread&#39;s unhandled exception handler. Catching a\r\n&gt; checked exception and wrapping it in some sort of RuntimeException is\r\n&gt; only obscuring the real cause of the issue.\r\n&gt; \r\n&gt; \r\n&gt;     \r\n&gt; \r\n&gt;  1. An &#39;impossible&#39; exception. For example, new String(someByteArray, &quot;UTF-8&quot;); declares that it can throw an UnsupportedEncodingException\r\n&gt; but according to the JVM specification, UTF-8 must always be\r\n&gt; available. An UnsupportedEncodingException here is about as likely as\r\n&gt; a ClassNotFoundError when you use a String object, and you don&#39;t catch\r\n&gt; those either!\r\n\r\n\r\n  [1]: https://projectlombok.org/features/SneakyThrows","title":"Application of @Sneaky Throws in lombok","body":"<p>I think the <a href=\"https://projectlombok.org/features/SneakyThrows\" rel=\"nofollow noreferrer\">documentation</a> is very clear on this:</p>\n<blockquote>\n<p>Common use cases for when you want to opt out of the checked exception\nmechanism center around 2 situations:</p>\n<ol>\n<li><p>A needlessly strict interface, such as Runnable - whatever exception propagates out of your run() method, checked or not, it will\nbe passed to the Thread's unhandled exception handler. Catching a\nchecked exception and wrapping it in some sort of RuntimeException is\nonly obscuring the real cause of the issue.</p>\n</li>\n<li><p>An 'impossible' exception. For example, new String(someByteArray, &quot;UTF-8&quot;); declares that it can throw an UnsupportedEncodingException\nbut according to the JVM specification, UTF-8 must always be\navailable. An UnsupportedEncodingException here is about as likely as\na ClassNotFoundError when you use a String object, and you don't catch\nthose either!</p>\n</li>\n</ol>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":9134977,"reputation":121,"user_id":6794989,"display_name":"Ramji"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1683559450,"creation_date":1683559450,"answer_id":76202009,"question_id":64208790,"body_markdown":"Normally when we have an interface and there are more than one implementations of the methods declared in the interface we might find it difficult to handle the signature changes for the exceptions thrown in the implementations. \r\n\r\nSay we have an interface and 2 implementations.\r\n\r\n    public interface A {\r\n        void methodSignature(String x);  // This has to be changed owing to the various Exception thrown from the implementations\r\n    }\r\n\r\n    public class B implements A {\r\n        @Override\r\n        void methodSignature(String x) throws IOException {\r\n            // implementation for B\r\n        }\r\n    }\r\n\r\n    public class C implements A {\r\n        @Override\r\n        void methodSignature(String x) throws ApiException {\r\n            // implementation of C\r\n        }\r\n    }\r\n\r\nWe can use a common throws Exception in place of IOException and ApiException but if there are more types of exceptions to be handled it might not be clear.\r\n\r\nHence we use @Sneakythrows and send the exceptions to GlobalException handlers annotated with @ControllerAdvice that would control the flow.\r\n\r\n\r\n    public interface A {\r\n        void methodSignature(String x); \r\n    }\r\n\r\n    public class B implements A {\r\n        @Override\r\n        @SneakyThrows\r\n        void methodSignature(String x) {\r\n            // implementation for B\r\n        }\r\n    }\r\n\r\n    public class C implements A {\r\n        @Override\r\n        @SneakyThrows\r\n        void methodSignature(String x) {\r\n            // implementation of C\r\n        }\r\n    }\r\n\r\n\r\nThis in particular helps when we have a contract with the users of the interfaces finalised.\r\n\r\nA sample of global exception handler looks like below\r\n\r\n        @ControllerAdvice\r\n        public class GlobalExceptionHandler {\r\n        @ExceptionHandler(\r\n                value = {HttpMessageNotReadableException.class, DataAccessException.class, Exception.class, RuntimeException.class})\r\n            public ResponseEntity defaultWebExceptionHandler(Exception ex, HttpServletRequest servletRequest, HttpServletResponse httpResponse) {\r\n        \r\n                LOGGER.error(&quot;A controller threw an exception&quot;, ex);\r\n                ResponseEntity returnValue = null;\r\n                ErrorInfo errorInfo = new ErrorInfo();\r\n                try {\r\n                    throw ex;\r\n                } catch (ResourceNotFoundException resourceNotFound) {\r\n                    errorInfo.setUserMessage(resourceNotFound.getMessage());\r\n                    errorInfo.setTechnicalDetails(resourceNotFound.getMessage());\r\n                    errorInfo.setMessageCode(HttpStatus.NOT_FOUND.toString());\r\n                    returnValue = new ResponseEntity(errorInfo, HttpStatus.NOT_FOUND);\r\n                } catch (HttpMessageNotReadableException hme) {\r\n    // ...\r\n                } catch (DataAccessException dae) {\r\n    // ...\r\n                } catch (Exception exception) {\r\n    // ...\r\n                }\r\n                configureHttpResponse(httpResponse, null, servletRequest.getRequestURI());\r\n                return returnValue;\r\n            }\r\n        }\r\n\r\n\r\n\r\n","title":"Application of @Sneaky Throws in lombok","body":"<p>Normally when we have an interface and there are more than one implementations of the methods declared in the interface we might find it difficult to handle the signature changes for the exceptions thrown in the implementations.</p>\n<p>Say we have an interface and 2 implementations.</p>\n<pre><code>public interface A {\n    void methodSignature(String x);  // This has to be changed owing to the various Exception thrown from the implementations\n}\n\npublic class B implements A {\n    @Override\n    void methodSignature(String x) throws IOException {\n        // implementation for B\n    }\n}\n\npublic class C implements A {\n    @Override\n    void methodSignature(String x) throws ApiException {\n        // implementation of C\n    }\n}\n</code></pre>\n<p>We can use a common throws Exception in place of IOException and ApiException but if there are more types of exceptions to be handled it might not be clear.</p>\n<p>Hence we use @Sneakythrows and send the exceptions to GlobalException handlers annotated with @ControllerAdvice that would control the flow.</p>\n<pre><code>public interface A {\n    void methodSignature(String x); \n}\n\npublic class B implements A {\n    @Override\n    @SneakyThrows\n    void methodSignature(String x) {\n        // implementation for B\n    }\n}\n\npublic class C implements A {\n    @Override\n    @SneakyThrows\n    void methodSignature(String x) {\n        // implementation of C\n    }\n}\n</code></pre>\n<p>This in particular helps when we have a contract with the users of the interfaces finalised.</p>\n<p>A sample of global exception handler looks like below</p>\n<pre><code>    @ControllerAdvice\n    public class GlobalExceptionHandler {\n    @ExceptionHandler(\n            value = {HttpMessageNotReadableException.class, DataAccessException.class, Exception.class, RuntimeException.class})\n        public ResponseEntity defaultWebExceptionHandler(Exception ex, HttpServletRequest servletRequest, HttpServletResponse httpResponse) {\n    \n            LOGGER.error(&quot;A controller threw an exception&quot;, ex);\n            ResponseEntity returnValue = null;\n            ErrorInfo errorInfo = new ErrorInfo();\n            try {\n                throw ex;\n            } catch (ResourceNotFoundException resourceNotFound) {\n                errorInfo.setUserMessage(resourceNotFound.getMessage());\n                errorInfo.setTechnicalDetails(resourceNotFound.getMessage());\n                errorInfo.setMessageCode(HttpStatus.NOT_FOUND.toString());\n                returnValue = new ResponseEntity(errorInfo, HttpStatus.NOT_FOUND);\n            } catch (HttpMessageNotReadableException hme) {\n// ...\n            } catch (DataAccessException dae) {\n// ...\n            } catch (Exception exception) {\n// ...\n            }\n            configureHttpResponse(httpResponse, null, servletRequest.getRequestURI());\n            return returnValue;\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2691023,"reputation":16196,"user_id":2324388,"accept_rate":41,"display_name":"Marian Kl&#252;hspies"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692956211,"creation_date":1692956211,"answer_id":76975993,"question_id":64208790,"body_markdown":"I regularly use the `@SneakyThrows` annotation in the following scenarios:\r\n\r\n1. **Supress try-catch boilerplate** when using **lambdas**\r\n2. When a **specific exception should terminate the entire process** and there is no need to force any caller of the hierarchy to handle it explicitly (although **RuntimeException** can be used here as well)\r\n3. Usage of **third-party APIs** forcing you to handle an exception but you have no need to (goes hand in hand with 2.)\r\n","title":"Application of @Sneaky Throws in lombok","body":"<p>I regularly use the <code>@SneakyThrows</code> annotation in the following scenarios:</p>\n<ol>\n<li><strong>Supress try-catch boilerplate</strong> when using <strong>lambdas</strong></li>\n<li>When a <strong>specific exception should terminate the entire process</strong> and there is no need to force any caller of the hierarchy to handle it explicitly (although <strong>RuntimeException</strong> can be used here as well)</li>\n<li>Usage of <strong>third-party APIs</strong> forcing you to handle an exception but you have no need to (goes hand in hand with 2.)</li>\n</ol>\n"}],"owner":{"account_id":13651172,"reputation":804,"user_id":9849018,"display_name":"Shivanshu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33500,"favorite_count":0,"down_vote_count":0,"up_vote_count":30,"accepted_answer_id":64209669,"answer_count":6,"score":30,"last_activity_date":1692956211,"creation_date":1601901581,"question_id":64208790,"body_markdown":"I was playing with the Lombok library in Java and found an annotation called @SneakyThrows.\r\nAs the documentation states: \r\n\r\n&gt;  @SneakyThrows fakes out the compiler. In other words, Lombok doesn&#39;t wrap or replace the thrown checked exception, but makes the compiler think that it is an unchecked exception.\r\n\r\nWith other words, this is a way to bypass exceptions at compile time. But in my opinion this should not be the correct way of handling exceptions, because the bypassed exception can show weird behaviour at runtime.\r\n\r\nSo in which scenario should @SneakyThrows be used?\r\n\r\n","title":"Application of @Sneaky Throws in lombok","body":"<p>I was playing with the Lombok library in Java and found an annotation called @SneakyThrows.\nAs the documentation states:</p>\n<blockquote>\n<p>@SneakyThrows fakes out the compiler. In other words, Lombok doesn't wrap or replace the thrown checked exception, but makes the compiler think that it is an unchecked exception.</p>\n</blockquote>\n<p>With other words, this is a way to bypass exceptions at compile time. But in my opinion this should not be the correct way of handling exceptions, because the bypassed exception can show weird behaviour at runtime.</p>\n<p>So in which scenario should @SneakyThrows be used?</p>\n"},{"tags":["java","algorithm","for-loop","e-commerce","sap-commerce-cloud"],"comments":[{"owner":{"account_id":20642777,"reputation":1380,"user_id":15155030,"display_name":"Yoni"},"score":0,"creation_date":1689854130,"post_id":76728272,"comment_id":135273807,"body_markdown":"Any specific reason you are using updateCartEntry instead of running the update line  through addToCart? addToCart will merge lines (depends on the properties to use to merge) and append with the quantity. updateCartEntry is if you want to fully update the line. appending extra quanitity can be done through addToCart. see cartfacade.addToCart(code,quantity)","body":"Any specific reason you are using updateCartEntry instead of running the update line  through addToCart? addToCart will merge lines (depends on the properties to use to merge) and append with the quantity. updateCartEntry is if you want to fully update the line. appending extra quanitity can be done through addToCart. see cartfacade.addToCart(code,quantity)"},{"owner":{"account_id":19556619,"reputation":1,"user_id":14310825,"display_name":"DEBAGNIK KAR"},"score":0,"creation_date":1689945132,"post_id":76728272,"comment_id":135288632,"body_markdown":"There is no specific reason for using for using updateCartEntry() instead of addToCart(). Rather I previously used addToCart() with a different method signature. But the behaivior remained the same. @Yoni","body":"There is no specific reason for using for using updateCartEntry() instead of addToCart(). Rather I previously used addToCart() with a different method signature. But the behaivior remained the same. @Yoni"}],"answers":[{"tags":[],"owner":{"account_id":12419314,"reputation":535,"user_id":11968199,"display_name":"Maksym Kosenko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691491511,"creation_date":1691491511,"answer_id":76858791,"question_id":76728272,"body_markdown":"There is a mistake in your loops so the nested one does not ever break. Let&#39;s assume you have one product in a wish list and four products in a cart. In this setup **addToCart(wishListEntry)** method will be called four times. Also if there is a possibility to have the same product in a wish list multiple times it would make sense to change the implementation so there were two separate loops which would populate a map like &lt;productCode, finalQuantity&gt; and then iterate over the map and finally call expensive add/update operation just one time per each product.","title":"How can I add products on backend from a Wishlist to cart","body":"<p>There is a mistake in your loops so the nested one does not ever break. Let's assume you have one product in a wish list and four products in a cart. In this setup <strong>addToCart(wishListEntry)</strong> method will be called four times. Also if there is a possibility to have the same product in a wish list multiple times it would make sense to change the implementation so there were two separate loops which would populate a map like &lt;productCode, finalQuantity&gt; and then iterate over the map and finally call expensive add/update operation just one time per each product.</p>\n"},{"tags":[],"owner":{"account_id":1491796,"reputation":71,"user_id":1398724,"display_name":"Adam Badura"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691494622,"creation_date":1691494622,"answer_id":76859183,"question_id":76728272,"body_markdown":"I think that the main problem is that you don&#39;t refresh the *cart* after manipulating it&#39;s entries using *de.hybris.platform.commercefacades.order.CartFacade* methods.\r\n\r\nFor example let&#39;s assume that you have a simple cart:\r\n* 1x Product A (#1)\r\n\r\nand a wishlist:\r\n* 1x Product A (#1)\r\n* 1x Product A (#2)\r\n\r\nIn such scenario when you iterate over wishlist entries you always update cart entry to a value *wishlist.getQuantity+cartEntry.getQuantity* where *cartEntry.getQuantity* always returns the quantity of 1 (because this was the cart quantity at the beginning of the operation).\r\n\r\nSo you have something like this:\r\n1. Load cart containing 1xProduct A into ***cart***\r\n1. Iterate over wishlist entries\r\n    1. For wishlist entry #1 - iterate over ***cart.getEntries()***:\r\n        1. For cart entry #1 - you have a matching entry so call updateCartEntry using the quantity of cart entry #1 of the cart loaded in step 1\r\n    1. For wishlist entry #2 - iterate over ***cart.getEntries()***:\r\n        1. For cart entry #1 - you have a matching entry so call updateCartEntry using the quantity of cart entry #1 of the cart loaded in step 1 -&gt; **the problem is that this value is stale, it was not updated by updateCartEntry in step 2.1.1**\r\n\r\nTo avoid this you could:\r\n1. Somehow update the quantities of entries of ***cart*** loaded in step 1\r\n1. Avoid updating the same cart entry multiple times by either:\r\n    1. Disallowing multiple entries containing the same product\r\n    1. Or merging entries containing the same product at the beginning just as Maksym Kosenko suggested in his answer.","title":"How can I add products on backend from a Wishlist to cart","body":"<p>I think that the main problem is that you don't refresh the <em>cart</em> after manipulating it's entries using <em>de.hybris.platform.commercefacades.order.CartFacade</em> methods.</p>\n<p>For example let's assume that you have a simple cart:</p>\n<ul>\n<li>1x Product A (#1)</li>\n</ul>\n<p>and a wishlist:</p>\n<ul>\n<li>1x Product A (#1)</li>\n<li>1x Product A (#2)</li>\n</ul>\n<p>In such scenario when you iterate over wishlist entries you always update cart entry to a value <em>wishlist.getQuantity+cartEntry.getQuantity</em> where <em>cartEntry.getQuantity</em> always returns the quantity of 1 (because this was the cart quantity at the beginning of the operation).</p>\n<p>So you have something like this:</p>\n<ol>\n<li>Load cart containing 1xProduct A into <em><strong>cart</strong></em></li>\n<li>Iterate over wishlist entries\n<ol>\n<li>For wishlist entry #1 - iterate over <em><strong>cart.getEntries()</strong></em>:\n<ol>\n<li>For cart entry #1 - you have a matching entry so call updateCartEntry using the quantity of cart entry #1 of the cart loaded in step 1</li>\n</ol>\n</li>\n<li>For wishlist entry #2 - iterate over <em><strong>cart.getEntries()</strong></em>:\n<ol>\n<li>For cart entry #1 - you have a matching entry so call updateCartEntry using the quantity of cart entry #1 of the cart loaded in step 1 -&gt; <strong>the problem is that this value is stale, it was not updated by updateCartEntry in step 2.1.1</strong></li>\n</ol>\n</li>\n</ol>\n</li>\n</ol>\n<p>To avoid this you could:</p>\n<ol>\n<li>Somehow update the quantities of entries of <em><strong>cart</strong></em> loaded in step 1</li>\n<li>Avoid updating the same cart entry multiple times by either:\n<ol>\n<li>Disallowing multiple entries containing the same product</li>\n<li>Or merging entries containing the same product at the beginning just as Maksym Kosenko suggested in his answer.</li>\n</ol>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":19556619,"reputation":1,"user_id":14310825,"display_name":"DEBAGNIK KAR"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692955815,"creation_date":1692955815,"answer_id":76975944,"question_id":76728272,"body_markdown":"Thanks for all the comments and answers.    \r\nI solved this issue by separating adding, and updating tasks in the methods.      \r\nNested loops which I was using earlier as correctly pointed out by @Mak in their answer never break thus causing the `addToCart()` method to override the manipulations made earlier.      \r\nbut instead of using a map, I used a more simple solution and did the following:     \r\n\r\n 1. Called the session cart\r\n 2. Copied the cart in another variable \r\n 3. Called the `addToCart()` method and overwrite all the cart entries with the wishlist entry\r\n 4. After overwriting the cart with the shopping list entries, I loop through the copy of the cart and the cart and update the product which are same.\r\n\r\nThe code is below\r\n\r\n\r\n    public void addAllToCart(String wishListId) {\r\n        WishListModel wishList = findByWishlistId(wishListId)\r\n        CartModel cart = cartService.getSessionCart();\r\n        CartModel tempCart = copyOf(cart);\r\n        if(CollectionUtils.isNotEmpty(wishList.getEntries())) {\r\n            for (WishListEntryModel wishListEntry : wishlist.getEntries()) {\r\n                cartFacade.addToCart(wishListEntry);\r\n            }\r\n            if(Objects.nonNull(tempCart)){\r\n                for (AbstractOrderEntryModel tempCartEntry : tempCart.getEntries()) {\r\n                    checkInCartEntry(tempCartEntry, cart.getEntries());\r\n                }\r\n            }\r\n        }\r\n    }\r\n    private void checkInCartEntry(AbstractOrderEntryModel tempCartEntry, List&lt;AbstractOrderEntryModel&gt; cartEntries) throws CommerceCartModificationException {\r\n        for (AbstractOrderEntryModel cartEntry : cartEntries) {\r\n            if(!tempCartEntry.getProduct().getCode().isEmpty() &amp;&amp;  !cartEntry.getProduct().getCode().isEmpty() &amp;&amp; (tempCartEntry.getProduct().getCode().equalsIgnoreCase(cartEntry.getProduct().getCode()))) {\r\n                    cartFacade.updateCartEntry(cartEntry.getEntryNumber(), cartEntry.getQuantity());\r\n\r\n            }\r\n        }\r\n    }\r\n","title":"How can I add products on backend from a Wishlist to cart","body":"<p>Thanks for all the comments and answers.<br />\nI solved this issue by separating adding, and updating tasks in the methods.<br />\nNested loops which I was using earlier as correctly pointed out by @Mak in their answer never break thus causing the <code>addToCart()</code> method to override the manipulations made earlier.<br />\nbut instead of using a map, I used a more simple solution and did the following:</p>\n<ol>\n<li>Called the session cart</li>\n<li>Copied the cart in another variable</li>\n<li>Called the <code>addToCart()</code> method and overwrite all the cart entries with the wishlist entry</li>\n<li>After overwriting the cart with the shopping list entries, I loop through the copy of the cart and the cart and update the product which are same.</li>\n</ol>\n<p>The code is below</p>\n<pre><code>public void addAllToCart(String wishListId) {\n    WishListModel wishList = findByWishlistId(wishListId)\n    CartModel cart = cartService.getSessionCart();\n    CartModel tempCart = copyOf(cart);\n    if(CollectionUtils.isNotEmpty(wishList.getEntries())) {\n        for (WishListEntryModel wishListEntry : wishlist.getEntries()) {\n            cartFacade.addToCart(wishListEntry);\n        }\n        if(Objects.nonNull(tempCart)){\n            for (AbstractOrderEntryModel tempCartEntry : tempCart.getEntries()) {\n                checkInCartEntry(tempCartEntry, cart.getEntries());\n            }\n        }\n    }\n}\nprivate void checkInCartEntry(AbstractOrderEntryModel tempCartEntry, List&lt;AbstractOrderEntryModel&gt; cartEntries) throws CommerceCartModificationException {\n    for (AbstractOrderEntryModel cartEntry : cartEntries) {\n        if(!tempCartEntry.getProduct().getCode().isEmpty() &amp;&amp;  !cartEntry.getProduct().getCode().isEmpty() &amp;&amp; (tempCartEntry.getProduct().getCode().equalsIgnoreCase(cartEntry.getProduct().getCode()))) {\n                cartFacade.updateCartEntry(cartEntry.getEntryNumber(), cartEntry.getQuantity());\n\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":19556619,"reputation":1,"user_id":14310825,"display_name":"DEBAGNIK KAR"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":121,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76975944,"answer_count":3,"score":0,"last_activity_date":1692955815,"creation_date":1689843708,"question_id":76728272,"body_markdown":"I have been working on developing am API which basically adds/updates all the products from a wishlist to the user&#39;s cart.\r\n\r\nThe requirements of the API are as follows:\r\n\r\n1. the API should take input of the ID of the wishlist and add all its products to cart\r\n2. If the products stored in the wishlist already exists on cart then the cart quantity is to be updated with the sum of both the quantity present on wishlist and the cart.\r\n3. the wishlist is to be retained after adding the products.\r\n\r\nThe logic that I had implemented deals with a 2 nested for loop, one loops the wishlist entries and the other loops the cart entries if the cart isn&#39;t empty. This logic works well for adding a product but I am having trouble updating the products.\r\n\r\nWhen I hit the API on an empty cart I see no issue all the products were added perfectly, but when I try to hit the API again the only one item of the cart is getting updated while the others stay the same, this is happening cause when the index of the wishlist is incrementing to check for the next product the previously updated products which were updated to the sum of the both quantities are now overridden by the `addToCart()` method.\r\n\r\nlike if there are 2 same products on the wishlist and the cart namely Product A and Product B on the two for loops\r\n\r\nThere will be four conditions\r\n\r\n    sl cart   wishlist   operation\r\n    1   A         A       update\r\n    2   A         B        add\r\n    3   B         A        add\r\n    4   B         B       update\r\n\r\nFor case 1 the product gets updated at first but the is getting overridden by the addToCart method in the second iteration.\r\n\r\nHow do I solve this?\r\n\r\nSuggestions to other type of implementation is also welcome but I can&#39;t change most of the pre-existing methods such as `AddToCart()` or `UpdateCart()`.\r\n\r\nThe implementation\r\n\r\n    public void addAllToCart(String wishListId) \r\n    {\r\n        //code for finding the wishlist by ID saves the wishlist on wishlist of type WishListModel\r\n        //code for getting session cart saves on cart of type CartModel\r\n        if (CollectionUtils.isNotEmpty(wishlist.getEntries())) \r\n        {\r\n            for (WishListEntryModel wishListEntry : wishlist.getEntries()) \r\n            {\r\n                checkInCartEntry(wishListEntry, cart.getEntries());\r\n            }\r\n        }\r\n    }\r\n\r\n    private void checkInCartEntry(WishListEntryModel wishListEntry, List&lt;AbstractOrderEntryModel&gt; cartEntries)\r\n    {\r\n        if (CollectionUtils.isEmpty(cartEntries))\r\n        {\r\n            addToCart(wishListEntry);\r\n        }\r\n        else\r\n        {\r\n            for (AbstractOrderEntryModel cartEntry : cartEntries) \r\n            {\r\n                if (wishListEntry.getProduct().getCode().equalsIgnoreCase(cartEntry.getProduct().getCode())) \r\n                {\r\n                    updateCartEntry(cartEntry.getEntryNumber, wishlist.getQuantity+cartEntry.getQuantity);\r\n                } \r\n                else \r\n                {\r\n                    addToCart(wishListEntry);\r\n                }\r\n            }\r\n        }\r\n    }\r\n","title":"How can I add products on backend from a Wishlist to cart","body":"<p>I have been working on developing am API which basically adds/updates all the products from a wishlist to the user's cart.</p>\n<p>The requirements of the API are as follows:</p>\n<ol>\n<li>the API should take input of the ID of the wishlist and add all its products to cart</li>\n<li>If the products stored in the wishlist already exists on cart then the cart quantity is to be updated with the sum of both the quantity present on wishlist and the cart.</li>\n<li>the wishlist is to be retained after adding the products.</li>\n</ol>\n<p>The logic that I had implemented deals with a 2 nested for loop, one loops the wishlist entries and the other loops the cart entries if the cart isn't empty. This logic works well for adding a product but I am having trouble updating the products.</p>\n<p>When I hit the API on an empty cart I see no issue all the products were added perfectly, but when I try to hit the API again the only one item of the cart is getting updated while the others stay the same, this is happening cause when the index of the wishlist is incrementing to check for the next product the previously updated products which were updated to the sum of the both quantities are now overridden by the <code>addToCart()</code> method.</p>\n<p>like if there are 2 same products on the wishlist and the cart namely Product A and Product B on the two for loops</p>\n<p>There will be four conditions</p>\n<pre><code>sl cart   wishlist   operation\n1   A         A       update\n2   A         B        add\n3   B         A        add\n4   B         B       update\n</code></pre>\n<p>For case 1 the product gets updated at first but the is getting overridden by the addToCart method in the second iteration.</p>\n<p>How do I solve this?</p>\n<p>Suggestions to other type of implementation is also welcome but I can't change most of the pre-existing methods such as <code>AddToCart()</code> or <code>UpdateCart()</code>.</p>\n<p>The implementation</p>\n<pre><code>public void addAllToCart(String wishListId) \n{\n    //code for finding the wishlist by ID saves the wishlist on wishlist of type WishListModel\n    //code for getting session cart saves on cart of type CartModel\n    if (CollectionUtils.isNotEmpty(wishlist.getEntries())) \n    {\n        for (WishListEntryModel wishListEntry : wishlist.getEntries()) \n        {\n            checkInCartEntry(wishListEntry, cart.getEntries());\n        }\n    }\n}\n\nprivate void checkInCartEntry(WishListEntryModel wishListEntry, List&lt;AbstractOrderEntryModel&gt; cartEntries)\n{\n    if (CollectionUtils.isEmpty(cartEntries))\n    {\n        addToCart(wishListEntry);\n    }\n    else\n    {\n        for (AbstractOrderEntryModel cartEntry : cartEntries) \n        {\n            if (wishListEntry.getProduct().getCode().equalsIgnoreCase(cartEntry.getProduct().getCode())) \n            {\n                updateCartEntry(cartEntry.getEntryNumber, wishlist.getQuantity+cartEntry.getQuantity);\n            } \n            else \n            {\n                addToCart(wishListEntry);\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","antlr4"],"comments":[{"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"score":0,"creation_date":1692908244,"post_id":76972653,"comment_id":135692119,"body_markdown":"There’s a difference between Javadoc and regular comments. Javadoc _always_ precedes the definition that is being documented (class or method). What you showed are actually comments that use invalid syntax, those should use `//` or `/* */` instead.","body":"There’s a difference between Javadoc and regular comments. Javadoc <i>always</i> precedes the definition that is being documented (class or method). What you showed are actually comments that use invalid syntax, those should use <code>&#47;&#47;</code> or <code>&#47;* *&#47;</code> instead."},{"owner":{"account_id":3699274,"reputation":117,"user_id":3079581,"display_name":"ivangsa"},"score":0,"creation_date":1692909512,"post_id":76972653,"comment_id":135692344,"body_markdown":"This grammar is not for parsing Java but JHipster &#39;like&#39; JDL files (see https://www.jhipster.tech/jdl/entities-fields#commenting). The example I posted is the right syntaxis. Btw `javadoc` and `suffix_javadoc` rules are identical in content.","body":"This grammar is not for parsing Java but JHipster &#39;like&#39; JDL files (see <a href=\"https://www.jhipster.tech/jdl/entities-fields#commenting\" rel=\"nofollow noreferrer\">jhipster.tech/jdl/entities-fields#commenting</a>). The example I posted is the right syntaxis. Btw <code>javadoc</code> and <code>suffix_javadoc</code> rules are identical in content."}],"answers":[{"tags":[],"owner":{"account_id":1156784,"reputation":50182,"user_id":1137174,"accept_rate":78,"display_name":"Mike Lischke"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692946810,"creation_date":1692946810,"answer_id":76974939,"question_id":76972653,"body_markdown":"Do not confuse semantics with syntax. A comment being JavaDoc or not is a semantic decision! So my advice is to parse without explicit `javaDoc` rules, but put all comments on a hidden channel (like almost all grammars do). Then, in your semantic phase (which follows the syntax phase, where you parsed your input) walk through the hidden channel tokens, compare their position to other tokens in the default channel and decide then based on that comparison if this comment is to be considered as normal comment or as doc comment.","title":"With ANTLR4 Parser: How to skip parsing RULE after new line (hidden token)","body":"<p>Do not confuse semantics with syntax. A comment being JavaDoc or not is a semantic decision! So my advice is to parse without explicit <code>javaDoc</code> rules, but put all comments on a hidden channel (like almost all grammars do). Then, in your semantic phase (which follows the syntax phase, where you parsed your input) walk through the hidden channel tokens, compare their position to other tokens in the default channel and decide then based on that comparison if this comment is to be considered as normal comment or as doc comment.</p>\n"}],"owner":{"account_id":3699274,"reputation":117,"user_id":3079581,"display_name":"ivangsa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692955807,"creation_date":1692907923,"question_id":76972653,"body_markdown":"I&#39;m trying to implement a rule for javadoc/comments where javadoc can be placed either on the line before the field or right after in the same line (like in JHipster JDL)\r\n\r\n\r\n    entity A {\r\n      firstField String\r\n      /** name javadoc */\r\n      name String\r\n      count Integer /** count javadoc */\r\n    }\r\n\r\nThis is what the rule looks like:\r\n\r\n\r\n    field: javadoc? annotations field_name field_type (field_validations)* suffix_javadoc?\r\n\r\nBut because new line tokens are ignored, javadoc is always being parsed as suffix_javadoc.\r\n\r\nIn this example &quot;name javadoc&quot; ends up in firstField.\r\n\r\nI would like to skip the rule `suffix_javadoc` after a new line token\r\n\r\n**Clarification:** in the example above both are &quot;doc comments&quot;, my problem is how to build a parse-tree that takes into account that &quot;entity fields&quot; are separated by a new-line character, so after a new line came a new field not a suffix_javadoc.\r\n\r\nDigging into the code I got this working, but it feels very hacky.\r\n\r\n    @parser::members {\r\n        public Token match(int ttype) throws RecognitionException {\r\n            try { // hack to not parse suffix javadoc after new lines (hidden tokens)\r\n                if(getRuleContext() instanceof Suffix_javadocContext) {\r\n                    System.out.println(&quot;RULE_suffix_javadoc&quot;);\r\n                    int currentTokenIndex = getCurrentToken().getTokenIndex();\r\n                    var prevToken = getTokenStream().get(currentTokenIndex - 1);\r\n                    if(prevToken.getText().contains(&quot;\\n&quot;)) {\r\n                        return null;\r\n                    }\r\n                }\r\n            } catch (Exception e) {\r\n                System.out.println(e.getMessage());\r\n            }\r\n            return super.match(ttype);\r\n        }\r\n    }\r\n\r\n\r\nIs there a proper/better way to achieve this?","title":"With ANTLR4 Parser: How to skip parsing RULE after new line (hidden token)","body":"<p>I'm trying to implement a rule for javadoc/comments where javadoc can be placed either on the line before the field or right after in the same line (like in JHipster JDL)</p>\n<pre><code>entity A {\n  firstField String\n  /** name javadoc */\n  name String\n  count Integer /** count javadoc */\n}\n</code></pre>\n<p>This is what the rule looks like:</p>\n<pre><code>field: javadoc? annotations field_name field_type (field_validations)* suffix_javadoc?\n</code></pre>\n<p>But because new line tokens are ignored, javadoc is always being parsed as suffix_javadoc.</p>\n<p>In this example &quot;name javadoc&quot; ends up in firstField.</p>\n<p>I would like to skip the rule <code>suffix_javadoc</code> after a new line token</p>\n<p><strong>Clarification:</strong> in the example above both are &quot;doc comments&quot;, my problem is how to build a parse-tree that takes into account that &quot;entity fields&quot; are separated by a new-line character, so after a new line came a new field not a suffix_javadoc.</p>\n<p>Digging into the code I got this working, but it feels very hacky.</p>\n<pre><code>@parser::members {\n    public Token match(int ttype) throws RecognitionException {\n        try { // hack to not parse suffix javadoc after new lines (hidden tokens)\n            if(getRuleContext() instanceof Suffix_javadocContext) {\n                System.out.println(&quot;RULE_suffix_javadoc&quot;);\n                int currentTokenIndex = getCurrentToken().getTokenIndex();\n                var prevToken = getTokenStream().get(currentTokenIndex - 1);\n                if(prevToken.getText().contains(&quot;\\n&quot;)) {\n                    return null;\n                }\n            }\n        } catch (Exception e) {\n            System.out.println(e.getMessage());\n        }\n        return super.match(ttype);\n    }\n}\n</code></pre>\n<p>Is there a proper/better way to achieve this?</p>\n"},{"tags":["java","tomcat","jdbc"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1412674186,"post_id":26180770,"comment_id":41145258,"body_markdown":"Make sure that your oracle driver isn&#39;t also in the `WEB-INF/lib` directory. As that would auto register and start some of the Oracle JDBC stuff. See also [here](http://stackoverflow.com/questions/3320400/to-prevent-a-memory-leak-the-jdbc-driver-has-been-forcibly-unregistered).","body":"Make sure that your oracle driver isn&#39;t also in the <code>WEB-INF&#47;lib</code> directory. As that would auto register and start some of the Oracle JDBC stuff. See also <a href=\"http://stackoverflow.com/questions/3320400/to-prevent-a-memory-leak-the-jdbc-driver-has-been-forcibly-unregistered\">here</a>."},{"owner":{"account_id":5122930,"reputation":123,"user_id":4105953,"display_name":"finchie"},"score":0,"creation_date":1412680082,"post_id":26180770,"comment_id":41148285,"body_markdown":"@M.Deinum thanks, but I&#39;ve already ensured that the JDBC driver is only in `tomcat/lib` and not the application&#39;s `WEB-INF/lib`","body":"@M.Deinum thanks, but I&#39;ve already ensured that the JDBC driver is only in <code>tomcat&#47;lib</code> and not the application&#39;s <code>WEB-INF&#47;lib</code>"},{"owner":{"account_id":374414,"reputation":549,"user_id":724604,"accept_rate":68,"display_name":"buddyp450"},"score":0,"creation_date":1591808268,"post_id":26180770,"comment_id":110199715,"body_markdown":"Just in case someone else runs across this like I did; was using the ojdbc8 v12.2.0.1 which purportedly has this issue fixed. Was running it in intellij and couldn&#39;t start the server due to this message and subsequent crash. Solved by simply invalidating and restarting intellij. /shrug","body":"Just in case someone else runs across this like I did; was using the ojdbc8 v12.2.0.1 which purportedly has this issue fixed. Was running it in intellij and couldn&#39;t start the server due to this message and subsequent crash. Solved by simply invalidating and restarting intellij. /shrug"}],"answers":[{"tags":[],"owner":{"account_id":189531,"reputation":22741,"user_id":428916,"accept_rate":69,"display_name":"Rocky Pulley"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1412347405,"creation_date":1412347405,"answer_id":26181140,"question_id":26180770,"body_markdown":"This is normal, it happens when you hot deploy in Tomcat.  It will not cause you any problems normally in production because you don&#39;t generally keep hot deploying updates in production, you just stop and restart the server instead.\r\n","title":"Memory leak on Tomcat 7 with Oracle JDBC drivers 12c - oracle.jdbc.driver thread failed to stop","body":"<p>This is normal, it happens when you hot deploy in Tomcat.  It will not cause you any problems normally in production because you don't generally keep hot deploying updates in production, you just stop and restart the server instead.</p>\n"},{"tags":[],"owner":{"account_id":3700031,"reputation":6378,"user_id":3080094,"display_name":"vanOekel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1412688588,"creation_date":1412688588,"answer_id":26237212,"question_id":26180770,"body_markdown":"I found a lengthy discussion about the subject [here](http://grokbase.com/t/tomcat/users/135htyhs7z/follow-up-possible-false-postive-with-jrememoryleakpreventionlistener-and-tomcats-jdbc-pool-and-oracletimeoutpollingthread). The conclusion is that it creates a &quot;fixed size memory leak&quot;, i.e. subsequent redeploys will not increase the memory leak.\r\n&lt;br&gt;I do not have Oracle Support access, but the bug ID mentioned in the discussion is 16841748 (May 2013, might be solved now).\r\n\r\nA possible workaround is to actually use the datasource once (get connection, do dummy query, close connection) when Tomcat is started via a custom servlet that is configured to &quot;load-on-startup&quot; in `tomcat/conf/web.xml`. This should start the Oracle driver thread(s) (see also the [FAQ](http://www.oracle.com/technetwork/database/enterprise-edition/jdbc-faq-090281.html#02_14) about driver threads) outside of the scope of the class-loader of your web-app, thus preventing the &quot;fixed size memory leak&quot;.\r\n\r\nNote that a similar issue exists for the MySQL JDBC driver but has a [decent solution](https://stackoverflow.com/a/24471527/3080094). Such a solution may exist for a recent version of the Oracle JDBC driver (I don&#39;t know). ","title":"Memory leak on Tomcat 7 with Oracle JDBC drivers 12c - oracle.jdbc.driver thread failed to stop","body":"<p>I found a lengthy discussion about the subject <a href=\"http://grokbase.com/t/tomcat/users/135htyhs7z/follow-up-possible-false-postive-with-jrememoryleakpreventionlistener-and-tomcats-jdbc-pool-and-oracletimeoutpollingthread\" rel=\"nofollow noreferrer\">here</a>. The conclusion is that it creates a \"fixed size memory leak\", i.e. subsequent redeploys will not increase the memory leak.\n<br>I do not have Oracle Support access, but the bug ID mentioned in the discussion is 16841748 (May 2013, might be solved now).</p>\n\n<p>A possible workaround is to actually use the datasource once (get connection, do dummy query, close connection) when Tomcat is started via a custom servlet that is configured to \"load-on-startup\" in <code>tomcat/conf/web.xml</code>. This should start the Oracle driver thread(s) (see also the <a href=\"http://www.oracle.com/technetwork/database/enterprise-edition/jdbc-faq-090281.html#02_14\" rel=\"nofollow noreferrer\">FAQ</a> about driver threads) outside of the scope of the class-loader of your web-app, thus preventing the \"fixed size memory leak\".</p>\n\n<p>Note that a similar issue exists for the MySQL JDBC driver but has a <a href=\"https://stackoverflow.com/a/24471527/3080094\">decent solution</a>. Such a solution may exist for a recent version of the Oracle JDBC driver (I don't know). </p>\n"},{"tags":[],"owner":{"account_id":2051258,"reputation":47,"user_id":1830225,"accept_rate":0,"display_name":"subrat patra"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1509551062,"creation_date":1509551062,"answer_id":47058619,"question_id":26180770,"body_markdown":"This problem doesn&#39;t happen only with Oracle JDBC driver (oracle.jdbc.driver.BlockSource.ThreadedCachingBlockSource.BlockReleaser).\r\n\r\nIf any of the 3rd party dependency starts a daemon thread for carrying out some task, then while stopping the Tomcat logs Warning message for them also.\r\n\r\nAlso, this problem exists with Tomcat 8.5.X versions.\r\n\r\nSolution:\r\nWhat i found as a solution is to get the Thread Group for the current thread and interrupt it. It will make sure that before shutting down the Tomcat all it&#39;s daemon threads are killed.\r\n\r\nbelow code should be added to the &quot;contextDestroyed&quot; method\r\nThreadGroup threadGroup = Thread.currentThread().getThreadGroup();\r\nthreadGroup.interrupt();","title":"Memory leak on Tomcat 7 with Oracle JDBC drivers 12c - oracle.jdbc.driver thread failed to stop","body":"<p>This problem doesn't happen only with Oracle JDBC driver (oracle.jdbc.driver.BlockSource.ThreadedCachingBlockSource.BlockReleaser).</p>\n\n<p>If any of the 3rd party dependency starts a daemon thread for carrying out some task, then while stopping the Tomcat logs Warning message for them also.</p>\n\n<p>Also, this problem exists with Tomcat 8.5.X versions.</p>\n\n<p>Solution:\nWhat i found as a solution is to get the Thread Group for the current thread and interrupt it. It will make sure that before shutting down the Tomcat all it's daemon threads are killed.</p>\n\n<p>below code should be added to the \"contextDestroyed\" method\nThreadGroup threadGroup = Thread.currentThread().getThreadGroup();\nthreadGroup.interrupt();</p>\n"}],"owner":{"account_id":5122930,"reputation":123,"user_id":4105953,"display_name":"finchie"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21080,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":3,"score":9,"last_activity_date":1692955790,"creation_date":1412346135,"question_id":26180770,"body_markdown":"I have a web app deployed to Tomcat 7.0.54 that uses a datasource to connect to an Oracle 11g database. The datasource is configured in `META-INF/context.xml` and I&#39;ve placed ojdbc7.jar in `&lt;tomcat-install-dir&gt;/lib`. I use a JNDI lookup to retrieve the datasource which I store in a singleton so that each DAO class can use it.\r\n\r\nEverything works as expected, however when I undeploy the application (via Tomcat manager app) I see in the logs:\r\n\r\n    Oct 03, 2014 3:06:55 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads\r\n    SEVERE: The web application [/myapp] appears to have started a thread named [oracle.jdbc.driver.BlockSource.ThreadedCachingBlockSource.BlockReleaser] but has failed to stop it. This is very likely to create a memory leak.\r\n    Oct 03, 2014 3:06:57 PM org.apache.catalina.startup.HostConfig undeploy\r\n    INFO: Undeploying context [/myapp]\r\n\r\nWhen I debug I can see this thread gets created as soon as the database is accessed (via the datasource).\r\n\r\nMy datasource config:\r\n\r\n    &lt;Context antiResourceLocking=&quot;false&quot;&gt;\r\n\t    &lt;Resource name=&quot;jdbc/myapp&quot; auth=&quot;Container&quot; \r\n\t   \t    type=&quot;javax.sql.DataSource&quot; driverClassName=&quot;oracle.jdbc.OracleDriver&quot; \r\n\t   \t  \tmaxActive=&quot;20&quot; maxIdle=&quot;10&quot; maxWait=&quot;-1&quot;\r\n\t   \t  \tusername=&quot;myuser&quot; password=&quot;mypass&quot;\r\n\t   \t  \turl=&quot;jdbc:oracle:thin:@myserver:1521:mysid&quot;\r\n\t   \t  \tremoveAbandoned=&quot;true&quot; removeAbandonedTimeout=&quot;10&quot; logAbandoned=&quot;true&quot;\r\n\t   \t  \tvalidationQuery=&quot;SELECT 1 FROM DUAL&quot;   \r\n\t\t\ttestOnBorrow=&quot;true&quot; testOnReturn=&quot;true&quot; testWhileIdle=&quot;true&quot;  \r\n\t\t\ttimeBetweenEvictionRunsMillis=&quot;1800000&quot; numTestsPerEvictionRun=&quot;3&quot;  \r\n\t\t\tminEvictableIdleTimeMillis=&quot;1800000&quot;\r\n\t\t/&gt;\r\n\t&lt;/Context&gt;\r\n\r\n**EDIT**\r\n\r\nFurther investigation has revealed that the issue occurs whether or not the datasource is accessed during application (or servlet) initialisation.\r\n\r\nIn actual fact, the problematic thread is only created, and thus the issue only exists, when using the 12c versions of Oracle&#39;s JDBC drivers (either ojdbc6.jar or ojdbc7.jar).\r\n\r\nIf I revert to using the 11.2.0.4 version of ojdbc6.jar the thread is never created and the memory leak warning never appears.\r\n\r\nShould I downgrade JDBC driver (as suggested in https://stackoverflow.com/a/9177263/4105953)?\r\n","title":"Memory leak on Tomcat 7 with Oracle JDBC drivers 12c - oracle.jdbc.driver thread failed to stop","body":"<p>I have a web app deployed to Tomcat 7.0.54 that uses a datasource to connect to an Oracle 11g database. The datasource is configured in <code>META-INF/context.xml</code> and I've placed ojdbc7.jar in <code>&lt;tomcat-install-dir&gt;/lib</code>. I use a JNDI lookup to retrieve the datasource which I store in a singleton so that each DAO class can use it.</p>\n\n<p>Everything works as expected, however when I undeploy the application (via Tomcat manager app) I see in the logs:</p>\n\n<pre><code>Oct 03, 2014 3:06:55 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads\nSEVERE: The web application [/myapp] appears to have started a thread named [oracle.jdbc.driver.BlockSource.ThreadedCachingBlockSource.BlockReleaser] but has failed to stop it. This is very likely to create a memory leak.\nOct 03, 2014 3:06:57 PM org.apache.catalina.startup.HostConfig undeploy\nINFO: Undeploying context [/myapp]\n</code></pre>\n\n<p>When I debug I can see this thread gets created as soon as the database is accessed (via the datasource).</p>\n\n<p>My datasource config:</p>\n\n<pre><code>&lt;Context antiResourceLocking=\"false\"&gt;\n    &lt;Resource name=\"jdbc/myapp\" auth=\"Container\" \n        type=\"javax.sql.DataSource\" driverClassName=\"oracle.jdbc.OracleDriver\" \n        maxActive=\"20\" maxIdle=\"10\" maxWait=\"-1\"\n        username=\"myuser\" password=\"mypass\"\n        url=\"jdbc:oracle:thin:@myserver:1521:mysid\"\n        removeAbandoned=\"true\" removeAbandonedTimeout=\"10\" logAbandoned=\"true\"\n        validationQuery=\"SELECT 1 FROM DUAL\"   \n        testOnBorrow=\"true\" testOnReturn=\"true\" testWhileIdle=\"true\"  \n        timeBetweenEvictionRunsMillis=\"1800000\" numTestsPerEvictionRun=\"3\"  \n        minEvictableIdleTimeMillis=\"1800000\"\n    /&gt;\n&lt;/Context&gt;\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>Further investigation has revealed that the issue occurs whether or not the datasource is accessed during application (or servlet) initialisation.</p>\n\n<p>In actual fact, the problematic thread is only created, and thus the issue only exists, when using the 12c versions of Oracle's JDBC drivers (either ojdbc6.jar or ojdbc7.jar).</p>\n\n<p>If I revert to using the 11.2.0.4 version of ojdbc6.jar the thread is never created and the memory leak warning never appears.</p>\n\n<p>Should I downgrade JDBC driver (as suggested in <a href=\"https://stackoverflow.com/a/9177263/4105953\">https://stackoverflow.com/a/9177263/4105953</a>)?</p>\n"},{"tags":["java","web","push-notification","push","mozilla"],"owner":{"account_id":18329588,"reputation":1,"user_id":13348462,"display_name":"Bhaskar Whitebox"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692955759,"creation_date":1692881240,"question_id":76969420,"body_markdown":"Giving below error while sending notification to Mozilla server\r\n\r\n```\r\nclass Test {\r\n\r\n    private static String vapidPublickey = &quot;BJz1hQvWgl62aB3Cd-HT1ElM8HGQJ7nrEC25bwRLMcINZVFH1d5iac5YbjW8sZ0Uh6FKu8v3O7Q3oJYdQF_sk_A&quot;;\r\n    private static String vapidPrivatekey = &quot;37COK2I3KoNJSh_Ir56OhfhrR8x8wqM4Qcfk7AxilIU&quot;;\r\n\r\n    public static void main(String[] args) throws GeneralSecurityException {\r\n         Security.addProvider(new BouncyCastleProvider());\r\n         PushService pushService = new PushService(vapidPublickey, vapidPrivatekey);\r\n         String messageJson = &quot;&quot;         {\\&quot;data\\&quot;:\\&quot;https://mkjewel.listany.com/earrings\\&quot;,\\&quot;icon\\&quot;:\\&quot;https://listany-prod.s3.amazonaws.com/images/MKJewel/mk_logo__png.png\\&quot;,\\&quot;title\\&quot;:\\&quot;10%off\\&quot;,\\&quot;body\\&quot;:\\&quot;Gooddealondiwali\\&quot;}&quot;&quot;;\r\n         \r\n         String endPoint = &quot;https://updates.push.services.mozilla.com/wpush/v2/gAAAAABk5xu3VjaceCx995HyDNiB7HOWnqmv4s8b-76flzGnbTTAOQpnt3vUZxLlapIl_TIQyeTFwXxQ0Zoy2IO0FvnXYyziXdG01x8Ov7EvJIy7pCC_5YSylRHKL3UnhT4FfvLhCoALrL9S-N8xOE5er7xu8MipJo5OW4Jtm6YUq_NYGq0iX-o&quot;;\r\n\t\t\tString p256dh = &quot;BHV2OOD6qGxyRThsaH5KfZu8C5RMxVK57CctdJOQp8dzxpq1C5heMutWDt6Wk_s_afNtLKe6ipiQT--YpcmafLY&quot;;\r\n\t\t\tString auth = &quot;-BQQwuJmjFNCnroJ0JYh5A&quot;;\r\n\t\t\tSubscription.Keys keys = new Subscription.Keys(p256dh, auth);\r\n\t\t\tSubscription subscription = new Subscription(endPoint, keys);\r\n\r\n         HttpResponse httpResponse = pushService.send(new Notification(subscription, messageJson));\r\n\r\n         InputStream content = httpResponse.getEntity().getContent();\r\n\t List&lt;String&gt; strings = IOUtils.readLines(content, &quot;UTF-8&quot;);\r\n\t System.out.println(strings);\r\n    }  \r\n}\r\n```\r\nGetting below out put on console:\r\n```\r\n{\r\n    &quot;code&quot;: 401,\r\n    &quot;errno&quot;: 109,\r\n    &quot;error&quot;: &quot;Unauthorized&quot;,\r\n    &quot;message&quot;: &quot;VAPID public key mismatch&quot;,\r\n    &quot;more_info&quot;: &quot;http://autopush.readthedocs.io/en/latest/http.html#error-codes&quot;\r\n}\r\n```\r\nNote: Below two dependencies has to be added in pom.xml file \r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\r\n    &lt;artifactId&gt;bcprov-jdk15on&lt;/artifactId&gt;\r\n    &lt;version&gt;1.70&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;nl.martijndwars&lt;/groupId&gt;\r\n    &lt;artifactId&gt;web-push&lt;/artifactId&gt;\r\n    &lt;version&gt;5.1.1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n\r\nI tried creating new vapid key pair using below npm cmds in order to use\r\n\r\nStep 1:  npm install web-push\r\n\r\nStep 2: In this created file &quot;generate-keys.js&quot; i written the below code\r\n\r\n\r\n```\r\nconst webpush = require(&#39;web-push&#39;);\r\n\r\n// Replace these with your actual details\r\nconst vapidKeys = webpush.generateVAPIDKeys();\r\n\r\nconsole.log(&#39;VAPID Public Key:&#39;, vapidKeys.publicKey);\r\nconsole.log(&#39;VAPID Private Key:&#39;, vapidKeys.privateKey);\r\n```\r\n\r\nStep : 3 Then execute this cmmd &quot;node generate-keys.js&quot; which will give below response:\r\n```\r\nVAPID Public Key: BJz1hQvWgl62aB3Cd-HT1ElM8HGQJ7nrEC25bwRLMcINZVFH1d5iac5YbjW8sZ0Uh6FKu8v3O7Q3oJYdQF_sk_A\r\nVAPID Private Key: 37COK2I3KoNJSh_Ir56OhfhrR8x8wqM4Qcfk7AxilIU\r\n```\r\n\r\n","title":"Web push notification not working in Mozilla but it&#39;s working in Chrome, Java lang","body":"<p>Giving below error while sending notification to Mozilla server</p>\n<pre><code>class Test {\n\n    private static String vapidPublickey = &quot;BJz1hQvWgl62aB3Cd-HT1ElM8HGQJ7nrEC25bwRLMcINZVFH1d5iac5YbjW8sZ0Uh6FKu8v3O7Q3oJYdQF_sk_A&quot;;\n    private static String vapidPrivatekey = &quot;37COK2I3KoNJSh_Ir56OhfhrR8x8wqM4Qcfk7AxilIU&quot;;\n\n    public static void main(String[] args) throws GeneralSecurityException {\n         Security.addProvider(new BouncyCastleProvider());\n         PushService pushService = new PushService(vapidPublickey, vapidPrivatekey);\n         String messageJson = &quot;&quot;         {\\&quot;data\\&quot;:\\&quot;https://mkjewel.listany.com/earrings\\&quot;,\\&quot;icon\\&quot;:\\&quot;https://listany-prod.s3.amazonaws.com/images/MKJewel/mk_logo__png.png\\&quot;,\\&quot;title\\&quot;:\\&quot;10%off\\&quot;,\\&quot;body\\&quot;:\\&quot;Gooddealondiwali\\&quot;}&quot;&quot;;\n         \n         String endPoint = &quot;https://updates.push.services.mozilla.com/wpush/v2/gAAAAABk5xu3VjaceCx995HyDNiB7HOWnqmv4s8b-76flzGnbTTAOQpnt3vUZxLlapIl_TIQyeTFwXxQ0Zoy2IO0FvnXYyziXdG01x8Ov7EvJIy7pCC_5YSylRHKL3UnhT4FfvLhCoALrL9S-N8xOE5er7xu8MipJo5OW4Jtm6YUq_NYGq0iX-o&quot;;\n            String p256dh = &quot;BHV2OOD6qGxyRThsaH5KfZu8C5RMxVK57CctdJOQp8dzxpq1C5heMutWDt6Wk_s_afNtLKe6ipiQT--YpcmafLY&quot;;\n            String auth = &quot;-BQQwuJmjFNCnroJ0JYh5A&quot;;\n            Subscription.Keys keys = new Subscription.Keys(p256dh, auth);\n            Subscription subscription = new Subscription(endPoint, keys);\n\n         HttpResponse httpResponse = pushService.send(new Notification(subscription, messageJson));\n\n         InputStream content = httpResponse.getEntity().getContent();\n     List&lt;String&gt; strings = IOUtils.readLines(content, &quot;UTF-8&quot;);\n     System.out.println(strings);\n    }  \n}\n</code></pre>\n<p>Getting below out put on console:</p>\n<pre><code>{\n    &quot;code&quot;: 401,\n    &quot;errno&quot;: 109,\n    &quot;error&quot;: &quot;Unauthorized&quot;,\n    &quot;message&quot;: &quot;VAPID public key mismatch&quot;,\n    &quot;more_info&quot;: &quot;http://autopush.readthedocs.io/en/latest/http.html#error-codes&quot;\n}\n</code></pre>\n<p>Note: Below two dependencies has to be added in pom.xml file</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\n    &lt;artifactId&gt;bcprov-jdk15on&lt;/artifactId&gt;\n    &lt;version&gt;1.70&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;nl.martijndwars&lt;/groupId&gt;\n    &lt;artifactId&gt;web-push&lt;/artifactId&gt;\n    &lt;version&gt;5.1.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I tried creating new vapid key pair using below npm cmds in order to use</p>\n<p>Step 1:  npm install web-push</p>\n<p>Step 2: In this created file &quot;generate-keys.js&quot; i written the below code</p>\n<pre><code>const webpush = require('web-push');\n\n// Replace these with your actual details\nconst vapidKeys = webpush.generateVAPIDKeys();\n\nconsole.log('VAPID Public Key:', vapidKeys.publicKey);\nconsole.log('VAPID Private Key:', vapidKeys.privateKey);\n</code></pre>\n<p>Step : 3 Then execute this cmmd &quot;node generate-keys.js&quot; which will give below response:</p>\n<pre><code>VAPID Public Key: BJz1hQvWgl62aB3Cd-HT1ElM8HGQJ7nrEC25bwRLMcINZVFH1d5iac5YbjW8sZ0Uh6FKu8v3O7Q3oJYdQF_sk_A\nVAPID Private Key: 37COK2I3KoNJSh_Ir56OhfhrR8x8wqM4Qcfk7AxilIU\n</code></pre>\n"},{"tags":["java","sql","jdbc","mysql-workbench","e-commerce"],"comments":[{"owner":{"account_id":6740011,"reputation":46650,"user_id":5193536,"display_name":"nbk"},"score":0,"creation_date":1692795810,"post_id":76961593,"comment_id":135672671,"body_markdown":"order is a reserved word, so you should get an error,","body":"order is a reserved word, so you should get an error,"},{"owner":{"account_id":29227842,"reputation":3,"user_id":22392150,"display_name":"Michael"},"score":0,"creation_date":1692805154,"post_id":76961593,"comment_id":135674971,"body_markdown":"if you mean in the function &quot;public Order setCanceledStatus (Order order)&quot;, in my real program instead of SELECT * FROM ORDER there is SELECT * FROM ORDINE and instead of UPDATE ORDER there is UPDATE ORDINE. In this question (in stackoverflow) I translate the names in English from my language with the aim of simplifying readability for everyone. Anyway thank you for the answer","body":"if you mean in the function &quot;public Order setCanceledStatus (Order order)&quot;, in my real program instead of SELECT * FROM ORDER there is SELECT * FROM ORDINE and instead of UPDATE ORDER there is UPDATE ORDINE. In this question (in stackoverflow) I translate the names in English from my language with the aim of simplifying readability for everyone. Anyway thank you for the answer"},{"owner":{"account_id":29227842,"reputation":3,"user_id":22392150,"display_name":"Michael"},"score":0,"creation_date":1692805716,"post_id":76961593,"comment_id":135675089,"body_markdown":"@nbk can you see something else that could give me this problem? client side the page is correctly redirected into the cart.jsp page and all the others entity are correctly updated with the wanted values (for example the cart is correctly deleted thanks to the function cartDAO.delete(Opencart) that you can find inside the catch under the function that cancel the order). So this make me think that there haven&#39;t been a rollback. I even try to substitute the function setCanceledStatus (order) with a function that perform a DELETE. But even in this case everything is correctly done except this","body":"@nbk can you see something else that could give me this problem? client side the page is correctly redirected into the cart.jsp page and all the others entity are correctly updated with the wanted values (for example the cart is correctly deleted thanks to the function cartDAO.delete(Opencart) that you can find inside the catch under the function that cancel the order). So this make me think that there haven&#39;t been a rollback. I even try to substitute the function setCanceledStatus (order) with a function that perform a DELETE. But even in this case everything is correctly done except this"},{"owner":{"account_id":6740011,"reputation":46650,"user_id":5193536,"display_name":"nbk"},"score":0,"creation_date":1692807180,"post_id":76961593,"comment_id":135675387,"body_markdown":"if you don&#39;t get an exception you are probably connected to the wrong server. easy would be tpo check with wiresharl if you are connected to the right server or enable general log and see if the update command reaches the server","body":"if you don&#39;t get an exception you are probably connected to the wrong server. easy would be tpo check with wiresharl if you are connected to the right server or enable general log and see if the update command reaches the server"},{"owner":{"account_id":29227842,"reputation":3,"user_id":22392150,"display_name":"Michael"},"score":0,"creation_date":1692810179,"post_id":76961593,"comment_id":135675961,"body_markdown":"But I&#39;m a little bit confused, if there is no connection then i shouldn&#39;t be able to update or read anything in the database? instead when i run the program everything work fine (i can see the change of the status of the database from MySQL WorkBench) except for that function","body":"But I&#39;m a little bit confused, if there is no connection then i shouldn&#39;t be able to update or read anything in the database? instead when i run the program everything work fine (i can see the change of the status of the database from MySQL WorkBench) except for that function"},{"owner":{"account_id":6740011,"reputation":46650,"user_id":5193536,"display_name":"nbk"},"score":0,"creation_date":1692812050,"post_id":76961593,"comment_id":135676302,"body_markdown":"look the command isnit the issue, when you run it and it throws no error , so the driver accepoted the query. you can check with affected rows how many where updated. But if none your where clause didn&#39;t find a match, if  one was updated you are not connected to the correct server. both we can not check for you.","body":"look the command isnit the issue, when you run it and it throws no error , so the driver accepoted the query. you can check with affected rows how many where updated. But if none your where clause didn&#39;t find a match, if  one was updated you are not connected to the correct server. both we can not check for you."},{"owner":{"account_id":29227842,"reputation":3,"user_id":22392150,"display_name":"Michael"},"score":0,"creation_date":1692813435,"post_id":76961593,"comment_id":135676521,"body_markdown":"I checked the general log: here everything seems fine. There is the delete (i substituted the function setCanceledStatus (Order order) with a function that perform the delete of that order). But anyway the status of the order is pending when i go to check it in MySQL WorkBench.","body":"I checked the general log: here everything seems fine. There is the delete (i substituted the function setCanceledStatus (Order order) with a function that perform the delete of that order). But anyway the status of the order is pending when i go to check it in MySQL WorkBench."},{"owner":{"account_id":6740011,"reputation":46650,"user_id":5193536,"display_name":"nbk"},"score":0,"creation_date":1692816334,"post_id":76961593,"comment_id":135677062,"body_markdown":"i thought you were uodating the column, not delete it, a status only change when you upodate it directly or use a trigger. if all commands you send are appearing in the general log, all should be fine, I think you missed some information","body":"i thought you were uodating the column, not delete it, a status only change when you upodate it directly or use a trigger. if all commands you send are appearing in the general log, all should be fine, I think you missed some information"},{"owner":{"account_id":29227842,"reputation":3,"user_id":22392150,"display_name":"Michael"},"score":0,"creation_date":1692823153,"post_id":76961593,"comment_id":135678206,"body_markdown":"Yes I was doing it, I just change the function setCanceledStatus  with a function that perform the delete to see if it was a function problem. Tomorrow I will try again with the function  that I shared in this question and share the logs in this post. Thank you very much for your time","body":"Yes I was doing it, I just change the function setCanceledStatus  with a function that perform the delete to see if it was a function problem. Tomorrow I will try again with the function  that I shared in this question and share the logs in this post. Thank you very much for your time"},{"owner":{"account_id":29227842,"reputation":3,"user_id":22392150,"display_name":"Michael"},"score":0,"creation_date":1692832844,"post_id":76961593,"comment_id":135679332,"body_markdown":"@nbk as you can see I edit the question and i reported the new function and the log. Thank you in advance","body":"@nbk as you can see I edit the question and i reported the new function and the log. Thank you in advance"},{"owner":{"account_id":6740011,"reputation":46650,"user_id":5193536,"display_name":"nbk"},"score":0,"creation_date":1692834312,"post_id":76961593,"comment_id":135679474,"body_markdown":"so oyur log show that the first had an error and the last also why it runs a ROLLBACK, so your queries abouve don&#39;t work kucky for you that nothing was deleted take the 1 log start a transaction and see where  it fails, all the comands are valid but the could b triggers or contraints that could lead to the rollback.","body":"so oyur log show that the first had an error and the last also why it runs a ROLLBACK, so your queries abouve don&#39;t work kucky for you that nothing was deleted take the 1 log start a transaction and see where  it fails, all the comands are valid but the could b triggers or contraints that could lead to the rollback."},{"owner":{"account_id":29227842,"reputation":3,"user_id":22392150,"display_name":"Michael"},"score":0,"creation_date":1692870558,"post_id":76961593,"comment_id":135683812,"body_markdown":"So I think the first query failed because there is an exception of NotAvaibleProductException so it is correct that there is a ROLLBACK (in fact inside the catch of NotAvaibleProductException i did a rollback). The problem is the last query, that rollback is not wanted.","body":"So I think the first query failed because there is an exception of NotAvaibleProductException so it is correct that there is a ROLLBACK (in fact inside the catch of NotAvaibleProductException i did a rollback). The problem is the last query, that rollback is not wanted."},{"owner":{"account_id":29227842,"reputation":3,"user_id":22392150,"display_name":"Michael"},"score":0,"creation_date":1692870873,"post_id":76961593,"comment_id":135683875,"body_markdown":"But the DELETE is in the second query (number 27 in the log), not in the last query(number 28). So i think the DELETE shouldn&#39;t be affected by ROLLBACK, am I wrong? @nbk","body":"But the DELETE is in the second query (number 27 in the log), not in the last query(number 28). So i think the DELETE shouldn&#39;t be affected by ROLLBACK, am I wrong? @nbk"},{"owner":{"account_id":6740011,"reputation":46650,"user_id":5193536,"display_name":"nbk"},"score":0,"creation_date":1692874552,"post_id":76961593,"comment_id":135684584,"body_markdown":"the chnages from the second Log show no error so should be visible in the database","body":"the chnages from the second Log show no error so should be visible in the database"},{"owner":{"account_id":29227842,"reputation":3,"user_id":22392150,"display_name":"Michael"},"score":0,"creation_date":1692875463,"post_id":76961593,"comment_id":135684750,"body_markdown":"But the delete haven&#39;t been performed unfortunately. There aren&#39;t any foreign keys from other tables that are linked with the table ORDINE ( just the table ORDINE have foreign keys linked with other tables), so i think the problem shouldn&#39;t be constraints.","body":"But the delete haven&#39;t been performed unfortunately. There aren&#39;t any foreign keys from other tables that are linked with the table ORDINE ( just the table ORDINE have foreign keys linked with other tables), so i think the problem shouldn&#39;t be constraints."},{"owner":{"account_id":6740011,"reputation":46650,"user_id":5193536,"display_name":"nbk"},"score":0,"creation_date":1692886028,"post_id":76961593,"comment_id":135687275,"body_markdown":"Constraints would through an error you should check in workbench  if you have triggers","body":"Constraints would through an error you should check in workbench  if you have triggers"},{"owner":{"account_id":29227842,"reputation":3,"user_id":22392150,"display_name":"Michael"},"score":0,"creation_date":1692891679,"post_id":76961593,"comment_id":135688613,"body_markdown":"I did the command SHOW TRIGGERS and no triggers were found @nbk","body":"I did the command SHOW TRIGGERS and no triggers were found @nbk"},{"owner":{"account_id":6740011,"reputation":46650,"user_id":5193536,"display_name":"nbk"},"score":0,"creation_date":1692906835,"post_id":76961593,"comment_id":135691890,"body_markdown":"last input from me,  see ig the error log shows any anomalies, i can not  reproduce the error you get","body":"last input from me,  see ig the error log shows any anomalies, i can not  reproduce the error you get"},{"owner":{"account_id":29227842,"reputation":3,"user_id":22392150,"display_name":"Michael"},"score":0,"creation_date":1692947790,"post_id":76961593,"comment_id":135696555,"body_markdown":"If you mean the rollback immediately after the commit in the last query I probably found the motivation at this link [link](https://dba.stackexchange.com/questions/290747/what-could-be-the-reason-for-running-rollback-after-a-commit)","body":"If you mean the rollback immediately after the commit in the last query I probably found the motivation at this link <a href=\"https://dba.stackexchange.com/questions/290747/what-could-be-the-reason-for-running-rollback-after-a-commit\">link</a>"},{"owner":{"account_id":29227842,"reputation":3,"user_id":22392150,"display_name":"Michael"},"score":0,"creation_date":1692948040,"post_id":76961593,"comment_id":135696613,"body_markdown":"A maybe important thing that i noticed is that the query DELETE in the second transaction is owned by the first transaction (the number is 26 not 27). And the transaction number 26 never do a commit after the DELETE. Is maybe this one the motivation? @nbk","body":"A maybe important thing that i noticed is that the query DELETE in the second transaction is owned by the first transaction (the number is 26 not 27). And the transaction number 26 never do a commit after the DELETE. Is maybe this one the motivation? @nbk"},{"owner":{"account_id":6740011,"reputation":46650,"user_id":5193536,"display_name":"nbk"},"score":0,"creation_date":1692948933,"post_id":76961593,"comment_id":135696779,"body_markdown":"yes , your log shows that you flow control isn&#39;t finalized, you should rethink your approach and eliminate the rollbacks, if possible","body":"yes , your log shows that you flow control isn&#39;t finalized, you should rethink your approach and eliminate the rollbacks, if possible"}],"owner":{"account_id":29227842,"reputation":3,"user_id":22392150,"display_name":"Michael"},"comment_count":21,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692955245,"creation_date":1692795575,"question_id":76961593,"body_markdown":"I&#39;m trying to implement an e-commerce website using java, MySQL database, and JDBC.\r\n\r\nI have a problem when I (intentionally) cause an OptimisticLockException or a NotAvaibleProductException: in these exceptions(inside the catch) i try to delete an order with a given ID with the function orderDAO.permanentlydelete(order);\r\n\r\nI haven&#39;t got any error and every transactions that there are in the program changed the database status as i wanted, **except for the DELETE performed inside the function** **orderDAO.permanentlydelete(order);**\r\n\r\nIn fact in MySQL WorkBench **continue to be present the order with the ID that i wanted to delete.**\r\n\r\nThis is the **controller function:**\r\n\r\n```\r\npublic static void addPaymentAndOrderChange(HttpServletRequest request, HttpServletResponse response) {\r\n    String applicationMessage = null;\r\n    DAOFactory sessionDAOFactory = null;\r\n    DAOFactory daoFactory = null;\r\n    Utente loggedUser;\r\n\r\n\r\n    Logger logger = LogService.getApplicationLogger();\r\n\r\n    try {\r\n\r\n        Map sessionFactoryParameters = new HashMap&lt;String, Object&gt;();\r\n        sessionFactoryParameters.put(&quot;request&quot;, request);\r\n        sessionFactoryParameters.put(&quot;response&quot;, response);\r\n        sessionDAOFactory = DAOFactory.getDAOFactory(Configuration.COOKIE_IMPL, sessionFactoryParameters);\r\n        sessionDAOFactory.beginTransaction();\r\n\r\n        UserDAO sessionUserDAO = sessionDAOFactory.getUserDAO();\r\n        loggedUser = sessionUserDAO.findLoggedUser();\r\n\r\n        daoFactory = DAOFactory.getDAOFactory(Configuration.DAO_IMPL, null);\r\n        daoFactory.beginTransaction();\r\n\r\n        Double CardNumber= Double.parseDouble(request.getParameter(&quot;CardNumber&quot;));\r\n        int CVV = Integer.parseInt(request.getParameter(&quot;cvv&quot;));\r\n        String name= request.getParameter(&quot;name&quot;);\r\n        String expiration= request.getParameter(&quot;expiration&quot;);\r\n\r\n\r\n\r\n        /* I find the pending order linked with logged user*/\r\n        OrderDAO orderDAO = daoFactory.getOrderDAO();\r\n        Order order = orderDAO.findByPendingStatus(loggedUser);\r\n\r\n        //I find the cart\r\n        CartDAO cartDAO = daoFactory.getCartDAO();\r\n        Cart cart = cartDAO.findCartByOrder(order);\r\n\r\n        //Take all the cart item inside the cart\r\n        CartItemDAO cartItemDAO = daoFactory.getCartItemDAO();\r\n        List&lt;CartItem&gt; cartItems = cartItemDAO.getCartItems(cart);\r\n\r\n\r\n     try {\r\n            //I create the payment\r\n            PaymentDAO paymentDAO = daoFactory.getPaymentDAO();\r\n            paymentDAO.create(cart.getTotal(), order, CardNumber, CVV, name, expiration);\r\n\r\n            //Set complete flag to the order\r\n            orderDAO.setCompleteStatus(order);\r\n            System.out.println(order.getID_order());\r\n\r\n\r\n            //Decrease the quantity of the product\r\n            for (CartItem cartItem : cartItems) {\r\n                ProductDAO productDAO = daoFactory.getProductDAO();\r\n                productDAO.checkAndDecreaseQuantity(cartItem.getProduct().getId_product(), cartItem.getQuantity());\r\n\r\n            }\r\n\r\n\r\n            //Prepare data for the next jsp page\r\n            Map&lt;CartItem, Product&gt; cartItems_page;\r\n            cartItems_page = cartItemDAO.findOrderItems(order.getID_order());\r\n\r\n\r\n            daoFactory.commitTransaction();\r\n            sessionDAOFactory.commitTransaction();\r\n\r\n            applicationMessage = &quot;Payment received, order executed successfully&quot;;\r\n            System.out.println(applicationMessage);\r\n\r\n\r\n            request.setAttribute(&quot;loggedOn&quot;, loggedUser != null);\r\n            request.setAttribute(&quot;ID_order&quot;, order.getID_ordine());\r\n            request.setAttribute(&quot;CartItems&quot;, cartItems_page);\r\n            request.setAttribute(&quot;loggedUser&quot;, loggedUser);\r\n            request.setAttribute(&quot;applicationMessage&quot;, applicationMessage);\r\n\r\n            request.setAttribute(&quot;viewUrl&quot;, &quot;jsp/userOrderManagement/Order_details&quot;);\r\n\r\n\r\n        } catch (NotAvaibleProductException e) {\r\n            try {\r\n                if (daoFactory != null) daoFactory.rollbackTransaction();\r\n\r\n            } catch (Throwable t) {\r\n            }\r\n            applicationMessage=&quot;NotAvaibleProductException : Reorder&quot;;\r\n            daoFactory.beginTransaction();\r\n\r\n              ** //I cancel the order\r\n            orderDAO.permanentlydelete(order); **\r\n\r\n\r\n            //I delete the previous created cart\r\n            CartDAO cartDAO = daoFactory.getCartDAO();\r\n            Cart Opencart = cartDAO.findOpenCartByUserId(loggedUser.getId_user());\r\n            cartDAO.delete(Opencart);\r\n\r\n            //i open the cart that have been closed\r\n            cartDAO.restoreCart(cart);\r\n\r\n            //I send the user into the cart.jsp page\r\n            commonView(daoFactory,sessionDAOFactory,request);\r\n\r\n\r\n            daoFactory.commitTransaction();\r\n            sessionDAOFactory.commitTransaction();\r\n\r\n\r\n            request.setAttribute(&quot;loggedOn&quot;, loggedUser != null);\r\n            request.setAttribute(&quot;loggedUser&quot;, loggedUser);\r\n            request.setAttribute(&quot;viewUrl&quot;, &quot;jsp/cartManagement/Cart&quot;);\r\n            request.setAttribute(&quot;applicationMessage&quot;, applicationMessage);\r\n        }\r\n\r\n\r\n    } catch (Exception e) {\r\n        logger.log(Level.SEVERE, &quot;Controller Error&quot;, e);\r\n        System.out.println(&quot;EXCEPTION&quot;);\r\n        try {\r\n            if (daoFactory != null) daoFactory.rollbackTransaction();\r\n            if (sessionDAOFactory != null) sessionDAOFactory.rollbackTransaction();\r\n        } catch (Throwable t) {\r\n        }\r\n        throw new RuntimeException(e);\r\n\r\n\r\n    } finally {\r\n        try {\r\n            if (daoFactory != null) daoFactory.closeTransaction();\r\n            if (sessionDAOFactory != null) sessionDAOFactory.closeTransaction();\r\n        } catch (Throwable t) {\r\n        }\r\n    }\r\n```\r\n\r\n\r\n\r\nAnd this is the **function that perform the delete**:\r\n\r\n\r\n```\r\n  public void permanentlydelete(Order order){\r\n    PreparedStatement ps;\r\n    try {\r\n\r\n        String sql\r\n                = &quot; DELETE FROM ORDINE &quot;\r\n                + &quot; WHERE &quot;\r\n                + &quot; ID_ordine=?&quot;;\r\n\r\n        ps = conn.prepareStatement(sql);\r\n        ps.setLong(1, order.getID_order());\r\n        ps.executeUpdate();\r\n        ps.close();\r\n\r\n    } catch (SQLException e) {\r\n        throw new RuntimeException(e);\r\n    }\r\n}\r\n```\r\n**And this is the general log:**\r\n\r\n2023-08-23T17:45:17.262776Z\t   26 Connect\troot@localhost on amuletshop using TCP/IP\r\n\r\n2023-08-23T17:45:17.263529Z\t   26 Query\t/* mysql-connector-j-8.0.32 (Revision: fa4912a849140828e48162a2c396c8df0091bed7) */SELECT  @@session.auto_increment_increment AS auto_increment_increment, @@character_set_client AS character_set_client, @@character_set_connection AS character_set_connection, @@character_set_results AS character_set_results, @@character_set_server AS character_set_server, @@collation_server AS collation_server, @@collation_connection AS collation_connection, @@init_connect AS init_connect, @@interactive_timeout AS interactive_timeout, @@license AS license, @@lower_case_table_names AS lower_case_table_names, @@max_allowed_packet AS max_allowed_packet, @@net_write_timeout AS net_write_timeout, @@performance_schema AS performance_schema, @@sql_mode AS sql_mode, @@system_time_zone AS system_time_zone, @@time_zone AS time_zone, @@transaction_isolation AS transaction_isolation, @@wait_timeout AS wait_timeout\r\n\r\n    2023-08-23T17:45:17.264237Z\t   26 Query\tSET character_set_results = NULL\r\n    \r\n    2023-08-23T17:45:17.264693Z\t   26 Query\tSET autocommit=1\r\n    \r\n    2023-08-23T17:45:17.265188Z\t   26 Query\tSET autocommit=0\r\n    \r\n    2023-08-23T17:45:17.265919Z\t   26 Query\tSELECT *    FROM ORDINE  WHERE    Stato_o = &#39;In sospeso&#39; AND ID_utente=31 AND Deleted=0 ORDER BY ID_ordine DESC LIMIT 1\r\n    \r\n    2023-08-23T17:45:17.270339Z\t   26 Query\tSELECT * FROM ORDINE JOIN CARRELLO ON ID_cart=ID_carrello  WHERE  (ID_ordine=125)\r\n    \r\n    2023-08-23T17:45:17.272270Z\t   26 Query\tSELECT *  FROM CARTITEM  WHERE    ID_car = 141    AND deleted = &#39;N&#39;\r\n    \r\n    2023-08-23T17:45:17.274521Z\t   26 Query\tSELECT *  FROM PAGAMENTO  WHERE  Deleted =&#39;N&#39; AND ID_order=125\r\n    \r\n    2023-08-23T17:45:17.276718Z\t   26 Query\tINSERT INTO PAGAMENTO    ( Importo,     ID_order,     NumeroCarta,     CVV,     Nome,     ScadenzaCarta   )  VALUES (300000.00,125,2.0,1,&#39;Ydfuf&#39;,&#39;1&#39;)\r\n    \r\n    2023-08-23T17:45:17.278111Z\t   26 Query\tUPDATE ORDINE  SET Stato_o=&#39;Completato&#39;  WHERE  ID_ordine=125\r\n    \r\n    2023-08-23T17:45:17.279899Z\t   26 Query\tSELECT * FROM PRODOTTO  WHERE    Deleted=0 AND Blocked=0 AND ID_amuleto=11 AND Quantit&#224;_disp&gt;=3\r\n    \r\n    2023-08-23T17:45:17.280947Z\t   26 Query\trollback\r\n    \r\n    \r\n    2023-08-23T17:45:17.286115Z\t   27 Connect\troot@localhost on amuletshop using TCP/IP\r\n\r\n2023-08-23T17:45:17.286988Z\t   27 Query\t/* mysql-connector-j-8.0.32 (Revision: fa4912a849140828e48162a2c396c8df0091bed7) */SELECT  @@session.auto_increment_increment AS auto_increment_increment, @@character_set_client AS character_set_client, @@character_set_connection AS character_set_connection, @@character_set_results AS character_set_results, @@character_set_server AS character_set_server, @@collation_server AS collation_server, @@collation_connection AS collation_connection, @@init_connect AS init_connect, @@interactive_timeout AS interactive_timeout, @@license AS license, @@lower_case_table_names AS lower_case_table_names, @@max_allowed_packet AS max_allowed_packet, @@net_write_timeout AS net_write_timeout, @@performance_schema AS performance_schema, @@sql_mode AS sql_mode, @@system_time_zone AS system_time_zone, @@time_zone AS time_zone, @@transaction_isolation AS transaction_isolation, @@wait_timeout AS wait_timeout\r\n\r\n\r\n    2023-08-23T17:45:17.287781Z\t   27 Query\tSET character_set_results = NULL\r\n    \r\n    2023-08-23T17:45:17.288150Z\t   27 Query\tSET autocommit=1\r\n    \r\n    2023-08-23T17:45:17.288631Z\t   27 Query\tSET autocommit=0\r\n    \r\n    2023-08-23T17:45:17.289342Z\t   26 Query\tDELETE FROM ORDINE  WHERE  ID_ordine=125\r\n    \r\n    2023-08-23T17:45:17.290633Z\t   27 Query\tSELECT * FROM CARRELLO  WHERE    deleted=&#39;N&#39;AND ID_user=31 AND Stato_c=&#39;Aperto&#39;\r\n    \r\n    2023-08-23T17:45:17.293113Z\t   27 Query\tDELETE FROM CARRELLO  WHERE  ID_carrello=145\r\n    \r\n    2023-08-23T17:45:17.294688Z\t   27 Query\tUPDATE Carrello  SET Stato_c = &#39;Aperto&#39; WHERE  ID_carrello=141 AND Stato_c= &#39;Chiuso&#39;\r\n    \r\n    2023-08-23T17:45:17.295915Z\t   27 Query\tSELECT * FROM CARRELLO  WHERE    deleted=&#39;N&#39;AND ID_user=31 AND Stato_c=&#39;Aperto&#39;\r\n    \r\n    2023-08-23T17:45:17.297347Z\t   27 Query\tSELECT * FROM CartItem JOIN PRODOTTO ON ID_amulet=ID_amuleto  WHERE    CartItem.deleted=&#39;N&#39;AND ID_car=141 ORDER BY PRODOTTO.Nome\r\n    \r\n    2023-08-23T17:45:17.299415Z\t   27 Query\tSELECT Quantit&#224;_disp FROM PRODOTTO  WHERE    Deleted=0 AND Blocked=0 AND ID_amuleto=11 AND Quantit&#224;_disp&gt;=3\r\n    \r\n    2023-08-23T17:45:17.300294Z\t   27 Query\tcommit\r\n\r\n\r\n\r\n2023-08-23T17:45:17.310637Z\t   28 Connect\troot@localhost on amuletshop using TCP/IP\r\n2023-08-23T17:45:17.311448Z\t   28 Query\t/* mysql-connector-j-8.0.32 (Revision: fa4912a849140828e48162a2c396c8df0091bed7) */SELECT  @@session.auto_increment_increment AS auto_increment_increment, @@character_set_client AS character_set_client, @@character_set_connection AS character_set_connection, @@character_set_results AS character_set_results, @@character_set_server AS character_set_server, @@collation_server AS collation_server, @@collation_connection AS collation_connection, @@init_connect AS init_connect, @@interactive_timeout AS interactive_timeout, @@license AS license, @@lower_case_table_names AS lower_case_table_names, @@max_allowed_packet AS max_allowed_packet, @@net_write_timeout AS net_write_timeout, @@performance_schema AS performance_schema, @@sql_mode AS sql_mode, @@system_time_zone AS system_time_zone, @@time_zone AS time_zone, @@transaction_isolation AS transaction_isolation, @@wait_timeout AS wait_timeout\r\n\r\n\r\n    2023-08-23T17:45:17.312215Z\t   28 Query\tSET character_set_results = NULL\r\n    2023-08-23T17:45:17.312635Z\t   28 Query\tSET autocommit=1\r\n    2023-08-23T17:45:17.313138Z\t   28 Query\tSET autocommit=0\r\n    2023-08-23T17:45:17.313850Z\t   26 Query\tSELECT *    FROM ORDINE  WHERE    ID_ordine = 125\r\n    2023-08-23T17:45:17.314639Z\t   28 Query\tcommit\r\n    2023-08-23T17:45:17.315071Z\t   28 Query\trollback\r\n    2023-08-23T17:45:17.315327Z\t   28 Quit\t\r\n\r\nIn MySQL WorkBench the order with ID_ordine = 125 continue to be there. So the delete didn&#39;t effectly work even if it is in the log.\r\n\r\nMy questions are: \r\n**Why in the log the delete has query identificator=26 and not 27** considered that it should be executed inside the delete of the cart (see in the top of the catch of NotAvailableProductEception)?\r\n\r\n**Why the record of the table ORDINE isn&#39;t actually deleted?**\r\n\r\nI know that there are several security problem such as storing the credit card information into the database and store the UserID in the cookie directly, but the website won&#39;t be published, it&#39;s just for an exam where the professor told us to don&#39;t manage the security (he just mind the software engineering).\r\n\r\nIf you see that I&#39;m doing something wrong please let me know, **thank you in advance**.","title":"Why i can&#39;t see a change in the status of the database MySQL when i do this update?","body":"<p>I'm trying to implement an e-commerce website using java, MySQL database, and JDBC.</p>\n<p>I have a problem when I (intentionally) cause an OptimisticLockException or a NotAvaibleProductException: in these exceptions(inside the catch) i try to delete an order with a given ID with the function orderDAO.permanentlydelete(order);</p>\n<p>I haven't got any error and every transactions that there are in the program changed the database status as i wanted, <strong>except for the DELETE performed inside the function</strong> <strong>orderDAO.permanentlydelete(order);</strong></p>\n<p>In fact in MySQL WorkBench <strong>continue to be present the order with the ID that i wanted to delete.</strong></p>\n<p>This is the <strong>controller function:</strong></p>\n<pre><code>public static void addPaymentAndOrderChange(HttpServletRequest request, HttpServletResponse response) {\n    String applicationMessage = null;\n    DAOFactory sessionDAOFactory = null;\n    DAOFactory daoFactory = null;\n    Utente loggedUser;\n\n\n    Logger logger = LogService.getApplicationLogger();\n\n    try {\n\n        Map sessionFactoryParameters = new HashMap&lt;String, Object&gt;();\n        sessionFactoryParameters.put(&quot;request&quot;, request);\n        sessionFactoryParameters.put(&quot;response&quot;, response);\n        sessionDAOFactory = DAOFactory.getDAOFactory(Configuration.COOKIE_IMPL, sessionFactoryParameters);\n        sessionDAOFactory.beginTransaction();\n\n        UserDAO sessionUserDAO = sessionDAOFactory.getUserDAO();\n        loggedUser = sessionUserDAO.findLoggedUser();\n\n        daoFactory = DAOFactory.getDAOFactory(Configuration.DAO_IMPL, null);\n        daoFactory.beginTransaction();\n\n        Double CardNumber= Double.parseDouble(request.getParameter(&quot;CardNumber&quot;));\n        int CVV = Integer.parseInt(request.getParameter(&quot;cvv&quot;));\n        String name= request.getParameter(&quot;name&quot;);\n        String expiration= request.getParameter(&quot;expiration&quot;);\n\n\n\n        /* I find the pending order linked with logged user*/\n        OrderDAO orderDAO = daoFactory.getOrderDAO();\n        Order order = orderDAO.findByPendingStatus(loggedUser);\n\n        //I find the cart\n        CartDAO cartDAO = daoFactory.getCartDAO();\n        Cart cart = cartDAO.findCartByOrder(order);\n\n        //Take all the cart item inside the cart\n        CartItemDAO cartItemDAO = daoFactory.getCartItemDAO();\n        List&lt;CartItem&gt; cartItems = cartItemDAO.getCartItems(cart);\n\n\n     try {\n            //I create the payment\n            PaymentDAO paymentDAO = daoFactory.getPaymentDAO();\n            paymentDAO.create(cart.getTotal(), order, CardNumber, CVV, name, expiration);\n\n            //Set complete flag to the order\n            orderDAO.setCompleteStatus(order);\n            System.out.println(order.getID_order());\n\n\n            //Decrease the quantity of the product\n            for (CartItem cartItem : cartItems) {\n                ProductDAO productDAO = daoFactory.getProductDAO();\n                productDAO.checkAndDecreaseQuantity(cartItem.getProduct().getId_product(), cartItem.getQuantity());\n\n            }\n\n\n            //Prepare data for the next jsp page\n            Map&lt;CartItem, Product&gt; cartItems_page;\n            cartItems_page = cartItemDAO.findOrderItems(order.getID_order());\n\n\n            daoFactory.commitTransaction();\n            sessionDAOFactory.commitTransaction();\n\n            applicationMessage = &quot;Payment received, order executed successfully&quot;;\n            System.out.println(applicationMessage);\n\n\n            request.setAttribute(&quot;loggedOn&quot;, loggedUser != null);\n            request.setAttribute(&quot;ID_order&quot;, order.getID_ordine());\n            request.setAttribute(&quot;CartItems&quot;, cartItems_page);\n            request.setAttribute(&quot;loggedUser&quot;, loggedUser);\n            request.setAttribute(&quot;applicationMessage&quot;, applicationMessage);\n\n            request.setAttribute(&quot;viewUrl&quot;, &quot;jsp/userOrderManagement/Order_details&quot;);\n\n\n        } catch (NotAvaibleProductException e) {\n            try {\n                if (daoFactory != null) daoFactory.rollbackTransaction();\n\n            } catch (Throwable t) {\n            }\n            applicationMessage=&quot;NotAvaibleProductException : Reorder&quot;;\n            daoFactory.beginTransaction();\n\n              ** //I cancel the order\n            orderDAO.permanentlydelete(order); **\n\n\n            //I delete the previous created cart\n            CartDAO cartDAO = daoFactory.getCartDAO();\n            Cart Opencart = cartDAO.findOpenCartByUserId(loggedUser.getId_user());\n            cartDAO.delete(Opencart);\n\n            //i open the cart that have been closed\n            cartDAO.restoreCart(cart);\n\n            //I send the user into the cart.jsp page\n            commonView(daoFactory,sessionDAOFactory,request);\n\n\n            daoFactory.commitTransaction();\n            sessionDAOFactory.commitTransaction();\n\n\n            request.setAttribute(&quot;loggedOn&quot;, loggedUser != null);\n            request.setAttribute(&quot;loggedUser&quot;, loggedUser);\n            request.setAttribute(&quot;viewUrl&quot;, &quot;jsp/cartManagement/Cart&quot;);\n            request.setAttribute(&quot;applicationMessage&quot;, applicationMessage);\n        }\n\n\n    } catch (Exception e) {\n        logger.log(Level.SEVERE, &quot;Controller Error&quot;, e);\n        System.out.println(&quot;EXCEPTION&quot;);\n        try {\n            if (daoFactory != null) daoFactory.rollbackTransaction();\n            if (sessionDAOFactory != null) sessionDAOFactory.rollbackTransaction();\n        } catch (Throwable t) {\n        }\n        throw new RuntimeException(e);\n\n\n    } finally {\n        try {\n            if (daoFactory != null) daoFactory.closeTransaction();\n            if (sessionDAOFactory != null) sessionDAOFactory.closeTransaction();\n        } catch (Throwable t) {\n        }\n    }\n</code></pre>\n<p>And this is the <strong>function that perform the delete</strong>:</p>\n<pre><code>  public void permanentlydelete(Order order){\n    PreparedStatement ps;\n    try {\n\n        String sql\n                = &quot; DELETE FROM ORDINE &quot;\n                + &quot; WHERE &quot;\n                + &quot; ID_ordine=?&quot;;\n\n        ps = conn.prepareStatement(sql);\n        ps.setLong(1, order.getID_order());\n        ps.executeUpdate();\n        ps.close();\n\n    } catch (SQLException e) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n<p><strong>And this is the general log:</strong></p>\n<p>2023-08-23T17:45:17.262776Z    26 Connect   root@localhost on amuletshop using TCP/IP</p>\n<p>2023-08-23T17:45:17.263529Z    26 Query /* mysql-connector-j-8.0.32 (Revision: fa4912a849140828e48162a2c396c8df0091bed7) */SELECT  @@session.auto_increment_increment AS auto_increment_increment, @@character_set_client AS character_set_client, @@character_set_connection AS character_set_connection, @@character_set_results AS character_set_results, @@character_set_server AS character_set_server, @@collation_server AS collation_server, @@collation_connection AS collation_connection, @@init_connect AS init_connect, @@interactive_timeout AS interactive_timeout, @@license AS license, @@lower_case_table_names AS lower_case_table_names, @@max_allowed_packet AS max_allowed_packet, @@net_write_timeout AS net_write_timeout, @@performance_schema AS performance_schema, @@sql_mode AS sql_mode, @@system_time_zone AS system_time_zone, @@time_zone AS time_zone, @@transaction_isolation AS transaction_isolation, @@wait_timeout AS wait_timeout</p>\n<pre><code>2023-08-23T17:45:17.264237Z    26 Query SET character_set_results = NULL\n\n2023-08-23T17:45:17.264693Z    26 Query SET autocommit=1\n\n2023-08-23T17:45:17.265188Z    26 Query SET autocommit=0\n\n2023-08-23T17:45:17.265919Z    26 Query SELECT *    FROM ORDINE  WHERE    Stato_o = 'In sospeso' AND ID_utente=31 AND Deleted=0 ORDER BY ID_ordine DESC LIMIT 1\n\n2023-08-23T17:45:17.270339Z    26 Query SELECT * FROM ORDINE JOIN CARRELLO ON ID_cart=ID_carrello  WHERE  (ID_ordine=125)\n\n2023-08-23T17:45:17.272270Z    26 Query SELECT *  FROM CARTITEM  WHERE    ID_car = 141    AND deleted = 'N'\n\n2023-08-23T17:45:17.274521Z    26 Query SELECT *  FROM PAGAMENTO  WHERE  Deleted ='N' AND ID_order=125\n\n2023-08-23T17:45:17.276718Z    26 Query INSERT INTO PAGAMENTO    ( Importo,     ID_order,     NumeroCarta,     CVV,     Nome,     ScadenzaCarta   )  VALUES (300000.00,125,2.0,1,'Ydfuf','1')\n\n2023-08-23T17:45:17.278111Z    26 Query UPDATE ORDINE  SET Stato_o='Completato'  WHERE  ID_ordine=125\n\n2023-08-23T17:45:17.279899Z    26 Query SELECT * FROM PRODOTTO  WHERE    Deleted=0 AND Blocked=0 AND ID_amuleto=11 AND Quantità_disp&gt;=3\n\n2023-08-23T17:45:17.280947Z    26 Query rollback\n\n\n2023-08-23T17:45:17.286115Z    27 Connect   root@localhost on amuletshop using TCP/IP\n</code></pre>\n<p>2023-08-23T17:45:17.286988Z    27 Query /* mysql-connector-j-8.0.32 (Revision: fa4912a849140828e48162a2c396c8df0091bed7) */SELECT  @@session.auto_increment_increment AS auto_increment_increment, @@character_set_client AS character_set_client, @@character_set_connection AS character_set_connection, @@character_set_results AS character_set_results, @@character_set_server AS character_set_server, @@collation_server AS collation_server, @@collation_connection AS collation_connection, @@init_connect AS init_connect, @@interactive_timeout AS interactive_timeout, @@license AS license, @@lower_case_table_names AS lower_case_table_names, @@max_allowed_packet AS max_allowed_packet, @@net_write_timeout AS net_write_timeout, @@performance_schema AS performance_schema, @@sql_mode AS sql_mode, @@system_time_zone AS system_time_zone, @@time_zone AS time_zone, @@transaction_isolation AS transaction_isolation, @@wait_timeout AS wait_timeout</p>\n<pre><code>2023-08-23T17:45:17.287781Z    27 Query SET character_set_results = NULL\n\n2023-08-23T17:45:17.288150Z    27 Query SET autocommit=1\n\n2023-08-23T17:45:17.288631Z    27 Query SET autocommit=0\n\n2023-08-23T17:45:17.289342Z    26 Query DELETE FROM ORDINE  WHERE  ID_ordine=125\n\n2023-08-23T17:45:17.290633Z    27 Query SELECT * FROM CARRELLO  WHERE    deleted='N'AND ID_user=31 AND Stato_c='Aperto'\n\n2023-08-23T17:45:17.293113Z    27 Query DELETE FROM CARRELLO  WHERE  ID_carrello=145\n\n2023-08-23T17:45:17.294688Z    27 Query UPDATE Carrello  SET Stato_c = 'Aperto' WHERE  ID_carrello=141 AND Stato_c= 'Chiuso'\n\n2023-08-23T17:45:17.295915Z    27 Query SELECT * FROM CARRELLO  WHERE    deleted='N'AND ID_user=31 AND Stato_c='Aperto'\n\n2023-08-23T17:45:17.297347Z    27 Query SELECT * FROM CartItem JOIN PRODOTTO ON ID_amulet=ID_amuleto  WHERE    CartItem.deleted='N'AND ID_car=141 ORDER BY PRODOTTO.Nome\n\n2023-08-23T17:45:17.299415Z    27 Query SELECT Quantità_disp FROM PRODOTTO  WHERE    Deleted=0 AND Blocked=0 AND ID_amuleto=11 AND Quantità_disp&gt;=3\n\n2023-08-23T17:45:17.300294Z    27 Query commit\n</code></pre>\n<p>2023-08-23T17:45:17.310637Z    28 Connect   root@localhost on amuletshop using TCP/IP\n2023-08-23T17:45:17.311448Z    28 Query /* mysql-connector-j-8.0.32 (Revision: fa4912a849140828e48162a2c396c8df0091bed7) */SELECT  @@session.auto_increment_increment AS auto_increment_increment, @@character_set_client AS character_set_client, @@character_set_connection AS character_set_connection, @@character_set_results AS character_set_results, @@character_set_server AS character_set_server, @@collation_server AS collation_server, @@collation_connection AS collation_connection, @@init_connect AS init_connect, @@interactive_timeout AS interactive_timeout, @@license AS license, @@lower_case_table_names AS lower_case_table_names, @@max_allowed_packet AS max_allowed_packet, @@net_write_timeout AS net_write_timeout, @@performance_schema AS performance_schema, @@sql_mode AS sql_mode, @@system_time_zone AS system_time_zone, @@time_zone AS time_zone, @@transaction_isolation AS transaction_isolation, @@wait_timeout AS wait_timeout</p>\n<pre><code>2023-08-23T17:45:17.312215Z    28 Query SET character_set_results = NULL\n2023-08-23T17:45:17.312635Z    28 Query SET autocommit=1\n2023-08-23T17:45:17.313138Z    28 Query SET autocommit=0\n2023-08-23T17:45:17.313850Z    26 Query SELECT *    FROM ORDINE  WHERE    ID_ordine = 125\n2023-08-23T17:45:17.314639Z    28 Query commit\n2023-08-23T17:45:17.315071Z    28 Query rollback\n2023-08-23T17:45:17.315327Z    28 Quit  \n</code></pre>\n<p>In MySQL WorkBench the order with ID_ordine = 125 continue to be there. So the delete didn't effectly work even if it is in the log.</p>\n<p>My questions are:\n<strong>Why in the log the delete has query identificator=26 and not 27</strong> considered that it should be executed inside the delete of the cart (see in the top of the catch of NotAvailableProductEception)?</p>\n<p><strong>Why the record of the table ORDINE isn't actually deleted?</strong></p>\n<p>I know that there are several security problem such as storing the credit card information into the database and store the UserID in the cookie directly, but the website won't be published, it's just for an exam where the professor told us to don't manage the security (he just mind the software engineering).</p>\n<p>If you see that I'm doing something wrong please let me know, <strong>thank you in advance</strong>.</p>\n"},{"tags":["java","android","android-intent"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1692863854,"post_id":76966989,"comment_id":135682441,"body_markdown":"Just the usual way. The same as if you started an activity with startActivityForResult().","body":"Just the usual way. The same as if you started an activity with startActivityForResult()."},{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1692874341,"post_id":76966989,"comment_id":135684543,"body_markdown":"https://developer.android.com/training/basics/intents/filters#ReturnResult","body":"<a href=\"https://developer.android.com/training/basics/intents/filters#ReturnResult\" rel=\"nofollow noreferrer\">developer.android.com/training/basics/intents/&hellip;</a>"},{"owner":{"account_id":3470138,"reputation":244,"user_id":2904718,"accept_rate":33,"display_name":"Aristide13"},"score":0,"creation_date":1692911610,"post_id":76966989,"comment_id":135692742,"body_markdown":"@CommonsWare Thanks for the answer, but the doc doesn&#39;t specify what &quot;com.example.RESULT_ACTION&quot; is. I guess one has to add it to the intent filter declaration of the receiving activity for example like this: &quot;&lt;action android:name=&quot;com.package.myapp.FILE_PICKER_RESULT&quot;/&gt;&quot;? But it doesn&#39;t work with android&#39;s file picker anyway!","body":"@CommonsWare Thanks for the answer, but the doc doesn&#39;t specify what &quot;com.example.RESULT_ACTION&quot; is. I guess one has to add it to the intent filter declaration of the receiving activity for example like this: &quot;&lt;action android:name=&quot;com.package.myapp.FILE_PICKER_RESULT&quot;/&gt;&quot;? But it doesn&#39;t work with android&#39;s file picker anyway!"},{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1692913813,"post_id":76966989,"comment_id":135693065,"body_markdown":"The action is `android.intent.action.GET_CONTENT`. That is the `Intent` action that you are attempting to respond to.","body":"The action is <code>android.intent.action.GET_CONTENT</code>. That is the <code>Intent</code> action that you are attempting to respond to."},{"owner":{"account_id":3470138,"reputation":244,"user_id":2904718,"accept_rate":33,"display_name":"Aristide13"},"score":0,"creation_date":1692915957,"post_id":76966989,"comment_id":135693355,"body_markdown":"@CommonsWare No I have already tried and this is not what the documentation you link offers. This is a unique identifier including the app package that returns the uri &quot;Intent result = new Intent(&quot;com.example.RESULT_ACTION&quot;, Uri.parse(&quot;content://result_uri&quot;)); &quot;. That&#39;s how I understand it and you? I also don&#39;t think the uri I return is invalid since it works when I share a file directly from my app to Gmail!","body":"@CommonsWare No I have already tried and this is not what the documentation you link offers. This is a unique identifier including the app package that returns the uri &quot;Intent result = new Intent(&quot;com.example.RESULT_ACTION&quot;, Uri.parse(&quot;content://result_uri&quot;)); &quot;. That&#39;s how I understand it and you? I also don&#39;t think the uri I return is invalid since it works when I share a file directly from my app to Gmail!"},{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1692916431,"post_id":76966989,"comment_id":135693395,"body_markdown":"&quot;this is not what the documentation you link offers&quot; -- overall, the documentation is for cases where *you* are both the caller (`startActivityForResult()`) and the recipient (`onActivityResult()` / `setResult()`). In your case, you are just the recipient. All you need to do is call `setResult()` at the point when you have the result that you want to send back. That is why I linked to [the specific section with the specific `setResult()` call that you need to add](https://developer.android.com/training/basics/intents/filters#ReturnResult).","body":"&quot;this is not what the documentation you link offers&quot; -- overall, the documentation is for cases where <i>you</i> are both the caller (<code>startActivityForResult()</code>) and the recipient (<code>onActivityResult()</code> / <code>setResult()</code>). In your case, you are just the recipient. All you need to do is call <code>setResult()</code> at the point when you have the result that you want to send back. That is why I linked to <a href=\"https://developer.android.com/training/basics/intents/filters#ReturnResult\" rel=\"nofollow noreferrer\">the specific section with the specific <code>setResult()</code> call that you need to add</a>."},{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1692916594,"post_id":76966989,"comment_id":135693417,"body_markdown":"You could also look at [many sample implementations of `GET_CONTENT` handlers](https://github.com/search?q=%22%3Caction+android%3Aname%3D%5C%22android.intent.action.GET_CONTENT%5C%22+%2F%3E%22+language%3AXML&amp;type=code) and see how they handle it. Only a subset of those are activities for handling `GET_CONTENT`, but that&#39;s as close as I can get with my knowledge of GitHub search syntax.","body":"You could also look at <a href=\"https://github.com/search?q=%22%3Caction+android%3Aname%3D%5C%22android.intent.action.GET_CONTENT%5C%22+%2F%3E%22+language%3AXML&amp;type=code\" rel=\"nofollow noreferrer\">many sample implementations of <code>GET_CONTENT</code> handlers</a> and see how they handle it. Only a subset of those are activities for handling <code>GET_CONTENT</code>, but that&#39;s as close as I can get with my knowledge of GitHub search syntax."},{"owner":{"account_id":3470138,"reputation":244,"user_id":2904718,"accept_rate":33,"display_name":"Aristide13"},"score":0,"creation_date":1692954699,"post_id":76966989,"comment_id":135697915,"body_markdown":"@CommonsWare Thanks I searched the codes on github and found the solution (see answer)","body":"@CommonsWare Thanks I searched the codes on github and found the solution (see answer)"}],"answers":[{"tags":[],"owner":{"account_id":3470138,"reputation":244,"user_id":2904718,"accept_rate":33,"display_name":"Aristide13"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692955116,"creation_date":1692955116,"answer_id":76975858,"question_id":76966989,"body_markdown":"Here is the return code that works for me.\r\nAttention, the activity that is declared the intent filter must be the one that sends the result.\r\n```\r\nIntent intent = new Intent();\r\n        intent.setFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);\r\n        intent.setAction(Intent.ACTION_SEND);\r\n        intent.setDataAndType(uri,mime);\r\n        setResult(RESULT_OK, intent);\r\n        finish();\r\n```","title":"How to return selected file to android file picker from my app?","body":"<p>Here is the return code that works for me.\nAttention, the activity that is declared the intent filter must be the one that sends the result.</p>\n<pre><code>Intent intent = new Intent();\n        intent.setFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);\n        intent.setAction(Intent.ACTION_SEND);\n        intent.setDataAndType(uri,mime);\n        setResult(RESULT_OK, intent);\n        finish();\n</code></pre>\n"}],"owner":{"account_id":3470138,"reputation":244,"user_id":2904718,"accept_rate":33,"display_name":"Aristide13"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692955116,"creation_date":1692861378,"question_id":76966989,"body_markdown":"My app appears in the file picker with the intent filter declared in my manifest for a given activity:\r\n```\r\n&lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.GET_CONTENT&quot; /&gt;\r\n                &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\r\n                &lt;category android:name=&quot;android.intent.category.OPENABLE&quot; /&gt;\r\n                &lt;category android:name=&quot;android.intent.category.BROWSABLE&quot; /&gt;\r\n                &lt;data android:mimeType=&quot;*/*&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n```\r\n\r\nFor example if a user wants to attach a file to an email with the gmail app, gmail opens the file picker. In this file picker is my app. The user selects my app and my app opens.\r\nThe user selects a file, which my code translates to uri.\r\n\r\nMy question is how to return this uri to the file picker?\r\n\r\nEDIT: \r\nAs suggested by @CommonsWare follow the documentation https://developer.android.com/training/basics/intents/filters#ReturnResult. I guess &quot;com.example.RESULT_ACTION&quot; needs to be added to the activity&#39;s intent filter like this:\r\n```\r\n&lt;activity android:name=&quot;.MyActivity&quot;&gt;\r\n    &lt;intent-filter&gt;\r\n        &lt;action android:name=&quot;com.mypackage.myapp.RESULT_ACTION&quot; /&gt;\r\n    &lt;/intent-filter&gt;\r\n&lt;/activity&gt;\r\n```\r\nBut this code doesn&#39;t work to return the uri of the selected file to the file picker for me:\r\n```\r\n// Create intent to deliver some kind of result data\r\nIntent result = new Intent(&quot;com.example.RESULT_ACTION&quot;, Uri.parse(&quot;content://result_uri&quot;));\r\nsetResult(Activity.RESULT_OK, result);\r\nfinish();\r\n```","title":"How to return selected file to android file picker from my app?","body":"<p>My app appears in the file picker with the intent filter declared in my manifest for a given activity:</p>\n<pre><code>&lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.GET_CONTENT&quot; /&gt;\n                &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\n                &lt;category android:name=&quot;android.intent.category.OPENABLE&quot; /&gt;\n                &lt;category android:name=&quot;android.intent.category.BROWSABLE&quot; /&gt;\n                &lt;data android:mimeType=&quot;*/*&quot; /&gt;\n            &lt;/intent-filter&gt;\n</code></pre>\n<p>For example if a user wants to attach a file to an email with the gmail app, gmail opens the file picker. In this file picker is my app. The user selects my app and my app opens.\nThe user selects a file, which my code translates to uri.</p>\n<p>My question is how to return this uri to the file picker?</p>\n<p>EDIT:\nAs suggested by @CommonsWare follow the documentation <a href=\"https://developer.android.com/training/basics/intents/filters#ReturnResult\" rel=\"nofollow noreferrer\">https://developer.android.com/training/basics/intents/filters#ReturnResult</a>. I guess &quot;com.example.RESULT_ACTION&quot; needs to be added to the activity's intent filter like this:</p>\n<pre><code>&lt;activity android:name=&quot;.MyActivity&quot;&gt;\n    &lt;intent-filter&gt;\n        &lt;action android:name=&quot;com.mypackage.myapp.RESULT_ACTION&quot; /&gt;\n    &lt;/intent-filter&gt;\n&lt;/activity&gt;\n</code></pre>\n<p>But this code doesn't work to return the uri of the selected file to the file picker for me:</p>\n<pre><code>// Create intent to deliver some kind of result data\nIntent result = new Intent(&quot;com.example.RESULT_ACTION&quot;, Uri.parse(&quot;content://result_uri&quot;));\nsetResult(Activity.RESULT_OK, result);\nfinish();\n</code></pre>\n"},{"tags":["java","solr","lucene","solrj","solrclient"],"comments":[{"owner":{"account_id":7034556,"reputation":12325,"user_id":5389127,"display_name":"Ga&#235;l J"},"score":0,"creation_date":1692984295,"post_id":76975802,"comment_id":135704569,"body_markdown":"To be clear: this won&#39;t be an issue with SolrJ. You&#39;d have same time with HTTP calls directly. How is your schema defined? What does your query look like? I expect the delete operation to behave in the same manner as a search one: if you&#39;re using the proper type of field (indexed...), it should be fast. Depends also how many docs are matching.","body":"To be clear: this won&#39;t be an issue with SolrJ. You&#39;d have same time with HTTP calls directly. How is your schema defined? What does your query look like? I expect the delete operation to behave in the same manner as a search one: if you&#39;re using the proper type of field (indexed...), it should be fast. Depends also how many docs are matching."}],"owner":{"account_id":27635863,"reputation":3,"user_id":21093796,"display_name":"Ayush"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692954725,"creation_date":1692954725,"question_id":76975802,"body_markdown":"To delete documents from lucene index, we are using solrJ 5.5.4 library where we are calling deleteByQuery() and commit() method to perform our operation. The overall operation of deleting documents from lucene is taking around 2-3 sec which should be executed within 500 ms.\r\n\r\nMentioning the code snippet:\r\n\r\n```\r\nHttpSolrClient solrClient = null;\r\nsolrClient = this.getHttpSolrClient(indexDir);\r\nsolrClient.deleteByQuery(query);\r\nsolrClient.commit();\r\n```\r\nChecked the Solr logs and observed that majority time is being taken to execute the query by solrclient and to commit the operation by update handler. We are only calling Api of solrJ to delete the forms by query as mentioned in snippet. The internal implementation of it is taking time. \r\n\r\nSolr logs for reference:\r\n```\r\nINFO  [org.apache.solr.update.processor.LogUpdateProcessor] (http-10.50.32.46-8080-67) {deleteByQuery=doc_id: (11664770 OR 11664768 OR 11664766 OR 11664765)} 0 265\r\nINFO  [org.apache.solr.core.SolrCore] (http-10.50.32.46-8080-67) [project_2155538] webapp=/solr path=/update params={wt=javabin&amp;version=2} status=0 QTime=265 \r\n\r\n2023-08-24 12:22:28,875 INFO  [org.apache.solr.update.UpdateHandler] (http-10.50.32.46-8080-67) start commit(optimize=false,waitFlush=false,waitSearcher=true,expungeDeletes=false)\r\n2023-08-24 12:22:31,258 INFO  [org.apache.solr.update.UpdateHandler] (http-10.50.32.46-8080-67) end_commit_flush\r\n```\r\n\r\nCan the issue be related to the query passed, For eg. is the query format correct or is it the internal mechanism of solrJ for executing and commiting the query for a particular field fast and for a particular field slow? i.e for doc_id it might be executing and commiting the operation slow and for other field, the operation might be fast? Also can the issue be related to solr configuration?\r\n","title":"Deleting documents by query and commiting in Lucene index taking long time using SolrJ","body":"<p>To delete documents from lucene index, we are using solrJ 5.5.4 library where we are calling deleteByQuery() and commit() method to perform our operation. The overall operation of deleting documents from lucene is taking around 2-3 sec which should be executed within 500 ms.</p>\n<p>Mentioning the code snippet:</p>\n<pre><code>HttpSolrClient solrClient = null;\nsolrClient = this.getHttpSolrClient(indexDir);\nsolrClient.deleteByQuery(query);\nsolrClient.commit();\n</code></pre>\n<p>Checked the Solr logs and observed that majority time is being taken to execute the query by solrclient and to commit the operation by update handler. We are only calling Api of solrJ to delete the forms by query as mentioned in snippet. The internal implementation of it is taking time.</p>\n<p>Solr logs for reference:</p>\n<pre><code>INFO  [org.apache.solr.update.processor.LogUpdateProcessor] (http-10.50.32.46-8080-67) {deleteByQuery=doc_id: (11664770 OR 11664768 OR 11664766 OR 11664765)} 0 265\nINFO  [org.apache.solr.core.SolrCore] (http-10.50.32.46-8080-67) [project_2155538] webapp=/solr path=/update params={wt=javabin&amp;version=2} status=0 QTime=265 \n\n2023-08-24 12:22:28,875 INFO  [org.apache.solr.update.UpdateHandler] (http-10.50.32.46-8080-67) start commit(optimize=false,waitFlush=false,waitSearcher=true,expungeDeletes=false)\n2023-08-24 12:22:31,258 INFO  [org.apache.solr.update.UpdateHandler] (http-10.50.32.46-8080-67) end_commit_flush\n</code></pre>\n<p>Can the issue be related to the query passed, For eg. is the query format correct or is it the internal mechanism of solrJ for executing and commiting the query for a particular field fast and for a particular field slow? i.e for doc_id it might be executing and commiting the operation slow and for other field, the operation might be fast? Also can the issue be related to solr configuration?</p>\n"},{"tags":["java","jax-rs"],"comments":[{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1692798916,"post_id":76961631,"comment_id":135673453,"body_markdown":"I don&#39;t think it&#39;s the PathParam. I think it&#39;s looking for `Long id` in `Book`.","body":"I don&#39;t think it&#39;s the PathParam. I think it&#39;s looking for <code>Long id</code> in <code>Book</code>."},{"owner":{"account_id":25781315,"reputation":9,"user_id":19526890,"display_name":"Georgios Kourounis"},"score":0,"creation_date":1692801966,"post_id":76961631,"comment_id":135674244,"body_markdown":"@DavidConrad I had the parameter as query param before and it worked fine with the same payload. So I&#39;m pretty sure it&#39;s the PathParam&#39;s fault","body":"@DavidConrad I had the parameter as query param before and it worked fine with the same payload. So I&#39;m pretty sure it&#39;s the PathParam&#39;s fault"}],"answers":[{"tags":[],"owner":{"account_id":348326,"reputation":6607,"user_id":682965,"display_name":"Simon G."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692868934,"creation_date":1692868934,"answer_id":76967923,"question_id":76961631,"body_markdown":"I suspect the problem is not in your Java code but in PostMan. Have you mist-typed the parameter in the URL or forgot to set it?\r\n\r\nMy guess is that PostMan is not sending this URL:\r\n\r\n`http://localhost:8080/api/books/2`\r\n\r\nbut\r\n\r\n`http://localhost:8080/api/books/{bookID}`\r\n\r\nThat would explain the error message you are seeing.","title":"Cannot deserialize value of type `java.lang.Long` from Object value (token `JsonToken.START_OBJECT`) in JAX-RS PUT Endpoint","body":"<p>I suspect the problem is not in your Java code but in PostMan. Have you mist-typed the parameter in the URL or forgot to set it?</p>\n<p>My guess is that PostMan is not sending this URL:</p>\n<p><code>http://localhost:8080/api/books/2</code></p>\n<p>but</p>\n<p><code>http://localhost:8080/api/books/{bookID}</code></p>\n<p>That would explain the error message you are seeing.</p>\n"},{"tags":[],"owner":{"account_id":25781315,"reputation":9,"user_id":19526890,"display_name":"Georgios Kourounis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692954572,"creation_date":1692954572,"answer_id":76975784,"question_id":76961631,"body_markdown":"I&#39;ve fixed the issue, which was that I was receiving an empty path parameter. \r\n\r\nI had imported PathParam from `jakarta.websocket.server.PathParam;`\r\nWhile it should have been from `jakarta.ws.rs.PathParam;`","title":"Cannot deserialize value of type `java.lang.Long` from Object value (token `JsonToken.START_OBJECT`) in JAX-RS PUT Endpoint","body":"<p>I've fixed the issue, which was that I was receiving an empty path parameter.</p>\n<p>I had imported PathParam from <code>jakarta.websocket.server.PathParam;</code>\nWhile it should have been from <code>jakarta.ws.rs.PathParam;</code></p>\n"}],"owner":{"account_id":25781315,"reputation":9,"user_id":19526890,"display_name":"Georgios Kourounis"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76975784,"answer_count":2,"score":0,"last_activity_date":1692954572,"creation_date":1692795799,"question_id":76961631,"body_markdown":"I&#39;m getting an error that no matter what I try doesn&#39;t seem to get fixed. In my eyes everything looks correct. This is my service for the endpoint\r\n\r\n```\r\n@PUT\r\n    @Path(&quot;/{bookId}&quot;)\r\n    public Response editBook(@PathParam(&quot;bookId&quot;) Long bookId, Book newBook) {\r\n    \t\r\n    \t\r\n    \tif (!JWTTokenAuth.validateJwtToken(JWTTokenAuth.extractTokenFromHeaders(headers))) {\r\n            return Response.status(Response.Status.UNAUTHORIZED).build();\r\n        }\r\n\r\n        Book book = bookDao.getBookById(bookId);\r\n        if (book == null) {\r\n            return Response.status(Response.Status.NOT_FOUND).build();\r\n        }\r\n\r\n        book.setTitle(newBook.getTitle());\r\n\r\n        bookDao.updateBook(book);\r\n\r\n        return Response.ok().build();\r\n    }\r\n```\r\n\r\nAnd this is my entity \r\n\r\n```\r\n@Entity\r\n@Getter\r\n@Setter\r\npublic class Book {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n    \r\n    private String title;\r\n    private String author;\r\n    \r\n    @OneToMany(mappedBy = &quot;book&quot;)\r\n    private List&lt;Review&gt; reviews;\r\n\r\n}\r\n\r\n```\r\n\r\nWhen I try to hit the endpoint through postman (for example) http://localhost:8080/api/books/2\r\n\r\nwith the authorization setup correctly and my JSON payload set as this \r\n```\r\n{\r\n    &quot;title&quot;: &quot;defgefgege&quot;\r\n}\r\n```\r\nI get this error and I think it has to do with the PathParam? \r\nCannot deserialize value of type `java.lang.Long` from Object value (token `JsonToken.START_OBJECT`)\r\n at [Source: (io.undertow.servlet.spec.ServletInputStreamImpl); line: 1, column: 1\r\n]","title":"Cannot deserialize value of type `java.lang.Long` from Object value (token `JsonToken.START_OBJECT`) in JAX-RS PUT Endpoint","body":"<p>I'm getting an error that no matter what I try doesn't seem to get fixed. In my eyes everything looks correct. This is my service for the endpoint</p>\n<pre><code>@PUT\n    @Path(&quot;/{bookId}&quot;)\n    public Response editBook(@PathParam(&quot;bookId&quot;) Long bookId, Book newBook) {\n        \n        \n        if (!JWTTokenAuth.validateJwtToken(JWTTokenAuth.extractTokenFromHeaders(headers))) {\n            return Response.status(Response.Status.UNAUTHORIZED).build();\n        }\n\n        Book book = bookDao.getBookById(bookId);\n        if (book == null) {\n            return Response.status(Response.Status.NOT_FOUND).build();\n        }\n\n        book.setTitle(newBook.getTitle());\n\n        bookDao.updateBook(book);\n\n        return Response.ok().build();\n    }\n</code></pre>\n<p>And this is my entity</p>\n<pre><code>@Entity\n@Getter\n@Setter\npublic class Book {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    \n    private String title;\n    private String author;\n    \n    @OneToMany(mappedBy = &quot;book&quot;)\n    private List&lt;Review&gt; reviews;\n\n}\n\n</code></pre>\n<p>When I try to hit the endpoint through postman (for example) http://localhost:8080/api/books/2</p>\n<p>with the authorization setup correctly and my JSON payload set as this</p>\n<pre><code>{\n    &quot;title&quot;: &quot;defgefgege&quot;\n}\n</code></pre>\n<p>I get this error and I think it has to do with the PathParam?\nCannot deserialize value of type <code>java.lang.Long</code> from Object value (token <code>JsonToken.START_OBJECT</code>)\nat [Source: (io.undertow.servlet.spec.ServletInputStreamImpl); line: 1, column: 1\n]</p>\n"},{"tags":["java","reflection","constructor","abstract-class","jobrunr"],"answers":[{"tags":[],"owner":{"account_id":986840,"reputation":784,"user_id":1005124,"accept_rate":29,"display_name":"rdehuyss"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1692954489,"creation_date":1692953560,"answer_id":76975675,"question_id":76975346,"body_markdown":"Ronald here - creator of [JobRunr](https://www.jobrunr.io/en/). \r\n\r\nThe exception you&#39;re seeing is because you try to instantiate a Job of type `Blubb` (mentioned in the json of the job), which is an abstract class. You cannot create instances of Abstract classes hence the exception.\r\n\r\nIn your case, I would recommend to look at a framework like Spring and add the `@Recurring` annotation to the different jobs. This will also make your code probably more readable.\r\n\r\nOn top of that, it is important that the `JobScheduler` instance should be a singleton (for performance reasons).\r\n","title":"JobRunr: InstantiationException in ReflectionUtils.newInstance","body":"<p>Ronald here - creator of <a href=\"https://www.jobrunr.io/en/\" rel=\"nofollow noreferrer\">JobRunr</a>.</p>\n<p>The exception you're seeing is because you try to instantiate a Job of type <code>Blubb</code> (mentioned in the json of the job), which is an abstract class. You cannot create instances of Abstract classes hence the exception.</p>\n<p>In your case, I would recommend to look at a framework like Spring and add the <code>@Recurring</code> annotation to the different jobs. This will also make your code probably more readable.</p>\n<p>On top of that, it is important that the <code>JobScheduler</code> instance should be a singleton (for performance reasons).</p>\n"}],"owner":{"account_id":6343837,"reputation":69,"user_id":4924981,"display_name":"Christina Unger"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76975675,"answer_count":1,"score":1,"last_activity_date":1692954489,"creation_date":1692950309,"question_id":76975346,"body_markdown":"I&#39;m using JobRunr 6.3.0 for scheduling recurring background jobs in Java, and I encounter a problem with reflective access.\r\n\r\nI&#39;m trying to have an abstract class that implements the job scheduling logic, creating one job that calls an abstract method which is implemented in each child class. Like this:\r\n\r\n```java\r\npublic abstract class Blubb {\r\n\r\n    public Blubb() {\r\n        this(...defaultArgs);\r\n    }\r\n\r\n    protected Blubb(defaultArgs) {\r\n        // set up\r\n    }\r\n\r\n    protected abstract String name();\r\n\r\n    protected abstract Iterator&lt;Object&gt; getObjectsFromExternalSource();\r\n\r\n    public void load() {\r\n        JobScheduler scheduler = JobRunr\r\n            .configure()\r\n            .useStorageProvider(new InMemoryStorageProvider())\r\n            .useBackgroundJobServer()\r\n            .initialize()\r\n            .getJobScheduler();\r\n\r\n        scheduler.createRecurrently(\r\n            RecurringJobBuilder\r\n                .aRecurringJob()\r\n                .withId(name())\r\n                .withDuration(Duration.ofSeconds(10))\r\n                .withDetails(this::run)\r\n                .withAmountOfRetries(2)\r\n        );\r\n    }\r\n\r\n    public void run() {\r\n        Iterator&lt;Object&gt; objects = getObjectsFromExternalSource();\r\n\r\n        while (objects.hasNext()) {\r\n            // do stuff\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nJob creation works, and the job in the database looks fine:\r\n```json\r\n{\r\n  &quot;_id&quot;: &quot;name&quot;,\r\n  &quot;version&quot;: 0,\r\n  &quot;jobAsJson&quot;: &quot;{\\&quot;version\\&quot;:0,\\&quot;jobSignature\\&quot;:\\&quot;org.example.blah.Blubb.run()\\&quot;,\\&quot;jobName\\&quot;:\\&quot;org.example.blah.Blubb.run()\\&quot;,\\&quot;amountOfRetries\\&quot;:2,\\&quot;labels\\&quot;:[],\\&quot;jobDetails\\&quot;:{\\&quot;className\\&quot;:\\&quot;org.example.blah.Blubb\\&quot;,\\&quot;staticFieldName\\&quot;:null,\\&quot;methodName\\&quot;:\\&quot;run\\&quot;,\\&quot;jobParameters\\&quot;:[],\\&quot;cacheable\\&quot;:true},\\&quot;id\\&quot;:\\&quot;name\\&quot;,\\&quot;scheduleExpression\\&quot;:\\&quot;PT10M\\&quot;,\\&quot;zoneId\\&quot;:\\&quot;Etc/UTC\\&quot;,\\&quot;createdAt\\&quot;:\\&quot;2023-08-25T06:39:29.844981739Z\\&quot;}&quot;,\r\n  &quot;createdAt&quot;: {\r\n    &quot;$numberLong&quot;: &quot;1692945569844&quot;\r\n  }\r\n}\r\n```\r\n\r\nBut everytime it tries to run the job, I get the following exception:\r\n```\r\nWARN  o.j.server.BackgroundJobPerformer - Job(id=a444fd50-843a-4464-88a1-e51530056b3f, jobName=&#39;org.example.blah.Blubb.run()&#39;) processing failed: An exception occurred during the performance of the job\r\norg.jobrunr.JobRunrException: JobRunr encountered a problematic exception. Please create a bug report (if possible, provide the code to reproduce this and the stacktrace)\r\n\tat org.jobrunr.JobRunrException.shouldNotHappenException(JobRunrException.java:43)\r\n\tat org.jobrunr.utils.reflection.ReflectionUtils.newInstance(ReflectionUtils.java:156)\r\n\tat org.jobrunr.server.runner.AbstractBackgroundJobRunner$BackgroundJobWorker.getJobToPerform(AbstractBackgroundJobRunner.java:46)\r\n\tat org.jobrunr.server.runner.AbstractBackgroundJobRunner$BackgroundJobWorker.run(AbstractBackgroundJobRunner.java:36)\r\n\tat org.jobrunr.server.runner.AbstractBackgroundJobRunner.run(AbstractBackgroundJobRunner.java:20)\r\n\tat org.jobrunr.server.BackgroundJobPerformer.runActualJob(BackgroundJobPerformer.java:89)\r\n\tat org.jobrunr.server.BackgroundJobPerformer.performJob(BackgroundJobPerformer.java:64)\r\n\tat org.jobrunr.server.BackgroundJobPerformer.run(BackgroundJobPerformer.java:42)\r\n\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\tat java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\nCaused by: java.lang.InstantiationException: null\r\n\tat java.base/jdk.internal.reflect.InstantiationExceptionConstructorAccessorImpl.newInstance(InstantiationExceptionConstructorAccessorImpl.java:48)\r\n\tat java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\r\n\tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\r\n\tat org.jobrunr.utils.reflection.ReflectionUtils.newInstance(ReflectionUtils.java:154)\r\n```\r\n\r\nAny idea what I&#39;m doing wrong? Is this a problem with the class constructors? As far as I understand it, JobRunr wants a no-args default constructor? (I have a public no-args constructor and an additional protected constructor in both the abstract class above and in the child classes. But I get the same error even if I remove all custom constructors.)","title":"JobRunr: InstantiationException in ReflectionUtils.newInstance","body":"<p>I'm using JobRunr 6.3.0 for scheduling recurring background jobs in Java, and I encounter a problem with reflective access.</p>\n<p>I'm trying to have an abstract class that implements the job scheduling logic, creating one job that calls an abstract method which is implemented in each child class. Like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public abstract class Blubb {\n\n    public Blubb() {\n        this(...defaultArgs);\n    }\n\n    protected Blubb(defaultArgs) {\n        // set up\n    }\n\n    protected abstract String name();\n\n    protected abstract Iterator&lt;Object&gt; getObjectsFromExternalSource();\n\n    public void load() {\n        JobScheduler scheduler = JobRunr\n            .configure()\n            .useStorageProvider(new InMemoryStorageProvider())\n            .useBackgroundJobServer()\n            .initialize()\n            .getJobScheduler();\n\n        scheduler.createRecurrently(\n            RecurringJobBuilder\n                .aRecurringJob()\n                .withId(name())\n                .withDuration(Duration.ofSeconds(10))\n                .withDetails(this::run)\n                .withAmountOfRetries(2)\n        );\n    }\n\n    public void run() {\n        Iterator&lt;Object&gt; objects = getObjectsFromExternalSource();\n\n        while (objects.hasNext()) {\n            // do stuff\n        }\n    }\n}\n</code></pre>\n<p>Job creation works, and the job in the database looks fine:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;_id&quot;: &quot;name&quot;,\n  &quot;version&quot;: 0,\n  &quot;jobAsJson&quot;: &quot;{\\&quot;version\\&quot;:0,\\&quot;jobSignature\\&quot;:\\&quot;org.example.blah.Blubb.run()\\&quot;,\\&quot;jobName\\&quot;:\\&quot;org.example.blah.Blubb.run()\\&quot;,\\&quot;amountOfRetries\\&quot;:2,\\&quot;labels\\&quot;:[],\\&quot;jobDetails\\&quot;:{\\&quot;className\\&quot;:\\&quot;org.example.blah.Blubb\\&quot;,\\&quot;staticFieldName\\&quot;:null,\\&quot;methodName\\&quot;:\\&quot;run\\&quot;,\\&quot;jobParameters\\&quot;:[],\\&quot;cacheable\\&quot;:true},\\&quot;id\\&quot;:\\&quot;name\\&quot;,\\&quot;scheduleExpression\\&quot;:\\&quot;PT10M\\&quot;,\\&quot;zoneId\\&quot;:\\&quot;Etc/UTC\\&quot;,\\&quot;createdAt\\&quot;:\\&quot;2023-08-25T06:39:29.844981739Z\\&quot;}&quot;,\n  &quot;createdAt&quot;: {\n    &quot;$numberLong&quot;: &quot;1692945569844&quot;\n  }\n}\n</code></pre>\n<p>But everytime it tries to run the job, I get the following exception:</p>\n<pre><code>WARN  o.j.server.BackgroundJobPerformer - Job(id=a444fd50-843a-4464-88a1-e51530056b3f, jobName='org.example.blah.Blubb.run()') processing failed: An exception occurred during the performance of the job\norg.jobrunr.JobRunrException: JobRunr encountered a problematic exception. Please create a bug report (if possible, provide the code to reproduce this and the stacktrace)\n    at org.jobrunr.JobRunrException.shouldNotHappenException(JobRunrException.java:43)\n    at org.jobrunr.utils.reflection.ReflectionUtils.newInstance(ReflectionUtils.java:156)\n    at org.jobrunr.server.runner.AbstractBackgroundJobRunner$BackgroundJobWorker.getJobToPerform(AbstractBackgroundJobRunner.java:46)\n    at org.jobrunr.server.runner.AbstractBackgroundJobRunner$BackgroundJobWorker.run(AbstractBackgroundJobRunner.java:36)\n    at org.jobrunr.server.runner.AbstractBackgroundJobRunner.run(AbstractBackgroundJobRunner.java:20)\n    at org.jobrunr.server.BackgroundJobPerformer.runActualJob(BackgroundJobPerformer.java:89)\n    at org.jobrunr.server.BackgroundJobPerformer.performJob(BackgroundJobPerformer.java:64)\n    at org.jobrunr.server.BackgroundJobPerformer.run(BackgroundJobPerformer.java:42)\n    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n    at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n    at java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: java.lang.InstantiationException: null\n    at java.base/jdk.internal.reflect.InstantiationExceptionConstructorAccessorImpl.newInstance(InstantiationExceptionConstructorAccessorImpl.java:48)\n    at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\n    at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\n    at org.jobrunr.utils.reflection.ReflectionUtils.newInstance(ReflectionUtils.java:154)\n</code></pre>\n<p>Any idea what I'm doing wrong? Is this a problem with the class constructors? As far as I understand it, JobRunr wants a no-args default constructor? (I have a public no-args constructor and an additional protected constructor in both the abstract class above and in the child classes. But I get the same error even if I remove all custom constructors.)</p>\n"},{"tags":["java","spring","spring-boot","integration-testing","spring-test"],"comments":[{"owner":{"account_id":165479,"reputation":30116,"user_id":388980,"display_name":"Sam Brannen"},"score":0,"creation_date":1692954490,"post_id":69753236,"comment_id":135697873,"body_markdown":"FYI: I updated my original answer. Spring Framework 6.1 will provide built-in support for a &quot;test context failure threshold&quot;.","body":"FYI: I updated my original answer. Spring Framework 6.1 will provide built-in support for a &quot;test context failure threshold&quot;."}],"answers":[{"tags":[],"owner":{"account_id":23135533,"reputation":107,"user_id":17239818,"display_name":"NARASIMHA RAO NANDIKONDA"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635422117,"creation_date":1635422117,"answer_id":69753653,"question_id":69753236,"body_markdown":"1. If you have multiple integration tests in test class then it will fail multiple times.\r\n\r\n2. you can terminate all the integration test cases using the **dependsOnGroups** property.\r\n\r\nFor example, you can have a method to check whether there is a **bean exception failure or not** and declare all other tests as dependent on this method. But this can be done using TestNG\r\n\r\n    @Test(groups = { &quot;isApplicationContextFailed&quot; }) // you can run with simply @Test here if there is only one independent test.\r\n    public void isApplicationContextFailed() {}\r\n    \r\n    @Test(dependsOnMethods = { &quot;isApplicationContextFailed&quot; })\r\n    public void queryTestOne() {}\r\n\r\n    @Test(dependsOnMethods = { &quot;isApplicationContextFailed&quot; })\r\n    public void queryTestTwo() {}\r\n\r\nyou can explore more from TestNG -&gt;  &lt;https://testng.org/doc/documentation-main.html#dependent-methods&gt;\r\n\r\nNote:- if you are using the JUnit there are some other ways you can do the same. Please update in that case.\r\n","title":"Automatically terminate all integration tests if `Failed to load ApplicationContext` error occurs","body":"<ol>\n<li><p>If you have multiple integration tests in test class then it will fail multiple times.</p>\n</li>\n<li><p>you can terminate all the integration test cases using the <strong>dependsOnGroups</strong> property.</p>\n</li>\n</ol>\n<p>For example, you can have a method to check whether there is a <strong>bean exception failure or not</strong> and declare all other tests as dependent on this method. But this can be done using TestNG</p>\n<pre><code>@Test(groups = { &quot;isApplicationContextFailed&quot; }) // you can run with simply @Test here if there is only one independent test.\npublic void isApplicationContextFailed() {}\n\n@Test(dependsOnMethods = { &quot;isApplicationContextFailed&quot; })\npublic void queryTestOne() {}\n\n@Test(dependsOnMethods = { &quot;isApplicationContextFailed&quot; })\npublic void queryTestTwo() {}\n</code></pre>\n<p>you can explore more from TestNG -&gt;  <a href=\"https://testng.org/doc/documentation-main.html#dependent-methods\" rel=\"nofollow noreferrer\">https://testng.org/doc/documentation-main.html#dependent-methods</a></p>\n<p>Note:- if you are using the JUnit there are some other ways you can do the same. Please update in that case.</p>\n"},{"tags":[],"owner":{"account_id":23135533,"reputation":107,"user_id":17239818,"display_name":"NARASIMHA RAO NANDIKONDA"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635423491,"creation_date":1635423491,"answer_id":69753973,"question_id":69753236,"body_markdown":"If you are using JUnit then add below login in your test classes it will work.\r\n\r\n    public class BaseClass {\r\n\r\n    @BeforeClass\r\n    \tpublic void isApplicationContextFailed() {\r\n    \t\t//logic to check for application failure\r\n    \t}\r\n\r\n\t\r\n\t//continue with your test methods.\r\n    }\r\n\r\n\r\nTo suggest you through below references to get in detail.\r\n\r\n&lt;https://junit.org/junit4/javadoc/4.13/org/junit/BeforeClass.html&gt;\r\n\r\n&lt;https://howtodoinjava.com/testng/testng-before-and-after-annotations/&gt;\r\n","title":"Automatically terminate all integration tests if `Failed to load ApplicationContext` error occurs","body":"<p>If you are using JUnit then add below login in your test classes it will work.</p>\n<pre><code>public class BaseClass {\n\n@BeforeClass\n    public void isApplicationContextFailed() {\n        //logic to check for application failure\n    }\n\n\n//continue with your test methods.\n}\n</code></pre>\n<p>To suggest you through below references to get in detail.</p>\n<p><a href=\"https://junit.org/junit4/javadoc/4.13/org/junit/BeforeClass.html\" rel=\"nofollow noreferrer\">https://junit.org/junit4/javadoc/4.13/org/junit/BeforeClass.html</a></p>\n<p><a href=\"https://howtodoinjava.com/testng/testng-before-and-after-annotations/\" rel=\"nofollow noreferrer\">https://howtodoinjava.com/testng/testng-before-and-after-annotations/</a></p>\n"},{"tags":[],"owner":{"account_id":165479,"reputation":30116,"user_id":388980,"display_name":"Sam Brannen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692954399,"creation_date":1635497488,"answer_id":69766075,"question_id":69753236,"body_markdown":"**UPDATE**\r\n\r\nI implemented built-in support for a &quot;test context failure threshold&quot; in Spring Framework 6.1 M1.\r\n\r\n&gt; As of Spring Framework 6.1, a context *failure threshold* policy is in place which helps avoid repeated attempts to load a failing `ApplicationContext`. By default, the failure threshold is set to `1` which means that only one attempt will be made to load an `ApplicationContext` for a given context cache key. Any subsequent attempt to load the `ApplicationContext` for the same context cache key will result in an immediate `IllegalStateException` with an error message which explains that the attempt was preemptively skipped.\r\n\r\nFor further details, consult the Spring Framework [reference manual][2].\r\n\r\n----\r\n\r\nOriginal Answer:\r\n\r\nThere is currently no way to abort integration tests if the `ApplicationContext` repeatedly fails to load.\r\n\r\nTo vote for such support, please see [this Spring Framework issue][1].\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-framework/issues/14182\r\n  [2]: https://docs.spring.io/spring-framework/reference/6.1-SNAPSHOT/testing/testcontext-framework/ctx-management/failure-threshold.html\r\n","title":"Automatically terminate all integration tests if `Failed to load ApplicationContext` error occurs","body":"<p><strong>UPDATE</strong></p>\n<p>I implemented built-in support for a &quot;test context failure threshold&quot; in Spring Framework 6.1 M1.</p>\n<blockquote>\n<p>As of Spring Framework 6.1, a context <em>failure threshold</em> policy is in place which helps avoid repeated attempts to load a failing <code>ApplicationContext</code>. By default, the failure threshold is set to <code>1</code> which means that only one attempt will be made to load an <code>ApplicationContext</code> for a given context cache key. Any subsequent attempt to load the <code>ApplicationContext</code> for the same context cache key will result in an immediate <code>IllegalStateException</code> with an error message which explains that the attempt was preemptively skipped.</p>\n</blockquote>\n<p>For further details, consult the Spring Framework <a href=\"https://docs.spring.io/spring-framework/reference/6.1-SNAPSHOT/testing/testcontext-framework/ctx-management/failure-threshold.html\" rel=\"nofollow noreferrer\">reference manual</a>.</p>\n<hr />\n<p>Original Answer:</p>\n<p>There is currently no way to abort integration tests if the <code>ApplicationContext</code> repeatedly fails to load.</p>\n<p>To vote for such support, please see <a href=\"https://github.com/spring-projects/spring-framework/issues/14182\" rel=\"nofollow noreferrer\">this Spring Framework issue</a>.</p>\n"}],"owner":{"account_id":8755610,"reputation":51,"user_id":6547308,"display_name":"do5"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":771,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1692954399,"creation_date":1635420288,"question_id":69753236,"body_markdown":"We have some integration tests(written using spring framework) that are failing due to **bean initialisation exception** which eventually leads to `Failed to load ApplicationContext` . As per my understanding from [spring testing docs](https://tiny.amazon.com/2xaq5veo) , the loading of `ApplicationContext`  happens at class level, so my doubt is - \r\n\r\n1. Once the `ApplicationContext`  fails (i.e. `Failed to load ApplicationContext`) due to **bean initialisation exception** during integration test class run, does the `ApplicationContext`  try to spin up again(will be failing eventually) for each individual integration tests present in that particular integration test class ? \r\n \r\n   1. Asking above scenario because we are seeing huge spike in number of connections to postgres when bean failure happens, it seems like for every integration test present(which eventually fails due to `Failed to load ApplicationContext`) in the integration test class, spring tries to create a new connection to postgres and doesn&#39;t destroy it before `ApplicationContext` failure. How can we stop this, please help with some suggestions.\r\n\r\n2. Also, once we get `Failed to load ApplicationContext`, is there a way to programmatically terminate the run of all the integration tests completely automatically ? If yes, please help how to achieve it ? \r\nThanks.\r\n\r\n**Testing framework - junit + Spring**\r\n\r\nUpdate: Mentioned testing framework used.","title":"Automatically terminate all integration tests if `Failed to load ApplicationContext` error occurs","body":"<p>We have some integration tests(written using spring framework) that are failing due to <strong>bean initialisation exception</strong> which eventually leads to <code>Failed to load ApplicationContext</code> . As per my understanding from <a href=\"https://tiny.amazon.com/2xaq5veo\" rel=\"nofollow noreferrer\">spring testing docs</a> , the loading of <code>ApplicationContext</code>  happens at class level, so my doubt is -</p>\n<ol>\n<li><p>Once the <code>ApplicationContext</code>  fails (i.e. <code>Failed to load ApplicationContext</code>) due to <strong>bean initialisation exception</strong> during integration test class run, does the <code>ApplicationContext</code>  try to spin up again(will be failing eventually) for each individual integration tests present in that particular integration test class ?</p>\n<ol>\n<li>Asking above scenario because we are seeing huge spike in number of connections to postgres when bean failure happens, it seems like for every integration test present(which eventually fails due to <code>Failed to load ApplicationContext</code>) in the integration test class, spring tries to create a new connection to postgres and doesn't destroy it before <code>ApplicationContext</code> failure. How can we stop this, please help with some suggestions.</li>\n</ol>\n</li>\n<li><p>Also, once we get <code>Failed to load ApplicationContext</code>, is there a way to programmatically terminate the run of all the integration tests completely automatically ? If yes, please help how to achieve it ?\nThanks.</p>\n</li>\n</ol>\n<p><strong>Testing framework - junit + Spring</strong></p>\n<p>Update: Mentioned testing framework used.</p>\n"},{"tags":["java","apache-poi"],"comments":[{"owner":{"account_id":5252988,"reputation":1450,"user_id":4196620,"display_name":"kendavidson"},"score":1,"creation_date":1620236430,"post_id":67405957,"comment_id":119143702,"body_markdown":"`http://poi.apache.org/apidocs/5.0/org/apache/poi/ss/usermodel/Cell.html#getColumnIndex--` looks like you need to be calling `getColumnIndex()` instead of `j` for the heading index.","body":"<code>http:&#47;&#47;poi.apache.org&#47;apidocs&#47;5.0&#47;org&#47;apache&#47;poi&#47;ss&#47;usermode&zwnj;&#8203;l&#47;Cell.html#getColum&zwnj;&#8203;nIndex--</code> looks like you need to be calling <code>getColumnIndex()</code> instead of <code>j</code> for the heading index."},{"owner":{"account_id":21098047,"reputation":9,"user_id":15508586,"display_name":"Huzefa Kazi"},"score":0,"creation_date":1620274018,"post_id":67405957,"comment_id":119153656,"body_markdown":"Thanks, you made my day, instead of hours of searching on net. dataMap.put(headerList.get(dataCell.getColumnIndex()), dataCell.getStringCellValue()); solved the issue.","body":"Thanks, you made my day, instead of hours of searching on net. dataMap.put(headerList.get(dataCell.getColumnIndex()), dataCell.getStringCellValue()); solved the issue."},{"owner":{"account_id":3504050,"reputation":125,"user_id":2930025,"display_name":"alaskanloops"},"score":0,"creation_date":1692743273,"post_id":67405957,"comment_id":135665566,"body_markdown":"@HuzefaKazi can you put that into an answer and accept it?","body":"@HuzefaKazi can you put that into an answer and accept it?"}],"answers":[{"tags":[],"owner":{"account_id":21098047,"reputation":9,"user_id":15508586,"display_name":"Huzefa Kazi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692954269,"creation_date":1692954269,"answer_id":76975754,"question_id":67405957,"body_markdown":"Problem resolved using by calling getColumnIndex()","title":"Require help on Java Logic for Reading Excel file and populating to HashMap","body":"<p>Problem resolved using by calling getColumnIndex()</p>\n"}],"owner":{"account_id":21098047,"reputation":9,"user_id":15508586,"display_name":"Huzefa Kazi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":170,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76975754,"answer_count":1,"score":1,"last_activity_date":1692954269,"creation_date":1620235196,"question_id":67405957,"body_markdown":"I am reading an excel data file from Java using apache POI API and populating an HashMap collection with excel Headers as Key and specified Row Data as Value of the Map. All Headers are always present but data corresponding to some headers may or may not be present.\r\n\r\nBelow is my code logic:\r\nFirst I populate all the headers to an ArrayList. \r\nThen I Iterate through the cells of the specified excel data row and I add the header value from the ArrayList, populated previously, and Data cell value from the row as key-value to an HashMap. \r\n\r\nBelow is my code:\r\n\r\n    ArrayList&lt;String&gt; headerList = new ArrayList&lt;String&gt;();\r\n    Map&lt;String, String&gt; dataMap = new LinkedHashMap&lt;String, String&gt;();\r\n    DateFormat df = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\r\n    \r\n    // Create object of XSSFWorkbook to get hold of excel file\r\n    FileInputStream fis = new FileInputStream(System.getProperty(&quot;user.dir&quot;) + &quot;\\\\Resources\\\\TestData.xlsx&quot;);\r\n    XSSFWorkbook workbook = new XSSFWorkbook(fis);\r\n    try\r\n    {\r\n    int noOfSheets = workbook.getNumberOfSheets();\r\n    for(int i=0; i&lt;noOfSheets; i++)\r\n    \t{\r\n    \t\t\r\n    \t\tif(workbook.getSheetName(i).equalsIgnoreCase(workSheet))\r\n    \t\t{\r\n    \t\t\t//Get access to sheet\r\n    \t\t\tXSSFSheet sheet = workbook.getSheetAt(i);\r\n    \t\t\t\r\n    \t\t\t//Get access to all rows of sheet\r\n    \t\t\tIterator&lt;Row&gt; rows = sheet.iterator();\r\n    \t\t\t\r\n    \t\t\tRow headerRow = rows.next();\r\n    \t\t\tIterator&lt;Cell&gt; headerCells = headerRow.cellIterator();\r\n    \t\t\twhile(headerCells.hasNext())\r\n    \t\t\t{\r\n    \t\t\t\theaderList.add(headerCells.next().getStringCellValue());\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\t// Get access to specific row\r\n    \t\t\twhile(rows.hasNext())\r\n    \t\t\t{\r\n    \t\t\t\tRow dataRow = rows.next();\r\n    \t\t\t\t\r\n    \t\t\t\tif(dataRow.getCell(0).getStringCellValue().equalsIgnoreCase(testCase))\r\n    \t\t\t\t{\r\n    \t\t\t\t\tint j = 0;\r\n    \t\t\t\t\t//Get access to collection of cells of the identified rows\r\n    \t\t\t\t\tIterator&lt;Cell&gt; dataCells = dataRow.cellIterator();\r\n    \t\t\t\t\t\r\n    \t\t\t\t\t//loop through all the cells of the row and add cell data to arraylist.\r\n    \t\t\t\t\twhile(dataCells.hasNext())\r\n    \t\t\t\t\t{\r\n    \t\t\t\t\t\tCell dataCell = dataCells.next();\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\r\n    \t\t\t\t\t\tif(dataCell.getCellType()==CellType.STRING)\r\n    \t\t\t\t\t\t{\t\r\n    \t\t\t\t\t\t\t//arrList.add(dataCell.getStringCellValue());\r\n    \t\t\t\t\t\t\tdataMap.put(headerList.get(j), dataCell.getStringCellValue());\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t\telse if(dataCell.getCellType()==CellType.NUMERIC)\r\n    \t\t\t\t\t\t{\t\r\n    \t\t\t\t\t\t\tif(DateUtil.isCellDateFormatted(dataCell))\r\n    \t\t\t\t\t\t\t{\r\n    \t\t\t\t\t\t\t\t//arrList.add(df.format(dataCell.getDateCellValue()));\r\n    \t\t\t\t\t\t\t\tdataMap.put(headerList.get(j), df.format(dataCell.getDateCellValue()));\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\telse\r\n    \t\t\t\t\t\t\t{\r\n    \t\t\t\t\t\t\t\t//arrList.add(NumberToTextConverter.toText(dataCell.getNumericCellValue()));\r\n    \t\t\t\t\t\t\t\tdataMap.put(headerList.get(j), NumberToTextConverter.toText(dataCell.getNumericCellValue()));\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t\telse if(dataCell.getCellType()==CellType.BOOLEAN)\r\n    \t\t\t\t\t\t{\t\r\n    \t\t\t\t\t\t\t//arrList.add(Boolean.toString(dataCell.getBooleanCellValue()));\r\n    \t\t\t\t\t\t\tdataMap.put(headerList.get(j), Boolean.toString(dataCell.getBooleanCellValue()));\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t\telse\r\n    \t\t\t\t\t\t\tdataMap.put(headerList.get(j), null);\r\n    \t\t\t\t\t\tj++;\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n\r\nIf there is no data in any cell then I do not want the corresponding header to be added in the Map. But when I iterate through the Data cells(dataCells.hasNext()), then the iterator does not return me null for that blank cell, instead it totally skips the Blank cell. So all headers are added but those cells where is no data are not added hence there is mismatch of Header-Data key-values. \r\n\r\nExample: If data cell of Column 5 is blank then, &quot;Value&quot; of the column 5 header is mapped with the value of Data Column 6 as &quot;Key-Value&quot; in the HashMap. What I want is column 5 header should be skipped being added to the Map when column 5 data is blank.  How do I resolve this logical mismatch issue?\r\n[Excel file screenshot][1]\r\n[Debug scenario screenshot][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8Qr4q.png\r\n  [2]: https://i.stack.imgur.com/9IO1u.png","title":"Require help on Java Logic for Reading Excel file and populating to HashMap","body":"<p>I am reading an excel data file from Java using apache POI API and populating an HashMap collection with excel Headers as Key and specified Row Data as Value of the Map. All Headers are always present but data corresponding to some headers may or may not be present.</p>\n<p>Below is my code logic:\nFirst I populate all the headers to an ArrayList.\nThen I Iterate through the cells of the specified excel data row and I add the header value from the ArrayList, populated previously, and Data cell value from the row as key-value to an HashMap.</p>\n<p>Below is my code:</p>\n<pre><code>ArrayList&lt;String&gt; headerList = new ArrayList&lt;String&gt;();\nMap&lt;String, String&gt; dataMap = new LinkedHashMap&lt;String, String&gt;();\nDateFormat df = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\n\n// Create object of XSSFWorkbook to get hold of excel file\nFileInputStream fis = new FileInputStream(System.getProperty(&quot;user.dir&quot;) + &quot;\\\\Resources\\\\TestData.xlsx&quot;);\nXSSFWorkbook workbook = new XSSFWorkbook(fis);\ntry\n{\nint noOfSheets = workbook.getNumberOfSheets();\nfor(int i=0; i&lt;noOfSheets; i++)\n    {\n        \n        if(workbook.getSheetName(i).equalsIgnoreCase(workSheet))\n        {\n            //Get access to sheet\n            XSSFSheet sheet = workbook.getSheetAt(i);\n            \n            //Get access to all rows of sheet\n            Iterator&lt;Row&gt; rows = sheet.iterator();\n            \n            Row headerRow = rows.next();\n            Iterator&lt;Cell&gt; headerCells = headerRow.cellIterator();\n            while(headerCells.hasNext())\n            {\n                headerList.add(headerCells.next().getStringCellValue());\n            }\n            \n            // Get access to specific row\n            while(rows.hasNext())\n            {\n                Row dataRow = rows.next();\n                \n                if(dataRow.getCell(0).getStringCellValue().equalsIgnoreCase(testCase))\n                {\n                    int j = 0;\n                    //Get access to collection of cells of the identified rows\n                    Iterator&lt;Cell&gt; dataCells = dataRow.cellIterator();\n                    \n                    //loop through all the cells of the row and add cell data to arraylist.\n                    while(dataCells.hasNext())\n                    {\n                        Cell dataCell = dataCells.next();\n                                                    \n                        if(dataCell.getCellType()==CellType.STRING)\n                        {   \n                            //arrList.add(dataCell.getStringCellValue());\n                            dataMap.put(headerList.get(j), dataCell.getStringCellValue());\n                        }\n                        else if(dataCell.getCellType()==CellType.NUMERIC)\n                        {   \n                            if(DateUtil.isCellDateFormatted(dataCell))\n                            {\n                                //arrList.add(df.format(dataCell.getDateCellValue()));\n                                dataMap.put(headerList.get(j), df.format(dataCell.getDateCellValue()));\n                            }\n                            else\n                            {\n                                //arrList.add(NumberToTextConverter.toText(dataCell.getNumericCellValue()));\n                                dataMap.put(headerList.get(j), NumberToTextConverter.toText(dataCell.getNumericCellValue()));\n                            }\n                        }\n                        else if(dataCell.getCellType()==CellType.BOOLEAN)\n                        {   \n                            //arrList.add(Boolean.toString(dataCell.getBooleanCellValue()));\n                            dataMap.put(headerList.get(j), Boolean.toString(dataCell.getBooleanCellValue()));\n                        }\n                        else\n                            dataMap.put(headerList.get(j), null);\n                        j++;\n                    }\n                }\n            }\n        }\n    }\n</code></pre>\n<p>If there is no data in any cell then I do not want the corresponding header to be added in the Map. But when I iterate through the Data cells(dataCells.hasNext()), then the iterator does not return me null for that blank cell, instead it totally skips the Blank cell. So all headers are added but those cells where is no data are not added hence there is mismatch of Header-Data key-values.</p>\n<p>Example: If data cell of Column 5 is blank then, &quot;Value&quot; of the column 5 header is mapped with the value of Data Column 6 as &quot;Key-Value&quot; in the HashMap. What I want is column 5 header should be skipped being added to the Map when column 5 data is blank.  How do I resolve this logical mismatch issue?\n<a href=\"https://i.stack.imgur.com/8Qr4q.png\" rel=\"nofollow noreferrer\">Excel file screenshot</a>\n<a href=\"https://i.stack.imgur.com/9IO1u.png\" rel=\"nofollow noreferrer\">Debug scenario screenshot</a></p>\n"},{"tags":["java","html","screen-scraping","jsoup"],"answers":[{"tags":[],"owner":{"account_id":79637,"reputation":10143,"user_id":225667,"accept_rate":94,"display_name":"Gopi"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1281623437,"creation_date":1281623437,"answer_id":3468770,"question_id":3468725,"body_markdown":"I dont think there would be any definitive way to achieve this. You can make a set of all possible keywords like &#39;press&#39;, &#39;release&#39; and &#39;pr&#39; etc and match the urls to find the keywords using regex etc. The correctness of this would depend on how comprehensive your set of keywords is.","title":"To identify links regarding the Press Release pages alone","body":"<p>I dont think there would be any definitive way to achieve this. You can make a set of all possible keywords like 'press', 'release' and 'pr' etc and match the urls to find the keywords using regex etc. The correctness of this would depend on how comprehensive your set of keywords is.</p>\n"},{"tags":[],"owner":{"account_id":61266,"reputation":39628,"user_id":182690,"accept_rate":94,"display_name":"Dean J"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1281623462,"creation_date":1281623462,"answer_id":3468771,"question_id":3468725,"body_markdown":"Look at the site today.  Cache to a file whatever links you saw.  Look at the site tomorrow; any new links are links to news articles, maybe?  You&#39;ll get incorrect results - once - any time they change the rest of the page around you.\r\n\r\nYou could, you know, just use the &lt;a href=&quot;http://images.apple.com/main/rss/hotnews/pr.rss&quot;&gt;RSS&lt;/a&gt; feed provided, which is designed to do exactly what you&#39;re asking for.","title":"To identify links regarding the Press Release pages alone","body":"<p>Look at the site today.  Cache to a file whatever links you saw.  Look at the site tomorrow; any new links are links to news articles, maybe?  You'll get incorrect results - once - any time they change the rest of the page around you.</p>\n\n<p>You could, you know, just use the <a href=\"http://images.apple.com/main/rss/hotnews/pr.rss\" rel=\"nofollow noreferrer\">RSS</a> feed provided, which is designed to do exactly what you're asking for.</p>\n"},{"tags":[],"owner":{"account_id":162132,"reputation":95999,"user_id":383402,"accept_rate":60,"display_name":"Borealid"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1281623501,"creation_date":1281623501,"answer_id":3468777,"question_id":3468725,"body_markdown":"You need to find some attribute which defines a &quot;press release link&quot;.  In the case of that site, pointing to &quot;/pr/library/&quot; indicates that it&#39;s an Apple press release.","title":"To identify links regarding the Press Release pages alone","body":"<p>You need to find some attribute which defines a \"press release link\".  In the case of that site, pointing to \"/pr/library/\" indicates that it's an Apple press release.</p>\n"},{"tags":[],"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1281726760,"creation_date":1281726760,"answer_id":3480030,"question_id":3468725,"body_markdown":"Look at the HTML source code. Open the page in a normal webbrowser, rightclick and choose *View Source*. You have to find a path in the HTML document tree to uniquely identify those links. \r\n\r\nThey are all housed in a `&lt;ul class=&quot;stories&quot;&gt;` element inside a `&lt;div id=&quot;releases&quot;&gt;` element. The appropriate CSS selector would then be `&quot;div#releases ul.stories a&quot;`.\r\n\r\nHere&#39;s how it should look like:\r\n\r\n    public static void main(String... args) throws Exception {\r\n        URL url = new URL(&quot;http://www.apple.com/pr/&quot;);\r\n        Document document = Jsoup.parse(url, 3000);\r\n        for (Element element : document.select(&quot;div#releases ul.stories a&quot;)) {\r\n            System.out.println(element.attr(&quot;href&quot;));\r\n        }\r\n    }\r\n\r\nThis yields as of now, exactly what you want:\r\n\r\n&lt;pre&gt;\r\n/pr/library/2010/07/28safari.html\r\n/pr/library/2010/07/27imac.html\r\n/pr/library/2010/07/27macpro.html\r\n/pr/library/2010/07/27display.html\r\n/pr/library/2010/07/26iphone.html\r\n/pr/library/2010/07/23iphonestatement.html\r\n/pr/library/2010/07/20results.html\r\n/pr/library/2010/07/19ipad.html\r\n/pr/library/2010/07/19alert_results.html\r\n/pr/library/2010/07/02appleletter.html\r\n/pr/library/2010/06/28iphone.html\r\n/pr/library/2010/06/23iphonestatement.html\r\n/pr/library/2010/06/22ipad.html\r\n/pr/library/2010/06/16iphone.html\r\n/pr/library/2010/06/15applestoreapp.html\r\n/pr/library/2010/06/15macmini.html\r\n/pr/library/2010/06/07iphone.html\r\n/pr/library/2010/06/07iads.html\r\n/pr/library/2010/06/07safari.html\r\n&lt;/pre&gt;\r\n\r\nTo learn more about CSS selectors, read the [Jsoup manual][1] and the [W3 CSS selector spec][2].\r\n\r\n\r\n  [1]: http://jsoup.org/cookbook/extracting-data/selector-syntax\r\n  [2]: http://www.w3.org/TR/CSS2/selector.html","title":"To identify links regarding the Press Release pages alone","body":"<p>Look at the HTML source code. Open the page in a normal webbrowser, rightclick and choose <em>View Source</em>. You have to find a path in the HTML document tree to uniquely identify those links. </p>\n\n<p>They are all housed in a <code>&lt;ul class=\"stories\"&gt;</code> element inside a <code>&lt;div id=\"releases\"&gt;</code> element. The appropriate CSS selector would then be <code>\"div#releases ul.stories a\"</code>.</p>\n\n<p>Here's how it should look like:</p>\n\n<pre><code>public static void main(String... args) throws Exception {\n    URL url = new URL(\"http://www.apple.com/pr/\");\n    Document document = Jsoup.parse(url, 3000);\n    for (Element element : document.select(\"div#releases ul.stories a\")) {\n        System.out.println(element.attr(\"href\"));\n    }\n}\n</code></pre>\n\n<p>This yields as of now, exactly what you want:</p>\n\n<pre>\n/pr/library/2010/07/28safari.html\n/pr/library/2010/07/27imac.html\n/pr/library/2010/07/27macpro.html\n/pr/library/2010/07/27display.html\n/pr/library/2010/07/26iphone.html\n/pr/library/2010/07/23iphonestatement.html\n/pr/library/2010/07/20results.html\n/pr/library/2010/07/19ipad.html\n/pr/library/2010/07/19alert_results.html\n/pr/library/2010/07/02appleletter.html\n/pr/library/2010/06/28iphone.html\n/pr/library/2010/06/23iphonestatement.html\n/pr/library/2010/06/22ipad.html\n/pr/library/2010/06/16iphone.html\n/pr/library/2010/06/15applestoreapp.html\n/pr/library/2010/06/15macmini.html\n/pr/library/2010/06/07iphone.html\n/pr/library/2010/06/07iads.html\n/pr/library/2010/06/07safari.html\n</pre>\n\n<p>To learn more about CSS selectors, read the <a href=\"http://jsoup.org/cookbook/extracting-data/selector-syntax\" rel=\"nofollow noreferrer\">Jsoup manual</a> and the <a href=\"http://www.w3.org/TR/CSS2/selector.html\" rel=\"nofollow noreferrer\">W3 CSS selector spec</a>.</p>\n"}],"owner":{"account_id":173381,"reputation":2385,"user_id":402011,"accept_rate":96,"display_name":"LGAP"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":176,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":3480030,"answer_count":4,"score":0,"last_activity_date":1692954234,"creation_date":1281623163,"question_id":3468725,"body_markdown":"My task is to find the actual Press release links of a given link.                        Say http://www.apple.com/pr/ for example.\r\n\r\nMy tool has to find the press release links alone from the above URL excluding other advertisement links, tab links(or whatever) that are found in that site.\r\n\r\nThe program below is developed and the result this gives is, all the links that are present in the given webpage.\r\n\r\nHow can I modify the below program to find the Press Release links alone from a given URL?\r\nAlso, I want the program to be generic so that it identifies press release links from any press release URLs if given.\r\n\r\n\r\n    import java.io.*;\r\n    import java.net.URL;\r\n    import java.net.URLConnection;\r\n    import java.sql.*;\r\n    import org.jsoup.nodes.Document;\r\n    import org.jsoup.Jsoup;\r\n    import org.jsoup.nodes.Element;\t\r\n    public class linksfind{\r\n    public static void main(String[] args) {\r\n\t    try{\r\n\t         URL url = new URL(&quot;http://www.apple.com/pr/&quot;);\r\n\t         Document document = Jsoup.parse(url, 1000); // Can also take an URL.\r\n\t         for (Element element : document.getElementsByTag(&quot;a&quot;)) {\r\n    \t         System.out.println(element.attr(&quot;href&quot;));}\r\n    \t         }catch (Exception ex){ex.printStackTrace();}\r\n    }\r\n    }","title":"To identify links regarding the Press Release pages alone","body":"<p>My task is to find the actual Press release links of a given link.                        Say <a href=\"http://www.apple.com/pr/\" rel=\"nofollow noreferrer\">http://www.apple.com/pr/</a> for example.</p>\n\n<p>My tool has to find the press release links alone from the above URL excluding other advertisement links, tab links(or whatever) that are found in that site.</p>\n\n<p>The program below is developed and the result this gives is, all the links that are present in the given webpage.</p>\n\n<p>How can I modify the below program to find the Press Release links alone from a given URL?\nAlso, I want the program to be generic so that it identifies press release links from any press release URLs if given.</p>\n\n<pre><code>import java.io.*;\nimport java.net.URL;\nimport java.net.URLConnection;\nimport java.sql.*;\nimport org.jsoup.nodes.Document;\nimport org.jsoup.Jsoup;\nimport org.jsoup.nodes.Element; \npublic class linksfind{\npublic static void main(String[] args) {\n    try{\n         URL url = new URL(\"http://www.apple.com/pr/\");\n         Document document = Jsoup.parse(url, 1000); // Can also take an URL.\n         for (Element element : document.getElementsByTag(\"a\")) {\n             System.out.println(element.attr(\"href\"));}\n             }catch (Exception ex){ex.printStackTrace();}\n}\n}\n</code></pre>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":10481421,"reputation":1559,"user_id":7726319,"accept_rate":0,"display_name":"Prog_G"},"score":0,"creation_date":1692943031,"post_id":76974451,"comment_id":135695748,"body_markdown":"Can you add `Program` and `SubProgram` entity class?","body":"Can you add <code>Program</code> and <code>SubProgram</code> entity class?"},{"owner":{"account_id":29104131,"reputation":25,"user_id":22295330,"display_name":"Iswarya Elango"},"score":0,"creation_date":1692944044,"post_id":76974451,"comment_id":135695890,"body_markdown":"@Prog_G Added Program and SubProgram entity class","body":"@Prog_G Added Program and SubProgram entity class"},{"owner":{"account_id":29104131,"reputation":25,"user_id":22295330,"display_name":"Iswarya Elango"},"score":0,"creation_date":1692950755,"post_id":76974451,"comment_id":135697151,"body_markdown":"Working if I use EntityGraph. Thanks","body":"Working if I use EntityGraph. Thanks"}],"answers":[{"tags":[],"owner":{"account_id":10481421,"reputation":1559,"user_id":7726319,"accept_rate":0,"display_name":"Prog_G"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1692946805,"creation_date":1692946805,"answer_id":76974938,"question_id":76974451,"body_markdown":"You can try using `FETCH` to get the related entities in a single JPA Query.\r\n\r\nTry the below `JPA` Query:\r\n\r\n    @Query(&quot;select distinct p from Program p INNER JOIN FETCH p.subprogram s where p.status = &#39;Active&#39; and s.subprogramStatus = &#39;Active&#39;&quot;)\r\n    List&lt;Program&gt; findActiveProgramAndSubprogram();\r\n\r\nTo know how INNER JOIN FETCH works read [this][1].\r\n\r\n\r\n  [1]: https://www.logicbig.com/tutorials/java-ee-tutorial/jpa/fetch-join.html","title":"Native Join query in springboot data JPA","body":"<p>You can try using <code>FETCH</code> to get the related entities in a single JPA Query.</p>\n<p>Try the below <code>JPA</code> Query:</p>\n<pre><code>@Query(&quot;select distinct p from Program p INNER JOIN FETCH p.subprogram s where p.status = 'Active' and s.subprogramStatus = 'Active'&quot;)\nList&lt;Program&gt; findActiveProgramAndSubprogram();\n</code></pre>\n<p>To know how INNER JOIN FETCH works read <a href=\"https://www.logicbig.com/tutorials/java-ee-tutorial/jpa/fetch-join.html\" rel=\"nofollow noreferrer\">this</a>.</p>\n"}],"owner":{"account_id":29104131,"reputation":25,"user_id":22295330,"display_name":"Iswarya Elango"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76974938,"answer_count":1,"score":0,"last_activity_date":1692954079,"creation_date":1692941071,"question_id":76974451,"body_markdown":"I am using the native inner join query in Springboot JPA, and what I have observed is that it is executing two queries, one for the parent and another for the child. Why is it so? Is it possible to execute only the defined native query?\r\n    \r\n    \r\n   In the query, I have added the condition for the child table, but when it is executing the second query for the child, in the condition I can only see programid, it does not include s.status=&#39;Active&#39;. I want to get the parent records whose status is active and the corresponding child records whose status is active, but here I am getting active parent records and active and inactive child records.\r\n    \r\n   Program is a parent entity, and a subprogram is a child entity that has one-to-many relationships.\r\n    \r\n    \r\n    \r\n    \r\n        @Query(&quot;select&#160; * from program p inner join subprogram s on p.programid=s.programid and s.status=&#39;Active&#39; where p.status=&#39;Active&#39; order by lower(p.programname),lower(s.programname),nativeQuery=true)\r\n        \r\n        public List&lt;Program&gt; findActiveProgramAndSubprogram();\r\n    \r\n    \r\n    @Getter\r\n    @Setter\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Entity\r\n    @Table(name=&quot;program&quot;)\r\n    public class Program{\r\n    \r\n    @Id\r\n    @GeneratedValue(strategy=GenerationType.IDENTITY)\r\n    @Column(name=&quot;PROGRAMID&quot;)\r\n    private String programId;\r\n    \r\n    @Column(name=&quot;PROGRAMNAME&quot;)\r\n    private String programName;\r\n    \r\n    @Column(name=&quot;STATUS&quot;)\r\n    private String status\r\n    \r\n    @OneToMany(mappedBy=&quot;program&quot;, cascade=CascadeType.ALL,fetch=FectchType.EAGER)\r\n    private List&lt;Subprogram&gt; subprogram=new ArrayList&lt;&gt;();\r\n    }\r\n    \r\n    \r\n    @Getter\r\n    @Setter\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Entity\r\n    @Table(name=&quot;subprogram&quot;)\r\n    public class Subprogram{\r\n    \r\n    @Id\r\n    @GeneratedValue(strategy=GenerationType.IDENTITY)\r\n    @Column(name=&quot;SUBPROGRAMID&quot;)\r\n    private String subprogramId;\r\n    \r\n    @Column(name=&quot;SUBPROGRAMNAME&quot;)\r\n    private String subprogramName;\r\n    \r\n    @Column(name=&quot;STATUS&quot;)\r\n    private String subprogramStatus\r\n    \r\n    @SkipGsonSerialization\r\n    @ManyToOne(fetch=FectchType.LAZY)\r\n    @JoinColumn(name=&quot;PROGRAMID&quot;)\r\n    private Program program;\r\n    }","title":"Native Join query in springboot data JPA","body":"<p>I am using the native inner join query in Springboot JPA, and what I have observed is that it is executing two queries, one for the parent and another for the child. Why is it so? Is it possible to execute only the defined native query?</p>\n<p>In the query, I have added the condition for the child table, but when it is executing the second query for the child, in the condition I can only see programid, it does not include s.status='Active'. I want to get the parent records whose status is active and the corresponding child records whose status is active, but here I am getting active parent records and active and inactive child records.</p>\n<p>Program is a parent entity, and a subprogram is a child entity that has one-to-many relationships.</p>\n<pre><code>    @Query(&quot;select  * from program p inner join subprogram s on p.programid=s.programid and s.status='Active' where p.status='Active' order by lower(p.programname),lower(s.programname),nativeQuery=true)\n    \n    public List&lt;Program&gt; findActiveProgramAndSubprogram();\n\n\n@Getter\n@Setter\n@AllArgsConstructor\n@NoArgsConstructor\n@Entity\n@Table(name=&quot;program&quot;)\npublic class Program{\n\n@Id\n@GeneratedValue(strategy=GenerationType.IDENTITY)\n@Column(name=&quot;PROGRAMID&quot;)\nprivate String programId;\n\n@Column(name=&quot;PROGRAMNAME&quot;)\nprivate String programName;\n\n@Column(name=&quot;STATUS&quot;)\nprivate String status\n\n@OneToMany(mappedBy=&quot;program&quot;, cascade=CascadeType.ALL,fetch=FectchType.EAGER)\nprivate List&lt;Subprogram&gt; subprogram=new ArrayList&lt;&gt;();\n}\n\n\n@Getter\n@Setter\n@AllArgsConstructor\n@NoArgsConstructor\n@Entity\n@Table(name=&quot;subprogram&quot;)\npublic class Subprogram{\n\n@Id\n@GeneratedValue(strategy=GenerationType.IDENTITY)\n@Column(name=&quot;SUBPROGRAMID&quot;)\nprivate String subprogramId;\n\n@Column(name=&quot;SUBPROGRAMNAME&quot;)\nprivate String subprogramName;\n\n@Column(name=&quot;STATUS&quot;)\nprivate String subprogramStatus\n\n@SkipGsonSerialization\n@ManyToOne(fetch=FectchType.LAZY)\n@JoinColumn(name=&quot;PROGRAMID&quot;)\nprivate Program program;\n}\n</code></pre>\n"},{"tags":["java","spring-boot","spring-security","spring-oauth2"],"comments":[{"owner":{"account_id":9427779,"reputation":336,"user_id":7012221,"display_name":"Abhishek"},"score":0,"creation_date":1686387420,"post_id":76315238,"comment_id":134794237,"body_markdown":"check the https://stackoverflow.com/questions/69721548/postman-returning-html-login-page-with-keycloak/76325276#76325276","body":"check the <a href=\"https://stackoverflow.com/questions/69721548/postman-returning-html-login-page-with-keycloak/76325276#76325276\" title=\"postman returning html login page with keycloak\">stackoverflow.com/questions/69721548/&hellip;</a>"},{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1692523256,"post_id":76315238,"comment_id":135632652,"body_markdown":"[spring-security-oauth-reaches-end-of-life](https://spring.io/blog/2022/06/01/spring-security-oauth-reaches-end-of-life)","body":"<a href=\"https://spring.io/blog/2022/06/01/spring-security-oauth-reaches-end-of-life\" rel=\"nofollow noreferrer\">spring-security-oauth-reaches-end-of-life</a>"},{"owner":{"account_id":965625,"reputation":1524,"user_id":1103606,"accept_rate":51,"display_name":"Peter Penzov"},"score":0,"creation_date":1692523415,"post_id":76315238,"comment_id":135632673,"body_markdown":"@AndreiLisa yes I&#39;m aware of that. The question is how to migrate the code.","body":"@AndreiLisa yes I&#39;m aware of that. The question is how to migrate the code."},{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1692523678,"post_id":76315238,"comment_id":135632696,"body_markdown":"do you have an authorization-server like Keycloak or your own auth-server ?","body":"do you have an authorization-server like Keycloak or your own auth-server ?"},{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1692523815,"post_id":76315238,"comment_id":135632710,"body_markdown":"and also,did  you checked it [OAuth-2.0-Migration-Guide](https://github.com/spring-projects/spring-security/wiki/OAuth-2.0-Migration-Guide) ?","body":"and also,did  you checked it <a href=\"https://github.com/spring-projects/spring-security/wiki/OAuth-2.0-Migration-Guide\" rel=\"nofollow noreferrer\">OAuth-2.0-Migration-Guide</a> ?"},{"owner":{"account_id":965625,"reputation":1524,"user_id":1103606,"accept_rate":51,"display_name":"Peter Penzov"},"score":0,"creation_date":1692524179,"post_id":76315238,"comment_id":135632735,"body_markdown":"yes, but its not clear to me how to properly migrate the code.","body":"yes, but its not clear to me how to properly migrate the code."},{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1692524544,"post_id":76315238,"comment_id":135632772,"body_markdown":"how i saw, in your case you should replace this all with spring-boot resource server part, do you have an authorization server instance  ?","body":"how i saw, in your case you should replace this all with spring-boot resource server part, do you have an authorization server instance  ?"},{"owner":{"account_id":965625,"reputation":1524,"user_id":1103606,"accept_rate":51,"display_name":"Peter Penzov"},"score":0,"creation_date":1692525106,"post_id":76315238,"comment_id":135632824,"body_markdown":"I&#39;m going to use Keycloak server.","body":"I&#39;m going to use Keycloak server."},{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1692525391,"post_id":76315238,"comment_id":135632862,"body_markdown":"ok, i will provide a simple example how to migrate your code to spring-boot resource server side, that will work with keycloak","body":"ok, i will provide a simple example how to migrate your code to spring-boot resource server side, that will work with keycloak"},{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1692525452,"post_id":76315238,"comment_id":135632872,"body_markdown":"one more question, do you will use latest(3.1.x) spring-boot-security-starter ?","body":"one more question, do you will use latest(3.1.x) spring-boot-security-starter ?"},{"owner":{"account_id":965625,"reputation":1524,"user_id":1103606,"accept_rate":51,"display_name":"Peter Penzov"},"score":0,"creation_date":1692525550,"post_id":76315238,"comment_id":135632881,"body_markdown":"yes.  If this is the appropriate package?","body":"yes.  If this is the appropriate package?"},{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1692527453,"post_id":76315238,"comment_id":135633045,"body_markdown":"yes is the latest one now","body":"yes is the latest one now"},{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1692530221,"post_id":76315238,"comment_id":135633306,"body_markdown":"I gave an answer, can you try it ?","body":"I gave an answer, can you try it ?"},{"owner":{"account_id":965625,"reputation":1524,"user_id":1103606,"accept_rate":51,"display_name":"Peter Penzov"},"score":1,"creation_date":1692531634,"post_id":76315238,"comment_id":135633436,"body_markdown":"Sure, today/tomorrow I will test it very carefully.","body":"Sure, today/tomorrow I will test it very carefully."}],"answers":[{"tags":[],"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1692555403,"creation_date":1692527417,"answer_id":76938976,"question_id":76315238,"body_markdown":"How in official documentation was descried that [spring-security-oauth-reaches-end-of-life][1]\r\n\r\nAnd also how we discussed in comments, you will have an authorization-server [Keycloak][2] as Identity Provider with oAuth2.0 and Oidc connect. \r\n\r\nYour migration code will have next steps:\r\n\r\nReplace current one with [Resource-server][3] in your case with JWT as Bearer Token\r\n\r\n**Gradle/Maven configuration:**\r\n\r\nGradle:\r\n\r\n\r\n      implementation group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-starter-security&#39;, version: &#39;3.1.2&#39;\r\n\r\n      implementation group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-starter-oauth2-resource-server&#39;, version: &#39;3.1.2&#39;\r\n\r\nMaven:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n        &lt;version&gt;3.1.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;\r\n        &lt;version&gt;3.1.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nIn application.yml file you should provide next ones paths:\r\n\r\n    spring:\r\n      security:\r\n        oauth2:\r\n          resourceserver:\r\n            jwt:\r\n              issuer-uri: \r\n              jwk-set-uri: \r\nThis values you will find out to : **/.well-known/openid-configuration** path on Keycloak side.\r\n\r\nWhere you security config layer will look so:\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class WebSecurityConfig {\r\n    \r\n         \r\n      @Bean\r\n      public AuthenticationManager authenticationManager(\r\n          AuthenticationConfiguration authenticationConfiguration) throws Exception {\r\n        return authenticationConfiguration.getAuthenticationManager();\r\n      }\r\n    \r\n      @Bean\r\n      public SecurityFilterChain securityFilterChain(HttpSecurity request) throws Exception {\r\n    \r\n        request.cors(corsConfigurer -&gt; corsConfigurer.configurationSource(yourCustomCorsConfiguration))\r\n            .csrf(AbstractHttpConfigurer::disable);\r\n    \r\n        request.headers(http -&gt; http.frameOptions(FrameOptionsConfig::sameOrigin));\r\n        request.sessionManagement(sessionAuthenticationStrategy -&gt;\r\n            sessionAuthenticationStrategy.sessionCreationPolicy(SessionCreationPolicy.STATELESS));\r\n    \r\n        request.authorizeHttpRequests(requestMatcherRegistry -&gt; {\r\n    \r\n          requestMatcherRegistry.anyRequest().authenticated();\r\n        });\r\n    \r\n        request.oauth2ResourceServer(httpSecurityOAuth2ResourceServerConfigurer -&gt;\r\n                httpSecurityOAuth2ResourceServerConfigurer.jwt(\r\n                    token -&gt; token.jwtAuthenticationConverter(myConverter())));\r\n    \r\n        return request.build();\r\n      }\r\n    \r\n    @Bean\r\n    public JwtDecoder jwtDecoder() {\r\n        return NimbusJwtDecoder.withJwkSetUri(jwkSetUri).build();\r\n    }\r\n    \r\n    }\r\n\r\n\r\nAnd also you should to have a look to [oauth2-client][4],  [spring-authorization-server][5]\r\n\r\n\r\n  [1]: https://spring.io/blog/2022/06/01/spring-security-oauth-reaches-end-of-life\r\n  [2]: https://www.keycloak.org/\r\n  [3]: https://docs.spring.io/spring-security/reference/servlet/oauth2/resource-server/index.html\r\n  [4]: https://docs.spring.io/spring-security/reference/reactive/oauth2/client/index.html\r\n  [5]: https://docs.spring.io/spring-authorization-server/docs/current/reference/html/getting-started.html","title":"Migrate Spring Security configuration to Spring Cloud 2022.0.4","body":"<p>How in official documentation was descried that <a href=\"https://spring.io/blog/2022/06/01/spring-security-oauth-reaches-end-of-life\" rel=\"nofollow noreferrer\">spring-security-oauth-reaches-end-of-life</a></p>\n<p>And also how we discussed in comments, you will have an authorization-server <a href=\"https://www.keycloak.org/\" rel=\"nofollow noreferrer\">Keycloak</a> as Identity Provider with oAuth2.0 and Oidc connect.</p>\n<p>Your migration code will have next steps:</p>\n<p>Replace current one with <a href=\"https://docs.spring.io/spring-security/reference/servlet/oauth2/resource-server/index.html\" rel=\"nofollow noreferrer\">Resource-server</a> in your case with JWT as Bearer Token</p>\n<p><strong>Gradle/Maven configuration:</strong></p>\n<p>Gradle:</p>\n<pre><code>  implementation group: 'org.springframework.boot', name: 'spring-boot-starter-security', version: '3.1.2'\n\n  implementation group: 'org.springframework.boot', name: 'spring-boot-starter-oauth2-resource-server', version: '3.1.2'\n</code></pre>\n<p>Maven:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n    &lt;version&gt;3.1.2&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;\n    &lt;version&gt;3.1.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>In application.yml file you should provide next ones paths:</p>\n<pre><code>spring:\n  security:\n    oauth2:\n      resourceserver:\n        jwt:\n          issuer-uri: \n          jwk-set-uri: \n</code></pre>\n<p>This values you will find out to : <strong>/.well-known/openid-configuration</strong> path on Keycloak side.</p>\n<p>Where you security config layer will look so:</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class WebSecurityConfig {\n\n     \n  @Bean\n  public AuthenticationManager authenticationManager(\n      AuthenticationConfiguration authenticationConfiguration) throws Exception {\n    return authenticationConfiguration.getAuthenticationManager();\n  }\n\n  @Bean\n  public SecurityFilterChain securityFilterChain(HttpSecurity request) throws Exception {\n\n    request.cors(corsConfigurer -&gt; corsConfigurer.configurationSource(yourCustomCorsConfiguration))\n        .csrf(AbstractHttpConfigurer::disable);\n\n    request.headers(http -&gt; http.frameOptions(FrameOptionsConfig::sameOrigin));\n    request.sessionManagement(sessionAuthenticationStrategy -&gt;\n        sessionAuthenticationStrategy.sessionCreationPolicy(SessionCreationPolicy.STATELESS));\n\n    request.authorizeHttpRequests(requestMatcherRegistry -&gt; {\n\n      requestMatcherRegistry.anyRequest().authenticated();\n    });\n\n    request.oauth2ResourceServer(httpSecurityOAuth2ResourceServerConfigurer -&gt;\n            httpSecurityOAuth2ResourceServerConfigurer.jwt(\n                token -&gt; token.jwtAuthenticationConverter(myConverter())));\n\n    return request.build();\n  }\n\n@Bean\npublic JwtDecoder jwtDecoder() {\n    return NimbusJwtDecoder.withJwkSetUri(jwkSetUri).build();\n}\n\n}\n</code></pre>\n<p>And also you should to have a look to <a href=\"https://docs.spring.io/spring-security/reference/reactive/oauth2/client/index.html\" rel=\"nofollow noreferrer\">oauth2-client</a>,  <a href=\"https://docs.spring.io/spring-authorization-server/docs/current/reference/html/getting-started.html\" rel=\"nofollow noreferrer\">spring-authorization-server</a></p>\n"},{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1692641852,"creation_date":1692558181,"answer_id":76940928,"question_id":76315238,"body_markdown":"# Reactive or Servlet?\r\nFirst thing to check is if the application to secure is reactive or a servlet. Spring Security implementations to use are not the same (`SecurityWebFilterChain` in reactive applications VS `SecurityFilterChain` in servlets and each depend on different components).\r\n\r\n`spring-cloud-gateway` for instance is a reactive application and requires reactive Security beans. So, you should check your project(s) dependencies (and transient dependencies) to see if you have `spring-boot-starter-web` (servlet) or `spring-boot-starter-webflux` (reactive apps) on your classpath.\r\n\r\n# Configuring a resource server\r\nThe easiest way to configure a resource server is using `spring-addons-starter-oidc`, [a starter I wrote][1], in addition to `spring-boot-starter-resource-server`:\r\n```xml\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;com.c4-soft.springaddons&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-addons-starter-oidc&lt;/artifactId&gt;\r\n\t&lt;version&gt;7.1.3&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n```java\r\n// @EnableMethodSecurity is optional, required only if you use `@PreAuthorize`, `@PostFilter` and alike\r\n// In a reactive application, use @EnableReactiveMethodSecurity instead\r\n@EnableMethodSecurity\r\n@Configuration\r\npublic class SecurityConfig {\r\n}\r\n```\r\n```yaml\r\nscheme: http\r\norigins: ${scheme}://localhost:4200\r\nkeycloak-port: 8442\r\nkeycloak-issuer: ${scheme}://localhost:${keycloak-port}/realms/master\r\n\r\ncom:\r\n  c4-soft:\r\n    springaddons:\r\n      oidc:\r\n        ops:\r\n        # You can add as many OpenID providers as you trust (Keycloak realms or instances, or even other providers like Auth0, Cognito, etc.)\r\n        - iss: ${keycloak-issuer}\r\n          # this is optional: use &quot;preferred_username&quot; claim (rather than &quot;sub&quot;) to set Authentication &quot;name&quot;\r\n          username-claim: preferred_username\r\n          # you can add as any many JSON path as you want to use as Spring Authorities source\r\n          # you may also define a prefix to add or transformation to uppercase for each\r\n          authorities:\r\n          - path: $.realm_access.roles\r\n          - path: $.resource_access.*.roles\r\n        resourceserver:\r\n          # the path matchers below determine what is accessible to anonymous requests\r\n          # requests not matched must be authorized\r\n          permit-all:\r\n          - &quot;/public/**&quot;\r\n          - &quot;/actuator/health/readiness&quot;\r\n          - &quot;/actuator/health/liveness&quot;\r\n          - &quot;/v3/api-docs/**&quot;\r\n          # Fine grained CORS configuration from properties (you can change allowed origins for each environment by just setting a configuration property)\r\n          cors:\r\n          - path: /**\r\n            allowed-origin-patterns: ${origins}\r\n```\r\nIf you don&#39;t want to use &quot;my&quot; starter, then you&#39;ll have much more Java code to write, and this Java code will depend on your app being a servlet or a reactive application. More on that in [my tutorials][2] and in an answer I posted [there][3].\r\n\r\n# Consider configuring gateway as an OAuth2 client\r\nWe have little to no information about the &quot;cloud apps&quot; you want to configure, but if you are configuring a `spring-cloud-gateway` instance in front of Javascript based applications (Angular, React, Vue, etc.), you should consider:\r\n- configuring the gateway as an OAuth2 client (with `oauth2Login`) and  with `TokenRelay=` filter\r\n- configuring downstream REST APIs as resource servers\r\n- removing anything related to OAuth2 from upstream Javascript based applications (it will be secured with sessions)\r\n\r\nThis is called the BFF pattern and is safer than using using public clients (a client in a browser or mobile application can&#39;t keep a secret) where tokens are exposed to Javascript code (session cookie can be flagged with same-site, http-only, and be exchanged with SSL only).\r\n\r\nYou might configure some routes without security at all for upstream applications which are OAuth2 clients. I have a tutorial for `spring-cloud-gateway` configured as BFF on some routes (for an Angular app) and with `permitAll` (and no token relay) [there][4].\r\n\r\nLast, configuring a gateway as a resource server to centralize security rules is a bad pattern to me:\r\n- the service itself is not secured (or access rules are doubled which brings the usual code duplication issues)\r\n- it requires tight coupling with downstream services implementation (need to know a minimum of routes details and maybe resources structures when access rule involves the resource itself)\r\n- it makes it pretty hard to unit test access rules (it&#39;s an [easy task on the REST API itself][5] when it is configured as a resource server)\r\n\r\n\r\n  [1]: https://github.com/ch4mpy/spring-addons\r\n  [2]: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials#oauth_essentials\r\n  [3]: https://stackoverflow.com/questions/74571191/use-keycloak-spring-adapter-with-spring-boot-3/74572732#74572732\r\n  [4]: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/bff\r\n  [5]: https://github.com/ch4mpy/spring-addons/tree/master#unit-tests","title":"Migrate Spring Security configuration to Spring Cloud 2022.0.4","body":"<h1>Reactive or Servlet?</h1>\n<p>First thing to check is if the application to secure is reactive or a servlet. Spring Security implementations to use are not the same (<code>SecurityWebFilterChain</code> in reactive applications VS <code>SecurityFilterChain</code> in servlets and each depend on different components).</p>\n<p><code>spring-cloud-gateway</code> for instance is a reactive application and requires reactive Security beans. So, you should check your project(s) dependencies (and transient dependencies) to see if you have <code>spring-boot-starter-web</code> (servlet) or <code>spring-boot-starter-webflux</code> (reactive apps) on your classpath.</p>\n<h1>Configuring a resource server</h1>\n<p>The easiest way to configure a resource server is using <code>spring-addons-starter-oidc</code>, <a href=\"https://github.com/ch4mpy/spring-addons\" rel=\"nofollow noreferrer\">a starter I wrote</a>, in addition to <code>spring-boot-starter-resource-server</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.c4-soft.springaddons&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-addons-starter-oidc&lt;/artifactId&gt;\n    &lt;version&gt;7.1.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>// @EnableMethodSecurity is optional, required only if you use `@PreAuthorize`, `@PostFilter` and alike\n// In a reactive application, use @EnableReactiveMethodSecurity instead\n@EnableMethodSecurity\n@Configuration\npublic class SecurityConfig {\n}\n</code></pre>\n<pre class=\"lang-yaml prettyprint-override\"><code>scheme: http\norigins: ${scheme}://localhost:4200\nkeycloak-port: 8442\nkeycloak-issuer: ${scheme}://localhost:${keycloak-port}/realms/master\n\ncom:\n  c4-soft:\n    springaddons:\n      oidc:\n        ops:\n        # You can add as many OpenID providers as you trust (Keycloak realms or instances, or even other providers like Auth0, Cognito, etc.)\n        - iss: ${keycloak-issuer}\n          # this is optional: use &quot;preferred_username&quot; claim (rather than &quot;sub&quot;) to set Authentication &quot;name&quot;\n          username-claim: preferred_username\n          # you can add as any many JSON path as you want to use as Spring Authorities source\n          # you may also define a prefix to add or transformation to uppercase for each\n          authorities:\n          - path: $.realm_access.roles\n          - path: $.resource_access.*.roles\n        resourceserver:\n          # the path matchers below determine what is accessible to anonymous requests\n          # requests not matched must be authorized\n          permit-all:\n          - &quot;/public/**&quot;\n          - &quot;/actuator/health/readiness&quot;\n          - &quot;/actuator/health/liveness&quot;\n          - &quot;/v3/api-docs/**&quot;\n          # Fine grained CORS configuration from properties (you can change allowed origins for each environment by just setting a configuration property)\n          cors:\n          - path: /**\n            allowed-origin-patterns: ${origins}\n</code></pre>\n<p>If you don't want to use &quot;my&quot; starter, then you'll have much more Java code to write, and this Java code will depend on your app being a servlet or a reactive application. More on that in <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials#oauth_essentials\" rel=\"nofollow noreferrer\">my tutorials</a> and in an answer I posted <a href=\"https://stackoverflow.com/questions/74571191/use-keycloak-spring-adapter-with-spring-boot-3/74572732#74572732\">there</a>.</p>\n<h1>Consider configuring gateway as an OAuth2 client</h1>\n<p>We have little to no information about the &quot;cloud apps&quot; you want to configure, but if you are configuring a <code>spring-cloud-gateway</code> instance in front of Javascript based applications (Angular, React, Vue, etc.), you should consider:</p>\n<ul>\n<li>configuring the gateway as an OAuth2 client (with <code>oauth2Login</code>) and  with <code>TokenRelay=</code> filter</li>\n<li>configuring downstream REST APIs as resource servers</li>\n<li>removing anything related to OAuth2 from upstream Javascript based applications (it will be secured with sessions)</li>\n</ul>\n<p>This is called the BFF pattern and is safer than using using public clients (a client in a browser or mobile application can't keep a secret) where tokens are exposed to Javascript code (session cookie can be flagged with same-site, http-only, and be exchanged with SSL only).</p>\n<p>You might configure some routes without security at all for upstream applications which are OAuth2 clients. I have a tutorial for <code>spring-cloud-gateway</code> configured as BFF on some routes (for an Angular app) and with <code>permitAll</code> (and no token relay) <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/bff\" rel=\"nofollow noreferrer\">there</a>.</p>\n<p>Last, configuring a gateway as a resource server to centralize security rules is a bad pattern to me:</p>\n<ul>\n<li>the service itself is not secured (or access rules are doubled which brings the usual code duplication issues)</li>\n<li>it requires tight coupling with downstream services implementation (need to know a minimum of routes details and maybe resources structures when access rule involves the resource itself)</li>\n<li>it makes it pretty hard to unit test access rules (it's an <a href=\"https://github.com/ch4mpy/spring-addons/tree/master#unit-tests\" rel=\"nofollow noreferrer\">easy task on the REST API itself</a> when it is configured as a resource server)</li>\n</ul>\n"}],"owner":{"account_id":965625,"reputation":1524,"user_id":1103606,"accept_rate":51,"display_name":"Peter Penzov"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":826,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":76938976,"answer_count":2,"score":8,"last_activity_date":1692953733,"creation_date":1684847862,"question_id":76315238,"body_markdown":"I want to migrate this Spring security configuration to latest Spring Cloud:\r\n\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.boot.autoconfigure.security.oauth2.resource.ResourceServerProperties;\r\n    import org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\n    import org.springframework.security.oauth2.config.annotation.web.configuration.ResourceServerConfigurerAdapter;\r\n    import org.springframework.security.oauth2.config.annotation.web.configurers.ResourceServerSecurityConfigurer;\r\n    import org.springframework.security.oauth2.provider.error.OAuth2AuthenticationEntryPoint;\r\n    import org.springframework.security.oauth2.provider.token.DefaultAccessTokenConverter;\r\n    import org.springframework.security.oauth2.provider.token.DefaultTokenServices;\r\n    import org.springframework.security.oauth2.provider.token.TokenStore;\r\n    import org.springframework.security.oauth2.provider.token.store.JwtAccessTokenConverter;\r\n    import org.springframework.security.oauth2.provider.token.store.JwtTokenStore;\r\n    \r\n    public class DefaultSecurityConfig extends ResourceServerConfigurerAdapter {\r\n    \r\n      @Autowired\r\n      private ResourceServerProperties resource;\r\n    \r\n      @Autowired\r\n      private CustomUserDataAuthenticationConverter customUserDataAuthenticationConverter;\r\n    \r\n      public DefaultSecurityConfig() {\r\n      }\r\n    \r\n      @Override\r\n      public void configure(final HttpSecurity http) throws Exception {\r\n    \r\n        http.authorizeRequests()\r\n            .antMatchers(&quot;/configuration/**&quot;,)\r\n            .permitAll();\r\n    \r\n        http.authorizeRequests().antMatchers(&quot;/**&quot;).authenticated();\r\n    \r\n        final OAuth2AuthenticationEntryPoint oAuth2AuthenticationEntryPoint =\r\n            new CustomOAuth2AuthenticationEntryPoint();\r\n    \r\n        http.exceptionHandling().authenticationEntryPoint(oAuth2AuthenticationEntryPoint);\r\n      }\r\n    \r\n      @Override\r\n      public void configure(final ResourceServerSecurityConfigurer resources) {\r\n        resources.tokenServices(tokenServices());\r\n        resources.resourceId(resource.getResourceId());\r\n      }\r\n    \r\n      private TokenStore customTokenStore() {\r\n        return new JwtTokenStore(accessTokenConverter());\r\n      }\r\n    \r\n      private JwtAccessTokenConverter accessTokenConverter() {\r\n        JwtAccessTokenConverter converter = new NonValidatingAccessTokenConverter();\r\n        converter.setAccessTokenConverter(customAccessTokenConverter());\r\n        return converter;\r\n      }\r\n    \r\n      private DefaultTokenServices tokenServices() {\r\n        DefaultTokenServices defaultTokenServices = new DefaultTokenServices();\r\n        defaultTokenServices.setTokenStore(customTokenStore());\r\n        return defaultTokenServices;\r\n      }\r\n    \r\n      private DefaultAccessTokenConverter customAccessTokenConverter() {\r\n        DefaultAccessTokenConverter tokenConverter = new DefaultAccessTokenConverter();\r\n        tokenConverter.setUserTokenConverter(customUserDataAuthenticationConverter);\r\n        return tokenConverter;\r\n      }\r\n    }\r\n\r\nAs you can see I migrate parts of the code but several issues are not clear:\r\n\r\n1. implementation &#39;org.springframework.security.oauth.boot:spring-security-oauth2-autoconfigure&#39; Is removed from `spring.dependency.management` package. What package should replace it?\r\n\r\n2. `ResourceServerConfigurerAdapter` is deprecated. How to replace it?\r\n\r\n3. `OAuth2AuthenticationEntryPoint` is deprecated. How to replace it?\r\n\r\nWhat should be the proper way to migrate the code accordingly?","title":"Migrate Spring Security configuration to Spring Cloud 2022.0.4","body":"<p>I want to migrate this Spring security configuration to latest Spring Cloud:</p>\n<pre><code>import org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.autoconfigure.security.oauth2.resource.ResourceServerProperties;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.oauth2.config.annotation.web.configuration.ResourceServerConfigurerAdapter;\nimport org.springframework.security.oauth2.config.annotation.web.configurers.ResourceServerSecurityConfigurer;\nimport org.springframework.security.oauth2.provider.error.OAuth2AuthenticationEntryPoint;\nimport org.springframework.security.oauth2.provider.token.DefaultAccessTokenConverter;\nimport org.springframework.security.oauth2.provider.token.DefaultTokenServices;\nimport org.springframework.security.oauth2.provider.token.TokenStore;\nimport org.springframework.security.oauth2.provider.token.store.JwtAccessTokenConverter;\nimport org.springframework.security.oauth2.provider.token.store.JwtTokenStore;\n\npublic class DefaultSecurityConfig extends ResourceServerConfigurerAdapter {\n\n  @Autowired\n  private ResourceServerProperties resource;\n\n  @Autowired\n  private CustomUserDataAuthenticationConverter customUserDataAuthenticationConverter;\n\n  public DefaultSecurityConfig() {\n  }\n\n  @Override\n  public void configure(final HttpSecurity http) throws Exception {\n\n    http.authorizeRequests()\n        .antMatchers(&quot;/configuration/**&quot;,)\n        .permitAll();\n\n    http.authorizeRequests().antMatchers(&quot;/**&quot;).authenticated();\n\n    final OAuth2AuthenticationEntryPoint oAuth2AuthenticationEntryPoint =\n        new CustomOAuth2AuthenticationEntryPoint();\n\n    http.exceptionHandling().authenticationEntryPoint(oAuth2AuthenticationEntryPoint);\n  }\n\n  @Override\n  public void configure(final ResourceServerSecurityConfigurer resources) {\n    resources.tokenServices(tokenServices());\n    resources.resourceId(resource.getResourceId());\n  }\n\n  private TokenStore customTokenStore() {\n    return new JwtTokenStore(accessTokenConverter());\n  }\n\n  private JwtAccessTokenConverter accessTokenConverter() {\n    JwtAccessTokenConverter converter = new NonValidatingAccessTokenConverter();\n    converter.setAccessTokenConverter(customAccessTokenConverter());\n    return converter;\n  }\n\n  private DefaultTokenServices tokenServices() {\n    DefaultTokenServices defaultTokenServices = new DefaultTokenServices();\n    defaultTokenServices.setTokenStore(customTokenStore());\n    return defaultTokenServices;\n  }\n\n  private DefaultAccessTokenConverter customAccessTokenConverter() {\n    DefaultAccessTokenConverter tokenConverter = new DefaultAccessTokenConverter();\n    tokenConverter.setUserTokenConverter(customUserDataAuthenticationConverter);\n    return tokenConverter;\n  }\n}\n</code></pre>\n<p>As you can see I migrate parts of the code but several issues are not clear:</p>\n<ol>\n<li><p>implementation 'org.springframework.security.oauth.boot:spring-security-oauth2-autoconfigure' Is removed from <code>spring.dependency.management</code> package. What package should replace it?</p>\n</li>\n<li><p><code>ResourceServerConfigurerAdapter</code> is deprecated. How to replace it?</p>\n</li>\n<li><p><code>OAuth2AuthenticationEntryPoint</code> is deprecated. How to replace it?</p>\n</li>\n</ol>\n<p>What should be the proper way to migrate the code accordingly?</p>\n"},{"tags":["java","spring-boot","thymeleaf"],"comments":[{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1692945509,"post_id":76974635,"comment_id":135696159,"body_markdown":"Can you please show the stack trace of the exception?","body":"Can you please show the stack trace of the exception?"},{"owner":{"account_id":9121843,"reputation":68,"user_id":13114057,"display_name":"Sting_ZW"},"score":0,"creation_date":1692946197,"post_id":76974635,"comment_id":135696261,"body_markdown":"I have included the trace.","body":"I have included the trace."},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1692946284,"post_id":76974635,"comment_id":135696275,"body_markdown":"What is part of the trace? The full stack trace is not included in your question.","body":"What is part of the trace? The full stack trace is not included in your question."},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1692946663,"post_id":76974635,"comment_id":135696345,"body_markdown":"Does the error happen when loading the thymeleaf edit page or does it happen when sending the data (POSTing to `/repairs`)?","body":"Does the error happen when loading the thymeleaf edit page or does it happen when sending the data (POSTing to <code>&#47;repairs</code>)?"},{"owner":{"account_id":9121843,"reputation":68,"user_id":13114057,"display_name":"Sting_ZW"},"score":0,"creation_date":1692946851,"post_id":76974635,"comment_id":135696374,"body_markdown":"The error happens when loading the page (repair/create-repair)","body":"The error happens when loading the page (repair/create-repair)"},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1692947237,"post_id":76974635,"comment_id":135696446,"body_markdown":"Does the error still occur if you remove `&lt;option value=&quot;&quot;&gt;-- Select Terminal --&lt;/option&gt;`? Can you show the `Terminal` class?","body":"Does the error still occur if you remove <code>&lt;option value=&quot;&quot;&gt;-- Select Terminal --&lt;&#47;option&gt;</code>? Can you show the <code>Terminal</code> class?"},{"owner":{"account_id":9121843,"reputation":68,"user_id":13114057,"display_name":"Sting_ZW"},"score":0,"creation_date":1692948190,"post_id":76974635,"comment_id":135696649,"body_markdown":"When I remove reference to the Terminal in Thymeleaf the error disspears. I have included the Terminal class.","body":"When I remove reference to the Terminal in Thymeleaf the error disspears. I have included the Terminal class."},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1692949140,"post_id":76974635,"comment_id":135696802,"body_markdown":"When saying &quot;reference to the Terminal&quot;, are you talking about the `&lt;option value=&quot;&quot;&gt;-- Select Terminal --&lt;/option&gt;` or the whole `&lt;select&gt;` element? Did you try making `terminalId` a `Long` instead of a `long`?","body":"When saying &quot;reference to the Terminal&quot;, are you talking about the <code>&lt;option value=&quot;&quot;&gt;-- Select Terminal --&lt;&#47;option&gt;</code> or the whole <code>&lt;select&gt;</code> element? Did you try making <code>terminalId</code> a <code>Long</code> instead of a <code>long</code>?"},{"owner":{"account_id":9121843,"reputation":68,"user_id":13114057,"display_name":"Sting_ZW"},"score":0,"creation_date":1693024693,"post_id":76974635,"comment_id":135708571,"body_markdown":"I changed to _Long_  and it worked, thank you @dan1st","body":"I changed to <i>Long</i>  and it worked, thank you @dan1st"}],"answers":[{"tags":[],"owner":{"account_id":17750,"reputation":25470,"user_id":40064,"accept_rate":69,"display_name":"Wim Deblauwe"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1692953578,"creation_date":1692953578,"answer_id":76975678,"question_id":76974635,"body_markdown":"The error indicates that a primitive type (such as `int`, `long`, ...) cannot have `null` assigned to it. The Java language does not allow this.\r\n\r\nIf you want to allow `null` values, you need to use a wrapper (e.g. `Integer`, `Long`, ...).\r\n\r\nI see you have `private long terminalId;`. Try changing this to `private Long terminalId;`\r\n\r\nPS: A better alternative is to use a dedicated form data object so you only need to change it to `Long` in the form data object and keep your entity like you want. See https://www.wimdeblauwe.com/blog/2021/05/23/form-handling-with-thymeleaf/ for more info.","title":"Thymeleaf dropdown with Spring Boot","body":"<p>The error indicates that a primitive type (such as <code>int</code>, <code>long</code>, ...) cannot have <code>null</code> assigned to it. The Java language does not allow this.</p>\n<p>If you want to allow <code>null</code> values, you need to use a wrapper (e.g. <code>Integer</code>, <code>Long</code>, ...).</p>\n<p>I see you have <code>private long terminalId;</code>. Try changing this to <code>private Long terminalId;</code></p>\n<p>PS: A better alternative is to use a dedicated form data object so you only need to change it to <code>Long</code> in the form data object and keep your entity like you want. See <a href=\"https://www.wimdeblauwe.com/blog/2021/05/23/form-handling-with-thymeleaf/\" rel=\"nofollow noreferrer\">https://www.wimdeblauwe.com/blog/2021/05/23/form-handling-with-thymeleaf/</a> for more info.</p>\n"}],"owner":{"account_id":9121843,"reputation":68,"user_id":13114057,"display_name":"Sting_ZW"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76975678,"answer_count":1,"score":1,"last_activity_date":1692953578,"creation_date":1692943734,"question_id":76974635,"body_markdown":"I am using two tables:\r\n\r\n 1. Terminals\r\n 2. Repairs\r\n\r\nwith a many (Repairs) to one (Terminal) relationship. I am trying to populate a Thymeleaf form to create a new repair. One of the fields is a dropdown to select the Terminal but I am getting a ***java.lang.IllegalArgumentException: A null value cannot be assigned to a primitive type*** error. This is my code:\r\n\r\n**Entity:**\r\n\r\n    public class Repair {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long repairId;\r\n    @ManyToOne(targetEntity = Terminal.class)\r\n    @JoinColumn(nullable = false)\r\n    private Terminal terminal;\r\n    @Column(name = &quot;date_received&quot;, nullable = false)\r\n    private Date dateReceived;\r\n    @Column(name = &quot;date_ready&quot;)\r\n    private Date dateReady;\r\n    @Column(name = &quot;fault&quot;)\r\n    private String fault;\r\n    @Column(name = &quot;solution&quot;)\r\n    private String solution;\r\n    //constructors, getters &amp; setters\r\n\r\n    public class Terminal {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(nullable = false)\r\n    private long terminalId;\r\n    @Column(nullable = false)\r\n    private String ptid;\r\n    @ManyToOne(targetEntity = TerminalModel.class)\r\n    @JoinColumn(nullable = false)\r\n    private TerminalModel terminalModel;\r\n    //constructors, getters &amp; setters\r\n\r\n**Controller:**\r\n\r\n    @GetMapping(&quot;/repair/repairs/new&quot;)\r\n    public String createRepairForm(Model model){\r\n        List&lt;Terminal&gt; terminals = terminalService.getAllTerminals();\r\n        Repair repair = new Repair();\r\n        model.addAttribute(&quot;terminals&quot;, terminals);\r\n        model.addAttribute(&quot;repair&quot;, repair);\r\n        return &quot;repair/create-repair&quot;;\r\n    }\r\n\r\n**View:**\r\n\r\n    &lt;form th:action=&quot;@{/repairs}&quot; th:object=&quot;${repair}&quot; method=&quot;POST&quot;&gt;\r\n\r\n                    &lt;div class=&quot;form-group&quot;&gt;\r\n                        &lt;label&gt;Date Received&lt;/label&gt;\r\n                        &lt;input type=&quot;text&quot; name=&quot;dateReceived&quot; th:field = &quot;*{dateReceived}&quot; class=&quot;form-control&quot; placeholder=&quot;Enter Date Received&quot;/&gt;\r\n                    &lt;/div&gt;\r\n                    &lt;div class=&quot;form-group&quot;&gt;\r\n                        &lt;label&gt;Date Ready&lt;/label&gt;\r\n                        &lt;input type=&quot;text&quot; name=&quot;dateReady&quot; th:field = &quot;*{dateReady}&quot; class=&quot;form-control&quot; placeholder=&quot;Enter Date Ready&quot;/&gt;\r\n                    &lt;/div&gt;\r\n                    &lt;div class=&quot;form-group&quot;&gt;\r\n                        &lt;label&gt;Fault&lt;/label&gt;\r\n                        &lt;input type=&quot;text&quot; name=&quot;fault&quot; th:field = &quot;*{fault}&quot; class=&quot;form-control&quot; placeholder=&quot;Enter Fault&quot;/&gt;\r\n                    &lt;/div&gt;\r\n                    &lt;div class=&quot;form-group&quot;&gt;\r\n                        &lt;label&gt;Solution&lt;/label&gt;\r\n                        &lt;input type=&quot;text&quot; name=&quot;solution&quot; th:field = &quot;*{solution}&quot; class=&quot;form-control&quot; placeholder=&quot;Enter Solution&quot;/&gt;\r\n                    &lt;/div&gt;\r\n                    &lt;div class=&quot;form-group&quot;&gt;\r\n                        &lt;label for=&quot;terminal&quot;&gt;Terminal:&lt;/label&gt;\r\n            &lt;select id=&quot;terminal&quot; name=&quot;terminal.terminalId&quot; th:field=&quot;*{terminal.terminalId}&quot;&gt;\r\n                &lt;option value=&quot;&quot;&gt;-- Select Terminal --&lt;/option&gt;\r\n                &lt;option th:each=&quot;terminal : ${terminals}&quot; th:value=&quot;${terminal.terminalId}&quot; th:text=&quot;${terminal.ptid}&quot;&gt;\r\n                &lt;/option&gt;\r\n            &lt;/select&gt;\r\n                    &lt;/div&gt;\r\n                    &lt;div class=&quot;footer-body&quot;&gt;\r\n                        &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot;&gt; Submit &lt;/button&gt;\r\n                    &lt;/div&gt;\r\n\r\n                &lt;/form&gt;\r\nThis is part of the trace:\r\n```\r\nCaused by: org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [@jakarta.persistence.Id @jakarta.persistence.GeneratedValue @jakarta.persistence.Column long] for value &#39;null&#39;\r\n\tat org.springframework.core.convert.support.GenericConversionService.assertNotPrimitiveTargetType(GenericConversionService.java:335) ~[spring-core-6.0.7.jar:6.0.7]\r\n\tat org.springframework.core.convert.support.GenericConversionService.handleResult(GenericConversionService.java:328) ~[spring-core-6.0.7.jar:6.0.7]\r\n\tat org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:193) ~[spring-core-6.0.7.jar:6.0.7]\r\n\tat org.springframework.core.convert.support.ConvertingPropertyEditorAdapter.setAsText(ConvertingPropertyEditorAdapter.java:60) ~[spring-core-6.0.7.jar:6.0.7]\r\n\tat org.thymeleaf.spring6.util.SpringSelectedValueComparator.exhaustiveCompare(SpringSelectedValueComparator.java:173) ~[thymeleaf-spring6-3.1.1.RELEASE.jar:3.1.1.RELEASE]\r\n\tat org.thymeleaf.spring6.util.SpringSelectedValueComparator.isSelected(SpringSelectedValueComparator.java:90) ~[thymeleaf-spring6-3.1.1.RELEASE.jar:3.1.1.RELEASE]\r\n\tat org.thymeleaf.spring6.processor.SpringOptionFieldTagProcessor.doProcess(SpringOptionFieldTagProcessor.java:68) ~[thymeleaf-spring6-3.1.1.RELEASE.jar:3.1.1.RELEASE]\r\n\tat org.thymeleaf.spring6.processor.AbstractSpringFieldTagProcessor.doProcess(AbstractSpringFieldTagProcessor.java:187) ~[thymeleaf-spring6-3.1.1.RELEASE.jar:3.1.1.RELEASE]\r\n\tat org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74) ~[thymeleaf-3.1.1.RELEASE.jar:3.1.1.RELEASE]\r\n\t... 52 common frames omitted\r\nCaused by: java.lang.IllegalArgumentException: A null value cannot be assigned to a primitive type\r\n\t... 61 common frames omitted\r\n\r\n2023-08-25T08:48:04.115+02:00 ERROR 28912 --- [nio-8080-exec-5] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.thymeleaf.exceptions.TemplateProcessingException: Error during execution of processor &#39;org.thymeleaf.spring6.processor.SpringOptionFieldTagProcessor&#39; (template: &quot;repair/create-repair&quot; - line 60, col 17)] with root cause\r\n\r\njava.lang.IllegalArgumentException: A null value cannot be assigned to a primitive type\r\n```\r\nHow do I fix this?","title":"Thymeleaf dropdown with Spring Boot","body":"<p>I am using two tables:</p>\n<ol>\n<li>Terminals</li>\n<li>Repairs</li>\n</ol>\n<p>with a many (Repairs) to one (Terminal) relationship. I am trying to populate a Thymeleaf form to create a new repair. One of the fields is a dropdown to select the Terminal but I am getting a <em><strong>java.lang.IllegalArgumentException: A null value cannot be assigned to a primitive type</strong></em> error. This is my code:</p>\n<p><strong>Entity:</strong></p>\n<pre><code>public class Repair {\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate Long repairId;\n@ManyToOne(targetEntity = Terminal.class)\n@JoinColumn(nullable = false)\nprivate Terminal terminal;\n@Column(name = &quot;date_received&quot;, nullable = false)\nprivate Date dateReceived;\n@Column(name = &quot;date_ready&quot;)\nprivate Date dateReady;\n@Column(name = &quot;fault&quot;)\nprivate String fault;\n@Column(name = &quot;solution&quot;)\nprivate String solution;\n//constructors, getters &amp; setters\n\npublic class Terminal {\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\n@Column(nullable = false)\nprivate long terminalId;\n@Column(nullable = false)\nprivate String ptid;\n@ManyToOne(targetEntity = TerminalModel.class)\n@JoinColumn(nullable = false)\nprivate TerminalModel terminalModel;\n//constructors, getters &amp; setters\n</code></pre>\n<p><strong>Controller:</strong></p>\n<pre><code>@GetMapping(&quot;/repair/repairs/new&quot;)\npublic String createRepairForm(Model model){\n    List&lt;Terminal&gt; terminals = terminalService.getAllTerminals();\n    Repair repair = new Repair();\n    model.addAttribute(&quot;terminals&quot;, terminals);\n    model.addAttribute(&quot;repair&quot;, repair);\n    return &quot;repair/create-repair&quot;;\n}\n</code></pre>\n<p><strong>View:</strong></p>\n<pre><code>&lt;form th:action=&quot;@{/repairs}&quot; th:object=&quot;${repair}&quot; method=&quot;POST&quot;&gt;\n\n                &lt;div class=&quot;form-group&quot;&gt;\n                    &lt;label&gt;Date Received&lt;/label&gt;\n                    &lt;input type=&quot;text&quot; name=&quot;dateReceived&quot; th:field = &quot;*{dateReceived}&quot; class=&quot;form-control&quot; placeholder=&quot;Enter Date Received&quot;/&gt;\n                &lt;/div&gt;\n                &lt;div class=&quot;form-group&quot;&gt;\n                    &lt;label&gt;Date Ready&lt;/label&gt;\n                    &lt;input type=&quot;text&quot; name=&quot;dateReady&quot; th:field = &quot;*{dateReady}&quot; class=&quot;form-control&quot; placeholder=&quot;Enter Date Ready&quot;/&gt;\n                &lt;/div&gt;\n                &lt;div class=&quot;form-group&quot;&gt;\n                    &lt;label&gt;Fault&lt;/label&gt;\n                    &lt;input type=&quot;text&quot; name=&quot;fault&quot; th:field = &quot;*{fault}&quot; class=&quot;form-control&quot; placeholder=&quot;Enter Fault&quot;/&gt;\n                &lt;/div&gt;\n                &lt;div class=&quot;form-group&quot;&gt;\n                    &lt;label&gt;Solution&lt;/label&gt;\n                    &lt;input type=&quot;text&quot; name=&quot;solution&quot; th:field = &quot;*{solution}&quot; class=&quot;form-control&quot; placeholder=&quot;Enter Solution&quot;/&gt;\n                &lt;/div&gt;\n                &lt;div class=&quot;form-group&quot;&gt;\n                    &lt;label for=&quot;terminal&quot;&gt;Terminal:&lt;/label&gt;\n        &lt;select id=&quot;terminal&quot; name=&quot;terminal.terminalId&quot; th:field=&quot;*{terminal.terminalId}&quot;&gt;\n            &lt;option value=&quot;&quot;&gt;-- Select Terminal --&lt;/option&gt;\n            &lt;option th:each=&quot;terminal : ${terminals}&quot; th:value=&quot;${terminal.terminalId}&quot; th:text=&quot;${terminal.ptid}&quot;&gt;\n            &lt;/option&gt;\n        &lt;/select&gt;\n                &lt;/div&gt;\n                &lt;div class=&quot;footer-body&quot;&gt;\n                    &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot;&gt; Submit &lt;/button&gt;\n                &lt;/div&gt;\n\n            &lt;/form&gt;\n</code></pre>\n<p>This is part of the trace:</p>\n<pre><code>Caused by: org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.String] to type [@jakarta.persistence.Id @jakarta.persistence.GeneratedValue @jakarta.persistence.Column long] for value 'null'\n    at org.springframework.core.convert.support.GenericConversionService.assertNotPrimitiveTargetType(GenericConversionService.java:335) ~[spring-core-6.0.7.jar:6.0.7]\n    at org.springframework.core.convert.support.GenericConversionService.handleResult(GenericConversionService.java:328) ~[spring-core-6.0.7.jar:6.0.7]\n    at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:193) ~[spring-core-6.0.7.jar:6.0.7]\n    at org.springframework.core.convert.support.ConvertingPropertyEditorAdapter.setAsText(ConvertingPropertyEditorAdapter.java:60) ~[spring-core-6.0.7.jar:6.0.7]\n    at org.thymeleaf.spring6.util.SpringSelectedValueComparator.exhaustiveCompare(SpringSelectedValueComparator.java:173) ~[thymeleaf-spring6-3.1.1.RELEASE.jar:3.1.1.RELEASE]\n    at org.thymeleaf.spring6.util.SpringSelectedValueComparator.isSelected(SpringSelectedValueComparator.java:90) ~[thymeleaf-spring6-3.1.1.RELEASE.jar:3.1.1.RELEASE]\n    at org.thymeleaf.spring6.processor.SpringOptionFieldTagProcessor.doProcess(SpringOptionFieldTagProcessor.java:68) ~[thymeleaf-spring6-3.1.1.RELEASE.jar:3.1.1.RELEASE]\n    at org.thymeleaf.spring6.processor.AbstractSpringFieldTagProcessor.doProcess(AbstractSpringFieldTagProcessor.java:187) ~[thymeleaf-spring6-3.1.1.RELEASE.jar:3.1.1.RELEASE]\n    at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74) ~[thymeleaf-3.1.1.RELEASE.jar:3.1.1.RELEASE]\n    ... 52 common frames omitted\nCaused by: java.lang.IllegalArgumentException: A null value cannot be assigned to a primitive type\n    ... 61 common frames omitted\n\n2023-08-25T08:48:04.115+02:00 ERROR 28912 --- [nio-8080-exec-5] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.thymeleaf.exceptions.TemplateProcessingException: Error during execution of processor 'org.thymeleaf.spring6.processor.SpringOptionFieldTagProcessor' (template: &quot;repair/create-repair&quot; - line 60, col 17)] with root cause\n\njava.lang.IllegalArgumentException: A null value cannot be assigned to a primitive type\n</code></pre>\n<p>How do I fix this?</p>\n"},{"tags":["java","installation","java-8"],"answers":[{"tags":[],"owner":{"account_id":22384219,"reputation":108,"user_id":16597286,"display_name":"Windir"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1670354711,"creation_date":1670354711,"answer_id":74708054,"question_id":74706315,"body_markdown":"Open cmd and type java -version\r\nIf jdk-8 is still the detected module, remove it from the [PATH][1].\r\n\r\nIf the problem still occours make sure to check your installation directory if there are remainding files (sometimes, when for example the uninstaller was ran with non administrative rights it can fail)\r\n\r\n\r\n  [1]: https://www.computerhope.com/issues/ch000549.htm","title":"Trying to install jdk8 but it says its already installed (Windows 10)","body":"<p>Open cmd and type java -version\nIf jdk-8 is still the detected module, remove it from the <a href=\"https://www.computerhope.com/issues/ch000549.htm\" rel=\"nofollow noreferrer\">PATH</a>.</p>\n<p>If the problem still occours make sure to check your installation directory if there are remainding files (sometimes, when for example the uninstaller was ran with non administrative rights it can fail)</p>\n"}],"owner":{"account_id":25305176,"reputation":1,"user_id":19128820,"display_name":"Kieron Tang"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":862,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692952978,"creation_date":1670345701,"question_id":74706315,"body_markdown":"I have jdk-19 installed in C:\\Program Files\\Java\\jdk-19\r\nI previously had jdk-8, specifically jdk-8u351 which uninstalled with the java uninstaller tool.\r\nProblem: I want to now install that same version of jdk-8 again.\r\n\r\nI double click the jdk-8u351-windows-x64.exe file, expecting it to just install like the first time I did it, however it gives me a prompt saying that I already have it installed.\r\n\r\nNow strangely the java uninstall tool cannot find my jdk-19, or any for jdk that matter &quot;No Java Versions Detected&quot;. IntelliJ is still able to use my jdk-19 while this is the case\r\n","title":"Trying to install jdk8 but it says its already installed (Windows 10)","body":"<p>I have jdk-19 installed in C:\\Program Files\\Java\\jdk-19\nI previously had jdk-8, specifically jdk-8u351 which uninstalled with the java uninstaller tool.\nProblem: I want to now install that same version of jdk-8 again.</p>\n<p>I double click the jdk-8u351-windows-x64.exe file, expecting it to just install like the first time I did it, however it gives me a prompt saying that I already have it installed.</p>\n<p>Now strangely the java uninstall tool cannot find my jdk-19, or any for jdk that matter &quot;No Java Versions Detected&quot;. IntelliJ is still able to use my jdk-19 while this is the case</p>\n"},{"tags":["java","typescript","openapi","openapi-generator"],"answers":[{"tags":[],"owner":{"account_id":874712,"reputation":19505,"user_id":924597,"accept_rate":79,"display_name":"Shorn"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1669015321,"creation_date":1669015321,"answer_id":74515434,"question_id":74514733,"body_markdown":"The easy &quot;workaround&quot; answer **(*)** to this question is that you must set the mapping value be the same as the name of the type that is being mapped to.\r\nThat is:\r\n```lang-yaml\r\n      discriminator:\r\n        propertyName: metadataSchema\r\n        mapping:\r\n          raido-metadata-schema-v1: &#39;#/components/schemas/PublicMetadataSchemaV1&#39;\r\n          closed-metadata-schema-v1: &#39;#/components/schemas/ClosedMetadataSchemaV1&#39;\r\n\r\n```\r\nhas to be re-written as:\r\n```lang-yaml\r\n      discriminator:\r\n        propertyName: metadataSchema\r\n        mapping:\r\n          PublicMetadataSchemaV1: &#39;#/components/schemas/PublicMetadataSchemaV1&#39;\r\n          ClosedMetadataSchemaV1: &#39;#/components/schemas/ClosedMetadataSchemaV1&#39;\r\n```\r\n\r\n**(*)** - &quot;Easy&quot; but annoying and potentially awkward. If anyone posts an answer that allows the mapping values to be arbitrary instead of being forced to match the type name - I will gladly mark it as the correct answer.","title":"Using OpenAPI `oneOf`: generate TypeScript code that can parse JavaSpring API?","body":"<p>The easy &quot;workaround&quot; answer <strong>(*)</strong> to this question is that you must set the mapping value be the same as the name of the type that is being mapped to.\nThat is:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>      discriminator:\n        propertyName: metadataSchema\n        mapping:\n          raido-metadata-schema-v1: '#/components/schemas/PublicMetadataSchemaV1'\n          closed-metadata-schema-v1: '#/components/schemas/ClosedMetadataSchemaV1'\n\n</code></pre>\n<p>has to be re-written as:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>      discriminator:\n        propertyName: metadataSchema\n        mapping:\n          PublicMetadataSchemaV1: '#/components/schemas/PublicMetadataSchemaV1'\n          ClosedMetadataSchemaV1: '#/components/schemas/ClosedMetadataSchemaV1'\n</code></pre>\n<p><strong>(*)</strong> - &quot;Easy&quot; but annoying and potentially awkward. If anyone posts an answer that allows the mapping values to be arbitrary instead of being forced to match the type name - I will gladly mark it as the correct answer.</p>\n"},{"tags":[],"owner":{"account_id":164447,"reputation":111,"user_id":387189,"display_name":"BenKolera"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692952970,"creation_date":1692952970,"answer_id":76975613,"question_id":74514733,"body_markdown":"A bit late to this party, but with legacyDiscriminatorBehaviour[2] set to true, the java JsonSubType will only include your explicit mappings. It&#39;ll generate like this which is what you want. \r\n\r\n```\r\n@JsonSubTypes({\r\n  @JsonSubTypes.Type(value = ClosedMetadataSchemaV1.class, name = &quot;closed-metadata-schema-v1&quot;),\r\n  @JsonSubTypes.Type(value = PublicMetadataSchemaV1.class, name = &quot;raido-metadata-schema-v1&quot;)\r\n})\r\n```\r\n\r\n[![legacyDiscriminatorBehaviour setting doco][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/UwbOx.png\r\n  [2]: https://openapi-generator.tech/docs/generators/openapi/","title":"Using OpenAPI `oneOf`: generate TypeScript code that can parse JavaSpring API?","body":"<p>A bit late to this party, but with legacyDiscriminatorBehaviour<a href=\"https://openapi-generator.tech/docs/generators/openapi/\" rel=\"nofollow noreferrer\">2</a> set to true, the java JsonSubType will only include your explicit mappings. It'll generate like this which is what you want.</p>\n<pre><code>@JsonSubTypes({\n  @JsonSubTypes.Type(value = ClosedMetadataSchemaV1.class, name = &quot;closed-metadata-schema-v1&quot;),\n  @JsonSubTypes.Type(value = PublicMetadataSchemaV1.class, name = &quot;raido-metadata-schema-v1&quot;)\n})\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/UwbOx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UwbOx.png\" alt=\"legacyDiscriminatorBehaviour setting doco\" /></a></p>\n"}],"owner":{"account_id":874712,"reputation":19505,"user_id":924597,"accept_rate":79,"display_name":"Shorn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":851,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74515434,"answer_count":2,"score":0,"last_activity_date":1692952970,"creation_date":1669009734,"question_id":74514733,"body_markdown":"I&#39;m using `openapi-generator` `6.2.1` for generating both server-side Java Spring interfaces and TypeScript client classes from `openapi` `3.0.2` YAML files.\r\n\r\nI&#39;m trying to use the `oneOf` functionality to specify that a particular property can have one of two exact types: `PublicMetadataSchemaV1` or `ClosedMetadataSchemaV1`.\r\n\r\nHere&#39;s the definition:\r\n```lang-yaml\r\n    ReadRaidMetadataResponseV1:\r\n      # Using oneOf/discriminator is probably pushing too close to the edge of \r\n      # what openapi-gen can do yet, for example that&#39;s why metadataSchema is a\r\n      # string instead of an enum:\r\n      # https://github.com/OpenAPITools/openapi-generator/pull/13846\r\n      type: object\r\n      description: Any type of metadata\r\n      oneOf:\r\n#        - $ref: &#39;metadata-schema-v1.yaml#/components/schemas/MetadataSchemaV1&#39;\r\n        - $ref: &#39;#/components/schemas/PublicMetadataSchemaV1&#39;\r\n        - $ref: &#39;#/components/schemas/ClosedMetadataSchemaV1&#39;\r\n      discriminator:\r\n        propertyName: metadataSchema\r\n        mapping:\r\n          raido-metadata-schema-v1: &#39;#/components/schemas/PublicMetadataSchemaV1&#39;\r\n          closed-metadata-schema-v1: &#39;#/components/schemas/ClosedMetadataSchemaV1&#39;\r\n    PublicMetadataSchemaV1:\r\n      description: &gt;\r\n        This object only exists because openapi-gen discriminator needs to be \r\n        a string, currently.\r\n        See https://github.com/OpenAPITools/openapi-generator/pull/13846.\r\n        Eventually, want the mapping to just use MetadataSchemaV1.\r\n      type: object\r\n      required: [ metadataSchema, id, titles, dates, access]\r\n      # this is how we make PublicMetadataSchemaV1 inherit all the fields oneOf: \r\n      # MetadataSchemaV1.\r\n      allOf: \r\n        - $ref: &#39;metadata-schema-v1.yaml#/components/schemas/MetadataSchemaV1&#39;\r\n      properties:\r\n        # This is where we &quot;override&quot; the type of metadataSchema to be a string\r\n        # instead of the enum that we would prefer it to be.\r\n        # Rather than &quot;string&quot; this should be a &quot;constant&quot; with value `raido-metadata-schema-v1`\r\n        # metadataSchema: {$ref: &#39;shared.yaml#/components/schemas/RaidoMetaschema&#39; }\r\n        metadataSchema: { type: string }\r\n    ClosedMetadataSchemaV1:\r\n      type: object\r\n      required: [ metadataSchema, id, titles, dates, access]\r\n      properties:\r\n        # Rather than &quot;string&quot; this should be a &quot;constant&quot; with value `closed-metadata-schema-v1`\r\n        # metadataSchema: {$ref: &#39;shared.yaml#/components/schemas/RaidoMetaschema&#39; }\r\n        metadataSchema: { type: string }\r\n        id: {$ref: &#39;shared.yaml#/components/schemas/IdBlock&#39;}\r\n        access: {$ref: &#39;shared.yaml#/components/schemas/AccessBlock&#39;}\r\n \r\n```\r\n\r\nThe problem here is that the `JavaSpring` generator creates code that looks like:\r\n```lang-java\r\n@JsonIgnoreProperties(\r\n  value = &quot;metadataSchema&quot;, // ignore manually set metadataSchema, it will be automatically generated by Jackson during serialization\r\n  allowSetters = true // allows the metadataSchema to be set during deserialization\r\n)\r\n@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.PROPERTY, property = &quot;metadataSchema&quot;, visible = true)\r\n@JsonSubTypes({\r\n  @JsonSubTypes.Type(value = ClosedMetadataSchemaV1.class, name = &quot;ClosedMetadataSchemaV1&quot;),\r\n  @JsonSubTypes.Type(value = PublicMetadataSchemaV1.class, name = &quot;PublicMetadataSchemaV1&quot;),\r\n  @JsonSubTypes.Type(value = ClosedMetadataSchemaV1.class, name = &quot;closed-metadata-schema-v1&quot;),\r\n  @JsonSubTypes.Type(value = PublicMetadataSchemaV1.class, name = &quot;raido-metadata-schema-v1&quot;)\r\n})\r\n\r\n@Generated(value = &quot;org.openapitools.codegen.languages.SpringCodegen&quot;, date = &quot;2022-11-21T15:03:48.931461200+10:00[Australia/Brisbane]&quot;)\r\npublic interface ReadRaidMetadataResponseV1 {\r\n    public String getMetadataSchema();\r\n}\r\n```\r\n\r\nAnd the API service always serves the &quot;class name&quot; mapping (i.e. `PublicMetadataSchemaV1`) as the value instead of the defined &quot;mapping&quot; value of `raido-metadata-schema-v1`.\r\n\r\nBut the generated TypeScript code looks like:\r\n```lang-typescript\r\nexport function ReadRaidMetadataResponseV1FromJSONTyped(json: any, ignoreDiscriminator: boolean): ReadRaidMetadataResponseV1 {\r\n    if ((json === undefined) || (json === null)) {\r\n        return json;\r\n    }\r\n    switch (json[&#39;metadataSchema&#39;]) {\r\n        case &#39;closed-metadata-schema-v1&#39;:\r\n            return {...ClosedMetadataSchemaV1FromJSONTyped(json, true), metadataSchema: &#39;closed-metadata-schema-v1&#39;};\r\n        case &#39;raido-metadata-schema-v1&#39;:\r\n            return {...PublicMetadataSchemaV1FromJSONTyped(json, true), metadataSchema: &#39;raido-metadata-schema-v1&#39;};\r\n        default:\r\n            throw new Error(`No variant of ReadRaidMetadataResponseV1 exists with &#39;metadataSchema=${json[&#39;metadataSchema&#39;]}&#39;`);\r\n    }\r\n}\r\n\r\n```\r\n\r\nSo it always fails, because the TypeScript code only knows about the (correct) `raido-metadata-schema-v1` mapping value.\r\n\r\nThe repo with the full code is publicly visible, you can find the full `openapi` YAML files at:\r\nhttps://github.com/au-research/raido-v2/blob/b06c08349a58b4559768963c5e3fbb81cc2c2f28/api-svc/idl-raid-v2/src/shared.yaml#L36\r\n\r\nThe question: \r\nHow can I structure my `openapi` definition, or what flags do I need to use so that the generated `typescript-fetch` code can actually use the API served by the `JavaSpring` generator?\r\n","title":"Using OpenAPI `oneOf`: generate TypeScript code that can parse JavaSpring API?","body":"<p>I'm using <code>openapi-generator</code> <code>6.2.1</code> for generating both server-side Java Spring interfaces and TypeScript client classes from <code>openapi</code> <code>3.0.2</code> YAML files.</p>\n<p>I'm trying to use the <code>oneOf</code> functionality to specify that a particular property can have one of two exact types: <code>PublicMetadataSchemaV1</code> or <code>ClosedMetadataSchemaV1</code>.</p>\n<p>Here's the definition:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>    ReadRaidMetadataResponseV1:\n      # Using oneOf/discriminator is probably pushing too close to the edge of \n      # what openapi-gen can do yet, for example that's why metadataSchema is a\n      # string instead of an enum:\n      # https://github.com/OpenAPITools/openapi-generator/pull/13846\n      type: object\n      description: Any type of metadata\n      oneOf:\n#        - $ref: 'metadata-schema-v1.yaml#/components/schemas/MetadataSchemaV1'\n        - $ref: '#/components/schemas/PublicMetadataSchemaV1'\n        - $ref: '#/components/schemas/ClosedMetadataSchemaV1'\n      discriminator:\n        propertyName: metadataSchema\n        mapping:\n          raido-metadata-schema-v1: '#/components/schemas/PublicMetadataSchemaV1'\n          closed-metadata-schema-v1: '#/components/schemas/ClosedMetadataSchemaV1'\n    PublicMetadataSchemaV1:\n      description: &gt;\n        This object only exists because openapi-gen discriminator needs to be \n        a string, currently.\n        See https://github.com/OpenAPITools/openapi-generator/pull/13846.\n        Eventually, want the mapping to just use MetadataSchemaV1.\n      type: object\n      required: [ metadataSchema, id, titles, dates, access]\n      # this is how we make PublicMetadataSchemaV1 inherit all the fields oneOf: \n      # MetadataSchemaV1.\n      allOf: \n        - $ref: 'metadata-schema-v1.yaml#/components/schemas/MetadataSchemaV1'\n      properties:\n        # This is where we &quot;override&quot; the type of metadataSchema to be a string\n        # instead of the enum that we would prefer it to be.\n        # Rather than &quot;string&quot; this should be a &quot;constant&quot; with value `raido-metadata-schema-v1`\n        # metadataSchema: {$ref: 'shared.yaml#/components/schemas/RaidoMetaschema' }\n        metadataSchema: { type: string }\n    ClosedMetadataSchemaV1:\n      type: object\n      required: [ metadataSchema, id, titles, dates, access]\n      properties:\n        # Rather than &quot;string&quot; this should be a &quot;constant&quot; with value `closed-metadata-schema-v1`\n        # metadataSchema: {$ref: 'shared.yaml#/components/schemas/RaidoMetaschema' }\n        metadataSchema: { type: string }\n        id: {$ref: 'shared.yaml#/components/schemas/IdBlock'}\n        access: {$ref: 'shared.yaml#/components/schemas/AccessBlock'}\n \n</code></pre>\n<p>The problem here is that the <code>JavaSpring</code> generator creates code that looks like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@JsonIgnoreProperties(\n  value = &quot;metadataSchema&quot;, // ignore manually set metadataSchema, it will be automatically generated by Jackson during serialization\n  allowSetters = true // allows the metadataSchema to be set during deserialization\n)\n@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.PROPERTY, property = &quot;metadataSchema&quot;, visible = true)\n@JsonSubTypes({\n  @JsonSubTypes.Type(value = ClosedMetadataSchemaV1.class, name = &quot;ClosedMetadataSchemaV1&quot;),\n  @JsonSubTypes.Type(value = PublicMetadataSchemaV1.class, name = &quot;PublicMetadataSchemaV1&quot;),\n  @JsonSubTypes.Type(value = ClosedMetadataSchemaV1.class, name = &quot;closed-metadata-schema-v1&quot;),\n  @JsonSubTypes.Type(value = PublicMetadataSchemaV1.class, name = &quot;raido-metadata-schema-v1&quot;)\n})\n\n@Generated(value = &quot;org.openapitools.codegen.languages.SpringCodegen&quot;, date = &quot;2022-11-21T15:03:48.931461200+10:00[Australia/Brisbane]&quot;)\npublic interface ReadRaidMetadataResponseV1 {\n    public String getMetadataSchema();\n}\n</code></pre>\n<p>And the API service always serves the &quot;class name&quot; mapping (i.e. <code>PublicMetadataSchemaV1</code>) as the value instead of the defined &quot;mapping&quot; value of <code>raido-metadata-schema-v1</code>.</p>\n<p>But the generated TypeScript code looks like:</p>\n<pre class=\"lang-typescript prettyprint-override\"><code>export function ReadRaidMetadataResponseV1FromJSONTyped(json: any, ignoreDiscriminator: boolean): ReadRaidMetadataResponseV1 {\n    if ((json === undefined) || (json === null)) {\n        return json;\n    }\n    switch (json['metadataSchema']) {\n        case 'closed-metadata-schema-v1':\n            return {...ClosedMetadataSchemaV1FromJSONTyped(json, true), metadataSchema: 'closed-metadata-schema-v1'};\n        case 'raido-metadata-schema-v1':\n            return {...PublicMetadataSchemaV1FromJSONTyped(json, true), metadataSchema: 'raido-metadata-schema-v1'};\n        default:\n            throw new Error(`No variant of ReadRaidMetadataResponseV1 exists with 'metadataSchema=${json['metadataSchema']}'`);\n    }\n}\n\n</code></pre>\n<p>So it always fails, because the TypeScript code only knows about the (correct) <code>raido-metadata-schema-v1</code> mapping value.</p>\n<p>The repo with the full code is publicly visible, you can find the full <code>openapi</code> YAML files at:\n<a href=\"https://github.com/au-research/raido-v2/blob/b06c08349a58b4559768963c5e3fbb81cc2c2f28/api-svc/idl-raid-v2/src/shared.yaml#L36\" rel=\"nofollow noreferrer\">https://github.com/au-research/raido-v2/blob/b06c08349a58b4559768963c5e3fbb81cc2c2f28/api-svc/idl-raid-v2/src/shared.yaml#L36</a></p>\n<p>The question:\nHow can I structure my <code>openapi</code> definition, or what flags do I need to use so that the generated <code>typescript-fetch</code> code can actually use the API served by the <code>JavaSpring</code> generator?</p>\n"},{"tags":["java","exception","deployment","glassfish","nosuchmethod"],"answers":[{"tags":[],"owner":{"account_id":1869579,"reputation":1450,"user_id":1692156,"accept_rate":70,"display_name":"Tudor Vintilescu"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1348578217,"creation_date":1348578217,"answer_id":12583578,"question_id":12583486,"body_markdown":"This type of errors are usually due to having two different versions of the same library in your classpath.\r\n\r\nPlease check to see if the new version of glassfish doesn&#39;t come with a standard, included, version of one of the libraries your application is using and deploying. Being first on the scene of the crime :), the application server will load the first class (the standard one), which is different from the one your application wants to use.\r\n\r\nForcing use of different class loaders could solve this type of problem. However, I don&#39;t have experience with Glassfish, but have encountered similar problems on Weblogic.\r\n\r\n","title":"NoSuchMethodException during deploying","body":"<p>This type of errors are usually due to having two different versions of the same library in your classpath.</p>\n\n<p>Please check to see if the new version of glassfish doesn't come with a standard, included, version of one of the libraries your application is using and deploying. Being first on the scene of the crime :), the application server will load the first class (the standard one), which is different from the one your application wants to use.</p>\n\n<p>Forcing use of different class loaders could solve this type of problem. However, I don't have experience with Glassfish, but have encountered similar problems on Weblogic.</p>\n"},{"tags":[],"owner":{"account_id":2042955,"reputation":1341,"user_id":1823710,"accept_rate":59,"display_name":"qualebs"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692952924,"creation_date":1692952924,"answer_id":76975610,"question_id":12583486,"body_markdown":"For me I got this error while I was changing my application server from glassfish 6.x to glassfish 7.0.2 and the server wouldn&#39;t start. The logs had the error saying this method does not exist\r\n\r\n`java.lang.NoSuchMethodException: com.sun.appserv.server.util.Version.getFullVersion()`\r\n\r\nIn my project properties I changed the EE version from 9.1 to EE10 and I was able to go back to coding again.","title":"NoSuchMethodException during deploying","body":"<p>For me I got this error while I was changing my application server from glassfish 6.x to glassfish 7.0.2 and the server wouldn't start. The logs had the error saying this method does not exist</p>\n<p><code>java.lang.NoSuchMethodException: com.sun.appserv.server.util.Version.getFullVersion()</code></p>\n<p>In my project properties I changed the EE version from 9.1 to EE10 and I was able to go back to coding again.</p>\n"}],"owner":{"display_name":"user1679671"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2612,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":12583578,"answer_count":2,"score":0,"last_activity_date":1692952924,"creation_date":1348577919,"question_id":12583486,"body_markdown":"I am using glassfish 3.1.2.2 server and idea ultimate edition 11 (on Ubuntu 12.04). While I am deploying my ear project there is an exception, first nullpointer then nosuchmethod.\r\nOn 3.0.1 of glassfish it works, but in 3.1.2 doesnot.\r\n\r\nServer log:\r\n\r\n\r\n    [#|2012-09-25T15:54:14.356+0300|WARNING|glassfish3.1.2|javax.enterprise.system.tools.deployment.org.glassfish.deployment.common|_ThreadID=45;_ThreadName=Thread-2;|DPL8027: Ignore WEB-INF/sun-web.xml in archive /home/kelevra/glassfish3/glassfish/domains/domain1/applications/MO-1.0.1-alpha1-SNAPSHOT/ViewController-1.0.1-alpha1-SNAPSHOT_war/, as GlassFish counterpart runtime xml WEB-INF/glassfish-web.xml is present in the same archive.|#]\r\n    \r\n    [#|2012-09-25T15:54:14.565+0300|WARNING|glassfish3.1.2|javax.enterprise.resource.resourceadapter.com.sun.enterprise.connectors.util|_ThreadID=45;_ThreadName=Thread-2;|RAR8068: Using default datasource : __ds_jdbc_ra for pool : eFarmer-Pool|#]\r\n    \r\n    [#|2012-09-25T15:54:14.591+0300|SEVERE|glassfish3.1.2|javax.enterprise.system.tools.deployment.org.glassfish.deployment.common|_ThreadID=78;_ThreadName=Thread-2;|Exception while visiting com/sun/gjc/util/SQLTraceTimerTask.class of size 570\r\n    java.lang.NullPointerException\r\n    \tat org.glassfish.hk2.classmodel.reflect.impl.TypesImpl.getType(TypesImpl.java:78)\r\n    \tat org.glassfish.hk2.classmodel.reflect.impl.ModelClassVisitor.visit(ModelClassVisitor.java:119)\r\n    \tat org.objectweb.asm.ClassReader.accept(Unknown Source)\r\n    \tat org.objectweb.asm.ClassReader.accept(Unknown Source)\r\n    \tat org.glassfish.hk2.classmodel.reflect.Parser$5.on(Parser.java:363)\r\n    \tat org.glassfish.hk2.classmodel.reflect.util.JarArchive.onSelectedEntries(JarArchive.java:125)\r\n    \tat org.glassfish.hk2.classmodel.reflect.Parser.doJob(Parser.java:348)\r\n    \tat org.glassfish.hk2.classmodel.reflect.Parser.access$300(Parser.java:70)\r\n    \tat org.glassfish.hk2.classmodel.reflect.Parser$3.call(Parser.java:307)\r\n    \tat org.glassfish.hk2.classmodel.reflect.Parser$3.call(Parser.java:296)\r\n    \tat java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)\r\n    \tat java.util.concurrent.FutureTask.run(FutureTask.java:166)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\r\n    \tat java.lang.Thread.run(Thread.java:722)\r\n    |#]\r\n    \r\n    [#|2012-09-25T15:54:14.965+0300|WARNING|glassfish3.1.2|javax.enterprise.resource.resourceadapter.com.sun.enterprise.connectors.util|_ThreadID=45;_ThreadName=Thread-2;|RAR8068: Using default datasource : __ds_jdbc_ra for pool : eFarmer-Pool|#]\r\n    \r\n    [#|2012-09-25T15:54:17.224+0300|WARNING|glassfish3.1.2|org.eclipse.persistence.session.file:/home/kelevra/glassfish3/glassfish/domains/domain1/applications/MO-1.0.1-alpha1-SNAPSHOT/DataModel-1.0.1-alpha1-SNAPSHOT_jar/_eFarmer.weaver|_ThreadID=45;_ThreadName=Thread-2;|Weaver encountered an exception while trying to weave class com/km/orgfrm/datamodel/entity/AbstractEntity.  The exception was: java.lang.RuntimeException: java.lang.ClassNotFoundException: com.km.orgfrm.datamodel.entity.AbstractEntity not found by org.eclipse.persistence.asm [232]|#]\r\n    \r\n    java.lang.NoSuchMethodError: com.km.orgfrm.datamodel.entity.AbstractEntity.&lt;init&gt;(Lorg/eclipse/persistence/internal/descriptors/PersistenceObject;)V\r\n    \tat com.km.efarmer.datamodel.entity.order.operation.OperationTrackGeometryEntity.&lt;init&gt;(OperationTrackGeometryEntity.java)\r\n    \tat com.km.efarmer.datamodel.entity.order.operation.OperationTrackGeometryEntity._persistence_new(OperationTrackGeometryEntity.java)\r\n    \tat org.eclipse.persistence.internal.descriptors.PersistenceObjectInstantiationPolicy.buildNewInstance(PersistenceObjectInstantiationPolicy.java:30)\r\n    \tat org.eclipse.persistence.descriptors.ClassDescriptor.selfValidationAfterInitialization(ClassDescriptor.java:3870)\r\n    \tat org.eclipse.persistence.descriptors.ClassDescriptor.validateAfterInitialization(ClassDescriptor.java:5688)\r\n    \tat org.eclipse.persistence.descriptors.ClassDescriptor.postInitialize(ClassDescriptor.java:3547)\r\n    \tat org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:526)\r\n    \tat org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:476)\r\n    \tat org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:435)\r\n    \tat org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.postConnectDatasource(DatabaseSessionImpl.java:676)\r\n    \tat org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.login(DatabaseSessionImpl.java:634)\r\n    \tat org.eclipse.persistence.internal.jpa.EntityManagerFactoryProvider.login(EntityManagerFactoryProvider.java:208)\r\n    \tat org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:488)\r\n    \tat org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getDatabaseSession(EntityManagerFactoryDelegate.java:188)\r\n    \tat org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.createEntityManagerImpl(EntityManagerFactoryDelegate.java:277)\r\n    \tat org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:294)\r\n    \tat org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:272)\r\n    \tat org.glassfish.persistence.jpa.PersistenceUnitLoader.loadPU(PersistenceUnitLoader.java:211)\r\n    \tat org.glassfish.persistence.jpa.PersistenceUnitLoader.&lt;init&gt;(PersistenceUnitLoader.java:120)\r\n    \tat org.glassfish.persistence.jpa.JPADeployer$1.visitPUD(JPADeployer.java:224)\r\n    \tat org.glassfish.persistence.jpa.JPADeployer$PersistenceUnitDescriptorIterator.iteratePUDs(JPADeployer.java:495)\r\n    \tat org.glassfish.persistence.jpa.JPADeployer.createEMFs(JPADeployer.java:233)\r\n    \tat org.glassfish.persistence.jpa.JPADeployer.prepare(JPADeployer.java:168)\r\n    \tat com.sun.enterprise.v3.server.ApplicationLifecycle.prepareModule(ApplicationLifecycle.java:871)\r\n    \tat org.glassfish.javaee.full.deployment.EarDeployer.prepareBundle(EarDeployer.java:290)\r\n    \tat org.glassfish.javaee.full.deployment.EarDeployer.access$200(EarDeployer.java:86)\r\n    \tat org.glassfish.javaee.full.deployment.EarDeployer$1.doBundle(EarDeployer.java:141)\r\n    \tat org.glassfish.javaee.full.deployment.EarDeployer$1.doBundle(EarDeployer.java:138)\r\n    \tat org.glassfish.javaee.full.deployment.EarDeployer.doOnBundles(EarDeployer.java:215)\r\n    \tat org.glassfish.javaee.full.deployment.EarDeployer.doOnAllTypedBundles(EarDeployer.java:224)\r\n    \tat org.glassfish.javaee.full.deployment.EarDeployer.doOnAllBundles(EarDeployer.java:250)\r\n    \tat org.glassfish.javaee.full.deployment.EarDeployer.prepare(EarDeployer.java:138)\r\n    \tat com.sun.enterprise.v3.server.ApplicationLifecycle.prepareModule(ApplicationLifecycle.java:871)\r\n    \tat com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:410)\r\n    \tat com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)\r\n    \tat org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)\r\n    \tat com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)\r\n    \tat com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)\r\n    \tat com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)\r\n    \tat com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)\r\n    \tat com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)\r\n    \tat com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)\r\n    \tat com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)\r\n    \tat com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)\r\n    \tat com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)\r\n    \tat com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)\r\n    \tat com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)\r\n    \tat com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)\r\n    \tat com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)\r\n    \tat com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)\r\n    \tat com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)\r\n    \tat com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)\r\n    \tat com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)\r\n    \tat com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)\r\n    \tat com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)\r\n    \tat com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)\r\n    \tat com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)\r\n    \tat com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)\r\n    \tat com.sun.grizzly.ContextTask.run(ContextTask.java:71)\r\n    \tat com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)\r\n    \tat com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)\r\n    \tat java.lang.Thread.run(Thread.java:722)\r\n    |#]\r\n    \r\n    [#|2012-09-25T15:54:18.366+0300|SEVERE|glassfish3.1.2|javax.enterprise.system.tools.admin.org.glassfish.deployment.admin|_ThreadID=45;_ThreadName=Thread-2;|Exception while preparing the app : com.km.orgfrm.datamodel.entity.AbstractEntity.&lt;init&gt;(Lorg/eclipse/persistence/internal/descriptors/PersistenceObject;)V|#]\r\n\r\n","title":"NoSuchMethodException during deploying","body":"<p>I am using glassfish 3.1.2.2 server and idea ultimate edition 11 (on Ubuntu 12.04). While I am deploying my ear project there is an exception, first nullpointer then nosuchmethod.\nOn 3.0.1 of glassfish it works, but in 3.1.2 doesnot.</p>\n\n<p>Server log:</p>\n\n<pre><code>[#|2012-09-25T15:54:14.356+0300|WARNING|glassfish3.1.2|javax.enterprise.system.tools.deployment.org.glassfish.deployment.common|_ThreadID=45;_ThreadName=Thread-2;|DPL8027: Ignore WEB-INF/sun-web.xml in archive /home/kelevra/glassfish3/glassfish/domains/domain1/applications/MO-1.0.1-alpha1-SNAPSHOT/ViewController-1.0.1-alpha1-SNAPSHOT_war/, as GlassFish counterpart runtime xml WEB-INF/glassfish-web.xml is present in the same archive.|#]\n\n[#|2012-09-25T15:54:14.565+0300|WARNING|glassfish3.1.2|javax.enterprise.resource.resourceadapter.com.sun.enterprise.connectors.util|_ThreadID=45;_ThreadName=Thread-2;|RAR8068: Using default datasource : __ds_jdbc_ra for pool : eFarmer-Pool|#]\n\n[#|2012-09-25T15:54:14.591+0300|SEVERE|glassfish3.1.2|javax.enterprise.system.tools.deployment.org.glassfish.deployment.common|_ThreadID=78;_ThreadName=Thread-2;|Exception while visiting com/sun/gjc/util/SQLTraceTimerTask.class of size 570\njava.lang.NullPointerException\n    at org.glassfish.hk2.classmodel.reflect.impl.TypesImpl.getType(TypesImpl.java:78)\n    at org.glassfish.hk2.classmodel.reflect.impl.ModelClassVisitor.visit(ModelClassVisitor.java:119)\n    at org.objectweb.asm.ClassReader.accept(Unknown Source)\n    at org.objectweb.asm.ClassReader.accept(Unknown Source)\n    at org.glassfish.hk2.classmodel.reflect.Parser$5.on(Parser.java:363)\n    at org.glassfish.hk2.classmodel.reflect.util.JarArchive.onSelectedEntries(JarArchive.java:125)\n    at org.glassfish.hk2.classmodel.reflect.Parser.doJob(Parser.java:348)\n    at org.glassfish.hk2.classmodel.reflect.Parser.access$300(Parser.java:70)\n    at org.glassfish.hk2.classmodel.reflect.Parser$3.call(Parser.java:307)\n    at org.glassfish.hk2.classmodel.reflect.Parser$3.call(Parser.java:296)\n    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:166)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n    at java.lang.Thread.run(Thread.java:722)\n|#]\n\n[#|2012-09-25T15:54:14.965+0300|WARNING|glassfish3.1.2|javax.enterprise.resource.resourceadapter.com.sun.enterprise.connectors.util|_ThreadID=45;_ThreadName=Thread-2;|RAR8068: Using default datasource : __ds_jdbc_ra for pool : eFarmer-Pool|#]\n\n[#|2012-09-25T15:54:17.224+0300|WARNING|glassfish3.1.2|org.eclipse.persistence.session.file:/home/kelevra/glassfish3/glassfish/domains/domain1/applications/MO-1.0.1-alpha1-SNAPSHOT/DataModel-1.0.1-alpha1-SNAPSHOT_jar/_eFarmer.weaver|_ThreadID=45;_ThreadName=Thread-2;|Weaver encountered an exception while trying to weave class com/km/orgfrm/datamodel/entity/AbstractEntity.  The exception was: java.lang.RuntimeException: java.lang.ClassNotFoundException: com.km.orgfrm.datamodel.entity.AbstractEntity not found by org.eclipse.persistence.asm [232]|#]\n\njava.lang.NoSuchMethodError: com.km.orgfrm.datamodel.entity.AbstractEntity.&lt;init&gt;(Lorg/eclipse/persistence/internal/descriptors/PersistenceObject;)V\n    at com.km.efarmer.datamodel.entity.order.operation.OperationTrackGeometryEntity.&lt;init&gt;(OperationTrackGeometryEntity.java)\n    at com.km.efarmer.datamodel.entity.order.operation.OperationTrackGeometryEntity._persistence_new(OperationTrackGeometryEntity.java)\n    at org.eclipse.persistence.internal.descriptors.PersistenceObjectInstantiationPolicy.buildNewInstance(PersistenceObjectInstantiationPolicy.java:30)\n    at org.eclipse.persistence.descriptors.ClassDescriptor.selfValidationAfterInitialization(ClassDescriptor.java:3870)\n    at org.eclipse.persistence.descriptors.ClassDescriptor.validateAfterInitialization(ClassDescriptor.java:5688)\n    at org.eclipse.persistence.descriptors.ClassDescriptor.postInitialize(ClassDescriptor.java:3547)\n    at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:526)\n    at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:476)\n    at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:435)\n    at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.postConnectDatasource(DatabaseSessionImpl.java:676)\n    at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.login(DatabaseSessionImpl.java:634)\n    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryProvider.login(EntityManagerFactoryProvider.java:208)\n    at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:488)\n    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getDatabaseSession(EntityManagerFactoryDelegate.java:188)\n    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.createEntityManagerImpl(EntityManagerFactoryDelegate.java:277)\n    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:294)\n    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:272)\n    at org.glassfish.persistence.jpa.PersistenceUnitLoader.loadPU(PersistenceUnitLoader.java:211)\n    at org.glassfish.persistence.jpa.PersistenceUnitLoader.&lt;init&gt;(PersistenceUnitLoader.java:120)\n    at org.glassfish.persistence.jpa.JPADeployer$1.visitPUD(JPADeployer.java:224)\n    at org.glassfish.persistence.jpa.JPADeployer$PersistenceUnitDescriptorIterator.iteratePUDs(JPADeployer.java:495)\n    at org.glassfish.persistence.jpa.JPADeployer.createEMFs(JPADeployer.java:233)\n    at org.glassfish.persistence.jpa.JPADeployer.prepare(JPADeployer.java:168)\n    at com.sun.enterprise.v3.server.ApplicationLifecycle.prepareModule(ApplicationLifecycle.java:871)\n    at org.glassfish.javaee.full.deployment.EarDeployer.prepareBundle(EarDeployer.java:290)\n    at org.glassfish.javaee.full.deployment.EarDeployer.access$200(EarDeployer.java:86)\n    at org.glassfish.javaee.full.deployment.EarDeployer$1.doBundle(EarDeployer.java:141)\n    at org.glassfish.javaee.full.deployment.EarDeployer$1.doBundle(EarDeployer.java:138)\n    at org.glassfish.javaee.full.deployment.EarDeployer.doOnBundles(EarDeployer.java:215)\n    at org.glassfish.javaee.full.deployment.EarDeployer.doOnAllTypedBundles(EarDeployer.java:224)\n    at org.glassfish.javaee.full.deployment.EarDeployer.doOnAllBundles(EarDeployer.java:250)\n    at org.glassfish.javaee.full.deployment.EarDeployer.prepare(EarDeployer.java:138)\n    at com.sun.enterprise.v3.server.ApplicationLifecycle.prepareModule(ApplicationLifecycle.java:871)\n    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:410)\n    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)\n    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)\n    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)\n    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)\n    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)\n    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)\n    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)\n    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)\n    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)\n    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)\n    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)\n    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)\n    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)\n    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)\n    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)\n    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)\n    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)\n    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)\n    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)\n    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)\n    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)\n    at java.lang.Thread.run(Thread.java:722)\n|#]\n\n[#|2012-09-25T15:54:18.366+0300|SEVERE|glassfish3.1.2|javax.enterprise.system.tools.admin.org.glassfish.deployment.admin|_ThreadID=45;_ThreadName=Thread-2;|Exception while preparing the app : com.km.orgfrm.datamodel.entity.AbstractEntity.&lt;init&gt;(Lorg/eclipse/persistence/internal/descriptors/PersistenceObject;)V|#]\n</code></pre>\n"},{"tags":["java","azure","azure-blob-storage"],"comments":[{"owner":{"account_id":25323437,"reputation":5152,"user_id":19144428,"display_name":"Venkatesan"},"score":0,"creation_date":1692673592,"post_id":76946664,"comment_id":135652544,"body_markdown":"Hi, @Vicente Montoro Try to add while creating a sas token with list permission like `BlobSasPermission permission = new BlobSasPermission().setReadPermission(true).setListPermission(true); `","body":"Hi, @Vicente Montoro Try to add while creating a sas token with list permission like <code>BlobSasPermission permission = new BlobSasPermission().setReadPermission(true).setListPermissio&zwnj;&#8203;n(true); </code>"},{"owner":{"account_id":26256923,"reputation":5,"user_id":19928842,"display_name":"Vicente Montoro"},"score":0,"creation_date":1692693645,"post_id":76946664,"comment_id":135655281,"body_markdown":"Hey @Venkatesan! Thanks for your quick answer. However, the behaviour is the same. I continue having a 0B file with no content.","body":"Hey @Venkatesan! Thanks for your quick answer. However, the behaviour is the same. I continue having a 0B file with no content."},{"owner":{"account_id":25323437,"reputation":5152,"user_id":19144428,"display_name":"Venkatesan"},"score":0,"creation_date":1692694100,"post_id":76946664,"comment_id":135655367,"body_markdown":"Hi @Vicento Montoro I tried with sample code https://i.imgur.com/IgTx3rT.png it copied succesfully with content https://i.imgur.com/4Ecf4Q5.png.","body":"Hi @Vicento Montoro I tried with sample code <a href=\"https://i.imgur.com/IgTx3rT.png\" rel=\"nofollow noreferrer\">i.imgur.com/IgTx3rT.png</a> it copied succesfully with content <a href=\"https://i.imgur.com/4Ecf4Q5.png\" rel=\"nofollow noreferrer\">i.imgur.com/4Ecf4Q5.png</a>."},{"owner":{"account_id":26256923,"reputation":5,"user_id":19928842,"display_name":"Vicente Montoro"},"score":0,"creation_date":1692694741,"post_id":76946664,"comment_id":135655495,"body_markdown":"Ok, @Venkatesan, ill try it again but... do you have your source as public?\nWhen i try to get the archive status: \ndesObject.getProperties().getArchiveStatus();\nArchiveStatus.REHYDRATE_PENDING_TO_COOL.equals(status)\nI receive a null (thats why its not rehydrating)\nThank you again!","body":"Ok, @Venkatesan, ill try it again but... do you have your source as public? When i try to get the archive status:  desObject.getProperties().getArchiveStatus(); ArchiveStatus.REHYDRATE_PENDING_TO_COOL.equals(status) I receive a null (thats why its not rehydrating) Thank you again!"}],"answers":[{"tags":[],"owner":{"account_id":25323437,"reputation":5152,"user_id":19144428,"display_name":"Venkatesan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692698565,"creation_date":1692698565,"answer_id":76952183,"question_id":76946664,"body_markdown":"You can use the below code to copy files with tier from one storage account to another storage account using Java SDK.\r\n\r\n**Code:**\r\n\r\n    import com.azure.storage.blob.BlobServiceClientBuilder;\r\n    import com.azure.storage.blob.BlobClient;\r\n    import com.azure.storage.blob.models.AccessTier;\r\n    import com.azure.storage.blob.models.RehydratePriority;\r\n    import com.azure.storage.blob.sas.BlobSasPermission;\r\n    import com.azure.storage.blob.sas.BlobServiceSasSignatureValues;\r\n    \r\n    import java.time.OffsetDateTime;\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    \r\n    public class App {\r\n    \r\n        public static void main(String[] args) {\r\n            String sourceConnectionString = &quot;sourceconnect-string&quot;;\r\n            String destConnectionString = &quot;destinationconnectstring&quot;;\r\n            String sourceContainerName = &quot;test&quot;;\r\n            String destContainerName = &quot;test1&quot;;\r\n            String sourceBlobName = &quot;sample326.txt&quot;;\r\n            String destBlobName = &quot;demo.txt&quot;;\r\n            \r\n            // Initialize source and destination clients\r\n            BlobClient sourceBlobClient = new BlobServiceClientBuilder().connectionString(sourceConnectionString)\r\n                    .buildClient().getBlobContainerClient(sourceContainerName).getBlobClient(sourceBlobName);\r\n            BlobClient destBlobClient = new BlobServiceClientBuilder().connectionString(destConnectionString)\r\n                    .buildClient().getBlobContainerClient(destContainerName).getBlobClient(destBlobName);\r\n            \r\n            // Generate SAS token for source blob\r\n            OffsetDateTime sasExpiry = OffsetDateTime.now().plusMinutes(1);\r\n            BlobSasPermission permission = new BlobSasPermission().setReadPermission(true);\r\n            BlobServiceSasSignatureValues sas = new BlobServiceSasSignatureValues(sasExpiry, permission);\r\n            String sourceURL = sourceBlobClient.getBlobUrl() + &quot;?&quot; + sourceBlobClient.generateSas(sas);\r\n            \r\n            // Set metadata for destination blob\r\n            Map&lt;String, String&gt; metadata = new HashMap&lt;&gt;();\r\n            metadata.put(&quot;key&quot;, &quot;value&quot;);\r\n            \r\n            // Perform the blob copy with rehydration\r\n            destBlobClient.beginCopy(sourceURL, metadata, AccessTier.COOL, RehydratePriority.HIGH, null, null, null);\r\n            \r\n            System.out.println(&quot;Blob copy operation initiated with rehydration.&quot;);\r\n        }\r\n    }\r\n\r\n**Output:**\r\n\r\n    Blob copy operation initiated with rehydration.\r\n![enter image description here](https://i.imgur.com/zRLUgu5.png)\r\n\r\n**Portal:**\r\n![enter image description here](https://i.imgur.com/d1ftHEA.png)\r\n\r\n**Reference:**\r\n\r\n[BlobClientBase Class | Microsoft Learn](https://learn.microsoft.com/en-us/java/api/com.azure.storage.blob.specialized.blobclientbase?view=azure-java-stable#method-details)","title":"Azure rehydrate copying blob to different account [java]","body":"<p>You can use the below code to copy files with tier from one storage account to another storage account using Java SDK.</p>\n<p><strong>Code:</strong></p>\n<pre><code>import com.azure.storage.blob.BlobServiceClientBuilder;\nimport com.azure.storage.blob.BlobClient;\nimport com.azure.storage.blob.models.AccessTier;\nimport com.azure.storage.blob.models.RehydratePriority;\nimport com.azure.storage.blob.sas.BlobSasPermission;\nimport com.azure.storage.blob.sas.BlobServiceSasSignatureValues;\n\nimport java.time.OffsetDateTime;\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class App {\n\n    public static void main(String[] args) {\n        String sourceConnectionString = &quot;sourceconnect-string&quot;;\n        String destConnectionString = &quot;destinationconnectstring&quot;;\n        String sourceContainerName = &quot;test&quot;;\n        String destContainerName = &quot;test1&quot;;\n        String sourceBlobName = &quot;sample326.txt&quot;;\n        String destBlobName = &quot;demo.txt&quot;;\n        \n        // Initialize source and destination clients\n        BlobClient sourceBlobClient = new BlobServiceClientBuilder().connectionString(sourceConnectionString)\n                .buildClient().getBlobContainerClient(sourceContainerName).getBlobClient(sourceBlobName);\n        BlobClient destBlobClient = new BlobServiceClientBuilder().connectionString(destConnectionString)\n                .buildClient().getBlobContainerClient(destContainerName).getBlobClient(destBlobName);\n        \n        // Generate SAS token for source blob\n        OffsetDateTime sasExpiry = OffsetDateTime.now().plusMinutes(1);\n        BlobSasPermission permission = new BlobSasPermission().setReadPermission(true);\n        BlobServiceSasSignatureValues sas = new BlobServiceSasSignatureValues(sasExpiry, permission);\n        String sourceURL = sourceBlobClient.getBlobUrl() + &quot;?&quot; + sourceBlobClient.generateSas(sas);\n        \n        // Set metadata for destination blob\n        Map&lt;String, String&gt; metadata = new HashMap&lt;&gt;();\n        metadata.put(&quot;key&quot;, &quot;value&quot;);\n        \n        // Perform the blob copy with rehydration\n        destBlobClient.beginCopy(sourceURL, metadata, AccessTier.COOL, RehydratePriority.HIGH, null, null, null);\n        \n        System.out.println(&quot;Blob copy operation initiated with rehydration.&quot;);\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>Blob copy operation initiated with rehydration.\n</code></pre>\n<p><img src=\"https://i.imgur.com/zRLUgu5.png\" alt=\"enter image description here\" /></p>\n<p><strong>Portal:</strong>\n<img src=\"https://i.imgur.com/d1ftHEA.png\" alt=\"enter image description here\" /></p>\n<p><strong>Reference:</strong></p>\n<p><a href=\"https://learn.microsoft.com/en-us/java/api/com.azure.storage.blob.specialized.blobclientbase?view=azure-java-stable#method-details\" rel=\"nofollow noreferrer\">BlobClientBase Class | Microsoft Learn</a></p>\n"}],"owner":{"account_id":26256923,"reputation":5,"user_id":19928842,"display_name":"Vicente Montoro"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":116,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76952183,"answer_count":1,"score":0,"last_activity_date":1692952718,"creation_date":1692631058,"question_id":76946664,"body_markdown":"Im having an issue related to the rehydration process while I&#39;m trying to make a copy of one blob to another account.\r\n\r\nI have two different clients, one for the source and other one for the dest:\r\n\r\n    BlobClient blobMeta = sourceClient.getBlobContainerClient(source.getContainer()).getBlobClient(key);\r\n    BlobClient destObject = destClient.getBlobContainerClient(dest.getContainer()).getBlobClient(key);\r\n\r\nAs I read in the docs, for doing a copy in a different account, you should add the SAS token (&quot;If the source is in another account, the source must either be public or authenticated with a SAS token.&quot;), so...\r\n\r\n    OffsetDateTime sasExpiry = OffsetDateTime.now().plusMinutes(1);\r\n    BlobSasPermission permission = new BlobSasPermission().setReadPermission(true);\r\n    BlobServiceSasSignatureValues sas = new BlobServiceSasSignatureValues(sasExpiry,permission).setStartTime(OffsetDateTime.now());\r\n    String sourceURL = blobMeta.getBlobUrl() + &quot;?&quot; + blobMeta.generateSas(sas);\r\n\r\nOnce I have the different blobs and the SAS token I continue with the beginCopy operation setting the new options for the rehydration process (from Archive to Cool and the priority):\r\n\r\n    destObject.beginCopy(sourceURL, blobMeta.getProperties().getMetadata(), AccessTier.COOL, RehydratePriority.STANDARD, null, null, null);\r\n\r\nEverything seems working properly but, this line creates directly the files with an 0B of size and there is no waiting time for rehydrate process (obviously is not doing anything, just copying empty info. However, the metadata is properly assigned). For the same account in a different container, everything works fine. Moreover, copying without adding the rehydration info (when the files are not stored in an archive tier) works fine too.\r\n\r\nDoes someone have any idea about what can be happening here?\r\n\r\nThank you!\r\n\r\nI tried what I added above and I expect to copy the data with the correct size and content.\r\n\r\nPD: The issue was the different region of the accounts. Begincopy method with the hydration process is not supported yet. For doing this, is necessary setting the tier to Cool / Hot in the original account and then, doing the copy.","title":"Azure rehydrate copying blob to different account [java]","body":"<p>Im having an issue related to the rehydration process while I'm trying to make a copy of one blob to another account.</p>\n<p>I have two different clients, one for the source and other one for the dest:</p>\n<pre><code>BlobClient blobMeta = sourceClient.getBlobContainerClient(source.getContainer()).getBlobClient(key);\nBlobClient destObject = destClient.getBlobContainerClient(dest.getContainer()).getBlobClient(key);\n</code></pre>\n<p>As I read in the docs, for doing a copy in a different account, you should add the SAS token (&quot;If the source is in another account, the source must either be public or authenticated with a SAS token.&quot;), so...</p>\n<pre><code>OffsetDateTime sasExpiry = OffsetDateTime.now().plusMinutes(1);\nBlobSasPermission permission = new BlobSasPermission().setReadPermission(true);\nBlobServiceSasSignatureValues sas = new BlobServiceSasSignatureValues(sasExpiry,permission).setStartTime(OffsetDateTime.now());\nString sourceURL = blobMeta.getBlobUrl() + &quot;?&quot; + blobMeta.generateSas(sas);\n</code></pre>\n<p>Once I have the different blobs and the SAS token I continue with the beginCopy operation setting the new options for the rehydration process (from Archive to Cool and the priority):</p>\n<pre><code>destObject.beginCopy(sourceURL, blobMeta.getProperties().getMetadata(), AccessTier.COOL, RehydratePriority.STANDARD, null, null, null);\n</code></pre>\n<p>Everything seems working properly but, this line creates directly the files with an 0B of size and there is no waiting time for rehydrate process (obviously is not doing anything, just copying empty info. However, the metadata is properly assigned). For the same account in a different container, everything works fine. Moreover, copying without adding the rehydration info (when the files are not stored in an archive tier) works fine too.</p>\n<p>Does someone have any idea about what can be happening here?</p>\n<p>Thank you!</p>\n<p>I tried what I added above and I expect to copy the data with the correct size and content.</p>\n<p>PD: The issue was the different region of the accounts. Begincopy method with the hydration process is not supported yet. For doing this, is necessary setting the tier to Cool / Hot in the original account and then, doing the copy.</p>\n"},{"tags":["java","spring","openapi","openapi-generator"],"comments":[{"owner":{"account_id":345047,"reputation":10337,"user_id":677735,"display_name":"William Cheng"},"score":0,"creation_date":1693880023,"post_id":76975549,"comment_id":135814422,"body_markdown":"FYI. [OpenAPI Generator v7.0.0](https://github.com/OpenAPITools/openapi-generator/releases/tag/v7.0.0) has been released. Please give it a try to see it works better for your use cases.","body":"FYI. <a href=\"https://github.com/OpenAPITools/openapi-generator/releases/tag/v7.0.0\" rel=\"nofollow noreferrer\">OpenAPI Generator v7.0.0</a> has been released. Please give it a try to see it works better for your use cases."}],"owner":{"account_id":25103965,"reputation":89,"user_id":18954336,"display_name":"JoeBloggs"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":358,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692952364,"creation_date":1692952364,"question_id":76975549,"body_markdown":"I am using [Spring OpenApi generator][1] for my Spring Boot web app. Everything worked fine for version 6.0.0, but now I want to update it to the latest version (6.6.0). My gradle task looks like this:\r\n\r\n    openApiGenerate {\r\n        generatorName = &quot;spring&quot;\r\n        inputSpec = &quot;$projectDir/src/main/resources/openapi.yaml&quot;\r\n        outputDir = &quot;$buildDir/generated&quot;\r\n        apiPackage = &quot;com.myapp.web.api.controller&quot;\r\n        invokerPackage = &quot;com.myapp.web.api.invoker&quot;\r\n        modelPackage = &quot;com.myapp.web.api.model&quot;\r\n        modelNamePrefix = &quot;Dto&quot;\r\n        configOptions = [\r\n                openApiNullable: &quot;false&quot;,\r\n                useSwaggerUI: &quot;false&quot;,\r\n                delegatePattern: &quot;true&quot;,\r\n                useTags: &quot;true&quot;,\r\n                implicitHeaders: &quot;true&quot;,\r\n                additionalModelTypeAnnotations: &quot;@lombok.AllArgsConstructor;@lombok.NoArgsConstructor;@lombok.Builder(toBuilder = true)&quot;,\r\n                performBeanValidation: &quot;true&quot;,\r\n                generatedConstructorWithRequiredArgs: &quot;false&quot;\r\n        ]\r\n    }\r\n\r\nEverything was fine for the previous version of the generator, but with 6.6.0 it throws `java.lang.IllegalStateException: Ambiguous mapping. Cannot map {CONTROLLER} method`.\r\n\r\nI assume it is because it generates controllers with &quot;RequestMapping&quot; annotation\r\n\r\n    @Controller\r\n    @RequestMapping(&quot;${openapi.myapp.base-path:}&quot;)\r\n    public class StuffApiController implements StuffApi {\r\n\r\nIs it possible to prevent it from adding RequestMapping on the Controller class somehow? Or what is the correct configuration to generate all three of Api, Controller and Delegate correctly?\r\n\r\n  [1]: https://openapi-generator.tech/docs/generators/spring/","title":"How to generate Delegates and Controllers for Spring OpenApi generator 6.6.0","body":"<p>I am using <a href=\"https://openapi-generator.tech/docs/generators/spring/\" rel=\"nofollow noreferrer\">Spring OpenApi generator</a> for my Spring Boot web app. Everything worked fine for version 6.0.0, but now I want to update it to the latest version (6.6.0). My gradle task looks like this:</p>\n<pre><code>openApiGenerate {\n    generatorName = &quot;spring&quot;\n    inputSpec = &quot;$projectDir/src/main/resources/openapi.yaml&quot;\n    outputDir = &quot;$buildDir/generated&quot;\n    apiPackage = &quot;com.myapp.web.api.controller&quot;\n    invokerPackage = &quot;com.myapp.web.api.invoker&quot;\n    modelPackage = &quot;com.myapp.web.api.model&quot;\n    modelNamePrefix = &quot;Dto&quot;\n    configOptions = [\n            openApiNullable: &quot;false&quot;,\n            useSwaggerUI: &quot;false&quot;,\n            delegatePattern: &quot;true&quot;,\n            useTags: &quot;true&quot;,\n            implicitHeaders: &quot;true&quot;,\n            additionalModelTypeAnnotations: &quot;@lombok.AllArgsConstructor;@lombok.NoArgsConstructor;@lombok.Builder(toBuilder = true)&quot;,\n            performBeanValidation: &quot;true&quot;,\n            generatedConstructorWithRequiredArgs: &quot;false&quot;\n    ]\n}\n</code></pre>\n<p>Everything was fine for the previous version of the generator, but with 6.6.0 it throws <code>java.lang.IllegalStateException: Ambiguous mapping. Cannot map {CONTROLLER} method</code>.</p>\n<p>I assume it is because it generates controllers with &quot;RequestMapping&quot; annotation</p>\n<pre><code>@Controller\n@RequestMapping(&quot;${openapi.myapp.base-path:}&quot;)\npublic class StuffApiController implements StuffApi {\n</code></pre>\n<p>Is it possible to prevent it from adding RequestMapping on the Controller class somehow? Or what is the correct configuration to generate all three of Api, Controller and Delegate correctly?</p>\n"},{"tags":["java","spring-boot","docker"],"comments":[{"owner":{"account_id":45934,"reputation":203649,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":0,"creation_date":1692952425,"post_id":76975535,"comment_id":135697497,"body_markdown":"How are you trying to view the logs? Try `docker compose logs -f springboot-app`","body":"How are you trying to view the logs? Try <code>docker compose logs -f springboot-app</code>"},{"owner":{"account_id":23879688,"reputation":31,"user_id":17880537,"display_name":"coderoffuture"},"score":0,"creation_date":1692952546,"post_id":76975535,"comment_id":135697523,"body_markdown":"I view them from Docker desktop-Logs","body":"I view them from Docker desktop-Logs"}],"owner":{"account_id":23879688,"reputation":31,"user_id":17880537,"display_name":"coderoffuture"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692952251,"creation_date":1692952251,"question_id":76975535,"body_markdown":"I have a basic Spring Boot app and I can&#39;t see any of the System.out.println values on my Docker container logs (methods work)\r\nHere is the code:\r\n\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/user&quot;)\r\npublic class UserController {\r\n\r\n    @Value(&quot;${selenium.url}&quot;)\r\n    private String host;\r\n\r\n    @Value(&quot;${selenium.me}&quot;)\r\n    private String name;\r\n\r\n    @Autowired\r\n    public UserController(WebDriver webDriver) {\r\n        this.webDriver = webDriver;\r\n    }\r\n\r\n    @PostMapping\r\n    public ResponseEntity&lt;User&gt; createUser(@RequestBody User user) {\r\n        System.out.println(&quot;creating&quot;);\r\n        User created = userService.save(user);\r\n        return new ResponseEntity&lt;&gt;(created, HttpStatus.CREATED);\r\n    }\r\n\r\n    @GetMapping(&quot;/{username}&quot;)\r\n    public ResponseEntity&lt;User&gt; getUserByUsername(@PathVariable String username) {\r\n        System.out.println(&quot;hello&quot;);\r\n        System.out.println(&quot;hello, &quot;+ name );\r\n        User user = userService.getByUsername(username);\r\n        if (user != null) {\r\n            return new ResponseEntity&lt;&gt;(user, HttpStatus.OK);\r\n        }\r\n        return new ResponseEntity&lt;&gt;(HttpStatus.NOT_FOUND);\r\n    }\r\n}\r\n```\r\n\r\nActually I was trying to see if &quot;selenium.url&quot; value has changed because I declare it again in docker-compose.yml but I can&#39;t even just see basic sysout. What should I do?\r\n\r\nDockerfile:\r\n```\r\nFROM eclipse-temurin:17-jdk-alpine\r\nARG JAR_FILE=target/*.jar\r\nCOPY ./target/elasticSpring-0.0.1-SNAPSHOT.jar elasticSpring.jar\r\nENTRYPOINT [ &quot;java&quot;,&quot;-jar&quot;,&quot;/elasticSpring.jar&quot; ]\r\n```\r\n\r\nAnd I&#39;m not sure if it&#39;s needed but here is my compose:\r\n\r\n```\r\nversion: &#39;1&#39;\r\nservices:\r\n  es:\r\n    image: docker.elastic.co/elasticsearch/elasticsearch:7.17.12\r\n    container_name: es\r\n    ports:\r\n      - 9200:9200\r\n      - 9300:9300\r\n    environment:\r\n      - discovery.type=single-node\r\n    networks:\r\n      - mynet\r\n\r\n  chrome:\r\n    image: selenium/standalone-chrome:latest\r\n    container_name: chrome\r\n    ports:\r\n      - 4444:4444\r\n    networks:\r\n      - mynet\r\n\r\n  springboot-app:\r\n    build:\r\n      context: .\r\n      dockerfile: Dockerfile\r\n    container_name: springElastic\r\n    ports:\r\n      - 8080:8080\r\n    environment:\r\n      - spring.elasticsearch.uris=es:9200\r\n      - spring.data.elasticsearch.cluster-nodes=es:9200\r\n      - selenium.url=chrome:4444/wd/hub\r\n    depends_on:\r\n      - es\r\n    networks:\r\n      - mynet\r\n\r\nnetworks:\r\n  mynet:\r\n    driver: bridge\r\n```","title":"Spring Boot-Docker Can&#39;t See Logs Of Code","body":"<p>I have a basic Spring Boot app and I can't see any of the System.out.println values on my Docker container logs (methods work)\nHere is the code:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/user&quot;)\npublic class UserController {\n\n    @Value(&quot;${selenium.url}&quot;)\n    private String host;\n\n    @Value(&quot;${selenium.me}&quot;)\n    private String name;\n\n    @Autowired\n    public UserController(WebDriver webDriver) {\n        this.webDriver = webDriver;\n    }\n\n    @PostMapping\n    public ResponseEntity&lt;User&gt; createUser(@RequestBody User user) {\n        System.out.println(&quot;creating&quot;);\n        User created = userService.save(user);\n        return new ResponseEntity&lt;&gt;(created, HttpStatus.CREATED);\n    }\n\n    @GetMapping(&quot;/{username}&quot;)\n    public ResponseEntity&lt;User&gt; getUserByUsername(@PathVariable String username) {\n        System.out.println(&quot;hello&quot;);\n        System.out.println(&quot;hello, &quot;+ name );\n        User user = userService.getByUsername(username);\n        if (user != null) {\n            return new ResponseEntity&lt;&gt;(user, HttpStatus.OK);\n        }\n        return new ResponseEntity&lt;&gt;(HttpStatus.NOT_FOUND);\n    }\n}\n</code></pre>\n<p>Actually I was trying to see if &quot;selenium.url&quot; value has changed because I declare it again in docker-compose.yml but I can't even just see basic sysout. What should I do?</p>\n<p>Dockerfile:</p>\n<pre><code>FROM eclipse-temurin:17-jdk-alpine\nARG JAR_FILE=target/*.jar\nCOPY ./target/elasticSpring-0.0.1-SNAPSHOT.jar elasticSpring.jar\nENTRYPOINT [ &quot;java&quot;,&quot;-jar&quot;,&quot;/elasticSpring.jar&quot; ]\n</code></pre>\n<p>And I'm not sure if it's needed but here is my compose:</p>\n<pre><code>version: '1'\nservices:\n  es:\n    image: docker.elastic.co/elasticsearch/elasticsearch:7.17.12\n    container_name: es\n    ports:\n      - 9200:9200\n      - 9300:9300\n    environment:\n      - discovery.type=single-node\n    networks:\n      - mynet\n\n  chrome:\n    image: selenium/standalone-chrome:latest\n    container_name: chrome\n    ports:\n      - 4444:4444\n    networks:\n      - mynet\n\n  springboot-app:\n    build:\n      context: .\n      dockerfile: Dockerfile\n    container_name: springElastic\n    ports:\n      - 8080:8080\n    environment:\n      - spring.elasticsearch.uris=es:9200\n      - spring.data.elasticsearch.cluster-nodes=es:9200\n      - selenium.url=chrome:4444/wd/hub\n    depends_on:\n      - es\n    networks:\n      - mynet\n\nnetworks:\n  mynet:\n    driver: bridge\n</code></pre>\n"},{"tags":["java","enumset"],"answers":[{"tags":[],"owner":{"account_id":284516,"reputation":14349,"user_id":582675,"accept_rate":75,"display_name":"Fabian Barney"},"down_vote_count":0,"up_vote_count":32,"is_accepted":false,"score":32,"last_activity_date":1481622496,"creation_date":1481622496,"answer_id":41117948,"question_id":41117898,"body_markdown":"Use `EnumSet.noneOf(Class)` to create an empty EnumSet.","title":"How to create empty EnumSet?","body":"<p>Use <code>EnumSet.noneOf(Class)</code> to create an empty EnumSet.</p>\n"},{"tags":[],"owner":{"account_id":45934,"reputation":203649,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"down_vote_count":0,"up_vote_count":110,"is_accepted":true,"score":110,"last_activity_date":1692952162,"creation_date":1481622558,"answer_id":41117971,"question_id":41117898,"body_markdown":"Use the method [`EnumSet.noneOf`][1]:\r\n\r\n```java\r\nEnumSet&lt;MyClass&gt; x = EnumSet.noneOf(MyClass.class);\r\n```\r\n\r\n[1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/EnumSet.html#noneOf(java.lang.Class)","title":"How to create empty EnumSet?","body":"<p>Use the method <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/EnumSet.html#noneOf(java.lang.Class)\" rel=\"nofollow noreferrer\"><code>EnumSet.noneOf</code></a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>EnumSet&lt;MyClass&gt; x = EnumSet.noneOf(MyClass.class);\n</code></pre>\n"}],"owner":{"account_id":2443343,"reputation":1856,"user_id":2307520,"accept_rate":71,"display_name":"David162795"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24928,"favorite_count":0,"down_vote_count":0,"up_vote_count":64,"accepted_answer_id":41117971,"answer_count":2,"score":64,"last_activity_date":1692952162,"creation_date":1481622318,"question_id":41117898,"body_markdown":"I am struggling with `EnumSet` as it surprisingly doesn&#39;t have a simple constructor and its methods doesn&#39;t like null values.\r\n\r\nWhat I came up with:\r\n``` lang-java\r\nEnumSet&lt;MyClass&gt; x = EnumSet.copyOf(Collections.&lt;MyClass&gt;emptySet());\r\n```\r\n\r\nWhich somewhat works but doesn&#39;t seem right to me.","title":"How to create empty EnumSet?","body":"<p>I am struggling with <code>EnumSet</code> as it surprisingly doesn't have a simple constructor and its methods doesn't like null values.</p>\n<p>What I came up with:</p>\n<pre class=\"lang-java prettyprint-override\"><code>EnumSet&lt;MyClass&gt; x = EnumSet.copyOf(Collections.&lt;MyClass&gt;emptySet());\n</code></pre>\n<p>Which somewhat works but doesn't seem right to me.</p>\n"},{"tags":["java","postgresql","java-time"],"comments":[{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":2,"creation_date":1571320713,"post_id":58434148,"comment_id":103209158,"body_markdown":"The correct corresponding Java class is `LocalDateTime`.","body":"The correct corresponding Java class is <code>LocalDateTime</code>."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1571760717,"post_id":58434148,"comment_id":103344629,"body_markdown":"While `TIMESTAMP WITHOUT TIME ZONE` does live up to (down to?) *without time zone*, it doesn’t live up to *timestamp* since it doesn’t uniquely define a point in time. If there’s a way you can, use `TIMESTAMP WITH TIME ZONE` instead (which lives up to *timestamp* but not really to *with time zone*).","body":"While <code>TIMESTAMP WITHOUT TIME ZONE</code> does live up to (down to?) <i>without time zone</i>, it doesn’t live up to <i>timestamp</i> since it doesn’t uniquely define a point in time. If there’s a way you can, use <code>TIMESTAMP WITH TIME ZONE</code> instead (which lives up to <i>timestamp</i> but not really to <i>with time zone</i>)."},{"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"score":0,"creation_date":1692904343,"post_id":58434148,"comment_id":135691425,"body_markdown":"Check [this answer](https://stackoverflow.com/a/67752047/10819573) and [this answer](https://stackoverflow.com/a/67505173/10819573) to learn how to use `java.time` API with JDBC.","body":"Check <a href=\"https://stackoverflow.com/a/67752047/10819573\">this answer</a> and <a href=\"https://stackoverflow.com/a/67505173/10819573\">this answer</a> to learn how to use <code>java.time</code> API with JDBC."}],"answers":[{"tags":[],"owner":{"account_id":1528364,"reputation":125594,"user_id":1426227,"accept_rate":79,"display_name":"cassiomolin"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1692952098,"creation_date":1571320480,"answer_id":58434361,"question_id":58434148,"body_markdown":"## Short answer\r\n\r\nAs per the [PostgreSQL JDBC driver documentation][3], [`Instant`][1] is not supported. But you shouldn&#39;t have issues with [`OffsetDateTime`][2] in UTC.\r\n\r\n---\r\n## Long answer\r\n\r\nThe [PostgreSQL JDBC driver documentation][3] mentions that a corresponding type for `TIMESTAMP [ WITHOUT TIMEZONE ]` is [`LocalDateTime`][4], but [`OffsetDateTime`][2] in UTC is also supported. On the other hand, [`Instant`][1] is not supported.\r\n\r\nSee the quote below:\r\n\r\n&gt;```\r\n&gt; +--------------------------------+----------------+\r\n&gt; | PostgreSQL™                    | Java SE 8      |\r\n&gt; +--------------------------------+----------------+\r\n&gt; | DATE                           | LocalDate      |\r\n&gt; | TIME [ WITHOUT TIMEZONE ]      | LocalTime      |\r\n&gt; | TIMESTAMP [ WITHOUT TIMEZONE ] | LocalDateTime  |\r\n&gt; | TIMESTAMP WITH TIMEZONE        | OffsetDateTime |\r\n&gt; +--------------------------------+----------------+\r\n&gt;```\r\n&gt;\r\n&gt; This is closely aligned with tables B-4 and B-5 of the JDBC 4.2 specification.\r\n&gt;\r\n&gt; **Note**  \r\n&gt; `ZonedDateTime`, `Instant` and `OffsetTime / TIME [ WITHOUT TIMEZONE ]` are not supported. Also note that all `OffsetDateTime` will instances will have be in UTC (have offset 0). This is because the backend stores them as UTC.\r\n\r\nAnd the [JDBC 4.2 specification][5] mention support for [`Instant`][1].\r\n\r\n---\r\n\r\nAlso see the following quote from the [`OffsetDateTime`][2] class documentation (highlight is mine):\r\n\r\n&gt; `OffsetDateTime`, `ZonedDateTime` and `Instant` all store an instant on the time-line to nanosecond precision. Instant is the simplest, simply representing the instant. `OffsetDateTime` adds to the instant the offset from UTC/Greenwich, which allows the local date-time to be obtained. `ZonedDateTime` adds full time-zone rules.\r\n&gt;\r\n&gt;It is intended that `ZonedDateTime` or `Instant` is used to model data in simpler applications. **This class may be used when modeling date-time concepts in more detail, or when communicating to a database or in a network protocol.**\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/time/Instant.html\r\n  [2]: https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/time/OffsetDateTime.html\r\n  [3]: https://jdbc.postgresql.org/documentation/query/\r\n  [4]: https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/time/LocalDateTime.html\r\n  [5]: https://download.oracle.com/otn-pub/jcp/jdbc-4_2-mrel2-spec/jdbc4.2-fr-spec.pdf\r\n  [6]: https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/time/ZonedDateTime.html","title":"What is better to persist in database: OffsetDateTime or Instant?","body":"<h2>Short answer</h2>\n<p>As per the <a href=\"https://jdbc.postgresql.org/documentation/query/\" rel=\"nofollow noreferrer\">PostgreSQL JDBC driver documentation</a>, <a href=\"https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/time/Instant.html\" rel=\"nofollow noreferrer\"><code>Instant</code></a> is not supported. But you shouldn't have issues with <a href=\"https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/time/OffsetDateTime.html\" rel=\"nofollow noreferrer\"><code>OffsetDateTime</code></a> in UTC.</p>\n<hr />\n<h2>Long answer</h2>\n<p>The <a href=\"https://jdbc.postgresql.org/documentation/query/\" rel=\"nofollow noreferrer\">PostgreSQL JDBC driver documentation</a> mentions that a corresponding type for <code>TIMESTAMP [ WITHOUT TIMEZONE ]</code> is <a href=\"https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/time/LocalDateTime.html\" rel=\"nofollow noreferrer\"><code>LocalDateTime</code></a>, but <a href=\"https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/time/OffsetDateTime.html\" rel=\"nofollow noreferrer\"><code>OffsetDateTime</code></a> in UTC is also supported. On the other hand, <a href=\"https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/time/Instant.html\" rel=\"nofollow noreferrer\"><code>Instant</code></a> is not supported.</p>\n<p>See the quote below:</p>\n<blockquote>\n<pre><code>+--------------------------------+----------------+\n| PostgreSQL™                    | Java SE 8      |\n+--------------------------------+----------------+\n| DATE                           | LocalDate      |\n| TIME [ WITHOUT TIMEZONE ]      | LocalTime      |\n| TIMESTAMP [ WITHOUT TIMEZONE ] | LocalDateTime  |\n| TIMESTAMP WITH TIMEZONE        | OffsetDateTime |\n+--------------------------------+----------------+\n</code></pre>\n<p>This is closely aligned with tables B-4 and B-5 of the JDBC 4.2 specification.</p>\n<p><strong>Note</strong><br />\n<code>ZonedDateTime</code>, <code>Instant</code> and <code>OffsetTime / TIME [ WITHOUT TIMEZONE ]</code> are not supported. Also note that all <code>OffsetDateTime</code> will instances will have be in UTC (have offset 0). This is because the backend stores them as UTC.</p>\n</blockquote>\n<p>And the <a href=\"https://download.oracle.com/otn-pub/jcp/jdbc-4_2-mrel2-spec/jdbc4.2-fr-spec.pdf\" rel=\"nofollow noreferrer\">JDBC 4.2 specification</a> mention support for <a href=\"https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/time/Instant.html\" rel=\"nofollow noreferrer\"><code>Instant</code></a>.</p>\n<hr />\n<p>Also see the following quote from the <a href=\"https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/time/OffsetDateTime.html\" rel=\"nofollow noreferrer\"><code>OffsetDateTime</code></a> class documentation (highlight is mine):</p>\n<blockquote>\n<p><code>OffsetDateTime</code>, <code>ZonedDateTime</code> and <code>Instant</code> all store an instant on the time-line to nanosecond precision. Instant is the simplest, simply representing the instant. <code>OffsetDateTime</code> adds to the instant the offset from UTC/Greenwich, which allows the local date-time to be obtained. <code>ZonedDateTime</code> adds full time-zone rules.</p>\n<p>It is intended that <code>ZonedDateTime</code> or <code>Instant</code> is used to model data in simpler applications. <strong>This class may be used when modeling date-time concepts in more detail, or when communicating to a database or in a network protocol.</strong></p>\n</blockquote>\n"}],"owner":{"account_id":2605869,"reputation":1524,"user_id":2257052,"accept_rate":62,"display_name":"mvb13"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6198,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":1,"score":8,"last_activity_date":1692952098,"creation_date":1571319867,"question_id":58434148,"body_markdown":"I want to save a timestamp value into PostgreSQL database. Corresponding column is of the type `TIMESTAMP WITHOUT TIME ZONE`. \r\n\r\nAs input Java application gets epoch time (`long` value), that could be converted into `Instant` or `OffsetDateTime` with `ZoneOffset.UTC`.\r\n\r\nWhat is the best approach? Are there any drawbacks with any of this method? ","title":"What is better to persist in database: OffsetDateTime or Instant?","body":"<p>I want to save a timestamp value into PostgreSQL database. Corresponding column is of the type <code>TIMESTAMP WITHOUT TIME ZONE</code>.</p>\n<p>As input Java application gets epoch time (<code>long</code> value), that could be converted into <code>Instant</code> or <code>OffsetDateTime</code> with <code>ZoneOffset.UTC</code>.</p>\n<p>What is the best approach? Are there any drawbacks with any of this method?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":7,"creation_date":1692821616,"post_id":76964614,"comment_id":135677990,"body_markdown":"Those variables [shouldn&#39;t be static](https://technojeeves.com/index.php/aliasjava1/108-static-is-a-swear-word) Nor should the method","body":"Those variables <a href=\"https://technojeeves.com/index.php/aliasjava1/108-static-is-a-swear-word\" rel=\"nofollow noreferrer\">shouldn&#39;t be static</a> Nor should the method"},{"owner":{"account_id":27660885,"reputation":7,"user_id":21113755,"display_name":"cs55"},"score":0,"creation_date":1692821770,"post_id":76964614,"comment_id":135678014,"body_markdown":"I tried making it not static but still experienced the same behavior.","body":"I tried making it not static but still experienced the same behavior."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":4,"creation_date":1692821905,"post_id":76964614,"comment_id":135678036,"body_markdown":"That should not be the case. Why do you have two `boolean` variables that are the opposite of each other btw? Also you seem to be mixing two distinct concepts: a bean and a DTO of that bean, in the same class","body":"That should not be the case. Why do you have two <code>boolean</code> variables that are the opposite of each other btw? Also you seem to be mixing two distinct concepts: a bean and a DTO of that bean, in the same class"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1692822089,"post_id":76964614,"comment_id":135678059,"body_markdown":"usually it is preferable to write `invalidPerson = (personData == null);` (and then there is no need to &quot;*reset*&quot; it)","body":"usually it is preferable to write <code>invalidPerson = (personData == null);</code> (and then there is no need to &quot;<i>reset</i>&quot; it)"},{"owner":{"account_id":27660885,"reputation":7,"user_id":21113755,"display_name":"cs55"},"score":0,"creation_date":1692823269,"post_id":76964614,"comment_id":135678222,"body_markdown":"@user16320675 variables names are just some random names that I have used to demonstrate what I am doing in real case. In my case, either one can be true or both can be true without depending on each other.","body":"@user16320675 variables names are just some random names that I have used to demonstrate what I am doing in real case. In my case, either one can be true or both can be true without depending on each other."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1692823763,"post_id":76964614,"comment_id":135678291,"body_markdown":"that doesn&#39;t change anything I wrote... actually not sure why you think that the names are relevant (for what I wrote) -- lets try different code: instead of `x = false; if (y == null) x = true;`, you *can* write just `x = (y == null);`  (assuming `boolean x`)","body":"that doesn&#39;t change anything I wrote... actually not sure why you think that the names are relevant (for what I wrote) -- lets try different code: instead of <code>x = false; if (y == null) x = true;</code>, you <i>can</i> write just <code>x = (y == null);</code>  (assuming <code>boolean x</code>)"}],"answers":[{"tags":[],"owner":{"account_id":27594883,"reputation":120,"user_id":21061328,"display_name":"java_coder"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1692950918,"creation_date":1692903967,"answer_id":76972298,"question_id":76964614,"body_markdown":"Try this way. Make the variables non static and pass thesevariables from method 1 to 2, so you will not get the unrecognised variables error.\r\n\r\n```java\r\npublic class Person {\r\n\tpublic PersonDTO getPersonInfo(long personId) {\r\n        boolean validPerson = false;\r\n        boolean invalidPerson = false;\r\n\r\n        PersonDTO personDto = new PersonDTO();\r\n        var personList = // get from API\r\n\r\n        List&lt;AddressDTO&gt; addressDetails = personList.stream().map(p -&gt; getAddressList(..supply input..)).collect(Collectors.toList());\r\n        personDto.setIsValidPerson(validPerson);\r\n        personDto.setIsInvalidPerson(invalidPerson);\r\n        personDto.setAddressDetails(addressDetails);\r\n\r\n        return personDto;\r\n    }\r\n\r\n\tprivate List&lt;String&gt; getAddressList(String personData, boolean validPerson, boolean invalidPerson) {\r\n\t\tList&lt;String&gt; addressData = new ArrayList&lt;&gt;();\r\n\r\n\t\tif (personData == null) {\r\n\t\t\tinvalidPerson = true;\r\n\t\t} else {\r\n\t\t\tvalidPerson = true;\r\n\t\t\t// Process personData info to get addressData\r\n\t\t\t// ...\r\n\t\t}\r\n\r\n\t\treturn addressData;\r\n\t}\r\n}\r\n```\r\n","title":"How do I reset the boolean values in each method call?","body":"<p>Try this way. Make the variables non static and pass thesevariables from method 1 to 2, so you will not get the unrecognised variables error.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Person {\n    public PersonDTO getPersonInfo(long personId) {\n        boolean validPerson = false;\n        boolean invalidPerson = false;\n\n        PersonDTO personDto = new PersonDTO();\n        var personList = // get from API\n\n        List&lt;AddressDTO&gt; addressDetails = personList.stream().map(p -&gt; getAddressList(..supply input..)).collect(Collectors.toList());\n        personDto.setIsValidPerson(validPerson);\n        personDto.setIsInvalidPerson(invalidPerson);\n        personDto.setAddressDetails(addressDetails);\n\n        return personDto;\n    }\n\n    private List&lt;String&gt; getAddressList(String personData, boolean validPerson, boolean invalidPerson) {\n        List&lt;String&gt; addressData = new ArrayList&lt;&gt;();\n\n        if (personData == null) {\n            invalidPerson = true;\n        } else {\n            validPerson = true;\n            // Process personData info to get addressData\n            // ...\n        }\n\n        return addressData;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":27660885,"reputation":7,"user_id":21113755,"display_name":"cs55"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":91,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1692950918,"creation_date":1692821494,"question_id":76964614,"body_markdown":"I have this class,\r\n\r\n    public class Person {\r\n        private static boolean validPerson = false;\r\n        private static boolean invalidPerson = false;\r\n    \r\n        public PersonDTO getPersonInfo(long personId) {\r\n            PersonDTO personDto = new this.PersonDTO();\r\n            var personList = // get from API\r\n    \r\n            List&lt;AddressDTO&gt; addressDetails = personList.stream().map(p -&gt; getAddressList(..supply input..).collect(Collectors.toList()));\r\n            \r\n            personDto.setIsValidPerson(validPerson);\r\n            personDto.setIsInvalidPerson(invalidPerson);\r\n            personDto.setAddressDetails(addressDetails);\r\n    \r\n            return personDto;\r\n    \r\n        }\r\n    \r\n        private static List&lt;String&gt; getDddressList(String personData) {\r\n            if (personData == null) {\r\n                invalidPerson = true;\r\n            } else {\r\n                validPerson = true;\r\n                ...\r\n                ... // process personData info to get addressData\r\n            }\r\n    \r\n            return addressData;\r\n        }\r\n    }\r\n\r\nWhen I initially reload the page, then it returns the valid boolean data but when I reload the page, some of the boolean values are still the old ones.\r\n\r\nFor example, at the beginning of the call, value of `validPerson` will still be `true` instead of default value `false`.\r\n\r\nHow can I reset the boolean values each time `getPersonInfo` method gets called?","title":"How do I reset the boolean values in each method call?","body":"<p>I have this class,</p>\n<pre><code>public class Person {\n    private static boolean validPerson = false;\n    private static boolean invalidPerson = false;\n\n    public PersonDTO getPersonInfo(long personId) {\n        PersonDTO personDto = new this.PersonDTO();\n        var personList = // get from API\n\n        List&lt;AddressDTO&gt; addressDetails = personList.stream().map(p -&gt; getAddressList(..supply input..).collect(Collectors.toList()));\n        \n        personDto.setIsValidPerson(validPerson);\n        personDto.setIsInvalidPerson(invalidPerson);\n        personDto.setAddressDetails(addressDetails);\n\n        return personDto;\n\n    }\n\n    private static List&lt;String&gt; getDddressList(String personData) {\n        if (personData == null) {\n            invalidPerson = true;\n        } else {\n            validPerson = true;\n            ...\n            ... // process personData info to get addressData\n        }\n\n        return addressData;\n    }\n}\n</code></pre>\n<p>When I initially reload the page, then it returns the valid boolean data but when I reload the page, some of the boolean values are still the old ones.</p>\n<p>For example, at the beginning of the call, value of <code>validPerson</code> will still be <code>true</code> instead of default value <code>false</code>.</p>\n<p>How can I reset the boolean values each time <code>getPersonInfo</code> method gets called?</p>\n"},{"tags":["java","exception","equation","solver"],"owner":{"account_id":20535289,"reputation":1,"user_id":15071537,"display_name":"whyt"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692950842,"creation_date":1692950034,"question_id":76975309,"body_markdown":"I have a class I created on yield to maturity calculation and I use BrentSolver() in common math to solve equations, but I got an exception when I tried to change my code.\r\n```java\r\ndouble lowerBound = 0.000;\r\ndouble upperBound = 35.000;\r\ndouble initialGuess = 0.01;\r\n\r\nUnivariateFunction ytmFunction = new UnivariateFunction() {\r\n    @Override\r\n    public double value(double ytm) {\r\n        double presentValue = 0.0;\r\n        int index = 1;\r\n        \r\n        for (Map.Entry&lt;Double, Double&gt; entry : series.getCashFlow().entrySet()) { // iterate cashflow.size times\r\n            double time = entry.getKey();\r\n            double cashFlow = entry.getValue();\r\n            \r\n            if (cashFlow &gt; faceValue) {\r\n                cashFlow = cashFlow - faceValue;\r\n                presentValue += (cashFlow/paymentFrequency) / Math.pow(1 + ytm/paymentFrequency, index); //numberOfPayments\r\n                continue; // Skip the current iteration and move to the next one\r\n            }\r\n            \r\n            presentValue += (cashFlow/paymentFrequency) / Math.pow(1 + ytm/paymentFrequency, index);\r\n            index++;\r\n        }\r\n        presentValue += faceValue / Math.pow(1 + ytm/paymentFrequency, numOfPayments); // numOfPayments or maturity???\r\n        return savedPrice - presentValue;\r\n    }\r\n};\r\n\r\nUnivariateSolver solver = new BrentSolver(); \r\ndouble ytm = solver.solve(10000, ytmFunction, lowerBound, upperBound, initialGuess);\r\nreturn ytm;\r\n```\r\n\r\nI wanted to remove what I thought were unnecessary code blocks because I already have a value in my cashFlow map with faceValue+couponPayment, so I simplified the code:\r\n\r\n```java\r\ndouble lowerBound = 0.000;\r\ndouble upperBound = 35.000;\r\ndouble initialGuess = 0.01;\r\n\r\nUnivariateFunction ytmFunction = new UnivariateFunction() {\r\n    @Override\r\n    public double value(double ytm) {\r\n        double presentValue = 0.0;\r\n        int index = 1;\r\n        \r\n        for (Map.Entry&lt;Double, Double&gt; entry : series.getCashFlow().entrySet()) { // iterate cashflow.size times\r\n            double time = entry.getKey();\r\n            double cashFlow = entry.getValue();\r\n            presentValue += (cashFlow/paymentFrequency) / Math.pow(1 + ytm/paymentFrequency, index);\r\n            index++;\r\n        }\r\n        return savedPrice - presentValue;\r\n    }\r\n};\r\n\r\nUnivariateSolver solver = new BrentSolver(); \r\ndouble ytm = solver.solve(10000, ytmFunction, lowerBound, upperBound, initialGuess);\r\nreturn ytm;\r\n```\r\n\r\nThis way some ytm values ​​are printed but at one point I got the following error:\r\n\r\n```java\r\nException in thread &quot;main&quot; org.apache.commons.math3.exception.NoBracketingException:\r\n    function values at endpoints do not have different signs, endpoints: [0, 35],\r\n    values: [39.877, 96.209]\r\n    at org.apache.commons.math3.analysis.solvers.BrentSolver.doSolve(BrentSolver.java:132)\r\n    at org.apache.commons.math3.analysis.solvers.BaseAbstractUnivariateSolver.solve(BaseAbstractUnivariateSolver.java:199)\r\n\r\n```\r\n\r\nEven I didn&#39;t change any value, the code is supposed to work the same, what could be the error here?","title":"Common Math NoBracketingException on solving the equation","body":"<p>I have a class I created on yield to maturity calculation and I use BrentSolver() in common math to solve equations, but I got an exception when I tried to change my code.</p>\n<pre class=\"lang-java prettyprint-override\"><code>double lowerBound = 0.000;\ndouble upperBound = 35.000;\ndouble initialGuess = 0.01;\n\nUnivariateFunction ytmFunction = new UnivariateFunction() {\n    @Override\n    public double value(double ytm) {\n        double presentValue = 0.0;\n        int index = 1;\n        \n        for (Map.Entry&lt;Double, Double&gt; entry : series.getCashFlow().entrySet()) { // iterate cashflow.size times\n            double time = entry.getKey();\n            double cashFlow = entry.getValue();\n            \n            if (cashFlow &gt; faceValue) {\n                cashFlow = cashFlow - faceValue;\n                presentValue += (cashFlow/paymentFrequency) / Math.pow(1 + ytm/paymentFrequency, index); //numberOfPayments\n                continue; // Skip the current iteration and move to the next one\n            }\n            \n            presentValue += (cashFlow/paymentFrequency) / Math.pow(1 + ytm/paymentFrequency, index);\n            index++;\n        }\n        presentValue += faceValue / Math.pow(1 + ytm/paymentFrequency, numOfPayments); // numOfPayments or maturity???\n        return savedPrice - presentValue;\n    }\n};\n\nUnivariateSolver solver = new BrentSolver(); \ndouble ytm = solver.solve(10000, ytmFunction, lowerBound, upperBound, initialGuess);\nreturn ytm;\n</code></pre>\n<p>I wanted to remove what I thought were unnecessary code blocks because I already have a value in my cashFlow map with faceValue+couponPayment, so I simplified the code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>double lowerBound = 0.000;\ndouble upperBound = 35.000;\ndouble initialGuess = 0.01;\n\nUnivariateFunction ytmFunction = new UnivariateFunction() {\n    @Override\n    public double value(double ytm) {\n        double presentValue = 0.0;\n        int index = 1;\n        \n        for (Map.Entry&lt;Double, Double&gt; entry : series.getCashFlow().entrySet()) { // iterate cashflow.size times\n            double time = entry.getKey();\n            double cashFlow = entry.getValue();\n            presentValue += (cashFlow/paymentFrequency) / Math.pow(1 + ytm/paymentFrequency, index);\n            index++;\n        }\n        return savedPrice - presentValue;\n    }\n};\n\nUnivariateSolver solver = new BrentSolver(); \ndouble ytm = solver.solve(10000, ytmFunction, lowerBound, upperBound, initialGuess);\nreturn ytm;\n</code></pre>\n<p>This way some ytm values ​​are printed but at one point I got the following error:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Exception in thread &quot;main&quot; org.apache.commons.math3.exception.NoBracketingException:\n    function values at endpoints do not have different signs, endpoints: [0, 35],\n    values: [39.877, 96.209]\n    at org.apache.commons.math3.analysis.solvers.BrentSolver.doSolve(BrentSolver.java:132)\n    at org.apache.commons.math3.analysis.solvers.BaseAbstractUnivariateSolver.solve(BaseAbstractUnivariateSolver.java:199)\n\n</code></pre>\n<p>Even I didn't change any value, the code is supposed to work the same, what could be the error here?</p>\n"},{"tags":["java","javascript","windows","selenium","webdriver"],"comments":[{"owner":{"account_id":4878540,"reputation":3416,"user_id":3932942,"accept_rate":83,"display_name":"Stan E"},"score":0,"creation_date":1429270518,"post_id":29697402,"comment_id":47532097,"body_markdown":"example of the page?","body":"example of the page?"},{"owner":{"account_id":6158341,"reputation":47,"user_id":4800671,"display_name":"Furqan Ud Din"},"score":0,"creation_date":1429270786,"post_id":29697402,"comment_id":47532257,"body_markdown":"You can consider twitter or linkedin home page for example, like when you scroll down more tweets appeared.","body":"You can consider twitter or linkedin home page for example, like when you scroll down more tweets appeared."},{"owner":{"account_id":4878540,"reputation":3416,"user_id":3932942,"accept_rate":83,"display_name":"Stan E"},"score":0,"creation_date":1429270819,"post_id":29697402,"comment_id":47532276,"body_markdown":"but there is no &quot;end&quot; on that pages","body":"but there is no &quot;end&quot; on that pages"},{"owner":{"account_id":6158341,"reputation":47,"user_id":4800671,"display_name":"Furqan Ud Din"},"score":0,"creation_date":1429271172,"post_id":29697402,"comment_id":47532498,"body_markdown":"On Linkedin home page, when updates are finished it comes to an end and no more scrolling is possible.\nBut I just quoted these as an example.","body":"On Linkedin home page, when updates are finished it comes to an end and no more scrolling is possible. But I just quoted these as an example."},{"owner":{"account_id":4878540,"reputation":3416,"user_id":3932942,"accept_rate":83,"display_name":"Stan E"},"score":0,"creation_date":1429271858,"post_id":29697402,"comment_id":47532945,"body_markdown":"please try an example","body":"please try an example"},{"owner":{"account_id":6158341,"reputation":47,"user_id":4800671,"display_name":"Furqan Ud Din"},"score":0,"creation_date":1429271888,"post_id":29697402,"comment_id":47532967,"body_markdown":"Lets just assume that there is an end on the above pages after 20 scrolls. I think it makes sense now!","body":"Lets just assume that there is an end on the above pages after 20 scrolls. I think it makes sense now!"}],"answers":[{"tags":[],"owner":{"account_id":4878540,"reputation":3416,"user_id":3932942,"accept_rate":83,"display_name":"Stan E"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1429271845,"creation_date":1429271845,"answer_id":29698535,"question_id":29697402,"body_markdown":"So, I would do something like that:\r\n\r\n    bool pageEnded = false;\r\n    while (!pageEnded) {\r\n        JavascriptExecutor js = (JavascriptExecutor) Browser;\r\n        js.executeScript(&quot;window.scrollTo(0, document.body.offsetHeight);&quot;);\r\n        pageEnded = (String)js.executeScript(&quot;return document.readyState;&quot;) ? true;\r\n    }","title":"Scrolling an ajax page completely using selenium webdriver","body":"<p>So, I would do something like that:</p>\n\n<pre><code>bool pageEnded = false;\nwhile (!pageEnded) {\n    JavascriptExecutor js = (JavascriptExecutor) Browser;\n    js.executeScript(\"window.scrollTo(0, document.body.offsetHeight);\");\n    pageEnded = (String)js.executeScript(\"return document.readyState;\") ? true;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4725054,"reputation":16161,"user_id":3821981,"accept_rate":62,"display_name":"Saifur"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1429364400,"creation_date":1429311910,"answer_id":29710830,"question_id":29697402,"body_markdown":"I had a page with similar functionality and another question I answered previously. I am not familiar with any generic way to know if page does not have any other elements on load. In my case the page is designed to load 40/80(forgot the exact count) element in each scroll. Since, most of the cases I know an estimated number of scroll(since I am using a test company and I know how many element present for that in db) I can estimate the number of scroll and did the following to handle that page.\r\n\r\n    public void ScrollPage(int counter)\r\n    {\r\n        const string script =\r\n            @&quot;window.scrollTo(0,Math.max(document.documentElement.scrollHeight,document.body.scrollHeight,document.documentElement.clientHeight));&quot;;\r\n    \r\n    \r\n        int count = 0;\r\n    \r\n        while (count != counter)\r\n        {\r\n           IJavaScriptExecutor js = _driver as IJavaScriptExecutor;\r\n            js.ExecuteScript(script);\r\n    \r\n            Thread.Sleep(500);\r\n    \r\n            count++;\r\n        }\r\n    }\r\n\r\nSee my other answer [here](https://stackoverflow.com/questions/28662524/c-sharp-selenium-finding-element-on-continuously-growing-page)\r\n\r\n**Java equivalency code**\r\n\r\n    public void ScrollPage(int counter) throws InterruptedException {\r\n        \r\n            String script = &quot;window.scrollTo(0,Math.max(document.documentElement.scrollHeight,document.body.scrollHeight,document.documentElement.clientHeight));&quot;;\r\n            int count = 0;\r\n    \r\n            while (count != counter)\r\n            {\r\n                ((JavascriptExecutor)driver).executeScript(script);\r\n    \r\n                Thread.sleep(500);\r\n                count++;\r\n            }\r\n        }\r\n\r\n&gt;**Use** \r\n\r\n    ScrollPage(10);\r\nin wherever the scroll is necessary","title":"Scrolling an ajax page completely using selenium webdriver","body":"<p>I had a page with similar functionality and another question I answered previously. I am not familiar with any generic way to know if page does not have any other elements on load. In my case the page is designed to load 40/80(forgot the exact count) element in each scroll. Since, most of the cases I know an estimated number of scroll(since I am using a test company and I know how many element present for that in db) I can estimate the number of scroll and did the following to handle that page.</p>\n\n<pre><code>public void ScrollPage(int counter)\n{\n    const string script =\n        @\"window.scrollTo(0,Math.max(document.documentElement.scrollHeight,document.body.scrollHeight,document.documentElement.clientHeight));\";\n\n\n    int count = 0;\n\n    while (count != counter)\n    {\n       IJavaScriptExecutor js = _driver as IJavaScriptExecutor;\n        js.ExecuteScript(script);\n\n        Thread.Sleep(500);\n\n        count++;\n    }\n}\n</code></pre>\n\n<p>See my other answer <a href=\"https://stackoverflow.com/questions/28662524/c-sharp-selenium-finding-element-on-continuously-growing-page\">here</a></p>\n\n<p><strong>Java equivalency code</strong></p>\n\n<pre><code>public void ScrollPage(int counter) throws InterruptedException {\n\n        String script = \"window.scrollTo(0,Math.max(document.documentElement.scrollHeight,document.body.scrollHeight,document.documentElement.clientHeight));\";\n        int count = 0;\n\n        while (count != counter)\n        {\n            ((JavascriptExecutor)driver).executeScript(script);\n\n            Thread.sleep(500);\n            count++;\n        }\n    }\n</code></pre>\n\n<blockquote>\n  <p><strong>Use</strong> </p>\n</blockquote>\n\n<pre><code>ScrollPage(10);\n</code></pre>\n\n<p>in wherever the scroll is necessary</p>\n"},{"tags":[],"owner":{"account_id":15039600,"reputation":179,"user_id":10854709,"display_name":"Abrogans"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1546473982,"creation_date":1546473982,"answer_id":54014777,"question_id":29697402,"body_markdown":"The best Way to do this is the following (implemented in Python):\r\n\r\n    import time\r\n\r\n    def loadFullPage(Timeout):\r\n        reachedbottom = None\r\n        while not reachedbottom:\r\n            #scroll one pane down\r\n            driver.execute_script(&quot;window.scrollTo(0,Math.max(document.documentElement.scrollHeight,document.body.scrollHeight,document.documentElement.clientHeight));&quot;);\r\n            time.sleep(Timeout)\r\n            #check if the bottom is reached\r\n            a = driver.execute_script(&quot;return document.documentElement.scrollTop;&quot;)\r\n            b = driver.execute_script(&quot;return document.documentElement.scrollHeight - document.documentElement.clientHeight;&quot;)\r\n            relativeHeight = a / b\r\n            if(relativeHeight==1):\r\n                reachedbottom = True\r\n\r\nYou have to find a efficient Timeout for your internet connection. A timeout of 3 seconds worked well for me.\r\n\r\n\r\n","title":"Scrolling an ajax page completely using selenium webdriver","body":"<p>The best Way to do this is the following (implemented in Python):</p>\n\n<pre><code>import time\n\ndef loadFullPage(Timeout):\n    reachedbottom = None\n    while not reachedbottom:\n        #scroll one pane down\n        driver.execute_script(\"window.scrollTo(0,Math.max(document.documentElement.scrollHeight,document.body.scrollHeight,document.documentElement.clientHeight));\");\n        time.sleep(Timeout)\n        #check if the bottom is reached\n        a = driver.execute_script(\"return document.documentElement.scrollTop;\")\n        b = driver.execute_script(\"return document.documentElement.scrollHeight - document.documentElement.clientHeight;\")\n        relativeHeight = a / b\n        if(relativeHeight==1):\n            reachedbottom = True\n</code></pre>\n\n<p>You have to find a efficient Timeout for your internet connection. A timeout of 3 seconds worked well for me.</p>\n"},{"tags":[],"owner":{"account_id":1904855,"reputation":3361,"user_id":1719931,"accept_rate":40,"display_name":"robertspierre"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692950405,"creation_date":1692950405,"answer_id":76975366,"question_id":29697402,"body_markdown":"This scrolls down the page until the DOM doesn&#39;t change anymore (we are in the case of the bottom of the page being AJAX lazy-loaded, code in Python):\r\n\r\n    def scrollDown(driver, value):\r\n        driver.execute_script(&quot;window.scrollBy(0,&quot;+str(value)+&quot;)&quot;)\r\n\r\n    # Scroll down the page\r\n    def scrollDownAllTheWay(driver, max_scrolls=20):\r\n        old_page = driver.page_source\r\n        for i in range(0,max_scrolls):\r\n            logging.debug(&quot;Scrolling loop&quot;)\r\n            for i in range(2):\r\n                scrollDown(driver, 500)\r\n                time.sleep(2)\r\n            new_page = driver.page_source\r\n            if new_page != old_page:\r\n                old_page = new_page\r\n            else:\r\n                break\r\n        return True","title":"Scrolling an ajax page completely using selenium webdriver","body":"<p>This scrolls down the page until the DOM doesn't change anymore (we are in the case of the bottom of the page being AJAX lazy-loaded, code in Python):</p>\n<pre><code>def scrollDown(driver, value):\n    driver.execute_script(&quot;window.scrollBy(0,&quot;+str(value)+&quot;)&quot;)\n\n# Scroll down the page\ndef scrollDownAllTheWay(driver, max_scrolls=20):\n    old_page = driver.page_source\n    for i in range(0,max_scrolls):\n        logging.debug(&quot;Scrolling loop&quot;)\n        for i in range(2):\n            scrollDown(driver, 500)\n            time.sleep(2)\n        new_page = driver.page_source\n        if new_page != old_page:\n            old_page = new_page\n        else:\n            break\n    return True\n</code></pre>\n"}],"owner":{"account_id":6158341,"reputation":47,"user_id":4800671,"display_name":"Furqan Ud Din"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1286,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"answer_count":4,"score":3,"last_activity_date":1692950405,"creation_date":1429268559,"question_id":29697402,"body_markdown":"I am trying to scroll a page completely using this code:\r\n\r\n    JavascriptExecutor js = (JavascriptExecutor) Browser;\r\n    js.executeScript(&quot;javascript:window.onload=toBottom();&quot;+\r\n    \t\t\t\t\t                       &quot;function toBottom(){&quot; +&quot;window.scrollTo(0,Math.max(document.documentElement.scrollHeight,&quot; +&quot;document.body.scrollHeight,document.documentElement.clientHeight));&quot; +&quot;}&quot;);\r\n    js.executeScript(&quot;window.status = &#39;fail&#39;;&quot;);\r\n    \r\n    //Attach the Ajax call back method\r\n    js.executeScript( &quot;$(document).ajaxComplete(function() {&quot; + &quot;status = &#39;success&#39;;});&quot;);\r\n    js.executeScript(&quot;window.status = &#39;fail&#39;;&quot;);\r\n    \r\n    //Attach the Ajax call back method\r\n    js.executeScript( &quot;$(document).ajaxComplete(function() {&quot; +&quot;status = &#39;success&#39;;});&quot;);\r\n\r\nThis code works fine and scroll the page for the first attempt but when page is scrolled down, new data appears at the page and this code failed to scroll it again.\r\nSo what I need is that someone will help me to scroll the page till end until scrolling is completed.\r\n\r\nDo I use any loop for this?\r\n\r\nHelp/Suggestions/Response will be appreciated!","title":"Scrolling an ajax page completely using selenium webdriver","body":"<p>I am trying to scroll a page completely using this code:</p>\n\n<pre><code>JavascriptExecutor js = (JavascriptExecutor) Browser;\njs.executeScript(\"javascript:window.onload=toBottom();\"+\n                                           \"function toBottom(){\" +\"window.scrollTo(0,Math.max(document.documentElement.scrollHeight,\" +\"document.body.scrollHeight,document.documentElement.clientHeight));\" +\"}\");\njs.executeScript(\"window.status = 'fail';\");\n\n//Attach the Ajax call back method\njs.executeScript( \"$(document).ajaxComplete(function() {\" + \"status = 'success';});\");\njs.executeScript(\"window.status = 'fail';\");\n\n//Attach the Ajax call back method\njs.executeScript( \"$(document).ajaxComplete(function() {\" +\"status = 'success';});\");\n</code></pre>\n\n<p>This code works fine and scroll the page for the first attempt but when page is scrolled down, new data appears at the page and this code failed to scroll it again.\nSo what I need is that someone will help me to scroll the page till end until scrolling is completed.</p>\n\n<p>Do I use any loop for this?</p>\n\n<p>Help/Suggestions/Response will be appreciated!</p>\n"},{"tags":["java","spring","spring-boot","maven","tomcat"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1631605149,"post_id":69173732,"comment_id":122260309,"body_markdown":"I doubt all your jars are from 2.4.2. Looks like you are using incompatible versions, without seeing your dependencies (pom or build file) this will be impossible to pin-point. But something is pulling in an incompatible version.","body":"I doubt all your jars are from 2.4.2. Looks like you are using incompatible versions, without seeing your dependencies (pom or build file) this will be impossible to pin-point. But something is pulling in an incompatible version."}],"answers":[{"tags":[],"owner":{"account_id":26018743,"reputation":1,"user_id":19726729,"display_name":"Jayson Xia"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1692950118,"creation_date":1692268580,"answer_id":76920695,"question_id":69173732,"body_markdown":"it can be started normally after removal excess dependence in pom.xml \r\n    `&lt;!--dependency&gt; \r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt; \r\n        &lt;artifactId&gt;spring-context&lt;/artifactId&gt; \r\n        &lt;version&gt;4.2.5.RELEASE&lt;/version&gt; \r\n    &lt;/dependency--&gt; \r\n    &lt;dependency&gt; \r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; \r\n    &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt; \r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt; \r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; \r\n    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; \r\n    &lt;/dependency&gt;`\r\n\r\n","title":"java.lang.AbstractMethodError: org.springframework.boot.env.EnvironmentPostProcessorApplicationListener error","body":"<p>it can be started normally after removal excess dependence in pom.xml\n<code>&lt;!--dependency&gt;  &lt;groupId&gt;org.springframework&lt;/groupId&gt;  &lt;artifactId&gt;spring-context&lt;/artifactId&gt;  &lt;version&gt;4.2.5.RELEASE&lt;/version&gt;  &lt;/dependency--&gt;  &lt;dependency&gt;  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;  &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;  &lt;/dependency&gt; &lt;dependency&gt;  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;  &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;  &lt;/dependency&gt;</code></p>\n"}],"owner":{"account_id":12586219,"reputation":107,"user_id":9155008,"display_name":"Neela"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":5284,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1692950118,"creation_date":1631605030,"question_id":69173732,"body_markdown":"My Spring moot application was working fine from my local. But all of a sudden I am getting the below error when I start my tomcat server from STS. I am clueless why am getting this error.\r\n\r\nThe error details,\r\n\r\n    Exception in thread &quot;main&quot; java.lang.AbstractMethodError: \r\n        org.springframework.boot.env.EnvironmentPostProcessorApplicationListener.supportsSourceType(Ljava/lang/Class;)Z\r\n        at org.springframework.context.event.GenericApplicationListenerAdapter.supportsSourceType(GenericApplicationListenerAdapter.java)\r\n        org.springframework.context.event.GenericApplicationEventMulticaster.supportsEvent(AbstractApplicationEventMultiCaster.java)\r\n        org.springframework.context.event.GenericApplicationEventMulticaster.retrieveApplicationListeneres(AbstractApplicationEventMultiCaster.java)\r\n        ....\r\n        at java.util.ArrayList.forEach(ArrayList.java:1257)\r\n        ....\r\n        at org.springframework.boot.SpringApplication.prepareEnvironment(SpringAppliccation.java 362)\r\n        at org.Springframework.boot.ApringApplication.run(SpringApplication.java:320)\r\n        at org.Springframework.boot.ApringApplication.run(SpringApplication.java:1309)\r\n        at org.Springframework.boot.ApringApplication.run(SpringApplication.java:1298)\r\n        at com.test.Application.main(Application.java)\r\n\r\nAm using java 8 and it is a Spring Boot project of version 2.4.2. I even tried to delete all my jars from the .m2 folder and installed them again. But the same issue, am facing.\r\n\r\nPlease help me to get a solution for this issue.\r\n","title":"java.lang.AbstractMethodError: org.springframework.boot.env.EnvironmentPostProcessorApplicationListener error","body":"<p>My Spring moot application was working fine from my local. But all of a sudden I am getting the below error when I start my tomcat server from STS. I am clueless why am getting this error.</p>\n<p>The error details,</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.AbstractMethodError: \n    org.springframework.boot.env.EnvironmentPostProcessorApplicationListener.supportsSourceType(Ljava/lang/Class;)Z\n    at org.springframework.context.event.GenericApplicationListenerAdapter.supportsSourceType(GenericApplicationListenerAdapter.java)\n    org.springframework.context.event.GenericApplicationEventMulticaster.supportsEvent(AbstractApplicationEventMultiCaster.java)\n    org.springframework.context.event.GenericApplicationEventMulticaster.retrieveApplicationListeneres(AbstractApplicationEventMultiCaster.java)\n    ....\n    at java.util.ArrayList.forEach(ArrayList.java:1257)\n    ....\n    at org.springframework.boot.SpringApplication.prepareEnvironment(SpringAppliccation.java 362)\n    at org.Springframework.boot.ApringApplication.run(SpringApplication.java:320)\n    at org.Springframework.boot.ApringApplication.run(SpringApplication.java:1309)\n    at org.Springframework.boot.ApringApplication.run(SpringApplication.java:1298)\n    at com.test.Application.main(Application.java)\n</code></pre>\n<p>Am using java 8 and it is a Spring Boot project of version 2.4.2. I even tried to delete all my jars from the .m2 folder and installed them again. But the same issue, am facing.</p>\n<p>Please help me to get a solution for this issue.</p>\n"},{"tags":["java","spring-boot","apache-poi"],"comments":[{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":2,"creation_date":1692789772,"post_id":76960686,"comment_id":135671420,"body_markdown":"Please have a look at the full stack-trace of the error. I suspect it gets thrown by `XWPFDocument doc = new XWPFDocument(inputStream);`. Then `inputStream` seems stream wrong content. Thus `byteArray` contains wrong content. Thus `template.getContent()` gets wrong content from database.","body":"Please have a look at the full stack-trace of the error. I suspect it gets thrown by <code>XWPFDocument doc = new XWPFDocument(inputStream);</code>. Then <code>inputStream</code> seems stream wrong content. Thus <code>byteArray</code> contains wrong content. Thus <code>template.getContent()</code> gets wrong content from database."},{"owner":{"account_id":23937298,"reputation":1,"user_id":22434525,"display_name":"Nelvan Resi"},"score":0,"creation_date":1692949859,"post_id":76960686,"comment_id":135696941,"body_markdown":"@AxelRichter This problem is because the byteArray input is corrupted. I tried to use get byte array from database by consuming antother service endpoint through feign client. That feign client giving response not only byte array response but an object that has bytearray property and also other property. I created new endpoint that give byteArray response only then now working perfectly","body":"@AxelRichter This problem is because the byteArray input is corrupted. I tried to use get byte array from database by consuming antother service endpoint through feign client. That feign client giving response not only byte array response but an object that has bytearray property and also other property. I created new endpoint that give byteArray response only then now working perfectly"}],"answers":[{"tags":[],"owner":{"account_id":23937298,"reputation":1,"user_id":22434525,"display_name":"Nelvan Resi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692949799,"creation_date":1692949799,"answer_id":76975283,"question_id":76960686,"body_markdown":"This problem is because the byteArray input is corrupted. I tried to use get byte array from database by consuming antother service endpoint through feign client. That feign client giving response not only byte array response but an object that has bytearray property and also other property. I created new endpoint that give byteArray response only then now working perfectly","title":"Apache POI failed to read uploaded docx. Giving error No valid entries or contents found, this is not a valid OOXML (Office Open XML) file","body":"<p>This problem is because the byteArray input is corrupted. I tried to use get byte array from database by consuming antother service endpoint through feign client. That feign client giving response not only byte array response but an object that has bytearray property and also other property. I created new endpoint that give byteArray response only then now working perfectly</p>\n"}],"owner":{"account_id":23937298,"reputation":1,"user_id":22434525,"display_name":"Nelvan Resi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":179,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76975283,"answer_count":1,"score":0,"last_activity_date":1692949799,"creation_date":1692787982,"question_id":76960686,"body_markdown":"I tried to extract uploaded docx file then want to get the paragraphs to be displayed in jasper  report pdf. But when i tried to read the file using apache POI it giving this error :\r\n\r\n```\r\norg.apache.poi.openxml4j.exceptions.NotOfficeXmlFileException: No valid entries or contents found, this is not a valid OOXML (Office Open XML) file|\r\n```\r\nDon&#39;t how to solve this.\r\n\r\nThis docx file is uploaded then saved in byte array format in database. After get the data, then want to extract it, it didn&#39;t work.\r\n\r\nHere&#39;s my code\r\n\r\n\r\n```\r\nfinal var docx = fromByteArray(template.getContent());\r\n\r\n// template.getContent() is the byteArray from database\r\n\r\n```\r\n\r\n\r\nthen for the ***fromByteArray function*** be like this\r\n\r\n```\r\npublic static KcDocx fromByteArray(byte[] byteArray) {\r\n    try {\r\n      ByteArrayInputStream inputStream = new ByteArrayInputStream(byteArray);\r\n\r\n      KcDocx var3;\r\n      try {\r\n        XWPFDocument doc = new XWPFDocument(inputStream);\r\n        var3 = KcDocx.buildDoc(doc);\r\n      } catch (Throwable var5) {\r\n        try {\r\n          inputStream.close();\r\n        } catch (Throwable var4) {\r\n          var5.addSuppressed(var4);\r\n        }\r\n\r\n        throw var5;\r\n      }\r\n\r\n      inputStream.close();\r\n      return var3;\r\n    } catch (IOException var6) {\r\n      log.warn(&quot;KcDocReaderBytes&quot;, var6);\r\n      throw new RuntimeException(var6);\r\n    }\r\n  }\r\n\r\n```\r\n\r\nthen for the ***KCDocx class*** that cointain ***buildDoc function***\r\n\r\n```\r\npublic class KcDocx {\r\n  @Generated\r\n  private static final Logger log = LoggerFactory.getLogger(&quot;WORKBOOK_LOGGER&quot;);\r\n  private final List&lt;KcDocxParagraph&gt; paragraphs = new ArrayList();\r\n  private final Set&lt;KcDocxParagraph.Styling&gt; styling = new HashSet();\r\n  private boolean hasBulletOrNumberingList = false;\r\n\r\n  public static KcDocx buildDoc(XWPFDocument document) {\r\n    KcDocx doc = new KcDocx();\r\n    doc.hasBulletOrNumberingList = document.getNumbering() != null;\r\n    Stream var10000 = document.getParagraphs().stream().filter((paragraph) -&gt; {\r\n      return StringUtils.isNotEmpty(paragraph.getText());\r\n    });\r\n    Objects.requireNonNull(doc);\r\n    List&lt;KcDocxParagraph&gt; extractedParagraph = (List)var10000.map(doc::extract).collect(Collectors.toList());\r\n    doc.paragraphs.addAll(extractedParagraph);\r\n    log.debug(&quot;Extracted document content is empty {} or contains table {}&quot;, doc.paragraphs.isEmpty(), !document.getTables().isEmpty());\r\n    return doc;\r\n  }\r\n}\r\n```\r\n\r\n","title":"Apache POI failed to read uploaded docx. Giving error No valid entries or contents found, this is not a valid OOXML (Office Open XML) file","body":"<p>I tried to extract uploaded docx file then want to get the paragraphs to be displayed in jasper  report pdf. But when i tried to read the file using apache POI it giving this error :</p>\n<pre><code>org.apache.poi.openxml4j.exceptions.NotOfficeXmlFileException: No valid entries or contents found, this is not a valid OOXML (Office Open XML) file|\n</code></pre>\n<p>Don't how to solve this.</p>\n<p>This docx file is uploaded then saved in byte array format in database. After get the data, then want to extract it, it didn't work.</p>\n<p>Here's my code</p>\n<pre><code>final var docx = fromByteArray(template.getContent());\n\n// template.getContent() is the byteArray from database\n\n</code></pre>\n<p>then for the <em><strong>fromByteArray function</strong></em> be like this</p>\n<pre><code>public static KcDocx fromByteArray(byte[] byteArray) {\n    try {\n      ByteArrayInputStream inputStream = new ByteArrayInputStream(byteArray);\n\n      KcDocx var3;\n      try {\n        XWPFDocument doc = new XWPFDocument(inputStream);\n        var3 = KcDocx.buildDoc(doc);\n      } catch (Throwable var5) {\n        try {\n          inputStream.close();\n        } catch (Throwable var4) {\n          var5.addSuppressed(var4);\n        }\n\n        throw var5;\n      }\n\n      inputStream.close();\n      return var3;\n    } catch (IOException var6) {\n      log.warn(&quot;KcDocReaderBytes&quot;, var6);\n      throw new RuntimeException(var6);\n    }\n  }\n\n</code></pre>\n<p>then for the <em><strong>KCDocx class</strong></em> that cointain <em><strong>buildDoc function</strong></em></p>\n<pre><code>public class KcDocx {\n  @Generated\n  private static final Logger log = LoggerFactory.getLogger(&quot;WORKBOOK_LOGGER&quot;);\n  private final List&lt;KcDocxParagraph&gt; paragraphs = new ArrayList();\n  private final Set&lt;KcDocxParagraph.Styling&gt; styling = new HashSet();\n  private boolean hasBulletOrNumberingList = false;\n\n  public static KcDocx buildDoc(XWPFDocument document) {\n    KcDocx doc = new KcDocx();\n    doc.hasBulletOrNumberingList = document.getNumbering() != null;\n    Stream var10000 = document.getParagraphs().stream().filter((paragraph) -&gt; {\n      return StringUtils.isNotEmpty(paragraph.getText());\n    });\n    Objects.requireNonNull(doc);\n    List&lt;KcDocxParagraph&gt; extractedParagraph = (List)var10000.map(doc::extract).collect(Collectors.toList());\n    doc.paragraphs.addAll(extractedParagraph);\n    log.debug(&quot;Extracted document content is empty {} or contains table {}&quot;, doc.paragraphs.isEmpty(), !document.getTables().isEmpty());\n    return doc;\n  }\n}\n</code></pre>\n"},{"tags":["java","ssl","apache-camel","quarkus"],"answers":[{"tags":[],"owner":{"account_id":29078969,"reputation":1,"user_id":22275443,"display_name":"Zineb BENDHIBA"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692949780,"creation_date":1692949780,"answer_id":76975277,"question_id":76841965,"body_markdown":"I&#39;m not an expert, but if I recall that problem occurs when reaching to localhost with SSL. \r\nIn this example, I registred the X509HostnameVerifier as NoopHostnameVerifier instance, and I refer to this one in my Route. I guess there are other ways of configuring this.\r\n\r\nhttps://github.com/apache/camel-quarkus/blob/main/integration-tests/platform-http-proxy-ssl/src/main/java/org/apache/camel/quarkus/component/platform/http/proxy/ssl/it/Routes.java\r\n\r\nI hope this helps.","title":"How to configure SSL to call other REST services through dynamic url in Apcahe Camel Method tod","body":"<p>I'm not an expert, but if I recall that problem occurs when reaching to localhost with SSL.\nIn this example, I registred the X509HostnameVerifier as NoopHostnameVerifier instance, and I refer to this one in my Route. I guess there are other ways of configuring this.</p>\n<p><a href=\"https://github.com/apache/camel-quarkus/blob/main/integration-tests/platform-http-proxy-ssl/src/main/java/org/apache/camel/quarkus/component/platform/http/proxy/ssl/it/Routes.java\" rel=\"nofollow noreferrer\">https://github.com/apache/camel-quarkus/blob/main/integration-tests/platform-http-proxy-ssl/src/main/java/org/apache/camel/quarkus/component/platform/http/proxy/ssl/it/Routes.java</a></p>\n<p>I hope this helps.</p>\n"}],"owner":{"account_id":16016597,"reputation":743,"user_id":11559150,"display_name":"Cesar Justo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1692949780,"creation_date":1691243669,"question_id":76841965,"body_markdown":"\r\nGood morning, I am currently working with apache camel and Quarkus and I am presented for the first time with a scenario that had not happened to me before, now I am working with dynamic url of the following type to call:\r\n\r\n    https://localhost:8080/users/{user}/customers\r\n\r\nThese services are in SSL, so the call to SSL must be configured, for non-dynamic url I used the following line:\r\n\r\n    .to(configureSsl.setupSSLContext(getCamelContext(), &quot;https://localhost:8081/api/FindPrepaidAccountByDocument&quot;))\r\n\r\nWhere my ConfigureSSL class is as follows:\r\n\r\n    package org.tmve.customer.ms.route;\r\n    \r\n    import lombok.extern.slf4j.Slf4j;\r\n    import org.apache.camel.CamelContext;\r\n    import org.apache.camel.Endpoint;\r\n    import org.apache.camel.component.http.HttpComponent;\r\n    import org.apache.camel.support.jsse.KeyManagersParameters;\r\n    import org.apache.camel.support.jsse.KeyStoreParameters;\r\n    import org.apache.camel.support.jsse.SSLContextParameters;\r\n    import org.apache.camel.support.jsse.TrustManagersParameters;\r\n    import org.apache.http.conn.ssl.AllowAllHostnameVerifier;\r\n    import org.eclipse.microprofile.config.ConfigProvider;\r\n    \r\n    @Slf4j\r\n    public class ConfigureSsl {\r\n    \t\r\n    \tprivate String password = ConfigProvider.getConfig().getValue(&quot;client.password&quot;, String.class);\r\n    \tprivate String resource = ConfigProvider.getConfig().getValue(&quot;client.file&quot;, String.class);\r\n    \t\r\n    \t public Endpoint setupSSLContext(CamelContext camelContext, String url) throws Exception {\r\n    \r\n    \t        KeyStoreParameters keyStoreParameters = new KeyStoreParameters();\r\n    \t\t\t/*log.info(resource);*/\r\n    \t\t\t/*log.info(password);*/\r\n    \t        keyStoreParameters.setResource(resource);\r\n    \t        keyStoreParameters.setPassword(password);\r\n    \r\n    \t        KeyManagersParameters keyManagersParameters = new KeyManagersParameters();\r\n    \t        keyManagersParameters.setKeyStore(keyStoreParameters);\r\n    \t        keyManagersParameters.setKeyPassword(password);\r\n    \t\t\t/*log.info(&quot;keyManagersParameters &quot;+ keyManagersParameters);*/\r\n    \r\n    \t        TrustManagersParameters trustManagersParameters = new TrustManagersParameters();\r\n    \t        trustManagersParameters.setKeyStore(keyStoreParameters);\r\n    \t\t \t/*log.info(&quot;trustManagersParameters &quot;+ trustManagersParameters);*/\r\n    \r\n    \t        SSLContextParameters sslContextParameters = new SSLContextParameters();\r\n    \t        sslContextParameters.setKeyManagers(keyManagersParameters);\r\n    \t        sslContextParameters.setTrustManagers(trustManagersParameters);\r\n    \t\t \t/*log.info(&quot;sslContextParameters &quot;+ sslContextParameters);*/\r\n    \r\n    \t        HttpComponent httpComponent = camelContext.getComponent(&quot;https&quot;, HttpComponent.class);\r\n    \t        httpComponent.setSslContextParameters(sslContextParameters);\r\n    \t        httpComponent.setX509HostnameVerifier(new AllowAllHostnameVerifier());\r\n    \t\t \t/*log.info(&quot;httpComponent &quot;+ httpComponent); */\r\n    \r\n    \t        return httpComponent.createEndpoint(url);\r\n    \t    }\r\n    \r\n    }\r\n\r\nBut now for the dynamic url I need to use the toD method of apache camel for dynamic url, however, I don&#39;t know how to configure the SSL part in dynamic url in the toD method, what I used for the non-dynamic url to method does not work for me in the toD method\r\n\r\n\r\nI tried like this but it gives me an error on the line:\r\n\r\n    .toD(configureSsl.setupSSLContext(getCamelContext(),&quot;https://localhost:8080/users/${exchangeProperty[user_id]}/customers?bridgeEndpoint=true&quot;))\r\n\r\n\r\nWhat can I do in this case to add my SSL configuration to my dynamic url in apache camel using the toD method, otherwise I get the following error:\r\n\r\n    javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target","title":"How to configure SSL to call other REST services through dynamic url in Apcahe Camel Method tod","body":"<p>Good morning, I am currently working with apache camel and Quarkus and I am presented for the first time with a scenario that had not happened to me before, now I am working with dynamic url of the following type to call:</p>\n<pre><code>https://localhost:8080/users/{user}/customers\n</code></pre>\n<p>These services are in SSL, so the call to SSL must be configured, for non-dynamic url I used the following line:</p>\n<pre><code>.to(configureSsl.setupSSLContext(getCamelContext(), &quot;https://localhost:8081/api/FindPrepaidAccountByDocument&quot;))\n</code></pre>\n<p>Where my ConfigureSSL class is as follows:</p>\n<pre><code>package org.tmve.customer.ms.route;\n\nimport lombok.extern.slf4j.Slf4j;\nimport org.apache.camel.CamelContext;\nimport org.apache.camel.Endpoint;\nimport org.apache.camel.component.http.HttpComponent;\nimport org.apache.camel.support.jsse.KeyManagersParameters;\nimport org.apache.camel.support.jsse.KeyStoreParameters;\nimport org.apache.camel.support.jsse.SSLContextParameters;\nimport org.apache.camel.support.jsse.TrustManagersParameters;\nimport org.apache.http.conn.ssl.AllowAllHostnameVerifier;\nimport org.eclipse.microprofile.config.ConfigProvider;\n\n@Slf4j\npublic class ConfigureSsl {\n    \n    private String password = ConfigProvider.getConfig().getValue(&quot;client.password&quot;, String.class);\n    private String resource = ConfigProvider.getConfig().getValue(&quot;client.file&quot;, String.class);\n    \n     public Endpoint setupSSLContext(CamelContext camelContext, String url) throws Exception {\n\n            KeyStoreParameters keyStoreParameters = new KeyStoreParameters();\n            /*log.info(resource);*/\n            /*log.info(password);*/\n            keyStoreParameters.setResource(resource);\n            keyStoreParameters.setPassword(password);\n\n            KeyManagersParameters keyManagersParameters = new KeyManagersParameters();\n            keyManagersParameters.setKeyStore(keyStoreParameters);\n            keyManagersParameters.setKeyPassword(password);\n            /*log.info(&quot;keyManagersParameters &quot;+ keyManagersParameters);*/\n\n            TrustManagersParameters trustManagersParameters = new TrustManagersParameters();\n            trustManagersParameters.setKeyStore(keyStoreParameters);\n            /*log.info(&quot;trustManagersParameters &quot;+ trustManagersParameters);*/\n\n            SSLContextParameters sslContextParameters = new SSLContextParameters();\n            sslContextParameters.setKeyManagers(keyManagersParameters);\n            sslContextParameters.setTrustManagers(trustManagersParameters);\n            /*log.info(&quot;sslContextParameters &quot;+ sslContextParameters);*/\n\n            HttpComponent httpComponent = camelContext.getComponent(&quot;https&quot;, HttpComponent.class);\n            httpComponent.setSslContextParameters(sslContextParameters);\n            httpComponent.setX509HostnameVerifier(new AllowAllHostnameVerifier());\n            /*log.info(&quot;httpComponent &quot;+ httpComponent); */\n\n            return httpComponent.createEndpoint(url);\n        }\n\n}\n</code></pre>\n<p>But now for the dynamic url I need to use the toD method of apache camel for dynamic url, however, I don't know how to configure the SSL part in dynamic url in the toD method, what I used for the non-dynamic url to method does not work for me in the toD method</p>\n<p>I tried like this but it gives me an error on the line:</p>\n<pre><code>.toD(configureSsl.setupSSLContext(getCamelContext(),&quot;https://localhost:8080/users/${exchangeProperty[user_id]}/customers?bridgeEndpoint=true&quot;))\n</code></pre>\n<p>What can I do in this case to add my SSL configuration to my dynamic url in apache camel using the toD method, otherwise I get the following error:</p>\n<pre><code>javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n</code></pre>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1692946332,"post_id":76974810,"comment_id":135696285,"body_markdown":"If it&#39;s user input, it probably shouldn&#39;t be a constructor parameter. Try to rewrite your Parent and Child so they can be constructed without the input, and pass the parameter to their method(s).","body":"If it&#39;s user input, it probably shouldn&#39;t be a constructor parameter. Try to rewrite your Parent and Child so they can be constructed without the input, and pass the parameter to their method(s)."},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1692946439,"post_id":76974810,"comment_id":135696308,"body_markdown":"How is the user input provided? Is it entered using some controller, is it entered from the console or something else? Can it change during the lifetime of your application?","body":"How is the user input provided? Is it entered using some controller, is it entered from the console or something else? Can it change during the lifetime of your application?"},{"owner":{"account_id":2188579,"reputation":1604,"user_id":1936343,"accept_rate":48,"display_name":"voila"},"score":0,"creation_date":1692946686,"post_id":76974810,"comment_id":135696353,"body_markdown":"@dan1st : You can say it is input parameter via args ( console )","body":"@dan1st : You can say it is input parameter via args ( console )"},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1692947054,"post_id":76974810,"comment_id":135696409,"body_markdown":"Are you using a system property? Did you try injecting [`ApplicationArguments`](https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/ApplicationArguments.html) to `getParent`?","body":"Are you using a system property? Did you try injecting <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/ApplicationArguments.html\" rel=\"nofollow noreferrer\"><code>ApplicationArguments</code></a> to <code>getParent</code>?"},{"owner":{"account_id":2188579,"reputation":1604,"user_id":1936343,"accept_rate":48,"display_name":"voila"},"score":0,"creation_date":1692947716,"post_id":76974810,"comment_id":135696539,"body_markdown":"@dan1st : Can you please elaborate on this one ..","body":"@dan1st : Can you please elaborate on this one .."},{"owner":{"account_id":2188579,"reputation":1604,"user_id":1936343,"accept_rate":48,"display_name":"voila"},"score":0,"creation_date":1692947751,"post_id":76974810,"comment_id":135696550,"body_markdown":"@Jorn : Making sense, if it is user input, it should not be the constructor rather it could be setter method. Let me try this one.","body":"@Jorn : Making sense, if it is user input, it should not be the constructor rather it could be setter method. Let me try this one."}],"answers":[{"tags":[],"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692949672,"creation_date":1692949672,"answer_id":76975260,"question_id":76974810,"body_markdown":"You can use [`ApplicationArguments`](https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/ApplicationArguments.html) for accessing arguments to your Spring application.\r\n\r\nAn instance of this class is registered as a Spring bean and you can use it to access arguments to your application.\r\n\r\n```java\r\n    @Bean\r\n    @Scope(value = &quot;prototype&quot;)\r\n    public Parent getParent(ApplicationArguments args){\r\n        String name = args.getNonOptionArgs().get(0);//get the first argument that isn&#39;t passed (without -- before it)\r\n        //alternative: if it is passed as --personName=yourPersonName\r\n        String name = args.getOptionValues(&quot;personName&quot;).get(0);\r\n\r\n        return new Parent(name);\r\n    }\r\n```\r\n\r\nIf the name is passed as a system property, you can use `@Value` instead. In this example, I will assume that that the system property is called `person.name` (you can pass it as a JVM argument `-Dperson.name=yourName`):\r\n```java\r\n    @Bean\r\n    @Scope(value = &quot;prototype&quot;)\r\n    public Parent getParent(@Value(&quot;${person.name}&quot;) String name){\r\n        return new Parent(name);\r\n    }\r\n```","title":"Spring boot - Initialize bean which is dependent on user input","body":"<p>You can use <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/ApplicationArguments.html\" rel=\"nofollow noreferrer\"><code>ApplicationArguments</code></a> for accessing arguments to your Spring application.</p>\n<p>An instance of this class is registered as a Spring bean and you can use it to access arguments to your application.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Bean\n    @Scope(value = &quot;prototype&quot;)\n    public Parent getParent(ApplicationArguments args){\n        String name = args.getNonOptionArgs().get(0);//get the first argument that isn't passed (without -- before it)\n        //alternative: if it is passed as --personName=yourPersonName\n        String name = args.getOptionValues(&quot;personName&quot;).get(0);\n\n        return new Parent(name);\n    }\n</code></pre>\n<p>If the name is passed as a system property, you can use <code>@Value</code> instead. In this example, I will assume that that the system property is called <code>person.name</code> (you can pass it as a JVM argument <code>-Dperson.name=yourName</code>):</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Bean\n    @Scope(value = &quot;prototype&quot;)\n    public Parent getParent(@Value(&quot;${person.name}&quot;) String name){\n        return new Parent(name);\n    }\n</code></pre>\n"}],"owner":{"account_id":2188579,"reputation":1604,"user_id":1936343,"accept_rate":48,"display_name":"voila"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1692949672,"creation_date":1692945568,"question_id":76974810,"body_markdown":"I am learning spring boot and came across a case where say I have two beans \r\n\r\n1. `Parent Bean` which depends on input `uniqueFamilyCode` for initialization. \r\n2. I have another bean `Child Bean` which depends on the `Parent Bean` for functionality. \r\n\r\nBelow is the snippet for `Parent Bean` \r\n\r\n```\r\npackage com.example.springdemo;\r\n\r\npublic class Parent {\r\n\r\n    String uniqueFamilyCode;\r\n\r\n    public Parent(String uniqueFamilyCode){\r\n        this.uniqueFamilyCode = uniqueFamilyCode;\r\n    }\r\n}\r\n\r\n\r\n```\r\n\r\nBelow is the snippet of `Child bean`\r\n\r\n```\r\npackage com.example.springdemo;\r\n\r\nimport org.springframework.context.annotation.Configuration;\r\n\r\n\r\npublic class Child {\r\n\r\n    Parent parent;\r\n    public Child(Parent parent){\r\n        this.parent = parent;\r\n    }\r\n\r\n    public String getFamilyCode(){\r\n        return this.parent.uniqueFamilyCode;\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\n\r\nNow I want to manage it via Spring boot so I created a `Configuration class` like below \r\n\r\n```\r\n\r\npackage com.example.springdemo;\r\n\r\n\r\nimport org.springframework.boot.autoconfigure.EnableAutoConfiguration;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.ComponentScan;\r\nimport org.springframework.context.annotation.Scope;\r\n\r\n@org.springframework.context.annotation.Configuration\r\n\r\npublic class FamilyConfig {\r\n\r\n    @Bean\r\n    public Child getChild(Parent parent){\r\n\r\n        return new Child(parent);\r\n    }\r\n\r\n    @Bean\r\n    @Scope(value = &quot;prototype&quot;)\r\n    public Parent getParent(String name){ --&gt; At this point intelliJ showing me error No bean of string type found\r\n\r\n        return new Parent(name);\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\n\r\nMy question is, how do I manage the `Parent` Bean in Spring Boot Way. \r\n\r\n\r\n**My Analysis** \r\n\r\n`Child Bean` depends on `Parent Bean` and `Parent Bean` depends on user input `uniqueFamilyCode`. \r\n\r\nSo spring boot at start-up time, can not initialize the `Parent Bean`, hence `Child Bean` also can not be initialized or any other that belongs to this graph. \r\n\r\nIf it is so, spring boot isn&#39;t good for such use cases or there are features to tackle such cases. \r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Spring boot - Initialize bean which is dependent on user input","body":"<p>I am learning spring boot and came across a case where say I have two beans</p>\n<ol>\n<li><code>Parent Bean</code> which depends on input <code>uniqueFamilyCode</code> for initialization.</li>\n<li>I have another bean <code>Child Bean</code> which depends on the <code>Parent Bean</code> for functionality.</li>\n</ol>\n<p>Below is the snippet for <code>Parent Bean</code></p>\n<pre><code>package com.example.springdemo;\n\npublic class Parent {\n\n    String uniqueFamilyCode;\n\n    public Parent(String uniqueFamilyCode){\n        this.uniqueFamilyCode = uniqueFamilyCode;\n    }\n}\n\n\n</code></pre>\n<p>Below is the snippet of <code>Child bean</code></p>\n<pre><code>package com.example.springdemo;\n\nimport org.springframework.context.annotation.Configuration;\n\n\npublic class Child {\n\n    Parent parent;\n    public Child(Parent parent){\n        this.parent = parent;\n    }\n\n    public String getFamilyCode(){\n        return this.parent.uniqueFamilyCode;\n    }\n\n}\n\n</code></pre>\n<p>Now I want to manage it via Spring boot so I created a <code>Configuration class</code> like below</p>\n<pre><code>\npackage com.example.springdemo;\n\n\nimport org.springframework.boot.autoconfigure.EnableAutoConfiguration;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Scope;\n\n@org.springframework.context.annotation.Configuration\n\npublic class FamilyConfig {\n\n    @Bean\n    public Child getChild(Parent parent){\n\n        return new Child(parent);\n    }\n\n    @Bean\n    @Scope(value = &quot;prototype&quot;)\n    public Parent getParent(String name){ --&gt; At this point intelliJ showing me error No bean of string type found\n\n        return new Parent(name);\n    }\n\n}\n\n</code></pre>\n<p>My question is, how do I manage the <code>Parent</code> Bean in Spring Boot Way.</p>\n<p><strong>My Analysis</strong></p>\n<p><code>Child Bean</code> depends on <code>Parent Bean</code> and <code>Parent Bean</code> depends on user input <code>uniqueFamilyCode</code>.</p>\n<p>So spring boot at start-up time, can not initialize the <code>Parent Bean</code>, hence <code>Child Bean</code> also can not be initialized or any other that belongs to this graph.</p>\n<p>If it is so, spring boot isn't good for such use cases or there are features to tackle such cases.</p>\n"},{"tags":["java","ssl","https","apache-httpclient-4.x"],"comments":[{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":1,"creation_date":1692947870,"post_id":76974973,"comment_id":135696575,"body_markdown":"**It doesn&#39;t match.** _In a cert_ wildcard &#39;*&#39; matches only _one_ DNS level (or formally label), not multiple and not zero. See [RFC6125](https://datatracker.ietf.org/doc/html/rfc6125#section-6.4.3) and if HTTPS [RFC2818](https://datatracker.ietf.org/doc/html/rfc2818#section-3.1)","body":"<b>It doesn&#39;t match.</b> <i>In a cert</i> wildcard &#39;*&#39; matches only <i>one</i> DNS level (or formally label), not multiple and not zero. See <a href=\"https://datatracker.ietf.org/doc/html/rfc6125#section-6.4.3\" rel=\"nofollow noreferrer\">RFC6125</a> and if HTTPS <a href=\"https://datatracker.ietf.org/doc/html/rfc2818#section-3.1\" rel=\"nofollow noreferrer\">RFC2818</a>"},{"owner":{"account_id":1956083,"reputation":4432,"user_id":1759063,"accept_rate":53,"display_name":"Eljah"},"score":0,"creation_date":1692948142,"post_id":76974973,"comment_id":135696634,"body_markdown":"@dave_thompson_085 please post that as the official answer!","body":"@dave_thompson_085 please post that as the official answer!"}],"owner":{"account_id":1956083,"reputation":4432,"user_id":1759063,"accept_rate":53,"display_name":"Eljah"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":223,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1692949521,"answer_count":0,"score":0,"last_activity_date":1692949590,"creation_date":1692947118,"question_id":76974973,"body_markdown":"Why I&#39;m getting this error, while the host I&#39;d like to establish the ssl connection with matches the wildcard from the Alternative names field of the certificate?\r\n\r\nWe use \r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n            &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\r\n            &lt;version&gt;4.5.9&lt;/version&gt;\r\n        &lt;/dependency&gt;","title":"javax.net.ssl.SSLPeerUnverifiedException: Certificate for &lt;g.i.t.n.c.com&gt; doesn&#39;t match any of the subject alternative names: [*.t.n.c.com]","body":"<p>Why I'm getting this error, while the host I'd like to establish the ssl connection with matches the wildcard from the Alternative names field of the certificate?</p>\n<p>We use</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n        &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\n        &lt;version&gt;4.5.9&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","spring","hibernate","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":2563377,"reputation":7174,"user_id":2224047,"display_name":"Nikolai  Shevchenko"},"score":3,"creation_date":1604996908,"post_id":64762080,"comment_id":114510746,"body_markdown":"AFAIK, all this approaches don&#39;t work when `nativeQuery=true`","body":"AFAIK, all this approaches don&#39;t work when <code>nativeQuery=true</code>"},{"owner":{"account_id":16420077,"reputation":671,"user_id":11861493,"display_name":"Shoniisra"},"score":0,"creation_date":1655912610,"post_id":64762080,"comment_id":128446064,"body_markdown":"The second one is correct, only remove remove &quot;nativeQuery=true&quot;","body":"The second one is correct, only remove remove &quot;nativeQuery=true&quot;"},{"owner":{"account_id":1455702,"reputation":15662,"user_id":1371329,"accept_rate":64,"display_name":"jaco0646"},"score":1,"creation_date":1698591729,"post_id":64762080,"comment_id":136422210,"body_markdown":"[Projections](https://docs.spring.io/spring-data/jpa/reference/repositories/projections.html)","body":"<a href=\"https://docs.spring.io/spring-data/jpa/reference/repositories/projections.html\" rel=\"nofollow noreferrer\">Projections</a>"}],"answers":[{"tags":[],"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1604994573,"creation_date":1604994573,"answer_id":64764786,"question_id":64762080,"body_markdown":"The second variant is pretty close. You just have to remove the aliases for the constructor expression:\r\n\r\n```java\r\nnew com.b2bwarehouse.Dto.RequestDto.StockDto.StockAkhirDto(\r\n    stock_akhir.product_id, \r\n    stock_akhir.product_code, \r\n    SUM(stock_akhir.qty)\r\n)\r\n```\r\nshould work.","title":"How to map sql native query result into DTO in spring jpa repository?","body":"<p>The second variant is pretty close. You just have to remove the aliases for the constructor expression:</p>\n<pre class=\"lang-java prettyprint-override\"><code>new com.b2bwarehouse.Dto.RequestDto.StockDto.StockAkhirDto(\n    stock_akhir.product_id, \n    stock_akhir.product_code, \n    SUM(stock_akhir.qty)\n)\n</code></pre>\n<p>should work.</p>\n"},{"tags":[],"owner":{"account_id":8357383,"reputation":11939,"user_id":6277104,"display_name":"SternK"},"down_vote_count":0,"up_vote_count":35,"is_accepted":true,"score":35,"last_activity_date":1605082178,"creation_date":1605040359,"answer_id":64776376,"question_id":64762080,"body_markdown":"You can define the following named native query with appropriate sql result set mapping:\r\n\r\n``` java\r\nimport javax.persistence.NamedNativeQuery;\r\nimport javax.persistence.SqlResultSetMapping;\r\nimport javax.persistence.ConstructorResult;\r\nimport javax.persistence.ColumnResult;\r\n\r\n@Entity\r\n@NamedNativeQuery(\r\n    name = &quot;find_stock_akhir_dto&quot;,\r\n    query =\r\n        &quot;SELECT &quot; + \r\n        &quot;  stock_akhir.product_id AS productId, &quot; + \r\n        &quot;  stock_akhir.product_code AS productCode, &quot; + \r\n        &quot;  SUM(stock_akhir.qty) as stockAkhir &quot; + \r\n        &quot;FROM book_stock stock_akhir &quot; + \r\n        &quot;where warehouse_code = :warehouseCode &quot; + \r\n        &quot;  AND product_code IN :productCodes &quot; + \r\n        &quot;GROUP BY product_id, product_code, warehouse_id, warehouse_code&quot;,\r\n    resultSetMapping = &quot;stock_akhir_dto&quot;\r\n)\r\n@SqlResultSetMapping(\r\n    name = &quot;stock_akhir_dto&quot;,\r\n    classes = @ConstructorResult(\r\n        targetClass = StockAkhirDto.class,\r\n        columns = {\r\n            @ColumnResult(name = &quot;productId&quot;, type = Long.class),\r\n            @ColumnResult(name = &quot;productCode&quot;, type = String.class),\r\n            @ColumnResult(name = &quot;stockAkhir&quot;, type = Integer.class)\r\n        }\r\n    )\r\n)\r\npublic class SomeEntity\r\n{\r\n}\r\n```\r\n\r\nand then use it:\r\n\r\n``` java\r\n@Repository\r\npublic interface StockRepository extends RevisionRepository&lt;Stock, Long, Integer&gt;, JpaRepository&lt;Stock, Long&gt; {\r\n\r\n   @Query(name = &quot;find_stock_akhir_dto&quot;, nativeQuery = true)\r\n   List&lt;StockAkhirDto&gt; findStockAkhirPerProductIn(\r\n      @Param(&quot;warehouseCode&quot;) String warehouseCode,\r\n      @Param(&quot;productCodes&quot;) Set&lt;String&gt; productCode\r\n   );\r\n}\r\n```","title":"How to map sql native query result into DTO in spring jpa repository?","body":"<p>You can define the following named native query with appropriate sql result set mapping:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import javax.persistence.NamedNativeQuery;\nimport javax.persistence.SqlResultSetMapping;\nimport javax.persistence.ConstructorResult;\nimport javax.persistence.ColumnResult;\n\n@Entity\n@NamedNativeQuery(\n    name = &quot;find_stock_akhir_dto&quot;,\n    query =\n        &quot;SELECT &quot; + \n        &quot;  stock_akhir.product_id AS productId, &quot; + \n        &quot;  stock_akhir.product_code AS productCode, &quot; + \n        &quot;  SUM(stock_akhir.qty) as stockAkhir &quot; + \n        &quot;FROM book_stock stock_akhir &quot; + \n        &quot;where warehouse_code = :warehouseCode &quot; + \n        &quot;  AND product_code IN :productCodes &quot; + \n        &quot;GROUP BY product_id, product_code, warehouse_id, warehouse_code&quot;,\n    resultSetMapping = &quot;stock_akhir_dto&quot;\n)\n@SqlResultSetMapping(\n    name = &quot;stock_akhir_dto&quot;,\n    classes = @ConstructorResult(\n        targetClass = StockAkhirDto.class,\n        columns = {\n            @ColumnResult(name = &quot;productId&quot;, type = Long.class),\n            @ColumnResult(name = &quot;productCode&quot;, type = String.class),\n            @ColumnResult(name = &quot;stockAkhir&quot;, type = Integer.class)\n        }\n    )\n)\npublic class SomeEntity\n{\n}\n</code></pre>\n<p>and then use it:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Repository\npublic interface StockRepository extends RevisionRepository&lt;Stock, Long, Integer&gt;, JpaRepository&lt;Stock, Long&gt; {\n\n   @Query(name = &quot;find_stock_akhir_dto&quot;, nativeQuery = true)\n   List&lt;StockAkhirDto&gt; findStockAkhirPerProductIn(\n      @Param(&quot;warehouseCode&quot;) String warehouseCode,\n      @Param(&quot;productCodes&quot;) Set&lt;String&gt; productCode\n   );\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3153451,"reputation":3590,"user_id":2666368,"accept_rate":79,"display_name":"Ke Vin"},"down_vote_count":0,"up_vote_count":33,"is_accepted":false,"score":33,"last_activity_date":1606663632,"creation_date":1606663632,"answer_id":65061782,"question_id":64762080,"body_markdown":"i find a way which is not usual, but i find data type called **&quot;Tuple&quot;** when i try to use QueryDsl to solved this problem, but i won&#39;t recommend QueryDsl if you are just getting started just like me. Lets focus on how i do it with **&quot;Tuple&quot;**\r\n\r\ni changed my return type to **Tuple**, here is how my repository looked like :\r\n\r\n    @Repository\r\n    public interface StockRepository extends RevisionRepository&lt;Stock, Long, Integer&gt;, JpaRepository&lt;Stock, Long&gt; {\r\n        \r\n       @Query(value = &quot;SELECT stock_akhir.product_id AS productId, stock_akhir.product_code AS productCode, SUM(stock_akhir.qty) as stockAkhir &quot;\r\n            + &quot;FROM book_stock stock_akhir &quot;\r\n            + &quot;where warehouse_code = (:warehouseCode) &quot;\r\n            + &quot;AND product_code IN (:productCodes) &quot;\r\n            + &quot;GROUP BY product_id, product_code, warehouse_id, warehouse_code&quot;, nativeQuery = true)\r\n       List&lt;Tuple&gt; findStockAkhirPerProductIn(@Param(&quot;warehouseCode&quot;) String warehouseCode, @Param(&quot;productCodes&quot;) Set&lt;String&gt; productCode);\r\n    }\r\n\r\nand then here in my service class, since it&#39;s returned as Tuple, i have to map the column one by one manually, here is my service function looked like :\r\n\r\n    public List&lt;StockTotalResponseDto&gt; findStocktotal() {\r\n    \tList&lt;Tuple&gt; stockTotalTuples = stockRepository.findStocktotal();\r\n    \t\r\n        List&lt;StockTotalResponseDto&gt; stockTotalDto = stockTotalTuples.stream()\r\n                .map(t -&gt; new StockTotalResponseDto(\r\n                \t\tt.get(0, String.class), \r\n                \t\tt.get(1, String.class), \r\n                \t\tt.get(2, BigInteger.class)\r\n                \t\t))\r\n                .collect(Collectors.toList());\r\n        \r\n        return stockTotalDto;\r\n    }\r\n\r\nthe column field start with 0, in this way i can keep my query neat at Repository level. But i will accept SternK answer as the accepted answer because that way worked too, i will keep my answer here if someone need something like this","title":"How to map sql native query result into DTO in spring jpa repository?","body":"<p>i find a way which is not usual, but i find data type called <strong>&quot;Tuple&quot;</strong> when i try to use QueryDsl to solved this problem, but i won't recommend QueryDsl if you are just getting started just like me. Lets focus on how i do it with <strong>&quot;Tuple&quot;</strong></p>\n<p>i changed my return type to <strong>Tuple</strong>, here is how my repository looked like :</p>\n<pre><code>@Repository\npublic interface StockRepository extends RevisionRepository&lt;Stock, Long, Integer&gt;, JpaRepository&lt;Stock, Long&gt; {\n    \n   @Query(value = &quot;SELECT stock_akhir.product_id AS productId, stock_akhir.product_code AS productCode, SUM(stock_akhir.qty) as stockAkhir &quot;\n        + &quot;FROM book_stock stock_akhir &quot;\n        + &quot;where warehouse_code = (:warehouseCode) &quot;\n        + &quot;AND product_code IN (:productCodes) &quot;\n        + &quot;GROUP BY product_id, product_code, warehouse_id, warehouse_code&quot;, nativeQuery = true)\n   List&lt;Tuple&gt; findStockAkhirPerProductIn(@Param(&quot;warehouseCode&quot;) String warehouseCode, @Param(&quot;productCodes&quot;) Set&lt;String&gt; productCode);\n}\n</code></pre>\n<p>and then here in my service class, since it's returned as Tuple, i have to map the column one by one manually, here is my service function looked like :</p>\n<pre><code>public List&lt;StockTotalResponseDto&gt; findStocktotal() {\n    List&lt;Tuple&gt; stockTotalTuples = stockRepository.findStocktotal();\n    \n    List&lt;StockTotalResponseDto&gt; stockTotalDto = stockTotalTuples.stream()\n            .map(t -&gt; new StockTotalResponseDto(\n                    t.get(0, String.class), \n                    t.get(1, String.class), \n                    t.get(2, BigInteger.class)\n                    ))\n            .collect(Collectors.toList());\n    \n    return stockTotalDto;\n}\n</code></pre>\n<p>the column field start with 0, in this way i can keep my query neat at Repository level. But i will accept SternK answer as the accepted answer because that way worked too, i will keep my answer here if someone need something like this</p>\n"},{"tags":[],"owner":{"account_id":140044,"reputation":2757,"user_id":346057,"accept_rate":33,"display_name":"razor"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1624968995,"creation_date":1624473472,"answer_id":68105448,"question_id":64762080,"body_markdown":"Create standard native @Query \r\n\r\n  \r\n\r\n    @Query(value = &quot;select id, age, name FROM Person WHERE age=?1&quot;, nativeQuery=true)\r\n    List&lt;PersonView&gt; getPersonsByAge(int age);\r\n\r\nand an interface\r\n\r\n    public interface PersonView {\r\n        Long getId();\r\n        Integer getAge();\r\n        String getName();\r\n    }\r\n\r\ncolumns are matched by order (not by names).\r\nIn this way, you have a native query, no entities and not too much boiler plate code (aka many annotations).\r\n\r\nHowever, resulting views (Jdk proxy etc.) are very slow in access, i had some code doing some grouping over a stream, and it&#39;s 10x !! slower than with standard DTO/Pojos !\r\nso at the end, I don&#39;t use nativeQuery anymore, but:\r\n\r\n    SELECT new com.my_project.myDTO(p.id, p.age, p.name) .....\r\n\r\n ","title":"How to map sql native query result into DTO in spring jpa repository?","body":"<p>Create standard native @Query</p>\n<pre><code>@Query(value = &quot;select id, age, name FROM Person WHERE age=?1&quot;, nativeQuery=true)\nList&lt;PersonView&gt; getPersonsByAge(int age);\n</code></pre>\n<p>and an interface</p>\n<pre><code>public interface PersonView {\n    Long getId();\n    Integer getAge();\n    String getName();\n}\n</code></pre>\n<p>columns are matched by order (not by names).\nIn this way, you have a native query, no entities and not too much boiler plate code (aka many annotations).</p>\n<p>However, resulting views (Jdk proxy etc.) are very slow in access, i had some code doing some grouping over a stream, and it's 10x !! slower than with standard DTO/Pojos !\nso at the end, I don't use nativeQuery anymore, but:</p>\n<pre><code>SELECT new com.my_project.myDTO(p.id, p.age, p.name) .....\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1492534,"reputation":4433,"user_id":6999690,"display_name":"Ruslan L&#243;pez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631657870,"creation_date":1631657870,"answer_id":69185070,"question_id":64762080,"body_markdown":"Another valid option based on Sternk answer woul be as follows\r\n\r\nYou can define the following named native query with appropriate sql result set mapping:\r\n\r\nresources/META-INF/orm.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;entity-mappings xmlns=&quot;http://java.sun.com/xml/ns/persistence/orm&quot;\r\n                     xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n                     xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/persistence/orm http://java.sun.com/xml/ns/persistence/orm_2_0.xsd&quot;\r\n                     version=&quot;2.0&quot;&gt;\r\n        &lt;named-native-query name=&quot;find_stock_akhir_dto&quot; result-class=&quot;com.fullyqualified.name.SomeEntity&quot;\r\n                            result-set-mapping=&quot;stock_akhir_dto&quot;&gt;\r\n            &lt;query&gt;&lt;![CDATA[\r\n                SELECT \r\n                  stock_akhir.product_id AS productId, \r\n                  stock_akhir.product_code AS productCode, \r\n                  SUM(stock_akhir.qty) as stockAkhir \r\n                FROM book_stock stock_akhir \r\n                where warehouse_code = :warehouseCode \r\n                  AND product_code IN :productCodes  \r\n                GROUP BY product_id, product_code, warehouse_id, warehouse_code]]&gt;&lt;/query&gt;\r\n        &lt;/named-native-query&gt;\r\n    &lt;/entity-mappings&gt;\r\n\r\n``` java\r\nimport javax.persistence.NamedNativeQuery;\r\nimport javax.persistence.SqlResultSetMapping;\r\nimport javax.persistence.ConstructorResult;\r\nimport javax.persistence.ColumnResult;\r\n\r\n@Entity\r\n@SqlResultSetMapping(\r\n    name = &quot;stock_akhir_dto&quot;,\r\n    classes = @ConstructorResult(\r\n        targetClass = StockAkhirDto.class,\r\n        columns = {\r\n            @ColumnResult(name = &quot;productId&quot;, type = Long.class),\r\n            @ColumnResult(name = &quot;productCode&quot;, type = String.class),\r\n            @ColumnResult(name = &quot;stockAkhir&quot;, type = Integer.class)\r\n        }\r\n    )\r\n)\r\npublic class SomeEntity\r\n{\r\n}\r\n```\r\n\r\nand then use it:\r\n\r\n``` java\r\n@Repository\r\npublic interface StockRepository extends RevisionRepository&lt;Stock, Long, Integer&gt;, JpaRepository&lt;Stock, Long&gt; {\r\n\r\n   @Query(name = &quot;find_stock_akhir_dto&quot;, nativeQuery = true)\r\n   List&lt;StockAkhirDto&gt; findStockAkhirPerProductIn(\r\n      @Param(&quot;warehouseCode&quot;) String warehouseCode,\r\n      @Param(&quot;productCodes&quot;) Set&lt;String&gt; productCode\r\n   );\r\n}\r\n```","title":"How to map sql native query result into DTO in spring jpa repository?","body":"<p>Another valid option based on Sternk answer woul be as follows</p>\n<p>You can define the following named native query with appropriate sql result set mapping:</p>\n<p>resources/META-INF/orm.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;entity-mappings xmlns=&quot;http://java.sun.com/xml/ns/persistence/orm&quot;\n                 xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n                 xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/persistence/orm http://java.sun.com/xml/ns/persistence/orm_2_0.xsd&quot;\n                 version=&quot;2.0&quot;&gt;\n    &lt;named-native-query name=&quot;find_stock_akhir_dto&quot; result-class=&quot;com.fullyqualified.name.SomeEntity&quot;\n                        result-set-mapping=&quot;stock_akhir_dto&quot;&gt;\n        &lt;query&gt;&lt;![CDATA[\n            SELECT \n              stock_akhir.product_id AS productId, \n              stock_akhir.product_code AS productCode, \n              SUM(stock_akhir.qty) as stockAkhir \n            FROM book_stock stock_akhir \n            where warehouse_code = :warehouseCode \n              AND product_code IN :productCodes  \n            GROUP BY product_id, product_code, warehouse_id, warehouse_code]]&gt;&lt;/query&gt;\n    &lt;/named-native-query&gt;\n&lt;/entity-mappings&gt;\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>import javax.persistence.NamedNativeQuery;\nimport javax.persistence.SqlResultSetMapping;\nimport javax.persistence.ConstructorResult;\nimport javax.persistence.ColumnResult;\n\n@Entity\n@SqlResultSetMapping(\n    name = &quot;stock_akhir_dto&quot;,\n    classes = @ConstructorResult(\n        targetClass = StockAkhirDto.class,\n        columns = {\n            @ColumnResult(name = &quot;productId&quot;, type = Long.class),\n            @ColumnResult(name = &quot;productCode&quot;, type = String.class),\n            @ColumnResult(name = &quot;stockAkhir&quot;, type = Integer.class)\n        }\n    )\n)\npublic class SomeEntity\n{\n}\n</code></pre>\n<p>and then use it:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Repository\npublic interface StockRepository extends RevisionRepository&lt;Stock, Long, Integer&gt;, JpaRepository&lt;Stock, Long&gt; {\n\n   @Query(name = &quot;find_stock_akhir_dto&quot;, nativeQuery = true)\n   List&lt;StockAkhirDto&gt; findStockAkhirPerProductIn(\n      @Param(&quot;warehouseCode&quot;) String warehouseCode,\n      @Param(&quot;productCodes&quot;) Set&lt;String&gt; productCode\n   );\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7588122,"reputation":961,"user_id":5756557,"display_name":"anandchaugule"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1692949288,"creation_date":1692949288,"answer_id":76975218,"question_id":64762080,"body_markdown":"Map your result of a native SQL query into an interface-based DTO in a Spring JPA repository is very simplified by spring boot framework as below steps you can follow \r\n\r\n**1. Define the DTO Interface:**\r\n\r\nCreate an interface that defines the getter methods for the properties you want to map from the native SQL query result. The interface methods should match the column aliases used in your SQL query.\r\n\r\n    public interface MyDTO {\r\n        Long getId();\r\n        String getName();\r\n        // Other getter methods for other properties\r\n    }\r\n\r\n**2. Define the Native SQL Query:**\r\n\r\nIn your Spring JPA repository interface, use the @Query annotation with a native SQL query that returns the columns needed for the DTO interface.\r\n\r\n    @Repository\r\n    public interface MyEntityRepository extends JpaRepository&lt;MyEntity, Long&gt; {\r\n    \r\n        @Query(value = &quot;SELECT id as id, name as name FROM my_table WHERE ...&quot;, nativeQuery = true)\r\n        List&lt;MyDTO&gt; findDataUsingNativeQuery();\r\n    }\r\n\r\nYou can now use the findDataUsingNativeQuery() method from your service layer to retrieve the data mapped to the DTO interface.","title":"How to map sql native query result into DTO in spring jpa repository?","body":"<p>Map your result of a native SQL query into an interface-based DTO in a Spring JPA repository is very simplified by spring boot framework as below steps you can follow</p>\n<p><strong>1. Define the DTO Interface:</strong></p>\n<p>Create an interface that defines the getter methods for the properties you want to map from the native SQL query result. The interface methods should match the column aliases used in your SQL query.</p>\n<pre><code>public interface MyDTO {\n    Long getId();\n    String getName();\n    // Other getter methods for other properties\n}\n</code></pre>\n<p><strong>2. Define the Native SQL Query:</strong></p>\n<p>In your Spring JPA repository interface, use the @Query annotation with a native SQL query that returns the columns needed for the DTO interface.</p>\n<pre><code>@Repository\npublic interface MyEntityRepository extends JpaRepository&lt;MyEntity, Long&gt; {\n\n    @Query(value = &quot;SELECT id as id, name as name FROM my_table WHERE ...&quot;, nativeQuery = true)\n    List&lt;MyDTO&gt; findDataUsingNativeQuery();\n}\n</code></pre>\n<p>You can now use the findDataUsingNativeQuery() method from your service layer to retrieve the data mapped to the DTO interface.</p>\n"}],"owner":{"account_id":3153451,"reputation":3590,"user_id":2666368,"accept_rate":79,"display_name":"Ke Vin"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81232,"favorite_count":0,"down_vote_count":0,"up_vote_count":25,"accepted_answer_id":64776376,"answer_count":6,"score":25,"last_activity_date":1692949288,"creation_date":1604975788,"question_id":64762080,"body_markdown":"Hi what I am trying to achieve is to get SQL native query result map into my DTO in java spring jpa repository, how do I do this properly? I try several code, but it does not work, here is what I tried:\r\n\r\nFirst try :\r\n``` java\r\n@Repository\r\npublic interface StockRepository extends RevisionRepository&lt;Stock, Long, Integer&gt;, JpaRepository&lt;Stock, Long&gt; {\r\n    \r\n   @Query(value = &quot;SELECT stock_akhir.product_id AS productId, stock_akhir.product_code AS productCode, SUM(stock_akhir.qty) as stockAkhir &quot;\r\n        + &quot;FROM book_stock stock_akhir &quot;\r\n        + &quot;where warehouse_code = (:warehouseCode) &quot;\r\n        + &quot;AND product_code IN (:productCodes) &quot;\r\n        + &quot;GROUP BY product_id, product_code, warehouse_id, warehouse_code&quot;, nativeQuery = true)\r\n   List&lt;StockAkhirDto&gt; findStockAkhirPerProductIn(@Param(&quot;warehouseCode&quot;) String warehouseCode, @Param(&quot;productCodes&quot;) Set&lt;String&gt; productCode);\r\n}\r\n```\r\n\r\nonce I execute the function, I got this error:\r\n\r\n&gt; No converter found capable of converting from type\r\n&gt; [org.springframework.data.jpa.repository.query.AbstractJpaQuery$TupleConverter$TupleBackedMap]\r\n&gt; to type [com.b2bwarehouse.Dto.RequestDto.StockDto.StockAkhirDto]\r\n\r\nSecond try :\r\n``` java\r\n@Repository\r\npublic interface StockRepository extends RevisionRepository&lt;Stock, Long, Integer&gt;, JpaRepository&lt;Stock, Long&gt; {\r\n    \r\n   @Query(value = &quot;SELECT new com.b2bwarehouse.Dto.RequestDto.StockDto.StockAkhirDto(stock_akhir.product_id AS productId, stock_akhir.product_code AS productCode, SUM(stock_akhir.qty) as stockAkhir) &quot;\r\n      + &quot;FROM book_stock stock_akhir &quot;\r\n      + &quot;where warehouse_code = (:warehouseCode) &quot;\r\n      + &quot;AND product_code IN (:productCodes) &quot;\r\n      + &quot;GROUP BY product_id, product_code, warehouse_id, warehouse_code&quot;, nativeQuery = true)\r\n   List&lt;StockAkhirDto&gt; findStockAkhirPerProductIn(@Param(&quot;warehouseCode&quot;) String warehouseCode, @Param(&quot;productCodes&quot;) Set&lt;String&gt; productCode);\r\n}\r\n```\r\nin second here is the error:\r\n\r\n&gt; could not extract ResultSet; SQL [n/a]; nested exception is\r\n&gt; org.hibernate.exception.SQLGrammarException: could not extract\r\n&gt; ResultSet\r\n\r\nbelow is my DTO:\r\n``` java\r\n@Data\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\npublic class StockAkhirDto {\r\n   private Long productId;\r\n   private String productCode;\r\n   private Integer stockAkhir;\r\n}\r\n```\r\n\r\nHow should I correct my code? So, can I get the result into my DTO?","title":"How to map sql native query result into DTO in spring jpa repository?","body":"<p>Hi what I am trying to achieve is to get SQL native query result map into my DTO in java spring jpa repository, how do I do this properly? I try several code, but it does not work, here is what I tried:</p>\n<p>First try :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Repository\npublic interface StockRepository extends RevisionRepository&lt;Stock, Long, Integer&gt;, JpaRepository&lt;Stock, Long&gt; {\n    \n   @Query(value = &quot;SELECT stock_akhir.product_id AS productId, stock_akhir.product_code AS productCode, SUM(stock_akhir.qty) as stockAkhir &quot;\n        + &quot;FROM book_stock stock_akhir &quot;\n        + &quot;where warehouse_code = (:warehouseCode) &quot;\n        + &quot;AND product_code IN (:productCodes) &quot;\n        + &quot;GROUP BY product_id, product_code, warehouse_id, warehouse_code&quot;, nativeQuery = true)\n   List&lt;StockAkhirDto&gt; findStockAkhirPerProductIn(@Param(&quot;warehouseCode&quot;) String warehouseCode, @Param(&quot;productCodes&quot;) Set&lt;String&gt; productCode);\n}\n</code></pre>\n<p>once I execute the function, I got this error:</p>\n<blockquote>\n<p>No converter found capable of converting from type\n[org.springframework.data.jpa.repository.query.AbstractJpaQuery$TupleConverter$TupleBackedMap]\nto type [com.b2bwarehouse.Dto.RequestDto.StockDto.StockAkhirDto]</p>\n</blockquote>\n<p>Second try :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Repository\npublic interface StockRepository extends RevisionRepository&lt;Stock, Long, Integer&gt;, JpaRepository&lt;Stock, Long&gt; {\n    \n   @Query(value = &quot;SELECT new com.b2bwarehouse.Dto.RequestDto.StockDto.StockAkhirDto(stock_akhir.product_id AS productId, stock_akhir.product_code AS productCode, SUM(stock_akhir.qty) as stockAkhir) &quot;\n      + &quot;FROM book_stock stock_akhir &quot;\n      + &quot;where warehouse_code = (:warehouseCode) &quot;\n      + &quot;AND product_code IN (:productCodes) &quot;\n      + &quot;GROUP BY product_id, product_code, warehouse_id, warehouse_code&quot;, nativeQuery = true)\n   List&lt;StockAkhirDto&gt; findStockAkhirPerProductIn(@Param(&quot;warehouseCode&quot;) String warehouseCode, @Param(&quot;productCodes&quot;) Set&lt;String&gt; productCode);\n}\n</code></pre>\n<p>in second here is the error:</p>\n<blockquote>\n<p>could not extract ResultSet; SQL [n/a]; nested exception is\norg.hibernate.exception.SQLGrammarException: could not extract\nResultSet</p>\n</blockquote>\n<p>below is my DTO:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\n@AllArgsConstructor\n@NoArgsConstructor\npublic class StockAkhirDto {\n   private Long productId;\n   private String productCode;\n   private Integer stockAkhir;\n}\n</code></pre>\n<p>How should I correct my code? So, can I get the result into my DTO?</p>\n"},{"tags":["java","yaml","snakeyaml"],"comments":[{"owner":{"account_id":121967,"reputation":1817,"user_id":315454,"accept_rate":48,"display_name":"Alexander.Furer"},"score":0,"creation_date":1523607225,"post_id":49812027,"comment_id":86638893,"body_markdown":"Have you tried the snake yam? Isn&#39;t it supported by default?","body":"Have you tried the snake yam? Isn&#39;t it supported by default?"}],"answers":[{"tags":[],"owner":{"account_id":141151,"reputation":36461,"user_id":347964,"accept_rate":79,"display_name":"flyx"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1523607751,"creation_date":1523607751,"answer_id":49812438,"question_id":49812027,"body_markdown":"As of the time of writing, there is no round-tripping YAML parser for Java. There is the well-known [SnakeYAML](https://bitbucket.org/asomov/snakeyaml), which does not preserve comments (see the [author&#39;s comment here](https://github.com/oyse/yedit/issues/15#issuecomment-224613193)), and a newer project named [camel](https://github.com/decorators-squad/camel), which I know little of; but it definitely is not round-tripping.\r\n\r\nWhat you can theoretically do is to use SnakeYaml&#39;s `Yaml.parse` and then iterate over the events. Each event has a start and an end mark, giving the start and end line &amp; column of the event. This makes it possible to map the events back into the source and discover the portions of the source that were not parsed into events (presumably comments). Having this mapping, you can now modify the event list and write it back. Finally, you read the result in a second time and discover the gaps between your events where there were comments in the original YAML, but not in the modified YAML, and re-insert those comments, giving you the final YAML with your modifications *and* the comments.\r\n\r\nOf course, this is very complex. I would not advice to do it unless you a) have either a solid understanding of how YAML is structured or are willing to learn it, and b) your use-case justifies this amount of work.","title":"Modifying YAML in java while preserving comments","body":"<p>As of the time of writing, there is no round-tripping YAML parser for Java. There is the well-known <a href=\"https://bitbucket.org/asomov/snakeyaml\" rel=\"nofollow noreferrer\">SnakeYAML</a>, which does not preserve comments (see the <a href=\"https://github.com/oyse/yedit/issues/15#issuecomment-224613193\" rel=\"nofollow noreferrer\">author's comment here</a>), and a newer project named <a href=\"https://github.com/decorators-squad/camel\" rel=\"nofollow noreferrer\">camel</a>, which I know little of; but it definitely is not round-tripping.</p>\n\n<p>What you can theoretically do is to use SnakeYaml's <code>Yaml.parse</code> and then iterate over the events. Each event has a start and an end mark, giving the start and end line &amp; column of the event. This makes it possible to map the events back into the source and discover the portions of the source that were not parsed into events (presumably comments). Having this mapping, you can now modify the event list and write it back. Finally, you read the result in a second time and discover the gaps between your events where there were comments in the original YAML, but not in the modified YAML, and re-insert those comments, giving you the final YAML with your modifications <em>and</em> the comments.</p>\n\n<p>Of course, this is very complex. I would not advice to do it unless you a) have either a solid understanding of how YAML is structured or are willing to learn it, and b) your use-case justifies this amount of work.</p>\n"},{"tags":[],"owner":{"account_id":251692,"reputation":2306,"user_id":529256,"accept_rate":75,"display_name":"Craig"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1557329915,"creation_date":1557329915,"answer_id":56044357,"question_id":49812027,"body_markdown":"I wrote a groovy script to solve this. The Java version is very similar: \r\n\r\n    def key = &quot;name&quot;\r\n    def value = &quot;efgh&quot;\r\n    def yamlFile = new File(&quot;file.yaml&quot;)\r\n    def yamlFileLines = new StringBuilder()\r\n    def foundKey = false\r\n    yamlFile.text.eachLine { line -&gt;\r\n        if (!foundKey &amp;&amp; line.contains(&quot;$key:&quot;)) {\r\n            line = line.replaceAll(/$key:.*/, &quot;$key: $value&quot;)\r\n            foundKey = true\r\n        }\r\n        yamlFileLines.append(&quot;$line\\n&quot;)\r\n    }\r\n    if (foundKey) {\r\n        yamlFile.text = yamlFileLines.toString()\r\n    } else {\r\n        throw new StopExecutionException(&quot;Could not find key &#39;$key&#39; in file ${yamlFile.getAbsolutePath()}&quot;)\r\n    }","title":"Modifying YAML in java while preserving comments","body":"<p>I wrote a groovy script to solve this. The Java version is very similar: </p>\n\n<pre><code>def key = \"name\"\ndef value = \"efgh\"\ndef yamlFile = new File(\"file.yaml\")\ndef yamlFileLines = new StringBuilder()\ndef foundKey = false\nyamlFile.text.eachLine { line -&gt;\n    if (!foundKey &amp;&amp; line.contains(\"$key:\")) {\n        line = line.replaceAll(/$key:.*/, \"$key: $value\")\n        foundKey = true\n    }\n    yamlFileLines.append(\"$line\\n\")\n}\nif (foundKey) {\n    yamlFile.text = yamlFileLines.toString()\n} else {\n    throw new StopExecutionException(\"Could not find key '$key' in file ${yamlFile.getAbsolutePath()}\")\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":86723,"reputation":11,"user_id":240965,"display_name":"jiansihun"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1604373381,"creation_date":1604373381,"answer_id":64656336,"question_id":49812027,"body_markdown":"if you use snakeyaml , you should modify the ScannerImpl file. \r\n \r\nnotice: read the in-line comment as text\r\n\r\n```\r\nprivate Token scanPlain() {\r\n        StringBuilder chunks = new StringBuilder();\r\n        Mark startMark = reader.getMark();\r\n        Mark endMark = startMark;\r\n        int indent = this.indent + 1;\r\n        String spaces = &quot;&quot;;\r\n        while (true) {\r\n            int c;\r\n            int length = 0;\r\n            // A comment indicates the end of the scalar.\r\n            // read the in-line comment as text\r\n//            if (reader.peek() == &#39;#&#39; &amp;&amp; ) {\r\n//                break;\r\n//            }\r\n            while (true) {\r\n                c = reader.peek(length);\r\n                if (Constant.NULL_BL_T_LINEBR.has(c)\r\n                        || (c == &#39;:&#39; &amp;&amp; Constant.NULL_BL_T_LINEBR.has(reader.peek(length + 1), flowLevel != 0 ? &quot;,[]{}&quot;:&quot;&quot;))\r\n                        || (this.flowLevel != 0 &amp;&amp; &quot;,?[]{}&quot;.indexOf(c) != -1)) {\r\n                    break;\r\n                }\r\n                length++;\r\n            }\r\n            if (length == 0) {\r\n                break;\r\n            }\r\n            this.allowSimpleKey = false;\r\n            chunks.append(spaces);\r\n            chunks.append(reader.prefixForward(length));\r\n            endMark = reader.getMark();\r\n            spaces = scanPlainSpaces();\r\n            // System.out.printf(&quot;spaces[%s]\\n&quot;, spaces);\r\n            if (spaces.length() == 0\r\n                    // read the in-line comment as text\r\n//                    || reader.peek() == &#39;#&#39;\r\n                    || (this.flowLevel == 0 &amp;&amp; this.reader.getColumn() &lt; indent)) {\r\n                break;\r\n            }\r\n        }\r\n        return new ScalarToken(chunks.toString(), startMark, endMark, true);\r\n    }\r\n```","title":"Modifying YAML in java while preserving comments","body":"<p>if you use snakeyaml , you should modify the ScannerImpl file.</p>\n<p>notice: read the in-line comment as text</p>\n<pre><code>private Token scanPlain() {\n        StringBuilder chunks = new StringBuilder();\n        Mark startMark = reader.getMark();\n        Mark endMark = startMark;\n        int indent = this.indent + 1;\n        String spaces = &quot;&quot;;\n        while (true) {\n            int c;\n            int length = 0;\n            // A comment indicates the end of the scalar.\n            // read the in-line comment as text\n//            if (reader.peek() == '#' &amp;&amp; ) {\n//                break;\n//            }\n            while (true) {\n                c = reader.peek(length);\n                if (Constant.NULL_BL_T_LINEBR.has(c)\n                        || (c == ':' &amp;&amp; Constant.NULL_BL_T_LINEBR.has(reader.peek(length + 1), flowLevel != 0 ? &quot;,[]{}&quot;:&quot;&quot;))\n                        || (this.flowLevel != 0 &amp;&amp; &quot;,?[]{}&quot;.indexOf(c) != -1)) {\n                    break;\n                }\n                length++;\n            }\n            if (length == 0) {\n                break;\n            }\n            this.allowSimpleKey = false;\n            chunks.append(spaces);\n            chunks.append(reader.prefixForward(length));\n            endMark = reader.getMark();\n            spaces = scanPlainSpaces();\n            // System.out.printf(&quot;spaces[%s]\\n&quot;, spaces);\n            if (spaces.length() == 0\n                    // read the in-line comment as text\n//                    || reader.peek() == '#'\n                    || (this.flowLevel == 0 &amp;&amp; this.reader.getColumn() &lt; indent)) {\n                break;\n            }\n        }\n        return new ScalarToken(chunks.toString(), startMark, endMark, true);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9298348,"reputation":482,"user_id":6904643,"display_name":"dosenfant"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1692949078,"creation_date":1692949078,"answer_id":76975195,"question_id":49812027,"body_markdown":"At least since snakeyaml 2.0 (which I&#39;m using) it is possible to preserve comments. The only drawback seems to be that you cannot parse the YAML to a `Map` or some other class, because that erases the comment information. That is only stored in snakeyaml&#39;s internal `Node`s.\r\n\r\n    LoaderOptions loaderOptions = new LoaderOptions();\r\n    loaderOptions.setProcessComments(true);\r\n    DumperOptions dumperOptions = new DumperOptions();\r\n    dumperOptions.setProcessComments(true);\r\n    Yaml yaml = new Yaml(new Constructor(loaderOptions), new Representer(dumperOptions), dumperOptions, loaderOptions);\r\n    Node root;\r\n    try (FileReader reader = new FileReader(yamlFile)) {\r\n        root = yaml.compose(reader);\r\n    }\r\n    try (FileWriter writer = new FileWriter(cloneFile)) {\r\n        yaml.serialize(root, writer);\r\n    }\r\n\r\nThe only difference I get between in- and output are different line endings (can be configured in the `DumperOptions`) and some of my previously empty lines will have indenting spaces.","title":"Modifying YAML in java while preserving comments","body":"<p>At least since snakeyaml 2.0 (which I'm using) it is possible to preserve comments. The only drawback seems to be that you cannot parse the YAML to a <code>Map</code> or some other class, because that erases the comment information. That is only stored in snakeyaml's internal <code>Node</code>s.</p>\n<pre><code>LoaderOptions loaderOptions = new LoaderOptions();\nloaderOptions.setProcessComments(true);\nDumperOptions dumperOptions = new DumperOptions();\ndumperOptions.setProcessComments(true);\nYaml yaml = new Yaml(new Constructor(loaderOptions), new Representer(dumperOptions), dumperOptions, loaderOptions);\nNode root;\ntry (FileReader reader = new FileReader(yamlFile)) {\n    root = yaml.compose(reader);\n}\ntry (FileWriter writer = new FileWriter(cloneFile)) {\n    yaml.serialize(root, writer);\n}\n</code></pre>\n<p>The only difference I get between in- and output are different line endings (can be configured in the <code>DumperOptions</code>) and some of my previously empty lines will have indenting spaces.</p>\n"}],"owner":{"account_id":3223916,"reputation":393,"user_id":2720680,"accept_rate":100,"display_name":"dexterousashish"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5342,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":4,"score":6,"last_activity_date":1692949078,"creation_date":1523606266,"question_id":49812027,"body_markdown":"How can we modify an existing YAML and preserve comments in it.\r\nIs there any Java parser which does that ?\r\n For example if i have following YAML:\r\n\r\n    #This is a test YAML\r\n     name: abcd\r\n     age: 23\r\n    #Test YAML ends here.\r\nIs there a way I can edit this Yaml using a java parser and preserve the comments. ","title":"Modifying YAML in java while preserving comments","body":"<p>How can we modify an existing YAML and preserve comments in it.\nIs there any Java parser which does that ?\n For example if i have following YAML:</p>\n\n<pre><code>#This is a test YAML\n name: abcd\n age: 23\n#Test YAML ends here.\n</code></pre>\n\n<p>Is there a way I can edit this Yaml using a java parser and preserve the comments. </p>\n"},{"tags":["java","spring","spring-boot","eclipse","spring-tools-4"],"comments":[{"owner":{"account_id":6284,"reputation":14589,"user_id":10508,"accept_rate":53,"display_name":"David M. Karr"},"score":0,"creation_date":1692925513,"post_id":76972725,"comment_id":135694198,"body_markdown":"And to address @xpetersue &#39;s comment in a deleted answer, I have no issue with memory. My laptop has 32g ram, my Eclipse process has maxmem of 3g. I was seeing some errors connecting to SO, but otherwise I see no network issues.","body":"And to address @xpetersue &#39;s comment in a deleted answer, I have no issue with memory. My laptop has 32g ram, my Eclipse process has maxmem of 3g. I was seeing some errors connecting to SO, but otherwise I see no network issues."}],"answers":[{"tags":[],"owner":{"account_id":2082386,"reputation":6063,"user_id":1854124,"display_name":"Martin Lippert"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692932429,"creation_date":1692932429,"answer_id":76973996,"question_id":76972725,"body_markdown":"Here is the link to the GitHub issue that you filed for this: https://github.com/spring-projects/sts4/issues/1103\r\n\r\nI added a comment with a few assumptions why this might happen. The workaround for this is to disable the `Reconciling of Java Sources` in the `Preferences -&gt; Spring -&gt; Open Rewrite`.\r\n\r\nThe real underlying solution will ship with the next release of the Spring Tools (4.20.0), expected to arrive mid to late September 2023.","title":"My Eclipse with Spring Boot has been running &quot;Spring Boot Validations Builder&quot; on one project for hours now","body":"<p>Here is the link to the GitHub issue that you filed for this: <a href=\"https://github.com/spring-projects/sts4/issues/1103\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/sts4/issues/1103</a></p>\n<p>I added a comment with a few assumptions why this might happen. The workaround for this is to disable the <code>Reconciling of Java Sources</code> in the <code>Preferences -&gt; Spring -&gt; Open Rewrite</code>.</p>\n<p>The real underlying solution will ship with the next release of the Spring Tools (4.20.0), expected to arrive mid to late September 2023.</p>\n"}],"owner":{"account_id":6284,"reputation":14589,"user_id":10508,"accept_rate":53,"display_name":"David M. Karr"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":128,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1692948826,"creation_date":1692908836,"question_id":76972725,"body_markdown":"I&#39;m using Eclipse 2023-06 on Windows 11.\r\n\r\nI have the Spring Boot plugin set installed, with v4.19.1, the latest available at this time.\r\n\r\nIn the last few days, I&#39;ve been severely hampered with either the &quot;Spring Boot Language Server&quot; or the &quot;Spring Boot Validations Builder&quot;, simply running forever.  When the SBLS job appears to be hung, I&#39;ve just had to kill the external javaw process associated with that. That sometimes helps, but sometimes it just starts it up again and hangs again.\r\n\r\nAbout 2 hours ago I decided to simply reboot and start everything again, and I then left for lunch.  I started Eclipse, and it started a bunch of jobs, including the &quot;Spring Boot Validations Builder&quot;, for one particular project.  I came back an hour later, and it had barely changed.\r\n\r\nI then tried cancelling that job, which in my experience is typically a waste of time, as it seems to never respect that.  It&#39;s been running in that state for about 20 minutes now.\r\n\r\nI&#39;ve tried to turn off settings in the Spring section of preferences, but it doesn&#39;t seem to make any difference.\r\n\r\nIf it helps, here is a screenshot of my Progress View, which hasn&#39;t changed at all in hours now.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/RZcaV.png","title":"My Eclipse with Spring Boot has been running &quot;Spring Boot Validations Builder&quot; on one project for hours now","body":"<p>I'm using Eclipse 2023-06 on Windows 11.</p>\n<p>I have the Spring Boot plugin set installed, with v4.19.1, the latest available at this time.</p>\n<p>In the last few days, I've been severely hampered with either the &quot;Spring Boot Language Server&quot; or the &quot;Spring Boot Validations Builder&quot;, simply running forever.  When the SBLS job appears to be hung, I've just had to kill the external javaw process associated with that. That sometimes helps, but sometimes it just starts it up again and hangs again.</p>\n<p>About 2 hours ago I decided to simply reboot and start everything again, and I then left for lunch.  I started Eclipse, and it started a bunch of jobs, including the &quot;Spring Boot Validations Builder&quot;, for one particular project.  I came back an hour later, and it had barely changed.</p>\n<p>I then tried cancelling that job, which in my experience is typically a waste of time, as it seems to never respect that.  It's been running in that state for about 20 minutes now.</p>\n<p>I've tried to turn off settings in the Spring section of preferences, but it doesn't seem to make any difference.</p>\n<p>If it helps, here is a screenshot of my Progress View, which hasn't changed at all in hours now.</p>\n<p><a href=\"https://i.stack.imgur.com/RZcaV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RZcaV.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","junit","sonarqube","google-cloud-dataflow","google-cloud-memorystore"],"answers":[{"tags":[],"owner":{"account_id":10553380,"reputation":2165,"user_id":10324087,"display_name":"viveknaskar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1692948787,"creation_date":1692948787,"answer_id":76975160,"question_id":76950481,"body_markdown":"I was able to write the test case for covering all the lines. I just increased the size of the list to 20000, by doing so, the `RedisWriteIO` class is functioning as intended to handle even larger datasets. \r\n\r\nThe batchcount of 1000 acts as the threshold as specified by `DEFAULT_BATCH_SIZE`, which when it reaches that, then the transaction is executed(`transaction.exec()`) and a new transaction is started (`transaction.multi()`).\r\n\r\n        @Test\r\n        public void testBatchProcessingWithTransactionExecuted() {\r\n            RedisWriteIO.Write spec = RedisWriteIO.write().withConnectionConfiguration(connection);\r\n            PCollection&lt;String&gt; flushFlag = pipeline.apply(&quot;Read File&quot;, TextIO.read().from(&quot;files/fileHavingFiveThousandRecords.txt&quot;));\r\n    \r\n            List&lt;KV&lt;String, String&gt;&gt; recordEntries = new ArrayList&lt;&gt;();\r\n            for (int i = 0; i &lt;= 20000; i++) {\r\n                // adding unique entries 20000 times\r\n                recordEntries.add(KV.of(&quot;Bruce:Wayne&quot; + i, &quot;123456789&quot; + i));\r\n            }\r\n    \r\n            // outputData will be written to Redis (memorystore)\r\n            PCollection&lt;KV&lt;String, String&gt;&gt; outputData = pipeline.apply(Create.of(recordEntries));\r\n    \r\n            outputData.apply(&quot;Waiting until clearing Redis database&quot;, Wait.on(flushFlag))\r\n                   .apply(&quot;Writing the data into Redis database&quot;, RedisWriteIO.write()\r\n                        .withConnectionConfiguration(CustomRedisConfigurations\r\n                                .create(REDIS_HOST, port)\r\n                                .withTimeout(100)\r\n                                .withAuth(&quot;credentials&quot;)\r\n                                .enableSSL()));\r\n            pipeline.run();\r\n    \r\n        }\r\n\r\n","title":"Google Cloud Dataflow&#39;s Code Coverage on the new code is not passing the threshold in SonarQube after Java 17 upgrade","body":"<p>I was able to write the test case for covering all the lines. I just increased the size of the list to 20000, by doing so, the <code>RedisWriteIO</code> class is functioning as intended to handle even larger datasets.</p>\n<p>The batchcount of 1000 acts as the threshold as specified by <code>DEFAULT_BATCH_SIZE</code>, which when it reaches that, then the transaction is executed(<code>transaction.exec()</code>) and a new transaction is started (<code>transaction.multi()</code>).</p>\n<pre><code>    @Test\n    public void testBatchProcessingWithTransactionExecuted() {\n        RedisWriteIO.Write spec = RedisWriteIO.write().withConnectionConfiguration(connection);\n        PCollection&lt;String&gt; flushFlag = pipeline.apply(&quot;Read File&quot;, TextIO.read().from(&quot;files/fileHavingFiveThousandRecords.txt&quot;));\n\n        List&lt;KV&lt;String, String&gt;&gt; recordEntries = new ArrayList&lt;&gt;();\n        for (int i = 0; i &lt;= 20000; i++) {\n            // adding unique entries 20000 times\n            recordEntries.add(KV.of(&quot;Bruce:Wayne&quot; + i, &quot;123456789&quot; + i));\n        }\n\n        // outputData will be written to Redis (memorystore)\n        PCollection&lt;KV&lt;String, String&gt;&gt; outputData = pipeline.apply(Create.of(recordEntries));\n\n        outputData.apply(&quot;Waiting until clearing Redis database&quot;, Wait.on(flushFlag))\n               .apply(&quot;Writing the data into Redis database&quot;, RedisWriteIO.write()\n                    .withConnectionConfiguration(CustomRedisConfigurations\n                            .create(REDIS_HOST, port)\n                            .withTimeout(100)\n                            .withAuth(&quot;credentials&quot;)\n                            .enableSSL()));\n        pipeline.run();\n\n    }\n</code></pre>\n"}],"owner":{"account_id":10553380,"reputation":2165,"user_id":10324087,"display_name":"viveknaskar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":76975160,"answer_count":1,"score":3,"last_activity_date":1692948787,"creation_date":1692684384,"question_id":76950481,"body_markdown":"Recently, I have upgraded my cloud dataflow application from Java 11 to Java 17 and its corresponding dependencies. The application works fine and even the test cases work fine. I have also upgraded my apache beam version from 2.35.0 to 2.49.0.\r\n\r\nHowever, in one of the custom classes, `RedisWriteIO`, there are some changes and now the tests are not passing in the new code coverage.\r\n\r\n**RedisWriteIO**\r\n\r\n    package com.example.dataflow.io.redis;\r\n    \r\n    import com.google.auto.value.AutoValue;\r\n    import org.apache.beam.sdk.transforms.DoFn;\r\n    import org.apache.beam.sdk.transforms.PTransform;\r\n    import org.apache.beam.sdk.transforms.ParDo;\r\n    import org.apache.beam.sdk.values.KV;\r\n    import org.apache.beam.sdk.values.PCollection;\r\n    import org.apache.beam.sdk.values.PDone;\r\n    import org.apache.beam.vendor.guava.v26_0_jre.com.google.common.base.Preconditions;\r\n    import org.checkerframework.checker.nullness.qual.Nullable;\r\n    import redis.clients.jedis.Jedis;\r\n    import redis.clients.jedis.Transaction;\r\n    \r\n    public class RedisWriteIO {\r\n    \r\n        public static Write write() {\r\n            return (new AutoValue_RedisWriteIO_Write.Builder())\r\n                    .setConnectionConfiguration(CustomRedisConfigurations.create()).build();\r\n        }\r\n    \r\n        @AutoValue\r\n        public abstract static class Write extends PTransform&lt;PCollection&lt;KV&lt;String,String&gt;&gt;, PDone&gt; {\r\n            public Write() {\r\n            }\r\n    \r\n            @Nullable\r\n            abstract CustomRedisConfigurations connectionConfiguration();\r\n    \r\n            @Nullable\r\n            abstract Long expireTime();\r\n    \r\n            abstract Builder toBuilder();\r\n    \r\n            public Write withEndpoint(String host, int port) {\r\n                Preconditions.checkArgument(host != null, &quot;host can not be null&quot;);\r\n                Preconditions.checkArgument(port &gt; 0, &quot;port can not be negative or 0&quot;);\r\n                return this.toBuilder().setConnectionConfiguration(this.connectionConfiguration().withHost(host).withPort(port)).build();\r\n            }\r\n    \r\n            public Write withAuth(String auth) {\r\n                Preconditions.checkArgument(auth != null, &quot;auth can not be null&quot;);\r\n                return this.toBuilder().setConnectionConfiguration(this.connectionConfiguration().withAuth(auth)).build();\r\n            }\r\n    \r\n            public Write withTimeout(int timeout) {\r\n                Preconditions.checkArgument(timeout &gt;= 0, &quot;timeout can not be negative&quot;);\r\n                return this.toBuilder().setConnectionConfiguration(this.connectionConfiguration().withTimeout(timeout)).build();\r\n            }\r\n    \r\n            public Write withConnectionConfiguration(CustomRedisConfigurations connection) {\r\n                Preconditions.checkArgument(connection != null, &quot;connection can not be null&quot;);\r\n                return this.toBuilder().setConnectionConfiguration(connection).build();\r\n            }\r\n    \r\n            public Write withExpireTime(Long expireTimeMillis) {\r\n                Preconditions.checkArgument(expireTimeMillis != null, &quot;expireTimeMillis can not be null&quot;);\r\n                Preconditions.checkArgument(expireTimeMillis &gt; 0L, &quot;expireTimeMillis can not be negative or 0&quot;);\r\n                return this.toBuilder().setExpireTime(expireTimeMillis).build();\r\n            }\r\n    \r\n            public PDone expand(PCollection&lt;KV&lt;String, String&gt;&gt; input) {\r\n                Preconditions.checkArgument(this.connectionConfiguration() != null, &quot;withConnectionConfiguration() is required&quot;);\r\n                input.apply(ParDo.of(new WriteFn(this)));\r\n                return PDone.in(input.getPipeline());\r\n            }\r\n    \r\n            private static class WriteFn extends DoFn&lt;KV&lt;String, String&gt;, Void&gt;{\r\n                private static final int DEFAULT_BATCH_SIZE = 1000;\r\n                private final RedisWriteIO.Write spec;\r\n                private transient Jedis jedis;\r\n                private transient @Nullable Transaction transaction;\r\n    \r\n                private int batchCount;\r\n    \r\n                public WriteFn(RedisWriteIO.Write spec) {\r\n                    this.spec = spec;\r\n                }\r\n    \r\n                @Setup\r\n                public void setup() {\r\n                    jedis = spec.connectionConfiguration().connect();\r\n                }\r\n    \r\n                @StartBundle\r\n                public void startBundle() {\r\n                    transaction = jedis.multi();\r\n                    batchCount = 0;\r\n                }\r\n                @ProcessElement\r\n                public void processElement(DoFn&lt;KV&lt;String, String&gt;, Void&gt;.ProcessContext c) {\r\n    \r\n                    KV&lt;String, String&gt; record = c.element();\r\n    \r\n                    String fieldKey = record.getKey();\r\n                    String fieldValue = record.getValue();\r\n    \r\n                    transaction.sadd(fieldKey,fieldValue);\r\n    \r\n                    batchCount++;\r\n    \r\n                    if (batchCount &gt;= DEFAULT_BATCH_SIZE) {\r\n                        transaction.exec();\r\n                        transaction.multi();\r\n                        batchCount = 0;\r\n                    }\r\n                }\r\n    \r\n                @FinishBundle\r\n                public void finishBundle() {\r\n                    if (batchCount &gt; 0) {\r\n                        transaction.exec();\r\n                    }\r\n                    if (transaction != null) {\r\n                        transaction.close();\r\n                    }\r\n                    transaction = null;\r\n                    batchCount = 0;\r\n                }\r\n    \r\n                @Teardown\r\n                public void teardown() {\r\n                    jedis.close();\r\n                }\r\n            }\r\n    \r\n            @AutoValue.Builder\r\n            abstract static class Builder {\r\n                Builder() {\r\n                }\r\n    \r\n                abstract Builder setConnectionConfiguration(CustomRedisConfigurations connectionConfiguration);\r\n    \r\n                abstract Builder setExpireTime(Long expireTimeMillis);\r\n    \r\n                abstract Write build();\r\n    \r\n            }\r\n        }\r\n    }\r\n\r\nThe test class is as follows:\r\n\r\n    package com.example.dataflow.io.redis;\r\n    \r\n    import com.github.fppt.jedismock.RedisServer;\r\n    import org.apache.beam.sdk.io.TextIO;\r\n    import org.apache.beam.sdk.testing.PAssert;\r\n    import org.apache.beam.sdk.testing.TestPipeline;\r\n    import org.apache.beam.sdk.transforms.Create;\r\n    import org.apache.beam.sdk.transforms.DoFn;\r\n    import org.apache.beam.sdk.transforms.ParDo;\r\n    import org.apache.beam.sdk.transforms.Wait;\r\n    import org.apache.beam.sdk.values.KV;\r\n    import org.apache.beam.sdk.values.PCollection;\r\n    import org.apache.beam.sdk.values.PDone;\r\n    import org.junit.*;\r\n    import org.mockito.Mock;\r\n    import org.mockito.MockitoAnnotations;\r\n    import redis.clients.jedis.Jedis;\r\n    import redis.clients.jedis.Transaction;\r\n    \r\n    import javax.net.ssl.SSLSocketFactory;\r\n    import java.io.IOException;\r\n    \r\n    import static org.junit.Assert.assertNotNull;\r\n    import static org.mockito.Mockito.*;\r\n    \r\n    \r\n    public class RedisWriteIOTest {\r\n    \r\n        private static final String REDIS_HOST = &quot;localhost&quot;;\r\n        private static final String[] INPUT_DATA = new String[]{\r\n                &quot;123456789&quot;,\r\n                &quot;Bruce&quot;,\r\n                &quot;Wayne&quot;\r\n        };\r\n    \r\n        @Mock\r\n        static SSLSocketFactory socketFactory;\r\n        private static RedisServer server;\r\n        private static int port;\r\n    \r\n        @Mock\r\n        private static Jedis jedis;\r\n    \r\n        @Mock\r\n        private Transaction transaction;\r\n    \r\n        private int batchCount;\r\n    \r\n        @Rule\r\n        public TestPipeline pipeline = TestPipeline.create();\r\n        @Mock\r\n        CustomRedisConfigurations connection;\r\n    \r\n        @Mock\r\n        DoFn.OutputReceiver&lt;KV&lt;String, String&gt;&gt; out;\r\n    \r\n        @Before\r\n        public void setUp() {\r\n            MockitoAnnotations.openMocks(this);\r\n            when(connection.connect()).thenReturn(jedis);\r\n            when(jedis.multi()).thenReturn(transaction);\r\n            batchCount = 0;\r\n        }\r\n    \r\n    \r\n        @BeforeClass\r\n        public static void beforeClass() throws Exception {\r\n            server = RedisServer.newRedisServer(8000);\r\n            server.start();\r\n            port = server.getBindPort();\r\n            jedis = new Jedis(server.getHost(), server.getBindPort());\r\n        }\r\n    \r\n        @AfterClass\r\n        public static void afterClass() throws IOException {\r\n            jedis.close();\r\n            server.stop();\r\n        }\r\n    \r\n        @Test\r\n        public void WriteMemoryStoreWithEmptyAuth() {\r\n            RedisWriteIO.write()\r\n                    .withEndpoint(REDIS_HOST, port).withAuth(&quot;&quot;);\r\n        }\r\n    \r\n        @Test\r\n        public void WriteMemoryStoreWithAuth() {\r\n            RedisWriteIO.write()\r\n                    .withAuth(&quot;AuthString&quot;);\r\n        }\r\n    \r\n        @Test\r\n        public void WriteTimeOut() {\r\n            RedisWriteIO.write()\r\n                    .withTimeout(10);\r\n        }\r\n    \r\n        @Test\r\n        public void WriteMemoryStoreWithExpireTime() {\r\n            RedisWriteIO.Write write = RedisWriteIO.write();\r\n            write = write.withExpireTime(1000L);\r\n            assertNotNull(write);\r\n        }\r\n    \r\n        @Test(expected = IllegalArgumentException.class)\r\n        public void WriteMemoryStoreWithoutExpireTime() {\r\n            RedisWriteIO.write()\r\n                    .withExpireTime(0L);\r\n        }\r\n    \r\n    \r\n        @Test(expected = IllegalArgumentException.class)\r\n        public void WriteMemoryStoreWithNegativeExpireTime() {\r\n            RedisWriteIO.write()\r\n                    .withExpireTime(-10L);\r\n        }\r\n    \r\n        @Test\r\n        public void WriteMemoryStoryWithConnectionConfiguration() {\r\n            connection = CustomRedisConfigurations.create().withHost(REDIS_HOST).withPort(port);\r\n            RedisWriteIO.Write write = RedisWriteIO.write()\r\n                    .withConnectionConfiguration(connection);\r\n            assertNotNull(write);\r\n        }\r\n    \r\n        @Test(expected = IllegalArgumentException.class)\r\n        public void WriteMemoryStoryWithNullConnectionConfiguration() {\r\n            RedisWriteIO.Write write = RedisWriteIO.write()\r\n                    .withConnectionConfiguration(null);\r\n        }\r\n    \r\n    \r\n        @Test\r\n        public void testBatchProcessingWithTransactionExecuted() {\r\n            RedisWriteIO.Write spec = RedisWriteIO.write().withConnectionConfiguration(connection);\r\n            PCollection&lt;String&gt; flushFlag = pipeline.apply(&quot;Read File&quot;, TextIO.read().from(&quot;files/fileHavingFiveThousandRecords.txt&quot;));\r\n\r\n            List&lt;KV&lt;String, String&gt;&gt; recordEntries = new ArrayList&lt;&gt;();\r\n            for (int i = 0; i &lt;= 10000; i++) {\r\n                // adding unique entries 10000 times\r\n                recordEntries.add(KV.of(&quot;Bruce:Wayne&quot; + i, &quot;123456789&quot; + i));\r\n            }\r\n\r\n            // outputData will be written to Redis (memorystore)\r\n            PCollection&lt;KV&lt;String, String&gt;&gt; outputData = pipeline.apply(Create.of(recordEntries));\r\n\r\n            outputData.apply(&quot;Waiting until clearing Redis database&quot;, Wait.on(flushFlag))\r\n                   .apply(&quot;Writing the data into Redis database&quot;, RedisWriteIO.write()\r\n                        .withConnectionConfiguration(CustomRedisConfigurations\r\n                                .create(REDIS_HOST, port)\r\n                                .withTimeout(100)\r\n                                .withAuth(&quot;credentials&quot;)\r\n                                .enableSSL()));\r\n            pipeline.run();\r\n\r\n        }\r\n    \r\n    }\r\n\r\n\r\n`RedisWriteIO` is a utility class that would write the data from files into Redis database. It works as expected, and the test cases written are working as expected. However, the below block of code is not getting covered by SonarQube.\r\n\r\n    if (batchCount &gt;= DEFAULT_BATCH_SIZE) {\r\n         transaction.exec();\r\n         transaction.multi();\r\n         batchCount = 0;\r\n    }\r\n\r\nWhen the file is having more than 1000 records, the above block should execute. It doesn&#39;t work in the test class. I have tried covering this block of code in the `testBatchProcessingWithTransactionExecuted()` method with a test file having 5000 records but still the block of code doesn&#39;t execute.\r\n\r\nI need help in writing the test case covering all the lines.\r\n\r\n","title":"Google Cloud Dataflow&#39;s Code Coverage on the new code is not passing the threshold in SonarQube after Java 17 upgrade","body":"<p>Recently, I have upgraded my cloud dataflow application from Java 11 to Java 17 and its corresponding dependencies. The application works fine and even the test cases work fine. I have also upgraded my apache beam version from 2.35.0 to 2.49.0.</p>\n<p>However, in one of the custom classes, <code>RedisWriteIO</code>, there are some changes and now the tests are not passing in the new code coverage.</p>\n<p><strong>RedisWriteIO</strong></p>\n<pre><code>package com.example.dataflow.io.redis;\n\nimport com.google.auto.value.AutoValue;\nimport org.apache.beam.sdk.transforms.DoFn;\nimport org.apache.beam.sdk.transforms.PTransform;\nimport org.apache.beam.sdk.transforms.ParDo;\nimport org.apache.beam.sdk.values.KV;\nimport org.apache.beam.sdk.values.PCollection;\nimport org.apache.beam.sdk.values.PDone;\nimport org.apache.beam.vendor.guava.v26_0_jre.com.google.common.base.Preconditions;\nimport org.checkerframework.checker.nullness.qual.Nullable;\nimport redis.clients.jedis.Jedis;\nimport redis.clients.jedis.Transaction;\n\npublic class RedisWriteIO {\n\n    public static Write write() {\n        return (new AutoValue_RedisWriteIO_Write.Builder())\n                .setConnectionConfiguration(CustomRedisConfigurations.create()).build();\n    }\n\n    @AutoValue\n    public abstract static class Write extends PTransform&lt;PCollection&lt;KV&lt;String,String&gt;&gt;, PDone&gt; {\n        public Write() {\n        }\n\n        @Nullable\n        abstract CustomRedisConfigurations connectionConfiguration();\n\n        @Nullable\n        abstract Long expireTime();\n\n        abstract Builder toBuilder();\n\n        public Write withEndpoint(String host, int port) {\n            Preconditions.checkArgument(host != null, &quot;host can not be null&quot;);\n            Preconditions.checkArgument(port &gt; 0, &quot;port can not be negative or 0&quot;);\n            return this.toBuilder().setConnectionConfiguration(this.connectionConfiguration().withHost(host).withPort(port)).build();\n        }\n\n        public Write withAuth(String auth) {\n            Preconditions.checkArgument(auth != null, &quot;auth can not be null&quot;);\n            return this.toBuilder().setConnectionConfiguration(this.connectionConfiguration().withAuth(auth)).build();\n        }\n\n        public Write withTimeout(int timeout) {\n            Preconditions.checkArgument(timeout &gt;= 0, &quot;timeout can not be negative&quot;);\n            return this.toBuilder().setConnectionConfiguration(this.connectionConfiguration().withTimeout(timeout)).build();\n        }\n\n        public Write withConnectionConfiguration(CustomRedisConfigurations connection) {\n            Preconditions.checkArgument(connection != null, &quot;connection can not be null&quot;);\n            return this.toBuilder().setConnectionConfiguration(connection).build();\n        }\n\n        public Write withExpireTime(Long expireTimeMillis) {\n            Preconditions.checkArgument(expireTimeMillis != null, &quot;expireTimeMillis can not be null&quot;);\n            Preconditions.checkArgument(expireTimeMillis &gt; 0L, &quot;expireTimeMillis can not be negative or 0&quot;);\n            return this.toBuilder().setExpireTime(expireTimeMillis).build();\n        }\n\n        public PDone expand(PCollection&lt;KV&lt;String, String&gt;&gt; input) {\n            Preconditions.checkArgument(this.connectionConfiguration() != null, &quot;withConnectionConfiguration() is required&quot;);\n            input.apply(ParDo.of(new WriteFn(this)));\n            return PDone.in(input.getPipeline());\n        }\n\n        private static class WriteFn extends DoFn&lt;KV&lt;String, String&gt;, Void&gt;{\n            private static final int DEFAULT_BATCH_SIZE = 1000;\n            private final RedisWriteIO.Write spec;\n            private transient Jedis jedis;\n            private transient @Nullable Transaction transaction;\n\n            private int batchCount;\n\n            public WriteFn(RedisWriteIO.Write spec) {\n                this.spec = spec;\n            }\n\n            @Setup\n            public void setup() {\n                jedis = spec.connectionConfiguration().connect();\n            }\n\n            @StartBundle\n            public void startBundle() {\n                transaction = jedis.multi();\n                batchCount = 0;\n            }\n            @ProcessElement\n            public void processElement(DoFn&lt;KV&lt;String, String&gt;, Void&gt;.ProcessContext c) {\n\n                KV&lt;String, String&gt; record = c.element();\n\n                String fieldKey = record.getKey();\n                String fieldValue = record.getValue();\n\n                transaction.sadd(fieldKey,fieldValue);\n\n                batchCount++;\n\n                if (batchCount &gt;= DEFAULT_BATCH_SIZE) {\n                    transaction.exec();\n                    transaction.multi();\n                    batchCount = 0;\n                }\n            }\n\n            @FinishBundle\n            public void finishBundle() {\n                if (batchCount &gt; 0) {\n                    transaction.exec();\n                }\n                if (transaction != null) {\n                    transaction.close();\n                }\n                transaction = null;\n                batchCount = 0;\n            }\n\n            @Teardown\n            public void teardown() {\n                jedis.close();\n            }\n        }\n\n        @AutoValue.Builder\n        abstract static class Builder {\n            Builder() {\n            }\n\n            abstract Builder setConnectionConfiguration(CustomRedisConfigurations connectionConfiguration);\n\n            abstract Builder setExpireTime(Long expireTimeMillis);\n\n            abstract Write build();\n\n        }\n    }\n}\n</code></pre>\n<p>The test class is as follows:</p>\n<pre><code>package com.example.dataflow.io.redis;\n\nimport com.github.fppt.jedismock.RedisServer;\nimport org.apache.beam.sdk.io.TextIO;\nimport org.apache.beam.sdk.testing.PAssert;\nimport org.apache.beam.sdk.testing.TestPipeline;\nimport org.apache.beam.sdk.transforms.Create;\nimport org.apache.beam.sdk.transforms.DoFn;\nimport org.apache.beam.sdk.transforms.ParDo;\nimport org.apache.beam.sdk.transforms.Wait;\nimport org.apache.beam.sdk.values.KV;\nimport org.apache.beam.sdk.values.PCollection;\nimport org.apache.beam.sdk.values.PDone;\nimport org.junit.*;\nimport org.mockito.Mock;\nimport org.mockito.MockitoAnnotations;\nimport redis.clients.jedis.Jedis;\nimport redis.clients.jedis.Transaction;\n\nimport javax.net.ssl.SSLSocketFactory;\nimport java.io.IOException;\n\nimport static org.junit.Assert.assertNotNull;\nimport static org.mockito.Mockito.*;\n\n\npublic class RedisWriteIOTest {\n\n    private static final String REDIS_HOST = &quot;localhost&quot;;\n    private static final String[] INPUT_DATA = new String[]{\n            &quot;123456789&quot;,\n            &quot;Bruce&quot;,\n            &quot;Wayne&quot;\n    };\n\n    @Mock\n    static SSLSocketFactory socketFactory;\n    private static RedisServer server;\n    private static int port;\n\n    @Mock\n    private static Jedis jedis;\n\n    @Mock\n    private Transaction transaction;\n\n    private int batchCount;\n\n    @Rule\n    public TestPipeline pipeline = TestPipeline.create();\n    @Mock\n    CustomRedisConfigurations connection;\n\n    @Mock\n    DoFn.OutputReceiver&lt;KV&lt;String, String&gt;&gt; out;\n\n    @Before\n    public void setUp() {\n        MockitoAnnotations.openMocks(this);\n        when(connection.connect()).thenReturn(jedis);\n        when(jedis.multi()).thenReturn(transaction);\n        batchCount = 0;\n    }\n\n\n    @BeforeClass\n    public static void beforeClass() throws Exception {\n        server = RedisServer.newRedisServer(8000);\n        server.start();\n        port = server.getBindPort();\n        jedis = new Jedis(server.getHost(), server.getBindPort());\n    }\n\n    @AfterClass\n    public static void afterClass() throws IOException {\n        jedis.close();\n        server.stop();\n    }\n\n    @Test\n    public void WriteMemoryStoreWithEmptyAuth() {\n        RedisWriteIO.write()\n                .withEndpoint(REDIS_HOST, port).withAuth(&quot;&quot;);\n    }\n\n    @Test\n    public void WriteMemoryStoreWithAuth() {\n        RedisWriteIO.write()\n                .withAuth(&quot;AuthString&quot;);\n    }\n\n    @Test\n    public void WriteTimeOut() {\n        RedisWriteIO.write()\n                .withTimeout(10);\n    }\n\n    @Test\n    public void WriteMemoryStoreWithExpireTime() {\n        RedisWriteIO.Write write = RedisWriteIO.write();\n        write = write.withExpireTime(1000L);\n        assertNotNull(write);\n    }\n\n    @Test(expected = IllegalArgumentException.class)\n    public void WriteMemoryStoreWithoutExpireTime() {\n        RedisWriteIO.write()\n                .withExpireTime(0L);\n    }\n\n\n    @Test(expected = IllegalArgumentException.class)\n    public void WriteMemoryStoreWithNegativeExpireTime() {\n        RedisWriteIO.write()\n                .withExpireTime(-10L);\n    }\n\n    @Test\n    public void WriteMemoryStoryWithConnectionConfiguration() {\n        connection = CustomRedisConfigurations.create().withHost(REDIS_HOST).withPort(port);\n        RedisWriteIO.Write write = RedisWriteIO.write()\n                .withConnectionConfiguration(connection);\n        assertNotNull(write);\n    }\n\n    @Test(expected = IllegalArgumentException.class)\n    public void WriteMemoryStoryWithNullConnectionConfiguration() {\n        RedisWriteIO.Write write = RedisWriteIO.write()\n                .withConnectionConfiguration(null);\n    }\n\n\n    @Test\n    public void testBatchProcessingWithTransactionExecuted() {\n        RedisWriteIO.Write spec = RedisWriteIO.write().withConnectionConfiguration(connection);\n        PCollection&lt;String&gt; flushFlag = pipeline.apply(&quot;Read File&quot;, TextIO.read().from(&quot;files/fileHavingFiveThousandRecords.txt&quot;));\n\n        List&lt;KV&lt;String, String&gt;&gt; recordEntries = new ArrayList&lt;&gt;();\n        for (int i = 0; i &lt;= 10000; i++) {\n            // adding unique entries 10000 times\n            recordEntries.add(KV.of(&quot;Bruce:Wayne&quot; + i, &quot;123456789&quot; + i));\n        }\n\n        // outputData will be written to Redis (memorystore)\n        PCollection&lt;KV&lt;String, String&gt;&gt; outputData = pipeline.apply(Create.of(recordEntries));\n\n        outputData.apply(&quot;Waiting until clearing Redis database&quot;, Wait.on(flushFlag))\n               .apply(&quot;Writing the data into Redis database&quot;, RedisWriteIO.write()\n                    .withConnectionConfiguration(CustomRedisConfigurations\n                            .create(REDIS_HOST, port)\n                            .withTimeout(100)\n                            .withAuth(&quot;credentials&quot;)\n                            .enableSSL()));\n        pipeline.run();\n\n    }\n\n}\n</code></pre>\n<p><code>RedisWriteIO</code> is a utility class that would write the data from files into Redis database. It works as expected, and the test cases written are working as expected. However, the below block of code is not getting covered by SonarQube.</p>\n<pre><code>if (batchCount &gt;= DEFAULT_BATCH_SIZE) {\n     transaction.exec();\n     transaction.multi();\n     batchCount = 0;\n}\n</code></pre>\n<p>When the file is having more than 1000 records, the above block should execute. It doesn't work in the test class. I have tried covering this block of code in the <code>testBatchProcessingWithTransactionExecuted()</code> method with a test file having 5000 records but still the block of code doesn't execute.</p>\n<p>I need help in writing the test case covering all the lines.</p>\n"},{"tags":["java","certificate","glassfish"],"answers":[{"tags":[],"owner":{"account_id":355668,"reputation":1551,"user_id":694740,"accept_rate":69,"display_name":"JLLMNCHR"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692948197,"creation_date":1692948197,"answer_id":76975087,"question_id":76967379,"body_markdown":"Here is the solution that works in my case:\r\n\r\nFrom **EDGE** explorer, I had to access the WSDL URL and **export the certificate**.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/OKpKr.png\r\n  [2]: https://i.stack.imgur.com/MZqG8.png\r\n  [3]: https://i.stack.imgur.com/sYch7.png\r\n\r\nMove it to the **config** path of **Glassfish** (C:\\PROYECT\\glassfish4\\glassfish\\domains\\domain1\\config), and from there, import it.\r\n\r\n**`keytool -import -trustcacerts -alias DigiCert_Global_Root_G2 -file &quot;DigiCert Global Root G2.crt&quot; -keystore cacerts.jks`**\r\n","title":"Getting &#39;Unable to find valid certification path to requested target&#39; in Glassfish but not in standalone Java App","body":"<p>Here is the solution that works in my case:</p>\n<p>From <strong>EDGE</strong> explorer, I had to access the WSDL URL and <strong>export the certificate</strong>.</p>\n<p><a href=\"https://i.stack.imgur.com/OKpKr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OKpKr.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/MZqG8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MZqG8.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/sYch7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sYch7.png\" alt=\"enter image description here\" /></a></p>\n<p>Move it to the <strong>config</strong> path of <strong>Glassfish</strong> (C:\\PROYECT\\glassfish4\\glassfish\\domains\\domain1\\config), and from there, import it.</p>\n<p><strong><code>keytool -import -trustcacerts -alias DigiCert_Global_Root_G2 -file &quot;DigiCert Global Root G2.crt&quot; -keystore cacerts.jks</code></strong></p>\n"}],"owner":{"account_id":355668,"reputation":1551,"user_id":694740,"accept_rate":69,"display_name":"JLLMNCHR"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76975087,"answer_count":1,"score":0,"last_activity_date":1692948197,"creation_date":1692864909,"question_id":76967379,"body_markdown":"Working with Eclipse IDE, given the following class, from which I omit everything unnecessary:\r\n\r\n    import java.net.URL;\r\n    import javax.xml.namespace.QName;\r\n    import javax.xml.ws.Service;\r\n    import javax.xml.ws.WebServiceClient;\r\n    //...\r\n    \r\n    @WebServiceClient\r\n    public class CustomService extends Service {\r\n        \r\n        public CustomService(URL wsdlLocation, QName serviceName) {\r\n            super(wsdlLocation, serviceName);\r\n        }\r\n    \r\n    \t//...\t\r\n    }\r\n\r\nWhen it is invoked from the &#39;main&#39; method of another **standalone class**, when passing through the line **super(wsdlLocation, serviceName)**, it works correctly.\r\n\r\nBUT, when it is invoked from a class that is executed upon **Glassfish** loading, when passing through the line **super(wsdlLocation, serviceName)**, it throws the following exception:\r\n\r\n    com.sun.xml.ws.wsdl.parser.InaccessibleWSDLException: 2 counts of InaccessibleWSDLException.\r\n    \r\n    javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n    javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n\r\nHow to solve it?\r\n\r\n","title":"Getting &#39;Unable to find valid certification path to requested target&#39; in Glassfish but not in standalone Java App","body":"<p>Working with Eclipse IDE, given the following class, from which I omit everything unnecessary:</p>\n<pre><code>import java.net.URL;\nimport javax.xml.namespace.QName;\nimport javax.xml.ws.Service;\nimport javax.xml.ws.WebServiceClient;\n//...\n\n@WebServiceClient\npublic class CustomService extends Service {\n    \n    public CustomService(URL wsdlLocation, QName serviceName) {\n        super(wsdlLocation, serviceName);\n    }\n\n    //...   \n}\n</code></pre>\n<p>When it is invoked from the 'main' method of another <strong>standalone class</strong>, when passing through the line <strong>super(wsdlLocation, serviceName)</strong>, it works correctly.</p>\n<p>BUT, when it is invoked from a class that is executed upon <strong>Glassfish</strong> loading, when passing through the line <strong>super(wsdlLocation, serviceName)</strong>, it throws the following exception:</p>\n<pre><code>com.sun.xml.ws.wsdl.parser.InaccessibleWSDLException: 2 counts of InaccessibleWSDLException.\n\njavax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\njavax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n</code></pre>\n<p>How to solve it?</p>\n"},{"tags":["java","spring","spring-boot","cron","quartz-scheduler"],"answers":[{"tags":[],"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1692948191,"creation_date":1692948191,"answer_id":76975085,"question_id":76973786,"body_markdown":"As long as the application logic that needs to be parallelized can be split into distinct responsibilities and assigned to individual steps, it can be parallelized in a single process. Parallel Step execution is easy to configure and use.\r\n\r\nWhen using Java configuration, executing steps (step1,step2) in parallel with step3 is straightforward, as follows:\r\n```\r\n@Bean\r\npublic Job job(JobRepository jobRepository) {\r\n    return new JobBuilder(&quot;job&quot;, jobRepository)\r\n        .start(splitFlow())\r\n        .next(step4())\r\n        .build()        //builds FlowJobBuilder instance\r\n        .build();       //builds Job instance\r\n}\r\n\r\n@Bean\r\npublic Flow splitFlow() {\r\n    return new FlowBuilder&lt;SimpleFlow&gt;(&quot;splitFlow&quot;)\r\n        .split(taskExecutor())\r\n        .add(flow1(), flow2())\r\n        .build();\r\n}\r\n\r\n@Bean\r\npublic Flow flow1() {\r\n    return new FlowBuilder&lt;SimpleFlow&gt;(&quot;flow1&quot;)\r\n        .start(step1())\r\n        .next(step2())\r\n        .build();\r\n}\r\n\r\n@Bean\r\npublic Flow flow2() {\r\n    return new FlowBuilder&lt;SimpleFlow&gt;(&quot;flow2&quot;)\r\n        .start(step3())\r\n        .build();\r\n}\r\n\r\n@Bean\r\npublic TaskExecutor taskExecutor() {\r\n    return new SimpleAsyncTaskExecutor(&quot;spring_batch&quot;);\r\n}\r\n```\r\nThe configurable task executor is used to specify which TaskExecutor implementation should execute the individual flows. The default is SyncTaskExecutor, but an asynchronous TaskExecutor is required to run the steps in parallel. Note that the job ensures that every flow in the split completes before aggregating the exit statuses and transitioning.\r\n\r\nBased on: [https://docs.spring.io/spring-batch/docs/current/reference/html/scalability.html#scalabilityParallelSteps][1]\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-batch/docs/current/reference/html/scalability.html#scalabilityParallelSteps","title":"Java Springboot Job Flow to execute two steps simultaneously","body":"<p>As long as the application logic that needs to be parallelized can be split into distinct responsibilities and assigned to individual steps, it can be parallelized in a single process. Parallel Step execution is easy to configure and use.</p>\n<p>When using Java configuration, executing steps (step1,step2) in parallel with step3 is straightforward, as follows:</p>\n<pre><code>@Bean\npublic Job job(JobRepository jobRepository) {\n    return new JobBuilder(&quot;job&quot;, jobRepository)\n        .start(splitFlow())\n        .next(step4())\n        .build()        //builds FlowJobBuilder instance\n        .build();       //builds Job instance\n}\n\n@Bean\npublic Flow splitFlow() {\n    return new FlowBuilder&lt;SimpleFlow&gt;(&quot;splitFlow&quot;)\n        .split(taskExecutor())\n        .add(flow1(), flow2())\n        .build();\n}\n\n@Bean\npublic Flow flow1() {\n    return new FlowBuilder&lt;SimpleFlow&gt;(&quot;flow1&quot;)\n        .start(step1())\n        .next(step2())\n        .build();\n}\n\n@Bean\npublic Flow flow2() {\n    return new FlowBuilder&lt;SimpleFlow&gt;(&quot;flow2&quot;)\n        .start(step3())\n        .build();\n}\n\n@Bean\npublic TaskExecutor taskExecutor() {\n    return new SimpleAsyncTaskExecutor(&quot;spring_batch&quot;);\n}\n</code></pre>\n<p>The configurable task executor is used to specify which TaskExecutor implementation should execute the individual flows. The default is SyncTaskExecutor, but an asynchronous TaskExecutor is required to run the steps in parallel. Note that the job ensures that every flow in the split completes before aggregating the exit statuses and transitioning.</p>\n<p>Based on: <a href=\"https://docs.spring.io/spring-batch/docs/current/reference/html/scalability.html#scalabilityParallelSteps\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-batch/docs/current/reference/html/scalability.html#scalabilityParallelSteps</a></p>\n"}],"owner":{"account_id":15876857,"reputation":31,"user_id":11455815,"display_name":"Lokesh Parihar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76975085,"answer_count":1,"score":0,"last_activity_date":1692948191,"creation_date":1692927799,"question_id":76973786,"body_markdown":"I want to write a Batch job which has steps (let&#39;s say A, B, C, D). The batch should execute in following way:\r\n\r\n```\r\n   A\r\n   |\r\nB and C\r\n   |\r\n   D\r\n```\r\n\r\nBut current setup is: A -&gt; B -&gt; C -&gt; D.\r\nI want execute B and C at the same time and different threads.\r\n\r\nBoth B and C execution duration is different (lets say duration for B is 5 min and for C it is 10 min)\r\n\r\n###### More details:\r\n\r\nStep A: Truncates the some table in database.\r\n\r\nStep B and C: Batch read and writer with chunks of 2000. \r\n\r\nReader: JdbcCursorItemReader | \r\nProcessor: Not using | \r\nWriter: JdbcBatchItemWriter\r\n\r\nStep D: Run PL/SQL procedure which depends on data writes in Step B and C so this should start only after B &amp; C successfully complete.\r\n\r\nI&#39;m using Quartz scheduler to running this job. So also let me know if I need to use multithread to run this job, because currently it is running in only one worker thread.\r\n\r\nPlease write the code also.\r\n\r\nCurrent Setup of Job:\r\n\r\n~~~\r\npublic Job demoJob(){\r\nreturn jobBuilderFactory.get(&quot;demoJob&quot;)\r\n.listener(jobExecutionListener())\r\n.start(A())\r\n.next(B())\r\n.next(C())\r\n.next(D())\r\n.build();\r\n}\r\n~~~\r\n\r\nExpectation:\r\n\r\n```\r\npublic Job demoJob(){\r\nreturn jobBuilderFactory.get(&quot;demoJob&quot;)\r\n.listener(jobExecutionListener())\r\n.start(A())\r\n.next(B() and C())                        // How to setup this\r\n.next(D())\r\n.build();\r\n}\r\n```","title":"Java Springboot Job Flow to execute two steps simultaneously","body":"<p>I want to write a Batch job which has steps (let's say A, B, C, D). The batch should execute in following way:</p>\n<pre><code>   A\n   |\nB and C\n   |\n   D\n</code></pre>\n<p>But current setup is: A -&gt; B -&gt; C -&gt; D.\nI want execute B and C at the same time and different threads.</p>\n<p>Both B and C execution duration is different (lets say duration for B is 5 min and for C it is 10 min)</p>\n<h6>More details:</h6>\n<p>Step A: Truncates the some table in database.</p>\n<p>Step B and C: Batch read and writer with chunks of 2000.</p>\n<p>Reader: JdbcCursorItemReader |\nProcessor: Not using |\nWriter: JdbcBatchItemWriter</p>\n<p>Step D: Run PL/SQL procedure which depends on data writes in Step B and C so this should start only after B &amp; C successfully complete.</p>\n<p>I'm using Quartz scheduler to running this job. So also let me know if I need to use multithread to run this job, because currently it is running in only one worker thread.</p>\n<p>Please write the code also.</p>\n<p>Current Setup of Job:</p>\n<pre><code>public Job demoJob(){\nreturn jobBuilderFactory.get(&quot;demoJob&quot;)\n.listener(jobExecutionListener())\n.start(A())\n.next(B())\n.next(C())\n.next(D())\n.build();\n}\n</code></pre>\n<p>Expectation:</p>\n<pre><code>public Job demoJob(){\nreturn jobBuilderFactory.get(&quot;demoJob&quot;)\n.listener(jobExecutionListener())\n.start(A())\n.next(B() and C())                        // How to setup this\n.next(D())\n.build();\n}\n</code></pre>\n"},{"tags":["java","graph","depth-first-search"],"answers":[{"tags":[],"owner":{"account_id":7142980,"reputation":323243,"user_id":5459839,"display_name":"trincot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692947886,"creation_date":1692944011,"answer_id":76974664,"question_id":76974093,"body_markdown":"No, the space complexity is not O(&#119881;). For a given starting node `i`, the helper function stores for each of its (non-cyclic) descendants the path from `i` to that descendant. In a worst case this could represent O(&#119881;&#178;).\r\n\r\nTake for instance this graph:\r\n\r\n         1\r\n        / \\\r\n       2   3\r\n          / \\\r\n         4   5\r\n            / \\\r\n           6   7\r\n              / \\\r\n             8   ...\r\n                 ...\r\n                 /  \\\r\n              &#119881;-1    &#119881;\r\n\r\n...and let `i` be the root node. Then the loop will add two nodes to the stack in each iteration, and pop one, until it reaches node &#119881;. When it has arrived there, we have a stack with &#119881;/2 entries (representing the nodes with *even* numbers), and each will have a set with the nodes on the root-to-node path. So the sizes of those sets are 2, 3, 4, 5, ... &#119881;/2\r\n\r\n      &lt;2, {1, 2}&gt;\r\n      &lt;4, {1, 3, 4}&gt;\r\n      &lt;6, {1, 3, 5, 6}&gt;\r\n      &lt;8, {1, 3, 5, 7, 8}&gt;\r\n       ...\r\n\r\nThe sum of these set sizes is a triangular number and is O(&#119881;&#178;).\r\n\r\nAs the creation of a set of size &#119899; has a time complexity of O(&#119899;) (see the statement where `temp` is assigned), you also have a worst-case time complexity of O(&#119881;&#178;) = O(&#119864;&#178;).","title":"Whats the time and space complexity of this code to find a cycle in a Directed graph using dfs iterative","body":"<p>No, the space complexity is not O(𝑉). For a given starting node <code>i</code>, the helper function stores for each of its (non-cyclic) descendants the path from <code>i</code> to that descendant. In a worst case this could represent O(𝑉²).</p>\n<p>Take for instance this graph:</p>\n<pre><code>     1\n    / \\\n   2   3\n      / \\\n     4   5\n        / \\\n       6   7\n          / \\\n         8   ...\n             ...\n             /  \\\n          𝑉-1    𝑉\n</code></pre>\n<p>...and let <code>i</code> be the root node. Then the loop will add two nodes to the stack in each iteration, and pop one, until it reaches node 𝑉. When it has arrived there, we have a stack with 𝑉/2 entries (representing the nodes with <em>even</em> numbers), and each will have a set with the nodes on the root-to-node path. So the sizes of those sets are 2, 3, 4, 5, ... 𝑉/2</p>\n<pre><code>  &lt;2, {1, 2}&gt;\n  &lt;4, {1, 3, 4}&gt;\n  &lt;6, {1, 3, 5, 6}&gt;\n  &lt;8, {1, 3, 5, 7, 8}&gt;\n   ...\n</code></pre>\n<p>The sum of these set sizes is a triangular number and is O(𝑉²).</p>\n<p>As the creation of a set of size 𝑛 has a time complexity of O(𝑛) (see the statement where <code>temp</code> is assigned), you also have a worst-case time complexity of O(𝑉²) = O(𝐸²).</p>\n"}],"owner":{"account_id":4890716,"reputation":13,"user_id":3941940,"display_name":"Cherukuri Surya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76974664,"answer_count":1,"score":1,"last_activity_date":1692947886,"creation_date":1692934216,"question_id":76974093,"body_markdown":"\r\n\r\n```\r\nimport java.util.*;\r\n\r\nclass Program {\r\n    public boolean cycleInGraph(int[][] edges) {\r\n        // Write your code here.\r\n        int n = edges.length;\r\n        boolean[] visited = new boolean[n];\r\n\r\n        Arrays.fill(visited, false);\r\n\r\n        for (int i = 0; i &lt; n; i++) {\r\n            if (visited[i]) continue;\r\n\r\n            boolean containsCycle =\r\n                helper(edges, i, visited);\r\n            if (containsCycle) return true;\r\n        }\r\n        return false;\r\n    }\r\n    public boolean helper(int[][] edges, int i, boolean[] visited) {\r\n        Set &lt; Integer &gt; set = new HashSet &lt; &gt; ();\r\n        Stack &lt; Map.Entry &lt; Integer, Set &lt; Integer &gt;&gt;&gt; s = new Stack &lt; &gt; ();\r\n        set.add(i);\r\n        s.push(new AbstractMap.SimpleEntry &lt; &gt; (i, set));\r\n\r\n        while (!s.isEmpty()) {\r\n            Map.Entry &lt; Integer, Set &lt; Integer &gt;&gt; curr = s.pop();\r\n            Set &lt; Integer &gt; path = curr.getValue();\r\n            int node = curr.getKey();\r\n            visited[node] = true;\r\n            if (edges[node].length == 0) path.remove(node);\r\n            for (int children: edges[node]) {\r\n                if (visited[children] &amp;&amp; path.contains(children)) {\r\n                    return true;\r\n                }\r\n                Set &lt; Integer &gt; temp = new HashSet &lt; &gt; (path);\r\n                temp.add(children);\r\n                s.push(new AbstractMap.SimpleEntry &lt; &gt; (children, temp));\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\n\r\n```\r\n\r\nPlease confirm is the time and space complexity is O(V+E) and O(V) ?\r\n\r\nI used a iterative dfs using a stack and storing the path in the stack.\r\n\r\nWhat I want to understand is the space used at any point is O(V).\r\n","title":"Whats the time and space complexity of this code to find a cycle in a Directed graph using dfs iterative","body":"<pre><code>import java.util.*;\n\nclass Program {\n    public boolean cycleInGraph(int[][] edges) {\n        // Write your code here.\n        int n = edges.length;\n        boolean[] visited = new boolean[n];\n\n        Arrays.fill(visited, false);\n\n        for (int i = 0; i &lt; n; i++) {\n            if (visited[i]) continue;\n\n            boolean containsCycle =\n                helper(edges, i, visited);\n            if (containsCycle) return true;\n        }\n        return false;\n    }\n    public boolean helper(int[][] edges, int i, boolean[] visited) {\n        Set &lt; Integer &gt; set = new HashSet &lt; &gt; ();\n        Stack &lt; Map.Entry &lt; Integer, Set &lt; Integer &gt;&gt;&gt; s = new Stack &lt; &gt; ();\n        set.add(i);\n        s.push(new AbstractMap.SimpleEntry &lt; &gt; (i, set));\n\n        while (!s.isEmpty()) {\n            Map.Entry &lt; Integer, Set &lt; Integer &gt;&gt; curr = s.pop();\n            Set &lt; Integer &gt; path = curr.getValue();\n            int node = curr.getKey();\n            visited[node] = true;\n            if (edges[node].length == 0) path.remove(node);\n            for (int children: edges[node]) {\n                if (visited[children] &amp;&amp; path.contains(children)) {\n                    return true;\n                }\n                Set &lt; Integer &gt; temp = new HashSet &lt; &gt; (path);\n                temp.add(children);\n                s.push(new AbstractMap.SimpleEntry &lt; &gt; (children, temp));\n            }\n        }\n        return false;\n    }\n}\n\n</code></pre>\n<p>Please confirm is the time and space complexity is O(V+E) and O(V) ?</p>\n<p>I used a iterative dfs using a stack and storing the path in the stack.</p>\n<p>What I want to understand is the space used at any point is O(V).</p>\n"},{"tags":["java","spring","spring-boot","hystrix","circuit-breaker"],"answers":[{"tags":[],"owner":{"account_id":5370110,"reputation":554,"user_id":4278899,"display_name":"Olivier Meurice"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1482080267,"creation_date":1482080267,"answer_id":41210706,"question_id":41210369,"body_markdown":"Your @HystrixCommand annotated method should be public.\r\nNot sure about the fallback method but I would set it public as well.","title":"Hystrix fallback method is not invoked","body":"<p>Your @HystrixCommand annotated method should be public.\nNot sure about the fallback method but I would set it public as well.</p>\n"},{"tags":[],"owner":{"account_id":6142042,"reputation":504,"user_id":4789157,"accept_rate":75,"display_name":"David"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1484428945,"creation_date":1482082631,"answer_id":41211068,"question_id":41210369,"body_markdown":"Both the methods i.e. the actual and fallback methods should be public and move these methods to a separate class and annotate it with @Component.\r\n\r\nGive a try, hope this helps.","title":"Hystrix fallback method is not invoked","body":"<p>Both the methods i.e. the actual and fallback methods should be public and move these methods to a separate class and annotate it with @Component.</p>\n\n<p>Give a try, hope this helps.</p>\n"},{"tags":[],"owner":{"account_id":11536295,"reputation":31,"user_id":8453594,"display_name":"umbum"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1606058704,"creation_date":1564476937,"answer_id":57267870,"question_id":41210369,"body_markdown":"This is because of AOP.\r\n\r\nThe Spring container injects aspect-aware bean when injecting a bean.\r\n\r\nWhen the `name()` function is called at the user&#39;s request, the method of the aspect-aware bean is called so annotation works.\r\n\r\nHowever, calling `this.getCustomerName()` directly within the `name()` calls `getCustomerName()` on the raw bean before it is wrapped in proxy. It doesn&#39;t know aspect. Therefore, annotation does not work.\r\n\r\n","title":"Hystrix fallback method is not invoked","body":"<p>This is because of AOP.</p>\n<p>The Spring container injects aspect-aware bean when injecting a bean.</p>\n<p>When the <code>name()</code> function is called at the user's request, the method of the aspect-aware bean is called so annotation works.</p>\n<p>However, calling <code>this.getCustomerName()</code> directly within the <code>name()</code> calls <code>getCustomerName()</code> on the raw bean before it is wrapped in proxy. It doesn't know aspect. Therefore, annotation does not work.</p>\n"},{"tags":[],"owner":{"account_id":8315755,"reputation":449,"user_id":6249116,"accept_rate":10,"display_name":"Camilo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1565746270,"creation_date":1565746270,"answer_id":57487106,"question_id":41210369,"body_markdown":"You can also try stopping and starting the service, if you added the dependency of netflix-hystrix and have dev-tools to pick up changes while executing the service.","title":"Hystrix fallback method is not invoked","body":"<p>You can also try stopping and starting the service, if you added the dependency of netflix-hystrix and have dev-tools to pick up changes while executing the service.</p>\n"},{"tags":[],"owner":{"account_id":8146172,"reputation":11,"user_id":6134761,"display_name":"emre avci"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1623569205,"creation_date":1623564343,"answer_id":67955356,"question_id":41210369,"body_markdown":"Fallback metod should be  called from another bean. The problem is you are calling fallback method from RestController.","title":"Hystrix fallback method is not invoked","body":"<p>Fallback metod should be  called from another bean. The problem is you are calling fallback method from RestController.</p>\n"},{"tags":[],"owner":{"account_id":17614949,"reputation":121,"user_id":12782217,"display_name":"Bexzod Xayrullayev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690813273,"creation_date":1690813273,"answer_id":76804530,"question_id":41210369,"body_markdown":"You can try this because of HystrixComman is aspect\r\n\r\n    @Bean\r\n    @Primary\r\n    @Order(value= Ordered.HIGHEST_PRECEDENCE)\r\n    public HystrixCommandAspect hystrixAspect() {\r\n        return new HystrixCommandAspect();\r\n    }\r\n\r\n","title":"Hystrix fallback method is not invoked","body":"<p>You can try this because of HystrixComman is aspect</p>\n<pre><code>@Bean\n@Primary\n@Order(value= Ordered.HIGHEST_PRECEDENCE)\npublic HystrixCommandAspect hystrixAspect() {\n    return new HystrixCommandAspect();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15913029,"reputation":98,"user_id":11482481,"display_name":"Sandhya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692947883,"creation_date":1692888202,"answer_id":76970440,"question_id":41210369,"body_markdown":"The `@HystrixCommand` annotated method should be public. The fallback method can be private as well.","title":"Hystrix fallback method is not invoked","body":"<p>The <code>@HystrixCommand</code> annotated method should be public. The fallback method can be private as well.</p>\n"}],"owner":{"account_id":1737292,"reputation":1809,"user_id":1589549,"accept_rate":38,"display_name":"prranay"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6669,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":41211068,"answer_count":7,"score":4,"last_activity_date":1692947883,"creation_date":1482078140,"question_id":41210369,"body_markdown":"I&#39;m trying hystrix fallback method.\r\nOn localhost:8082, customer-service is running which returns name of the customer.\r\n\r\nIf the customer-service is down, fallback method should invoke. But it is not happening.\r\n\r\n\r\nBelow is the code snippet.\r\n\r\nPlease suggest.\r\n\r\n    @SpringBootApplication\r\n    @EnableDiscoveryClient\r\n    @EnableCircuitBreaker\r\n    @RestController\r\n    public class DemoHystrixApplication {\r\n    \r\n    \t@GetMapping(&quot;/&quot;)\r\n    \tpublic String name() {\r\n    \t\tString str = getCustomerName();\r\n    \t\treturn str;\r\n    \t}\r\n    \t\r\n    \t@HystrixCommand(fallbackMethod = &quot;getFallbackCustomerName&quot;)\r\n    \tprivate String getCustomerName() {\r\n    \t\tRestTemplate restTemplate = new RestTemplate();\r\n    \t    URI uri = URI.create(&quot;http://localhost:8082&quot;);\r\n    \t    return restTemplate.getForObject(uri, String.class);\r\n    \t}\r\n    \r\n    \tprivate String getFallbackCustomerName() {\r\n    \t\tSystem.out.println(&quot;coming inside fallback method&quot;);\r\n    \t\treturn &quot;Resillient Customer&quot;;\r\n    \t}\r\n    \t\r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(DemoHystrixApplication.class, args);\r\n    \t}\r\n    }\r\n\r\n \r\n","title":"Hystrix fallback method is not invoked","body":"<p>I'm trying hystrix fallback method.\nOn localhost:8082, customer-service is running which returns name of the customer.</p>\n\n<p>If the customer-service is down, fallback method should invoke. But it is not happening.</p>\n\n<p>Below is the code snippet.</p>\n\n<p>Please suggest.</p>\n\n<pre><code>@SpringBootApplication\n@EnableDiscoveryClient\n@EnableCircuitBreaker\n@RestController\npublic class DemoHystrixApplication {\n\n    @GetMapping(\"/\")\n    public String name() {\n        String str = getCustomerName();\n        return str;\n    }\n\n    @HystrixCommand(fallbackMethod = \"getFallbackCustomerName\")\n    private String getCustomerName() {\n        RestTemplate restTemplate = new RestTemplate();\n        URI uri = URI.create(\"http://localhost:8082\");\n        return restTemplate.getForObject(uri, String.class);\n    }\n\n    private String getFallbackCustomerName() {\n        System.out.println(\"coming inside fallback method\");\n        return \"Resillient Customer\";\n    }\n\n    public static void main(String[] args) {\n        SpringApplication.run(DemoHystrixApplication.class, args);\n    }\n}\n</code></pre>\n"},{"tags":["java","string","split","substring","contains"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":6,"creation_date":1659967973,"post_id":73279258,"comment_id":129414553,"body_markdown":"Why is this not short and efficient?","body":"Why is this not short and efficient?"},{"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"score":1,"creation_date":1659967996,"post_id":73279258,"comment_id":129414560,"body_markdown":"alternatively get the index of the second whitespace and take a substring until that second index.","body":"alternatively get the index of the second whitespace and take a substring until that second index."},{"owner":{"account_id":25334471,"reputation":188,"user_id":19153819,"display_name":"lesch"},"score":0,"creation_date":1659968099,"post_id":73279258,"comment_id":129414598,"body_markdown":"But it is equally long and inefficient","body":"But it is equally long and inefficient"},{"owner":{"account_id":25334471,"reputation":188,"user_id":19153819,"display_name":"lesch"},"score":0,"creation_date":1659968222,"post_id":73279258,"comment_id":129414656,"body_markdown":"f1sh Because you can&#39;t reuse the code and it needs unnecessary variables. And arrays are never perfect anyway","body":"f1sh Because you can&#39;t reuse the code and it needs unnecessary variables. And arrays are never perfect anyway"},{"owner":{"account_id":2094057,"reputation":506074,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"score":0,"creation_date":1659968319,"post_id":73279258,"comment_id":129414696,"body_markdown":"String splitting or taking a substring are probably the two most efficient ways to do this.  For kicks, I gave a regex answer which st least is easy on the eyes.","body":"String splitting or taking a substring are probably the two most efficient ways to do this.  For kicks, I gave a regex answer which st least is easy on the eyes."},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":2,"creation_date":1659968456,"post_id":73279258,"comment_id":129414751,"body_markdown":"@bschle To be fair your code is perfectly fine, once you move the declarations where they&#39;re needed instead of the beginning of code block. It&#39;s readable and what it does is perfectly clear. It&#39;s not inefficient and it&#39;s short and to the point.","body":"@bschle To be fair your code is perfectly fine, once you move the declarations where they&#39;re needed instead of the beginning of code block. It&#39;s readable and what it does is perfectly clear. It&#39;s not inefficient and it&#39;s short and to the point."},{"owner":{"account_id":25334471,"reputation":188,"user_id":19153819,"display_name":"lesch"},"score":0,"creation_date":1659968772,"post_id":73279258,"comment_id":129414890,"body_markdown":"@Federico klez Culloca\nThanks but you always have to add + &quot; &quot; + newStringArray[x] if you want longer and so it is not perfect with a long sat","body":"@Federico klez Culloca Thanks but you always have to add + &quot; &quot; + newStringArray[x] if you want longer and so it is not perfect with a long sat"},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1659979906,"post_id":73279258,"comment_id":129419229,"body_markdown":"@bschle of course you can reuse this code, move it to a method. And the variables can be inlined. You&#39;re splitting hairs here.","body":"@bschle of course you can reuse this code, move it to a method. And the variables can be inlined. You&#39;re splitting hairs here."},{"owner":{"account_id":25334471,"reputation":188,"user_id":19153819,"display_name":"lesch"},"score":0,"creation_date":1659983482,"post_id":73279258,"comment_id":129420451,"body_markdown":"Yeah, i know thanks but i must use witch my opinion an very long array","body":"Yeah, i know thanks but i must use witch my opinion an very long array"}],"answers":[{"tags":[],"owner":{"account_id":2094057,"reputation":506074,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659968110,"creation_date":1659968110,"answer_id":73279321,"question_id":73279258,"body_markdown":"As an alternative to `String#split()`, you could use a regex replacement approach:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    String string = &quot;hello world bye moon&quot;;\r\n    String firstTwo = string.replaceAll(&quot;(\\\\w+ \\\\w+).*&quot;, &quot;$1&quot;);\r\n    System.out.println(firstTwo);  // hello world","title":"Java split string to get only two words","body":"<p>As an alternative to <code>String#split()</code>, you could use a regex replacement approach:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String string = &quot;hello world bye moon&quot;;\nString firstTwo = string.replaceAll(&quot;(\\\\w+ \\\\w+).*&quot;, &quot;$1&quot;);\nSystem.out.println(firstTwo);  // hello world\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1659968434,"creation_date":1659968434,"answer_id":73279400,"question_id":73279258,"body_markdown":"You can also use substring:\r\n\r\n     String string = &quot;hello world bye moon&quot;;\r\n     String stringTwo = string.substring(0, string.indexOf(&#39; &#39;, string.indexOf(&#39; &#39;)+1));\r\n     \r\n     System.out.println(stringTwo);","title":"Java split string to get only two words","body":"<p>You can also use substring:</p>\n<pre><code> String string = &quot;hello world bye moon&quot;;\n String stringTwo = string.substring(0, string.indexOf(' ', string.indexOf(' ')+1));\n \n System.out.println(stringTwo);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1659971746,"creation_date":1659971511,"answer_id":73280156,"question_id":73279258,"body_markdown":"Reading your comments it seems that you actually want a method that, given a string and a number `n`, extracts the first `n` words from said string.\r\n\r\nHere&#39;s a quick and dirty version using streams.\r\n\r\n    public static String extractWords(String s, int howMany) {\r\n        var splitString = s.split(&quot; &quot;);\r\n        // TODO: make sure `howMany` is not too big\r\n        return java.util.Arrays.stream(splitString)  // create stream\r\n                               .limit(howMany)       // take only `howMany` elements\r\n                               .collect(java.util.stream.Collectors.joining(&quot; &quot;)); // re-join with spaces\r\n    }\r\n\r\nAnd a version with sub-arrays\r\n\r\n    public static String extractWords(String s, int howMany) {\r\n        var splitString = s.split(&quot; &quot;);\r\n        // TODO: make sure `howMany` is not too big\r\n        var subArray = java.util.Arrays.copyOf(splitString, howMany); // extract sub array\r\n        return String.join(&quot; &quot;, subArray);                            // return joined strings\r\n    }\r\n\r\nIn both versions checking the parameters are valid (i.e. string is not null and there are enough words to return) is left as an exercise for the reader","title":"Java split string to get only two words","body":"<p>Reading your comments it seems that you actually want a method that, given a string and a number <code>n</code>, extracts the first <code>n</code> words from said string.</p>\n<p>Here's a quick and dirty version using streams.</p>\n<pre><code>public static String extractWords(String s, int howMany) {\n    var splitString = s.split(&quot; &quot;);\n    // TODO: make sure `howMany` is not too big\n    return java.util.Arrays.stream(splitString)  // create stream\n                           .limit(howMany)       // take only `howMany` elements\n                           .collect(java.util.stream.Collectors.joining(&quot; &quot;)); // re-join with spaces\n}\n</code></pre>\n<p>And a version with sub-arrays</p>\n<pre><code>public static String extractWords(String s, int howMany) {\n    var splitString = s.split(&quot; &quot;);\n    // TODO: make sure `howMany` is not too big\n    var subArray = java.util.Arrays.copyOf(splitString, howMany); // extract sub array\n    return String.join(&quot; &quot;, subArray);                            // return joined strings\n}\n</code></pre>\n<p>In both versions checking the parameters are valid (i.e. string is not null and there are enough words to return) is left as an exercise for the reader</p>\n"},{"tags":[],"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659971832,"creation_date":1659971622,"answer_id":73280183,"question_id":73279258,"body_markdown":"The fast solution is one that doesn&#39;t process the entire string.  Imagine if the string is thousands of characters long with a lot of white spaces.  It should read just enough characters to get the first two words.  You can use String.indexOf to get the second space.  Or you could write your own as below:\r\n\r\n```\r\npublic class Main{\r\n   static String firstTwoWords(String s){\r\n      int spaces = 0;\r\n      int i = 0;\r\n      for(i=0; i&lt;s.length() &amp;&amp; spaces &lt; 2; i++)\r\n         if (s.charAt(i) == &#39; &#39;) \r\n            spaces++;\r\n      return s.substring(0, i);\r\n   }\r\n   \r\n\tpublic static void main(String[] args) {\r\n\t    String s0 = &quot;hello&quot;;\r\n\t\tString s1 = &quot;hello world&quot;;\r\n\t\tString s2 = &quot;hello world peple&quot;;\r\n\t\tSystem.out.println(firstTwoWords(s0));\r\n\t\tSystem.out.println(firstTwoWords(s1));\r\n\t\tSystem.out.println(firstTwoWords(s2));\r\n\t}\r\n}\r\n```","title":"Java split string to get only two words","body":"<p>The fast solution is one that doesn't process the entire string.  Imagine if the string is thousands of characters long with a lot of white spaces.  It should read just enough characters to get the first two words.  You can use String.indexOf to get the second space.  Or you could write your own as below:</p>\n<pre><code>public class Main{\n   static String firstTwoWords(String s){\n      int spaces = 0;\n      int i = 0;\n      for(i=0; i&lt;s.length() &amp;&amp; spaces &lt; 2; i++)\n         if (s.charAt(i) == ' ') \n            spaces++;\n      return s.substring(0, i);\n   }\n   \n    public static void main(String[] args) {\n        String s0 = &quot;hello&quot;;\n        String s1 = &quot;hello world&quot;;\n        String s2 = &quot;hello world peple&quot;;\n        System.out.println(firstTwoWords(s0));\n        System.out.println(firstTwoWords(s1));\n        System.out.println(firstTwoWords(s2));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26017129,"reputation":46,"user_id":22423584,"display_name":"zytroy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1692947814,"creation_date":1692947814,"answer_id":76975050,"question_id":73279258,"body_markdown":"In Java, you can achieve this more efficiently and concisely without splitting and concatenating by using the `StringTokenizer` class or regular expressions. Here&#39;s an example using `StringTokenizer`:\r\n\r\n```java\r\nimport java.util.StringTokenizer;\r\n\r\npublic class ExtractFirstTwoWords {\r\n    public static void main(String[] args) {\r\n        String inputString = &quot;hello world bye moon&quot;;\r\n\r\n        // Use StringTokenizer to split the string into words\r\n        StringTokenizer tokenizer = new StringTokenizer(inputString);\r\n\r\n        // Check if there are at least two words\r\n        if (tokenizer.countTokens() &gt;= 2) {\r\n            // Extract the first two words\r\n            String firstTwoWords = tokenizer.nextToken() + &quot; &quot; + tokenizer.nextToken();\r\n            System.out.println(&quot;First two words: &quot; + firstTwoWords);\r\n        } else {\r\n            System.out.println(&quot;The input string does not contain at least two words.&quot;);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAlternatively, you can use regular expressions for a more powerful and flexible approach:\r\n\r\n```java\r\nimport java.util.regex.Matcher;\r\nimport java.util.regex.Pattern;\r\n\r\npublic class ExtractFirstTwoWords {\r\n    public static void main(String[] args) {\r\n        String inputString = &quot;hello world bye moon&quot;;\r\n\r\n        // Define a regular expression to match words\r\n        Pattern pattern = Pattern.compile(&quot;\\\\b\\\\w+\\\\b&quot;);\r\n\r\n        // Create a Matcher\r\n        Matcher matcher = pattern.matcher(inputString);\r\n\r\n        // Find the first two words\r\n        StringBuilder firstTwoWords = new StringBuilder();\r\n        for (int i = 0; i &lt; 2 &amp;&amp; matcher.find(); i++) {\r\n            firstTwoWords.append(matcher.group()).append(&quot; &quot;);\r\n        }\r\n\r\n        if (firstTwoWords.length() &gt; 0) {\r\n            // Remove the trailing space\r\n            firstTwoWords.setLength(firstTwoWords.length() - 1);\r\n            System.out.println(&quot;First two words: &quot; + firstTwoWords.toString());\r\n        } else {\r\n            System.out.println(&quot;The input string does not contain at least two words.&quot;);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nBoth of these approaches avoid creating an intermediate array and are more efficient for extracting the first two words from a string.","title":"Java split string to get only two words","body":"<p>In Java, you can achieve this more efficiently and concisely without splitting and concatenating by using the <code>StringTokenizer</code> class or regular expressions. Here's an example using <code>StringTokenizer</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.StringTokenizer;\n\npublic class ExtractFirstTwoWords {\n    public static void main(String[] args) {\n        String inputString = &quot;hello world bye moon&quot;;\n\n        // Use StringTokenizer to split the string into words\n        StringTokenizer tokenizer = new StringTokenizer(inputString);\n\n        // Check if there are at least two words\n        if (tokenizer.countTokens() &gt;= 2) {\n            // Extract the first two words\n            String firstTwoWords = tokenizer.nextToken() + &quot; &quot; + tokenizer.nextToken();\n            System.out.println(&quot;First two words: &quot; + firstTwoWords);\n        } else {\n            System.out.println(&quot;The input string does not contain at least two words.&quot;);\n        }\n    }\n}\n</code></pre>\n<p>Alternatively, you can use regular expressions for a more powerful and flexible approach:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\npublic class ExtractFirstTwoWords {\n    public static void main(String[] args) {\n        String inputString = &quot;hello world bye moon&quot;;\n\n        // Define a regular expression to match words\n        Pattern pattern = Pattern.compile(&quot;\\\\b\\\\w+\\\\b&quot;);\n\n        // Create a Matcher\n        Matcher matcher = pattern.matcher(inputString);\n\n        // Find the first two words\n        StringBuilder firstTwoWords = new StringBuilder();\n        for (int i = 0; i &lt; 2 &amp;&amp; matcher.find(); i++) {\n            firstTwoWords.append(matcher.group()).append(&quot; &quot;);\n        }\n\n        if (firstTwoWords.length() &gt; 0) {\n            // Remove the trailing space\n            firstTwoWords.setLength(firstTwoWords.length() - 1);\n            System.out.println(&quot;First two words: &quot; + firstTwoWords.toString());\n        } else {\n            System.out.println(&quot;The input string does not contain at least two words.&quot;);\n        }\n    }\n}\n</code></pre>\n<p>Both of these approaches avoid creating an intermediate array and are more efficient for extracting the first two words from a string.</p>\n"}],"owner":{"account_id":25334471,"reputation":188,"user_id":19153819,"display_name":"lesch"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":715,"favorite_count":0,"down_vote_count":4,"up_vote_count":5,"accepted_answer_id":76975050,"answer_count":5,"score":1,"last_activity_date":1692947814,"creation_date":1659967865,"question_id":73279258,"body_markdown":"I have a Java string like &quot;hello world bye moon&quot; and I&#39;m looking for an efficient way to extract the first two words from it. Currently, I&#39;m using the split method and then concatenating the first two elements of the resulting array. However, I&#39;m wondering if there&#39;s a more concise and efficient way to achieve this.\r\n\r\nHere&#39;s my current code:\r\n\r\n    public class ExtractFirstTwoWords {\r\n        public static void main(String[] args) {\r\n            String inputString = &quot;hello world bye moon&quot;;\r\n    \r\n            // Split the string into words\r\n            String[] words = inputString.split(&quot; &quot;);\r\n    \r\n            // Check if there are at least two words\r\n            if (words.length &gt;= 2) {\r\n                // Extract the first two words\r\n                String firstTwoWords = words[0] + &quot; &quot; + words[1];\r\n                System.out.println(&quot;First two words: &quot; + firstTwoWords);\r\n            } else {\r\n                System.out.println(&quot;The input string does not contain at least two words.&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nIs there a built-in Java method or a more efficient approach to extract the first two words from a string without splitting and concatenating all the words in the string?\r\n","title":"Java split string to get only two words","body":"<p>I have a Java string like &quot;hello world bye moon&quot; and I'm looking for an efficient way to extract the first two words from it. Currently, I'm using the split method and then concatenating the first two elements of the resulting array. However, I'm wondering if there's a more concise and efficient way to achieve this.</p>\n<p>Here's my current code:</p>\n<pre><code>public class ExtractFirstTwoWords {\n    public static void main(String[] args) {\n        String inputString = &quot;hello world bye moon&quot;;\n\n        // Split the string into words\n        String[] words = inputString.split(&quot; &quot;);\n\n        // Check if there are at least two words\n        if (words.length &gt;= 2) {\n            // Extract the first two words\n            String firstTwoWords = words[0] + &quot; &quot; + words[1];\n            System.out.println(&quot;First two words: &quot; + firstTwoWords);\n        } else {\n            System.out.println(&quot;The input string does not contain at least two words.&quot;);\n        }\n    }\n}\n</code></pre>\n<p>Is there a built-in Java method or a more efficient approach to extract the first two words from a string without splitting and concatenating all the words in the string?</p>\n"},{"tags":["java","vaadin8"],"comments":[{"owner":{"account_id":4201504,"reputation":5591,"user_id":3441504,"accept_rate":100,"display_name":"kscherrer"},"score":0,"creation_date":1553763019,"post_id":55390021,"comment_id":97507290,"body_markdown":"`Which I know will not work` - why not? looks good to me. Did you set items for the ComboBox? There should never be a need for a Converter on a ComboBox - You can always add an `ItemLabelGenerator` where you can define the conversion from the original type to how it should be displayed (default is toString, but you could convert it to Vaadin Components for example. see how it is done in the [documentation](https://vaadin.com/components/vaadin-combo-box/java-examples/using-components))","body":"<code>Which I know will not work</code> - why not? looks good to me. Did you set items for the ComboBox? There should never be a need for a Converter on a ComboBox - You can always add an <code>ItemLabelGenerator</code> where you can define the conversion from the original type to how it should be displayed (default is toString, but you could convert it to Vaadin Components for example. see how it is done in the <a href=\"https://vaadin.com/components/vaadin-combo-box/java-examples/using-components\" rel=\"nofollow noreferrer\">documentation</a>)"},{"owner":{"account_id":13080131,"reputation":2313,"user_id":9450946,"display_name":"recurseuntilfor"},"score":0,"creation_date":1553769800,"post_id":55390021,"comment_id":97511409,"body_markdown":"I got a error message The method bind(HasValue, ValueProvider, Setter) in the type Binder is not applicable for the arguments (ComboBox&lt;String&gt;, Student::getGender, Student::setGender) but when I tried to replicate the error no error was there. But using bindInstanceFields was easier though.","body":"I got a error message The method bind(HasValue, ValueProvider, Setter) in the type Binder is not applicable for the arguments (ComboBox&lt;String&gt;, Student::getGender, Student::setGender) but when I tried to replicate the error no error was there. But using bindInstanceFields was easier though."},{"owner":{"account_id":4201504,"reputation":5591,"user_id":3441504,"accept_rate":100,"display_name":"kscherrer"},"score":0,"creation_date":1553770240,"post_id":55390021,"comment_id":97511671,"body_markdown":"is gender actually an Enum or is it a String in your student object? using bindInstanceFields can be easier but IIRC then it only works for very basic bindings - no converters, validators, nullRepresentations, or readOnly (no setter) can be set, and you can&#39;t bind nested fields of the Student object. it basically applies `binder.forField(field).bind(&quot;propertyName&quot;)` for each HasValue-component in your view","body":"is gender actually an Enum or is it a String in your student object? using bindInstanceFields can be easier but IIRC then it only works for very basic bindings - no converters, validators, nullRepresentations, or readOnly (no setter) can be set, and you can&#39;t bind nested fields of the Student object. it basically applies <code>binder.forField(field).bind(&quot;propertyName&quot;)</code> for each HasValue-component in your view"},{"owner":{"account_id":13080131,"reputation":2313,"user_id":9450946,"display_name":"recurseuntilfor"},"score":0,"creation_date":1553770439,"post_id":55390021,"comment_id":97511805,"body_markdown":"It is an Enum in a string utils with a toString method","body":"It is an Enum in a string utils with a toString method"},{"owner":{"account_id":4201504,"reputation":5591,"user_id":3441504,"accept_rate":100,"display_name":"kscherrer"},"score":1,"creation_date":1553770502,"post_id":55390021,"comment_id":97511858,"body_markdown":"aha! you should define your ComboBox as `ComboBox&lt;Gender&gt;` then!","body":"aha! you should define your ComboBox as <code>ComboBox&lt;Gender&gt;</code> then!"},{"owner":{"account_id":13080131,"reputation":2313,"user_id":9450946,"display_name":"recurseuntilfor"},"score":0,"creation_date":1553770633,"post_id":55390021,"comment_id":97511950,"body_markdown":"Thanks this must have been the problem","body":"Thanks this must have been the problem"}],"answers":[{"tags":[],"owner":{"account_id":13080131,"reputation":2313,"user_id":9450946,"display_name":"recurseuntilfor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1553761960,"creation_date":1553761960,"answer_id":55393119,"question_id":55390021,"body_markdown":"I have found that in vaadin 8 uses bindInstanceFields to bind form data to a class.\t\t\t\r\n\r\n    Binder binder = new Binder&lt;Student&gt;(Student.class);\r\n\r\n    binder.bindInstanceFields(this);\r\n    binder.readBean(student);","title":"Binding a combo box vaadin 8","body":"<p>I have found that in vaadin 8 uses bindInstanceFields to bind form data to a class.         </p>\n\n<pre><code>Binder binder = new Binder&lt;Student&gt;(Student.class);\n\nbinder.bindInstanceFields(this);\nbinder.readBean(student);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4201504,"reputation":5591,"user_id":3441504,"accept_rate":100,"display_name":"kscherrer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1692947273,"creation_date":1553771001,"answer_id":55395981,"question_id":55390021,"body_markdown":"You mentioned in a comment that the `gender` field in your `Student` object is actually an Enum and not a String. \r\n\r\nYour mistake was that you defined the ComboBox with type String instead of your Gender enum.\r\n\r\nAssuming your gender enum class is called `Gender`, this will work:\r\n\r\n    ComboBox&lt;Gender&gt; gender = new ComboBox&lt;Gender&gt;(&quot;Gender&quot;);\r\n    Binder&lt;Student&gt; binder = new Binder&lt;Student&gt;(Student.class);\r\n    binder.bind(gender, Student::getGender, Student::setGender);\r\n\r\nYou can add an `ItemLabelGenerator` to the ComboBox to define how the selected Gender value should be displayed (and `Renderer`, which will control how the items in the dropdown will look). By default it will use `toString()` of the class, both for itemLabelGenerator and for renderer. But you could use the Renderer to build Vaadin Components for example if you want. see how it is done in the [ComboBox documentation][1]).  \r\n\r\nThe selected value can only be displayed as a String. If you want to let it be displayed as a Vaadin Component instead, you could use a `Select` component instead. [Select documentation][2].\r\n\r\n\r\n  [1]: https://vaadin.com/docs/latest/components/combo-box#custom-item-presentation\r\n  [2]: https://vaadin.com/docs/latest/components/select#custom-item-presentation","title":"Binding a combo box vaadin 8","body":"<p>You mentioned in a comment that the <code>gender</code> field in your <code>Student</code> object is actually an Enum and not a String.</p>\n<p>Your mistake was that you defined the ComboBox with type String instead of your Gender enum.</p>\n<p>Assuming your gender enum class is called <code>Gender</code>, this will work:</p>\n<pre><code>ComboBox&lt;Gender&gt; gender = new ComboBox&lt;Gender&gt;(&quot;Gender&quot;);\nBinder&lt;Student&gt; binder = new Binder&lt;Student&gt;(Student.class);\nbinder.bind(gender, Student::getGender, Student::setGender);\n</code></pre>\n<p>You can add an <code>ItemLabelGenerator</code> to the ComboBox to define how the selected Gender value should be displayed (and <code>Renderer</code>, which will control how the items in the dropdown will look). By default it will use <code>toString()</code> of the class, both for itemLabelGenerator and for renderer. But you could use the Renderer to build Vaadin Components for example if you want. see how it is done in the <a href=\"https://vaadin.com/docs/latest/components/combo-box#custom-item-presentation\" rel=\"nofollow noreferrer\">ComboBox documentation</a>).</p>\n<p>The selected value can only be displayed as a String. If you want to let it be displayed as a Vaadin Component instead, you could use a <code>Select</code> component instead. <a href=\"https://vaadin.com/docs/latest/components/select#custom-item-presentation\" rel=\"nofollow noreferrer\">Select documentation</a>.</p>\n"}],"owner":{"account_id":13080131,"reputation":2313,"user_id":9450946,"display_name":"recurseuntilfor"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1622,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":55395981,"answer_count":2,"score":1,"last_activity_date":1692947273,"creation_date":1553746146,"question_id":55390021,"body_markdown":"I&#39;am trying to convert vaadin 7 code to vaadin 8 code Instead of using BeanFieldGroup vaadin 8 docs uses Binder instead to bind form fields to a class. This does not seem to work for combo box&#39;s.\r\n\r\nI&#39;ve looked for a way to use converter which does not seem to be available for combo box. As used in binding data to form in the vaadin documentation  [here](https://vaadin.com/docs/v8/framework/datamodel/datamodel-forms.html)\r\n\r\nFor one field the converter worked:\r\n\r\n    binder.forField(age).withConverter(\r\n\t\t\t\t\t\tnew \r\n    StringToIntegerConverter(&quot;Must enter a number&quot;)).bind(\r\n\t\t\t\t\t\tStudent::getAge, \r\n    Student::setAge);\r\n\r\nBut for a combo box I&#39;am unsure how this will work.\r\n\r\n    ComboBox&lt;String&gt; gender = new ComboBox&lt;String&gt;(&quot;Gender&quot;);\r\n\r\n    Binder binder = new Binder&lt;Student&gt;(Student.class);\r\n\r\n    binder.bind(gender, Student::getGender, Student::setGender);\r\n\r\nWhich I know will not work is there a way to write a converter for a combo box or should another way be used altogether.","title":"Binding a combo box vaadin 8","body":"<p>I'am trying to convert vaadin 7 code to vaadin 8 code Instead of using BeanFieldGroup vaadin 8 docs uses Binder instead to bind form fields to a class. This does not seem to work for combo box's.</p>\n\n<p>I've looked for a way to use converter which does not seem to be available for combo box. As used in binding data to form in the vaadin documentation  <a href=\"https://vaadin.com/docs/v8/framework/datamodel/datamodel-forms.html\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>For one field the converter worked:</p>\n\n<pre><code>binder.forField(age).withConverter(\n                    new \nStringToIntegerConverter(\"Must enter a number\")).bind(\n                    Student::getAge, \nStudent::setAge);\n</code></pre>\n\n<p>But for a combo box I'am unsure how this will work.</p>\n\n<pre><code>ComboBox&lt;String&gt; gender = new ComboBox&lt;String&gt;(\"Gender\");\n\nBinder binder = new Binder&lt;Student&gt;(Student.class);\n\nbinder.bind(gender, Student::getGender, Student::setGender);\n</code></pre>\n\n<p>Which I know will not work is there a way to write a converter for a combo box or should another way be used altogether.</p>\n"},{"tags":["java","android","xml","kotlin"],"answers":[{"tags":[],"owner":{"account_id":22432165,"reputation":1234,"user_id":16637863,"display_name":"Pawan Harariya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692945787,"creation_date":1692905016,"answer_id":76972398,"question_id":76970683,"body_markdown":"I faced this issue some time back. Although I am not sure what causes it, but it is because of transparent fragment background. So add a background color to the root view of all your fragments.\r\n\r\nAdd ` android:background=&quot;#fff&quot;` to root view as given below. You can use whatever color suits your design.\r\n\r\nSet `clickable` attribute of the second fragment&#39;s root view to true. Then the event will not be passed to the first fragment.\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:id=&quot;@+id/nav_host_fragment_container&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:background=&quot;#fff&quot;\r\n    android:clickable=&quot;true&quot;     \r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.ui.dashboard.Detail1Fragment&quot;&gt;\r\n\r\n&lt;/FrameLayout&gt;\r\n```\r\n","title":"Prevent overlapping after screen transition?","body":"<p>I faced this issue some time back. Although I am not sure what causes it, but it is because of transparent fragment background. So add a background color to the root view of all your fragments.</p>\n<p>Add <code> android:background=&quot;#fff&quot;</code> to root view as given below. You can use whatever color suits your design.</p>\n<p>Set <code>clickable</code> attribute of the second fragment's root view to true. Then the event will not be passed to the first fragment.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:id=&quot;@+id/nav_host_fragment_container&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:background=&quot;#fff&quot;\n    android:clickable=&quot;true&quot;     \n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.ui.dashboard.Detail1Fragment&quot;&gt;\n\n&lt;/FrameLayout&gt;\n</code></pre>\n"}],"owner":{"account_id":29284773,"reputation":13,"user_id":22436636,"display_name":"karimori 00"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76972398,"answer_count":1,"score":1,"last_activity_date":1692945787,"creation_date":1692889886,"question_id":76970683,"body_markdown":"# Premise\r\nDuring implementing screen transition from ListView to other fragment, the bug overlapping ListView and the fragment occur.\r\n\r\n1. I selected Bottom Navigation View Activity template.\r\n\r\n2. added ListView to dashboard\r\n\r\n# Issue\r\nTwo elements overlay on same screen like following screenshot.\r\n\r\nAfter transition\r\n[After Transition](https://i.stack.imgur.com/J4x1a.png)\r\n\r\n# Source Code\r\n\r\nMainActivity.kt\r\n\r\n```\r\npackage com.example.guitercodeapp3\r\n\r\n//omit &#39;import&#39;\r\n\r\nclass MainActivity : AppCompatActivity() {\r\n\r\n    private lateinit var binding: ActivityMainBinding\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n\r\n        binding = ActivityMainBinding.inflate(layoutInflater)\r\n        setContentView(binding.root)\r\n\r\n        val navView: BottomNavigationView = binding.navView\r\n\r\n        val navController = findNavController(R.id.nav_host_fragment_activity_main)\r\n        val appBarConfiguration = AppBarConfiguration(\r\n            setOf(\r\n                R.id.navigation_home, R.id.navigation_dashboard, R.id.navigation_notifications\r\n            )\r\n        )\r\n        setupActionBarWithNavController(navController, appBarConfiguration)\r\n        navView.setupWithNavController(navController)\r\n    }\r\n\r\n    internal fun openDetailFragment(selectedItem: String,lyrics: String){\r\n        val fragment = Detail1Fragment.newInstance(selectedItem ,lyrics)\r\n        supportFragmentManager.beginTransaction().replace(androidx.navigation.fragment.R.id.nav_host_fragment_container, fragment).addToBackStack(null).commit()\r\n    }\r\n}\r\n```\r\n\r\nDashboardFragment.kt\r\n\r\n```\r\npackage com.example.guitercodeapp3.ui.dashboard\r\n\r\n//omit &#39;import&#39;\r\n\r\nclass DashboardFragment : Fragment() {\r\n\r\n    private var _binding: FragmentDashboardBinding? = null\r\n\r\n    private val binding get() = _binding!!\r\n\r\n    override fun onCreateView(\r\n        inflater: LayoutInflater,\r\n        container: ViewGroup?,\r\n        savedInstanceState: Bundle?\r\n    ): View? {\r\n\r\n        _binding = FragmentDashboardBinding.inflate(inflater, container, false)\r\n        val rootView: View = _binding!!.root\r\n\r\n        val listView: ListView = binding.listView\r\n        val items = resources.getStringArray(R.array.list_song)\r\n        val adapter = ArrayAdapter(requireContext(),android.R.layout.simple_list_item_1,items)\r\n        listView.adapter = adapter\r\n\r\n        val dashboardViewModel =\r\n            ViewModelProvider(this).get(DashboardViewModel::class.java)\r\n\r\n        //val rootView = inflater.inflate(R.layout.fragment_dashboard,container,false)\r\n\r\n\r\n        listView.setOnItemClickListener { parent, view, position, id -&gt;\r\n            val selectedItem = items[position]\r\n            val lyrics = resources.getStringArray(R.array.list_lyrics)[position]\r\n            val activity = requireActivity() as MainActivity\r\n            activity.openDetailFragment(selectedItem, lyrics)\r\n            val detail1Fragment = Detail1Fragment.newInstance(selectedItem, lyrics)\r\n\r\n            requireActivity().supportFragmentManager.beginTransaction().replace(R.id.nav_host_fragment_container,detail1Fragment).addToBackStack(null).commit()\r\n            Toast.makeText(requireContext(), &quot;$selectedItem が選択されました&quot;, Toast.LENGTH_SHORT)\r\n                .show()\r\n        }\r\n\r\n\r\n\r\n        val textView: TextView = binding.textDashboard\r\n        dashboardViewModel.text.observe(viewLifecycleOwner) {\r\n            textView.text = it\r\n        }\r\n        return rootView\r\n    }\r\n\r\n    override fun onDestroyView() {\r\n        super.onDestroyView()\r\n        _binding = null\r\n    }\r\n}\r\n```\r\n\r\nDetail1Fragment.kt\r\n\r\n```\r\npackage com.example.guitercodeapp3.ui.dashboard\r\n\r\n//omit &#39;import&#39;\r\n\r\nclass Detail1Fragment : Fragment() {\r\n\r\n    companion object {\r\n        private const val ARG_SELECTED_ITEM = &quot;selected_item&quot;\r\n        private const val ARG_LYRICS = &quot;lyrics&quot;\r\n\r\n        fun newInstance(selectedItem: String, lyrics: String):Detail1Fragment{\r\n            val fragment = Detail1Fragment()\r\n            val args = Bundle()\r\n            args.putString(ARG_SELECTED_ITEM, selectedItem)\r\n            args.putString(ARG_LYRICS,lyrics)\r\n            fragment.arguments = args\r\n            return fragment\r\n        }\r\n    }\r\n\r\n\r\n    @SuppressLint(&quot;MissingInflatedId&quot;)\r\n    override fun onCreateView(\r\n        inflater: LayoutInflater, container: ViewGroup?,\r\n        savedInstanceState: Bundle?\r\n    ): View? {\r\n\r\n\r\n        val rootView = inflater.inflate(R.layout.fragment_detail1,container,false)\r\n        val textViewDetail = rootView.findViewById&lt;TextView&gt;(R.id.textViewDetail)\r\n\r\n\r\n        arguments?.let{\r\n            val selectedItem = it.getString(ARG_SELECTED_ITEM)\r\n            val lyrics = it.getString(ARG_LYRICS)\r\n            textViewDetail.text = &quot;$selectedItem\\n\\n$lyrics&quot;\r\n        }\r\n\r\n\r\n        return rootView\r\n    }\r\n\r\n}\r\n```\r\n\r\nfragment_dashboard.xml\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.ui.dashboard.DashboardFragment&quot;&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/text_dashboard&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_marginStart=&quot;8dp&quot;\r\n        android:layout_marginTop=&quot;8dp&quot;\r\n        android:layout_marginEnd=&quot;8dp&quot;\r\n        android:textAlignment=&quot;center&quot;\r\n        android:textSize=&quot;20sp&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintHorizontal_bias=&quot;0.0&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n        app:layout_constraintVertical_bias=&quot;0.6&quot; /&gt;\r\n\r\n    &lt;ListView\r\n        android:id=&quot;@+id/listView&quot;\r\n        android:layout_width=&quot;0dp&quot;\r\n        android:layout_height=&quot;0dp&quot;\r\n        android:entries=&quot;@array/list_song&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintLeft_toLeftOf=&quot;parent&quot;\r\n        app:layout_constraintRight_toRightOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;/&gt;\r\n\r\n    &lt;FrameLayout\r\n        android:id=&quot;@+id/nav_host_fragment_container&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:name=&quot;androidx.navigation.fragment.NavHostFragment&quot;\r\n\r\n        app:navGraph=&quot;@navigation/mobile_navigation&quot;\r\n        app:layout_constraintTop_toBottomOf=&quot;@+id/text_dashboard&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:defaultNavHost=&quot;true&quot;/&gt;\r\n\r\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n```\r\n\r\nfragment_detail1.xml\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:id=&quot;@+id/nav_host_fragment_container&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.ui.dashboard.Detail1Fragment&quot;&gt;\r\n\r\n    &lt;!-- TODO: Update blank fragment layout --&gt;\r\n    &lt;TextView\r\n        android:id=&quot;@+id/textViewDetail&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:text=&quot;@string/hello_blank_fragment&quot; /&gt;\r\n\r\n&lt;/FrameLayout&gt;\r\n```\r\n\r\nstrings.xml\r\n\r\n```\r\n&lt;resources&gt;\r\n    &lt;string name=&quot;app_name&quot;&gt;GuiterCodeApp3&lt;/string&gt;\r\n    &lt;string name=&quot;title_home&quot;&gt;Home&lt;/string&gt;\r\n    &lt;string name=&quot;title_dashboard&quot;&gt;Dashboard&lt;/string&gt;\r\n    &lt;string name=&quot;title_notifications&quot;&gt;Notifications&lt;/string&gt;\r\n    &lt;string name=&quot;list_animal&quot; /&gt;\r\n\r\n    &lt;string-array name=&quot;list_song&quot;&gt;\r\n        &lt;item&gt;Imagine&lt;/item&gt;\r\n        &lt;item&gt;Shape of you&lt;/item&gt;\r\n        &lt;item&gt;Whatever&lt;/item&gt;\r\n    &lt;/string-array&gt;\r\n\r\n    &lt;string-array name=&quot;list_lyrics&quot;&gt;\r\n        &lt;item&gt;Lyrics of Imagine&lt;/item&gt;\r\n        &lt;item&gt;Lyrics of Shape of you&lt;/item&gt;\r\n        &lt;item&gt;Lyrics of Whatever&lt;/item&gt;\r\n    &lt;/string-array&gt;\r\n\r\n    &lt;!-- TODO: Remove or change this placeholder text --&gt;\r\n    &lt;string name=&quot;hello_blank_fragment&quot;&gt;Hello blank fragment&lt;/string&gt;\r\n\r\n&lt;/resources&gt;\r\n```\r\n\r\n# Supplementary information\r\nAndroid Studio Giraffe | 2022.3.1\r\n\r\n# What I tried\r\nI make sure id,name,entries,and navGraph in xml files.\r\n\r\nI tried changing the IDs in the `listView.setOnItemClickListener` section of DashboardFragment.kt,\r\nbut there were no progress.","title":"Prevent overlapping after screen transition?","body":"<h1>Premise</h1>\n<p>During implementing screen transition from ListView to other fragment, the bug overlapping ListView and the fragment occur.</p>\n<ol>\n<li><p>I selected Bottom Navigation View Activity template.</p>\n</li>\n<li><p>added ListView to dashboard</p>\n</li>\n</ol>\n<h1>Issue</h1>\n<p>Two elements overlay on same screen like following screenshot.</p>\n<p>After transition\n<a href=\"https://i.stack.imgur.com/J4x1a.png\" rel=\"nofollow noreferrer\">After Transition</a></p>\n<h1>Source Code</h1>\n<p>MainActivity.kt</p>\n<pre><code>package com.example.guitercodeapp3\n\n//omit 'import'\n\nclass MainActivity : AppCompatActivity() {\n\n    private lateinit var binding: ActivityMainBinding\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n\n        binding = ActivityMainBinding.inflate(layoutInflater)\n        setContentView(binding.root)\n\n        val navView: BottomNavigationView = binding.navView\n\n        val navController = findNavController(R.id.nav_host_fragment_activity_main)\n        val appBarConfiguration = AppBarConfiguration(\n            setOf(\n                R.id.navigation_home, R.id.navigation_dashboard, R.id.navigation_notifications\n            )\n        )\n        setupActionBarWithNavController(navController, appBarConfiguration)\n        navView.setupWithNavController(navController)\n    }\n\n    internal fun openDetailFragment(selectedItem: String,lyrics: String){\n        val fragment = Detail1Fragment.newInstance(selectedItem ,lyrics)\n        supportFragmentManager.beginTransaction().replace(androidx.navigation.fragment.R.id.nav_host_fragment_container, fragment).addToBackStack(null).commit()\n    }\n}\n</code></pre>\n<p>DashboardFragment.kt</p>\n<pre><code>package com.example.guitercodeapp3.ui.dashboard\n\n//omit 'import'\n\nclass DashboardFragment : Fragment() {\n\n    private var _binding: FragmentDashboardBinding? = null\n\n    private val binding get() = _binding!!\n\n    override fun onCreateView(\n        inflater: LayoutInflater,\n        container: ViewGroup?,\n        savedInstanceState: Bundle?\n    ): View? {\n\n        _binding = FragmentDashboardBinding.inflate(inflater, container, false)\n        val rootView: View = _binding!!.root\n\n        val listView: ListView = binding.listView\n        val items = resources.getStringArray(R.array.list_song)\n        val adapter = ArrayAdapter(requireContext(),android.R.layout.simple_list_item_1,items)\n        listView.adapter = adapter\n\n        val dashboardViewModel =\n            ViewModelProvider(this).get(DashboardViewModel::class.java)\n\n        //val rootView = inflater.inflate(R.layout.fragment_dashboard,container,false)\n\n\n        listView.setOnItemClickListener { parent, view, position, id -&gt;\n            val selectedItem = items[position]\n            val lyrics = resources.getStringArray(R.array.list_lyrics)[position]\n            val activity = requireActivity() as MainActivity\n            activity.openDetailFragment(selectedItem, lyrics)\n            val detail1Fragment = Detail1Fragment.newInstance(selectedItem, lyrics)\n\n            requireActivity().supportFragmentManager.beginTransaction().replace(R.id.nav_host_fragment_container,detail1Fragment).addToBackStack(null).commit()\n            Toast.makeText(requireContext(), &quot;$selectedItem が選択されました&quot;, Toast.LENGTH_SHORT)\n                .show()\n        }\n\n\n\n        val textView: TextView = binding.textDashboard\n        dashboardViewModel.text.observe(viewLifecycleOwner) {\n            textView.text = it\n        }\n        return rootView\n    }\n\n    override fun onDestroyView() {\n        super.onDestroyView()\n        _binding = null\n    }\n}\n</code></pre>\n<p>Detail1Fragment.kt</p>\n<pre><code>package com.example.guitercodeapp3.ui.dashboard\n\n//omit 'import'\n\nclass Detail1Fragment : Fragment() {\n\n    companion object {\n        private const val ARG_SELECTED_ITEM = &quot;selected_item&quot;\n        private const val ARG_LYRICS = &quot;lyrics&quot;\n\n        fun newInstance(selectedItem: String, lyrics: String):Detail1Fragment{\n            val fragment = Detail1Fragment()\n            val args = Bundle()\n            args.putString(ARG_SELECTED_ITEM, selectedItem)\n            args.putString(ARG_LYRICS,lyrics)\n            fragment.arguments = args\n            return fragment\n        }\n    }\n\n\n    @SuppressLint(&quot;MissingInflatedId&quot;)\n    override fun onCreateView(\n        inflater: LayoutInflater, container: ViewGroup?,\n        savedInstanceState: Bundle?\n    ): View? {\n\n\n        val rootView = inflater.inflate(R.layout.fragment_detail1,container,false)\n        val textViewDetail = rootView.findViewById&lt;TextView&gt;(R.id.textViewDetail)\n\n\n        arguments?.let{\n            val selectedItem = it.getString(ARG_SELECTED_ITEM)\n            val lyrics = it.getString(ARG_LYRICS)\n            textViewDetail.text = &quot;$selectedItem\\n\\n$lyrics&quot;\n        }\n\n\n        return rootView\n    }\n\n}\n</code></pre>\n<p>fragment_dashboard.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.ui.dashboard.DashboardFragment&quot;&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/text_dashboard&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_marginStart=&quot;8dp&quot;\n        android:layout_marginTop=&quot;8dp&quot;\n        android:layout_marginEnd=&quot;8dp&quot;\n        android:textAlignment=&quot;center&quot;\n        android:textSize=&quot;20sp&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.0&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:layout_constraintVertical_bias=&quot;0.6&quot; /&gt;\n\n    &lt;ListView\n        android:id=&quot;@+id/listView&quot;\n        android:layout_width=&quot;0dp&quot;\n        android:layout_height=&quot;0dp&quot;\n        android:entries=&quot;@array/list_song&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintLeft_toLeftOf=&quot;parent&quot;\n        app:layout_constraintRight_toRightOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;/&gt;\n\n    &lt;FrameLayout\n        android:id=&quot;@+id/nav_host_fragment_container&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:name=&quot;androidx.navigation.fragment.NavHostFragment&quot;\n\n        app:navGraph=&quot;@navigation/mobile_navigation&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@+id/text_dashboard&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:defaultNavHost=&quot;true&quot;/&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>fragment_detail1.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:id=&quot;@+id/nav_host_fragment_container&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.ui.dashboard.Detail1Fragment&quot;&gt;\n\n    &lt;!-- TODO: Update blank fragment layout --&gt;\n    &lt;TextView\n        android:id=&quot;@+id/textViewDetail&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:text=&quot;@string/hello_blank_fragment&quot; /&gt;\n\n&lt;/FrameLayout&gt;\n</code></pre>\n<p>strings.xml</p>\n<pre><code>&lt;resources&gt;\n    &lt;string name=&quot;app_name&quot;&gt;GuiterCodeApp3&lt;/string&gt;\n    &lt;string name=&quot;title_home&quot;&gt;Home&lt;/string&gt;\n    &lt;string name=&quot;title_dashboard&quot;&gt;Dashboard&lt;/string&gt;\n    &lt;string name=&quot;title_notifications&quot;&gt;Notifications&lt;/string&gt;\n    &lt;string name=&quot;list_animal&quot; /&gt;\n\n    &lt;string-array name=&quot;list_song&quot;&gt;\n        &lt;item&gt;Imagine&lt;/item&gt;\n        &lt;item&gt;Shape of you&lt;/item&gt;\n        &lt;item&gt;Whatever&lt;/item&gt;\n    &lt;/string-array&gt;\n\n    &lt;string-array name=&quot;list_lyrics&quot;&gt;\n        &lt;item&gt;Lyrics of Imagine&lt;/item&gt;\n        &lt;item&gt;Lyrics of Shape of you&lt;/item&gt;\n        &lt;item&gt;Lyrics of Whatever&lt;/item&gt;\n    &lt;/string-array&gt;\n\n    &lt;!-- TODO: Remove or change this placeholder text --&gt;\n    &lt;string name=&quot;hello_blank_fragment&quot;&gt;Hello blank fragment&lt;/string&gt;\n\n&lt;/resources&gt;\n</code></pre>\n<h1>Supplementary information</h1>\n<p>Android Studio Giraffe | 2022.3.1</p>\n<h1>What I tried</h1>\n<p>I make sure id,name,entries,and navGraph in xml files.</p>\n<p>I tried changing the IDs in the <code>listView.setOnItemClickListener</code> section of DashboardFragment.kt,\nbut there were no progress.</p>\n"},{"tags":["java","jfreechart","gantt-chart"],"comments":[{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1692467836,"post_id":76936344,"comment_id":135628520,"body_markdown":"Why are you replacing the chart factory&#39;s renderer? What happens if you use the existing renderer and enable `tooltips`? You can customize it like [this](https://stackoverflow.com/a/15241250/230513) or substitute your own factory.","body":"Why are you replacing the chart factory&#39;s renderer? What happens if you use the existing renderer and enable <code>tooltips</code>? You can customize it like <a href=\"https://stackoverflow.com/a/15241250/230513\">this</a> or substitute your own factory."},{"owner":{"account_id":12593361,"reputation":427,"user_id":9159094,"display_name":"NECben067"},"score":0,"creation_date":1692475293,"post_id":76936344,"comment_id":135629272,"body_markdown":"At the beginning I did this for my custom labels, but I think I can just set them by plot.getRenderer() right?\nThe example you sended me is confusing me. What are the parameters I need to insert in the MyTooltipGenerator Constructor? I want to show the parameters that are in my list?","body":"At the beginning I did this for my custom labels, but I think I can just set them by plot.getRenderer() right? The example you sended me is confusing me. What are the parameters I need to insert in the MyTooltipGenerator Constructor? I want to show the parameters that are in my list?"},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1692485243,"post_id":76936344,"comment_id":135630171,"body_markdown":"The example I cited shows`MyToolTipGenerator`,  a subclass of `IntervalCategoryToolTipGenerator`; your implementation of `generateToolTip()` should return your list. If this is unclear, please [edit] your question to include a [mre] that shows your revised approach; as I lack you database, please feel free to use the example cited.","body":"The example I cited shows<code>MyToolTipGenerator</code>,  a subclass of <code>IntervalCategoryToolTipGenerator</code>; your implementation of <code>generateToolTip()</code> should return your list. If this is unclear, please <a href=\"https://stackoverflow.com/posts/76936344/edit\">edit</a> your question to include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that shows your revised approach; as I lack you database, please feel free to use the example cited."},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1692548476,"post_id":76936344,"comment_id":135635450,"body_markdown":"Also consider extending `IntervalCategoryDataset` in a manner similar to `JDBCCategoryDataset`; you can then leverage the message format described [here](https://stackoverflow.com/a/42052500/230513) in your own implementation of the `IntervalCategoryToolTipGenerator` method, `createItemArray()`.","body":"Also consider extending <code>IntervalCategoryDataset</code> in a manner similar to <code>JDBCCategoryDataset</code>; you can then leverage the message format described <a href=\"https://stackoverflow.com/a/42052500/230513\">here</a> in your own implementation of the <code>IntervalCategoryToolTipGenerator</code> method, <code>createItemArray()</code>."},{"owner":{"account_id":12593361,"reputation":427,"user_id":9159094,"display_name":"NECben067"},"score":0,"creation_date":1692680961,"post_id":76936344,"comment_id":135653159,"body_markdown":"@trashgod I included now minimal reproducable code. I tried the example you sended me but again couldn&#39;t get it to work. I think I am missing something. I removed the new renderer and tried to set Tooltip as you suggested with MyToolTip but it did&#39;nt show anything. In this reproducable example I set the things back so it is reproducable.","body":"@trashgod I included now minimal reproducable code. I tried the example you sended me but again couldn&#39;t get it to work. I think I am missing something. I removed the new renderer and tried to set Tooltip as you suggested with MyToolTip but it did&#39;nt show anything. In this reproducable example I set the things back so it is reproducable."},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1692741128,"post_id":76936344,"comment_id":135665321,"body_markdown":"I don&#39;t see where you invoke `setBaseToolTipGenerator()`.","body":"I don&#39;t see where you invoke <code>setBaseToolTipGenerator()</code>."},{"owner":{"account_id":12593361,"reputation":427,"user_id":9159094,"display_name":"NECben067"},"score":0,"creation_date":1692765043,"post_id":76936344,"comment_id":135667240,"body_markdown":"@trashgod I removed it again so I could provide a working application. I used the setBaseTooltipGenerator as the example.\n\nI removed the new renderer completely and put the line &#39;plot.getRenderer().setBaseToolTipGenerator(\n            new MyToolTipGenerator(\n            &quot;{0}, {1}: &quot;, DateFormat.getTimeInstance(DateFormat.SHORT)));&#39; and put it directly under the other plot commands","body":"@trashgod I removed it again so I could provide a working application. I used the setBaseTooltipGenerator as the example.  I removed the new renderer completely and put the line &#39;plot.getRenderer().setBaseToolTipGenerator(             new MyToolTipGenerator(             &quot;{0}, {1}: &quot;, DateFormat.getTimeInstance(DateFormat.SHORT)));&#39; and put it directly under the other plot commands"},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1692810035,"post_id":76936344,"comment_id":135675935,"body_markdown":"That _sounds_ right, but I can only guess; please [edit] your question to include a [mre] that shows your revised approach and focuses on tooltip rendering; note that neither I nor other readers have your database, so you&#39;ll need to mock that aspect; as `generateToolTip` and `generateLabel`, it may help to factor that into a separate method.","body":"That <i>sounds</i> right, but I can only guess; please <a href=\"https://stackoverflow.com/posts/76936344/edit\">edit</a> your question to include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that shows your revised approach and focuses on tooltip rendering; note that neither I nor other readers have your database, so you&#39;ll need to mock that aspect; as <code>generateToolTip</code> and <code>generateLabel</code>, it may help to factor that into a separate method."},{"owner":{"account_id":12593361,"reputation":427,"user_id":9159094,"display_name":"NECben067"},"score":0,"creation_date":1692945232,"post_id":76936344,"comment_id":135696113,"body_markdown":"@trashgod the code should already be reproducable since I exchanged the database with an arrayList so feel free to try it out. I also added the &#39;setTooltipGenerator()&#39; part.\nI really don&#39;t know what to do in order for it to work. I tried many things now but it doesn&#39;t show any tooltip...","body":"@trashgod the code should already be reproducable since I exchanged the database with an arrayList so feel free to try it out. I also added the &#39;setTooltipGenerator()&#39; part. I really don&#39;t know what to do in order for it to work. I tried many things now but it doesn&#39;t show any tooltip..."},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1693004216,"post_id":76936344,"comment_id":135707411,"body_markdown":"Sorry it&#39;s not working; I urge you to study the problem is isolation using the [mre] I previously cited, seen [here](https://stackoverflow.com/a/15241250/230513); verify that you understand how it works, and adapt it to your use. Sadly, your 300+ lines of code in _not_ minimal; one frame should be sufficient; due to spurious imports, I still cannot run it; but I&#39;ll examine it, and any updates you make, as time permits.","body":"Sorry it&#39;s not working; I urge you to study the problem is isolation using the <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> I previously cited, seen <a href=\"https://stackoverflow.com/a/15241250/230513\">here</a>; verify that you understand how it works, and adapt it to your use. Sadly, your 300+ lines of code in <i>not</i> minimal; one frame should be sufficient; due to spurious imports, I still cannot run it; but I&#39;ll examine it, and any updates you make, as time permits."},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1693049950,"post_id":76936344,"comment_id":135710461,"body_markdown":"If you later move to a current release of [tag:jfreechart], see the migration guide cited [here](https://stackoverflow.com/a/70398420/230513).","body":"If you later move to a current release of <a href=\"https://stackoverflow.com/questions/tagged/jfreechart\">jfreechart</a>, see the migration guide cited <a href=\"https://stackoverflow.com/a/70398420/230513\">here</a>."}],"owner":{"account_id":12593361,"reputation":427,"user_id":9159094,"display_name":"NECben067"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692945190,"creation_date":1692466774,"question_id":76936344,"body_markdown":"I am new to JFreeChart, and I don&#39;t understand how all the classes work together yet. I am trying to create a Gantt chart with custom labels and custom tooltip. The custom labels work (though I don&#39;t think I did it the proper clean way), but I don&#39;t get the custom tooltip to work.\r\n\r\nAfter pressing on a button in another panel I send the required data (a date) I get from the database to the class that generates the gantt chart. With the date I got as a variable I get all the information for this date from the database and put it in the gantt chart.\r\n\r\nThis is how my gantt chart looks right now:\r\n[![enter image description here][1]][1]\r\n\r\nmy main class looks like that:\r\n\r\n    import java.awt.*;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n    import java.sql.Connection;\r\n    import java.util.Calendar;\r\n    import javax.swing.*;\r\n\r\n    import info.clearthought.layout.TableLayout;\r\n    import org.jfree.chart.ChartFactory;\r\n    import org.jfree.chart.ChartPanel;\r\n    import org.jfree.chart.JFreeChart;\r\n    import org.jfree.data.category.IntervalCategoryDataset;\r\n    import org.jfree.data.gantt.Task;\r\n    import org.jfree.data.gantt.TaskSeries;\r\n    import org.jfree.data.gantt.TaskSeriesCollection;\r\n\r\n    public class Schichtplanner extends JFrame {\r\n        private static final long serialVersionUID = 1L;\r\n        double busX[] = new double[]{SchichtplannerConstants.GUI_BORDER, 250, TableLayout.FILL, TableLayout.FILL};\r\n        double busY[] = new double[]{SchichtplannerConstants.GUI_BORDER, 35, SchichtplannerConstants.DISTANCE_BUTTONS, 35, SchichtplannerConstants.DISTANCE_BUTTONS, 35, SchichtplannerConstants.DISTANCE_BUTTONS, 35};\r\n\r\n        public static void main(String[] args) {\r\n            EventQueue.invokeLater(new Runnable() {\r\n                public void run() {\r\n                    //System.setProperty(&quot;https.protocols&quot;, &quot;TLSv1&quot;);\r\n                    try {\r\n                        Schichtplanner frame = new Schichtplanner();\r\n                        frame.setVisible(true);\r\n                    } catch (Exception e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        public Schichtplanner() {\r\n            //JFrame frame = new JFrame(&quot;Schichtplanner&quot;);\r\n            this.setTitle(&quot;Schichtplanungs-App&quot;);\r\n            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            setExtendedState(JFrame.MAXIMIZED_BOTH);\r\n\r\n            JPanel panelMain = new JPanel();\r\n            add(panelMain);\r\n\r\n            panelMain.setLayout(new TableLayout(new double[][]{busX, busY}));\r\n\r\n            JButton buttonMitarbeiterVerwalten = new JButton(&quot;Mitarbeiter verwalten&quot;);\r\n            panelMain.add(buttonMitarbeiterVerwalten, &quot;1,1,1,1&quot;); // Adds Button to content pane of frame\r\n            buttonMitarbeiterVerwalten.addActionListener( new ActionListener()\r\n            {\r\n                public void actionPerformed(ActionEvent e)\r\n                {\r\n                    //MitarbeiterVerwalten mitarbeiterVerwaltenFrame = new MitarbeiterVerwalten();\r\n                }\r\n            });\r\n\r\n            JButton buttonAuftragVerwalten = new JButton(&quot;Auftrag verwalten&quot;);\r\n            panelMain.add(buttonAuftragVerwalten, &quot;1,3,1,3&quot;); // Adds Button to content pane of frame\r\n            buttonAuftragVerwalten.addActionListener( new ActionListener()\r\n            {\r\n                public void actionPerformed(ActionEvent e)\r\n                {\r\n                    //AuftragVerwalten auftragVerwaltenFrame = new AuftragVerwalten();\r\n                }\r\n            });\r\n\r\n            JButton buttonSucheAuftrag = new JButton(&quot;Auftrag suchen&quot;);\r\n            panelMain.add(buttonSucheAuftrag, &quot;1,5,1,5&quot;); // Adds Button to content pane of frame\r\n\r\n            JButton buttonKalenderAnsicht = new JButton(&quot;Kalenderansicht&quot;);\r\n            panelMain.add(buttonKalenderAnsicht, &quot;1,7,1,7&quot;); // Adds Button to content pane of frame\r\n            buttonKalenderAnsicht.addActionListener( new ActionListener()\r\n            {\r\n                public void actionPerformed(ActionEvent e)\r\n                {\r\n                    try {\r\n                        Auftrags&#220;bersicht auftrags&#220;bersicht = new Auftrags&#220;bersicht(&quot;2023-08-17&quot;);\r\n                    } catch (ParseException ex) {\r\n                        ex.printStackTrace();\r\n                    }\r\n                }\r\n            });\r\n\r\n            setVisible(true);\r\n            panelMain.setVisible(true);\r\n        }\r\n    }  \r\n\r\nAnd my gantt chart class is like that:\r\n\r\n    import com.github.lgooddatepicker.components.DatePicker;\r\n    import info.clearthought.layout.TableLayout;\r\n    import org.jfree.chart.ChartFactory;\r\n    import org.jfree.chart.ChartPanel;\r\n    import org.jfree.chart.JFreeChart;\r\n    import org.jfree.chart.block.BlockBorder;\r\n    import org.jfree.chart.labels.*;\r\n    import org.jfree.chart.plot.CategoryPlot;\r\n    import org.jfree.chart.renderer.category.CategoryItemRenderer;\r\n    import org.jfree.chart.renderer.category.StandardBarPainter;\r\n    import org.jfree.data.category.CategoryDataset;\r\n    import org.jfree.data.category.IntervalCategoryDataset;\r\n    import org.jfree.data.gantt.Task;\r\n    import org.jfree.data.gantt.TaskSeries;\r\n    import org.jfree.data.gantt.TaskSeriesCollection;\r\n    import org.jfree.ui.RectangleInsets;\r\n    import org.jfree.ui.TextAnchor;\r\n\r\n    import javax.swing.*;\r\n    import java.awt.*;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n    import java.sql.*;\r\n    import java.text.DateFormat;\r\n    import java.text.ParseException;\r\n    import java.text.SimpleDateFormat;\r\n    import java.time.format.DateTimeFormatter;\r\n    import java.util.*;\r\n    import java.util.List;\r\n\r\n    import org.jfree.chart.renderer.category.StandardBarPainter;\r\n\r\n    public class Auftrags&#220;bersicht extends JFrame {\r\n\r\n    private ArrayList&lt;Calendar&gt; auftragsBeginn, auftragsEnde;\r\n    private ArrayList&lt;String&gt; auftragsAdresse, auftragsPLZ, mitarbeiterVorname, mitarbeiterNachname;\r\n    private ArrayList&lt;Integer&gt; liegenschaftsnummer;\r\n\r\n    public Auftrags&#220;bersicht(String date) throws ParseException {\r\n        double busX[] = new double[]{SchichtplannerConstants.GUI_BORDER, 250, TableLayout.FILL, TableLayout.FILL, SchichtplannerConstants.GUI_BORDER};\r\n        double busY[] = new double[]{SchichtplannerConstants.GUI_BORDER, 35, 40, 35, SchichtplannerConstants.DISTANCE_BUTTONS, 35, 35, SchichtplannerConstants.DISTANCE_BUTTONS, 35, 35};\r\n        auftragsBeginn = new ArrayList&lt;&gt;();\r\n        auftragsEnde = new ArrayList&lt;&gt;();\r\n        auftragsAdresse = new ArrayList&lt;&gt;();\r\n        auftragsPLZ = new ArrayList&lt;&gt;();\r\n        mitarbeiterVorname = new ArrayList&lt;&gt;();\r\n        mitarbeiterNachname = new ArrayList&lt;&gt;();\r\n        liegenschaftsnummer = new ArrayList&lt;&gt;();\r\n\r\n        this.setTitle(&quot;Tages&#252;bersicht Auftr&#228;ge&quot;);\r\n        Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();\r\n        this.setSize(screenSize.width, screenSize.height);\r\n        setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\r\n\r\n        try\r\n        {\r\n            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        /********************************/\r\n        // Create dataset\r\n        IntervalCategoryDataset dataset = getCategoryDataset(date);\r\n\r\n        // Create chart\r\n        JFreeChart chart = ChartFactory.createGanttChart(date, &quot;Mitarbeiter&quot;, &quot;Zeitachse&quot;, dataset, false, true, false);\r\n        chart.setBackgroundPaint(Color.white);\r\n\r\n        //chart.setBorderVisible(false);\r\n        CategoryPlot plot = (CategoryPlot) chart.getPlot();\r\n        plot.setDomainGridlinePaint(Color.white);\r\n        plot.setOutlinePaint(Color.white);\r\n        plot.setBackgroundPaint(Color.white);\r\n        //plot.setOutlineVisible(false);\r\n\r\n        plot.getRenderer().setBaseToolTipGenerator( new MyToolTipGenerator( &quot;{0}, {1}: &quot;, DateFormat.getTimeInstance(DateFormat.SHORT)));\r\n\r\n        ChartPanel panel = new ChartPanel(chart);\r\n        setContentPane(panel);\r\n        setVisible(true);\r\n\r\n        /*******************************/\r\n        setResizable(false);\r\n    }\r\n\r\n    private IntervalCategoryDataset getCategoryDataset(String date) throws ParseException {\r\n        date = date + &quot; 00:00:00.00000&quot;;\r\n        Timestamp timestamp = Timestamp.valueOf(date);\r\n        Timestamp timestamp2 = addDays(timestamp,1);\r\n\r\n        /*try {\r\n            Connection connection = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3307/schichtplanung&quot;, &quot;root&quot;, &quot;admin&quot;);\r\n\r\n            PreparedStatement st = (PreparedStatement) connection.prepareStatement(&quot;SELECT schichtplanung.auftrag.auftragsbeginn, schichtplanung.auftrag.auftragsende, schichtplanung.auftrag.auftragsadresse, schichtplanung.auftrag.auftragsplz, schichtplanung.auftrag.liegenschaftsnummer, schichtplanung.mitarbeiter.vorname, schichtplanung.mitarbeiter.nachname FROM schichtplanung.auftrag INNER JOIN schichtplanung.mitarbeiter ON schichtplanung.auftrag.mitarbeiterid=schichtplanung.mitarbeiter.mitarbeiterid WHERE schichtplanung.auftrag.auftragsbeginn &gt;= ? AND schichtplanung.auftrag.auftragsbeginn &lt; ?&quot;);\r\n            st.setTimestamp(1, timestamp);\r\n            st.setTimestamp(2, timestamp2);\r\n            ResultSet rs = st.executeQuery();\r\n            while (rs.next()) {\r\n                Calendar calendar1 = Calendar.getInstance();\r\n                calendar1.setTimeInMillis(rs.getTimestamp(1).getTime());\r\n                getAuftragsBeginnList().add(calendar1);\r\n\r\n                Calendar calendar2 = Calendar.getInstance();\r\n                calendar2.setTimeInMillis(rs.getTimestamp(2).getTime());\r\n                getAuftragsEndeList().add(calendar2);\r\n\r\n                getAuftragsAdresseList().add(rs.getString(3));\r\n                getAuftragsPLZList().add(rs.getString(4));\r\n                getLiegenschaftsnummerList().add(rs.getInt(5));\r\n                getMitarbeiterVornameList().add(rs.getString(6));\r\n                getMitarbeiterNachnameList().add(rs.getString(7));\r\n            }\r\n            rs.close();\r\n            st.close();\r\n        } catch (SQLException sqlException) {\r\n            sqlException.printStackTrace();\r\n        }*/\r\n\r\n        Calendar cal = Calendar.getInstance();\r\n        SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n        cal.setTime(sdf.parse(&quot;2023-08-17 07:30:00&quot;));// all done\r\n        auftragsBeginn.add(cal);\r\n\r\n        Calendar cal1 = Calendar.getInstance();\r\n        SimpleDateFormat sdf1 = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n        cal1.setTime(sdf1.parse(&quot;2023-08-17 15:30:00&quot;));// all done\r\n        auftragsEnde.add(cal1);\r\n\r\n        auftragsAdresse.add(&quot;Ohmstra&#223;e 32&quot;);\r\n        auftragsPLZ.add(&quot;45711&quot;);\r\n        liegenschaftsnummer.add(1);\r\n        mitarbeiterVorname.add(&quot;Michael&quot;);\r\n        mitarbeiterNachname.add(&quot;Thompson&quot;);\r\n\r\n        Calendar cal2 = Calendar.getInstance();\r\n        SimpleDateFormat sdf2 = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n        cal2.setTime(sdf2.parse(&quot;2023-08-17 09:00:00&quot;));// all done\r\n        auftragsBeginn.add(cal2);\r\n\r\n        Calendar cal3 = Calendar.getInstance();\r\n        SimpleDateFormat sdf3 = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n        cal3.setTime(sdf3.parse(&quot;2023-08-17 16:30:00&quot;));// all done\r\n        auftragsEnde.add(cal3);\r\n\r\n        auftragsAdresse.add(&quot;Fegestra&#223;e 5&quot;);\r\n        auftragsPLZ.add(&quot;44623&quot;);\r\n        liegenschaftsnummer.add(2);\r\n        mitarbeiterVorname.add(&quot;Hasan&quot;);\r\n        mitarbeiterNachname.add(&quot;Sekici&quot;);\r\n\r\n        Calendar cal4 = Calendar.getInstance();\r\n        SimpleDateFormat sdf4 = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n        cal4.setTime(sdf4.parse(&quot;2023-08-17 08:00:00&quot;));// all done\r\n        auftragsBeginn.add(cal4);\r\n\r\n        Calendar cal5 = Calendar.getInstance();\r\n        SimpleDateFormat sdf5 = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n        cal5.setTime(sdf5.parse(&quot;2023-08-17 17:30:00&quot;));// all done\r\n        auftragsEnde.add(cal5);\r\n\r\n        auftragsAdresse.add(&quot;Sambaweg 10&quot;);\r\n        auftragsPLZ.add(&quot;44141&quot;);\r\n        liegenschaftsnummer.add(3);\r\n        mitarbeiterVorname.add(&quot;Jon&quot;);\r\n        mitarbeiterNachname.add(&quot;Schnee&quot;);\r\n\r\n        TaskSeries series1 = new TaskSeries(&quot;Auftr&#228;ge&quot;);\r\n        for (int i = 0; i &lt; auftragsAdresse.size(); i++) {\r\n            series1.add(new Task(getMitarbeiterVornameList().get(i) + &quot; &quot; + getMitarbeiterNachnameList().get(i), getAuftragsBeginnList().get(i).getTime(), getAuftragsEndeList().get(i).getTime()));\r\n            System.out.println(getMitarbeiterVornameList().get(i) + &quot; &quot; + getMitarbeiterNachnameList().get(i) + &quot; BeginnZeit: &quot; + getAuftragsBeginnList().get(i).getTime() + &quot; EndeZeit: &quot; + getAuftragsEndeList().get(i).getTime());\r\n        }\r\n\r\n        TaskSeriesCollection dataset = new TaskSeriesCollection();\r\n        dataset.add(series1);\r\n        return dataset;\r\n    }\r\n\r\n    public ArrayList&lt;Calendar&gt; getAuftragsBeginnList() {\r\n        return auftragsBeginn;\r\n    }\r\n\r\n    public ArrayList&lt;Calendar&gt; getAuftragsEndeList() {\r\n        return auftragsEnde;\r\n    }\r\n\r\n    public ArrayList&lt;String&gt; getAuftragsAdresseList() {\r\n        return auftragsAdresse;\r\n    }\r\n\r\n    public ArrayList&lt;String&gt; getAuftragsPLZList() {\r\n        return auftragsPLZ;\r\n    }\r\n\r\n    public ArrayList&lt;String&gt; getMitarbeiterVornameList() {\r\n        return mitarbeiterVorname;\r\n    }\r\n\r\n    public ArrayList&lt;String&gt; getMitarbeiterNachnameList() {\r\n        return mitarbeiterNachname;\r\n    }\r\n\r\n    public ArrayList&lt;Integer&gt; getLiegenschaftsnummerList() {\r\n        return liegenschaftsnummer;\r\n    }\r\n\r\n    public Timestamp addDays(Timestamp date, int days) {\r\n        Calendar cal = Calendar.getInstance();\r\n        cal.setTime(date);// w ww.  j ava  2  s  .co m\r\n        cal.add(Calendar.DATE, days); //minus number would decrement the days\r\n        return new Timestamp(cal.getTime().getTime());\r\n\r\n    }\r\n    }\r\n\r\n    class MyToolTipGenerator extends IntervalCategoryToolTipGenerator {\r\n\r\n    DateFormat format;\r\n\r\n    public MyToolTipGenerator(String value, DateFormat format) {\r\n        super(value, format);\r\n        this.format = format;\r\n    }\r\n\r\n    @Override\r\n    public String generateToolTip(CategoryDataset cds, int row, int col) {\r\n        final String s = super.generateToolTip(cds, row, col);\r\n        TaskSeriesCollection tsc = (TaskSeriesCollection) cds;\r\n        StringBuilder sb = new StringBuilder(s);\r\n        for (int i = 0; i &lt; tsc.getSubIntervalCount(row, col); i++) {\r\n            sb.append(format.format(tsc.getStartValue(row, col, i)));\r\n            sb.append(&quot;-&quot;);\r\n            sb.append(format.format(tsc.getEndValue(row, col, i)));\r\n            sb.append(&quot;,&quot;);\r\n        }\r\n        sb.deleteCharAt(sb.length() - 1);\r\n        return sb.toString();\r\n    }\r\n    }\r\n\r\n\r\nI already tried some of the examples and solutions that were posted here but neither of them worked. Since I get several data from the db and store them all in an ArrayList, I want to show the specific related begin and end time (`getAuftragsBeginnList` and `getAuftragsEndeList`) in relation to the hovered datapoint. \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/kJOSF.png","title":"Custom tooltip for JFreeChart Gantt chart in Java","body":"<p>I am new to JFreeChart, and I don't understand how all the classes work together yet. I am trying to create a Gantt chart with custom labels and custom tooltip. The custom labels work (though I don't think I did it the proper clean way), but I don't get the custom tooltip to work.</p>\n<p>After pressing on a button in another panel I send the required data (a date) I get from the database to the class that generates the gantt chart. With the date I got as a variable I get all the information for this date from the database and put it in the gantt chart.</p>\n<p>This is how my gantt chart looks right now:\n<a href=\"https://i.stack.imgur.com/kJOSF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kJOSF.png\" alt=\"enter image description here\" /></a></p>\n<p>my main class looks like that:</p>\n<pre><code>import java.awt.*;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.sql.Connection;\nimport java.util.Calendar;\nimport javax.swing.*;\n\nimport info.clearthought.layout.TableLayout;\nimport org.jfree.chart.ChartFactory;\nimport org.jfree.chart.ChartPanel;\nimport org.jfree.chart.JFreeChart;\nimport org.jfree.data.category.IntervalCategoryDataset;\nimport org.jfree.data.gantt.Task;\nimport org.jfree.data.gantt.TaskSeries;\nimport org.jfree.data.gantt.TaskSeriesCollection;\n\npublic class Schichtplanner extends JFrame {\n    private static final long serialVersionUID = 1L;\n    double busX[] = new double[]{SchichtplannerConstants.GUI_BORDER, 250, TableLayout.FILL, TableLayout.FILL};\n    double busY[] = new double[]{SchichtplannerConstants.GUI_BORDER, 35, SchichtplannerConstants.DISTANCE_BUTTONS, 35, SchichtplannerConstants.DISTANCE_BUTTONS, 35, SchichtplannerConstants.DISTANCE_BUTTONS, 35};\n\n    public static void main(String[] args) {\n        EventQueue.invokeLater(new Runnable() {\n            public void run() {\n                //System.setProperty(&quot;https.protocols&quot;, &quot;TLSv1&quot;);\n                try {\n                    Schichtplanner frame = new Schichtplanner();\n                    frame.setVisible(true);\n                } catch (Exception e) {\n                    e.printStackTrace();\n                }\n            }\n        });\n    }\n\n    public Schichtplanner() {\n        //JFrame frame = new JFrame(&quot;Schichtplanner&quot;);\n        this.setTitle(&quot;Schichtplanungs-App&quot;);\n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        setExtendedState(JFrame.MAXIMIZED_BOTH);\n\n        JPanel panelMain = new JPanel();\n        add(panelMain);\n\n        panelMain.setLayout(new TableLayout(new double[][]{busX, busY}));\n\n        JButton buttonMitarbeiterVerwalten = new JButton(&quot;Mitarbeiter verwalten&quot;);\n        panelMain.add(buttonMitarbeiterVerwalten, &quot;1,1,1,1&quot;); // Adds Button to content pane of frame\n        buttonMitarbeiterVerwalten.addActionListener( new ActionListener()\n        {\n            public void actionPerformed(ActionEvent e)\n            {\n                //MitarbeiterVerwalten mitarbeiterVerwaltenFrame = new MitarbeiterVerwalten();\n            }\n        });\n\n        JButton buttonAuftragVerwalten = new JButton(&quot;Auftrag verwalten&quot;);\n        panelMain.add(buttonAuftragVerwalten, &quot;1,3,1,3&quot;); // Adds Button to content pane of frame\n        buttonAuftragVerwalten.addActionListener( new ActionListener()\n        {\n            public void actionPerformed(ActionEvent e)\n            {\n                //AuftragVerwalten auftragVerwaltenFrame = new AuftragVerwalten();\n            }\n        });\n\n        JButton buttonSucheAuftrag = new JButton(&quot;Auftrag suchen&quot;);\n        panelMain.add(buttonSucheAuftrag, &quot;1,5,1,5&quot;); // Adds Button to content pane of frame\n\n        JButton buttonKalenderAnsicht = new JButton(&quot;Kalenderansicht&quot;);\n        panelMain.add(buttonKalenderAnsicht, &quot;1,7,1,7&quot;); // Adds Button to content pane of frame\n        buttonKalenderAnsicht.addActionListener( new ActionListener()\n        {\n            public void actionPerformed(ActionEvent e)\n            {\n                try {\n                    AuftragsÜbersicht auftragsÜbersicht = new AuftragsÜbersicht(&quot;2023-08-17&quot;);\n                } catch (ParseException ex) {\n                    ex.printStackTrace();\n                }\n            }\n        });\n\n        setVisible(true);\n        panelMain.setVisible(true);\n    }\n}  \n</code></pre>\n<p>And my gantt chart class is like that:</p>\n<pre><code>import com.github.lgooddatepicker.components.DatePicker;\nimport info.clearthought.layout.TableLayout;\nimport org.jfree.chart.ChartFactory;\nimport org.jfree.chart.ChartPanel;\nimport org.jfree.chart.JFreeChart;\nimport org.jfree.chart.block.BlockBorder;\nimport org.jfree.chart.labels.*;\nimport org.jfree.chart.plot.CategoryPlot;\nimport org.jfree.chart.renderer.category.CategoryItemRenderer;\nimport org.jfree.chart.renderer.category.StandardBarPainter;\nimport org.jfree.data.category.CategoryDataset;\nimport org.jfree.data.category.IntervalCategoryDataset;\nimport org.jfree.data.gantt.Task;\nimport org.jfree.data.gantt.TaskSeries;\nimport org.jfree.data.gantt.TaskSeriesCollection;\nimport org.jfree.ui.RectangleInsets;\nimport org.jfree.ui.TextAnchor;\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.sql.*;\nimport java.text.DateFormat;\nimport java.text.ParseException;\nimport java.text.SimpleDateFormat;\nimport java.time.format.DateTimeFormatter;\nimport java.util.*;\nimport java.util.List;\n\nimport org.jfree.chart.renderer.category.StandardBarPainter;\n\npublic class AuftragsÜbersicht extends JFrame {\n\nprivate ArrayList&lt;Calendar&gt; auftragsBeginn, auftragsEnde;\nprivate ArrayList&lt;String&gt; auftragsAdresse, auftragsPLZ, mitarbeiterVorname, mitarbeiterNachname;\nprivate ArrayList&lt;Integer&gt; liegenschaftsnummer;\n\npublic AuftragsÜbersicht(String date) throws ParseException {\n    double busX[] = new double[]{SchichtplannerConstants.GUI_BORDER, 250, TableLayout.FILL, TableLayout.FILL, SchichtplannerConstants.GUI_BORDER};\n    double busY[] = new double[]{SchichtplannerConstants.GUI_BORDER, 35, 40, 35, SchichtplannerConstants.DISTANCE_BUTTONS, 35, 35, SchichtplannerConstants.DISTANCE_BUTTONS, 35, 35};\n    auftragsBeginn = new ArrayList&lt;&gt;();\n    auftragsEnde = new ArrayList&lt;&gt;();\n    auftragsAdresse = new ArrayList&lt;&gt;();\n    auftragsPLZ = new ArrayList&lt;&gt;();\n    mitarbeiterVorname = new ArrayList&lt;&gt;();\n    mitarbeiterNachname = new ArrayList&lt;&gt;();\n    liegenschaftsnummer = new ArrayList&lt;&gt;();\n\n    this.setTitle(&quot;Tagesübersicht Aufträge&quot;);\n    Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();\n    this.setSize(screenSize.width, screenSize.height);\n    setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\n\n    try\n    {\n        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n\n    /********************************/\n    // Create dataset\n    IntervalCategoryDataset dataset = getCategoryDataset(date);\n\n    // Create chart\n    JFreeChart chart = ChartFactory.createGanttChart(date, &quot;Mitarbeiter&quot;, &quot;Zeitachse&quot;, dataset, false, true, false);\n    chart.setBackgroundPaint(Color.white);\n\n    //chart.setBorderVisible(false);\n    CategoryPlot plot = (CategoryPlot) chart.getPlot();\n    plot.setDomainGridlinePaint(Color.white);\n    plot.setOutlinePaint(Color.white);\n    plot.setBackgroundPaint(Color.white);\n    //plot.setOutlineVisible(false);\n\n    plot.getRenderer().setBaseToolTipGenerator( new MyToolTipGenerator( &quot;{0}, {1}: &quot;, DateFormat.getTimeInstance(DateFormat.SHORT)));\n\n    ChartPanel panel = new ChartPanel(chart);\n    setContentPane(panel);\n    setVisible(true);\n\n    /*******************************/\n    setResizable(false);\n}\n\nprivate IntervalCategoryDataset getCategoryDataset(String date) throws ParseException {\n    date = date + &quot; 00:00:00.00000&quot;;\n    Timestamp timestamp = Timestamp.valueOf(date);\n    Timestamp timestamp2 = addDays(timestamp,1);\n\n    /*try {\n        Connection connection = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3307/schichtplanung&quot;, &quot;root&quot;, &quot;admin&quot;);\n\n        PreparedStatement st = (PreparedStatement) connection.prepareStatement(&quot;SELECT schichtplanung.auftrag.auftragsbeginn, schichtplanung.auftrag.auftragsende, schichtplanung.auftrag.auftragsadresse, schichtplanung.auftrag.auftragsplz, schichtplanung.auftrag.liegenschaftsnummer, schichtplanung.mitarbeiter.vorname, schichtplanung.mitarbeiter.nachname FROM schichtplanung.auftrag INNER JOIN schichtplanung.mitarbeiter ON schichtplanung.auftrag.mitarbeiterid=schichtplanung.mitarbeiter.mitarbeiterid WHERE schichtplanung.auftrag.auftragsbeginn &gt;= ? AND schichtplanung.auftrag.auftragsbeginn &lt; ?&quot;);\n        st.setTimestamp(1, timestamp);\n        st.setTimestamp(2, timestamp2);\n        ResultSet rs = st.executeQuery();\n        while (rs.next()) {\n            Calendar calendar1 = Calendar.getInstance();\n            calendar1.setTimeInMillis(rs.getTimestamp(1).getTime());\n            getAuftragsBeginnList().add(calendar1);\n\n            Calendar calendar2 = Calendar.getInstance();\n            calendar2.setTimeInMillis(rs.getTimestamp(2).getTime());\n            getAuftragsEndeList().add(calendar2);\n\n            getAuftragsAdresseList().add(rs.getString(3));\n            getAuftragsPLZList().add(rs.getString(4));\n            getLiegenschaftsnummerList().add(rs.getInt(5));\n            getMitarbeiterVornameList().add(rs.getString(6));\n            getMitarbeiterNachnameList().add(rs.getString(7));\n        }\n        rs.close();\n        st.close();\n    } catch (SQLException sqlException) {\n        sqlException.printStackTrace();\n    }*/\n\n    Calendar cal = Calendar.getInstance();\n    SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\n    cal.setTime(sdf.parse(&quot;2023-08-17 07:30:00&quot;));// all done\n    auftragsBeginn.add(cal);\n\n    Calendar cal1 = Calendar.getInstance();\n    SimpleDateFormat sdf1 = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\n    cal1.setTime(sdf1.parse(&quot;2023-08-17 15:30:00&quot;));// all done\n    auftragsEnde.add(cal1);\n\n    auftragsAdresse.add(&quot;Ohmstraße 32&quot;);\n    auftragsPLZ.add(&quot;45711&quot;);\n    liegenschaftsnummer.add(1);\n    mitarbeiterVorname.add(&quot;Michael&quot;);\n    mitarbeiterNachname.add(&quot;Thompson&quot;);\n\n    Calendar cal2 = Calendar.getInstance();\n    SimpleDateFormat sdf2 = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\n    cal2.setTime(sdf2.parse(&quot;2023-08-17 09:00:00&quot;));// all done\n    auftragsBeginn.add(cal2);\n\n    Calendar cal3 = Calendar.getInstance();\n    SimpleDateFormat sdf3 = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\n    cal3.setTime(sdf3.parse(&quot;2023-08-17 16:30:00&quot;));// all done\n    auftragsEnde.add(cal3);\n\n    auftragsAdresse.add(&quot;Fegestraße 5&quot;);\n    auftragsPLZ.add(&quot;44623&quot;);\n    liegenschaftsnummer.add(2);\n    mitarbeiterVorname.add(&quot;Hasan&quot;);\n    mitarbeiterNachname.add(&quot;Sekici&quot;);\n\n    Calendar cal4 = Calendar.getInstance();\n    SimpleDateFormat sdf4 = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\n    cal4.setTime(sdf4.parse(&quot;2023-08-17 08:00:00&quot;));// all done\n    auftragsBeginn.add(cal4);\n\n    Calendar cal5 = Calendar.getInstance();\n    SimpleDateFormat sdf5 = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\n    cal5.setTime(sdf5.parse(&quot;2023-08-17 17:30:00&quot;));// all done\n    auftragsEnde.add(cal5);\n\n    auftragsAdresse.add(&quot;Sambaweg 10&quot;);\n    auftragsPLZ.add(&quot;44141&quot;);\n    liegenschaftsnummer.add(3);\n    mitarbeiterVorname.add(&quot;Jon&quot;);\n    mitarbeiterNachname.add(&quot;Schnee&quot;);\n\n    TaskSeries series1 = new TaskSeries(&quot;Aufträge&quot;);\n    for (int i = 0; i &lt; auftragsAdresse.size(); i++) {\n        series1.add(new Task(getMitarbeiterVornameList().get(i) + &quot; &quot; + getMitarbeiterNachnameList().get(i), getAuftragsBeginnList().get(i).getTime(), getAuftragsEndeList().get(i).getTime()));\n        System.out.println(getMitarbeiterVornameList().get(i) + &quot; &quot; + getMitarbeiterNachnameList().get(i) + &quot; BeginnZeit: &quot; + getAuftragsBeginnList().get(i).getTime() + &quot; EndeZeit: &quot; + getAuftragsEndeList().get(i).getTime());\n    }\n\n    TaskSeriesCollection dataset = new TaskSeriesCollection();\n    dataset.add(series1);\n    return dataset;\n}\n\npublic ArrayList&lt;Calendar&gt; getAuftragsBeginnList() {\n    return auftragsBeginn;\n}\n\npublic ArrayList&lt;Calendar&gt; getAuftragsEndeList() {\n    return auftragsEnde;\n}\n\npublic ArrayList&lt;String&gt; getAuftragsAdresseList() {\n    return auftragsAdresse;\n}\n\npublic ArrayList&lt;String&gt; getAuftragsPLZList() {\n    return auftragsPLZ;\n}\n\npublic ArrayList&lt;String&gt; getMitarbeiterVornameList() {\n    return mitarbeiterVorname;\n}\n\npublic ArrayList&lt;String&gt; getMitarbeiterNachnameList() {\n    return mitarbeiterNachname;\n}\n\npublic ArrayList&lt;Integer&gt; getLiegenschaftsnummerList() {\n    return liegenschaftsnummer;\n}\n\npublic Timestamp addDays(Timestamp date, int days) {\n    Calendar cal = Calendar.getInstance();\n    cal.setTime(date);// w ww.  j ava  2  s  .co m\n    cal.add(Calendar.DATE, days); //minus number would decrement the days\n    return new Timestamp(cal.getTime().getTime());\n\n}\n}\n\nclass MyToolTipGenerator extends IntervalCategoryToolTipGenerator {\n\nDateFormat format;\n\npublic MyToolTipGenerator(String value, DateFormat format) {\n    super(value, format);\n    this.format = format;\n}\n\n@Override\npublic String generateToolTip(CategoryDataset cds, int row, int col) {\n    final String s = super.generateToolTip(cds, row, col);\n    TaskSeriesCollection tsc = (TaskSeriesCollection) cds;\n    StringBuilder sb = new StringBuilder(s);\n    for (int i = 0; i &lt; tsc.getSubIntervalCount(row, col); i++) {\n        sb.append(format.format(tsc.getStartValue(row, col, i)));\n        sb.append(&quot;-&quot;);\n        sb.append(format.format(tsc.getEndValue(row, col, i)));\n        sb.append(&quot;,&quot;);\n    }\n    sb.deleteCharAt(sb.length() - 1);\n    return sb.toString();\n}\n}\n</code></pre>\n<p>I already tried some of the examples and solutions that were posted here but neither of them worked. Since I get several data from the db and store them all in an ArrayList, I want to show the specific related begin and end time (<code>getAuftragsBeginnList</code> and <code>getAuftragsEndeList</code>) in relation to the hovered datapoint.</p>\n"},{"tags":["java","spring","eclipse","maven","updating"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1675877000,"post_id":75389017,"comment_id":133023982,"body_markdown":"First why do you have a maven plugin as a dependency? Not correct. Remove the dependency to the maven-war-plugin.... Also it would help to post the log output? Have you tried to run on plain command line? And how you called Maven? Have you started from within Eclipse? If so try to run on plain command line...","body":"First why do you have a maven plugin as a dependency? Not correct. Remove the dependency to the maven-war-plugin.... Also it would help to post the log output? Have you tried to run on plain command line? And how you called Maven? Have you started from within Eclipse? If so try to run on plain command line..."},{"owner":{"account_id":22694314,"reputation":11,"user_id":16862744,"display_name":"Kazan"},"score":0,"creation_date":1675932818,"post_id":75389017,"comment_id":133035183,"body_markdown":"Thank you very much! I am following an on line course on Udemy and the teacher does this (dependency + plugin) to avoid the initial error on the pom.xml file. I am new on Maven and Spring, so I do not know so much about it. Anyway, I have no output, once I add the dependency and the plugins, when I save, Eclipse stuck at 75 while upgrading the Maven project and I cannot do anything!","body":"Thank you very much! I am following an on line course on Udemy and the teacher does this (dependency + plugin) to avoid the initial error on the pom.xml file. I am new on Maven and Spring, so I do not know so much about it. Anyway, I have no output, once I add the dependency and the plugins, when I save, Eclipse stuck at 75 while upgrading the Maven project and I cannot do anything!"},{"owner":{"account_id":22694314,"reputation":11,"user_id":16862744,"display_name":"Kazan"},"score":0,"creation_date":1675933282,"post_id":75389017,"comment_id":133035303,"body_markdown":"Editing: I am trying deleting the dependency, and for now it seems working.","body":"Editing: I am trying deleting the dependency, and for now it seems working."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1675953914,"post_id":75389017,"comment_id":133042017,"body_markdown":"Build the project for the first time outside of Eclipse (plain command line)...afterwards import it into Eclipse...","body":"Build the project for the first time outside of Eclipse (plain command line)...afterwards import it into Eclipse..."}],"answers":[{"tags":[],"owner":{"account_id":256647,"reputation":611,"user_id":537515,"accept_rate":65,"display_name":"Kalyan Raju"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691011816,"creation_date":1691011816,"answer_id":76823659,"question_id":75389017,"body_markdown":"Try changing this m2e setting: Preferences &gt; Maven &gt; Annotation Processing &gt; Do not automatically configure/execute annotation processing from pom.xml fixed the issue in my case","title":"Updating Maven Project does not move from 75","body":"<p>Try changing this m2e setting: Preferences &gt; Maven &gt; Annotation Processing &gt; Do not automatically configure/execute annotation processing from pom.xml fixed the issue in my case</p>\n"},{"tags":[],"owner":{"account_id":10031770,"reputation":527,"user_id":7417998,"display_name":"Suresh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692945072,"creation_date":1692945072,"answer_id":76974768,"question_id":75389017,"body_markdown":"Remove the errors sowing components from all pom.xml files in your IDE. Then clean the projects. Maven must update complete now.","title":"Updating Maven Project does not move from 75","body":"<p>Remove the errors sowing components from all pom.xml files in your IDE. Then clean the projects. Maven must update complete now.</p>\n"}],"owner":{"account_id":22694314,"reputation":11,"user_id":16862744,"display_name":"Kazan"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":753,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1692945072,"creation_date":1675874690,"question_id":75389017,"body_markdown":"I have this problem. I have just started a new Maven project and, after adding this code: \r\n\r\n```xml\r\n&lt;dependencies&gt;\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.apache.maven.plugins/maven-war-plugin --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.3.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.3.2&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n```\r\n\r\nThe project is freezed on &quot;Updating Maven Project 75&quot;, I am trying to search a solution, but no one is working. The funniest thing is I am following a course on line about Spring and it is just the first attempt to use Maven.\r\n\r\nTried to restart Eclipse, to delete and create a new project...","title":"Updating Maven Project does not move from 75","body":"<p>I have this problem. I have just started a new Maven project and, after adding this code:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependencies&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.apache.maven.plugins/maven-war-plugin --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.3.2&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.3.2&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n</code></pre>\n<p>The project is freezed on &quot;Updating Maven Project 75&quot;, I am trying to search a solution, but no one is working. The funniest thing is I am following a course on line about Spring and it is just the first attempt to use Maven.</p>\n<p>Tried to restart Eclipse, to delete and create a new project...</p>\n"},{"tags":["java","sqlite","listview","java-stream","changelistener"],"answers":[{"tags":[],"owner":{"account_id":17884207,"reputation":11,"user_id":12992252,"display_name":"McLutzifer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689946889,"creation_date":1689946889,"answer_id":76738531,"question_id":76737904,"body_markdown":"Not entirely sure if I understand the problem, but I ***guess*** that you can achieve what you want with adding dedicated listeners to headerZettel and textZettel respectively. And then it seems, since you are listening to header and text constantly you can get rid of `updateZettelInDatabase()` \r\nsomething like \r\n```\r\nheaderZettel.textProperty().addListener((observable, oldValue, newValue) -&gt; ...etc\r\n```\r\n\r\n... but I&#39;m new to Java as well so please be careful with my advice ","title":"How to display changes in the Textfield of an Object live in ListView?","body":"<p>Not entirely sure if I understand the problem, but I <em><strong>guess</strong></em> that you can achieve what you want with adding dedicated listeners to headerZettel and textZettel respectively. And then it seems, since you are listening to header and text constantly you can get rid of <code>updateZettelInDatabase()</code>\nsomething like</p>\n<pre><code>headerZettel.textProperty().addListener((observable, oldValue, newValue) -&gt; ...etc\n</code></pre>\n<p>... but I'm new to Java as well so please be careful with my advice</p>\n"},{"tags":[],"owner":{"account_id":27841518,"reputation":21,"user_id":21257897,"display_name":"cas edo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692945033,"creation_date":1692945033,"answer_id":76974765,"question_id":76737904,"body_markdown":"So i tried everything from refactoring the classes to use StringProperties instead of Strings, implementing other Updating-logic, and Binding the ListView and zettelData together and not overwriting the binding anywhere. Nothing worked. \r\nWhat helped in the end, was this line of code:\r\n\r\n```\r\nPlatform.runLater(() -&gt; zettelList.refresh());\r\n\r\n```\r\n\r\nint this method that saves the edits made on key tipped\r\n\r\n```\r\n @FXML\r\n    void saveOnChangeZettel(KeyEvent event){\r\n        if (currentZettelId != null) { // &#220;berpr&#252;fe, ob eine aktuelle ZettelId vorhanden ist\r\n            updateZettelInDatabase();\r\n            checkForBuzzwordsInCurrentZettel(currentZettelId);\r\n\r\n            Platform.runLater(() -&gt; zettelList.refresh());\r\n        }\r\n    }\r\n```","title":"How to display changes in the Textfield of an Object live in ListView?","body":"<p>So i tried everything from refactoring the classes to use StringProperties instead of Strings, implementing other Updating-logic, and Binding the ListView and zettelData together and not overwriting the binding anywhere. Nothing worked.\nWhat helped in the end, was this line of code:</p>\n<pre><code>Platform.runLater(() -&gt; zettelList.refresh());\n\n</code></pre>\n<p>int this method that saves the edits made on key tipped</p>\n<pre><code> @FXML\n    void saveOnChangeZettel(KeyEvent event){\n        if (currentZettelId != null) { // Überprüfe, ob eine aktuelle ZettelId vorhanden ist\n            updateZettelInDatabase();\n            checkForBuzzwordsInCurrentZettel(currentZettelId);\n\n            Platform.runLater(() -&gt; zettelList.refresh());\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":27841518,"reputation":21,"user_id":21257897,"display_name":"cas edo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1692945033,"creation_date":1689941636,"question_id":76737904,"body_markdown":"i am currently coding a small Zettelkasten-app* in Java and Building most of the GUI in scenebuilder. \r\n\r\n---\r\n\r\nFurther Description irrelevant for the Question, read italic parts only if interested: \r\n*(The app gives you the possibility of taking notes that are saved in an SQLite3 table and defining buzzwords along the way, which your other notes are then searched for, and you are handed a list of Zettel containing the same buzzwords. You can also group Zettel into collections)*\r\n\r\n---\r\n\r\nI have a ListView, that allows you to choose one of the Zettel, and its header and text are loaded into TextFields for editing. I want the ListView to display the changes in a Zettel live during typing (the text in the database is updated with every keystroke).\r\n\r\n\r\n\r\n\r\n\r\n With my current solution, the Thumb or Cell of the Zettel in the LV is only ever updated, when i click on another one.\r\n\r\nHere are my bits of code responsible for that functionality.\r\n\r\nController-Class:\r\n\r\n```\r\n//variables\r\n @FXML\r\n    public TextField headerZettel;\r\n\r\n    @FXML\r\n    public TextArea textZettel;\r\n@FXML\r\n    private ListView&lt;Zettel&gt; zettelList;\r\n    private ObservableList&lt;Zettel&gt; zettelData = FXCollections.observableArrayList();\r\n```\r\n\r\n\r\n```\r\n public void initializeZettelList() {\r\n        // get ZettelData from database and add to list\r\n        zettelList.setItems(zettelData);\r\n\r\n        //CellFactory for manipulation of the listcells\r\n        zettelList.setCellFactory(param -&gt; new ListCell&lt;&gt;() {\r\n            private final VBox vbRoot = new VBox();\r\n            private final Label lblHeader = new Label();\r\n            private final Label lblText = new Label();\r\n            private Zettel zettel;\r\n\r\n            {\r\n                lblHeader.setStyle(&quot;-fx-font-weight: bold;&quot;);\r\n                vbRoot.setSpacing(10);\r\n                vbRoot.getChildren().addAll(lblHeader, lblText);\r\n            }\r\n\r\n            @Override\r\n            protected void updateItem(Zettel z, boolean empty) {\r\n                super.updateItem(z, empty);\r\n\r\n                if (z != null &amp;&amp; !empty) {\r\n\r\n                    lblHeader.setText(z.getHeader());\r\n                    lblText.setText(z.getText().split(&quot;\\n&quot;)[0]);\r\n                    setGraphic(vbRoot);\r\n                    zettel = z; // Save the reference to the associated Zettel object\r\n                } else {\r\n                    setGraphic(null);\r\n                    zettel = null; // Clear the reference when the cell is empty\r\n                }\r\n            }\r\n        });\r\n        // ChangeListener to load and handle Zettel-Objects\r\n        zettelList.getSelectionModel().selectedItemProperty().addListener(new ChangeListener&lt;Zettel&gt;() {\r\n            @Override\r\n            public void changed(ObservableValue&lt;? extends Zettel&gt; observable, Zettel oldValue, Zettel newValue) {\r\n                if (newValue != null) {\r\n                    currentZettelId = newValue.getZettelId();\r\n                    headerZettel.setText(newValue.getHeader());\r\n                    textZettel.setText(newValue.getText());\r\n                } else {\r\n                    currentZettelId = null;\r\n                    headerZettel.clear();\r\n                    textZettel.clear();\r\n                }\r\n            }\r\n        });\r\n}\r\n```\r\nin here is the Stream with the ZettelData:\r\n\r\n```\r\npublic void updateZettelInDatabase() {\r\n        String header = getHeaderZettelText();\r\n        String text = getTextZettelText();\r\n        if (currentZettelId != null) {\r\n            Zettel zettelToUpdate = zettelData.stream()\r\n                    .filter(z -&gt; Arrays.equals(z.getZettelId(), currentZettelId))\r\n                    .findFirst()\r\n                    .orElse(null);\r\n\r\n            if (zettelToUpdate != null) {\r\n                zettelToUpdate.setHeader(header);\r\n                zettelToUpdate.setText(text);\r\n\r\n                //Update Zettel-Object in database\r\n                ZettelUpdater zettelUpdater = new ZettelUpdater();\r\n                zettelUpdater.updateZettel(header, text, currentZettelId);\r\n            } else {\r\n                System.out.println(&quot;Keine aktuelle ZettelId vorhanden.&quot;);\r\n            }\r\n\r\n        }\r\n    }\r\n```\r\n\r\nFrom the Database-Class:\r\n\r\n\r\n```\r\n public static ObservableList&lt;Zettel&gt; getZettelData(){\r\n        ObservableList&lt;Zettel&gt; zettelData = FXCollections.observableArrayList();\r\n\r\n        try (Connection conn = DriverManager.getConnection(connectionString);\r\n             PreparedStatement stmt = conn.prepareStatement(&quot;SELECT ZettelId, Header, Text, Date FROM zettel&quot;);\r\n             ResultSet rs = stmt.executeQuery()) {\r\n\r\n            DateTimeFormatter dateFormatter = DateTimeFormatter.ofPattern(&quot;dd.MM.yyyy&quot;);\r\n\r\n            while (rs.next()) {\r\n                byte[] zettelId = rs.getBytes(&quot;ZettelId&quot;);\r\n                String header = rs.getString(&quot;Header&quot;);\r\n                String text = rs.getString(&quot;Text&quot;);\r\n                String dateString = rs.getString(&quot;Date&quot;);\r\n\r\n\r\n                LocalDate date = LocalDate.parse(dateString, dateFormatter);\r\n\r\n                Zettel zettel = new Zettel();\r\n                zettel.setZettelId(zettelId);\r\n                zettel.setHeader(header);\r\n                zettel.setText(text);\r\n                zettel.setDate(date);\r\n\r\n                zettelData.add(zettel);\r\n            }\r\n        } catch (SQLException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        return zettelData;\r\n    }\r\n```\r\n\r\n[![this is how it looks](https://i.stack.imgur.com/Lnp0o.png)](https://i.stack.imgur.com/Lnp0o.png)\r\n\r\n Any hints or Ideas, how to make it work live?\r\n\r\nGenerally i am also very happy for all kinds of critique, as i am very new to java, and this is my first project to finish my course. :)\r\n\r\n\r\nThank you for your help, you&#39;re too kind.\r\n\r\nHerzl Ich","title":"How to display changes in the Textfield of an Object live in ListView?","body":"<p>i am currently coding a small Zettelkasten-app* in Java and Building most of the GUI in scenebuilder.</p>\n<hr />\n<p>Further Description irrelevant for the Question, read italic parts only if interested:\n<em>(The app gives you the possibility of taking notes that are saved in an SQLite3 table and defining buzzwords along the way, which your other notes are then searched for, and you are handed a list of Zettel containing the same buzzwords. You can also group Zettel into collections)</em></p>\n<hr />\n<p>I have a ListView, that allows you to choose one of the Zettel, and its header and text are loaded into TextFields for editing. I want the ListView to display the changes in a Zettel live during typing (the text in the database is updated with every keystroke).</p>\n<p>With my current solution, the Thumb or Cell of the Zettel in the LV is only ever updated, when i click on another one.</p>\n<p>Here are my bits of code responsible for that functionality.</p>\n<p>Controller-Class:</p>\n<pre><code>//variables\n @FXML\n    public TextField headerZettel;\n\n    @FXML\n    public TextArea textZettel;\n@FXML\n    private ListView&lt;Zettel&gt; zettelList;\n    private ObservableList&lt;Zettel&gt; zettelData = FXCollections.observableArrayList();\n</code></pre>\n<pre><code> public void initializeZettelList() {\n        // get ZettelData from database and add to list\n        zettelList.setItems(zettelData);\n\n        //CellFactory for manipulation of the listcells\n        zettelList.setCellFactory(param -&gt; new ListCell&lt;&gt;() {\n            private final VBox vbRoot = new VBox();\n            private final Label lblHeader = new Label();\n            private final Label lblText = new Label();\n            private Zettel zettel;\n\n            {\n                lblHeader.setStyle(&quot;-fx-font-weight: bold;&quot;);\n                vbRoot.setSpacing(10);\n                vbRoot.getChildren().addAll(lblHeader, lblText);\n            }\n\n            @Override\n            protected void updateItem(Zettel z, boolean empty) {\n                super.updateItem(z, empty);\n\n                if (z != null &amp;&amp; !empty) {\n\n                    lblHeader.setText(z.getHeader());\n                    lblText.setText(z.getText().split(&quot;\\n&quot;)[0]);\n                    setGraphic(vbRoot);\n                    zettel = z; // Save the reference to the associated Zettel object\n                } else {\n                    setGraphic(null);\n                    zettel = null; // Clear the reference when the cell is empty\n                }\n            }\n        });\n        // ChangeListener to load and handle Zettel-Objects\n        zettelList.getSelectionModel().selectedItemProperty().addListener(new ChangeListener&lt;Zettel&gt;() {\n            @Override\n            public void changed(ObservableValue&lt;? extends Zettel&gt; observable, Zettel oldValue, Zettel newValue) {\n                if (newValue != null) {\n                    currentZettelId = newValue.getZettelId();\n                    headerZettel.setText(newValue.getHeader());\n                    textZettel.setText(newValue.getText());\n                } else {\n                    currentZettelId = null;\n                    headerZettel.clear();\n                    textZettel.clear();\n                }\n            }\n        });\n}\n</code></pre>\n<p>in here is the Stream with the ZettelData:</p>\n<pre><code>public void updateZettelInDatabase() {\n        String header = getHeaderZettelText();\n        String text = getTextZettelText();\n        if (currentZettelId != null) {\n            Zettel zettelToUpdate = zettelData.stream()\n                    .filter(z -&gt; Arrays.equals(z.getZettelId(), currentZettelId))\n                    .findFirst()\n                    .orElse(null);\n\n            if (zettelToUpdate != null) {\n                zettelToUpdate.setHeader(header);\n                zettelToUpdate.setText(text);\n\n                //Update Zettel-Object in database\n                ZettelUpdater zettelUpdater = new ZettelUpdater();\n                zettelUpdater.updateZettel(header, text, currentZettelId);\n            } else {\n                System.out.println(&quot;Keine aktuelle ZettelId vorhanden.&quot;);\n            }\n\n        }\n    }\n</code></pre>\n<p>From the Database-Class:</p>\n<pre><code> public static ObservableList&lt;Zettel&gt; getZettelData(){\n        ObservableList&lt;Zettel&gt; zettelData = FXCollections.observableArrayList();\n\n        try (Connection conn = DriverManager.getConnection(connectionString);\n             PreparedStatement stmt = conn.prepareStatement(&quot;SELECT ZettelId, Header, Text, Date FROM zettel&quot;);\n             ResultSet rs = stmt.executeQuery()) {\n\n            DateTimeFormatter dateFormatter = DateTimeFormatter.ofPattern(&quot;dd.MM.yyyy&quot;);\n\n            while (rs.next()) {\n                byte[] zettelId = rs.getBytes(&quot;ZettelId&quot;);\n                String header = rs.getString(&quot;Header&quot;);\n                String text = rs.getString(&quot;Text&quot;);\n                String dateString = rs.getString(&quot;Date&quot;);\n\n\n                LocalDate date = LocalDate.parse(dateString, dateFormatter);\n\n                Zettel zettel = new Zettel();\n                zettel.setZettelId(zettelId);\n                zettel.setHeader(header);\n                zettel.setText(text);\n                zettel.setDate(date);\n\n                zettelData.add(zettel);\n            }\n        } catch (SQLException e) {\n            e.printStackTrace();\n        }\n\n        return zettelData;\n    }\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/Lnp0o.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Lnp0o.png\" alt=\"this is how it looks\" /></a></p>\n<p>Any hints or Ideas, how to make it work live?</p>\n<p>Generally i am also very happy for all kinds of critique, as i am very new to java, and this is my first project to finish my course. :)</p>\n<p>Thank you for your help, you're too kind.</p>\n<p>Herzl Ich</p>\n"},{"tags":["java","android","android-adapter","android-permissions"],"comments":[{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1499613150,"post_id":44997864,"comment_id":76969642,"body_markdown":"_&quot;context &#39;this&#39; shows as an error&quot;_ -- you must show us the error and indicate whether it&#39;s a compile error or runtime error.  For a runtime error you must include the complete stack trace.","body":"<i>&quot;context &#39;this&#39; shows as an error&quot;</i> -- you must show us the error and indicate whether it&#39;s a compile error or runtime error.  For a runtime error you must include the complete stack trace."},{"owner":{"account_id":3465438,"reputation":2658,"user_id":2901129,"accept_rate":100,"display_name":"Basil Battikhi"},"score":0,"creation_date":1499692003,"post_id":44997864,"comment_id":76999404,"body_markdown":"instead of using this use  MyClassName.this","body":"instead of using this use  MyClassName.this"},{"owner":{"account_id":8834602,"reputation":159,"user_id":6599395,"accept_rate":60,"display_name":"Chirag"},"score":0,"creation_date":1499693285,"post_id":44997864,"comment_id":77000393,"body_markdown":"+Basil Battikhi, I tried that. But it says that it isn&#39;t an enclosing class.","body":"+Basil Battikhi, I tried that. But it says that it isn&#39;t an enclosing class."}],"answers":[{"tags":[],"owner":{"account_id":8834602,"reputation":159,"user_id":6599395,"accept_rate":60,"display_name":"Chirag"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1499695931,"creation_date":1499693225,"answer_id":45013326,"question_id":44997864,"body_markdown":"I used `Activity act = (Activity)(holder.call.getContext());` to get the activity and then used act inside `Dexter.withActivity()`. None of the other solutions worked. I had to get the context through one of the views and then convert it into an activity as shown above.\r\n","title":"Requires permission before using this line of code even after i use the dexter library to specifically ask permissions","body":"<p>I used <code>Activity act = (Activity)(holder.call.getContext());</code> to get the activity and then used act inside <code>Dexter.withActivity()</code>. None of the other solutions worked. I had to get the context through one of the views and then convert it into an activity as shown above.</p>\n"},{"tags":[],"owner":{"account_id":22636080,"reputation":1151,"user_id":16812867,"display_name":"Rehan Khan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692944390,"creation_date":1692944390,"answer_id":76974701,"question_id":44997864,"body_markdown":"Instead of Using \r\n\r\n    Dexter.withActivity(this)\r\n\r\n \r\nuse \r\n\r\n    Dexter.withContext(this)","title":"Requires permission before using this line of code even after i use the dexter library to specifically ask permissions","body":"<p>Instead of Using</p>\n<pre><code>Dexter.withActivity(this)\n</code></pre>\n<p>use</p>\n<pre><code>Dexter.withContext(this)\n</code></pre>\n"}],"owner":{"account_id":8834602,"reputation":159,"user_id":6599395,"accept_rate":60,"display_name":"Chirag"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1295,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":45013326,"answer_count":2,"score":-1,"last_activity_date":1692944390,"creation_date":1499613000,"question_id":44997864,"body_markdown":"    @Override\r\n    public void onClick(View v) {\r\n        Dexter.withActivity(this)\r\n                .withPermission(Manifest.permission.CALL_PHONE)\r\n                .withListener(new PermissionListener() {\r\n                    @Override public void onPermissionGranted(PermissionGrantedResponse response) {\r\n                        Intent callIntent = new Intent(Intent.ACTION_CALL);\r\n                        callIntent.setData(Uri.parse(&quot;tel:123456789&quot;));\r\n\r\n\r\n                        mcontext.startActivity(callIntent);}\r\n                    @Override public void onPermissionDenied(PermissionDeniedResponse response) {/* ... */}\r\n                    @Override public void onPermissionRationaleShouldBeShown(PermissionRequest permission, PermissionToken token) {/* ... */}\r\n                }).check();\r\n    }\r\n\r\nThe context &#39;this&#39; shows as an error. And also the line of code that calls someone is still showing as an error even after i put it in the OnPermissionGranted() method. What should i change to make this work? \r\n\r\nThe link for the dexter library is given below:\r\n\r\nhttps://github.com/Karumi/Dexter","title":"Requires permission before using this line of code even after i use the dexter library to specifically ask permissions","body":"<pre><code>@Override\npublic void onClick(View v) {\n    Dexter.withActivity(this)\n            .withPermission(Manifest.permission.CALL_PHONE)\n            .withListener(new PermissionListener() {\n                @Override public void onPermissionGranted(PermissionGrantedResponse response) {\n                    Intent callIntent = new Intent(Intent.ACTION_CALL);\n                    callIntent.setData(Uri.parse(\"tel:123456789\"));\n\n\n                    mcontext.startActivity(callIntent);}\n                @Override public void onPermissionDenied(PermissionDeniedResponse response) {/* ... */}\n                @Override public void onPermissionRationaleShouldBeShown(PermissionRequest permission, PermissionToken token) {/* ... */}\n            }).check();\n}\n</code></pre>\n\n<p>The context 'this' shows as an error. And also the line of code that calls someone is still showing as an error even after i put it in the OnPermissionGranted() method. What should i change to make this work? </p>\n\n<p>The link for the dexter library is given below:</p>\n\n<p><a href=\"https://github.com/Karumi/Dexter\" rel=\"nofollow noreferrer\">https://github.com/Karumi/Dexter</a></p>\n"},{"tags":["java","angular","azure-active-directory","microsoft-graph-api","openid-connect"],"comments":[{"owner":{"account_id":14567510,"reputation":15827,"user_id":10521739,"display_name":"Allen Wu"},"score":1,"creation_date":1608522322,"post_id":65387189,"comment_id":115600995,"body_markdown":"Did you see this [example](https://learn.microsoft.com/en-us/azure/active-directory/develop/v2-oauth2-on-behalf-of-flow#example)? `&amp;assertion=eyJ0eXAiOiJKV*****` is the first token. You need to include it in the request to acquire the second access token.","body":"Did you see this <a href=\"https://learn.microsoft.com/en-us/azure/active-directory/develop/v2-oauth2-on-behalf-of-flow#example\" rel=\"nofollow noreferrer\">example</a>? <code>&amp;assertion=eyJ0eXAiOiJKV*****</code> is the first token. You need to include it in the request to acquire the second access token."},{"owner":{"account_id":7884308,"reputation":53,"user_id":5957010,"display_name":"nabeelh21"},"score":0,"creation_date":1608525202,"post_id":65387189,"comment_id":115601438,"body_markdown":"Sorry, I may be missing something. How exactly do I use that in Java?","body":"Sorry, I may be missing something. How exactly do I use that in Java?"},{"owner":{"account_id":14567510,"reputation":15827,"user_id":10521739,"display_name":"Allen Wu"},"score":1,"creation_date":1608532968,"post_id":65387189,"comment_id":115603073,"body_markdown":"See the sample code [here](https://learn.microsoft.com/en-us/azure/active-directory/develop/scenario-web-api-call-api-acquire-token?tabs=java): use `msalAuthHelper.getOboToken(&quot;https://graph.microsoft.com/.default&quot;)`. And I have provided you with a completed [Github sample](https://github.com/Azure-Samples/ms-identity-java-webapi) before. Is there any difficulty when you implement it?","body":"See the sample code <a href=\"https://learn.microsoft.com/en-us/azure/active-directory/develop/scenario-web-api-call-api-acquire-token?tabs=java\" rel=\"nofollow noreferrer\">here</a>: use <code>msalAuthHelper.getOboToken(&quot;https:&#47;&#47;graph.microsoft.com&#47;.def&zwnj;&#8203;ault&quot;)</code>. And I have provided you with a completed <a href=\"https://github.com/Azure-Samples/ms-identity-java-webapi\" rel=\"nofollow noreferrer\">Github sample</a> before. Is there any difficulty when you implement it?"}],"answers":[{"tags":[],"owner":{"account_id":12368896,"reputation":24701,"user_id":9019885,"display_name":"Gary Archer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1615062698,"creation_date":1608568759,"answer_id":65396625,"question_id":65387189,"body_markdown":"You would need to send 2 messages in your API:\r\n\r\n* Send your access token to the token endpoint, to get a graph access token\r\n* Send the graph access token to the user info endpoint\r\n\r\nI only have a sample in NodeJS, though the messages are quite simple, involving requests with form url encoded data, and JSON responses. So you should be able to do this fairly easily with any Java HTTP Client:\r\n\r\n* [Sample Code in NodeJS](https://github.com/gary-archer/oauth.websample.azure/blob/master/api/src/host/oauth/authenticator.ts#L137)\r\n* [Blog Post with Screenshots](https://authguidance.com/2017/12/01/azure-ad-spa-code-sample#getuserinfo)\r\n\r\nAllen&#39;s samples should demonstrate how to incorporate this into Spring Security.","title":"How to obtain 2nd access token in Java for Graph API with a oidc compliant token. OBO flow","body":"<p>You would need to send 2 messages in your API:</p>\n<ul>\n<li>Send your access token to the token endpoint, to get a graph access token</li>\n<li>Send the graph access token to the user info endpoint</li>\n</ul>\n<p>I only have a sample in NodeJS, though the messages are quite simple, involving requests with form url encoded data, and JSON responses. So you should be able to do this fairly easily with any Java HTTP Client:</p>\n<ul>\n<li><a href=\"https://github.com/gary-archer/oauth.websample.azure/blob/master/api/src/host/oauth/authenticator.ts#L137\" rel=\"nofollow noreferrer\">Sample Code in NodeJS</a></li>\n<li><a href=\"https://authguidance.com/2017/12/01/azure-ad-spa-code-sample#getuserinfo\" rel=\"nofollow noreferrer\">Blog Post with Screenshots</a></li>\n</ul>\n<p>Allen's samples should demonstrate how to incorporate this into Spring Security.</p>\n"}],"owner":{"account_id":7884308,"reputation":53,"user_id":5957010,"display_name":"nabeelh21"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":713,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692944350,"creation_date":1608520943,"question_id":65387189,"body_markdown":"I am using the **angular-oauth2-oidc** library in Angular to login via the PKCE Authorization Flow and then passing the token to my back end to secure my custom API.\r\n\r\nThe Spring boot back end is acting as the oauth2 Resource Server and securing my custom API&#39;s using the token.\r\n\r\nSecurityConfiguration.java\r\n\r\n    http.cors().and()\r\n            .authorizeRequests().antMatchers(&quot;/home&quot;).permitAll()\r\n            .and()\r\n            .authorizeRequests().antMatchers(&quot;/actuator/health&quot;).permitAll()\r\n            .and()\r\n            .authorizeRequests().antMatchers(&quot;/**&quot;).authenticated()\r\n            .and()\r\n            .oauth2ResourceServer().jwt();\r\n\r\nBy default, Azure AD returns a valid JWT token only for Graph APIs. If you want to use the Azure AD OIDC authentication for your own API, you are dealing with a non-compliant provider.\r\nThus I created a custom scope in the App Registration → Expose an API page. Then I added this scope in the authorization request initiated by my Angular client along with the default openid scope.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n\r\nNow that I have this token, which no longer contains the ‘nonce’ in its jwt header (which I needed to do to secure my custom api), how do I go about using this token to get a new token?\r\nand then follow the On-Behalf-Of flow to create my graph api calls. \r\n\r\nIs anyone able to guide me in the right direction on how to exactly get the 2nd access token?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/6atA6.png","title":"How to obtain 2nd access token in Java for Graph API with a oidc compliant token. OBO flow","body":"<p>I am using the <strong>angular-oauth2-oidc</strong> library in Angular to login via the PKCE Authorization Flow and then passing the token to my back end to secure my custom API.</p>\n<p>The Spring boot back end is acting as the oauth2 Resource Server and securing my custom API's using the token.</p>\n<p>SecurityConfiguration.java</p>\n<pre><code>http.cors().and()\n        .authorizeRequests().antMatchers(&quot;/home&quot;).permitAll()\n        .and()\n        .authorizeRequests().antMatchers(&quot;/actuator/health&quot;).permitAll()\n        .and()\n        .authorizeRequests().antMatchers(&quot;/**&quot;).authenticated()\n        .and()\n        .oauth2ResourceServer().jwt();\n</code></pre>\n<p>By default, Azure AD returns a valid JWT token only for Graph APIs. If you want to use the Azure AD OIDC authentication for your own API, you are dealing with a non-compliant provider.\nThus I created a custom scope in the App Registration → Expose an API page. Then I added this scope in the authorization request initiated by my Angular client along with the default openid scope.</p>\n<p><a href=\"https://i.stack.imgur.com/6atA6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6atA6.png\" alt=\"enter image description here\" /></a></p>\n<p>Now that I have this token, which no longer contains the ‘nonce’ in its jwt header (which I needed to do to secure my custom api), how do I go about using this token to get a new token?\nand then follow the On-Behalf-Of flow to create my graph api calls.</p>\n<p>Is anyone able to guide me in the right direction on how to exactly get the 2nd access token?</p>\n"},{"tags":["java","xml","maven"],"comments":[{"owner":{"account_id":1775623,"reputation":1853,"user_id":1619462,"accept_rate":60,"display_name":"jeroen_de_schutter"},"score":0,"creation_date":1453906449,"post_id":35034677,"comment_id":57805565,"body_markdown":"Do you get the error at compile time or at runtime when accessing a jsp page ?","body":"Do you get the error at compile time or at runtime when accessing a jsp page ?"},{"owner":{"display_name":"user2879303"},"score":0,"creation_date":1453906628,"post_id":35034677,"comment_id":57805708,"body_markdown":"At compile time. The only way it compiles successfully is by using the old, deprecated DOCTYPE declaration in the web. xml. I just don&#39;t know why.","body":"At compile time. The only way it compiles successfully is by using the old, deprecated DOCTYPE declaration in the web. xml. I just don&#39;t know why."}],"answers":[{"tags":[],"owner":{"display_name":"user2879303"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1453973022,"creation_date":1453961377,"answer_id":35053998,"question_id":35034677,"body_markdown":"I finally came upon the solution. By default, for some reason (and I&#39;d like to know why), Maven generates a Dynamic Web Module as version 2.3. DTD was of course the standard for Servlet 2.3 and was probably unable to parse or evaluate my XML-based `web.xml` file.\r\n\r\nI&#39;m still not 100% clear as to why changing `web.xml` to XSD caused the JasperException with respect to JSTL, though I think it has something to do with JSTL being integrated with JSP at some point after Servlet 2.3 - someone please correct or elaborate on this if possible.\r\n\r\nSee this: https://stackoverflow.com/a/4928309/2879303\r\n\r\nNow for the solution:\r\n\r\n 1. Right-click on your Maven project and select **Properties**\r\n    \r\n 2.   Navigate to Project Facets and untick **Dynamic Web Module**. Apply\r\n    changes.\r\n    \r\n 3.   From the version drop-down box, select the latest version (as of\r\n    writing, this is 3.1). Re-select **Dynamic Web Module**. Apply changes.\r\n    \r\n 4.   Right-click on your Maven project and select **Maven** -&gt; **Update\r\n    Project**.\r\n    \r\n 5.   Your project should now be able to correctly interpret a `web.xml`\r\n    with an XSD declaration.","title":"JasperException: Absolute uri cannot be resolved","body":"<p>I finally came upon the solution. By default, for some reason (and I'd like to know why), Maven generates a Dynamic Web Module as version 2.3. DTD was of course the standard for Servlet 2.3 and was probably unable to parse or evaluate my XML-based <code>web.xml</code> file.</p>\n\n<p>I'm still not 100% clear as to why changing <code>web.xml</code> to XSD caused the JasperException with respect to JSTL, though I think it has something to do with JSTL being integrated with JSP at some point after Servlet 2.3 - someone please correct or elaborate on this if possible.</p>\n\n<p>See this: <a href=\"https://stackoverflow.com/a/4928309/2879303\">https://stackoverflow.com/a/4928309/2879303</a></p>\n\n<p>Now for the solution:</p>\n\n<ol>\n<li><p>Right-click on your Maven project and select <strong>Properties</strong></p></li>\n<li><p>Navigate to Project Facets and untick <strong>Dynamic Web Module</strong>. Apply\nchanges.</p></li>\n<li><p>From the version drop-down box, select the latest version (as of\nwriting, this is 3.1). Re-select <strong>Dynamic Web Module</strong>. Apply changes.</p></li>\n<li><p>Right-click on your Maven project and select <strong>Maven</strong> -> <strong>Update\nProject</strong>.</p></li>\n<li><p>Your project should now be able to correctly interpret a <code>web.xml</code>\nwith an XSD declaration.</p></li>\n</ol>\n"}],"owner":{"display_name":"user2879303"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8815,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":35053998,"answer_count":1,"score":2,"last_activity_date":1692943839,"creation_date":1453890230,"question_id":35034677,"body_markdown":"I have been getting the following JasperException when trying to use an XML schema for my web.xml, instead of the deprecated DOCTYPE declaration:\r\n\r\n    HTTP Status 500 - The absolute uri: http://java.sun.com/jsp/jstl/core \r\n    cannot be resolved in either web.xml or the jar files deployed with this\r\n    application\r\n\r\nIf I use this web.xml, the application compiles:\r\n\r\n    &lt;!DOCTYPE web-app PUBLIC \r\n    &quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;\r\n    &quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot; &gt;\r\n\r\n    &lt;web-app&gt;\r\n        &lt;display-name&gt;Archetype Created Web Application&lt;/display-name&gt;\r\n    &lt;/web-app&gt;\r\n\r\nHowever, if I use this web.xml, I get the JasperException:\r\n    \r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot; xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot; version=&quot;3.1&quot;&gt;\r\n        &lt;display-name&gt;CourseManagementJDBC&lt;/display-name&gt;\\\r\n    &lt;/web-app&gt;\r\n\r\nAny idea why only a deprecated format would work?\r\n\r\n**NOTE**: This is for a Maven project, and the JSTL dependency has been correctly declared, as well as the tag library in the JSP:\r\n\r\npom.xml:\r\n    \r\n    &lt;dependency&gt;\r\n  \t    &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n  \t    &lt;artifactId&gt;jstl&lt;/artifactId&gt;\r\n  \t    &lt;version&gt;1.2&lt;/version&gt;\r\n  \t&lt;/dependency&gt;\r\n\r\nJSP:\r\n\r\n    &lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;\r\n\r\nThey&#39;re all correct; what gives?","title":"JasperException: Absolute uri cannot be resolved","body":"<p>I have been getting the following JasperException when trying to use an XML schema for my web.xml, instead of the deprecated DOCTYPE declaration:</p>\n\n<pre><code>HTTP Status 500 - The absolute uri: http://java.sun.com/jsp/jstl/core \ncannot be resolved in either web.xml or the jar files deployed with this\napplication\n</code></pre>\n\n<p>If I use this web.xml, the application compiles:</p>\n\n<pre><code>&lt;!DOCTYPE web-app PUBLIC \n\"-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN\"\n\"http://java.sun.com/dtd/web-app_2_3.dtd\" &gt;\n\n&lt;web-app&gt;\n    &lt;display-name&gt;Archetype Created Web Application&lt;/display-name&gt;\n&lt;/web-app&gt;\n</code></pre>\n\n<p>However, if I use this web.xml, I get the JasperException:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;web-app xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://xmlns.jcp.org/xml/ns/javaee\" xsi:schemaLocation=\"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd\" version=\"3.1\"&gt;\n    &lt;display-name&gt;CourseManagementJDBC&lt;/display-name&gt;\\\n&lt;/web-app&gt;\n</code></pre>\n\n<p>Any idea why only a deprecated format would work?</p>\n\n<p><strong>NOTE</strong>: This is for a Maven project, and the JSTL dependency has been correctly declared, as well as the tag library in the JSP:</p>\n\n<p>pom.xml:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n    &lt;artifactId&gt;jstl&lt;/artifactId&gt;\n    &lt;version&gt;1.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>JSP:</p>\n\n<pre><code>&lt;%@ taglib prefix=\"c\" uri=\"http://java.sun.com/jsp/jstl/core\" %&gt;\n</code></pre>\n\n<p>They're all correct; what gives?</p>\n"},{"tags":["java","maven-2","exec-maven-plugin"],"answers":[{"tags":[],"owner":{"account_id":138128,"reputation":294236,"user_id":342852,"accept_rate":97,"display_name":"Sean Patrick Floyd"},"down_vote_count":2,"up_vote_count":21,"is_accepted":true,"score":19,"last_activity_date":1473188444,"creation_date":1284467950,"answer_id":3708911,"question_id":3708846,"body_markdown":"There is no way to set the `&lt;systemProperties&gt;` [parameter][1] on the command line.\r\n\r\nHowever, since `exec:java` is not forked, you can just pass a system property to maven and it will be picked up by `exec:java` as well.\r\n\r\n\r\n  [1]: http://mojo.codehaus.org/exec-maven-plugin/java-mojo.html#systemProperties\r\n\r\n    mvn -Dkey=value exec:java -Dexec.mainClass=com.yourcompany.yourclass \\\r\n        -Dexec.args=&quot;arg1 arg2 arg3&quot;","title":"How to pass systemProperties when invoking exec:java plugin in maven?","body":"<p>There is no way to set the <code>&lt;systemProperties&gt;</code> <a href=\"http://mojo.codehaus.org/exec-maven-plugin/java-mojo.html#systemProperties\" rel=\"noreferrer\">parameter</a> on the command line.</p>\n\n<p>However, since <code>exec:java</code> is not forked, you can just pass a system property to maven and it will be picked up by <code>exec:java</code> as well.</p>\n\n<pre><code>mvn -Dkey=value exec:java -Dexec.mainClass=com.yourcompany.yourclass \\\n    -Dexec.args=\"arg1 arg2 arg3\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1069033,"reputation":27720,"user_id":1068746,"accept_rate":57,"display_name":"guy mograbi"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1376228335,"creation_date":1376228335,"answer_id":18172511,"question_id":3708846,"body_markdown":"I just ran into a similar problem and I wanted to write a full answer for others that might come across this question. \r\n\r\n\r\nEven though the question is not about pom.xml but about command line - it does not state how to do the same with pom.xml so here it is\r\n\r\n\r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;1.2.1&lt;/version&gt;\r\n    \r\n                    &lt;goals&gt;\r\n                        &lt;goal&gt;java&lt;/goal&gt;\r\n                    &lt;/goals&gt;\r\n    \r\n                    &lt;configuration&gt;\r\n                         &lt;mainClass&gt;myPackage.MyMain&lt;/mainClass&gt;\r\n                          &lt;systemProperties&gt;\r\n                              &lt;property&gt;\r\n                                  &lt;key&gt;myKey&lt;/key&gt;\r\n                                  &lt;value&gt;myValue&lt;/value&gt;\r\n                              &lt;/property&gt;\r\n                          &lt;/systemProperties&gt;\r\n                    &lt;/configuration&gt;\r\n    \r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n\r\n\r\nFor the command line - I think `Sean Patrick Floyd&#39;s` answer is good - however, if you have something already defined in your pom.xml it will override it. \r\n\r\nSo running \r\n\r\n     mvn exec:java -DmyKey=myValue\r\n\r\nshould also work for you. \r\n\r\n\r\nYou should also note that the [exec plugin&#39;s documentations][1] states the following\r\n\r\n    A list of system properties to be passed. \r\n    Note: as the execution is not forked, some system properties required \r\n    by the JVM cannot be passed here. \r\n    Use MAVEN_OPTS or the exec:exec instead. See the user guide for more information.\r\n\r\nSo you can also do something like this \r\n\r\n\r\n    export MAVEN_OPTS=-DmyKey=myValue\r\n    mvn exec:java\r\n\r\n\r\nand it should work the same way.\r\n \r\n\r\n\r\n  [1]: http://mojo.codehaus.org/exec-maven-plugin/java-mojo.html#systemProperties","title":"How to pass systemProperties when invoking exec:java plugin in maven?","body":"<p>I just ran into a similar problem and I wanted to write a full answer for others that might come across this question. </p>\n\n<p>Even though the question is not about pom.xml but about command line - it does not state how to do the same with pom.xml so here it is</p>\n\n<pre><code>    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n                &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;1.2.1&lt;/version&gt;\n\n                &lt;goals&gt;\n                    &lt;goal&gt;java&lt;/goal&gt;\n                &lt;/goals&gt;\n\n                &lt;configuration&gt;\n                     &lt;mainClass&gt;myPackage.MyMain&lt;/mainClass&gt;\n                      &lt;systemProperties&gt;\n                          &lt;property&gt;\n                              &lt;key&gt;myKey&lt;/key&gt;\n                              &lt;value&gt;myValue&lt;/value&gt;\n                          &lt;/property&gt;\n                      &lt;/systemProperties&gt;\n                &lt;/configuration&gt;\n\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n</code></pre>\n\n<p>For the command line - I think <code>Sean Patrick Floyd's</code> answer is good - however, if you have something already defined in your pom.xml it will override it. </p>\n\n<p>So running </p>\n\n<pre><code> mvn exec:java -DmyKey=myValue\n</code></pre>\n\n<p>should also work for you. </p>\n\n<p>You should also note that the <a href=\"http://mojo.codehaus.org/exec-maven-plugin/java-mojo.html#systemProperties\" rel=\"noreferrer\">exec plugin's documentations</a> states the following</p>\n\n<pre><code>A list of system properties to be passed. \nNote: as the execution is not forked, some system properties required \nby the JVM cannot be passed here. \nUse MAVEN_OPTS or the exec:exec instead. See the user guide for more information.\n</code></pre>\n\n<p>So you can also do something like this </p>\n\n<pre><code>export MAVEN_OPTS=-DmyKey=myValue\nmvn exec:java\n</code></pre>\n\n<p>and it should work the same way.</p>\n"},{"tags":[],"owner":{"account_id":1549294,"reputation":1475,"user_id":1442070,"display_name":"mokshino"},"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1392756784,"creation_date":1392756784,"answer_id":21865061,"question_id":3708846,"body_markdown":"Try following for me it works properly\r\n\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n                &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;mainClass&gt;ibis.structure.Structure&lt;/mainClass&gt;\r\n                    &lt;systemProperties&gt;\r\n                        &lt;systemProperty&gt;\r\n                            &lt;key&gt;someKey&lt;/key&gt;\r\n                            &lt;value&gt;someValue&lt;/value&gt;\r\n                        &lt;/systemProperty&gt;\r\n                    &lt;/systemProperties&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;","title":"How to pass systemProperties when invoking exec:java plugin in maven?","body":"<p>Try following for me it works properly</p>\n\n<pre><code>        &lt;plugin&gt;\n            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n            &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;mainClass&gt;ibis.structure.Structure&lt;/mainClass&gt;\n                &lt;systemProperties&gt;\n                    &lt;systemProperty&gt;\n                        &lt;key&gt;someKey&lt;/key&gt;\n                        &lt;value&gt;someValue&lt;/value&gt;\n                    &lt;/systemProperty&gt;\n                &lt;/systemProperties&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":235896,"reputation":1860,"user_id":503025,"accept_rate":21,"display_name":"weberjn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692942933,"creation_date":1692942933,"answer_id":76974567,"question_id":3708846,"body_markdown":"For goal exec:\r\n\r\n\t&lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\r\n\t&lt;executions&gt;\r\n\t\t&lt;execution&gt;\r\n\t\t\t&lt;goals&gt;\r\n\t\t\t\t&lt;goal&gt;exec&lt;/goal&gt;\r\n\t\t\t&lt;/goals&gt;\r\n\t\t\t&lt;configuration&gt;\r\n\t\t\t\t&lt;arguments&gt;\r\n\t\t\t\t\t&lt;argument&gt;-Dsome.key=true&lt;/argument&gt;\r\n    ","title":"How to pass systemProperties when invoking exec:java plugin in maven?","body":"<p>For goal exec:</p>\n<pre><code>&lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\n&lt;executions&gt;\n    &lt;execution&gt;\n        &lt;goals&gt;\n            &lt;goal&gt;exec&lt;/goal&gt;\n        &lt;/goals&gt;\n        &lt;configuration&gt;\n            &lt;arguments&gt;\n                &lt;argument&gt;-Dsome.key=true&lt;/argument&gt;\n</code></pre>\n"}],"owner":{"account_id":32083,"reputation":25280,"user_id":88622,"accept_rate":87,"display_name":"Alexandru"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21078,"favorite_count":0,"down_vote_count":0,"up_vote_count":27,"accepted_answer_id":3708911,"answer_count":4,"score":27,"last_activity_date":1692942933,"creation_date":1284467397,"question_id":3708846,"body_markdown":"I want to use the exec:java plugin to invoke the main class from command line. I can pass arguments from the command line using `-Dexec.args=&quot;arg0 arg1 arg2&quot;`, I don&#39;t know how to pass system properties. I tried &#39;-Dexec.systemProperties=&quot;key=value&quot;` but with no effect.\r\n\r\n\r\n`pom.xml` looks like this:\r\n\r\n      &lt;plugin&gt;  \r\n        &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n        &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\r\n        &lt;configuration&gt;\r\n          &lt;mainClass&gt;ibis.structure.Structure&lt;/mainClass&gt;\r\n        &lt;/configuration&gt;  \r\n      &lt;/plugin&gt;\r\n","title":"How to pass systemProperties when invoking exec:java plugin in maven?","body":"<p>I want to use the exec:java plugin to invoke the main class from command line. I can pass arguments from the command line using <code>-Dexec.args=\"arg0 arg1 arg2\"</code>, I don't know how to pass system properties. I tried '-Dexec.systemProperties=\"key=value\"` but with no effect.</p>\n\n<p><code>pom.xml</code> looks like this:</p>\n\n<pre><code>  &lt;plugin&gt;  \n    &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n    &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\n    &lt;configuration&gt;\n      &lt;mainClass&gt;ibis.structure.Structure&lt;/mainClass&gt;\n    &lt;/configuration&gt;  \n  &lt;/plugin&gt;\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9768,"page":224,"page_size":100}
