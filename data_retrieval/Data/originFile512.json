{"items":[{"tags":["java","arrays","collections"],"comments":[{"owner":{"account_id":76626,"reputation":6476,"user_id":219210,"display_name":"Hardcoded"},"score":11,"creation_date":1278344901,"post_id":960431,"comment_id":3274883,"body_markdown":"You can only cast to Integer[] by using: `Integer[] arr = (Integer[])list.toArray(new Integer[list.size]);`","body":"You can only cast to Integer[] by using: <code>Integer[] arr = (Integer[])list.toArray(new Integer[list.size]);</code>"},{"owner":{"account_id":266709,"reputation":11846,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1324027891,"post_id":960431,"comment_id":10567114,"body_markdown":"@ripper234, eddie&#39;s solution is worse than the one on the question. actually the original one is technically the best as long as the List is RandomAccess impl (even it will be properly unrolled and the bounds check for array removed)","body":"@ripper234, eddie&#39;s solution is worse than the one on the question. actually the original one is technically the best as long as the List is RandomAccess impl (even it will be properly unrolled and the bounds check for array removed)"},{"owner":{"account_id":181983,"reputation":22075,"user_id":416369,"accept_rate":29,"display_name":"sactiw"},"score":1,"creation_date":1365523813,"post_id":960431,"comment_id":22654090,"body_markdown":"@Hardcoded you might want to edit your comment to use list.size() method and drop the unnecessary cast.","body":"@Hardcoded you might want to edit your comment to use list.size() method and drop the unnecessary cast."},{"owner":{"account_id":76626,"reputation":6476,"user_id":219210,"display_name":"Hardcoded"},"score":0,"creation_date":1367238155,"post_id":960431,"comment_id":23297049,"body_markdown":"@sactiw How should I do this? This comment is written 3 years ago and you can only edit your comments for the first 5 minutes.","body":"@sactiw How should I do this? This comment is written 3 years ago and you can only edit your comments for the first 5 minutes."},{"owner":{"account_id":320401,"reputation":1520,"user_id":638661,"accept_rate":55,"display_name":"Makoto"},"score":2,"creation_date":1402877655,"post_id":960431,"comment_id":37429195,"body_markdown":"Is there a better way to do this now in Java 8?","body":"Is there a better way to do this now in Java 8?"},{"owner":{"account_id":4680926,"reputation":2259,"user_id":3789665,"accept_rate":57,"display_name":"greybeard"},"score":2,"creation_date":1455045115,"post_id":960431,"comment_id":58310624,"body_markdown":"(@Makoto : see [Pshemo&#39;s answer](http://stackoverflow.com/a/23945015/3789665))","body":"(@Makoto : see <a href=\"http://stackoverflow.com/a/23945015/3789665\">Pshemo&#39;s answer</a>)"},{"owner":{"account_id":1228802,"reputation":279,"user_id":1193815,"accept_rate":50,"display_name":"old_soul_on_the_run"},"score":7,"creation_date":1537660165,"post_id":960431,"comment_id":91865730,"body_markdown":"int[] arr = listOfIntegers.stream().mapToInt(x-&gt;x).toArray();","body":"int[] arr = listOfIntegers.stream().mapToInt(x-&gt;x).toArray();"}],"answers":[{"tags":[],"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":8,"up_vote_count":269,"is_accepted":true,"score":261,"last_activity_date":1244320098,"creation_date":1244320098,"answer_id":960449,"question_id":960431,"body_markdown":"Unfortunately, I don&#39;t believe there really *is* a better way of doing this due to the nature of Java&#39;s handling of primitive types, boxing, arrays and generics. In particular:\r\n\r\n- `List&lt;T&gt;.toArray` won&#39;t work because there&#39;s no conversion from `Integer` to `int`\r\n- You can&#39;t use `int` as a type argument for generics, so it would *have* to be an `int`-specific method (or one which used reflection to do nasty trickery).\r\n\r\nI believe there are libraries which have autogenerated versions of this kind of method for all the primitive types (i.e. there&#39;s a template which is copied for each type). It&#39;s ugly, but that&#39;s the way it is I&#39;m afraid :(\r\n\r\nEven though the [`Arrays`][1] class came out before generics arrived in Java, it would still have to include all the horrible overloads if it were introduced today (assuming you want to use primitive arrays).\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/util/Arrays.html","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>Unfortunately, I don't believe there really <em>is</em> a better way of doing this due to the nature of Java's handling of primitive types, boxing, arrays and generics. In particular:</p>\n\n<ul>\n<li><code>List&lt;T&gt;.toArray</code> won't work because there's no conversion from <code>Integer</code> to <code>int</code></li>\n<li>You can't use <code>int</code> as a type argument for generics, so it would <em>have</em> to be an <code>int</code>-specific method (or one which used reflection to do nasty trickery).</li>\n</ul>\n\n<p>I believe there are libraries which have autogenerated versions of this kind of method for all the primitive types (i.e. there's a template which is copied for each type). It's ugly, but that's the way it is I'm afraid :(</p>\n\n<p>Even though the <a href=\"http://java.sun.com/javase/6/docs/api/java/util/Arrays.html\" rel=\"noreferrer\"><code>Arrays</code></a> class came out before generics arrived in Java, it would still have to include all the horrible overloads if it were introduced today (assuming you want to use primitive arrays).</p>\n"},{"tags":[],"owner":{"account_id":18929,"reputation":5197,"user_id":43864,"accept_rate":62,"display_name":"neesh"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1649876831,"creation_date":1244320407,"answer_id":960466,"question_id":960431,"body_markdown":"There is really no way of &quot;one-lining&quot; what you are trying to do, because toArray returns an Object[] and you cannot cast from Object[] to int[] or Integer[] to int[].\r\n","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>There is really no way of &quot;one-lining&quot; what you are trying to do, because toArray returns an Object[] and you cannot cast from Object[] to int[] or Integer[] to int[].</p>\n"},{"tags":[],"owner":{"account_id":23143,"reputation":53986,"user_id":57752,"accept_rate":73,"display_name":"Eddie"},"down_vote_count":3,"up_vote_count":185,"is_accepted":false,"score":182,"last_activity_date":1363248575,"creation_date":1244321308,"answer_id":960507,"question_id":960431,"body_markdown":"The easiest way to do this is to make use of [Apache Commons Lang][1].  It has a handy ArrayUtils class that can do what you want.  Use the [`toPrimitive`][2] method with the overload for an array of `Integer`s.\r\n\r\n    List&lt;Integer&gt; myList;\r\n     ... assign and fill the list\r\n    int[] intArray = ArrayUtils.toPrimitive(myList.toArray(new Integer[myList.size()]));\r\n\r\nThis way you don&#39;t reinvent the wheel.  Commons Lang has a great many useful things that Java left out.  Above, I chose to create an Integer list of the right size.  You can also use a 0-length static Integer array and let Java allocate an array of the right size:\r\n\r\n    static final Integer[] NO_INTS = new Integer[0];\r\n       ....\r\n    int[] intArray2 = ArrayUtils.toPrimitive(myList.toArray(NO_INTS));\r\n\r\n[1]: http://commons.apache.org/lang\r\n[2]: http://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/ArrayUtils.html#toPrimitive%28java.lang.Integer%5b%5d%29\r\n","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>The easiest way to do this is to make use of <a href=\"http://commons.apache.org/lang\" rel=\"noreferrer\">Apache Commons Lang</a>.  It has a handy ArrayUtils class that can do what you want.  Use the <a href=\"http://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/ArrayUtils.html#toPrimitive%28java.lang.Integer%5b%5d%29\" rel=\"noreferrer\"><code>toPrimitive</code></a> method with the overload for an array of <code>Integer</code>s.</p>\n\n<pre><code>List&lt;Integer&gt; myList;\n ... assign and fill the list\nint[] intArray = ArrayUtils.toPrimitive(myList.toArray(new Integer[myList.size()]));\n</code></pre>\n\n<p>This way you don't reinvent the wheel.  Commons Lang has a great many useful things that Java left out.  Above, I chose to create an Integer list of the right size.  You can also use a 0-length static Integer array and let Java allocate an array of the right size:</p>\n\n<pre><code>static final Integer[] NO_INTS = new Integer[0];\n   ....\nint[] intArray2 = ArrayUtils.toPrimitive(myList.toArray(NO_INTS));\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"Mike"},"down_vote_count":1,"up_vote_count":63,"is_accepted":false,"score":62,"last_activity_date":1649876921,"creation_date":1244472947,"answer_id":965289,"question_id":960431,"body_markdown":"Use:\r\n\r\n    int[] toIntArray(List&lt;Integer&gt; list)  {\r\n        int[] ret = new int[list.size()];\r\n        int i = 0;\r\n        for (Integer e : list)\r\n            ret[i++] = e;\r\n        return ret;\r\n    }\r\n\r\nThis slight change to your code is to avoid expensive list indexing (since a List is not necessarily an ArrayList, but it could be a linked list, for which random access is expensive).\r\n\r\n\r\n","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>Use:</p>\n<pre><code>int[] toIntArray(List&lt;Integer&gt; list)  {\n    int[] ret = new int[list.size()];\n    int i = 0;\n    for (Integer e : list)\n        ret[i++] = e;\n    return ret;\n}\n</code></pre>\n<p>This slight change to your code is to avoid expensive list indexing (since a List is not necessarily an ArrayList, but it could be a linked list, for which random access is expensive).</p>\n"},{"tags":[],"owner":{"account_id":7848,"reputation":108920,"user_id":13792,"accept_rate":100,"display_name":"ColinD"},"down_vote_count":2,"up_vote_count":224,"is_accepted":false,"score":222,"last_activity_date":1463463301,"creation_date":1278279154,"answer_id":3176296,"question_id":960431,"body_markdown":"In addition to Commons Lang, you can do this with [Guava][1]&#39;s method [`Ints.toArray(Collection&lt;Integer&gt; collection)`][2]:\r\n\r\n    List&lt;Integer&gt; list = ...\r\n    int[] ints = Ints.toArray(list);\r\n\r\nThis saves you having to do the intermediate array conversion that the Commons Lang equivalent requires yourself.\r\n\r\n  [1]: https://github.com/google/guava\r\n  [2]: http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/primitives/Ints.html#toArray(java.util.Collection)","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>In addition to Commons Lang, you can do this with <a href=\"https://github.com/google/guava\" rel=\"noreferrer\">Guava</a>'s method <a href=\"http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/primitives/Ints.html#toArray(java.util.Collection)\" rel=\"noreferrer\"><code>Ints.toArray(Collection&lt;Integer&gt; collection)</code></a>:</p>\n\n<pre><code>List&lt;Integer&gt; list = ...\nint[] ints = Ints.toArray(list);\n</code></pre>\n\n<p>This saves you having to do the intermediate array conversion that the Commons Lang equivalent requires yourself.</p>\n"},{"tags":[],"owner":{"account_id":32251,"reputation":114942,"user_id":89266,"accept_rate":91,"display_name":"dfa"},"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1649876959,"creation_date":1278340820,"answer_id":3180339,"question_id":960431,"body_markdown":"Also try [Dollar][1] ([check this revision][2]):\r\n\r\n    import static com.humaorie.dollar.Dollar.*\r\n    ...\r\n\r\n    List&lt;Integer&gt; source = ...;\r\n    int[] ints = $(source).convert().toIntArray();\r\n\r\n  [1]: http://bitbucket.org/dfa/dollar/\r\n  [2]: http://bitbucket.org/dfa/dollar/changeset/cea42757d873\r\n\r\n\r\n","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>Also try <a href=\"http://bitbucket.org/dfa/dollar/\" rel=\"nofollow noreferrer\">Dollar</a> (<a href=\"http://bitbucket.org/dfa/dollar/changeset/cea42757d873\" rel=\"nofollow noreferrer\">check this revision</a>):</p>\n<pre><code>import static com.humaorie.dollar.Dollar.*\n...\n\nList&lt;Integer&gt; source = ...;\nint[] ints = $(source).convert().toIntArray();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":321153,"reputation":67,"user_id":639802,"display_name":"DennisTemper"},"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1649877131,"creation_date":1307613836,"answer_id":6291107,"question_id":960431,"body_markdown":"I would recommend you to use the `List&lt;?&gt;` skeletal implementation from the Java collections API. It appears to be quite helpful in this particular case:\r\n\r\n    package mypackage;\r\n\r\n    import java.util.AbstractList;\r\n    import java.util.Arrays;\r\n    import java.util.Collections;\r\n    import java.util.List;\r\n\r\n    public class Test {\r\n\r\n        // Helper method to convert int arrays into Lists\r\n        static List&lt;Integer&gt; intArrayAsList(final int[] a) {\r\n            if(a == null)\r\n                throw new NullPointerException();\r\n            return new AbstractList&lt;Integer&gt;() {\r\n\r\n                @Override\r\n                public Integer get(int i) {\r\n                    return a[i]; // Autoboxing\r\n                }\r\n                @Override\r\n                public Integer set(int i, Integer val) {\r\n                    final int old = a[i];\r\n                    a[i] = val; // Auto-unboxing\r\n                    return old; // Autoboxing\r\n                }\r\n                @Override\r\n                public int size() {\r\n                    return a.length;\r\n                }\r\n            };\r\n        }\r\n\r\n        public static void main(final String[] args) {\r\n            int[] a = {1, 2, 3, 4, 5};\r\n            Collections.reverse(intArrayAsList(a));\r\n            System.out.println(Arrays.toString(a));\r\n        }\r\n    }\r\n\r\nBeware of boxing/unboxing drawbacks.\r\n\r\n\r\n","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>I would recommend you to use the <code>List&lt;?&gt;</code> skeletal implementation from the Java collections API. It appears to be quite helpful in this particular case:</p>\n<pre><code>package mypackage;\n\nimport java.util.AbstractList;\nimport java.util.Arrays;\nimport java.util.Collections;\nimport java.util.List;\n\npublic class Test {\n\n    // Helper method to convert int arrays into Lists\n    static List&lt;Integer&gt; intArrayAsList(final int[] a) {\n        if(a == null)\n            throw new NullPointerException();\n        return new AbstractList&lt;Integer&gt;() {\n\n            @Override\n            public Integer get(int i) {\n                return a[i]; // Autoboxing\n            }\n            @Override\n            public Integer set(int i, Integer val) {\n                final int old = a[i];\n                a[i] = val; // Auto-unboxing\n                return old; // Autoboxing\n            }\n            @Override\n            public int size() {\n                return a.length;\n            }\n        };\n    }\n\n    public static void main(final String[] args) {\n        int[] a = {1, 2, 3, 4, 5};\n        Collections.reverse(intArrayAsList(a));\n        System.out.println(Arrays.toString(a));\n    }\n}\n</code></pre>\n<p>Beware of boxing/unboxing drawbacks.</p>\n"},{"tags":[],"owner":{"account_id":325916,"reputation":5887,"user_id":697099,"accept_rate":40,"display_name":"gerardw"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1378235303,"creation_date":1330370325,"answer_id":9470875,"question_id":960431,"body_markdown":"    int[] ret = new int[list.size()];       \r\n    Iterator&lt;Integer&gt; iter = list.iterator();\r\n    for (int i=0; iter.hasNext(); i++) {       \r\n        ret[i] = iter.next();                \r\n    }                                        \r\n    return ret;                              ","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<pre><code>int[] ret = new int[list.size()];       \nIterator&lt;Integer&gt; iter = list.iterator();\nfor (int i=0; iter.hasNext(); i++) {       \n    ret[i] = iter.next();                \n}                                        \nreturn ret;                              \n</code></pre>\n"},{"tags":[],"owner":{"account_id":37187,"reputation":46683,"user_id":106261,"accept_rate":87,"display_name":"NimChimpsky"},"down_vote_count":3,"up_vote_count":3,"is_accepted":false,"score":0,"last_activity_date":1649877548,"creation_date":1352477285,"answer_id":13311659,"question_id":960431,"body_markdown":"Using a lambda you could do this (compiles in JDK lambda):\r\n\r\n    public static void main(String ars[]) {\r\n        TransformService transformService = (inputs) -&gt; {\r\n            int[] ints = new int[inputs.size()];\r\n            int i = 0;\r\n            for (Integer element : inputs) {\r\n                ints[ i++ ] = element;\r\n            }\r\n            return ints;\r\n        };\r\n\r\n        List&lt;Integer&gt; inputs = new ArrayList&lt;Integer&gt;(5) { {add(10); add(10);} };\r\n\r\n        int[] results = transformService.transform(inputs);\r\n    }\r\n\r\n    public interface TransformService {\r\n        int[] transform(List&lt;Integer&gt; inputs);\r\n    }\r\n\r\n\r\n\r\n","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>Using a lambda you could do this (compiles in JDK lambda):</p>\n<pre><code>public static void main(String ars[]) {\n    TransformService transformService = (inputs) -&gt; {\n        int[] ints = new int[inputs.size()];\n        int i = 0;\n        for (Integer element : inputs) {\n            ints[ i++ ] = element;\n        }\n        return ints;\n    };\n\n    List&lt;Integer&gt; inputs = new ArrayList&lt;Integer&gt;(5) { {add(10); add(10);} };\n\n    int[] results = transformService.transform(inputs);\n}\n\npublic interface TransformService {\n    int[] transform(List&lt;Integer&gt; inputs);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":153967,"reputation":1960,"user_id":369604,"accept_rate":77,"display_name":"Loduwijk"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1649877696,"creation_date":1374595029,"answer_id":17815188,"question_id":960431,"body_markdown":"I&#39;ve noticed several uses of *for* loops, but you don&#39;t even need anything inside the loop. I mention this only because the original question was trying to find less verbose code.\r\n\r\n    int[] toArray(List&lt;Integer&gt; list) {\r\n        int[] ret = new int[ list.size() ];\r\n        int i = 0;\r\n        for( Iterator&lt;Integer&gt; it = list.iterator();\r\n             it.hasNext();\r\n             ret[i++] = it.next() );\r\n        return ret;\r\n    }\r\n\r\nIf Java allowed multiple declarations in a *for* loop the way C++ does, we could go a step further and do for(int i = 0, Iterator&lt;Integer&gt; it...\r\n\r\nIn the end though (this part is just my opinion), if you are going to have a helping function or method to do something for you, just set it up and forget about it. It can be a one-liner or ten; if you&#39;ll never look at it again you won&#39;t know the difference.\r\n\r\n\r\n","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>I've noticed several uses of <em>for</em> loops, but you don't even need anything inside the loop. I mention this only because the original question was trying to find less verbose code.</p>\n<pre><code>int[] toArray(List&lt;Integer&gt; list) {\n    int[] ret = new int[ list.size() ];\n    int i = 0;\n    for( Iterator&lt;Integer&gt; it = list.iterator();\n         it.hasNext();\n         ret[i++] = it.next() );\n    return ret;\n}\n</code></pre>\n<p>If Java allowed multiple declarations in a <em>for</em> loop the way C++ does, we could go a step further and do for(int i = 0, Iterator it...</p>\n<p>In the end though (this part is just my opinion), if you are going to have a helping function or method to do something for you, just set it up and forget about it. It can be a one-liner or ten; if you'll never look at it again you won't know the difference.</p>\n"},{"tags":[],"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"down_vote_count":1,"up_vote_count":1051,"is_accepted":false,"score":1050,"last_activity_date":1681117697,"creation_date":1401408317,"answer_id":23945015,"question_id":960431,"body_markdown":"With streams added in Java 8 we can write code like:\r\n\r\n```\r\nint[] example1 = list.stream().mapToInt(i-&gt;i).toArray();\r\n// OR\r\nint[] example2 = list.stream().mapToInt(Integer::intValue).toArray();\r\n```\r\n\r\n---\r\nThought process:\r\n\r\n- The simple `Stream#toArray` returns an `Object[]` array, so it is not what we want. Also, `Stream#toArray(IntFunction&lt;A[]&gt; generator)` which returns `A[]` doesn&#39;t do what we want, because the generic type `A` can&#39;t represent the primitive type `int`\r\n- So it would be nice to have some kind of stream which would be designed to handle primitive type `int` instead of the reference type like `Integer`, because its `toArray` method will most likely also return an `int[]` array (returning something else like `Object[]` or even boxed `Integer[]` would be unnatural for `int`). And fortunately Java 8 has such a stream which is [`IntStream`][1]\r\n- So now the only thing we need to figure out is how to convert our `Stream&lt;Integer&gt;` (which will be returned from `list.stream()`) to that shiny `IntStream`.  \r\n \r\n  Quick searching in documentation of `Stream` while looking for methods which return `IntStream` points us to our solution which is [`mapToInt(ToIntFunction&lt;? super T&gt; mapper)`][2] method. All we need to do is provide a mapping from `Integer` to `int`.\r\n\r\n  Since [`ToIntFunction`][3] is *functional interface* we can also provide its instance via *lambda* or *method reference*.\r\n\r\n  Anyway to convert Integer to int we can use [`Integer#intValue`][4] so inside `mapToInt` we can write:\r\n\r\n    ```\r\n    mapToInt( (Integer i) -&gt; i.intValue() )\r\n    ```\r\n\r\n    (or some may prefer: `mapToInt(Integer::intValue)`.)\r\n\r\n    But similar code can be generated using unboxing, since the compiler knows that the result of this lambda must be of type `int` (the lambda used in `mapToInt` is an implementation of the `ToIntFunction` interface which expects as body a method of type: `int applyAsInt(T value)` which is expected to return an `int`).\r\n\r\n    So we can simply write:\r\n\r\n    ```\r\n    mapToInt((Integer i)-&gt;i)\r\n    ```\r\n\r\n    Also, since the `Integer` type in `(Integer i)` can be inferred by the compiler because `List&lt;Integer&gt;#stream()` returns a `Stream&lt;Integer&gt;`, we can also skip it which leaves us with\r\n\r\n    ```\r\n    mapToInt(i -&gt; i)\r\n    ```\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#mapToInt-java.util.function.ToIntFunction-\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/util/function/ToIntFunction.html\r\n  [4]: https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#intValue--","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>With streams added in Java 8 we can write code like:</p>\n<pre><code>int[] example1 = list.stream().mapToInt(i-&gt;i).toArray();\n// OR\nint[] example2 = list.stream().mapToInt(Integer::intValue).toArray();\n</code></pre>\n<hr />\n<p>Thought process:</p>\n<ul>\n<li><p>The simple <code>Stream#toArray</code> returns an <code>Object[]</code> array, so it is not what we want. Also, <code>Stream#toArray(IntFunction&lt;A[]&gt; generator)</code> which returns <code>A[]</code> doesn't do what we want, because the generic type <code>A</code> can't represent the primitive type <code>int</code></p>\n</li>\n<li><p>So it would be nice to have some kind of stream which would be designed to handle primitive type <code>int</code> instead of the reference type like <code>Integer</code>, because its <code>toArray</code> method will most likely also return an <code>int[]</code> array (returning something else like <code>Object[]</code> or even boxed <code>Integer[]</code> would be unnatural for <code>int</code>). And fortunately Java 8 has such a stream which is <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html\" rel=\"noreferrer\"><code>IntStream</code></a></p>\n</li>\n<li><p>So now the only thing we need to figure out is how to convert our <code>Stream&lt;Integer&gt;</code> (which will be returned from <code>list.stream()</code>) to that shiny <code>IntStream</code>.</p>\n<p>Quick searching in documentation of <code>Stream</code> while looking for methods which return <code>IntStream</code> points us to our solution which is <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#mapToInt-java.util.function.ToIntFunction-\" rel=\"noreferrer\"><code>mapToInt(ToIntFunction&lt;? super T&gt; mapper)</code></a> method. All we need to do is provide a mapping from <code>Integer</code> to <code>int</code>.</p>\n<p>Since <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/function/ToIntFunction.html\" rel=\"noreferrer\"><code>ToIntFunction</code></a> is <em>functional interface</em> we can also provide its instance via <em>lambda</em> or <em>method reference</em>.</p>\n<p>Anyway to convert Integer to int we can use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#intValue--\" rel=\"noreferrer\"><code>Integer#intValue</code></a> so inside <code>mapToInt</code> we can write:</p>\n<pre><code>mapToInt( (Integer i) -&gt; i.intValue() )\n</code></pre>\n<p>(or some may prefer: <code>mapToInt(Integer::intValue)</code>.)</p>\n<p>But similar code can be generated using unboxing, since the compiler knows that the result of this lambda must be of type <code>int</code> (the lambda used in <code>mapToInt</code> is an implementation of the <code>ToIntFunction</code> interface which expects as body a method of type: <code>int applyAsInt(T value)</code> which is expected to return an <code>int</code>).</p>\n<p>So we can simply write:</p>\n<pre><code>mapToInt((Integer i)-&gt;i)\n</code></pre>\n<p>Also, since the <code>Integer</code> type in <code>(Integer i)</code> can be inferred by the compiler because <code>List&lt;Integer&gt;#stream()</code> returns a <code>Stream&lt;Integer&gt;</code>, we can also skip it which leaves us with</p>\n<pre><code>mapToInt(i -&gt; i)\n</code></pre>\n</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1448888080,"creation_date":1448888080,"answer_id":33999155,"question_id":960431,"body_markdown":"If you are simply mapping an `Integer` to an `int` then you should consider [using parallelism][1], since your mapping logic does not rely on any variables outside its scope.\r\n\r\n    int[] arr = list.parallelStream().mapToInt(Integer::intValue).toArray();\r\n\r\nJust be aware of this \r\n\r\n&gt; Note that parallelism is not automatically faster than performing operations serially, although it can be if you have enough data and processor cores. While aggregate operations enable you to more easily implement parallelism, it is still your responsibility to determine if your application is suitable for parallelism.\r\n\r\n---\r\n\r\nThere are two ways to map Integers to their primitive form:\r\n\r\n1. Via a `ToIntFunction`.\r\n\r\n        mapToInt(Integer::intValue)\r\n2. Via explicit [unboxing][3] with lambda expression.\r\n\r\n        mapToInt(i -&gt; i.intValue())\r\n3. Via implicit (auto-) unboxing with lambda expression.\r\n\r\n        mapToInt(i -&gt; i)\r\n\r\n---\r\n\r\nGiven a list with a `null` value\r\n\r\n    List&lt;Integer&gt; list = Arrays.asList(1, 2, null, 4, 5);\r\n\r\nHere are three options to handle `null`:\r\n\r\n1. Filter out the `null` values before mapping.\r\n\r\n        int[] arr = list.parallelStream().filter(Objects::nonNull).mapToInt(Integer::intValue).toArray();\r\n\r\n2. Map the `null` values to a default value.\r\n\r\n        int[] arr = list.parallelStream().map(i -&gt; i == null ? -1 : i).mapToInt(Integer::intValue).toArray();\r\n\r\n3. Handle `null` inside the lambda expression.\r\n\r\n        int[] arr = list.parallelStream().mapToInt(i -&gt; i == null ? -1 : i.intValue()).toArray();\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/collections/streams/parallelism.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html#parallelStream--\r\n  [3]: https://docs.oracle.com/javase/tutorial/java/data/autoboxing.html","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>If you are simply mapping an <code>Integer</code> to an <code>int</code> then you should consider <a href=\"https://docs.oracle.com/javase/tutorial/collections/streams/parallelism.html\" rel=\"noreferrer\">using parallelism</a>, since your mapping logic does not rely on any variables outside its scope.</p>\n\n<pre><code>int[] arr = list.parallelStream().mapToInt(Integer::intValue).toArray();\n</code></pre>\n\n<p>Just be aware of this </p>\n\n<blockquote>\n  <p>Note that parallelism is not automatically faster than performing operations serially, although it can be if you have enough data and processor cores. While aggregate operations enable you to more easily implement parallelism, it is still your responsibility to determine if your application is suitable for parallelism.</p>\n</blockquote>\n\n<hr>\n\n<p>There are two ways to map Integers to their primitive form:</p>\n\n<ol>\n<li><p>Via a <code>ToIntFunction</code>.</p>\n\n<pre><code>mapToInt(Integer::intValue)\n</code></pre></li>\n<li><p>Via explicit <a href=\"https://docs.oracle.com/javase/tutorial/java/data/autoboxing.html\" rel=\"noreferrer\">unboxing</a> with lambda expression.</p>\n\n<pre><code>mapToInt(i -&gt; i.intValue())\n</code></pre></li>\n<li><p>Via implicit (auto-) unboxing with lambda expression.</p>\n\n<pre><code>mapToInt(i -&gt; i)\n</code></pre></li>\n</ol>\n\n<hr>\n\n<p>Given a list with a <code>null</code> value</p>\n\n<pre><code>List&lt;Integer&gt; list = Arrays.asList(1, 2, null, 4, 5);\n</code></pre>\n\n<p>Here are three options to handle <code>null</code>:</p>\n\n<ol>\n<li><p>Filter out the <code>null</code> values before mapping.</p>\n\n<pre><code>int[] arr = list.parallelStream().filter(Objects::nonNull).mapToInt(Integer::intValue).toArray();\n</code></pre></li>\n<li><p>Map the <code>null</code> values to a default value.</p>\n\n<pre><code>int[] arr = list.parallelStream().map(i -&gt; i == null ? -1 : i).mapToInt(Integer::intValue).toArray();\n</code></pre></li>\n<li><p>Handle <code>null</code> inside the lambda expression.</p>\n\n<pre><code>int[] arr = list.parallelStream().mapToInt(i -&gt; i == null ? -1 : i.intValue()).toArray();\n</code></pre></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1712726,"reputation":6528,"user_id":1570415,"display_name":"Donald Raab"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1456860767,"creation_date":1456786614,"answer_id":35711427,"question_id":960431,"body_markdown":"With [Eclipse Collections][1], you can do the following if you have a list of type  `java.util.List&lt;Integer&gt;`:\r\n\r\n    List&lt;Integer&gt; integers = Lists.mutable.with(1, 2, 3, 4, 5);\r\n    int[] ints = LazyIterate.adapt(integers).collectInt(i -&gt; i).toArray();\r\n    \r\n    Assert.assertArrayEquals(new int[]{1, 2, 3, 4, 5}, ints);\r\n\r\nIf you already have an Eclipse Collections type like [`MutableList`][2], you can do the following:\r\n\r\n    MutableList&lt;Integer&gt; integers = Lists.mutable.with(1, 2, 3, 4, 5);\r\n    int[] ints = integers.asLazy().collectInt(i -&gt; i).toArray();\r\n    \r\n    Assert.assertArrayEquals(new int[]{1, 2, 3, 4, 5}, ints);\r\n\r\n\r\nNote: I am a committer for Eclipse Collections\r\n\r\n\r\n  [1]: https://www.eclipse.org/collections/\r\n  [2]: https://www.eclipse.org/collections/javadoc/7.0.0/org/eclipse/collections/api/list/MutableList.html","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>With <a href=\"https://www.eclipse.org/collections/\" rel=\"nofollow\">Eclipse Collections</a>, you can do the following if you have a list of type  <code>java.util.List&lt;Integer&gt;</code>:</p>\n\n<pre><code>List&lt;Integer&gt; integers = Lists.mutable.with(1, 2, 3, 4, 5);\nint[] ints = LazyIterate.adapt(integers).collectInt(i -&gt; i).toArray();\n\nAssert.assertArrayEquals(new int[]{1, 2, 3, 4, 5}, ints);\n</code></pre>\n\n<p>If you already have an Eclipse Collections type like <a href=\"https://www.eclipse.org/collections/javadoc/7.0.0/org/eclipse/collections/api/list/MutableList.html\" rel=\"nofollow\"><code>MutableList</code></a>, you can do the following:</p>\n\n<pre><code>MutableList&lt;Integer&gt; integers = Lists.mutable.with(1, 2, 3, 4, 5);\nint[] ints = integers.asLazy().collectInt(i -&gt; i).toArray();\n\nAssert.assertArrayEquals(new int[]{1, 2, 3, 4, 5}, ints);\n</code></pre>\n\n<p>Note: I am a committer for Eclipse Collections</p>\n"},{"tags":[],"owner":{"account_id":3050838,"reputation":2195,"user_id":2585433,"accept_rate":64,"display_name":"Noor Nawaz"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1649878105,"creation_date":1468233494,"answer_id":38304849,"question_id":960431,"body_markdown":"Here is a **Java 8** single line code for this:\r\n\r\n    public int[] toIntArray(List&lt;Integer&gt; intList){\r\n        return intList.stream().mapToInt(Integer::intValue).toArray();\r\n    }\r\n\r\n","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>Here is a <strong>Java 8</strong> single line code for this:</p>\n<pre><code>public int[] toIntArray(List&lt;Integer&gt; intList){\n    return intList.stream().mapToInt(Integer::intValue).toArray();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":464810,"reputation":2023,"user_id":868540,"accept_rate":72,"display_name":"Pumphouse"},"down_vote_count":0,"up_vote_count":85,"is_accepted":false,"score":85,"last_activity_date":1541570151,"creation_date":1473395402,"answer_id":39403890,"question_id":960431,"body_markdown":"**Java 8** has given us an easy way to do this via streams...\r\n\r\nUsing the collections `stream()` function and then mapping to ints, you&#39;ll get an IntStream. With the `IntStream` we can call toArray() which gives us `int []`\r\n\r\n    int [] ints = list.stream().mapToInt(Integer::intValue).toArray();\r\n\r\n[to int []][1]\r\n\r\n[to IntStream][2]\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html\r\n  [2]: https://stackoverflow.com/questions/24633913/how-do-i-get-an-intstream-from-a-listinteger","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p><strong>Java 8</strong> has given us an easy way to do this via streams...</p>\n\n<p>Using the collections <code>stream()</code> function and then mapping to ints, you'll get an IntStream. With the <code>IntStream</code> we can call toArray() which gives us <code>int []</code></p>\n\n<pre><code>int [] ints = list.stream().mapToInt(Integer::intValue).toArray();\n</code></pre>\n\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html\" rel=\"noreferrer\">to int []</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/24633913/how-do-i-get-an-intstream-from-a-listinteger\">to IntStream</a></p>\n"},{"tags":[],"owner":{"account_id":2094393,"reputation":1989,"user_id":1863510,"display_name":"THANN Phearum"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1477901065,"creation_date":1477901065,"answer_id":40338454,"question_id":960431,"body_markdown":"This simple loop is always correct! no bugs\r\n\r\n      int[] integers = new int[myList.size()];\r\n      for (int i = 0; i &lt; integers.length; i++) {\r\n          integers[i] = myList.get(i);\r\n      }","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>This simple loop is always correct! no bugs</p>\n\n<pre><code>  int[] integers = new int[myList.size()];\n  for (int i = 0; i &lt; integers.length; i++) {\n      integers[i] = myList.get(i);\n  }\n</code></pre>\n"}],"owner":{"display_name":"unknown"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":776373,"favorite_count":0,"down_vote_count":1,"up_vote_count":768,"closed_date":1540381860,"accepted_answer_id":960449,"answer_count":16,"score":767,"last_activity_date":1681117697,"creation_date":1244319618,"question_id":960431,"body_markdown":"How can I convert a `List&lt;Integer&gt;` to `int[]` in Java?\r\n\r\nI&#39;m confused because `List.toArray()` actually returns an `Object[]`, which can be cast to neither `Integer[]` nor `int[]`.\r\n\r\nRight now I&#39;m using a loop to do so:\r\n\r\n    int[] toIntArray(List&lt;Integer&gt; list) {\r\n      int[] ret = new int[list.size()];\r\n      for(int i = 0; i &lt; ret.length; i++)\r\n        ret[i] = list.get(i);\r\n      return ret;\r\n    }\r\n\r\nIs there&#39;s a better way to do this?\r\n\r\n&lt;sub&gt;This is similar to the question\r\n*https://stackoverflow.com/questions/880581/java-convert-int-to-integer*.&lt;/sub&gt;\r\n\r\n\r\n","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>How can I convert a <code>List&lt;Integer&gt;</code> to <code>int[]</code> in Java?</p>\n<p>I'm confused because <code>List.toArray()</code> actually returns an <code>Object[]</code>, which can be cast to neither <code>Integer[]</code> nor <code>int[]</code>.</p>\n<p>Right now I'm using a loop to do so:</p>\n<pre><code>int[] toIntArray(List&lt;Integer&gt; list) {\n  int[] ret = new int[list.size()];\n  for(int i = 0; i &lt; ret.length; i++)\n    ret[i] = list.get(i);\n  return ret;\n}\n</code></pre>\n<p>Is there's a better way to do this?</p>\n<p><sub>This is similar to the question\n<em><a href=\"https://stackoverflow.com/questions/880581/java-convert-int-to-integer\">How can I convert int[] to Integer[] in Java?</a></em>.</sub></p>\n"},{"tags":["java","urlencode","oauth-1.0a"],"answers":[{"tags":[],"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681117429,"creation_date":1681117429,"answer_id":75975708,"question_id":75974411,"body_markdown":"You are overthinking it. The way java stores strings internally is completely irrelevant to the matter and is transparent to you as a programmer. Just set your string as a header value and it will work. I wrote my own simplified Http client based on `HttpsURLConnection` class and I used it it to set auth header for authentication as well as many other headers and it works just fine. Here is a [Javadoc for my HttpClient][1] and here is a [GitHub][2] page for my MgntUtils Library. There you can see the source code. Here is the [HttpClient class source code][3]. See the line 344.\r\n\r\n\r\n  [1]: http://michaelgantman.github.io/Mgnt/docs/com/mgnt/lifecycle/management/httpclient/HttpClient.html\r\n  [2]: https://github.com/michaelgantman/Mgnt\r\n  [3]: https://github.com/michaelgantman/Mgnt/blob/master/src/main/java/com/mgnt/lifecycle/management/httpclient/HttpClient.java","title":"Set Authorization Header with UTF-8 in Java","body":"<p>You are overthinking it. The way java stores strings internally is completely irrelevant to the matter and is transparent to you as a programmer. Just set your string as a header value and it will work. I wrote my own simplified Http client based on <code>HttpsURLConnection</code> class and I used it it to set auth header for authentication as well as many other headers and it works just fine. Here is a <a href=\"http://michaelgantman.github.io/Mgnt/docs/com/mgnt/lifecycle/management/httpclient/HttpClient.html\" rel=\"nofollow noreferrer\">Javadoc for my HttpClient</a> and here is a <a href=\"https://github.com/michaelgantman/Mgnt\" rel=\"nofollow noreferrer\">GitHub</a> page for my MgntUtils Library. There you can see the source code. Here is the <a href=\"https://github.com/michaelgantman/Mgnt/blob/master/src/main/java/com/mgnt/lifecycle/management/httpclient/HttpClient.java\" rel=\"nofollow noreferrer\">HttpClient class source code</a>. See the line 344.</p>\n"}],"owner":{"account_id":14337166,"reputation":69,"user_id":19422364,"display_name":"HLR"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":138,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1681121395,"accepted_answer_id":75975708,"answer_count":1,"score":0,"last_activity_date":1681117429,"creation_date":1681103403,"question_id":75974411,"body_markdown":"I am trying to perform the OAuth 1.0a authentication flow using Java. OAuth 1.0a requires &quot;All parameter names and values [to be] escaped using the RFC3985 percent-encoding mechanism... Text names and values MUST be encoded as UTF-8 octets.&quot; I would like to use the HttpsURLConnection class and use the setRequestProperty method to add the oauth parameters to the Authentication header. However, Java internally stores strings with UTF-16 encoding. I built a method that performs the percent encoding for me, so the string &quot;Hello World!&quot; is successfully changed to &quot;Hello%20World%21&quot;. Even though it follows percent-encoding, it is still internally stored in UTF-16. If I pass this string into the setRequestProperty under an arbitrary key, this would be unreadable to a server accepting UTF-8 data. How do I add UTF-8 text to an HTTP header? The setRequestProperty method takes two Strings, so no matter what, I can only pass in data stored in UTF-16. I have also converted the text data to a byte array that is in UTF-8 format, but I cannot use an array as input to the setRequestProperty.","title":"Set Authorization Header with UTF-8 in Java","body":"<p>I am trying to perform the OAuth 1.0a authentication flow using Java. OAuth 1.0a requires &quot;All parameter names and values [to be] escaped using the RFC3985 percent-encoding mechanism... Text names and values MUST be encoded as UTF-8 octets.&quot; I would like to use the HttpsURLConnection class and use the setRequestProperty method to add the oauth parameters to the Authentication header. However, Java internally stores strings with UTF-16 encoding. I built a method that performs the percent encoding for me, so the string &quot;Hello World!&quot; is successfully changed to &quot;Hello%20World%21&quot;. Even though it follows percent-encoding, it is still internally stored in UTF-16. If I pass this string into the setRequestProperty under an arbitrary key, this would be unreadable to a server accepting UTF-8 data. How do I add UTF-8 text to an HTTP header? The setRequestProperty method takes two Strings, so no matter what, I can only pass in data stored in UTF-16. I have also converted the text data to a byte array that is in UTF-8 format, but I cannot use an array as input to the setRequestProperty.</p>\n"},{"tags":["java","kotlin","generics"],"comments":[{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1681118447,"post_id":75975585,"comment_id":134000872,"body_markdown":"The most viable solution is going to be to remove the generics on the method and to override it in SettingColor to return a SettingColor.  That&#39;s as good as it&#39;s going to get.","body":"The most viable solution is going to be to remove the generics on the method and to override it in SettingColor to return a SettingColor.  That&#39;s as good as it&#39;s going to get."}],"owner":{"account_id":25807987,"reputation":63,"user_id":19549245,"display_name":"OffeeX"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":315,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1681117021,"creation_date":1681116367,"question_id":75975585,"body_markdown":"`val color = setting(&quot;Color&quot;).color().depend(mode) { mode.like(&quot;Lightmap&quot;) }`\r\n\r\n```\r\nclass SettingColor(n: String, d: String, val color: ColorMutable) : Setting(n, d)\r\n```\r\n\r\n```\r\nabstract class Setting(var name: String, val description: String) {\r\n    fun &lt;T : Setting&gt;depend(vararg dependencies: Setting, resolver: () -&gt; Boolean): T {\r\n\t\treturn this as T\r\n\t}\r\n    class Builder(\r\n\t    private val m: Module,\r\n\t    private val n: String,\r\n\t    private val d: String\r\n    ) {\r\n        private fun &lt;S : Setting&gt;Module.setup(s: S): S {\r\n\t\t\t  g?.settings?.add(s)\r\n\t\t\t  this.addSetting(s)\r\n\t\t\t  return s\r\n\t\t}\r\n        fun color(color: ColorMutable = ColorMutable.WHITE) = m.setup(SettingColor(n, d, color))\r\n}\r\n```\r\n\r\n\r\nProblem with the `depend()` method. My IDE says, there are not enough info to infer type of T. However  `color()` method i&#39;m using here instantiates `SettingColor`, which is a direct child of the \r\n`Setting` class, in which `depend()` method is written in.\r\n\r\nThe only possible solution, which i don&#39;t really want to stick to, is to explicitly set type for `depend()` like this:\r\n\r\n`val color = setting(&quot;Color&quot;).color().depend&lt;SettingColor&gt;(mode) { mode.like(&quot;Lightmap&quot;) }`\r\n\r\nUPD: Kotlin version is 1.8.10","title":"Kotlin: Not enough information to infer type variable T","body":"<p><code>val color = setting(&quot;Color&quot;).color().depend(mode) { mode.like(&quot;Lightmap&quot;) }</code></p>\n<pre><code>class SettingColor(n: String, d: String, val color: ColorMutable) : Setting(n, d)\n</code></pre>\n<pre><code>abstract class Setting(var name: String, val description: String) {\n    fun &lt;T : Setting&gt;depend(vararg dependencies: Setting, resolver: () -&gt; Boolean): T {\n        return this as T\n    }\n    class Builder(\n        private val m: Module,\n        private val n: String,\n        private val d: String\n    ) {\n        private fun &lt;S : Setting&gt;Module.setup(s: S): S {\n              g?.settings?.add(s)\n              this.addSetting(s)\n              return s\n        }\n        fun color(color: ColorMutable = ColorMutable.WHITE) = m.setup(SettingColor(n, d, color))\n}\n</code></pre>\n<p>Problem with the <code>depend()</code> method. My IDE says, there are not enough info to infer type of T. However  <code>color()</code> method i'm using here instantiates <code>SettingColor</code>, which is a direct child of the\n<code>Setting</code> class, in which <code>depend()</code> method is written in.</p>\n<p>The only possible solution, which i don't really want to stick to, is to explicitly set type for <code>depend()</code> like this:</p>\n<p><code>val color = setting(&quot;Color&quot;).color().depend&lt;SettingColor&gt;(mode) { mode.like(&quot;Lightmap&quot;) }</code></p>\n<p>UPD: Kotlin version is 1.8.10</p>\n"},{"tags":["java","audio"],"answers":[{"tags":[],"owner":{"account_id":9934708,"reputation":997,"user_id":7353417,"display_name":"pierpy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681116773,"creation_date":1681116773,"answer_id":75975633,"question_id":75971209,"body_markdown":"The reverb is tied to MIDI CC 91. You need to set a message to that controller with value `0` , before sending `channel.noteOn` message. Maybe you want to set to `0` all other effects, so take a look at [Control change messages specifications](https://www.midi.org/specifications-old/item/table-3-control-change-messages-data-bytes-2)","title":"How can I create a sound with Java without special effects being added to it?","body":"<p>The reverb is tied to MIDI CC 91. You need to set a message to that controller with value <code>0</code> , before sending <code>channel.noteOn</code> message. Maybe you want to set to <code>0</code> all other effects, so take a look at <a href=\"https://www.midi.org/specifications-old/item/table-3-control-change-messages-data-bytes-2\" rel=\"nofollow noreferrer\">Control change messages specifications</a></p>\n"}],"owner":{"account_id":25160220,"reputation":1,"user_id":19004507,"display_name":"RyanJK5"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1681116773,"creation_date":1681052178,"question_id":75971209,"body_markdown":"I&#39;ve been trying to figure this out for a while now. This is the code I&#39;m using to play sounds:\r\n\r\n    private void playSound(int num) {\r\n        if (num &lt; 0) {\r\n            return;\r\n        }\r\n        MidiChannel channel = synth.getChannels()[0];\r\n        final int note = (int) (127f / maxNum * num);\r\n        channel.noteOn(note, 80);\r\n    }\r\nAll the MIDI channels have some kind of reverb or added effects on them. I tried stopping the sound after sleeping for a given amount of time (tried using both noteOff and noteOn with a velocity of 0), but the note never stops playing when I call these methods. For context, I&#39;m trying to recreate one of those [sorting algorithm visualizers](https://youtu.be/kPRA0W1kECg), so I want the sounds being played to sound similar to that.","title":"How can I create a sound with Java without special effects being added to it?","body":"<p>I've been trying to figure this out for a while now. This is the code I'm using to play sounds:</p>\n<pre><code>private void playSound(int num) {\n    if (num &lt; 0) {\n        return;\n    }\n    MidiChannel channel = synth.getChannels()[0];\n    final int note = (int) (127f / maxNum * num);\n    channel.noteOn(note, 80);\n}\n</code></pre>\n<p>All the MIDI channels have some kind of reverb or added effects on them. I tried stopping the sound after sleeping for a given amount of time (tried using both noteOff and noteOn with a velocity of 0), but the note never stops playing when I call these methods. For context, I'm trying to recreate one of those <a href=\"https://youtu.be/kPRA0W1kECg\" rel=\"nofollow noreferrer\">sorting algorithm visualizers</a>, so I want the sounds being played to sound similar to that.</p>\n"},{"tags":["java","intellij-idea","casting","compiler-warnings","redundancy"],"answers":[{"tags":[],"owner":{"account_id":2818342,"reputation":299838,"user_id":2422776,"display_name":"Mureinik"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1681116199,"creation_date":1681116199,"answer_id":75975567,"question_id":75975539,"body_markdown":"The value type of the map is `Function&lt;Object, ?&gt;` - i.e., it doesn&#39;t matter what the return type of the function is.\r\n\r\nSince casting doesn&#39;t really &quot;do&quot; anything, just let&#39;s the compiler know the type of the object, and since you don&#39;t need it to be a string in order to compile, you can just remove it.\r\n\r\nHaving said that, there also is no reason to &quot;reimplement&quot; the function `v -&gt; v`, and you could use `Function.identity()` instead.","title":"Casting to String is redundant","body":"<p>The value type of the map is <code>Function&lt;Object, ?&gt;</code> - i.e., it doesn't matter what the return type of the function is.</p>\n<p>Since casting doesn't really &quot;do&quot; anything, just let's the compiler know the type of the object, and since you don't need it to be a string in order to compile, you can just remove it.</p>\n<p>Having said that, there also is no reason to &quot;reimplement&quot; the function <code>v -&gt; v</code>, and you could use <code>Function.identity()</code> instead.</p>\n"}],"owner":{"account_id":4108248,"reputation":552,"user_id":3371582,"display_name":"IJR"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":166,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75975567,"answer_count":1,"score":0,"last_activity_date":1681116357,"creation_date":1681115860,"question_id":75975539,"body_markdown":"Why does IntelliJ tell this casting from Object to String is redundant?\r\n\r\n\r\n    public class Utils {\r\n    \t\r\n    \tprivate static Map&lt;Class, Function&lt;Object, ?&gt;&gt; functions = new HashMap&lt;&gt;();\r\n    \t\r\n    \tstatic {\r\n    \t\tfunctions.put(String.class, v -&gt; (String) v);\r\n    \t\tfunctions.put(Foo.class, v -&gt; {\r\n    \t\t\tFoo foo = new Foo();\r\n    \t\t\tfoo.setA((String) ((Map&lt;String, Object&gt;) v).get(&quot;A&quot;));\r\n    \t\t\tfoo.setB((String) ((Map&lt;String, Object&gt;) v).get(&quot;B&quot;));\r\n    \t\t\treturn foo;\r\n    \t\t});\r\n    \t}\r\n    }\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1nv0I.png","title":"Casting to String is redundant","body":"<p>Why does IntelliJ tell this casting from Object to String is redundant?</p>\n<pre><code>public class Utils {\n    \n    private static Map&lt;Class, Function&lt;Object, ?&gt;&gt; functions = new HashMap&lt;&gt;();\n    \n    static {\n        functions.put(String.class, v -&gt; (String) v);\n        functions.put(Foo.class, v -&gt; {\n            Foo foo = new Foo();\n            foo.setA((String) ((Map&lt;String, Object&gt;) v).get(&quot;A&quot;));\n            foo.setB((String) ((Map&lt;String, Object&gt;) v).get(&quot;B&quot;));\n            return foo;\n        });\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/1nv0I.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1nv0I.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring","hibernate","jackson"],"comments":[{"owner":{"account_id":24109083,"reputation":150,"user_id":18079889,"display_name":"Mohammed Fataka"},"score":0,"creation_date":1681045924,"post_id":75969017,"comment_id":133992811,"body_markdown":"Does this answer your question? [Spring Boot @ManyToOne only Id @JsonProperty](https://stackoverflow.com/questions/60357405/spring-boot-manytoone-only-id-jsonproperty)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/60357405/spring-boot-manytoone-only-id-jsonproperty\">Spring Boot @ManyToOne only Id @JsonProperty</a>"}],"answers":[{"tags":[],"owner":{"account_id":2261604,"reputation":72,"user_id":1991545,"display_name":"abhi_88"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681116158,"creation_date":1681116158,"answer_id":75975563,"question_id":75969017,"body_markdown":"Try to implement link using hateoas.  Here is a sample request data.    \r\n\r\n    {\r\n    &quot;title&quot;: &quot;Model&quot;,\r\n    &quot;sex&quot;: &quot;CHILD&quot;,\r\n    &quot;manufacturer&quot;: \r\n\t            &quot;_links&quot;: {\r\n                &quot;self&quot;: {\r\n                    &quot;href&quot;: &quot;/manufacturers/1&quot;\r\n                }\r\n            },\r\n    &quot;sizes&quot;: [\r\n      {\r\n        &quot;size&quot;: 37,\r\n        &quot;quantity&quot;: 5\r\n      },\r\n      {\r\n        &quot;size&quot;: 39,\r\n        &quot;quantity&quot;: 4\r\n      }\r\n    ]\r\n  }\r\nNow no need to provide all Manufacturer fields in request data, instead you need to provide only id/","title":"How to send only Id foreign key in POST request via JSON?","body":"<p>Try to implement link using hateoas.  Here is a sample request data.</p>\n<pre><code>{\n&quot;title&quot;: &quot;Model&quot;,\n&quot;sex&quot;: &quot;CHILD&quot;,\n&quot;manufacturer&quot;: \n            &quot;_links&quot;: {\n            &quot;self&quot;: {\n                &quot;href&quot;: &quot;/manufacturers/1&quot;\n            }\n        },\n&quot;sizes&quot;: [\n  {\n    &quot;size&quot;: 37,\n    &quot;quantity&quot;: 5\n  },\n  {\n    &quot;size&quot;: 39,\n    &quot;quantity&quot;: 4\n  }\n]\n</code></pre>\n<p>}\nNow no need to provide all Manufacturer fields in request data, instead you need to provide only id/</p>\n"}],"owner":{"account_id":26929571,"reputation":25,"user_id":20502277,"display_name":"velovatik"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":132,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1681116158,"creation_date":1681020352,"question_id":75969017,"body_markdown":"I make internet shoe shop and now I create REST Controller for its goods, so now I&#39;m testing POST request and I have relation to good&#39;s manufacturer with manufacturerId\r\n[![DB Architecture](https://i.stack.imgur.com/asonT.png)](https://i.stack.imgur.com/asonT.png)\r\nBut now I need to write all information about manufacturer into JSON, but I think it&#39;s not a good practice to act like that.\r\n\r\nGood entity:\r\n```\r\n@Entity\r\n@Table(name = &quot;goods&quot;)\r\npublic class Good {\r\n    @Id\r\n    @Column(name = &quot;id&quot;)\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    //@JsonIgnore\r\n    private int id;\r\n\r\n    @Column(name = &quot;Title&quot;)\r\n    private String title;\r\n\r\n//    @Enumerated(EnumType.STRING)\r\n//    @Column(name = &quot;sex&quot;)\r\n//    private sexType sexType;\r\n\r\n    @Column(name = &quot;sex&quot;)\r\n    private String sex;\r\n\r\n    /**\r\n     * proved and it actually works!\r\n     */\r\n    //@JsonManagedReference\r\n    @ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.DETACH,\r\n    CascadeType.REFRESH, CascadeType.MERGE})\r\n    @JoinColumn(name = &quot;ManufacturerId&quot;)\r\n    //@JsonIgnoreProperties\r\n    Manufacturer manufacturer; //Many goods can refer to one manufacturer\r\n\r\n\r\n    @JsonManagedReference\r\n    @OneToMany(cascade = {CascadeType.PERSIST, CascadeType.DETACH,\r\n            CascadeType.REFRESH, CascadeType.MERGE}, mappedBy = &quot;good&quot;)//Uni-directional reference to size array\r\n    List&lt;Size&gt; sizes;\r\n```\r\n\r\nManufacturer entity:\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;manufacturers&quot;)\r\npublic class Manufacturer {\r\n    @Id\r\n    @Column(name = &quot;id&quot;)\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private int id;\r\n\r\n    @Column(name = &quot;ManufacturerName&quot;)\r\n    private String manufacturerName;\r\n\r\n    @Column(name = &quot;Address&quot;)\r\n    private String address;\r\n\r\n    @Column(name = &quot;Telephone&quot;)\r\n    private String telephone;\r\n\r\n    //@JsonBackReference\r\n    @OneToMany(cascade = {CascadeType.PERSIST, CascadeType.DETACH,\r\n            CascadeType.REFRESH, CascadeType.MERGE},\r\n            mappedBy = &quot;manufacturer&quot;)\r\n    @JsonIgnore\r\n    private List&lt;Good&gt; goods;\r\n```\r\nJSON example for POST request:\r\n\r\n```\r\n  {\r\n    &quot;title&quot;: &quot;Model&quot;,\r\n    &quot;sex&quot;: &quot;CHILD&quot;,\r\n    &quot;manufacturer&quot;: {\r\n      &quot;id&quot;: 1,\r\n      &quot;manufacturerName&quot;: &quot;Ralf&quot;,\r\n      &quot;address&quot;: &quot;Moscow&quot;,\r\n      &quot;telephone&quot;: &quot;9-999-999-99-99&quot;\r\n    },\r\n    &quot;sizes&quot;: [\r\n      {\r\n        &quot;size&quot;: 37,\r\n        &quot;quantity&quot;: 5\r\n      },\r\n      {\r\n        &quot;size&quot;: 39,\r\n        &quot;quantity&quot;: 4\r\n      }\r\n    ]\r\n  }\r\n```\r\nHow can I send only manufacturerId?\r\n\r\n\r\nIf I use `@JsonIgnore` annotatinon, I think I won&#39;t get additional info about manufacturer","title":"How to send only Id foreign key in POST request via JSON?","body":"<p>I make internet shoe shop and now I create REST Controller for its goods, so now I'm testing POST request and I have relation to good's manufacturer with manufacturerId\n<a href=\"https://i.stack.imgur.com/asonT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/asonT.png\" alt=\"DB Architecture\" /></a>\nBut now I need to write all information about manufacturer into JSON, but I think it's not a good practice to act like that.</p>\n<p>Good entity:</p>\n<pre><code>@Entity\n@Table(name = &quot;goods&quot;)\npublic class Good {\n    @Id\n    @Column(name = &quot;id&quot;)\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    //@JsonIgnore\n    private int id;\n\n    @Column(name = &quot;Title&quot;)\n    private String title;\n\n//    @Enumerated(EnumType.STRING)\n//    @Column(name = &quot;sex&quot;)\n//    private sexType sexType;\n\n    @Column(name = &quot;sex&quot;)\n    private String sex;\n\n    /**\n     * proved and it actually works!\n     */\n    //@JsonManagedReference\n    @ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.DETACH,\n    CascadeType.REFRESH, CascadeType.MERGE})\n    @JoinColumn(name = &quot;ManufacturerId&quot;)\n    //@JsonIgnoreProperties\n    Manufacturer manufacturer; //Many goods can refer to one manufacturer\n\n\n    @JsonManagedReference\n    @OneToMany(cascade = {CascadeType.PERSIST, CascadeType.DETACH,\n            CascadeType.REFRESH, CascadeType.MERGE}, mappedBy = &quot;good&quot;)//Uni-directional reference to size array\n    List&lt;Size&gt; sizes;\n</code></pre>\n<p>Manufacturer entity:</p>\n<pre><code>@Entity\n@Table(name = &quot;manufacturers&quot;)\npublic class Manufacturer {\n    @Id\n    @Column(name = &quot;id&quot;)\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int id;\n\n    @Column(name = &quot;ManufacturerName&quot;)\n    private String manufacturerName;\n\n    @Column(name = &quot;Address&quot;)\n    private String address;\n\n    @Column(name = &quot;Telephone&quot;)\n    private String telephone;\n\n    //@JsonBackReference\n    @OneToMany(cascade = {CascadeType.PERSIST, CascadeType.DETACH,\n            CascadeType.REFRESH, CascadeType.MERGE},\n            mappedBy = &quot;manufacturer&quot;)\n    @JsonIgnore\n    private List&lt;Good&gt; goods;\n</code></pre>\n<p>JSON example for POST request:</p>\n<pre><code>  {\n    &quot;title&quot;: &quot;Model&quot;,\n    &quot;sex&quot;: &quot;CHILD&quot;,\n    &quot;manufacturer&quot;: {\n      &quot;id&quot;: 1,\n      &quot;manufacturerName&quot;: &quot;Ralf&quot;,\n      &quot;address&quot;: &quot;Moscow&quot;,\n      &quot;telephone&quot;: &quot;9-999-999-99-99&quot;\n    },\n    &quot;sizes&quot;: [\n      {\n        &quot;size&quot;: 37,\n        &quot;quantity&quot;: 5\n      },\n      {\n        &quot;size&quot;: 39,\n        &quot;quantity&quot;: 4\n      }\n    ]\n  }\n</code></pre>\n<p>How can I send only manufacturerId?</p>\n<p>If I use <code>@JsonIgnore</code> annotatinon, I think I won't get additional info about manufacturer</p>\n"},{"tags":["java","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1617492659,"post_id":66936394,"comment_id":118320327,"body_markdown":"Note that assigning this as a field default means that your application will be consuming a huge amount of randomness for no reason (as most object instances are not about to be persisted); using `@GeneratedValue` is nearly always preferable.","body":"Note that assigning this as a field default means that your application will be consuming a huge amount of randomness for no reason (as most object instances are not about to be persisted); using <code>@GeneratedValue</code> is nearly always preferable."}],"answers":[{"tags":[],"owner":{"account_id":298886,"reputation":40480,"user_id":605153,"accept_rate":67,"display_name":"Mark Bramnik"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1667728969,"creation_date":1617491723,"answer_id":66936685,"question_id":66936394,"body_markdown":"I&#39;m not a hibernate specialist, however, if you do it like this, in general, it should be kind of ok, which means that the probability of collision is low, however &quot;what if&quot; there is a collision? In other words, you can&#39;t be 100% sure that you&#39;re &quot;guaranteed to avoid collision&quot;. If your system can deal with collision (re-create a UUID for example, assuming that performance penalty is negligible because this will happen in extremely rare cases) then no problem of course.\r\n\r\nNow the real question is whether there is something else that can be done here?\r\nWell, Hibernate is able to generate the `UUID` in a way that also uses an IP of the machine as a parameter of generation: \r\n\r\n~~~\r\n@Entity\r\npublic class SampleEntity {\r\n \r\n    @Id\r\n    @GeneratedValue(generator = &quot;UUID&quot;)\r\n    @GenericGenerator(\r\n        name = &quot;UUID&quot;,\r\n        strategy = &quot;org.hibernate.id.UUIDGenerator&quot;,\r\n        parameters = {\r\n            @Parameter(\r\n                name = &quot;uuid_gen_strategy_class&quot;,\r\n                value = &quot;org.hibernate.id.uuid.CustomVersionOneStrategy&quot;\r\n            )\r\n        }\r\n    )\r\n    @Column(name = &quot;id&quot;, updatable = false, nullable = false)\r\n    private UUID id;\r\n     \r\n    \r\n}\r\n~~~\r\n\r\nFor more information read [here][1] for example\r\n\r\nOf course, the best approach would be to let the DB deal with the ID generation. You haven&#39;t specified which database do you use. For example, Postgresql allows generating UUID keys with the help of extension:\r\n\r\nRead [here][2] for example.\r\n\r\nIn general, using the UUID is not always a good idea - it&#39;s hard to deal with them in day-to-day life, and in general they introduce an overhead that might be significant if there are many rows in the table. So you might consider using an auto-increment sequence or something for the primary key - DB will be able to do it and you won&#39;t need to bother. \r\n\r\n\r\n  [1]: https://thorben-janssen.com/generate-uuids-primary-keys-hibernate/\r\n  [2]: https://www.postgresqltutorial.com/postgresql-uuid/","title":"UUID primary key for JPA Entity: safe approach to use unique values on multiple instances","body":"<p>I'm not a hibernate specialist, however, if you do it like this, in general, it should be kind of ok, which means that the probability of collision is low, however &quot;what if&quot; there is a collision? In other words, you can't be 100% sure that you're &quot;guaranteed to avoid collision&quot;. If your system can deal with collision (re-create a UUID for example, assuming that performance penalty is negligible because this will happen in extremely rare cases) then no problem of course.</p>\n<p>Now the real question is whether there is something else that can be done here?\nWell, Hibernate is able to generate the <code>UUID</code> in a way that also uses an IP of the machine as a parameter of generation:</p>\n<pre><code>@Entity\npublic class SampleEntity {\n \n    @Id\n    @GeneratedValue(generator = &quot;UUID&quot;)\n    @GenericGenerator(\n        name = &quot;UUID&quot;,\n        strategy = &quot;org.hibernate.id.UUIDGenerator&quot;,\n        parameters = {\n            @Parameter(\n                name = &quot;uuid_gen_strategy_class&quot;,\n                value = &quot;org.hibernate.id.uuid.CustomVersionOneStrategy&quot;\n            )\n        }\n    )\n    @Column(name = &quot;id&quot;, updatable = false, nullable = false)\n    private UUID id;\n     \n    \n}\n</code></pre>\n<p>For more information read <a href=\"https://thorben-janssen.com/generate-uuids-primary-keys-hibernate/\" rel=\"nofollow noreferrer\">here</a> for example</p>\n<p>Of course, the best approach would be to let the DB deal with the ID generation. You haven't specified which database do you use. For example, Postgresql allows generating UUID keys with the help of extension:</p>\n<p>Read <a href=\"https://www.postgresqltutorial.com/postgresql-uuid/\" rel=\"nofollow noreferrer\">here</a> for example.</p>\n<p>In general, using the UUID is not always a good idea - it's hard to deal with them in day-to-day life, and in general they introduce an overhead that might be significant if there are many rows in the table. So you might consider using an auto-increment sequence or something for the primary key - DB will be able to do it and you won't need to bother.</p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1667755851,"creation_date":1617491733,"answer_id":66936686,"question_id":66936394,"body_markdown":"&gt;`UUID uuid = UUID.randomUUID()`\r\n&gt;\r\n&gt;My doubt is this: Is this approach safe? Can I be sure ids will always be unique?\r\n\r\nYes, *extremely* safe. \r\n\r\nA [UUID Version 4][1] has 122 bits of randomly generated data. That is a *vast* range of numbers. Assuming your UUID is being generated with a [cryptographically-strong random number generator][2], you have no practical concerns with using a randomly-generated UUID. \r\n\r\nFor details, see the [*Collisions*][3] section on Wikipedia.\r\n\r\nIf you want to worry, apply your worry to things that are *much* more likely to happen. Top in my mind: [Cosmic rays][4] [flipping bits][5] in non-[EEC memory][6]. (See valid [rant by Linus Torvalds][7] on the issue.) \r\n\r\nPersonally, I consider the point-in-space-and-time versions such as Version 1 to be even less of a concern for collisions. But others debate this. Either way, Version 1 or Version 4, I would sleep well.\r\n\r\nDespite saying the above, you should still ensure that your code is written to be robust in the face of collisions. Not because of collisions from randomly-generated duplicates, but because of collision from the all-too-human possibilities such as a bug in your code that double-posts the record to database, or a DBA who mistakenly loads back-up data twice, and so on. \r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Universally_unique_identifier#Version_4_(random)\r\n  [2]: https://en.wikipedia.org/wiki/Cryptographically_secure_pseudorandom_number_generator\r\n  [3]: https://en.wikipedia.org/wiki/Universally_unique_identifier#Collisions\r\n  [4]: https://en.m.wikipedia.org/wiki/Cosmic_ray\r\n  [5]: https://en.m.wikipedia.org/wiki/Cosmic_ray#Effect_on_electronics\r\n  [6]: https://en.wikipedia.org/wiki/ECC_memory\r\n  [7]: https://www.theregister.com/2021/01/04/linus_torvalds_intel_killed_ecc/","title":"UUID primary key for JPA Entity: safe approach to use unique values on multiple instances","body":"<blockquote>\n<p><code>UUID uuid = UUID.randomUUID()</code></p>\n<p>My doubt is this: Is this approach safe? Can I be sure ids will always be unique?</p>\n</blockquote>\n<p>Yes, <em>extremely</em> safe.</p>\n<p>A <a href=\"https://en.wikipedia.org/wiki/Universally_unique_identifier#Version_4_(random)\" rel=\"nofollow noreferrer\">UUID Version 4</a> has 122 bits of randomly generated data. That is a <em>vast</em> range of numbers. Assuming your UUID is being generated with a <a href=\"https://en.wikipedia.org/wiki/Cryptographically_secure_pseudorandom_number_generator\" rel=\"nofollow noreferrer\">cryptographically-strong random number generator</a>, you have no practical concerns with using a randomly-generated UUID.</p>\n<p>For details, see the <a href=\"https://en.wikipedia.org/wiki/Universally_unique_identifier#Collisions\" rel=\"nofollow noreferrer\"><em>Collisions</em></a> section on Wikipedia.</p>\n<p>If you want to worry, apply your worry to things that are <em>much</em> more likely to happen. Top in my mind: <a href=\"https://en.m.wikipedia.org/wiki/Cosmic_ray\" rel=\"nofollow noreferrer\">Cosmic rays</a> <a href=\"https://en.m.wikipedia.org/wiki/Cosmic_ray#Effect_on_electronics\" rel=\"nofollow noreferrer\">flipping bits</a> in non-<a href=\"https://en.wikipedia.org/wiki/ECC_memory\" rel=\"nofollow noreferrer\">EEC memory</a>. (See valid <a href=\"https://www.theregister.com/2021/01/04/linus_torvalds_intel_killed_ecc/\" rel=\"nofollow noreferrer\">rant by Linus Torvalds</a> on the issue.)</p>\n<p>Personally, I consider the point-in-space-and-time versions such as Version 1 to be even less of a concern for collisions. But others debate this. Either way, Version 1 or Version 4, I would sleep well.</p>\n<p>Despite saying the above, you should still ensure that your code is written to be robust in the face of collisions. Not because of collisions from randomly-generated duplicates, but because of collision from the all-too-human possibilities such as a bug in your code that double-posts the record to database, or a DBA who mistakenly loads back-up data twice, and so on.</p>\n"},{"tags":[],"owner":{"account_id":19370048,"reputation":659,"user_id":14163532,"display_name":"PKS"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1681116089,"creation_date":1681116089,"answer_id":75975553,"question_id":66936394,"body_markdown":"For those who are using hibernate 6.0+ then write the following way\r\n\r\n      @Id\r\n      @GeneratedValue(strategy = UUID)\r\n      UUID id;","title":"UUID primary key for JPA Entity: safe approach to use unique values on multiple instances","body":"<p>For those who are using hibernate 6.0+ then write the following way</p>\n<pre><code>  @Id\n  @GeneratedValue(strategy = UUID)\n  UUID id;\n</code></pre>\n"}],"owner":{"account_id":254664,"reputation":11551,"user_id":534218,"accept_rate":54,"display_name":"Safari"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35755,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"answer_count":3,"score":12,"last_activity_date":1681116089,"creation_date":1617488714,"question_id":66936394,"body_markdown":"I&#39;m using SpringBoot, JPA and Hibernate.\r\n\r\nI have a doubt.\r\n\r\nFor my entities I need to have an UUID as primary key (and I would like to save this id in &quot;clear mode&quot; (string) and not binary)\r\n\r\nI&#39;m using this code:\r\n\r\n    @Id\r\n    @Column(name = &quot;id&quot;)\r\n    @Type(type = &quot;uuid-char&quot;)\r\n    private UUID uuid = UUID.randomUUID();\r\n\r\nMy doubt is this: Is this approach safe? Can I be sure ids will always be unique?  \r\n\r\nI understand that, using this code, the UUID will be generated code side so, what&#39;s happen if I will have multiple instances for my service using the same DB service for all instances?\r\n\r\nIs it possible that more instances  will generate the same UUID?\r\n","title":"UUID primary key for JPA Entity: safe approach to use unique values on multiple instances","body":"<p>I'm using SpringBoot, JPA and Hibernate.</p>\n<p>I have a doubt.</p>\n<p>For my entities I need to have an UUID as primary key (and I would like to save this id in &quot;clear mode&quot; (string) and not binary)</p>\n<p>I'm using this code:</p>\n<pre><code>@Id\n@Column(name = &quot;id&quot;)\n@Type(type = &quot;uuid-char&quot;)\nprivate UUID uuid = UUID.randomUUID();\n</code></pre>\n<p>My doubt is this: Is this approach safe? Can I be sure ids will always be unique?</p>\n<p>I understand that, using this code, the UUID will be generated code side so, what's happen if I will have multiple instances for my service using the same DB service for all instances?</p>\n<p>Is it possible that more instances  will generate the same UUID?</p>\n"},{"tags":["java","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":1866848,"reputation":18503,"user_id":1690193,"accept_rate":93,"display_name":"Nick.Mc"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681115958,"creation_date":1681115958,"answer_id":75975547,"question_id":74569662,"body_markdown":"The root cause was that the springboot queries were using the wrong data type for a parameter, making the select queries non sargable, in turn requiring a table scan (rather than utilising the index)..... lots and lots of table scans that were hidden by scaling the server up to a huge core count. After we fixed the parameter data type in the query to match the search fields data type, db activity went waaaaaaay down and the problem disappeared. AFAIK the CannotAcquireLockException was a legitimate message - it couldn&#39;t actually acquire a shared lock it was simply too busy doing table scans and dealing with the data merge.","title":"Troubleshooting springboot locking issues","body":"<p>The root cause was that the springboot queries were using the wrong data type for a parameter, making the select queries non sargable, in turn requiring a table scan (rather than utilising the index)..... lots and lots of table scans that were hidden by scaling the server up to a huge core count. After we fixed the parameter data type in the query to match the search fields data type, db activity went waaaaaaay down and the problem disappeared. AFAIK the CannotAcquireLockException was a legitimate message - it couldn't actually acquire a shared lock it was simply too busy doing table scans and dealing with the data merge.</p>\n"}],"owner":{"account_id":1866848,"reputation":18503,"user_id":1690193,"accept_rate":93,"display_name":"Nick.Mc"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75975547,"answer_count":1,"score":1,"last_activity_date":1681115958,"creation_date":1669362614,"question_id":74569662,"body_markdown":"I&#39;m a DB guy with some app experience. I do not have a code sample so hoping someone with springboot experience can shed light on this.\r\n\r\nWe have Java code using springboot to select single rows out of the database all day (for a web  application)\r\n\r\nWe have a morning process which needs to merge into the same table. Target table has 1.3 million rows. Source table has between 8k to 16k rows\r\n\r\nUnder normal circumstances this merge is complete in under five minutes or so\r\n\r\nHowever in 3 out of 14 runs we have an issue where this activity collides with springboot select activity\r\n\r\nNote that all tables are indexes, queries optmised etc.\r\n\r\nWhat confuses me is that springboot is running a `select` query, however the error returned is\r\n\r\n&gt; CannotAcquireLockException\r\n\r\nWhen I check the [docs][1] it says\r\n\r\n&gt; Exception thrown on failure to acquire a lock during an update, for example during a &quot;select for update&quot; statement.\r\n\r\n**But this is not an update statement**\r\n\r\nAs far as I know it is not a SELECT FOR UPDATE statement.\r\n\r\nI&#39;m not too sharp on the Java code but I can see this code fragment:\r\n\r\n(Sorry for screenshot I&#39;ll come back and convert to code if anyone shows any interest)\r\n\r\n[![enter image description here][2]][2]\r\n\r\nIs `CrudRepository` automatically assuming this is write query and needlessly applying locks? can anyone tell me what to look for to confirm this query is set to read only?\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/dao/CannotAcquireLockException.html\r\n  [2]: https://i.stack.imgur.com/WVUxz.png","title":"Troubleshooting springboot locking issues","body":"<p>I'm a DB guy with some app experience. I do not have a code sample so hoping someone with springboot experience can shed light on this.</p>\n<p>We have Java code using springboot to select single rows out of the database all day (for a web  application)</p>\n<p>We have a morning process which needs to merge into the same table. Target table has 1.3 million rows. Source table has between 8k to 16k rows</p>\n<p>Under normal circumstances this merge is complete in under five minutes or so</p>\n<p>However in 3 out of 14 runs we have an issue where this activity collides with springboot select activity</p>\n<p>Note that all tables are indexes, queries optmised etc.</p>\n<p>What confuses me is that springboot is running a <code>select</code> query, however the error returned is</p>\n<blockquote>\n<p>CannotAcquireLockException</p>\n</blockquote>\n<p>When I check the <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/dao/CannotAcquireLockException.html\" rel=\"nofollow noreferrer\">docs</a> it says</p>\n<blockquote>\n<p>Exception thrown on failure to acquire a lock during an update, for example during a &quot;select for update&quot; statement.</p>\n</blockquote>\n<p><strong>But this is not an update statement</strong></p>\n<p>As far as I know it is not a SELECT FOR UPDATE statement.</p>\n<p>I'm not too sharp on the Java code but I can see this code fragment:</p>\n<p>(Sorry for screenshot I'll come back and convert to code if anyone shows any interest)</p>\n<p><a href=\"https://i.stack.imgur.com/WVUxz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WVUxz.png\" alt=\"enter image description here\" /></a></p>\n<p>Is <code>CrudRepository</code> automatically assuming this is write query and needlessly applying locks? can anyone tell me what to look for to confirm this query is set to read only?</p>\n"},{"tags":["java","security","ssl"],"answers":[{"tags":[],"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1460509243,"creation_date":1460509243,"answer_id":36586720,"question_id":36585744,"body_markdown":"If you&#39;re using a JDK, adding it to the JRE truststore won&#39;t help. You need to add it to the truststore of the JRE that comes inside the JDK.","title":"added certificate to java keystore, still error","body":"<p>If you're using a JDK, adding it to the JRE truststore won't help. You need to add it to the truststore of the JRE that comes inside the JDK.</p>\n"},{"tags":[],"owner":{"account_id":4923650,"reputation":985,"user_id":3965524,"accept_rate":91,"display_name":"JavaTec"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1461181963,"creation_date":1460560291,"answer_id":36602661,"question_id":36585744,"body_markdown":"There were two types of setup where we were able to make it work:\r\n\r\n1. On one machine, the person installing the JDk had done some changes to the folder structure for installing Java and had the following structure: Java/jre/lib/security as well as Java/lib/security. We added certificates to cacerts of Java/lib/security and it started to work\r\n\r\n2. On a second machine, where the user did the default istallation, the following folder structure existed: Java/jre_1.8/lib/security and Java/jdk_1.8/jre/lib/security. We updated cacerts at Java/jre_1.8/lib/security and it started to work (For some reason, updating cacartes at Java/jdk_1.8/jre/lib/security did not work)","title":"added certificate to java keystore, still error","body":"<p>There were two types of setup where we were able to make it work:</p>\n\n<ol>\n<li><p>On one machine, the person installing the JDk had done some changes to the folder structure for installing Java and had the following structure: Java/jre/lib/security as well as Java/lib/security. We added certificates to cacerts of Java/lib/security and it started to work</p></li>\n<li><p>On a second machine, where the user did the default istallation, the following folder structure existed: Java/jre_1.8/lib/security and Java/jdk_1.8/jre/lib/security. We updated cacerts at Java/jre_1.8/lib/security and it started to work (For some reason, updating cacartes at Java/jdk_1.8/jre/lib/security did not work)</p></li>\n</ol>\n"}],"owner":{"account_id":4923650,"reputation":985,"user_id":3965524,"accept_rate":91,"display_name":"JavaTec"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12832,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":36602661,"answer_count":2,"score":4,"last_activity_date":1681115878,"creation_date":1460502822,"question_id":36585744,"body_markdown":"Based on various web inputs, I have followed the following steps to add certificate to my local jdk keystore:\r\n\r\n1. Downloaded the certificates by hitting the following command from a Linux host: openssl s_client -connect MyService:443 -showcerts\r\n\r\n2. Copied the content between (and including) ------BEGIN CERTIFICATE-------- and --------END CERTIFICATE---------, saved it as C:\\Java\\jre\\lib\\security\\cer1.cer\r\n\r\n3. Typed: C:\\Java\\jre\\bin&gt;keytool -keystore C:\\Java\\jre\\lib\\security\\cacerts -importcert -alias cer1 -file C:\\Java\\jre\\lib\\security\\cer1.cer\r\n\r\nThis showed a message the certificate added successfully. Which i verified by using list command for keytool\r\n\r\n4. Then i restarted my machine, and tried to run my Java program again, but still keep getting error:     \r\n\r\n&quot;sun.security.validator.ValidatorException: PKIX path building failed:     sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid     certification path to requested target&quot;\r\n\r\nJDK Used: 1.8.0_31, Windows 7\r\n\r\nPlease help!","title":"added certificate to java keystore, still error","body":"<p>Based on various web inputs, I have followed the following steps to add certificate to my local jdk keystore:</p>\n\n<ol>\n<li><p>Downloaded the certificates by hitting the following command from a Linux host: openssl s_client -connect MyService:443 -showcerts</p></li>\n<li><p>Copied the content between (and including) ------BEGIN CERTIFICATE-------- and --------END CERTIFICATE---------, saved it as C:\\Java\\jre\\lib\\security\\cer1.cer</p></li>\n<li><p>Typed: C:\\Java\\jre\\bin>keytool -keystore C:\\Java\\jre\\lib\\security\\cacerts -importcert -alias cer1 -file C:\\Java\\jre\\lib\\security\\cer1.cer</p></li>\n</ol>\n\n<p>This showed a message the certificate added successfully. Which i verified by using list command for keytool</p>\n\n<ol start=\"4\">\n<li>Then i restarted my machine, and tried to run my Java program again, but still keep getting error:     </li>\n</ol>\n\n<p>\"sun.security.validator.ValidatorException: PKIX path building failed:     sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid     certification path to requested target\"</p>\n\n<p>JDK Used: 1.8.0_31, Windows 7</p>\n\n<p>Please help!</p>\n"},{"tags":["java","java-8","option-type"],"comments":[{"owner":{"account_id":1734091,"reputation":92376,"user_id":1587046,"accept_rate":62,"display_name":"Alexis C."},"score":1,"creation_date":1434449698,"post_id":30864583,"comment_id":49771187,"body_markdown":"See http://stackoverflow.com/questions/26684562/java-8-map-and-flatmap-methods","body":"See <a href=\"http://stackoverflow.com/questions/26684562/java-8-map-and-flatmap-methods\" title=\"java 8 map and flatmap methods\">stackoverflow.com/questions/26684562/&hellip;</a>"},{"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"score":7,"creation_date":1434449768,"post_id":30864583,"comment_id":49771235,"body_markdown":"@AlexisC. Your link is about Stream&#39;s map and flatMap, not Optional.","body":"@AlexisC. Your link is about Stream&#39;s map and flatMap, not Optional."},{"owner":{"account_id":5797135,"reputation":2134,"user_id":4572590,"accept_rate":83,"display_name":"griFlo"},"score":0,"creation_date":1434449801,"post_id":30864583,"comment_id":49771251,"body_markdown":"from the java doc: If a value is present, apply the provided Optional-bearing mapping function to it, return that result, otherwise return an empty Optional. This method is similar to map(Function), but the provided mapper is one whose result is already an Optional, and if invoked, flatMap does not wrap it with an additional Optional.","body":"from the java doc: If a value is present, apply the provided Optional-bearing mapping function to it, return that result, otherwise return an empty Optional. This method is similar to map(Function), but the provided mapper is one whose result is already an Optional, and if invoked, flatMap does not wrap it with an additional Optional."},{"owner":{"account_id":1734091,"reputation":92376,"user_id":1587046,"accept_rate":62,"display_name":"Alexis C."},"score":1,"creation_date":1434449930,"post_id":30864583,"comment_id":49771336,"body_markdown":"@Eran That doesn&#39;t matter, if you understand how map/flatMap works whether it&#39;s for a Stream or not, it&#39;s the same for an Optional. If the op understood how it works for a Stream, then he shouldn&#39;t asked this question. The concept is the same.","body":"@Eran That doesn&#39;t matter, if you understand how map/flatMap works whether it&#39;s for a Stream or not, it&#39;s the same for an Optional. If the op understood how it works for a Stream, then he shouldn&#39;t asked this question. The concept is the same."},{"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"score":4,"creation_date":1434450178,"post_id":30864583,"comment_id":49771487,"body_markdown":"@AlexisC. Not really. Optional&#39;s flatMap has little in common with Stream&#39;s flatMap.","body":"@AlexisC. Not really. Optional&#39;s flatMap has little in common with Stream&#39;s flatMap."},{"owner":{"account_id":1734091,"reputation":92376,"user_id":1587046,"accept_rate":62,"display_name":"Alexis C."},"score":1,"creation_date":1434450480,"post_id":30864583,"comment_id":49771683,"body_markdown":"@Eran I&#39;m speaking about the **conceptual** difference between a map and a flatMap, I&#39;m not making a one-to-one correspondance between `Stream#flatMap` and `Optional#flatMap`.","body":"@Eran I&#39;m speaking about the <b>conceptual</b> difference between a map and a flatMap, I&#39;m not making a one-to-one correspondance between <code>Stream#flatMap</code> and <code>Optional#flatMap</code>."}],"answers":[{"tags":[],"owner":{"account_id":2770660,"reputation":4602,"user_id":2385324,"accept_rate":87,"display_name":"Diego Martinoia"},"down_vote_count":0,"up_vote_count":92,"is_accepted":false,"score":92,"last_activity_date":1539714923,"creation_date":1434449763,"answer_id":30864727,"question_id":30864583,"body_markdown":"They both take a function from the type of the optional to something.\r\n\r\n`map()` applies the function &quot;***as is***&quot; on the optional you have:\r\n\r\n    if (optional.isEmpty()) return Optional.empty();\r\n    else return Optional.of(f(optional.get()));\r\n\r\nWhat happens if your function is a function from `T -&gt; Optional&lt;U&gt;`?   \r\nYour result is now an `Optional&lt;Optional&lt;U&gt;&gt;`!\r\n\r\nThat&#39;s what `flatMap()` is about: if your function already returns an `Optional`, `flatMap()` is a bit smarter and doesn&#39;t double wrap it, returning `Optional&lt;U&gt;`. \r\n \r\nIt&#39;s the composition of two functional idioms: `map` and `flatten`.\r\n\r\n","title":"What is the difference between Optional.flatMap and Optional.map?","body":"<p>They both take a function from the type of the optional to something.</p>\n\n<p><code>map()</code> applies the function \"<strong><em>as is</em></strong>\" on the optional you have:</p>\n\n<pre><code>if (optional.isEmpty()) return Optional.empty();\nelse return Optional.of(f(optional.get()));\n</code></pre>\n\n<p>What happens if your function is a function from <code>T -&gt; Optional&lt;U&gt;</code>?<br>\nYour result is now an <code>Optional&lt;Optional&lt;U&gt;&gt;</code>!</p>\n\n<p>That's what <code>flatMap()</code> is about: if your function already returns an <code>Optional</code>, <code>flatMap()</code> is a bit smarter and doesn't double wrap it, returning <code>Optional&lt;U&gt;</code>. </p>\n\n<p>It's the composition of two functional idioms: <code>map</code> and <code>flatten</code>.</p>\n"},{"tags":[],"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"down_vote_count":0,"up_vote_count":230,"is_accepted":true,"score":230,"last_activity_date":1536333328,"creation_date":1434449799,"answer_id":30864741,"question_id":30864583,"body_markdown":"Use `map` if the function returns the object you need or `flatMap` if the function returns an `Optional`. For example:\r\n\r\n    public static void main(String[] args) {\r\n      Optional&lt;String&gt; s = Optional.of(&quot;input&quot;);\r\n      System.out.println(s.map(Test::getOutput));\r\n      System.out.println(s.flatMap(Test::getOutputOpt));\r\n    }\r\n\r\n    static String getOutput(String input) {\r\n      return input == null ? null : &quot;output for &quot; + input;\r\n    }\r\n\r\n    static Optional&lt;String&gt; getOutputOpt(String input) {\r\n      return input == null ? Optional.empty() : Optional.of(&quot;output for &quot; + input);\r\n    }\r\n\r\nBoth print statements print the same thing.","title":"What is the difference between Optional.flatMap and Optional.map?","body":"<p>Use <code>map</code> if the function returns the object you need or <code>flatMap</code> if the function returns an <code>Optional</code>. For example:</p>\n\n<pre><code>public static void main(String[] args) {\n  Optional&lt;String&gt; s = Optional.of(\"input\");\n  System.out.println(s.map(Test::getOutput));\n  System.out.println(s.flatMap(Test::getOutputOpt));\n}\n\nstatic String getOutput(String input) {\n  return input == null ? null : \"output for \" + input;\n}\n\nstatic Optional&lt;String&gt; getOutputOpt(String input) {\n  return input == null ? Optional.empty() : Optional.of(\"output for \" + input);\n}\n</code></pre>\n\n<p>Both print statements print the same thing.</p>\n"},{"tags":[],"owner":{"account_id":2172622,"reputation":1478,"user_id":1924182,"display_name":"SandeepGodara"},"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1681115717,"creation_date":1489604966,"answer_id":42818673,"question_id":30864583,"body_markdown":"### NOTE\r\nBelow is the illustration of `map()` and `flatMap()` functions, otherwise `Optional` is primarily designed to be used as a return type only.\r\n\r\n---\r\nAs you already may know `Optional` is a kind of container which may or may not contain a single object, so it can be used wherever you anticipate a `null` value (you may never see NPE if you use `Optional` properly).\r\n\r\nFor example if you have a method which expects a `Person` object which may be *nullable* you may want to write the method something like this:\r\n\r\n    void doSome(Optional&lt;Person&gt; person) {\r\n        /* and here you want to retrieve some property phone out of person\r\n           you may write something like this:\r\n        */\r\n        Optional&lt;String&gt; phone = person.map((p) -&gt; p.getPhone());\r\n        phone.ifPresent((ph) -&gt; dial(ph));\r\n    }\r\n\r\n    class Person {\r\n        private String phone;\r\n        // setters, getters\r\n    }\r\n\r\nHere you have returned a `String` type which is automatically wrapped in an `Optional` type.\r\n\r\nIf `Person` class looked like this (i.e. `phone` is also `Optional`):\r\n\r\n    class Person {\r\n        private Optional&lt;String&gt; phone;\r\n        // setters, getters\r\n    }\r\n\r\nIn this case invoking `map()` function will wrap the returned value in `Optional` and yield something like:\r\n\r\n    Optional&lt;Optional&lt;String&gt;&gt;\r\n\r\nBut you may want `Optional&lt;String&gt;` instead, so here comes `flatMap()`:\r\n\r\n    void doSome(Optional&lt;Person&gt; person) {\r\n        Optional&lt;String&gt; phone = person.flatMap((p) -&gt; p.getPhone());\r\n        phone.ifPresent((ph) -&gt; dial(ph));\r\n    }\r\n\r\n---\r\n### P.S.\r\nNever call `get()` method (if you need to) on an `Optional` without checking it with `isPresent()` unless you can&#39;t live without `NullPointerException`.","title":"What is the difference between Optional.flatMap and Optional.map?","body":"<h3>NOTE</h3>\n<p>Below is the illustration of <code>map()</code> and <code>flatMap()</code> functions, otherwise <code>Optional</code> is primarily designed to be used as a return type only.</p>\n<hr />\n<p>As you already may know <code>Optional</code> is a kind of container which may or may not contain a single object, so it can be used wherever you anticipate a <code>null</code> value (you may never see NPE if you use <code>Optional</code> properly).</p>\n<p>For example if you have a method which expects a <code>Person</code> object which may be <em>nullable</em> you may want to write the method something like this:</p>\n<pre><code>void doSome(Optional&lt;Person&gt; person) {\n    /* and here you want to retrieve some property phone out of person\n       you may write something like this:\n    */\n    Optional&lt;String&gt; phone = person.map((p) -&gt; p.getPhone());\n    phone.ifPresent((ph) -&gt; dial(ph));\n}\n\nclass Person {\n    private String phone;\n    // setters, getters\n}\n</code></pre>\n<p>Here you have returned a <code>String</code> type which is automatically wrapped in an <code>Optional</code> type.</p>\n<p>If <code>Person</code> class looked like this (i.e. <code>phone</code> is also <code>Optional</code>):</p>\n<pre><code>class Person {\n    private Optional&lt;String&gt; phone;\n    // setters, getters\n}\n</code></pre>\n<p>In this case invoking <code>map()</code> function will wrap the returned value in <code>Optional</code> and yield something like:</p>\n<pre><code>Optional&lt;Optional&lt;String&gt;&gt;\n</code></pre>\n<p>But you may want <code>Optional&lt;String&gt;</code> instead, so here comes <code>flatMap()</code>:</p>\n<pre><code>void doSome(Optional&lt;Person&gt; person) {\n    Optional&lt;String&gt; phone = person.flatMap((p) -&gt; p.getPhone());\n    phone.ifPresent((ph) -&gt; dial(ph));\n}\n</code></pre>\n<hr />\n<h3>P.S.</h3>\n<p>Never call <code>get()</code> method (if you need to) on an <code>Optional</code> without checking it with <code>isPresent()</code> unless you can't live without <code>NullPointerException</code>.</p>\n"},{"tags":[],"owner":{"account_id":255080,"reputation":15519,"user_id":534877,"accept_rate":65,"display_name":"Robert Niestroj"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1537789905,"creation_date":1524250857,"answer_id":49948146,"question_id":30864583,"body_markdown":"What helped me was a look at the source code of the two functions. \r\n\r\n**Map** - wraps the result in an Optional.\r\n\r\n    public&lt;U&gt; Optional&lt;U&gt; map(Function&lt;? super T, ? extends U&gt; mapper) {\r\n        Objects.requireNonNull(mapper);\r\n        if (!isPresent())\r\n            return empty();\r\n        else {\r\n            return Optional.ofNullable(mapper.apply(value)); //&lt;--- wraps in an optional\r\n        }\r\n    }\r\n\r\n**flatMap** - returns the &#39;raw&#39; object\r\n\r\n    public&lt;U&gt; Optional&lt;U&gt; flatMap(Function&lt;? super T, Optional&lt;U&gt;&gt; mapper) {\r\n        Objects.requireNonNull(mapper);\r\n        if (!isPresent())\r\n            return empty();\r\n        else {\r\n            return Objects.requireNonNull(mapper.apply(value)); //&lt;---  returns &#39;raw&#39; object\r\n        }\r\n    }","title":"What is the difference between Optional.flatMap and Optional.map?","body":"<p>What helped me was a look at the source code of the two functions. </p>\n\n<p><strong>Map</strong> - wraps the result in an Optional.</p>\n\n<pre><code>public&lt;U&gt; Optional&lt;U&gt; map(Function&lt;? super T, ? extends U&gt; mapper) {\n    Objects.requireNonNull(mapper);\n    if (!isPresent())\n        return empty();\n    else {\n        return Optional.ofNullable(mapper.apply(value)); //&lt;--- wraps in an optional\n    }\n}\n</code></pre>\n\n<p><strong>flatMap</strong> - returns the 'raw' object</p>\n\n<pre><code>public&lt;U&gt; Optional&lt;U&gt; flatMap(Function&lt;? super T, Optional&lt;U&gt;&gt; mapper) {\n    Objects.requireNonNull(mapper);\n    if (!isPresent())\n        return empty();\n    else {\n        return Objects.requireNonNull(mapper.apply(value)); //&lt;---  returns 'raw' object\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1622089,"reputation":17709,"user_id":1498427,"accept_rate":89,"display_name":"catch23"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1658777928,"creation_date":1539799179,"answer_id":52860979,"question_id":30864583,"body_markdown":" - `Optional.map()`:\r\n   \r\nTakes every element and if the value exists, it is passed to the function:\r\n\r\n    Optional&lt;T&gt; optionalValue = ...;\r\n    Optional&lt;Boolean&gt; added = optionalValue.map(results::add);\r\n\r\nNow **added** has one of three values: `true` or `false` wrapped into an ***Optional*** , if `optionalValue` was present, or an ***empty Optional*** otherwise.\r\n\r\nIf you don&#39;t need to process the result you can simply use `ifPresent()`, it doesn&#39;t have return value:\r\n\r\n    optionalValue.ifPresent(results::add); \r\n\r\n - `Optional.flatMap()`:\r\n\r\nWorks similar to the same method of streams. Flattens out the stream of streams. With the difference that if the value is presented it is applied to function. Otherwise, an empty optional is returned.\r\n\r\nYou can use it for composing optional value functions calls. \r\n\r\nSuppose we have methods:\r\n\r\n    public static Optional&lt;Double&gt; inverse(Double x) {\r\n        return x == 0 ? Optional.empty() : Optional.of(1 / x);\r\n    }\r\n    \r\n    public static Optional&lt;Double&gt; squareRoot(Double x) {\r\n        return x &lt; 0 ? Optional.empty() : Optional.of(Math.sqrt(x));\r\n    }\r\n\r\nThen you can compute the square root of the inverse, like:\r\n\r\n    Optional&lt;Double&gt; result = inverse(-4.0).flatMap(MyMath::squareRoot);\r\n\r\nor, if you prefer:\r\n\r\n    Optional&lt;Double&gt; result = Optional.of(-4.0)\r\n                         .flatMap(MyMath::inverse)\r\n                         .flatMap(MyMath::squareRoot);\r\n\r\nIf either the `inverse()` or the `squareRoot()` returns `Optional.empty()`, the result is empty.\r\n\r\n\r\n","title":"What is the difference between Optional.flatMap and Optional.map?","body":"<ul>\n<li><code>Optional.map()</code>:</li>\n</ul>\n<p>Takes every element and if the value exists, it is passed to the function:</p>\n<pre><code>Optional&lt;T&gt; optionalValue = ...;\nOptional&lt;Boolean&gt; added = optionalValue.map(results::add);\n</code></pre>\n<p>Now <strong>added</strong> has one of three values: <code>true</code> or <code>false</code> wrapped into an <em><strong>Optional</strong></em> , if <code>optionalValue</code> was present, or an <em><strong>empty Optional</strong></em> otherwise.</p>\n<p>If you don't need to process the result you can simply use <code>ifPresent()</code>, it doesn't have return value:</p>\n<pre><code>optionalValue.ifPresent(results::add); \n</code></pre>\n<ul>\n<li><code>Optional.flatMap()</code>:</li>\n</ul>\n<p>Works similar to the same method of streams. Flattens out the stream of streams. With the difference that if the value is presented it is applied to function. Otherwise, an empty optional is returned.</p>\n<p>You can use it for composing optional value functions calls.</p>\n<p>Suppose we have methods:</p>\n<pre><code>public static Optional&lt;Double&gt; inverse(Double x) {\n    return x == 0 ? Optional.empty() : Optional.of(1 / x);\n}\n\npublic static Optional&lt;Double&gt; squareRoot(Double x) {\n    return x &lt; 0 ? Optional.empty() : Optional.of(Math.sqrt(x));\n}\n</code></pre>\n<p>Then you can compute the square root of the inverse, like:</p>\n<pre><code>Optional&lt;Double&gt; result = inverse(-4.0).flatMap(MyMath::squareRoot);\n</code></pre>\n<p>or, if you prefer:</p>\n<pre><code>Optional&lt;Double&gt; result = Optional.of(-4.0)\n                     .flatMap(MyMath::inverse)\n                     .flatMap(MyMath::squareRoot);\n</code></pre>\n<p>If either the <code>inverse()</code> or the <code>squareRoot()</code> returns <code>Optional.empty()</code>, the result is empty.</p>\n"},{"tags":[],"owner":{"account_id":17541523,"reputation":161,"user_id":12723614,"display_name":"momonannan"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1579169192,"creation_date":1579169192,"answer_id":59767176,"question_id":30864583,"body_markdown":"Okay. You **only need to use &#39;flatMap&#39; when you&#39;re facing nested Optionals**. Here&#39;s the example.\r\n```\r\npublic class Person {\r\n\r\n    private Optional&lt;Car&gt; optionalCar;\r\n\r\n    public Optional&lt;Car&gt; getOptionalCar() {\r\n        return optionalCar;\r\n    }\r\n}\r\n\r\npublic class Car {\r\n\r\n    private Optional&lt;Insurance&gt; optionalInsurance;\r\n\r\n    public Optional&lt;Insurance&gt; getOptionalInsurance() {\r\n        return optionalInsurance;\r\n    }\r\n}\r\n\r\npublic class Insurance {\r\n\r\n    private String name;\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n}\r\n\r\npublic class Test {\r\n\r\n    // map cannot deal with nested Optionals\r\n    public Optional&lt;String&gt; getCarInsuranceName(Person person) {\r\n        return person.getOptionalCar()\r\n                .map(Car::getOptionalInsurance) //  leads to a Optional&lt;Optional&lt;Insurance&gt;\r\n                .map(Insurance::getName);       // \r\n    }\r\n\r\n}\r\n```\r\nLike Stream, Optional#map will return a value wrapped by a Optional. That&#39;s why we get a nested Optional -- `Optional&lt;Optional&lt;Insurance&gt;`. And at , we want to map it as an Insurance instance, that&#39;s how the tragedy happened.\r\nThe root is nested Optionals. If we can get the core value regardless the shells, we&#39;ll get it done. That&#39;s what flatMap does.\r\n```\r\npublic Optional&lt;String&gt; getCarInsuranceName(Person person) {\r\n    return person.getOptionalCar()\r\n                 .flatMap(Car::getOptionalInsurance)\r\n                 .map(Insurance::getName);\r\n}\r\n```\r\nIn the end, I stronly recommed the *Java 8 In Action* to you if you&#39;d like to study Java8 Systematicly.","title":"What is the difference between Optional.flatMap and Optional.map?","body":"<p>Okay. You <strong>only need to use 'flatMap' when you're facing nested Optionals</strong>. Here's the example.</p>\n\n<pre><code>public class Person {\n\n    private Optional&lt;Car&gt; optionalCar;\n\n    public Optional&lt;Car&gt; getOptionalCar() {\n        return optionalCar;\n    }\n}\n\npublic class Car {\n\n    private Optional&lt;Insurance&gt; optionalInsurance;\n\n    public Optional&lt;Insurance&gt; getOptionalInsurance() {\n        return optionalInsurance;\n    }\n}\n\npublic class Insurance {\n\n    private String name;\n\n    public String getName() {\n        return name;\n    }\n\n}\n\npublic class Test {\n\n    // map cannot deal with nested Optionals\n    public Optional&lt;String&gt; getCarInsuranceName(Person person) {\n        return person.getOptionalCar()\n                .map(Car::getOptionalInsurance) //  leads to a Optional&lt;Optional&lt;Insurance&gt;\n                .map(Insurance::getName);       // \n    }\n\n}\n</code></pre>\n\n<p>Like Stream, Optional#map will return a value wrapped by a Optional. That's why we get a nested Optional -- <code>Optional&lt;Optional&lt;Insurance&gt;</code>. And at , we want to map it as an Insurance instance, that's how the tragedy happened.\nThe root is nested Optionals. If we can get the core value regardless the shells, we'll get it done. That's what flatMap does.</p>\n\n<pre><code>public Optional&lt;String&gt; getCarInsuranceName(Person person) {\n    return person.getOptionalCar()\n                 .flatMap(Car::getOptionalInsurance)\n                 .map(Insurance::getName);\n}\n</code></pre>\n\n<p>In the end, I stronly recommed the <em>Java 8 In Action</em> to you if you'd like to study Java8 Systematicly.</p>\n"},{"tags":[],"owner":{"account_id":9929434,"reputation":319,"user_id":7349926,"display_name":"Mathew Stephen"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1610360459,"creation_date":1610360459,"answer_id":65664997,"question_id":30864583,"body_markdown":"You can refer below link to understand in detail (best explanation which I could find):\r\n\r\nhttps://www.programmergirl.com/java-8-map-flatmap-difference/\r\n\r\nBoth map and flatMap - accept Function. The return type of map() is a single value whereas flatMap  is returning stream of values\r\n\r\n    &lt;R&gt; Stream&lt;R&gt; map(Function&lt;? super T, ? extends R&gt; mapper)\r\n    \r\n    &lt;R&gt; Stream&lt;R&gt; flatMap(Function&lt;? super T, ? extends Stream&lt;? extends R&gt;&gt; mapper)\r\n\r\n\r\n","title":"What is the difference between Optional.flatMap and Optional.map?","body":"<p>You can refer below link to understand in detail (best explanation which I could find):</p>\n<p><a href=\"https://www.programmergirl.com/java-8-map-flatmap-difference/\" rel=\"nofollow noreferrer\">https://www.programmergirl.com/java-8-map-flatmap-difference/</a></p>\n<p>Both map and flatMap - accept Function. The return type of map() is a single value whereas flatMap  is returning stream of values</p>\n<pre><code>&lt;R&gt; Stream&lt;R&gt; map(Function&lt;? super T, ? extends R&gt; mapper)\n\n&lt;R&gt; Stream&lt;R&gt; flatMap(Function&lt;? super T, ? extends Stream&lt;? extends R&gt;&gt; mapper)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6829513,"reputation":3942,"user_id":5254103,"accept_rate":0,"display_name":"BaiJiFeiLong"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1641721928,"creation_date":1641721928,"answer_id":70640109,"question_id":30864583,"body_markdown":"They do the **same** thing.\r\n\r\nThe **only difference** is that, the `lambda` return&#39;s type is **wrapped** by `Optional` or not.\r\n\r\nFor normal usage, `map` is shorter than `flatMap`\r\n\r\nExample:\r\n\r\n    package bj;\r\n\r\n    import java.util.Optional;\r\n\r\n    import static java.lang.System.out;\r\n\r\n    public class App {\r\n\r\n        public static void main(String[] args) {\r\n            out.println(Optional.of(10).map    (x -&gt;             x * x));\r\n            out.println(Optional.of(10).flatMap(x -&gt; Optional.of(x * x)));\r\n            out.println(Optional.of(10).map    (x -&gt; Optional.of(x * x).get()));\r\n\r\n            out.println(Optional.&lt;Integer&gt;empty().map    (x -&gt;             x * x));\r\n            out.println(Optional.&lt;Integer&gt;empty().flatMap(x -&gt; Optional.of(x * x)));\r\n            out.println(Optional.&lt;Integer&gt;empty().map    (x -&gt; Optional.of(x * x).get()));\r\n        }\r\n    }\r\n\r\n\r\nOutput:\r\n\r\n    Optional[100]\r\n    Optional[100]\r\n    Optional[100]\r\n    Optional.empty\r\n    Optional.empty\r\n    Optional.empty\r\n\r\n","title":"What is the difference between Optional.flatMap and Optional.map?","body":"<p>They do the <strong>same</strong> thing.</p>\n<p>The <strong>only difference</strong> is that, the <code>lambda</code> return's type is <strong>wrapped</strong> by <code>Optional</code> or not.</p>\n<p>For normal usage, <code>map</code> is shorter than <code>flatMap</code></p>\n<p>Example:</p>\n<pre><code>package bj;\n\nimport java.util.Optional;\n\nimport static java.lang.System.out;\n\npublic class App {\n\n    public static void main(String[] args) {\n        out.println(Optional.of(10).map    (x -&gt;             x * x));\n        out.println(Optional.of(10).flatMap(x -&gt; Optional.of(x * x)));\n        out.println(Optional.of(10).map    (x -&gt; Optional.of(x * x).get()));\n\n        out.println(Optional.&lt;Integer&gt;empty().map    (x -&gt;             x * x));\n        out.println(Optional.&lt;Integer&gt;empty().flatMap(x -&gt; Optional.of(x * x)));\n        out.println(Optional.&lt;Integer&gt;empty().map    (x -&gt; Optional.of(x * x).get()));\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>Optional[100]\nOptional[100]\nOptional[100]\nOptional.empty\nOptional.empty\nOptional.empty\n</code></pre>\n"}],"owner":{"account_id":1917510,"reputation":23561,"user_id":1729795,"accept_rate":83,"display_name":"codependent"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":164622,"favorite_count":0,"down_vote_count":0,"up_vote_count":240,"accepted_answer_id":30864741,"answer_count":8,"score":240,"last_activity_date":1681115717,"creation_date":1434449396,"question_id":30864583,"body_markdown":"What&#39;s the difference between these two methods: `Optional.flatMap()` and `Optional.map()`?\r\n\r\nAn example would be appreciated.","title":"What is the difference between Optional.flatMap and Optional.map?","body":"<p>What's the difference between these two methods: <code>Optional.flatMap()</code> and <code>Optional.map()</code>?</p>\n\n<p>An example would be appreciated.</p>\n"},{"tags":["java","elasticsearch","bulk"],"comments":[{"owner":{"account_id":9775903,"reputation":199,"user_id":7245951,"accept_rate":75,"display_name":"TheDominus"},"score":0,"creation_date":1681114991,"post_id":75975424,"comment_id":134000354,"body_markdown":"Is this issue related to this question - https://stackoverflow.com/questions/57109948/sockettimeoutexception-while-retrieving-or-inserting-data-into-elastic-search-by ?","body":"Is this issue related to this question - <a href=\"https://stackoverflow.com/questions/57109948/sockettimeoutexception-while-retrieving-or-inserting-data-into-elastic-search-by\" title=\"sockettimeoutexception while retrieving or inserting data into elastic search by\">stackoverflow.com/questions/57109948/&hellip;</a> ?"}],"owner":{"account_id":9775903,"reputation":199,"user_id":7245951,"accept_rate":75,"display_name":"TheDominus"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":122,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1681114831,"creation_date":1681114831,"question_id":75975424,"body_markdown":"I am trying to do a bulk update (sync) to Elastic Search. \r\nThe Bulk Update to Elastic Search is wrapped over a service and other application call that API to Bulk Update which internally calls ES Bulk API. \r\n\r\nApplication (Client) -&gt; BulkUpdateToES (Wrapper Service) -&gt; esclient.bulk()\r\n\r\n\r\nNow, esclient.[bulk][1]() is failing with a socket timeout exception. \r\n\r\n```\r\njava.net.SocketTimeoutException: 30,000 milliseconds timeout on connection http-outgoing-44 [ACTIVE]\\n\\tat org.apache.http.nio.protocol.HttpAsyncRequestExecutor.timeout(HttpAsyncRequestExecutor.java:387)\\n\\tat org.apache.http.impl.nio.client.InternalIODispatch.onTimeout(InternalIODispatch.java:98)\\n\\tat org.apache.http.impl.nio.client.InternalIODispatch.onTimeout(InternalIODispatch.java:40)\\n\\tat org.apache.http.impl.nio.reactor.AbstractIODispatch.timeout(AbstractIODispatch.java:175)\\n\\tat org.apache.http.impl.nio.reactor.BaseIOReactor.sessionTimedOut(BaseIOReactor.java:261)\\n\\tat org.apache.http.impl.nio.reactor.AbstractIOReactor.timeoutCheck(AbstractIOReactor.java:506)\\n\\tat org.apache.http.impl.nio.reactor.BaseIOReactor.validate(BaseIOReactor.java:211)\\n\\tat org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:280)\\n\\tat org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)\\n\\tat org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:591)\\n\\t... 1 more\r\n```\r\n\r\nHowever, the service call seems to not timeout i.e the response from BulkUpdateToES is returned under 1 sec.\r\n\r\nI am trying to reproduce the issue and will update the response data once I get it. \r\n\r\nHowever, I could not understand even though the ES is using a sync bulk update. How did the Wrapper API call did not had a timeout issue though ES had a timeout issue. \r\n\r\n\r\n  [1]: https://www.elastic.co/guide/en/elasticsearch/client/java-rest/current/java-rest-high-document-bulk.html","title":"SocketTimeout Exception in Elastic Search, But No timeout at API Level","body":"<p>I am trying to do a bulk update (sync) to Elastic Search.\nThe Bulk Update to Elastic Search is wrapped over a service and other application call that API to Bulk Update which internally calls ES Bulk API.</p>\n<p>Application (Client) -&gt; BulkUpdateToES (Wrapper Service) -&gt; esclient.bulk()</p>\n<p>Now, esclient.<a href=\"https://www.elastic.co/guide/en/elasticsearch/client/java-rest/current/java-rest-high-document-bulk.html\" rel=\"nofollow noreferrer\">bulk</a>() is failing with a socket timeout exception.</p>\n<pre><code>java.net.SocketTimeoutException: 30,000 milliseconds timeout on connection http-outgoing-44 [ACTIVE]\\n\\tat org.apache.http.nio.protocol.HttpAsyncRequestExecutor.timeout(HttpAsyncRequestExecutor.java:387)\\n\\tat org.apache.http.impl.nio.client.InternalIODispatch.onTimeout(InternalIODispatch.java:98)\\n\\tat org.apache.http.impl.nio.client.InternalIODispatch.onTimeout(InternalIODispatch.java:40)\\n\\tat org.apache.http.impl.nio.reactor.AbstractIODispatch.timeout(AbstractIODispatch.java:175)\\n\\tat org.apache.http.impl.nio.reactor.BaseIOReactor.sessionTimedOut(BaseIOReactor.java:261)\\n\\tat org.apache.http.impl.nio.reactor.AbstractIOReactor.timeoutCheck(AbstractIOReactor.java:506)\\n\\tat org.apache.http.impl.nio.reactor.BaseIOReactor.validate(BaseIOReactor.java:211)\\n\\tat org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:280)\\n\\tat org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)\\n\\tat org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:591)\\n\\t... 1 more\n</code></pre>\n<p>However, the service call seems to not timeout i.e the response from BulkUpdateToES is returned under 1 sec.</p>\n<p>I am trying to reproduce the issue and will update the response data once I get it.</p>\n<p>However, I could not understand even though the ES is using a sync bulk update. How did the Wrapper API call did not had a timeout issue though ES had a timeout issue.</p>\n"},{"tags":["java","aws-sdk","apache-beam","amazon-sqs"],"owner":{"account_id":27911298,"reputation":21,"user_id":21313440,"display_name":"Alon Harell"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1681114543,"creation_date":1681114543,"question_id":75975401,"body_markdown":"I have a data pipeline processor written in Java using Apache Beam 2.46, with AWS SDK v2.\r\n\r\nPart of the pipeline includes reading messages as a stream from AWS SQS queue, and then if processing of the message fails rewriting them to the queue.\r\nBeam uses the SqsUnboundedReader class to manage the stream-reading from SQS.\r\n\r\nApparently, after reading a message from the queue, beam gives it a processing timeout of about 2 minutes (unconfigurable) and then deletes the message from the queue.\r\n\r\n\r\n\r\n\r\nMy pipeline logic requires that I &quot;manually&quot; send the acknowledgements to SQS (meaning, manually delete the read message from the queue).\r\nIs it possible?","title":"Apache Beam SqsIO Messages Acknowledge","body":"<p>I have a data pipeline processor written in Java using Apache Beam 2.46, with AWS SDK v2.</p>\n<p>Part of the pipeline includes reading messages as a stream from AWS SQS queue, and then if processing of the message fails rewriting them to the queue.\nBeam uses the SqsUnboundedReader class to manage the stream-reading from SQS.</p>\n<p>Apparently, after reading a message from the queue, beam gives it a processing timeout of about 2 minutes (unconfigurable) and then deletes the message from the queue.</p>\n<p>My pipeline logic requires that I &quot;manually&quot; send the acknowledgements to SQS (meaning, manually delete the read message from the queue).\nIs it possible?</p>\n"},{"tags":["java","regex","objectmapper","jsonnode"],"answers":[{"tags":[],"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1681114193,"creation_date":1681114193,"answer_id":75975373,"question_id":75974991,"body_markdown":"if you are interested in the regex, you can use this: `#\\\\w+#\\\\w+` to match (and remove) 2 groups of #abc or something like `#\\\\d+#\\\\w+` if the first one is always going to be numeric:\r\n\r\n    @Test\r\n    void test() throws JsonProcessingException {\r\n    \tString eventData = &quot;&quot;&quot;\r\n    \t\t{\r\n    \t\t\t&quot;uniqueCode&quot;: &quot;ZZ&quot;,\r\n    \t\t\t&quot;entity&quot;: &quot;PROFILE&quot;,\r\n    \t\t\t&quot;id&quot;: &quot;e2b627b360d664377b227b--70378143#1&quot;,\r\n    \t\t\t&quot;data&quot;: [\r\n    \t\t\t\t&quot;DynamicAttribute&quot;\r\n    \t\t\t],\r\n    \t\t\t&quot;values&quot;: {\r\n    \t\t\t\t&quot;DynamicAttribute#1279930005#ZZ8400&quot;: [\r\n    \t\t\t\t\t{\r\n    \t\t\t\t\t\t&quot;property&quot;: &quot;activeFlag&quot;,\r\n    \t\t\t\t\t\t&quot;currentState&quot;: true,\r\n    \t\t\t\t\t\t&quot;previousState&quot;: null\r\n    \t\t\t\t\t}\r\n    \t\t\t\t]\r\n    \t\t\t},\r\n    \t\t\t&quot;DATE_TIME&quot;: &quot;05-Apr-2023 19:17:14.376&quot;\r\n    \t\t}\r\n    \t\t&quot;&quot;&quot;;\r\n    \r\n    \tObjectMapper objectMapper = new ObjectMapper();\r\n    \tJsonNode jsonNode = objectMapper.readTree(eventData);\r\n    \tObjectNode objectNode = objectMapper.convertValue(jsonNode.get(&quot;values&quot;), ObjectNode.class);\r\n    \r\n    \tString json = objectNode.toString().replaceAll(&quot;#\\\\w+#\\\\w+&quot;, &quot;&quot;);\r\n    \tassertEquals(json, &quot;{\\&quot;DynamicAttribute\\&quot;:[{\\&quot;property\\&quot;:\\&quot;activeFlag\\&quot;,\\&quot;currentState\\&quot;:true,\\&quot;previousState\\&quot;:null}]}&quot;);\r\n    }","title":"Regex to remove special characters from a Json node","body":"<p>if you are interested in the regex, you can use this: <code>#\\\\w+#\\\\w+</code> to match (and remove) 2 groups of #abc or something like <code>#\\\\d+#\\\\w+</code> if the first one is always going to be numeric:</p>\n<pre><code>@Test\nvoid test() throws JsonProcessingException {\n    String eventData = &quot;&quot;&quot;\n        {\n            &quot;uniqueCode&quot;: &quot;ZZ&quot;,\n            &quot;entity&quot;: &quot;PROFILE&quot;,\n            &quot;id&quot;: &quot;e2b627b360d664377b227b--70378143#1&quot;,\n            &quot;data&quot;: [\n                &quot;DynamicAttribute&quot;\n            ],\n            &quot;values&quot;: {\n                &quot;DynamicAttribute#1279930005#ZZ8400&quot;: [\n                    {\n                        &quot;property&quot;: &quot;activeFlag&quot;,\n                        &quot;currentState&quot;: true,\n                        &quot;previousState&quot;: null\n                    }\n                ]\n            },\n            &quot;DATE_TIME&quot;: &quot;05-Apr-2023 19:17:14.376&quot;\n        }\n        &quot;&quot;&quot;;\n\n    ObjectMapper objectMapper = new ObjectMapper();\n    JsonNode jsonNode = objectMapper.readTree(eventData);\n    ObjectNode objectNode = objectMapper.convertValue(jsonNode.get(&quot;values&quot;), ObjectNode.class);\n\n    String json = objectNode.toString().replaceAll(&quot;#\\\\w+#\\\\w+&quot;, &quot;&quot;);\n    assertEquals(json, &quot;{\\&quot;DynamicAttribute\\&quot;:[{\\&quot;property\\&quot;:\\&quot;activeFlag\\&quot;,\\&quot;currentState\\&quot;:true,\\&quot;previousState\\&quot;:null}]}&quot;);\n}\n</code></pre>\n"}],"owner":{"account_id":13004388,"reputation":111,"user_id":9399421,"display_name":"Scarlett John"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":135,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75975373,"answer_count":1,"score":0,"last_activity_date":1681114193,"creation_date":1681110548,"question_id":75974991,"body_markdown":"I have a JSON node as below from which I need to remove all the values after # like DynamicAttribute#1279930005#ZZ8400  to  DynamicAttribute\r\n\r\n    {\r\n    &quot;uniqueCode&quot;: &quot;ZZ&quot;,\r\n    &quot;entity&quot;: &quot;PROFILE&quot;,\r\n    &quot;id&quot;: &quot;e2b627b360d664377b227b--70378143#1&quot;,\r\n    &quot;data&quot;: [\r\n        &quot;DynamicAttribute&quot;\r\n    ],\r\n    &quot;values&quot;: {\r\n        &quot;DynamicAttribute#1279930005#ZZ8400&quot;: [\r\n            {\r\n                &quot;property&quot;: &quot;activeFlag&quot;,\r\n                &quot;currentState&quot;: true,\r\n                &quot;previousState&quot;: null\r\n            }\r\n        ]\r\n    },\r\n    &quot;DATE_TIME&quot;: &quot;05-Apr-2023 19:17:14.376&quot;}\r\n\r\n What i tried so far was as below :\r\n\r\n    \r\n    String eventData; //Has the above json payload\r\n    ObjectMapper objectMapper = new ObjectMapper();\r\n    JsonNode jsonNode = objectMapper.readTree(eventData);\r\n    ObjectNode objectNode = objectMapper.convertValue(jsonNode.get(&quot;values&quot;), ObjectNode.class);\r\n    objectNode.toString().replaceAll(&quot;\\\\#.*&quot;, &quot;\\&quot;:[&quot;);\r\n\r\nBut the above is giving me only like below and removing the rest of the fields from json :\r\n\r\n&quot;{\\&quot;DynamicAttribute\\&quot;:[&quot;\r\n","title":"Regex to remove special characters from a Json node","body":"<p>I have a JSON node as below from which I need to remove all the values after # like DynamicAttribute#1279930005#ZZ8400  to  DynamicAttribute</p>\n<pre><code>{\n&quot;uniqueCode&quot;: &quot;ZZ&quot;,\n&quot;entity&quot;: &quot;PROFILE&quot;,\n&quot;id&quot;: &quot;e2b627b360d664377b227b--70378143#1&quot;,\n&quot;data&quot;: [\n    &quot;DynamicAttribute&quot;\n],\n&quot;values&quot;: {\n    &quot;DynamicAttribute#1279930005#ZZ8400&quot;: [\n        {\n            &quot;property&quot;: &quot;activeFlag&quot;,\n            &quot;currentState&quot;: true,\n            &quot;previousState&quot;: null\n        }\n    ]\n},\n&quot;DATE_TIME&quot;: &quot;05-Apr-2023 19:17:14.376&quot;}\n</code></pre>\n<p>What i tried so far was as below :</p>\n<pre><code>String eventData; //Has the above json payload\nObjectMapper objectMapper = new ObjectMapper();\nJsonNode jsonNode = objectMapper.readTree(eventData);\nObjectNode objectNode = objectMapper.convertValue(jsonNode.get(&quot;values&quot;), ObjectNode.class);\nobjectNode.toString().replaceAll(&quot;\\\\#.*&quot;, &quot;\\&quot;:[&quot;);\n</code></pre>\n<p>But the above is giving me only like below and removing the rest of the fields from json :</p>\n<p>&quot;{&quot;DynamicAttribute&quot;:[&quot;</p>\n"},{"tags":["java","spring","spring-boot","maven"],"answers":[{"tags":[],"owner":{"account_id":28261166,"reputation":1,"user_id":21605845,"display_name":"Thomas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681092017,"creation_date":1681092017,"answer_id":75973825,"question_id":75973795,"body_markdown":"There was a missing dependency package during compilation. Please package com. atgui: gmall common: jar: 0.0.1 SNAPSHOT first\r\n\r\n","title":"Maven packaging failed","body":"<p>There was a missing dependency package during compilation. Please package com. atgui: gmall common: jar: 0.0.1 SNAPSHOT first</p>\n"},{"tags":[],"owner":{"account_id":13524226,"reputation":45,"user_id":9756492,"display_name":"Japhy Fan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681113900,"creation_date":1681113900,"answer_id":75975331,"question_id":75973795,"body_markdown":"Try to change gmall common version to 0.0.2 SNAPSHOT and reinstall.Or restart idea. Once there are too many dependencies, maven will make mistakes.","title":"Maven packaging failed","body":"<p>Try to change gmall common version to 0.0.2 SNAPSHOT and reinstall.Or restart idea. Once there are too many dependencies, maven will make mistakes.</p>\n"}],"owner":{"account_id":17663169,"reputation":1,"user_id":12821154,"display_name":"Guan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1681113900,"creation_date":1681091629,"question_id":75973795,"body_markdown":"```\r\n[ERROR] Failed to execute goal on project gmall-pms: Could not resolve dependencies for project com.atguigu:gmall-pms:jar:0.0.1-SNAPSHOT: Could not find artifact com.atguigu:gmall-common:jar:0.0.1-SNAPSHOT -&gt; [Help 1]\r\n[ERROR] \r\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n[ERROR] \r\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException\r\n```\r\n\r\n[enter image description here](https://i.stack.imgur.com/o9q91.png)\r\n\r\n[enter image description here](https://i.stack.imgur.com/QO7MM.jpg)\r\n\r\nDelete the original file and repackage\r\n\r\n","title":"Maven packaging failed","body":"<pre><code>[ERROR] Failed to execute goal on project gmall-pms: Could not resolve dependencies for project com.atguigu:gmall-pms:jar:0.0.1-SNAPSHOT: Could not find artifact com.atguigu:gmall-common:jar:0.0.1-SNAPSHOT -&gt; [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/o9q91.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p><a href=\"https://i.stack.imgur.com/QO7MM.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>Delete the original file and repackage</p>\n"},{"tags":["java","spring","spring-integration","sftp","spring-integration-sftp"],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680878480,"creation_date":1680878480,"answer_id":75959442,"question_id":75958454,"body_markdown":"That `.remoteDirectory(&quot;.&quot;)` is just a placeholder. When the polling is in action, that `RotatingServerAdvice` sets a current directory into the `Sftp.inboundAdapter()` overriding your initial placeholder. Not clear what the problem you have. Would you mind to share an error or suspicious behavior? \r\n\r\nIt is clearly explained in that doc:\r\n\r\n&gt; This advice will poll directory `foo` on server `one` until no new files exist then move to directory `bar` and then directory `baz` on server `two`, etc.","title":"What is a proper way to specify different remote directories when using DelegatingSessionFactory?","body":"<p>That <code>.remoteDirectory(&quot;.&quot;)</code> is just a placeholder. When the polling is in action, that <code>RotatingServerAdvice</code> sets a current directory into the <code>Sftp.inboundAdapter()</code> overriding your initial placeholder. Not clear what the problem you have. Would you mind to share an error or suspicious behavior?</p>\n<p>It is clearly explained in that doc:</p>\n<blockquote>\n<p>This advice will poll directory <code>foo</code> on server <code>one</code> until no new files exist then move to directory <code>bar</code> and then directory <code>baz</code> on server <code>two</code>, etc.</p>\n</blockquote>\n"}],"owner":{"account_id":23029514,"reputation":3,"user_id":17149233,"display_name":"Margarita"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681113438,"creation_date":1680870719,"question_id":75958454,"body_markdown":"I want my DelegatingSessionFactory to search for files in different remote directories on the same server. I try to use RotatingServerAdvice. The [documentation ](https://docs.spring.io/spring-integration/reference/html/sftp.html#sftp-rotating-server-advice) says I need to specify bean IntegrationFlow, which should be defined as \r\n\r\n```\r\n@Bean\r\npublic IntegrationFlow flow() {\r\n    return IntegrationFlow.from(Sftp.inboundAdapter(sf())\r\n                    .filter(new SftpPersistentAcceptOnceFileListFilter(new SimpleMetadataStore(), &quot;rotate&quot;))\r\n                    .localDirectory(new File(tmpDir))\r\n                    .localFilenameExpression(&quot;#remoteDirectory + T(java.io.File).separator + #root&quot;)\r\n                    .remoteDirectory(&quot;.&quot;),\r\n                e -&gt; e.poller(Pollers.fixedDelay(1).advice(advice())))\r\n            .channel(MessageChannels.queue(&quot;files&quot;))\r\n            .get();\r\n}\r\n```\r\n\r\nthe problem is that I don&#39;t know what to specify in &quot;remoteDirectory&quot; field (they use &quot;.&quot;, which I don&#39;t know why), also the application won&#39;t start unless I use this field. When using RotatingServerAdvice I provide remote directories this way:\r\n\r\n```\r\n@Bean\r\n    public RotatingServerAdvice advice() {\r\n        List&lt;RotationPolicy.KeyDirectory&gt; keyDirectories = new ArrayList&lt;&gt;();\r\n        for (String remoteDir: properties.getRemoteDirectory()) {\r\n            keyDirectories.add(new RotationPolicy.KeyDirectory(SESSION_1_KEY, remoteDir));\r\n        }\r\n        return new RotatingServerAdvice(sftpSessionFactory(), keyDirectories);\r\n    }\r\n```\r\n\r\nSo, what do I need to do with *.remoteDirectory(&quot;.&quot;)* to make it work properly? \r\n\r\n\r\nThe full code of my SFTP config is below:\r\n\r\n```\r\n@Configuration\r\n@RequiredArgsConstructor\r\npublic class SFTPConfig {\r\n\r\n    private static final String SESSION_1_KEY = &quot;SESSION_1&quot;;\r\n\r\n    private final SFTPProperties properties;\r\n    private final TimeService timeService;\r\n\r\n    @Value(&quot;${cron.parse}&quot;)\r\n    private String cronParse;\r\n\r\n    @Bean\r\n    public DelegatingSessionFactory&lt;ChannelSftp.LsEntry&gt; sftpSessionFactory() {\r\n        DefaultSftpSessionFactory defaultSftpSessionFactory = new DefaultSftpSessionFactory();\r\n        defaultSftpSessionFactory.setHost(properties.getHost());\r\n        defaultSftpSessionFactory.setPort(properties.getPort());\r\n        defaultSftpSessionFactory.setUser(properties.getUsername());\r\n        defaultSftpSessionFactory.setPassword(properties.getPassword());\r\n        defaultSftpSessionFactory.setAllowUnknownKeys(true);\r\n\r\n        CachingSessionFactory&lt;LsEntry&gt; cachingSessionFactory =\r\n                new CachingSessionFactory&lt;&gt;(defaultSftpSessionFactory);\r\n        cachingSessionFactory.setPoolSize(properties.getPoolSize());\r\n        cachingSessionFactory.setSessionWaitTimeout(properties.getTimeout());\r\n\r\n        Map&lt;Object, SessionFactory&lt;ChannelSftp.LsEntry&gt;&gt; sessionMap = new HashMap&lt;&gt;();\r\n        sessionMap.put(SESSION_1_KEY, cachingSessionFactory);\r\n        return new DelegatingSessionFactory&lt;&gt;(sessionMap, cachingSessionFactory);\r\n    }\r\n\r\n    @Bean\r\n    public PollableChannel sftpChannel() {\r\n        return new QueueChannel();\r\n    }\r\n\r\n    @Bean(name = PollerMetadata.DEFAULT_POLLER)\r\n    public PollerMetadata defaultPoller() {\r\n        PollerMetadata pollerMetadata = new PollerMetadata();\r\n        pollerMetadata.setTrigger(new PeriodicTrigger(10));\r\n        return pollerMetadata;\r\n    }\r\n\r\n    @Bean\r\n    public MessageHandler messageHandler(MyService myService, DirectoriesProperties directoriesProperties,\r\n                                         FileService fileService, IHub hub) {\r\n        return new MyMessageHandler(myService, directoriesProperties, fileService, hub);\r\n    }\r\n\r\n    @Bean\r\n    public IntegrationFlow integrationFlow(MyService myService, DirectoriesProperties directoriesProperties,FileService fileService, IHub hub) {\r\n\r\n        return IntegrationFlows\r\n                .from(Sftp.inboundAdapter(sftpSessionFactory())\r\n                                .filter(filter())\r\n                                .localDirectory(new File(properties.getLocalDirectory()))\r\n                                .autoCreateLocalDirectory(true)\r\n                                .deleteRemoteFiles(true)\r\n                                .localFilter(new AcceptOnceFileListFilter&lt;&gt;())\r\n                                .remoteDirectory(&quot;.&quot;),\r\n                        e -&gt; e.poller(Pollers.cron(cronParse).advice(advice())))\r\n                .channel(sftpChannel())\r\n                .handle(messageHandler(myService, directoriesProperties, fileService, hub))\r\n                .get();\r\n    }\r\n\r\n    @Bean\r\n    public RotatingServerAdvice advice() {\r\n        List&lt;RotationPolicy.KeyDirectory&gt; keyDirectories = new ArrayList&lt;&gt;();\r\n        for (String remoteDir: properties.getRemoteDirectory()) {\r\n            keyDirectories.add(new RotationPolicy.KeyDirectory(SESSION_1_KEY, remoteDir));\r\n        }\r\n        return new RotatingServerAdvice(sftpSessionFactory(), keyDirectories);\r\n    }\r\n\r\n    private ChainFileListFilter&lt;LsEntry&gt; filter() {\r\n        ChainFileListFilter&lt;LsEntry&gt; filter = new ChainFileListFilter&lt;&gt;();\r\n        filter.addFilter(new SftpRegexPatternFileListFilter(&quot;files_\\\\d{12}.txt&quot;));\r\n        filter.addFilter(new TimestampPeriodFileListFilter(timeService, properties.getPeriod()));\r\n        return filter;\r\n    }\r\n}\r\n```\r\n\r\nI&#39;ve spent a few days trying to make DelegatingSession work. Before, it used to be just CachingSessionFactory with one remote directory to use. Please, help me to understand what do I have to do with `.remoteDirectory(&quot;.&quot;)` part. Thanks in advance\r\n\r\n\r\n**UPDATE**\r\n\r\nArtem, thank you for your explanation. I thought my problem was with `.remoteDirectory(&quot;.&quot;)`, but now I have no suggestion why my integration test fails... Here is the code:\r\n\r\n```\r\npublic class ParsingTest extends BaseTest {\r\n\r\n    @Autowired\r\n    private MessageHandler messageHandler;\r\n    @Autowired\r\n    private MessageSource&lt;File&gt; messageSource;\r\n\r\n    @Test\r\n    void shouldSaveAllCalls() {\r\n        String filename = &quot;files_010120230300.txt&quot;;\r\n        String resourcePath = &quot;/files/good/&quot; + filename;\r\n        prepareFileInRemoteSftpServer(resourcePath, filename);\r\n\r\n        receiveAndHandleFileFromSftp();\r\n\r\n    }\r\n\r\n    private void prepareFileInRemoteSftpServer(String resourcePath, String remoteFilename) {\r\n        MountableFile mountableFile = MountableFile.forClasspathResource(resourcePath);\r\n        sftpContainer.copyFileToContainer(mountableFile, sftpRemotePath + remoteFilename);\r\n    }\r\n\r\n    private void receiveAndHandleFileFromSftp() {\r\n        Message&lt;?&gt; message = messageSource.receive();\r\n        assertThat(message).isNotNull();\r\n        messageHandler.handleMessage(message);\r\n    }\r\n\r\n}\r\n\r\n```\r\nIt fails on the line `assertThat(message).isNotNull();` because message is null. \r\n\r\nWould you mind telling me where I am wrong? My only suggestion is about wrong usage of `messageSource.receive();` but I don&#39;t know how else I can receive data","title":"What is a proper way to specify different remote directories when using DelegatingSessionFactory?","body":"<p>I want my DelegatingSessionFactory to search for files in different remote directories on the same server. I try to use RotatingServerAdvice. The <a href=\"https://docs.spring.io/spring-integration/reference/html/sftp.html#sftp-rotating-server-advice\" rel=\"nofollow noreferrer\">documentation </a> says I need to specify bean IntegrationFlow, which should be defined as</p>\n<pre><code>@Bean\npublic IntegrationFlow flow() {\n    return IntegrationFlow.from(Sftp.inboundAdapter(sf())\n                    .filter(new SftpPersistentAcceptOnceFileListFilter(new SimpleMetadataStore(), &quot;rotate&quot;))\n                    .localDirectory(new File(tmpDir))\n                    .localFilenameExpression(&quot;#remoteDirectory + T(java.io.File).separator + #root&quot;)\n                    .remoteDirectory(&quot;.&quot;),\n                e -&gt; e.poller(Pollers.fixedDelay(1).advice(advice())))\n            .channel(MessageChannels.queue(&quot;files&quot;))\n            .get();\n}\n</code></pre>\n<p>the problem is that I don't know what to specify in &quot;remoteDirectory&quot; field (they use &quot;.&quot;, which I don't know why), also the application won't start unless I use this field. When using RotatingServerAdvice I provide remote directories this way:</p>\n<pre><code>@Bean\n    public RotatingServerAdvice advice() {\n        List&lt;RotationPolicy.KeyDirectory&gt; keyDirectories = new ArrayList&lt;&gt;();\n        for (String remoteDir: properties.getRemoteDirectory()) {\n            keyDirectories.add(new RotationPolicy.KeyDirectory(SESSION_1_KEY, remoteDir));\n        }\n        return new RotatingServerAdvice(sftpSessionFactory(), keyDirectories);\n    }\n</code></pre>\n<p>So, what do I need to do with <em>.remoteDirectory(&quot;.&quot;)</em> to make it work properly?</p>\n<p>The full code of my SFTP config is below:</p>\n<pre><code>@Configuration\n@RequiredArgsConstructor\npublic class SFTPConfig {\n\n    private static final String SESSION_1_KEY = &quot;SESSION_1&quot;;\n\n    private final SFTPProperties properties;\n    private final TimeService timeService;\n\n    @Value(&quot;${cron.parse}&quot;)\n    private String cronParse;\n\n    @Bean\n    public DelegatingSessionFactory&lt;ChannelSftp.LsEntry&gt; sftpSessionFactory() {\n        DefaultSftpSessionFactory defaultSftpSessionFactory = new DefaultSftpSessionFactory();\n        defaultSftpSessionFactory.setHost(properties.getHost());\n        defaultSftpSessionFactory.setPort(properties.getPort());\n        defaultSftpSessionFactory.setUser(properties.getUsername());\n        defaultSftpSessionFactory.setPassword(properties.getPassword());\n        defaultSftpSessionFactory.setAllowUnknownKeys(true);\n\n        CachingSessionFactory&lt;LsEntry&gt; cachingSessionFactory =\n                new CachingSessionFactory&lt;&gt;(defaultSftpSessionFactory);\n        cachingSessionFactory.setPoolSize(properties.getPoolSize());\n        cachingSessionFactory.setSessionWaitTimeout(properties.getTimeout());\n\n        Map&lt;Object, SessionFactory&lt;ChannelSftp.LsEntry&gt;&gt; sessionMap = new HashMap&lt;&gt;();\n        sessionMap.put(SESSION_1_KEY, cachingSessionFactory);\n        return new DelegatingSessionFactory&lt;&gt;(sessionMap, cachingSessionFactory);\n    }\n\n    @Bean\n    public PollableChannel sftpChannel() {\n        return new QueueChannel();\n    }\n\n    @Bean(name = PollerMetadata.DEFAULT_POLLER)\n    public PollerMetadata defaultPoller() {\n        PollerMetadata pollerMetadata = new PollerMetadata();\n        pollerMetadata.setTrigger(new PeriodicTrigger(10));\n        return pollerMetadata;\n    }\n\n    @Bean\n    public MessageHandler messageHandler(MyService myService, DirectoriesProperties directoriesProperties,\n                                         FileService fileService, IHub hub) {\n        return new MyMessageHandler(myService, directoriesProperties, fileService, hub);\n    }\n\n    @Bean\n    public IntegrationFlow integrationFlow(MyService myService, DirectoriesProperties directoriesProperties,FileService fileService, IHub hub) {\n\n        return IntegrationFlows\n                .from(Sftp.inboundAdapter(sftpSessionFactory())\n                                .filter(filter())\n                                .localDirectory(new File(properties.getLocalDirectory()))\n                                .autoCreateLocalDirectory(true)\n                                .deleteRemoteFiles(true)\n                                .localFilter(new AcceptOnceFileListFilter&lt;&gt;())\n                                .remoteDirectory(&quot;.&quot;),\n                        e -&gt; e.poller(Pollers.cron(cronParse).advice(advice())))\n                .channel(sftpChannel())\n                .handle(messageHandler(myService, directoriesProperties, fileService, hub))\n                .get();\n    }\n\n    @Bean\n    public RotatingServerAdvice advice() {\n        List&lt;RotationPolicy.KeyDirectory&gt; keyDirectories = new ArrayList&lt;&gt;();\n        for (String remoteDir: properties.getRemoteDirectory()) {\n            keyDirectories.add(new RotationPolicy.KeyDirectory(SESSION_1_KEY, remoteDir));\n        }\n        return new RotatingServerAdvice(sftpSessionFactory(), keyDirectories);\n    }\n\n    private ChainFileListFilter&lt;LsEntry&gt; filter() {\n        ChainFileListFilter&lt;LsEntry&gt; filter = new ChainFileListFilter&lt;&gt;();\n        filter.addFilter(new SftpRegexPatternFileListFilter(&quot;files_\\\\d{12}.txt&quot;));\n        filter.addFilter(new TimestampPeriodFileListFilter(timeService, properties.getPeriod()));\n        return filter;\n    }\n}\n</code></pre>\n<p>I've spent a few days trying to make DelegatingSession work. Before, it used to be just CachingSessionFactory with one remote directory to use. Please, help me to understand what do I have to do with <code>.remoteDirectory(&quot;.&quot;)</code> part. Thanks in advance</p>\n<p><strong>UPDATE</strong></p>\n<p>Artem, thank you for your explanation. I thought my problem was with <code>.remoteDirectory(&quot;.&quot;)</code>, but now I have no suggestion why my integration test fails... Here is the code:</p>\n<pre><code>public class ParsingTest extends BaseTest {\n\n    @Autowired\n    private MessageHandler messageHandler;\n    @Autowired\n    private MessageSource&lt;File&gt; messageSource;\n\n    @Test\n    void shouldSaveAllCalls() {\n        String filename = &quot;files_010120230300.txt&quot;;\n        String resourcePath = &quot;/files/good/&quot; + filename;\n        prepareFileInRemoteSftpServer(resourcePath, filename);\n\n        receiveAndHandleFileFromSftp();\n\n    }\n\n    private void prepareFileInRemoteSftpServer(String resourcePath, String remoteFilename) {\n        MountableFile mountableFile = MountableFile.forClasspathResource(resourcePath);\n        sftpContainer.copyFileToContainer(mountableFile, sftpRemotePath + remoteFilename);\n    }\n\n    private void receiveAndHandleFileFromSftp() {\n        Message&lt;?&gt; message = messageSource.receive();\n        assertThat(message).isNotNull();\n        messageHandler.handleMessage(message);\n    }\n\n}\n\n</code></pre>\n<p>It fails on the line <code>assertThat(message).isNotNull();</code> because message is null.</p>\n<p>Would you mind telling me where I am wrong? My only suggestion is about wrong usage of <code>messageSource.receive();</code> but I don't know how else I can receive data</p>\n"},{"tags":["java","android","dalvik","smali"],"comments":[{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1681080286,"post_id":75964676,"comment_id":133997057,"body_markdown":"Searching the error in your tile returns some results here on Stackoverflow. Have you checked them if their answers are applicable in your case?","body":"Searching the error in your tile returns some results here on Stackoverflow. Have you checked them if their answers are applicable in your case?"},{"owner":{"account_id":28248364,"reputation":1,"user_id":21595024,"display_name":"aviation_hacker"},"score":0,"creation_date":1681111548,"post_id":75964676,"comment_id":133999852,"body_markdown":"Hey Robert, indeed I have had a look through all of those, but nothing is quite like my application usecase - most of them seem to be to do with instances of various viewers and forgetting to declare an object or something along those lines, whereas here I guess this used to work, but something has changed?\n\nI&#39;ve actually just been thinking about this now, and looking at the errors/code again, I&#39;m actually wondering if it&#39;s failing to get a resource ID, which is what is causing the getResourceEntryName to fail? I&#39;ll keep looking into this and will report back regardless :)","body":"Hey Robert, indeed I have had a look through all of those, but nothing is quite like my application usecase - most of them seem to be to do with instances of various viewers and forgetting to declare an object or something along those lines, whereas here I guess this used to work, but something has changed?  I&#39;ve actually just been thinking about this now, and looking at the errors/code again, I&#39;m actually wondering if it&#39;s failing to get a resource ID, which is what is causing the getResourceEntryName to fail? I&#39;ll keep looking into this and will report back regardless :)"}],"answers":[{"tags":[],"owner":{"account_id":28248364,"reputation":1,"user_id":21595024,"display_name":"aviation_hacker"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681113359,"creation_date":1681113359,"answer_id":75975285,"question_id":75964676,"body_markdown":"So, referencing the [Android Developer Website][1], I managed to change the getResourceEntryName element to GetResourceName and then had a look at the LogCat - what were previously the ResourceEntryNames I&#39;m supposing changed to android:id/EntryName due to how the application logging would append it all together.\r\n\r\nSo in this case, it looks like there isn&#39;t a global issue with the code itself (the rest seem to work fine), but it instead has to do with a particular element it is retrieving not having an ID, hence the issue appearing in the logs.\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/content/res/Resources#getResourceEntryName(int)","title":"android.content.res.Resources$NotFoundException: Unable to find resource ID #0xffffffff?","body":"<p>So, referencing the <a href=\"https://developer.android.com/reference/android/content/res/Resources#getResourceEntryName(int)\" rel=\"nofollow noreferrer\">Android Developer Website</a>, I managed to change the getResourceEntryName element to GetResourceName and then had a look at the LogCat - what were previously the ResourceEntryNames I'm supposing changed to android:id/EntryName due to how the application logging would append it all together.</p>\n<p>So in this case, it looks like there isn't a global issue with the code itself (the rest seem to work fine), but it instead has to do with a particular element it is retrieving not having an ID, hence the issue appearing in the logs.</p>\n"}],"owner":{"account_id":28248364,"reputation":1,"user_id":21595024,"display_name":"aviation_hacker"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":303,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1681113359,"creation_date":1680949636,"question_id":75964676,"body_markdown":"I&#39;m trying to repair an old android app that I&#39;ve been using for years (not the original developer). I&#39;ve got all the other issues fixed (yay! By pure luck almost) and I&#39;m running into this issue, where it seems to have an issue getting the ResourceEntryName? Unfortunately I can&#39;t figure out exactly what&#39;s wrong with it and where it&#39;s throwing the error apart from the line references given, nor am I particularly java/android dalvik familiar either, so I may be out of my depth on this one.\r\n\r\nI&#39;ve double checked as many of the obvious resource issues that I could find in terms of specific references (maneuvers etc, as it&#39;s designed to take data from Maps notifications and display them on a Pebble Watch), and have also tried reordering the order that it getID&#39;s and getResources as some of the other issues were to do with the order things were executed in, due to the application parsing notification data to then display on the watch - no practical difference here, and depending on the order these were loaded in it came back with Fatal Errors so I&#39;ve put them back to original using a backup file. Also tried commenting out the line as well, results in the app crashing and a Fatal Error, same with removing the integer in brackets as well. Another thread suggested moving the drawables into the base drawable folders rather than version specific eg. drawable-v23 but that didn&#39;t make a difference either, nor did moving layout files incase there was one missing/in another folder.\r\n\r\nAny help/suggestions you could provide would be appreciated! \r\nI did have a search through on similar errors, and the causes seemed to be rather wide ranging and application specific, so I thought it best to ask my own question instead. I&#39;ve attached both the LogCat that&#39;s throwing the error (seems to repeat pretty frequently in the logs, but doesn&#39;t affect functionality seemingly at all?) and also the code from the .smali file in question.\r\n\r\nThanks in advance! :)\r\n\r\n```\r\n04-08 21:43:14.890 25573 27081 E corp.pebble.nav: No package ID ff found for ID 0xffffffff.\r\n04-08 21:43:14.890 25573 27081 D NotificationHandler: getResources failed\r\n04-08 21:43:14.890 25573 27081 D NotificationHandler: android.content.res.Resources$NotFoundException: Unable to find resource ID #0xffffffff\r\n04-08 21:43:14.890 25573 27081 D NotificationHandler: \tat android.content.res.ResourcesImpl.getResourceEntryName(ResourcesImpl.java:289)\r\n04-08 21:43:14.890 25573 27081 D NotificationHandler: \tat android.content.res.Resources.getResourceEntryName(Resources.java:2335)\r\n04-08 21:43:14.890 25573 27081 D NotificationHandler: \tat com.batescorp.pebble.nav.lib.NotificationHandler.a(SourceFile:259)\r\n04-08 21:43:14.890 25573 27081 D NotificationHandler: \tat com.batescorp.pebble.nav.lib.NotificationHandler.a(SourceFile:333)\r\n04-08 21:43:14.890 25573 27081 D NotificationHandler: \tat com.batescorp.pebble.nav.lib.NotificationHandler.a(SourceFile:333)\r\n04-08 21:43:14.890 25573 27081 D NotificationHandler: \tat com.batescorp.pebble.nav.lib.NotificationHandler.a(SourceFile:333)\r\n04-08 21:43:14.890 25573 27081 D NotificationHandler: \tat com.batescorp.pebble.nav.lib.NotificationHandler.a(SourceFile:27)\r\n04-08 21:43:14.890 25573 27081 D NotificationHandler: \tat com.batescorp.pebble.nav.lib.NotificationHandler$1.run(SourceFile:210)\r\n04-08 21:43:14.890 25573 27081 D NotificationHandler: \tat java.lang.Thread.run(Thread.java:1012)\r\n```\r\n\r\n\r\n```\r\n# instance fields\r\n.field private a:Ljava/lang/String;\r\n```\r\n\r\n```\r\n.line 67\r\n    const-string v0, &quot;&quot;\r\n\r\n    iput-object v0, p0, Lcom/batescorp/pebble/nav/lib/NotificationHandler;-&gt;a:Ljava/lang/String;\r\n```\r\n\r\n\r\n```\r\n.line 259\r\n    :try_start_1\r\n    invoke-virtual {p2}, Landroid/content/Context;-&gt;getResources()Landroid/content/res/Resources;\r\n\r\n    move-result-object v4\r\n\r\n    invoke-virtual {v1}, Landroid/view/View;-&gt;getId()I\r\n\r\n    move-result v5\r\n\r\n    invoke-virtual {v4, v5}, Landroid/content/res/Resources;-&gt;getResourceEntryName(I)Ljava/lang/String;\r\n    :try_end_1\r\n    .catch Ljava/lang/Exception; {:try_start_1 .. :try_end_1} :catch_0\r\n\r\n    move-result-object v0\r\n\r\n    move-object v4, v0\r\n```\r\n\r\n\r\n```\r\n.line 333\r\n    check-cast v1, Landroid/view/ViewGroup;\r\n\r\n    invoke-direct {p0, p1, p2, v1}, Lcom/batescorp/pebble/nav/lib/NotificationHandler;-&gt;a(Landroid/content/Context;Landroid/content/Context;Landroid/view/ViewGroup;)Ljava/lang/String;\r\n\r\n    goto/16 :goto_1\r\n```","title":"android.content.res.Resources$NotFoundException: Unable to find resource ID #0xffffffff?","body":"<p>I'm trying to repair an old android app that I've been using for years (not the original developer). I've got all the other issues fixed (yay! By pure luck almost) and I'm running into this issue, where it seems to have an issue getting the ResourceEntryName? Unfortunately I can't figure out exactly what's wrong with it and where it's throwing the error apart from the line references given, nor am I particularly java/android dalvik familiar either, so I may be out of my depth on this one.</p>\n<p>I've double checked as many of the obvious resource issues that I could find in terms of specific references (maneuvers etc, as it's designed to take data from Maps notifications and display them on a Pebble Watch), and have also tried reordering the order that it getID's and getResources as some of the other issues were to do with the order things were executed in, due to the application parsing notification data to then display on the watch - no practical difference here, and depending on the order these were loaded in it came back with Fatal Errors so I've put them back to original using a backup file. Also tried commenting out the line as well, results in the app crashing and a Fatal Error, same with removing the integer in brackets as well. Another thread suggested moving the drawables into the base drawable folders rather than version specific eg. drawable-v23 but that didn't make a difference either, nor did moving layout files incase there was one missing/in another folder.</p>\n<p>Any help/suggestions you could provide would be appreciated!\nI did have a search through on similar errors, and the causes seemed to be rather wide ranging and application specific, so I thought it best to ask my own question instead. I've attached both the LogCat that's throwing the error (seems to repeat pretty frequently in the logs, but doesn't affect functionality seemingly at all?) and also the code from the .smali file in question.</p>\n<p>Thanks in advance! :)</p>\n<pre><code>04-08 21:43:14.890 25573 27081 E corp.pebble.nav: No package ID ff found for ID 0xffffffff.\n04-08 21:43:14.890 25573 27081 D NotificationHandler: getResources failed\n04-08 21:43:14.890 25573 27081 D NotificationHandler: android.content.res.Resources$NotFoundException: Unable to find resource ID #0xffffffff\n04-08 21:43:14.890 25573 27081 D NotificationHandler:   at android.content.res.ResourcesImpl.getResourceEntryName(ResourcesImpl.java:289)\n04-08 21:43:14.890 25573 27081 D NotificationHandler:   at android.content.res.Resources.getResourceEntryName(Resources.java:2335)\n04-08 21:43:14.890 25573 27081 D NotificationHandler:   at com.batescorp.pebble.nav.lib.NotificationHandler.a(SourceFile:259)\n04-08 21:43:14.890 25573 27081 D NotificationHandler:   at com.batescorp.pebble.nav.lib.NotificationHandler.a(SourceFile:333)\n04-08 21:43:14.890 25573 27081 D NotificationHandler:   at com.batescorp.pebble.nav.lib.NotificationHandler.a(SourceFile:333)\n04-08 21:43:14.890 25573 27081 D NotificationHandler:   at com.batescorp.pebble.nav.lib.NotificationHandler.a(SourceFile:333)\n04-08 21:43:14.890 25573 27081 D NotificationHandler:   at com.batescorp.pebble.nav.lib.NotificationHandler.a(SourceFile:27)\n04-08 21:43:14.890 25573 27081 D NotificationHandler:   at com.batescorp.pebble.nav.lib.NotificationHandler$1.run(SourceFile:210)\n04-08 21:43:14.890 25573 27081 D NotificationHandler:   at java.lang.Thread.run(Thread.java:1012)\n</code></pre>\n<pre><code># instance fields\n.field private a:Ljava/lang/String;\n</code></pre>\n<pre><code>.line 67\n    const-string v0, &quot;&quot;\n\n    iput-object v0, p0, Lcom/batescorp/pebble/nav/lib/NotificationHandler;-&gt;a:Ljava/lang/String;\n</code></pre>\n<pre><code>.line 259\n    :try_start_1\n    invoke-virtual {p2}, Landroid/content/Context;-&gt;getResources()Landroid/content/res/Resources;\n\n    move-result-object v4\n\n    invoke-virtual {v1}, Landroid/view/View;-&gt;getId()I\n\n    move-result v5\n\n    invoke-virtual {v4, v5}, Landroid/content/res/Resources;-&gt;getResourceEntryName(I)Ljava/lang/String;\n    :try_end_1\n    .catch Ljava/lang/Exception; {:try_start_1 .. :try_end_1} :catch_0\n\n    move-result-object v0\n\n    move-object v4, v0\n</code></pre>\n<pre><code>.line 333\n    check-cast v1, Landroid/view/ViewGroup;\n\n    invoke-direct {p0, p1, p2, v1}, Lcom/batescorp/pebble/nav/lib/NotificationHandler;-&gt;a(Landroid/content/Context;Landroid/content/Context;Landroid/view/ViewGroup;)Ljava/lang/String;\n\n    goto/16 :goto_1\n</code></pre>\n"},{"tags":["java","multithreading","concurrency","synchronize","reentrantlock"],"comments":[{"owner":{"account_id":2784842,"reputation":67271,"user_id":2396539,"accept_rate":78,"display_name":"Aniket Thakur"},"score":4,"creation_date":1465237050,"post_id":11821801,"comment_id":62806822,"body_markdown":"BTW all java intrinsic locks are reentrant by nature.","body":"BTW all java intrinsic locks are reentrant by nature."},{"owner":{"account_id":2784842,"reputation":67271,"user_id":2396539,"accept_rate":78,"display_name":"Aniket Thakur"},"score":0,"creation_date":1473867405,"post_id":11821801,"comment_id":66306406,"body_markdown":"@pongapundit so `synchronized(this){synchronized(this){//some code}}` will not cause dead lock. For intrinsic lock if they obtain monitor on a resource and if they want it again they can get it without a dead lock.","body":"@pongapundit so <code>synchronized(this){synchronized(this){&#47;&#47;some code}}</code> will not cause dead lock. For intrinsic lock if they obtain monitor on a resource and if they want it again they can get it without a dead lock."},{"owner":{"account_id":17121470,"reputation":381,"user_id":12389586,"display_name":"trilocho"},"score":0,"creation_date":1633362254,"post_id":11821801,"comment_id":122733765,"body_markdown":"object.lock;......;object.unlock equals synchronized(this.class) it is at class-level lock not object-level","body":"object.lock;......;object.unlock equals synchronized(this.class) it is at class-level lock not object-level"}],"answers":[{"tags":[],"owner":{"account_id":24725,"reputation":54586,"user_id":63074,"accept_rate":55,"display_name":"Mike Dinescu"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1557192332,"creation_date":1344219055,"answer_id":11821823,"question_id":11821801,"body_markdown":"[`ReentrantReadWriteLock`][1] is a specialized lock whereas `synchronized(this)` is a general purpose lock. They are similar but not quite the same.\r\n\r\nYou are right in that you could use `synchronized(this)` instead of `ReentrantReadWriteLock` but the opposite is not always true.\r\n\r\nIf you&#39;d like to better understand what makes `ReentrantReadWriteLock` special look up some information about producer-consumer thread synchronization.\r\n\r\nIn general you can remember that whole-method synchronization and general purpose synchronization (using the `synchronized` keyword) can be used in most applications without thinking *too much* about the semantics of the synchronization but if you need to squeeze performance out of your code you may need to explore other more fine-grained, or special-purpose synchronization mechanisms.\r\n\r\nBy the way, using `synchronized(this)` - and in general locking using a public class instance - can be problematic because it opens up your code to potential dead-locks because somebody else not knowingly might try to lock against your object somewhere else in the program.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/9/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html","title":"Why use a ReentrantLock if one can use synchronized(this)?","body":"<p><a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html\" rel=\"nofollow noreferrer\"><code>ReentrantReadWriteLock</code></a> is a specialized lock whereas <code>synchronized(this)</code> is a general purpose lock. They are similar but not quite the same.</p>\n\n<p>You are right in that you could use <code>synchronized(this)</code> instead of <code>ReentrantReadWriteLock</code> but the opposite is not always true.</p>\n\n<p>If you'd like to better understand what makes <code>ReentrantReadWriteLock</code> special look up some information about producer-consumer thread synchronization.</p>\n\n<p>In general you can remember that whole-method synchronization and general purpose synchronization (using the <code>synchronized</code> keyword) can be used in most applications without thinking <em>too much</em> about the semantics of the synchronization but if you need to squeeze performance out of your code you may need to explore other more fine-grained, or special-purpose synchronization mechanisms.</p>\n\n<p>By the way, using <code>synchronized(this)</code> - and in general locking using a public class instance - can be problematic because it opens up your code to potential dead-locks because somebody else not knowingly might try to lock against your object somewhere else in the program.</p>\n"},{"tags":[],"owner":{"account_id":290123,"reputation":29330,"user_id":591495,"display_name":"obataku"},"down_vote_count":0,"up_vote_count":557,"is_accepted":true,"score":557,"last_activity_date":1593290613,"creation_date":1344220188,"answer_id":11821900,"question_id":11821801,"body_markdown":"A [ReentrantLock][1] is _unstructured_, unlike `synchronized` constructs -- i.e.  you don&#39;t need to use a block structure for locking and can even hold a lock across methods. An example:\r\n\r\n    private ReentrantLock lock;\r\n\r\n    public void foo() {\r\n      ...\r\n      lock.lock();\r\n      ...\r\n    }\r\n\r\n    public void bar() {\r\n      ...\r\n      lock.unlock();\r\n      ...\r\n    }\r\n\r\nSuch flow is impossible to represent via a single monitor in a `synchronized` construct.\r\n___\r\nAside from that, `ReentrantLock` supports [lock polling](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html#tryLock()) and [interruptible lock waits that support time-out](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html#tryLock(long,%20java.util.concurrent.TimeUnit)). `ReentrantLock` also has support for [configurable _fairness_ policy](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html#ReentrantLock(boolean)), allowing more flexible thread scheduling.\r\n\r\n&gt;The constructor for this class accepts an optional _fairness_ parameter. When set `true`, under contention, locks favor granting access to the longest-waiting thread. Otherwise this lock does not guarantee any particular access order. Programs using fair locks accessed by many threads may display lower overall throughput (i.e., are slower; often much slower) than those using the default setting, but have smaller variances in times to obtain locks and guarantee lack of starvation. Note however, that fairness of locks does not guarantee fairness of thread scheduling. Thus, one of many threads using a fair lock may obtain it multiple times in succession while other active threads are not progressing and not currently holding the lock. Also note that the untimed `tryLock` method does not honor the fairness setting. It will succeed if the lock is available even if other threads are waiting.\r\n\r\n___\r\n`ReentrantLock` **may** also be [__more scalable__](http://lycog.com/concurency/performance-reentrantlock-synchronized/), performing much better under higher contention. You can read more about this [here](http://www.ibm.com/developerworks/java/library/j-jtp10264/).\r\n\r\nThis claim has been contested, however; see the following comment:\r\n&gt;In the reentrant lock test, a new lock is created each time, thus there is no exclusive locking and the resulting data is invalid. Also, the IBM link offers no source code for the underlying benchmark so its impossible to characterize whether the test was even conducted correctly. \r\n\r\n___\r\nWhen should you use `ReentrantLock`s? According to that developerWorks article...\r\n&gt;The answer is pretty simple -- use it when you actually need something it provides that `synchronized` doesn&#39;t, like timed lock waits, interruptible lock waits, non-block-structured locks, multiple condition variables, or lock polling. `ReentrantLock` also has scalability benefits, and you should use it if you actually have a situation that exhibits high contention, but remember that the vast majority of `synchronized` blocks hardly ever exhibit any contention, let alone high contention. I would advise developing with synchronization until synchronization has proven to be inadequate, rather than simply assuming &quot;the performance will be better&quot; if you use `ReentrantLock`. Remember, these are advanced tools for advanced users. (And truly advanced users tend to prefer the simplest tools they can find until they&#39;re convinced the simple tools are inadequate.) As always, make it right first, and then worry about whether or not you have to make it faster.\r\n\r\n___\r\n\r\nOne final aspect that&#39;s gonna become more relevant in the near future has to do with [Java 15 and Project Loom][2]. In the (new) world of virtual threads, the underlying scheduler would be able to work much better with `ReentrantLock` than it&#39;s able to do with `synchronized`, that&#39;s true at least in the initial Java 15 release but may be optimized later. \r\n\r\n&gt; In the current Loom implementation, a virtual thread can be pinned in two situations: when there is a native frame on the stack  when Java code calls into native code (JNI) that then calls back into Java  and when inside a `synchronized` block or method. In those cases, blocking the virtual thread will block the physical thread that carries it. Once the native call completes or the monitor released (the `synchronized` block/method is exited) the thread is unpinned.\r\n\r\n&gt; If you have a common I/O operation guarded by a `synchronized`, replace the monitor with a `ReentrantLock` to let your application benefit fully from Looms scalability boost even before we fix pinning by monitors (or, better yet, use the higher-performance `StampedLock` if you can).\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/ReentrantLock.html\r\n  [2]:\r\nhttp://cr.openjdk.java.net/~rpressler/loom/loom/sol1_part1.html#pinning","title":"Why use a ReentrantLock if one can use synchronized(this)?","body":"<p>A <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/ReentrantLock.html\" rel=\"noreferrer\">ReentrantLock</a> is <em>unstructured</em>, unlike <code>synchronized</code> constructs -- i.e.  you don't need to use a block structure for locking and can even hold a lock across methods. An example:</p>\n<pre><code>private ReentrantLock lock;\n\npublic void foo() {\n  ...\n  lock.lock();\n  ...\n}\n\npublic void bar() {\n  ...\n  lock.unlock();\n  ...\n}\n</code></pre>\n<p>Such flow is impossible to represent via a single monitor in a <code>synchronized</code> construct.</p>\n<hr />\n<p>Aside from that, <code>ReentrantLock</code> supports <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html#tryLock()\" rel=\"noreferrer\">lock polling</a> and <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html#tryLock(long,%20java.util.concurrent.TimeUnit)\" rel=\"noreferrer\">interruptible lock waits that support time-out</a>. <code>ReentrantLock</code> also has support for <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html#ReentrantLock(boolean)\" rel=\"noreferrer\">configurable <em>fairness</em> policy</a>, allowing more flexible thread scheduling.</p>\n<blockquote>\n<p>The constructor for this class accepts an optional <em>fairness</em> parameter. When set <code>true</code>, under contention, locks favor granting access to the longest-waiting thread. Otherwise this lock does not guarantee any particular access order. Programs using fair locks accessed by many threads may display lower overall throughput (i.e., are slower; often much slower) than those using the default setting, but have smaller variances in times to obtain locks and guarantee lack of starvation. Note however, that fairness of locks does not guarantee fairness of thread scheduling. Thus, one of many threads using a fair lock may obtain it multiple times in succession while other active threads are not progressing and not currently holding the lock. Also note that the untimed <code>tryLock</code> method does not honor the fairness setting. It will succeed if the lock is available even if other threads are waiting.</p>\n</blockquote>\n<hr />\n<p><code>ReentrantLock</code> <strong>may</strong> also be <a href=\"http://lycog.com/concurency/performance-reentrantlock-synchronized/\" rel=\"noreferrer\"><strong>more scalable</strong></a>, performing much better under higher contention. You can read more about this <a href=\"http://www.ibm.com/developerworks/java/library/j-jtp10264/\" rel=\"noreferrer\">here</a>.</p>\n<p>This claim has been contested, however; see the following comment:</p>\n<blockquote>\n<p>In the reentrant lock test, a new lock is created each time, thus there is no exclusive locking and the resulting data is invalid. Also, the IBM link offers no source code for the underlying benchmark so its impossible to characterize whether the test was even conducted correctly.</p>\n</blockquote>\n<hr />\n<p>When should you use <code>ReentrantLock</code>s? According to that developerWorks article...</p>\n<blockquote>\n<p>The answer is pretty simple -- use it when you actually need something it provides that <code>synchronized</code> doesn't, like timed lock waits, interruptible lock waits, non-block-structured locks, multiple condition variables, or lock polling. <code>ReentrantLock</code> also has scalability benefits, and you should use it if you actually have a situation that exhibits high contention, but remember that the vast majority of <code>synchronized</code> blocks hardly ever exhibit any contention, let alone high contention. I would advise developing with synchronization until synchronization has proven to be inadequate, rather than simply assuming &quot;the performance will be better&quot; if you use <code>ReentrantLock</code>. Remember, these are advanced tools for advanced users. (And truly advanced users tend to prefer the simplest tools they can find until they're convinced the simple tools are inadequate.) As always, make it right first, and then worry about whether or not you have to make it faster.</p>\n</blockquote>\n<hr />\n<p>One final aspect that's gonna become more relevant in the near future has to do with <a href=\"http://cr.openjdk.java.net/%7Erpressler/loom/loom/sol1_part1.html#pinning\" rel=\"noreferrer\">Java 15 and Project Loom</a>. In the (new) world of virtual threads, the underlying scheduler would be able to work much better with <code>ReentrantLock</code> than it's able to do with <code>synchronized</code>, that's true at least in the initial Java 15 release but may be optimized later.</p>\n<blockquote>\n<p>In the current Loom implementation, a virtual thread can be pinned in two situations: when there is a native frame on the stack  when Java code calls into native code (JNI) that then calls back into Java  and when inside a <code>synchronized</code> block or method. In those cases, blocking the virtual thread will block the physical thread that carries it. Once the native call completes or the monitor released (the <code>synchronized</code> block/method is exited) the thread is unpinned.</p>\n</blockquote>\n<blockquote>\n<p>If you have a common I/O operation guarded by a <code>synchronized</code>, replace the monitor with a <code>ReentrantLock</code> to let your application benefit fully from Looms scalability boost even before we fix pinning by monitors (or, better yet, use the higher-performance <code>StampedLock</code> if you can).</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1681112681,"creation_date":1461522547,"answer_id":36827191,"question_id":11821801,"body_markdown":"\r\nA simple example using `ReentrantLock`\r\n\r\n    import java.util.concurrent.locks.ReentrantLock;\r\n\r\n    class ReentrantLockDemo {\r\n\t    private final ReentrantLock lock = new ReentrantLock();\r\n\r\n\t    public void safeMethod1() {\r\n\t\t    try {\r\n\t\t\t    lock.lock();\r\n\t\t\t    /* your business logic goes here */\r\n\r\n\t\t    } finally {\r\n\t\t\t    lock.unlock();\r\n\t\t    }\r\n\t     }\r\n    }\r\n\r\nFrom oracle documentation page about [ReentrantLock][1]:\r\n\r\n&gt; A reentrant mutual exclusion Lock with the same basic behaviour and semantics as the implicit monitor lock accessed using synchronized methods and statements, but with extended capabilities.\r\n\r\n&gt;The constructor for this class accepts an optional *fairness* parameter. When set true, under contention,  *locks favor granting access to the longest-waiting thread*. Otherwise this lock does not guarantee any particular access order.\r\n\r\n*ReentrantLock* key APIs, which are better over **synchronized**\r\n\r\n1. `lockInterruptibly()` : Acquires the lock unless the current thread is interrupted.\r\n2. \t`tryLock()` :  Acquires the lock only if it is not held by another thread at the time of invocation\r\n3.\t`tryLock(long timeout, TimeUnit unit)`\r\nAcquires the lock if it is not held by another thread within the given waiting time and the current thread has not been interrupted. This API avoid thread starvation, which is a drawback with `synchronized`\r\n4. `public ReentrantLock(boolean fair)` : ReentrantLock with the fairness policy.\r\n\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/ReentrantLock.html\r\n ","title":"Why use a ReentrantLock if one can use synchronized(this)?","body":"<p>A simple example using <code>ReentrantLock</code></p>\n<pre><code>import java.util.concurrent.locks.ReentrantLock;\n\nclass ReentrantLockDemo {\n    private final ReentrantLock lock = new ReentrantLock();\n\n    public void safeMethod1() {\n        try {\n            lock.lock();\n            /* your business logic goes here */\n\n        } finally {\n            lock.unlock();\n        }\n     }\n}\n</code></pre>\n<p>From oracle documentation page about <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/ReentrantLock.html\" rel=\"nofollow noreferrer\">ReentrantLock</a>:</p>\n<blockquote>\n<p>A reentrant mutual exclusion Lock with the same basic behaviour and semantics as the implicit monitor lock accessed using synchronized methods and statements, but with extended capabilities.</p>\n</blockquote>\n<blockquote>\n<p>The constructor for this class accepts an optional <em>fairness</em> parameter. When set true, under contention,  <em>locks favor granting access to the longest-waiting thread</em>. Otherwise this lock does not guarantee any particular access order.</p>\n</blockquote>\n<p><em>ReentrantLock</em> key APIs, which are better over <strong>synchronized</strong></p>\n<ol>\n<li><code>lockInterruptibly()</code> : Acquires the lock unless the current thread is interrupted.</li>\n<li><code>tryLock()</code> :  Acquires the lock only if it is not held by another thread at the time of invocation</li>\n<li><code>tryLock(long timeout, TimeUnit unit)</code>\nAcquires the lock if it is not held by another thread within the given waiting time and the current thread has not been interrupted. This API avoid thread starvation, which is a drawback with <code>synchronized</code></li>\n<li><code>public ReentrantLock(boolean fair)</code> : ReentrantLock with the fairness policy.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":444211,"reputation":61229,"user_id":835883,"accept_rate":81,"display_name":"j2emanue"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1466276355,"creation_date":1466276355,"answer_id":37900587,"question_id":11821801,"body_markdown":"You can use reentrant locks with a fairness policy  or timeout to avoid thread starvation.  You can apply a  thread fairness policy.   it will help avoid a thread waiting forever to get to your resources. \r\n\r\n    private final ReentrantLock lock = new ReentrantLock(true);\r\n    //the param true turns on the fairness policy. \r\n\r\nThe &quot;fairness policy&quot; picks the next runnable thread to execute. It is based on priority, time since last run, blah blah\r\n\r\nalso,\r\nSynchronize can block indefinitely if it cant escape the block. Reentrantlock can have timeout set.  ","title":"Why use a ReentrantLock if one can use synchronized(this)?","body":"<p>You can use reentrant locks with a fairness policy  or timeout to avoid thread starvation.  You can apply a  thread fairness policy.   it will help avoid a thread waiting forever to get to your resources. </p>\n\n<pre><code>private final ReentrantLock lock = new ReentrantLock(true);\n//the param true turns on the fairness policy. \n</code></pre>\n\n<p>The \"fairness policy\" picks the next runnable thread to execute. It is based on priority, time since last run, blah blah</p>\n\n<p>also,\nSynchronize can block indefinitely if it cant escape the block. Reentrantlock can have timeout set.  </p>\n"},{"tags":[],"owner":{"account_id":5236368,"reputation":1089,"user_id":4184808,"accept_rate":0,"display_name":"Sumit Kapoor"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1538829281,"creation_date":1538829281,"answer_id":52679146,"question_id":11821801,"body_markdown":"**Synchronized locks** does not offer any mechanism of waiting queue in which after the execution of one thread any thread running in parallel can acquire the lock. Due to which the thread which is there in the system and running for a longer period of time never gets chance to access the shared resource thus leading to starvation.\r\n\r\n**Reentrant locks** are very much flexible and has a fairness policy in which if a thread is waiting for a longer time and after the completion of the currently executing thread we can make sure that the longer waiting thread gets the chance of accessing the shared resource hereby decreasing the throughput of the system and making it more time consuming. \r\n\r\n","title":"Why use a ReentrantLock if one can use synchronized(this)?","body":"<p><strong>Synchronized locks</strong> does not offer any mechanism of waiting queue in which after the execution of one thread any thread running in parallel can acquire the lock. Due to which the thread which is there in the system and running for a longer period of time never gets chance to access the shared resource thus leading to starvation.</p>\n\n<p><strong>Reentrant locks</strong> are very much flexible and has a fairness policy in which if a thread is waiting for a longer time and after the completion of the currently executing thread we can make sure that the longer waiting thread gets the chance of accessing the shared resource hereby decreasing the throughput of the system and making it more time consuming. </p>\n"},{"tags":[],"owner":{"account_id":7422340,"reputation":2446,"user_id":5646176,"accept_rate":50,"display_name":"RonTLV"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1542181179,"creation_date":1542181179,"answer_id":53295187,"question_id":11821801,"body_markdown":"Lets assume this code is running in a thread:\r\n\r\n    private static ReentrantLock lock = new ReentrantLock();\r\n    \r\n    void accessResource() {\r\n        lock.lock();\r\n        if( checkSomeCondition() ) {\r\n            accessResource();\r\n        }\r\n        lock.unlock();\r\n    }\r\n\r\nBecause the thread owns the lock it will allow multiple calls to lock(), so it re-enter the lock. This can be achieved with a reference count so it doesn&#39;t has to acquire lock again.","title":"Why use a ReentrantLock if one can use synchronized(this)?","body":"<p>Lets assume this code is running in a thread:</p>\n\n<pre><code>private static ReentrantLock lock = new ReentrantLock();\n\nvoid accessResource() {\n    lock.lock();\n    if( checkSomeCondition() ) {\n        accessResource();\n    }\n    lock.unlock();\n}\n</code></pre>\n\n<p>Because the thread owns the lock it will allow multiple calls to lock(), so it re-enter the lock. This can be achieved with a reference count so it doesn't has to acquire lock again.</p>\n"},{"tags":[],"owner":{"account_id":2700381,"reputation":1167,"user_id":2331225,"accept_rate":75,"display_name":"Dhaval D"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1558502105,"creation_date":1558502105,"answer_id":56249714,"question_id":11821801,"body_markdown":"One thing to keep in mind is : &lt;br/&gt;&lt;br/&gt;\r\nThe name &#39;*ReentrantLock*&#39; gives out a wrong message about other locking mechanism that they are not re-entrant. **This is not true.** Lock acquired via &#39;synchronized&#39; is also re-entrant in Java. \r\n\r\nKey difference is that &#39;synchronized&#39; uses intrinsic lock ( one that every Object has ) while Lock API doesn&#39;t.","title":"Why use a ReentrantLock if one can use synchronized(this)?","body":"<p>One thing to keep in mind is : <br/><br/>\nThe name '<em>ReentrantLock</em>' gives out a wrong message about other locking mechanism that they are not re-entrant. <strong>This is not true.</strong> Lock acquired via 'synchronized' is also re-entrant in Java. </p>\n\n<p>Key difference is that 'synchronized' uses intrinsic lock ( one that every Object has ) while Lock API doesn't.</p>\n"},{"tags":[],"owner":{"account_id":1630934,"reputation":3623,"user_id":1505487,"accept_rate":40,"display_name":"Solubris"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1586998937,"creation_date":1586998937,"answer_id":61241052,"question_id":11821801,"body_markdown":"I think the wait/notify/notifyAll methods don&#39;t belong on the Object class as it pollutes all objects with methods that are rarely used.  They make much more sense on a dedicated Lock class.  So from this point of view, perhaps it&#39;s better to use a tool that is explicitly designed for the job at hand - ie ReentrantLock.\r\n","title":"Why use a ReentrantLock if one can use synchronized(this)?","body":"<p>I think the wait/notify/notifyAll methods don't belong on the Object class as it pollutes all objects with methods that are rarely used.  They make much more sense on a dedicated Lock class.  So from this point of view, perhaps it's better to use a tool that is explicitly designed for the job at hand - ie ReentrantLock.</p>\n"}],"owner":{"account_id":357639,"reputation":10547,"user_id":992600,"accept_rate":74,"display_name":"adhg"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":189380,"favorite_count":0,"down_vote_count":1,"up_vote_count":385,"accepted_answer_id":11821900,"answer_count":8,"score":384,"last_activity_date":1681112681,"creation_date":1344218919,"question_id":11821801,"body_markdown":"I&#39;m trying to understand what makes the lock in concurrency so important if one can use `synchronized (this)`. In the dummy code below, I can do either:\r\n\r\n 1. synchronized the entire method or synchronize the vulnerable area (`synchronized(this){...}`)\r\n 2. OR lock the vulnerable code area with a ReentrantLock.\r\n\r\nCode:\r\n\r\n        private final ReentrantLock lock = new ReentrantLock(); \r\n        private static List&lt;Integer&gt; ints;\r\n\t\r\n        public Integer getResult(String name) { \r\n            .\r\n            .\r\n            .\r\n            lock.lock();\r\n            try {\r\n                if (ints.size()==3) {\r\n                    ints=null;\r\n                    return -9;\r\n                }\t\r\n\t\t\t\r\n                for (int x=0; x&lt;ints.size(); x++) {\r\n                    System.out.println(&quot;[&quot;+name+&quot;] &quot;+x+&quot;/&quot;+ints.size()+&quot;. values &gt;&gt;&gt;&gt;&quot;+ints.get(x));\r\n                }\r\n\t\t\t\r\n            } finally {\r\n                lock.unlock();\r\n            } \r\n            return random;\r\n    }\r\n\r\n ","title":"Why use a ReentrantLock if one can use synchronized(this)?","body":"<p>I'm trying to understand what makes the lock in concurrency so important if one can use <code>synchronized (this)</code>. In the dummy code below, I can do either:</p>\n\n<ol>\n<li>synchronized the entire method or synchronize the vulnerable area (<code>synchronized(this){...}</code>)</li>\n<li>OR lock the vulnerable code area with a ReentrantLock.</li>\n</ol>\n\n<p>Code:</p>\n\n<pre><code>    private final ReentrantLock lock = new ReentrantLock(); \n    private static List&lt;Integer&gt; ints;\n\n    public Integer getResult(String name) { \n        .\n        .\n        .\n        lock.lock();\n        try {\n            if (ints.size()==3) {\n                ints=null;\n                return -9;\n            }   \n\n            for (int x=0; x&lt;ints.size(); x++) {\n                System.out.println(\"[\"+name+\"] \"+x+\"/\"+ints.size()+\". values &gt;&gt;&gt;&gt;\"+ints.get(x));\n            }\n\n        } finally {\n            lock.unlock();\n        } \n        return random;\n}\n</code></pre>\n"},{"tags":["java","csv","apache-commons-csv"],"comments":[{"owner":{"account_id":957028,"reputation":15133,"user_id":982149,"accept_rate":100,"display_name":"Fildor"},"score":1,"creation_date":1503578400,"post_id":45861824,"comment_id":78681865,"body_markdown":"Have you tried reading until newLine before giving the fileReader to the parser?","body":"Have you tried reading until newLine before giving the fileReader to the parser?"}],"answers":[{"tags":[],"owner":{"account_id":7373320,"reputation":17364,"user_id":5612858,"display_name":"Arnaud"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1503578489,"creation_date":1503578489,"answer_id":45861940,"question_id":45861824,"body_markdown":"\r\nYou may want to read the first line, before passing the reader to the `CSVParser` :\r\n\r\n    static void processFile(final File file) {\r\n        FileReader filereader = new FileReader(file);\r\n        BufferedReader bufferedReader = new BufferedReader(filereader);\r\n        bufferedReader.readLine();// try-catch omitted\r\n        final CSVFormat format = CSVFormat.DEFAULT.withDelimiter(&#39;;&#39;);\r\n        CSVParser parser = new CSVParser(bufferedReader, format);\r\n        final List&lt;CSVRecord&gt; records = parser.getRecords();\r\n        //stuff\r\n    }","title":"How can I skip the first line of a csv in Java?","body":"<p>You may want to read the first line, before passing the reader to the <code>CSVParser</code> :</p>\n\n<pre><code>static void processFile(final File file) {\n    FileReader filereader = new FileReader(file);\n    BufferedReader bufferedReader = new BufferedReader(filereader);\n    bufferedReader.readLine();// try-catch omitted\n    final CSVFormat format = CSVFormat.DEFAULT.withDelimiter(';');\n    CSVParser parser = new CSVParser(bufferedReader, format);\n    final List&lt;CSVRecord&gt; records = parser.getRecords();\n    //stuff\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5644665,"reputation":35951,"user_id":4467208,"accept_rate":51,"display_name":"Murat Karag&#246;z"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1503579154,"creation_date":1503578529,"answer_id":45861956,"question_id":45861824,"body_markdown":"You could consume the first line and then pass it to the CSVParser. Other than that there is a method [#withIgnoreEmptyLines](https://commons.apache.org/proper/commons-csv/apidocs/org/apache/commons/csv/CSVFormat.html#withIgnoreEmptyLines-boolean-) which might solve the issue.","title":"How can I skip the first line of a csv in Java?","body":"<p>You could consume the first line and then pass it to the CSVParser. Other than that there is a method <a href=\"https://commons.apache.org/proper/commons-csv/apidocs/org/apache/commons/csv/CSVFormat.html#withIgnoreEmptyLines-boolean-\" rel=\"nofollow noreferrer\">#withIgnoreEmptyLines</a> which might solve the issue.</p>\n"},{"tags":[],"owner":{"account_id":323466,"reputation":14771,"user_id":643500,"display_name":"Sully"},"down_vote_count":1,"up_vote_count":32,"is_accepted":false,"score":31,"last_activity_date":1660626544,"creation_date":1534255754,"answer_id":51843471,"question_id":45861824,"body_markdown":"The correct way to skip the first line if it is a header is by using a different `CSVFormat`\r\n\r\n    CSVFormat format = CSVFormat.DEFAULT.withDelimiter(&#39;;&#39;).withFirstRecordAsHeader();\r\n\r\n**Update: June 30 2022**\r\n\r\nFor 1.9+, use\r\n\r\n    CSVFormat.DEFAULT.builder()                                                                  \r\n        .setDelimiter(&#39;;&#39;)\r\n        .setHeader()\r\n        .setSkipHeaderRecord(true)  // skip header\r\n        .build();","title":"How can I skip the first line of a csv in Java?","body":"<p>The correct way to skip the first line if it is a header is by using a different <code>CSVFormat</code></p>\n<pre><code>CSVFormat format = CSVFormat.DEFAULT.withDelimiter(';').withFirstRecordAsHeader();\n</code></pre>\n<p><strong>Update: June 30 2022</strong></p>\n<p>For 1.9+, use</p>\n<pre><code>CSVFormat.DEFAULT.builder()                                                                  \n    .setDelimiter(';')\n    .setHeader()\n    .setSkipHeaderRecord(true)  // skip header\n    .build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2043107,"reputation":111,"user_id":1823828,"display_name":"Musab Qamri"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1536931241,"creation_date":1535624032,"answer_id":52094514,"question_id":45861824,"body_markdown":"You can filter it using Java Streams:\r\n\r\n    parser.getRecords().stream()\r\n         .filter(record -&gt; record.getRecordNumber() != 1) \r\n         .collect(Collectors.toList());\r\n","title":"How can I skip the first line of a csv in Java?","body":"<p>You can filter it using Java Streams:</p>\n\n<pre><code>parser.getRecords().stream()\n     .filter(record -&gt; record.getRecordNumber() != 1) \n     .collect(Collectors.toList());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5649194,"reputation":86,"user_id":4470400,"display_name":"Frank Why"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1563865142,"creation_date":1563865142,"answer_id":57158354,"question_id":45861824,"body_markdown":"You can skip the first record using stream:\r\n\r\n    List&lt;CSVRecord&gt; noHeadersLine = records.stream.skip(1).collect(toList());","title":"How can I skip the first line of a csv in Java?","body":"<p>You can skip the first record using stream:</p>\n\n<pre><code>List&lt;CSVRecord&gt; noHeadersLine = records.stream.skip(1).collect(toList());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1974565,"reputation":529,"user_id":1772653,"display_name":"Markus Lenger"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1631268592,"creation_date":1631268592,"answer_id":69130644,"question_id":45861824,"body_markdown":"In version 1.9.0 of org.apache.commons:commons-csv use:\r\n\r\n    val format = CSVFormat.Builder.create(CSVFormat.DEFAULT)\r\n            .setHeader()\r\n            .setSkipHeaderRecord(true)\r\n            .build()\r\n\r\n    val parser = CSVParser.parse(reader, format)","title":"How can I skip the first line of a csv in Java?","body":"<p>In version 1.9.0 of org.apache.commons:commons-csv use:</p>\n<pre><code>val format = CSVFormat.Builder.create(CSVFormat.DEFAULT)\n        .setHeader()\n        .setSkipHeaderRecord(true)\n        .build()\n\nval parser = CSVParser.parse(reader, format)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6222965,"reputation":25,"user_id":4842096,"display_name":"Matt Minton"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1648678850,"creation_date":1648678850,"answer_id":71684776,"question_id":45861824,"body_markdown":"I am assuming your file format looks something like:\r\n\r\n    &lt;garbage line here&gt;\r\n    &lt;header data&gt;\r\n    &lt;record data starts here&gt;\r\n\r\nFor version 1.9.0, use, as given above, but with one addition:\r\n\r\n    Reader in = new FileReader(fileName);\r\n    BufferedReader bufferedReader = new BufferedReader(in);\r\n    System.out.println(bufferedReader.readLine());\r\n    CSVFormat format = CSVFormat.Builder.create(CSVFormat.DEFAULT)\r\n                .setHeader()\r\n                .setSkipHeaderRecord(true)\r\n                .build();\r\n    CSVParser parser = CSVParser.parse(bufferedReader, format);\r\n    for (CSVRecord record : parser.getRecords()) {\r\n        &lt;do something&gt;\r\n    }\r\n\r\nIf you don&#39;t skip that first line somehow, you will throw an IllegalArgumentException.\r\n","title":"How can I skip the first line of a csv in Java?","body":"<p>I am assuming your file format looks something like:</p>\n<pre><code>&lt;garbage line here&gt;\n&lt;header data&gt;\n&lt;record data starts here&gt;\n</code></pre>\n<p>For version 1.9.0, use, as given above, but with one addition:</p>\n<pre><code>Reader in = new FileReader(fileName);\nBufferedReader bufferedReader = new BufferedReader(in);\nSystem.out.println(bufferedReader.readLine());\nCSVFormat format = CSVFormat.Builder.create(CSVFormat.DEFAULT)\n            .setHeader()\n            .setSkipHeaderRecord(true)\n            .build();\nCSVParser parser = CSVParser.parse(bufferedReader, format);\nfor (CSVRecord record : parser.getRecords()) {\n    &lt;do something&gt;\n}\n</code></pre>\n<p>If you don't skip that first line somehow, you will throw an IllegalArgumentException.</p>\n"},{"tags":[],"owner":{"account_id":1901517,"reputation":70,"user_id":1717289,"display_name":"fdm"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660304544,"creation_date":1660304544,"answer_id":73333608,"question_id":45861824,"body_markdown":"the .setHeader() method must be call for the .setSkipHeaderRecord(true)  to take effect. \r\n```\r\nCSVFormat.DEFAULT.builder()                                                                  \r\n    .setDelimiter(&#39;;&#39;)\r\n    .setHeader()    \r\n    .setSkipHeaderRecord(true)  // skip header\r\n    .build();\r\n```","title":"How can I skip the first line of a csv in Java?","body":"<p>the .setHeader() method must be call for the .setSkipHeaderRecord(true)  to take effect.</p>\n<pre><code>CSVFormat.DEFAULT.builder()                                                                  \n    .setDelimiter(';')\n    .setHeader()    \n    .setSkipHeaderRecord(true)  // skip header\n    .build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20375424,"reputation":517,"user_id":14946729,"display_name":"grigouille"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681112598,"creation_date":1681112598,"answer_id":75975216,"question_id":45861824,"body_markdown":"If your first record doesn&#39;t contain CR LF characters, you can use the &quot;readLine&quot; method. Otherwise you have to read twice.\r\n\r\nFirst get the headers :\r\n\r\n    CSVFormat format;\r\n    List&lt;String&gt; headers = null;\r\n    try(Reader reader = getReader()) {\r\n      Iterator&lt;CSVRecord&gt; iter = format.parse(reader).iterator();\r\n      if(iter.hasNext()) iter.next();\r\n      if(iter.hasNext()) {\r\n        headers = iter.next().toList();\r\n      }\r\n    }\r\n\r\nThen read again :\r\n\r\n    try(Reader reader = getReader()) {\r\n      format = format.builder().setHeader(headers.toArray(new String[0])).build();\r\n      Iterator&lt;CSVRecord&gt; iter = format.parse(reader).iterator();\r\n      if(iter.hasNext()) iter.next();\r\n      if(iter.hasNext()) iter.next();\r\n      while(iter.hasNext()) {\r\n        CSVRecord record = iter.next();\r\n        //do stuff\r\n      }\r\n    }\r\n","title":"How can I skip the first line of a csv in Java?","body":"<p>If your first record doesn't contain CR LF characters, you can use the &quot;readLine&quot; method. Otherwise you have to read twice.</p>\n<p>First get the headers :</p>\n<pre><code>CSVFormat format;\nList&lt;String&gt; headers = null;\ntry(Reader reader = getReader()) {\n  Iterator&lt;CSVRecord&gt; iter = format.parse(reader).iterator();\n  if(iter.hasNext()) iter.next();\n  if(iter.hasNext()) {\n    headers = iter.next().toList();\n  }\n}\n</code></pre>\n<p>Then read again :</p>\n<pre><code>try(Reader reader = getReader()) {\n  format = format.builder().setHeader(headers.toArray(new String[0])).build();\n  Iterator&lt;CSVRecord&gt; iter = format.parse(reader).iterator();\n  if(iter.hasNext()) iter.next();\n  if(iter.hasNext()) iter.next();\n  while(iter.hasNext()) {\n    CSVRecord record = iter.next();\n    //do stuff\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":10422949,"reputation":603,"user_id":7685112,"accept_rate":100,"display_name":"Medusa"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22656,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":45861940,"answer_count":9,"score":16,"last_activity_date":1681112598,"creation_date":1503578133,"question_id":45861824,"body_markdown":"I want to skip the first line and use the second as header.\r\n\r\nI am using classes from apache commons csv to process a CSV file.\r\n\r\nThe header of the CSV file is in the second row, not the first (which contains coordinates). \r\n\r\nMy code looks like this: \r\n    \r\n    static void processFile(final File file) {\r\n        FileReader filereader = new FileReader(file);\r\n    \tfinal CSVFormat format = CSVFormat.DEFAULT.withDelimiter(&#39;;&#39;);\r\n        CSVParser parser = new CSVParser(filereader, format);\r\n        final List&lt;CSVRecord&gt; records = parser.getRecords();\r\n        //stuff\r\n    }\r\n\r\nI naively thought,\r\n\r\n    CSVFormat format = CSVFormat.DEFAULT.withFirstRecordAsHeader().withDelimiter(;)\r\n\r\nwould solve the problem, as it&#39;s different from withFirstRowAsHeader and I thought it would detect that the first row doesn&#39;t contain any semicolons and is not a record. It doesn&#39;t. I tried to skip the first line (that CSVFormat seems to think is the header) with\r\n\r\n    CSVFormat format = CSVFormat.DEFAULT.withSkipHeaderRecord().withFirstRecordAsHeader().withDelimiter(;);\r\n\r\nbut that also doesn&#39;t work. What can I do?  What&#39;s the difference between withFirstRowAsHeader and withFirstRecordAsHeader?","title":"How can I skip the first line of a csv in Java?","body":"<p>I want to skip the first line and use the second as header.</p>\n\n<p>I am using classes from apache commons csv to process a CSV file.</p>\n\n<p>The header of the CSV file is in the second row, not the first (which contains coordinates). </p>\n\n<p>My code looks like this: </p>\n\n<pre><code>static void processFile(final File file) {\n    FileReader filereader = new FileReader(file);\n    final CSVFormat format = CSVFormat.DEFAULT.withDelimiter(';');\n    CSVParser parser = new CSVParser(filereader, format);\n    final List&lt;CSVRecord&gt; records = parser.getRecords();\n    //stuff\n}\n</code></pre>\n\n<p>I naively thought,</p>\n\n<pre><code>CSVFormat format = CSVFormat.DEFAULT.withFirstRecordAsHeader().withDelimiter(;)\n</code></pre>\n\n<p>would solve the problem, as it's different from withFirstRowAsHeader and I thought it would detect that the first row doesn't contain any semicolons and is not a record. It doesn't. I tried to skip the first line (that CSVFormat seems to think is the header) with</p>\n\n<pre><code>CSVFormat format = CSVFormat.DEFAULT.withSkipHeaderRecord().withFirstRecordAsHeader().withDelimiter(;);\n</code></pre>\n\n<p>but that also doesn't work. What can I do?  What's the difference between withFirstRowAsHeader and withFirstRecordAsHeader?</p>\n"},{"tags":["java","spring","grpc","channel","grpc-java"],"comments":[{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1681117997,"post_id":75975183,"comment_id":134000798,"body_markdown":"Are you trying to set a timeout per request, or per attempt?","body":"Are you trying to set a timeout per request, or per attempt?"},{"owner":{"account_id":8389289,"reputation":723,"user_id":6298537,"display_name":"yashjain12yj"},"score":0,"creation_date":1681118567,"post_id":75975183,"comment_id":134000900,"body_markdown":"@LouisWasserman I want to set timeout per attempt","body":"@LouisWasserman I want to set timeout per attempt"},{"owner":{"account_id":5967476,"reputation":24635,"user_id":4690866,"display_name":"Eric Anderson"},"score":0,"creation_date":1681150130,"post_id":75975183,"comment_id":134006885,"body_markdown":"Per-attempt timeouts are not supported. They might be part of a future effort to add hedging xds support (due to how xds structures hedging, they are related).","body":"Per-attempt timeouts are not supported. They might be part of a future effort to add hedging xds support (due to how xds structures hedging, they are related)."}],"owner":{"account_id":8389289,"reputation":723,"user_id":6298537,"display_name":"yashjain12yj"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":188,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1681112311,"creation_date":1681112311,"question_id":75975183,"body_markdown":"I&#39;m creating a Java GRPC client. Here I&#39;m using a managed channel to create a channel and further passing that channel to create a blocking stub.\r\n\r\n\r\n```\r\nManagedChannelBuilder.forAddress(this.getServiceHost(), this.getServicePort())\r\n    .usePlaintext()\r\n    .keepAliveWithoutCalls(this.isKeepAliveWithoutCall())\r\n    .keepAliveTime(this.getKeepAliveTime(), TimeUnit.MILLISECONDS)\r\n    .idleTimeout(this.getIdleTimeoutInMilliseconds(), TimeUnit.MILLISECONDS)\r\n    .keepAliveTimeout(this.getKeepAliveTimeoutInMilliseconds(), TimeUnit.MILLISECONDS)\r\n    .defaultServiceConfig(this.getRetryConfig())\r\n    .enableRetry()\r\n    .build();\r\n```\r\n\r\nWhile doing retries, if I have given `maxAttempts` as 3, I want to set a timeout for each of the attempts.\r\n\r\nIn which parameter should I set that value?","title":"How to give request timeout per request in Java Grpc","body":"<p>I'm creating a Java GRPC client. Here I'm using a managed channel to create a channel and further passing that channel to create a blocking stub.</p>\n<pre><code>ManagedChannelBuilder.forAddress(this.getServiceHost(), this.getServicePort())\n    .usePlaintext()\n    .keepAliveWithoutCalls(this.isKeepAliveWithoutCall())\n    .keepAliveTime(this.getKeepAliveTime(), TimeUnit.MILLISECONDS)\n    .idleTimeout(this.getIdleTimeoutInMilliseconds(), TimeUnit.MILLISECONDS)\n    .keepAliveTimeout(this.getKeepAliveTimeoutInMilliseconds(), TimeUnit.MILLISECONDS)\n    .defaultServiceConfig(this.getRetryConfig())\n    .enableRetry()\n    .build();\n</code></pre>\n<p>While doing retries, if I have given <code>maxAttempts</code> as 3, I want to set a timeout for each of the attempts.</p>\n<p>In which parameter should I set that value?</p>\n"},{"tags":["java","list","jmeter","beanshell"],"answers":[{"tags":[],"owner":{"account_id":3460456,"reputation":162728,"user_id":2897748,"display_name":"Dmitri T"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681110349,"creation_date":1681110349,"answer_id":75974979,"question_id":75969128,"body_markdown":" 1. You&#39;re trying to pass a [String][1] to the [ArrayList.addAll()][2] function, it won&#39;t work as the function expects a [Collection][3].\r\n 2. [Since JMeter 3.1 it&#39;s recommended to use JSR223 Test Elements and Groovy language for scripting][4] so consider migrating\r\n\r\n 3. The code you wrote doesn&#39;t compile so I fail to see how did you get this output\r\n\r\nIf you have these `carID_1=[307,308,304]` stored as Strings you could do something like:\r\n\r\n\tvars.put(&#39;carID_1&#39;, &#39;[307,308,304]&#39;)\r\n\tvars.put(&#39;carID_2&#39;, &#39;[305]&#39;)\r\n\tvars.put(&#39;carID_3&#39;, &#39;[306]&#39;)\r\n\tvars.put(&quot;carID_matchNr&quot;, &quot;3&quot;)\r\n\t\r\n\tList&lt;Integer&gt; allCarID = new ArrayList&lt;Integer&gt;();\r\n\t\r\n\t1.upto((vars.get(&#39;carID_matchNr&#39;) as int), {\r\n\t    def carIDs = new groovy.json.JsonSlurper().parseText(vars.get(&#39;carID_&#39; + it))\r\n\t    allCarID.addAll(carIDs)\r\n\t})\r\n\t\r\n\tlog.info(&#39;All Car: &#39; + allCarID)\r\n    \r\n[![enter image description here][5]][5]\r\n\r\nMore information on Groovy scripting in JMeter: [Apache Groovy: What Is Groovy Used For?][6]\r\n\r\n\r\n\r\n\r\n    \r\n\r\n \r\n\r\n\r\n\r\n \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/lang/String.html\r\n  [2]: https://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#addAll(java.util.Collection)\r\n  [3]: https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html\r\n  [4]: https://jmeter.apache.org/usermanual/best-practices.html#bsh_scripting\r\n  [5]: https://i.stack.imgur.com/qQJpU.png\r\n  [6]: https://www.blazemeter.com/blog/apache-groovy","title":"Can&#39;t merge a list using addAll method in Jmeter&#39;s BeanShell","body":"<ol>\n<li><p>You're trying to pass a <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html\" rel=\"nofollow noreferrer\">String</a> to the <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#addAll(java.util.Collection)\" rel=\"nofollow noreferrer\">ArrayList.addAll()</a> function, it won't work as the function expects a <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html\" rel=\"nofollow noreferrer\">Collection</a>.</p>\n</li>\n<li><p><a href=\"https://jmeter.apache.org/usermanual/best-practices.html#bsh_scripting\" rel=\"nofollow noreferrer\">Since JMeter 3.1 it's recommended to use JSR223 Test Elements and Groovy language for scripting</a> so consider migrating</p>\n</li>\n<li><p>The code you wrote doesn't compile so I fail to see how did you get this output</p>\n</li>\n</ol>\n<p>If you have these <code>carID_1=[307,308,304]</code> stored as Strings you could do something like:</p>\n<pre><code>vars.put('carID_1', '[307,308,304]')\nvars.put('carID_2', '[305]')\nvars.put('carID_3', '[306]')\nvars.put(&quot;carID_matchNr&quot;, &quot;3&quot;)\n\nList&lt;Integer&gt; allCarID = new ArrayList&lt;Integer&gt;();\n\n1.upto((vars.get('carID_matchNr') as int), {\n    def carIDs = new groovy.json.JsonSlurper().parseText(vars.get('carID_' + it))\n    allCarID.addAll(carIDs)\n})\n\nlog.info('All Car: ' + allCarID)\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/qQJpU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qQJpU.png\" alt=\"enter image description here\" /></a></p>\n<p>More information on Groovy scripting in JMeter: <a href=\"https://www.blazemeter.com/blog/apache-groovy\" rel=\"nofollow noreferrer\">Apache Groovy: What Is Groovy Used For?</a></p>\n"},{"tags":[],"owner":{"account_id":10263942,"reputation":5676,"user_id":7574461,"display_name":"lucas-nguyen-17"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681110803,"creation_date":1681110803,"answer_id":75975020,"question_id":75969128,"body_markdown":"I think the problem might come from `vars.get(&quot;carID_&quot;+i)`, it will return String instead of List. Therefore, use `vars.getObject(&quot;carID_&quot;+i)` and `flatten()` of groovy methods will help you.\r\n\r\n1. Use JSR223\r\n2. Choose language: groovy\r\n3. Sample code as below:\r\n\r\n```groovy\r\nvars.putObject(&quot;carID_1&quot;, [307,308,304])\r\nvars.putObject(&quot;carID_2&quot;, [305])\r\nvars.putObject(&quot;carID_3&quot;, [306])\r\n\r\ndef allCarID = []\r\n\r\nfor (int i = 1; i &lt;= 3; i++){\r\n    def x = vars.getObject(&quot;carID_&quot;+i)\r\n    allCarID.add(x)\r\n}\r\n\r\nallCarID = allCarID.flatten()\r\n\r\nlog.info(&quot;All Car: &quot; + allCarID)\r\n```\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/XAMl6.png","title":"Can&#39;t merge a list using addAll method in Jmeter&#39;s BeanShell","body":"<p>I think the problem might come from <code>vars.get(&quot;carID_&quot;+i)</code>, it will return String instead of List. Therefore, use <code>vars.getObject(&quot;carID_&quot;+i)</code> and <code>flatten()</code> of groovy methods will help you.</p>\n<ol>\n<li>Use JSR223</li>\n<li>Choose language: groovy</li>\n<li>Sample code as below:</li>\n</ol>\n<pre><code>vars.putObject(&quot;carID_1&quot;, [307,308,304])\nvars.putObject(&quot;carID_2&quot;, [305])\nvars.putObject(&quot;carID_3&quot;, [306])\n\ndef allCarID = []\n\nfor (int i = 1; i &lt;= 3; i++){\n    def x = vars.getObject(&quot;carID_&quot;+i)\n    allCarID.add(x)\n}\n\nallCarID = allCarID.flatten()\n\nlog.info(&quot;All Car: &quot; + allCarID)\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/XAMl6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XAMl6.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":3364245,"reputation":5,"user_id":7373607,"display_name":"ilf"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75974979,"answer_count":2,"score":0,"last_activity_date":1681110803,"creation_date":1681022515,"question_id":75969128,"body_markdown":"Trying to merge a list using addAll method in Jmeter&#39;s BeanShell, but the BeanShellInterpreter said the method not found.\r\n\r\nI tried to merge 2 lists using the tutorial from [here](https://www.digitalocean.com/community/tutorials/merge-two-lists-in-java).\r\n\r\n# The list that I want to merge, looks like this:\r\n\r\n1. carID_1=\\[307,308,304\\]\r\n2. carID_2=\\[305\\]\r\n3. carID_3=\\[306\\]\r\n\r\n# And here&#39;s the code I wrote:\r\n\r\n```java\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nList&lt;Integer&gt; allCarID = new ArrayList&lt;Integer&gt;();\r\nnumOfCarID = vars.get(&quot;carID_matchNr&quot;); //contains the number of list used for looping\r\nint numOfCarID = Integer.parseInt(numOfCarID);\r\n\r\nfor (int i = 1; i &lt;= numOfCarID; i++){\r\n\tx = vars.get(&quot;carID_&quot;+i);\r\n\tallCarID.addAll(x);\r\n}\r\n\r\nlog.info(&quot;All Car: &quot; + allCarID);\r\n```\r\n\r\nWhen I try to run the code, it gives me an error said that `Encountered &quot;=&quot; at line 4, column 25.`. After some research, I try to change the code to `List allCarID = new ArrayList();` and code successfully reached the addAll method.\r\n\r\nIt show an error like this:\r\n`Error in method invocation: Method addAll( java.lang.String ) not found in class&#39;java.util.ArrayList&#39;`.\r\n\r\nTry to change `addAll`to &#39;add&#39;, the code executed successfully and didn&#39;t show an error, but the result I wanted was different.\r\n\r\nWhat I want is a list `[307,308,304,305,306]`, but I got a `[[307,308,304], [305], [306]]` instead.  \r\n  \r\nAny kind of help is very helpful, thank you in advance.","title":"Can&#39;t merge a list using addAll method in Jmeter&#39;s BeanShell","body":"<p>Trying to merge a list using addAll method in Jmeter's BeanShell, but the BeanShellInterpreter said the method not found.</p>\n<p>I tried to merge 2 lists using the tutorial from <a href=\"https://www.digitalocean.com/community/tutorials/merge-two-lists-in-java\" rel=\"nofollow noreferrer\">here</a>.</p>\n<h1>The list that I want to merge, looks like this:</h1>\n<ol>\n<li>carID_1=[307,308,304]</li>\n<li>carID_2=[305]</li>\n<li>carID_3=[306]</li>\n</ol>\n<h1>And here's the code I wrote:</h1>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.ArrayList;\nimport java.util.List;\n\nList&lt;Integer&gt; allCarID = new ArrayList&lt;Integer&gt;();\nnumOfCarID = vars.get(&quot;carID_matchNr&quot;); //contains the number of list used for looping\nint numOfCarID = Integer.parseInt(numOfCarID);\n\nfor (int i = 1; i &lt;= numOfCarID; i++){\n    x = vars.get(&quot;carID_&quot;+i);\n    allCarID.addAll(x);\n}\n\nlog.info(&quot;All Car: &quot; + allCarID);\n</code></pre>\n<p>When I try to run the code, it gives me an error said that <code>Encountered &quot;=&quot; at line 4, column 25.</code>. After some research, I try to change the code to <code>List allCarID = new ArrayList();</code> and code successfully reached the addAll method.</p>\n<p>It show an error like this:\n<code>Error in method invocation: Method addAll( java.lang.String ) not found in class'java.util.ArrayList'</code>.</p>\n<p>Try to change <code>addAll</code>to 'add', the code executed successfully and didn't show an error, but the result I wanted was different.</p>\n<p>What I want is a list <code>[307,308,304,305,306]</code>, but I got a <code>[[307,308,304], [305], [306]]</code> instead.</p>\n<p>Any kind of help is very helpful, thank you in advance.</p>\n"},{"tags":["java","android","reactjs","react-native","kotlin"],"owner":{"account_id":6586032,"reputation":1672,"user_id":5088774,"accept_rate":6,"display_name":"DIGITAL JEDI"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681110753,"creation_date":1681110753,"question_id":75975014,"body_markdown":"I want to integrate my existing Android and ios projects into react native. So I create a new react native project using expo bare flow. I have followed all the steps mentioned in the official React native document: https://reactnative.dev/docs/integration-with-existing-apps?language=kotlin\r\n\r\nThis is my MainActivity code, which just navigates to RNModuleActivity\r\n\r\n    class MainActivity : AppCompatActivity() {\r\n        override fun onCreate(savedInstanceState: Bundle?) {\r\n            super.onCreate(savedInstanceState)\r\n            setContentView(R.layout.activity_main)\r\n            val btnGoRNScreen = findViewById&lt;Button&gt;(R.id.button)\r\n            btnGoRNScreen.setOnClickListener {\r\n                \r\n                val intent = Intent(this@MainActivity, RNModuleActivity::class.java)\r\n                intent.putExtra(&quot;message_from_native&quot;, &quot;yes&quot;)\r\n                startActivity(intent)\r\n            }\r\n        }\r\n    }\r\n\r\nMy RNModuleActivity code:\r\n\r\n    class RNModuleActivity : Activity(), DefaultHardwareBackBtnHandler {\r\n        private lateinit var reactRootView: ReactRootView\r\n        private lateinit var reactInstanceManager: ReactInstanceManager\r\n        override fun onCreate(savedInstanceState: Bundle?) {\r\n            super.onCreate(savedInstanceState)\r\n            SoLoader.init(this, false)\r\n            reactRootView = ReactRootView(this)\r\n            val packages: List&lt;ReactPackage&gt; = PackageList(application).packages\r\n            // Packages that cannot be autolinked yet can be added manually here, for example:\r\n            // packages.add(MyReactNativePackage())\r\n            // Remember to include them in `settings.gradle` and `app/build.gradle` too.\r\n            reactInstanceManager = ReactInstanceManager.builder()\r\n                .setApplication(application)\r\n                .setCurrentActivity(this)\r\n                .setBundleAssetName(&quot;index.android.bundle&quot;)\r\n                .setJSMainModulePath(&quot;index&quot;)\r\n                .addPackages(packages)\r\n                .setUseDeveloperSupport(BuildConfig.DEBUG)\r\n                .setInitialLifecycleState(LifecycleState.RESUMED)\r\n                .build()\r\n            \r\n            // the string in AppRegistry.registerComponent() in index.js\r\n            reactRootView?.startReactApplication(reactInstanceManager, &quot;testapp&quot;, null)\r\n            setContentView(reactRootView)\r\n        }\r\n    \r\n        override fun invokeDefaultOnBackPressed() {\r\n            super.onBackPressed()\r\n        }\r\n    \r\n        override fun onPause() {\r\n            super.onPause()\r\n            reactInstanceManager.onHostPause(this)\r\n        }\r\n    \r\n        override fun onResume() {\r\n            super.onResume()\r\n            reactInstanceManager.onHostResume(this, this)\r\n        }\r\n    \r\n        override fun onDestroy() {\r\n            super.onDestroy()\r\n            reactInstanceManager.onHostDestroy(this)\r\n            reactRootView.unmountReactApplication()\r\n        }\r\n    \r\n        override fun onBackPressed() {\r\n            reactInstanceManager.onBackPressed()\r\n            super.onBackPressed()\r\n        }\r\n    \r\n        override fun onKeyUp(keyCode: Int, event: KeyEvent?): Boolean {\r\n            if (keyCode == KeyEvent.KEYCODE_MENU &amp;&amp; reactInstanceManager != null) {\r\n                reactInstanceManager.showDevOptionsDialog()\r\n                return true\r\n            }\r\n            return super.onKeyUp(keyCode, event)\r\n        }\r\n    }\r\n\r\nI have set the default activity to MainActivity in my manifest file. But when I click on the button to navigate to RNModuleActivity it returns this error\r\n\r\n    java.lang.NoClassDefFoundError: com.facebook.react.jscexecutor.JSCExecutor\r\n                                                                                                        \tat com.facebook.react.jscexecutor.JSCExecutor.loadLibrary(JSCExecutor.java:24)\r\n                                                                                                        \tat com.facebook.react.ReactInstanceManagerBuilder.getDefaultJSExecutorFactory(ReactInstanceManagerBuilder.java:363)\r\n                                                                                                        \tat com.facebook.react.ReactInstanceManagerBuilder.build(ReactInstanceManagerBuilder.java:316)\r\n                                                                                                        \tat com.krytron.RNModuleActivity.onCreate","title":"Integrate existing Anroid App into React Native Project","body":"<p>I want to integrate my existing Android and ios projects into react native. So I create a new react native project using expo bare flow. I have followed all the steps mentioned in the official React native document: <a href=\"https://reactnative.dev/docs/integration-with-existing-apps?language=kotlin\" rel=\"nofollow noreferrer\">https://reactnative.dev/docs/integration-with-existing-apps?language=kotlin</a></p>\n<p>This is my MainActivity code, which just navigates to RNModuleActivity</p>\n<pre><code>class MainActivity : AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        val btnGoRNScreen = findViewById&lt;Button&gt;(R.id.button)\n        btnGoRNScreen.setOnClickListener {\n            \n            val intent = Intent(this@MainActivity, RNModuleActivity::class.java)\n            intent.putExtra(&quot;message_from_native&quot;, &quot;yes&quot;)\n            startActivity(intent)\n        }\n    }\n}\n</code></pre>\n<p>My RNModuleActivity code:</p>\n<pre><code>class RNModuleActivity : Activity(), DefaultHardwareBackBtnHandler {\n    private lateinit var reactRootView: ReactRootView\n    private lateinit var reactInstanceManager: ReactInstanceManager\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        SoLoader.init(this, false)\n        reactRootView = ReactRootView(this)\n        val packages: List&lt;ReactPackage&gt; = PackageList(application).packages\n        // Packages that cannot be autolinked yet can be added manually here, for example:\n        // packages.add(MyReactNativePackage())\n        // Remember to include them in `settings.gradle` and `app/build.gradle` too.\n        reactInstanceManager = ReactInstanceManager.builder()\n            .setApplication(application)\n            .setCurrentActivity(this)\n            .setBundleAssetName(&quot;index.android.bundle&quot;)\n            .setJSMainModulePath(&quot;index&quot;)\n            .addPackages(packages)\n            .setUseDeveloperSupport(BuildConfig.DEBUG)\n            .setInitialLifecycleState(LifecycleState.RESUMED)\n            .build()\n        \n        // the string in AppRegistry.registerComponent() in index.js\n        reactRootView?.startReactApplication(reactInstanceManager, &quot;testapp&quot;, null)\n        setContentView(reactRootView)\n    }\n\n    override fun invokeDefaultOnBackPressed() {\n        super.onBackPressed()\n    }\n\n    override fun onPause() {\n        super.onPause()\n        reactInstanceManager.onHostPause(this)\n    }\n\n    override fun onResume() {\n        super.onResume()\n        reactInstanceManager.onHostResume(this, this)\n    }\n\n    override fun onDestroy() {\n        super.onDestroy()\n        reactInstanceManager.onHostDestroy(this)\n        reactRootView.unmountReactApplication()\n    }\n\n    override fun onBackPressed() {\n        reactInstanceManager.onBackPressed()\n        super.onBackPressed()\n    }\n\n    override fun onKeyUp(keyCode: Int, event: KeyEvent?): Boolean {\n        if (keyCode == KeyEvent.KEYCODE_MENU &amp;&amp; reactInstanceManager != null) {\n            reactInstanceManager.showDevOptionsDialog()\n            return true\n        }\n        return super.onKeyUp(keyCode, event)\n    }\n}\n</code></pre>\n<p>I have set the default activity to MainActivity in my manifest file. But when I click on the button to navigate to RNModuleActivity it returns this error</p>\n<pre><code>java.lang.NoClassDefFoundError: com.facebook.react.jscexecutor.JSCExecutor\n                                                                                                        at com.facebook.react.jscexecutor.JSCExecutor.loadLibrary(JSCExecutor.java:24)\n                                                                                                        at com.facebook.react.ReactInstanceManagerBuilder.getDefaultJSExecutorFactory(ReactInstanceManagerBuilder.java:363)\n                                                                                                        at com.facebook.react.ReactInstanceManagerBuilder.build(ReactInstanceManagerBuilder.java:316)\n                                                                                                        at com.krytron.RNModuleActivity.onCreate\n</code></pre>\n"},{"tags":["java","multithreading","java-me","synchronized","volatile"],"answers":[{"tags":[],"owner":{"account_id":5530,"reputation":63236,"user_id":8946,"accept_rate":84,"display_name":"Lawrence Dol"},"down_vote_count":2,"up_vote_count":469,"is_accepted":true,"score":467,"last_activity_date":1667442130,"creation_date":1282204113,"answer_id":3519736,"question_id":3519664,"body_markdown":"It&#39;s important to understand that there are *two* aspects to thread safety.\r\n\r\n1. execution control, and\r\n2. memory visibility  \r\n\r\nThe first has to do with controlling when code executes (including the order in which instructions are executed) and whether it can execute concurrently, and the second to do with when the effects in memory of what has been done are visible to other threads.  Because each CPU has several levels of cache between it and main memory, threads running on different CPUs or cores can see &quot;memory&quot; differently at any given moment in time because threads are permitted to obtain and work on private copies of main memory.\r\n\r\nUsing `synchronized` prevents any other thread from obtaining the monitor (or lock) ***for the same object***, thereby preventing all code blocks protected by synchronization ***on the same object*** from executing concurrently.  Synchronization *also* creates a &quot;happens-before&quot; memory barrier, causing a memory visibility constraint such that anything done up to the point some thread releases a lock *appears* to another thread subsequently acquiring ***the same lock*** to have happened before it acquired the lock. In practical terms, on current hardware, this typically causes flushing of the CPU caches when a monitor is acquired and writes to main memory when it is released, both of which are (relatively) expensive.\r\n\r\nUsing `volatile`, on the other hand, forces all accesses (read or write) to the volatile variable to occur to main memory, effectively keeping the volatile variable out of CPU caches. This can be useful for some actions where it is simply required that visibility of the variable be correct and order of accesses is not important. Using `volatile` also changes treatment of `long` and `double` to require accesses to them to be atomic; on some (older) hardware this might require locks, though not on modern 64 bit hardware. Under the new (JSR-133) memory model for Java 5+, the semantics of volatile have been strengthened to be almost as strong as synchronized with respect to memory visibility and instruction ordering (see http://www.cs.umd.edu/users/pugh/java/memoryModel/jsr-133-faq.html#volatile).  For the purposes of visibility, each access to a volatile field acts like half a synchronization.\r\n\r\n&gt; Under the new memory model, it is still true that volatile variables cannot be reordered with each other. The difference is that it is now no longer so easy to reorder normal field accesses around them. Writing to a volatile field has the same memory effect as a monitor release, and reading from a volatile field has the same memory effect as a monitor acquire. In effect, because the new memory model places stricter constraints on reordering of volatile field accesses with other field accesses, volatile or not, anything that was visible to thread `A` when it writes to volatile field `f` becomes visible to thread `B` when it reads `f`.\r\n&gt;\r\n&gt; -- [JSR 133 (Java Memory Model) FAQ](http://www.cs.umd.edu/~pugh/java/memoryModel/jsr-133-faq.html)\r\n\r\nSo, now both forms of memory barrier (under the current JMM) cause an instruction re-ordering barrier which prevents the compiler or run-time from re-ordering instructions across the barrier. In the old JMM, volatile did not prevent re-ordering. This can be important, because apart from memory barriers the only limitation imposed is that,  *for any particular thread*, the net effect of the code is the same as it would be if the instructions were executed in precisely the order in which they appear in the source.\r\n\r\nOne use of volatile is for a shared but immutable object is recreated on the fly, with many other threads taking a reference to the object at a particular point in their execution cycle.  One needs the other threads to begin using the recreated object once it is published, but does not need the additional overhead of full synchronization and it&#39;s attendant contention and cache flushing.\r\n\r\n    // Declaration\r\n    public class SharedLocation {\r\n        static public volatile SomeObject someObject=new SomeObject(); // default object\r\n        }\r\n    \r\n    // Publishing code\r\n    SharedLocation.someObject=new SomeObject(...); // new object is published\r\n\r\n    // Using code\r\n    // Note: do not simply use SharedLocation.someObject.xxx(), since although\r\n    //       someObject will be internally consistent for xxx(), a subsequent \r\n    //       call to yyy() might be inconsistent with xxx() if the object was \r\n    //       replaced in between calls.\r\n    private String getError() {\r\n        SomeObject myCopy=SharedLocation.someObject; // gets current copy\r\n        ...\r\n        int cod=myCopy.getErrorCode();\r\n        String txt=myCopy.getErrorText();\r\n        return (cod+&quot; - &quot;+txt);\r\n        }\r\n    // And so on, with myCopy always in a consistent state within and across calls\r\n    // Eventually we will return to the code that gets the current SomeObject.\r\n\r\nSpeaking to your read-update-write question, specifically.  Consider the following unsafe code:\r\n\r\n    public void updateCounter() {\r\n        if(counter==1000) { counter=0; }\r\n        else              { counter++; }\r\n        }\r\n\r\nNow, with the updateCounter() method unsynchronized, two threads may enter it at the same time.  Among the many permutations of what could happen, one is that thread-1 does the test for counter==1000 and finds it true and is then suspended. Then thread-2 does the same test and also sees it true and is suspended. Then thread-1 resumes and sets counter to 0. Then thread-2 resumes and again sets counter to 0 because it missed the update from thread-1.  This can also happen even if thread switching does not occur as I have described, but simply because two different cached copies of counter were present in two different CPU cores and the threads each ran on a separate core. For that matter, one thread could have counter at one value and the other could have counter at some entirely different value just because of caching.\r\n\r\nWhat&#39;s important in this example is that the variable *counter* was read from main memory into cache, updated in cache and only written back to main memory at some indeterminate point later when a memory barrier occurred or when the cache memory was needed for something else. Making the counter `volatile` is insufficient for thread-safety of this code, because the test for the maximum and the assignments are discrete operations, including the increment which is a set of non-atomic `read+increment+write` machine instructions, something like: \r\n\r\n    MOV EAX,counter\r\n    INC EAX\r\n    MOV counter,EAX\r\n\r\nVolatile variables are useful only when ***all*** operations performed on them are &quot;atomic&quot;, such as my example where a reference to a fully formed object is only read or written (and, indeed, typically it&#39;s only written from a single point). Another example would be a volatile array reference backing a copy-on-write list, provided the array was only read by first taking a local copy of the reference to it.\r\n","title":"Difference between volatile and synchronized in Java","body":"<p>It's important to understand that there are <em>two</em> aspects to thread safety.</p>\n<ol>\n<li>execution control, and</li>\n<li>memory visibility</li>\n</ol>\n<p>The first has to do with controlling when code executes (including the order in which instructions are executed) and whether it can execute concurrently, and the second to do with when the effects in memory of what has been done are visible to other threads.  Because each CPU has several levels of cache between it and main memory, threads running on different CPUs or cores can see &quot;memory&quot; differently at any given moment in time because threads are permitted to obtain and work on private copies of main memory.</p>\n<p>Using <code>synchronized</code> prevents any other thread from obtaining the monitor (or lock) <em><strong>for the same object</strong></em>, thereby preventing all code blocks protected by synchronization <em><strong>on the same object</strong></em> from executing concurrently.  Synchronization <em>also</em> creates a &quot;happens-before&quot; memory barrier, causing a memory visibility constraint such that anything done up to the point some thread releases a lock <em>appears</em> to another thread subsequently acquiring <em><strong>the same lock</strong></em> to have happened before it acquired the lock. In practical terms, on current hardware, this typically causes flushing of the CPU caches when a monitor is acquired and writes to main memory when it is released, both of which are (relatively) expensive.</p>\n<p>Using <code>volatile</code>, on the other hand, forces all accesses (read or write) to the volatile variable to occur to main memory, effectively keeping the volatile variable out of CPU caches. This can be useful for some actions where it is simply required that visibility of the variable be correct and order of accesses is not important. Using <code>volatile</code> also changes treatment of <code>long</code> and <code>double</code> to require accesses to them to be atomic; on some (older) hardware this might require locks, though not on modern 64 bit hardware. Under the new (JSR-133) memory model for Java 5+, the semantics of volatile have been strengthened to be almost as strong as synchronized with respect to memory visibility and instruction ordering (see <a href=\"http://www.cs.umd.edu/users/pugh/java/memoryModel/jsr-133-faq.html#volatile\" rel=\"noreferrer\">http://www.cs.umd.edu/users/pugh/java/memoryModel/jsr-133-faq.html#volatile</a>).  For the purposes of visibility, each access to a volatile field acts like half a synchronization.</p>\n<blockquote>\n<p>Under the new memory model, it is still true that volatile variables cannot be reordered with each other. The difference is that it is now no longer so easy to reorder normal field accesses around them. Writing to a volatile field has the same memory effect as a monitor release, and reading from a volatile field has the same memory effect as a monitor acquire. In effect, because the new memory model places stricter constraints on reordering of volatile field accesses with other field accesses, volatile or not, anything that was visible to thread <code>A</code> when it writes to volatile field <code>f</code> becomes visible to thread <code>B</code> when it reads <code>f</code>.</p>\n<p>-- <a href=\"http://www.cs.umd.edu/%7Epugh/java/memoryModel/jsr-133-faq.html\" rel=\"noreferrer\">JSR 133 (Java Memory Model) FAQ</a></p>\n</blockquote>\n<p>So, now both forms of memory barrier (under the current JMM) cause an instruction re-ordering barrier which prevents the compiler or run-time from re-ordering instructions across the barrier. In the old JMM, volatile did not prevent re-ordering. This can be important, because apart from memory barriers the only limitation imposed is that,  <em>for any particular thread</em>, the net effect of the code is the same as it would be if the instructions were executed in precisely the order in which they appear in the source.</p>\n<p>One use of volatile is for a shared but immutable object is recreated on the fly, with many other threads taking a reference to the object at a particular point in their execution cycle.  One needs the other threads to begin using the recreated object once it is published, but does not need the additional overhead of full synchronization and it's attendant contention and cache flushing.</p>\n<pre><code>// Declaration\npublic class SharedLocation {\n    static public volatile SomeObject someObject=new SomeObject(); // default object\n    }\n\n// Publishing code\nSharedLocation.someObject=new SomeObject(...); // new object is published\n\n// Using code\n// Note: do not simply use SharedLocation.someObject.xxx(), since although\n//       someObject will be internally consistent for xxx(), a subsequent \n//       call to yyy() might be inconsistent with xxx() if the object was \n//       replaced in between calls.\nprivate String getError() {\n    SomeObject myCopy=SharedLocation.someObject; // gets current copy\n    ...\n    int cod=myCopy.getErrorCode();\n    String txt=myCopy.getErrorText();\n    return (cod+&quot; - &quot;+txt);\n    }\n// And so on, with myCopy always in a consistent state within and across calls\n// Eventually we will return to the code that gets the current SomeObject.\n</code></pre>\n<p>Speaking to your read-update-write question, specifically.  Consider the following unsafe code:</p>\n<pre><code>public void updateCounter() {\n    if(counter==1000) { counter=0; }\n    else              { counter++; }\n    }\n</code></pre>\n<p>Now, with the updateCounter() method unsynchronized, two threads may enter it at the same time.  Among the many permutations of what could happen, one is that thread-1 does the test for counter==1000 and finds it true and is then suspended. Then thread-2 does the same test and also sees it true and is suspended. Then thread-1 resumes and sets counter to 0. Then thread-2 resumes and again sets counter to 0 because it missed the update from thread-1.  This can also happen even if thread switching does not occur as I have described, but simply because two different cached copies of counter were present in two different CPU cores and the threads each ran on a separate core. For that matter, one thread could have counter at one value and the other could have counter at some entirely different value just because of caching.</p>\n<p>What's important in this example is that the variable <em>counter</em> was read from main memory into cache, updated in cache and only written back to main memory at some indeterminate point later when a memory barrier occurred or when the cache memory was needed for something else. Making the counter <code>volatile</code> is insufficient for thread-safety of this code, because the test for the maximum and the assignments are discrete operations, including the increment which is a set of non-atomic <code>read+increment+write</code> machine instructions, something like:</p>\n<pre><code>MOV EAX,counter\nINC EAX\nMOV counter,EAX\n</code></pre>\n<p>Volatile variables are useful only when <em><strong>all</strong></em> operations performed on them are &quot;atomic&quot;, such as my example where a reference to a fully formed object is only read or written (and, indeed, typically it's only written from a single point). Another example would be a volatile array reference backing a copy-on-write list, provided the array was only read by first taking a local copy of the reference to it.</p>\n"},{"tags":[],"owner":{"account_id":184855,"reputation":10523,"user_id":421162,"display_name":"Kerem Baydoan"},"down_vote_count":11,"up_vote_count":125,"is_accepted":false,"score":114,"last_activity_date":1470476829,"creation_date":1282204255,"answer_id":3519746,"question_id":3519664,"body_markdown":"&gt; **volatile** is a **field modifier**, while **synchronized** modifies **code blocks** and **methods**. So we can specify three variations of a simple accessor using those two keywords:\r\n&gt;\r\n&gt;\r\n&gt;         int i1;\r\n&gt;         int geti1() {return i1;}\r\n&gt;\r\n&gt;         volatile int i2;\r\n&gt;         int geti2() {return i2;}\r\n&gt;\r\n&gt;         int i3;\r\n&gt;         synchronized int geti3() {return i3;}\r\n&gt;\r\n&gt; `geti1()` accesses the value currently stored in `i1` in the current thread.\r\nThreads can have local copies of variables, and the data does not have to be the same as the data held in other threads.In particular, another thread may have updated `i1` in it&#39;s thread, but the value in the current thread could be different from that updated value. In fact Java has the idea of a &quot;main&quot; memory, and this is the memory that holds the current &quot;correct&quot; value for variables. Threads can have their own copy of data for variables, and the thread copy can be different from the &quot;main&quot; memory. So in fact, it is possible for the &quot;main&quot; memory to have a value of **1** for `i1`, for thread1 to have a value of **2** for `i1` and for **thread2** to have a value of **3** for `i1` if **thread1** and **thread2** have both updated i1 but those updated value has not yet been propagated to &quot;main&quot; memory or other threads.\r\n\r\n&gt; On the other hand, `geti2()` effectively accesses the value of `i2` from &quot;main&quot; memory. A volatile variable is not allowed to have a local copy of a variable that is different from the value currently held in &quot;main&quot; memory. Effectively, a variable declared volatile must have it&#39;s data synchronized across all threads, so that whenever you access or update the variable in any thread, all other threads immediately see the same value. Generally volatile variables have a higher access and update overhead than &quot;plain&quot; variables. Generally threads are allowed to have their own copy of data is for better efficiency.\r\n\r\n&gt; There are two differences between volitile and synchronized.\r\n\r\n&gt; Firstly synchronized obtains and releases locks on monitors which can force only one thread at a time to execute a code block. That&#39;s the fairly well known aspect to synchronized. But synchronized also synchronizes memory. In fact synchronized synchronizes the whole of thread memory with &quot;main&quot; memory. So executing `geti3()` does the following:\r\n\r\n&gt;   1. The thread acquires the lock on the monitor for object this .\r\n&gt;   2. The thread memory flushes all its variables, i.e. it has all of its variables effectively read from &quot;main&quot; memory .\r\n&gt;   3. The code block is executed (in this case setting the return value to the current value of i3, which may have just been reset from &quot;main&quot; memory).\r\n&gt;   4. (Any changes to variables would normally now be written out to &quot;main&quot; memory, but for geti3() we have no changes.)\r\n&gt;   5. The thread releases the lock on the monitor for object this. \r\n\r\n&gt; So where volatile only synchronizes the value of one variable between thread memory and &quot;main&quot; memory, synchronized synchronizes the value of all variables between thread memory and &quot;main&quot; memory, and locks and releases a monitor to boot. Clearly synchronized is likely to have more overhead than volatile. \r\n\r\n\r\nhttp://javaexp.blogspot.com/2007/12/difference-between-volatile-and.html","title":"Difference between volatile and synchronized in Java","body":"<blockquote>\n  <p><strong>volatile</strong> is a <strong>field modifier</strong>, while <strong>synchronized</strong> modifies <strong>code blocks</strong> and <strong>methods</strong>. So we can specify three variations of a simple accessor using those two keywords:</p>\n\n<pre><code>    int i1;\n    int geti1() {return i1;}\n\n    volatile int i2;\n    int geti2() {return i2;}\n\n    int i3;\n    synchronized int geti3() {return i3;}\n</code></pre>\n  \n  <p><code>geti1()</code> accesses the value currently stored in <code>i1</code> in the current thread.\n  Threads can have local copies of variables, and the data does not have to be the same as the data held in other threads.In particular, another thread may have updated <code>i1</code> in it's thread, but the value in the current thread could be different from that updated value. In fact Java has the idea of a \"main\" memory, and this is the memory that holds the current \"correct\" value for variables. Threads can have their own copy of data for variables, and the thread copy can be different from the \"main\" memory. So in fact, it is possible for the \"main\" memory to have a value of <strong>1</strong> for <code>i1</code>, for thread1 to have a value of <strong>2</strong> for <code>i1</code> and for <strong>thread2</strong> to have a value of <strong>3</strong> for <code>i1</code> if <strong>thread1</strong> and <strong>thread2</strong> have both updated i1 but those updated value has not yet been propagated to \"main\" memory or other threads.</p>\n  \n  <p>On the other hand, <code>geti2()</code> effectively accesses the value of <code>i2</code> from \"main\" memory. A volatile variable is not allowed to have a local copy of a variable that is different from the value currently held in \"main\" memory. Effectively, a variable declared volatile must have it's data synchronized across all threads, so that whenever you access or update the variable in any thread, all other threads immediately see the same value. Generally volatile variables have a higher access and update overhead than \"plain\" variables. Generally threads are allowed to have their own copy of data is for better efficiency.</p>\n  \n  <p>There are two differences between volitile and synchronized.</p>\n  \n  <p>Firstly synchronized obtains and releases locks on monitors which can force only one thread at a time to execute a code block. That's the fairly well known aspect to synchronized. But synchronized also synchronizes memory. In fact synchronized synchronizes the whole of thread memory with \"main\" memory. So executing <code>geti3()</code> does the following:</p>\n  \n  <ol>\n  <li>The thread acquires the lock on the monitor for object this .</li>\n  <li>The thread memory flushes all its variables, i.e. it has all of its variables effectively read from \"main\" memory .</li>\n  <li>The code block is executed (in this case setting the return value to the current value of i3, which may have just been reset from \"main\" memory).</li>\n  <li>(Any changes to variables would normally now be written out to \"main\" memory, but for geti3() we have no changes.)</li>\n  <li>The thread releases the lock on the monitor for object this. </li>\n  </ol>\n  \n  <p>So where volatile only synchronizes the value of one variable between thread memory and \"main\" memory, synchronized synchronizes the value of all variables between thread memory and \"main\" memory, and locks and releases a monitor to boot. Clearly synchronized is likely to have more overhead than volatile. </p>\n</blockquote>\n\n<p><a href=\"http://javaexp.blogspot.com/2007/12/difference-between-volatile-and.html\" rel=\"noreferrer\">http://javaexp.blogspot.com/2007/12/difference-between-volatile-and.html</a></p>\n"},{"tags":[],"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1681110174,"creation_date":1450442588,"answer_id":34355995,"question_id":3519664,"body_markdown":"[synchronized][1]\r\n\r\nis keyword used to guard a method or code block.  By making method as synchronized , you achieve two things.\r\n\r\n\r\n &gt;1. Two executions of `synchronized` methods on the same object never run\r\n &gt;2. Change in the object state is visible to other threads\r\n\r\n`volatile` is variable access modifier which forces all threads to get latest value of the variable from main memory. All threads can access volatile variable value at same time with out any locks. \r\n\r\nA good example to use volatile variable : `Date` variable.\r\n\r\nAssume that you have made Date variable `volatile`. You don&#39;t need different threads showing different time for same variable. All the threads, which access this variable always get latest data from main memory so that all threads show real (actual) Date value. \r\n\r\nLawrence Dol cleary explained your `read-write-update query`. \r\n\r\nRegarding your other queries\r\n\r\n *When is it more suitable to declare variables volatile than access them through synchronized?* \r\n\r\nYou have to use `volatile` if you think all threads should get actual value of the variable in real time like Data example covered above.\r\n\r\n*Is it a good idea to use volatile for variables that depend on input?*\r\n\r\nAnswer will be same as in first query. \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html","title":"Difference between volatile and synchronized in Java","body":"<p><a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html\" rel=\"nofollow noreferrer\">synchronized</a></p>\n<p>is keyword used to guard a method or code block.  By making method as synchronized , you achieve two things.</p>\n<blockquote>\n<ol>\n<li>Two executions of <code>synchronized</code> methods on the same object never run</li>\n<li>Change in the object state is visible to other threads</li>\n</ol>\n</blockquote>\n<p><code>volatile</code> is variable access modifier which forces all threads to get latest value of the variable from main memory. All threads can access volatile variable value at same time with out any locks.</p>\n<p>A good example to use volatile variable : <code>Date</code> variable.</p>\n<p>Assume that you have made Date variable <code>volatile</code>. You don't need different threads showing different time for same variable. All the threads, which access this variable always get latest data from main memory so that all threads show real (actual) Date value.</p>\n<p>Lawrence Dol cleary explained your <code>read-write-update query</code>.</p>\n<p>Regarding your other queries</p>\n<p><em>When is it more suitable to declare variables volatile than access them through synchronized?</em></p>\n<p>You have to use <code>volatile</code> if you think all threads should get actual value of the variable in real time like Data example covered above.</p>\n<p><em>Is it a good idea to use volatile for variables that depend on input?</em></p>\n<p>Answer will be same as in first query.</p>\n"},{"tags":[],"owner":{"account_id":8344713,"reputation":5886,"user_id":6296435,"accept_rate":71,"display_name":"Maverick Meerkat"},"down_vote_count":0,"up_vote_count":62,"is_accepted":false,"score":62,"last_activity_date":1647225154,"creation_date":1549629804,"answer_id":54592753,"question_id":3519664,"body_markdown":"There are 3 main issues with multithreading:\r\n\r\n1) Race Conditions\r\n\r\n2) Caching / stale memory\r\n\r\n3) Compiler and CPU optimisations\r\n\r\n`volatile` can solve 2 &amp; 3, but can&#39;t solve 1. `synchronized`/explicit locks can solve 1, 2 &amp; 3.\r\n\r\n**Elaboration**:\r\n----------------\r\n\r\n1) Consider this thread unsafe code:\r\n\r\n`x++;` \r\n\r\nWhile it may look like one operation, it&#39;s actually 3: reading the current value of x from memory, adding 1 to it, and saving it back to memory. If few threads try to do it at the same time, the result of the operation is undefined. If `x` originally was 1, after 2 threads operating the code it may be 2 and it may be 3, depending on which thread completed which part of the operation before control was transferred to the other thread. This is a form of **race condition**. \r\n\r\nUsing `synchronized` on a block of code makes it **atomic** - meaning it make it as if the 3 operations happen at once, and there&#39;s no way for another thread to come in the middle and interfere. So if `x` was 1, and 2 threads try to preform `x++` we **know** in the end it will be equal to 3. So it solves the race condition problem. \r\n\r\n    synchronized (this) {\r\n       x++; // no problem now\r\n    }\r\n\r\nMarking `x` as `volatile` does not make `x++;` atomic, so it doesn&#39;t solve this problem.\r\n\r\n2) In addition, threads have their own context - i.e. they can cache values from main memory. That means that a few threads can have copies of a variable, but they operate on their working copy without sharing the new state of the variable among other threads. \r\n\r\nConsider that on one thread, `x = 10;`. And somewhat later, in another thread, `x = 20;`. The change in value of `x` might not appear in the first thread, because the other thread has saved the new value to its working memory, but hasn&#39;t copied it to the main memory. Or that it did copy it to the main memory, but the first thread hasn&#39;t updated its working copy. So if now the first thread checks `if (x == 20)` the answer will be `false`. \r\n\r\nMarking a variable as `volatile` basically tells all threads to do read and write operations on main memory only. `synchronized` tells every thread to go update their value from main memory when they enter the block, and flush the result back to main memory when they exit the block. \r\n\r\nNote that unlike data races, stale memory is not so easy to (re)produce, as flushes to main memory occur anyway. \r\n\r\n3) The complier and CPU can (without any form of synchronization between threads) treat all code as single threaded. Meaning it can look at some code, that is very meaningful in a multithreading aspect, and treat it as if its single threaded, where its not so meaningful. So it can look at a code and decide, in sake of optimisation, to reorder it, or even remove parts of it completely, if it doesnt know that this code is designed to work on multiple threads.  \r\n\r\nConsider the following code:\r\n\r\n    boolean b = false;\r\n    int x = 10;\r\n    \r\n    void threadA() {\r\n    \tx = 20;\r\n    \tb = true;\r\n    }\r\n    \r\n    void threadB() {\r\n    \tif (b) {\r\n    \t\tSystem.out.println(x);\r\n    \t}\r\n    }\r\n\r\n \r\nYou would think that threadB could only print 20 (or not print anything at all if threadB if-check is executed before setting `b` to true), as `b` is set to true only after `x` is set to 20, but the compiler/CPU might decide to reorder threadA, in that case threadB could also print 10. Marking `b` as `volatile` ensures that it wont be reordered (or discarded in certain cases). Which mean threadB could only print 20 (or nothing at all). Marking the methods as syncrhonized will achieve the same result. Also marking a variable as `volatile` only ensures that it wont get reordered, but everything before/after it can still be reordered, so synchronization can be more suited in some scenarios.\r\n\r\nNote that before Java 5 New Memory Model, volatile didnt solve this issue. \r\n\r\n","title":"Difference between volatile and synchronized in Java","body":"<p>There are 3 main issues with multithreading:</p>\n<ol>\n<li><p>Race Conditions</p>\n</li>\n<li><p>Caching / stale memory</p>\n</li>\n<li><p>Compiler and CPU optimisations</p>\n</li>\n</ol>\n<p><code>volatile</code> can solve 2 &amp; 3, but can't solve 1. <code>synchronized</code>/explicit locks can solve 1, 2 &amp; 3.</p>\n<h2><strong>Elaboration</strong>:</h2>\n<ol>\n<li>Consider this thread unsafe code:</li>\n</ol>\n<p><code>x++;</code></p>\n<p>While it may look like one operation, it's actually 3: reading the current value of x from memory, adding 1 to it, and saving it back to memory. If few threads try to do it at the same time, the result of the operation is undefined. If <code>x</code> originally was 1, after 2 threads operating the code it may be 2 and it may be 3, depending on which thread completed which part of the operation before control was transferred to the other thread. This is a form of <strong>race condition</strong>.</p>\n<p>Using <code>synchronized</code> on a block of code makes it <strong>atomic</strong> - meaning it make it as if the 3 operations happen at once, and there's no way for another thread to come in the middle and interfere. So if <code>x</code> was 1, and 2 threads try to preform <code>x++</code> we <strong>know</strong> in the end it will be equal to 3. So it solves the race condition problem.</p>\n<pre><code>synchronized (this) {\n   x++; // no problem now\n}\n</code></pre>\n<p>Marking <code>x</code> as <code>volatile</code> does not make <code>x++;</code> atomic, so it doesn't solve this problem.</p>\n<ol start=\"2\">\n<li>In addition, threads have their own context - i.e. they can cache values from main memory. That means that a few threads can have copies of a variable, but they operate on their working copy without sharing the new state of the variable among other threads.</li>\n</ol>\n<p>Consider that on one thread, <code>x = 10;</code>. And somewhat later, in another thread, <code>x = 20;</code>. The change in value of <code>x</code> might not appear in the first thread, because the other thread has saved the new value to its working memory, but hasn't copied it to the main memory. Or that it did copy it to the main memory, but the first thread hasn't updated its working copy. So if now the first thread checks <code>if (x == 20)</code> the answer will be <code>false</code>.</p>\n<p>Marking a variable as <code>volatile</code> basically tells all threads to do read and write operations on main memory only. <code>synchronized</code> tells every thread to go update their value from main memory when they enter the block, and flush the result back to main memory when they exit the block.</p>\n<p>Note that unlike data races, stale memory is not so easy to (re)produce, as flushes to main memory occur anyway.</p>\n<ol start=\"3\">\n<li>The complier and CPU can (without any form of synchronization between threads) treat all code as single threaded. Meaning it can look at some code, that is very meaningful in a multithreading aspect, and treat it as if its single threaded, where its not so meaningful. So it can look at a code and decide, in sake of optimisation, to reorder it, or even remove parts of it completely, if it doesnt know that this code is designed to work on multiple threads.</li>\n</ol>\n<p>Consider the following code:</p>\n<pre><code>boolean b = false;\nint x = 10;\n\nvoid threadA() {\n    x = 20;\n    b = true;\n}\n\nvoid threadB() {\n    if (b) {\n        System.out.println(x);\n    }\n}\n</code></pre>\n<p>You would think that threadB could only print 20 (or not print anything at all if threadB if-check is executed before setting <code>b</code> to true), as <code>b</code> is set to true only after <code>x</code> is set to 20, but the compiler/CPU might decide to reorder threadA, in that case threadB could also print 10. Marking <code>b</code> as <code>volatile</code> ensures that it wont be reordered (or discarded in certain cases). Which mean threadB could only print 20 (or nothing at all). Marking the methods as syncrhonized will achieve the same result. Also marking a variable as <code>volatile</code> only ensures that it wont get reordered, but everything before/after it can still be reordered, so synchronization can be more suited in some scenarios.</p>\n<p>Note that before Java 5 New Memory Model, volatile didnt solve this issue.</p>\n"}],"owner":{"account_id":141278,"reputation":12438,"user_id":348183,"accept_rate":97,"display_name":"Albus Dumbledore"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":134440,"favorite_count":0,"down_vote_count":1,"up_vote_count":307,"accepted_answer_id":3519736,"answer_count":4,"score":306,"last_activity_date":1681110174,"creation_date":1282203284,"question_id":3519664,"body_markdown":"I am wondering at the difference between declaring a variable as `volatile` and always accessing the variable in a `synchronized(this)` block in Java?\r\n\r\nAccording to this article http://www.javamex.com/tutorials/synchronization_volatile.shtml there is a lot to be said and there are many differences but also some similarities.\r\n\r\nI am particularly interested in this piece of info:\r\n\r\n&gt; ...\r\n&gt;\r\n- access to a volatile variable never has the potential to block: we&#39;re only ever doing a simple read or write, so unlike a synchronized block we will never hold on to any lock;\r\n- because accessing a volatile variable never holds a lock, it is not suitable for cases where we want to **read-update-write** as an atomic operation (unless we&#39;re prepared to &quot;miss an update&quot;);\r\n\r\nWhat do they mean by **read-update-write**? Isn&#39;t a write also an update or do they simply mean that the **update** is a write that depends on the read?\r\n\r\nMost of all, when is it more suitable to declare variables `volatile` rather than access them through a `synchronized` block? Is it a good idea to use `volatile` for variables that depend on input? For instance, there is a variable called `render` that is read through the rendering loop and set by a keypress event?","title":"Difference between volatile and synchronized in Java","body":"<p>I am wondering at the difference between declaring a variable as <code>volatile</code> and always accessing the variable in a <code>synchronized(this)</code> block in Java?</p>\n\n<p>According to this article <a href=\"http://www.javamex.com/tutorials/synchronization_volatile.shtml\" rel=\"noreferrer\">http://www.javamex.com/tutorials/synchronization_volatile.shtml</a> there is a lot to be said and there are many differences but also some similarities.</p>\n\n<p>I am particularly interested in this piece of info:</p>\n\n<blockquote>\n  <p>...</p>\n  \n  <ul>\n  <li>access to a volatile variable never has the potential to block: we're only ever doing a simple read or write, so unlike a synchronized block we will never hold on to any lock;</li>\n  <li>because accessing a volatile variable never holds a lock, it is not suitable for cases where we want to <strong>read-update-write</strong> as an atomic operation (unless we're prepared to \"miss an update\");</li>\n  </ul>\n</blockquote>\n\n<p>What do they mean by <strong>read-update-write</strong>? Isn't a write also an update or do they simply mean that the <strong>update</strong> is a write that depends on the read?</p>\n\n<p>Most of all, when is it more suitable to declare variables <code>volatile</code> rather than access them through a <code>synchronized</code> block? Is it a good idea to use <code>volatile</code> for variables that depend on input? For instance, there is a variable called <code>render</code> that is read through the rendering loop and set by a keypress event?</p>\n"},{"tags":["java","android","android-permissions"],"comments":[{"owner":{"account_id":10396927,"reputation":68267,"user_id":7666442,"display_name":"AskNilesh"},"score":1,"creation_date":1537508017,"post_id":52437112,"comment_id":91817330,"body_markdown":"https://developer.android.com/reference/android/content/Context.html#getExternalFilesDir(java.lang.String)","body":"<a href=\"https://developer.android.com/reference/android/content/Context.html#getExternalFilesDir(java.lang.String)\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/content/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":6657226,"reputation":16109,"user_id":5137352,"accept_rate":89,"display_name":"Nabin Bhandari"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1537508150,"creation_date":1537507809,"answer_id":52437155,"question_id":52437112,"body_markdown":"Although it returns path to external storage, you don&#39;t need permission to access directory returned by `getExternalFilesDir()`.\r\n\r\nIt is same as `getFilesDir()` but it is public to other apps as well.\r\n\r\nAlso note that if you write anything in that directory and clear app data or uninstall the app, everything will be deleted.\r\n\r\nFor more information, read the documentation at https://developer.android.com/reference/android/content/Context.html#getExternalFilesDir(java.lang.String)","title":"getExternalFilesDir permissions","body":"<p>Although it returns path to external storage, you don't need permission to access directory returned by <code>getExternalFilesDir()</code>.</p>\n\n<p>It is same as <code>getFilesDir()</code> but it is public to other apps as well.</p>\n\n<p>Also note that if you write anything in that directory and clear app data or uninstall the app, everything will be deleted.</p>\n\n<p>For more information, read the documentation at <a href=\"https://developer.android.com/reference/android/content/Context.html#getExternalFilesDir(java.lang.String)\" rel=\"noreferrer\">https://developer.android.com/reference/android/content/Context.html#getExternalFilesDir(java.lang.String)</a></p>\n"},{"tags":[],"owner":{"account_id":14279418,"reputation":215,"user_id":10314536,"display_name":"Archu Mohan"},"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1537507838,"creation_date":1537507838,"answer_id":52437162,"question_id":52437112,"body_markdown":"    String[] permissions = {Manifest.permission.WRITE_EXTERNAL_STORAGE};\r\n    requestPermissions(permissions, WRITE_REQUEST_CODE);\r\n\r\n use this code\r\n\r\n  \r\n\r\n    @Override\r\n    public void onRequestPermissionsResult(int requestCode, String permissions[], int[] \r\n    grantResults) {\r\n    switch (requestCode) {\r\n       case WRITE_REQUEST_CODE:\r\n         if(grantResults[0] == PackageManager.PERMISSION_GRANTED){\r\n           //Granted.\r\n\r\n\r\n         }\r\n       else{\r\n           //Denied.\r\n         }\r\n        break;\r\n    }\r\n    }","title":"getExternalFilesDir permissions","body":"<pre><code>String[] permissions = {Manifest.permission.WRITE_EXTERNAL_STORAGE};\nrequestPermissions(permissions, WRITE_REQUEST_CODE);\n</code></pre>\n\n<p>use this code</p>\n\n<pre><code>@Override\npublic void onRequestPermissionsResult(int requestCode, String permissions[], int[] \ngrantResults) {\nswitch (requestCode) {\n   case WRITE_REQUEST_CODE:\n     if(grantResults[0] == PackageManager.PERMISSION_GRANTED){\n       //Granted.\n\n\n     }\n   else{\n       //Denied.\n     }\n    break;\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7359103,"reputation":449,"user_id":5602887,"display_name":"Xt Z"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681110159,"creation_date":1681110159,"answer_id":75974959,"question_id":52437112,"body_markdown":"not need ask runtime permission, but if your app&#39;s minSdkVersion less then 19 and you need write to getExternalFilesDir() path , you need declare WRITE_EXTERNAL_STORAGE in your AndroidManifest.xml\r\n\r\ncheck this :https://developer.android.com/reference/android/Manifest.permission#WRITE_EXTERNAL_STORAGE","title":"getExternalFilesDir permissions","body":"<p>not need ask runtime permission, but if your app's minSdkVersion less then 19 and you need write to getExternalFilesDir() path , you need declare WRITE_EXTERNAL_STORAGE in your AndroidManifest.xml</p>\n<p>check this :<a href=\"https://developer.android.com/reference/android/Manifest.permission#WRITE_EXTERNAL_STORAGE\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/Manifest.permission#WRITE_EXTERNAL_STORAGE</a></p>\n"}],"owner":{"account_id":10875141,"reputation":2530,"user_id":8199772,"accept_rate":55,"display_name":"ClassA"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3616,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":52437155,"answer_count":3,"score":8,"last_activity_date":1681110159,"creation_date":1537507534,"question_id":52437112,"body_markdown":"My application is live on Play Store, I noticed that I was not asking permissions when calling:\r\n\r\n    File savedImagesDirectory = getBaseContext.getExternalFilesDir(&quot;SavedImages&quot;);\r\n    if(savedImagesDirectory != null) {\r\n        if (!savedImagesDirectory.exists()) {\r\n            if (savedImagesDirectory.mkdir()) ; //directory is created;\r\n        }\r\n    }\r\n\r\nStrange thing is, I&#39;m not getting any crashes when calling this without runtime permissions. I tested on my device running Nougat and the files are created and I experienced no crashes.\r\n\r\nI only have permissions in my Manifest, but I don&#39;t ask runtime permissions.\r\n\r\nI&#39;ve seen A LOT of answers on SO that say that runtime permissions should be asked when creating a folder/file in external file directory.\r\n\r\n\r\n----------\r\n\r\n\r\n**My question:**\r\n\r\nShould I ask runtime permissions when calling the above? If yes, why am I not experiencing any crashes? \r\n\r\nIt would also be helpful if someone can provide a link where I can read up about this.","title":"getExternalFilesDir permissions","body":"<p>My application is live on Play Store, I noticed that I was not asking permissions when calling:</p>\n\n<pre><code>File savedImagesDirectory = getBaseContext.getExternalFilesDir(\"SavedImages\");\nif(savedImagesDirectory != null) {\n    if (!savedImagesDirectory.exists()) {\n        if (savedImagesDirectory.mkdir()) ; //directory is created;\n    }\n}\n</code></pre>\n\n<p>Strange thing is, I'm not getting any crashes when calling this without runtime permissions. I tested on my device running Nougat and the files are created and I experienced no crashes.</p>\n\n<p>I only have permissions in my Manifest, but I don't ask runtime permissions.</p>\n\n<p>I've seen A LOT of answers on SO that say that runtime permissions should be asked when creating a folder/file in external file directory.</p>\n\n<hr>\n\n<p><strong>My question:</strong></p>\n\n<p>Should I ask runtime permissions when calling the above? If yes, why am I not experiencing any crashes? </p>\n\n<p>It would also be helpful if someone can provide a link where I can read up about this.</p>\n"},{"tags":["java","hadoop","mapreduce"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1681109016,"post_id":75974496,"comment_id":133999527,"body_markdown":"You seem to be missing your Driver class and sample of your input data. Refer [mcve]","body":"You seem to be missing your Driver class and sample of your input data. Refer <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"},{"owner":{"account_id":8324450,"reputation":17075,"user_id":6933993,"accept_rate":97,"display_name":"thebluephantom"},"score":0,"creation_date":1681123659,"post_id":75974496,"comment_id":134001738,"body_markdown":"May be move to Spark and make life easier.","body":"May be move to Spark and make life easier."}],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681110025,"creation_date":1681109207,"answer_id":75974861,"question_id":75974496,"body_markdown":"Reducers are distributed, so cannot be used to store state between each instance, such as a Map. More particularly, notice that `key` parameter is one instance - you get one Reducer class instance per unique key; not all keys are passed through that one instance function. \r\n\r\nYou can use Hadoop `DistributedCache` or `Counter` for maintaining some state across tasks, but you should already have all values from the same ID in a single `Iterable&lt;Text&gt;` object. E.g. all reviews (with star count) by-id. Therefore, filter by `value.getStars() == 5`. (Look into defining a Writable `Movie` class, rather than using `Text`), then define a simple counter, e.g.\r\n```\r\nint fiveStarCount = 0;\r\nfor (Text t : values) {\r\n  // todo: get stars\r\n  fiveStarCount += parseStars(t) == 5 ? 1 : 0;\r\n}\r\nif (fiveStarCount &gt;= 500) {\r\n  context.write(movieId, NullWritable.get());  // assuming you only care about the movie id\r\n}\r\n```\r\n\r\nThen, there is nothing to sort here... You need a second MapReduce job to read that output, then you write `(null,id)` tuples, then the reducer can sort the value by dumping all data into something like `TreeSet` object and writing back to the context. \r\n\r\n---\r\n\r\nIf you really need to filter, join, and sort, I&#39;d recommend Hive or Spark over pure Mapreduce","title":"Why is My MapReduce job Not Counting Correctly?","body":"<p>Reducers are distributed, so cannot be used to store state between each instance, such as a Map. More particularly, notice that <code>key</code> parameter is one instance - you get one Reducer class instance per unique key; not all keys are passed through that one instance function.</p>\n<p>You can use Hadoop <code>DistributedCache</code> or <code>Counter</code> for maintaining some state across tasks, but you should already have all values from the same ID in a single <code>Iterable&lt;Text&gt;</code> object. E.g. all reviews (with star count) by-id. Therefore, filter by <code>value.getStars() == 5</code>. (Look into defining a Writable <code>Movie</code> class, rather than using <code>Text</code>), then define a simple counter, e.g.</p>\n<pre><code>int fiveStarCount = 0;\nfor (Text t : values) {\n  // todo: get stars\n  fiveStarCount += parseStars(t) == 5 ? 1 : 0;\n}\nif (fiveStarCount &gt;= 500) {\n  context.write(movieId, NullWritable.get());  // assuming you only care about the movie id\n}\n</code></pre>\n<p>Then, there is nothing to sort here... You need a second MapReduce job to read that output, then you write <code>(null,id)</code> tuples, then the reducer can sort the value by dumping all data into something like <code>TreeSet</code> object and writing back to the context.</p>\n<hr />\n<p>If you really need to filter, join, and sort, I'd recommend Hive or Spark over pure Mapreduce</p>\n"}],"owner":{"account_id":21130232,"reputation":27,"user_id":15534758,"display_name":"wirly"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681110025,"creation_date":1681104651,"question_id":75974496,"body_markdown":"I am currently writing a MapReduce task to parse through a dataset and list movies that have 500+ 5-star ratings.\r\n\r\nTo do this, I already have a mapreduce jobs that filter action movies from a list of movies, and one that filters 5-star reviews for movies.  The inputs to this new job, and to each mapper, is a list of movieIDS.\r\n\r\nThe input to the first mapper is a list of MovieIDS that are applicable to be counted FOR.  And the input to the second mapper is a movieID that has gotten a single 5-star review.\r\n\r\nMy task is then to join these in the reducer, by counting the number of 5-star reviews a particular movie (key) has gotten, seeing if it has gotten a total of 500 reviews, and then seeing if that particular movie has been filtered in the list of applicable movies.\r\n\r\nMy problem, however, is that the HashMap data structure I&#39;m using to count the number of 5-star reviews for a particular movie ID is only ever initialized to one.\r\n\r\nHere is the code:\r\n\r\n    public class JoinRatings extends Configured implements Tool {\r\n\tpublic static class TokenizerMapperA extends Mapper&lt;Object, Text, Text, Text&gt; {\r\n\t\tprivate Text node1;\r\n\t\tprivate Text node2 = new Text(&quot;1&quot;);\r\n\r\n\t\t@Override\r\n\t\tprotected void map(Object key, Text value, Context context) throws IOException, InterruptedException {\r\n\t\t\t//Write movie ID and int writeable 1\r\n\t\t\tnode1 = new Text(value.toString());\r\n\t\t\tcontext.write(node1, node2);\r\n\t\t}\r\n\t}\r\n\tpublic static class TokenizerMapperB extends Mapper&lt;Object, Text, Text, Text&gt; {\r\n\t\tprivate Text node1;\r\n\t\tprivate Text node2 = new Text(&quot;2&quot;);\r\n\r\n\t\t@Override\r\n\t\tprotected void map(Object key, Text value, Context context) throws IOException, InterruptedException {\r\n\t\t\tnode1 = new Text(value.toString());\r\n\t\t\tcontext.write(node1, node2);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static class CountReducer extends Reducer&lt;Text, Text, Text, NullWritable&gt;{\r\n\t\tprivate Text node1;\r\n\t\tprivate Set&lt;String&gt; distinctNodes;\r\n\t\tMap&lt;String, Integer&gt; map;\r\n\t\tprivate final static IntWritable one = new IntWritable(1);\r\n\t\tprivate final static IntWritable two = new IntWritable(2);\r\n\r\n\t\t@Override\r\n\t\tprotected void setup(Context context) {\r\n\t\t\tdistinctNodes = new HashSet&lt;String&gt;(); \r\n\t\t\tmap = new HashMap&lt;String,Integer&gt;();\r\n\t\t }\r\n\r\n\t\t @Override\r\n\t\t protected void reduce(Text key, Iterable&lt;Text&gt; values, Context context) {\r\n\t\t\t//Add all action movie IDs to unique set distinctNodes\r\n\t\t\tString keyString = key.toString().strip();\r\n\t\t\tString valueString = &quot;NULL&quot;;\r\n\t\t\tint counter = 0\r\n\r\n\t\t\t\tfor (Text text : values) {\r\n\t\t\t\t\tString value = text.toString().strip();\r\n\r\n\t\t\t\t\t\t// try {\r\n\t\t\t\t\t\t// \tText testText = new Text(value);\r\n\t\t\t\t\t\t// \tcontext.write(testText, NullWritable.get());\r\n\t\t\t\t\t\t// } catch (IOException e) {\r\n\t\t\t\t\t\t// \te.printStackTrace();\r\n\t\t\t\t\t\t// } catch (InterruptedException e) {\r\n\t\t\t\t\t\t// \te.printStackTrace();\r\n\t\t\t\t\t\t// }\r\n\r\n\t\t\t\t\tif (value.equals(&quot;1&quot;)) {\r\n\t\t\t\t\t\tdistinctNodes.add(keyString);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (value.equals(&quot;2&quot;)) {\r\n\t\t\t\t\t\tif (map.containsKey(keyString)) {\r\n\t\t\t\t\t\t\tmap.put(keyString, map.get(keyString) + 1);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tmap.put(keyString, 1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\r\n\t\t }\r\n\r\n\t\t @Override\r\n\t\t protected void cleanup(Context context) throws IOException, InterruptedException {\r\n\r\n\t\t\tString numOfDistinctNodes = Integer.toString(distinctNodes.size());\r\n\t\t\tcontext.write(new Text(numOfDistinctNodes), NullWritable.get());\r\n\t\t\tString sizeOfMap = Integer.toString(map.size());\r\n\t\t\tcontext.write(new Text(sizeOfMap), NullWritable.get());\r\n\r\n\r\n\t\t\tfor(Map.Entry&lt;String, Integer&gt; mapElement : map.entrySet()) {\r\n\t\t\t\t\tString test = Integer.toString(mapElement.getValue());\r\n\t\t\t\t\tcontext.write(new Text(test), NullWritable.get());\r\n\t\t\t}\r\n\r\n\t\t\tfor (String s: distinct nodes) {\r\n\t\t\t\tif (map.containsKey(s)) {\r\n\t\t\t\t\tif (map.get(s) &gt;= 500) {\r\n\t\t\t\t\t\tnode1 = new Text(s);\r\n\t\t\t\t\t\tcontext.write(node1, NullWritable.get());\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//Order movieID by ascending\r\n\r\n\t\t\t//Write all movie IDs with 500+ 5-star reviews (to context)\r\n\t\t }\r\n\t}\r\n\r\nAs you can see I am using a Text value from the mappers to distinguish between which data-structure the reducer should be adding to.  This seems to work well for Text &quot;1&quot;, which is adding applicable movies the 5 star ratings can count towards to a HashSet, but my HashMap is not counting the number of 5 star reviews for a particular key/MovieID, only ever initializing values to 1.\r\n\r\nMy inclination is that I&#39;m using MapReduce incorrectly, and that the reducer is getting only a single input of {MovieID, 2}, instead of {MovieID, 2, 2, 2, 2}.  \r\n","title":"Why is My MapReduce job Not Counting Correctly?","body":"<p>I am currently writing a MapReduce task to parse through a dataset and list movies that have 500+ 5-star ratings.</p>\n<p>To do this, I already have a mapreduce jobs that filter action movies from a list of movies, and one that filters 5-star reviews for movies.  The inputs to this new job, and to each mapper, is a list of movieIDS.</p>\n<p>The input to the first mapper is a list of MovieIDS that are applicable to be counted FOR.  And the input to the second mapper is a movieID that has gotten a single 5-star review.</p>\n<p>My task is then to join these in the reducer, by counting the number of 5-star reviews a particular movie (key) has gotten, seeing if it has gotten a total of 500 reviews, and then seeing if that particular movie has been filtered in the list of applicable movies.</p>\n<p>My problem, however, is that the HashMap data structure I'm using to count the number of 5-star reviews for a particular movie ID is only ever initialized to one.</p>\n<p>Here is the code:</p>\n<pre><code>public class JoinRatings extends Configured implements Tool {\npublic static class TokenizerMapperA extends Mapper&lt;Object, Text, Text, Text&gt; {\n    private Text node1;\n    private Text node2 = new Text(&quot;1&quot;);\n\n    @Override\n    protected void map(Object key, Text value, Context context) throws IOException, InterruptedException {\n        //Write movie ID and int writeable 1\n        node1 = new Text(value.toString());\n        context.write(node1, node2);\n    }\n}\npublic static class TokenizerMapperB extends Mapper&lt;Object, Text, Text, Text&gt; {\n    private Text node1;\n    private Text node2 = new Text(&quot;2&quot;);\n\n    @Override\n    protected void map(Object key, Text value, Context context) throws IOException, InterruptedException {\n        node1 = new Text(value.toString());\n        context.write(node1, node2);\n    }\n}\n\npublic static class CountReducer extends Reducer&lt;Text, Text, Text, NullWritable&gt;{\n    private Text node1;\n    private Set&lt;String&gt; distinctNodes;\n    Map&lt;String, Integer&gt; map;\n    private final static IntWritable one = new IntWritable(1);\n    private final static IntWritable two = new IntWritable(2);\n\n    @Override\n    protected void setup(Context context) {\n        distinctNodes = new HashSet&lt;String&gt;(); \n        map = new HashMap&lt;String,Integer&gt;();\n     }\n\n     @Override\n     protected void reduce(Text key, Iterable&lt;Text&gt; values, Context context) {\n        //Add all action movie IDs to unique set distinctNodes\n        String keyString = key.toString().strip();\n        String valueString = &quot;NULL&quot;;\n        int counter = 0\n\n            for (Text text : values) {\n                String value = text.toString().strip();\n\n                    // try {\n                    //  Text testText = new Text(value);\n                    //  context.write(testText, NullWritable.get());\n                    // } catch (IOException e) {\n                    //  e.printStackTrace();\n                    // } catch (InterruptedException e) {\n                    //  e.printStackTrace();\n                    // }\n\n                if (value.equals(&quot;1&quot;)) {\n                    distinctNodes.add(keyString);\n                }\n                else if (value.equals(&quot;2&quot;)) {\n                    if (map.containsKey(keyString)) {\n                        map.put(keyString, map.get(keyString) + 1);\n                    } else {\n                        map.put(keyString, 1);\n                    }\n                }\n            }\n\n\n    \n     }\n\n     @Override\n     protected void cleanup(Context context) throws IOException, InterruptedException {\n\n        String numOfDistinctNodes = Integer.toString(distinctNodes.size());\n        context.write(new Text(numOfDistinctNodes), NullWritable.get());\n        String sizeOfMap = Integer.toString(map.size());\n        context.write(new Text(sizeOfMap), NullWritable.get());\n\n\n        for(Map.Entry&lt;String, Integer&gt; mapElement : map.entrySet()) {\n                String test = Integer.toString(mapElement.getValue());\n                context.write(new Text(test), NullWritable.get());\n        }\n\n        for (String s: distinct nodes) {\n            if (map.containsKey(s)) {\n                if (map.get(s) &gt;= 500) {\n                    node1 = new Text(s);\n                    context.write(node1, NullWritable.get());\n                }\n            }\n        }\n        \n        //Order movieID by ascending\n\n        //Write all movie IDs with 500+ 5-star reviews (to context)\n     }\n}\n</code></pre>\n<p>As you can see I am using a Text value from the mappers to distinguish between which data-structure the reducer should be adding to.  This seems to work well for Text &quot;1&quot;, which is adding applicable movies the 5 star ratings can count towards to a HashSet, but my HashMap is not counting the number of 5 star reviews for a particular key/MovieID, only ever initializing values to 1.</p>\n<p>My inclination is that I'm using MapReduce incorrectly, and that the reducer is getting only a single input of {MovieID, 2}, instead of {MovieID, 2, 2, 2, 2}.</p>\n"},{"tags":["java","spring-boot","oauth-2.0"],"owner":{"account_id":25757934,"reputation":23,"user_id":19509326,"display_name":"AndyTingWeiYang"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681109639,"creation_date":1681109170,"question_id":75974857,"body_markdown":"Couldn&#39;t get the tokenValue from Google login\r\n\r\nI&#39;m trying to use oAuth login through Google and successfully get the OAuth2AuthenticationToken from Google. Please see below picture.\r\n\r\nI would like to save the token value into Redis to keep the login status in my website. However, I couldn&#39;t find the method to retrieve the tokenValue in the Principal &gt; idToken. Is there any method to get it?\r\n\r\n\r\n[![OAuth2AuthenticationToken from Google](https://i.stack.imgur.com/yt1BL.png)](https://i.stack.imgur.com/yt1BL.png)\r\n\r\n\r\nController\r\n\r\n`@RestController\r\n@RequestMapping(&quot;/&quot;)\r\npublic class LoginController {\r\n\r\n    @GetMapping\r\n    public Map&lt;String, Object&gt; login(OAuth2AuthenticationToken token){\r\n        return token.getPrincipal().getAttributes();\r\n    }\r\n\r\n}`","title":"How to get oAuth2 tokenValue from Google login","body":"<p>Couldn't get the tokenValue from Google login</p>\n<p>I'm trying to use oAuth login through Google and successfully get the OAuth2AuthenticationToken from Google. Please see below picture.</p>\n<p>I would like to save the token value into Redis to keep the login status in my website. However, I couldn't find the method to retrieve the tokenValue in the Principal &gt; idToken. Is there any method to get it?</p>\n<p><a href=\"https://i.stack.imgur.com/yt1BL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yt1BL.png\" alt=\"OAuth2AuthenticationToken from Google\" /></a></p>\n<p>Controller</p>\n<p>`@RestController\n@RequestMapping(&quot;/&quot;)\npublic class LoginController {</p>\n<pre><code>@GetMapping\npublic Map&lt;String, Object&gt; login(OAuth2AuthenticationToken token){\n    return token.getPrincipal().getAttributes();\n}\n</code></pre>\n<p>}`</p>\n"},{"tags":["java","garbage-collection"],"comments":[{"owner":{"account_id":6104455,"reputation":4456,"user_id":4762502,"accept_rate":73,"display_name":"Gaurav Jeswani"},"score":0,"creation_date":1681108931,"post_id":75974815,"comment_id":133999512,"body_markdown":"GC is totally dependent on your JVM. You have no control on this.","body":"GC is totally dependent on your JVM. You have no control on this."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1681109332,"post_id":75974815,"comment_id":133999570,"body_markdown":"Maybe there is another memory leak.  Maybe your application is simply generating excessive garbage.  (And when you say *&quot;... way more than ...&quot;*, can you be more precise?)","body":"Maybe there is another memory leak.  Maybe your application is simply generating excessive garbage.  (And when you say <i>&quot;... way more than ...&quot;</i>, can you be more precise?)"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1681109421,"post_id":75974815,"comment_id":133999587,"body_markdown":"What exactly do you mean by &quot;going wrong&quot;? What behaviour do you expect?","body":"What exactly do you mean by &quot;going wrong&quot;? What behaviour do you expect?"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1681109486,"post_id":75974815,"comment_id":133999596,"body_markdown":"Don&#39;t link to information in a git repo like that.  As soon as you delete the repo containing the logs, your question makes no sense.  Information that is relevant to the question should be &gt;in the question&lt;.","body":"Don&#39;t link to information in a git repo like that.  As soon as you delete the repo containing the logs, your question makes no sense.  Information that is relevant to the question should be &gt;in the question&lt;."},{"owner":{"account_id":9132976,"reputation":69,"user_id":6793827,"display_name":"P K"},"score":0,"creation_date":1681109873,"post_id":75974815,"comment_id":133999634,"body_markdown":"Added more information to the question @StephenC","body":"Added more information to the question @StephenC"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1681109919,"post_id":75974815,"comment_id":133999642,"body_markdown":"After briefly scanning the logs, I don&#39;t think there is anything &quot;wrong&quot; here.  This *appears to be* a simple case of an application generating a lot of garbage.  That leads to lots of young gen GCs and occasional old gen GCs to deal with tenured objects.  If you want to fix this:  1) look for more storage leaks, 2) look for ways (i.e. application algorithm changes) to reduce the rate of garbage generation and 3) look for ways to reduce the total amount / number of reachable (non-leaking) objects.","body":"After briefly scanning the logs, I don&#39;t think there is anything &quot;wrong&quot; here.  This <i>appears to be</i> a simple case of an application generating a lot of garbage.  That leads to lots of young gen GCs and occasional old gen GCs to deal with tenured objects.  If you want to fix this:  1) look for more storage leaks, 2) look for ways (i.e. application algorithm changes) to reduce the rate of garbage generation and 3) look for ways to reduce the total amount / number of reachable (non-leaking) objects."},{"owner":{"account_id":9132976,"reputation":69,"user_id":6793827,"display_name":"P K"},"score":0,"creation_date":1681110601,"post_id":75974815,"comment_id":133999736,"body_markdown":"@StephenC the amount of garbage per second after the restart is not more than before. If you look closely in the GC log before restart the young gen sizes are bigger before a minor GC whereas they are happening at smaller sizes and taking more time later. This is my worry. I worked on this application for the past year trying to reduce the garbage and this is the best till date. Unfortunately it is turning out to be too expensive in terms of garbage and resource consumption","body":"@StephenC the amount of garbage per second after the restart is not more than before. If you look closely in the GC log before restart the young gen sizes are bigger before a minor GC whereas they are happening at smaller sizes and taking more time later. This is my worry. I worked on this application for the past year trying to reduce the garbage and this is the best till date. Unfortunately it is turning out to be too expensive in terms of garbage and resource consumption"},{"owner":{"account_id":9132976,"reputation":69,"user_id":6793827,"display_name":"P K"},"score":0,"creation_date":1681110914,"post_id":75974815,"comment_id":133999776,"body_markdown":"@StephenC my worry is that the GCs will start happening all the time after some time rendering the app unresponsive. This is what happens when there is a mem leak but a mem leak makes the old gen grow which I dont see here.","body":"@StephenC my worry is that the GCs will start happening all the time after some time rendering the app unresponsive. This is what happens when there is a mem leak but a mem leak makes the old gen grow which I dont see here."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1681110969,"post_id":75974815,"comment_id":133999781,"body_markdown":"There is not enough information on what precisely you have changed.  For instance, you must have done something to cause 1) the new space to be smaller and 2) more objects to be retained in the old space.  As to your broader problem, we can&#39;t advise you how to tune an application based on zero information about the application, what it does, and how it is implemented.  My advice would be to hire a consultant ...","body":"There is not enough information on what precisely you have changed.  For instance, you must have done something to cause 1) the new space to be smaller and 2) more objects to be retained in the old space.  As to your broader problem, we can&#39;t advise you how to tune an application based on zero information about the application, what it does, and how it is implemented.  My advice would be to hire a consultant ..."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1681111113,"post_id":75974815,"comment_id":133999795,"body_markdown":"But if you are *actually* worrying about response times, try switching to G1GC or maybe ZGC; i.e. a low pause GC.","body":"But if you are <i>actually</i> worrying about response times, try switching to G1GC or maybe ZGC; i.e. a low pause GC."},{"owner":{"account_id":9132976,"reputation":69,"user_id":6793827,"display_name":"P K"},"score":0,"creation_date":1681270365,"post_id":75974815,"comment_id":134027761,"body_markdown":"@StephenC Hiring a consultant is going to pretty difficult. I did try G1GC with defaults and it led to frequent GCs. The eden space was not growing enough (~2GB) leading to frequent GCs and also the old gen kept stable. This led to the slowdown of the app. I then tried the following params  as suggested as basic tuning on Redhat&#39;s GC guide and I saw increase eden and old gen but the performance of the app is still not up to the mark. I will keep you posted","body":"@StephenC Hiring a consultant is going to pretty difficult. I did try G1GC with defaults and it led to frequent GCs. The eden space was not growing enough (~2GB) leading to frequent GCs and also the old gen kept stable. This led to the slowdown of the app. I then tried the following params  as suggested as basic tuning on Redhat&#39;s GC guide and I saw increase eden and old gen but the performance of the app is still not up to the mark. I will keep you posted"},{"owner":{"account_id":9132976,"reputation":69,"user_id":6793827,"display_name":"P K"},"score":0,"creation_date":1681270374,"post_id":75974815,"comment_id":134027762,"body_markdown":"@StephenC (-Xms40960m -Xmx40960m -XX:+AlwaysPreTouch -XX:+UseG1GC -Dinactivity.days.to.expiry=60 -agentpath:/dasd/share/yourkit-2021.3-b231/bin/linux-x86-64/libyjpagent.so=port=10001,listen=all,telemetrylimit=1 -XX:+PrintGCDetails -XX:+PrintGCDateStamps -Xloggc:/logs/ade_gc.log -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/logs/heap_dump.bin -XX:MaxGCPauseMillis=500 -XX:ParallelGCThreads=20 -XX:ConcGCThreads=5 -XX:InitiatingHeapOccupancyPercent=70)","body":"@StephenC (-Xms40960m -Xmx40960m -XX:+AlwaysPreTouch -XX:+UseG1GC -Dinactivity.days.to.expiry=60 -agentpath:/dasd/share/yourkit-2021.3-b231/bin/linux-x86-64/&zwnj;&#8203;libyjpagent.so=port=&zwnj;&#8203;10001,listen=all,tel&zwnj;&#8203;emetrylimit=1 -XX:+PrintGCDetails -XX:+PrintGCDateStamps -Xloggc:/logs/ade_gc.log -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/logs/heap_dump.bin -XX:MaxGCPauseMillis=500 -XX:ParallelGCThreads=20 -XX:ConcGCThreads=5 -XX:InitiatingHeapOccupancyPercent=70)"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1681271359,"post_id":75974815,"comment_id":134027851,"body_markdown":"Frequent GCs is not the real problem.  The problem you are trying to avoid is long or uneven response times.  But if the long responses are actually due to your application generating too much garbage, then GC tuning is not going to help.  You need to fix the application.  Or get faster hardware.","body":"Frequent GCs is not the real problem.  The problem you are trying to avoid is long or uneven response times.  But if the long responses are actually due to your application generating too much garbage, then GC tuning is not going to help.  You need to fix the application.  Or get faster hardware."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1681280416,"post_id":75974815,"comment_id":134028964,"body_markdown":"*&quot;Hiring a consultant is going to pretty difficult&quot;* - The flip side is that spending another a year trying to get your application to go faster will also be pretty difficult ... to explain to your boss or client or whoever is waiting for your project completion. (I assume you are doing this because the application&#39;s performance actually matters ... to them.)","body":"<i>&quot;Hiring a consultant is going to pretty difficult&quot;</i> - The flip side is that spending another a year trying to get your application to go faster will also be pretty difficult ... to explain to your boss or client or whoever is waiting for your project completion. (I assume you are doing this because the application&#39;s performance actually matters ... to them.)"}],"owner":{"account_id":9132976,"reputation":69,"user_id":6793827,"display_name":"P K"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681109531,"creation_date":1681108711,"question_id":75974815,"body_markdown":"My application is doing frequent Major GCs after a restart and both Minor and Major GCs are happening more frequently as well as the GC times have increased significantly especially the minor GC times. I&#39;m unable to understand why this is happening. Even though the xmx (40GB) is way more than the current consumption (12GB to 28GB) the GCs are happening more frequently. Please guide me on what could be going wrong. There was a memory leak and I fixed it but now this is something I really don&#39;t understand. \r\n\r\nBefore restart:\r\n[![enter image description here][1]][1]\r\n[![enter image description here][2]][2]\r\n\r\nAfter restart:\r\n[![enter image description here][3]][3]\r\n[![enter image description here][4]][4] Following are the JAVA_OPTIONS:\r\n```\r\nopenjdk version &quot;1.8.0_362&quot;\r\nOpenJDK Runtime Environment (build 1.8.0_362-b08)\r\nOpenJDK 64-Bit Server VM (build 25.362-b08, mixed mode)\r\n```\r\n\r\n```\r\n-XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/logs/heap_dump.bin -XX:InitialHeapSize=268435456 -XX:MaxHeapFreeRatio=70 -XX:MaxHeapSize=42949672960 -XX:MinHeapFreeRatio=10 -XX:+PrintGC -XX:+PrintGCDateStamps -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+UseParallelGC \r\n```\r\nPlease find the GC logs here - https://github.com/kprateek777/gc\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/epCqq.png\r\n  [2]: https://i.stack.imgur.com/nAXOj.png\r\n  [3]: https://i.stack.imgur.com/Gj290.png\r\n  [4]: https://i.stack.imgur.com/LXgNR.png","title":"java application doing frequent major GCs though xmx is yet to reach","body":"<p>My application is doing frequent Major GCs after a restart and both Minor and Major GCs are happening more frequently as well as the GC times have increased significantly especially the minor GC times. I'm unable to understand why this is happening. Even though the xmx (40GB) is way more than the current consumption (12GB to 28GB) the GCs are happening more frequently. Please guide me on what could be going wrong. There was a memory leak and I fixed it but now this is something I really don't understand.</p>\n<p>Before restart:\n<a href=\"https://i.stack.imgur.com/epCqq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/epCqq.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/nAXOj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nAXOj.png\" alt=\"enter image description here\" /></a></p>\n<p>After restart:\n<a href=\"https://i.stack.imgur.com/Gj290.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Gj290.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/LXgNR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LXgNR.png\" alt=\"enter image description here\" /></a> Following are the JAVA_OPTIONS:</p>\n<pre><code>openjdk version &quot;1.8.0_362&quot;\nOpenJDK Runtime Environment (build 1.8.0_362-b08)\nOpenJDK 64-Bit Server VM (build 25.362-b08, mixed mode)\n</code></pre>\n<pre><code>-XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/logs/heap_dump.bin -XX:InitialHeapSize=268435456 -XX:MaxHeapFreeRatio=70 -XX:MaxHeapSize=42949672960 -XX:MinHeapFreeRatio=10 -XX:+PrintGC -XX:+PrintGCDateStamps -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+UseParallelGC \n</code></pre>\n<p>Please find the GC logs here - <a href=\"https://github.com/kprateek777/gc\" rel=\"nofollow noreferrer\">https://github.com/kprateek777/gc</a></p>\n"},{"tags":["java","sql","jpa"],"comments":[{"owner":{"account_id":15138451,"reputation":460,"user_id":12083015,"display_name":"Erwin"},"score":1,"creation_date":1681110509,"post_id":75974869,"comment_id":133999721,"body_markdown":"check [this](https://stackoverflow.com/a/12459909/12083015)","body":"check <a href=\"https://stackoverflow.com/a/12459909/12083015\">this</a>"},{"owner":{"account_id":22866981,"reputation":131,"user_id":17010647,"display_name":"Ksu"},"score":1,"creation_date":1681118225,"post_id":75974869,"comment_id":134000832,"body_markdown":"https://stackoverflow.com/questions/12459779/query-specified-join-fetching-but-the-owner-of-the-fetched-association-was-not","body":"<a href=\"https://stackoverflow.com/questions/12459779/query-specified-join-fetching-but-the-owner-of-the-fetched-association-was-not\" title=\"query specified join fetching but the owner of the fetched association was not\">stackoverflow.com/questions/12459779/&hellip;</a>"}],"owner":{"account_id":2174240,"reputation":1419,"user_id":1925356,"accept_rate":33,"display_name":"Alex Mi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681109306,"creation_date":1681109306,"question_id":75974869,"body_markdown":"I would like to create a JPA query that selects all entities matching some conditions, but I receive an error.\r\n\r\nMy select is:\r\n\r\n     select count(*) from Employee emplWithLicence  JOIN FETCH emplWithLicence.firma fa JOIN FETCH emplWithLicence.user userWithLicence JOIN FETCH userWithLicence.contact ctc LEFT OUTER JOIN FETCH userWithLicence.licence lice where userWithLicence.active = true and emplWithLicence.firma.name like &#39;Be%&#39; \r\n\r\nIn the future more conditions may come to the where clause, but this should not change my logic. Now, when I try to execute the logic above I receive the error below:\r\n\r\n    Caused by: org.hibernate.QueryException: query specified join fetching, but the owner of the fetched association was not present in the select list [FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=fa,role=at.home.digest.model.dave.Employee.firma,tableName=firma,tableAlias=firma1_,origin=empl employee0_,columns={employee0_.firma_id ,className=at.home.digest.model.dave.Firma}}]\r\n\tat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.ast.tree.SelectClause.initializeExplicitSelectClause(SelectClause.java:217)\r\n\tat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.ast.HqlSqlWalker.useSelectClause(HqlSqlWalker.java:1018)\r\n\tat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.ast.HqlSqlWalker.processQuery(HqlSqlWalker.java:786)\r\n\tat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.query(HqlSqlBaseWalker.java:677)\r\n\tat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.selectStatement(HqlSqlBaseWalker.java:313)\r\n\tat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.statement(HqlSqlBaseWalker.java:261)\r\n\tat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:271)\r\n\tat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:191)\r\n\t... 162 more\r\n\r\nwhat is my problem, how can I fix it?\r\n\r\n","title":"JPA select count of all entitties matching some conditions","body":"<p>I would like to create a JPA query that selects all entities matching some conditions, but I receive an error.</p>\n<p>My select is:</p>\n<pre><code> select count(*) from Employee emplWithLicence  JOIN FETCH emplWithLicence.firma fa JOIN FETCH emplWithLicence.user userWithLicence JOIN FETCH userWithLicence.contact ctc LEFT OUTER JOIN FETCH userWithLicence.licence lice where userWithLicence.active = true and emplWithLicence.firma.name like 'Be%' \n</code></pre>\n<p>In the future more conditions may come to the where clause, but this should not change my logic. Now, when I try to execute the logic above I receive the error below:</p>\n<pre><code>Caused by: org.hibernate.QueryException: query specified join fetching, but the owner of the fetched association was not present in the select list [FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=fa,role=at.home.digest.model.dave.Employee.firma,tableName=firma,tableAlias=firma1_,origin=empl employee0_,columns={employee0_.firma_id ,className=at.home.digest.model.dave.Firma}}]\nat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.ast.tree.SelectClause.initializeExplicitSelectClause(SelectClause.java:217)\nat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.ast.HqlSqlWalker.useSelectClause(HqlSqlWalker.java:1018)\nat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.ast.HqlSqlWalker.processQuery(HqlSqlWalker.java:786)\nat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.query(HqlSqlBaseWalker.java:677)\nat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.selectStatement(HqlSqlBaseWalker.java:313)\nat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.statement(HqlSqlBaseWalker.java:261)\nat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:271)\nat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:191)\n... 162 more\n</code></pre>\n<p>what is my problem, how can I fix it?</p>\n"},{"tags":["java","azure","apache-kafka","apache-flink","azure-eventhub"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1680882039,"post_id":75958333,"comment_id":133975337,"body_markdown":"1) You&#39;ve cut off ConsumerConfig from the logs 2) You&#39;ve not set `auto.offset.reset=earliest`","body":"1) You&#39;ve cut off ConsumerConfig from the logs 2) You&#39;ve not set <code>auto.offset.reset=earliest</code>"},{"owner":{"account_id":7796739,"reputation":11,"user_id":5897548,"display_name":"ClockWork"},"score":0,"creation_date":1681032384,"post_id":75958333,"comment_id":133991397,"body_markdown":"First of all, thank you @OneCricketeer for the solution that you propose. Can you please elaborate what do you mean with the phrase &quot;You&#39;ve cut off ConsumerConfig from the logs&quot;?","body":"First of all, thank you @OneCricketeer for the solution that you propose. Can you please elaborate what do you mean with the phrase &quot;You&#39;ve cut off ConsumerConfig from the logs&quot;?"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1681053368,"post_id":75958333,"comment_id":133993799,"body_markdown":"Did that solve the problem? Your question here only shows AdminClientConfig from Kafka logs, but there&#39;s more output, and the problem you&#39;re asking about is related to the consumer config","body":"Did that solve the problem? Your question here only shows AdminClientConfig from Kafka logs, but there&#39;s more output, and the problem you&#39;re asking about is related to the consumer config"},{"owner":{"account_id":7796739,"reputation":11,"user_id":5897548,"display_name":"ClockWork"},"score":0,"creation_date":1681057647,"post_id":75958333,"comment_id":133994355,"body_markdown":"No this didn&#39;t solve my problem. If I include the rest of the output, my question exceeds the maximum allowed characters. The output above is produced at the Flink JobManger. I have posted from it what is related to the connection to Kafka. Do you want me to include anything else? What I haven&#39;t included at the main post is that another consumer is subscribed to the same topic but with a completely different group-id.","body":"No this didn&#39;t solve my problem. If I include the rest of the output, my question exceeds the maximum allowed characters. The output above is produced at the Flink JobManger. I have posted from it what is related to the connection to Kafka. Do you want me to include anything else? What I haven&#39;t included at the main post is that another consumer is subscribed to the same topic but with a completely different group-id."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1681107214,"post_id":75958333,"comment_id":133999301,"body_markdown":"I am interested in seeing what you have as `auto.offset.reset` from the ConsumerConfig, as mentioned since any Kafka consumer defaults to start at the end of the topic, where there may be no data, if your producer is not active. The adminclient logs are unnecessary, so I suggested removing them","body":"I am interested in seeing what you have as <code>auto.offset.reset</code> from the ConsumerConfig, as mentioned since any Kafka consumer defaults to start at the end of the topic, where there may be no data, if your producer is not active. The adminclient logs are unnecessary, so I suggested removing them"},{"owner":{"account_id":7796739,"reputation":11,"user_id":5897548,"display_name":"ClockWork"},"score":0,"creation_date":1681111210,"post_id":75958333,"comment_id":133999807,"body_markdown":"I found a way of running the Job. Instead of starting the cluster and then submitting the job from a .jar, I run the **mvn exec:java -Dexec.mainClass=&quot;FlinkKafkaConsumer&quot;** command. I assume that the main reason of not connecting is the runtime environment that is been set by the start-cluster.sh of Flink, when I start the cluster. I will investigate it further and I will come back with the answer.","body":"I found a way of running the Job. Instead of starting the cluster and then submitting the job from a .jar, I run the <b>mvn exec:java -Dexec.mainClass=&quot;FlinkKafkaConsumer&quot;</b> command. I assume that the main reason of not connecting is the runtime environment that is been set by the start-cluster.sh of Flink, when I start the cluster. I will investigate it further and I will come back with the answer."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1681115377,"post_id":75958333,"comment_id":134000397,"body_markdown":"You should be able to run the main class direct from your IDE without maven command, but yes, that is one way to run any Java class from Maven directly without a JAR file","body":"You should be able to run the main class direct from your IDE without maven command, but yes, that is one way to run any Java class from Maven directly without a JAR file"}],"owner":{"account_id":7796739,"reputation":11,"user_id":5897548,"display_name":"ClockWork"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":124,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681108865,"creation_date":1680869829,"question_id":75958333,"body_markdown":"I have created an Azure VM with Ubuntu OS, where I have installed Flink 1.16.1 with all its prerequisite. The VM is in a VNet.\r\n\r\nAt the other side I have an Azure Event Hub for Apache Kafka, which is public.\r\n\r\nAt the Vnet of the VM I have created Inbound and Outbound security rules for the 9093 port, in order to communicate with my event hub.\r\n\r\nI have started a cluster at my ubuntu VM by using the following command at the terminal:\r\n\r\n    $FLINK_HOME/bin/start-cluster.sh\r\n\r\nI have created a fat jar with mvn clean package and I deployed it to the Flink cluster by using the following command:\r\n\r\n    $FLINK_HOME/bin/flink run -d -c event-hub-kafka-consumer.jar\r\n\r\nThe Java code of the FlinkKafkaConsumer that I am trying to deploy is included below:\r\n\r\n    import org.apache.flink.streaming.api.datastream.DataStream;\r\n    import org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;\r\n    import org.apache.flink.connector.kafka.source.KafkaSource;\r\n    import org.apache.flink.api.common.serialization.SimpleStringSchema;\r\n    import org.apache.flink.connector.kafka.source.enumerator.initializer.OffsetsInitializer;\r\n    import org.apache.flink.api.common.eventtime.WatermarkStrategy;\r\n\r\n    public class FlinkKafkaConsumer {\r\n\r\n        public static void main(String[] args) throws Exception {\r\n\r\n            final StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\r\n\r\n            KafkaSource&lt;String&gt; source = KafkaSource.&lt;String&gt;builder()\r\n                .setBootstrapServers(&quot;namespace.servicebus.windows.net:9093&quot;)\r\n                .setProperty(&quot;sasl.mechanism&quot;, &quot;PLAIN&quot;)\r\n                .setProperty(&quot;sasl.jaas.config&quot;, &quot;org.apache.kafka.common.security.plain.PlainLoginModule required username=\\&quot;$ConnectionString\\&quot; password=\\&quot;Endpoint=sb://namespace.servicebus.windows.net/;SharedAccessKeyName=*********;SharedAccessKey=****************\\&quot;;&quot;)\r\n                .setProperty(&quot;security.protocol&quot;, &quot;SASL_SSL&quot;)\r\n                .setTopics(&quot;topicA&quot;)\r\n                .setGroupId(&quot;flink-consumer&quot;)\r\n                .setStartingOffsets(OffsetsInitializer.latest())\r\n                .setValueOnlyDeserializer(new SimpleStringSchema())\r\n                .build();\r\n\r\n            DataStream&lt;String&gt; stream = env.fromSource(source, WatermarkStrategy.noWatermarks(), &quot;KafkaSource&quot;);\r\n\r\n            stream.print();\r\n            env.execute(&quot;Testing flink consumer&quot;);\r\n        }\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nIt seems that, the Flink Job is been created, event hub receives the requests but then Flink receives 0 messages.\r\n\r\nIs there any possible explanation to this? \r\n\r\n**Note: Another consumer is subscribed to the same topic with a completely different group-id.**\r\n ","title":"Connecting Standalone Flink Cluster on Azure VM with Azure Event Hub Kafka","body":"<p>I have created an Azure VM with Ubuntu OS, where I have installed Flink 1.16.1 with all its prerequisite. The VM is in a VNet.</p>\n<p>At the other side I have an Azure Event Hub for Apache Kafka, which is public.</p>\n<p>At the Vnet of the VM I have created Inbound and Outbound security rules for the 9093 port, in order to communicate with my event hub.</p>\n<p>I have started a cluster at my ubuntu VM by using the following command at the terminal:</p>\n<pre><code>$FLINK_HOME/bin/start-cluster.sh\n</code></pre>\n<p>I have created a fat jar with mvn clean package and I deployed it to the Flink cluster by using the following command:</p>\n<pre><code>$FLINK_HOME/bin/flink run -d -c event-hub-kafka-consumer.jar\n</code></pre>\n<p>The Java code of the FlinkKafkaConsumer that I am trying to deploy is included below:</p>\n<pre><code>import org.apache.flink.streaming.api.datastream.DataStream;\nimport org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;\nimport org.apache.flink.connector.kafka.source.KafkaSource;\nimport org.apache.flink.api.common.serialization.SimpleStringSchema;\nimport org.apache.flink.connector.kafka.source.enumerator.initializer.OffsetsInitializer;\nimport org.apache.flink.api.common.eventtime.WatermarkStrategy;\n\npublic class FlinkKafkaConsumer {\n\n    public static void main(String[] args) throws Exception {\n\n        final StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n\n        KafkaSource&lt;String&gt; source = KafkaSource.&lt;String&gt;builder()\n            .setBootstrapServers(&quot;namespace.servicebus.windows.net:9093&quot;)\n            .setProperty(&quot;sasl.mechanism&quot;, &quot;PLAIN&quot;)\n            .setProperty(&quot;sasl.jaas.config&quot;, &quot;org.apache.kafka.common.security.plain.PlainLoginModule required username=\\&quot;$ConnectionString\\&quot; password=\\&quot;Endpoint=sb://namespace.servicebus.windows.net/;SharedAccessKeyName=*********;SharedAccessKey=****************\\&quot;;&quot;)\n            .setProperty(&quot;security.protocol&quot;, &quot;SASL_SSL&quot;)\n            .setTopics(&quot;topicA&quot;)\n            .setGroupId(&quot;flink-consumer&quot;)\n            .setStartingOffsets(OffsetsInitializer.latest())\n            .setValueOnlyDeserializer(new SimpleStringSchema())\n            .build();\n\n        DataStream&lt;String&gt; stream = env.fromSource(source, WatermarkStrategy.noWatermarks(), &quot;KafkaSource&quot;);\n\n        stream.print();\n        env.execute(&quot;Testing flink consumer&quot;);\n    }\n}\n</code></pre>\n\n<p>It seems that, the Flink Job is been created, event hub receives the requests but then Flink receives 0 messages.</p>\n<p>Is there any possible explanation to this?</p>\n<p><strong>Note: Another consumer is subscribed to the same topic with a completely different group-id.</strong></p>\n"},{"tags":["java","spring-data-jpa","java-11","jparepository"],"owner":{"account_id":27889969,"reputation":1,"user_id":21296567,"display_name":"Thanh Tuyen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681108789,"creation_date":1680840257,"question_id":75955387,"body_markdown":"I have a case related to delete an entity using java JpaRepository.\r\n\r\nclass UserLanguage:\r\n\r\n```\r\n@EmbeddedId\r\n@JsonUnwrapped\r\nprivate UserLanguageId userLanguageId;\r\n\r\nprivate String nameEn;\r\nprivate String icon;\r\n\r\npublic UserLanguage (Long userId, Long languageId) {\r\n   this.userLanguageId = new UserLanguageId(userId, languageId);\r\n}\r\n```\r\n\r\nwhenever I try to delete a record using method deleteAllByUserLanguageId_UserId(userId) , it will cause\r\n\r\n&gt; IllegalArgumentException: attempt to create delete event with null entity.\r\n\r\n- userId is not null when I put log in my code.\r\n\r\n- I have tried to debug to catch the exception, and searched many topics but still no solution.","title":"JpaRepository - Cannot delete because exception &quot;attempt to create delete event with null entity&quot;","body":"<p>I have a case related to delete an entity using java JpaRepository.</p>\n<p>class UserLanguage:</p>\n<pre><code>@EmbeddedId\n@JsonUnwrapped\nprivate UserLanguageId userLanguageId;\n\nprivate String nameEn;\nprivate String icon;\n\npublic UserLanguage (Long userId, Long languageId) {\n   this.userLanguageId = new UserLanguageId(userId, languageId);\n}\n</code></pre>\n<p>whenever I try to delete a record using method deleteAllByUserLanguageId_UserId(userId) , it will cause</p>\n<blockquote>\n<p>IllegalArgumentException: attempt to create delete event with null entity.</p>\n</blockquote>\n<ul>\n<li><p>userId is not null when I put log in my code.</p>\n</li>\n<li><p>I have tried to debug to catch the exception, and searched many topics but still no solution.</p>\n</li>\n</ul>\n"},{"tags":["java","swing","maven"],"comments":[{"owner":{"account_id":2838423,"reputation":4567,"user_id":2438518,"accept_rate":53,"display_name":"mrbela"},"score":0,"creation_date":1460379430,"post_id":36549292,"comment_id":60699336,"body_markdown":"Have you added all depedencies to the classpath?","body":"Have you added all depedencies to the classpath?"},{"owner":{"account_id":8176094,"reputation":79,"user_id":6154767,"display_name":"Sanchita Sonawane"},"score":0,"creation_date":1460379678,"post_id":36549292,"comment_id":60699534,"body_markdown":"i have added dependency in pom.xml file","body":"i have added dependency in pom.xml file"},{"owner":{"account_id":8034427,"reputation":1287,"user_id":6058076,"accept_rate":100,"display_name":"LearningPhase"},"score":1,"creation_date":1460379975,"post_id":36549292,"comment_id":60699769,"body_markdown":"Please post your pom.xml","body":"Please post your pom.xml"},{"owner":{"account_id":8034427,"reputation":1287,"user_id":6058076,"accept_rate":100,"display_name":"LearningPhase"},"score":2,"creation_date":1460380019,"post_id":36549292,"comment_id":60699798,"body_markdown":"Also after adding your dependencies did you do a Maven&gt;update project to download the dependencies","body":"Also after adding your dependencies did you do a Maven&gt;update project to download the dependencies"},{"owner":{"account_id":8176094,"reputation":79,"user_id":6154767,"display_name":"Sanchita Sonawane"},"score":0,"creation_date":1460380182,"post_id":36549292,"comment_id":60699928,"body_markdown":"yes i did that.my project is working properly from sts.but when i build jar then its giving  me the above mentioned error","body":"yes i did that.my project is working properly from sts.but when i build jar then its giving  me the above mentioned error"},{"owner":{"account_id":6265568,"reputation":1555,"user_id":4871427,"accept_rate":60,"display_name":"Hohenheim"},"score":1,"creation_date":1460381100,"post_id":36549292,"comment_id":60700665,"body_markdown":"if you dl your jars from maven repository. You&#39;ll able to build your jar. So with this error. You have a class not found which is `org.hibernate.cfg.configuration` and this class is present in all of the jars of hibernate : core ... So maybe you don&#39;t have the right configuration so the wrong version of hibernate. Show us your pom.xml maybe we can find a solution","body":"if you dl your jars from maven repository. You&#39;ll able to build your jar. So with this error. You have a class not found which is <code>org.hibernate.cfg.configuration</code> and this class is present in all of the jars of hibernate : core ... So maybe you don&#39;t have the right configuration so the wrong version of hibernate. Show us your pom.xml maybe we can find a solution"},{"owner":{"account_id":898124,"reputation":7147,"user_id":934960,"accept_rate":72,"display_name":"Raunak Agarwal"},"score":0,"creation_date":1460436246,"post_id":36549292,"comment_id":60727739,"body_markdown":"@SanchitaSonawane: Are you sure your jar packages all the dependent jar as well?","body":"@SanchitaSonawane: Are you sure your jar packages all the dependent jar as well?"},{"owner":{"account_id":8176094,"reputation":79,"user_id":6154767,"display_name":"Sanchita Sonawane"},"score":0,"creation_date":1460436781,"post_id":36549292,"comment_id":60727890,"body_markdown":"@RaunakAgarwal : yes i have added all the dependencies as per program requirement.Kindly refer the above attached pom file.","body":"@RaunakAgarwal : yes i have added all the dependencies as per program requirement.Kindly refer the above attached pom file."},{"owner":{"account_id":8034427,"reputation":1287,"user_id":6058076,"accept_rate":100,"display_name":"LearningPhase"},"score":0,"creation_date":1460637738,"post_id":36549292,"comment_id":60842739,"body_markdown":"Can you pleas verify that the jar that you have has all the required files in it","body":"Can you pleas verify that the jar that you have has all the required files in it"}],"owner":{"account_id":8176094,"reputation":79,"user_id":6154767,"display_name":"Sanchita Sonawane"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3102,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":0,"score":4,"last_activity_date":1681106742,"creation_date":1460379249,"question_id":36549292,"body_markdown":"I have added the following dependency: `hibernate-core,hibernate-commons-annotations`, `hibernate-jpa-2.0-api`, `hibernate-entitymanager`, `hibernate-validator`.\r\nI am getting the following exception while running jar:\r\n\r\n&gt;    Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError:\r\n    org/hibernate/cfg/Configuration\r\n    Caused by: java.lang.ClassNotFoundException:     org.hibernate.cfg.Configuration\r\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)\r\n    at java.security.AccessController.doPrivileged(Native Method)\r\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)\r\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:319)\r\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)\r\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:264)\r\n    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:332)\r\n\r\npom.xml as below:\r\n\r\n   &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;com.install&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;install&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;/parent&gt;\r\n\r\n\t&lt;artifactId&gt;installer&lt;/artifactId&gt;\r\n\t&lt;packaging&gt;jar&lt;/packaging&gt;\r\n\t&lt;name&gt;Installer&lt;/name&gt;\r\n\t&lt;description&gt;Installer main&lt;/description&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;slf4j.version&gt;1.7.12&lt;/slf4j.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.quickfixj&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;quickfixj-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.6.0&lt;/version&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;slf4j-jdk14&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;log4j&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;log4j&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${slf4j.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jcl-over-slf4j&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${slf4j.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jul-to-slf4j&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${slf4j.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;log4j-over-slf4j&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${slf4j.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.4&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.4&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.jboss.logging&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jboss-logging&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.2.0.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;log4j-web&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.4&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;commons-io&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.4&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.1.36&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;net.sourceforge.jtds&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jtds&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.2.4&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;dom4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;dom4j&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.6.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;commons-logging&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;commons-collections&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons-collections&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.2.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.0.1.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.2.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate.common&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-commons-annotations&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.0.1.Final&lt;/version&gt;\r\n\t\t\t&lt;classifier&gt;tests&lt;/classifier&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate.javax.persistence&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-jpa-2.0-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.0.1.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.0.1.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.2.0.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.avalon.framework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;avalon-framework-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.3.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.3.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.transaction&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jta&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;!-- Build an executable JAR --&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;2.4&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;archive&gt;\r\n\t\t\t\t\t\t&lt;manifest&gt;\r\n\t\t\t\t\t\t\t&lt;mainClass&gt;com.installer&lt;/mainClass&gt;\r\n\t\t\t\t\t\t&lt;/manifest&gt;\r\n\t\t\t\t\t&lt;/archive&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n\t\t","title":"NoClassDefFoundError: org/hibernate/cfg/Configuration error message when trying to load a Configuration:","body":"<p>I have added the following dependency: <code>hibernate-core,hibernate-commons-annotations</code>, <code>hibernate-jpa-2.0-api</code>, <code>hibernate-entitymanager</code>, <code>hibernate-validator</code>.\nI am getting the following exception while running jar:</p>\n\n<blockquote>\n  <p>Exception in thread \"main\" java.lang.NoClassDefFoundError:\n      org/hibernate/cfg/Configuration\n      Caused by: java.lang.ClassNotFoundException:     org.hibernate.cfg.Configuration\n      at java.net.URLClassLoader$1.run(URLClassLoader.java:217)\n      at java.security.AccessController.doPrivileged(Native Method)\n      at java.net.URLClassLoader.findClass(URLClassLoader.java:205)\n      at java.lang.ClassLoader.loadClass(ClassLoader.java:319)\n      at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)\n      at java.lang.ClassLoader.loadClass(ClassLoader.java:264)\n      at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:332)</p>\n</blockquote>\n\n<p>pom.xml as below:</p>\n\n<p>http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n    4.0.0\n    \n        com.install\n        install\n        0.0.1-SNAPSHOT\n    </p>\n\n<pre><code>&lt;artifactId&gt;installer&lt;/artifactId&gt;\n&lt;packaging&gt;jar&lt;/packaging&gt;\n&lt;name&gt;Installer&lt;/name&gt;\n&lt;description&gt;Installer main&lt;/description&gt;\n\n&lt;properties&gt;\n    &lt;slf4j.version&gt;1.7.12&lt;/slf4j.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.quickfixj&lt;/groupId&gt;\n        &lt;artifactId&gt;quickfixj-core&lt;/artifactId&gt;\n        &lt;version&gt;1.6.0&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n                &lt;artifactId&gt;slf4j-jdk14&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;log4j&lt;/groupId&gt;\n                &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n        &lt;version&gt;${slf4j.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;jcl-over-slf4j&lt;/artifactId&gt;\n        &lt;version&gt;${slf4j.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;jul-to-slf4j&lt;/artifactId&gt;\n        &lt;version&gt;${slf4j.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;log4j-over-slf4j&lt;/artifactId&gt;\n        &lt;version&gt;${slf4j.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n        &lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;\n        &lt;version&gt;2.4&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n        &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n        &lt;version&gt;2.4&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.jboss.logging&lt;/groupId&gt;\n        &lt;artifactId&gt;jboss-logging&lt;/artifactId&gt;\n        &lt;version&gt;3.2.0.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n        &lt;artifactId&gt;log4j-web&lt;/artifactId&gt;\n        &lt;version&gt;2.4&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-io&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n        &lt;version&gt;2.4&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n        &lt;version&gt;5.1.36&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;net.sourceforge.jtds&lt;/groupId&gt;\n        &lt;artifactId&gt;jtds&lt;/artifactId&gt;\n        &lt;version&gt;1.2.4&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;dom4j&lt;/groupId&gt;\n        &lt;artifactId&gt;dom4j&lt;/artifactId&gt;\n        &lt;version&gt;1.6.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-logging&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\n        &lt;version&gt;1.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-collections&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-collections&lt;/artifactId&gt;\n        &lt;version&gt;3.2.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n        &lt;version&gt;4.0.1.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n        &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n        &lt;version&gt;2.2.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate.common&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-commons-annotations&lt;/artifactId&gt;\n        &lt;version&gt;4.0.1.Final&lt;/version&gt;\n        &lt;classifier&gt;tests&lt;/classifier&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate.javax.persistence&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-jpa-2.0-api&lt;/artifactId&gt;\n        &lt;version&gt;1.0.1.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n        &lt;version&gt;4.0.1.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n        &lt;version&gt;4.2.0.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.avalon.framework&lt;/groupId&gt;\n        &lt;artifactId&gt;avalon-framework-api&lt;/artifactId&gt;\n        &lt;version&gt;4.3.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n        &lt;version&gt;1.3.2&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.transaction&lt;/groupId&gt;\n        &lt;artifactId&gt;jta&lt;/artifactId&gt;\n        &lt;version&gt;1.1&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;!-- Build an executable JAR --&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.4&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;archive&gt;\n                    &lt;manifest&gt;\n                        &lt;mainClass&gt;com.installer&lt;/mainClass&gt;\n                    &lt;/manifest&gt;\n                &lt;/archive&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p></p>\n"},{"tags":["java","android","android-studio","xiaomi"],"owner":{"account_id":26490976,"reputation":1,"user_id":20129150,"display_name":"gautam v"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":133,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681106519,"creation_date":1681102458,"question_id":75974342,"body_markdown":"How can I enable &quot;show on lock screen&quot; permission on Xiaomi phones? Is it possible by programmatically or add custom permission in manifest or still somehow?","title":"How can I enable show on lock screen permission programatically on Xiaomi phones?","body":"<p>How can I enable &quot;show on lock screen&quot; permission on Xiaomi phones? Is it possible by programmatically or add custom permission in manifest or still somehow?</p>\n"},{"tags":["java","android","kotlin","android-jetpack","android-workmanager"],"comments":[{"owner":{"account_id":14474123,"reputation":1147,"user_id":12469165,"display_name":"Amit pandey"},"score":0,"creation_date":1680614267,"post_id":75929716,"comment_id":133925234,"body_markdown":"Yes its possible with WorkManger","body":"Yes its possible with WorkManger"},{"owner":{"account_id":18002107,"reputation":542,"user_id":13083841,"display_name":"mrzbn"},"score":0,"creation_date":1680614897,"post_id":75929716,"comment_id":133925376,"body_markdown":"@Amitpandey ok. how?","body":"@Amitpandey ok. how?"},{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":0,"creation_date":1680616036,"post_id":75929716,"comment_id":133925739,"body_markdown":"Can you rephrase this? I don&#39;t understand what you mean. &quot;I want app killed to continue work, not in background.&quot; It doesn&#39;t make sense to say Work Manager is doing work when the app is not running. The WorkManager task is part of your app, so if it&#39;s doing work, your app is running. Also, when you say the app is &quot;killed&quot;, do you just mean the activity is closed, or when the OS terminates the whole application to save memory?","body":"Can you rephrase this? I don&#39;t understand what you mean. &quot;I want app killed to continue work, not in background.&quot; It doesn&#39;t make sense to say Work Manager is doing work when the app is not running. The WorkManager task is part of your app, so if it&#39;s doing work, your app is running. Also, when you say the app is &quot;killed&quot;, do you just mean the activity is closed, or when the OS terminates the whole application to save memory?"},{"owner":{"account_id":18002107,"reputation":542,"user_id":13083841,"display_name":"mrzbn"},"score":0,"creation_date":1680619006,"post_id":75929716,"comment_id":133926558,"body_markdown":"@Tenfour04 thanks. I rephrased my question.","body":"@Tenfour04 thanks. I rephrased my question."},{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":0,"creation_date":1680619334,"post_id":75929716,"comment_id":133926653,"body_markdown":"Sorry, I still don&#39;t understand. Why does it matter if the activity is open or closed while you are scheduling work? And you didn&#39;t answer the question about the word &quot;killed&quot;.","body":"Sorry, I still don&#39;t understand. Why does it matter if the activity is open or closed while you are scheduling work? And you didn&#39;t answer the question about the word &quot;killed&quot;."},{"owner":{"account_id":18002107,"reputation":542,"user_id":13083841,"display_name":"mrzbn"},"score":0,"creation_date":1680624543,"post_id":75929716,"comment_id":133928116,"body_markdown":"@Tenfour04 let me explain it this way: I have a coroutine scope bound to application (MainScope). I want when this scope stops working, schedule a work using WorkManager.","body":"@Tenfour04 let me explain it this way: I have a coroutine scope bound to application (MainScope). I want when this scope stops working, schedule a work using WorkManager."}],"owner":{"account_id":18002107,"reputation":542,"user_id":13083841,"display_name":"mrzbn"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":104,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681106458,"creation_date":1680613372,"question_id":75929716,"body_markdown":"I have a work that I want to run immediately when app starts running. but I&#39;m only using **Coroutines** for that. \r\n\r\nAfter app is **killed** I want to schedule **WorkManager** to continue that work. Is that possible for WorkManager? \r\n\r\nNote that I want app activity to be closed when I schedule the work with WorkManager.","title":"How to force WorkManager to do work when app is NOT running?","body":"<p>I have a work that I want to run immediately when app starts running. but I'm only using <strong>Coroutines</strong> for that.</p>\n<p>After app is <strong>killed</strong> I want to schedule <strong>WorkManager</strong> to continue that work. Is that possible for WorkManager?</p>\n<p>Note that I want app activity to be closed when I schedule the work with WorkManager.</p>\n"},{"tags":["java","android","android-room"],"answers":[{"tags":[],"owner":{"account_id":6077735,"reputation":52951,"user_id":4744514,"accept_rate":96,"display_name":"MikeT"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681106035,"creation_date":1681106035,"answer_id":75974597,"question_id":75971714,"body_markdown":"I believe that you will encounter issues with what you have.\r\n\r\nThat is an AdjacencyList row **parent** column has to be a value, due to the Foreign Key, of an **id** that exists in the AdjacencyList.\r\n\r\n- when you specify @ForeignKey then you are defining an SQLite Foreign Key constraint(rule) that enforces referential integrity.\r\n\r\nWhen you say nested, what level of nesting? \r\n\r\n- For a single level of nesting then, taking a nested project, then a higher level project could have multiple nested projects but those nested projects could not have projects nested.\r\n\r\n- For a multi-level nesting than, a lower level project, could itself have lower level projects.\r\n\r\n- obviously the same for tasks, although at a guess tasks would be part of a project.\r\n\r\nI would suggest that you consider utilising what are termed as associative/mapping/reference (and many other descriptive names) table(s).\r\n\r\nSuch a table has 2 core columns one that references the parent, the other that reference a child of the parent (the child being nested). The 2 columns are then used as the primary key thus catering for a multi-level nesting, albeit it requiring some form of recursion to move through the hierarchy.\r\n\r\nAs an example, using raw/native SQLite, for which Room is a wrapper around, then perhaps consider the following SQL created and tested using an SQLite tool (Navicat for SQLite, there are others freely available) to demonstrate an associative/mapping/reference table that caters not only for multi-level nesting but also for a project to be nested in multiple projects (if so desired).\r\n\r\n    DROP TABLE IF EXISTS project_hierarchy;\r\n    DROP TABLE IF EXISTS project;\r\n    CREATE TABLE IF NOT EXISTS project (\r\n    \tid INTEGER PRIMARY KEY, \r\n    \tname TEXT, \r\n    \tetc TEXT\r\n    );\r\n    \r\n    /* The mapping/associative/refernce .... table */\r\n    CREATE TABLE IF NOT EXISTS project_hierarchy (\r\n    \tparent_project INTEGER REFERENCES project(id) ON DELETE CASCADE /* REFERENCES defines a FOREIGN KEY constraint(rule) saying the value MUST be an existing project id */, \r\n    \tchild_project INTEGER REFERENCES project(id) ON UPDATE CASCADE, /* REFERENCES defines a FOREIGN KEY constraint(rule) saying the value MUST be an existing project id */\r\n    \tPRIMARY KEY (parent_project, child_project)\r\n    );\r\n    /* note that the more conside column level foreign key definition has been used */\r\n    /* Room will build table level foreign key definitiions e.g. */\r\n    /* CREATE TABLE IF NOT EXISTS project_hierarchy */\r\n    /*     parent_project INTEGER, */\r\n    /*     child_project INTEGER, */\r\n    /* PRIMARY KEY (parent_project,child_project), */\r\n    /* FOREIGN KEY parent_project REFERENCES project(id) ON DELETE CASCADE ON UPDATE CASCADE, */\r\n    /* FOREIGN KEY child_project REFERENCES project(id) ON DELETE CASCADE ON UPDATE CASCADE */\r\n    /*;*/\r\n    \r\n    /* Add some Projects (not any nestings at all)*/\r\n    INSERT INTO project VALUES\r\n    \t(1,&#39;P1&#39;,&#39;blah1&#39;) \r\n    \t,(2,&#39;P2&#39;,&#39;blah2&#39;)\r\n    \t,(3,&#39;P3&#39;,&#39;blah3&#39;)\r\n    \t,(4,&#39;P4&#39;,&#39;blah4&#39;)\r\n    \t,(5,&#39;P5&#39;,&#39;blah5&#39;)\r\n    \t,(6,&#39;P6&#39;,&#39;blah6&#39;)\r\n    \t,(7,&#39;P7&#39;,&#39;blah7&#39;)\r\n    \t,(8,&#39;P8&#39;,&#39;blah8&#39;)\r\n    \t,(9,&#39;P9&#39;,&#39;blah9&#39;)\r\n    ;\r\n    \r\n    INSERT INTO project_hierarchy VALUES\r\n    \t(1,2) /* Project 2 nested in project 1 */\r\n    \t,(1,3) /* Project 3 nested in project 1 as well */\r\n    \t,(4,5) /* Project 5 nested in project 4 */\r\n    \t,(2,6) /* project 6 is nested in project 2 which is nested in project 1 */\r\n    \t,(4,7) /* Project 7 is nested in project 4 as well as project 5 */\r\n    \t,(6,8) /* Project 8 is nested in project 6 which is nested in project 2 which is nested in project 1 */\r\n    \t,(4,6) /* Project 6 is additionally nested in Project 4 */ \r\n    ;\r\n    \r\n    SELECT *\r\n    FROM project \r\n        /* More importantly, how do I deal with the fact that the name of the table for project and task is different from the one I would use for the Adjacency List? */\r\n    \t/* JOIN the associative table to the project table where the parent_project is the same as the id in the project */\r\n    \tJOIN project_hierarchy ON project_hierarchy.parent_project = project.id /* Joins the project_hierarchy table to the project table */\r\n    \t/* JOIN the project table, for the nested projects, onto the associative table so the child_project is retrieved*/ \r\n    \tJOIN project AS nested /* aliased to circumvent ambiguous column names */ ON nested.id = project_hierarchy.child_project\r\n    ;\r\n    /* Note as there is nothing to JOIN for Project 9 then in this select nothing is output */\r\n    \r\n    /* Cleanup the demo environment */\r\n    DROP TABLE IF EXISTS project_hierarchy;\r\n    DROP TABLE IF EXISTS project;\r\n\r\n\r\nThe result being:-\r\n\r\n[![enter image description here][1]][1]\r\n\r\n**Using the above in Room**\r\n\r\nAdapting the above for Room, would have two `@Entity` annotated classes:-\r\n\r\n**Project**:-\r\n\r\n    @Entity\r\n    class Project {\r\n        @PrimaryKey\r\n        Long id=null;\r\n        String name;\r\n        String etc;\r\n    \r\n        Project(){}\r\n        Project(String name, String etc) {\r\n            this.name = name;\r\n            this.etc = etc;\r\n        }\r\n        Project(Long id, String name, String etc) {\r\n            this.id = id;\r\n            this.name = name;\r\n            this.etc = etc;\r\n        }\r\n    }\r\n\r\nand **Project_Hierarchy** :-\r\n\r\n    @Entity(\r\n            primaryKeys = {&quot;parent_project&quot;,&quot;child_project&quot;},\r\n            foreignKeys = {\r\n                    @ForeignKey(\r\n                            entity = Project.class,\r\n                            parentColumns = {&quot;id&quot;},\r\n                            childColumns = {&quot;parent_project&quot;},\r\n                            onDelete = ForeignKey.CASCADE,\r\n                            onUpdate = ForeignKey.CASCADE\r\n                    ),\r\n                    @ForeignKey(\r\n                            entity = Project.class,\r\n                            parentColumns = {&quot;id&quot;},\r\n                            childColumns = {&quot;child_project&quot;},\r\n                            onDelete = ForeignKey.CASCADE,\r\n                            onUpdate = ForeignKey.CASCADE\r\n                    )\r\n            }\r\n    )\r\n    class Project_Hierarchy {\r\n        long parent_project;\r\n        @ColumnInfo(index = true)\r\n        long child_project;\r\n    \r\n        Project_Hierarchy(){}\r\n        Project_Hierarchy(long parent_project, long child_project) {\r\n            this.parent_project = parent_project;\r\n            this.child_project = child_project;\r\n        }\r\n    }\r\n\r\nAlthough not exactly the same result wise in Room you would have a POJO for getting a Project with it&#39;s nested (1st Level) projects:-\r\n\r\n    class ProjectWithFirstLevelNestedProjects {\r\n       @Embedded\r\n       Project project;\r\n       @Relation(\r\n               entity = Project.class,\r\n               parentColumn = &quot;id&quot;,\r\n               entityColumn = &quot;id&quot;,\r\n               associateBy = @Junction(value = Project_Hierarchy.class,parentColumn = &quot;parent_project&quot;, entityColumn = &quot;child_project&quot;)\r\n       )\r\n       List&lt;Project&gt; nestedProject;\r\n    }\r\n\r\n- the associate by  and Junction combination is how Room knows to do the join (actually it is an equivalent to a join that is used)\r\n\r\nSome methods in an `@Dao` annotated **interface** so they are implicitly abstract **BUT** cannot have bodies. \r\n\r\nAn abstract class, which then requires the DAO methods to be abstract but have bodies can be used and as such is more flexible.\r\n\r\n    @Dao\r\n    interface AllDAOs {\r\n        @Insert(onConflict = OnConflictStrategy.IGNORE)\r\n        long insert(Project project);\r\n        @Insert(onConflict = OnConflictStrategy.IGNORE)\r\n        long insert(Project_Hierarchy project_hierarchy);\r\n        @Transaction\r\n        @Query(&quot;SELECT * FROM project&quot;)\r\n        List&lt;ProjectWithFirstLevelNestedProjects&gt; getAllProjectsWithFirstLevelProjects();\r\n    }\r\n\r\n- note the last method and it&#39;s apparent simplicity\r\n\r\nPutting it all together from a Room perspective is the `@Database` annotated class:-\r\n\r\n    @Database(entities = {Project.class,Project_Hierarchy.class},exportSchema = false,version = 1)\r\n    abstract class TheDatabase extends RoomDatabase {\r\n    \r\n        abstract AllDAOs getAllDAOs();\r\n    \r\n        private static volatile TheDatabase instance;\r\n        static TheDatabase getInstance(Context context) {\r\n            if (instance==null) {\r\n                instance = Room.databaseBuilder(context,TheDatabase.class,&quot;the_database.db&quot;)\r\n                        .allowMainThreadQueries()\r\n                        .build();\r\n            }\r\n            return instance;\r\n        }\r\n    }\r\n\r\n- note that for brevity and convenience `.allowMainThreadQueries` has been utilised, so the main thread can be used. It is not recommended to use the Main thread for an App this is to be distributed.\r\n\r\nFinally replicating the SQLite, noting that as we are dealing with Objects that the result will be different albeit that the underlying data in the tables will be the same. Some Activity code:-\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n        TheDatabase db;\r\n        AllDAOs dao;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n            db = TheDatabase.getInstance(this);\r\n            dao = db.getAllDAOs();\r\n    \r\n            long p1Id = dao.insert(new Project(&quot;P1&quot;,&quot;blah1&quot;));\r\n            long p2Id = dao.insert(new Project(&quot;P2&quot;,&quot;blah2&quot;));\r\n            long p3Id = dao.insert(new Project(&quot;P3&quot;,&quot;blah3&quot;));\r\n            long p4Id = dao.insert(new Project(&quot;P4&quot;,&quot;blah4&quot;));\r\n            long p5Id = dao.insert(new Project(&quot;P5&quot;,&quot;blah5&quot;));\r\n            long p6Id = dao.insert(new Project(&quot;P6&quot;,&quot;blah6&quot;));\r\n            long p7Id = dao.insert(new Project(&quot;P7&quot;,&quot;blah7&quot;));\r\n            long p8Id = dao.insert(new Project(&quot;P8&quot;,&quot;blah8&quot;));\r\n            long p9Id = dao.insert(new Project(&quot;P9&quot;,&quot;blah9&quot;));\r\n    \r\n            dao.insert(new Project_Hierarchy(p1Id,p2Id));\r\n            dao.insert(new Project_Hierarchy(p1Id,p3Id));\r\n            dao.insert(new Project_Hierarchy(p4Id,p5Id));\r\n            dao.insert(new Project_Hierarchy(p2Id,p6Id));\r\n            dao.insert(new Project_Hierarchy(p4Id,p7Id));\r\n            dao.insert(new Project_Hierarchy(p6Id,p8Id));\r\n            dao.insert(new Project_Hierarchy(p4Id,p6Id));\r\n            logProjectsWithFirstLevelNestings(dao.getAllProjectsWithFirstLevelProjects());\r\n        }\r\n    \r\n        void logProjectsWithFirstLevelNestings(List&lt;ProjectWithFirstLevelNestedProjects&gt; nestings) {\r\n            StringBuilder sb = new StringBuilder();\r\n            for (ProjectWithFirstLevelNestedProjects pwflnp: nestings) {\r\n                sb = new StringBuilder();\r\n                for (Project project: pwflnp.nestedProject) {\r\n                    sb.append(&quot;\\n\\tNested Project Name is &quot;).append(project.name).append(&quot; ETC is &quot;).append(project.etc).append(&quot; ID is &quot;).append(project.id);\r\n                }\r\n                Log.d(&quot;DBINFO&quot;,\r\n                        &quot;Project is &quot; + pwflnp.project.name +\r\n                                &quot; ETC is &quot; + pwflnp.project.etc +\r\n                                &quot; ID is &quot; + pwflnp.project.id +\r\n                                &quot;. It has &quot; + pwflnp.nestedProject.size() + &quot; First Level Nested Projects; They are:-&quot; +\r\n                                sb\r\n                );\r\n            }\r\n        }\r\n    }\r\n\r\n**The Result**\r\n\r\nThe output to the Log is:-\r\n\r\n    D/DBINFO: Project is P1 ETC is blah1 ID is 1. It has 2 First Level Nested Projects; They are:-\r\n        \tNested Project Name is P2 ETC is blah2 ID is 2\r\n        \tNested Project Name is P3 ETC is blah3 ID is 3\r\n    \t\t\r\n    \t\t\r\n    D/DBINFO: Project is P2 ETC is blah2 ID is 2. It has 1 First Level Nested Projects; They are:-\r\n        \tNested Project Name is P6 ETC is blah6 ID is 6\r\n    \t\t\r\n    \t\t\r\n    D/DBINFO: Project is P3 ETC is blah3 ID is 3. It has 0 First Level Nested Projects; They are:-\r\n    D/DBINFO: Project is P4 ETC is blah4 ID is 4. It has 3 First Level Nested Projects; They are:-\r\n        \tNested Project Name is P5 ETC is blah5 ID is 5\r\n        \tNested Project Name is P6 ETC is blah6 ID is 6\r\n        \tNested Project Name is P7 ETC is blah7 ID is 7\r\n    \t\t\r\n    \t\t\r\n    D/DBINFO: Project is P5 ETC is blah5 ID is 5. It has 0 First Level Nested Projects; They are:-\r\n    D/DBINFO: Project is P6 ETC is blah6 ID is 6. It has 1 First Level Nested Projects; They are:-\r\n        \tNested Project Name is P8 ETC is blah8 ID is 8\r\n    \t\t\r\n    \t\t\r\n    D/DBINFO: Project is P7 ETC is blah7 ID is 7. It has 0 First Level Nested Projects; They are:-\r\n    D/DBINFO: Project is P8 ETC is blah8 ID is 8. It has 0 First Level Nested Projects; They are:-\r\n    D/DBINFO: Project is P9 ETC is blah9 ID is 9. It has 0 First Level Nested Projects; They are:-\r\n\r\nThis is clearly different to the original output. However the nestings are the equivalent and furthermore all Projects, nestings or not, have been output.\r\n\r\n\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/7aHrJ.png","title":"How can I properly implement an extendable adjacency list database in Android Room?","body":"<p>I believe that you will encounter issues with what you have.</p>\n<p>That is an AdjacencyList row <strong>parent</strong> column has to be a value, due to the Foreign Key, of an <strong>id</strong> that exists in the AdjacencyList.</p>\n<ul>\n<li>when you specify @ForeignKey then you are defining an SQLite Foreign Key constraint(rule) that enforces referential integrity.</li>\n</ul>\n<p>When you say nested, what level of nesting?</p>\n<ul>\n<li><p>For a single level of nesting then, taking a nested project, then a higher level project could have multiple nested projects but those nested projects could not have projects nested.</p>\n</li>\n<li><p>For a multi-level nesting than, a lower level project, could itself have lower level projects.</p>\n</li>\n<li><p>obviously the same for tasks, although at a guess tasks would be part of a project.</p>\n</li>\n</ul>\n<p>I would suggest that you consider utilising what are termed as associative/mapping/reference (and many other descriptive names) table(s).</p>\n<p>Such a table has 2 core columns one that references the parent, the other that reference a child of the parent (the child being nested). The 2 columns are then used as the primary key thus catering for a multi-level nesting, albeit it requiring some form of recursion to move through the hierarchy.</p>\n<p>As an example, using raw/native SQLite, for which Room is a wrapper around, then perhaps consider the following SQL created and tested using an SQLite tool (Navicat for SQLite, there are others freely available) to demonstrate an associative/mapping/reference table that caters not only for multi-level nesting but also for a project to be nested in multiple projects (if so desired).</p>\n<pre><code>DROP TABLE IF EXISTS project_hierarchy;\nDROP TABLE IF EXISTS project;\nCREATE TABLE IF NOT EXISTS project (\n    id INTEGER PRIMARY KEY, \n    name TEXT, \n    etc TEXT\n);\n\n/* The mapping/associative/refernce .... table */\nCREATE TABLE IF NOT EXISTS project_hierarchy (\n    parent_project INTEGER REFERENCES project(id) ON DELETE CASCADE /* REFERENCES defines a FOREIGN KEY constraint(rule) saying the value MUST be an existing project id */, \n    child_project INTEGER REFERENCES project(id) ON UPDATE CASCADE, /* REFERENCES defines a FOREIGN KEY constraint(rule) saying the value MUST be an existing project id */\n    PRIMARY KEY (parent_project, child_project)\n);\n/* note that the more conside column level foreign key definition has been used */\n/* Room will build table level foreign key definitiions e.g. */\n/* CREATE TABLE IF NOT EXISTS project_hierarchy */\n/*     parent_project INTEGER, */\n/*     child_project INTEGER, */\n/* PRIMARY KEY (parent_project,child_project), */\n/* FOREIGN KEY parent_project REFERENCES project(id) ON DELETE CASCADE ON UPDATE CASCADE, */\n/* FOREIGN KEY child_project REFERENCES project(id) ON DELETE CASCADE ON UPDATE CASCADE */\n/*;*/\n\n/* Add some Projects (not any nestings at all)*/\nINSERT INTO project VALUES\n    (1,'P1','blah1') \n    ,(2,'P2','blah2')\n    ,(3,'P3','blah3')\n    ,(4,'P4','blah4')\n    ,(5,'P5','blah5')\n    ,(6,'P6','blah6')\n    ,(7,'P7','blah7')\n    ,(8,'P8','blah8')\n    ,(9,'P9','blah9')\n;\n\nINSERT INTO project_hierarchy VALUES\n    (1,2) /* Project 2 nested in project 1 */\n    ,(1,3) /* Project 3 nested in project 1 as well */\n    ,(4,5) /* Project 5 nested in project 4 */\n    ,(2,6) /* project 6 is nested in project 2 which is nested in project 1 */\n    ,(4,7) /* Project 7 is nested in project 4 as well as project 5 */\n    ,(6,8) /* Project 8 is nested in project 6 which is nested in project 2 which is nested in project 1 */\n    ,(4,6) /* Project 6 is additionally nested in Project 4 */ \n;\n\nSELECT *\nFROM project \n    /* More importantly, how do I deal with the fact that the name of the table for project and task is different from the one I would use for the Adjacency List? */\n    /* JOIN the associative table to the project table where the parent_project is the same as the id in the project */\n    JOIN project_hierarchy ON project_hierarchy.parent_project = project.id /* Joins the project_hierarchy table to the project table */\n    /* JOIN the project table, for the nested projects, onto the associative table so the child_project is retrieved*/ \n    JOIN project AS nested /* aliased to circumvent ambiguous column names */ ON nested.id = project_hierarchy.child_project\n;\n/* Note as there is nothing to JOIN for Project 9 then in this select nothing is output */\n\n/* Cleanup the demo environment */\nDROP TABLE IF EXISTS project_hierarchy;\nDROP TABLE IF EXISTS project;\n</code></pre>\n<p>The result being:-</p>\n<p><a href=\"https://i.stack.imgur.com/7aHrJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7aHrJ.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Using the above in Room</strong></p>\n<p>Adapting the above for Room, would have two <code>@Entity</code> annotated classes:-</p>\n<p><strong>Project</strong>:-</p>\n<pre><code>@Entity\nclass Project {\n    @PrimaryKey\n    Long id=null;\n    String name;\n    String etc;\n\n    Project(){}\n    Project(String name, String etc) {\n        this.name = name;\n        this.etc = etc;\n    }\n    Project(Long id, String name, String etc) {\n        this.id = id;\n        this.name = name;\n        this.etc = etc;\n    }\n}\n</code></pre>\n<p>and <strong>Project_Hierarchy</strong> :-</p>\n<pre><code>@Entity(\n        primaryKeys = {&quot;parent_project&quot;,&quot;child_project&quot;},\n        foreignKeys = {\n                @ForeignKey(\n                        entity = Project.class,\n                        parentColumns = {&quot;id&quot;},\n                        childColumns = {&quot;parent_project&quot;},\n                        onDelete = ForeignKey.CASCADE,\n                        onUpdate = ForeignKey.CASCADE\n                ),\n                @ForeignKey(\n                        entity = Project.class,\n                        parentColumns = {&quot;id&quot;},\n                        childColumns = {&quot;child_project&quot;},\n                        onDelete = ForeignKey.CASCADE,\n                        onUpdate = ForeignKey.CASCADE\n                )\n        }\n)\nclass Project_Hierarchy {\n    long parent_project;\n    @ColumnInfo(index = true)\n    long child_project;\n\n    Project_Hierarchy(){}\n    Project_Hierarchy(long parent_project, long child_project) {\n        this.parent_project = parent_project;\n        this.child_project = child_project;\n    }\n}\n</code></pre>\n<p>Although not exactly the same result wise in Room you would have a POJO for getting a Project with it's nested (1st Level) projects:-</p>\n<pre><code>class ProjectWithFirstLevelNestedProjects {\n   @Embedded\n   Project project;\n   @Relation(\n           entity = Project.class,\n           parentColumn = &quot;id&quot;,\n           entityColumn = &quot;id&quot;,\n           associateBy = @Junction(value = Project_Hierarchy.class,parentColumn = &quot;parent_project&quot;, entityColumn = &quot;child_project&quot;)\n   )\n   List&lt;Project&gt; nestedProject;\n}\n</code></pre>\n<ul>\n<li>the associate by  and Junction combination is how Room knows to do the join (actually it is an equivalent to a join that is used)</li>\n</ul>\n<p>Some methods in an <code>@Dao</code> annotated <strong>interface</strong> so they are implicitly abstract <strong>BUT</strong> cannot have bodies.</p>\n<p>An abstract class, which then requires the DAO methods to be abstract but have bodies can be used and as such is more flexible.</p>\n<pre><code>@Dao\ninterface AllDAOs {\n    @Insert(onConflict = OnConflictStrategy.IGNORE)\n    long insert(Project project);\n    @Insert(onConflict = OnConflictStrategy.IGNORE)\n    long insert(Project_Hierarchy project_hierarchy);\n    @Transaction\n    @Query(&quot;SELECT * FROM project&quot;)\n    List&lt;ProjectWithFirstLevelNestedProjects&gt; getAllProjectsWithFirstLevelProjects();\n}\n</code></pre>\n<ul>\n<li>note the last method and it's apparent simplicity</li>\n</ul>\n<p>Putting it all together from a Room perspective is the <code>@Database</code> annotated class:-</p>\n<pre><code>@Database(entities = {Project.class,Project_Hierarchy.class},exportSchema = false,version = 1)\nabstract class TheDatabase extends RoomDatabase {\n\n    abstract AllDAOs getAllDAOs();\n\n    private static volatile TheDatabase instance;\n    static TheDatabase getInstance(Context context) {\n        if (instance==null) {\n            instance = Room.databaseBuilder(context,TheDatabase.class,&quot;the_database.db&quot;)\n                    .allowMainThreadQueries()\n                    .build();\n        }\n        return instance;\n    }\n}\n</code></pre>\n<ul>\n<li>note that for brevity and convenience <code>.allowMainThreadQueries</code> has been utilised, so the main thread can be used. It is not recommended to use the Main thread for an App this is to be distributed.</li>\n</ul>\n<p>Finally replicating the SQLite, noting that as we are dealing with Objects that the result will be different albeit that the underlying data in the tables will be the same. Some Activity code:-</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n    TheDatabase db;\n    AllDAOs dao;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        db = TheDatabase.getInstance(this);\n        dao = db.getAllDAOs();\n\n        long p1Id = dao.insert(new Project(&quot;P1&quot;,&quot;blah1&quot;));\n        long p2Id = dao.insert(new Project(&quot;P2&quot;,&quot;blah2&quot;));\n        long p3Id = dao.insert(new Project(&quot;P3&quot;,&quot;blah3&quot;));\n        long p4Id = dao.insert(new Project(&quot;P4&quot;,&quot;blah4&quot;));\n        long p5Id = dao.insert(new Project(&quot;P5&quot;,&quot;blah5&quot;));\n        long p6Id = dao.insert(new Project(&quot;P6&quot;,&quot;blah6&quot;));\n        long p7Id = dao.insert(new Project(&quot;P7&quot;,&quot;blah7&quot;));\n        long p8Id = dao.insert(new Project(&quot;P8&quot;,&quot;blah8&quot;));\n        long p9Id = dao.insert(new Project(&quot;P9&quot;,&quot;blah9&quot;));\n\n        dao.insert(new Project_Hierarchy(p1Id,p2Id));\n        dao.insert(new Project_Hierarchy(p1Id,p3Id));\n        dao.insert(new Project_Hierarchy(p4Id,p5Id));\n        dao.insert(new Project_Hierarchy(p2Id,p6Id));\n        dao.insert(new Project_Hierarchy(p4Id,p7Id));\n        dao.insert(new Project_Hierarchy(p6Id,p8Id));\n        dao.insert(new Project_Hierarchy(p4Id,p6Id));\n        logProjectsWithFirstLevelNestings(dao.getAllProjectsWithFirstLevelProjects());\n    }\n\n    void logProjectsWithFirstLevelNestings(List&lt;ProjectWithFirstLevelNestedProjects&gt; nestings) {\n        StringBuilder sb = new StringBuilder();\n        for (ProjectWithFirstLevelNestedProjects pwflnp: nestings) {\n            sb = new StringBuilder();\n            for (Project project: pwflnp.nestedProject) {\n                sb.append(&quot;\\n\\tNested Project Name is &quot;).append(project.name).append(&quot; ETC is &quot;).append(project.etc).append(&quot; ID is &quot;).append(project.id);\n            }\n            Log.d(&quot;DBINFO&quot;,\n                    &quot;Project is &quot; + pwflnp.project.name +\n                            &quot; ETC is &quot; + pwflnp.project.etc +\n                            &quot; ID is &quot; + pwflnp.project.id +\n                            &quot;. It has &quot; + pwflnp.nestedProject.size() + &quot; First Level Nested Projects; They are:-&quot; +\n                            sb\n            );\n        }\n    }\n}\n</code></pre>\n<p><strong>The Result</strong></p>\n<p>The output to the Log is:-</p>\n<pre><code>D/DBINFO: Project is P1 ETC is blah1 ID is 1. It has 2 First Level Nested Projects; They are:-\n        Nested Project Name is P2 ETC is blah2 ID is 2\n        Nested Project Name is P3 ETC is blah3 ID is 3\n        \n        \nD/DBINFO: Project is P2 ETC is blah2 ID is 2. It has 1 First Level Nested Projects; They are:-\n        Nested Project Name is P6 ETC is blah6 ID is 6\n        \n        \nD/DBINFO: Project is P3 ETC is blah3 ID is 3. It has 0 First Level Nested Projects; They are:-\nD/DBINFO: Project is P4 ETC is blah4 ID is 4. It has 3 First Level Nested Projects; They are:-\n        Nested Project Name is P5 ETC is blah5 ID is 5\n        Nested Project Name is P6 ETC is blah6 ID is 6\n        Nested Project Name is P7 ETC is blah7 ID is 7\n        \n        \nD/DBINFO: Project is P5 ETC is blah5 ID is 5. It has 0 First Level Nested Projects; They are:-\nD/DBINFO: Project is P6 ETC is blah6 ID is 6. It has 1 First Level Nested Projects; They are:-\n        Nested Project Name is P8 ETC is blah8 ID is 8\n        \n        \nD/DBINFO: Project is P7 ETC is blah7 ID is 7. It has 0 First Level Nested Projects; They are:-\nD/DBINFO: Project is P8 ETC is blah8 ID is 8. It has 0 First Level Nested Projects; They are:-\nD/DBINFO: Project is P9 ETC is blah9 ID is 9. It has 0 First Level Nested Projects; They are:-\n</code></pre>\n<p>This is clearly different to the original output. However the nestings are the equivalent and furthermore all Projects, nestings or not, have been output.</p>\n"}],"owner":{"account_id":17070296,"reputation":73,"user_id":13246574,"display_name":"ndaniel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75974597,"answer_count":1,"score":1,"last_activity_date":1681106035,"creation_date":1681058270,"question_id":75971714,"body_markdown":"I am currently trying to develop a time tracker app for Android. For that purpose, I want to store three things:\r\n* Projects\r\n* Tasks\r\n* Time Intervals\r\n\r\nSince I want to support nested projects and tasks, I need to be able to represent both using some hierarchical SQL schema. For now, I have chosen to go with an adjacency list due to its simplicity. The Android docs recommend to use Android Room, which is what I am going with for now.\r\n\r\nMy current goal is to implement and test the data entity and DAO for an adjacency list once, such that I can simply reuse it for the project and task database entities.\r\n\r\nI am unsure about how to properly define the most general adjacency list in Android Room. In particular, should the entities/DAOs be abstract? More importantly, how do I deal with the fact that the name of the table for project and task is different from the one I would use for the Adjacency List?\r\n\r\n\r\n```\r\n@Entity(foreignKeys = @ForeignKey(entity = AdjacencyList.class, parentColumns = &quot;id&quot;, childColumns = &quot;parent&quot;, onDelete = CASCADE, onUpdate = CASCADE, deferred = false))\r\npublic class AdjacencyList {\r\n    @PrimaryKey\r\n    public int id;\r\n    public int parent;\r\n}\r\n\r\n@Dao\r\npublic interface AdjacencyListDao {\r\n    // Queries will be coupled to the name adjacency_list\r\n    // is there a way to generalize this?\r\n    @Query(&quot;SELECT * FROM adjacency_list&quot;)\r\n    List&lt;User&gt; getAll();\r\n}\r\n\r\n```","title":"How can I properly implement an extendable adjacency list database in Android Room?","body":"<p>I am currently trying to develop a time tracker app for Android. For that purpose, I want to store three things:</p>\n<ul>\n<li>Projects</li>\n<li>Tasks</li>\n<li>Time Intervals</li>\n</ul>\n<p>Since I want to support nested projects and tasks, I need to be able to represent both using some hierarchical SQL schema. For now, I have chosen to go with an adjacency list due to its simplicity. The Android docs recommend to use Android Room, which is what I am going with for now.</p>\n<p>My current goal is to implement and test the data entity and DAO for an adjacency list once, such that I can simply reuse it for the project and task database entities.</p>\n<p>I am unsure about how to properly define the most general adjacency list in Android Room. In particular, should the entities/DAOs be abstract? More importantly, how do I deal with the fact that the name of the table for project and task is different from the one I would use for the Adjacency List?</p>\n<pre><code>@Entity(foreignKeys = @ForeignKey(entity = AdjacencyList.class, parentColumns = &quot;id&quot;, childColumns = &quot;parent&quot;, onDelete = CASCADE, onUpdate = CASCADE, deferred = false))\npublic class AdjacencyList {\n    @PrimaryKey\n    public int id;\n    public int parent;\n}\n\n@Dao\npublic interface AdjacencyListDao {\n    // Queries will be coupled to the name adjacency_list\n    // is there a way to generalize this?\n    @Query(&quot;SELECT * FROM adjacency_list&quot;)\n    List&lt;User&gt; getAll();\n}\n\n</code></pre>\n"},{"tags":["java","configuration","spring-security"],"comments":[{"owner":{"account_id":246686,"reputation":58068,"user_id":520957,"accept_rate":94,"display_name":"J&#233;r&#244;me Verstrynge"},"score":0,"creation_date":1342799736,"post_id":11581058,"comment_id":15325788,"body_markdown":"I have posted what I believe to be the correct answer to my questions. I&#39;ll give it some time for experts to give their input/feedback if necessary.","body":"I have posted what I believe to be the correct answer to my questions. I&#39;ll give it some time for experts to give their input/feedback if necessary."}],"answers":[{"tags":[],"owner":{"account_id":312560,"reputation":1308,"user_id":626698,"accept_rate":75,"display_name":"Mark Bakker"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1342794384,"creation_date":1342794384,"answer_id":11581349,"question_id":11581058,"body_markdown":"I use the following config with a custom auth providerl;\r\n\r\n\r\n\t\t&lt;authentication-manager&gt;\r\n\r\n\t\t\t&lt;authentication-provider user-service-ref=&quot;myUserDetailsService&quot;&gt;\r\n\t\t\t\t&lt;password-encoder hash=&quot;md5&quot;&gt;\r\n\t\t\t\t\t&lt;salt-source user-property=&quot;username&quot; /&gt;\r\n\t\t\t\t&lt;/password-encoder&gt;\r\n\t\t\t&lt;/authentication-provider&gt;\r\n\t\t&lt;/authentication-manager&gt;\r\n\r\n\t\t&lt;beans:bean id=&quot;myUserDetailsService&quot; autowire=&quot;byType&quot; class=&quot;my.user.UserDetailsServiceImpl&quot;&gt;\r\n\t\t\t&lt;beans:property name=&quot;userManagementService&quot; ref=&quot;userManagementService&quot;&gt;&lt;/beans:property&gt;\r\n\t\t&lt;/beans:bean&gt;\r\n\r\n","title":"How to set-up and configure a ProviderManager using Spring Security namespace?","body":"<p>I use the following config with a custom auth providerl;</p>\n\n<pre><code>    &lt;authentication-manager&gt;\n\n        &lt;authentication-provider user-service-ref=\"myUserDetailsService\"&gt;\n            &lt;password-encoder hash=\"md5\"&gt;\n                &lt;salt-source user-property=\"username\" /&gt;\n            &lt;/password-encoder&gt;\n        &lt;/authentication-provider&gt;\n    &lt;/authentication-manager&gt;\n\n    &lt;beans:bean id=\"myUserDetailsService\" autowire=\"byType\" class=\"my.user.UserDetailsServiceImpl\"&gt;\n        &lt;beans:property name=\"userManagementService\" ref=\"userManagementService\"&gt;&lt;/beans:property&gt;\n    &lt;/beans:bean&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":246686,"reputation":58068,"user_id":520957,"accept_rate":94,"display_name":"J&#233;r&#244;me Verstrynge"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1342799655,"creation_date":1342799655,"answer_id":11582846,"question_id":11581058,"body_markdown":"&gt; In other words, will such configuration automatically create an\r\n&gt; instance of ProviderManager:\r\n\r\n\r\nAccording to section B2 of the appendix, the answer is yes.\r\n\r\n&gt; Assuming I would want to plug my own implementation of\r\n&gt; AuthenticationManager, how would I configure this using the namespace?\r\n\r\n\r\nAccording to section B.3.1:\r\n\r\n    &lt;global-method-security authentication-manager-ref=&quot;...&quot; &gt;\r\n\r\n\r\n&gt; What is the right way to declare the list of AuthenticationProvider?\r\n\r\nFrom a [blog post][1], instead of using `&lt;authentication-manager&gt; ... &lt;/authentication-manager&gt;`, one should use something like similar to this:\r\n\r\n    &lt;bean id=&quot;authenticationManager&quot; class=&quot;org.springframework.security.authentication.ProviderManager&quot;&gt;\r\n        &lt;property name=&quot;providers&quot;&gt;\r\n            &lt;list&gt;\r\n                &lt;ref bean=&quot;authenticationProvider&quot; /&gt;\r\n                &lt;ref bean=&quot;anonymousProvider&quot; /&gt;\r\n            &lt;/list&gt;\r\n        &lt;/property&gt;\r\n    &lt;/bean&gt;\r\n \r\n    &lt;bean id=&quot;authenticationProvider&quot; class=&quot;org.springframework.security.authentication.dao.DaoAuthenticationProvider&quot;&gt;\r\n        &lt;property name=&quot;passwordEncoder&quot;&gt;\r\n            &lt;bean class=&quot;org.springframework.security.authentication.encoding.Md5PasswordEncoder&quot; /&gt;\r\n        &lt;/property&gt;\r\n        &lt;property name=&quot;userDetailsService&quot; ref=&quot;userService&quot; /&gt;\r\n    &lt;/bean&gt;\r\n \r\n    &lt;bean id=&quot;anonymousProvider&quot; class=&quot;org.springframework.security.authentication.AnonymousAuthenticationProvider&quot;&gt;\r\n        &lt;property name=&quot;key&quot; value=&quot;SomeUniqueKeyForThisApplication&quot; /&gt;\r\n    &lt;/bean&gt;\r\n\r\n\r\n  [1]: http://blog.springsource.org/2010/03/06/behind-the-spring-security-namespace/","title":"How to set-up and configure a ProviderManager using Spring Security namespace?","body":"<blockquote>\n  <p>In other words, will such configuration automatically create an\n  instance of ProviderManager:</p>\n</blockquote>\n\n<p>According to section B2 of the appendix, the answer is yes.</p>\n\n<blockquote>\n  <p>Assuming I would want to plug my own implementation of\n  AuthenticationManager, how would I configure this using the namespace?</p>\n</blockquote>\n\n<p>According to section B.3.1:</p>\n\n<pre><code>&lt;global-method-security authentication-manager-ref=\"...\" &gt;\n</code></pre>\n\n<blockquote>\n  <p>What is the right way to declare the list of AuthenticationProvider?</p>\n</blockquote>\n\n<p>From a <a href=\"http://blog.springsource.org/2010/03/06/behind-the-spring-security-namespace/\" rel=\"nofollow\">blog post</a>, instead of using <code>&lt;authentication-manager&gt; ... &lt;/authentication-manager&gt;</code>, one should use something like similar to this:</p>\n\n<pre><code>&lt;bean id=\"authenticationManager\" class=\"org.springframework.security.authentication.ProviderManager\"&gt;\n    &lt;property name=\"providers\"&gt;\n        &lt;list&gt;\n            &lt;ref bean=\"authenticationProvider\" /&gt;\n            &lt;ref bean=\"anonymousProvider\" /&gt;\n        &lt;/list&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"authenticationProvider\" class=\"org.springframework.security.authentication.dao.DaoAuthenticationProvider\"&gt;\n    &lt;property name=\"passwordEncoder\"&gt;\n        &lt;bean class=\"org.springframework.security.authentication.encoding.Md5PasswordEncoder\" /&gt;\n    &lt;/property&gt;\n    &lt;property name=\"userDetailsService\" ref=\"userService\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"anonymousProvider\" class=\"org.springframework.security.authentication.AnonymousAuthenticationProvider\"&gt;\n    &lt;property name=\"key\" value=\"SomeUniqueKeyForThisApplication\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25995041,"reputation":21,"user_id":19706579,"display_name":"Prashik Hingaspure"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1681105289,"creation_date":1681105289,"answer_id":75974543,"question_id":11581058,"body_markdown":"These answers are outdated. Sprinboot3 and Spring security 6 doesnot support these configuration any more","title":"How to set-up and configure a ProviderManager using Spring Security namespace?","body":"<p>These answers are outdated. Sprinboot3 and Spring security 6 doesnot support these configuration any more</p>\n"}],"owner":{"account_id":246686,"reputation":58068,"user_id":520957,"accept_rate":94,"display_name":"J&#233;r&#244;me Verstrynge"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15077,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":11582846,"answer_count":3,"score":7,"last_activity_date":1681105289,"creation_date":1342793296,"question_id":11581058,"body_markdown":"Spring documentation says that `ProviderManager` is the default implementation of the `AuthenticationManager`, but is an instance of `ProviderManager` automatically created and wired by the security namespace?\r\n\r\nIn other words, will such configuration automatically create an instance of `ProviderManager`:\r\n\r\n    &lt;authentication-manager&gt;\r\n        &lt;authentication-provider&gt;\r\n           &lt;password-encoder hash=&quot;md5&quot;/&gt;\r\n           &lt;jdbc-user-service data-source-ref=&quot;dataSource&quot;/&gt;\r\n        &lt;/authentication-provider&gt;\r\n    &lt;/authentication-manager&gt;\r\n\r\nElse, what do I need to do (or declare)?\r\n\r\nAssuming I would want to plug my own implementation of `AuthenticationManager`, how would I configure this using the namespace?\r\n\r\nI also want to specify which `AuthenticationProvider` should be registered in the `ProviderManager`. I have found the following piece of configuration code:\r\n\r\n    &lt;bean id=&quot;authenticationManager&quot;\r\n        class=&quot;org.springframework.security.authentication.ProviderManager&quot;&gt;\r\n        &lt;property name=&quot;providers&quot;&gt;\r\n            &lt;list&gt;\r\n                &lt;ref local=&quot;daoAuthenticationProvider&quot;/&gt;\r\n                &lt;ref local=&quot;anonymousAuthenticationProvider&quot;/&gt;\r\n            &lt;/list&gt; \r\n        &lt;/property&gt;\r\n    &lt;/bean&gt;\r\n\r\nBut is it enough? What is the right way to declare the list of `AuthenticationProvider`? Documentation is not very clear and complete regarding this issue. \r\n\r\n\r\n\r\n","title":"How to set-up and configure a ProviderManager using Spring Security namespace?","body":"<p>Spring documentation says that <code>ProviderManager</code> is the default implementation of the <code>AuthenticationManager</code>, but is an instance of <code>ProviderManager</code> automatically created and wired by the security namespace?</p>\n\n<p>In other words, will such configuration automatically create an instance of <code>ProviderManager</code>:</p>\n\n<pre><code>&lt;authentication-manager&gt;\n    &lt;authentication-provider&gt;\n       &lt;password-encoder hash=\"md5\"/&gt;\n       &lt;jdbc-user-service data-source-ref=\"dataSource\"/&gt;\n    &lt;/authentication-provider&gt;\n&lt;/authentication-manager&gt;\n</code></pre>\n\n<p>Else, what do I need to do (or declare)?</p>\n\n<p>Assuming I would want to plug my own implementation of <code>AuthenticationManager</code>, how would I configure this using the namespace?</p>\n\n<p>I also want to specify which <code>AuthenticationProvider</code> should be registered in the <code>ProviderManager</code>. I have found the following piece of configuration code:</p>\n\n<pre><code>&lt;bean id=\"authenticationManager\"\n    class=\"org.springframework.security.authentication.ProviderManager\"&gt;\n    &lt;property name=\"providers\"&gt;\n        &lt;list&gt;\n            &lt;ref local=\"daoAuthenticationProvider\"/&gt;\n            &lt;ref local=\"anonymousAuthenticationProvider\"/&gt;\n        &lt;/list&gt; \n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>But is it enough? What is the right way to declare the list of <code>AuthenticationProvider</code>? Documentation is not very clear and complete regarding this issue. </p>\n"},{"tags":["java","android","networking"],"answers":[{"tags":[],"owner":{"account_id":1931338,"reputation":192,"user_id":1740663,"display_name":"chksr"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1539344467,"creation_date":1508102114,"answer_id":46760070,"question_id":39823886,"body_markdown":"my way (Android &gt;= 22)\r\n    \r\n   \r\n\r\n    int getDefaultDataSubscriptionId(final SubscriptionManager subscriptionManager)  {\r\n            if (android.os.Build.VERSION.SDK_INT &gt;= 24)  {\r\n                int nDataSubscriptionId = SubscriptionManager.getDefaultDataSubscriptionId();\r\n    \r\n                if (nDataSubscriptionId != SubscriptionManager.INVALID_SUBSCRIPTION_ID)  {\r\n                    return (nDataSubscriptionId);\r\n                }\r\n            }\r\n            \r\n            try  {\r\n                Class&lt;?&gt; subscriptionClass = Class.forName(subscriptionManager.getClass().getName());\r\n                try {\r\n                    Method getDefaultDataSubscriptionId = subscriptionClass.getMethod(&quot;getDefaultDataSubId&quot;);\r\n    \r\n                    try {\r\n                        return ((int) getDefaultDataSubscriptionId.invoke(subscriptionManager));\r\n                    }\r\n                    catch (IllegalAccessException e1) {\r\n                        e1.printStackTrace();\r\n                    } catch (InvocationTargetException e1) {\r\n                        e1.printStackTrace();\r\n                    }\r\n                } catch (NoSuchMethodException e1) {\r\n                    e1.printStackTrace();\r\n                }\r\n            } catch (ClassNotFoundException e1) {\r\n                e1.printStackTrace();\r\n            }\r\n            \r\n            return (SubscriptionManager.INVALID_SUBSCRIPTION_ID);\r\n        }\r\n    \r\n        @TargetApi(22)\r\n        public String getUIText22(final TelephonyManager telephonyManager) {\r\n            SubscriptionManager subscriptionManager = (SubscriptionManager) getContext().getApplicationContext().getSystemService(Context.TELEPHONY_SUBSCRIPTION_SERVICE);\r\n    \r\n            int nDataSubscriptionId = getDefaultDataSubscriptionId(subscriptionManager);\r\n    \r\n            if (nDataSubscriptionId != SubscriptionManager.INVALID_SUBSCRIPTION_ID) {\r\n                SubscriptionInfo si = subscriptionManager.getActiveSubscriptionInfo(nDataSubscriptionId);\r\n    \r\n                if (si != null) {\r\n                    return (si.getCarrierName().toString());\r\n                }\r\n            }\r\n        }\r\n\r\n","title":"Check mobile data is on from sim one or sim two android","body":"<p>my way (Android >= 22)</p>\n\n<pre><code>int getDefaultDataSubscriptionId(final SubscriptionManager subscriptionManager)  {\n        if (android.os.Build.VERSION.SDK_INT &gt;= 24)  {\n            int nDataSubscriptionId = SubscriptionManager.getDefaultDataSubscriptionId();\n\n            if (nDataSubscriptionId != SubscriptionManager.INVALID_SUBSCRIPTION_ID)  {\n                return (nDataSubscriptionId);\n            }\n        }\n\n        try  {\n            Class&lt;?&gt; subscriptionClass = Class.forName(subscriptionManager.getClass().getName());\n            try {\n                Method getDefaultDataSubscriptionId = subscriptionClass.getMethod(\"getDefaultDataSubId\");\n\n                try {\n                    return ((int) getDefaultDataSubscriptionId.invoke(subscriptionManager));\n                }\n                catch (IllegalAccessException e1) {\n                    e1.printStackTrace();\n                } catch (InvocationTargetException e1) {\n                    e1.printStackTrace();\n                }\n            } catch (NoSuchMethodException e1) {\n                e1.printStackTrace();\n            }\n        } catch (ClassNotFoundException e1) {\n            e1.printStackTrace();\n        }\n\n        return (SubscriptionManager.INVALID_SUBSCRIPTION_ID);\n    }\n\n    @TargetApi(22)\n    public String getUIText22(final TelephonyManager telephonyManager) {\n        SubscriptionManager subscriptionManager = (SubscriptionManager) getContext().getApplicationContext().getSystemService(Context.TELEPHONY_SUBSCRIPTION_SERVICE);\n\n        int nDataSubscriptionId = getDefaultDataSubscriptionId(subscriptionManager);\n\n        if (nDataSubscriptionId != SubscriptionManager.INVALID_SUBSCRIPTION_ID) {\n            SubscriptionInfo si = subscriptionManager.getActiveSubscriptionInfo(nDataSubscriptionId);\n\n            if (si != null) {\n                return (si.getCarrierName().toString());\n            }\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5438128,"reputation":11707,"user_id":4326936,"accept_rate":39,"display_name":"alijandro"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1591965443,"creation_date":1591965443,"answer_id":62344442,"question_id":39823886,"body_markdown":"Here is a simple solution to get current active data sim operator for dual sim environment. It works after api level 22.\r\n\r\n```\r\n    public static String getDataSimOperator(Context context) {\r\n        if (context == null) {\r\n            return null;\r\n        }\r\n\r\n        TelephonyManager tm = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);\r\n        if (tm != null) {\r\n            if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.LOLLIPOP_MR1) {\r\n                if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.N) {\r\n                    int dataSubId = SubscriptionManager.getDefaultDataSubscriptionId();\r\n                    TelephonyManager dataSimManager = tm.createForSubscriptionId(dataSubId);\r\n                    return dataSimManager.getSimOperator();\r\n                } else {\r\n                    String operator = getDataSimOperatorBeforeN(context);\r\n                    if (operator != null) {\r\n                        return operator;\r\n                    } else {\r\n                        return tm.getSimOperator();\r\n                    }\r\n                }\r\n            } else {\r\n                return tm.getSimOperator();\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    @RequiresApi(api = Build.VERSION_CODES.LOLLIPOP_MR1)\r\n    private static String getDataSimOperatorBeforeN(Context context) {\r\n        if (context == null) {\r\n            return null;\r\n        }\r\n\r\n        int dataSubId = -1;\r\n        try {\r\n            Method getDefaultDataSubId = SubscriptionManager.class.getDeclaredMethod(&quot;getDefaultDataSubId&quot;);\r\n            if (getDefaultDataSubId != null) {\r\n                getDefaultDataSubId.setAccessible(true);\r\n                dataSubId = (int) getDefaultDataSubId.invoke(null);\r\n            }\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n        if (dataSubId != -1) {\r\n            SubscriptionManager sm = (SubscriptionManager) context.getSystemService(Context.TELEPHONY_SUBSCRIPTION_SERVICE);\r\n            if (sm != null &amp;&amp; ActivityCompat.checkSelfPermission(context, Manifest.permission.READ_PHONE_STATE)\r\n                    == PackageManager.PERMISSION_GRANTED) {\r\n                SubscriptionInfo si = sm.getActiveSubscriptionInfo(dataSubId);\r\n                if (si != null) {\r\n                    // format keep the same with android.telephony.TelephonyManager#getSimOperator\r\n                    // MCC + MNC format\r\n                    return String.valueOf(si.getMcc()) + si.getMnc();\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n```","title":"Check mobile data is on from sim one or sim two android","body":"<p>Here is a simple solution to get current active data sim operator for dual sim environment. It works after api level 22.</p>\n\n<pre><code>    public static String getDataSimOperator(Context context) {\n        if (context == null) {\n            return null;\n        }\n\n        TelephonyManager tm = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);\n        if (tm != null) {\n            if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.LOLLIPOP_MR1) {\n                if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.N) {\n                    int dataSubId = SubscriptionManager.getDefaultDataSubscriptionId();\n                    TelephonyManager dataSimManager = tm.createForSubscriptionId(dataSubId);\n                    return dataSimManager.getSimOperator();\n                } else {\n                    String operator = getDataSimOperatorBeforeN(context);\n                    if (operator != null) {\n                        return operator;\n                    } else {\n                        return tm.getSimOperator();\n                    }\n                }\n            } else {\n                return tm.getSimOperator();\n            }\n        }\n        return null;\n    }\n\n    @RequiresApi(api = Build.VERSION_CODES.LOLLIPOP_MR1)\n    private static String getDataSimOperatorBeforeN(Context context) {\n        if (context == null) {\n            return null;\n        }\n\n        int dataSubId = -1;\n        try {\n            Method getDefaultDataSubId = SubscriptionManager.class.getDeclaredMethod(\"getDefaultDataSubId\");\n            if (getDefaultDataSubId != null) {\n                getDefaultDataSubId.setAccessible(true);\n                dataSubId = (int) getDefaultDataSubId.invoke(null);\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        if (dataSubId != -1) {\n            SubscriptionManager sm = (SubscriptionManager) context.getSystemService(Context.TELEPHONY_SUBSCRIPTION_SERVICE);\n            if (sm != null &amp;&amp; ActivityCompat.checkSelfPermission(context, Manifest.permission.READ_PHONE_STATE)\n                    == PackageManager.PERMISSION_GRANTED) {\n                SubscriptionInfo si = sm.getActiveSubscriptionInfo(dataSubId);\n                if (si != null) {\n                    // format keep the same with android.telephony.TelephonyManager#getSimOperator\n                    // MCC + MNC format\n                    return String.valueOf(si.getMcc()) + si.getMnc();\n                }\n            }\n        }\n        return null;\n    }\n</code></pre>\n"}],"owner":{"account_id":8391539,"reputation":11,"user_id":6300122,"display_name":"looie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2649,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1681105233,"creation_date":1475462282,"question_id":39823886,"body_markdown":"Is there anyway to check mobile data is active from sim 1 or sim 2 in Android programmatically?? \r\n\r\nAlso i want to get the carrier provider in which the data is active. \r\n\r\nEq : \r\nsim 1 : carrier 1\r\nSim 2 : carrier 2\r\n\r\nIf data is active on sim 2 \r\nIt should return the carrier 2 name. \r\n\r\n","title":"Check mobile data is on from sim one or sim two android","body":"<p>Is there anyway to check mobile data is active from sim 1 or sim 2 in Android programmatically?? </p>\n\n<p>Also i want to get the carrier provider in which the data is active. </p>\n\n<p>Eq : \nsim 1 : carrier 1\nSim 2 : carrier 2</p>\n\n<p>If data is active on sim 2 \nIt should return the carrier 2 name. </p>\n"},{"tags":["java","for-loop","while-loop"],"answers":[{"tags":[],"owner":{"account_id":1040676,"reputation":61,"user_id":1046766,"display_name":"bulgakov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681104844,"creation_date":1681104413,"answer_id":75974482,"question_id":75974447,"body_markdown":"```java\r\npublic static void main(String[] args) {\r\n    int sum = 0;\r\n\r\n    Scanner sc = new Scanner(System.in);\r\n\r\n    for (int counter = 1; counter &lt;= 5; counter++) {\r\n        System.out.println(&quot;Enter number #&quot; + counter + &quot;:&quot;);\r\n        String nextNum = sc.nextLine();\r\n\r\n        try {\r\n            int num = Integer.parseInt(nextNum);\r\n            sum += num;\r\n        } catch (NumberFormatException e) {\r\n            System.out.println(&quot;Invalid Number!&quot;);\r\n            counter--;\r\n        }\r\n    }\r\n}\r\n```","title":"How to convert this WHILE LOOP to FOR LOOP?","body":"<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n    int sum = 0;\n\n    Scanner sc = new Scanner(System.in);\n\n    for (int counter = 1; counter &lt;= 5; counter++) {\n        System.out.println(&quot;Enter number #&quot; + counter + &quot;:&quot;);\n        String nextNum = sc.nextLine();\n\n        try {\n            int num = Integer.parseInt(nextNum);\n            sum += num;\n        } catch (NumberFormatException e) {\n            System.out.println(&quot;Invalid Number!&quot;);\n            counter--;\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":25654681,"reputation":1,"user_id":19421328,"display_name":"Eriz Rai"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1681285239,"answer_count":1,"score":-2,"last_activity_date":1681104844,"creation_date":1681103944,"question_id":75974447,"body_markdown":"```java\r\npackage scannerConsole;\r\n\r\nimport java.util.Scanner;\r\n\r\npublic class ReadingInputChallenge {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tint counter = 1;\r\n\t\tint sum = 0;\r\n\r\n\t\tScanner sc = new Scanner(System.in);\r\n\r\n\t\twhile (counter &lt;= 5) {\r\n\t\t\tSystem.out.println(&quot;Enter number #&quot; + counter + &quot;:&quot;);\r\n\t\t\tString nextNum = sc.nextLine();\r\n\r\n\t\t\ttry {\r\n\t\t\t\tint num = Integer.parseInt(nextNum);\r\n\t\t\t\tcounter++;\r\n\t\t\t\tsum += num;\r\n\t\t\t} catch (NumberFormatException e) {\r\n\t\t\t\tSystem.out.println(&quot;Invalid Number!&quot;);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n```","title":"How to convert this WHILE LOOP to FOR LOOP?","body":"<pre class=\"lang-java prettyprint-override\"><code>package scannerConsole;\n\nimport java.util.Scanner;\n\npublic class ReadingInputChallenge {\n\n    public static void main(String[] args) {\n        int counter = 1;\n        int sum = 0;\n\n        Scanner sc = new Scanner(System.in);\n\n        while (counter &lt;= 5) {\n            System.out.println(&quot;Enter number #&quot; + counter + &quot;:&quot;);\n            String nextNum = sc.nextLine();\n\n            try {\n                int num = Integer.parseInt(nextNum);\n                counter++;\n                sum += num;\n            } catch (NumberFormatException e) {\n                System.out.println(&quot;Invalid Number!&quot;);\n            }\n        }\n\n    }\n\n}\n</code></pre>\n"},{"tags":["java","format","locale","currency","price"],"answers":[{"tags":[],"owner":{"account_id":19359275,"reputation":81,"user_id":14154849,"display_name":"Kaustubh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681104191,"creation_date":1681098229,"answer_id":75974143,"question_id":75973896,"body_markdown":"1) You can create a class like this and have methods to return the value you want.\r\n\r\n        public class Price {\r\n        private String currency;\r\n        private String separator;\r\n        private int wholePrice;\r\n        private int fractionalPrice;\r\n    \r\n        public Price(String currency, String separator, int wholePrice, int fractionalPrice) {\r\n            this.currency = currency;\r\n            this.separator = separator;\r\n            this.wholePrice = wholePrice;\r\n            this.fractionalPrice = fractionalPrice;\r\n        }\r\n    \r\n        public String getCurrency() {\r\n            return currency;\r\n        }\r\n    \r\n        public String getSeparator() {\r\n            return separator;\r\n        }\r\n    \r\n        public int getWholePrice() {\r\n            return wholePrice;\r\n        }\r\n    \r\n        public int getFractionalPrice() {\r\n            return fractionalPrice;\r\n        }\r\n        }\r\n\r\nOr if immutable, use a [record][1]. \r\n\r\n    record Price ( String currency, String separator, int wholePrice, int fractionalPrice ) {}\r\n    \r\n\r\n2) And then have this code to update your class and this way you will be able to access any attribute as required.\r\n\r\n    ```String priceStr = &quot;$ 1213.22&quot;;\r\n    Pattern pattern = Pattern.compile(&quot;^(\\\\p{Sc})\\\\s*(\\\\d+)([,.])(\\\\d+)$&quot;);\r\n    Matcher matcher = pattern.matcher(priceStr);\r\n    \r\n    if (matcher.find()) {\r\n        String currency = matcher.group(1);\r\n        String separator = matcher.group(3);\r\n        int wholePrice = Integer.parseInt(matcher.group(2));\r\n        int fractionalPrice = Integer.parseInt(matcher.group(4));\r\n        Price price = new Price(currency, separator, wholePrice, fractionalPrice);\r\n        System.out.println(&quot;Currency: &quot; + price.getCurrency());\r\n        System.out.println(&quot;Separator: &quot; + price.getSeparator());\r\n        System.out.println(&quot;Whole price: &quot; + price.getWholePrice());\r\n        System.out.println(&quot;Fractional price: &quot; + price.getFractionalPrice());\r\n    } else {\r\n        System.out.println(&quot;Invalid price format&quot;);\r\n    }\r\n\r\n\r\nHope This helps\r\n\r\n\r\n  [1]: https://openjdk.org/jeps/395","title":"How to extract currency and number attributes from a sample price in java","body":"<ol>\n<li><p>You can create a class like this and have methods to return the value you want.</p>\n<pre><code> public class Price {\n private String currency;\n private String separator;\n private int wholePrice;\n private int fractionalPrice;\n\n public Price(String currency, String separator, int wholePrice, int fractionalPrice) {\n     this.currency = currency;\n     this.separator = separator;\n     this.wholePrice = wholePrice;\n     this.fractionalPrice = fractionalPrice;\n }\n\n public String getCurrency() {\n     return currency;\n }\n\n public String getSeparator() {\n     return separator;\n }\n\n public int getWholePrice() {\n     return wholePrice;\n }\n\n public int getFractionalPrice() {\n     return fractionalPrice;\n }\n }\n</code></pre>\n</li>\n</ol>\n<p>Or if immutable, use a <a href=\"https://openjdk.org/jeps/395\" rel=\"nofollow noreferrer\">record</a>.</p>\n<pre><code>record Price ( String currency, String separator, int wholePrice, int fractionalPrice ) {}\n</code></pre>\n<ol start=\"2\">\n<li><p>And then have this code to update your class and this way you will be able to access any attribute as required.</p>\n<pre><code>Pattern pattern = Pattern.compile(&quot;^(\\\\p{Sc})\\\\s*(\\\\d+)([,.])(\\\\d+)$&quot;);\nMatcher matcher = pattern.matcher(priceStr);\n\nif (matcher.find()) {\n    String currency = matcher.group(1);\n    String separator = matcher.group(3);\n    int wholePrice = Integer.parseInt(matcher.group(2));\n    int fractionalPrice = Integer.parseInt(matcher.group(4));\n    Price price = new Price(currency, separator, wholePrice, fractionalPrice);\n    System.out.println(&quot;Currency: &quot; + price.getCurrency());\n    System.out.println(&quot;Separator: &quot; + price.getSeparator());\n    System.out.println(&quot;Whole price: &quot; + price.getWholePrice());\n    System.out.println(&quot;Fractional price: &quot; + price.getFractionalPrice());\n} else {\n    System.out.println(&quot;Invalid price format&quot;);\n}\n\n\n</code></pre>\n</li>\n</ol>\n<p>Hope This helps</p>\n"}],"owner":{"account_id":26730682,"reputation":1,"user_id":20333085,"display_name":"Siddhant"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":160,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681104191,"creation_date":1681093404,"question_id":75973896,"body_markdown":"I am retrieving different values for my product price in different currencies\r\nEg:\r\n```\r\n$ 1213.22\r\n1213\\.22 $\r\nR$ 1213,22\r\n```\r\nI want to store these values in a formatted Java object such that I can extract:\r\n\r\n1. The currency symbol\r\n2. The separator between whole price and fractional price\r\n3. The whole price\r\n4. The fractional price\r\n\r\nIs there a utility to do this apart from using regex?\r\n\r\n**Solutions explored**\r\n\r\n1. I cant find a way to reverse engineer the below solution so that I can get NumberFormat to accept my retrieved values\r\n\r\n   ```\r\n   java.util.Currency usd = java.util.Currency.getInstance(&quot;USD&quot;);\r\n   java.text.NumberFormat format = java.text.NumberFormat.getCurrencyInstance(Locale.US);\r\n   format.setCurrency(usd);\r\n   ```\r\n\r\n2. Same problem as no.1\r\n \r\n   ```\r\n   StringBuilder builder=new StringBuilder();\r\n   Formatter f=new Formatter(builder);\r\n   f.format(Locale.FRANCE,&quot;%.5f&quot;, -1325.789);\r\n   ```","title":"How to extract currency and number attributes from a sample price in java","body":"<p>I am retrieving different values for my product price in different currencies\nEg:</p>\n<pre><code>$ 1213.22\n1213\\.22 $\nR$ 1213,22\n</code></pre>\n<p>I want to store these values in a formatted Java object such that I can extract:</p>\n<ol>\n<li>The currency symbol</li>\n<li>The separator between whole price and fractional price</li>\n<li>The whole price</li>\n<li>The fractional price</li>\n</ol>\n<p>Is there a utility to do this apart from using regex?</p>\n<p><strong>Solutions explored</strong></p>\n<ol>\n<li><p>I cant find a way to reverse engineer the below solution so that I can get NumberFormat to accept my retrieved values</p>\n<pre><code>java.util.Currency usd = java.util.Currency.getInstance(&quot;USD&quot;);\njava.text.NumberFormat format = java.text.NumberFormat.getCurrencyInstance(Locale.US);\nformat.setCurrency(usd);\n</code></pre>\n</li>\n<li><p>Same problem as no.1</p>\n<pre><code>StringBuilder builder=new StringBuilder();\nFormatter f=new Formatter(builder);\nf.format(Locale.FRANCE,&quot;%.5f&quot;, -1325.789);\n</code></pre>\n</li>\n</ol>\n"},{"tags":["java","encoding"],"comments":[{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":3,"creation_date":1681003823,"post_id":75968378,"comment_id":133989215,"body_markdown":"You don&#39;t need to explicitly add support for other languages.  What you&#39;ve described here _should_ work; which means that there are details that you haven&#39;t told us.  Can you perhaps show us the test code, and the full code for the method that you&#39;re testing?","body":"You don&#39;t need to explicitly add support for other languages.  What you&#39;ve described here <i>should</i> work; which means that there are details that you haven&#39;t told us.  Can you perhaps show us the test code, and the full code for the method that you&#39;re testing?"},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":1,"creation_date":1681004018,"post_id":75968378,"comment_id":133989231,"body_markdown":"Likely you didn&#39;t specify the decoder correctly, so the decoding produces these placeholder characters.  You&#39;ll need to show us the full code.","body":"Likely you didn&#39;t specify the decoder correctly, so the decoding produces these placeholder characters.  You&#39;ll need to show us the full code."},{"owner":{"account_id":28225169,"reputation":35,"user_id":21575309,"display_name":"John_Cena"},"score":0,"creation_date":1681006673,"post_id":75968378,"comment_id":133989420,"body_markdown":"yes I know, that is not the mistake tho I forgot about it while writing example","body":"yes I know, that is not the mistake tho I forgot about it while writing example"},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":3,"creation_date":1681007717,"post_id":75968378,"comment_id":133989469,"body_markdown":"Your question shows code that makes no sense (`String str = str.substring(0, 2);`). Instead of pasting code snippets into your question, show us the complete method that is causing you problems. Help us to help you.","body":"Your question shows code that makes no sense (<code>String str = str.substring(0, 2);</code>). Instead of pasting code snippets into your question, show us the complete method that is causing you problems. Help us to help you."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1681015521,"post_id":75968378,"comment_id":133989926,"body_markdown":"We need a [MCVE](https://stackoverflow.com/help/mcve).","body":"We need a <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>."}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1681058037,"creation_date":1681016746,"answer_id":75968851,"question_id":75968378,"body_markdown":"Just use the call to `substring`. That works, at least in your particular case. \r\n\r\n    System.out.println( &quot;&quot;.substring( 0 , 2 ) );\r\n\r\nSee that code [run at Ideone.com][1].\r\n\r\n&gt;\r\n\r\nYour text is composed of `CYRILLIC SMALL LETTER` characters, defined within the [Cyrillic block in Unicode][2].\r\n\r\nIf your text still does not appear correctly, verify that your console app is set to handle text in [UTF-8][3] encoding. \r\n\r\nIf you are new to character sets and character encoding, read this surprisingly entertaining post, [*The Absolute Minimum Every Software Developer Absolutely, Positively Must Know About Unicode and Character Sets (No Excuses!)*][4]. \r\n\r\n----------\r\n\r\n\r\nUsing `String#substring` does *not* work with all Unicode text. Works only with text composed of characters entirely from the [*Basic Multilingual Plane*][5], the first 64K of the 149,186 characters defined in Unicode. \r\n\r\nTo manipulate all Unicode text, you will need to learn about [code point][6] integers and the inherent complexities of digitally representing text.\r\n\r\n    &quot;&quot;.codePoints().forEach( System.out :: println );\r\n\r\n```none\r\n1085\r\n1072\r\n1096\r\n1077\r\n```\r\n\r\n\r\n  [1]: https://ideone.com/Z1lnsF\r\n  [2]: https://en.wikipedia.org/wiki/List_of_Unicode_characters#Cyrillic\r\n  [3]: https://en.wikipedia.org/wiki/UTF-8\r\n  [4]: https://www.joelonsoftware.com/2003/10/08/the-absolute-minimum-every-software-developer-absolutely-positively-must-know-about-unicode-and-character-sets-no-excuses/\r\n  [5]: https://en.wikipedia.org/wiki/Plane_(Unicode)#Basic_Multilingual_Plane\r\n  [6]: https://en.wikipedia.org/wiki/Code_point","title":"Java - Strings in different languages","body":"<p>Just use the call to <code>substring</code>. That works, at least in your particular case.</p>\n<pre><code>System.out.println( &quot;&quot;.substring( 0 , 2 ) );\n</code></pre>\n<p>See that code <a href=\"https://ideone.com/Z1lnsF\" rel=\"nofollow noreferrer\">run at Ideone.com</a>.</p>\n<blockquote>\n<p></p>\n</blockquote>\n<p>Your text is composed of <code>CYRILLIC SMALL LETTER</code> characters, defined within the <a href=\"https://en.wikipedia.org/wiki/List_of_Unicode_characters#Cyrillic\" rel=\"nofollow noreferrer\">Cyrillic block in Unicode</a>.</p>\n<p>If your text still does not appear correctly, verify that your console app is set to handle text in <a href=\"https://en.wikipedia.org/wiki/UTF-8\" rel=\"nofollow noreferrer\">UTF-8</a> encoding.</p>\n<p>If you are new to character sets and character encoding, read this surprisingly entertaining post, <a href=\"https://www.joelonsoftware.com/2003/10/08/the-absolute-minimum-every-software-developer-absolutely-positively-must-know-about-unicode-and-character-sets-no-excuses/\" rel=\"nofollow noreferrer\"><em>The Absolute Minimum Every Software Developer Absolutely, Positively Must Know About Unicode and Character Sets (No Excuses!)</em></a>.</p>\n<hr />\n<p>Using <code>String#substring</code> does <em>not</em> work with all Unicode text. Works only with text composed of characters entirely from the <a href=\"https://en.wikipedia.org/wiki/Plane_(Unicode)#Basic_Multilingual_Plane\" rel=\"nofollow noreferrer\"><em>Basic Multilingual Plane</em></a>, the first 64K of the 149,186 characters defined in Unicode.</p>\n<p>To manipulate all Unicode text, you will need to learn about <a href=\"https://en.wikipedia.org/wiki/Code_point\" rel=\"nofollow noreferrer\">code point</a> integers and the inherent complexities of digitally representing text.</p>\n<pre><code>&quot;&quot;.codePoints().forEach( System.out :: println );\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>1085\n1072\n1096\n1077\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5512797,"reputation":72,"user_id":4378540,"display_name":"Jinendra"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1681104048,"creation_date":1681104048,"answer_id":75974457,"question_id":75968378,"body_markdown":"To add support for other languages to the function, you need to make sure that the encoding of the String is properly handled.\r\n\r\nFirst, check the encoding of the source file. If it is not in UTF-8 or another encoding that supports the language of the String, you may need to convert the file to the appropriate encoding.\r\n\r\nNext, make sure that the encoding is also handled properly when the String is passed into the function. You can do this by specifying the encoding when converting the String to bytes, like this:\r\n\r\n    byte[] bytes = str.getBytes(&quot;UTF-8&quot;);\r\n    String substring = new String(bytes, begin, end - begin, &quot;UTF-8&quot;);\r\n\r\nFinally, when concatenating the substring to the empty string, make sure that the encoding is also handled properly:\r\n\r\n    result = new String(result.getBytes(&quot;UTF-8&quot;), &quot;UTF-8&quot;);\r\n\r\nBy handling the encoding properly throughout the function, you should be able to correctly handle Strings in languages other than English.","title":"Java - Strings in different languages","body":"<p>To add support for other languages to the function, you need to make sure that the encoding of the String is properly handled.</p>\n<p>First, check the encoding of the source file. If it is not in UTF-8 or another encoding that supports the language of the String, you may need to convert the file to the appropriate encoding.</p>\n<p>Next, make sure that the encoding is also handled properly when the String is passed into the function. You can do this by specifying the encoding when converting the String to bytes, like this:</p>\n<pre><code>byte[] bytes = str.getBytes(&quot;UTF-8&quot;);\nString substring = new String(bytes, begin, end - begin, &quot;UTF-8&quot;);\n</code></pre>\n<p>Finally, when concatenating the substring to the empty string, make sure that the encoding is also handled properly:</p>\n<pre><code>result = new String(result.getBytes(&quot;UTF-8&quot;), &quot;UTF-8&quot;);\n</code></pre>\n<p>By handling the encoding properly throughout the function, you should be able to correctly handle Strings in languages other than English.</p>\n"}],"owner":{"account_id":28225169,"reputation":35,"user_id":21575309,"display_name":"John_Cena"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":187,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1681122016,"answer_count":2,"score":0,"last_activity_date":1681104048,"creation_date":1681003350,"question_id":75968378,"body_markdown":"I have a String in a different language.\r\nFor example:\r\n```String str = &quot;&quot;```\r\nThat String is passed into a function, which makes ```str.substring(begin, end)``` between some indexes and concatenates it to an empty string and returns that string.\r\nLet&#39;s assume that substring is &quot;&quot;.\r\n\r\nI have assertEquals in a test file that tests whether the returned value of the function is equal to &quot;&quot;.\r\nBut it gives me false, because the result of the function is in the form of: &quot;&quot; and not &quot;&quot;.\r\n\r\nHow can I add support for other languages than English to the function?\r\n\r\n```\r\nString str = str.substring(0, 2);\r\nString result = &quot;&quot;;\r\nresult += str;\r\nreturn result;\r\n```","title":"Java - Strings in different languages","body":"<p>I have a String in a different language.\nFor example:\n<code>String str = &quot;&quot;</code>\nThat String is passed into a function, which makes <code>str.substring(begin, end)</code> between some indexes and concatenates it to an empty string and returns that string.\nLet's assume that substring is &quot;&quot;.</p>\n<p>I have assertEquals in a test file that tests whether the returned value of the function is equal to &quot;&quot;.\nBut it gives me false, because the result of the function is in the form of: &quot;&quot; and not &quot;&quot;.</p>\n<p>How can I add support for other languages than English to the function?</p>\n<pre><code>String str = str.substring(0, 2);\nString result = &quot;&quot;;\nresult += str;\nreturn result;\n</code></pre>\n"},{"tags":["java","or-tools"],"answers":[{"tags":[],"owner":{"account_id":13814932,"reputation":9106,"user_id":9971759,"display_name":"Laurent Perron"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681103927,"creation_date":1681103927,"answer_id":75974444,"question_id":75973900,"body_markdown":"The hint for a LP solver is not a set of values, but the basis. Computing the basis from a set of values is not trivial. So the answer is no.","title":"Can a set of initial values be hinted to MPModelProto?","body":"<p>The hint for a LP solver is not a set of values, but the basis. Computing the basis from a set of values is not trivial. So the answer is no.</p>\n"}],"owner":{"account_id":8082685,"reputation":1042,"user_id":6091258,"display_name":"epol"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75974444,"answer_count":1,"score":0,"last_activity_date":1681103927,"creation_date":1681093453,"question_id":75973900,"body_markdown":"I am working with MPModelProto + GLOP. We have implemented an heuristic that continuously runs the linear model while changing some constraints, so by setting a hint for the linear optimizer at each run with the actual solution from the last run would in thesis improve performance.\r\n\r\nI wonder if the following implementation in Java makes sense : it runs fine but I cannot see a sensible difference in performance. \r\n\r\nThe code basically takes the variable values from the previous solution response and plugs it into a **PartialVariableAssignment**, which is then assigned as the **MPModelProto.Builder** solution hint.\r\n\r\n\r\n            PartialVariableAssignment partialVariableAssignment = PartialVariableAssignment.newBuilder()\r\n                    .addAllVarIndex(IntStream\r\n                            .range(0, mpSolutionResponse.getVariableValueCount() - 1)\r\n                            .boxed()\r\n                            .collect(Collectors.toList()))\r\n                    .addAllVarValue(mpSolutionResponse.getVariableValueList())\r\n                    .build();      \r\n\r\n            model.setSolutionHint(partialVariableAssignment);\r\n","title":"Can a set of initial values be hinted to MPModelProto?","body":"<p>I am working with MPModelProto + GLOP. We have implemented an heuristic that continuously runs the linear model while changing some constraints, so by setting a hint for the linear optimizer at each run with the actual solution from the last run would in thesis improve performance.</p>\n<p>I wonder if the following implementation in Java makes sense : it runs fine but I cannot see a sensible difference in performance.</p>\n<p>The code basically takes the variable values from the previous solution response and plugs it into a <strong>PartialVariableAssignment</strong>, which is then assigned as the <strong>MPModelProto.Builder</strong> solution hint.</p>\n<pre><code>        PartialVariableAssignment partialVariableAssignment = PartialVariableAssignment.newBuilder()\n                .addAllVarIndex(IntStream\n                        .range(0, mpSolutionResponse.getVariableValueCount() - 1)\n                        .boxed()\n                        .collect(Collectors.toList()))\n                .addAllVarValue(mpSolutionResponse.getVariableValueList())\n                .build();      \n\n        model.setSolutionHint(partialVariableAssignment);\n</code></pre>\n"},{"tags":["javascript","java","spring-boot"],"comments":[{"owner":{"account_id":15062605,"reputation":967,"user_id":10870817,"display_name":"SoT"},"score":0,"creation_date":1680859853,"post_id":75956020,"comment_id":133971046,"body_markdown":"are you using spring security?","body":"are you using spring security?"},{"owner":{"account_id":6159106,"reputation":1686,"user_id":4801267,"accept_rate":85,"display_name":"whitefang1993"},"score":0,"creation_date":1680865984,"post_id":75956020,"comment_id":133972114,"body_markdown":"Nope, the project is a poc in a very incipient phase, so not yet.","body":"Nope, the project is a poc in a very incipient phase, so not yet."},{"owner":{"account_id":15062605,"reputation":967,"user_id":10870817,"display_name":"SoT"},"score":0,"creation_date":1680874893,"post_id":75956020,"comment_id":133973775,"body_markdown":"I think you should provide jdk version, pom.xml etc","body":"I think you should provide jdk version, pom.xml etc"},{"owner":{"account_id":5440348,"reputation":247,"user_id":4328601,"display_name":"Alexander Prisadkov"},"score":0,"creation_date":1680875116,"post_id":75956020,"comment_id":133973839,"body_markdown":"You can use Base64 encoding","body":"You can use Base64 encoding"},{"owner":{"account_id":22585429,"reputation":286,"user_id":16769477,"display_name":"Jay Yadav"},"score":0,"creation_date":1681104883,"post_id":75956020,"comment_id":133999055,"body_markdown":"Does your RDF database allows CORS request, if not enable them first, also you can use URldecode to decode encoded URI","body":"Does your RDF database allows CORS request, if not enable them first, also you can use URldecode to decode encoded URI"},{"owner":{"account_id":6159106,"reputation":1686,"user_id":4801267,"accept_rate":85,"display_name":"whitefang1993"},"score":0,"creation_date":1681113572,"post_id":75956020,"comment_id":134000135,"body_markdown":"It allows CORS... my issue it has nothing to do with the DB config... the DB interogtion from Spring Boot has no idea about the request. I can totally take out the DB service from the controller and the issue still persists. The issue is related to path variables... if I move the ID in the query string the ecncode/decode process works perfectly. The problem is when I am trying to use the ID in the path variable.","body":"It allows CORS... my issue it has nothing to do with the DB config... the DB interogtion from Spring Boot has no idea about the request. I can totally take out the DB service from the controller and the issue still persists. The issue is related to path variables... if I move the ID in the query string the ecncode/decode process works perfectly. The problem is when I am trying to use the ID in the path variable."},{"owner":{"account_id":169505,"reputation":4356,"user_id":395631,"accept_rate":65,"display_name":"Petar Tahchiev"},"score":0,"creation_date":1691179983,"post_id":75956020,"comment_id":135462341,"body_markdown":"I have the same problem. Did you find any solution?","body":"I have the same problem. Did you find any solution?"},{"owner":{"account_id":6159106,"reputation":1686,"user_id":4801267,"accept_rate":85,"display_name":"whitefang1993"},"score":0,"creation_date":1694170371,"post_id":75956020,"comment_id":135859436,"body_markdown":"Unfortunately no... for the moment I moved temporary the URI in the query variable... so I don&#39;t block development...","body":"Unfortunately no... for the moment I moved temporary the URI in the query variable... so I don&#39;t block development..."}],"owner":{"account_id":6159106,"reputation":1686,"user_id":4801267,"accept_rate":85,"display_name":"whitefang1993"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":305,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1681103680,"creation_date":1680849210,"question_id":75956020,"body_markdown":"I want to create an endpoint in Spring Boot which gives me the details of an Entity. The controller for the moment looks like this:\r\n\r\n&lt;pre&gt;&lt;code&gt;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.PathVariable;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\n\r\nimport com.semdetect.server.entities.models.Entity;\r\nimport com.semdetect.server.entities.services.EntityService;\r\n\r\n@RestController\r\n@RequestMapping(&quot;api/entity&quot;)\r\npublic class EntityController {\r\n    private final EntityService entityService;\r\n\r\n    @Autowired\r\n    public EntityController(EntityService entityService) {\r\n        this.entityService = entityService;\r\n    }\r\n\r\n    @GetMapping(&quot;/{iri}&quot;)\r\n    public Entity getEntityByIri(@PathVariable String iri) {\r\n        System.out.println(&quot;In controller: &quot; + iri);\r\n        return this.entityService.getEntityByIri(iri);\r\n    }\r\n}\r\n&lt;/code&gt;&lt;/pre&gt;\r\n\r\nI am using the @PathVarible annotation to get the ID of the Entity from the URI.\r\n\r\nMy CORS config looks like this:\r\n\r\n&lt;pre&gt;&lt;code&gt;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.web.servlet.config.annotation.CorsRegistry;\r\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\r\n\r\n@SpringBootApplication\r\npublic class ServerApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(ServerApplication.class, args);\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic WebMvcConfigurer corsConfigurer() {\r\n\t\treturn new WebMvcConfigurer() {\r\n\t\t\t@Override\r\n\t\t\tpublic void addCorsMappings(CorsRegistry registry) {\r\n\t\t\tregistry.addMapping(&quot;/**&quot;).allowedOrigins(&quot;http://localhost:4200&quot;);\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n}\r\n&lt;/code&gt;&lt;/pre&gt;\r\n\r\nWhen I do a request like this:\r\n\r\nGET http://localhost:8080/api/entity/12345869\r\n\r\nIt enters the controller and console logs the ID: &lt;code&gt;12345869&lt;/code&gt;.\r\n\r\nEverything fine until now... but my database is an RDF database, so my **IDs are URIs** and look like this:\r\n\r\n\r\n\\&lt;http://www.semanticweb.org/blah/ontologies/2022/6/blah#12345869\\&gt;\r\n\r\nSo my request will actually look like this, containing special characters:\r\n\r\nGET http://localhost:8080/api/entity/\\&lt;http://www.semanticweb.org/blah/ontologies/2022/6/blah#12345869\\&gt;\r\n\r\nBecause of the special characters I am using the &lt;code&gt;encodeURIComponent&lt;/code&gt; from JavaScript to encode the path variable (https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent): \r\n\r\n`http://localhost:8080/api/entity/${encodeURIComponent(&quot;\\&lt;http://www.semanticweb.org/blah/ontologies/2022/6/blah#12345869\\&gt;&quot;)}`\r\n\r\nWhich will turn the request into this:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/X3Wrn.png\r\n\r\nWhen I do this request with the path variable encoded... Spring Boot returns CORS error, although with normal IDs it works.\r\n\r\nI don&#39;t know how to resolve this issue, is there any way I can use a string like \\&lt;http://www.semanticweb.org/blah/ontologies/2022/6/blah#12345869\\&gt; as a path variable?\r\n\r\nEDIT (AS REUQESTED IN THE COMMENTS):\r\n\r\nPOM:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.7.1&lt;/version&gt;\r\n    \t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;groupId&gt;com.sem-detect&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;server&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;name&gt;server&lt;/name&gt;\r\n    \t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;18&lt;/java.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \t&lt;dependencyManagement&gt;\r\n    \t\t&lt;dependencies&gt;\r\n    \t\t\t&lt;dependency&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.eclipse.rdf4j&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;rdf4j-bom&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;3.0.4&lt;/version&gt;\r\n    \t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n    \t\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n    \t\t\t&lt;/dependency&gt;\r\n    \t\t&lt;/dependencies&gt;\r\n    \t&lt;/dependencyManagement&gt;\r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.eclipse.rdf4j&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;rdf4j-client&lt;/artifactId&gt;\r\n    \t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.eclipse.rdf4j&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;rdf4j-repository-sparql&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n    \t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\nI am using JDK 18.","title":"Spring Boot gives CORS error when PathVariable is encoded due to special characters","body":"<p>I want to create an endpoint in Spring Boot which gives me the details of an Entity. The controller for the moment looks like this:</p>\n<pre><code>\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n\nimport com.semdetect.server.entities.models.Entity;\nimport com.semdetect.server.entities.services.EntityService;\n\n@RestController\n@RequestMapping(\"api/entity\")\npublic class EntityController {\n    private final EntityService entityService;\n\n    @Autowired\n    public EntityController(EntityService entityService) {\n        this.entityService = entityService;\n    }\n\n    @GetMapping(\"/{iri}\")\n    public Entity getEntityByIri(@PathVariable String iri) {\n        System.out.println(\"In controller: \" + iri);\n        return this.entityService.getEntityByIri(iri);\n    }\n}\n</code></pre>\n<p>I am using the @PathVarible annotation to get the ID of the Entity from the URI.</p>\n<p>My CORS config looks like this:</p>\n<pre><code>\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.web.servlet.config.annotation.CorsRegistry;\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\n\n@SpringBootApplication\npublic class ServerApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(ServerApplication.class, args);\n    }\n\n    @Bean\n    public WebMvcConfigurer corsConfigurer() {\n        return new WebMvcConfigurer() {\n            @Override\n            public void addCorsMappings(CorsRegistry registry) {\n            registry.addMapping(\"/**\").allowedOrigins(\"http://localhost:4200\");\n            }\n        };\n    }\n}\n</code></pre>\n<p>When I do a request like this:</p>\n<p>GET http://localhost:8080/api/entity/12345869</p>\n<p>It enters the controller and console logs the ID: <code>12345869</code>.</p>\n<p>Everything fine until now... but my database is an RDF database, so my <strong>IDs are URIs</strong> and look like this:</p>\n<p>&lt;http://www.semanticweb.org/blah/ontologies/2022/6/blah#12345869&gt;</p>\n<p>So my request will actually look like this, containing special characters:</p>\n<p>GET http://localhost:8080/api/entity/&lt;http://www.semanticweb.org/blah/ontologies/2022/6/blah#12345869&gt;</p>\n<p>Because of the special characters I am using the <code>encodeURIComponent</code> from JavaScript to encode the path variable (<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent</a>):</p>\n<p><code>http://localhost:8080/api/entity/${encodeURIComponent(&quot;\\&lt;http://www.semanticweb.org/blah/ontologies/2022/6/blah#12345869\\&gt;&quot;)}</code></p>\n<p>Which will turn the request into this:</p>\n<p><a href=\"https://i.stack.imgur.com/X3Wrn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/X3Wrn.png\" alt=\"enter image description here\" /></a></p>\n<p>When I do this request with the path variable encoded... Spring Boot returns CORS error, although with normal IDs it works.</p>\n<p>I don't know how to resolve this issue, is there any way I can use a string like &lt;http://www.semanticweb.org/blah/ontologies/2022/6/blah#12345869&gt; as a path variable?</p>\n<p>EDIT (AS REUQESTED IN THE COMMENTS):</p>\n<p>POM:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.1&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.sem-detect&lt;/groupId&gt;\n    &lt;artifactId&gt;server&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;server&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;18&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.eclipse.rdf4j&lt;/groupId&gt;\n                &lt;artifactId&gt;rdf4j-bom&lt;/artifactId&gt;\n                &lt;version&gt;3.0.4&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.eclipse.rdf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;rdf4j-client&lt;/artifactId&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.eclipse.rdf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;rdf4j-repository-sparql&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>I am using JDK 18.</p>\n"},{"tags":["java","image","graphics","gif","graphics2d"],"comments":[{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1681108478,"post_id":75974415,"comment_id":133999453,"body_markdown":"You need to change the `disposalMethod` for [example](https://stackoverflow.com/questions/20318146/java-gif-creator-needs-tweaking/20318211#20318211); [example](https://stackoverflow.com/questions/26330550/java-gif-animation-not-repainting-correctly/26331052#26331052); [example](https://stackoverflow.com/questions/36671767/java-swing-gif-partly-transparent-when-its-not-supposed-to-be/36683021#36683021); [example](https://stackoverflow.com/questions/18117283/mirroring-animated-gif-on-load-in-java-imageicon/18117326#18117326)","body":"You need to change the <code>disposalMethod</code> for <a href=\"https://stackoverflow.com/questions/20318146/java-gif-creator-needs-tweaking/20318211#20318211\">example</a>; <a href=\"https://stackoverflow.com/questions/26330550/java-gif-animation-not-repainting-correctly/26331052#26331052\">example</a>; <a href=\"https://stackoverflow.com/questions/36671767/java-swing-gif-partly-transparent-when-its-not-supposed-to-be/36683021#36683021\">example</a>; <a href=\"https://stackoverflow.com/questions/18117283/mirroring-animated-gif-on-load-in-java-imageicon/18117326#18117326\">example</a>"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1681108554,"post_id":75974415,"comment_id":133999458,"body_markdown":"[example](https://stackoverflow.com/questions/36682135/java-animated-gifs-go-automatically-partially-transparent/36682907#36682907)","body":"<a href=\"https://stackoverflow.com/questions/36682135/java-animated-gifs-go-automatically-partially-transparent/36682907#36682907\">example</a>"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1681108769,"post_id":75974415,"comment_id":133999484,"body_markdown":"Don&#39;t load the image in the `paintComponent` method and pass `this` as the `ImageObserver` to the `drawImage` method","body":"Don&#39;t load the image in the <code>paintComponent</code> method and pass <code>this</code> as the <code>ImageObserver</code> to the <code>drawImage</code> method"}],"owner":{"account_id":27584113,"reputation":11,"user_id":21052691,"display_name":"Carter Reid"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1681103561,"creation_date":1681103561,"question_id":75974415,"body_markdown":"I am using a GIF with a transparent background as a sprite for a game I am making as it is easier than manually animating each frame of the idle animation, especially since that is the only animation I will be using for a while. My issue is that each frame of the GIF is rendered, but is still visible once the next appears. For example, when the sprite&#39;s wing lowers, the previous frame is still visible behind the newest frame with the wing higher up. I dont think that this an issue with the GIF, since it looks just fine outside of my program, but here it is anyways:\r\n[Sprite](https://i.stack.imgur.com/9LMxL.gif)\r\n\r\n\r\nI&#39;ve tried reworking the code, trying to use clearRect(); and g2.dispose(); but nothing seemed to work. Here is my code for the graphics:\r\n\r\n\r\n```\r\npublic void paintComponent(Graphics g) {\r\n\t\tsuper.paintComponent(g);\r\n\t\tGraphics2D g2 = (Graphics2D) g;\r\n\t\t// drawing food and powerups\r\n\t\tg2.clearRect(px, py, pw, ph);\r\n\t\t\r\n\t\tColor transGray = new Color(126, 126, 126, 50);\r\n\t\tColor transGreen = new Color(0, 255, 0, 150);\r\n\t\tImage icon = new ImageIcon(getClass().getResource(&quot;/resources/Anti_Virus_Sprite.gif&quot;)).getImage();\r\n\t\tg2.drawImage(icon,px, py, pw, ph, null);\r\n\t\tg2.drawRect(px, py, pw, ph);\r\n\t\t\r\n\t\t//g2.dispose();\r\n\r\n\t}\r\n\r\n\r\n```\r\n\r\nEverything else works fine I should also add, only this GIF is doing it, no issues with drawRect();\r\n\r\nI did find that with a different GIF, one completely unrelated for a different game, it didnt seem to had the same issue, but that GIF didn&#39;t move much so it could have just been difficult to notice. A side note, some of the GIFs I use flicker weirdly sometimes, but only in my programs.\r\n\r\n\r\n","title":"How do I stop a transparent GIF from rendering previous frames behind it?","body":"<p>I am using a GIF with a transparent background as a sprite for a game I am making as it is easier than manually animating each frame of the idle animation, especially since that is the only animation I will be using for a while. My issue is that each frame of the GIF is rendered, but is still visible once the next appears. For example, when the sprite's wing lowers, the previous frame is still visible behind the newest frame with the wing higher up. I dont think that this an issue with the GIF, since it looks just fine outside of my program, but here it is anyways:\n<a href=\"https://i.stack.imgur.com/9LMxL.gif\" rel=\"nofollow noreferrer\">Sprite</a></p>\n<p>I've tried reworking the code, trying to use clearRect(); and g2.dispose(); but nothing seemed to work. Here is my code for the graphics:</p>\n<pre><code>public void paintComponent(Graphics g) {\n        super.paintComponent(g);\n        Graphics2D g2 = (Graphics2D) g;\n        // drawing food and powerups\n        g2.clearRect(px, py, pw, ph);\n        \n        Color transGray = new Color(126, 126, 126, 50);\n        Color transGreen = new Color(0, 255, 0, 150);\n        Image icon = new ImageIcon(getClass().getResource(&quot;/resources/Anti_Virus_Sprite.gif&quot;)).getImage();\n        g2.drawImage(icon,px, py, pw, ph, null);\n        g2.drawRect(px, py, pw, ph);\n        \n        //g2.dispose();\n\n    }\n\n\n</code></pre>\n<p>Everything else works fine I should also add, only this GIF is doing it, no issues with drawRect();</p>\n<p>I did find that with a different GIF, one completely unrelated for a different game, it didnt seem to had the same issue, but that GIF didn't move much so it could have just been difficult to notice. A side note, some of the GIFs I use flicker weirdly sometimes, but only in my programs.</p>\n"},{"tags":["java","stream","flatmap"],"comments":[{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":1,"creation_date":1666000222,"post_id":74095311,"comment_id":130823009,"body_markdown":"What have you tried? There are **no** streams in your code, which by the way would fail to compile. Please share your attempt and specify the issue you&#39;ve encountered? Every question of SO is expected to demonstrate an **effort**. Please get familiar with the guide-lines on how to ask questions [How do I ask a good question?](https://stackoverflow.com/help/how-to-ask)","body":"What have you tried? There are <b>no</b> streams in your code, which by the way would fail to compile. Please share your attempt and specify the issue you&#39;ve encountered? Every question of SO is expected to demonstrate an <b>effort</b>. Please get familiar with the guide-lines on how to ask questions <a href=\"https://stackoverflow.com/help/how-to-ask\">How do I ask a good question?</a>"},{"owner":{"display_name":"user17233545"},"score":0,"creation_date":1666000432,"post_id":74095311,"comment_id":130823068,"body_markdown":"`list.stream().flatMap(map -&gt; map.values().stream().flatMap(List::stream)).toList()`","body":"<code>list.stream().flatMap(map -&gt; map.values().stream().flatMap(List::stream)).toList()</code>"},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":1,"creation_date":1666000594,"post_id":74095311,"comment_id":130823114,"body_markdown":"Possible duplicate https://stackoverflow.com/questions/22382453/java-8-streams-flatmap-method-example","body":"Possible duplicate <a href=\"https://stackoverflow.com/questions/22382453/java-8-streams-flatmap-method-example\" title=\"java 8 streams flatmap method example\">stackoverflow.com/questions/22382453/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":17026449,"reputation":11,"user_id":21589896,"display_name":"Rafael Iakupov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681082595,"creation_date":1681082595,"answer_id":75973367,"question_id":74095311,"body_markdown":"    List&lt;Object&gt; collect = list\r\n                    .stream()\r\n                    .flatMap(x -&gt; x.entrySet().stream())\r\n                    .map(Map.Entry::getValue)\r\n                    .flatMap(x -&gt; {\r\n                                if (x instanceof Collection&lt;?&gt;) {\r\n                                    return ((Collection&lt;?&gt;) x).stream();\r\n                                } else {\r\n                                    return Stream.of(x);\r\n                                }\r\n                            }\r\n                    )\r\n                    .collect(Collectors.toList());","title":"How to use flat map for flating HashMap keys value into one set when there is a list of Map in Java stream","body":"<pre><code>List&lt;Object&gt; collect = list\n                .stream()\n                .flatMap(x -&gt; x.entrySet().stream())\n                .map(Map.Entry::getValue)\n                .flatMap(x -&gt; {\n                            if (x instanceof Collection&lt;?&gt;) {\n                                return ((Collection&lt;?&gt;) x).stream();\n                            } else {\n                                return Stream.of(x);\n                            }\n                        }\n                )\n                .collect(Collectors.toList());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681102332,"creation_date":1681086607,"answer_id":75973568,"question_id":74095311,"body_markdown":"Change the Maps to have typed values, eg\r\n\r\n    List&lt;Map&lt;String, List&lt;String&gt;&gt;&gt; list = new ArrayList&lt;&gt;();\r\n    Map&lt;String, List&lt;String&gt;&gt; map1 = new HashMap&lt;&gt;();\r\n\r\n\r\nThen use `flatMap()` twice to double flatten the collections:\r\n\r\n```\r\nList&lt;String&gt; allValues = list.stream() // a stream of Maps\r\n  .map(Map::values) // a stream of Collection&lt;List&lt;String&gt;&gt;\r\n  .flatMap(Collection::stream) // a stream of List&lt;String&gt;\r\n  .flatMap(List::stream) // a stream of String\r\n  .collect(toList());\r\n```\r\n\r\nSee [live demo][1].\r\n\r\n---\r\n\r\nIf you leave the values of the Maps as `Object`, you need the cast them:\r\n\r\n```\r\nList&lt;String&gt; allValues = list.stream() // a stream of Maps\r\n  .map(Map::values) // a stream of Collection&lt;Object&gt;\r\n  .map(o -&gt; (Collection&lt;List&lt;String&gt;&gt;)o)\r\n  .flatMap(Collection::stream) // a stream of List&lt;Object&gt;\r\n  .map(o -&gt; (List&lt;String&gt;)o)\r\n  .flatMap(List::stream) // a stream of String\r\n  .collect(toList());\r\n```\r\n\r\nWhich is uglier, less safe and unnecessary with the correct typing.\r\n\r\n  [1]: https://ideone.com/Rt68Ia","title":"How to use flat map for flating HashMap keys value into one set when there is a list of Map in Java stream","body":"<p>Change the Maps to have typed values, eg</p>\n<pre><code>List&lt;Map&lt;String, List&lt;String&gt;&gt;&gt; list = new ArrayList&lt;&gt;();\nMap&lt;String, List&lt;String&gt;&gt; map1 = new HashMap&lt;&gt;();\n</code></pre>\n<p>Then use <code>flatMap()</code> twice to double flatten the collections:</p>\n<pre><code>List&lt;String&gt; allValues = list.stream() // a stream of Maps\n  .map(Map::values) // a stream of Collection&lt;List&lt;String&gt;&gt;\n  .flatMap(Collection::stream) // a stream of List&lt;String&gt;\n  .flatMap(List::stream) // a stream of String\n  .collect(toList());\n</code></pre>\n<p>See <a href=\"https://ideone.com/Rt68Ia\" rel=\"nofollow noreferrer\">live demo</a>.</p>\n<hr />\n<p>If you leave the values of the Maps as <code>Object</code>, you need the cast them:</p>\n<pre><code>List&lt;String&gt; allValues = list.stream() // a stream of Maps\n  .map(Map::values) // a stream of Collection&lt;Object&gt;\n  .map(o -&gt; (Collection&lt;List&lt;String&gt;&gt;)o)\n  .flatMap(Collection::stream) // a stream of List&lt;Object&gt;\n  .map(o -&gt; (List&lt;String&gt;)o)\n  .flatMap(List::stream) // a stream of String\n  .collect(toList());\n</code></pre>\n<p>Which is uglier, less safe and unnecessary with the correct typing.</p>\n"}],"owner":{"account_id":19342653,"reputation":11,"user_id":14141838,"display_name":"Nishant Kumar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":761,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1681102332,"creation_date":1665999692,"question_id":74095311,"body_markdown":"```\r\nList&lt;Map&lt;String, Object&gt;&gt; list =new ArrayList();\r\nMap&lt;String, Object&gt; map1 =new HashMap();\r\nList&lt;String&gt; values =new ArrayList();\r\nvalues.add(&quot;TEST&quot;)\r\nvalues.add(&quot;TEST1&quot;)\r\nmap1.put(&quot;level&quot;,values);\r\nMap&lt;String, Object&gt; map2 =new HashMap();\r\nList&lt;String&gt; values2 =new ArrayList();\r\nvalues2.add(&quot;TEST2&quot;)\r\nvalues2.add(&quot;TEST3&quot;)\r\nmap2.put(&quot;level&quot;,values2);\r\nlist.add(map1);\r\nlist.add(map2);\r\n```\r\n\r\nI want the result like a list of flat string values \r\n```\r\nList&lt;String&gt; values =[&quot;TEST&quot;,&quot;TEST1&quot;,&quot;TES2&quot;,&quot;TEST3&quot;]\r\n```\r\n    \r\n\r\n","title":"How to use flat map for flating HashMap keys value into one set when there is a list of Map in Java stream","body":"<pre><code>List&lt;Map&lt;String, Object&gt;&gt; list =new ArrayList();\nMap&lt;String, Object&gt; map1 =new HashMap();\nList&lt;String&gt; values =new ArrayList();\nvalues.add(&quot;TEST&quot;)\nvalues.add(&quot;TEST1&quot;)\nmap1.put(&quot;level&quot;,values);\nMap&lt;String, Object&gt; map2 =new HashMap();\nList&lt;String&gt; values2 =new ArrayList();\nvalues2.add(&quot;TEST2&quot;)\nvalues2.add(&quot;TEST3&quot;)\nmap2.put(&quot;level&quot;,values2);\nlist.add(map1);\nlist.add(map2);\n</code></pre>\n<p>I want the result like a list of flat string values</p>\n<pre><code>List&lt;String&gt; values =[&quot;TEST&quot;,&quot;TEST1&quot;,&quot;TES2&quot;,&quot;TEST3&quot;]\n</code></pre>\n"},{"tags":["java","flutter","gradle","semantic-analysis","java-19"],"comments":[{"owner":{"account_id":184870,"reputation":118711,"user_id":421195,"accept_rate":83,"display_name":"paulsm4"},"score":0,"creation_date":1681101252,"post_id":75969480,"comment_id":133998772,"body_markdown":"Class file version &quot;63&quot; corresponds to Java 19.  PROBLEM: You&#39;re compiling classes for Java 19 (like you expect) ... but your Gradle JRE is a *lower* Java version!  Look here: https://stackoverflow.com/a/74840295/421195.  If you were using Android Studio (vs. VSCode), this would also be applicable: https://stackoverflow.com/a/74840295/421195, and https://stackoverflow.com/a/75221829/421195","body":"Class file version &quot;63&quot; corresponds to Java 19.  PROBLEM: You&#39;re compiling classes for Java 19 (like you expect) ... but your Gradle JRE is a <i>lower</i> Java version!  Look here: <a href=\"https://stackoverflow.com/a/74840295/421195\">stackoverflow.com/a/74840295/421195</a>.  If you were using Android Studio (vs. VSCode), this would also be applicable: <a href=\"https://stackoverflow.com/a/74840295/421195\">stackoverflow.com/a/74840295/421195</a>, and <a href=\"https://stackoverflow.com/a/75221829/421195\">stackoverflow.com/a/75221829/421195</a>"}],"owner":{"account_id":28250173,"reputation":1,"user_id":21596544,"display_name":"Nishwa Nishwa"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1681033679,"answer_count":0,"score":0,"last_activity_date":1681100739,"creation_date":1681029047,"question_id":75969480,"body_markdown":"I am trying to run my flutter project in VScode. But this error is * shown. Any ideas on how to resolve this issue? \r\n\r\n* Java version is 19.0.1 \r\n* gradle version is 7.1.2 \r\n* Flutter 3.3.9 \r\n\r\nTools\r\n\r\n Dart 2.18.5 \r\n\r\n DevTools 2.15.0\r\n\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nCould not open settings generic class cache for settings file &#39;C:\\Users\\user\\Desktop\\Nish\\face_recognition\\android\\settings.gradle&#39; (C:\\Users\\user\\.gradle\\caches\\7.1\\scripts\\el377zxjtiubuolyxhieyiuv6).\r\n&gt; BUG! exception in phase &#39;semantic analysis&#39; in source unit &#39;_BuildScript_&#39; Unsupported class file major version 63\r\n\r\n","title":"unsupported class file major version 63","body":"<p>I am trying to run my flutter project in VScode. But this error is * shown. Any ideas on how to resolve this issue?</p>\n<ul>\n<li>Java version is 19.0.1</li>\n<li>gradle version is 7.1.2</li>\n<li>Flutter 3.3.9</li>\n</ul>\n<p>Tools</p>\n<p> Dart 2.18.5</p>\n<p> DevTools 2.15.0</p>\n<p>FAILURE: Build failed with an exception.</p>\n<ul>\n<li>What went wrong:\nCould not open settings generic class cache for settings file 'C:\\Users\\user\\Desktop\\Nish\\face_recognition\\android\\settings.gradle' (C:\\Users\\user.gradle\\caches\\7.1\\scripts\\el377zxjtiubuolyxhieyiuv6).</li>\n</ul>\n<blockquote>\n<p>BUG! exception in phase 'semantic analysis' in source unit '<em>BuildScript</em>' Unsupported class file major version 63</p>\n</blockquote>\n"},{"tags":["java","android","android-studio","android-fragments","fragmentstatepageradapter"],"comments":[{"owner":{"account_id":1233070,"reputation":9484,"user_id":1197251,"display_name":"dominicoder"},"score":0,"creation_date":1681101224,"post_id":75973703,"comment_id":133998767,"body_markdown":"Have you read the documentation on this topic? https://developer.android.com/guide/fragments/communicate#fragments","body":"Have you read the documentation on this topic? <a href=\"https://developer.android.com/guide/fragments/communicate#fragments\" rel=\"nofollow noreferrer\">developer.android.com/guide/fragments/communicate#fragments</a>"}],"answers":[{"tags":[],"owner":{"account_id":10038794,"reputation":802,"user_id":8229399,"display_name":"philoopher97"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681100363,"creation_date":1681100363,"answer_id":75974235,"question_id":75973703,"body_markdown":"You&#39;re creating a new fragment when sending data, which you souldn&#39;t. The `viewPager` has no reference of the new fragment with data. That&#39;s why you&#39;re getting the `NullPointerException`.\r\n\r\nThere are several ways to pass data from one activity to another. The most convinient way is to use a common `ViewModel` class. Here is an example:\r\n\r\n&gt; Create a Common view model class.\r\n```kotlin\r\nclass CommonViewModel: ViewModel() {\r\n\r\n// your variables to share\r\n\r\n}\r\n```\r\n\r\n&gt; Send data from a fragment\r\n```kotlin\r\nclass FragmentOne: Fragment() {\r\n    private lateinit var viewModel: CommonViewModel\r\n    override fun onViewCreated() {\r\n        veiwModel = ViewModelProvider(requireActivity())[CommonViewModel::class.java]\r\n        \r\n        veiwModel.data_1 = &quot;some_data&quot;\r\n    }\r\n}\r\n```\r\n\r\n&gt; Get the data from the other fragment.\r\n```kotlin\r\nclass FragmentTwo: Fragment() {\r\n    private lateinit var viewModel: CommonViewModel\r\n    override fun onViewCreated() {\r\n        veiwModel = ViewModelProvider(requireActivity())[CommonViewModel::class.java]\r\n        \r\n        val dataFromOtherFragment = veiwModel.data_1\r\n    }\r\n}\r\n```\r\n\r\nRemember the `requireActivity()` is crucial since we want the same `viewModel` in both fragments.","title":"How to pass text from one fragment to another? Both hosted by the MainActivity","body":"<p>You're creating a new fragment when sending data, which you souldn't. The <code>viewPager</code> has no reference of the new fragment with data. That's why you're getting the <code>NullPointerException</code>.</p>\n<p>There are several ways to pass data from one activity to another. The most convinient way is to use a common <code>ViewModel</code> class. Here is an example:</p>\n<blockquote>\n<p>Create a Common view model class.</p>\n</blockquote>\n<pre class=\"lang-kotlin prettyprint-override\"><code>class CommonViewModel: ViewModel() {\n\n// your variables to share\n\n}\n</code></pre>\n<blockquote>\n<p>Send data from a fragment</p>\n</blockquote>\n<pre class=\"lang-kotlin prettyprint-override\"><code>class FragmentOne: Fragment() {\n    private lateinit var viewModel: CommonViewModel\n    override fun onViewCreated() {\n        veiwModel = ViewModelProvider(requireActivity())[CommonViewModel::class.java]\n        \n        veiwModel.data_1 = &quot;some_data&quot;\n    }\n}\n</code></pre>\n<blockquote>\n<p>Get the data from the other fragment.</p>\n</blockquote>\n<pre class=\"lang-kotlin prettyprint-override\"><code>class FragmentTwo: Fragment() {\n    private lateinit var viewModel: CommonViewModel\n    override fun onViewCreated() {\n        veiwModel = ViewModelProvider(requireActivity())[CommonViewModel::class.java]\n        \n        val dataFromOtherFragment = veiwModel.data_1\n    }\n}\n</code></pre>\n<p>Remember the <code>requireActivity()</code> is crucial since we want the same <code>viewModel</code> in both fragments.</p>\n"},{"tags":[],"owner":{"account_id":22415217,"reputation":185,"user_id":16623378,"display_name":"Quc H&#249;ng"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681100713,"creation_date":1681100713,"answer_id":75974253,"question_id":75973703,"body_markdown":"I&#39;m not sure it is the best idea, but it can solve your requirement.\r\n\r\nYou can create a listener to listen to your button and pass the text to the other fragment.\r\n```java\r\npublic interface OnFragmentSubmitListener {\r\n    void onSubmitted(String text);\r\n}\r\n```\r\nAnd then place the listener on the first fragment.\r\n```java\r\npublic class Frag1 extends Fragment {\r\n    private EditText editText;\r\n    private Button button;\r\n    private OnFragmentSubmitListener listener;\r\n\r\n    public Frag1(){\r\n\r\n    }\r\n\r\n    public void setOnFragmentSubmit(OnFragmentSubmitListener listener) {\r\n        this.listener = listener;\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\r\n        View view = inflater.inflate(R.layout.fragment_frag1, container, false);\r\n\r\n        editText = view.findViewById(R.id.frag1ET);\r\n        button = view.findViewById(R.id.frag1btn);\r\n\r\n\r\n        button.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                String text = editText.getText().toString();\r\n                listener.onSubmitted(text);\r\n                editText.setText(&quot;&quot;);\r\n            }\r\n        });\r\n\r\n        return view;\r\n    }\r\n\r\n}\r\n```\r\nThen finally handle the listener on Adapter.\r\n```java\r\npublic class ViewPagerAdapter extends FragmentStateAdapter {\r\n    private Frag1 frag1 = new Frag1();\r\n    private Frag2 frag2 = new Frag2();\r\n\r\n    public ViewPagerAdapter(@NonNull FragmentActivity fragmentActivity) {\r\n        super(fragmentActivity);\r\n        frag1.setOnFragmentSubmit((text -&gt; {\r\n            Bundle bundle = new Bundle();\r\n            bundle.putString(&quot;tex&quot;, text);\r\n            frag2.setArguments(bundle);\r\n        }));\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public Fragment createFragment(int position) {\r\n        switch (position)\r\n        {\r\n            case 0: return frag1;\r\n\r\n            case 1: return frag2;\r\n\r\n            default: return frag1;\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return 2;\r\n    }\r\n}\r\n```","title":"How to pass text from one fragment to another? Both hosted by the MainActivity","body":"<p>I'm not sure it is the best idea, but it can solve your requirement.</p>\n<p>You can create a listener to listen to your button and pass the text to the other fragment.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface OnFragmentSubmitListener {\n    void onSubmitted(String text);\n}\n</code></pre>\n<p>And then place the listener on the first fragment.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Frag1 extends Fragment {\n    private EditText editText;\n    private Button button;\n    private OnFragmentSubmitListener listener;\n\n    public Frag1(){\n\n    }\n\n    public void setOnFragmentSubmit(OnFragmentSubmitListener listener) {\n        this.listener = listener;\n    }\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\n        View view = inflater.inflate(R.layout.fragment_frag1, container, false);\n\n        editText = view.findViewById(R.id.frag1ET);\n        button = view.findViewById(R.id.frag1btn);\n\n\n        button.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                String text = editText.getText().toString();\n                listener.onSubmitted(text);\n                editText.setText(&quot;&quot;);\n            }\n        });\n\n        return view;\n    }\n\n}\n</code></pre>\n<p>Then finally handle the listener on Adapter.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ViewPagerAdapter extends FragmentStateAdapter {\n    private Frag1 frag1 = new Frag1();\n    private Frag2 frag2 = new Frag2();\n\n    public ViewPagerAdapter(@NonNull FragmentActivity fragmentActivity) {\n        super(fragmentActivity);\n        frag1.setOnFragmentSubmit((text -&gt; {\n            Bundle bundle = new Bundle();\n            bundle.putString(&quot;tex&quot;, text);\n            frag2.setArguments(bundle);\n        }));\n    }\n\n    @NonNull\n    @Override\n    public Fragment createFragment(int position) {\n        switch (position)\n        {\n            case 0: return frag1;\n\n            case 1: return frag2;\n\n            default: return frag1;\n        }\n    }\n\n    @Override\n    public int getItemCount() {\n        return 2;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":16398039,"reputation":13,"user_id":11844920,"display_name":"Ron R"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1681117057,"answer_count":2,"score":0,"last_activity_date":1681100713,"creation_date":1681089700,"question_id":75973703,"body_markdown":"I have been trying to use Fragments in Android Studio and have been successful in the implementation of it. But, when I am trying to pass any data (Text/String here) I&#39;m getting a Null Pointer Exception. \r\n\r\nThe Fragment doesn&#39;t appear to get received by the second Fragment. Here is the code:\r\n\r\nMainActivity.java\r\n\r\n```\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    TabLayout tb;\r\n    ViewPager2 vp;\r\n    viewPagerAdapter vpa;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        tb=findViewById(R.id.tab_lyt);\r\n        vp= findViewById(R.id.pager);\r\n        vpa= new viewPagerAdapter(this);\r\n\r\n        vp.setAdapter(vpa);\r\n\r\n        tb.addOnTabSelectedListener(new TabLayout.OnTabSelectedListener() {\r\n            @Override\r\n            public void onTabSelected(TabLayout.Tab tab) {\r\n                vp.setCurrentItem(tab.getPosition());\r\n            }\r\n\r\n            @Override\r\n            public void onTabUnselected(TabLayout.Tab tab) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onTabReselected(TabLayout.Tab tab) {\r\n\r\n            }\r\n        });\r\n\r\n        vp.registerOnPageChangeCallback(new ViewPager2.OnPageChangeCallback() {\r\n            @Override\r\n            public void onPageSelected(int position) {\r\n                super.onPageSelected(position);\r\n\r\n                tb.getTabAt(position).select();\r\n            }\r\n        });\r\n    }\r\n}\r\n```\r\n\r\nactivity_main.xml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.MainActivity&quot;&gt;\r\n\r\n    &lt;androidx.viewpager2.widget.ViewPager2\r\n        android:id=&quot;@+id/pager&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:layout_below=&quot;@id/tab_lyt&quot;\r\n        android:layout_marginTop=&quot;0dp&quot; /&gt;\r\n\r\n    &lt;com.google.android.material.tabs.TabLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:id=&quot;@+id/tab_lyt&quot;&gt;\r\n\r\n        &lt;com.google.android.material.tabs.TabItem\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;Menu 1&quot;/&gt;\r\n\r\n        &lt;com.google.android.material.tabs.TabItem\r\n            android:id=&quot;@+id/frag2&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;Menu 2&quot;/&gt;\r\n\r\n\r\n\r\n    &lt;/com.google.android.material.tabs.TabLayout&gt;\r\n\r\n\r\n\r\n\r\n&lt;/RelativeLayout&gt;\r\n```\r\nviewPagerAdapter.java\r\n```\r\npublic class viewPagerAdapter extends FragmentStateAdapter {\r\n    public viewPagerAdapter(@NonNull FragmentActivity fragmentActivity) {\r\n        super(fragmentActivity);\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public Fragment createFragment(int position) {\r\n        switch (position)\r\n        {\r\n            case 0: return new frag1();\r\n\r\n            case 1: return new frag2();\r\n\r\n            default: return new frag1();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return 2;\r\n    }\r\n}\r\n```\r\nfrag1.java\r\n```\r\npublic class frag1 extends Fragment {\r\n    private EditText editText;\r\n    private Button button;\r\n\r\n    public frag1(){\r\n\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\r\n        View view = inflater.inflate(R.layout.fragment_frag1, container, false);\r\n\r\n        editText = view.findViewById(R.id.frag1ET);\r\n        button = view.findViewById(R.id.frag1btn);\r\n\r\n\r\n        button.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                String text = editText.getText().toString();\r\n                Bundle bundle = new Bundle();\r\n                bundle.putString(&quot;tex&quot;, text);\r\n                Toast.makeText(getContext(), &quot;&quot;+bundle.toString(), Toast.LENGTH_LONG).show();\r\n                frag2 f2 = new frag2();\r\n                f2.setArguments(bundle);\r\n                editText.setText(&quot;&quot;);\r\n            }\r\n        });\r\n\r\n        return view;\r\n    }\r\n}\r\n```\r\nfrag1.xml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    tools:context=&quot;.frgmnts.frag1&quot;&gt;\r\n\r\n\r\n    &lt;EditText\r\n        android:id=&quot;@+id/frag1ET&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_marginTop=&quot;116dp&quot;\r\n        android:ems=&quot;10&quot;\r\n        android:hint=&quot;Enter text&quot;\r\n        android:inputType=&quot;textPersonName&quot;\r\n        app:layout_constraintHorizontal_bias=&quot;0.497&quot;\r\n        app:layout_constraintLeft_toLeftOf=&quot;parent&quot;\r\n        app:layout_constraintRight_toRightOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n\r\n    &lt;Button\r\n        android:id=&quot;@+id/frag1btn&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_marginTop=&quot;28dp&quot;\r\n        android:text=&quot;Button&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;@+id/frag1ET&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;@+id/frag1ET&quot;\r\n        app:layout_constraintTop_toBottomOf=&quot;@+id/frag1ET&quot; /&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/frag1tv&quot;\r\n        android:layout_width=&quot;260dp&quot;\r\n        android:layout_height=&quot;56dp&quot;\r\n        android:layout_marginTop=&quot;56dp&quot;\r\n        android:textAlignment=&quot;textStart&quot;\r\n        android:hint=&quot;Text from Frag 2&quot;\r\n        android:textSize=&quot;20sp&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;@+id/frag1ET&quot;\r\n        app:layout_constraintHorizontal_bias=&quot;0.506&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;@+id/frag1ET&quot;\r\n        app:layout_constraintTop_toBottomOf=&quot;@+id/frag1btn&quot; /&gt;\r\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n```\r\nfrag2.java\r\n```\r\npublic class frag2 extends Fragment {\r\n    private TextView tv2;\r\n\r\n    public frag2(){\r\n\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\r\n        View view = inflater.inflate(R.layout.fragment_frag2, container, false);\r\n\r\n        tv2 = view.findViewById(R.id.frag2tv);\r\n\r\n\r\n        return view;\r\n    }\r\n\r\n    @Override\r\n    public void onResume() {\r\n        super.onResume();\r\n        Bundle bundle = getArguments();\r\n        if (bundle != null) {\r\n            String text = bundle.getString(&quot;tex&quot;);\r\n            tv2.setText(text);\r\n        }\r\n        else\r\n            tv2.setText(&quot;Text not received&quot;);\r\n    }\r\n}\r\n```\r\nfrag2.xml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.frgmnts.frag2&quot;&gt;\r\n\r\n    &lt;EditText\r\n        android:id=&quot;@+id/frag2ET&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_marginTop=&quot;116dp&quot;\r\n        android:ems=&quot;10&quot;\r\n        android:hint=&quot;Enter text&quot;\r\n        android:inputType=&quot;textPersonName&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintHorizontal_bias=&quot;0.497&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n\r\n    &lt;Button\r\n        android:id=&quot;@+id/frag2btn&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_marginTop=&quot;40dp&quot;\r\n        android:text=&quot;Button&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;@+id/frag2ET&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;@+id/frag2ET&quot;\r\n        app:layout_constraintTop_toBottomOf=&quot;@+id/frag2ET&quot; /&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/frag2tv&quot;\r\n        android:layout_width=&quot;260dp&quot;\r\n        android:layout_height=&quot;56dp&quot;\r\n        android:layout_marginTop=&quot;44dp&quot;\r\n        android:hint=&quot;Text from Frag 1&quot;\r\n        android:textAlignment=&quot;textStart&quot;\r\n        android:textSize=&quot;20sp&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;@+id/frag2ET&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;@+id/frag2ET&quot;\r\n        app:layout_constraintTop_toBottomOf=&quot;@+id/frag2btn&quot; /&gt;\r\n\r\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n```\r\n\r\nAny help and inputs in this regard will be helpful. Thank you\r\n","title":"How to pass text from one fragment to another? Both hosted by the MainActivity","body":"<p>I have been trying to use Fragments in Android Studio and have been successful in the implementation of it. But, when I am trying to pass any data (Text/String here) I'm getting a Null Pointer Exception.</p>\n<p>The Fragment doesn't appear to get received by the second Fragment. Here is the code:</p>\n<p>MainActivity.java</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    TabLayout tb;\n    ViewPager2 vp;\n    viewPagerAdapter vpa;\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        tb=findViewById(R.id.tab_lyt);\n        vp= findViewById(R.id.pager);\n        vpa= new viewPagerAdapter(this);\n\n        vp.setAdapter(vpa);\n\n        tb.addOnTabSelectedListener(new TabLayout.OnTabSelectedListener() {\n            @Override\n            public void onTabSelected(TabLayout.Tab tab) {\n                vp.setCurrentItem(tab.getPosition());\n            }\n\n            @Override\n            public void onTabUnselected(TabLayout.Tab tab) {\n\n            }\n\n            @Override\n            public void onTabReselected(TabLayout.Tab tab) {\n\n            }\n        });\n\n        vp.registerOnPageChangeCallback(new ViewPager2.OnPageChangeCallback() {\n            @Override\n            public void onPageSelected(int position) {\n                super.onPageSelected(position);\n\n                tb.getTabAt(position).select();\n            }\n        });\n    }\n}\n</code></pre>\n<p>activity_main.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n    &lt;androidx.viewpager2.widget.ViewPager2\n        android:id=&quot;@+id/pager&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:layout_below=&quot;@id/tab_lyt&quot;\n        android:layout_marginTop=&quot;0dp&quot; /&gt;\n\n    &lt;com.google.android.material.tabs.TabLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:id=&quot;@+id/tab_lyt&quot;&gt;\n\n        &lt;com.google.android.material.tabs.TabItem\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;Menu 1&quot;/&gt;\n\n        &lt;com.google.android.material.tabs.TabItem\n            android:id=&quot;@+id/frag2&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;Menu 2&quot;/&gt;\n\n\n\n    &lt;/com.google.android.material.tabs.TabLayout&gt;\n\n\n\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n<p>viewPagerAdapter.java</p>\n<pre><code>public class viewPagerAdapter extends FragmentStateAdapter {\n    public viewPagerAdapter(@NonNull FragmentActivity fragmentActivity) {\n        super(fragmentActivity);\n    }\n\n    @NonNull\n    @Override\n    public Fragment createFragment(int position) {\n        switch (position)\n        {\n            case 0: return new frag1();\n\n            case 1: return new frag2();\n\n            default: return new frag1();\n        }\n    }\n\n    @Override\n    public int getItemCount() {\n        return 2;\n    }\n}\n</code></pre>\n<p>frag1.java</p>\n<pre><code>public class frag1 extends Fragment {\n    private EditText editText;\n    private Button button;\n\n    public frag1(){\n\n    }\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\n        View view = inflater.inflate(R.layout.fragment_frag1, container, false);\n\n        editText = view.findViewById(R.id.frag1ET);\n        button = view.findViewById(R.id.frag1btn);\n\n\n        button.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                String text = editText.getText().toString();\n                Bundle bundle = new Bundle();\n                bundle.putString(&quot;tex&quot;, text);\n                Toast.makeText(getContext(), &quot;&quot;+bundle.toString(), Toast.LENGTH_LONG).show();\n                frag2 f2 = new frag2();\n                f2.setArguments(bundle);\n                editText.setText(&quot;&quot;);\n            }\n        });\n\n        return view;\n    }\n}\n</code></pre>\n<p>frag1.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    tools:context=&quot;.frgmnts.frag1&quot;&gt;\n\n\n    &lt;EditText\n        android:id=&quot;@+id/frag1ET&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_marginTop=&quot;116dp&quot;\n        android:ems=&quot;10&quot;\n        android:hint=&quot;Enter text&quot;\n        android:inputType=&quot;textPersonName&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.497&quot;\n        app:layout_constraintLeft_toLeftOf=&quot;parent&quot;\n        app:layout_constraintRight_toRightOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n\n    &lt;Button\n        android:id=&quot;@+id/frag1btn&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_marginTop=&quot;28dp&quot;\n        android:text=&quot;Button&quot;\n        app:layout_constraintEnd_toEndOf=&quot;@+id/frag1ET&quot;\n        app:layout_constraintStart_toStartOf=&quot;@+id/frag1ET&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@+id/frag1ET&quot; /&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/frag1tv&quot;\n        android:layout_width=&quot;260dp&quot;\n        android:layout_height=&quot;56dp&quot;\n        android:layout_marginTop=&quot;56dp&quot;\n        android:textAlignment=&quot;textStart&quot;\n        android:hint=&quot;Text from Frag 2&quot;\n        android:textSize=&quot;20sp&quot;\n        app:layout_constraintEnd_toEndOf=&quot;@+id/frag1ET&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.506&quot;\n        app:layout_constraintStart_toStartOf=&quot;@+id/frag1ET&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@+id/frag1btn&quot; /&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>frag2.java</p>\n<pre><code>public class frag2 extends Fragment {\n    private TextView tv2;\n\n    public frag2(){\n\n    }\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\n        View view = inflater.inflate(R.layout.fragment_frag2, container, false);\n\n        tv2 = view.findViewById(R.id.frag2tv);\n\n\n        return view;\n    }\n\n    @Override\n    public void onResume() {\n        super.onResume();\n        Bundle bundle = getArguments();\n        if (bundle != null) {\n            String text = bundle.getString(&quot;tex&quot;);\n            tv2.setText(text);\n        }\n        else\n            tv2.setText(&quot;Text not received&quot;);\n    }\n}\n</code></pre>\n<p>frag2.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.frgmnts.frag2&quot;&gt;\n\n    &lt;EditText\n        android:id=&quot;@+id/frag2ET&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_marginTop=&quot;116dp&quot;\n        android:ems=&quot;10&quot;\n        android:hint=&quot;Enter text&quot;\n        android:inputType=&quot;textPersonName&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.497&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n\n    &lt;Button\n        android:id=&quot;@+id/frag2btn&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_marginTop=&quot;40dp&quot;\n        android:text=&quot;Button&quot;\n        app:layout_constraintEnd_toEndOf=&quot;@+id/frag2ET&quot;\n        app:layout_constraintStart_toStartOf=&quot;@+id/frag2ET&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@+id/frag2ET&quot; /&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/frag2tv&quot;\n        android:layout_width=&quot;260dp&quot;\n        android:layout_height=&quot;56dp&quot;\n        android:layout_marginTop=&quot;44dp&quot;\n        android:hint=&quot;Text from Frag 1&quot;\n        android:textAlignment=&quot;textStart&quot;\n        android:textSize=&quot;20sp&quot;\n        app:layout_constraintEnd_toEndOf=&quot;@+id/frag2ET&quot;\n        app:layout_constraintStart_toStartOf=&quot;@+id/frag2ET&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@+id/frag2btn&quot; /&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>Any help and inputs in this regard will be helpful. Thank you</p>\n"},{"tags":["java","multithreading","synchronization"],"comments":[{"owner":{"account_id":93935,"reputation":6609,"user_id":256763,"accept_rate":100,"display_name":"yassin"},"score":11,"creation_date":1284814641,"post_id":3741765,"comment_id":3954467,"body_markdown":"Then what is the purpose of using threads? Use a sequential code instead","body":"Then what is the purpose of using threads? Use a sequential code instead"},{"owner":{"account_id":124725,"reputation":2291,"user_id":320007,"accept_rate":70,"display_name":"keshav84"},"score":5,"creation_date":1284815173,"post_id":3741765,"comment_id":3954494,"body_markdown":"this was just a simple code for illustration, i actually have some parts that i want to execute in parallel and then once the results are generated i want to merge the results in certain order","body":"this was just a simple code for illustration, i actually have some parts that i want to execute in parallel and then once the results are generated i want to merge the results in certain order"},{"owner":{"account_id":55151,"reputation":8058,"user_id":165103,"accept_rate":88,"display_name":"Mahmoud Hanafy"},"score":0,"creation_date":1284817342,"post_id":3741765,"comment_id":3954605,"body_markdown":"starting a thread in the way illustrated above is nowhere near readable,try assigning the runnable to a reference variable,that&#39;ll make it more readable","body":"starting a thread in the way illustrated above is nowhere near readable,try assigning the runnable to a reference variable,that&#39;ll make it more readable"},{"owner":{"account_id":124725,"reputation":2291,"user_id":320007,"accept_rate":70,"display_name":"keshav84"},"score":0,"creation_date":1284824018,"post_id":3741765,"comment_id":3955066,"body_markdown":"hi all, the soln from finw does this really nicely, it starts all the tasks together waits for each of the task to complete in order. the merge operation in my case allows this to be optimized futher since the result produced by task &#39;n&#39; can be merged with result from &#39;n+1&#39;, is it possible to achieve this with callables and futures such that if any one of the callable completes then we can execute the merge step or that the main thread is allowed to execute the merge with task n+1","body":"hi all, the soln from finw does this really nicely, it starts all the tasks together waits for each of the task to complete in order. the merge operation in my case allows this to be optimized futher since the result produced by task &#39;n&#39; can be merged with result from &#39;n+1&#39;, is it possible to achieve this with callables and futures such that if any one of the callable completes then we can execute the merge step or that the main thread is allowed to execute the merge with task n+1"}],"answers":[{"tags":[],"owner":{"account_id":42704,"reputation":8824,"user_id":124493,"accept_rate":96,"display_name":"San Jacinto"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1441648523,"creation_date":1284814711,"answer_id":3741773,"question_id":3741765,"body_markdown":"Simply put, the scheduling of threads is indeterminate.\r\n\r\n&lt;strike&gt;`http://www.janeg.ca/scjp/threads/scheduling.html`&lt;/strike&gt; *Dead domain - do not click*\r\n\r\n[WaybackMachine version of the above page][1]\r\n\r\nThe longer answer is that if you want to do this, you&#39;ll need to manually wait for each thread to complete its work before you allow another to run. Note that in this fashion, all the threads will still interleave but they won&#39;t accomplish any work until you give the go-ahead. Have a look at the synchronize reserved word.\r\n\r\n\r\n  [1]: https://web.archive.org/web/20120503024923/http://janeg.ca/scjp/threads/scheduling.html","title":"Ordering threads to run in the order they were created/started","body":"<p>Simply put, the scheduling of threads is indeterminate.</p>\n\n<p><strike><code>http://www.janeg.ca/scjp/threads/scheduling.html</code></strike> <em>Dead domain - do not click</em></p>\n\n<p><a href=\"https://web.archive.org/web/20120503024923/http://janeg.ca/scjp/threads/scheduling.html\" rel=\"nofollow noreferrer\">WaybackMachine version of the above page</a></p>\n\n<p>The longer answer is that if you want to do this, you'll need to manually wait for each thread to complete its work before you allow another to run. Note that in this fashion, all the threads will still interleave but they won't accomplish any work until you give the go-ahead. Have a look at the synchronize reserved word.</p>\n"},{"tags":[],"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1284814744,"creation_date":1284814744,"answer_id":3741775,"question_id":3741765,"body_markdown":"If you need that fine-grained control, you should not use threads but instead look into using a suitable Executor with Callables or Runnables.  See the Executors class for a wide selection.","title":"Ordering threads to run in the order they were created/started","body":"<p>If you need that fine-grained control, you should not use threads but instead look into using a suitable Executor with Callables or Runnables.  See the Executors class for a wide selection.</p>\n"},{"tags":[],"owner":{"account_id":190859,"reputation":18190,"user_id":431053,"accept_rate":88,"display_name":"Peter DeWeese"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1284815540,"creation_date":1284815540,"answer_id":3741815,"question_id":3741765,"body_markdown":"You can chain them  that is, have the first one start the second, the second start the third, etc.  They won&#39;t really be running at the same time except for a bit of overlap when each one is started.\r\n\r\n    public class ThreadOrdering\r\n    {\r\n        public static void main(String[] args)\r\n        {\r\n            MyRunnable[] threads = new MyRunnable[10];//index 0 represents thread 1;\r\n            for(int i=1; i&lt;=10; i++)\r\n                threads[i] = new MyRunnable(i, threads); \r\n            new Thread(threads[0].start);  \r\n        }\r\n    }\r\n\r\n    public class MyRunnable extends Runnable\r\n    {\r\n        int threadNumber;\r\n        MyRunnable[] threads;\r\n\r\n        public MyRunnable(int threadNumber, MyRunnable[] threads)\r\n        {\r\n            this.threadnumber = threadnumber;\r\n            this.threads = threads;\r\n        }\r\n\r\n        public void run()\r\n        {\r\n            System.out.println(threadnumber);\r\n            if(threadnumber!=10)\r\n                new Thread(threadnumber).start();\r\n        }\r\n    }","title":"Ordering threads to run in the order they were created/started","body":"<p>You can chain them  that is, have the first one start the second, the second start the third, etc.  They won't really be running at the same time except for a bit of overlap when each one is started.</p>\n\n<pre><code>public class ThreadOrdering\n{\n    public static void main(String[] args)\n    {\n        MyRunnable[] threads = new MyRunnable[10];//index 0 represents thread 1;\n        for(int i=1; i&lt;=10; i++)\n            threads[i] = new MyRunnable(i, threads); \n        new Thread(threads[0].start);  \n    }\n}\n\npublic class MyRunnable extends Runnable\n{\n    int threadNumber;\n    MyRunnable[] threads;\n\n    public MyRunnable(int threadNumber, MyRunnable[] threads)\n    {\n        this.threadnumber = threadnumber;\n        this.threads = threads;\n    }\n\n    public void run()\n    {\n        System.out.println(threadnumber);\n        if(threadnumber!=10)\n            new Thread(threadnumber).start();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":144311,"reputation":5575,"user_id":353267,"accept_rate":100,"display_name":"jbindel"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1284817103,"creation_date":1284817103,"answer_id":3741889,"question_id":3741765,"body_markdown":"&quot;I actually have some parts that i want to execute in parallel, and then once the results are generated, I want to merge the results in certain order.&quot;  Thanks, this clarifies what you&#39;re asking.\r\n\r\nYou can run them all at once, but the important thing is to get their results in order when the threads finish their computation. Either [`Thread#join()`][1] them in the order in which you want to get their results, or just [`Thread#join()`][1] them all and then iterate through them to get their results.\r\n\r\n    // Joins the threads back to the main thread in the order we want their results.\r\n    public class ThreadOrdering {\r\n        private class MyWorker extends Thread {\r\n            final int input;\r\n            int result;\r\n            MyWorker(final int input) {\r\n                this.input = input;\r\n            }\r\n            @Override\r\n            public void run() {\r\n                this.result = input; // Or some other computation.\r\n            }\r\n            int getResult() { return result; }\r\n        }\r\n\r\n        public static void main(String[] args) throws InterruptedException {\r\n            MyWorker[] workers = new MyWorker[10];\r\n            for(int i=1; i&lt;=10; i++) {\r\n                workers[i] = new MyWorker(i);\r\n                workers[i].start();\r\n            }\r\n\r\n            // Assume it may take a while to do the real computation in the threads.\r\n\r\n            for (MyWorker worker : workers) {\r\n                // This can throw InterruptedException, but we&#39;re just passing that.\r\n                worker.join();\r\n                System.out.println(worker.getResult());\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/lang/Thread.html#join() &quot;Thread#join()&quot;","title":"Ordering threads to run in the order they were created/started","body":"<p>\"I actually have some parts that i want to execute in parallel, and then once the results are generated, I want to merge the results in certain order.\"  Thanks, this clarifies what you're asking.</p>\n\n<p>You can run them all at once, but the important thing is to get their results in order when the threads finish their computation. Either <a href=\"http://download.oracle.com/javase/6/docs/api/java/lang/Thread.html#join()\" rel=\"noreferrer\" title=\"Thread#join()\"><code>Thread#join()</code></a> them in the order in which you want to get their results, or just <a href=\"http://download.oracle.com/javase/6/docs/api/java/lang/Thread.html#join()\" rel=\"noreferrer\" title=\"Thread#join()\"><code>Thread#join()</code></a> them all and then iterate through them to get their results.</p>\n\n<pre><code>// Joins the threads back to the main thread in the order we want their results.\npublic class ThreadOrdering {\n    private class MyWorker extends Thread {\n        final int input;\n        int result;\n        MyWorker(final int input) {\n            this.input = input;\n        }\n        @Override\n        public void run() {\n            this.result = input; // Or some other computation.\n        }\n        int getResult() { return result; }\n    }\n\n    public static void main(String[] args) throws InterruptedException {\n        MyWorker[] workers = new MyWorker[10];\n        for(int i=1; i&lt;=10; i++) {\n            workers[i] = new MyWorker(i);\n            workers[i].start();\n        }\n\n        // Assume it may take a while to do the real computation in the threads.\n\n        for (MyWorker worker : workers) {\n            // This can throw InterruptedException, but we're just passing that.\n            worker.join();\n            System.out.println(worker.getResult());\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":93935,"reputation":6609,"user_id":256763,"accept_rate":100,"display_name":"yassin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1284818487,"creation_date":1284817566,"answer_id":3741922,"question_id":3741765,"body_markdown":"A simple solution would be to use an array `A` of locks (one lock per thread). When thread `i` begins its executions, it acquires its associated lock `A[i]`. When it&#39;s ready to merge its results, it releases its lock `A[i]` and waits for locks `A[0], A[1], ..., A[i - 1]` to be released; then it merges the results.\r\n\r\n(In this context, thread `i` means the `i`-th launched thread)\r\n\r\nI don&#39;t know what classes to use in Java, but it must be easy to implement. You can begin reading [this][1].\r\n\r\nIf you have more questions, feel free to ask.\r\n\r\n  [1]: http://download.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html","title":"Ordering threads to run in the order they were created/started","body":"<p>A simple solution would be to use an array <code>A</code> of locks (one lock per thread). When thread <code>i</code> begins its executions, it acquires its associated lock <code>A[i]</code>. When it's ready to merge its results, it releases its lock <code>A[i]</code> and waits for locks <code>A[0], A[1], ..., A[i - 1]</code> to be released; then it merges the results.</p>\n\n<p>(In this context, thread <code>i</code> means the <code>i</code>-th launched thread)</p>\n\n<p>I don't know what classes to use in Java, but it must be easy to implement. You can begin reading <a href=\"http://download.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html\" rel=\"nofollow noreferrer\">this</a>.</p>\n\n<p>If you have more questions, feel free to ask.</p>\n"},{"tags":[],"owner":{"account_id":7052,"reputation":48090,"user_id":12048,"accept_rate":94,"display_name":"finnw"},"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1284820514,"creation_date":1284819897,"answer_id":3742031,"question_id":3741765,"body_markdown":"Sounds like you want &lt;code&gt;[ExecutorService.invokeAll](http://download.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html#invokeAll%28java.util.Collection%29)&lt;/code&gt;, which will return results from worker threads in a fixed order, even though they may be scheduled in arbitrary order:\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import java.util.concurrent.Callable;\r\n    import java.util.concurrent.ExecutionException;\r\n    import java.util.concurrent.ExecutorService;\r\n    import java.util.concurrent.Executors;\r\n    import java.util.concurrent.Future;\r\n    \r\n    public class ThreadOrdering {\r\n    \r\n        static int NUM_THREADS = 10;\r\n    \r\n        public static void main(String[] args) {\r\n            ExecutorService exec = Executors.newFixedThreadPool(NUM_THREADS);\r\n            class MyCallable implements Callable&lt;Integer&gt; {\r\n                private final int threadnumber;\r\n    \r\n                MyCallable(int threadnumber){\r\n                    this.threadnumber = threadnumber;\r\n                }\r\n    \r\n                public Integer call() {\r\n                    System.out.println(&quot;Running thread #&quot; + threadnumber);\r\n                    return threadnumber;\r\n                }\r\n            }\r\n    \r\n            List&lt;Callable&lt;Integer&gt;&gt; callables =\r\n                new ArrayList&lt;Callable&lt;Integer&gt;&gt;();\r\n            for(int i=1; i&lt;=NUM_THREADS; i++) {\r\n                callables.add(new MyCallable(i));\r\n            }\r\n            try {\r\n                List&lt;Future&lt;Integer&gt;&gt; results =\r\n                    exec.invokeAll(callables);\r\n                for(Future&lt;Integer&gt; result: results) {\r\n                    System.out.println(&quot;Got result of thread #&quot; + result.get());\r\n                }\r\n            } catch (InterruptedException ex) {\r\n                ex.printStackTrace();\r\n            } catch (ExecutionException ex) {\r\n                ex.printStackTrace();\r\n            } finally {\r\n                exec.shutdownNow();\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\n","title":"Ordering threads to run in the order they were created/started","body":"<p>Sounds like you want <code><a href=\"http://download.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html#invokeAll%28java.util.Collection%29\" rel=\"noreferrer\">ExecutorService.invokeAll</a></code>, which will return results from worker threads in a fixed order, even though they may be scheduled in arbitrary order:</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\nimport java.util.concurrent.Callable;\nimport java.util.concurrent.ExecutionException;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\nimport java.util.concurrent.Future;\n\npublic class ThreadOrdering {\n\n    static int NUM_THREADS = 10;\n\n    public static void main(String[] args) {\n        ExecutorService exec = Executors.newFixedThreadPool(NUM_THREADS);\n        class MyCallable implements Callable&lt;Integer&gt; {\n            private final int threadnumber;\n\n            MyCallable(int threadnumber){\n                this.threadnumber = threadnumber;\n            }\n\n            public Integer call() {\n                System.out.println(\"Running thread #\" + threadnumber);\n                return threadnumber;\n            }\n        }\n\n        List&lt;Callable&lt;Integer&gt;&gt; callables =\n            new ArrayList&lt;Callable&lt;Integer&gt;&gt;();\n        for(int i=1; i&lt;=NUM_THREADS; i++) {\n            callables.add(new MyCallable(i));\n        }\n        try {\n            List&lt;Future&lt;Integer&gt;&gt; results =\n                exec.invokeAll(callables);\n            for(Future&lt;Integer&gt; result: results) {\n                System.out.println(\"Got result of thread #\" + result.get());\n            }\n        } catch (InterruptedException ex) {\n            ex.printStackTrace();\n        } catch (ExecutionException ex) {\n            ex.printStackTrace();\n        } finally {\n            exec.shutdownNow();\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":40256,"reputation":46474,"user_id":116639,"accept_rate":25,"display_name":"Tom Anderson"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1284820152,"creation_date":1284820152,"answer_id":3742051,"question_id":3741765,"body_markdown":"Here&#39;s a way to do it without having a master thread that waits for each result. Instead, have the worker threads share an object which orders the results.\r\n\r\n    import java.util.*;\r\n    \r\n    public class OrderThreads {\r\n    \tpublic static void main(String... args) {\r\n    \t\tResults results = new Results();\r\n    \t\tnew Thread(new Task(0, &quot;red&quot;, results)).start();\r\n    \t\tnew Thread(new Task(1, &quot;orange&quot;, results)).start();\r\n    \t\tnew Thread(new Task(2, &quot;yellow&quot;, results)).start();\r\n    \t\tnew Thread(new Task(3, &quot;green&quot;, results)).start();\r\n    \t\tnew Thread(new Task(4, &quot;blue&quot;, results)).start();\r\n    \t\tnew Thread(new Task(5, &quot;indigo&quot;, results)).start();\r\n    \t\tnew Thread(new Task(6, &quot;violet&quot;, results)).start();\r\n    \t}\r\n    }\r\n    \r\n    class Results {\r\n    \tprivate List&lt;String&gt; results = new ArrayList&lt;String&gt;();\r\n    \tprivate int i = 0;\r\n    \t\r\n    \tpublic synchronized void submit(int order, String result) {\r\n    \t\twhile (results.size() &lt;= order) results.add(null);\r\n    \t\tresults.set(order, result);\r\n    \t\twhile ((i &lt; results.size()) &amp;&amp; (results.get(i) != null)) {\r\n    \t\t\tSystem.out.println(&quot;result delivered: &quot; + i + &quot; &quot; + results.get(i));\r\n    \t\t\t++i;\r\n    \t\t}\r\n    \t}\r\n    }\r\n    \r\n    \r\n    class Task implements Runnable {\r\n    \tprivate final int order;\r\n    \tprivate final String result;\r\n    \tprivate final Results results;\r\n    \t\r\n    \tpublic Task(int order, String result, Results results) {\r\n    \t\tthis.order = order;\r\n    \t\tthis.result = result;\r\n    \t\tthis.results = results;\r\n    \t}\r\n    \t\r\n    \tpublic void run() {\r\n    \t\ttry {\r\n    \t\t\tThread.sleep(Math.abs(result.hashCode() % 1000)); // simulate a long-running computation\r\n    \t\t}\r\n    \t\tcatch (InterruptedException e) {} // you&#39;d want to think about what to do if interrupted\r\n    \t\tSystem.out.println(&quot;task finished: &quot; + order + &quot; &quot; + result);\r\n    \t\tresults.submit(order, result);\r\n    \t}\r\n    }\r\n\r\n","title":"Ordering threads to run in the order they were created/started","body":"<p>Here's a way to do it without having a master thread that waits for each result. Instead, have the worker threads share an object which orders the results.</p>\n\n<pre><code>import java.util.*;\n\npublic class OrderThreads {\n    public static void main(String... args) {\n        Results results = new Results();\n        new Thread(new Task(0, \"red\", results)).start();\n        new Thread(new Task(1, \"orange\", results)).start();\n        new Thread(new Task(2, \"yellow\", results)).start();\n        new Thread(new Task(3, \"green\", results)).start();\n        new Thread(new Task(4, \"blue\", results)).start();\n        new Thread(new Task(5, \"indigo\", results)).start();\n        new Thread(new Task(6, \"violet\", results)).start();\n    }\n}\n\nclass Results {\n    private List&lt;String&gt; results = new ArrayList&lt;String&gt;();\n    private int i = 0;\n\n    public synchronized void submit(int order, String result) {\n        while (results.size() &lt;= order) results.add(null);\n        results.set(order, result);\n        while ((i &lt; results.size()) &amp;&amp; (results.get(i) != null)) {\n            System.out.println(\"result delivered: \" + i + \" \" + results.get(i));\n            ++i;\n        }\n    }\n}\n\n\nclass Task implements Runnable {\n    private final int order;\n    private final String result;\n    private final Results results;\n\n    public Task(int order, String result, Results results) {\n        this.order = order;\n        this.result = result;\n        this.results = results;\n    }\n\n    public void run() {\n        try {\n            Thread.sleep(Math.abs(result.hashCode() % 1000)); // simulate a long-running computation\n        }\n        catch (InterruptedException e) {} // you'd want to think about what to do if interrupted\n        System.out.println(\"task finished: \" + order + \" \" + result);\n        results.submit(order, result);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2127621,"reputation":1565,"user_id":1889310,"accept_rate":0,"display_name":"Diana"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1405598340,"creation_date":1355052875,"answer_id":13787010,"question_id":3741765,"body_markdown":"    public static void main(String[] args) throws InterruptedException{\r\n\t\tMyRunnable r = new MyRunnable();\r\n\t\tThread t1 = new Thread(r,&quot;A&quot;);\r\n\t\tThread t2 = new Thread(r,&quot;B&quot;);\r\n\t\tThread t3 = new Thread(r,&quot;C&quot;);\r\n\t\t\r\n\t\tt1.start();\r\n\t\tThread.sleep(1000);\r\n\t\t\r\n\t\tt2.start();\r\n\t\tThread.sleep(1000);\r\n\t\tt3.start();\r\n\t}","title":"Ordering threads to run in the order they were created/started","body":"<pre><code>public static void main(String[] args) throws InterruptedException{\n    MyRunnable r = new MyRunnable();\n    Thread t1 = new Thread(r,\"A\");\n    Thread t2 = new Thread(r,\"B\");\n    Thread t3 = new Thread(r,\"C\");\n\n    t1.start();\n    Thread.sleep(1000);\n\n    t2.start();\n    Thread.sleep(1000);\n    t3.start();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4228142,"reputation":1,"user_id":7990942,"display_name":"Marek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1494409914,"creation_date":1494409914,"answer_id":43889005,"question_id":3741765,"body_markdown":"Control of thread execution order may be implemented quite easily with the semaphores. The code attached is based on the ideas presented in Schildt&#39;s book on Java (The complete reference....).\r\n\t// Based on the ideas presented in:\r\n\t// Schildt H.: Java.The.Complete.Reference.9th.Edition.\r\n\r\n\timport java.util.concurrent.Semaphore;\r\n\r\n\tclass Manager {\r\n\t\tint n;\r\n\t// Initially red on semaphores 2&amp;3; green semaphore 1.\r\n\t\tstatic Semaphore SemFirst = new Semaphore(1);\r\n\t\tstatic Semaphore SemSecond = new Semaphore(0);\r\n\t\tstatic Semaphore SemThird = new Semaphore(0);\r\n\r\n\tvoid firstAction () {\r\n\t\ttry {\r\n\t\t\tSemFirst.acquire();\r\n\t\t} catch(InterruptedException e) {\r\n\t\t\tSystem.out.println(&quot;Exception InterruptedException catched&quot;);\r\n\t\t}\r\n\t\tSystem.out.println(&quot;First: &quot; );\r\n\t\tSystem.out.println(&quot;-----&gt; 111&quot;);\r\n\t\tSemSecond.release();\r\n\t}\r\n\tvoid secondAction() {\r\n\t\ttry{\r\n\t\t\tSemSecond.acquire();\r\n\t\t} catch(InterruptedException e) {\r\n\t\t\tSystem.out.println(&quot;Exception InterruptedException catched&quot;);\r\n\t\t}\r\n\t\tSystem.out.println(&quot;Second: &quot;);\r\n\t\tSystem.out.println(&quot;-----&gt; 222&quot;);\r\n\t\tSemThird.release();\r\n\t}\r\n\tvoid thirdAction() {\r\n\t\ttry{\r\n\t\t\tSemThird.acquire();\r\n\t\t} catch(InterruptedException e) {\r\n\t\t\tSystem.out.println(&quot;Exception InterruptedException catched&quot;);\r\n\t\t}\r\n\t\tSystem.out.println(&quot;Third: &quot;);\r\n\t\tSystem.out.println(&quot;-----&gt; 333&quot;);\r\n\t\tSemFirst.release();\r\n\t}\r\n\t}\r\n\r\n\tclass Thread1 implements Runnable {\r\n\t\tManager q;\r\n   \r\n\t\tThread1(Manager q) {\r\n\t\tthis.q = q;\r\n\t\tnew Thread(this, &quot;Thread1&quot;).start();\r\n\t}\r\n  \r\n\tpublic void run() {\r\n\t\tq.firstAction();\r\n\t}\r\n\t}\r\n\r\n\tclass Thread2 implements Runnable {\r\n\t\tManager q;\r\n\r\n\t\tThread2(Manager q) {\r\n\t\tthis.q = q;\r\n\t\tnew Thread(this, &quot;Thread2&quot;).start();\r\n\t}\r\n\r\n\tpublic void run() {\r\n\t\tq.secondAction();\r\n\t}\r\n\t}\r\n\r\n\tclass Thread3 implements Runnable {\r\n\t\tManager q;\r\n\r\n\t\tThread3(Manager q) {\r\n\t\tthis.q = q;\r\n\t\tnew Thread(this, &quot;Thread3&quot;).start();\r\n\t}\r\n\r\n\tpublic void run() {\r\n\t\tq.thirdAction();\r\n\t}\r\n\t}\r\n\r\n\tclass ThreadOrder {\r\n\t\tpublic static void main(String args[]) {\r\n\t\tManager q = new Manager();\r\n\t\tnew Thread3(q);\r\n\t\tnew Thread2(q);\r\n\t\tnew Thread1(q);\r\n\t\t}\r\n\t}\r\n","title":"Ordering threads to run in the order they were created/started","body":"<p>Control of thread execution order may be implemented quite easily with the semaphores. The code attached is based on the ideas presented in Schildt's book on Java (The complete reference....).\n    // Based on the ideas presented in:\n    // Schildt H.: Java.The.Complete.Reference.9th.Edition.</p>\n\n<pre><code>import java.util.concurrent.Semaphore;\n\nclass Manager {\n    int n;\n// Initially red on semaphores 2&amp;3; green semaphore 1.\n    static Semaphore SemFirst = new Semaphore(1);\n    static Semaphore SemSecond = new Semaphore(0);\n    static Semaphore SemThird = new Semaphore(0);\n\nvoid firstAction () {\n    try {\n        SemFirst.acquire();\n    } catch(InterruptedException e) {\n        System.out.println(\"Exception InterruptedException catched\");\n    }\n    System.out.println(\"First: \" );\n    System.out.println(\"-----&gt; 111\");\n    SemSecond.release();\n}\nvoid secondAction() {\n    try{\n        SemSecond.acquire();\n    } catch(InterruptedException e) {\n        System.out.println(\"Exception InterruptedException catched\");\n    }\n    System.out.println(\"Second: \");\n    System.out.println(\"-----&gt; 222\");\n    SemThird.release();\n}\nvoid thirdAction() {\n    try{\n        SemThird.acquire();\n    } catch(InterruptedException e) {\n        System.out.println(\"Exception InterruptedException catched\");\n    }\n    System.out.println(\"Third: \");\n    System.out.println(\"-----&gt; 333\");\n    SemFirst.release();\n}\n}\n\nclass Thread1 implements Runnable {\n    Manager q;\n\n    Thread1(Manager q) {\n    this.q = q;\n    new Thread(this, \"Thread1\").start();\n}\n\npublic void run() {\n    q.firstAction();\n}\n}\n\nclass Thread2 implements Runnable {\n    Manager q;\n\n    Thread2(Manager q) {\n    this.q = q;\n    new Thread(this, \"Thread2\").start();\n}\n\npublic void run() {\n    q.secondAction();\n}\n}\n\nclass Thread3 implements Runnable {\n    Manager q;\n\n    Thread3(Manager q) {\n    this.q = q;\n    new Thread(this, \"Thread3\").start();\n}\n\npublic void run() {\n    q.thirdAction();\n}\n}\n\nclass ThreadOrder {\n    public static void main(String args[]) {\n    Manager q = new Manager();\n    new Thread3(q);\n    new Thread2(q);\n    new Thread1(q);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13684630,"reputation":101,"user_id":9874027,"display_name":"sankar banerjee"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1528042826,"creation_date":1527944581,"answer_id":50657206,"question_id":3741765,"body_markdown":"This can be done **without using synchronized keyword** and with the help of **volatile** keyword. Following is the code.\r\n\r\n    package threadOrderingVolatile;\r\n    \r\n    public class Solution {\r\n    \tstatic volatile int counter = 0;\r\n    \tstatic int print = 1;\r\n    \tstatic char c = &#39;A&#39;;\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\tThread[] ths = new Thread[4];\r\n    \t\tfor (int i = 0; i &lt; ths.length; i++) {\r\n    \t\t\tths[i] = new Thread(new MyRunnable(i, ths.length));\r\n    \t\t\tths[i].start();\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tstatic class MyRunnable implements Runnable {\r\n    \t\tfinal int thID;\r\n    \t\tfinal int total;\r\n    \r\n    \t\tpublic MyRunnable(int id, int total) {\r\n    \t\t\tthID = id;\r\n    \t\t\tthis.total = total;\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic void run() {\r\n    \t\t\twhile(true) {\r\n    \t\t\t\tif (thID == (counter%total)) {\r\n    \t\t\t\t\tSystem.out.println(&quot;thread &quot; + thID + &quot; prints &quot; + c);\r\n    \t\t\t\t\tif(c==&#39;Z&#39;){\r\n    \t\t\t\t\t\tc=&#39;A&#39;;\r\n    \t\t\t\t\t}else{\r\n    \t\t\t\t\t\tc=(char)((int)c+1);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\tSystem.out.println(&quot;thread &quot; + thID + &quot; prints &quot; + print++);\r\n    \t\t\t\t\tcounter++;\t\t\t\t\t\r\n    \t\t\t\t} else {\r\n    \t\t\t\t\ttry {\r\n    \t\t\t\t\t\tThread.sleep(30);\r\n    \t\t\t\t\t} catch (InterruptedException e) {\r\n    \t\t\t\t\t\t// log it\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    }\r\n\r\nFollowing is the github link which has a readme, that gives detailed explanation about how it happens.\r\nhttps://github.com/sankar4git/volatile_thread_ordering\r\n","title":"Ordering threads to run in the order they were created/started","body":"<p>This can be done <strong>without using synchronized keyword</strong> and with the help of <strong>volatile</strong> keyword. Following is the code.</p>\n\n<pre><code>package threadOrderingVolatile;\n\npublic class Solution {\n    static volatile int counter = 0;\n    static int print = 1;\n    static char c = 'A';\n\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        Thread[] ths = new Thread[4];\n        for (int i = 0; i &lt; ths.length; i++) {\n            ths[i] = new Thread(new MyRunnable(i, ths.length));\n            ths[i].start();\n        }\n    }\n\n    static class MyRunnable implements Runnable {\n        final int thID;\n        final int total;\n\n        public MyRunnable(int id, int total) {\n            thID = id;\n            this.total = total;\n        }\n\n        @Override\n        public void run() {\n            while(true) {\n                if (thID == (counter%total)) {\n                    System.out.println(\"thread \" + thID + \" prints \" + c);\n                    if(c=='Z'){\n                        c='A';\n                    }else{\n                        c=(char)((int)c+1);\n                    }\n                    System.out.println(\"thread \" + thID + \" prints \" + print++);\n                    counter++;                  \n                } else {\n                    try {\n                        Thread.sleep(30);\n                    } catch (InterruptedException e) {\n                        // log it\n                    }\n                }\n            }\n        }\n\n    }\n\n}\n</code></pre>\n\n<p>Following is the github link which has a readme, that gives detailed explanation about how it happens.\n<a href=\"https://github.com/sankar4git/volatile_thread_ordering\" rel=\"nofollow noreferrer\">https://github.com/sankar4git/volatile_thread_ordering</a></p>\n"},{"tags":[],"owner":{"account_id":1972029,"reputation":4738,"user_id":1770724,"accept_rate":43,"display_name":"quickbug"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681100535,"creation_date":1681099689,"answer_id":75974206,"question_id":3741765,"body_markdown":"In case someone needs, this is my take at this problem in Python. My approach is to use a deque. Each instance of the class places itself on the queue, does the working task right at construction, then waits for the previous member of the queue to terminate its output to do his. The trick is that each instance has two locks (aka semaphores) to control printing. One which is copied from the last instance entered in the queue: I wil wait for this lock to print. Another one that is created and locked at construction. The next instance to enter the queue will copy that one and will have to wait for me to release it, which I will do after my printing is done.\r\n\r\n    import random\r\n    from functools import \\\r\n        partial  # an object made of a function ready to call with prefilled arguments\r\n    import threading, time\r\n    from collections import deque\r\n    \r\n    printing_lock = threading.Lock()  # for debuging: avoid threads printing debug infos in the middle of each other\r\n    \r\n    \r\n    class WorkNowPrintLater:\r\n        def __init__(self, id: int, work_func: partial, print_func: partial, my_queue: deque, queue_lock: threading.Lock):\r\n            &quot;&quot;&quot;\r\n            Create an instance of this class does the whole thing:\r\n                1/ do some job immediately\r\n                2/ do some other job (usually an output) in the same order as instances were created\r\n            :param id:\r\n                id of this instance. for debug purpose only\r\n            :param work_func:\r\n                the working function.\r\n                Note for non python users: a partial is an object made of a function with its arguments\r\n                already in place, ready to launch\r\n            :param print_func:\r\n                the output function\r\n            :param my_queue:\r\n                a double-end-queue (deque) where each instance of WorkNowPrintLater will put itself on construction\r\n                Must be the same for all instances to synchronize\r\n            :param queue_lock:\r\n                a semaphore to protect access to the queue\r\n                Must be the same for all instances to synchronize\r\n            &quot;&quot;&quot;\r\n            with printing_lock:\r\n                print(f&quot;{id} being created&quot;)\r\n            self.id = id\r\n            self.work_func = work_func\r\n            self.print_func = print_func\r\n            self.my_queue = my_queue\r\n            self.queue_lock = queue_lock\r\n            self.done = False\r\n            self.lock_i_wait_before_i_printing = threading.Lock() if len(my_queue) == 0 else my_queue[\r\n                -1].lock_you_wait_before_you_print\r\n            self.lock_you_wait_before_you_print = threading.Lock()\r\n            self.lock_you_wait_before_you_print.acquire()  # Block access to printer to the next element in the queue until I&#39;m done\r\n    \r\n            with printing_lock:\r\n                print(f&quot;{self.id} waits for queue lock to put myself in&quot;)\r\n            with self.queue_lock:\r\n                self.my_queue.append(self)\r\n    \r\n            my_worker = threading.Thread(target=self.worker)\r\n            my_worker.start()\r\n            print(f&quot;{id} is alive&quot;)\r\n    \r\n        def worker(self):\r\n            with printing_lock:\r\n                print(f&quot;{self.id} working starts&quot;)\r\n            self.work_func()\r\n    \r\n            with printing_lock:\r\n                print(f&quot;{self.id} working done. wait for printer&quot;)\r\n            with self.lock_i_wait_before_i_printing:\r\n                self.print_func()\r\n                self.lock_you_wait_before_you_print.release()\r\n                self.done = True\r\n    \r\n            with printing_lock:\r\n                print(f&quot;{self.id} waits for queue lock to do housekeeping&quot;)\r\n            with self.queue_lock:\r\n                with printing_lock:\r\n                    print(f&quot;{self.id} housekeeping starts&quot;)\r\n                if len(self.my_queue) &lt;= 1:\r\n                    return\r\n                while self.my_queue[0].done and len(self.my_queue) &gt;= 2:\r\n                    _ = self.my_queue.popleft()\r\n    \r\n\r\n     &quot;&quot;&quot; MAIN PROGRAM &quot;&quot;&quot;\r\n\r\n\r\n    threads_queue = deque()\r\n    semaphore = threading.Lock()\r\n    \r\n    \r\n    def wait(id):\r\n        t = random.random() * 10\r\n        print(f&quot;{id} is working for {t} seconds&quot;)\r\n        time.sleep(t)\r\n    \r\n    \r\n    def output(id):\r\n        print(f&quot;output {id}&quot;)\r\n    \r\n    \r\n    for i in range(5):\r\n        _ = WorkNowPrintLater(i, partial(wait, i), partial(output, i), threads_queue, semaphore)\r\n\r\n","title":"Ordering threads to run in the order they were created/started","body":"<p>In case someone needs, this is my take at this problem in Python. My approach is to use a deque. Each instance of the class places itself on the queue, does the working task right at construction, then waits for the previous member of the queue to terminate its output to do his. The trick is that each instance has two locks (aka semaphores) to control printing. One which is copied from the last instance entered in the queue: I wil wait for this lock to print. Another one that is created and locked at construction. The next instance to enter the queue will copy that one and will have to wait for me to release it, which I will do after my printing is done.</p>\n<pre><code>import random\nfrom functools import \\\n    partial  # an object made of a function ready to call with prefilled arguments\nimport threading, time\nfrom collections import deque\n\nprinting_lock = threading.Lock()  # for debuging: avoid threads printing debug infos in the middle of each other\n\n\nclass WorkNowPrintLater:\n    def __init__(self, id: int, work_func: partial, print_func: partial, my_queue: deque, queue_lock: threading.Lock):\n        &quot;&quot;&quot;\n        Create an instance of this class does the whole thing:\n            1/ do some job immediately\n            2/ do some other job (usually an output) in the same order as instances were created\n        :param id:\n            id of this instance. for debug purpose only\n        :param work_func:\n            the working function.\n            Note for non python users: a partial is an object made of a function with its arguments\n            already in place, ready to launch\n        :param print_func:\n            the output function\n        :param my_queue:\n            a double-end-queue (deque) where each instance of WorkNowPrintLater will put itself on construction\n            Must be the same for all instances to synchronize\n        :param queue_lock:\n            a semaphore to protect access to the queue\n            Must be the same for all instances to synchronize\n        &quot;&quot;&quot;\n        with printing_lock:\n            print(f&quot;{id} being created&quot;)\n        self.id = id\n        self.work_func = work_func\n        self.print_func = print_func\n        self.my_queue = my_queue\n        self.queue_lock = queue_lock\n        self.done = False\n        self.lock_i_wait_before_i_printing = threading.Lock() if len(my_queue) == 0 else my_queue[\n            -1].lock_you_wait_before_you_print\n        self.lock_you_wait_before_you_print = threading.Lock()\n        self.lock_you_wait_before_you_print.acquire()  # Block access to printer to the next element in the queue until I'm done\n\n        with printing_lock:\n            print(f&quot;{self.id} waits for queue lock to put myself in&quot;)\n        with self.queue_lock:\n            self.my_queue.append(self)\n\n        my_worker = threading.Thread(target=self.worker)\n        my_worker.start()\n        print(f&quot;{id} is alive&quot;)\n\n    def worker(self):\n        with printing_lock:\n            print(f&quot;{self.id} working starts&quot;)\n        self.work_func()\n\n        with printing_lock:\n            print(f&quot;{self.id} working done. wait for printer&quot;)\n        with self.lock_i_wait_before_i_printing:\n            self.print_func()\n            self.lock_you_wait_before_you_print.release()\n            self.done = True\n\n        with printing_lock:\n            print(f&quot;{self.id} waits for queue lock to do housekeeping&quot;)\n        with self.queue_lock:\n            with printing_lock:\n                print(f&quot;{self.id} housekeeping starts&quot;)\n            if len(self.my_queue) &lt;= 1:\n                return\n            while self.my_queue[0].done and len(self.my_queue) &gt;= 2:\n                _ = self.my_queue.popleft()\n\n\n &quot;&quot;&quot; MAIN PROGRAM &quot;&quot;&quot;\n\n\nthreads_queue = deque()\nsemaphore = threading.Lock()\n\n\ndef wait(id):\n    t = random.random() * 10\n    print(f&quot;{id} is working for {t} seconds&quot;)\n    time.sleep(t)\n\n\ndef output(id):\n    print(f&quot;output {id}&quot;)\n\n\nfor i in range(5):\n    _ = WorkNowPrintLater(i, partial(wait, i), partial(output, i), threads_queue, semaphore)\n</code></pre>\n"}],"owner":{"account_id":124725,"reputation":2291,"user_id":320007,"accept_rate":70,"display_name":"keshav84"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37153,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":3742031,"answer_count":11,"score":12,"last_activity_date":1681100535,"creation_date":1284814517,"question_id":3741765,"body_markdown":"How can i order threads in the order they were instantiated.e.g. how can i make the below program print the numbers 1...10 in order.\r\n\r\n    public class ThreadOrdering {\r\n    \tpublic static void main(String[] args) {\r\n    \t\t\r\n    \t\tclass MyRunnable implements Runnable{\r\n    \t\t\tprivate final int threadnumber;\r\n    \r\n    \t\t\tMyRunnable(int threadnumber){\r\n    \t\t\t\tthis.threadnumber = threadnumber;\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\tpublic void run() {\r\n    \t\t\t\tSystem.out.println(threadnumber);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\t\r\n    \t\tfor(int i=1; i&lt;=10; i++){\r\n    \t\t\tnew Thread(new MyRunnable(i)).start();\r\n    \t\t}\r\n    \t}\r\n    }","title":"Ordering threads to run in the order they were created/started","body":"<p>How can i order threads in the order they were instantiated.e.g. how can i make the below program print the numbers 1...10 in order.</p>\n\n<pre><code>public class ThreadOrdering {\n    public static void main(String[] args) {\n\n        class MyRunnable implements Runnable{\n            private final int threadnumber;\n\n            MyRunnable(int threadnumber){\n                this.threadnumber = threadnumber;\n            }\n\n            public void run() {\n                System.out.println(threadnumber);\n            }\n        }\n\n        for(int i=1; i&lt;=10; i++){\n            new Thread(new MyRunnable(i)).start();\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":20582528,"reputation":71,"user_id":15108250,"display_name":"Nemo9703"},"score":2,"creation_date":1681094010,"post_id":75973923,"comment_id":133998235,"body_markdown":"You&#39;re splitting the array into parts which are all of type ```String```. To convert this to an int, you need the ```Integer.parseInt()``` method.","body":"You&#39;re splitting the array into parts which are all of type <code>String</code>. To convert this to an int, you need the <code>Integer.parseInt()</code> method."},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1681094022,"post_id":75973923,"comment_id":133998237,"body_markdown":"I might be tempted to use a `Scanner`","body":"I might be tempted to use a <code>Scanner</code>"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1681103935,"post_id":75973923,"comment_id":133998977,"body_markdown":"Search Stack Overflow before posting.","body":"Search Stack Overflow before posting."}],"answers":[{"tags":[],"owner":{"account_id":20780824,"reputation":29180,"user_id":15261315,"display_name":"Chris"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1681094012,"creation_date":1681094012,"answer_id":75973935,"question_id":75973923,"body_markdown":"You have to explicitly convert from `String` to `int`. Java will not do this for you automatically.\r\n\r\n```\r\nnumfields[0] = Integer.parseInt(fields[2]);\r\n// and so on...\r\n```\r\n\r\nPresumably this line of data pertains to a single &quot;thing&quot; in whatever problem you&#39;re working on. Parallel arrays area bad habit to get into. Rather you want one array/list/whatever composed of objects which hold all of the data pertaining to a single &quot;thing.&quot;","title":"How to convert string to int in array","body":"<p>You have to explicitly convert from <code>String</code> to <code>int</code>. Java will not do this for you automatically.</p>\n<pre><code>numfields[0] = Integer.parseInt(fields[2]);\n// and so on...\n</code></pre>\n<p>Presumably this line of data pertains to a single &quot;thing&quot; in whatever problem you're working on. Parallel arrays area bad habit to get into. Rather you want one array/list/whatever composed of objects which hold all of the data pertaining to a single &quot;thing.&quot;</p>\n"},{"tags":[],"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681094289,"creation_date":1681094289,"answer_id":75973950,"question_id":75973923,"body_markdown":"Personally, I might be tempted to make use of another `Scanner` to parse the line, for example...\r\n\r\n    String line = &quot;Barrett Edan 70 45 59&quot;;\r\n    Scanner scanner = new Scanner(line);\r\n    String firstName = scanner.next();\r\n    String lastName = scanner.next();\r\n    while (scanner.hasNextInt()) {\r\n        System.out.println(scanner.nextInt());\r\n    }\r\n\r\nNow, you &quot;could&quot; make use of the `reader` to do this directly, but I&#39;d find it easier to use a seperate `Scanner`, but that&#39;s me","title":"How to convert string to int in array","body":"<p>Personally, I might be tempted to make use of another <code>Scanner</code> to parse the line, for example...</p>\n<pre><code>String line = &quot;Barrett Edan 70 45 59&quot;;\nScanner scanner = new Scanner(line);\nString firstName = scanner.next();\nString lastName = scanner.next();\nwhile (scanner.hasNextInt()) {\n    System.out.println(scanner.nextInt());\n}\n</code></pre>\n<p>Now, you &quot;could&quot; make use of the <code>reader</code> to do this directly, but I'd find it easier to use a seperate <code>Scanner</code>, but that's me</p>\n"},{"tags":[],"owner":{"account_id":8762570,"reputation":1,"user_id":6552124,"display_name":"Manish Vishwakarma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681099831,"creation_date":1681098029,"answer_id":75974127,"question_id":75973923,"body_markdown":"You should first check that array element is integer or not then convert element from string to int using **Integer.parseInt(String s)** method. \r\n\r\nOne example of your code:\r\n\r\n    if (isInteger(fields[2])) {\r\n\t    numfields[0] = Integer.parseInt(fields[2]);\r\n\t}\r\n## helper method\r\n\r\n```java\r\npublic static boolean isInteger(String s) {\r\n    try {\r\n        Integer.parseInt(s);\r\n    } catch (NumberFormatException nfe) {\r\n        // if provided string is not an integer\r\n\t  return false;\r\n    }\r\n\t // if provided string is an integer\r\n\t return true;\r\n}\r\n```","title":"How to convert string to int in array","body":"<p>You should first check that array element is integer or not then convert element from string to int using <strong>Integer.parseInt(String s)</strong> method.</p>\n<p>One example of your code:</p>\n<pre><code>if (isInteger(fields[2])) {\n    numfields[0] = Integer.parseInt(fields[2]);\n}\n</code></pre>\n<h2>helper method</h2>\n<pre class=\"lang-java prettyprint-override\"><code>public static boolean isInteger(String s) {\n    try {\n        Integer.parseInt(s);\n    } catch (NumberFormatException nfe) {\n        // if provided string is not an integer\n      return false;\n    }\n     // if provided string is an integer\n     return true;\n}\n</code></pre>\n"}],"owner":{"account_id":28261252,"reputation":9,"user_id":21605921,"display_name":"Jah"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1681103927,"accepted_answer_id":75973935,"answer_count":3,"score":-2,"last_activity_date":1681099831,"creation_date":1681093834,"question_id":75973923,"body_markdown":"Im trying to read a line of file that has words and numbers in it and save it into a array\r\n\r\nThe file reads:\r\n\r\nBarrett    Edan    70  45  59\r\n\r\n\r\nPart of the code that has a problem:\r\n\r\n    ** let it be known that field was declared as a string array earlier in the code**\r\n    String [] fields = new String[100];\r\n    int [] numfields = new int[100];\r\n\r\n    while (reader.hasNext()) {     //while reader reads a line\r\n      line = reader.nextLine();  //line reads reach line of file\r\n      fields = line.split(&quot;\\t&quot;);  //splits line by tab space and saves it into fields\r\n      \r\n      last[count] = fields[0];   // saves first word to first element of array\r\n      first[count] = fields[1]; //saves second word to second element\r\n      numfields[0] = fields[2]; /* THE PROBLEM: now i expected the 3rd word (70) of fields to be able to save into numfields array , but thats when i get cannot be converted to int error\r\n      numfields[1] = fields[3];\r\n      numfields[2] = fields[4];    */\r\n   ","title":"How to convert string to int in array","body":"<p>Im trying to read a line of file that has words and numbers in it and save it into a array</p>\n<p>The file reads:</p>\n<p>Barrett    Edan    70  45  59</p>\n<p>Part of the code that has a problem:</p>\n<pre><code>** let it be known that field was declared as a string array earlier in the code**\nString [] fields = new String[100];\nint [] numfields = new int[100];\n\nwhile (reader.hasNext()) {     //while reader reads a line\n  line = reader.nextLine();  //line reads reach line of file\n  fields = line.split(&quot;\\t&quot;);  //splits line by tab space and saves it into fields\n  \n  last[count] = fields[0];   // saves first word to first element of array\n  first[count] = fields[1]; //saves second word to second element\n  numfields[0] = fields[2]; /* THE PROBLEM: now i expected the 3rd word (70) of fields to be able to save into numfields array , but thats when i get cannot be converted to int error\n  numfields[1] = fields[3];\n  numfields[2] = fields[4];    */\n</code></pre>\n"},{"tags":["java","selenium-webdriver","stream"],"answers":[{"tags":[],"owner":{"account_id":2772450,"reputation":22416,"user_id":2386774,"display_name":"JeffC"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681084600,"creation_date":1681084600,"answer_id":75973475,"question_id":75971402,"body_markdown":"You can use `WebDriverWait` to fetch all of your elements from the start rather than waiting for the element somewhere inside the `stream`.\r\n\r\n    List&lt;String&gt; elementTexts = wait\r\n                                .until(ExpectedConditions.visibilityOfAllElementsLocatedBy(By.xpath(&quot;...&quot;)))\r\n                                .stream()\r\n                                .map(WebElement::getText)\r\n                                .map(String::trim)\r\n                                .collect(Collectors.toList());\r\n\r\n`wait.until()` will return values based on what `ExpectedCondition` is used. For example,\r\n\r\n|Return|ExpectedCondition|\r\n|---|---|\r\n|List\\&lt;WebElement\\&gt;|wait.until(ExpectedConditions.visibilityOfAllElementsLocatedBy(...))|\r\n|WebElement|wait.until(ExpectedConditions.visibilityOfElementLocated(...))|\r\n|Alert|wait.until(ExpectedConditions.alertIsPresent())|","title":"Java Selenium - how to add wait for element in stream?","body":"<p>You can use <code>WebDriverWait</code> to fetch all of your elements from the start rather than waiting for the element somewhere inside the <code>stream</code>.</p>\n<pre><code>List&lt;String&gt; elementTexts = wait\n                            .until(ExpectedConditions.visibilityOfAllElementsLocatedBy(By.xpath(&quot;...&quot;)))\n                            .stream()\n                            .map(WebElement::getText)\n                            .map(String::trim)\n                            .collect(Collectors.toList());\n</code></pre>\n<p><code>wait.until()</code> will return values based on what <code>ExpectedCondition</code> is used. For example,</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Return</th>\n<th>ExpectedCondition</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>List&lt;WebElement&gt;</td>\n<td>wait.until(ExpectedConditions.visibilityOfAllElementsLocatedBy(...))</td>\n</tr>\n<tr>\n<td>WebElement</td>\n<td>wait.until(ExpectedConditions.visibilityOfElementLocated(...))</td>\n</tr>\n<tr>\n<td>Alert</td>\n<td>wait.until(ExpectedConditions.alertIsPresent())</td>\n</tr>\n</tbody>\n</table>\n</div>"}],"owner":{"account_id":13200788,"reputation":21,"user_id":21689286,"display_name":"javabeginer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681098896,"creation_date":1681054390,"question_id":75971402,"body_markdown":"can you tell me how to add explicit wait time for webelement in a stream of webelements ?\r\n\r\n```\r\ndriver.findElements(By.xpath(&quot;thisIsXpath&quot;))\r\n.stream()\r\n.map(WebElement::getText)\r\n.map(String::trim)\r\n.collect(Collectors.toList());\r\n```\r\n","title":"Java Selenium - how to add wait for element in stream?","body":"<p>can you tell me how to add explicit wait time for webelement in a stream of webelements ?</p>\n<pre><code>driver.findElements(By.xpath(&quot;thisIsXpath&quot;))\n.stream()\n.map(WebElement::getText)\n.map(String::trim)\n.collect(Collectors.toList());\n</code></pre>\n"},{"tags":["java","arrays","json","android-studio","android-volley"],"answers":[{"tags":[],"owner":{"account_id":15361500,"reputation":281,"user_id":11082213,"display_name":"Nrohpos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681096435,"creation_date":1681096435,"answer_id":75974059,"question_id":74911826,"body_markdown":"Basically you want to convert your json to your java object model.\r\n\r\n**First** , you need a mapping lib for your case\r\nIt the best so far with [Gson][1]\r\n\r\n**Second** , you need to create a model of your need.\r\n\r\nI personally use this for [java class][2]\r\n\r\nAfter all that 2 setup all you have to do convert\r\n\r\n     Gson gson = new Gson();\r\n     String json = gson.toJson(anything); // serializes target to Json\r\n     YourClass your class = gson.fromJson(json, YourClass.class); // \r\n\r\n\r\nYou don&#39;t have to call loop for i either for each , while you can map your while object itself.\r\n\r\n  [1]: https://github.com/google/gson\r\n  [2]: https://www.jsonschema2pojo.org/","title":"How to parse complex data from Json via volley library in android studio?","body":"<p>Basically you want to convert your json to your java object model.</p>\n<p><strong>First</strong> , you need a mapping lib for your case\nIt the best so far with <a href=\"https://github.com/google/gson\" rel=\"nofollow noreferrer\">Gson</a></p>\n<p><strong>Second</strong> , you need to create a model of your need.</p>\n<p>I personally use this for <a href=\"https://www.jsonschema2pojo.org/\" rel=\"nofollow noreferrer\">java class</a></p>\n<p>After all that 2 setup all you have to do convert</p>\n<pre><code> Gson gson = new Gson();\n String json = gson.toJson(anything); // serializes target to Json\n YourClass your class = gson.fromJson(json, YourClass.class); // \n</code></pre>\n<p>You don't have to call loop for i either for each , while you can map your while object itself.</p>\n"}],"owner":{"account_id":27347263,"reputation":11,"user_id":20856968,"display_name":"Sahil Sharma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1681096435,"creation_date":1671949754,"question_id":74911826,"body_markdown":"I want to fetch data from api through volley library. \r\n\r\n\r\nI am retrieving a JSON Object And Json Arrray via the Volley class in Android .I know how to get request but I am really struggling to parse this giant nested json .\r\n\r\nI want to get [synonyms ](https://api.dictionaryapi.dev/api/v2/entries/en/bad)And antonyms From the list\r\n\r\nI want to get data from **Synonmys Array** and **antonyms** **array**....... Here is the link to api . [Link](https://api.dictionaryapi.dev/api/v2/entries/en/bad)\r\n\r\nor Image Of Json Api - [enter image description here](https://i.stack.imgur.com/NYbNZ.png)\r\n\r\n\r\n\r\n\r\nMy Main Activity\r\n\r\n\r\n\r\n```\r\n  JsonArrayRequest jsonArrayRequest = new JsonArrayRequest(Request.Method.GET, JSON_URL, null, new Response.Listener&lt;JSONArray&gt;() {\r\n        @Override\r\n        public void onResponse(JSONArray response) {\r\n            for (int i = 0; i &lt; response.length(); i++) {\r\n                // creating a new json object and\r\n                // getting each object from our json array.\r\n                try {\r\n                    // we are getting each json object.\r\n                    JSONObject responseObj = response.getJSONObject(i);\r\n\r\n                    String word = responseObj.getString(&quot;word&quot;);\r\n                    String phonetic = responseObj.getString(&quot;phonetic&quot;);\r\n\r\n                    JSONArray jsonArray = responseObj.getJSONArray(&quot;meaning&quot;);\r\n                    for (int k = 0; k &lt; response.length(); k++) {\r\n\r\n                      ?? what to do here ????????\r\n\r\n------------------------need help here-------------------------------\r\n\r\n\r\n                    }\r\n\r\n                    synonymsList.add(new synonymsModel(word,phonetic, synonyms,antonyms));\r\n                    buildRecyclerView();\r\n                } catch (JSONException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        }\r\n    }, new Response.ErrorListener() {\r\n        @Override\r\n        public void onErrorResponse(VolleyError error) {\r\n            Toast.makeText(getApplicationContext(), error.getMessage(), Toast.LENGTH_LONG).show();\r\n        }\r\n    });\r\n    queue.add(jsonArrayRequest);\r\n}\r\n```\r\nModel class\r\n\r\n\r\n```\r\n\r\npublic class synonymsModel {\r\n\r\n  String word, phonetic , antonyms, synonyms;\r\n\r\n    public synonymsModel(String word, String phonetic, String antonyms, String synonyms) {\r\n        this.word = word;\r\n        this.phonetic = phonetic;\r\n        this.antonyms = antonyms;\r\n        this.synonyms = synonyms;\r\n    }\r\n\r\n    public String getWord() {\r\n        return word;\r\n    }\r\n\r\n    public void setWord(String word) {\r\n        this.word = word;\r\n    }\r\n\r\n    public String getPhonetic() {\r\n        return phonetic;\r\n    }\r\n\r\n    public void setPhonetic(String phonetic) {\r\n        this.phonetic = phonetic;\r\n    }\r\n\r\n    public String getAntonyms() {\r\n        return antonyms;\r\n    }\r\n\r\n    public void setAntonyms(String antonyms) {\r\n        this.antonyms = antonyms;\r\n    }\r\n\r\n    public String getSynonyms() {\r\n        return synonyms;\r\n    }\r\n\r\n    public void setSynonyms(String synonyms) {\r\n        this.synonyms = synonyms;\r\n    }\r\n}\r\n\r\n\r\n```\r\n\r\n\r\n\r\n\r\n","title":"How to parse complex data from Json via volley library in android studio?","body":"<p>I want to fetch data from api through volley library.</p>\n<p>I am retrieving a JSON Object And Json Arrray via the Volley class in Android .I know how to get request but I am really struggling to parse this giant nested json .</p>\n<p>I want to get <a href=\"https://api.dictionaryapi.dev/api/v2/entries/en/bad\" rel=\"nofollow noreferrer\">synonyms </a>And antonyms From the list</p>\n<p>I want to get data from <strong>Synonmys Array</strong> and <strong>antonyms</strong> <strong>array</strong>....... Here is the link to api . <a href=\"https://api.dictionaryapi.dev/api/v2/entries/en/bad\" rel=\"nofollow noreferrer\">Link</a></p>\n<p>or Image Of Json Api - <a href=\"https://i.stack.imgur.com/NYbNZ.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>My Main Activity</p>\n<pre><code>  JsonArrayRequest jsonArrayRequest = new JsonArrayRequest(Request.Method.GET, JSON_URL, null, new Response.Listener&lt;JSONArray&gt;() {\n        @Override\n        public void onResponse(JSONArray response) {\n            for (int i = 0; i &lt; response.length(); i++) {\n                // creating a new json object and\n                // getting each object from our json array.\n                try {\n                    // we are getting each json object.\n                    JSONObject responseObj = response.getJSONObject(i);\n\n                    String word = responseObj.getString(&quot;word&quot;);\n                    String phonetic = responseObj.getString(&quot;phonetic&quot;);\n\n                    JSONArray jsonArray = responseObj.getJSONArray(&quot;meaning&quot;);\n                    for (int k = 0; k &lt; response.length(); k++) {\n\n                      ?? what to do here ????????\n\n------------------------need help here-------------------------------\n\n\n                    }\n\n                    synonymsList.add(new synonymsModel(word,phonetic, synonyms,antonyms));\n                    buildRecyclerView();\n                } catch (JSONException e) {\n                    e.printStackTrace();\n                }\n            }\n        }\n    }, new Response.ErrorListener() {\n        @Override\n        public void onErrorResponse(VolleyError error) {\n            Toast.makeText(getApplicationContext(), error.getMessage(), Toast.LENGTH_LONG).show();\n        }\n    });\n    queue.add(jsonArrayRequest);\n}\n</code></pre>\n<p>Model class</p>\n<pre><code>\npublic class synonymsModel {\n\n  String word, phonetic , antonyms, synonyms;\n\n    public synonymsModel(String word, String phonetic, String antonyms, String synonyms) {\n        this.word = word;\n        this.phonetic = phonetic;\n        this.antonyms = antonyms;\n        this.synonyms = synonyms;\n    }\n\n    public String getWord() {\n        return word;\n    }\n\n    public void setWord(String word) {\n        this.word = word;\n    }\n\n    public String getPhonetic() {\n        return phonetic;\n    }\n\n    public void setPhonetic(String phonetic) {\n        this.phonetic = phonetic;\n    }\n\n    public String getAntonyms() {\n        return antonyms;\n    }\n\n    public void setAntonyms(String antonyms) {\n        this.antonyms = antonyms;\n    }\n\n    public String getSynonyms() {\n        return synonyms;\n    }\n\n    public void setSynonyms(String synonyms) {\n        this.synonyms = synonyms;\n    }\n}\n\n\n</code></pre>\n"},{"tags":["java","jpa","criteria-api"],"comments":[{"owner":{"account_id":8324875,"reputation":11755,"user_id":6413377,"accept_rate":25,"display_name":"pirho"},"score":0,"creation_date":1513606529,"post_id":47830390,"comment_id":82705641,"body_markdown":"Is it possible to see your entities? `@OneToOne`? Also 3-4 rows what you expect as a result? Is it like  `true, 1: false, 2; false,3, true:4`","body":"Is it possible to see your entities? <code>@OneToOne</code>? Also 3-4 rows what you expect as a result? Is it like  <code>true, 1: false, 2; false,3, true:4</code>"},{"owner":{"account_id":8324875,"reputation":11755,"user_id":6413377,"accept_rate":25,"display_name":"pirho"},"score":0,"creation_date":1513614905,"post_id":47830390,"comment_id":82710670,"body_markdown":"And for the stretch goal&#39;s `GROUP BY` : have  _an aggregate_  or what to group on ?","body":"And for the stretch goal&#39;s <code>GROUP BY</code> : have  <i>an aggregate</i>  or what to group on ?"},{"owner":{"account_id":8324875,"reputation":11755,"user_id":6413377,"accept_rate":25,"display_name":"pirho"},"score":0,"creation_date":1513768698,"post_id":47830390,"comment_id":82776237,"body_markdown":"Updated my answer. Can you check yet this `GROUP BY ticket.ticket_id IS NOT NULL`?","body":"Updated my answer. Can you check yet this <code>GROUP BY ticket.ticket_id IS NOT NULL</code>?"},{"owner":{"display_name":"user8558216"},"score":0,"creation_date":1515582410,"post_id":47830390,"comment_id":83351732,"body_markdown":"Your second approach description is wrong. `isNotNull` returns a `Predicate&lt;Boolean&gt;`, which indeed is an `Expression&lt;Boolean&gt;` and also extending `Selection&lt;Boolean&gt;`. The problem is the Boolean generic type clashing with whatever the CriteriaQuery generic type is defined as. Perhaps if you&#39;d posted the rest of your query construction then it would be a more complete definition ...","body":"Your second approach description is wrong. <code>isNotNull</code> returns a <code>Predicate&lt;Boolean&gt;</code>, which indeed is an <code>Expression&lt;Boolean&gt;</code> and also extending <code>Selection&lt;Boolean&gt;</code>. The problem is the Boolean generic type clashing with whatever the CriteriaQuery generic type is defined as. Perhaps if you&#39;d posted the rest of your query construction then it would be a more complete definition ..."}],"answers":[{"tags":[],"owner":{"account_id":341811,"reputation":853,"user_id":672632,"accept_rate":88,"display_name":"Faton"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1513609575,"creation_date":1513609575,"answer_id":47871193,"question_id":47830390,"body_markdown":"You can use the following example below to generate the *is not null* in the select expression:\r\n\r\n    CriteriaQuery&lt;Tuple&gt; cq = entityManager.getCriteriaBuilder().createTupleQuery();\r\n    Root&lt;Test&gt; pet = cq.from(Test.class);\r\n    cq.multiselect(pet.get(&quot;id1&quot;).isNotNull(), pet.get(&quot;id2&quot;));\r\n\r\nI think that the generated query will throw a query syntax exception as it might not be supported by jpa/hibernate to have the *is not null* in the select expression. If this is the case then maybe one possible solution would be to place the *is not null* in the where clause. You can find examples here for that case https://docs.oracle.com/cd/E19798-01/821-1841/gjitv/index.html\r\n","title":"Criteria API: Select Expression IF [NOT] NULL &lt;value&gt;","body":"<p>You can use the following example below to generate the <em>is not null</em> in the select expression:</p>\n\n<pre><code>CriteriaQuery&lt;Tuple&gt; cq = entityManager.getCriteriaBuilder().createTupleQuery();\nRoot&lt;Test&gt; pet = cq.from(Test.class);\ncq.multiselect(pet.get(\"id1\").isNotNull(), pet.get(\"id2\"));\n</code></pre>\n\n<p>I think that the generated query will throw a query syntax exception as it might not be supported by jpa/hibernate to have the <em>is not null</em> in the select expression. If this is the case then maybe one possible solution would be to place the <em>is not null</em> in the where clause. You can find examples here for that case <a href=\"https://docs.oracle.com/cd/E19798-01/821-1841/gjitv/index.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/cd/E19798-01/821-1841/gjitv/index.html</a></p>\n"},{"tags":[],"owner":{"account_id":8324875,"reputation":11755,"user_id":6413377,"accept_rate":25,"display_name":"pirho"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1513770868,"creation_date":1513612187,"answer_id":47871905,"question_id":47830390,"body_markdown":"One working approach is to use `CriteriaBuilder.selectCase(..)`.\r\n\r\nWith `DTO` like (`Object[]` does the same but this is typesafe from the beginning)\r\n\r\n    @Getter\r\n    @AllArgsConstructor\r\n    public class TicketTuple {\r\n       private Boolean hasAction;\r\n       private Long ticketId;\r\n    }\r\n\r\nthe result can be obtained with following query\r\n\r\n    CriteriaBuilder cb = em.getCriteriaBuilder();\r\n    CriteriaQuery&lt;TicketTuple&gt; cq = cb.createQuery(TicketTuple.class);\r\n    Root&lt;Ticket&gt; from = cq.from(Ticket.class);\r\n    Join&lt;Ticket, TicketAction&gt; join = from.join(&quot;ticketAction&quot;, JoinType.LEFT);\r\n    \r\n    Expression&lt;Boolean&gt; caseHasAction = cb.&lt;Boolean&gt;selectCase()\r\n          .when(cb.isNotNull(join), true)\r\n          .otherwise(false);\r\n\r\n    cq.multiselect(\r\n          caseHasAction.as(Boolean.class)\r\n         ,from.get(&quot;id&quot;)\r\n    );\r\n\r\nabout grouping, I do not quite get what you need to group, but for example\r\n\r\n    cq.multiselect(\r\n         caseHasAction.as(Boolean.class)\r\n         ,cb.count(from.get(&quot;id&quot;))\r\n    ).groupBy(caseHasAction.as(Boolean.class));\r\n\r\nwill return counts of `Ticket`s having and not having a `TicketAction`.\r\n\r\nI do not know the actual reason but the problem _seems to be_ that with `cb.isNotNull(..)`  (my) `JPA`  implementation **either** always fetches something that is seems not to be `null` **or** depending on the way the `null` is checked it creates some `INNER JOIN` so that the `null` values are dropped out from the result set.\r\n\r\n(I am using OpenJPA)\r\n","title":"Criteria API: Select Expression IF [NOT] NULL &lt;value&gt;","body":"<p>One working approach is to use <code>CriteriaBuilder.selectCase(..)</code>.</p>\n\n<p>With <code>DTO</code> like (<code>Object[]</code> does the same but this is typesafe from the beginning)</p>\n\n<pre><code>@Getter\n@AllArgsConstructor\npublic class TicketTuple {\n   private Boolean hasAction;\n   private Long ticketId;\n}\n</code></pre>\n\n<p>the result can be obtained with following query</p>\n\n<pre><code>CriteriaBuilder cb = em.getCriteriaBuilder();\nCriteriaQuery&lt;TicketTuple&gt; cq = cb.createQuery(TicketTuple.class);\nRoot&lt;Ticket&gt; from = cq.from(Ticket.class);\nJoin&lt;Ticket, TicketAction&gt; join = from.join(\"ticketAction\", JoinType.LEFT);\n\nExpression&lt;Boolean&gt; caseHasAction = cb.&lt;Boolean&gt;selectCase()\n      .when(cb.isNotNull(join), true)\n      .otherwise(false);\n\ncq.multiselect(\n      caseHasAction.as(Boolean.class)\n     ,from.get(\"id\")\n);\n</code></pre>\n\n<p>about grouping, I do not quite get what you need to group, but for example</p>\n\n<pre><code>cq.multiselect(\n     caseHasAction.as(Boolean.class)\n     ,cb.count(from.get(\"id\"))\n).groupBy(caseHasAction.as(Boolean.class));\n</code></pre>\n\n<p>will return counts of <code>Ticket</code>s having and not having a <code>TicketAction</code>.</p>\n\n<p>I do not know the actual reason but the problem <em>seems to be</em> that with <code>cb.isNotNull(..)</code>  (my) <code>JPA</code>  implementation <strong>either</strong> always fetches something that is seems not to be <code>null</code> <strong>or</strong> depending on the way the <code>null</code> is checked it creates some <code>INNER JOIN</code> so that the <code>null</code> values are dropped out from the result set.</p>\n\n<p>(I am using OpenJPA)</p>\n"},{"tags":[],"owner":{"account_id":465793,"reputation":16048,"user_id":870122,"accept_rate":88,"display_name":"perissf"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1514392506,"creation_date":1514382311,"answer_id":47993292,"question_id":47830390,"body_markdown":"For this query you need to have a collection property of type [`@OneToMany`][1]. \r\nAlso I had to use [`Tuple`][2] instead of `TicketTuple` (referenced in [this][3] answer) because it was giving an `IllegalArgumentException` (argument type mismatch) when dealing with ticket_actions without a ticket, I don&#39;t know if you have this kind of possibility in your schema. \r\n\r\nEclipseLink JPA implementation, Derby db.\r\n\r\nIn class `Ticket` you have to have this property:\r\n\r\n    @OneToMany(mappedBy = &quot;ticket&quot;)\r\n    private Collection&lt;TicketAction&gt; ticketActions;\r\n\r\nCriteria Query code:\r\n\r\n    CriteriaBuilder cb = em.getCriteriaBuilder();\r\n    CriteriaQuery&lt;Tuple&gt; cq = cb.createQuery(Tuple.class);\r\n    Root&lt;Ticket&gt; from = cq.from(Ticket.class);\r\n    Join&lt;Ticket, TicketAction&gt; join = from.join(&quot;ticketActions&quot;, JoinType.LEFT);\r\n\r\n    Expression&lt;Boolean&gt; caseHasAction = cb.&lt;Boolean&gt;selectCase()\r\n          .when(cb.isNotNull(join.get(&quot;id&quot;)), true)\r\n          .otherwise(false);\r\n\r\n    cq.multiselect(\r\n          caseHasAction.as(Boolean.class)\r\n         ,from.get(&quot;id&quot;)\r\n    );\r\n    TypedQuery&lt;Tuple&gt; tq = em.createQuery(cq);\r\n\r\n    for (Tuple tt : tq.getResultList()) {\r\n        System.out.println(&quot;Res: &quot; + tt.get(0) + &quot; &quot; + (tt.get(1) == null ? &quot;null&quot; : tt.get(1).toString()));\r\n    }\r\n\r\nThe resulting query:\r\n\r\n    SELECT CASE WHEN (t0.ID IS NOT NULL) THEN 1 ELSE 0 END , t1.ID FROM TICKET t1 LEFT OUTER JOIN TICKET_ACTION t0 ON (t0.TICKET_ID = t1.ID)\r\n\r\n\r\n  [1]: https://docs.oracle.com/javaee/6/api/javax/persistence/OneToMany.html\r\n  [2]: https://docs.oracle.com/javaee/6/api/javax/persistence/Tuple.html\r\n  [3]: https://stackoverflow.com/a/47871905/870122","title":"Criteria API: Select Expression IF [NOT] NULL &lt;value&gt;","body":"<p>For this query you need to have a collection property of type <a href=\"https://docs.oracle.com/javaee/6/api/javax/persistence/OneToMany.html\" rel=\"nofollow noreferrer\"><code>@OneToMany</code></a>. \nAlso I had to use <a href=\"https://docs.oracle.com/javaee/6/api/javax/persistence/Tuple.html\" rel=\"nofollow noreferrer\"><code>Tuple</code></a> instead of <code>TicketTuple</code> (referenced in <a href=\"https://stackoverflow.com/a/47871905/870122\">this</a> answer) because it was giving an <code>IllegalArgumentException</code> (argument type mismatch) when dealing with ticket_actions without a ticket, I don't know if you have this kind of possibility in your schema. </p>\n\n<p>EclipseLink JPA implementation, Derby db.</p>\n\n<p>In class <code>Ticket</code> you have to have this property:</p>\n\n<pre><code>@OneToMany(mappedBy = \"ticket\")\nprivate Collection&lt;TicketAction&gt; ticketActions;\n</code></pre>\n\n<p>Criteria Query code:</p>\n\n<pre><code>CriteriaBuilder cb = em.getCriteriaBuilder();\nCriteriaQuery&lt;Tuple&gt; cq = cb.createQuery(Tuple.class);\nRoot&lt;Ticket&gt; from = cq.from(Ticket.class);\nJoin&lt;Ticket, TicketAction&gt; join = from.join(\"ticketActions\", JoinType.LEFT);\n\nExpression&lt;Boolean&gt; caseHasAction = cb.&lt;Boolean&gt;selectCase()\n      .when(cb.isNotNull(join.get(\"id\")), true)\n      .otherwise(false);\n\ncq.multiselect(\n      caseHasAction.as(Boolean.class)\n     ,from.get(\"id\")\n);\nTypedQuery&lt;Tuple&gt; tq = em.createQuery(cq);\n\nfor (Tuple tt : tq.getResultList()) {\n    System.out.println(\"Res: \" + tt.get(0) + \" \" + (tt.get(1) == null ? \"null\" : tt.get(1).toString()));\n}\n</code></pre>\n\n<p>The resulting query:</p>\n\n<pre><code>SELECT CASE WHEN (t0.ID IS NOT NULL) THEN 1 ELSE 0 END , t1.ID FROM TICKET t1 LEFT OUTER JOIN TICKET_ACTION t0 ON (t0.TICKET_ID = t1.ID)\n</code></pre>\n"}],"owner":{"account_id":3402939,"reputation":6414,"user_id":2854723,"accept_rate":73,"display_name":"thomas.mc.work"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9620,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1681095915,"creation_date":1513333781,"question_id":47830390,"body_markdown":"I&#39;m trying to translate the following simple query into JPA criteria API:\r\n\r\n    SELECT ticket_action.ticket_id IS NOT NULL, ticket.id\r\n    FROM ticket\r\n    LEFT OUTER JOIN ticket_action ON ticket.id = ticket_action.ticket_id\r\n\r\nI&#39;ve tried two approaches:\r\n\r\n1. Using `criteriaBuilder.function(&quot;ISNULL&quot;, Boolean.class, ticketAction.get(TicketAction_.ticketId))`: the problem is there is no negation if `ISNULL` like `ISNOTNULL` (for a MySQL/MariaDB database)\r\n2. Using `criteriaBuilder.isNotNull(ticketAction.get(TicketAction_.ticketId))`: but this return a `Predicate` whereas the select statement accepts only `Expression`s\r\n\r\nStretch goal: The same with `GROUP BY ticket.ticket_id IS NOT NULL`\r\n\r\n---\r\n\r\n## The table structure as requested\r\n\r\n    +-----------+---------+\r\n    |         ticket      |\r\n    +-----------+---------+\r\n    |   name    |  type   |\r\n    +-----------+---------+\r\n    | id        | integer |\r\n    | title     | varchar |\r\n    +-----------+---------+\r\n\r\n    +-----------+---------+\r\n    |    ticket_action    |\r\n    +-----------+---------+\r\n    |   name    |  type   |\r\n    +-----------+---------+\r\n    | id        | integer |\r\n    | ticket_id | integer |\r\n    | title     | varchar |\r\n    +-----------+---------+\r\n\r\n# Result:\r\n\r\nFinally I ended up using a construtor query which receives the `id` of `ticket_action` among others. In the constructor there is the decision about the state: `this.hasTicketAction = ticketActionId != null;`\r\nNot very satisfying, but working.\r\n\r\n__Thank you though anybody for posting your answers!__","title":"Criteria API: Select Expression IF [NOT] NULL &lt;value&gt;","body":"<p>I'm trying to translate the following simple query into JPA criteria API:</p>\n\n<pre><code>SELECT ticket_action.ticket_id IS NOT NULL, ticket.id\nFROM ticket\nLEFT OUTER JOIN ticket_action ON ticket.id = ticket_action.ticket_id\n</code></pre>\n\n<p>I've tried two approaches:</p>\n\n<ol>\n<li>Using <code>criteriaBuilder.function(\"ISNULL\", Boolean.class, ticketAction.get(TicketAction_.ticketId))</code>: the problem is there is no negation if <code>ISNULL</code> like <code>ISNOTNULL</code> (for a MySQL/MariaDB database)</li>\n<li>Using <code>criteriaBuilder.isNotNull(ticketAction.get(TicketAction_.ticketId))</code>: but this return a <code>Predicate</code> whereas the select statement accepts only <code>Expression</code>s</li>\n</ol>\n\n<p>Stretch goal: The same with <code>GROUP BY ticket.ticket_id IS NOT NULL</code></p>\n\n<hr>\n\n<h2>The table structure as requested</h2>\n\n<pre><code>+-----------+---------+\n|         ticket      |\n+-----------+---------+\n|   name    |  type   |\n+-----------+---------+\n| id        | integer |\n| title     | varchar |\n+-----------+---------+\n\n+-----------+---------+\n|    ticket_action    |\n+-----------+---------+\n|   name    |  type   |\n+-----------+---------+\n| id        | integer |\n| ticket_id | integer |\n| title     | varchar |\n+-----------+---------+\n</code></pre>\n\n<h1>Result:</h1>\n\n<p>Finally I ended up using a construtor query which receives the <code>id</code> of <code>ticket_action</code> among others. In the constructor there is the decision about the state: <code>this.hasTicketAction = ticketActionId != null;</code>\nNot very satisfying, but working.</p>\n\n<p><strong>Thank you though anybody for posting your answers!</strong></p>\n"},{"tags":["java","chess"],"comments":[{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1681103553,"post_id":75973891,"comment_id":133998948,"body_markdown":"Poor title. Rewrite to summarize your specific technical issue.","body":"Poor title. Rewrite to summarize your specific technical issue."}],"answers":[{"tags":[],"owner":{"account_id":20780824,"reputation":29180,"user_id":15261315,"display_name":"Chris"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681093498,"creation_date":1681093498,"answer_id":75973904,"question_id":75973891,"body_markdown":"If you don&#39;t want to use an `ArrayList` you can keep track of the number of moves possible, create a new `double[]` with that many elements, copy the data into it and return that new array.\r\n\r\n[`java.util.Arrays.copyOfRange`](https://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#copyOfRange(double[],%20int,%20int)) may prove useful.","title":"my method is incorrect I want help to modify it","body":"<p>If you don't want to use an <code>ArrayList</code> you can keep track of the number of moves possible, create a new <code>double[]</code> with that many elements, copy the data into it and return that new array.</p>\n<p><a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#copyOfRange(double%5B%5D,%20int,%20int)\" rel=\"nofollow noreferrer\"><code>java.util.Arrays.copyOfRange</code></a> may prove useful.</p>\n"}],"owner":{"account_id":27473022,"reputation":1,"user_id":20961512,"display_name":"rana"},"comment_count":1,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"closed_date":1681103563,"answer_count":1,"score":-4,"last_activity_date":1681093498,"creation_date":1681093297,"question_id":75973891,"body_markdown":"this is a method that return array have all the positions that a knight(in chess) make in one move , the problem that i put the size of array 8 ,  the chess board is (8x8) , the problem that , example : if the knight at position (1,1) this method will return {(2,3),(3,2),null,null,null,null,null,null} , i want it to return this {(2,3),(3,2)} . without using arraylist\r\n\r\n```\r\npublic Position[] moves(Position p) {\r\n    Position[] positions = new Position[8];\r\n    int row = p.getRow();\r\n    int col = p.getCol();\r\n\r\n    int[][] moves = {{-1,-2},{1,-2},{-1,2},{1,2},{-2,-1},{-2,1},{2,-1},{2,1}};\r\n\r\n        for (int k=0 ; k&lt; moves.length;k++) {\r\n            int newCol = col + moves[k][1];\r\n            int newRow = row + moves[k][0];\r\n            if(newCol &gt;= 1 &amp;&amp; newCol&lt;= 8 &amp;&amp; newRow &gt;= 1 &amp;&amp; newRow &lt;= 8)\r\n            {\r\n                positions[k] = new Position(newRow, newCol);\r\n            }\r\n            else\r\n                positions[k] = null ;\r\n        }\r\n    return positions;\r\n}\r\n```","title":"my method is incorrect I want help to modify it","body":"<p>this is a method that return array have all the positions that a knight(in chess) make in one move , the problem that i put the size of array 8 ,  the chess board is (8x8) , the problem that , example : if the knight at position (1,1) this method will return {(2,3),(3,2),null,null,null,null,null,null} , i want it to return this {(2,3),(3,2)} . without using arraylist</p>\n<pre><code>public Position[] moves(Position p) {\n    Position[] positions = new Position[8];\n    int row = p.getRow();\n    int col = p.getCol();\n\n    int[][] moves = {{-1,-2},{1,-2},{-1,2},{1,2},{-2,-1},{-2,1},{2,-1},{2,1}};\n\n        for (int k=0 ; k&lt; moves.length;k++) {\n            int newCol = col + moves[k][1];\n            int newRow = row + moves[k][0];\n            if(newCol &gt;= 1 &amp;&amp; newCol&lt;= 8 &amp;&amp; newRow &gt;= 1 &amp;&amp; newRow &lt;= 8)\n            {\n                positions[k] = new Position(newRow, newCol);\n            }\n            else\n                positions[k] = null ;\n        }\n    return positions;\n}\n</code></pre>\n"},{"tags":["java","probability"],"answers":[{"tags":[],"owner":{"account_id":5035911,"reputation":19200,"user_id":4044696,"accept_rate":73,"display_name":"Severin Pappadeux"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1681092450,"creation_date":1681092450,"answer_id":75973850,"question_id":75953440,"body_markdown":"You could likely to solve this with Mote Carlo simulation. You have  n-variate Bernoulli distribution, but each Bernoulli sample is independent, so\r\n\r\n- set count to 0\r\n- simulate n-dim {0,1} vector using Bernoulli with probability p&lt;sub&gt;i&lt;/sub&gt;\r\n- sum vector, and if sum is &gt;= x, then increment count\r\n- repeat simulation N times, answer would be count/N\r\n\r\nDon&#39;t know much of a Java, could write something in Python. Ping me if you need the code","title":"Inclusion/Exclusion for at least x in n question","body":"<p>You could likely to solve this with Mote Carlo simulation. You have  n-variate Bernoulli distribution, but each Bernoulli sample is independent, so</p>\n<ul>\n<li>set count to 0</li>\n<li>simulate n-dim {0,1} vector using Bernoulli with probability p<sub>i</sub></li>\n<li>sum vector, and if sum is &gt;= x, then increment count</li>\n<li>repeat simulation N times, answer would be count/N</li>\n</ul>\n<p>Don't know much of a Java, could write something in Python. Ping me if you need the code</p>\n"}],"owner":{"account_id":28143333,"reputation":11,"user_id":21583968,"display_name":"000222"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1681092450,"creation_date":1680812232,"question_id":75953440,"body_markdown":"I need to solve a probability question where someone invited n guests to his birthdayparty. I am given an integer x and a list with n entries. Every ith entry is giving the probability that guest i will  come to the party. \r\n\r\nthe question is to find the probability that at least x guests will be at the party.\r\ni know there are several different better algorithms for this question but i wondered if i can solve this with the exclusion/inclusion principle.\r\n\r\ni tried doing it like this:\r\n-create all subsets of the quest probability list with at least x elements;\r\n-then for every subset multiply the probabilities together, which should give the probability that at least those guests in the subset will be at the party.\r\n\r\n-add the values of the subsets with cardinality x or x+k*2;\r\n-substract values of the subsets with cardinality x+1 +k*2;\r\n\r\nthis doesn&#39;t work in the end because i get values much higher than 1 or -1. what am i doing wrong here?\r\n\r\ncan the principle of exclusion/inclusion only be used if we start with the most basic subsets with at least 1 element?\r\n\r\n        int x = 5;\r\n   \r\n        double[] guests = new double[] {0.34, 0.24, 0.72, 0.28, 0.55, 0.88, 0.91, 0.0.99, 0.01, 0.46};\r\n        \r\n        ArrayList&lt;Double&gt; subset = new ArrayList&lt;Double&gt;();\r\n        ArrayList&lt;ArrayList&lt;Double&gt;&gt; Subsets = new ArrayList&lt;&gt;();\r\n        getSubsets(subset,Subsets,0,guests,x);\r\n        \r\n        double probx = 0;\r\n        \r\n        for(int i = 0;i&lt;Subsets.size();i++){\r\n          double prob = 1;\r\n          for(int j = 0;j&lt;Subsets.get(i).size();j++){\r\n            prob = Subsets.get(i).get(j)*prob;\r\n          }\r\n         \r\n          if((Subsets.get(i).size()%x)%2==0){\r\n        \t  \r\n            probx += prob;\r\n          }else{\r\n        \t  \r\n            probx -= prob;\r\n          }\r\n        }\r\n        \r\n        System.out.println(probx);\r\n    }\r\n    public static void getSubsets(ArrayList&lt;Double&gt; tmp, ArrayList&lt;ArrayList&lt;Double&gt;&gt; subsets, int i, double[] guests, int maxlength) {\r\n      if(i==tage.length) {\r\n        if(tmp.size()&gt;=maxlength) {\r\n          subsets.add(tmp);\r\n        }\r\n        return;\r\n      }\r\n      ArrayList&lt;Double&gt; newSet = new ArrayList&lt;&gt;(tmp);\r\n      newSet.add(guests[i]);\r\n    \r\n      getSubsets(newSet,subsets,i+1,guests,maxlength);\r\n      getSubsets(tmp,subsets,i+1,guests,maxlength);\r\n    }","title":"Inclusion/Exclusion for at least x in n question","body":"<p>I need to solve a probability question where someone invited n guests to his birthdayparty. I am given an integer x and a list with n entries. Every ith entry is giving the probability that guest i will  come to the party.</p>\n<p>the question is to find the probability that at least x guests will be at the party.\ni know there are several different better algorithms for this question but i wondered if i can solve this with the exclusion/inclusion principle.</p>\n<p>i tried doing it like this:\n-create all subsets of the quest probability list with at least x elements;\n-then for every subset multiply the probabilities together, which should give the probability that at least those guests in the subset will be at the party.</p>\n<p>-add the values of the subsets with cardinality x or x+k<em>2;\n-substract values of the subsets with cardinality x+1 +k</em>2;</p>\n<p>this doesn't work in the end because i get values much higher than 1 or -1. what am i doing wrong here?</p>\n<p>can the principle of exclusion/inclusion only be used if we start with the most basic subsets with at least 1 element?</p>\n<pre><code>    int x = 5;\n\n    double[] guests = new double[] {0.34, 0.24, 0.72, 0.28, 0.55, 0.88, 0.91, 0.0.99, 0.01, 0.46};\n    \n    ArrayList&lt;Double&gt; subset = new ArrayList&lt;Double&gt;();\n    ArrayList&lt;ArrayList&lt;Double&gt;&gt; Subsets = new ArrayList&lt;&gt;();\n    getSubsets(subset,Subsets,0,guests,x);\n    \n    double probx = 0;\n    \n    for(int i = 0;i&lt;Subsets.size();i++){\n      double prob = 1;\n      for(int j = 0;j&lt;Subsets.get(i).size();j++){\n        prob = Subsets.get(i).get(j)*prob;\n      }\n     \n      if((Subsets.get(i).size()%x)%2==0){\n          \n        probx += prob;\n      }else{\n          \n        probx -= prob;\n      }\n    }\n    \n    System.out.println(probx);\n}\npublic static void getSubsets(ArrayList&lt;Double&gt; tmp, ArrayList&lt;ArrayList&lt;Double&gt;&gt; subsets, int i, double[] guests, int maxlength) {\n  if(i==tage.length) {\n    if(tmp.size()&gt;=maxlength) {\n      subsets.add(tmp);\n    }\n    return;\n  }\n  ArrayList&lt;Double&gt; newSet = new ArrayList&lt;&gt;(tmp);\n  newSet.add(guests[i]);\n\n  getSubsets(newSet,subsets,i+1,guests,maxlength);\n  getSubsets(tmp,subsets,i+1,guests,maxlength);\n}\n</code></pre>\n"},{"tags":["java","spring","spring-security","cors","auth0"],"answers":[{"tags":[],"owner":{"account_id":20699305,"reputation":11,"user_id":15198797,"display_name":"SwedishFish"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1681077020,"creation_date":1681077020,"answer_id":75973059,"question_id":75972707,"body_markdown":"I&#39;m also making a youtube clone with React Native/JSX. \r\n\r\nLooks like you&#39;re using Java but I also got the same error when trying to implement. I was using RapidAPI&#39;s youtube API. \r\n\r\n - verify the server permissions\r\n - check the server logs \r\n - verify the software version \r\n - test the endpoints with Postman or on the site \r\n - restart/re-install packages  \r\n\r\n ","title":"SpringBoot + Auth0 - CORS Problems","body":"<p>I'm also making a youtube clone with React Native/JSX.</p>\n<p>Looks like you're using Java but I also got the same error when trying to implement. I was using RapidAPI's youtube API.</p>\n<ul>\n<li>verify the server permissions</li>\n<li>check the server logs</li>\n<li>verify the software version</li>\n<li>test the endpoints with Postman or on the site</li>\n<li>restart/re-install packages</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":25538,"reputation":8278,"user_id":65681,"accept_rate":73,"display_name":"Matt Raible"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681091854,"creation_date":1681091854,"answer_id":75973813,"question_id":75972707,"body_markdown":"I think you need to set your `CorsConfiguration` to allow credentials. Here&#39;s what I have in Kotlin. It works without any additional Spring Boot configuration.\r\n\r\n```kotlin\r\nimport org.springframework.web.cors.CorsConfiguration\r\nimport org.springframework.web.cors.CorsConfigurationSource\r\nimport org.springframework.web.cors.UrlBasedCorsConfigurationSource\r\n\r\n@Configuration\r\nclass SecurityConfiguration {\r\n\r\n    @Bean\r\n    fun webSecurity(http: HttpSecurity): SecurityFilterChain {\r\n        ...\r\n\r\n        http.cors()\r\n        return http.build()\r\n    }\r\n\r\n    @Bean\r\n    fun corsConfigurationSource(): CorsConfigurationSource {\r\n        val source = UrlBasedCorsConfigurationSource()\r\n        val config = CorsConfiguration()\r\n        config.allowCredentials = true\r\n        config.allowedOrigins = listOf(&quot;http://localhost:4200&quot;)\r\n        config.allowedMethods = listOf(&quot;*&quot;)\r\n        config.allowedHeaders = listOf(&quot;*&quot;)\r\n        source.registerCorsConfiguration(&quot;/**&quot;, config)\r\n        return source\r\n    }\r\n}\r\n```","title":"SpringBoot + Auth0 - CORS Problems","body":"<p>I think you need to set your <code>CorsConfiguration</code> to allow credentials. Here's what I have in Kotlin. It works without any additional Spring Boot configuration.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>import org.springframework.web.cors.CorsConfiguration\nimport org.springframework.web.cors.CorsConfigurationSource\nimport org.springframework.web.cors.UrlBasedCorsConfigurationSource\n\n@Configuration\nclass SecurityConfiguration {\n\n    @Bean\n    fun webSecurity(http: HttpSecurity): SecurityFilterChain {\n        ...\n\n        http.cors()\n        return http.build()\n    }\n\n    @Bean\n    fun corsConfigurationSource(): CorsConfigurationSource {\n        val source = UrlBasedCorsConfigurationSource()\n        val config = CorsConfiguration()\n        config.allowCredentials = true\n        config.allowedOrigins = listOf(&quot;http://localhost:4200&quot;)\n        config.allowedMethods = listOf(&quot;*&quot;)\n        config.allowedHeaders = listOf(&quot;*&quot;)\n        source.registerCorsConfiguration(&quot;/**&quot;, config)\n        return source\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":26366719,"reputation":37,"user_id":20022057,"display_name":"Pablo Costa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":160,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1681091854,"creation_date":1681072098,"question_id":75972707,"body_markdown":"Even after configuring everything according to the docs, i&#39;m still having sobe CORS issues while trying to do some operations on my site.\r\n\r\nI&#39;m making an YouTube clone using a tutorial. So far so good, i managed to cover and adapt the parts in there that weren&#39;t working \\ were deprecated (this includes the use of filterChain instead of WebSecurityConfigureAdpter on SecurityConfig.java).\r\n\r\nHowever, when i try to request an endpoint (for uploading the videos), the moment i click the upload button i receive a 401 XHR error - related to cross origin issues.\r\n\r\nOn my SecurityConfig.java everything looks setup correctly. On the WebMvc config also, allowing anything from everywhere.\r\n\r\nI&#39;ve tried to implement a function inside SecurityConfig.java as a Bean, to configure cors separatedly (without the WebMvcConfig class) but it didn&#39;t worked also. I&#39;m kinda lost here.\r\n\r\n\r\nThis projects runs angular  in the FrontEnd. I added a small part to identify if the user was logged in (just showing user details after login), and the user is authenticated (after logging in i can display the user details).\r\n\r\nAny input would be appreciated. Also, if i missed anything here in order to describe my problem, i&#39;ll be glad to edit the post and provide the information.\r\n\r\nThanks in advance!\r\n\r\nSecurityConfig.java\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SecurityConfig {\r\n        @Value(&quot;${spring.security.oauth2.resourceserver.jwt.issuer.uri}&quot;)\r\n        private String issuer;\r\n        @Value(&quot;${auth0.audience}&quot;)\r\n        private String audience;\r\n        @Bean\r\n        public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n    \r\n    \r\n            http.authorizeRequests()\r\n                    .anyRequest().authenticated()\r\n                    .and()\r\n                    .sessionManagement()\r\n                    .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                    .and()\r\n                    .cors(Customizer.withDefaults())\r\n                    .oauth2ResourceServer()\r\n                    .jwt();\r\n    \r\n            return http.build();\r\n    \r\n    \r\n    \r\n        }\r\n    \r\n        @Bean\r\n        CorsConfigurationSource corsConfigurationSource() {\r\n            CorsConfiguration configuration = new CorsConfiguration();\r\n            configuration.setAllowedOrigins(Collections.singletonList(&quot;http://localhost:4200&quot;));\r\n            configuration.setAllowedMethods(Arrays.asList(&quot;GET&quot;,&quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;, &quot;PATCH&quot;, &quot;OPTIONS&quot;));\r\n            configuration.setExposedHeaders(Arrays.asList(&quot;Authorization&quot;, &quot;content-type&quot;));\r\n            configuration.setAllowedHeaders(Arrays.asList(&quot;Authorization&quot;, &quot;content-type&quot;));\r\n            UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n            source.registerCorsConfiguration(&quot;/**&quot;, configuration);\r\n            return source;\r\n        }\r\n    \r\n    \r\n        @Bean\r\n        public JwtDecoder jwtDecoder(){\r\n            NimbusJwtDecoder jwtDecoder = JwtDecoders.fromOidcIssuerLocation(issuer);\r\n    \r\n            OAuth2TokenValidator&lt;Jwt&gt; audienceValidator = new AudienceValidator(audience);\r\n            OAuth2TokenValidator&lt;Jwt&gt; withIssuer = JwtValidators.createDefaultWithIssuer(issuer);\r\n            OAuth2TokenValidator&lt;Jwt&gt; withAudience = new DelegatingOAuth2TokenValidator&lt;&gt;(withIssuer);\r\n    \r\n            jwtDecoder.setJwtValidator(withAudience);\r\n    \r\n            return jwtDecoder;\r\n        }\r\n    }\r\n\r\nWebMvcConfig.java\r\npackage com.pablo.portfolio.youtubeclone.config;\r\n\r\n    @EnableWebMvc\r\n    @Configuration\r\n    \r\n    public class WebMvcConfig  implements WebMvcConfigurer {\r\n        @Override\r\n        public void addCorsMappings(CorsRegistry corsRegistry){\r\n            corsRegistry.addMapping(&quot;/**&quot;)\r\n                    .allowedOrigins(&quot;*&quot;)\r\n                    .allowedMethods(&quot;GET&quot;, &quot;PUT&quot;,&quot;POST&quot;,&quot;DELETE&quot;,&quot;PATCH&quot;,&quot;OPTIONS&quot;)\r\n                    .allowedHeaders(&quot;*&quot;)\r\n                    .maxAge(3600);\r\n    \r\n        }\r\n    }\r\n\r\nVideoController.java\r\n\r\n    package com.pablo.portfolio.youtubeclone.controller;\r\n    \r\n    \r\n    @RestController\r\n    @CrossOrigin\r\n    @RequestMapping(&quot;/api/videos&quot;)\r\n    @RequiredArgsConstructor\r\n    public class VideoController {\r\n    \r\n        private final VideoService videoService;\r\n    \r\n    \r\n        @CrossOrigin\r\n        @PostMapping\r\n        @ResponseStatus(HttpStatus.CREATED)\r\n        public UploadVideoResponse uploadVideo(@RequestParam(&quot;file&quot;)MultipartFile file){\r\n            return videoService.uploadVideo(file);\r\n    \r\n        }\r\n        @CrossOrigin\r\n        @PostMapping(&quot;/thumbnail&quot;)\r\n        @ResponseStatus(HttpStatus.CREATED)\r\n        public String uploadThumbnail\r\n                (@RequestParam(&quot;file&quot;)MultipartFile file, @RequestParam(&quot;videoId&quot;) String videoId){\r\n            return videoService.uploadThumbnail(file, videoId);\r\n        }\r\n        @CrossOrigin\r\n        @PutMapping\r\n        @ResponseStatus(HttpStatus.OK)\r\n        public VideoDto editVideoMetaData(@RequestBody VideoDto videoDto){\r\n            return videoService.editVideo(videoDto);\r\n        }\r\n    \r\n        @CrossOrigin\r\n        @GetMapping(&quot;/{videoId}&quot;)\r\n        public VideoDto getVideoDetails(@PathVariable String videoId){\r\n            return videoService.getVideoDetails(videoId);\r\n        }\r\n    \r\n    }\r\n\r\nEDIT:\r\nI noticed the following information on my log:\r\n\r\n    2023-04-09T18:13:20.032-03:00 DEBUG 1197563 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/videos\r\n    2023-04-09T18:13:20.045-03:00 DEBUG 1197563 --- [nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext\r\n\r\nMaybe it isn&#39;t loading the correct authentication filter?","title":"SpringBoot + Auth0 - CORS Problems","body":"<p>Even after configuring everything according to the docs, i'm still having sobe CORS issues while trying to do some operations on my site.</p>\n<p>I'm making an YouTube clone using a tutorial. So far so good, i managed to cover and adapt the parts in there that weren't working \\ were deprecated (this includes the use of filterChain instead of WebSecurityConfigureAdpter on SecurityConfig.java).</p>\n<p>However, when i try to request an endpoint (for uploading the videos), the moment i click the upload button i receive a 401 XHR error - related to cross origin issues.</p>\n<p>On my SecurityConfig.java everything looks setup correctly. On the WebMvc config also, allowing anything from everywhere.</p>\n<p>I've tried to implement a function inside SecurityConfig.java as a Bean, to configure cors separatedly (without the WebMvcConfig class) but it didn't worked also. I'm kinda lost here.</p>\n<p>This projects runs angular  in the FrontEnd. I added a small part to identify if the user was logged in (just showing user details after login), and the user is authenticated (after logging in i can display the user details).</p>\n<p>Any input would be appreciated. Also, if i missed anything here in order to describe my problem, i'll be glad to edit the post and provide the information.</p>\n<p>Thanks in advance!</p>\n<p>SecurityConfig.java</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n    @Value(&quot;${spring.security.oauth2.resourceserver.jwt.issuer.uri}&quot;)\n    private String issuer;\n    @Value(&quot;${auth0.audience}&quot;)\n    private String audience;\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n\n\n        http.authorizeRequests()\n                .anyRequest().authenticated()\n                .and()\n                .sessionManagement()\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                .and()\n                .cors(Customizer.withDefaults())\n                .oauth2ResourceServer()\n                .jwt();\n\n        return http.build();\n\n\n\n    }\n\n    @Bean\n    CorsConfigurationSource corsConfigurationSource() {\n        CorsConfiguration configuration = new CorsConfiguration();\n        configuration.setAllowedOrigins(Collections.singletonList(&quot;http://localhost:4200&quot;));\n        configuration.setAllowedMethods(Arrays.asList(&quot;GET&quot;,&quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;, &quot;PATCH&quot;, &quot;OPTIONS&quot;));\n        configuration.setExposedHeaders(Arrays.asList(&quot;Authorization&quot;, &quot;content-type&quot;));\n        configuration.setAllowedHeaders(Arrays.asList(&quot;Authorization&quot;, &quot;content-type&quot;));\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        source.registerCorsConfiguration(&quot;/**&quot;, configuration);\n        return source;\n    }\n\n\n    @Bean\n    public JwtDecoder jwtDecoder(){\n        NimbusJwtDecoder jwtDecoder = JwtDecoders.fromOidcIssuerLocation(issuer);\n\n        OAuth2TokenValidator&lt;Jwt&gt; audienceValidator = new AudienceValidator(audience);\n        OAuth2TokenValidator&lt;Jwt&gt; withIssuer = JwtValidators.createDefaultWithIssuer(issuer);\n        OAuth2TokenValidator&lt;Jwt&gt; withAudience = new DelegatingOAuth2TokenValidator&lt;&gt;(withIssuer);\n\n        jwtDecoder.setJwtValidator(withAudience);\n\n        return jwtDecoder;\n    }\n}\n</code></pre>\n<p>WebMvcConfig.java\npackage com.pablo.portfolio.youtubeclone.config;</p>\n<pre><code>@EnableWebMvc\n@Configuration\n\npublic class WebMvcConfig  implements WebMvcConfigurer {\n    @Override\n    public void addCorsMappings(CorsRegistry corsRegistry){\n        corsRegistry.addMapping(&quot;/**&quot;)\n                .allowedOrigins(&quot;*&quot;)\n                .allowedMethods(&quot;GET&quot;, &quot;PUT&quot;,&quot;POST&quot;,&quot;DELETE&quot;,&quot;PATCH&quot;,&quot;OPTIONS&quot;)\n                .allowedHeaders(&quot;*&quot;)\n                .maxAge(3600);\n\n    }\n}\n</code></pre>\n<p>VideoController.java</p>\n<pre><code>package com.pablo.portfolio.youtubeclone.controller;\n\n\n@RestController\n@CrossOrigin\n@RequestMapping(&quot;/api/videos&quot;)\n@RequiredArgsConstructor\npublic class VideoController {\n\n    private final VideoService videoService;\n\n\n    @CrossOrigin\n    @PostMapping\n    @ResponseStatus(HttpStatus.CREATED)\n    public UploadVideoResponse uploadVideo(@RequestParam(&quot;file&quot;)MultipartFile file){\n        return videoService.uploadVideo(file);\n\n    }\n    @CrossOrigin\n    @PostMapping(&quot;/thumbnail&quot;)\n    @ResponseStatus(HttpStatus.CREATED)\n    public String uploadThumbnail\n            (@RequestParam(&quot;file&quot;)MultipartFile file, @RequestParam(&quot;videoId&quot;) String videoId){\n        return videoService.uploadThumbnail(file, videoId);\n    }\n    @CrossOrigin\n    @PutMapping\n    @ResponseStatus(HttpStatus.OK)\n    public VideoDto editVideoMetaData(@RequestBody VideoDto videoDto){\n        return videoService.editVideo(videoDto);\n    }\n\n    @CrossOrigin\n    @GetMapping(&quot;/{videoId}&quot;)\n    public VideoDto getVideoDetails(@PathVariable String videoId){\n        return videoService.getVideoDetails(videoId);\n    }\n\n}\n</code></pre>\n<p>EDIT:\nI noticed the following information on my log:</p>\n<pre><code>2023-04-09T18:13:20.032-03:00 DEBUG 1197563 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/videos\n2023-04-09T18:13:20.045-03:00 DEBUG 1197563 --- [nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext\n</code></pre>\n<p>Maybe it isn't loading the correct authentication filter?</p>\n"},{"tags":["java","android","android-studio","camera"],"comments":[{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1671129584,"post_id":74815726,"comment_id":132037502,"body_markdown":"Remove the `CAMERA` permission. You only need that if you are working with the camera APIs directly. If you continue to crash after that, please edit your question to provide the complete stack trace.","body":"Remove the <code>CAMERA</code> permission. You only need that if you are working with the camera APIs directly. If you continue to crash after that, please edit your question to provide the complete stack trace."}],"answers":[{"tags":[],"owner":{"account_id":28261124,"reputation":1,"user_id":21605813,"display_name":"user21605813"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681091395,"creation_date":1681091395,"answer_id":75973784,"question_id":74815726,"body_markdown":"I had the same issue, Just disable your CAMERA permissions in your manifest and you are good.","title":"App crashes when trying to use camera in Android App / Andoid studio","body":"<p>I had the same issue, Just disable your CAMERA permissions in your manifest and you are good.</p>\n"}],"owner":{"account_id":16991746,"reputation":15,"user_id":19283908,"display_name":"J_R"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":752,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681091395,"creation_date":1671127179,"question_id":74815726,"body_markdown":"I&#39;m doing a meal tracker app, where you can track what you eat and also upload images of your  meals to be stored on your phone and then used in the app to display your past meals.\r\n\r\nI&#39;m currently trying to add the camera/upload image functionality and I was following along to a tutorial I found on YouTube, however, the app keeps crashing as soon as the &quot;tap to add photo&quot;-Button is clicked.\r\n\r\nThis is the code inside the &quot;TrackFragment&quot; (where you enter the data for one meal):\r\n\r\n```\r\n(...)\r\npublic class TrackFragment extends Fragment{\r\n\r\n    final int CAMERA_REQ_CODE = 100;\r\n    ImageView imgCamera;\r\n\r\n    private final Context trackFragmentContext = this.getContext();\r\n\r\n(...)\r\n\r\n    \r\n    @Override\r\n    public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\r\n        super.onViewCreated(view, savedInstanceState);\r\n\r\n\r\n        // TODO handling camera input to upload image\r\n        imgCamera = view.findViewById(R.id.imgCamera);\r\n        Button btnCamera = view.findViewById(R.id.btnCamera);\r\n\r\n        btnCamera.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n\r\n                // start intent (one of these causes crash)\r\n                Intent iCamera = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\r\n                startActivityForResult(iCamera, CAMERA_REQ_CODE);\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    // show photo on track fragment below button\r\n    @Override\r\n    public void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n\r\n        if(resultCode==RESULT_OK){\r\n            if(requestCode==CAMERA_REQ_CODE){\r\n                Bitmap img = (Bitmap) (data.getExtras().get(&quot;data&quot;));\r\n                imgCamera.setImageBitmap(img);\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAccording to the log it seems to be an issue regarding security because of the camera access, however I did include in the manifest.\r\n```\r\n&lt;uses-permission android:name=&quot;android.permission.CAMERA&quot; /&gt;\r\n&lt;uses-permission android:name=&quot;ANDROID.PERMISSION.READ_EXTERNAL_STORAGE&quot;/&gt;\r\n&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\r\n```\r\n\r\nI know some of the methods are deprecated but I couldn&#39;t find any other tutorials on how to do this.[screenshot of the track-fragment / general UI][1]\r\nAny ideas on how I can fix this? \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Fgnp1.jpg","title":"App crashes when trying to use camera in Android App / Andoid studio","body":"<p>I'm doing a meal tracker app, where you can track what you eat and also upload images of your  meals to be stored on your phone and then used in the app to display your past meals.</p>\n<p>I'm currently trying to add the camera/upload image functionality and I was following along to a tutorial I found on YouTube, however, the app keeps crashing as soon as the &quot;tap to add photo&quot;-Button is clicked.</p>\n<p>This is the code inside the &quot;TrackFragment&quot; (where you enter the data for one meal):</p>\n<pre><code>(...)\npublic class TrackFragment extends Fragment{\n\n    final int CAMERA_REQ_CODE = 100;\n    ImageView imgCamera;\n\n    private final Context trackFragmentContext = this.getContext();\n\n(...)\n\n    \n    @Override\n    public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\n        super.onViewCreated(view, savedInstanceState);\n\n\n        // TODO handling camera input to upload image\n        imgCamera = view.findViewById(R.id.imgCamera);\n        Button btnCamera = view.findViewById(R.id.btnCamera);\n\n        btnCamera.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n\n                // start intent (one of these causes crash)\n                Intent iCamera = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\n                startActivityForResult(iCamera, CAMERA_REQ_CODE);\n            }\n        });\n\n    }\n\n    // show photo on track fragment below button\n    @Override\n    public void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\n        super.onActivityResult(requestCode, resultCode, data);\n\n        if(resultCode==RESULT_OK){\n            if(requestCode==CAMERA_REQ_CODE){\n                Bitmap img = (Bitmap) (data.getExtras().get(&quot;data&quot;));\n                imgCamera.setImageBitmap(img);\n            }\n        }\n    }\n}\n</code></pre>\n<p>According to the log it seems to be an issue regarding security because of the camera access, however I did include in the manifest.</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.CAMERA&quot; /&gt;\n&lt;uses-permission android:name=&quot;ANDROID.PERMISSION.READ_EXTERNAL_STORAGE&quot;/&gt;\n&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\n</code></pre>\n<p>I know some of the methods are deprecated but I couldn't find any other tutorials on how to do this.<a href=\"https://i.stack.imgur.com/Fgnp1.jpg\" rel=\"nofollow noreferrer\">screenshot of the track-fragment / general UI</a>\nAny ideas on how I can fix this?</p>\n"},{"tags":["java","eclipse"],"answers":[{"tags":[],"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1489812479,"creation_date":1489812479,"answer_id":42870568,"question_id":42870395,"body_markdown":"You are importing a class named `Random` and *in* a class named `Random`. Change your own class&#39; name.","title":"solve this error &quot;The import java.util.Random conflicts with a type defined in the same file&quot;","body":"<p>You are importing a class named <code>Random</code> and <em>in</em> a class named <code>Random</code>. Change your own class' name.</p>\n"},{"tags":[],"owner":{"account_id":26065269,"reputation":1,"user_id":21373864,"display_name":"Roberto Gabriel Jim&#233;nez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681091113,"creation_date":1681091113,"answer_id":75973767,"question_id":42870395,"body_markdown":"The problem is because your class has the same name as the function. Try changing the name of your class.\r\n\r\nChange Random in your class by RandomProgram by example.","title":"solve this error &quot;The import java.util.Random conflicts with a type defined in the same file&quot;","body":"<p>The problem is because your class has the same name as the function. Try changing the name of your class.</p>\n<p>Change Random in your class by RandomProgram by example.</p>\n"}],"owner":{"account_id":10486988,"reputation":9,"user_id":7730184,"display_name":"amarjit"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1738,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1681091113,"creation_date":1489810527,"question_id":42870395,"body_markdown":"    package amar;\r\n    import java.util.Random;\r\n\r\n    package amar;\r\n    import java.util.Random;\r\n    public class Random {\r\n    public static void main(String args[]){\r\n    \tRandom dice = new Random();\r\n    \tint number;\r\n    \tfor(int counter=1;counter&lt;=10;counter++)\r\n    \t{\r\n    \t\tnumber = 1+dice.nextInt(6);\r\n    \t\tSystem.out.println(number +&quot; &quot;);\r\n    \t}\r\n    }\r\n    }\r\n\r\nWhy am I getting an error while I am trying to run this in Eclipse Luna?\r\n","title":"solve this error &quot;The import java.util.Random conflicts with a type defined in the same file&quot;","body":"<pre><code>package amar;\nimport java.util.Random;\n\npackage amar;\nimport java.util.Random;\npublic class Random {\npublic static void main(String args[]){\n    Random dice = new Random();\n    int number;\n    for(int counter=1;counter&lt;=10;counter++)\n    {\n        number = 1+dice.nextInt(6);\n        System.out.println(number +\" \");\n    }\n}\n}\n</code></pre>\n\n<p>Why am I getting an error while I am trying to run this in Eclipse Luna?</p>\n"},{"tags":["java","dns","network-programming","jndi"],"comments":[{"owner":{"account_id":40721,"reputation":357288,"user_id":118068,"display_name":"Marc B"},"score":2,"creation_date":1435939354,"post_id":31210645,"comment_id":50423050,"body_markdown":"www.google.com is not a DNS server. it&#39;s a **WEB** server. if you want to use google&#39;s public dns, then the ip is 8.8.8.8","body":"www.google.com is not a DNS server. it&#39;s a <b>WEB</b> server. if you want to use google&#39;s public dns, then the ip is 8.8.8.8"},{"owner":{"account_id":4516986,"reputation":3493,"user_id":3671509,"accept_rate":54,"display_name":"Edijae Crusar"},"score":0,"creation_date":1435939681,"post_id":31210645,"comment_id":50423182,"body_markdown":"@MarcB  i have replaced www.google.com with 8.8.8.8 but i get the following exception:   **javax.naming.NameNotFoundException: DNS name not found [response code 3]; remaining name &#39;user&#39;**                                 even when i replace computer name **user** with another computer name.","body":"@MarcB  i have replaced www.google.com with 8.8.8.8 but i get the following exception:   <b>javax.naming.NameNotFoundException: DNS name not found [response code 3]; remaining name &#39;user&#39;</b>                                 even when i replace computer name <b>user</b> with another computer name."},{"owner":{"account_id":40721,"reputation":357288,"user_id":118068,"display_name":"Marc B"},"score":0,"creation_date":1435940030,"post_id":31210645,"comment_id":50423324,"body_markdown":"then perhaps `google-public-dns-a.google.com`, which is the reverse mapping of 8.8.8.8","body":"then perhaps <code>google-public-dns-a.google.com</code>, which is the reverse mapping of 8.8.8.8"},{"owner":{"account_id":4516986,"reputation":3493,"user_id":3671509,"accept_rate":54,"display_name":"Edijae Crusar"},"score":0,"creation_date":1435940642,"post_id":31210645,"comment_id":50423574,"body_markdown":"@MarcB  same same error. it seems like the statement cant find **google-public-dns-a.google.com**. have any other alternative bro?","body":"@MarcB  same same error. it seems like the statement cant find <b>google-public-dns-a.google.com</b>. have any other alternative bro?"},{"owner":{"account_id":4516986,"reputation":3493,"user_id":3671509,"accept_rate":54,"display_name":"Edijae Crusar"},"score":0,"creation_date":1435942128,"post_id":31210645,"comment_id":50424195,"body_markdown":"@MarcB i have changed to onther google dns which is **8.4.4.4** but i get another error **javax.naming.CommunicationException: DNS error [Root exception is java.net.SocketTimeoutException: Receive timed out]; remaining name &#39;user**","body":"@MarcB i have changed to onther google dns which is <b>8.4.4.4</b> but i get another error <b>javax.naming.CommunicationException: DNS error [Root exception is java.net.SocketTimeoutException: Receive timed out]; remaining name &#39;user</b>"},{"owner":{"account_id":40721,"reputation":357288,"user_id":118068,"display_name":"Marc B"},"score":0,"creation_date":1435942837,"post_id":31210645,"comment_id":50424496,"body_markdown":"`receive timeout`. check that your system can receive DNS traffic.","body":"<code>receive timeout</code>. check that your system can receive DNS traffic."},{"owner":{"account_id":4516986,"reputation":3493,"user_id":3671509,"accept_rate":54,"display_name":"Edijae Crusar"},"score":0,"creation_date":1436001219,"post_id":31210645,"comment_id":50438140,"body_markdown":"@MarcB still not working even after changing `com.sun.jndi.dns.timeout.initial` and `com.sun.jndi.dns.timeout.retries`. when i resolve a website, am getting the web server IP address. but when i try to resolve my colleague computer name who is also running on our intranet which is using 8.8.8.8 as DNS, that the time am getting the exception.","body":"@MarcB still not working even after changing <code>com.sun.jndi.dns.timeout.initial</code> and <code>com.sun.jndi.dns.timeout.retries</code>. when i resolve a website, am getting the web server IP address. but when i try to resolve my colleague computer name who is also running on our intranet which is using 8.8.8.8 as DNS, that the time am getting the exception."}],"answers":[{"tags":[],"owner":{"account_id":6389360,"reputation":865,"user_id":4956096,"display_name":"barthel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1435944903,"creation_date":1435944083,"answer_id":31211741,"question_id":31210645,"body_markdown":"Did you read http://docs.oracle.com/javase/7/docs/technotes/guides/jndi/jndi-dns.html ?\n\nIt seams like:\n\n    Hashtable env = new Hashtable();\n    env.put(&quot;java.naming.factory.initial&quot;, &quot;com.sun.jndi.dns.DnsContextFactory&quot;);\n    env.put(&quot;java.naming.provider.url&quot;,    &quot;dns://google-public-dns-a.google.com&quot;);\n\n    DirContext ictx = new InitialDirContext(env);\n    Attributes attrs1 = ictx.getAttributes(&quot;clientname&quot;, new String[] {&quot;A&quot;});\n\nis what you want.\n\nThe timeout values are configurable either:\n\n&gt; env.put(&quot;com.sun.jndi.dns.timeout.initial&quot;, &quot;2000&quot;);\n&gt;\n&gt; env.put(&quot;com.sun.jndi.dns.timeout.retries&quot;, &quot;3&quot;);\n\nUse FQDN (full qualified domain name) if you will use a public DNS server instead of `clientname` like shown in your Exception. Google doesn&#39;t hopefully know anything about `clientname` ;-).","title":"How to resolve a remote computer name to get its IP address in Java?","body":"<p>Did you read <a href=\"http://docs.oracle.com/javase/7/docs/technotes/guides/jndi/jndi-dns.html\" rel=\"nofollow noreferrer\">http://docs.oracle.com/javase/7/docs/technotes/guides/jndi/jndi-dns.html</a> ?</p>\n<p>It seams like:</p>\n<pre><code>Hashtable env = new Hashtable();\nenv.put(&quot;java.naming.factory.initial&quot;, &quot;com.sun.jndi.dns.DnsContextFactory&quot;);\nenv.put(&quot;java.naming.provider.url&quot;,    &quot;dns://google-public-dns-a.google.com&quot;);\n\nDirContext ictx = new InitialDirContext(env);\nAttributes attrs1 = ictx.getAttributes(&quot;clientname&quot;, new String[] {&quot;A&quot;});\n</code></pre>\n<p>is what you want.</p>\n<p>The timeout values are configurable either:</p>\n<blockquote>\n<p>env.put(&quot;com.sun.jndi.dns.timeout.initial&quot;, &quot;2000&quot;);</p>\n<p>env.put(&quot;com.sun.jndi.dns.timeout.retries&quot;, &quot;3&quot;);</p>\n</blockquote>\n<p>Use FQDN (full qualified domain name) if you will use a public DNS server instead of <code>clientname</code> like shown in your Exception. Google doesn't hopefully know anything about <code>clientname</code> ;-).</p>\n"},{"tags":[],"owner":{"account_id":6389360,"reputation":865,"user_id":4956096,"display_name":"barthel"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1436002836,"creation_date":1436001473,"answer_id":31218999,"question_id":31210645,"body_markdown":"Use of `JNDI` is only useful if you need specific DNS attributes/entries.\n\nMaybe the following is more suitable for you:\n\n    final InetAddress inetAddress = InetAddress.getByName(&quot;clientname&quot;);\n    final String ipAddress = inetAddress.getHostAddress();\n\nThe local DNS infrastructure - like the OS it does - will be use and you don&#39;t need to provide an DNS server by yourself.\n\nhttp://docs.oracle.com/javase/7/docs/api/java/net/InetAddress.html\n\nhttp://docs.oracle.com/javase/7/docs/api/java/net/InetAddress.html#getByName%28java.lang.String%29\n\n&gt; Determines the IP address of a host, given the host&#39;s name.\n&gt;\n&gt; The host name can either be a machine name, such as &quot;java.sun.com&quot;, or a textual representation of its IP address. If a literal IP address is supplied, only the validity of the address format is checked.\n&gt;\n&gt; For host specified in literal IPv6 address, either the form defined in RFC 2732 or the literal IPv6 address format defined in RFC 2373 is accepted. IPv6 scoped addresses are also supported. ","title":"How to resolve a remote computer name to get its IP address in Java?","body":"<p>Use of <code>JNDI</code> is only useful if you need specific DNS attributes/entries.</p>\n<p>Maybe the following is more suitable for you:</p>\n<pre><code>final InetAddress inetAddress = InetAddress.getByName(&quot;clientname&quot;);\nfinal String ipAddress = inetAddress.getHostAddress();\n</code></pre>\n<p>The local DNS infrastructure - like the OS it does - will be use and you don't need to provide an DNS server by yourself.</p>\n<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/net/InetAddress.html\" rel=\"nofollow noreferrer\">http://docs.oracle.com/javase/7/docs/api/java/net/InetAddress.html</a></p>\n<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/net/InetAddress.html#getByName%28java.lang.String%29\" rel=\"nofollow noreferrer\">http://docs.oracle.com/javase/7/docs/api/java/net/InetAddress.html#getByName%28java.lang.String%29</a></p>\n<blockquote>\n<p>Determines the IP address of a host, given the host's name.</p>\n<p>The host name can either be a machine name, such as &quot;java.sun.com&quot;, or a textual representation of its IP address. If a literal IP address is supplied, only the validity of the address format is checked.</p>\n<p>For host specified in literal IPv6 address, either the form defined in RFC 2732 or the literal IPv6 address format defined in RFC 2373 is accepted. IPv6 scoped addresses are also supported.</p>\n</blockquote>\n"}],"owner":{"account_id":4516986,"reputation":3493,"user_id":3671509,"accept_rate":54,"display_name":"Edijae Crusar"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2895,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":31218999,"answer_count":2,"score":1,"last_activity_date":1681090524,"creation_date":1435939128,"question_id":31210645,"body_markdown":"I&#39;m trying to come up with a program that send packets from  computer **A** to computer **B**. Both computers must have a copy of my Java program. This  require one to enter the name of the  remote computer **B** in a `JTextField` object, enter the message in a `JTextArea` object and then click the button send.\r\n\r\nMy program should be able to resolve the given computer name to IP address so to include the IP address as a parameter in my `DatagramPacket` constuctor.\r\n\r\nI have tried using the below method to do the resolving, but I get a `javax.naming.CommunicationException`:\r\n    \r\n    String clientname = &quot;user&quot;;\r\n    Hashtable&lt;String,Object&gt; env = new Hashtable&lt;String,Object&gt;();\r\n    env.put(Context.INITIAL_CONTEXT_FACTORY, &quot;com.sun.jndi.dns.DnsContextFactory&quot;);\r\n    env.put(Context.PROVIDER_URL, &quot;dns://www.google.com&quot;);\r\n    DirContext con = new InitialDirContext(env);\r\n    Object obj = con.lookup(&quot;clientname&quot;);\r\n\r\n#### Exception thrown:\r\n\r\n    javax.naming.CommunicationException: DNS error [Root exception is java.net.SocketTimeoutException: Receive timed out]; remaining name &#39;user&#39;\r\n\tat com.sun.jndi.dns.DnsClient.query(DnsClient.java:300)\r\n\tat com.sun.jndi.dns.Resolver.query(Resolver.java:81)\r\n\tat com.sun.jndi.dns.DnsContext.c_lookup(DnsContext.java:286)\r\n\tat com.sun.jndi.toolkit.ctx.ComponentContext.p_lookup(ComponentContext.java:544)\r\n\tat com.sun.jndi.toolkit.ctx.PartialCompositeContext.lookup(PartialCompositeContext.java:177)\r\n\tat com.sun.jndi.toolkit.ctx.PartialCompositeContext.lookup(PartialCompositeContext.java:166)\r\n\tat javax.naming.InitialContext.lookup(InitialContext.java:411)\r\n    Caused by: java.net.SocketTimeoutException: Receive timed out\r\n\tat java.net.DualStackPlainDatagramSocketImpl.socketReceiveOrPeekData(Native Method)\r\n\tat java.net.DualStackPlainDatagramSocketImpl.receive0(DualStackPlainDatagramSocketImpl.java:121)\r\n\tat java.net.AbstractPlainDatagramSocketImpl.receive(AbstractPlainDatagramSocketImpl.java:145)\r\n\tat java.net.DatagramSocket.receive(DatagramSocket.java:786)\r\n\tat com.sun.jndi.dns.DnsClient.doUdpQuery(DnsClient.java:411)\r\n\tat com.sun.jndi.dns.DnsClient.query(DnsClient.java:203)\r\n\t... 7 more\r\n\r\n## Question\r\nHow can I achieve my goal, because it seems to me like Java DNS service provider can only resolve *domain names* and not individual computer names?\r\n\r\nI&#39;ve been struggling with this for 3 days.  \r\nAny help is appreciated.\r\n    ","title":"How to resolve a remote computer name to get its IP address in Java?","body":"<p>I'm trying to come up with a program that send packets from  computer <strong>A</strong> to computer <strong>B</strong>. Both computers must have a copy of my Java program. This  require one to enter the name of the  remote computer <strong>B</strong> in a <code>JTextField</code> object, enter the message in a <code>JTextArea</code> object and then click the button send.</p>\n<p>My program should be able to resolve the given computer name to IP address so to include the IP address as a parameter in my <code>DatagramPacket</code> constuctor.</p>\n<p>I have tried using the below method to do the resolving, but I get a <code>javax.naming.CommunicationException</code>:</p>\n<pre><code>String clientname = &quot;user&quot;;\nHashtable&lt;String,Object&gt; env = new Hashtable&lt;String,Object&gt;();\nenv.put(Context.INITIAL_CONTEXT_FACTORY, &quot;com.sun.jndi.dns.DnsContextFactory&quot;);\nenv.put(Context.PROVIDER_URL, &quot;dns://www.google.com&quot;);\nDirContext con = new InitialDirContext(env);\nObject obj = con.lookup(&quot;clientname&quot;);\n</code></pre>\n<h4>Exception thrown:</h4>\n<pre><code>javax.naming.CommunicationException: DNS error [Root exception is java.net.SocketTimeoutException: Receive timed out]; remaining name 'user'\nat com.sun.jndi.dns.DnsClient.query(DnsClient.java:300)\nat com.sun.jndi.dns.Resolver.query(Resolver.java:81)\nat com.sun.jndi.dns.DnsContext.c_lookup(DnsContext.java:286)\nat com.sun.jndi.toolkit.ctx.ComponentContext.p_lookup(ComponentContext.java:544)\nat com.sun.jndi.toolkit.ctx.PartialCompositeContext.lookup(PartialCompositeContext.java:177)\nat com.sun.jndi.toolkit.ctx.PartialCompositeContext.lookup(PartialCompositeContext.java:166)\nat javax.naming.InitialContext.lookup(InitialContext.java:411)\nCaused by: java.net.SocketTimeoutException: Receive timed out\nat java.net.DualStackPlainDatagramSocketImpl.socketReceiveOrPeekData(Native Method)\nat java.net.DualStackPlainDatagramSocketImpl.receive0(DualStackPlainDatagramSocketImpl.java:121)\nat java.net.AbstractPlainDatagramSocketImpl.receive(AbstractPlainDatagramSocketImpl.java:145)\nat java.net.DatagramSocket.receive(DatagramSocket.java:786)\nat com.sun.jndi.dns.DnsClient.doUdpQuery(DnsClient.java:411)\nat com.sun.jndi.dns.DnsClient.query(DnsClient.java:203)\n... 7 more\n</code></pre>\n<h2>Question</h2>\n<p>How can I achieve my goal, because it seems to me like Java DNS service provider can only resolve <em>domain names</em> and not individual computer names?</p>\n<p>I've been struggling with this for 3 days.<br />\nAny help is appreciated.</p>\n"},{"tags":["java","android","xml","navbar"],"comments":[{"owner":{"account_id":19044113,"reputation":704,"user_id":13903584,"display_name":"Muhammad Asad"},"score":0,"creation_date":1681107483,"post_id":75973666,"comment_id":133999328,"body_markdown":"you can give the working idea from this: https://github.com/ittianyu/BottomNavigationViewEx","body":"you can give the working idea from this: <a href=\"https://github.com/ittianyu/BottomNavigationViewEx\" rel=\"nofollow noreferrer\">github.com/ittianyu/BottomNavigationViewEx</a>"},{"owner":{"account_id":72095,"reputation":18817,"user_id":208273,"display_name":"Ryan M"},"score":0,"creation_date":1681348096,"post_id":75973666,"comment_id":134043366,"body_markdown":"Instead of posting code, error messages, data, or other text as images or links, please [edit] your post to copy/paste or type the actual text directly into the post (for code, use a [code block](/editing-help#code)). [Text in images cannot be copied to reproduce the issue, and error messages in images cannot be searched](//meta.stackoverflow.com/a/285557/208273). Links may become invalid if the linked site changes.  If your code is too long to fit in the post, we have tips on [how to create a minimal, reproducible example](//stackoverflow.com/help/mcve).","body":"Instead of posting code, error messages, data, or other text as images or links, please <a href=\"https://stackoverflow.com/posts/75973666/edit\">edit</a> your post to copy/paste or type the actual text directly into the post (for code, use a <a href=\"/editing-help#code\">code block</a>). <a href=\"//meta.stackoverflow.com/a/285557/208273\">Text in images cannot be copied to reproduce the issue, and error messages in images cannot be searched</a>. Links may become invalid if the linked site changes.  If your code is too long to fit in the post, we have tips on <a href=\"//stackoverflow.com/help/mcve\">how to create a minimal, reproducible example</a>."}],"owner":{"account_id":27924374,"reputation":19,"user_id":21323775,"display_name":"devfreeguy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1681348154,"answer_count":0,"score":1,"last_activity_date":1681089116,"creation_date":1681089116,"question_id":75973666,"body_markdown":"How can I disable a single navigation bar item from clicking, rippling or focusing when touched or pressed (I use java)\r\n\r\n[![How can disable or stop the item at the middle to stop focusing or pressing](https://i.stack.imgur.com/hCliX.jpg)](https://i.stack.imgur.com/hCliX.jpg)\r\n\r\nMy [![XML](https://i.stack.imgur.com/kgYly.jpg)](https://i.stack.imgur.com/kgYly.jpg) code is here","title":"How can I disable a single navigation bar item in android studio, java","body":"<p>How can I disable a single navigation bar item from clicking, rippling or focusing when touched or pressed (I use java)</p>\n<p><a href=\"https://i.stack.imgur.com/hCliX.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hCliX.jpg\" alt=\"How can disable or stop the item at the middle to stop focusing or pressing\" /></a></p>\n<p>My <a href=\"https://i.stack.imgur.com/kgYly.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kgYly.jpg\" alt=\"XML\" /></a> code is here</p>\n"},{"tags":["java","android","material-design","androidx"],"answers":[{"tags":[],"owner":{"account_id":5054372,"reputation":183,"user_id":4058038,"display_name":"Timur Ugurlu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681087740,"creation_date":1681087740,"answer_id":75973615,"question_id":75973443,"body_markdown":"I just solved it:\r\n\r\nI have a base application theme where I had added \r\n\r\n```&lt;item name=&quot;preferenceTheme&quot;&gt;@style/AppPreferenceTheme&lt;/item&gt;```\r\n\r\nThis was the problem. What I made now is that deleted this line and I added the following to my Preference Fragment inside the onCreateView \r\n\r\n``` activity.setTheme(R.style.AppPreferenceTheme); ```","title":"SwitchPreference not switching visibly (no color switch, no animation) API &gt;=23","body":"<p>I just solved it:</p>\n<p>I have a base application theme where I had added</p>\n<p><code>&lt;item name=&quot;preferenceTheme&quot;&gt;@style/AppPreferenceTheme&lt;/item&gt;</code></p>\n<p>This was the problem. What I made now is that deleted this line and I added the following to my Preference Fragment inside the onCreateView</p>\n<p><code>activity.setTheme(R.style.AppPreferenceTheme);</code></p>\n"}],"owner":{"account_id":5054372,"reputation":183,"user_id":4058038,"display_name":"Timur Ugurlu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681087740,"creation_date":1681084017,"question_id":75973443,"body_markdown":"So I recently made a small update for my app and users on older APIs (equal lower 23) complained that the PreferenceSwitch work for the logic but there is no visible sign it was switched. API over 24 is working fine.\r\n\r\nEven if I preset the Switches and reload the Fragment the switches are not set visibly.\r\n\r\nI would like to fix this but I have no clue why this bug appears.\r\n\r\nI am using takisoft preferencex and com.takisoft.preferencex.PreferenceFragmentCompat\r\nBut a quick change to the official one didnt work, same behavior\r\n\r\nI searched online and on github but I couldnt come up with a solution.\r\n\r\nEdit: I just installed my old version on an Emulator running API 23 and the switches are still not working.\r\n\r\nA small sample of my code:\r\n\r\n    vib.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {\r\n\r\n            @Override\r\n            public boolean onPreferenceChange(Preference preference, Object newValue) {\r\n               \r\n                    if (vibrate) {\r\n                        SharedPreferences.Editor editor = sharedPref.edit();\r\n                        editor.putBoolean(&quot;vibrate&quot;, false);\r\n                        editor.commit();\r\n                        editor.apply();\r\n                        vibrate = sharedPref.getBoolean(&quot;vibrate&quot;, false);\r\n                        vib.setChecked(vibrate);\r\n\r\n\r\n                    } else {\r\n\r\n                        SharedPreferences.Editor editor = sharedPref.edit();\r\n                        editor.putBoolean(&quot;vibrate&quot;, true);\r\n                        editor.commit();\r\n                        editor.apply();\r\n                        vibrate = sharedPref.getBoolean(&quot;vibrate&quot;, false);\r\n                        vib.setChecked(vibrate);\r\n\r\n                    }\r\n\r\n                return false;\r\n            }\r\n        });","title":"SwitchPreference not switching visibly (no color switch, no animation) API &gt;=23","body":"<p>So I recently made a small update for my app and users on older APIs (equal lower 23) complained that the PreferenceSwitch work for the logic but there is no visible sign it was switched. API over 24 is working fine.</p>\n<p>Even if I preset the Switches and reload the Fragment the switches are not set visibly.</p>\n<p>I would like to fix this but I have no clue why this bug appears.</p>\n<p>I am using takisoft preferencex and com.takisoft.preferencex.PreferenceFragmentCompat\nBut a quick change to the official one didnt work, same behavior</p>\n<p>I searched online and on github but I couldnt come up with a solution.</p>\n<p>Edit: I just installed my old version on an Emulator running API 23 and the switches are still not working.</p>\n<p>A small sample of my code:</p>\n<pre><code>vib.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {\n\n        @Override\n        public boolean onPreferenceChange(Preference preference, Object newValue) {\n           \n                if (vibrate) {\n                    SharedPreferences.Editor editor = sharedPref.edit();\n                    editor.putBoolean(&quot;vibrate&quot;, false);\n                    editor.commit();\n                    editor.apply();\n                    vibrate = sharedPref.getBoolean(&quot;vibrate&quot;, false);\n                    vib.setChecked(vibrate);\n\n\n                } else {\n\n                    SharedPreferences.Editor editor = sharedPref.edit();\n                    editor.putBoolean(&quot;vibrate&quot;, true);\n                    editor.commit();\n                    editor.apply();\n                    vibrate = sharedPref.getBoolean(&quot;vibrate&quot;, false);\n                    vib.setChecked(vibrate);\n\n                }\n\n            return false;\n        }\n    });\n</code></pre>\n"},{"tags":["java","spring-mvc"],"comments":[{"owner":{"account_id":11568110,"reputation":37,"user_id":8475665,"display_name":"aeromic"},"score":0,"creation_date":1502940745,"post_id":45726148,"comment_id":78409820,"body_markdown":"I am using boot 1.5.6 ,thx","body":"I am using boot 1.5.6 ,thx"},{"owner":{"account_id":195331,"reputation":275398,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1502945012,"post_id":45726148,"comment_id":78410831,"body_markdown":"What is this `PathVariableMissingException` you speak of? Why should that be thrown?","body":"What is this <code>PathVariableMissingException</code> you speak of? Why should that be thrown?"},{"owner":{"account_id":11568110,"reputation":37,"user_id":8475665,"display_name":"aeromic"},"score":0,"creation_date":1502955235,"post_id":45726148,"comment_id":78415788,"body_markdown":"sorry for typo , MissingPathVariableException is a Spring build-in exception , &quot;typically that means the URI template does not match the path variable name declared on the method parameter.&quot;(from Spring original comment).","body":"sorry for typo , MissingPathVariableException is a Spring build-in exception , &quot;typically that means the URI template does not match the path variable name declared on the method parameter.&quot;(from Spring original comment)."},{"owner":{"account_id":195331,"reputation":275398,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":1,"creation_date":1502982254,"post_id":45726148,"comment_id":78435139,"body_markdown":"`MissingPathVariableException` is thrown if you have a `@Path` variable with name `example`, but no `{example}` uri variable in the `@RequestMapping` path. _Typically that means the URI template does not match the path variable name declared on the method parameter._","body":"<code>MissingPathVariableException</code> is thrown if you have a <code>@Path</code> variable with name <code>example</code>, but no <code>{example}</code> uri variable in the <code>@RequestMapping</code> path. <i>Typically that means the URI template does not match the path variable name declared on the method parameter.</i>"},{"owner":{"account_id":11568110,"reputation":37,"user_id":8475665,"display_name":"aeromic"},"score":0,"creation_date":1503040620,"post_id":45726148,"comment_id":78458611,"body_markdown":"Oh , this is the point I really don&#39;t know. Let me try it .","body":"Oh , this is the point I really don&#39;t know. Let me try it ."},{"owner":{"account_id":11568110,"reputation":37,"user_id":8475665,"display_name":"aeromic"},"score":0,"creation_date":1503041256,"post_id":45726148,"comment_id":78458980,"body_markdown":"yes,finally figure it out , thx","body":"yes,finally figure it out , thx"}],"answers":[{"tags":[],"owner":{"account_id":3819371,"reputation":898,"user_id":3639398,"display_name":"raksa"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1502940910,"creation_date":1502940910,"answer_id":45726194,"question_id":45726148,"body_markdown":"base on your url mapping: you can&#39;t leave it blank like &quot;**///**&quot; it must be &quot;**/number/number/**&quot;\r\n\r\ni.e **http://localhost:8080/channel/getId/0/0/**","title":"Spring Boot some path variable are missing but return 404","body":"<p>base on your url mapping: you can't leave it blank like \"<strong>///</strong>\" it must be \"<strong>/number/number/</strong>\"</p>\n\n<p>i.e <strong><a href=\"http://localhost:8080/channel/getId/0/0/\" rel=\"nofollow noreferrer\">http://localhost:8080/channel/getId/0/0/</a></strong></p>\n"},{"tags":[],"owner":{"account_id":2292980,"reputation":84,"user_id":2015226,"display_name":"cjcrobin"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1502946537,"creation_date":1502946537,"answer_id":45726995,"question_id":45726148,"body_markdown":"I guess what you are asking for is to customized the exception. Then what you need is to provide a handler, you can just simply extend abstract class ResponseEntityExceptionHandler and override the method handleMissingPathVariable.\r\n\r\nOne example:\r\n\r\n    @Override\r\n    protected ResponseEntity&lt;Object&gt; handleMissingPathVariable(MissingPathVariableException ex, HttpHeaders headers,\r\n            HttpStatus status, WebRequest request) {\r\n    \r\n        String error = ex.getParameter() + &quot; parameter is missing&quot;;\r\n        ErrorMessageHandler error =message(HttpStatus.BAD_REQUEST, ex.toString(), error) ;\r\n        return new ResponseEntity&lt;Object&gt;(error, new HttpHeaders(), HttpStatus.BAD_REQUEST);\r\n    \r\n    }","title":"Spring Boot some path variable are missing but return 404","body":"<p>I guess what you are asking for is to customized the exception. Then what you need is to provide a handler, you can just simply extend abstract class ResponseEntityExceptionHandler and override the method handleMissingPathVariable.</p>\n\n<p>One example:</p>\n\n<pre><code>@Override\nprotected ResponseEntity&lt;Object&gt; handleMissingPathVariable(MissingPathVariableException ex, HttpHeaders headers,\n        HttpStatus status, WebRequest request) {\n\n    String error = ex.getParameter() + \" parameter is missing\";\n    ErrorMessageHandler error =message(HttpStatus.BAD_REQUEST, ex.toString(), error) ;\n    return new ResponseEntity&lt;Object&gt;(error, new HttpHeaders(), HttpStatus.BAD_REQUEST);\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1502497,"reputation":2147,"user_id":1406702,"accept_rate":50,"display_name":"happy_marmoset"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1618116920,"creation_date":1618116920,"answer_id":67041591,"question_id":45726148,"body_markdown":"You can use `@PathVariable(required = false)` and handle the logic manually:\r\n\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/channel&quot;)\r\npublic class ChannelController \r\n{\r\n    @GetMapping(&quot;/getId/{participantId}/{walletType}&quot;)\r\n    Map&lt;String,Object&gt; getChannelId(@PathVariable(required = false) Integer participantId , @PathVariable(required = false) Integer walletType) {\r\n\r\n        if (participantId == null) {\r\n            throw new ResponseStatusException(HttpStatus.BAD_REQUEST, &quot;Participant is required&quot;);\r\n        }\r\n\r\n        if (walletType == null) {\r\n            throw new ResponseStatusException(HttpStatus.BAD_REQUEST, &quot;Wallet type is required&quot;);\r\n        }\r\n\r\n        return demoDAOImpl.getChannel(participantId, walletType);\r\n    }\r\n}\r\n```","title":"Spring Boot some path variable are missing but return 404","body":"<p>You can use <code>@PathVariable(required = false)</code> and handle the logic manually:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/channel&quot;)\npublic class ChannelController \n{\n    @GetMapping(&quot;/getId/{participantId}/{walletType}&quot;)\n    Map&lt;String,Object&gt; getChannelId(@PathVariable(required = false) Integer participantId , @PathVariable(required = false) Integer walletType) {\n\n        if (participantId == null) {\n            throw new ResponseStatusException(HttpStatus.BAD_REQUEST, &quot;Participant is required&quot;);\n        }\n\n        if (walletType == null) {\n            throw new ResponseStatusException(HttpStatus.BAD_REQUEST, &quot;Wallet type is required&quot;);\n        }\n\n        return demoDAOImpl.getChannel(participantId, walletType);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9507708,"reputation":2869,"user_id":7066647,"display_name":"dbaltor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681084119,"creation_date":1681084119,"answer_id":75973449,"question_id":45726148,"body_markdown":"For a `MissingPathVariableException` to be thrown, the request has to match a request mapping. To make your controller to handle the `http://localhost:8080/channel/getId///` request, you would need to declare your **GetMapping** annotation as follows:\r\n```\r\n@GetMapping(value = {&quot;getId///&quot;, &quot;/getId/{participantId}/{walletType}&quot;})","title":"Spring Boot some path variable are missing but return 404","body":"<p>For a <code>MissingPathVariableException</code> to be thrown, the request has to match a request mapping. To make your controller to handle the <code>http://localhost:8080/channel/getId///</code> request, you would need to declare your <strong>GetMapping</strong> annotation as follows:</p>\n<pre><code>@GetMapping(value = {&quot;getId///&quot;, &quot;/getId/{participantId}/{walletType}&quot;})\n</code></pre>\n"}],"owner":{"account_id":11568110,"reputation":37,"user_id":8475665,"display_name":"aeromic"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5172,"favorite_count":0,"down_vote_count":2,"up_vote_count":4,"answer_count":4,"score":2,"last_activity_date":1681084119,"creation_date":1502940495,"question_id":45726148,"body_markdown":"I am a beginner of boot . Code as below \r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/channel&quot;)\r\n    \r\n    public class ChannelController \r\n\t{\r\n    \t@GetMapping(&quot;/getId/{participantId}/{walletType}&quot;)\r\n    \tMap&lt;String,Object&gt; getChannelId(@PathVariable Integer participantId , @PathVariable Integer walletType ){\r\n    \t\treturn demoDAOImpl.getChannel(participantId, walletType);\r\n    \t}\r\n    }\r\n\r\nWhen I hit `http://localhost:8080/channel/getId///`, it returns the default Whitelabel Error Page, which states \r\n\r\n&gt; There was an unexpected error (type=Not Found, status=404).\r\n\r\nHere I am confused. I thought Spring MVC should throw a `MissingPathVariableException`. Why is it responding with a 404 response, resource not found?\r\n\r\n","title":"Spring Boot some path variable are missing but return 404","body":"<p>I am a beginner of boot . Code as below </p>\n\n<pre><code>@RestController\n@RequestMapping(\"/channel\")\n\npublic class ChannelController \n{\n    @GetMapping(\"/getId/{participantId}/{walletType}\")\n    Map&lt;String,Object&gt; getChannelId(@PathVariable Integer participantId , @PathVariable Integer walletType ){\n        return demoDAOImpl.getChannel(participantId, walletType);\n    }\n}\n</code></pre>\n\n<p>When I hit <code>http://localhost:8080/channel/getId///</code>, it returns the default Whitelabel Error Page, which states </p>\n\n<blockquote>\n  <p>There was an unexpected error (type=Not Found, status=404).</p>\n</blockquote>\n\n<p>Here I am confused. I thought Spring MVC should throw a <code>MissingPathVariableException</code>. Why is it responding with a 404 response, resource not found?</p>\n"},{"tags":["java","amazon-s3","amazon-web-services"],"comments":[{"owner":{"account_id":5124438,"reputation":2515,"user_id":4107038,"accept_rate":44,"display_name":"Rajat"},"score":0,"creation_date":1580799910,"post_id":10975475,"comment_id":106206589,"body_markdown":"https://stackoverflow.com/questions/6524041/how-do-you-make-an-s3-object-public-via-the-aws-java-sdk/60052151#60052151","body":"<a href=\"https://stackoverflow.com/questions/6524041/how-do-you-make-an-s3-object-public-via-the-aws-java-sdk/60052151#60052151\" title=\"how do you make an s3 object public via the aws java sdk\">stackoverflow.com/questions/6524041/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":36261,"reputation":59415,"user_id":103295,"accept_rate":95,"display_name":"Jeffrey Kemp"},"down_vote_count":3,"up_vote_count":95,"is_accepted":false,"score":92,"last_activity_date":1339397551,"creation_date":1339397551,"answer_id":10975577,"question_id":10975475,"body_markdown":"You can work it out for yourself given the bucket and the file name you specify in the upload request.\r\n\r\ne.g. if your bucket is `mybucket` and your file is named `myfilename`:\r\n\r\n    https://mybucket.s3.amazonaws.com/myfilename\r\n\r\nThe `s3` bit will be different depending on which region your bucket is in. For example, I use the south-east asia region so my urls are like:\r\n\r\n    https://mybucket.s3-ap-southeast-1.amazonaws.com/myfilename","title":"Amazon S3 upload file and get URL","body":"<p>You can work it out for yourself given the bucket and the file name you specify in the upload request.</p>\n\n<p>e.g. if your bucket is <code>mybucket</code> and your file is named <code>myfilename</code>:</p>\n\n<pre><code>https://mybucket.s3.amazonaws.com/myfilename\n</code></pre>\n\n<p>The <code>s3</code> bit will be different depending on which region your bucket is in. For example, I use the south-east asia region so my urls are like:</p>\n\n<pre><code>https://mybucket.s3-ap-southeast-1.amazonaws.com/myfilename\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1913647,"reputation":226,"user_id":1726771,"display_name":"Michael Astreiko"},"down_vote_count":85,"up_vote_count":38,"is_accepted":true,"score":-47,"last_activity_date":1625979384,"creation_date":1349617789,"answer_id":12769383,"question_id":10975475,"body_markdown":"To make the file public before uploading you can use the `#withCannedAcl` method of `PutObjectRequest`:\r\n\r\n    myAmazonS3Client.putObject(new PutObjectRequest(&#39;some-grails-bucket&#39;,  &#39;somePath/someKey.jpg&#39;, new    File(&#39;/Users/ben/Desktop/photo.jpg&#39;)).withCannedAcl(CannedAccessControlList.PublicRead))\r\n\r\n    String url = myAmazonS3Client.getUrl(&#39;some-grails-bucket&#39;,  &#39;somePath/someKey.jpg&#39;).toString();\r\n","title":"Amazon S3 upload file and get URL","body":"<p>To make the file public before uploading you can use the <code>#withCannedAcl</code> method of <code>PutObjectRequest</code>:</p>\n<pre><code>myAmazonS3Client.putObject(new PutObjectRequest('some-grails-bucket',  'somePath/someKey.jpg', new    File('/Users/ben/Desktop/photo.jpg')).withCannedAcl(CannedAccessControlList.PublicRead))\n\nString url = myAmazonS3Client.getUrl('some-grails-bucket',  'somePath/someKey.jpg').toString();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2593070,"reputation":4352,"user_id":2247309,"display_name":"hussachai"},"down_vote_count":1,"up_vote_count":145,"is_accepted":false,"score":144,"last_activity_date":1521704045,"creation_date":1435341496,"answer_id":31079371,"question_id":10975475,"body_markdown":"No you cannot get the URL in single action but two :)\r\n\r\nFirst of all, you may have to make the file public before uploading because it makes no sense to get the URL that no one can access. You can do so by setting ACL as Michael Astreiko suggested.\r\nYou can get the resource URL either by calling `getResourceUrl` or `getUrl`.\r\n\r\n    AmazonS3Client s3Client = (AmazonS3Client)AmazonS3ClientBuilder.defaultClient();\r\n    s3Client.putObject(new PutObjectRequest(&quot;your-bucket&quot;, &quot;some-path/some-key.jpg&quot;, new File(&quot;somePath/someKey.jpg&quot;)).withCannedAcl(CannedAccessControlList.PublicRead))\r\n    s3Client.getResourceUrl(&quot;your-bucket&quot;, &quot;some-path/some-key.jpg&quot;);\r\n\r\n**Note1:**\r\nThe different between `getResourceUrl` and `getUrl` is that getResourceUrl will return null when exception occurs.\r\n\r\n**Note2:**\r\n`getUrl` method is not defined in the AmazonS3 interface. You have to cast the object to AmazonS3Client if you use the standard builder.","title":"Amazon S3 upload file and get URL","body":"<p>No you cannot get the URL in single action but two :)</p>\n\n<p>First of all, you may have to make the file public before uploading because it makes no sense to get the URL that no one can access. You can do so by setting ACL as Michael Astreiko suggested.\nYou can get the resource URL either by calling <code>getResourceUrl</code> or <code>getUrl</code>.</p>\n\n<pre><code>AmazonS3Client s3Client = (AmazonS3Client)AmazonS3ClientBuilder.defaultClient();\ns3Client.putObject(new PutObjectRequest(\"your-bucket\", \"some-path/some-key.jpg\", new File(\"somePath/someKey.jpg\")).withCannedAcl(CannedAccessControlList.PublicRead))\ns3Client.getResourceUrl(\"your-bucket\", \"some-path/some-key.jpg\");\n</code></pre>\n\n<p><strong>Note1:</strong>\nThe different between <code>getResourceUrl</code> and <code>getUrl</code> is that getResourceUrl will return null when exception occurs.</p>\n\n<p><strong>Note2:</strong>\n<code>getUrl</code> method is not defined in the AmazonS3 interface. You have to cast the object to AmazonS3Client if you use the standard builder.</p>\n"},{"tags":[],"owner":{"account_id":8219471,"reputation":101,"user_id":6184558,"accept_rate":50,"display_name":"rollcage"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1502376559,"creation_date":1502376559,"answer_id":45617001,"question_id":10975475,"body_markdown":"a bit old but still for anyone stumbling upon this in the future:\r\n\r\nyou can do it with one line assuming you already wrote the CredentialProvider and the AmazonS3Client. \r\n\r\nit will look like this:\r\n\r\n\r\n     String ImageURL = String.valueOf(s3.getUrl(\r\n                                      ConstantsAWS3.BUCKET_NAME, //The S3 Bucket To Upload To\r\n                                      file.getName())); //The key for the uploaded object\r\n\r\nand if you didn&#39;t wrote the CredentialProvider and the AmazonS3Client then just add them before getting the URL like this:\r\n\r\n\r\n      CognitoCachingCredentialsProvider credentialsProvider = new CognitoCachingCredentialsProvider(\r\n            getApplicationContext(),\r\n            &quot;POOL_ID&quot;, // Identity pool ID\r\n            Regions.US_EAST_1 // Region\r\n    );\r\n\r\n","title":"Amazon S3 upload file and get URL","body":"<p>a bit old but still for anyone stumbling upon this in the future:</p>\n\n<p>you can do it with one line assuming you already wrote the CredentialProvider and the AmazonS3Client. </p>\n\n<p>it will look like this:</p>\n\n<pre><code> String ImageURL = String.valueOf(s3.getUrl(\n                                  ConstantsAWS3.BUCKET_NAME, //The S3 Bucket To Upload To\n                                  file.getName())); //The key for the uploaded object\n</code></pre>\n\n<p>and if you didn't wrote the CredentialProvider and the AmazonS3Client then just add them before getting the URL like this:</p>\n\n<pre><code>  CognitoCachingCredentialsProvider credentialsProvider = new CognitoCachingCredentialsProvider(\n        getApplicationContext(),\n        \"POOL_ID\", // Identity pool ID\n        Regions.US_EAST_1 // Region\n);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13551498,"reputation":89,"user_id":9776239,"display_name":"Omkar Ayachit"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1618251031,"creation_date":1527233027,"answer_id":50523639,"question_id":10975475,"body_markdown":"```\r\nSystem.out.println(&quot;Link : &quot; + s3Object.getObjectContent().getHttpRequest().getURI());\r\n```\r\n\r\nWith this code you can retrieve the link of already uploaded file to S3 bucket.\r\n","title":"Amazon S3 upload file and get URL","body":"<pre><code>System.out.println(&quot;Link : &quot; + s3Object.getObjectContent().getHttpRequest().getURI());\n</code></pre>\n<p>With this code you can retrieve the link of already uploaded file to S3 bucket.</p>\n"},{"tags":[],"owner":{"account_id":13551498,"reputation":89,"user_id":9776239,"display_name":"Omkar Ayachit"},"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1527254852,"creation_date":1527253551,"answer_id":50529954,"question_id":10975475,"body_markdown":"Similarly if you want link through s3Client you can use below.\r\n\r\n    System.out.println(&quot;filelink: &quot; + s3Client.getUrl(&quot;your_bucket_name&quot;, &quot;your_file_key&quot;));\r\n\t\t\t\t\r\n","title":"Amazon S3 upload file and get URL","body":"<p>Similarly if you want link through s3Client you can use below.</p>\n\n<pre><code>System.out.println(\"filelink: \" + s3Client.getUrl(\"your_bucket_name\", \"your_file_key\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8694541,"reputation":191,"user_id":6506415,"display_name":"james"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1563911992,"creation_date":1563911992,"answer_id":57171367,"question_id":10975475,"body_markdown":"@hussachai and @Jeffrey Kemp answers are pretty good. But they have something in common is the url returned is of virtual-host-style, not in path style. For more info regarding to the s3 url style, can refer to [AWS S3 URL Styles][1]. In case of some people want to have path style s3 url generated. Here&#39;s the step. Basically everything will be the same as @hussachai and @Jeffrey Kemp answers, only with one line setting change as below:\r\n\r\n    AmazonS3Client s3Client = (AmazonS3Client) AmazonS3ClientBuilder.standard()\r\n                        .withRegion(&quot;us-west-2&quot;)\r\n                        .withCredentials(DefaultAWSCredentialsProviderChain.getInstance())\r\n                        .withPathStyleAccessEnabled(true)\r\n                        .build();\r\n\r\n    // Upload a file as a new object with ContentType and title specified.\r\n    PutObjectRequest request = new PutObjectRequest(bucketName, stringObjKeyName, fileToUpload);\r\n    s3Client.putObject(request);\r\n    URL s3Url = s3Client.getUrl(bucketName, stringObjKeyName);\r\n    logger.info(&quot;S3 url is &quot; + s3Url.toExternalForm());\r\n\r\n\r\nThis will generate url like:\r\n    https://s3.us-west-2.amazonaws.com/mybucket/myfilename\r\n   \r\n  [1]: http://www.wryway.com/blog/aws-s3-url-styles/","title":"Amazon S3 upload file and get URL","body":"<p>@hussachai and @Jeffrey Kemp answers are pretty good. But they have something in common is the url returned is of virtual-host-style, not in path style. For more info regarding to the s3 url style, can refer to <a href=\"http://www.wryway.com/blog/aws-s3-url-styles/\" rel=\"noreferrer\">AWS S3 URL Styles</a>. In case of some people want to have path style s3 url generated. Here's the step. Basically everything will be the same as @hussachai and @Jeffrey Kemp answers, only with one line setting change as below:</p>\n\n<pre><code>AmazonS3Client s3Client = (AmazonS3Client) AmazonS3ClientBuilder.standard()\n                    .withRegion(\"us-west-2\")\n                    .withCredentials(DefaultAWSCredentialsProviderChain.getInstance())\n                    .withPathStyleAccessEnabled(true)\n                    .build();\n\n// Upload a file as a new object with ContentType and title specified.\nPutObjectRequest request = new PutObjectRequest(bucketName, stringObjKeyName, fileToUpload);\ns3Client.putObject(request);\nURL s3Url = s3Client.getUrl(bucketName, stringObjKeyName);\nlogger.info(\"S3 url is \" + s3Url.toExternalForm());\n</code></pre>\n\n<p>This will generate url like:\n    <a href=\"https://s3.us-west-2.amazonaws.com/mybucket/myfilename\" rel=\"noreferrer\">https://s3.us-west-2.amazonaws.com/mybucket/myfilename</a></p>\n"},{"tags":[],"owner":{"account_id":3606254,"reputation":7,"user_id":3422296,"display_name":"Ankitech"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1599980767,"creation_date":1599980767,"answer_id":63868109,"question_id":10975475,"body_markdown":"Below method uploads file in a particular folder in a bucket and return the generated url of the file uploaded.\r\n\r\n``` java\r\nprivate String uploadFileToS3Bucket(final String bucketName, final File file) {\r\n    final String uniqueFileName = uploadFolder + &quot;/&quot; + file.getName();\r\n    LOGGER.info(&quot;Uploading file with name= &quot; + uniqueFileName);\r\n    final PutObjectRequest putObjectRequest = new PutObjectRequest(bucketName, uniqueFileName, file);\r\n    amazonS3.putObject(putObjectRequest);\r\n    return ((AmazonS3Client) amazonS3).getResourceUrl(bucketName, uniqueFileName);\r\n}\r\n```","title":"Amazon S3 upload file and get URL","body":"<p>Below method uploads file in a particular folder in a bucket and return the generated url of the file uploaded.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private String uploadFileToS3Bucket(final String bucketName, final File file) {\n    final String uniqueFileName = uploadFolder + &quot;/&quot; + file.getName();\n    LOGGER.info(&quot;Uploading file with name= &quot; + uniqueFileName);\n    final PutObjectRequest putObjectRequest = new PutObjectRequest(bucketName, uniqueFileName, file);\n    amazonS3.putObject(putObjectRequest);\n    return ((AmazonS3Client) amazonS3).getResourceUrl(bucketName, uniqueFileName);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2251275,"reputation":1325,"user_id":1983465,"accept_rate":83,"display_name":"Bala"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1600623166,"creation_date":1600623166,"answer_id":63981823,"question_id":10975475,"body_markdown":"For AWS SDK 2+\r\n\r\n    String key = &quot;filePath&quot;;\r\n    String bucketName = &quot;bucketName&quot;;\r\n    PutObjectResponse response = s3Client\r\n                .putObject(PutObjectRequest.builder().bucket(bucketName ).key(key).build(), RequestBody.fromFile(file));\r\n     GetUrlRequest request = GetUrlRequest.builder().bucket(bucketName ).key(key).build();\r\n     String url = s3Client.utilities().getUrl(request).toExternalForm();","title":"Amazon S3 upload file and get URL","body":"<p>For AWS SDK 2+</p>\n<pre><code>String key = &quot;filePath&quot;;\nString bucketName = &quot;bucketName&quot;;\nPutObjectResponse response = s3Client\n            .putObject(PutObjectRequest.builder().bucket(bucketName ).key(key).build(), RequestBody.fromFile(file));\n GetUrlRequest request = GetUrlRequest.builder().bucket(bucketName ).key(key).build();\n String url = s3Client.utilities().getUrl(request).toExternalForm();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6892878,"reputation":53,"user_id":5295723,"display_name":"Jatin Verma"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640750304,"creation_date":1640750304,"answer_id":70514980,"question_id":10975475,"body_markdown":"If you&#39;re using AWS-SDK, the `data` object returned contains the Object URL in `data.Location`\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    const AWS = require(&#39;aws-sdk&#39;)\r\n    const s3 = new AWS.S3(config)\r\n    \r\n    s3.upload(params).promise()\r\n        .then((data)=&gt;{\r\n            console.log(data.Location)\r\n        })\r\n        .catch(err=&gt;console.log(err))\r\n\r\n&lt;!-- end snippet --&gt;\r\n","title":"Amazon S3 upload file and get URL","body":"<p>If you're using AWS-SDK, the <code>data</code> object returned contains the Object URL in <code>data.Location</code></p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>const AWS = require('aws-sdk')\nconst s3 = new AWS.S3(config)\n\ns3.upload(params).promise()\n    .then((data)=&gt;{\n        console.log(data.Location)\n    })\n    .catch(err=&gt;console.log(err))</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}],"owner":{"account_id":483587,"reputation":10614,"user_id":898749,"accept_rate":70,"display_name":"Sangram Anand"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":187620,"favorite_count":0,"down_vote_count":0,"up_vote_count":131,"accepted_answer_id":12769383,"answer_count":10,"score":131,"last_activity_date":1681083668,"creation_date":1339396987,"question_id":10975475,"body_markdown":"Is it possible to upload a txt/pdf/png file to Amazon [S3][1] in a single action, and get the uploaded file URL as the response?\r\n\r\nIf so, is AWS Java SDK the right library that I need to add in my java struts2 web application?\r\n\r\nPlease suggest me a solution for this.\r\n\r\n  [1]: https://aws.amazon.com/s3/","title":"Amazon S3 upload file and get URL","body":"<p>Is it possible to upload a txt/pdf/png file to Amazon <a href=\"https://aws.amazon.com/s3/\" rel=\"noreferrer\">S3</a> in a single action, and get the uploaded file URL as the response?</p>\n<p>If so, is AWS Java SDK the right library that I need to add in my java struts2 web application?</p>\n<p>Please suggest me a solution for this.</p>\n"},{"tags":["java","parallel-processing","sieve"],"owner":{"account_id":25333394,"reputation":23,"user_id":20415613,"display_name":"feter"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1681082181,"creation_date":1681081441,"question_id":75973310,"body_markdown":"I am trying to parelleize Sieve Of Eratosthenes, the idea to do this is this: First find the primes to square root of N. these primes will be evenly distributed to the number of threads. These threas will now for each prime they have cross multiples and mark in a byteArray if the number is prime or not. in the end I will sequentially go through this byte array and collect all the values that are prime. \r\n\r\nThe problem I am facing is, that the number of primes that are found are not correct, and that there must be a synch problem somewhere I cannot see since the numOfPrimes changes everytime\r\n\r\nI will paste the code as much as I can.\r\n\r\n    public class Para_SieveOfEratosthenes {\r\n\r\n    static int number_to_find_primes = 2000000;\r\n    static int square_of_num = (int) Math.sqrt(number_to_find_primes);\r\n    static int square_of_square = (int) Math.sqrt(square_of_num);\r\n\r\n\r\n    static int cells = (number_to_find_primes / 16) + 1;\r\n    static public byte[] byteArray2 = new byte[cells];\r\n    static int num_of_threads = 3;\r\n    static int numOfPrimes = 2;\r\n\r\nIn the main I am using first another method in another class to find the primes. I thought maybe this might be the problem, because maybe the crossing of in the byte array done in this method does not go over to byteArray2?\r\n\r\n    public static void main(String[] args) {\r\n        SieveOfEratosthenes seqSiev = new SieveOfEratosthenes(square_of_square);\r\n        int[] primes = seqSiev.getPrimes();\r\n        //Get the num of primes found in the seq algo\r\n        numOfPrimes += primes.length;\r\n\r\nThis part of the code seems all good since it divides the primes evenly and creates the threads as they should\r\n\r\n\r\n     Thread[] threads = new Thread[num_of_threads];\r\n        int primes_per_thread = primes.length / num_of_threads;\r\n        int extra_primes = primes.length % num_of_threads;\r\n        int start_index = 0;\r\n        int end_index = 0;\r\n\r\n      \r\n        int value_length = number_to_find_primes / num_of_threads;\r\n      \r\n\r\n        for (int i = 0; i &lt; num_of_threads; i++, extra_primes--) {\r\n            start_index = end_index;\r\n            end_index = start_index + primes_per_thread + (extra_primes &gt; 0 ? 1 : 0);\r\n            int[] thread_primes = Arrays.copyOfRange(primes, start_index, end_index);\r\n            \r\n           \r\n            threads[i] = new Thread(new SieveWorker(i,thread_primes));\r\n\r\n         }\r\n\r\nI now start the threads and wait for the join, and then collect the primes\r\n\r\n     for (int i = 0; i &lt; num_of_threads; i++) {\r\n            threads[i].start();\r\n        }\r\n\r\n        for (int i = 0; i &lt; num_of_threads; i++) {\r\n            try { threads[i].join(); } catch (InterruptedException e) {}\r\n        }\r\n\r\n        int[] arr=collectPrimes();\r\n        System.out.println(arr.length);\r\n\r\n\r\nThis is the collectPrime method, it is taken from the SieveOfEratosthenes, which is promissed to be correct since its the precode\r\n\r\n\r\n     private static int[] collectPrimes() {\r\n        \r\n\r\n        int start = (square_of_num % 2 == 0) ? square_of_num + 1 : square_of_num + 2;\r\n        \r\n        for (int i = start; i &lt;= number_to_find_primes; i += 2){\r\n           \r\n          if (isPrime(i))\r\n            numOfPrimes++;\r\n        }\r\n        System.out.println(numOfPrimes);\r\n        int[] primes = new int[numOfPrimes];\r\n    \r\n        primes[0] = 2;\r\n    \r\n        int j = 1;\r\n    \r\n        for (int i = 3; i &lt;= number_to_find_primes; i += 2)\r\n          if (isPrime(i))\r\n           {\r\n            primes[j++] = i;\r\n           }\r\n    \r\n        return primes;\r\n      }\r\n\r\n\r\nThis is the thread Class:\r\n\r\n    static class SieveWorker implements Runnable{\r\n\r\n        public int id;\r\n        public int[] work;\r\n        public int num_primes;\r\n        public int value_start;\r\n        public int value_end = number_to_find_primes;\r\n        \r\n    \r\n        public SieveWorker(int id,int[] work  ){\r\n            this.id = id;\r\n            this.work = work;\r\n           }\r\n       @Override\r\n        public void run() {\r\n            for (int i = 0; i &lt; work.length; i++) {\r\n                this.value_start = work[i];\r\n                sieve(work[i]);\r\n            }}\r\n\r\n\r\nThese are the methods that does the sieve\r\n\r\n\r\n    static  void sieve(int prime) {\r\n        //System.out.println(&quot;We are traversing: &quot;+prime);\r\n        \r\n        while (prime != -1) {\r\n            traverse(prime);\r\n            prime = nextPrime(prime);\r\n            numOfPrimes++;\r\n          }}\r\n\r\n    private static void traverse(int prime) {\r\n        for (int i = prime*prime; i &lt;= number_to_find_primes; i += prime * 2)\r\n          mark(i);\r\n      }\r\n\r\n    private static void mark(int num) {\r\n        int bitIndex = (num % 16) / 2;\r\n        int byteIndex = num / 16;\r\n        byteArray2[byteIndex] |= (1 &lt;&lt; bitIndex);\r\n      }\r\n\r\n     private static int nextPrime(int prev) {\r\n        for (int i = prev + 2; i &lt;= square_of_num; i += 2)\r\n          if (isPrime(i))\r\n            return i;\r\n    \r\n        return -1;\r\n      }\r\n\r\nIf anyone has any idea on where the mistake is, I would really appreciate a comment, not sure how to make this post smaller without loosing the value of the code. Thank you","title":"Parallel SieveOfEratosthenes","body":"<p>I am trying to parelleize Sieve Of Eratosthenes, the idea to do this is this: First find the primes to square root of N. these primes will be evenly distributed to the number of threads. These threas will now for each prime they have cross multiples and mark in a byteArray if the number is prime or not. in the end I will sequentially go through this byte array and collect all the values that are prime.</p>\n<p>The problem I am facing is, that the number of primes that are found are not correct, and that there must be a synch problem somewhere I cannot see since the numOfPrimes changes everytime</p>\n<p>I will paste the code as much as I can.</p>\n<pre><code>public class Para_SieveOfEratosthenes {\n\nstatic int number_to_find_primes = 2000000;\nstatic int square_of_num = (int) Math.sqrt(number_to_find_primes);\nstatic int square_of_square = (int) Math.sqrt(square_of_num);\n\n\nstatic int cells = (number_to_find_primes / 16) + 1;\nstatic public byte[] byteArray2 = new byte[cells];\nstatic int num_of_threads = 3;\nstatic int numOfPrimes = 2;\n</code></pre>\n<p>In the main I am using first another method in another class to find the primes. I thought maybe this might be the problem, because maybe the crossing of in the byte array done in this method does not go over to byteArray2?</p>\n<pre><code>public static void main(String[] args) {\n    SieveOfEratosthenes seqSiev = new SieveOfEratosthenes(square_of_square);\n    int[] primes = seqSiev.getPrimes();\n    //Get the num of primes found in the seq algo\n    numOfPrimes += primes.length;\n</code></pre>\n<p>This part of the code seems all good since it divides the primes evenly and creates the threads as they should</p>\n<pre><code> Thread[] threads = new Thread[num_of_threads];\n    int primes_per_thread = primes.length / num_of_threads;\n    int extra_primes = primes.length % num_of_threads;\n    int start_index = 0;\n    int end_index = 0;\n\n  \n    int value_length = number_to_find_primes / num_of_threads;\n  \n\n    for (int i = 0; i &lt; num_of_threads; i++, extra_primes--) {\n        start_index = end_index;\n        end_index = start_index + primes_per_thread + (extra_primes &gt; 0 ? 1 : 0);\n        int[] thread_primes = Arrays.copyOfRange(primes, start_index, end_index);\n        \n       \n        threads[i] = new Thread(new SieveWorker(i,thread_primes));\n\n     }\n</code></pre>\n<p>I now start the threads and wait for the join, and then collect the primes</p>\n<pre><code> for (int i = 0; i &lt; num_of_threads; i++) {\n        threads[i].start();\n    }\n\n    for (int i = 0; i &lt; num_of_threads; i++) {\n        try { threads[i].join(); } catch (InterruptedException e) {}\n    }\n\n    int[] arr=collectPrimes();\n    System.out.println(arr.length);\n</code></pre>\n<p>This is the collectPrime method, it is taken from the SieveOfEratosthenes, which is promissed to be correct since its the precode</p>\n<pre><code> private static int[] collectPrimes() {\n    \n\n    int start = (square_of_num % 2 == 0) ? square_of_num + 1 : square_of_num + 2;\n    \n    for (int i = start; i &lt;= number_to_find_primes; i += 2){\n       \n      if (isPrime(i))\n        numOfPrimes++;\n    }\n    System.out.println(numOfPrimes);\n    int[] primes = new int[numOfPrimes];\n\n    primes[0] = 2;\n\n    int j = 1;\n\n    for (int i = 3; i &lt;= number_to_find_primes; i += 2)\n      if (isPrime(i))\n       {\n        primes[j++] = i;\n       }\n\n    return primes;\n  }\n</code></pre>\n<p>This is the thread Class:</p>\n<pre><code>static class SieveWorker implements Runnable{\n\n    public int id;\n    public int[] work;\n    public int num_primes;\n    public int value_start;\n    public int value_end = number_to_find_primes;\n    \n\n    public SieveWorker(int id,int[] work  ){\n        this.id = id;\n        this.work = work;\n       }\n   @Override\n    public void run() {\n        for (int i = 0; i &lt; work.length; i++) {\n            this.value_start = work[i];\n            sieve(work[i]);\n        }}\n</code></pre>\n<p>These are the methods that does the sieve</p>\n<pre><code>static  void sieve(int prime) {\n    //System.out.println(&quot;We are traversing: &quot;+prime);\n    \n    while (prime != -1) {\n        traverse(prime);\n        prime = nextPrime(prime);\n        numOfPrimes++;\n      }}\n\nprivate static void traverse(int prime) {\n    for (int i = prime*prime; i &lt;= number_to_find_primes; i += prime * 2)\n      mark(i);\n  }\n\nprivate static void mark(int num) {\n    int bitIndex = (num % 16) / 2;\n    int byteIndex = num / 16;\n    byteArray2[byteIndex] |= (1 &lt;&lt; bitIndex);\n  }\n\n private static int nextPrime(int prev) {\n    for (int i = prev + 2; i &lt;= square_of_num; i += 2)\n      if (isPrime(i))\n        return i;\n\n    return -1;\n  }\n</code></pre>\n<p>If anyone has any idea on where the mistake is, I would really appreciate a comment, not sure how to make this post smaller without loosing the value of the code. Thank you</p>\n"},{"tags":["java","utf-8","encode","non-unicode"],"comments":[{"owner":{"account_id":2188639,"reputation":2082,"user_id":1936390,"accept_rate":20,"display_name":"shreyansh jogi"},"score":0,"creation_date":1372076696,"post_id":17275383,"comment_id":25043268,"body_markdown":"what you have tried so far?","body":"what you have tried so far?"},{"owner":{"account_id":22194,"reputation":18092,"user_id":54506,"accept_rate":78,"display_name":"Jayan"},"score":0,"creation_date":1372076699,"post_id":17275383,"comment_id":25043271,"body_markdown":"Fix your library. That will help a lot","body":"Fix your library. That will help a lot"}],"answers":[{"tags":[],"owner":{"account_id":2865008,"reputation":340,"user_id":2459497,"accept_rate":33,"display_name":"Steven M. Wurster"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1372077892,"creation_date":1372077892,"answer_id":17275810,"question_id":17275383,"body_markdown":"Take a look at String.codePointAt(index).  That can give you the Unicode code point for a given character, and from there you could remove those outside your range.\r\n\r\nHow you handle the fact that a character has been removed is on your end, but keep in mind that the string you&#39;ll be sending to the library isn&#39;t necessarily the same as that provided by the client.  This may or may not cause problems.\r\n\r\nI&#39;m not sure what you mean by ANSI here.  Do you mean the Windows 1252 character encoding that people typically call ANSI?  That&#39;s not ASCII and it&#39;s also not IS0-8859-1, so make sure you get your code pages correct.","title":"Remove Non-Ansi Chars from a UTF String and Keep Others","body":"<p>Take a look at String.codePointAt(index).  That can give you the Unicode code point for a given character, and from there you could remove those outside your range.</p>\n\n<p>How you handle the fact that a character has been removed is on your end, but keep in mind that the string you'll be sending to the library isn't necessarily the same as that provided by the client.  This may or may not cause problems.</p>\n\n<p>I'm not sure what you mean by ANSI here.  Do you mean the Windows 1252 character encoding that people typically call ANSI?  That's not ASCII and it's also not IS0-8859-1, so make sure you get your code pages correct.</p>\n"},{"tags":[],"owner":{"account_id":2888638,"reputation":10719,"user_id":2477916,"accept_rate":100,"display_name":"Java Devil"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1372077961,"creation_date":1372077961,"answer_id":17275833,"question_id":17275383,"body_markdown":"Try this, I pulled this from [here][1] so haven&#39;t tested it\r\n\r\n    // Create a encoder and decoder for the character encoding\r\n    Charset charset = Charset.forName(&quot;US-ASCII&quot;);\r\n    CharsetDecoder decoder = charset.newDecoder();\r\n    CharsetEncoder encoder = charset.newEncoder();\r\n\r\n    // This line is the key to removing &quot;unmappable&quot; characters.\r\n    encoder.onUnmappableCharacter(CodingErrorAction.IGNORE);\r\n    String result = inString;\r\n    \r\n    try {\r\n    \t// Convert a string to bytes in a ByteBuffer\r\n    \tByteBuffer bbuf = encoder.encode(CharBuffer.wrap(inString));\r\n    \r\n    \t// Convert bytes in a ByteBuffer to a character ByteBuffer and then to a string.\r\n    \tCharBuffer cbuf = decoder.decode(bbuf);\r\n    \tresult = cbuf.toString();\r\n    } catch (CharacterCodingException cce) {\r\n    \tString errorMessage = &quot;Exception during character encoding/decoding: &quot; + cce.getMessage();\r\n    \tcce.printStackTrace()\r\n    }\r\n\r\n\r\n  [1]: http://www.velocityreviews.com/forums/t140837-convert-utf-8-to-ascii.html","title":"Remove Non-Ansi Chars from a UTF String and Keep Others","body":"<p>Try this, I pulled this from <a href=\"http://www.velocityreviews.com/forums/t140837-convert-utf-8-to-ascii.html\" rel=\"nofollow\">here</a> so haven't tested it</p>\n\n<pre><code>// Create a encoder and decoder for the character encoding\nCharset charset = Charset.forName(\"US-ASCII\");\nCharsetDecoder decoder = charset.newDecoder();\nCharsetEncoder encoder = charset.newEncoder();\n\n// This line is the key to removing \"unmappable\" characters.\nencoder.onUnmappableCharacter(CodingErrorAction.IGNORE);\nString result = inString;\n\ntry {\n    // Convert a string to bytes in a ByteBuffer\n    ByteBuffer bbuf = encoder.encode(CharBuffer.wrap(inString));\n\n    // Convert bytes in a ByteBuffer to a character ByteBuffer and then to a string.\n    CharBuffer cbuf = decoder.decode(bbuf);\n    result = cbuf.toString();\n} catch (CharacterCodingException cce) {\n    String errorMessage = \"Exception during character encoding/decoding: \" + cce.getMessage();\n    cce.printStackTrace()\n}\n</code></pre>\n"}],"owner":{"account_id":2764274,"reputation":129,"user_id":2380488,"accept_rate":83,"display_name":"Meilun Sheng"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1099,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1681079393,"creation_date":1372076589,"question_id":17275383,"body_markdown":"We have a java lib accpeting a UTF8 string as the input. But if there is any char which is a non-ansi char in the input, the lib may crash. So, we want to remove all non-ansi char from the string. But how to do that in java?\r\n\r\nThanks,","title":"Remove Non-Ansi Chars from a UTF String and Keep Others","body":"<p>We have a java lib accpeting a UTF8 string as the input. But if there is any char which is a non-ansi char in the input, the lib may crash. So, we want to remove all non-ansi char from the string. But how to do that in java?</p>\n\n<p>Thanks,</p>\n"},{"tags":["java","junit","mockito","junit5"],"comments":[{"owner":{"account_id":21330249,"reputation":297,"user_id":15702124,"display_name":"LenglBoy"},"score":0,"creation_date":1681077775,"post_id":75973084,"comment_id":133996765,"body_markdown":"Hint: A test should always use independent testdata. You should just mock your business-logic and not data layers and basic functions like lists/collections/... The only extern dependency you have here is the `dynamoDb` instance. That should be mocked. All other calles are basic functions you dont mock - just assert by comparing result data at the end. Just keep the scope small and clear.","body":"Hint: A test should always use independent testdata. You should just mock your business-logic and not data layers and basic functions like lists/collections/... The only extern dependency you have here is the <code>dynamoDb</code> instance. That should be mocked. All other calles are basic functions you dont mock - just assert by comparing result data at the end. Just keep the scope small and clear."},{"owner":{"account_id":28107709,"reputation":111,"user_id":21476047,"display_name":"user21476047"},"score":0,"creation_date":1681077889,"post_id":75973084,"comment_id":133996781,"body_markdown":"@LenglBoy Yes I agree but Dynamodb testing makes it difficult to mock without mocking external dependency.","body":"@LenglBoy Yes I agree but Dynamodb testing makes it difficult to mock without mocking external dependency."},{"owner":{"account_id":21330249,"reputation":297,"user_id":15702124,"display_name":"LenglBoy"},"score":0,"creation_date":1681077937,"post_id":75973084,"comment_id":133996787,"body_markdown":"Depending on the `Table` object and complexity you can use a stub there as well - never the elss can you show the real full error trace as well?","body":"Depending on the <code>Table</code> object and complexity you can use a stub there as well - never the elss can you show the real full error trace as well?"},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1681081964,"post_id":75973084,"comment_id":133997249,"body_markdown":"How does the `dynamoDB` value get into the class that you&#39;re testing?  Your test suggests that you need this to be a mock, but you don&#39;t seem to be injecting a mock for it anywhere.","body":"How does the <code>dynamoDB</code> value get into the class that you&#39;re testing?  Your test suggests that you need this to be a mock, but you don&#39;t seem to be injecting a mock for it anywhere."}],"answers":[{"tags":[],"owner":{"account_id":21330249,"reputation":297,"user_id":15702124,"display_name":"LenglBoy"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1681078444,"creation_date":1681078444,"answer_id":75973145,"question_id":75973084,"body_markdown":"The failure is the correct mockito grammar. So it is all about how you want you statements to be shown up and what your codestyle is about.\r\n`doReturn` and `thenReturn` are more or less the same BUT used in different ways of accessing mocking statements.\r\n\r\n    // Gramar styled: code can be read like a book. Might be longer\r\n    doReturn(&quot;mockedResult&quot;).when(myMock).theMocksCalledMethod();\r\n    \r\n    // Technical style: short but you might need to think about it shortly. Not intuitive\r\n    when(myMock.theMocksCalledMethod()).thenReturn(&quot;mockedResult&quot;);\r\n\r\n\r\nSo the conclusion is: you mixed up the styles and they are not 100% behaving the same way so you cant mix it up. Correct your syntak in one of those ways and it will work - even beside you mocked way to much :) \r\n","title":"I am using doReturn in Mockito but I keep getting UnfinishedStubbingException error because I don&#39;t have thenReturn","body":"<p>The failure is the correct mockito grammar. So it is all about how you want you statements to be shown up and what your codestyle is about.\n<code>doReturn</code> and <code>thenReturn</code> are more or less the same BUT used in different ways of accessing mocking statements.</p>\n<pre><code>// Gramar styled: code can be read like a book. Might be longer\ndoReturn(&quot;mockedResult&quot;).when(myMock).theMocksCalledMethod();\n\n// Technical style: short but you might need to think about it shortly. Not intuitive\nwhen(myMock.theMocksCalledMethod()).thenReturn(&quot;mockedResult&quot;);\n</code></pre>\n<p>So the conclusion is: you mixed up the styles and they are not 100% behaving the same way so you cant mix it up. Correct your syntak in one of those ways and it will work - even beside you mocked way to much :)</p>\n"}],"owner":{"account_id":28107709,"reputation":111,"user_id":21476047,"display_name":"user21476047"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":399,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681078444,"creation_date":1681077428,"question_id":75973084,"body_markdown":"When using `doReturn` in Mockito it doesn&#39;t have a `thenReturn` so I am confused why it keeps throwing an `UnfinishedStubbingException Unfinished stubbing detected here:\r\nE.g. thenReturn() may be missing.`. It is throwing that error for all my `doReturn`. \r\n\r\nMy code:\r\n\r\n    public List&lt;Users&gt; getUsers(String userId) {\r\n        List&lt;Users&gt; usersList = new ArrayList&lt;&gt;();\r\n        Table table = dynamoDB.getTable(&quot;users&quot;);\r\n        ItemCollection&lt;QueryOutcome&gt; items = table.getIndex(&quot;userIndex&quot;).query(QuerySpec);\r\n        Iterator&lt;Item&gt; iterator = items.iterator();\r\n        while (iterator.hasNext()) {\r\n            list.add(Util.jsonToObject(iterator.next().toJSONPretty(), Users.class));\r\n        }\r\n        return usersList;\r\n    }\r\n\r\nTest class:\r\n\r\n        List&lt;Users&gt; mockList = mock(List.class);\r\n    \tTable mockTable = mock(Table.class);\r\n    \tUsers details = new Users(&quot;&quot;, &quot;&quot;, &quot;&quot;);\r\n    \tItemCollection&lt;QueryOutcome&gt; mockCollection = mock(ItemCollection.class);\r\n    \tIteratorSupport&lt;Item, QueryOutcome&gt; mockIterator = mock(IteratorSupport.class);\r\n    \tdoReturn(mockTable).when(dynamoDB.getTable(&quot;users&quot;));\r\n    \tdoReturn(mockCollection).when(mockTable.getIndex(&quot;&quot;)).query(mock(QuerySpec.class));\r\n    \tdoReturn(mockIterator).when(mockCollection).iterator();\r\n    \tdoReturn(true).doReturn(false).when(mockIterator).hasNext();\r\n    \tdoReturn(true).when(mockList).add(details);\r\n    \tassertNotNull(dynamoService.getUser(&quot;&quot;).get(0));","title":"I am using doReturn in Mockito but I keep getting UnfinishedStubbingException error because I don&#39;t have thenReturn","body":"<p>When using <code>doReturn</code> in Mockito it doesn't have a <code>thenReturn</code> so I am confused why it keeps throwing an <code>UnfinishedStubbingException Unfinished stubbing detected here: E.g. thenReturn() may be missing.</code>. It is throwing that error for all my <code>doReturn</code>.</p>\n<p>My code:</p>\n<pre><code>public List&lt;Users&gt; getUsers(String userId) {\n    List&lt;Users&gt; usersList = new ArrayList&lt;&gt;();\n    Table table = dynamoDB.getTable(&quot;users&quot;);\n    ItemCollection&lt;QueryOutcome&gt; items = table.getIndex(&quot;userIndex&quot;).query(QuerySpec);\n    Iterator&lt;Item&gt; iterator = items.iterator();\n    while (iterator.hasNext()) {\n        list.add(Util.jsonToObject(iterator.next().toJSONPretty(), Users.class));\n    }\n    return usersList;\n}\n</code></pre>\n<p>Test class:</p>\n<pre><code>    List&lt;Users&gt; mockList = mock(List.class);\n    Table mockTable = mock(Table.class);\n    Users details = new Users(&quot;&quot;, &quot;&quot;, &quot;&quot;);\n    ItemCollection&lt;QueryOutcome&gt; mockCollection = mock(ItemCollection.class);\n    IteratorSupport&lt;Item, QueryOutcome&gt; mockIterator = mock(IteratorSupport.class);\n    doReturn(mockTable).when(dynamoDB.getTable(&quot;users&quot;));\n    doReturn(mockCollection).when(mockTable.getIndex(&quot;&quot;)).query(mock(QuerySpec.class));\n    doReturn(mockIterator).when(mockCollection).iterator();\n    doReturn(true).doReturn(false).when(mockIterator).hasNext();\n    doReturn(true).when(mockList).add(details);\n    assertNotNull(dynamoService.getUser(&quot;&quot;).get(0));\n</code></pre>\n"},{"tags":["java","android","android-fragments"],"comments":[{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":0,"creation_date":1681079044,"post_id":75972010,"comment_id":133996922,"body_markdown":"You can just [use FragmentManager and transition to your new fragment](https://developer.android.com/guide/fragments/transactions), is there any issue with that?","body":"You can just <a href=\"https://developer.android.com/guide/fragments/transactions\" rel=\"nofollow noreferrer\">use FragmentManager and transition to your new fragment</a>, is there any issue with that?"},{"owner":{"account_id":18960191,"reputation":3,"user_id":13835894,"display_name":"wabhou"},"score":0,"creation_date":1681207060,"post_id":75972010,"comment_id":134015427,"body_markdown":"thanks for your response, i try to use : getSupportFragmentManager().beginTransaction()\n                .add(R.id.container, BlankFragment.class, null);\nbut nothing is happening, i just want to show this fragment","body":"thanks for your response, i try to use : getSupportFragmentManager().beginTransaction()                 .add(R.id.container, BlankFragment.class, null); but nothing is happening, i just want to show this fragment"},{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":0,"creation_date":1681217723,"post_id":75972010,"comment_id":134017921,"body_markdown":"You didn&#39;t commit the transaction. Please read the docs again carefully.","body":"You didn&#39;t commit the transaction. Please read the docs again carefully."},{"owner":{"account_id":18960191,"reputation":3,"user_id":13835894,"display_name":"wabhou"},"score":0,"creation_date":1681641111,"post_id":75972010,"comment_id":134086265,"body_markdown":"thanks a lot, sorry that i bother you for that.","body":"thanks a lot, sorry that i bother you for that."}],"owner":{"account_id":18960191,"reputation":3,"user_id":13835894,"display_name":"wabhou"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681077813,"creation_date":1681062438,"question_id":75972010,"body_markdown":"I want to make a simple thing, but I didn&#39;t succeed to do it. I have a viewpager with five fragments and I just want that when I click on a button which is on a fragment, another fragment appears and I want to be able to handle the transition between these two fragments.\r\n\r\nSo I have my fragments and I try to put them in another viewpager so I could interact with the other fragment, but I think there is more simple and I didn&#39;t succeed to do it. I discovered dialogs, I think that what I want to do is close to that but that not exactly that because I want that my fragment takes all the screen. To be clear, I want to recreate the fragment that appears when you want to add friends on the snapchat app.\r\n\r\nIf you could help me, I would be very grateful. ","title":"fragment to another fragment like a dialog","body":"<p>I want to make a simple thing, but I didn't succeed to do it. I have a viewpager with five fragments and I just want that when I click on a button which is on a fragment, another fragment appears and I want to be able to handle the transition between these two fragments.</p>\n<p>So I have my fragments and I try to put them in another viewpager so I could interact with the other fragment, but I think there is more simple and I didn't succeed to do it. I discovered dialogs, I think that what I want to do is close to that but that not exactly that because I want that my fragment takes all the screen. To be clear, I want to recreate the fragment that appears when you want to add friends on the snapchat app.</p>\n<p>If you could help me, I would be very grateful.</p>\n"},{"tags":["javascript","java","nashorn","scriptengine"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1681086391,"post_id":75973082,"comment_id":133997638,"body_markdown":"You can try reading [Oracle&#39;s official Nashorn migration guide](https://docs.oracle.com/en/graalvm/enterprise/20/docs/reference-manual/js/NashornMigrationGuide)","body":"You can try reading <a href=\"https://docs.oracle.com/en/graalvm/enterprise/20/docs/reference-manual/js/NashornMigrationGuide\" rel=\"nofollow noreferrer\">Oracle&#39;s official Nashorn migration guide</a>"}],"owner":{"account_id":18190184,"reputation":1,"user_id":19117634,"display_name":"Adam&#39;s Apple"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":152,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681077349,"creation_date":1681077349,"question_id":75973082,"body_markdown":"I need to execute JS code in Java (JDK 18). To do this, I want to use the ScriptEngine class with the engine &quot;Nashorn&quot; (or any other capable of executing Javascript) using the constructor new ScriptEngineManager().getEngineByName(&quot;nashorn&quot;).\r\n\r\nThe problem is that this code returns null, the same happens for the name &quot;js&quot;. Then I decided to go through the list of all possible engines with new ScriptEngineManager().getEngineFactories(), but it returns...an empty list. After a little digging, I also found out that Nashorn seems to have been removed from JDK15, so another question: what to use?","title":"getEngineFactories() returns an empty list","body":"<p>I need to execute JS code in Java (JDK 18). To do this, I want to use the ScriptEngine class with the engine &quot;Nashorn&quot; (or any other capable of executing Javascript) using the constructor new ScriptEngineManager().getEngineByName(&quot;nashorn&quot;).</p>\n<p>The problem is that this code returns null, the same happens for the name &quot;js&quot;. Then I decided to go through the list of all possible engines with new ScriptEngineManager().getEngineFactories(), but it returns...an empty list. After a little digging, I also found out that Nashorn seems to have been removed from JDK15, so another question: what to use?</p>\n"},{"tags":["java","android","sqlite"],"answers":[{"tags":[],"owner":{"account_id":2607825,"reputation":5369,"user_id":2258611,"display_name":"Alexander Hoffmann"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1680582907,"creation_date":1680582907,"answer_id":75925545,"question_id":75923864,"body_markdown":"`so if i delete any element, this will cause the id to not represent the row number of the database table`\r\n\r\nThis is fine. IDs shouldn&#39;t be linked to table rows.\r\n\r\nAre you familiar with [foreign keys][1]? That is how you are supposed to build a relationship between multiple tables.\r\n\r\n\r\n  [1]: https://www.sqlite.org/foreignkeys.html","title":"Using multiple SQLite Databases in my android app project","body":"<p><code>so if i delete any element, this will cause the id to not represent the row number of the database table</code></p>\n<p>This is fine. IDs shouldn't be linked to table rows.</p>\n<p>Are you familiar with <a href=\"https://www.sqlite.org/foreignkeys.html\" rel=\"nofollow noreferrer\">foreign keys</a>? That is how you are supposed to build a relationship between multiple tables.</p>\n"},{"tags":[],"owner":{"account_id":26346485,"reputation":15,"user_id":20004771,"display_name":"Displayed Name"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681076776,"creation_date":1681076776,"answer_id":75973036,"question_id":75923864,"body_markdown":"Ok, so i resorted to updating the database now. I have method_specific_id not as a foreign key, even though it is one, but it still works and a foreign key can also be set from more than 1 database.\r\n\r\n\r\nUpdate of the Code:\r\n\r\n\r\n    package com.example.alarm;\r\n\r\n    import android.content.ContentValues;\r\n    import android.content.Context;\r\n    import android.database.Cursor;\r\n    import android.database.sqlite.SQLiteDatabase;\r\n    import android.database.sqlite.SQLiteOpenHelper;\r\n    import android.util.Log;\r\n    import android.widget.Toast;\r\n    \r\n    import java.util.Objects;\r\n    \r\n    public class DBHelper extends SQLiteOpenHelper{\r\n        \r\n        Context context;\r\n    \r\n        public DBHelper(Context context, String db) {\r\n            \r\n            super(context, db, null, 1);\r\n            this.context = context;\r\n    \r\n    \r\n        }\r\n    \r\n        @Override\r\n        public void onCreate(SQLiteDatabase db) {\r\n    \r\n            db.execSQL(&quot;create Table Alarmdatabase (id INTEGER primary key autoincrement, label TEXT, method_queue_id INTEGER, privilege_rights INTEGER,&quot; +\r\n                    &quot; time_wake_up_hours INTEGER, time_wake_up_minutes INTEGER, days_schedule_id INTEGER, weeks_schedule_id INTEGER, check_awake INTEGER,&quot; +\r\n                    &quot; alarm_level_id INTEGER, foreign key (alarm_level_id) references Alarmlevel(id))&quot;);\r\n            //every int representing a bool is -1 for false                                             //represents how many methods are in the queue\r\n            //alarm_level_id points to the Alarmlevel Table which has the level specific labels, snooze settings, sounds, etc\r\n            //if alarm levels not used, just set everything as alarm level 1\r\n    \r\n            db.execSQL(&quot;create Table Methoddatabase (id INTEGER primary key autoincrement, queue_id INTEGER, method_type_id INTEGER, method_id INTEGER, difficulty_id INTEGER,&quot; +\r\n                    &quot; label TEXT, method_database_specific_id INTEGER, foreign KEY(method_type_id) references Methodtype(id), foreign key (method_id) references Method(id),&quot; +\r\n                    &quot; foreign key (difficulty_id) references Difficulty(id), foreign key(label) references QRBarcodedatabase(label),&quot; +\r\n                    &quot; foreign KEY(queue_id) references Alarmlevel(id))&quot;);\r\n    \r\n            db.execSQL(&quot;create Table Methodtype (id INTEGER primary key autoincrement, method_type TEXT)&quot;);\r\n            db.execSQL(&quot;create Table Method (id INTEGER primary key autoincrement, method TEXT)&quot;);\r\n            db.execSQL(&quot;create Table Difficulty (id INTEGER primary key autoincrement, difficulty TEXT)&quot;);\r\n    \r\n            db.execSQL(&quot;create Table Alarmlevel (id INTEGER primary key autoincrement, label TEXT, snooze_count INTEGER, snooze_time INTEGER, sound_path TEXT)&quot;); //multiple rows with the same level_id make up the different Alarmlevels, might add more attribs later\r\n    \r\n            db.execSQL(&quot;create Table QRBarcodedatabase (label TEXT primary key, decoded TEXT)&quot;);\r\n            db.execSQL(&quot;create Table Mathdatabase (id INTEGER primary key autoincrement, method TEXT, difficulty TEXT)&quot;);\r\n            db.execSQL(&quot;create Table Locationdatabase (id INTEGER primary key autoincrement, latitude_int INTEGER, zero_point_latitude INTEGER, longitude_int INTEGER,&quot; +\r\n                    &quot; zero_point_longitude INTEGER, radius_int INTEGER, zero_point_radius INTEGER, street TEXT, radius_mode TEXT)&quot;);\r\n            setupTablesForPreset(db);\r\n    \r\n        }\r\n    \r\n    \r\n        @Override\r\n        public void onUpgrade(SQLiteDatabase db, int verOld, int verNew) {\r\n            db.execSQL(&quot;drop Table if exists Alarmdatabase&quot;);\r\n    \r\n            db.execSQL(&quot;drop Table if exists Methoddatabase&quot;);\r\n            db.execSQL(&quot;drop Table if exists Methodtype&quot;);\r\n            db.execSQL(&quot;drop Table if exists Method&quot;);\r\n            db.execSQL(&quot;drop Table if exists Difficulty&quot;);\r\n    \r\n            db.execSQL(&quot;drop Table if exists Alarmlevel&quot;);\r\n    \r\n            db.execSQL(&quot;drop Table if exists QRBarcodedatabase&quot;);\r\n            db.execSQL(&quot;drop Table if exists Mathdatabase&quot;);\r\n            db.execSQL(&quot;drop Table if exists Locationdatabase&quot;);\r\n            onCreate(db);\r\n        }\r\n    \r\n    \r\n        private void setupTablesForPreset(SQLiteDatabase db) {\r\n    \r\n    \r\n            ContentValues cv = new ContentValues();\r\n    \r\n            long res;\r\n            for(String type : new String[]{&quot;tap_off&quot;,&quot;math&quot;,&quot;qr_barcode&quot;,&quot;location&quot;,&quot;sudoku&quot;,&quot;memory&quot;,&quot;passphrase&quot;}) {\r\n                cv.put(&quot;method_type&quot;, type);\r\n                res = db.insert(&quot;Methodtype&quot;, null, cv);\r\n                if(res == -1){\r\n                    Toast.makeText(context, &quot;Error setting up static Database \\&quot;Methodtype\\&quot;&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n    \r\n    \r\n            cv = new ContentValues();\r\n            for(String type : new String[]{&quot;null&quot;,&quot;add&quot;,&quot;sub&quot;,&quot;mult&quot;,&quot;div&quot;,&quot;fac&quot;,&quot;root&quot;,&quot;value_fx&quot;,&quot;extrema_fx&quot;,&quot;multiple_choice&quot;,&quot;reach_radius&quot;,&quot;leave_radius&quot;}) {\r\n                cv.put(&quot;method&quot;, type);\r\n                res = db.insert(&quot;Method&quot;, null, cv);\r\n                if(res == -1){\r\n                    Toast.makeText(context, &quot;Error setting up static Database \\&quot;Method\\&quot;&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n    \r\n    \r\n            cv = new ContentValues();\r\n            for(String type : new String[]{&quot;ex_easy&quot;,&quot;easy&quot;,&quot;middle&quot;,&quot;hard&quot;,&quot;ex_hard&quot;}) {\r\n                cv.put(&quot;difficulty&quot;, type);\r\n                res = db.insert(&quot;Difficulty&quot;, null, cv);\r\n                if(res == -1){\r\n                    Toast.makeText(context, &quot;Error setting up static Database \\&quot;Difficulty\\&quot;&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n    \r\n    \r\n    \r\n        }\r\n    \r\n        /**\r\n         * @param database: the string of the table in database.db\r\n         * @return the max id in the table, if db empty it returns 0\r\n         */\r\n        public int getMaxTableId(String database){\r\n            SQLiteDatabase db = this.getReadableDatabase();\r\n            Cursor c1 = db.rawQuery(&quot;SELECT max(id) FROM &quot; + database, null);\r\n            if(c1.getCount() &gt;0){\r\n                int id = 0;\r\n                c1.moveToFirst();\r\n                id = c1.getInt(0);\r\n                c1.close();\r\n    \r\n                return id;\r\n            }\r\n            return 0;\r\n        }\r\n    \r\n    \r\n        //TODO: I don&#39;t need to handle SQLInjection, atleast for now, because sharing of settings is not supported as of now, so this would only harm the person itself, or be a nice niche feature lol\r\n        //(this might change in the future, so i will keep this todo in until publishing, so if i add that feature at any point, i&#39;ll know, that i have to take care of that.)\r\n    \r\n    \r\n        public void deleteRow(String table, int row_id){\r\n            SQLiteDatabase db = this.getWritableDatabase();\r\n            long res = db.delete(table, &quot;id=?&quot;, new String[]{String.valueOf(row_id)});\r\n            if(res ==0){\r\n                Toast.makeText(context, &quot;Failed deleting item: &quot; + res, Toast.LENGTH_SHORT).show();\r\n            }else {\r\n                Toast.makeText(context, &quot;Success deleting item: &quot; +res, Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n    \r\n    \r\n        public void addAlarm(String label, int methodQueueId, int soundPathId, boolean privilegeRights, boolean snoozable, int wakeUpTimeHours, int wakeUpTimeMinutes, int daysScheduleId, int weeksScheduleId, boolean checkAwake, int alarmLevelTableId){\r\n    \r\n            SQLiteDatabase db = this.getWritableDatabase();\r\n            ContentValues cv = new ContentValues();\r\n    \r\n            cv.put(&quot;label&quot;, label);\r\n            cv.put(&quot;method_queue_id&quot;,methodQueueId);\r\n            cv.put(&quot;sound_path_id&quot;,soundPathId);\r\n            if(privilegeRights){\r\n            cv.put(&quot;privilege_rights&quot;,1);}\r\n            else{\r\n                cv.put(&quot;privilege_rights&quot;, 0);}\r\n            if(snoozable){\r\n            cv.put(&quot;snoozable&quot;,1);}\r\n            else{\r\n                cv.put(&quot;snoozable&quot;,0);}\r\n            cv.put(&quot;time_wake_up_hours&quot;, wakeUpTimeHours);\r\n            cv.put(&quot;time_wake_up_minutes&quot;, wakeUpTimeMinutes);\r\n            cv.put(&quot;days_schedule_id&quot;,daysScheduleId);\r\n            cv.put(&quot;weeks_schedule_id&quot;,weeksScheduleId);\r\n            if(checkAwake){\r\n            cv.put(&quot;check_awake&quot;, 1);}else{\r\n                cv.put(&quot;check_awake&quot;, 0);}\r\n            cv.put(&quot;alarm_level_table_id&quot;,alarmLevelTableId);\r\n            long res = db.insert(&quot;Alarmdatabase&quot;, null, cv);\r\n            if(res == -1){\r\n                Toast.makeText(context, &quot;Inserting into Alarmdatabase failed&quot;, Toast.LENGTH_SHORT).show();\r\n            }else{\r\n                Toast.makeText(context, &quot;Successfully added into Alarmdatabase&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n    \r\n        }\r\n    \r\n    \r\n        public void addMethod(int id, int queueID, int methodTypeId, int methodId, int difficultyId, String label, int methodDatabaseSpecificID){\r\n            SQLiteDatabase db = this.getWritableDatabase();\r\n            ContentValues cv = new ContentValues();\r\n    \r\n            cv.put(&quot;queue_id&quot;,queueID);\r\n            cv.put(&quot;method_type_id&quot;,methodTypeId);\r\n            if(methodId != -1) cv.put(&quot;method_id&quot;,methodId);\r\n            if(difficultyId != -1) cv.put(&quot;difficulty_id&quot;,difficultyId);\r\n            if(!Objects.equals(label, &quot;-1&quot;)) cv.put(&quot;label&quot;,label);\r\n            cv.put(&quot;method_database_specific_id&quot;, methodDatabaseSpecificID);    //This is the id, that (if necessary) points to the specific data of the method database defined by method_type_id\r\n                                                                                //In easy words: if you need to look up the decoded string from qrcode method, this points to the id in the specific database, that has this info\r\n            long res = db.insert(&quot;Methoddatabase&quot;, null, cv);\r\n            if(res == -1){\r\n                Toast.makeText(context, &quot;Inserting into Methoddatabase failed&quot;, Toast.LENGTH_SHORT).show();\r\n            }else{\r\n                Toast.makeText(context, &quot;Successfully added into Methoddatabase&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n    \r\n    \r\n    \r\n        public String getMethodById(int id){\r\n            SQLiteDatabase db = this.getReadableDatabase();\r\n            Cursor c = db.rawQuery(&quot;SELECT * FROM Method WHERE ?&quot;, new String[]{&quot;id =&quot; + id});\r\n    \r\n            if(c.getCount() == 0){\r\n    \r\n                return &quot;non existent&quot;;\r\n            }else{\r\n                c.moveToNext();\r\n                return c.getString(1);\r\n                }\r\n            }\r\n    \r\n    \r\n        public String getMethodTypeById(int id){\r\n    \r\n            SQLiteDatabase db = this.getReadableDatabase();\r\n            Cursor c = db.rawQuery(&quot;SELECT * FROM MethodType WHERE ?&quot;, new String[]{&quot;id =&quot; + id});\r\n    \r\n            if(c.getCount() &gt; 0){\r\n    \r\n                c.moveToFirst();\r\n                return c.getString(1);\r\n    \r\n            }else{\r\n                return &quot;non existent&quot;;\r\n    \r\n    \r\n            }\r\n        }\r\n    \r\n        public String getDifficulty(int id){\r\n            SQLiteDatabase db = this.getReadableDatabase();\r\n            Cursor c = db.rawQuery(&quot;SELECT * FROM Difficulty WHERE ?&quot;, new String[]{&quot;id =&quot; + id});\r\n    \r\n            if(c.getCount() == 0){\r\n    \r\n                return &quot;non existent&quot;;\r\n            }else{\r\n                c.moveToNext();\r\n                return c.getString(1);\r\n            }\r\n        }\r\n    \r\n    \r\n    \r\n    \r\n        public int findIdByMethodType(String methodType){\r\n    \r\n            String[] methArr = new String[]{&quot;tap_off&quot;,&quot;math&quot;,&quot;qr_barcode&quot;,&quot;location&quot;,&quot;sudoku&quot;,&quot;memory&quot;,&quot;passphrase&quot;};\r\n            for(int i = 0; i &lt; methArr.length; i++) {\r\n                if(methArr[i].equals(methodType)){\r\n                    return i+1;\r\n                }\r\n            }\r\n            return -1;\r\n        }\r\n    \r\n        public int findIdByMethod(String method){\r\n            String[] meArr = new String[]{&quot;null&quot;,&quot;Addition&quot;,&quot;Subtraction&quot;,&quot;Multiplication&quot;,&quot;Division&quot;,&quot;Faculty (x!)&quot;,&quot;Root&quot;,&quot;Value for f(x)&quot;,&quot;Determine extrema of f(x)&quot;,&quot;Multiple choice questions&quot;,&quot;reach_radius&quot;,&quot;leave_radius&quot;};\r\n            for(int i = 0; i &lt; meArr.length; i++){\r\n                if(meArr[i].equals(method)){\r\n                    return i+1;\r\n                }\r\n            }\r\n            return -1;\r\n        }\r\n    \r\n        public int findIdByDifficulty(String difficulty){\r\n            switch (difficulty) {\r\n                case &quot;Extremely easy&quot;:\r\n                    return 1;\r\n                case &quot;Easy&quot;:\r\n                    return 2;\r\n                case &quot;Middle&quot;:\r\n                    return 3;\r\n                case &quot;Hard&quot;:\r\n                    return 4;\r\n                case &quot;Extremely hard&quot;:\r\n                    return 5;\r\n                default:\r\n                    return -1;\r\n            }\r\n        }\r\n    \r\n    \r\n        public void addMath(String method, String difficulty){\r\n    \r\n            SQLiteDatabase db = this.getWritableDatabase();\r\n            ContentValues cv = new ContentValues();\r\n    \r\n            cv.put(&quot;method&quot;,method);\r\n            cv.put(&quot;difficulty&quot;,difficulty);\r\n            long res = db.insert(&quot;Mathdatabase&quot;, null, cv);\r\n            if(res == -1){\r\n                Toast.makeText(context, &quot;Inserting into Mathdatabase failed&quot;, Toast.LENGTH_SHORT).show();\r\n            }else{\r\n                Toast.makeText(context, &quot;Successfully added into Mathdatabase&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n    \r\n        public void addQRBar(String label, String decoded){\r\n            SQLiteDatabase db = this.getWritableDatabase();\r\n            ContentValues cv = new ContentValues();\r\n    \r\n            cv.put(&quot;label&quot;, label);\r\n            cv.put(&quot;decoded&quot;, decoded);\r\n            long res = db.insert(&quot;QRBarcodedatabase&quot;, null, cv);\r\n            if(res == -1){\r\n                Toast.makeText(context, &quot;Inserting into QRBarcodedatabase failed&quot;, Toast.LENGTH_SHORT).show();\r\n            }else{\r\n                Toast.makeText(context, &quot;Successfully added into QRBarcodedatabase&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n        //        Locationdatabase latitude_int INTEGER, zero_point_latitude INTEGER, longitude_int INTEGER, zero_point_longitude INTEGER, radius_int INTEGER, zero_point_radius INTEGER, street TEXT)&quot;);\r\n    \r\n        public long addLocation(int latitudeInt, int zeroPointLatitude, int longitudeInt, int zeroPointLongitude, int radiusInt, int zeroPointRadius, String street, String radiusMode){\r\n            SQLiteDatabase db = this.getWritableDatabase();\r\n            ContentValues cv = new ContentValues();\r\n    \r\n            cv.put(&quot;latitude_int&quot;,latitudeInt);\r\n            cv.put(&quot;zero_point_latitude&quot;,zeroPointLatitude);\r\n            cv.put(&quot;longitude_int&quot;,longitudeInt);\r\n            cv.put(&quot;zero_point_longitude&quot;,zeroPointLongitude);\r\n            cv.put(&quot;radius_int&quot;,radiusInt);\r\n            cv.put(&quot;zero_point_radius&quot;,zeroPointRadius);\r\n            cv.put(&quot;street&quot;,street);\r\n            cv.put(&quot;radius_mode&quot;, radiusMode);\r\n            long res = db.insert(&quot;Locationdatabase&quot;, null, cv);\r\n            if(res == -1){\r\n                Toast.makeText(context, &quot;Inserting into Locationdatabase failed&quot;, Toast.LENGTH_SHORT).show();\r\n            }else{\r\n                Toast.makeText(context, &quot;Successfully added into Locationdatabase&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n            return res;\r\n        }\r\n    \r\n    \r\n        public long addLevel(int id, String label, int snooze_count, int snooze_time, String sound_path){\r\n            SQLiteDatabase db = this.getWritableDatabase();\r\n            ContentValues cv = new ContentValues();\r\n    \r\n            if(snooze_count != -2) cv.put(&quot;snooze_count&quot;, snooze_count);\r\n            if(snooze_time != -1) cv.put(&quot;snooze_time&quot;, snooze_time);\r\n            if(label != null) cv.put(&quot;label&quot;, label);\r\n            if(!Objects.equals(sound_path, &quot;-1&quot;)) cv.put(&quot;sound_path&quot;, sound_path);\r\n    \r\n            long result = db.insert(&quot;Alarmlevel&quot;, null, cv);\r\n            if(result == -1){\r\n                Toast.makeText(context, &quot;Inserting into Alarmlevel failed&quot;, Toast.LENGTH_SHORT).show();\r\n            }else{\r\n                Toast.makeText(context, &quot;Successfully added into Alarmlevel&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n            return result;\r\n    \r\n        }\r\n    \r\n    \r\n    \r\n        public void editLevel(int id, String label, int snooze_count, int snooze_time, String sound_path){\r\n            SQLiteDatabase db = this.getWritableDatabase();\r\n            ContentValues cv = new ContentValues();\r\n    \r\n            if(snooze_count != -2) cv.put(&quot;snooze_count&quot;, snooze_count);\r\n            if(snooze_time != -1) cv.put(&quot;snooze_time&quot;, snooze_time);\r\n            if(!Objects.equals(label, &quot;-1&quot;)) cv.put(&quot;label&quot;, label);\r\n            if(!Objects.equals(sound_path, &quot;-1&quot;)) cv.put(&quot;sound_path&quot;, sound_path);\r\n    \r\n            long result = db.update(&quot;Alarmlevel&quot;, cv, &quot;id=?&quot;, new String[]{String.valueOf(id)});\r\n            if(result == -1){\r\n                Toast.makeText(context, &quot;Failed to update alarm level&quot;, Toast.LENGTH_SHORT).show();\r\n            }else{\r\n                Toast.makeText(context, &quot;Success updating alarm level&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n    \r\n    \r\n    \r\n    \r\n    \r\n        public void editMethoddatabase(int queue_id, int method_type_id, int method_id, int difficulty_id, String label, int method_database_spec_id, int row_id){\r\n            SQLiteDatabase db = this.getWritableDatabase();\r\n            ContentValues cv = new ContentValues();\r\n    \r\n            if(queue_id != -1) cv.put(&quot;queue_id&quot;, queue_id);\r\n            if(method_type_id != -1) cv.put(&quot;method_type_id&quot;, method_type_id);\r\n            if(method_id != -1) cv.put(&quot;method_id&quot;, method_id);\r\n            if(difficulty_id != -1) cv.put(&quot;difficulty_id&quot;, difficulty_id);\r\n            if(!Objects.equals(label,&quot;-1&quot;)) cv.put(&quot;label&quot;, label);\r\n            if(method_database_spec_id != -1) cv.put(&quot;method_database_specific_id&quot;, method_database_spec_id);\r\n    \r\n            if (method_id == 1){\r\n                editMathdatabase(getMethodById(method_id), getDifficulty(difficulty_id), method_database_spec_id);\r\n            }\r\n    \r\n            long result = db.update(&quot;Methoddatabase&quot;, cv, &quot;id=?&quot;, new String[]{String.valueOf(row_id)});\r\n            if(result == -1){\r\n                Toast.makeText(context, &quot;Failed to update Methoddatabase&quot;, Toast.LENGTH_SHORT).show();\r\n            }else{\r\n                Toast.makeText(context, &quot;Success updating Methoddatabase&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n    \r\n    \r\n    \r\n        public void editMathdatabase(String method, String difficulty, int row_id){\r\n            SQLiteDatabase db = this.getWritableDatabase();\r\n            ContentValues c = new ContentValues();\r\n            if (!Objects.equals(method, &quot;&quot;)) c.put(&quot;method&quot;, method);\r\n            if (!Objects.equals(difficulty, &quot;&quot;)) c.put(&quot;difficulty&quot;, difficulty);\r\n    \r\n            long r = db.update(&quot;Mathdatabase&quot;,c, &quot;id=?&quot;, new String[]{String.valueOf(row_id)});\r\n            if(r == -1){\r\n                Toast.makeText(context, &quot;Failed to update Mathdatabase&quot;, Toast.LENGTH_SHORT).show();\r\n            }else{\r\n                Toast.makeText(context, &quot;Success updating Mathdatabase&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n    \r\n        }\r\n    \r\n    \r\n        public void editLocation(int lat, int zerolat, int lon, int zerolon, int radius, int zeroradius, String street, String enter_leave, int row_id){\r\n            SQLiteDatabase db = this.getWritableDatabase();\r\n            ContentValues cv = new ContentValues();\r\n    \r\n            int currlat, currzerolat, currlon, currzerolon, currradius, currzeroradius;\r\n            String currstreet, currenterleave;\r\n    \r\n            Cursor c = getData(&quot;Locationdatabase&quot;);\r\n            if(c.getCount() &gt; 0) {\r\n                while(c.moveToNext()){\r\n                    if(c.getInt(0) == row_id){\r\n    \r\n                        currlat = c.getInt(1);\r\n                        currzerolat = c.getInt(2);\r\n                        currlon = c.getInt(3);\r\n                        currzerolon = c.getInt(4);\r\n                        currradius = c.getInt(5);\r\n                        currzeroradius = c.getInt(6);\r\n                        currstreet = c.getString(7);\r\n                        currenterleave = c.getString(8);\r\n    \r\n                        if (lat != currlat) cv.put(&quot;latitude_int&quot;, lat);\r\n                        if (zerolat != currzerolat) cv.put(&quot;zero_point_latitude&quot;, zerolat);\r\n                        if (lon != currlon) cv.put(&quot;longitude_int&quot;, lon);\r\n                        if (zerolon != currzerolon) cv.put(&quot;zero_point_longitude&quot;, zerolon);\r\n                        if (radius != currradius) cv.put(&quot;radius_int&quot;, radius);\r\n                        if (zeroradius != currzeroradius) cv.put(&quot;zero_point_radius&quot;, zeroradius);\r\n                        if (!Objects.equals(street, currstreet)) cv.put(&quot;street&quot;, street);\r\n                        if (!Objects.equals(enter_leave,currenterleave)) cv.put(&quot;radius_mode&quot;, enter_leave);\r\n                    }\r\n                }\r\n    \r\n    \r\n    \r\n                long res = db.update(&quot;Locationdatabase&quot;, cv, &quot;id=?&quot;, new String[]{String.valueOf(row_id)});\r\n                if (res == -1) {\r\n                    Toast.makeText(context, &quot;Failed to update Locationdatabase&quot;, Toast.LENGTH_SHORT).show();\r\n                } else {\r\n                    Toast.makeText(context, &quot;Success updating Locationdatabase&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n            }else{\r\n                Toast.makeText(context, &quot;how did you manage to even get here wtf&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n    \r\n        }\r\n    \r\n    \r\n    \r\n    \r\n    \r\n        public Cursor getData(String database ){\r\n            SQLiteDatabase db = this.getReadableDatabase();\r\n            Cursor c = null;\r\n    \r\n            if (db != null){\r\n            c = db.rawQuery(&quot;Select * from &quot;+database, null);\r\n            }\r\n            return c;\r\n        }\r\n    \r\n        public Cursor execQuery(String sql, String[] selectionArgs){\r\n            SQLiteDatabase db = this.getWritableDatabase();\r\n            return db.rawQuery(sql, selectionArgs);\r\n    \r\n        }\r\n    \r\n    }\r\n\r\n","title":"Using multiple SQLite Databases in my android app project","body":"<p>Ok, so i resorted to updating the database now. I have method_specific_id not as a foreign key, even though it is one, but it still works and a foreign key can also be set from more than 1 database.</p>\n<p>Update of the Code:</p>\n<pre><code>package com.example.alarm;\n\nimport android.content.ContentValues;\nimport android.content.Context;\nimport android.database.Cursor;\nimport android.database.sqlite.SQLiteDatabase;\nimport android.database.sqlite.SQLiteOpenHelper;\nimport android.util.Log;\nimport android.widget.Toast;\n\nimport java.util.Objects;\n\npublic class DBHelper extends SQLiteOpenHelper{\n    \n    Context context;\n\n    public DBHelper(Context context, String db) {\n        \n        super(context, db, null, 1);\n        this.context = context;\n\n\n    }\n\n    @Override\n    public void onCreate(SQLiteDatabase db) {\n\n        db.execSQL(&quot;create Table Alarmdatabase (id INTEGER primary key autoincrement, label TEXT, method_queue_id INTEGER, privilege_rights INTEGER,&quot; +\n                &quot; time_wake_up_hours INTEGER, time_wake_up_minutes INTEGER, days_schedule_id INTEGER, weeks_schedule_id INTEGER, check_awake INTEGER,&quot; +\n                &quot; alarm_level_id INTEGER, foreign key (alarm_level_id) references Alarmlevel(id))&quot;);\n        //every int representing a bool is -1 for false                                             //represents how many methods are in the queue\n        //alarm_level_id points to the Alarmlevel Table which has the level specific labels, snooze settings, sounds, etc\n        //if alarm levels not used, just set everything as alarm level 1\n\n        db.execSQL(&quot;create Table Methoddatabase (id INTEGER primary key autoincrement, queue_id INTEGER, method_type_id INTEGER, method_id INTEGER, difficulty_id INTEGER,&quot; +\n                &quot; label TEXT, method_database_specific_id INTEGER, foreign KEY(method_type_id) references Methodtype(id), foreign key (method_id) references Method(id),&quot; +\n                &quot; foreign key (difficulty_id) references Difficulty(id), foreign key(label) references QRBarcodedatabase(label),&quot; +\n                &quot; foreign KEY(queue_id) references Alarmlevel(id))&quot;);\n\n        db.execSQL(&quot;create Table Methodtype (id INTEGER primary key autoincrement, method_type TEXT)&quot;);\n        db.execSQL(&quot;create Table Method (id INTEGER primary key autoincrement, method TEXT)&quot;);\n        db.execSQL(&quot;create Table Difficulty (id INTEGER primary key autoincrement, difficulty TEXT)&quot;);\n\n        db.execSQL(&quot;create Table Alarmlevel (id INTEGER primary key autoincrement, label TEXT, snooze_count INTEGER, snooze_time INTEGER, sound_path TEXT)&quot;); //multiple rows with the same level_id make up the different Alarmlevels, might add more attribs later\n\n        db.execSQL(&quot;create Table QRBarcodedatabase (label TEXT primary key, decoded TEXT)&quot;);\n        db.execSQL(&quot;create Table Mathdatabase (id INTEGER primary key autoincrement, method TEXT, difficulty TEXT)&quot;);\n        db.execSQL(&quot;create Table Locationdatabase (id INTEGER primary key autoincrement, latitude_int INTEGER, zero_point_latitude INTEGER, longitude_int INTEGER,&quot; +\n                &quot; zero_point_longitude INTEGER, radius_int INTEGER, zero_point_radius INTEGER, street TEXT, radius_mode TEXT)&quot;);\n        setupTablesForPreset(db);\n\n    }\n\n\n    @Override\n    public void onUpgrade(SQLiteDatabase db, int verOld, int verNew) {\n        db.execSQL(&quot;drop Table if exists Alarmdatabase&quot;);\n\n        db.execSQL(&quot;drop Table if exists Methoddatabase&quot;);\n        db.execSQL(&quot;drop Table if exists Methodtype&quot;);\n        db.execSQL(&quot;drop Table if exists Method&quot;);\n        db.execSQL(&quot;drop Table if exists Difficulty&quot;);\n\n        db.execSQL(&quot;drop Table if exists Alarmlevel&quot;);\n\n        db.execSQL(&quot;drop Table if exists QRBarcodedatabase&quot;);\n        db.execSQL(&quot;drop Table if exists Mathdatabase&quot;);\n        db.execSQL(&quot;drop Table if exists Locationdatabase&quot;);\n        onCreate(db);\n    }\n\n\n    private void setupTablesForPreset(SQLiteDatabase db) {\n\n\n        ContentValues cv = new ContentValues();\n\n        long res;\n        for(String type : new String[]{&quot;tap_off&quot;,&quot;math&quot;,&quot;qr_barcode&quot;,&quot;location&quot;,&quot;sudoku&quot;,&quot;memory&quot;,&quot;passphrase&quot;}) {\n            cv.put(&quot;method_type&quot;, type);\n            res = db.insert(&quot;Methodtype&quot;, null, cv);\n            if(res == -1){\n                Toast.makeText(context, &quot;Error setting up static Database \\&quot;Methodtype\\&quot;&quot;, Toast.LENGTH_SHORT).show();\n            }\n        }\n\n\n        cv = new ContentValues();\n        for(String type : new String[]{&quot;null&quot;,&quot;add&quot;,&quot;sub&quot;,&quot;mult&quot;,&quot;div&quot;,&quot;fac&quot;,&quot;root&quot;,&quot;value_fx&quot;,&quot;extrema_fx&quot;,&quot;multiple_choice&quot;,&quot;reach_radius&quot;,&quot;leave_radius&quot;}) {\n            cv.put(&quot;method&quot;, type);\n            res = db.insert(&quot;Method&quot;, null, cv);\n            if(res == -1){\n                Toast.makeText(context, &quot;Error setting up static Database \\&quot;Method\\&quot;&quot;, Toast.LENGTH_SHORT).show();\n            }\n        }\n\n\n        cv = new ContentValues();\n        for(String type : new String[]{&quot;ex_easy&quot;,&quot;easy&quot;,&quot;middle&quot;,&quot;hard&quot;,&quot;ex_hard&quot;}) {\n            cv.put(&quot;difficulty&quot;, type);\n            res = db.insert(&quot;Difficulty&quot;, null, cv);\n            if(res == -1){\n                Toast.makeText(context, &quot;Error setting up static Database \\&quot;Difficulty\\&quot;&quot;, Toast.LENGTH_SHORT).show();\n            }\n        }\n\n\n\n    }\n\n    /**\n     * @param database: the string of the table in database.db\n     * @return the max id in the table, if db empty it returns 0\n     */\n    public int getMaxTableId(String database){\n        SQLiteDatabase db = this.getReadableDatabase();\n        Cursor c1 = db.rawQuery(&quot;SELECT max(id) FROM &quot; + database, null);\n        if(c1.getCount() &gt;0){\n            int id = 0;\n            c1.moveToFirst();\n            id = c1.getInt(0);\n            c1.close();\n\n            return id;\n        }\n        return 0;\n    }\n\n\n    //TODO: I don't need to handle SQLInjection, atleast for now, because sharing of settings is not supported as of now, so this would only harm the person itself, or be a nice niche feature lol\n    //(this might change in the future, so i will keep this todo in until publishing, so if i add that feature at any point, i'll know, that i have to take care of that.)\n\n\n    public void deleteRow(String table, int row_id){\n        SQLiteDatabase db = this.getWritableDatabase();\n        long res = db.delete(table, &quot;id=?&quot;, new String[]{String.valueOf(row_id)});\n        if(res ==0){\n            Toast.makeText(context, &quot;Failed deleting item: &quot; + res, Toast.LENGTH_SHORT).show();\n        }else {\n            Toast.makeText(context, &quot;Success deleting item: &quot; +res, Toast.LENGTH_SHORT).show();\n        }\n    }\n\n\n    public void addAlarm(String label, int methodQueueId, int soundPathId, boolean privilegeRights, boolean snoozable, int wakeUpTimeHours, int wakeUpTimeMinutes, int daysScheduleId, int weeksScheduleId, boolean checkAwake, int alarmLevelTableId){\n\n        SQLiteDatabase db = this.getWritableDatabase();\n        ContentValues cv = new ContentValues();\n\n        cv.put(&quot;label&quot;, label);\n        cv.put(&quot;method_queue_id&quot;,methodQueueId);\n        cv.put(&quot;sound_path_id&quot;,soundPathId);\n        if(privilegeRights){\n        cv.put(&quot;privilege_rights&quot;,1);}\n        else{\n            cv.put(&quot;privilege_rights&quot;, 0);}\n        if(snoozable){\n        cv.put(&quot;snoozable&quot;,1);}\n        else{\n            cv.put(&quot;snoozable&quot;,0);}\n        cv.put(&quot;time_wake_up_hours&quot;, wakeUpTimeHours);\n        cv.put(&quot;time_wake_up_minutes&quot;, wakeUpTimeMinutes);\n        cv.put(&quot;days_schedule_id&quot;,daysScheduleId);\n        cv.put(&quot;weeks_schedule_id&quot;,weeksScheduleId);\n        if(checkAwake){\n        cv.put(&quot;check_awake&quot;, 1);}else{\n            cv.put(&quot;check_awake&quot;, 0);}\n        cv.put(&quot;alarm_level_table_id&quot;,alarmLevelTableId);\n        long res = db.insert(&quot;Alarmdatabase&quot;, null, cv);\n        if(res == -1){\n            Toast.makeText(context, &quot;Inserting into Alarmdatabase failed&quot;, Toast.LENGTH_SHORT).show();\n        }else{\n            Toast.makeText(context, &quot;Successfully added into Alarmdatabase&quot;, Toast.LENGTH_SHORT).show();\n        }\n\n    }\n\n\n    public void addMethod(int id, int queueID, int methodTypeId, int methodId, int difficultyId, String label, int methodDatabaseSpecificID){\n        SQLiteDatabase db = this.getWritableDatabase();\n        ContentValues cv = new ContentValues();\n\n        cv.put(&quot;queue_id&quot;,queueID);\n        cv.put(&quot;method_type_id&quot;,methodTypeId);\n        if(methodId != -1) cv.put(&quot;method_id&quot;,methodId);\n        if(difficultyId != -1) cv.put(&quot;difficulty_id&quot;,difficultyId);\n        if(!Objects.equals(label, &quot;-1&quot;)) cv.put(&quot;label&quot;,label);\n        cv.put(&quot;method_database_specific_id&quot;, methodDatabaseSpecificID);    //This is the id, that (if necessary) points to the specific data of the method database defined by method_type_id\n                                                                            //In easy words: if you need to look up the decoded string from qrcode method, this points to the id in the specific database, that has this info\n        long res = db.insert(&quot;Methoddatabase&quot;, null, cv);\n        if(res == -1){\n            Toast.makeText(context, &quot;Inserting into Methoddatabase failed&quot;, Toast.LENGTH_SHORT).show();\n        }else{\n            Toast.makeText(context, &quot;Successfully added into Methoddatabase&quot;, Toast.LENGTH_SHORT).show();\n        }\n    }\n\n\n\n    public String getMethodById(int id){\n        SQLiteDatabase db = this.getReadableDatabase();\n        Cursor c = db.rawQuery(&quot;SELECT * FROM Method WHERE ?&quot;, new String[]{&quot;id =&quot; + id});\n\n        if(c.getCount() == 0){\n\n            return &quot;non existent&quot;;\n        }else{\n            c.moveToNext();\n            return c.getString(1);\n            }\n        }\n\n\n    public String getMethodTypeById(int id){\n\n        SQLiteDatabase db = this.getReadableDatabase();\n        Cursor c = db.rawQuery(&quot;SELECT * FROM MethodType WHERE ?&quot;, new String[]{&quot;id =&quot; + id});\n\n        if(c.getCount() &gt; 0){\n\n            c.moveToFirst();\n            return c.getString(1);\n\n        }else{\n            return &quot;non existent&quot;;\n\n\n        }\n    }\n\n    public String getDifficulty(int id){\n        SQLiteDatabase db = this.getReadableDatabase();\n        Cursor c = db.rawQuery(&quot;SELECT * FROM Difficulty WHERE ?&quot;, new String[]{&quot;id =&quot; + id});\n\n        if(c.getCount() == 0){\n\n            return &quot;non existent&quot;;\n        }else{\n            c.moveToNext();\n            return c.getString(1);\n        }\n    }\n\n\n\n\n    public int findIdByMethodType(String methodType){\n\n        String[] methArr = new String[]{&quot;tap_off&quot;,&quot;math&quot;,&quot;qr_barcode&quot;,&quot;location&quot;,&quot;sudoku&quot;,&quot;memory&quot;,&quot;passphrase&quot;};\n        for(int i = 0; i &lt; methArr.length; i++) {\n            if(methArr[i].equals(methodType)){\n                return i+1;\n            }\n        }\n        return -1;\n    }\n\n    public int findIdByMethod(String method){\n        String[] meArr = new String[]{&quot;null&quot;,&quot;Addition&quot;,&quot;Subtraction&quot;,&quot;Multiplication&quot;,&quot;Division&quot;,&quot;Faculty (x!)&quot;,&quot;Root&quot;,&quot;Value for f(x)&quot;,&quot;Determine extrema of f(x)&quot;,&quot;Multiple choice questions&quot;,&quot;reach_radius&quot;,&quot;leave_radius&quot;};\n        for(int i = 0; i &lt; meArr.length; i++){\n            if(meArr[i].equals(method)){\n                return i+1;\n            }\n        }\n        return -1;\n    }\n\n    public int findIdByDifficulty(String difficulty){\n        switch (difficulty) {\n            case &quot;Extremely easy&quot;:\n                return 1;\n            case &quot;Easy&quot;:\n                return 2;\n            case &quot;Middle&quot;:\n                return 3;\n            case &quot;Hard&quot;:\n                return 4;\n            case &quot;Extremely hard&quot;:\n                return 5;\n            default:\n                return -1;\n        }\n    }\n\n\n    public void addMath(String method, String difficulty){\n\n        SQLiteDatabase db = this.getWritableDatabase();\n        ContentValues cv = new ContentValues();\n\n        cv.put(&quot;method&quot;,method);\n        cv.put(&quot;difficulty&quot;,difficulty);\n        long res = db.insert(&quot;Mathdatabase&quot;, null, cv);\n        if(res == -1){\n            Toast.makeText(context, &quot;Inserting into Mathdatabase failed&quot;, Toast.LENGTH_SHORT).show();\n        }else{\n            Toast.makeText(context, &quot;Successfully added into Mathdatabase&quot;, Toast.LENGTH_SHORT).show();\n        }\n    }\n\n    public void addQRBar(String label, String decoded){\n        SQLiteDatabase db = this.getWritableDatabase();\n        ContentValues cv = new ContentValues();\n\n        cv.put(&quot;label&quot;, label);\n        cv.put(&quot;decoded&quot;, decoded);\n        long res = db.insert(&quot;QRBarcodedatabase&quot;, null, cv);\n        if(res == -1){\n            Toast.makeText(context, &quot;Inserting into QRBarcodedatabase failed&quot;, Toast.LENGTH_SHORT).show();\n        }else{\n            Toast.makeText(context, &quot;Successfully added into QRBarcodedatabase&quot;, Toast.LENGTH_SHORT).show();\n        }\n    }\n    //        Locationdatabase latitude_int INTEGER, zero_point_latitude INTEGER, longitude_int INTEGER, zero_point_longitude INTEGER, radius_int INTEGER, zero_point_radius INTEGER, street TEXT)&quot;);\n\n    public long addLocation(int latitudeInt, int zeroPointLatitude, int longitudeInt, int zeroPointLongitude, int radiusInt, int zeroPointRadius, String street, String radiusMode){\n        SQLiteDatabase db = this.getWritableDatabase();\n        ContentValues cv = new ContentValues();\n\n        cv.put(&quot;latitude_int&quot;,latitudeInt);\n        cv.put(&quot;zero_point_latitude&quot;,zeroPointLatitude);\n        cv.put(&quot;longitude_int&quot;,longitudeInt);\n        cv.put(&quot;zero_point_longitude&quot;,zeroPointLongitude);\n        cv.put(&quot;radius_int&quot;,radiusInt);\n        cv.put(&quot;zero_point_radius&quot;,zeroPointRadius);\n        cv.put(&quot;street&quot;,street);\n        cv.put(&quot;radius_mode&quot;, radiusMode);\n        long res = db.insert(&quot;Locationdatabase&quot;, null, cv);\n        if(res == -1){\n            Toast.makeText(context, &quot;Inserting into Locationdatabase failed&quot;, Toast.LENGTH_SHORT).show();\n        }else{\n            Toast.makeText(context, &quot;Successfully added into Locationdatabase&quot;, Toast.LENGTH_SHORT).show();\n        }\n        return res;\n    }\n\n\n    public long addLevel(int id, String label, int snooze_count, int snooze_time, String sound_path){\n        SQLiteDatabase db = this.getWritableDatabase();\n        ContentValues cv = new ContentValues();\n\n        if(snooze_count != -2) cv.put(&quot;snooze_count&quot;, snooze_count);\n        if(snooze_time != -1) cv.put(&quot;snooze_time&quot;, snooze_time);\n        if(label != null) cv.put(&quot;label&quot;, label);\n        if(!Objects.equals(sound_path, &quot;-1&quot;)) cv.put(&quot;sound_path&quot;, sound_path);\n\n        long result = db.insert(&quot;Alarmlevel&quot;, null, cv);\n        if(result == -1){\n            Toast.makeText(context, &quot;Inserting into Alarmlevel failed&quot;, Toast.LENGTH_SHORT).show();\n        }else{\n            Toast.makeText(context, &quot;Successfully added into Alarmlevel&quot;, Toast.LENGTH_SHORT).show();\n        }\n        return result;\n\n    }\n\n\n\n    public void editLevel(int id, String label, int snooze_count, int snooze_time, String sound_path){\n        SQLiteDatabase db = this.getWritableDatabase();\n        ContentValues cv = new ContentValues();\n\n        if(snooze_count != -2) cv.put(&quot;snooze_count&quot;, snooze_count);\n        if(snooze_time != -1) cv.put(&quot;snooze_time&quot;, snooze_time);\n        if(!Objects.equals(label, &quot;-1&quot;)) cv.put(&quot;label&quot;, label);\n        if(!Objects.equals(sound_path, &quot;-1&quot;)) cv.put(&quot;sound_path&quot;, sound_path);\n\n        long result = db.update(&quot;Alarmlevel&quot;, cv, &quot;id=?&quot;, new String[]{String.valueOf(id)});\n        if(result == -1){\n            Toast.makeText(context, &quot;Failed to update alarm level&quot;, Toast.LENGTH_SHORT).show();\n        }else{\n            Toast.makeText(context, &quot;Success updating alarm level&quot;, Toast.LENGTH_SHORT).show();\n        }\n    }\n\n\n\n\n\n    public void editMethoddatabase(int queue_id, int method_type_id, int method_id, int difficulty_id, String label, int method_database_spec_id, int row_id){\n        SQLiteDatabase db = this.getWritableDatabase();\n        ContentValues cv = new ContentValues();\n\n        if(queue_id != -1) cv.put(&quot;queue_id&quot;, queue_id);\n        if(method_type_id != -1) cv.put(&quot;method_type_id&quot;, method_type_id);\n        if(method_id != -1) cv.put(&quot;method_id&quot;, method_id);\n        if(difficulty_id != -1) cv.put(&quot;difficulty_id&quot;, difficulty_id);\n        if(!Objects.equals(label,&quot;-1&quot;)) cv.put(&quot;label&quot;, label);\n        if(method_database_spec_id != -1) cv.put(&quot;method_database_specific_id&quot;, method_database_spec_id);\n\n        if (method_id == 1){\n            editMathdatabase(getMethodById(method_id), getDifficulty(difficulty_id), method_database_spec_id);\n        }\n\n        long result = db.update(&quot;Methoddatabase&quot;, cv, &quot;id=?&quot;, new String[]{String.valueOf(row_id)});\n        if(result == -1){\n            Toast.makeText(context, &quot;Failed to update Methoddatabase&quot;, Toast.LENGTH_SHORT).show();\n        }else{\n            Toast.makeText(context, &quot;Success updating Methoddatabase&quot;, Toast.LENGTH_SHORT).show();\n        }\n    }\n\n\n\n    public void editMathdatabase(String method, String difficulty, int row_id){\n        SQLiteDatabase db = this.getWritableDatabase();\n        ContentValues c = new ContentValues();\n        if (!Objects.equals(method, &quot;&quot;)) c.put(&quot;method&quot;, method);\n        if (!Objects.equals(difficulty, &quot;&quot;)) c.put(&quot;difficulty&quot;, difficulty);\n\n        long r = db.update(&quot;Mathdatabase&quot;,c, &quot;id=?&quot;, new String[]{String.valueOf(row_id)});\n        if(r == -1){\n            Toast.makeText(context, &quot;Failed to update Mathdatabase&quot;, Toast.LENGTH_SHORT).show();\n        }else{\n            Toast.makeText(context, &quot;Success updating Mathdatabase&quot;, Toast.LENGTH_SHORT).show();\n        }\n\n    }\n\n\n    public void editLocation(int lat, int zerolat, int lon, int zerolon, int radius, int zeroradius, String street, String enter_leave, int row_id){\n        SQLiteDatabase db = this.getWritableDatabase();\n        ContentValues cv = new ContentValues();\n\n        int currlat, currzerolat, currlon, currzerolon, currradius, currzeroradius;\n        String currstreet, currenterleave;\n\n        Cursor c = getData(&quot;Locationdatabase&quot;);\n        if(c.getCount() &gt; 0) {\n            while(c.moveToNext()){\n                if(c.getInt(0) == row_id){\n\n                    currlat = c.getInt(1);\n                    currzerolat = c.getInt(2);\n                    currlon = c.getInt(3);\n                    currzerolon = c.getInt(4);\n                    currradius = c.getInt(5);\n                    currzeroradius = c.getInt(6);\n                    currstreet = c.getString(7);\n                    currenterleave = c.getString(8);\n\n                    if (lat != currlat) cv.put(&quot;latitude_int&quot;, lat);\n                    if (zerolat != currzerolat) cv.put(&quot;zero_point_latitude&quot;, zerolat);\n                    if (lon != currlon) cv.put(&quot;longitude_int&quot;, lon);\n                    if (zerolon != currzerolon) cv.put(&quot;zero_point_longitude&quot;, zerolon);\n                    if (radius != currradius) cv.put(&quot;radius_int&quot;, radius);\n                    if (zeroradius != currzeroradius) cv.put(&quot;zero_point_radius&quot;, zeroradius);\n                    if (!Objects.equals(street, currstreet)) cv.put(&quot;street&quot;, street);\n                    if (!Objects.equals(enter_leave,currenterleave)) cv.put(&quot;radius_mode&quot;, enter_leave);\n                }\n            }\n\n\n\n            long res = db.update(&quot;Locationdatabase&quot;, cv, &quot;id=?&quot;, new String[]{String.valueOf(row_id)});\n            if (res == -1) {\n                Toast.makeText(context, &quot;Failed to update Locationdatabase&quot;, Toast.LENGTH_SHORT).show();\n            } else {\n                Toast.makeText(context, &quot;Success updating Locationdatabase&quot;, Toast.LENGTH_SHORT).show();\n            }\n        }else{\n            Toast.makeText(context, &quot;how did you manage to even get here wtf&quot;, Toast.LENGTH_SHORT).show();\n        }\n\n    }\n\n\n\n\n\n    public Cursor getData(String database ){\n        SQLiteDatabase db = this.getReadableDatabase();\n        Cursor c = null;\n\n        if (db != null){\n        c = db.rawQuery(&quot;Select * from &quot;+database, null);\n        }\n        return c;\n    }\n\n    public Cursor execQuery(String sql, String[] selectionArgs){\n        SQLiteDatabase db = this.getWritableDatabase();\n        return db.rawQuery(sql, selectionArgs);\n\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":26346485,"reputation":15,"user_id":20004771,"display_name":"Displayed Name"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":117,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75925545,"answer_count":2,"score":0,"last_activity_date":1681076776,"creation_date":1680556879,"question_id":75923864,"body_markdown":"so i am currently programming an alarm clock app for android, which i am still learning and i was wondering if i should make a DBHelper class for every database that i create, or how i can handle multiple tables pointing to each other by ids. It&#39;s problematic for me, because i populate a RecyclerView with data from said tables. Now problems start to arise, as soon as i try to delete data at runtime, the table ids are all primary key autoincrement, so if i delete any element, this will cause the id to not represent the row number of the database table, sadly autoincrement doesnt handle ids to decrease if an item in a row before them is deleted.\r\n\r\nAt first i tried communicating the data for the alarms across multiple activities via sharedPreference, i wanted the data to persist if the app crashes for instance, so i switched to sqlite, i do have my DBHelper class, carrying all of the tables that i use:\r\n\r\n\r\n```\r\npackage com.example.alarm;\r\n\r\nimport android.content.ContentValues;\r\nimport android.content.Context;\r\nimport android.database.Cursor;\r\nimport android.database.sqlite.SQLiteDatabase;\r\nimport android.database.sqlite.SQLiteOpenHelper;\r\nimport android.widget.Toast;\r\n\r\nimport java.util.Objects;\r\n\r\npublic class DBHelper extends SQLiteOpenHelper{\r\n    \r\n    Context context;\r\n\r\n    public DBHelper(Context context, String db) {\r\n        \r\n        super(context, db, null, 1);\r\n        this.context = context;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(SQLiteDatabase db) {\r\n        db.execSQL(&quot;create Table Alarmdatabase (id INTEGER primary key autoincrement, label TEXT, method_queue_id INTEGER, sound_path_id INTEGER, privilege_rights INTEGER, snoozable INTEGER, time_wake_up_hours INTEGER, time_wake_up_minutes INTEGER, days_schedule_id INTEGER, weeks_schedule_id INTEGER, check_awake INTEGER, alarm_level_table_id INTEGER)&quot;);\r\n        //every int representing a bool is -1 for false                         this is the id of the table and the item in it, for the corresponding method\r\n\r\n        db.execSQL(&quot;create Table Methoddatabase (id INTEGER primary key autoincrement, queue_id INTEGER, method_type_id INTEGER, method_id INTEGER, difficulty_id INTEGER, label TEXT, method_database_specific_id INTEGER)&quot;); //multiple rows with same queue_id are part of the same queue\r\n        db.execSQL(&quot;create Table Methodtype (id INTEGER primary key autoincrement, method_type TEXT)&quot;);\r\n        db.execSQL(&quot;create Table Method (id INTEGER primary key autoincrement, method TEXT)&quot;);\r\n        db.execSQL(&quot;create Table Difficulty (id INTEGER primary key autoincrement, difficulty TEXT)&quot;);\r\n\r\n        db.execSQL(&quot;create Table Alarmlevel (id INTEGER primary key autoincrement, level_id INTEGER, method_databse_queue_id INTEGER)&quot;); //multiple rows with the same level_id make up the different Alarmlevels, might add more attribs later\r\n\r\n        db.execSQL(&quot;create Table QRBarcodedatabase (label TEXT primary key, decoded TEXT)&quot;);\r\n        db.execSQL(&quot;create Table Mathdatabase (id INTEGER primary key autoincrement, method TEXT, difficulty TEXT)&quot;);\r\n        db.execSQL(&quot;create Table Locationdatabase (id INTEGER primary key autoincrement, latitude_int INTEGER, zero_point_latitude INTEGER, longitude_int INTEGER, zero_point_longitude INTEGER, radius_int INTEGER, zero_point_radius INTEGER, street TEXT, radius_mode TEXT)&quot;);\r\n        setupTablesForPreset(db);\r\n    }\r\n\r\n    private void setupTablesForPreset(SQLiteDatabase db) {\r\n\r\n\r\n        ContentValues cv = new ContentValues();\r\n\r\n        long res;\r\n        for(String type : new String[]{&quot;tap_off&quot;,&quot;math&quot;,&quot;qr_barcode&quot;,&quot;location&quot;,&quot;sudoku&quot;,&quot;memory&quot;,&quot;passphrase&quot;}) {\r\n            cv.put(&quot;method_type&quot;, type);\r\n            res = db.insert(&quot;Methodtype&quot;, null, cv);\r\n            if(res == -1){\r\n                Toast.makeText(context, &quot;Error setting up static Database \\&quot;Methodtype\\&quot;&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n\r\n\r\n        cv = new ContentValues();\r\n        for(String type : new String[]{&quot;null&quot;,&quot;add&quot;,&quot;sub&quot;,&quot;mult&quot;,&quot;div&quot;,&quot;fac&quot;,&quot;root&quot;,&quot;value_fx&quot;,&quot;extrema_fx&quot;,&quot;multiple_choice&quot;,&quot;reach_radius&quot;,&quot;leave_radius&quot;}) {\r\n            cv.put(&quot;method&quot;, type);\r\n            res = db.insert(&quot;Method&quot;, null, cv);\r\n            if(res == -1){\r\n                Toast.makeText(context, &quot;Error setting up static Database \\&quot;Method\\&quot;&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n\r\n\r\n        cv = new ContentValues();\r\n        for(String type : new String[]{&quot;ex_easy&quot;,&quot;easy&quot;,&quot;middle&quot;,&quot;hard&quot;,&quot;ex_hard&quot;}) {\r\n            cv.put(&quot;difficulty&quot;, type);\r\n            res = db.insert(&quot;Difficulty&quot;, null, cv);\r\n            if(res == -1){\r\n                Toast.makeText(context, &quot;Error setting up static Database \\&quot;Difficulty\\&quot;&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n\r\n\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onUpgrade(SQLiteDatabase db, int verOld, int verNew) {\r\n        db.execSQL(&quot;drop Table if exists Alarmdatabase&quot;);\r\n\r\n        db.execSQL(&quot;drop Table if exists Methoddatabase&quot;);\r\n        db.execSQL(&quot;drop Table if exists Methodtype&quot;);\r\n        db.execSQL(&quot;drop Table if exists Method&quot;);\r\n        db.execSQL(&quot;drop Table if exists Difficulty&quot;);\r\n\r\n        db.execSQL(&quot;drop Table if exists Alarmlevel&quot;);\r\n\r\n        db.execSQL(&quot;drop Table if exists QRBarcodedatabase&quot;);\r\n        db.execSQL(&quot;drop Table if exists Mathdatabase&quot;);\r\n        db.execSQL(&quot;drop Table if exists Locationdatabase&quot;);\r\n        onCreate(db);\r\n    }\r\n\r\n    //TODO: I don&#39;t need to handle SQLInjection, atleast for now, because sharing of settings is not supported as of now, so this would only harm the person itself, or be a nice niche feature lol\r\n    //(this might change in the future, so i will keep this todo in until publishing, so if i add that feature at any point, i&#39;ll know, that i have to take care of that.)\r\n\r\n\r\n    public void deleteRow(String table, int row_id){\r\n        SQLiteDatabase db = this.getWritableDatabase();\r\n        long res = db.delete(table, &quot;id=?&quot;, new String[]{String.valueOf(row_id+2)});\r\n        if(res ==0){\r\n            Toast.makeText(context, &quot;Failed deleting item: &quot; + res, Toast.LENGTH_SHORT).show();\r\n        }else {\r\n            Toast.makeText(context, &quot;Success deleting item: &quot; +res, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n\r\n    public void deleteRow(String table, String label){\r\n        SQLiteDatabase db = this.getWritableDatabase();\r\n        long res = db.delete(table, &quot;label=?&quot;, new String[]{label});\r\n\r\n        if(res ==-1){\r\n            Toast.makeText(context, &quot;Failed deleting item&quot;, Toast.LENGTH_SHORT).show();\r\n        }else {\r\n            Toast.makeText(context, &quot;Success deleting item&quot;, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    public void addAlarm(String label, int methodQueueId, int soundPathId, boolean privilegeRights, boolean snoozable, int wakeUpTimeHours, int wakeUpTimeMinutes, int daysScheduleId, int weeksScheduleId, boolean checkAwake, int alarmLevelTableId){\r\n\r\n        SQLiteDatabase db = this.getWritableDatabase();\r\n        ContentValues cv = new ContentValues();\r\n\r\n        cv.put(&quot;label&quot;, label);\r\n        cv.put(&quot;method_queue_id&quot;,methodQueueId);\r\n        cv.put(&quot;sound_path_id&quot;,soundPathId);\r\n        if(privilegeRights){\r\n        cv.put(&quot;privilege_rights&quot;,1);}\r\n        else{\r\n            cv.put(&quot;privilege_rights&quot;, 0);}\r\n        if(snoozable){\r\n        cv.put(&quot;snoozable&quot;,1);}\r\n        else{\r\n            cv.put(&quot;snoozable&quot;,0);}\r\n        cv.put(&quot;time_wake_up_hours&quot;, wakeUpTimeHours);\r\n        cv.put(&quot;time_wake_up_minutes&quot;, wakeUpTimeMinutes);\r\n        cv.put(&quot;days_schedule_id&quot;,daysScheduleId);\r\n        cv.put(&quot;weeks_schedule_id&quot;,weeksScheduleId);\r\n        if(checkAwake){\r\n        cv.put(&quot;check_awake&quot;, 1);}else{\r\n            cv.put(&quot;check_awake&quot;, 0);}\r\n        cv.put(&quot;alarm_level_table_id&quot;,alarmLevelTableId);\r\n        long res = db.insert(&quot;Alarmdatabase&quot;, null, cv);\r\n        if(res == -1){\r\n            Toast.makeText(context, &quot;Inserting into Alarmdatabase failed&quot;, Toast.LENGTH_SHORT).show();\r\n        }else{\r\n            Toast.makeText(context, &quot;Successfully added into Alarmdatabase&quot;, Toast.LENGTH_SHORT).show();\r\n        }\r\n\r\n    }\r\n\r\n\r\n    public void addMethod(int queueID, int methodTypeId, int methodId, int difficultyId, String label, int methodDatabaseSpecificID){\r\n        SQLiteDatabase db = this.getWritableDatabase();\r\n        ContentValues cv = new ContentValues();\r\n\r\n        cv.put(&quot;queue_id&quot;,queueID);\r\n        cv.put(&quot;method_type_id&quot;,methodTypeId);\r\n        if(methodId != -1) cv.put(&quot;method_id&quot;,methodId);\r\n        if(difficultyId != -1) cv.put(&quot;difficulty_id&quot;,difficultyId);\r\n        if(!Objects.equals(label, &quot;-1&quot;)) cv.put(&quot;label&quot;,label);\r\n        cv.put(&quot;method_database_specific_id&quot;, methodDatabaseSpecificID);    //This is the id, that (if necessary) points to the specific data of the method database defined by method_type_id\r\n                                                                            //In easy words: if you need to look up the decoded string from qrcode method, this points to the id in the specific database, that has this info\r\n        long res = db.insert(&quot;Methoddatabase&quot;, null, cv);\r\n        if(res == -1){\r\n            Toast.makeText(context, &quot;Inserting into Methoddatabase failed&quot;, Toast.LENGTH_SHORT).show();\r\n        }else{\r\n            Toast.makeText(context, &quot;Successfully added into Methoddatabase&quot;, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n\r\n\r\n    public String getMethodById(int id){\r\n        SQLiteDatabase db = this.getReadableDatabase();\r\n        Cursor c = db.rawQuery(&quot;SELECT * FROM Method WHERE ?&quot;, new String[]{&quot;id =&quot; + id});\r\n\r\n        if(c.getCount() == 0){\r\n\r\n            return &quot;non existent&quot;;\r\n        }else{\r\n            c.moveToNext();\r\n            return c.getString(1);\r\n            }\r\n        }\r\n\r\n\r\n    public String getMethodTypeById(int id){\r\n\r\n        SQLiteDatabase db = this.getReadableDatabase();\r\n        Cursor c = db.rawQuery(&quot;SELECT * FROM MethodType WHERE ?&quot;, new String[]{&quot;id =&quot; + id});\r\n\r\n        if(c.getCount() &gt; 0){\r\n\r\n            c.moveToFirst();\r\n            return c.getString(1);\r\n\r\n        }else{\r\n            return &quot;non existent&quot;;\r\n\r\n\r\n        }\r\n    }\r\n\r\n    public String getDifficulty(int id){\r\n        SQLiteDatabase db = this.getReadableDatabase();\r\n        Cursor c = db.rawQuery(&quot;SELECT * FROM Difficulty WHERE ?&quot;, new String[]{&quot;id =&quot; + id});\r\n\r\n        if(c.getCount() == 0){\r\n\r\n            return &quot;non existent&quot;;\r\n        }else{\r\n            c.moveToNext();\r\n            return c.getString(1);\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n    public int findIdByMethodType(String methodType){\r\n\r\n        String[] methArr = new String[]{&quot;tap_off&quot;,&quot;math&quot;,&quot;qr_barcode&quot;,&quot;location&quot;,&quot;sudoku&quot;,&quot;memory&quot;,&quot;passphrase&quot;};\r\n        for(int i = 0; i &lt; methArr.length; i++) {\r\n            if(methArr[i].equals(methodType)){\r\n                return i+1;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n\r\n    public int findIdByMethod(String method){\r\n        String[] meArr = new String[]{&quot;null&quot;,&quot;Addition&quot;,&quot;Subtraction&quot;,&quot;Multiplication&quot;,&quot;Division&quot;,&quot;Faculty (x!)&quot;,&quot;Root&quot;,&quot;Value for f(x)&quot;,&quot;Determine extrema of f(x)&quot;,&quot;Multiple choice questions&quot;,&quot;reach_radius&quot;,&quot;leave_radius&quot;};\r\n        for(int i = 0; i &lt; meArr.length; i++){\r\n            if(meArr[i].equals(method)){\r\n                return i+1;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n\r\n    public int findIdByDifficulty(String difficulty){\r\n        switch (difficulty) {\r\n            case &quot;Extremely easy&quot;:\r\n                return 1;\r\n            case &quot;Easy&quot;:\r\n                return 2;\r\n            case &quot;Middle&quot;:\r\n                return 3;\r\n            case &quot;Hard&quot;:\r\n                return 4;\r\n            case &quot;Extremely hard&quot;:\r\n                return 5;\r\n            default:\r\n                return -1;\r\n        }\r\n    }\r\n\r\n\r\n    public void addMath(String method, String difficulty){\r\n\r\n        SQLiteDatabase db = this.getWritableDatabase();\r\n        ContentValues cv = new ContentValues();\r\n\r\n        cv.put(&quot;method&quot;,method);\r\n        cv.put(&quot;difficulty&quot;,difficulty);\r\n        long res = db.insert(&quot;Mathdatabase&quot;, null, cv);\r\n        if(res == -1){\r\n            Toast.makeText(context, &quot;Inserting into Mathdatabase failed&quot;, Toast.LENGTH_SHORT).show();\r\n        }else{\r\n            Toast.makeText(context, &quot;Successfully added into Mathdatabase&quot;, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    public void addQRBar(String label, String decoded){\r\n        SQLiteDatabase db = this.getWritableDatabase();\r\n        ContentValues cv = new ContentValues();\r\n\r\n        cv.put(&quot;label&quot;, label);\r\n        cv.put(&quot;decoded&quot;, decoded);\r\n        long res = db.insert(&quot;QRBarcodedatabase&quot;, null, cv);\r\n        if(res == -1){\r\n            Toast.makeText(context, &quot;Inserting into QRBarcodedatabase failed&quot;, Toast.LENGTH_SHORT).show();\r\n        }else{\r\n            Toast.makeText(context, &quot;Successfully added into QRBarcodedatabase&quot;, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n    //        Locationdatabase latitude_int INTEGER, zero_point_latitude INTEGER, longitude_int INTEGER, zero_point_longitude INTEGER, radius_int INTEGER, zero_point_radius INTEGER, street TEXT)&quot;);\r\n\r\n    public long addLocation(int latitudeInt, int zeroPointLatitude, int longitudeInt, int zeroPointLongitude, int radiusInt, int zeroPointRadius, String street, String radiusMode){\r\n        SQLiteDatabase db = this.getWritableDatabase();\r\n        ContentValues cv = new ContentValues();\r\n\r\n        cv.put(&quot;latitude_int&quot;,latitudeInt);\r\n        cv.put(&quot;zero_point_latitude&quot;,zeroPointLatitude);\r\n        cv.put(&quot;longitude_int&quot;,longitudeInt);\r\n        cv.put(&quot;zero_point_longitude&quot;,zeroPointLongitude);\r\n        cv.put(&quot;radius_int&quot;,radiusInt);\r\n        cv.put(&quot;zero_point_radius&quot;,zeroPointRadius);\r\n        cv.put(&quot;street&quot;,street);\r\n        cv.put(&quot;radius_mode&quot;, radiusMode);\r\n        long res = db.insert(&quot;Locationdatabase&quot;, null, cv);\r\n        if(res == -1){\r\n            Toast.makeText(context, &quot;Inserting into Locationdatabase failed&quot;, Toast.LENGTH_SHORT).show();\r\n        }else{\r\n            Toast.makeText(context, &quot;Successfully added into Locationdatabase&quot;, Toast.LENGTH_SHORT).show();\r\n        }\r\n        return res;\r\n    }\r\n\r\n\r\n\r\n    public void editMethoddatabase(int queue_id, int method_type_id, int method_id, int difficulty_id, String label, int method_database_spec_id, int row_id){\r\n        SQLiteDatabase db = this.getWritableDatabase();\r\n        ContentValues cv = new ContentValues();\r\n\r\n        if(queue_id != -1) cv.put(&quot;queue_id&quot;, queue_id);\r\n        if(method_type_id != -1) cv.put(&quot;method_type_id&quot;, method_type_id);\r\n        if(method_id != -1) cv.put(&quot;method_id&quot;, method_id);\r\n        if(difficulty_id != -1) cv.put(&quot;difficulty_id&quot;, difficulty_id);\r\n        if(!Objects.equals(label,&quot;-1&quot;)) cv.put(&quot;label&quot;, label);\r\n        if(method_database_spec_id != -1) cv.put(&quot;method_database_specific_id&quot;, method_database_spec_id);\r\n\r\n        if (method_id == 1){\r\n            editMathdatabase(getMethodById(method_id), getDifficulty(difficulty_id), method_database_spec_id);\r\n        }\r\n\r\n        long result = db.update(&quot;Methoddatabase&quot;, cv, &quot;id=?&quot;, new String[]{String.valueOf(row_id)});\r\n        if(result == -1){\r\n            Toast.makeText(context, &quot;Failed to update Methoddatabase&quot;, Toast.LENGTH_SHORT).show();\r\n        }else{\r\n            Toast.makeText(context, &quot;Success updating Methoddatabase&quot;, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n\r\n\r\n    public void editMathdatabase(String method, String difficulty, int row_id){\r\n        SQLiteDatabase db = this.getWritableDatabase();\r\n        ContentValues c = new ContentValues();\r\n        if (!Objects.equals(method, &quot;&quot;)) c.put(&quot;method&quot;, method);\r\n        if (!Objects.equals(difficulty, &quot;&quot;)) c.put(&quot;difficulty&quot;, difficulty);\r\n\r\n        long r = db.update(&quot;Mathdatabase&quot;,c, &quot;id=?&quot;, new String[]{String.valueOf(row_id)});\r\n        if(r == -1){\r\n            Toast.makeText(context, &quot;Failed to update Mathdatabase&quot;, Toast.LENGTH_SHORT).show();\r\n        }else{\r\n            Toast.makeText(context, &quot;Success updating Mathdatabase&quot;, Toast.LENGTH_SHORT).show();\r\n        }\r\n\r\n    }\r\n\r\n\r\n    public void editLocation(int lat, int zerolat, int lon, int zerolon, int radius, int zeroradius, String street, String enter_leave, int row_id){\r\n        SQLiteDatabase db = this.getWritableDatabase();\r\n        ContentValues cv = new ContentValues();\r\n\r\n        int currlat, currzerolat, currlon, currzerolon, currradius, currzeroradius;\r\n        String currstreet, currenterleave;\r\n\r\n        Cursor c = getData(&quot;Locationdatabase&quot;);\r\n        if(c.getCount() &gt; 0) {\r\n            while(c.moveToNext()){\r\n                if(c.getInt(0) == row_id){\r\n\r\n                    currlat = c.getInt(1);\r\n                    currzerolat = c.getInt(2);\r\n                    currlon = c.getInt(3);\r\n                    currzerolon = c.getInt(4);\r\n                    currradius = c.getInt(5);\r\n                    currzeroradius = c.getInt(6);\r\n                    currstreet = c.getString(7);\r\n                    currenterleave = c.getString(8);\r\n\r\n                    if (lat != currlat) cv.put(&quot;latitude_int&quot;, lat);\r\n                    if (zerolat != currzerolat) cv.put(&quot;zero_point_latitude&quot;, zerolat);\r\n                    if (lon != currlon) cv.put(&quot;longitude_int&quot;, lon);\r\n                    if (zerolon != currzerolon) cv.put(&quot;zero_point_longitude&quot;, zerolon);\r\n                    if (radius != currradius) cv.put(&quot;radius_int&quot;, radius);\r\n                    if (zeroradius != currzeroradius) cv.put(&quot;zero_point_radius&quot;, zeroradius);\r\n                    if (!Objects.equals(street, currstreet)) cv.put(&quot;street&quot;, street);\r\n                    if (!Objects.equals(enter_leave,currenterleave)) cv.put(&quot;radius_mode&quot;, enter_leave);\r\n                }\r\n            }\r\n\r\n\r\n\r\n            long res = db.update(&quot;Locationdatabase&quot;, cv, &quot;id=?&quot;, new String[]{String.valueOf(row_id)});\r\n            if (res == -1) {\r\n                Toast.makeText(context, &quot;Failed to update Locationdatabase&quot;, Toast.LENGTH_SHORT).show();\r\n            } else {\r\n                Toast.makeText(context, &quot;Success updating Locationdatabase&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        }else{\r\n            Toast.makeText(context, &quot;how did you manage to even get here wtf&quot;, Toast.LENGTH_SHORT).show();\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    public Cursor getData(String database ){\r\n        SQLiteDatabase db = this.getReadableDatabase();\r\n        Cursor c = null;\r\n\r\n        if (db != null){\r\n        c = db.rawQuery(&quot;Select * from &quot;+database, null);\r\n        }\r\n        return c;\r\n    }\r\n\r\n    public Cursor execQuery(String sql, String[] selectionArgs){\r\n        SQLiteDatabase db = this.getWritableDatabase();\r\n        return db.rawQuery(sql, selectionArgs);\r\n\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nTo not confuse you: the alarm has a queue of methods to solve when turning off the alarm, methods as of now are settable for location(enter/leave radius), math tasks, scanning a qr/barcode, tapping off. I will implement a sudoku, memory and a typing your typephrase method. The Alarm should also be able to consist of different levels, so if you solve the first queue of methods, you can set x more method queues to come after that. Levels are not yet implemented, but will also be complicated when the ids are changing.\r\n\r\nDoes someone know, how i could change my code, so it wont get confused by deleting a method from the queue?\r\n","title":"Using multiple SQLite Databases in my android app project","body":"<p>so i am currently programming an alarm clock app for android, which i am still learning and i was wondering if i should make a DBHelper class for every database that i create, or how i can handle multiple tables pointing to each other by ids. It's problematic for me, because i populate a RecyclerView with data from said tables. Now problems start to arise, as soon as i try to delete data at runtime, the table ids are all primary key autoincrement, so if i delete any element, this will cause the id to not represent the row number of the database table, sadly autoincrement doesnt handle ids to decrease if an item in a row before them is deleted.</p>\n<p>At first i tried communicating the data for the alarms across multiple activities via sharedPreference, i wanted the data to persist if the app crashes for instance, so i switched to sqlite, i do have my DBHelper class, carrying all of the tables that i use:</p>\n<pre><code>package com.example.alarm;\n\nimport android.content.ContentValues;\nimport android.content.Context;\nimport android.database.Cursor;\nimport android.database.sqlite.SQLiteDatabase;\nimport android.database.sqlite.SQLiteOpenHelper;\nimport android.widget.Toast;\n\nimport java.util.Objects;\n\npublic class DBHelper extends SQLiteOpenHelper{\n    \n    Context context;\n\n    public DBHelper(Context context, String db) {\n        \n        super(context, db, null, 1);\n        this.context = context;\n    }\n\n    @Override\n    public void onCreate(SQLiteDatabase db) {\n        db.execSQL(&quot;create Table Alarmdatabase (id INTEGER primary key autoincrement, label TEXT, method_queue_id INTEGER, sound_path_id INTEGER, privilege_rights INTEGER, snoozable INTEGER, time_wake_up_hours INTEGER, time_wake_up_minutes INTEGER, days_schedule_id INTEGER, weeks_schedule_id INTEGER, check_awake INTEGER, alarm_level_table_id INTEGER)&quot;);\n        //every int representing a bool is -1 for false                         this is the id of the table and the item in it, for the corresponding method\n\n        db.execSQL(&quot;create Table Methoddatabase (id INTEGER primary key autoincrement, queue_id INTEGER, method_type_id INTEGER, method_id INTEGER, difficulty_id INTEGER, label TEXT, method_database_specific_id INTEGER)&quot;); //multiple rows with same queue_id are part of the same queue\n        db.execSQL(&quot;create Table Methodtype (id INTEGER primary key autoincrement, method_type TEXT)&quot;);\n        db.execSQL(&quot;create Table Method (id INTEGER primary key autoincrement, method TEXT)&quot;);\n        db.execSQL(&quot;create Table Difficulty (id INTEGER primary key autoincrement, difficulty TEXT)&quot;);\n\n        db.execSQL(&quot;create Table Alarmlevel (id INTEGER primary key autoincrement, level_id INTEGER, method_databse_queue_id INTEGER)&quot;); //multiple rows with the same level_id make up the different Alarmlevels, might add more attribs later\n\n        db.execSQL(&quot;create Table QRBarcodedatabase (label TEXT primary key, decoded TEXT)&quot;);\n        db.execSQL(&quot;create Table Mathdatabase (id INTEGER primary key autoincrement, method TEXT, difficulty TEXT)&quot;);\n        db.execSQL(&quot;create Table Locationdatabase (id INTEGER primary key autoincrement, latitude_int INTEGER, zero_point_latitude INTEGER, longitude_int INTEGER, zero_point_longitude INTEGER, radius_int INTEGER, zero_point_radius INTEGER, street TEXT, radius_mode TEXT)&quot;);\n        setupTablesForPreset(db);\n    }\n\n    private void setupTablesForPreset(SQLiteDatabase db) {\n\n\n        ContentValues cv = new ContentValues();\n\n        long res;\n        for(String type : new String[]{&quot;tap_off&quot;,&quot;math&quot;,&quot;qr_barcode&quot;,&quot;location&quot;,&quot;sudoku&quot;,&quot;memory&quot;,&quot;passphrase&quot;}) {\n            cv.put(&quot;method_type&quot;, type);\n            res = db.insert(&quot;Methodtype&quot;, null, cv);\n            if(res == -1){\n                Toast.makeText(context, &quot;Error setting up static Database \\&quot;Methodtype\\&quot;&quot;, Toast.LENGTH_SHORT).show();\n            }\n        }\n\n\n        cv = new ContentValues();\n        for(String type : new String[]{&quot;null&quot;,&quot;add&quot;,&quot;sub&quot;,&quot;mult&quot;,&quot;div&quot;,&quot;fac&quot;,&quot;root&quot;,&quot;value_fx&quot;,&quot;extrema_fx&quot;,&quot;multiple_choice&quot;,&quot;reach_radius&quot;,&quot;leave_radius&quot;}) {\n            cv.put(&quot;method&quot;, type);\n            res = db.insert(&quot;Method&quot;, null, cv);\n            if(res == -1){\n                Toast.makeText(context, &quot;Error setting up static Database \\&quot;Method\\&quot;&quot;, Toast.LENGTH_SHORT).show();\n            }\n        }\n\n\n        cv = new ContentValues();\n        for(String type : new String[]{&quot;ex_easy&quot;,&quot;easy&quot;,&quot;middle&quot;,&quot;hard&quot;,&quot;ex_hard&quot;}) {\n            cv.put(&quot;difficulty&quot;, type);\n            res = db.insert(&quot;Difficulty&quot;, null, cv);\n            if(res == -1){\n                Toast.makeText(context, &quot;Error setting up static Database \\&quot;Difficulty\\&quot;&quot;, Toast.LENGTH_SHORT).show();\n            }\n        }\n\n\n\n    }\n\n    @Override\n    public void onUpgrade(SQLiteDatabase db, int verOld, int verNew) {\n        db.execSQL(&quot;drop Table if exists Alarmdatabase&quot;);\n\n        db.execSQL(&quot;drop Table if exists Methoddatabase&quot;);\n        db.execSQL(&quot;drop Table if exists Methodtype&quot;);\n        db.execSQL(&quot;drop Table if exists Method&quot;);\n        db.execSQL(&quot;drop Table if exists Difficulty&quot;);\n\n        db.execSQL(&quot;drop Table if exists Alarmlevel&quot;);\n\n        db.execSQL(&quot;drop Table if exists QRBarcodedatabase&quot;);\n        db.execSQL(&quot;drop Table if exists Mathdatabase&quot;);\n        db.execSQL(&quot;drop Table if exists Locationdatabase&quot;);\n        onCreate(db);\n    }\n\n    //TODO: I don't need to handle SQLInjection, atleast for now, because sharing of settings is not supported as of now, so this would only harm the person itself, or be a nice niche feature lol\n    //(this might change in the future, so i will keep this todo in until publishing, so if i add that feature at any point, i'll know, that i have to take care of that.)\n\n\n    public void deleteRow(String table, int row_id){\n        SQLiteDatabase db = this.getWritableDatabase();\n        long res = db.delete(table, &quot;id=?&quot;, new String[]{String.valueOf(row_id+2)});\n        if(res ==0){\n            Toast.makeText(context, &quot;Failed deleting item: &quot; + res, Toast.LENGTH_SHORT).show();\n        }else {\n            Toast.makeText(context, &quot;Success deleting item: &quot; +res, Toast.LENGTH_SHORT).show();\n        }\n    }\n\n\n    public void deleteRow(String table, String label){\n        SQLiteDatabase db = this.getWritableDatabase();\n        long res = db.delete(table, &quot;label=?&quot;, new String[]{label});\n\n        if(res ==-1){\n            Toast.makeText(context, &quot;Failed deleting item&quot;, Toast.LENGTH_SHORT).show();\n        }else {\n            Toast.makeText(context, &quot;Success deleting item&quot;, Toast.LENGTH_SHORT).show();\n        }\n    }\n\n    public void addAlarm(String label, int methodQueueId, int soundPathId, boolean privilegeRights, boolean snoozable, int wakeUpTimeHours, int wakeUpTimeMinutes, int daysScheduleId, int weeksScheduleId, boolean checkAwake, int alarmLevelTableId){\n\n        SQLiteDatabase db = this.getWritableDatabase();\n        ContentValues cv = new ContentValues();\n\n        cv.put(&quot;label&quot;, label);\n        cv.put(&quot;method_queue_id&quot;,methodQueueId);\n        cv.put(&quot;sound_path_id&quot;,soundPathId);\n        if(privilegeRights){\n        cv.put(&quot;privilege_rights&quot;,1);}\n        else{\n            cv.put(&quot;privilege_rights&quot;, 0);}\n        if(snoozable){\n        cv.put(&quot;snoozable&quot;,1);}\n        else{\n            cv.put(&quot;snoozable&quot;,0);}\n        cv.put(&quot;time_wake_up_hours&quot;, wakeUpTimeHours);\n        cv.put(&quot;time_wake_up_minutes&quot;, wakeUpTimeMinutes);\n        cv.put(&quot;days_schedule_id&quot;,daysScheduleId);\n        cv.put(&quot;weeks_schedule_id&quot;,weeksScheduleId);\n        if(checkAwake){\n        cv.put(&quot;check_awake&quot;, 1);}else{\n            cv.put(&quot;check_awake&quot;, 0);}\n        cv.put(&quot;alarm_level_table_id&quot;,alarmLevelTableId);\n        long res = db.insert(&quot;Alarmdatabase&quot;, null, cv);\n        if(res == -1){\n            Toast.makeText(context, &quot;Inserting into Alarmdatabase failed&quot;, Toast.LENGTH_SHORT).show();\n        }else{\n            Toast.makeText(context, &quot;Successfully added into Alarmdatabase&quot;, Toast.LENGTH_SHORT).show();\n        }\n\n    }\n\n\n    public void addMethod(int queueID, int methodTypeId, int methodId, int difficultyId, String label, int methodDatabaseSpecificID){\n        SQLiteDatabase db = this.getWritableDatabase();\n        ContentValues cv = new ContentValues();\n\n        cv.put(&quot;queue_id&quot;,queueID);\n        cv.put(&quot;method_type_id&quot;,methodTypeId);\n        if(methodId != -1) cv.put(&quot;method_id&quot;,methodId);\n        if(difficultyId != -1) cv.put(&quot;difficulty_id&quot;,difficultyId);\n        if(!Objects.equals(label, &quot;-1&quot;)) cv.put(&quot;label&quot;,label);\n        cv.put(&quot;method_database_specific_id&quot;, methodDatabaseSpecificID);    //This is the id, that (if necessary) points to the specific data of the method database defined by method_type_id\n                                                                            //In easy words: if you need to look up the decoded string from qrcode method, this points to the id in the specific database, that has this info\n        long res = db.insert(&quot;Methoddatabase&quot;, null, cv);\n        if(res == -1){\n            Toast.makeText(context, &quot;Inserting into Methoddatabase failed&quot;, Toast.LENGTH_SHORT).show();\n        }else{\n            Toast.makeText(context, &quot;Successfully added into Methoddatabase&quot;, Toast.LENGTH_SHORT).show();\n        }\n    }\n\n\n\n    public String getMethodById(int id){\n        SQLiteDatabase db = this.getReadableDatabase();\n        Cursor c = db.rawQuery(&quot;SELECT * FROM Method WHERE ?&quot;, new String[]{&quot;id =&quot; + id});\n\n        if(c.getCount() == 0){\n\n            return &quot;non existent&quot;;\n        }else{\n            c.moveToNext();\n            return c.getString(1);\n            }\n        }\n\n\n    public String getMethodTypeById(int id){\n\n        SQLiteDatabase db = this.getReadableDatabase();\n        Cursor c = db.rawQuery(&quot;SELECT * FROM MethodType WHERE ?&quot;, new String[]{&quot;id =&quot; + id});\n\n        if(c.getCount() &gt; 0){\n\n            c.moveToFirst();\n            return c.getString(1);\n\n        }else{\n            return &quot;non existent&quot;;\n\n\n        }\n    }\n\n    public String getDifficulty(int id){\n        SQLiteDatabase db = this.getReadableDatabase();\n        Cursor c = db.rawQuery(&quot;SELECT * FROM Difficulty WHERE ?&quot;, new String[]{&quot;id =&quot; + id});\n\n        if(c.getCount() == 0){\n\n            return &quot;non existent&quot;;\n        }else{\n            c.moveToNext();\n            return c.getString(1);\n        }\n    }\n\n\n\n\n    public int findIdByMethodType(String methodType){\n\n        String[] methArr = new String[]{&quot;tap_off&quot;,&quot;math&quot;,&quot;qr_barcode&quot;,&quot;location&quot;,&quot;sudoku&quot;,&quot;memory&quot;,&quot;passphrase&quot;};\n        for(int i = 0; i &lt; methArr.length; i++) {\n            if(methArr[i].equals(methodType)){\n                return i+1;\n            }\n        }\n        return -1;\n    }\n\n    public int findIdByMethod(String method){\n        String[] meArr = new String[]{&quot;null&quot;,&quot;Addition&quot;,&quot;Subtraction&quot;,&quot;Multiplication&quot;,&quot;Division&quot;,&quot;Faculty (x!)&quot;,&quot;Root&quot;,&quot;Value for f(x)&quot;,&quot;Determine extrema of f(x)&quot;,&quot;Multiple choice questions&quot;,&quot;reach_radius&quot;,&quot;leave_radius&quot;};\n        for(int i = 0; i &lt; meArr.length; i++){\n            if(meArr[i].equals(method)){\n                return i+1;\n            }\n        }\n        return -1;\n    }\n\n    public int findIdByDifficulty(String difficulty){\n        switch (difficulty) {\n            case &quot;Extremely easy&quot;:\n                return 1;\n            case &quot;Easy&quot;:\n                return 2;\n            case &quot;Middle&quot;:\n                return 3;\n            case &quot;Hard&quot;:\n                return 4;\n            case &quot;Extremely hard&quot;:\n                return 5;\n            default:\n                return -1;\n        }\n    }\n\n\n    public void addMath(String method, String difficulty){\n\n        SQLiteDatabase db = this.getWritableDatabase();\n        ContentValues cv = new ContentValues();\n\n        cv.put(&quot;method&quot;,method);\n        cv.put(&quot;difficulty&quot;,difficulty);\n        long res = db.insert(&quot;Mathdatabase&quot;, null, cv);\n        if(res == -1){\n            Toast.makeText(context, &quot;Inserting into Mathdatabase failed&quot;, Toast.LENGTH_SHORT).show();\n        }else{\n            Toast.makeText(context, &quot;Successfully added into Mathdatabase&quot;, Toast.LENGTH_SHORT).show();\n        }\n    }\n\n    public void addQRBar(String label, String decoded){\n        SQLiteDatabase db = this.getWritableDatabase();\n        ContentValues cv = new ContentValues();\n\n        cv.put(&quot;label&quot;, label);\n        cv.put(&quot;decoded&quot;, decoded);\n        long res = db.insert(&quot;QRBarcodedatabase&quot;, null, cv);\n        if(res == -1){\n            Toast.makeText(context, &quot;Inserting into QRBarcodedatabase failed&quot;, Toast.LENGTH_SHORT).show();\n        }else{\n            Toast.makeText(context, &quot;Successfully added into QRBarcodedatabase&quot;, Toast.LENGTH_SHORT).show();\n        }\n    }\n    //        Locationdatabase latitude_int INTEGER, zero_point_latitude INTEGER, longitude_int INTEGER, zero_point_longitude INTEGER, radius_int INTEGER, zero_point_radius INTEGER, street TEXT)&quot;);\n\n    public long addLocation(int latitudeInt, int zeroPointLatitude, int longitudeInt, int zeroPointLongitude, int radiusInt, int zeroPointRadius, String street, String radiusMode){\n        SQLiteDatabase db = this.getWritableDatabase();\n        ContentValues cv = new ContentValues();\n\n        cv.put(&quot;latitude_int&quot;,latitudeInt);\n        cv.put(&quot;zero_point_latitude&quot;,zeroPointLatitude);\n        cv.put(&quot;longitude_int&quot;,longitudeInt);\n        cv.put(&quot;zero_point_longitude&quot;,zeroPointLongitude);\n        cv.put(&quot;radius_int&quot;,radiusInt);\n        cv.put(&quot;zero_point_radius&quot;,zeroPointRadius);\n        cv.put(&quot;street&quot;,street);\n        cv.put(&quot;radius_mode&quot;, radiusMode);\n        long res = db.insert(&quot;Locationdatabase&quot;, null, cv);\n        if(res == -1){\n            Toast.makeText(context, &quot;Inserting into Locationdatabase failed&quot;, Toast.LENGTH_SHORT).show();\n        }else{\n            Toast.makeText(context, &quot;Successfully added into Locationdatabase&quot;, Toast.LENGTH_SHORT).show();\n        }\n        return res;\n    }\n\n\n\n    public void editMethoddatabase(int queue_id, int method_type_id, int method_id, int difficulty_id, String label, int method_database_spec_id, int row_id){\n        SQLiteDatabase db = this.getWritableDatabase();\n        ContentValues cv = new ContentValues();\n\n        if(queue_id != -1) cv.put(&quot;queue_id&quot;, queue_id);\n        if(method_type_id != -1) cv.put(&quot;method_type_id&quot;, method_type_id);\n        if(method_id != -1) cv.put(&quot;method_id&quot;, method_id);\n        if(difficulty_id != -1) cv.put(&quot;difficulty_id&quot;, difficulty_id);\n        if(!Objects.equals(label,&quot;-1&quot;)) cv.put(&quot;label&quot;, label);\n        if(method_database_spec_id != -1) cv.put(&quot;method_database_specific_id&quot;, method_database_spec_id);\n\n        if (method_id == 1){\n            editMathdatabase(getMethodById(method_id), getDifficulty(difficulty_id), method_database_spec_id);\n        }\n\n        long result = db.update(&quot;Methoddatabase&quot;, cv, &quot;id=?&quot;, new String[]{String.valueOf(row_id)});\n        if(result == -1){\n            Toast.makeText(context, &quot;Failed to update Methoddatabase&quot;, Toast.LENGTH_SHORT).show();\n        }else{\n            Toast.makeText(context, &quot;Success updating Methoddatabase&quot;, Toast.LENGTH_SHORT).show();\n        }\n    }\n\n\n\n    public void editMathdatabase(String method, String difficulty, int row_id){\n        SQLiteDatabase db = this.getWritableDatabase();\n        ContentValues c = new ContentValues();\n        if (!Objects.equals(method, &quot;&quot;)) c.put(&quot;method&quot;, method);\n        if (!Objects.equals(difficulty, &quot;&quot;)) c.put(&quot;difficulty&quot;, difficulty);\n\n        long r = db.update(&quot;Mathdatabase&quot;,c, &quot;id=?&quot;, new String[]{String.valueOf(row_id)});\n        if(r == -1){\n            Toast.makeText(context, &quot;Failed to update Mathdatabase&quot;, Toast.LENGTH_SHORT).show();\n        }else{\n            Toast.makeText(context, &quot;Success updating Mathdatabase&quot;, Toast.LENGTH_SHORT).show();\n        }\n\n    }\n\n\n    public void editLocation(int lat, int zerolat, int lon, int zerolon, int radius, int zeroradius, String street, String enter_leave, int row_id){\n        SQLiteDatabase db = this.getWritableDatabase();\n        ContentValues cv = new ContentValues();\n\n        int currlat, currzerolat, currlon, currzerolon, currradius, currzeroradius;\n        String currstreet, currenterleave;\n\n        Cursor c = getData(&quot;Locationdatabase&quot;);\n        if(c.getCount() &gt; 0) {\n            while(c.moveToNext()){\n                if(c.getInt(0) == row_id){\n\n                    currlat = c.getInt(1);\n                    currzerolat = c.getInt(2);\n                    currlon = c.getInt(3);\n                    currzerolon = c.getInt(4);\n                    currradius = c.getInt(5);\n                    currzeroradius = c.getInt(6);\n                    currstreet = c.getString(7);\n                    currenterleave = c.getString(8);\n\n                    if (lat != currlat) cv.put(&quot;latitude_int&quot;, lat);\n                    if (zerolat != currzerolat) cv.put(&quot;zero_point_latitude&quot;, zerolat);\n                    if (lon != currlon) cv.put(&quot;longitude_int&quot;, lon);\n                    if (zerolon != currzerolon) cv.put(&quot;zero_point_longitude&quot;, zerolon);\n                    if (radius != currradius) cv.put(&quot;radius_int&quot;, radius);\n                    if (zeroradius != currzeroradius) cv.put(&quot;zero_point_radius&quot;, zeroradius);\n                    if (!Objects.equals(street, currstreet)) cv.put(&quot;street&quot;, street);\n                    if (!Objects.equals(enter_leave,currenterleave)) cv.put(&quot;radius_mode&quot;, enter_leave);\n                }\n            }\n\n\n\n            long res = db.update(&quot;Locationdatabase&quot;, cv, &quot;id=?&quot;, new String[]{String.valueOf(row_id)});\n            if (res == -1) {\n                Toast.makeText(context, &quot;Failed to update Locationdatabase&quot;, Toast.LENGTH_SHORT).show();\n            } else {\n                Toast.makeText(context, &quot;Success updating Locationdatabase&quot;, Toast.LENGTH_SHORT).show();\n            }\n        }else{\n            Toast.makeText(context, &quot;how did you manage to even get here wtf&quot;, Toast.LENGTH_SHORT).show();\n        }\n\n    }\n\n\n\n\n\n    public Cursor getData(String database ){\n        SQLiteDatabase db = this.getReadableDatabase();\n        Cursor c = null;\n\n        if (db != null){\n        c = db.rawQuery(&quot;Select * from &quot;+database, null);\n        }\n        return c;\n    }\n\n    public Cursor execQuery(String sql, String[] selectionArgs){\n        SQLiteDatabase db = this.getWritableDatabase();\n        return db.rawQuery(sql, selectionArgs);\n\n    }\n\n}\n\n</code></pre>\n<p>To not confuse you: the alarm has a queue of methods to solve when turning off the alarm, methods as of now are settable for location(enter/leave radius), math tasks, scanning a qr/barcode, tapping off. I will implement a sudoku, memory and a typing your typephrase method. The Alarm should also be able to consist of different levels, so if you solve the first queue of methods, you can set x more method queues to come after that. Levels are not yet implemented, but will also be complicated when the ids are changing.</p>\n<p>Does someone know, how i could change my code, so it wont get confused by deleting a method from the queue?</p>\n"},{"tags":["java","server","minecraft"],"owner":{"account_id":26153962,"reputation":1,"user_id":19841472,"display_name":"Mr. Meh Crawley"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1681076287,"answer_count":0,"score":0,"last_activity_date":1681075807,"creation_date":1681075807,"question_id":75972970,"body_markdown":"Recently I tried to upgrade my Minecraft server to a newer version of the game, when I ran it it gave me this error:\r\n`Error: LinkageError occurred while loading main class net.minecraft.bundler.Main\r\n        java.lang.UnsupportedClassVersionError: net/minecraft/bundler/Main has been compiled by a more recent version of the Java Runtime (class file version 61.0), this version of the Java Runtime only recognizes class file versions up to 55.0`\r\n\r\nI tried upgrading and downgrading my java version expecting it to fix the problem but nothing seems to work.","title":"java.lang.UnsupportedClassVersionError for a Minecraft Server","body":"<p>Recently I tried to upgrade my Minecraft server to a newer version of the game, when I ran it it gave me this error:\n<code>Error: LinkageError occurred while loading main class net.minecraft.bundler.Main java.lang.UnsupportedClassVersionError: net/minecraft/bundler/Main has been compiled by a more recent version of the Java Runtime (class file version 61.0), this version of the Java Runtime only recognizes class file versions up to 55.0</code></p>\n<p>I tried upgrading and downgrading my java version expecting it to fix the problem but nothing seems to work.</p>\n"},{"tags":["java","spring-boot","spring-security"],"owner":{"account_id":27226326,"reputation":43,"user_id":20754780,"display_name":"tsavaph"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1681075322,"creation_date":1681075322,"question_id":75972936,"body_markdown":"Is it possible to redirect to &quot;/login&quot; when access to &quot;/design&quot;, &quot;/orders&quot; without USER role and receive 401 HTTP error when access to &quot;/api/**&quot; unauthentificated? I use Spring Boot 2.7.10.\r\n\r\nIn code below it gives 401 for both cases. If I remove\r\n`.exceptionHandling(configurer -&gt; configurer.authenticationEntryPoint(new HttpStatusEntryPoint(HttpStatus.UNAUTHORIZED)))` it redirects for both cases.\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        http\r\n                .csrf()\r\n                .and()\r\n                .authorizeHttpRequests()\r\n                .mvcMatchers(&quot;/api/**&quot;).authenticated()\r\n                .mvcMatchers(&quot;/design&quot;, &quot;/orders&quot;).hasRole(&quot;USER&quot;)\r\n                .anyRequest().permitAll()\r\n                .and()\r\n                .exceptionHandling(configurer -&gt; configurer\r\n                        .authenticationEntryPoint(new HttpStatusEntryPoint(HttpStatus.UNAUTHORIZED))\r\n                )\r\n                .formLogin(\r\n                        form -&gt; form\r\n                                .loginPage(&quot;/login&quot;)\r\n                                .loginProcessingUrl(&quot;/login&quot;)\r\n                                .defaultSuccessUrl(&quot;/design&quot;)\r\n                                .permitAll()\r\n                ).logout(\r\n                        logout -&gt; logout\r\n                                .logoutRequestMatcher(new AntPathRequestMatcher(&quot;/logout&quot;))\r\n                                .permitAll()\r\n                );\r\n        return http.build();\r\n    }\r\n","title":"Is it possible to get redirect and 401 HTTP behavior in security filter chain?","body":"<p>Is it possible to redirect to &quot;/login&quot; when access to &quot;/design&quot;, &quot;/orders&quot; without USER role and receive 401 HTTP error when access to &quot;/api/**&quot; unauthentificated? I use Spring Boot 2.7.10.</p>\n<p>In code below it gives 401 for both cases. If I remove\n<code>.exceptionHandling(configurer -&gt; configurer.authenticationEntryPoint(new HttpStatusEntryPoint(HttpStatus.UNAUTHORIZED)))</code> it redirects for both cases.</p>\n<pre><code>@Bean\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n    http\n            .csrf()\n            .and()\n            .authorizeHttpRequests()\n            .mvcMatchers(&quot;/api/**&quot;).authenticated()\n            .mvcMatchers(&quot;/design&quot;, &quot;/orders&quot;).hasRole(&quot;USER&quot;)\n            .anyRequest().permitAll()\n            .and()\n            .exceptionHandling(configurer -&gt; configurer\n                    .authenticationEntryPoint(new HttpStatusEntryPoint(HttpStatus.UNAUTHORIZED))\n            )\n            .formLogin(\n                    form -&gt; form\n                            .loginPage(&quot;/login&quot;)\n                            .loginProcessingUrl(&quot;/login&quot;)\n                            .defaultSuccessUrl(&quot;/design&quot;)\n                            .permitAll()\n            ).logout(\n                    logout -&gt; logout\n                            .logoutRequestMatcher(new AntPathRequestMatcher(&quot;/logout&quot;))\n                            .permitAll()\n            );\n    return http.build();\n}\n</code></pre>\n"},{"tags":["java","node.js","android-security","trustmanager","hostname-verifier"],"owner":{"account_id":28259878,"reputation":1,"user_id":21604774,"display_name":"mrBee74"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":481,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681074968,"creation_date":1681074968,"question_id":75972911,"body_markdown":"I made an app where you can login and do some things. The problem is in the login: when it send a request to my API, it throws an error: `java.security.cert.CertPathValidatorException: Trust anchor for certification path not found. Android 2.3` but the SSL is working (I had to use ZeroSSL). For a temp fix, I had to accept all SSL certificates. All this was working until I uploaded the app to Google Play Console where Google said that there were vulnerabilities:\r\nTrustManager and HostnameVerifier.\r\n\r\nNow the question is: why is the app throwing the error? The SSL is working everywhere, only in the app is not working. How can I fix so I can upload to Google Play Store?\r\n\r\n\r\nThe code in the login java file is the following:\r\n`HttpsTrustManager.allowAllSSL();\r\n                // Construct the URL with the GET parameters\r\n                URL urlObj = new URL(url + &quot;?email=&quot; + username + &quot;&amp;password=&quot; + password + &quot;&amp;hwid=&quot; + hwid);\r\n\r\n                // Open a connection to the URL\r\n                HttpURLConnection con = (HttpURLConnection) urlObj.openConnection();\r\n\r\n                // Set the request method to GET\r\n                con.setRequestMethod(&quot;GET&quot;);\r\n\r\n                // Get the response code\r\n                int responseCode = con.getResponseCode();\r\n                System.out.println(&quot;Response Code : &quot; + responseCode);\r\n\r\n                // Read the response from the server\r\n                BufferedReader in = new BufferedReader(new InputStreamReader(con.getInputStream()));\r\n                String inputLine;\r\n                StringBuffer response = new StringBuffer();\r\n\r\n                while ((inputLine = in.readLine()) != null) {\r\n                    response.append(inputLine);\r\n                }\r\n                in.close();\r\n\r\n                // Extract the &quot;status&quot; parameter from the response JSON\r\n                JSONObject jresponse = null;\r\n                try {\r\n                    jresponse = new JSONObject(response.toString());\r\n                } catch (JSONException e) {\r\n                    e.printStackTrace();\r\n                }\r\n                String status = null;\r\n                try {\r\n                    status = jresponse.getString(&quot;status&quot;);\r\n                } catch (JSONException e) {\r\n                    e.printStackTrace();\r\n                }\r\n                if (status.equals(&quot;success&quot;)) {\r\n                    userLogged =\r\n                            new LoggedInUser(\r\n                                    java.util.UUID.randomUUID().toString(),\r\n                                    username);\r\n                    return new Result.Success&lt;&gt;(userLogged);\r\n\r\n                } else if (status.equals(&quot;error&quot;)) {\r\n                    try {\r\n                        return new Result.Error(new IOException(jresponse.getString(&quot;message&quot;)));\r\n                    } catch (JSONException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n\r\n}`\r\n\r\n\r\nAnd the &quot;allowAllSSL&quot; is from there: https://stackoverflow.com/questions/33084855/way-to-ignore-ssl-certificate-using-httpsurlconnection\r\n\r\nI double checked the validity of the SSL, but from my side everything is fine. The SSL is issued from ZeroSSL. The api is using NodeJS and .cert files to add the certificate to the express server.","title":"&quot;java.security.cert.CertPathValidatorException: Trust anchor for certification path not found&quot; while SSL is valid","body":"<p>I made an app where you can login and do some things. The problem is in the login: when it send a request to my API, it throws an error: <code>java.security.cert.CertPathValidatorException: Trust anchor for certification path not found. Android 2.3</code> but the SSL is working (I had to use ZeroSSL). For a temp fix, I had to accept all SSL certificates. All this was working until I uploaded the app to Google Play Console where Google said that there were vulnerabilities:\nTrustManager and HostnameVerifier.</p>\n<p>Now the question is: why is the app throwing the error? The SSL is working everywhere, only in the app is not working. How can I fix so I can upload to Google Play Store?</p>\n<p>The code in the login java file is the following:\n`HttpsTrustManager.allowAllSSL();\n// Construct the URL with the GET parameters\nURL urlObj = new URL(url + &quot;?email=&quot; + username + &quot;&amp;password=&quot; + password + &quot;&amp;hwid=&quot; + hwid);</p>\n<pre><code>            // Open a connection to the URL\n            HttpURLConnection con = (HttpURLConnection) urlObj.openConnection();\n\n            // Set the request method to GET\n            con.setRequestMethod(&quot;GET&quot;);\n\n            // Get the response code\n            int responseCode = con.getResponseCode();\n            System.out.println(&quot;Response Code : &quot; + responseCode);\n\n            // Read the response from the server\n            BufferedReader in = new BufferedReader(new InputStreamReader(con.getInputStream()));\n            String inputLine;\n            StringBuffer response = new StringBuffer();\n\n            while ((inputLine = in.readLine()) != null) {\n                response.append(inputLine);\n            }\n            in.close();\n\n            // Extract the &quot;status&quot; parameter from the response JSON\n            JSONObject jresponse = null;\n            try {\n                jresponse = new JSONObject(response.toString());\n            } catch (JSONException e) {\n                e.printStackTrace();\n            }\n            String status = null;\n            try {\n                status = jresponse.getString(&quot;status&quot;);\n            } catch (JSONException e) {\n                e.printStackTrace();\n            }\n            if (status.equals(&quot;success&quot;)) {\n                userLogged =\n                        new LoggedInUser(\n                                java.util.UUID.randomUUID().toString(),\n                                username);\n                return new Result.Success&lt;&gt;(userLogged);\n\n            } else if (status.equals(&quot;error&quot;)) {\n                try {\n                    return new Result.Error(new IOException(jresponse.getString(&quot;message&quot;)));\n                } catch (JSONException e) {\n                    e.printStackTrace();\n                }\n            }\n</code></pre>\n<p>}`</p>\n<p>And the &quot;allowAllSSL&quot; is from there: <a href=\"https://stackoverflow.com/questions/33084855/way-to-ignore-ssl-certificate-using-httpsurlconnection\">way to Ignore ssl certificate using HttpsURLConnection</a></p>\n<p>I double checked the validity of the SSL, but from my side everything is fine. The SSL is issued from ZeroSSL. The api is using NodeJS and .cert files to add the certificate to the express server.</p>\n"},{"tags":["java","spring","api","port","mockserver"],"comments":[{"owner":{"account_id":24109083,"reputation":150,"user_id":18079889,"display_name":"Mohammed Fataka"},"score":0,"creation_date":1681064323,"post_id":75972072,"comment_id":133995237,"body_markdown":"can you show your plugin import for mock server? and its configurations?","body":"can you show your plugin import for mock server? and its configurations?"},{"owner":{"account_id":17844913,"reputation":57,"user_id":12961980,"display_name":"Brendan Ahern"},"score":0,"creation_date":1681065041,"post_id":75972072,"comment_id":133995337,"body_markdown":"@MohammedFataka added now","body":"@MohammedFataka added now"},{"owner":{"account_id":24109083,"reputation":150,"user_id":18079889,"display_name":"Mohammed Fataka"},"score":0,"creation_date":1681065352,"post_id":75972072,"comment_id":133995390,"body_markdown":"add how do you run mockServer? what is the command do you use for testing ? e.g `mvn mockserver:run` is command to run mock server! are you using it?","body":"add how do you run mockServer? what is the command do you use for testing ? e.g <code>mvn mockserver:run</code> is command to run mock server! are you using it?"},{"owner":{"account_id":17844913,"reputation":57,"user_id":12961980,"display_name":"Brendan Ahern"},"score":0,"creation_date":1681065549,"post_id":75972072,"comment_id":133995410,"body_markdown":"I dont run a command, I just run the junit test, that builds and runs the spring project and runs the junit and immedity fails because it cant connect","body":"I dont run a command, I just run the junit test, that builds and runs the spring project and runs the junit and immedity fails because it cant connect"}],"answers":[{"tags":[],"owner":{"account_id":24109083,"reputation":150,"user_id":18079889,"display_name":"Mohammed Fataka"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681074540,"creation_date":1681074540,"answer_id":75972881,"question_id":75972072,"body_markdown":"the reason it is failing is you do not start the mock server and upon test, it will fail because there is nothing started at that port, I&#39;m assuming you want it to automatically start server before the test, thus there are two options:\r\n\r\nfirst: configure test task to be dependent of ```moctserver:run``` task\r\nsecond: when running test task before running a test task run a mock server.\r\n\r\ncheck [official docs](https://www.mock-server.com/mock_server/running_mock_server.html) for more info ","title":"Mockserver cannot connect to any port","body":"<p>the reason it is failing is you do not start the mock server and upon test, it will fail because there is nothing started at that port, I'm assuming you want it to automatically start server before the test, thus there are two options:</p>\n<p>first: configure test task to be dependent of <code>moctserver:run</code> task\nsecond: when running test task before running a test task run a mock server.</p>\n<p>check <a href=\"https://www.mock-server.com/mock_server/running_mock_server.html\" rel=\"nofollow noreferrer\">official docs</a> for more info</p>\n"}],"owner":{"account_id":17844913,"reputation":57,"user_id":12961980,"display_name":"Brendan Ahern"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":626,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681074540,"creation_date":1681063384,"question_id":75972072,"body_markdown":"Im using a mockserver to test api requests.\r\n\r\nThe mockserver wont start.\r\n\r\n\r\nThis is my code\r\n\r\n    @SpringBootTest\r\n    class RestApiMetaDataApplicationTests {\r\n        private ClientAndServer mockServer;\r\n    \r\n        @BeforeClass\r\n        public void startServer() throws Exception {\r\n            mockServer = startClientAndServer(1080);\r\n        }\r\n     \r\n        @AfterClass \r\n        public void stopServer() { \r\n            mockServer.stop();\r\n            \r\n        }\r\n        \r\n      \r\n        @Test\r\n        public void shouldReturnTrack() throws Exception {\r\n            String isrc = &quot;TEST1234560000&quot;;\r\n            String responseBody = &quot;{\\&quot;id\\&quot;: \\&quot;1234\\&quot;,\\&quot;name\\&quot;: \\&quot;Some new track!\\&quot;,\\&quot;duration_ms\\&quot;: 12000000}&quot;;\r\n    \r\n            new MockServerClient(&quot;localhost&quot;, 1080)\r\n                .when(\r\n                    request()\r\n                        .withMethod(&quot;GET&quot;)\r\n                        .withPath(&quot;/codechallenge/createTrack/&quot; + isrc)\r\n                )\r\n                .respond(\r\n                response()\r\n                    .withStatusCode(200)\r\n                    .withBody(responseBody)\r\n                    .withHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\r\n            );\r\n\r\n        HttpClient httpClient = HttpClient.newHttpClient();\r\n        HttpRequest httpRequest = HttpRequest.newBuilder()\r\n            .GET()\r\n            .uri(URI.create(&quot;http://localhost:1080/codechallenge/createTrack/&quot; + isrc))\r\n            .header(&quot;Content-Type&quot;, &quot;application/json&quot;)\r\n            .build();\r\n        HttpResponse&lt;String&gt; httpResponse = httpClient.send(httpRequest, HttpResponse.BodyHandlers.ofString());\r\n        String response = httpResponse.body();\r\n\r\n        assertEquals(responseBody, response);\r\n        assertEquals(200, httpResponse.statusCode());\r\n    }}\r\n\r\nThere is nothing running on port 1080 and I have tried other ports and none of them work.\r\n\r\nI have found this thread on Github of other people encountering the same issue but none of the solutions offered have worked for me\r\n\r\n[link to github][1]\r\n\r\n\r\nThe dependencies I am using are\r\n\r\n    \t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.mock-server&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mockserver-netty&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.11.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.mock-server&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mockserver-client-java&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.11.2&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\nThis is some of the stacktrace\r\n\r\n    org.mockserver.client.SocketConnectionException: Unable to connect to socket localhost/127.0.0.1:1080\r\n\tat org.mockserver.client.NettyHttpClient.sendRequest(NettyHttpClient.java:180)\r\n\tat org.mockserver.client.MockServerClient.sendRequest(MockServerClient.java:211)\r\n\tat org.mockserver.client.MockServerClient.sendRequest(MockServerClient.java:244)\r\n\tat org.mockserver.client.MockServerClient.upsert(MockServerClient.java:1109)\r\n\tat org.mockserver.client.ForwardChainExpectation.respond(ForwardChainExpectation.java:50)\r\n\tat net.codejava.song.RestApiMetaDataApplicationTests.shouldReturnTrack(RestApiMetaDataApplicationTests.java:64)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)\r\n\tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)\r\n\tat\r\n\r\n\r\nadded plugin import for mockserver\r\n\r\n    &lt;plugin&gt;\r\n    \t\t\t&lt;groupId&gt;org.mock-server&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;mockserver-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;3.10.8&lt;/version&gt;\r\n    \t\t\t&lt;configuration&gt;\r\n    \t\t\t\t&lt;serverPort&gt;1080&lt;/serverPort&gt;\r\n    \t\t\t\t&lt;proxyPort&gt;1090&lt;/proxyPort&gt;\r\n    \t\t\t\t&lt;logLevel&gt;DEBUG&lt;/logLevel&gt;\r\n    \t\t\t\t&lt;initializationClass&gt;org.mockserver.maven.ExampleInitializationClass&lt;/initializationClass&gt;\r\n    \t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;executions&gt;\r\n    \t\t\t\t&lt;execution&gt;\r\n    \t\t\t\t\t&lt;id&gt;process-test-classes&lt;/id&gt;\r\n    \t\t\t\t\t&lt;phase&gt;process-test-classes&lt;/phase&gt;\r\n    \t\t\t\t\t&lt;goals&gt;\r\n    \t\t\t\t\t\t&lt;goal&gt;start&lt;/goal&gt;\r\n    \t\t\t\t\t&lt;/goals&gt;\r\n    \t\t\t\t&lt;/execution&gt;\r\n    \t\t\t\t&lt;execution&gt;\r\n    \t\t\t\t\t&lt;id&gt;verify&lt;/id&gt;\r\n    \t\t\t\t\t&lt;phase&gt;verify&lt;/phase&gt;\r\n    \t\t\t\t\t&lt;goals&gt;\r\n    \t\t\t\t\t\t&lt;goal&gt;stop&lt;/goal&gt;\r\n    \t\t\t\t\t&lt;/goals&gt;\r\n    \t\t\t\t&lt;/execution&gt;\r\n    \t\t\t&lt;/executions&gt;\r\n    \t\t&lt;/plugin&gt;\r\n\r\n  [1]: https://github.com/mock-server/mockserver/issues/498https://","title":"Mockserver cannot connect to any port","body":"<p>Im using a mockserver to test api requests.</p>\n<p>The mockserver wont start.</p>\n<p>This is my code</p>\n<pre><code>@SpringBootTest\nclass RestApiMetaDataApplicationTests {\n    private ClientAndServer mockServer;\n\n    @BeforeClass\n    public void startServer() throws Exception {\n        mockServer = startClientAndServer(1080);\n    }\n \n    @AfterClass \n    public void stopServer() { \n        mockServer.stop();\n        \n    }\n    \n  \n    @Test\n    public void shouldReturnTrack() throws Exception {\n        String isrc = &quot;TEST1234560000&quot;;\n        String responseBody = &quot;{\\&quot;id\\&quot;: \\&quot;1234\\&quot;,\\&quot;name\\&quot;: \\&quot;Some new track!\\&quot;,\\&quot;duration_ms\\&quot;: 12000000}&quot;;\n\n        new MockServerClient(&quot;localhost&quot;, 1080)\n            .when(\n                request()\n                    .withMethod(&quot;GET&quot;)\n                    .withPath(&quot;/codechallenge/createTrack/&quot; + isrc)\n            )\n            .respond(\n            response()\n                .withStatusCode(200)\n                .withBody(responseBody)\n                .withHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\n        );\n\n    HttpClient httpClient = HttpClient.newHttpClient();\n    HttpRequest httpRequest = HttpRequest.newBuilder()\n        .GET()\n        .uri(URI.create(&quot;http://localhost:1080/codechallenge/createTrack/&quot; + isrc))\n        .header(&quot;Content-Type&quot;, &quot;application/json&quot;)\n        .build();\n    HttpResponse&lt;String&gt; httpResponse = httpClient.send(httpRequest, HttpResponse.BodyHandlers.ofString());\n    String response = httpResponse.body();\n\n    assertEquals(responseBody, response);\n    assertEquals(200, httpResponse.statusCode());\n}}\n</code></pre>\n<p>There is nothing running on port 1080 and I have tried other ports and none of them work.</p>\n<p>I have found this thread on Github of other people encountering the same issue but none of the solutions offered have worked for me</p>\n<p><a href=\"https://github.com/mock-server/mockserver/issues/498https://\" rel=\"nofollow noreferrer\">link to github</a></p>\n<p>The dependencies I am using are</p>\n<pre><code>        &lt;dependency&gt;\n        &lt;groupId&gt;org.mock-server&lt;/groupId&gt;\n        &lt;artifactId&gt;mockserver-netty&lt;/artifactId&gt;\n        &lt;version&gt;5.11.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.mock-server&lt;/groupId&gt;\n        &lt;artifactId&gt;mockserver-client-java&lt;/artifactId&gt;\n        &lt;version&gt;5.11.2&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>This is some of the stacktrace</p>\n<pre><code>org.mockserver.client.SocketConnectionException: Unable to connect to socket localhost/127.0.0.1:1080\nat org.mockserver.client.NettyHttpClient.sendRequest(NettyHttpClient.java:180)\nat org.mockserver.client.MockServerClient.sendRequest(MockServerClient.java:211)\nat org.mockserver.client.MockServerClient.sendRequest(MockServerClient.java:244)\nat org.mockserver.client.MockServerClient.upsert(MockServerClient.java:1109)\nat org.mockserver.client.ForwardChainExpectation.respond(ForwardChainExpectation.java:50)\nat net.codejava.song.RestApiMetaDataApplicationTests.shouldReturnTrack(RestApiMetaDataApplicationTests.java:64)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.base/java.lang.reflect.Method.invoke(Method.java:568)\nat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)\nat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\nat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\nat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)\nat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)\nat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)\nat\n</code></pre>\n<p>added plugin import for mockserver</p>\n<pre><code>&lt;plugin&gt;\n            &lt;groupId&gt;org.mock-server&lt;/groupId&gt;\n            &lt;artifactId&gt;mockserver-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.10.8&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;serverPort&gt;1080&lt;/serverPort&gt;\n                &lt;proxyPort&gt;1090&lt;/proxyPort&gt;\n                &lt;logLevel&gt;DEBUG&lt;/logLevel&gt;\n                &lt;initializationClass&gt;org.mockserver.maven.ExampleInitializationClass&lt;/initializationClass&gt;\n            &lt;/configuration&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;process-test-classes&lt;/id&gt;\n                    &lt;phase&gt;process-test-classes&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;start&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;verify&lt;/id&gt;\n                    &lt;phase&gt;verify&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;stop&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n</code></pre>\n"},{"tags":["java","algorithm","minimax"],"comments":[{"owner":{"account_id":18698793,"reputation":3,"user_id":13631448,"display_name":"Sothey Sean"},"score":1,"creation_date":1602907349,"post_id":64398538,"comment_id":113875049,"body_markdown":"@Emma I found that too, but I can&#39;t incorporate into the existing code because it&#39;s different way of implementation","body":"@Emma I found that too, but I can&#39;t incorporate into the existing code because it&#39;s different way of implementation"},{"owner":{"account_id":11490714,"reputation":95,"user_id":8421777,"display_name":"a regular coder"},"score":0,"creation_date":1602910452,"post_id":64398538,"comment_id":113875419,"body_markdown":"i suggest creating the program in console first to simplify creating the game logic before creating a GUI program for that. have you tried looking at simpler versions of minimax first before you tried checkers? try creating a tic-tac-toe minimax program to understand the logic behind them before going straight into checkers. here is a link to get you started. https://stackabuse.com/minimax-and-alpha-beta-pruning-in-python/","body":"i suggest creating the program in console first to simplify creating the game logic before creating a GUI program for that. have you tried looking at simpler versions of minimax first before you tried checkers? try creating a tic-tac-toe minimax program to understand the logic behind them before going straight into checkers. here is a link to get you started. <a href=\"https://stackabuse.com/minimax-and-alpha-beta-pruning-in-python/\" rel=\"nofollow noreferrer\">stackabuse.com/minimax-and-alpha-beta-pruning-in-python</a>"},{"owner":{"account_id":18698793,"reputation":3,"user_id":13631448,"display_name":"Sothey Sean"},"score":0,"creation_date":1602912032,"post_id":64398538,"comment_id":113875614,"body_markdown":"The game GUI is available here. \nhttps://github.com/seansothey/MyProject/blob/master/Project3_Fall2020.zip","body":"The game GUI is available here.  <a href=\"https://github.com/seansothey/MyProject/blob/master/Project3_Fall2020.zip\" rel=\"nofollow noreferrer\">github.com/seansothey/MyProject/blob/master/&hellip;</a>"},{"owner":{"account_id":16899495,"reputation":191,"user_id":12221284,"display_name":"moeux"},"score":0,"creation_date":1602923136,"post_id":64398538,"comment_id":113877470,"body_markdown":"I&#39;m not quite sure how to implement it in Checkers, but I&#39;ve done it in TicTacToe. So I&#39;m hoping this might just give you an idea.\nWhat I did was loop through every move possible and checking each move with a method returning `1` if X won, returning `-1` if O won and returning `0` if it&#39;s a tie.\nSo you could loop through every move, handle the captured pieces and repeat this via recursion.","body":"I&#39;m not quite sure how to implement it in Checkers, but I&#39;ve done it in TicTacToe. So I&#39;m hoping this might just give you an idea. What I did was loop through every move possible and checking each move with a method returning <code>1</code> if X won, returning <code>-1</code> if O won and returning <code>0</code> if it&#39;s a tie. So you could loop through every move, handle the captured pieces and repeat this via recursion."}],"owner":{"account_id":18698793,"reputation":3,"user_id":13631448,"display_name":"Sothey Sean"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1368,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681073816,"creation_date":1602902836,"question_id":64398538,"body_markdown":"Here&#39;s the code so far, required to add Minimax algorithm (function) below, just before the main class. \r\nI was trying to understand this pseudocode, so I can apply to my case. Unfortunately, I couldn&#39;t really understand.\r\n\r\n    function minimax(node, depth, maximizingPlayer) is\r\n    if depth = 0 or node is a terminal node then\r\n    return the heuristic value of node\r\n    if maximizingPlayer then\r\n    value := \r\n    for each child of node do\r\n    value := max(value, minimax(child, depth  1, FALSE))\r\n    return value\r\n    else (* minimizing player *)\r\n    value := +\r\n    for each child of node do\r\n    value := min(value, minimax(child, depth  1, TRUE))\r\n    return value\r\n\r\n```\r\nimport java.awt.*;\r\nimport javax.swing.*;\r\nimport java.applet.*;\r\nimport java.net.*;\r\n\r\npublic class Checkers extends JFrame {\r\n\r\n    private static int [][] boardPlan = {\r\n        {0, 0, 0, 0, 0, 0, 0, 0},   //*** blue pieces become king here\r\n        {0, 0, 0, 0, 0, 0, 0, 0},\r\n        {0, 0, 0, 0, 0, 0, 0, 0},\r\n        {0, 0, 0, 0, 0, 0, 0, 0},\r\n        {0, 0, 0, 0, 0, 0, 0, 1},\r\n        {1, 0, 4, 0, 3, 0, 0, 0},\r\n        {0, 0, 0, 0, 0, 0, 0, 0},\r\n        {0, 0, 0, 0, 2, 0, 0, 0}    //*** red pieces become king here\r\n    };\r\n\r\n    //*** the legend strings\r\n    private String[] legend = {&quot;blank&quot;, &quot;bs&quot;, &quot;bk&quot;, &quot;rs&quot;, &quot;rk&quot; };\r\n\r\n    //*** create the checkers board\r\n    private GameBoard board;\r\n\r\n    //*** the xy dimensions of each checkers cell on board\r\n    private int cellDimension;\r\n\r\n    //*** pause in seconds inbetween moves\r\n    private static int pauseDuration = 500;\r\n\r\n    Checkers() {\r\n        //*** set up the initial configuration of the board\r\n        board = new GameBoard(boardPlan);\r\n\r\n        //*** each board cell is 70 pixels long and wide\r\n        cellDimension = 70;\r\n\r\n        //*** set up the frame containign the board\r\n        getContentPane().setLayout(new GridLayout());\r\n        setSize(boardPlan.length * cellDimension, boardPlan.length * cellDimension);\r\n        setDefaultCloseOperation(EXIT_ON_CLOSE);\r\n        getContentPane().add(board);\r\n\r\n        //*** enable viewer\r\n        setVisible(true);\r\n\r\n        //*** place all initial pieces on board and pause a bit\r\n        putInitialPieces();\r\n        pause(2 * pauseDuration);\r\n    }\r\n\r\n    public void pause(int milliseconds) {\r\n        try\r\n        {Thread.sleep(milliseconds);}\r\n\r\n        catch (Exception e)\r\n        {}\r\n    }\r\n\r\n    void putPiece(int i, int j, String piece) {\r\n        //*** can do error checking here to make sure pieces are bs, bk, rs, rk\r\n        board.drawPiece(i, j, &quot;images/&quot; + piece + &quot;.jpg&quot;);\r\n    }\r\n\r\n    void putInitialPieces() {\r\n        //*** use legend variables to draw one piece at a time\r\n        for (int i = 0; i &lt; boardPlan.length; i++)\r\n            for (int j = 0; j &lt; boardPlan.length; j++)\r\n                if (boardPlan[i][j] != 0)\r\n                { board.drawPiece(i, j, &quot;images/&quot; + legend[boardPlan[i][j]] + &quot;.jpg&quot;); }\r\n    }\r\n\r\n    boolean legalPosition(int i) {\r\n        //*** can&#39;t go outside board boundaries\r\n        return ((i &gt;= 0) &amp;&amp; (i &lt; boardPlan.length));\r\n    }\r\n\r\n    void movePiece(int i1, int j1, int i2, int j2, String piece) {\r\n        //*** raise exception if outside the board or moving into a non-empty\r\n        //*** cell\r\n        if ((boardPlan[i2][j2] != 0) || !legalPosition(i1) || !legalPosition(i2)\r\n                || !legalPosition(j1) || !legalPosition(j1))\r\n        { throw new IllegalMoveException(&quot;An illegal move was attempted.&quot;); }\r\n\r\n        //*** informative console messages\r\n        System.out.println(&quot;Moved &quot; + piece + &quot; from position [&quot; +\r\n                           i1 + &quot;, &quot; + j1 + &quot;] to [&quot; + i2 + &quot;, &quot; + j2 + &quot;]&quot;);\r\n\r\n        //*** erase the old cell\r\n        board.drawPiece(i1, j1, &quot;images/blank.jpg&quot;);\r\n\r\n        //*** draw the new cell\r\n        board.drawPiece(i2, j2, &quot;images/&quot; + piece + &quot;.jpg&quot;);\r\n\r\n        //*** erase any captured piece from the board\r\n        if ((Math.abs(i1 - i2) == 2) &amp;&amp; (Math.abs(j1 - j2) == 2)) {\r\n            //*** this handles  hops of length 2\r\n            //*** the captured piece is halfway in between the two moves\r\n            int captured_i = i1 + (i2 - i1) / 2;\r\n            int captured_j = j1 + (j2 - j1) / 2;\r\n\r\n            //*** now wait a bit\r\n            pause(pauseDuration);\r\n\r\n            //*** erase the captured cell\r\n            board.drawPiece(captured_i, captured_j, &quot;images/blank.jpg&quot;);\r\n\r\n            //*** print which piece was captured\r\n            System.out.println(&quot;Captured &quot; + legend[boardPlan[captured_i][captured_j]] +\r\n                               &quot; from position [&quot; + captured_i + &quot;, &quot; + captured_j + &quot;]&quot;);\r\n\r\n            //*** the captured piece is removed from the board with a bang\r\n            boardPlan[captured_i][captured_j] = 0;\r\n            Applet.newAudioClip(getClass().getResource(&quot;images/hit.wav&quot;)).play();\r\n        }\r\n\r\n        //*** update the internal representation of the board by moving the old\r\n        //*** piece into its new position and leaving a blank in its old position\r\n        boardPlan[i2][j2] = boardPlan[i1][j1];\r\n        boardPlan[i1][j1] = 0;\r\n\r\n        //*** red single is kinged\r\n        if ( (i2 == boardPlan.length - 1) &amp;&amp; (boardPlan[i2][j2] == 3) ) {\r\n            boardPlan[i2][j2] = 4;\r\n            putPiece(i2, j2, &quot;rk&quot;);\r\n        }\r\n\r\n        //*** blue single is kinged\r\n        if ( (i2 == 0) &amp;&amp; (boardPlan[i2][j2] == 1) ) {\r\n            boardPlan[i2][j2] = 2;\r\n            putPiece(i2, j2, &quot;bk&quot;);\r\n        }\r\n\r\n        //*** now wait a bit\r\n        pause(pauseDuration);\r\n    }\r\n\r\n    //*** incorporate your MINIMAX algorithm in here\r\n    //***********************************************************************\r\n    public static void main(String [] args) {\r\n        //*** create a new game and make it visible\r\n        Checkers game = new Checkers();\r\n\r\n\r\n        //*** arbitrarily move a few pieces around\r\n        //while (!game.done())\r\n        {\r\n            try {\r\n                //*** move a bs piece from board[4][7] to board[3][6]\r\n                game.movePiece(4, 7, 3, 6, &quot;bs&quot;);\r\n\r\n                //*** move the rk from board[5][2] to board[4][1]\r\n                game.movePiece(5, 2, 4, 1, &quot;rk&quot;);\r\n\r\n                //*** move a bs piece from board[5][0] to board[3][2]\r\n                //*** must capture rk in position board[4][1]\r\n                game.movePiece(5, 0, 3, 2, &quot;bs&quot;);\r\n\r\n                //*** move the bk from board[7][4] to board[6]1]\r\n                game.movePiece(7, 4, 6, 3, &quot;bk&quot;);\r\n\r\n                //*** move the rs from board[5][4] to board[7][2]\r\n                game.movePiece(5, 4, 7, 2, &quot;rs&quot;);\r\n\r\n                //*** a few more moves just for fun\r\n                game.movePiece(3, 2, 2, 3, &quot;bs&quot;);\r\n                game.movePiece(2, 3, 1, 4, &quot;bs&quot;);\r\n                game.movePiece(1, 4, 0, 5, &quot;bs&quot;);\r\n                game.movePiece(3, 6, 2, 5, &quot;bs&quot;);\r\n                game.movePiece(2, 5, 1, 4, &quot;bs&quot;);\r\n                game.movePiece(1, 4, 0, 3, &quot;bs&quot;);\r\n\r\n            } catch (IllegalMoveException e)\r\n            {e.printStackTrace();}\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\nI&#39;ve been trying for few days to search for the solution, but couldn&#39;t find the right one that associate with the code above. I would appreciate for your time and solution. Thanks!\r\n","title":"How to implement MINIMAX algorithm for Checkers Game in Java?","body":"<p>Here's the code so far, required to add Minimax algorithm (function) below, just before the main class.\nI was trying to understand this pseudocode, so I can apply to my case. Unfortunately, I couldn't really understand.</p>\n<pre><code>function minimax(node, depth, maximizingPlayer) is\nif depth = 0 or node is a terminal node then\nreturn the heuristic value of node\nif maximizingPlayer then\nvalue := \nfor each child of node do\nvalue := max(value, minimax(child, depth  1, FALSE))\nreturn value\nelse (* minimizing player *)\nvalue := +\nfor each child of node do\nvalue := min(value, minimax(child, depth  1, TRUE))\nreturn value\n</code></pre>\n<pre><code>import java.awt.*;\nimport javax.swing.*;\nimport java.applet.*;\nimport java.net.*;\n\npublic class Checkers extends JFrame {\n\n    private static int [][] boardPlan = {\n        {0, 0, 0, 0, 0, 0, 0, 0},   //*** blue pieces become king here\n        {0, 0, 0, 0, 0, 0, 0, 0},\n        {0, 0, 0, 0, 0, 0, 0, 0},\n        {0, 0, 0, 0, 0, 0, 0, 0},\n        {0, 0, 0, 0, 0, 0, 0, 1},\n        {1, 0, 4, 0, 3, 0, 0, 0},\n        {0, 0, 0, 0, 0, 0, 0, 0},\n        {0, 0, 0, 0, 2, 0, 0, 0}    //*** red pieces become king here\n    };\n\n    //*** the legend strings\n    private String[] legend = {&quot;blank&quot;, &quot;bs&quot;, &quot;bk&quot;, &quot;rs&quot;, &quot;rk&quot; };\n\n    //*** create the checkers board\n    private GameBoard board;\n\n    //*** the xy dimensions of each checkers cell on board\n    private int cellDimension;\n\n    //*** pause in seconds inbetween moves\n    private static int pauseDuration = 500;\n\n    Checkers() {\n        //*** set up the initial configuration of the board\n        board = new GameBoard(boardPlan);\n\n        //*** each board cell is 70 pixels long and wide\n        cellDimension = 70;\n\n        //*** set up the frame containign the board\n        getContentPane().setLayout(new GridLayout());\n        setSize(boardPlan.length * cellDimension, boardPlan.length * cellDimension);\n        setDefaultCloseOperation(EXIT_ON_CLOSE);\n        getContentPane().add(board);\n\n        //*** enable viewer\n        setVisible(true);\n\n        //*** place all initial pieces on board and pause a bit\n        putInitialPieces();\n        pause(2 * pauseDuration);\n    }\n\n    public void pause(int milliseconds) {\n        try\n        {Thread.sleep(milliseconds);}\n\n        catch (Exception e)\n        {}\n    }\n\n    void putPiece(int i, int j, String piece) {\n        //*** can do error checking here to make sure pieces are bs, bk, rs, rk\n        board.drawPiece(i, j, &quot;images/&quot; + piece + &quot;.jpg&quot;);\n    }\n\n    void putInitialPieces() {\n        //*** use legend variables to draw one piece at a time\n        for (int i = 0; i &lt; boardPlan.length; i++)\n            for (int j = 0; j &lt; boardPlan.length; j++)\n                if (boardPlan[i][j] != 0)\n                { board.drawPiece(i, j, &quot;images/&quot; + legend[boardPlan[i][j]] + &quot;.jpg&quot;); }\n    }\n\n    boolean legalPosition(int i) {\n        //*** can't go outside board boundaries\n        return ((i &gt;= 0) &amp;&amp; (i &lt; boardPlan.length));\n    }\n\n    void movePiece(int i1, int j1, int i2, int j2, String piece) {\n        //*** raise exception if outside the board or moving into a non-empty\n        //*** cell\n        if ((boardPlan[i2][j2] != 0) || !legalPosition(i1) || !legalPosition(i2)\n                || !legalPosition(j1) || !legalPosition(j1))\n        { throw new IllegalMoveException(&quot;An illegal move was attempted.&quot;); }\n\n        //*** informative console messages\n        System.out.println(&quot;Moved &quot; + piece + &quot; from position [&quot; +\n                           i1 + &quot;, &quot; + j1 + &quot;] to [&quot; + i2 + &quot;, &quot; + j2 + &quot;]&quot;);\n\n        //*** erase the old cell\n        board.drawPiece(i1, j1, &quot;images/blank.jpg&quot;);\n\n        //*** draw the new cell\n        board.drawPiece(i2, j2, &quot;images/&quot; + piece + &quot;.jpg&quot;);\n\n        //*** erase any captured piece from the board\n        if ((Math.abs(i1 - i2) == 2) &amp;&amp; (Math.abs(j1 - j2) == 2)) {\n            //*** this handles  hops of length 2\n            //*** the captured piece is halfway in between the two moves\n            int captured_i = i1 + (i2 - i1) / 2;\n            int captured_j = j1 + (j2 - j1) / 2;\n\n            //*** now wait a bit\n            pause(pauseDuration);\n\n            //*** erase the captured cell\n            board.drawPiece(captured_i, captured_j, &quot;images/blank.jpg&quot;);\n\n            //*** print which piece was captured\n            System.out.println(&quot;Captured &quot; + legend[boardPlan[captured_i][captured_j]] +\n                               &quot; from position [&quot; + captured_i + &quot;, &quot; + captured_j + &quot;]&quot;);\n\n            //*** the captured piece is removed from the board with a bang\n            boardPlan[captured_i][captured_j] = 0;\n            Applet.newAudioClip(getClass().getResource(&quot;images/hit.wav&quot;)).play();\n        }\n\n        //*** update the internal representation of the board by moving the old\n        //*** piece into its new position and leaving a blank in its old position\n        boardPlan[i2][j2] = boardPlan[i1][j1];\n        boardPlan[i1][j1] = 0;\n\n        //*** red single is kinged\n        if ( (i2 == boardPlan.length - 1) &amp;&amp; (boardPlan[i2][j2] == 3) ) {\n            boardPlan[i2][j2] = 4;\n            putPiece(i2, j2, &quot;rk&quot;);\n        }\n\n        //*** blue single is kinged\n        if ( (i2 == 0) &amp;&amp; (boardPlan[i2][j2] == 1) ) {\n            boardPlan[i2][j2] = 2;\n            putPiece(i2, j2, &quot;bk&quot;);\n        }\n\n        //*** now wait a bit\n        pause(pauseDuration);\n    }\n\n    //*** incorporate your MINIMAX algorithm in here\n    //***********************************************************************\n    public static void main(String [] args) {\n        //*** create a new game and make it visible\n        Checkers game = new Checkers();\n\n\n        //*** arbitrarily move a few pieces around\n        //while (!game.done())\n        {\n            try {\n                //*** move a bs piece from board[4][7] to board[3][6]\n                game.movePiece(4, 7, 3, 6, &quot;bs&quot;);\n\n                //*** move the rk from board[5][2] to board[4][1]\n                game.movePiece(5, 2, 4, 1, &quot;rk&quot;);\n\n                //*** move a bs piece from board[5][0] to board[3][2]\n                //*** must capture rk in position board[4][1]\n                game.movePiece(5, 0, 3, 2, &quot;bs&quot;);\n\n                //*** move the bk from board[7][4] to board[6]1]\n                game.movePiece(7, 4, 6, 3, &quot;bk&quot;);\n\n                //*** move the rs from board[5][4] to board[7][2]\n                game.movePiece(5, 4, 7, 2, &quot;rs&quot;);\n\n                //*** a few more moves just for fun\n                game.movePiece(3, 2, 2, 3, &quot;bs&quot;);\n                game.movePiece(2, 3, 1, 4, &quot;bs&quot;);\n                game.movePiece(1, 4, 0, 5, &quot;bs&quot;);\n                game.movePiece(3, 6, 2, 5, &quot;bs&quot;);\n                game.movePiece(2, 5, 1, 4, &quot;bs&quot;);\n                game.movePiece(1, 4, 0, 3, &quot;bs&quot;);\n\n            } catch (IllegalMoveException e)\n            {e.printStackTrace();}\n        }\n    }\n}\n\n</code></pre>\n<p>I've been trying for few days to search for the solution, but couldn't find the right one that associate with the code above. I would appreciate for your time and solution. Thanks!</p>\n"},{"tags":["java","spring-boot","tomcat","servlets","servletcontextlistener"],"owner":{"account_id":1956083,"reputation":4432,"user_id":1759063,"accept_rate":53,"display_name":"Eljah"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":90,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681073650,"creation_date":1681073650,"question_id":75972826,"body_markdown":"After some update I started getting \r\n\r\n    org.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML document from ServletContext resource [/&lt;NONE&gt;]; nested exception is java.io.FileNotFoundException: Could not open ServletContext resource [/&lt;NONE&gt;]\r\n            at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:344)\r\n            at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:304)\r\n            at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:181)\r\n            at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:217)\r\n            at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:188)\r\n            at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:125)\r\n            at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:94)\r\n            at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:129)\r\n            at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:614)\r\n            at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:514)\r\n            at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:443)\r\n            at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:325)\r\n            at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:107)\r\n            at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4768)\r\n            at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5230)\r\n            at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n            at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:728)\r\n            at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:700)\r\n            at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:696)\r\n            at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:1024)\r\n            at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1911)\r\n            at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\r\n            at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n            at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n            at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:118)\r\n            at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:825)\r\n            at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:475)\r\n            at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1618)\r\n            at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:319)\r\n            at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\r\n            at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:423)\r\n            at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:366)\r\n            at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:948)\r\n            at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835)\r\n            at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n            at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1398)\r\n            at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1388)\r\n            at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n            at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n            at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:140)\r\n            at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:921)\r\n            at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:263)\r\n            at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n            at org.apache.catalina.core.StandardService.startInternal(StandardService.java:437)\r\n            at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n            at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:934)\r\n            at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n            at org.apache.catalina.startup.Catalina.start(Catalina.java:772)\r\n            at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n            at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n            at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n            at java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n            at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\r\n            at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\r\n    Caused by: java.io.FileNotFoundException: Could not open ServletContext resource [/&lt;NONE&gt;]\r\n            at org.springframework.web.context.support.ServletContextResource.getInputStream(ServletContextResource.java:141)\r\n            at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:330)\r\n            ... 53 common frames omitted\r\n    2023-04-10 02:41:11.660 [main] INFO  c.o.w.s.i.LoggableDispatcherServlet - FrameworkServlet &#39;dispatcher&#39;: initialization started\r\n    2023-04-10 02:41:21.120 [main] ERROR o.h.m.internal.MetadataContext - HHH015007: Illegal argument on static metamodel field injection : com.openpayment.impl.entity.PaymentEntity_#denominations; expected type :  org.hibernate.metamodel.internal.SingularAttributeImpl; encountered type : javax.persistence.metamodel.MapAttribute\r\n    2023-04-10 02:41:21.122 [main] ERROR o.h.m.internal.MetadataContext - HHH015007: Illegal argument on static metamodel field injection : com.openpayment.impl.entity.PaymentEntity_#validationResult; expected type :  org.hibernate.metamodel.internal.SingularAttributeImpl; encountered type : javax.persistence.metamodel.MapAttribute\r\n    2023-04-10 02:41:21.122 [main] ERROR o.h.m.internal.MetadataContext - HHH015007: Illegal argument on static metamodel field injection : com.openpayment.impl.entity.PaymentEntity_#additionalInfo; expected type :  org.hibernate.metamodel.internal.SingularAttributeImpl; encountered type : javax.persistence.metamodel.MapAttribute\r\n    2023-04-10 02:41:21.156 [main] ERROR o.h.m.internal.MetadataContext - HHH015007: Illegal argument on static metamodel field injection : com.openpayment.impl.entity.CollectionTerminalEntity_#paymentDenominations; expected type :  org.hibernate.metamodel.internal.SingularAttributeImpl; encountered type : javax.persistence.metamodel.MapAttribute\r\n    2023-04-10 02:41:21.156 [main] ERROR o.h.m.internal.MetadataContext - HHH015007: Illegal argument on static metamodel field injection : com.openpayment.impl.entity.CollectionTerminalEntity_#denominations; expected type :  org.hibernate.metamodel.internal.SingularAttributeImpl; encountered type : javax.persistence.metamodel.MapAttribute\r\n    2023-04-10 02:41:21.156 [main] ERROR o.h.m.internal.MetadataContext - HHH015007: Illegal argument on static metamodel field injection : com.openpayment.impl.entity.CollectionTerminalEntity_#retransmitDenominations; expected type :  org.hibernate.metamodel.internal.SingularAttributeImpl; encountered type : javax.persistence.metamodel.MapAttribute\r\n    2023-04-10 02:41:21.157 [main] ERROR o.h.m.internal.MetadataContext - HHH015007: Illegal argument on static metamodel field injection : com.openpayment.impl.entity.CollectionTerminalEntity_#acceptorDenominations; expected type :  org.hibernate.metamodel.internal.SingularAttributeImpl; encountered type : javax.persistence.metamodel.MapAttribute\r\n    2023-04-10 02:41:21.160 [main] ERROR o.h.m.internal.MetadataContext - HHH015007: Illegal argument on static metamodel field injection : com.openpayment.impl.entity.FavoritePaymentEntity_#properties; expected type :  org.hibernate.metamodel.internal.SingularAttributeImpl; encountered type : javax.persistence.metamodel.MapAttribute\r\n    2023-04-10 02:41:27.130 [main] WARN  c.o.i.s.firebase.FirebaseServiceImpl - FirebaseCredentialsPath is empty. Push notification doesn&#39;t work.\r\n    2023-04-10 02:41:32.301 [main] INFO  c.o.w.s.i.LoggableDispatcherServlet - FrameworkServlet &#39;dispatcher&#39;: initialization completed in 20639 ms\r\n    2023-04-10 02:41:45.771 [main] ERROR o.h.m.internal.MetadataContext - HHH015007: Illegal argument on static metamodel field injection : com.openpayment.impl.entity.PaymentEntity_#validationResult; expected type :  org.hibernate.metamodel.internal.SingularAttributeImpl; encountered type : javax.persistence.metamodel.MapAttribute\r\n    2023-04-10 02:41:45.773 [main] ERROR o.h.m.internal.MetadataContext - HHH015007: Illegal argument on static metamodel field injection : com.openpayment.impl.entity.PaymentEntity_#additionalInfo; expected type :  org.hibernate.metamodel.internal.SingularAttributeImpl; encountered type : javax.persistence.metamodel.MapAttribute\r\n    2023-04-10 02:41:45.773 [main] ERROR o.h.m.internal.MetadataContext - HHH015007: Illegal argument on static metamodel field injection : com.openpayment.impl.entity.PaymentEntity_#denominations; expected type :  org.hibernate.metamodel.internal.SingularAttributeImpl; encountered type : javax.persistence.metamodel.MapAttribute\r\n    2023-04-10 02:41:45.803 [main] ERROR o.h.m.internal.MetadataContext - HHH015007: Illegal argument on static metamodel field injection : com.openpayment.impl.entity.CollectionTerminalEntity_#acceptorDenominations; expected type :  org.hibernate.metamodel.internal.SingularAttributeImpl; encountered type : javax.persistence.metamodel.MapAttribute\r\n    2023-04-10 02:41:45.803 [main] ERROR o.h.m.internal.MetadataContext - HHH015007: Illegal argument on static metamodel field injection : com.openpayment.impl.entity.CollectionTerminalEntity_#retransmitDenominations; expected type :  org.hibernate.metamodel.internal.SingularAttributeImpl; encountered type : javax.persistence.metamodel.MapAttribute\r\n    2023-04-10 02:41:45.803 [main] ERROR o.h.m.internal.MetadataContext - HHH015007: Illegal argument on static metamodel field injection : com.openpayment.impl.entity.CollectionTerminalEntity_#denominations; expected type :  org.hibernate.metamodel.internal.SingularAttributeImpl; encountered type : javax.persistence.metamodel.MapAttribute\r\n    2023-04-10 02:41:45.803 [main] ERROR o.h.m.internal.MetadataContext - HHH015007: Illegal argument on static metamodel field injection : com.openpayment.impl.entity.CollectionTerminalEntity_#paymentDenominations; expected type :  org.hibernate.metamodel.internal.SingularAttributeImpl; encountered type : javax.persistence.metamodel.MapAttribute\r\n    2023-04-10 02:41:45.806 [main] ERROR o.h.m.internal.MetadataContext - HHH015007: Illegal argument on static metamodel field injection : com.openpayment.impl.entity.FavoritePaymentEntity_#properties; expected type :  org.hibernate.metamodel.internal.SingularAttributeImpl; encountered type : javax.persistence.metamodel.MapAttribute\r\n    2023-04-10 02:41:51.329 [main] WARN  c.o.i.s.e.ElcartTokenServiceImpl - Security provider BouncyCastle already installed!\r\n    2023-04-10 02:41:51.392 [main] WARN  c.o.i.s.firebase.FirebaseServiceImpl - FirebaseCredentialsPath is empty. Push notification doesn&#39;t work.\r\n    2023-04-10 02:42:04.536 [main] ERROR o.s.web.context.ContextLoader - Context initialization failed\r\n    org.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML document from ServletContext resource [/&lt;NONE&gt;]; nested exception is java.io.FileNotFoundException: Could not open ServletContext resource [/&lt;NONE&gt;]\r\n            at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:344)\r\n            at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:304)\r\n            at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:181)\r\n            at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:217)\r\n            at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:188)\r\n            at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:125)\r\n            at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:94)\r\n            at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:129)\r\n            at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:614)\r\n            at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:514)\r\n            at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:443)\r\n            at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:325)\r\n            at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:107)\r\n            at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4768)\r\n            at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5230)\r\n            at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n            at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:728)\r\n            at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:700)\r\n            at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:696)\r\n            at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:1024)\r\n            at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1911)\r\n            at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\r\n            at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n            at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n            at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:118)\r\n            at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:825)\r\n            at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:475)\r\n            at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1618)\r\n            at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:319)\r\n            at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\r\n            at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:423)\r\n            at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:366)\r\n            at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:948)\r\n            at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835)\r\n            at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n            at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1398)\r\n            at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1388)\r\n            at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n            at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n            at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:140)\r\n            at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:921)\r\n            at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:263)\r\n            at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n            at org.apache.catalina.core.StandardService.startInternal(StandardService.java:437)\r\n            at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n            at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:934)\r\n            at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n            at org.apache.catalina.startup.Catalina.start(Catalina.java:772)\r\n            at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n            at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n            at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n            at java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n            at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\r\n            at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\r\n    Caused by: java.io.FileNotFoundException: Could not open ServletContext resource [/&lt;NONE&gt;]\r\n            at org.springframework.web.context.support.ServletContextResource.getInputStream(ServletContextResource.java:141)\r\n            at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:330)\r\n            ... 53 common frames omitted\r\n\r\nThe update included the adding the dependency in the pom file:\r\n\r\n       &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-autoconfigure&lt;/artifactId&gt;\r\n            &lt;version&gt;2.1.8.RELEASE&lt;/version&gt;\r\n            &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\nHow to fix it or work it around?","title":"nested exception is java.io.FileNotFoundException: Could not open ServletContext resource [/&lt;NONE&gt;]","body":"<p>After some update I started getting</p>\n<pre><code>org.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML document from ServletContext resource [/&lt;NONE&gt;]; nested exception is java.io.FileNotFoundException: Could not open ServletContext resource [/&lt;NONE&gt;]\n        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:344)\n        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:304)\n        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:181)\n        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:217)\n        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:188)\n        at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:125)\n        at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:94)\n        at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:129)\n        at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:614)\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:514)\n        at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:443)\n        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:325)\n        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:107)\n        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4768)\n        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5230)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:728)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:700)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:696)\n        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:1024)\n        at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1911)\n        at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\n        at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n        at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n        at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:118)\n        at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:825)\n        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:475)\n        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1618)\n        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:319)\n        at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\n        at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:423)\n        at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:366)\n        at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:948)\n        at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1398)\n        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1388)\n        at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n        at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n        at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:140)\n        at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:921)\n        at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:263)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.core.StandardService.startInternal(StandardService.java:437)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:934)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.startup.Catalina.start(Catalina.java:772)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\nCaused by: java.io.FileNotFoundException: Could not open ServletContext resource [/&lt;NONE&gt;]\n        at org.springframework.web.context.support.ServletContextResource.getInputStream(ServletContextResource.java:141)\n        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:330)\n        ... 53 common frames omitted\n2023-04-10 02:41:11.660 [main] INFO  c.o.w.s.i.LoggableDispatcherServlet - FrameworkServlet 'dispatcher': initialization started\n2023-04-10 02:41:21.120 [main] ERROR o.h.m.internal.MetadataContext - HHH015007: Illegal argument on static metamodel field injection : com.openpayment.impl.entity.PaymentEntity_#denominations; expected type :  org.hibernate.metamodel.internal.SingularAttributeImpl; encountered type : javax.persistence.metamodel.MapAttribute\n2023-04-10 02:41:21.122 [main] ERROR o.h.m.internal.MetadataContext - HHH015007: Illegal argument on static metamodel field injection : com.openpayment.impl.entity.PaymentEntity_#validationResult; expected type :  org.hibernate.metamodel.internal.SingularAttributeImpl; encountered type : javax.persistence.metamodel.MapAttribute\n2023-04-10 02:41:21.122 [main] ERROR o.h.m.internal.MetadataContext - HHH015007: Illegal argument on static metamodel field injection : com.openpayment.impl.entity.PaymentEntity_#additionalInfo; expected type :  org.hibernate.metamodel.internal.SingularAttributeImpl; encountered type : javax.persistence.metamodel.MapAttribute\n2023-04-10 02:41:21.156 [main] ERROR o.h.m.internal.MetadataContext - HHH015007: Illegal argument on static metamodel field injection : com.openpayment.impl.entity.CollectionTerminalEntity_#paymentDenominations; expected type :  org.hibernate.metamodel.internal.SingularAttributeImpl; encountered type : javax.persistence.metamodel.MapAttribute\n2023-04-10 02:41:21.156 [main] ERROR o.h.m.internal.MetadataContext - HHH015007: Illegal argument on static metamodel field injection : com.openpayment.impl.entity.CollectionTerminalEntity_#denominations; expected type :  org.hibernate.metamodel.internal.SingularAttributeImpl; encountered type : javax.persistence.metamodel.MapAttribute\n2023-04-10 02:41:21.156 [main] ERROR o.h.m.internal.MetadataContext - HHH015007: Illegal argument on static metamodel field injection : com.openpayment.impl.entity.CollectionTerminalEntity_#retransmitDenominations; expected type :  org.hibernate.metamodel.internal.SingularAttributeImpl; encountered type : javax.persistence.metamodel.MapAttribute\n2023-04-10 02:41:21.157 [main] ERROR o.h.m.internal.MetadataContext - HHH015007: Illegal argument on static metamodel field injection : com.openpayment.impl.entity.CollectionTerminalEntity_#acceptorDenominations; expected type :  org.hibernate.metamodel.internal.SingularAttributeImpl; encountered type : javax.persistence.metamodel.MapAttribute\n2023-04-10 02:41:21.160 [main] ERROR o.h.m.internal.MetadataContext - HHH015007: Illegal argument on static metamodel field injection : com.openpayment.impl.entity.FavoritePaymentEntity_#properties; expected type :  org.hibernate.metamodel.internal.SingularAttributeImpl; encountered type : javax.persistence.metamodel.MapAttribute\n2023-04-10 02:41:27.130 [main] WARN  c.o.i.s.firebase.FirebaseServiceImpl - FirebaseCredentialsPath is empty. Push notification doesn't work.\n2023-04-10 02:41:32.301 [main] INFO  c.o.w.s.i.LoggableDispatcherServlet - FrameworkServlet 'dispatcher': initialization completed in 20639 ms\n2023-04-10 02:41:45.771 [main] ERROR o.h.m.internal.MetadataContext - HHH015007: Illegal argument on static metamodel field injection : com.openpayment.impl.entity.PaymentEntity_#validationResult; expected type :  org.hibernate.metamodel.internal.SingularAttributeImpl; encountered type : javax.persistence.metamodel.MapAttribute\n2023-04-10 02:41:45.773 [main] ERROR o.h.m.internal.MetadataContext - HHH015007: Illegal argument on static metamodel field injection : com.openpayment.impl.entity.PaymentEntity_#additionalInfo; expected type :  org.hibernate.metamodel.internal.SingularAttributeImpl; encountered type : javax.persistence.metamodel.MapAttribute\n2023-04-10 02:41:45.773 [main] ERROR o.h.m.internal.MetadataContext - HHH015007: Illegal argument on static metamodel field injection : com.openpayment.impl.entity.PaymentEntity_#denominations; expected type :  org.hibernate.metamodel.internal.SingularAttributeImpl; encountered type : javax.persistence.metamodel.MapAttribute\n2023-04-10 02:41:45.803 [main] ERROR o.h.m.internal.MetadataContext - HHH015007: Illegal argument on static metamodel field injection : com.openpayment.impl.entity.CollectionTerminalEntity_#acceptorDenominations; expected type :  org.hibernate.metamodel.internal.SingularAttributeImpl; encountered type : javax.persistence.metamodel.MapAttribute\n2023-04-10 02:41:45.803 [main] ERROR o.h.m.internal.MetadataContext - HHH015007: Illegal argument on static metamodel field injection : com.openpayment.impl.entity.CollectionTerminalEntity_#retransmitDenominations; expected type :  org.hibernate.metamodel.internal.SingularAttributeImpl; encountered type : javax.persistence.metamodel.MapAttribute\n2023-04-10 02:41:45.803 [main] ERROR o.h.m.internal.MetadataContext - HHH015007: Illegal argument on static metamodel field injection : com.openpayment.impl.entity.CollectionTerminalEntity_#denominations; expected type :  org.hibernate.metamodel.internal.SingularAttributeImpl; encountered type : javax.persistence.metamodel.MapAttribute\n2023-04-10 02:41:45.803 [main] ERROR o.h.m.internal.MetadataContext - HHH015007: Illegal argument on static metamodel field injection : com.openpayment.impl.entity.CollectionTerminalEntity_#paymentDenominations; expected type :  org.hibernate.metamodel.internal.SingularAttributeImpl; encountered type : javax.persistence.metamodel.MapAttribute\n2023-04-10 02:41:45.806 [main] ERROR o.h.m.internal.MetadataContext - HHH015007: Illegal argument on static metamodel field injection : com.openpayment.impl.entity.FavoritePaymentEntity_#properties; expected type :  org.hibernate.metamodel.internal.SingularAttributeImpl; encountered type : javax.persistence.metamodel.MapAttribute\n2023-04-10 02:41:51.329 [main] WARN  c.o.i.s.e.ElcartTokenServiceImpl - Security provider BouncyCastle already installed!\n2023-04-10 02:41:51.392 [main] WARN  c.o.i.s.firebase.FirebaseServiceImpl - FirebaseCredentialsPath is empty. Push notification doesn't work.\n2023-04-10 02:42:04.536 [main] ERROR o.s.web.context.ContextLoader - Context initialization failed\norg.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML document from ServletContext resource [/&lt;NONE&gt;]; nested exception is java.io.FileNotFoundException: Could not open ServletContext resource [/&lt;NONE&gt;]\n        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:344)\n        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:304)\n        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:181)\n        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:217)\n        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:188)\n        at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:125)\n        at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:94)\n        at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:129)\n        at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:614)\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:514)\n        at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:443)\n        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:325)\n        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:107)\n        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4768)\n        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5230)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:728)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:700)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:696)\n        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:1024)\n        at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1911)\n        at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\n        at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n        at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n        at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:118)\n        at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:825)\n        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:475)\n        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1618)\n        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:319)\n        at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\n        at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:423)\n        at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:366)\n        at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:948)\n        at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1398)\n        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1388)\n        at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n        at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n        at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:140)\n        at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:921)\n        at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:263)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.core.StandardService.startInternal(StandardService.java:437)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:934)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.startup.Catalina.start(Catalina.java:772)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\nCaused by: java.io.FileNotFoundException: Could not open ServletContext resource [/&lt;NONE&gt;]\n        at org.springframework.web.context.support.ServletContextResource.getInputStream(ServletContextResource.java:141)\n        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:330)\n        ... 53 common frames omitted\n</code></pre>\n<p>The update included the adding the dependency in the pom file:</p>\n<pre><code>   &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-autoconfigure&lt;/artifactId&gt;\n        &lt;version&gt;2.1.8.RELEASE&lt;/version&gt;\n        &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>How to fix it or work it around?</p>\n"},{"tags":["java","spring","date","simpledateformat","parseexception"],"comments":[{"owner":{"account_id":3930229,"reputation":2278,"user_id":4412979,"accept_rate":50,"display_name":"Vasily Liaskovsky"},"score":3,"creation_date":1680784378,"post_id":75949538,"comment_id":133958552,"body_markdown":"You probably mean MMM (long month), not mmm (long minutes?!)","body":"You probably mean MMM (long month), not mmm (long minutes?!)"},{"owner":{"account_id":2090997,"reputation":840,"user_id":7516740,"display_name":"elvis"},"score":0,"creation_date":1680784815,"post_id":75949538,"comment_id":133958668,"body_markdown":"Yes this is the month like Apr for April.","body":"Yes this is the month like Apr for April."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":3,"creation_date":1680786030,"post_id":75949538,"comment_id":133958973,"body_markdown":"Don&#39;t use superseded date classes. `Date`, `SimpleDateFormat` - no! `LocalDate` `DateTimeFormatter` - yes!","body":"Don&#39;t use superseded date classes. <code>Date</code>, <code>SimpleDateFormat</code> - no! <code>LocalDate</code> <code>DateTimeFormatter</code> - yes!"}],"answers":[{"tags":[],"owner":{"account_id":28219875,"reputation":101,"user_id":21570778,"display_name":"Mayuri"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1680784953,"creation_date":1680784953,"answer_id":75949663,"question_id":75949538,"body_markdown":"You did only one small mistake you have to use MMM instead of mmm , m is used for minute and M is for month.\r\n\r\nchange as follow\r\n\r\n    dd-mmm-yy to dd-MMM-yy\r\n    dd/mm/yy to dd/MM/yy\r\n\r\nand one more mistake at last you have to return sdf1 not sdf.","title":"How to convert a date into another date as a String in Java?","body":"<p>You did only one small mistake you have to use MMM instead of mmm , m is used for minute and M is for month.</p>\n<p>change as follow</p>\n<pre><code>dd-mmm-yy to dd-MMM-yy\ndd/mm/yy to dd/MM/yy\n</code></pre>\n<p>and one more mistake at last you have to return sdf1 not sdf.</p>\n"},{"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1681073649,"creation_date":1680786779,"answer_id":75949942,"question_id":75949538,"body_markdown":"# *java.time*\r\n\r\nDon&#39;t use superseded date classes. `Date`, `SimpleDateFormat` - no! `LocalDate` , `DateTimeFormatter` - yes! \r\n\r\nAnd the formatting pattern is case-sensitive. For abbreviated name of month, use uppercase MMM. \r\n\r\nSpecify a [`Locale`][1] to be used in determining the human language and cultural norms for localizing that name of month. \r\n\r\n    String oldDate = &quot;05-Apr-23&quot;;\r\n    DateTimeFormatter dfFrom = DateTimeFormatter.ofPattern(&quot;dd-MMM-yy&quot;).withLocale( Locale.US );\r\n    DateTimeFormatter dfTo = DateTimeFormatter.ofPattern(&quot;dd/MM/yy&quot;);\r\n    String newDate = dfTo.format(LocalDate.parse(oldDate, dfFrom));\r\n    System.out.println(newDate);\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Locale.html","title":"How to convert a date into another date as a String in Java?","body":"<h1><em>java.time</em></h1>\n<p>Don't use superseded date classes. <code>Date</code>, <code>SimpleDateFormat</code> - no! <code>LocalDate</code> , <code>DateTimeFormatter</code> - yes!</p>\n<p>And the formatting pattern is case-sensitive. For abbreviated name of month, use uppercase MMM.</p>\n<p>Specify a <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Locale.html\" rel=\"nofollow noreferrer\"><code>Locale</code></a> to be used in determining the human language and cultural norms for localizing that name of month.</p>\n<pre><code>String oldDate = &quot;05-Apr-23&quot;;\nDateTimeFormatter dfFrom = DateTimeFormatter.ofPattern(&quot;dd-MMM-yy&quot;).withLocale( Locale.US );\nDateTimeFormatter dfTo = DateTimeFormatter.ofPattern(&quot;dd/MM/yy&quot;);\nString newDate = dfTo.format(LocalDate.parse(oldDate, dfFrom));\nSystem.out.println(newDate);\n</code></pre>\n"}],"owner":{"account_id":2090997,"reputation":840,"user_id":7516740,"display_name":"elvis"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75949663,"answer_count":2,"score":0,"last_activity_date":1681073649,"creation_date":1680784188,"question_id":75949538,"body_markdown":"I want to convert a date format into another date format. For example, I have this String &quot;05-Apr-23&quot; and I want to convert it into this String &quot;05/04/23&quot;. And I did this implementation but it&#39;s not working. \r\n\r\n    String oldDate = &quot;05-Apr-23&quot;;\r\n    SimpleDateFormat sdf = new SimpleDateFormat(&quot;dd-mmm-yy&quot;);\r\n    Date dt = null;\r\n    try {\r\n        dt = sdf.parse(oldDate);\r\n    } catch (ParseException e) {\r\n        throw new CustomInternalServerException(oldDate + &quot;is not a valid date&quot;);\r\n    }\r\n    \r\n    SimpleDateFormat sdf1 = new SimpleDateFormat(&quot;dd/mm/yy&quot;);\r\n    return sdf1.format(dt);\r\n\r\nI get the exception ParseException: UnparseableDate: &quot;05-Apr-23&quot;. Any feedback will be appreciated! Thank you!","title":"How to convert a date into another date as a String in Java?","body":"<p>I want to convert a date format into another date format. For example, I have this String &quot;05-Apr-23&quot; and I want to convert it into this String &quot;05/04/23&quot;. And I did this implementation but it's not working.</p>\n<pre><code>String oldDate = &quot;05-Apr-23&quot;;\nSimpleDateFormat sdf = new SimpleDateFormat(&quot;dd-mmm-yy&quot;);\nDate dt = null;\ntry {\n    dt = sdf.parse(oldDate);\n} catch (ParseException e) {\n    throw new CustomInternalServerException(oldDate + &quot;is not a valid date&quot;);\n}\n\nSimpleDateFormat sdf1 = new SimpleDateFormat(&quot;dd/mm/yy&quot;);\nreturn sdf1.format(dt);\n</code></pre>\n<p>I get the exception ParseException: UnparseableDate: &quot;05-Apr-23&quot;. Any feedback will be appreciated! Thank you!</p>\n"},{"tags":["java","kubernetes","redis","quarkus","livenessprobe"],"comments":[{"owner":{"account_id":3302072,"reputation":3582,"user_id":2777988,"display_name":"Rakesh Gupta"},"score":0,"creation_date":1681049896,"post_id":75970901,"comment_id":133993330,"body_markdown":"Have you tried to persist your redis data to a persistent volume? This should solve your issue.","body":"Have you tried to persist your redis data to a persistent volume? This should solve your issue."},{"owner":{"account_id":18044566,"reputation":101,"user_id":13115896,"display_name":"sg2000"},"score":0,"creation_date":1681050458,"post_id":75970901,"comment_id":133993392,"body_markdown":"yes we are looking to do that. outside of it, i want to add this dependency. so trying to figure out a way to do it. Thank you","body":"yes we are looking to do that. outside of it, i want to add this dependency. so trying to figure out a way to do it. Thank you"},{"owner":{"account_id":13863020,"reputation":137023,"user_id":10008173,"display_name":"David Maze"},"score":0,"creation_date":1681051825,"post_id":75970901,"comment_id":133993597,"body_markdown":"I would not try to rely on probes here.  If your application can&#39;t tolerate the cache being unavailable and can&#39;t attempt to reconnect it self, it should just exit, and Kubernetes will try to restart it.  It won&#39;t specifically be aware of the dependency but there is reasonable back-off behavior.","body":"I would not try to rely on probes here.  If your application can&#39;t tolerate the cache being unavailable and can&#39;t attempt to reconnect it self, it should just exit, and Kubernetes will try to restart it.  It won&#39;t specifically be aware of the dependency but there is reasonable back-off behavior."},{"owner":{"account_id":18044566,"reputation":101,"user_id":13115896,"display_name":"sg2000"},"score":0,"creation_date":1681052266,"post_id":75970901,"comment_id":133993652,"body_markdown":"Thanks, Sorry i should have been more clear. I want the probe to check the Redis availability and the data inside it and if not available, just fail so Kubernetes will restart it","body":"Thanks, Sorry i should have been more clear. I want the probe to check the Redis availability and the data inside it and if not available, just fail so Kubernetes will restart it"},{"owner":{"account_id":3302072,"reputation":3582,"user_id":2777988,"display_name":"Rakesh Gupta"},"score":0,"creation_date":1681055269,"post_id":75970901,"comment_id":133994039,"body_markdown":"Then the only other option that I can think of is to add an initContainer to your Redis pod, to create all the cache at startup. This initContainer can invoke an api implemented by your other service and populate Redis cache. But, I think what you are trying to do is anti-pattern","body":"Then the only other option that I can think of is to add an initContainer to your Redis pod, to create all the cache at startup. This initContainer can invoke an api implemented by your other service and populate Redis cache. But, I think what you are trying to do is anti-pattern"},{"owner":{"account_id":18044566,"reputation":101,"user_id":13115896,"display_name":"sg2000"},"score":0,"creation_date":1681144606,"post_id":75970901,"comment_id":134005737,"body_markdown":"Thanks. are you saying redis reaching out to the service to load is an anti-pattern?","body":"Thanks. are you saying redis reaching out to the service to load is an anti-pattern?"}],"answers":[{"tags":[],"owner":{"account_id":2296223,"reputation":4709,"user_id":2017590,"display_name":"Blender Fox"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681072819,"creation_date":1681057564,"answer_id":75971646,"question_id":75970901,"body_markdown":"You could run a sidecar container in your service that is a basic webserver (apache, httpd, and nginx all can do this) and all that webserver does is proxy to the Redis cluster, so the kubernetes health check can check something like `yourservice:1234/redis_health` and that would proxy the request to Redis.\r\n\r\nIf redis is down, the webserver would return `502 Bad Gateway`.\r\n\r\nThe cluster would then restart the service pod based on the nature and frequency of the failed checks, because it thinks the service pod is down, not Redis.\r\n\r\nAs long as you don&#39;t expose the webserver via a Kubernetes Service, this won&#39;t harm the functionality of your service.\r\n\r\n---\r\n\r\nAnother possible solution is to use the redis client `redis-cli` within your service pod as part of the `livenessProbe` -- in other words, you use the Redis service as the indicator for whether your service is healthy, but with the caveat that if the Redis dies, your service pods will be continuously killed and restarted.","title":"liveness probe to a redis service","body":"<p>You could run a sidecar container in your service that is a basic webserver (apache, httpd, and nginx all can do this) and all that webserver does is proxy to the Redis cluster, so the kubernetes health check can check something like <code>yourservice:1234/redis_health</code> and that would proxy the request to Redis.</p>\n<p>If redis is down, the webserver would return <code>502 Bad Gateway</code>.</p>\n<p>The cluster would then restart the service pod based on the nature and frequency of the failed checks, because it thinks the service pod is down, not Redis.</p>\n<p>As long as you don't expose the webserver via a Kubernetes Service, this won't harm the functionality of your service.</p>\n<hr />\n<p>Another possible solution is to use the redis client <code>redis-cli</code> within your service pod as part of the <code>livenessProbe</code> -- in other words, you use the Redis service as the indicator for whether your service is healthy, but with the caveat that if the Redis dies, your service pods will be continuously killed and restarted.</p>\n"}],"owner":{"account_id":18044566,"reputation":101,"user_id":13115896,"display_name":"sg2000"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":480,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1681072819,"creation_date":1681047977,"question_id":75970901,"body_markdown":"I have a service that is dependent on a Redis cache which is running as a separate service. I have added probes to make sure my service doesn&#39;t come up before Redis is up. However, there are times when Redis gets restarted and when this happens, the data is not available anymore and my service stops working as the cache doesn&#39;t have any data. We need to restart the service which reloads the data. While we are working make persistence enabled for Redis, is it possible for me add a liveness probe in my service to check for the Redis pod to be up and has the required data and if not, restart itself?","title":"liveness probe to a redis service","body":"<p>I have a service that is dependent on a Redis cache which is running as a separate service. I have added probes to make sure my service doesn't come up before Redis is up. However, there are times when Redis gets restarted and when this happens, the data is not available anymore and my service stops working as the cache doesn't have any data. We need to restart the service which reloads the data. While we are working make persistence enabled for Redis, is it possible for me add a liveness probe in my service to check for the Redis pod to be up and has the required data and if not, restart itself?</p>\n"},{"tags":["java","xml","netbeans","rcp","netbeans-platform"],"answers":[{"tags":[],"owner":{"account_id":9026259,"reputation":1316,"user_id":6725459,"display_name":"jjazzboss"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681070972,"creation_date":1681070972,"answer_id":75972638,"question_id":75917360,"body_markdown":"You can edit the Netbeans System FileSystem at runtime: use `FileUtil.getConfigRoot()` to access its root `FileObject`, then you can navigate through the file system and edit files.\r\n\r\nAnother option is to write a subclass of `MultiFileSystem`. \r\n\r\nMore information here: https://netbeans.apache.org/wiki/DevFaqDynamicSystemFilesystem.html\r\n\r\n\r\n\r\n\r\n","title":"NetBeans Rich Client Platform: How to disable specific options dialog categories at runtime?","body":"<p>You can edit the Netbeans System FileSystem at runtime: use <code>FileUtil.getConfigRoot()</code> to access its root <code>FileObject</code>, then you can navigate through the file system and edit files.</p>\n<p>Another option is to write a subclass of <code>MultiFileSystem</code>.</p>\n<p>More information here: <a href=\"https://netbeans.apache.org/wiki/DevFaqDynamicSystemFilesystem.html\" rel=\"nofollow noreferrer\">https://netbeans.apache.org/wiki/DevFaqDynamicSystemFilesystem.html</a></p>\n"}],"owner":{"account_id":13163776,"reputation":35,"user_id":9508695,"display_name":"Ece &#199;anga"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75972638,"answer_count":1,"score":1,"last_activity_date":1681070972,"creation_date":1680510004,"question_id":75917360,"body_markdown":"This is a follow-up question for [this](https://stackoverflow.com/questions/65690073/netbeans-platform-how-to-disable-specific-options-dialog-categories) question.\r\nIs there a way to enable or disable specific options dialog categories at runtime? For instance, there are custom options panels of A, B, C, X and Y. An admin user should be able to see A, B, C, X and Y: [![What admin sees](https://i.stack.imgur.com/Y01IX.png)](https://i.stack.imgur.com/Y01IX.png)\r\n\r\nwhereas a standard user should only see A, B, C:\r\n[![What user sees](https://i.stack.imgur.com/AlC5d.png)](https://i.stack.imgur.com/AlC5d.png)\r\n\r\nIn other words, can &quot;layer.xml&quot; be edited depending on authorization of the selected user?\r\n\r\nEditing &quot;layer.xml&quot; works fine when I add the lines below:\r\n\r\n```\r\n&lt;filesystem&gt;\r\n    &lt;folder name=&quot;OptionsDialog&quot;&gt;\r\n        &lt;folder name=&quot;X.hidden&quot;&gt;\r\n            &lt;file name=&quot;X.instance_hidden&quot;/&gt;\r\n        &lt;/folder&gt;\r\n        &lt;folder name=&quot;Y.hidden&quot;&gt;\r\n            &lt;file name=&quot;Y.instance_hidden&quot;/&gt;\r\n        &lt;/folder&gt;\r\n    &lt;/folder&gt;\r\n&lt;/filesystem&gt;\r\n```\r\n\r\nbut I don&#39;t want to re-build and run the program to disable X &amp; Y options specific to non-admin user.","title":"NetBeans Rich Client Platform: How to disable specific options dialog categories at runtime?","body":"<p>This is a follow-up question for <a href=\"https://stackoverflow.com/questions/65690073/netbeans-platform-how-to-disable-specific-options-dialog-categories\">this</a> question.\nIs there a way to enable or disable specific options dialog categories at runtime? For instance, there are custom options panels of A, B, C, X and Y. An admin user should be able to see A, B, C, X and Y: <a href=\"https://i.stack.imgur.com/Y01IX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Y01IX.png\" alt=\"What admin sees\" /></a></p>\n<p>whereas a standard user should only see A, B, C:\n<a href=\"https://i.stack.imgur.com/AlC5d.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AlC5d.png\" alt=\"What user sees\" /></a></p>\n<p>In other words, can &quot;layer.xml&quot; be edited depending on authorization of the selected user?</p>\n<p>Editing &quot;layer.xml&quot; works fine when I add the lines below:</p>\n<pre><code>&lt;filesystem&gt;\n    &lt;folder name=&quot;OptionsDialog&quot;&gt;\n        &lt;folder name=&quot;X.hidden&quot;&gt;\n            &lt;file name=&quot;X.instance_hidden&quot;/&gt;\n        &lt;/folder&gt;\n        &lt;folder name=&quot;Y.hidden&quot;&gt;\n            &lt;file name=&quot;Y.instance_hidden&quot;/&gt;\n        &lt;/folder&gt;\n    &lt;/folder&gt;\n&lt;/filesystem&gt;\n</code></pre>\n<p>but I don't want to re-build and run the program to disable X &amp; Y options specific to non-admin user.</p>\n"},{"tags":["java","spring","mongodb","spring-data","spring-data-mongodb"],"comments":[{"owner":{"account_id":17092302,"reputation":9084,"user_id":12368154,"display_name":"Charchit Kapoor"},"score":0,"creation_date":1681131634,"post_id":75972632,"comment_id":134003097,"body_markdown":"You should use the pipelined form of updates. I am not much aware of MongoDB Java API, but you can see the native query here. https://mongoplayground.net/p/3lXZFy5hLy7","body":"You should use the pipelined form of updates. I am not much aware of MongoDB Java API, but you can see the native query here. <a href=\"https://mongoplayground.net/p/3lXZFy5hLy7\" rel=\"nofollow noreferrer\">mongoplayground.net/p/3lXZFy5hLy7</a>"}],"owner":{"account_id":16773930,"reputation":1518,"user_id":12125755,"display_name":"NeverSleeps"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681070826,"creation_date":1681070826,"question_id":75972632,"body_markdown":"\r\nOne of the fields contains an array with name ranges, each element of which can contain data in a decimal value. However, these fields can also be null. The array can be of any size. I need to round the value to an integer. \r\n\r\nExample of `document` structure:\r\n\r\n```\r\n{\r\n    &quot;state&quot; : {\r\n        &quot;aggregation&quot; : {\r\n            &quot;ranges&quot; : [ \r\n                {\r\n                    &quot;areaRange&quot; : {\r\n                        &quot;range&quot; : {\r\n                            &quot;from&quot; : 11.54815694,\r\n                            &quot;to&quot; : 22.09873028\r\n                        }\r\n                    }\r\n                }, \r\n                ...\r\n            ]\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nMy java code:\r\n\r\n```java\r\nQuery query = Query.query(Criteria.where(&quot;signalState.aggregation.ranges&quot;).exists(true).ne(null))\r\n                .addCriteria(Criteria.where(&quot;state.aggregation.ranges.areaRange.range.from&quot;).exists(true).ne(null));\r\n\r\nUpdate update = new Update().set(\r\n    &quot;state.aggregation.ranges.$.areaRange.range.from&quot;,\r\n    ArithmeticOperators.Round.roundValueOf(&quot;state.aggregation.ranges.$.areaRange.range.from&quot;).place(1)\r\n);\r\n\r\nvar result = mongoTemplate.updateMulti(query, update, State.class);\r\nlog.info(&quot;Matched {}, Modified {}&quot;, result.getMatchedCount(), result.getModifiedCount());\r\n```\r\n\r\nBut it does not work and throw the exception:\r\n```\r\nWrite operation error on server localhost:52053. Write error: WriteError{code=52, message=&#39;The dollar ($) prefixed field &#39;$round&#39; in &#39;state.aggregation.ranges.0.areaRange.range.from.$round&#39; is not valid for storage.&#39;, details={}}.; nested exception is com.mongodb.MongoWriteException: Write operation error on server localhost:52053. Write error: WriteError{code=52, message=&#39;The dollar ($) prefixed field &#39;$round&#39; in &#39;state.aggregation.ranges.0.areaRange.range.from.$round&#39; is not valid for storage.&#39;, details={}}.\r\norg.springframework.dao.DataIntegrityViolationException: Write operation error on server localhost:52053. Write error: WriteError{code=52, message=&#39;The dollar ($) prefixed field &#39;$round&#39; in &#39;state.aggregation.ranges.0.areaRange.range.from.$round&#39; is not valid for storage.&#39;, details={}}.; nested exception is com.mongodb.MongoWriteException: Write operation error on server localhost:52053. Write error: WriteError{code=52, message=&#39;The dollar ($) prefixed field &#39;$round&#39; in &#39;state.aggregation.ranges.0.areaRange.range.from.$round&#39; is not valid for storage.&#39;, details={}}.\r\n\tat app//org.springframework.data.mongodb.core.MongoExceptionTranslator.translateExceptionIfPossible(MongoExceptionTranslator.java:117)\r\n\tat app//org.springframework.data.mongodb.core.MongoTemplate.potentiallyConvertRuntimeException(MongoTemplate.java:3044)\r\n\tat app//org.springframework.data.mongodb.core.MongoTemplate.execute(MongoTemplate.java:600)\r\n\tat app//org.springframework.data.mongodb.core.MongoTemplate.doUpdate(MongoTemplate.java:1735)\r\n\tat app//org.springframework.data.mongodb.core.MongoTemplate.updateMulti(MongoTemplate.java:1671)\r\n```","title":"How to round the value to an integer from array elements with Query and MongoTemplate","body":"<p>One of the fields contains an array with name ranges, each element of which can contain data in a decimal value. However, these fields can also be null. The array can be of any size. I need to round the value to an integer.</p>\n<p>Example of <code>document</code> structure:</p>\n<pre><code>{\n    &quot;state&quot; : {\n        &quot;aggregation&quot; : {\n            &quot;ranges&quot; : [ \n                {\n                    &quot;areaRange&quot; : {\n                        &quot;range&quot; : {\n                            &quot;from&quot; : 11.54815694,\n                            &quot;to&quot; : 22.09873028\n                        }\n                    }\n                }, \n                ...\n            ]\n        }\n    }\n}\n</code></pre>\n<p>My java code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Query query = Query.query(Criteria.where(&quot;signalState.aggregation.ranges&quot;).exists(true).ne(null))\n                .addCriteria(Criteria.where(&quot;state.aggregation.ranges.areaRange.range.from&quot;).exists(true).ne(null));\n\nUpdate update = new Update().set(\n    &quot;state.aggregation.ranges.$.areaRange.range.from&quot;,\n    ArithmeticOperators.Round.roundValueOf(&quot;state.aggregation.ranges.$.areaRange.range.from&quot;).place(1)\n);\n\nvar result = mongoTemplate.updateMulti(query, update, State.class);\nlog.info(&quot;Matched {}, Modified {}&quot;, result.getMatchedCount(), result.getModifiedCount());\n</code></pre>\n<p>But it does not work and throw the exception:</p>\n<pre><code>Write operation error on server localhost:52053. Write error: WriteError{code=52, message='The dollar ($) prefixed field '$round' in 'state.aggregation.ranges.0.areaRange.range.from.$round' is not valid for storage.', details={}}.; nested exception is com.mongodb.MongoWriteException: Write operation error on server localhost:52053. Write error: WriteError{code=52, message='The dollar ($) prefixed field '$round' in 'state.aggregation.ranges.0.areaRange.range.from.$round' is not valid for storage.', details={}}.\norg.springframework.dao.DataIntegrityViolationException: Write operation error on server localhost:52053. Write error: WriteError{code=52, message='The dollar ($) prefixed field '$round' in 'state.aggregation.ranges.0.areaRange.range.from.$round' is not valid for storage.', details={}}.; nested exception is com.mongodb.MongoWriteException: Write operation error on server localhost:52053. Write error: WriteError{code=52, message='The dollar ($) prefixed field '$round' in 'state.aggregation.ranges.0.areaRange.range.from.$round' is not valid for storage.', details={}}.\n    at app//org.springframework.data.mongodb.core.MongoExceptionTranslator.translateExceptionIfPossible(MongoExceptionTranslator.java:117)\n    at app//org.springframework.data.mongodb.core.MongoTemplate.potentiallyConvertRuntimeException(MongoTemplate.java:3044)\n    at app//org.springframework.data.mongodb.core.MongoTemplate.execute(MongoTemplate.java:600)\n    at app//org.springframework.data.mongodb.core.MongoTemplate.doUpdate(MongoTemplate.java:1735)\n    at app//org.springframework.data.mongodb.core.MongoTemplate.updateMulti(MongoTemplate.java:1671)\n</code></pre>\n"},{"tags":["java","scala","compilation","jvm","whitelist"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1681070931,"post_id":75972601,"comment_id":133995995,"body_markdown":"I assume that the Scala uses the same format as Java&#39;s Jar file.  Those are just zip files.  Unzip the .jar file and look at all the classes.  That itself is a list of used classes.  Then you&#39;d need to decompile each class.  I believe any class names used by the class will also be in the .class file.  You should be able to assemble a list of used classes.  There&#39;s no automated way of doing this that I know of.","body":"I assume that the Scala uses the same format as Java&#39;s Jar file.  Those are just zip files.  Unzip the .jar file and look at all the classes.  That itself is a list of used classes.  Then you&#39;d need to decompile each class.  I believe any class names used by the class will also be in the .class file.  You should be able to assemble a list of used classes.  There&#39;s no automated way of doing this that I know of."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1681071021,"post_id":75972601,"comment_id":133996011,"body_markdown":"(post scriptum: I guess all that might not qualify as &quot;straightforward.&quot;)","body":"(post scriptum: I guess all that might not qualify as &quot;straightforward.&quot;)"},{"owner":{"account_id":5131293,"reputation":21831,"user_id":4111404,"accept_rate":80,"display_name":"Luis Miguel Mej&#237;a Su&#225;rez"},"score":1,"creation_date":1681075411,"post_id":75972601,"comment_id":133996516,"body_markdown":"You may write a **Scalafix** that performs the validation, and fail compilation of any used symbol doesn&#39;t belong to the white list. Not sure how straightforward it would be.","body":"You may write a <b>Scalafix</b> that performs the validation, and fail compilation of any used symbol doesn&#39;t belong to the white list. Not sure how straightforward it would be."},{"owner":{"account_id":1369470,"reputation":25454,"user_id":1305121,"accept_rate":90,"display_name":"Mateusz Kubuszok"},"score":1,"creation_date":1681125708,"post_id":75972601,"comment_id":134002052,"body_markdown":"Something similar has been done before, see this old attempt called &quot;scalazzi&quot;. It contains rules that blacklist some types/symbols etc rather than whitelist, but it might be good enough. https://github.com/scalaz/scalazzi/blob/master/scalafix.conf","body":"Something similar has been done before, see this old attempt called &quot;scalazzi&quot;. It contains rules that blacklist some types/symbols etc rather than whitelist, but it might be good enough. <a href=\"https://github.com/scalaz/scalazzi/blob/master/scalafix.conf\" rel=\"nofollow noreferrer\">github.com/scalaz/scalazzi/blob/master/scalafix.conf</a>"}],"owner":{"account_id":3965666,"reputation":641,"user_id":3271700,"accept_rate":41,"display_name":"errolflynn"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681070463,"creation_date":1681070463,"question_id":75972601,"body_markdown":"I&#39;m working on a project where I can use Scala and other JVM languages in a Java execution environment that only whitelists certain classes\r\n\r\nIs there a straightforward way to determine whether all Scala code in a file / project also fits within the whitelist bounds, or does there need to be a similar whitelist for Scala (and all other JVM languages like Groovy, Clojure, etc)\r\n\r\n\r\nFor reference:\r\n - [Whitelist class list](https://docs.icon.community/support/advanced-topics/java-smart-contracts/allowed-methods)\r\n - [Execution environment layer](https://github.com/icon-project/goloop/tree/master/javaee) that passes over the project before finishing compiling, enforcing whitelist","title":"Use Scala with limited Java environment","body":"<p>I'm working on a project where I can use Scala and other JVM languages in a Java execution environment that only whitelists certain classes</p>\n<p>Is there a straightforward way to determine whether all Scala code in a file / project also fits within the whitelist bounds, or does there need to be a similar whitelist for Scala (and all other JVM languages like Groovy, Clojure, etc)</p>\n<p>For reference:</p>\n<ul>\n<li><a href=\"https://docs.icon.community/support/advanced-topics/java-smart-contracts/allowed-methods\" rel=\"nofollow noreferrer\">Whitelist class list</a></li>\n<li><a href=\"https://github.com/icon-project/goloop/tree/master/javaee\" rel=\"nofollow noreferrer\">Execution environment layer</a> that passes over the project before finishing compiling, enforcing whitelist</li>\n</ul>\n"},{"tags":["java","rest","annotations","postman","httpresponse"],"comments":[{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":1,"creation_date":1681064972,"post_id":75972168,"comment_id":133995329,"body_markdown":"You get the entire user collection. You append them all to &#39;response&#39; and then write them all to the file.  That&#39;s why they&#39;re all in the file!  I don&#39;t know this &#39;messenger&#39; API, why can&#39;t you just get the one user?   But assuming you can&#39;t, then you need to iterate through the responses (as you already do) and find the id you want.  Then only write *that single entry* to the file.","body":"You get the entire user collection. You append them all to &#39;response&#39; and then write them all to the file.  That&#39;s why they&#39;re all in the file!  I don&#39;t know this &#39;messenger&#39; API, why can&#39;t you just get the one user?   But assuming you can&#39;t, then you need to iterate through the responses (as you already do) and find the id you want.  Then only write <i>that single entry</i> to the file."}],"answers":[{"tags":[],"owner":{"account_id":17875588,"reputation":38,"user_id":12985749,"display_name":"lilhitchcock"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681070030,"creation_date":1681064742,"answer_id":75972208,"question_id":75972168,"body_markdown":"Can you show your code for the http://localhost:8080/messenger/api/user/ endpoint? Seems like you never pass the ID to the endpoint, so the query is returning more users than you want. \r\n\r\nEdit the URL to include the userID, like so:\r\n\r\nSwitch \r\n\r\n    URL url = new URL(&quot;localhost:8080/messenger/api/user/&quot;);\r\n \r\nwith \r\n\r\n    URL url = new URL(&quot;localhost:8080/messenger/api/user/&quot;+ id);  \r\n\r\nor filter the responses based on userID when it returns the response by checking the userIDs on each line in your while loop for the scanner, before appending that line to the final result. ","title":"How can i get only one user by id?","body":"<p>Can you show your code for the http://localhost:8080/messenger/api/user/ endpoint? Seems like you never pass the ID to the endpoint, so the query is returning more users than you want.</p>\n<p>Edit the URL to include the userID, like so:</p>\n<p>Switch</p>\n<pre><code>URL url = new URL(&quot;localhost:8080/messenger/api/user/&quot;);\n</code></pre>\n<p>with</p>\n<pre><code>URL url = new URL(&quot;localhost:8080/messenger/api/user/&quot;+ id);  \n</code></pre>\n<p>or filter the responses based on userID when it returns the response by checking the userIDs on each line in your while loop for the scanner, before appending that line to the final result.</p>\n"}],"owner":{"account_id":22851545,"reputation":7,"user_id":16997079,"display_name":"HIZAM"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":285,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1681122081,"answer_count":1,"score":-1,"last_activity_date":1681070030,"creation_date":1681064226,"question_id":75972168,"body_markdown":"  \r\n\r\n \r\n    class UserRepository {\r\n     public User getById(long id) {\r\n            logger.info(&quot;Get User by id: &quot; + id);\r\n            return entityManager.find(User.class, id);\r\n        }\r\n    }\r\n    class UserRest {\r\n    @GET\r\n        @Path(&quot;/{id}&quot;)\r\n        @Produces(MediaType.APPLICATION_JSON)\r\n        public User getUserById(@PathParam(&quot;id&quot;) long id) throws IOException {\r\n                URL url = new URL(&quot;http://localhost:8080/messenger/api/user/&quot;);\r\n                HttpURLConnection connection = (HttpURLConnection) url.openConnection();\r\n            int responseCode = connection.getResponseCode();\r\n            if(responseCode != 200) {\r\n                System.out.println(&quot;Error: Response code &quot; + responseCode);\r\n            }\r\n                Scanner scanner = new Scanner(url.openStream());\r\n                StringBuilder response = new StringBuilder();\r\n                while (scanner.hasNext()) {\r\n                    response.append(scanner.nextLine());\r\n                }\r\n                scanner.close();\r\n                String responseData = response.toString();\r\n                FileWriter fileWriter = new FileWriter(\r\n                        &quot;C:\\\\Users\\\\ETHAN\\\\Downloads\\\\My_Java_Solutions-main (7)\\\\My_Java_Solutions-main\\\\service_example\\\\output.txt&quot;); \r\n                PrintWriter printWriter = new PrintWriter(fileWriter);\r\n                printWriter.print(responseData);\r\n                printWriter.close();\r\n                logger.info(&quot;Data saved to file.&quot;);\r\n                return userRepository.getById(id);\r\n        }\r\n    }\r\n**The result i get in txt file**\r\n[{&quot;id&quot;:15,&quot;nick_name&quot;:&quot;freddy&quot;,&quot;userType&quot;:&quot;user&quot;},{&quot;id&quot;:17,&quot;nick_name&quot;:&quot;samy&quot;,&quot;userType&quot;:&quot;user&quot;},{&quot;id&quot;:29,&quot;nick_name&quot;:&quot;klien&quot;,&quot;userType&quot;:&quot;user&quot;},{&quot;id&quot;:20,&quot;nick_name&quot;:&quot;sam&quot;,&quot;userType&quot;:&quot;user&quot;}]\r\n**The result i wanted to be in txt file is**\r\n{&quot;id&quot;:15,&quot;nick_name&quot;:&quot;freddy&quot;,&quot;userType&quot;:&quot;user&quot;}","title":"How can i get only one user by id?","body":"<pre><code>class UserRepository {\n public User getById(long id) {\n        logger.info(&quot;Get User by id: &quot; + id);\n        return entityManager.find(User.class, id);\n    }\n}\nclass UserRest {\n@GET\n    @Path(&quot;/{id}&quot;)\n    @Produces(MediaType.APPLICATION_JSON)\n    public User getUserById(@PathParam(&quot;id&quot;) long id) throws IOException {\n            URL url = new URL(&quot;http://localhost:8080/messenger/api/user/&quot;);\n            HttpURLConnection connection = (HttpURLConnection) url.openConnection();\n        int responseCode = connection.getResponseCode();\n        if(responseCode != 200) {\n            System.out.println(&quot;Error: Response code &quot; + responseCode);\n        }\n            Scanner scanner = new Scanner(url.openStream());\n            StringBuilder response = new StringBuilder();\n            while (scanner.hasNext()) {\n                response.append(scanner.nextLine());\n            }\n            scanner.close();\n            String responseData = response.toString();\n            FileWriter fileWriter = new FileWriter(\n                    &quot;C:\\\\Users\\\\ETHAN\\\\Downloads\\\\My_Java_Solutions-main (7)\\\\My_Java_Solutions-main\\\\service_example\\\\output.txt&quot;); \n            PrintWriter printWriter = new PrintWriter(fileWriter);\n            printWriter.print(responseData);\n            printWriter.close();\n            logger.info(&quot;Data saved to file.&quot;);\n            return userRepository.getById(id);\n    }\n}\n</code></pre>\n<p><strong>The result i get in txt file</strong>\n[{&quot;id&quot;:15,&quot;nick_name&quot;:&quot;freddy&quot;,&quot;userType&quot;:&quot;user&quot;},{&quot;id&quot;:17,&quot;nick_name&quot;:&quot;samy&quot;,&quot;userType&quot;:&quot;user&quot;},{&quot;id&quot;:29,&quot;nick_name&quot;:&quot;klien&quot;,&quot;userType&quot;:&quot;user&quot;},{&quot;id&quot;:20,&quot;nick_name&quot;:&quot;sam&quot;,&quot;userType&quot;:&quot;user&quot;}]\n<strong>The result i wanted to be in txt file is</strong>\n{&quot;id&quot;:15,&quot;nick_name&quot;:&quot;freddy&quot;,&quot;userType&quot;:&quot;user&quot;}</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":2063414,"reputation":41809,"user_id":1839482,"accept_rate":19,"display_name":"Arghya Sadhu"},"score":0,"creation_date":1580013079,"post_id":59915538,"comment_id":105955809,"body_markdown":"can you share your project structure?","body":"can you share your project structure?"},{"owner":{"account_id":13880696,"reputation":77,"user_id":10021134,"display_name":"Bhargav Netha"},"score":0,"creation_date":1580013655,"post_id":59915538,"comment_id":105955881,"body_markdown":"I&#39;ve updated the image of my project structure!","body":"I&#39;ve updated the image of my project structure!"}],"answers":[{"tags":[],"owner":{"account_id":2063414,"reputation":41809,"user_id":1839482,"accept_rate":19,"display_name":"Arghya Sadhu"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1580014061,"creation_date":1580013716,"answer_id":59915613,"question_id":59915538,"body_markdown":"The issue is related to your project structure, by default Spring Boot will scan the components below your main application class.\r\n\r\nIn your case your main is located at package `com.navajna.aaa`, and your controller is located at package `com.navajna.controller`.\r\n\r\nI would recommend you to keep your controller in a new package below the `com.navajna.aaa` package, like `com.navajna.aaa.controller` as per structure mentioned in the [documentation][1].\r\n\r\nIf you really want to use the `com.navajna.controller` package, you may need to add the `@ComponentScan(&quot;com.navajna.controller&quot;)`.Details [here][2].\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/using-spring-boot.html#using-boot-structuring-your-code\r\n  [2]: https://docs.spring.io/spring-boot/docs/current/reference/html/using-spring-boot.html#using-boot-using-springbootapplication-annotation","title":"Whitelabel Error Page, This application has no explicit mapping for /error, so you are seeing this as a fallback","body":"<p>The issue is related to your project structure, by default Spring Boot will scan the components below your main application class.</p>\n\n<p>In your case your main is located at package <code>com.navajna.aaa</code>, and your controller is located at package <code>com.navajna.controller</code>.</p>\n\n<p>I would recommend you to keep your controller in a new package below the <code>com.navajna.aaa</code> package, like <code>com.navajna.aaa.controller</code> as per structure mentioned in the <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/using-spring-boot.html#using-boot-structuring-your-code\" rel=\"noreferrer\">documentation</a>.</p>\n\n<p>If you really want to use the <code>com.navajna.controller</code> package, you may need to add the <code>@ComponentScan(\"com.navajna.controller\")</code>.Details <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/using-spring-boot.html#using-boot-using-springbootapplication-annotation\" rel=\"noreferrer\">here</a>.</p>\n"}],"owner":{"account_id":13880696,"reputation":77,"user_id":10021134,"display_name":"Bhargav Netha"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21587,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1681069697,"creation_date":1580012687,"question_id":59915538,"body_markdown":"[enter image description here][1]This is my Controller, I&#39;m accessing with port localhost:8080 it is returning white label error. What may be the  reason?\r\n    \r\n\r\n   \r\n\r\n    @RestController \r\n    public class EmployeeController {\r\n    \r\n    @GetMapping(&quot;/&quot;) \t\r\n    public String hello() { \t\t\r\n    return &quot;service is up and running&quot;; \t\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/jpFTo.jpg","title":"Whitelabel Error Page, This application has no explicit mapping for /error, so you are seeing this as a fallback","body":"<p><a href=\"https://i.stack.imgur.com/jpFTo.jpg\" rel=\"nofollow noreferrer\">enter image description here</a>This is my Controller, I'm accessing with port localhost:8080 it is returning white label error. What may be the  reason?</p>\n\n<pre><code>@RestController \npublic class EmployeeController {\n\n@GetMapping(\"/\")    \npublic String hello() {         \nreturn \"service is up and running\";     \n}\n</code></pre>\n"},{"tags":["java","csv"],"answers":[{"tags":[],"owner":{"account_id":2591552,"reputation":3024,"user_id":2246164,"accept_rate":74,"display_name":"Berendschot"},"down_vote_count":1,"up_vote_count":6,"is_accepted":true,"score":5,"last_activity_date":1448720506,"creation_date":1448719886,"answer_id":33972261,"question_id":33972243,"body_markdown":"Use `FileReader.readLine()` before starting the `for-loop`.\r\n\r\n**Your example:**\r\n\r\n    private void parse() throws Exception {\r\n      FileReader reader = new FileReader(&quot;example.csv&quot;);\r\n      reader.readLine(); // Read the first/current line.\r\n    \r\n      Iterable &lt;CSVRecord&gt; records = CSVFormat.EXCEL.withQuote(&#39;&quot;&#39;).withDelimiter(&#39;;&#39;).parse(reader);\r\n      for (CSVRecord csvRecord: records) {\r\n        // do something\r\n      }\r\n    }\r\n\r\n   ","title":"Apache commons csv skip lines","body":"<p>Use <code>FileReader.readLine()</code> before starting the <code>for-loop</code>.</p>\n\n<p><strong>Your example:</strong></p>\n\n<pre><code>private void parse() throws Exception {\n  FileReader reader = new FileReader(\"example.csv\");\n  reader.readLine(); // Read the first/current line.\n\n  Iterable &lt;CSVRecord&gt; records = CSVFormat.EXCEL.withQuote('\"').withDelimiter(';').parse(reader);\n  for (CSVRecord csvRecord: records) {\n    // do something\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1936546,"reputation":133665,"user_id":1743880,"accept_rate":100,"display_name":"Tunaki"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1448720925,"creation_date":1448720611,"answer_id":33972364,"question_id":33972243,"body_markdown":"There is no built-in facility to skip an unknown number of lines.\r\n\r\nIf you want to skip only the first line (the header line), you can call `withSkipHeaderRecord()` while building the parser.\r\n\r\nA more general solution would be to call `next()` on the iterator:\r\n\r\n\tIterable&lt;CSVRecord&gt; parser = CSVFormat.DEFAULT.parse(new FileReader(&quot;example.csv&quot;));\r\n\tIterator&lt;CSVRecord&gt; iterator = parser.iterator();\r\n\r\n\tfor (int i = 0; i &lt; amountToSkip; i++) {\r\n\t\tif (iterator.hasNext()) {\r\n\t\t\titerator.next();\r\n\t\t}\r\n\t}\r\n\t\r\n\twhile (iterator.hasNext()) {\r\n\t\tCSVRecord record = iterator.next();\r\n\t\tSystem.out.println(record);\r\n\t}","title":"Apache commons csv skip lines","body":"<p>There is no built-in facility to skip an unknown number of lines.</p>\n\n<p>If you want to skip only the first line (the header line), you can call <code>withSkipHeaderRecord()</code> while building the parser.</p>\n\n<p>A more general solution would be to call <code>next()</code> on the iterator:</p>\n\n<pre><code>Iterable&lt;CSVRecord&gt; parser = CSVFormat.DEFAULT.parse(new FileReader(\"example.csv\"));\nIterator&lt;CSVRecord&gt; iterator = parser.iterator();\n\nfor (int i = 0; i &lt; amountToSkip; i++) {\n    if (iterator.hasNext()) {\n        iterator.next();\n    }\n}\n\nwhile (iterator.hasNext()) {\n    CSVRecord record = iterator.next();\n    System.out.println(record);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":329138,"reputation":8059,"user_id":652497,"accept_rate":91,"display_name":"Jonathan S. Fisher"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1557859764,"creation_date":1557859764,"answer_id":56136750,"question_id":33972243,"body_markdown":"So `CSVParser.iterator()` _should most definitely not_ throw an exception on `iterator.hasNext()` as it makes it near impossible to recover during an error condition.\r\n\r\nBut where there is a will there is a way, and I present a _Terrible Idea that sorta works_\r\n\r\n```\r\n\tpublic void runOnFile(Path file) {\r\n\t\ttry {\r\n\t\t\tBufferedReader in = fixHeaders(file);\r\n\t\t\tCSVParser parsed = CSVFormat.DEFAULT.withFirstRecordAsHeader().parse(in);\r\n\t\t\tMap&lt;String, Integer&gt; headerMap = parsed.getHeaderMap();\r\n\r\n\t\t\tString line;\r\n\t\t\twhile ((line = in.readLine()) != null) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tCSVRecord record = CSVFormat.DEFAULT.withHeader(headerMap.keySet().toArray(new String[headerMap.keySet().size()]))\r\n\t\t\t\t\t\t\t.parse(new StringReader(line)).getRecords().get(0);\r\n\t\t\t\t\t// do something with your record\r\n\t\t\t\t} catch (Exception e) {\r\n\t\t\t\t\tSystem.out.println(&quot;ignoring line:&quot; + line);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (Exception e) {\r\n\t\t\tthrow new RuntimeException(e);\r\n\t\t}\r\n\t}\r\n ```","title":"Apache commons csv skip lines","body":"<p>So <code>CSVParser.iterator()</code> <em>should most definitely not</em> throw an exception on <code>iterator.hasNext()</code> as it makes it near impossible to recover during an error condition.</p>\n\n<p>But where there is a will there is a way, and I present a <em>Terrible Idea that sorta works</em></p>\n\n<pre><code>    public void runOnFile(Path file) {\n        try {\n            BufferedReader in = fixHeaders(file);\n            CSVParser parsed = CSVFormat.DEFAULT.withFirstRecordAsHeader().parse(in);\n            Map&lt;String, Integer&gt; headerMap = parsed.getHeaderMap();\n\n            String line;\n            while ((line = in.readLine()) != null) {\n                try {\n                    CSVRecord record = CSVFormat.DEFAULT.withHeader(headerMap.keySet().toArray(new String[headerMap.keySet().size()]))\n                            .parse(new StringReader(line)).getRecords().get(0);\n                    // do something with your record\n                } catch (Exception e) {\n                    System.out.println(\"ignoring line:\" + line);\n                }\n            }\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22738280,"reputation":1,"user_id":16900191,"display_name":"Rinky"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631542469,"creation_date":1631542469,"answer_id":69164238,"question_id":33972243,"body_markdown":"You can skip the header line using this \r\n\r\n```\r\n        Reader excelInput = new FileReader(&quot;example.csv&quot;);\r\n\r\n        CSVFormat csvFormat = CSVFormat.EXCEL.withSkipHeaderRecord(true).withHeader(&quot;Arm1&quot;, &quot;Arm2&quot;, &quot;Arm3&quot;, &quot;Arm4&quot;,\r\n            &quot;Arm5&quot;, &quot;Arm6&quot;);\r\n\r\n        CSVParser csvParser = new CSVParser(excelInput, csvFormat);\r\n```\r\nThe key point is to set `withSkipHeaderRecord()` to `true` and also specify the headers that you want to skip inside `withHeader()`.\r\n\r\nIf you are aware of the line numbers you want to skip, you could do something like this:\r\n\r\n```\r\nfor(CVSRecord csvRecord: CSVParser){\r\n   if(csvRecord.getRecordNumber() == 1){\r\n      continue;\r\n  } \r\n} \r\n```\r\nwhere line 1 is what you want to skip.","title":"Apache commons csv skip lines","body":"<p>You can skip the header line using this</p>\n<pre><code>        Reader excelInput = new FileReader(&quot;example.csv&quot;);\n\n        CSVFormat csvFormat = CSVFormat.EXCEL.withSkipHeaderRecord(true).withHeader(&quot;Arm1&quot;, &quot;Arm2&quot;, &quot;Arm3&quot;, &quot;Arm4&quot;,\n            &quot;Arm5&quot;, &quot;Arm6&quot;);\n\n        CSVParser csvParser = new CSVParser(excelInput, csvFormat);\n</code></pre>\n<p>The key point is to set <code>withSkipHeaderRecord()</code> to <code>true</code> and also specify the headers that you want to skip inside <code>withHeader()</code>.</p>\n<p>If you are aware of the line numbers you want to skip, you could do something like this:</p>\n<pre><code>for(CVSRecord csvRecord: CSVParser){\n   if(csvRecord.getRecordNumber() == 1){\n      continue;\n  } \n} \n</code></pre>\n<p>where line 1 is what you want to skip.</p>\n"},{"tags":[],"owner":{"account_id":27125303,"reputation":1,"user_id":20668430,"display_name":"Kevin Hildner"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669999494,"creation_date":1669999494,"answer_id":74658942,"question_id":33972243,"body_markdown":"Check out CSVRecord.isConsistent() - which returns true if the record&#39;s size matches the header. I&#39;ve had good success using this in conjunction with proper header setting on my CSVFormat.","title":"Apache commons csv skip lines","body":"<p>Check out CSVRecord.isConsistent() - which returns true if the record's size matches the header. I've had good success using this in conjunction with proper header setting on my CSVFormat.</p>\n"},{"tags":[],"owner":{"account_id":20375424,"reputation":517,"user_id":14946729,"display_name":"grigouille"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681069536,"creation_date":1681069536,"answer_id":75972536,"question_id":33972243,"body_markdown":"If you know the headers is advance, it&#39;s easy :\r\n\r\n    CSVFormat format;\r\n    \r\n    String[] headers;\r\n    format = format.builder().setHeader(headers).build();\r\n    try(Reader reader = getReader()) {\r\n      Iterator&lt;CSVRecord&gt; iter = format.parse(reader).iterator();\r\n      //skip record\r\n      if(iter.hasNext()) iter.next();\r\n      //skip record\r\n      if(iter.hasNext()) iter.next();\r\n\r\n      while(iter.hasNext()) {\r\n        CSVRecord record = iter.next();\r\n        //do stuff\r\n      }\r\n    }\r\nIf you don&#39;t know the headers you have to read twice (if possible) :\r\n\r\n    List&lt;String&gt; headers = null;\r\n    try(Reader reader = getReader() {\r\n      Iterator&lt;CSVRecord&gt; iter = format.parse(reader).iterator();\r\n      //skip record\r\n      if(iter.hasNext()) iter.next();\r\n      if(iter.hasNext()) headers = iter.next().toList();\r\n    }\r\n\r\n    if(headers == null) return;\r\n\r\n    //now read again\r\n    try(Reader reader = getReader() {\r\n      format = format.builder().setHeader(headers.toArray(new String[0])).build();\r\n      iter = format.parse(reader).iterator();\r\n      if(iter.hasNext()) iter.next();\r\n      if(iter.hasNext()) iter.next();\r\n      while(iter.hasNext()) {\r\n        CSVRecord record = iter.next();\r\n        // do stuff\r\n      }\r\n    }\r\n","title":"Apache commons csv skip lines","body":"<p>If you know the headers is advance, it's easy :</p>\n<pre><code>CSVFormat format;\n\nString[] headers;\nformat = format.builder().setHeader(headers).build();\ntry(Reader reader = getReader()) {\n  Iterator&lt;CSVRecord&gt; iter = format.parse(reader).iterator();\n  //skip record\n  if(iter.hasNext()) iter.next();\n  //skip record\n  if(iter.hasNext()) iter.next();\n\n  while(iter.hasNext()) {\n    CSVRecord record = iter.next();\n    //do stuff\n  }\n}\n</code></pre>\n<p>If you don't know the headers you have to read twice (if possible) :</p>\n<pre><code>List&lt;String&gt; headers = null;\ntry(Reader reader = getReader() {\n  Iterator&lt;CSVRecord&gt; iter = format.parse(reader).iterator();\n  //skip record\n  if(iter.hasNext()) iter.next();\n  if(iter.hasNext()) headers = iter.next().toList();\n}\n\nif(headers == null) return;\n\n//now read again\ntry(Reader reader = getReader() {\n  format = format.builder().setHeader(headers.toArray(new String[0])).build();\n  iter = format.parse(reader).iterator();\n  if(iter.hasNext()) iter.next();\n  if(iter.hasNext()) iter.next();\n  while(iter.hasNext()) {\n    CSVRecord record = iter.next();\n    // do stuff\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":6574067,"reputation":267,"user_id":5080884,"accept_rate":40,"display_name":"g6380647"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12283,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":33972261,"answer_count":6,"score":9,"last_activity_date":1681069536,"creation_date":1448719768,"question_id":33972243,"body_markdown":"How to skip lines in input file with [apache commons csv](https://commons.apache.org/proper/commons-csv/). In my file first few lines are &lt;s&gt;garbage&lt;/s&gt; useful meta-information like date, etc. Can&#39;t find any options for this.\r\n\r\n\r\n\r\n    private void parse() throws Exception {\r\n        Iterable&lt;CSVRecord&gt; records = CSVFormat.EXCEL\r\n                .withQuote(&#39;&quot;&#39;).withDelimiter(&#39;;&#39;).parse(new FileReader(&quot;example.csv&quot;));\r\n        for (CSVRecord csvRecord : records) {\r\n            //do something            \r\n        }\r\n    }","title":"Apache commons csv skip lines","body":"<p>How to skip lines in input file with <a href=\"https://commons.apache.org/proper/commons-csv/\" rel=\"noreferrer\">apache commons csv</a>. In my file first few lines are <s>garbage</s> useful meta-information like date, etc. Can't find any options for this.</p>\n\n<pre><code>private void parse() throws Exception {\n    Iterable&lt;CSVRecord&gt; records = CSVFormat.EXCEL\n            .withQuote('\"').withDelimiter(';').parse(new FileReader(\"example.csv\"));\n    for (CSVRecord csvRecord : records) {\n        //do something            \n    }\n}\n</code></pre>\n"},{"tags":["java","maven","github","github-package-registry"],"comments":[{"owner":{"account_id":7137920,"reputation":1714,"user_id":5456789,"display_name":"Amir Azizkhani"},"score":0,"creation_date":1681015850,"post_id":75968623,"comment_id":133989941,"body_markdown":"problem is in `com.fatec.stacktec.persistenceapi.model.user.Role` class. what is this? is this in your dependencies or this is part of your project classes?","body":"problem is in <code>com.fatec.stacktec.persistenceapi.model.user.Role</code> class. what is this? is this in your dependencies or this is part of your project classes?"},{"owner":{"account_id":24992605,"reputation":41,"user_id":18853627,"display_name":"Isaque Chaves"},"score":0,"creation_date":1681017906,"post_id":75968623,"comment_id":133990057,"body_markdown":"This class (Role) is from the persistence-api, isn&#39;t from dependencies","body":"This class (Role) is from the persistence-api, isn&#39;t from dependencies"},{"owner":{"account_id":24992605,"reputation":41,"user_id":18853627,"display_name":"Isaque Chaves"},"score":0,"creation_date":1681017948,"post_id":75968623,"comment_id":133990062,"body_markdown":"This is one of the 30 errors I&#39;m facing from importing classes from the other project (search-api)","body":"This is one of the 30 errors I&#39;m facing from importing classes from the other project (search-api)"},{"owner":{"account_id":24992605,"reputation":41,"user_id":18853627,"display_name":"Isaque Chaves"},"score":0,"creation_date":1681018398,"post_id":75968623,"comment_id":133990093,"body_markdown":"I updated the question with all the errors, It seems a problem with my dependency, but in the log it says the download completed","body":"I updated the question with all the errors, It seems a problem with my dependency, but in the log it says the download completed"},{"owner":{"account_id":7137920,"reputation":1714,"user_id":5456789,"display_name":"Amir Azizkhani"},"score":0,"creation_date":1681021174,"post_id":75968623,"comment_id":133990323,"body_markdown":"It&#39;s better to share your project in github. Probably you missed something that you don&#39;t mentioned it here","body":"It&#39;s better to share your project in github. Probably you missed something that you don&#39;t mentioned it here"},{"owner":{"account_id":6518557,"reputation":2810,"user_id":5043481,"display_name":"zforgo"},"score":0,"creation_date":1681021613,"post_id":75968623,"comment_id":133990345,"body_markdown":"Both pom snippet is for `persistence-api` and the pom of `search-api` is missing. Please edit question and add missing pom snippet.","body":"Both pom snippet is for <code>persistence-api</code> and the pom of <code>search-api</code> is missing. Please edit question and add missing pom snippet."},{"owner":{"account_id":24992605,"reputation":41,"user_id":18853627,"display_name":"Isaque Chaves"},"score":0,"creation_date":1681021999,"post_id":75968623,"comment_id":133990374,"body_markdown":"I updated the question with the correct pom snippet.\n @AmirAzizkhani, here&#39;s the link for projects in Github: \nhttps://github.com/isaquechaves/persistence-api -\nhttps://github.com/isaquechaves/StackTec-API","body":"I updated the question with the correct pom snippet.  @AmirAzizkhani, here&#39;s the link for projects in Github:  <a href=\"https://github.com/isaquechaves/persistence-api\" rel=\"nofollow noreferrer\">github.com/isaquechaves/persistence-api</a> - <a href=\"https://github.com/isaquechaves/StackTec-API\" rel=\"nofollow noreferrer\">github.com/isaquechaves/StackTec-API</a>"},{"owner":{"account_id":24992605,"reputation":41,"user_id":18853627,"display_name":"Isaque Chaves"},"score":0,"creation_date":1681022396,"post_id":75968623,"comment_id":133990403,"body_markdown":"I forgot to add the link for the repo of snapshots: https://github.com/isaquechaves/maven-repository/packages/","body":"I forgot to add the link for the repo of snapshots: <a href=\"https://github.com/isaquechaves/maven-repository/packages/\" rel=\"nofollow noreferrer\">github.com/isaquechaves/maven-repository/packages</a>"},{"owner":{"account_id":7137920,"reputation":1714,"user_id":5456789,"display_name":"Amir Azizkhani"},"score":0,"creation_date":1681024517,"post_id":75968623,"comment_id":133990584,"body_markdown":"before trying to install `persistence-api`, you need to install `search-api`. because these project aren&#39;t in the same parent module. I tested it and I didn&#39;t see any problem","body":"before trying to install <code>persistence-api</code>, you need to install <code>search-api</code>. because these project aren&#39;t in the same parent module. I tested it and I didn&#39;t see any problem"},{"owner":{"account_id":24992605,"reputation":41,"user_id":18853627,"display_name":"Isaque Chaves"},"score":0,"creation_date":1681056013,"post_id":75968623,"comment_id":133994142,"body_markdown":"@AmirAzizkhani, I installed search-api before trying to install persistence, but what I noticed, sometimes it works, but sometimes don&#39;t, I don&#39;t know what could be. When it happened, I try to clean the search-api project and persistence, and install search-api, and worked, I don&#39;t know if it&#39;s some problem with the cache, because sometimes it didn&#39;t work at all, and I have forced Maven update snapshots, then started to work after run clean and install in both projects","body":"@AmirAzizkhani, I installed search-api before trying to install persistence, but what I noticed, sometimes it works, but sometimes don&#39;t, I don&#39;t know what could be. When it happened, I try to clean the search-api project and persistence, and install search-api, and worked, I don&#39;t know if it&#39;s some problem with the cache, because sometimes it didn&#39;t work at all, and I have forced Maven update snapshots, then started to work after run clean and install in both projects"}],"answers":[{"tags":[],"owner":{"account_id":4433743,"reputation":2585,"user_id":3610183,"accept_rate":87,"display_name":"rainman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681016054,"creation_date":1681016054,"answer_id":75968832,"question_id":75968623,"body_markdown":"The class Role is not located in the package indicated in the code `com.fatec.stacktec.searchapi.holder.user` you should either change the package in the Role.java or place the file Role.java in the mentioned package.","title":"Maven it&#39;s installing dependencies from Github packages, but when performing Maven install it&#39;s giving error","body":"<p>The class Role is not located in the package indicated in the code <code>com.fatec.stacktec.searchapi.holder.user</code> you should either change the package in the Role.java or place the file Role.java in the mentioned package.</p>\n"},{"tags":[],"owner":{"account_id":24992605,"reputation":41,"user_id":18853627,"display_name":"Isaque Chaves"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1681069430,"creation_date":1681069430,"answer_id":75972532,"question_id":75968623,"body_markdown":"As @Amir Azizkhan said &quot;before trying to install persistence-api, you need to install search-api. because these project aren&#39;t in the same parent module. I tested it and I didn&#39;t see any problem&quot;\r\n\r\nThe problem seems resolved, probably some errors with Maven cache, my configs seem to be correct, so I&#39;m closing this question, thank you all for helping me!","title":"Maven it&#39;s installing dependencies from Github packages, but when performing Maven install it&#39;s giving error","body":"<p>As @Amir Azizkhan said &quot;before trying to install persistence-api, you need to install search-api. because these project aren't in the same parent module. I tested it and I didn't see any problem&quot;</p>\n<p>The problem seems resolved, probably some errors with Maven cache, my configs seem to be correct, so I'm closing this question, thank you all for helping me!</p>\n"}],"owner":{"account_id":24992605,"reputation":41,"user_id":18853627,"display_name":"Isaque Chaves"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75972532,"answer_count":2,"score":0,"last_activity_date":1681069430,"creation_date":1681010575,"question_id":75968623,"body_markdown":"I&#39;ve created two projects, one is an API (I&#39;ll call it search-api) to elasticsearch and the other an API (persistence-api) to postgreSQL, I need to have search-api as an dependency in persistence-api.\r\n\r\nI fallowed the docs and I&#39;ve watched some videos, but nothing seems to work when I&#39;m performing the maven command &quot;install -D skipTests&quot;\r\n\r\nHere&#39;s my files:\r\n\r\nsearch-api&#39;s pom:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.2.1.RELEASE&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.fatec.stacktec&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;search-api&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.3-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;search-api&lt;/name&gt;\r\n\t&lt;description&gt;Completeltion project of the Systems Development Analysis course.&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n\t  \t&lt;github.global.server&gt;github&lt;/github.global.server&gt;\r\n\t&lt;/properties&gt;\r\n\t\r\n    \r\n\t&lt;repositories&gt;\r\n\t\t&lt;repository&gt;\r\n\t\t\t&lt;id&gt;github&lt;/id&gt;\r\n\t\t\t&lt;url&gt;https://maven.pkg.github.com/isaqueChaves/maven-repository&lt;/url&gt;\r\n\t\t\t&lt;releases&gt;\r\n\t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n\t\t\t\t&lt;updatePolicy&gt;always&lt;/updatePolicy&gt;\r\n\t\t\t&lt;/releases&gt;\r\n\t\t\t&lt;snapshots&gt;\r\n\t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n\t\t\t\t&lt;updatePolicy&gt;always&lt;/updatePolicy&gt;\r\n\t\t\t&lt;/snapshots&gt;\r\n\t\t&lt;/repository&gt;\r\n\t&lt;/repositories&gt;\r\n\t\r\n\t&lt;distributionManagement&gt;\r\n   \t\t&lt;repository&gt;\r\n     \t\t&lt;id&gt;github&lt;/id&gt;\r\n     \t\t&lt;name&gt;GitHub isaqueChaves Apache Maven Packages&lt;/name&gt;\r\n     \t\t&lt;url&gt;https://maven.pkg.github.com/isaqueChaves/maven-repository&lt;/url&gt;\r\n   \t\t&lt;/repository&gt;\r\n\t&lt;/distributionManagement&gt;\r\n\t\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.8.1&lt;/version&gt;     \r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;source&gt;11&lt;/source&gt;\r\n\t\t\t\t\t&lt;forceJavacCompilerUse&gt;true&lt;/forceJavacCompilerUse&gt;\r\n\t\t\t\t&lt;/configuration&gt;           \r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\npersistence-api&#39;s pom:\r\n\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.2.1.RELEASE&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.fatec.stacktec&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;persistence-api&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.3-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;persistence-api&lt;/name&gt;\r\n\t&lt;description&gt;Persistence API for relational and NoSQL DB&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n\t\t&lt;stacktec-search-api.version&gt;0.0.3-SNAPSHOT&lt;/stacktec-search-api.version&gt;\t    \r\n\t&lt;/properties&gt;\t\r\n\t\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t  &lt;groupId&gt;com.fatec.stacktec&lt;/groupId&gt;\r\n\t\t  &lt;artifactId&gt;search-api&lt;/artifactId&gt;\r\n\t\t  &lt;version&gt;0.0.3-SNAPSHOT&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n   &lt;/dependencies&gt;\r\n\r\n    &lt;repositories&gt;\r\n\t\t&lt;repository&gt;\r\n\t      &lt;id&gt;central&lt;/id&gt;\r\n\t      &lt;url&gt;https://repo1.maven.org/maven2&lt;/url&gt;\r\n\t      &lt;releases&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/releases&gt;\r\n\t      &lt;snapshots&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/snapshots&gt;\r\n\t    &lt;/repository&gt;\r\n\t\t&lt;repository&gt;\r\n\t\t\t&lt;id&gt;github&lt;/id&gt;\r\n\t\t\t&lt;url&gt;https://maven.pkg.github.com/isaqueChaves/maven-repository&lt;/url&gt;\t\t\t\t\r\n\t\t\t&lt;releases&gt;\r\n\t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n\t\t\t\t&lt;updatePolicy&gt;always&lt;/updatePolicy&gt;\r\n\t\t\t&lt;/releases&gt;\r\n\t\t\t&lt;snapshots&gt;\r\n\t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n\t\t\t\t&lt;updatePolicy&gt;always&lt;/updatePolicy&gt;\r\n\t\t\t&lt;/snapshots&gt;\t\t\r\n\t\t&lt;/repository&gt;\r\n\t&lt;/repositories&gt;\r\n\t\r\n\t&lt;distributionManagement&gt;\r\n\t\t&lt;snapshotRepository&gt;\r\n\t\t\t&lt;id&gt;github&lt;/id&gt;\r\n\t\t\t&lt;url&gt;https://maven.pkg.github.com/isaqueChaves/maven-repository&lt;/url&gt;\r\n\t\t&lt;/snapshotRepository&gt;\r\n   \t\t&lt;repository&gt;\r\n     \t\t&lt;id&gt;github&lt;/id&gt;\r\n     \t\t&lt;name&gt;GitHub isaqueChaves Apache Maven Packages&lt;/name&gt;\r\n     \t\t&lt;url&gt;https://maven.pkg.github.com/isaqueChaves/maven-repository&lt;/url&gt;\r\n   \t\t&lt;/repository&gt;\r\n\t&lt;/distributionManagement&gt;\r\n\t\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;     \r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;forceJavacCompilerUse&gt;true&lt;/forceJavacCompilerUse&gt;\r\n\t\t\t\t&lt;/configuration&gt;           \r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\t\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\nMaven settings.xml:\r\n```\r\n&lt;settings xmlns=&quot;http://maven.apache.org/SETTINGS/1.0.0&quot;\r\n  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n  xsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.0.0\r\n                      http://maven.apache.org/xsd/settings-1.0.0.xsd&quot;&gt;\r\n\r\n  &lt;activeProfiles&gt;\r\n    &lt;activeProfile&gt;github&lt;/activeProfile&gt;\r\n  &lt;/activeProfiles&gt;\r\n  \r\n  &lt;profiles&gt;\r\n  \r\n    &lt;profile&gt;\r\n      &lt;id&gt;github&lt;/id&gt;\r\n      &lt;repositories&gt;\r\n        &lt;repository&gt;\r\n          &lt;id&gt;central&lt;/id&gt;\r\n          &lt;url&gt;https://repo1.maven.org/maven2&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n        &lt;repository&gt;\r\n          &lt;id&gt;github&lt;/id&gt;\r\n          &lt;url&gt;https://maven.pkg.github.com/isaqueChaves/maven-repository&lt;/url&gt;        \r\n        &lt;/repository&gt;\r\n      &lt;/repositories&gt;\r\n    &lt;/profile&gt;\r\n  &lt;/profiles&gt;\r\n\r\n  &lt;servers&gt;\r\n    &lt;server&gt;\r\n      &lt;id&gt;github&lt;/id&gt;\r\n      &lt;username&gt;isaquechaves&lt;/username&gt;\r\n      &lt;password&gt;&gt;mytoken&lt;/password&gt;\r\n    &lt;/server&gt;\r\n  &lt;/servers&gt;\r\n&lt;/settings&gt;\r\n```\r\n\r\nAnd here&#39;s the output when I run &quot;maven install -D skipTests&quot;:\r\n\r\n```\r\n Downloading from : https://repo1.maven.org/maven2/com/fatec/stacktec/search-api/0.0.3-SNAPSHOT/search-api-0.0.3-20230409.024122-1.pom\r\n Downloading from : https://maven.pkg.github.com/isaqueChaves/maven-repository/com/fatec/stacktec/search-api/0.0.3-SNAPSHOT/search-api-0.0.3-20230409.024122-1.pom\r\nDownloaded from : https://maven.pkg.github.com/isaqueChaves/maven-repository/com/fatec/stacktec/search-api/0.0.3-SNAPSHOT/search-api-0.0.3-20230409.024122-1.pom (3.1 kB at 3.3 kB/s)\r\n Downloading from : https://maven.pkg.github.com/isaqueChaves/maven-repository/com/fatec/stacktec/search-api/0.0.3-SNAPSHOT/search-api-0.0.3-20230409.024122-1.jar\r\nDownloaded from : https://maven.pkg.github.com/isaqueChaves/maven-repository/com/fatec/stacktec/search-api/0.0.3-SNAPSHOT/search-api-0.0.3-20230409.024122-1.jar (63 MB at 14 MB/s)\r\n\r\n[1m--- [0;32mmaven-resources-plugin:3.1.0:resources[m [1m(default-resources)[m @ [36mpersistence-api Using &#39;UTF-8&#39; encoding to copy filtered resources.\r\n Copying 1 resource\r\n Copying 1 resource\r\n\r\n[1m--- [0;32mmaven-compiler-plugin:3.8.1:compile[m [1m(default-compile)[m @ [36mpersistence-api[0;\r\nChanges detected - recompiling the module!\r\nCompiling 29 source files to C:\\Users\\Administrador\\Documents\\workspace-spring-tool-suite-4-4.18.0.RELEASE\\persistence-api\\target\\classes\r\n-------------------------------------------------------------\r\nCOMPILATION ERROR : \r\n -------------------------------------------------------------\r\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/model/user/Role.java:[18,48] package com.fatec.stacktec.searchapi.holder.user does not exist\r\nFailed to execute goal [32morg.apache.maven.plugins:maven-compiler-plugin:3.8.1:compile[m  Compilation failure: \r\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/model/user/Role.java:[18,48] package com.fatec.stacktec.searchapi.holder.user does not exist\r\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/model/user/UserInternal.java:[27,48] package com.fatec.stacktec.searchapi.enumeration does not exist\r\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/model/user/UserInternal.java:[28,43] package com.fatec.stacktec.searchapi.holder does not exist\r\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/model/user/Role.java:[45,25] cannot find symbol\r\nsymbol:   class RoleHolder\r\nlocation: class com.fatec.stacktec.persistenceapi.model.user.Role\r\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/model/user/UserInternal.java:[69,17] cannot find symbol\r\nsymbol:   class SemestreType\r\nlocation: class com.fatec.stacktec.persistenceapi.model.user.UserInternal\r\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/model/user/UserInternal.java:[73,25] cannot find symbol\r\nsymbol:   class UserInternalHolder\r\nlocation: class com.fatec.stacktec.persistenceapi.model.user.UserInternal\r\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/model/user/UserInternal.java:[69,30] cannot find symbol\r\nsymbol:   class SemestreType\r\nlocation: class com.fatec.stacktec.persistenceapi.model.user.UserInternal\r\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/model/user/UserInternal.java:[34,1] cannot find symbol\r\nsymbol:   class SemestreType\r\nlocation: class com.fatec.stacktec.persistenceapi.model.user.UserInternal\r\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/enumeration/EnvironmentType.java:[6,41] package com.fatec.stacktec.searchapi.util does not exist\r\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/search/facade/user/RoleSearchServiceFacade.java:[13,48] package com.fatec.stacktec.searchapi.holder.user does not exist\r\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/search/facade/user/RoleSearchServiceFacade.java:[14,52] package com.fatec.stacktec.searchapi.repository.user does not exist\r\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/search/facade/user/RoleSearchServiceFacade.java:[15,43] package com.fatec.stacktec.searchapi.search does not exist\r\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/search/facade/user/RoleSearchServiceFacade.java:[21,46] cannot find symbol\r\nsymbol: class ESBaseStoreServiceImpl\r\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/search/facade/user/RoleSearchServiceFacade.java:[21,69] cannot find symbol\r\nsymbol: class RoleSearchRepository\r\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/search/facade/user/RoleSearchServiceFacade.java:[21,91] cannot find symbol\r\nsymbol: class RoleHolder\r\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/search/facade/user/RoleSearchServiceFacade.java:[47,25] cannot find symbol\r\nsymbol:   class RoleHolder\r\nlocation: class com.fatec.stacktec.persistenceapi.search.facade.user.RoleSearchServiceFacade\r\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/search/facade/user/UserInternalSearchServiceFacade.java:[13,43] package com.fatec.stacktec.searchapi.holder does not exist\r\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/search/facade/user/UserInternalSearchServiceFacade.java:[14,52] package com.fatec.stacktec.searchapi.repository.user does not exist\r\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/search/facade/user/UserInternalSearchServiceFacade.java:[15,43] package com.fatec.stacktec.searchapi.search does not exist\r\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/search/facade/user/UserInternalSearchServiceFacade.java:[21,54] cannot find symbol\r\nsymbol: class ESBaseStoreServiceImpl\r\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/search/facade/user/UserInternalSearchServiceFacade.java:[21,77] cannot find symbol\r\nsymbol: class UserInternalSearchRepository\r\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/search/facade/user/UserInternalSearchServiceFacade.java:[21,107] cannot find symbol\r\nsymbol: class UserInternalHolder\r\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/search/facade/user/UserInternalSearchServiceFacade.java:[49,25] cannot find symbol\r\nsymbol:   class UserInternalHolder\r\nlocation: class com.fatec.stacktec.persistenceapi.search.facade.user.UserInternalSearchServiceFacade\r\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/listener/user/RoleEntityListener.java:[11,48] package com.fatec.stacktec.searchapi.holder.user does not exist\r\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/listener/user/RoleEntityListener.java:[12,43] package com.fatec.stacktec.searchapi.search does not exist\r\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/listener/user/RoleEntityListener.java:[13,41] package com.fatec.stacktec.searchapi.util does not exist\r\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/listener/user/UserInternalEntityListener.java:[11,43] package com.fatec.stacktec.searchapi.holder does not exist\r\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/listener/user/UserInternalEntityListener.java:[12,43] package com.fatec.stacktec.searchapi.search does not exist\r\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/listener/user/UserInternalEntityListener.java:[13,41] package com.fatec.stacktec.searchapi.util does not exist\r\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/configuration/FlywayMigrationConfig.java:[13,43] package com.fatec.stacktec.searchapi.search does not exist\r\n[INFO] 30 errors \r\n```\r\nAll the imports comming from the search-api dependency failed\r\n\r\nThank you all in advance, because change the configuration of these snapshots will take many hours\r\n\r\n- I&#39;ve tried to clean my local repositories in m2/repository\r\n- I&#39;ve tried to perform the command mvn clean install -U -D skipTests\r\n- Obs.: It worked one time, but when I changed some stuffs in the code and generated a new snapshot, it started to give error ","title":"Maven it&#39;s installing dependencies from Github packages, but when performing Maven install it&#39;s giving error","body":"<p>I've created two projects, one is an API (I'll call it search-api) to elasticsearch and the other an API (persistence-api) to postgreSQL, I need to have search-api as an dependency in persistence-api.</p>\n<p>I fallowed the docs and I've watched some videos, but nothing seems to work when I'm performing the maven command &quot;install -D skipTests&quot;</p>\n<p>Here's my files:</p>\n<p>search-api's pom:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.2.1.RELEASE&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.fatec.stacktec&lt;/groupId&gt;\n    &lt;artifactId&gt;search-api&lt;/artifactId&gt;\n    &lt;version&gt;0.0.3-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;search-api&lt;/name&gt;\n    &lt;description&gt;Completeltion project of the Systems Development Analysis course.&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;11&lt;/java.version&gt;\n        &lt;github.global.server&gt;github&lt;/github.global.server&gt;\n    &lt;/properties&gt;\n    \n    \n    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;github&lt;/id&gt;\n            &lt;url&gt;https://maven.pkg.github.com/isaqueChaves/maven-repository&lt;/url&gt;\n            &lt;releases&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n                &lt;updatePolicy&gt;always&lt;/updatePolicy&gt;\n            &lt;/releases&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n                &lt;updatePolicy&gt;always&lt;/updatePolicy&gt;\n            &lt;/snapshots&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n    \n    &lt;distributionManagement&gt;\n        &lt;repository&gt;\n            &lt;id&gt;github&lt;/id&gt;\n            &lt;name&gt;GitHub isaqueChaves Apache Maven Packages&lt;/name&gt;\n            &lt;url&gt;https://maven.pkg.github.com/isaqueChaves/maven-repository&lt;/url&gt;\n        &lt;/repository&gt;\n    &lt;/distributionManagement&gt;\n    \n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.8.1&lt;/version&gt;     \n                &lt;configuration&gt;\n                    &lt;source&gt;11&lt;/source&gt;\n                    &lt;forceJavacCompilerUse&gt;true&lt;/forceJavacCompilerUse&gt;\n                &lt;/configuration&gt;           \n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>persistence-api's pom:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.2.1.RELEASE&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.fatec.stacktec&lt;/groupId&gt;\n    &lt;artifactId&gt;persistence-api&lt;/artifactId&gt;\n    &lt;version&gt;0.0.3-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;persistence-api&lt;/name&gt;\n    &lt;description&gt;Persistence API for relational and NoSQL DB&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;11&lt;/java.version&gt;\n        &lt;stacktec-search-api.version&gt;0.0.3-SNAPSHOT&lt;/stacktec-search-api.version&gt;       \n    &lt;/properties&gt;   \n    \n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n          &lt;groupId&gt;com.fatec.stacktec&lt;/groupId&gt;\n          &lt;artifactId&gt;search-api&lt;/artifactId&gt;\n          &lt;version&gt;0.0.3-SNAPSHOT&lt;/version&gt;\n        &lt;/dependency&gt;\n   &lt;/dependencies&gt;\n\n    &lt;repositories&gt;\n        &lt;repository&gt;\n          &lt;id&gt;central&lt;/id&gt;\n          &lt;url&gt;https://repo1.maven.org/maven2&lt;/url&gt;\n          &lt;releases&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/releases&gt;\n          &lt;snapshots&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/snapshots&gt;\n        &lt;/repository&gt;\n        &lt;repository&gt;\n            &lt;id&gt;github&lt;/id&gt;\n            &lt;url&gt;https://maven.pkg.github.com/isaqueChaves/maven-repository&lt;/url&gt;               \n            &lt;releases&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n                &lt;updatePolicy&gt;always&lt;/updatePolicy&gt;\n            &lt;/releases&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n                &lt;updatePolicy&gt;always&lt;/updatePolicy&gt;\n            &lt;/snapshots&gt;        \n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n    \n    &lt;distributionManagement&gt;\n        &lt;snapshotRepository&gt;\n            &lt;id&gt;github&lt;/id&gt;\n            &lt;url&gt;https://maven.pkg.github.com/isaqueChaves/maven-repository&lt;/url&gt;\n        &lt;/snapshotRepository&gt;\n        &lt;repository&gt;\n            &lt;id&gt;github&lt;/id&gt;\n            &lt;name&gt;GitHub isaqueChaves Apache Maven Packages&lt;/name&gt;\n            &lt;url&gt;https://maven.pkg.github.com/isaqueChaves/maven-repository&lt;/url&gt;\n        &lt;/repository&gt;\n    &lt;/distributionManagement&gt;\n    \n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;     \n                &lt;configuration&gt;\n                    &lt;forceJavacCompilerUse&gt;true&lt;/forceJavacCompilerUse&gt;\n                &lt;/configuration&gt;           \n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n    \n&lt;/project&gt;\n\n</code></pre>\n<p>Maven settings.xml:</p>\n<pre><code>&lt;settings xmlns=&quot;http://maven.apache.org/SETTINGS/1.0.0&quot;\n  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.0.0\n                      http://maven.apache.org/xsd/settings-1.0.0.xsd&quot;&gt;\n\n  &lt;activeProfiles&gt;\n    &lt;activeProfile&gt;github&lt;/activeProfile&gt;\n  &lt;/activeProfiles&gt;\n  \n  &lt;profiles&gt;\n  \n    &lt;profile&gt;\n      &lt;id&gt;github&lt;/id&gt;\n      &lt;repositories&gt;\n        &lt;repository&gt;\n          &lt;id&gt;central&lt;/id&gt;\n          &lt;url&gt;https://repo1.maven.org/maven2&lt;/url&gt;\n        &lt;/repository&gt;\n        &lt;repository&gt;\n          &lt;id&gt;github&lt;/id&gt;\n          &lt;url&gt;https://maven.pkg.github.com/isaqueChaves/maven-repository&lt;/url&gt;        \n        &lt;/repository&gt;\n      &lt;/repositories&gt;\n    &lt;/profile&gt;\n  &lt;/profiles&gt;\n\n  &lt;servers&gt;\n    &lt;server&gt;\n      &lt;id&gt;github&lt;/id&gt;\n      &lt;username&gt;isaquechaves&lt;/username&gt;\n      &lt;password&gt;&gt;mytoken&lt;/password&gt;\n    &lt;/server&gt;\n  &lt;/servers&gt;\n&lt;/settings&gt;\n</code></pre>\n<p>And here's the output when I run &quot;maven install -D skipTests&quot;:</p>\n<pre><code> Downloading from : https://repo1.maven.org/maven2/com/fatec/stacktec/search-api/0.0.3-SNAPSHOT/search-api-0.0.3-20230409.024122-1.pom\n Downloading from : https://maven.pkg.github.com/isaqueChaves/maven-repository/com/fatec/stacktec/search-api/0.0.3-SNAPSHOT/search-api-0.0.3-20230409.024122-1.pom\nDownloaded from : https://maven.pkg.github.com/isaqueChaves/maven-repository/com/fatec/stacktec/search-api/0.0.3-SNAPSHOT/search-api-0.0.3-20230409.024122-1.pom (3.1 kB at 3.3 kB/s)\n Downloading from : https://maven.pkg.github.com/isaqueChaves/maven-repository/com/fatec/stacktec/search-api/0.0.3-SNAPSHOT/search-api-0.0.3-20230409.024122-1.jar\nDownloaded from : https://maven.pkg.github.com/isaqueChaves/maven-repository/com/fatec/stacktec/search-api/0.0.3-SNAPSHOT/search-api-0.0.3-20230409.024122-1.jar (63 MB at 14 MB/s)\n\n[1m--- [0;32mmaven-resources-plugin:3.1.0:resources[m [1m(default-resources)[m @ [36mpersistence-api Using 'UTF-8' encoding to copy filtered resources.\n Copying 1 resource\n Copying 1 resource\n\n[1m--- [0;32mmaven-compiler-plugin:3.8.1:compile[m [1m(default-compile)[m @ [36mpersistence-api[0;\nChanges detected - recompiling the module!\nCompiling 29 source files to C:\\Users\\Administrador\\Documents\\workspace-spring-tool-suite-4-4.18.0.RELEASE\\persistence-api\\target\\classes\n-------------------------------------------------------------\nCOMPILATION ERROR : \n -------------------------------------------------------------\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/model/user/Role.java:[18,48] package com.fatec.stacktec.searchapi.holder.user does not exist\nFailed to execute goal [32morg.apache.maven.plugins:maven-compiler-plugin:3.8.1:compile[m  Compilation failure: \n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/model/user/Role.java:[18,48] package com.fatec.stacktec.searchapi.holder.user does not exist\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/model/user/UserInternal.java:[27,48] package com.fatec.stacktec.searchapi.enumeration does not exist\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/model/user/UserInternal.java:[28,43] package com.fatec.stacktec.searchapi.holder does not exist\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/model/user/Role.java:[45,25] cannot find symbol\nsymbol:   class RoleHolder\nlocation: class com.fatec.stacktec.persistenceapi.model.user.Role\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/model/user/UserInternal.java:[69,17] cannot find symbol\nsymbol:   class SemestreType\nlocation: class com.fatec.stacktec.persistenceapi.model.user.UserInternal\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/model/user/UserInternal.java:[73,25] cannot find symbol\nsymbol:   class UserInternalHolder\nlocation: class com.fatec.stacktec.persistenceapi.model.user.UserInternal\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/model/user/UserInternal.java:[69,30] cannot find symbol\nsymbol:   class SemestreType\nlocation: class com.fatec.stacktec.persistenceapi.model.user.UserInternal\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/model/user/UserInternal.java:[34,1] cannot find symbol\nsymbol:   class SemestreType\nlocation: class com.fatec.stacktec.persistenceapi.model.user.UserInternal\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/enumeration/EnvironmentType.java:[6,41] package com.fatec.stacktec.searchapi.util does not exist\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/search/facade/user/RoleSearchServiceFacade.java:[13,48] package com.fatec.stacktec.searchapi.holder.user does not exist\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/search/facade/user/RoleSearchServiceFacade.java:[14,52] package com.fatec.stacktec.searchapi.repository.user does not exist\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/search/facade/user/RoleSearchServiceFacade.java:[15,43] package com.fatec.stacktec.searchapi.search does not exist\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/search/facade/user/RoleSearchServiceFacade.java:[21,46] cannot find symbol\nsymbol: class ESBaseStoreServiceImpl\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/search/facade/user/RoleSearchServiceFacade.java:[21,69] cannot find symbol\nsymbol: class RoleSearchRepository\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/search/facade/user/RoleSearchServiceFacade.java:[21,91] cannot find symbol\nsymbol: class RoleHolder\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/search/facade/user/RoleSearchServiceFacade.java:[47,25] cannot find symbol\nsymbol:   class RoleHolder\nlocation: class com.fatec.stacktec.persistenceapi.search.facade.user.RoleSearchServiceFacade\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/search/facade/user/UserInternalSearchServiceFacade.java:[13,43] package com.fatec.stacktec.searchapi.holder does not exist\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/search/facade/user/UserInternalSearchServiceFacade.java:[14,52] package com.fatec.stacktec.searchapi.repository.user does not exist\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/search/facade/user/UserInternalSearchServiceFacade.java:[15,43] package com.fatec.stacktec.searchapi.search does not exist\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/search/facade/user/UserInternalSearchServiceFacade.java:[21,54] cannot find symbol\nsymbol: class ESBaseStoreServiceImpl\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/search/facade/user/UserInternalSearchServiceFacade.java:[21,77] cannot find symbol\nsymbol: class UserInternalSearchRepository\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/search/facade/user/UserInternalSearchServiceFacade.java:[21,107] cannot find symbol\nsymbol: class UserInternalHolder\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/search/facade/user/UserInternalSearchServiceFacade.java:[49,25] cannot find symbol\nsymbol:   class UserInternalHolder\nlocation: class com.fatec.stacktec.persistenceapi.search.facade.user.UserInternalSearchServiceFacade\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/listener/user/RoleEntityListener.java:[11,48] package com.fatec.stacktec.searchapi.holder.user does not exist\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/listener/user/RoleEntityListener.java:[12,43] package com.fatec.stacktec.searchapi.search does not exist\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/listener/user/RoleEntityListener.java:[13,41] package com.fatec.stacktec.searchapi.util does not exist\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/listener/user/UserInternalEntityListener.java:[11,43] package com.fatec.stacktec.searchapi.holder does not exist\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/listener/user/UserInternalEntityListener.java:[12,43] package com.fatec.stacktec.searchapi.search does not exist\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/listener/user/UserInternalEntityListener.java:[13,41] package com.fatec.stacktec.searchapi.util does not exist\n/C:/Users/Administrador/Documents/workspace-spring-tool-suite-4-4.18.0.RELEASE/persistence-api/src/main/java/com/fatec/stacktec/persistenceapi/configuration/FlywayMigrationConfig.java:[13,43] package com.fatec.stacktec.searchapi.search does not exist\n[INFO] 30 errors \n</code></pre>\n<p>All the imports comming from the search-api dependency failed</p>\n<p>Thank you all in advance, because change the configuration of these snapshots will take many hours</p>\n<ul>\n<li>I've tried to clean my local repositories in m2/repository</li>\n<li>I've tried to perform the command mvn clean install -U -D skipTests</li>\n<li>Obs.: It worked one time, but when I changed some stuffs in the code and generated a new snapshot, it started to give error</li>\n</ul>\n"},{"tags":["java","eclipse","eclipse-plugin","jface"],"answers":[{"tags":[],"owner":{"account_id":13446286,"reputation":2876,"user_id":9702142,"display_name":"Till Brychcy"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1525458645,"creation_date":1525458645,"answer_id":50181183,"question_id":50180942,"body_markdown":"Using &quot;`Debug`&quot; instead of &quot;`Run`&quot; should be enough.\r\nIf this doesn&#39;t work, check in the Preferences in `Java &gt; Debug` that &quot;`Enable hot code replace`&quot; is on.\r\nAlso make sure that &quot;`Build Automatically`&quot; is selected in the &quot;`Project`&quot; menu. (Or manually invoke &quot;`Build`&quot; after saving)\r\n\r\n ","title":"Eclipse plugin hot deploy","body":"<p>Using \"<code>Debug</code>\" instead of \"<code>Run</code>\" should be enough.\nIf this doesn't work, check in the Preferences in <code>Java &gt; Debug</code> that \"<code>Enable hot code replace</code>\" is on.\nAlso make sure that \"<code>Build Automatically</code>\" is selected in the \"<code>Project</code>\" menu. (Or manually invoke \"<code>Build</code>\" after saving)</p>\n"},{"tags":[],"owner":{"account_id":6887015,"reputation":1,"user_id":9115757,"display_name":"Malik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681069428,"creation_date":1681069428,"answer_id":75972531,"question_id":50180942,"body_markdown":"Try starting application in Debug mode and make sure you have &quot;spring-boot-devtools&quot; maven dependecny in your pom.xml","title":"Eclipse plugin hot deploy","body":"<p>Try starting application in Debug mode and make sure you have &quot;spring-boot-devtools&quot; maven dependecny in your pom.xml</p>\n"}],"owner":{"account_id":8591840,"reputation":46475,"user_id":6436191,"display_name":"The Impaler"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1803,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":50181183,"answer_count":2,"score":2,"last_activity_date":1681069428,"creation_date":1525457706,"question_id":50180942,"body_markdown":"I&#39;m developing an Eclipse plugin, and I test it launching a secondary Eclipse instance using `Run As -&gt; Eclipse Application` in my project.\r\n\r\nSo far so good. However, every time I make a source code change (in Java) I need to close this secondary Eclipse instance and start it again to see my code changes being run.\r\n\r\nDo you know of any **hot deploy option for an Eclipse plugin**? It would save me time since Eclipse is slow to load back again and again.\r\n\r\nI guess I got used to Tomcat that implements hot deploy. The moment you save your Java source file Tomcat automatically deploys it behind the scenes. It doesn&#39;t deploy the whole application, but just the modified class -- something that takes just a few milliseconds.\r\n","title":"Eclipse plugin hot deploy","body":"<p>I'm developing an Eclipse plugin, and I test it launching a secondary Eclipse instance using <code>Run As -&gt; Eclipse Application</code> in my project.</p>\n\n<p>So far so good. However, every time I make a source code change (in Java) I need to close this secondary Eclipse instance and start it again to see my code changes being run.</p>\n\n<p>Do you know of any <strong>hot deploy option for an Eclipse plugin</strong>? It would save me time since Eclipse is slow to load back again and again.</p>\n\n<p>I guess I got used to Tomcat that implements hot deploy. The moment you save your Java source file Tomcat automatically deploys it behind the scenes. It doesn't deploy the whole application, but just the modified class -- something that takes just a few milliseconds.</p>\n"},{"tags":["java","generics"],"answers":[{"tags":[],"owner":{"account_id":19094773,"reputation":79,"user_id":13944304,"display_name":"tamouz hmidan"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1681046016,"creation_date":1681046016,"answer_id":75970731,"question_id":75970137,"body_markdown":"What is causing this error is that you are using wild cards as return types in the following method `ExceptionHandlerPair.getBuilder()` and this is not recommended as it causes ambiguity for the compilier you can check the below discussions for more details on why this is not recommended https://stackoverflow.com/questions/22815023/generic-wildcard-types-should-not-be-used-in-return-parameters\r\n\r\nhttps://rules.sonarsource.com/java/RSPEC-1452\r\n\r\n&gt; It is highly recommended not to use wildcard types as return types.\r\n&gt; Because the type inference rules are fairly complex it is unlikely the\r\n&gt; user of that API will know how to use it correctly. Lets take the\r\n&gt; example of method returning a &quot;List&lt;? extends Animal&gt;&quot;. Is it possible\r\n&gt; on this list to add a Dog, a Cat,  we simply dont know. And neither\r\n&gt; does the compiler, which is why it will not allow such a direct use.\r\n&gt; The use of wildcard types should be limited to method parameters. This\r\n&gt; rule raises an issue when a method returns a wildcard type.\r\n\r\nInstead you can simply change the return type of getBuilder() to `ErrorMessageBuilder&lt;T&gt;` \r\n\r\n\r\n    public class ExceptionHandlerPair&lt;T extends Exception&gt; {\r\n\r\n    //~ ----------------------------------------------------------------------------------------------------------------\r\n    //~ Instance fields \r\n    //~ ----------------------------------------------------------------------------------------------------------------\r\n\r\n    public final Class&lt;T&gt; clazz;\r\n    private final ErrorMessageBuilder&lt;T&gt; builder;\r\n\r\n    //~ ----------------------------------------------------------------------------------------------------------------\r\n    //~ Constructors \r\n    //~ ----------------------------------------------------------------------------------------------------------------\r\n\r\n    public ExceptionHandlerPair(Class&lt;T&gt; clazz, ErrorMessageBuilder&lt;T&gt; builder) {\r\n        if (!builder.canHandle(clazz)) {\r\n            throw new IllegalArgumentException(&quot;Handler can&#39;t handle this exception&quot;);\r\n        }\r\n\r\n        this.clazz = clazz;\r\n        this.builder = builder;\r\n    }\r\n\r\n    //~ ----------------------------------------------------------------------------------------------------------------\r\n    //~ Methods \r\n    //~ ----------------------------------------------------------------------------------------------------------------\r\n\r\n    public boolean canHandle(Class&lt;? extends Exception&gt; clazz) {\r\n        return this.clazz.isAssignableFrom(clazz);\r\n    }\r\n\r\n    public ErrorMessageBuilder&lt;T&gt; getBuilder() {\r\n        return builder;\r\n    }\r\n}\r\n\r\n","title":"Java generic ambiguity, whats the issue?","body":"<p>What is causing this error is that you are using wild cards as return types in the following method <code>ExceptionHandlerPair.getBuilder()</code> and this is not recommended as it causes ambiguity for the compilier you can check the below discussions for more details on why this is not recommended <a href=\"https://stackoverflow.com/questions/22815023/generic-wildcard-types-should-not-be-used-in-return-parameters\">Generic wildcard types should not be used in return parameters</a></p>\n<p><a href=\"https://rules.sonarsource.com/java/RSPEC-1452\" rel=\"nofollow noreferrer\">https://rules.sonarsource.com/java/RSPEC-1452</a></p>\n<blockquote>\n<p>It is highly recommended not to use wildcard types as return types.\nBecause the type inference rules are fairly complex it is unlikely the\nuser of that API will know how to use it correctly. Lets take the\nexample of method returning a &quot;List&lt;? extends Animal&gt;&quot;. Is it possible\non this list to add a Dog, a Cat,  we simply dont know. And neither\ndoes the compiler, which is why it will not allow such a direct use.\nThe use of wildcard types should be limited to method parameters. This\nrule raises an issue when a method returns a wildcard type.</p>\n</blockquote>\n<p>Instead you can simply change the return type of getBuilder() to <code>ErrorMessageBuilder&lt;T&gt;</code></p>\n<pre><code>public class ExceptionHandlerPair&lt;T extends Exception&gt; {\n\n//~ ----------------------------------------------------------------------------------------------------------------\n//~ Instance fields \n//~ ----------------------------------------------------------------------------------------------------------------\n\npublic final Class&lt;T&gt; clazz;\nprivate final ErrorMessageBuilder&lt;T&gt; builder;\n\n//~ ----------------------------------------------------------------------------------------------------------------\n//~ Constructors \n//~ ----------------------------------------------------------------------------------------------------------------\n\npublic ExceptionHandlerPair(Class&lt;T&gt; clazz, ErrorMessageBuilder&lt;T&gt; builder) {\n    if (!builder.canHandle(clazz)) {\n        throw new IllegalArgumentException(&quot;Handler can't handle this exception&quot;);\n    }\n\n    this.clazz = clazz;\n    this.builder = builder;\n}\n\n//~ ----------------------------------------------------------------------------------------------------------------\n//~ Methods \n//~ ----------------------------------------------------------------------------------------------------------------\n\npublic boolean canHandle(Class&lt;? extends Exception&gt; clazz) {\n    return this.clazz.isAssignableFrom(clazz);\n}\n\npublic ErrorMessageBuilder&lt;T&gt; getBuilder() {\n    return builder;\n}\n</code></pre>\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":20338,"reputation":63801,"user_id":48503,"accept_rate":100,"display_name":"Luke Woodward"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1681069231,"creation_date":1681047363,"answer_id":75970848,"question_id":75970137,"body_markdown":"As I see it, the fix is to introduce another generic type variable into your `ExceptionHandlerPair` class. In the code below, the type variable `T` is the type of exception that the `ErrorMessageBuilder` handles, and `U` is the type of exception that the `canHandle` method will return `true` for:\r\n\r\n```java\r\nclass ExceptionHandlerPair&lt;T extends Exception, U extends T&gt;{\r\n    private final Class&lt;U&gt; clazz;\r\n    private final ErrorMessageBuilder&lt;T&gt; builder;\r\n\r\n    public ExceptionHandlerPair(Class&lt;U&gt; clazz, ErrorMessageBuilder&lt;T&gt; builder) {\r\n        if(!builder.canHandle(clazz)){\r\n            throw new IllegalArgumentException(&quot;Handler can&#39;t handle this exception&quot;);\r\n        }\r\n\r\n        this.clazz = clazz;\r\n        this.builder = builder;\r\n    }\r\n\r\n    public boolean canHandle(Class&lt;? extends Exception&gt; clazz) {\r\n        return this.clazz.isAssignableFrom(clazz);\r\n    }\r\n\r\n    public ErrorMessageBuilder&lt;T&gt; getBuilder() {\r\n        return builder;\r\n    }\r\n}\r\n```\r\n\r\nI made this change to your code and your `SomeClass` class compiled.\r\n\r\nThe problem with using a wildcard (the `?`) is that you are throwing away the information on what type of exception the builder handles. In your code, `pair.getBuilder()` will always return `ErrorMessageBuilder&lt;? extends Exception&gt;`, no matter how your `pair` was constructed. The type of exception handled by this builder will be some arbitrary subclass of `Exception`, but you don&#39;t know what. It could be an `ErrorMessageBuilder&lt;Exception&gt;`, or a `ErrorMessageBuilder&lt;RuntimeException&gt;`, and if this was the case, you could pass a `NullPointerException` to the `.getBuilder()` method. However, the unbounded wildcard also allows the `getBuilder()` method to return an `ErrorMessageBuilder&lt;NegativeArraySizeException&gt;`, for example, and you can&#39;t pass a `NullPointerException` to the `buildMessage()` method of that.\r\n\r\n","title":"Java generic ambiguity, whats the issue?","body":"<p>As I see it, the fix is to introduce another generic type variable into your <code>ExceptionHandlerPair</code> class. In the code below, the type variable <code>T</code> is the type of exception that the <code>ErrorMessageBuilder</code> handles, and <code>U</code> is the type of exception that the <code>canHandle</code> method will return <code>true</code> for:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class ExceptionHandlerPair&lt;T extends Exception, U extends T&gt;{\n    private final Class&lt;U&gt; clazz;\n    private final ErrorMessageBuilder&lt;T&gt; builder;\n\n    public ExceptionHandlerPair(Class&lt;U&gt; clazz, ErrorMessageBuilder&lt;T&gt; builder) {\n        if(!builder.canHandle(clazz)){\n            throw new IllegalArgumentException(&quot;Handler can't handle this exception&quot;);\n        }\n\n        this.clazz = clazz;\n        this.builder = builder;\n    }\n\n    public boolean canHandle(Class&lt;? extends Exception&gt; clazz) {\n        return this.clazz.isAssignableFrom(clazz);\n    }\n\n    public ErrorMessageBuilder&lt;T&gt; getBuilder() {\n        return builder;\n    }\n}\n</code></pre>\n<p>I made this change to your code and your <code>SomeClass</code> class compiled.</p>\n<p>The problem with using a wildcard (the <code>?</code>) is that you are throwing away the information on what type of exception the builder handles. In your code, <code>pair.getBuilder()</code> will always return <code>ErrorMessageBuilder&lt;? extends Exception&gt;</code>, no matter how your <code>pair</code> was constructed. The type of exception handled by this builder will be some arbitrary subclass of <code>Exception</code>, but you don't know what. It could be an <code>ErrorMessageBuilder&lt;Exception&gt;</code>, or a <code>ErrorMessageBuilder&lt;RuntimeException&gt;</code>, and if this was the case, you could pass a <code>NullPointerException</code> to the <code>.getBuilder()</code> method. However, the unbounded wildcard also allows the <code>getBuilder()</code> method to return an <code>ErrorMessageBuilder&lt;NegativeArraySizeException&gt;</code>, for example, and you can't pass a <code>NullPointerException</code> to the <code>buildMessage()</code> method of that.</p>\n"}],"owner":{"account_id":9431776,"reputation":588,"user_id":7015077,"accept_rate":100,"display_name":"Mher Arsh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75970848,"answer_count":2,"score":1,"last_activity_date":1681069231,"creation_date":1681038325,"question_id":75970137,"body_markdown":"The problem is as follows:\r\n\r\nThere is an ErrorMessageBuilder&lt;T Extends&gt;, instances of the class that implements this interface can generate messages based on exceptions that are passed to them, in addition, there is an option to check if the class can handle the passed exception or not.\r\n\r\n```\r\ninterface ErrorMessageBuilder&lt;T extends Exception&gt; {\r\n    String buildMessage(T exception);\r\n    boolean canHandle(Class&lt;? extends Exception&gt; clazz);\r\n}\r\n```\r\n\r\nNext, there is the class ExceptionHandlerPair&lt;T extends Exception&gt; which is used to create pairs (Exception+Handler)\r\n\r\n```\r\nclass ExceptionHandlerPair&lt;T extends Exception&gt;{\r\n    private final Class&lt;T&gt; clazz;\r\n    private final ErrorMessageBuilder&lt;? extends Exception&gt; builder;\r\n\r\n    public ExceptionHandlerPair(Class&lt;T&gt; clazz, ErrorMessageBuilder&lt;? extends Exception&gt; builder) {\r\n        if(!builder.canHandle(clazz)){\r\n            throw new IllegalArgumentException(&quot;Handler can&#39;t handle this exception&quot;);\r\n        }\r\n\r\n        this.clazz = clazz;\r\n        this.builder = builder;\r\n    }\r\n\r\n    public boolean canHandle(Class&lt;? extends Exception&gt; clazz) {\r\n        return this.clazz.isAssignableFrom(clazz);\r\n    }\r\n\r\n    public ErrorMessageBuilder&lt;? extends Exception&gt; getBuilder() {\r\n        return builder;\r\n    }\r\n}\r\n```\r\n\r\nAfter that I try to create a Bilder and create pairs.\r\nFor example I create a RuntimeExceptionErrorMessageBuilder which can handle any RuntimeException:\r\n\r\n```\r\nclass RuntimeExceptionErrorMessageBuilder implements ErrorMessageBuilder&lt;RuntimeException&gt; {\r\n    public String buildMessage(RuntimeException exception) {\r\n        return &quot;Some runtime exception&quot;;\r\n    }\r\n\r\n    @Override\r\n    public boolean canHandle(Class&lt;? extends Exception&gt; clazz) {\r\n        return RuntimeException.class.isAssignableFrom(clazz);\r\n    }\r\n}\r\n```\r\n\r\n```\r\npublic class SomeClass {\r\n    public static void main(String[] args) {\r\n        var builder = new RuntimeExceptionErrorMessageBuilder();\r\n\r\n//        builder.canHandle(NullPointerException.class); // ? -&gt; true\r\n//        builder.canHandle(IllegalArgumentException.class); // ? -&gt; true\r\n//        builder.canHandle(Exception.class); // ? -&gt; false\r\n\r\n        var pair = new ExceptionHandlerPair&lt;&gt;(NullPointerException.class, builder);\r\n\r\n        if(pair.canHandle(NullPointerException.class)){ // ? -&gt; true\r\n            var message = pair.getBuilder().buildMessage(new NullPointerException()); // &lt;- error Required type: capture of ? extends Exception,  Provided: IllegalArgumentException\r\n            System.out.println(message);\r\n        }\r\n\r\n        if(pair.canHandle(IllegalArgumentException.class)){ // ? -&gt; true\r\n            var message = pair.getBuilder().buildMessage(new IllegalArgumentException()); // &lt;- error Required type: capture of ? extends Exception,  Provided: IllegalArgumentException\r\n            System.out.println(message);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nWe get an error that the buildMessage(x) parameter gives an error that the x parameter should be a descendant of Exception, but IllegalArgumentException is a descendant, what is the problem?\r\n\r\nOkay, I thought that if this restriction applies to parameters, then let&#39;s add an ExceptionWrapper like this:\r\n\r\n```\r\nclass ErrorWrapper&lt;T extends Exception&gt;{\r\n    private final T exception;\r\n\r\n    public ErrorWrapper(T exception) {\r\n        this.exception = exception;\r\n    }\r\n\r\n    public T getException() {\r\n        return exception;\r\n    }\r\n}\r\n```\r\n\r\nAfter that modify ErrorMessageBuilder and RuntimeExceptionErrorMessageBuilder with ErrorWrapper in mind:\r\n\r\n```\r\ninterface ErrorMessageBuilder&lt;T extends Exception&gt; {\r\n    String buildMessage(ErrorWrapper&lt;T&gt; exception);\r\n    boolean canHandle(Class&lt;? extends Exception&gt; clazz);\r\n}\r\n\r\nclass RuntimeExceptionErrorMessageBuilder implements ErrorMessageBuilder&lt;RuntimeException&gt; {\r\n    public String buildMessage(ErrorWrapper&lt;RuntimeException&gt; exception) {\r\n        return &quot;Some runtime exception&quot;;\r\n    }\r\n\r\n    @Override\r\n    public boolean canHandle(Class&lt;? extends Exception&gt; clazz) {\r\n        return RuntimeException.class.isAssignableFrom(clazz);\r\n    }\r\n}\r\n```\r\n\r\nThen change the main and try to create messages with the changes, but it does not work even if I try to fool java I get: error Required type: ErrorWrapper &lt;capture of ? extends Exception&gt;, Provided: ErrorWrapper &lt;capture of ? extends Exception&gt;\r\n\r\n```\r\npublic class SomeClassWrapper {\r\n    public static void main(String[] args) {\r\n        var builder = new RuntimeExceptionErrorMessageBuilder();\r\n\r\n        ExceptionHandlerPair&lt;NullPointerException&gt; pair = new ExceptionHandlerPair&lt;&gt;(NullPointerException.class, builder);\r\n\r\n        if(pair.canHandle(NullPointerException.class)){ // ? -&gt; true\r\n            ErrorWrapper&lt;NullPointerException&gt; npeWrapper = new ErrorWrapper&lt;&gt;(new NullPointerException());\r\n\r\n            var message = pair.getBuilder().buildMessage(npeWrapper); // &lt;- error Required type: ErrorWrapper &lt;capture of ? extends Exception&gt;,  Provided: ErrorWrapper&lt;NullPointerException\r\n            System.out.println(message);\r\n        }\r\n\r\n        // \r\n        if(pair.canHandle(NullPointerException.class)){ // ? -&gt; true\r\n            // and here we&#39;ll try to swoon over Java!!! :)\r\n            ErrorWrapper&lt;? extends Exception&gt; npeWrapper = new ErrorWrapper&lt;&gt;(new NullPointerException());\r\n\r\n            var message = pair.getBuilder().buildMessage(npeWrapper); // &lt;- error Required type: ErrorWrapper &lt;capture of ? extends Exception&gt;,  Provided: ErrorWrapper &lt;capture of ? extends Exception&gt;\r\n            System.out.println(message);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nI would be grateful if someone could explain this behavior!!!\r\nThanks in advance!","title":"Java generic ambiguity, whats the issue?","body":"<p>The problem is as follows:</p>\n<p>There is an ErrorMessageBuilder, instances of the class that implements this interface can generate messages based on exceptions that are passed to them, in addition, there is an option to check if the class can handle the passed exception or not.</p>\n<pre><code>interface ErrorMessageBuilder&lt;T extends Exception&gt; {\n    String buildMessage(T exception);\n    boolean canHandle(Class&lt;? extends Exception&gt; clazz);\n}\n</code></pre>\n<p>Next, there is the class ExceptionHandlerPair which is used to create pairs (Exception+Handler)</p>\n<pre><code>class ExceptionHandlerPair&lt;T extends Exception&gt;{\n    private final Class&lt;T&gt; clazz;\n    private final ErrorMessageBuilder&lt;? extends Exception&gt; builder;\n\n    public ExceptionHandlerPair(Class&lt;T&gt; clazz, ErrorMessageBuilder&lt;? extends Exception&gt; builder) {\n        if(!builder.canHandle(clazz)){\n            throw new IllegalArgumentException(&quot;Handler can't handle this exception&quot;);\n        }\n\n        this.clazz = clazz;\n        this.builder = builder;\n    }\n\n    public boolean canHandle(Class&lt;? extends Exception&gt; clazz) {\n        return this.clazz.isAssignableFrom(clazz);\n    }\n\n    public ErrorMessageBuilder&lt;? extends Exception&gt; getBuilder() {\n        return builder;\n    }\n}\n</code></pre>\n<p>After that I try to create a Bilder and create pairs.\nFor example I create a RuntimeExceptionErrorMessageBuilder which can handle any RuntimeException:</p>\n<pre><code>class RuntimeExceptionErrorMessageBuilder implements ErrorMessageBuilder&lt;RuntimeException&gt; {\n    public String buildMessage(RuntimeException exception) {\n        return &quot;Some runtime exception&quot;;\n    }\n\n    @Override\n    public boolean canHandle(Class&lt;? extends Exception&gt; clazz) {\n        return RuntimeException.class.isAssignableFrom(clazz);\n    }\n}\n</code></pre>\n<pre><code>public class SomeClass {\n    public static void main(String[] args) {\n        var builder = new RuntimeExceptionErrorMessageBuilder();\n\n//        builder.canHandle(NullPointerException.class); // ? -&gt; true\n//        builder.canHandle(IllegalArgumentException.class); // ? -&gt; true\n//        builder.canHandle(Exception.class); // ? -&gt; false\n\n        var pair = new ExceptionHandlerPair&lt;&gt;(NullPointerException.class, builder);\n\n        if(pair.canHandle(NullPointerException.class)){ // ? -&gt; true\n            var message = pair.getBuilder().buildMessage(new NullPointerException()); // &lt;- error Required type: capture of ? extends Exception,  Provided: IllegalArgumentException\n            System.out.println(message);\n        }\n\n        if(pair.canHandle(IllegalArgumentException.class)){ // ? -&gt; true\n            var message = pair.getBuilder().buildMessage(new IllegalArgumentException()); // &lt;- error Required type: capture of ? extends Exception,  Provided: IllegalArgumentException\n            System.out.println(message);\n        }\n    }\n}\n</code></pre>\n<p>We get an error that the buildMessage(x) parameter gives an error that the x parameter should be a descendant of Exception, but IllegalArgumentException is a descendant, what is the problem?</p>\n<p>Okay, I thought that if this restriction applies to parameters, then let's add an ExceptionWrapper like this:</p>\n<pre><code>class ErrorWrapper&lt;T extends Exception&gt;{\n    private final T exception;\n\n    public ErrorWrapper(T exception) {\n        this.exception = exception;\n    }\n\n    public T getException() {\n        return exception;\n    }\n}\n</code></pre>\n<p>After that modify ErrorMessageBuilder and RuntimeExceptionErrorMessageBuilder with ErrorWrapper in mind:</p>\n<pre><code>interface ErrorMessageBuilder&lt;T extends Exception&gt; {\n    String buildMessage(ErrorWrapper&lt;T&gt; exception);\n    boolean canHandle(Class&lt;? extends Exception&gt; clazz);\n}\n\nclass RuntimeExceptionErrorMessageBuilder implements ErrorMessageBuilder&lt;RuntimeException&gt; {\n    public String buildMessage(ErrorWrapper&lt;RuntimeException&gt; exception) {\n        return &quot;Some runtime exception&quot;;\n    }\n\n    @Override\n    public boolean canHandle(Class&lt;? extends Exception&gt; clazz) {\n        return RuntimeException.class.isAssignableFrom(clazz);\n    }\n}\n</code></pre>\n<p>Then change the main and try to create messages with the changes, but it does not work even if I try to fool java I get: error Required type: ErrorWrapper &lt;capture of ? extends Exception&gt;, Provided: ErrorWrapper &lt;capture of ? extends Exception&gt;</p>\n<pre><code>public class SomeClassWrapper {\n    public static void main(String[] args) {\n        var builder = new RuntimeExceptionErrorMessageBuilder();\n\n        ExceptionHandlerPair&lt;NullPointerException&gt; pair = new ExceptionHandlerPair&lt;&gt;(NullPointerException.class, builder);\n\n        if(pair.canHandle(NullPointerException.class)){ // ? -&gt; true\n            ErrorWrapper&lt;NullPointerException&gt; npeWrapper = new ErrorWrapper&lt;&gt;(new NullPointerException());\n\n            var message = pair.getBuilder().buildMessage(npeWrapper); // &lt;- error Required type: ErrorWrapper &lt;capture of ? extends Exception&gt;,  Provided: ErrorWrapper&lt;NullPointerException\n            System.out.println(message);\n        }\n\n        // \n        if(pair.canHandle(NullPointerException.class)){ // ? -&gt; true\n            // and here we'll try to swoon over Java!!! :)\n            ErrorWrapper&lt;? extends Exception&gt; npeWrapper = new ErrorWrapper&lt;&gt;(new NullPointerException());\n\n            var message = pair.getBuilder().buildMessage(npeWrapper); // &lt;- error Required type: ErrorWrapper &lt;capture of ? extends Exception&gt;,  Provided: ErrorWrapper &lt;capture of ? extends Exception&gt;\n            System.out.println(message);\n        }\n    }\n}\n</code></pre>\n<p>I would be grateful if someone could explain this behavior!!!\nThanks in advance!</p>\n"},{"tags":["java","hibernate","jpa","jakarta-ee","transactions"],"comments":[{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1681068476,"post_id":75972374,"comment_id":133995721,"body_markdown":"First move the line with ex.printStackTrace up to get the actual cause of the issue. Then you can decide about what to do next. Maybe you should put the rollback line in another try/catch block and only log the error and ignore the exception. Because rollback on a closed connection doesn&#39;t hurt much.","body":"First move the line with ex.printStackTrace up to get the actual cause of the issue. Then you can decide about what to do next. Maybe you should put the rollback line in another try/catch block and only log the error and ignore the exception. Because rollback on a closed connection doesn&#39;t hurt much."},{"owner":{"account_id":1950617,"reputation":1764,"user_id":1754790,"accept_rate":52,"display_name":"Renaud is Not Bill Gates"},"score":0,"creation_date":1681068739,"post_id":75972374,"comment_id":133995754,"body_markdown":"@Mar-Z can you please check  my edit ?","body":"@Mar-Z can you please check  my edit ?"},{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1681111408,"post_id":75972374,"comment_id":133999833,"body_markdown":"User is not mapped means there is no entity class with the name User. Check this please. In doubts share the code. Important thing is also the package. It needs to be scanned by Hibernate. Check also the annotation @EntityScan.","body":"User is not mapped means there is no entity class with the name User. Check this please. In doubts share the code. Important thing is also the package. It needs to be scanned by Hibernate. Check also the annotation @EntityScan."}],"owner":{"account_id":1950617,"reputation":1764,"user_id":1754790,"accept_rate":52,"display_name":"Renaud is Not Bill Gates"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":233,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681068713,"creation_date":1681067215,"question_id":75972374,"body_markdown":"I have this function in my dao that check of login:\r\n\r\n    public User checkLogin(String login, String password) {\r\n    \t\tTransaction transaction = null;\r\n    \t\tUser user = null;\r\n    \t\ttry (Session session = HibernateUtil.getSessionFactory().openSession()) {\r\n    \t\t\ttransaction = session.beginTransaction();\r\n    \t\t\tQuery query=session.createQuery(&quot;from User where login=:login and password=:password&quot;);\r\n    \t\t    query.setParameter(&quot;login&quot;, login);\r\n    \t        query.setParameter(&quot;password&quot;, password);\r\n    \t        user=(User) query.getSingleResult();\r\n    \t\t\ttransaction.commit();\r\n    \t\t} catch (Exception ex) {\r\n    \t\t\tif (transaction != null) {\r\n    \t\t\t\ttransaction.rollback();\r\n    \t\t\t}\r\n    \t\t\tex.printStackTrace();\r\n    \t\t}\r\n    \t\treturn user;\r\n    \t}\r\n\r\nbut for some reason I&#39;m getting this exception:\r\n\r\n`java.lang.IllegalStateException: org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl@4804aa89 is close`\r\n\r\nThe exemption comes from the `transaction.rollback();` part.\r\n\r\nHow can I solve this ?\r\n\r\n**Edit:**\r\n\r\nThanks to @Mar-Z answer I moved  `ex.printStackTrace` before rollbacking the transaction, and the actual error was :\r\n\r\n`Caused by: org.hibernate.hql.internal.ast.QuerySyntaxException: User is not mapped`\r\n\r\nSo I updated my code with this:\r\n\r\n`Query query=session.createQuery(&quot;from User where login=:login and password=:password&quot;, User.class);`\r\n\r\nwhich didn&#39;t solve the thrown exception.","title":"org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl is closed","body":"<p>I have this function in my dao that check of login:</p>\n<pre><code>public User checkLogin(String login, String password) {\n        Transaction transaction = null;\n        User user = null;\n        try (Session session = HibernateUtil.getSessionFactory().openSession()) {\n            transaction = session.beginTransaction();\n            Query query=session.createQuery(&quot;from User where login=:login and password=:password&quot;);\n            query.setParameter(&quot;login&quot;, login);\n            query.setParameter(&quot;password&quot;, password);\n            user=(User) query.getSingleResult();\n            transaction.commit();\n        } catch (Exception ex) {\n            if (transaction != null) {\n                transaction.rollback();\n            }\n            ex.printStackTrace();\n        }\n        return user;\n    }\n</code></pre>\n<p>but for some reason I'm getting this exception:</p>\n<p><code>java.lang.IllegalStateException: org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl@4804aa89 is close</code></p>\n<p>The exemption comes from the <code>transaction.rollback();</code> part.</p>\n<p>How can I solve this ?</p>\n<p><strong>Edit:</strong></p>\n<p>Thanks to @Mar-Z answer I moved  <code>ex.printStackTrace</code> before rollbacking the transaction, and the actual error was :</p>\n<p><code>Caused by: org.hibernate.hql.internal.ast.QuerySyntaxException: User is not mapped</code></p>\n<p>So I updated my code with this:</p>\n<p><code>Query query=session.createQuery(&quot;from User where login=:login and password=:password&quot;, User.class);</code></p>\n<p>which didn't solve the thrown exception.</p>\n"},{"tags":["java","spring-data-rest","netflix-eureka","feign","openfeign"],"answers":[{"tags":[],"owner":{"account_id":15846606,"reputation":316,"user_id":11433749,"display_name":"Shayan Daneshvar"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1681068349,"creation_date":1681068349,"answer_id":75972445,"question_id":75931422,"body_markdown":"Spring Cloud Feign does not support inheritance of more than one level. In the feign client classes, you are inheriting from some repository that itself inherits from CrudRepository, not to mention that CrudRepostory itself inherits from the Repository interface!\r\n\r\nSo basically you are using Feign the wrong way. You should create the abstract methods inside the Feign Client classes, and enable HyperMediaSupport in your application, so that it can parse HATEOAS-enabled JSON generated by Spring Data Rest.\r\n\r\nNote that the feign client classes can inherit from other classes or interfaces, only if those classes or interfaces do not have parents.\r\n\r\n[This link][1] might be of help. \r\n\r\n\r\n  [1]: https://reflectoring.io/accessing-spring-data-rest-with-feign/","title":"Getting &quot;Only Single Level Inheritance Supported&quot; Error with SpringBoot Eureka Feign Client","body":"<p>Spring Cloud Feign does not support inheritance of more than one level. In the feign client classes, you are inheriting from some repository that itself inherits from CrudRepository, not to mention that CrudRepostory itself inherits from the Repository interface!</p>\n<p>So basically you are using Feign the wrong way. You should create the abstract methods inside the Feign Client classes, and enable HyperMediaSupport in your application, so that it can parse HATEOAS-enabled JSON generated by Spring Data Rest.</p>\n<p>Note that the feign client classes can inherit from other classes or interfaces, only if those classes or interfaces do not have parents.</p>\n<p><a href=\"https://reflectoring.io/accessing-spring-data-rest-with-feign/\" rel=\"nofollow noreferrer\">This link</a> might be of help.</p>\n"}],"owner":{"account_id":13017862,"reputation":55,"user_id":9408379,"display_name":"Othello"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":741,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1681068349,"creation_date":1680623678,"question_id":75931422,"body_markdown":"I am working through a tutorial creating a eureka server and eureka client. Prior to adding the feign client, the eureka client is able to register with the eureka server. After I added the feign maven dependency and created the annotations in the PriceServiceApplication.java and PriceClient.java, I seem to be be getting an &quot;Caused by: java.lang.IllegalStateException: Only single-level inheritance supported: PriceClient&quot;. This is a multimodule SpringBoot application project, containing both eureka client (price service) and eureka server. I am using Spring Data Rest with the price service microservice ensuring I could afford not to add the controller and service class. I will add the full errors and code snippet below. Thanks in advance for your help. I will appreciate any advice how to get rid of this error and get the code to work.\r\n\r\n```Error starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.\r\n2023-04-04 15:29:04.693 ERROR 12212 --- [  restartedMain] o.s.boot.SpringApplication               : Application run failed\r\n\r\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;pricingServiceApplication&#39;: Unsatisfied dependency expressed through field &#39;priceRepository&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;com.udacity.pricing.domain.price.PriceClient&#39;: FactoryBean threw exception on object creation; nested exception is java.lang.IllegalStateException: Only single-level inheritance supported: PriceClient\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:596) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:90) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:374) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1411) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:592) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:843) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:877) ~[spring-context-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:549) ~[spring-context-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142) ~[spring-boot-2.1.5.RELEASE.jar:2.1.5.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775) ~[spring-boot-2.1.5.RELEASE.jar:2.1.5.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397) ~[spring-boot-2.1.5.RELEASE.jar:2.1.5.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:316) ~[spring-boot-2.1.5.RELEASE.jar:2.1.5.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1260) ~[spring-boot-2.1.5.RELEASE.jar:2.1.5.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1248) ~[spring-boot-2.1.5.RELEASE.jar:2.1.5.RELEASE]\r\n\tat com.udacity.pricing.PricingServiceApplication.main(PricingServiceApplication.java:32) ~[classes/:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n\tat org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-2.1.5.RELEASE.jar:2.1.5.RELEASE]\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;com.udacity.pricing.domain.price.PriceClient&#39;: FactoryBean threw exception on object creation; nested exception is java.lang.IllegalStateException: Only single-level inheritance supported: PriceClient\r\n\tat org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:178) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:101) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1674) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getObjectForBeanInstance(AbstractAutowireCapableBeanFactory.java:1249) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:257) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:277) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1471) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1428) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1211) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1168) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:593) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\t... 24 common frames omitted\r\nCaused by: java.lang.IllegalStateException: Only single-level inheritance supported: PriceClient\r\n\tat feign.Util.checkState(Util.java:127) ~[feign-core-10.1.0.jar:na]\r\n\tat feign.Contract$BaseContract.parseAndValidatateMetadata(Contract.java:55) ~[feign-core-10.1.0.jar:na]\r\n\tat feign.ReflectiveFeign$ParseHandlersByName.apply(ReflectiveFeign.java:154) ~[feign-core-10.1.0.jar:na]\r\n\tat feign.ReflectiveFeign.newInstance(ReflectiveFeign.java:52) ~[feign-core-10.1.0.jar:na]\r\n\tat feign.Feign$Builder.target(Feign.java:251) ~[feign-core-10.1.0.jar:na]\r\n\tat org.springframework.cloud.openfeign.HystrixTargeter.target(HystrixTargeter.java:37) ~[spring-cloud-openfeign-core-2.1.0.RELEASE.jar:2.1.0.RELEASE]\r\n\tat org.springframework.cloud.openfeign.FeignClientFactoryBean.getTarget(FeignClientFactoryBean.java:271) ~[spring-cloud-openfeign-core-2.1.0.RELEASE.jar:2.1.0.RELEASE]\r\n\tat org.springframework.cloud.openfeign.FeignClientFactoryBean.getObject(FeignClientFactoryBean.java:235) ~[spring-cloud-openfeign-core-2.1.0.RELEASE.jar:2.1.0.RELEASE]\r\n\tat org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:171) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\r\n\t... 35 common frames omitted\r\n\r\n\r\nProcess finished with exit code 1\r\n```\r\n\r\nPricingServiceApplication.java\r\n\r\n```@SpringBootApplication\r\n@EnableDiscoveryClient\r\n@EnableFeignClients\r\npublic class PricingServiceApplication implements CommandLineRunner{\r\n\r\n    @Autowired\r\n    PriceRepository priceRepository;\r\n\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(PricingServiceApplication.class, args);\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     * Gets a random price to fill in for a given vehicle ID.\r\n     * @return random price for a vehicle\r\n     */\r\n    private static BigDecimal randomPrice() {\r\n        return new BigDecimal(ThreadLocalRandom.current().nextDouble(1, 5))\r\n                .multiply(new BigDecimal(5000d)).setScale(2, RoundingMode.HALF_UP);\r\n    }\r\n\r\n    @Override\r\n    public void run(String... args) throws Exception {\r\n\r\n        /**\r\n         * Holds {ID: Price} pairings (current implementation allows for 20 vehicles)\r\n         */\r\n        final Map&lt;Long, Price&gt; PRICES = LongStream\r\n                .range(1, 20)\r\n                .mapToObj(i -&gt; new Price(&quot;USD&quot;, randomPrice(), i))\r\n                .collect(Collectors.toMap(Price::getVehicleId, p -&gt; p));\r\n\r\n        for (Map.Entry&lt;Long, Price&gt; entry : PRICES.entrySet())\r\n        {\r\n            System.out.println(&quot;key = &quot; + entry.getKey() + &quot;, value = &quot; + entry.getValue());\r\n        }\r\n\r\n        priceRepository.saveAll(PRICES.values());\r\n    }\r\n}\r\n```\r\n\r\nPriceRepository.java\r\n\r\n```\r\n@RepositoryRestResource(collectionResourceRel = &quot;vehicle-price&quot;, path = &quot;vehicle-price&quot;)\r\npublic interface PriceRepository extends CrudRepository&lt;Price, Long&gt; {\r\n\r\n     @RequestMapping(method = RequestMethod.GET, value = &quot;/prices/{vehicleId}&quot;)\r\n     List&lt;Price&gt; findPriceByVehicleId(@Param(&quot;vehicleId&quot;) Long vehicleId);\r\n}\r\n```\r\n\r\nPriceClient.java\r\n\r\n```\r\n@FeignClient(name=&quot;pricing-service&quot;, url = &quot;pricing-service&quot;)\r\npublic interface PriceClient extends PriceRepository{\r\n\r\n}\r\n```\r\n\r\npom.xml\r\n\r\n```&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.1.5.RELEASE&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt;\r\n\t\t &lt;!-- lookup parent from com.udacity.pricing.repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.udacity&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;pricing-service&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;pricing-service&lt;/name&gt;\r\n\t&lt;description&gt;Pricing Service&lt;/description&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.1.3&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-starter-feign&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.4.7.RELEASE&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.1.11&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/ch.qos.logback/logback-core --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;logback-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.1.11&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-starter-netflix-ribbon&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-starter-bootstrap&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;dependencyManagement&gt;\r\n\t\t&lt;dependencies&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;Greenwich.RELEASE&lt;/version&gt;\r\n\t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n\t\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t&lt;/dependencies&gt;\r\n\t&lt;/dependencyManagement&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n\t&lt;repositories&gt;\r\n\t\t&lt;repository&gt;\r\n\t\t\t&lt;id&gt;netflix-candidates&lt;/id&gt;\r\n\t\t\t&lt;name&gt;Netflix Candidates&lt;/name&gt;\r\n\t\t\t&lt;url&gt;https://artifactory-oss.prod.netflix.net/artifactory/maven-oss-candidates&lt;/url&gt;\r\n\t\t\t&lt;snapshots&gt;\r\n\t\t\t\t&lt;enabled&gt;false&lt;/enabled&gt;\r\n\t\t\t&lt;/snapshots&gt;\r\n\t\t&lt;/repository&gt;\r\n\t&lt;/repositories&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\napplication.properties\r\n```\r\nserver.port=8082\r\n\r\n#configure base path for rest apis\r\nspring.data.rest.base-path=/api/v1/services\r\n\r\n#h2\r\n#spring.h2.console.enabled=true\r\n#spring.h2.console.path=/h2\r\n#spring.datasource.url=jdbc:h2:mem:pricedata\r\n#\r\n#spring.datasource.driverClassName=org.h2.Driver\r\n#spring.datasource.username=sa\r\n#spring.datasource.password=password\r\n#spring.jpa.database-platform=org.hibernate.dialect.H2Dialect\r\n\r\n#Eureka\r\nspring.application.name=pricing-service\r\n\r\neureka.client.serviceUrl.defaultZone=http://localhost:8761/eureka/\r\neureka.client.service-url.default-zone=http://localhost:8761/eureka/\r\ninstance.preferIpAddress=true\r\n\r\neureka.client.enabled=true\r\nspring.cloud.config.enabled=false\r\neureka.instance.hostname=localhost\r\n\r\nspring.cloud.loadbalancer.ribbon.enable=false\r\n\r\n```\r\n\r\n","title":"Getting &quot;Only Single Level Inheritance Supported&quot; Error with SpringBoot Eureka Feign Client","body":"<p>I am working through a tutorial creating a eureka server and eureka client. Prior to adding the feign client, the eureka client is able to register with the eureka server. After I added the feign maven dependency and created the annotations in the PriceServiceApplication.java and PriceClient.java, I seem to be be getting an &quot;Caused by: java.lang.IllegalStateException: Only single-level inheritance supported: PriceClient&quot;. This is a multimodule SpringBoot application project, containing both eureka client (price service) and eureka server. I am using Spring Data Rest with the price service microservice ensuring I could afford not to add the controller and service class. I will add the full errors and code snippet below. Thanks in advance for your help. I will appreciate any advice how to get rid of this error and get the code to work.</p>\n<pre><code>2023-04-04 15:29:04.693 ERROR 12212 --- [  restartedMain] o.s.boot.SpringApplication               : Application run failed\n\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'pricingServiceApplication': Unsatisfied dependency expressed through field 'priceRepository'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'com.udacity.pricing.domain.price.PriceClient': FactoryBean threw exception on object creation; nested exception is java.lang.IllegalStateException: Only single-level inheritance supported: PriceClient\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:596) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:90) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:374) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1411) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:592) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:843) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:877) ~[spring-context-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:549) ~[spring-context-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142) ~[spring-boot-2.1.5.RELEASE.jar:2.1.5.RELEASE]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775) ~[spring-boot-2.1.5.RELEASE.jar:2.1.5.RELEASE]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397) ~[spring-boot-2.1.5.RELEASE.jar:2.1.5.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:316) ~[spring-boot-2.1.5.RELEASE.jar:2.1.5.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1260) ~[spring-boot-2.1.5.RELEASE.jar:2.1.5.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1248) ~[spring-boot-2.1.5.RELEASE.jar:2.1.5.RELEASE]\n    at com.udacity.pricing.PricingServiceApplication.main(PricingServiceApplication.java:32) ~[classes/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-2.1.5.RELEASE.jar:2.1.5.RELEASE]\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'com.udacity.pricing.domain.price.PriceClient': FactoryBean threw exception on object creation; nested exception is java.lang.IllegalStateException: Only single-level inheritance supported: PriceClient\n    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:178) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:101) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1674) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getObjectForBeanInstance(AbstractAutowireCapableBeanFactory.java:1249) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:257) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:277) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1471) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1428) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1211) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1168) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:593) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    ... 24 common frames omitted\nCaused by: java.lang.IllegalStateException: Only single-level inheritance supported: PriceClient\n    at feign.Util.checkState(Util.java:127) ~[feign-core-10.1.0.jar:na]\n    at feign.Contract$BaseContract.parseAndValidatateMetadata(Contract.java:55) ~[feign-core-10.1.0.jar:na]\n    at feign.ReflectiveFeign$ParseHandlersByName.apply(ReflectiveFeign.java:154) ~[feign-core-10.1.0.jar:na]\n    at feign.ReflectiveFeign.newInstance(ReflectiveFeign.java:52) ~[feign-core-10.1.0.jar:na]\n    at feign.Feign$Builder.target(Feign.java:251) ~[feign-core-10.1.0.jar:na]\n    at org.springframework.cloud.openfeign.HystrixTargeter.target(HystrixTargeter.java:37) ~[spring-cloud-openfeign-core-2.1.0.RELEASE.jar:2.1.0.RELEASE]\n    at org.springframework.cloud.openfeign.FeignClientFactoryBean.getTarget(FeignClientFactoryBean.java:271) ~[spring-cloud-openfeign-core-2.1.0.RELEASE.jar:2.1.0.RELEASE]\n    at org.springframework.cloud.openfeign.FeignClientFactoryBean.getObject(FeignClientFactoryBean.java:235) ~[spring-cloud-openfeign-core-2.1.0.RELEASE.jar:2.1.0.RELEASE]\n    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:171) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    ... 35 common frames omitted\n\n\nProcess finished with exit code 1\n</code></pre>\n<p>PricingServiceApplication.java</p>\n<pre><code>@EnableDiscoveryClient\n@EnableFeignClients\npublic class PricingServiceApplication implements CommandLineRunner{\n\n    @Autowired\n    PriceRepository priceRepository;\n\n    public static void main(String[] args) {\n        SpringApplication.run(PricingServiceApplication.class, args);\n    }\n\n\n\n    /**\n     * Gets a random price to fill in for a given vehicle ID.\n     * @return random price for a vehicle\n     */\n    private static BigDecimal randomPrice() {\n        return new BigDecimal(ThreadLocalRandom.current().nextDouble(1, 5))\n                .multiply(new BigDecimal(5000d)).setScale(2, RoundingMode.HALF_UP);\n    }\n\n    @Override\n    public void run(String... args) throws Exception {\n\n        /**\n         * Holds {ID: Price} pairings (current implementation allows for 20 vehicles)\n         */\n        final Map&lt;Long, Price&gt; PRICES = LongStream\n                .range(1, 20)\n                .mapToObj(i -&gt; new Price(&quot;USD&quot;, randomPrice(), i))\n                .collect(Collectors.toMap(Price::getVehicleId, p -&gt; p));\n\n        for (Map.Entry&lt;Long, Price&gt; entry : PRICES.entrySet())\n        {\n            System.out.println(&quot;key = &quot; + entry.getKey() + &quot;, value = &quot; + entry.getValue());\n        }\n\n        priceRepository.saveAll(PRICES.values());\n    }\n}\n</code></pre>\n<p>PriceRepository.java</p>\n<pre><code>@RepositoryRestResource(collectionResourceRel = &quot;vehicle-price&quot;, path = &quot;vehicle-price&quot;)\npublic interface PriceRepository extends CrudRepository&lt;Price, Long&gt; {\n\n     @RequestMapping(method = RequestMethod.GET, value = &quot;/prices/{vehicleId}&quot;)\n     List&lt;Price&gt; findPriceByVehicleId(@Param(&quot;vehicleId&quot;) Long vehicleId);\n}\n</code></pre>\n<p>PriceClient.java</p>\n<pre><code>@FeignClient(name=&quot;pricing-service&quot;, url = &quot;pricing-service&quot;)\npublic interface PriceClient extends PriceRepository{\n\n}\n</code></pre>\n<p>pom.xml</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.1.5.RELEASE&lt;/version&gt;\n        &lt;relativePath/&gt;\n         &lt;!-- lookup parent from com.udacity.pricing.repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.udacity&lt;/groupId&gt;\n    &lt;artifactId&gt;pricing-service&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;pricing-service&lt;/name&gt;\n    &lt;description&gt;Pricing Service&lt;/description&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;11&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;\n            &lt;version&gt;3.1.3&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-feign&lt;/artifactId&gt;\n            &lt;version&gt;1.4.7.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n            &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\n            &lt;version&gt;1.1.11&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/ch.qos.logback/logback-core --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n            &lt;artifactId&gt;logback-core&lt;/artifactId&gt;\n            &lt;version&gt;1.1.11&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-netflix-ribbon&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-bootstrap&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;Greenwich.RELEASE&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;netflix-candidates&lt;/id&gt;\n            &lt;name&gt;Netflix Candidates&lt;/name&gt;\n            &lt;url&gt;https://artifactory-oss.prod.netflix.net/artifactory/maven-oss-candidates&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>application.properties</p>\n<pre><code>server.port=8082\n\n#configure base path for rest apis\nspring.data.rest.base-path=/api/v1/services\n\n#h2\n#spring.h2.console.enabled=true\n#spring.h2.console.path=/h2\n#spring.datasource.url=jdbc:h2:mem:pricedata\n#\n#spring.datasource.driverClassName=org.h2.Driver\n#spring.datasource.username=sa\n#spring.datasource.password=password\n#spring.jpa.database-platform=org.hibernate.dialect.H2Dialect\n\n#Eureka\nspring.application.name=pricing-service\n\neureka.client.serviceUrl.defaultZone=http://localhost:8761/eureka/\neureka.client.service-url.default-zone=http://localhost:8761/eureka/\ninstance.preferIpAddress=true\n\neureka.client.enabled=true\nspring.cloud.config.enabled=false\neureka.instance.hostname=localhost\n\nspring.cloud.loadbalancer.ribbon.enable=false\n\n</code></pre>\n"},{"tags":["java","rest"],"comments":[{"owner":{"account_id":1353436,"reputation":1715,"user_id":1292309,"accept_rate":58,"display_name":"Jayaram"},"score":0,"creation_date":1378808334,"post_id":18716095,"comment_id":27577869,"body_markdown":"Have a look at this this question and accepted solution : http://stackoverflow.com/questions/9520716/cxf-jaxrs-how-do-i-pass-date-as-queryparam","body":"Have a look at this this question and accepted solution : <a href=\"http://stackoverflow.com/questions/9520716/cxf-jaxrs-how-do-i-pass-date-as-queryparam\" title=\"cxf jaxrs how do i pass date as queryparam\">stackoverflow.com/questions/9520716/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":2678195,"reputation":68091,"user_id":2314073,"accept_rate":56,"display_name":"Juned Ahsan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1378808074,"creation_date":1378808074,"answer_id":18716187,"question_id":18716095,"body_markdown":"One observation: It seems you are adding an extra slash(/) before your query params:\r\n\r\nchange this \r\n\r\n    ..../123/?user=user1&amp;time=2013-09-10T20:00:00Z\r\n\r\nto\r\n\r\n    ..../123?user=user1&amp;time=2013-09-10T20:00:00Z\r\n\r\n\r\nSecond thing is that you may have to encode your URL to send the date properly to server\r\n","title":"Pass java date into rest query parameter","body":"<p>One observation: It seems you are adding an extra slash(/) before your query params:</p>\n\n<p>change this </p>\n\n<pre><code>..../123/?user=user1&amp;time=2013-09-10T20:00:00Z\n</code></pre>\n\n<p>to</p>\n\n<pre><code>..../123?user=user1&amp;time=2013-09-10T20:00:00Z\n</code></pre>\n\n<p>Second thing is that you may have to encode your URL to send the date properly to server</p>\n"},{"tags":[],"owner":{"account_id":1460860,"reputation":517,"user_id":1375246,"accept_rate":60,"display_name":"hanish.kh"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1378829799,"creation_date":1378808254,"answer_id":18716247,"question_id":18716095,"body_markdown":"It&#39;s not able to deserialize the `String` to a `Date`. Two options are either you can modify the date string as accepted by the date class or use another form, such as a `long` value.","title":"Pass java date into rest query parameter","body":"<p>It's not able to deserialize the <code>String</code> to a <code>Date</code>. Two options are either you can modify the date string as accepted by the date class or use another form, such as a <code>long</code> value.</p>\n"},{"tags":[],"owner":{"account_id":22585429,"reputation":286,"user_id":16769477,"display_name":"Jay Yadav"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1681068121,"creation_date":1681068121,"answer_id":75972430,"question_id":18716095,"body_markdown":"Very late to the Party !! But I think this will help others &lt;br/&gt; I was able to make it work by changing `Date` to `LocalDateTime` and using `@DateTimeFormat` \r\n\r\nWorked fine with this requestURI\r\n\r\n`/test/123?user=user1&amp;time=2013-09-10T20:00:00Z`\r\n```\r\n@GetMapping(value = &quot;/test/{id}&quot;)\r\n\tpublic ResponseEntity&lt;String&gt; modify(@PathParam(&quot;id&quot;) Integer id,\r\n\t\t\t@RequestParam(name = &quot;user&quot;, required = false) String user,\r\n\t\t\t@DateTimeFormat(iso = ISO.DATE_TIME) @RequestParam(&quot;time&quot;) LocalDateTime date) {\r\n\tSystem.out.println(date);\r\n}\r\n\r\n```","title":"Pass java date into rest query parameter","body":"<p>Very late to the Party !! But I think this will help others <br/> I was able to make it work by changing <code>Date</code> to <code>LocalDateTime</code> and using <code>@DateTimeFormat</code></p>\n<p>Worked fine with this requestURI</p>\n<p><code>/test/123?user=user1&amp;time=2013-09-10T20:00:00Z</code></p>\n<pre><code>@GetMapping(value = &quot;/test/{id}&quot;)\n    public ResponseEntity&lt;String&gt; modify(@PathParam(&quot;id&quot;) Integer id,\n            @RequestParam(name = &quot;user&quot;, required = false) String user,\n            @DateTimeFormat(iso = ISO.DATE_TIME) @RequestParam(&quot;time&quot;) LocalDateTime date) {\n    System.out.println(date);\n}\n\n</code></pre>\n"}],"owner":{"account_id":450898,"reputation":15332,"user_id":846476,"accept_rate":86,"display_name":"RNJ"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12502,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":18716247,"answer_count":3,"score":2,"last_activity_date":1681068121,"creation_date":1378807826,"question_id":18716095,"body_markdown":"I have \r\n\r\n    @PUT\r\n    @Path(&quot;{id}&quot;)\r\n    public Response modify(@PathParam(&quot;id&quot;) Integer id, \r\n                           @QueryParam(&quot;user&quot;) String user, @QueryParam(&quot;time&quot;) Date time) {....\r\n\r\n\r\nI am trying to use RestClient to call this web service (the above is actually a cut down version of what I have)\r\n\r\nWhen I call\r\n\r\n    ..../123?user=user1\r\n\r\nI hit the web service. As soon as I add time I get a 403 Forbidden message\r\n\r\n    ..../123?user=user1&amp;time=2013-09-10T20:00:00Z\r\n\r\nEven if I pass nothing into the time query parameter I get the 403.\r\n\r\nIs there anything difference about passing the java dates?\r\n\r\nThank in advance","title":"Pass java date into rest query parameter","body":"<p>I have </p>\n\n<pre><code>@PUT\n@Path(\"{id}\")\npublic Response modify(@PathParam(\"id\") Integer id, \n                       @QueryParam(\"user\") String user, @QueryParam(\"time\") Date time) {....\n</code></pre>\n\n<p>I am trying to use RestClient to call this web service (the above is actually a cut down version of what I have)</p>\n\n<p>When I call</p>\n\n<pre><code>..../123?user=user1\n</code></pre>\n\n<p>I hit the web service. As soon as I add time I get a 403 Forbidden message</p>\n\n<pre><code>..../123?user=user1&amp;time=2013-09-10T20:00:00Z\n</code></pre>\n\n<p>Even if I pass nothing into the time query parameter I get the 403.</p>\n\n<p>Is there anything difference about passing the java dates?</p>\n\n<p>Thank in advance</p>\n"},{"tags":["java","spring","spring-boot","jackson","jackson-databind"],"comments":[{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1670405932,"post_id":74714449,"comment_id":131867132,"body_markdown":"Deprecated are only the constants like SNAKE_CASE","body":"Deprecated are only the constants like SNAKE_CASE"}],"answers":[{"tags":[],"owner":{"account_id":2679531,"reputation":2832,"user_id":2315162,"accept_rate":81,"display_name":"sinclair"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1670406077,"creation_date":1670406077,"answer_id":74714526,"question_id":74714449,"body_markdown":"&gt; NOTE! Since 2.12 sub-classes defined here (as well as static singleton instances thereof) are deprecated due to databind#2715. Please use constants and classes in PropertyNamingStrategies instead.\r\n\r\nhttps://fasterxml.github.io/jackson-databind/javadoc/2.13/com/fasterxml/jackson/databind/PropertyNamingStrategies.html","title":"Alternatives for PropertyNamingStrategy.SNAKE_CASE or PropertyNamingStrategy.SnakeCaseStrategy as it is deprecated now","body":"<blockquote>\n<p>NOTE! Since 2.12 sub-classes defined here (as well as static singleton instances thereof) are deprecated due to databind#2715. Please use constants and classes in PropertyNamingStrategies instead.</p>\n</blockquote>\n<p><a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.13/com/fasterxml/jackson/databind/PropertyNamingStrategies.html\" rel=\"nofollow noreferrer\">https://fasterxml.github.io/jackson-databind/javadoc/2.13/com/fasterxml/jackson/databind/PropertyNamingStrategies.html</a></p>\n"},{"tags":[],"owner":{"account_id":21911535,"reputation":51,"user_id":16195946,"display_name":"Daniel Domingueti"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1670974571,"creation_date":1670974571,"answer_id":74792057,"question_id":74714449,"body_markdown":"    ObjectMapper mapper = new ObjectMapper();\r\n\r\n    mapper.setPropertyNamingStrategy(new PropertyNamingStrategies.SnakeCaseStrategy());\r\n\r\nThat&#39;s it.","title":"Alternatives for PropertyNamingStrategy.SNAKE_CASE or PropertyNamingStrategy.SnakeCaseStrategy as it is deprecated now","body":"<pre><code>ObjectMapper mapper = new ObjectMapper();\n\nmapper.setPropertyNamingStrategy(new PropertyNamingStrategies.SnakeCaseStrategy());\n</code></pre>\n<p>That's it.</p>\n"},{"tags":[],"owner":{"account_id":23170855,"reputation":121,"user_id":17270144,"display_name":"Ananasann"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1681067465,"creation_date":1673363613,"answer_id":75072003,"question_id":74714449,"body_markdown":"Old: \r\n```\r\n@JsonNaming(PropertyNamingStrategy.SnakeCaseStrategy::class)\r\n```\r\n\r\nTo New:\r\n```\r\n@JsonNaming(PropertyNamingStrategies.SnakeCaseStrategy::class)\r\n-- or \r\n@JsonNaming(PropertyNamingStrategies.SnakeCaseStrategy.class)\r\n```","title":"Alternatives for PropertyNamingStrategy.SNAKE_CASE or PropertyNamingStrategy.SnakeCaseStrategy as it is deprecated now","body":"<p>Old:</p>\n<pre><code>@JsonNaming(PropertyNamingStrategy.SnakeCaseStrategy::class)\n</code></pre>\n<p>To New:</p>\n<pre><code>@JsonNaming(PropertyNamingStrategies.SnakeCaseStrategy::class)\n-- or \n@JsonNaming(PropertyNamingStrategies.SnakeCaseStrategy.class)\n</code></pre>\n"}],"owner":{"account_id":17505444,"reputation":93,"user_id":12694767,"display_name":"Parundeep Singh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11001,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":74714526,"answer_count":3,"score":9,"last_activity_date":1681067465,"creation_date":1670405633,"question_id":74714449,"body_markdown":"In prior versions of jackson, we were using the following two ways to modify the Property Naming during serialization and deserialization of objects.\r\n\r\n**First way**:\r\nMentioning the following annotation on class level.\r\n\r\n```\r\n@JsonNaming(PropertyNamingStrategy.SnakeCaseStrategy.class)\r\n```\r\n\r\n**Second way**:\r\nSetting the PropertyNamingStrategy in Object Mapper itself.\r\n\r\n```\r\nobjectMapper.setPropertyNamingStrategy(PropertyNamingStrategy.SnakeCaseStrategy.class);\r\n\r\nor,\r\n\r\nobjectMapper.setPropertyNamingStrategy(PropertyNamingStrategy.SNAKE_CASE);\r\n```\r\n\r\nNow as it has been deprecated from version 2.13.\r\n\r\n**Reference** : https://fasterxml.github.io/jackson-databind/javadoc/2.13/com/fasterxml/jackson/databind/PropertyNamingStrategy.html\r\n\r\nhttps://github.com/FasterXML/jackson-databind/issues/2715\r\n\r\nNow what are the alternative for the above thing.\r\n\r\nCould anyone please help me with how it can be done?\r\n\r\nWas trying the above two ways, but its is showing deprecated now.","title":"Alternatives for PropertyNamingStrategy.SNAKE_CASE or PropertyNamingStrategy.SnakeCaseStrategy as it is deprecated now","body":"<p>In prior versions of jackson, we were using the following two ways to modify the Property Naming during serialization and deserialization of objects.</p>\n<p><strong>First way</strong>:\nMentioning the following annotation on class level.</p>\n<pre><code>@JsonNaming(PropertyNamingStrategy.SnakeCaseStrategy.class)\n</code></pre>\n<p><strong>Second way</strong>:\nSetting the PropertyNamingStrategy in Object Mapper itself.</p>\n<pre><code>objectMapper.setPropertyNamingStrategy(PropertyNamingStrategy.SnakeCaseStrategy.class);\n\nor,\n\nobjectMapper.setPropertyNamingStrategy(PropertyNamingStrategy.SNAKE_CASE);\n</code></pre>\n<p>Now as it has been deprecated from version 2.13.</p>\n<p><strong>Reference</strong> : <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.13/com/fasterxml/jackson/databind/PropertyNamingStrategy.html\" rel=\"noreferrer\">https://fasterxml.github.io/jackson-databind/javadoc/2.13/com/fasterxml/jackson/databind/PropertyNamingStrategy.html</a></p>\n<p><a href=\"https://github.com/FasterXML/jackson-databind/issues/2715\" rel=\"noreferrer\">https://github.com/FasterXML/jackson-databind/issues/2715</a></p>\n<p>Now what are the alternative for the above thing.</p>\n<p>Could anyone please help me with how it can be done?</p>\n<p>Was trying the above two ways, but its is showing deprecated now.</p>\n"},{"tags":["java","xml","hibernate"],"comments":[{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1678101899,"post_id":75649447,"comment_id":133462131,"body_markdown":"I would doubt that `HibernateUtilities` properly initializes the configuration. Especially since you have a duplicate mapping through annotations as well as XML. Choose one and stick to it (I suggest the annotations)","body":"I would doubt that <code>HibernateUtilities</code> properly initializes the configuration. Especially since you have a duplicate mapping through annotations as well as XML. Choose one and stick to it (I suggest the annotations)"},{"owner":{"account_id":23866035,"reputation":1,"user_id":21340747,"display_name":"Mumin Ahmad"},"score":0,"creation_date":1678177494,"post_id":75649447,"comment_id":133478260,"body_markdown":"I have deleted the annotations and the error still exists... after that, I deleted the XML files and reconstructed the Java class with the annotations .. and the same error persists.\nAny suggestions, please? @XtremeBaumer","body":"I have deleted the annotations and the error still exists... after that, I deleted the XML files and reconstructed the Java class with the annotations .. and the same error persists. Any suggestions, please? @XtremeBaumer"}],"answers":[{"tags":[],"owner":{"account_id":13711657,"reputation":1,"user_id":9893852,"display_name":"Jatin srivastav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681067219,"creation_date":1680594786,"answer_id":75926807,"question_id":75649447,"body_markdown":"Add the following line: \r\n```\r\nconfiguration.addAnnotatedClass(User.class);\r\n```\r\ninside the `try` block contained in the `HibernateUtilities` class","title":"Hibernate - Unable to persist entity using XML configuration","body":"<p>Add the following line:</p>\n<pre><code>configuration.addAnnotatedClass(User.class);\n</code></pre>\n<p>inside the <code>try</code> block contained in the <code>HibernateUtilities</code> class</p>\n"}],"owner":{"account_id":23866035,"reputation":1,"user_id":21340747,"display_name":"Mumin Ahmad"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":172,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681067219,"creation_date":1678097123,"question_id":75649447,"body_markdown":"I am trying to persist an entity using Hibernate with XML configuration, but I am unable to do so.  the error message is ...\r\n\r\n```\r\nException in thread &quot;main&quot; java.lang.IllegalArgumentException: Unable to locate persister: entity.Users\r\n\tat org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:735)\r\n\tat org.hibernate.internal.SessionImpl.persist(SessionImpl.java:716)\r\n\tat app.main(app.java:12)\r\n```\r\n\r\nHere is my code:\r\n\r\napp.java:\r\n\r\n```\r\nimport entity.User;\r\nimport org.hibernate.Session;\r\n\r\npublic class app {\r\n    public static void main(String[] args) {\r\n        Session session = HibernateUtilities.getSessionFactory().openSession();\r\n        session.beginTransaction();\r\n\r\n        User user = new User();\r\n        user.setName(&quot;Joe&quot;);\r\n        user.setGoal((short) 250);\r\n        session.persist(user);\r\n\r\n        session.getTransaction().commit();\r\n        session.close();\r\n        HibernateUtilities.getSessionFactory().close();\r\n    }\r\n}\r\n```\r\n\r\nHibernateUtil.java:\r\n\r\n```\r\nimport org.hibernate.HibernateException;\r\nimport org.hibernate.SessionFactory;\r\nimport org.hibernate.boot.registry.StandardServiceRegistryBuilder;\r\nimport org.hibernate.cfg.Configuration;\r\n\r\n\r\npublic class HibernateUtilities {\r\n    private static SessionFactory sessionFactory;\r\n    private static StandardServiceRegistryBuilder builder;\r\n\r\n    static {\r\n        try {\r\n            Configuration configuration = new Configuration().configure();\r\n            builder = new StandardServiceRegistryBuilder().applySettings(configuration.getProperties());\r\n            sessionFactory = configuration.buildSessionFactory(builder.build());\r\n        } catch (HibernateException e) {\r\n            System.out.println(&quot;Problem creating session factory!&quot;);\r\n        }\r\n    }\r\n\r\n    public static SessionFactory getSessionFactory() {\r\n        return sessionFactory;\r\n    }\r\n}\r\n```\r\n\r\nUsers.java:\r\n\r\n```\r\npackage entity;\r\n\r\npublic class User {\r\n    private int id;\r\n    private String name;\r\n    private int total;\r\n    private short goal;\r\n\r\n    public User() {\r\n        // no-parameter constructor\r\n    }\r\n\r\n    public int getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(int id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public int getTotal() {\r\n        return total;\r\n    }\r\n\r\n    public void setTotal(int total) {\r\n        this.total = total;\r\n    }\r\n\r\n    public short getGoal() {\r\n        return goal;\r\n    }\r\n\r\n    public void setGoal(short goal) {\r\n        this.goal = goal;\r\n    }\r\n\r\n    @Override\r\n    public boolean equals(Object o) {\r\n        if (this == o) return true;\r\n        if (o == null || getClass() != o.getClass()) return false;\r\n\r\n        User user = (User) o;\r\n\r\n        if (id != user.id) return false;\r\n        if (total != user.total) return false;\r\n        if (goal != user.goal) return false;\r\n        if (name != null ? !name.equals(user.name) : user.name != null) return false;\r\n\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public int hashCode() {\r\n        int result = id;\r\n        result = 31 * result + (name != null ? name.hashCode() : 0);\r\n        result = 31 * result + total;\r\n        result = 31 * result + (int) goal;\r\n        return result;\r\n    }\r\n}\r\n```\r\n\r\nhibernate.cfg.xml:\r\n\r\n```\r\n&lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39;?&gt;\r\n&lt;!DOCTYPE hibernate-configuration PUBLIC\r\n    &quot;-//Hibernate/Hibernate Configuration DTD//EN&quot;\r\n    &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\r\n&lt;hibernate-configuration&gt;\r\n  &lt;session-factory&gt;\r\n    &lt;property name=&quot;connection.url&quot;&gt;jdbc:oracle:thin:@localhost:1521/orclpdb&lt;/property&gt;\r\n    &lt;property name=&quot;connection.driver_class&quot;&gt;oracle.jdbc.OracleDriver&lt;/property&gt;\r\n      &lt;property name=&quot;connection.username&quot;&gt;PROTRACKER&lt;/property&gt;\r\n      &lt;property name=&quot;connection.password&quot;&gt;123&lt;/property&gt;\r\n      &lt;mapping resource=&quot;Users.hbm.xml&quot;/&gt;\r\n\r\n    &lt;!-- DB schema will be updated if needed --&gt;\r\n    &lt;!-- &lt;property name=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/property&gt; --&gt;\r\n  &lt;/session-factory&gt;\r\n&lt;/hibernate-configuration&gt;\r\n```\r\n\r\nUsers.hbm.xml:\r\n\r\n```\r\n&lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39;?&gt;\r\n&lt;!DOCTYPE hibernate-mapping PUBLIC\r\n    &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;\r\n    &quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;&gt;\r\n&lt;hibernate-mapping&gt;\r\n\r\n    &lt;class name=&quot;entity.User&quot; table=&quot;USERS&quot; schema=&quot;PROTRACKER&quot;&gt;\r\n        &lt;id name=&quot;id&quot;&gt;\r\n            &lt;column name=&quot;ID&quot; sql-type=&quot;number(9)&quot; precision=&quot;9&quot;/&gt;\r\n        &lt;/id&gt;\r\n        &lt;property name=&quot;name&quot;&gt;\r\n            &lt;column name=&quot;NAME&quot; sql-type=&quot;varchar2(100)&quot; length=&quot;100&quot;/&gt;\r\n        &lt;/property&gt;\r\n        &lt;property name=&quot;total&quot;&gt;\r\n            &lt;column name=&quot;TOTAL&quot; sql-type=&quot;number(6)&quot; precision=&quot;6&quot;/&gt;\r\n        &lt;/property&gt;\r\n        &lt;property name=&quot;goal&quot;&gt;\r\n            &lt;column name=&quot;GOAL&quot; sql-type=&quot;number(4)&quot; precision=&quot;4&quot;/&gt;\r\n        &lt;/property&gt;\r\n    &lt;/class&gt;\r\n&lt;/hibernate-mapping&gt;\r\n```\r\n\r\nfull error log ... I am using IntelliJ:\r\n\r\n```\r\n&quot;C:\\Program Files\\Java\\jdk-11.0.10\\bin\\java.exe&quot; &quot;-javaagent:C:\\Program Files\\JetBrains\\IntelliJ IDEA 2022.2\\lib\\idea_rt.jar=63088:C:\\Program Files\\JetBrains\\IntelliJ IDEA 2022.2\\bin&quot; -Dfile.encoding=UTF-8 -classpath C:\\Users\\mumin\\IdeaProjects\\Hibernate\\_2_Hibernate_Demo\\target\\classes;C:\\Users\\mumin\\.m2\\repository\\org\\hibernate\\orm\\hibernate-core\\6.0.0.Final\\hibernate-core-6.0.0.Final.jar;C:\\Users\\mumin\\.m2\\repository\\jakarta\\persistence\\jakarta.persistence-api\\3.0.0\\jakarta.persistence-api-3.0.0.jar;C:\\Users\\mumin\\.m2\\repository\\jakarta\\transaction\\jakarta.transaction-api\\2.0.0\\jakarta.transaction-api-2.0.0.jar;C:\\Users\\mumin\\.m2\\repository\\org\\jboss\\logging\\jboss-logging\\3.4.3.Final\\jboss-logging-3.4.3.Final.jar;C:\\Users\\mumin\\.m2\\repository\\org\\jboss\\jandex\\2.4.2.Final\\jandex-2.4.2.Final.jar;C:\\Users\\mumin\\.m2\\repository\\com\\fasterxml\\classmate\\1.5.1\\classmate-1.5.1.jar;C:\\Users\\mumin\\.m2\\repository\\org\\hibernate\\common\\hibernate-commons-annotations\\6.0.0.CR1\\hibernate-commons-annotations-6.0.0.CR1.jar;C:\\Users\\mumin\\.m2\\repository\\net\\bytebuddy\\byte-buddy\\1.12.8\\byte-buddy-1.12.8.jar;C:\\Users\\mumin\\.m2\\repository\\jakarta\\activation\\jakarta.activation-api\\2.0.1\\jakarta.activation-api-2.0.1.jar;C:\\Users\\mumin\\.m2\\repository\\jakarta\\xml\\bind\\jakarta.xml.bind-api\\3.0.1\\jakarta.xml.bind-api-3.0.1.jar;C:\\Users\\mumin\\.m2\\repository\\jakarta\\inject\\jakarta.inject-api\\2.0.0\\jakarta.inject-api-2.0.0.jar;C:\\Users\\mumin\\.m2\\repository\\org\\antlr\\antlr4-runtime\\4.9.1\\antlr4-runtime-4.9.1.jar;C:\\Users\\mumin\\.m2\\repository\\org\\glassfish\\jaxb\\jaxb-runtime\\3.0.2\\jaxb-runtime-3.0.2.jar;C:\\Users\\mumin\\.m2\\repository\\com\\sun\\activation\\jakarta.activation\\2.0.1\\jakarta.activation-2.0.1.jar;C:\\Users\\mumin\\.m2\\repository\\org\\glassfish\\jaxb\\jaxb-core\\3.0.2\\jaxb-core-3.0.2.jar;C:\\Users\\mumin\\.m2\\repository\\org\\glassfish\\jaxb\\txw2\\3.0.2\\txw2-3.0.2.jar;C:\\Users\\mumin\\.m2\\repository\\com\\sun\\istack\\istack-commons-runtime\\4.0.1\\istack-commons-runtime-4.0.1.jar;C:\\Users\\mumin\\.m2\\repository\\com\\oracle\\database\\jdbc\\ojdbc8\\21.9.0.0\\ojdbc8-21.9.0.0.jar app\r\nMar 06, 2023 11:47:59 AM org.hibernate.Version logVersion\r\nINFO: HHH000412: Hibernate ORM core version 6.0.0.Final\r\nMar 06, 2023 11:48:01 AM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure\r\nWARN: HHH10001002: Using built-in connection pool (not intended for production use)\r\nMar 06, 2023 11:48:01 AM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\r\nINFO: HHH10001005: Loaded JDBC driver class: oracle.jdbc.OracleDriver\r\nMar 06, 2023 11:48:01 AM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\r\nINFO: HHH10001012: Connecting with JDBC URL [jdbc:oracle:thin:@localhost:1521/orclpdb]\r\nMar 06, 2023 11:48:01 AM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\r\nINFO: HHH10001001: Connection properties: {password=****, user=PROTRACKER}\r\nMar 06, 2023 11:48:01 AM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\r\nINFO: HHH10001003: Autocommit mode: false\r\nMar 06, 2023 11:48:01 AM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl$PooledConnections &lt;init&gt;\r\nINFO: HHH10001115: Connection pool size: 20 (min=1)\r\nMar 06, 2023 11:48:01 AM org.hibernate.engine.jdbc.dialect.internal.DialectFactoryImpl logSelectedDialect\r\nINFO: HHH000400: Using dialect: org.hibernate.dialect.OracleDialect\r\nMar 06, 2023 11:48:01 AM org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator initiateService\r\nINFO: HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\r\nException in thread &quot;main&quot; java.lang.IllegalArgumentException: Unable to locate persister: entity.Users\r\n\tat org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:735)\r\n\tat org.hibernate.internal.SessionImpl.persist(SessionImpl.java:716)\r\n\tat app.main(app.java:12)\r\n\r\nProcess finished with exit code 1\r\n```\r\n\r\nI have tried everything that I can do ... Thanks in Advance for your time and support.","title":"Hibernate - Unable to persist entity using XML configuration","body":"<p>I am trying to persist an entity using Hibernate with XML configuration, but I am unable to do so.  the error message is ...</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.IllegalArgumentException: Unable to locate persister: entity.Users\n    at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:735)\n    at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:716)\n    at app.main(app.java:12)\n</code></pre>\n<p>Here is my code:</p>\n<p>app.java:</p>\n<pre><code>import entity.User;\nimport org.hibernate.Session;\n\npublic class app {\n    public static void main(String[] args) {\n        Session session = HibernateUtilities.getSessionFactory().openSession();\n        session.beginTransaction();\n\n        User user = new User();\n        user.setName(&quot;Joe&quot;);\n        user.setGoal((short) 250);\n        session.persist(user);\n\n        session.getTransaction().commit();\n        session.close();\n        HibernateUtilities.getSessionFactory().close();\n    }\n}\n</code></pre>\n<p>HibernateUtil.java:</p>\n<pre><code>import org.hibernate.HibernateException;\nimport org.hibernate.SessionFactory;\nimport org.hibernate.boot.registry.StandardServiceRegistryBuilder;\nimport org.hibernate.cfg.Configuration;\n\n\npublic class HibernateUtilities {\n    private static SessionFactory sessionFactory;\n    private static StandardServiceRegistryBuilder builder;\n\n    static {\n        try {\n            Configuration configuration = new Configuration().configure();\n            builder = new StandardServiceRegistryBuilder().applySettings(configuration.getProperties());\n            sessionFactory = configuration.buildSessionFactory(builder.build());\n        } catch (HibernateException e) {\n            System.out.println(&quot;Problem creating session factory!&quot;);\n        }\n    }\n\n    public static SessionFactory getSessionFactory() {\n        return sessionFactory;\n    }\n}\n</code></pre>\n<p>Users.java:</p>\n<pre><code>package entity;\n\npublic class User {\n    private int id;\n    private String name;\n    private int total;\n    private short goal;\n\n    public User() {\n        // no-parameter constructor\n    }\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public int getTotal() {\n        return total;\n    }\n\n    public void setTotal(int total) {\n        this.total = total;\n    }\n\n    public short getGoal() {\n        return goal;\n    }\n\n    public void setGoal(short goal) {\n        this.goal = goal;\n    }\n\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n\n        User user = (User) o;\n\n        if (id != user.id) return false;\n        if (total != user.total) return false;\n        if (goal != user.goal) return false;\n        if (name != null ? !name.equals(user.name) : user.name != null) return false;\n\n        return true;\n    }\n\n    @Override\n    public int hashCode() {\n        int result = id;\n        result = 31 * result + (name != null ? name.hashCode() : 0);\n        result = 31 * result + total;\n        result = 31 * result + (int) goal;\n        return result;\n    }\n}\n</code></pre>\n<p>hibernate.cfg.xml:</p>\n<pre><code>&lt;?xml version='1.0' encoding='utf-8'?&gt;\n&lt;!DOCTYPE hibernate-configuration PUBLIC\n    &quot;-//Hibernate/Hibernate Configuration DTD//EN&quot;\n    &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\n&lt;hibernate-configuration&gt;\n  &lt;session-factory&gt;\n    &lt;property name=&quot;connection.url&quot;&gt;jdbc:oracle:thin:@localhost:1521/orclpdb&lt;/property&gt;\n    &lt;property name=&quot;connection.driver_class&quot;&gt;oracle.jdbc.OracleDriver&lt;/property&gt;\n      &lt;property name=&quot;connection.username&quot;&gt;PROTRACKER&lt;/property&gt;\n      &lt;property name=&quot;connection.password&quot;&gt;123&lt;/property&gt;\n      &lt;mapping resource=&quot;Users.hbm.xml&quot;/&gt;\n\n    &lt;!-- DB schema will be updated if needed --&gt;\n    &lt;!-- &lt;property name=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/property&gt; --&gt;\n  &lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;\n</code></pre>\n<p>Users.hbm.xml:</p>\n<pre><code>&lt;?xml version='1.0' encoding='utf-8'?&gt;\n&lt;!DOCTYPE hibernate-mapping PUBLIC\n    &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;\n    &quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;&gt;\n&lt;hibernate-mapping&gt;\n\n    &lt;class name=&quot;entity.User&quot; table=&quot;USERS&quot; schema=&quot;PROTRACKER&quot;&gt;\n        &lt;id name=&quot;id&quot;&gt;\n            &lt;column name=&quot;ID&quot; sql-type=&quot;number(9)&quot; precision=&quot;9&quot;/&gt;\n        &lt;/id&gt;\n        &lt;property name=&quot;name&quot;&gt;\n            &lt;column name=&quot;NAME&quot; sql-type=&quot;varchar2(100)&quot; length=&quot;100&quot;/&gt;\n        &lt;/property&gt;\n        &lt;property name=&quot;total&quot;&gt;\n            &lt;column name=&quot;TOTAL&quot; sql-type=&quot;number(6)&quot; precision=&quot;6&quot;/&gt;\n        &lt;/property&gt;\n        &lt;property name=&quot;goal&quot;&gt;\n            &lt;column name=&quot;GOAL&quot; sql-type=&quot;number(4)&quot; precision=&quot;4&quot;/&gt;\n        &lt;/property&gt;\n    &lt;/class&gt;\n&lt;/hibernate-mapping&gt;\n</code></pre>\n<p>full error log ... I am using IntelliJ:</p>\n<pre><code>&quot;C:\\Program Files\\Java\\jdk-11.0.10\\bin\\java.exe&quot; &quot;-javaagent:C:\\Program Files\\JetBrains\\IntelliJ IDEA 2022.2\\lib\\idea_rt.jar=63088:C:\\Program Files\\JetBrains\\IntelliJ IDEA 2022.2\\bin&quot; -Dfile.encoding=UTF-8 -classpath C:\\Users\\mumin\\IdeaProjects\\Hibernate\\_2_Hibernate_Demo\\target\\classes;C:\\Users\\mumin\\.m2\\repository\\org\\hibernate\\orm\\hibernate-core\\6.0.0.Final\\hibernate-core-6.0.0.Final.jar;C:\\Users\\mumin\\.m2\\repository\\jakarta\\persistence\\jakarta.persistence-api\\3.0.0\\jakarta.persistence-api-3.0.0.jar;C:\\Users\\mumin\\.m2\\repository\\jakarta\\transaction\\jakarta.transaction-api\\2.0.0\\jakarta.transaction-api-2.0.0.jar;C:\\Users\\mumin\\.m2\\repository\\org\\jboss\\logging\\jboss-logging\\3.4.3.Final\\jboss-logging-3.4.3.Final.jar;C:\\Users\\mumin\\.m2\\repository\\org\\jboss\\jandex\\2.4.2.Final\\jandex-2.4.2.Final.jar;C:\\Users\\mumin\\.m2\\repository\\com\\fasterxml\\classmate\\1.5.1\\classmate-1.5.1.jar;C:\\Users\\mumin\\.m2\\repository\\org\\hibernate\\common\\hibernate-commons-annotations\\6.0.0.CR1\\hibernate-commons-annotations-6.0.0.CR1.jar;C:\\Users\\mumin\\.m2\\repository\\net\\bytebuddy\\byte-buddy\\1.12.8\\byte-buddy-1.12.8.jar;C:\\Users\\mumin\\.m2\\repository\\jakarta\\activation\\jakarta.activation-api\\2.0.1\\jakarta.activation-api-2.0.1.jar;C:\\Users\\mumin\\.m2\\repository\\jakarta\\xml\\bind\\jakarta.xml.bind-api\\3.0.1\\jakarta.xml.bind-api-3.0.1.jar;C:\\Users\\mumin\\.m2\\repository\\jakarta\\inject\\jakarta.inject-api\\2.0.0\\jakarta.inject-api-2.0.0.jar;C:\\Users\\mumin\\.m2\\repository\\org\\antlr\\antlr4-runtime\\4.9.1\\antlr4-runtime-4.9.1.jar;C:\\Users\\mumin\\.m2\\repository\\org\\glassfish\\jaxb\\jaxb-runtime\\3.0.2\\jaxb-runtime-3.0.2.jar;C:\\Users\\mumin\\.m2\\repository\\com\\sun\\activation\\jakarta.activation\\2.0.1\\jakarta.activation-2.0.1.jar;C:\\Users\\mumin\\.m2\\repository\\org\\glassfish\\jaxb\\jaxb-core\\3.0.2\\jaxb-core-3.0.2.jar;C:\\Users\\mumin\\.m2\\repository\\org\\glassfish\\jaxb\\txw2\\3.0.2\\txw2-3.0.2.jar;C:\\Users\\mumin\\.m2\\repository\\com\\sun\\istack\\istack-commons-runtime\\4.0.1\\istack-commons-runtime-4.0.1.jar;C:\\Users\\mumin\\.m2\\repository\\com\\oracle\\database\\jdbc\\ojdbc8\\21.9.0.0\\ojdbc8-21.9.0.0.jar app\nMar 06, 2023 11:47:59 AM org.hibernate.Version logVersion\nINFO: HHH000412: Hibernate ORM core version 6.0.0.Final\nMar 06, 2023 11:48:01 AM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure\nWARN: HHH10001002: Using built-in connection pool (not intended for production use)\nMar 06, 2023 11:48:01 AM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\nINFO: HHH10001005: Loaded JDBC driver class: oracle.jdbc.OracleDriver\nMar 06, 2023 11:48:01 AM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\nINFO: HHH10001012: Connecting with JDBC URL [jdbc:oracle:thin:@localhost:1521/orclpdb]\nMar 06, 2023 11:48:01 AM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\nINFO: HHH10001001: Connection properties: {password=****, user=PROTRACKER}\nMar 06, 2023 11:48:01 AM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\nINFO: HHH10001003: Autocommit mode: false\nMar 06, 2023 11:48:01 AM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl$PooledConnections &lt;init&gt;\nINFO: HHH10001115: Connection pool size: 20 (min=1)\nMar 06, 2023 11:48:01 AM org.hibernate.engine.jdbc.dialect.internal.DialectFactoryImpl logSelectedDialect\nINFO: HHH000400: Using dialect: org.hibernate.dialect.OracleDialect\nMar 06, 2023 11:48:01 AM org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator initiateService\nINFO: HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\nException in thread &quot;main&quot; java.lang.IllegalArgumentException: Unable to locate persister: entity.Users\n    at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:735)\n    at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:716)\n    at app.main(app.java:12)\n\nProcess finished with exit code 1\n</code></pre>\n<p>I have tried everything that I can do ... Thanks in Advance for your time and support.</p>\n"},{"tags":["java","apache-arrow"],"answers":[{"tags":[],"owner":{"account_id":4382227,"reputation":2318,"user_id":3573553,"display_name":"Mark"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1680791647,"creation_date":1680791647,"answer_id":75950754,"question_id":75889522,"body_markdown":"The solution I eventually found involves placing the `UnionListWriter` and the `startList()`, `endList()` and `setRowCount()` calls in the appropriate place.\r\n\r\nThe general pattern is:\r\n\r\n```java\r\ntry (\r\n   BufferAllocator allocator = new RootAllocator(Long.MAX_VALUE);\r\n   \r\n   // create all your vectors and other closable ...\r\n\r\n   final ListVector attributes = (ListVector) SamAlignmentSchema.ATTRIBUTES_FIELD.createVector(allocator);\r\n   // create the writer for the list vector\r\n   final UnionListWriter listWriter = attributes.getWriter();\r\n\r\n   // create the vector schema root\r\n   VectorSchemaRoot samRecordBatch = new VectorSchemaRoot(\r\n       aligmentSchema.getFields(),\r\n       List.of(\r\n           // add vectors including the list vecto\r\n           attributes\r\n       )\r\n   )\r\n){\r\n    //allocate the VectorSchemaRoot\r\n    samRecordBatch.allocateNew();\r\n    \r\n    // for reach sam record (read)\r\n    samReader.iterator().stream().forEach(samRecord -&gt; {\r\n        int index = samRecordBatch.getRowCount();\r\n        System.out.println(&quot;index = &quot; + index);\r\n\r\n        // set the values of the primitive vectors using set or setSafe ...\r\n\r\n        // write a list of attributes into the attrbutes field\r\n        final List&lt;SAMRecord.SAMTagAndValue&gt; recordAttributes = samRecord.getAttributes();\r\n\r\n        // start a new list at the current index\r\n        listWriter.startList();\r\n        listWriter.setPosition(index);\r\n\r\n        if (recordAttributes != null) {\r\n            // for each attribute\r\n            IntStream.range(0, recordAttributes.size()).forEachOrdered(attributeIndex -&gt; {\r\n\r\n                // put the values of the attribute in the arrow struct\r\n                final SAMRecord.SAMTagAndValue samTagAndValue = recordAttributes.get(attributeIndex);\r\n\r\n                final BaseWriter.StructWriter structWriter = listWriter.struct();\r\n                \r\n                // start a struct to go into the list\r\n                structWriter.start();\r\n\r\n                final byte[] tagBytes = samTagAndValue.tag.getBytes(StandardCharsets.UTF_8);\r\n                final byte[] typeBytes = &quot;S&quot;.getBytes(StandardCharsets.UTF_8);\r\n                final byte[] valueBytes = samTagAndValue.value.toString().getBytes(StandardCharsets.UTF_8);\r\n\r\n                ArrowBuf tempBuf = allocator.buffer(tagBytes.length);\r\n                tempBuf.setBytes(0, tagBytes);\r\n                structWriter.varChar(&quot;AttributeTag&quot;).writeVarChar(0, tagBytes.length, tempBuf);\r\n                tempBuf.close();\r\n\r\n                tempBuf = allocator.buffer(typeBytes.length);\r\n                tempBuf.setBytes(0, typeBytes);\r\n                structWriter.varChar(&quot;AttributeType&quot;).writeVarChar(0, typeBytes.length, tempBuf);\r\n                tempBuf.close();\r\n\r\n                tempBuf = allocator.buffer(valueBytes.length);\r\n                tempBuf.setBytes(0, valueBytes);\r\n                structWriter.varChar(&quot;AttributeValue&quot;).writeVarChar(0, valueBytes.length, tempBuf);\r\n                tempBuf.close();\r\n\r\n                //finished with this struct\r\n                structWriter.end();\r\n            });\r\n        }\r\n        index++;\r\n\r\n        // finished writing the list of structs for this position\r\n        listWriter.endList();\r\n\r\n        listWriter.setValueCount(index);\r\n        samRecordBatch.setRowCount(index);\r\n});\r\n```\r\n","title":"How to populate a Java Apache Arrow Field List of Structs?","body":"<p>The solution I eventually found involves placing the <code>UnionListWriter</code> and the <code>startList()</code>, <code>endList()</code> and <code>setRowCount()</code> calls in the appropriate place.</p>\n<p>The general pattern is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>try (\n   BufferAllocator allocator = new RootAllocator(Long.MAX_VALUE);\n   \n   // create all your vectors and other closable ...\n\n   final ListVector attributes = (ListVector) SamAlignmentSchema.ATTRIBUTES_FIELD.createVector(allocator);\n   // create the writer for the list vector\n   final UnionListWriter listWriter = attributes.getWriter();\n\n   // create the vector schema root\n   VectorSchemaRoot samRecordBatch = new VectorSchemaRoot(\n       aligmentSchema.getFields(),\n       List.of(\n           // add vectors including the list vecto\n           attributes\n       )\n   )\n){\n    //allocate the VectorSchemaRoot\n    samRecordBatch.allocateNew();\n    \n    // for reach sam record (read)\n    samReader.iterator().stream().forEach(samRecord -&gt; {\n        int index = samRecordBatch.getRowCount();\n        System.out.println(&quot;index = &quot; + index);\n\n        // set the values of the primitive vectors using set or setSafe ...\n\n        // write a list of attributes into the attrbutes field\n        final List&lt;SAMRecord.SAMTagAndValue&gt; recordAttributes = samRecord.getAttributes();\n\n        // start a new list at the current index\n        listWriter.startList();\n        listWriter.setPosition(index);\n\n        if (recordAttributes != null) {\n            // for each attribute\n            IntStream.range(0, recordAttributes.size()).forEachOrdered(attributeIndex -&gt; {\n\n                // put the values of the attribute in the arrow struct\n                final SAMRecord.SAMTagAndValue samTagAndValue = recordAttributes.get(attributeIndex);\n\n                final BaseWriter.StructWriter structWriter = listWriter.struct();\n                \n                // start a struct to go into the list\n                structWriter.start();\n\n                final byte[] tagBytes = samTagAndValue.tag.getBytes(StandardCharsets.UTF_8);\n                final byte[] typeBytes = &quot;S&quot;.getBytes(StandardCharsets.UTF_8);\n                final byte[] valueBytes = samTagAndValue.value.toString().getBytes(StandardCharsets.UTF_8);\n\n                ArrowBuf tempBuf = allocator.buffer(tagBytes.length);\n                tempBuf.setBytes(0, tagBytes);\n                structWriter.varChar(&quot;AttributeTag&quot;).writeVarChar(0, tagBytes.length, tempBuf);\n                tempBuf.close();\n\n                tempBuf = allocator.buffer(typeBytes.length);\n                tempBuf.setBytes(0, typeBytes);\n                structWriter.varChar(&quot;AttributeType&quot;).writeVarChar(0, typeBytes.length, tempBuf);\n                tempBuf.close();\n\n                tempBuf = allocator.buffer(valueBytes.length);\n                tempBuf.setBytes(0, valueBytes);\n                structWriter.varChar(&quot;AttributeValue&quot;).writeVarChar(0, valueBytes.length, tempBuf);\n                tempBuf.close();\n\n                //finished with this struct\n                structWriter.end();\n            });\n        }\n        index++;\n\n        // finished writing the list of structs for this position\n        listWriter.endList();\n\n        listWriter.setValueCount(index);\n        samRecordBatch.setRowCount(index);\n});\n</code></pre>\n"}],"owner":{"account_id":4382227,"reputation":2318,"user_id":3573553,"display_name":"Mark"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":226,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75950754,"answer_count":1,"score":1,"last_activity_date":1681066192,"creation_date":1680186667,"question_id":75889522,"body_markdown":"I have a data set which is mostly a 2D table, however one column (`Field`)\r\n(called Attributes) contains a `List` of `Structs` in each cell. Each\r\n`Struct` has three `Field`s: Attribute Tag, Attribute Type and Attribute\r\nValue.\r\n\r\nThe definition of the Attributes `Field` is:\r\n\r\n```java\r\n/**\r\n * Attribute Tag - Two character tag.\r\n */\r\npublic static final Field ATTRIBUTE_TAG_FIELD =\r\n        new Field(&quot;AttributeTag&quot;, FieldType.notNullable(new ArrowType.FixedSizeBinary(2)), null);\r\n\r\n\r\n/**\r\n * Attribute Type - One character type.\r\n */\r\npublic static final Field ATTRIBUTE_TYPE_FIELD =\r\n        new Field(\r\n                &quot;AttributeType&quot;,\r\n                new FieldType(false,\r\n                new ArrowType.FixedSizeBinary(1), null),\r\n                null\r\n        );\r\n\r\n/**\r\n * String representation of the Attribute value.\r\n */\r\npublic static final Field ATTRIBUTE_VALUE_FIELD = new Field(&quot;AttributeValue&quot;, FieldType.notNullable(new ArrowType.Utf8()), null);\r\n\r\n/**\r\n * The field is a nullable List of Structs each with an attribute tag,\r\ntype and value.\r\n */\r\npublic static final Field ATTRIBUTES_FIELD =\r\n        new Field(&quot;Attributes&quot;, FieldType.nullable(new ArrowType.List()), List.of(\r\n                new Field(&quot;Attribute&quot;, FieldType.nullable(new ArrowType.Struct()), List.of(\r\n                        ATTRIBUTE_TAG_FIELD, ATTRIBUTE_TYPE_FIELD, ATTRIBUTE_VALUE_FIELD))));\r\n```\r\n\r\nI have this code that attempts to populate the Attributes from some\r\nsource data. Although this produces no errors when run, it doesn&#39;t\r\nresult in any values in the attributes vector.\r\n\r\n```java\r\nfinal ListVector attributes = (ListVector)\r\nATTRIBUTES_FIELD.createVector(allocator);\r\n\r\n// this is the source of the attributes that I will populate into the\r\nattributes vector\r\nfinal List&lt;SAMRecord.SAMTagAndValue&gt; recordAttributes =\r\nsamRecord.getAttributes();\r\n\r\nif (recordAttributes != null &amp;&amp; recordAttributes.size() &gt; 0 ) {\r\n    final UnionListWriter listWriter = attributes.getWriter();\r\n    listWriter.allocate();\r\n\r\n    IntStream.range(0, recordAttributes.size()).forEachOrdered(attributeIndex -&gt; {\r\n        listWriter.setPosition(attributeIndex);\r\n        listWriter.startList();\r\n\r\n        // put the values of the attribute in the arrow struct\r\n        final SAMRecord.SAMTagAndValue samTagAndValue recordAttributes.get(attributeIndex);\r\n\r\n        // I think the problem is here. In a debugger this seems to create a new writer not related to my Vector??\r\n        final BaseWriter.StructWriter structWriter = listWriter.struct(&quot;Attribute&quot;);\r\n        structWriter.start();\r\n\r\n        final byte[] tagBytes =\r\n            samTagAndValue.tag.getBytes(StandardCharsets.UTF_8);\r\n        // todo find out the type from the value\r\n        final byte[] typeBytes = &quot;S&quot;.getBytes(StandardCharsets.UTF_8);\r\n        final byte[] valueBytes =\r\n            samTagAndValue.value.toString().getBytes(StandardCharsets.UTF_8);\r\n\r\n        ArrowBuf tempBuf = allocator.buffer(tagBytes.length);\r\n        tempBuf.setBytes(0, tagBytes);\r\n        structWriter.varChar(&quot;AttributeTag&quot;).writeVarChar(0, tagBytes.length, tempBuf);\r\n        tempBuf.close();\r\n\r\n\r\n        tempBuf = allocator.buffer(typeBytes.length);\r\n        structWriter.varChar(&quot;AttributeType&quot;).writeVarChar(0, typeBytes.length, tempBuf);\r\n        tempBuf.close();\r\n\r\n        tempBuf = allocator.buffer(valueBytes.length);\r\n        structWriter.varChar(&quot;AttributeValue&quot;).writeVarChar(0, valueBytes.length, tempBuf);\r\n        tempBuf.close();\r\n\r\n        structWriter.end();\r\n    });\r\n\r\n    listWriter.setValueCount(recordAttributes.size());\r\n    listWriter.end();\r\n}\r\n```\r\n\r\nWhy doesn&#39;t this result in any values in the `attributes` `ListVector`? What is the correct way to do this?\r\n","title":"How to populate a Java Apache Arrow Field List of Structs?","body":"<p>I have a data set which is mostly a 2D table, however one column (<code>Field</code>)\n(called Attributes) contains a <code>List</code> of <code>Structs</code> in each cell. Each\n<code>Struct</code> has three <code>Field</code>s: Attribute Tag, Attribute Type and Attribute\nValue.</p>\n<p>The definition of the Attributes <code>Field</code> is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Attribute Tag - Two character tag.\n */\npublic static final Field ATTRIBUTE_TAG_FIELD =\n        new Field(&quot;AttributeTag&quot;, FieldType.notNullable(new ArrowType.FixedSizeBinary(2)), null);\n\n\n/**\n * Attribute Type - One character type.\n */\npublic static final Field ATTRIBUTE_TYPE_FIELD =\n        new Field(\n                &quot;AttributeType&quot;,\n                new FieldType(false,\n                new ArrowType.FixedSizeBinary(1), null),\n                null\n        );\n\n/**\n * String representation of the Attribute value.\n */\npublic static final Field ATTRIBUTE_VALUE_FIELD = new Field(&quot;AttributeValue&quot;, FieldType.notNullable(new ArrowType.Utf8()), null);\n\n/**\n * The field is a nullable List of Structs each with an attribute tag,\ntype and value.\n */\npublic static final Field ATTRIBUTES_FIELD =\n        new Field(&quot;Attributes&quot;, FieldType.nullable(new ArrowType.List()), List.of(\n                new Field(&quot;Attribute&quot;, FieldType.nullable(new ArrowType.Struct()), List.of(\n                        ATTRIBUTE_TAG_FIELD, ATTRIBUTE_TYPE_FIELD, ATTRIBUTE_VALUE_FIELD))));\n</code></pre>\n<p>I have this code that attempts to populate the Attributes from some\nsource data. Although this produces no errors when run, it doesn't\nresult in any values in the attributes vector.</p>\n<pre class=\"lang-java prettyprint-override\"><code>final ListVector attributes = (ListVector)\nATTRIBUTES_FIELD.createVector(allocator);\n\n// this is the source of the attributes that I will populate into the\nattributes vector\nfinal List&lt;SAMRecord.SAMTagAndValue&gt; recordAttributes =\nsamRecord.getAttributes();\n\nif (recordAttributes != null &amp;&amp; recordAttributes.size() &gt; 0 ) {\n    final UnionListWriter listWriter = attributes.getWriter();\n    listWriter.allocate();\n\n    IntStream.range(0, recordAttributes.size()).forEachOrdered(attributeIndex -&gt; {\n        listWriter.setPosition(attributeIndex);\n        listWriter.startList();\n\n        // put the values of the attribute in the arrow struct\n        final SAMRecord.SAMTagAndValue samTagAndValue recordAttributes.get(attributeIndex);\n\n        // I think the problem is here. In a debugger this seems to create a new writer not related to my Vector??\n        final BaseWriter.StructWriter structWriter = listWriter.struct(&quot;Attribute&quot;);\n        structWriter.start();\n\n        final byte[] tagBytes =\n            samTagAndValue.tag.getBytes(StandardCharsets.UTF_8);\n        // todo find out the type from the value\n        final byte[] typeBytes = &quot;S&quot;.getBytes(StandardCharsets.UTF_8);\n        final byte[] valueBytes =\n            samTagAndValue.value.toString().getBytes(StandardCharsets.UTF_8);\n\n        ArrowBuf tempBuf = allocator.buffer(tagBytes.length);\n        tempBuf.setBytes(0, tagBytes);\n        structWriter.varChar(&quot;AttributeTag&quot;).writeVarChar(0, tagBytes.length, tempBuf);\n        tempBuf.close();\n\n\n        tempBuf = allocator.buffer(typeBytes.length);\n        structWriter.varChar(&quot;AttributeType&quot;).writeVarChar(0, typeBytes.length, tempBuf);\n        tempBuf.close();\n\n        tempBuf = allocator.buffer(valueBytes.length);\n        structWriter.varChar(&quot;AttributeValue&quot;).writeVarChar(0, valueBytes.length, tempBuf);\n        tempBuf.close();\n\n        structWriter.end();\n    });\n\n    listWriter.setValueCount(recordAttributes.size());\n    listWriter.end();\n}\n</code></pre>\n<p>Why doesn't this result in any values in the <code>attributes</code> <code>ListVector</code>? What is the correct way to do this?</p>\n"},{"tags":["java","tomcat","database-connection","jndi"],"answers":[{"tags":[],"owner":{"account_id":947184,"reputation":48994,"user_id":974186,"accept_rate":79,"display_name":"Ren&#233; Link"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1373604603,"creation_date":1373604603,"answer_id":17607627,"question_id":17606988,"body_markdown":"Just configure the connection pool settings (maxActive, maxWait, maxIdle, ...).\r\nTomcat comes with the apache commons-dbcp library. It is repackaged as  $CATALINA_HOME/lib/tomcat-dbcp.jar.\r\n\r\nTake a look at the tomcat doc for details: http://tomcat.apache.org/tomcat-6.0-doc/jndi-datasource-examples-howto.html#Database_Connection_Pool_%28DBCP%29_Configurations\r\n\r\n\r\n    &lt;Context&gt;\r\n\t  &lt;Resource name=&quot;jdbc/TestDB&quot; auth=&quot;Container&quot; type=&quot;javax.sql.DataSource&quot;\r\n\t\t\t\t   maxActive=&quot;100&quot; maxIdle=&quot;30&quot; maxWait=&quot;10000&quot;\r\n\t\t\t\t   username=&quot;javauser&quot; password=&quot;javadude&quot; driverClassName=&quot;com.mysql.jdbc.Driver&quot;\r\n\t\t\t\t   url=&quot;jdbc:mysql://localhost:3306/javatest&quot;/&gt;\r\n\t&lt;/Context&gt;","title":"How to get PoolingDataSource from Tomcat&#39;s JNDI","body":"<p>Just configure the connection pool settings (maxActive, maxWait, maxIdle, ...).\nTomcat comes with the apache commons-dbcp library. It is repackaged as  $CATALINA_HOME/lib/tomcat-dbcp.jar.</p>\n\n<p>Take a look at the tomcat doc for details: <a href=\"http://tomcat.apache.org/tomcat-6.0-doc/jndi-datasource-examples-howto.html#Database_Connection_Pool_%28DBCP%29_Configurations\" rel=\"nofollow\">http://tomcat.apache.org/tomcat-6.0-doc/jndi-datasource-examples-howto.html#Database_Connection_Pool_%28DBCP%29_Configurations</a></p>\n\n<pre><code>&lt;Context&gt;\n  &lt;Resource name=\"jdbc/TestDB\" auth=\"Container\" type=\"javax.sql.DataSource\"\n               maxActive=\"100\" maxIdle=\"30\" maxWait=\"10000\"\n               username=\"javauser\" password=\"javadude\" driverClassName=\"com.mysql.jdbc.Driver\"\n               url=\"jdbc:mysql://localhost:3306/javatest\"/&gt;\n&lt;/Context&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":465863,"reputation":41382,"user_id":870248,"accept_rate":100,"display_name":"Paul Vargas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1373606277,"creation_date":1373606277,"answer_id":17607852,"question_id":17606988,"body_markdown":"&gt; &lt;p&gt;The &lt;strong&gt;JDBC Connection Pool &lt;code&gt;org.apache.tomcat.jdbc.pool&lt;/code&gt;&lt;/strong&gt; \r\n  is a replacement or an alternative to the &lt;a href=&quot;http://commons.apache.org/dbcp/&quot;&gt;commons-dbcp&lt;/a&gt;\r\n  connection pool.&lt;/p&gt;\r\n\r\n1. Add to the `server.xml` file in the `GlobalNamingResources` section something like the next:\r\n\r\n\r\n\t\r\n\t    &lt;Resource name=&quot;jdbc/TestDB&quot; \r\n\t\t\t      auth=&quot;Container&quot; \r\n\t\t\t\t  type=&quot;javax.sql.DataSource&quot; \r\n\t\t\t\t  factory=&quot;org.apache.tomcat.jdbc.pool.DataSourceFactory&quot;\r\n\t\t\t\t  testWhileIdle=&quot;true&quot;\r\n\t\t\t\t  testOnBorrow=&quot;true&quot;\r\n\t\t\t\t  testOnReturn=&quot;false&quot;\r\n\t\t\t\t  validationQuery=&quot;SELECT 1&quot;\r\n\t\t\t\t  validationInterval=&quot;30000&quot;\r\n\t\t\t\t  timeBetweenEvictionRunsMillis=&quot;30000&quot;\r\n\t\t\t\t  maxActive=&quot;100&quot; \r\n\t\t\t\t  minIdle=&quot;10&quot; \r\n\t\t\t\t  maxWait=&quot;10000&quot; \r\n\t\t\t\t  initialSize=&quot;10&quot;\r\n\t\t\t\t  removeAbandonedTimeout=&quot;60&quot;\r\n\t\t\t\t  removeAbandoned=&quot;true&quot;\r\n\t\t\t\t  logAbandoned=&quot;true&quot;\r\n\t\t\t\t  minEvictableIdleTimeMillis=&quot;30000&quot; \r\n\t\t\t\t  jmxEnabled=&quot;true&quot;\r\n\t\t\t\t  jdbcInterceptors=&quot;org.apache.tomcat.jdbc.pool.interceptor.ConnectionState;org.apache.tomcat.jdbc.pool.interceptor.StatementFinalizer&quot;\r\n\t\t\t\t  username=&quot;root&quot; \r\n\t\t\t\t  password=&quot;password&quot; \r\n\t\t\t\t  driverClassName=&quot;com.mysql.jdbc.Driver&quot;\r\n\t\t\t\t  url=&quot;jdbc:mysql://localhost:3306/mysql&quot;/&gt;\r\n\r\n2. Add the JDBC driver JAR into the Tomcat lib directory.\r\n\r\n3. Add in your `context.xml`:\r\n\r\n        &lt;ResourceLink global=&quot;jdbc/TestDB&quot; name=&quot;jdbc/TestDB&quot; \r\n                      type=&quot;javax.sql.DataSource&quot;/&gt;\r\n\r\nSee more in [*The Tomcat JDBC Connection Pool*][1].\r\n\r\n\r\n  [1]: http://people.apache.org/~fhanik/jdbc-pool/jdbc-pool.html","title":"How to get PoolingDataSource from Tomcat&#39;s JNDI","body":"<blockquote>\n  <p>The <strong>JDBC Connection Pool <code>org.apache.tomcat.jdbc.pool</code></strong> \n    is a replacement or an alternative to the <a href=\"http://commons.apache.org/dbcp/\" rel=\"nofollow\">commons-dbcp</a>\n    connection pool.</p>\n</blockquote>\n\n<ol>\n<li><p>Add to the <code>server.xml</code> file in the <code>GlobalNamingResources</code> section something like the next:</p>\n\n<pre><code>&lt;Resource name=\"jdbc/TestDB\" \n          auth=\"Container\" \n          type=\"javax.sql.DataSource\" \n          factory=\"org.apache.tomcat.jdbc.pool.DataSourceFactory\"\n          testWhileIdle=\"true\"\n          testOnBorrow=\"true\"\n          testOnReturn=\"false\"\n          validationQuery=\"SELECT 1\"\n          validationInterval=\"30000\"\n          timeBetweenEvictionRunsMillis=\"30000\"\n          maxActive=\"100\" \n          minIdle=\"10\" \n          maxWait=\"10000\" \n          initialSize=\"10\"\n          removeAbandonedTimeout=\"60\"\n          removeAbandoned=\"true\"\n          logAbandoned=\"true\"\n          minEvictableIdleTimeMillis=\"30000\" \n          jmxEnabled=\"true\"\n          jdbcInterceptors=\"org.apache.tomcat.jdbc.pool.interceptor.ConnectionState;org.apache.tomcat.jdbc.pool.interceptor.StatementFinalizer\"\n          username=\"root\" \n          password=\"password\" \n          driverClassName=\"com.mysql.jdbc.Driver\"\n          url=\"jdbc:mysql://localhost:3306/mysql\"/&gt;\n</code></pre></li>\n<li><p>Add the JDBC driver JAR into the Tomcat lib directory.</p></li>\n<li><p>Add in your <code>context.xml</code>:</p>\n\n<pre><code>&lt;ResourceLink global=\"jdbc/TestDB\" name=\"jdbc/TestDB\" \n              type=\"javax.sql.DataSource\"/&gt;\n</code></pre></li>\n</ol>\n\n<p>See more in <a href=\"http://people.apache.org/~fhanik/jdbc-pool/jdbc-pool.html\" rel=\"nofollow\"><em>The Tomcat JDBC Connection Pool</em></a>.</p>\n"}],"owner":{"account_id":490670,"reputation":55804,"user_id":892029,"accept_rate":84,"display_name":"IAmYourFaja"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":438,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1681066164,"creation_date":1373599276,"question_id":17606988,"body_markdown":"If I deploy a web app to Tomcat, and have code like this:\r\n\r\n    Context ctx = new InitialContext();\r\n    DataSource ds = (DataSource)ctx.lookup(&quot;jdbc/myDB&quot;);\r\n\r\nHow can I specify for this `DataSource` to be a `PoolingDataSource`? How do I configure the pool (`GenericObjectPool`) to inject the `PoolingDataSource` with?\r\n\r\nOr, is this the default behavior of Tomcat&#39;s JNDI implementation? \r\n","title":"How to get PoolingDataSource from Tomcat&#39;s JNDI","body":"<p>If I deploy a web app to Tomcat, and have code like this:</p>\n<pre><code>Context ctx = new InitialContext();\nDataSource ds = (DataSource)ctx.lookup(&quot;jdbc/myDB&quot;);\n</code></pre>\n<p>How can I specify for this <code>DataSource</code> to be a <code>PoolingDataSource</code>? How do I configure the pool (<code>GenericObjectPool</code>) to inject the <code>PoolingDataSource</code> with?</p>\n<p>Or, is this the default behavior of Tomcat's JNDI implementation?</p>\n"},{"tags":["java","debugging","intellij-idea","remote-debugging"],"answers":[{"tags":[],"owner":{"account_id":18124764,"reputation":1,"user_id":13180378,"display_name":"Simon Morgan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663221864,"creation_date":1663221864,"answer_id":73726291,"question_id":64634675,"body_markdown":"I had the exact same problem and I know this is old but in case anyone lands here after searching for this, here&#39;s what worked for me; you need to set the working directory in your run configuration to the target/classes directory of your project. e.,g, if your project is at `/Users/name/project` and your source is in  `/Users/name/project/src/main/java/` set the working directory to `/Users/name/project/target/classes/` \r\n\r\nI wasted almost an entire day searching for an answer for this problem, turns out this error is caused by the VM not finding the compiled class file of the debuggee when run via the IDE because it sets the wrong working directory.","title":"Debuggee node sends VMDeathEvent right after VMStartEvent | Java Debugging Interface","body":"<p>I had the exact same problem and I know this is old but in case anyone lands here after searching for this, here's what worked for me; you need to set the working directory in your run configuration to the target/classes directory of your project. e.,g, if your project is at <code>/Users/name/project</code> and your source is in  <code>/Users/name/project/src/main/java/</code> set the working directory to <code>/Users/name/project/target/classes/</code></p>\n<p>I wasted almost an entire day searching for an answer for this problem, turns out this error is caused by the VM not finding the compiled class file of the debuggee when run via the IDE because it sets the wrong working directory.</p>\n"},{"tags":[],"owner":{"account_id":23430651,"reputation":1,"user_id":17489559,"display_name":"ayti"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681065855,"creation_date":1680561396,"answer_id":75924222,"question_id":64634675,"body_markdown":"I found the solution by changing the working directory as [this answer](https://stackoverflow.com/a/73726291) mentioned. The only difference is that I set the working directory as `build/classes/java/main` instead of `build/classes`.","title":"Debuggee node sends VMDeathEvent right after VMStartEvent | Java Debugging Interface","body":"<p>I found the solution by changing the working directory as <a href=\"https://stackoverflow.com/a/73726291\">this answer</a> mentioned. The only difference is that I set the working directory as <code>build/classes/java/main</code> instead of <code>build/classes</code>.</p>\n"}],"owner":{"account_id":7706619,"reputation":1384,"user_id":5837376,"display_name":"Buddhika Chathuranga"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1681065855,"creation_date":1604250783,"question_id":64634675,"body_markdown":"I am developing a simple debugger using Java and Java Debugging Interface. I have two classes `Debugger` and `Debuggee`. Debugger class consists of logics for debugging. Debuggee class is the class that is being debugged. \r\n\r\n[GitHub link to the Project][1]\r\n\r\nWhen I run the application in the terminal it&#39;s working perfectly. In the `Debugger` VM it expects a few types of events.\r\n\r\n1.  VMStartEvent\r\n2.  ClassPrepareEvent\r\n3.  BreakpointEvent\r\n4.  VMDeathEvent\r\n5.  VMDisconnectEvent\r\n\r\nWhen running the application in the terminal it&#39;s working perfectly. The debuggee node sends ClassPrepareEvent and BreakPointEvents. But when run the application in IntelliJ it does not send ClassPreparationEvent and BreakPointEvent.\r\n\r\nIt sends VMDeathEvent right after VMStartEvent and then VMDisconnectEvent. \r\n\r\nWhy does this behavior happen? Is there any configuration that I should set in IntelliJ?\r\n\r\n\r\n  [1]: https://github.com/buddhikac96/remotedebugger","title":"Debuggee node sends VMDeathEvent right after VMStartEvent | Java Debugging Interface","body":"<p>I am developing a simple debugger using Java and Java Debugging Interface. I have two classes <code>Debugger</code> and <code>Debuggee</code>. Debugger class consists of logics for debugging. Debuggee class is the class that is being debugged.</p>\n<p><a href=\"https://github.com/buddhikac96/remotedebugger\" rel=\"nofollow noreferrer\">GitHub link to the Project</a></p>\n<p>When I run the application in the terminal it's working perfectly. In the <code>Debugger</code> VM it expects a few types of events.</p>\n<ol>\n<li>VMStartEvent</li>\n<li>ClassPrepareEvent</li>\n<li>BreakpointEvent</li>\n<li>VMDeathEvent</li>\n<li>VMDisconnectEvent</li>\n</ol>\n<p>When running the application in the terminal it's working perfectly. The debuggee node sends ClassPrepareEvent and BreakPointEvents. But when run the application in IntelliJ it does not send ClassPreparationEvent and BreakPointEvent.</p>\n<p>It sends VMDeathEvent right after VMStartEvent and then VMDisconnectEvent.</p>\n<p>Why does this behavior happen? Is there any configuration that I should set in IntelliJ?</p>\n"},{"tags":["java","maven","java-7","java-6","maven-toolchains-plugin"],"comments":[{"owner":{"account_id":1883916,"reputation":4243,"user_id":1703524,"accept_rate":68,"display_name":"andPat"},"score":0,"creation_date":1383039781,"post_id":19654557,"comment_id":29184837,"body_markdown":"I cannot export JAVA_HOME with java 1.7 because I cannot touch configuraton of my machine, the default version of Java must be 1.6.","body":"I cannot export JAVA_HOME with java 1.7 because I cannot touch configuraton of my machine, the default version of Java must be 1.6."},{"owner":{"account_id":1650559,"reputation":2397,"user_id":1521258,"accept_rate":79,"display_name":"Zyga"},"score":0,"creation_date":1383040043,"post_id":19654557,"comment_id":29185021,"body_markdown":"Maven uses JAVA_HOME so dont think what you want to do is possible without changing JAVA_HOME value.","body":"Maven uses JAVA_HOME so dont think what you want to do is possible without changing JAVA_HOME value."},{"owner":{"account_id":3088832,"reputation":3115,"user_id":2615437,"accept_rate":50,"display_name":"xwoker"},"score":1,"creation_date":1383040329,"post_id":19654557,"comment_id":29185226,"body_markdown":"Are you using an IDE or the command line? Are you on a *nix or windows?","body":"Are you using an IDE or the command line? Are you on a *nix or windows?"},{"owner":{"account_id":1713214,"reputation":13643,"user_id":1570834,"display_name":"DB5"},"score":1,"creation_date":1383040595,"post_id":19654557,"comment_id":29185410,"body_markdown":"Does this answer cover what you want?\nhttp://stackoverflow.com/a/4724062/1570834","body":"Does this answer cover what you want? <a href=\"http://stackoverflow.com/a/4724062/1570834\">stackoverflow.com/a/4724062/1570834</a>"},{"owner":{"account_id":1883916,"reputation":4243,"user_id":1703524,"accept_rate":68,"display_name":"andPat"},"score":0,"creation_date":1383043120,"post_id":19654557,"comment_id":29186956,"body_markdown":"Yes is useful but I cannot make chnges to pom of project, nevertheless the stuff is the same and answer is correct","body":"Yes is useful but I cannot make chnges to pom of project, nevertheless the stuff is the same and answer is correct"}],"answers":[{"tags":[],"owner":{"account_id":2829929,"reputation":5163,"user_id":2431702,"display_name":"DanielBarbarian"},"down_vote_count":2,"up_vote_count":248,"is_accepted":true,"score":246,"last_activity_date":1526028300,"creation_date":1383040071,"answer_id":19654699,"question_id":19654557,"body_markdown":"Maven uses the `JAVA_HOME` parameter to find which Java version it is supposed to run. I see from your comment that you can&#39;t change that in the configuration. \r\n\r\n- You can set the `JAVA_HOME` parameter just before you start maven (and change it back afterwards if need be). \r\n- You could also go into your `mvn`(non-windows)/`mvn.bat`/`mvn.cmd`(windows) and set your java version explicitly there.\r\n","title":"How to set specific Java version to Maven?","body":"<p>Maven uses the <code>JAVA_HOME</code> parameter to find which Java version it is supposed to run. I see from your comment that you can't change that in the configuration. </p>\n\n<ul>\n<li>You can set the <code>JAVA_HOME</code> parameter just before you start maven (and change it back afterwards if need be). </li>\n<li>You could also go into your <code>mvn</code>(non-windows)/<code>mvn.bat</code>/<code>mvn.cmd</code>(windows) and set your java version explicitly there.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1395602,"reputation":2264,"user_id":1325425,"accept_rate":60,"display_name":"Jonathan"},"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1399517394,"creation_date":1399517394,"answer_id":23531900,"question_id":19654557,"body_markdown":"Adding my two cents and explicitly providing the solution.\r\n\r\nI have two JDKs installed on my Windows Machine - `JDK 1.5` and `JDK 1.6`.\r\n\r\nMy default (and set to windows system environment variable) `JAVA_HOME` is set to `JDK 1.5`.\r\n\r\nHowever, I have a maven project that I need to build (i.e., [JBehave Tutorial&#39;s Etsy.com][1]) using `JDK 1.6`.\r\n\r\nMy solution in this scenario (which worked!), is as suggested by `@DanielBarbarian` to set it in `mvn.bat`. \r\n\r\nFor some not familiar with window&#39;s batch file, I just basically added the `set JAVA_HOME=&lt;path_to_other_jdk&gt;` line after `@REM ==== START VALIDATION ====` in `mvn.bat` (i.e., `%MAVEN_HOME%\\bin\\mvn.bat`):\r\n\r\n    @REM ==== START VALIDATION ====\r\n    set JAVA_HOME=C:\\Program Files\\Java\\jdk1.6.0_45\\jre\r\n    if not &quot;%JAVA_HOME%&quot; == &quot;&quot; goto OkJHome\r\n\r\n  [1]: https://github.com/jbehave/jbehave-tutorial","title":"How to set specific Java version to Maven?","body":"<p>Adding my two cents and explicitly providing the solution.</p>\n\n<p>I have two JDKs installed on my Windows Machine - <code>JDK 1.5</code> and <code>JDK 1.6</code>.</p>\n\n<p>My default (and set to windows system environment variable) <code>JAVA_HOME</code> is set to <code>JDK 1.5</code>.</p>\n\n<p>However, I have a maven project that I need to build (i.e., <a href=\"https://github.com/jbehave/jbehave-tutorial\">JBehave Tutorial's Etsy.com</a>) using <code>JDK 1.6</code>.</p>\n\n<p>My solution in this scenario (which worked!), is as suggested by <code>@DanielBarbarian</code> to set it in <code>mvn.bat</code>. </p>\n\n<p>For some not familiar with window's batch file, I just basically added the <code>set JAVA_HOME=&lt;path_to_other_jdk&gt;</code> line after <code>@REM ==== START VALIDATION ====</code> in <code>mvn.bat</code> (i.e., <code>%MAVEN_HOME%\\bin\\mvn.bat</code>):</p>\n\n<pre><code>@REM ==== START VALIDATION ====\nset JAVA_HOME=C:\\Program Files\\Java\\jdk1.6.0_45\\jre\nif not \"%JAVA_HOME%\" == \"\" goto OkJHome\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1364460,"reputation":3729,"user_id":1301197,"accept_rate":22,"display_name":"Ronan Quillevere"},"down_vote_count":0,"up_vote_count":72,"is_accepted":false,"score":72,"last_activity_date":1438244340,"creation_date":1438243882,"answer_id":31718429,"question_id":19654557,"body_markdown":"**On windows** \r\n\r\nIf you do not want to change your `JAVA_HOME` variable inside the system variables.\r\n\r\nEdit your `mvn.bat` file and add a line like this\r\n\r\n    set JAVA_HOME=C:\\Program Files\\Java\\jdk1.7.0_45\\jre\r\n\r\nThis can be done after `@REM ==== START VALIDATION ====` like mentionned by @Jonathan\r\n\r\n**On Mac (&amp; Linux ?)**\r\n\r\nIf you do not want to change your `JAVA_HOME` variable inside your `~/.bashrc` or `~/.bash_profile`\r\n\r\nyou can create a `~/.mavenrc` file and redefine your `JAVA_HOME` using the [java_home tool][1]\r\n\r\n    export JAVA_HOME=`/usr/libexec/java_home -v 1.7.0_45`\r\n\r\n\r\n**Sanity Check**\r\n\r\nYou can verify that everything is working fine by executing the following commands. The jdk version should be different.\r\n\r\n`mvn -version`\r\n\r\nthen\r\n\r\n`java -version`\r\n\r\n\r\n\r\n  [1]: https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/java_home.1.html","title":"How to set specific Java version to Maven?","body":"<p><strong>On windows</strong> </p>\n\n<p>If you do not want to change your <code>JAVA_HOME</code> variable inside the system variables.</p>\n\n<p>Edit your <code>mvn.bat</code> file and add a line like this</p>\n\n<pre><code>set JAVA_HOME=C:\\Program Files\\Java\\jdk1.7.0_45\\jre\n</code></pre>\n\n<p>This can be done after <code>@REM ==== START VALIDATION ====</code> like mentionned by @Jonathan</p>\n\n<p><strong>On Mac (&amp; Linux ?)</strong></p>\n\n<p>If you do not want to change your <code>JAVA_HOME</code> variable inside your <code>~/.bashrc</code> or <code>~/.bash_profile</code></p>\n\n<p>you can create a <code>~/.mavenrc</code> file and redefine your <code>JAVA_HOME</code> using the <a href=\"https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/java_home.1.html\" rel=\"noreferrer\">java_home tool</a></p>\n\n<pre><code>export JAVA_HOME=`/usr/libexec/java_home -v 1.7.0_45`\n</code></pre>\n\n<p><strong>Sanity Check</strong></p>\n\n<p>You can verify that everything is working fine by executing the following commands. The jdk version should be different.</p>\n\n<p><code>mvn -version</code></p>\n\n<p>then</p>\n\n<p><code>java -version</code></p>\n"},{"tags":[],"owner":{"account_id":1026421,"reputation":6737,"user_id":1035634,"display_name":"Ondrej Burkert"},"down_vote_count":0,"up_vote_count":89,"is_accepted":false,"score":89,"last_activity_date":1641060053,"creation_date":1455730034,"answer_id":35463606,"question_id":19654557,"body_markdown":"I just recently, after seven long years with Maven, learned about toolchains.xml. Maven has it even documented and supports it from 2.0.9 - [toolchains documentation][1] \r\n\r\nSo I added a toolchains.xml file to my ~/.m2/ folder with following content:\r\n\r\n&lt;!-- begin snippet: xml hide: false --&gt;\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;toolchains xmlns=&quot;http://maven.apache.org/TOOLCHAINS/1.1.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n     xsi:schemaLocation=&quot;http://maven.apache.org/TOOLCHAINS/1.1.0 http://maven.apache.org/xsd/toolchains-1.1.0.xsd&quot;&gt;\r\n     &lt;!-- JDK toolchains --&gt;\r\n     &lt;toolchain&gt;\r\n       &lt;type&gt;jdk&lt;/type&gt;\r\n       &lt;provides&gt;\r\n         &lt;version&gt;1.8&lt;/version&gt;\r\n         &lt;vendor&gt;sun&lt;/vendor&gt;\r\n       &lt;/provides&gt;\r\n       &lt;configuration&gt;\r\n         &lt;jdkHome&gt;/opt/java8&lt;/jdkHome&gt;\r\n       &lt;/configuration&gt;\r\n     &lt;/toolchain&gt;\r\n     &lt;toolchain&gt;\r\n       &lt;type&gt;jdk&lt;/type&gt;\r\n       &lt;provides&gt;\r\n         &lt;version&gt;1.7&lt;/version&gt;\r\n         &lt;vendor&gt;sun&lt;/vendor&gt;\r\n       &lt;/provides&gt;\r\n       &lt;configuration&gt;\r\n         &lt;jdkHome&gt;/opt/java7&lt;/jdkHome&gt;\r\n       &lt;/configuration&gt;\r\n     &lt;/toolchain&gt;\r\n    &lt;/toolchains&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nIt allows you to define what different JDKs Maven can use to build the project irrespective of the JDK Maven runs with. Sort of like when you define JDK on project level in IDE.\r\n\r\n\r\n  [1]: https://maven.apache.org/guides/mini/guide-using-toolchains.html","title":"How to set specific Java version to Maven?","body":"<p>I just recently, after seven long years with Maven, learned about toolchains.xml. Maven has it even documented and supports it from 2.0.9 - <a href=\"https://maven.apache.org/guides/mini/guide-using-toolchains.html\" rel=\"noreferrer\">toolchains documentation</a></p>\n<p>So I added a toolchains.xml file to my ~/.m2/ folder with following content:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;toolchains xmlns=&quot;http://maven.apache.org/TOOLCHAINS/1.1.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n xsi:schemaLocation=&quot;http://maven.apache.org/TOOLCHAINS/1.1.0 http://maven.apache.org/xsd/toolchains-1.1.0.xsd&quot;&gt;\n &lt;!-- JDK toolchains --&gt;\n &lt;toolchain&gt;\n   &lt;type&gt;jdk&lt;/type&gt;\n   &lt;provides&gt;\n     &lt;version&gt;1.8&lt;/version&gt;\n     &lt;vendor&gt;sun&lt;/vendor&gt;\n   &lt;/provides&gt;\n   &lt;configuration&gt;\n     &lt;jdkHome&gt;/opt/java8&lt;/jdkHome&gt;\n   &lt;/configuration&gt;\n &lt;/toolchain&gt;\n &lt;toolchain&gt;\n   &lt;type&gt;jdk&lt;/type&gt;\n   &lt;provides&gt;\n     &lt;version&gt;1.7&lt;/version&gt;\n     &lt;vendor&gt;sun&lt;/vendor&gt;\n   &lt;/provides&gt;\n   &lt;configuration&gt;\n     &lt;jdkHome&gt;/opt/java7&lt;/jdkHome&gt;\n   &lt;/configuration&gt;\n &lt;/toolchain&gt;\n&lt;/toolchains&gt;\n</code></pre>\n<p>It allows you to define what different JDKs Maven can use to build the project irrespective of the JDK Maven runs with. Sort of like when you define JDK on project level in IDE.</p>\n"},{"tags":[],"owner":{"account_id":2387357,"reputation":1147,"user_id":2088039,"display_name":"Tonino"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1486027522,"creation_date":1486027522,"answer_id":41998416,"question_id":19654557,"body_markdown":"To avoid any impact to your project and to your Environment Variables, you can configure the Maven Compiler Plugin just to the project&#39;s POM, specifying the Source and Target java version \r\n\r\n      &lt;plugins&gt;\r\n        &lt;plugin&gt;\r\n    \t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;3.5.1&lt;/version&gt;\r\n    \t\t&lt;configuration&gt;\r\n    \t\t\t&lt;source&gt;1.7&lt;/source&gt;\r\n    \t\t\t&lt;target&gt;1.7&lt;/target&gt;\r\n    \t\t&lt;/configuration&gt;\r\n    \t&lt;/plugin&gt;\r\n        ...\r\n      &lt;/plugins&gt;","title":"How to set specific Java version to Maven?","body":"<p>To avoid any impact to your project and to your Environment Variables, you can configure the Maven Compiler Plugin just to the project's POM, specifying the Source and Target java version </p>\n\n<pre><code>  &lt;plugins&gt;\n    &lt;plugin&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.5.1&lt;/version&gt;\n        &lt;configuration&gt;\n            &lt;source&gt;1.7&lt;/source&gt;\n            &lt;target&gt;1.7&lt;/target&gt;\n        &lt;/configuration&gt;\n    &lt;/plugin&gt;\n    ...\n  &lt;/plugins&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4458846,"reputation":362,"user_id":3628314,"display_name":"Pankaj"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1488543785,"creation_date":1488543785,"answer_id":42578812,"question_id":19654557,"body_markdown":"One simple solution to the problem -\r\n\r\n&gt; JAVA_HOME=/usr/lib/jvm/java-6-sun/ mvn clean install\r\n\r\nOn Mac, it would look something like - \r\n\r\n&gt;JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.7.0_21.jdk/Contents/Home/  mvn clean install\r\n\r\nPS: One special case that i found is the above given command does not work on &#39;fish&#39; shell. I also had bash shell available and it worked fine there. just use command &#39;bash&#39; to switch to bash shell.","title":"How to set specific Java version to Maven?","body":"<p>One simple solution to the problem -</p>\n\n<blockquote>\n  <p>JAVA_HOME=/usr/lib/jvm/java-6-sun/ mvn clean install</p>\n</blockquote>\n\n<p>On Mac, it would look something like - </p>\n\n<blockquote>\n  <p>JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.7.0_21.jdk/Contents/Home/  mvn clean install</p>\n</blockquote>\n\n<p>PS: One special case that i found is the above given command does not work on 'fish' shell. I also had bash shell available and it worked fine there. just use command 'bash' to switch to bash shell.</p>\n"},{"tags":[],"owner":{"account_id":39793,"reputation":2684,"user_id":114944,"display_name":"Edward Ross"},"down_vote_count":2,"up_vote_count":101,"is_accepted":false,"score":99,"last_activity_date":1490888298,"creation_date":1490888298,"answer_id":43122361,"question_id":19654557,"body_markdown":"In the POM, you can set the compiler properties, e.g. for 1.8:\r\n\r\n    &lt;project&gt;\r\n    ...\r\n     &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n      &lt;/properties&gt;\r\n    ...\r\n    &lt;/project&gt;","title":"How to set specific Java version to Maven?","body":"<p>In the POM, you can set the compiler properties, e.g. for 1.8:</p>\n\n<pre><code>&lt;project&gt;\n...\n &lt;properties&gt;\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n  &lt;/properties&gt;\n...\n&lt;/project&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2772116,"reputation":2797,"user_id":2386514,"accept_rate":100,"display_name":"Jonathan E. Landrum"},"down_vote_count":1,"up_vote_count":129,"is_accepted":false,"score":128,"last_activity_date":1634045283,"creation_date":1492704562,"answer_id":43524685,"question_id":19654557,"body_markdown":"## Edit:\r\n\r\nA better solution is presented by the answer from [Ondrej][1], which obviates remembering aliases.\r\n\r\n---\r\n\r\n## Original Answer:\r\n\r\n**Adding a solution for people with multiple Java versions installed**\r\n\r\nWe have a large codebase, most of which is in Java. The majority of what I work on is written in either Java 1.7 or 1.8. Since `JAVA_HOME` is static, I created aliases in my `.bashrc` for running Maven with different values:\r\n\r\n    alias mvn5=&quot;JAVA_HOME=/usr/local/java5 &amp;&amp; mvn&quot;\r\n    alias mvn6=&quot;JAVA_HOME=/usr/local/java6 &amp;&amp; mvn&quot;\r\n    alias mvn7=&quot;JAVA_HOME=/usr/local/java7 &amp;&amp; mvn&quot;\r\n    alias mvn8=&quot;JAVA_HOME=/usr/local/java8 &amp;&amp; mvn&quot;\r\n\r\nThis lets me run Maven from the command line on my development machine regardless of the JDK version used on the project.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/35463606/2386514","title":"How to set specific Java version to Maven?","body":"<h2>Edit:</h2>\n<p>A better solution is presented by the answer from <a href=\"https://stackoverflow.com/a/35463606/2386514\">Ondrej</a>, which obviates remembering aliases.</p>\n<hr />\n<h2>Original Answer:</h2>\n<p><strong>Adding a solution for people with multiple Java versions installed</strong></p>\n<p>We have a large codebase, most of which is in Java. The majority of what I work on is written in either Java 1.7 or 1.8. Since <code>JAVA_HOME</code> is static, I created aliases in my <code>.bashrc</code> for running Maven with different values:</p>\n<pre><code>alias mvn5=&quot;JAVA_HOME=/usr/local/java5 &amp;&amp; mvn&quot;\nalias mvn6=&quot;JAVA_HOME=/usr/local/java6 &amp;&amp; mvn&quot;\nalias mvn7=&quot;JAVA_HOME=/usr/local/java7 &amp;&amp; mvn&quot;\nalias mvn8=&quot;JAVA_HOME=/usr/local/java8 &amp;&amp; mvn&quot;\n</code></pre>\n<p>This lets me run Maven from the command line on my development machine regardless of the JDK version used on the project.</p>\n"},{"tags":[],"owner":{"account_id":1931337,"reputation":2684,"user_id":1740662,"display_name":"Bernhard Thalmayr"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1542808086,"creation_date":1542808086,"answer_id":53413525,"question_id":19654557,"body_markdown":"On Linux/Unix, the JAVA_HOME within &#39;mvn&#39; shell script is overridden by the settings in\r\n\r\n    $HOME/.mavenrc\r\n\r\nplease https://stackoverflow.com/questions/37905648/where-to-add-java-home-and-maven-path-variables-in-linux","title":"How to set specific Java version to Maven?","body":"<p>On Linux/Unix, the JAVA_HOME within 'mvn' shell script is overridden by the settings in</p>\n\n<pre><code>$HOME/.mavenrc\n</code></pre>\n\n<p>please <a href=\"https://stackoverflow.com/questions/37905648/where-to-add-java-home-and-maven-path-variables-in-linux\">Where to add JAVA_HOME and MAVEN path variables in linux</a></p>\n"},{"tags":[],"owner":{"account_id":3268713,"reputation":1019,"user_id":2752595,"display_name":"Alberto Perez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1544697239,"creation_date":1544697239,"answer_id":53759859,"question_id":19654557,"body_markdown":"Also you can have **two** versions of maven installed, and edit **one** of them, editing here:\r\n\r\n&gt;  mvn(non-windows)/mvn.bat/mvn.cmd(windows) \r\n\r\nreplacing your %java_home% appearances to your java desired path. Then just execute maven from that modified path\r\n","title":"How to set specific Java version to Maven?","body":"<p>Also you can have <strong>two</strong> versions of maven installed, and edit <strong>one</strong> of them, editing here:</p>\n\n<blockquote>\n  <p>mvn(non-windows)/mvn.bat/mvn.cmd(windows) </p>\n</blockquote>\n\n<p>replacing your %java_home% appearances to your java desired path. Then just execute maven from that modified path</p>\n"},{"tags":[],"owner":{"account_id":1270164,"reputation":1062,"user_id":1226669,"display_name":"Martin Vich"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1548944421,"creation_date":1548944421,"answer_id":54462589,"question_id":19654557,"body_markdown":"I did not have success on mac with just setting `JAVA_HOME` in the console but I was successful with this approach\r\n\r\n - Create .mavenrc file at your at your home directory  (so the file will path will be `~/.mavenrc`\r\n - Into that file paste `export JAVA_HOME=$(/usr/libexec/java_home -v 1.7)`","title":"How to set specific Java version to Maven?","body":"<p>I did not have success on mac with just setting <code>JAVA_HOME</code> in the console but I was successful with this approach</p>\n\n<ul>\n<li>Create .mavenrc file at your at your home directory  (so the file will path will be <code>~/.mavenrc</code></li>\n<li>Into that file paste <code>export JAVA_HOME=$(/usr/libexec/java_home -v 1.7)</code></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":6615217,"reputation":6120,"user_id":5108737,"display_name":"Ruslan"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1553983055,"creation_date":1553983055,"answer_id":55435998,"question_id":19654557,"body_markdown":"You could configure [compiling sources using different JDK](https://maven.apache.org/plugins/maven-compiler-plugin/examples/compile-using-different-jdk.html) with `maven-compiler-plugin`. \r\n\r\nJust specify path to `javac` in `&lt;executable&gt;` tag. E.g for java11 it looks like:\r\n\r\n    &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.8.0&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n            &lt;source&gt;11&lt;/source&gt;\r\n            &lt;target&gt;11&lt;/target&gt;\r\n            &lt;fork&gt;true&lt;/fork&gt;\r\n            &lt;executable&gt;C:\\Program Files\\Java\\jdk-11.0.1\\bin\\javac&lt;/executable&gt; &lt;!--PATH TO JAVAC --&gt;\r\n        &lt;/configuration&gt;\r\n    &lt;/plugin&gt;","title":"How to set specific Java version to Maven?","body":"<p>You could configure <a href=\"https://maven.apache.org/plugins/maven-compiler-plugin/examples/compile-using-different-jdk.html\" rel=\"noreferrer\">compiling sources using different JDK</a> with <code>maven-compiler-plugin</code>. </p>\n\n<p>Just specify path to <code>javac</code> in <code>&lt;executable&gt;</code> tag. E.g for java11 it looks like:</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.8.0&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;source&gt;11&lt;/source&gt;\n        &lt;target&gt;11&lt;/target&gt;\n        &lt;fork&gt;true&lt;/fork&gt;\n        &lt;executable&gt;C:\\Program Files\\Java\\jdk-11.0.1\\bin\\javac&lt;/executable&gt; &lt;!--PATH TO JAVAC --&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1608089,"reputation":773,"user_id":1487721,"display_name":"Ranuka"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1560257445,"creation_date":1559875555,"answer_id":56487374,"question_id":19654557,"body_markdown":"You can set Maven to use any java version following the instructions below.\r\n\r\nInstall jenv in your machine [link][1]\r\n\r\n  [1]: https://www.jenv.be/\r\n\r\nCheck the available java versions installed in your machine by issuing the following command in command line.\r\n\r\n&gt; jenv versions\r\n\r\nYou can specify global Java version using the following command.\r\n\r\n&gt; jenv global oracle64-1.6.0.39\r\n\r\nYou can specify local Java version for any directory(Project) using the following command in the directory in command line.\r\n\r\n&gt; jenv local oracle64-1.7.0.11\r\n\r\nadd the correct java version in your pom.xml\r\n\r\nif you are running maven in command line install **jenv maven plugin** using below command\r\n&gt; jenv enable-plugin maven\r\n\r\nNow you can configure any java version in your machine to any project with out any trouble.\r\n\r\n","title":"How to set specific Java version to Maven?","body":"<p>You can set Maven to use any java version following the instructions below.</p>\n\n<p>Install jenv in your machine <a href=\"https://www.jenv.be/\" rel=\"noreferrer\">link</a></p>\n\n<p>Check the available java versions installed in your machine by issuing the following command in command line.</p>\n\n<blockquote>\n  <p>jenv versions</p>\n</blockquote>\n\n<p>You can specify global Java version using the following command.</p>\n\n<blockquote>\n  <p>jenv global oracle64-1.6.0.39</p>\n</blockquote>\n\n<p>You can specify local Java version for any directory(Project) using the following command in the directory in command line.</p>\n\n<blockquote>\n  <p>jenv local oracle64-1.7.0.11</p>\n</blockquote>\n\n<p>add the correct java version in your pom.xml</p>\n\n<p>if you are running maven in command line install <strong>jenv maven plugin</strong> using below command</p>\n\n<blockquote>\n  <p>jenv enable-plugin maven</p>\n</blockquote>\n\n<p>Now you can configure any java version in your machine to any project with out any trouble.</p>\n"},{"tags":[],"owner":{"account_id":13728241,"reputation":116,"user_id":9906396,"display_name":"Talis Guo"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1562226109,"creation_date":1562223390,"answer_id":56882212,"question_id":19654557,"body_markdown":"On windows, I just add multiple batch files for different JDK versions to the Maven bin folder like this: \r\n\r\nmvn11.cmd\r\n```cmd\r\n@echo off\r\nsetlocal\r\nset &quot;JAVA_HOME=path\\to\\jdk11&quot;\r\nset &quot;path=%JAVA_HOME%;%path%&quot;\r\nmvn %*\r\n```\r\nthen you can use ```mvn11``` to run Maven in the specified JDK.","title":"How to set specific Java version to Maven?","body":"<p>On windows, I just add multiple batch files for different JDK versions to the Maven bin folder like this: </p>\n\n<p>mvn11.cmd</p>\n\n<pre><code>@echo off\nsetlocal\nset \"JAVA_HOME=path\\to\\jdk11\"\nset \"path=%JAVA_HOME%;%path%\"\nmvn %*\n</code></pre>\n\n<p>then you can use <code>mvn11</code> to run Maven in the specified JDK.</p>\n"},{"tags":[],"owner":{"account_id":2885397,"reputation":155,"user_id":2475448,"display_name":"user2475448"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1566317864,"creation_date":1566317864,"answer_id":57577779,"question_id":19654557,"body_markdown":"On Macs, (assuming you have the right version installed) \r\n\r\n```JAVA_HOME=`/usr/libexec/java_home -v 1.8` mvn clean install -DskipTests```","title":"How to set specific Java version to Maven?","body":"<p>On Macs, (assuming you have the right version installed) </p>\n\n<p><code>JAVA_HOME=`/usr/libexec/java_home -v 1.8` mvn clean install -DskipTests</code></p>\n"},{"tags":[],"owner":{"account_id":3731659,"reputation":3183,"user_id":3103802,"accept_rate":73,"display_name":"Saveendra Ekanayake"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1571734117,"creation_date":1571734117,"answer_id":58500407,"question_id":19654557,"body_markdown":"Without changing Environment Variables, You can manage java version based on the project level by using Maven Compiler Plugin.\r\n\r\n**Method 1**\r\n\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;1.7&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;1.7&lt;/maven.compiler.target&gt;\r\n    &lt;/properties&gt;\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n**Method 2**\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;1.7&lt;/source&gt;\r\n                    &lt;target&gt;1.7&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;","title":"How to set specific Java version to Maven?","body":"<p>Without changing Environment Variables, You can manage java version based on the project level by using Maven Compiler Plugin.</p>\n\n<p><strong>Method 1</strong></p>\n\n<pre><code>&lt;properties&gt;\n    &lt;maven.compiler.source&gt;1.7&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;1.7&lt;/maven.compiler.target&gt;\n&lt;/properties&gt;\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p><strong>Method 2</strong></p>\n\n<pre><code>&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;1.7&lt;/source&gt;\n                &lt;target&gt;1.7&lt;/target&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10418328,"reputation":828,"user_id":7681696,"display_name":"GtdDev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1602201696,"creation_date":1602201696,"answer_id":64272197,"question_id":19654557,"body_markdown":"I&#39;ve used the base idea from @Jonathan. \r\nI&#39;ve set the windows with: set JAVA_HOME=C:\\Program Files\\java\\AdoptOpenJDK-11.0.8+10\r\ncall mvn clean package -DskipTests","title":"How to set specific Java version to Maven?","body":"<p>I've used the base idea from @Jonathan.\nI've set the windows with: set JAVA_HOME=C:\\Program Files\\java\\AdoptOpenJDK-11.0.8+10\ncall mvn clean package -DskipTests</p>\n"},{"tags":[],"owner":{"account_id":20313790,"reputation":41,"user_id":15175895,"display_name":"new coder"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1626801066,"creation_date":1615260339,"answer_id":66540370,"question_id":19654557,"body_markdown":"Recently installed Java10 to see whats new and fun about it. Once I did this and tried running existing projects which use java8.\r\nTo my surprise, maven began using java10 as its default java version, even though my JAVA_HOME is set to use `java8  /usr/libexec/java_home -v 1.8`\r\n\r\nGiven, my installation was done using brew  Brew is simply a package manager for Mac OS, my M2_HOME was automatically set up. This is usually in `/usr/local/Cellar/maven/3.5.4`\r\n\r\nWith this new found knowledge, I run\r\n\r\n    nano /usr/local/Cellar/maven/3.5.4/bin/mvn\r\n\r\nThe content was\r\n\r\n    #!/bin/bash\r\n    JAVA_HOME=&quot;${JAVA_HOME:-$(/usr/libexec/java_home)}&quot; exec &quot;/usr/local/Cellar/maven/3.5.4/libexec/bin/mvn&quot; &quot;$@&quot;\r\n\r\nImportant bit being\r\n\r\n    &quot;${JAVA_HOME:-$(/usr/libexec/java_home)}&quot;\r\n\r\nTo resolve this, you will need to specify the java version you need maven to default to. So in my case, I needed java8.\r\n\r\nUpdate `/usr/local/Cellar/maven/3.5.4/bin/mvn` file as follows\r\n\r\n    #!/bin/bash\r\n    JAVA_HOME=&quot;${JAVA_HOME:-$(/usr/libexec/java_home -v 1.8)}&quot; exec &quot;/usr/local/Cellar/maven/3.5.4/libexec/bin/mvn&quot; &quot;$@&quot;\r\n\r\n","title":"How to set specific Java version to Maven?","body":"<p>Recently installed Java10 to see whats new and fun about it. Once I did this and tried running existing projects which use java8.\nTo my surprise, maven began using java10 as its default java version, even though my JAVA_HOME is set to use <code>java8  /usr/libexec/java_home -v 1.8</code></p>\n<p>Given, my installation was done using brew  Brew is simply a package manager for Mac OS, my M2_HOME was automatically set up. This is usually in <code>/usr/local/Cellar/maven/3.5.4</code></p>\n<p>With this new found knowledge, I run</p>\n<pre><code>nano /usr/local/Cellar/maven/3.5.4/bin/mvn\n</code></pre>\n<p>The content was</p>\n<pre><code>#!/bin/bash\nJAVA_HOME=&quot;${JAVA_HOME:-$(/usr/libexec/java_home)}&quot; exec &quot;/usr/local/Cellar/maven/3.5.4/libexec/bin/mvn&quot; &quot;$@&quot;\n</code></pre>\n<p>Important bit being</p>\n<pre><code>&quot;${JAVA_HOME:-$(/usr/libexec/java_home)}&quot;\n</code></pre>\n<p>To resolve this, you will need to specify the java version you need maven to default to. So in my case, I needed java8.</p>\n<p>Update <code>/usr/local/Cellar/maven/3.5.4/bin/mvn</code> file as follows</p>\n<pre><code>#!/bin/bash\nJAVA_HOME=&quot;${JAVA_HOME:-$(/usr/libexec/java_home -v 1.8)}&quot; exec &quot;/usr/local/Cellar/maven/3.5.4/libexec/bin/mvn&quot; &quot;$@&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1728290,"reputation":49,"user_id":1582473,"display_name":"Vijay Yadav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1618249973,"creation_date":1618249973,"answer_id":67063295,"question_id":19654557,"body_markdown":"I am using jenv and was facing the compilation error for &quot;javax.xml.bind.annotation&quot; as the mvn in terminal was using openjdk 13\r\n```\r\nMaven home: /usr/local/Cellar/maven/3.6.3_1/libexec\r\nJava version: 13.0.2, vendor: N/A, runtime: /usr/local/Cellar/openjdk/13.0.2+8_2/libexec/openjdk.jdk/Contents/Home\r\n\r\n```\r\n\r\nFor me, it worked after running &#39;jenv enable-plugin maven&#39; as suggested here\r\nhttps://stackoverflow.com/a/56487374/1582473\r\n","title":"How to set specific Java version to Maven?","body":"<p>I am using jenv and was facing the compilation error for &quot;javax.xml.bind.annotation&quot; as the mvn in terminal was using openjdk 13</p>\n<pre><code>Maven home: /usr/local/Cellar/maven/3.6.3_1/libexec\nJava version: 13.0.2, vendor: N/A, runtime: /usr/local/Cellar/openjdk/13.0.2+8_2/libexec/openjdk.jdk/Contents/Home\n\n</code></pre>\n<p>For me, it worked after running 'jenv enable-plugin maven' as suggested here\n<a href=\"https://stackoverflow.com/a/56487374/1582473\">https://stackoverflow.com/a/56487374/1582473</a></p>\n"},{"tags":[],"owner":{"account_id":16177754,"reputation":21,"user_id":11679986,"display_name":"JINSHUAI"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1623425554,"creation_date":1622085674,"answer_id":67715235,"question_id":19654557,"body_markdown":"1. on terminal `vi ~/.bash_profile`\r\n2. After that, paste the below path in the base profile file and save it by vim command `wq!`\r\n```\r\nexport JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home\r\nexport M2_HOME=/Users/mj/Tools/apache-maven-3.8.1\r\n```\r\n3. run `source ~/.bash_profile` to make it work forever\r\n\r\n4. after that, you can run `mvn -v` in your terminal to check\r\n```\r\nMaven home: /Users/mj/Tools/apache-maven-3.8.1\r\nJava version: 1.8.0_211, vendor: Oracle Corporation, \r\nruntime: /Users/mj/Tools/jdk1.8.0_211.jdk/Contents/Home/jre\r\nDefault locale: en_CN, platform encoding: UTF-8\r\nOS name: &quot;mac os x&quot;, version: &quot;10.16&quot;, arch: &quot;x86_64&quot;, family: &quot;mac&quot;\r\n```\r\n\r\nif you want to know why, read below\r\n\r\nJAVA_HOME is **used** by many Java-based applications to define the place of Java Runtime Environment (JRE) installation. \r\n**M2_HOME** is **used** by Maven, and again it tells the program where to find Maven installation. \r\n","title":"How to set specific Java version to Maven?","body":"<ol>\n<li>on terminal <code>vi ~/.bash_profile</code></li>\n<li>After that, paste the below path in the base profile file and save it by vim command <code>wq!</code></li>\n</ol>\n<pre><code>export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home\nexport M2_HOME=/Users/mj/Tools/apache-maven-3.8.1\n</code></pre>\n<ol start=\"3\">\n<li><p>run <code>source ~/.bash_profile</code> to make it work forever</p>\n</li>\n<li><p>after that, you can run <code>mvn -v</code> in your terminal to check</p>\n</li>\n</ol>\n<pre><code>Maven home: /Users/mj/Tools/apache-maven-3.8.1\nJava version: 1.8.0_211, vendor: Oracle Corporation, \nruntime: /Users/mj/Tools/jdk1.8.0_211.jdk/Contents/Home/jre\nDefault locale: en_CN, platform encoding: UTF-8\nOS name: &quot;mac os x&quot;, version: &quot;10.16&quot;, arch: &quot;x86_64&quot;, family: &quot;mac&quot;\n</code></pre>\n<p>if you want to know why, read below</p>\n<p>JAVA_HOME is <strong>used</strong> by many Java-based applications to define the place of Java Runtime Environment (JRE) installation.\n<strong>M2_HOME</strong> is <strong>used</strong> by Maven, and again it tells the program where to find Maven installation.</p>\n"},{"tags":[],"owner":{"account_id":3612269,"reputation":8554,"user_id":3013005,"accept_rate":100,"display_name":"Technotronic"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1633518063,"creation_date":1633516838,"answer_id":69464209,"question_id":19654557,"body_markdown":"I am using Mac and none of the answers above helped me. I found out that maven loads its own JAVA_HOME from the path specified in: `~/.mavenrc`\r\n\r\nI changed the content of the file to be: \r\n\r\n    JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home\r\n\r\nFor Linux it will look something like:\r\n\r\n    export JAVA_HOME=/usr/lib/jvm/java-8-oracle/jre","title":"How to set specific Java version to Maven?","body":"<p>I am using Mac and none of the answers above helped me. I found out that maven loads its own JAVA_HOME from the path specified in: <code>~/.mavenrc</code></p>\n<p>I changed the content of the file to be:</p>\n<pre><code>JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home\n</code></pre>\n<p>For Linux it will look something like:</p>\n<pre><code>export JAVA_HOME=/usr/lib/jvm/java-8-oracle/jre\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18643295,"reputation":91,"user_id":15523520,"display_name":"Mohamed Ali"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1641975452,"creation_date":1641672805,"answer_id":70636054,"question_id":19654557,"body_markdown":"You just need to add your JAVA version to mvn file before the call of JAVA_HOME \r\nfor example my JAVA Version in .bashrc file is Java-17 \r\nand i want to run maven with Java-11 :\r\n\r\nin file `/usr/share/maven/bin/mvn` :\r\nI add :\r\n\r\n    JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64\r\n\r\nbefore the call of `JAVA_HOME` in the script\r\n\r\nand then it works fine with Java-11 :) ","title":"How to set specific Java version to Maven?","body":"<p>You just need to add your JAVA version to mvn file before the call of JAVA_HOME\nfor example my JAVA Version in .bashrc file is Java-17\nand i want to run maven with Java-11 :</p>\n<p>in file <code>/usr/share/maven/bin/mvn</code> :\nI add :</p>\n<pre><code>JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64\n</code></pre>\n<p>before the call of <code>JAVA_HOME</code> in the script</p>\n<p>and then it works fine with Java-11 :)</p>\n"},{"tags":[],"owner":{"account_id":6612592,"reputation":103,"user_id":5107086,"accept_rate":80,"display_name":"Imran AK"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1642439616,"creation_date":1642439616,"answer_id":70745107,"question_id":19654557,"body_markdown":"    set JAVA_HOME=C:\\Program Files\\Java\\jdk1.7.0_45\\jre\r\n\r\nAdding the above line of code as the first statement in `$MAVEN_HOME\\bin\\mvn.cmd` worked for me straight away in Windows 10.","title":"How to set specific Java version to Maven?","body":"<pre><code>set JAVA_HOME=C:\\Program Files\\Java\\jdk1.7.0_45\\jre\n</code></pre>\n<p>Adding the above line of code as the first statement in <code>$MAVEN_HOME\\bin\\mvn.cmd</code> worked for me straight away in Windows 10.</p>\n"},{"tags":[],"owner":{"account_id":24740428,"reputation":11,"user_id":18627239,"display_name":"Jaesung Shin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1648609470,"creation_date":1648609470,"answer_id":71671039,"question_id":19654557,"body_markdown":"I couldn&#39;t solve this problem with the answers above and I tried many things to solve this and I got it. I hope someone like me could solve the problem.\r\n\r\nI am using brew to install java and maven.\r\nFor me, I wanted to use java 1.8. So I installed java 1.8\r\nbut still maven use version 17.0.2\r\n\r\n**Solution:** \\\r\ninstall java 1.8\r\nI referred to this website to install it: https://devqa.io/brew-install-java/\r\n\r\n`mvn --version` and remember the version \\\r\n\r\n    cat /usr/local/Cellar/maven/VERSION(for me 3.8.5)/bin/mvn\r\n\r\nThen you will see\r\n\r\n    #!/bin/bash\r\n    JAVA_HOME=&quot;${JAVA_HOME:-/usr/local/opt/openjdk/libexec/openjdk.jdk/Contents/Home}&quot; exec &quot;/usr/local/Cellar/maven/3.8.5/libexec/bin/mvn&quot;  &quot;$@&quot;\\\r\n\r\nCheck this directory\r\n\r\n    ls /usr/local/opt\r\n\r\nYou will see files like openjdk, openjdk@17, openjdk@8\r\n\r\nchange the directory openjdk to openjdk@8 in mvn file:\r\n\r\n    #!/bin/bash\r\n    JAVA_HOME=&quot;${JAVA_HOME:-/usr/local/opt/openjdk@8/libexec/openjdk.jdk/Contents/Home}&quot; exec &quot;/usr/local/Cellar/maven/3.8.5/libexec/bin/mvn&quot;  &quot;$@&quot;\\\r\n\r\n\r\n\r\n\r\n","title":"How to set specific Java version to Maven?","body":"<p>I couldn't solve this problem with the answers above and I tried many things to solve this and I got it. I hope someone like me could solve the problem.</p>\n<p>I am using brew to install java and maven.\nFor me, I wanted to use java 1.8. So I installed java 1.8\nbut still maven use version 17.0.2</p>\n<p><strong>Solution:</strong> <br />\ninstall java 1.8\nI referred to this website to install it: <a href=\"https://devqa.io/brew-install-java/\" rel=\"nofollow noreferrer\">https://devqa.io/brew-install-java/</a></p>\n<p><code>mvn --version</code> and remember the version \\</p>\n<pre><code>cat /usr/local/Cellar/maven/VERSION(for me 3.8.5)/bin/mvn\n</code></pre>\n<p>Then you will see</p>\n<pre><code>#!/bin/bash\nJAVA_HOME=&quot;${JAVA_HOME:-/usr/local/opt/openjdk/libexec/openjdk.jdk/Contents/Home}&quot; exec &quot;/usr/local/Cellar/maven/3.8.5/libexec/bin/mvn&quot;  &quot;$@&quot;\\\n</code></pre>\n<p>Check this directory</p>\n<pre><code>ls /usr/local/opt\n</code></pre>\n<p>You will see files like openjdk, openjdk@17, openjdk@8</p>\n<p>change the directory openjdk to openjdk@8 in mvn file:</p>\n<pre><code>#!/bin/bash\nJAVA_HOME=&quot;${JAVA_HOME:-/usr/local/opt/openjdk@8/libexec/openjdk.jdk/Contents/Home}&quot; exec &quot;/usr/local/Cellar/maven/3.8.5/libexec/bin/mvn&quot;  &quot;$@&quot;\\\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2553856,"reputation":121,"user_id":2216296,"display_name":"mikaelovi"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1649317398,"creation_date":1649317398,"answer_id":71778170,"question_id":19654557,"body_markdown":"[Ondrej&#39;s answer][1]\r\nworked perfectly. It truly solves the problem. Few other things to do though as detailed in the [toolchain documentation][2]\r\n\r\n\r\n \r\n\r\n 1. Add the maven-toolchains-plugin in your project POM\r\n 2. Configure the maven-toolchains-plugin to use a specific JDK in the toolchain as configured in your toolchains.xml file. \r\n\r\nSee sample configurations below:\r\n\r\ntoolchains.xml\r\n\r\n\r\n    &lt;toolchains xmlns=&quot;http://maven.apache.org/TOOLCHAINS/1.1.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/TOOLCHAINS/1.1.0 http://maven.apache.org/xsd/toolchains-1.1.0.xsd&quot;&gt;\r\n      &lt;!-- JDK toolchains --&gt;\r\n      &lt;toolchain&gt;\r\n        &lt;type&gt;jdk&lt;/type&gt;\r\n        &lt;provides&gt;\r\n          &lt;version&gt;1.8&lt;/version&gt;\r\n          &lt;vendor&gt;sun&lt;/vendor&gt;\r\n        &lt;/provides&gt;\r\n        &lt;configuration&gt;\r\n          &lt;jdkHome&gt;/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home&lt;/jdkHome&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/toolchain&gt;\r\n      &lt;toolchain&gt;\r\n        &lt;type&gt;jdk&lt;/type&gt;\r\n        &lt;provides&gt;\r\n          &lt;version&gt;17&lt;/version&gt;\r\n          &lt;vendor&gt;sun&lt;/vendor&gt;\r\n        &lt;/provides&gt;\r\n        &lt;configuration&gt;\r\n          &lt;jdkHome&gt;/Library/Java/JavaVirtualMachines/jdk-17.0.2.jdk/Contents/Home&lt;/jdkHome&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/toolchain&gt;\r\n      &lt;toolchain&gt;\r\n        &lt;type&gt;jdk&lt;/type&gt;\r\n        &lt;provides&gt;\r\n          &lt;version&gt;11&lt;/version&gt;\r\n          &lt;vendor&gt;sun&lt;/vendor&gt;\r\n        &lt;/provides&gt;\r\n        &lt;configuration&gt;\r\n          &lt;jdkHome&gt;/Library/Java/JavaVirtualMachines/jdk-11.0.12.jdk/Contents/Home&lt;/jdkHome&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/toolchain&gt;\r\n    &lt;/toolchains&gt;\r\n\r\nAs seen above, this works for machines having multiple java versions installed.\r\nThen in the project&#39;s POM, the maven-toolchains-plugin is configured to use one of the JDK versions defined as a toolchain.\r\n\r\n    &lt;plugin&gt;\r\n      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n      &lt;artifactId&gt;maven-toolchains-plugin&lt;/artifactId&gt;\r\n      &lt;executions&gt;\r\n        &lt;execution&gt;\r\n          &lt;goals&gt;\r\n            &lt;goal&gt;toolchain&lt;/goal&gt;\r\n          &lt;/goals&gt;\r\n        &lt;/execution&gt;\r\n      &lt;/executions&gt;\r\n      &lt;configuration&gt;\r\n        &lt;toolchains&gt;\r\n          &lt;jdk&gt;\r\n            &lt;version&gt;11&lt;/version&gt;\r\n            &lt;vendor&gt;sun&lt;/vendor&gt;\r\n          &lt;/jdk&gt;\r\n        &lt;/toolchains&gt;\r\n      &lt;/configuration&gt;\r\n    &lt;/plugin&gt;\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/35463606/2216296\r\n  [2]: https://maven.apache.org/guides/mini/guide-using-toolchains.html#using-toolchains-in-your-project","title":"How to set specific Java version to Maven?","body":"<p><a href=\"https://stackoverflow.com/a/35463606/2216296\">Ondrej's answer</a>\nworked perfectly. It truly solves the problem. Few other things to do though as detailed in the <a href=\"https://maven.apache.org/guides/mini/guide-using-toolchains.html#using-toolchains-in-your-project\" rel=\"nofollow noreferrer\">toolchain documentation</a></p>\n<ol>\n<li>Add the maven-toolchains-plugin in your project POM</li>\n<li>Configure the maven-toolchains-plugin to use a specific JDK in the toolchain as configured in your toolchains.xml file.</li>\n</ol>\n<p>See sample configurations below:</p>\n<p>toolchains.xml</p>\n<pre><code>&lt;toolchains xmlns=&quot;http://maven.apache.org/TOOLCHAINS/1.1.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/TOOLCHAINS/1.1.0 http://maven.apache.org/xsd/toolchains-1.1.0.xsd&quot;&gt;\n  &lt;!-- JDK toolchains --&gt;\n  &lt;toolchain&gt;\n    &lt;type&gt;jdk&lt;/type&gt;\n    &lt;provides&gt;\n      &lt;version&gt;1.8&lt;/version&gt;\n      &lt;vendor&gt;sun&lt;/vendor&gt;\n    &lt;/provides&gt;\n    &lt;configuration&gt;\n      &lt;jdkHome&gt;/Library/Java/JavaVirtualMachines/jdk1.8.0_301.jdk/Contents/Home&lt;/jdkHome&gt;\n    &lt;/configuration&gt;\n  &lt;/toolchain&gt;\n  &lt;toolchain&gt;\n    &lt;type&gt;jdk&lt;/type&gt;\n    &lt;provides&gt;\n      &lt;version&gt;17&lt;/version&gt;\n      &lt;vendor&gt;sun&lt;/vendor&gt;\n    &lt;/provides&gt;\n    &lt;configuration&gt;\n      &lt;jdkHome&gt;/Library/Java/JavaVirtualMachines/jdk-17.0.2.jdk/Contents/Home&lt;/jdkHome&gt;\n    &lt;/configuration&gt;\n  &lt;/toolchain&gt;\n  &lt;toolchain&gt;\n    &lt;type&gt;jdk&lt;/type&gt;\n    &lt;provides&gt;\n      &lt;version&gt;11&lt;/version&gt;\n      &lt;vendor&gt;sun&lt;/vendor&gt;\n    &lt;/provides&gt;\n    &lt;configuration&gt;\n      &lt;jdkHome&gt;/Library/Java/JavaVirtualMachines/jdk-11.0.12.jdk/Contents/Home&lt;/jdkHome&gt;\n    &lt;/configuration&gt;\n  &lt;/toolchain&gt;\n&lt;/toolchains&gt;\n</code></pre>\n<p>As seen above, this works for machines having multiple java versions installed.\nThen in the project's POM, the maven-toolchains-plugin is configured to use one of the JDK versions defined as a toolchain.</p>\n<pre><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n  &lt;artifactId&gt;maven-toolchains-plugin&lt;/artifactId&gt;\n  &lt;executions&gt;\n    &lt;execution&gt;\n      &lt;goals&gt;\n        &lt;goal&gt;toolchain&lt;/goal&gt;\n      &lt;/goals&gt;\n    &lt;/execution&gt;\n  &lt;/executions&gt;\n  &lt;configuration&gt;\n    &lt;toolchains&gt;\n      &lt;jdk&gt;\n        &lt;version&gt;11&lt;/version&gt;\n        &lt;vendor&gt;sun&lt;/vendor&gt;\n      &lt;/jdk&gt;\n    &lt;/toolchains&gt;\n  &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14731481,"reputation":11,"user_id":10638613,"display_name":"Aman L"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661325276,"creation_date":1661325276,"answer_id":73468894,"question_id":19654557,"body_markdown":"Mac Users,\r\nIf you have installed maven from HomeBrew(Brew),\r\nOr even if you have installed it from elsewhere,\r\nIf you want to change the default version of the Java used by the Maven,\r\nYou can use following commands to change the version that the maven uses,\r\n\r\n    vim ~/.mavenrc\r\n\r\nIn the gui that pops up enter this and save-\r\n\r\n    JAVA_HOME=&quot;(put the Home path of your desired java version package)&quot;\r\n\r\nTo verify wether the path is changed for maven you can check using -\r\n\r\n    mvn -v","title":"How to set specific Java version to Maven?","body":"<p>Mac Users,\nIf you have installed maven from HomeBrew(Brew),\nOr even if you have installed it from elsewhere,\nIf you want to change the default version of the Java used by the Maven,\nYou can use following commands to change the version that the maven uses,</p>\n<pre><code>vim ~/.mavenrc\n</code></pre>\n<p>In the gui that pops up enter this and save-</p>\n<pre><code>JAVA_HOME=&quot;(put the Home path of your desired java version package)&quot;\n</code></pre>\n<p>To verify wether the path is changed for maven you can check using -</p>\n<pre><code>mvn -v\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24874208,"reputation":101,"user_id":18748312,"display_name":"Zak_Stack"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664449912,"creation_date":1664449912,"answer_id":73894564,"question_id":19654557,"body_markdown":"Setting the Default Java Version\r\nYou might have 2 different versions of Java on your system. To set one as the default , use the command:\r\n\r\nsudo alternatives config java\r\n\r\nThe system displays a list of different Java versions. If you like the default, press Enter.\r\n\r\nIf you want to change it, type the number of the version you want, then press Enter.","title":"How to set specific Java version to Maven?","body":"<p>Setting the Default Java Version\nYou might have 2 different versions of Java on your system. To set one as the default , use the command:</p>\n<p>sudo alternatives config java</p>\n<p>The system displays a list of different Java versions. If you like the default, press Enter.</p>\n<p>If you want to change it, type the number of the version you want, then press Enter.</p>\n"},{"tags":[],"owner":{"account_id":23085267,"reputation":41,"user_id":17196881,"display_name":"Mohan Shetty"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1675177440,"creation_date":1674948368,"answer_id":75271614,"question_id":19654557,"body_markdown":"I am using MAC Mini - M1 chip, after installing maven through brew install maven I noticed it&#39;s using java 19 but I rather wanted to use java 17 version that I downloaded in to my machine. Was out of luck with specific instructions to reset the default mvn java version. Here are the steps you can follow.\r\n1. `mvn --version` #this will give where the maven is installed\r\nin my case Maven home: `/opt/homebrew/Cellar/maven/3.8.7/libexec`\r\n2. then go to `/opt/homebrew/Cellar/maven/3.8.7/bin` folder\r\n3. edit mvn file, I used `vi mvn`\r\n4. below I have edited the jdk location to point where I have java 17 jdk\r\n```\r\n#!/bin/bash\r\nJAVA_HOME=&quot;${JAVA_HOME:-/Library/Java/JavaVirtualMachines/jdk-17.0.3.1.jdk/Contents/Home}&quot; exec &quot;/opt/homebrew/Cellar/maven/3.8.7/libexec/bin/mvn&quot;  &quot;$@&quot;\r\n```\r\n5. save the mvn file after edit\r\n6. `mvn -v` will now show it&#39;s default java version is 17\r\n```\r\nApache Maven 3.8.7 (b89d5959fcde851dcb1c8946a785a163f14e1e29)\r\nMaven home: /opt/homebrew/Cellar/maven/3.8.7/libexec\r\nJava version: 17.0.3.1, vendor: Oracle Corporation, runtime: /Library/Java/JavaVirtualMachines/jdk-17.0.3.1.jdk/Contents/Home\r\nDefault locale: en_US, platform encoding: UTF-8\r\nOS name: &quot;mac os x&quot;, version: &quot;13.1&quot;, arch: &quot;aarch64&quot;, family: &quot;mac&quot;\r\n```\r\n","title":"How to set specific Java version to Maven?","body":"<p>I am using MAC Mini - M1 chip, after installing maven through brew install maven I noticed it's using java 19 but I rather wanted to use java 17 version that I downloaded in to my machine. Was out of luck with specific instructions to reset the default mvn java version. Here are the steps you can follow.</p>\n<ol>\n<li><code>mvn --version</code> #this will give where the maven is installed\nin my case Maven home: <code>/opt/homebrew/Cellar/maven/3.8.7/libexec</code></li>\n<li>then go to <code>/opt/homebrew/Cellar/maven/3.8.7/bin</code> folder</li>\n<li>edit mvn file, I used <code>vi mvn</code></li>\n<li>below I have edited the jdk location to point where I have java 17 jdk</li>\n</ol>\n<pre><code>#!/bin/bash\nJAVA_HOME=&quot;${JAVA_HOME:-/Library/Java/JavaVirtualMachines/jdk-17.0.3.1.jdk/Contents/Home}&quot; exec &quot;/opt/homebrew/Cellar/maven/3.8.7/libexec/bin/mvn&quot;  &quot;$@&quot;\n</code></pre>\n<ol start=\"5\">\n<li>save the mvn file after edit</li>\n<li><code>mvn -v</code> will now show it's default java version is 17</li>\n</ol>\n<pre><code>Apache Maven 3.8.7 (b89d5959fcde851dcb1c8946a785a163f14e1e29)\nMaven home: /opt/homebrew/Cellar/maven/3.8.7/libexec\nJava version: 17.0.3.1, vendor: Oracle Corporation, runtime: /Library/Java/JavaVirtualMachines/jdk-17.0.3.1.jdk/Contents/Home\nDefault locale: en_US, platform encoding: UTF-8\nOS name: &quot;mac os x&quot;, version: &quot;13.1&quot;, arch: &quot;aarch64&quot;, family: &quot;mac&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1548558,"reputation":1083,"user_id":1441476,"accept_rate":40,"display_name":"Homayoun Behzadian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681064235,"creation_date":1681064235,"answer_id":75972169,"question_id":19654557,"body_markdown":"I used https://stackoverflow.com/a/43524685/1441476 and created the below functions for use with Powershell:\r\n\r\n```\r\nfunction J08 { $env:JAVA_HOME = &#39;C:\\Program Files\\Java\\jdk1.8.0_161&#39;}\r\nfunction J09 { $env:JAVA_HOME = &#39;C:\\Program Files\\Java\\jdk-9&#39;}\r\nfunction J11 { $env:JAVA_HOME = &#39;C:\\Program Files\\Java\\jdk-11.0.10&#39;}\r\nfunction J15 { $env:JAVA_HOME = &#39;C:\\Program Files\\Java\\jdk-15.0.2&#39;}\r\nfunction J16 { $env:JAVA_HOME = &#39;C:\\Program Files\\Java\\jdk-16.0.1&#39;}\r\nfunction J17 { $env:JAVA_HOME = &#39;C:\\Program Files\\Java\\jdk-17&#39;}\r\nfunction J18 { $env:JAVA_HOME = &#39;C:\\Program Files\\Java\\jdk-18.0.2&#39;}\r\nfunction J19 { $env:JAVA_HOME = &#39;C:\\Program Files\\Java\\jdk-19&#39;}\r\n```\r\nThese functions must be placed in file `C:\\Program Files\\PowerShell\\7\\profile.ps1` (or any other PowerShell profile) and be called before use. for example, if you want to use maven with Java 8, you must first call `J08`, then call `mvn ...`.\r\n\r\nI found the toolchain answer so complicated and preferred this way.","title":"How to set specific Java version to Maven?","body":"<p>I used <a href=\"https://stackoverflow.com/a/43524685/1441476\">https://stackoverflow.com/a/43524685/1441476</a> and created the below functions for use with Powershell:</p>\n<pre><code>function J08 { $env:JAVA_HOME = 'C:\\Program Files\\Java\\jdk1.8.0_161'}\nfunction J09 { $env:JAVA_HOME = 'C:\\Program Files\\Java\\jdk-9'}\nfunction J11 { $env:JAVA_HOME = 'C:\\Program Files\\Java\\jdk-11.0.10'}\nfunction J15 { $env:JAVA_HOME = 'C:\\Program Files\\Java\\jdk-15.0.2'}\nfunction J16 { $env:JAVA_HOME = 'C:\\Program Files\\Java\\jdk-16.0.1'}\nfunction J17 { $env:JAVA_HOME = 'C:\\Program Files\\Java\\jdk-17'}\nfunction J18 { $env:JAVA_HOME = 'C:\\Program Files\\Java\\jdk-18.0.2'}\nfunction J19 { $env:JAVA_HOME = 'C:\\Program Files\\Java\\jdk-19'}\n</code></pre>\n<p>These functions must be placed in file <code>C:\\Program Files\\PowerShell\\7\\profile.ps1</code> (or any other PowerShell profile) and be called before use. for example, if you want to use maven with Java 8, you must first call <code>J08</code>, then call <code>mvn ...</code>.</p>\n<p>I found the toolchain answer so complicated and preferred this way.</p>\n"}],"owner":{"account_id":1883916,"reputation":4243,"user_id":1703524,"accept_rate":68,"display_name":"andPat"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":577840,"favorite_count":0,"down_vote_count":0,"up_vote_count":305,"accepted_answer_id":19654699,"answer_count":29,"score":305,"last_activity_date":1681064235,"creation_date":1383039663,"question_id":19654557,"body_markdown":"On my machine I have two Java versions installed: (1.6 and 1.7 installed manually by me).  I need both of them for different projects. But for Maven I need 1.7, but my Maven uses the 1.6 Java version.\r\n\r\nHow can I set Maven to use 1.7?\r\n","title":"How to set specific Java version to Maven?","body":"<p>On my machine I have two Java versions installed: (1.6 and 1.7 installed manually by me).  I need both of them for different projects. But for Maven I need 1.7, but my Maven uses the 1.6 Java version.</p>\n<p>How can I set Maven to use 1.7?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":4074999,"reputation":2882,"user_id":3346914,"display_name":"MrPk"},"score":1,"creation_date":1465288678,"post_id":37606726,"comment_id":62826160,"body_markdown":"http://stackoverflow.com/questions/16405594/what-is-this-error-java-lang-illegalstateexception-at-mediaplayer-getcurrentposi","body":"<a href=\"http://stackoverflow.com/questions/16405594/what-is-this-error-java-lang-illegalstateexception-at-mediaplayer-getcurrentposi\" title=\"what is this error java lang illegalstateexception at mediaplayer getcurrentposi\">stackoverflow.com/questions/16405594/&hellip;</a>"},{"owner":{"account_id":417862,"reputation":16972,"user_id":794088,"display_name":"petey"},"score":0,"creation_date":1465407500,"post_id":37606726,"comment_id":62892551,"body_markdown":"post the full stacktrace please","body":"post the full stacktrace please"},{"owner":{"account_id":3336007,"reputation":1549,"user_id":2803557,"accept_rate":60,"display_name":"Skyyy"},"score":0,"creation_date":1465576992,"post_id":37606726,"comment_id":62976162,"body_markdown":"@petey update question","body":"@petey update question"},{"owner":{"account_id":4206646,"reputation":1564,"user_id":3445381,"accept_rate":40,"display_name":"ikhsanudinhakim"},"score":0,"creation_date":1465803803,"post_id":37606726,"comment_id":63035198,"body_markdown":"@Akash can you share your mediaplayer initialization code?","body":"@Akash can you share your mediaplayer initialization code?"},{"owner":{"account_id":3100884,"reputation":778,"user_id":2625032,"accept_rate":62,"display_name":"hello_world"},"score":0,"creation_date":1465836073,"post_id":37606726,"comment_id":63056044,"body_markdown":"the media player can only give that error for getCurrentPosition() if it happens to be in the error state (see table here - https://developer.android.com/reference/android/media/MediaPlayer.html ) add an error listener and see if it returns any error","body":"the media player can only give that error for getCurrentPosition() if it happens to be in the error state (see table here - <a href=\"https://developer.android.com/reference/android/media/MediaPlayer.html\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/media/MediaPlayer.ht&zwnj;&#8203;ml</a> ) add an error listener and see if it returns any error"},{"owner":{"account_id":4206646,"reputation":1564,"user_id":3445381,"accept_rate":40,"display_name":"ikhsanudinhakim"},"score":0,"creation_date":1465873521,"post_id":37606726,"comment_id":63069884,"body_markdown":"That&#39;s because you try to play media player after it has stopped and seems there are the wrong on initialization. So please share your full media player initialization code so we can figure out the problem.","body":"That&#39;s because you try to play media player after it has stopped and seems there are the wrong on initialization. So please share your full media player initialization code so we can figure out the problem."},{"owner":{"account_id":3336007,"reputation":1549,"user_id":2803557,"accept_rate":60,"display_name":"Skyyy"},"score":0,"creation_date":1465896073,"post_id":37606726,"comment_id":63080011,"body_markdown":"@ikhsan `mediaPlayer = MediaPlayer.create(getApplicationContext(), uri);\n        mediaPlayer.start();`","body":"@ikhsan <code>mediaPlayer = MediaPlayer.create(getApplicationContext(), uri);         mediaPlayer.start();</code>"}],"answers":[{"tags":[],"owner":{"account_id":3251487,"reputation":3147,"user_id":2741598,"accept_rate":50,"display_name":"Vickyexpert"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1465293436,"creation_date":1465290991,"answer_id":37675207,"question_id":37606726,"body_markdown":"It may be possible, when you try to get the position of media player at that time player has stopped or released, so apply below conditions for that,\r\n\r\n         if(mediaPlayer != null &amp; mediaPlayer.isPLaying())\r\n            currentPosition = mediaPlayer.getCurrentPosition();\r\n         else \r\n            currentPosition = 0;\r\n\r\ntry below code,\r\n\r\n         handler.postDelayed(new Runnable(){\r\n            @Override\r\n            public void run() {\r\n                int runtime = mediaPlayer.getDuration();\r\n                int currentPosition = 0;\r\n                while (currentPosition &lt; runtime) {\r\n                   try {\r\n                        if(mediaPlayer != null &amp; mediaPlayer.isPLaying())\r\n                            currentPosition = mediaPlayer.getCurrentPosition();\r\n                        else \r\n                           currentPosition = 0;    \r\n                   \r\n                        if (seekBar != null) {\r\n                              seekBar.setProgress(currentPosition);\r\n                        }\r\n                    } catch (InterruptedException e) {\r\n                        e.printStackTrace();\r\n                  }\r\n              }\r\n          }, 500);","title":"java.lang.illegalStateException randomly occurs when getting mediaPlayer.getCurrentPosition","body":"<p>It may be possible, when you try to get the position of media player at that time player has stopped or released, so apply below conditions for that,</p>\n\n<pre><code>     if(mediaPlayer != null &amp; mediaPlayer.isPLaying())\n        currentPosition = mediaPlayer.getCurrentPosition();\n     else \n        currentPosition = 0;\n</code></pre>\n\n<p>try below code,</p>\n\n<pre><code>     handler.postDelayed(new Runnable(){\n        @Override\n        public void run() {\n            int runtime = mediaPlayer.getDuration();\n            int currentPosition = 0;\n            while (currentPosition &lt; runtime) {\n               try {\n                    if(mediaPlayer != null &amp; mediaPlayer.isPLaying())\n                        currentPosition = mediaPlayer.getCurrentPosition();\n                    else \n                       currentPosition = 0;    \n\n                    if (seekBar != null) {\n                          seekBar.setProgress(currentPosition);\n                    }\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n              }\n          }\n      }, 500);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":84015,"reputation":10943,"user_id":235123,"accept_rate":76,"display_name":"Mina Wissa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1465291076,"creation_date":1465291076,"answer_id":37675242,"question_id":37606726,"body_markdown":"I believe the reason for this is the **thread**.sleep() line. it causes the current thread to sleep while the media player can be actually in a stopped or released state.\r\n\r\nThe docs mention that calling **getCurrentPosition()** must happen at one of the **valid** states:\r\n\r\n&gt; {Idle, Initialized, Prepared, Started, Paused, Stopped,\r\n&gt; PlaybackCompleted}\r\n\r\nBefore calling getCurrentPosition, you can check that the media player is actually playing by checking [isPlaying()][1] value.\r\n\r\nAlso you can run your thread using a [Timer][2] and a [TimerTask][3] instead of using while loops and Thread.sleep();\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/media/MediaPlayer.html#isPlaying()\r\n  [2]: https://developer.android.com/reference/java/util/Timer.html\r\n  [3]: https://developer.android.com/reference/java/util/TimerTask.html","title":"java.lang.illegalStateException randomly occurs when getting mediaPlayer.getCurrentPosition","body":"<p>I believe the reason for this is the <strong>thread</strong>.sleep() line. it causes the current thread to sleep while the media player can be actually in a stopped or released state.</p>\n\n<p>The docs mention that calling <strong>getCurrentPosition()</strong> must happen at one of the <strong>valid</strong> states:</p>\n\n<blockquote>\n  <p>{Idle, Initialized, Prepared, Started, Paused, Stopped,\n  PlaybackCompleted}</p>\n</blockquote>\n\n<p>Before calling getCurrentPosition, you can check that the media player is actually playing by checking <a href=\"https://developer.android.com/reference/android/media/MediaPlayer.html#isPlaying()\" rel=\"nofollow\">isPlaying()</a> value.</p>\n\n<p>Also you can run your thread using a <a href=\"https://developer.android.com/reference/java/util/Timer.html\" rel=\"nofollow\">Timer</a> and a <a href=\"https://developer.android.com/reference/java/util/TimerTask.html\" rel=\"nofollow\">TimerTask</a> instead of using while loops and Thread.sleep();</p>\n"},{"tags":[],"owner":{"account_id":2652155,"reputation":28560,"user_id":2293534,"accept_rate":75,"display_name":"SkyWalker"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1465879348,"creation_date":1465309715,"answer_id":37682113,"question_id":37606726,"body_markdown":"Actually this problem occurs if Media player is in wrong state.\r\n\r\nIf your MediaPlayer is in the `Initialized-State`, you cannot call `start()`. So you have to wait till your MediaPlayer is in the `Prepared-State` position.\r\n**You can only seek the Mediaplayer in Prepared, Started and Paused State.**\r\n\r\nFor more details you can check: [Media Player State Diagram][1]\r\n\r\n\r\nYou can also make second call for current position. As it is random issue then bypassing and again calling the method can save you.\r\n\r\n    mediaPlayer.reset();\r\n    \r\n    try {\r\n       .......\r\n       .......\r\n       currentPosition = mediaPlayer.getCurrentPosition();\r\n       ......\r\n    } catch (IllegalStateException e) {\r\n       mediaPlayer.reset();\r\n       currentPosition = mediaPlayer.getCurrentPosition();\r\n    }\r\n    \r\n    mediaPlayer.prepareAsync();\r\n\r\nResource Link:\r\nhttps://stackoverflow.com/questions/16405594/what-is-this-error-java-lang-illegalstateexception-at-mediaplayer-getcurrentposi\r\n\r\n---\r\n\r\n---\r\n\r\nUPDATE1:\r\n---\r\nYou can bypass the exception and make a second call by using it. Hope it may help you.\r\n\r\n    try {\r\n    ....\r\n    currentPosition = mediaPlayer.getCurrentPosition();\r\n    ....\r\n    } catch (final Exception e) {\r\n        e.printStackTrace();\r\n        if (e instanceof IllegalStateException) { // bypass IllegalStateException\r\n            .......\r\n            // You can again call the method and make a counter for deadlock situation or implement your own code according to your situation\r\n            if (retry) {\r\n                   mediaPlayer.reset();\r\n                   currentPosition = mediaPlayer.getCurrentPosition();\r\n            } else {\r\n                throw e;\r\n            }\r\n        }\r\n    }\r\n\r\nUPDATE2: \r\n---\r\n\r\nThis will try 3 times to get current position. If not found, then it will give exception.\r\n\r\n     try {\r\n    \t ....\r\n    \t currentPosition = mediaPlayer.getCurrentPosition();\r\n    \t ....\r\n    \t } catch (final Exception e) {\r\n    \t     e.printStackTrace();\r\n    \t     if (e instanceof IllegalStateException) { // bypass IllegalStateException\r\n    \t         .......\r\n    \t         // You can again call the method and make a counter for deadlock situation or implement your own code according to your situation\r\n    \t         boolean checkAgain = true;\r\n    \t         int counter = 0;\r\n    \t        \t for(int i = 0; i &lt; 2; i++){\r\n    \t        \t\t if (checkAgain) {\r\n    \t        \t\t     mediaPlayer.reset();\r\n     \t                     currentPosition = mediaPlayer.getCurrentPosition();\r\n     \t                     if(currentPosition &gt; 0) {\r\n     \t                    \t checkAgain = false;\r\n     \t                    \t counter++;\r\n     \t                     }\r\n    \t        \t\t } else {\r\n    \t        \t\t\t if(counter == 0){\r\n    \t        \t\t\t\t throw e;\r\n    \t        \t\t\t }\r\n    \t    \t         }\r\n    \t        \t }\r\n    \t                \r\n    \t        \r\n    \t     }\r\n    \t }\r\n\r\nUPDATE4:\r\n---\r\n\r\n 1. An `IllegalStateException` is thrown if `prepare()` or `prepareAsync()` is\r\n    called in any other state.\r\n 2. While in the Prepared state, properties such as audio/sound volume,\r\n    screenOnWhilePlaying, looping can be adjusted by invoking the\r\n    corresponding set methods.\r\n\r\n 3. To start the playback, `start()` must be called. After `start()` returns\r\n    successfully, the MediaPlayer object is in the Started state.\r\n    **isPlaying() can be called to test whether the MediaPlayer object is\r\n    in the Started state.**\r\n\r\n 4. While in the Started state, the internal player engine calls a user\r\n    supplied `OnBufferingUpdateListener.onBufferingUpdate()` callback\r\n    method if a OnBufferingUpdateListener has been registered beforehand\r\n    via `setOnBufferingUpdateListener(OnBufferingUpdateListener)`. This\r\n    callback allows applications to keep track of the buffering status\r\n    while streaming audio/video. Calling `start()` has not effect on a\r\n    MediaPlayer object that is already in the Started state.\r\n\r\nSo `isPlaying()` method should be checked. So code will be look like below:\r\n\r\n     try {\r\n    \t ....\r\n    \t currentPosition = mediaPlayer.getCurrentPosition();\r\n    \t ....\r\n    \t } catch (final Exception e) {\r\n    \t     e.printStackTrace();\r\n    \t     if (e instanceof IllegalStateException) { // bypass IllegalStateException\r\n    \t         .......\r\n    \t         // You can again call the method and make a counter for deadlock situation or implement your own code according to your situation\r\n    \t         boolean checkAgain = true;\r\n    \t         int counter = 0;\r\n    \t        \t for(int i = 0; i &lt; 2; i++){\r\n    \t        \t\t if (checkAgain) {\r\n    \t        \t\t     mediaPlayer.reset();\r\n    \t\t\t\t\t\t if(mediaPlayer != null &amp; mediaPlayer.isPLaying()) {\r\n     \t                        currentPosition = mediaPlayer.getCurrentPosition();\r\n    \t\t\t\t\t\t } else {\r\n    \t\t\t\t\t\t    currentPosition = 0; \r\n    \t\t\t\t\t\t }\r\n     \t                     if(currentPosition &gt; 0) {\r\n     \t                    \t checkAgain = false;\r\n     \t                    \t counter++;\r\n     \t                     }\r\n    \t        \t\t } else {\r\n    \t        \t\t\t if(counter == 0){\r\n    \t        \t\t\t\t throw e;\r\n    \t        \t\t\t }\r\n    \t    \t         }\r\n    \t        \t }\r\n    \t                \r\n    \t        \r\n    \t     }\r\n    \t }\r\n\t\t \r\n\r\n  [1]: https://developer.android.com/reference/android/media/MediaPlayer.html","title":"java.lang.illegalStateException randomly occurs when getting mediaPlayer.getCurrentPosition","body":"<p>Actually this problem occurs if Media player is in wrong state.</p>\n\n<p>If your MediaPlayer is in the <code>Initialized-State</code>, you cannot call <code>start()</code>. So you have to wait till your MediaPlayer is in the <code>Prepared-State</code> position.\n<strong>You can only seek the Mediaplayer in Prepared, Started and Paused State.</strong></p>\n\n<p>For more details you can check: <a href=\"https://developer.android.com/reference/android/media/MediaPlayer.html\" rel=\"nofollow noreferrer\">Media Player State Diagram</a></p>\n\n<p>You can also make second call for current position. As it is random issue then bypassing and again calling the method can save you.</p>\n\n<pre><code>mediaPlayer.reset();\n\ntry {\n   .......\n   .......\n   currentPosition = mediaPlayer.getCurrentPosition();\n   ......\n} catch (IllegalStateException e) {\n   mediaPlayer.reset();\n   currentPosition = mediaPlayer.getCurrentPosition();\n}\n\nmediaPlayer.prepareAsync();\n</code></pre>\n\n<p>Resource Link:\n<a href=\"https://stackoverflow.com/questions/16405594/what-is-this-error-java-lang-illegalstateexception-at-mediaplayer-getcurrentposi\">What is this error java.lang.IllegalStateException at MediaPlayer.getCurrentPosition</a></p>\n\n<hr>\n\n<hr>\n\n<h2>UPDATE1:</h2>\n\n<p>You can bypass the exception and make a second call by using it. Hope it may help you.</p>\n\n<pre><code>try {\n....\ncurrentPosition = mediaPlayer.getCurrentPosition();\n....\n} catch (final Exception e) {\n    e.printStackTrace();\n    if (e instanceof IllegalStateException) { // bypass IllegalStateException\n        .......\n        // You can again call the method and make a counter for deadlock situation or implement your own code according to your situation\n        if (retry) {\n               mediaPlayer.reset();\n               currentPosition = mediaPlayer.getCurrentPosition();\n        } else {\n            throw e;\n        }\n    }\n}\n</code></pre>\n\n<h2>UPDATE2:</h2>\n\n<p>This will try 3 times to get current position. If not found, then it will give exception.</p>\n\n<pre><code> try {\n     ....\n     currentPosition = mediaPlayer.getCurrentPosition();\n     ....\n     } catch (final Exception e) {\n         e.printStackTrace();\n         if (e instanceof IllegalStateException) { // bypass IllegalStateException\n             .......\n             // You can again call the method and make a counter for deadlock situation or implement your own code according to your situation\n             boolean checkAgain = true;\n             int counter = 0;\n                 for(int i = 0; i &lt; 2; i++){\n                     if (checkAgain) {\n                         mediaPlayer.reset();\n                         currentPosition = mediaPlayer.getCurrentPosition();\n                         if(currentPosition &gt; 0) {\n                             checkAgain = false;\n                             counter++;\n                         }\n                     } else {\n                         if(counter == 0){\n                             throw e;\n                         }\n                     }\n                 }\n\n\n         }\n     }\n</code></pre>\n\n<h2>UPDATE4:</h2>\n\n<ol>\n<li>An <code>IllegalStateException</code> is thrown if <code>prepare()</code> or <code>prepareAsync()</code> is\ncalled in any other state.</li>\n<li><p>While in the Prepared state, properties such as audio/sound volume,\nscreenOnWhilePlaying, looping can be adjusted by invoking the\ncorresponding set methods.</p></li>\n<li><p>To start the playback, <code>start()</code> must be called. After <code>start()</code> returns\nsuccessfully, the MediaPlayer object is in the Started state.\n<strong>isPlaying() can be called to test whether the MediaPlayer object is\nin the Started state.</strong></p></li>\n<li><p>While in the Started state, the internal player engine calls a user\nsupplied <code>OnBufferingUpdateListener.onBufferingUpdate()</code> callback\nmethod if a OnBufferingUpdateListener has been registered beforehand\nvia <code>setOnBufferingUpdateListener(OnBufferingUpdateListener)</code>. This\ncallback allows applications to keep track of the buffering status\nwhile streaming audio/video. Calling <code>start()</code> has not effect on a\nMediaPlayer object that is already in the Started state.</p></li>\n</ol>\n\n<p>So <code>isPlaying()</code> method should be checked. So code will be look like below:</p>\n\n<pre><code> try {\n     ....\n     currentPosition = mediaPlayer.getCurrentPosition();\n     ....\n     } catch (final Exception e) {\n         e.printStackTrace();\n         if (e instanceof IllegalStateException) { // bypass IllegalStateException\n             .......\n             // You can again call the method and make a counter for deadlock situation or implement your own code according to your situation\n             boolean checkAgain = true;\n             int counter = 0;\n                 for(int i = 0; i &lt; 2; i++){\n                     if (checkAgain) {\n                         mediaPlayer.reset();\n                         if(mediaPlayer != null &amp; mediaPlayer.isPLaying()) {\n                            currentPosition = mediaPlayer.getCurrentPosition();\n                         } else {\n                            currentPosition = 0; \n                         }\n                         if(currentPosition &gt; 0) {\n                             checkAgain = false;\n                             counter++;\n                         }\n                     } else {\n                         if(counter == 0){\n                             throw e;\n                         }\n                     }\n                 }\n\n\n         }\n     }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3078156,"reputation":396,"user_id":2607024,"display_name":"Zhe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1465489583,"creation_date":1465489583,"answer_id":37731498,"question_id":37606726,"body_markdown":"I strongly suspect that these methods are not thread safe. Even with the state checking that people are suggesting, you may still run into a problem if you interleave another operation from a different thread that renders this check useless.\r\n\r\nConsider synchronizing on the media player object to prevent concurrent access. You&#39;ll have to declare the mediaPlayer to be final.\r\n\r\n    final MediaPlayer mediaPlayer = ...\r\n\r\nAnd later (with one of the suggested checks. I didn&#39;t look to see if this was the appropriate one):\r\n\r\n    synchronized (mediaPlayer) {\r\n      if (mediaPlayer != null &amp; mediaPlayer.isPlaying()) {\r\n        currentPosition = mediaPlayer.getCurrentPosition();\r\n      } else {\r\n        currentPosition = 0;\r\n      }\r\n    }","title":"java.lang.illegalStateException randomly occurs when getting mediaPlayer.getCurrentPosition","body":"<p>I strongly suspect that these methods are not thread safe. Even with the state checking that people are suggesting, you may still run into a problem if you interleave another operation from a different thread that renders this check useless.</p>\n\n<p>Consider synchronizing on the media player object to prevent concurrent access. You'll have to declare the mediaPlayer to be final.</p>\n\n<pre><code>final MediaPlayer mediaPlayer = ...\n</code></pre>\n\n<p>And later (with one of the suggested checks. I didn't look to see if this was the appropriate one):</p>\n\n<pre><code>synchronized (mediaPlayer) {\n  if (mediaPlayer != null &amp; mediaPlayer.isPlaying()) {\n    currentPosition = mediaPlayer.getCurrentPosition();\n  } else {\n    currentPosition = 0;\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2655079,"reputation":1862,"user_id":2295938,"display_name":"Kaamel"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1465841279,"creation_date":1465755124,"answer_id":37777537,"question_id":37606726,"body_markdown":"In this code checks to see if the current position is before the end, and if so it waits 500ms, by which time it might be past the end! In fact for all practical purposes, it might reach the end just a moment after the check. This is not thread safe but there are synchronization solutions to mitigate this condition. I would suggest you use a simpler solution like this:\r\n\r\n    updateSeekBar = new Thread() {\r\n            @Override\r\n            public void run() {\r\n                int runtime = mediaPlayer.getDuration();\r\n                int currentPosition = 0;\r\n                int adv = 0;\r\n                while ((adv = ((adv = runtime - currentPosition) &lt; 500)?adv:500) &gt; 2) {\r\n                    try {\r\n                        currentPosition = mediaPlayer.getCurrentPosition();\r\n                        if (seekBar != null) {\r\n                            seekBar.setProgress(currentPosition);\r\n                        }\r\n                        sleep(adv);    \r\n                    } catch (InterruptedException e) {\r\n                        e.printStackTrace();\r\n                    } catch (IllegalStateException e) {\r\n                        seekBar.setProgress(runtime);\r\n                        break;\r\n                    }\r\n    \r\n                }\r\n            }\r\n        };\r\n\r\nThis code first calculates the difference between the currentPosition and the duration and only if there is more than 2ms difference it will try to get the new current position (2ms is just an arbitrary number to add some safety margin while sacrificing 2ms of accuracy at the end.) Also sleep is moved to the end of the loop, which adds to the safety margin and also makes the display of the seekbar more inline with the current position. Lastly there is a catch statement added just in case everything else fails.\r\n\r\nBy the way, while it is not shown in your code, I am assuming seekBar is final so there is no need to check for null every time. Maybe move it to the top and exit if it is null.","title":"java.lang.illegalStateException randomly occurs when getting mediaPlayer.getCurrentPosition","body":"<p>In this code checks to see if the current position is before the end, and if so it waits 500ms, by which time it might be past the end! In fact for all practical purposes, it might reach the end just a moment after the check. This is not thread safe but there are synchronization solutions to mitigate this condition. I would suggest you use a simpler solution like this:</p>\n\n<pre><code>updateSeekBar = new Thread() {\n        @Override\n        public void run() {\n            int runtime = mediaPlayer.getDuration();\n            int currentPosition = 0;\n            int adv = 0;\n            while ((adv = ((adv = runtime - currentPosition) &lt; 500)?adv:500) &gt; 2) {\n                try {\n                    currentPosition = mediaPlayer.getCurrentPosition();\n                    if (seekBar != null) {\n                        seekBar.setProgress(currentPosition);\n                    }\n                    sleep(adv);    \n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                } catch (IllegalStateException e) {\n                    seekBar.setProgress(runtime);\n                    break;\n                }\n\n            }\n        }\n    };\n</code></pre>\n\n<p>This code first calculates the difference between the currentPosition and the duration and only if there is more than 2ms difference it will try to get the new current position (2ms is just an arbitrary number to add some safety margin while sacrificing 2ms of accuracy at the end.) Also sleep is moved to the end of the loop, which adds to the safety margin and also makes the display of the seekbar more inline with the current position. Lastly there is a catch statement added just in case everything else fails.</p>\n\n<p>By the way, while it is not shown in your code, I am assuming seekBar is final so there is no need to check for null every time. Maybe move it to the top and exit if it is null.</p>\n"},{"tags":[],"owner":{"account_id":5869143,"reputation":665,"user_id":4621980,"display_name":"Sanat Chandravanshi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1465884589,"creation_date":1465884589,"answer_id":37804162,"question_id":37606726,"body_markdown":"Please follow the state diagram:[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/qnX4K.gif\r\n\r\n\r\nYou will realize that you should call reset() to get it back to the idle state. Only then can you call setDataSource()","title":"java.lang.illegalStateException randomly occurs when getting mediaPlayer.getCurrentPosition","body":"<p>Please follow the state diagram:<a href=\"https://i.stack.imgur.com/qnX4K.gif\" rel=\"nofollow\">enter image description here</a></p>\n\n<p>You will realize that you should call reset() to get it back to the idle state. Only then can you call setDataSource()</p>\n"},{"tags":[],"owner":{"account_id":14333618,"reputation":76,"user_id":10353759,"display_name":"Bonnjalal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1588299203,"creation_date":1588299203,"answer_id":61535800,"question_id":37606726,"body_markdown":"Try this:\r\nreplace the `mMediaPlayer.start();` with this:\r\n\r\n    mMediaPlayer.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {\r\n                    @Override\r\n                    public void onPrepared(MediaPlayer mediaPlayer) {\r\n                        mMediaPlayer.start();\r\n                    }\r\n    });\r\n\r\n","title":"java.lang.illegalStateException randomly occurs when getting mediaPlayer.getCurrentPosition","body":"<p>Try this:\nreplace the <code>mMediaPlayer.start();</code> with this:</p>\n\n<pre><code>mMediaPlayer.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {\n                @Override\n                public void onPrepared(MediaPlayer mediaPlayer) {\n                    mMediaPlayer.start();\n                }\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21390158,"reputation":801,"user_id":15754377,"display_name":"Vivek Gupta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681063341,"creation_date":1681063341,"answer_id":75972066,"question_id":37606726,"body_markdown":"By making my custom mediaPlayer state (based of state diagram) , I was able to call getCurrentPosition() method without any exception. \r\nFor my audio Player, I created below states. \r\n\r\n    private enum class MediaPlayerState {\r\n        IDLE,\r\n        PLAYING,\r\n        PAUSED,\r\n        COMPLETED,\r\n        PREPARED\r\n    }\r\n\r\nThen created listener to change the States of my audioPlayer\r\n\r\n    private val prepareListener = MediaPlayer.OnPreparedListener {\r\n        Log.d(&quot;MyLog&quot;, &quot;Media State = PREPARED&quot;)\r\n        mediaState = MediaPlayerState.PREPARED\r\n        \r\n       }\r\n    private val onCompletedListener = MediaPlayer.OnCompletionListener {\r\n        Log.d(&quot;MyLog&quot;, &quot;Media State = Completed&quot;)\r\n        mediaState = MediaPlayerState.COMPLETED\r\n       }\r\n\r\nSo, I was able to play media only when mediaState variable is on Prepared State\r\n  \r\n\r\n    when(mediaState)\r\n     {\r\n       MediaPlayerState.COMPLETED, MediaPlayerState.PREPARED -&gt; {\r\n    \r\n          mediaPlayer.start()\r\n          mediaState = MediaPlayerState.PLAYING\r\n         }\r\n         ... \r\n         }\r\n                  \r\nSo when I release the media player, I changed the state to Idle\r\n\r\n     override fun onDetachedFromWindow() {\r\n        super.onDetachedFromWindow()\r\n        mediaState = MediaPlayerState.IDLE\r\n        mediaPlayer.release()\r\n        Log.d(&quot;MyLog&quot;, &quot;Media State = Released&quot;)\r\n\r\n    }\r\n\r\nThen when I call  getCurrentPosition on media , I check for the state ( on background thread )\r\n\r\n     if(mediaState == MediaPlayerState.PLAYING)\r\n                    seekBar.progress = mediaPlayer.currentPosition\r\n\r\nHence, No Illegal State Exception \r\n\r\nBy thinking in compose, changed the way of doing things..","title":"java.lang.illegalStateException randomly occurs when getting mediaPlayer.getCurrentPosition","body":"<p>By making my custom mediaPlayer state (based of state diagram) , I was able to call getCurrentPosition() method without any exception.\nFor my audio Player, I created below states.</p>\n<pre><code>private enum class MediaPlayerState {\n    IDLE,\n    PLAYING,\n    PAUSED,\n    COMPLETED,\n    PREPARED\n}\n</code></pre>\n<p>Then created listener to change the States of my audioPlayer</p>\n<pre><code>private val prepareListener = MediaPlayer.OnPreparedListener {\n    Log.d(&quot;MyLog&quot;, &quot;Media State = PREPARED&quot;)\n    mediaState = MediaPlayerState.PREPARED\n    \n   }\nprivate val onCompletedListener = MediaPlayer.OnCompletionListener {\n    Log.d(&quot;MyLog&quot;, &quot;Media State = Completed&quot;)\n    mediaState = MediaPlayerState.COMPLETED\n   }\n</code></pre>\n<p>So, I was able to play media only when mediaState variable is on Prepared State</p>\n<pre><code>when(mediaState)\n {\n   MediaPlayerState.COMPLETED, MediaPlayerState.PREPARED -&gt; {\n\n      mediaPlayer.start()\n      mediaState = MediaPlayerState.PLAYING\n     }\n     ... \n     }\n              \n</code></pre>\n<p>So when I release the media player, I changed the state to Idle</p>\n<pre><code> override fun onDetachedFromWindow() {\n    super.onDetachedFromWindow()\n    mediaState = MediaPlayerState.IDLE\n    mediaPlayer.release()\n    Log.d(&quot;MyLog&quot;, &quot;Media State = Released&quot;)\n\n}\n</code></pre>\n<p>Then when I call  getCurrentPosition on media , I check for the state ( on background thread )</p>\n<pre><code> if(mediaState == MediaPlayerState.PLAYING)\n                seekBar.progress = mediaPlayer.currentPosition\n</code></pre>\n<p>Hence, No Illegal State Exception</p>\n<p>By thinking in compose, changed the way of doing things..</p>\n"}],"owner":{"account_id":3336007,"reputation":1549,"user_id":2803557,"accept_rate":60,"display_name":"Skyyy"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7816,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"answer_count":8,"score":10,"last_activity_date":1681063341,"creation_date":1464932550,"question_id":37606726,"body_markdown":"This code works fine song play perfectly but some time randomly going to next song manually crashes application. Happens randomly\r\n\r\n        updateSeekBar = new Thread() {\r\n            @Override\r\n            public void run() {\r\n                int runtime = mediaPlayer.getDuration();\r\n                int currentPosition = 0;\r\n                while (currentPosition &lt; runtime) {\r\n                    try {\r\n                        sleep(500);\r\n                        currentPosition = mediaPlayer.getCurrentPosition();//This is where the app crash                        \r\n                        if (seekBar != null) {\r\n                            seekBar.setProgress(currentPosition);\r\n                        }\r\n                    } catch (InterruptedException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n\r\n                }\r\n            }\r\n        };\r\n\r\n\r\n\r\nCrash report\r\n\r\n    06-10 22:08:53.160 15351-15560/skydeveloper.me.musicx2 E/AndroidRuntime: FATAL EXCEPTION: Thread-6875\r\n                                                                         Process: skydeveloper.me.musicx2, PID: 15351\r\n                                                                         java.lang.IllegalStateException\r\n                                                                             at android.media.MediaPlayer.getCurrentPosition(Native Method)\r\n                                                                             at skydeveloper.me.musicx2.Player$1.run(Player.java:104)\r\n","title":"java.lang.illegalStateException randomly occurs when getting mediaPlayer.getCurrentPosition","body":"<p>This code works fine song play perfectly but some time randomly going to next song manually crashes application. Happens randomly</p>\n\n<pre><code>    updateSeekBar = new Thread() {\n        @Override\n        public void run() {\n            int runtime = mediaPlayer.getDuration();\n            int currentPosition = 0;\n            while (currentPosition &lt; runtime) {\n                try {\n                    sleep(500);\n                    currentPosition = mediaPlayer.getCurrentPosition();//This is where the app crash                        \n                    if (seekBar != null) {\n                        seekBar.setProgress(currentPosition);\n                    }\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n\n            }\n        }\n    };\n</code></pre>\n\n<p>Crash report</p>\n\n<pre><code>06-10 22:08:53.160 15351-15560/skydeveloper.me.musicx2 E/AndroidRuntime: FATAL EXCEPTION: Thread-6875\n                                                                     Process: skydeveloper.me.musicx2, PID: 15351\n                                                                     java.lang.IllegalStateException\n                                                                         at android.media.MediaPlayer.getCurrentPosition(Native Method)\n                                                                         at skydeveloper.me.musicx2.Player$1.run(Player.java:104)\n</code></pre>\n"},{"tags":["java","android","android-studio","locale"],"comments":[{"owner":{"account_id":6471701,"reputation":493,"user_id":9752602,"display_name":"sneharc"},"score":1,"creation_date":1659954549,"post_id":68298424,"comment_id":129409675,"body_markdown":"did you find any solution? I&#39;m facing the same issue","body":"did you find any solution? I&#39;m facing the same issue"},{"owner":{"account_id":7626975,"reputation":309,"user_id":5783147,"display_name":"AkshayK"},"score":0,"creation_date":1660908896,"post_id":68298424,"comment_id":129650545,"body_markdown":"I think this will help you\nhttps://stackoverflow.com/a/52733674/5783147","body":"I think this will help you <a href=\"https://stackoverflow.com/a/52733674/5783147\">stackoverflow.com/a/52733674/5783147</a>"},{"owner":{"account_id":3821169,"reputation":763,"user_id":3169238,"display_name":"Sergei Kozelko"},"score":0,"creation_date":1681097881,"post_id":68298424,"comment_id":133998540,"body_markdown":"Does this answer your question? [Android App Bundle with in-app locale change](https://stackoverflow.com/questions/52731670/android-app-bundle-with-in-app-locale-change)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/52731670/android-app-bundle-with-in-app-locale-change\">Android App Bundle with in-app locale change</a>"}],"answers":[{"tags":[],"owner":{"account_id":23396202,"reputation":1,"user_id":17460191,"display_name":"Maksudur Rahman Munif"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681063060,"creation_date":1680552224,"answer_id":75923364,"question_id":68298424,"body_markdown":"Add this to your app gradle \r\n```\r\nandroid {\r\n    bundle {\r\n        language {\r\n            enableSplit = false\r\n        }\r\n    }\r\n}\r\n```\r\nDetails at [this thread](https://stackoverflow.com/questions/52731670/android-app-bundle-with-in-app-locale-change/52733674#52733674)","title":"Android App Locale Not Working on Play Store Release","body":"<p>Add this to your app gradle</p>\n<pre><code>android {\n    bundle {\n        language {\n            enableSplit = false\n        }\n    }\n}\n</code></pre>\n<p>Details at <a href=\"https://stackoverflow.com/questions/52731670/android-app-bundle-with-in-app-locale-change/52733674#52733674\">this thread</a></p>\n"}],"owner":{"account_id":21986078,"reputation":73,"user_id":16260318,"display_name":"Jay Gunawardena"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1128,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":1,"score":6,"last_activity_date":1681063060,"creation_date":1625734258,"question_id":68298424,"body_markdown":"I&#39;m changing the app locale at the press of a button. Which works perfect on AVDs as well as debug &amp; release build APKs on actual devices with API 30.\r\n\r\nBut however it is not working with the Play Store version of the app once it is published. The locale never gets changed.\r\n\r\nPlease help! Thank you!\r\n\r\nThis is the code in the SettingsFragment:\r\n\r\n    private void setAppLocale(Context context, String language) {\r\n        Locale locale = new Locale(language);\r\n        Locale.setDefault(locale);\r\n        Configuration config = context.getResources().getConfiguration();\r\n        config.setLocale(locale);\r\n        context.createConfigurationContext(config);\r\n        context.getResources().updateConfiguration(config, context.getResources().getDisplayMetrics());\r\n        Intent refresh = new Intent(getActivity().getApplicationContext(), MainActivity.class);\r\n        startActivity(refresh);\r\n        getActivity().finish();\r\n    }\r\n\r\nThe above gets called once a button is pressed as well as the selections gets put in Shared Preferences. The activity gets refreshed &amp; the main activity loads but the locale is never changed.\r\n\r\nThis is how my MainActivity looks like:\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n\r\n        hideSystemUI();\r\n\r\n        sharedPref = getPreferences(Context.MODE_PRIVATE);\r\n        selectedLanguage = sharedPref.getString(&quot;Test.SL.LanguageName&quot;, language);\r\n        selectedTheme = sharedPref.getString(&quot;Test.SL.ThemeName&quot;, &quot;Light&quot;);\r\n\r\n        if (selectedTheme.equals(&quot;Light&quot;)){\r\n            AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_NO);\r\n        } else if (selectedTheme.equals(&quot;Dark&quot;)) {\r\n            AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_YES);\r\n        }\r\n\r\n        if (selectedLanguage.equals(&quot;Sinhala&quot;)) {\r\n            language = &quot;Sinhala&quot;;\r\n            setAppLocale(this, &quot;si&quot;);\r\n        } else {\r\n            language = &quot;English&quot;;\r\n            setAppLocale(this, &quot;en&quot;);\r\n        }\r\n\r\n        binding = ActivityMainBinding.inflate(getLayoutInflater());\r\n        setContentView(binding.getRoot());\r\n\r\n        setSupportActionBar(binding.appBarMain.toolbar);\r\n        \r\n           ......\r\n\r\n    }\r\n\r\n    public void setAppLocale(Context context, String language) {\r\n        Locale locale = new Locale(language);\r\n        Locale.setDefault(locale);\r\n        Configuration config = context.getResources().getConfiguration();\r\n        config.setLocale(locale);\r\n        context.createConfigurationContext(config);\r\n        context.getResources().updateConfiguration(config, context.getResources().getDisplayMetrics());\r\n    }\r\n\r\nAny ideas, suggestions &amp; solutions please! Thank you again!","title":"Android App Locale Not Working on Play Store Release","body":"<p>I'm changing the app locale at the press of a button. Which works perfect on AVDs as well as debug &amp; release build APKs on actual devices with API 30.</p>\n<p>But however it is not working with the Play Store version of the app once it is published. The locale never gets changed.</p>\n<p>Please help! Thank you!</p>\n<p>This is the code in the SettingsFragment:</p>\n<pre><code>private void setAppLocale(Context context, String language) {\n    Locale locale = new Locale(language);\n    Locale.setDefault(locale);\n    Configuration config = context.getResources().getConfiguration();\n    config.setLocale(locale);\n    context.createConfigurationContext(config);\n    context.getResources().updateConfiguration(config, context.getResources().getDisplayMetrics());\n    Intent refresh = new Intent(getActivity().getApplicationContext(), MainActivity.class);\n    startActivity(refresh);\n    getActivity().finish();\n}\n</code></pre>\n<p>The above gets called once a button is pressed as well as the selections gets put in Shared Preferences. The activity gets refreshed &amp; the main activity loads but the locale is never changed.</p>\n<p>This is how my MainActivity looks like:</p>\n<pre><code>@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n\n    hideSystemUI();\n\n    sharedPref = getPreferences(Context.MODE_PRIVATE);\n    selectedLanguage = sharedPref.getString(&quot;Test.SL.LanguageName&quot;, language);\n    selectedTheme = sharedPref.getString(&quot;Test.SL.ThemeName&quot;, &quot;Light&quot;);\n\n    if (selectedTheme.equals(&quot;Light&quot;)){\n        AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_NO);\n    } else if (selectedTheme.equals(&quot;Dark&quot;)) {\n        AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_YES);\n    }\n\n    if (selectedLanguage.equals(&quot;Sinhala&quot;)) {\n        language = &quot;Sinhala&quot;;\n        setAppLocale(this, &quot;si&quot;);\n    } else {\n        language = &quot;English&quot;;\n        setAppLocale(this, &quot;en&quot;);\n    }\n\n    binding = ActivityMainBinding.inflate(getLayoutInflater());\n    setContentView(binding.getRoot());\n\n    setSupportActionBar(binding.appBarMain.toolbar);\n    \n       ......\n\n}\n\npublic void setAppLocale(Context context, String language) {\n    Locale locale = new Locale(language);\n    Locale.setDefault(locale);\n    Configuration config = context.getResources().getConfiguration();\n    config.setLocale(locale);\n    context.createConfigurationContext(config);\n    context.getResources().updateConfiguration(config, context.getResources().getDisplayMetrics());\n}\n</code></pre>\n<p>Any ideas, suggestions &amp; solutions please! Thank you again!</p>\n"},{"tags":["java","android-studio","opencv","image-processing"],"comments":[{"owner":{"account_id":17547232,"reputation":5322,"user_id":12728244,"display_name":"stateMachine"},"score":0,"creation_date":1681063621,"post_id":75971996,"comment_id":133995131,"body_markdown":"Sounds like you are cropping the image you are drawing onto. Either do not draw to it before cropping or create a deep copy before drawing the info and crop that image instead.","body":"Sounds like you are cropping the image you are drawing onto. Either do not draw to it before cropping or create a deep copy before drawing the info and crop that image instead."}],"owner":{"account_id":27882245,"reputation":11,"user_id":21290464,"display_name":"UncannyHarmony"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681062221,"creation_date":1681062221,"question_id":75971996,"body_markdown":"I&#39;m unable to crop the ROI  into the original  image after finding rectangle boundaries. Instead of showing the cropped image, it displays the contour and rectangle boundary instead. My main goal is to crop inner square from the circular sample for further processing using Pythagorean Theorem: the diagonal of a square is root of 2 times the lenghth of a side. Please help as I&#39;m new to openCV\r\n\r\n```\r\n\r\n  public void imageProcessingAlgorithm (){\r\n      new Thread(new Runnable() {\r\n          @Override\r\n          public void run() {\r\n              long tStart = System.currentTimeMillis();\r\n              countWBC = 0;\r\n              countRBC = 0;\r\n\r\n              //Convert the Bitmap image to Mat\r\n              //Utils.bitmapToMat converts an Android Bitmap to an OpenCV Mat.\r\n              Mat oriImage = new Mat();\r\n              Utils.bitmapToMat(processBitmap, oriImage);\r\n              //Imgproc.cvtColor(oriImage, oriImage, Imgproc.COLOR_RGBA2RGB);\r\n\r\n              //Grayscale image\r\n              Mat grayscale = new Mat();\r\n              Imgproc.cvtColor(oriImage,grayscale, Imgproc.COLOR_RGB2GRAY);\r\n\r\n              //Otsu Thresholding (Binary Image)\r\n              Mat otsuThreshold = new Mat();\r\n              Imgproc.threshold(grayscale, otsuThreshold ,0,255, Imgproc.THRESH_OTSU);\r\n\r\n              //Contour finding\r\n              List&lt;MatOfPoint&gt; contours = new ArrayList&lt;MatOfPoint&gt;(); //list for contours\r\n              Imgproc.findContours(otsuThreshold, contours, new Mat(), Imgproc.RETR_LIST, Imgproc.CHAIN_APPROX_NONE);\r\n              //Mat drawing = new Mat(otsuThreshold.size(), CvType.CV_8UC3);\r\n\r\n              Mat hierarchy = new Mat();\r\n              Rect rect = new Rect();\r\n              int xBound =0;\r\n              int yBound =0;\r\n              int xWidth =0;\r\n              int yHeight =0;\r\n              int radius = 0;\r\n\r\n              for (int idx = 0; idx &lt; contours.size(); idx++) {\r\n                  Mat contour = contours.get(idx);\r\n                  List&lt;Double&gt; areasList = new ArrayList&lt;Double&gt;(); //list for area\r\n                  double contourarea = Imgproc.contourArea(contour);\r\n                  areasList.add(contourarea);\r\n                  //POint2f means 2D coordinates\r\n                  MatOfPoint2f approxCurve = new MatOfPoint2f();\r\n                  MatOfPoint2f contour2f = new MatOfPoint2f(contours.get(idx).toArray());\r\n                  double approxDistance = Imgproc.arcLength(contour2f, true) * 0.02;\r\n                  Imgproc.approxPolyDP(contour2f, approxCurve, approxDistance, true);\r\n                  MatOfPoint points = new MatOfPoint(approxCurve.toArray());\r\n                  rect = Imgproc.boundingRect(points);\r\n                  if (contourarea &gt; 100000) {\r\n\r\n                      //Contour Drawing + Bounding Box\r\n                      xBound = rect.x;\r\n                      yBound = rect.y;\r\n                      xWidth = rect.width;\r\n                      yHeight = rect.height;\r\n                      //to Draw contour(colour is in Red)\r\n                      Imgproc.drawContours(oriImage, contours, idx, new Scalar(255, 0, 0), 2, 8, hierarchy, 0, new Point());\r\n                      //to Draw Outer Bounding rectangle(colour is in Green)\r\n                      Imgproc.rectangle(oriImage, new Point(rect.x, rect.y),\r\n                              new Point(rect.x + rect.width, rect.y + rect.height), new Scalar(0, 255, 0), 3);\r\n                      if (rect.height &gt; rect.width)\r\n                          radius = rect.width/2;\r\n                      else\r\n                          radius = rect.height/2;\r\n                  }\r\n              }\r\n\r\n              //To find internal boundary to crop image\r\n              radius = (int)(radius*0.70711);\r\n              int xPos = xBound+(xWidth/2)-radius;\r\n              int yPos = yBound+(yHeight/2)-radius;\r\n              Rect reg_info = new Rect(xPos,yPos,radius*2,radius*2);\r\n              Mat roi = oriImage.submat(reg_info);\r\n\r\n\r\n\r\n              // CIELab conversion\r\n\r\n              long tEnd = System.currentTimeMillis();\r\n          long tDelta = tEnd - tStart;\r\n          elapsedSeconds = tDelta/1000.0 ;\r\n\r\n          //To convert the Mat object back to Bitmap\r\n          Utils.matToBitmap(roi,processBitmap);\r\n\r\n\r\n        runOnUiThread(new Runnable() {\r\n\r\n            @Override\r\n            public void run() {\r\n                invalidateOptionsMenu();\r\n                PhotoView myImage = (PhotoView) findViewById(R.id.resultImage);\r\n                myImage.setImageBitmap(processBitmap);\r\n                db.updateResult(new SampleViewList(fileName,folderName,countRBC,countWBC,String.valueOf(elapsedSeconds),getDate()));\r\n                getImage = db.getImgView(fileName);\r\n                showResult();\r\n                try{\r\n                    FileOutputStream fOut = new FileOutputStream(resultImagedir);\r\n                    processBitmap.compress(Bitmap.CompressFormat.JPEG, 100, fOut);\r\n                    try{\r\n                        fOut.flush();\r\n                        fOut.close();\r\n                    } catch (IOException E){\r\n                        E.printStackTrace();\r\n                    }\r\n                } catch (FileNotFoundException e){\r\n                    e.printStackTrace();\r\n                }\r\n\r\n  }\r\n\r\n  });\r\n          }\r\n}).start();\r\n  }\r\n```\r\n\r\n[![enter image description here](https://i.stack.imgur.com/dTf2f.png)](https://i.stack.imgur.com/dTf2f.png)\r\n\r\nresult image on RHS","title":"Unable to crop the ROI from original image","body":"<p>I'm unable to crop the ROI  into the original  image after finding rectangle boundaries. Instead of showing the cropped image, it displays the contour and rectangle boundary instead. My main goal is to crop inner square from the circular sample for further processing using Pythagorean Theorem: the diagonal of a square is root of 2 times the lenghth of a side. Please help as I'm new to openCV</p>\n<pre><code>\n  public void imageProcessingAlgorithm (){\n      new Thread(new Runnable() {\n          @Override\n          public void run() {\n              long tStart = System.currentTimeMillis();\n              countWBC = 0;\n              countRBC = 0;\n\n              //Convert the Bitmap image to Mat\n              //Utils.bitmapToMat converts an Android Bitmap to an OpenCV Mat.\n              Mat oriImage = new Mat();\n              Utils.bitmapToMat(processBitmap, oriImage);\n              //Imgproc.cvtColor(oriImage, oriImage, Imgproc.COLOR_RGBA2RGB);\n\n              //Grayscale image\n              Mat grayscale = new Mat();\n              Imgproc.cvtColor(oriImage,grayscale, Imgproc.COLOR_RGB2GRAY);\n\n              //Otsu Thresholding (Binary Image)\n              Mat otsuThreshold = new Mat();\n              Imgproc.threshold(grayscale, otsuThreshold ,0,255, Imgproc.THRESH_OTSU);\n\n              //Contour finding\n              List&lt;MatOfPoint&gt; contours = new ArrayList&lt;MatOfPoint&gt;(); //list for contours\n              Imgproc.findContours(otsuThreshold, contours, new Mat(), Imgproc.RETR_LIST, Imgproc.CHAIN_APPROX_NONE);\n              //Mat drawing = new Mat(otsuThreshold.size(), CvType.CV_8UC3);\n\n              Mat hierarchy = new Mat();\n              Rect rect = new Rect();\n              int xBound =0;\n              int yBound =0;\n              int xWidth =0;\n              int yHeight =0;\n              int radius = 0;\n\n              for (int idx = 0; idx &lt; contours.size(); idx++) {\n                  Mat contour = contours.get(idx);\n                  List&lt;Double&gt; areasList = new ArrayList&lt;Double&gt;(); //list for area\n                  double contourarea = Imgproc.contourArea(contour);\n                  areasList.add(contourarea);\n                  //POint2f means 2D coordinates\n                  MatOfPoint2f approxCurve = new MatOfPoint2f();\n                  MatOfPoint2f contour2f = new MatOfPoint2f(contours.get(idx).toArray());\n                  double approxDistance = Imgproc.arcLength(contour2f, true) * 0.02;\n                  Imgproc.approxPolyDP(contour2f, approxCurve, approxDistance, true);\n                  MatOfPoint points = new MatOfPoint(approxCurve.toArray());\n                  rect = Imgproc.boundingRect(points);\n                  if (contourarea &gt; 100000) {\n\n                      //Contour Drawing + Bounding Box\n                      xBound = rect.x;\n                      yBound = rect.y;\n                      xWidth = rect.width;\n                      yHeight = rect.height;\n                      //to Draw contour(colour is in Red)\n                      Imgproc.drawContours(oriImage, contours, idx, new Scalar(255, 0, 0), 2, 8, hierarchy, 0, new Point());\n                      //to Draw Outer Bounding rectangle(colour is in Green)\n                      Imgproc.rectangle(oriImage, new Point(rect.x, rect.y),\n                              new Point(rect.x + rect.width, rect.y + rect.height), new Scalar(0, 255, 0), 3);\n                      if (rect.height &gt; rect.width)\n                          radius = rect.width/2;\n                      else\n                          radius = rect.height/2;\n                  }\n              }\n\n              //To find internal boundary to crop image\n              radius = (int)(radius*0.70711);\n              int xPos = xBound+(xWidth/2)-radius;\n              int yPos = yBound+(yHeight/2)-radius;\n              Rect reg_info = new Rect(xPos,yPos,radius*2,radius*2);\n              Mat roi = oriImage.submat(reg_info);\n\n\n\n              // CIELab conversion\n\n              long tEnd = System.currentTimeMillis();\n          long tDelta = tEnd - tStart;\n          elapsedSeconds = tDelta/1000.0 ;\n\n          //To convert the Mat object back to Bitmap\n          Utils.matToBitmap(roi,processBitmap);\n\n\n        runOnUiThread(new Runnable() {\n\n            @Override\n            public void run() {\n                invalidateOptionsMenu();\n                PhotoView myImage = (PhotoView) findViewById(R.id.resultImage);\n                myImage.setImageBitmap(processBitmap);\n                db.updateResult(new SampleViewList(fileName,folderName,countRBC,countWBC,String.valueOf(elapsedSeconds),getDate()));\n                getImage = db.getImgView(fileName);\n                showResult();\n                try{\n                    FileOutputStream fOut = new FileOutputStream(resultImagedir);\n                    processBitmap.compress(Bitmap.CompressFormat.JPEG, 100, fOut);\n                    try{\n                        fOut.flush();\n                        fOut.close();\n                    } catch (IOException E){\n                        E.printStackTrace();\n                    }\n                } catch (FileNotFoundException e){\n                    e.printStackTrace();\n                }\n\n  }\n\n  });\n          }\n}).start();\n  }\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/dTf2f.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dTf2f.png\" alt=\"enter image description here\" /></a></p>\n<p>result image on RHS</p>\n"},{"tags":["java","spring","spring-webflux"],"owner":{"account_id":26038502,"reputation":95,"user_id":19743660,"display_name":"programmer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":100,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1681062067,"creation_date":1681062067,"question_id":75971990,"body_markdown":"I am trying to filter multipart/form-data content, but don&#39;t know how to get access to request body. I found DefaultPartHttpMessageReader class, but for now I have no idea how to parse content using it.","title":"How to read multipart/form-data content from request body in Spring WebFlux filter?","body":"<p>I am trying to filter multipart/form-data content, but don't know how to get access to request body. I found DefaultPartHttpMessageReader class, but for now I have no idea how to parse content using it.</p>\n"},{"tags":["java","lucene"],"comments":[{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1681003941,"post_id":75968156,"comment_id":133989227,"body_markdown":"What version of Lucene are you using? How have you created the documents you are using (so we can see what fields you have defined - and how you have defined them).","body":"What version of Lucene are you using? How have you created the documents you are using (so we can see what fields you have defined - and how you have defined them)."},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1681004047,"post_id":75968156,"comment_id":133989235,"body_markdown":"I would expect you to use [`document.getFields()`](https://lucene.apache.org/core/9_5_0/core/org/apache/lucene/document/Document.html#getFields()) given you want fields for specific documents - and bear in mind that fields set to `Field.Store.NO` are _not_ stored in any specific document, in the index. It&#39;s the difference between &quot;fields for the document&quot; (what I think you are asking for) and &quot;documents for the field&quot;.","body":"I would expect you to use <a href=\"https://lucene.apache.org/core/9_5_0/core/org/apache/lucene/document/Document.html#getFields()\" rel=\"nofollow noreferrer\"><code>document.getFields()</code></a> given you want fields for specific documents - and bear in mind that fields set to <code>Field.Store.NO</code> are <i>not</i> stored in any specific document, in the index. It&#39;s the difference between &quot;fields for the document&quot; (what I think you are asking for) and &quot;documents for the field&quot;."},{"owner":{"account_id":26976979,"reputation":33,"user_id":20541994,"display_name":"David"},"score":0,"creation_date":1681033731,"post_id":75968156,"comment_id":133991529,"body_markdown":"I am using Lucene 9.4.2","body":"I am using Lucene 9.4.2"},{"owner":{"account_id":26976979,"reputation":33,"user_id":20541994,"display_name":"David"},"score":0,"creation_date":1681034032,"post_id":75968156,"comment_id":133991561,"body_markdown":"I have edited my question and added the code I use to index each document.","body":"I have edited my question and added the code I use to index each document."}],"answers":[{"tags":[],"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681061326,"creation_date":1681061326,"answer_id":75971944,"question_id":75968156,"body_markdown":"You want to print specific field data:\r\n\r\n&gt; &quot;_from the documents between two docIDs_&quot;\r\n\r\nThe missing example you specifically mentioned was **&quot;file type&quot;** - for example:\r\n\r\n```java\r\ndoc.add(new StringField(&quot;type&quot;, &quot;isDirectory&quot;, Field.Store.YES));\r\n```\r\n\r\nYour code is expecting to be able to access this field using:\r\n\r\n```java\r\nFields fields = reader.getTermVectors(id);\r\n```\r\n\r\nBut the `type` field is not a term vector. It&#39;s a [StringField](https://lucene.apache.org/core/9_4_2/core/org/apache/lucene/document/StringField.html), which is:\r\n\r\n&gt; A field that is indexed but not tokenized: the entire String value is indexed as a single token.\r\n\r\nInstead you can get this field using the following:\r\n\r\n```java\r\nreader.document(id).getFields()\r\n```\r\n\r\nFor example (I chose to use a `forEach` here - but you can use your loop also):\r\n\r\n```java\r\nfor (int id = 0; id &lt; 1; id++) {\r\n    reader.document(id).getFields()\r\n        .forEach(field -&gt; System.out.println(field.name() \r\n        + &quot; - &quot; + field.stringValue()));\r\n}\r\n```\r\n\r\nFor my `type` example, the above code prints:\r\n\r\n    type - isDirectory\r\n\r\n---\r\n\r\nThank you for the edits to your question. It&#39;s difficult to use these edits, as they do not provide a [mre](https://stackoverflow.com/help/minimal-reproducible-example) - there are references to other methods, whereas some hard-coded data would probably be more helpful - for example, like my sample:\r\n\r\n    doc.add(new StringField(&quot;type&quot;, &quot;isDirectory&quot;, Field.Store.YES));\r\n\r\nThis is self-contained and does not rely on any files or other methods not shown in your question.\r\n\r\nIf there are additional missing fields in your output, you can take a look at what types of fields those are - and maybe provide a hard-coded data example.\r\n\r\nIt may even be worth asking a new, more focused question for these.","title":"How can I print all terms from a Lucene Document?","body":"<p>You want to print specific field data:</p>\n<blockquote>\n<p>&quot;<em>from the documents between two docIDs</em>&quot;</p>\n</blockquote>\n<p>The missing example you specifically mentioned was <strong>&quot;file type&quot;</strong> - for example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>doc.add(new StringField(&quot;type&quot;, &quot;isDirectory&quot;, Field.Store.YES));\n</code></pre>\n<p>Your code is expecting to be able to access this field using:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Fields fields = reader.getTermVectors(id);\n</code></pre>\n<p>But the <code>type</code> field is not a term vector. It's a <a href=\"https://lucene.apache.org/core/9_4_2/core/org/apache/lucene/document/StringField.html\" rel=\"nofollow noreferrer\">StringField</a>, which is:</p>\n<blockquote>\n<p>A field that is indexed but not tokenized: the entire String value is indexed as a single token.</p>\n</blockquote>\n<p>Instead you can get this field using the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>reader.document(id).getFields()\n</code></pre>\n<p>For example (I chose to use a <code>forEach</code> here - but you can use your loop also):</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (int id = 0; id &lt; 1; id++) {\n    reader.document(id).getFields()\n        .forEach(field -&gt; System.out.println(field.name() \n        + &quot; - &quot; + field.stringValue()));\n}\n</code></pre>\n<p>For my <code>type</code> example, the above code prints:</p>\n<pre><code>type - isDirectory\n</code></pre>\n<hr />\n<p>Thank you for the edits to your question. It's difficult to use these edits, as they do not provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">mre</a> - there are references to other methods, whereas some hard-coded data would probably be more helpful - for example, like my sample:</p>\n<pre><code>doc.add(new StringField(&quot;type&quot;, &quot;isDirectory&quot;, Field.Store.YES));\n</code></pre>\n<p>This is self-contained and does not rely on any files or other methods not shown in your question.</p>\n<p>If there are additional missing fields in your output, you can take a look at what types of fields those are - and maybe provide a hard-coded data example.</p>\n<p>It may even be worth asking a new, more focused question for these.</p>\n"}],"owner":{"account_id":26976979,"reputation":33,"user_id":20541994,"display_name":"David"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":215,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75971944,"answer_count":1,"score":0,"last_activity_date":1681061326,"creation_date":1680997597,"question_id":75968156,"body_markdown":"I am trying to print all terms from the documents between two docID. But some terms that I had indexed aren&#39;t printed.\r\n\r\nSorry because some things are written in Spain due to it&#39;s a project for my spanish university.\r\n\r\nI have this code:\r\n\r\n```\r\npackage simpledemo;\r\n\r\nimport java.nio.file.Paths;\r\nimport java.util.List;\r\nimport java.util.ArrayList;\r\n\r\nimport org.apache.lucene.index.IndexReader;\r\nimport org.apache.lucene.index.Term;\r\nimport org.apache.lucene.index.Terms;\r\nimport org.apache.lucene.index.TermsEnum;\r\nimport org.apache.lucene.index.Fields;\r\nimport org.apache.lucene.search.IndexSearcher;\r\nimport org.apache.lucene.search.similarities.Similarity;\r\nimport org.apache.lucene.document.Document;\r\nimport org.apache.lucene.index.DirectoryReader;\r\nimport org.apache.lucene.store.FSDirectory;\r\nimport org.apache.lucene.util.BytesRef;\r\n//import org.apache.lucene.search.similarities.DefaultSimilarity; // FIXME No se pq no detecta esto si aparece en el API de Lucene\r\n\r\npublic class TopTermsInDocs {\r\n\r\n\r\n    public static void main(String[] args) {\r\n        // TODO Poner bien el paquete al que pertenece cd ordenemos el codigo\r\n        String usage = &quot;simpledemo.TopTermsInDocs&quot;\r\n        + &quot;[-index INDEX_PATH] [-docID INT1-INT2] [-top N] [-outfile PATH]\\n&quot;\r\n        + &quot;The result will be displayed on screen and in a file to be indicated in&quot;\r\n        + &quot;the -outfile path argument, will show for each document its&quot;\r\n        + &quot;docId and the top n terms with its tf, df and tf x idflog10&quot;;\r\n\r\n        String indexPath = null; // TODO mirar si poner uno por defecto o hacer que falle\r\n        String[] range = null;\r\n        Integer docIdStart = null;\r\n        Integer docIdEnd = null;\r\n        Integer topN = null;\r\n        String outPath = null;\r\n        System.out.println(usage);\r\n\r\n        for (int i = 0; i &lt; args.length; i++) {\r\n            switch(args[i]) {\r\n                case &quot;-index&quot;: \r\n                    indexPath = args[++i];\r\n                    break;\r\n                case &quot;-docID&quot;:\r\n                    range = args[++i].split(&quot;-&quot;);\r\n                    docIdStart = Integer.parseInt(range[0]);\r\n                    docIdEnd = Integer.parseInt(range[1]);\r\n                    break;\r\n                case &quot;-top&quot;:\r\n                    topN = Integer.parseInt(args[++i]);\r\n                    break;\r\n                case &quot;-outfile&quot;:\r\n                    outPath = args[++i];\r\n            } \r\n        }\r\n        IndexReader reader = null; //Ls inicializo aqui a null pq sino no los voy a poder usar fuera del try\r\n        // FIXME descomentar cd lo reconozca       DefaultSimilarity similarity = new DefaultSimilarity();\r\n        try {\r\n            reader = DirectoryReader.open(FSDirectory.open(Paths.get(indexPath)));\r\n\r\n            int numDocs = reader.numDocs(); // Numero de documentos total\r\n\r\n            for(int id = docIdStart; id&lt;docIdEnd; id++) {\r\n                System.out.println(&quot;Voy a printear el docID: &quot; + id);\r\n                Fields fields = reader.getTermVectors(id); //Obtengo todos los terminos del documento\r\n\r\n                for (String fieldName : fields) {\r\n                    Terms terms = fields.terms(fieldName);\r\n                    TermsEnum termsEnum = terms.iterator();\r\n                    BytesRef term = null;\r\n\r\n                    while((term = termsEnum.next()) != null) {\r\n                        String termText = term.utf8ToString();\r\n                        long termFreq = termsEnum.totalTermFreq(); //Frecuencia total del termino\r\n                        int docFreq = termsEnum.docFreq(); //Frecuencia de documento\r\n                        int tf = (int) Math.round(termFreq / docFreq); //Frecuencia del termino en el documento\r\n                        // FIXME descomentar cd lo reconozca    double idf = similarity.idf(docFreq, numDocs);\r\n                        int idf = (int) Math.log(numDocs/(docFreq+1)) + 1;\r\n                        System.out.println(&quot;Campo: &quot; + fieldName + &quot; - T&#233;rmino: &quot; + termText + &quot; - tf: &quot; + tf + &quot; - idf: &quot; + idf);\r\n                        //TODO primero probar si funciona y si funciona puedo hacer una funcion que devuelva una estructura con todo\r\n                    }\r\n\r\n                }\r\n\r\n                System.out.println(&quot;\\n\\n&quot;);\r\n            }\r\n\r\n        } catch (Exception e) {\r\n            // TODO: handle exception\r\n        }\r\n\r\n\r\n\r\n\r\n\r\n\r\n    }\r\n}\r\n```\r\n\r\nI know -top and -outfile options aren&#39;t implemented for the moment. But it doesn&#39;t matter for the problem.\r\n\r\nWhen I execute it for a single document it shows:\r\n\r\n```\r\nCampo: LastModifiedTimeLucene - T&#233;rmino: 20230408150702014 - tf: 1 - idf: 2\r\nCampo: contents - T&#233;rmino: david - tf: 1 - idf: 2\r\nCampo: contents - T&#233;rmino: hola2 - tf: 1 - idf: 2\r\nCampo: contents - T&#233;rmino: txt - tf: 1 - idf: 2\r\nCampo: creationTime - T&#233;rmino: 2023-04-08 17:07:02 - tf: 1 - idf: 2\r\nCampo: creationTimeLucene - T&#233;rmino: 20230408150702014 - tf: 1 - idf: 2\r\nCampo: lastAccessTime - T&#233;rmino: 2023-04-09 01:10:26 - tf: 1 - idf: 2\r\nCampo: lastAccessTimeLucene - T&#233;rmino: 20230408231026954 - tf: 1 - idf: 2\r\nCampo: lastModifiedTime - T&#233;rmino: 2023-04-08 17:07:02 - tf: 1 - idf: 2\r\n```\r\n\r\nAbout the creation of the documents I have this function: \r\n```/** Indexes a single document */\r\n    void indexDoc(IndexWriter writer, Path file, long lastModified) throws IOException {\r\n    \tSystem.out.println(file.getFileName().toString());\r\n        // TODO A&#241;adir la funcionalidad de onlyLines\r\n        if(config.validateFile(file.getFileName().toString()))\r\n        {\r\n            try (InputStream stream = Files.newInputStream(file)) {\r\n                // make a new, empty document\r\n                Document doc = new Document();\r\n                \r\n                // Add the path of the file as a field named &quot;path&quot;. Use a\r\n                // field that is indexed (i.e. searchable), but don&#39;t tokenize\r\n                // the field into separate words and don&#39;t index term frequency\r\n                // or positional information:\r\n                Field pathField = new StringField(&quot;path&quot;, file.toString(), Field.Store.YES);\r\n                doc.add(pathField);\r\n                \r\n                String contents = obtainContents(stream);\r\n                \r\n                FieldType tmp_field_type = new FieldType();\r\n                \r\n                tmp_field_type.setTokenized(true);\r\n                tmp_field_type.setIndexOptions(IndexOptions.DOCS_AND_FREQS_AND_POSITIONS_AND_OFFSETS);\r\n                tmp_field_type.setStoreTermVectors(contentsTermVectors);\r\n                tmp_field_type.setStoreTermVectorPositions(contentsTermVectors);\r\n                tmp_field_type.setStored(contentsStored);\r\n                tmp_field_type.freeze();\r\n                \r\n                // Add the contents of the file to a field named &quot;contents&quot;. Specify a Reader,\r\n                // so that the text of the file is tokenized and indexed, but not stored.\r\n                // Note that FileReader expects the file to be in UTF-8 encoding.\r\n                // If that&#39;s not the case searching for special characters will fail.\r\n                \r\n                Field contentsField = new Field(&quot;contents&quot;, contents, tmp_field_type);\r\n                doc.add(contentsField);\r\n\r\n                // TODO Extender documentacion\r\n                Field hostnameField = new StringField(&quot;hostname&quot;, InetAddress.getLocalHost().getHostName(), Field.Store.YES);\r\n                doc.add(hostnameField);\r\n    \r\n                // TODO Extender documentacion\r\n                Field threadField = new StringField(&quot;thread&quot;, Thread.currentThread().getName(), Field.Store.YES);\r\n                doc.add(threadField);\r\n                \r\n                // TODO Extender documentacion\r\n                \r\n                BasicFileAttributes at = Files.readAttributes(file, BasicFileAttributes.class);\r\n                String type;\r\n                if (at.isDirectory()) type = &quot;isDirectory&quot;;\r\n                else if (at.isRegularFile()) type = &quot;isRegularFile&quot;;\r\n                else if (at.isSymbolicLink()) type = &quot;iSSymbolicLink&quot;;\r\n                else if (at.isOther()) type = &quot;isOther&quot;;\r\n                else type = &quot;error&quot;;\r\n\r\n                doc.add(new StringField(&quot;type&quot;, type, Field.Store.YES));\r\n                \r\n                // TODO Extender documentacion\r\n                \r\n                doc.add(new LongPoint(&quot;sizeKB&quot;, at.size())); // ! CUIDAO\r\n                doc.add(new StoredField(&quot;sizeKB&quot;, at.size()));\r\n\r\n                // Add the last modified date of the file a field named &quot;modified&quot;.\r\n                // Use a LongPoint that is indexed (i.e. efficiently filterable with\r\n                // PointRangeQuery). This indexes to milli-second resolution, which\r\n                // is often too fine. You could instead create a number based on\r\n                // year/month/day/hour/minutes/seconds, down the resolution you require.\r\n                // For example the long value 2011021714 would mean\r\n                // February 17, 2011, 2-3 PM.\r\n                doc.add(new LongPoint(&quot;modified&quot;, lastModified));\r\n                doc.add(new StoredField(&quot;modified&quot;, lastModified));\r\n    \r\n                \r\n                String dateFormat = &quot;yyyy-MM-dd HH:mm:ss&quot;;\r\n                SimpleDateFormat simpleDateFormat = new SimpleDateFormat(dateFormat);\r\n\r\n                FileTime creationTime = at.creationTime();\r\n                String creationTimeFormateado = simpleDateFormat.format(new Date(creationTime.toMillis()));\r\n                doc.add(new Field(&quot;creationTime&quot;, creationTimeFormateado, TYPE_STORED));\r\n\r\n                FileTime lastAccessTime = at.lastAccessTime();\r\n                String lastAccessTimeFormateado = simpleDateFormat.format(new Date(lastAccessTime.toMillis()));\r\n                doc.add(new Field(&quot;lastAccessTime&quot;, lastAccessTimeFormateado, TYPE_STORED));\r\n\r\n                FileTime lastModifiedTime = at.lastModifiedTime();\r\n                String lastTimeModifiedTimeFormateado = simpleDateFormat.format(new Date(lastModifiedTime.toMillis()));\r\n                doc.add(new Field(&quot;lastModifiedTime&quot;, lastTimeModifiedTimeFormateado, TYPE_STORED));\r\n\r\n                Date creationTimelucene = new Date(creationTime.toMillis());\r\n                String s1 = DateTools.dateToString(creationTimelucene, DateTools.Resolution.MILLISECOND);\r\n                doc.add(new Field(&quot;creationTimeLucene&quot;, s1, TYPE_STORED));\r\n\r\n                Date lastAccessTimelucene = new Date(lastAccessTime.toMillis());\r\n                String s2 = DateTools.dateToString(lastAccessTimelucene, DateTools.Resolution.MILLISECOND);\r\n                doc.add(new Field(&quot;lastAccessTimeLucene&quot;, s2, TYPE_STORED));\r\n\r\n                Date lastModifiedTimelucene = new Date(lastModifiedTime.toMillis());\r\n                String s3 = DateTools.dateToString(lastModifiedTimelucene, DateTools.Resolution.MILLISECOND);\r\n                doc.add(new Field(&quot;LastModifiedTimeLucene&quot;, s3, TYPE_STORED));\r\n                \r\n                if (demoEmbeddings != null) {\r\n                    try (InputStream in = Files.newInputStream(file)) {\r\n                        float[] vector = demoEmbeddings.computeEmbedding(\r\n                                new BufferedReader(new InputStreamReader(in, StandardCharsets.UTF_8)));\r\n                        doc.add(\r\n                                new KnnVectorField(&quot;contents-vector&quot;, vector, VectorSimilarityFunction.DOT_PRODUCT));\r\n                    }\r\n                }\r\n    \r\n                if (writer.getConfig().getOpenMode() == OpenMode.CREATE) {\r\n                    // New index, so we just add the document (no old document can be there):\r\n                    System.out.println(&quot;adding &quot; + file);\r\n                    writer.addDocument(doc);\r\n                } else {\r\n                    // Existing index (an old copy of this document may have been indexed) so\r\n                    // we use updateDocument instead to replace the old one matching the exact\r\n                    // path, if present:\r\n                    System.out.println(&quot;updating &quot; + file);\r\n                    writer.updateDocument(new Term(&quot;path&quot;, file.toString()), doc);\r\n                }\r\n            }\r\n        }\r\n        else\r\n            System.out.println(&quot;Este archivo va a ser ignorado&quot;);\r\n    }```\r\n\r\nBut I have indexed more fields for the document, like file type. Why are they not shown?","title":"How can I print all terms from a Lucene Document?","body":"<p>I am trying to print all terms from the documents between two docID. But some terms that I had indexed aren't printed.</p>\n<p>Sorry because some things are written in Spain due to it's a project for my spanish university.</p>\n<p>I have this code:</p>\n<pre><code>package simpledemo;\n\nimport java.nio.file.Paths;\nimport java.util.List;\nimport java.util.ArrayList;\n\nimport org.apache.lucene.index.IndexReader;\nimport org.apache.lucene.index.Term;\nimport org.apache.lucene.index.Terms;\nimport org.apache.lucene.index.TermsEnum;\nimport org.apache.lucene.index.Fields;\nimport org.apache.lucene.search.IndexSearcher;\nimport org.apache.lucene.search.similarities.Similarity;\nimport org.apache.lucene.document.Document;\nimport org.apache.lucene.index.DirectoryReader;\nimport org.apache.lucene.store.FSDirectory;\nimport org.apache.lucene.util.BytesRef;\n//import org.apache.lucene.search.similarities.DefaultSimilarity; // FIXME No se pq no detecta esto si aparece en el API de Lucene\n\npublic class TopTermsInDocs {\n\n\n    public static void main(String[] args) {\n        // TODO Poner bien el paquete al que pertenece cd ordenemos el codigo\n        String usage = &quot;simpledemo.TopTermsInDocs&quot;\n        + &quot;[-index INDEX_PATH] [-docID INT1-INT2] [-top N] [-outfile PATH]\\n&quot;\n        + &quot;The result will be displayed on screen and in a file to be indicated in&quot;\n        + &quot;the -outfile path argument, will show for each document its&quot;\n        + &quot;docId and the top n terms with its tf, df and tf x idflog10&quot;;\n\n        String indexPath = null; // TODO mirar si poner uno por defecto o hacer que falle\n        String[] range = null;\n        Integer docIdStart = null;\n        Integer docIdEnd = null;\n        Integer topN = null;\n        String outPath = null;\n        System.out.println(usage);\n\n        for (int i = 0; i &lt; args.length; i++) {\n            switch(args[i]) {\n                case &quot;-index&quot;: \n                    indexPath = args[++i];\n                    break;\n                case &quot;-docID&quot;:\n                    range = args[++i].split(&quot;-&quot;);\n                    docIdStart = Integer.parseInt(range[0]);\n                    docIdEnd = Integer.parseInt(range[1]);\n                    break;\n                case &quot;-top&quot;:\n                    topN = Integer.parseInt(args[++i]);\n                    break;\n                case &quot;-outfile&quot;:\n                    outPath = args[++i];\n            } \n        }\n        IndexReader reader = null; //Ls inicializo aqui a null pq sino no los voy a poder usar fuera del try\n        // FIXME descomentar cd lo reconozca       DefaultSimilarity similarity = new DefaultSimilarity();\n        try {\n            reader = DirectoryReader.open(FSDirectory.open(Paths.get(indexPath)));\n\n            int numDocs = reader.numDocs(); // Numero de documentos total\n\n            for(int id = docIdStart; id&lt;docIdEnd; id++) {\n                System.out.println(&quot;Voy a printear el docID: &quot; + id);\n                Fields fields = reader.getTermVectors(id); //Obtengo todos los terminos del documento\n\n                for (String fieldName : fields) {\n                    Terms terms = fields.terms(fieldName);\n                    TermsEnum termsEnum = terms.iterator();\n                    BytesRef term = null;\n\n                    while((term = termsEnum.next()) != null) {\n                        String termText = term.utf8ToString();\n                        long termFreq = termsEnum.totalTermFreq(); //Frecuencia total del termino\n                        int docFreq = termsEnum.docFreq(); //Frecuencia de documento\n                        int tf = (int) Math.round(termFreq / docFreq); //Frecuencia del termino en el documento\n                        // FIXME descomentar cd lo reconozca    double idf = similarity.idf(docFreq, numDocs);\n                        int idf = (int) Math.log(numDocs/(docFreq+1)) + 1;\n                        System.out.println(&quot;Campo: &quot; + fieldName + &quot; - Trmino: &quot; + termText + &quot; - tf: &quot; + tf + &quot; - idf: &quot; + idf);\n                        //TODO primero probar si funciona y si funciona puedo hacer una funcion que devuelva una estructura con todo\n                    }\n\n                }\n\n                System.out.println(&quot;\\n\\n&quot;);\n            }\n\n        } catch (Exception e) {\n            // TODO: handle exception\n        }\n\n\n\n\n\n\n    }\n}\n</code></pre>\n<p>I know -top and -outfile options aren't implemented for the moment. But it doesn't matter for the problem.</p>\n<p>When I execute it for a single document it shows:</p>\n<pre><code>Campo: LastModifiedTimeLucene - Trmino: 20230408150702014 - tf: 1 - idf: 2\nCampo: contents - Trmino: david - tf: 1 - idf: 2\nCampo: contents - Trmino: hola2 - tf: 1 - idf: 2\nCampo: contents - Trmino: txt - tf: 1 - idf: 2\nCampo: creationTime - Trmino: 2023-04-08 17:07:02 - tf: 1 - idf: 2\nCampo: creationTimeLucene - Trmino: 20230408150702014 - tf: 1 - idf: 2\nCampo: lastAccessTime - Trmino: 2023-04-09 01:10:26 - tf: 1 - idf: 2\nCampo: lastAccessTimeLucene - Trmino: 20230408231026954 - tf: 1 - idf: 2\nCampo: lastModifiedTime - Trmino: 2023-04-08 17:07:02 - tf: 1 - idf: 2\n</code></pre>\n<p>About the creation of the documents I have this function:</p>\n<pre><code>    void indexDoc(IndexWriter writer, Path file, long lastModified) throws IOException {\n        System.out.println(file.getFileName().toString());\n        // TODO Aadir la funcionalidad de onlyLines\n        if(config.validateFile(file.getFileName().toString()))\n        {\n            try (InputStream stream = Files.newInputStream(file)) {\n                // make a new, empty document\n                Document doc = new Document();\n                \n                // Add the path of the file as a field named &quot;path&quot;. Use a\n                // field that is indexed (i.e. searchable), but don't tokenize\n                // the field into separate words and don't index term frequency\n                // or positional information:\n                Field pathField = new StringField(&quot;path&quot;, file.toString(), Field.Store.YES);\n                doc.add(pathField);\n                \n                String contents = obtainContents(stream);\n                \n                FieldType tmp_field_type = new FieldType();\n                \n                tmp_field_type.setTokenized(true);\n                tmp_field_type.setIndexOptions(IndexOptions.DOCS_AND_FREQS_AND_POSITIONS_AND_OFFSETS);\n                tmp_field_type.setStoreTermVectors(contentsTermVectors);\n                tmp_field_type.setStoreTermVectorPositions(contentsTermVectors);\n                tmp_field_type.setStored(contentsStored);\n                tmp_field_type.freeze();\n                \n                // Add the contents of the file to a field named &quot;contents&quot;. Specify a Reader,\n                // so that the text of the file is tokenized and indexed, but not stored.\n                // Note that FileReader expects the file to be in UTF-8 encoding.\n                // If that's not the case searching for special characters will fail.\n                \n                Field contentsField = new Field(&quot;contents&quot;, contents, tmp_field_type);\n                doc.add(contentsField);\n\n                // TODO Extender documentacion\n                Field hostnameField = new StringField(&quot;hostname&quot;, InetAddress.getLocalHost().getHostName(), Field.Store.YES);\n                doc.add(hostnameField);\n    \n                // TODO Extender documentacion\n                Field threadField = new StringField(&quot;thread&quot;, Thread.currentThread().getName(), Field.Store.YES);\n                doc.add(threadField);\n                \n                // TODO Extender documentacion\n                \n                BasicFileAttributes at = Files.readAttributes(file, BasicFileAttributes.class);\n                String type;\n                if (at.isDirectory()) type = &quot;isDirectory&quot;;\n                else if (at.isRegularFile()) type = &quot;isRegularFile&quot;;\n                else if (at.isSymbolicLink()) type = &quot;iSSymbolicLink&quot;;\n                else if (at.isOther()) type = &quot;isOther&quot;;\n                else type = &quot;error&quot;;\n\n                doc.add(new StringField(&quot;type&quot;, type, Field.Store.YES));\n                \n                // TODO Extender documentacion\n                \n                doc.add(new LongPoint(&quot;sizeKB&quot;, at.size())); // ! CUIDAO\n                doc.add(new StoredField(&quot;sizeKB&quot;, at.size()));\n\n                // Add the last modified date of the file a field named &quot;modified&quot;.\n                // Use a LongPoint that is indexed (i.e. efficiently filterable with\n                // PointRangeQuery). This indexes to milli-second resolution, which\n                // is often too fine. You could instead create a number based on\n                // year/month/day/hour/minutes/seconds, down the resolution you require.\n                // For example the long value 2011021714 would mean\n                // February 17, 2011, 2-3 PM.\n                doc.add(new LongPoint(&quot;modified&quot;, lastModified));\n                doc.add(new StoredField(&quot;modified&quot;, lastModified));\n    \n                \n                String dateFormat = &quot;yyyy-MM-dd HH:mm:ss&quot;;\n                SimpleDateFormat simpleDateFormat = new SimpleDateFormat(dateFormat);\n\n                FileTime creationTime = at.creationTime();\n                String creationTimeFormateado = simpleDateFormat.format(new Date(creationTime.toMillis()));\n                doc.add(new Field(&quot;creationTime&quot;, creationTimeFormateado, TYPE_STORED));\n\n                FileTime lastAccessTime = at.lastAccessTime();\n                String lastAccessTimeFormateado = simpleDateFormat.format(new Date(lastAccessTime.toMillis()));\n                doc.add(new Field(&quot;lastAccessTime&quot;, lastAccessTimeFormateado, TYPE_STORED));\n\n                FileTime lastModifiedTime = at.lastModifiedTime();\n                String lastTimeModifiedTimeFormateado = simpleDateFormat.format(new Date(lastModifiedTime.toMillis()));\n                doc.add(new Field(&quot;lastModifiedTime&quot;, lastTimeModifiedTimeFormateado, TYPE_STORED));\n\n                Date creationTimelucene = new Date(creationTime.toMillis());\n                String s1 = DateTools.dateToString(creationTimelucene, DateTools.Resolution.MILLISECOND);\n                doc.add(new Field(&quot;creationTimeLucene&quot;, s1, TYPE_STORED));\n\n                Date lastAccessTimelucene = new Date(lastAccessTime.toMillis());\n                String s2 = DateTools.dateToString(lastAccessTimelucene, DateTools.Resolution.MILLISECOND);\n                doc.add(new Field(&quot;lastAccessTimeLucene&quot;, s2, TYPE_STORED));\n\n                Date lastModifiedTimelucene = new Date(lastModifiedTime.toMillis());\n                String s3 = DateTools.dateToString(lastModifiedTimelucene, DateTools.Resolution.MILLISECOND);\n                doc.add(new Field(&quot;LastModifiedTimeLucene&quot;, s3, TYPE_STORED));\n                \n                if (demoEmbeddings != null) {\n                    try (InputStream in = Files.newInputStream(file)) {\n                        float[] vector = demoEmbeddings.computeEmbedding(\n                                new BufferedReader(new InputStreamReader(in, StandardCharsets.UTF_8)));\n                        doc.add(\n                                new KnnVectorField(&quot;contents-vector&quot;, vector, VectorSimilarityFunction.DOT_PRODUCT));\n                    }\n                }\n    \n                if (writer.getConfig().getOpenMode() == OpenMode.CREATE) {\n                    // New index, so we just add the document (no old document can be there):\n                    System.out.println(&quot;adding &quot; + file);\n                    writer.addDocument(doc);\n                } else {\n                    // Existing index (an old copy of this document may have been indexed) so\n                    // we use updateDocument instead to replace the old one matching the exact\n                    // path, if present:\n                    System.out.println(&quot;updating &quot; + file);\n                    writer.updateDocument(new Term(&quot;path&quot;, file.toString()), doc);\n                }\n            }\n        }\n        else\n            System.out.println(&quot;Este archivo va a ser ignorado&quot;);\n    }```\n\nBut I have indexed more fields for the document, like file type. Why are they not shown?\n</code></pre>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":1111053,"reputation":1359,"user_id":1101512,"accept_rate":78,"display_name":"Sudhir"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1566915473,"creation_date":1566915473,"answer_id":57676701,"question_id":57676086,"body_markdown":"If you use JPA, object auditing frameworks like [hibernate envers][1] or [javers][2] might help\r\n\r\n\r\n  [1]: http://hibernate.org/orm/envers/\r\n  [2]: https://javers.org/","title":"How to implement history data changes with Spring Boot/Spring Data","body":"<p>If you use JPA, object auditing frameworks like <a href=\"http://hibernate.org/orm/envers/\" rel=\"nofollow noreferrer\">hibernate envers</a> or <a href=\"https://javers.org/\" rel=\"nofollow noreferrer\">javers</a> might help</p>\n"},{"tags":[],"owner":{"account_id":9774998,"reputation":3031,"user_id":7245379,"display_name":"eHayik"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1681060825,"creation_date":1566915887,"answer_id":57676840,"question_id":57676086,"body_markdown":"You can use **Hibernate Envers** to audit and version your persistence entities changes.\r\n\r\n&gt;  The Envers project aims to enable easy auditing of persistent\r\n&gt; classes. All that you have to do is annotate your persistent class or\r\n&gt; some of its properties, that you want to audit, with @Audited. For\r\n&gt; each audited entity, a table will be created, which will hold the\r\n&gt; history of changes made to the entity. You can then retrieve and query\r\n&gt; historical data without much effort.\r\n&gt; \r\n&gt; Similarly to Subversion, the library has a concept of revisions.\r\n&gt; Basically, one transaction is one revision (unless the transaction\r\n&gt; didn&#39;t modify any audited entities). As the revisions are global,\r\n&gt; having a revision number, you can query for various entities at that\r\n&gt; revision, retrieving a (partial) view of the database at that\r\n&gt; revision. You can find a revision number having a date, and the other\r\n&gt; way round, you can get the date at which a revision was commited.\r\n&gt; \r\n&gt; The library works with Hibernate and requires Hibernate Annotations or\r\n&gt; Entity Manager. For the auditing to work properly, the entities must\r\n&gt; have immutable unique identifiers (primary keys). You can use Envers\r\n&gt; wherever Hibernate works: standalone, inside JBoss AS, with JBoss Seam\r\n&gt; or Spring. [source][1]\r\n&gt;\r\n&gt; You can query for historic data in a way similar to querying data via\r\n&gt; the Hibernate criteria API. The audit history of an entity can be\r\n&gt; accessed using the `AuditReader` interface, which can be obtained with\r\n&gt; an open `EntityManager` or `Session` via the `AuditReaderFactory`. [source][2]\r\n\r\nWith ***Hibernate Envers*** the 80% of the task is done. You can record your data changes, then access it, either using your persistence context or SQL to apply your version changes using the provide revision id.\r\n\r\nFurthermore, you may read the articles listed below:\r\n\r\n- [Setting up Hibernate Envers with Spring Boot][3]\r\n\r\n- [Auditing with JPA, Hibernate, and Spring Data JPA][2]\r\n\r\n- [Hibernate Envers: Simple Implementations][4]\r\n\r\n\r\n  [1]: https://docs.jboss.org/envers/docs/#preface\r\n  [2]: https://www.baeldung.com/database-auditing-jpa\r\n  [3]: http://progressivecoder.com/setting-hibernate-envers-spring-boot/\r\n  [4]: https://dzone.com/articles/hibernate-envers-with-simple-implementations","title":"How to implement history data changes with Spring Boot/Spring Data","body":"<p>You can use <strong>Hibernate Envers</strong> to audit and version your persistence entities changes.</p>\n<blockquote>\n<p>The Envers project aims to enable easy auditing of persistent\nclasses. All that you have to do is annotate your persistent class or\nsome of its properties, that you want to audit, with @Audited. For\neach audited entity, a table will be created, which will hold the\nhistory of changes made to the entity. You can then retrieve and query\nhistorical data without much effort.</p>\n<p>Similarly to Subversion, the library has a concept of revisions.\nBasically, one transaction is one revision (unless the transaction\ndidn't modify any audited entities). As the revisions are global,\nhaving a revision number, you can query for various entities at that\nrevision, retrieving a (partial) view of the database at that\nrevision. You can find a revision number having a date, and the other\nway round, you can get the date at which a revision was commited.</p>\n<p>The library works with Hibernate and requires Hibernate Annotations or\nEntity Manager. For the auditing to work properly, the entities must\nhave immutable unique identifiers (primary keys). You can use Envers\nwherever Hibernate works: standalone, inside JBoss AS, with JBoss Seam\nor Spring. <a href=\"https://docs.jboss.org/envers/docs/#preface\" rel=\"nofollow noreferrer\">source</a></p>\n<p>You can query for historic data in a way similar to querying data via\nthe Hibernate criteria API. The audit history of an entity can be\naccessed using the <code>AuditReader</code> interface, which can be obtained with\nan open <code>EntityManager</code> or <code>Session</code> via the <code>AuditReaderFactory</code>. <a href=\"https://www.baeldung.com/database-auditing-jpa\" rel=\"nofollow noreferrer\">source</a></p>\n</blockquote>\n<p>With <em><strong>Hibernate Envers</strong></em> the 80% of the task is done. You can record your data changes, then access it, either using your persistence context or SQL to apply your version changes using the provide revision id.</p>\n<p>Furthermore, you may read the articles listed below:</p>\n<ul>\n<li><p><a href=\"http://progressivecoder.com/setting-hibernate-envers-spring-boot/\" rel=\"nofollow noreferrer\">Setting up Hibernate Envers with Spring Boot</a></p>\n</li>\n<li><p><a href=\"https://www.baeldung.com/database-auditing-jpa\" rel=\"nofollow noreferrer\">Auditing with JPA, Hibernate, and Spring Data JPA</a></p>\n</li>\n<li><p><a href=\"https://dzone.com/articles/hibernate-envers-with-simple-implementations\" rel=\"nofollow noreferrer\">Hibernate Envers: Simple Implementations</a></p>\n</li>\n</ul>\n"}],"owner":{"account_id":1685633,"reputation":61,"user_id":5927256,"display_name":"user5927256"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17485,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1681060825,"creation_date":1566913606,"question_id":57676086,"body_markdown":"The problem is how to implement tracking of data changes on e.g. master detail tables i.e. two entities in one to many relationship in Spring Boot/Spring Data.\r\n\r\nAfter storing data, to be able to get the master entity with its details at specific version, and to have functionality to revert it to specific version.","title":"How to implement history data changes with Spring Boot/Spring Data","body":"<p>The problem is how to implement tracking of data changes on e.g. master detail tables i.e. two entities in one to many relationship in Spring Boot/Spring Data.</p>\n\n<p>After storing data, to be able to get the master entity with its details at specific version, and to have functionality to revert it to specific version.</p>\n"},{"tags":["java","spring","spring-data-jpa","mapstruct","apache-commons-beanutils"],"answers":[{"tags":[],"owner":{"account_id":24109083,"reputation":150,"user_id":18079889,"display_name":"Mohammed Fataka"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1680999544,"creation_date":1680999133,"answer_id":75968222,"question_id":75962053,"body_markdown":"you can avoid null checks by adding validations on the object level, spring provides ```@Valid``` annotation, you can check more [here at baeldung](https://www.baeldung.com/spring-valid-vs-validated) to make object validated and avoid null checks, other options would be using ```Preconditions```from google, or handling it on the entity level, which you annotate columns that are non null and let your method not check but rather just save and repository will throw because null was passed and you can handle the exception by returning some message or failed response, [check here](https://www.baeldung.com/hibernate-notnull-vs-nullable) for making columns non null ","title":"how to avoid null check on jpa update","body":"<p>you can avoid null checks by adding validations on the object level, spring provides <code>@Valid</code> annotation, you can check more <a href=\"https://www.baeldung.com/spring-valid-vs-validated\" rel=\"nofollow noreferrer\">here at baeldung</a> to make object validated and avoid null checks, other options would be using <code>Preconditions</code>from google, or handling it on the entity level, which you annotate columns that are non null and let your method not check but rather just save and repository will throw because null was passed and you can handle the exception by returning some message or failed response, <a href=\"https://www.baeldung.com/hibernate-notnull-vs-nullable\" rel=\"nofollow noreferrer\">check here</a> for making columns non null</p>\n"},{"tags":[],"owner":{"account_id":10467026,"reputation":534,"user_id":7716142,"display_name":"minh tri Vo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681017563,"creation_date":1681017563,"answer_id":75968897,"question_id":75962053,"body_markdown":"&gt; do I need to use Map structs or BeanUtils.copyProperties or what is the best way to achieve these?\r\n\r\nYes, for me, Mapstruct perfectly suits your purpose, for example:\r\n\r\n    @Mapper(uses = DateMapper.class)\r\n    public interface TestMapper {\r\n\r\n        @BeanMapping(nullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.IGNORE) // if a source&#39;s property is null, ignore it\r\n        @Mapping(source = &quot;differentValue&quot;, target = &quot;value&quot;) // Map to different property name\r\n        void updateAppearanceFromDto(@MappingTarget Test mappingTarget, TestDto appearanceRequestDto); \r\n    }\r\n \r\n    // help with different type cast\r\n    class DateMapper {\r\n       public Date asDate(String date) {\r\n          return Date.valueOf(date);\r\n       }\r\n    }\r\n\r\n\r\nOf course, if your project only requires the null-check-then-set on this entity only, manually doing it would be better because of the cost of dependency overhead.","title":"how to avoid null check on jpa update","body":"<blockquote>\n<p>do I need to use Map structs or BeanUtils.copyProperties or what is the best way to achieve these?</p>\n</blockquote>\n<p>Yes, for me, Mapstruct perfectly suits your purpose, for example:</p>\n<pre><code>@Mapper(uses = DateMapper.class)\npublic interface TestMapper {\n\n    @BeanMapping(nullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.IGNORE) // if a source's property is null, ignore it\n    @Mapping(source = &quot;differentValue&quot;, target = &quot;value&quot;) // Map to different property name\n    void updateAppearanceFromDto(@MappingTarget Test mappingTarget, TestDto appearanceRequestDto); \n}\n\n// help with different type cast\nclass DateMapper {\n   public Date asDate(String date) {\n      return Date.valueOf(date);\n   }\n}\n</code></pre>\n<p>Of course, if your project only requires the null-check-then-set on this entity only, manually doing it would be better because of the cost of dependency overhead.</p>\n"}],"owner":{"account_id":926701,"reputation":1165,"user_id":957359,"accept_rate":47,"display_name":"jcrshankar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1681060639,"creation_date":1680902741,"question_id":75962053,"body_markdown":"I want to avoid `null check` while updating the value into `database`. but i need to update only the value that is coming from `UpdateUserRequest` object. how to avoid multiple null check? the source and destination has different name? do I need to use `Map structs` or `BeanUtils.copyProperties` or what is the best way to achieve these?\r\n\r\n    @Transactional\r\n    public void update(String userId, UpdateUserRequest updateUserRequest) {\r\n        dataRepository.findByUserId(userId)\r\n                .ifPresent(userTransaction -&gt; {\r\n                    if(updateUserRequest.getAccountId()!=null)\r\n                    {\r\n                        userTransaction.setAccountId(updateUserRequest.getAccountId());\r\n                    }\r\n                    if(updateUserRequest.getUserAmount()!=null)\r\n                    {\r\n                        userTransaction.setUserAmount(updateUserRequest.getUserAmount());\r\n                    }\r\n                    if(updateUserRequest.getSendDate() != null)\r\n                    {\r\n                        userTransaction.setUserRequestedDate(Date.valueOf(updateUserRequest.getSendDate()));\r\n                    }\r\n\r\n                    if(updateUserRequest.getDelDate() != null)\r\n                    {\r\n                        userTransaction.setDelDate(Date.valueOf(updateUserRequest.getDelDate()));\r\n                    }\r\n\r\n                    dataRepository.save(userTransaction);\r\n                });\r\n    }\r\n    \r\n   ","title":"how to avoid null check on jpa update","body":"<p>I want to avoid <code>null check</code> while updating the value into <code>database</code>. but i need to update only the value that is coming from <code>UpdateUserRequest</code> object. how to avoid multiple null check? the source and destination has different name? do I need to use <code>Map structs</code> or <code>BeanUtils.copyProperties</code> or what is the best way to achieve these?</p>\n<pre><code>@Transactional\npublic void update(String userId, UpdateUserRequest updateUserRequest) {\n    dataRepository.findByUserId(userId)\n            .ifPresent(userTransaction -&gt; {\n                if(updateUserRequest.getAccountId()!=null)\n                {\n                    userTransaction.setAccountId(updateUserRequest.getAccountId());\n                }\n                if(updateUserRequest.getUserAmount()!=null)\n                {\n                    userTransaction.setUserAmount(updateUserRequest.getUserAmount());\n                }\n                if(updateUserRequest.getSendDate() != null)\n                {\n                    userTransaction.setUserRequestedDate(Date.valueOf(updateUserRequest.getSendDate()));\n                }\n\n                if(updateUserRequest.getDelDate() != null)\n                {\n                    userTransaction.setDelDate(Date.valueOf(updateUserRequest.getDelDate()));\n                }\n\n                dataRepository.save(userTransaction);\n            });\n}\n</code></pre>\n"},{"tags":["java","multithreading","concurrency","virtual","project-loom"],"comments":[{"owner":{"account_id":318397,"reputation":203598,"user_id":635608,"display_name":"Mat"},"score":0,"creation_date":1672413172,"post_id":74963003,"comment_id":132285898,"body_markdown":"You forgot the language tag.","body":"You forgot the language tag."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1672738990,"post_id":74963003,"comment_id":132337486,"body_markdown":"Virtual threads do not change the fact that submitting short actions to other threads may degrade performance. Though, I can not reproduce your results with JDK&#160;19. The divergence may be caused by the actual nature of your tasks.","body":"Virtual threads do not change the fact that submitting short actions to other threads may degrade performance. Though, I can not reproduce your results with JDK 19. The divergence may be caused by the actual nature of your tasks."},{"owner":{"account_id":26599161,"reputation":41,"user_id":20221035,"display_name":"ljm599"},"score":0,"creation_date":1672762533,"post_id":74963003,"comment_id":132345185,"body_markdown":"Good to know. Increases the likelihood that something dumb is happening. If I find it out I will post ...","body":"Good to know. Increases the likelihood that something dumb is happening. If I find it out I will post ..."}],"answers":[{"tags":[],"owner":{"account_id":26599161,"reputation":41,"user_id":20221035,"display_name":"ljm599"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681060416,"creation_date":1681060416,"answer_id":75971875,"question_id":74963003,"body_markdown":"I did eventually solve this problem. It took some time because the program is moderately complex and a lot of re-writing and experimentation was required. Contention accessing a large shared object central to the calculation was the cause in some of the cases. Contention appears to approach 100% and access to this object appears to have been the limiting factor. \r\n\r\nRemoval of the contention then revealed a set of [less] contended logs and timers which were also reducing performance. Removal of contention on these objects then resulted in the expected performance improvements.\r\n\r\nThe lesson I took from this is that in that achieving performance improvements through concurrency is not straightforward in cases with significant shared resources. \r\n\r\nIn my case a partial solution required a complete re-write to remove all contention and store the results of the calculations run in each thread, to be later merged into the shared central resource. This merging had additional costs because the threads run similar calculations in parallel resulting in some data duplication that had to be dealt with.","title":"Virtual threads slower than single threads","body":"<p>I did eventually solve this problem. It took some time because the program is moderately complex and a lot of re-writing and experimentation was required. Contention accessing a large shared object central to the calculation was the cause in some of the cases. Contention appears to approach 100% and access to this object appears to have been the limiting factor.</p>\n<p>Removal of the contention then revealed a set of [less] contended logs and timers which were also reducing performance. Removal of contention on these objects then resulted in the expected performance improvements.</p>\n<p>The lesson I took from this is that in that achieving performance improvements through concurrency is not straightforward in cases with significant shared resources.</p>\n<p>In my case a partial solution required a complete re-write to remove all contention and store the results of the calculations run in each thread, to be later merged into the shared central resource. This merging had additional costs because the threads run similar calculations in parallel resulting in some data duplication that had to be dealt with.</p>\n"}],"owner":{"account_id":26599161,"reputation":41,"user_id":20221035,"display_name":"ljm599"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":269,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681060416,"creation_date":1672413073,"question_id":74963003,"body_markdown":"I have a a number of tasks where work can be done in parallel. I have tried this single-threaded and multi-threaded. Code is as follows:\r\n\r\n```\r\nprivate MyTaskResult doTasks( ... ) {\r\n  \r\n    try ( var scope = new StructuredTaskScope.ShutdownOnFailure() ) {\r\n  \r\n      var negTask =\r\n        MyTask.create(\r\n          ...\r\n        );\r\n  \r\n      var posTask =\r\n        MyTask.create(\r\n          ...\r\n        );\r\n  \r\n      var negTaskFuture = (\r\n        CoreConfig.useMultipleThreads() ?\r\n        scope.fork( negTask::task ) :\r\n        new ImmediateFuture&lt;&gt;( negTask.task() )\r\n      );\r\n      \r\n      var posTaskFuture = (\r\n        CoreConfig.useMultipleThreads() ?\r\n        scope.fork( posTask::task) :\r\n        new ImmediateFuture&lt;&gt;( posTask.task() )\r\n      );\r\n  \r\n      scope.join();\r\n      scope.throwIfFailed();\r\n  \r\n      return new MyTaskResult(\r\n        negTaskFuture.resultNow(),\r\n        posTaskFuture.resultNow()\r\n      );\r\n  \r\n    }\r\n    catch ( InterruptedException | ExecutionException ex ) {\r\n      throw new Error( ex );\r\n    }\r\n    \r\n  }\r\n```\r\n\r\nTimings for single threaded execution are typically around 3ms for each of the two tasks, with some overhead, for 7ms total. Timings for multi-threaded execution are 9ms each task with some overhead for 11ms total. There is some inconsistency in the timings, with one task sometimes taking as little as 3ms and the other taking the usual 9ms. The task objects are created with their own data items (strictly immutable) and do not interact with other sources of data. The tasks do some calculations and create a data structure accordingly.\r\n\r\nMy expectation was that single-threaded execution time of 7ms elapsed would be accelerated to 4/5ms elapsed. This example is not important but it is not the only place where I am doing this work. I have similar results from other blocks of code. I did not present those examples because they reference a central data repository and all the spawned threads must contend for read and write access (I have used ReentrantReadWriteLock), so in that case there could be blocking. Even so the results are similar to the case I have presented above, with muti-threading taking 2-3x as long, albeit with larger number of threads. Note synchronized is not used.\r\n\r\nI must be doing something dumb. Please help ?\r\n\r\nEnvironment is IntelliJ, latest version.\r\n","title":"Virtual threads slower than single threads","body":"<p>I have a a number of tasks where work can be done in parallel. I have tried this single-threaded and multi-threaded. Code is as follows:</p>\n<pre><code>private MyTaskResult doTasks( ... ) {\n  \n    try ( var scope = new StructuredTaskScope.ShutdownOnFailure() ) {\n  \n      var negTask =\n        MyTask.create(\n          ...\n        );\n  \n      var posTask =\n        MyTask.create(\n          ...\n        );\n  \n      var negTaskFuture = (\n        CoreConfig.useMultipleThreads() ?\n        scope.fork( negTask::task ) :\n        new ImmediateFuture&lt;&gt;( negTask.task() )\n      );\n      \n      var posTaskFuture = (\n        CoreConfig.useMultipleThreads() ?\n        scope.fork( posTask::task) :\n        new ImmediateFuture&lt;&gt;( posTask.task() )\n      );\n  \n      scope.join();\n      scope.throwIfFailed();\n  \n      return new MyTaskResult(\n        negTaskFuture.resultNow(),\n        posTaskFuture.resultNow()\n      );\n  \n    }\n    catch ( InterruptedException | ExecutionException ex ) {\n      throw new Error( ex );\n    }\n    \n  }\n</code></pre>\n<p>Timings for single threaded execution are typically around 3ms for each of the two tasks, with some overhead, for 7ms total. Timings for multi-threaded execution are 9ms each task with some overhead for 11ms total. There is some inconsistency in the timings, with one task sometimes taking as little as 3ms and the other taking the usual 9ms. The task objects are created with their own data items (strictly immutable) and do not interact with other sources of data. The tasks do some calculations and create a data structure accordingly.</p>\n<p>My expectation was that single-threaded execution time of 7ms elapsed would be accelerated to 4/5ms elapsed. This example is not important but it is not the only place where I am doing this work. I have similar results from other blocks of code. I did not present those examples because they reference a central data repository and all the spawned threads must contend for read and write access (I have used ReentrantReadWriteLock), so in that case there could be blocking. Even so the results are similar to the case I have presented above, with muti-threading taking 2-3x as long, albeit with larger number of threads. Note synchronized is not used.</p>\n<p>I must be doing something dumb. Please help ?</p>\n<p>Environment is IntelliJ, latest version.</p>\n"},{"tags":["java","spring-boot","docker"],"comments":[{"owner":{"account_id":12712205,"reputation":1604,"user_id":9235482,"display_name":"Lakshitha Wisumperuma"},"score":0,"creation_date":1680959890,"post_id":75965390,"comment_id":133984185,"body_markdown":"did you verify that the container is up and running and that your application is up?","body":"did you verify that the container is up and running and that your application is up?"},{"owner":{"account_id":28247598,"reputation":11,"user_id":21594383,"display_name":"for_and_pear_max_no"},"score":0,"creation_date":1680970822,"post_id":75965390,"comment_id":133985689,"body_markdown":"Yes, everything is up and running.","body":"Yes, everything is up and running."},{"owner":{"account_id":12712205,"reputation":1604,"user_id":9235482,"display_name":"Lakshitha Wisumperuma"},"score":0,"creation_date":1681039996,"post_id":75965390,"comment_id":133992129,"body_markdown":"Can you try `docker run -p 34256:34256 -d --network=host --name java-container java-image` and test?","body":"Can you try <code>docker run -p 34256:34256 -d --network=host --name java-container java-image</code> and test?"}],"answers":[{"tags":[],"owner":{"account_id":28247598,"reputation":11,"user_id":21594383,"display_name":"for_and_pear_max_no"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1681060018,"creation_date":1681060018,"answer_id":75971856,"question_id":75965390,"body_markdown":"Solved by adding `--network=host` to the run arguments.\r\n\r\n`docker run -p 34256:34256 -d --network=host --name java-container java-image`\r\n\r\nThanks @Lakshitha Wisumperuma\r\n","title":"Can&#39;t connect to RESTful spring boot application when running as docker container","body":"<p>Solved by adding <code>--network=host</code> to the run arguments.</p>\n<p><code>docker run -p 34256:34256 -d --network=host --name java-container java-image</code></p>\n<p>Thanks @Lakshitha Wisumperuma</p>\n"}],"owner":{"account_id":28247598,"reputation":11,"user_id":21594383,"display_name":"for_and_pear_max_no"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75971856,"answer_count":1,"score":1,"last_activity_date":1681060018,"creation_date":1680959229,"question_id":75965390,"body_markdown":"I am running a server machine which runs a spring-boot application, I am trying to dockerize the process. The server and client are two different PCs.\r\n\r\nServer:\r\n\r\n```\r\njava -jar springdemo-0.0.1-SNAPSHOT.jar\r\n```\r\n\r\nClient:\r\n\r\n`curl http://serverip:34256/api/test`\r\n\r\nI&#39;m getting the expected response\r\n\r\n```\r\n{\r\n    &quot;One&quot;: 1,\r\n    &quot;Two&quot;: 2,\r\n    &quot;Three&quot;: 3\r\n}\r\n```\r\n\r\n\r\nTrying to dockerize the process, I run on the server:\r\n\r\n`docker build -t java-image .`\r\n\r\n`docker run -p 34256:34256 --name java-container java-image`\r\n\r\nBut now I can&#39;t connect to my application from the client:\r\n\r\n```\r\ncurl: (7) Failed to connect to serverip port 34256 after 55 ms: Connection refused\r\n\r\n```\r\n\r\n\r\nSpring boot `application.properties`:\r\n\r\n```\r\nserver.address=0.0.0.0\r\nserver.port=34256\r\n```\r\n`Dockerfile`:\r\n\r\n```\r\nFROM openjdk:17-alpine\r\nARG PORT=34256\r\nMAINTAINER me\r\nEXPOSE ${PORT}\r\nCOPY ./springdemo-*.jar ./springdemo-*.jar\r\nCMD [&quot;java&quot;,&quot;-jar&quot;,&quot;springdemo-*.jar&quot;]\r\n```","title":"Can&#39;t connect to RESTful spring boot application when running as docker container","body":"<p>I am running a server machine which runs a spring-boot application, I am trying to dockerize the process. The server and client are two different PCs.</p>\n<p>Server:</p>\n<pre><code>java -jar springdemo-0.0.1-SNAPSHOT.jar\n</code></pre>\n<p>Client:</p>\n<p><code>curl http://serverip:34256/api/test</code></p>\n<p>I'm getting the expected response</p>\n<pre><code>{\n    &quot;One&quot;: 1,\n    &quot;Two&quot;: 2,\n    &quot;Three&quot;: 3\n}\n</code></pre>\n<p>Trying to dockerize the process, I run on the server:</p>\n<p><code>docker build -t java-image .</code></p>\n<p><code>docker run -p 34256:34256 --name java-container java-image</code></p>\n<p>But now I can't connect to my application from the client:</p>\n<pre><code>curl: (7) Failed to connect to serverip port 34256 after 55 ms: Connection refused\n\n</code></pre>\n<p>Spring boot <code>application.properties</code>:</p>\n<pre><code>server.address=0.0.0.0\nserver.port=34256\n</code></pre>\n<p><code>Dockerfile</code>:</p>\n<pre><code>FROM openjdk:17-alpine\nARG PORT=34256\nMAINTAINER me\nEXPOSE ${PORT}\nCOPY ./springdemo-*.jar ./springdemo-*.jar\nCMD [&quot;java&quot;,&quot;-jar&quot;,&quot;springdemo-*.jar&quot;]\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9480,"page":512,"page_size":100}
