{"items":[{"tags":["java","spring","rest","file","multipartfile"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1660080695,"post_id":73297408,"comment_id":129447588,"body_markdown":"Use `entry.getName()` instead of getFile.","body":"Use <code>entry.getName()</code> instead of getFile."},{"owner":{"account_id":2234633,"reputation":93,"user_id":1971376,"accept_rate":0,"display_name":"user1971376"},"score":0,"creation_date":1660084916,"post_id":73297408,"comment_id":129448387,"body_markdown":"Hi, thanks but doesnt `.getName()` return a String? How would I save that as a File and add it to `fileList`? Thanks","body":"Hi, thanks but doesnt <code>.getName()</code> return a String? How would I save that as a File and add it to <code>fileList</code>? Thanks"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1660136210,"post_id":73297408,"comment_id":129461080,"body_markdown":"You know that callers of your REST API who are running on other computers will not be able to read those files, right?  A `File` object is just a file path;  it does not contain the file contents.","body":"You know that callers of your REST API who are running on other computers will not be able to read those files, right?  A <code>File</code> object is just a file path;  it does not contain the file contents."}],"owner":{"account_id":2234633,"reputation":93,"user_id":1971376,"accept_rate":0,"display_name":"user1971376"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":194,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660074999,"creation_date":1660074999,"question_id":73297408,"body_markdown":"I want to extract all the files in my .tar.gz MultipartFile and add the files to a List&lt;File&gt;\r\n\r\n```\r\n@RequestMapping(value=&quot;/importFile&quot;, produces=&quot;application/json&quot;, method=RequestMethod.POST)\r\n\t@ResponseBody\r\n\tpublic ca.alea.cam.api.model.Response importFile(@RequestBody MultipartFile file) throws ContentRepositoryDaoException, Exception {\r\n\t\tList&lt;File&gt; fileList = new ArrayList&lt;File&gt;();\r\n\t\t\r\n\t\tInputStream in = file.getInputStream();\r\n\t\tGzipCompressorInputStream gzipIn = new GzipCompressorInputStream(in);\r\n\t\tTarArchiveInputStream tarIn = new TarArchiveInputStream(gzipIn);\r\n\t    TarArchiveEntry entry = tarIn.getNextTarEntry();\r\n\t    \r\n        while (entry != null) {\r\n            // untar and add each file in MultipartFile to fileList\r\n            // fileList.add()...\r\n            //fileList.add(entry.getFile()) -&gt; This returns a null, as expected from https://commons.apache.org/proper/commons-compress/apidocs/org/apache/commons/compress/archivers/tar/TarArchiveEntry.html#getFile--\r\n        }\r\n```\r\nThanks","title":"How to UnTar a .tar.gz MultipartFile send in a request and add the files to a List&lt;File&gt;","body":"<p>I want to extract all the files in my .tar.gz MultipartFile and add the files to a List</p>\n<pre><code>@RequestMapping(value=&quot;/importFile&quot;, produces=&quot;application/json&quot;, method=RequestMethod.POST)\n    @ResponseBody\n    public ca.alea.cam.api.model.Response importFile(@RequestBody MultipartFile file) throws ContentRepositoryDaoException, Exception {\n        List&lt;File&gt; fileList = new ArrayList&lt;File&gt;();\n        \n        InputStream in = file.getInputStream();\n        GzipCompressorInputStream gzipIn = new GzipCompressorInputStream(in);\n        TarArchiveInputStream tarIn = new TarArchiveInputStream(gzipIn);\n        TarArchiveEntry entry = tarIn.getNextTarEntry();\n        \n        while (entry != null) {\n            // untar and add each file in MultipartFile to fileList\n            // fileList.add()...\n            //fileList.add(entry.getFile()) -&gt; This returns a null, as expected from https://commons.apache.org/proper/commons-compress/apidocs/org/apache/commons/compress/archivers/tar/TarArchiveEntry.html#getFile--\n        }\n</code></pre>\n<p>Thanks</p>\n"},{"tags":["java","algorithm","time-complexity"],"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":1,"creation_date":1659965083,"post_id":73278540,"comment_id":129413408,"body_markdown":"How did you confirm it was an `O(n)` runtime / what makes you think it is? Without digging too far into analyzing it, my first reaction is that it isn&#39;t.","body":"How did you confirm it was an <code>O(n)</code> runtime / what makes you think it is? Without digging too far into analyzing it, my first reaction is that it isn&#39;t."},{"owner":{"account_id":682692,"reputation":49061,"user_id":535275,"accept_rate":91,"display_name":"Scott Hunter"},"score":0,"creation_date":1659965150,"post_id":73278540,"comment_id":129413439,"body_markdown":"Can you explain the logic behind the `while` loop?","body":"Can you explain the logic behind the <code>while</code> loop?"},{"owner":{"display_name":"user1196549"},"score":0,"creation_date":1659965913,"post_id":73278540,"comment_id":129413739,"body_markdown":"If I am right, firstSmallLeft would be `[-1,-1,1,1,1,-1]`.","body":"If I am right, firstSmallLeft would be <code>[-1,-1,1,1,1,-1]</code>."},{"owner":{"account_id":25291640,"reputation":23,"user_id":19117609,"display_name":"Ray Knight"},"score":0,"creation_date":1659966053,"post_id":73278540,"comment_id":129413814,"body_markdown":"@ScottHunter ,        using a simple example input [1, 10, 9, 5,3], the output would be [-1,0,0,0, x]. When we are at the index 4 (element 3), it looks back at index 3 which is element 5. We check the firstSmallLeft index of element 5 by checking firstSmallLeft[3] , which gives us 0. Then we skipped checking 5, 9, 10...., and jumped to element at index 0. array[0] = 1, 1 &lt; 3, we terminated the back scan process. The idea is that since 5 &gt; 3 , firstSmallLeft of element 5 is guaranteed to be larger than firstSmallLeft of 3. We can skip a bunch of unnecessary elements.","body":"@ScottHunter ,        using a simple example input [1, 10, 9, 5,3], the output would be [-1,0,0,0, x]. When we are at the index 4 (element 3), it looks back at index 3 which is element 5. We check the firstSmallLeft index of element 5 by checking firstSmallLeft[3] , which gives us 0. Then we skipped checking 5, 9, 10...., and jumped to element at index 0. array[0] = 1, 1 &lt; 3, we terminated the back scan process. The idea is that since 5 &gt; 3 , firstSmallLeft of element 5 is guaranteed to be larger than firstSmallLeft of 3. We can skip a bunch of unnecessary elements."},{"owner":{"account_id":25291640,"reputation":23,"user_id":19117609,"display_name":"Ray Knight"},"score":0,"creation_date":1659966115,"post_id":73278540,"comment_id":129413837,"body_markdown":"@YvesDaoust, the result should be the  FIRST element thats smaller than the current one when doing a back scan (from right to left).  so for index 3 , array[3] = 6, the first element smaller than 6 is 5 which is at index 2, so firstSmallLeft[3] should be 2 instead of 1.","body":"@YvesDaoust, the result should be the  FIRST element thats smaller than the current one when doing a back scan (from right to left).  so for index 3 , array[3] = 6, the first element smaller than 6 is 5 which is at index 2, so firstSmallLeft[3] should be 2 instead of 1."},{"owner":{"account_id":682692,"reputation":49061,"user_id":535275,"accept_rate":91,"display_name":"Scott Hunter"},"score":0,"creation_date":1659966149,"post_id":73278540,"comment_id":129413845,"body_markdown":"Is there *ever* a circumstance where the body of the  `while` loop would be executed more than once?","body":"Is there <i>ever</i> a circumstance where the body of the  <code>while</code> loop would be executed more than once?"},{"owner":{"display_name":"user1196549"},"score":0,"creation_date":1659966155,"post_id":73278540,"comment_id":129413848,"body_markdown":"Ok, I understand now.","body":"Ok, I understand now."},{"owner":{"account_id":25291640,"reputation":23,"user_id":19117609,"display_name":"Ray Knight"},"score":0,"creation_date":1659966381,"post_id":73278540,"comment_id":129413915,"body_markdown":"@ScottHunter , yes.   consider this one [1,5,10, 8, 3] , before the last element, the output firstSmallLeft would be [-1,0,1,1, X] . we are now checking index = 4, which is element 3, i = 4, cur = 3.   array[3] = 8 &gt; array[4] = 3, so we do a backscan. cur = firstSmallLeft[cur] = firstSmallLeft[3] = 1, thus cur = 1.  but array[1] = 5 still &gt; array[i] = 3, we enters the next execution. cur = firstSmallLeft[1] = 0, now we get 1, 1 &lt; 3. we stopped there. thus firstSmallLeft[4] = 0.","body":"@ScottHunter , yes.   consider this one [1,5,10, 8, 3] , before the last element, the output firstSmallLeft would be [-1,0,1,1, X] . we are now checking index = 4, which is element 3, i = 4, cur = 3.   array[3] = 8 &gt; array[4] = 3, so we do a backscan. cur = firstSmallLeft[cur] = firstSmallLeft[3] = 1, thus cur = 1.  but array[1] = 5 still &gt; array[i] = 3, we enters the next execution. cur = firstSmallLeft[1] = 0, now we get 1, 1 &lt; 3. we stopped there. thus firstSmallLeft[4] = 0."},{"owner":{"display_name":"user1196549"},"score":0,"creation_date":1659969480,"post_id":73278540,"comment_id":129415172,"body_markdown":"@ScottHunter: with (2, 4, 3, 6, 5, 8, 7, 1), the number of executions (evaluations) of the while are 1, 1, 2, 1, 2, 1, 2, 5, for a total of 15.","body":"@ScottHunter: with (2, 4, 3, 6, 5, 8, 7, 1), the number of executions (evaluations) of the while are 1, 1, 2, 1, 2, 1, 2, 5, for a total of 15."}],"answers":[{"tags":[],"owner":{"account_id":7142980,"reputation":323253,"user_id":5459839,"display_name":"trincot"},"down_vote_count":1,"up_vote_count":8,"is_accepted":true,"score":7,"last_activity_date":1660074856,"creation_date":1659965417,"answer_id":73278678,"question_id":73278540,"body_markdown":"An important insight is that the last entry in `firstSmallLeft` that received a value (at index `i-1`) represents the **top of a stack**, which is implemented as a linked list. An entry in `firstSmallLeft` represents an input value (as the index where it occurs is the index in the input `array`) and a link in the linked list (as its value is an index in `firstSmallLeft`). The bottom element in the stack has a null-link (-1).\r\n\r\nIn general not all elements in `firstSmallLeft` are in the represented stack, since some indices are skipped over. An example:\r\n\r\nLet&#39;s say that the top of the stack is at index 100 (when `i` is 101), and it has as value 40, and `firstSmallLeft[40]` is -1, then that means we have a stack with just two elements (`array[100]` and `array[40]`), and none of the other indices in `firstSmallLeft` are included in the current stack. Each one of those once *was* on the stack, but have since been popped of the stack.\r\n\r\nEvery time `cur = firstSmallLeft[cur];` is executed (in the inner loop), we actually pop an element of the stack (the linked list that starts at `cur` is one element shorter).\r\n\r\nAnd when we do `firstSmallLeft[i] = cur` we push `array[i]` on the stack, making a reference to the part of the stack we wanted to keep.\r\n\r\nNow this &quot;virtual&quot; stack is identified, we see the following:\r\n\r\nA value is pushed exactly **once** on the stack, and can only be popped **once** from the stack, after which it is never visited again.\r\n\r\nThe overhead of evaluating the `while` expression once more to find that we need to exit the loop, occurs as many times as the outer loop iterates (i.e. `n-1` times)\r\n\r\nTherefore the algorithm is O(n).","title":"Why is this the Time Complexity of this For Loop O(N)?","body":"<p>An important insight is that the last entry in <code>firstSmallLeft</code> that received a value (at index <code>i-1</code>) represents the <strong>top of a stack</strong>, which is implemented as a linked list. An entry in <code>firstSmallLeft</code> represents an input value (as the index where it occurs is the index in the input <code>array</code>) and a link in the linked list (as its value is an index in <code>firstSmallLeft</code>). The bottom element in the stack has a null-link (-1).</p>\n<p>In general not all elements in <code>firstSmallLeft</code> are in the represented stack, since some indices are skipped over. An example:</p>\n<p>Let's say that the top of the stack is at index 100 (when <code>i</code> is 101), and it has as value 40, and <code>firstSmallLeft[40]</code> is -1, then that means we have a stack with just two elements (<code>array[100]</code> and <code>array[40]</code>), and none of the other indices in <code>firstSmallLeft</code> are included in the current stack. Each one of those once <em>was</em> on the stack, but have since been popped of the stack.</p>\n<p>Every time <code>cur = firstSmallLeft[cur];</code> is executed (in the inner loop), we actually pop an element of the stack (the linked list that starts at <code>cur</code> is one element shorter).</p>\n<p>And when we do <code>firstSmallLeft[i] = cur</code> we push <code>array[i]</code> on the stack, making a reference to the part of the stack we wanted to keep.</p>\n<p>Now this &quot;virtual&quot; stack is identified, we see the following:</p>\n<p>A value is pushed exactly <strong>once</strong> on the stack, and can only be popped <strong>once</strong> from the stack, after which it is never visited again.</p>\n<p>The overhead of evaluating the <code>while</code> expression once more to find that we need to exit the loop, occurs as many times as the outer loop iterates (i.e. <code>n-1</code> times)</p>\n<p>Therefore the algorithm is O(n).</p>\n"},{"tags":[],"owner":{"account_id":235018,"reputation":364834,"user_id":501557,"accept_rate":90,"display_name":"templatetypedef"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659974652,"creation_date":1659974652,"answer_id":73280915,"question_id":73278540,"body_markdown":"You can imagine this algorithm as creating a collection of chains of elements. For each element in the array, following the chain backwards will take you to smaller and smaller values until you walk off the array.\r\n\r\nTo build the chain for the next element of the array, we start by looking at the chain of the element before us. We’ll then follow that chain for some number of steps, then form the chain for the new element by adding a link back to the place we stopped.\r\n\r\nThe key intuition here is that ***the length of the chains drops quickly and grows slowly***. More concretely, let C be the length of the chain that starts from the current element of the array. We begin with C = 0. At each step in the algorithm, we drop C by some amount, then increment C by at most one. This means that across all n iterations of the algorithm, C increases at most n times. Therefore, since C is never negative, C can decrease at most n times. And therefore the total work spent in the inner while loop decreasing C, across all iterations of the algorithm, is O(n).\r\n\r\n(If you’re familiar with amortized analyses and potential functions, you can also think of this as setting &amp;Phi; = C.)\r\n\r\nThis same sort of argument arises in a number of other algorithms, such as building a Cartesian tree with a stack and constructing the failure table in the Knuth-Morris-Pratt string matching algorithm.","title":"Why is this the Time Complexity of this For Loop O(N)?","body":"<p>You can imagine this algorithm as creating a collection of chains of elements. For each element in the array, following the chain backwards will take you to smaller and smaller values until you walk off the array.</p>\n<p>To build the chain for the next element of the array, we start by looking at the chain of the element before us. We’ll then follow that chain for some number of steps, then form the chain for the new element by adding a link back to the place we stopped.</p>\n<p>The key intuition here is that <em><strong>the length of the chains drops quickly and grows slowly</strong></em>. More concretely, let C be the length of the chain that starts from the current element of the array. We begin with C = 0. At each step in the algorithm, we drop C by some amount, then increment C by at most one. This means that across all n iterations of the algorithm, C increases at most n times. Therefore, since C is never negative, C can decrease at most n times. And therefore the total work spent in the inner while loop decreasing C, across all iterations of the algorithm, is O(n).</p>\n<p>(If you’re familiar with amortized analyses and potential functions, you can also think of this as setting Φ = C.)</p>\n<p>This same sort of argument arises in a number of other algorithms, such as building a Cartesian tree with a stack and constructing the failure table in the Knuth-Morris-Pratt string matching algorithm.</p>\n"}],"owner":{"account_id":25291640,"reputation":23,"user_id":19117609,"display_name":"Ray Knight"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":203,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":73278678,"answer_count":2,"score":1,"last_activity_date":1660074856,"creation_date":1659964784,"question_id":73278540,"body_markdown":"Is there a way to understand why the time complexity of the following is O(N), either(or both) from intuition or by proof? \r\n\r\nWhat it does is basically that given the input of an integer `array`, we are creating the `firstSmallLeft` array of the same length where `firstSmallLeft[i]` = the first index where `array[index]` &lt; `array[i]` when doing the **back scan**. (i.e., for index i, it scans from i-1, ... , j until it finds the first smaller element such that array[j] &lt; array[i]) \r\n\r\n\r\nFor Example, if input = `[3,2,5,6,4,1]`.  \r\nfirstSmallLeft would be `[-1,-1,1,2,1,-1]`\r\n  \r\n  \r\n\r\n```\r\n//input int[] array\r\nint[] firstSmallLeft = new int[array.length];\r\nfirstSmallLeft[0] = -1;\r\nfor(int i = 1; i &lt; array.length; i ++){\r\n\tint cur = i -1;\r\n\twhile (cur &gt;=0 &amp;&amp; array[cur] &gt;= array[i]){\r\n\t\tcur = firstSmallLeft[cur];\r\n\t}\r\n\r\n\tfirstSmallLeft[i] = cur;\r\n}\r\n```","title":"Why is this the Time Complexity of this For Loop O(N)?","body":"<p>Is there a way to understand why the time complexity of the following is O(N), either(or both) from intuition or by proof?</p>\n<p>What it does is basically that given the input of an integer <code>array</code>, we are creating the <code>firstSmallLeft</code> array of the same length where <code>firstSmallLeft[i]</code> = the first index where <code>array[index]</code> &lt; <code>array[i]</code> when doing the <strong>back scan</strong>. (i.e., for index i, it scans from i-1, ... , j until it finds the first smaller element such that array[j] &lt; array[i])</p>\n<p>For Example, if input = <code>[3,2,5,6,4,1]</code>.<br />\nfirstSmallLeft would be <code>[-1,-1,1,2,1,-1]</code></p>\n<pre><code>//input int[] array\nint[] firstSmallLeft = new int[array.length];\nfirstSmallLeft[0] = -1;\nfor(int i = 1; i &lt; array.length; i ++){\n    int cur = i -1;\n    while (cur &gt;=0 &amp;&amp; array[cur] &gt;= array[i]){\n        cur = firstSmallLeft[cur];\n    }\n\n    firstSmallLeft[i] = cur;\n}\n</code></pre>\n"},{"tags":["java","selenium","selenium-webdriver","ui-testing"],"comments":[{"owner":{"account_id":12340469,"reputation":82,"user_id":9003853,"display_name":"Bhala T R"},"score":0,"creation_date":1660226583,"post_id":73297361,"comment_id":129487023,"body_markdown":"Try to collect the webelements of the required page (expected) in the @ Before method and in the @ Test method, collect the webelements of the actual page and then compare it by storing the previously collected webelements in an object.","body":"Try to collect the webelements of the required page (expected) in the @ Before method and in the @ Test method, collect the webelements of the actual page and then compare it by storing the previously collected webelements in an object."},{"owner":{"account_id":12360572,"reputation":1730,"user_id":9014957,"accept_rate":17,"display_name":"pburgr"},"score":0,"creation_date":1661166442,"post_id":73297361,"comment_id":129699109,"body_markdown":"Or just define expected elements&#39;s texts, locations, colors, sizes, etc. Than you can simply assert expected with current values.","body":"Or just define expected elements&#39;s texts, locations, colors, sizes, etc. Than you can simply assert expected with current values."}],"owner":{"account_id":24435699,"reputation":41,"user_id":18360012,"display_name":"dosu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660074704,"creation_date":1660074704,"question_id":73297361,"body_markdown":"I want to make a UI test using selenium.\r\nTest flow is after load the initial page, clicking the next page button, and going to the next page\r\n\r\nI have one page model that will follow the above test flow.(kinda like a dynamic page model, page elements will change when I am performing the test) And I want have another page model(expectedPage) that contains expected elements in the next page. (kinda like a static page model, page elements are the expected elements I want)\r\n\r\nThe previous page model will grab the web elements after we go to the next page.\r\nThe latter page model is expecting to contain the elements located in the next page.\r\nIn my test file, I will compare if the web elements in two models are the same\r\n\r\nI read the selenium guide, and found we can give the driver a URL directly so that we can go to whatever page we want. But my app is a single-page-application, so it looks like the URL way can&#39;t help me locate the next page (url always point to the initial page). If it&#39;s possible to go to the (expectedPage) page model without accessing the initial page?\r\n\r\n\r\n\r\n","title":"Selenium go to other page without accessing initial page","body":"<p>I want to make a UI test using selenium.\nTest flow is after load the initial page, clicking the next page button, and going to the next page</p>\n<p>I have one page model that will follow the above test flow.(kinda like a dynamic page model, page elements will change when I am performing the test) And I want have another page model(expectedPage) that contains expected elements in the next page. (kinda like a static page model, page elements are the expected elements I want)</p>\n<p>The previous page model will grab the web elements after we go to the next page.\nThe latter page model is expecting to contain the elements located in the next page.\nIn my test file, I will compare if the web elements in two models are the same</p>\n<p>I read the selenium guide, and found we can give the driver a URL directly so that we can go to whatever page we want. But my app is a single-page-application, so it looks like the URL way can't help me locate the next page (url always point to the initial page). If it's possible to go to the (expectedPage) page model without accessing the initial page?</p>\n"},{"tags":["java","unit-testing","spring-boot","spring-data-jpa","spring-boot-test"],"comments":[{"owner":{"account_id":1681986,"reputation":4236,"user_id":1546042,"display_name":"BitfulByte"},"score":0,"creation_date":1568886559,"post_id":55729160,"comment_id":102420869,"body_markdown":"I am facing the same issue. Did you by any chance found a solution?","body":"I am facing the same issue. Did you by any chance found a solution?"},{"owner":{"account_id":12446766,"reputation":183,"user_id":9062751,"display_name":"MAREK"},"score":0,"creation_date":1568986861,"post_id":55729160,"comment_id":102461436,"body_markdown":"@PimHazebroek no, I only managed to do workaround by adding `org.junit.Before` in which I will clear database before each test manually. I&#39;m still using `@SpringBootTest`. As an alternative, I can suggest using `javax.validation.constraints.NotNull`. This way your could should be validated on java side not by DB. But of course, this depends on your needs.\n\n**EDIT**: You might also try experiment with `org.springframework.test.annotation.DirtiesContext` but this might significantly increase time of tests.","body":"@PimHazebroek no, I only managed to do workaround by adding <code>org.junit.Before</code> in which I will clear database before each test manually. I&#39;m still using <code>@SpringBootTest</code>. As an alternative, I can suggest using <code>javax.validation.constraints.NotNull</code>. This way your could should be validated on java side not by DB. But of course, this depends on your needs.  <b>EDIT</b>: You might also try experiment with <code>org.springframework.test.annotation.DirtiesContext</code> but this might significantly increase time of tests."},{"owner":{"account_id":1681986,"reputation":4236,"user_id":1546042,"display_name":"BitfulByte"},"score":0,"creation_date":1569175955,"post_id":55729160,"comment_id":102502183,"body_markdown":"Ah too bad, thanks for letting me know though. I&#39;m also using @SpringBootTest instead. Don&#39;t want to reload the context unless there is absolutely no alternative. Although I&#39;m not sure how that would solve the issue with `@DataJpaTest`. Even with a single test it already fails. Pretty worthless annotation if you&#39;d ask me :-) but perhaps we just don&#39;t now how to use it properly ;-)","body":"Ah too bad, thanks for letting me know though. I&#39;m also using @SpringBootTest instead. Don&#39;t want to reload the context unless there is absolutely no alternative. Although I&#39;m not sure how that would solve the issue with <code>@DataJpaTest</code>. Even with a single test it already fails. Pretty worthless annotation if you&#39;d ask me :-) but perhaps we just don&#39;t now how to use it properly ;-)"},{"owner":{"account_id":12446766,"reputation":183,"user_id":9062751,"display_name":"MAREK"},"score":0,"creation_date":1569269765,"post_id":55729160,"comment_id":102534917,"body_markdown":"Well, I probably wasn&#39;t very clear. I meant that you might try to use `DirtiesContext` with `SpringBootTest`, so that you don&#39;t have to clear DB manually. If your tests don&#39;t take much time, this might be worth trying. [Doc](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/test/annotation/DirtiesContext.html) says: _Use this annotation if a test has modified the context — for example, ... modifying the state of an embedded database_","body":"Well, I probably wasn&#39;t very clear. I meant that you might try to use <code>DirtiesContext</code> with <code>SpringBootTest</code>, so that you don&#39;t have to clear DB manually. If your tests don&#39;t take much time, this might be worth trying. <a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/test/annotation/DirtiesContext.html\" rel=\"nofollow noreferrer\">Doc</a> says: <i>Use this annotation if a test has modified the context — for example, ... modifying the state of an embedded database</i>"},{"owner":{"account_id":1681986,"reputation":4236,"user_id":1546042,"display_name":"BitfulByte"},"score":0,"creation_date":1569305585,"post_id":55729160,"comment_id":102543161,"body_markdown":"Ah, now I get it. I just inject the repository and then clear the tables. Much faster than reloaded the context.","body":"Ah, now I get it. I just inject the repository and then clear the tables. Much faster than reloaded the context."}],"answers":[{"tags":[],"owner":{"account_id":11789481,"reputation":1,"user_id":13274970,"display_name":"krimou"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660073528,"creation_date":1659710635,"answer_id":73251523,"question_id":55729160,"body_markdown":"This can be resolved by adding the line below to the test class\r\n\r\n    @org.springframework.transaction.annotation.Transactional(propagation = Propagation.NOT_SUPPORTED)","title":"@DataJpaTest does not recognize not null restrictions in embedded id","body":"<p>This can be resolved by adding the line below to the test class</p>\n<pre><code>@org.springframework.transaction.annotation.Transactional(propagation = Propagation.NOT_SUPPORTED)\n</code></pre>\n"}],"owner":{"account_id":12446766,"reputation":183,"user_id":9062751,"display_name":"MAREK"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1427,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1660073528,"creation_date":1555509212,"question_id":55729160,"body_markdown":"I&#39;m trying to setup my db unit tests using `@DataJpaTest` annotation to avoid loading full Spring application context. But it doesn&#39;t perform the same way like when I use `@SpringBootTest` + configured H2 database. When I use H2 database I receive proper exception when trying to save entity with null id.\r\n\r\n&gt; JdbcSQLIntegrityConstraintViolationException: NULL not allowed for column &quot;ID_PART_2&quot;\r\n\r\nBut when I use DB auto-configured with use of `@DataJpaTest` as stated [here](https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-testing.html#boot-features-testing-spring-boot-applications-testing-autoconfigured-jpa-test)\r\n\r\n&gt; By default, it configures an in-memory embedded database, scans for @Entity classes, and configures Spring Data JPA repositories\r\n\r\nThe repository allows to insert entities with null id.\r\n\r\nThe code for my entity is:\r\n\r\n    package com.mycompany.test.db;\r\n    \r\n    import lombok.Data;\r\n    \r\n    import javax.persistence.*;\r\n    import java.io.Serializable;\r\n    \r\n    @Data\r\n    @Entity\r\n    @Table(name = &quot;MY_TABLE&quot;, schema = &quot;MY_SCHEMA&quot;)\r\n    public class MyEntity {\r\n    \r\n        //Works fine when using @Id\r\n    //    @Id\r\n    //    @Column(name = &quot;ID&quot;, nullable = false)\r\n    //    private String id;\r\n    \r\n        @EmbeddedId\r\n        private MyId myId;\r\n    \r\n        @Data\r\n        @Embeddable\r\n        public static class MyId implements Serializable {\r\n    \r\n            //Single field reproduces the problem\r\n    //        @Column(name = &quot;ID_PART_1&quot;, nullable = false)\r\n    //        private String idPart1;\r\n            @Column(name = &quot;ID_PART_2&quot;, nullable = false)\r\n            private String idPart2;\r\n        }\r\n    }\r\n\r\nI&#39;m using basic CRUD repository `CrudRepository&lt;MyEntity, MyEntity.MyId&gt;`\r\n\r\nMy tests code looks like this:\r\n\r\n    package com.mycompany.test.db;\r\n    \r\n    import org.junit.Assert;\r\n    import org.junit.Test;\r\n    import org.junit.runner.RunWith;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;\r\n    import org.springframework.boot.test.context.SpringBootTest;\r\n    import org.springframework.test.context.junit4.SpringRunner;\r\n    \r\n    @RunWith(SpringRunner.class)\r\n    @SpringBootTest//works as expected\r\n    //@DataJpaTest//doesn&#39;t work\r\n    public class MyRepositoryTest {\r\n    \r\n        @Autowired\r\n        private MyRepository repository;\r\n    \r\n        private MyEntity.MyId createMyId(String part1, String part2){\r\n            MyEntity.MyId myId = new MyEntity.MyId();\r\n    //        myId.setIdPart1(part1);\r\n            myId.setIdPart2(part2);\r\n            return myId;\r\n        }\r\n    \r\n        @Test\r\n        public void testSaveAndRead(){\r\n            MyEntity entity = new MyEntity();\r\n            entity.setMyId(createMyId(&quot;part1&quot;, &quot;part2&quot;));\r\n    \r\n            repository.save(entity);\r\n            Assert.assertNotNull(repository.findById(createMyId(&quot;part1&quot;, &quot;part2&quot;)));\r\n        }\r\n    \r\n        @Test\r\n        public void testSaveWithNoPrimaryKeyFails(){\r\n            try{\r\n                MyEntity entity = new MyEntity();\r\n                entity.setMyId(createMyId(&quot;part1&quot;, null));\r\n                repository.save(entity);\r\n                Assert.fail();\r\n            }catch(Exception expected){\r\n                expected.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\nI also tried to disable DB auto-configured with use of `@DataJpaTest` by adding `@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)` but it did not change anything.\r\n\r\n**NOTE**: Problem occurs only for embedded ids. For what I see in stacktraces, in case of `javax.persistence.Id` Spring JPA fails on validation before even trying to save such entity into database.\r\n\r\nWhy the behavior is different when using `@DataJpaTest` and `@SpringBootTest`? What database is used when using `@DataJpaTest`? I think problem would be solved if Spring would use H2 in both cases, but I don&#39;t know how to achieve this.\r\n","title":"@DataJpaTest does not recognize not null restrictions in embedded id","body":"<p>I'm trying to setup my db unit tests using <code>@DataJpaTest</code> annotation to avoid loading full Spring application context. But it doesn't perform the same way like when I use <code>@SpringBootTest</code> + configured H2 database. When I use H2 database I receive proper exception when trying to save entity with null id.</p>\n\n<blockquote>\n  <p>JdbcSQLIntegrityConstraintViolationException: NULL not allowed for column \"ID_PART_2\"</p>\n</blockquote>\n\n<p>But when I use DB auto-configured with use of <code>@DataJpaTest</code> as stated <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-testing.html#boot-features-testing-spring-boot-applications-testing-autoconfigured-jpa-test\" rel=\"nofollow noreferrer\">here</a></p>\n\n<blockquote>\n  <p>By default, it configures an in-memory embedded database, scans for @Entity classes, and configures Spring Data JPA repositories</p>\n</blockquote>\n\n<p>The repository allows to insert entities with null id.</p>\n\n<p>The code for my entity is:</p>\n\n<pre><code>package com.mycompany.test.db;\n\nimport lombok.Data;\n\nimport javax.persistence.*;\nimport java.io.Serializable;\n\n@Data\n@Entity\n@Table(name = \"MY_TABLE\", schema = \"MY_SCHEMA\")\npublic class MyEntity {\n\n    //Works fine when using @Id\n//    @Id\n//    @Column(name = \"ID\", nullable = false)\n//    private String id;\n\n    @EmbeddedId\n    private MyId myId;\n\n    @Data\n    @Embeddable\n    public static class MyId implements Serializable {\n\n        //Single field reproduces the problem\n//        @Column(name = \"ID_PART_1\", nullable = false)\n//        private String idPart1;\n        @Column(name = \"ID_PART_2\", nullable = false)\n        private String idPart2;\n    }\n}\n</code></pre>\n\n<p>I'm using basic CRUD repository <code>CrudRepository&lt;MyEntity, MyEntity.MyId&gt;</code></p>\n\n<p>My tests code looks like this:</p>\n\n<pre><code>package com.mycompany.test.db;\n\nimport org.junit.Assert;\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.test.context.junit4.SpringRunner;\n\n@RunWith(SpringRunner.class)\n@SpringBootTest//works as expected\n//@DataJpaTest//doesn't work\npublic class MyRepositoryTest {\n\n    @Autowired\n    private MyRepository repository;\n\n    private MyEntity.MyId createMyId(String part1, String part2){\n        MyEntity.MyId myId = new MyEntity.MyId();\n//        myId.setIdPart1(part1);\n        myId.setIdPart2(part2);\n        return myId;\n    }\n\n    @Test\n    public void testSaveAndRead(){\n        MyEntity entity = new MyEntity();\n        entity.setMyId(createMyId(\"part1\", \"part2\"));\n\n        repository.save(entity);\n        Assert.assertNotNull(repository.findById(createMyId(\"part1\", \"part2\")));\n    }\n\n    @Test\n    public void testSaveWithNoPrimaryKeyFails(){\n        try{\n            MyEntity entity = new MyEntity();\n            entity.setMyId(createMyId(\"part1\", null));\n            repository.save(entity);\n            Assert.fail();\n        }catch(Exception expected){\n            expected.printStackTrace();\n        }\n    }\n}\n</code></pre>\n\n<p>I also tried to disable DB auto-configured with use of <code>@DataJpaTest</code> by adding <code>@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)</code> but it did not change anything.</p>\n\n<p><strong>NOTE</strong>: Problem occurs only for embedded ids. For what I see in stacktraces, in case of <code>javax.persistence.Id</code> Spring JPA fails on validation before even trying to save such entity into database.</p>\n\n<p>Why the behavior is different when using <code>@DataJpaTest</code> and <code>@SpringBootTest</code>? What database is used when using <code>@DataJpaTest</code>? I think problem would be solved if Spring would use H2 in both cases, but I don't know how to achieve this.</p>\n"},{"tags":["java","selenium"],"comments":[{"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1660076386,"post_id":73297156,"comment_id":129446441,"body_markdown":"Update the question with your text based code trials.","body":"Update the question with your text based code trials."},{"owner":{"account_id":18278959,"reputation":203,"user_id":13308124,"display_name":"Thomazzz"},"score":0,"creation_date":1660110354,"post_id":73297156,"comment_id":129452108,"body_markdown":"Load the content of the page into a string and see if the required element is there.","body":"Load the content of the page into a string and see if the required element is there."},{"owner":{"account_id":12340469,"reputation":82,"user_id":9003853,"display_name":"Bhala T R"},"score":0,"creation_date":1660217719,"post_id":73297156,"comment_id":129483471,"body_markdown":"Either it could be one of the following, please try it out:\n1. different window - window handling - switchTo()\n2. iFrame\n3. try javascript for locating the webelements","body":"Either it could be one of the following, please try it out: 1. different window - window handling - switchTo() 2. iFrame 3. try javascript for locating the webelements"}],"owner":{"account_id":24371250,"reputation":1,"user_id":18304173,"display_name":"VGS"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660073425,"creation_date":1660073425,"question_id":73297156,"body_markdown":"I have to find an element on the page by XPath.\r\nWhen i open the page directly (through chromeDriver.get(&quot;https://some source&quot;) - i can find all elements that i need. \r\n\r\nBut when i run auto-test and ask Selenium:\r\n 1. Open Browser (yandex.ru or any other)\r\n 2. Put keyWord on search field and click &quot;Search&quot;\r\n 3. Find header that has link to https://some source and click that\r\n 4. Find needed elements on page (on https://some source) &lt;br&gt;\r\n&lt;br&gt;\r\nI face a problem: needed elements not found (you cannot find any element on this page). \r\n\r\n*So, we have same web-page, we have same logic on that page (we are looking for webElements)*, **but result depends on way how we got on source**. If we go directly - everything is fine, if selenium find header and click that to get on the source - problem appears. \r\n\r\nyou can see video of problem: \r\n[enter link description here][1]\r\n\r\n\r\n  [1]: https://disk.yandex.ru/i/u9cexE_BIQQsMA","title":"Cannot find WebElement (Selenium, Java)","body":"<p>I have to find an element on the page by XPath.\nWhen i open the page directly (through chromeDriver.get(&quot;https://some source&quot;) - i can find all elements that i need.</p>\n<p>But when i run auto-test and ask Selenium:</p>\n<ol>\n<li>Open Browser (yandex.ru or any other)</li>\n<li>Put keyWord on search field and click &quot;Search&quot;</li>\n<li>Find header that has link to https://some source and click that</li>\n<li>Find needed elements on page (on https://some source) <br>\n<br>\nI face a problem: needed elements not found (you cannot find any element on this page).</li>\n</ol>\n<p><em>So, we have same web-page, we have same logic on that page (we are looking for webElements)</em>, <strong>but result depends on way how we got on source</strong>. If we go directly - everything is fine, if selenium find header and click that to get on the source - problem appears.</p>\n<p>you can see video of problem:\n<a href=\"https://disk.yandex.ru/i/u9cexE_BIQQsMA\" rel=\"nofollow noreferrer\">enter link description here</a></p>\n"},{"tags":["java","spring","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":15910691,"reputation":1091,"user_id":11480721,"display_name":"Ausgefuchster"},"score":0,"creation_date":1659797257,"post_id":73254705,"comment_id":129382799,"body_markdown":"By response you mean a REST Api response?","body":"By response you mean a REST Api response?"},{"owner":{"account_id":12024361,"reputation":2102,"user_id":8796806,"accept_rate":75,"display_name":"Timothy Clotworthy"},"score":0,"creation_date":1659889544,"post_id":73254705,"comment_id":129397041,"body_markdown":"@Ausgefuchster yes a REST Api response is certainly acceptable.","body":"@Ausgefuchster yes a REST Api response is certainly acceptable."},{"owner":{"account_id":4737721,"reputation":651,"user_id":3831579,"accept_rate":35,"display_name":"Sagar Rout"},"score":0,"creation_date":1659990475,"post_id":73254705,"comment_id":129422658,"body_markdown":"In the interface you can create one default method with params and invoke the above method and implement logic there.","body":"In the interface you can create one default method with params and invoke the above method and implement logic there."},{"owner":{"account_id":12024361,"reputation":2102,"user_id":8796806,"accept_rate":75,"display_name":"Timothy Clotworthy"},"score":0,"creation_date":1660050490,"post_id":73254705,"comment_id":129437032,"body_markdown":"@SagarRout, I appreciate response, but do not understand what you are suggesting (.e.g &quot;..and invoke the above method and implement logic there&quot;).","body":"@SagarRout, I appreciate response, but do not understand what you are suggesting (.e.g &quot;..and invoke the above method and implement logic there&quot;)."}],"answers":[{"tags":[],"owner":{"account_id":15910691,"reputation":1091,"user_id":11480721,"display_name":"Ausgefuchster"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659899296,"creation_date":1659899296,"answer_id":73270307,"question_id":73254705,"body_markdown":"Since the return value of this methods indicates the number of modified objects (in your can it can only be 0 or 1) I would just use it to translate it into a more understandable response. \r\n\r\nThe simplest case is a REST Api:\r\n\r\nWhen the Method returns 1 the POST/PUT/PATCH call was successful (if there was no other error) and you would return ``201 Created`` and maybe a little more like a Location header. \r\n\r\nAnd when it returns 0 it means no object got modified and because it&#39;s an insert this shouldn&#39;t happen and therefore you would return ``500 InternalServerError``\r\n\r\nBut I would say in your case this is redundant because as I said it&#39;s an insert , you only have those two return options and I guess if something doesn&#39;t work during the insert you already get an exception by spring boot and therefore when you called the method without getting an error I would say it was successful. \r\n\r\nBut ofcourse you can double check to be sure and maybe even use it for tests to enforce the expected behavior or something else.","title":"How to return useful information in JPA custom query whose return value is not 1?","body":"<p>Since the return value of this methods indicates the number of modified objects (in your can it can only be 0 or 1) I would just use it to translate it into a more understandable response.</p>\n<p>The simplest case is a REST Api:</p>\n<p>When the Method returns 1 the POST/PUT/PATCH call was successful (if there was no other error) and you would return <code>201 Created</code> and maybe a little more like a Location header.</p>\n<p>And when it returns 0 it means no object got modified and because it's an insert this shouldn't happen and therefore you would return <code>500 InternalServerError</code></p>\n<p>But I would say in your case this is redundant because as I said it's an insert , you only have those two return options and I guess if something doesn't work during the insert you already get an exception by spring boot and therefore when you called the method without getting an error I would say it was successful.</p>\n<p>But ofcourse you can double check to be sure and maybe even use it for tests to enforce the expected behavior or something else.</p>\n"},{"tags":[],"owner":{"account_id":4737721,"reputation":651,"user_id":3831579,"accept_rate":35,"display_name":"Sagar Rout"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1660073325,"creation_date":1660073325,"answer_id":73297138,"question_id":73254705,"body_markdown":"I would not recommend the approach of using return type as valid operation or not. I would prefer having database level constraint like unique constraint, check constraint or trigger check for insert/update/delete.\r\n\r\nNevertheless, we can use default method inside interface and throw database exception and in Spring you can configure ExceptionHandler to wrap the exception and return with some valid error code ?\r\n\r\n```\r\n    public interface MyRepo extends JpaRepository&lt;SMark, String&gt; {\r\n\r\n    @Transactional\r\n    @Modifying\r\n    @Query(value = &quot;INSERT INTO my_table(id, col_1, col_2) &quot; +\r\n            &quot;values(:col_1, :col_2))&quot;, nativeQuery = true)\r\n    int insertRecord(@Param(&quot;col_1&quot;) String col_1, @Param(&quot;col_2&quot;) String col_2);\r\n\r\n    default void insert(String col1, String col2) {\r\n        if (insertRecord(col1, col2) != 1) {\r\n            throw new DataIntegrityViolationException(&quot;Unable to perform DML operation.&quot;);\r\n        }\r\n    }\r\n}\r\n```","title":"How to return useful information in JPA custom query whose return value is not 1?","body":"<p>I would not recommend the approach of using return type as valid operation or not. I would prefer having database level constraint like unique constraint, check constraint or trigger check for insert/update/delete.</p>\n<p>Nevertheless, we can use default method inside interface and throw database exception and in Spring you can configure ExceptionHandler to wrap the exception and return with some valid error code ?</p>\n<pre><code>    public interface MyRepo extends JpaRepository&lt;SMark, String&gt; {\n\n    @Transactional\n    @Modifying\n    @Query(value = &quot;INSERT INTO my_table(id, col_1, col_2) &quot; +\n            &quot;values(:col_1, :col_2))&quot;, nativeQuery = true)\n    int insertRecord(@Param(&quot;col_1&quot;) String col_1, @Param(&quot;col_2&quot;) String col_2);\n\n    default void insert(String col1, String col2) {\n        if (insertRecord(col1, col2) != 1) {\n            throw new DataIntegrityViolationException(&quot;Unable to perform DML operation.&quot;);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":12024361,"reputation":2102,"user_id":8796806,"accept_rate":75,"display_name":"Timothy Clotworthy"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73297138,"answer_count":2,"score":0,"last_activity_date":1660073325,"creation_date":1659729282,"question_id":73254705,"body_markdown":"I have several custom queries in an interface that extends JpaRepository. The interface is analogous to the below (note: the below is just for illustration, and may have errors, but don&#39;t concern yourself with that).\r\n\r\n    public interface MyRepo extends JpaRepository&lt;SMark, String&gt; {\r\n\r\n    @Transactional\r\n\t@Modifying\r\n\t@Query(value = &quot;INSERT INTO my_table(id, col_1, col_2) &quot; +\r\n\t\t\t&quot;values(:col_1, :col_2))&quot;, nativeQuery = true)\r\n\tint insertRecord(@Param(&quot;col_1&quot;) String col_1, @Param(&quot;col_2&quot;) String col_2);\r\n\r\nSo, my issue is that I am finding it difficult to do anything useful with the int return type for anything other than a successful query (which will return a 1). Is there a way to do anything useful with the return other than sending the value as part of the response? In other words, if the response is not a 1, and an exception is not thrown, can the non-1 response be translated into something more informative to the user? \r\n\r\nFor example, I am currently doing the following, which I would like to improve upon if I was a confident about the not-1 status:\r\n\r\n\r\n\r\n        if(status == 1) {\r\n            StatusResponse statusResponse = new StatusResponse(&quot;Successful Delete &quot;, null);\r\n            return new ResponseEntity&lt;&gt;(statusResponse, HttpStatus.OK);\r\n        }\r\n        else {\r\n            StatusResponse statusResponse = new StatusResponse(&quot;Delete not successful (lacking details from response)  &quot;, null);\r\n            return new ResponseEntity&lt;&gt;(statusResponse, HttpStatus.NOT_ACCEPTABLE);\r\n        }\r\nGrateful for any response. Thanks!","title":"How to return useful information in JPA custom query whose return value is not 1?","body":"<p>I have several custom queries in an interface that extends JpaRepository. The interface is analogous to the below (note: the below is just for illustration, and may have errors, but don't concern yourself with that).</p>\n<pre><code>public interface MyRepo extends JpaRepository&lt;SMark, String&gt; {\n\n@Transactional\n@Modifying\n@Query(value = &quot;INSERT INTO my_table(id, col_1, col_2) &quot; +\n        &quot;values(:col_1, :col_2))&quot;, nativeQuery = true)\nint insertRecord(@Param(&quot;col_1&quot;) String col_1, @Param(&quot;col_2&quot;) String col_2);\n</code></pre>\n<p>So, my issue is that I am finding it difficult to do anything useful with the int return type for anything other than a successful query (which will return a 1). Is there a way to do anything useful with the return other than sending the value as part of the response? In other words, if the response is not a 1, and an exception is not thrown, can the non-1 response be translated into something more informative to the user?</p>\n<p>For example, I am currently doing the following, which I would like to improve upon if I was a confident about the not-1 status:</p>\n<pre><code>    if(status == 1) {\n        StatusResponse statusResponse = new StatusResponse(&quot;Successful Delete &quot;, null);\n        return new ResponseEntity&lt;&gt;(statusResponse, HttpStatus.OK);\n    }\n    else {\n        StatusResponse statusResponse = new StatusResponse(&quot;Delete not successful (lacking details from response)  &quot;, null);\n        return new ResponseEntity&lt;&gt;(statusResponse, HttpStatus.NOT_ACCEPTABLE);\n    }\n</code></pre>\n<p>Grateful for any response. Thanks!</p>\n"},{"tags":["java","swing","netbeans","while-loop"],"comments":[{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1558266253,"post_id":56207415,"comment_id":99036351,"body_markdown":"Don&#39;t [block the event dispatch thread](https://stackoverflow.com/search?tab=votes&amp;q=%5bswing%5d%20block%20event%20dispatch%20thread).","body":"Don&#39;t <a href=\"https://stackoverflow.com/search?tab=votes&amp;q=%5bswing%5d%20block%20event%20dispatch%20thread\">block the event dispatch thread</a>."},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1558266735,"post_id":56207415,"comment_id":99036446,"body_markdown":"&quot;//If I put this println it works&quot; may suggests problem related to [Questions about thread+loop not working without print statement](https://meta.stackoverflow.com/q/269174)","body":"&quot;//If I put this println it works&quot; may suggests problem related to <a href=\"https://meta.stackoverflow.com/q/269174\">Questions about thread+loop not working without print statement</a>"}],"answers":[{"tags":[],"owner":{"account_id":121840,"reputation":36551,"user_id":315228,"accept_rate":100,"display_name":"SMA"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1558266334,"creation_date":1558266334,"answer_id":56207457,"question_id":56207415,"body_markdown":"By default boolean variables of a Java Object in Java gets set to default value as `false`. Looking at your code `mapa.todasComidas()`, you never explicitly set the same.\r\n\r\nNow in your while loop, you are checking whether `todasComidas` method returns you `true` which won&#39;t be the case and hence never resets the same i.e. execute the inner statements of if condition. Your outer statement does gets executed and prints on console as its not guarded by any if conditions.","title":"Issue with a while-loop while executing it","body":"<p>By default boolean variables of a Java Object in Java gets set to default value as <code>false</code>. Looking at your code <code>mapa.todasComidas()</code>, you never explicitly set the same.</p>\n\n<p>Now in your while loop, you are checking whether <code>todasComidas</code> method returns you <code>true</code> which won't be the case and hence never resets the same i.e. execute the inner statements of if condition. Your outer statement does gets executed and prints on console as its not guarded by any if conditions.</p>\n"}],"owner":{"account_id":14665398,"reputation":5,"user_id":10591381,"display_name":"Emanuel Heged&#252;s"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":56207457,"answer_count":1,"score":0,"last_activity_date":1660072908,"creation_date":1558266013,"question_id":56207415,"body_markdown":"I have a program that implements a minigame with `swing`, and in the main class I have a loop which listens to a Boolean in the map of the game. The loop implemented with `while` does not execute an instruction if it is the only one and I don`t know why.\r\n\r\nI tried putting some other instructions to check if loop goes on, and it worked fine, but when I put only the `if` that I want it does not work.\r\n\r\n```\r\npublic class ejecutor extends JFrame{\r\nboolean ejecutando = true;\r\n    \r\n    public ejecutor(){\r\n        mapa mapa = new mapa(); //the map of my game\r\n        setSize(665,690);\r\n        add(mapa);\r\n        setResizable(false);\r\n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        setLocationRelativeTo(null);\r\n        setVisible(true);\r\n        while(ejecutando){ \r\n            if(mapa.todasComidas()){\r\n            //wLabel();\r\n            ejecutando=false;\r\n            System.out.println(&quot;You finished!!&quot;);\r\n            }\r\n//If I put this println it works, if I only use the If, without any other instruction inside the while, it does not do anything at all\r\n            System.out.println(&quot;............&quot;);\r\n        }\r\n    }\r\n//I execute the constructor in the main...\r\n```","title":"Issue with a while-loop while executing it","body":"<p>I have a program that implements a minigame with <code>swing</code>, and in the main class I have a loop which listens to a Boolean in the map of the game. The loop implemented with <code>while</code> does not execute an instruction if it is the only one and I don`t know why.</p>\n<p>I tried putting some other instructions to check if loop goes on, and it worked fine, but when I put only the <code>if</code> that I want it does not work.</p>\n<pre><code>public class ejecutor extends JFrame{\nboolean ejecutando = true;\n    \n    public ejecutor(){\n        mapa mapa = new mapa(); //the map of my game\n        setSize(665,690);\n        add(mapa);\n        setResizable(false);\n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        setLocationRelativeTo(null);\n        setVisible(true);\n        while(ejecutando){ \n            if(mapa.todasComidas()){\n            //wLabel();\n            ejecutando=false;\n            System.out.println(&quot;You finished!!&quot;);\n            }\n//If I put this println it works, if I only use the If, without any other instruction inside the while, it does not do anything at all\n            System.out.println(&quot;............&quot;);\n        }\n    }\n//I execute the constructor in the main...\n</code></pre>\n"},{"tags":["java","javafx","deployment","command-line"],"comments":[{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":3,"creation_date":1648610317,"post_id":71671046,"comment_id":126665605,"body_markdown":"Maven/Gradle *is* the “makefile” of the Java world. And both of those tools operate independently of the IDE.","body":"Maven/Gradle <i>is</i> the “makefile” of the Java world. And both of those tools operate independently of the IDE."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1648620071,"post_id":71671046,"comment_id":126667318,"body_markdown":"Use [warp](https://github.com/dgiagio/warp) to create your exe from a [jlink image](https://www.baeldung.com/jlink).  There is a demo in [How to create a standalone .exe in Java (that runs without an installer and a JRE)](https://stackoverflow.com/questions/69811401/how-to-create-a-standalone-exe-in-java-that-runs-without-an-installer-and-a-jr).  Replace the maven portions of that answer with whatever you want if you don&#39;t want to use maven.","body":"Use <a href=\"https://github.com/dgiagio/warp\" rel=\"nofollow noreferrer\">warp</a> to create your exe from a <a href=\"https://www.baeldung.com/jlink\" rel=\"nofollow noreferrer\">jlink image</a>.  There is a demo in <a href=\"https://stackoverflow.com/questions/69811401/how-to-create-a-standalone-exe-in-java-that-runs-without-an-installer-and-a-jr\">How to create a standalone .exe in Java (that runs without an installer and a JRE)</a>.  Replace the maven portions of that answer with whatever you want if you don&#39;t want to use maven."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1648621870,"post_id":71671046,"comment_id":126667801,"body_markdown":"I noted that you use some non-modular jars on the classpath, which won&#39;t work with jlink.  You can research methods to address that if you wish (which are pretty ugly and I don&#39;t have a specific recommendation for).","body":"I noted that you use some non-modular jars on the classpath, which won&#39;t work with jlink.  You can research methods to address that if you wish (which are pretty ugly and I don&#39;t have a specific recommendation for)."},{"owner":{"account_id":5347179,"reputation":10433,"user_id":4262407,"accept_rate":40,"display_name":"mipa"},"score":2,"creation_date":1648635442,"post_id":71671046,"comment_id":126672739,"body_markdown":"I am wondering whether it actually makes sense to help people making progress which are obviously on the wrong track anyway. They&#39;ll just have a longer way back.","body":"I am wondering whether it actually makes sense to help people making progress which are obviously on the wrong track anyway. They&#39;ll just have a longer way back."},{"owner":{"account_id":24710254,"reputation":68,"user_id":18600540,"display_name":"LucasJ"},"score":0,"creation_date":1648683526,"post_id":71671046,"comment_id":126689951,"body_markdown":"@BasilBourque yeah I know, I just wanted to stick with the good old make because I&#39;m a C programmer...","body":"@BasilBourque yeah I know, I just wanted to stick with the good old make because I&#39;m a C programmer..."},{"owner":{"account_id":24710254,"reputation":68,"user_id":18600540,"display_name":"LucasJ"},"score":0,"creation_date":1648684168,"post_id":71671046,"comment_id":126690057,"body_markdown":"@jewelsea thank you, very interesting solution... that &quot;modular&quot; concept of java is kinda strange, I&#39;ll try to learn more about it.","body":"@jewelsea thank you, very interesting solution... that &quot;modular&quot; concept of java is kinda strange, I&#39;ll try to learn more about it."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1648684462,"post_id":71671046,"comment_id":126690103,"body_markdown":"@LucasJ See Wikipedia, [*Java Platform Module System*](https://en.wikipedia.org/wiki/Java_Platform_Module_System). JPMS was bolted onto Java only relatively recently, Java 9 in 2017. In contrast, Java has always had its package naming and the [Classpath](https://en.wikipedia.org/wiki/Classpath). The main purpose of JPMS is to modularize the Java platform to enable what you are trying to do, build a standalone app that includes only the parts you need/use. JPMS works hand-in-hand with [*jlink*](https://openjdk.java.net/jeps/282) and [*jpackage*](https://openjdk.java.net/jeps/392) tooling.","body":"@LucasJ See Wikipedia, <a href=\"https://en.wikipedia.org/wiki/Java_Platform_Module_System\" rel=\"nofollow noreferrer\"><i>Java Platform Module System</i></a>. JPMS was bolted onto Java only relatively recently, Java 9 in 2017. In contrast, Java has always had its package naming and the <a href=\"https://en.wikipedia.org/wiki/Classpath\" rel=\"nofollow noreferrer\">Classpath</a>. The main purpose of JPMS is to modularize the Java platform to enable what you are trying to do, build a standalone app that includes only the parts you need/use. JPMS works hand-in-hand with <a href=\"https://openjdk.java.net/jeps/282\" rel=\"nofollow noreferrer\"><i>jlink</i></a> and <a href=\"https://openjdk.java.net/jeps/392\" rel=\"nofollow noreferrer\"><i>jpackage</i></a> tooling."},{"owner":{"account_id":24710254,"reputation":68,"user_id":18600540,"display_name":"LucasJ"},"score":0,"creation_date":1648685176,"post_id":71671046,"comment_id":126690201,"body_markdown":"@mipa I just want to explore all my options and in the end choose one which works best for me, even if it&#39;s not 100% what I wanted in the beginning. Btw exploring non-conventional solutions sometimes gives valuable knowledge. Peace.","body":"@mipa I just want to explore all my options and in the end choose one which works best for me, even if it&#39;s not 100% what I wanted in the beginning. Btw exploring non-conventional solutions sometimes gives valuable knowledge. Peace."}],"answers":[{"tags":[],"owner":{"account_id":6540092,"reputation":1270,"user_id":5058026,"accept_rate":62,"display_name":"Martin CR"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660072089,"creation_date":1660072089,"answer_id":73296937,"question_id":71671046,"body_markdown":"Apologies if you have already come across it, but you might find it useful to take a look at https://docs.oracle.com/javafx/2/deployment/jfxpub-deployment.htm\r\n\r\n&gt; This guide provides basic and advanced information about building, packaging, and deploying your JavaFX application. JavaFX deployment requires no special code in your application and has many other differences from Java deployment. Even if you are an advanced Java developer, it is a good idea to review the Getting Started page.","title":"How to deploy a self-contained JavaFX application without using Maven/Gradle/IDEs?","body":"<p>Apologies if you have already come across it, but you might find it useful to take a look at <a href=\"https://docs.oracle.com/javafx/2/deployment/jfxpub-deployment.htm\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javafx/2/deployment/jfxpub-deployment.htm</a></p>\n<blockquote>\n<p>This guide provides basic and advanced information about building, packaging, and deploying your JavaFX application. JavaFX deployment requires no special code in your application and has many other differences from Java deployment. Even if you are an advanced Java developer, it is a good idea to review the Getting Started page.</p>\n</blockquote>\n"}],"owner":{"account_id":24710254,"reputation":68,"user_id":18600540,"display_name":"LucasJ"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":798,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660072089,"creation_date":1648609518,"question_id":71671046,"body_markdown":"I&#39;m working on a simple JavaFX project using: **Windows**, **VSCode/PowerShell**, **Java SDK 17.0.2**, **JavaFX SDK 17.0.2**. \r\n\r\nHere is my project structure:\r\n\r\n    bin/\r\n        snaptools/\r\n            Controller.class\r\n            Main.class\r\n            SnapTransceiver.class\r\n            icon.png\r\n            snaptools.fxml\r\n    lib/\r\n        openjfx-17.0.2_windows-x64_bin-sdk/\r\n            ...\r\n        jSerialComm-2.9.1.jar\r\n        snaprotocol-1.0.0.jar\r\n    src/\r\n        snaptools/\r\n            Controller.java\r\n            Main.java\r\n            SnapTransceiver.java\r\n            icon.png\r\n            snaptools.fxml\r\nI can compile the project using this command line:\r\n\r\n    javac -encoding UTF-8 -d bin --class-path &quot;lib/jSerialComm-2.9.1.jar;lib/snaprotocol-1.0.0.jar&quot; --module-path lib/openjfx-17.0.2_windows-x64_bin-sdk/javafx-sdk-17.0.2/lib --add-modules javafx.controls,javafx.fxml src/snaptools/*.java\r\nI can run the program using this command line:\r\n\r\n    java --class-path &quot;bin;lib/jSerialComm-2.9.1.jar;lib/snaprotocol-1.0.0.jar&quot; --module-path lib/openjfx-17.0.2_windows-x64_bin-sdk/javafx-sdk-17.0.2/lib --add-modules javafx.controls,javafx.fxml snaptools.Main\r\nMy project is pretty much done. I just need to package it. Unfortunately, it seems everybody is using Maven/Gradle and IDE-specific tricks (Eclipse, NetBeans, IntelliJ). I don&#39;t want to depend on these methods.\r\n\r\nWhat I want:\r\n- An executable .exe file without installation process (one big file that only executes and **preferably** extracts nothing).\r\n- Without using Maven/Gradle (I&#39;ll probably put everything in a makefile).\r\n- Without the need of using a specific IDE (I use VSCode, but I don&#39;t want to depend on it either).\r\n- Can be done by command lines on a regular terminal.\r\n- Contain everything it needs to execute (user doesn&#39;t need to install anything).\r\n\r\nIs it possible? Btw, I&#39;ve also been messing with Launch4j, jpackage, and jlink, but couldn&#39;t figure it out.","title":"How to deploy a self-contained JavaFX application without using Maven/Gradle/IDEs?","body":"<p>I'm working on a simple JavaFX project using: <strong>Windows</strong>, <strong>VSCode/PowerShell</strong>, <strong>Java SDK 17.0.2</strong>, <strong>JavaFX SDK 17.0.2</strong>.</p>\n<p>Here is my project structure:</p>\n<pre><code>bin/\n    snaptools/\n        Controller.class\n        Main.class\n        SnapTransceiver.class\n        icon.png\n        snaptools.fxml\nlib/\n    openjfx-17.0.2_windows-x64_bin-sdk/\n        ...\n    jSerialComm-2.9.1.jar\n    snaprotocol-1.0.0.jar\nsrc/\n    snaptools/\n        Controller.java\n        Main.java\n        SnapTransceiver.java\n        icon.png\n        snaptools.fxml\n</code></pre>\n<p>I can compile the project using this command line:</p>\n<pre><code>javac -encoding UTF-8 -d bin --class-path &quot;lib/jSerialComm-2.9.1.jar;lib/snaprotocol-1.0.0.jar&quot; --module-path lib/openjfx-17.0.2_windows-x64_bin-sdk/javafx-sdk-17.0.2/lib --add-modules javafx.controls,javafx.fxml src/snaptools/*.java\n</code></pre>\n<p>I can run the program using this command line:</p>\n<pre><code>java --class-path &quot;bin;lib/jSerialComm-2.9.1.jar;lib/snaprotocol-1.0.0.jar&quot; --module-path lib/openjfx-17.0.2_windows-x64_bin-sdk/javafx-sdk-17.0.2/lib --add-modules javafx.controls,javafx.fxml snaptools.Main\n</code></pre>\n<p>My project is pretty much done. I just need to package it. Unfortunately, it seems everybody is using Maven/Gradle and IDE-specific tricks (Eclipse, NetBeans, IntelliJ). I don't want to depend on these methods.</p>\n<p>What I want:</p>\n<ul>\n<li>An executable .exe file without installation process (one big file that only executes and <strong>preferably</strong> extracts nothing).</li>\n<li>Without using Maven/Gradle (I'll probably put everything in a makefile).</li>\n<li>Without the need of using a specific IDE (I use VSCode, but I don't want to depend on it either).</li>\n<li>Can be done by command lines on a regular terminal.</li>\n<li>Contain everything it needs to execute (user doesn't need to install anything).</li>\n</ul>\n<p>Is it possible? Btw, I've also been messing with Launch4j, jpackage, and jlink, but couldn't figure it out.</p>\n"},{"tags":["java","intellij-idea","junit","automated-tests"],"answers":[{"tags":[],"owner":{"account_id":15657250,"reputation":78,"user_id":11297239,"display_name":"SoulB"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1659520788,"creation_date":1659520788,"answer_id":73219765,"question_id":73219696,"body_markdown":"A workaround would be to comment the non working tests, then run it again and commit it with only working tests.\r\n\r\nAlso the put TODO in the comments of the non working tests, so that you know that you have to check them later on.","title":"clear test history intellij?","body":"<p>A workaround would be to comment the non working tests, then run it again and commit it with only working tests.</p>\n<p>Also the put TODO in the comments of the non working tests, so that you know that you have to check them later on.</p>\n"},{"tags":[],"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1659522943,"creation_date":1659522943,"answer_id":73220275,"question_id":73219696,"body_markdown":"In Settings, Editor, Inspections, select &quot;Failed line in test&quot; and turn the severity down to &quot;Weak Warning&quot;","title":"clear test history intellij?","body":"<p>In Settings, Editor, Inspections, select &quot;Failed line in test&quot; and turn the severity down to &quot;Weak Warning&quot;</p>\n"}],"owner":{"account_id":210082,"reputation":19409,"user_id":461499,"accept_rate":73,"display_name":"Rob Audenaerde"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":417,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1660071667,"creation_date":1659520571,"question_id":73219696,"body_markdown":"Intellij keeps track of test (JUnit) history, which is very nice...\r\n\r\nBut it registers failing tests as &#39;problem&#39;, which get triggered by commit-checks. I want to commit non-working tests at the end of the day, so I want to be able to clear the test-history.\r\n\r\nHowever, I can&#39;t find that option anywhere, nor does &#39;delete&#39; work on the selected test-run.\r\n\r\nHow to clear all of the test history?","title":"clear test history intellij?","body":"<p>Intellij keeps track of test (JUnit) history, which is very nice...</p>\n<p>But it registers failing tests as 'problem', which get triggered by commit-checks. I want to commit non-working tests at the end of the day, so I want to be able to clear the test-history.</p>\n<p>However, I can't find that option anywhere, nor does 'delete' work on the selected test-run.</p>\n<p>How to clear all of the test history?</p>\n"},{"tags":["java","jwt"],"comments":[{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":1,"creation_date":1660067966,"post_id":73296213,"comment_id":129443920,"body_markdown":"How did you checked the JWT token on the external site? Specifically, what have you entered in the &quot;your-256-bit-secret&quot; field?","body":"How did you checked the JWT token on the external site? Specifically, what have you entered in the &quot;your-256-bit-secret&quot; field?"},{"owner":{"account_id":25564238,"reputation":57,"user_id":19346273,"display_name":"MarieSpeak"},"score":0,"creation_date":1660068235,"post_id":73296213,"comment_id":129444011,"body_markdown":"@Progman Yes, that&#39;s right.","body":"@Progman Yes, that&#39;s right."},{"owner":{"account_id":907313,"reputation":605,"user_id":941923,"accept_rate":56,"display_name":"Zabihullah Alipour"},"score":1,"creation_date":1660068878,"post_id":73296213,"comment_id":129444227,"body_markdown":"A JWT token only verified with the public or the private key, Did you set any key for the verification on the https://jwt.io/  site?","body":"A JWT token only verified with the public or the private key, Did you set any key for the verification on the <a href=\"https://jwt.io/\" rel=\"nofollow noreferrer\">jwt.io</a>  site?"},{"owner":{"account_id":25564238,"reputation":57,"user_id":19346273,"display_name":"MarieSpeak"},"score":0,"creation_date":1660069500,"post_id":73296213,"comment_id":129444423,"body_markdown":"@Zabihullah Alipour I created a token for a client based on its name. And this token is sent to the client. I saw this code here https://www.youtube.com/watch?v=doFx3-xfDN4&amp;list=PLYZvWFacASF_4sL7xjZkfA-YNMAqk1TXn&amp;index=7  Он также показывает, что код недействителен","body":"@Zabihullah Alipour I created a token for a client based on its name. And this token is sent to the client. I saw this code here <a href=\"https://www.youtube.com/watch?v=doFx3-xfDN4&amp;list=PLYZvWFacASF_4sL7xjZkfA-YNMAqk1TXn&amp;index=7\" rel=\"nofollow noreferrer\">youtube.com/&hellip;</a>  Он также показывает, что код недействителен"}],"answers":[{"tags":[],"owner":{"account_id":12368896,"reputation":24701,"user_id":9019885,"display_name":"Gary Archer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1660071309,"creation_date":1660071309,"answer_id":73296813,"question_id":73296213,"body_markdown":"You almost certainly should not use HS256, which is a symmetric algorithm, meaning you have to give the secret key to clients for them to be able to validate the JWT. See the [JWT Best Practices](https://curity.io/resources/learn/jwt-best-practices/) article for this type of guidance.\r\n\r\nStart with the most mainstream token signing algorithm of RS256 instead - here is some Java code of mine that uses it, via the highly respected [jose4j](https://bitbucket.org/b_c/jose4j/wiki/Home) library:\r\n\r\n- [Token Issuing](https://github.com/gary-archer/oauth.apisample.javaspringboot/blob/master/src/test/java/com/mycompany/sample/tests/utils/TokenIssuer.java#L47)\r\n- [Token Validation](https://github.com/gary-archer/oauth.apisample.javaspringboot/blob/master/src/main/java/com/mycompany/sample/plumbing/oauth/OAuthAuthenticator.java#L48)\r\n\r\nIn jwt.io you can then paste in the [token signing public key (JWK)](https://github.com/gary-archer/oauth.apisample.javaspringboot/blob/master/src/test/java/com/mycompany/sample/tests/utils/TokenIssuer.java#L38) to see the token validated. If you prefer, translate the same concepts to a different JWT library of your choice. See also [this blog post of mine](https://authguidance.com/jwt-access-token-validation/) which uses the jwt.io website.","title":"Generate JWT token not valid - java","body":"<p>You almost certainly should not use HS256, which is a symmetric algorithm, meaning you have to give the secret key to clients for them to be able to validate the JWT. See the <a href=\"https://curity.io/resources/learn/jwt-best-practices/\" rel=\"nofollow noreferrer\">JWT Best Practices</a> article for this type of guidance.</p>\n<p>Start with the most mainstream token signing algorithm of RS256 instead - here is some Java code of mine that uses it, via the highly respected <a href=\"https://bitbucket.org/b_c/jose4j/wiki/Home\" rel=\"nofollow noreferrer\">jose4j</a> library:</p>\n<ul>\n<li><a href=\"https://github.com/gary-archer/oauth.apisample.javaspringboot/blob/master/src/test/java/com/mycompany/sample/tests/utils/TokenIssuer.java#L47\" rel=\"nofollow noreferrer\">Token Issuing</a></li>\n<li><a href=\"https://github.com/gary-archer/oauth.apisample.javaspringboot/blob/master/src/main/java/com/mycompany/sample/plumbing/oauth/OAuthAuthenticator.java#L48\" rel=\"nofollow noreferrer\">Token Validation</a></li>\n</ul>\n<p>In jwt.io you can then paste in the <a href=\"https://github.com/gary-archer/oauth.apisample.javaspringboot/blob/master/src/test/java/com/mycompany/sample/tests/utils/TokenIssuer.java#L38\" rel=\"nofollow noreferrer\">token signing public key (JWK)</a> to see the token validated. If you prefer, translate the same concepts to a different JWT library of your choice. See also <a href=\"https://authguidance.com/jwt-access-token-validation/\" rel=\"nofollow noreferrer\">this blog post of mine</a> which uses the jwt.io website.</p>\n"}],"owner":{"account_id":25564238,"reputation":57,"user_id":19346273,"display_name":"MarieSpeak"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":570,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73296813,"answer_count":1,"score":0,"last_activity_date":1660071309,"creation_date":1660067797,"question_id":73296213,"body_markdown":"I create a JWT token and if I go to the official site https://jwt.io/ and check its validity, then it shows that it is not valid.\r\n\r\nPlease tell me why it turns out that it is not valid?\r\n\r\neyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJKYWNrIiwiaWF0IjoxNjYwMDY3NjQ0LCJleHAiOjE2NjAxNTQwNDR9.yUqKI1t2xKVlhALUw12ie3DcpnGyXelcd7J-0qJ1FPg\r\n\r\n\r\n\r\n\r\n\t\t\tpublic class GeneratorJwt {\r\n\t\t\t    \r\n\t\t\t    public static void main(String[] args)  {\r\n\r\n\t\t\t        Map&lt;String, Object&gt; claims = new HashMap&lt;&gt;();\r\n\r\n\t\t\t        SecretKey key = Keys.secretKeyFor(SignatureAlgorithm.HS256);\r\n\r\n\t\t\t        String jwtTokenKey = Encoders.BASE64.encode(key.getEncoded());\r\n\r\n\t\t\t        String s = Jwts.builder()\r\n\t\t\t                .setClaims(claims)\r\n\t\t\t                .setSubject(&quot;Jack&quot;)\r\n\t\t\t                .setIssuedAt(new Date(System.currentTimeMillis()))\r\n\t\t\t                .setExpiration(new Date((new Date()).getTime() + 86400000))\r\n\t\t\t                .signWith(SignatureAlgorithm.HS256, jwtTokenKey).compact();\r\n\t\t\t        \r\n\t\t\t        System.out.println(s);\r\n\t\t\t    }\r\n\t\t\t    \r\n\t\t\t}\r\n\r\n\r\n","title":"Generate JWT token not valid - java","body":"<p>I create a JWT token and if I go to the official site <a href=\"https://jwt.io/\" rel=\"nofollow noreferrer\">https://jwt.io/</a> and check its validity, then it shows that it is not valid.</p>\n<p>Please tell me why it turns out that it is not valid?</p>\n<p>eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJKYWNrIiwiaWF0IjoxNjYwMDY3NjQ0LCJleHAiOjE2NjAxNTQwNDR9.yUqKI1t2xKVlhALUw12ie3DcpnGyXelcd7J-0qJ1FPg</p>\n<pre><code>        public class GeneratorJwt {\n            \n            public static void main(String[] args)  {\n\n                Map&lt;String, Object&gt; claims = new HashMap&lt;&gt;();\n\n                SecretKey key = Keys.secretKeyFor(SignatureAlgorithm.HS256);\n\n                String jwtTokenKey = Encoders.BASE64.encode(key.getEncoded());\n\n                String s = Jwts.builder()\n                        .setClaims(claims)\n                        .setSubject(&quot;Jack&quot;)\n                        .setIssuedAt(new Date(System.currentTimeMillis()))\n                        .setExpiration(new Date((new Date()).getTime() + 86400000))\n                        .signWith(SignatureAlgorithm.HS256, jwtTokenKey).compact();\n                \n                System.out.println(s);\n            }\n            \n        }\n</code></pre>\n"},{"tags":["java","android","unit-testing","junit","android-testing"],"comments":[{"owner":{"account_id":2589460,"reputation":1451,"user_id":2244476,"display_name":"Suhas"},"score":1,"creation_date":1448135202,"post_id":33847781,"comment_id":55460161,"body_markdown":"Could you please post the logcat messages? BTW, I was successful in getting the decoded string, i.e., GRC from the code that you have posted.","body":"Could you please post the logcat messages? BTW, I was successful in getting the decoded string, i.e., GRC from the code that you have posted."},{"owner":{"account_id":1618854,"reputation":1443,"user_id":1495863,"accept_rate":65,"display_name":"brnby"},"score":0,"creation_date":1448135777,"post_id":33847781,"comment_id":55460376,"body_markdown":"So, up until now I have only been running this code from a unit test. I have just ran the app for real and it appears to be working. Any idea what might be going wrong in the unit test?","body":"So, up until now I have only been running this code from a unit test. I have just ran the app for real and it appears to be working. Any idea what might be going wrong in the unit test?"},{"owner":{"account_id":1618854,"reputation":1443,"user_id":1495863,"accept_rate":65,"display_name":"brnby"},"score":0,"creation_date":1448135880,"post_id":33847781,"comment_id":55460423,"body_markdown":"Possibly due to use of unitTests.returnDefaultValues=true","body":"Possibly due to use of unitTests.returnDefaultValues=true"},{"owner":{"account_id":2589460,"reputation":1451,"user_id":2244476,"display_name":"Suhas"},"score":0,"creation_date":1448136127,"post_id":33847781,"comment_id":55460515,"body_markdown":"I think that is it !","body":"I think that is it !"},{"owner":{"account_id":1618854,"reputation":1443,"user_id":1495863,"accept_rate":65,"display_name":"brnby"},"score":0,"creation_date":1448136176,"post_id":33847781,"comment_id":55460538,"body_markdown":"I don&#39;t understand why it is causing a problem? Just had a suspicion...","body":"I don&#39;t understand why it is causing a problem? Just had a suspicion..."},{"owner":{"account_id":1618854,"reputation":1443,"user_id":1495863,"accept_rate":65,"display_name":"brnby"},"score":0,"creation_date":1448136416,"post_id":33847781,"comment_id":55460626,"body_markdown":"My understanding is that normally android api calls throw exceptions during unit tests, setting returnDefaultValues to true causes them to behave as normal, so why the difference?","body":"My understanding is that normally android api calls throw exceptions during unit tests, setting returnDefaultValues to true causes them to behave as normal, so why the difference?"},{"owner":{"account_id":2589460,"reputation":1451,"user_id":2244476,"display_name":"Suhas"},"score":3,"creation_date":1448136528,"post_id":33847781,"comment_id":55460660,"body_markdown":"Not entirely sure, but I guess the unit test does not have access to  `android.util.Base64` class and hence returns `null`. Maybe this link will help you http://tools.android.com/tech-docs/unit-testing-support.","body":"Not entirely sure, but I guess the unit test does not have access to  <code>android.util.Base64</code> class and hence returns <code>null</code>. Maybe this link will help you <a href=\"http://tools.android.com/tech-docs/unit-testing-support\" rel=\"nofollow noreferrer\">tools.android.com/tech-docs/unit-testing-support</a>."},{"owner":{"account_id":1618854,"reputation":1443,"user_id":1495863,"accept_rate":65,"display_name":"brnby"},"score":3,"creation_date":1448136834,"post_id":33847781,"comment_id":55460774,"body_markdown":"From what I&#39;m reading, it actuall just causes API calls to return null or zero instead of throwing exception. I guess that I will have to write it as an instrumentation test instead, thanks for your help!","body":"From what I&#39;m reading, it actuall just causes API calls to return null or zero instead of throwing exception. I guess that I will have to write it as an instrumentation test instead, thanks for your help!"},{"owner":{"account_id":1322191,"reputation":11583,"user_id":1267768,"accept_rate":83,"display_name":"Matt"},"score":0,"creation_date":1471380230,"post_id":33847781,"comment_id":65320991,"body_markdown":"using code from the android libraries during unit testing is a know issue.  Even if you set &quot;returnDefaultValues&quot; to true, that returns things like null (for objects) and 0 (for ints).  It&#39;s especially annoying, especially for non androidy code like Base64 class.","body":"using code from the android libraries during unit testing is a know issue.  Even if you set &quot;returnDefaultValues&quot; to true, that returns things like null (for objects) and 0 (for ints).  It&#39;s especially annoying, especially for non androidy code like Base64 class."}],"answers":[{"tags":[],"owner":{"account_id":4015554,"reputation":1477,"user_id":3307822,"accept_rate":80,"display_name":"ScottyC"},"down_vote_count":1,"up_vote_count":31,"is_accepted":false,"score":30,"last_activity_date":1485955528,"creation_date":1477000822,"answer_id":40165234,"question_id":33847781,"body_markdown":"I had the same problem in my unit tests. I didn&#39;t realize the Base64 class I&#39;m using is a part of the Android API, therefore\r\n\r\n**You can&#39;t use android.util.Base64 in a regular JUnit test, it must be an Instrumentation test.**\r\n\r\nHowever, if you really want it as a unit test, you could use the Apache Commons Base64 class instead. Include it in Gradle build:\r\n\r\n    // https://mvnrepository.com/artifact/org.apache.commons/commons-collections4\r\n    compile group: &#39;org.apache.commons&#39;, name: &#39;commons-collections4&#39;, version: &#39;4.1&#39;\r\n\r\nAnd then slightly different usage,\r\n\r\n- Base64.[encodeBase64String(byte\\[\\] binaryData)][1]\r\n\r\n- Base64.[decodeBase64(String base64String)][2]\r\n\r\n\r\n\r\n  [1]: http://commons.apache.org/proper/commons-codec/apidocs/org/apache/commons/codec/binary/Base64.html#encodeBase64String(byte[])\r\n  [2]: http://commons.apache.org/proper/commons-codec/apidocs/org/apache/commons/codec/binary/Base64.html#decodeBase64(java.lang.String)","title":"Android Base64 encode and decode return null in Unit Test","body":"<p>I had the same problem in my unit tests. I didn't realize the Base64 class I'm using is a part of the Android API, therefore</p>\n\n<p><strong>You can't use android.util.Base64 in a regular JUnit test, it must be an Instrumentation test.</strong></p>\n\n<p>However, if you really want it as a unit test, you could use the Apache Commons Base64 class instead. Include it in Gradle build:</p>\n\n<pre><code>// https://mvnrepository.com/artifact/org.apache.commons/commons-collections4\ncompile group: 'org.apache.commons', name: 'commons-collections4', version: '4.1'\n</code></pre>\n\n<p>And then slightly different usage,</p>\n\n<ul>\n<li><p>Base64.<a href=\"http://commons.apache.org/proper/commons-codec/apidocs/org/apache/commons/codec/binary/Base64.html#encodeBase64String(byte[])\" rel=\"noreferrer\">encodeBase64String(byte[] binaryData)</a></p></li>\n<li><p>Base64.<a href=\"http://commons.apache.org/proper/commons-codec/apidocs/org/apache/commons/codec/binary/Base64.html#decodeBase64(java.lang.String)\" rel=\"noreferrer\">decodeBase64(String base64String)</a></p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":4412031,"reputation":369,"user_id":3594655,"display_name":"lukassos"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1511125518,"creation_date":1511125518,"answer_id":47382001,"question_id":33847781,"body_markdown":"Follow up o android tutorials and unit test notes while you need just Unit tests without use of some android libs \r\n\r\nIn your case you&#39;re depending on android.Base64. I had similar issue and moving test classes from `src/test` -&gt; `src/androidTest` worked. Those tests are run on virtual machine or real android device. I didn&#39;t notice the diff at the first look. ","title":"Android Base64 encode and decode return null in Unit Test","body":"<p>Follow up o android tutorials and unit test notes while you need just Unit tests without use of some android libs </p>\n\n<p>In your case you're depending on android.Base64. I had similar issue and moving test classes from <code>src/test</code> -> <code>src/androidTest</code> worked. Those tests are run on virtual machine or real android device. I didn't notice the diff at the first look. </p>\n"},{"tags":[],"owner":{"account_id":7622603,"reputation":460,"user_id":5780212,"display_name":"rsommerard"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1517997161,"creation_date":1517997161,"answer_id":48660696,"question_id":33847781,"body_markdown":"You can use the Robolectric Runner\r\n\r\n1. Add the dependency in your `build.gradle`:\r\n\r\n        testCompile &#39;org.robolectric:robolectric:X.X.X&#39;\r\n\r\n2. Add this line in your testing class:\r\n\r\n        import org.junit.runner.RunWith;\r\n        import org.robolectric.RobolectricTestRunner;\r\n\r\n        @RunWith(RobolectricTestRunner.class)\r\n        public class MyTestingClassTest {\r\n            ...\r\n        }","title":"Android Base64 encode and decode return null in Unit Test","body":"<p>You can use the Robolectric Runner</p>\n\n<ol>\n<li><p>Add the dependency in your <code>build.gradle</code>:</p>\n\n<pre><code>testCompile 'org.robolectric:robolectric:X.X.X'\n</code></pre></li>\n<li><p>Add this line in your testing class:</p>\n\n<pre><code>import org.junit.runner.RunWith;\nimport org.robolectric.RobolectricTestRunner;\n\n@RunWith(RobolectricTestRunner.class)\npublic class MyTestingClassTest {\n    ...\n}\n</code></pre></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":341035,"reputation":2632,"user_id":671393,"accept_rate":100,"display_name":"Rupert Rawnsley"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1559833194,"creation_date":1559833194,"answer_id":56480250,"question_id":33847781,"body_markdown":"As discussed, android.util.Base64.decode is returning a null in test harness because of this setting in the build file:\r\n\r\n    testOptions {\r\n        unitTests.returnDefaultValues = true\r\n    }\r\n\r\nTo avoid including other libraries you could fall back on java.util.Base64, which is only available in Java8 and on Android 26 and above. If you already target 26+ then just switch to this method, but if you have to target earlier SDKs you could check for the null return and call a test-harness method instead:\r\n\r\n    // Required because Android classes return null in desktop unit tests\r\n    @TargetApi(26)\r\n    private fun testHarnessDecode(s : String) : ByteArray {\r\n        return java.util.Base64.getDecoder().decode(s)\r\n    }\r\n\r\nI would rather do this than pull in additional library dependencies, but YMMV.","title":"Android Base64 encode and decode return null in Unit Test","body":"<p>As discussed, android.util.Base64.decode is returning a null in test harness because of this setting in the build file:</p>\n\n<pre><code>testOptions {\n    unitTests.returnDefaultValues = true\n}\n</code></pre>\n\n<p>To avoid including other libraries you could fall back on java.util.Base64, which is only available in Java8 and on Android 26 and above. If you already target 26+ then just switch to this method, but if you have to target earlier SDKs you could check for the null return and call a test-harness method instead:</p>\n\n<pre><code>// Required because Android classes return null in desktop unit tests\n@TargetApi(26)\nprivate fun testHarnessDecode(s : String) : ByteArray {\n    return java.util.Base64.getDecoder().decode(s)\n}\n</code></pre>\n\n<p>I would rather do this than pull in additional library dependencies, but YMMV.</p>\n"},{"tags":[],"owner":{"account_id":452250,"reputation":1194,"user_id":848579,"display_name":"Melad"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1642945918,"creation_date":1642945918,"answer_id":70822708,"question_id":33847781,"body_markdown":"What works with me is to mock Base64.decode method using mockk\r\n\r\n     mockkStatic(Base64::class)\r\n     every { Base64.decode(any&lt;String&gt;(),Base64.DEFAULT) } returns byteArrayOf()\r\n","title":"Android Base64 encode and decode return null in Unit Test","body":"<p>What works with me is to mock Base64.decode method using mockk</p>\n<pre><code> mockkStatic(Base64::class)\n every { Base64.decode(any&lt;String&gt;(),Base64.DEFAULT) } returns byteArrayOf()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7396006,"reputation":26,"user_id":5627924,"display_name":"tzurkan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660071306,"creation_date":1660071306,"answer_id":73296812,"question_id":33847781,"body_markdown":"What I ended up doing was a wrapper.  I allow the android.util.Base64 to fail and then if we are on build greater than &quot;O&quot; or equal to 0 (zero. meaning not an android device or no android sdk version).\r\n\r\n     class Base64Wrapper {\r\n        companion object {\r\n            fun encodeToString(input : ByteArray) : String {\r\n                return try {\r\n                    Base64.encodeToString(input, Base64.DEFAULT)\r\n                } catch (e :Exception) {\r\n                    if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.O || android.os.Build.VERSION.SDK_INT == 0) {\r\n                        java.util.Base64.getEncoder().encodeToString(input)\r\n                    } else {\r\n                        throw e;\r\n                    }\r\n                }\r\n            }\r\n    \r\n            fun decode(input: String) : ByteArray {\r\n                return try {\r\n                    Base64.decode(input, Base64.DEFAULT)\r\n                } catch (e :Exception) {\r\n                    // if build is greater or equal to &quot;O&quot; or is equal to 0 (zero) which means it is not a device (i.e. unit test).\r\n                    if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.O || android.os.Build.VERSION.SDK_INT == 0) {\r\n                        java.util.Base64.getDecoder().decode(input)\r\n                    } else {\r\n                        throw e;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }","title":"Android Base64 encode and decode return null in Unit Test","body":"<p>What I ended up doing was a wrapper.  I allow the android.util.Base64 to fail and then if we are on build greater than &quot;O&quot; or equal to 0 (zero. meaning not an android device or no android sdk version).</p>\n<pre><code> class Base64Wrapper {\n    companion object {\n        fun encodeToString(input : ByteArray) : String {\n            return try {\n                Base64.encodeToString(input, Base64.DEFAULT)\n            } catch (e :Exception) {\n                if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.O || android.os.Build.VERSION.SDK_INT == 0) {\n                    java.util.Base64.getEncoder().encodeToString(input)\n                } else {\n                    throw e;\n                }\n            }\n        }\n\n        fun decode(input: String) : ByteArray {\n            return try {\n                Base64.decode(input, Base64.DEFAULT)\n            } catch (e :Exception) {\n                // if build is greater or equal to &quot;O&quot; or is equal to 0 (zero) which means it is not a device (i.e. unit test).\n                if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.O || android.os.Build.VERSION.SDK_INT == 0) {\n                    java.util.Base64.getDecoder().decode(input)\n                } else {\n                    throw e;\n                }\n            }\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1618854,"reputation":1443,"user_id":1495863,"accept_rate":65,"display_name":"brnby"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14725,"favorite_count":0,"down_vote_count":0,"up_vote_count":25,"answer_count":6,"score":25,"last_activity_date":1660071306,"creation_date":1448134887,"question_id":33847781,"body_markdown":"I am attempting to decode a Base64 encoded string in Android using the http://developer.android.com/reference/android/util/Base64.html class.\r\n\r\nBoth the encodeToString and decode methods are returning null, and I have no idea what&#39;s wrong, here&#39;s my code for the decode:\r\n\r\n\r\n    // Should decode to &quot;GRC&quot;\r\n    String friendlyNameBase64Encoded = &quot;R1JD&quot;;\r\n\r\n    // This returns null\r\n    byte[] friendlyNameByteArray = Base64.decode(friendlyNameBase64Encoded, Base64.DEFAULT);\r\n    \r\n    // Fails with NullPointerException\r\n    String friendlyName = new String(friendlyNameByteArray, &quot;UTF-8&quot;);\r\n\r\nI&#39;m running Android API 23.1.0","title":"Android Base64 encode and decode return null in Unit Test","body":"<p>I am attempting to decode a Base64 encoded string in Android using the <a href=\"http://developer.android.com/reference/android/util/Base64.html\" rel=\"noreferrer\">http://developer.android.com/reference/android/util/Base64.html</a> class.</p>\n\n<p>Both the encodeToString and decode methods are returning null, and I have no idea what's wrong, here's my code for the decode:</p>\n\n<pre><code>// Should decode to \"GRC\"\nString friendlyNameBase64Encoded = \"R1JD\";\n\n// This returns null\nbyte[] friendlyNameByteArray = Base64.decode(friendlyNameBase64Encoded, Base64.DEFAULT);\n\n// Fails with NullPointerException\nString friendlyName = new String(friendlyNameByteArray, \"UTF-8\");\n</code></pre>\n\n<p>I'm running Android API 23.1.0</p>\n"},{"tags":["java","rest","spring-mvc","tomcat"],"answers":[{"tags":[],"owner":{"account_id":2700653,"reputation":26716,"user_id":2331445,"display_name":"Stephan Schlecht"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660071156,"creation_date":1659774611,"answer_id":73258305,"question_id":73250850,"body_markdown":"You must include the context path in the URL when you call it. \r\n\r\nIn your case it would be: \r\n```\r\nhttp://localhost:8125/electronic-apps/\r\n```\r\n\r\nWhen you do this, you will see `Hello` in the browser, assuming the `.war` file was deployed correctly. \r\n\r\nBTW: You can check the deployment in Tomcat. Prerequisite is that in the file `tomcat-users.xml` the admin user is configured/uncommented.\r\n\r\nJust call: \r\n\r\n```\r\nhttp://localhost:8125/manager/html\r\n```\r\n\r\nA list of configured applications appears. It should also include `/electronic-apps`. The UI also offers a possibility to deploy a WAR file if you scroll down. However, it would also work if you simply copy the `electronic-apps.war` file into Tomcat&#39;s `webapps` folder.\r\n\r\n**Problem 2**\r\n\r\nThe second problem of the updated question has a different cause. Here the OP uses a Tomcat 10 instance (as you can see in the screenshot). \r\n\r\n&gt;Applications that run on Tomcat 9 and earlier will not run on Tomcat 10 without changes. Java EE based applications designed for Tomcat 9 and earlier may be placed in the $CATALINA_BASE/webapps-javaee directory and Tomcat will automatically convert them to Jakarta EE and copy them to the webapps directory. This conversion is performed using the Apache Tomcat migration tool for Jakarta EE tool which is also available as a separate download for off-line use.\r\n\r\n\r\nsee https://tomcat.apache.org\r\n\r\nThe mentioned migration tool can be downloaded from here: https://tomcat.apache.org/download-migration.cgi\r\n\r\nAnd indeed, a quick test shows that applying this tool works as expected. Without applying this tool, the error appears as shown in your Tomcat 10 screenshot.\r\n\r\nSo in your case: \r\n- create the `electronic-apps.war` \r\n- use this in your Tomcat 9 installation\r\n- apply the migration tool and create a new `electronic-apps.war` \r\n- this migrated .war file can then be used with your Tomcat 10 installation\r\n\r\n\r\nFor Tomcat 10, you also need to add the context path to the URL (i.e. http://localhost:8080/electronic-apps/) for the app to run. \r\n","title":"Basic REST Spring MVC application cannot be reached when deployed to Tomcat","body":"<p>You must include the context path in the URL when you call it.</p>\n<p>In your case it would be:</p>\n<pre><code>http://localhost:8125/electronic-apps/\n</code></pre>\n<p>When you do this, you will see <code>Hello</code> in the browser, assuming the <code>.war</code> file was deployed correctly.</p>\n<p>BTW: You can check the deployment in Tomcat. Prerequisite is that in the file <code>tomcat-users.xml</code> the admin user is configured/uncommented.</p>\n<p>Just call:</p>\n<pre><code>http://localhost:8125/manager/html\n</code></pre>\n<p>A list of configured applications appears. It should also include <code>/electronic-apps</code>. The UI also offers a possibility to deploy a WAR file if you scroll down. However, it would also work if you simply copy the <code>electronic-apps.war</code> file into Tomcat's <code>webapps</code> folder.</p>\n<p><strong>Problem 2</strong></p>\n<p>The second problem of the updated question has a different cause. Here the OP uses a Tomcat 10 instance (as you can see in the screenshot).</p>\n<blockquote>\n<p>Applications that run on Tomcat 9 and earlier will not run on Tomcat 10 without changes. Java EE based applications designed for Tomcat 9 and earlier may be placed in the $CATALINA_BASE/webapps-javaee directory and Tomcat will automatically convert them to Jakarta EE and copy them to the webapps directory. This conversion is performed using the Apache Tomcat migration tool for Jakarta EE tool which is also available as a separate download for off-line use.</p>\n</blockquote>\n<p>see <a href=\"https://tomcat.apache.org\" rel=\"nofollow noreferrer\">https://tomcat.apache.org</a></p>\n<p>The mentioned migration tool can be downloaded from here: <a href=\"https://tomcat.apache.org/download-migration.cgi\" rel=\"nofollow noreferrer\">https://tomcat.apache.org/download-migration.cgi</a></p>\n<p>And indeed, a quick test shows that applying this tool works as expected. Without applying this tool, the error appears as shown in your Tomcat 10 screenshot.</p>\n<p>So in your case:</p>\n<ul>\n<li>create the <code>electronic-apps.war</code></li>\n<li>use this in your Tomcat 9 installation</li>\n<li>apply the migration tool and create a new <code>electronic-apps.war</code></li>\n<li>this migrated .war file can then be used with your Tomcat 10 installation</li>\n</ul>\n<p>For Tomcat 10, you also need to add the context path to the URL (i.e. http://localhost:8080/electronic-apps/) for the app to run.</p>\n"}],"owner":{"account_id":5771845,"reputation":2405,"user_id":4555078,"display_name":"j.swiderski"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":230,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73258305,"answer_count":1,"score":0,"last_activity_date":1660071156,"creation_date":1659707442,"question_id":73250850,"body_markdown":"I have a very basic Spring MVC REST application which when deployed on Tomcat and called in browser or Postman with `http://localhost:8080`, should display hello but instead it shows Tomcat Welcome page. Anyone is able to tell me what did I miss or whether there is someting wrong with deployment (I have done this through InteliJ as well as by dropping war into tomcat directly)? I have tried making multiple changes but none seems to work so any tip would be helpful. \r\nNOTE: My sample app is very similar to this one https://gist.github.com/joshlong/6431608\r\n\r\n**My Code:**\r\n\r\n*Config.java*\r\n\r\n    import org.springframework.context.annotation.ComponentScan;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.web.servlet.config.annotation.EnableWebMvc;\r\n    import org.springframework.web.servlet.support.AbstractAnnotationConfigDispatcherServletInitializer;\r\n    \r\n    @Configuration\r\n    @ComponentScan(&quot;app&quot;)\r\n    @EnableWebMvc\r\n    public class Config extends AbstractAnnotationConfigDispatcherServletInitializer {\r\n        @Override\r\n        protected Class&lt;?&gt;[] getRootConfigClasses() {\r\n            return new Class[0];\r\n        }\r\n\r\n        @Override\r\n        protected Class&lt;?&gt;[] getServletConfigClasses() {\r\n            return new Class[] {Config.class};\r\n        }\r\n\r\n        @Override\r\n        protected String[] getServletMappings() {\r\n               return new String[] {&quot;/&quot;};\r\n        }\r\n    }\r\n\r\n \r\n*Hello.java*\r\n\r\n    package app;\r\n\r\n    import org.springframework.http.MediaType;\r\n    import org.springframework.web.bind.annotation.GetMapping;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n\r\n    @RestController\r\n    public class Hello {\r\n        @GetMapping\r\n        public String main() {\r\n            return &quot;Hello&quot;;\r\n        }\r\n    }\r\n\r\n\r\n*pom.xml*\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;groupId&gt;pl.bykowski&lt;/groupId&gt;\r\n        &lt;artifactId&gt;electronic-apps&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;packaging&gt;war&lt;/packaging&gt;\r\n    \r\n        &lt;properties&gt;\r\n            &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n            &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n        &lt;/properties&gt;\r\n    \r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;junit&lt;/groupId&gt;\r\n                &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n                &lt;version&gt;4.13.2&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n                &lt;version&gt;5.3.22&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n                &lt;version&gt;4.0.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    \r\n        &lt;build&gt;\r\n            &lt;finalName&gt;electronic-apps&lt;/finalName&gt;\r\n            &lt;pluginManagement&gt;&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;\r\n                &lt;plugins&gt;\r\n                    &lt;plugin&gt;\r\n                        &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\r\n                        &lt;version&gt;3.2.0&lt;/version&gt;\r\n                    &lt;/plugin&gt;\r\n                    &lt;!-- see http://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_war_packaging --&gt;\r\n                    &lt;plugin&gt;\r\n                        &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n                        &lt;version&gt;3.3.0&lt;/version&gt;\r\n                    &lt;/plugin&gt;\r\n                    &lt;plugin&gt;\r\n                        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                        &lt;version&gt;3.10.1&lt;/version&gt;\r\n                    &lt;/plugin&gt;\r\n                    &lt;plugin&gt;\r\n                        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                        &lt;version&gt;3.0.0-M7&lt;/version&gt;\r\n                    &lt;/plugin&gt;\r\n                    &lt;plugin&gt;\r\n                        &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n                        &lt;version&gt;3.3.2&lt;/version&gt;\r\n                    &lt;/plugin&gt;\r\n                    &lt;plugin&gt;\r\n                        &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\r\n                        &lt;version&gt;3.0.1&lt;/version&gt;\r\n                    &lt;/plugin&gt;\r\n                    &lt;plugin&gt;\r\n                        &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\r\n                        &lt;version&gt;3.0.0&lt;/version&gt;\r\n                    &lt;/plugin&gt;\r\n                &lt;/plugins&gt;\r\n            &lt;/pluginManagement&gt;\r\n        &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\n\r\n**Project Structure:**\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n*Result:*\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n**EDIT:**\r\nI have checked it in the manager on different Tomcat and the application is there but still it doesn&#39;t work whether I call it `http://localhost:8080/electronic-apps/` or `http://localhost:8080/`\r\n\r\n[![enter image description here][3]][3]\r\n[![enter image description here][4]][4]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/KeTEa.png\r\n  [2]: https://i.stack.imgur.com/mV0pB.png\r\n  [3]: https://i.stack.imgur.com/O4hRu.png\r\n  [4]: https://i.stack.imgur.com/xIzyS.png","title":"Basic REST Spring MVC application cannot be reached when deployed to Tomcat","body":"<p>I have a very basic Spring MVC REST application which when deployed on Tomcat and called in browser or Postman with <code>http://localhost:8080</code>, should display hello but instead it shows Tomcat Welcome page. Anyone is able to tell me what did I miss or whether there is someting wrong with deployment (I have done this through InteliJ as well as by dropping war into tomcat directly)? I have tried making multiple changes but none seems to work so any tip would be helpful.\nNOTE: My sample app is very similar to this one <a href=\"https://gist.github.com/joshlong/6431608\" rel=\"nofollow noreferrer\">https://gist.github.com/joshlong/6431608</a></p>\n<p><strong>My Code:</strong></p>\n<p><em>Config.java</em></p>\n<pre><code>import org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.web.servlet.config.annotation.EnableWebMvc;\nimport org.springframework.web.servlet.support.AbstractAnnotationConfigDispatcherServletInitializer;\n\n@Configuration\n@ComponentScan(&quot;app&quot;)\n@EnableWebMvc\npublic class Config extends AbstractAnnotationConfigDispatcherServletInitializer {\n    @Override\n    protected Class&lt;?&gt;[] getRootConfigClasses() {\n        return new Class[0];\n    }\n\n    @Override\n    protected Class&lt;?&gt;[] getServletConfigClasses() {\n        return new Class[] {Config.class};\n    }\n\n    @Override\n    protected String[] getServletMappings() {\n           return new String[] {&quot;/&quot;};\n    }\n}\n</code></pre>\n<p><em>Hello.java</em></p>\n<pre><code>package app;\n\nimport org.springframework.http.MediaType;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\npublic class Hello {\n    @GetMapping\n    public String main() {\n        return &quot;Hello&quot;;\n    }\n}\n</code></pre>\n<p><em>pom.xml</em></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;pl.bykowski&lt;/groupId&gt;\n    &lt;artifactId&gt;electronic-apps&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;4.13.2&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n            &lt;version&gt;5.3.22&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n            &lt;version&gt;4.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;finalName&gt;electronic-apps&lt;/finalName&gt;\n        &lt;pluginManagement&gt;&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;\n            &lt;plugins&gt;\n                &lt;plugin&gt;\n                    &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.2.0&lt;/version&gt;\n                &lt;/plugin&gt;\n                &lt;!-- see http://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_war_packaging --&gt;\n                &lt;plugin&gt;\n                    &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.3.0&lt;/version&gt;\n                &lt;/plugin&gt;\n                &lt;plugin&gt;\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.10.1&lt;/version&gt;\n                &lt;/plugin&gt;\n                &lt;plugin&gt;\n                    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.0.0-M7&lt;/version&gt;\n                &lt;/plugin&gt;\n                &lt;plugin&gt;\n                    &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.3.2&lt;/version&gt;\n                &lt;/plugin&gt;\n                &lt;plugin&gt;\n                    &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.0.1&lt;/version&gt;\n                &lt;/plugin&gt;\n                &lt;plugin&gt;\n                    &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.0.0&lt;/version&gt;\n                &lt;/plugin&gt;\n            &lt;/plugins&gt;\n        &lt;/pluginManagement&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p><strong>Project Structure:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/KeTEa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KeTEa.png\" alt=\"enter image description here\" /></a></p>\n<p><em>Result:</em></p>\n<p><a href=\"https://i.stack.imgur.com/mV0pB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mV0pB.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>EDIT:</strong>\nI have checked it in the manager on different Tomcat and the application is there but still it doesn't work whether I call it <code>http://localhost:8080/electronic-apps/</code> or <code>http://localhost:8080/</code></p>\n<p><a href=\"https://i.stack.imgur.com/O4hRu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/O4hRu.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/xIzyS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xIzyS.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","hibernate","spring-data-jpa"],"comments":[{"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"score":0,"creation_date":1660056737,"post_id":73293652,"comment_id":129439780,"body_markdown":"Have you turned on SQL logging to see exactly what Hibernate is doing during a save of a new entity? That can shed a lot of light on performance issues, but obviously you&#39;ll want to do this for a test with only 1 or 2 entities, not millions.","body":"Have you turned on SQL logging to see exactly what Hibernate is doing during a save of a new entity? That can shed a lot of light on performance issues, but obviously you&#39;ll want to do this for a test with only 1 or 2 entities, not millions."},{"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"score":0,"creation_date":1660057109,"post_id":73293652,"comment_id":129439929,"body_markdown":"I&#39;ll also point out that bulk inserting/updating very large numbers of entities is not really Hibernate&#39;s specialty. You can do some things to help it perform better, such as using a stateless/read-only session or tuning Hibernate&#39;s batch size, but it&#39;s still not ever going to be as efficient as doing bulk inserts directly via JDBC.","body":"I&#39;ll also point out that bulk inserting/updating very large numbers of entities is not really Hibernate&#39;s specialty. You can do some things to help it perform better, such as using a stateless/read-only session or tuning Hibernate&#39;s batch size, but it&#39;s still not ever going to be as efficient as doing bulk inserts directly via JDBC."},{"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"score":0,"creation_date":1660057552,"post_id":73293652,"comment_id":129440118,"body_markdown":"Also, which generator type are you using? AUTO/IDENTITY/SEQUECE/TABLE? AUTO is the default. This choice can have an impact on what Hibernate has to do for each insert.","body":"Also, which generator type are you using? AUTO/IDENTITY/SEQUECE/TABLE? AUTO is the default. This choice can have an impact on what Hibernate has to do for each insert."},{"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"score":0,"creation_date":1660063886,"post_id":73293652,"comment_id":129442638,"body_markdown":"I think the AUTO generated type defaults to using a DB-side sequence for most dialects, which means Hibernate has to do the select to obtain the next available value in the sequence. That&#39;s why I always choose to use application-assigned IDs, my applications almost always know when they are creating versus updating.","body":"I think the AUTO generated type defaults to using a DB-side sequence for most dialects, which means Hibernate has to do the select to obtain the next available value in the sequence. That&#39;s why I always choose to use application-assigned IDs, my applications almost always know when they are creating versus updating."},{"owner":{"account_id":3136632,"reputation":125,"user_id":2719470,"accept_rate":60,"display_name":"mcardia"},"score":0,"creation_date":1660064368,"post_id":73293652,"comment_id":129442784,"body_markdown":"Thank you @E-Riz. Showing the SQL was a good idea. For random generated using UUID.randomUUID, hibernate is doing a &quot;extra&quot; SELECT.. I thought @ Version from spring was supose to tell hibernate if the entity is persisted or not. I was wrong. Is the @ Version from javax.persistence who does that. I&#39;m using AUTO with uuid2 strategy from hibernate.","body":"Thank you @E-Riz. Showing the SQL was a good idea. For random generated using UUID.randomUUID, hibernate is doing a &quot;extra&quot; SELECT.. I thought @ Version from spring was supose to tell hibernate if the entity is persisted or not. I was wrong. Is the @ Version from javax.persistence who does that. I&#39;m using AUTO with uuid2 strategy from hibernate."}],"answers":[{"tags":[],"owner":{"account_id":3136632,"reputation":125,"user_id":2719470,"accept_rate":60,"display_name":"mcardia"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660071149,"creation_date":1660071149,"answer_id":73296785,"question_id":73293652,"body_markdown":"The answers I found:\r\n\r\nDepending the way you do the batch insert, hibernate will not only do the insert, but execute others SQL.\r\n\r\nRegarding my original question about me expecting 5 and 6 to be faster. I was right and wrong. \r\n\r\nThe scenario 5 was not supose to be faster, because it does a SELECT before the insert.\r\n\r\nThe scenario 6 was supose to be faster because it simple execute 1 insert and nothing else.\r\nThen problema was that, for the Optimistic Lock I was using @Version from spring and this one does not tell hibernate if the entity is or isn&#39;t persited. So, as scenario 5, it does execute a SELECT before.\r\n\r\nThe @Version to do it right should be imported from javax.persistence.\r\n\r\nBellow the queires hibernate executes for each scenarios and the right time spent (for 1 million records) using the correct @Version.\r\n\r\nThanks.\r\n\r\n**1. (auditAuto): With envers and Hibernate Generator (uuid2)**\r\n\r\n    insert into teste.teste_audit_auto (name, id) values (?, ?)\r\n    select teste.hibernate_sequence.nextval from dual\r\n    insert into teste.version_control (timestamp, username, id) values (?, ?, ?)\r\n    insert into teste.teste_audit_auto_aud (revtype, name, id, rev) values (?, ?, ?, ?)\r\n\r\n**2. (auditRandom): With envers and UUID.randomUUID().toString() as id**\r\n\r\n    select auditrando0_.id as id1_2_0_, auditrando0_.name as name2_2_0_ from teste.teste_audit_random auditrando0_ where auditrando0_.id=?\r\n    insert into teste.teste_audit_random (name, id) values (?, ?)\r\n    select teste.hibernate_sequence.nextval from dual\r\n    insert into teste.version_control (timestamp, username, id) values (?, ?, ?)\r\n    insert into teste.teste_audit_random_aud (revtype, name, id, rev) values (?, ?, ?, ?)\r\n\r\n**3. (auditRandomOptLock): With envers and UUID.randomUUID().toString() as id, and Spring Boot @Version for optimistic lock**\r\n\r\n    insert into teste.teste_audit_random_opt_lock (name, opt_lock, id) values (?, ?, ?)\r\n    select teste.hibernate_sequence.nextval from dual\r\n    insert into teste.version_control (timestamp, username, id) values (?, ?, ?)\r\n    insert into teste.teste_audit_random_opt_lock_aud (revtype, name, id, rev) values (?, ?, ?, ?)\r\n\r\n**4. (noAuditAuto): Without envers and Hibernate Generator (uuid2)**\r\n\r\n    insert into teste.teste_noaudit_auto (name, id) values (?, ?)\r\n\r\n**5. (noAuditRandom): Without envers and UUID.randomUUID().toString() as id**\r\n\r\n    select noauditran0_.id as id1_7_0_, noauditran0_.name as name2_7_0_ from teste.teste_noaudit_random noauditran0_ where noauditran0_.id=?\r\n    insert into teste.teste_noaudit_random (name, id) values (?, ?)\r\n\r\n**6. (noAuditRandomOptLock): Without envers and UUID.randomUUID().toString() as id, and Spring Boot @Version for optimistic lock**\r\n\r\n    insert into teste.teste_noaudit_random_opt_lock (name, opt_lock, id) values (?, ?, ?)\r\n\r\n\r\nCreating the collections:\r\n1. AuditAuto :: 174ms\r\n2. AuditRandom :: 902ms\r\n3. AuditRandomOptLock :: 778ms\r\n4. NoAuditAuto :: 18ms\r\n5. NoAuditRandom :: 1584ms\r\n6. NoAuditRandomOptLock :: 808ms\r\n\r\nSaving the collections (each one in their own transaction)\r\n1. auditAuto :: 355222ms\r\n2. auditRandom :: 350674ms\r\n3. auditRandomOptLock :: 385234ms\r\n4. noAuditAuto :: 114813ms\r\n5. noAuditRandom :: 119246ms\r\n6. noAuditRandomOptLock :: 74858ms\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Performance using (hibernate) generator versus not using it was not what I thought it would be","body":"<p>The answers I found:</p>\n<p>Depending the way you do the batch insert, hibernate will not only do the insert, but execute others SQL.</p>\n<p>Regarding my original question about me expecting 5 and 6 to be faster. I was right and wrong.</p>\n<p>The scenario 5 was not supose to be faster, because it does a SELECT before the insert.</p>\n<p>The scenario 6 was supose to be faster because it simple execute 1 insert and nothing else.\nThen problema was that, for the Optimistic Lock I was using @Version from spring and this one does not tell hibernate if the entity is or isn't persited. So, as scenario 5, it does execute a SELECT before.</p>\n<p>The @Version to do it right should be imported from javax.persistence.</p>\n<p>Bellow the queires hibernate executes for each scenarios and the right time spent (for 1 million records) using the correct @Version.</p>\n<p>Thanks.</p>\n<p><strong>1. (auditAuto): With envers and Hibernate Generator (uuid2)</strong></p>\n<pre><code>insert into teste.teste_audit_auto (name, id) values (?, ?)\nselect teste.hibernate_sequence.nextval from dual\ninsert into teste.version_control (timestamp, username, id) values (?, ?, ?)\ninsert into teste.teste_audit_auto_aud (revtype, name, id, rev) values (?, ?, ?, ?)\n</code></pre>\n<p><strong>2. (auditRandom): With envers and UUID.randomUUID().toString() as id</strong></p>\n<pre><code>select auditrando0_.id as id1_2_0_, auditrando0_.name as name2_2_0_ from teste.teste_audit_random auditrando0_ where auditrando0_.id=?\ninsert into teste.teste_audit_random (name, id) values (?, ?)\nselect teste.hibernate_sequence.nextval from dual\ninsert into teste.version_control (timestamp, username, id) values (?, ?, ?)\ninsert into teste.teste_audit_random_aud (revtype, name, id, rev) values (?, ?, ?, ?)\n</code></pre>\n<p><strong>3. (auditRandomOptLock): With envers and UUID.randomUUID().toString() as id, and Spring Boot @Version for optimistic lock</strong></p>\n<pre><code>insert into teste.teste_audit_random_opt_lock (name, opt_lock, id) values (?, ?, ?)\nselect teste.hibernate_sequence.nextval from dual\ninsert into teste.version_control (timestamp, username, id) values (?, ?, ?)\ninsert into teste.teste_audit_random_opt_lock_aud (revtype, name, id, rev) values (?, ?, ?, ?)\n</code></pre>\n<p><strong>4. (noAuditAuto): Without envers and Hibernate Generator (uuid2)</strong></p>\n<pre><code>insert into teste.teste_noaudit_auto (name, id) values (?, ?)\n</code></pre>\n<p><strong>5. (noAuditRandom): Without envers and UUID.randomUUID().toString() as id</strong></p>\n<pre><code>select noauditran0_.id as id1_7_0_, noauditran0_.name as name2_7_0_ from teste.teste_noaudit_random noauditran0_ where noauditran0_.id=?\ninsert into teste.teste_noaudit_random (name, id) values (?, ?)\n</code></pre>\n<p><strong>6. (noAuditRandomOptLock): Without envers and UUID.randomUUID().toString() as id, and Spring Boot @Version for optimistic lock</strong></p>\n<pre><code>insert into teste.teste_noaudit_random_opt_lock (name, opt_lock, id) values (?, ?, ?)\n</code></pre>\n<p>Creating the collections:</p>\n<ol>\n<li>AuditAuto :: 174ms</li>\n<li>AuditRandom :: 902ms</li>\n<li>AuditRandomOptLock :: 778ms</li>\n<li>NoAuditAuto :: 18ms</li>\n<li>NoAuditRandom :: 1584ms</li>\n<li>NoAuditRandomOptLock :: 808ms</li>\n</ol>\n<p>Saving the collections (each one in their own transaction)</p>\n<ol>\n<li>auditAuto :: 355222ms</li>\n<li>auditRandom :: 350674ms</li>\n<li>auditRandomOptLock :: 385234ms</li>\n<li>noAuditAuto :: 114813ms</li>\n<li>noAuditRandom :: 119246ms</li>\n<li>noAuditRandomOptLock :: 74858ms</li>\n</ol>\n"}],"owner":{"account_id":3136632,"reputation":125,"user_id":2719470,"accept_rate":60,"display_name":"mcardia"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":167,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73296785,"answer_count":1,"score":0,"last_activity_date":1660071149,"creation_date":1660055767,"question_id":73293652,"body_markdown":"I&#39;m facing some performance issues when batch inserting millions of records into Oracle.\r\n\r\nSo, I run some tests trying to understanding the best method to create the entities.\r\n\r\n**I&#39;m curious why it is faster using hibernate generator than not using.**\r\n\r\nThe scenarios:\r\n1. (auditAuto): With envers and Hibernate Generator (uuid2)\r\n2. (auditRandom): With envers and\r\nUUID.randomUUID().toString() as id\r\n3. (auditRandomOptLock): With envers and\r\nUUID.randomUUID().toString() as id, and Spring Boot @Version for optimistic lock\r\n4. (noAuditAuto): Without envers and Hibernate Generator (uuid2)\r\n5. (noAuditRandom): Without envers and\r\nUUID.randomUUID().toString() as id\r\n6. (noAuditRandomOptLock): Without envers and\r\nUUID.randomUUID().toString() as id, and Spring Boot @Version for optimistic lock\r\n\r\nAll entities are simples entities with two columns.\r\n \r\nentity: id varchar2(255) primary key, name varchar2(255)\r\n\r\nThe results for 1.000.000 records:\r\n\r\nCreating the collections:\r\n1. AuditAuto :: 192ms\r\n2. AuditRandom :: 1125ms\r\n3. AuditRandomOptLock :: 646ms\r\n4. NoAuditAuto :: 16ms\r\n5. NoAuditRandom :: 1694ms\r\n6. NoAuditRandomOptLock :: 841ms\r\n\r\nHere, everything **was as expected**: Creating the entities collections was slower when using UUID.randomUUID() than not using for obvious reasons.\r\n\r\nSaving the collections (each one in their own transaction)\r\n1. auditAutoRepository :: 216847ms\r\n2. auditRandomRepository :: 338461ms\r\n3. auditRandomOptLockRepository :: 370750ms\r\n4. noAuditAutoRepository :: 88616ms\r\n5. noAuditRandomRepository :: 155202ms\r\n6. noAuditRandomOptLockRepository :: 176575ms\r\n\r\nHere is what I don&#39;t get. \r\nOk... using envers is slower than not using (that was expected) (1, 2 and 3).\r\nBut I don&#39;t get why using hibernate generator is faster at save (and commit).\r\n\r\nAs the id was already set at entities when using UUID.randomUUID() and, with generator, was not, I was expecting that the scenarios 5 and 6 to be faster than 4. But was not.\r\nMaybe because the amount of data transfered?\r\n\r\nI run the scearios many times and I got consistent results.\r\n\r\nI would like to read your opnion about it.\r\n\r\n(Guys, the question is not about business rules if I need envers or not. It&#39;s a techinal curiosity about how things are handled in batch inserts).\r\n\r\nThank you.\r\n\r\nEnvironment:\r\nOracle 12c | Oracle JDK 1.8 | Spring Boot 1.5.4 | Hibernate 5.4\r\n\r\n\r\n\r\n","title":"Performance using (hibernate) generator versus not using it was not what I thought it would be","body":"<p>I'm facing some performance issues when batch inserting millions of records into Oracle.</p>\n<p>So, I run some tests trying to understanding the best method to create the entities.</p>\n<p><strong>I'm curious why it is faster using hibernate generator than not using.</strong></p>\n<p>The scenarios:</p>\n<ol>\n<li>(auditAuto): With envers and Hibernate Generator (uuid2)</li>\n<li>(auditRandom): With envers and\nUUID.randomUUID().toString() as id</li>\n<li>(auditRandomOptLock): With envers and\nUUID.randomUUID().toString() as id, and Spring Boot @Version for optimistic lock</li>\n<li>(noAuditAuto): Without envers and Hibernate Generator (uuid2)</li>\n<li>(noAuditRandom): Without envers and\nUUID.randomUUID().toString() as id</li>\n<li>(noAuditRandomOptLock): Without envers and\nUUID.randomUUID().toString() as id, and Spring Boot @Version for optimistic lock</li>\n</ol>\n<p>All entities are simples entities with two columns.</p>\n<p>entity: id varchar2(255) primary key, name varchar2(255)</p>\n<p>The results for 1.000.000 records:</p>\n<p>Creating the collections:</p>\n<ol>\n<li>AuditAuto :: 192ms</li>\n<li>AuditRandom :: 1125ms</li>\n<li>AuditRandomOptLock :: 646ms</li>\n<li>NoAuditAuto :: 16ms</li>\n<li>NoAuditRandom :: 1694ms</li>\n<li>NoAuditRandomOptLock :: 841ms</li>\n</ol>\n<p>Here, everything <strong>was as expected</strong>: Creating the entities collections was slower when using UUID.randomUUID() than not using for obvious reasons.</p>\n<p>Saving the collections (each one in their own transaction)</p>\n<ol>\n<li>auditAutoRepository :: 216847ms</li>\n<li>auditRandomRepository :: 338461ms</li>\n<li>auditRandomOptLockRepository :: 370750ms</li>\n<li>noAuditAutoRepository :: 88616ms</li>\n<li>noAuditRandomRepository :: 155202ms</li>\n<li>noAuditRandomOptLockRepository :: 176575ms</li>\n</ol>\n<p>Here is what I don't get.\nOk... using envers is slower than not using (that was expected) (1, 2 and 3).\nBut I don't get why using hibernate generator is faster at save (and commit).</p>\n<p>As the id was already set at entities when using UUID.randomUUID() and, with generator, was not, I was expecting that the scenarios 5 and 6 to be faster than 4. But was not.\nMaybe because the amount of data transfered?</p>\n<p>I run the scearios many times and I got consistent results.</p>\n<p>I would like to read your opnion about it.</p>\n<p>(Guys, the question is not about business rules if I need envers or not. It's a techinal curiosity about how things are handled in batch inserts).</p>\n<p>Thank you.</p>\n<p>Environment:\nOracle 12c | Oracle JDK 1.8 | Spring Boot 1.5.4 | Hibernate 5.4</p>\n"},{"tags":["java","android","webview","raspberry-pi"],"comments":[{"owner":{"account_id":270469,"reputation":6260,"user_id":560435,"accept_rate":48,"display_name":"Robert Rowntree"},"score":0,"creation_date":1458699946,"post_id":36167569,"comment_id":59974563,"body_markdown":"that should load if u have all the requisite permissions set on the webView and if used , on the webVwClient... u will need to debug the java up until the webView&#39;s load()  ... then shift debugger to chrome dev tools","body":"that should load if u have all the requisite permissions set on the webView and if used , on the webVwClient... u will need to debug the java up until the webView&#39;s load()  ... then shift debugger to chrome dev tools"}],"answers":[{"tags":[],"owner":{"account_id":7280016,"reputation":1,"user_id":5550101,"display_name":"Anton Dalmau"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1460529081,"creation_date":1460529081,"answer_id":36590340,"question_id":36167569,"body_markdown":"I have a problem like yours. I&#39;ve achieved load a local IP, but it takes at least 30 seconds, meanwhile white screen as you. It loooks like chromium (webView) try to find the IP on internet, and at the end said: &quot;oh, it&#39;s a local ip, let&#39;s load&quot;. It&#39;s quite weird. I keep on waiting for help as well.","title":"Android WebView not showing local IP address","body":"<p>I have a problem like yours. I've achieved load a local IP, but it takes at least 30 seconds, meanwhile white screen as you. It loooks like chromium (webView) try to find the IP on internet, and at the end said: \"oh, it's a local ip, let's load\". It's quite weird. I keep on waiting for help as well.</p>\n"},{"tags":[],"owner":{"account_id":16330674,"reputation":11,"user_id":11794098,"display_name":"Levian"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1617086162,"creation_date":1617080930,"answer_id":66865090,"question_id":36167569,"body_markdown":"if you&#39;re using http protocol, try to add this on your android manifest \r\n\r\n    android:usesCleartextTraffic=&quot;true&quot;\r\n\r\nit works for me ","title":"Android WebView not showing local IP address","body":"<p>if you're using http protocol, try to add this on your android manifest</p>\n<pre><code>android:usesCleartextTraffic=&quot;true&quot;\n</code></pre>\n<p>it works for me</p>\n"},{"tags":[],"owner":{"account_id":21095103,"reputation":11,"user_id":15506243,"display_name":"Axim Amin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1617090721,"creation_date":1617087476,"answer_id":66866102,"question_id":36167569,"body_markdown":"``` \r\npublic void onCreate(Bundle savedInstanceState) {\r\n   \r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.webview);\r\n        mWebView = (WebView)findViewById(R.id.webview);\r\n        mWebView.clearCache(true);\r\n        mWebView.getSettings().setJavaScriptEnabled(true);\r\n        mWebView.loadUrl(&quot;http://10.0.2.2:8080/SampleWebServer/Welcome.html&quot;);\r\n        //pass complete url \r\n       \r\n}\r\n```","title":"Android WebView not showing local IP address","body":"<pre><code>public void onCreate(Bundle savedInstanceState) {\n   \n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.webview);\n        mWebView = (WebView)findViewById(R.id.webview);\n        mWebView.clearCache(true);\n        mWebView.getSettings().setJavaScriptEnabled(true);\n        mWebView.loadUrl(&quot;http://10.0.2.2:8080/SampleWebServer/Welcome.html&quot;);\n        //pass complete url \n       \n}\n</code></pre>\n"}],"owner":{"account_id":3426643,"reputation":981,"user_id":2872250,"accept_rate":29,"display_name":"Kevin Bright"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3290,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1660070415,"creation_date":1458691855,"question_id":36167569,"body_markdown":"I have a Raspberry Pi running [WebIOPi][1], which is connected to a relay board to turn things on and off via a web-based interface.  Here&#39;s what the interface looks like in a browser: \r\n\r\n[![enter image description here][2]][2]\r\n\r\nEverything works fine, but I want to create an android app that would simply display the web-based interface via WebView.  I&#39;ve used WebView before and it seems pretty straight forward, but I can&#39;t get it working. \r\n\r\nHere&#39;s my code: \r\n\r\nMainActivity: \r\n\r\n    package org.kevinbright.android.backyardcontrolapp;\r\n\r\n    import android.app.Activity;\r\n    import android.os.Bundle;\r\n    import android.webkit.WebView;\r\n    import android.webkit.WebViewClient;\r\n    \r\n    \r\n    public class MainActivity extends Activity {\r\n    \r\n        private WebView mWebViewer;\r\n\r\n\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n\r\n        //url = getIntent().getStringExtra(EXTRA_URL);\r\n\r\n        mWebViewer = (WebView)findViewById(R.id.webviewer);\r\n        mWebViewer.setWebViewClient(new WebViewClient());\r\n        mWebViewer.clearCache(true);\r\n        mWebViewer.getSettings().setJavaScriptEnabled(true);\r\n        mWebViewer.loadUrl(&quot;http://192.168.1.100:8000/&quot;);\r\n    }\r\n    }\r\n\r\nHere&#39;s the XML:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n    &lt;LinearLayout android:orientation=&quot;vertical&quot;\r\n                  android:layout_height=&quot;match_parent&quot;\r\n                  android:layout_width=&quot;match_parent&quot;\r\n                  xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n\r\n    &lt;WebView android:layout_height=&quot;match_parent&quot;\r\n             android:layout_width=&quot;match_parent&quot;\r\n             android:id=&quot;@+id/webviewer&quot;/&gt;\r\n\r\n&lt;/LinearLayout&gt;\r\n\r\n\r\nAnd I added:\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n\r\nto the Manifest.  \r\n\r\nI don&#39;t get any logcat errors, but when I run the app, I get only a white screen.  Also, if I substitute &quot;http://www.google.com&quot;, everything works fine.  Also, I&#39;m testing on a live device (no emulator).  Any suggestions as to why this isn&#39;t working?  \r\n\r\n\r\n  [1]: http://webiopi.trouch.com/\r\n  [2]: http://i.stack.imgur.com/AQAln.png","title":"Android WebView not showing local IP address","body":"<p>I have a Raspberry Pi running <a href=\"http://webiopi.trouch.com/\" rel=\"nofollow noreferrer\">WebIOPi</a>, which is connected to a relay board to turn things on and off via a web-based interface.  Here's what the interface looks like in a browser: </p>\n\n<p><a href=\"https://i.stack.imgur.com/AQAln.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AQAln.png\" alt=\"enter image description here\"></a></p>\n\n<p>Everything works fine, but I want to create an android app that would simply display the web-based interface via WebView.  I've used WebView before and it seems pretty straight forward, but I can't get it working. </p>\n\n<p>Here's my code: </p>\n\n<p>MainActivity: </p>\n\n<pre><code>package org.kevinbright.android.backyardcontrolapp;\n\nimport android.app.Activity;\nimport android.os.Bundle;\nimport android.webkit.WebView;\nimport android.webkit.WebViewClient;\n\n\npublic class MainActivity extends Activity {\n\n    private WebView mWebViewer;\n\n\n\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n\n    //url = getIntent().getStringExtra(EXTRA_URL);\n\n    mWebViewer = (WebView)findViewById(R.id.webviewer);\n    mWebViewer.setWebViewClient(new WebViewClient());\n    mWebViewer.clearCache(true);\n    mWebViewer.getSettings().setJavaScriptEnabled(true);\n    mWebViewer.loadUrl(\"http://192.168.1.100:8000/\");\n}\n}\n</code></pre>\n\n<p>Here's the XML:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n\n&lt;LinearLayout android:orientation=\"vertical\"\n              android:layout_height=\"match_parent\"\n              android:layout_width=\"match_parent\"\n              xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n\n&lt;WebView android:layout_height=\"match_parent\"\n         android:layout_width=\"match_parent\"\n         android:id=\"@+id/webviewer\"/&gt;\n</code></pre>\n\n<p></p>\n\n<p>And I added:</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.INTERNET\" /&gt;\n&lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" /&gt;\n</code></pre>\n\n<p>to the Manifest.  </p>\n\n<p>I don't get any logcat errors, but when I run the app, I get only a white screen.  Also, if I substitute \"<a href=\"http://www.google.com\" rel=\"nofollow noreferrer\">http://www.google.com</a>\", everything works fine.  Also, I'm testing on a live device (no emulator).  Any suggestions as to why this isn't working?  </p>\n"},{"tags":["java","opencv","image-processing","contour"],"comments":[{"owner":{"account_id":10008549,"reputation":1,"user_id":7402102,"display_name":"Udara Siriwardana"},"score":0,"creation_date":1484107085,"post_id":41581226,"comment_id":70369431,"body_markdown":"Please help me soon...","body":"Please help me soon..."},{"owner":{"account_id":6199398,"reputation":20357,"user_id":6885902,"display_name":"Jeru Luke"},"score":0,"creation_date":1484112170,"post_id":41581226,"comment_id":70370966,"body_markdown":"Can you upload the image you are working with?","body":"Can you upload the image you are working with?"},{"owner":{"account_id":3407423,"reputation":27749,"user_id":2858170,"display_name":"Piglet"},"score":0,"creation_date":1484120931,"post_id":41581226,"comment_id":70374605,"body_markdown":"what do you mean with &quot;I was failed on that&quot;?  what was the output? and why is your input image called &quot;destination&quot;","body":"what do you mean with &quot;I was failed on that&quot;?  what was the output? and why is your input image called &quot;destination&quot;"},{"owner":{"account_id":6761702,"reputation":309,"user_id":5717898,"accept_rate":50,"display_name":"Optimus 1072"},"score":0,"creation_date":1484127397,"post_id":41581226,"comment_id":70378211,"body_markdown":"Did you get any error or wrong output?.","body":"Did you get any error or wrong output?."},{"owner":{"account_id":10008549,"reputation":1,"user_id":7402102,"display_name":"Udara Siriwardana"},"score":0,"creation_date":1484139580,"post_id":41581226,"comment_id":70386412,"body_markdown":"@JeruLuke this is the image which i am working on.","body":"@JeruLuke this is the image which i am working on."},{"owner":{"account_id":10008549,"reputation":1,"user_id":7402102,"display_name":"Udara Siriwardana"},"score":0,"creation_date":1484139652,"post_id":41581226,"comment_id":70386458,"body_markdown":"@Piglet For this I got the number of contours as 48. However I want to get it as 1. because there is only one big white space, it is just a name only.my input is an output of another image which is caused to the colour segmentation. the presented image here is named as &quot;destination&quot; and that is an image which is generated after colour segmentation.","body":"@Piglet For this I got the number of contours as 48. However I want to get it as 1. because there is only one big white space, it is just a name only.my input is an output of another image which is caused to the colour segmentation. the presented image here is named as &quot;destination&quot; and that is an image which is generated after colour segmentation."},{"owner":{"account_id":6199398,"reputation":20357,"user_id":6885902,"display_name":"Jeru Luke"},"score":0,"creation_date":1484139710,"post_id":41581226,"comment_id":70386504,"body_markdown":"For this you have to perform morphological  opening operation","body":"For this you have to perform morphological  opening operation"},{"owner":{"account_id":10008549,"reputation":1,"user_id":7402102,"display_name":"Udara Siriwardana"},"score":0,"creation_date":1484139864,"post_id":41581226,"comment_id":70386602,"body_markdown":"@JeruLuke can I know the method of doing morphological opening operation?","body":"@JeruLuke can I know the method of doing morphological opening operation?"},{"owner":{"account_id":10008549,"reputation":1,"user_id":7402102,"display_name":"Udara Siriwardana"},"score":0,"creation_date":1484139913,"post_id":41581226,"comment_id":70386642,"body_markdown":"@Optimus1072 yes.I get wrong out put. number of shapes=48","body":"@Optimus1072 yes.I get wrong out put. number of shapes=48"},{"owner":{"account_id":3407423,"reputation":27749,"user_id":2858170,"display_name":"Piglet"},"score":0,"creation_date":1484140971,"post_id":41581226,"comment_id":70387288,"body_markdown":"if you only want to detect that 1 large blob you should say so in your question. because in your question you said you wanted to count white spots which are many more than 1 in your image. further you have to somehow tell your computer that you are only interested in the big one. how should it know?","body":"if you only want to detect that 1 large blob you should say so in your question. because in your question you said you wanted to count white spots which are many more than 1 in your image. further you have to somehow tell your computer that you are only interested in the big one. how should it know?"}],"answers":[{"tags":[],"owner":{"account_id":8044988,"reputation":2232,"user_id":6309717,"accept_rate":83,"display_name":"Soltius"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1484140603,"creation_date":1484140603,"answer_id":41591965,"question_id":41581226,"body_markdown":"Jeru&#39;s answer is correct for this case. If you have a case with bigger noise where morpholigocal operations won&#39;t take them out, you can make a cutoff with the contour size, something like\r\n\r\n    for contour in contours\r\n        if cv2.contourArea(contour) &gt; minimal_length\r\n\r\nbefore counting","title":"How to calculate the number of shapes detected after thresholding","body":"<p>Jeru's answer is correct for this case. If you have a case with bigger noise where morpholigocal operations won't take them out, you can make a cutoff with the contour size, something like</p>\n\n<pre><code>for contour in contours\n    if cv2.contourArea(contour) &gt; minimal_length\n</code></pre>\n\n<p>before counting</p>\n"}],"owner":{"account_id":10008549,"reputation":1,"user_id":7402102,"display_name":"Udara Siriwardana"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"accepted_answer_id":41591965,"answer_count":1,"score":-4,"last_activity_date":1660070294,"creation_date":1484097361,"question_id":41581226,"body_markdown":"I did color segmentation to my image using java OpenCV and the thresholded image can be shown as image 1 :\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n I want to calculate the number of white spot in the threshold image. I worked on the `findcontour()` function and tried to get the count of the white spot. However I failed on that. Please help me. My code is here.\r\n\r\n    Imgproc.findContours(destination, contours, hierarchy,\r\n             Imgproc.RETR_EXTERNAL,Imgproc.CHAIN_APPROX_SIMPLE);\r\n    for(int j=0;j&lt;contours.size();j++){\r\n      sum=sum+contours.size();\r\n    }\r\n    System.out.println(&quot;Sum&quot;+sum);\r\n\r\n \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Uw40D.jpg","title":"How to calculate the number of shapes detected after thresholding","body":"<p>I did color segmentation to my image using java OpenCV and the thresholded image can be shown as image 1 :</p>\n\n<p><a href=\"https://i.stack.imgur.com/Uw40D.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Uw40D.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>I want to calculate the number of white spot in the threshold image. I worked on the <code>findcontour()</code> function and tried to get the count of the white spot. However I failed on that. Please help me. My code is here.</p>\n\n<pre><code>Imgproc.findContours(destination, contours, hierarchy,\n         Imgproc.RETR_EXTERNAL,Imgproc.CHAIN_APPROX_SIMPLE);\nfor(int j=0;j&lt;contours.size();j++){\n  sum=sum+contours.size();\n}\nSystem.out.println(\"Sum\"+sum);\n</code></pre>\n"},{"tags":["java","apache-flink","flink-streaming","flink-sql"],"answers":[{"tags":[],"owner":{"account_id":11619749,"reputation":171,"user_id":8511385,"display_name":"Deepesh Dagar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660043116,"creation_date":1660043116,"answer_id":73290780,"question_id":73287923,"body_markdown":"\r\n - `Better resource utilisation : Task manager with n slots means task-manager will dedicate 1/n of its memory to each slot. It means more subtasks share the same JVM and share TCP connections (via multiplexing) and heartbeat messages. They may also share data sets and data structures, thus reducing the per-task overhead. Also, a good default number of task slots would be the number of CPU cores.` \r\n\r\nThere is no defined configuration. It totally depends on the application and the use case.\r\n\r\nA configuration with 1 slot per task manager provides isolation and is easier to manage. But this might leave some memory unused.\r\nOn the other hand, if multiple slots and multiple pipelines/jobs are run, tasks of diff jobs might get scheduled on 1 task manager. Because of high memory consumption of specific job, if task manager goes down it will restart all jobs running on that. If you only run a single job per cluster, multiple slots per TM might be fine.\r\n\r\nStand-by task slots helps when any task manager is down or pipelines-restarts. In these cases job-manager assigns those tasks to these stand-by slots and application will experience less downtime. ","title":"How to determine number of task slots in flink","body":"<ul>\n<li><code>Better resource utilisation : Task manager with n slots means task-manager will dedicate 1/n of its memory to each slot. It means more subtasks share the same JVM and share TCP connections (via multiplexing) and heartbeat messages. They may also share data sets and data structures, thus reducing the per-task overhead. Also, a good default number of task slots would be the number of CPU cores.</code></li>\n</ul>\n<p>There is no defined configuration. It totally depends on the application and the use case.</p>\n<p>A configuration with 1 slot per task manager provides isolation and is easier to manage. But this might leave some memory unused.\nOn the other hand, if multiple slots and multiple pipelines/jobs are run, tasks of diff jobs might get scheduled on 1 task manager. Because of high memory consumption of specific job, if task manager goes down it will restart all jobs running on that. If you only run a single job per cluster, multiple slots per TM might be fine.</p>\n<p>Stand-by task slots helps when any task manager is down or pipelines-restarts. In these cases job-manager assigns those tasks to these stand-by slots and application will experience less downtime.</p>\n"},{"tags":[],"owner":{"account_id":2274094,"reputation":40354,"user_id":2000823,"display_name":"David Anderson"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1660070129,"creation_date":1660070129,"answer_id":73296616,"question_id":73287923,"body_markdown":"Another factor to consider: a TM with multiple slots will have all of those slots running in the same JVM. So if you are using the heap-based state backend, then all of those objects for all of those slots will be handled by the same garbage collector -- which will lead to longer GC stalls (with the older JVMs that Flink still requires). This will be less of a factor someday when Flink supports more modern garbage collectors, and isn&#39;t an issue with RocksDB.","title":"How to determine number of task slots in flink","body":"<p>Another factor to consider: a TM with multiple slots will have all of those slots running in the same JVM. So if you are using the heap-based state backend, then all of those objects for all of those slots will be handled by the same garbage collector -- which will lead to longer GC stalls (with the older JVMs that Flink still requires). This will be less of a factor someday when Flink supports more modern garbage collectors, and isn't an issue with RocksDB.</p>\n"}],"owner":{"account_id":8492744,"reputation":63,"user_id":9022604,"display_name":"JoeHills"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1029,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1660070129,"creation_date":1660029823,"question_id":73287923,"body_markdown":"I am trying to determine how to devide the task slots for my flink job. To be more specific, is there a reason to use 2 task slots (or more) per task manager instead of one task slot per task manager? I read that multiple task slots per task manager help to reduce network overhead but is there another benefit? \r\n\r\nIn addition, I wonder if there is a benefit for &#39;stand-by&#39; task slots (namely, set the parallelism to a value smaller than the number of available task slots)?\r\n\r\nThanks ahead:)","title":"How to determine number of task slots in flink","body":"<p>I am trying to determine how to devide the task slots for my flink job. To be more specific, is there a reason to use 2 task slots (or more) per task manager instead of one task slot per task manager? I read that multiple task slots per task manager help to reduce network overhead but is there another benefit?</p>\n<p>In addition, I wonder if there is a benefit for 'stand-by' task slots (namely, set the parallelism to a value smaller than the number of available task slots)?</p>\n<p>Thanks ahead:)</p>\n"},{"tags":["java","opencv","image-segmentation","contour"],"comments":[{"owner":{"account_id":10901979,"reputation":11,"user_id":8013993,"display_name":"Arief Subagja"},"score":0,"creation_date":1494856442,"post_id":43980537,"comment_id":74991688,"body_markdown":"@Shai thanks i have added all images","body":"@Shai thanks i have added all images"},{"owner":{"account_id":1419422,"reputation":1567,"user_id":1344369,"accept_rate":67,"display_name":"Fred Guth"},"score":0,"creation_date":1533955235,"post_id":43980537,"comment_id":90549334,"body_markdown":"This seems a problem you could easily solve with a CNN pretrained with the MNIST dataset.  Have you tried?","body":"This seems a problem you could easily solve with a CNN pretrained with the MNIST dataset.  Have you tried?"}],"owner":{"account_id":10901979,"reputation":11,"user_id":8013993,"display_name":"Arief Subagja"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":162,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1660070041,"creation_date":1494854033,"question_id":43980537,"body_markdown":"i have a problem with character segmentation from water meter,\r\ni have a image water meter\r\n\r\nThen i have threshold this image after threshold\r\n\r\nAnd i have get a register meter after segmentation \r\n\r\nMy problem is to get each character from register meter..\r\n\r\nHere my code:\r\n\r\n    System.out.println(&quot;Character Segmentation the image at &quot; + path + &quot;... &quot;);\r\n    // get the jpeg image from the internal resource folder\r\n    Mat image = MatImageFromPath;\t\t\t\r\n    \t\t\t\t\r\n    // convert the image in gray scale\r\n    Imgproc.cvtColor(image, image, Imgproc.COLOR_BGR2GRAY);\r\n    // thresholding the image to make a binary image\r\n    Imgproc.threshold(image, image, 100, 255, Imgproc.THRESH_BINARY_INV);\r\n    \r\n    // finding the contours\r\n    ArrayList&lt;MatOfPoint&gt; contours = new ArrayList&lt;MatOfPoint&gt;();\r\n    Mat hierarchy = new Mat();\r\n    Imgproc.findContours(image, contours, hierarchy, Imgproc.RETR_TREE, Imgproc.CHAIN_APPROX_SIMPLE);\r\n    \t\t\r\n    Imgproc.drawContours(image, contours, 3, new Scalar(0, 255, 0),3);\r\n    \t\t\t\t    \r\n    // finding best bounding rectangle for a contour whose distance is closer to the image center that other ones\r\n    Rect rect = new Rect();\r\n    ArrayList&lt;Rect&gt; contourRects = new ArrayList&lt;Rect&gt;();\r\n    Point p1 = new Point(rect.x,rect.y);\r\n    Point p2 = new Point((rect.x+rect.width),(rect.y+rect.height));\r\n    int i=0;\r\n    \tfor (MatOfPoint contour : contours) {\r\n    \t\trect = Imgproc.boundingRect(contour);\r\n    \t\tcontourRects.add(rect);\r\n    \t\tcontour2f = new MatOfPoint2f( contours.get(i).toArray() );\r\n    \t\ti++;\r\n    \t\t}\r\n    \t\t\t\t    \r\n    \t\tCollections.sort(contourRects, new Comparator&lt;Rect&gt;(){\r\n    \t\t@Override\r\n    \t\tpublic int compare(Rect o1, Rect o2){\r\n    \t\treturn o1.x-o2.x;\r\n    \t\t}\r\n    \t\t});\r\n\r\n    \t\tfor (int j = 0; j &lt;= contourRects.size()-1; j++) {\r\n    \t\t\tif ((contourRects.get(j).width &gt;= 50 &amp;&amp; contourRects.get(j).width &lt;= 120) &amp;&amp; \r\n    \t\t\t    \t\t\t\t(contourRects.get(j).height &gt;= 150 &amp;&amp; contourRects.get(j).height &lt;= 210)) {\r\n    \t\t\t\t\t    \tSystem.out.println(contourRects.get(j).width);\r\n    \t\t\t\t\t    \tMat result = image.submat(contourRects.get(j));\r\n    \t\t\t\t\t    \tImgcodecs.imwrite(&quot;BoundingBox/&quot;+(j+1)+&quot;.png&quot;, result);\r\n    //\t\t\t\t    \t\t write the new image on disk\r\n    \t\t\t\t\t\t\tpath = &quot;BoundingBox/&quot;+(j+1)+&quot;.png&quot;;\r\n    \t\t\t\t\t\t} else {\r\n    \t\t\t\t\t\t\tcontinue;\r\n    \t\t\t\t\t\t}\r\n    \t\t\t    \t}\r\n    \t\t\t    \tImgcodecs.imwrite(&quot;BoundingBox/draw.png&quot;, image);\r\n    \t\t\t\t\tlabel2.setIcon(ImageFromPath(path));\r\n\r\n\r\nAll images at : [images][1]\r\n\r\ncan anyone help my problem? Thanks in advance \r\n\r\n\r\n  [1]: http://i.stack.imgur.com/jm6de.jpg","title":"Segmentation number from water meter","body":"<p>i have a problem with character segmentation from water meter,\ni have a image water meter</p>\n\n<p>Then i have threshold this image after threshold</p>\n\n<p>And i have get a register meter after segmentation </p>\n\n<p>My problem is to get each character from register meter..</p>\n\n<p>Here my code:</p>\n\n<pre><code>System.out.println(\"Character Segmentation the image at \" + path + \"... \");\n// get the jpeg image from the internal resource folder\nMat image = MatImageFromPath;           \n\n// convert the image in gray scale\nImgproc.cvtColor(image, image, Imgproc.COLOR_BGR2GRAY);\n// thresholding the image to make a binary image\nImgproc.threshold(image, image, 100, 255, Imgproc.THRESH_BINARY_INV);\n\n// finding the contours\nArrayList&lt;MatOfPoint&gt; contours = new ArrayList&lt;MatOfPoint&gt;();\nMat hierarchy = new Mat();\nImgproc.findContours(image, contours, hierarchy, Imgproc.RETR_TREE, Imgproc.CHAIN_APPROX_SIMPLE);\n\nImgproc.drawContours(image, contours, 3, new Scalar(0, 255, 0),3);\n\n// finding best bounding rectangle for a contour whose distance is closer to the image center that other ones\nRect rect = new Rect();\nArrayList&lt;Rect&gt; contourRects = new ArrayList&lt;Rect&gt;();\nPoint p1 = new Point(rect.x,rect.y);\nPoint p2 = new Point((rect.x+rect.width),(rect.y+rect.height));\nint i=0;\n    for (MatOfPoint contour : contours) {\n        rect = Imgproc.boundingRect(contour);\n        contourRects.add(rect);\n        contour2f = new MatOfPoint2f( contours.get(i).toArray() );\n        i++;\n        }\n\n        Collections.sort(contourRects, new Comparator&lt;Rect&gt;(){\n        @Override\n        public int compare(Rect o1, Rect o2){\n        return o1.x-o2.x;\n        }\n        });\n\n        for (int j = 0; j &lt;= contourRects.size()-1; j++) {\n            if ((contourRects.get(j).width &gt;= 50 &amp;&amp; contourRects.get(j).width &lt;= 120) &amp;&amp; \n                                (contourRects.get(j).height &gt;= 150 &amp;&amp; contourRects.get(j).height &lt;= 210)) {\n                            System.out.println(contourRects.get(j).width);\n                            Mat result = image.submat(contourRects.get(j));\n                            Imgcodecs.imwrite(\"BoundingBox/\"+(j+1)+\".png\", result);\n//                           write the new image on disk\n                            path = \"BoundingBox/\"+(j+1)+\".png\";\n                        } else {\n                            continue;\n                        }\n                    }\n                    Imgcodecs.imwrite(\"BoundingBox/draw.png\", image);\n                    label2.setIcon(ImageFromPath(path));\n</code></pre>\n\n<p>All images at : <a href=\"https://i.stack.imgur.com/jm6de.jpg\" rel=\"nofollow noreferrer\">images</a></p>\n\n<p>can anyone help my problem? Thanks in advance </p>\n"},{"tags":["java","android","opencv","contour","detection"],"answers":[{"tags":[],"owner":{"account_id":1677679,"reputation":10689,"user_id":1542806,"display_name":"Andrey  Smorodov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1476280264,"creation_date":1476277882,"answer_id":39999490,"question_id":39998504,"body_markdown":"Try use morphology, dilate and then erode with same kernel should make it better.\r\nOr use pyrDown + pyrUp, or just blur it.\r\n\r\nIn short use low-pass filter class of methods, because your object of interest is much larger than noise.","title":"OpenCV detecting largest rectangle yields puzzling results","body":"<p>Try use morphology, dilate and then erode with same kernel should make it better.\nOr use pyrDown + pyrUp, or just blur it.</p>\n\n<p>In short use low-pass filter class of methods, because your object of interest is much larger than noise.</p>\n"}],"owner":{"account_id":6888624,"reputation":33,"user_id":5292912,"display_name":"Mike G"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":309,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":39999490,"answer_count":1,"score":0,"last_activity_date":1660069677,"creation_date":1476274895,"question_id":39998504,"body_markdown":"My aim is to detect the largest rectangle in an image, whether its skewed or not. After some research and googling I came up with a code that theoretically should work, however in half of the cases I see puzzling results. \r\n\r\nI used OpenCV for Android, here is the Code: \r\n\r\n    private void find_parallels() {\r\n        Utils.bitmapToMat(selectedPicture,img);\r\n        Mat temp = new Mat();\r\n        Imgproc.resize(img,temp,new Size(640,480));\r\n        img = temp.clone();\r\n\r\n        Mat imgGray = new Mat();\r\n        Imgproc.cvtColor(img,imgGray,Imgproc.COLOR_BGR2GRAY);\r\n\r\n        Imgproc.GaussianBlur(imgGray,imgGray,new Size(5,5),0);\r\n\r\n        Mat threshedImg = new Mat();\r\n        Imgproc.adaptiveThreshold(imgGray,threshedImg,255,Imgproc.ADAPTIVE_THRESH_GAUSSIAN_C,Imgproc.THRESH_BINARY,11,2);\r\n\r\n        List&lt;MatOfPoint&gt; contours = new ArrayList&lt;&gt;();\r\n        Mat hierarchy = new Mat();\r\n        Mat imageContours = imgGray.clone();\r\n        Imgproc.cvtColor(imageContours,imageContours,Imgproc.COLOR_GRAY2BGR);\r\n\r\n        Imgproc.findContours(threshedImg,contours,hierarchy,Imgproc.RETR_TREE,Imgproc.CHAIN_APPROX_SIMPLE);\r\n        max_area = 0;\r\n        int num = 0;\r\n\r\n        for (int i = 0; i &lt; contours.size(); i++) {\r\n            area = Imgproc.contourArea(contours.get(i));\r\n\r\n            if (area &gt; 100) {\r\n                MatOfPoint2f mop = new MatOfPoint2f(contours.get(i).toArray());\r\n                peri = Imgproc.arcLength(mop, true);\r\n                Imgproc.approxPolyDP(mop, approx, 0.02 * peri, true);\r\n\r\n                if(area &gt; max_area &amp;&amp; approx.toArray().length == 4) {\r\n                    biggest = approx;\r\n                    num = i;\r\n                    max_area = area;\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        selectedPicture = Bitmap.createBitmap(640,480, Bitmap.Config.ARGB_8888) ;\r\n        Imgproc.drawContours(img,contours,num,new Scalar(0,0,255));\r\n        Utils.matToBitmap(img, selectedPicture);\r\n\r\n        imageView1.setImageBitmap(selectedPicture);}\r\n\r\n\r\nIn some cases it works excellent as can be seen in this image(See the white line between monitor bezel and screen.. sorry for the color):\r\n*Example that works:*\r\n![Example that works][1]\r\n\r\n\r\nHowever when in this image, and most images where the screen is greyish it gives crazy result.\r\n*Example that doesn&#39;t work:*\r\n![Example that doesn&#39;t work][2]\r\n\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1y6KY.png\r\n  [2]: https://i.stack.imgur.com/Ni6Iv.png","title":"OpenCV detecting largest rectangle yields puzzling results","body":"<p>My aim is to detect the largest rectangle in an image, whether its skewed or not. After some research and googling I came up with a code that theoretically should work, however in half of the cases I see puzzling results. </p>\n\n<p>I used OpenCV for Android, here is the Code: </p>\n\n<pre><code>private void find_parallels() {\n    Utils.bitmapToMat(selectedPicture,img);\n    Mat temp = new Mat();\n    Imgproc.resize(img,temp,new Size(640,480));\n    img = temp.clone();\n\n    Mat imgGray = new Mat();\n    Imgproc.cvtColor(img,imgGray,Imgproc.COLOR_BGR2GRAY);\n\n    Imgproc.GaussianBlur(imgGray,imgGray,new Size(5,5),0);\n\n    Mat threshedImg = new Mat();\n    Imgproc.adaptiveThreshold(imgGray,threshedImg,255,Imgproc.ADAPTIVE_THRESH_GAUSSIAN_C,Imgproc.THRESH_BINARY,11,2);\n\n    List&lt;MatOfPoint&gt; contours = new ArrayList&lt;&gt;();\n    Mat hierarchy = new Mat();\n    Mat imageContours = imgGray.clone();\n    Imgproc.cvtColor(imageContours,imageContours,Imgproc.COLOR_GRAY2BGR);\n\n    Imgproc.findContours(threshedImg,contours,hierarchy,Imgproc.RETR_TREE,Imgproc.CHAIN_APPROX_SIMPLE);\n    max_area = 0;\n    int num = 0;\n\n    for (int i = 0; i &lt; contours.size(); i++) {\n        area = Imgproc.contourArea(contours.get(i));\n\n        if (area &gt; 100) {\n            MatOfPoint2f mop = new MatOfPoint2f(contours.get(i).toArray());\n            peri = Imgproc.arcLength(mop, true);\n            Imgproc.approxPolyDP(mop, approx, 0.02 * peri, true);\n\n            if(area &gt; max_area &amp;&amp; approx.toArray().length == 4) {\n                biggest = approx;\n                num = i;\n                max_area = area;\n            }\n\n        }\n\n    }\n\n    selectedPicture = Bitmap.createBitmap(640,480, Bitmap.Config.ARGB_8888) ;\n    Imgproc.drawContours(img,contours,num,new Scalar(0,0,255));\n    Utils.matToBitmap(img, selectedPicture);\n\n    imageView1.setImageBitmap(selectedPicture);}\n</code></pre>\n\n<p>In some cases it works excellent as can be seen in this image(See the white line between monitor bezel and screen.. sorry for the color):\n<em>Example that works:</em>\n<img src=\"https://i.stack.imgur.com/1y6KY.png\" alt=\"Example that works\"></p>\n\n<p>However when in this image, and most images where the screen is greyish it gives crazy result.\n<em>Example that doesn't work:</em>\n<img src=\"https://i.stack.imgur.com/Ni6Iv.png\" alt=\"Example that doesn&#39;t work\"></p>\n"},{"tags":["java","postgresql","hibernate"],"comments":[{"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"score":0,"creation_date":1660068865,"post_id":73296196,"comment_id":129444218,"body_markdown":"Might help to see your Hibernate config properties as well as the exact error you&#39;re getting.","body":"Might help to see your Hibernate config properties as well as the exact error you&#39;re getting."},{"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"score":2,"creation_date":1660069254,"post_id":73296196,"comment_id":129444336,"body_markdown":"When you look at the DB are you sure you&#39;re looking at the same schema (`royal_user`)? And are the login credentials the same as you&#39;ve configured for the application?","body":"When you look at the DB are you sure you&#39;re looking at the same schema (<code>royal_user</code>)? And are the login credentials the same as you&#39;ve configured for the application?"},{"owner":{"account_id":23529200,"reputation":39,"user_id":18067074,"display_name":"grxuau"},"score":0,"creation_date":1660069580,"post_id":73296196,"comment_id":129444455,"body_markdown":"@E-Riz I edited question so I added content of hibernate.cfg.xml","body":"@E-Riz I edited question so I added content of hibernate.cfg.xml"},{"owner":{"account_id":23529200,"reputation":39,"user_id":18067074,"display_name":"grxuau"},"score":0,"creation_date":1660069744,"post_id":73296196,"comment_id":129444520,"body_markdown":"@E-Riz omg, I see that in DB two shemas called &quot;royal_user&quot;, I didn&#39;t noticed it before, I guess that might be a solution","body":"@E-Riz omg, I see that in DB two shemas called &quot;royal_user&quot;, I didn&#39;t noticed it before, I guess that might be a solution"}],"owner":{"account_id":23529200,"reputation":39,"user_id":18067074,"display_name":"grxuau"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":828,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1660069444,"creation_date":1660067701,"question_id":73296196,"body_markdown":"Briefly, Hibernate does not see the columns in the &#39;accounts&#39; table (PostgreSQL), but the table exists and the columns in it too. When you try to comment out a column field, Hibernate does not see the next field, and so on until there is not one left. I decided to recreate this table, include it in the @ManyToOne relation with the newly created account_groups table, but now an exception is thrown\r\nSchemaManagementException: Schema-validation: missing table [royal_user.account_groups]\r\nBetween account_groups and accounts there is a unidirectional @OneToMany in account_groups. There are tables in the DB, I&#39;m sure it&#39;s not a case problem in the title. Tell me, please, what could be the problem? I am attaching the entity classes below.\r\n\r\n**UserEntity**\r\n\r\n    @Entity\r\n    @Table(name = &quot;users&quot;, schema = &quot;royal_user&quot;)\r\n    @Getter\r\n    @Setter\r\n    @NoArgsConstructor\r\n    public class UserEntity {\r\n        @Id\r\n        @GeneratedValue(strategy= GenerationType.IDENTITY)\r\n        @Column(name = &quot;user_id&quot;, unique = true)\r\n        private Integer id;\r\n        @Column(name = &quot;name&quot;, nullable = false, unique = false)\r\n        private String name;\r\n        @Column(name = &quot;surname&quot;, nullable = false, unique = false)\r\n        private String surname;\r\n        @Column(name = &quot;patronymic&quot;, nullable = true, unique = false)\r\n        private String patronymic;\r\n        @Column(name = &quot;date_of_birth&quot;, nullable = false, unique = false)\r\n        private String dateOfBirth;\r\n        @OneToOne(cascade = CascadeType.ALL)\r\n        @JoinColumn(name = &quot;passport_id&quot;, nullable = false, unique = true)\r\n        private PassportEntity passportEntity;\r\n        @OneToOne(cascade = CascadeType.ALL)\r\n        @JoinColumn(name = &quot;accounts_group_id&quot;)\r\n        private AccountGroupsEntity accountGroupsEntity;\r\n        @Column(name = &quot;hashcode&quot;, nullable = false, unique = false)\r\n        private String hashcode;\r\n        @Column(name = &quot;email&quot;, nullable = false, unique = true)\r\n        private String email;\r\n\r\n        //some code\r\n     }\r\n\r\n**AccountEntity**\r\n\r\n    @Entity\r\n    @Table(name = &quot;accounts&quot;, schema = &quot;royal_user&quot;)\r\n    @Getter\r\n    @Setter\r\n    @NoArgsConstructor\r\n    public class AccountEntity {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        @Column(name = &quot;account_id&quot;)\r\n        private int id;\r\n        @Column(name = &quot;currency&quot;)\r\n        private String currency;\r\n        @Column(name = &quot;amount&quot;)\r\n        private int amount;\r\n        @Column(name = &quot;account_opening_date&quot;)\r\n        private String accountOpeningDate;\r\n        @Column(name = &quot;account_closing_date&quot;)\r\n        private String accountClosingDate;\r\n\r\n       //some code\r\n     }\r\n\r\n**AccountGroupsEntity**\r\n\r\n    @Entity\r\n    @Table(name = &quot;account_groups&quot;, schema = &quot;royal_user&quot;)\r\n    @Getter\r\n    @Setter\r\n    @NoArgsConstructor\r\n    public class AccountGroupsEntity {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        @Column(name = &quot;group_id&quot;)\r\n        private int groupId;\r\n        @OneToMany(cascade = CascadeType.ALL)\r\n        @JoinColumn(name = &quot;accounts_id&quot;)\r\n        private List&lt;AccountEntity&gt; accounts;\r\n        @OneToOne(cascade = CascadeType.ALL, mappedBy = &quot;accountGroupsEntity&quot;)\r\n        private UserEntity userEntity;\r\n        \r\n       //some code\r\n     }\r\n\r\nI forgot to fix the database in hibernate.config.xml from the test database to the current one, the problem with AccountsEntity, indicated at the beginning of the text, was repeated, namely Schema-validation: missing column [account_closing_date] in table [royal_user.accounts].\r\n\r\n**hibernate.cfg.xml**\r\n```\r\n&lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39;?&gt;\r\n&lt;!DOCTYPE hibernate-configuration PUBLIC\r\n        &quot;-//Hibernate/Hibernate Configuration DTD//EN&quot;\r\n        &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\r\n\r\n&lt;hibernate-configuration&gt;\r\n    &lt;session-factory&gt;\r\n\r\n        &lt;property name=&quot;connection.driver_class&quot;&gt;org.postgresql.Driver&lt;/property&gt;\r\n        &lt;property name=&quot;connection.url&quot;&gt;*connection_url*&lt;/property&gt;\r\n        &lt;property name=&quot;connection.username&quot;&gt;some_name&lt;/property&gt;\r\n        &lt;property name=&quot;connection.password&quot;&gt;some_password&lt;/property&gt;\r\n\r\n\r\n        &lt;!-- SQL dialect --&gt;\r\n        &lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.PostgreSQLDialect&lt;/property&gt;\r\n\r\n        &lt;!-- Enable Hibernate&#39;s automatic session context management --&gt;\r\n        &lt;property name=&quot;current_session_context_class&quot;&gt;thread&lt;/property&gt;\r\n\r\n        &lt;!-- Print executed SQL to stdout --&gt;\r\n        &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\r\n\r\n        &lt;!-- Update database on startup --&gt;\r\n        &lt;property name=&quot;hibernate.hbm2ddl.auto&quot;&gt;validate&lt;/property&gt;\r\n\r\n        &lt;!-- Annotated entity classes --&gt;\r\n        &lt;mapping class=&quot;restServiceOne.hibernate.entity.UserEntity&quot; /&gt;\r\n        &lt;mapping class=&quot;restServiceOne.hibernate.entity.PassportEntity&quot;/&gt;\r\n        &lt;mapping class=&quot;restServiceOne.hibernate.entity.AddressEntity&quot;/&gt;\r\n        &lt;mapping class=&quot;restServiceOne.hibernate.entity.AccountEntity&quot;/&gt;\r\n        &lt;mapping class=&quot;restServiceOne.hibernate.entity.AccountGroupsEntity&quot;/&gt;\r\n\r\n\r\n    &lt;/session-factory&gt;\r\n&lt;/hibernate-configuration&gt;\r\n```","title":"Schema-validation: missing table while it exists","body":"<p>Briefly, Hibernate does not see the columns in the 'accounts' table (PostgreSQL), but the table exists and the columns in it too. When you try to comment out a column field, Hibernate does not see the next field, and so on until there is not one left. I decided to recreate this table, include it in the @ManyToOne relation with the newly created account_groups table, but now an exception is thrown\nSchemaManagementException: Schema-validation: missing table [royal_user.account_groups]\nBetween account_groups and accounts there is a unidirectional @OneToMany in account_groups. There are tables in the DB, I'm sure it's not a case problem in the title. Tell me, please, what could be the problem? I am attaching the entity classes below.</p>\n<p><strong>UserEntity</strong></p>\n<pre><code>@Entity\n@Table(name = &quot;users&quot;, schema = &quot;royal_user&quot;)\n@Getter\n@Setter\n@NoArgsConstructor\npublic class UserEntity {\n    @Id\n    @GeneratedValue(strategy= GenerationType.IDENTITY)\n    @Column(name = &quot;user_id&quot;, unique = true)\n    private Integer id;\n    @Column(name = &quot;name&quot;, nullable = false, unique = false)\n    private String name;\n    @Column(name = &quot;surname&quot;, nullable = false, unique = false)\n    private String surname;\n    @Column(name = &quot;patronymic&quot;, nullable = true, unique = false)\n    private String patronymic;\n    @Column(name = &quot;date_of_birth&quot;, nullable = false, unique = false)\n    private String dateOfBirth;\n    @OneToOne(cascade = CascadeType.ALL)\n    @JoinColumn(name = &quot;passport_id&quot;, nullable = false, unique = true)\n    private PassportEntity passportEntity;\n    @OneToOne(cascade = CascadeType.ALL)\n    @JoinColumn(name = &quot;accounts_group_id&quot;)\n    private AccountGroupsEntity accountGroupsEntity;\n    @Column(name = &quot;hashcode&quot;, nullable = false, unique = false)\n    private String hashcode;\n    @Column(name = &quot;email&quot;, nullable = false, unique = true)\n    private String email;\n\n    //some code\n }\n</code></pre>\n<p><strong>AccountEntity</strong></p>\n<pre><code>@Entity\n@Table(name = &quot;accounts&quot;, schema = &quot;royal_user&quot;)\n@Getter\n@Setter\n@NoArgsConstructor\npublic class AccountEntity {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;account_id&quot;)\n    private int id;\n    @Column(name = &quot;currency&quot;)\n    private String currency;\n    @Column(name = &quot;amount&quot;)\n    private int amount;\n    @Column(name = &quot;account_opening_date&quot;)\n    private String accountOpeningDate;\n    @Column(name = &quot;account_closing_date&quot;)\n    private String accountClosingDate;\n\n   //some code\n }\n</code></pre>\n<p><strong>AccountGroupsEntity</strong></p>\n<pre><code>@Entity\n@Table(name = &quot;account_groups&quot;, schema = &quot;royal_user&quot;)\n@Getter\n@Setter\n@NoArgsConstructor\npublic class AccountGroupsEntity {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;group_id&quot;)\n    private int groupId;\n    @OneToMany(cascade = CascadeType.ALL)\n    @JoinColumn(name = &quot;accounts_id&quot;)\n    private List&lt;AccountEntity&gt; accounts;\n    @OneToOne(cascade = CascadeType.ALL, mappedBy = &quot;accountGroupsEntity&quot;)\n    private UserEntity userEntity;\n    \n   //some code\n }\n</code></pre>\n<p>I forgot to fix the database in hibernate.config.xml from the test database to the current one, the problem with AccountsEntity, indicated at the beginning of the text, was repeated, namely Schema-validation: missing column [account_closing_date] in table [royal_user.accounts].</p>\n<p><strong>hibernate.cfg.xml</strong></p>\n<pre><code>&lt;?xml version='1.0' encoding='utf-8'?&gt;\n&lt;!DOCTYPE hibernate-configuration PUBLIC\n        &quot;-//Hibernate/Hibernate Configuration DTD//EN&quot;\n        &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\n\n&lt;hibernate-configuration&gt;\n    &lt;session-factory&gt;\n\n        &lt;property name=&quot;connection.driver_class&quot;&gt;org.postgresql.Driver&lt;/property&gt;\n        &lt;property name=&quot;connection.url&quot;&gt;*connection_url*&lt;/property&gt;\n        &lt;property name=&quot;connection.username&quot;&gt;some_name&lt;/property&gt;\n        &lt;property name=&quot;connection.password&quot;&gt;some_password&lt;/property&gt;\n\n\n        &lt;!-- SQL dialect --&gt;\n        &lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.PostgreSQLDialect&lt;/property&gt;\n\n        &lt;!-- Enable Hibernate's automatic session context management --&gt;\n        &lt;property name=&quot;current_session_context_class&quot;&gt;thread&lt;/property&gt;\n\n        &lt;!-- Print executed SQL to stdout --&gt;\n        &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\n\n        &lt;!-- Update database on startup --&gt;\n        &lt;property name=&quot;hibernate.hbm2ddl.auto&quot;&gt;validate&lt;/property&gt;\n\n        &lt;!-- Annotated entity classes --&gt;\n        &lt;mapping class=&quot;restServiceOne.hibernate.entity.UserEntity&quot; /&gt;\n        &lt;mapping class=&quot;restServiceOne.hibernate.entity.PassportEntity&quot;/&gt;\n        &lt;mapping class=&quot;restServiceOne.hibernate.entity.AddressEntity&quot;/&gt;\n        &lt;mapping class=&quot;restServiceOne.hibernate.entity.AccountEntity&quot;/&gt;\n        &lt;mapping class=&quot;restServiceOne.hibernate.entity.AccountGroupsEntity&quot;/&gt;\n\n\n    &lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;\n</code></pre>\n"},{"tags":["java","android","android-studio","android-linearlayout","android-softkeyboard"],"comments":[{"owner":{"account_id":17653706,"reputation":375,"user_id":12813717,"display_name":"Memduh Yılmaz"},"score":0,"creation_date":1660068525,"post_id":73296216,"comment_id":129444106,"body_markdown":"Sorry, is the problem the keyboard hiding the bottom nav-bar?","body":"Sorry, is the problem the keyboard hiding the bottom nav-bar?"},{"owner":{"account_id":22858744,"reputation":153,"user_id":19369820,"display_name":"Elazar Halperin"},"score":0,"creation_date":1660068681,"post_id":73296216,"comment_id":129444152,"body_markdown":"No that&#39;s fine from me if it&#39;s hiding the bottom nav-bar, as you can see the keyboard is slightly the linear layout which holds the edit-text and the button","body":"No that&#39;s fine from me if it&#39;s hiding the bottom nav-bar, as you can see the keyboard is slightly the linear layout which holds the edit-text and the button"},{"owner":{"account_id":17653706,"reputation":375,"user_id":12813717,"display_name":"Memduh Yılmaz"},"score":1,"creation_date":1660069449,"post_id":73296216,"comment_id":129444409,"body_markdown":"I was going to give same answer just was testing out, in the AndroidManifest you can add android:windowSoftInputMode=&quot;adjustResize|stateVisible&quot; line to the activity and it solves","body":"I was going to give same answer just was testing out, in the AndroidManifest you can add android:windowSoftInputMode=&quot;adjustResize|stateVisible&quot; line to the activity and it solves"},{"owner":{"account_id":22858744,"reputation":153,"user_id":19369820,"display_name":"Elazar Halperin"},"score":0,"creation_date":1660069731,"post_id":73296216,"comment_id":129444513,"body_markdown":"It was already android:windowSoftInputMode=&quot;adjustResize|stateVisible&quot;\nthe line of java code that he gave works :) \nthank you very much :)","body":"It was already android:windowSoftInputMode=&quot;adjustResize|stateVisible&quot; the line of java code that he gave works :)  thank you very much :)"}],"answers":[{"tags":[],"owner":{"account_id":25757421,"reputation":381,"user_id":19508866,"display_name":"Rohit Bhati"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1660068923,"creation_date":1660068923,"answer_id":73296415,"question_id":73296216,"body_markdown":"Use `RESIZE` insade of `PAN` this will keep your `EditText` above the SoftKeyboard. here is example -\r\n\r\n    \r\n    getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_VISIBLE | WindowManager.LayoutParams.SOFT_INPUT_ADJUST_RESIZE);\r\n\r\nor you can do this with `manifest` file like this -\r\n\r\n    &lt;activity\r\n        android:name=&quot;.YourActivity&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:windowSoftInputMode=&quot;stateAlwaysHidden|adjustResize&quot;&gt;\r\n\r\nit&#39;s worked for me in the past, hope it helps.","title":"Prevent the keyboard from overflowing my LinearLayout after it shows up?","body":"<p>Use <code>RESIZE</code> insade of <code>PAN</code> this will keep your <code>EditText</code> above the SoftKeyboard. here is example -</p>\n<pre><code>getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_VISIBLE | WindowManager.LayoutParams.SOFT_INPUT_ADJUST_RESIZE);\n</code></pre>\n<p>or you can do this with <code>manifest</code> file like this -</p>\n<pre><code>&lt;activity\n    android:name=&quot;.YourActivity&quot;\n    android:label=&quot;@string/app_name&quot;\n    android:windowSoftInputMode=&quot;stateAlwaysHidden|adjustResize&quot;&gt;\n</code></pre>\n<p>it's worked for me in the past, hope it helps.</p>\n"}],"owner":{"account_id":22858744,"reputation":153,"user_id":19369820,"display_name":"Elazar Halperin"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":73296415,"answer_count":1,"score":0,"last_activity_date":1660068923,"creation_date":1660067813,"question_id":73296216,"body_markdown":"So I&#39;m trying to build a chat app, it works nicely but I got this problem when I&#39;m trying to open the keyboard. \r\nthis is how it looks like that without keyboard:\r\n\r\n![picture1][1]][1]\r\n\r\n\r\nand this is how it looks like when I click the and the keyboard opens\r\n\r\n[![picture2][2]][2]\r\n\r\n\r\nI do want this functionality to stay the same but I would like it to not overflow my LinearLayout\r\n\r\nI did this functionality by using this line of code:\r\n```\r\ngetWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_PAN);\r\n```\r\nhere is the xml code for the linearlayout that holds the edittext and the button:\r\n```\r\n&lt;LinearLayout\r\n        android:id=&quot;@+id/linearLayout&quot;\r\n        android:layout_width=&quot;0dp&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:background=&quot;@color/blue_bar_background&quot;\r\n        android:orientation=&quot;horizontal&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;&gt;\r\n\r\n        &lt;EditText\r\n            android:id=&quot;@+id/et_message&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_gravity=&quot;center|start&quot;\r\n            android:layout_marginTop=&quot;8dp&quot;\r\n            android:layout_marginBottom=&quot;8dp&quot;\r\n            android:layout_weight=&quot;1&quot;\r\n            android:background=&quot;@null&quot;\r\n            android:ems=&quot;10&quot;\r\n            android:focusedByDefault=&quot;true&quot;\r\n            android:hint=&quot;Type a message &quot;\r\n            android:maxLines=&quot;4&quot;\r\n            android:minHeight=&quot;48dp&quot;\r\n            android:paddingStart=&quot;8dp&quot;\r\n            android:paddingTop=&quot;8dp&quot;\r\n            android:paddingBottom=&quot;8dp&quot;\r\n            android:scrollHorizontally=&quot;true&quot;\r\n            android:singleLine=&quot;false&quot;\r\n            android:textColor=&quot;@color/white&quot;\r\n            android:textColorHint=&quot;#A8FFFFFF&quot;\r\n            android:textSize=&quot;20sp&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot; /&gt;\r\n\r\n        &lt;com.google.android.material.floatingactionbutton.FloatingActionButton\r\n            android:id=&quot;@+id/fab_addMessage&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_gravity=&quot;bottom|end&quot;\r\n            android:layout_weight=&quot;0&quot;\r\n            android:backgroundTint=&quot;@color/blue_bar_background&quot;\r\n            android:clickable=&quot;true&quot;\r\n            android:contentDescription=&quot;@string/app_name&quot;\r\n            android:elevation=&quot;0dp&quot;\r\n            android:src=&quot;@drawable/ic_round_send_24&quot;\r\n            app:borderWidth=&quot;0dp&quot;\r\n            app:elevation=&quot;0dp&quot;\r\n            app:tint=&quot;@color/white&quot; /&gt;\r\n    &lt;/LinearLayout&gt;\r\n```\r\nIf you need some more code, let me know in the comments.\r\nThank you very much for your time.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/u34Lq.png\r\n  [2]: https://i.stack.imgur.com/jrokj.png","title":"Prevent the keyboard from overflowing my LinearLayout after it shows up?","body":"<p>So I'm trying to build a chat app, it works nicely but I got this problem when I'm trying to open the keyboard.\nthis is how it looks like that without keyboard:</p>\n<p><img src=\"https://i.stack.imgur.com/u34Lq.png\" alt=\"picture1\" />]<a href=\"https://i.stack.imgur.com/u34Lq.png\" rel=\"nofollow noreferrer\">1</a></p>\n<p>and this is how it looks like when I click the and the keyboard opens</p>\n<p><a href=\"https://i.stack.imgur.com/jrokj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jrokj.png\" alt=\"picture2\" /></a></p>\n<p>I do want this functionality to stay the same but I would like it to not overflow my LinearLayout</p>\n<p>I did this functionality by using this line of code:</p>\n<pre><code>getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_PAN);\n</code></pre>\n<p>here is the xml code for the linearlayout that holds the edittext and the button:</p>\n<pre><code>&lt;LinearLayout\n        android:id=&quot;@+id/linearLayout&quot;\n        android:layout_width=&quot;0dp&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:background=&quot;@color/blue_bar_background&quot;\n        android:orientation=&quot;horizontal&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;&gt;\n\n        &lt;EditText\n            android:id=&quot;@+id/et_message&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_gravity=&quot;center|start&quot;\n            android:layout_marginTop=&quot;8dp&quot;\n            android:layout_marginBottom=&quot;8dp&quot;\n            android:layout_weight=&quot;1&quot;\n            android:background=&quot;@null&quot;\n            android:ems=&quot;10&quot;\n            android:focusedByDefault=&quot;true&quot;\n            android:hint=&quot;Type a message &quot;\n            android:maxLines=&quot;4&quot;\n            android:minHeight=&quot;48dp&quot;\n            android:paddingStart=&quot;8dp&quot;\n            android:paddingTop=&quot;8dp&quot;\n            android:paddingBottom=&quot;8dp&quot;\n            android:scrollHorizontally=&quot;true&quot;\n            android:singleLine=&quot;false&quot;\n            android:textColor=&quot;@color/white&quot;\n            android:textColorHint=&quot;#A8FFFFFF&quot;\n            android:textSize=&quot;20sp&quot;\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot; /&gt;\n\n        &lt;com.google.android.material.floatingactionbutton.FloatingActionButton\n            android:id=&quot;@+id/fab_addMessage&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_gravity=&quot;bottom|end&quot;\n            android:layout_weight=&quot;0&quot;\n            android:backgroundTint=&quot;@color/blue_bar_background&quot;\n            android:clickable=&quot;true&quot;\n            android:contentDescription=&quot;@string/app_name&quot;\n            android:elevation=&quot;0dp&quot;\n            android:src=&quot;@drawable/ic_round_send_24&quot;\n            app:borderWidth=&quot;0dp&quot;\n            app:elevation=&quot;0dp&quot;\n            app:tint=&quot;@color/white&quot; /&gt;\n    &lt;/LinearLayout&gt;\n</code></pre>\n<p>If you need some more code, let me know in the comments.\nThank you very much for your time.</p>\n"},{"tags":["java","apache-poi"],"comments":[{"owner":{"account_id":13459822,"reputation":1807,"user_id":9712270,"display_name":"magicmn"},"score":2,"creation_date":1659735015,"post_id":73255307,"comment_id":129373630,"body_markdown":"What happens if you use `Workbook wb = WorkbookFactory.create(input)` instead?","body":"What happens if you use <code>Workbook wb = WorkbookFactory.create(input)</code> instead?"},{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":1,"creation_date":1659788522,"post_id":73255307,"comment_id":129380962,"body_markdown":"If you open the file in Excel, and do a Save As, what type does Excel think it really is?","body":"If you open the file in Excel, and do a Save As, what type does Excel think it really is?"},{"owner":{"account_id":24139077,"reputation":25,"user_id":18105533,"display_name":"justchillen"},"score":0,"creation_date":1659918284,"post_id":73255307,"comment_id":129402216,"body_markdown":"@Gagravarr when I did those steps it says it an Excel Workbook","body":"@Gagravarr when I did those steps it says it an Excel Workbook"},{"owner":{"account_id":24139077,"reputation":25,"user_id":18105533,"display_name":"justchillen"},"score":0,"creation_date":1659920974,"post_id":73255307,"comment_id":129402467,"body_markdown":"@magicmn the error still occurs when I can try that, but thank you for your suggestion I appreciate it","body":"@magicmn the error still occurs when I can try that, but thank you for your suggestion I appreciate it"}],"answers":[{"tags":[],"owner":{"account_id":24139077,"reputation":25,"user_id":18105533,"display_name":"justchillen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660068674,"creation_date":1660068674,"answer_id":73296371,"question_id":73255307,"body_markdown":"I found an answer! So I as you see from the code above I passed my file as a byte array. Prior to that in my POST request I upload the file as a string and  decode it from base 64 and into an byte array, that were the error occured. It wasn&#39;t decode correctly. I printed out what the String version of the file from the  POST endpoint and that consist of &quot;data:application/vmd.ms-excel;base64,OMBR4K(this the file data encoded in base 64 but Im not going to type all of it). Basically it wasn&#39;t decoding correctly because of everything before the comma was a regular text header.  I spilt the string and saved everything after the comma in another string, and converted that into a byte array and decoded. Then my file was acceptable and I was able the create the workbook, and I also had to use .getSheetAt(int) instead of .getSheet(&quot;string&quot;)","title":"org.apache.poi.poifs.filesystem.NotOLE2FileException","body":"<p>I found an answer! So I as you see from the code above I passed my file as a byte array. Prior to that in my POST request I upload the file as a string and  decode it from base 64 and into an byte array, that were the error occured. It wasn't decode correctly. I printed out what the String version of the file from the  POST endpoint and that consist of &quot;data:application/vmd.ms-excel;base64,OMBR4K(this the file data encoded in base 64 but Im not going to type all of it). Basically it wasn't decoding correctly because of everything before the comma was a regular text header.  I spilt the string and saved everything after the comma in another string, and converted that into a byte array and decoded. Then my file was acceptable and I was able the create the workbook, and I also had to use .getSheetAt(int) instead of .getSheet(&quot;string&quot;)</p>\n"}],"owner":{"account_id":24139077,"reputation":25,"user_id":18105533,"display_name":"justchillen"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":408,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1660068674,"creation_date":1659733754,"question_id":73255307,"body_markdown":"I am creating an UI where I ask the user to upload an existing excel file and I am getting this error. I have done some searching, and tried to use a `POIFileSystem` object before passing in the `FileInputStream` but that didn&#39;t. I am getting this error of the line that creates the workbook.\r\n\r\nThis my code:\r\n\r\n    public static Cell readExcelFile(byte[] byteFile){\r\n        if (file == null){\r\n            System.out.println(&quot;file is empty&quot;);\r\n        } else {\r\n            InputStream input = new ByteArrayInputStream(byteFile);\r\n            POIFileSytem fsPOI = new POIFileSytem(input);\r\n            HSSFWorkbook wb = new HSSFWorkbook(fsPOI);\r\n          //continues to read the file\r\n    }\r\n    }","title":"org.apache.poi.poifs.filesystem.NotOLE2FileException","body":"<p>I am creating an UI where I ask the user to upload an existing excel file and I am getting this error. I have done some searching, and tried to use a <code>POIFileSystem</code> object before passing in the <code>FileInputStream</code> but that didn't. I am getting this error of the line that creates the workbook.</p>\n<p>This my code:</p>\n<pre><code>public static Cell readExcelFile(byte[] byteFile){\n    if (file == null){\n        System.out.println(&quot;file is empty&quot;);\n    } else {\n        InputStream input = new ByteArrayInputStream(byteFile);\n        POIFileSytem fsPOI = new POIFileSytem(input);\n        HSSFWorkbook wb = new HSSFWorkbook(fsPOI);\n      //continues to read the file\n}\n}\n</code></pre>\n"},{"tags":["java","queue","comparator"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1660068087,"post_id":73296260,"comment_id":129443962,"body_markdown":"Why not try to run the code and find out the order direction? Best not to use the site as a substitute for any tutorial on the subject as well as your own Java compiler and JVM.","body":"Why not try to run the code and find out the order direction? Best not to use the site as a substitute for any tutorial on the subject as well as your own Java compiler and JVM."},{"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"score":0,"creation_date":1660068202,"post_id":73296260,"comment_id":129444002,"body_markdown":"The map entries are ordered in the priority queue by their values.  The largest value will be at the front of the queue.","body":"The map entries are ordered in the priority queue by their values.  The largest value will be at the front of the queue."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1660068233,"post_id":73296260,"comment_id":129444010,"body_markdown":"And this is the comparator: `(a, b) -&gt; b.getValue() - a.getValue()`","body":"And this is the comparator: <code>(a, b) -&gt; b.getValue() - a.getValue()</code>"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1660068282,"post_id":73296260,"comment_id":129444024,"body_markdown":"and the queue *itself* is not ordered","body":"and the queue <i>itself</i> is not ordered"},{"owner":{"account_id":236189,"reputation":2903,"user_id":503510,"accept_rate":81,"display_name":"Tintin"},"score":0,"creation_date":1660069771,"post_id":73296260,"comment_id":129444527,"body_markdown":"@HovercraftFullOfEels _Why not try to run the code and find out_.     &gt;&gt; Probably not a very good advice for computer science.","body":"@HovercraftFullOfEels <i>Why not try to run the code and find out</i>.     &gt;&gt; Probably not a very good advice for computer science."},{"owner":{"account_id":236189,"reputation":2903,"user_id":503510,"accept_rate":81,"display_name":"Tintin"},"score":0,"creation_date":1660069851,"post_id":73296260,"comment_id":129444554,"body_markdown":"Please Read the Manual/Documentation before asking basic questions here.\nFrom [Priority Queue](https://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html) - &quot;_The elements of the priority queue are ordered according to their natural ordering, or by a Comparator provided at queue construction time, depending on which constructor is used._&quot;","body":"Please Read the Manual/Documentation before asking basic questions here. From <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html\" rel=\"nofollow noreferrer\">Priority Queue</a> - &quot;<i>The elements of the priority queue are ordered according to their natural ordering, or by a Comparator provided at queue construction time, depending on which constructor is used.</i>&quot;"},{"owner":{"account_id":236189,"reputation":2903,"user_id":503510,"accept_rate":81,"display_name":"Tintin"},"score":0,"creation_date":1660069921,"post_id":73296260,"comment_id":129444580,"body_markdown":"To read more about Natural Order, see [this](https://stackoverflow.com/questions/9176643/difference-between-natural-ordering-and-total-ordering)..\nIn short, Natural Order is something that depends on the default implementaion of that type in JVM.. for example, for characters object - it will be their unicode values, for numbers natural order is ascending order..","body":"To read more about Natural Order, see <a href=\"https://stackoverflow.com/questions/9176643/difference-between-natural-ordering-and-total-ordering\">this</a>.. In short, Natural Order is something that depends on the default implementaion of that type in JVM.. for example, for characters object - it will be their unicode values, for numbers natural order is ascending order.."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1660070262,"post_id":73296260,"comment_id":129444683,"body_markdown":"@Tintin: one key to understanding priority queues, is that the collection *itself* is not ordered: any iterator obtained will *not* traverse the queue in any order, and will not respect either &quot;natural&quot; order or comparator order. To get the items in order, either pass it into an array list and sort it, or use remove to remove the head of the queue, which *is* in priority order.","body":"@Tintin: one key to understanding priority queues, is that the collection <i>itself</i> is not ordered: any iterator obtained will <i>not</i> traverse the queue in any order, and will not respect either &quot;natural&quot; order or comparator order. To get the items in order, either pass it into an array list and sort it, or use remove to remove the head of the queue, which <i>is</i> in priority order."},{"owner":{"account_id":236189,"reputation":2903,"user_id":503510,"accept_rate":81,"display_name":"Tintin"},"score":0,"creation_date":1660070795,"post_id":73296260,"comment_id":129444831,"body_markdown":"@HovercraftFullOfEels - yes, a good reminder.","body":"@HovercraftFullOfEels - yes, a good reminder."},{"owner":{"account_id":236189,"reputation":2903,"user_id":503510,"accept_rate":81,"display_name":"Tintin"},"score":0,"creation_date":1660070914,"post_id":73296260,"comment_id":129444870,"body_markdown":"From the same link posted above [PriorityQueue](https://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html).  &quot;_The Iterator provided in method iterator() is not guaranteed to traverse the elements of the priority queue in any particular order. If you need ordered traversal, consider using Arrays.sort(pq.toArray())_&quot;","body":"From the same link posted above <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html\" rel=\"nofollow noreferrer\">PriorityQueue</a>.  &quot;<i>The Iterator provided in method iterator() is not guaranteed to traverse the elements of the priority queue in any particular order. If you need ordered traversal, consider using Arrays.sort(pq.toArray())</i>&quot;"}],"answers":[{"tags":[],"owner":{"account_id":25989315,"reputation":21,"user_id":19701800,"display_name":"Teresa"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1660068434,"creation_date":1660068434,"answer_id":73296334,"question_id":73296260,"body_markdown":"Yes it is sorted according to the descending order of the values in this map.","title":"How the map entries are ordered in this priority queue?","body":"<p>Yes it is sorted according to the descending order of the values in this map.</p>\n"}],"owner":{"account_id":25989315,"reputation":21,"user_id":19701800,"display_name":"Teresa"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":300,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"closed_date":1660068193,"answer_count":1,"score":-1,"last_activity_date":1660068434,"creation_date":1660068017,"question_id":73296260,"body_markdown":"what&#39;s the comparator used in this priorityqueue?\r\n```\r\n        PriorityQueue&lt;Map.Entry&lt;Integer, Integer&gt;&gt; pq = new PriorityQueue&lt;&gt;(\r\n                (a, b) -&gt;\r\n            b.getValue() - a.getValue()\r\n```\r\nIs it sorting the queue according to the descending order of the values in this map?","title":"How the map entries are ordered in this priority queue?","body":"<p>what's the comparator used in this priorityqueue?</p>\n<pre><code>        PriorityQueue&lt;Map.Entry&lt;Integer, Integer&gt;&gt; pq = new PriorityQueue&lt;&gt;(\n                (a, b) -&gt;\n            b.getValue() - a.getValue()\n</code></pre>\n<p>Is it sorting the queue according to the descending order of the values in this map?</p>\n"},{"tags":["java","scala","session","gatling"],"answers":[{"tags":[],"owner":{"account_id":6852429,"reputation":6319,"user_id":5269205,"display_name":"St&#233;phane LANDELLE"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660068356,"creation_date":1660068356,"answer_id":73296310,"question_id":73294833,"body_markdown":"`StringBody` takes a Function&lt;Session, String&gt; so you want to write:\r\n\r\n```java\r\n    public static String createBodyStringForStudentAssignmentSetup(Session session)\r\n    {\r\n\r\n        \r\n        String title;\r\n\r\n        String assignmentName = &quot;PerformanceTest_AssignmentApi_&quot;;\r\n\r\n        title = assignmentName.concat(LocalDate.now().toString());\r\n        \r\n        String studentsList = session.getString(&quot;listOfStudents&quot;);\r\n\r\n\r\n.... \r\n....\r\n\r\n       return body;\r\n    }\r\n\r\n       \r\n.body(StringBody(CreateAssignmentDataSetup::createBodyStringForStudentAssignmentSetup))\r\n```","title":"Passing session to function in Gatling Java","body":"<p><code>StringBody</code> takes a Function&lt;Session, String&gt; so you want to write:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static String createBodyStringForStudentAssignmentSetup(Session session)\n    {\n\n        \n        String title;\n\n        String assignmentName = &quot;PerformanceTest_AssignmentApi_&quot;;\n\n        title = assignmentName.concat(LocalDate.now().toString());\n        \n        String studentsList = session.getString(&quot;listOfStudents&quot;);\n\n\n.... \n....\n\n       return body;\n    }\n\n       \n.body(StringBody(CreateAssignmentDataSetup::createBodyStringForStudentAssignmentSetup))\n</code></pre>\n"}],"owner":{"account_id":21237877,"reputation":79,"user_id":15621824,"display_name":"Alexb1999"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":392,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660068356,"creation_date":1660060845,"question_id":73294833,"body_markdown":"I am trying to pass the session to a function in Gatling as shown in .body():\r\n\r\n```  public static final ChainBuilder createTeacherAssignmentJava =\r\n\r\n                    exec(http(&quot;ED/CTS/SGM&quot;)\r\n                                .post(IDS_BASE_URL + edEndpoint)\r\n                                .body(StringBody(createBodyStringForStudentAssignmentSetup(session)))\r\n                                .headers(getHeaderMap)\r\n                                .check(status().is(201),\r\n                                        jsonPath(&quot;$.assignments[0].refId&quot;).saveAs(&quot;assignmentRefId&quot;)));\r\n\r\n\r\n```\r\n\r\nThe function being called is shown here:\r\n\r\n```\r\n\r\npublic class CreateAssignmentDataSetup {\r\n\r\n    public static Body.WithString createBodyStringForStudentAssignmentSetup(Session session)\r\n    {\r\n\r\n        \r\n        String title;\r\n\r\n        String assignmentName = &quot;PerformanceTest_AssignmentApi_&quot;;\r\n\r\n        title = assignmentName.concat(LocalDate.now().toString());\r\n        \r\n        String studentsList = session.getString(&quot;listOfStudents&quot;);\r\n\r\n\r\n.... \r\n....\r\n\r\n       return StringBody(body);\r\n \r\n    }\r\n \r\n```\r\n\r\nIs it possible to pass &quot;session&quot; values like this to &quot;createBodyStringForStudentAssignmetnSetup()&quot; like this, since using an exec(session-&gt; block (shown below) will not allow requests to be triggered for some reason: \r\n```\r\nexec(session -&gt; {\r\n\r\n});\r\n```\r\n\r\nThanks\r\n\r\n\r\n\r\n","title":"Passing session to function in Gatling Java","body":"<p>I am trying to pass the session to a function in Gatling as shown in .body():</p>\n<pre><code>\n                    exec(http(&quot;ED/CTS/SGM&quot;)\n                                .post(IDS_BASE_URL + edEndpoint)\n                                .body(StringBody(createBodyStringForStudentAssignmentSetup(session)))\n                                .headers(getHeaderMap)\n                                .check(status().is(201),\n                                        jsonPath(&quot;$.assignments[0].refId&quot;).saveAs(&quot;assignmentRefId&quot;)));\n\n\n</code></pre>\n<p>The function being called is shown here:</p>\n<pre><code>\npublic class CreateAssignmentDataSetup {\n\n    public static Body.WithString createBodyStringForStudentAssignmentSetup(Session session)\n    {\n\n        \n        String title;\n\n        String assignmentName = &quot;PerformanceTest_AssignmentApi_&quot;;\n\n        title = assignmentName.concat(LocalDate.now().toString());\n        \n        String studentsList = session.getString(&quot;listOfStudents&quot;);\n\n\n.... \n....\n\n       return StringBody(body);\n \n    }\n \n</code></pre>\n<p>Is it possible to pass &quot;session&quot; values like this to &quot;createBodyStringForStudentAssignmetnSetup()&quot; like this, since using an exec(session-&gt; block (shown below) will not allow requests to be triggered for some reason:</p>\n<pre><code>exec(session -&gt; {\n\n});\n</code></pre>\n<p>Thanks</p>\n"},{"tags":["java","git","jgit"],"comments":[{"owner":{"account_id":12975459,"reputation":1665,"user_id":9379617,"display_name":"Ben"},"score":0,"creation_date":1527056514,"post_id":50481123,"comment_id":87975327,"body_markdown":"You should be able to chain a `.get(&quot;HEAD&quot;)` after this for the default-branch.","body":"You should be able to chain a <code>.get(&quot;HEAD&quot;)</code> after this for the default-branch."},{"owner":{"account_id":1348113,"reputation":608,"user_id":1288460,"accept_rate":82,"display_name":"Sorin Adrian Carbunaru"},"score":0,"creation_date":1527056690,"post_id":50481123,"comment_id":87975410,"body_markdown":"Tried this, but how can I find out the name of the default branch? If I invoke `getName()` the answer is `HEAD`. But I expected something like `master`, because that&#39;s the name of one of my repos&#39; default branch.","body":"Tried this, but how can I find out the name of the default branch? If I invoke <code>getName()</code> the answer is <code>HEAD</code>. But I expected something like <code>master</code>, because that&#39;s the name of one of my repos&#39; default branch."},{"owner":{"account_id":549364,"reputation":20582,"user_id":2986905,"accept_rate":78,"display_name":"R&#252;diger Herrmann"},"score":0,"creation_date":1528136541,"post_id":50481123,"comment_id":88382914,"body_markdown":"If you feel an answer solved the problem, please mark it as &#39;accepted&#39; by clicking the green checkmark. This helps keep the focus on older posts which still don&#39;t have answers.","body":"If you feel an answer solved the problem, please mark it as &#39;accepted&#39; by clicking the green checkmark. This helps keep the focus on older posts which still don&#39;t have answers."},{"owner":{"account_id":1348113,"reputation":608,"user_id":1288460,"accept_rate":82,"display_name":"Sorin Adrian Carbunaru"},"score":1,"creation_date":1528201041,"post_id":50481123,"comment_id":88409053,"body_markdown":"Hm, I felt like none solved the problem. But in the end, it seems that it cannot really detect which is the default, because there might not be a default advertised, right?","body":"Hm, I felt like none solved the problem. But in the end, it seems that it cannot really detect which is the default, because there might not be a default advertised, right?"},{"owner":{"account_id":2606443,"reputation":464,"user_id":2257531,"display_name":"Swapnil Gangrade"},"score":0,"creation_date":1632909826,"post_id":50481123,"comment_id":122618521,"body_markdown":"@SorinAdrianCarbunaru Did you get any solution for getting the default branch using Jgit","body":"@SorinAdrianCarbunaru Did you get any solution for getting the default branch using Jgit"},{"owner":{"account_id":1348113,"reputation":608,"user_id":1288460,"accept_rate":82,"display_name":"Sorin Adrian Carbunaru"},"score":0,"creation_date":1635231766,"post_id":50481123,"comment_id":123233902,"body_markdown":"Um, this was quite a long time ago, but it doesn&#39;t seem I found a solution. I just worked around this issue for my use case.","body":"Um, this was quite a long time ago, but it doesn&#39;t seem I found a solution. I just worked around this issue for my use case."},{"owner":{"account_id":2606443,"reputation":464,"user_id":2257531,"display_name":"Swapnil Gangrade"},"score":0,"creation_date":1636953870,"post_id":50481123,"comment_id":123686317,"body_markdown":"@SorinAdrianCarbunaru what is your workaround? can you share some details?","body":"@SorinAdrianCarbunaru what is your workaround? can you share some details?"},{"owner":{"account_id":1348113,"reputation":608,"user_id":1288460,"accept_rate":82,"display_name":"Sorin Adrian Carbunaru"},"score":0,"creation_date":1656594982,"post_id":50481123,"comment_id":128615006,"body_markdown":"Sorry for the late reply, but I am in child care leave","body":"Sorry for the late reply, but I am in child care leave"}],"answers":[{"tags":[],"owner":{"account_id":549364,"reputation":20582,"user_id":2986905,"accept_rate":78,"display_name":"R&#252;diger Herrmann"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1527065405,"creation_date":1527061055,"answer_id":50482486,"question_id":50481123,"body_markdown":"`Repository::getFullBranch` returns the current branch of the local repository. \r\n\r\nTo get the default branch of a remote repository, you need to ask for its `HEAD` ref. The map that is returned by the snippet that you posted should contain an entry with key `HEAD` and (if I&#39;m not mistaken) a value that denotes the name of the default branch.\r\n\r\nIf `HEAD` refers to an object id, you could obtain a list of all remote refs with `repository.getRefDatabase().getRefs(Constants.R_REMOTES)` to look up the HEAD id. This approach may be inaccurate as multiple refs could point to the same object id.\r\n\r\nNote that it is not required for a remote repository to advertise a default branch. \r\n\r\nSee also these posts for how C-Git finds the default branch: https://stackoverflow.com/questions/28666357/git-how-to-get-default-branch and https://stackoverflow.com/questions/18726037/what-determines-default-branch-after-git-clone)\r\n","title":"Get the default branch of a remote repository with JGit","body":"<p><code>Repository::getFullBranch</code> returns the current branch of the local repository. </p>\n\n<p>To get the default branch of a remote repository, you need to ask for its <code>HEAD</code> ref. The map that is returned by the snippet that you posted should contain an entry with key <code>HEAD</code> and (if I'm not mistaken) a value that denotes the name of the default branch.</p>\n\n<p>If <code>HEAD</code> refers to an object id, you could obtain a list of all remote refs with <code>repository.getRefDatabase().getRefs(Constants.R_REMOTES)</code> to look up the HEAD id. This approach may be inaccurate as multiple refs could point to the same object id.</p>\n\n<p>Note that it is not required for a remote repository to advertise a default branch. </p>\n\n<p>See also these posts for how C-Git finds the default branch: <a href=\"https://stackoverflow.com/questions/28666357/git-how-to-get-default-branch\">git - how to get default branch?</a> and <a href=\"https://stackoverflow.com/questions/18726037/what-determines-default-branch-after-git-clone\">What determines default branch after &quot;git clone&quot;?</a>)</p>\n"},{"tags":[],"owner":{"account_id":16430246,"reputation":304,"user_id":11869288,"display_name":"Titou"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660068058,"creation_date":1660068058,"answer_id":73296267,"question_id":50481123,"body_markdown":"After the chain with `.get(&quot;HEAD&quot;)`, if it is a symbolic link, you can chain it with `.getTarget().getName()` to &quot;extract&quot; its name e.g. \r\n\r\n    Map&lt;String, Ref&gt; callAsMap = Git.lsRemoteRepository()\r\n    .setRemote(&quot;https://github.com/example&quot;)\r\n    .setCredentialsProvider(credentialsProvider)\r\n    .callAsMap().get(&quot;HEAD&quot;).getTarget().getName()\r\n\r\nSource: https://www.eclipse.org/lists/jgit-dev/msg03320.html","title":"Get the default branch of a remote repository with JGit","body":"<p>After the chain with <code>.get(&quot;HEAD&quot;)</code>, if it is a symbolic link, you can chain it with <code>.getTarget().getName()</code> to &quot;extract&quot; its name e.g.</p>\n<pre><code>Map&lt;String, Ref&gt; callAsMap = Git.lsRemoteRepository()\n.setRemote(&quot;https://github.com/example&quot;)\n.setCredentialsProvider(credentialsProvider)\n.callAsMap().get(&quot;HEAD&quot;).getTarget().getName()\n</code></pre>\n<p>Source: <a href=\"https://www.eclipse.org/lists/jgit-dev/msg03320.html\" rel=\"nofollow noreferrer\">https://www.eclipse.org/lists/jgit-dev/msg03320.html</a></p>\n"}],"owner":{"account_id":1348113,"reputation":608,"user_id":1288460,"accept_rate":82,"display_name":"Sorin Adrian Carbunaru"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2280,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1660068058,"creation_date":1527056425,"question_id":50481123,"body_markdown":"I am working on a Git client, and right now I am trying to implement the checkout of a specific branch. I have a combo box that I populate with branch names, and I would like to find out which branch is the default, so that I can set it as the preselected item in the combo box when connecting to a valid Git repository.\r\n\r\nI am listing all the remote branches as you can see below, but I cannot figure out which is the default one.\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    Map&lt;String, Ref&gt; callAsMap = Git.lsRemoteRepository()\r\n        .setRemote(&quot;https://github.com/example&quot;)\r\n        .setCredentialsProvider(credentialsProvider)\r\n        .callAsMap();\r\n\r\nSo, is there a way (standard or &quot;hacky&quot;) to detect which `Ref` object represents the default branch? And how can I get its name?","title":"Get the default branch of a remote repository with JGit","body":"<p>I am working on a Git client, and right now I am trying to implement the checkout of a specific branch. I have a combo box that I populate with branch names, and I would like to find out which branch is the default, so that I can set it as the preselected item in the combo box when connecting to a valid Git repository.</p>\n\n<p>I am listing all the remote branches as you can see below, but I cannot figure out which is the default one.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, Ref&gt; callAsMap = Git.lsRemoteRepository()\n    .setRemote(\"https://github.com/example\")\n    .setCredentialsProvider(credentialsProvider)\n    .callAsMap();\n</code></pre>\n\n<p>So, is there a way (standard or \"hacky\") to detect which <code>Ref</code> object represents the default branch? And how can I get its name?</p>\n"},{"tags":["java","arrays","string"],"comments":[{"owner":{"account_id":23568015,"reputation":136,"user_id":17608510,"display_name":"John"},"score":1,"creation_date":1660063853,"post_id":73295424,"comment_id":129442632,"body_markdown":"You made it, but you don&#39;t like it? What exactly do you ask for?","body":"You made it, but you don&#39;t like it? What exactly do you ask for?"},{"owner":{"account_id":25014379,"reputation":51,"user_id":18873592,"display_name":"Orest Dymarchuk"},"score":0,"creation_date":1660063980,"post_id":73295424,"comment_id":129442665,"body_markdown":"It looks like trash, I want it to be cleaner.@John","body":"It looks like trash, I want it to be cleaner.@John"},{"owner":{"account_id":23568015,"reputation":136,"user_id":17608510,"display_name":"John"},"score":1,"creation_date":1660064252,"post_id":73295424,"comment_id":129442744,"body_markdown":"This is a small program. There is probably no lag in performance. Do not try to make micro improvements. This often results in making the program harder to read. Furthermore, this site is actually not made for code reviews. If you have a specific question, this is for you. But I cannot quiet figure out what you expect to be better.","body":"This is a small program. There is probably no lag in performance. Do not try to make micro improvements. This often results in making the program harder to read. Furthermore, this site is actually not made for code reviews. If you have a specific question, this is for you. But I cannot quiet figure out what you expect to be better."},{"owner":{"account_id":22905554,"reputation":673,"user_id":17043683,"display_name":"MMZK1526"},"score":3,"creation_date":1660064265,"post_id":73295424,"comment_id":129442750,"body_markdown":"What makes you feel &quot;it looks like trash&quot; though? It&#39;s quite hard to judge code based on subjective &quot;prettiness&quot;. We can be more helpful if you go into more detail on &quot;what pattern looks not pretty and why&quot;","body":"What makes you feel &quot;it looks like trash&quot; though? It&#39;s quite hard to judge code based on subjective &quot;prettiness&quot;. We can be more helpful if you go into more detail on &quot;what pattern looks not pretty and why&quot;"},{"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"score":2,"creation_date":1660064326,"post_id":73295424,"comment_id":129442771,"body_markdown":"Stack Overflow is a Question &amp; Answer platform. There is no question here. It would be better at https://codereview.stackexchange.com/","body":"Stack Overflow is a Question &amp; Answer platform. There is no question here. It would be better at <a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a>"},{"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"score":0,"creation_date":1660064688,"post_id":73295424,"comment_id":129442884,"body_markdown":"You should provide some example of input and expected output.  It&#39;s too much to read your code and trying to guess what the output for an input is.","body":"You should provide some example of input and expected output.  It&#39;s too much to read your code and trying to guess what the output for an input is."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1660066124,"post_id":73295424,"comment_id":129443335,"body_markdown":"no idea why the code is sorting... for &quot;Replace non-digit characters from an array of String and return a String&quot;: `Arrays.stream(input).map(s -&gt; s.replaceAll(&quot;\\\\D&quot;, &quot;&quot;)).map(s -&gt; s.split(&quot;&quot;)).flatMap(Arrays::stream).collect(Collectors.joining(&quot;,&quot;))`  (easy to add `sorted()` if needed)","body":"no idea why the code is sorting... for &quot;Replace non-digit characters from an array of String and return a String&quot;: <code>Arrays.stream(input).map(s -&gt; s.replaceAll(&quot;\\\\D&quot;, &quot;&quot;)).map(s -&gt; s.split(&quot;&quot;)).flatMap(Arrays::stream).collect(Collectors.join&zwnj;&#8203;ing(&quot;,&quot;))</code>  (easy to add <code>sorted()</code> if needed)"}],"answers":[{"tags":[],"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1660066438,"creation_date":1660065677,"answer_id":73295813,"question_id":73295424,"body_markdown":"\r\nYour solution would run in O(n*log n) mainly due to Arrays.sort.\r\n\r\nUse a simple counting sort.  This would give you a runtime of O(n).\r\n\r\nLook at the string and ignore all other non-digits.","title":"Replace non-digit characters from an array of String and return a String Java","body":"<p>Your solution would run in O(n*log n) mainly due to Arrays.sort.</p>\n<p>Use a simple counting sort.  This would give you a runtime of O(n).</p>\n<p>Look at the string and ignore all other non-digits.</p>\n"},{"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660067752,"creation_date":1660067752,"answer_id":73296203,"question_id":73295424,"body_markdown":"You might also try it this way:\r\n```\r\n String sortedIntsCsv = Arrays.stream(string).map(s -&gt; s.replaceAll(&quot;\\\\D&quot;, &quot;&quot;)).mapToInt(Integer::valueOf).sorted().mapToObj(String::valueOf).collect(Collectors.joining(&quot;,&quot;));\r\n```","title":"Replace non-digit characters from an array of String and return a String Java","body":"<p>You might also try it this way:</p>\n<pre><code> String sortedIntsCsv = Arrays.stream(string).map(s -&gt; s.replaceAll(&quot;\\\\D&quot;, &quot;&quot;)).mapToInt(Integer::valueOf).sorted().mapToObj(String::valueOf).collect(Collectors.joining(&quot;,&quot;));\n</code></pre>\n"}],"owner":{"account_id":25014379,"reputation":51,"user_id":18873592,"display_name":"Orest Dymarchuk"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1660422898,"accepted_answer_id":73295813,"answer_count":2,"score":-2,"last_activity_date":1660067752,"creation_date":1660063636,"question_id":73295424,"body_markdown":"I need to replace non-digit characters from an array of String and return a String with digits separated by coma, actually, I made it but don&#39;t like it.\r\n\r\nThe first thing I made, was added values from the String array to the String.\r\n\r\nThen I replaced non-digit characters from a String.\r\n\r\nAfter that, I added digit values to an int array and sorted it.\r\n\r\nThen I added all this stuff to an array of strings and separated values with commas, after that I returned it.\r\n\r\nI would be glad for advice, thanks for attention.\r\n\r\n    import java.util.Arrays;\r\n    \r\n    class Test {\r\n    \r\n    \tprivate static String sortedStringOfNumber(String[] string) {\r\n    \r\n    \t\tStringBuilder temp = new StringBuilder();\r\n    \r\n    \t\tfor (String s: string) {\r\n    \t\t\ttemp.append(s);\r\n    \t\t}\r\n    \r\n    \t\tString numberOnly = temp.toString().replaceAll(&quot;[^0-9]&quot;, &quot;&quot;);\r\n    \r\n    \t\tint[] numbers = new int[numberOnly.length()];\r\n    \t\tfor (int i = 0; i &lt; numberOnly.length(); i++) {\r\n    \t\t\tnumbers[i] = numberOnly.charAt(i) - &#39;0&#39;;\r\n    \t\t}\r\n    \r\n    \t\tArrays.sort(numbers);\r\n    \r\n    \t\tString[] result = new String[numbers.length];\r\n    \r\n    \t\tfor (int i = 0; i &lt; numbers.length; i++) {\r\n    \r\n    \t\t\tresult[i] = String.valueOf(numbers[i]);\r\n    \t\t}\r\n    \r\n    \t\tStringBuilder sb = new StringBuilder();\r\n    \r\n    \t\tfor (int i = 0; i &lt; result.length; i++) {\r\n    \t\t\tsb.append(result[i].toString());\r\n    \t\t\tif (i != result.length - 1)\r\n    \t\t\t\tsb.append(&quot;, &quot;);\r\n    \t\t}\r\n    \t\treturn sb.toString();\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tString[] arrayStringData = new String[] { &quot;1&quot;, &quot;ab3c&quot;, &quot;level&quot;, null, &quot;java2s.com&quot;, &quot;asdf 456&quot;, &quot;Br0C0de&quot; };\r\n    \r\n    \t\t//Should be &quot;0, 0, 1, 2, 3, 4, 5, 6&quot;\r\n    \t\tSystem.out.println(&quot;Sorted string of numbers -&gt;\\t&quot; + sortedStringOfNumber(arrayStringData));\r\n    \t}\r\n    }\r\n\r\n","title":"Replace non-digit characters from an array of String and return a String Java","body":"<p>I need to replace non-digit characters from an array of String and return a String with digits separated by coma, actually, I made it but don't like it.</p>\n<p>The first thing I made, was added values from the String array to the String.</p>\n<p>Then I replaced non-digit characters from a String.</p>\n<p>After that, I added digit values to an int array and sorted it.</p>\n<p>Then I added all this stuff to an array of strings and separated values with commas, after that I returned it.</p>\n<p>I would be glad for advice, thanks for attention.</p>\n<pre><code>import java.util.Arrays;\n\nclass Test {\n\n    private static String sortedStringOfNumber(String[] string) {\n\n        StringBuilder temp = new StringBuilder();\n\n        for (String s: string) {\n            temp.append(s);\n        }\n\n        String numberOnly = temp.toString().replaceAll(&quot;[^0-9]&quot;, &quot;&quot;);\n\n        int[] numbers = new int[numberOnly.length()];\n        for (int i = 0; i &lt; numberOnly.length(); i++) {\n            numbers[i] = numberOnly.charAt(i) - '0';\n        }\n\n        Arrays.sort(numbers);\n\n        String[] result = new String[numbers.length];\n\n        for (int i = 0; i &lt; numbers.length; i++) {\n\n            result[i] = String.valueOf(numbers[i]);\n        }\n\n        StringBuilder sb = new StringBuilder();\n\n        for (int i = 0; i &lt; result.length; i++) {\n            sb.append(result[i].toString());\n            if (i != result.length - 1)\n                sb.append(&quot;, &quot;);\n        }\n        return sb.toString();\n    }\n\n    public static void main(String[] args) {\n        String[] arrayStringData = new String[] { &quot;1&quot;, &quot;ab3c&quot;, &quot;level&quot;, null, &quot;java2s.com&quot;, &quot;asdf 456&quot;, &quot;Br0C0de&quot; };\n\n        //Should be &quot;0, 0, 1, 2, 3, 4, 5, 6&quot;\n        System.out.println(&quot;Sorted string of numbers -&gt;\\t&quot; + sortedStringOfNumber(arrayStringData));\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","jpa","criteria"],"answers":[{"tags":[],"owner":{"account_id":2458519,"reputation":7657,"user_id":2143128,"display_name":"Ratul Sharker"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1660067602,"creation_date":1660067602,"answer_id":73296171,"question_id":73295373,"body_markdown":"If i understand your scenario, then your entities looks like following\r\n\r\n**Product.java**\r\n\r\n```java\r\npublic class Product {\r\n    // ...    \r\n    List&lt;ProductItem&gt; productItem;\r\n\r\n    //...\r\n}\r\n```\r\n\r\n**ProductItem.java**\r\n\r\n```java\r\npublic class ProductItem {\r\n    \r\n    //...\r\n    Status status;\r\n\r\n    //...\r\n}\r\n```\r\n\r\n**Status.java**\r\n\r\n```\r\npublic class Status {\r\n    //...\r\n}\r\n```\r\n\r\nTo fetch the `products` with list of `productItem` inside it having the `status` object consider the following\r\n\r\n```java\r\nroot = ...\r\nquery = ...\r\n\r\nFetch&lt;Product, ProductItem&gt; productItemFetch = root.fetch(&quot;productItem&quot;, JoinType.LEFT);\r\nproductItemFetch.fetch(&quot;status&quot;, JoinType.LEFT);\r\n```\r\n\r\nThis way you can fetch upto 3rd level objects.\r\n","title":"Criteria JPA - need to show the variables values from: Object Inside Object Inside Object","body":"<p>If i understand your scenario, then your entities looks like following</p>\n<p><strong>Product.java</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Product {\n    // ...    \n    List&lt;ProductItem&gt; productItem;\n\n    //...\n}\n</code></pre>\n<p><strong>ProductItem.java</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ProductItem {\n    \n    //...\n    Status status;\n\n    //...\n}\n</code></pre>\n<p><strong>Status.java</strong></p>\n<pre><code>public class Status {\n    //...\n}\n</code></pre>\n<p>To fetch the <code>products</code> with list of <code>productItem</code> inside it having the <code>status</code> object consider the following</p>\n<pre class=\"lang-java prettyprint-override\"><code>root = ...\nquery = ...\n\nFetch&lt;Product, ProductItem&gt; productItemFetch = root.fetch(&quot;productItem&quot;, JoinType.LEFT);\nproductItemFetch.fetch(&quot;status&quot;, JoinType.LEFT);\n</code></pre>\n<p>This way you can fetch upto 3rd level objects.</p>\n"}],"owner":{"account_id":26011927,"reputation":23,"user_id":19720856,"display_name":"Gabrielzious"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73296171,"answer_count":1,"score":2,"last_activity_date":1660067602,"creation_date":1660063391,"question_id":73295373,"body_markdown":"i&#39;m using Criteria Jpa in my Springboot application. I can successfully join 2 entities and both of them brings me the results, but I can&#39;t see what is inside the third hierarchical object.\r\n\r\nExemple:\r\nI have an object called Product. Inside the Product I have a list of ProductItem. Inside the productItem I have a list of Status.\r\n\r\nbut when I find for a list of the PRODUCTs (1th object), I recieve an empty list of status(3th) inside the productItem objects.\r\n\r\n\r\nCriteria class:\r\n```\r\n        var criteriaBuilder = entityManager.getCriteriaBuilder();\r\n        var criteriaQuery = criteriaBuilder.createQuery(Product.class);\r\n        var rootContractedProduct = criteriaQuery.from(Product.class);\r\n\r\n rootContractedProduct.fetch(&quot;status&quot;, JoinType.LEFT);\r\n rootContractedProduct.fetch(&quot;productItem&quot;, JoinType.LEFT);\r\n\r\nTypedQuery&lt;Product&gt; typedQuery = entityManager.createQuery(criteriaQuery);\r\n\r\n```\r\nThe entities classes are correctly mapped. I can retrive the STATUS from ProductItem if I do a direct repository search. I think im missing something inside the Criteria class to populate the Status inside ProductItem class.\r\n\r\n\r\n\r\n\r\n\r\n","title":"Criteria JPA - need to show the variables values from: Object Inside Object Inside Object","body":"<p>i'm using Criteria Jpa in my Springboot application. I can successfully join 2 entities and both of them brings me the results, but I can't see what is inside the third hierarchical object.</p>\n<p>Exemple:\nI have an object called Product. Inside the Product I have a list of ProductItem. Inside the productItem I have a list of Status.</p>\n<p>but when I find for a list of the PRODUCTs (1th object), I recieve an empty list of status(3th) inside the productItem objects.</p>\n<p>Criteria class:</p>\n<pre><code>        var criteriaBuilder = entityManager.getCriteriaBuilder();\n        var criteriaQuery = criteriaBuilder.createQuery(Product.class);\n        var rootContractedProduct = criteriaQuery.from(Product.class);\n\n rootContractedProduct.fetch(&quot;status&quot;, JoinType.LEFT);\n rootContractedProduct.fetch(&quot;productItem&quot;, JoinType.LEFT);\n\nTypedQuery&lt;Product&gt; typedQuery = entityManager.createQuery(criteriaQuery);\n\n</code></pre>\n<p>The entities classes are correctly mapped. I can retrive the STATUS from ProductItem if I do a direct repository search. I think im missing something inside the Criteria class to populate the Status inside ProductItem class.</p>\n"},{"tags":["java","casting","processing"],"answers":[{"tags":[],"owner":{"account_id":467643,"reputation":41696,"user_id":873165,"accept_rate":84,"display_name":"Kevin Workman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1558288950,"creation_date":1558288950,"answer_id":56210580,"question_id":56209691,"body_markdown":"Using `instanceof` is almost always a hack, and is probably a symptom of a bad design.\r\n\r\nWhat you&#39;ve described sounds exactly like an existing Java library called the [Abstract Window Toolkit](https://en.wikipedia.org/wiki/Abstract_Window_Toolkit) (AWT), so you might consider &quot;borrowing&quot; some of their design patterns.\r\n\r\n- `Component` is an abstract class that defines an abstract `paint()` function. The `paint()` function takes a `Graphics` argument. More on that in a second.\r\n- `Button` and `Label` extend `Component` and overide the `paint()` function.\r\n- `Graphics` is a class that contains functions like `drawRect()` and `setBackground()`. It encapsulates shared drawing code, similar to what I think your `Theme` class would do.\r\n\r\nIf I were you, I would consider taking a similar approach for your library.\r\n\r\nI&#39;ll try to address some of your other comments:\r\n\r\n&gt; Example: GreenBackgroundButton extends Button{}\r\n\r\nFavor [composition over inheritance](https://en.wikipedia.org/wiki/Composition_over_inheritance) for cases like this. You should not need to extend `Button` to set a background. Instead, have a `setBackground()` function in the `Button()` class (or in the `Component` class).\r\n\r\n&gt; Also, by putting all the function in an external class, you can control all the rapihcs of you Program with a single class, so you can have the same background for all the components with a single function displayBackground() etc.\r\n\r\nIt sounds like this belongs in your `Component` class.\r\n\r\nAlso, taking a step back, I would encourage you to avoid the temptation to [over-engineer](https://en.wikipedia.org/wiki/Overengineering) a solution. You might think you need a complicated design with several levels of inheritance and many different classes, but chances are a simpler design will probably get you almost everything you need. Specifically, I don&#39;t see a huge benefit to extracting any code into the `Theme` class. I would probably put everything directly in my component subclasses like `Button` and `Label`.","title":"How to cast a reference with an object&#39;s original class?","body":"<p>Using <code>instanceof</code> is almost always a hack, and is probably a symptom of a bad design.</p>\n\n<p>What you've described sounds exactly like an existing Java library called the <a href=\"https://en.wikipedia.org/wiki/Abstract_Window_Toolkit\" rel=\"nofollow noreferrer\">Abstract Window Toolkit</a> (AWT), so you might consider \"borrowing\" some of their design patterns.</p>\n\n<ul>\n<li><code>Component</code> is an abstract class that defines an abstract <code>paint()</code> function. The <code>paint()</code> function takes a <code>Graphics</code> argument. More on that in a second.</li>\n<li><code>Button</code> and <code>Label</code> extend <code>Component</code> and overide the <code>paint()</code> function.</li>\n<li><code>Graphics</code> is a class that contains functions like <code>drawRect()</code> and <code>setBackground()</code>. It encapsulates shared drawing code, similar to what I think your <code>Theme</code> class would do.</li>\n</ul>\n\n<p>If I were you, I would consider taking a similar approach for your library.</p>\n\n<p>I'll try to address some of your other comments:</p>\n\n<blockquote>\n  <p>Example: GreenBackgroundButton extends Button{}</p>\n</blockquote>\n\n<p>Favor <a href=\"https://en.wikipedia.org/wiki/Composition_over_inheritance\" rel=\"nofollow noreferrer\">composition over inheritance</a> for cases like this. You should not need to extend <code>Button</code> to set a background. Instead, have a <code>setBackground()</code> function in the <code>Button()</code> class (or in the <code>Component</code> class).</p>\n\n<blockquote>\n  <p>Also, by putting all the function in an external class, you can control all the rapihcs of you Program with a single class, so you can have the same background for all the components with a single function displayBackground() etc.</p>\n</blockquote>\n\n<p>It sounds like this belongs in your <code>Component</code> class.</p>\n\n<p>Also, taking a step back, I would encourage you to avoid the temptation to <a href=\"https://en.wikipedia.org/wiki/Overengineering\" rel=\"nofollow noreferrer\">over-engineer</a> a solution. You might think you need a complicated design with several levels of inheritance and many different classes, but chances are a simpler design will probably get you almost everything you need. Specifically, I don't see a huge benefit to extracting any code into the <code>Theme</code> class. I would probably put everything directly in my component subclasses like <code>Button</code> and <code>Label</code>.</p>\n"}],"owner":{"account_id":13818852,"reputation":148,"user_id":9974818,"display_name":"CuriousCI"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":202,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":56210580,"answer_count":1,"score":0,"last_activity_date":1660067228,"creation_date":1558282571,"question_id":56209691,"body_markdown":"I&#39;m working on a GUI library for Processing, and I have got a class ```Component```. I have a bunch of other classes that extend ```Component```: ```Label```, ```Button```(Which extends ```Label```), ```Panel``` and ```Icon```. These classes continue just the &quot;logic&quot; part (position, text, function checking if they are clicked etc...).\r\n\r\nThe class ```Panel``` has inside of it an ```ArrayList```of ```Component```, and you can add to it buttons, labels etc...\r\n\r\nTo display the components I decided to use a class ```Theme```, which has inside some overloadings of the function ```display(Component component)``` (one for ```Label```, one for ```Button```, one for ```Panel``` etc...).\r\n\r\nInside ```display(Panel panel)```, at some point, I display all the children of the panel, but, instead of treating them (the children) as ```Button``` or ```Label```, it treats all of them as ```Component```. How can I solve this ISSUE? \r\n\r\n1) I&#39;ve already tried to use a method ```display()```inside the classes ```Component```, ```Button``` etc... it works partly, but it gives some &quot;coding problems&quot;: to override the function display you have to create a new class (Example: GreenBackgroundButton extends Button{}). Also, by putting all the function in an external class, you can control all the grapihcs of you Program with a single class, so you can have the same background for all the components with a single function ```displayBackground()``` etc...\r\n\r\n2) ```instanceof``` can&#39;t be used, because, if I have to use it to cast the children of the panel, the user can&#39;t create custom components, because they would be displayed as ```Component``` not as ```TextField``` (example).\r\n\r\n3) I&#39;ve tried casting directly ```display((Button)panel.getChildren.get(0))```, but, as it Should, when I use a label, it gives an error (as expected).\r\n\r\n4) I&#39;ve tried casting like this too: ```panel.getChildren().get(0).getClass().cast(panel.getChildren().get(0))```, and it doesn&#39;t work, I don&#39;t know why. (I tried all its variants, like creating an external object etc...)\r\n\r\n5) If you need more code, you can ask...\r\n\r\n```\r\npublic void display(Panel panel) {\r\n    println(&quot;panel&quot;);\r\n    if (panel.isVisible()) {\r\n      pushMatrix();\r\n      translate(panel.getX(), panel.getY());\r\n      displayBackground(panel, #AAAAAA);\r\n\r\n      for (int i = 0; i &lt; panel.getChildren().size(); i++) {\r\n        this.display(panel.getChildren().get(i).getClass().cast(panel.getChildren().get(i))); //THIS IS THE LINE WITH THE ISSUE\r\n        //println(panel.getChildren().get(i).getClass().cast(panel.getChildren().get(i)));\r\n      }\r\n      popMatrix();\r\n    }\r\n  }\r\n\r\n\r\n```\r\n```\r\nTheme basicTheme;\r\nButton close;\r\nPanel panel;\r\n\r\nvoid settings() {\r\n  size(400, 600, P2D);\r\n}\r\n\r\nvoid setup() {\r\n  basicTheme = new Theme();\r\n\r\n  close = new Button();\r\n  close.setBounds(10, 10, 100, 25);\r\n  close.setText(&quot;close&quot;);\r\n\r\n  panel = new Panel();\r\n  panel.setBounds(50, 200, 200, 200);\r\n  panel.add(close);\r\n}\r\n\r\nvoid draw() {\r\n  background(255);\r\n\r\n  basicTheme.display(panel);\r\n}\r\n```\r\n\r\nI expect to see on the canvas a working button inside the panel, instead of seeing a component. I don&#39;t have any particular error I can think of right now.","title":"How to cast a reference with an object&#39;s original class?","body":"<p>I'm working on a GUI library for Processing, and I have got a class <code>Component</code>. I have a bunch of other classes that extend <code>Component</code>: <code>Label</code>, <code>Button</code>(Which extends <code>Label</code>), <code>Panel</code> and <code>Icon</code>. These classes continue just the &quot;logic&quot; part (position, text, function checking if they are clicked etc...).</p>\n<p>The class <code>Panel</code> has inside of it an <code>ArrayList</code>of <code>Component</code>, and you can add to it buttons, labels etc...</p>\n<p>To display the components I decided to use a class <code>Theme</code>, which has inside some overloadings of the function <code>display(Component component)</code> (one for <code>Label</code>, one for <code>Button</code>, one for <code>Panel</code> etc...).</p>\n<p>Inside <code>display(Panel panel)</code>, at some point, I display all the children of the panel, but, instead of treating them (the children) as <code>Button</code> or <code>Label</code>, it treats all of them as <code>Component</code>. How can I solve this ISSUE?</p>\n<ol>\n<li><p>I've already tried to use a method <code>display()</code>inside the classes <code>Component</code>, <code>Button</code> etc... it works partly, but it gives some &quot;coding problems&quot;: to override the function display you have to create a new class (Example: GreenBackgroundButton extends Button{}). Also, by putting all the function in an external class, you can control all the grapihcs of you Program with a single class, so you can have the same background for all the components with a single function <code>displayBackground()</code> etc...</p>\n</li>\n<li><p><code>instanceof</code> can't be used, because, if I have to use it to cast the children of the panel, the user can't create custom components, because they would be displayed as <code>Component</code> not as <code>TextField</code> (example).</p>\n</li>\n<li><p>I've tried casting directly <code>display((Button)panel.getChildren.get(0))</code>, but, as it Should, when I use a label, it gives an error (as expected).</p>\n</li>\n<li><p>I've tried casting like this too: <code>panel.getChildren().get(0).getClass().cast(panel.getChildren().get(0))</code>, and it doesn't work, I don't know why. (I tried all its variants, like creating an external object etc...)</p>\n</li>\n<li><p>If you need more code, you can ask...</p>\n</li>\n</ol>\n<pre><code>public void display(Panel panel) {\n    println(&quot;panel&quot;);\n    if (panel.isVisible()) {\n      pushMatrix();\n      translate(panel.getX(), panel.getY());\n      displayBackground(panel, #AAAAAA);\n\n      for (int i = 0; i &lt; panel.getChildren().size(); i++) {\n        this.display(panel.getChildren().get(i).getClass().cast(panel.getChildren().get(i))); //THIS IS THE LINE WITH THE ISSUE\n        //println(panel.getChildren().get(i).getClass().cast(panel.getChildren().get(i)));\n      }\n      popMatrix();\n    }\n  }\n\n\n</code></pre>\n<pre><code>Theme basicTheme;\nButton close;\nPanel panel;\n\nvoid settings() {\n  size(400, 600, P2D);\n}\n\nvoid setup() {\n  basicTheme = new Theme();\n\n  close = new Button();\n  close.setBounds(10, 10, 100, 25);\n  close.setText(&quot;close&quot;);\n\n  panel = new Panel();\n  panel.setBounds(50, 200, 200, 200);\n  panel.add(close);\n}\n\nvoid draw() {\n  background(255);\n\n  basicTheme.display(panel);\n}\n</code></pre>\n<p>I expect to see on the canvas a working button inside the panel, instead of seeing a component. I don't have any particular error I can think of right now.</p>\n"},{"tags":["java","java-8","java-stream"],"comments":[{"owner":{"account_id":9517474,"reputation":9937,"user_id":7073340,"accept_rate":96,"display_name":"Jayendran"},"score":1,"creation_date":1533364496,"post_id":51683094,"comment_id":90328885,"body_markdown":"Welcome to StackOverflow. Please read on here to how to ask question https://stackoverflow.com/help/how-to-ask \nExplain in detail about your question. What have you been tried so far? What do you mean by Invalid here?","body":"Welcome to StackOverflow. Please read on here to how to ask question <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>  Explain in detail about your question. What have you been tried so far? What do you mean by Invalid here?"}],"answers":[{"tags":[],"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1533369681,"creation_date":1533364567,"answer_id":51683164,"question_id":51683094,"body_markdown":"The collector can only return a single object!\r\n\r\nBut you could create a custom collector that simply puts the stream elements into two lists, to then return a list of lists containing these two lists.\r\n\r\nThere are many [examples][1] how to do that.\r\n\r\n\r\n  [1]: http://www.deadcoderising.com/2017-03-07-java-8-creating-a-custom-collector-for-your-stream/","title":"Can we collect two lists from Java 8 streams?","body":"<p>The collector can only return a single object!</p>\n\n<p>But you could create a custom collector that simply puts the stream elements into two lists, to then return a list of lists containing these two lists.</p>\n\n<p>There are many <a href=\"http://www.deadcoderising.com/2017-03-07-java-8-creating-a-custom-collector-for-your-stream/\" rel=\"nofollow noreferrer\">examples</a> how to do that.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1533365370,"creation_date":1533365370,"answer_id":51683232,"question_id":51683094,"body_markdown":"Another suggestion: filter using a `lambda` that adds the elements that you want to filter out of the stream to a separate list. ","title":"Can we collect two lists from Java 8 streams?","body":"<p>Another suggestion: filter using a <code>lambda</code> that adds the elements that you want to filter out of the stream to a separate list. </p>\n"},{"tags":[],"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1533366988,"creation_date":1533366513,"answer_id":51683365,"question_id":51683094,"body_markdown":"&gt; Can we collect two lists from Java 8 streams?\r\n\r\nYou cannot but if you have a way to group elements of the `List`s according to a  condition.\r\nIn this case you could for example use `Collectors.groupingBy()` that will return `Map&lt;Foo, List&lt;Bar&gt;&gt;` where the values of the `Map` are the two List.   \r\n\r\nNote that in your case you don&#39;t need stream to do only filter.  \r\n\r\nFilter the invalid list with `removeIf()` and add all element of that in the first list :\r\n\r\n    invalidList.removeIf(o -&gt; conditionToRemove);\r\n    goodList.addAll(invalidList);      \r\n\r\nIf you don&#39;t want to change the state of `goodList` you can do a shallow copy of that :\r\n\r\n    invalidList.removeIf(o -&gt; conditionToRemove);\r\n    List&lt;Foo&gt; terminalList = new ArrayList&lt;&gt;(goodList);\r\n    terminalList.addAll(invalidList);\r\n","title":"Can we collect two lists from Java 8 streams?","body":"<blockquote>\n  <p>Can we collect two lists from Java 8 streams?</p>\n</blockquote>\n\n<p>You cannot but if you have a way to group elements of the <code>List</code>s according to a  condition.\nIn this case you could for example use <code>Collectors.groupingBy()</code> that will return <code>Map&lt;Foo, List&lt;Bar&gt;&gt;</code> where the values of the <code>Map</code> are the two List.   </p>\n\n<p>Note that in your case you don't need stream to do only filter.  </p>\n\n<p>Filter the invalid list with <code>removeIf()</code> and add all element of that in the first list :</p>\n\n<pre><code>invalidList.removeIf(o -&gt; conditionToRemove);\ngoodList.addAll(invalidList);      \n</code></pre>\n\n<p>If you don't want to change the state of <code>goodList</code> you can do a shallow copy of that :</p>\n\n<pre><code>invalidList.removeIf(o -&gt; conditionToRemove);\nList&lt;Foo&gt; terminalList = new ArrayList&lt;&gt;(goodList);\nterminalList.addAll(invalidList);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5951494,"reputation":12969,"user_id":4679320,"accept_rate":67,"display_name":"prasad_"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1533373014,"creation_date":1533372566,"answer_id":51683983,"question_id":51683094,"body_markdown":"This is a way using Java 8 streams API. Consider I have a `List` of `String` elements: the input list has strings with various lengths; only strings with length 3 are valid.\r\n\r\n    List&lt;String&gt; input = Arrays.asList(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;, &quot;four&quot;, &quot;five&quot;);\r\n    Map&lt;Boolean, List&lt;String&gt;&gt; map = input.collect(Collectors.partitioningBy(s -&gt; s.length() == 3));\r\n    System.out.println(map); // {false=[three, four, five], true=[one, two]}\r\n\r\nThe resulting `Map` has *only* two records; one with valid and the other with not-valid input list elements. The map record with *key=true* has the valid string as a `List`: one, two. The other is a *key=false* and the not-valid strings: three, four, five. \r\n\r\nNote the `Collectors.partitioningBy` produces always two records in the resulting map irrespective of the existence of valid or not-valid values.","title":"Can we collect two lists from Java 8 streams?","body":"<p>This is a way using Java 8 streams API. Consider I have a <code>List</code> of <code>String</code> elements: the input list has strings with various lengths; only strings with length 3 are valid.</p>\n\n<pre><code>List&lt;String&gt; input = Arrays.asList(\"one\", \"two\", \"three\", \"four\", \"five\");\nMap&lt;Boolean, List&lt;String&gt;&gt; map = input.collect(Collectors.partitioningBy(s -&gt; s.length() == 3));\nSystem.out.println(map); // {false=[three, four, five], true=[one, two]}\n</code></pre>\n\n<p>The resulting <code>Map</code> has <em>only</em> two records; one with valid and the other with not-valid input list elements. The map record with <em>key=true</em> has the valid string as a <code>List</code>: one, two. The other is a <em>key=false</em> and the not-valid strings: three, four, five. </p>\n\n<p>Note the <code>Collectors.partitioningBy</code> produces always two records in the resulting map irrespective of the existence of valid or not-valid values.</p>\n"},{"tags":[],"owner":{"account_id":421254,"reputation":174,"user_id":799394,"display_name":"art"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660066980,"creation_date":1660066980,"answer_id":73296051,"question_id":51683094,"body_markdown":"If you need to classify binary (true|false), you can use [Collectors.partitioningBy][1] that will return *Map&lt;Boolean, List&lt;T&gt;&gt;* (or other downstream collection like Set, if you additionally specify).\r\n\r\nIf you need more than 2 categories - use *groupBy* or just *Collectors.toMap* of collections.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#partitioningBy-java.util.function.Predicate-","title":"Can we collect two lists from Java 8 streams?","body":"<p>If you need to classify binary (true|false), you can use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#partitioningBy-java.util.function.Predicate-\" rel=\"nofollow noreferrer\">Collectors.partitioningBy</a> that will return <em>Map&lt;Boolean, List&gt;</em> (or other downstream collection like Set, if you additionally specify).</p>\n<p>If you need more than 2 categories - use <em>groupBy</em> or just <em>Collectors.toMap</em> of collections.</p>\n"}],"owner":{"account_id":13352908,"reputation":99,"user_id":10179187,"display_name":"user10179187"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16642,"favorite_count":0,"down_vote_count":2,"up_vote_count":10,"accepted_answer_id":51683232,"answer_count":5,"score":8,"last_activity_date":1660066980,"creation_date":1533363915,"question_id":51683094,"body_markdown":"Consider I have a list with two types of data,one valid and the other invalid.\n\nIf I starting filter through this list, can i collect two lists at the end?","title":"Can we collect two lists from Java 8 streams?","body":"<p>Consider I have a list with two types of data,one valid and the other invalid.</p>\n\n<p>If I starting filter through this list, can i collect two lists at the end?</p>\n"},{"tags":["java","maven","persistence","weblogic","jdeveloper"],"answers":[{"tags":[],"owner":{"account_id":2392858,"reputation":6207,"user_id":2092358,"display_name":"Display Name is missing"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1381426822,"creation_date":1381426822,"answer_id":19302567,"question_id":19290344,"body_markdown":"In your Maven packaging step, it&#39;s putting the same module (jps-internal.jar) with the same persistence-unit defined, into two different locations within the application being deployed. When you deploy it, Weblogic says it&#39;s an error. \r\n\r\nMake sure you only have one jps-internal.jar in your war file.","title":"Duplicate persistence units with name *PU","body":"<p>In your Maven packaging step, it's putting the same module (jps-internal.jar) with the same persistence-unit defined, into two different locations within the application being deployed. When you deploy it, Weblogic says it's an error. </p>\n\n<p>Make sure you only have one jps-internal.jar in your war file.</p>\n"},{"tags":[],"owner":{"account_id":14823368,"reputation":1,"user_id":10704965,"display_name":"hardeep sra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1543217245,"creation_date":1543217245,"answer_id":53476437,"question_id":19290344,"body_markdown":"please check you java Build Path in your properties.Probably you are selecting from root(src) ,which is wrong.Build path should be in following loc:-\r\n/src/main/java &amp; /src/main/resources","title":"Duplicate persistence units with name *PU","body":"<p>please check you java Build Path in your properties.Probably you are selecting from root(src) ,which is wrong.Build path should be in following loc:-\n/src/main/java &amp; /src/main/resources</p>\n"},{"tags":[],"owner":{"account_id":7156803,"reputation":1,"user_id":5468954,"display_name":"Team Spirit"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1581940531,"creation_date":1581940531,"answer_id":60261894,"question_id":19290344,"body_markdown":"I got similar issue. \r\nHowever the cause of the issue is different.\r\nIn my ear file&#39;s application.xml, I have `&lt;library-directory&gt;jars-dir&lt;/library-directory&gt;` element.I have commented it out since there&#39;s no ear jars needed by my application. \r\nIt worked !","title":"Duplicate persistence units with name *PU","body":"<p>I got similar issue. \nHowever the cause of the issue is different.\nIn my ear file's application.xml, I have <code>&lt;library-directory&gt;jars-dir&lt;/library-directory&gt;</code> element.I have commented it out since there's no ear jars needed by my application. \nIt worked !</p>\n"}],"owner":{"account_id":1702915,"reputation":11261,"user_id":1562558,"accept_rate":60,"display_name":"Festus Tamakloe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4628,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1660066866,"creation_date":1381392596,"question_id":19290344,"body_markdown":"I&#39;m trying to install a WAR file generated by Maven to a Weblogic server, but I get the following error messages from weblogic while trying to deploy:\r\n\r\n\r\n    Duplicate persistence units with name DummyPU. \r\n    First PU location: \r\n    file:/home/weblogic/middleware/user_projects/domains/middleware_domain/servers/AdminServer/tmp/_WL_user/ichipscreens/l4qn3z/lib/jps-internal.jar. \r\n    \r\n    Second PU location:\r\n     file:/home/weblogic/middleware/user_projects/domains/middleware_domain/servers/AdminServer/tmp/_WL_user/ichipscreens/wo22a/war/WEB-INF/lib/jps-internal.jar\r\n\r\nWhat does this mean? and how can i overcome this?","title":"Duplicate persistence units with name *PU","body":"<p>I'm trying to install a WAR file generated by Maven to a Weblogic server, but I get the following error messages from weblogic while trying to deploy:</p>\n\n<pre><code>Duplicate persistence units with name DummyPU. \nFirst PU location: \nfile:/home/weblogic/middleware/user_projects/domains/middleware_domain/servers/AdminServer/tmp/_WL_user/ichipscreens/l4qn3z/lib/jps-internal.jar. \n\nSecond PU location:\n file:/home/weblogic/middleware/user_projects/domains/middleware_domain/servers/AdminServer/tmp/_WL_user/ichipscreens/wo22a/war/WEB-INF/lib/jps-internal.jar\n</code></pre>\n\n<p>What does this mean? and how can i overcome this?</p>\n"},{"tags":["java","spring","spring-boot","jpa","spring-data"],"comments":[{"owner":{"account_id":9727934,"reputation":2489,"user_id":7214142,"display_name":"Yuriy Tsarkov"},"score":0,"creation_date":1660053548,"post_id":73290378,"comment_id":129438418,"body_markdown":"please share a service code where the `userRepository` is invoked","body":"please share a service code where the <code>userRepository</code> is invoked"},{"owner":{"account_id":24193243,"reputation":39,"user_id":19725796,"display_name":"Rosa"},"score":0,"creation_date":1660053965,"post_id":73290378,"comment_id":129438594,"body_markdown":"@YuriyTsarkov The service just calls `userRepository.save(user)`.","body":"@YuriyTsarkov The service just calls <code>userRepository.save(user)</code>."}],"answers":[{"tags":[],"owner":{"account_id":9727934,"reputation":2489,"user_id":7214142,"display_name":"Yuriy Tsarkov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660066862,"creation_date":1660066862,"answer_id":73296021,"question_id":73290378,"body_markdown":"Since it is a bi-directional relation, and `one-to-one` is a mandatory in this case, you should persist a user entity and only then persist an account. And one more thing isn&#39;t clear here is db schema. What are the pk&#39;s of entities? I coukd offer to use `user.id` as a single identity for both of tables. If so, entities would be as:\r\n`User(id, name), Account(user_id, title)` and its entities are:\r\n```\r\n@Table(name = &quot;account&quot;)\r\n@Entity\r\npublic class Account {\r\n  @Id\r\n  @Column(name = &quot;user_id&quot;, insertable = false, updatable = false)\r\n  private Long id;\r\n\r\n  @OneToOne(mappedBy = &quot;account&quot;, fetch = FetchType.LAZY, optional = false)\r\n  @MapsId\r\n  private User user;\r\n\r\n  @Column(name = &quot;title&quot;)\r\n  private String title;\r\n}\r\n```\r\n```\r\n@Table(name = &quot;user&quot;)\r\n@Entity\r\npublic class User {\r\n\r\n  @Id\r\n  @GeneratedValue(strategy = GenerationType.AUTO)\r\n  private Long id;;\r\n\r\n  @OneToOne(cascade = CascadeType.ALL, orphanRemoval = true, fetch = FetchType.LAZY)\r\n  @JoinColumn(name = &quot;id&quot;, referencedColumnName = &quot;user_id&quot;)\r\n  private Account account;\r\n\r\n  @Column(name = &quot;name&quot;)\r\n  private String name;\r\n}\r\n```\r\nat the service layer you must save them consistently:\r\n```\r\n@Transactional\r\npublic void save(User userModel) {\r\n  Account account = user.getAccount();\r\n  user.setAccount(null);\r\n  userRepository.save(user);\r\n  account.setUser(user);\r\n  accountRepository.save(account);\r\n}\r\n```\r\nit will be done within a single transaction. But you must save the user first, coz the `user_id` is a `PK` of the `account` table. [`@MapsId` shows that][1] user&#39;s id is used as an account&#39;s identity\r\n\r\n\r\n[Another case][2] is when account&#39;s `id` is stored in the `user` table:\r\n`User(id, name, account_id), Account(id, title)` and entities are:\r\n```\r\n@Table(name = &quot;account&quot;)\r\n@Entity\r\npublic class Account {\r\n  @Id\r\n  @Column(name = &quot;id&quot;)\r\n  @GeneratedValue(strategy = GenerationType.AUTO)\r\n  private Long id;\r\n\r\n  @OneToOne(cascade = CascadeType.ALL, mappedBy = &quot;account&quot;)\r\n  private User user;\r\n\r\n  @Column(name = &quot;title&quot;)\r\n  private String title;\r\n}\r\n```\r\n```\r\n@Table(name = &quot;user&quot;)\r\n@Entity\r\npublic class User {\r\n\r\n  @Id\r\n  @GeneratedValue(strategy = GenerationType.AUTO)\r\n  private Long id;\r\n\r\n  @Column(name = &quot;account_id&quot;, insertable = false, updatable = false)\r\n  private Long accountId;\r\n\r\n  @OneToOne(cascade = CascadeType.ALL, orphanRemoval = true, fetch = FetchType.LAZY)\r\n  @JoinColumn(name = &quot;account_id&quot;, referencedColumnName = &quot;id&quot;, unique = true)\r\n  private Account account;\r\n\r\n  @Column(name = &quot;name&quot;)\r\n  private String name;\r\n}\r\n```\r\nin this case an `Account` entity will be implisitly persisted while `User` entity saving:\r\n```\r\n@Transactional\r\npublic void save(User userModel) {\r\n  userRepository.save(user);\r\n}\r\n```\r\nwill cause an insertion into the both of tables. Since cascade and orphane are declared, for deletion would be enough to set `null` for the account reference:\r\n```\r\nuser.setAccount(null);\r\nuserRepository.save(user);\r\n```\r\n\r\n\r\n  [1]: https://thorben-janssen.com/hibernate-tips-same-primary-key-one-to-one-association/\r\n  [2]: https://springframework.guru/one-to-one-relationship-in-jpa/","title":"Spring Boot - combine nested resources for single API calls","body":"<p>Since it is a bi-directional relation, and <code>one-to-one</code> is a mandatory in this case, you should persist a user entity and only then persist an account. And one more thing isn't clear here is db schema. What are the pk's of entities? I coukd offer to use <code>user.id</code> as a single identity for both of tables. If so, entities would be as:\n<code>User(id, name), Account(user_id, title)</code> and its entities are:</p>\n<pre><code>@Table(name = &quot;account&quot;)\n@Entity\npublic class Account {\n  @Id\n  @Column(name = &quot;user_id&quot;, insertable = false, updatable = false)\n  private Long id;\n\n  @OneToOne(mappedBy = &quot;account&quot;, fetch = FetchType.LAZY, optional = false)\n  @MapsId\n  private User user;\n\n  @Column(name = &quot;title&quot;)\n  private String title;\n}\n</code></pre>\n<pre><code>@Table(name = &quot;user&quot;)\n@Entity\npublic class User {\n\n  @Id\n  @GeneratedValue(strategy = GenerationType.AUTO)\n  private Long id;;\n\n  @OneToOne(cascade = CascadeType.ALL, orphanRemoval = true, fetch = FetchType.LAZY)\n  @JoinColumn(name = &quot;id&quot;, referencedColumnName = &quot;user_id&quot;)\n  private Account account;\n\n  @Column(name = &quot;name&quot;)\n  private String name;\n}\n</code></pre>\n<p>at the service layer you must save them consistently:</p>\n<pre><code>@Transactional\npublic void save(User userModel) {\n  Account account = user.getAccount();\n  user.setAccount(null);\n  userRepository.save(user);\n  account.setUser(user);\n  accountRepository.save(account);\n}\n</code></pre>\n<p>it will be done within a single transaction. But you must save the user first, coz the <code>user_id</code> is a <code>PK</code> of the <code>account</code> table. <a href=\"https://thorben-janssen.com/hibernate-tips-same-primary-key-one-to-one-association/\" rel=\"nofollow noreferrer\"><code>@MapsId</code> shows that</a> user's id is used as an account's identity</p>\n<p><a href=\"https://springframework.guru/one-to-one-relationship-in-jpa/\" rel=\"nofollow noreferrer\">Another case</a> is when account's <code>id</code> is stored in the <code>user</code> table:\n<code>User(id, name, account_id), Account(id, title)</code> and entities are:</p>\n<pre><code>@Table(name = &quot;account&quot;)\n@Entity\npublic class Account {\n  @Id\n  @Column(name = &quot;id&quot;)\n  @GeneratedValue(strategy = GenerationType.AUTO)\n  private Long id;\n\n  @OneToOne(cascade = CascadeType.ALL, mappedBy = &quot;account&quot;)\n  private User user;\n\n  @Column(name = &quot;title&quot;)\n  private String title;\n}\n</code></pre>\n<pre><code>@Table(name = &quot;user&quot;)\n@Entity\npublic class User {\n\n  @Id\n  @GeneratedValue(strategy = GenerationType.AUTO)\n  private Long id;\n\n  @Column(name = &quot;account_id&quot;, insertable = false, updatable = false)\n  private Long accountId;\n\n  @OneToOne(cascade = CascadeType.ALL, orphanRemoval = true, fetch = FetchType.LAZY)\n  @JoinColumn(name = &quot;account_id&quot;, referencedColumnName = &quot;id&quot;, unique = true)\n  private Account account;\n\n  @Column(name = &quot;name&quot;)\n  private String name;\n}\n</code></pre>\n<p>in this case an <code>Account</code> entity will be implisitly persisted while <code>User</code> entity saving:</p>\n<pre><code>@Transactional\npublic void save(User userModel) {\n  userRepository.save(user);\n}\n</code></pre>\n<p>will cause an insertion into the both of tables. Since cascade and orphane are declared, for deletion would be enough to set <code>null</code> for the account reference:</p>\n<pre><code>user.setAccount(null);\nuserRepository.save(user);\n</code></pre>\n"}],"owner":{"account_id":24193243,"reputation":39,"user_id":19725796,"display_name":"Rosa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":211,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73296021,"answer_count":1,"score":0,"last_activity_date":1660066862,"creation_date":1660041279,"question_id":73290378,"body_markdown":"Suppose you have two resources, User and Account. They are stored in separate tables but have a one-to-one relationship, and all API calls should work with them both together. For example a POST request to create a User with an Account would send this data:\r\n\r\n    { &quot;name&quot; : &quot;Joe Bloggs&quot;, &quot;account&quot; : { &quot;title&quot; : &quot;My Account&quot; }}\r\n\r\nto `/users` rather than have multiple controllers with separate routes like `users/1/account`. This is because I need the User object to be just one, regardless of how it is stored internally.\r\n\r\nLet&#39;s say I create these Entity classes\r\n\r\n    @Table(name = &quot;user&quot;)\r\n    public class User {\r\n    \r\n      @OneToOne(mappedBy = &quot;user&quot;, cascade = CascadeType.ALL, orphanRemoval = true, fetch = FetchType.LAZY)\r\n      @NotNull\r\n      Account account;\r\n    \r\n      @Column(name = &quot;name&quot;)\r\n      String name;\r\n    }\r\n    \r\n    @Table(name = &quot;account&quot;)\r\n    public class Account {\r\n    \r\n      @OneToOne(cascade = CascadeType.ALL, optional = false, fetch = FetchType.LAZY)\r\n      @JoinColumn(name = &quot;user_id&quot;, nullable = false)\r\n      @NotNull\r\n      User user;\r\n    \r\n      @Column(name = &quot;title&quot;)\r\n      String title;\r\n    }\r\n\r\nThe problem is when I make that POST request above, it throws an error because `user_id` is missing, since that&#39;s required for the join, but I cannot send the `user_id` because the User has not yet been created.\r\n\r\nIs there a way to create both entities in a single API call?","title":"Spring Boot - combine nested resources for single API calls","body":"<p>Suppose you have two resources, User and Account. They are stored in separate tables but have a one-to-one relationship, and all API calls should work with them both together. For example a POST request to create a User with an Account would send this data:</p>\n<pre><code>{ &quot;name&quot; : &quot;Joe Bloggs&quot;, &quot;account&quot; : { &quot;title&quot; : &quot;My Account&quot; }}\n</code></pre>\n<p>to <code>/users</code> rather than have multiple controllers with separate routes like <code>users/1/account</code>. This is because I need the User object to be just one, regardless of how it is stored internally.</p>\n<p>Let's say I create these Entity classes</p>\n<pre><code>@Table(name = &quot;user&quot;)\npublic class User {\n\n  @OneToOne(mappedBy = &quot;user&quot;, cascade = CascadeType.ALL, orphanRemoval = true, fetch = FetchType.LAZY)\n  @NotNull\n  Account account;\n\n  @Column(name = &quot;name&quot;)\n  String name;\n}\n\n@Table(name = &quot;account&quot;)\npublic class Account {\n\n  @OneToOne(cascade = CascadeType.ALL, optional = false, fetch = FetchType.LAZY)\n  @JoinColumn(name = &quot;user_id&quot;, nullable = false)\n  @NotNull\n  User user;\n\n  @Column(name = &quot;title&quot;)\n  String title;\n}\n</code></pre>\n<p>The problem is when I make that POST request above, it throws an error because <code>user_id</code> is missing, since that's required for the join, but I cannot send the <code>user_id</code> because the User has not yet been created.</p>\n<p>Is there a way to create both entities in a single API call?</p>\n"},{"tags":["java","hibernate","jpa","spring-data-jpa","orm"],"answers":[{"tags":[],"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659857043,"creation_date":1659857043,"answer_id":73265626,"question_id":73260269,"body_markdown":"I&#39;m not sure about `City`, but for the others Hibernate needs the join to determine if the respective field is `null` or not, which it needs to know before returning your root entity.","title":"Why is Hibernate making a select call with join when manually passing id?","body":"<p>I'm not sure about <code>City</code>, but for the others Hibernate needs the join to determine if the respective field is <code>null</code> or not, which it needs to know before returning your root entity.</p>\n"},{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1659957780,"creation_date":1659957780,"answer_id":73277078,"question_id":73260269,"body_markdown":"It does so because you are using `CascadeType.ALL` which means that Hibernate should cascade also for the `merge` operation. In order to cascade, Hibernate must load the data first and instead of loading the data by doing individual selects, Hibernate uses joins.","title":"Why is Hibernate making a select call with join when manually passing id?","body":"<p>It does so because you are using <code>CascadeType.ALL</code> which means that Hibernate should cascade also for the <code>merge</code> operation. In order to cascade, Hibernate must load the data first and instead of loading the data by doing individual selects, Hibernate uses joins.</p>\n"}],"owner":{"account_id":4737721,"reputation":651,"user_id":3831579,"accept_rate":35,"display_name":"Sagar Rout"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":247,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73277078,"answer_count":2,"score":0,"last_activity_date":1660066492,"creation_date":1659793275,"question_id":73260269,"body_markdown":"In Student class, I am passing the id manually and all my entity-relationship are in LAZY mode. \r\n\r\nBut because I am passing the id, Spring DATA JPA (Hibernate) will treat as a merge request and make a SELECT call and will try to merge it. But I can not understand why it is trying to JOIN all relationships.\r\n\r\nI was expecting select call for student table and not joining other tables. I can not understand why it is happening ? \r\n\r\n```\r\n    select\r\n        student0_.uuid as uuid1_2_3_,\r\n        student0_.address_uuid as address_3_2_3_,\r\n        student0_.name as name2_2_3_,\r\n        address1_.uuid as uuid1_0_0_,\r\n        address1_.city_uuid as city_uui5_0_0_,\r\n        address1_.lat as lat2_0_0_,\r\n        address1_.lon as lon3_0_0_,\r\n        address1_.pincode as pincode4_0_0_,\r\n        city2_.uuid as uuid1_1_1_,\r\n        city2_.name as name2_1_1_,\r\n        subjects3_.student_uuid as student_4_3_5_,\r\n        subjects3_.uuid as uuid1_3_5_,\r\n        subjects3_.uuid as uuid1_3_2_,\r\n        subjects3_.course_start_date as course_s2_3_2_,\r\n        subjects3_.name as name3_3_2_,\r\n        subjects3_.student_uuid as student_4_3_2_ \r\n    from\r\n        student student0_ \r\n    inner join\r\n        address address1_ \r\n            on student0_.address_uuid=address1_.uuid \r\n    left outer join\r\n        city city2_ \r\n            on address1_.city_uuid=city2_.uuid \r\n    left outer join\r\n        subject subjects3_ \r\n            on student0_.uuid=subjects3_.student_uuid \r\n    where\r\n        student0_.uuid=?\r\n```\r\n\r\n```\r\n@Entity\r\npublic class Student {\r\n\r\n    @Id\r\n    private UUID uuid;\r\n\r\n    @Column(nullable = false)\r\n    private String name;\r\n\r\n    @OneToOne(fetch = FetchType.LAZY, cascade = CascadeType.ALL, optional = false)\r\n    private Address address;\r\n\r\n    @OneToMany(mappedBy = &quot;student&quot;, orphanRemoval = true, cascade = CascadeType.ALL, fetch = FetchType.LAZY)\r\n    private List&lt;Subject&gt; subjects;\r\n}\r\n```\r\n```\r\n@Entity\r\npublic class Subject {\r\n\r\n    @Id\r\n    @GeneratedValue\r\n    private UUID uuid;\r\n\r\n    @Column(nullable = false)\r\n    private String name;\r\n\r\n    @Column(nullable = false)\r\n    private ZonedDateTime courseStartDate;\r\n\r\n    @ManyToOne(fetch = FetchType.EAGER)\r\n    private Student student;\r\n}\r\n```\r\n```\r\n@Entity\r\npublic class City {\r\n\r\n    @Id\r\n    @GeneratedValue\r\n    private UUID uuid;\r\n\r\n    @Column(nullable = false)\r\n    private String name;\r\n}\r\n```\r\n```\r\n@Entity\r\npublic class Address {\r\n\r\n    @Id\r\n    @GeneratedValue\r\n    private UUID uuid;\r\n\r\n    @OneToOne(fetch = FetchType.LAZY, cascade = CascadeType.ALL)\r\n    private City city;\r\n\r\n    @Column(nullable = false)\r\n    private String pincode;\r\n\r\n    @Column\r\n    private double lat;\r\n\r\n    @Column\r\n    private double lon;\r\n}\r\n```\r\n\r\n```\r\nTest Case :\r\n\r\n@ExtendWith(SpringExtension.class)\r\n@DataJpaTest\r\n@AutoConfigureTestDatabase(replace = NONE)\r\npublic class StudentRepositoryIT  {\r\n\r\n    @PersistenceContext\r\n    private EntityManager entityManager;\r\n\r\n    @Rollback(value = false)\r\n    @Test\r\n    public void should_fetch_student() {\r\n        // GIVEN\r\n        UUID uuid = UUID.randomUUID();\r\n        Student john = new Student().setName(&quot;John Wick&quot;).setUuid(uuid);\r\n        City newyork = new City().setName(&quot;Newyork City&quot;);\r\n        Address address = new Address().setCity(newyork)\r\n                .setLat(12.3)\r\n                .setLon(13.4)\r\n                .setPincode(&quot;010101&quot;);\r\n        john.setAddress(address);\r\n        Subject maths = new Subject().setName(&quot;maths&quot;).setCourseStartDate(ZonedDateTime.now()).setStudent(john);\r\n        Subject english = new Subject().setName(&quot;english&quot;).setCourseStartDate(ZonedDateTime.now()).setStudent(john);\r\n        Subject hindi = new Subject().setName(&quot;hindi&quot;).setCourseStartDate(ZonedDateTime.now()).setStudent(john);\r\n        Subject geology = new Subject().setName(&quot;geology&quot;).setCourseStartDate(ZonedDateTime.now()).setStudent(john);\r\n        Subject physics = new Subject().setName(&quot;physics&quot;).setCourseStartDate(ZonedDateTime.now()).setStudent(john);\r\n        Subject science = new Subject().setName(&quot;science&quot;).setCourseStartDate(ZonedDateTime.now()).setStudent(john);\r\n        john.setSubjects(List.of(maths, english, hindi, geology, physics, science));\r\n        studentRepository.saveAndFlush(john);\r\n        TestTransaction.end();\r\n\r\n        // WHEN\r\n        TestTransaction.start();\r\n        Student student = entityManager.find(Student.class, uuid);\r\n        System.out.println(student);\r\n        System.out.println(student.getAddress());\r\n        Address address1 = student.getAddress();\r\n        System.out.println(address1.getLat());\r\n\r\n\r\n        // THEN\r\n          check query console\r\n    }\r\n}\r\n\r\n```\r\nEntity Relationship diagram\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/EGyBr.png","title":"Why is Hibernate making a select call with join when manually passing id?","body":"<p>In Student class, I am passing the id manually and all my entity-relationship are in LAZY mode.</p>\n<p>But because I am passing the id, Spring DATA JPA (Hibernate) will treat as a merge request and make a SELECT call and will try to merge it. But I can not understand why it is trying to JOIN all relationships.</p>\n<p>I was expecting select call for student table and not joining other tables. I can not understand why it is happening ?</p>\n<pre><code>    select\n        student0_.uuid as uuid1_2_3_,\n        student0_.address_uuid as address_3_2_3_,\n        student0_.name as name2_2_3_,\n        address1_.uuid as uuid1_0_0_,\n        address1_.city_uuid as city_uui5_0_0_,\n        address1_.lat as lat2_0_0_,\n        address1_.lon as lon3_0_0_,\n        address1_.pincode as pincode4_0_0_,\n        city2_.uuid as uuid1_1_1_,\n        city2_.name as name2_1_1_,\n        subjects3_.student_uuid as student_4_3_5_,\n        subjects3_.uuid as uuid1_3_5_,\n        subjects3_.uuid as uuid1_3_2_,\n        subjects3_.course_start_date as course_s2_3_2_,\n        subjects3_.name as name3_3_2_,\n        subjects3_.student_uuid as student_4_3_2_ \n    from\n        student student0_ \n    inner join\n        address address1_ \n            on student0_.address_uuid=address1_.uuid \n    left outer join\n        city city2_ \n            on address1_.city_uuid=city2_.uuid \n    left outer join\n        subject subjects3_ \n            on student0_.uuid=subjects3_.student_uuid \n    where\n        student0_.uuid=?\n</code></pre>\n<pre><code>@Entity\npublic class Student {\n\n    @Id\n    private UUID uuid;\n\n    @Column(nullable = false)\n    private String name;\n\n    @OneToOne(fetch = FetchType.LAZY, cascade = CascadeType.ALL, optional = false)\n    private Address address;\n\n    @OneToMany(mappedBy = &quot;student&quot;, orphanRemoval = true, cascade = CascadeType.ALL, fetch = FetchType.LAZY)\n    private List&lt;Subject&gt; subjects;\n}\n</code></pre>\n<pre><code>@Entity\npublic class Subject {\n\n    @Id\n    @GeneratedValue\n    private UUID uuid;\n\n    @Column(nullable = false)\n    private String name;\n\n    @Column(nullable = false)\n    private ZonedDateTime courseStartDate;\n\n    @ManyToOne(fetch = FetchType.EAGER)\n    private Student student;\n}\n</code></pre>\n<pre><code>@Entity\npublic class City {\n\n    @Id\n    @GeneratedValue\n    private UUID uuid;\n\n    @Column(nullable = false)\n    private String name;\n}\n</code></pre>\n<pre><code>@Entity\npublic class Address {\n\n    @Id\n    @GeneratedValue\n    private UUID uuid;\n\n    @OneToOne(fetch = FetchType.LAZY, cascade = CascadeType.ALL)\n    private City city;\n\n    @Column(nullable = false)\n    private String pincode;\n\n    @Column\n    private double lat;\n\n    @Column\n    private double lon;\n}\n</code></pre>\n<pre><code>Test Case :\n\n@ExtendWith(SpringExtension.class)\n@DataJpaTest\n@AutoConfigureTestDatabase(replace = NONE)\npublic class StudentRepositoryIT  {\n\n    @PersistenceContext\n    private EntityManager entityManager;\n\n    @Rollback(value = false)\n    @Test\n    public void should_fetch_student() {\n        // GIVEN\n        UUID uuid = UUID.randomUUID();\n        Student john = new Student().setName(&quot;John Wick&quot;).setUuid(uuid);\n        City newyork = new City().setName(&quot;Newyork City&quot;);\n        Address address = new Address().setCity(newyork)\n                .setLat(12.3)\n                .setLon(13.4)\n                .setPincode(&quot;010101&quot;);\n        john.setAddress(address);\n        Subject maths = new Subject().setName(&quot;maths&quot;).setCourseStartDate(ZonedDateTime.now()).setStudent(john);\n        Subject english = new Subject().setName(&quot;english&quot;).setCourseStartDate(ZonedDateTime.now()).setStudent(john);\n        Subject hindi = new Subject().setName(&quot;hindi&quot;).setCourseStartDate(ZonedDateTime.now()).setStudent(john);\n        Subject geology = new Subject().setName(&quot;geology&quot;).setCourseStartDate(ZonedDateTime.now()).setStudent(john);\n        Subject physics = new Subject().setName(&quot;physics&quot;).setCourseStartDate(ZonedDateTime.now()).setStudent(john);\n        Subject science = new Subject().setName(&quot;science&quot;).setCourseStartDate(ZonedDateTime.now()).setStudent(john);\n        john.setSubjects(List.of(maths, english, hindi, geology, physics, science));\n        studentRepository.saveAndFlush(john);\n        TestTransaction.end();\n\n        // WHEN\n        TestTransaction.start();\n        Student student = entityManager.find(Student.class, uuid);\n        System.out.println(student);\n        System.out.println(student.getAddress());\n        Address address1 = student.getAddress();\n        System.out.println(address1.getLat());\n\n\n        // THEN\n          check query console\n    }\n}\n\n</code></pre>\n<p>Entity Relationship diagram\n<a href=\"https://i.stack.imgur.com/EGyBr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EGyBr.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","android","bash","kotlin","visual-studio-code"],"comments":[{"owner":{"account_id":25966241,"reputation":203,"user_id":19682156,"display_name":"Desmond"},"score":0,"creation_date":1659763353,"post_id":73256761,"comment_id":129376898,"body_markdown":"Have you tried this?\nhttps://medium.com/@agavatar/programming-with-kotlin-in-visual-studio-code-1d745d6b4ad1","body":"Have you tried this? <a href=\"https://medium.com/@agavatar/programming-with-kotlin-in-visual-studio-code-1d745d6b4ad1\" rel=\"nofollow noreferrer\">medium.com/@agavatar/&hellip;</a>"},{"owner":{"account_id":9378325,"reputation":1402,"user_id":6962183,"display_name":"al3c"},"score":0,"creation_date":1659783065,"post_id":73256761,"comment_id":129379914,"body_markdown":"the alternative is to drop vscode and use intellij","body":"the alternative is to drop vscode and use intellij"},{"owner":{"account_id":24762464,"reputation":93,"user_id":18646685,"display_name":"Cromega08"},"score":0,"creation_date":1659786957,"post_id":73256761,"comment_id":129380600,"body_markdown":"@Desmond Yes, actually, i follow that tutorial to set kotlin in my machine and vscode","body":"@Desmond Yes, actually, i follow that tutorial to set kotlin in my machine and vscode"},{"owner":{"account_id":24762464,"reputation":93,"user_id":18646685,"display_name":"Cromega08"},"score":0,"creation_date":1659787053,"post_id":73256761,"comment_id":129380621,"body_markdown":"@al3c that it&#39;s exactly what i don&#39;t want to do, i try it and didn&#39;t like it :v","body":"@al3c that it&#39;s exactly what i don&#39;t want to do, i try it and didn&#39;t like it :v"},{"owner":{"account_id":25966241,"reputation":203,"user_id":19682156,"display_name":"Desmond"},"score":0,"creation_date":1659788422,"post_id":73256761,"comment_id":129380938,"body_markdown":"How about this?\nhttps://www.youtube.com/watch?v=A7nnx267pkw","body":"How about this? <a href=\"https://www.youtube.com/watch?v=A7nnx267pkw\" rel=\"nofollow noreferrer\">youtube.com/watch?v=A7nnx267pkw</a>"},{"owner":{"account_id":24762464,"reputation":93,"user_id":18646685,"display_name":"Cromega08"},"score":0,"creation_date":1659790021,"post_id":73256761,"comment_id":129381247,"body_markdown":"@Desmond as i said, no. The code run, the code compile, everything it&#39;s fine in the system until vscode try to detect errors in the script, that it&#39;s the problem, detect false errors","body":"@Desmond as i said, no. The code run, the code compile, everything it&#39;s fine in the system until vscode try to detect errors in the script, that it&#39;s the problem, detect false errors"}],"answers":[{"tags":[],"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1659945646,"creation_date":1659945217,"answer_id":73274515,"question_id":73256761,"body_markdown":"I was using **kotlin** some time ago and everything worked fine (vscode version was `1.69.2` at the time). I tried again today after seeing your question and got an error. (At this time, the vscode version has been upgraded to `1.70`)\r\n\r\nAfter I rolled back the vscode version to ``1.69.2`` it still didn&#39;t solve the problem.\r\n\r\nSo I upgraded the version to `1.70` again and the kotlin code is running normally again.\r\n\r\nSo, please uninstall your [VS Code][1] and install it again. ( *The current latest version is [`1.70`][2]*. )\r\n\r\nIf it doesn&#39;t work once, reinstall it again.\r\n\r\nThis may be a bug, I will raise an issue on GitHub.\r\n\r\n\r\n\r\n  [1]: https://code.visualstudio.com/\r\n  [2]: https://code.visualstudio.com/updates/v1_70","title":"Kotlin throws false errors for everything in VS Code","body":"<p>I was using <strong>kotlin</strong> some time ago and everything worked fine (vscode version was <code>1.69.2</code> at the time). I tried again today after seeing your question and got an error. (At this time, the vscode version has been upgraded to <code>1.70</code>)</p>\n<p>After I rolled back the vscode version to <code>1.69.2</code> it still didn't solve the problem.</p>\n<p>So I upgraded the version to <code>1.70</code> again and the kotlin code is running normally again.</p>\n<p>So, please uninstall your <a href=\"https://code.visualstudio.com/\" rel=\"nofollow noreferrer\">VS Code</a> and install it again. ( <em>The current latest version is <a href=\"https://code.visualstudio.com/updates/v1_70\" rel=\"nofollow noreferrer\"><code>1.70</code></a></em>. )</p>\n<p>If it doesn't work once, reinstall it again.</p>\n<p>This may be a bug, I will raise an issue on GitHub.</p>\n"},{"tags":[],"owner":{"account_id":24762464,"reputation":93,"user_id":18646685,"display_name":"Cromega08"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1660066131,"creation_date":1660066131,"answer_id":73295885,"question_id":73256761,"body_markdown":"Used vscode Bisect tool and dentified the problem. It&#39;s this extension:\r\n\r\n* Nombre: Kotlin\r\n* ID: fwcd.kotlin\r\n* Descripci&#243;n: Smart code completion, debugging, linting, syntax highlighting and more for Kotlin\r\n* Versi&#243;n: 0.2.26\r\n* Editor: fwcd\r\n* V&#237;nculo de VS Marketplace: https://marketplace.visualstudio.com/items?itemName=fwcd.kotlin\r\n\r\nThis extension throw all the errors, disable and everything it&#39;s fine.\r\n\r\nAlredy reported in this [Github Issue](https://github.com/fwcd/vscode-kotlin/issues/101)\r\n\r\nUntil date (_09/08/2022_), the issue it&#39;s open and bug it&#39;s there.","title":"Kotlin throws false errors for everything in VS Code","body":"<p>Used vscode Bisect tool and dentified the problem. It's this extension:</p>\n<ul>\n<li>Nombre: Kotlin</li>\n<li>ID: fwcd.kotlin</li>\n<li>Descripción: Smart code completion, debugging, linting, syntax highlighting and more for Kotlin</li>\n<li>Versión: 0.2.26</li>\n<li>Editor: fwcd</li>\n<li>Vínculo de VS Marketplace: <a href=\"https://marketplace.visualstudio.com/items?itemName=fwcd.kotlin\" rel=\"nofollow noreferrer\">https://marketplace.visualstudio.com/items?itemName=fwcd.kotlin</a></li>\n</ul>\n<p>This extension throw all the errors, disable and everything it's fine.</p>\n<p>Alredy reported in this <a href=\"https://github.com/fwcd/vscode-kotlin/issues/101\" rel=\"nofollow noreferrer\">Github Issue</a></p>\n<p>Until date (<em>09/08/2022</em>), the issue it's open and bug it's there.</p>\n"}],"owner":{"account_id":24762464,"reputation":93,"user_id":18646685,"display_name":"Cromega08"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":791,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73295885,"answer_count":2,"score":2,"last_activity_date":1660066131,"creation_date":1659752612,"question_id":73256761,"body_markdown":"This **it&#39;s complicated to explain, so patience**, please.\r\n\r\nI **started learning Kotlin a few weeks ago, but left it** because other things **and continue today**, but **every line of code it&#39;s highligthed with errors** without reason.\r\n\r\nEven a simple code as a &quot;Hello World&quot; got errors for everything.\r\n\r\nCode:\r\n\r\n```kotlin\r\nfun main() {\r\n    val variable:String = &quot;Hello world&quot;\r\n    print(variable)\r\n}\r\n```\r\n\r\nProblems message in vscode:\r\n\r\n```bash\r\nCannot access built-in declaration &#39;kotlin.String&#39;. Ensure that you have a dependency on the Kotlin standard library\r\nUnresolved reference: print\r\nCannot access built-in declaration &#39;kotlin.String&#39;. Ensure that you have a dependency on the Kotlin standard library\r\n```\r\n\r\nJSON log error by vscode:\r\n\r\n```JSON\r\n[{\r\n\t&quot;resource&quot;: &quot;/home/my_username/programming/courses/kotlin/first.kt&quot;,\r\n\t&quot;owner&quot;: &quot;_generated_diagnostic_collection_name_#1&quot;,\r\n\t&quot;code&quot;: &quot;MISSING_BUILT_IN_DECLARATION&quot;,\r\n\t&quot;severity&quot;: 8,\r\n\t&quot;message&quot;: &quot;Cannot access built-in declaration &#39;kotlin.String&#39;. Ensure that you have a dependency on the Kotlin standard library&quot;,\r\n\t&quot;source&quot;: &quot;kotlin&quot;,\r\n\t&quot;startLineNumber&quot;: 2,\r\n\t&quot;startColumn&quot;: 19,\r\n\t&quot;endLineNumber&quot;: 2,\r\n\t&quot;endColumn&quot;: 25\r\n}]\r\n```\r\n```JSON\r\n[{\r\n\t&quot;resource&quot;: &quot;/home/my_username/programming/courses/kotlin/first.kt&quot;,\r\n\t&quot;owner&quot;: &quot;_generated_diagnostic_collection_name_#1&quot;,\r\n\t&quot;code&quot;: &quot;UNRESOLVED_REFERENCE&quot;,\r\n\t&quot;severity&quot;: 8,\r\n\t&quot;message&quot;: &quot;Unresolved reference: print&quot;,\r\n\t&quot;source&quot;: &quot;kotlin&quot;,\r\n\t&quot;startLineNumber&quot;: 3,\r\n\t&quot;startColumn&quot;: 5,\r\n\t&quot;endLineNumber&quot;: 3,\r\n\t&quot;endColumn&quot;: 10\r\n}]\r\n```\r\n```JSON\r\n[{\r\n\t&quot;resource&quot;: &quot;/home/my_username/programming/courses/kotlin/first.kt&quot;,\r\n\t&quot;owner&quot;: &quot;_generated_diagnostic_collection_name_#1&quot;,\r\n\t&quot;code&quot;: &quot;MISSING_BUILT_IN_DECLARATION&quot;,\r\n\t&quot;severity&quot;: 8,\r\n\t&quot;message&quot;: &quot;Cannot access built-in declaration &#39;kotlin.String&#39;. Ensure that you have a dependency on the Kotlin standard library&quot;,\r\n\t&quot;source&quot;: &quot;kotlin&quot;,\r\n\t&quot;startLineNumber&quot;: 3,\r\n\t&quot;startColumn&quot;: 11,\r\n\t&quot;endLineNumber&quot;: 3,\r\n\t&quot;endColumn&quot;: 19\r\n}]\r\n```\r\n\r\n**But this compile and work, without problems in the terminal**:\r\n\r\n```bash\r\ncd &quot;/home/my_username/programming/courses/kotlin/&quot; &amp;&amp; kotlinc first.kt -include-runtime -d first.jar &amp;&amp; java -jar first.jar\r\n```\r\n\r\nOutput:\r\n\r\n```bash\r\nHello world\r\n```\r\n\r\nUse Ubuntu 22.04 and installed kotlin via snap (as indicated in the [official website](https://kotlinlang.org/docs/command-line.html)):\r\n\r\n```bash\r\nsudo snap install --classic kotlin\r\n```\r\n\r\nIn vscode use the follow extensions that could be implicated in the problem:\r\n\r\n* [fwcd.kotlin](https://marketplace.visualstudio.com/items?itemName=fwcd.kotlin)\r\n\r\n* [mathiasfrohlich.Kotlin](https://marketplace.visualstudio.com/items?itemName=mathiasfrohlich.Kotlin)\r\n\r\n* [usernamehw.errorlens](https://marketplace.visualstudio.com/items?itemName=usernamehw.errorlens)\r\n\r\nI can run the cli compiler and every tool, but vscode/vscode-extensions error messages broke for no apparent reason, and just with this language.\r\n\r\n**IMPORTANT: The problem isn&#39;t the installation of the language itself, since the code compile and run witout problems, and don&#39;t throw error in terminal when executed.**\r\n","title":"Kotlin throws false errors for everything in VS Code","body":"<p>This <strong>it's complicated to explain, so patience</strong>, please.</p>\n<p>I <strong>started learning Kotlin a few weeks ago, but left it</strong> because other things <strong>and continue today</strong>, but <strong>every line of code it's highligthed with errors</strong> without reason.</p>\n<p>Even a simple code as a &quot;Hello World&quot; got errors for everything.</p>\n<p>Code:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>fun main() {\n    val variable:String = &quot;Hello world&quot;\n    print(variable)\n}\n</code></pre>\n<p>Problems message in vscode:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>Cannot access built-in declaration 'kotlin.String'. Ensure that you have a dependency on the Kotlin standard library\nUnresolved reference: print\nCannot access built-in declaration 'kotlin.String'. Ensure that you have a dependency on the Kotlin standard library\n</code></pre>\n<p>JSON log error by vscode:</p>\n<pre><code>[{\n    &quot;resource&quot;: &quot;/home/my_username/programming/courses/kotlin/first.kt&quot;,\n    &quot;owner&quot;: &quot;_generated_diagnostic_collection_name_#1&quot;,\n    &quot;code&quot;: &quot;MISSING_BUILT_IN_DECLARATION&quot;,\n    &quot;severity&quot;: 8,\n    &quot;message&quot;: &quot;Cannot access built-in declaration 'kotlin.String'. Ensure that you have a dependency on the Kotlin standard library&quot;,\n    &quot;source&quot;: &quot;kotlin&quot;,\n    &quot;startLineNumber&quot;: 2,\n    &quot;startColumn&quot;: 19,\n    &quot;endLineNumber&quot;: 2,\n    &quot;endColumn&quot;: 25\n}]\n</code></pre>\n<pre><code>[{\n    &quot;resource&quot;: &quot;/home/my_username/programming/courses/kotlin/first.kt&quot;,\n    &quot;owner&quot;: &quot;_generated_diagnostic_collection_name_#1&quot;,\n    &quot;code&quot;: &quot;UNRESOLVED_REFERENCE&quot;,\n    &quot;severity&quot;: 8,\n    &quot;message&quot;: &quot;Unresolved reference: print&quot;,\n    &quot;source&quot;: &quot;kotlin&quot;,\n    &quot;startLineNumber&quot;: 3,\n    &quot;startColumn&quot;: 5,\n    &quot;endLineNumber&quot;: 3,\n    &quot;endColumn&quot;: 10\n}]\n</code></pre>\n<pre><code>[{\n    &quot;resource&quot;: &quot;/home/my_username/programming/courses/kotlin/first.kt&quot;,\n    &quot;owner&quot;: &quot;_generated_diagnostic_collection_name_#1&quot;,\n    &quot;code&quot;: &quot;MISSING_BUILT_IN_DECLARATION&quot;,\n    &quot;severity&quot;: 8,\n    &quot;message&quot;: &quot;Cannot access built-in declaration 'kotlin.String'. Ensure that you have a dependency on the Kotlin standard library&quot;,\n    &quot;source&quot;: &quot;kotlin&quot;,\n    &quot;startLineNumber&quot;: 3,\n    &quot;startColumn&quot;: 11,\n    &quot;endLineNumber&quot;: 3,\n    &quot;endColumn&quot;: 19\n}]\n</code></pre>\n<p><strong>But this compile and work, without problems in the terminal</strong>:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>cd &quot;/home/my_username/programming/courses/kotlin/&quot; &amp;&amp; kotlinc first.kt -include-runtime -d first.jar &amp;&amp; java -jar first.jar\n</code></pre>\n<p>Output:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>Hello world\n</code></pre>\n<p>Use Ubuntu 22.04 and installed kotlin via snap (as indicated in the <a href=\"https://kotlinlang.org/docs/command-line.html\" rel=\"nofollow noreferrer\">official website</a>):</p>\n<pre class=\"lang-bash prettyprint-override\"><code>sudo snap install --classic kotlin\n</code></pre>\n<p>In vscode use the follow extensions that could be implicated in the problem:</p>\n<ul>\n<li><p><a href=\"https://marketplace.visualstudio.com/items?itemName=fwcd.kotlin\" rel=\"nofollow noreferrer\">fwcd.kotlin</a></p>\n</li>\n<li><p><a href=\"https://marketplace.visualstudio.com/items?itemName=mathiasfrohlich.Kotlin\" rel=\"nofollow noreferrer\">mathiasfrohlich.Kotlin</a></p>\n</li>\n<li><p><a href=\"https://marketplace.visualstudio.com/items?itemName=usernamehw.errorlens\" rel=\"nofollow noreferrer\">usernamehw.errorlens</a></p>\n</li>\n</ul>\n<p>I can run the cli compiler and every tool, but vscode/vscode-extensions error messages broke for no apparent reason, and just with this language.</p>\n<p><strong>IMPORTANT: The problem isn't the installation of the language itself, since the code compile and run witout problems, and don't throw error in terminal when executed.</strong></p>\n"},{"tags":["java","jdbctemplate"],"answers":[{"tags":[],"owner":{"account_id":10308879,"reputation":517,"user_id":7605320,"display_name":"Marco"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660066022,"creation_date":1660065332,"answer_id":73295744,"question_id":73295618,"body_markdown":"Normally, formats like parameters have a lower performance than replace in the query directly.\r\n\r\n***But*** Here is the thing, if we talk about the security perspective parameter es better, why is this?\r\n\r\nParameters have some basic rules to prevent sql injection in because if you have a string like this `&quot;select * from table where noteId=&#39;:noteId&#39;&quot;` and some put as `:noteId` something like `&quot;&#39; or 1=1; -- -&quot;`  you will be hack soon if you replace the string directly\r\n","title":"Java benefit of using Parameter binding with NamedParameterJDBCTemplate","body":"<p>Normally, formats like parameters have a lower performance than replace in the query directly.</p>\n<p><em><strong>But</strong></em> Here is the thing, if we talk about the security perspective parameter es better, why is this?</p>\n<p>Parameters have some basic rules to prevent sql injection in because if you have a string like this <code>&quot;select * from table where noteId=':noteId'&quot;</code> and some put as <code>:noteId</code> something like <code>&quot;' or 1=1; -- -&quot;</code>  you will be hack soon if you replace the string directly</p>\n"}],"owner":{"account_id":21004999,"reputation":788,"user_id":15435022,"display_name":"mattsmith5"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":173,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73295744,"answer_count":1,"score":0,"last_activity_date":1660066022,"creation_date":1660064630,"question_id":73295618,"body_markdown":"\r\nIn Named Parameter JDBC Template, whats the value benefit of using parameter\r\n\r\n    parameters.addValue(&quot;noteId&quot;, noteIdVariable);\r\n\r\n\r\nvs string replace in the actual query ?\r\n\r\n    modifiedPaymentQuery = sqlQuery.replace(&quot;:noteId&quot;,noteIdVariable);\r\n\r\nIs it faster performance, less memory?","title":"Java benefit of using Parameter binding with NamedParameterJDBCTemplate","body":"<p>In Named Parameter JDBC Template, whats the value benefit of using parameter</p>\n<pre><code>parameters.addValue(&quot;noteId&quot;, noteIdVariable);\n</code></pre>\n<p>vs string replace in the actual query ?</p>\n<pre><code>modifiedPaymentQuery = sqlQuery.replace(&quot;:noteId&quot;,noteIdVariable);\n</code></pre>\n<p>Is it faster performance, less memory?</p>\n"},{"tags":["java","gradle","dependencies","publish","multi-module"],"answers":[{"tags":[],"owner":{"account_id":1095015,"reputation":4315,"user_id":1088790,"accept_rate":77,"display_name":"haelix"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1647801878,"creation_date":1647801878,"answer_id":71549640,"question_id":71488743,"body_markdown":"After much fighting with Gradle it turns out approach #1 requires to switch off &quot;gradle module metadata&quot; and have publication only publish POM files, which can be hacked to contain the right version for the deps. Starting Gradle 6, by default Gradle&#39;s own metadata is used instead of POM, which is retained for Maven interoperability. But this metadata seemingly cannot be edited during publication (it can only be edited during resolution in client projects - see [this][1]). So the (suboptimal) solution for now is to hack the POM like [here][2] and disable Gradle module metadata like this:\r\n\r\n```\r\ntasks.withType(GenerateModuleMetadata) {\r\n    enabled = false\r\n}\r\n```\r\n\r\n\r\n  [1]: https://docs.gradle.org/current/userguide/component_metadata_rules.html\r\n  [2]: https://stackoverflow.com/questions/47368119/change-dependency-version-number-in-multi-project-gradle-build/47632377#47632377","title":"With Gradle, how best to publish a multi-module project to an additional repository as a specific version?","body":"<p>After much fighting with Gradle it turns out approach #1 requires to switch off &quot;gradle module metadata&quot; and have publication only publish POM files, which can be hacked to contain the right version for the deps. Starting Gradle 6, by default Gradle's own metadata is used instead of POM, which is retained for Maven interoperability. But this metadata seemingly cannot be edited during publication (it can only be edited during resolution in client projects - see <a href=\"https://docs.gradle.org/current/userguide/component_metadata_rules.html\" rel=\"nofollow noreferrer\">this</a>). So the (suboptimal) solution for now is to hack the POM like <a href=\"https://stackoverflow.com/questions/47368119/change-dependency-version-number-in-multi-project-gradle-build/47632377#47632377\">here</a> and disable Gradle module metadata like this:</p>\n<pre><code>tasks.withType(GenerateModuleMetadata) {\n    enabled = false\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18730730,"reputation":486,"user_id":13656191,"display_name":"Imad Salki"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660064761,"creation_date":1660064761,"answer_id":73295652,"question_id":71488743,"body_markdown":"Faced the same problem, I have a common project named Commun used by project A.\r\n\r\nand this solved my problem :\r\n\r\n    tasks.withType(GenerateModuleMetadata) {\r\n        enabled = false\r\n    }\r\n\r\nWhen you declare this dependency in your build.gradle like this : \r\n\r\n    implementation (group: &#39;com.example&#39;, name: &#39;common&#39;, version: &quot;${commonVersion}&quot;)\r\n\r\nYou always download the jar in you repository (Maven in your case).\r\n\r\nIf you want to have the flexibility between Local environement and Production, so that when you update the common library you can use it directly in project A without publishing it you can do this :\r\n\r\nin the build.gradle : \r\n\r\n    dependencies {\r\n            // Common\r\n        \tif (project.hasProperty(&quot;production&quot;)) {\r\n        \t\timplementation (group: &#39;com.example&#39;, name: &#39;common&#39;, version: &quot;${commonVersion}&quot;)\r\n        \t} else {\r\n        \t\timplementation group: &#39;com.example&#39;, name: &#39;common&#39;\r\n        \t}\r\n    }\r\n\r\nin your settings.gradle :\r\n\r\n    rootProject.name = &#39;projectA&#39;\r\n    if (startParameter.projectProperties.get(&quot;production&quot;) == null) {\r\n        includeBuild &quot;../common&quot;\r\n    }\r\n\r\ndon&#39;t forget to update the buil task in production environement :\r\n\r\n    ./gradlew clean build -Pproduction=true","title":"With Gradle, how best to publish a multi-module project to an additional repository as a specific version?","body":"<p>Faced the same problem, I have a common project named Commun used by project A.</p>\n<p>and this solved my problem :</p>\n<pre><code>tasks.withType(GenerateModuleMetadata) {\n    enabled = false\n}\n</code></pre>\n<p>When you declare this dependency in your build.gradle like this :</p>\n<pre><code>implementation (group: 'com.example', name: 'common', version: &quot;${commonVersion}&quot;)\n</code></pre>\n<p>You always download the jar in you repository (Maven in your case).</p>\n<p>If you want to have the flexibility between Local environement and Production, so that when you update the common library you can use it directly in project A without publishing it you can do this :</p>\n<p>in the build.gradle :</p>\n<pre><code>dependencies {\n        // Common\n        if (project.hasProperty(&quot;production&quot;)) {\n            implementation (group: 'com.example', name: 'common', version: &quot;${commonVersion}&quot;)\n        } else {\n            implementation group: 'com.example', name: 'common'\n        }\n}\n</code></pre>\n<p>in your settings.gradle :</p>\n<pre><code>rootProject.name = 'projectA'\nif (startParameter.projectProperties.get(&quot;production&quot;) == null) {\n    includeBuild &quot;../common&quot;\n}\n</code></pre>\n<p>don't forget to update the buil task in production environement :</p>\n<pre><code>./gradlew clean build -Pproduction=true\n</code></pre>\n"}],"owner":{"account_id":1095015,"reputation":4315,"user_id":1088790,"accept_rate":77,"display_name":"haelix"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1769,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1660064761,"creation_date":1647376681,"question_id":71488743,"body_markdown":"I have this multi-module project structure\r\n```\r\nproj\r\n├── subprojA\r\n└── subprojB  [depends on subprojA]\r\n```\r\n\r\nBoth subprojects are producing a java jar each. I want to do an extra publishing step where the 2 subproject jars would be given version &quot;1.0.0-dev&quot; and they would be pushed to MavenLocal.\r\n\r\nIt was relatively easy to publish using a new &quot;publication&quot; entity as these are designed to be able to override the project version (not shown, an additional trick to make each publication go to only their respective repo):\r\n```\r\ndevlocal(MavenPublication) {\r\n    from components.java\r\n    version &quot;1.0.0-dev&quot;\r\n    alias true // prevents error &quot;Publishing is not able to resolve a dependency on a project with multiple publications that have different coordinates&quot;\r\n}\r\n```\r\n\r\nHowever - you guessed it - there is a problem with this. The new publication is &quot;dumb&quot; in the sense that subprojB would depend on the wrong version of subprojA - i.e. the actual project version not `1.0.0-dev`. I want the extra publication jars to depend on one-another. \r\n\r\nI discover this is not trivial, there are 2 approaches:\r\n* hack the POM metadata of this extra publication, by iterating through dependencies and changing their versions. This is a daunting task given the outrageous Groovy syntax\r\n* do something smarter involving a new `configuration` which declares dependencies with the right version 1.0.0-dev and is published as-is, however while this might be conceptually more natural, is likely even harder because it takes a Gradle artist to avoid the duplication of dependency declarations and putting together the publication, which is not as simple as `&quot;from components.java&quot;`.\r\n\r\n**Which option is better and can anyone point to an example for either?**\r\n\r\n**Edit:**\r\nI did find an example for approach #1 [here][1] but after implementing it I realise it&#39;s not enough, as it only changes POM metadata whereas Gradle uses &quot;Gradle module metadata&quot;. Not so lucky to find the same tweaks for Module metadata.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/47632377/1088790","title":"With Gradle, how best to publish a multi-module project to an additional repository as a specific version?","body":"<p>I have this multi-module project structure</p>\n<pre><code>proj\n├── subprojA\n└── subprojB  [depends on subprojA]\n</code></pre>\n<p>Both subprojects are producing a java jar each. I want to do an extra publishing step where the 2 subproject jars would be given version &quot;1.0.0-dev&quot; and they would be pushed to MavenLocal.</p>\n<p>It was relatively easy to publish using a new &quot;publication&quot; entity as these are designed to be able to override the project version (not shown, an additional trick to make each publication go to only their respective repo):</p>\n<pre><code>devlocal(MavenPublication) {\n    from components.java\n    version &quot;1.0.0-dev&quot;\n    alias true // prevents error &quot;Publishing is not able to resolve a dependency on a project with multiple publications that have different coordinates&quot;\n}\n</code></pre>\n<p>However - you guessed it - there is a problem with this. The new publication is &quot;dumb&quot; in the sense that subprojB would depend on the wrong version of subprojA - i.e. the actual project version not <code>1.0.0-dev</code>. I want the extra publication jars to depend on one-another.</p>\n<p>I discover this is not trivial, there are 2 approaches:</p>\n<ul>\n<li>hack the POM metadata of this extra publication, by iterating through dependencies and changing their versions. This is a daunting task given the outrageous Groovy syntax</li>\n<li>do something smarter involving a new <code>configuration</code> which declares dependencies with the right version 1.0.0-dev and is published as-is, however while this might be conceptually more natural, is likely even harder because it takes a Gradle artist to avoid the duplication of dependency declarations and putting together the publication, which is not as simple as <code>&quot;from components.java&quot;</code>.</li>\n</ul>\n<p><strong>Which option is better and can anyone point to an example for either?</strong></p>\n<p><strong>Edit:</strong>\nI did find an example for approach #1 <a href=\"https://stackoverflow.com/a/47632377/1088790\">here</a> but after implementing it I realise it's not enough, as it only changes POM metadata whereas Gradle uses &quot;Gradle module metadata&quot;. Not so lucky to find the same tweaks for Module metadata.</p>\n"},{"tags":["java","minecraft","minecraft-forge"],"answers":[{"tags":[],"owner":{"account_id":21530600,"reputation":2687,"user_id":15870118,"display_name":"JustinW"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1633500600,"creation_date":1633500600,"answer_id":69460624,"question_id":69459809,"body_markdown":"In your `ItemSpacialMark` class, make sure that you&#39;re extending the `net.minecraft.item.Item` class like this,\r\n```java\r\n public class ItemSpacialMark extends Item { // Your code here }\r\n```\r\nAnd, it is preferred to assign the name in `setUnlocalizedName(String name)` method through passing the arguments to the constructor like this,\r\n\r\n```java \r\npublic ItemSpacialMark(String unlocalizedName){\r\n       setRegistryName(&quot;reg-name&quot;);\r\n       setUnlocalizedName(unlocalizedName);\r\n}  \r\n```\r\n\r\nAnd, while calling the constructor,\r\n```java\r\nitemSpacialMark = new ItemSpacialMark(&quot;some name&quot;);\r\n       \r\n","title":"Why can&#39;t I use setUnlocalizedName(String) return undefined when I use ItemSpatialMark","body":"<p>In your <code>ItemSpacialMark</code> class, make sure that you're extending the <code>net.minecraft.item.Item</code> class like this,</p>\n<pre class=\"lang-java prettyprint-override\"><code> public class ItemSpacialMark extends Item { // Your code here }\n</code></pre>\n<p>And, it is preferred to assign the name in <code>setUnlocalizedName(String name)</code> method through passing the arguments to the constructor like this,</p>\n<pre class=\"lang-java prettyprint-override\"><code>public ItemSpacialMark(String unlocalizedName){\n       setRegistryName(&quot;reg-name&quot;);\n       setUnlocalizedName(unlocalizedName);\n}  \n</code></pre>\n<p>And, while calling the constructor,</p>\n<pre class=\"lang-java prettyprint-override\"><code>itemSpacialMark = new ItemSpacialMark(&quot;some name&quot;);\n       \n</code></pre>\n"}],"owner":{"account_id":19756369,"reputation":17,"user_id":14466564,"display_name":"ItsJustLogic"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":126,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69460624,"answer_count":1,"score":0,"last_activity_date":1660064574,"creation_date":1633494103,"question_id":69459809,"body_markdown":"```\r\npackage itsjustlogic.logicmod;\r\n\r\nimport net.minecraft.item.Item;\r\nimport cpw.mods.fml.common.Mod;\r\nimport cpw.mods.fml.common.Mod.EventHandler;\r\nimport cpw.mods.fml.common.event.FMLInitializationEvent;\r\nimport cpw.mods.fml.common.event.FMLPostInitializationEvent;\r\nimport cpw.mods.fml.common.event.FMLPreInitializationEvent;\r\nimport cpw.mods.fml.common.registry.GameRegistry;\r\n\r\n@Mod(modid = &quot;logic&quot;, name = &quot;Logic&#39;s Mod&quot;, version = &quot;1.0&quot;)\r\npublic class LogicsMod {\r\n\t\r\n\tpublic static Item itemSpatialMark;\r\n\t\r\n\t@EventHandler\r\n\tpublic void preInit(FMLPreInitializationEvent event) {\r\n\t\t//Item/Block init and reg\r\n\t\t//Config handling\r\n\t\titemSpatialMark = new ItemSpatialMark().setUnlocalizedName(&quot;ItemSpatialMark&quot;);\r\n\t\tGameRegistry.registerItem(itemSpatialMark, itemSpatialMark.getUnlocalizedName().substring(5));\r\n\t}\r\n\t\r\n\t@EventHandler\r\n\tpublic void init(FMLInitializationEvent event){\r\n\t\t//Proxy, TileEntity, entity, GUI, and Packet Reg\r\n\t}\r\n\t\r\n\t@EventHandler\r\n\tpublic void postInit(FMLPostInitializationEvent event){\r\n\t\t\r\n\t}\r\n}\r\n```\r\n\r\nError: The method setUnlocalizedName(String) is undefined for the type ItemSpatialMark\r\n\r\nI know this is kinda a basic question and theres probably a simple fix but I&#39;m new to coding with forge. please help :(","title":"Why can&#39;t I use setUnlocalizedName(String) return undefined when I use ItemSpatialMark","body":"<pre><code>package itsjustlogic.logicmod;\n\nimport net.minecraft.item.Item;\nimport cpw.mods.fml.common.Mod;\nimport cpw.mods.fml.common.Mod.EventHandler;\nimport cpw.mods.fml.common.event.FMLInitializationEvent;\nimport cpw.mods.fml.common.event.FMLPostInitializationEvent;\nimport cpw.mods.fml.common.event.FMLPreInitializationEvent;\nimport cpw.mods.fml.common.registry.GameRegistry;\n\n@Mod(modid = &quot;logic&quot;, name = &quot;Logic's Mod&quot;, version = &quot;1.0&quot;)\npublic class LogicsMod {\n    \n    public static Item itemSpatialMark;\n    \n    @EventHandler\n    public void preInit(FMLPreInitializationEvent event) {\n        //Item/Block init and reg\n        //Config handling\n        itemSpatialMark = new ItemSpatialMark().setUnlocalizedName(&quot;ItemSpatialMark&quot;);\n        GameRegistry.registerItem(itemSpatialMark, itemSpatialMark.getUnlocalizedName().substring(5));\n    }\n    \n    @EventHandler\n    public void init(FMLInitializationEvent event){\n        //Proxy, TileEntity, entity, GUI, and Packet Reg\n    }\n    \n    @EventHandler\n    public void postInit(FMLPostInitializationEvent event){\n        \n    }\n}\n</code></pre>\n<p>Error: The method setUnlocalizedName(String) is undefined for the type ItemSpatialMark</p>\n<p>I know this is kinda a basic question and theres probably a simple fix but I'm new to coding with forge. please help :(</p>\n"},{"tags":["java","socket-timeout-exception"],"comments":[{"owner":{"account_id":1938802,"reputation":12091,"user_id":1745544,"accept_rate":23,"display_name":"OldProgrammer"},"score":0,"creation_date":1660061601,"post_id":73292678,"comment_id":129441776,"body_markdown":"What you return in a response is up to you.  Nobody here can tell you what should be returned.","body":"What you return in a response is up to you.  Nobody here can tell you what should be returned."},{"owner":{"account_id":4635391,"reputation":1131,"user_id":3756780,"display_name":"slindenau"},"score":0,"creation_date":1660062787,"post_id":73292678,"comment_id":129442233,"body_markdown":"Ideally the one who you’re making this code for should tell you what to put in the response of an error.","body":"Ideally the one who you’re making this code for should tell you what to put in the response of an error."}],"owner":{"account_id":26019215,"reputation":1,"user_id":19727133,"display_name":"Pratik Goswami"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660064197,"creation_date":1660051649,"question_id":73292678,"body_markdown":"In one of my code to get static resources from microservice I have used following code.\r\n\r\n```\r\nresponse = proxyClientStaticResource.execute(getTargetHost(servletRequest), proxyRequest);\r\n```\r\n\r\nhere `proxyClientStaticResource` is instance of `CloseableHTTPClient`. I have set socket time out for the request using request config:\r\n\r\n```\r\nRequestConfig.Builder builder = RequestConfig.custom()\r\n\t\t\t\t.setRedirectsEnabled(doHandleRedirects)\r\n\t\t\t\t.setCookieSpec(CookieSpecs.IGNORE_COOKIES)\r\n\t\t\t\t.setConnectTimeout(connectTimeout)\r\n\t\t\t\t.setSocketTimeout(1000);\r\n```\r\n\r\nI know that if the request times out it will give socket timeout exception. Whenever I get Socket Timeout exception for that case I need to prepare `HttpServletResponse` for the same. Everything in the response means headers, error code, body everything.\r\n\r\nCan anyone help me with this?","title":"Prepare http servlet response in the case of socket timeout : Read time out Exception","body":"<p>In one of my code to get static resources from microservice I have used following code.</p>\n<pre><code>response = proxyClientStaticResource.execute(getTargetHost(servletRequest), proxyRequest);\n</code></pre>\n<p>here <code>proxyClientStaticResource</code> is instance of <code>CloseableHTTPClient</code>. I have set socket time out for the request using request config:</p>\n<pre><code>RequestConfig.Builder builder = RequestConfig.custom()\n                .setRedirectsEnabled(doHandleRedirects)\n                .setCookieSpec(CookieSpecs.IGNORE_COOKIES)\n                .setConnectTimeout(connectTimeout)\n                .setSocketTimeout(1000);\n</code></pre>\n<p>I know that if the request times out it will give socket timeout exception. Whenever I get Socket Timeout exception for that case I need to prepare <code>HttpServletResponse</code> for the same. Everything in the response means headers, error code, body everything.</p>\n<p>Can anyone help me with this?</p>\n"},{"tags":["java","eclipse"],"answers":[{"tags":[],"owner":{"account_id":970312,"reputation":3372,"user_id":992988,"accept_rate":85,"display_name":"vektor"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1344152363,"creation_date":1344152363,"answer_id":11814738,"question_id":11814737,"body_markdown":"I investigated my `.project` file and found the following natures:\r\n\r\n\t&lt;natures&gt;\r\n\t\t&lt;nature&gt;org.eclipse.ajdt.ui.ajnature&lt;/nature&gt;\r\n\t\t&lt;nature&gt;org.eclipse.jem.workbench.JavaEMFNature&lt;/nature&gt;\r\n\t\t&lt;nature&gt;org.eclipse.wst.common.modulecore.ModuleCoreNature&lt;/nature&gt;\r\n\t\t&lt;nature&gt;org.eclipse.wst.common.project.facet.core.nature&lt;/nature&gt;\r\n\t\t&lt;nature&gt;org.eclipse.jdt.core.javanature&lt;/nature&gt;\r\n\t\t&lt;nature&gt;org.eclipse.wst.jsdt.core.jsNature&lt;/nature&gt;\r\n\t&lt;/natures&gt;\r\n\r\nThe first one refers to AspectJ that I use to process some annotations. I realized that the newly installed Eclipse does not contain AspectJ tools by default! After installing AJDT, my TODOs appeared in the Tasks view, thus solving the problem.\r\n\r\nWeird thing is, why does not Eclipse complain about having a project with an unknown nature (=one there is no plugin for)? And why did this absence of AJDT cause the regular JDT to fail finding the TODOs?..","title":"Eclipse does not show TODO tasks","body":"<p>I investigated my <code>.project</code> file and found the following natures:</p>\n\n<pre><code>&lt;natures&gt;\n    &lt;nature&gt;org.eclipse.ajdt.ui.ajnature&lt;/nature&gt;\n    &lt;nature&gt;org.eclipse.jem.workbench.JavaEMFNature&lt;/nature&gt;\n    &lt;nature&gt;org.eclipse.wst.common.modulecore.ModuleCoreNature&lt;/nature&gt;\n    &lt;nature&gt;org.eclipse.wst.common.project.facet.core.nature&lt;/nature&gt;\n    &lt;nature&gt;org.eclipse.jdt.core.javanature&lt;/nature&gt;\n    &lt;nature&gt;org.eclipse.wst.jsdt.core.jsNature&lt;/nature&gt;\n&lt;/natures&gt;\n</code></pre>\n\n<p>The first one refers to AspectJ that I use to process some annotations. I realized that the newly installed Eclipse does not contain AspectJ tools by default! After installing AJDT, my TODOs appeared in the Tasks view, thus solving the problem.</p>\n\n<p>Weird thing is, why does not Eclipse complain about having a project with an unknown nature (=one there is no plugin for)? And why did this absence of AJDT cause the regular JDT to fail finding the TODOs?..</p>\n"},{"tags":[],"owner":{"account_id":3093327,"reputation":310,"user_id":2619028,"display_name":"user2619028"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1453029654,"creation_date":1374761059,"answer_id":17860269,"question_id":11814737,"body_markdown":"The problem is Eclipse should rebuild the settings (probably a bug). The way to work around this is to start **Windows &gt; Preferences &gt; Java &gt; Compiler &gt; Task Tags**, then change any tag, then press apply; you will be asked if you allow settings to rebuild, accept.\r\nThen change back the altered tag and rebuild again. You should have immediately shown TODO in the Tasks view.","title":"Eclipse does not show TODO tasks","body":"<p>The problem is Eclipse should rebuild the settings (probably a bug). The way to work around this is to start <strong>Windows > Preferences > Java > Compiler > Task Tags</strong>, then change any tag, then press apply; you will be asked if you allow settings to rebuild, accept.\nThen change back the altered tag and rebuild again. You should have immediately shown TODO in the Tasks view.</p>\n"},{"tags":[],"owner":{"account_id":1935092,"reputation":1777,"user_id":1743551,"accept_rate":58,"display_name":"Sandro"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1542702552,"creation_date":1542702552,"answer_id":53388924,"question_id":11814737,"body_markdown":"In my case I was just not aware of the fact that the project has to build correctly in order for the TODOs to show up.\r\nAfter I fixed the build errors there was no problem anymore to see the TODOs.","title":"Eclipse does not show TODO tasks","body":"<p>In my case I was just not aware of the fact that the project has to build correctly in order for the TODOs to show up.\nAfter I fixed the build errors there was no problem anymore to see the TODOs.</p>\n"},{"tags":[],"owner":{"account_id":23383968,"reputation":102,"user_id":18281361,"display_name":"MiaPlan.de"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660063758,"creation_date":1660063758,"answer_id":73295443,"question_id":11814737,"body_markdown":"Be sure to enable **Project** -&gt; **Build Automatically**. Then trigger an auto-build by adding, removing or modifying a resource.","title":"Eclipse does not show TODO tasks","body":"<p>Be sure to enable <strong>Project</strong> -&gt; <strong>Build Automatically</strong>. Then trigger an auto-build by adding, removing or modifying a resource.</p>\n"}],"owner":{"account_id":970312,"reputation":3372,"user_id":992988,"accept_rate":85,"display_name":"vektor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13819,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"accepted_answer_id":11814738,"answer_count":4,"score":17,"last_activity_date":1660063758,"creation_date":1344152363,"question_id":11814737,"body_markdown":"After upgrading to Eclipse Juno and importing an existing Java EE project, the Tasks view does not show TODOs from comments in my .java files. I can manually add new TODO tasks by specifically right-clicking the gutter and selecting `Add Task...` from the popup menu, but Eclipse should create TODOs from my comments on its own.\r\n\r\nI went through all the preferences related to task tags, they are all default (thus OK), still no tags appear. I tried closing/opening the project, re-building it, I checked Git repo to see that no dot files (.project etc) were modified since everything worked in the older Eclipse.\r\n\r\n[This][1] question did not help me... how to make Eclipse show my Java TODOs?\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/4388292/how-do-i-enable-todo-fixme-xxx-task-tags-in-eclipse","title":"Eclipse does not show TODO tasks","body":"<p>After upgrading to Eclipse Juno and importing an existing Java EE project, the Tasks view does not show TODOs from comments in my .java files. I can manually add new TODO tasks by specifically right-clicking the gutter and selecting <code>Add Task...</code> from the popup menu, but Eclipse should create TODOs from my comments on its own.</p>\n\n<p>I went through all the preferences related to task tags, they are all default (thus OK), still no tags appear. I tried closing/opening the project, re-building it, I checked Git repo to see that no dot files (.project etc) were modified since everything worked in the older Eclipse.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/4388292/how-do-i-enable-todo-fixme-xxx-task-tags-in-eclipse\">This</a> question did not help me... how to make Eclipse show my Java TODOs?</p>\n"},{"tags":["java","spring","heroku"],"answers":[{"tags":[],"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660063499,"creation_date":1660063499,"answer_id":73295396,"question_id":73295364,"body_markdown":"You build the application with a jdk verion lower than 11, but want the target level 11.\r\n\r\n    invalid target release: 11\r\n\r\ninstall and use a jdk &gt;=11 or set the `maven.compiler.target` to a lower java version.\r\n\r\nTry `mvn -version` to see which java version you use.","title":"Deploying Spring Boot to Heroku","body":"<p>You build the application with a jdk verion lower than 11, but want the target level 11.</p>\n<pre><code>invalid target release: 11\n</code></pre>\n<p>install and use a jdk &gt;=11 or set the <code>maven.compiler.target</code> to a lower java version.</p>\n<p>Try <code>mvn -version</code> to see which java version you use.</p>\n"}],"owner":{"account_id":26021002,"reputation":33,"user_id":19728708,"display_name":"Stefan Jankovic"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":115,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1660063499,"creation_date":1660063339,"question_id":73295364,"body_markdown":"So I&#39;m in process of creating a small web app for myself using Java and Spring with Mongo. Right now I&#39;m trying to deploy it to Heroku but without success so far.\r\n\r\nI followed a list of commands to deploy my app from official Heroku website and also from YouTube tutorial and I&#39;m facing an error that so far I couldn&#39;t solve.\r\n\r\nI already had a project on GitHub and inserted these commands.\r\n\r\n`heroku login`\r\n\r\n`git init`\r\n ... I know i didn&#39;t have to since I have on git already\r\n\r\n`heroku git:remote -a tripadvisor-app-demo`\r\n\r\nand then\r\n\r\n`git add .`\r\n\r\n`git commit -am &quot;make it better&quot;`\r\n\r\n`git push heroku master`\r\n\r\nThis is error stack trace:\r\n\r\n \r\n\r\n        Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.10.1:compile (default-compile) on project TripAdvisorApp: Fatal erro\r\n    r compiling: invalid target release: 11 -&gt; [Help 1]\r\n    remote:        [ERROR]\r\n    remote:        [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n    remote:        [ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n    remote:        [ERROR]\r\n    remote:        [ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n    remote:        [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\r\n    remote: \r\n    remote:  !     ERROR: Failed to build app with Maven\r\n    remote:        We&#39;re sorry this build is failing! If you can&#39;t find the issue in application code,\r\n    remote:        please submit a ticket so we can help: https://help.heroku.com/\r\n    remote:\r\n    remote:  !     Push rejected, failed to compile Java app.\r\n    remote: \r\n    remote:  !     Push failed\r\n    remote:  !\r\n    remote:  ! ## Warning - The same version of this code has already been built: b5d525882d9bb52d7175a5d79bcec430f37d6478\r\n    remote:  !\r\n    remote:  ! We have detected that you have triggered a build from source code with version b5d525882d9bb52d7175a5d79bcec430f37d6478\r\n    remote:  ! at least twice. One common cause of this behavior is attempting to deploy code from a different branch.\r\n    remote:  !\r\n    remote:  ! If you are developing on a branch and deploying via git you must run:\r\n    remote:  !\r\n    remote:  !     git push heroku &lt;branchname&gt;:main\r\n    remote:  !\r\n    remote:  ! This article goes into details on the behavior:\r\n    remote:  !   https://devcenter.heroku.com/articles/duplicate-build-version\r\n    remote:\r\n    remote: Verifying deploy...\r\n    remote:\r\n    remote: !       Push rejected to tripadvisor-app-demo.\r\n    remote:\r\n    To https://git.heroku.com/tripadvisor-app-demo.git\r\n     ! [remote rejected] master -&gt; master (pre-receive hook declined)\r\n    error: failed to push some refs to &#39;https://git.heroku.com/tripadvisor-app-demo.git&#39;\r\n\r\nIf you need anything else just ask I will provide, also I hope I provide all necessary stuff and describe process of how I tried to deploy it.","title":"Deploying Spring Boot to Heroku","body":"<p>So I'm in process of creating a small web app for myself using Java and Spring with Mongo. Right now I'm trying to deploy it to Heroku but without success so far.</p>\n<p>I followed a list of commands to deploy my app from official Heroku website and also from YouTube tutorial and I'm facing an error that so far I couldn't solve.</p>\n<p>I already had a project on GitHub and inserted these commands.</p>\n<p><code>heroku login</code></p>\n<p><code>git init</code>\n... I know i didn't have to since I have on git already</p>\n<p><code>heroku git:remote -a tripadvisor-app-demo</code></p>\n<p>and then</p>\n<p><code>git add .</code></p>\n<p><code>git commit -am &quot;make it better&quot;</code></p>\n<p><code>git push heroku master</code></p>\n<p>This is error stack trace:</p>\n<pre><code>    Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.10.1:compile (default-compile) on project TripAdvisorApp: Fatal erro\nr compiling: invalid target release: 11 -&gt; [Help 1]\nremote:        [ERROR]\nremote:        [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\nremote:        [ERROR] Re-run Maven using the -X switch to enable full debug logging.\nremote:        [ERROR]\nremote:        [ERROR] For more information about the errors and possible solutions, please read the following articles:\nremote:        [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\nremote: \nremote:  !     ERROR: Failed to build app with Maven\nremote:        We're sorry this build is failing! If you can't find the issue in application code,\nremote:        please submit a ticket so we can help: https://help.heroku.com/\nremote:\nremote:  !     Push rejected, failed to compile Java app.\nremote: \nremote:  !     Push failed\nremote:  !\nremote:  ! ## Warning - The same version of this code has already been built: b5d525882d9bb52d7175a5d79bcec430f37d6478\nremote:  !\nremote:  ! We have detected that you have triggered a build from source code with version b5d525882d9bb52d7175a5d79bcec430f37d6478\nremote:  ! at least twice. One common cause of this behavior is attempting to deploy code from a different branch.\nremote:  !\nremote:  ! If you are developing on a branch and deploying via git you must run:\nremote:  !\nremote:  !     git push heroku &lt;branchname&gt;:main\nremote:  !\nremote:  ! This article goes into details on the behavior:\nremote:  !   https://devcenter.heroku.com/articles/duplicate-build-version\nremote:\nremote: Verifying deploy...\nremote:\nremote: !       Push rejected to tripadvisor-app-demo.\nremote:\nTo https://git.heroku.com/tripadvisor-app-demo.git\n ! [remote rejected] master -&gt; master (pre-receive hook declined)\nerror: failed to push some refs to 'https://git.heroku.com/tripadvisor-app-demo.git'\n</code></pre>\n<p>If you need anything else just ask I will provide, also I hope I provide all necessary stuff and describe process of how I tried to deploy it.</p>\n"},{"tags":["java","tree","binary"],"comments":[{"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"score":0,"creation_date":1660018067,"post_id":73286342,"comment_id":129427157,"body_markdown":"I think you are asking if the first node is the ancestor of the second node.  If the user enters 61 for ancestor and 60 for descendant, it should return true.  If the user enter 66 for ancestor and 60 as descendant, it should return false.  I think that&#39;s what I got from reading your problem description and looking at your code.","body":"I think you are asking if the first node is the ancestor of the second node.  If the user enters 61 for ancestor and 60 for descendant, it should return true.  If the user enter 66 for ancestor and 60 as descendant, it should return false.  I think that&#39;s what I got from reading your problem description and looking at your code."}],"answers":[{"tags":[],"owner":{"account_id":3017326,"reputation":713,"user_id":2559094,"display_name":"h8red"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1660061652,"creation_date":1660018938,"answer_id":73286517,"question_id":73286342,"body_markdown":"I would rather not start two recursive searches for both children. Instead, I&#39;d add a parent field to each node and manually fill it when needed:\r\n```\r\n    class Node {\r\n        int value;\r\n        Node left;\r\n        Node right;\r\n\r\n        Node parent; //will populate manually\r\n    }\r\n\r\n    void preprocess(List&lt;Node&gt; nodes) {\r\n        nodes\r\n            .stream()\r\n            .forEach(node -&gt; {\r\n                if (node.left != null) node.left.parent = node;\r\n                if (node.right != null) node.right.parent = node;\r\n            });\r\n    }\r\n```\r\n\r\nThis way, you can conduct a straight search from the bottom node up until the top one (e.g. when you&#39;re trying to find if 48 is the parent of 51, you check 51 -&gt; 49 -&gt; 59 -&gt; 48):\r\n\r\n```\r\n    boolean isParent(Node node, int potentialParentValue) {\r\n        if (node == null) {\r\n            return false\r\n        };\r\n        if (node.value == potentialParentValue) {\r\n            return true\r\n        };\r\n        return isParent(node.parent, potentialParentValue);\r\n    }\r\n```\r\n\r\nAnd the example code that creates the whole tree you have in the example and prints the results:\r\n\r\n```\r\n    Node n52 = new Node(52, null, null);\r\n    Node n51 = new Node(51, null, n52);\r\n    Node n49 = new Node(49, null, n51);\r\n    Node n60 = new Node(60, null, null);\r\n    Node n59 = new Node(59, n49, n60);\r\n    Node n48 = new Node(48, null, n59);\r\n    Node n75 = new Node(75, null, null);\r\n    Node n70 = new Node(70, null, n75);\r\n    Node n66 = new Node(66, null, n70);\r\n    Node n61 = new Node(61, n48, n66);\r\n    List&lt;Node&gt; nodes = Arrays.asList(n52, n51, n49, n60, n59, n48, n75, n70, n66, n61);\r\n\r\n    void searchForParent(List&lt;Node&gt; nodeList, int nodeVal, int potentialParent) {\r\n        preprocess(nodeList);\r\n\r\n        Optional&lt;Node&gt; initialNode = nodeList\r\n            .stream()\r\n            .filter(node -&gt; node.value == nodeVal)\r\n            .findFirst();\r\n\r\n        if (!initialNode.isPresent()) { //add the same search for potential parent if needed\r\n            System.out.println(String.format(&quot;Node %s does not exist&quot;, nodeVal));\r\n            return;\r\n        }\r\n\r\n        boolean checkParent = isParent(initialNode.get(), potentialParent);\r\n        System.out.println(String.format(&quot;Value %s %s among the parents of node with value %s&quot;,\r\n                potentialParent, (checkParent ? &quot;is&quot;: &quot;is not&quot;), nodeVal));\r\n    }\r\n\r\n    searchForParent(nodes, 48, 61); //Value 61 is among the parents of node with value 48\r\n    searchForParent(nodes, 51, 48); //Value 48 is among the parents of node with value 51\r\n    searchForParent(nodes, 70, 49); //Value 49 is not among the parents of node with value 70\r\n    searchForParent(nodes, 49, 60); //Value 60 is not among the parents of node with value 49\r\n    searchForParent(nodes, 30, 60); //Node 30 does not exist\r\n```","title":"Given two numbers, decide if one is the parent of the other in a binary tree","body":"<p>I would rather not start two recursive searches for both children. Instead, I'd add a parent field to each node and manually fill it when needed:</p>\n<pre><code>    class Node {\n        int value;\n        Node left;\n        Node right;\n\n        Node parent; //will populate manually\n    }\n\n    void preprocess(List&lt;Node&gt; nodes) {\n        nodes\n            .stream()\n            .forEach(node -&gt; {\n                if (node.left != null) node.left.parent = node;\n                if (node.right != null) node.right.parent = node;\n            });\n    }\n</code></pre>\n<p>This way, you can conduct a straight search from the bottom node up until the top one (e.g. when you're trying to find if 48 is the parent of 51, you check 51 -&gt; 49 -&gt; 59 -&gt; 48):</p>\n<pre><code>    boolean isParent(Node node, int potentialParentValue) {\n        if (node == null) {\n            return false\n        };\n        if (node.value == potentialParentValue) {\n            return true\n        };\n        return isParent(node.parent, potentialParentValue);\n    }\n</code></pre>\n<p>And the example code that creates the whole tree you have in the example and prints the results:</p>\n<pre><code>    Node n52 = new Node(52, null, null);\n    Node n51 = new Node(51, null, n52);\n    Node n49 = new Node(49, null, n51);\n    Node n60 = new Node(60, null, null);\n    Node n59 = new Node(59, n49, n60);\n    Node n48 = new Node(48, null, n59);\n    Node n75 = new Node(75, null, null);\n    Node n70 = new Node(70, null, n75);\n    Node n66 = new Node(66, null, n70);\n    Node n61 = new Node(61, n48, n66);\n    List&lt;Node&gt; nodes = Arrays.asList(n52, n51, n49, n60, n59, n48, n75, n70, n66, n61);\n\n    void searchForParent(List&lt;Node&gt; nodeList, int nodeVal, int potentialParent) {\n        preprocess(nodeList);\n\n        Optional&lt;Node&gt; initialNode = nodeList\n            .stream()\n            .filter(node -&gt; node.value == nodeVal)\n            .findFirst();\n\n        if (!initialNode.isPresent()) { //add the same search for potential parent if needed\n            System.out.println(String.format(&quot;Node %s does not exist&quot;, nodeVal));\n            return;\n        }\n\n        boolean checkParent = isParent(initialNode.get(), potentialParent);\n        System.out.println(String.format(&quot;Value %s %s among the parents of node with value %s&quot;,\n                potentialParent, (checkParent ? &quot;is&quot;: &quot;is not&quot;), nodeVal));\n    }\n\n    searchForParent(nodes, 48, 61); //Value 61 is among the parents of node with value 48\n    searchForParent(nodes, 51, 48); //Value 48 is among the parents of node with value 51\n    searchForParent(nodes, 70, 49); //Value 49 is not among the parents of node with value 70\n    searchForParent(nodes, 49, 60); //Value 60 is not among the parents of node with value 49\n    searchForParent(nodes, 30, 60); //Node 30 does not exist\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user1196549"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660063390,"creation_date":1660062774,"answer_id":73295253,"question_id":73286342,"body_markdown":"Perform a double search, i.e. lookup the two numbers at the same time (two comparisons instead of one).\r\n\r\nIf you reach one of the numbers, continue the search for other number, from this node as a root.\r\n\r\nOtherwise, if the directions (left or right) become different, you can answer negatively.\r\n\r\nStandard search:\r\n\r\n    if root == NULL \r\n        return NULL\r\n    if number == root-&gt;data \r\n        return root-&gt;data\r\n    if number &lt; root-&gt;data \r\n        return search(root-&gt;left)\r\n    else\r\n        return search(root-&gt;right)\r\n\r\nDouble search:\r\n\r\n    if root == NULL \r\n        return NULL\r\n    if numberA == root-&gt;data \r\n        return root-&gt;data\r\n    if numberB == root-&gt;data \r\n        return root-&gt;data\r\n    if numberA &lt; root-&gt;data \r\n        if numberB &lt; root-&gt;data \r\n            return search(root-&gt;left)\r\n        else \r\n            return NULL\r\n    else \r\n        if numberB &gt; root-&gt;data \r\n            return search(root-&gt;right)\r\n        else \r\n            return NULL\r\n","title":"Given two numbers, decide if one is the parent of the other in a binary tree","body":"<p>Perform a double search, i.e. lookup the two numbers at the same time (two comparisons instead of one).</p>\n<p>If you reach one of the numbers, continue the search for other number, from this node as a root.</p>\n<p>Otherwise, if the directions (left or right) become different, you can answer negatively.</p>\n<p>Standard search:</p>\n<pre><code>if root == NULL \n    return NULL\nif number == root-&gt;data \n    return root-&gt;data\nif number &lt; root-&gt;data \n    return search(root-&gt;left)\nelse\n    return search(root-&gt;right)\n</code></pre>\n<p>Double search:</p>\n<pre><code>if root == NULL \n    return NULL\nif numberA == root-&gt;data \n    return root-&gt;data\nif numberB == root-&gt;data \n    return root-&gt;data\nif numberA &lt; root-&gt;data \n    if numberB &lt; root-&gt;data \n        return search(root-&gt;left)\n    else \n        return NULL\nelse \n    if numberB &gt; root-&gt;data \n        return search(root-&gt;right)\n    else \n        return NULL\n</code></pre>\n"}],"owner":{"account_id":23822387,"reputation":17,"user_id":17829901,"display_name":"theClawistheLaw"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":441,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1660063390,"creation_date":1660017006,"question_id":73286342,"body_markdown":"I&#39;m trying to take two numbers input by a user and tell if one is the parent of the other. For example, in my tree, the number 48 is the child of 61, so I would like to print that 61 is the parent. But if I took two numbers like 70 and 49, the program would print that 70 is not the parent. \r\n\r\n\r\n[![enter image description here][1]][1] \r\n  \r\n\r\nSo far the method I&#39;m using looks like this:\r\n\r\n```\r\nstatic void findParent(Node node, int val, int parent)\r\n\t{\r\n\t\tif (node == null)\r\n\t\t\treturn;\r\n\r\n// If current node is the required node\r\n\t\tif (node.value == val)\r\n\t\t{\r\n\r\n// Print its parent\r\n\t\tSystem.out.println(parent);\r\n\t\t\r\n\t\t\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t\r\n// Recursive calls for the children\r\n// of the current node\r\n// Current node is now the new parent\r\n\t\t\tfindParent(node.left, val, node.value);\r\n\t\t\tfindParent(node.right, val, node.value);\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\r\n\r\n\t\t\t\t\r\n\t}\r\n\t\r\n```\r\n\r\nI&#39;m able to find the parents of whatever node I choose, but I can&#39;t figure out how to add in a case where the user inputs numbers that don&#39;t work. I was thinking of returning some ints and comparing them to the user input but I couldn&#39;t figure out how to make it work.\r\n\r\nHere&#39;s the code from my main driver class where I try calling the method:\r\n```\r\nSystem.out.println(&quot;Enter the possible ancestor:&quot;);\r\n\t\t\t\tint x = scn.nextInt();\r\n\t\t\t\tSystem.out.println(&quot;Enter the possible child:&quot;);\r\n\t\t\t\tint y = scn.nextInt();\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tif(bt.containsNode(x))\r\n\t\t\t\t{\r\n\t\t\t\t\tif(bt.containsNode(y))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tbt.findParent(bt.root, y ,x);\r\n\t\t\t\t\t\t/*if(bt.findParent(bt.root, y ,x) == x)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tSystem.out.println(x + &quot; Is the parent&quot;);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tSystem.out.println(x + &quot; is NOT the parent&quot;);\r\n\t\t\t\t\t\t}*/\r\n\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tSystem.out.println(&quot;The child you entered does not exist.&quot;);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tSystem.out.println(&quot;The parent you entered does not exist.&quot;);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n```\r\nbt refers to the class that the findParent method is located along with all my other methods.\r\n\r\n[1]: https://i.stack.imgur.com/BABsy.png","title":"Given two numbers, decide if one is the parent of the other in a binary tree","body":"<p>I'm trying to take two numbers input by a user and tell if one is the parent of the other. For example, in my tree, the number 48 is the child of 61, so I would like to print that 61 is the parent. But if I took two numbers like 70 and 49, the program would print that 70 is not the parent.</p>\n<p><a href=\"https://i.stack.imgur.com/BABsy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BABsy.png\" alt=\"enter image description here\" /></a></p>\n<p>So far the method I'm using looks like this:</p>\n<pre><code>static void findParent(Node node, int val, int parent)\n    {\n        if (node == null)\n            return;\n\n// If current node is the required node\n        if (node.value == val)\n        {\n\n// Print its parent\n        System.out.println(parent);\n        \n        \n        }\n        else\n        {\n            \n// Recursive calls for the children\n// of the current node\n// Current node is now the new parent\n            findParent(node.left, val, node.value);\n            findParent(node.right, val, node.value);\n            \n        }\n        \n    \n\n                \n    }\n    \n</code></pre>\n<p>I'm able to find the parents of whatever node I choose, but I can't figure out how to add in a case where the user inputs numbers that don't work. I was thinking of returning some ints and comparing them to the user input but I couldn't figure out how to make it work.</p>\n<p>Here's the code from my main driver class where I try calling the method:</p>\n<pre><code>System.out.println(&quot;Enter the possible ancestor:&quot;);\n                int x = scn.nextInt();\n                System.out.println(&quot;Enter the possible child:&quot;);\n                int y = scn.nextInt();\n                \n                \n                \n                if(bt.containsNode(x))\n                {\n                    if(bt.containsNode(y))\n                    {\n                        bt.findParent(bt.root, y ,x);\n                        /*if(bt.findParent(bt.root, y ,x) == x)\n                        {\n                            System.out.println(x + &quot; Is the parent&quot;);\n                        }\n                        else\n                        {\n                            System.out.println(x + &quot; is NOT the parent&quot;);\n                        }*/\n                    \n                    }\n                    else\n                    {\n                        System.out.println(&quot;The child you entered does not exist.&quot;);\n                    }\n                    \n                }\n                else\n                {\n                    System.out.println(&quot;The parent you entered does not exist.&quot;);\n                }\n                \n</code></pre>\n<p>bt refers to the class that the findParent method is located along with all my other methods.</p>\n"},{"tags":["java","java-11"],"answers":[{"tags":[],"owner":{"account_id":18883598,"reputation":50,"user_id":13775510,"display_name":"Java_Herobrine"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660063179,"creation_date":1593250251,"answer_id":62608258,"question_id":62606385,"body_markdown":"Answer to question 1:If a password is required,there are relationships.&lt;br /&gt;\r\nAnswer to question 2:Because ```InetAddress``` object is your local host.If you have multiple IP addresses,you can decide to bind one of your addresses.Like ```Socket.bind(SocketAddress)```","title":"Use case of Authenticator#requestPasswordAuthentication​","body":"<p>Answer to question 1:If a password is required,there are relationships.<br />\nAnswer to question 2:Because <code>InetAddress</code> object is your local host.If you have multiple IP addresses,you can decide to bind one of your addresses.Like <code>Socket.bind(SocketAddress)</code></p>\n"},{"tags":[],"owner":{"display_name":"user13806035"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1593267013,"creation_date":1593267013,"answer_id":62611088,"question_id":62606385,"body_markdown":"I came up with this test case to understand it:\r\n\r\n    @Test\r\n    void requestPasswordAuthentication() {\r\n        InetAddress inetAddress = InetAddress.getByName(&quot;localhost&quot;);\r\n        var upass = Authenticator.requestPasswordAuthentication(\r\n                inetAddress, -1, &quot;&quot;, &quot;&quot;, &quot;&quot;);\r\n        assertEquals(&quot;uname&quot;, upass.getUserName());\r\n        assertEquals(&quot;password&quot;, String.valueOf(upass.getPassword()));\r\n    }","title":"Use case of Authenticator#requestPasswordAuthentication​","body":"<p>I came up with this test case to understand it:</p>\n<pre><code>@Test\nvoid requestPasswordAuthentication() {\n    InetAddress inetAddress = InetAddress.getByName(&quot;localhost&quot;);\n    var upass = Authenticator.requestPasswordAuthentication(\n            inetAddress, -1, &quot;&quot;, &quot;&quot;, &quot;&quot;);\n    assertEquals(&quot;uname&quot;, upass.getUserName());\n    assertEquals(&quot;password&quot;, String.valueOf(upass.getPassword()));\n}\n</code></pre>\n"}],"owner":{"display_name":"user13806035"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":127,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1660063179,"creation_date":1593236607,"question_id":62606385,"body_markdown":"I can not figure out the actual use case of `Authenticator#requestPasswordAuthentication​` method from `java.net`. I understand that it has something to do with the `HttpClient` to request authentication but can&#39;t figure out how it would work. Does it has anything to do with http basic authentication?\r\n\r\nMy second question is that there are `String host, InetAddress addr` as method parameter of `requestPasswordAuthentication​`. Why do we need to specify a `InetAddress` when we already specified the `host`? Afaik, `InetAddress` is used to encapsulate ip address. So if we already specified the ip address, why does it need a `host`?","title":"Use case of Authenticator#requestPasswordAuthentication​","body":"<p>I can not figure out the actual use case of <code>Authenticator#requestPasswordAuthentication​</code> method from <code>java.net</code>. I understand that it has something to do with the <code>HttpClient</code> to request authentication but can't figure out how it would work. Does it has anything to do with http basic authentication?</p>\n<p>My second question is that there are <code>String host, InetAddress addr</code> as method parameter of <code>requestPasswordAuthentication​</code>. Why do we need to specify a <code>InetAddress</code> when we already specified the <code>host</code>? Afaik, <code>InetAddress</code> is used to encapsulate ip address. So if we already specified the ip address, why does it need a <code>host</code>?</p>\n"},{"tags":["java","path","filenotfoundexception","properties-file"],"comments":[{"owner":{"account_id":22639015,"reputation":147,"user_id":16815462,"display_name":"Vlad Nitu"},"score":0,"creation_date":1659790563,"post_id":73259778,"comment_id":129381356,"body_markdown":"This links may help: [Absolute vs Relative paths](http://www.differencebetween.net/technology/difference-between-absolute-and-relative-path/) and [some rules for working with paths](https://stackoverflow.com/a/16570799/16815462)","body":"This links may help: <a href=\"http://www.differencebetween.net/technology/difference-between-absolute-and-relative-path/\" rel=\"nofollow noreferrer\">Absolute vs Relative paths</a> and <a href=\"https://stackoverflow.com/a/16570799/16815462\">some rules for working with paths</a>"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1659794503,"post_id":73259778,"comment_id":129382181,"body_markdown":"@VladNitu *Never* put `..` in a resource path.  A resource path not a file name.","body":"@VladNitu <i>Never</i> put <code>..</code> in a resource path.  A resource path not a file name."},{"owner":{"account_id":22639015,"reputation":147,"user_id":16815462,"display_name":"Vlad Nitu"},"score":0,"creation_date":1659801003,"post_id":73259778,"comment_id":129383552,"body_markdown":"@VGR can you elaborate a bit please? Thanks in advance","body":"@VGR can you elaborate a bit please? Thanks in advance"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1659801568,"post_id":73259778,"comment_id":129383685,"body_markdown":"@VladNitu The Class.getResource* and ClassLoader.getResource* methods take a relative URL as an argument.  That URL is resolved against each classpath entry.  No getResource method can access data outside of the classpath.  The javadoc of those methods explains this fairly well.","body":"@VladNitu The Class.getResource* and ClassLoader.getResource* methods take a relative URL as an argument.  That URL is resolved against each classpath entry.  No getResource method can access data outside of the classpath.  The javadoc of those methods explains this fairly well."},{"owner":{"account_id":22639015,"reputation":147,"user_id":16815462,"display_name":"Vlad Nitu"},"score":0,"creation_date":1659802414,"post_id":73259778,"comment_id":129383860,"body_markdown":"@VGR thanks for clarification. I’ll remove my confusing comment. The top response of this [question](https://stackoverflow.com/questions/6608795/what-is-the-difference-between-class-getresource-and-classloader-getresource) and also the javadocs may come in handy to solve the problem","body":"@VGR thanks for clarification. I’ll remove my confusing comment. The top response of this <a href=\"https://stackoverflow.com/questions/6608795/what-is-the-difference-between-class-getresource-and-classloader-getresource\">question</a> and also the javadocs may come in handy to solve the problem"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1659804768,"post_id":73259778,"comment_id":129384341,"body_markdown":"Based on the structure of your project, I suspect you want `PropUtility.class.getResourceAsStream(&quot;/prop.properties&quot;)`.","body":"Based on the structure of your project, I suspect you want <code>PropUtility.class.getResourceAsStream(&quot;&#47;prop.properties&quot;)</code>."}],"answers":[{"tags":[],"owner":{"account_id":24935146,"reputation":1,"user_id":18801811,"display_name":"Mesut"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659825976,"creation_date":1659810820,"answer_id":73262365,"question_id":73259778,"body_markdown":"     public static void main(String[] args) throws IOException {\r\n            FileReader reader= null;\r\n            try {\r\n                reader = new FileReader(&quot;prop.properties&quot;);\r\n            } catch (FileNotFoundException ex) {\r\n                throw new RuntimeException(ex);\r\n            }\r\n    \r\n            Properties p=new Properties();\r\n            p.load(reader);\r\n    \r\n            System.out.println(p.getProperty(&quot;user&quot;));\r\n            System.out.println(p.getProperty(&quot;password&quot;));\r\n        }","title":"FileNotFoundException when reading properties file","body":"<pre><code> public static void main(String[] args) throws IOException {\n        FileReader reader= null;\n        try {\n            reader = new FileReader(&quot;prop.properties&quot;);\n        } catch (FileNotFoundException ex) {\n            throw new RuntimeException(ex);\n        }\n\n        Properties p=new Properties();\n        p.load(reader);\n\n        System.out.println(p.getProperty(&quot;user&quot;));\n        System.out.println(p.getProperty(&quot;password&quot;));\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24935146,"reputation":1,"user_id":18801811,"display_name":"Mesut"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660062666,"creation_date":1659811129,"answer_id":73262392,"question_id":73259778,"body_markdown":"    \r\n\r\nWhen you run the code, it cannot access your properties file. You get a nullPointerException error when loading in from that one.\r\n    Get your properties file like in the picture below, put it in the project, then run your code. I also made a similar example with FileReader.\r\n    Extract from the resource folder. You can read it that way if you import it into the project.\r\n    Give this a try.\r\n\r\n![prop.properties is in Projectname/src folder, which also contains the resource folder][1]\r\n    \r\n   [1]: https://i.stack.imgur.com/d4xC6.jpg","title":"FileNotFoundException when reading properties file","body":"<p>When you run the code, it cannot access your properties file. You get a nullPointerException error when loading in from that one.\nGet your properties file like in the picture below, put it in the project, then run your code. I also made a similar example with FileReader.\nExtract from the resource folder. You can read it that way if you import it into the project.\nGive this a try.</p>\n<p><img src=\"https://i.stack.imgur.com/d4xC6.jpg\" alt=\"prop.properties is in Projectname/src folder, which also contains the resource folder\" /></p>\n"}],"owner":{"account_id":24832776,"reputation":13,"user_id":18711789,"display_name":"Ankit Sharma"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":530,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1660062666,"creation_date":1659789276,"question_id":73259778,"body_markdown":"I am facing this issue while reading property file. I searched a lot on the Internet but nothing worked. Below is the code and the image contains the path of the `prop.properties` file\r\n```java\r\npackage Utility;\r\n\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.util.Properties;\r\n\r\npublic class PropUtility {\r\n\r\n\t//private static Properties prop;\r\n\t\r\n\tprivate static Properties prop = new Properties();\r\n\tstatic {\r\n\t\tprop = new Properties();\r\n\t\tInputStream in = prop.getClass().getResourceAsStream(&quot;/resources/prop.properties&quot;);\r\n\t\ttry {\r\n\t\t\tprop.load(in);\r\n\t\t} catch (IOException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static String getProperty(String key) {\r\n\t\treturn prop.getProperty(key);\r\n\t}\r\n}\r\n```\r\n\r\n[![Screen capture of my IDE][2]][2]\r\n\r\n  [2]: https://i.stack.imgur.com/x62al.png","title":"FileNotFoundException when reading properties file","body":"<p>I am facing this issue while reading property file. I searched a lot on the Internet but nothing worked. Below is the code and the image contains the path of the <code>prop.properties</code> file</p>\n<pre class=\"lang-java prettyprint-override\"><code>package Utility;\n\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.util.Properties;\n\npublic class PropUtility {\n\n    //private static Properties prop;\n    \n    private static Properties prop = new Properties();\n    static {\n        prop = new Properties();\n        InputStream in = prop.getClass().getResourceAsStream(&quot;/resources/prop.properties&quot;);\n        try {\n            prop.load(in);\n        } catch (IOException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n    }\n\n    public static String getProperty(String key) {\n        return prop.getProperty(key);\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/x62al.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/x62al.png\" alt=\"Screen capture of my IDE\" /></a></p>\n"},{"tags":["java","json","spring-boot","date","localdate"],"answers":[{"tags":[],"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660062509,"creation_date":1660062509,"answer_id":73295204,"question_id":73294979,"body_markdown":"&gt; 1. Does LocalDate always kept in yyyy-MM-dd format in the database independently from it had in JSON file and in Request?\r\n\r\nThe JSON representation you use has nothing to do with how data is stored in the database[*]. Each database vendor (Oracle, MySQL, Postgres, SQLServer, etc) has its own way of storing date and date+time values. It&#39;s the job of your application or framework (eg, Hibernate) to translate from Java types such as `LocalDate` into the appropriate format for SQL statements. So the answer is &quot;yes,&quot; the format of a date in the application is independent from how it&#39;s stored in a database.\r\n\r\n&gt; 2. As far as I see, the format while reading the data to ProductRequest is related to the usage when displaying data using this class (ProductRequest). IS that true?\r\n\r\nOnly if you serialize `ProductRequest` back out to JSON. `@JsonFormat` applies to both reading (deserializing) and writing (serializing) from/to JSON.\r\n\r\n&gt; 3. Is there any need to use @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;dd/MM/yyyy&quot;) for the date field in ProductEntity? As far as I see, it does not make any sense for the format when saving to database. So, if we do not display or use date field from this entity, then there is no need to use format annotation. Is that true?\r\n\r\nThat is correct. In fact, it&#39;s very misleading to see that annotation in an entity[*]\r\n\r\n----\r\n[1] Unless you are using a database that natively understands JSON and/or stores data internally as JSON.\r\n","title":"Java LocalDate format from reading from JSON and saving to Database","body":"<blockquote>\n<ol>\n<li>Does LocalDate always kept in yyyy-MM-dd format in the database independently from it had in JSON file and in Request?</li>\n</ol>\n</blockquote>\n<p>The JSON representation you use has nothing to do with how data is stored in the database[*]. Each database vendor (Oracle, MySQL, Postgres, SQLServer, etc) has its own way of storing date and date+time values. It's the job of your application or framework (eg, Hibernate) to translate from Java types such as <code>LocalDate</code> into the appropriate format for SQL statements. So the answer is &quot;yes,&quot; the format of a date in the application is independent from how it's stored in a database.</p>\n<blockquote>\n<ol start=\"2\">\n<li>As far as I see, the format while reading the data to ProductRequest is related to the usage when displaying data using this class (ProductRequest). IS that true?</li>\n</ol>\n</blockquote>\n<p>Only if you serialize <code>ProductRequest</code> back out to JSON. <code>@JsonFormat</code> applies to both reading (deserializing) and writing (serializing) from/to JSON.</p>\n<blockquote>\n<ol start=\"3\">\n<li>Is there any need to use @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;dd/MM/yyyy&quot;) for the date field in ProductEntity? As far as I see, it does not make any sense for the format when saving to database. So, if we do not display or use date field from this entity, then there is no need to use format annotation. Is that true?</li>\n</ol>\n</blockquote>\n<p>That is correct. In fact, it's very misleading to see that annotation in an entity[*]</p>\n<hr />\n<p>[1] Unless you are using a database that natively understands JSON and/or stores data internally as JSON.</p>\n"}],"owner":{"display_name":"user19728533"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1432,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"accepted_answer_id":73295204,"answer_count":1,"score":-3,"last_activity_date":1660062509,"creation_date":1660061545,"question_id":73294979,"body_markdown":"In as Spring Boot app, I am reading `LocalDate` from a JSON in `dd/MM/yyyy` format e.g. 15/03/2009 and while reading, I created them to a request. The format in the request is `dd/MM/yyyy`. \r\n\r\n&lt;br/&gt;\r\n\r\n***ProductRequest:**\r\n\r\n```\r\n@JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;dd/MM/yyyy&quot;)\r\nprivate LocalDate buyingDate;\r\n```\r\n\r\nAnd then I save the date fields to database via my Entity. It also has the same format as shown below:\r\n\r\n&lt;br/&gt;\r\n\r\n***ProductEntity:**\r\n\r\n```\r\n@JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;dd/MM/yyyy&quot;)\r\nprivate LocalDate buyingDate;\r\n```\r\n\r\nBut the data in the database is shown in `yyyy-MM-dd` format. I think it is default format for `LocalDate`, but I need to be clarified about these points: Could you helps me please?\r\n\r\n**1.** Does `LocalDate` always kept in `yyyy-MM-dd` format in the database independently from it had in JSON file and in Request?\r\n\r\n**2.** As far as I see, the format while reading the data to `ProductRequest` is related to the usage when displaying data using this class (ProductRequest). IS that true?\r\n\r\n**3.** Is there any need to use `@JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;dd/MM/yyyy&quot;)` for the date field in `ProductEntity`? As far as I see, it does not make any sense for the format when saving to database. So, if we do not display or use date field from this entity, then there is no need to use format annotation. Is that true? \r\n\r\n","title":"Java LocalDate format from reading from JSON and saving to Database","body":"<p>In as Spring Boot app, I am reading <code>LocalDate</code> from a JSON in <code>dd/MM/yyyy</code> format e.g. 15/03/2009 and while reading, I created them to a request. The format in the request is <code>dd/MM/yyyy</code>.</p>\n<br/>\n<p>*<strong>ProductRequest:</strong></p>\n<pre><code>@JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;dd/MM/yyyy&quot;)\nprivate LocalDate buyingDate;\n</code></pre>\n<p>And then I save the date fields to database via my Entity. It also has the same format as shown below:</p>\n<br/>\n<p>*<strong>ProductEntity:</strong></p>\n<pre><code>@JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;dd/MM/yyyy&quot;)\nprivate LocalDate buyingDate;\n</code></pre>\n<p>But the data in the database is shown in <code>yyyy-MM-dd</code> format. I think it is default format for <code>LocalDate</code>, but I need to be clarified about these points: Could you helps me please?</p>\n<p><strong>1.</strong> Does <code>LocalDate</code> always kept in <code>yyyy-MM-dd</code> format in the database independently from it had in JSON file and in Request?</p>\n<p><strong>2.</strong> As far as I see, the format while reading the data to <code>ProductRequest</code> is related to the usage when displaying data using this class (ProductRequest). IS that true?</p>\n<p><strong>3.</strong> Is there any need to use <code>@JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;dd/MM/yyyy&quot;)</code> for the date field in <code>ProductEntity</code>? As far as I see, it does not make any sense for the format when saving to database. So, if we do not display or use date field from this entity, then there is no need to use format annotation. Is that true?</p>\n"},{"tags":["java","google-cloud-platform","google-cloud-run","google-cloud-metrics"],"answers":[{"tags":[],"owner":{"account_id":5508997,"reputation":1461,"user_id":4375999,"display_name":"Joss Baron"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1584486926,"creation_date":1584486926,"answer_id":60731490,"question_id":60726889,"body_markdown":"The entries in the logging in Stackdriver is as follows\r\n\r\n    labels: {\r\n      instanceId: &quot;00bf4bf02d4b374e91dda64bc4c4241a218302c4bcc73a01ecf85e582127e8c8076fcbe18b3cc934f5ed33e5dc1348c58cfd40cbecc0c9ae2a0b6d2356&quot;   \r\n     }\r\n\r\n      labels: {\r\n       configuration_name: &quot;cloudrunservice&quot;    \r\n       location: &quot;us-central1&quot;    \r\n       project_id: &quot;xxxx-xxxx-000&quot;    \r\n       revision_name: &quot;cloudrunservice-00002-leq&quot;    \r\n       service_name: &quot;cloudrunservice&quot;    \r\n      }\r\n      type: &quot;cloud_run_revision&quot; \r\n\r\nAs you mentioned, each one has the instance Id, Revision name, and Service name. In this way, you do not have to worry about rejected entries in the logging by the same instance / time. \r\n\r\nI could no see something related with the instances ID in the UI, [managing Revisions](https://cloud.google.com/run/docs/managing/revisions). Handling this  JSON from logging you could get the InsanceID. \r\n","title":"How to get instanceid from cloud_run?","body":"<p>The entries in the logging in Stackdriver is as follows</p>\n\n<pre><code>labels: {\n  instanceId: \"00bf4bf02d4b374e91dda64bc4c4241a218302c4bcc73a01ecf85e582127e8c8076fcbe18b3cc934f5ed33e5dc1348c58cfd40cbecc0c9ae2a0b6d2356\"   \n }\n\n  labels: {\n   configuration_name: \"cloudrunservice\"    \n   location: \"us-central1\"    \n   project_id: \"xxxx-xxxx-000\"    \n   revision_name: \"cloudrunservice-00002-leq\"    \n   service_name: \"cloudrunservice\"    \n  }\n  type: \"cloud_run_revision\" \n</code></pre>\n\n<p>As you mentioned, each one has the instance Id, Revision name, and Service name. In this way, you do not have to worry about rejected entries in the logging by the same instance / time. </p>\n\n<p>I could no see something related with the instances ID in the UI, <a href=\"https://cloud.google.com/run/docs/managing/revisions\" rel=\"nofollow noreferrer\">managing Revisions</a>. Handling this  JSON from logging you could get the InsanceID. </p>\n"},{"tags":[],"owner":{"account_id":2456476,"reputation":2384,"user_id":2141567,"accept_rate":50,"display_name":"wlhee"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1660062472,"creation_date":1589953569,"answer_id":61905927,"question_id":60726889,"body_markdown":"Please try using the metadata server to get the instance ID using the url:\r\n\r\n`http://metadata.google.internal/computeMetadata/v1/instance/id`\r\n\r\nNote that &quot;Metadata-Flavor: Google&quot; header is also required.","title":"How to get instanceid from cloud_run?","body":"<p>Please try using the metadata server to get the instance ID using the url:</p>\n<p><code>http://metadata.google.internal/computeMetadata/v1/instance/id</code></p>\n<p>Note that &quot;Metadata-Flavor: Google&quot; header is also required.</p>\n"},{"tags":[],"owner":{"account_id":74485,"reputation":1369,"user_id":214004,"accept_rate":75,"display_name":"David"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1634730090,"creation_date":1591462844,"answer_id":62235096,"question_id":60726889,"body_markdown":"If you&#39;re using Java (as indicated by the tags), the easiest way to get the instance ID from the &quot;internal metadata server&quot; programmatically is probably to include the dependency `com.google.cloud:google-cloud-core:1.93.5` (or newer) through Gradle/Maven and then call the following method: \r\n\r\n```java\r\nimport com.google.cloud.MetadataConfig;\r\n\r\nString instanceId = MetadataConfig.getInstanceId();\r\n```","title":"How to get instanceid from cloud_run?","body":"<p>If you're using Java (as indicated by the tags), the easiest way to get the instance ID from the &quot;internal metadata server&quot; programmatically is probably to include the dependency <code>com.google.cloud:google-cloud-core:1.93.5</code> (or newer) through Gradle/Maven and then call the following method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.google.cloud.MetadataConfig;\n\nString instanceId = MetadataConfig.getInstanceId();\n</code></pre>\n"}],"owner":{"account_id":244750,"reputation":19412,"user_id":517781,"accept_rate":82,"display_name":"Dean Hiller"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2892,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":61905927,"answer_count":3,"score":2,"last_activity_date":1660062472,"creation_date":1584464202,"question_id":60726889,"body_markdown":"The logs from cloud run spit out some good json with resource.labels.revision_name = my_name-00046-kip.\r\n\r\nThe json path labels.instanceId is more like this though\r\n\r\n00bf4bf02d71261c0c1f55a601331b336a5d90d365cca1b28330dcf3e456fb7c07d5b72f1d3c9a971e391b5edc3512aea8559d172b24e639\r\n\r\nper this document I was able to get revision_name\r\n\r\nhttps://cloud.google.com/run/docs/reference/container-contract#env-vars\r\n\r\nbut I can&#39;t get the instance id and metrics must be reported per instance or two instances reporting in the same minute will be rejected.  how do I get instance id (preferably through DockerFile and if not through api call).  If cloud run boots up 10 instances under one revision name, I have to make sure to uniquely report metrics to Generic Task resource where I plan on filling in job_id with the instance id.\r\n\r\nthanks,\r\nDean\r\n","title":"How to get instanceid from cloud_run?","body":"<p>The logs from cloud run spit out some good json with resource.labels.revision_name = my_name-00046-kip.</p>\n\n<p>The json path labels.instanceId is more like this though</p>\n\n<p>00bf4bf02d71261c0c1f55a601331b336a5d90d365cca1b28330dcf3e456fb7c07d5b72f1d3c9a971e391b5edc3512aea8559d172b24e639</p>\n\n<p>per this document I was able to get revision_name</p>\n\n<p><a href=\"https://cloud.google.com/run/docs/reference/container-contract#env-vars\" rel=\"nofollow noreferrer\">https://cloud.google.com/run/docs/reference/container-contract#env-vars</a></p>\n\n<p>but I can't get the instance id and metrics must be reported per instance or two instances reporting in the same minute will be rejected.  how do I get instance id (preferably through DockerFile and if not through api call).  If cloud run boots up 10 instances under one revision name, I have to make sure to uniquely report metrics to Generic Task resource where I plan on filling in job_id with the instance id.</p>\n\n<p>thanks,\nDean</p>\n"},{"tags":["java","java-threads"],"comments":[{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":2,"creation_date":1546379943,"post_id":53999241,"comment_id":94835518,"body_markdown":"*&quot;it completes the thread on which it is called&quot;* No it doesn&#39;t. It doesn&#39;t in any way affect the thread on which it is called. It simply waits for the thread to end. Which is what the [javadoc](https://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html#join--) says too: *Waits for this thread to die.*","body":"<i>&quot;it completes the thread on which it is called&quot;</i> No it doesn&#39;t. It doesn&#39;t in any way affect the thread on which it is called. It simply waits for the thread to end. Which is what the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html#join--\" rel=\"nofollow noreferrer\">javadoc</a> says too: <i>Waits for this thread to die.</i>"},{"owner":{"account_id":26377,"reputation":352187,"user_id":68587,"accept_rate":95,"display_name":"John Kugelman"},"score":0,"creation_date":1546380137,"post_id":53999241,"comment_id":94835554,"body_markdown":"I agree that it&#39;s not an intuitive name. It&#39;s a good question why it has this strange name (there is a reason, but if you don&#39;t know it it&#39;s not obvious). I don&#39;t think your proposed names get the concept right, though. Something like `await()` would be more natural.","body":"I agree that it&#39;s not an intuitive name. It&#39;s a good question why it has this strange name (there is a reason, but if you don&#39;t know it it&#39;s not obvious). I don&#39;t think your proposed names get the concept right, though. Something like <code>await()</code> would be more natural."},{"owner":{"account_id":26377,"reputation":352187,"user_id":68587,"accept_rate":95,"display_name":"John Kugelman"},"score":6,"creation_date":1546380726,"post_id":53999241,"comment_id":94835654,"body_markdown":"The heavy downvoting is a disappointing. We shouldn&#39;t be penalizing the OP for being confused. It&#39;s better to explain the question&#39;s misconceptions in answers than to downvote it because he doesn&#39;t quite understand what joining does. If the method were named better perhaps he wouldn&#39;t be so confused. After all, it&#39;s a name that comes from UNIX. Java doesn&#39;t actually have &quot;forking&quot;. Really, &quot;join&quot; isn&#39;t all that great a name now is it?","body":"The heavy downvoting is a disappointing. We shouldn&#39;t be penalizing the OP for being confused. It&#39;s better to explain the question&#39;s misconceptions in answers than to downvote it because he doesn&#39;t quite understand what joining does. If the method were named better perhaps he wouldn&#39;t be so confused. After all, it&#39;s a name that comes from UNIX. Java doesn&#39;t actually have &quot;forking&quot;. Really, &quot;join&quot; isn&#39;t all that great a name now is it?"},{"owner":{"account_id":85671,"reputation":40858,"user_id":238704,"display_name":"President James K. Polk"},"score":2,"creation_date":1546380831,"post_id":53999241,"comment_id":94835670,"body_markdown":"@JohnKugelman: agreed, beginner questions are ok and the history of a name may be important to understanding its meaning.","body":"@JohnKugelman: agreed, beginner questions are ok and the history of a name may be important to understanding its meaning."},{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1546382085,"post_id":53999241,"comment_id":94835922,"body_markdown":"@JohnKugelman Sure, Java has forking. I&#39;m referring to the original definition from the [Fork–Join model](https://en.wikipedia.org/wiki/Fork%E2%80%93join_model), which pre-dates the Unix implementation of forking processes. Forking is a concept, e.g. `thread.start()` is a fork operation, and `stream.parallel()` may trigger fork operations.","body":"@JohnKugelman Sure, Java has forking. I&#39;m referring to the original definition from the <a href=\"https://en.wikipedia.org/wiki/Fork%E2%80%93join_model\" rel=\"nofollow noreferrer\">Fork–Join model</a>, which pre-dates the Unix implementation of forking processes. Forking is a concept, e.g. <code>thread.start()</code> is a fork operation, and <code>stream.parallel()</code> may trigger fork operations."},{"owner":{"account_id":11859612,"reputation":1,"user_id":8678706,"display_name":"Stack Overflow"},"score":0,"creation_date":1546406320,"post_id":53999241,"comment_id":94839873,"body_markdown":"@John Kugelman -  Thankyou so much for the encouragement. Too much respect for you that you understand me why I asked the question.","body":"@John Kugelman -  Thankyou so much for the encouragement. Too much respect for you that you understand me why I asked the question."}],"answers":[{"tags":[],"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1660062047,"creation_date":1546380230,"answer_id":53999295,"question_id":53999241,"body_markdown":"The word &quot;join&quot; comes from the [Fork–Join model][1], where &quot;fork&quot; means to split the thread into multiple threads for parallel processing, and &quot;join&quot; means to wait for the parallel threads to complete their part, before continuing in a single thread.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Fork%E2%80%93join_model","title":"Why is the word &quot;join&quot; is used for the Thread.join() method?","body":"<p>The word &quot;join&quot; comes from the <a href=\"https://en.wikipedia.org/wiki/Fork%E2%80%93join_model\" rel=\"nofollow noreferrer\">Fork–Join model</a>, where &quot;fork&quot; means to split the thread into multiple threads for parallel processing, and &quot;join&quot; means to wait for the parallel threads to complete their part, before continuing in a single thread.</p>\n"},{"tags":[],"owner":{"account_id":136531,"reputation":21531,"user_id":340088,"accept_rate":68,"display_name":"jbx"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1546381100,"creation_date":1546380355,"answer_id":53999304,"question_id":53999241,"body_markdown":"Join is a common term used in models of concurrency, which implies that two separate independently running threads are synchronising with each other and one thread will not proceed until the other reaches a specific join point. So 2 threads are *joining* back together into one. In Java, this is usually when the other Thread finishes its task. \r\n\r\nNote that this might not be exactly the same in models where the tasks are backed by reusable worker threads, such as when using an `ExecutorService` to wait for a result, and using [`CompletableFuture.join()`][1] to block until the result is available. In this case the joining is more related to the task executed in parallel than the actual underlying worker thread which might be reused for other tasks afterwards.\r\n\r\nThe name itself comes from the [fork-join model][2] for parallelizing tasks and collecting their results. \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html#join--\r\n  [2]: https://en.wikipedia.org/wiki/Fork%E2%80%93join_model","title":"Why is the word &quot;join&quot; is used for the Thread.join() method?","body":"<p>Join is a common term used in models of concurrency, which implies that two separate independently running threads are synchronising with each other and one thread will not proceed until the other reaches a specific join point. So 2 threads are <em>joining</em> back together into one. In Java, this is usually when the other Thread finishes its task. </p>\n\n<p>Note that this might not be exactly the same in models where the tasks are backed by reusable worker threads, such as when using an <code>ExecutorService</code> to wait for a result, and using <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html#join--\" rel=\"nofollow noreferrer\"><code>CompletableFuture.join()</code></a> to block until the result is available. In this case the joining is more related to the task executed in parallel than the actual underlying worker thread which might be reused for other tasks afterwards.</p>\n\n<p>The name itself comes from the <a href=\"https://en.wikipedia.org/wiki/Fork%E2%80%93join_model\" rel=\"nofollow noreferrer\">fork-join model</a> for parallelizing tasks and collecting their results. </p>\n"}],"owner":{"account_id":11859612,"reputation":1,"user_id":8678706,"display_name":"Stack Overflow"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1097,"favorite_count":0,"down_vote_count":6,"up_vote_count":12,"accepted_answer_id":53999295,"answer_count":2,"score":6,"last_activity_date":1660062047,"creation_date":1546379625,"question_id":53999241,"body_markdown":"I started to do research to find out why the word &quot;join&quot; is used for the `Thread.join()` method. In fact, it waits for the thread to end on which it is called and pauses the main thread to wait for it so, there is nothing to join. So, its name should be something like:\r\n\r\n1. Thread.pauseCaller();\r\n2. Thread.freezeCaller();\r\n3. Thread.focusThread();\r\n4. Thread.runBefore();\r\n\r\nI found one simple sentence after too much research which says that:\r\n\r\n&gt; `Thread.join();` name comes from the concept of the calling thread waiting until the specified thread &lt;i&gt;joins&lt;/i&gt; it.\r\n\r\nI am totally unable to get this above sentence into my mind and failed to understand the background context of using the word `join` for this method. What does the word &quot;join&quot; represent in this context? There is nothing to join anything else; instead, it just pauses the calling thread to wait for the thread followed by the `join()`. So, can anyone tell the context of using the `join` word for this method?","title":"Why is the word &quot;join&quot; is used for the Thread.join() method?","body":"<p>I started to do research to find out why the word \"join\" is used for the <code>Thread.join()</code> method. In fact, it waits for the thread to end on which it is called and pauses the main thread to wait for it so, there is nothing to join. So, its name should be something like:</p>\n\n<ol>\n<li>Thread.pauseCaller();</li>\n<li>Thread.freezeCaller();</li>\n<li>Thread.focusThread();</li>\n<li>Thread.runBefore();</li>\n</ol>\n\n<p>I found one simple sentence after too much research which says that:</p>\n\n<blockquote>\n  <p><code>Thread.join();</code> name comes from the concept of the calling thread waiting until the specified thread <i>joins</i> it.</p>\n</blockquote>\n\n<p>I am totally unable to get this above sentence into my mind and failed to understand the background context of using the word <code>join</code> for this method. What does the word \"join\" represent in this context? There is nothing to join anything else; instead, it just pauses the calling thread to wait for the thread followed by the <code>join()</code>. So, can anyone tell the context of using the <code>join</code> word for this method?</p>\n"},{"tags":["java","enums"],"comments":[{"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"score":2,"creation_date":1660059389,"post_id":73294415,"comment_id":129440900,"body_markdown":"There are various isues here. E is a type variable and can only be used where types are expected. The argument to a method (such as the `allOf` method of `EnumSet`) cannot be a type. You can&#39;t write `EnumSet.allOf(int)` either. It gets worse; given that erasure is a thing, you can&#39;t fix the typo - it is fundamentally impossible to make an enumset representing &#39;all values of this typevar&#39;.","body":"There are various isues here. E is a type variable and can only be used where types are expected. The argument to a method (such as the <code>allOf</code> method of <code>EnumSet</code>) cannot be a type. You can&#39;t write <code>EnumSet.allOf(int)</code> either. It gets worse; given that erasure is a thing, you can&#39;t fix the typo - it is fundamentally impossible to make an enumset representing &#39;all values of this typevar&#39;."},{"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"score":1,"creation_date":1660059411,"post_id":73294415,"comment_id":129440915,"body_markdown":"Second issue: It&#39;s `E extends Enum&lt;E&gt;`, not `E extends Enum`. That latter one involves raw types; you don&#39;t want that.","body":"Second issue: It&#39;s <code>E extends Enum&lt;E&gt;</code>, not <code>E extends Enum</code>. That latter one involves raw types; you don&#39;t want that."},{"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"score":1,"creation_date":1660059606,"post_id":73294415,"comment_id":129440997,"body_markdown":"Fixing that `E extends Enum&lt;E&gt;` thing, I think your interactions with the `qty` field would then work fine. The `types` field is a much bigger issue. You can either resort to some fairly crazy hackery that adds all sorts of weird precondition requirements to your codebase, or, you just get rid of it (your example doesn&#39;t actually use this field), or, you demand that each class (e.g. `Fruit` and `Veggie`) takes care of this, or at least gives the Food constructor what it needs to init this, such as calling `super(Fruit.Type.class)`.","body":"Fixing that <code>E extends Enum&lt;E&gt;</code> thing, I think your interactions with the <code>qty</code> field would then work fine. The <code>types</code> field is a much bigger issue. You can either resort to some fairly crazy hackery that adds all sorts of weird precondition requirements to your codebase, or, you just get rid of it (your example doesn&#39;t actually use this field), or, you demand that each class (e.g. <code>Fruit</code> and <code>Veggie</code>) takes care of this, or at least gives the Food constructor what it needs to init this, such as calling <code>super(Fruit.Type.class)</code>."},{"owner":{"account_id":18161126,"reputation":339,"user_id":13212499,"display_name":"Ilya Voytov"},"score":0,"creation_date":1660059959,"post_id":73294415,"comment_id":129441133,"body_markdown":"The interactions with qty don&#39;t even require generics, I was able to use a Map&lt;Enum, Integer&gt; just fine. But the class does really need to have access to Types, perhaps to check that every Fruit has been purchased and none are missing. What&#39;s the cleanest way to do that?","body":"The interactions with qty don&#39;t even require generics, I was able to use a Map&lt;Enum, Integer&gt; just fine. But the class does really need to have access to Types, perhaps to check that every Fruit has been purchased and none are missing. What&#39;s the cleanest way to do that?"}],"answers":[{"tags":[],"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660061762,"creation_date":1660060725,"answer_id":73294795,"question_id":73294415,"body_markdown":"I would take advantage of the fact that enums can implement interfaces, using an interface as the type constraint of `Food` instead of `Enum&lt;&gt;`. Then make `Food` abstract so that each specific food subtype can declare its enum type.\r\n\r\n```java\r\n\tprivate static interface FoodType {}\r\n\r\n\tprivate static abstract class Food&lt;T extends FoodType&gt; {\r\n\r\n\t\tpublic Map&lt;T, Integer&gt; qty = new HashMap&lt;&gt;();\r\n\r\n\t\tprotected abstract Set&lt;T&gt; getTypes();\r\n\r\n\t}\r\n\r\n\tprivate static class Fruit extends Food&lt;Fruit.Type&gt; {\r\n\r\n\t\tpublic static enum Type implements FoodType {\r\n\t\t\tAPPLE,\r\n\t\t\tORANGE\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tprotected Set&lt;Type&gt; getTypes() {\r\n\t\t\treturn EnumSet.allOf(Type.class);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tprivate static class Veggie extends Food&lt;Veggie.Type&gt; {\r\n\r\n\t\tpublic static enum Type implements FoodType {\r\n\t\t\tCUCUMBER,\r\n\t\t\tCELERY\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tprotected Set&lt;Type&gt; getTypes() {\r\n\t\t\treturn EnumSet.allOf(Type.class);\r\n\t\t}\r\n\t}\r\n\r\n```\r\n\r\nIf you want be slightly more [DRY][1] and avoid implementing `getTypes()` in every concrete `Food` subclass, you can pass in the array of enum values in a protected constructor. Like this:\r\n\r\n```java\r\n\tprivate static interface FoodType { }\r\n\r\n\tprivate static abstract class Food&lt;T extends FoodType&gt; {\r\n\t\tpublic Map&lt;T, Integer&gt; qty;\r\n\t\tpublic Set&lt;T&gt; types;\r\n\r\n\t\tprotected Food(T[] types) {\r\n\t\t\tthis.types = Set.of(types);\r\n\t\t\tthis.qty = new HashMap&lt;&gt;();\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tprivate static class Fruit extends Food&lt;Fruit.Type&gt; {\r\n\r\n\t\tprotected Fruit() {\r\n\t\t\tsuper(Type.values());\r\n\t\t}\r\n\r\n\t\tpublic static enum Type implements FoodType {\r\n\t\t\tAPPLE,\r\n\t\t\tORANGE;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate static class Veggie extends Food&lt;Veggie.Type&gt; {\r\n\r\n\t\tprotected Veggie() {\r\n\t\t\tsuper(Type.values());\r\n\t\t}\r\n\r\n\t\tpublic static enum Type implements FoodType {\r\n\t\t\tCUCUMBER,\r\n\t\t\tCELERY\r\n\t\t}\r\n\t}\r\n\r\n```\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Don%27t_repeat_yourself","title":"Using generic types with a Map typed with Enum keys in a subclass context","body":"<p>I would take advantage of the fact that enums can implement interfaces, using an interface as the type constraint of <code>Food</code> instead of <code>Enum&lt;&gt;</code>. Then make <code>Food</code> abstract so that each specific food subtype can declare its enum type.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private static interface FoodType {}\n\n    private static abstract class Food&lt;T extends FoodType&gt; {\n\n        public Map&lt;T, Integer&gt; qty = new HashMap&lt;&gt;();\n\n        protected abstract Set&lt;T&gt; getTypes();\n\n    }\n\n    private static class Fruit extends Food&lt;Fruit.Type&gt; {\n\n        public static enum Type implements FoodType {\n            APPLE,\n            ORANGE\n        }\n\n        @Override\n        protected Set&lt;Type&gt; getTypes() {\n            return EnumSet.allOf(Type.class);\n        }\n\n    }\n\n    private static class Veggie extends Food&lt;Veggie.Type&gt; {\n\n        public static enum Type implements FoodType {\n            CUCUMBER,\n            CELERY\n        }\n\n        @Override\n        protected Set&lt;Type&gt; getTypes() {\n            return EnumSet.allOf(Type.class);\n        }\n    }\n\n</code></pre>\n<p>If you want be slightly more <a href=\"https://en.wikipedia.org/wiki/Don%27t_repeat_yourself\" rel=\"nofollow noreferrer\">DRY</a> and avoid implementing <code>getTypes()</code> in every concrete <code>Food</code> subclass, you can pass in the array of enum values in a protected constructor. Like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private static interface FoodType { }\n\n    private static abstract class Food&lt;T extends FoodType&gt; {\n        public Map&lt;T, Integer&gt; qty;\n        public Set&lt;T&gt; types;\n\n        protected Food(T[] types) {\n            this.types = Set.of(types);\n            this.qty = new HashMap&lt;&gt;();\n        }\n\n    }\n\n    private static class Fruit extends Food&lt;Fruit.Type&gt; {\n\n        protected Fruit() {\n            super(Type.values());\n        }\n\n        public static enum Type implements FoodType {\n            APPLE,\n            ORANGE;\n        }\n    }\n\n    private static class Veggie extends Food&lt;Veggie.Type&gt; {\n\n        protected Veggie() {\n            super(Type.values());\n        }\n\n        public static enum Type implements FoodType {\n            CUCUMBER,\n            CELERY\n        }\n    }\n\n</code></pre>\n"}],"owner":{"account_id":18161126,"reputation":339,"user_id":13212499,"display_name":"Ilya Voytov"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73294795,"answer_count":1,"score":0,"last_activity_date":1660061762,"creation_date":1660059060,"question_id":73294415,"body_markdown":"I have the following structure with a parent class, several subclasses, and each of the subclasses has its own Enum with various keys. The parent class is required to have a map with keys characterized by the Enum, but the Enum type is abstract - it&#39;s determined by which subclass is being instantiated.\r\n\r\nI would like to use generic types to require that the Enum type is from that specific class - so you can only add APPLE to Fruits and CELERY to Veggies and never vice versa. My application also requires any Food object to be able to query its possible types (like to say, print out all of the types that are possible, not just the types we have in the Map). \r\n\r\nHow can I use generic types to make that all work? I am getting the compiler error on the line with the EnumSet&lt;E&gt; declaration `Uncompilable source code - type argument E is not within bounds of type-variable E`.\r\n\r\n```\r\nimport java.util.*;\r\n\r\npublic class sandbox {\r\n\r\n    private static class Food&lt;E extends Enum&gt; {\r\n\r\n        public Map&lt;E, Integer&gt; qty = new HashMap&lt;&gt;();\r\n        public EnumSet&lt;E&gt; types = EnumSet.allOf(E);\r\n\r\n    }\r\n\r\n    private static class Fruit extends Food&lt;Fruit.Type&gt; {\r\n\r\n        public static enum Type {\r\n            APPLE,\r\n            ORANGE\r\n        }\r\n\r\n    }\r\n\r\n    private static class Veggie extends Food&lt;Veggie.Type&gt; {\r\n\r\n        public static enum Type {\r\n            CUCUMBER,\r\n            CELERY\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        Fruit mondays = new Fruit();\r\n        mondays.qty.put(Fruit.Type.APPLE, 1);\r\n        mondays.qty.put(Fruit.Type.ORANGE, 3);\r\n\r\n        Veggie tuesdays = new Veggie();\r\n        tuesdays.qty.put(Veggie.Type.CELERY, 10);\r\n\r\n        mondays.qty.forEach((f, qty) -&gt; System.out.println(&quot;Buying &quot; + f + &quot; in qty &quot; + qty));\r\n        tuesdays.qty.forEach((f, qty) -&gt; System.out.println(&quot;Buying &quot; + f + &quot; in qty &quot; + qty));\r\n\r\n        mondays.types.forEach(System.out::print);\r\n\r\n    }\r\n}\r\n```","title":"Using generic types with a Map typed with Enum keys in a subclass context","body":"<p>I have the following structure with a parent class, several subclasses, and each of the subclasses has its own Enum with various keys. The parent class is required to have a map with keys characterized by the Enum, but the Enum type is abstract - it's determined by which subclass is being instantiated.</p>\n<p>I would like to use generic types to require that the Enum type is from that specific class - so you can only add APPLE to Fruits and CELERY to Veggies and never vice versa. My application also requires any Food object to be able to query its possible types (like to say, print out all of the types that are possible, not just the types we have in the Map).</p>\n<p>How can I use generic types to make that all work? I am getting the compiler error on the line with the EnumSet declaration <code>Uncompilable source code - type argument E is not within bounds of type-variable E</code>.</p>\n<pre><code>import java.util.*;\n\npublic class sandbox {\n\n    private static class Food&lt;E extends Enum&gt; {\n\n        public Map&lt;E, Integer&gt; qty = new HashMap&lt;&gt;();\n        public EnumSet&lt;E&gt; types = EnumSet.allOf(E);\n\n    }\n\n    private static class Fruit extends Food&lt;Fruit.Type&gt; {\n\n        public static enum Type {\n            APPLE,\n            ORANGE\n        }\n\n    }\n\n    private static class Veggie extends Food&lt;Veggie.Type&gt; {\n\n        public static enum Type {\n            CUCUMBER,\n            CELERY\n        }\n    }\n\n    public static void main(String[] args) throws Exception {\n        Fruit mondays = new Fruit();\n        mondays.qty.put(Fruit.Type.APPLE, 1);\n        mondays.qty.put(Fruit.Type.ORANGE, 3);\n\n        Veggie tuesdays = new Veggie();\n        tuesdays.qty.put(Veggie.Type.CELERY, 10);\n\n        mondays.qty.forEach((f, qty) -&gt; System.out.println(&quot;Buying &quot; + f + &quot; in qty &quot; + qty));\n        tuesdays.qty.forEach((f, qty) -&gt; System.out.println(&quot;Buying &quot; + f + &quot; in qty &quot; + qty));\n\n        mondays.types.forEach(System.out::print);\n\n    }\n}\n</code></pre>\n"},{"tags":["java","intellij-idea","decompiler"],"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1660049172,"post_id":73292036,"comment_id":129436454,"body_markdown":"Well that&#39;s quite strange. Perhaps an IDE issue? What version of IntelliJ are you using? Is there an [MCVE](https://stackoverflow.com/help/minimal-reproducible-example) of this issue you can provide for others to run?","body":"Well that&#39;s quite strange. Perhaps an IDE issue? What version of IntelliJ are you using? Is there an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">MCVE</a> of this issue you can provide for others to run?"},{"owner":{"account_id":21958290,"reputation":440,"user_id":16236541,"display_name":"markfila"},"score":0,"creation_date":1660049473,"post_id":73292036,"comment_id":129436587,"body_markdown":"0 is false in boolean logic. Could just be a ide display issue.","body":"0 is false in boolean logic. Could just be a ide display issue."},{"owner":{"account_id":6300117,"reputation":1389,"user_id":4895033,"accept_rate":50,"display_name":"chaos"},"score":0,"creation_date":1660061388,"post_id":73292036,"comment_id":129441690,"body_markdown":"@markfila I tried to evaluate expression in debugger, and it says that `failed` is not a boolean.","body":"@markfila I tried to evaluate expression in debugger, and it says that <code>failed</code> is not a boolean."},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1660142772,"post_id":73292036,"comment_id":129463927,"body_markdown":"Does this answer your question? [IntelliJ &quot;Debug info unavailable&quot; - how to fix?](https://stackoverflow.com/questions/1539282/intellij-debug-info-unavailable-how-to-fix)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/1539282/intellij-debug-info-unavailable-how-to-fix\">IntelliJ &quot;Debug info unavailable&quot; - how to fix?</a>"},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1660142839,"post_id":73292036,"comment_id":129463958,"body_markdown":"Note the comment in your debugger above the variables: &quot;Variables debug info not available&quot;. This is a recent issue in either Java or IntelliJ 2021.2.","body":"Note the comment in your debugger above the variables: &quot;Variables debug info not available&quot;. This is a recent issue in either Java or IntelliJ 2021.2."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660049763,"creation_date":1660049763,"answer_id":73292218,"question_id":73292036,"body_markdown":"Because JVM.\r\n\r\nJava-the-language has booleans. The JVM (Java-the-bytecode, Java-the-bytecode-runner) mostly doesn&#39;t. There are ways to convey that e.g. a method&#39;s return type is `boolean`, so booleans exist when describing the signatures of things, but the runtime model __does not have them__. For example, if we look at the [full list of all bytecode instructions](https://en.wikipedia.org/wiki/List_of_Java_bytecode_instructions) and we scan for e.g. the `xLOAD` instruction, there&#39;s:\r\n\r\n* `aload`, which loads references\r\n* `dload` which loads doubles\r\n* `fload` which loads floats\r\n* `iload` which loads ints\r\n* `lload` which loads longs\r\n\r\nThat&#39;s it. There is no `bload` or `zload` to load a boolean, because they don&#39;t exist. They _do_ exist when loading off of arrays. This makes some sense: You wouldn&#39;t want a `new byte[100]` to take up 400 bytes of memory because each byte has to be as large as an int. However, for a single field or local variable, the amount of CPU time you&#39;d waste trying to cajole the CPU, which is fundamentally a 64-bit based concept, into working on chunks of a word, vastly exceeds any gain you&#39;d have by being &#39;efficient&#39; with your locals. So, just a local var `boolean b;` takes 64 bits, even though it could have fit in just 1.\r\n\r\nThe various auto-generated notes in the code added by the debugger refer to all this. At the bytecode level, __Local variables do not exist either__ - instead, there are &#39;slots&#39; and `javac` is free to reuse. For example, this code:\r\n\r\n```\r\nvoid foo() {\r\n  int x = 5;\r\n  System.out.println(x);\r\n  int y = 10;\r\n  System.out.println(y);\r\n}\r\n```\r\n\r\nwill compile down to __just one slot__ (given that x is no longer used when you declare y, why not reuse the slot?), or possibly even zero slots as these can just be translated to an ICONST instruction + an invoke.\r\n\r\nThat&#39;s what `Slot_5` is all about.\r\n\r\nWhat does a &#39;slot&#39; hold? well, a reference, an int, a long, a float, or a double. That&#39;s it. It cannot hold booleans, shorts, bytes, or chars, because those do not exist. `javac` rewrites boolean logic to 0/1-based int logic.\r\n\r\nAnd the debugger is just following along with that. Possibly the debugger is a bit &#39;lost&#39;, it&#39;s job is to translate what the bytecode is doing back to track as close as possible with the source it has.\r\n\r\nThere&#39;s certainly nothing wrong with your compiler. I doubt there&#39;s anything &quot;wrong&quot; with your debugger, other than that it simply isn&#39;t as advanced as it could be.\r\n","title":"Why boolean has changed to int when debug?","body":"<p>Because JVM.</p>\n<p>Java-the-language has booleans. The JVM (Java-the-bytecode, Java-the-bytecode-runner) mostly doesn't. There are ways to convey that e.g. a method's return type is <code>boolean</code>, so booleans exist when describing the signatures of things, but the runtime model <strong>does not have them</strong>. For example, if we look at the <a href=\"https://en.wikipedia.org/wiki/List_of_Java_bytecode_instructions\" rel=\"nofollow noreferrer\">full list of all bytecode instructions</a> and we scan for e.g. the <code>xLOAD</code> instruction, there's:</p>\n<ul>\n<li><code>aload</code>, which loads references</li>\n<li><code>dload</code> which loads doubles</li>\n<li><code>fload</code> which loads floats</li>\n<li><code>iload</code> which loads ints</li>\n<li><code>lload</code> which loads longs</li>\n</ul>\n<p>That's it. There is no <code>bload</code> or <code>zload</code> to load a boolean, because they don't exist. They <em>do</em> exist when loading off of arrays. This makes some sense: You wouldn't want a <code>new byte[100]</code> to take up 400 bytes of memory because each byte has to be as large as an int. However, for a single field or local variable, the amount of CPU time you'd waste trying to cajole the CPU, which is fundamentally a 64-bit based concept, into working on chunks of a word, vastly exceeds any gain you'd have by being 'efficient' with your locals. So, just a local var <code>boolean b;</code> takes 64 bits, even though it could have fit in just 1.</p>\n<p>The various auto-generated notes in the code added by the debugger refer to all this. At the bytecode level, <strong>Local variables do not exist either</strong> - instead, there are 'slots' and <code>javac</code> is free to reuse. For example, this code:</p>\n<pre><code>void foo() {\n  int x = 5;\n  System.out.println(x);\n  int y = 10;\n  System.out.println(y);\n}\n</code></pre>\n<p>will compile down to <strong>just one slot</strong> (given that x is no longer used when you declare y, why not reuse the slot?), or possibly even zero slots as these can just be translated to an ICONST instruction + an invoke.</p>\n<p>That's what <code>Slot_5</code> is all about.</p>\n<p>What does a 'slot' hold? well, a reference, an int, a long, a float, or a double. That's it. It cannot hold booleans, shorts, bytes, or chars, because those do not exist. <code>javac</code> rewrites boolean logic to 0/1-based int logic.</p>\n<p>And the debugger is just following along with that. Possibly the debugger is a bit 'lost', it's job is to translate what the bytecode is doing back to track as close as possible with the source it has.</p>\n<p>There's certainly nothing wrong with your compiler. I doubt there's anything &quot;wrong&quot; with your debugger, other than that it simply isn't as advanced as it could be.</p>\n"}],"owner":{"account_id":6300117,"reputation":1389,"user_id":4895033,"accept_rate":50,"display_name":"chaos"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":154,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1660061252,"creation_date":1660049015,"question_id":73292036,"body_markdown":"I was debugging `java.util.concurrent.locks.AbstractQueuedSynchronizer#acquireQueued` method. And I found that the `interrupted` and `failed` variables&#39; type changed to `int` in the debugger. Here is the screenshot.\r\n[![enter image description here][1]][1]\r\n\r\n**Why does this happen?** \r\n\r\n**Is there anything wrong in my compiler?**\r\n\r\nI tried to decompile another class but things were ok.\r\n\r\n[![enter image description here][2]][2]\r\n\r\nMy IDEA version is \r\n`IntelliJ IDEA 2021.2 (Ultimate Edition)\r\nBuild #IU-212.4746.92, built on July 27, 2021`\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ShvYg.png\r\n  [2]: https://i.stack.imgur.com/DERvF.png","title":"Why boolean has changed to int when debug?","body":"<p>I was debugging <code>java.util.concurrent.locks.AbstractQueuedSynchronizer#acquireQueued</code> method. And I found that the <code>interrupted</code> and <code>failed</code> variables' type changed to <code>int</code> in the debugger. Here is the screenshot.\n<a href=\"https://i.stack.imgur.com/ShvYg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ShvYg.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Why does this happen?</strong></p>\n<p><strong>Is there anything wrong in my compiler?</strong></p>\n<p>I tried to decompile another class but things were ok.</p>\n<p><a href=\"https://i.stack.imgur.com/DERvF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DERvF.png\" alt=\"enter image description here\" /></a></p>\n<p>My IDEA version is\n<code>IntelliJ IDEA 2021.2 (Ultimate Edition) Build #IU-212.4746.92, built on July 27, 2021</code></p>\n"},{"tags":["java","apache-camel"],"answers":[{"tags":[],"owner":{"account_id":1832,"reputation":11572,"user_id":2517,"accept_rate":82,"display_name":"Jeremy Ross"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1660061175,"creation_date":1659720912,"answer_id":73253472,"question_id":73253156,"body_markdown":"You could set the file consumer&#39;s [noop](https://camel.apache.org/components/3.18.x/file-component.html#_endpoint_query_option_noop) to `true` and implement a simple processor to move the files after your aggregation is complete.  \r\n\r\n```lang-java\r\n.process(e -&gt; {\r\n    String name = e.getIn().getHeader(&quot;CamelFileNameConsumed&quot;, String.class);\r\n    Files.move(\r\n        Path.of(name),\r\n        Path.of(&quot;.camel&quot;).resolve(&quot;name&quot;));\r\n})\r\n```\r\n\r\nAnother solution that might work for you is to force the Aggregator to run in the same thread as its caller:\r\n\r\n```lang-java\r\n.aggregate(constant(true), AggregationStrategies.groupedExchange())\r\n    .executorService(new SynchronousExecutorService())\r\n    ...\r\n```\r\nThis results in all aggregations completing prior to the File component being notified that the route is complete.","title":"Using Camel Aggregators with Files","body":"<p>You could set the file consumer's <a href=\"https://camel.apache.org/components/3.18.x/file-component.html#_endpoint_query_option_noop\" rel=\"nofollow noreferrer\">noop</a> to <code>true</code> and implement a simple processor to move the files after your aggregation is complete.</p>\n<pre class=\"lang-java prettyprint-override\"><code>.process(e -&gt; {\n    String name = e.getIn().getHeader(&quot;CamelFileNameConsumed&quot;, String.class);\n    Files.move(\n        Path.of(name),\n        Path.of(&quot;.camel&quot;).resolve(&quot;name&quot;));\n})\n</code></pre>\n<p>Another solution that might work for you is to force the Aggregator to run in the same thread as its caller:</p>\n<pre class=\"lang-java prettyprint-override\"><code>.aggregate(constant(true), AggregationStrategies.groupedExchange())\n    .executorService(new SynchronousExecutorService())\n    ...\n</code></pre>\n<p>This results in all aggregations completing prior to the File component being notified that the route is complete.</p>\n"}],"owner":{"account_id":22225790,"reputation":68,"user_id":16462754,"display_name":"ncgisudo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":271,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73253472,"answer_count":1,"score":1,"last_activity_date":1660061175,"creation_date":1659719034,"question_id":73253156,"body_markdown":"Essentially - how is it possible to use Camel&#39;s Aggregator with a File based input?\r\n\r\nBy default, when an Exchange created using the File component&#39;s input completes its Route the file is moved to `$inputLocation/.camel/`.  \r\n\r\nHowever, when using an Aggregator, after the Exchange goes through the aggregation step it goes on to complete the remainder of the Route outside of the Aggregation step (which there may or may not be).  This means that the Exchange finishes the Route and if a File Consumer was used it causes the file to be moved to  `$inputLocation/.camel/`.  \r\nAt some later time the Aggregator will complete and when it does so the aggregated File references will be invalid, because the file was moved on disk when the regular Exchange completed the Route.\r\n\r\nThe following depicts a simple Route that shows the issue.  The referenced Processor `doSomethingWithTheAggregatedFiles` will find that the files in question do not exist at their stated location (as they have already been moved (to `workdirs/in/.camel/`):\r\n```java\r\n  @Override\r\n  public void configure() throws Exception {\r\n    from(&quot;file:workdirs/in/&quot;)\r\n      .aggregate(constant(true), AggregationStrategies.groupedExchange())\r\n        .completionTimeout(10*1000) // 10 seconds\r\n        .process(&quot;doSomethingWithTheAggregatedFiles&quot;)\r\n        .end()\r\n    .log(&quot;file completed route: $simple{header[CamelFileName]}&quot;)\r\n    .end();\r\n  }\r\n```\r\n\r\nIs there something missing here?  Is there no way to get it to &quot;wait&quot; until the aggregated exchange completes?  \r\n\r\nLooking at the `ZipAggregationStrategy` I see that it doesn&#39;t suffer this issue because it reads the content of the files during the aggregation step and adds it into the ZIP file - essentially taking a copy of the data as the aggregation step occurs.  Preferably I do not want to take a copy, as my input may be large.","title":"Using Camel Aggregators with Files","body":"<p>Essentially - how is it possible to use Camel's Aggregator with a File based input?</p>\n<p>By default, when an Exchange created using the File component's input completes its Route the file is moved to <code>$inputLocation/.camel/</code>.</p>\n<p>However, when using an Aggregator, after the Exchange goes through the aggregation step it goes on to complete the remainder of the Route outside of the Aggregation step (which there may or may not be).  This means that the Exchange finishes the Route and if a File Consumer was used it causes the file to be moved to  <code>$inputLocation/.camel/</code>.<br />\nAt some later time the Aggregator will complete and when it does so the aggregated File references will be invalid, because the file was moved on disk when the regular Exchange completed the Route.</p>\n<p>The following depicts a simple Route that shows the issue.  The referenced Processor <code>doSomethingWithTheAggregatedFiles</code> will find that the files in question do not exist at their stated location (as they have already been moved (to <code>workdirs/in/.camel/</code>):</p>\n<pre class=\"lang-java prettyprint-override\"><code>  @Override\n  public void configure() throws Exception {\n    from(&quot;file:workdirs/in/&quot;)\n      .aggregate(constant(true), AggregationStrategies.groupedExchange())\n        .completionTimeout(10*1000) // 10 seconds\n        .process(&quot;doSomethingWithTheAggregatedFiles&quot;)\n        .end()\n    .log(&quot;file completed route: $simple{header[CamelFileName]}&quot;)\n    .end();\n  }\n</code></pre>\n<p>Is there something missing here?  Is there no way to get it to &quot;wait&quot; until the aggregated exchange completes?</p>\n<p>Looking at the <code>ZipAggregationStrategy</code> I see that it doesn't suffer this issue because it reads the content of the files during the aggregation step and adds it into the ZIP file - essentially taking a copy of the data as the aggregation step occurs.  Preferably I do not want to take a copy, as my input may be large.</p>\n"},{"tags":["java","selenium","selenium-webdriver","firefox"],"answers":[{"tags":[],"owner":{"account_id":2989730,"reputation":11,"user_id":2537553,"display_name":"Astronaut77"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660061058,"creation_date":1659676416,"answer_id":73244961,"question_id":68264628,"body_markdown":"I&#39;m using Selenium with PowerShell and I had the same issue.\r\nThis solution works for me\r\n```\r\n[OpenQA.Selenium.Firefox.FirefoxProfileManager]$ProfileManager= [OpenQA.Selenium.Firefox.FirefoxProfileManager]::new()\r\n[OpenQA.Selenium.Firefox.FirefoxProfile]$FirefoxProfile = $ProfileManager.GetProfile($ProfileName)\r\n\r\n$FirefoxProfile.SetPreference(&quot;pref.privacy.disable_button.tracking_protection_exceptions&quot;, $true)\r\n```","title":"How to turn off &#39;Enhanced Tracking Protection&#39; for Firefox browser via Selenium WebDriver?","body":"<p>I'm using Selenium with PowerShell and I had the same issue.\nThis solution works for me</p>\n<pre><code>[OpenQA.Selenium.Firefox.FirefoxProfileManager]$ProfileManager= [OpenQA.Selenium.Firefox.FirefoxProfileManager]::new()\n[OpenQA.Selenium.Firefox.FirefoxProfile]$FirefoxProfile = $ProfileManager.GetProfile($ProfileName)\n\n$FirefoxProfile.SetPreference(&quot;pref.privacy.disable_button.tracking_protection_exceptions&quot;, $true)\n</code></pre>\n"}],"owner":{"account_id":7073901,"reputation":558,"user_id":5414637,"accept_rate":50,"display_name":"AutoTester999"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":993,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1660061058,"creation_date":1625546415,"question_id":68264628,"body_markdown":"My Selenium Java test script runs on Firefox browser.\r\n\r\nRecently, it has started failing on applications where &#39;Enhanced Tracking Protection&#39; is turned on.\r\n\r\nhttps://support.mozilla.org/en-US/kb/enhanced-tracking-protection-firefox-desktop\r\n\r\n\r\nHow can I disable/turn it off via Selenium Web Driver? Is there any preference or capability through which I can turn it off in the Firefox profile?","title":"How to turn off &#39;Enhanced Tracking Protection&#39; for Firefox browser via Selenium WebDriver?","body":"<p>My Selenium Java test script runs on Firefox browser.</p>\n<p>Recently, it has started failing on applications where 'Enhanced Tracking Protection' is turned on.</p>\n<p><a href=\"https://support.mozilla.org/en-US/kb/enhanced-tracking-protection-firefox-desktop\" rel=\"nofollow noreferrer\">https://support.mozilla.org/en-US/kb/enhanced-tracking-protection-firefox-desktop</a></p>\n<p>How can I disable/turn it off via Selenium Web Driver? Is there any preference or capability through which I can turn it off in the Firefox profile?</p>\n"},{"tags":["java","json"],"answers":[{"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1641998748,"creation_date":1641996792,"answer_id":70683086,"question_id":70681496,"body_markdown":"JSONObject is like a java.util.Map, even if it does not implement the interface. You can take all keys and iterate through them even if you do not know them beforehand.\r\n\r\n    jsonObject.keySet()\r\nThis returns Set, consisting of the keys in the object. Now the recursive function:\r\n\r\n        private static void recursiveTraverse(String previousKey, JSONObject currentObject) {\r\n        //iterate each key\r\n        for (String currentKey : currentObject.keySet()) {\r\n          //build the next key\r\n          String nextKey = previousKey == null || previousKey.isEmpty() ? currentKey : previousKey + &quot;-&quot; + currentKey;\r\n          Object value = currentObject.get(currentKey);\r\n          if (value instanceof JSONObject) {\r\n            //if current value is object, call recursively with next key and value\r\n            recursiveTraverse(nextKey, (JSONObject) value);\r\n          } else if (value instanceof JSONArray) {\r\n            //if current value is array, iterate it\r\n            JSONArray array = (JSONArray) value;\r\n            for (int i = 0; i &lt; array.length(); i++) {\r\n              Object object = array.get(i);\r\n              JSONObject jsonObject = (JSONObject) object;\r\n              //assuming current array member is object, call recursively with next key + index and current member\r\n              recursiveTraverse(nextKey + &quot;-&quot; + i, jsonObject);\r\n              //you might need to handle special case of current member being array\r\n            }\r\n          } else {\r\n            //value is neither object, nor array, so we print and this ends the recursion\r\n            System.out.println(nextKey + &quot;, &quot; + value);\r\n          }\r\n        }\r\n      }\r\n\r\nStart traversing the object:\r\n\r\n    JSONObject jsonObject = new JSONObject(jsonString);\r\n    recursiveTraverse(&quot;&quot;, jsonObject);\r\n\r\nIt works good enough for most use cases, but as i have noted in comments in the code, it does not handle the case when current array element is another array. If your constraints allow this, you might have to implement recursive function for that . Something like this:\r\n\r\n      private static void recursiveHandleArray(String prevKey, JSONArray currentArray) {\r\n        //implement\r\n      }","title":"java using JSONObject to loop recursive through any jsondata","body":"<p>JSONObject is like a java.util.Map, even if it does not implement the interface. You can take all keys and iterate through them even if you do not know them beforehand.</p>\n<pre><code>jsonObject.keySet()\n</code></pre>\n<p>This returns Set, consisting of the keys in the object. Now the recursive function:</p>\n<pre><code>    private static void recursiveTraverse(String previousKey, JSONObject currentObject) {\n    //iterate each key\n    for (String currentKey : currentObject.keySet()) {\n      //build the next key\n      String nextKey = previousKey == null || previousKey.isEmpty() ? currentKey : previousKey + &quot;-&quot; + currentKey;\n      Object value = currentObject.get(currentKey);\n      if (value instanceof JSONObject) {\n        //if current value is object, call recursively with next key and value\n        recursiveTraverse(nextKey, (JSONObject) value);\n      } else if (value instanceof JSONArray) {\n        //if current value is array, iterate it\n        JSONArray array = (JSONArray) value;\n        for (int i = 0; i &lt; array.length(); i++) {\n          Object object = array.get(i);\n          JSONObject jsonObject = (JSONObject) object;\n          //assuming current array member is object, call recursively with next key + index and current member\n          recursiveTraverse(nextKey + &quot;-&quot; + i, jsonObject);\n          //you might need to handle special case of current member being array\n        }\n      } else {\n        //value is neither object, nor array, so we print and this ends the recursion\n        System.out.println(nextKey + &quot;, &quot; + value);\n      }\n    }\n  }\n</code></pre>\n<p>Start traversing the object:</p>\n<pre><code>JSONObject jsonObject = new JSONObject(jsonString);\nrecursiveTraverse(&quot;&quot;, jsonObject);\n</code></pre>\n<p>It works good enough for most use cases, but as i have noted in comments in the code, it does not handle the case when current array element is another array. If your constraints allow this, you might have to implement recursive function for that . Something like this:</p>\n<pre><code>  private static void recursiveHandleArray(String prevKey, JSONArray currentArray) {\n    //implement\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6225334,"reputation":437,"user_id":4843781,"accept_rate":20,"display_name":"Roger"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660060922,"creation_date":1660060922,"answer_id":73294853,"question_id":70681496,"body_markdown":"Changing this:\r\n\r\n    //if current value is array, iterate it\r\n    JSONArray array = (JSONArray) value;\r\n    for (int i = 0; i &lt; array.length(); i++) {\r\n      Object object = array.get(i);\r\n      JSONObject jsonObject = (JSONObject) object;\r\n      //assuming current array member is object, call recursively with next key + index and current member\r\n      recursiveTraverse(nextKey + &quot;-&quot; + i, jsonObject);\r\n      //you might need to handle special case of current member being array\r\n    }\r\n\r\n\r\nto this:\r\n\r\n         //if current value is array, iterate it\r\n    JSONArray array = (JSONArray) value;\r\n    for (int i = 0; i &lt; array.length(); i++) {\r\n    \tObject object = array.get(i);\r\n    \tif (object instanceof JSONObject) {\r\n    \t\tJSONObject jsonObject = (JSONObject) object;\r\n    \t\t//assuming current array member is object, call recursively with next key + index and current member\r\n    \t\trecursiveTraverse(nextKey + &quot;.&quot; + i, jsonObject);\r\n    \t} else {\r\n    \t\t//value is neither object, nor array, so we print and this ends the recursion\r\n    \t\tSystem.out.println(nextKey + &quot;, &quot; + object);\r\n    \t}\r\n    }\r\n\r\nResolved the issue when the current array member is an object.","title":"java using JSONObject to loop recursive through any jsondata","body":"<p>Changing this:</p>\n<pre><code>//if current value is array, iterate it\nJSONArray array = (JSONArray) value;\nfor (int i = 0; i &lt; array.length(); i++) {\n  Object object = array.get(i);\n  JSONObject jsonObject = (JSONObject) object;\n  //assuming current array member is object, call recursively with next key + index and current member\n  recursiveTraverse(nextKey + &quot;-&quot; + i, jsonObject);\n  //you might need to handle special case of current member being array\n}\n</code></pre>\n<p>to this:</p>\n<pre><code>     //if current value is array, iterate it\nJSONArray array = (JSONArray) value;\nfor (int i = 0; i &lt; array.length(); i++) {\n    Object object = array.get(i);\n    if (object instanceof JSONObject) {\n        JSONObject jsonObject = (JSONObject) object;\n        //assuming current array member is object, call recursively with next key + index and current member\n        recursiveTraverse(nextKey + &quot;.&quot; + i, jsonObject);\n    } else {\n        //value is neither object, nor array, so we print and this ends the recursion\n        System.out.println(nextKey + &quot;, &quot; + object);\n    }\n}\n</code></pre>\n<p>Resolved the issue when the current array member is an object.</p>\n"}],"owner":{"account_id":1456511,"reputation":703,"user_id":1371947,"accept_rate":44,"display_name":"Mike"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1688,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70683086,"answer_count":2,"score":1,"last_activity_date":1660060922,"creation_date":1641990178,"question_id":70681496,"body_markdown":"i read a json string into a JSONObject in java. The json-String varies:\r\n\r\nThis is one json:\r\n\r\n    {&quot;menu&quot;: {\r\n      &quot;id&quot;: &quot;file&quot;,\r\n      &quot;value&quot;: &quot;File&quot;,\r\n      &quot;popup&quot;: {\r\n        &quot;menuitem&quot;: [\r\n          {&quot;value&quot;: &quot;New&quot;, &quot;onclick&quot;: &quot;CreateNewDoc()&quot;},\r\n          {&quot;value&quot;: &quot;Open&quot;, &quot;onclick&quot;: &quot;OpenDoc()&quot;},\r\n          {&quot;value&quot;: &quot;Close&quot;, &quot;onclick&quot;: &quot;CloseDoc()&quot;}\r\n        ]\r\n      }\r\n    }}\r\n\r\nThis is the same if i get it 5 Minutes later:\r\n\r\n    {&quot;menu&quot;: {\r\n      &quot;id&quot;: &quot;file&quot;,\r\n      &quot;popup&quot;: {\r\n        &quot;menuitem&quot;: [\r\n          {&quot;master&quot;: &quot;New&quot;, &quot;onclick&quot;: &quot;CreateNewDoc()&quot;},\r\n        ]\r\n      }\r\n    }}\r\n\r\nThe json has not the same structure as the first one. I am not able to change the server side. This is given in the project.\r\n\r\nSo i like to create a list of all values stored in the json without knowing the keys:\r\n\r\n    Key, Value\r\n    menu-id, file\r\n    menu-value, File\r\n    menu-popup-menuitem-0-value, New\r\n    menu-popup-menuitem-0-onclick, CreateNewDoc\r\n    ...\r\n\r\nBut if i use JSONObject i have to know the keys. I did not find any funciton to loop through alle elements?\r\n\r\nCan somebody help?\r\n\r\nThis is my code:\r\n\r\n    Reader in = new BufferedReader(new InputStreamReader(conn.getInputStream(), &quot;UTF-8&quot;));\r\n        \t\r\n    StringBuilder sb = new StringBuilder();\r\n    for (int c; (c = in.read()) &gt;= 0;)\r\n       sb.append((char)c);\r\n        \t\t        \r\n    String response = sb.toString();\r\n    JSONObject json_response = new JSONObject(response);\r\n    how to loop throug json_response to get each key/value and check if it has elements below????\r\n\r\n\r\n","title":"java using JSONObject to loop recursive through any jsondata","body":"<p>i read a json string into a JSONObject in java. The json-String varies:</p>\n<p>This is one json:</p>\n<pre><code>{&quot;menu&quot;: {\n  &quot;id&quot;: &quot;file&quot;,\n  &quot;value&quot;: &quot;File&quot;,\n  &quot;popup&quot;: {\n    &quot;menuitem&quot;: [\n      {&quot;value&quot;: &quot;New&quot;, &quot;onclick&quot;: &quot;CreateNewDoc()&quot;},\n      {&quot;value&quot;: &quot;Open&quot;, &quot;onclick&quot;: &quot;OpenDoc()&quot;},\n      {&quot;value&quot;: &quot;Close&quot;, &quot;onclick&quot;: &quot;CloseDoc()&quot;}\n    ]\n  }\n}}\n</code></pre>\n<p>This is the same if i get it 5 Minutes later:</p>\n<pre><code>{&quot;menu&quot;: {\n  &quot;id&quot;: &quot;file&quot;,\n  &quot;popup&quot;: {\n    &quot;menuitem&quot;: [\n      {&quot;master&quot;: &quot;New&quot;, &quot;onclick&quot;: &quot;CreateNewDoc()&quot;},\n    ]\n  }\n}}\n</code></pre>\n<p>The json has not the same structure as the first one. I am not able to change the server side. This is given in the project.</p>\n<p>So i like to create a list of all values stored in the json without knowing the keys:</p>\n<pre><code>Key, Value\nmenu-id, file\nmenu-value, File\nmenu-popup-menuitem-0-value, New\nmenu-popup-menuitem-0-onclick, CreateNewDoc\n...\n</code></pre>\n<p>But if i use JSONObject i have to know the keys. I did not find any funciton to loop through alle elements?</p>\n<p>Can somebody help?</p>\n<p>This is my code:</p>\n<pre><code>Reader in = new BufferedReader(new InputStreamReader(conn.getInputStream(), &quot;UTF-8&quot;));\n        \nStringBuilder sb = new StringBuilder();\nfor (int c; (c = in.read()) &gt;= 0;)\n   sb.append((char)c);\n                    \nString response = sb.toString();\nJSONObject json_response = new JSONObject(response);\nhow to loop throug json_response to get each key/value and check if it has elements below????\n</code></pre>\n"},{"tags":["java","android-studio"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1660058950,"post_id":73294358,"comment_id":129440724,"body_markdown":"We&#39;d need to see the specification for what is in the byte array, but in general `DataInputStream` will work.","body":"We&#39;d need to see the specification for what is in the byte array, but in general <code>DataInputStream</code> will work."},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1660059081,"post_id":73294358,"comment_id":129440774,"body_markdown":"Could you include example? For now it looks like you want to convert entire byte array to *single* integer which may be impossible for long byte arrays. This suggests that you may want to convert it to *more* integers, maybe array of integers. But then do you want to convert single byte to single integer or 4 bytes to single integer? Or maybe even other way?","body":"Could you include example? For now it looks like you want to convert entire byte array to <i>single</i> integer which may be impossible for long byte arrays. This suggests that you may want to convert it to <i>more</i> integers, maybe array of integers. But then do you want to convert single byte to single integer or 4 bytes to single integer? Or maybe even other way?"}],"answers":[{"tags":[],"owner":{"account_id":478864,"reputation":1349,"user_id":891203,"accept_rate":80,"display_name":"devdanke"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660060819,"creation_date":1660060819,"answer_id":73294826,"question_id":73294358,"body_markdown":"I don&#39;t program in Java any more, but something like this might work.\r\n\r\n    int[] intArray = int[byteArray.length];\r\n    for( int i =0 ; i&lt; byteArray.length; i++){\r\n        intArray[i] = byteArray[i];\r\n    }","title":"Byte array to integer","body":"<p>I don't program in Java any more, but something like this might work.</p>\n<pre><code>int[] intArray = int[byteArray.length];\nfor( int i =0 ; i&lt; byteArray.length; i++){\n    intArray[i] = byteArray[i];\n}\n</code></pre>\n"}],"owner":{"account_id":20131520,"reputation":9,"user_id":14763731,"display_name":"Faizan NAZIR"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":93,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1660060819,"creation_date":1660058852,"question_id":73294358,"body_markdown":"How to convert byte array to int in java. I am building Bluetooth app on which I received a message in byte array then I convert it to string it converted successfully but I also want it in integer form","title":"Byte array to integer","body":"<p>How to convert byte array to int in java. I am building Bluetooth app on which I received a message in byte array then I convert it to string it converted successfully but I also want it in integer form</p>\n"},{"tags":["java","hibernate","graphql","vert.x","hibernate-reactive"],"answers":[{"tags":[],"owner":{"account_id":2795364,"reputation":7571,"user_id":2404683,"display_name":"Davide D&#39;Alto"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660060647,"creation_date":1660060647,"answer_id":73294777,"question_id":73061187,"body_markdown":"The problem is that you are running everything in the worker thread (using `executeBlocking`).\r\n\r\nIf you are writing reactive code, you don&#39;t need to wait for the result to be available.\r\n\r\nThe code should look something like this:\r\n```java\r\n    public Future&lt;UsersDto&gt; addUserTest(final DataFetchingEnvironment environment) {\r\n        return Future.future(event -&gt; {\r\n            final AddUsersDto addUsersDto = Dto.mapped(environment.getArguments() , &quot;user&quot; , AddUsersDto.class);\r\n            final Users user = UsersMapper.toUsers(addUsersDto);\r\n            sessionFactory\r\n                .withTransaction( (session , tx) -&gt; session.persist(user) )\r\n                .subscribe().with( event::complete, event::fail )\r\n        });\r\n    }\r\n```\r\n\r\nYou also don&#39;t need to flush because there&#39;s a transaction.\r\n\r\n[There is a working example on the Hibernate Reactive repository](https://github.com/hibernate/hibernate-reactive/blob/main/integration-tests/verticle-postgres-it/src/main/java/org/hibernate/reactive/it/verticle/ProductVerticle.java)\r\n\r\n","title":"Vert.x Web , GraphQL , Hibernate Reactive","body":"<p>The problem is that you are running everything in the worker thread (using <code>executeBlocking</code>).</p>\n<p>If you are writing reactive code, you don't need to wait for the result to be available.</p>\n<p>The code should look something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public Future&lt;UsersDto&gt; addUserTest(final DataFetchingEnvironment environment) {\n        return Future.future(event -&gt; {\n            final AddUsersDto addUsersDto = Dto.mapped(environment.getArguments() , &quot;user&quot; , AddUsersDto.class);\n            final Users user = UsersMapper.toUsers(addUsersDto);\n            sessionFactory\n                .withTransaction( (session , tx) -&gt; session.persist(user) )\n                .subscribe().with( event::complete, event::fail )\n        });\n    }\n</code></pre>\n<p>You also don't need to flush because there's a transaction.</p>\n<p><a href=\"https://github.com/hibernate/hibernate-reactive/blob/main/integration-tests/verticle-postgres-it/src/main/java/org/hibernate/reactive/it/verticle/ProductVerticle.java\" rel=\"nofollow noreferrer\">There is a working example on the Hibernate Reactive repository</a></p>\n"}],"owner":{"account_id":13307136,"reputation":11,"user_id":9606559,"display_name":"Bardia Namjoo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":293,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1660060647,"creation_date":1658381971,"question_id":73061187,"body_markdown":"I am going to write an Api with Vert.x web and GraphQL&lt;br/&gt;\r\nI have connected with the database with Hibernate reactive&lt;br/&gt;\r\n\r\n```java\r\n    public void start(final Promise&lt;Void&gt; startPromise)\r\n    {\r\n        try\r\n        {\r\n            vertx.executeBlocking(e -&gt;\r\n            {\r\n                try\r\n                {\r\n                    hibernateConfig();\r\n                    e.complete();\r\n                }\r\n                catch (Exception exception)\r\n                {\r\n                    e.fail(exception.getCause());\r\n                }\r\n\r\n            }).onComplete(event -&gt;\r\n            {\r\n                try\r\n                {\r\n                    runServer(startPromise);\r\n                }\r\n                catch (Exception e)\r\n                {\r\n                    throw new RuntimeException(e);\r\n                }\r\n            }).onFailure(Throwable::printStackTrace);\r\n        }\r\n        catch (Exception e)\r\n        {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    private void runServer(final Promise&lt;Void&gt; startPromise) throws Exception\r\n    {\r\n        final HttpServer httpServer = vertx.createHttpServer();\r\n\r\n        final Router router = Router.router(vertx);\r\n\r\n        router.route().handler(BodyHandler.create());\r\n\r\n        router.post(&quot;/graphql&quot;).handler(super::graphqlHandler);\r\n\r\n        // register `/graphiql` endpoint for the GraphiQL UI\r\n        final GraphiQLHandlerOptions graphiqlOptions = new GraphiQLHandlerOptions().setEnabled(true);\r\n        router.route(&quot;/graphiql/*&quot;).handler(GraphiQLHandler.create(graphiqlOptions));\r\n\r\n        final URL resource = getClass().getResource(&quot;/static&quot;);\r\n\r\n        if (resource != null) router.route(&quot;/static/*&quot;).handler(StaticHandler.create(resource.getFile()));\r\n        else throw new Exception(&quot;Cannot set static&quot;);\r\n\r\n        httpServer.requestHandler(router).listen(PORT , &quot;localhost&quot; , event -&gt;\r\n        {\r\n            if (event.succeeded())\r\n            {\r\n                System.out.printf(&quot;Server run on port %d!\\n&quot; , PORT);\r\n                startPromise.complete();\r\n            }\r\n            else\r\n            {\r\n                System.out.println(&quot;Error run server!&quot;);\r\n                startPromise.fail(event.cause());\r\n            }\r\n        });\r\n    }\r\n\r\n    private void hibernateConfig()\r\n    {\r\n        Uni.createFrom().deferred(Unchecked.supplier(() -&gt;\r\n        {\r\n            final Configuration configuration = new Configuration().setProperties(getHibernateProperties());\r\n\r\n            final Set&lt;Class&lt;?&gt;&gt; entitiesClasses = getEntitiesClasses();\r\n\r\n            if (entitiesClasses != null)\r\n            {\r\n                for (final Class&lt;?&gt; entity : entitiesClasses) configuration.addAnnotatedClass(entity);\r\n            }\r\n            else logger.error(&quot;Cannot found entities&quot;);\r\n\r\n            final StandardServiceRegistryBuilder builder = new ReactiveServiceRegistryBuilder()\r\n                    .addService(Server.class , this)\r\n                    .applySettings(configuration.getProperties());\r\n\r\n            final StandardServiceRegistry registry = builder.build();\r\n\r\n            sessionFactory = configuration.buildSessionFactory(registry).unwrap(Mutiny.SessionFactory.class);\r\n\r\n            if (!sessionFactory.isOpen()) throw new RuntimeException(&quot;Session is close!&quot;);\r\n\r\n            logger.info(&quot;✅ Hibernate Reactive is ready&quot;);\r\n\r\n            return Uni.createFrom().voidItem();\r\n        })).convert().toCompletableFuture().join();\r\n    }\r\n\r\n    private Properties getHibernateProperties()\r\n    {\r\n        final Properties properties = new Properties();\r\n        properties.setProperty(Environment.DRIVER , &quot;org.mysql.jdbc.DRIVER&quot;);\r\n        properties.setProperty(Environment.URL , &quot;jdbc:mysql://localhost:3306/DBNAME&quot;);\r\n        properties.setProperty(Environment.USER , &quot;USENAME&quot;);\r\n        properties.setProperty(Environment.PASS , &quot;PASSWORD&quot;);\r\n        properties.setProperty(Environment.DIALECT , &quot;org.hibernate.dialect.MySQL55Dialect&quot;);\r\n        properties.setProperty(Environment.HBM2DDL_DATABASE_ACTION , &quot;create&quot;);\r\n        properties.setProperty(Environment.SHOW_SQL , &quot;false&quot;);\r\n        properties.setProperty(Environment.POOL_SIZE , &quot;10&quot;);\r\n        return properties;\r\n    }\r\n```\r\n\r\nSo far it doesn&#39;t give any error and creates the entities\r\n\r\n\r\nThe error is given when I want to do an Insert\r\n\r\n```java\r\n    public Future&lt;UsersDto&gt; addUserTest(final DataFetchingEnvironment environment)\r\n    {\r\n        return Future.future(event -&gt;\r\n        {\r\n            final AddUsersDto addUsersDto = Dto.mapped(environment.getArguments() , &quot;user&quot; , AddUsersDto.class);\r\n\r\n            final Users user = UsersMapper.toUsers(addUsersDto);\r\n\r\n            try\r\n            {\r\n                vertx.executeBlocking(e -&gt;\r\n                        {\r\n                            try\r\n                            {\r\n                                sessionFactory.withTransaction(\r\n                                                (session , transaction) -&gt;\r\n                                                        session.persist(user)\r\n                                                                .chain(session::flush)\r\n                                        )\r\n                                        .invoke(() -&gt; e.complete(user))\r\n\r\n                                        .onFailure()\r\n                                        .invoke(e::fail)\r\n\r\n                                        .await()\r\n                                        .indefinitely();\r\n                            }\r\n                            catch (Exception exception)\r\n                            {\r\n                                exception.printStackTrace();\r\n                                e.fail(exception.getCause());\r\n                            }\r\n                        })\r\n                        .onComplete(e -&gt; event.complete(UsersMapper.toUsersDto((Users) e.result())))\r\n                        .onFailure(e -&gt; event.fail(e.getCause()));\r\n            }\r\n            catch (Exception e)\r\n            {\r\n                e.printStackTrace();\r\n                event.complete(UsersDto.builder().build());\r\n            }\r\n        });\r\n    }\r\n```\r\n\r\nError:\r\n```java\r\nsessionFactory.withTransaction(\r\n                (session , transaction) -&gt;\r\n                        session.persist(user)\r\n                                .chain(session::flush)\r\n        )\r\n        .invoke(() -&gt; e.complete(user))\r\n\r\n        .onFailure()\r\n        .invoke(e::fail)\r\n\r\n        .await()\r\n        .indefinitely(); // This line gives an error\r\n```\r\n\r\nError text:\r\n\r\n&gt; java.lang.IllegalStateException: HR000068: This method should exclusively be invoked from a Vert.x EventLoop thread; currently running on thread &#39;vert.x-worker-thread-1&#39;\r\n\r\n\r\nPlease help me if anyone knows the problem\r\n","title":"Vert.x Web , GraphQL , Hibernate Reactive","body":"<p>I am going to write an Api with Vert.x web and GraphQL<br/>\nI have connected with the database with Hibernate reactive<br/></p>\n<pre class=\"lang-java prettyprint-override\"><code>    public void start(final Promise&lt;Void&gt; startPromise)\n    {\n        try\n        {\n            vertx.executeBlocking(e -&gt;\n            {\n                try\n                {\n                    hibernateConfig();\n                    e.complete();\n                }\n                catch (Exception exception)\n                {\n                    e.fail(exception.getCause());\n                }\n\n            }).onComplete(event -&gt;\n            {\n                try\n                {\n                    runServer(startPromise);\n                }\n                catch (Exception e)\n                {\n                    throw new RuntimeException(e);\n                }\n            }).onFailure(Throwable::printStackTrace);\n        }\n        catch (Exception e)\n        {\n            e.printStackTrace();\n        }\n    }\n\n    private void runServer(final Promise&lt;Void&gt; startPromise) throws Exception\n    {\n        final HttpServer httpServer = vertx.createHttpServer();\n\n        final Router router = Router.router(vertx);\n\n        router.route().handler(BodyHandler.create());\n\n        router.post(&quot;/graphql&quot;).handler(super::graphqlHandler);\n\n        // register `/graphiql` endpoint for the GraphiQL UI\n        final GraphiQLHandlerOptions graphiqlOptions = new GraphiQLHandlerOptions().setEnabled(true);\n        router.route(&quot;/graphiql/*&quot;).handler(GraphiQLHandler.create(graphiqlOptions));\n\n        final URL resource = getClass().getResource(&quot;/static&quot;);\n\n        if (resource != null) router.route(&quot;/static/*&quot;).handler(StaticHandler.create(resource.getFile()));\n        else throw new Exception(&quot;Cannot set static&quot;);\n\n        httpServer.requestHandler(router).listen(PORT , &quot;localhost&quot; , event -&gt;\n        {\n            if (event.succeeded())\n            {\n                System.out.printf(&quot;Server run on port %d!\\n&quot; , PORT);\n                startPromise.complete();\n            }\n            else\n            {\n                System.out.println(&quot;Error run server!&quot;);\n                startPromise.fail(event.cause());\n            }\n        });\n    }\n\n    private void hibernateConfig()\n    {\n        Uni.createFrom().deferred(Unchecked.supplier(() -&gt;\n        {\n            final Configuration configuration = new Configuration().setProperties(getHibernateProperties());\n\n            final Set&lt;Class&lt;?&gt;&gt; entitiesClasses = getEntitiesClasses();\n\n            if (entitiesClasses != null)\n            {\n                for (final Class&lt;?&gt; entity : entitiesClasses) configuration.addAnnotatedClass(entity);\n            }\n            else logger.error(&quot;Cannot found entities&quot;);\n\n            final StandardServiceRegistryBuilder builder = new ReactiveServiceRegistryBuilder()\n                    .addService(Server.class , this)\n                    .applySettings(configuration.getProperties());\n\n            final StandardServiceRegistry registry = builder.build();\n\n            sessionFactory = configuration.buildSessionFactory(registry).unwrap(Mutiny.SessionFactory.class);\n\n            if (!sessionFactory.isOpen()) throw new RuntimeException(&quot;Session is close!&quot;);\n\n            logger.info(&quot;✅ Hibernate Reactive is ready&quot;);\n\n            return Uni.createFrom().voidItem();\n        })).convert().toCompletableFuture().join();\n    }\n\n    private Properties getHibernateProperties()\n    {\n        final Properties properties = new Properties();\n        properties.setProperty(Environment.DRIVER , &quot;org.mysql.jdbc.DRIVER&quot;);\n        properties.setProperty(Environment.URL , &quot;jdbc:mysql://localhost:3306/DBNAME&quot;);\n        properties.setProperty(Environment.USER , &quot;USENAME&quot;);\n        properties.setProperty(Environment.PASS , &quot;PASSWORD&quot;);\n        properties.setProperty(Environment.DIALECT , &quot;org.hibernate.dialect.MySQL55Dialect&quot;);\n        properties.setProperty(Environment.HBM2DDL_DATABASE_ACTION , &quot;create&quot;);\n        properties.setProperty(Environment.SHOW_SQL , &quot;false&quot;);\n        properties.setProperty(Environment.POOL_SIZE , &quot;10&quot;);\n        return properties;\n    }\n</code></pre>\n<p>So far it doesn't give any error and creates the entities</p>\n<p>The error is given when I want to do an Insert</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public Future&lt;UsersDto&gt; addUserTest(final DataFetchingEnvironment environment)\n    {\n        return Future.future(event -&gt;\n        {\n            final AddUsersDto addUsersDto = Dto.mapped(environment.getArguments() , &quot;user&quot; , AddUsersDto.class);\n\n            final Users user = UsersMapper.toUsers(addUsersDto);\n\n            try\n            {\n                vertx.executeBlocking(e -&gt;\n                        {\n                            try\n                            {\n                                sessionFactory.withTransaction(\n                                                (session , transaction) -&gt;\n                                                        session.persist(user)\n                                                                .chain(session::flush)\n                                        )\n                                        .invoke(() -&gt; e.complete(user))\n\n                                        .onFailure()\n                                        .invoke(e::fail)\n\n                                        .await()\n                                        .indefinitely();\n                            }\n                            catch (Exception exception)\n                            {\n                                exception.printStackTrace();\n                                e.fail(exception.getCause());\n                            }\n                        })\n                        .onComplete(e -&gt; event.complete(UsersMapper.toUsersDto((Users) e.result())))\n                        .onFailure(e -&gt; event.fail(e.getCause()));\n            }\n            catch (Exception e)\n            {\n                e.printStackTrace();\n                event.complete(UsersDto.builder().build());\n            }\n        });\n    }\n</code></pre>\n<p>Error:</p>\n<pre class=\"lang-java prettyprint-override\"><code>sessionFactory.withTransaction(\n                (session , transaction) -&gt;\n                        session.persist(user)\n                                .chain(session::flush)\n        )\n        .invoke(() -&gt; e.complete(user))\n\n        .onFailure()\n        .invoke(e::fail)\n\n        .await()\n        .indefinitely(); // This line gives an error\n</code></pre>\n<p>Error text:</p>\n<blockquote>\n<p>java.lang.IllegalStateException: HR000068: This method should exclusively be invoked from a Vert.x EventLoop thread; currently running on thread 'vert.x-worker-thread-1'</p>\n</blockquote>\n<p>Please help me if anyone knows the problem</p>\n"},{"tags":["java","amazon-dynamodb"],"comments":[{"owner":{"account_id":16060849,"reputation":2089,"user_id":11591758,"display_name":"lynkfox"},"score":0,"creation_date":1660061223,"post_id":73294466,"comment_id":129441638,"body_markdown":"Is there a particular reason you *have* to just get the one field from the query? Why not instead go ahead and query as normal, then only take the field you need from your data object (i.e. entity.photos) Unless your documents in dynamo are gigantic and you&#39;re tryign to retrieve hundreds at once, there is not a lot of downside of doing it this way. There is much upside, giving you the ability int he future to reference the other attributes without having a new query","body":"Is there a particular reason you <i>have</i> to just get the one field from the query? Why not instead go ahead and query as normal, then only take the field you need from your data object (i.e. entity.photos) Unless your documents in dynamo are gigantic and you&#39;re tryign to retrieve hundreds at once, there is not a lot of downside of doing it this way. There is much upside, giving you the ability int he future to reference the other attributes without having a new query"},{"owner":{"account_id":2704985,"reputation":1156,"user_id":2334771,"accept_rate":82,"display_name":"Arthur"},"score":0,"creation_date":1660078758,"post_id":73294466,"comment_id":129447118,"body_markdown":"@lynkfox entity contains many fields, so it needed to skip other data. Photos list usually has only several items.","body":"@lynkfox entity contains many fields, so it needed to skip other data. Photos list usually has only several items."}],"owner":{"account_id":2704985,"reputation":1156,"user_id":2334771,"accept_rate":82,"display_name":"Arthur"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660060255,"creation_date":1660059241,"question_id":73294466,"body_markdown":"I have such query\r\n```\r\n        var primaryKeyCondition = new Condition()\r\n                .withComparisonOperator(EQ.toString())\r\n                .withAttributeValueList(new AttributeValue().withS(pk));\r\n        var sortingKeyCondition = new Condition()\r\n                .withComparisonOperator(EQ.toString())\r\n                .withAttributeValueList(new AttributeValue().withS(sk));\r\n\r\n        var keyConditions = new HashMap&lt;String, Condition&gt;();\r\n        keyConditions.put(&quot;pk&quot;, primaryKeyCondition);\r\n        keyConditions.put(&quot;sk&quot;, sortingKeyCondition);\r\n\r\n        QueryRequest queryRequest = new QueryRequest().withTableName(tableName)\r\n                .withKeyConditions(keyConditions)\r\n                .withProjectionExpression(&quot;photos&quot;);\r\n\r\n        return client.query(queryRequest);\r\n```\r\nand Entity\r\n```\r\npublic class Entity {\r\n    @Id\r\n    private PkSkPair dynamoId;\r\n    private String pk;\r\n    @DynamoDBIndexHashKey(globalSecondaryIndexName = &quot;gsi.bySk&quot;)\r\n    private String sk;\r\n    private String blaBla;\r\n    private List&lt;String&gt; photos;\r\n}\r\n\r\npublic class PkSkPair implements Serializable {\r\n    private String pk;\r\n    private String sk;\r\n\r\n    @DynamoDBHashKey(attributeName = &quot;PK&quot;)\r\n    public String getPk() {\r\n        return pk;\r\n    }\r\n\r\n    @DynamoDBRangeKey(attributeName = &quot;SK&quot;)\r\n    public String getSk() {\r\n        return sk;\r\n    }\r\n}\r\n```\r\nit fails with\r\n```\r\ncom.amazonaws.AmazonServiceException: Unable to unmarshall exception response with the unmarshallers provided (Service: AmazonDynamoDBv2; Status Code: 400; Error Code: ValidationException; Request ID: 3e1020d3-2f9b-4fff-82e2-d10cdd35a5d3)\r\n\tat com.amazonaws.http.AmazonHttpClient$RequestExecutor.handleErrorResponse(AmazonHttpClient.java:1712)\r\n\tat com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeOneRequest(AmazonHttpClient.java:1367)\r\n\tat com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeHelper(AmazonHttpClient.java:1113)\r\n\tat com.amazonaws.http.AmazonHttpClient$RequestExecutor.doExecute(AmazonHttpClient.java:770)\r\n\tat com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeWithTimer(AmazonHttpClient.java:744)\r\n\tat com.amazonaws.http.AmazonHttpClient$RequestExecutor.execute(AmazonHttpClient.java:726)\r\n\tat com.amazonaws.http.AmazonHttpClient$RequestExecutor.access$500(AmazonHttpClient.java:686)\r\n\tat com.amazonaws.http.AmazonHttpClient$RequestExecutionBuilderImpl.execute(AmazonHttpClient.java:668)\r\n\tat com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:532)\r\n\tat com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:512)\r\n\tat com.amazonaws.services.dynamodbv2.AmazonDynamoDBClient.doInvoke(AmazonDynamoDBClient.java:4805)\r\n\tat com.amazonaws.services.dynamodbv2.AmazonDynamoDBClient.invoke(AmazonDynamoDBClient.java:4772)\r\n\tat com.amazonaws.services.dynamodbv2.AmazonDynamoDBClient.executeQuery(AmazonDynamoDBClient.java:2641)\r\n\tat com.amazonaws.services.dynamodbv2.AmazonDynamoDBClient.query(AmazonDynamoDBClient.java:2607)\r\n\tat com.transportexchangegroup.projection.vehicle.mobile.repository.VehicleCustomRepository.findByPkAndSk(VehicleCustomRepository.java:46)\r\n\tat com.transportexchangegroup.projection.vehicle.mobile.service.VehicleService.getPhotos(VehicleService.java:105)\r\n\tat com.transportexchangegroup.projection.vehicle.mobile.api.CommandController.performGetVehiclePhotosCommand(CommandController.java:120)\r\n\tat com.transportexchangegroup.projection.vehicle.mobile.api.CommandController.performCommand(CommandController.java:62)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\r\n...\r\n```\r\nHow to fix this and how to?\r\n","title":"Hot to fetch only one field using Java DdynamoDB SDK?","body":"<p>I have such query</p>\n<pre><code>        var primaryKeyCondition = new Condition()\n                .withComparisonOperator(EQ.toString())\n                .withAttributeValueList(new AttributeValue().withS(pk));\n        var sortingKeyCondition = new Condition()\n                .withComparisonOperator(EQ.toString())\n                .withAttributeValueList(new AttributeValue().withS(sk));\n\n        var keyConditions = new HashMap&lt;String, Condition&gt;();\n        keyConditions.put(&quot;pk&quot;, primaryKeyCondition);\n        keyConditions.put(&quot;sk&quot;, sortingKeyCondition);\n\n        QueryRequest queryRequest = new QueryRequest().withTableName(tableName)\n                .withKeyConditions(keyConditions)\n                .withProjectionExpression(&quot;photos&quot;);\n\n        return client.query(queryRequest);\n</code></pre>\n<p>and Entity</p>\n<pre><code>public class Entity {\n    @Id\n    private PkSkPair dynamoId;\n    private String pk;\n    @DynamoDBIndexHashKey(globalSecondaryIndexName = &quot;gsi.bySk&quot;)\n    private String sk;\n    private String blaBla;\n    private List&lt;String&gt; photos;\n}\n\npublic class PkSkPair implements Serializable {\n    private String pk;\n    private String sk;\n\n    @DynamoDBHashKey(attributeName = &quot;PK&quot;)\n    public String getPk() {\n        return pk;\n    }\n\n    @DynamoDBRangeKey(attributeName = &quot;SK&quot;)\n    public String getSk() {\n        return sk;\n    }\n}\n</code></pre>\n<p>it fails with</p>\n<pre><code>com.amazonaws.AmazonServiceException: Unable to unmarshall exception response with the unmarshallers provided (Service: AmazonDynamoDBv2; Status Code: 400; Error Code: ValidationException; Request ID: 3e1020d3-2f9b-4fff-82e2-d10cdd35a5d3)\n    at com.amazonaws.http.AmazonHttpClient$RequestExecutor.handleErrorResponse(AmazonHttpClient.java:1712)\n    at com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeOneRequest(AmazonHttpClient.java:1367)\n    at com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeHelper(AmazonHttpClient.java:1113)\n    at com.amazonaws.http.AmazonHttpClient$RequestExecutor.doExecute(AmazonHttpClient.java:770)\n    at com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeWithTimer(AmazonHttpClient.java:744)\n    at com.amazonaws.http.AmazonHttpClient$RequestExecutor.execute(AmazonHttpClient.java:726)\n    at com.amazonaws.http.AmazonHttpClient$RequestExecutor.access$500(AmazonHttpClient.java:686)\n    at com.amazonaws.http.AmazonHttpClient$RequestExecutionBuilderImpl.execute(AmazonHttpClient.java:668)\n    at com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:532)\n    at com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:512)\n    at com.amazonaws.services.dynamodbv2.AmazonDynamoDBClient.doInvoke(AmazonDynamoDBClient.java:4805)\n    at com.amazonaws.services.dynamodbv2.AmazonDynamoDBClient.invoke(AmazonDynamoDBClient.java:4772)\n    at com.amazonaws.services.dynamodbv2.AmazonDynamoDBClient.executeQuery(AmazonDynamoDBClient.java:2641)\n    at com.amazonaws.services.dynamodbv2.AmazonDynamoDBClient.query(AmazonDynamoDBClient.java:2607)\n    at com.transportexchangegroup.projection.vehicle.mobile.repository.VehicleCustomRepository.findByPkAndSk(VehicleCustomRepository.java:46)\n    at com.transportexchangegroup.projection.vehicle.mobile.service.VehicleService.getPhotos(VehicleService.java:105)\n    at com.transportexchangegroup.projection.vehicle.mobile.api.CommandController.performGetVehiclePhotosCommand(CommandController.java:120)\n    at com.transportexchangegroup.projection.vehicle.mobile.api.CommandController.performCommand(CommandController.java:62)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\n...\n</code></pre>\n<p>How to fix this and how to?</p>\n"},{"tags":["java","android","brightness"],"comments":[{"owner":{"account_id":1041463,"reputation":3845,"user_id":1047418,"display_name":"Torben"},"score":0,"creation_date":1659526850,"post_id":73220966,"comment_id":129314933,"body_markdown":"Did you search the web for &quot;android screen_brightness logarithmic&quot;? I found a web page describing exactly what you are looking for with code and all.","body":"Did you search the web for &quot;android screen_brightness logarithmic&quot;? I found a web page describing exactly what you are looking for with code and all."},{"owner":{"account_id":3395647,"reputation":8918,"user_id":2849346,"accept_rate":50,"display_name":"MWiesner"},"score":2,"creation_date":1659527438,"post_id":73220966,"comment_id":129315135,"body_markdown":"Explanation and interesting lookup table approach is found here: https://tunjid.medium.com/reverse-engineering-android-pies-logarithmic-brightness-curve-ecd41739d7a2","body":"Explanation and interesting lookup table approach is found here: <a href=\"https://tunjid.medium.com/reverse-engineering-android-pies-logarithmic-brightness-curve-ecd41739d7a2\" rel=\"nofollow noreferrer\">tunjid.medium.com/&hellip;</a>"},{"owner":{"account_id":22340479,"reputation":61,"user_id":16560324,"display_name":"Roshan Sreekanth"},"score":0,"creation_date":1659528652,"post_id":73220966,"comment_id":129315572,"body_markdown":"The method used in the website relies on a brightness slider in the app, however I want to get the brightness value directly from the settings","body":"The method used in the website relies on a brightness slider in the app, however I want to get the brightness value directly from the settings"}],"answers":[{"tags":[],"owner":{"account_id":22340479,"reputation":61,"user_id":16560324,"display_name":"Roshan Sreekanth"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1660060054,"creation_date":1660060054,"answer_id":73294652,"question_id":73220966,"body_markdown":"I have found an approximate solution. Unfortunately, there is no direct way to get access to the linear brightness values through an API in Android. \r\n\r\nHowever, there is a way to approximate it. Note that this issue occurs on devices past Android 9 using a logarithmic brightness curve (Pixel devices for example).\r\n\r\nTo get the approximate brightness value:\r\n\r\n 1. Get the brightness with \r\n&gt; android.provider.Settings.System.getFloat(context.getContentResolver().SCREEN_BRIGHTNESS)\r\n\r\n2. Copy the [Mathutils file][1] used in the android source code into your project directory\r\n\r\n3. Copy the convertLinearToGammaFloat() function found in AOSP source code [here][2] into your class and pass the parameters into it. **val** will be the brightness value you got from the first step, **min** will be 0.0f, **max** will be 255.0f (in case of Pixel devices).\r\n\r\n4. Copy the getPercentage() function from AOSP source code [here][3]. Pass in the value got from convertLinearToGammaFLoat() into **value**.**min** and **max** will be the **GAMMA_SPACE_MIN** and **GAMMA_SPACE_MAX** variables found   [here][4]\r\n\r\nThe value received from getPercentage() will be the approximate brightness percentage value. There is around 3% margin of error for this which you can account for by subtracting it from the total brightness if it is within a certain range.\r\n\r\n  [1]: https://cs.android.com/android/platform/superproject/+/master:frameworks/base/core/java/android/util/MathUtils.java;drc=dc7efaec81b564f1b0fbabca25ca694755986db6;l=27\r\n  [2]: https://cs.android.com/android/platform/superproject/+/master:frameworks/base/packages/SettingsLib/src/com/android/settingslib/display/BrightnessUtils.java;l=129?q=convertLinearToGammaFloat&amp;sq=\r\n  [3]: https://cs.android.com/android/platform/superproject/+/master:packages/apps/Settings/src/com/android/settings/display/BrightnessLevelPreferenceController.java;bpv=1;bpt=1?q=Brightness%20getPercentage()&amp;ss=android%2Fplatform%2Fsuperproject\r\n  [4]: https://cs.android.com/android/platform/superproject/+/master:frameworks/base/packages/SettingsLib/src/com/android/settingslib/display/BrightnessUtils.java;drc=dc7efaec81b564f1b0fbabca25ca694755986db6;bpv=1;bpt=1;l=24","title":"How to get the brightness percentage in Android?","body":"<p>I have found an approximate solution. Unfortunately, there is no direct way to get access to the linear brightness values through an API in Android.</p>\n<p>However, there is a way to approximate it. Note that this issue occurs on devices past Android 9 using a logarithmic brightness curve (Pixel devices for example).</p>\n<p>To get the approximate brightness value:</p>\n<ol>\n<li>Get the brightness with</li>\n</ol>\n<blockquote>\n<p>android.provider.Settings.System.getFloat(context.getContentResolver().SCREEN_BRIGHTNESS)</p>\n</blockquote>\n<ol start=\"2\">\n<li><p>Copy the <a href=\"https://cs.android.com/android/platform/superproject/+/master:frameworks/base/core/java/android/util/MathUtils.java;drc=dc7efaec81b564f1b0fbabca25ca694755986db6;l=27\" rel=\"nofollow noreferrer\">Mathutils file</a> used in the android source code into your project directory</p>\n</li>\n<li><p>Copy the convertLinearToGammaFloat() function found in AOSP source code <a href=\"https://cs.android.com/android/platform/superproject/+/master:frameworks/base/packages/SettingsLib/src/com/android/settingslib/display/BrightnessUtils.java;l=129?q=convertLinearToGammaFloat&amp;sq=\" rel=\"nofollow noreferrer\">here</a> into your class and pass the parameters into it. <strong>val</strong> will be the brightness value you got from the first step, <strong>min</strong> will be 0.0f, <strong>max</strong> will be 255.0f (in case of Pixel devices).</p>\n</li>\n<li><p>Copy the getPercentage() function from AOSP source code <a href=\"https://cs.android.com/android/platform/superproject/+/master:packages/apps/Settings/src/com/android/settings/display/BrightnessLevelPreferenceController.java;bpv=1;bpt=1?q=Brightness%20getPercentage()&amp;ss=android%2Fplatform%2Fsuperproject\" rel=\"nofollow noreferrer\">here</a>. Pass in the value got from convertLinearToGammaFLoat() into <strong>value</strong>.<strong>min</strong> and <strong>max</strong> will be the <strong>GAMMA_SPACE_MIN</strong> and <strong>GAMMA_SPACE_MAX</strong> variables found   <a href=\"https://cs.android.com/android/platform/superproject/+/master:frameworks/base/packages/SettingsLib/src/com/android/settingslib/display/BrightnessUtils.java;drc=dc7efaec81b564f1b0fbabca25ca694755986db6;bpv=1;bpt=1;l=24\" rel=\"nofollow noreferrer\">here</a></p>\n</li>\n</ol>\n<p>The value received from getPercentage() will be the approximate brightness percentage value. There is around 3% margin of error for this which you can account for by subtracting it from the total brightness if it is within a certain range.</p>\n"}],"owner":{"account_id":22340479,"reputation":61,"user_id":16560324,"display_name":"Roshan Sreekanth"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1165,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1660060054,"creation_date":1659526227,"question_id":73220966,"body_markdown":"I am trying to get the brightness value from Android (12) and converting it to percentage using\r\n\r\n    android.provider.Settings.System.getInt(context.getContentResolver().SCREEN_BRIGHTNESS)\r\n\r\nNow, when brightness is at 0% brightness value is at 1.0 and at 100% brightness value is at 255.0. However, when the brightness is at 50%, the value returned is 22.0. This makes me think the brightness value is logarithmic.\r\n\r\nIs there a method to convert this or get this value as percentage?","title":"How to get the brightness percentage in Android?","body":"<p>I am trying to get the brightness value from Android (12) and converting it to percentage using</p>\n<pre><code>android.provider.Settings.System.getInt(context.getContentResolver().SCREEN_BRIGHTNESS)\n</code></pre>\n<p>Now, when brightness is at 0% brightness value is at 1.0 and at 100% brightness value is at 255.0. However, when the brightness is at 50%, the value returned is 22.0. This makes me think the brightness value is logarithmic.</p>\n<p>Is there a method to convert this or get this value as percentage?</p>\n"},{"tags":["java","annotations","annotation-processing"],"comments":[{"owner":{"account_id":58050,"reputation":7570,"user_id":173852,"display_name":"mernst"},"score":0,"creation_date":1660060180,"post_id":73294594,"comment_id":129441229,"body_markdown":"`TypeElement` is an interface, so you can create a mock implementation.","body":"<code>TypeElement</code> is an interface, so you can create a mock implementation."},{"owner":{"account_id":6011679,"reputation":2795,"user_id":4721937,"accept_rate":45,"display_name":"warownia1"},"score":0,"creation_date":1660127768,"post_id":73294594,"comment_id":129457857,"body_markdown":"I could, but those elements represent quite complex structure of the source code and implementing all of that correctly in a mock would be difficult and error prone. I&#39;d rather re-use existing java compiler to do that for me properly.","body":"I could, but those elements represent quite complex structure of the source code and implementing all of that correctly in a mock would be difficult and error prone. I&#39;d rather re-use existing java compiler to do that for me properly."}],"owner":{"account_id":6011679,"reputation":2795,"user_id":4721937,"accept_rate":45,"display_name":"warownia1"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660059813,"creation_date":1660059813,"question_id":73294594,"body_markdown":"In my project, I have a few classes that operate on objects from the `java.compiler` module such as `TypeMirror`s and `Element`s. Typically, these classes are used by an annotation processor that has access to `ProcessingEnvironment` for fetching code `Element`s, but I&#39;d like to be able to test those classes in isolation too. How can I obtain e.g. a `TypeElement` compiled from a mock java source file inside my test framework?\r\n\r\nI&#39;m aware that a similar question was asked here: https://stackoverflow.com/questions/27554658/how-to-instantiate-a-typemirror, but the accepted answer doesn&#39;t meet my needs.","title":"Instantiating `TypeElement`s outside the processor context for unit testing","body":"<p>In my project, I have a few classes that operate on objects from the <code>java.compiler</code> module such as <code>TypeMirror</code>s and <code>Element</code>s. Typically, these classes are used by an annotation processor that has access to <code>ProcessingEnvironment</code> for fetching code <code>Element</code>s, but I'd like to be able to test those classes in isolation too. How can I obtain e.g. a <code>TypeElement</code> compiled from a mock java source file inside my test framework?</p>\n<p>I'm aware that a similar question was asked here: <a href=\"https://stackoverflow.com/questions/27554658/how-to-instantiate-a-typemirror\">How to instantiate a TypeMirror</a>, but the accepted answer doesn't meet my needs.</p>\n"},{"tags":["java","project-loom","java-19"],"comments":[{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":3,"creation_date":1659576117,"post_id":73229247,"comment_id":129329422,"body_markdown":"Guess: Perhaps you need a `module-info.java` file containing a `requires` line as discussed [here](https://stackoverflow.com/a/72072054/642706).","body":"Guess: Perhaps you need a <code>module-info.java</code> file containing a <code>requires</code> line as discussed <a href=\"https://stackoverflow.com/a/72072054/642706\">here</a>."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":3,"creation_date":1659590164,"post_id":73229247,"comment_id":129331454,"body_markdown":"See [JEP 11: Incubator Modules](https://openjdk.org/jeps/11): &quot;_Applications on the class path must use the --add-modules command-line option to request that an incubator module be resolved. Applications developed as modules can specify requires or requires transitive dependences upon an incubator module directly_&quot;. So, you need either include an `--add-modules` argument or have a `requires` directive, but not both. Can you get this working on the command line (i.e., with `javac` and `java`)? Perhaps Maven is not doing what you expect.","body":"See <a href=\"https://openjdk.org/jeps/11\" rel=\"nofollow noreferrer\">JEP 11: Incubator Modules</a>: &quot;<i>Applications on the class path must use the --add-modules command-line option to request that an incubator module be resolved. Applications developed as modules can specify requires or requires transitive dependences upon an incubator module directly</i>&quot;. So, you need either include an <code>--add-modules</code> argument or have a <code>requires</code> directive, but not both. Can you get this working on the command line (i.e., with <code>javac</code> and <code>java</code>)? Perhaps Maven is not doing what you expect."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1659590682,"post_id":73229247,"comment_id":129331559,"body_markdown":"What if you change it to `--add-modules=jdk.incubator.concurrent` (with the `=` present) in your POM file?","body":"What if you change it to <code>--add-modules=jdk.incubator.concurrent</code> (with the <code>=</code> present) in your POM file?"},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1659600372,"post_id":73229247,"comment_id":129334284,"body_markdown":"Note that the module needs to be present at both compile-time and runtime.","body":"Note that the module needs to be present at both compile-time and runtime."}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1660059787,"creation_date":1659841757,"answer_id":73264624,"question_id":73229247,"body_markdown":"# `module-info.java` file\r\n\r\nI do not understand all the moving parts, but I did succeed somehow in accessing the new [*Project Loom*][1] features, [virtual threads][2] &amp; [structured concurrency][3], being [previewed][4] and [incubated][5] respectively in Java 19.\r\n\r\nHere is my `main` method.\r\n\r\n```java\r\nrecord Event( UUID id , Instant when , Integer reading ) {}\r\n\r\ntry ( var scope = new StructuredTaskScope.ShutdownOnFailure() )\r\n{\r\n    Future &lt; UUID &gt; futureId = scope.fork( ( ) -&gt; UUID.randomUUID() );\r\n    Future &lt; Instant &gt; futureWhen = scope.fork( ( ) -&gt; Instant.now() );\r\n    Future &lt; Integer &gt; futureReading = scope.fork( ( ) -&gt; ThreadLocalRandom.current().nextInt( 1 , 10 ) );\r\n\r\n    scope.join();           // Join both forks\r\n    scope.throwIfFailed();  // ... and propagate errors\r\n    Event event = new Event( futureId.get() , futureWhen.get() , futureReading.get() );\r\n    System.out.println( event );\r\n}\r\ncatch ( InterruptedException e )\r\n{\r\n    throw new RuntimeException( e );\r\n}\r\ncatch ( ExecutionException e )\r\n{\r\n    throw new RuntimeException( e );\r\n}\r\n```\r\n\r\nThat code uses these imports:\r\n\r\n```java\r\nimport java.time.Instant;\r\nimport java.util.UUID;\r\nimport java.util.concurrent.ExecutionException;\r\nimport java.util.concurrent.Future;\r\nimport java.util.concurrent.ThreadLocalRandom;\r\n```\r\n\r\nWhen run:\r\n\r\n&gt;Event[id=de316aca-10b1-41ed-bfc6-732c4e184566, when=2022-08-07T03:04:48.207650Z, reading=9]\r\n\r\nI added a `module-info.java` file outside my package hierarchy, at `src/main/java`. \r\n\r\n```java\r\nmodule LoomEx {\r\n    requires jdk.incubator.concurrent;\r\n}\r\n```\r\n\r\nAnd my `POM`. I started with the [*Apache Maven QuickStart*][6] archetype at [listed][7]. Then I updated all the version numbers to the latest.\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;project xmlns = &quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi = &quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation = &quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;work.basil.example&lt;/groupId&gt;\r\n    &lt;artifactId&gt;Loom&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n    &lt;name&gt;Loom&lt;/name&gt;\r\n    &lt;!-- FIXME change it to the project&#39;s website --&gt;\r\n    &lt;url&gt;http://www.example.com&lt;/url&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;maven.compiler.release&gt;19&lt;/maven.compiler.release&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n\r\n        &lt;!-- https://mvnrepository.com/artifact/org.junit.jupiter/junit-jupiter --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\r\n            &lt;version&gt;5.9.0&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;pluginManagement&gt;&lt;!-- lock down plugins versions to avoid using Maven defaults (maybe moved to parent pom) --&gt;\r\n            &lt;plugins&gt;\r\n                &lt;!-- clean lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#clean_Lifecycle --&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.2.0&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;!-- default lifecycle, jar packaging: see https://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_jar_packaging --&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.3.0&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.10.1&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;!--&lt;compilerVersion&gt;19&lt;/compilerVersion&gt;--&gt;\r\n                        &lt;release&gt;19&lt;/release&gt;\r\n                        &lt;!--&lt;compilerArgs&gt;&amp;#45;&amp;#45;source 19&lt;/compilerArgs&gt;--&gt;\r\n                        &lt;compilerArgs&gt;--enable-preview&lt;/compilerArgs&gt;\r\n                        &lt;!--&lt;compilerArgs&gt;&amp;#45;&amp;#45;add-modules jdk.incubator.concurrent&lt;/compilerArgs&gt;--&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.0.0-M7&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.2.2&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.0.1&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.0.0&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;!-- site lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#site_Lifecycle --&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;4.0.0-M3&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.4.0&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/pluginManagement&gt;\r\n    &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nI tried using various Maven POM elements taken from pages such as [this][8] and [this][9] and [this][10], and hints from [*JEP 11: Incubator Modules*][5] and [*JEP 428: Structured Concurrency (Incubator)*][3], hoping to not need the `module-info.java` file. But I could not make it work. Adding the module info file was the only route to success for me.\r\n\r\nAnd of course I had to set the usual multiple oddball settings that IntelliJ buries deep within various disparate places to specify use of Java 19. See other Stack Overflow Questions for directions on these troublesome settings. (Drives me batty. Definitely the most annoying problem/flaw in IntelliJ. Why can&#39;t IntelliJ just read the Java version from the Maven POM or Gradle settings and be done with it?)\r\n\r\n\r\n  [1]: https://wiki.openjdk.org/display/loom/Main\r\n  [2]: https://openjdk.org/jeps/425\r\n  [3]: https://openjdk.org/jeps/428\r\n  [4]: https://openjdk.org/jeps/12\r\n  [5]: https://openjdk.org/jeps/11\r\n  [6]: https://maven.apache.org/archetypes/maven-archetype-quickstart/\r\n  [7]: https://mvnrepository.com/artifact/org.apache.maven.archetypes/maven-archetype-quickstart\r\n  [8]: https://stackoverflow.com/q/52232681/642706\r\n  [9]: https://stackoverflow.com/q/58023240/642706\r\n  [10]: https://stackoverflow.com/q/65861700/642706","title":"How can I run JDK 19 with Structured Concurrency?","body":"<h1><code>module-info.java</code> file</h1>\n<p>I do not understand all the moving parts, but I did succeed somehow in accessing the new <a href=\"https://wiki.openjdk.org/display/loom/Main\" rel=\"nofollow noreferrer\"><em>Project Loom</em></a> features, <a href=\"https://openjdk.org/jeps/425\" rel=\"nofollow noreferrer\">virtual threads</a> &amp; <a href=\"https://openjdk.org/jeps/428\" rel=\"nofollow noreferrer\">structured concurrency</a>, being <a href=\"https://openjdk.org/jeps/12\" rel=\"nofollow noreferrer\">previewed</a> and <a href=\"https://openjdk.org/jeps/11\" rel=\"nofollow noreferrer\">incubated</a> respectively in Java 19.</p>\n<p>Here is my <code>main</code> method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>record Event( UUID id , Instant when , Integer reading ) {}\n\ntry ( var scope = new StructuredTaskScope.ShutdownOnFailure() )\n{\n    Future &lt; UUID &gt; futureId = scope.fork( ( ) -&gt; UUID.randomUUID() );\n    Future &lt; Instant &gt; futureWhen = scope.fork( ( ) -&gt; Instant.now() );\n    Future &lt; Integer &gt; futureReading = scope.fork( ( ) -&gt; ThreadLocalRandom.current().nextInt( 1 , 10 ) );\n\n    scope.join();           // Join both forks\n    scope.throwIfFailed();  // ... and propagate errors\n    Event event = new Event( futureId.get() , futureWhen.get() , futureReading.get() );\n    System.out.println( event );\n}\ncatch ( InterruptedException e )\n{\n    throw new RuntimeException( e );\n}\ncatch ( ExecutionException e )\n{\n    throw new RuntimeException( e );\n}\n</code></pre>\n<p>That code uses these imports:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.time.Instant;\nimport java.util.UUID;\nimport java.util.concurrent.ExecutionException;\nimport java.util.concurrent.Future;\nimport java.util.concurrent.ThreadLocalRandom;\n</code></pre>\n<p>When run:</p>\n<blockquote>\n<p>Event[id=de316aca-10b1-41ed-bfc6-732c4e184566, when=2022-08-07T03:04:48.207650Z, reading=9]</p>\n</blockquote>\n<p>I added a <code>module-info.java</code> file outside my package hierarchy, at <code>src/main/java</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>module LoomEx {\n    requires jdk.incubator.concurrent;\n}\n</code></pre>\n<p>And my <code>POM</code>. I started with the <a href=\"https://maven.apache.org/archetypes/maven-archetype-quickstart/\" rel=\"nofollow noreferrer\"><em>Apache Maven QuickStart</em></a> archetype at <a href=\"https://mvnrepository.com/artifact/org.apache.maven.archetypes/maven-archetype-quickstart\" rel=\"nofollow noreferrer\">listed</a>. Then I updated all the version numbers to the latest.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;project xmlns = &quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi = &quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation = &quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;work.basil.example&lt;/groupId&gt;\n    &lt;artifactId&gt;Loom&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n    &lt;name&gt;Loom&lt;/name&gt;\n    &lt;!-- FIXME change it to the project's website --&gt;\n    &lt;url&gt;http://www.example.com&lt;/url&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;maven.compiler.release&gt;19&lt;/maven.compiler.release&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/org.junit.jupiter/junit-jupiter --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\n            &lt;version&gt;5.9.0&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;pluginManagement&gt;&lt;!-- lock down plugins versions to avoid using Maven defaults (maybe moved to parent pom) --&gt;\n            &lt;plugins&gt;\n                &lt;!-- clean lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#clean_Lifecycle --&gt;\n                &lt;plugin&gt;\n                    &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.2.0&lt;/version&gt;\n                &lt;/plugin&gt;\n                &lt;!-- default lifecycle, jar packaging: see https://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_jar_packaging --&gt;\n                &lt;plugin&gt;\n                    &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.3.0&lt;/version&gt;\n                &lt;/plugin&gt;\n                &lt;plugin&gt;\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.10.1&lt;/version&gt;\n                    &lt;configuration&gt;\n                        &lt;!--&lt;compilerVersion&gt;19&lt;/compilerVersion&gt;--&gt;\n                        &lt;release&gt;19&lt;/release&gt;\n                        &lt;!--&lt;compilerArgs&gt;&amp;#45;&amp;#45;source 19&lt;/compilerArgs&gt;--&gt;\n                        &lt;compilerArgs&gt;--enable-preview&lt;/compilerArgs&gt;\n                        &lt;!--&lt;compilerArgs&gt;&amp;#45;&amp;#45;add-modules jdk.incubator.concurrent&lt;/compilerArgs&gt;--&gt;\n                    &lt;/configuration&gt;\n                &lt;/plugin&gt;\n                &lt;plugin&gt;\n                    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.0.0-M7&lt;/version&gt;\n                &lt;/plugin&gt;\n                &lt;plugin&gt;\n                    &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.2.2&lt;/version&gt;\n                &lt;/plugin&gt;\n                &lt;plugin&gt;\n                    &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.0.1&lt;/version&gt;\n                &lt;/plugin&gt;\n                &lt;plugin&gt;\n                    &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.0.0&lt;/version&gt;\n                &lt;/plugin&gt;\n                &lt;!-- site lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#site_Lifecycle --&gt;\n                &lt;plugin&gt;\n                    &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;4.0.0-M3&lt;/version&gt;\n                &lt;/plugin&gt;\n                &lt;plugin&gt;\n                    &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.4.0&lt;/version&gt;\n                &lt;/plugin&gt;\n            &lt;/plugins&gt;\n        &lt;/pluginManagement&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>I tried using various Maven POM elements taken from pages such as <a href=\"https://stackoverflow.com/q/52232681/642706\">this</a> and <a href=\"https://stackoverflow.com/q/58023240/642706\">this</a> and <a href=\"https://stackoverflow.com/q/65861700/642706\">this</a>, and hints from <a href=\"https://openjdk.org/jeps/11\" rel=\"nofollow noreferrer\"><em>JEP 11: Incubator Modules</em></a> and <a href=\"https://openjdk.org/jeps/428\" rel=\"nofollow noreferrer\"><em>JEP 428: Structured Concurrency (Incubator)</em></a>, hoping to not need the <code>module-info.java</code> file. But I could not make it work. Adding the module info file was the only route to success for me.</p>\n<p>And of course I had to set the usual multiple oddball settings that IntelliJ buries deep within various disparate places to specify use of Java 19. See other Stack Overflow Questions for directions on these troublesome settings. (Drives me batty. Definitely the most annoying problem/flaw in IntelliJ. Why can't IntelliJ just read the Java version from the Maven POM or Gradle settings and be done with it?)</p>\n"},{"tags":[],"owner":{"account_id":5998820,"reputation":12666,"user_id":4712734,"display_name":"DuncG"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1659866380,"creation_date":1659864864,"answer_id":73266351,"question_id":73229247,"body_markdown":"A small addition for @BasilBourque excellent answer. For those people that may not use Maven or modules you won&#39;t need to make your application a module. The parameters for `--enable-preview --add-modules jdk.incubator.concurrent` are required in all launchers, whether directly or via Maven.\r\n\r\nYou should be able to run the concurrency example he has provided from command line with standard classpath and no module-info.java with the following source code launcher or javac/java:\r\n\r\n    %JAVAHOME%/bin/java --source 19 --enable-preview --add-modules jdk.incubator.concurrent ConcurrencyEx.java\r\n\r\nOr compile then run it as:\r\n\r\n    %JAVAHOME%/bin/javac --source 19 --enable-preview --add-modules jdk.incubator.concurrent -d ../build ConcurrencyEx.java\r\n\r\n    %JAVAHOME%/bin/java --enable-preview --add-modules jdk.incubator.concurrent -cp ../build ConcurrencyEx\r\n\r\nObviously just substitute `%JAVAHOME%` with `$JAVAHOME` to run on Linux instead of Windows.\r\n\r\nSource code:\r\n\r\n\timport java.util.UUID;\r\n\timport java.util.concurrent.ExecutionException;\r\n\timport java.util.concurrent.Future;\r\n\timport java.util.concurrent.ThreadLocalRandom;\r\n\timport jdk.incubator.concurrent.*;\r\n\r\n\tpublic class ConcurrencyEx {\r\n\t\t\r\n        // main as from @BasilBourque answer\r\n\t\tpublic static void main(String[] args) throws InterruptedException, ExecutionException {\r\n\t\t\trecord Event( UUID id , Instant when , Integer reading ) {}\r\n\r\n\t\t\ttry ( var scope = new StructuredTaskScope.ShutdownOnFailure() ) {\r\n\t\t\t\tFuture &lt; UUID &gt; futureId = scope.fork( ( ) -&gt; UUID.randomUUID() );\r\n\t\t\t\tFuture &lt; Instant &gt; futureWhen = scope.fork( ( ) -&gt; Instant.now() );\r\n\t\t\t\tFuture &lt; Integer &gt; futureReading = scope.fork( ( ) -&gt; ThreadLocalRandom.current().nextInt( 1 , 10 ) );\r\n\r\n\t\t\t\tscope.join();           // Join both forks\r\n\t\t\t\tscope.throwIfFailed();  // ... and propagate errors\r\n\t\t\t\tEvent event = new Event( futureId.get() , futureWhen.get() , futureReading.get() );\r\n\t\t\t\tSystem.out.println( event );\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n","title":"How can I run JDK 19 with Structured Concurrency?","body":"<p>A small addition for @BasilBourque excellent answer. For those people that may not use Maven or modules you won't need to make your application a module. The parameters for <code>--enable-preview --add-modules jdk.incubator.concurrent</code> are required in all launchers, whether directly or via Maven.</p>\n<p>You should be able to run the concurrency example he has provided from command line with standard classpath and no module-info.java with the following source code launcher or javac/java:</p>\n<pre><code>%JAVAHOME%/bin/java --source 19 --enable-preview --add-modules jdk.incubator.concurrent ConcurrencyEx.java\n</code></pre>\n<p>Or compile then run it as:</p>\n<pre><code>%JAVAHOME%/bin/javac --source 19 --enable-preview --add-modules jdk.incubator.concurrent -d ../build ConcurrencyEx.java\n\n%JAVAHOME%/bin/java --enable-preview --add-modules jdk.incubator.concurrent -cp ../build ConcurrencyEx\n</code></pre>\n<p>Obviously just substitute <code>%JAVAHOME%</code> with <code>$JAVAHOME</code> to run on Linux instead of Windows.</p>\n<p>Source code:</p>\n<pre><code>import java.util.UUID;\nimport java.util.concurrent.ExecutionException;\nimport java.util.concurrent.Future;\nimport java.util.concurrent.ThreadLocalRandom;\nimport jdk.incubator.concurrent.*;\n\npublic class ConcurrencyEx {\n    \n    // main as from @BasilBourque answer\n    public static void main(String[] args) throws InterruptedException, ExecutionException {\n        record Event( UUID id , Instant when , Integer reading ) {}\n\n        try ( var scope = new StructuredTaskScope.ShutdownOnFailure() ) {\n            Future &lt; UUID &gt; futureId = scope.fork( ( ) -&gt; UUID.randomUUID() );\n            Future &lt; Instant &gt; futureWhen = scope.fork( ( ) -&gt; Instant.now() );\n            Future &lt; Integer &gt; futureReading = scope.fork( ( ) -&gt; ThreadLocalRandom.current().nextInt( 1 , 10 ) );\n\n            scope.join();           // Join both forks\n            scope.throwIfFailed();  // ... and propagate errors\n            Event event = new Event( futureId.get() , futureWhen.get() , futureReading.get() );\n            System.out.println( event );\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1659942315,"creation_date":1659942315,"answer_id":73273975,"question_id":73229247,"body_markdown":"I managed to get it working with Maven, without needing a `module-info.java` file. The major difference between my POM and your POM seems to be how I set the compiler arguments. Instead of what you had:\r\n\r\n```lang-xml\r\n&lt;configuration&gt;\r\n  &lt;compilerArgs&gt;--source 19&lt;/compilerArgs&gt;\r\n  &lt;compilerArgs&gt;--enable-preview&lt;/compilerArgs&gt;\r\n  &lt;compilerArgs&gt;--add-modules jdk.incubator.concurrent&lt;/compilerArgs&gt;\r\n  &lt;compilerVersion&gt;19&lt;/compilerVersion&gt;\r\n  &lt;source&gt;19&lt;/source&gt;\r\n  &lt;target&gt;19&lt;/target&gt;\r\n&lt;/configuration&gt;\r\n```\r\n\r\nI have:\r\n\r\n```lang-xml\r\n&lt;configuration&gt;\r\n  &lt;compilerArgs&gt;\r\n    &lt;arg&gt;--add-modules=jdk.incubator.concurrent&lt;/arg&gt;\r\n  &lt;/compilerArgs&gt;\r\n&lt;/configuration&gt;\r\n```\r\n\r\nNote I have `&lt;arg&gt;` elements nested in `&lt;compilerArgs&gt;`. I also have `=` in the `--add-modules` argument, though I don&#39;t know if that&#39;s strictly necessary. And it seems that `--enable-preview` is only needed at run-time, not compile-time. Other arguments that you have I set a different way (e.g., the `&lt;properties&gt;` element).\r\n\r\n---\r\n\r\n## Example\r\n\r\nHere is an example, with `JAVA_HOME` set to a JDK 19 installation.\r\n\r\n### Source/build files\r\n\r\n**App.java:**\r\n\r\n```lang-java\r\npackage sample;\r\n\r\nimport jdk.incubator.concurrent.StructuredTaskScope;\r\n\r\npublic class App {\r\n  public static void main( String[] args ) throws Exception {\r\n    try (var scope = new StructuredTaskScope&lt;Void&gt;()) {\r\n      scope.fork(() -&gt; delayPrint(1000, &quot;Hello,&quot;));\r\n      scope.fork(() -&gt; delayPrint(2000, &quot;World!&quot;));\r\n      scope.join();\r\n    }\r\n    System.out.println(&quot;Done!&quot;);\r\n  }\r\n\r\n  private static Void delayPrint(long delay, String message) throws Exception {\r\n    Thread.sleep(delay);\r\n    System.out.println(message);\r\n    return null;\r\n  }\r\n}\r\n```\r\n\r\n**pom.xml**:\r\n\r\n```lang-xml\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n  &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n  &lt;artifactId&gt;sample&lt;/artifactId&gt;\r\n  &lt;packaging&gt;jar&lt;/packaging&gt;\r\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n  &lt;name&gt;sample&lt;/name&gt;\r\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n  \r\n  &lt;properties&gt;\r\n    &lt;maven.compiler.source&gt;19&lt;/maven.compiler.source&gt;\r\n    &lt;maven.compiler.target&gt;19&lt;/maven.compiler.target&gt;\r\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n  &lt;/properties&gt;\r\n\r\n  &lt;build&gt;\r\n\r\n    &lt;plugins&gt;\r\n\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.10.1&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;compilerArgs&gt;\r\n            &lt;arg&gt;--add-modules=jdk.incubator.concurrent&lt;/arg&gt;\r\n          &lt;/compilerArgs&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n        &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.1.0&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;executable&gt;${java.home}/bin/java&lt;/executable&gt;\r\n          &lt;arguments&gt;\r\n            &lt;argument&gt;--add-modules=jdk.incubator.concurrent&lt;/argument&gt;\r\n            &lt;argument&gt;--enable-preview&lt;/argument&gt;\r\n            &lt;argument&gt;--class-path&lt;/argument&gt;\r\n            &lt;classpath/&gt;\r\n            &lt;argument&gt;sample.App&lt;/argument&gt;\r\n          &lt;/arguments&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n\r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\n### Output\r\n\r\nCompiling:\r\n\r\n```lang-none\r\n&gt; mvn compile\r\n\r\n[INFO] Scanning for projects...\r\n[INFO]\r\n[INFO] -------------------------&lt; com.example:sample &gt;-------------------------\r\n[INFO] Building sample 1.0-SNAPSHOT\r\n[INFO] --------------------------------[ jar ]---------------------------------\r\n[INFO]\r\n[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ sample ---\r\n[INFO] Using &#39;UTF-8&#39; encoding to copy filtered resources.\r\n[INFO] skip non existing resourceDirectory C:\\Users\\***\\Desktop\\structured_concurrency\\sample\\src\\main\\resources\r\n[INFO]\r\n[INFO] --- maven-compiler-plugin:3.10.1:compile (default-compile) @ sample ---\r\n[INFO] Changes detected - recompiling the module!\r\n[INFO] Compiling 1 source file to C:\\Users\\***\\Desktop\\structured_concurrency\\sample\\target\\classes\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD SUCCESS\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  1.439 s\r\n[INFO] Finished at: 2022-08-08T01:01:26-06:00\r\n[INFO] ------------------------------------------------------------------------\r\n```\r\n\r\nExecuting:\r\n\r\n```lang-none\r\n&gt; mvn exec:exec\r\n\r\n[INFO] Scanning for projects...\r\n[INFO]\r\n[INFO] -------------------------&lt; com.example:sample &gt;-------------------------\r\n[INFO] Building sample 1.0-SNAPSHOT\r\n[INFO] --------------------------------[ jar ]---------------------------------\r\n[INFO]\r\n[INFO] --- exec-maven-plugin:3.1.0:exec (default-cli) @ sample ---\r\nWARNING: Using incubator modules: jdk.incubator.concurrent\r\nHello,\r\nWorld!\r\nDone!\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD SUCCESS\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  2.610 s\r\n[INFO] Finished at: 2022-08-08T01:02:42-06:00\r\n[INFO] ------------------------------------------------------------------------\r\n```","title":"How can I run JDK 19 with Structured Concurrency?","body":"<p>I managed to get it working with Maven, without needing a <code>module-info.java</code> file. The major difference between my POM and your POM seems to be how I set the compiler arguments. Instead of what you had:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;configuration&gt;\n  &lt;compilerArgs&gt;--source 19&lt;/compilerArgs&gt;\n  &lt;compilerArgs&gt;--enable-preview&lt;/compilerArgs&gt;\n  &lt;compilerArgs&gt;--add-modules jdk.incubator.concurrent&lt;/compilerArgs&gt;\n  &lt;compilerVersion&gt;19&lt;/compilerVersion&gt;\n  &lt;source&gt;19&lt;/source&gt;\n  &lt;target&gt;19&lt;/target&gt;\n&lt;/configuration&gt;\n</code></pre>\n<p>I have:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;configuration&gt;\n  &lt;compilerArgs&gt;\n    &lt;arg&gt;--add-modules=jdk.incubator.concurrent&lt;/arg&gt;\n  &lt;/compilerArgs&gt;\n&lt;/configuration&gt;\n</code></pre>\n<p>Note I have <code>&lt;arg&gt;</code> elements nested in <code>&lt;compilerArgs&gt;</code>. I also have <code>=</code> in the <code>--add-modules</code> argument, though I don't know if that's strictly necessary. And it seems that <code>--enable-preview</code> is only needed at run-time, not compile-time. Other arguments that you have I set a different way (e.g., the <code>&lt;properties&gt;</code> element).</p>\n<hr />\n<h2>Example</h2>\n<p>Here is an example, with <code>JAVA_HOME</code> set to a JDK 19 installation.</p>\n<h3>Source/build files</h3>\n<p><strong>App.java:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>package sample;\n\nimport jdk.incubator.concurrent.StructuredTaskScope;\n\npublic class App {\n  public static void main( String[] args ) throws Exception {\n    try (var scope = new StructuredTaskScope&lt;Void&gt;()) {\n      scope.fork(() -&gt; delayPrint(1000, &quot;Hello,&quot;));\n      scope.fork(() -&gt; delayPrint(2000, &quot;World!&quot;));\n      scope.join();\n    }\n    System.out.println(&quot;Done!&quot;);\n  }\n\n  private static Void delayPrint(long delay, String message) throws Exception {\n    Thread.sleep(delay);\n    System.out.println(message);\n    return null;\n  }\n}\n</code></pre>\n<p><strong>pom.xml</strong>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;com.example&lt;/groupId&gt;\n  &lt;artifactId&gt;sample&lt;/artifactId&gt;\n  &lt;packaging&gt;jar&lt;/packaging&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n  &lt;name&gt;sample&lt;/name&gt;\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n  \n  &lt;properties&gt;\n    &lt;maven.compiler.source&gt;19&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;19&lt;/maven.compiler.target&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n  &lt;/properties&gt;\n\n  &lt;build&gt;\n\n    &lt;plugins&gt;\n\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.10.1&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;compilerArgs&gt;\n            &lt;arg&gt;--add-modules=jdk.incubator.concurrent&lt;/arg&gt;\n          &lt;/compilerArgs&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n        &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;executable&gt;${java.home}/bin/java&lt;/executable&gt;\n          &lt;arguments&gt;\n            &lt;argument&gt;--add-modules=jdk.incubator.concurrent&lt;/argument&gt;\n            &lt;argument&gt;--enable-preview&lt;/argument&gt;\n            &lt;argument&gt;--class-path&lt;/argument&gt;\n            &lt;classpath/&gt;\n            &lt;argument&gt;sample.App&lt;/argument&gt;\n          &lt;/arguments&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<h3>Output</h3>\n<p>Compiling:</p>\n<pre class=\"lang-none prettyprint-override\"><code>&gt; mvn compile\n\n[INFO] Scanning for projects...\n[INFO]\n[INFO] -------------------------&lt; com.example:sample &gt;-------------------------\n[INFO] Building sample 1.0-SNAPSHOT\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO]\n[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ sample ---\n[INFO] Using 'UTF-8' encoding to copy filtered resources.\n[INFO] skip non existing resourceDirectory C:\\Users\\***\\Desktop\\structured_concurrency\\sample\\src\\main\\resources\n[INFO]\n[INFO] --- maven-compiler-plugin:3.10.1:compile (default-compile) @ sample ---\n[INFO] Changes detected - recompiling the module!\n[INFO] Compiling 1 source file to C:\\Users\\***\\Desktop\\structured_concurrency\\sample\\target\\classes\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  1.439 s\n[INFO] Finished at: 2022-08-08T01:01:26-06:00\n[INFO] ------------------------------------------------------------------------\n</code></pre>\n<p>Executing:</p>\n<pre class=\"lang-none prettyprint-override\"><code>&gt; mvn exec:exec\n\n[INFO] Scanning for projects...\n[INFO]\n[INFO] -------------------------&lt; com.example:sample &gt;-------------------------\n[INFO] Building sample 1.0-SNAPSHOT\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO]\n[INFO] --- exec-maven-plugin:3.1.0:exec (default-cli) @ sample ---\nWARNING: Using incubator modules: jdk.incubator.concurrent\nHello,\nWorld!\nDone!\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  2.610 s\n[INFO] Finished at: 2022-08-08T01:02:42-06:00\n[INFO] ------------------------------------------------------------------------\n</code></pre>\n"}],"owner":{"account_id":4008983,"reputation":2115,"user_id":3302921,"accept_rate":22,"display_name":"Eric Kolotyluk"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4612,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"answer_count":3,"score":11,"last_activity_date":1660059787,"creation_date":1659574325,"question_id":73229247,"body_markdown":"I have edited this to bring things up-to-date wrt the original posting.\r\n\r\nI want to try the new [*Project Loom*][1] feature defined in: [JEP 428: Structured Concurrency (Incubator)][2]\r\n\r\nI have in my pom.xml\r\n\r\n    &lt;properties&gt;\r\n      &lt;maven.compiler.executable&gt;${env.JAVA_HOME}/bin/javac&lt;/maven.compiler.executable&gt;\r\n      &lt;maven.compiler.source&gt;19&lt;/maven.compiler.source&gt;\r\n      &lt;maven.compiler.target&gt;19&lt;/maven.compiler.target&gt;\r\n    &lt;/properties&gt;\r\n\r\n    . . .\r\n    \r\n    &lt;plugin&gt;\r\n      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n      &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n      &lt;version&gt;3.10.1&lt;/version&gt;\r\n      &lt;configuration&gt;\r\n        &lt;compilerArgs&gt;\r\n          &lt;arg&gt;--add-modules=jdk.incubator.concurrent&lt;/arg&gt;\r\n          &lt;arg&gt;--enable-preview&lt;/arg&gt;\r\n        &lt;/compilerArgs&gt;\r\n      &lt;/configuration&gt;\r\n    &lt;/plugin&gt;\r\n\r\n\r\nwhere `JAVA_HOME` points to JDK 19, but when I try to build via `mvn compile` I get\r\n\r\n    [ERROR] C:\\Users\\ERIC\\Documents\\git\\loom-lab\\laboratory\\src\\main\\java\\net\\kolotyluk\\loom\\Structured.java:3:20:  error: package jdk.incubator.concurrent is not visible\r\n    [ERROR] C:\\Users\\ERIC\\Documents\\git\\loom-lab\\laboratory\\src\\main\\java\\net\\kolotyluk\\loom\\Structures.java:3:20:  error: package jdk.incubator.concurrent is not visible\r\n    . . .\r\n\r\nMany people have helped me with this, and clearly they can make it work, but for some reason, I cannot get `mvn compile` to work.\r\n\r\nHowever, I can get the code to compile and run under IntelliJ. Never before have I been *unable* to get Maven to compile when I can get IntelliJ to do so. Usually, it is the other way around.\r\n\r\n\r\n  [1]: https://wiki.openjdk.org/display/loom/Main\r\n  [2]: https://openjdk.org/jeps/428","title":"How can I run JDK 19 with Structured Concurrency?","body":"<p>I have edited this to bring things up-to-date wrt the original posting.</p>\n<p>I want to try the new <a href=\"https://wiki.openjdk.org/display/loom/Main\" rel=\"noreferrer\"><em>Project Loom</em></a> feature defined in: <a href=\"https://openjdk.org/jeps/428\" rel=\"noreferrer\">JEP 428: Structured Concurrency (Incubator)</a></p>\n<p>I have in my pom.xml</p>\n<pre><code>&lt;properties&gt;\n  &lt;maven.compiler.executable&gt;${env.JAVA_HOME}/bin/javac&lt;/maven.compiler.executable&gt;\n  &lt;maven.compiler.source&gt;19&lt;/maven.compiler.source&gt;\n  &lt;maven.compiler.target&gt;19&lt;/maven.compiler.target&gt;\n&lt;/properties&gt;\n\n. . .\n\n&lt;plugin&gt;\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n  &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n  &lt;version&gt;3.10.1&lt;/version&gt;\n  &lt;configuration&gt;\n    &lt;compilerArgs&gt;\n      &lt;arg&gt;--add-modules=jdk.incubator.concurrent&lt;/arg&gt;\n      &lt;arg&gt;--enable-preview&lt;/arg&gt;\n    &lt;/compilerArgs&gt;\n  &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>where <code>JAVA_HOME</code> points to JDK 19, but when I try to build via <code>mvn compile</code> I get</p>\n<pre><code>[ERROR] C:\\Users\\ERIC\\Documents\\git\\loom-lab\\laboratory\\src\\main\\java\\net\\kolotyluk\\loom\\Structured.java:3:20:  error: package jdk.incubator.concurrent is not visible\n[ERROR] C:\\Users\\ERIC\\Documents\\git\\loom-lab\\laboratory\\src\\main\\java\\net\\kolotyluk\\loom\\Structures.java:3:20:  error: package jdk.incubator.concurrent is not visible\n. . .\n</code></pre>\n<p>Many people have helped me with this, and clearly they can make it work, but for some reason, I cannot get <code>mvn compile</code> to work.</p>\n<p>However, I can get the code to compile and run under IntelliJ. Never before have I been <em>unable</em> to get Maven to compile when I can get IntelliJ to do so. Usually, it is the other way around.</p>\n"},{"tags":["java","android","retrofit2","android-jetpack-compose","okhttp"],"comments":[{"owner":{"account_id":21401367,"reputation":342,"user_id":15763443,"display_name":"Unes"},"score":1,"creation_date":1660065309,"post_id":73294579,"comment_id":129443067,"body_markdown":"You must convert the Uri to a File. Check out [this answer](https://stackoverflow.com/a/68792304/15763443)","body":"You must convert the Uri to a File. Check out <a href=\"https://stackoverflow.com/a/68792304/15763443\">this answer</a>"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1660104973,"post_id":73294579,"comment_id":129451197,"body_markdown":"No need trying to get a file path. Retrofit can handle the uri.","body":"No need trying to get a file path. Retrofit can handle the uri."},{"owner":{"account_id":11481936,"reputation":185,"user_id":8415711,"display_name":"Ahmed Rabee"},"score":0,"creation_date":1660144910,"post_id":73294579,"comment_id":129464872,"body_markdown":"I found the answer in @Nesyou comment. It&#39;s here [Convert file: Uri to File in Android](https://stackoverflow.com/questions/2975197/convert-file-uri-to-file-in-android/68792304#68792304)","body":"I found the answer in @Nesyou comment. It&#39;s here <a href=\"https://stackoverflow.com/questions/2975197/convert-file-uri-to-file-in-android/68792304#68792304\">Convert file: Uri to File in Android</a>"}],"owner":{"account_id":11481936,"reputation":185,"user_id":8415711,"display_name":"Ahmed Rabee"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1150,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660059733,"creation_date":1660059733,"question_id":73294579,"body_markdown":"I am trying to post an Image into the server, I manage to get the Image URI and Bitmap and want to transform it into a File so I can post it using Retrofit. but I get this error \r\n\r\n    FileNotFoundException: /document/image:29467: open failed: ENOENT (No such file or directory)\r\n\r\nThat is the Code I am using to get he URI \r\n\r\n       var imageUri by remember { mutableStateOf&lt;Uri?&gt;(null) }\r\n    val context = LocalContext.current\r\n    val bitmap = remember { mutableStateOf&lt;Bitmap?&gt;(null) }\r\n    imageUri?.let {\r\n            if (Build.VERSION.SDK_INT &lt; 28) {\r\n                bitmap.value = MediaStore.Images\r\n                    .Media.getBitmap(context.contentResolver, it)\r\n            } else {\r\n                val source = ImageDecoder.createSource(context.contentResolver, it)\r\n                bitmap.value = ImageDecoder.decodeBitmap(source)\r\n            }\r\n\r\n        }\r\n\r\n                val file = File(imageUri!!.path)\r\n\r\n\r\nand This is how I transform it into a request body in my Viewmodel \r\n\r\n       val response = serviece.addYourBrand(name,\r\n                    image = MultipartBody.Part.createFormData(&quot;image&quot;, file.name, file.asRequestBody()),\r\n                    categoryIDFormBody).body()\r\n\r\nand that&#39;s my Service Interface \r\n\r\n       @Multipart\r\n        @POST(&quot;brand&quot;)\r\n        suspend fun addYourBrand (\r\n            @Part(&quot;name&quot;) name : RequestBody,\r\n            @Part image : MultipartBody.Part,\r\n            @Part(&quot;category_id[]&quot;) categoryId : RequestBody\r\n        ) : Response&lt;BaseResponse&gt;\r\n\r\n","title":"How to Transform correctly an URI into a File in kotlin Android Compose and Post it to Server Using Retrofit","body":"<p>I am trying to post an Image into the server, I manage to get the Image URI and Bitmap and want to transform it into a File so I can post it using Retrofit. but I get this error</p>\n<pre><code>FileNotFoundException: /document/image:29467: open failed: ENOENT (No such file or directory)\n</code></pre>\n<p>That is the Code I am using to get he URI</p>\n<pre><code>   var imageUri by remember { mutableStateOf&lt;Uri?&gt;(null) }\nval context = LocalContext.current\nval bitmap = remember { mutableStateOf&lt;Bitmap?&gt;(null) }\nimageUri?.let {\n        if (Build.VERSION.SDK_INT &lt; 28) {\n            bitmap.value = MediaStore.Images\n                .Media.getBitmap(context.contentResolver, it)\n        } else {\n            val source = ImageDecoder.createSource(context.contentResolver, it)\n            bitmap.value = ImageDecoder.decodeBitmap(source)\n        }\n\n    }\n\n            val file = File(imageUri!!.path)\n</code></pre>\n<p>and This is how I transform it into a request body in my Viewmodel</p>\n<pre><code>   val response = serviece.addYourBrand(name,\n                image = MultipartBody.Part.createFormData(&quot;image&quot;, file.name, file.asRequestBody()),\n                categoryIDFormBody).body()\n</code></pre>\n<p>and that's my Service Interface</p>\n<pre><code>   @Multipart\n    @POST(&quot;brand&quot;)\n    suspend fun addYourBrand (\n        @Part(&quot;name&quot;) name : RequestBody,\n        @Part image : MultipartBody.Part,\n        @Part(&quot;category_id[]&quot;) categoryId : RequestBody\n    ) : Response&lt;BaseResponse&gt;\n</code></pre>\n"},{"tags":["java","android","firebase-cloud-messaging","android-push-notification"],"answers":[{"tags":[],"owner":{"account_id":9726429,"reputation":26,"user_id":7213209,"display_name":"Florent Samon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660056977,"creation_date":1659715657,"answer_id":73252558,"question_id":73252056,"body_markdown":"Put this Flag to your intent like that:\r\n```java\r\nintent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);\r\n```","title":"How to open activity page in fragment, when pressed a notification in android","body":"<p>Put this Flag to your intent like that:</p>\n<pre class=\"lang-java prettyprint-override\"><code>intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22090707,"reputation":56,"user_id":16348805,"display_name":"Khanh Tran"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660059329,"creation_date":1660058925,"answer_id":73294375,"question_id":73252056,"body_markdown":"According to [this post](https://stackoverflow.com/questions/37711082/how-to-handle-notification-when-app-in-background-in-firebase) maybe your FCM type of message does not trigger the `onMessageReceived()` function when the app is in `foreground/background/killed`. \r\n\r\nMake sure that the FCM message type is `Data Messages`\r\n\r\nCheckout the post as it contain detail about how to setup the FCM correctly so that the notification trigger the `onMessageReceived()` when the application is in `foreground/background/killed`","title":"How to open activity page in fragment, when pressed a notification in android","body":"<p>According to <a href=\"https://stackoverflow.com/questions/37711082/how-to-handle-notification-when-app-in-background-in-firebase\">this post</a> maybe your FCM type of message does not trigger the <code>onMessageReceived()</code> function when the app is in <code>foreground/background/killed</code>.</p>\n<p>Make sure that the FCM message type is <code>Data Messages</code></p>\n<p>Checkout the post as it contain detail about how to setup the FCM correctly so that the notification trigger the <code>onMessageReceived()</code> when the application is in <code>foreground/background/killed</code></p>\n"}],"owner":{"account_id":19148642,"reputation":3,"user_id":13987021,"display_name":"Revenge"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1660059329,"creation_date":1659713157,"question_id":73252056,"body_markdown":"I have PushNotificationService and my method onMessageReceived.\r\n\r\nIf I am in the program, a notification comes from above and directs me to the page I want.\r\n\r\nHowever, when the program is closed, when I click on the notification in the background, it does not go to the page I want, it only goes to the homepage. \r\n\r\nAnd I want to open activity when ı click to notification. How can I do ? \r\n```\r\npublic class PushNotificationService extends FirebaseMessagingService {\r\n\r\n    private NotificationCompat.Builder builder;\r\n\r\n    @SuppressLint(&quot;NewApi&quot;)\r\n    @Override\r\n    public void onMessageReceived(@NonNull RemoteMessage message) {\r\n\r\n        String baslik = message.getNotification().getTitle();\r\n        String icerik = message.getNotification().getBody();\r\n        durumaBagli(baslik,icerik);\r\n        \r\n    }\r\n    private void durumaBagli(String baslik, String icerik) {\r\n\r\n        NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);\r\n        Intent intent = new Intent(this,BildirimGonder.class);\r\n\r\n         PendingIntent pendingIntent = PendingIntent\r\n                .getActivity(this,1,intent,\r\n                        PendingIntent.FLAG_UPDATE_CURRENT | PendingIntent.FLAG_IMMUTABLE);\r\n\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O){\r\n\r\n            String kanalid = &quot;kanalId&quot;;\r\n            String kanalAd = &quot;kanalAd&quot;;\r\n            String kanalTanim = &quot;kanalTanim&quot;;\r\n\r\n            int kanalOnceligi = NotificationManager.IMPORTANCE_HIGH;\r\n\r\n            NotificationChannel kanal = notificationManager.getNotificationChannel(kanalid);\r\n\r\n            if (kanal == null){\r\n                kanal = new NotificationChannel(kanalid,kanalAd,kanalOnceligi);\r\n                kanal.setDescription(kanalTanim);\r\n                notificationManager.createNotificationChannel(kanal);\r\n            }\r\n\r\n            builder = new NotificationCompat.Builder(this,kanalid);\r\n            builder.setContentTitle(baslik);\r\n            builder.setContentText(icerik);\r\n            builder.setSmallIcon(R.drawable.gurpinarlogom);\r\n            builder.setAutoCancel(true);\r\n            builder.setContentIntent(pendingIntent);\r\n        }else {\r\n            builder = new NotificationCompat.Builder(getApplicationContext());\r\n            builder.setContentTitle(baslik);\r\n            builder.setContentText(icerik);\r\n            builder.setSmallIcon(R.drawable.gurpinarlogom);\r\n            builder.setAutoCancel(true);\r\n            builder.setContentIntent(pendingIntent);\r\n            builder.setPriority(Notification.PRIORITY_HIGH);\r\n        }\r\n\r\n        notificationManager.notify(1,builder.build());\r\n    }\r\n}\r\n```\r\n\r\nAnd my MainActivity \r\n\r\n```\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private BottomNavigationView bottomNav;\r\n    \r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n                     \r\n        bottomNav = findViewById(R.id.bottomNav);\r\n        NavHostFragment navHostFragment = (NavHostFragment) getSupportFragmentManager()\r\n                .findFragmentById(R.id.nav_host_fragment);\r\n        NavigationUI.setupWithNavController(bottomNav, navHostFragment.getNavController());\r\n        getSupportActionBar().setBackgroundDrawable(new ColorDrawable(Color.parseColor(&quot;#01A2D6&quot;)));\r\n    }\r\n    public void setActionBarTitle(String title) {\r\n        getSupportActionBar().setTitle(title);\r\n    }\r\n\r\n    @Override\r\n    public boolean onCreateOptionsMenu(Menu menu) {\r\n        getMenuInflater().inflate(R.menu.toolbar_menu, menu);\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean onOptionsItemSelected(@NonNull MenuItem item) {\r\n        switch (item.getItemId()) {\r\n            case R.id.action_iletisim:\r\n                Intent mesajGonder = new Intent(getApplicationContext(), MesajGonder.class);\r\n                startActivity(mesajGonder);\r\n                Toast.makeText(this, &quot;İletişim sayfası&quot;, Toast.LENGTH_SHORT).show();\r\n                return true;\r\n            default:\r\n                return super.onOptionsItemSelected(item);\r\n        }\r\n    }\r\n}\r\n```\r\nThis my codes","title":"How to open activity page in fragment, when pressed a notification in android","body":"<p>I have PushNotificationService and my method onMessageReceived.</p>\n<p>If I am in the program, a notification comes from above and directs me to the page I want.</p>\n<p>However, when the program is closed, when I click on the notification in the background, it does not go to the page I want, it only goes to the homepage.</p>\n<p>And I want to open activity when ı click to notification. How can I do ?</p>\n<pre><code>public class PushNotificationService extends FirebaseMessagingService {\n\n    private NotificationCompat.Builder builder;\n\n    @SuppressLint(&quot;NewApi&quot;)\n    @Override\n    public void onMessageReceived(@NonNull RemoteMessage message) {\n\n        String baslik = message.getNotification().getTitle();\n        String icerik = message.getNotification().getBody();\n        durumaBagli(baslik,icerik);\n        \n    }\n    private void durumaBagli(String baslik, String icerik) {\n\n        NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);\n        Intent intent = new Intent(this,BildirimGonder.class);\n\n         PendingIntent pendingIntent = PendingIntent\n                .getActivity(this,1,intent,\n                        PendingIntent.FLAG_UPDATE_CURRENT | PendingIntent.FLAG_IMMUTABLE);\n\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O){\n\n            String kanalid = &quot;kanalId&quot;;\n            String kanalAd = &quot;kanalAd&quot;;\n            String kanalTanim = &quot;kanalTanim&quot;;\n\n            int kanalOnceligi = NotificationManager.IMPORTANCE_HIGH;\n\n            NotificationChannel kanal = notificationManager.getNotificationChannel(kanalid);\n\n            if (kanal == null){\n                kanal = new NotificationChannel(kanalid,kanalAd,kanalOnceligi);\n                kanal.setDescription(kanalTanim);\n                notificationManager.createNotificationChannel(kanal);\n            }\n\n            builder = new NotificationCompat.Builder(this,kanalid);\n            builder.setContentTitle(baslik);\n            builder.setContentText(icerik);\n            builder.setSmallIcon(R.drawable.gurpinarlogom);\n            builder.setAutoCancel(true);\n            builder.setContentIntent(pendingIntent);\n        }else {\n            builder = new NotificationCompat.Builder(getApplicationContext());\n            builder.setContentTitle(baslik);\n            builder.setContentText(icerik);\n            builder.setSmallIcon(R.drawable.gurpinarlogom);\n            builder.setAutoCancel(true);\n            builder.setContentIntent(pendingIntent);\n            builder.setPriority(Notification.PRIORITY_HIGH);\n        }\n\n        notificationManager.notify(1,builder.build());\n    }\n}\n</code></pre>\n<p>And my MainActivity</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    private BottomNavigationView bottomNav;\n    \n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n                     \n        bottomNav = findViewById(R.id.bottomNav);\n        NavHostFragment navHostFragment = (NavHostFragment) getSupportFragmentManager()\n                .findFragmentById(R.id.nav_host_fragment);\n        NavigationUI.setupWithNavController(bottomNav, navHostFragment.getNavController());\n        getSupportActionBar().setBackgroundDrawable(new ColorDrawable(Color.parseColor(&quot;#01A2D6&quot;)));\n    }\n    public void setActionBarTitle(String title) {\n        getSupportActionBar().setTitle(title);\n    }\n\n    @Override\n    public boolean onCreateOptionsMenu(Menu menu) {\n        getMenuInflater().inflate(R.menu.toolbar_menu, menu);\n        return true;\n    }\n\n    @Override\n    public boolean onOptionsItemSelected(@NonNull MenuItem item) {\n        switch (item.getItemId()) {\n            case R.id.action_iletisim:\n                Intent mesajGonder = new Intent(getApplicationContext(), MesajGonder.class);\n                startActivity(mesajGonder);\n                Toast.makeText(this, &quot;İletişim sayfası&quot;, Toast.LENGTH_SHORT).show();\n                return true;\n            default:\n                return super.onOptionsItemSelected(item);\n        }\n    }\n}\n</code></pre>\n<p>This my codes</p>\n"},{"tags":["java","apache-spark","elasticsearch","apache-kafka"],"answers":[{"tags":[],"owner":{"account_id":89056,"reputation":8068,"user_id":2684196,"accept_rate":80,"display_name":"Willis Blackburn"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1660059326,"creation_date":1548946743,"answer_id":54463336,"question_id":54462673,"body_markdown":"It sounds like you have several messages in the queue that all update the same ES document, and these messages are being a processed concurrently. There are two possible solutions:\r\n\r\nFirst, you can use Kafka partitions to ensure that all the messages that update the same ES document are handled in sequence. This assumes that’s there’s some property in your message that Kafka can use to determine how messages map to ES documents.\r\n\r\nThe other way is the standard way of handling optimistic concurrency conflicts: retry the transaction. If you have some data from a Kafka message that you need to add to an ES document, and the current document in ES is version 1, then you can try to update it and save back version 2. But if someone else already wrote version 2, you can retry by using version 2 as a starting point, adding your new data, and saving version 3.\r\n\r\nIf either of these approaches destroys the concurrency you were expecting to get from Kafka and Spark, then you may need to rethink your approach. You may have to introduce a new processing stage that does some heavy lifting but doesn’t actually write to ES, then do the ES updates in a separate step.","title":"version conflict, current version [2] is different than the one provided [1]","body":"<p>It sounds like you have several messages in the queue that all update the same ES document, and these messages are being a processed concurrently. There are two possible solutions:</p>\n<p>First, you can use Kafka partitions to ensure that all the messages that update the same ES document are handled in sequence. This assumes that’s there’s some property in your message that Kafka can use to determine how messages map to ES documents.</p>\n<p>The other way is the standard way of handling optimistic concurrency conflicts: retry the transaction. If you have some data from a Kafka message that you need to add to an ES document, and the current document in ES is version 1, then you can try to update it and save back version 2. But if someone else already wrote version 2, you can retry by using version 2 as a starting point, adding your new data, and saving version 3.</p>\n<p>If either of these approaches destroys the concurrency you were expecting to get from Kafka and Spark, then you may need to rethink your approach. You may have to introduce a new processing stage that does some heavy lifting but doesn’t actually write to ES, then do the ES updates in a separate step.</p>\n"},{"tags":[],"owner":{"account_id":11168377,"reputation":291,"user_id":8316399,"display_name":"alina"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1549275014,"creation_date":1549275014,"answer_id":54513900,"question_id":54462673,"body_markdown":"I would like to answer my own question. In my use case, I was updating the document counter. So, all I had to do was retry whenever a conflict arise because I just needed to aggregate my counter.\r\n\r\nMy use case was somewhat [this][1]:\r\n\r\n&gt; For many uses of partial update, it doesn’t matter that a document has been changed. For instance, if two processes are both incrementing the page-view counter, it doesn’t matter in which order it happens; if a conflict occurs, the only thing we need to do is reattempt the update.\r\n&gt; \r\n&gt; This can be done automatically by setting the **retry_on_conflict** parameter to the number of times that update should retry before failing; it defaults to 0.\r\n\r\n\r\nThanks to Willis and [this][1] blog, I was able to configure Elastic Search settings and now I am not having any problems at all\r\n\r\n\r\n  [1]: https://www.elastic.co/guide/en/elasticsearch/guide/current/partial-updates.html","title":"version conflict, current version [2] is different than the one provided [1]","body":"<p>I would like to answer my own question. In my use case, I was updating the document counter. So, all I had to do was retry whenever a conflict arise because I just needed to aggregate my counter.</p>\n\n<p>My use case was somewhat <a href=\"https://www.elastic.co/guide/en/elasticsearch/guide/current/partial-updates.html\" rel=\"nofollow noreferrer\">this</a>:</p>\n\n<blockquote>\n  <p>For many uses of partial update, it doesn’t matter that a document has been changed. For instance, if two processes are both incrementing the page-view counter, it doesn’t matter in which order it happens; if a conflict occurs, the only thing we need to do is reattempt the update.</p>\n  \n  <p>This can be done automatically by setting the <strong>retry_on_conflict</strong> parameter to the number of times that update should retry before failing; it defaults to 0.</p>\n</blockquote>\n\n<p>Thanks to Willis and <a href=\"https://www.elastic.co/guide/en/elasticsearch/guide/current/partial-updates.html\" rel=\"nofollow noreferrer\">this</a> blog, I was able to configure Elastic Search settings and now I am not having any problems at all</p>\n"}],"owner":{"account_id":11168377,"reputation":291,"user_id":8316399,"display_name":"alina"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7495,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":54513900,"answer_count":2,"score":2,"last_activity_date":1660059326,"creation_date":1548944676,"question_id":54462673,"body_markdown":"I have a Kafka topic and a Spark application. The Spark application gets data from Kafka topic, pre aggregates it and stores it in Elastic Search. Sounds simple, right?\r\n\r\nEverything works fine as expected, but the minute I set &quot;spark.cores&quot; property something other than 1, I start getting \r\n     \r\n    version conflict, current version [2] is different than the one provided [1]\r\n\r\nAfter researching a bit, I think the error is because multiple cores can have same document at the same time and thus, when one core is done with aggregation on its part and tries to write back to the document, it gets this error\r\n\r\nTBH, I am a bit surprised by this behaviour because I thought Spark and ES would handle this on their own. This leads me to believe that maybe, there is something wrong with my approach.\r\n\r\nHow can I fix this? Is there some sort of &quot;synchronized&quot; or &quot;lock&quot; sort of concept that I need to follow?\r\n\r\nCheers!\r\n\r\n","title":"version conflict, current version [2] is different than the one provided [1]","body":"<p>I have a Kafka topic and a Spark application. The Spark application gets data from Kafka topic, pre aggregates it and stores it in Elastic Search. Sounds simple, right?</p>\n\n<p>Everything works fine as expected, but the minute I set \"spark.cores\" property something other than 1, I start getting </p>\n\n<pre><code>version conflict, current version [2] is different than the one provided [1]\n</code></pre>\n\n<p>After researching a bit, I think the error is because multiple cores can have same document at the same time and thus, when one core is done with aggregation on its part and tries to write back to the document, it gets this error</p>\n\n<p>TBH, I am a bit surprised by this behaviour because I thought Spark and ES would handle this on their own. This leads me to believe that maybe, there is something wrong with my approach.</p>\n\n<p>How can I fix this? Is there some sort of \"synchronized\" or \"lock\" sort of concept that I need to follow?</p>\n\n<p>Cheers!</p>\n"},{"tags":["java","opencv","javacv","image-stitching"],"comments":[{"owner":{"account_id":248409,"reputation":4974,"user_id":523744,"display_name":"Samuel Audet"},"score":1,"creation_date":1660133965,"post_id":73294405,"comment_id":129460208,"body_markdown":"Please try again with the sample code here: https://github.com/bytedeco/javacpp-presets/tree/master/opencv/samples","body":"Please try again with the sample code here: <a href=\"https://github.com/bytedeco/javacpp-presets/tree/master/opencv/samples\" rel=\"nofollow noreferrer\">github.com/bytedeco/javacpp-presets/tree/master/opencv/sampl&zwnj;&#8203;es</a>"},{"owner":{"account_id":24196961,"reputation":31,"user_id":18155341,"display_name":"Matheus Macedo"},"score":0,"creation_date":1660184528,"post_id":73294405,"comment_id":129474955,"body_markdown":"Dear friend Samuel, thank you for your comment. Tried to run this code you are jealous of. However, it displays the following error:\n\nModule &#39;pytorch&#39; production: java.lang.OutOfMemoryError: Java heap space\n\n\nThis is for the program to run.","body":"Dear friend Samuel, thank you for your comment. Tried to run this code you are jealous of. However, it displays the following error:  Module &#39;pytorch&#39; production: java.lang.OutOfMemoryError: Java heap space   This is for the program to run."},{"owner":{"account_id":248409,"reputation":4974,"user_id":523744,"display_name":"Samuel Audet"},"score":1,"creation_date":1660191254,"post_id":73294405,"comment_id":129475849,"body_markdown":"That code doesn&#39;t use PyTorch, you&#39;re probably not looking at the right place.","body":"That code doesn&#39;t use PyTorch, you&#39;re probably not looking at the right place."},{"owner":{"account_id":24196961,"reputation":31,"user_id":18155341,"display_name":"Matheus Macedo"},"score":0,"creation_date":1660217139,"post_id":73294405,"comment_id":129483260,"body_markdown":"I downloaded all of it right from Github. After that, I put it to run and when running this error message appears.","body":"I downloaded all of it right from Github. After that, I put it to run and when running this error message appears."}],"owner":{"account_id":24196961,"reputation":31,"user_id":18155341,"display_name":"Matheus Macedo"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660059048,"creation_date":1660059048,"question_id":73294405,"body_markdown":"**I have run this code. It seems to be that result.png is not generated as a result:**\r\n\r\n\r\n\r\n\r\n    public class ImageStitching {\r\n    \r\n      public static void main(String[] args) {\r\n        MatVector images = new MatVector();\r\n        images.put(0, cvLoadImage(&quot;image1.jpg&quot;));\r\n        images.put(1, cvLoadImage(&quot;image2.jpg&quot;));\r\n    \r\n        IplImage result = new IplImage();\r\n        int status = stitcher.stitch(images, result);\r\n    \r\n        if (status == stitcher.OK) {\r\n          cvSaveImage(&quot;result.jpg&quot;, result);\r\n        }\r\n    \r\n        result = (IplImage) cvLoadImage(&quot;result.jpg&quot;);\r\n    \r\n        final CanvasFrame canvas = new CanvasFrame();\r\n    \r\n        // Request closing of the application when the image window is closed.\r\n        canvas.setDefaultCloseOperation(javax.swing.JFrame.EXIT_ON_CLOSE);\r\n    \r\n        // Show image on window.\r\n        canvas.showImage(result);\r\n    \r\n      }\r\n    \r\n      private static void cvSaveImage(String string, IplImage result) {\r\n      }\r\n    \r\n      private static Object cvLoadImage(String string) {\r\n        return null;\r\n      }\r\n    }\r\n\r\n\r\n**It doesn&#39;t show an error message, but it doesn&#39;t show the result either.**","title":"Image Stitching: not generating result","body":"<p><strong>I have run this code. It seems to be that result.png is not generated as a result:</strong></p>\n<pre><code>public class ImageStitching {\n\n  public static void main(String[] args) {\n    MatVector images = new MatVector();\n    images.put(0, cvLoadImage(&quot;image1.jpg&quot;));\n    images.put(1, cvLoadImage(&quot;image2.jpg&quot;));\n\n    IplImage result = new IplImage();\n    int status = stitcher.stitch(images, result);\n\n    if (status == stitcher.OK) {\n      cvSaveImage(&quot;result.jpg&quot;, result);\n    }\n\n    result = (IplImage) cvLoadImage(&quot;result.jpg&quot;);\n\n    final CanvasFrame canvas = new CanvasFrame();\n\n    // Request closing of the application when the image window is closed.\n    canvas.setDefaultCloseOperation(javax.swing.JFrame.EXIT_ON_CLOSE);\n\n    // Show image on window.\n    canvas.showImage(result);\n\n  }\n\n  private static void cvSaveImage(String string, IplImage result) {\n  }\n\n  private static Object cvLoadImage(String string) {\n    return null;\n  }\n}\n</code></pre>\n<p><strong>It doesn't show an error message, but it doesn't show the result either.</strong></p>\n"},{"tags":["java","linked-list"],"answers":[{"tags":[],"owner":{"account_id":11619749,"reputation":171,"user_id":8511385,"display_name":"Deepesh Dagar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660058718,"creation_date":1660058718,"answer_id":73294332,"question_id":73292754,"body_markdown":"few mistakes here : \r\n\r\nneed to initialise &#39;methods&#39; outside while loop. As at every input, it gets initialised.\r\n\r\n    Scanner in = new Scanner(System.in);\r\n    methods list = new methods();\r\n    while (true) { ----}\r\n\r\nAlso in addrear(int data)  method , need to handle head == null condition, i.e., how to add element when there are no elements in the list. \r\n\r\n    if (head == null) { \r\n     head = n; return; \r\n    }","title":"Why this linked list rear operation snippet code throws error?","body":"<p>few mistakes here :</p>\n<p>need to initialise 'methods' outside while loop. As at every input, it gets initialised.</p>\n<pre><code>Scanner in = new Scanner(System.in);\nmethods list = new methods();\nwhile (true) { ----}\n</code></pre>\n<p>Also in addrear(int data)  method , need to handle head == null condition, i.e., how to add element when there are no elements in the list.</p>\n<pre><code>if (head == null) { \n head = n; return; \n}\n</code></pre>\n"}],"owner":{"account_id":25815621,"reputation":3,"user_id":19555654,"display_name":"masterStroke"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73294332,"answer_count":1,"score":-1,"last_activity_date":1660058718,"creation_date":1660051977,"question_id":73292754,"body_markdown":"in the below snippet code contains 3 files, named main which is the main operation code, node file contains LinkedList creation and methods contains the linked list operation. In the add rear section throws error.. while execution. I have added the snippet error screshoot \r\n\r\n\r\nMain.java\r\n   \r\n\r\n    import java.util.*; \r\n        public class main {\r\n            public static void main(String[] args) {\r\n                Scanner in = new Scanner(System.in);\r\n                while (true) {\r\n                    System.out.println(&quot;1-&gt; add front 2-&gt;add rear 3-&gt;display&quot;);\r\n                    System.out.println(&quot;enter your choice&quot;);\r\n                    int ch = in.nextInt();\r\n                    methods list = new methods();\r\n                    switch (ch) {\r\n                        case 1: {\r\n                            System.out.println(&quot;Enter the element to add&quot;);\r\n                            int newAdd = in.nextInt();\r\n                            list.addfront(newAdd);\r\n                        }\r\n                        break;\r\n                        case 2: {\r\n                            System.out.println(&quot;Enter the element to add&quot;);\r\n                            int newAdd = in.nextInt();\r\n                            list.addrear(newAdd);\r\n                        }\r\n                        case 3:\r\n                            list.display();\r\n                            break;\r\n                        default:\r\n                            System.exit(0);\r\n        \r\n                    }\r\n        \r\n        \r\n                }\r\n            }\r\n        }\r\n\r\nnode.java\r\n\r\n\r\n    public class node {\r\n        private int data;\r\n        private node next;\r\n    \r\n        public node(int data) {\r\n            this.data = data;\r\n            this.next = null;\r\n        }\r\n    \r\n        public int getData() {\r\n            return data;\r\n        }\r\n    \r\n        public node getNext() {\r\n            return next;\r\n        }\r\n    \r\n        public void setNext(node next) {\r\n            this.next = next;\r\n        }\r\n    \r\n        @Override\r\n        public String toString() {\r\n            return &quot;node{&quot; +\r\n                    &quot;data=&quot; + data +\r\n                    &#39;}&#39;;\r\n        }\r\n    }\r\n\r\n\r\nMethods.java\r\n\r\n\r\n\r\n\r\n    public class methods \r\n    {\r\n    \r\n        node head;\r\n    \r\n        public void addfront(int data)\r\n        {\r\n            node n= new node(data);\r\n            if(head!=null)\r\n               n.setNext(head);\r\n            head=n;\r\n        }\r\n        public void addrear(int data)\r\n        {\r\n            node n = new node(data);\r\n            node temp= head;\r\n            while(temp.getNext()!=null)\r\n            {\r\n                temp=temp.getNext();\r\n            }\r\n            temp.setNext(n);\r\n        }\r\n    \r\n        public void display()\r\n        {\r\n            node current = head;\r\n            while(current!=null)\r\n            {\r\n                System.out.println(current);\r\n                current=current.getNext();\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n[Execution Output Image][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ni3Dx.png\r\n\r\n\r\n","title":"Why this linked list rear operation snippet code throws error?","body":"<p>in the below snippet code contains 3 files, named main which is the main operation code, node file contains LinkedList creation and methods contains the linked list operation. In the add rear section throws error.. while execution. I have added the snippet error screshoot</p>\n<p>Main.java</p>\n<pre><code>import java.util.*; \n    public class main {\n        public static void main(String[] args) {\n            Scanner in = new Scanner(System.in);\n            while (true) {\n                System.out.println(&quot;1-&gt; add front 2-&gt;add rear 3-&gt;display&quot;);\n                System.out.println(&quot;enter your choice&quot;);\n                int ch = in.nextInt();\n                methods list = new methods();\n                switch (ch) {\n                    case 1: {\n                        System.out.println(&quot;Enter the element to add&quot;);\n                        int newAdd = in.nextInt();\n                        list.addfront(newAdd);\n                    }\n                    break;\n                    case 2: {\n                        System.out.println(&quot;Enter the element to add&quot;);\n                        int newAdd = in.nextInt();\n                        list.addrear(newAdd);\n                    }\n                    case 3:\n                        list.display();\n                        break;\n                    default:\n                        System.exit(0);\n    \n                }\n    \n    \n            }\n        }\n    }\n</code></pre>\n<p>node.java</p>\n<pre><code>public class node {\n    private int data;\n    private node next;\n\n    public node(int data) {\n        this.data = data;\n        this.next = null;\n    }\n\n    public int getData() {\n        return data;\n    }\n\n    public node getNext() {\n        return next;\n    }\n\n    public void setNext(node next) {\n        this.next = next;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;node{&quot; +\n                &quot;data=&quot; + data +\n                '}';\n    }\n}\n</code></pre>\n<p>Methods.java</p>\n<pre><code>public class methods \n{\n\n    node head;\n\n    public void addfront(int data)\n    {\n        node n= new node(data);\n        if(head!=null)\n           n.setNext(head);\n        head=n;\n    }\n    public void addrear(int data)\n    {\n        node n = new node(data);\n        node temp= head;\n        while(temp.getNext()!=null)\n        {\n            temp=temp.getNext();\n        }\n        temp.setNext(n);\n    }\n\n    public void display()\n    {\n        node current = head;\n        while(current!=null)\n        {\n            System.out.println(current);\n            current=current.getNext();\n        }\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/ni3Dx.png\" rel=\"nofollow noreferrer\">Execution Output Image</a></p>\n"},{"tags":["java","xls","aspose-cells"],"answers":[{"tags":[],"owner":{"account_id":148072,"reputation":1418,"user_id":359585,"display_name":"Saqib Razzaq"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1385044429,"creation_date":1385044429,"answer_id":20123718,"question_id":20066428,"body_markdown":"You can use the Worksheets.addCopy method to clone an existing worksheet.\r\n\r\n    // Open the workbook\r\n    Workbook book = new Workbook(srcDoc);\r\n    boolean bSomeCondition = true;\r\n    // If some condition is true e.g. dates\r\n    if (bSomeCondition)\r\n    {\r\n        // Copy first worksheet\r\n        book.getWorksheets().addCopy(&quot;Sheet1&quot;);\r\n        // Copy the second worksheet\r\n        book.getWorksheets().addCopy(&quot;Sheet2&quot;);\r\n    }\r\n    // Save the workbook\r\n    book.save(dstDoc);","title":"Dynamic sheet creation using Aspose cells in Java?","body":"<p>You can use the Worksheets.addCopy method to clone an existing worksheet.</p>\n\n<pre><code>// Open the workbook\nWorkbook book = new Workbook(srcDoc);\nboolean bSomeCondition = true;\n// If some condition is true e.g. dates\nif (bSomeCondition)\n{\n    // Copy first worksheet\n    book.getWorksheets().addCopy(\"Sheet1\");\n    // Copy the second worksheet\n    book.getWorksheets().addCopy(\"Sheet2\");\n}\n// Save the workbook\nbook.save(dstDoc);\n</code></pre>\n"}],"owner":{"account_id":3310702,"reputation":35,"user_id":2784293,"accept_rate":50,"display_name":"Vipul Ranjan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":754,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1660058449,"creation_date":1384849175,"question_id":20066428,"body_markdown":"I am using aspose-cells.jar for Excel export in my application.\r\nI am stuck where I need to dynamically create sheets in the template.\r\nMy original Excel template contains 2 sheets.\r\n\r\n 1. Sheet1 contains the table and pie-chart.\r\n 2. Sheet2 contains the data for the table and pie-chart.\r\n\r\nDepending upon the number of sample data selected these sheets has to be cloned i.e. Suppose two dates are selected then:\r\n\r\n - Sheet1 should contain the graph and pie-chart for first date.\r\n - Sheet2 should contain the graph and pie-chart for second date.\r\n\r\nAnd\r\n\r\n - Sheet3 should contain the data for first date.\r\n - Sheet4 should contain the data for second date.\r\n\r\n","title":"Dynamic sheet creation using Aspose cells in Java?","body":"<p>I am using aspose-cells.jar for Excel export in my application.\nI am stuck where I need to dynamically create sheets in the template.\nMy original Excel template contains 2 sheets.</p>\n\n<ol>\n<li>Sheet1 contains the table and pie-chart.</li>\n<li>Sheet2 contains the data for the table and pie-chart.</li>\n</ol>\n\n<p>Depending upon the number of sample data selected these sheets has to be cloned i.e. Suppose two dates are selected then:</p>\n\n<ul>\n<li>Sheet1 should contain the graph and pie-chart for first date.</li>\n<li>Sheet2 should contain the graph and pie-chart for second date.</li>\n</ul>\n\n<p>And</p>\n\n<ul>\n<li>Sheet3 should contain the data for first date.</li>\n<li>Sheet4 should contain the data for second date.</li>\n</ul>\n"},{"tags":["java","cryptography","bouncycastle","pem","der"],"answers":[{"tags":[],"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1524197157,"creation_date":1524197157,"answer_id":49933828,"question_id":49932334,"body_markdown":"Both those Qs are about parsing, and decrypting, files using OpenSSL&#39;s &#39;legacy PEM&#39; encryption. You are using PKCS8 encryption which is different though similar, so https://stackoverflow.com/questions/46767281/reading-pkcs8-in-pem-format-cannot-find-provider is closer. You can use most of the approach there, but skipping the PEM parse:\r\n\r\n    import org.bouncycastle.asn1.ASN1Sequence;\r\n    import org.bouncycastle.asn1.pkcs.EncryptedPrivateKeyInfo; // NOT the \r\n    import org.bouncycastle.asn1.pkcs.PrivateKeyInfo;       // javax ones!\r\n    import org.bouncycastle.openssl.jcajce.JcaPEMKeyConverter;\r\n    import org.bouncycastle.openssl.jcajce.JceOpenSSLPKCS8DecryptorProviderBuilder;\r\n    import org.bouncycastle.operator.InputDecryptorProvider;\r\n    import org.bouncycastle.pkcs.PKCS8EncryptedPrivateKeyInfo;\r\n\r\n\t\t// args[0] = filename args[1] = password\r\n\t\tFileInputStream fis = new FileInputStream(args[0]);\r\n\t\tbyte[] buff = new byte[9999]; int len = fis.read(buff); fis.close();\r\n\t\t// could use File.readAllBytes in j8 but my dev machine is old\r\n\t\t\r\n\t\t// create what PEMParser would have \r\n\t\tASN1Sequence derseq = ASN1Sequence.getInstance (Arrays.copyOf(buff,len));\r\n\t\tPKCS8EncryptedPrivateKeyInfo encobj = new PKCS8EncryptedPrivateKeyInfo(EncryptedPrivateKeyInfo.getInstance(derseq));\r\n\t\t// decrypt and convert key\r\n\t\tJcaPEMKeyConverter converter = new JcaPEMKeyConverter();\r\n\t    InputDecryptorProvider decryptionProv = new JceOpenSSLPKCS8DecryptorProviderBuilder().build(args[1].toCharArray());\r\n\t    PrivateKeyInfo keyInfo = encobj.decryptPrivateKeyInfo(decryptionProv);\r\n\t    PrivateKey key = converter.getPrivateKey(keyInfo);\r\n\r\n\t    // now actually use key, this is just a dummy\r\n\t    System.out.println (key.getAlgorithm());\r\n\r\n","title":"How read a PKCS8 encrypted Private key which is also encoded in DER with bouncycastle?","body":"<p>Both those Qs are about parsing, and decrypting, files using OpenSSL's 'legacy PEM' encryption. You are using PKCS8 encryption which is different though similar, so <a href=\"https://stackoverflow.com/questions/46767281/reading-pkcs8-in-pem-format-cannot-find-provider\">Reading PKCS8 in PEM format: Cannot find provider</a> is closer. You can use most of the approach there, but skipping the PEM parse:</p>\n\n<pre><code>import org.bouncycastle.asn1.ASN1Sequence;\nimport org.bouncycastle.asn1.pkcs.EncryptedPrivateKeyInfo; // NOT the \nimport org.bouncycastle.asn1.pkcs.PrivateKeyInfo;       // javax ones!\nimport org.bouncycastle.openssl.jcajce.JcaPEMKeyConverter;\nimport org.bouncycastle.openssl.jcajce.JceOpenSSLPKCS8DecryptorProviderBuilder;\nimport org.bouncycastle.operator.InputDecryptorProvider;\nimport org.bouncycastle.pkcs.PKCS8EncryptedPrivateKeyInfo;\n\n    // args[0] = filename args[1] = password\n    FileInputStream fis = new FileInputStream(args[0]);\n    byte[] buff = new byte[9999]; int len = fis.read(buff); fis.close();\n    // could use File.readAllBytes in j8 but my dev machine is old\n\n    // create what PEMParser would have \n    ASN1Sequence derseq = ASN1Sequence.getInstance (Arrays.copyOf(buff,len));\n    PKCS8EncryptedPrivateKeyInfo encobj = new PKCS8EncryptedPrivateKeyInfo(EncryptedPrivateKeyInfo.getInstance(derseq));\n    // decrypt and convert key\n    JcaPEMKeyConverter converter = new JcaPEMKeyConverter();\n    InputDecryptorProvider decryptionProv = new JceOpenSSLPKCS8DecryptorProviderBuilder().build(args[1].toCharArray());\n    PrivateKeyInfo keyInfo = encobj.decryptPrivateKeyInfo(decryptionProv);\n    PrivateKey key = converter.getPrivateKey(keyInfo);\n\n    // now actually use key, this is just a dummy\n    System.out.println (key.getAlgorithm());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16099032,"reputation":344,"user_id":11620356,"display_name":"HemanthJabalpuri"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1600495503,"creation_date":1600495503,"answer_id":63965759,"question_id":49932334,"body_markdown":"By using SpongyCastle we can get good results. I made some code that will get the desired result.\r\nSpongyCastle Jars can be downloaded from below:-\r\n[core](https://mvnrepository.com/artifact/com.madgag.spongycastle/core/1.58.0.0), [prov](https://mvnrepository.com/artifact/com.madgag.spongycastle/prov/1.58.0.0), [pkix](https://mvnrepository.com/artifact/com.madgag.spongycastle/bcpkix-jdk15on/1.58.0.0)\r\n```JAVA\r\nimport java.io.FileInputStream;\r\nimport java.io.FileOutputStream;\r\nimport java.security.PrivateKey;\r\nimport java.security.Provider;\r\nimport java.security.Security;\r\n\r\n// need core.jar, prov.jar, bcpkix-jdk15on.jar\r\nimport org.spongycastle.asn1.ASN1Sequence;\r\nimport org.spongycastle.asn1.pkcs.EncryptedPrivateKeyInfo;\r\nimport org.spongycastle.asn1.pkcs.PrivateKeyInfo;\r\nimport org.spongycastle.openssl.jcajce.JcaPEMKeyConverter;\r\nimport org.spongycastle.openssl.jcajce.JceOpenSSLPKCS8DecryptorProviderBuilder;\r\nimport org.spongycastle.operator.InputDecryptorProvider;\r\nimport org.spongycastle.pkcs.PKCS8EncryptedPrivateKeyInfo;\r\n\r\nclass Decrypt {\r\n\r\n    private static void usage() {\r\n        System.err.println(&quot; Usage: encrypted.pk8 password out_decrypted.pk8&quot;);\r\n        System.exit(2);\r\n    }\r\n\r\n    public static byte[] copyOf(byte[] original, int newLength) {\r\n        byte[] copy = new byte[newLength];\r\n        System.arraycopy(original, 0, copy, 0, Math.min(original.length, newLength));\r\n        return copy;\r\n    }\r\n\r\n    public static void loadProvider(String providerClassName)\r\n        throws ClassNotFoundException, IllegalAccessException, InstantiationException {\r\n        Class providerClass = Class.forName(providerClassName);\r\n        Provider provider = (Provider)providerClass.newInstance();\r\n//        Security.insertProviderAt(provider, 1);\r\n        Security.addProvider(provider);\r\n    }\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        if (args.length != 3) usage();\r\n\r\n        loadProvider(&quot;org.spongycastle.jce.provider.BouncyCastleProvider&quot;);\r\n\r\n        FileInputStream fis = new FileInputStream(args[0]);\r\n        byte[] buff = new byte[fis.available()];\r\n        int len = fis.read(buff);\r\n        fis.close();\r\n\r\n        // create what PEMParser would have\r\n        ASN1Sequence derseq = ASN1Sequence.getInstance(copyOf(buff, len));\r\n        EncryptedPrivateKeyInfo epkInfo = EncryptedPrivateKeyInfo.getInstance(derseq);\r\n        PKCS8EncryptedPrivateKeyInfo encobj = new PKCS8EncryptedPrivateKeyInfo(epkInfo);\r\n\r\n        // decrypt and convert key\r\n        InputDecryptorProvider decryptionProv = new JceOpenSSLPKCS8DecryptorProviderBuilder().build(args[1].toCharArray());\r\n        PrivateKeyInfo keyInfo = encobj.decryptPrivateKeyInfo(decryptionProv);\r\n        JcaPEMKeyConverter converter = new JcaPEMKeyConverter().setProvider(&quot;SC&quot;);\r\n        PrivateKey key = converter.getPrivateKey(keyInfo);\r\n\r\n        // now actually use key, this is just a dummy\r\n        System.out.println(key.getAlgorithm());\r\n\r\n        FileOutputStream fos = new FileOutputStream(args[2]);\r\n        fos.write(key.getEncoded());\r\n        fos.close();\r\n    }\r\n}\r\n```","title":"How read a PKCS8 encrypted Private key which is also encoded in DER with bouncycastle?","body":"<p>By using SpongyCastle we can get good results. I made some code that will get the desired result.\nSpongyCastle Jars can be downloaded from below:-\n<a href=\"https://mvnrepository.com/artifact/com.madgag.spongycastle/core/1.58.0.0\" rel=\"nofollow noreferrer\">core</a>, <a href=\"https://mvnrepository.com/artifact/com.madgag.spongycastle/prov/1.58.0.0\" rel=\"nofollow noreferrer\">prov</a>, <a href=\"https://mvnrepository.com/artifact/com.madgag.spongycastle/bcpkix-jdk15on/1.58.0.0\" rel=\"nofollow noreferrer\">pkix</a></p>\n<pre><code>import java.io.FileInputStream;\nimport java.io.FileOutputStream;\nimport java.security.PrivateKey;\nimport java.security.Provider;\nimport java.security.Security;\n\n// need core.jar, prov.jar, bcpkix-jdk15on.jar\nimport org.spongycastle.asn1.ASN1Sequence;\nimport org.spongycastle.asn1.pkcs.EncryptedPrivateKeyInfo;\nimport org.spongycastle.asn1.pkcs.PrivateKeyInfo;\nimport org.spongycastle.openssl.jcajce.JcaPEMKeyConverter;\nimport org.spongycastle.openssl.jcajce.JceOpenSSLPKCS8DecryptorProviderBuilder;\nimport org.spongycastle.operator.InputDecryptorProvider;\nimport org.spongycastle.pkcs.PKCS8EncryptedPrivateKeyInfo;\n\nclass Decrypt {\n\n    private static void usage() {\n        System.err.println(&quot; Usage: encrypted.pk8 password out_decrypted.pk8&quot;);\n        System.exit(2);\n    }\n\n    public static byte[] copyOf(byte[] original, int newLength) {\n        byte[] copy = new byte[newLength];\n        System.arraycopy(original, 0, copy, 0, Math.min(original.length, newLength));\n        return copy;\n    }\n\n    public static void loadProvider(String providerClassName)\n        throws ClassNotFoundException, IllegalAccessException, InstantiationException {\n        Class providerClass = Class.forName(providerClassName);\n        Provider provider = (Provider)providerClass.newInstance();\n//        Security.insertProviderAt(provider, 1);\n        Security.addProvider(provider);\n    }\n\n    public static void main(String[] args) throws Exception {\n        if (args.length != 3) usage();\n\n        loadProvider(&quot;org.spongycastle.jce.provider.BouncyCastleProvider&quot;);\n\n        FileInputStream fis = new FileInputStream(args[0]);\n        byte[] buff = new byte[fis.available()];\n        int len = fis.read(buff);\n        fis.close();\n\n        // create what PEMParser would have\n        ASN1Sequence derseq = ASN1Sequence.getInstance(copyOf(buff, len));\n        EncryptedPrivateKeyInfo epkInfo = EncryptedPrivateKeyInfo.getInstance(derseq);\n        PKCS8EncryptedPrivateKeyInfo encobj = new PKCS8EncryptedPrivateKeyInfo(epkInfo);\n\n        // decrypt and convert key\n        InputDecryptorProvider decryptionProv = new JceOpenSSLPKCS8DecryptorProviderBuilder().build(args[1].toCharArray());\n        PrivateKeyInfo keyInfo = encobj.decryptPrivateKeyInfo(decryptionProv);\n        JcaPEMKeyConverter converter = new JcaPEMKeyConverter().setProvider(&quot;SC&quot;);\n        PrivateKey key = converter.getPrivateKey(keyInfo);\n\n        // now actually use key, this is just a dummy\n        System.out.println(key.getAlgorithm());\n\n        FileOutputStream fos = new FileOutputStream(args[2]);\n        fos.write(key.getEncoded());\n        fos.close();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":4426991,"reputation":85,"user_id":3605204,"display_name":"Aloxi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9242,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":49933828,"answer_count":2,"score":5,"last_activity_date":1660058022,"creation_date":1524186105,"question_id":49932334,"body_markdown":"I have tried answers of these questions:\r\n\r\nhttps://stackoverflow.com/questions/14919048/bouncy-castle-pemreader-pemparser\r\n\r\nhttps://stackoverflow.com/questions/22920131/read-an-encrypted-private-key-with-bouncycastle-spongycastle\r\n\r\nHowever as my encrypted key is encoded in DER when I call \r\n\r\n    Object object = pemParser.readObject(); \r\nobject is null.\r\n\r\nI can convert it to PEM with this openssl&#39;s command (it decrypts the key too)\r\n\r\n    openssl pkcs8 -inform der -in pkey.key -out pkey.pem \r\n\r\nbut I need to read the key in its original file \r\n","title":"How read a PKCS8 encrypted Private key which is also encoded in DER with bouncycastle?","body":"<p>I have tried answers of these questions:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/14919048/bouncy-castle-pemreader-pemparser\">Bouncy Castle : PEMReader =&gt; PEMParser</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/22920131/read-an-encrypted-private-key-with-bouncycastle-spongycastle\">Read an encrypted private key with bouncycastle/spongycastle</a></p>\n\n<p>However as my encrypted key is encoded in DER when I call </p>\n\n<pre><code>Object object = pemParser.readObject(); \n</code></pre>\n\n<p>object is null.</p>\n\n<p>I can convert it to PEM with this openssl's command (it decrypts the key too)</p>\n\n<pre><code>openssl pkcs8 -inform der -in pkey.key -out pkey.pem \n</code></pre>\n\n<p>but I need to read the key in its original file </p>\n"},{"tags":["java","apache-camel","quarkus"],"comments":[{"owner":{"account_id":12216169,"reputation":775,"user_id":8916556,"display_name":"erayerdem"},"score":0,"creation_date":1659973432,"post_id":73279431,"comment_id":129416940,"body_markdown":"do you use native image","body":"do you use native image"},{"owner":{"account_id":3532634,"reputation":261,"user_id":2951712,"accept_rate":57,"display_name":"HexFlex"},"score":0,"creation_date":1660028562,"post_id":73279431,"comment_id":129429253,"body_markdown":"yes, I do use native image.","body":"yes, I do use native image."},{"owner":{"account_id":12216169,"reputation":775,"user_id":8916556,"display_name":"erayerdem"},"score":0,"creation_date":1660031790,"post_id":73279431,"comment_id":129430285,"body_markdown":"Can u try with jvm image if this fix  We can open issue in github","body":"Can u try with jvm image if this fix  We can open issue in github"},{"owner":{"account_id":3532634,"reputation":261,"user_id":2951712,"accept_rate":57,"display_name":"HexFlex"},"score":0,"creation_date":1660035311,"post_id":73279431,"comment_id":129431502,"body_markdown":"I ran \n\n./gradlew build -x test -Dorg.gradle.daemon=false -Dquarkus.package.type=native -Dquarkus.native.containerBuild=true -Dquarkus.native.native-image-xmx=6g --warning-mode all --stacktrace\n\nif I then try to run via the build/*-runner file I get the same error as above. \nIf I use the jar under build/quarkus-app/quarkus-run.jar I don&#39;t receive the error","body":"I ran   ./gradlew build -x test -Dorg.gradle.daemon=false -Dquarkus.package.type=native -Dquarkus.native.containerBuild=true -Dquarkus.native.native-image-xmx=6g --warning-mode all --stacktrace  if I then try to run via the build/*-runner file I get the same error as above.  If I use the jar under build/quarkus-app/quarkus-run.jar I don&#39;t receive the error"},{"owner":{"account_id":11777559,"reputation":1172,"user_id":8627215,"display_name":"James Netherton"},"score":0,"creation_date":1660040540,"post_id":73279431,"comment_id":129433317,"body_markdown":"Do you use HttpOperationFailedException with an OnException clause in your routes?","body":"Do you use HttpOperationFailedException with an OnException clause in your routes?"},{"owner":{"account_id":3532634,"reputation":261,"user_id":2951712,"accept_rate":57,"display_name":"HexFlex"},"score":0,"creation_date":1660050204,"post_id":73279431,"comment_id":129436883,"body_markdown":"Yes, I have a custom handler for it. \nI added it to the main question for readability reasons","body":"Yes, I have a custom handler for it.  I added it to the main question for readability reasons"}],"answers":[{"tags":[],"owner":{"account_id":11777559,"reputation":1172,"user_id":8627215,"display_name":"James Netherton"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1660050551,"creation_date":1660050551,"answer_id":73292399,"question_id":73279431,"body_markdown":"When using `onException` in your routes, the class that you define needs to be registered for reflection in order for it to work in native mode.\r\n\r\nSo if you have `.onException(HttpOperationFailedException.class)`, then `HttpOperationFailedException` needs to be registered for reflection. For example:\r\n\r\n```\r\n@RegisterForReflection(targets = HttpOperationFailedException.class)\r\npublic class Routes extends RouteBuilder {\r\n    public void configure() {\r\n        // Route configuration goes here\r\n    }\r\n}\r\n```\r\n\r\nThere&#39;s some more information in the Camel Quarkus user guide about this:\r\n\r\nhttps://camel.apache.org/camel-quarkus/2.11.x/user-guide/native-mode.html#using-onexception-clause-in-native-mode\r\n\r\nI opened an issue to improve things for the future so that `HttpOperationFailedException` does not need to be manually registered.\r\n\r\nhttps://github.com/apache/camel-quarkus/issues/3971","title":"Camel Quarkus ClassNotFoundException: HttpOperationFailedException","body":"<p>When using <code>onException</code> in your routes, the class that you define needs to be registered for reflection in order for it to work in native mode.</p>\n<p>So if you have <code>.onException(HttpOperationFailedException.class)</code>, then <code>HttpOperationFailedException</code> needs to be registered for reflection. For example:</p>\n<pre><code>@RegisterForReflection(targets = HttpOperationFailedException.class)\npublic class Routes extends RouteBuilder {\n    public void configure() {\n        // Route configuration goes here\n    }\n}\n</code></pre>\n<p>There's some more information in the Camel Quarkus user guide about this:</p>\n<p><a href=\"https://camel.apache.org/camel-quarkus/2.11.x/user-guide/native-mode.html#using-onexception-clause-in-native-mode\" rel=\"nofollow noreferrer\">https://camel.apache.org/camel-quarkus/2.11.x/user-guide/native-mode.html#using-onexception-clause-in-native-mode</a></p>\n<p>I opened an issue to improve things for the future so that <code>HttpOperationFailedException</code> does not need to be manually registered.</p>\n<p><a href=\"https://github.com/apache/camel-quarkus/issues/3971\" rel=\"nofollow noreferrer\">https://github.com/apache/camel-quarkus/issues/3971</a></p>\n"}],"owner":{"account_id":3532634,"reputation":261,"user_id":2951712,"accept_rate":57,"display_name":"HexFlex"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":418,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73292399,"answer_count":1,"score":0,"last_activity_date":1660057934,"creation_date":1659968555,"question_id":73279431,"body_markdown":"I have a Quarkus app that uses Apache-Camel and runs fine locally. \r\nWhen I build it and try to run the docker container then I get the following error: \r\n\r\n    ERROR [io.qua.run.Application] (main) Failed to start application (with profile prod): java.lang.ClassNotFoundException: org.apache.camel.http.base.HttpOperationFailedException\r\n\tat org.apache.camel.quarkus.core.CamelQuarkusClassResolver.resolveMandatoryClass(CamelQuarkusClassResolver.java:68)\r\n\tat org.apache.camel.reifier.errorhandler.ErrorHandlerReifier.createExceptionClasses(ErrorHandlerReifier.java:197)\r\n\tat org.apache.camel.reifier.errorhandler.ErrorHandlerReifier.addExceptionPolicy(ErrorHandlerReifier.java:177)\r\n\tat org.apache.camel.reifier.errorhandler.ErrorHandlerReifier.configure(ErrorHandlerReifier.java:220)\r\n\tat org.apache.camel.reifier.errorhandler.DefaultErrorHandlerReifier.createErrorHandler(DefaultErrorHandlerReifier.java:53)\r\n\tat org.apache.camel.impl.DefaultModelReifierFactory.createErrorHandler(DefaultModelReifierFactory.java:65)\r\n\tat org.apache.camel.reifier.errorhandler.ErrorHandlerRefReifier.createErrorHandler(ErrorHandlerRefReifier.java:36)\r\n\tat org.apache.camel.impl.DefaultModelReifierFactory.createErrorHandler(DefaultModelReifierFactory.java:65)\r\n\tat org.apache.camel.reifier.ProcessorReifier.wrapInErrorHandler(ProcessorReifier.java:751)\r\n\tat org.apache.camel.reifier.ProcessorReifier.wrapChannelInErrorHandler(ProcessorReifier.java:732)\r\n\tat org.apache.camel.reifier.ProcessorReifier.wrapChannel(ProcessorReifier.java:711)\r\n\tat org.apache.camel.reifier.ProcessorReifier.wrapChannel(ProcessorReifier.java:617)\r\n\tat org.apache.camel.reifier.ProcessorReifier.wrapProcessor(ProcessorReifier.java:613)\r\n\tat org.apache.camel.reifier.ProcessorReifier.makeProcessor(ProcessorReifier.java:860)\r\n\tat org.apache.camel.reifier.ProcessorReifier.addRoutes(ProcessorReifier.java:585)\r\n\tat org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:236)\r\n\tat org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:74)\r\n\tat org.apache.camel.impl.DefaultModelReifierFactory.createRoute(DefaultModelReifierFactory.java:49)\r\n\tat org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:887)\r\n\tat org.apache.camel.impl.DefaultModel.addRouteDefinitions(DefaultModel.java:190)\r\n\tat org.apache.camel.impl.DefaultCamelContext.addRouteDefinitions(DefaultCamelContext.java:344)\r\n\tat org.apache.camel.builder.RouteBuilder.populateRoutes(RouteBuilder.java:676)\r\n\tat org.apache.camel.builder.RouteBuilder.addRoutesToCamelContext(RouteBuilder.java:529)\r\n\tat org.apache.camel.impl.engine.AbstractCamelContext.addRoutes(AbstractCamelContext.java:1175)\r\n\tat io.quarkus.arc.impl.EventImpl$Notifier.notifyObservers(EventImpl.java:323)\r\n\tat io.quarkus.arc.impl.EventImpl$Notifier.notify(EventImpl.java:305)\r\n\tat io.quarkus.arc.impl.EventImpl.fire(EventImpl.java:73)\r\n\tat io.quarkus.arc.runtime.ArcRecorder.fireLifecycleEvent(ArcRecorder.java:130)\r\n\tat io.quarkus.arc.runtime.ArcRecorder.handleLifecycleEvents(ArcRecorder.java:99)\r\n\tat io.quarkus.deployment.steps.LifecycleEventsBuildStep$startupEvent1144526294.deploy_0(Unknown Source)\r\n\tat io.quarkus.deployment.steps.LifecycleEventsBuildStep$startupEvent1144526294.deploy(Unknown Source)\r\n\tat io.quarkus.runner.ApplicationImpl.doStart(Unknown Source)\r\n\tat io.quarkus.runtime.Application.start(Application.java:101)\r\n\tat io.quarkus.runtime.ApplicationLifecycleManager.run(ApplicationLifecycleManager.java:103)\r\n\tat io.quarkus.runtime.Quarkus.run(Quarkus.java:67)\r\n\tat io.quarkus.runtime.Quarkus.run(Quarkus.java:41)\r\n\tat io.quarkus.runtime.Quarkus.run(Quarkus.java:120)\r\n\tat io.quarkus.runner.GeneratedMain.main(Unknown Source)\r\n\r\n\r\nMy gradle dependencies are\r\n\r\n    dependencies {\r\n    implementation &#39;io.quarkus:quarkus-container-image-docker&#39;\r\n    implementation enforcedPlatform(&quot;${quarkusPlatformGroupId}:${quarkusPlatformArtifactId}:${quarkusPlatformVersion}&quot;)\r\n    implementation enforcedPlatform(&quot;${quarkusPlatformGroupId}:quarkus-camel-bom:${quarkusPlatformVersion}&quot;)\r\n    implementation &#39;io.quarkus:quarkus-arc&#39;\r\n    implementation &#39;io.quarkus:quarkus-config-yaml&#39;\r\n\r\n    implementation &#39;io.quarkus:quarkus-smallrye-jwt&#39;\r\n    implementation &#39;io.quarkus:quarkus-smallrye-health&#39;\r\n    implementation &#39;io.quarkus:quarkus-smallrye-metrics&#39;\r\n    implementation &#39;io.quarkus:quarkus-smallrye-openapi&#39;\r\n    implementation &#39;io.quarkus:quarkus-smallrye-jwt-build&#39;\r\n\r\n    implementation &#39;io.quarkus:quarkus-jackson&#39;\r\n    implementation &#39;io.quarkus:quarkus-resteasy-jackson&#39;\r\n    implementation &#39;io.quarkus:quarkus-resteasy&#39;\r\n\r\n    implementation &#39;org.apache.camel.quarkus:camel-quarkus-file&#39;\r\n    implementation &#39;org.apache.camel.quarkus:camel-quarkus-core&#39;\r\n    implementation &#39;org.apache.camel.quarkus:camel-quarkus-base64&#39;\r\n    implementation &#39;org.apache.camel.quarkus:camel-quarkus-ahc&#39;\r\n    implementation &#39;org.apache.camel.quarkus:camel-quarkus-jackson&#39;\r\n    implementation &#39;org.apache.camel.quarkus:camel-quarkus-ftp&#39;\r\n    implementation &#39;org.apache.camel.quarkus:camel-quarkus-rest&#39;\r\n    implementation &#39;org.apache.camel.quarkus:camel-quarkus-http&#39;\r\n\r\n    implementation group: &#39;org.apache.httpcomponents&#39;, name: &#39;httpmime&#39;, version: &#39;4.3.1&#39;\r\n\r\n    testImplementation &#39;io.quarkus:quarkus-junit5&#39;\r\n    testImplementation &#39;io.rest-assured:rest-assured&#39;\r\n\r\n    compileOnly &#39;org.projectlombok:lombok:1.18.16&#39;\r\n}\r\n\r\nWhen I run it with &quot;quarkus dev&quot; in IntelliJ Terminal I have no problems. Do I try to run the container I get the error. Why does it happen? I have no clue how to solve it. \r\n\r\n\r\nEdit: \r\n\r\nWhere the HttpException ist handled: \r\n\r\n     onException(HttpOperationFailedException.class)\r\n                .process(new HttpExceptionHandler())\r\n                .maximumRedeliveries(5)\r\n                .redeliveryDelay(1000L)\r\n                .backOffMultiplier(2)\r\n                .retryAttemptedLogLevel(LoggingLevel.WARN)\r\n                .handled(true)\r\n                .stop();\r\n\r\nThe Handler itself: \r\n\r\n    import org.apache.camel.Exchange;\r\n    import org.apache.camel.component.file.FileConstants;\r\n    import org.apache.camel.http.base.HttpOperationFailedException;\r\n    import org.jboss.logging.Logger;\r\n    \r\n    public class HttpExceptionHandler implements org.apache.camel.Processor {\r\n\r\n    private static final Logger LOG = Logger.getLogger(HttpExceptionHandler.class);\r\n\r\n    @Override\r\n    public void process(Exchange exchange) {\r\n        HttpOperationFailedException failedException = exchange.getProperty(\r\n                Exchange.EXCEPTION_CAUGHT,\r\n                HttpOperationFailedException.class);\r\n\r\n        ...\r\n\r\n    }\r\n}\r\n","title":"Camel Quarkus ClassNotFoundException: HttpOperationFailedException","body":"<p>I have a Quarkus app that uses Apache-Camel and runs fine locally.\nWhen I build it and try to run the docker container then I get the following error:</p>\n<pre><code>ERROR [io.qua.run.Application] (main) Failed to start application (with profile prod): java.lang.ClassNotFoundException: org.apache.camel.http.base.HttpOperationFailedException\nat org.apache.camel.quarkus.core.CamelQuarkusClassResolver.resolveMandatoryClass(CamelQuarkusClassResolver.java:68)\nat org.apache.camel.reifier.errorhandler.ErrorHandlerReifier.createExceptionClasses(ErrorHandlerReifier.java:197)\nat org.apache.camel.reifier.errorhandler.ErrorHandlerReifier.addExceptionPolicy(ErrorHandlerReifier.java:177)\nat org.apache.camel.reifier.errorhandler.ErrorHandlerReifier.configure(ErrorHandlerReifier.java:220)\nat org.apache.camel.reifier.errorhandler.DefaultErrorHandlerReifier.createErrorHandler(DefaultErrorHandlerReifier.java:53)\nat org.apache.camel.impl.DefaultModelReifierFactory.createErrorHandler(DefaultModelReifierFactory.java:65)\nat org.apache.camel.reifier.errorhandler.ErrorHandlerRefReifier.createErrorHandler(ErrorHandlerRefReifier.java:36)\nat org.apache.camel.impl.DefaultModelReifierFactory.createErrorHandler(DefaultModelReifierFactory.java:65)\nat org.apache.camel.reifier.ProcessorReifier.wrapInErrorHandler(ProcessorReifier.java:751)\nat org.apache.camel.reifier.ProcessorReifier.wrapChannelInErrorHandler(ProcessorReifier.java:732)\nat org.apache.camel.reifier.ProcessorReifier.wrapChannel(ProcessorReifier.java:711)\nat org.apache.camel.reifier.ProcessorReifier.wrapChannel(ProcessorReifier.java:617)\nat org.apache.camel.reifier.ProcessorReifier.wrapProcessor(ProcessorReifier.java:613)\nat org.apache.camel.reifier.ProcessorReifier.makeProcessor(ProcessorReifier.java:860)\nat org.apache.camel.reifier.ProcessorReifier.addRoutes(ProcessorReifier.java:585)\nat org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:236)\nat org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:74)\nat org.apache.camel.impl.DefaultModelReifierFactory.createRoute(DefaultModelReifierFactory.java:49)\nat org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:887)\nat org.apache.camel.impl.DefaultModel.addRouteDefinitions(DefaultModel.java:190)\nat org.apache.camel.impl.DefaultCamelContext.addRouteDefinitions(DefaultCamelContext.java:344)\nat org.apache.camel.builder.RouteBuilder.populateRoutes(RouteBuilder.java:676)\nat org.apache.camel.builder.RouteBuilder.addRoutesToCamelContext(RouteBuilder.java:529)\nat org.apache.camel.impl.engine.AbstractCamelContext.addRoutes(AbstractCamelContext.java:1175)\nat io.quarkus.arc.impl.EventImpl$Notifier.notifyObservers(EventImpl.java:323)\nat io.quarkus.arc.impl.EventImpl$Notifier.notify(EventImpl.java:305)\nat io.quarkus.arc.impl.EventImpl.fire(EventImpl.java:73)\nat io.quarkus.arc.runtime.ArcRecorder.fireLifecycleEvent(ArcRecorder.java:130)\nat io.quarkus.arc.runtime.ArcRecorder.handleLifecycleEvents(ArcRecorder.java:99)\nat io.quarkus.deployment.steps.LifecycleEventsBuildStep$startupEvent1144526294.deploy_0(Unknown Source)\nat io.quarkus.deployment.steps.LifecycleEventsBuildStep$startupEvent1144526294.deploy(Unknown Source)\nat io.quarkus.runner.ApplicationImpl.doStart(Unknown Source)\nat io.quarkus.runtime.Application.start(Application.java:101)\nat io.quarkus.runtime.ApplicationLifecycleManager.run(ApplicationLifecycleManager.java:103)\nat io.quarkus.runtime.Quarkus.run(Quarkus.java:67)\nat io.quarkus.runtime.Quarkus.run(Quarkus.java:41)\nat io.quarkus.runtime.Quarkus.run(Quarkus.java:120)\nat io.quarkus.runner.GeneratedMain.main(Unknown Source)\n</code></pre>\n<p>My gradle dependencies are</p>\n<pre><code>dependencies {\nimplementation 'io.quarkus:quarkus-container-image-docker'\nimplementation enforcedPlatform(&quot;${quarkusPlatformGroupId}:${quarkusPlatformArtifactId}:${quarkusPlatformVersion}&quot;)\nimplementation enforcedPlatform(&quot;${quarkusPlatformGroupId}:quarkus-camel-bom:${quarkusPlatformVersion}&quot;)\nimplementation 'io.quarkus:quarkus-arc'\nimplementation 'io.quarkus:quarkus-config-yaml'\n\nimplementation 'io.quarkus:quarkus-smallrye-jwt'\nimplementation 'io.quarkus:quarkus-smallrye-health'\nimplementation 'io.quarkus:quarkus-smallrye-metrics'\nimplementation 'io.quarkus:quarkus-smallrye-openapi'\nimplementation 'io.quarkus:quarkus-smallrye-jwt-build'\n\nimplementation 'io.quarkus:quarkus-jackson'\nimplementation 'io.quarkus:quarkus-resteasy-jackson'\nimplementation 'io.quarkus:quarkus-resteasy'\n\nimplementation 'org.apache.camel.quarkus:camel-quarkus-file'\nimplementation 'org.apache.camel.quarkus:camel-quarkus-core'\nimplementation 'org.apache.camel.quarkus:camel-quarkus-base64'\nimplementation 'org.apache.camel.quarkus:camel-quarkus-ahc'\nimplementation 'org.apache.camel.quarkus:camel-quarkus-jackson'\nimplementation 'org.apache.camel.quarkus:camel-quarkus-ftp'\nimplementation 'org.apache.camel.quarkus:camel-quarkus-rest'\nimplementation 'org.apache.camel.quarkus:camel-quarkus-http'\n\nimplementation group: 'org.apache.httpcomponents', name: 'httpmime', version: '4.3.1'\n\ntestImplementation 'io.quarkus:quarkus-junit5'\ntestImplementation 'io.rest-assured:rest-assured'\n\ncompileOnly 'org.projectlombok:lombok:1.18.16'\n</code></pre>\n<p>}</p>\n<p>When I run it with &quot;quarkus dev&quot; in IntelliJ Terminal I have no problems. Do I try to run the container I get the error. Why does it happen? I have no clue how to solve it.</p>\n<p>Edit:</p>\n<p>Where the HttpException ist handled:</p>\n<pre><code> onException(HttpOperationFailedException.class)\n            .process(new HttpExceptionHandler())\n            .maximumRedeliveries(5)\n            .redeliveryDelay(1000L)\n            .backOffMultiplier(2)\n            .retryAttemptedLogLevel(LoggingLevel.WARN)\n            .handled(true)\n            .stop();\n</code></pre>\n<p>The Handler itself:</p>\n<pre><code>import org.apache.camel.Exchange;\nimport org.apache.camel.component.file.FileConstants;\nimport org.apache.camel.http.base.HttpOperationFailedException;\nimport org.jboss.logging.Logger;\n\npublic class HttpExceptionHandler implements org.apache.camel.Processor {\n\nprivate static final Logger LOG = Logger.getLogger(HttpExceptionHandler.class);\n\n@Override\npublic void process(Exchange exchange) {\n    HttpOperationFailedException failedException = exchange.getProperty(\n            Exchange.EXCEPTION_CAUGHT,\n            HttpOperationFailedException.class);\n\n    ...\n\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","rsa","bouncycastle","pem","pkcs#8"],"comments":[{"owner":{"account_id":322938,"reputation":6203,"user_id":642653,"accept_rate":89,"display_name":"divanov"},"score":0,"creation_date":1397362196,"post_id":22920131,"comment_id":35199384,"body_markdown":"This is encrypted key (TripleDES with CBC mode and input vector 68949227DD8A502D). Thus, before PEMReader can read it, it must be decrypted first.","body":"This is encrypted key (TripleDES with CBC mode and input vector 68949227DD8A502D). Thus, before PEMReader can read it, it must be decrypted first."},{"owner":{"account_id":1737339,"reputation":782,"user_id":1589588,"accept_rate":56,"display_name":"Gert-Jan"},"score":0,"creation_date":1474277769,"post_id":22920131,"comment_id":66449527,"body_markdown":"Please note that the key is encrypted with an old (and insecure) algorithm. Current practice is to use PKCS#8 to protect private keys. Bouncy Castle has support for PKCS#8 decryption in the JceOpenSSLPKCS8DecryptorProviderBuilder class.","body":"Please note that the key is encrypted with an old (and insecure) algorithm. Current practice is to use PKCS#8 to protect private keys. Bouncy Castle has support for PKCS#8 decryption in the JceOpenSSLPKCS8DecryptorProviderBuilder class."}],"answers":[{"tags":[],"owner":{"account_id":2176060,"reputation":3477,"user_id":1926725,"accept_rate":38,"display_name":"monim"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1549354962,"creation_date":1399533549,"answer_id":23535232,"question_id":22920131,"body_markdown":"Using the answer for &lt;a href=&quot;https://stackoverflow.com/questions/14919048/bouncy-castle-pemreader-pemparser&quot;&gt;this question&lt;/a&gt; you should do the following   \r\n\r\n    File privateKeyFile = new File(privateKeyFileName); // private key file in PEM format\r\n    PEMParser pemParser = new PEMParser(new FileReader(privateKeyFile));\r\n    Object object = pemParser.readObject();\r\n    PEMDecryptorProvider decProv = new JcePEMDecryptorProviderBuilder().build(password.toCharArray());\r\n    JcaPEMKeyConverter converter = new JcaPEMKeyConverter().setProvider(&quot;BC&quot;);\r\n    KeyPair kp;\r\n    if (object instanceof PEMEncryptedKeyPair) {\r\n        kp = converter.getKeyPair(((PEMEncryptedKeyPair) object).decryptKeyPair(decProv));\r\n    }\r\n\r\nThen you can say  \r\n\r\n    PrivateKey key = kp.getPrivateKey();","title":"Read an encrypted private key with bouncycastle/spongycastle","body":"<p>Using the answer for <a href=\"https://stackoverflow.com/questions/14919048/bouncy-castle-pemreader-pemparser\">this question</a> you should do the following   </p>\n\n<pre><code>File privateKeyFile = new File(privateKeyFileName); // private key file in PEM format\nPEMParser pemParser = new PEMParser(new FileReader(privateKeyFile));\nObject object = pemParser.readObject();\nPEMDecryptorProvider decProv = new JcePEMDecryptorProviderBuilder().build(password.toCharArray());\nJcaPEMKeyConverter converter = new JcaPEMKeyConverter().setProvider(\"BC\");\nKeyPair kp;\nif (object instanceof PEMEncryptedKeyPair) {\n    kp = converter.getKeyPair(((PEMEncryptedKeyPair) object).decryptKeyPair(decProv));\n}\n</code></pre>\n\n<p>Then you can say  </p>\n\n<pre><code>PrivateKey key = kp.getPrivateKey();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1821105,"reputation":834,"user_id":1655155,"display_name":"Bludwarf"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1620652337,"creation_date":1403003716,"answer_id":24262342,"question_id":22920131,"body_markdown":"To sum up what I found on this topic [here][1] and [there][2]  : \r\n\r\nHere is the final code if you want to get the modulus for example :\r\n\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    import java.io.FileReader;\r\n    import java.security.Security;\r\n    import java.security.KeyFactory\r\n    import org.bouncycastle.jce.provider.BouncyCastleProvider;\r\n    // Note that you need to add &#39;pkix&#39; package. e.g. &#39;org.bouncycastle:bcpkix-jdk15on&#39;\r\n    import org.bouncycastle.openssl.PEMEncryptedKeyPair;\r\n    import org.bouncycastle.openssl.PEMParser;\r\n    import org.bouncycastle.openssl.PEMDecryptorProvider;\r\n    import org.bouncycastle.openssl.PEMKeyPair;\r\n    import org.bouncycastle.openssl.jcajce.JcaPEMKeyConverter;\r\n    import org.bouncycastle.openssl.jcajce.JcePEMDecryptorProviderBuilder;\r\n    \r\n    // For JcaPEMKeyConverter().setProvider(&quot;BC&quot;)\r\n    Security.addProvider(new org.bouncycastle.jce.provider.BouncyCastleProvider());\r\n    \r\n    // Using bcpkix-jdk14-1.48\r\n    PEMParser pemParser = new PEMParser(new FileReader(file));\r\n    Object object = pemParser.readObject();\r\n    JcaPEMKeyConverter converter = new JcaPEMKeyConverter().setProvider(&quot;BC&quot;);\r\n    KeyPair kp;\r\n    if (object instanceof PEMEncryptedKeyPair)\r\n    {\r\n        // Encrypted key - we will use provided password\r\n        PEMEncryptedKeyPair ckp = (PEMEncryptedKeyPair) object;\r\n        PEMDecryptorProvider decProv = new JcePEMDecryptorProviderBuilder().build(password.toCharArray());\r\n        kp = converter.getKeyPair(ckp.decryptKeyPair(decProv));\r\n    }\r\n    else\r\n    {\r\n        // Unencrypted key - no password needed\r\n        PEMKeyPair ukp = (PEMKeyPair) object;\r\n        kp = converter.getKeyPair(ukp);\r\n    }\r\n    \r\n    // RSA\r\n    KeyFactory keyFac = KeyFactory.getInstance(&quot;RSA&quot;);\r\n    RSAPrivateCrtKeySpec privateKey = keyFac.getKeySpec(kp.getPrivate(), RSAPrivateCrtKeySpec.class);\r\n    \r\n    return privateKey;\r\n\r\nAnd then you can call for example :\r\n\r\n    privateKey.getModulus();\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/3711786/1655155\r\n  [2]: https://stackoverflow.com/a/15124237/1655155","title":"Read an encrypted private key with bouncycastle/spongycastle","body":"<p>To sum up what I found on this topic <a href=\"https://stackoverflow.com/a/3711786/1655155\">here</a> and <a href=\"https://stackoverflow.com/a/15124237/1655155\">there</a>  :</p>\n<p>Here is the final code if you want to get the modulus for example :</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.FileReader;\nimport java.security.Security;\nimport java.security.KeyFactory\nimport org.bouncycastle.jce.provider.BouncyCastleProvider;\n// Note that you need to add 'pkix' package. e.g. 'org.bouncycastle:bcpkix-jdk15on'\nimport org.bouncycastle.openssl.PEMEncryptedKeyPair;\nimport org.bouncycastle.openssl.PEMParser;\nimport org.bouncycastle.openssl.PEMDecryptorProvider;\nimport org.bouncycastle.openssl.PEMKeyPair;\nimport org.bouncycastle.openssl.jcajce.JcaPEMKeyConverter;\nimport org.bouncycastle.openssl.jcajce.JcePEMDecryptorProviderBuilder;\n\n// For JcaPEMKeyConverter().setProvider(&quot;BC&quot;)\nSecurity.addProvider(new org.bouncycastle.jce.provider.BouncyCastleProvider());\n\n// Using bcpkix-jdk14-1.48\nPEMParser pemParser = new PEMParser(new FileReader(file));\nObject object = pemParser.readObject();\nJcaPEMKeyConverter converter = new JcaPEMKeyConverter().setProvider(&quot;BC&quot;);\nKeyPair kp;\nif (object instanceof PEMEncryptedKeyPair)\n{\n    // Encrypted key - we will use provided password\n    PEMEncryptedKeyPair ckp = (PEMEncryptedKeyPair) object;\n    PEMDecryptorProvider decProv = new JcePEMDecryptorProviderBuilder().build(password.toCharArray());\n    kp = converter.getKeyPair(ckp.decryptKeyPair(decProv));\n}\nelse\n{\n    // Unencrypted key - no password needed\n    PEMKeyPair ukp = (PEMKeyPair) object;\n    kp = converter.getKeyPair(ukp);\n}\n\n// RSA\nKeyFactory keyFac = KeyFactory.getInstance(&quot;RSA&quot;);\nRSAPrivateCrtKeySpec privateKey = keyFac.getKeySpec(kp.getPrivate(), RSAPrivateCrtKeySpec.class);\n\nreturn privateKey;\n</code></pre>\n<p>And then you can call for example :</p>\n<pre><code>privateKey.getModulus();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1961640,"reputation":12136,"user_id":1763035,"accept_rate":56,"display_name":"Andy Brown"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1593947161,"creation_date":1593947161,"answer_id":62739844,"question_id":22920131,"body_markdown":"The following static method will handle all the following PEM encoding styles for encrypted private keys:\r\n\r\n```\r\n-----BEGIN ENCRYPTED PRIVATE KEY-----\r\n-----BEGIN PRIVATE KEY-----\r\n-----BEGIN EC PRIVATE KEY-----\r\n```\r\nFirst ensure that you&#39;ve registered BC as a security provider then you can use this method:\r\n```\r\n  static public PrivateKey stringToPrivateKey(String s, String password)\r\n      throws IOException, PKCSException {\r\n\r\n    PrivateKeyInfo pki;\r\n\r\n    try (PEMParser pemParser = new PEMParser(new StringReader(s))) {\r\n\r\n      Object o = pemParser.readObject();\r\n\r\n      if (o instanceof PKCS8EncryptedPrivateKeyInfo) {\r\n\r\n        PKCS8EncryptedPrivateKeyInfo epki = (PKCS8EncryptedPrivateKeyInfo) o;\r\n\r\n        JcePKCSPBEInputDecryptorProviderBuilder builder =\r\n            new JcePKCSPBEInputDecryptorProviderBuilder().setProvider(bc);\r\n\r\n        InputDecryptorProvider idp = builder.build(password.toCharArray());\r\n\r\n        pki = epki.decryptPrivateKeyInfo(idp);\r\n      } else if (o instanceof PEMEncryptedKeyPair) {\r\n\r\n        PEMEncryptedKeyPair epki = (PEMEncryptedKeyPair) o;\r\n        PEMKeyPair pkp = epki.decryptKeyPair(new BcPEMDecryptorProvider(password.toCharArray()));\r\n\r\n        pki = pkp.getPrivateKeyInfo();\r\n      } else {\r\n        throw new PKCSException(&quot;Invalid encrypted private key class: &quot; + o.getClass().getName());\r\n      }\r\n\r\n      JcaPEMKeyConverter converter = new JcaPEMKeyConverter().setProvider(bc);\r\n      return converter.getPrivateKey(pki);\r\n    }\r\n  }\r\n```\r\n","title":"Read an encrypted private key with bouncycastle/spongycastle","body":"<p>The following static method will handle all the following PEM encoding styles for encrypted private keys:</p>\n<pre><code>-----BEGIN ENCRYPTED PRIVATE KEY-----\n-----BEGIN PRIVATE KEY-----\n-----BEGIN EC PRIVATE KEY-----\n</code></pre>\n<p>First ensure that you've registered BC as a security provider then you can use this method:</p>\n<pre><code>  static public PrivateKey stringToPrivateKey(String s, String password)\n      throws IOException, PKCSException {\n\n    PrivateKeyInfo pki;\n\n    try (PEMParser pemParser = new PEMParser(new StringReader(s))) {\n\n      Object o = pemParser.readObject();\n\n      if (o instanceof PKCS8EncryptedPrivateKeyInfo) {\n\n        PKCS8EncryptedPrivateKeyInfo epki = (PKCS8EncryptedPrivateKeyInfo) o;\n\n        JcePKCSPBEInputDecryptorProviderBuilder builder =\n            new JcePKCSPBEInputDecryptorProviderBuilder().setProvider(bc);\n\n        InputDecryptorProvider idp = builder.build(password.toCharArray());\n\n        pki = epki.decryptPrivateKeyInfo(idp);\n      } else if (o instanceof PEMEncryptedKeyPair) {\n\n        PEMEncryptedKeyPair epki = (PEMEncryptedKeyPair) o;\n        PEMKeyPair pkp = epki.decryptKeyPair(new BcPEMDecryptorProvider(password.toCharArray()));\n\n        pki = pkp.getPrivateKeyInfo();\n      } else {\n        throw new PKCSException(&quot;Invalid encrypted private key class: &quot; + o.getClass().getName());\n      }\n\n      JcaPEMKeyConverter converter = new JcaPEMKeyConverter().setProvider(bc);\n      return converter.getPrivateKey(pki);\n    }\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22538444,"reputation":11,"user_id":16729321,"display_name":"Stone"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1629684340,"creation_date":1629684340,"answer_id":68886534,"question_id":22920131,"body_markdown":"\r\n       //https://stackoverflow.com/questions/7216969/getting-rsa-private-key-from-pem-base64-encoded-private-key-file\r\n    //https://stackoverflow.com/questions/5271189/how-to-convert-a-pkcs8-encoded-rsa-key-into-pkcs1-in-java\r\n    //https://stackoverflow.com/questions/22920131/read-an-encrypted-private-key-with-bouncycastle-spongycastle\r\n    private static void decrypt() throws IOException, NoSuchAlgorithmException, InvalidKeySpecException {\r\n        // For JcaPEMKeyConverter().setProvider(&quot;BC&quot;)\r\n        Security.addProvider(new org.bouncycastle.jce.provider.BouncyCastleProvider());\r\n        String caPrivateKeyFname = &quot;E:\\\\xxx\\\\key.pem&quot;;\r\n\r\n        FileInputStream fis = null;\r\n        try {\r\n            fis = new FileInputStream(caPrivateKeyFname);\r\n        } catch (FileNotFoundException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        //Load and parse PEM object\r\n        PEMParser pemParser = new PEMParser(new InputStreamReader(fis));\r\n        Object object = pemParser.readObject();\r\n        JcaPEMKeyConverter converter = new JcaPEMKeyConverter().setProvider(&quot;BC&quot;);\r\n        KeyPair kp;\r\n        //password\r\n        String pwd = &quot;typePassword&quot;;\r\n        if (object instanceof PEMEncryptedKeyPair) {\r\n            // Encrypted key - we will use provided password\r\n            PEMEncryptedKeyPair ckp = (PEMEncryptedKeyPair) object;\r\n            PEMDecryptorProvider decProv = new JcePEMDecryptorProviderBuilder().build(pwd.toCharArray());\r\n            kp = converter.getKeyPair(ckp.decryptKeyPair(decProv));\r\n        } else {\r\n            // Unencrypted key - no password needed\r\n            PEMKeyPair ukp = (PEMKeyPair) object;\r\n            kp = converter.getKeyPair(ukp);\r\n        }\r\n        // RSA\r\n        KeyFactory keyFac = KeyFactory.getInstance(&quot;RSA&quot;);\r\n        RSAPrivateCrtKeySpec privateKey = keyFac.getKeySpec(kp.getPrivate(), RSAPrivateCrtKeySpec.class);\r\n\r\n        PrivateKey privateKey1 = keyFac.generatePrivate(privateKey);\r\n        //This is the same as the output below\r\n        Base64Encoder.encode(privateKey1.getEncoded());\r\n\r\n        PrivateKeyInfo pkInfo = PrivateKeyInfo.getInstance(privateKey1.getEncoded());\r\n        ASN1Encodable privateKeyPKCS1ASN1Encodable = pkInfo.parsePrivateKey();\r\n        ASN1Primitive privateKeyPKCS1ASN1 = privateKeyPKCS1ASN1Encodable.toASN1Primitive();\r\n        SONBASE64Encoder encoder = new SONBASE64Encoder();\r\n        System.out.println(encoder.encode(privateKeyPKCS1ASN1.getEncoded()));\r\n\r\n    }\r\n\r\n\r\nThe above code should solve the decryption problem and put pkcs8 encoded rsa-key into pkcs1","title":"Read an encrypted private key with bouncycastle/spongycastle","body":"<pre><code>   //https://stackoverflow.com/questions/7216969/getting-rsa-private-key-from-pem-base64-encoded-private-key-file\n//https://stackoverflow.com/questions/5271189/how-to-convert-a-pkcs8-encoded-rsa-key-into-pkcs1-in-java\n//https://stackoverflow.com/questions/22920131/read-an-encrypted-private-key-with-bouncycastle-spongycastle\nprivate static void decrypt() throws IOException, NoSuchAlgorithmException, InvalidKeySpecException {\n    // For JcaPEMKeyConverter().setProvider(&quot;BC&quot;)\n    Security.addProvider(new org.bouncycastle.jce.provider.BouncyCastleProvider());\n    String caPrivateKeyFname = &quot;E:\\\\xxx\\\\key.pem&quot;;\n\n    FileInputStream fis = null;\n    try {\n        fis = new FileInputStream(caPrivateKeyFname);\n    } catch (FileNotFoundException e) {\n        e.printStackTrace();\n    }\n\n    //Load and parse PEM object\n    PEMParser pemParser = new PEMParser(new InputStreamReader(fis));\n    Object object = pemParser.readObject();\n    JcaPEMKeyConverter converter = new JcaPEMKeyConverter().setProvider(&quot;BC&quot;);\n    KeyPair kp;\n    //password\n    String pwd = &quot;typePassword&quot;;\n    if (object instanceof PEMEncryptedKeyPair) {\n        // Encrypted key - we will use provided password\n        PEMEncryptedKeyPair ckp = (PEMEncryptedKeyPair) object;\n        PEMDecryptorProvider decProv = new JcePEMDecryptorProviderBuilder().build(pwd.toCharArray());\n        kp = converter.getKeyPair(ckp.decryptKeyPair(decProv));\n    } else {\n        // Unencrypted key - no password needed\n        PEMKeyPair ukp = (PEMKeyPair) object;\n        kp = converter.getKeyPair(ukp);\n    }\n    // RSA\n    KeyFactory keyFac = KeyFactory.getInstance(&quot;RSA&quot;);\n    RSAPrivateCrtKeySpec privateKey = keyFac.getKeySpec(kp.getPrivate(), RSAPrivateCrtKeySpec.class);\n\n    PrivateKey privateKey1 = keyFac.generatePrivate(privateKey);\n    //This is the same as the output below\n    Base64Encoder.encode(privateKey1.getEncoded());\n\n    PrivateKeyInfo pkInfo = PrivateKeyInfo.getInstance(privateKey1.getEncoded());\n    ASN1Encodable privateKeyPKCS1ASN1Encodable = pkInfo.parsePrivateKey();\n    ASN1Primitive privateKeyPKCS1ASN1 = privateKeyPKCS1ASN1Encodable.toASN1Primitive();\n    SONBASE64Encoder encoder = new SONBASE64Encoder();\n    System.out.println(encoder.encode(privateKeyPKCS1ASN1.getEncoded()));\n\n}\n</code></pre>\n<p>The above code should solve the decryption problem and put pkcs8 encoded rsa-key into pkcs1</p>\n"}],"owner":{"account_id":4291707,"reputation":101,"user_id":3507885,"display_name":"user3507885"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31082,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"answer_count":4,"score":10,"last_activity_date":1660057833,"creation_date":1396894863,"question_id":22920131,"body_markdown":"I have a password protected, encrypted RSA private key, which was created with PyCrypto (2.6.1) and has according to their docs the following format: `PrivateKeyInfo, PKCS#8 (DER SEQUENCE), PEM (RFC1423)`, see \r\n[https://www.dlitz.net/software/pycrypto/api/current/Crypto.PublicKey.RSA._RSAobj-class.html#exportKey].\r\n\r\nHow can I decrypt this RSA key with Bouncycastle/Spongycastle?\r\n\r\nI&#39;ve searched Google for quite a long time and only came up with results, that either won&#39;t work with version 1.50 (because PEMReader was deprecated and got removed) or with examples of PEMParser who seems to could not read this format. BTW: Is there any documentation on Bouncycastle I missed? \r\n\r\nThis is the header of my encrypted private key:\r\n\r\n    -----BEGIN PRIVATE KEY-----\r\n    Proc-Type: 4,ENCRYPTED\r\n    DEK-Info: DES-EDE3-CBC,68949227DD8A502D\r\n    xyz...\r\n\r\n\r\n\r\nI would really be thankful, if anyone could help me out!","title":"Read an encrypted private key with bouncycastle/spongycastle","body":"<p>I have a password protected, encrypted RSA private key, which was created with PyCrypto (2.6.1) and has according to their docs the following format: <code>PrivateKeyInfo, PKCS#8 (DER SEQUENCE), PEM (RFC1423)</code>, see \n[<a href=\"https://www.dlitz.net/software/pycrypto/api/current/Crypto.PublicKey.RSA._RSAobj-class.html#exportKey]\" rel=\"noreferrer\">https://www.dlitz.net/software/pycrypto/api/current/Crypto.PublicKey.RSA._RSAobj-class.html#exportKey]</a>.</p>\n\n<p>How can I decrypt this RSA key with Bouncycastle/Spongycastle?</p>\n\n<p>I've searched Google for quite a long time and only came up with results, that either won't work with version 1.50 (because PEMReader was deprecated and got removed) or with examples of PEMParser who seems to could not read this format. BTW: Is there any documentation on Bouncycastle I missed? </p>\n\n<p>This is the header of my encrypted private key:</p>\n\n<pre><code>-----BEGIN PRIVATE KEY-----\nProc-Type: 4,ENCRYPTED\nDEK-Info: DES-EDE3-CBC,68949227DD8A502D\nxyz...\n</code></pre>\n\n<p>I would really be thankful, if anyone could help me out!</p>\n"},{"tags":["java","minecraft","spigot"],"comments":[{"owner":{"account_id":80364,"reputation":90939,"user_id":227299,"accept_rate":72,"display_name":"Ruan Mendes"},"score":0,"creation_date":1657051313,"post_id":72874905,"comment_id":128716385,"body_markdown":"Save the list somewhere that is not a local variable and use it from your other location? Start with a global variable. \n\nIf you don&#39;t show what you have done, this question is too open ended. There are many options and no single answer would be more correct than the other.","body":"Save the list somewhere that is not a local variable and use it from your other location? Start with a global variable.   If you don&#39;t show what you have done, this question is too open ended. There are many options and no single answer would be more correct than the other."},{"owner":{"display_name":"user19387122"},"score":0,"creation_date":1657051497,"post_id":72874905,"comment_id":128716438,"body_markdown":"@JuanMendes Could you give me an example?","body":"@JuanMendes Could you give me an example?"},{"owner":{"account_id":80364,"reputation":90939,"user_id":227299,"accept_rate":72,"display_name":"Ruan Mendes"},"score":0,"creation_date":1657051805,"post_id":72874905,"comment_id":128716511,"body_markdown":"Create a global singleton and store the data there.","body":"Create a global singleton and store the data there."},{"owner":{"display_name":"user19387122"},"score":0,"creation_date":1657051908,"post_id":72874905,"comment_id":128716530,"body_markdown":"I&#39;m not sure how to do that","body":"I&#39;m not sure how to do that"},{"owner":{"account_id":80364,"reputation":90939,"user_id":227299,"accept_rate":72,"display_name":"Ruan Mendes"},"score":1,"creation_date":1657052873,"post_id":72874905,"comment_id":128716824,"body_markdown":"Then you should ask a question about that. I know you want someone to just help you solve your problem but Stack Overflow is for questions that can be helpful to others also. See https://softwareengineering.stackexchange.com/questions/344365/creating-a-singleton-to-access-static-data","body":"Then you should ask a question about that. I know you want someone to just help you solve your problem but Stack Overflow is for questions that can be helpful to others also. See <a href=\"https://softwareengineering.stackexchange.com/questions/344365/creating-a-singleton-to-access-static-data\" title=\"creating a singleton to access static data\">softwareengineering.stackexchange.com/questions/344365/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":23166040,"reputation":11,"user_id":17265959,"display_name":"Luke Harwood"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657053555,"creation_date":1657051837,"answer_id":72875024,"question_id":72874905,"body_markdown":"Since you are using an enum to store your Material types, you can simply call the static `.values()` method through Material.\r\n\r\nEx:\r\n\r\n    @EventHandler\r\n    public void onBreak(BlockBreakEvent e) {\r\n        Player p = e.getPlayer();\r\n        Material block = e.getBlock().getType();\r\n        if(List.of(Material.values()).contains(block)){\r\n            p.sendMessage(&quot;Invalid block. Break cancelled&quot;);\r\n            e.setCancelled(true);\r\n        }else{\r\n            p.sendMessage(&quot;Valid Block&quot;);\r\n        }\r\n        }\r\n\r\n    }\r\n\r\nIf you need to be able to customize what values are in the List you *can* use the singleton pattern to access that information globally. \r\n\r\nThe instance can be accessed statically from anywhere in the application:\r\n\r\n    import java.util.List;\r\n\r\n    public class BlockController {\r\n    \t\t\r\n    \tpublic static BlockController instance = new BlockController();\r\n    \t\r\n    \tprivate List&lt;Material&gt; allowedBlocks; \r\n    \t\r\n    \tpublic BlockController() {\r\n    \t\tthis.allowedBlocks = new ArrayList&lt;&gt;();\r\n    \t}\r\n    \t\r\n    \tpublic void addAllowedBlock(Material mat) {\r\n    \t\tthis.allowedBlocks.add(mat);\r\n    \t}\r\n    \t\r\n    \tpublic void removeAllowedBlock(Material mat) {\r\n    \t\tthis.allowedBlocks.remove(mat);\r\n    \t}\r\n    \t\r\n    \tpublic boolean containsBlock(Material mat) {\r\n    \t\treturn this.allowedBlocks.contains(mat);\r\n    \t}\r\n    \t\r\n    \tpublic void clear() {\r\n    \t\tthis.allowedBlocks.clear();\r\n    \t}\r\n    \t\r\n    /**\r\n     * You can add more functionality here...\r\n     * This class can be accessed anywhere in the application\r\n     * \r\n     * use:\r\n     * \r\n     * BlockController controller = BlockController.instance;\r\n     * controller.containsBlock(Material.BLOCK);\r\n     */\r\n\r\n}\r\n\r\n","title":"how to use a list in another class?","body":"<p>Since you are using an enum to store your Material types, you can simply call the static <code>.values()</code> method through Material.</p>\n<p>Ex:</p>\n<pre><code>@EventHandler\npublic void onBreak(BlockBreakEvent e) {\n    Player p = e.getPlayer();\n    Material block = e.getBlock().getType();\n    if(List.of(Material.values()).contains(block)){\n        p.sendMessage(&quot;Invalid block. Break cancelled&quot;);\n        e.setCancelled(true);\n    }else{\n        p.sendMessage(&quot;Valid Block&quot;);\n    }\n    }\n\n}\n</code></pre>\n<p>If you need to be able to customize what values are in the List you <em>can</em> use the singleton pattern to access that information globally.</p>\n<p>The instance can be accessed statically from anywhere in the application:</p>\n<pre><code>import java.util.List;\n\npublic class BlockController {\n        \n    public static BlockController instance = new BlockController();\n    \n    private List&lt;Material&gt; allowedBlocks; \n    \n    public BlockController() {\n        this.allowedBlocks = new ArrayList&lt;&gt;();\n    }\n    \n    public void addAllowedBlock(Material mat) {\n        this.allowedBlocks.add(mat);\n    }\n    \n    public void removeAllowedBlock(Material mat) {\n        this.allowedBlocks.remove(mat);\n    }\n    \n    public boolean containsBlock(Material mat) {\n        return this.allowedBlocks.contains(mat);\n    }\n    \n    public void clear() {\n        this.allowedBlocks.clear();\n    }\n    \n/**\n * You can add more functionality here...\n * This class can be accessed anywhere in the application\n * \n * use:\n * \n * BlockController controller = BlockController.instance;\n * controller.containsBlock(Material.BLOCK);\n */\n</code></pre>\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":18088193,"reputation":595,"user_id":13148560,"display_name":"Japhei"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660057696,"creation_date":1657051971,"answer_id":72875049,"question_id":72874905,"body_markdown":"Try to create the List in a static context. This way the list is the same for all instances:\r\n\r\n    public class MyClass {\r\n        \r\n        public static List&lt;Material&gt; allowedblocks = new ArrayList&lt;Material&gt;();\r\n\r\n        @EventHandler\r\n        public void onBreak(BlockBreakEvent e) {\r\n            allowedblocks.add(Material.STONE);\r\n            ...\r\nThen you can call the List from everywhere like this (e.g. if statement):\r\n\r\n    if(MyClass.allowedblocks.contains(block)) \r\n\r\nYour problem seems similar to this question, maybe [this answer][1] helps too: .\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/72846773/13148560","title":"how to use a list in another class?","body":"<p>Try to create the List in a static context. This way the list is the same for all instances:</p>\n<pre><code>public class MyClass {\n    \n    public static List&lt;Material&gt; allowedblocks = new ArrayList&lt;Material&gt;();\n\n    @EventHandler\n    public void onBreak(BlockBreakEvent e) {\n        allowedblocks.add(Material.STONE);\n        ...\n</code></pre>\n<p>Then you can call the List from everywhere like this (e.g. if statement):</p>\n<pre><code>if(MyClass.allowedblocks.contains(block)) \n</code></pre>\n<p>Your problem seems similar to this question, maybe <a href=\"https://stackoverflow.com/a/72846773/13148560\">this answer</a> helps too: .</p>\n"},{"tags":[],"owner":{"account_id":69443,"reputation":85343,"user_id":202009,"accept_rate":79,"display_name":"Andy Thomas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657053836,"creation_date":1657052556,"answer_id":72875141,"question_id":72874905,"body_markdown":"One approach to creating the list in a separate class is to use a static initializer block:\r\n\r\n    public class MyClass {\r\n        public static final List&lt;Material&gt; ALLOWED_MATERIALS = new ArrayList&lt;&gt;();\r\n\r\n        static {\r\n            ALLOWED_MATERIALS.add( Material.STONE );\r\n        }\r\n\r\n        public static List&lt;Material&gt; getAllowedMaterials() {\r\n            return Collections.unmodifiableList( ALLOWED_MATERIALS );\r\n        }\r\n        ...\r\n     }\r\n","title":"how to use a list in another class?","body":"<p>One approach to creating the list in a separate class is to use a static initializer block:</p>\n<pre><code>public class MyClass {\n    public static final List&lt;Material&gt; ALLOWED_MATERIALS = new ArrayList&lt;&gt;();\n\n    static {\n        ALLOWED_MATERIALS.add( Material.STONE );\n    }\n\n    public static List&lt;Material&gt; getAllowedMaterials() {\n        return Collections.unmodifiableList( ALLOWED_MATERIALS );\n    }\n    ...\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14584814,"reputation":151,"user_id":10534024,"display_name":"Alexandr Ter"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1657053306,"creation_date":1657053306,"answer_id":72875247,"question_id":72874905,"body_markdown":"You can make allowedBlocks List a class field and fill it with elements inside of the constructor. \r\n\r\n    public class YourClass {\r\n        private List&lt;Material&gt; allowedBlocks = new ArrayList&lt;&gt;();    \r\n\r\n        public YourClass() {\r\n            allowedBlocks.add(Material.STONE);\r\n            //repeat this 10-50 times for whatever item\r\n        }\r\n\r\n        @EventHandler\r\n        public void onBreak(BlockBreakEvent e) {\r\n            Player p = e.getPlayer();\r\n            Material block = e.getBlock().getType();\r\n        \r\n            if(allowedBlocks.contains(block)){\r\n                p.sendMessage(&quot;Valid Block&quot;);\r\n            } else {\r\n                p.sendMessage(&quot;Invalid block. Break cancelled&quot;);\r\n                e.setCancelled(true);\r\n            }\r\n        }\r\n    }\r\n\r\nAnother approach would be to make the list static and fill it with values inside of a static block. I would not recommend making the list static if you are planning to change its values, but if your allowed blocks are going to remain the same, it may be a good idea to even go further and make it public, so you can access it from anywhere without an instance of YourClass\r\n\r\n    public class YourClass {\r\n      public static final List&lt;Material&gt; allowedBlocks;    \r\n\r\n      static {\r\n          List&lt;Materials&gt; list = new ArrayList&lt;&gt;();\r\n          list.add(Material.STONE);\r\n          //repeat this 10-50 times for whatever item\r\n\r\n          //use an unmodifiable list, \r\n          //so you do not accidentally change its content later\r\n          allowedBlocks = Collections.unmodifiableList(list);\r\n      }\r\n\r\n      @EventHandler\r\n      public void onBreak(BlockBreakEvent e) {\r\n          Player p = e.getPlayer();\r\n          Material block = e.getBlock().getType();\r\n\r\n          if(allowedBlocks.contains(block)){\r\n              p.sendMessage(&quot;Valid Block&quot;);\r\n          } else {\r\n              p.sendMessage(&quot;Invalid block. Break cancelled&quot;);\r\n              e.setCancelled(true);\r\n          }\r\n      }\r\n    }\r\n\r\n\r\nIn the first case, there will be a list of allowedBlocks per instance of YourClass, which means, that every time you call `new YourClass()` a new List will be created and filled. In the second case, there will be only one list which will be created and populated on class loading (at the very beginning of the program) start up.\r\n\r\nP.S. I would rather use a Set instead of a List here, considering you are using `contains` very often.","title":"how to use a list in another class?","body":"<p>You can make allowedBlocks List a class field and fill it with elements inside of the constructor.</p>\n<pre><code>public class YourClass {\n    private List&lt;Material&gt; allowedBlocks = new ArrayList&lt;&gt;();    \n\n    public YourClass() {\n        allowedBlocks.add(Material.STONE);\n        //repeat this 10-50 times for whatever item\n    }\n\n    @EventHandler\n    public void onBreak(BlockBreakEvent e) {\n        Player p = e.getPlayer();\n        Material block = e.getBlock().getType();\n    \n        if(allowedBlocks.contains(block)){\n            p.sendMessage(&quot;Valid Block&quot;);\n        } else {\n            p.sendMessage(&quot;Invalid block. Break cancelled&quot;);\n            e.setCancelled(true);\n        }\n    }\n}\n</code></pre>\n<p>Another approach would be to make the list static and fill it with values inside of a static block. I would not recommend making the list static if you are planning to change its values, but if your allowed blocks are going to remain the same, it may be a good idea to even go further and make it public, so you can access it from anywhere without an instance of YourClass</p>\n<pre><code>public class YourClass {\n  public static final List&lt;Material&gt; allowedBlocks;    \n\n  static {\n      List&lt;Materials&gt; list = new ArrayList&lt;&gt;();\n      list.add(Material.STONE);\n      //repeat this 10-50 times for whatever item\n\n      //use an unmodifiable list, \n      //so you do not accidentally change its content later\n      allowedBlocks = Collections.unmodifiableList(list);\n  }\n\n  @EventHandler\n  public void onBreak(BlockBreakEvent e) {\n      Player p = e.getPlayer();\n      Material block = e.getBlock().getType();\n\n      if(allowedBlocks.contains(block)){\n          p.sendMessage(&quot;Valid Block&quot;);\n      } else {\n          p.sendMessage(&quot;Invalid block. Break cancelled&quot;);\n          e.setCancelled(true);\n      }\n  }\n}\n</code></pre>\n<p>In the first case, there will be a list of allowedBlocks per instance of YourClass, which means, that every time you call <code>new YourClass()</code> a new List will be created and filled. In the second case, there will be only one list which will be created and populated on class loading (at the very beginning of the program) start up.</p>\n<p>P.S. I would rather use a Set instead of a List here, considering you are using <code>contains</code> very often.</p>\n"}],"owner":{"display_name":"user19387122"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":87,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":72875247,"answer_count":4,"score":-2,"last_activity_date":1660057696,"creation_date":1657051078,"question_id":72874905,"body_markdown":"I want to create a list, add blocks to it and then use it in a BlockBreakEvent to check if the block is in the list and cancel the event if it&#39;s not. But I can&#39;t seem to create and add things in it any other way than in the actual event itself (which looks to me like it would create issues). The only thing that is working for me is creating the list in the event and adding blocks to it one by one which looks really messy compared to: creating the list in a separate class and just checking the list with if(Listname.contains(block)) does anyone know how I can achieve this? Whether its dependency injection, or whatever else. I just can&#39;t figure out how to put it to use.\r\n\r\nHere&#39;s what I&#39;ve tried and is currently working for me, but I believe it&#39;s theoretically incorrect:\r\n\r\n    public class Event implements Listener {\r\n    @EventHandler\r\n    public void onBreak(BlockBreakEvent e) {\r\n        List&lt;Material&gt; allowedblocks = new ArrayList&lt;Material&gt;();\r\n        allowedblocks.add(Material.STONE);\r\n        //repeat this 10-50 times for whatever item\r\n        \r\n        \r\n        Player p = e.getPlayer();\r\n        Material block = e.getBlock().getType();\r\n        \r\n        if(allowedblocks.contains(block)){\r\n            p.sendMessage(&quot;Invalid block. Break cancelled&quot;);\r\n            e.setCancelled(true);\r\n        }else{\r\n            p.sendMessage(&quot;Valid Block&quot;);\r\n        }\r\n        }\r\n\r\n    }\r\n","title":"how to use a list in another class?","body":"<p>I want to create a list, add blocks to it and then use it in a BlockBreakEvent to check if the block is in the list and cancel the event if it's not. But I can't seem to create and add things in it any other way than in the actual event itself (which looks to me like it would create issues). The only thing that is working for me is creating the list in the event and adding blocks to it one by one which looks really messy compared to: creating the list in a separate class and just checking the list with if(Listname.contains(block)) does anyone know how I can achieve this? Whether its dependency injection, or whatever else. I just can't figure out how to put it to use.</p>\n<p>Here's what I've tried and is currently working for me, but I believe it's theoretically incorrect:</p>\n<pre><code>public class Event implements Listener {\n@EventHandler\npublic void onBreak(BlockBreakEvent e) {\n    List&lt;Material&gt; allowedblocks = new ArrayList&lt;Material&gt;();\n    allowedblocks.add(Material.STONE);\n    //repeat this 10-50 times for whatever item\n    \n    \n    Player p = e.getPlayer();\n    Material block = e.getBlock().getType();\n    \n    if(allowedblocks.contains(block)){\n        p.sendMessage(&quot;Invalid block. Break cancelled&quot;);\n        e.setCancelled(true);\n    }else{\n        p.sendMessage(&quot;Valid Block&quot;);\n    }\n    }\n\n}\n</code></pre>\n"},{"tags":["java","security","openssl","pem"],"comments":[{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1559446080,"post_id":56408812,"comment_id":99420832,"body_markdown":"If you want to stay with &#39;traditional&#39; (PKCS1) format used by `genrsa` and `rsa` and can use BouncyCastle, see https://stackoverflow.com/questions/44681737/","body":"If you want to stay with &#39;traditional&#39; (PKCS1) format used by <code>genrsa</code> and <code>rsa</code> and can use BouncyCastle, see <a href=\"https://stackoverflow.com/questions/44681737/\">stackoverflow.com/questions/44681737</a>"}],"answers":[{"tags":[],"owner":{"account_id":5625581,"reputation":10916,"user_id":4454124,"display_name":"mnistic"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1559442985,"creation_date":1559442985,"answer_id":56411824,"question_id":56408812,"body_markdown":"`openssl rsa -in testfile.pem -out testfile_pub.pub` does not export the public key, it actually exports the private key out in clear text (if you provided the correct password). To export the public key use the `-pubout` option.\r\n\r\nYes you will need the password to export the public key.\r\n\r\nTo import the private key in Java you will need to convert it to PKCS8 first:\r\n\r\n    openssl pkcs8 -topk8 -in testfile.pem -inform pem -out testfile_pkcs8.pem -outform pem\r\n\r\nThen you can import it in Java like:\r\n\r\n    String encrypted = new String(Files.readAllBytes(Paths.get(&quot;testfile_pkcs8.pem&quot;)));  \r\n    encrypted = encrypted.replace(&quot;-----BEGIN ENCRYPTED PRIVATE KEY-----&quot;, &quot;&quot;);  \r\n    encrypted = encrypted.replace(&quot;-----END ENCRYPTED PRIVATE KEY-----&quot;, &quot;&quot;);  \r\n    EncryptedPrivateKeyInfo pkInfo = new EncryptedPrivateKeyInfo(Base64.decode(encrypted));  \r\n    PBEKeySpec keySpec = new PBEKeySpec(&quot;mypassword&quot;.toCharArray()); // password  \r\n    SecretKeyFactory pbeKeyFactory = SecretKeyFactory.getInstance(pkInfo.getAlgName());  \r\n    PKCS8EncodedKeySpec encodedKeySpec = pkInfo.getKeySpec(pbeKeyFactory.generateSecret(keySpec));  \r\n    KeyFactory keyFactory = KeyFactory.getInstance(&quot;RSA&quot;);  \r\n    PrivateKey encryptedPrivateKey = keyFactory.generatePrivate(encodedKeySpec);  \r\n   \r\nNo, it doesn&#39;t mean that anyone can read the key, because you still have to provide the password.","title":"Java - how to unlock a passphrase-protected PEM private key","body":"<p><code>openssl rsa -in testfile.pem -out testfile_pub.pub</code> does not export the public key, it actually exports the private key out in clear text (if you provided the correct password). To export the public key use the <code>-pubout</code> option.</p>\n\n<p>Yes you will need the password to export the public key.</p>\n\n<p>To import the private key in Java you will need to convert it to PKCS8 first:</p>\n\n<pre><code>openssl pkcs8 -topk8 -in testfile.pem -inform pem -out testfile_pkcs8.pem -outform pem\n</code></pre>\n\n<p>Then you can import it in Java like:</p>\n\n<pre><code>String encrypted = new String(Files.readAllBytes(Paths.get(\"testfile_pkcs8.pem\")));  \nencrypted = encrypted.replace(\"-----BEGIN ENCRYPTED PRIVATE KEY-----\", \"\");  \nencrypted = encrypted.replace(\"-----END ENCRYPTED PRIVATE KEY-----\", \"\");  \nEncryptedPrivateKeyInfo pkInfo = new EncryptedPrivateKeyInfo(Base64.decode(encrypted));  \nPBEKeySpec keySpec = new PBEKeySpec(\"mypassword\".toCharArray()); // password  \nSecretKeyFactory pbeKeyFactory = SecretKeyFactory.getInstance(pkInfo.getAlgName());  \nPKCS8EncodedKeySpec encodedKeySpec = pkInfo.getKeySpec(pbeKeyFactory.generateSecret(keySpec));  \nKeyFactory keyFactory = KeyFactory.getInstance(\"RSA\");  \nPrivateKey encryptedPrivateKey = keyFactory.generatePrivate(encodedKeySpec);  \n</code></pre>\n\n<p>No, it doesn't mean that anyone can read the key, because you still have to provide the password.</p>\n"}],"owner":{"account_id":1393384,"reputation":6371,"user_id":1770601,"accept_rate":59,"display_name":"ha9u63a7"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7588,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660057642,"creation_date":1559409111,"question_id":56408812,"body_markdown":"I have got a passphrase protected PEM key file generated by OpenSSL\r\n\r\n`openssl genrsa -aes128 -passout stdin -out testfile.pem`\r\n\r\nI have also generated a public key file using OpenSSL\r\n\r\n`openssl rsa -in testfile.pem -out testfile_pub.pub` ( propts for password)\r\n\r\nI would like to be able to use this private key to sign my claims etc. and then send requests. What I am struggling to understand (or more like confirming my understanding about) are the following:\r\n\r\n1) My private key is password protected, does it mean no one can actually generate the public key without unlocking it first? i.e. that&#39;s where the protection is?\r\n\r\n2) If I was to read this encrypted private key PEM file in Java, I would have to do something similar to:\r\n\r\n` \\\\ 1. Read file as string\r\n  \\\\ 2. Replace all boring bits e.g. begin/end/rsa/private/public/key/enc/--\r\n  \\\\ 3. decode using Base64\r\n  \\\\ 4. read as PKCS8 keyspec and generate PrivateKey object`\r\n\r\nbut doesn&#39;t this mean that no one is actually stopping me from reading the keyspecs ? I guess what I am trying to compare with is how we generate `JKS` keys with optional keypass/storepass. But may be I am not supposed to compare this.\r\n\r\nCould anyone help me understand?\r\n\r\nThanks, ","title":"Java - how to unlock a passphrase-protected PEM private key","body":"<p>I have got a passphrase protected PEM key file generated by OpenSSL</p>\n\n<p><code>openssl genrsa -aes128 -passout stdin -out testfile.pem</code></p>\n\n<p>I have also generated a public key file using OpenSSL</p>\n\n<p><code>openssl rsa -in testfile.pem -out testfile_pub.pub</code> ( propts for password)</p>\n\n<p>I would like to be able to use this private key to sign my claims etc. and then send requests. What I am struggling to understand (or more like confirming my understanding about) are the following:</p>\n\n<p>1) My private key is password protected, does it mean no one can actually generate the public key without unlocking it first? i.e. that's where the protection is?</p>\n\n<p>2) If I was to read this encrypted private key PEM file in Java, I would have to do something similar to:</p>\n\n<p><code>\\\\ 1. Read file as string\n  \\\\ 2. Replace all boring bits e.g. begin/end/rsa/private/public/key/enc/--\n  \\\\ 3. decode using Base64\n  \\\\ 4. read as PKCS8 keyspec and generate PrivateKey object</code></p>\n\n<p>but doesn't this mean that no one is actually stopping me from reading the keyspecs ? I guess what I am trying to compare with is how we generate <code>JKS</code> keys with optional keypass/storepass. But may be I am not supposed to compare this.</p>\n\n<p>Could anyone help me understand?</p>\n\n<p>Thanks, </p>\n"},{"tags":["java","selenium","maven","selenium-webdriver","testng"],"answers":[{"tags":[],"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1660038578,"creation_date":1660038578,"answer_id":73289790,"question_id":73289199,"body_markdown":"The simplest way is to define properties in your pom.xml (fyi, `env` - is very bad name for property):\r\n\r\n```\r\n&lt;properties&gt;\r\n  &lt;!-- \r\n      default value of target.env\r\n  --&gt;\r\n  &lt;target.env&gt;dev&lt;/target.env&gt;\r\n&lt;properties&gt;\r\n\r\n...\r\n\r\n\r\n&lt;plugin&gt;\r\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n  &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n  &lt;version&gt;${maven-surefire-plugin-version}&lt;/version&gt;\r\n  &lt;configuration&gt;\r\n      &lt;suiteXmlFiles&gt;\r\n        &lt;suiteXmlFile&gt;TestNG-${target.env}.xml&lt;/suiteXmlFile&gt;\r\n     &lt;/suiteXmlFiles&gt;\r\n  &lt;/configuration&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\nafter that `mvn test` will use `dev` and `mvn test -Dtarget.env=xxx` will use environment specified","title":"Skipping test cases based on environment variable value (Java maven testNG Selenium automation)","body":"<p>The simplest way is to define properties in your pom.xml (fyi, <code>env</code> - is very bad name for property):</p>\n<pre><code>&lt;properties&gt;\n  &lt;!-- \n      default value of target.env\n  --&gt;\n  &lt;target.env&gt;dev&lt;/target.env&gt;\n&lt;properties&gt;\n\n...\n\n\n&lt;plugin&gt;\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n  &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n  &lt;version&gt;${maven-surefire-plugin-version}&lt;/version&gt;\n  &lt;configuration&gt;\n      &lt;suiteXmlFiles&gt;\n        &lt;suiteXmlFile&gt;TestNG-${target.env}.xml&lt;/suiteXmlFile&gt;\n     &lt;/suiteXmlFiles&gt;\n  &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>after that <code>mvn test</code> will use <code>dev</code> and <code>mvn test -Dtarget.env=xxx</code> will use environment specified</p>\n"}],"owner":{"account_id":14916857,"reputation":11,"user_id":10770391,"display_name":"Saiteja goud"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":251,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660057597,"creation_date":1660035982,"question_id":73289199,"body_markdown":"I use `mvn test -Denv=dev`, `mvn test -Denv=test`, or demo or prod to execute test cases. My `testNG.xml` is being trigged using `surefire plugin`. I have to skip a complete folder if `env = prod`.\r\n\r\nI was trying to use `TestNG-${env}.xml` and have 4 testng.xml files for each env example: testNG-dev.xml etc and add only valid test cases(classes) in `testNG-prod.xml`. Not sure if this is the right approach and I am not sure how to pick testNG.xml as default if the env value is not passed. [Click here to view project structure][1]\r\n\r\n    &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;${maven-surefire-plugin-version}&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;suiteXmlFiles&gt;\r\n                            &lt;suiteXmlFile&gt;TestNG.xml&lt;/suiteXmlFile&gt;\r\n                        &lt;/suiteXmlFiles&gt;\r\n                        \r\n                        &lt;!-- &lt;suiteXmlFiles&gt;\r\n                            &lt;suiteXmlFile&gt;TestNG.xml&lt;/suiteXmlFile&gt;\r\n                        &lt;/suiteXmlFiles&gt; --&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n\r\n  [1]: https://i.stack.imgur.com/n2KKO.png\r\n","title":"Skipping test cases based on environment variable value (Java maven testNG Selenium automation)","body":"<p>I use <code>mvn test -Denv=dev</code>, <code>mvn test -Denv=test</code>, or demo or prod to execute test cases. My <code>testNG.xml</code> is being trigged using <code>surefire plugin</code>. I have to skip a complete folder if <code>env = prod</code>.</p>\n<p>I was trying to use <code>TestNG-${env}.xml</code> and have 4 testng.xml files for each env example: testNG-dev.xml etc and add only valid test cases(classes) in <code>testNG-prod.xml</code>. Not sure if this is the right approach and I am not sure how to pick testNG.xml as default if the env value is not passed. <a href=\"https://i.stack.imgur.com/n2KKO.png\" rel=\"nofollow noreferrer\">Click here to view project structure</a></p>\n<pre><code>&lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${maven-surefire-plugin-version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;suiteXmlFiles&gt;\n                        &lt;suiteXmlFile&gt;TestNG.xml&lt;/suiteXmlFile&gt;\n                    &lt;/suiteXmlFiles&gt;\n                    \n                    &lt;!-- &lt;suiteXmlFiles&gt;\n                        &lt;suiteXmlFile&gt;TestNG.xml&lt;/suiteXmlFile&gt;\n                    &lt;/suiteXmlFiles&gt; --&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n</code></pre>\n"},{"tags":["java","spring-boot","caching","ehcache","jta"],"comments":[{"owner":{"account_id":5795637,"reputation":7297,"user_id":4571544,"display_name":"dekkard"},"score":0,"creation_date":1659426101,"post_id":73176873,"comment_id":129285632,"body_markdown":"Adding the solutions you have tried so far would really help.","body":"Adding the solutions you have tried so far would really help."},{"owner":{"account_id":12626017,"reputation":5868,"user_id":10426557,"display_name":"Jonathan JOhx"},"score":0,"creation_date":1659476107,"post_id":73176873,"comment_id":129303101,"body_markdown":"Please, try to develop a minimal example about it(repo), because I don&#39;t see why your code shouldn&#39;t be working.","body":"Please, try to develop a minimal example about it(repo), because I don&#39;t see why your code shouldn&#39;t be working."},{"owner":{"account_id":231683,"reputation":4218,"user_id":496038,"display_name":"pringi"},"score":0,"creation_date":1659515487,"post_id":73176873,"comment_id":129310650,"body_markdown":"What version of spring, related dependencies and java are you using?","body":"What version of spring, related dependencies and java are you using?"},{"owner":{"account_id":6078702,"reputation":1668,"user_id":4745154,"accept_rate":36,"display_name":"Kumaresh Babu N S"},"score":0,"creation_date":1659527446,"post_id":73176873,"comment_id":129315139,"body_markdown":"I assume that if the cache method in Class B doesn&#39;t return result in Class A, it will throw an exception in Class A&#39;s method. It would be great, if you share the kind of exception and message of it?","body":"I assume that if the cache method in Class B doesn&#39;t return result in Class A, it will throw an exception in Class A&#39;s method. It would be great, if you share the kind of exception and message of it?"},{"owner":{"account_id":1524257,"reputation":8407,"user_id":1423083,"accept_rate":78,"display_name":"Mukul Goel"},"score":0,"creation_date":1659530202,"post_id":73176873,"comment_id":129316202,"body_markdown":"@KumareshBabuNS for testing purpose. I have added a throw new RuntimeException in class A method whenever the result from Class B is not null. As shown in example above.","body":"@KumareshBabuNS for testing purpose. I have added a throw new RuntimeException in class A method whenever the result from Class B is not null. As shown in example above."},{"owner":{"account_id":1524257,"reputation":8407,"user_id":1423083,"accept_rate":78,"display_name":"Mukul Goel"},"score":0,"creation_date":1659530263,"post_id":73176873,"comment_id":129316231,"body_markdown":"@pringi spring boot 2.5.6 and java 11. Using ehcache 2.10.6","body":"@pringi spring boot 2.5.6 and java 11. Using ehcache 2.10.6"},{"owner":{"account_id":6078702,"reputation":1668,"user_id":4745154,"accept_rate":36,"display_name":"Kumaresh Babu N S"},"score":0,"creation_date":1659530716,"post_id":73176873,"comment_id":129316421,"body_markdown":"@MukulGoel What should be the expected response in this scenario?","body":"@MukulGoel What should be the expected response in this scenario?"},{"owner":{"account_id":1524257,"reputation":8407,"user_id":1423083,"accept_rate":78,"display_name":"Mukul Goel"},"score":0,"creation_date":1659530985,"post_id":73176873,"comment_id":129316542,"body_markdown":"@KumareshBabuNS In which scenario? when I am throwing the new runtime exception in class A? \nthe expected response should be that nothing is cached and when I make the same call from swagger again, class A calls class B and Class B tries to reach out to the external API again to fetch the response. thereby proving that when an exception was thrown within the transaction. Nothing was cached","body":"@KumareshBabuNS In which scenario? when I am throwing the new runtime exception in class A?  the expected response should be that nothing is cached and when I make the same call from swagger again, class A calls class B and Class B tries to reach out to the external API again to fetch the response. thereby proving that when an exception was thrown within the transaction. Nothing was cached"},{"owner":{"account_id":1524257,"reputation":8407,"user_id":1423083,"accept_rate":78,"display_name":"Mukul Goel"},"score":0,"creation_date":1659531071,"post_id":73176873,"comment_id":129316571,"body_markdown":"The actual use case is that. When I receive the response from Class B to Class A. In the class A method. I will validate the response and if validation fails, throw a spring validation exception. \nIn this scenario, I do not want to cache this bad data.","body":"The actual use case is that. When I receive the response from Class B to Class A. In the class A method. I will validate the response and if validation fails, throw a spring validation exception.  In this scenario, I do not want to cache this bad data."}],"answers":[{"tags":[],"owner":{"account_id":19092422,"reputation":51311,"user_id":13942448,"display_name":"jccampanero"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1659801026,"creation_date":1659550779,"answer_id":73226055,"question_id":73176873,"body_markdown":"There should be other ways, but the following could be a valid solution.\r\n\r\nThe first step will be to define a custom exception in order to be able to handle it later as appropriate. This exception will receive, among others, the name of the cache and the key you want to evict. For example:\r\n\r\n```java\r\npublic class CauseOfEvictionException extends RuntimeException {\r\n\r\n  public CauseOfEvictionException(String message, String cacheName, String cacheKey) {\r\n    super(message);\r\n    \r\n    this.cacheName = cacheName;\r\n    this.cacheKey = cacheKey;\r\n  }\r\n\r\n  // getters and setters omitted for brevity\r\n}\r\n```\r\n\r\nThis exception will be raised by your `B` class, in your example:\r\n\r\n```java\r\n@Service\r\nClass A{\r\n\r\n  @Autowired\r\n  B b;\r\n\r\n  @Transactional\r\n  public List&lt;Data&gt; getAllBusinessData(){\r\n \r\n    List&lt;Data&gt; dataList = b.getDataFromSystem(&quot;key&quot;);\r\n\r\n    // Sorry, because in a certain sense you need to be aware of the cache\r\n    // name here. Probably it could be improved\r\n    throw new CauseOfEvictionException(&quot;test&quot;, &quot;cacheName&quot;, &quot;key&quot;);\r\n\r\n  }\r\n}\r\n```\r\n\r\nNow, we need a way to handle this kind of exception.\r\n\r\nIndependently of that way, the idea is that the code responsible for handling the exception will access the configured `CacheManager` and trigger the cache eviction.\r\n\r\nBecause you are using Spring Boot, an easy way to deal with it is by extending `ResponseEntityExceptionHandler` to provide an appropriate `@ExceptionHandler`. Please, consider read for more information [the answer I provided in this related SO question](https://stackoverflow.com/questions/68641304/how-can-i-access-the-http-response-content-of-a-spring-boot-default-error-respon/68674232#68674232) or [this great article](https://www.toptal.com/java/spring-boot-rest-api-error-handling).\r\n\r\nIn summary, please, consider for example:\r\n\r\n```java\r\n@ControllerAdvice\r\npublic class CustomExceptionHandler extends ResponseEntityExceptionHandler {\r\n  \r\n  @Autowired\r\n  private CacheManager cacheManager;\r\n\r\n  @ExceptionHandler(CauseOfEvictionException.class)\r\n  public ResponseEntity&lt;Object&gt; handleCauseOfEvictionException(\r\n    CauseOfEvictionException e) {\r\n    this.cacheManager.getCache(e.getCacheName()).evict(e.getCacheKey());\r\n\r\n    // handle the exception and provide the necessary response as you wish\r\n    return ...;\r\n  }\r\n}\r\n``` \r\n\r\nIt is important to realize that when dealing with keys composed by several arguments [by default](https://docs.spring.io/spring-framework/docs/current/reference/html/integration.html#cache-annotations-cacheable-default-key) (please, consider read [this](https://www.logicbig.com/tutorials/spring-framework/spring-integration/cache-key-generation.html) as well) the actual cache key will be wrapped as an instance of the `SimpleKey` class that contains all this parameters.\r\n\r\nPlease, be aware that this default behavior can be [customized](https://docs.spring.io/spring-framework/docs/current/reference/html/integration.html#cache-annotations-cacheable-key) to a certain extend with SpEL or providing your own cache [`KeyGenerator`](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/cache/interceptor/KeyGenerator.html). For reference, [here](https://github.com/spring-projects/spring-framework/blob/b595dc1dfad9db534ca7b9e8f46bb9926b88ab5a/spring-context/src/main/java/org/springframework/cache/interceptor/SimpleKeyGenerator.java) is the current implementation of the default one provided by the framework, `SimpleKeyGenerator`.\r\n\r\nThinking about the problem, a possible solution could be the use of some kind of AOP as well. The idea will be the following.\r\n\r\nFirst, define some kind of helper annotation. This annotation will be of help in determining which methods should be advised. For example: \r\n\r\n```java\r\n@Target(ElementType.METHOD)\r\n@Retention(RetentionPolicy.RUNTIME)\r\npublic @interface EvictCacheOnError {\r\n}\r\n```\r\n\r\nThe next step will be defining the aspect that will handle the actual cache eviction process. Assuming you only need to advice Spring managed beans, for simplicity we can use [Spring AOP](https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#aop) for that. You can use either an `@Around` or an `@AfterThrowing` aspect. Consider the following example:\r\n\r\n```java\r\n@Aspect\r\n@Component\r\npublic class EvictCacheOnErrorAspect {\r\n\r\n  @Autowired\r\n  private CacheManager cacheManager;\r\n\r\n  @Around(&quot;@annotation(your.pkg.EvictCacheOnError)&quot;)\r\n  public void evictCacheOnError(ProceedingJoinPoint pjp) {\r\n    try {\r\n      Object retVal = pjp.proceed();\r\n      return retVal;\r\n    } catch (CauseOfEvictionException e) {\r\n      this.cacheManager.getCache(\r\n          e.getCacheName()).evict(e.getCacheKey()\r\n      );\r\n\r\n      // rethrow \r\n      throw e;\r\n    }    \r\n  }\r\n}\r\n``` \r\n\r\nThe final step would be annotate the methods in which the behavior should be applied:\r\n\r\n```java\r\n@Service\r\nClass A{\r\n\r\n  @Autowired\r\n  B b;\r\n\r\n  @Transactional\r\n  @EvictCacheOnError\r\n  public List&lt;Data&gt; getAllBusinessData(){\r\n\r\n    List&lt;Data&gt; dataList = b.getDataFromSystem(&quot;key&quot;);\r\n\r\n    throw new CauseOfEvictionException(&quot;test&quot;, &quot;cacheName&quot;, &quot;key&quot;);\r\n  }\r\n}\r\n```\r\n\r\nYou may even try generalizing the idea, by providing in the `EvictCacheOnError` annotation all the necessary information you need to perform the cache eviction:\r\n\r\n\r\n```java\r\n@Target(ElementType.METHOD)\r\n@Retention(RetentionPolicy.RUNTIME)\r\npublic @interface EvictCacheOnError {\r\n    String cacheName();\r\n    int[] cacheKeyArgsIndexes();\r\n}\r\n```\r\n\r\nWith the following aspect:\r\n\r\n```java\r\n@Aspect\r\n@Component\r\npublic class EvictCacheOnErrorAspect {\r\n\r\n  @Autowired\r\n  private CacheManager cacheManager;\r\n\r\n  @Autowired\r\n  private KeyGenerator keyGenerator;\r\n\r\n  @Around(&quot;@annotation(your.pkg.EvictCacheOnError)&quot;)\r\n  // You can inject the annotation right here if you want to\r\n  public void evictCacheOnError(ProceedingJoinPoint pjp) {\r\n    try {\r\n      Object retVal = pjp.proceed();\r\n      return retVal;\r\n    } catch (Throwable t) {\r\n      // Assuming only is applied on methods\r\n      MethodSignature signature = (MethodSignature) pjp.getSignature();\r\n      Method method = signature.getMethod();\r\n      // Obtain a reference to the EvictCacheOnError annotation\r\n      EvictCacheOnError evictCacheOnError = method.getAnnotation(EvictCacheOnError.class);\r\n      // Compute cache key: some safety checks are imperative here,\r\n      // please, excuse the simplicity of the implementation\r\n      int[] cacheKeyArgsIndexes = evictCacheOnError.cacheKeyArgsIndexes();\r\n      Object[] args = pjp.getArgs();\r\n      List&lt;Object&gt; cacheKeyArgsList = new ArrayList&lt;&gt;(cacheKeyArgsIndexes.length);\r\n      for (int i=0; i &lt; cacheKeyArgsIndexes.length; i++) {\r\n        cacheKeyArgsList.add(args[cacheKeyArgsIndexes[i]]);\r\n      }\r\n      \r\n      Object[] cacheKeyArgs = new Object[cacheKeyArgsList.size()];\r\n      cacheKeyArgsList.toArray(cacheKeyArgs);\r\n\r\n      Object target = pjp.getTarget();\r\n\r\n      Object cacheKey = this.keyGenerator.generate(target, method, cacheKeyArgs);\r\n\r\n      // Perform actual eviction\r\n      String cacheName = evictCacheOnError.cacheName();\r\n      this.cacheManager.getCache(cacheName).evict(cacheKey);\r\n\r\n      // rethrow: be careful here if using in it with transactions\r\n      // Spring will per default only rollback unchecked exceptions\r\n      throw new RuntimeException(t);\r\n    }    \r\n  }\r\n}\r\n``` \r\n\r\nThis last solution depends on the actual method arguments, which may not be appropriate if the cache key is based on intermediate results obtained within your method body.","title":"Spring boot @Cacheable not working as expected with @Transactional","body":"<p>There should be other ways, but the following could be a valid solution.</p>\n<p>The first step will be to define a custom exception in order to be able to handle it later as appropriate. This exception will receive, among others, the name of the cache and the key you want to evict. For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class CauseOfEvictionException extends RuntimeException {\n\n  public CauseOfEvictionException(String message, String cacheName, String cacheKey) {\n    super(message);\n    \n    this.cacheName = cacheName;\n    this.cacheKey = cacheKey;\n  }\n\n  // getters and setters omitted for brevity\n}\n</code></pre>\n<p>This exception will be raised by your <code>B</code> class, in your example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\nClass A{\n\n  @Autowired\n  B b;\n\n  @Transactional\n  public List&lt;Data&gt; getAllBusinessData(){\n \n    List&lt;Data&gt; dataList = b.getDataFromSystem(&quot;key&quot;);\n\n    // Sorry, because in a certain sense you need to be aware of the cache\n    // name here. Probably it could be improved\n    throw new CauseOfEvictionException(&quot;test&quot;, &quot;cacheName&quot;, &quot;key&quot;);\n\n  }\n}\n</code></pre>\n<p>Now, we need a way to handle this kind of exception.</p>\n<p>Independently of that way, the idea is that the code responsible for handling the exception will access the configured <code>CacheManager</code> and trigger the cache eviction.</p>\n<p>Because you are using Spring Boot, an easy way to deal with it is by extending <code>ResponseEntityExceptionHandler</code> to provide an appropriate <code>@ExceptionHandler</code>. Please, consider read for more information <a href=\"https://stackoverflow.com/questions/68641304/how-can-i-access-the-http-response-content-of-a-spring-boot-default-error-respon/68674232#68674232\">the answer I provided in this related SO question</a> or <a href=\"https://www.toptal.com/java/spring-boot-rest-api-error-handling\" rel=\"nofollow noreferrer\">this great article</a>.</p>\n<p>In summary, please, consider for example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ControllerAdvice\npublic class CustomExceptionHandler extends ResponseEntityExceptionHandler {\n  \n  @Autowired\n  private CacheManager cacheManager;\n\n  @ExceptionHandler(CauseOfEvictionException.class)\n  public ResponseEntity&lt;Object&gt; handleCauseOfEvictionException(\n    CauseOfEvictionException e) {\n    this.cacheManager.getCache(e.getCacheName()).evict(e.getCacheKey());\n\n    // handle the exception and provide the necessary response as you wish\n    return ...;\n  }\n}\n</code></pre>\n<p>It is important to realize that when dealing with keys composed by several arguments <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/integration.html#cache-annotations-cacheable-default-key\" rel=\"nofollow noreferrer\">by default</a> (please, consider read <a href=\"https://www.logicbig.com/tutorials/spring-framework/spring-integration/cache-key-generation.html\" rel=\"nofollow noreferrer\">this</a> as well) the actual cache key will be wrapped as an instance of the <code>SimpleKey</code> class that contains all this parameters.</p>\n<p>Please, be aware that this default behavior can be <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/integration.html#cache-annotations-cacheable-key\" rel=\"nofollow noreferrer\">customized</a> to a certain extend with SpEL or providing your own cache <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/cache/interceptor/KeyGenerator.html\" rel=\"nofollow noreferrer\"><code>KeyGenerator</code></a>. For reference, <a href=\"https://github.com/spring-projects/spring-framework/blob/b595dc1dfad9db534ca7b9e8f46bb9926b88ab5a/spring-context/src/main/java/org/springframework/cache/interceptor/SimpleKeyGenerator.java\" rel=\"nofollow noreferrer\">here</a> is the current implementation of the default one provided by the framework, <code>SimpleKeyGenerator</code>.</p>\n<p>Thinking about the problem, a possible solution could be the use of some kind of AOP as well. The idea will be the following.</p>\n<p>First, define some kind of helper annotation. This annotation will be of help in determining which methods should be advised. For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Target(ElementType.METHOD)\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface EvictCacheOnError {\n}\n</code></pre>\n<p>The next step will be defining the aspect that will handle the actual cache eviction process. Assuming you only need to advice Spring managed beans, for simplicity we can use <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#aop\" rel=\"nofollow noreferrer\">Spring AOP</a> for that. You can use either an <code>@Around</code> or an <code>@AfterThrowing</code> aspect. Consider the following example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Aspect\n@Component\npublic class EvictCacheOnErrorAspect {\n\n  @Autowired\n  private CacheManager cacheManager;\n\n  @Around(&quot;@annotation(your.pkg.EvictCacheOnError)&quot;)\n  public void evictCacheOnError(ProceedingJoinPoint pjp) {\n    try {\n      Object retVal = pjp.proceed();\n      return retVal;\n    } catch (CauseOfEvictionException e) {\n      this.cacheManager.getCache(\n          e.getCacheName()).evict(e.getCacheKey()\n      );\n\n      // rethrow \n      throw e;\n    }    \n  }\n}\n</code></pre>\n<p>The final step would be annotate the methods in which the behavior should be applied:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\nClass A{\n\n  @Autowired\n  B b;\n\n  @Transactional\n  @EvictCacheOnError\n  public List&lt;Data&gt; getAllBusinessData(){\n\n    List&lt;Data&gt; dataList = b.getDataFromSystem(&quot;key&quot;);\n\n    throw new CauseOfEvictionException(&quot;test&quot;, &quot;cacheName&quot;, &quot;key&quot;);\n  }\n}\n</code></pre>\n<p>You may even try generalizing the idea, by providing in the <code>EvictCacheOnError</code> annotation all the necessary information you need to perform the cache eviction:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Target(ElementType.METHOD)\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface EvictCacheOnError {\n    String cacheName();\n    int[] cacheKeyArgsIndexes();\n}\n</code></pre>\n<p>With the following aspect:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Aspect\n@Component\npublic class EvictCacheOnErrorAspect {\n\n  @Autowired\n  private CacheManager cacheManager;\n\n  @Autowired\n  private KeyGenerator keyGenerator;\n\n  @Around(&quot;@annotation(your.pkg.EvictCacheOnError)&quot;)\n  // You can inject the annotation right here if you want to\n  public void evictCacheOnError(ProceedingJoinPoint pjp) {\n    try {\n      Object retVal = pjp.proceed();\n      return retVal;\n    } catch (Throwable t) {\n      // Assuming only is applied on methods\n      MethodSignature signature = (MethodSignature) pjp.getSignature();\n      Method method = signature.getMethod();\n      // Obtain a reference to the EvictCacheOnError annotation\n      EvictCacheOnError evictCacheOnError = method.getAnnotation(EvictCacheOnError.class);\n      // Compute cache key: some safety checks are imperative here,\n      // please, excuse the simplicity of the implementation\n      int[] cacheKeyArgsIndexes = evictCacheOnError.cacheKeyArgsIndexes();\n      Object[] args = pjp.getArgs();\n      List&lt;Object&gt; cacheKeyArgsList = new ArrayList&lt;&gt;(cacheKeyArgsIndexes.length);\n      for (int i=0; i &lt; cacheKeyArgsIndexes.length; i++) {\n        cacheKeyArgsList.add(args[cacheKeyArgsIndexes[i]]);\n      }\n      \n      Object[] cacheKeyArgs = new Object[cacheKeyArgsList.size()];\n      cacheKeyArgsList.toArray(cacheKeyArgs);\n\n      Object target = pjp.getTarget();\n\n      Object cacheKey = this.keyGenerator.generate(target, method, cacheKeyArgs);\n\n      // Perform actual eviction\n      String cacheName = evictCacheOnError.cacheName();\n      this.cacheManager.getCache(cacheName).evict(cacheKey);\n\n      // rethrow: be careful here if using in it with transactions\n      // Spring will per default only rollback unchecked exceptions\n      throw new RuntimeException(t);\n    }    \n  }\n}\n</code></pre>\n<p>This last solution depends on the actual method arguments, which may not be appropriate if the cache key is based on intermediate results obtained within your method body.</p>\n"}],"owner":{"account_id":1524257,"reputation":8407,"user_id":1423083,"accept_rate":78,"display_name":"Mukul Goel"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2170,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1660057517,"creation_date":1659194876,"question_id":73176873,"body_markdown":"\r\nI am not able to share the actual code because of corporate policies but below is an example of method structures.\r\n\r\n\r\nSo in the example I want to the cache on the method in Class B to be cleared when the exception is thrown in class A. \r\n\r\nNB: I can not move the cache to Class A so that is not a feasible solution. \r\n\r\nI have tried reading all answers and posts online to get this working but not able to figure it out. \r\n\r\nPlease help with suggestions. A\r\n\r\n\r\nI have set the following properties in `application.properties`\r\n\r\n    spring.cache.enabled=true\r\n    spring.cache.jcache.config=classpath:cache/ehcache.xml\r\n\r\n\r\n----------\r\n\r\n\r\n    @EnableCaching\r\n    @EnableTransactionManagement\r\n        Main Class{\r\n\r\n    \r\n    @Autowired\r\n    CacheManager cacheManager\r\n    \r\n    @PostConstruct\r\n    void postConstruct(){\r\n    (JCacheCacheManager)cachemanager).setTransactionAware(true);\r\n    \r\n    }\r\n    }\r\n\r\n\r\n----------\r\n\r\n\r\n    @Service\r\n    Class A{\r\n    \r\n    @Autowired\r\n    B b;\r\n    \r\n    @Transactional\r\n    public List&lt;Data&gt; getAllBusinessData(){\r\n    \r\n    List&lt;Data&gt; dataList = b.getDataFromSystem(&quot;key&quot;);\r\n    \r\n    //TestCode to test cache clears if exception thrown here\r\n    throw new RuntimeException(&quot;test&quot;);\r\n    \r\n    }\r\n    }\r\n\r\n\r\n----------\r\n\r\n\r\n    @Service\r\n    Class B{\r\n    \r\n    @Cacheable(&quot;cacheName&quot;)\r\n    public List&lt;Data&gt; getDataFromSystem(String key){\r\n    \r\n    client call code here\r\n    \r\n    return dataList;\r\n    \r\n    }\r\n    \r\n    }\r\n\r\n","title":"Spring boot @Cacheable not working as expected with @Transactional","body":"<p>I am not able to share the actual code because of corporate policies but below is an example of method structures.</p>\n<p>So in the example I want to the cache on the method in Class B to be cleared when the exception is thrown in class A.</p>\n<p>NB: I can not move the cache to Class A so that is not a feasible solution.</p>\n<p>I have tried reading all answers and posts online to get this working but not able to figure it out.</p>\n<p>Please help with suggestions. A</p>\n<p>I have set the following properties in <code>application.properties</code></p>\n<pre><code>spring.cache.enabled=true\nspring.cache.jcache.config=classpath:cache/ehcache.xml\n</code></pre>\n<hr />\n<pre><code>@EnableCaching\n@EnableTransactionManagement\n    Main Class{\n\n\n@Autowired\nCacheManager cacheManager\n\n@PostConstruct\nvoid postConstruct(){\n(JCacheCacheManager)cachemanager).setTransactionAware(true);\n\n}\n}\n</code></pre>\n<hr />\n<pre><code>@Service\nClass A{\n\n@Autowired\nB b;\n\n@Transactional\npublic List&lt;Data&gt; getAllBusinessData(){\n\nList&lt;Data&gt; dataList = b.getDataFromSystem(&quot;key&quot;);\n\n//TestCode to test cache clears if exception thrown here\nthrow new RuntimeException(&quot;test&quot;);\n\n}\n}\n</code></pre>\n<hr />\n<pre><code>@Service\nClass B{\n\n@Cacheable(&quot;cacheName&quot;)\npublic List&lt;Data&gt; getDataFromSystem(String key){\n\nclient call code here\n\nreturn dataList;\n\n}\n\n}\n</code></pre>\n"},{"tags":["java","encryption","private-key"],"answers":[{"tags":[],"owner":{"account_id":3158551,"reputation":201,"user_id":2670342,"display_name":"lockner"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1376135474,"creation_date":1376135084,"answer_id":18161536,"question_id":17657981,"body_markdown":"The following code does the work for me. (Using the bcpkix and bcprov libs from Bouncy Castle).\r\n\r\n    private PrivateKey readPrivateKey(String privateKeyPath, String keyPassword) throws IOException {\r\n        \r\n        FileReader fileReader = new FileReader(privateKeyPath);\r\n        PEMParser keyReader = new PEMParser(fileReader);\r\n        \r\n        JcaPEMKeyConverter converter = new JcaPEMKeyConverter();\r\n        PEMDecryptorProvider decryptionProv = new JcePEMDecryptorProviderBuilder().build(keyPassword.toCharArray());\r\n                \r\n        Object keyPair = keyReader.readObject();\r\n        PrivateKeyInfo keyInfo;\r\n        \r\n        if (keyPair instanceof PEMEncryptedKeyPair) {\r\n            PEMKeyPair decryptedKeyPair = ((PEMEncryptedKeyPair) keyPair).decryptKeyPair(decryptionProv);\r\n            keyInfo = decryptedKeyPair.getPrivateKeyInfo();\r\n        } else {\r\n            keyInfo = ((PEMKeyPair) keyPair).getPrivateKeyInfo();\r\n        }\r\n        \r\n        keyReader.close();\r\n        return converter.getPrivateKey(keyInfo);","title":"Read a Private Encrypted Key in Java","body":"<p>The following code does the work for me. (Using the bcpkix and bcprov libs from Bouncy Castle).</p>\n\n<pre><code>private PrivateKey readPrivateKey(String privateKeyPath, String keyPassword) throws IOException {\n\n    FileReader fileReader = new FileReader(privateKeyPath);\n    PEMParser keyReader = new PEMParser(fileReader);\n\n    JcaPEMKeyConverter converter = new JcaPEMKeyConverter();\n    PEMDecryptorProvider decryptionProv = new JcePEMDecryptorProviderBuilder().build(keyPassword.toCharArray());\n\n    Object keyPair = keyReader.readObject();\n    PrivateKeyInfo keyInfo;\n\n    if (keyPair instanceof PEMEncryptedKeyPair) {\n        PEMKeyPair decryptedKeyPair = ((PEMEncryptedKeyPair) keyPair).decryptKeyPair(decryptionProv);\n        keyInfo = decryptedKeyPair.getPrivateKeyInfo();\n    } else {\n        keyInfo = ((PEMKeyPair) keyPair).getPrivateKeyInfo();\n    }\n\n    keyReader.close();\n    return converter.getPrivateKey(keyInfo);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":93619,"reputation":43,"user_id":1705048,"display_name":"NDAclan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660057447,"creation_date":1660057447,"answer_id":73294064,"question_id":17657981,"body_markdown":"My key was generated with the command below.\r\n\r\n`openssl req -new -newkey rsa:2048 -keyout key.pem -pubkey -out pubreq.p10 -subj &quot;/CN=MyKey&quot;`\r\n\r\nApparently the output was a `PKCS8EncryptedPrivateKeyInfo` and after reading stuff here and there, this is what I came up with:\r\n\r\n```java\r\ntry {\r\n    File file = ResourceUtils.getFile(&quot;classpath:&quot; + decryptionKeystore);\r\n\r\n    try (FileReader fileReader = new FileReader(file);\r\n        PEMParser keyReader = new PEMParser(fileReader)) {\r\n        Object keyPair = keyReader.readObject();\r\n        PrivateKeyInfo keyInfo;\r\n\r\n        if (keyPair instanceof PEMEncryptedKeyPair) {\r\n            PEMDecryptorProvider decryptionProv = new JcePEMDecryptorProviderBuilder().build(passphrase);\r\n            PEMKeyPair decryptedKeyPair = ((PEMEncryptedKeyPair) keyPair).decryptKeyPair(decryptionProv);\r\n            keyInfo = decryptedKeyPair.getPrivateKeyInfo();\r\n        } else if (keyPair instanceof PKCS8EncryptedPrivateKeyInfo) {\r\n            InputDecryptorProvider decryptorProvider = new JceOpenSSLPKCS8DecryptorProviderBuilder().build(passphrase);\r\n            keyInfo = ((PKCS8EncryptedPrivateKeyInfo) keyPair).decryptPrivateKeyInfo(decryptorProvider);\r\n        } else {\r\n            keyInfo = ((PEMKeyPair) keyPair).getPrivateKeyInfo();\r\n        }\r\n\r\n        return new JcaPEMKeyConverter().getPrivateKey(keyInfo);\r\n    } catch (Exception e) {\r\n        LOGGER.error(&quot;Exception while getting private key&quot;, e);\r\n    }\r\n} catch (FileNotFoundException e) {\r\n    LOGGER.debug(&quot;Decryption keystore file not found&quot;);\r\n}\r\n```","title":"Read a Private Encrypted Key in Java","body":"<p>My key was generated with the command below.</p>\n<p><code>openssl req -new -newkey rsa:2048 -keyout key.pem -pubkey -out pubreq.p10 -subj &quot;/CN=MyKey&quot;</code></p>\n<p>Apparently the output was a <code>PKCS8EncryptedPrivateKeyInfo</code> and after reading stuff here and there, this is what I came up with:</p>\n<pre class=\"lang-java prettyprint-override\"><code>try {\n    File file = ResourceUtils.getFile(&quot;classpath:&quot; + decryptionKeystore);\n\n    try (FileReader fileReader = new FileReader(file);\n        PEMParser keyReader = new PEMParser(fileReader)) {\n        Object keyPair = keyReader.readObject();\n        PrivateKeyInfo keyInfo;\n\n        if (keyPair instanceof PEMEncryptedKeyPair) {\n            PEMDecryptorProvider decryptionProv = new JcePEMDecryptorProviderBuilder().build(passphrase);\n            PEMKeyPair decryptedKeyPair = ((PEMEncryptedKeyPair) keyPair).decryptKeyPair(decryptionProv);\n            keyInfo = decryptedKeyPair.getPrivateKeyInfo();\n        } else if (keyPair instanceof PKCS8EncryptedPrivateKeyInfo) {\n            InputDecryptorProvider decryptorProvider = new JceOpenSSLPKCS8DecryptorProviderBuilder().build(passphrase);\n            keyInfo = ((PKCS8EncryptedPrivateKeyInfo) keyPair).decryptPrivateKeyInfo(decryptorProvider);\n        } else {\n            keyInfo = ((PEMKeyPair) keyPair).getPrivateKeyInfo();\n        }\n\n        return new JcaPEMKeyConverter().getPrivateKey(keyInfo);\n    } catch (Exception e) {\n        LOGGER.error(&quot;Exception while getting private key&quot;, e);\n    }\n} catch (FileNotFoundException e) {\n    LOGGER.debug(&quot;Decryption keystore file not found&quot;);\n}\n</code></pre>\n"}],"owner":{"account_id":469962,"reputation":93,"user_id":876887,"display_name":"Manuel Gustavo Guillen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7006,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":2,"score":7,"last_activity_date":1660057447,"creation_date":1373902176,"question_id":17657981,"body_markdown":"I have the following piece of code:\r\n\r\n        PEMParser pemParser;\r\n    \tFile telexuskeys = new File(locationKey);\r\n\t    if(telexuskeys.exists())\r\n\t    \tpemParser = new PEMParser(new FileReader(telexuskeys));\r\n\t    else{\r\n\t    \tusage(ops);\r\n\t    \tthrow new FileNotFoundException(&quot;The key file (company&#39;s certificate) doesn&#39;t exist!&quot;);\r\n\t    }\r\n\r\n\t    System.out.println(&quot;Loading company&#39;s certificate&quot;);\r\n\t    \r\n\t    Object object = pemParser.readObject();\r\n\t    Object object2 = pemParser.readObject();\r\n\t    \r\n\t    PEMDecryptorProvider decProv = new JcePEMDecryptorProviderBuilder().build(passwordPem.toCharArray());\r\n\t    JcaPEMKeyConverter converter = new JcaPEMKeyConverter().setProvider(&quot;BC&quot;); \r\n\t    \r\n\t    byte[] keyBytes = PrivateKeyInfo.getInstance(object2).getEncoded();\r\n\t    PKCS8EncodedKeySpec spec = new PKCS8EncodedKeySpec(keyBytes);\r\n        KeyFactory kf = KeyFactory.getInstance(&quot;RSA&quot;, &quot;BC&quot;);        \r\n\t    PrivateKey pk = kf.generatePrivate(spec);\r\n\r\n\r\nMy pem file just have the certificate and the private key. I used to be able to read the file and obtain the private key but now the file is protected (encrypted) with a password. What is the instruction that I&#39;m still missing. I know I need to use the PEMDecryptorProvider and the JcaPEMKeyConverter  objects in order to obtain it but I haven&#39;t found the correct combination.","title":"Read a Private Encrypted Key in Java","body":"<p>I have the following piece of code:</p>\n\n<pre><code>    PEMParser pemParser;\n    File telexuskeys = new File(locationKey);\n    if(telexuskeys.exists())\n        pemParser = new PEMParser(new FileReader(telexuskeys));\n    else{\n        usage(ops);\n        throw new FileNotFoundException(\"The key file (company's certificate) doesn't exist!\");\n    }\n\n    System.out.println(\"Loading company's certificate\");\n\n    Object object = pemParser.readObject();\n    Object object2 = pemParser.readObject();\n\n    PEMDecryptorProvider decProv = new JcePEMDecryptorProviderBuilder().build(passwordPem.toCharArray());\n    JcaPEMKeyConverter converter = new JcaPEMKeyConverter().setProvider(\"BC\"); \n\n    byte[] keyBytes = PrivateKeyInfo.getInstance(object2).getEncoded();\n    PKCS8EncodedKeySpec spec = new PKCS8EncodedKeySpec(keyBytes);\n    KeyFactory kf = KeyFactory.getInstance(\"RSA\", \"BC\");        \n    PrivateKey pk = kf.generatePrivate(spec);\n</code></pre>\n\n<p>My pem file just have the certificate and the private key. I used to be able to read the file and obtain the private key but now the file is protected (encrypted) with a password. What is the instruction that I'm still missing. I know I need to use the PEMDecryptorProvider and the JcaPEMKeyConverter  objects in order to obtain it but I haven't found the correct combination.</p>\n"},{"tags":["java","jpa","criteria"],"answers":[{"tags":[],"owner":{"account_id":4354234,"reputation":845,"user_id":3553434,"display_name":"alalalala"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659408275,"creation_date":1659407629,"answer_id":73201392,"question_id":73168775,"body_markdown":"I haven&#39;t used this, I found the relevant documentation, I think it seems to be available like the following, just to provide a reference, I hope it can help you.\r\n\r\n[literal(T)][1]\r\n\r\n[![enter image description here][2]][2]\r\n\r\n    Integer a = 1;\r\n    Long b = 2L;\r\n    String c = &quot;3&quot;;\r\n    Expression&lt;Integer&gt; integerParameter = criteriaBuilder.literal(a);\r\n    Expression&lt;Long&gt; longParameter = criteriaBuilder.literal(b);\r\n    Expression&lt;String&gt; stringParameter = criteriaBuilder.literal(c);\r\n\r\nAnd i found that method [minusDays(long)][3] return a `LocalDateTime`, so i think we should take that like :\r\n\r\n    LocalDateTime ldt = LocalDateTime.now().minusDays( (long) root.get(&quot;person&quot;).get(&quot;birthDay&quot;).as(Long.class));\r\n    Expression&lt;LocalDateTime&gt; longParameter = criteriaBuilder.literal(ldt);\r\n\r\nAs for how to convert LocalDateTime into the data you need, I am currently unclear, because it is not clear what your specific needs are.\r\n\r\n\r\n  [1]: https://docs.jboss.org/hibernate/orm/4.2/javadocs/org/hibernate/ejb/criteria/CriteriaBuilderImpl.html#literal(T)\r\n  [2]: https://i.stack.imgur.com/VmpF2.png\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html#minusDays-long","title":"How do I cast JPA criteria Expression&lt;Long&gt; to long java type","body":"<p>I haven't used this, I found the relevant documentation, I think it seems to be available like the following, just to provide a reference, I hope it can help you.</p>\n<p><a href=\"https://docs.jboss.org/hibernate/orm/4.2/javadocs/org/hibernate/ejb/criteria/CriteriaBuilderImpl.html#literal(T)\" rel=\"nofollow noreferrer\">literal(T)</a></p>\n<p><a href=\"https://i.stack.imgur.com/VmpF2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VmpF2.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>Integer a = 1;\nLong b = 2L;\nString c = &quot;3&quot;;\nExpression&lt;Integer&gt; integerParameter = criteriaBuilder.literal(a);\nExpression&lt;Long&gt; longParameter = criteriaBuilder.literal(b);\nExpression&lt;String&gt; stringParameter = criteriaBuilder.literal(c);\n</code></pre>\n<p>And i found that method <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html#minusDays-long\" rel=\"nofollow noreferrer\">minusDays(long)</a> return a <code>LocalDateTime</code>, so i think we should take that like :</p>\n<pre><code>LocalDateTime ldt = LocalDateTime.now().minusDays( (long) root.get(&quot;person&quot;).get(&quot;birthDay&quot;).as(Long.class));\nExpression&lt;LocalDateTime&gt; longParameter = criteriaBuilder.literal(ldt);\n</code></pre>\n<p>As for how to convert LocalDateTime into the data you need, I am currently unclear, because it is not clear what your specific needs are.</p>\n"},{"tags":[],"owner":{"account_id":19092422,"reputation":51311,"user_id":13942448,"display_name":"jccampanero"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1660057191,"creation_date":1659481295,"answer_id":73214630,"question_id":73168775,"body_markdown":"In your first error, you are mixing `LocalDateTime.now().minusDays` with the `Expression` `root.get(&quot;person&quot;).get(&quot;birthDay&quot;).as(Long.class)`, and it is not possible.\r\n\r\nThe error is not detected at compile time because you are actually casting the `Expression` `root.get(&quot;person&quot;).get(&quot;birthDay&quot;).as(Long.class)` to `long`:\r\n\r\n```java\r\n(long) root.get(&quot;person&quot;).get(&quot;birthDay&quot;).as(Long.class)\r\n```\r\n\r\nSo everything is fine for the compiler, but at runtime an error will be raised because an `Expression` is not a `long` value. \r\n\r\nIn your second error you are trying using:\r\n\r\n```java\r\nroot.get(&quot;person&quot;).get(&quot;birthDay&quot;).toString()\r\n```\r\n\r\nAs a result of the evaluation of this code you will get a `String` representation of the JPA criteria path you are defining, `org.hibernate.query.criteria.internal.path.SingularAttributePath@2ed2d35d` in your use case.\r\n\r\nThen, if you compute `Long.parseValue` of `org.hibernate.query.criteria.internal.path.SingularAttributePath@2ed2d35d` if will raise an error because `org.hibernate.query.criteria.internal.path.SingularAttributePath@2ed2d35d` doesn&#39;t represent a valid number.\r\n\r\nUnder the hood, the problem is that you are trying to apply the operation `LocalDateTime.now().minusDays` to an `Expression`, but it is not possible, you need to perform the computation in some other suitable way.\r\n\r\nIt is unclear by your question what you are actually trying to achieve, but the JPA criteria API provides a rich set of builtin expressions you can use as `Predicate`s to deal with dates, such as, assuming `root.get(&quot;person&quot;).get(&quot;birthDay&quot;)` represent a `Date` _like_ object:\r\n\r\n```java\r\ncb.greaterThanOrEqualTo(root.get(&quot;person&quot;).get(&quot;birthDay&quot;), cb.literal(LocalDate.now()));\r\n//...\r\ncb.greaterThan(root.get(&quot;person&quot;).get(&quot;birthDay&quot;), cb.literal(LocalDate.now()));\r\n//...\r\ncb.lessThanOrEqualTo(root.get(&quot;person&quot;).get(&quot;birthDay&quot;), cb.literal(LocalDate.now()));\r\n//...\r\ncb.lessThan(root.get(&quot;person&quot;).get(&quot;birthDay&quot;), cb.literal(LocalDate.now()));\r\n```\r\n\r\nYou can create your own function using `cb.function` as well and use that function in your predicates. Consider for that purpose defining a helper method somewhere in your code, for example:\r\n\r\n```java\r\npublic static Expression&lt;Long&gt; daysBetween(\r\n  CriteriaBuilder cb, Expression&lt;LocalDate&gt; startDate, Expression&lt;LocalDate&gt; endDate) {\r\n  return cb.function(&quot;DAYS_BETWEEN&quot;, long.class, startDate, endDate);\r\n}\r\n```\r\n\r\nWhere `DAYS_BETWEEN` is the name, you can choose the one you consider most appropriate, of a database level predefined or user defined function. In Oracle for example it exists _per se_, but it should be straight forward to implement in other database systems:\r\n\r\n```sql\r\ncreate or replace function days_between...\r\n```\r\n\r\nThen, use this helper method in your code. For example, _give me the persons that turns years in the following `numberOfDaysToTurnYears` days_:\r\n\r\n```java\r\nCriteriaBuilder cb = entityManager.getCriteriaBuilder();\r\n \r\nCriteriaQuery&lt;Person&gt; query = cb.createQuery(Person.class);\r\n\r\nRoot&lt;Person&gt; root = query.from(Person.class);\r\n\r\nParameterExpression&lt;Integer&gt; numberOfDaysToTurnYears = cb.parameter(Integer.class);\r\n\r\nquery.where(\r\n  cb.lessThan(\r\n    // Here you can use LocalDate.now(), because it is actually a pure literal value\r\n    daysBetween(cb, root.get(&quot;person&quot;).get(&quot;birthDay&quot;), cb.literal(LocalDate.now())),\r\n    numberOfDaysToTurnYears\r\n  )\r\n);\r\n\r\nList&lt;Person&gt; people = entityManager.createQuery(query)\r\n    .setParameter(numberOfDaysToTurnYears, 10)\r\n    .getResultList();\r\n```","title":"How do I cast JPA criteria Expression&lt;Long&gt; to long java type","body":"<p>In your first error, you are mixing <code>LocalDateTime.now().minusDays</code> with the <code>Expression</code> <code>root.get(&quot;person&quot;).get(&quot;birthDay&quot;).as(Long.class)</code>, and it is not possible.</p>\n<p>The error is not detected at compile time because you are actually casting the <code>Expression</code> <code>root.get(&quot;person&quot;).get(&quot;birthDay&quot;).as(Long.class)</code> to <code>long</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>(long) root.get(&quot;person&quot;).get(&quot;birthDay&quot;).as(Long.class)\n</code></pre>\n<p>So everything is fine for the compiler, but at runtime an error will be raised because an <code>Expression</code> is not a <code>long</code> value.</p>\n<p>In your second error you are trying using:</p>\n<pre class=\"lang-java prettyprint-override\"><code>root.get(&quot;person&quot;).get(&quot;birthDay&quot;).toString()\n</code></pre>\n<p>As a result of the evaluation of this code you will get a <code>String</code> representation of the JPA criteria path you are defining, <code>org.hibernate.query.criteria.internal.path.SingularAttributePath@2ed2d35d</code> in your use case.</p>\n<p>Then, if you compute <code>Long.parseValue</code> of <code>org.hibernate.query.criteria.internal.path.SingularAttributePath@2ed2d35d</code> if will raise an error because <code>org.hibernate.query.criteria.internal.path.SingularAttributePath@2ed2d35d</code> doesn't represent a valid number.</p>\n<p>Under the hood, the problem is that you are trying to apply the operation <code>LocalDateTime.now().minusDays</code> to an <code>Expression</code>, but it is not possible, you need to perform the computation in some other suitable way.</p>\n<p>It is unclear by your question what you are actually trying to achieve, but the JPA criteria API provides a rich set of builtin expressions you can use as <code>Predicate</code>s to deal with dates, such as, assuming <code>root.get(&quot;person&quot;).get(&quot;birthDay&quot;)</code> represent a <code>Date</code> <em>like</em> object:</p>\n<pre class=\"lang-java prettyprint-override\"><code>cb.greaterThanOrEqualTo(root.get(&quot;person&quot;).get(&quot;birthDay&quot;), cb.literal(LocalDate.now()));\n//...\ncb.greaterThan(root.get(&quot;person&quot;).get(&quot;birthDay&quot;), cb.literal(LocalDate.now()));\n//...\ncb.lessThanOrEqualTo(root.get(&quot;person&quot;).get(&quot;birthDay&quot;), cb.literal(LocalDate.now()));\n//...\ncb.lessThan(root.get(&quot;person&quot;).get(&quot;birthDay&quot;), cb.literal(LocalDate.now()));\n</code></pre>\n<p>You can create your own function using <code>cb.function</code> as well and use that function in your predicates. Consider for that purpose defining a helper method somewhere in your code, for example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static Expression&lt;Long&gt; daysBetween(\n  CriteriaBuilder cb, Expression&lt;LocalDate&gt; startDate, Expression&lt;LocalDate&gt; endDate) {\n  return cb.function(&quot;DAYS_BETWEEN&quot;, long.class, startDate, endDate);\n}\n</code></pre>\n<p>Where <code>DAYS_BETWEEN</code> is the name, you can choose the one you consider most appropriate, of a database level predefined or user defined function. In Oracle for example it exists <em>per se</em>, but it should be straight forward to implement in other database systems:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>create or replace function days_between...\n</code></pre>\n<p>Then, use this helper method in your code. For example, <em>give me the persons that turns years in the following <code>numberOfDaysToTurnYears</code> days</em>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>CriteriaBuilder cb = entityManager.getCriteriaBuilder();\n \nCriteriaQuery&lt;Person&gt; query = cb.createQuery(Person.class);\n\nRoot&lt;Person&gt; root = query.from(Person.class);\n\nParameterExpression&lt;Integer&gt; numberOfDaysToTurnYears = cb.parameter(Integer.class);\n\nquery.where(\n  cb.lessThan(\n    // Here you can use LocalDate.now(), because it is actually a pure literal value\n    daysBetween(cb, root.get(&quot;person&quot;).get(&quot;birthDay&quot;), cb.literal(LocalDate.now())),\n    numberOfDaysToTurnYears\n  )\n);\n\nList&lt;Person&gt; people = entityManager.createQuery(query)\n    .setParameter(numberOfDaysToTurnYears, 10)\n    .getResultList();\n</code></pre>\n"}],"owner":{"account_id":11885668,"reputation":729,"user_id":8698137,"display_name":"Shadyar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2609,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73214630,"answer_count":2,"score":1,"last_activity_date":1660057191,"creation_date":1659114289,"question_id":73168775,"body_markdown":"This code  \r\n```\r\n    criteriaBuilder.literal(LocalDateTime.now().minusDays( (long) root.get(&quot;person&quot;).get(&quot;birthDay&quot;).as(Long.class)))  \r\n```\r\nhas not compile error but at run time gets this error:  \r\nCannot cast from Expression&lt;Integer&gt; to int   \r\n  \r\nI tried using String:  \r\n```\r\n    criteriaBuilder.literal(LocalDateTime.now().minusDays( Long.parseValue( root.get(&quot;person&quot;).get(&quot;birthDay&quot;).toString())))  \r\n```\r\nThis also gets error:  \r\nERROR: For input string: &quot;org.hibernate.query.criteria.internal.path.SingularAttributePath@2ed2d35d&quot;; nested exception is java.lang.NumberFormatException: For input string: &quot;org.hibernate.query.criteria.internal.path.SingularAttributePath@2ed2d35d&quot;\r\n","title":"How do I cast JPA criteria Expression&lt;Long&gt; to long java type","body":"<p>This code</p>\n<pre><code>    criteriaBuilder.literal(LocalDateTime.now().minusDays( (long) root.get(&quot;person&quot;).get(&quot;birthDay&quot;).as(Long.class)))  \n</code></pre>\n<p>has not compile error but at run time gets this error:<br />\nCannot cast from Expression to int</p>\n<p>I tried using String:</p>\n<pre><code>    criteriaBuilder.literal(LocalDateTime.now().minusDays( Long.parseValue( root.get(&quot;person&quot;).get(&quot;birthDay&quot;).toString())))  \n</code></pre>\n<p>This also gets error:<br />\nERROR: For input string: &quot;org.hibernate.query.criteria.internal.path.SingularAttributePath@2ed2d35d&quot;; nested exception is java.lang.NumberFormatException: For input string: &quot;org.hibernate.query.criteria.internal.path.SingularAttributePath@2ed2d35d&quot;</p>\n"},{"tags":["java","azure","azure-functions","azure-storage"],"comments":[{"owner":{"account_id":9341111,"reputation":190,"user_id":6933873,"display_name":"sakulachi8"},"score":0,"creation_date":1657727031,"post_id":72968825,"comment_id":128880692,"body_markdown":"Do you have permission to delete the blob? I think you can use a SAS token for the specific container.","body":"Do you have permission to delete the blob? I think you can use a SAS token for the specific container."},{"owner":{"account_id":25800605,"reputation":33,"user_id":19543108,"display_name":"Kanyu"},"score":0,"creation_date":1657727423,"post_id":72968825,"comment_id":128880831,"body_markdown":"@sakulachi8 let me try and see if it works. I am able to delete blobs from the cloud explorer in VS (I don&#39;t know if that is related).","body":"@sakulachi8 let me try and see if it works. I am able to delete blobs from the cloud explorer in VS (I don&#39;t know if that is related)."},{"owner":{"account_id":25800605,"reputation":33,"user_id":19543108,"display_name":"Kanyu"},"score":0,"creation_date":1657812323,"post_id":72968825,"comment_id":128904248,"body_markdown":"@sakulachi8 where in the code should I put the SAS token? I have checked online and the only references I could find is people wanting to generate tokens.","body":"@sakulachi8 where in the code should I put the SAS token? I have checked online and the only references I could find is people wanting to generate tokens."},{"owner":{"account_id":9341111,"reputation":190,"user_id":6933873,"display_name":"sakulachi8"},"score":0,"creation_date":1657867030,"post_id":72968825,"comment_id":128916157,"body_markdown":"you can add it in the connection string,","body":"you can add it in the connection string,"},{"owner":{"account_id":25800605,"reputation":33,"user_id":19543108,"display_name":"Kanyu"},"score":0,"creation_date":1657896921,"post_id":72968825,"comment_id":128926230,"body_markdown":"@sakulachi8 I tried and it keeps giving me this error, &quot;Microsoft.Azure.WebJobs.Extensions.Storage: Storage account connection string for &#39;STORAGE&#39; is invalid.&quot; I tried both the SAS token and URL. However, I am generating the token from the container level, since I am not able to generate one at the storage account level.","body":"@sakulachi8 I tried and it keeps giving me this error, &quot;Microsoft.Azure.WebJobs.Extensions.Storage: Storage account connection string for &#39;STORAGE&#39; is invalid.&quot; I tried both the SAS token and URL. However, I am generating the token from the container level, since I am not able to generate one at the storage account level."},{"owner":{"account_id":25800605,"reputation":33,"user_id":19543108,"display_name":"Kanyu"},"score":0,"creation_date":1659365193,"post_id":72968825,"comment_id":129271311,"body_markdown":"It was a permissions issue after all. I was able to manipulate file in blob storage when the Function app was deployed. The hanging was only when testing locally due to a permissions issue (I assume).","body":"It was a permissions issue after all. I was able to manipulate file in blob storage when the Function app was deployed. The hanging was only when testing locally due to a permissions issue (I assume)."}],"answers":[{"tags":[],"owner":{"account_id":25800605,"reputation":33,"user_id":19543108,"display_name":"Kanyu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660057181,"creation_date":1660057181,"answer_id":73293999,"question_id":72968825,"body_markdown":"It was a permissions issue when testing locally. When deployed to Azure the blob deletion happened as it should. ","title":"Not able to delete blob from Azure storage Account - Azure Function (Java)","body":"<p>It was a permissions issue when testing locally. When deployed to Azure the blob deletion happened as it should.</p>\n"}],"owner":{"account_id":25800605,"reputation":33,"user_id":19543108,"display_name":"Kanyu"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":726,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1660057181,"creation_date":1657726000,"question_id":72968825,"body_markdown":"When I try to delete a blob from an Azure storage account from my Azure Function (Java) the program just hangs on ```blob.deleteIfExists();``` \r\n\r\nWhen I perform the same operations on a local storage emulator it runs just fine and deletes the blob from the container. \r\n\r\nHere is the code that I am using to delete the blob. \r\n\r\n```\r\n        // Retrieve storage account from connection-string.\r\n        CloudStorageAccount storageAccount = CloudStorageAccount.parse(System.getenv(&quot;STORAGE&quot;));\r\n        \r\n        // Create the blob client.\r\n        CloudBlobClient blobClient = storageAccount.createCloudBlobClient();\r\n          \r\n        // Retrieve reference to a previously created container.\r\n        CloudBlobContainer container = blobClient.getContainerReference(&quot;container-name&quot;);\r\n            \r\n        // Retrieve reference to a blob named fileName.\r\n        CloudBlockBlob blob = container.getBlockBlobReference(fileName); \r\n        context.getLogger().info(blob.getName());\r\n\r\n        // Delete the blob.\r\n        blob.deleteIfExists();\r\n```\r\n\r\nThe line where I have ``` context.getLogger().info(blob.getName());``` works fine and returns the correct blob but ```blob.deleteIfExists();``` is just causing the program to hang.","title":"Not able to delete blob from Azure storage Account - Azure Function (Java)","body":"<p>When I try to delete a blob from an Azure storage account from my Azure Function (Java) the program just hangs on <code>blob.deleteIfExists();</code></p>\n<p>When I perform the same operations on a local storage emulator it runs just fine and deletes the blob from the container.</p>\n<p>Here is the code that I am using to delete the blob.</p>\n<pre><code>        // Retrieve storage account from connection-string.\n        CloudStorageAccount storageAccount = CloudStorageAccount.parse(System.getenv(&quot;STORAGE&quot;));\n        \n        // Create the blob client.\n        CloudBlobClient blobClient = storageAccount.createCloudBlobClient();\n          \n        // Retrieve reference to a previously created container.\n        CloudBlobContainer container = blobClient.getContainerReference(&quot;container-name&quot;);\n            \n        // Retrieve reference to a blob named fileName.\n        CloudBlockBlob blob = container.getBlockBlobReference(fileName); \n        context.getLogger().info(blob.getName());\n\n        // Delete the blob.\n        blob.deleteIfExists();\n</code></pre>\n<p>The line where I have <code> context.getLogger().info(blob.getName());</code> works fine and returns the correct blob but <code>blob.deleteIfExists();</code> is just causing the program to hang.</p>\n"},{"tags":["java","generics"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":3,"creation_date":1660055397,"post_id":73293399,"comment_id":129439203,"body_markdown":"Are you required to use arrays?  Using Lists would solve the problem, no reflection needed.","body":"Are you required to use arrays?  Using Lists would solve the problem, no reflection needed."},{"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"score":1,"creation_date":1660055644,"post_id":73293399,"comment_id":129439304,"body_markdown":"Is there a question here? Stack Overflow is a question &amp; answer platform, not a community code review service. https://codereview.stackexchange.com/ would be a better place if you don&#39;t have a specific question.","body":"Is there a question here? Stack Overflow is a question &amp; answer platform, not a community code review service. <a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a> would be a better place if you don&#39;t have a specific question."},{"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"score":2,"creation_date":1660056000,"post_id":73293399,"comment_id":129439447,"body_markdown":"I’m voting to close this question because it&#39;s a request for code review","body":"I’m voting to close this question because it&#39;s a request for code review"}],"answers":[{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660057116,"creation_date":1660057116,"answer_id":73293983,"question_id":73293399,"body_markdown":"Both `Class.getComponentType` and `Array.newInstance` are a bit primitive. You can merely do:\r\n\r\n    Object[][] t = (Object[][]) Array.newInstance(elements.getClass().getComponentType(),\r\n                                 nRow, nCol); // Object is actually type T.\r\n\r\nBut that actually is even formally wrong. It should be T. So your version is not worse.\r\n\r\nLook at this:\r\n\r\n    int[][] t = (int[][]) Array.newInstance(int.class, nRow, nCol);\r\n\r\nNot feasible with generics.\r\n\r\nFor a run-time cast:\r\n\r\n    Class&lt;?&gt; ctype = elements.getClass().getComponentType();\r\n    ctype.cast(object);\r\n\r\nAn improvement would seem:\r\n\r\n    // Array:\r\n    static &lt;C&gt; C[] newInstance​(Class&lt;C&gt; componentType, int length);\r\n\r\nUnfortunately you also can have `int.class` besides `Integer.class` for `int[].class` and `Integer.class`.\r\n\r\n**The language means of the typing system in java do not form a complete &quot;algebra&quot; with which to describe all this.**\r\n\r\nHowever in a couple of year we will see `List&lt;int&gt;`.\r\n\r\nMeanwhile either look for a more complete language or try `ArrayList&lt;T&gt;` instead of `T[]` with an explicit `Class&lt;T&gt; componentType` to represent the missing getComponentType().","title":"Java: Help (and review) with reflection with Generic class","body":"<p>Both <code>Class.getComponentType</code> and <code>Array.newInstance</code> are a bit primitive. You can merely do:</p>\n<pre><code>Object[][] t = (Object[][]) Array.newInstance(elements.getClass().getComponentType(),\n                             nRow, nCol); // Object is actually type T.\n</code></pre>\n<p>But that actually is even formally wrong. It should be T. So your version is not worse.</p>\n<p>Look at this:</p>\n<pre><code>int[][] t = (int[][]) Array.newInstance(int.class, nRow, nCol);\n</code></pre>\n<p>Not feasible with generics.</p>\n<p>For a run-time cast:</p>\n<pre><code>Class&lt;?&gt; ctype = elements.getClass().getComponentType();\nctype.cast(object);\n</code></pre>\n<p>An improvement would seem:</p>\n<pre><code>// Array:\nstatic &lt;C&gt; C[] newInstance​(Class&lt;C&gt; componentType, int length);\n</code></pre>\n<p>Unfortunately you also can have <code>int.class</code> besides <code>Integer.class</code> for <code>int[].class</code> and <code>Integer.class</code>.</p>\n<p><strong>The language means of the typing system in java do not form a complete &quot;algebra&quot; with which to describe all this.</strong></p>\n<p>However in a couple of year we will see <code>List&lt;int&gt;</code>.</p>\n<p>Meanwhile either look for a more complete language or try <code>ArrayList&lt;T&gt;</code> instead of <code>T[]</code> with an explicit <code>Class&lt;T&gt; componentType</code> to represent the missing getComponentType().</p>\n"}],"owner":{"account_id":6389949,"reputation":54,"user_id":4956468,"display_name":"Mrigank Vallabh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73293983,"answer_count":1,"score":0,"last_activity_date":1660057116,"creation_date":1660054668,"question_id":73293399,"body_markdown":"I am creating a Matrix class (just for experiment) with generic type\r\n\r\n```java\r\nimport java.lang.reflect.Array;\r\nimport java.util.Arrays;\r\n\r\n@SuppressWarnings(&quot;unused&quot;)\r\npublic class Matrix&lt;T extends Number&gt; {\r\n  private int nRow;\r\n  private int nCol;\r\n  private T[] elements;\r\n  private T[][] elementsGrid;\r\n\r\n  public Matrix(int nRow, T[] elements) {\r\n    this(nRow, nRow, elements);\r\n  }\r\n\r\n  public Matrix(int nRow, int nCol, T[] elements) {\r\n    if (elements.length != nRow * nCol) {\r\n      throw new IllegalArgumentException(\r\n          &quot;Incorrect size: Expected(&quot; + nRow * nCol + &quot;), but provided(&quot; + elements.length + &quot;)&quot;);\r\n    }\r\n    this.nRow = nRow;\r\n    this.nCol = nCol;\r\n    this.elements = elements;\r\n\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    T[][] t = (T[][]) Array.newInstance(elements.getClass().getComponentType(), new int[] { nRow, nCol });\r\n\r\n    elementsGrid = t;\r\n    for (int i = 0; i &lt; nRow; i++) {\r\n      for (int j = 0; j &lt; nCol; j++) {\r\n        elementsGrid[i][j] = elements[i * nCol + j];\r\n      }\r\n    }\r\n    System.out.println(Arrays.deepToString(elementsGrid));\r\n\r\n  }\r\n```\r\n\r\nBasically i am just taking a single dim array and copying it to double dim array. The code works fine, but I had to struggle a lot with this, and I am not sure if this is indeed the correct way to handle this. For e.g. if I remove the @SuppressWarnings(&quot;unchecked&quot;), it gives me the warning, of unchecked cast. Is it fine to ignore this warning, since I have already declared my generic to only allow subclasses of `Number`.","title":"Java: Help (and review) with reflection with Generic class","body":"<p>I am creating a Matrix class (just for experiment) with generic type</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.lang.reflect.Array;\nimport java.util.Arrays;\n\n@SuppressWarnings(&quot;unused&quot;)\npublic class Matrix&lt;T extends Number&gt; {\n  private int nRow;\n  private int nCol;\n  private T[] elements;\n  private T[][] elementsGrid;\n\n  public Matrix(int nRow, T[] elements) {\n    this(nRow, nRow, elements);\n  }\n\n  public Matrix(int nRow, int nCol, T[] elements) {\n    if (elements.length != nRow * nCol) {\n      throw new IllegalArgumentException(\n          &quot;Incorrect size: Expected(&quot; + nRow * nCol + &quot;), but provided(&quot; + elements.length + &quot;)&quot;);\n    }\n    this.nRow = nRow;\n    this.nCol = nCol;\n    this.elements = elements;\n\n    @SuppressWarnings(&quot;unchecked&quot;)\n    T[][] t = (T[][]) Array.newInstance(elements.getClass().getComponentType(), new int[] { nRow, nCol });\n\n    elementsGrid = t;\n    for (int i = 0; i &lt; nRow; i++) {\n      for (int j = 0; j &lt; nCol; j++) {\n        elementsGrid[i][j] = elements[i * nCol + j];\n      }\n    }\n    System.out.println(Arrays.deepToString(elementsGrid));\n\n  }\n</code></pre>\n<p>Basically i am just taking a single dim array and copying it to double dim array. The code works fine, but I had to struggle a lot with this, and I am not sure if this is indeed the correct way to handle this. For e.g. if I remove the @SuppressWarnings(&quot;unchecked&quot;), it gives me the warning, of unchecked cast. Is it fine to ignore this warning, since I have already declared my generic to only allow subclasses of <code>Number</code>.</p>\n"},{"tags":["java","android","mvvm","android-livedata"],"answers":[{"tags":[],"owner":{"account_id":11954296,"reputation":41,"user_id":13722324,"display_name":"A.Z"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660056770,"creation_date":1659768108,"answer_id":73257711,"question_id":73247378,"body_markdown":"I found a solution to my problem in another question (so my question will be counted as repeated).\r\n\r\nThe solution (to my problem) can be found [here][1]. What I needed was a `MediatorLiveData` to combine my two live data into one live data and observe it.\r\n\r\nCredit goes to [@EpicPandaForce][2]\r\n\r\n```java\r\n    public class CombinedLiveData2&lt;A, B&gt; extends MediatorLiveData&lt;Pair&lt;A, B&gt;&gt; {\r\n    private A a;\r\n    private B b;\r\n\r\n    public CombinedLiveData2(LiveData&lt;A&gt; ld1, LiveData&lt;B&gt; ld2) {\r\n        setValue(Pair.create(a, b));\r\n\r\n        addSource(ld1, (a) -&gt; { \r\n             if(a != null) {\r\n                this.a = a;\r\n             } \r\n             setValue(Pair.create(a, b)); \r\n        });\r\n\r\n        addSource(ld2, (b) -&gt; { \r\n            if(b != null) {\r\n                this.b = b;\r\n            } \r\n            setValue(Pair.create(a, b));\r\n        });\r\n    }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/57079710/13722324\r\n  [2]: https://stackoverflow.com/users/2413303/epicpandaforce","title":"Observing Multiple LiveData and MVVM Structure Android Java","body":"<p>I found a solution to my problem in another question (so my question will be counted as repeated).</p>\n<p>The solution (to my problem) can be found <a href=\"https://stackoverflow.com/a/57079710/13722324\">here</a>. What I needed was a <code>MediatorLiveData</code> to combine my two live data into one live data and observe it.</p>\n<p>Credit goes to <a href=\"https://stackoverflow.com/users/2413303/epicpandaforce\">@EpicPandaForce</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>    public class CombinedLiveData2&lt;A, B&gt; extends MediatorLiveData&lt;Pair&lt;A, B&gt;&gt; {\n    private A a;\n    private B b;\n\n    public CombinedLiveData2(LiveData&lt;A&gt; ld1, LiveData&lt;B&gt; ld2) {\n        setValue(Pair.create(a, b));\n\n        addSource(ld1, (a) -&gt; { \n             if(a != null) {\n                this.a = a;\n             } \n             setValue(Pair.create(a, b)); \n        });\n\n        addSource(ld2, (b) -&gt; { \n            if(b != null) {\n                this.b = b;\n            } \n            setValue(Pair.create(a, b));\n        });\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":11954296,"reputation":41,"user_id":13722324,"display_name":"A.Z"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":189,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73257711,"answer_count":1,"score":1,"last_activity_date":1660056770,"creation_date":1659690892,"question_id":73247378,"body_markdown":"I will try to make this question general as much as I can.\r\n\r\nIn short, I&#39;m using FireStore Firebase and what I am trying to do is that I have Two Repositories (TransactionsRepository and VaultAccountRepository) and each one has some queries to add (Transaction or VaultAccount objects), edit, delete, etc... \r\n\r\nI made a third Repository (OperationRepository) in which I want to (for example) get all transactions and get the default account to do an operation on them (like adding all the transactions amount with the account initial value and so on) and get that operation as alive data to observe it in the view.\r\n\r\nThe idea here is that I don&#39;t know how to observe the transactions and the default account to update the operation returned and consequently update the UI\r\n\r\nI have read about ```Transformation.map``` and ```Transformation.switchMap```, but I could not understand them at all and most examples are in Kotlin and I&#39;m not even sure that it&#39;s what I&#39;m looking for to do this! and not sure if this structure is done right as I&#39;m new to MVVM.\r\n\r\nI will include some of the code to show what I have tried to do just in case my explanation above wasn&#39;t clear enough.\r\n\r\n```\r\npublic class VaultRepository {\r\n...\r\nprivate final MutableLiveData&lt;VaultAccount&gt; defaultVaultLiveData;\r\n\r\n...\r\n\r\npublic MutableLiveData&lt;VaultAccount&gt; getDefaultVault() {\r\n        fireStore.collection(&quot;users&quot;).document(firebaseUser.getUid()).collection(&quot;vaults&quot;)\r\n                .whereEqualTo(&quot;defaultAccount&quot;, true)\r\n                .addSnapshotListener((value, error) -&gt; {\r\n                    VaultAccount vaultAccount = new VaultAccount();\r\n                    if (value != null) {\r\n                        for (QueryDocumentSnapshot doc : value) {\r\n                            if (doc != null) {\r\n                                vaultAccount = doc.toObject(VaultAccount.class);\r\n                            }\r\n                        }\r\n                        defaultVaultLiveData.postValue(vaultAccount);\r\n                    }\r\n                });\r\n        return defaultVaultLiveData;\r\n    }\r\n\r\n\r\n}\r\n```\r\n\r\n```\r\npublic class TransactionRepository {\r\n\r\n...\r\n\r\nprivate final MutableLiveData&lt;List&lt;Transaction&gt;&gt; allTransactionsLiveData;\r\n\r\n...\r\n\r\npublic MutableLiveData&lt;List&lt;Transaction&gt;&gt; getAllTransactions() {\r\n        fireStore.collection(&quot;users&quot;).document(firebaseUser.getUid())\r\n                .collection(&quot;transactions&quot;)\r\n                .orderBy(&quot;transactionDate&quot;)\r\n                .addSnapshotListener((value, error) -&gt; {\r\n                    List&lt;Transaction&gt; transactionList = new ArrayList&lt;&gt;();\r\n                    if (value != null) {\r\n                        for (QueryDocumentSnapshot doc : value) {\r\n                            if (doc != null) {\r\n                                Transaction transaction = doc.toObject(Transaction.class);\r\n                                transactionList.add(transaction);\r\n                            }\r\n                        }\r\n                        allTransactionsLiveData.postValue(transactionList);\r\n                    }\r\n                });\r\n        return allTransactionsLiveData;\r\n    }\r\n\r\n\r\n}\r\n```  \r\n    \r\n\r\n\r\n\r\n*old OperationRepository*\r\n```\r\npublic class OperationRepository {\r\n\r\n    private final Application mApplication;\r\n    private TransactionRepository transactionRepository;\r\n    private VaultRepository vaultRepository;\r\n    private MutableLiveData&lt;String&gt; stringMutableLiveData;\r\n\r\n    public OperationRepository(Application mApplication) {\r\n        this.mApplication = mApplication;\r\n        transactionRepository = new TransactionRepository(mApplication);\r\n        vaultRepository = new VaultRepository(mApplication);\r\n        stringMutableLiveData = new MutableLiveData&lt;&gt;();\r\n    }\r\n\r\n    public MutableLiveData&lt;String&gt; getFinalAmount() {\r\n        \r\n        //TODO get all the transactions and get there amount and observe it\r\n        // get the account initial amount and observe it\r\n        //add all the values and present it in a String LiveData to be shown in the view\r\n\r\n\r\n        double result = 0;\r\n\r\n        String finalResult = String.valueOf(result);\r\n        stringMutableLiveData.postValue(finalResult);\r\n        return stringMutableLiveData;\r\n    }\r\n\r\n\r\n}\r\n```\r\n\r\n---------------------------------------\r\n**UPDATE:** \r\nI changed my OperationRepository to OperationVeiwModel and tried to use ```Transformation.switchMap```.\r\n\r\n```\r\npublic class OperationViewModel extends AndroidViewModel {\r\n\r\n    private final TransactionRepository transactionRepository;\r\n    private final VaultRepository vaultRepository;\r\n\r\n    private MutableLiveData&lt;List&lt;Transaction&gt;&gt; transactionListLiveData;\r\n    private MutableLiveData&lt;VaultAccount&gt; vaultAccountLiveData;\r\n    private LiveData&lt;Double&gt; transactionTotal;\r\n    private LiveData&lt;Double&gt; accountAmount;\r\n    LiveData&lt;String&gt; totalAmount;\r\n\r\n    public OperationViewModel(@NonNull Application application) {\r\n        super(application);\r\n        transactionRepository = new TransactionRepository(application);\r\n        vaultRepository = new VaultRepository(application);\r\n\r\n        transactionListLiveData = new MutableLiveData&lt;&gt;();\r\n        vaultAccountLiveData = new MutableLiveData&lt;&gt;();\r\n    }\r\n\r\n    double result = 0;\r\n\r\n    public LiveData&lt;String&gt; getFinalAmount() {\r\n        transactionListLiveData = transactionRepository.getAllTransactions();\r\n        vaultAccountLiveData = vaultRepository.getDefaultVault();\r\n        transformations();\r\n\r\n        final MutableLiveData&lt;Double&gt; resultLive = new MutableLiveData&lt;&gt;();\r\n\r\n        try {\r\n            result = transactionTotal.getValue() + accountAmount.getValue();\r\n        } catch (NullPointerException e) {\r\n            Toast.makeText(getApplication(), e.getMessage(), Toast.LENGTH_LONG).show();\r\n            e.printStackTrace();\r\n        }\r\n        resultLive.postValue(result);\r\n\r\n        totalAmount = Transformations.switchMap(resultLive, data -&gt; {\r\n           final MutableLiveData&lt;String&gt; result = new MutableLiveData&lt;&gt;();\r\n           String total = String.valueOf(data);\r\n           result.postValue(total);\r\n           return result;\r\n        });\r\n\r\n        return totalAmount;\r\n    }\r\n\r\n\r\n    private void transformations() {\r\n\r\n        transactionTotal = Transformations.switchMap(transactionListLiveData, transactionsList -&gt; {\r\n            final MutableLiveData&lt;Double&gt; result = new MutableLiveData&lt;&gt;();\r\n            double amount = 0;\r\n            for (int i = 0; i &lt; transactionsList.size(); i++) {\r\n                double itemAmount = Double.parseDouble(transactionsList.get(i).getTransactionAmount());\r\n                amount += itemAmount;\r\n            }\r\n            result.postValue(amount);\r\n            return result;\r\n        });\r\n\r\n        accountAmount = Transformations.switchMap(vaultAccountLiveData, vault -&gt; {\r\n            final MutableLiveData&lt;Double&gt; result = new MutableLiveData&lt;&gt;();\r\n            result.postValue(Double.valueOf(vault.getInitAmount()));\r\n            return result;\r\n        });\r\n\r\n    }\r\n\r\n}\r\n```\r\n\r\nThe code did not work as I intended which shows that I have no idea what I&#39;m doing.\r\n\r\nNevertheless, I tried to test this code and found out the following:  \r\n1- the two repositories was returning null when I first call getFinalAmount and observe it in the view but if I cause change to the observed LiveData&lt;String&gt; they return the live data I want to get.\r\n\r\n2- the switchMap inside transformations method was not working at all.\r\n","title":"Observing Multiple LiveData and MVVM Structure Android Java","body":"<p>I will try to make this question general as much as I can.</p>\n<p>In short, I'm using FireStore Firebase and what I am trying to do is that I have Two Repositories (TransactionsRepository and VaultAccountRepository) and each one has some queries to add (Transaction or VaultAccount objects), edit, delete, etc...</p>\n<p>I made a third Repository (OperationRepository) in which I want to (for example) get all transactions and get the default account to do an operation on them (like adding all the transactions amount with the account initial value and so on) and get that operation as alive data to observe it in the view.</p>\n<p>The idea here is that I don't know how to observe the transactions and the default account to update the operation returned and consequently update the UI</p>\n<p>I have read about <code>Transformation.map</code> and <code>Transformation.switchMap</code>, but I could not understand them at all and most examples are in Kotlin and I'm not even sure that it's what I'm looking for to do this! and not sure if this structure is done right as I'm new to MVVM.</p>\n<p>I will include some of the code to show what I have tried to do just in case my explanation above wasn't clear enough.</p>\n<pre><code>public class VaultRepository {\n...\nprivate final MutableLiveData&lt;VaultAccount&gt; defaultVaultLiveData;\n\n...\n\npublic MutableLiveData&lt;VaultAccount&gt; getDefaultVault() {\n        fireStore.collection(&quot;users&quot;).document(firebaseUser.getUid()).collection(&quot;vaults&quot;)\n                .whereEqualTo(&quot;defaultAccount&quot;, true)\n                .addSnapshotListener((value, error) -&gt; {\n                    VaultAccount vaultAccount = new VaultAccount();\n                    if (value != null) {\n                        for (QueryDocumentSnapshot doc : value) {\n                            if (doc != null) {\n                                vaultAccount = doc.toObject(VaultAccount.class);\n                            }\n                        }\n                        defaultVaultLiveData.postValue(vaultAccount);\n                    }\n                });\n        return defaultVaultLiveData;\n    }\n\n\n}\n</code></pre>\n<pre><code>public class TransactionRepository {\n\n...\n\nprivate final MutableLiveData&lt;List&lt;Transaction&gt;&gt; allTransactionsLiveData;\n\n...\n\npublic MutableLiveData&lt;List&lt;Transaction&gt;&gt; getAllTransactions() {\n        fireStore.collection(&quot;users&quot;).document(firebaseUser.getUid())\n                .collection(&quot;transactions&quot;)\n                .orderBy(&quot;transactionDate&quot;)\n                .addSnapshotListener((value, error) -&gt; {\n                    List&lt;Transaction&gt; transactionList = new ArrayList&lt;&gt;();\n                    if (value != null) {\n                        for (QueryDocumentSnapshot doc : value) {\n                            if (doc != null) {\n                                Transaction transaction = doc.toObject(Transaction.class);\n                                transactionList.add(transaction);\n                            }\n                        }\n                        allTransactionsLiveData.postValue(transactionList);\n                    }\n                });\n        return allTransactionsLiveData;\n    }\n\n\n}\n</code></pre>\n<p><em>old OperationRepository</em></p>\n<pre><code>public class OperationRepository {\n\n    private final Application mApplication;\n    private TransactionRepository transactionRepository;\n    private VaultRepository vaultRepository;\n    private MutableLiveData&lt;String&gt; stringMutableLiveData;\n\n    public OperationRepository(Application mApplication) {\n        this.mApplication = mApplication;\n        transactionRepository = new TransactionRepository(mApplication);\n        vaultRepository = new VaultRepository(mApplication);\n        stringMutableLiveData = new MutableLiveData&lt;&gt;();\n    }\n\n    public MutableLiveData&lt;String&gt; getFinalAmount() {\n        \n        //TODO get all the transactions and get there amount and observe it\n        // get the account initial amount and observe it\n        //add all the values and present it in a String LiveData to be shown in the view\n\n\n        double result = 0;\n\n        String finalResult = String.valueOf(result);\n        stringMutableLiveData.postValue(finalResult);\n        return stringMutableLiveData;\n    }\n\n\n}\n</code></pre>\n<hr />\n<p><strong>UPDATE:</strong>\nI changed my OperationRepository to OperationVeiwModel and tried to use <code>Transformation.switchMap</code>.</p>\n<pre><code>public class OperationViewModel extends AndroidViewModel {\n\n    private final TransactionRepository transactionRepository;\n    private final VaultRepository vaultRepository;\n\n    private MutableLiveData&lt;List&lt;Transaction&gt;&gt; transactionListLiveData;\n    private MutableLiveData&lt;VaultAccount&gt; vaultAccountLiveData;\n    private LiveData&lt;Double&gt; transactionTotal;\n    private LiveData&lt;Double&gt; accountAmount;\n    LiveData&lt;String&gt; totalAmount;\n\n    public OperationViewModel(@NonNull Application application) {\n        super(application);\n        transactionRepository = new TransactionRepository(application);\n        vaultRepository = new VaultRepository(application);\n\n        transactionListLiveData = new MutableLiveData&lt;&gt;();\n        vaultAccountLiveData = new MutableLiveData&lt;&gt;();\n    }\n\n    double result = 0;\n\n    public LiveData&lt;String&gt; getFinalAmount() {\n        transactionListLiveData = transactionRepository.getAllTransactions();\n        vaultAccountLiveData = vaultRepository.getDefaultVault();\n        transformations();\n\n        final MutableLiveData&lt;Double&gt; resultLive = new MutableLiveData&lt;&gt;();\n\n        try {\n            result = transactionTotal.getValue() + accountAmount.getValue();\n        } catch (NullPointerException e) {\n            Toast.makeText(getApplication(), e.getMessage(), Toast.LENGTH_LONG).show();\n            e.printStackTrace();\n        }\n        resultLive.postValue(result);\n\n        totalAmount = Transformations.switchMap(resultLive, data -&gt; {\n           final MutableLiveData&lt;String&gt; result = new MutableLiveData&lt;&gt;();\n           String total = String.valueOf(data);\n           result.postValue(total);\n           return result;\n        });\n\n        return totalAmount;\n    }\n\n\n    private void transformations() {\n\n        transactionTotal = Transformations.switchMap(transactionListLiveData, transactionsList -&gt; {\n            final MutableLiveData&lt;Double&gt; result = new MutableLiveData&lt;&gt;();\n            double amount = 0;\n            for (int i = 0; i &lt; transactionsList.size(); i++) {\n                double itemAmount = Double.parseDouble(transactionsList.get(i).getTransactionAmount());\n                amount += itemAmount;\n            }\n            result.postValue(amount);\n            return result;\n        });\n\n        accountAmount = Transformations.switchMap(vaultAccountLiveData, vault -&gt; {\n            final MutableLiveData&lt;Double&gt; result = new MutableLiveData&lt;&gt;();\n            result.postValue(Double.valueOf(vault.getInitAmount()));\n            return result;\n        });\n\n    }\n\n}\n</code></pre>\n<p>The code did not work as I intended which shows that I have no idea what I'm doing.</p>\n<p>Nevertheless, I tried to test this code and found out the following:<br />\n1- the two repositories was returning null when I first call getFinalAmount and observe it in the view but if I cause change to the observed LiveData they return the live data I want to get.</p>\n<p>2- the switchMap inside transformations method was not working at all.</p>\n"},{"tags":["java","spring-boot","dom","sftp"],"answers":[{"tags":[],"owner":{"account_id":453710,"reputation":192093,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1659968474,"creation_date":1659954888,"answer_id":73276509,"question_id":73276263,"body_markdown":"Use [JSch SSH/SFTP library](http://www.jcraft.com/jsch/). \r\n\r\n1. Afaik, it&#39;s the most widely used SFTP library for Java\r\n2. It supports uploading data from streams.\r\n\r\n    I assume that its [`ChannelSftp.put` overload that returns `OutputStream`](https://epaul.github.io/jsch-documentation/javadoc/com/jcraft/jsch/ChannelSftp.html#put-java.lang.String-) can be [hooked to your `StreamResult`](https://docs.oracle.com/javase/7/docs/api/javax/xml/transform/stream/StreamResult.html#StreamResult(java.io.OutputStream)) (instead of the `File`).\r\n\r\n    ```\r\n    StreamResult streamResult =\r\n        new StreamResult(channelSftp.put(&quot;/sftp/path/file.zml&quot;));\r\n    ```","title":"Saving DOMSource object created into a folder in SFTP Server in Java","body":"<p>Use <a href=\"http://www.jcraft.com/jsch/\" rel=\"nofollow noreferrer\">JSch SSH/SFTP library</a>.</p>\n<ol>\n<li><p>Afaik, it's the most widely used SFTP library for Java</p>\n</li>\n<li><p>It supports uploading data from streams.</p>\n<p>I assume that its <a href=\"https://epaul.github.io/jsch-documentation/javadoc/com/jcraft/jsch/ChannelSftp.html#put-java.lang.String-\" rel=\"nofollow noreferrer\"><code>ChannelSftp.put</code> overload that returns <code>OutputStream</code></a> can be <a href=\"https://docs.oracle.com/javase/7/docs/api/javax/xml/transform/stream/StreamResult.html#StreamResult(java.io.OutputStream)\" rel=\"nofollow noreferrer\">hooked to your <code>StreamResult</code></a> (instead of the <code>File</code>).</p>\n<pre><code>StreamResult streamResult =\n    new StreamResult(channelSftp.put(&quot;/sftp/path/file.zml&quot;));\n</code></pre>\n</li>\n</ol>\n"}],"owner":{"account_id":16127437,"reputation":181,"user_id":11641908,"display_name":"gunel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73276509,"answer_count":1,"score":1,"last_activity_date":1660056389,"creation_date":1659953697,"question_id":73276263,"body_markdown":"I need to save the newly created `DOMSource` object as new XML file into a folder inside the SFTP server (not transferring a file from local computer into SFTP). \r\n\r\nHere is the code\r\n\r\n```\r\npublic void save(String xmlFilePath, Document document) {\r\n\r\n    TransformerFactory transformerFactory = TransformerFactory.newInstance();\r\n    transformerFactory.setAttribute(XMLConstants.ACCESS_EXTERNAL_DTD, &quot;&quot;);\r\n    transformerFactory.setAttribute(XMLConstants.ACCESS_EXTERNAL_STYLESHEET, &quot;&quot;);\r\n    Transformer transformer;\r\n    try {\r\n        transformer = transformerFactory.newTransformer();\r\n        DOMSource domSource = new DOMSource(document);\r\n        StreamResult streamResult = new StreamResult(new File(xmlFilePath));\r\n        transformer.transform(domSource,streamResult);\r\n\r\n    } catch (TransformerException | NullPointerException e) {\r\n        e.printStackTrace();\r\n    }\r\n}\r\n```\r\n","title":"Saving DOMSource object created into a folder in SFTP Server in Java","body":"<p>I need to save the newly created <code>DOMSource</code> object as new XML file into a folder inside the SFTP server (not transferring a file from local computer into SFTP).</p>\n<p>Here is the code</p>\n<pre><code>public void save(String xmlFilePath, Document document) {\n\n    TransformerFactory transformerFactory = TransformerFactory.newInstance();\n    transformerFactory.setAttribute(XMLConstants.ACCESS_EXTERNAL_DTD, &quot;&quot;);\n    transformerFactory.setAttribute(XMLConstants.ACCESS_EXTERNAL_STYLESHEET, &quot;&quot;);\n    Transformer transformer;\n    try {\n        transformer = transformerFactory.newTransformer();\n        DOMSource domSource = new DOMSource(document);\n        StreamResult streamResult = new StreamResult(new File(xmlFilePath));\n        transformer.transform(domSource,streamResult);\n\n    } catch (TransformerException | NullPointerException e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n"},{"tags":["java","unit-testing","dependency-injection","jersey","jersey-2.0"],"answers":[{"tags":[],"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1460368538,"creation_date":1460368538,"answer_id":36545361,"question_id":36544008,"body_markdown":"You can use the main IoC container, and just explicitly inject the test class. Jersey uses HK2 as its DI framework, and its IoC container is the `ServiceLocator`, which has a method `inject(anyObject)` that can inject any objects with dependencies that are in its registry.\r\n\r\nFor example you could do something like\r\n\r\n    public class InjectionTest {\r\n        \r\n        @Inject\r\n        private TestController controller;\r\n        \r\n        @Before\r\n        public void setUp() {\r\n            final Binder b = new AbstractBinder() {\r\n                @Override\r\n                public void configure() {\r\n                    bindAsContract(TestController.class);\r\n                }\r\n            };\r\n            final ServiceLocator locator = ServiceLocatorUtilities.bind(new TestBinder(), b);\r\n            locator.inject(this);\r\n        }\r\n        \r\n        @Test\r\n        public void doTest() {\r\n            assertNotNull(controller);\r\n            String response = controller.get();\r\n            assertEquals(&quot;Hello Tests&quot;, response);\r\n        }\r\n    }\r\n\r\nThe `ServiceLocatorUtilities` class is a helper class that allows us to easily create the `ServiceLocator`, and then we just call `inject(this)` to inject the `InjectionTest`.\r\n\r\nIf it seems repetitive to do this for all your controller tests, you may want to create an abstract base test class. Maybe something like\r\n\r\n    public abstract class AbstractControllerTest {\r\n        \r\n        protected ServiceLocator locator;\r\n        private final Class&lt;?&gt; controllerClass;\r\n        \r\n        protected AbstractControllerTest(Class&lt;?&gt; controllerClass) {\r\n            this.controllerClass = controllerClass;\r\n        }\r\n        \r\n        @Before\r\n        public void setUp() {\r\n            final AbstractBinder binder = new AbstractBinder() {\r\n                @Override\r\n                public void configure() {\r\n                    bindAsContract(controllerClass);\r\n                }\r\n            };\r\n            locator = ServiceLocatorUtilities.bind(new TestBinder(), binder);\r\n            locator.inject(this);\r\n        }\r\n        \r\n        @After\r\n        public void tearDown() {\r\n            if (locator != null) {\r\n                locator.shutdown();\r\n            }\r\n        }\r\n    }\r\n\r\nThen in your concrete class\r\n\r\n    public class TestControllerTest extends AbstractControllerTest {\r\n        \r\n        public TestControllerTest() {\r\n            super(TestController.class);\r\n        }\r\n        \r\n        @Inject\r\n        private TestController controller;\r\n        \r\n        @Test\r\n        public void doTest() {\r\n            assertNotNull(controller);\r\n            assertEquals(&quot;Hello Tests&quot;, controller.get());\r\n        }\r\n    }\r\n\r\nIf you spent some more time, I&#39;m sure you could come up with a better abstract test class design. It was the first thing that came to mind for me.\r\n\r\nNote: For anything request scoped, you mayb need to just mock it. When running the _unit_ tests, there is no request context, so the test will fail.\r\n\r\n**See Also:**\r\n\r\n* [Using Jersey&#39;s Dependency Injection in a Standalone application][1]\r\n* [HK2 documentation][2]\r\n\r\n[1]: https://stackoverflow.com/q/30789297/2587435\r\n[2]: https://hk2.java.net/2.4.0-b07/index.html\r\n\r\n","title":"Jersey 2 inject dependencies into unit test","body":"<p>You can use the main IoC container, and just explicitly inject the test class. Jersey uses HK2 as its DI framework, and its IoC container is the <code>ServiceLocator</code>, which has a method <code>inject(anyObject)</code> that can inject any objects with dependencies that are in its registry.</p>\n\n<p>For example you could do something like</p>\n\n<pre><code>public class InjectionTest {\n\n    @Inject\n    private TestController controller;\n\n    @Before\n    public void setUp() {\n        final Binder b = new AbstractBinder() {\n            @Override\n            public void configure() {\n                bindAsContract(TestController.class);\n            }\n        };\n        final ServiceLocator locator = ServiceLocatorUtilities.bind(new TestBinder(), b);\n        locator.inject(this);\n    }\n\n    @Test\n    public void doTest() {\n        assertNotNull(controller);\n        String response = controller.get();\n        assertEquals(\"Hello Tests\", response);\n    }\n}\n</code></pre>\n\n<p>The <code>ServiceLocatorUtilities</code> class is a helper class that allows us to easily create the <code>ServiceLocator</code>, and then we just call <code>inject(this)</code> to inject the <code>InjectionTest</code>.</p>\n\n<p>If it seems repetitive to do this for all your controller tests, you may want to create an abstract base test class. Maybe something like</p>\n\n<pre><code>public abstract class AbstractControllerTest {\n\n    protected ServiceLocator locator;\n    private final Class&lt;?&gt; controllerClass;\n\n    protected AbstractControllerTest(Class&lt;?&gt; controllerClass) {\n        this.controllerClass = controllerClass;\n    }\n\n    @Before\n    public void setUp() {\n        final AbstractBinder binder = new AbstractBinder() {\n            @Override\n            public void configure() {\n                bindAsContract(controllerClass);\n            }\n        };\n        locator = ServiceLocatorUtilities.bind(new TestBinder(), binder);\n        locator.inject(this);\n    }\n\n    @After\n    public void tearDown() {\n        if (locator != null) {\n            locator.shutdown();\n        }\n    }\n}\n</code></pre>\n\n<p>Then in your concrete class</p>\n\n<pre><code>public class TestControllerTest extends AbstractControllerTest {\n\n    public TestControllerTest() {\n        super(TestController.class);\n    }\n\n    @Inject\n    private TestController controller;\n\n    @Test\n    public void doTest() {\n        assertNotNull(controller);\n        assertEquals(\"Hello Tests\", controller.get());\n    }\n}\n</code></pre>\n\n<p>If you spent some more time, I'm sure you could come up with a better abstract test class design. It was the first thing that came to mind for me.</p>\n\n<p>Note: For anything request scoped, you mayb need to just mock it. When running the <em>unit</em> tests, there is no request context, so the test will fail.</p>\n\n<p><strong>See Also:</strong></p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/q/30789297/2587435\">Using Jersey's Dependency Injection in a Standalone application</a></li>\n<li><a href=\"https://hk2.java.net/2.4.0-b07/index.html\" rel=\"nofollow noreferrer\">HK2 documentation</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1017284,"reputation":5696,"user_id":5641301,"display_name":"Johnny Cage"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660055915,"creation_date":1660055915,"answer_id":73293696,"question_id":36544008,"body_markdown":"```\r\nimport org.glassfish.hk2.api.ServiceLocator;\r\nimport org.glassfish.hk2.utilities.ServiceLocatorUtilities;\r\nimport org.glassfish.hk2.utilities.binding.AbstractBinder;\r\n\r\n@BeforeClass\r\n    public static void doTest() {\r\n        ServiceLocator serviceLocator = ServiceLocatorUtilities.bind(new AbstractBinder() {\r\n            @Override\r\n            protected void configure() {\r\n                bindAsContract(YourClass1.class);\r\n                bindAsContract(YourClass2.class);\r\n                bindAsContract(YourClass3.class);\r\n            }\r\n        });\r\n\r\n        YourClass1 yourClass1 = serviceLocator.getService(YourClass1.class);\r\n        ...\r\n```","title":"Jersey 2 inject dependencies into unit test","body":"<pre><code>import org.glassfish.hk2.api.ServiceLocator;\nimport org.glassfish.hk2.utilities.ServiceLocatorUtilities;\nimport org.glassfish.hk2.utilities.binding.AbstractBinder;\n\n@BeforeClass\n    public static void doTest() {\n        ServiceLocator serviceLocator = ServiceLocatorUtilities.bind(new AbstractBinder() {\n            @Override\n            protected void configure() {\n                bindAsContract(YourClass1.class);\n                bindAsContract(YourClass2.class);\n                bindAsContract(YourClass3.class);\n            }\n        });\n\n        YourClass1 yourClass1 = serviceLocator.getService(YourClass1.class);\n        ...\n</code></pre>\n"}],"owner":{"account_id":2418941,"reputation":1301,"user_id":2112409,"accept_rate":40,"display_name":"andreybavt"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4078,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":36545361,"answer_count":2,"score":4,"last_activity_date":1660055915,"creation_date":1460364833,"question_id":36544008,"body_markdown":"I have a controller like this \r\n\r\n    @Path(&quot;/&quot;)\r\n    @Produces(MediaType.APPLICATION_JSON)\r\n    @Consumes(MediaType.APPLICATION_JSON)\r\n    public class AccountController implements CRUDController&lt;Long, Account&gt; {\r\n    \r\n        private AccountDao accountDao;\r\n        private AccountService accountService;\r\n    \r\n        @Inject\r\n        public AccountController(AccountDao accountDao, AccountService accountService) {\r\n            this.accountDao = accountDao;\r\n            this.accountService = accountService;\r\n        }\r\n    ...\r\n\r\nI&#39;m injecting AccountDao and AccountService using \r\n\r\n    ResourceConfig config = new ResourceConfig()\r\n                   .packages(&quot;controller&quot;, &quot;exception&quot;)\r\n                   .register(new MyDIBinder());\r\n\r\nWhere MyDIBinder is contains all the bindings (e.g \r\n\r\n    AccountDaoImpl accountDaoImpl = new AccountDaoImpl();\r\n    bind(accountDaoImpl).to(AccountDao.class);\r\n\r\n)\r\n\r\nNow I want to write a unit test for this controller, is it possible to inject the whole AccountController instance with all of it&#39;s transitive dependencies into the test?\r\n\r\nSomething like \r\n\r\n        @Inject\r\n        AccountController accountController;","title":"Jersey 2 inject dependencies into unit test","body":"<p>I have a controller like this </p>\n\n<pre><code>@Path(\"/\")\n@Produces(MediaType.APPLICATION_JSON)\n@Consumes(MediaType.APPLICATION_JSON)\npublic class AccountController implements CRUDController&lt;Long, Account&gt; {\n\n    private AccountDao accountDao;\n    private AccountService accountService;\n\n    @Inject\n    public AccountController(AccountDao accountDao, AccountService accountService) {\n        this.accountDao = accountDao;\n        this.accountService = accountService;\n    }\n...\n</code></pre>\n\n<p>I'm injecting AccountDao and AccountService using </p>\n\n<pre><code>ResourceConfig config = new ResourceConfig()\n               .packages(\"controller\", \"exception\")\n               .register(new MyDIBinder());\n</code></pre>\n\n<p>Where MyDIBinder is contains all the bindings (e.g </p>\n\n<pre><code>AccountDaoImpl accountDaoImpl = new AccountDaoImpl();\nbind(accountDaoImpl).to(AccountDao.class);\n</code></pre>\n\n<p>)</p>\n\n<p>Now I want to write a unit test for this controller, is it possible to inject the whole AccountController instance with all of it's transitive dependencies into the test?</p>\n\n<p>Something like </p>\n\n<pre><code>    @Inject\n    AccountController accountController;\n</code></pre>\n"},{"tags":["java","spring-boot","jpa","transactions"],"comments":[{"owner":{"account_id":3498606,"reputation":5166,"user_id":2925962,"accept_rate":0,"display_name":"akortex"},"score":0,"creation_date":1660050804,"post_id":73292291,"comment_id":129437168,"body_markdown":"Have you enabled transactions properly?","body":"Have you enabled transactions properly?"},{"owner":{"account_id":25915558,"reputation":1,"user_id":19639004,"display_name":"Himanshu Ranjan"},"score":0,"creation_date":1660050939,"post_id":73292291,"comment_id":129437255,"body_markdown":"Its automatically enabled right","body":"Its automatically enabled right"},{"owner":{"account_id":3498606,"reputation":5166,"user_id":2925962,"accept_rate":0,"display_name":"akortex"},"score":0,"creation_date":1660051568,"post_id":73292291,"comment_id":129437538,"body_markdown":"Not necessarily and since you haven&#39;t shared that code there is way for us to know what&#39;s happening","body":"Not necessarily and since you haven&#39;t shared that code there is way for us to know what&#39;s happening"},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1660051967,"post_id":73292291,"comment_id":129437734,"body_markdown":"You are catching Exception. What is WalletException? It&#39;s a Runtime or a checked Exception?","body":"You are catching Exception. What is WalletException? It&#39;s a Runtime or a checked Exception?"},{"owner":{"account_id":25915558,"reputation":1,"user_id":19639004,"display_name":"Himanshu Ranjan"},"score":0,"creation_date":1660053046,"post_id":73292291,"comment_id":129438207,"body_markdown":"Its a RuntimeException","body":"Its a RuntimeException"},{"owner":{"account_id":4492549,"reputation":660,"user_id":3653304,"display_name":"Ralan"},"score":1,"creation_date":1660055572,"post_id":73292291,"comment_id":129439274,"body_markdown":"Do you perhaps have the wrong @Transactional? you need the one from `org.springframework.transaction.annotation` not `javax.transaction`. Also unless you require otherwise the @Transactional is generally added to classes not methods i feel","body":"Do you perhaps have the wrong @Transactional? you need the one from <code>org.springframework.transaction.annotation</code> not <code>javax.transaction</code>. Also unless you require otherwise the @Transactional is generally added to classes not methods i feel"},{"owner":{"account_id":6912869,"reputation":954,"user_id":5308115,"accept_rate":29,"display_name":"yashodha_h"},"score":0,"creation_date":1685514919,"post_id":73292291,"comment_id":134668927,"body_markdown":"you are throwing a runtime exception and inside the catch block, you are rethrowing it again. if the WalletException is not a runtime exception you have to mention it in the @Transactional annotation explicitly.","body":"you are throwing a runtime exception and inside the catch block, you are rethrowing it again. if the WalletException is not a runtime exception you have to mention it in the @Transactional annotation explicitly."}],"answers":[{"tags":[],"owner":{"account_id":4492549,"reputation":660,"user_id":3653304,"display_name":"Ralan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660055822,"creation_date":1660055367,"answer_id":73293551,"question_id":73292291,"body_markdown":"Transactional is scoped, if you anotate a method (or class) as `@Transactional` all the methods this class calls wil also be transactional. and if within this transaction an exception occurs things wil be rolled back. \r\n\r\nIf however like in you example a non-transactional method calls a transactional one and after that call throws an exception the previous transactioned function wil not be rolled back as it&#39;s outside of the transactions scope.","title":"Transactional not rolling back JPA save in spring boot","body":"<p>Transactional is scoped, if you anotate a method (or class) as <code>@Transactional</code> all the methods this class calls wil also be transactional. and if within this transaction an exception occurs things wil be rolled back.</p>\n<p>If however like in you example a non-transactional method calls a transactional one and after that call throws an exception the previous transactioned function wil not be rolled back as it's outside of the transactions scope.</p>\n"}],"owner":{"account_id":25915558,"reputation":1,"user_id":19639004,"display_name":"Himanshu Ranjan"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1141,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660055822,"creation_date":1660050104,"question_id":73292291,"body_markdown":"I am working on a spring boot app where I am using transactional and its not rolling back its changes when I throw a exception:\r\n\r\n**My method:**\r\n\r\n    private BtoBWalletTransactionResponseModel doWalletOperation(BtoBWalletTransactionTypes transactionType, BtoBWalletTransactionRequestModel transactionRequest) {\r\n                // DB Operation\r\n                BtoBWalletTransaction savedTransaction = commonTransactionalService.finishWalletTransaction(userWallet, btoBWalletTransaction);\r\n                log.info(&quot;wallet {} txn of amount {} for user {}&quot;,transactionType.name(),txnAmount,userId);\r\n                // throwing a exception to rollback\r\n                throw new RuntimeException(&quot;Time to Rollback&quot;);\r\n                \r\n            } catch(Exception e){\r\n                log.error(e.getMessage());\r\n                log.error(&quot;error while doing wallet operations for user {}&quot;,userId);\r\n                throw new WalletException(e.getMessage());\r\n            }\r\n    \r\n        }\r\n\r\n**My common TransactionalService Interface:**\r\n\r\n    public interface CommonTransactionalService {\r\n    \r\n        BtoBWalletTransaction finishWalletTransaction(BtoBUserWallet userWallet,BtoBWalletTransaction btoBWalletTransaction);\r\n    \r\n    }\r\n\r\n**My Interface Impl:**\r\n\r\n    import javax.transaction.Transactional;\r\n    \r\n    @Service\r\n    public class CommonTransactionalServiceImpl implements CommonTransactionalService {\r\n    \r\n        @Autowired\r\n        private BtoBWalletTransactionRepo btoBWalletTransactionRepo;\r\n    \r\n        @Transactional\r\n        @Override\r\n        public BtoBWalletTransaction finishWalletTransaction(BtoBUserWallet userWallet, BtoBWalletTransaction walletTransaction) {\r\n            BtoBWalletTransaction savedTransaction = btoBWalletTransactionRepo.save(walletTransaction);\r\n            btoBUserWalletRepo.save(userWallet);\r\n            return savedTransaction;\r\n        }\r\n    \r\n    }\r\n\r\nNow even when I am sending a `RuntimeException` the DB record is not getting rolled back.\r\nCan someone help? stuck since hours here.","title":"Transactional not rolling back JPA save in spring boot","body":"<p>I am working on a spring boot app where I am using transactional and its not rolling back its changes when I throw a exception:</p>\n<p><strong>My method:</strong></p>\n<pre><code>private BtoBWalletTransactionResponseModel doWalletOperation(BtoBWalletTransactionTypes transactionType, BtoBWalletTransactionRequestModel transactionRequest) {\n            // DB Operation\n            BtoBWalletTransaction savedTransaction = commonTransactionalService.finishWalletTransaction(userWallet, btoBWalletTransaction);\n            log.info(&quot;wallet {} txn of amount {} for user {}&quot;,transactionType.name(),txnAmount,userId);\n            // throwing a exception to rollback\n            throw new RuntimeException(&quot;Time to Rollback&quot;);\n            \n        } catch(Exception e){\n            log.error(e.getMessage());\n            log.error(&quot;error while doing wallet operations for user {}&quot;,userId);\n            throw new WalletException(e.getMessage());\n        }\n\n    }\n</code></pre>\n<p><strong>My common TransactionalService Interface:</strong></p>\n<pre><code>public interface CommonTransactionalService {\n\n    BtoBWalletTransaction finishWalletTransaction(BtoBUserWallet userWallet,BtoBWalletTransaction btoBWalletTransaction);\n\n}\n</code></pre>\n<p><strong>My Interface Impl:</strong></p>\n<pre><code>import javax.transaction.Transactional;\n\n@Service\npublic class CommonTransactionalServiceImpl implements CommonTransactionalService {\n\n    @Autowired\n    private BtoBWalletTransactionRepo btoBWalletTransactionRepo;\n\n    @Transactional\n    @Override\n    public BtoBWalletTransaction finishWalletTransaction(BtoBUserWallet userWallet, BtoBWalletTransaction walletTransaction) {\n        BtoBWalletTransaction savedTransaction = btoBWalletTransactionRepo.save(walletTransaction);\n        btoBUserWalletRepo.save(userWallet);\n        return savedTransaction;\n    }\n\n}\n</code></pre>\n<p>Now even when I am sending a <code>RuntimeException</code> the DB record is not getting rolled back.\nCan someone help? stuck since hours here.</p>\n"},{"tags":["java","spring","hazelcast"],"answers":[{"tags":[],"owner":{"account_id":7592512,"reputation":3070,"user_id":5759723,"display_name":"Neil Stevenson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659865488,"creation_date":1659865488,"answer_id":73266434,"question_id":73251060,"body_markdown":"If your data model is going to evolve, you have three options.\r\n\r\nUse [VersionedPortable](https://docs.hazelcast.com/hazelcast/5.1/serialization/implementing-portable-serialization#versioning-for-portable-serialization), which allows for different versions of the object concurrently.\r\n\r\nUse [CompactSerialization](https://docs.hazelcast.com/hazelcast/5.1/serialization/compact-serialization#schema-evolution) which is a beta feature in 5.1, does essentially the same as the above but using less memory.\r\n\r\nUse [JSON](https://docs.hazelcast.com/hazelcast/5.1/serialization/serializing-json#hide-nav) which has no strong typing.\r\n","title":"Versioning objects in hazelcast","body":"<p>If your data model is going to evolve, you have three options.</p>\n<p>Use <a href=\"https://docs.hazelcast.com/hazelcast/5.1/serialization/implementing-portable-serialization#versioning-for-portable-serialization\" rel=\"nofollow noreferrer\">VersionedPortable</a>, which allows for different versions of the object concurrently.</p>\n<p>Use <a href=\"https://docs.hazelcast.com/hazelcast/5.1/serialization/compact-serialization#schema-evolution\" rel=\"nofollow noreferrer\">CompactSerialization</a> which is a beta feature in 5.1, does essentially the same as the above but using less memory.</p>\n<p>Use <a href=\"https://docs.hazelcast.com/hazelcast/5.1/serialization/serializing-json#hide-nav\" rel=\"nofollow noreferrer\">JSON</a> which has no strong typing.</p>\n"}],"owner":{"account_id":25986740,"reputation":1,"user_id":19699609,"display_name":"cme2me"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":324,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660055777,"creation_date":1659708442,"question_id":73251060,"body_markdown":"Apologies in advance, this is my first time asking questions here.\r\n\r\nHere is hazelcastInstance bean.\r\n\r\nThe main problem is - a class is already in local cache and has conflicting byte code representation\r\n    \r\n\r\n        @Bean\r\n        @SpringSessionHazelcastInstance\r\n        public HazelcastInstance hazelcastSessionInstance() {\r\n    \r\n        if (&quot;embedded&quot;.equalsIgnoreCase(hazelcastType)) {\r\n            return new HazelcastEmbeddedSessionBuilder(hazelcastSessionSettings).build();\r\n        } else {\r\n            return new HazelcastClientSessionBuilder(hazelcastSessionSettings)\r\n                    .addClass(MyTestDto.class)\r\n                    .addClass(SomeClass.class)\r\n                    .addClass(AnotherClass.class)\r\n                    .addClass(GameWeb.class)\r\n                    .build();\r\n        }\r\n    }\r\n\r\nI change type from embedded to another in application.yaml: \r\n\r\n[here is settings screenshot][1]\r\n  \r\n\r\nI run the application everything works correctly, but if i add or remove any object in MyTestDto class and restart the application hazelcast starts throwing exceptions \r\nsaying that the bytecode of this class in the cache is different from the current one. In this case, either restarting the computer or renaming the class can help, this will clear the class cache. Here is the class from which all the trouble:\r\n\r\n        @Getter\r\n        @NoArgsConstructor\r\n        public class MyTestDto extends Details implements DataSerializable {\r\n        private PrePrincipal prePrincipal;\r\n        //test obj\r\n        private String testStr = &quot;asdtest&quot;;\r\n    \r\n    \r\n        public MyTestDto(UUID testUId, UUID testId, String testString, Collection&lt;String&gt; testCollection, PrePrincipal prePrincipal) {\r\n            super(testUId, testId, testString, testCollection);\r\n            this.prePrincipal = prePrincipal;\r\n        }\r\n    \r\n        @Override\r\n        public String toString() {\r\n            return MoreObjects.toStringHelper(this)\r\n                    .add(&quot;testUId&quot;, getTestUId())\r\n                    .add(&quot;testId&quot;, geTestId())\r\n                    .add(&quot;testString&quot;, getTestString())\r\n                    .add(&quot;prePrincipal&quot;, prePrincipal)\r\n                    .toString();\r\n        }\r\n    \r\n        @Override\r\n        public void writeData(ObjectDataOutput out) throws IOException {\r\n            out.writeString(testStr);\r\n            out.writeObject(prePrincipal);\r\n        }\r\n    \r\n        @Override\r\n        public void readData(ObjectDataInput in) throws IOException {\r\n            testStr = in.readString();\r\n            prePrincipal = in.readObject();\r\n        }\r\n    }\r\n\r\nStackTrace\r\n\r\n    05.08.22 18:22:46.705 [restartedMain] S: R: U: O: C: A: ERROR o.s.b.w.e.tomcat.TomcatStarter - \r\n    Error starting Tomcat context. Exception: \r\n    org.springframework.beans.factory.UnsatisfiedDependencyException. Message: Error creating bean \r\n    with name &#39;sessionUser&#39; defined in class path resource \r\n    [org/springframework/boot/autoconfigure/session/SessionRepositoryFilterConfiguration.class]: \r\n    Unsatisfied dependency expressed through method &#39;sessionUser&#39; \r\n\r\n    parameter 1; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;org.springframework.session.hazelcast.config.annotation.web.http.HazelcastHttpSessionConfiguration&#39;: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;hazelcastSessionInstance&#39; defined in class path resource [org/example/game/Config.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.hazelcast.core.HazelcastInstance]: Factory method &#39;hazelcastSessionInstance&#39; threw exception; nested exception is java.lang.IllegalStateException: Class org.example.game.MyTestDto is already in local cache and has conflicting byte code representation\r\n    05.08.22 18:22:46.728 [restartedMain] S: R: U: O: C: A: INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]\r\n    05.08.22 18:22:46.738 [restartedMain] S: R: U: O: C: A: WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Unable to start web server; nested exception is org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat\r\n    05.08.22 18:22:46.751 [restartedMain] S: R: U: O: C: A: INFO  o.s.b.a.l.ConditionEvaluationReportLoggingListener - \r\n    \r\n    Error starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.\r\n    05.08.22 18:22:46.774 [restartedMain] S: R: U: O: C: A: ERROR o.s.boot.SpringApplication - Application run failed\r\n    org.springframework.context.ApplicationContextException: Unable to start web server; nested exception is org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat\r\n    \tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:163)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:577)\r\n    \tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145)\r\n    \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)\r\n    \tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:412)\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:302)\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1301)\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1290)\r\n    \tat org.example.game.GameApplication.main(GameApplication.java:17)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n    \tat org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)\r\n    Caused by: org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat\r\n    \tat org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:142)\r\n    \tat org.springframework.boot.web.embedded.tomcat.TomcatWebServer.&lt;init&gt;(TomcatWebServer.java:104)\r\n    \tat org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:473)\r\n    \tat org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:206)\r\n    \tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:182)\r\n    \tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:160)\r\n    \t... 13 common frames omitted\r\n    Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;sessionRepositoryFilterRegistration&#39; defined in class path resource [org/springframework/boot/autoconfigure/session/SessionRepositoryFilterConfiguration.class]: Unsatisfied dependency expressed through method &#39;sessionRepositoryFilterRegistration&#39; parameter 1; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;org.springframework.session.hazelcast.config.annotation.web.http.HazelcastHttpSessionConfiguration&#39;: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;hazelcastSessionInstance&#39; defined in class path resource [org/example/game/Config.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.hazelcast.core.HazelcastInstance]: Factory method &#39;hazelcastSessionInstance&#39; threw exception; nested exception is java.lang.IllegalStateException: Class org.example.game.MyTestDto is already in local cache and has conflicting byte code representation\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:213)\r\n    \tat org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:212)\r\n    \tat org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:203)\r\n    \tat org.springframework.boot.web.servlet.ServletContextInitializerBeans.addServletContextInitializerBeans(ServletContextInitializerBeans.java:97)\r\n    \tat org.springframework.boot.web.servlet.ServletContextInitializerBeans.&lt;init&gt;(ServletContextInitializerBeans.java:86)\r\n    \tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.getServletContextInitializerBeans(ServletWebServerApplicationContext.java:260)\r\n    \tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.selfInitialize(ServletWebServerApplicationContext.java:234)\r\n    \tat org.springframework.boot.web.embedded.tomcat.TomcatStarter.onStartup(TomcatStarter.java:53)\r\n    \tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5219)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\r\n    \tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n    \tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n    \tat java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:140)\r\n    \tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\r\n    \tat org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\r\n    \tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n    \tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n    \tat java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:140)\r\n    \tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\r\n    \tat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:263)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:927)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.startup.Tomcat.start(Tomcat.java:486)\r\n    \tat org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:123)\r\n    \t... 18 common frames omitted\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;org.springframework.session.hazelcast.config.annotation.web.http.HazelcastHttpSessionConfiguration&#39;: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;hazelcastSessionInstance&#39; defined in class path resource [org/example/game/Config.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.hazelcast.core.HazelcastInstance]: Factory method &#39;hazelcastSessionInstance&#39; threw exception; nested exception is java.lang.IllegalStateException: Class org.example.game.MyTestDto is already in local cache and has conflicting byte code representation\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:628)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:410)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n    \tat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1389)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1309)\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887)\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)\r\n    \t... 58 common frames omitted\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;hazelcastSessionInstance&#39; defined in class path resource [ru/revgames/game/auchan/match3/config/security/HttpSessionConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.hazelcast.core.HazelcastInstance]: Factory method &#39;hazelcastSessionInstance&#39; threw exception; nested exception is java.lang.IllegalStateException: Class org.example.game.MyTestDto is already in local cache and has conflicting byte code representation\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658)\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:486)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n    \tat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1389)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory$DependencyObjectProvider.getIfAvailable(DefaultListableBeanFactory.java:2030)\r\n    \tat org.springframework.session.hazelcast.config.annotation.web.http.HazelcastHttpSessionConfiguration.setHazelcastInstance(HazelcastHttpSessionConfiguration.java:122)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:724)\r\n    \tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619)\r\n    \t... 77 common frames omitted\r\n    Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.hazelcast.core.HazelcastInstance]: Factory method &#39;hazelcastSessionInstance&#39; threw exception; nested exception is java.lang.IllegalStateException: Class org.example.game.MyTestDto is already in local cache and has conflicting byte code representation\r\n    \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)\r\n    \t... 99 common frames omitted\r\n    Caused by: java.lang.IllegalStateException: Class org.example.game.MyTestDto is already in local cache and has conflicting byte code representation\r\n    \tat com.hazelcast.internal.usercodedeployment.impl.ClassLocator.defineClassFromClient(ClassLocator.java:123)\r\n    \tat com.hazelcast.internal.usercodedeployment.impl.ClassLocator.defineClassesFromClient(ClassLocator.java:107)\r\n    \tat com.hazelcast.internal.usercodedeployment.UserCodeDeploymentService.defineClasses(UserCodeDeploymentService.java:74)\r\n    \tat com.hazelcast.internal.usercodedeployment.impl.operation.DeployClassesOperation.run(DeployClassesOperation.java:49)\r\n    \tat com.hazelcast.spi.impl.operationservice.Operation.call(Operation.java:189)\r\n    \tat com.hazelcast.spi.impl.operationservice.impl.OperationRunnerImpl.call(OperationRunnerImpl.java:272)\r\n    \tat com.hazelcast.spi.impl.operationservice.impl.OperationRunnerImpl.run(OperationRunnerImpl.java:248)\r\n    \tat com.hazelcast.spi.impl.operationservice.impl.OperationRunnerImpl.run(OperationRunnerImpl.java:213)\r\n    \tat com.hazelcast.spi.impl.operationexecutor.impl.OperationExecutorImpl.run(OperationExecutorImpl.java:411)\r\n    \tat com.hazelcast.spi.impl.operationexecutor.impl.OperationExecutorImpl.runOrExecute(OperationExecutorImpl.java:438)\r\n    \tat com.hazelcast.spi.impl.operationservice.impl.Invocation.doInvokeLocal(Invocation.java:600)\r\n    \tat com.hazelcast.spi.impl.operationservice.impl.Invocation.doInvoke(Invocation.java:579)\r\n    \tat com.hazelcast.spi.impl.operationservice.impl.Invocation.invoke0(Invocation.java:540)\r\n    \tat com.hazelcast.spi.impl.operationservice.impl.Invocation.invoke(Invocation.java:240)\r\n    \tat com.hazelcast.spi.impl.operationservice.impl.InvocationBuilderImpl.invoke(InvocationBuilderImpl.java:59)\r\n    \tat com.hazelcast.client.impl.protocol.task.AbstractMultiTargetMessageTask.processInternal(AbstractMultiTargetMessageTask.java:70)\r\n    \tat com.hazelcast.client.impl.protocol.task.AbstractAsyncMessageTask.processMessage(AbstractAsyncMessageTask.java:71)\r\n    \tat com.hazelcast.client.impl.protocol.task.AbstractMessageTask.initializeAndProcessMessage(AbstractMessageTask.java:153)\r\n    \tat com.hazelcast.client.impl.protocol.task.AbstractMessageTask.run(AbstractMessageTask.java:116)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n    \tat java.lang.Thread.run(Thread.java:829)\r\n    \tat com.hazelcast.internal.util.executor.HazelcastManagedThread.executeRun(HazelcastManagedThread.java:76)\r\n    \tat com.hazelcast.internal.util.executor.HazelcastManagedThread.run(HazelcastManagedThread.java:102)\r\n    \tat ------ submitted from ------.()\r\n    \tat com.hazelcast.internal.util.ExceptionUtil.cloneExceptionWithFixedAsyncStackTrace(ExceptionUtil.java:279)\r\n    \tat com.hazelcast.spi.impl.operationservice.impl.InvocationFuture.returnOrThrowWithGetConventions(InvocationFuture.java:112)\r\n    \tat com.hazelcast.client.impl.spi.impl.ClientInvocationFuture.resolveAndThrowIfException(ClientInvocationFuture.java:95)\r\n    \tat com.hazelcast.client.impl.spi.impl.ClientInvocationFuture.resolveAndThrowIfException(ClientInvocationFuture.java:40)\r\n    \tat com.hazelcast.spi.impl.AbstractInvocationFuture.get(AbstractInvocationFuture.java:617)\r\n    \tat com.hazelcast.client.impl.spi.impl.ClientUserCodeDeploymentService.deploy(ClientUserCodeDeploymentService.java:170)\r\n    \tat com.hazelcast.client.impl.clientside.HazelcastClientInstanceImpl.sendStateToCluster(HazelcastClientInstanceImpl.java:865)\r\n    \tat com.hazelcast.client.impl.clientside.HazelcastClientInstanceImpl.start(HazelcastClientInstanceImpl.java:413)\r\n    \tat com.hazelcast.client.HazelcastClient.constructHazelcastClient(HazelcastClient.java:460)\r\n    \tat com.hazelcast.client.HazelcastClient.newHazelcastClientInternal(HazelcastClient.java:416)\r\n    \tat com.hazelcast.client.HazelcastClient.newHazelcastClient(HazelcastClient.java:136)\r\n    \tat org.example.game.SessionBuilder.build(HazelcastClientSessionBuilder.java:52)\r\n    \tat org.example.game.Config.hazelcastSessionInstance(HttpSessionConfig.java:65)\r\n    \tat org.example.game.Config$$EnhancerBySpringCGLIB$$e3760279.CGLIB$hazelcastSessionInstance$2(&lt;generated&gt;)\r\n    \tat org.example.game.Config$$EnhancerBySpringCGLIB$$e3760279$$FastClassBySpringCGLIB$$4644b10b.invoke(&lt;generated&gt;)\r\n    \tat org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244)\r\n    \tat org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331)\r\n    \tat org.example.game.Config$$EnhancerBySpringCGLIB$$e3760279.hazelcastSessionInstance(&lt;generated&gt;)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n    \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\r\n    \t... 100 common frames omitted\r\n    \r\n    Process finished with exit code 0\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/19NAx.png","title":"Versioning objects in hazelcast","body":"<p>Apologies in advance, this is my first time asking questions here.</p>\n<p>Here is hazelcastInstance bean.</p>\n<p>The main problem is - a class is already in local cache and has conflicting byte code representation</p>\n<pre><code>    @Bean\n    @SpringSessionHazelcastInstance\n    public HazelcastInstance hazelcastSessionInstance() {\n\n    if (&quot;embedded&quot;.equalsIgnoreCase(hazelcastType)) {\n        return new HazelcastEmbeddedSessionBuilder(hazelcastSessionSettings).build();\n    } else {\n        return new HazelcastClientSessionBuilder(hazelcastSessionSettings)\n                .addClass(MyTestDto.class)\n                .addClass(SomeClass.class)\n                .addClass(AnotherClass.class)\n                .addClass(GameWeb.class)\n                .build();\n    }\n}\n</code></pre>\n<p>I change type from embedded to another in application.yaml:</p>\n<p><a href=\"https://i.stack.imgur.com/19NAx.png\" rel=\"nofollow noreferrer\">here is settings screenshot</a></p>\n<p>I run the application everything works correctly, but if i add or remove any object in MyTestDto class and restart the application hazelcast starts throwing exceptions\nsaying that the bytecode of this class in the cache is different from the current one. In this case, either restarting the computer or renaming the class can help, this will clear the class cache. Here is the class from which all the trouble:</p>\n<pre><code>    @Getter\n    @NoArgsConstructor\n    public class MyTestDto extends Details implements DataSerializable {\n    private PrePrincipal prePrincipal;\n    //test obj\n    private String testStr = &quot;asdtest&quot;;\n\n\n    public MyTestDto(UUID testUId, UUID testId, String testString, Collection&lt;String&gt; testCollection, PrePrincipal prePrincipal) {\n        super(testUId, testId, testString, testCollection);\n        this.prePrincipal = prePrincipal;\n    }\n\n    @Override\n    public String toString() {\n        return MoreObjects.toStringHelper(this)\n                .add(&quot;testUId&quot;, getTestUId())\n                .add(&quot;testId&quot;, geTestId())\n                .add(&quot;testString&quot;, getTestString())\n                .add(&quot;prePrincipal&quot;, prePrincipal)\n                .toString();\n    }\n\n    @Override\n    public void writeData(ObjectDataOutput out) throws IOException {\n        out.writeString(testStr);\n        out.writeObject(prePrincipal);\n    }\n\n    @Override\n    public void readData(ObjectDataInput in) throws IOException {\n        testStr = in.readString();\n        prePrincipal = in.readObject();\n    }\n}\n</code></pre>\n<p>StackTrace</p>\n<pre><code>05.08.22 18:22:46.705 [restartedMain] S: R: U: O: C: A: ERROR o.s.b.w.e.tomcat.TomcatStarter - \nError starting Tomcat context. Exception: \norg.springframework.beans.factory.UnsatisfiedDependencyException. Message: Error creating bean \nwith name 'sessionUser' defined in class path resource \n[org/springframework/boot/autoconfigure/session/SessionRepositoryFilterConfiguration.class]: \nUnsatisfied dependency expressed through method 'sessionUser' \n\nparameter 1; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.session.hazelcast.config.annotation.web.http.HazelcastHttpSessionConfiguration': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'hazelcastSessionInstance' defined in class path resource [org/example/game/Config.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.hazelcast.core.HazelcastInstance]: Factory method 'hazelcastSessionInstance' threw exception; nested exception is java.lang.IllegalStateException: Class org.example.game.MyTestDto is already in local cache and has conflicting byte code representation\n05.08.22 18:22:46.728 [restartedMain] S: R: U: O: C: A: INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]\n05.08.22 18:22:46.738 [restartedMain] S: R: U: O: C: A: WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Unable to start web server; nested exception is org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat\n05.08.22 18:22:46.751 [restartedMain] S: R: U: O: C: A: INFO  o.s.b.a.l.ConditionEvaluationReportLoggingListener - \n\nError starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.\n05.08.22 18:22:46.774 [restartedMain] S: R: U: O: C: A: ERROR o.s.boot.SpringApplication - Application run failed\norg.springframework.context.ApplicationContextException: Unable to start web server; nested exception is org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:163)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:577)\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:412)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:302)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1301)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1290)\n    at org.example.game.GameApplication.main(GameApplication.java:17)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)\nCaused by: org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat\n    at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:142)\n    at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.&lt;init&gt;(TomcatWebServer.java:104)\n    at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:473)\n    at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:206)\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:182)\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:160)\n    ... 13 common frames omitted\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'sessionRepositoryFilterRegistration' defined in class path resource [org/springframework/boot/autoconfigure/session/SessionRepositoryFilterConfiguration.class]: Unsatisfied dependency expressed through method 'sessionRepositoryFilterRegistration' parameter 1; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.session.hazelcast.config.annotation.web.http.HazelcastHttpSessionConfiguration': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'hazelcastSessionInstance' defined in class path resource [org/example/game/Config.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.hazelcast.core.HazelcastInstance]: Factory method 'hazelcastSessionInstance' threw exception; nested exception is java.lang.IllegalStateException: Class org.example.game.MyTestDto is already in local cache and has conflicting byte code representation\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:213)\n    at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:212)\n    at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:203)\n    at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addServletContextInitializerBeans(ServletContextInitializerBeans.java:97)\n    at org.springframework.boot.web.servlet.ServletContextInitializerBeans.&lt;init&gt;(ServletContextInitializerBeans.java:86)\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.getServletContextInitializerBeans(ServletWebServerApplicationContext.java:260)\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.selfInitialize(ServletWebServerApplicationContext.java:234)\n    at org.springframework.boot.web.embedded.tomcat.TomcatStarter.onStartup(TomcatStarter.java:53)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5219)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n    at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:140)\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\n    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n    at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:140)\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\n    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:263)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:927)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.startup.Tomcat.start(Tomcat.java:486)\n    at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:123)\n    ... 18 common frames omitted\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.session.hazelcast.config.annotation.web.http.HazelcastHttpSessionConfiguration': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'hazelcastSessionInstance' defined in class path resource [org/example/game/Config.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.hazelcast.core.HazelcastInstance]: Factory method 'hazelcastSessionInstance' threw exception; nested exception is java.lang.IllegalStateException: Class org.example.game.MyTestDto is already in local cache and has conflicting byte code representation\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:628)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:410)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1389)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1309)\n    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887)\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)\n    ... 58 common frames omitted\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'hazelcastSessionInstance' defined in class path resource [ru/revgames/game/auchan/match3/config/security/HttpSessionConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.hazelcast.core.HazelcastInstance]: Factory method 'hazelcastSessionInstance' threw exception; nested exception is java.lang.IllegalStateException: Class org.example.game.MyTestDto is already in local cache and has conflicting byte code representation\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:486)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1389)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory$DependencyObjectProvider.getIfAvailable(DefaultListableBeanFactory.java:2030)\n    at org.springframework.session.hazelcast.config.annotation.web.http.HazelcastHttpSessionConfiguration.setHazelcastInstance(HazelcastHttpSessionConfiguration.java:122)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:724)\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619)\n    ... 77 common frames omitted\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.hazelcast.core.HazelcastInstance]: Factory method 'hazelcastSessionInstance' threw exception; nested exception is java.lang.IllegalStateException: Class org.example.game.MyTestDto is already in local cache and has conflicting byte code representation\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)\n    ... 99 common frames omitted\nCaused by: java.lang.IllegalStateException: Class org.example.game.MyTestDto is already in local cache and has conflicting byte code representation\n    at com.hazelcast.internal.usercodedeployment.impl.ClassLocator.defineClassFromClient(ClassLocator.java:123)\n    at com.hazelcast.internal.usercodedeployment.impl.ClassLocator.defineClassesFromClient(ClassLocator.java:107)\n    at com.hazelcast.internal.usercodedeployment.UserCodeDeploymentService.defineClasses(UserCodeDeploymentService.java:74)\n    at com.hazelcast.internal.usercodedeployment.impl.operation.DeployClassesOperation.run(DeployClassesOperation.java:49)\n    at com.hazelcast.spi.impl.operationservice.Operation.call(Operation.java:189)\n    at com.hazelcast.spi.impl.operationservice.impl.OperationRunnerImpl.call(OperationRunnerImpl.java:272)\n    at com.hazelcast.spi.impl.operationservice.impl.OperationRunnerImpl.run(OperationRunnerImpl.java:248)\n    at com.hazelcast.spi.impl.operationservice.impl.OperationRunnerImpl.run(OperationRunnerImpl.java:213)\n    at com.hazelcast.spi.impl.operationexecutor.impl.OperationExecutorImpl.run(OperationExecutorImpl.java:411)\n    at com.hazelcast.spi.impl.operationexecutor.impl.OperationExecutorImpl.runOrExecute(OperationExecutorImpl.java:438)\n    at com.hazelcast.spi.impl.operationservice.impl.Invocation.doInvokeLocal(Invocation.java:600)\n    at com.hazelcast.spi.impl.operationservice.impl.Invocation.doInvoke(Invocation.java:579)\n    at com.hazelcast.spi.impl.operationservice.impl.Invocation.invoke0(Invocation.java:540)\n    at com.hazelcast.spi.impl.operationservice.impl.Invocation.invoke(Invocation.java:240)\n    at com.hazelcast.spi.impl.operationservice.impl.InvocationBuilderImpl.invoke(InvocationBuilderImpl.java:59)\n    at com.hazelcast.client.impl.protocol.task.AbstractMultiTargetMessageTask.processInternal(AbstractMultiTargetMessageTask.java:70)\n    at com.hazelcast.client.impl.protocol.task.AbstractAsyncMessageTask.processMessage(AbstractAsyncMessageTask.java:71)\n    at com.hazelcast.client.impl.protocol.task.AbstractMessageTask.initializeAndProcessMessage(AbstractMessageTask.java:153)\n    at com.hazelcast.client.impl.protocol.task.AbstractMessageTask.run(AbstractMessageTask.java:116)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n    at java.lang.Thread.run(Thread.java:829)\n    at com.hazelcast.internal.util.executor.HazelcastManagedThread.executeRun(HazelcastManagedThread.java:76)\n    at com.hazelcast.internal.util.executor.HazelcastManagedThread.run(HazelcastManagedThread.java:102)\n    at ------ submitted from ------.()\n    at com.hazelcast.internal.util.ExceptionUtil.cloneExceptionWithFixedAsyncStackTrace(ExceptionUtil.java:279)\n    at com.hazelcast.spi.impl.operationservice.impl.InvocationFuture.returnOrThrowWithGetConventions(InvocationFuture.java:112)\n    at com.hazelcast.client.impl.spi.impl.ClientInvocationFuture.resolveAndThrowIfException(ClientInvocationFuture.java:95)\n    at com.hazelcast.client.impl.spi.impl.ClientInvocationFuture.resolveAndThrowIfException(ClientInvocationFuture.java:40)\n    at com.hazelcast.spi.impl.AbstractInvocationFuture.get(AbstractInvocationFuture.java:617)\n    at com.hazelcast.client.impl.spi.impl.ClientUserCodeDeploymentService.deploy(ClientUserCodeDeploymentService.java:170)\n    at com.hazelcast.client.impl.clientside.HazelcastClientInstanceImpl.sendStateToCluster(HazelcastClientInstanceImpl.java:865)\n    at com.hazelcast.client.impl.clientside.HazelcastClientInstanceImpl.start(HazelcastClientInstanceImpl.java:413)\n    at com.hazelcast.client.HazelcastClient.constructHazelcastClient(HazelcastClient.java:460)\n    at com.hazelcast.client.HazelcastClient.newHazelcastClientInternal(HazelcastClient.java:416)\n    at com.hazelcast.client.HazelcastClient.newHazelcastClient(HazelcastClient.java:136)\n    at org.example.game.SessionBuilder.build(HazelcastClientSessionBuilder.java:52)\n    at org.example.game.Config.hazelcastSessionInstance(HttpSessionConfig.java:65)\n    at org.example.game.Config$$EnhancerBySpringCGLIB$$e3760279.CGLIB$hazelcastSessionInstance$2(&lt;generated&gt;)\n    at org.example.game.Config$$EnhancerBySpringCGLIB$$e3760279$$FastClassBySpringCGLIB$$4644b10b.invoke(&lt;generated&gt;)\n    at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244)\n    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331)\n    at org.example.game.Config$$EnhancerBySpringCGLIB$$e3760279.hazelcastSessionInstance(&lt;generated&gt;)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\n    ... 100 common frames omitted\n\nProcess finished with exit code 0\n</code></pre>\n"},{"tags":["java","android","webview"],"comments":[{"owner":{"account_id":12731703,"reputation":3217,"user_id":9248098,"display_name":"Gowtham K K"},"score":0,"creation_date":1660034901,"post_id":73287946,"comment_id":129431373,"body_markdown":"Please post your code.","body":"Please post your code."},{"owner":{"account_id":12731703,"reputation":3217,"user_id":9248098,"display_name":"Gowtham K K"},"score":0,"creation_date":1660064629,"post_id":73287946,"comment_id":129442867,"body_markdown":"Have you logged intenturi and validated it whether its coming correctly?","body":"Have you logged intenturi and validated it whether its coming correctly?"},{"owner":{"account_id":10240716,"reputation":1,"user_id":7558213,"display_name":"Vikram Sai Simha"},"score":0,"creation_date":1660112291,"post_id":73287946,"comment_id":129452555,"body_markdown":"Where can I log it? @GowthamKK","body":"Where can I log it? @GowthamKK"},{"owner":{"account_id":12731703,"reputation":3217,"user_id":9248098,"display_name":"Gowtham K K"},"score":0,"creation_date":1660112609,"post_id":73287946,"comment_id":129452626,"body_markdown":"Before checking loading webview, add Log.d(&quot;SomeTag&quot;,intentUri.toString());","body":"Before checking loading webview, add Log.d(&quot;SomeTag&quot;,intentUri.toString());"},{"owner":{"account_id":10240716,"reputation":1,"user_id":7558213,"display_name":"Vikram Sai Simha"},"score":0,"creation_date":1660832478,"post_id":73287946,"comment_id":129630718,"body_markdown":"I did give the Log.d but it is not showing any data @GowthamKK","body":"I did give the Log.d but it is not showing any data @GowthamKK"},{"owner":{"account_id":12731703,"reputation":3217,"user_id":9248098,"display_name":"Gowtham K K"},"score":0,"creation_date":1660836029,"post_id":73287946,"comment_id":129632344,"body_markdown":"Is the webview activity launching correctly?","body":"Is the webview activity launching correctly?"},{"owner":{"account_id":10240716,"reputation":1,"user_id":7558213,"display_name":"Vikram Sai Simha"},"score":0,"creation_date":1660874138,"post_id":73287946,"comment_id":129642261,"body_markdown":"Initially it is launching very fine and when first intent url is clciked it is launching the correct page. Then if I am trying to click another url it is opening the app which is in the background but is not redirecting to the new url page, it is shoding the old page only. @GowthamKK","body":"Initially it is launching very fine and when first intent url is clciked it is launching the correct page. Then if I am trying to click another url it is opening the app which is in the background but is not redirecting to the new url page, it is shoding the old page only. @GowthamKK"}],"owner":{"account_id":10240716,"reputation":1,"user_id":7558213,"display_name":"Vikram Sai Simha"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":252,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660054607,"creation_date":1660029924,"question_id":73287946,"body_markdown":"I am using webview and calling my website to show it in the android app. And I used intent-filters to open the external URLs to redirect and open them in the app instead of web-browser. Everything works fine but the problem is when I click on a URL it opens my app but when I click on another URL it opens the same app but doesn&#39;t redirect to the new URL it is showing the old URL page.\r\n\r\nAndroidManifest.xml\r\n\r\n    &lt;activity\r\n                android:name=&quot;.SplashScreen&quot;\r\n                android:theme=&quot;@style/Theme.AppCompat.DayNight.NoActionBar&quot;&gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n                    &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/activity&gt;\r\n    \r\n        &lt;intent-filter&gt;\r\n                        &lt;action android:name=&quot;android.intent.action.VIEW&quot; /&gt;\r\n                        &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\r\n                        &lt;category android:name=&quot;android.intent.category.BROWSABLE&quot; /&gt;\r\n                        &lt;data\r\n                            android:scheme=&quot;https&quot;\r\n                            android:host=&quot;my_website.com&quot;\r\n                            android:path=&quot;/app.html&quot; /&gt;\r\n                    &lt;/intent-filter&gt;\r\n\r\nMainActivity.java\r\n\r\n    WebView webView = (WebView) findViewById(R.id.webView);\r\n            webView.setWebViewClient(new WebViewClient());\r\n            WebSettings webSettings = webView.getSettings();\r\n            webSettings.setJavaScriptEnabled(true);\r\n            webSettings.setDomStorageEnabled(true);\r\n            webSettings.setLoadsImagesAutomatically(true);\r\n            webSettings.setSupportMultipleWindows(true);\r\n            webView.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);\r\n    \r\n            if (Build.VERSION.SDK_INT &gt;= 19) {\r\n                webView.setLayerType(View.LAYER_TYPE_HARDWARE, null);\r\n            } else {\r\n                webView.setLayerType(View.LAYER_TYPE_SOFTWARE, null);\r\n            }\r\n    \r\n            webView.loadUrl(&quot;my_website&quot;);\r\n    \r\n    \r\n            Uri intentUri = getIntent().getData(); //get link\r\n            if (intentUri != null) {\r\n                webView.loadUrl(intentUri.toString()); //open it in webView\r\n            }\r\n\r\n","title":"My Android App is not loading the new url page in webview using intent-filters","body":"<p>I am using webview and calling my website to show it in the android app. And I used intent-filters to open the external URLs to redirect and open them in the app instead of web-browser. Everything works fine but the problem is when I click on a URL it opens my app but when I click on another URL it opens the same app but doesn't redirect to the new URL it is showing the old URL page.</p>\n<p>AndroidManifest.xml</p>\n<pre><code>&lt;activity\n            android:name=&quot;.SplashScreen&quot;\n            android:theme=&quot;@style/Theme.AppCompat.DayNight.NoActionBar&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n\n    &lt;intent-filter&gt;\n                    &lt;action android:name=&quot;android.intent.action.VIEW&quot; /&gt;\n                    &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\n                    &lt;category android:name=&quot;android.intent.category.BROWSABLE&quot; /&gt;\n                    &lt;data\n                        android:scheme=&quot;https&quot;\n                        android:host=&quot;my_website.com&quot;\n                        android:path=&quot;/app.html&quot; /&gt;\n                &lt;/intent-filter&gt;\n</code></pre>\n<p>MainActivity.java</p>\n<pre><code>WebView webView = (WebView) findViewById(R.id.webView);\n        webView.setWebViewClient(new WebViewClient());\n        WebSettings webSettings = webView.getSettings();\n        webSettings.setJavaScriptEnabled(true);\n        webSettings.setDomStorageEnabled(true);\n        webSettings.setLoadsImagesAutomatically(true);\n        webSettings.setSupportMultipleWindows(true);\n        webView.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);\n\n        if (Build.VERSION.SDK_INT &gt;= 19) {\n            webView.setLayerType(View.LAYER_TYPE_HARDWARE, null);\n        } else {\n            webView.setLayerType(View.LAYER_TYPE_SOFTWARE, null);\n        }\n\n        webView.loadUrl(&quot;my_website&quot;);\n\n\n        Uri intentUri = getIntent().getData(); //get link\n        if (intentUri != null) {\n            webView.loadUrl(intentUri.toString()); //open it in webView\n        }\n</code></pre>\n"},{"tags":["java","android","video-streaming","mpeg2-ts","miracast"],"answers":[{"tags":[],"owner":{"account_id":43726,"reputation":9735,"user_id":127938,"accept_rate":89,"display_name":"Paul Gregoire"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660054276,"creation_date":1660054276,"answer_id":73293298,"question_id":72987771,"body_markdown":"I&#39;m not sure if this will be useful for your situation, but you might be able to discern how to package mpeg-ts with some source I abandoned a long time ago here: https://github.com/Red5/red5-hls-plugin \r\n\r\nIt&#39;s mostly Java, hope it helps.","title":"Streaming H.264 video in MPEG2-TS over RTP","body":"<p>I'm not sure if this will be useful for your situation, but you might be able to discern how to package mpeg-ts with some source I abandoned a long time ago here: <a href=\"https://github.com/Red5/red5-hls-plugin\" rel=\"nofollow noreferrer\">https://github.com/Red5/red5-hls-plugin</a></p>\n<p>It's mostly Java, hope it helps.</p>\n"}],"owner":{"account_id":16837491,"reputation":1,"user_id":12173735,"display_name":"Aaronjamt"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":694,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660054276,"creation_date":1657843106,"question_id":72987771,"body_markdown":"I am trying to build an Android application that is able to stream the screen over the network using an H.264 video feed in an MPEG2-TS container, sent over RTP (in case it matters, this is supposed to stream to a Miracast display). I have the screen recording and H.264 encoding working but can&#39;t figure out the MPEG2-TS container for the life of me. The RTP header is very simple and I resorted to manually crafting it with `ByteBuffer`s and I am now trying to do something similar with MPEG2-TS but it is a very complicated format. I have found many libraries to parse incoming MPEG2-TS but nothing to generate it (the closest being [codice/mpegts-streamer](https://github.com/codice/mpegts-streamer) forked from [taktik/mpegts-streamer](https://github.com/taktik/mpegts-streamer) but that requires an MPEG2-TS stream to be fed in, defeating the whole purpose). Are there any other libraries I can use for this or do I just have to reinvent the wheel myself?","title":"Streaming H.264 video in MPEG2-TS over RTP","body":"<p>I am trying to build an Android application that is able to stream the screen over the network using an H.264 video feed in an MPEG2-TS container, sent over RTP (in case it matters, this is supposed to stream to a Miracast display). I have the screen recording and H.264 encoding working but can't figure out the MPEG2-TS container for the life of me. The RTP header is very simple and I resorted to manually crafting it with <code>ByteBuffer</code>s and I am now trying to do something similar with MPEG2-TS but it is a very complicated format. I have found many libraries to parse incoming MPEG2-TS but nothing to generate it (the closest being <a href=\"https://github.com/codice/mpegts-streamer\" rel=\"nofollow noreferrer\">codice/mpegts-streamer</a> forked from <a href=\"https://github.com/taktik/mpegts-streamer\" rel=\"nofollow noreferrer\">taktik/mpegts-streamer</a> but that requires an MPEG2-TS stream to be fed in, defeating the whole purpose). Are there any other libraries I can use for this or do I just have to reinvent the wheel myself?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1660052673,"post_id":73292240,"comment_id":129438047,"body_markdown":"From the sounds of it, you want to add a new object and have it be the new head of the list? Is that what you mean by push?","body":"From the sounds of it, you want to add a new object and have it be the new head of the list? Is that what you mean by push?"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660050685,"creation_date":1660050685,"answer_id":73292421,"question_id":73292240,"body_markdown":"You&#39;re almost there. When the list is empty, that part works fine. But when the list is not empty, think through what needs to happen, which is __4 things__:\r\n\r\n* The &#39;head&#39;s previous node needs to become the new node.\r\n* The new node&#39;s &#39;next&#39; needs to point at head.\r\n* The new node&#39;s &#39;previous&#39; needs to point at what _used to be_ `head.prev`.\r\n* What _used to be_ `head.prev`&#39;s `next` pointer needs to point at the new node.\r\n\r\nYou&#39;ll need some temp variables to take care of all of that.\r\n","title":"Adding node in circular list in Java with only head","body":"<p>You're almost there. When the list is empty, that part works fine. But when the list is not empty, think through what needs to happen, which is <strong>4 things</strong>:</p>\n<ul>\n<li>The 'head's previous node needs to become the new node.</li>\n<li>The new node's 'next' needs to point at head.</li>\n<li>The new node's 'previous' needs to point at what <em>used to be</em> <code>head.prev</code>.</li>\n<li>What <em>used to be</em> <code>head.prev</code>'s <code>next</code> pointer needs to point at the new node.</li>\n</ul>\n<p>You'll need some temp variables to take care of all of that.</p>\n"},{"tags":[],"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660053146,"creation_date":1660053146,"answer_id":73293031,"question_id":73292240,"body_markdown":"Lets take some nodes.\r\n\r\n    &lt; H - &lt; A - &lt; B -\r\n\r\nThis describes the connections of the nodes. A.next == H and A.prev == B.\r\n\r\nH and B are special cases, where H is the head and B is the tail. Since the list is circular. Then H.next == B and B.prev == H.\r\n\r\nWhen we push a node.\r\n\r\n    &lt; N - &lt; H - &lt; A - &lt; B -\r\n\r\nThen we can see all of the assignments that need to change.\r\n\r\n    H = head;\r\n    B = H.next; // get the tail since you only have the head.\r\n    H.next = N;\r\n    N.prev = H;\r\n    N.next = B;\r\n    B.prev = N;\r\n    head = N;\r\n","title":"Adding node in circular list in Java with only head","body":"<p>Lets take some nodes.</p>\n<pre><code>&lt; H - &lt; A - &lt; B -\n</code></pre>\n<p>This describes the connections of the nodes. A.next == H and A.prev == B.</p>\n<p>H and B are special cases, where H is the head and B is the tail. Since the list is circular. Then H.next == B and B.prev == H.</p>\n<p>When we push a node.</p>\n<pre><code>&lt; N - &lt; H - &lt; A - &lt; B -\n</code></pre>\n<p>Then we can see all of the assignments that need to change.</p>\n<pre><code>H = head;\nB = H.next; // get the tail since you only have the head.\nH.next = N;\nN.prev = H;\nN.next = B;\nB.prev = N;\nhead = N;\n</code></pre>\n"}],"owner":{"account_id":26018968,"reputation":1,"user_id":19726922,"display_name":"Ahmed"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1660053377,"creation_date":1660049857,"question_id":73292240,"body_markdown":"I&#39;m trying to add a node in a circular list in Java. The problem is that my list has only a head (without a tail). Here is my code:\r\n\r\n```\r\nimport java.io.PrintStream;\r\nimport java.util.EmptyStackException;\r\n\r\npublic class CircularList {\r\n\tprivate Node head = null;\r\n\r\n\tprivate class Node {\r\n\t\tpublic Node(String payload, Node prev, Node next) {\r\n\t\t\tsuper();\r\n\t\t\tthis.payload = payload;\r\n\t\t\tthis.prev = prev;\r\n\t\t\tthis.next = next;\r\n\t\t}\r\n\r\n\t\tprivate Node prev;\r\n\t\tprivate Node next;\r\n\t\tString payload = &quot;&quot;;\r\n\t}\r\n    public void push(String payload) {\r\n\t\tNode n = new Node(payload, null, null);\r\n\t\tif (isEmpty()) {\r\n\t\t\thead = n;\r\n\t\t\tn.next = n;\r\n\t\t} else {\r\n\t\t\tn.prev = head;\r\n\t\t\tn.next = head;\r\n\t\t}\r\n\t}\r\n```","title":"Adding node in circular list in Java with only head","body":"<p>I'm trying to add a node in a circular list in Java. The problem is that my list has only a head (without a tail). Here is my code:</p>\n<pre><code>import java.io.PrintStream;\nimport java.util.EmptyStackException;\n\npublic class CircularList {\n    private Node head = null;\n\n    private class Node {\n        public Node(String payload, Node prev, Node next) {\n            super();\n            this.payload = payload;\n            this.prev = prev;\n            this.next = next;\n        }\n\n        private Node prev;\n        private Node next;\n        String payload = &quot;&quot;;\n    }\n    public void push(String payload) {\n        Node n = new Node(payload, null, null);\n        if (isEmpty()) {\n            head = n;\n            n.next = n;\n        } else {\n            n.prev = head;\n            n.next = head;\n        }\n    }\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":8425000,"reputation":1382,"user_id":6322589,"accept_rate":57,"display_name":"lucasvw"},"score":0,"creation_date":1580222923,"post_id":59951280,"comment_id":106022223,"body_markdown":"Well for one, Java 11 isn&#39;t even the latest release of Java","body":"Well for one, Java 11 isn&#39;t even the latest release of Java"},{"owner":{"account_id":2052160,"reputation":2825,"user_id":1830916,"display_name":"locus2k"},"score":1,"creation_date":1580222935,"post_id":59951280,"comment_id":106022235,"body_markdown":"Oracles new java licensing is probably the main reason why not to mention the lawsuit oracle has out on Google.","body":"Oracles new java licensing is probably the main reason why not to mention the lawsuit oracle has out on Google."},{"owner":{"account_id":1937019,"reputation":4428,"user_id":1744230,"accept_rate":100,"display_name":"QBrute"},"score":0,"creation_date":1580222948,"post_id":59951280,"comment_id":106022248,"body_markdown":"fyi, the latest version of Java SE is 13","body":"fyi, the latest version of Java SE is 13"},{"owner":{"display_name":"user12021836"},"score":0,"creation_date":1580222986,"post_id":59951280,"comment_id":106022268,"body_markdown":"This seems a good question, why down vote","body":"This seems a good question, why down vote"},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1580223659,"post_id":59951280,"comment_id":106022641,"body_markdown":"Android releases almost never directly map to a given Java release. The most obvious reason is because Android does not use Java at all. It uses Dalvik, which brings with it its own Runtime (not a JVM), its own Bytecode format (Dalvik bytecode, not Java bytecode) and its own runtime library (borrowing a good chunk from Java SE and adding a lot of its own under `android.*`). Yes, a lot of it is written in the *Java language* and the runtime/bytecode are *similar* to Java bytecode, but different enough that directly picking up an OpenJDK to use in Android is far from practical.","body":"Android releases almost never directly map to a given Java release. The most obvious reason is because Android does not use Java at all. It uses Dalvik, which brings with it its own Runtime (not a JVM), its own Bytecode format (Dalvik bytecode, not Java bytecode) and its own runtime library (borrowing a good chunk from Java SE and adding a lot of its own under <code>android.*</code>). Yes, a lot of it is written in the <i>Java language</i> and the runtime/bytecode are <i>similar</i> to Java bytecode, but different enough that directly picking up an OpenJDK to use in Android is far from practical."},{"owner":{"account_id":4997462,"reputation":9987,"user_id":4017501,"accept_rate":62,"display_name":"cutiko"},"score":0,"creation_date":1580223660,"post_id":59951280,"comment_id":106022643,"body_markdown":"Why closing? I mean why closing for opinion base? You could for lack of clarity or need more details because there is no code showing the problem, but this has an specific answer, Java 9 deletes code that it is used by Android, that is not an opinion that is a fact","body":"Why closing? I mean why closing for opinion base? You could for lack of clarity or need more details because there is no code showing the problem, but this has an specific answer, Java 9 deletes code that it is used by Android, that is not an opinion that is a fact"},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1580223744,"post_id":59951280,"comment_id":106022688,"body_markdown":"@cutiko: very few people can give a fact-based answer to this question and those who can are almost certainly contractually obliged not to do so. Having worked on Android myself I can tell you that I can&#39;t chat about half of the things I&#39;d like to talk about on this topic.","body":"@cutiko: very few people can give a fact-based answer to this question and those who can are almost certainly contractually obliged not to do so. Having worked on Android myself I can tell you that I can&#39;t chat about half of the things I&#39;d like to talk about on this topic."},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1580223923,"post_id":59951280,"comment_id":106022778,"body_markdown":"As an interesting sidenote: just a few days ago there was a commit which brings parts of `java.util` up to OpenJDK 9: [commit in question](https://android.googlesource.com/platform/libcore/+/72d94d47ac32bd55de714e40696f4cb253295f1b).","body":"As an interesting sidenote: just a few days ago there was a commit which brings parts of <code>java.util</code> up to OpenJDK 9: <a href=\"https://android.googlesource.com/platform/libcore/+/72d94d47ac32bd55de714e40696f4cb253295f1b\" rel=\"nofollow noreferrer\">commit in question</a>."},{"owner":{"account_id":4997462,"reputation":9987,"user_id":4017501,"accept_rate":62,"display_name":"cutiko"},"score":0,"creation_date":1580233417,"post_id":59951280,"comment_id":106027779,"body_markdown":"@JoachimSauer the question `Why is android still using Java 8?` can be answered, because in 9 there are missing methods, but the other questions can not as you explained. The *extra* questions seem like a common formatting problem to me.","body":"@JoachimSauer the question <code>Why is android still using Java 8?</code> can be answered, because in 9 there are missing methods, but the other questions can not as you explained. The <i>extra</i> questions seem like a common formatting problem to me."},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1580237457,"post_id":59951280,"comment_id":106029525,"body_markdown":"@cutiko: that&#39;s not a good reason,  because they can easily patch that in when they move to OpenJDK 9 ...","body":"@cutiko: that&#39;s not a good reason,  because they can easily patch that in when they move to OpenJDK 9 ..."}],"answers":[{"tags":[],"owner":{"account_id":4997462,"reputation":9987,"user_id":4017501,"accept_rate":62,"display_name":"cutiko"},"down_vote_count":1,"up_vote_count":4,"is_accepted":true,"score":3,"last_activity_date":1660052929,"creation_date":1580223548,"answer_id":59951512,"question_id":59951280,"body_markdown":"Java 9 removed some methods used in the Android API\r\n\r\nYou can see the full list here\r\n\r\nhttps://www.oracle.com/technetwork/java/javase/9-removed-features-3745614.html\r\n\r\nTo verify this, you can install Java 9 on your environment, use it and then run the tests using the command line; the test will fail indicating there is a problem with missing methods.\r\n\r\nI can&#39;t remember which methods in specific, and please notice; that removed is not deprecated, it is deleted from the code.\r\n\r\nMy best **deduction** is:\r\n\r\n - Kotlin is now a thing\r\n - Oracle is suing Google\r\n\r\nRefactoring the Android API to match the new Java versions gets low priority in that scenario","title":"Why is android still using Java 8?","body":"<p>Java 9 removed some methods used in the Android API</p>\n<p>You can see the full list here</p>\n<p><a href=\"https://www.oracle.com/technetwork/java/javase/9-removed-features-3745614.html\" rel=\"nofollow noreferrer\">https://www.oracle.com/technetwork/java/javase/9-removed-features-3745614.html</a></p>\n<p>To verify this, you can install Java 9 on your environment, use it and then run the tests using the command line; the test will fail indicating there is a problem with missing methods.</p>\n<p>I can't remember which methods in specific, and please notice; that removed is not deprecated, it is deleted from the code.</p>\n<p>My best <strong>deduction</strong> is:</p>\n<ul>\n<li>Kotlin is now a thing</li>\n<li>Oracle is suing Google</li>\n</ul>\n<p>Refactoring the Android API to match the new Java versions gets low priority in that scenario</p>\n"}],"owner":{"account_id":27050,"reputation":26330,"user_id":70942,"accept_rate":93,"display_name":"ant2009"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1042,"favorite_count":0,"down_vote_count":3,"up_vote_count":5,"closed_date":1580223193,"accepted_answer_id":59951512,"answer_count":1,"score":2,"last_activity_date":1660052929,"creation_date":1580222784,"question_id":59951280,"body_markdown":"Just wondering why Android is very behind the latest versions of Java which the latest release is Java 11.\r\n\r\nI understand we have Kotlin now which comes with some great features. But just wondering will Google ever update to the latest version if not, why?\r\n\r\nMany thanks in advance ","title":"Why is android still using Java 8?","body":"<p>Just wondering why Android is very behind the latest versions of Java which the latest release is Java 11.</p>\n\n<p>I understand we have Kotlin now which comes with some great features. But just wondering will Google ever update to the latest version if not, why?</p>\n\n<p>Many thanks in advance </p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"score":0,"creation_date":1660166956,"post_id":73292963,"comment_id":129471999,"body_markdown":"What do you mean by &quot;costs of running&quot; and &quot;overhead&quot;? What exactly do you find suspicious and what would you expect instead?","body":"What do you mean by &quot;costs of running&quot; and &quot;overhead&quot;? What exactly do you find suspicious and what would you expect instead?"},{"owner":{"account_id":17228781,"reputation":3548,"user_id":12473843,"display_name":"Sergey Tsypanov"},"score":0,"creation_date":1660208301,"post_id":73292963,"comment_id":129480227,"body_markdown":"By &quot;costs of running&quot; here I mean costs of executing the methods i. e. bringing a thread to sleep and waking it up. In case we call `parkNanos1ms()` it takes us about 100 us on Linux and 500 us on Mac, but when we call `parkNanos100us()` it takes us only 50 us. So the &quot;overhead&quot; is that additional time elapsed apart of delay itself and it varies depending on the delay. This is a confusing point to me.","body":"By &quot;costs of running&quot; here I mean costs of executing the methods i. e. bringing a thread to sleep and waking it up. In case we call <code>parkNanos1ms()</code> it takes us about 100 us on Linux and 500 us on Mac, but when we call <code>parkNanos100us()</code> it takes us only 50 us. So the &quot;overhead&quot; is that additional time elapsed apart of delay itself and it varies depending on the delay. This is a confusing point to me."},{"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"score":0,"creation_date":1660259121,"post_id":73292963,"comment_id":129496936,"body_markdown":"I wouldn&#39;t call it &quot;costs&quot;. More like scheduling inaccuracy, which depends on the particular scheduling policy. IMO, there is nothing surprising in observing accuracy somewhat proportional to the delay. At least, for the non-realtime policies. Btw, did you try different Linux [schedulers](https://man7.org/linux/man-pages/man7/sched.7.html)?","body":"I wouldn&#39;t call it &quot;costs&quot;. More like scheduling inaccuracy, which depends on the particular scheduling policy. IMO, there is nothing surprising in observing accuracy somewhat proportional to the delay. At least, for the non-realtime policies. Btw, did you try different Linux <a href=\"https://man7.org/linux/man-pages/man7/sched.7.html\" rel=\"nofollow noreferrer\">schedulers</a>?"},{"owner":{"account_id":17228781,"reputation":3548,"user_id":12473843,"display_name":"Sergey Tsypanov"},"score":0,"creation_date":1660284217,"post_id":73292963,"comment_id":129500538,"body_markdown":"No, I didn&#39;t. I&#39;m not that deep in Linux internals )","body":"No, I didn&#39;t. I&#39;m not that deep in Linux internals )"}],"owner":{"account_id":17228781,"reputation":3548,"user_id":12473843,"display_name":"Sergey Tsypanov"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":374,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1660052854,"creation_date":1660052854,"question_id":73292963,"body_markdown":"While running the following benchmark on Java 11 (Linux and MacOS):\r\n```java\r\n@BenchmarkMode(Mode.AverageTime)\r\n@OutputTimeUnit(TimeUnit.MICROSECONDS)\r\npublic class ThreadSleepVsParkNanosBenchmark {\r\n\r\n  @Benchmark\r\n  public void sleep1ms() throws Exception {\r\n    Thread.sleep(1);\r\n  }\r\n\r\n  @Benchmark\r\n  public void parkNanos1ms() {\r\n    LockSupport.parkNanos(TimeUnit.MILLISECONDS.toNanos(1));\r\n  }\r\n\r\n  @Benchmark\r\n  public void parkNanos500us() {\r\n    LockSupport.parkNanos(TimeUnit.MICROSECONDS.toNanos(500));\r\n  }\r\n\r\n  @Benchmark\r\n  public void parkNanos100us() {\r\n    LockSupport.parkNanos(TimeUnit.MICROSECONDS.toNanos(100));\r\n  }\r\n}\r\n```\r\nI&#39;ve found out that the costs of running `Thread.sleep(1)` and `LockSupport.parkNanos(TimeUnit.MILLISECONDS.toNanos(1))` i.e. the overhead of suspending and revoking the thread are pretty much the same on both platforms. But the overhead of `LockSupport.parkNanos(TimeUnit.MICROSECONDS.toNanos(100))` is significantly lower:\r\n\r\n```\r\nLinux\r\nBenchmark                                                 Mode  Cnt        Score      Error  Units\r\nThreadSleepVsParkNanosBenchmark.parkNanos100us            avgt  100      159.775 &#177;    0.248  us/op\r\nThreadSleepVsParkNanosBenchmark.parkNanos500us            avgt  100      612.971 &#177;    0.578  us/op\r\nThreadSleepVsParkNanosBenchmark.parkNanos1ms              avgt  100     1103.372 &#177;    4.685  us/op\r\nThreadSleepVsParkNanosBenchmark.sleep1ms                  avgt  100     1119.566 &#177;    0.940  us/op\r\n\r\nMacOS\r\nThreadSleepVsParkNanosBenchmark.parkNanos100us            avgt  100      156,696 &#177;     6,977  us/op\r\nThreadSleepVsParkNanosBenchmark.parkNanos500us            avgt  100      752,520 &#177;    23,203  us/op\r\nThreadSleepVsParkNanosBenchmark.parkNanos1ms              avgt  100     1508,832 &#177;     7,580  us/op\r\nThreadSleepVsParkNanosBenchmark.sleep1ms                  avgt  100     1430,396 &#177;    32,876  us/op\r\n```\r\nWhat is the explanation? As far as it comes from the JavaDoc both `Thread.sleep()` and `LockSupport.parkNanos()` put the thread into `Thread.State.TIMED_WAITING`, so the mechanism under the hood must be the same along with the costs.","title":"Infrasctructural costs of Thread.sleep() vs LockSupport.parkNanos()","body":"<p>While running the following benchmark on Java 11 (Linux and MacOS):</p>\n<pre class=\"lang-java prettyprint-override\"><code>@BenchmarkMode(Mode.AverageTime)\n@OutputTimeUnit(TimeUnit.MICROSECONDS)\npublic class ThreadSleepVsParkNanosBenchmark {\n\n  @Benchmark\n  public void sleep1ms() throws Exception {\n    Thread.sleep(1);\n  }\n\n  @Benchmark\n  public void parkNanos1ms() {\n    LockSupport.parkNanos(TimeUnit.MILLISECONDS.toNanos(1));\n  }\n\n  @Benchmark\n  public void parkNanos500us() {\n    LockSupport.parkNanos(TimeUnit.MICROSECONDS.toNanos(500));\n  }\n\n  @Benchmark\n  public void parkNanos100us() {\n    LockSupport.parkNanos(TimeUnit.MICROSECONDS.toNanos(100));\n  }\n}\n</code></pre>\n<p>I've found out that the costs of running <code>Thread.sleep(1)</code> and <code>LockSupport.parkNanos(TimeUnit.MILLISECONDS.toNanos(1))</code> i.e. the overhead of suspending and revoking the thread are pretty much the same on both platforms. But the overhead of <code>LockSupport.parkNanos(TimeUnit.MICROSECONDS.toNanos(100))</code> is significantly lower:</p>\n<pre><code>Linux\nBenchmark                                                 Mode  Cnt        Score      Error  Units\nThreadSleepVsParkNanosBenchmark.parkNanos100us            avgt  100      159.775 ±    0.248  us/op\nThreadSleepVsParkNanosBenchmark.parkNanos500us            avgt  100      612.971 ±    0.578  us/op\nThreadSleepVsParkNanosBenchmark.parkNanos1ms              avgt  100     1103.372 ±    4.685  us/op\nThreadSleepVsParkNanosBenchmark.sleep1ms                  avgt  100     1119.566 ±    0.940  us/op\n\nMacOS\nThreadSleepVsParkNanosBenchmark.parkNanos100us            avgt  100      156,696 ±     6,977  us/op\nThreadSleepVsParkNanosBenchmark.parkNanos500us            avgt  100      752,520 ±    23,203  us/op\nThreadSleepVsParkNanosBenchmark.parkNanos1ms              avgt  100     1508,832 ±     7,580  us/op\nThreadSleepVsParkNanosBenchmark.sleep1ms                  avgt  100     1430,396 ±    32,876  us/op\n</code></pre>\n<p>What is the explanation? As far as it comes from the JavaDoc both <code>Thread.sleep()</code> and <code>LockSupport.parkNanos()</code> put the thread into <code>Thread.State.TIMED_WAITING</code>, so the mechanism under the hood must be the same along with the costs.</p>\n"},{"tags":["java","anylogic"],"comments":[{"owner":{"account_id":2486375,"reputation":11083,"user_id":2164728,"accept_rate":62,"display_name":"Benjamin"},"score":1,"creation_date":1660035916,"post_id":73289135,"comment_id":129431705,"body_markdown":"code looks fine, share how you call this function and when. You probably do not call it at the correct point. Best add screenshots. Also note that you do not account for the case where the value is 5 exactly!","body":"code looks fine, share how you call this function and when. You probably do not call it at the correct point. Best add screenshots. Also note that you do not account for the case where the value is 5 exactly!"},{"owner":{"account_id":25964906,"reputation":17,"user_id":19680968,"display_name":"T.Lenehan"},"score":0,"creation_date":1660036267,"post_id":73289135,"comment_id":129431825,"body_markdown":"Ah, there&#39;s the problem, how do I call a function?","body":"Ah, there&#39;s the problem, how do I call a function?"},{"owner":{"account_id":25964906,"reputation":17,"user_id":19680968,"display_name":"T.Lenehan"},"score":0,"creation_date":1660037155,"post_id":73289135,"comment_id":129432137,"body_markdown":"Thanks for the help, I figured it out","body":"Thanks for the help, I figured it out"},{"owner":{"account_id":2486375,"reputation":11083,"user_id":2164728,"accept_rate":62,"display_name":"Benjamin"},"score":0,"creation_date":1660039693,"post_id":73289135,"comment_id":129433058,"body_markdown":"Please share how so others can benefit from it in the future :)","body":"Please share how so others can benefit from it in the future :)"},{"owner":{"account_id":25964906,"reputation":17,"user_id":19680968,"display_name":"T.Lenehan"},"score":0,"creation_date":1660043973,"post_id":73289135,"comment_id":129434494,"body_markdown":"ill create a simpler example and post soon","body":"ill create a simpler example and post soon"}],"answers":[{"tags":[],"owner":{"account_id":23946271,"reputation":69,"user_id":17938577,"display_name":"DAHUANGGO"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660038042,"creation_date":1660038042,"answer_id":73289670,"question_id":73289135,"body_markdown":"First of all I have to point out that your code must first consider whether there is a **5**, which is missing from your code.\r\nThe second point, I hope you can show your calling process, if the counter does not increment or decrement, do you need to consider whether your method is **the same call**? Or maybe your code **has some threading issues** causing some count errors? Here is my test, I think it should be fine:\r\n\r\n**Method**\r\n\r\n    class Method{\r\n    public boolean countInt(double robot4count){\r\n        if (robot4count&gt;=0&amp;&amp;robot4count&lt;=5){\r\n            return true;\r\n        }else {\r\n            return false;\r\n        }\r\n    }\r\n    }\r\n\r\n**TestCount**\r\n\r\n    @Slf4j\r\n    public class TestCount {\r\n    public static void main(String[] args) {\r\n        AtomicInteger countInt=new AtomicInteger(0);\r\n        Method method = new Method();\r\n        for (int i = 0; i &lt;10 ; i++) {\r\n            new Thread(()-&gt;{\r\n                int now = countInt.incrementAndGet();\r\n                if (method.countInt(now)) {\r\n                    log.debug(&quot;true:{}&quot;,now);\r\n                }else {\r\n                    log.debug(&quot;false:{}&quot;,now);\r\n                }\r\n            },&quot;&quot;+i).start();\r\n        }\r\n\r\n\r\n    }\r\n    }\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;br/&gt;\r\n    &lt;div align=center&gt;&lt;img src=&quot;https://i.stack.imgur.com/QnI0a.png&quot;&gt;&lt;/div&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nHope my test can help you!\r\n\r\n[![the test result][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QnI0a.png","title":"Anylogic- Function not changing boolean variable","body":"<p>First of all I have to point out that your code must first consider whether there is a <strong>5</strong>, which is missing from your code.\nThe second point, I hope you can show your calling process, if the counter does not increment or decrement, do you need to consider whether your method is <strong>the same call</strong>? Or maybe your code <strong>has some threading issues</strong> causing some count errors? Here is my test, I think it should be fine:</p>\n<p><strong>Method</strong></p>\n<pre><code>class Method{\npublic boolean countInt(double robot4count){\n    if (robot4count&gt;=0&amp;&amp;robot4count&lt;=5){\n        return true;\n    }else {\n        return false;\n    }\n}\n}\n</code></pre>\n<p><strong>TestCount</strong></p>\n<pre><code>@Slf4j\npublic class TestCount {\npublic static void main(String[] args) {\n    AtomicInteger countInt=new AtomicInteger(0);\n    Method method = new Method();\n    for (int i = 0; i &lt;10 ; i++) {\n        new Thread(()-&gt;{\n            int now = countInt.incrementAndGet();\n            if (method.countInt(now)) {\n                log.debug(&quot;true:{}&quot;,now);\n            }else {\n                log.debug(&quot;false:{}&quot;,now);\n            }\n        },&quot;&quot;+i).start();\n    }\n\n\n}\n}\n</code></pre>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;br/&gt;\n&lt;div align=center&gt;&lt;img src=\"https://i.stack.imgur.com/QnI0a.png\"&gt;&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>Hope my test can help you!</p>\n<p><a href=\"https://i.stack.imgur.com/QnI0a.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QnI0a.png\" alt=\"the test result\" /></a></p>\n"},{"tags":[],"owner":{"account_id":25964906,"reputation":17,"user_id":19680968,"display_name":"T.Lenehan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660052791,"creation_date":1660052791,"answer_id":73292948,"question_id":73289135,"body_markdown":"For the function to be able to detect if *conveyor1* has 5 agents on it I added \r\n\r\n    robot4count++\r\n\r\nto the &#39;On enter&#39; Action of *convey1*, and \r\n\r\n    robot4count-- \r\n\r\nto the &#39;On exit&#39; Action of *queue1*. \r\n\r\nThe function\r\n\r\n    if(robot4count&lt;5){\r\n    robot4free=true;\r\n    }\r\n    else if(robot4count==5){\r\n    robot4free=false;\r\n    }\r\n    else if(robot4count&gt;5){\r\n    robot4free=false;\r\n    };\r\n\r\n then detects if the variable *robot4count* is five or over, if so it changes the boolean variable *robot4free* to false. \r\n\r\n*selectOutput* has the condition robot4free and this means that it allows items through only when there are less than five agents on *conveyor1*\r\n\r\n*function4* is called On enter to *delay* (which is set to 0.1 seconds) through \r\n\r\n    function4()\r\n\r\n[![The top conveyor only allows 5 agents at a time.][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1Qr3c.png\r\n\r\nI hope this helps anyone who had the same questions as me. \r\n","title":"Anylogic- Function not changing boolean variable","body":"<p>For the function to be able to detect if <em>conveyor1</em> has 5 agents on it I added</p>\n<pre><code>robot4count++\n</code></pre>\n<p>to the 'On enter' Action of <em>convey1</em>, and</p>\n<pre><code>robot4count-- \n</code></pre>\n<p>to the 'On exit' Action of <em>queue1</em>.</p>\n<p>The function</p>\n<pre><code>if(robot4count&lt;5){\nrobot4free=true;\n}\nelse if(robot4count==5){\nrobot4free=false;\n}\nelse if(robot4count&gt;5){\nrobot4free=false;\n};\n</code></pre>\n<p>then detects if the variable <em>robot4count</em> is five or over, if so it changes the boolean variable <em>robot4free</em> to false.</p>\n<p><em>selectOutput</em> has the condition robot4free and this means that it allows items through only when there are less than five agents on <em>conveyor1</em></p>\n<p><em>function4</em> is called On enter to <em>delay</em> (which is set to 0.1 seconds) through</p>\n<pre><code>function4()\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/1Qr3c.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1Qr3c.png\" alt=\"The top conveyor only allows 5 agents at a time.\" /></a></p>\n<p>I hope this helps anyone who had the same questions as me.</p>\n"}],"owner":{"account_id":25964906,"reputation":17,"user_id":19680968,"display_name":"T.Lenehan"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":189,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1660052791,"creation_date":1660035625,"question_id":73289135,"body_markdown":"In Anylogic I have a variable that increases and decreases when agents pass through certain blocks.\r\n \r\nThe first variable &#39;robot4count&#39; is a double, when the double reaches a value above 5 I want another variable &#39;robot4free&#39; to change to false, and return to true when below 5. I would also like the variable to constantly update\r\n\r\nThe function I have written so far :\r\n\r\n        if(robot4count&lt;5){\r\n        robot4free=true;\r\n        }\r\n        else if(robot4count&gt;5){\r\n        robot4free=false;\r\n        };\r\n\r\nUnfortunately the variable robot4free does not change. The functions access is public, set to &#39;Just action (returns nothing), and I do not have any arguments set. The double &#39;robot4count&#39; changes but the boolean &#39;robot4free&#39; doesn&#39;t.\r\n\r\nIs there a problem with my code, or have the properties been set incorrectly? Any help would be great, thanks. (NOTE: I am new to Anylogic and have little experience in java)","title":"Anylogic- Function not changing boolean variable","body":"<p>In Anylogic I have a variable that increases and decreases when agents pass through certain blocks.</p>\n<p>The first variable 'robot4count' is a double, when the double reaches a value above 5 I want another variable 'robot4free' to change to false, and return to true when below 5. I would also like the variable to constantly update</p>\n<p>The function I have written so far :</p>\n<pre><code>    if(robot4count&lt;5){\n    robot4free=true;\n    }\n    else if(robot4count&gt;5){\n    robot4free=false;\n    };\n</code></pre>\n<p>Unfortunately the variable robot4free does not change. The functions access is public, set to 'Just action (returns nothing), and I do not have any arguments set. The double 'robot4count' changes but the boolean 'robot4free' doesn't.</p>\n<p>Is there a problem with my code, or have the properties been set incorrectly? Any help would be great, thanks. (NOTE: I am new to Anylogic and have little experience in java)</p>\n"},{"tags":["java","spring-boot","oop","entity-relationship"],"answers":[{"tags":[],"owner":{"account_id":20867359,"reputation":101,"user_id":15328090,"display_name":"Igor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660052583,"creation_date":1660051308,"answer_id":73292597,"question_id":73292284,"body_markdown":"Answering your first question, yes. Here&#39;s an [article][1] on @ManyToMany in Jpa. There you can find different ways to describe a many-to-many relationship to between your entities. In short, here&#39;s the approximate code:\r\n\r\nIn **Product**\r\n\r\n    @ManyToMany\r\n    @JoinTable(\r\n    // the name of the intermediate table for many-to-many\r\n    name = &quot;product_to_tag&quot;,\r\n    // the foreign key column in the intermediate table, that references \r\n    // current entity(product)\r\n    joinColumns = @JoinColumn(name = &quot;product_id&quot;),\r\n    // the foreign key column in the intermediate table, that references the \r\n    // other entity(tag)\r\n    inverseJoinColumns = @JoinColumn(name = &quot;tag_id&quot;))\r\n    private List&lt;Tag&gt; tags;\r\n\r\nIn **Tag**\r\n\r\n    @ManyToMany(mappedBy = &quot;tags&quot;)\r\n    private List&lt;Product&gt; products;\r\n\r\nAnswering your second question, there&#39;s a similar [thread][2] which will help you. Here&#39;s the answer in short as well:\r\n\r\n    public interface TagRepository extends JpaRepository&lt;Tag, Long&gt; {\r\n        @Query(&quot;select t from Tag t \r\n                join fetch t.products p \r\n                where p.id = :productId&quot;)\r\n        List&lt;Tag&gt; getTags(@Param(&quot;productId&quot;) Long productId);\r\n    }\r\n\r\n\r\n  [1]: https://www.baeldung.com/jpa-many-to-many\r\n  [2]: https://stackoverflow.com/questions/50452929/spring-data-jpa-many-to-many-query","title":"Relationship between Product and Tag and its custom query","body":"<p>Answering your first question, yes. Here's an <a href=\"https://www.baeldung.com/jpa-many-to-many\" rel=\"nofollow noreferrer\">article</a> on @ManyToMany in Jpa. There you can find different ways to describe a many-to-many relationship to between your entities. In short, here's the approximate code:</p>\n<p>In <strong>Product</strong></p>\n<pre><code>@ManyToMany\n@JoinTable(\n// the name of the intermediate table for many-to-many\nname = &quot;product_to_tag&quot;,\n// the foreign key column in the intermediate table, that references \n// current entity(product)\njoinColumns = @JoinColumn(name = &quot;product_id&quot;),\n// the foreign key column in the intermediate table, that references the \n// other entity(tag)\ninverseJoinColumns = @JoinColumn(name = &quot;tag_id&quot;))\nprivate List&lt;Tag&gt; tags;\n</code></pre>\n<p>In <strong>Tag</strong></p>\n<pre><code>@ManyToMany(mappedBy = &quot;tags&quot;)\nprivate List&lt;Product&gt; products;\n</code></pre>\n<p>Answering your second question, there's a similar <a href=\"https://stackoverflow.com/questions/50452929/spring-data-jpa-many-to-many-query\">thread</a> which will help you. Here's the answer in short as well:</p>\n<pre><code>public interface TagRepository extends JpaRepository&lt;Tag, Long&gt; {\n    @Query(&quot;select t from Tag t \n            join fetch t.products p \n            where p.id = :productId&quot;)\n    List&lt;Tag&gt; getTags(@Param(&quot;productId&quot;) Long productId);\n}\n</code></pre>\n"}],"owner":{"account_id":23727935,"reputation":117,"user_id":17747601,"display_name":"m_novak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660052583,"creation_date":1660050081,"question_id":73292284,"body_markdown":"I am trying to create a relationship between **Product** and **Tag**. Each Product can have **multiple** Tags and each Tag can be **assigned to multiple** Products. For example, a red t-shirt can have a &quot;T-shirt&quot; tag and a &quot;Red color&quot; tag, but likewise a white t-shirt can also have a &quot;T-shirt&quot; tag.\r\n\r\n**Two questions:**\r\n\r\n**First question:** Is it correct to use ManyToMany for this relationship?\r\n\r\n**Second question:** How can I create a custom query if I want to get all the Tags of a particular product?\r\nFor example:\r\n*GET /product/{productID}/tags* -&gt; returns all tags of a product by its ID.\r\n\r\n\r\n    public class Product {\r\n    \t@Id\r\n    \t@GeneratedValue(strategy = GenerationType.AUTO)\r\n    \tprivate Long id;\r\n    \tprivate String productName;\r\n    \t@ManyToMany\r\n    \tprivate List&lt;Tag&gt; tag;\r\n    }\r\n    \r\n    public class Tag{\r\n    \t@Id\r\n    \t@GeneratedValue(strategy = GenerationType.AUTO)\r\n    \tprivate Long id;\r\n    \tprivate String tagName;\r\n    \t@ManyToMany\r\n    \tprivate List&lt;Product&gt; product;\r\n    }\r\n    \r\n    public interface ProductRepository extends JpaRepository&lt;Product, Long&gt;{\r\n    \t//There should be the custom query that returns all Tags that are assigned to specific product (by product ID)\r\n    }","title":"Relationship between Product and Tag and its custom query","body":"<p>I am trying to create a relationship between <strong>Product</strong> and <strong>Tag</strong>. Each Product can have <strong>multiple</strong> Tags and each Tag can be <strong>assigned to multiple</strong> Products. For example, a red t-shirt can have a &quot;T-shirt&quot; tag and a &quot;Red color&quot; tag, but likewise a white t-shirt can also have a &quot;T-shirt&quot; tag.</p>\n<p><strong>Two questions:</strong></p>\n<p><strong>First question:</strong> Is it correct to use ManyToMany for this relationship?</p>\n<p><strong>Second question:</strong> How can I create a custom query if I want to get all the Tags of a particular product?\nFor example:\n<em>GET /product/{productID}/tags</em> -&gt; returns all tags of a product by its ID.</p>\n<pre><code>public class Product {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n    private String productName;\n    @ManyToMany\n    private List&lt;Tag&gt; tag;\n}\n\npublic class Tag{\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n    private String tagName;\n    @ManyToMany\n    private List&lt;Product&gt; product;\n}\n\npublic interface ProductRepository extends JpaRepository&lt;Product, Long&gt;{\n    //There should be the custom query that returns all Tags that are assigned to specific product (by product ID)\n}\n</code></pre>\n"},{"tags":["java","jax-rs","quarkus","resteasy","server-sent-events"],"comments":[{"owner":{"account_id":2145690,"reputation":638,"user_id":1903347,"accept_rate":75,"display_name":"Rainer Jung"},"score":0,"creation_date":1658859610,"post_id":73112872,"comment_id":129155384,"body_markdown":"I found a [ServerSentEvent](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/codec/ServerSentEvent.html) implementation for Spring, but I&#39;d like to go with Quarkus and not Spring.","body":"I found a <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/codec/ServerSentEvent.html\" rel=\"nofollow noreferrer\">ServerSentEvent</a> implementation for Spring, but I&#39;d like to go with Quarkus and not Spring."}],"owner":{"account_id":2145690,"reputation":638,"user_id":1903347,"accept_rate":75,"display_name":"Rainer Jung"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":389,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1660052462,"creation_date":1658768486,"question_id":73112872,"body_markdown":"I would like to send comments from a [quarkus][1] server to a [server-sent event][2] client as a keepalive.  \r\nThe specification of [SSE][2] (Server Side Event) defines an event to consist of any combination of `comment` or `field`.  \r\nI don&#39;t see any way to just send a comment. There&#39;s a [`OutboundSseEventImpl`][4] available, in the current version of the `resteasy-reactive` dependency, but if I send one with only the `comment` property given, I get a `data`-field with a big JSON containing the given `comment` as a key.\r\n\r\nWhat I want to send out is something like this:\r\n\r\n - Avery 30 seconds (or perhaps 60 seconds) I sent our a `keepalive` comment.\r\n - When ever there&#39;s new data available, it&#39;s sent directly.\r\n\r\nIt could look like this:\r\n\r\n    data: {&quot;some&quot;: &quot;data&quot;}\r\n\r\n    data: {&quot;other&quot;: &quot;data&quot;}\r\n\r\n    :keepalive\r\n\r\n    :keepalive\r\n\r\nIs there a way to sent out comments?\r\n\r\nIt looks to me, like this is not (yet?) implemented. Perhaps this is also not a [Quarkus][1] question, but a [RESTEasy][5]- or a [JAX-RS][6]-one, as those libraries are used by [Quarkus][1].\r\n\r\n  [1]: https://quarkus.io/\r\n  [2]: https://quarkus.io/guides/resteasy-reactive#server-sent-event-sse-support\r\n  [3]: https://html.spec.whatwg.org/multipage/server-sent-events.html#server-sent-events\r\n  [4]: https://github.com/quarkusio/quarkus/blob/2.11.0.Final/independent-projects/resteasy-reactive/server/runtime/src/main/java/org/jboss/resteasy/reactive/server/jaxrs/OutboundSseEventImpl.java\r\n  [5]: https://resteasy.dev/\r\n  [6]: https://www.jcp.org/en/jsr/detail?id=311","title":"Server Sent Event Comment with Quarkus/RestEasy/javax-ws","body":"<p>I would like to send comments from a <a href=\"https://quarkus.io/\" rel=\"nofollow noreferrer\">quarkus</a> server to a <a href=\"https://quarkus.io/guides/resteasy-reactive#server-sent-event-sse-support\" rel=\"nofollow noreferrer\">server-sent event</a> client as a keepalive.<br />\nThe specification of <a href=\"https://quarkus.io/guides/resteasy-reactive#server-sent-event-sse-support\" rel=\"nofollow noreferrer\">SSE</a> (Server Side Event) defines an event to consist of any combination of <code>comment</code> or <code>field</code>.<br />\nI don't see any way to just send a comment. There's a <a href=\"https://github.com/quarkusio/quarkus/blob/2.11.0.Final/independent-projects/resteasy-reactive/server/runtime/src/main/java/org/jboss/resteasy/reactive/server/jaxrs/OutboundSseEventImpl.java\" rel=\"nofollow noreferrer\"><code>OutboundSseEventImpl</code></a> available, in the current version of the <code>resteasy-reactive</code> dependency, but if I send one with only the <code>comment</code> property given, I get a <code>data</code>-field with a big JSON containing the given <code>comment</code> as a key.</p>\n<p>What I want to send out is something like this:</p>\n<ul>\n<li>Avery 30 seconds (or perhaps 60 seconds) I sent our a <code>keepalive</code> comment.</li>\n<li>When ever there's new data available, it's sent directly.</li>\n</ul>\n<p>It could look like this:</p>\n<pre><code>data: {&quot;some&quot;: &quot;data&quot;}\n\ndata: {&quot;other&quot;: &quot;data&quot;}\n\n:keepalive\n\n:keepalive\n</code></pre>\n<p>Is there a way to sent out comments?</p>\n<p>It looks to me, like this is not (yet?) implemented. Perhaps this is also not a <a href=\"https://quarkus.io/\" rel=\"nofollow noreferrer\">Quarkus</a> question, but a <a href=\"https://resteasy.dev/\" rel=\"nofollow noreferrer\">RESTEasy</a>- or a <a href=\"https://www.jcp.org/en/jsr/detail?id=311\" rel=\"nofollow noreferrer\">JAX-RS</a>-one, as those libraries are used by <a href=\"https://quarkus.io/\" rel=\"nofollow noreferrer\">Quarkus</a>.</p>\n"},{"tags":["java","spring","maven","spring-boot","weblogic12c"],"comments":[{"owner":{"account_id":1763573,"reputation":6131,"user_id":1610005,"display_name":"kj007"},"score":0,"creation_date":1538627309,"post_id":52638795,"comment_id":92210603,"body_markdown":"Try to exclude tomcat from web dependency and as you are deploying on webkogic so I think also need to remove tomcat dependency","body":"Try to exclude tomcat from web dependency and as you are deploying on webkogic so I think also need to remove tomcat dependency"},{"owner":{"account_id":14378703,"reputation":171,"user_id":10386528,"display_name":"kuti"},"score":0,"creation_date":1538627455,"post_id":52638795,"comment_id":92210643,"body_markdown":"I’ve given scope as “provided” which tells not to include tomcat related jars. I don’t think so that is the issue","body":"I’ve given scope as “provided” which tells not to include tomcat related jars. I don’t think so that is the issue"},{"owner":{"account_id":1763573,"reputation":6131,"user_id":1610005,"display_name":"kj007"},"score":0,"creation_date":1538627561,"post_id":52638795,"comment_id":92210671,"body_markdown":"Tomcat has to excluded I believe in web dependency otherwise it will be conflict with tomcat provided scope","body":"Tomcat has to excluded I believe in web dependency otherwise it will be conflict with tomcat provided scope"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1538632126,"post_id":52638795,"comment_id":92211991,"body_markdown":"Remove the `dispatcher-servlet.xml`. Ditch your `ServletInitializer` and simply let the `DemoSpringBootApplication` extend `SpringBootServletInitializer`. You also might want to check your Weblogic logs for more information/errors.","body":"Remove the <code>dispatcher-servlet.xml</code>. Ditch your <code>ServletInitializer</code> and simply let the <code>DemoSpringBootApplication</code> extend <code>SpringBootServletInitializer</code>. You also might want to check your Weblogic logs for more information/errors."},{"owner":{"account_id":11329927,"reputation":1855,"user_id":8307755,"display_name":"Yogi"},"score":0,"creation_date":1538641650,"post_id":52638795,"comment_id":92216734,"body_markdown":"You also need to mention Start class in property, like &lt;start-class&gt;com.springboot.DemoSpringBootApplication&lt;/start-class&gt; and mentioned packaging as &#39;war&#39; in pom.xml","body":"You also need to mention Start class in property, like &lt;start-class&gt;com.springboot.DemoSpringBootApplication&lt;/start&zwnj;&#8203;-class&gt; and mentioned packaging as &#39;war&#39; in pom.xml"},{"owner":{"account_id":14378703,"reputation":171,"user_id":10386528,"display_name":"kuti"},"score":0,"creation_date":1538660596,"post_id":52638795,"comment_id":92228308,"body_markdown":"Thanks Guys. Please give me some time to implement the changes and will get back to you.","body":"Thanks Guys. Please give me some time to implement the changes and will get back to you."},{"owner":{"account_id":14378703,"reputation":171,"user_id":10386528,"display_name":"kuti"},"score":0,"creation_date":1538664918,"post_id":52638795,"comment_id":92231338,"body_markdown":"Still getting the same issue &gt;&gt; Have implemented the the following changes &gt;&gt;  `1. removed the &quot;dispatcher-servlet.xml&quot; 2. Removed the &quot;ServletInitializer.java&quot; and modified the &quot;DemoSpringBootApplication.java&quot; 3. Added the &quot;&lt;start-class&gt;com.springboot.DemoSpringBootApplication&lt;/start-class&gt; property in the pom.xml 4. removed the &quot;tomcat&quot; related depedency&quot; `","body":"Still getting the same issue &gt;&gt; Have implemented the the following changes &gt;&gt;  <code>1. removed the &quot;dispatcher-servlet.xml&quot; 2. Removed the &quot;ServletInitializer.java&quot; and modified the &quot;DemoSpringBootApplication.java&quot; 3. Added the &quot;&lt;start-class&gt;com.springboot.DemoSpringBootApplication&lt;&#47;star&zwnj;&#8203;t-class&gt; property in the pom.xml 4. removed the &quot;tomcat&quot; related depedency&quot; </code>"}],"answers":[{"tags":[],"owner":{"account_id":14378703,"reputation":171,"user_id":10386528,"display_name":"kuti"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1538710952,"creation_date":1538710952,"answer_id":52658052,"question_id":52638795,"body_markdown":"The issue is resolved. After adding the below property in the pom.xml :\r\n\r\n     &lt;properties&gt;\r\n      ...\r\n      &lt;log4j2.version&gt;2.8.2&lt;/log4j2.version&gt;\r\n      ...\r\n   &lt;/properties&gt;\r\n\r\nNow able to deploy to weblogic 12c.\r\n\r\n","title":"War file generated out of Spring Boot is not getting deployed to Weblogic 12c","body":"<p>The issue is resolved. After adding the below property in the pom.xml :</p>\n\n<pre><code> &lt;properties&gt;\n  ...\n  &lt;log4j2.version&gt;2.8.2&lt;/log4j2.version&gt;\n  ...\n</code></pre>\n\n<p></p>\n\n<p>Now able to deploy to weblogic 12c.</p>\n"},{"tags":[],"owner":{"account_id":25699652,"reputation":1,"user_id":19459874,"display_name":"Shinjan Khastagir"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660052308,"creation_date":1660052182,"answer_id":73292803,"question_id":52638795,"body_markdown":"It&#39;s late but to those who need it,\r\nThis issue might happen due to different version of java check your java_home before you compile your code, in my case i have changed it to 11-&gt;1.8(because in my project we are using 1.8) and it works fine for me,before changing anything you can use war decompiler(jd) and check your manifest file&#39;s build jdk(if you use manifest file then you must, incase you don&#39;t need manifest file you can delete it so that you don&#39;t need to change any java_home, i hope it will work too). I think weblogic 12c complains if jdk is 1.8+ btw i am not sure about it. best way to solve trial and error.","title":"War file generated out of Spring Boot is not getting deployed to Weblogic 12c","body":"<p>It's late but to those who need it,\nThis issue might happen due to different version of java check your java_home before you compile your code, in my case i have changed it to 11-&gt;1.8(because in my project we are using 1.8) and it works fine for me,before changing anything you can use war decompiler(jd) and check your manifest file's build jdk(if you use manifest file then you must, incase you don't need manifest file you can delete it so that you don't need to change any java_home, i hope it will work too). I think weblogic 12c complains if jdk is 1.8+ btw i am not sure about it. best way to solve trial and error.</p>\n"}],"owner":{"account_id":14378703,"reputation":171,"user_id":10386528,"display_name":"kuti"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3070,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1660052308,"creation_date":1538625542,"question_id":52638795,"body_markdown":"I&#39;m using Spring Boot(2.0.5.RELEASE) to build a war file to deploy into weblogic 12c. I&#39;m following the below tutorial to do that :\r\n\r\nhttps://o7planning.org/en/11901/deploying-spring-boot-application-on-oracle-weblogic-server\r\n\r\nBut not able deploy in weblogic (through weblogic console), and getting below errors:\r\n\r\n    Message icon - Error Unable to access the selected application.\r\n    Message icon - Error java.io.IOException\r\n    Message icon - Error weblogic.utils.compiler.ToolFailureException\r\n\r\nAnd also observed the below error in the admin server log :\r\n\r\n    ####&lt;Oct 3, 2018 11:33:46 PM EDT&gt; &lt;Error&gt; &lt;J2EE&gt; &lt;wloki&gt; &lt;AdminServer&gt; &lt;[ACTIVE] ExecuteThread: &#39;5&#39; for queue: &#39;weblogic.kernel.Default (self-tuning)&#39;&gt; &lt;weblogic&gt; &lt;&gt; &lt;&gt; &lt;1538624026936&gt; &lt;BEA-160228&gt; &lt;AppMerge failed to merge your application. If you are running AppMerge on the command-line, merge again with the -verbose option for more details. See the error message(s) below.&gt;\r\n\r\nCould anyone help me here as where I&#39;m going wrong?\r\n\r\nMy pom.xml :\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n\t    &lt;groupId&gt;com.springBoot&lt;/groupId&gt;\r\n\t    &lt;artifactId&gt;DemoSpringBoot&lt;/artifactId&gt;\r\n\t    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;packaging&gt;war&lt;/packaging&gt;\r\n\r\n    \t&lt;name&gt;DemoSpringBoot&lt;/name&gt;\r\n    \t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\r\n    \t&lt;parent&gt;\r\n\t\t    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;2.0.5.RELEASE&lt;/version&gt;\r\n\t\t    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t    &lt;/parent&gt;\r\n\r\n\t    &lt;properties&gt;\r\n\t\t    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t\t    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n\t\t    &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\t    &lt;/properties&gt;\r\n\r\n\t    &lt;dependencies&gt;\r\n\t\t    &lt;dependency&gt;\r\n\t\t\t    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t    &lt;/dependency&gt;\r\n\r\n\t\t    &lt;dependency&gt;\r\n\t\t\t    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t    &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n\t\t\t    &lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t    &lt;/dependency&gt;\r\n\t\t    &lt;dependency&gt;\r\n\t\t\t    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t    &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t    &lt;scope&gt;test&lt;/scope&gt;\r\n\t\t    &lt;/dependency&gt;\r\n\t    &lt;/dependencies&gt;\r\n\r\n\t    &lt;build&gt;\r\n\t\t    &lt;plugins&gt;\r\n\t\t\t    &lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n\r\n    &lt;/project&gt;\r\n\r\n\r\n------------\r\nweblogic.xml :\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;wls:weblogic-web-app\r\n\txmlns:wls=&quot;http://xmlns.oracle.com/weblogic/weblogic-web-app&quot;\r\n\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee\r\n\t\thttp://java.sun.com/xml/ns/javaee/ejb-jar_3_0.xsd\r\n\t\thttp://xmlns.oracle.com/weblogic/weblogic-web-app\r\n\t\thttp://xmlns.oracle.com/weblogic/weblogic-web-app/1.4/weblogic-web- \r\n     app.xsd&quot;&gt;\r\n\t&lt;wls:context-root&gt;/myweb&lt;/wls:context-root&gt;\r\n\t&lt;wls:container-descriptor&gt;\r\n\t\t&lt;wls:prefer-application-packages&gt;\r\n\t\t\t&lt;wls:package-name&gt;org.slf4j&lt;/wls:package-name&gt;\r\n\t\t\t &lt;wls:package-name&gt;org.springframework.*&lt;/wls:package-name&gt;\r\n\t\t&lt;/wls:prefer-application-packages&gt;\r\n\t&lt;/wls:container-descriptor&gt;\r\n    &lt;/wls:weblogic-web-app&gt;\r\n\r\n------------\r\ndispatcherServlet-servlet.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n       &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\r\n       http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;\r\n     \r\n      &lt;/beans&gt;\r\n\r\n\r\n---------------\r\nServletInitializer.java\r\n\r\n    package com.springboot;\r\n\r\n    import org.springframework.boot.builder.SpringApplicationBuilder;\r\n    import org.springframework.boot.web.servlet.support.SpringBootServletInitializer;\r\n    import org.springframework.web.WebApplicationInitializer;\r\n\r\n    public class ServletInitializer extends SpringBootServletInitializer \r\n                                 implements WebApplicationInitializer {\r\n\r\n\t    @Override\r\n        protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\r\n            return application.sources(DemoSpringBootApplication.class);\r\n        }\r\n\r\n    }\r\n\r\n-----------------\r\n\r\nDemoSpringBootApplication.java\r\n\r\n    package com.springboot;\r\n\r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n    @SpringBootApplication\r\n    public class DemoSpringBootApplication {\r\n\r\n\t    public static void main(String[] args) {\r\n\t\t    SpringApplication.run(DemoSpringBootApplication.class, args);\r\n        }\r\n    }\r\n\r\n\r\n-----------------\r\n\r\nPlease let me know if I&#39;m doing anything wrong as I&#39;m not able to progress on this.\r\n\r\nThanks.","title":"War file generated out of Spring Boot is not getting deployed to Weblogic 12c","body":"<p>I'm using Spring Boot(2.0.5.RELEASE) to build a war file to deploy into weblogic 12c. I'm following the below tutorial to do that :</p>\n\n<p><a href=\"https://o7planning.org/en/11901/deploying-spring-boot-application-on-oracle-weblogic-server\" rel=\"nofollow noreferrer\">https://o7planning.org/en/11901/deploying-spring-boot-application-on-oracle-weblogic-server</a></p>\n\n<p>But not able deploy in weblogic (through weblogic console), and getting below errors:</p>\n\n<pre><code>Message icon - Error Unable to access the selected application.\nMessage icon - Error java.io.IOException\nMessage icon - Error weblogic.utils.compiler.ToolFailureException\n</code></pre>\n\n<p>And also observed the below error in the admin server log :</p>\n\n<pre><code>####&lt;Oct 3, 2018 11:33:46 PM EDT&gt; &lt;Error&gt; &lt;J2EE&gt; &lt;wloki&gt; &lt;AdminServer&gt; &lt;[ACTIVE] ExecuteThread: '5' for queue: 'weblogic.kernel.Default (self-tuning)'&gt; &lt;weblogic&gt; &lt;&gt; &lt;&gt; &lt;1538624026936&gt; &lt;BEA-160228&gt; &lt;AppMerge failed to merge your application. If you are running AppMerge on the command-line, merge again with the -verbose option for more details. See the error message(s) below.&gt;\n</code></pre>\n\n<p>Could anyone help me here as where I'm going wrong?</p>\n\n<p>My pom.xml :</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.springBoot&lt;/groupId&gt;\n    &lt;artifactId&gt;DemoSpringBoot&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n\n    &lt;name&gt;DemoSpringBoot&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.0.5.RELEASE&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n\n<hr>\n\n<p>weblogic.xml :</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;wls:weblogic-web-app\nxmlns:wls=\"http://xmlns.oracle.com/weblogic/weblogic-web-app\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee\n    http://java.sun.com/xml/ns/javaee/ejb-jar_3_0.xsd\n    http://xmlns.oracle.com/weblogic/weblogic-web-app\n    http://xmlns.oracle.com/weblogic/weblogic-web-app/1.4/weblogic-web- \n app.xsd\"&gt;\n&lt;wls:context-root&gt;/myweb&lt;/wls:context-root&gt;\n&lt;wls:container-descriptor&gt;\n    &lt;wls:prefer-application-packages&gt;\n        &lt;wls:package-name&gt;org.slf4j&lt;/wls:package-name&gt;\n         &lt;wls:package-name&gt;org.springframework.*&lt;/wls:package-name&gt;\n    &lt;/wls:prefer-application-packages&gt;\n&lt;/wls:container-descriptor&gt;\n&lt;/wls:weblogic-web-app&gt;\n</code></pre>\n\n<hr>\n\n<p>dispatcherServlet-servlet.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n   &lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n   xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n   xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n   http://www.springframework.org/schema/beans/spring-beans.xsd\"&gt;\n\n  &lt;/beans&gt;\n</code></pre>\n\n<hr>\n\n<p>ServletInitializer.java</p>\n\n<pre><code>package com.springboot;\n\nimport org.springframework.boot.builder.SpringApplicationBuilder;\nimport org.springframework.boot.web.servlet.support.SpringBootServletInitializer;\nimport org.springframework.web.WebApplicationInitializer;\n\npublic class ServletInitializer extends SpringBootServletInitializer \n                             implements WebApplicationInitializer {\n\n    @Override\n    protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\n        return application.sources(DemoSpringBootApplication.class);\n    }\n\n}\n</code></pre>\n\n<hr>\n\n<p>DemoSpringBootApplication.java</p>\n\n<pre><code>package com.springboot;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class DemoSpringBootApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(DemoSpringBootApplication.class, args);\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>Please let me know if I'm doing anything wrong as I'm not able to progress on this.</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","null","java-stream","option-type"],"comments":[{"owner":{"account_id":52616,"reputation":1042915,"user_id":157247,"accept_rate":91,"display_name":"T.J. Crowder"},"score":1,"creation_date":1660049953,"post_id":73292224,"comment_id":129436792,"body_markdown":"I&#39;m not up on `Optional` idioms so won&#39;t post an *answer*, but if you&#39;re looking for a single statement rather than an `if`/`else`, you don&#39;t need `Optional` for that: `userData.setFees(userData.getSubscription() == null ? Enum.ZERO : Enum.HUNDRED);` Easier to debug, though, with the `if`/`else` or at least two statements: `Enum fees = userData.getSubscription() == null ? Enum.ZERO : Enum.HUNDRED; userData.setFees(fees);`","body":"I&#39;m not up on <code>Optional</code> idioms so won&#39;t post an <i>answer</i>, but if you&#39;re looking for a single statement rather than an <code>if</code>/<code>else</code>, you don&#39;t need <code>Optional</code> for that: <code>userData.setFees(userData.getSubscription() == null ? Enum.ZERO : Enum.HUNDRED);</code> Easier to debug, though, with the <code>if</code>/<code>else</code> or at least two statements: <code>Enum fees = userData.getSubscription() == null ? Enum.ZERO : Enum.HUNDRED; userData.setFees(fees);</code>"}],"answers":[{"tags":[],"owner":{"account_id":3082985,"reputation":54173,"user_id":2610810,"display_name":"Caleth"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660050440,"creation_date":1660050440,"answer_id":73292374,"question_id":73292224,"body_markdown":"You could do something like\r\n\r\n    Optional::ofNullable(userData.getSubscription()).map(any -&gt; Enum.HUNDRED).orElse(Enum.ZERO);\r\n\r\nHowever I don&#39;t see much benefit to that over @T.J. Crowder&#39;s suggestion from the comments\r\n\r\n    userData.getSubscription() == null ? Enum.ZERO : Enum.HUNDRED","title":"Use Optional instead of null check","body":"<p>You could do something like</p>\n<pre><code>Optional::ofNullable(userData.getSubscription()).map(any -&gt; Enum.HUNDRED).orElse(Enum.ZERO);\n</code></pre>\n<p>However I don't see much benefit to that over @T.J. Crowder's suggestion from the comments</p>\n<pre><code>userData.getSubscription() == null ? Enum.ZERO : Enum.HUNDRED\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26018942,"reputation":16,"user_id":19726901,"display_name":"Dominik Pawłowski"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660051242,"creation_date":1660051242,"answer_id":73292579,"question_id":73292224,"body_markdown":"Maybe you want:\r\n`userData.setFees(Objects.isNull(userData.getSubscription()) ? Enum.ZERO : Enum.HUNDRED)`","title":"Use Optional instead of null check","body":"<p>Maybe you want:\n<code>userData.setFees(Objects.isNull(userData.getSubscription()) ? Enum.ZERO : Enum.HUNDRED)</code></p>\n"},{"tags":[],"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660052284,"creation_date":1660052284,"answer_id":73292833,"question_id":73292224,"body_markdown":"The main use of `Optional` is to prevent you from forgetting to check for `null`. Thus, it would only be useful if the `Optional` type was returned from `getSubscription()`. Then you could do:\r\n\r\n    userData.setFees(userData.getSubscription().map(x -&gt; Enum.HUNDRED).orElse(Enum.ZERO));\r\n\r\nBut if you can&#39;t or don&#39;t want to change `getSubscription()` to return `Optional`, then there is no point in using `Optional` here. Just do this:\r\n\r\n    userData.setFees(userData.getSubscription() == NULL ? Enum.ZERO : Enum.HUNDRED);\r\n\r\nBy the way, if `Enum.ZERO` and `Enum.HUNDRED` are just names representing 0 and 100, then that&#39;s not a good idea. The words &quot;ZERO&quot; and &quot;HUNDRED&quot; are just as much a &quot;magic number&quot; as the numbers 0 and 100 themselves. You should name your enums something descriptive like &quot;FREE_OF_CHARGE&quot; and &quot;FULL_PRICE&quot;.","title":"Use Optional instead of null check","body":"<p>The main use of <code>Optional</code> is to prevent you from forgetting to check for <code>null</code>. Thus, it would only be useful if the <code>Optional</code> type was returned from <code>getSubscription()</code>. Then you could do:</p>\n<pre><code>userData.setFees(userData.getSubscription().map(x -&gt; Enum.HUNDRED).orElse(Enum.ZERO));\n</code></pre>\n<p>But if you can't or don't want to change <code>getSubscription()</code> to return <code>Optional</code>, then there is no point in using <code>Optional</code> here. Just do this:</p>\n<pre><code>userData.setFees(userData.getSubscription() == NULL ? Enum.ZERO : Enum.HUNDRED);\n</code></pre>\n<p>By the way, if <code>Enum.ZERO</code> and <code>Enum.HUNDRED</code> are just names representing 0 and 100, then that's not a good idea. The words &quot;ZERO&quot; and &quot;HUNDRED&quot; are just as much a &quot;magic number&quot; as the numbers 0 and 100 themselves. You should name your enums something descriptive like &quot;FREE_OF_CHARGE&quot; and &quot;FULL_PRICE&quot;.</p>\n"}],"owner":{"account_id":17274668,"reputation":3,"user_id":12509544,"display_name":"Vashist Raghav Sayani"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":480,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73292579,"answer_count":3,"score":0,"last_activity_date":1660052284,"creation_date":1660049780,"question_id":73292224,"body_markdown":"I have to check if an attribute of an object is null or not. Depending on the above check I have to update another attribute in the same object. Is it possible to use Optional class and its methods to replace null checks?\r\n\r\n````\r\nif(userData.getSubscription()==null){\r\n    userData.setFees(Enum.ZERO);\r\n} else {\r\n    userData.setFees(Enum.HUNDRED);\r\n}\r\n````\r\nLet me know if this can be replaced with a single line using Java 8 Optional class or other features.","title":"Use Optional instead of null check","body":"<p>I have to check if an attribute of an object is null or not. Depending on the above check I have to update another attribute in the same object. Is it possible to use Optional class and its methods to replace null checks?</p>\n<pre><code>if(userData.getSubscription()==null){\n    userData.setFees(Enum.ZERO);\n} else {\n    userData.setFees(Enum.HUNDRED);\n}\n</code></pre>\n<p>Let me know if this can be replaced with a single line using Java 8 Optional class or other features.</p>\n"},{"tags":["java","gradle","intellij-idea"],"answers":[{"tags":[],"owner":{"account_id":11619749,"reputation":171,"user_id":8511385,"display_name":"Deepesh Dagar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660052003,"creation_date":1660052003,"answer_id":73292762,"question_id":73291694,"body_markdown":"Where LineLength goes in check style file depends on the Checkstyle version. Checkstyle 8.24 and higher: directly under Checker; Checkstyle &lt; 8.24: under TreeWalker.\r\n\r\nAs per build.gradle file, the checkstyle version used is 7.1.1 \r\n\r\n    checkstyle {\r\n            configFile rootProject.file(&#39;checkstyle.xml&#39;)\r\n            toolVersion &#39;7.1.1&#39;\r\n        }","title":"gradle build with checkstyle &quot;Unable to create a Checker&quot; error","body":"<p>Where LineLength goes in check style file depends on the Checkstyle version. Checkstyle 8.24 and higher: directly under Checker; Checkstyle &lt; 8.24: under TreeWalker.</p>\n<p>As per build.gradle file, the checkstyle version used is 7.1.1</p>\n<pre><code>checkstyle {\n        configFile rootProject.file('checkstyle.xml')\n        toolVersion '7.1.1'\n    }\n</code></pre>\n"}],"owner":{"account_id":10560713,"reputation":97,"user_id":7780575,"display_name":"Azmat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":717,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73292762,"answer_count":1,"score":1,"last_activity_date":1660052003,"creation_date":1660047540,"question_id":73291694,"body_markdown":"I&#39;m working with a `gradle` Java project where another user has enabled the `checkstyle` plugin. Unfortunately, this addition breaks our ability to build from the CLI (a&#39;la `gradle build`). For some reason, however, we are still able to build internally in IntelliJ (2021.2 Community Ed).\r\n\r\nI&#39;m building with `gradle` version 4.10.2. Below is a snippet from my `build.gradle` where we enable `checkstyle`.\r\n\r\n```\r\nsubprojects { project -&gt;\r\n    apply plugin: &#39;java&#39;\r\n    apply plugin: &#39;groovy&#39;\r\n    apply plugin: &#39;checkstyle&#39;\r\n\r\n...\r\n\r\n    checkstyle {\r\n        configFile rootProject.file(&#39;checkstyle.xml&#39;)\r\n        toolVersion &#39;7.1.1&#39;\r\n    }\r\n...\r\n```\r\n\r\nI&#39;ve checked the compatibility guide [here](https://checkstyle-addons.thomasjensen.com/checkstyle-compatibility-matrix.html?hl=L[g];L8.12;L6.19;L5.9;L5.7-L5.5). According to this, I should be able to use this version.\r\n\r\nUnfortunately though, my build fails when I try to `gradle build` with the following error:\r\n```\r\n&gt; Task :cache:checkstyleMain FAILED\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nExecution failed for task &#39;:cache:checkstyleMain&#39;.\r\n&gt; Unable to create a Checker: configLocation {&lt;REDACTED&gt;}, classpath {&lt;REDACTED&gt;}.\r\n```\r\n\r\nWithin my `checkstyle.xml`, I have the following structure:\r\n```\r\n&lt;module name=&quot;Checker&quot;&gt;\r\n\r\n    &lt;module name=&quot;FileTabCharacter&quot;&gt;\r\n        &lt;property name=&quot;eachLine&quot; value=&quot;true&quot;/&gt;\r\n    &lt;/module&gt;\r\n    &lt;module name=&quot;LineLength&quot;&gt;\r\n        &lt;property name=&quot;max&quot; value=&quot;150&quot;/&gt;\r\n        &lt;property name=&quot;ignorePattern&quot; value=&quot;^package.*|^import.*|a href|href|http://|https://|ftp://&quot;/&gt;\r\n    &lt;/module&gt;\r\n\r\n    &lt;module name=&quot;TreeWalker&quot;&gt;\r\n...\r\n```\r\n\r\nThe strange thing is that when I move the `LineLength` block under `TreeWalker` as the parent, the error goes away and `checkstyle` appears to work fine from both CLI and IDE.  I got the idea from [this post](https://stackoverflow.com/a/60549449/7780575), however this change in `checkstyle` behavior should have been introduced into 8.24 and should not be required for the version I&#39;m trying to use.\r\n\r\nAny ideas why `checkstyle` would be behaving this way?\r\n","title":"gradle build with checkstyle &quot;Unable to create a Checker&quot; error","body":"<p>I'm working with a <code>gradle</code> Java project where another user has enabled the <code>checkstyle</code> plugin. Unfortunately, this addition breaks our ability to build from the CLI (a'la <code>gradle build</code>). For some reason, however, we are still able to build internally in IntelliJ (2021.2 Community Ed).</p>\n<p>I'm building with <code>gradle</code> version 4.10.2. Below is a snippet from my <code>build.gradle</code> where we enable <code>checkstyle</code>.</p>\n<pre><code>subprojects { project -&gt;\n    apply plugin: 'java'\n    apply plugin: 'groovy'\n    apply plugin: 'checkstyle'\n\n...\n\n    checkstyle {\n        configFile rootProject.file('checkstyle.xml')\n        toolVersion '7.1.1'\n    }\n...\n</code></pre>\n<p>I've checked the compatibility guide <a href=\"https://checkstyle-addons.thomasjensen.com/checkstyle-compatibility-matrix.html?hl=L%5Bg%5D;L8.12;L6.19;L5.9;L5.7-L5.5\" rel=\"nofollow noreferrer\">here</a>. According to this, I should be able to use this version.</p>\n<p>Unfortunately though, my build fails when I try to <code>gradle build</code> with the following error:</p>\n<pre><code>&gt; Task :cache:checkstyleMain FAILED\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':cache:checkstyleMain'.\n&gt; Unable to create a Checker: configLocation {&lt;REDACTED&gt;}, classpath {&lt;REDACTED&gt;}.\n</code></pre>\n<p>Within my <code>checkstyle.xml</code>, I have the following structure:</p>\n<pre><code>&lt;module name=&quot;Checker&quot;&gt;\n\n    &lt;module name=&quot;FileTabCharacter&quot;&gt;\n        &lt;property name=&quot;eachLine&quot; value=&quot;true&quot;/&gt;\n    &lt;/module&gt;\n    &lt;module name=&quot;LineLength&quot;&gt;\n        &lt;property name=&quot;max&quot; value=&quot;150&quot;/&gt;\n        &lt;property name=&quot;ignorePattern&quot; value=&quot;^package.*|^import.*|a href|href|http://|https://|ftp://&quot;/&gt;\n    &lt;/module&gt;\n\n    &lt;module name=&quot;TreeWalker&quot;&gt;\n...\n</code></pre>\n<p>The strange thing is that when I move the <code>LineLength</code> block under <code>TreeWalker</code> as the parent, the error goes away and <code>checkstyle</code> appears to work fine from both CLI and IDE.  I got the idea from <a href=\"https://stackoverflow.com/a/60549449/7780575\">this post</a>, however this change in <code>checkstyle</code> behavior should have been introduced into 8.24 and should not be required for the version I'm trying to use.</p>\n<p>Any ideas why <code>checkstyle</code> would be behaving this way?</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":410120,"reputation":953,"user_id":2278151,"accept_rate":100,"display_name":"NorthGuard"},"score":0,"creation_date":1308603728,"post_id":6417435,"comment_id":7527851,"body_markdown":"Can you be sure it&#39;s the last thing in the string? If so just use the end of line anchor $ `/(num ([0-9]+)$/`, however that translates into java.","body":"Can you be sure it&#39;s the last thing in the string? If so just use the end of line anchor $ <code>&#47;(num ([0-9]+)$&#47;</code>, however that translates into java."},{"owner":{"account_id":140518,"reputation":1243,"user_id":346899,"accept_rate":82,"display_name":"s106mo"},"score":0,"creation_date":1308603960,"post_id":6417435,"comment_id":7527913,"body_markdown":"You could write a recursive method, but I doubt that it makes sense.","body":"You could write a recursive method, but I doubt that it makes sense."}],"answers":[{"tags":[],"owner":{"account_id":80775,"reputation":80356,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1308606735,"creation_date":1308603784,"answer_id":6417487,"question_id":6417435,"body_markdown":"Java does not provide such a mechanism.  The only thing I can suggest would be a binary search for the last index.\r\n\r\nIt would be something like this:\r\n\r\n    N = haystack.length();\r\n    if ( matcher.find(N/2) ) {\r\n        recursively try right side\r\n    else\r\n        recursively try left side\r\n\r\nEdit\r\n---\r\n\r\nAnd here&#39;s code that does it since I found it to be an interesting problem:\r\n\r\n    import org.junit.Test;\r\n    \r\n    import java.util.regex.Matcher;\r\n    import java.util.regex.Pattern;\r\n    \r\n    import static org.junit.Assert.assertEquals;\r\n    \r\n    public class RecursiveFind {\r\n        @Test\r\n        public void testFindLastIndexOf() {\r\n            assertEquals(0, findLastIndexOf(&quot;abcdddddd&quot;, &quot;abc&quot;));\r\n            assertEquals(1, findLastIndexOf(&quot;dabcdddddd&quot;, &quot;abc&quot;));\r\n            assertEquals(4, findLastIndexOf(&quot;aaaaabc&quot;, &quot;abc&quot;));\r\n            assertEquals(4, findLastIndexOf(&quot;aaaaabc&quot;, &quot;a+b&quot;));\r\n            assertEquals(6, findLastIndexOf(&quot;aabcaaabc&quot;, &quot;a+b&quot;));\r\n            assertEquals(2, findLastIndexOf(&quot;abcde&quot;, &quot;c&quot;));\r\n            assertEquals(2, findLastIndexOf(&quot;abcdef&quot;, &quot;c&quot;));\r\n            assertEquals(2, findLastIndexOf(&quot;abcd&quot;, &quot;c&quot;));\r\n        }\r\n    \r\n        public static int findLastIndexOf(String haystack, String needle) {\r\n            return findLastIndexOf(0, haystack.length(), Pattern.compile(needle).matcher(haystack));\r\n        }\r\n    \r\n        private static int findLastIndexOf(int start, int end, Matcher m) {\r\n            if ( start &gt; end ) {\r\n                return -1;\r\n            }\r\n    \r\n            int pivot = ((end-start) / 2) + start;\r\n            if ( m.find(pivot) ) {\r\n                //recurse on right side\r\n                return findLastIndexOfRecurse(end, m);\r\n            } else if (m.find(start)) {\r\n                //recurse on left side\r\n                return findLastIndexOfRecurse(pivot, m);\r\n            } else {\r\n                //not found at all between start and end\r\n                return -1;\r\n            }\r\n        }\r\n    \r\n        private static int findLastIndexOfRecurse(int end, Matcher m) {\r\n            int foundIndex = m.start();\r\n            int recurseIndex = findLastIndexOf(foundIndex + 1, end, m);\r\n            if ( recurseIndex == -1 ) {\r\n                return foundIndex;\r\n            } else {\r\n                return recurseIndex;\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\nI haven&#39;t found a breaking test case yet.\r\n","title":"Find the last match with Java regex matcher","body":"<p>Java does not provide such a mechanism.  The only thing I can suggest would be a binary search for the last index.</p>\n\n<p>It would be something like this:</p>\n\n<pre><code>N = haystack.length();\nif ( matcher.find(N/2) ) {\n    recursively try right side\nelse\n    recursively try left side\n</code></pre>\n\n<h2>Edit</h2>\n\n<p>And here's code that does it since I found it to be an interesting problem:</p>\n\n<pre><code>import org.junit.Test;\n\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\nimport static org.junit.Assert.assertEquals;\n\npublic class RecursiveFind {\n    @Test\n    public void testFindLastIndexOf() {\n        assertEquals(0, findLastIndexOf(\"abcdddddd\", \"abc\"));\n        assertEquals(1, findLastIndexOf(\"dabcdddddd\", \"abc\"));\n        assertEquals(4, findLastIndexOf(\"aaaaabc\", \"abc\"));\n        assertEquals(4, findLastIndexOf(\"aaaaabc\", \"a+b\"));\n        assertEquals(6, findLastIndexOf(\"aabcaaabc\", \"a+b\"));\n        assertEquals(2, findLastIndexOf(\"abcde\", \"c\"));\n        assertEquals(2, findLastIndexOf(\"abcdef\", \"c\"));\n        assertEquals(2, findLastIndexOf(\"abcd\", \"c\"));\n    }\n\n    public static int findLastIndexOf(String haystack, String needle) {\n        return findLastIndexOf(0, haystack.length(), Pattern.compile(needle).matcher(haystack));\n    }\n\n    private static int findLastIndexOf(int start, int end, Matcher m) {\n        if ( start &gt; end ) {\n            return -1;\n        }\n\n        int pivot = ((end-start) / 2) + start;\n        if ( m.find(pivot) ) {\n            //recurse on right side\n            return findLastIndexOfRecurse(end, m);\n        } else if (m.find(start)) {\n            //recurse on left side\n            return findLastIndexOfRecurse(pivot, m);\n        } else {\n            //not found at all between start and end\n            return -1;\n        }\n    }\n\n    private static int findLastIndexOfRecurse(int end, Matcher m) {\n        int foundIndex = m.start();\n        int recurseIndex = findLastIndexOf(foundIndex + 1, end, m);\n        if ( recurseIndex == -1 ) {\n            return foundIndex;\n        } else {\n            return recurseIndex;\n        }\n    }\n\n}\n</code></pre>\n\n<p>I haven't found a breaking test case yet.</p>\n"},{"tags":[],"owner":{"account_id":20937,"reputation":167577,"user_id":50476,"accept_rate":100,"display_name":"Bart Kiers"},"down_vote_count":0,"up_vote_count":21,"is_accepted":true,"score":21,"last_activity_date":1518347495,"creation_date":1308604275,"answer_id":6417576,"question_id":6417435,"body_markdown":"You could prepend `.*` to your regex, which will [greedily](https://stackoverflow.com/questions/2301285/what-do-lazy-and-greedy-mean-in-the-context-of-regular-expressions) consume all characters up to the last match:\r\n\r\n    import java.util.regex.*;\r\n     \r\n    class Test {\r\n      public static void main (String[] args) {\r\n        String in = &quot;num 123 num 1 num 698 num 19238 num 2134&quot;;\r\n        Pattern p = Pattern.compile(&quot;.*num ([0-9]+)&quot;);\r\n        Matcher m = p.matcher(in);\r\n        if(m.find()) {\r\n          System.out.println(m.group(1));\r\n        }\r\n      }\r\n    }\r\n\r\nPrints:\r\n\r\n    2134\r\n\r\nYou could also reverse the string as well as change your regex to match the reverse instead:\r\n\r\n    import java.util.regex.*;\r\n     \r\n    class Test {\r\n      public static void main (String[] args) {\r\n        String in = &quot;num 123 num 1 num 698 num 19238 num 2134&quot;;\r\n        Pattern p = Pattern.compile(&quot;([0-9]+) mun&quot;);\r\n        Matcher m = p.matcher(new StringBuilder(in).reverse());\r\n        if(m.find()) {\r\n          System.out.println(new StringBuilder(m.group(1)).reverse());\r\n        }\r\n      }\r\n    }\r\n\r\nBut neither solution is better than just looping through all matches using `while (m.find())`, IMO.\r\n","title":"Find the last match with Java regex matcher","body":"<p>You could prepend <code>.*</code> to your regex, which will <a href=\"https://stackoverflow.com/questions/2301285/what-do-lazy-and-greedy-mean-in-the-context-of-regular-expressions\">greedily</a> consume all characters up to the last match:</p>\n\n<pre><code>import java.util.regex.*;\n\nclass Test {\n  public static void main (String[] args) {\n    String in = \"num 123 num 1 num 698 num 19238 num 2134\";\n    Pattern p = Pattern.compile(\".*num ([0-9]+)\");\n    Matcher m = p.matcher(in);\n    if(m.find()) {\n      System.out.println(m.group(1));\n    }\n  }\n}\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>2134\n</code></pre>\n\n<p>You could also reverse the string as well as change your regex to match the reverse instead:</p>\n\n<pre><code>import java.util.regex.*;\n\nclass Test {\n  public static void main (String[] args) {\n    String in = \"num 123 num 1 num 698 num 19238 num 2134\";\n    Pattern p = Pattern.compile(\"([0-9]+) mun\");\n    Matcher m = p.matcher(new StringBuilder(in).reverse());\n    if(m.find()) {\n      System.out.println(new StringBuilder(m.group(1)).reverse());\n    }\n  }\n}\n</code></pre>\n\n<p>But neither solution is better than just looping through all matches using <code>while (m.find())</code>, IMO.</p>\n"},{"tags":[],"owner":{"account_id":267053,"reputation":29694,"user_id":554988,"accept_rate":86,"display_name":"Garrett Hall"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1308606024,"creation_date":1308606024,"answer_id":6417899,"question_id":6417435,"body_markdown":"Why not keep it simple?\r\n\r\n    in.replaceAll(&quot;.*[^\\\\d](\\\\d+).*&quot;, &quot;$1&quot;)","title":"Find the last match with Java regex matcher","body":"<p>Why not keep it simple?</p>\n\n<pre><code>in.replaceAll(\".*[^\\\\d](\\\\d+).*\", \"$1\")\n</code></pre>\n"},{"tags":[],"owner":{"account_id":142862,"reputation":5733,"user_id":350836,"accept_rate":71,"display_name":"krico"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1308606626,"creation_date":1308606626,"answer_id":6417990,"question_id":6417435,"body_markdown":"Java patterns are greedy by default, the following should do it.\r\n\r\n        String in = &quot;num 123 num 1 num 698 num 19238 num 2134&quot;;\r\n        Pattern p = Pattern.compile( &quot;.*num ([0-9]+).*$&quot; );\r\n        Matcher m = p.matcher( in );\r\n\r\n        if ( m.matches() )\r\n        {\r\n            System.out.println( m.group( 1 ));\r\n        }","title":"Find the last match with Java regex matcher","body":"<p>Java patterns are greedy by default, the following should do it.</p>\n\n<pre><code>    String in = \"num 123 num 1 num 698 num 19238 num 2134\";\n    Pattern p = Pattern.compile( \".*num ([0-9]+).*$\" );\n    Matcher m = p.matcher( in );\n\n    if ( m.matches() )\n    {\n        System.out.println( m.group( 1 ));\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":267986,"reputation":10096,"user_id":556493,"display_name":"yingted"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1339949564,"creation_date":1339949564,"answer_id":11072826,"question_id":6417435,"body_markdown":"Regular expressions are greedy:\r\n\r\n    Matcher m=Pattern.compile(&quot;.*num &#39;([0-9]+) &quot;,Pattern.DOTALL).matcher(&quot;num 123 num 1 num 698 num 19238 num 2134&quot;);\r\n\r\nwill give you a `Matcher` for the last match, and you can apply it to most regexes by prepending &quot;.*&quot;. Of course, if you can&#39;t use `DOTALL`, you might want to use `(?:\\d|\\D)` or something similar as your wildcard.","title":"Find the last match with Java regex matcher","body":"<p>Regular expressions are greedy:</p>\n\n<pre><code>Matcher m=Pattern.compile(\".*num '([0-9]+) \",Pattern.DOTALL).matcher(\"num 123 num 1 num 698 num 19238 num 2134\");\n</code></pre>\n\n<p>will give you a <code>Matcher</code> for the last match, and you can apply it to most regexes by prepending \".*\". Of course, if you can't use <code>DOTALL</code>, you might want to use <code>(?:\\d|\\D)</code> or something similar as your wildcard.</p>\n"},{"tags":[],"owner":{"account_id":472217,"reputation":603,"user_id":880557,"display_name":"Bradley M Handy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1351112615,"creation_date":1351112615,"answer_id":13057700,"question_id":6417435,"body_markdown":"This seems like a more equally plausible approach.\r\n\r\n        public class LastMatchTest {\r\n            public static void main(String[] args) throws Exception {\r\n                String target = &quot;num 123 num 1 num 698 num 19238 num 2134&quot;;\r\n                Pattern regex = Pattern.compile(&quot;(?:.*?num.*?(\\\\d+))+&quot;);\r\n                Matcher regexMatcher = regex.matcher(target);\r\n        \r\n                if (regexMatcher.find()) {\r\n                    System.out.println(regexMatcher.group(1));\r\n                }\r\n            }\r\n        }\r\n\r\nThe `.*?` is a reluctant match so it won&#39;t gobble up everything.  The `?:` forces a non-capturing group so the inner group is group 1.  Matching multiples in a greedy fashion causes it to match across the entire string until all matches are exhausted leaving group 1 with the value of your last match.","title":"Find the last match with Java regex matcher","body":"<p>This seems like a more equally plausible approach.</p>\n\n<pre><code>    public class LastMatchTest {\n        public static void main(String[] args) throws Exception {\n            String target = \"num 123 num 1 num 698 num 19238 num 2134\";\n            Pattern regex = Pattern.compile(\"(?:.*?num.*?(\\\\d+))+\");\n            Matcher regexMatcher = regex.matcher(target);\n\n            if (regexMatcher.find()) {\n                System.out.println(regexMatcher.group(1));\n            }\n        }\n    }\n</code></pre>\n\n<p>The <code>.*?</code> is a reluctant match so it won't gobble up everything.  The <code>?:</code> forces a non-capturing group so the inner group is group 1.  Matching multiples in a greedy fashion causes it to match across the entire string until all matches are exhausted leaving group 1 with the value of your last match.</p>\n"},{"tags":[],"owner":{"account_id":2146641,"reputation":154,"user_id":1904126,"display_name":"Norman Se&#223;ler"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1357304191,"creation_date":1357304191,"answer_id":14157615,"question_id":6417435,"body_markdown":"    String in = &quot;num 123 num 1 num 698 num 19238 num 2134&quot;;  \r\n    Pattern p = Pattern.compile(&quot;num &#39;([0-9]+) &quot;);  \r\n    Matcher m = p.matcher(in);  \r\n    String result = &quot;&quot;;\r\n\r\n    while (m.find())\r\n    {\r\n         result = m.group(1);\r\n    }","title":"Find the last match with Java regex matcher","body":"<pre><code>String in = \"num 123 num 1 num 698 num 19238 num 2134\";  \nPattern p = Pattern.compile(\"num '([0-9]+) \");  \nMatcher m = p.matcher(in);  \nString result = \"\";\n\nwhile (m.find())\n{\n     result = m.group(1);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":351770,"reputation":576,"user_id":688450,"display_name":"araut"},"down_vote_count":6,"up_vote_count":21,"is_accepted":false,"score":15,"last_activity_date":1366844881,"creation_date":1366844881,"answer_id":16203747,"question_id":6417435,"body_markdown":"To get the last match even this works and not sure why this was not mentioned earlier:\r\n\r\n    String in = &quot;num 123 num 1 num 698 num 19238 num 2134&quot;;\r\n    Pattern p = Pattern.compile(&quot;num &#39;([0-9]+) &quot;);\r\n    Matcher m = p.matcher(in);\r\n    if (m.find()) {\r\n      in= m.group(m.groupCount());\r\n    }","title":"Find the last match with Java regex matcher","body":"<p>To get the last match even this works and not sure why this was not mentioned earlier:</p>\n\n<pre><code>String in = \"num 123 num 1 num 698 num 19238 num 2134\";\nPattern p = Pattern.compile(\"num '([0-9]+) \");\nMatcher m = p.matcher(in);\nif (m.find()) {\n  in= m.group(m.groupCount());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1374326,"reputation":946,"user_id":1308634,"accept_rate":100,"display_name":"dhalsim2"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1404324735,"creation_date":1404324735,"answer_id":24538190,"question_id":6417435,"body_markdown":"Use negative lookahead:\r\n\r\n    String in = &quot;num 123 num 1 num 698 num 19238 num 2134&quot;;\r\n    Pattern p = Pattern.compile(&quot;num (\\\\d+)(?!.*num \\\\d+)&quot;);\r\n    Matcher m = p.matcher(in);\r\n\r\n    if (m.find()) {\r\n        in= m.group(1);\r\n    }\r\n\r\nThe regular expression reads as &quot;num followed by one space and at least one digit without any (num followed by one space and at least one digit) at any point after it&quot;.\r\n\r\nYou can get even fancier by combining it with positive lookbehind:\r\n\r\n    String in = &quot;num 123 num 1 num 698 num 19238 num 2134&quot;;\r\n    Pattern p = Pattern.compile(&quot;(?&lt;=num )\\\\d+(?!.*num \\\\d+)&quot;);\r\n    Matcher m = p.matcher(in);\r\n\r\n    if (m.find()) {\r\n        in = m.group();\r\n    }\r\n\r\nThat one reads as &quot;at least one digit preceded by (num and one space) and not followed by (num followed by one space and at least one digit) at any point after it&quot;.\r\nThat way you don&#39;t have to mess with grouping and worry about the potential `IndexOutOfBoundsException` thrown from `Matcher.group(int)`.","title":"Find the last match with Java regex matcher","body":"<p>Use negative lookahead:</p>\n\n<pre><code>String in = \"num 123 num 1 num 698 num 19238 num 2134\";\nPattern p = Pattern.compile(\"num (\\\\d+)(?!.*num \\\\d+)\");\nMatcher m = p.matcher(in);\n\nif (m.find()) {\n    in= m.group(1);\n}\n</code></pre>\n\n<p>The regular expression reads as \"num followed by one space and at least one digit without any (num followed by one space and at least one digit) at any point after it\".</p>\n\n<p>You can get even fancier by combining it with positive lookbehind:</p>\n\n<pre><code>String in = \"num 123 num 1 num 698 num 19238 num 2134\";\nPattern p = Pattern.compile(\"(?&lt;=num )\\\\d+(?!.*num \\\\d+)\");\nMatcher m = p.matcher(in);\n\nif (m.find()) {\n    in = m.group();\n}\n</code></pre>\n\n<p>That one reads as \"at least one digit preceded by (num and one space) and not followed by (num followed by one space and at least one digit) at any point after it\".\nThat way you don't have to mess with grouping and worry about the potential <code>IndexOutOfBoundsException</code> thrown from <code>Matcher.group(int)</code>.</p>\n"},{"tags":[],"owner":{"account_id":309077,"reputation":24064,"user_id":621338,"accept_rate":90,"display_name":"necromancer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1409276238,"creation_date":1409276238,"answer_id":25560466,"question_id":6417435,"body_markdown":"Compared to the currently accepted answer, this one does not blindly discard elements of the list using the`&quot;.*&quot;` prefix.  Instead, it uses `&quot;(element delimiter)*(element)&quot;` to pick out the last element using `.group(2)`. See the function `magic_last` in code below.\r\n\r\nTo demonstrate the benefit of this approach I have also included a function to pick out the n-th element which is robust enough to accept a list that has fewer than n elements. See the function `magic` in code below.\r\n\r\nFiltering out the &quot;num &quot; text and only getting the number is left as an exercise for the reader (just add an extra group around the digits pattern: `([0-9]+)` and pick out group 4 instead of group 2).\r\n\r\n    package com.example;\r\n    \r\n    import static java.lang.System.out;\r\n    \r\n    import java.util.regex.Matcher;\r\n    import java.util.regex.Pattern;\r\n    \r\n    public class Foo {\r\n    \r\n      public static void main (String [] args) {\r\n        String element = &quot;num [0-9]+&quot;;\r\n        String delimiter = &quot;, &quot;;\r\n        String input;\r\n        input = &quot;here is a num bro: num 001; hope you like it&quot;;\r\n        magic_last(input, element, delimiter);\r\n        magic(1, input, element, delimiter);\r\n        magic(2, input, element, delimiter);\r\n        magic(3, input, element, delimiter);\r\n        input = &quot;here are some nums bro: num 001, num 002, num 003, num 004, num 005, num 006; hope you like them&quot;;\r\n        magic_last(input, element, delimiter);\r\n        magic(1, input, element, delimiter);\r\n        magic(2, input, element, delimiter);\r\n        magic(3, input, element, delimiter);\r\n        magic(4, input, element, delimiter);\r\n        magic(5, input, element, delimiter);\r\n        magic(6, input, element, delimiter);\r\n        magic(7, input, element, delimiter);\r\n        magic(8, input, element, delimiter);\r\n      }\r\n      \r\n      public static void magic_last (String input, String element, String delimiter) {\r\n        String regexp = &quot;(&quot; + element + delimiter + &quot;)*(&quot; + element + &quot;)&quot;;\r\n        Pattern pattern = Pattern.compile(regexp);\r\n        Matcher matcher = pattern.matcher(input);\r\n        if (matcher.find()) {\r\n            out.println(matcher.group(2));\r\n        }\r\n      }\r\n    \r\n      public static void magic (int n, String input, String element, String delimiter) {\r\n        String regexp = &quot;(&quot; + element + delimiter + &quot;){0,&quot; + (n - 1) + &quot;}(&quot; + element + &quot;)(&quot; + delimiter + element + &quot;)*&quot;;\r\n        Pattern pattern = Pattern.compile(regexp);\r\n        Matcher matcher = pattern.matcher(input);\r\n        if (matcher.find()) {\r\n            out.println(matcher.group(2));\r\n        }\r\n      }\r\n      \r\n    }\r\n\r\nOutput:\r\n\r\n    num 001\r\n    num 001\r\n    num 001\r\n    num 001\r\n    num 006\r\n    num 001\r\n    num 002\r\n    num 003\r\n    num 004\r\n    num 005\r\n    num 006\r\n    num 006\r\n    num 006\r\n\r\n","title":"Find the last match with Java regex matcher","body":"<p>Compared to the currently accepted answer, this one does not blindly discard elements of the list using the<code>\".*\"</code> prefix.  Instead, it uses <code>\"(element delimiter)*(element)\"</code> to pick out the last element using <code>.group(2)</code>. See the function <code>magic_last</code> in code below.</p>\n\n<p>To demonstrate the benefit of this approach I have also included a function to pick out the n-th element which is robust enough to accept a list that has fewer than n elements. See the function <code>magic</code> in code below.</p>\n\n<p>Filtering out the \"num \" text and only getting the number is left as an exercise for the reader (just add an extra group around the digits pattern: <code>([0-9]+)</code> and pick out group 4 instead of group 2).</p>\n\n<pre><code>package com.example;\n\nimport static java.lang.System.out;\n\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\npublic class Foo {\n\n  public static void main (String [] args) {\n    String element = \"num [0-9]+\";\n    String delimiter = \", \";\n    String input;\n    input = \"here is a num bro: num 001; hope you like it\";\n    magic_last(input, element, delimiter);\n    magic(1, input, element, delimiter);\n    magic(2, input, element, delimiter);\n    magic(3, input, element, delimiter);\n    input = \"here are some nums bro: num 001, num 002, num 003, num 004, num 005, num 006; hope you like them\";\n    magic_last(input, element, delimiter);\n    magic(1, input, element, delimiter);\n    magic(2, input, element, delimiter);\n    magic(3, input, element, delimiter);\n    magic(4, input, element, delimiter);\n    magic(5, input, element, delimiter);\n    magic(6, input, element, delimiter);\n    magic(7, input, element, delimiter);\n    magic(8, input, element, delimiter);\n  }\n\n  public static void magic_last (String input, String element, String delimiter) {\n    String regexp = \"(\" + element + delimiter + \")*(\" + element + \")\";\n    Pattern pattern = Pattern.compile(regexp);\n    Matcher matcher = pattern.matcher(input);\n    if (matcher.find()) {\n        out.println(matcher.group(2));\n    }\n  }\n\n  public static void magic (int n, String input, String element, String delimiter) {\n    String regexp = \"(\" + element + delimiter + \"){0,\" + (n - 1) + \"}(\" + element + \")(\" + delimiter + element + \")*\";\n    Pattern pattern = Pattern.compile(regexp);\n    Matcher matcher = pattern.matcher(input);\n    if (matcher.find()) {\n        out.println(matcher.group(2));\n    }\n  }\n\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>num 001\nnum 001\nnum 001\nnum 001\nnum 006\nnum 001\nnum 002\nnum 003\nnum 004\nnum 005\nnum 006\nnum 006\nnum 006\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17275382,"reputation":1,"user_id":12510123,"display_name":"Vladislav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582187428,"creation_date":1582187428,"answer_id":60315709,"question_id":6417435,"body_markdown":"just use \\Z - end of string mach\r\n\r\n    String in = &quot;num 123 num 1 num 698 num 19238 num 2134&quot;;\r\n    Pattern p = Pattern.compile(&quot;num ([0-9]+)\\\\Z&quot;);\r\n    Matcher m = p.matcher(in);\r\n    \r\n    if (m.find()) {\r\n         in = m.group(1);\r\n    }","title":"Find the last match with Java regex matcher","body":"<p>just use \\Z - end of string mach</p>\n\n<pre><code>String in = \"num 123 num 1 num 698 num 19238 num 2134\";\nPattern p = Pattern.compile(\"num ([0-9]+)\\\\Z\");\nMatcher m = p.matcher(in);\n\nif (m.find()) {\n     in = m.group(1);\n}\n</code></pre>\n"}],"owner":{"account_id":398667,"reputation":703,"user_id":763472,"accept_rate":92,"display_name":"kireol"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56868,"favorite_count":0,"down_vote_count":0,"up_vote_count":28,"accepted_answer_id":6417576,"answer_count":11,"score":28,"last_activity_date":1660051942,"creation_date":1308603542,"question_id":6417435,"body_markdown":"I&#39;m trying to get the last result of a match without having to cycle through .find()\r\n\r\nHere&#39;s my code:\r\n\r\n    String in = &quot;num 123 num 1 num 698 num 19238 num 2134&quot;;\r\n    Pattern p = Pattern.compile(&quot;num ([0-9]+)&quot;);\r\n    Matcher m = p.matcher(in);\r\n\r\n    if (m.find()) {\r\n         in = m.group(1);\r\n    }\r\n\r\nThat will give me the first result.  How do I find the LAST match without cycling through a potentially huge list?","title":"Find the last match with Java regex matcher","body":"<p>I'm trying to get the last result of a match without having to cycle through .find()</p>\n<p>Here's my code:</p>\n<pre><code>String in = &quot;num 123 num 1 num 698 num 19238 num 2134&quot;;\nPattern p = Pattern.compile(&quot;num ([0-9]+)&quot;);\nMatcher m = p.matcher(in);\n\nif (m.find()) {\n     in = m.group(1);\n}\n</code></pre>\n<p>That will give me the first result.  How do I find the LAST match without cycling through a potentially huge list?</p>\n"},{"tags":["java","shell","unix","autosys","jil"],"comments":[{"owner":{"account_id":12556772,"reputation":828,"user_id":9136155,"display_name":"Piyush"},"score":0,"creation_date":1609955052,"post_id":65115378,"comment_id":115984423,"body_markdown":"hey, you need to schedule the box to run","body":"hey, you need to schedule the box to run"},{"owner":{"account_id":12556772,"reputation":828,"user_id":9136155,"display_name":"Piyush"},"score":0,"creation_date":1609955096,"post_id":65115378,"comment_id":115984448,"body_markdown":"have you found out the way or still yet to ?","body":"have you found out the way or still yet to ?"}],"answers":[{"tags":[],"owner":{"account_id":12556772,"reputation":828,"user_id":9136155,"display_name":"Piyush"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1610110347,"creation_date":1610110347,"answer_id":65629320,"question_id":65115378,"body_markdown":"Once solution could be to schedule the box, the jobs under the box would be activated.\r\nI would suggest to get familiarized with the behaviour of box and jobs\r\n\r\n    update_job: mygroup-feed-myjob\r\n    date_conditions: y\r\n    days_of_week: all\r\n    start_mins: 10, 20, 30, 40, 50, 00\r\n\r\nThis way the box would be running throughout the day with max of 10 mins of inactivity post successful completion.","title":"Autosys file watcher job, Trigger on file arrival , file comes monthly","body":"<p>Once solution could be to schedule the box, the jobs under the box would be activated.\nI would suggest to get familiarized with the behaviour of box and jobs</p>\n<pre><code>update_job: mygroup-feed-myjob\ndate_conditions: y\ndays_of_week: all\nstart_mins: 10, 20, 30, 40, 50, 00\n</code></pre>\n<p>This way the box would be running throughout the day with max of 10 mins of inactivity post successful completion.</p>\n"}],"owner":{"account_id":1012776,"reputation":1138,"user_id":1024970,"accept_rate":25,"display_name":"Rahul Chowdhury"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1837,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1660051401,"creation_date":1606939508,"question_id":65115378,"body_markdown":"I am a .net C# developer and having limited knowledge in autosys script.\r\n\r\nWe have a monthly file feed(csv).. Comes once in a month .. sometimes twice in a month. My requirement is to run a job which will monitor this file and move to a different directory.\r\n\r\nSomething I have tried.\r\n\r\n    /* ----------------- mygroup-feed-myjob ----------------- */ \r\n    \r\n    insert_job: mygroup-feed-myjob   job_type: b \r\n    owner: myowner\r\n    permission: gx,wx\r\n    alarm_if_fail: 1\r\n    group: mygroup\r\n    application: mygroup-feed\r\n    \r\n    \r\n     /* ----------------- mygroup-feed-myjob-f ----------------- */ \r\n    \r\n     insert_job: mygroup-feed-myjob-f   job_type: f \r\n     box_name: mygroup-feed-myjob\r\n     machine: mymachine\r\n     owner: myowner\r\n     permission: gx,wx\r\n     description: &quot;File watcher for myjob feed&quot;\r\n     watch_file: $$(mygroup-nas)\\DropZone\\myfile.csv\r\n     watch_interval: 60\r\n     alarm_if_fail: 1\r\n     group: mygroup\r\n     application: mygroup-feed\r\n    \r\n    \r\n     /* ----------------- mygroup-feed-myjob-m ----------------- */ \r\n    \r\n     insert_job: mygroup-feed-myjob-m   job_type: c \r\n     box_name: mygroup-feed-myjob\r\n     command: $$(mygroup-app)\\bin\\Mover.exe /c myjob /f $$(mygroup-nas)\\DropZone\\myfile.csv\r\n     machine: mymachine\r\n     owner: myowner\r\n     permission: gx,wx\r\n     condition: s(mygroup-feed-myjob-f)\r\n     description: &quot;Move myjob feed file job into feed directory&quot;\r\n     std_out_file: &gt;&gt;$$(mygroup-nas)\\Log\\Autosys\\$$(gen-sysdate-yyyy)$$(gen-sysdate-mm)$$(gen-sysdate-dd)\\mygroup-feed-myjob.log\r\n     std_err_file: &gt;&gt;$$(mygroup-nas)\\Log\\Autosys\\$$(gen-sysdate-yyyy)$$(gen-sysdate-mm)$$(gen-sysdate-dd)\\mygroup-feed-myjob.log\r\n     alarm_if_fail: 1\r\n     group: mygroup\r\n     application: mygroup-feed\r\n\r\n\r\nProblem with this one, It&#39;s working fine when I force start the job .. but not triggering on file arrival. . \r\n\r\nSo practically when it&#39;s in SU (Success) status , it&#39;s not triggering any job run even I drop the file in that location..I want to trigger the job every time there is a file ..Can someone please help... Probably it&#39;s a small trick but I am still learning. ","title":"Autosys file watcher job, Trigger on file arrival , file comes monthly","body":"<p>I am a .net C# developer and having limited knowledge in autosys script.</p>\n<p>We have a monthly file feed(csv).. Comes once in a month .. sometimes twice in a month. My requirement is to run a job which will monitor this file and move to a different directory.</p>\n<p>Something I have tried.</p>\n<pre><code>/* ----------------- mygroup-feed-myjob ----------------- */ \n\ninsert_job: mygroup-feed-myjob   job_type: b \nowner: myowner\npermission: gx,wx\nalarm_if_fail: 1\ngroup: mygroup\napplication: mygroup-feed\n\n\n /* ----------------- mygroup-feed-myjob-f ----------------- */ \n\n insert_job: mygroup-feed-myjob-f   job_type: f \n box_name: mygroup-feed-myjob\n machine: mymachine\n owner: myowner\n permission: gx,wx\n description: &quot;File watcher for myjob feed&quot;\n watch_file: $$(mygroup-nas)\\DropZone\\myfile.csv\n watch_interval: 60\n alarm_if_fail: 1\n group: mygroup\n application: mygroup-feed\n\n\n /* ----------------- mygroup-feed-myjob-m ----------------- */ \n\n insert_job: mygroup-feed-myjob-m   job_type: c \n box_name: mygroup-feed-myjob\n command: $$(mygroup-app)\\bin\\Mover.exe /c myjob /f $$(mygroup-nas)\\DropZone\\myfile.csv\n machine: mymachine\n owner: myowner\n permission: gx,wx\n condition: s(mygroup-feed-myjob-f)\n description: &quot;Move myjob feed file job into feed directory&quot;\n std_out_file: &gt;&gt;$$(mygroup-nas)\\Log\\Autosys\\$$(gen-sysdate-yyyy)$$(gen-sysdate-mm)$$(gen-sysdate-dd)\\mygroup-feed-myjob.log\n std_err_file: &gt;&gt;$$(mygroup-nas)\\Log\\Autosys\\$$(gen-sysdate-yyyy)$$(gen-sysdate-mm)$$(gen-sysdate-dd)\\mygroup-feed-myjob.log\n alarm_if_fail: 1\n group: mygroup\n application: mygroup-feed\n</code></pre>\n<p>Problem with this one, It's working fine when I force start the job .. but not triggering on file arrival. .</p>\n<p>So practically when it's in SU (Success) status , it's not triggering any job run even I drop the file in that location..I want to trigger the job every time there is a file ..Can someone please help... Probably it's a small trick but I am still learning.</p>\n"},{"tags":["java","android","navigation"],"comments":[{"owner":{"account_id":14056231,"reputation":641,"user_id":10153483,"display_name":"Black4Guy"},"score":0,"creation_date":1660045706,"post_id":73290964,"comment_id":129435079,"body_markdown":"Follow this answer: https://stackoverflow.com/a/42499780/10153483","body":"Follow this answer: <a href=\"https://stackoverflow.com/a/42499780/10153483\">stackoverflow.com/a/42499780/10153483</a>"}],"answers":[{"tags":[],"owner":{"account_id":6746145,"reputation":4817,"user_id":5197712,"display_name":"Anand"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660051114,"creation_date":1660051114,"answer_id":73292538,"question_id":73290964,"body_markdown":"Implement this in your Activity\r\n\r\n&gt; Step 1\r\n\r\n    public class MainActivity extends AppCompatActivity implements \r\n                  NavigationView.OnNavigationItemSelectedListener\r\n\r\n&gt; Step 2  setNavigationItemSelectedListener in onCreate\r\n\r\n    NavigationView mNavigationView = (NavigationView) findViewById(R.id.account_navigation_view);\r\n    \r\n    if (mNavigationView != null) {\r\n            mNavigationView.setNavigationItemSelectedListener(this);\r\n    }\r\n\r\n&gt; Step 3 override the below method\r\n\r\n     public boolean onNavigationItemSelected(MenuItem item) {\r\n        // Handle navigation view item clicks here.\r\n        int id = item.getItemId();\r\n    \r\n        if (id == R.id.nav_account) {\r\n           // DO your stuff \r\n        }\r\n    }\r\n\r\n","title":"How to go another activity by clicking Navigation item?","body":"<p>Implement this in your Activity</p>\n<blockquote>\n<p>Step 1</p>\n</blockquote>\n<pre><code>public class MainActivity extends AppCompatActivity implements \n              NavigationView.OnNavigationItemSelectedListener\n</code></pre>\n<blockquote>\n<p>Step 2  setNavigationItemSelectedListener in onCreate</p>\n</blockquote>\n<pre><code>NavigationView mNavigationView = (NavigationView) findViewById(R.id.account_navigation_view);\n\nif (mNavigationView != null) {\n        mNavigationView.setNavigationItemSelectedListener(this);\n}\n</code></pre>\n<blockquote>\n<p>Step 3 override the below method</p>\n</blockquote>\n<pre><code> public boolean onNavigationItemSelected(MenuItem item) {\n    // Handle navigation view item clicks here.\n    int id = item.getItemId();\n\n    if (id == R.id.nav_account) {\n       // DO your stuff \n    }\n}\n</code></pre>\n"}],"owner":{"account_id":26018024,"reputation":95,"user_id":19726095,"display_name":"Md Abu Rayhan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":240,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73292538,"answer_count":1,"score":1,"last_activity_date":1660051114,"creation_date":1660044009,"question_id":73290964,"body_markdown":"**Here I added my code. I have been created Navigation bar successfully. But Now I am not able to set onClickListener on my Navigation Item. How can I use a Intent on my Navigation Item using navigation item id . please help me someone. I need to know in details**\r\n\r\n**activity_main.xml**\r\n\r\n        &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;androidx.drawerlayout.widget.DrawerLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        tools:context=&quot;.MainActivity&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        android:id=&quot;@+id/my_drawer_layout&quot;\r\n        &gt;\r\n            &lt;LinearLayout\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;match_parent&quot;\r\n                android:orientation=&quot;vertical&quot;\r\n                &gt;\r\n                &lt;include\r\n                    layout=&quot;@layout/main_dashboard&quot;\r\n                    /&gt;\r\n                &lt;include layout=&quot;@layout/lead&quot;\r\n                    /&gt;\r\n    \r\n            &lt;/LinearLayout&gt;\r\n    \r\n        &lt;com.google.android.material.navigation.NavigationView\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:layout_gravity=&quot;start&quot;\r\n            app:menu=&quot;@menu/navigation_menu&quot; /&gt;\r\n    \r\n    &lt;/androidx.drawerlayout.widget.DrawerLayout&gt;\r\n    \r\n    **navigation_menu.xml**\r\n    \r\n        &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;menu xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        tools:ignore=&quot;HardcodedText&quot;&gt;\r\n    \r\n        &lt;item\r\n            android:id=&quot;@+id/nav_account&quot;\r\n            android:title=&quot;My Account&quot;\r\n            android:icon=&quot;@drawable/user&quot;\r\n            /&gt;\r\n        &lt;item\r\n            android:id=&quot;@+id/nav_home&quot;\r\n            android:title=&quot;Home&quot;\r\n            android:icon=&quot;@drawable/home&quot;\r\n            /&gt;\r\n    \r\n        &lt;item\r\n            android:id=&quot;@+id/nav_notification&quot;\r\n            android:title=&quot;Notification&quot;\r\n            android:icon=&quot;@drawable/notification&quot;\r\n            /&gt;\r\n        &lt;item\r\n            android:id=&quot;@+id/nav_offer&quot;\r\n            android:title=&quot;Offers&quot;\r\n            android:icon=&quot;@drawable/offer&quot;\r\n            /&gt;\r\n        &lt;item\r\n            android:id=&quot;@+id/nav_ticket&quot;\r\n            android:title=&quot;Tickets&quot;\r\n            android:icon=&quot;@drawable/ticket&quot;\r\n            /&gt;\r\n        &lt;item\r\n            android:id=&quot;@+id/nav_tutorial&quot;\r\n            android:title=&quot;Tutorial&quot;\r\n            android:icon=&quot;@drawable/tutorial&quot;\r\n            /&gt;\r\n        &lt;item\r\n            android:id=&quot;@+id/nav_privacy&quot;\r\n            android:title=&quot;Privacy &amp;amp; Policy&quot;\r\n            android:icon=&quot;@drawable/privacy&quot;\r\n            /&gt;\r\n    \r\n        &lt;item\r\n            android:id=&quot;@+id/nav_logout&quot;\r\n            android:title=&quot;Logout&quot;\r\n            android:icon=&quot;@drawable/log_out&quot;\r\n            /&gt;\r\n    \r\n    &lt;/menu&gt;\r\n\r\n**MainActivity.java**\r\n\r\n         @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n    \r\n    \r\n            // drawer layout instance to toggle the menu icon to open\r\n            // drawer and back button to close drawer\r\n            drawerLayout = findViewById(R.id.my_drawer_layout);\r\n            actionBarDrawerToggle = new ActionBarDrawerToggle(this, drawerLayout, R.string.nav_open, R.string.nav_close);\r\n    \r\n            // pass the Open and Close toggle for the drawer layout listener\r\n            // to toggle the button\r\n            drawerLayout.addDrawerListener(actionBarDrawerToggle);\r\n            actionBarDrawerToggle.syncState();\r\n    \r\n            // to make the Navigation drawer icon always appear on the action bar\r\n            getSupportActionBar().setDisplayHomeAsUpEnabled(true);\r\n    \r\n        }\r\n   \r\n\r\n      @Override\r\n     public boolean onOptionsItemSelected(@NonNull MenuItem item) {\r\n    \r\n         if (actionBarDrawerToggle.onOptionsItemSelected(item)) {\r\n             return true;\r\n         }\r\n         return super.onOptionsItemSelected(item);\r\n     }\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/hkmg9.png","title":"How to go another activity by clicking Navigation item?","body":"<p><strong>Here I added my code. I have been created Navigation bar successfully. But Now I am not able to set onClickListener on my Navigation Item. How can I use a Intent on my Navigation Item using navigation item id . please help me someone. I need to know in details</strong></p>\n<p><strong>activity_main.xml</strong></p>\n<pre><code>    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.drawerlayout.widget.DrawerLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.MainActivity&quot;\n    android:orientation=&quot;vertical&quot;\n    android:id=&quot;@+id/my_drawer_layout&quot;\n    &gt;\n        &lt;LinearLayout\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;\n            android:orientation=&quot;vertical&quot;\n            &gt;\n            &lt;include\n                layout=&quot;@layout/main_dashboard&quot;\n                /&gt;\n            &lt;include layout=&quot;@layout/lead&quot;\n                /&gt;\n\n        &lt;/LinearLayout&gt;\n\n    &lt;com.google.android.material.navigation.NavigationView\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:layout_gravity=&quot;start&quot;\n        app:menu=&quot;@menu/navigation_menu&quot; /&gt;\n\n&lt;/androidx.drawerlayout.widget.DrawerLayout&gt;\n\n**navigation_menu.xml**\n\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;menu xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    tools:ignore=&quot;HardcodedText&quot;&gt;\n\n    &lt;item\n        android:id=&quot;@+id/nav_account&quot;\n        android:title=&quot;My Account&quot;\n        android:icon=&quot;@drawable/user&quot;\n        /&gt;\n    &lt;item\n        android:id=&quot;@+id/nav_home&quot;\n        android:title=&quot;Home&quot;\n        android:icon=&quot;@drawable/home&quot;\n        /&gt;\n\n    &lt;item\n        android:id=&quot;@+id/nav_notification&quot;\n        android:title=&quot;Notification&quot;\n        android:icon=&quot;@drawable/notification&quot;\n        /&gt;\n    &lt;item\n        android:id=&quot;@+id/nav_offer&quot;\n        android:title=&quot;Offers&quot;\n        android:icon=&quot;@drawable/offer&quot;\n        /&gt;\n    &lt;item\n        android:id=&quot;@+id/nav_ticket&quot;\n        android:title=&quot;Tickets&quot;\n        android:icon=&quot;@drawable/ticket&quot;\n        /&gt;\n    &lt;item\n        android:id=&quot;@+id/nav_tutorial&quot;\n        android:title=&quot;Tutorial&quot;\n        android:icon=&quot;@drawable/tutorial&quot;\n        /&gt;\n    &lt;item\n        android:id=&quot;@+id/nav_privacy&quot;\n        android:title=&quot;Privacy &amp;amp; Policy&quot;\n        android:icon=&quot;@drawable/privacy&quot;\n        /&gt;\n\n    &lt;item\n        android:id=&quot;@+id/nav_logout&quot;\n        android:title=&quot;Logout&quot;\n        android:icon=&quot;@drawable/log_out&quot;\n        /&gt;\n\n&lt;/menu&gt;\n</code></pre>\n<p><strong>MainActivity.java</strong></p>\n<pre><code>     @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n\n\n        // drawer layout instance to toggle the menu icon to open\n        // drawer and back button to close drawer\n        drawerLayout = findViewById(R.id.my_drawer_layout);\n        actionBarDrawerToggle = new ActionBarDrawerToggle(this, drawerLayout, R.string.nav_open, R.string.nav_close);\n\n        // pass the Open and Close toggle for the drawer layout listener\n        // to toggle the button\n        drawerLayout.addDrawerListener(actionBarDrawerToggle);\n        actionBarDrawerToggle.syncState();\n\n        // to make the Navigation drawer icon always appear on the action bar\n        getSupportActionBar().setDisplayHomeAsUpEnabled(true);\n\n    }\n\n\n  @Override\n public boolean onOptionsItemSelected(@NonNull MenuItem item) {\n\n     if (actionBarDrawerToggle.onOptionsItemSelected(item)) {\n         return true;\n     }\n     return super.onOptionsItemSelected(item);\n }\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/hkmg9.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","html","swing"],"comments":[{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":0,"creation_date":1242501272,"post_id":872871,"comment_id":21780454,"body_markdown":"As with most things with Swing, the best course of action is to look at the source.","body":"As with most things with Swing, the best course of action is to look at the source."}],"answers":[{"tags":[],"owner":{"account_id":13185,"reputation":34155,"user_id":26334,"accept_rate":54,"display_name":"Draemon"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1242495666,"creation_date":1242495666,"answer_id":872880,"question_id":872871,"body_markdown":"I don&#39;t know exactly what tags are supported, but I would suggest that you restrict yourself to bold/italics (or even better strong/em assuming it supports them) and img tags. Anything else is likely to cause headaches, and probably means you&#39;re stuffing too much into that component.","title":"Which HTML tags are supported in Swing components?","body":"<p>I don't know exactly what tags are supported, but I would suggest that you restrict yourself to bold/italics (or even better strong/em assuming it supports them) and img tags. Anything else is likely to cause headaches, and probably means you're stuffing too much into that component.</p>\n"},{"tags":[],"owner":{"account_id":2539,"reputation":48109,"user_id":3542,"display_name":"Rob"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1242496290,"creation_date":1242496290,"answer_id":872899,"question_id":872871,"body_markdown":"I believe it&#39;s a narrow subset of HTML 3.x, although off the top of my head, I don&#39;t remember where I read that.","title":"Which HTML tags are supported in Swing components?","body":"<p>I believe it's a narrow subset of HTML 3.x, although off the top of my head, I don't remember where I read that.</p>\n"},{"tags":[],"owner":{"account_id":57055,"reputation":5529,"user_id":170918,"display_name":"Mr. Napik"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1363252593,"creation_date":1363252593,"answer_id":15405231,"question_id":872871,"body_markdown":"Swing supports HTML 3.2 (Wilbur) as Software Monkey said. You can find official documentation to this obsolescent (1996) version of HTML at: http://www.w3.org/TR/REC-html32.html\r\n\r\nJava 7 documentation on the topic: http://docs.oracle.com/javase/7/docs/api/javax/swing/text/html/package-summary.html\r\n\r\nThough it is worth of noting that it does not explicitly mention this information is valid for other Swing components.","title":"Which HTML tags are supported in Swing components?","body":"<p>Swing supports HTML 3.2 (Wilbur) as Software Monkey said. You can find official documentation to this obsolescent (1996) version of HTML at: <a href=\"http://www.w3.org/TR/REC-html32.html\" rel=\"noreferrer\">http://www.w3.org/TR/REC-html32.html</a></p>\n\n<p>Java 7 documentation on the topic: <a href=\"http://docs.oracle.com/javase/7/docs/api/javax/swing/text/html/package-summary.html\" rel=\"noreferrer\">http://docs.oracle.com/javase/7/docs/api/javax/swing/text/html/package-summary.html</a></p>\n\n<p>Though it is worth of noting that it does not explicitly mention this information is valid for other Swing components.</p>\n"},{"tags":[],"owner":{"account_id":2924378,"reputation":935,"user_id":2506021,"accept_rate":80,"display_name":"Rangi Keen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1608132043,"creation_date":1608132043,"answer_id":65326136,"question_id":872871,"body_markdown":"As @Mr.Napik notes in his answer, Swing HTML support was based on HTML 3.2, but it does support a few additional tags (notably `&lt;span&gt;`). The specific supported tags are documented in the [`HTML.Tag` documentation](https://docs.oracle.com/en/java/javase/11/docs/api/java.desktop/javax/swing/text/html/HTML.Tag.html).\r\n\r\nCSS support is also detailed in the [`CSS` documentation](https://docs.oracle.com/en/java/javase/11/docs/api/java.desktop/javax/swing/text/html/CSS.html).","title":"Which HTML tags are supported in Swing components?","body":"<p>As @Mr.Napik notes in his answer, Swing HTML support was based on HTML 3.2, but it does support a few additional tags (notably <code>&lt;span&gt;</code>). The specific supported tags are documented in the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.desktop/javax/swing/text/html/HTML.Tag.html\" rel=\"nofollow noreferrer\"><code>HTML.Tag</code> documentation</a>.</p>\n<p>CSS support is also detailed in the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.desktop/javax/swing/text/html/CSS.html\" rel=\"nofollow noreferrer\"><code>CSS</code> documentation</a>.</p>\n"},{"tags":[],"owner":{"account_id":14226434,"reputation":88,"user_id":10601796,"display_name":"user10276995"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660050830,"creation_date":1660050830,"answer_id":73292460,"question_id":872871,"body_markdown":"In fact Javax Swing HTML parser is a DTD driven parser.\r\nThe default DTD is called html32.dtd, meaning it supports most of HTML 32 recommendations.\r\n\r\nIf you want to support more Tags, you have to extend or rewrite this DTD.\r\nFor example, below, MathML support was added to Swing HTML :\r\n\r\n[![enter image description here][1]][1]\r\n\r\nA bug report was submitted to make this easier :\r\n[Add Reference or Informations About DTDBuilder in Documentation][2]\r\n\r\nBeware :\r\n- This is the first step to support your tag. Next, you had to design its rendering and register it in the View factory.\r\n- Swing Text HTML is not for read HTML documents from the World Wide Web.\r\n- Web Browsers don&#39;t use DTD approach.\r\n- DTD approach makes sens if you want to have a strict control of your document structure in a project with the ability to export to World Wide Web but without the need to read real World HTML Documents. The DTD may stuck with malformed documents.\r\n- Think of Swing HTML as a Wordpad where underlying document structure is HTML.\r\n\r\n  [1]: https://i.stack.imgur.com/I9pQE.gif\r\n  [2]: https://bugs.java.com/bugdatabase/view_bug.do?bug_id=8289722","title":"Which HTML tags are supported in Swing components?","body":"<p>In fact Javax Swing HTML parser is a DTD driven parser.\nThe default DTD is called html32.dtd, meaning it supports most of HTML 32 recommendations.</p>\n<p>If you want to support more Tags, you have to extend or rewrite this DTD.\nFor example, below, MathML support was added to Swing HTML :</p>\n<p><a href=\"https://i.stack.imgur.com/I9pQE.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/I9pQE.gif\" alt=\"enter image description here\" /></a></p>\n<p>A bug report was submitted to make this easier :\n<a href=\"https://bugs.java.com/bugdatabase/view_bug.do?bug_id=8289722\" rel=\"nofollow noreferrer\">Add Reference or Informations About DTDBuilder in Documentation</a></p>\n<p>Beware :</p>\n<ul>\n<li>This is the first step to support your tag. Next, you had to design its rendering and register it in the View factory.</li>\n<li>Swing Text HTML is not for read HTML documents from the World Wide Web.</li>\n<li>Web Browsers don't use DTD approach.</li>\n<li>DTD approach makes sens if you want to have a strict control of your document structure in a project with the ability to export to World Wide Web but without the need to read real World HTML Documents. The DTD may stuck with malformed documents.</li>\n<li>Think of Swing HTML as a Wordpad where underlying document structure is HTML.</li>\n</ul>\n"}],"owner":{"account_id":11983,"reputation":71675,"user_id":23368,"accept_rate":92,"display_name":"Daniel Rikowski"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6015,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"accepted_answer_id":15405231,"answer_count":5,"score":17,"last_activity_date":1660050830,"creation_date":1242495485,"question_id":872871,"body_markdown":"Many Swing components support embedded HTML, but I cannot find any official documentation on that subject. (Everything on Sun&#39;s pages about HTML seems to be targeted at JEditorPane)\r\n\r\nSo: Which HTML tags are supported in Swing components? \r\n\r\n**EDIT:** Although I said that I&#39;m missing &quot;official documentation&quot;, I&#39;d also like any &quot;unofficial&quot; documentation.\r\n\r\n","title":"Which HTML tags are supported in Swing components?","body":"<p>Many Swing components support embedded HTML, but I cannot find any official documentation on that subject. (Everything on Sun's pages about HTML seems to be targeted at JEditorPane)</p>\n\n<p>So: Which HTML tags are supported in Swing components? </p>\n\n<p><strong>EDIT:</strong> Although I said that I'm missing \"official documentation\", I'd also like any \"unofficial\" documentation.</p>\n"},{"tags":["java","multithreading","volatile"],"comments":[{"owner":{"account_id":1101161,"reputation":119804,"user_id":1093528,"accept_rate":65,"display_name":"fge"},"score":2,"creation_date":1371545614,"post_id":17164454,"comment_id":24849722,"body_markdown":"Uhm, is this the first edition? Double checked locking has been discouraged for some years now","body":"Uhm, is this the first edition? Double checked locking has been discouraged for some years now"},{"owner":{"account_id":2197855,"reputation":889,"user_id":1943085,"accept_rate":100,"display_name":"Lenymm"},"score":0,"creation_date":1371545709,"post_id":17164454,"comment_id":24849781,"body_markdown":"And the reason is: http://stackoverflow.com/questions/4926681/why-is-double-checked-locking-broken-in-java?rq=1","body":"And the reason is: <a href=\"http://stackoverflow.com/questions/4926681/why-is-double-checked-locking-broken-in-java?rq=1\" title=\"why is double checked locking broken in java\">stackoverflow.com/questions/4926681/&hellip;</a>"},{"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"score":5,"creation_date":1371545767,"post_id":17164454,"comment_id":24849814,"body_markdown":"@fge: Not really. Since Java 5, it&#39;s actually an OK pattern: http://www.cs.umd.edu/~pugh/java/memoryModel/DoubleCheckedLocking.html","body":"@fge: Not really. Since Java 5, it&#39;s actually an OK pattern: <a href=\"http://www.cs.umd.edu/~pugh/java/memoryModel/DoubleCheckedLocking.html\" rel=\"nofollow noreferrer\">cs.umd.edu/~pugh/java/memoryModel/DoubleCheckedLocking.html</a>"},{"owner":{"account_id":1101161,"reputation":119804,"user_id":1093528,"accept_rate":65,"display_name":"fge"},"score":1,"creation_date":1371545978,"post_id":17164454,"comment_id":24849935,"body_markdown":"@LukasEder it is largely discouraged because Java 6+ renders it basically obsolete","body":"@LukasEder it is largely discouraged because Java 6+ renders it basically obsolete"},{"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"score":0,"creation_date":1371546119,"post_id":17164454,"comment_id":24850025,"body_markdown":"I&#39;m still undecided about these things. Why did [`java.io.File.toPath()`](http://hg.openjdk.java.net/lambda/lambda/jdk/file/tip/src/share/classes/java/io/File.java) use double-checked locking, introduced in Java 1.7?","body":"I&#39;m still undecided about these things. Why did <a href=\"http://hg.openjdk.java.net/lambda/lambda/jdk/file/tip/src/share/classes/java/io/File.java\" rel=\"nofollow noreferrer\"><code>java.io.File.toPath()</code></a> use double-checked locking, introduced in Java 1.7?"},{"owner":{"account_id":1101161,"reputation":119804,"user_id":1093528,"accept_rate":65,"display_name":"fge"},"score":0,"creation_date":1371546637,"post_id":17164454,"comment_id":24850304,"body_markdown":"@LukasEder urgh! I guess it is because they didn&#39;t really have a choice here given the many constructors of `File`... They didn&#39;t want to make the effort to make `toPath` `final` and initializing it in all of them, I guess","body":"@LukasEder urgh! I guess it is because they didn&#39;t really have a choice here given the many constructors of <code>File</code>... They didn&#39;t want to make the effort to make <code>toPath</code> <code>final</code> and initializing it in all of them, I guess"},{"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"score":0,"creation_date":1371547336,"post_id":17164454,"comment_id":24850662,"body_markdown":"@fge: I think lazy initialisation is important there, as the call to `FileSystems.getDefault().getPath(path);` is too expensive to be made for every `File` in the Java world... So how to lazy-initialise and do without double-checked locking or synchronisation?","body":"@fge: I think lazy initialisation is important there, as the call to <code>FileSystems.getDefault().getPath(path);</code> is too expensive to be made for every <code>File</code> in the Java world... So how to lazy-initialise and do without double-checked locking or synchronisation?"},{"owner":{"account_id":2081572,"reputation":2454,"user_id":1853458,"accept_rate":85,"display_name":"veritas"},"score":1,"creation_date":1371548328,"post_id":17164454,"comment_id":24851184,"body_markdown":"@Lenymm the link you provided didn&#39;t talk about Local Variable Result.","body":"@Lenymm the link you provided didn&#39;t talk about Local Variable Result."}],"answers":[{"tags":[],"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1371550789,"creation_date":1371549160,"answer_id":17165786,"question_id":17164454,"body_markdown":"Once `field` has been initialised, the code is either:\r\n\r\n    if (field == null) {...}\r\n    return field;\r\n\r\nor:\r\n\r\n    result = field;\r\n    if (result == null) {...}\r\n    return result;\r\n\r\nIn the first case you read the volatile variable twice whereas in the second you only read it once. Although volatile reads are very fast, they can be a little slower than reading from a local variable (I don&#39;t know if it is 25%).\r\n\r\nNotes:\r\n\r\n- volatile reads are as cheap as normal reads on recent processors (at least x86)/JVMs, i.e. there is no difference.\r\n- however the compiler can better optimise a code without volatile so you could get efficiency from better compiled code.\r\n- 25% of a few nanoseconds is still not much anyway.\r\n- it is a standard idiom that you can find in many classes of the java.util.concurrent package - see for example [this method in ThreadPoolExecutor](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/util/concurrent/ThreadPoolExecutor.java#ThreadPoolExecutor.interruptWorkers%28%29) (there are many of them)","title":"Why Double checked locking is 25% faster in Joshua Bloch Effective Java Example","body":"<p>Once <code>field</code> has been initialised, the code is either:</p>\n\n<pre><code>if (field == null) {...}\nreturn field;\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>result = field;\nif (result == null) {...}\nreturn result;\n</code></pre>\n\n<p>In the first case you read the volatile variable twice whereas in the second you only read it once. Although volatile reads are very fast, they can be a little slower than reading from a local variable (I don't know if it is 25%).</p>\n\n<p>Notes:</p>\n\n<ul>\n<li>volatile reads are as cheap as normal reads on recent processors (at least x86)/JVMs, i.e. there is no difference.</li>\n<li>however the compiler can better optimise a code without volatile so you could get efficiency from better compiled code.</li>\n<li>25% of a few nanoseconds is still not much anyway.</li>\n<li>it is a standard idiom that you can find in many classes of the java.util.concurrent package - see for example <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/util/concurrent/ThreadPoolExecutor.java#ThreadPoolExecutor.interruptWorkers%28%29\">this method in ThreadPoolExecutor</a> (there are many of them)</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2478127,"reputation":19514,"user_id":2158288,"display_name":"ZhongYu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1371608993,"creation_date":1371608993,"answer_id":17181978,"question_id":17164454,"body_markdown":"Without using a local variable, in most invocations we have effectively\r\n\r\n    if(field!=null) // true\r\n        return field;\r\n\r\nso there are two volatile reads, which is slower than one volatile read.\r\n\r\nActually JVM can merge the two volatile reads into one volatile read and still conform to JMM. But we expect JVM to perform a good faith volatile read every time it&#39;s told to, not to be a smartass and try to optimize away any volatile read. Consider this code\r\n\r\n    volatile boolean ready;\r\n\r\n    do{}while(!ready); // busy wait\r\n\r\nwe expect JVM to really load the variable repeatedly.","title":"Why Double checked locking is 25% faster in Joshua Bloch Effective Java Example","body":"<p>Without using a local variable, in most invocations we have effectively</p>\n\n<pre><code>if(field!=null) // true\n    return field;\n</code></pre>\n\n<p>so there are two volatile reads, which is slower than one volatile read.</p>\n\n<p>Actually JVM can merge the two volatile reads into one volatile read and still conform to JMM. But we expect JVM to perform a good faith volatile read every time it's told to, not to be a smartass and try to optimize away any volatile read. Consider this code</p>\n\n<pre><code>volatile boolean ready;\n\ndo{}while(!ready); // busy wait\n</code></pre>\n\n<p>we expect JVM to really load the variable repeatedly.</p>\n"}],"owner":{"account_id":2081572,"reputation":2454,"user_id":1853458,"accept_rate":85,"display_name":"veritas"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2329,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":17165786,"answer_count":2,"score":10,"last_activity_date":1660050466,"creation_date":1371545309,"question_id":17164454,"body_markdown":"Below is a snippet from Effective Java 2nd Edition. The author claims that the following piece of code is 25% faster than a code in which you do not use the `result` variable.\r\nAccording to the book &quot;What this variable does is to ensure that field is read only once in the common case where it’s already initialized.&quot; .\r\nI am  not able to understand why this code would be faster after the value is initialized compared to if we do not use the local variable result. In either case you will have only one volatile read after initialization whether you use the local variable result or not.\r\n\r\n    // Double-check idiom for lazy initialization of instance fields \r\n    private volatile FieldType field;\r\n\r\n    FieldType getField() {\r\n        FieldType result = field;\r\n        if (result == null) {  // First check (no locking)\r\n            synchronized(this) {\r\n                result = field;\r\n                if (result == null)  // Second check (with locking)\r\n                    field = result = computeFieldValue();\r\n            }\r\n        }\r\n        return result;\r\n    }","title":"Why Double checked locking is 25% faster in Joshua Bloch Effective Java Example","body":"<p>Below is a snippet from Effective Java 2nd Edition. The author claims that the following piece of code is 25% faster than a code in which you do not use the <code>result</code> variable.\nAccording to the book &quot;What this variable does is to ensure that field is read only once in the common case where it’s already initialized.&quot; .\nI am  not able to understand why this code would be faster after the value is initialized compared to if we do not use the local variable result. In either case you will have only one volatile read after initialization whether you use the local variable result or not.</p>\n<pre><code>// Double-check idiom for lazy initialization of instance fields \nprivate volatile FieldType field;\n\nFieldType getField() {\n    FieldType result = field;\n    if (result == null) {  // First check (no locking)\n        synchronized(this) {\n            result = field;\n            if (result == null)  // Second check (with locking)\n                field = result = computeFieldValue();\n        }\n    }\n    return result;\n}\n</code></pre>\n"},{"tags":["java","android","material-design","maven-central"],"answers":[{"tags":[],"owner":{"account_id":24717121,"reputation":11,"user_id":18606704,"display_name":"Anmol Mahay"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1654809208,"creation_date":1648462057,"answer_id":71645699,"question_id":70005237,"body_markdown":"I recommend to use `.start();` at last.  \r\nLike `.cancleable(true)).start();`.","title":"Change TapTargetView into a TapTargetSequence","body":"<p>I recommend to use <code>.start();</code> at last.<br />\nLike <code>.cancleable(true)).start();</code>.</p>\n"},{"tags":[],"owner":{"account_id":22083723,"reputation":124,"user_id":16342910,"display_name":"Prasanna Kumar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660050388,"creation_date":1660050388,"answer_id":73292359,"question_id":70005237,"body_markdown":"You forgot to add &quot;start()&quot; method at the end and also TapTargetSequence.Listener.\r\nTry the below code, it should work.\r\n\r\n        TapTargetSequence(this)\r\n        .targets(\r\n            TapTarget.forView(buttonSettings, getString(R.string.onboarding_settings_title),\r\n                getString(R.string.onboarding_settings_description))\r\n                .outerCircleColor(R.color.blue)\r\n                .targetCircleColor(R.color.white)\r\n                .titleTextSize(22)\r\n                .titleTextColor(R.color.white)\r\n                .descriptionTextSize(14)\r\n                .cancelable(true),\r\n            TapTarget.forView(buttonMedia, getString(R.string.onboarding_media_title),\r\n                getString(R.string.onboarding_media_description))\r\n                .outerCircleColor(R.color.blue)\r\n                .targetCircleColor(R.color.white)\r\n                .titleTextSize(22)\r\n                .titleTextColor(R.color.white)\r\n                .descriptionTextSize(14)\r\n                .cancelable(true)).start()\r\n    object : TapTargetSequence.Listener {\r\n                override fun onSequenceFinish() {\r\n                    Toast.makeText(this, &quot;Sequence Finished!&quot;, Toast.LENGTH_SHORT).show()\r\n                }\r\n    \r\n                override fun onSequenceStep(lastTarget: TapTarget?, targetClicked: Boolean) {\r\n                    Toast.makeText(this, &quot;Great&quot;, Toast.LENGTH_SHORT).show()\r\n                }\r\n    \r\n                override fun onSequenceCanceled(lastTarget: TapTarget?) {\r\n                }\r\n            }","title":"Change TapTargetView into a TapTargetSequence","body":"<p>You forgot to add &quot;start()&quot; method at the end and also TapTargetSequence.Listener.\nTry the below code, it should work.</p>\n<pre><code>    TapTargetSequence(this)\n    .targets(\n        TapTarget.forView(buttonSettings, getString(R.string.onboarding_settings_title),\n            getString(R.string.onboarding_settings_description))\n            .outerCircleColor(R.color.blue)\n            .targetCircleColor(R.color.white)\n            .titleTextSize(22)\n            .titleTextColor(R.color.white)\n            .descriptionTextSize(14)\n            .cancelable(true),\n        TapTarget.forView(buttonMedia, getString(R.string.onboarding_media_title),\n            getString(R.string.onboarding_media_description))\n            .outerCircleColor(R.color.blue)\n            .targetCircleColor(R.color.white)\n            .titleTextSize(22)\n            .titleTextColor(R.color.white)\n            .descriptionTextSize(14)\n            .cancelable(true)).start()\nobject : TapTargetSequence.Listener {\n            override fun onSequenceFinish() {\n                Toast.makeText(this, &quot;Sequence Finished!&quot;, Toast.LENGTH_SHORT).show()\n            }\n\n            override fun onSequenceStep(lastTarget: TapTarget?, targetClicked: Boolean) {\n                Toast.makeText(this, &quot;Great&quot;, Toast.LENGTH_SHORT).show()\n            }\n\n            override fun onSequenceCanceled(lastTarget: TapTarget?) {\n            }\n        }\n</code></pre>\n"}],"owner":{"account_id":18549138,"reputation":35,"user_id":13515739,"display_name":"Brenton"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":140,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73292359,"answer_count":2,"score":0,"last_activity_date":1660050388,"creation_date":1637155553,"question_id":70005237,"body_markdown":"In this code example I have a single TapTargetView working:\r\n\r\n    if (controllerVisible &amp;&amp; playerView.isControllerFullyVisible()) {\r\n        if (setPrefs.firstRun) {\r\n            TapTargetView.showFor(PlayerActivity.this,\r\n                TapTarget.forView(buttonSettings, getString(R.string.onboarding_settings_title),\r\n                        getString(R.string.onboarding_settings_description))\r\n                        .outerCircleColor(R.color.blue)\r\n                        .targetCircleColor(R.color.white)\r\n                        .titleTextSize(22)\r\n                        .titleTextColor(R.color.white)\r\n                        .descriptionTextSize(14)\r\n                        .cancelable(true),\r\n                new TapTargetView.Listener() {\r\n                    @Override\r\n                    public void onTargetClick(TapTargetView view) {\r\n                        super.onTargetClick(view);\r\n                        buttonOpen.performClick();\r\n                    }\r\n                });\r\n            setPrefs.markFirstRun();\r\n        }\r\n    }\r\n\r\nBut I cannot work out how to create a TapTargetSequence using the following example:\r\n\r\n    TapTargetSequence(this)\r\n        .targets(\r\n            TapTarget.forView(buttonSettings, getString(R.string.onboarding_settings_title),\r\n    \t\t\tgetString(R.string.onboarding_settings_description))\r\n                .outerCircleColor(R.color.blue)\r\n                .targetCircleColor(R.color.white)\r\n                .titleTextSize(22)\r\n                .titleTextColor(R.color.white)\r\n                .descriptionTextSize(14)\r\n                .cancelable(true),\r\n            TapTarget.forView(buttonMedia, getString(R.string.onboarding_media_title),\r\n    \t\t\tgetString(R.string.onboarding_media_description))\r\n                .outerCircleColor(R.color.blue)\r\n                .targetCircleColor(R.color.white)\r\n                .titleTextSize(22)\r\n                .titleTextColor(R.color.white)\r\n                .descriptionTextSize(14)\r\n                .cancelable(true))\r\n\r\nI&#39;m having a great deal of trouble with this could someone please help me to figure this out.\r\n\r\nThank you","title":"Change TapTargetView into a TapTargetSequence","body":"<p>In this code example I have a single TapTargetView working:</p>\n<pre><code>if (controllerVisible &amp;&amp; playerView.isControllerFullyVisible()) {\n    if (setPrefs.firstRun) {\n        TapTargetView.showFor(PlayerActivity.this,\n            TapTarget.forView(buttonSettings, getString(R.string.onboarding_settings_title),\n                    getString(R.string.onboarding_settings_description))\n                    .outerCircleColor(R.color.blue)\n                    .targetCircleColor(R.color.white)\n                    .titleTextSize(22)\n                    .titleTextColor(R.color.white)\n                    .descriptionTextSize(14)\n                    .cancelable(true),\n            new TapTargetView.Listener() {\n                @Override\n                public void onTargetClick(TapTargetView view) {\n                    super.onTargetClick(view);\n                    buttonOpen.performClick();\n                }\n            });\n        setPrefs.markFirstRun();\n    }\n}\n</code></pre>\n<p>But I cannot work out how to create a TapTargetSequence using the following example:</p>\n<pre><code>TapTargetSequence(this)\n    .targets(\n        TapTarget.forView(buttonSettings, getString(R.string.onboarding_settings_title),\n            getString(R.string.onboarding_settings_description))\n            .outerCircleColor(R.color.blue)\n            .targetCircleColor(R.color.white)\n            .titleTextSize(22)\n            .titleTextColor(R.color.white)\n            .descriptionTextSize(14)\n            .cancelable(true),\n        TapTarget.forView(buttonMedia, getString(R.string.onboarding_media_title),\n            getString(R.string.onboarding_media_description))\n            .outerCircleColor(R.color.blue)\n            .targetCircleColor(R.color.white)\n            .titleTextSize(22)\n            .titleTextColor(R.color.white)\n            .descriptionTextSize(14)\n            .cancelable(true))\n</code></pre>\n<p>I'm having a great deal of trouble with this could someone please help me to figure this out.</p>\n<p>Thank you</p>\n"},{"tags":["java","logging","rust"],"answers":[{"tags":[],"owner":{"account_id":35227,"reputation":39176,"user_id":99692,"accept_rate":50,"display_name":"Kevin Reid"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654282903,"creation_date":1654282903,"answer_id":72494099,"question_id":72493318,"body_markdown":"The `log` library provides only a mechanism for passing log messages to a global hook. Something must call [`log::set_logger()`](https://docs.rs/log/latest/log/fn.set_logger.html) with a function that does something with the messages. There are [a variety of libraries you can use for this purpose](https://docs.rs/log/latest/log/#available-logging-implementations); if you want to hook up your `log` logging to `slf4j` you will need to find or write code that does that combination specifically. (I don&#39;t know much of anything about JNI+Rust so I can&#39;t say whether one exists already.)","title":"Java/Rust logging bridge","body":"<p>The <code>log</code> library provides only a mechanism for passing log messages to a global hook. Something must call <a href=\"https://docs.rs/log/latest/log/fn.set_logger.html\" rel=\"nofollow noreferrer\"><code>log::set_logger()</code></a> with a function that does something with the messages. There are <a href=\"https://docs.rs/log/latest/log/#available-logging-implementations\" rel=\"nofollow noreferrer\">a variety of libraries you can use for this purpose</a>; if you want to hook up your <code>log</code> logging to <code>slf4j</code> you will need to find or write code that does that combination specifically. (I don't know much of anything about JNI+Rust so I can't say whether one exists already.)</p>\n"},{"tags":[],"owner":{"account_id":252934,"reputation":3119,"user_id":1644618,"display_name":"yerlilbilgin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660050179,"creation_date":1660050179,"answer_id":73292307,"question_id":72493318,"body_markdown":"1. Create your own logger (don&#39;t use env_logger or others):\r\n\r\n```rust\r\nuse std::sync::Arc;\r\nuse log::{LevelFilter, Level};\r\npub type LogCallbackType = Arc&lt;dyn Fn(Level, String) + Send + Sync&gt;;\r\npub struct SimpleLogger {\r\n  callback: LogCallbackType,\r\n  level: LevelFilter,\r\n}\r\n```\r\n\r\n2. Provide a function to bind a callback to your logger\r\n```rust\r\nimpl SimpleLogger {\r\n  pub fn init(level: LevelFilter, callback: LogCallbackType) {\r\n    let message = std::format!(&quot;Initialize logging to {}&quot;, &amp;level);\r\n    callback(Level::Debug, message);\r\n\r\n    log::set_boxed_logger(Box::new(SimpleLogger { callback, level }))\r\n      .map(|()| log::set_max_level(level));\r\n  }\r\n```\r\n3. Externalize your function to other languages\r\n```rust\r\nuse std::os::raw::c_char;\r\npub type NativeString = *const c_char;\r\npub type ExternLogCallbackType = Option&lt;extern &quot;C&quot; fn(u32, NativeString)&gt;;\r\n\r\n#[no_mangle]\r\npub extern fn init_logging(level: u32, callback: ExternLogCallbackType) {\r\n  if !callback.is_none() {\r\n    let callback = callback.unwrap();\r\n    let level_filter = SimpleLogger::u32_to_level_filter(level);\r\n    SimpleLogger::init(level_filter, Arc::new(move |level, msg| {\r\n      callback(level as u32, msg.as_ptr());\r\n    }))\r\n  }\r\n}\r\n```\r\n\r\n4. Prepare the JNA stuff\r\n\r\n```java\r\npublic static class LogCallback implements Callback {\r\n  public static final Logger LOGGER = LoggerFactory.getLogger(&quot;myrustliblog&quot;);\r\n\r\n  public void callback(int level, String message) {\r\n    switch (level) {\r\n      case 0:\r\n        break;\r\n      case 1:\r\n        LOGGER.error(message);\r\n        break;\r\n      case 2:\r\n        LOGGER.warn(message);\r\n        break;\r\n      case 3:\r\n        LOGGER.info(message);\r\n        break;\r\n      case 4:\r\n        LOGGER.debug(message);\r\n        break;\r\n      case 5:\r\n        LOGGER.trace(message);\r\n        break;\r\n      default:\r\n        LOGGER.trace(message);\r\n        break;\r\n    }\r\n  }\r\n}\r\n\r\npublic interface MyNativeInterface extends Library {\r\n   //...other stuff ...\r\n\r\n   String init_logging(int level, LogCallback callback);\r\n   //...\r\n}\r\n```\r\n\r\n5. Finally Initialize logging from Java:\r\n\r\n```java\r\nstatic final LogCallback LOG_CALLBACK = new LogCallback();\r\n\r\npublic static void initLogging(org.slf4j.event.Level level) {\r\n    int iLevel = 0;\r\n    switch (level) {\r\n      case ERROR:\r\n        iLevel = 1;\r\n        break;\r\n      case WARN:\r\n        iLevel = 2;\r\n        break;\r\n      case INFO:\r\n        iLevel = 3;\r\n        break;\r\n      case DEBUG:\r\n        iLevel = 4;\r\n        break;\r\n      case TRACE:\r\n        iLevel = 5;\r\n        break;\r\n    }\r\n    _myInterfaceJnaInstance.init_logging(iLevel, LOG_CALLBACK);\r\n  }\r\n\r\n```\r\n\r\nNotes:\r\n1. I omitted result handling in Rust. You should be able to do it\r\n2. This is from my running code, it works. But you might need to do a few tweaks for memory leaks (i.e. deallocate the strings after being logged).","title":"Java/Rust logging bridge","body":"<ol>\n<li>Create your own logger (don't use env_logger or others):</li>\n</ol>\n<pre class=\"lang-rust prettyprint-override\"><code>use std::sync::Arc;\nuse log::{LevelFilter, Level};\npub type LogCallbackType = Arc&lt;dyn Fn(Level, String) + Send + Sync&gt;;\npub struct SimpleLogger {\n  callback: LogCallbackType,\n  level: LevelFilter,\n}\n</code></pre>\n<ol start=\"2\">\n<li>Provide a function to bind a callback to your logger</li>\n</ol>\n<pre class=\"lang-rust prettyprint-override\"><code>impl SimpleLogger {\n  pub fn init(level: LevelFilter, callback: LogCallbackType) {\n    let message = std::format!(&quot;Initialize logging to {}&quot;, &amp;level);\n    callback(Level::Debug, message);\n\n    log::set_boxed_logger(Box::new(SimpleLogger { callback, level }))\n      .map(|()| log::set_max_level(level));\n  }\n</code></pre>\n<ol start=\"3\">\n<li>Externalize your function to other languages</li>\n</ol>\n<pre class=\"lang-rust prettyprint-override\"><code>use std::os::raw::c_char;\npub type NativeString = *const c_char;\npub type ExternLogCallbackType = Option&lt;extern &quot;C&quot; fn(u32, NativeString)&gt;;\n\n#[no_mangle]\npub extern fn init_logging(level: u32, callback: ExternLogCallbackType) {\n  if !callback.is_none() {\n    let callback = callback.unwrap();\n    let level_filter = SimpleLogger::u32_to_level_filter(level);\n    SimpleLogger::init(level_filter, Arc::new(move |level, msg| {\n      callback(level as u32, msg.as_ptr());\n    }))\n  }\n}\n</code></pre>\n<ol start=\"4\">\n<li>Prepare the JNA stuff</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>public static class LogCallback implements Callback {\n  public static final Logger LOGGER = LoggerFactory.getLogger(&quot;myrustliblog&quot;);\n\n  public void callback(int level, String message) {\n    switch (level) {\n      case 0:\n        break;\n      case 1:\n        LOGGER.error(message);\n        break;\n      case 2:\n        LOGGER.warn(message);\n        break;\n      case 3:\n        LOGGER.info(message);\n        break;\n      case 4:\n        LOGGER.debug(message);\n        break;\n      case 5:\n        LOGGER.trace(message);\n        break;\n      default:\n        LOGGER.trace(message);\n        break;\n    }\n  }\n}\n\npublic interface MyNativeInterface extends Library {\n   //...other stuff ...\n\n   String init_logging(int level, LogCallback callback);\n   //...\n}\n</code></pre>\n<ol start=\"5\">\n<li>Finally Initialize logging from Java:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>static final LogCallback LOG_CALLBACK = new LogCallback();\n\npublic static void initLogging(org.slf4j.event.Level level) {\n    int iLevel = 0;\n    switch (level) {\n      case ERROR:\n        iLevel = 1;\n        break;\n      case WARN:\n        iLevel = 2;\n        break;\n      case INFO:\n        iLevel = 3;\n        break;\n      case DEBUG:\n        iLevel = 4;\n        break;\n      case TRACE:\n        iLevel = 5;\n        break;\n    }\n    _myInterfaceJnaInstance.init_logging(iLevel, LOG_CALLBACK);\n  }\n\n</code></pre>\n<p>Notes:</p>\n<ol>\n<li>I omitted result handling in Rust. You should be able to do it</li>\n<li>This is from my running code, it works. But you might need to do a few tweaks for memory leaks (i.e. deallocate the strings after being logged).</li>\n</ol>\n"}],"owner":{"account_id":487587,"reputation":3346,"user_id":1375292,"accept_rate":67,"display_name":"Troy Daniels"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":293,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1660050179,"creation_date":1654278268,"question_id":72493318,"body_markdown":"I have a Java program that uses JNI to call a Rust library.  In the rust code, I have calls to `info!` which do not appear in the output.  I am 99% positive this is because I am not initializing the Rust logging system.\r\n\r\nWhen I had a similar problem in Python code calling Rust code, there was a module that I added which did the work to connect the Rust logging system to the python logger.  \r\n\r\nIs there a similar bridge for Rust and Java?\r\n\r\nI am using `slf4j` in Java and `log::info` in Rust.  \r\n\r\nI searched for an bridge but the closest I found was how to call Rust from Java.","title":"Java/Rust logging bridge","body":"<p>I have a Java program that uses JNI to call a Rust library.  In the rust code, I have calls to <code>info!</code> which do not appear in the output.  I am 99% positive this is because I am not initializing the Rust logging system.</p>\n<p>When I had a similar problem in Python code calling Rust code, there was a module that I added which did the work to connect the Rust logging system to the python logger.</p>\n<p>Is there a similar bridge for Rust and Java?</p>\n<p>I am using <code>slf4j</code> in Java and <code>log::info</code> in Rust.</p>\n<p>I searched for an bridge but the closest I found was how to call Rust from Java.</p>\n"},{"tags":["java","spring-webflux","spring-webclient","openapi-generator","openapi-generator-maven-plugin"],"answers":[{"tags":[],"owner":{"account_id":1736824,"reputation":5410,"user_id":1589188,"accept_rate":66,"display_name":"user1589188"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1657682999,"creation_date":1657682999,"answer_id":72960603,"question_id":72934235,"body_markdown":"Found a solution: add the following options to the OpenAPI Generator Maven Plugin then generate the code again, which would replace `File` to `Resource`\r\n\r\n    &lt;generatorName&gt;java&lt;/generatorName&gt;\r\n    &lt;library&gt;webclient&lt;/library&gt;\r\n    &lt;typeMappings&gt;string+binary=Resource&lt;/typeMappings&gt;\r\n    &lt;importMappings&gt;Resource=org.springframework.core.io.Resource&lt;/importMappings&gt;\r\n\r\nThe above is saying when the return type is `string` and the format is `binary`, map it to `Resource` and for `Resource` import it as `org.springframework.core.io.Resource`. There you go.","title":"Spring WebClient does not decode application/octet-stream into File object","body":"<p>Found a solution: add the following options to the OpenAPI Generator Maven Plugin then generate the code again, which would replace <code>File</code> to <code>Resource</code></p>\n<pre><code>&lt;generatorName&gt;java&lt;/generatorName&gt;\n&lt;library&gt;webclient&lt;/library&gt;\n&lt;typeMappings&gt;string+binary=Resource&lt;/typeMappings&gt;\n&lt;importMappings&gt;Resource=org.springframework.core.io.Resource&lt;/importMappings&gt;\n</code></pre>\n<p>The above is saying when the return type is <code>string</code> and the format is <code>binary</code>, map it to <code>Resource</code> and for <code>Resource</code> import it as <code>org.springframework.core.io.Resource</code>. There you go.</p>\n"},{"tags":[],"owner":{"account_id":10501966,"reputation":21,"user_id":7740422,"display_name":"Jakob Jensen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660049721,"creation_date":1660049721,"answer_id":73292204,"question_id":72934235,"body_markdown":"I had the exact same issue, but using Gradle instead of Maven.\r\nHere is the syntax for doing the same in Gradle:\r\n\r\n    task generateClientSources(type: org.openapitools.generator.gradle.plugin.tasks.GenerateTask) {\r\n        generatorName = &#39;java&#39;\r\n        // other configs ..\r\n        configOptions = [\r\n                // other configs ..\r\n                library : &#39;webclient&#39;\r\n        ]\r\n        typeMappings = [\r\n                File : &#39;Resource&#39;\r\n        ]\r\n        importMappings = [\r\n                File : &#39;org.springframework.core.io.Resource&#39;\r\n        ]\r\n    }\r\n\r\n","title":"Spring WebClient does not decode application/octet-stream into File object","body":"<p>I had the exact same issue, but using Gradle instead of Maven.\nHere is the syntax for doing the same in Gradle:</p>\n<pre><code>task generateClientSources(type: org.openapitools.generator.gradle.plugin.tasks.GenerateTask) {\n    generatorName = 'java'\n    // other configs ..\n    configOptions = [\n            // other configs ..\n            library : 'webclient'\n    ]\n    typeMappings = [\n            File : 'Resource'\n    ]\n    importMappings = [\n            File : 'org.springframework.core.io.Resource'\n    ]\n}\n</code></pre>\n"}],"owner":{"account_id":1736824,"reputation":5410,"user_id":1589188,"accept_rate":66,"display_name":"user1589188"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1608,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72960603,"answer_count":2,"score":0,"last_activity_date":1660049721,"creation_date":1657518767,"question_id":72934235,"body_markdown":"Hi I am using OpenAPI Generator Maven Plugin to generate some Java Client code (using Spring WebClient library). One of the endpoints of my spec. returns binary content, like:\r\n\r\n    &quot;schema&quot;: {\r\n      &quot;type&quot;: &quot;string&quot;,\r\n      &quot;format&quot;: &quot;binary&quot;\r\n    }\r\n\r\nThe generated code uses `java.io.File` as the return type for that, like:\r\n\r\n    public Mono&lt;ResponseEntity&lt;File&gt;&gt; downloadWithHttpInfo(String filename) throws WebClientResponseException {\r\n        ParameterizedTypeReference&lt;File&gt; localVarReturnType = new ParameterizedTypeReference&lt;File&gt;() {};\r\n        return downloadRequestCreation(filename).toEntity(localVarReturnType);\r\n    }\r\n\r\nWhen calling this generated method, the response code was 200 (i.e. OK from the server side), but I got the following error in my client code:\r\n\r\n    org.springframework.web.reactive.function.UnsupportedMediaTypeException:\r\n        Content type &#39;application/octet-stream&#39; not supported for bodyType=java.io.File\r\n\r\nThis came from the `toEntity()` method, which is part of the Spring WebClient code instead of my code.\r\n\r\nIs there a way to workaround this? A: Instruct OpenAPI Generator Maven Plugin not to use `java.io.File` type but use `Resource` type? B: Somehow make WebClient able to decode application/octet-stream into `java.io.File`?","title":"Spring WebClient does not decode application/octet-stream into File object","body":"<p>Hi I am using OpenAPI Generator Maven Plugin to generate some Java Client code (using Spring WebClient library). One of the endpoints of my spec. returns binary content, like:</p>\n<pre><code>&quot;schema&quot;: {\n  &quot;type&quot;: &quot;string&quot;,\n  &quot;format&quot;: &quot;binary&quot;\n}\n</code></pre>\n<p>The generated code uses <code>java.io.File</code> as the return type for that, like:</p>\n<pre><code>public Mono&lt;ResponseEntity&lt;File&gt;&gt; downloadWithHttpInfo(String filename) throws WebClientResponseException {\n    ParameterizedTypeReference&lt;File&gt; localVarReturnType = new ParameterizedTypeReference&lt;File&gt;() {};\n    return downloadRequestCreation(filename).toEntity(localVarReturnType);\n}\n</code></pre>\n<p>When calling this generated method, the response code was 200 (i.e. OK from the server side), but I got the following error in my client code:</p>\n<pre><code>org.springframework.web.reactive.function.UnsupportedMediaTypeException:\n    Content type 'application/octet-stream' not supported for bodyType=java.io.File\n</code></pre>\n<p>This came from the <code>toEntity()</code> method, which is part of the Spring WebClient code instead of my code.</p>\n<p>Is there a way to workaround this? A: Instruct OpenAPI Generator Maven Plugin not to use <code>java.io.File</code> type but use <code>Resource</code> type? B: Somehow make WebClient able to decode application/octet-stream into <code>java.io.File</code>?</p>\n"},{"tags":["java","multithreading","thread-state","java-threads"],"comments":[{"owner":{"account_id":416171,"reputation":31417,"user_id":791406,"accept_rate":69,"display_name":"raffian"},"score":1,"creation_date":1423320998,"post_id":28378592,"comment_id":45105169,"body_markdown":"Why would I ask the person who drew the diagram when based on your comment they don&#39;t know better? :-)","body":"Why would I ask the person who drew the diagram when based on your comment they don&#39;t know better? :-)"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1423321458,"post_id":28378592,"comment_id":45105306,"body_markdown":"I said &quot;don&#39;t or didn&#39;t&quot;.  If you ask them, they may discover that they are wrong.  Or they may already have discovered.","body":"I said &quot;don&#39;t or didn&#39;t&quot;.  If you ask them, they may discover that they are wrong.  Or they may already have discovered."},{"owner":{"account_id":416171,"reputation":31417,"user_id":791406,"accept_rate":69,"display_name":"raffian"},"score":0,"creation_date":1423327906,"post_id":28378592,"comment_id":45107254,"body_markdown":"So you&#39;re saying my diagram is more accurate than roughly 106,000 Google results? Hellulalua!","body":"So you&#39;re saying my diagram is more accurate than roughly 106,000 Google results? Hellulalua!"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1423349960,"post_id":28378592,"comment_id":45114508,"body_markdown":"No.  I doubt that there are 106,000 different state diagram images on the web ...","body":"No.  I doubt that there are 106,000 different state diagram images on the web ..."},{"owner":{"account_id":1038483,"reputation":3505,"user_id":1045050,"accept_rate":30,"display_name":"Manu"},"score":3,"creation_date":1444112074,"post_id":28378592,"comment_id":53750670,"body_markdown":"If that is the case, what is special with `TIMED_WAIT` ? why it is directly going back to `RUNNABLE`, instead of moving to `BLOCKED` ?","body":"If that is the case, what is special with <code>TIMED_WAIT</code> ? why it is directly going back to <code>RUNNABLE</code>, instead of moving to <code>BLOCKED</code> ?"},{"owner":{"account_id":2739457,"reputation":7470,"user_id":2361308,"accept_rate":71,"display_name":"Hearen"},"score":1,"creation_date":1558178482,"post_id":28378592,"comment_id":99020140,"body_markdown":"there are some clearer answers, if you need. https://stackoverflow.com/q/15680422/2361308","body":"there are some clearer answers, if you need. <a href=\"https://stackoverflow.com/q/15680422/2361308\">stackoverflow.com/q/15680422/2361308</a>"}],"answers":[{"tags":[],"owner":{"account_id":195331,"reputation":275408,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"down_vote_count":0,"up_vote_count":26,"is_accepted":true,"score":26,"last_activity_date":1423285724,"creation_date":1423284909,"answer_id":28378726,"question_id":28378592,"body_markdown":"Any diagram that shows a `notify` invocation bringing a thread from WAITING to RUNNABLE is wrong (or is using an unclarified shortcut). Once a thread gets awoken from a `notify` (or even from a spurious wakeup) it needs to relock the monitor of the object on which it was waiting. This is the [`BLOCKED`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.State.html#BLOCKED) state.\r\n\r\n&gt; Thread state for a thread blocked waiting for a monitor lock. A thread\r\n&gt; in the blocked state is waiting for a monitor lock to enter a\r\n&gt; synchronized block/method or reenter a synchronized block/method after\r\n&gt; calling `Object.wait`.\r\n\r\nThis is explained in the javadoc of [`Object#notify()`][1]:\r\n\r\n&gt; The awakened thread will not be able to proceed until the current\r\n&gt; thread relinquishes the lock on this object.\r\n\r\nand [`Object#wait()`][2]\r\n\r\n&gt; The thread then waits until it can re-obtain ownership of the monitor\r\n&gt; and resumes execution.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notify--\r\n  [2]: http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait--","title":"Java thread state transition, WAITING to BLOCKED, or RUNNABLE?","body":"<p>Any diagram that shows a <code>notify</code> invocation bringing a thread from WAITING to RUNNABLE is wrong (or is using an unclarified shortcut). Once a thread gets awoken from a <code>notify</code> (or even from a spurious wakeup) it needs to relock the monitor of the object on which it was waiting. This is the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.State.html#BLOCKED\"><code>BLOCKED</code></a> state.</p>\n\n<blockquote>\n  <p>Thread state for a thread blocked waiting for a monitor lock. A thread\n  in the blocked state is waiting for a monitor lock to enter a\n  synchronized block/method or reenter a synchronized block/method after\n  calling <code>Object.wait</code>.</p>\n</blockquote>\n\n<p>This is explained in the javadoc of <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notify--\"><code>Object#notify()</code></a>:</p>\n\n<blockquote>\n  <p>The awakened thread will not be able to proceed until the current\n  thread relinquishes the lock on this object.</p>\n</blockquote>\n\n<p>and <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait--\"><code>Object#wait()</code></a></p>\n\n<blockquote>\n  <p>The thread then waits until it can re-obtain ownership of the monitor\n  and resumes execution.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1967198,"reputation":71,"user_id":1767111,"display_name":"hgfeaon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1435594858,"creation_date":1435594858,"answer_id":31120731,"question_id":28378592,"body_markdown":"I am focusing on the problem recently.\r\n\r\nas the Oracle document [Thread.State][1] says we can use LockSupport.park() to put the current thread into &#39;WAITING&#39; or &#39;TIMED_WAITING&#39; state. \r\n\r\nso when you try the [LockSupport.unpark()][2], the specified thread will return to &#39;RUNNABLE&#39; from &#39;WAITING&#39;/&#39;TIMED_WAITING&#39;. (I am not sure whether it will go through the &#39;BLOCKED&#39; state)\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.State.html &quot;Thread.State&quot;\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/LockSupport.html#unpark(java.lang.Thread)","title":"Java thread state transition, WAITING to BLOCKED, or RUNNABLE?","body":"<p>I am focusing on the problem recently.</p>\n\n<p>as the Oracle document <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.State.html\" rel=\"nofollow\" title=\"Thread.State\">Thread.State</a> says we can use LockSupport.park() to put the current thread into 'WAITING' or 'TIMED_WAITING' state. </p>\n\n<p>so when you try the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/LockSupport.html#unpark(java.lang.Thread)\" rel=\"nofollow\">LockSupport.unpark()</a>, the specified thread will return to 'RUNNABLE' from 'WAITING'/'TIMED_WAITING'. (I am not sure whether it will go through the 'BLOCKED' state)</p>\n"},{"tags":[],"owner":{"display_name":"user4768611"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1499029294,"creation_date":1499029294,"answer_id":44875182,"question_id":28378592,"body_markdown":"A thread is in **WAITING** state goes in **BLOCK** state,until it acquires monitor by notify and become **RUNNABLE**. \r\n\r\nSame applies for **TIMEDWAITING**,it goes in **BLOCK** state,if monitor is hold by some other thread,even though specified time has passed.*(your diagram need to be corrected)*","title":"Java thread state transition, WAITING to BLOCKED, or RUNNABLE?","body":"<p>A thread is in <strong>WAITING</strong> state goes in <strong>BLOCK</strong> state,until it acquires monitor by notify and become <strong>RUNNABLE</strong>. </p>\n\n<p>Same applies for <strong>TIMEDWAITING</strong>,it goes in <strong>BLOCK</strong> state,if monitor is hold by some other thread,even though specified time has passed.<em>(your diagram need to be corrected)</em></p>\n"},{"tags":[],"owner":{"account_id":7938112,"reputation":3993,"user_id":5993278,"accept_rate":39,"display_name":"Alex"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660049580,"creation_date":1626533742,"answer_id":68421632,"question_id":28378592,"body_markdown":"It is worth to mention that is also true for `Thread.interrupt()` method during `WAITING` state while in `lock.wait()` method.\r\n\r\n `Thread.interrupt()` method will firstly make `WAITING` thread `BLOCKED` with `isInterrupted` flag set to true, and only after reacquiring lock interrupted thread will be able to throw `InterruptedException` (that is obvious, as it cannot handle exception, by that continuing execution without having exclusive lock before). ([example here][1])\r\n\r\nSimply to say \r\n\r\nAlways `WAITING -&gt; BLOCKED` to be able again compete for the lock, and after that to acquire it eventually and run its&#39; code `RUNNABLE`.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/6698977/thread-interrupt-will-it-cancel-oncoming-wait-call/68421310#68421310","title":"Java thread state transition, WAITING to BLOCKED, or RUNNABLE?","body":"<p>It is worth to mention that is also true for <code>Thread.interrupt()</code> method during <code>WAITING</code> state while in <code>lock.wait()</code> method.</p>\n<p><code>Thread.interrupt()</code> method will firstly make <code>WAITING</code> thread <code>BLOCKED</code> with <code>isInterrupted</code> flag set to true, and only after reacquiring lock interrupted thread will be able to throw <code>InterruptedException</code> (that is obvious, as it cannot handle exception, by that continuing execution without having exclusive lock before). (<a href=\"https://stackoverflow.com/questions/6698977/thread-interrupt-will-it-cancel-oncoming-wait-call/68421310#68421310\">example here</a>)</p>\n<p>Simply to say</p>\n<p>Always <code>WAITING -&gt; BLOCKED</code> to be able again compete for the lock, and after that to acquire it eventually and run its' code <code>RUNNABLE</code>.</p>\n"}],"owner":{"account_id":416171,"reputation":31417,"user_id":791406,"accept_rate":69,"display_name":"raffian"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12833,"favorite_count":0,"down_vote_count":0,"up_vote_count":35,"accepted_answer_id":28378726,"answer_count":4,"score":35,"last_activity_date":1660049580,"creation_date":1423283761,"question_id":28378592,"body_markdown":"There seems to be a discrepancy between SO consensus and nearly every Java thread state diagram on the Internet; specifically, regarding thread state transition *from* `WAITING` after `notify()` or `notifyAll()` is invoked...\n\n- *WAITING [never][1] goes directly to RUNNABLE*\n- *The thread is WAITING until it is notified...Then it [becomes][2] BLOCKED...*\n- *Once this thread is notified, it [will not be runnable][3]...This is..Blocked State.*\n\nSo the concensus on SO is: a thread transitions from `WAITING` to `BLOCKED` after invoking `notify()` or `notifyAll()`; diagram below illustrates this transition in green.\n\n### Question\nWhy do most [state diagrams on the web][4] illustrate the transition from `WAITING` to `RUNNABLE`, not `BLOCKED`? Depiction in red shows the incorrect transition; am I missing something? \n\n![enter image description here][5]\n\n\n  [1]: https://stackoverflow.com/a/13664082/791406\n  [2]: https://stackoverflow.com/a/2534158/791406\n  [3]: https://stackoverflow.com/a/15680579/791406\n  [4]: https://www.google.com/search?q=java%20thread%20state%20diagram&amp;ie=utf-8&amp;oe=utf-8\n  [5]: http://i.stack.imgur.com/XtQm4.png","title":"Java thread state transition, WAITING to BLOCKED, or RUNNABLE?","body":"<p>There seems to be a discrepancy between SO consensus and nearly every Java thread state diagram on the Internet; specifically, regarding thread state transition <em>from</em> <code>WAITING</code> after <code>notify()</code> or <code>notifyAll()</code> is invoked...</p>\n<ul>\n<li><em>WAITING <a href=\"https://stackoverflow.com/a/13664082/791406\">never</a> goes directly to RUNNABLE</em></li>\n<li><em>The thread is WAITING until it is notified...Then it <a href=\"https://stackoverflow.com/a/2534158/791406\">becomes</a> BLOCKED...</em></li>\n<li><em>Once this thread is notified, it <a href=\"https://stackoverflow.com/a/15680579/791406\">will not be runnable</a>...This is..Blocked State.</em></li>\n</ul>\n<p>So the concensus on SO is: a thread transitions from <code>WAITING</code> to <code>BLOCKED</code> after invoking <code>notify()</code> or <code>notifyAll()</code>; diagram below illustrates this transition in green.</p>\n<h3>Question</h3>\n<p>Why do most <a href=\"https://www.google.com/search?q=java%20thread%20state%20diagram&amp;ie=utf-8&amp;oe=utf-8\" rel=\"noreferrer\">state diagrams on the web</a> illustrate the transition from <code>WAITING</code> to <code>RUNNABLE</code>, not <code>BLOCKED</code>? Depiction in red shows the incorrect transition; am I missing something?</p>\n<p><img src=\"https://i.stack.imgur.com/XtQm4.png\" alt=\"enter image description here\" /></p>\n"},{"tags":["java","maven","tomcat","tomcat9"],"comments":[{"owner":{"account_id":478864,"reputation":1349,"user_id":891203,"accept_rate":80,"display_name":"devdanke"},"score":0,"creation_date":1660057781,"post_id":73292104,"comment_id":129440223,"body_markdown":"Did you build your app into a all-in-one executable jar? That is one way to force the download of all dependencies.  It would also let you unzip the all-in-one jar to make sure includes the jaxb-core jar.","body":"Did you build your app into a all-in-one executable jar? That is one way to force the download of all dependencies.  It would also let you unzip the all-in-one jar to make sure includes the jaxb-core jar."},{"owner":{"account_id":478864,"reputation":1349,"user_id":891203,"accept_rate":80,"display_name":"devdanke"},"score":0,"creation_date":1660058124,"post_id":73292104,"comment_id":129440390,"body_markdown":"I notice you&#39;re using very old technology.  It is so old that some of jars  had their package name changed.  For instance, for your `jstl` dependency, the groupId changed from `javax.servlet` to `javax.servlet.jsp.jstl`.  If possible, use the newest version of Tomcat and all other dependencies.  It might fix weird problems from old technology.","body":"I notice you&#39;re using very old technology.  It is so old that some of jars  had their package name changed.  For instance, for your <code>jstl</code> dependency, the groupId changed from <code>javax.servlet</code> to <code>javax.servlet.jsp.jstl</code>.  If possible, use the newest version of Tomcat and all other dependencies.  It might fix weird problems from old technology."},{"owner":{"account_id":24264708,"reputation":3,"user_id":18213796,"display_name":"user12345"},"score":0,"creation_date":1660084484,"post_id":73292104,"comment_id":129448327,"body_markdown":"Thanks for your reply. When I package the application as war file, it works fine. But when I run the application as Main java application I am getting this issue. Infact I am able to run the application even though I get the exception. This is a simple application. But there is quite big application where I am getting similar exception and does not run the application. I am using tomcat9.0.38","body":"Thanks for your reply. When I package the application as war file, it works fine. But when I run the application as Main java application I am getting this issue. Infact I am able to run the application even though I get the exception. This is a simple application. But there is quite big application where I am getting similar exception and does not run the application. I am using tomcat9.0.38"},{"owner":{"account_id":699650,"reputation":16447,"user_id":1299005,"display_name":"Mark Thomas"},"score":0,"creation_date":1660723188,"post_id":73292104,"comment_id":129597144,"body_markdown":"See https://stackoverflow.com/questions/73364640","body":"See <a href=\"https://stackoverflow.com/questions/73364640\">stackoverflow.com/questions/73364640</a>"}],"owner":{"account_id":24264708,"reputation":3,"user_id":18213796,"display_name":"user12345"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660049496,"creation_date":1660049295,"question_id":73292104,"body_markdown":"I am trying to create a emebded tomcat server for my jsp servlet application.\r\nWhen I added the below dependency to the application, I am getting FileNotFoundException \r\nexceptions while running the main application.     How to fix this issue? Below is the dependency that I have added to pom.xml\r\n\r\nC:\\Users\\testuser\\.m2\\repository\\com\\sun\\xml\\bind\\jaxb-core\\2.2.11\\jaxb-api.jar\r\n\r\n    java.io.FileNotFoundException: C:\\Users\\testuser\\.m2\\repository\\com\\sun\\xml\\bind\\jaxb-core\\2.2.11\\jaxb-api.jar (The system cannot find the file specified)\r\n    \tat java.util.zip.ZipFile.open(Native Method)\r\n    \tat java.util.zip.ZipFile.&lt;init&gt;(ZipFile.java:225)\r\n    \tat java.util.zip.ZipFile.&lt;init&gt;(ZipFile.java:155)\r\n    \tat java.util.jar.JarFile.&lt;init&gt;(JarFile.java:166)\r\n    \tat java.util.jar.JarFile.&lt;init&gt;(JarFile.java:130)\r\n    \tat org.apache.tomcat.util.compat.JreCompat.jarFileNewInstance(JreCompat.java:221)\r\n    \tat org.apache.tomcat.util.scan.JarFileUrlJar.&lt;init&gt;(JarFileUrlJar.java:65)\r\n    \tat org.apache.tomcat.util.scan.JarFactory.newInstance(JarFactory.java:49)\r\n    \tat org.apache.tomcat.util.scan.StandardJarScanner.process(StandardJarScanner.java:383)\r\n    \tat org.apache.tomcat.util.scan.StandardJarScanner.processURLs(StandardJarScanner.java:318)\r\n    \tat org.apache.tomcat.util.scan.StandardJarScanner.doScanClassPath(StandardJarScanner.java:270)\r\n    \tat org.apache.tomcat.util.scan.StandardJarScanner.scan(StandardJarScanner.java:233)\r\n    \tat org.apache.jasper.servlet.TldScanner.scanJars(TldScanner.java:262)\t\r\n    \t\r\n   \r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;jaxb-core&lt;/artifactId&gt;\r\n    \t&lt;version&gt;2.2.11&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;tomcat-embed-core&lt;/artifactId&gt;\r\n    \t&lt;version&gt;${tomcat.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\r\n    \t&lt;version&gt;${tomcat.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;jstl&lt;/artifactId&gt;\r\n    \t&lt;version&gt;1.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\n\r\n    package launch;\r\n    \r\n    import org.apache.catalina.LifecycleException;\r\n    import org.apache.catalina.WebResourceRoot;\r\n    import org.apache.catalina.core.StandardContext;\r\n    import org.apache.catalina.startup.Tomcat;\r\n    import org.apache.catalina.webresources.DirResourceSet;\r\n    import org.apache.catalina.webresources.StandardRoot;\r\n    \r\n    import java.io.File;\r\n    \r\n    public class Main {\r\n    \r\n        public static void main(String[] args) throws Exception {\r\n    \r\n            String webappDirLocation = &quot;src/main/webapp/&quot;;\r\n            Tomcat tomcat = new Tomcat();\r\n    \r\n            //The port that we should run on can be set into an environment variable\r\n            //Look for that variable and default to 8080 if it isn&#39;t there.\r\n            String webPort = System.getenv(&quot;PORT&quot;);\r\n            if(webPort == null || webPort.isEmpty()) {\r\n                webPort = &quot;8080&quot;;\r\n            }\r\n    \r\n            tomcat.setPort(Integer.valueOf(webPort));\r\n    \r\n    \r\n            StandardContext ctx = (StandardContext) tomcat.addWebapp(&quot;&quot;, new File(webappDirLocation).getAbsolutePath());\r\n            System.out.println(&quot;configuring app with basedir: &quot; + new File(&quot;./&quot; + webappDirLocation).getAbsolutePath());\r\n            \r\n    \r\n            // Declare an alternative location for your &quot;WEB-INF/classes&quot; dir\r\n            // Servlet 3.0 annotation will work\r\n            File additionWebInfClasses = new File(&quot;target/classes&quot;);\r\n            WebResourceRoot resources = new StandardRoot(ctx);\r\n            resources.addPreResources(new DirResourceSet(resources, &quot;/WEB-INF/classes&quot;,\r\n                    additionWebInfClasses.getAbsolutePath(), &quot;/&quot;));\r\n            ctx.setResources(resources);\r\n            \r\n    \r\n            tomcat.enableNaming();\r\n            tomcat.getConnector();\r\n    \r\n    \r\n            try {\r\n                tomcat.start();\r\n            } catch (LifecycleException e) {\r\n                e.printStackTrace();\r\n            }\r\n            tomcat.getServer().await();\r\n        }\r\n    }","title":"Tomcat embded server classnotfound exception","body":"<p>I am trying to create a emebded tomcat server for my jsp servlet application.\nWhen I added the below dependency to the application, I am getting FileNotFoundException\nexceptions while running the main application.     How to fix this issue? Below is the dependency that I have added to pom.xml</p>\n<p>C:\\Users\\testuser.m2\\repository\\com\\sun\\xml\\bind\\jaxb-core\\2.2.11\\jaxb-api.jar</p>\n<pre><code>java.io.FileNotFoundException: C:\\Users\\testuser\\.m2\\repository\\com\\sun\\xml\\bind\\jaxb-core\\2.2.11\\jaxb-api.jar (The system cannot find the file specified)\n    at java.util.zip.ZipFile.open(Native Method)\n    at java.util.zip.ZipFile.&lt;init&gt;(ZipFile.java:225)\n    at java.util.zip.ZipFile.&lt;init&gt;(ZipFile.java:155)\n    at java.util.jar.JarFile.&lt;init&gt;(JarFile.java:166)\n    at java.util.jar.JarFile.&lt;init&gt;(JarFile.java:130)\n    at org.apache.tomcat.util.compat.JreCompat.jarFileNewInstance(JreCompat.java:221)\n    at org.apache.tomcat.util.scan.JarFileUrlJar.&lt;init&gt;(JarFileUrlJar.java:65)\n    at org.apache.tomcat.util.scan.JarFactory.newInstance(JarFactory.java:49)\n    at org.apache.tomcat.util.scan.StandardJarScanner.process(StandardJarScanner.java:383)\n    at org.apache.tomcat.util.scan.StandardJarScanner.processURLs(StandardJarScanner.java:318)\n    at org.apache.tomcat.util.scan.StandardJarScanner.doScanClassPath(StandardJarScanner.java:270)\n    at org.apache.tomcat.util.scan.StandardJarScanner.scan(StandardJarScanner.java:233)\n    at org.apache.jasper.servlet.TldScanner.scanJars(TldScanner.java:262)   \n    \n\n&lt;dependency&gt;\n    &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n    &lt;artifactId&gt;jaxb-core&lt;/artifactId&gt;\n    &lt;version&gt;2.2.11&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n    &lt;artifactId&gt;tomcat-embed-core&lt;/artifactId&gt;\n    &lt;version&gt;${tomcat.version}&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n    &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\n    &lt;version&gt;${tomcat.version}&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n    &lt;artifactId&gt;jstl&lt;/artifactId&gt;\n    &lt;version&gt;1.2&lt;/version&gt;\n&lt;/dependency&gt;\n\n\n\npackage launch;\n\nimport org.apache.catalina.LifecycleException;\nimport org.apache.catalina.WebResourceRoot;\nimport org.apache.catalina.core.StandardContext;\nimport org.apache.catalina.startup.Tomcat;\nimport org.apache.catalina.webresources.DirResourceSet;\nimport org.apache.catalina.webresources.StandardRoot;\n\nimport java.io.File;\n\npublic class Main {\n\n    public static void main(String[] args) throws Exception {\n\n        String webappDirLocation = &quot;src/main/webapp/&quot;;\n        Tomcat tomcat = new Tomcat();\n\n        //The port that we should run on can be set into an environment variable\n        //Look for that variable and default to 8080 if it isn't there.\n        String webPort = System.getenv(&quot;PORT&quot;);\n        if(webPort == null || webPort.isEmpty()) {\n            webPort = &quot;8080&quot;;\n        }\n\n        tomcat.setPort(Integer.valueOf(webPort));\n\n\n        StandardContext ctx = (StandardContext) tomcat.addWebapp(&quot;&quot;, new File(webappDirLocation).getAbsolutePath());\n        System.out.println(&quot;configuring app with basedir: &quot; + new File(&quot;./&quot; + webappDirLocation).getAbsolutePath());\n        \n\n        // Declare an alternative location for your &quot;WEB-INF/classes&quot; dir\n        // Servlet 3.0 annotation will work\n        File additionWebInfClasses = new File(&quot;target/classes&quot;);\n        WebResourceRoot resources = new StandardRoot(ctx);\n        resources.addPreResources(new DirResourceSet(resources, &quot;/WEB-INF/classes&quot;,\n                additionWebInfClasses.getAbsolutePath(), &quot;/&quot;));\n        ctx.setResources(resources);\n        \n\n        tomcat.enableNaming();\n        tomcat.getConnector();\n\n\n        try {\n            tomcat.start();\n        } catch (LifecycleException e) {\n            e.printStackTrace();\n        }\n        tomcat.getServer().await();\n    }\n}\n</code></pre>\n"},{"tags":["java","mysql","querydsl"],"answers":[{"tags":[],"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660049050,"creation_date":1660049050,"answer_id":73292048,"question_id":73290143,"body_markdown":"The following solution works, but still feels kind of ugly. Please comment if there are better solutions than:\r\n\r\n    entity.departureDate.after(\r\n            Expressions.dateTemplate(LocalDate.class,\r\n                                     &quot;FUNCTION(&#39;ADDDATE&#39;, {0}, {1})&quot;,\r\n                                     entity.departureDate,\r\n                                     10)));\r\n\r\n\r\nThis solution can also be found at: https://stackoverflow.com/a/22988168/1194415","title":"How to use querydsl SQLExpressions with Mysql?","body":"<p>The following solution works, but still feels kind of ugly. Please comment if there are better solutions than:</p>\n<pre><code>entity.departureDate.after(\n        Expressions.dateTemplate(LocalDate.class,\n                                 &quot;FUNCTION('ADDDATE', {0}, {1})&quot;,\n                                 entity.departureDate,\n                                 10)));\n</code></pre>\n<p>This solution can also be found at: <a href=\"https://stackoverflow.com/a/22988168/1194415\">https://stackoverflow.com/a/22988168/1194415</a></p>\n"}],"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":184,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73292048,"answer_count":1,"score":0,"last_activity_date":1660049050,"creation_date":1660040206,"question_id":73290143,"body_markdown":"I&#39;m trying to apply a `mysql` specific function to a querydsl definition:\r\n\r\n    entity.departureDate.after(SQLExpressions.addDays(entity.departureDate, 10))\r\n\r\nResults in generated sql:\r\n\r\n    select * from mytable where departureDate &gt; add_days(departureDate,?1)\r\n\r\nBut that results in an exception, as `add_days` is not a known mysql function:\r\n\r\n    Caused by: java.sql.SQLSyntaxErrorException: FUNCTION mytable.add_days does not exist\r\n\r\nQuestion: how can I tell `querydsl` to use `DATE_ADD()` function instead?","title":"How to use querydsl SQLExpressions with Mysql?","body":"<p>I'm trying to apply a <code>mysql</code> specific function to a querydsl definition:</p>\n<pre><code>entity.departureDate.after(SQLExpressions.addDays(entity.departureDate, 10))\n</code></pre>\n<p>Results in generated sql:</p>\n<pre><code>select * from mytable where departureDate &gt; add_days(departureDate,?1)\n</code></pre>\n<p>But that results in an exception, as <code>add_days</code> is not a known mysql function:</p>\n<pre><code>Caused by: java.sql.SQLSyntaxErrorException: FUNCTION mytable.add_days does not exist\n</code></pre>\n<p>Question: how can I tell <code>querydsl</code> to use <code>DATE_ADD()</code> function instead?</p>\n"},{"tags":["java","xslt","fonts","apache-fop"],"owner":{"account_id":18278959,"reputation":203,"user_id":13308124,"display_name":"Thomazzz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":200,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1660049001,"creation_date":1660049001,"question_id":73292033,"body_markdown":"Using FOP to transform xml+xslt=xsl-fo= pdf\r\n\r\nPreviously, we used an external configuration file where fonts were registered and a directory was specified.\r\n\r\nNow we decided to completely abandon this file, and configure everything inside the java classes.\r\n\r\nIn the code, I specified the path to the fonts\r\n```\r\nfoUserAgent.getFontManager().setResourceResolver(resourceResolver);\r\n```\r\nI output in the logs and get the correct path\r\n\r\n```\r\nFontBaseURL: file:/myserv/etc/tomcat/fop/Fonts/\r\n```\r\n\r\nBut I keep getting the error\r\n\r\n```\r\nFOUserAgen Font &quot;Times New Roman,normal,400&quot; not found. Substituting with &quot;any, normal, 400&quot;.\r\n```\r\n\r\nHow do I need to specify a directory so that fop will automatically load fonts from where?\r\n\r\nI understand correctly that I need to use the \\&lt;auto-detect/\\&gt; option, but how do I enable it if I don&#39;t use an external config file?\r\n\r\nIs it really possible to set up work with fonts without using an external configuration file?","title":"How to configure FOP to automatically use the desired fonts from a directory","body":"<p>Using FOP to transform xml+xslt=xsl-fo= pdf</p>\n<p>Previously, we used an external configuration file where fonts were registered and a directory was specified.</p>\n<p>Now we decided to completely abandon this file, and configure everything inside the java classes.</p>\n<p>In the code, I specified the path to the fonts</p>\n<pre><code>foUserAgent.getFontManager().setResourceResolver(resourceResolver);\n</code></pre>\n<p>I output in the logs and get the correct path</p>\n<pre><code>FontBaseURL: file:/myserv/etc/tomcat/fop/Fonts/\n</code></pre>\n<p>But I keep getting the error</p>\n<pre><code>FOUserAgen Font &quot;Times New Roman,normal,400&quot; not found. Substituting with &quot;any, normal, 400&quot;.\n</code></pre>\n<p>How do I need to specify a directory so that fop will automatically load fonts from where?</p>\n<p>I understand correctly that I need to use the &lt;auto-detect/&gt; option, but how do I enable it if I don't use an external config file?</p>\n<p>Is it really possible to set up work with fonts without using an external configuration file?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8870,"page":1122,"page_size":100}
