{"items":[{"tags":["java","inner-classes","anonymous-class"],"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1688716199,"post_id":76634780,"comment_id":135113838,"body_markdown":"`new DataStructure.DataStructureIterator()` should be `ds.new DataStructure.DataStructureIterator()` surely?","body":"<code>new DataStructure.DataStructureIterator()</code> should be <code>ds.new DataStructure.DataStructureIterator()</code> surely?"},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1688719749,"post_id":76634780,"comment_id":135114463,"body_markdown":"@user207421 Why would that help? An anonymous class created in a static context is not an inner class cannot have an enclosing instance.","body":"@user207421 Why would that help? An anonymous class created in a static context is not an inner class cannot have an enclosing instance."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1688722490,"post_id":76634780,"comment_id":135114961,"body_markdown":"OK so the next question is why is he defining an iterator in the main method at all? And if it&#39;s necessary, why not extend `EvenIterator`? Which would *require*` the `ds.` context, and provide the non-static context he needs. At the moment he is accessing things that are out of (non-static) scope.","body":"OK so the next question is why is he defining an iterator in the main method at all? And if it&#39;s necessary, why not extend <code>EvenIterator</code>? Which would *require*` the <code>ds.</code> context, and provide the non-static context he needs. At the moment he is accessing things that are out of (non-static) scope."},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1688736115,"post_id":76634780,"comment_id":135117722,"body_markdown":"@user207421 Yeah, I agree the design of the code is quite weird. I&#39;d assume it&#39;s just one of those contrived scenarios to demonstrate OP&#39;s confusion.","body":"@user207421 Yeah, I agree the design of the code is quite weird. I&#39;d assume it&#39;s just one of those contrived scenarios to demonstrate OP&#39;s confusion."}],"answers":[{"tags":[],"owner":{"account_id":12419314,"reputation":535,"user_id":11968199,"display_name":"Maksym Kosenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688716750,"creation_date":1688716242,"answer_id":76634941,"question_id":76634780,"body_markdown":"You are creating an anonymous class from within the static method and trying to pass non-static field to the implementation, that is why you get the compile error. Whereas EvenIterator class is inner with regard to DataStructure so it implies to be tied to an instance of DataStructure class and can access its non-static variables.                                                                     \r\n\r\n[Specification][1] of inner and nested classes\r\n&gt; As with instance methods and variables, an inner class is associated with an instance of its enclosing class and has direct access to that object&#39;s methods and fields.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/java/javaOO/nested.html#:~:text=Inner%20Classes,-As%20with%20instance&amp;text=Also%2C%20because%20an%20inner%20class,instance%20of%20the%20outer%20class.","title":"Java: accessing a non-static field in an anonymous class in a static context","body":"<p>You are creating an anonymous class from within the static method and trying to pass non-static field to the implementation, that is why you get the compile error. Whereas EvenIterator class is inner with regard to DataStructure so it implies to be tied to an instance of DataStructure class and can access its non-static variables.</p>\n<p><a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/nested.html#:%7E:text=Inner%20Classes,-As%20with%20instance&amp;text=Also%2C%20because%20an%20inner%20class,instance%20of%20the%20outer%20class.\" rel=\"nofollow noreferrer\">Specification</a> of inner and nested classes</p>\n<blockquote>\n<p>As with instance methods and variables, an inner class is associated with an instance of its enclosing class and has direct access to that object's methods and fields.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":12419314,"reputation":535,"user_id":11968199,"display_name":"Maksym Kosenko"},"score":0,"creation_date":1688735258,"post_id":76634970,"comment_id":135117541,"body_markdown":"Well, that is SO feature I hate, well scored gamers do some make-ups around original authors and steal the acceptances and votes. Check the editing history of the answer","body":"Well, that is SO feature I hate, well scored gamers do some make-ups around original authors and steal the acceptances and votes. Check the editing history of the answer"},{"owner":{"account_id":12419314,"reputation":535,"user_id":11968199,"display_name":"Maksym Kosenko"},"score":0,"creation_date":1688735523,"post_id":76634970,"comment_id":135117599,"body_markdown":"From the other side, @YoavKlein why did you accept this answer but not mine? Are you friends? Fake account of @Sweeper? Or maybe my answer is not so good and it is not even worth positive voting apart from accepting at least?","body":"From the other side, @YoavKlein why did you accept this answer but not mine? Are you friends? Fake account of @Sweeper? Or maybe my answer is not so good and it is not even worth positive voting apart from accepting at least?"}],"tags":[],"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"comment_count":2,"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1688719050,"creation_date":1688716453,"answer_id":76634970,"question_id":76634780,"body_markdown":"&gt; Rather, I&#39;m passing a piece of code - an anonymous class - to a non-static method\r\n\r\nJava doesn&#39;t consider what you are doing with the instance that you are creating, to determine whether you can access an non-static field.\r\n\r\nFor all Java knows, you could be assigning the instance of the anonymous class to a local variable:\r\n\r\n```\r\npublic static void main(String[] args) {\r\n    var foo = new DataStructure.DataStructureIterator() {\r\n        public boolean hasNext() { \r\n            ...\r\n        }\r\n        public Integer next() {\r\n            int retValue = arrayOfInts[nextIndex]; // this won&#39;t work:\r\n            ...\r\n        }\r\n    };\r\n    foo.next();\r\n}\r\n```\r\n\r\nWhat would `foo.next()` do in this case? There is no instances of `DataStructure` anywhere!\r\n\r\nThat said, there *is* an instance of `DataStructure` in your code - `ds`. You probably meant to access the `arrayOfInts` in that instance, so just do `ds.arrayofInts` instead.\r\n\r\nNote that the use of `arrayOfInts` inside `EvenIterator` is valid because `EvenIterator` is a inner class of `DataStructure`. Note that `DataStructureIterator`, which is also nested in `DataStructure`, is not an &quot;inner interface&quot;. There is no such thing as &quot;inner interfaces&quot;. `DataStructure.DataStructureIterator` is just another regular type.\r\n\r\nTo create an instance of `EvenIterator`, you need an instance of `DataStructure` first. This instance of `DataStructure` is called the *enclosing instance* of `EvenIterator`.\r\n\r\nBecause `EvenIterator` is accessing the `arrayOfInts` of its enclosing instance, and not whatever instance you are calling `print` on, this can lead to some unexpected results:\r\n\r\n```\r\nDataStructure ds1 = new DataStructure();\r\nDataStructure ds2 = new DataStructure();\r\nEvenIterator iter = ds1.new EvenIterator(); // enclosing instance is ds1\r\nds2.print(iter); // prints the elements of ds1, not ds2!\r\n```","title":"Java: accessing a non-static field in an anonymous class in a static context","body":"<blockquote>\n<p>Rather, I'm passing a piece of code - an anonymous class - to a non-static method</p>\n</blockquote>\n<p>Java doesn't consider what you are doing with the instance that you are creating, to determine whether you can access an non-static field.</p>\n<p>For all Java knows, you could be assigning the instance of the anonymous class to a local variable:</p>\n<pre><code>public static void main(String[] args) {\n    var foo = new DataStructure.DataStructureIterator() {\n        public boolean hasNext() { \n            ...\n        }\n        public Integer next() {\n            int retValue = arrayOfInts[nextIndex]; // this won't work:\n            ...\n        }\n    };\n    foo.next();\n}\n</code></pre>\n<p>What would <code>foo.next()</code> do in this case? There is no instances of <code>DataStructure</code> anywhere!</p>\n<p>That said, there <em>is</em> an instance of <code>DataStructure</code> in your code - <code>ds</code>. You probably meant to access the <code>arrayOfInts</code> in that instance, so just do <code>ds.arrayofInts</code> instead.</p>\n<p>Note that the use of <code>arrayOfInts</code> inside <code>EvenIterator</code> is valid because <code>EvenIterator</code> is a inner class of <code>DataStructure</code>. Note that <code>DataStructureIterator</code>, which is also nested in <code>DataStructure</code>, is not an &quot;inner interface&quot;. There is no such thing as &quot;inner interfaces&quot;. <code>DataStructure.DataStructureIterator</code> is just another regular type.</p>\n<p>To create an instance of <code>EvenIterator</code>, you need an instance of <code>DataStructure</code> first. This instance of <code>DataStructure</code> is called the <em>enclosing instance</em> of <code>EvenIterator</code>.</p>\n<p>Because <code>EvenIterator</code> is accessing the <code>arrayOfInts</code> of its enclosing instance, and not whatever instance you are calling <code>print</code> on, this can lead to some unexpected results:</p>\n<pre><code>DataStructure ds1 = new DataStructure();\nDataStructure ds2 = new DataStructure();\nEvenIterator iter = ds1.new EvenIterator(); // enclosing instance is ds1\nds2.print(iter); // prints the elements of ds1, not ds2!\n</code></pre>\n"}],"owner":{"account_id":16841069,"reputation":2161,"user_id":12176460,"display_name":"YoavKlein"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76634970,"answer_count":2,"score":0,"last_activity_date":1688719050,"creation_date":1688714836,"question_id":76634780,"body_markdown":"\r\n\r\nConsider the following class:\r\n```\r\npublic class DataStructure {\r\n    \r\n    // Create an array\r\n    private final static int SIZE = 15;\r\n    private int[] arrayOfInts = new int[SIZE];\r\n\r\n    public DataStructure() {\r\n        // fill the array with ascending integer values\r\n        for (int i = 0; i &lt; SIZE; i++) {\r\n            arrayOfInts[i] = i;\r\n        }\r\n    }\r\n\r\n    public void print(DataStructureIterator iter) {\r\n        while(iter.hasNext()) {\r\n            System.out.print(iter.next() + &quot; &quot;);\r\n        }\r\n        System.out.println();\r\n    }\r\n    \r\n    interface DataStructureIterator extends java.util.Iterator&lt;Integer&gt; { } \r\n\r\n    // Inner class implements the DataStructureIterator interface,\r\n    // which extends the Iterator&lt;Integer&gt; interface\r\n    \r\n    private class EvenIterator implements DataStructureIterator {\r\n        \r\n        // Start stepping through the array from the beginning\r\n        private int nextIndex = 0;\r\n        \r\n        public boolean hasNext() {\r\n            \r\n            // Check if the current element is the last in the array\r\n            return (nextIndex &lt;= SIZE - 1);\r\n        }        \r\n        \r\n        public Integer next() {\r\n            \r\n            // Record a value of an even index of the array\r\n            Integer retValue = Integer.valueOf(arrayOfInts[nextIndex]);\r\n            \r\n            // Get the next even element\r\n            nextIndex += 2;\r\n            return retValue;\r\n        }\r\n\r\n    }\r\n    \r\n    public static void main(String s[]) {\r\n        \r\n        // Fill the array with integer values and print out only\r\n        // values of even indices\r\n        DataStructure ds = new DataStructure();\r\n    \r\n        ds.print(\r\n            new DataStructure.DataStructureIterator() {\r\n                private int nextIndex = 1;\r\n                public boolean hasNext() { \r\n                    return (nextIndex &lt;= ds.size() - 1);\r\n                }\r\n                public Integer next() {\r\n                    //int retValue = arrayOfInts[nextIndex]; // this won&#39;t work:\r\n                    // non-static variable arrayOfInts cannot be referenced from a static context\r\n                    int retValue = ds.get(nextIndex);\r\n                    nextIndex += 2;\r\n                    return retValue;\r\n                }\r\n            }\r\n        );        \r\n    }\r\n}\r\n\r\n```\r\n\r\nCompiling this, I get:\r\n```\r\nerror: non-static variable arrayOfInts cannot be referenced from a static context\r\n```\r\n\r\nThe compiler complains about the access to the `arrayOfInts` variable from the anonymous class that&#39;s in the main method.\r\n\r\nMy question is: Ok I understand that I can&#39;t access a non-static variable from a static context - it completely makes sense.\r\nBut in this case, I&#39;m not actually accessing the variable from the static context. Rather, I&#39;m passing a piece of code - an anonymous class - to a non-static method. The non-static method can definitely access a non-static variable, so why isn&#39;t it possible?\r\n","title":"Java: accessing a non-static field in an anonymous class in a static context","body":"<p>Consider the following class:</p>\n<pre><code>public class DataStructure {\n    \n    // Create an array\n    private final static int SIZE = 15;\n    private int[] arrayOfInts = new int[SIZE];\n\n    public DataStructure() {\n        // fill the array with ascending integer values\n        for (int i = 0; i &lt; SIZE; i++) {\n            arrayOfInts[i] = i;\n        }\n    }\n\n    public void print(DataStructureIterator iter) {\n        while(iter.hasNext()) {\n            System.out.print(iter.next() + &quot; &quot;);\n        }\n        System.out.println();\n    }\n    \n    interface DataStructureIterator extends java.util.Iterator&lt;Integer&gt; { } \n\n    // Inner class implements the DataStructureIterator interface,\n    // which extends the Iterator&lt;Integer&gt; interface\n    \n    private class EvenIterator implements DataStructureIterator {\n        \n        // Start stepping through the array from the beginning\n        private int nextIndex = 0;\n        \n        public boolean hasNext() {\n            \n            // Check if the current element is the last in the array\n            return (nextIndex &lt;= SIZE - 1);\n        }        \n        \n        public Integer next() {\n            \n            // Record a value of an even index of the array\n            Integer retValue = Integer.valueOf(arrayOfInts[nextIndex]);\n            \n            // Get the next even element\n            nextIndex += 2;\n            return retValue;\n        }\n\n    }\n    \n    public static void main(String s[]) {\n        \n        // Fill the array with integer values and print out only\n        // values of even indices\n        DataStructure ds = new DataStructure();\n    \n        ds.print(\n            new DataStructure.DataStructureIterator() {\n                private int nextIndex = 1;\n                public boolean hasNext() { \n                    return (nextIndex &lt;= ds.size() - 1);\n                }\n                public Integer next() {\n                    //int retValue = arrayOfInts[nextIndex]; // this won't work:\n                    // non-static variable arrayOfInts cannot be referenced from a static context\n                    int retValue = ds.get(nextIndex);\n                    nextIndex += 2;\n                    return retValue;\n                }\n            }\n        );        \n    }\n}\n\n</code></pre>\n<p>Compiling this, I get:</p>\n<pre><code>error: non-static variable arrayOfInts cannot be referenced from a static context\n</code></pre>\n<p>The compiler complains about the access to the <code>arrayOfInts</code> variable from the anonymous class that's in the main method.</p>\n<p>My question is: Ok I understand that I can't access a non-static variable from a static context - it completely makes sense.\nBut in this case, I'm not actually accessing the variable from the static context. Rather, I'm passing a piece of code - an anonymous class - to a non-static method. The non-static method can definitely access a non-static variable, so why isn't it possible?</p>\n"},{"tags":["java","hashmap"],"comments":[{"owner":{"account_id":4986235,"reputation":1822,"user_id":4009768,"display_name":"d.j.brown"},"score":0,"creation_date":1499209860,"post_id":44914967,"comment_id":76806319,"body_markdown":"Try cleaning and rebuilding the project. However, the condition `hm.containsKey(a[i])` will never be `true` as the `HashMap` `hm` is empty when the `for` loop is executed, so I&#39;m not sure what you are trying to achieve there.","body":"Try cleaning and rebuilding the project. However, the condition <code>hm.containsKey(a[i])</code> will never be <code>true</code> as the <code>HashMap</code> <code>hm</code> is empty when the <code>for</code> loop is executed, so I&#39;m not sure what you are trying to achieve there."},{"owner":{"account_id":8306652,"reputation":395,"user_id":6243408,"accept_rate":38,"display_name":"RJP"},"score":0,"creation_date":1499210005,"post_id":44914967,"comment_id":76806344,"body_markdown":"My login is not complete. In the else part I do something like hm.put(a[i], 1);","body":"My login is not complete. In the else part I do something like hm.put(a[i], 1);"},{"owner":{"account_id":8306652,"reputation":395,"user_id":6243408,"accept_rate":38,"display_name":"RJP"},"score":0,"creation_date":1499210714,"post_id":44914967,"comment_id":76806482,"body_markdown":"@d.j.brown I did what you suggested. I still get the same error.","body":"@d.j.brown I did what you suggested. I still get the same error."},{"owner":{"account_id":4986235,"reputation":1822,"user_id":4009768,"display_name":"d.j.brown"},"score":0,"creation_date":1499211017,"post_id":44914967,"comment_id":76806541,"body_markdown":"it looks like a warning an IDE would give. I can compile your code fine using jdk_1.8.0_131 as long as I define `str` as a `String`, e.g. `String str = &quot;abc&quot;;`.","body":"it looks like a warning an IDE would give. I can compile your code fine using jdk_1.8.0_131 as long as I define <code>str</code> as a <code>String</code>, e.g. <code>String str = &quot;abc&quot;;</code>."},{"owner":{"account_id":8306652,"reputation":395,"user_id":6243408,"accept_rate":38,"display_name":"RJP"},"score":0,"creation_date":1499211100,"post_id":44914967,"comment_id":76806562,"body_markdown":"Thats exactly how I have my str defined as well. Do you think reinstalling eclipse would work?","body":"Thats exactly how I have my str defined as well. Do you think reinstalling eclipse would work?"},{"owner":{"account_id":4986235,"reputation":1822,"user_id":4009768,"display_name":"d.j.brown"},"score":0,"creation_date":1499211393,"post_id":44914967,"comment_id":76806624,"body_markdown":"Question, do you have any classes called `Character` or `Integer` that may be being used over `java.lang.Character` and `java.lang.Integer`? If not then I&#39;d consider at least closing and reopening the project in Eclipse / rebooting the machine. Try removing any settings/profiles if that does not work. Otherwise a reinstall may help(?)","body":"Question, do you have any classes called <code>Character</code> or <code>Integer</code> that may be being used over <code>java.lang.Character</code> and <code>java.lang.Integer</code>? If not then I&#39;d consider at least closing and reopening the project in Eclipse / rebooting the machine. Try removing any settings/profiles if that does not work. Otherwise a reinstall may help(?)"}],"answers":[{"tags":[],"owner":{"account_id":1326560,"reputation":2671,"user_id":1271255,"display_name":"minus"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1499211324,"creation_date":1499211324,"answer_id":44915217,"question_id":44914967,"body_markdown":"The code complies and executes correctly (I&#39;ve just added an initialization for missing characters  `hm.put(a[i], 1);`).\r\n\r\n\tchar a[]=str.toCharArray();\r\n    HashMap&lt;Character,Integer&gt; hm=new HashMap&lt;Character,Integer&gt;();\r\n    for(int i=0;i&lt;a.length;i++){\r\n        if(hm.containsKey(a[i])){\r\n            hm.put(a[i], hm.get(a[i])+1);\r\n        }else{\r\n            hm.put(a[i], 1);\r\n        }\r\n    }\r\n\r\nStrictly speaking the compiler is right because `char` is not `Character` and `int` is not `Integer`, but autoboxing should take care of this.\r\n\r\nSo we are missing some context.\r\n\r\nThe only way I could reproduce the same error was adding a mock Character class in the test class like this:\r\n\r\n    public class OneTest {\r\n    \t\r\n    \tprivate class Character{\r\n    \t}\r\n    \t@Test\r\n    \tpublic void test() {\r\n    \t\tString str = &quot;AABcDD&quot;;\r\n    \t\tchar a[]=str.toCharArray();\r\n    \t    HashMap&lt;Character,Integer&gt; hm=new HashMap&lt;Character,Integer&gt;();\r\n    \t    for(int i=0;i&lt;a.length;i++){\r\n    \t        if(hm.containsKey(a[i])){\r\n    \t            hm.put(a[i], hm.get(a[i])+1);\r\n    \t        }else{\r\n    \t            hm.put(a[i], 1);\r\n    \t        }\r\n    \t    }\r\n    \t    System.out.println(hm);\r\n    \t}\r\n    \r\n    }\r\n\r\n ","title":"The method put(Character, Integer) in the type HashMap&lt;Character,Integer&gt; is not applicable for the arguments (char, int)","body":"<p>The code complies and executes correctly (I've just added an initialization for missing characters  <code>hm.put(a[i], 1);</code>).</p>\n\n<pre><code>char a[]=str.toCharArray();\nHashMap&lt;Character,Integer&gt; hm=new HashMap&lt;Character,Integer&gt;();\nfor(int i=0;i&lt;a.length;i++){\n    if(hm.containsKey(a[i])){\n        hm.put(a[i], hm.get(a[i])+1);\n    }else{\n        hm.put(a[i], 1);\n    }\n}\n</code></pre>\n\n<p>Strictly speaking the compiler is right because <code>char</code> is not <code>Character</code> and <code>int</code> is not <code>Integer</code>, but autoboxing should take care of this.</p>\n\n<p>So we are missing some context.</p>\n\n<p>The only way I could reproduce the same error was adding a mock Character class in the test class like this:</p>\n\n<pre><code>public class OneTest {\n\n    private class Character{\n    }\n    @Test\n    public void test() {\n        String str = \"AABcDD\";\n        char a[]=str.toCharArray();\n        HashMap&lt;Character,Integer&gt; hm=new HashMap&lt;Character,Integer&gt;();\n        for(int i=0;i&lt;a.length;i++){\n            if(hm.containsKey(a[i])){\n                hm.put(a[i], hm.get(a[i])+1);\n            }else{\n                hm.put(a[i], 1);\n            }\n        }\n        System.out.println(hm);\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19901850,"reputation":1,"user_id":14581677,"display_name":"scorcism"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688718926,"creation_date":1688718926,"answer_id":76635259,"question_id":44914967,"body_markdown":"you can use \r\n` hm.put(a[i], hm.getOrDefault(a[i], 0) + 1);`","title":"The method put(Character, Integer) in the type HashMap&lt;Character,Integer&gt; is not applicable for the arguments (char, int)","body":"<p>you can use\n<code> hm.put(a[i], hm.getOrDefault(a[i], 0) + 1);</code></p>\n"}],"owner":{"account_id":8306652,"reputation":395,"user_id":6243408,"accept_rate":38,"display_name":"RJP"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2565,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":2,"score":-3,"last_activity_date":1688718926,"creation_date":1499209375,"question_id":44914967,"body_markdown":"I am getting this error and I don&#39;t know why.\r\n\r\nHere is my code:\r\n\r\n    char a[]=str.toCharArray();\r\n\t\tHashMap &lt;Character,Integer&gt; hm=new HashMap&lt;Character,Integer&gt;();\r\n\t\tfor(int i=0;i&lt;a.length;i++){\r\n\t\t\tif(hm.containsKey(a[i])){\r\n\t\t\t\thm.put(a[i], hm.get(a[i])+1);\r\n\t\t\t}\r\n\t\t}","title":"The method put(Character, Integer) in the type HashMap&lt;Character,Integer&gt; is not applicable for the arguments (char, int)","body":"<p>I am getting this error and I don't know why.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>char a[]=str.toCharArray();\n    HashMap &lt;Character,Integer&gt; hm=new HashMap&lt;Character,Integer&gt;();\n    for(int i=0;i&lt;a.length;i++){\n        if(hm.containsKey(a[i])){\n            hm.put(a[i], hm.get(a[i])+1);\n        }\n    }\n</code></pre>\n"},{"tags":["java","spring","maven","spring-mvc"],"answers":[{"comments":[{"owner":{"account_id":10189955,"reputation":451,"user_id":7523723,"display_name":"Tal Levi"},"score":1,"creation_date":1688721066,"post_id":76635184,"comment_id":135114694,"body_markdown":"thanks! I invalidating the cache and restart, and it worked!","body":"thanks! I invalidating the cache and restart, and it worked!"}],"tags":[],"owner":{"account_id":6513463,"reputation":101,"user_id":5040014,"display_name":"Vikas P R"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1688718207,"creation_date":1688718207,"answer_id":76635184,"question_id":76635085,"body_markdown":"Seems like your IDE issue only. If you are using IntelliJ Idea, goto Maven view and try refreshing the maven project.\r\n\r\nAlso try running the build manually by running `min clean compile`.\r\n\r\nIf still issue persists, try invalidating the cache and restart.","title":"cannot import some of springframework libraries after upgrading spring to 5.3.28","body":"<p>Seems like your IDE issue only. If you are using IntelliJ Idea, goto Maven view and try refreshing the maven project.</p>\n<p>Also try running the build manually by running <code>min clean compile</code>.</p>\n<p>If still issue persists, try invalidating the cache and restart.</p>\n"}],"owner":{"account_id":10189955,"reputation":451,"user_id":7523723,"display_name":"Tal Levi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76635184,"answer_count":1,"score":0,"last_activity_date":1688718207,"creation_date":1688717515,"question_id":76635085,"body_markdown":"I have a maven project java 8 and I used to work with spring 5.3.26 and recently I upgraded my spring version to 5.3.28.\r\nsince than some springframework libraries are mot imported such as\r\n\r\n    import org.springframework.http.HttpStatus;\r\n    import org.springframework.http.MediaType;\r\n    import org.springframework.web.bind.annotation.*;\r\n    import org.springframework.web.servlet.handler.HandlerInterceptorAdapter;\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/OsEI3.png\r\n\r\n\r\nbelow you can see all my dependencies:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\nanyone has an idea what am I missing? ","title":"cannot import some of springframework libraries after upgrading spring to 5.3.28","body":"<p>I have a maven project java 8 and I used to work with spring 5.3.26 and recently I upgraded my spring version to 5.3.28.\nsince than some springframework libraries are mot imported such as</p>\n<pre><code>import org.springframework.http.HttpStatus;\nimport org.springframework.http.MediaType;\nimport org.springframework.web.bind.annotation.*;\nimport org.springframework.web.servlet.handler.HandlerInterceptorAdapter;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/OsEI3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OsEI3.png\" alt=\"enter image description here\" /></a></p>\n<p>below you can see all my dependencies:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>anyone has an idea what am I missing?</p>\n"},{"tags":["java","sql","sql-server","hibernate"],"comments":[{"owner":{"account_id":17972905,"reputation":5290,"user_id":13061224,"display_name":"siggemannen"},"score":0,"creation_date":1688718762,"post_id":76635171,"comment_id":135114297,"body_markdown":"Why not just take query plans and compare those","body":"Why not just take query plans and compare those"},{"owner":{"account_id":22938256,"reputation":1,"user_id":17071406,"display_name":"Werehog83"},"score":0,"creation_date":1688720005,"post_id":76635171,"comment_id":135114508,"body_markdown":"@siggemannen it&#39;s the exact same request on both versions","body":"@siggemannen it&#39;s the exact same request on both versions"},{"owner":{"account_id":166167,"reputation":8075,"user_id":390122,"accept_rate":75,"display_name":"AlwaysLearning"},"score":0,"creation_date":1688739799,"post_id":76635171,"comment_id":135118508,"body_markdown":"At least three bits in `@@OPTIONS` are plan-affecting options, so they affect the performance of queries. That is to say that even though the submitted queries might be byte-for-byte identical they can still perform quite differently when different `@@OPTIONS` are in effect. Do the Hibernate 3/5 requests produce different plans (`plan_handle`s)? Are the [`set_options`](https://learn.microsoft.com/en-us/sql/relational-databases/system-dynamic-management-views/sys-dm-exec-cached-plans-transact-sql#c-returning-the-set-options-with-which-the-plan-was-compiled) different?","body":"At least three bits in <code>@@OPTIONS</code> are plan-affecting options, so they affect the performance of queries. That is to say that even though the submitted queries might be byte-for-byte identical they can still perform quite differently when different <code>@@OPTIONS</code> are in effect. Do the Hibernate 3/5 requests produce different plans (<code>plan_handle</code>s)? Are the <a href=\"https://learn.microsoft.com/en-us/sql/relational-databases/system-dynamic-management-views/sys-dm-exec-cached-plans-transact-sql#c-returning-the-set-options-with-which-the-plan-was-compiled\" rel=\"nofollow noreferrer\"><code>set_options</code></a> different?"}],"owner":{"account_id":22938256,"reputation":1,"user_id":17071406,"display_name":"Werehog83"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1688718155,"creation_date":1688718155,"question_id":76635171,"body_markdown":"I currently have an abnormally slow simple SELECT. I find it slow because it just does :\r\nSELECT * from myTable where idNonIndex1 = 1 and idNonIndex2 = 2\r\n\r\nThe cause of the slowness could have been the non-indexed ids, but when I compare the execution of this query in Java6/Hibernate3 with Java11/Hibernate5, it takes 10 times longer with Hibernate5. Yet I&#39;ve tried to configure them in a similar way, I need to migrate to Hibernate5 for my project.\r\nI&#39;ve tried several things for the query: Criteria, CriteriaQuery, HQL. Currently, the Java6/Hibernate3 - Java11/Hibernate5 comparison is done with Criteria.\r\n\r\nAnd I&#39;ve observed something even stranger:\r\nwhen I enable Hibernate5 statistics, requests take as long as when statistics are disabled. And yet, statistics are supposed to greatly increase request times. I&#39;ve debugged Hibernate5 to check that statistics are indeed disabled under normal circumstances, but I feel like I&#39;m missing something. \r\nCould you please give me some hints?","title":"Select in Hibernate has same duration with or without statistics","body":"<p>I currently have an abnormally slow simple SELECT. I find it slow because it just does :\nSELECT * from myTable where idNonIndex1 = 1 and idNonIndex2 = 2</p>\n<p>The cause of the slowness could have been the non-indexed ids, but when I compare the execution of this query in Java6/Hibernate3 with Java11/Hibernate5, it takes 10 times longer with Hibernate5. Yet I've tried to configure them in a similar way, I need to migrate to Hibernate5 for my project.\nI've tried several things for the query: Criteria, CriteriaQuery, HQL. Currently, the Java6/Hibernate3 - Java11/Hibernate5 comparison is done with Criteria.</p>\n<p>And I've observed something even stranger:\nwhen I enable Hibernate5 statistics, requests take as long as when statistics are disabled. And yet, statistics are supposed to greatly increase request times. I've debugged Hibernate5 to check that statistics are indeed disabled under normal circumstances, but I feel like I'm missing something.\nCould you please give me some hints?</p>\n"},{"tags":["java","android","xml","webview","android-webview"],"answers":[{"tags":[],"owner":{"account_id":6017569,"reputation":3366,"user_id":8007341,"display_name":"Kishan Maurya"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688717759,"creation_date":1688717759,"answer_id":76635121,"question_id":76634641,"body_markdown":"Can you add Internet permission in your android manifest file.\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\r\n\r\n","title":"how can i fix this error in my Webview Android Project","body":"<p>Can you add Internet permission in your android manifest file.</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\n</code></pre>\n"}],"owner":{"account_id":28255289,"reputation":11,"user_id":21600838,"display_name":"snoopti"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":249,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1688717759,"creation_date":1688713640,"question_id":76634641,"body_markdown":"i have a problem, that when i start the app then comes an error: **net::ERR_CACHE_MISS** i want an android app that implements a WebView so i am able to have my website on my app. Can someone please help me how to fix this problem\r\n\r\nMainActivity.java\r\n\r\n```java\r\nimport android.annotation.SuppressLint;\r\nimport android.os.Bundle;\r\nimport android.webkit.WebSettings;\r\nimport android.webkit.WebView;\r\nimport android.webkit.WebViewClient;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private WebView webView;\r\n\r\n    @SuppressLint(&quot;SetJavaScriptEnabled&quot;)\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        webView = findViewById(R.id.webview);\r\n        WebSettings webSettings = webView.getSettings();\r\n        webSettings.setJavaScriptEnabled(true);\r\n        webSettings.setCacheMode(WebSettings.LOAD_DEFAULT);\r\n\r\n        webView.setWebViewClient(new WebViewClient());\r\n        webView.loadUrl(&quot;https://snoopti.de&quot;);\r\n    }\r\n}\r\n```\r\n\r\nactivity_main.xml:\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.MainActivity&quot;&gt;\r\n\r\n    &lt;WebView\r\n        android:id=&quot;@+id/webview&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot; /&gt;\r\n\r\n&lt;/RelativeLayout&gt;\r\n```\r\n\r\ni tried to ask ChatGPT but its doesnt gave me helpful code","title":"how can i fix this error in my Webview Android Project","body":"<p>i have a problem, that when i start the app then comes an error: <strong>net::ERR_CACHE_MISS</strong> i want an android app that implements a WebView so i am able to have my website on my app. Can someone please help me how to fix this problem</p>\n<p>MainActivity.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>import android.annotation.SuppressLint;\nimport android.os.Bundle;\nimport android.webkit.WebSettings;\nimport android.webkit.WebView;\nimport android.webkit.WebViewClient;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\npublic class MainActivity extends AppCompatActivity {\n\n    private WebView webView;\n\n    @SuppressLint(&quot;SetJavaScriptEnabled&quot;)\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        webView = findViewById(R.id.webview);\n        WebSettings webSettings = webView.getSettings();\n        webSettings.setJavaScriptEnabled(true);\n        webSettings.setCacheMode(WebSettings.LOAD_DEFAULT);\n\n        webView.setWebViewClient(new WebViewClient());\n        webView.loadUrl(&quot;https://snoopti.de&quot;);\n    }\n}\n</code></pre>\n<p>activity_main.xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n    &lt;WebView\n        android:id=&quot;@+id/webview&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot; /&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n<p>i tried to ask ChatGPT but its doesnt gave me helpful code</p>\n"},{"tags":["java","spring","maven","intellij-idea","rowmapper"],"comments":[{"owner":{"account_id":9779820,"reputation":9719,"user_id":7248342,"display_name":"Thomas Fritsch"},"score":0,"creation_date":1639098356,"post_id":70296617,"comment_id":124268812,"body_markdown":"Are you sure you imported Spring&#39;s `org.springframework.jdbc.core.RowMapper`,\nand not Swing&#39;s `javax.swing.tree.RowMapper` by accident?","body":"Are you sure you imported Spring&#39;s <code>org.springframework.jdbc.core.RowMapper</code>, and not Swing&#39;s <code>javax.swing.tree.RowMapper</code> by accident?"},{"owner":{"account_id":22135851,"reputation":1,"user_id":16386657,"display_name":"Cole"},"score":1,"creation_date":1639179843,"post_id":70296617,"comment_id":124291126,"body_markdown":"Ah, it turns out IntelliJ auto-imported the flyway jdbc package instead of the spring one. Thanks!","body":"Ah, it turns out IntelliJ auto-imported the flyway jdbc package instead of the spring one. Thanks!"}],"answers":[{"tags":[],"owner":{"account_id":23334750,"reputation":61,"user_id":17410605,"display_name":"Nati"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1688717621,"creation_date":1688717621,"answer_id":76635099,"question_id":70296617,"body_markdown":"Hey there so i was also following the video and found this to be the problem \r\n\r\n```java\r\npackage com.example.demo.dao;\r\n\r\nimport com.example.demo.model.Person;\r\n//import org.flywaydb.core.internal.jdbc.JdbcTemplate; &lt;- this is the wrong import\r\nimport org.springframework.jdbc.core.JdbcTemplate; //&lt;- use this import (on the second line when choosing to auto import)\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Repository;\r\n\r\n\r\nimport java.util.List;\r\nimport java.util.Optional;\r\nimport java.util.UUID;\r\n\r\n@Repository(&quot;postgres&quot;)\r\npublic class PersonDataAccessService implements PersonDao{\r\n\r\n    private final JdbcTemplate jdbcTemplate;   //the import for this \r\n```\r\n\r\nand the main code in the video will work with out a hitch.\r\n\r\n```java\r\n@Override\r\n    public List&lt;Object&gt; selectAllPeople() {\r\n        try {\r\n            final String sql = &quot;SELECT id, name FROM person&quot;;\r\n            return jdbcTemplate.query(sql, (resultSet, i) -&gt; {\r\n                UUID id = UUID.fromString(resultSet.getString(&quot;id&quot;));\r\n                String name = resultSet.getString(&quot;name&quot;);\r\n                return new Person(id, name);\r\n            });\r\n        } catch (Exception e) {\r\n            // Handle the exception appropriately (e.g., logging, error message, etc.)\r\n            throw new RuntimeException(&quot;Error occurred while retrieving people from the database&quot;, e);\r\n        }\r\n    }\r\n```","title":"Declaring a RowMapper with a lambda expression -- Wrong number of parameters: Expected 1 but got 2","body":"<p>Hey there so i was also following the video and found this to be the problem</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.demo.dao;\n\nimport com.example.demo.model.Person;\n//import org.flywaydb.core.internal.jdbc.JdbcTemplate; &lt;- this is the wrong import\nimport org.springframework.jdbc.core.JdbcTemplate; //&lt;- use this import (on the second line when choosing to auto import)\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Repository;\n\n\nimport java.util.List;\nimport java.util.Optional;\nimport java.util.UUID;\n\n@Repository(&quot;postgres&quot;)\npublic class PersonDataAccessService implements PersonDao{\n\n    private final JdbcTemplate jdbcTemplate;   //the import for this \n</code></pre>\n<p>and the main code in the video will work with out a hitch.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\n    public List&lt;Object&gt; selectAllPeople() {\n        try {\n            final String sql = &quot;SELECT id, name FROM person&quot;;\n            return jdbcTemplate.query(sql, (resultSet, i) -&gt; {\n                UUID id = UUID.fromString(resultSet.getString(&quot;id&quot;));\n                String name = resultSet.getString(&quot;name&quot;);\n                return new Person(id, name);\n            });\n        } catch (Exception e) {\n            // Handle the exception appropriately (e.g., logging, error message, etc.)\n            throw new RuntimeException(&quot;Error occurred while retrieving people from the database&quot;, e);\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":22135851,"reputation":1,"user_id":16386657,"display_name":"Cole"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":174,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1688717621,"creation_date":1639083399,"question_id":70296617,"body_markdown":"I&#39;m learning Spring and I was following along with this [tutorial](https://youtu.be/vtPkZShrvXQ?t=6117), but suddenly I started getting an error around this RowMapper assignment.\r\n\r\n ```\r\nRowMapper&lt;Person&gt; rowMapper = (resultSet, i) -&gt; {\r\n            UUID id = UUID.fromString(resultSet.getString(&quot;id&quot;));\r\n            String name = resultSet.getString(&quot;name&quot;);\r\n            return new Person(id, name);\r\n        };\r\n```\r\n\r\nIt&#39;s telling me that I&#39;m using the wrong number of parameters in the lambda expression. My code is identical to the video. I&#39;ve looked up several other similar questions on StackOverflow and they all line up with what I have. What am I doing wrong?","title":"Declaring a RowMapper with a lambda expression -- Wrong number of parameters: Expected 1 but got 2","body":"<p>I'm learning Spring and I was following along with this <a href=\"https://youtu.be/vtPkZShrvXQ?t=6117\" rel=\"nofollow noreferrer\">tutorial</a>, but suddenly I started getting an error around this RowMapper assignment.</p>\n<pre><code>RowMapper&lt;Person&gt; rowMapper = (resultSet, i) -&gt; {\n           UUID id = UUID.fromString(resultSet.getString(&quot;id&quot;));\n           String name = resultSet.getString(&quot;name&quot;);\n           return new Person(id, name);\n       };\n</code></pre>\n<p>It's telling me that I'm using the wrong number of parameters in the lambda expression. My code is identical to the video. I've looked up several other similar questions on StackOverflow and they all line up with what I have. What am I doing wrong?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3418957,"reputation":1176,"user_id":4029174,"accept_rate":100,"display_name":"bananas"},"score":0,"creation_date":1688716459,"post_id":76634803,"comment_id":135113904,"body_markdown":"from design prospective, here&#39;s my 2 cents. You are using thread pool. So when you are polling db every time you must check number of available threads in pool and then you have same number (approx.) of records.","body":"from design prospective, here&#39;s my 2 cents. You are using thread pool. So when you are polling db every time you must check number of available threads in pool and then you have same number (approx.) of records."},{"owner":{"account_id":3418957,"reputation":1176,"user_id":4029174,"accept_rate":100,"display_name":"bananas"},"score":0,"creation_date":1688716634,"post_id":76634803,"comment_id":135113930,"body_markdown":"But above comment will only makes sense if your problem have only mentioned context. If it has larger scope then you need to come up design first and I am not sure if this is right place for this.","body":"But above comment will only makes sense if your problem have only mentioned context. If it has larger scope then you need to come up design first and I am not sure if this is right place for this."},{"owner":{"account_id":28968113,"reputation":1,"user_id":22189026,"display_name":"Bao Nguyen"},"score":0,"creation_date":1688958633,"post_id":76634803,"comment_id":135139669,"body_markdown":"Thanks. I should make my problems clearer. I my opinion, i trying to create a new Queue that will trigger the fetching method when it just have 50% of pool size left in a new Thread. After some testing of performance and cases, i will show my code and please give me some help","body":"Thanks. I should make my problems clearer. I my opinion, i trying to create a new Queue that will trigger the fetching method when it just have 50% of pool size left in a new Thread. After some testing of performance and cases, i will show my code and please give me some help"}],"answers":[{"comments":[{"owner":{"account_id":28968113,"reputation":1,"user_id":22189026,"display_name":"Bao Nguyen"},"score":0,"creation_date":1688958671,"post_id":76634963,"comment_id":135139674,"body_markdown":"Thanks a lot. I will try then show my solution then","body":"Thanks a lot. I will try then show my solution then"}],"tags":[],"owner":{"account_id":13181158,"reputation":420,"user_id":9520479,"display_name":"Jhilton"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688716402,"creation_date":1688716402,"answer_id":76634963,"question_id":76634803,"body_markdown":"Not a comprehensive answer as more details may be required, but here are some ideas:\r\n\r\n**Assuming that your pool of data and threads are in the same JVM, you may have several strategies to do so:**\r\n\r\n- Poll your pool size, instead of directly polling the data: If the pool size is lower than a certain threshold, then fetch data, otherwise wait until next iteration.\r\n\r\n- Limit the data to match your pool size (poolMaxSize - currentPoolSize): instead of loading a big chunk of data all the time, fetch only enough data to keep your pool as busy as possible. Then it won&#39;t matter whether it was &quot;too busy&quot; or &quot;too empty&quot;\r\n\r\nBoth options above requires a dedicated Thread to poll information.\r\n\r\n**If you have control over your pool of data**, then maybe the &quot;read&quot; option your  workers use may evaluate a threshold and trigger a &quot;fetch more&quot; operation (if that makes any sense). This would remove the need of an additional Thread and make it a little more &quot;event driven&quot;.\r\n\r\n**Otherwise** it would be helpful to know more details about what your pool looks like (do you use Kafka, ActiveMQ, other technology to it) so people can come up with better ideas.","title":"How fetch data only if pool was almost empty?","body":"<p>Not a comprehensive answer as more details may be required, but here are some ideas:</p>\n<p><strong>Assuming that your pool of data and threads are in the same JVM, you may have several strategies to do so:</strong></p>\n<ul>\n<li><p>Poll your pool size, instead of directly polling the data: If the pool size is lower than a certain threshold, then fetch data, otherwise wait until next iteration.</p>\n</li>\n<li><p>Limit the data to match your pool size (poolMaxSize - currentPoolSize): instead of loading a big chunk of data all the time, fetch only enough data to keep your pool as busy as possible. Then it won't matter whether it was &quot;too busy&quot; or &quot;too empty&quot;</p>\n</li>\n</ul>\n<p>Both options above requires a dedicated Thread to poll information.</p>\n<p><strong>If you have control over your pool of data</strong>, then maybe the &quot;read&quot; option your  workers use may evaluate a threshold and trigger a &quot;fetch more&quot; operation (if that makes any sense). This would remove the need of an additional Thread and make it a little more &quot;event driven&quot;.</p>\n<p><strong>Otherwise</strong> it would be helpful to know more details about what your pool looks like (do you use Kafka, ActiveMQ, other technology to it) so people can come up with better ideas.</p>\n"}],"owner":{"account_id":28968113,"reputation":1,"user_id":22189026,"display_name":"Bao Nguyen"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1688716402,"creation_date":1688715041,"question_id":76634803,"body_markdown":"My cron will fetch data from database then put them all to a pool such as Queue.\r\nFor example, the pool can has max size of 1000.\r\nI have many workers to poll data from the pool then resolve it.\r\n\r\nThe problem is if I fetch more data from database only if the pool was empty, so all of my workers must to wait and do nothing. Well, i don&#39;t think it a good idea.\r\nIf I fetch data each 5 seconds for example, the pool still can be too full or too empty cause of the time that worker need to resolve each data is cannot estimated.\r\n\r\nSo, My question is how can I code another thread only run when the size of pool has 50% left?\r\n\r\nI just ask for a solution. I haven&#39;t code any yet.","title":"How fetch data only if pool was almost empty?","body":"<p>My cron will fetch data from database then put them all to a pool such as Queue.\nFor example, the pool can has max size of 1000.\nI have many workers to poll data from the pool then resolve it.</p>\n<p>The problem is if I fetch more data from database only if the pool was empty, so all of my workers must to wait and do nothing. Well, i don't think it a good idea.\nIf I fetch data each 5 seconds for example, the pool still can be too full or too empty cause of the time that worker need to resolve each data is cannot estimated.</p>\n<p>So, My question is how can I code another thread only run when the size of pool has 50% left?</p>\n<p>I just ask for a solution. I haven't code any yet.</p>\n"},{"tags":["java","types"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1688716401,"post_id":76634905,"comment_id":135113891,"body_markdown":"I think this question is more suited to https://cs.stackexchange.com/","body":"I think this question is more suited to <a href=\"https://cs.stackexchange.com/\">cs.stackexchange.com</a>"}],"owner":{"account_id":28396029,"reputation":23,"user_id":21721092,"display_name":"hopin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1688716026,"creation_date":1688715939,"question_id":76634905,"body_markdown":"What kind of algebraic structure, does java type system follow?\r\n\r\nI suspect partiel ordered set, but have problem finding research papers that verify this.\r\n\r\n\r\n\r\nI know null is subtype of everything, and every type is a subtype of Object.\r\n\r\nAntisymmetric property is enforced, by removing cyclic inheritance (A extends B, B extends C, C extends A)\r\n\r\nReflexive property is enforced, by remvoing self cyclic inheritance (A extends A)\r\n\r\nAnd transivity is enforced by A extends B, B extends C =&gt; A extends C.\r\n\r\nIt seems like java type system is a partiel ordered set, but cant find any research paper verifying this.","title":"What kind of algebraic structure does java type system follow?","body":"<p>What kind of algebraic structure, does java type system follow?</p>\n<p>I suspect partiel ordered set, but have problem finding research papers that verify this.</p>\n<p>I know null is subtype of everything, and every type is a subtype of Object.</p>\n<p>Antisymmetric property is enforced, by removing cyclic inheritance (A extends B, B extends C, C extends A)</p>\n<p>Reflexive property is enforced, by remvoing self cyclic inheritance (A extends A)</p>\n<p>And transivity is enforced by A extends B, B extends C =&gt; A extends C.</p>\n<p>It seems like java type system is a partiel ordered set, but cant find any research paper verifying this.</p>\n"},{"tags":["java","spring-boot","error-handling","spring-webflux"],"comments":[{"owner":{"account_id":3168631,"reputation":3561,"user_id":2678097,"display_name":"amanin"},"score":0,"creation_date":1688728646,"post_id":76634906,"comment_id":135116194,"body_markdown":"I think the problem comes to the fact that the error is thrown *on assembly*, not on pipeline execution. In your `getRequests()` *handler*, can you try to *defer* your service call like that :   `return Mono.defer(() -&gt; service.getRequests(request))...`","body":"I think the problem comes to the fact that the error is thrown <i>on assembly</i>, not on pipeline execution. In your <code>getRequests()</code> <i>handler</i>, can you try to <i>defer</i> your service call like that :   <code>return Mono.defer(() -&gt; service.getRequests(request))...</code>"},{"owner":{"account_id":28968238,"reputation":11,"user_id":22189132,"display_name":"clema"},"score":0,"creation_date":1689244000,"post_id":76634906,"comment_id":135187161,"body_markdown":"@amanin by doing that, the behaviour is the same, the exception isn&#39;t catched","body":"@amanin by doing that, the behaviour is the same, the exception isn&#39;t catched"}],"owner":{"account_id":28968238,"reputation":11,"user_id":22189132,"display_name":"clema"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1688715941,"creation_date":1688715941,"question_id":76634906,"body_markdown":"I&#39;m having some issues catching an exception with onErrorResume, which catches some exception and other doesn&#39;t, so I would like to understand better the behaviour.\r\n\r\nThis is my handler\r\n\r\n```\r\n    public Mono&lt;ServerResponse&gt; create(ServerRequest request) {\r\n        return service.createRequest(request).flatMap(c -&gt; ServerResponse.ok()\r\n                        .contentType(APPLICATION_JSON)\r\n                        .bodyValue(new ActionResponseDto&lt;&gt;(true, c, null)))\r\n                .onErrorResume(ValidationException.class, e -&gt; ServerResponse.badRequest()\r\n                        .contentType(APPLICATION_JSON)\r\n                        .bodyValue(new ActionResponseDto&lt;&gt;(false, e.getObject(), e.getErrors())));\r\n    }\r\n\r\n    public Mono&lt;ServerResponse&gt; getRequests(ServerRequest request) {\r\n        return service.getRequests(request)\r\n                .flatMap(res -&gt; ServerResponse.ok()\r\n                        .contentType(APPLICATION_JSON)\r\n                        .bodyValue(PaginationUtil.createPaginatedListResponse(res)))\r\n                .onErrorResume(ValidationException.class, e -&gt; ServerResponse.badRequest().bodyValue(&quot;error&quot;));\r\n    }\r\n```\r\n\r\nAnd this is my service\r\n\r\n```\r\n    public Mono&lt;RequestDto&gt; createRequest(ServerRequest request) {\r\n        // get body\r\n        var requestDto = request.bodyToMono(RequestDto.class);\r\n\r\n        // validate and convert to entity\r\n        var entity = requestDto.map(r -&gt; {\r\n            var errors = validator.validate(r);\r\n\r\n            if (!errors.isEmpty()) {\r\n                // has errors\r\n                throw new ValidationException(r, errors);\r\n            }\r\n\r\n            // has no errors\r\n            // do stuff\r\n        });\r\n\r\n        // save on database and return\r\n        // do stuff\r\n        });\r\n    }\r\n\r\n    public Mono&lt;Page&lt;RequestDto&gt;&gt; getRequests(ServerRequest request) {\r\n        try {\r\n            // read query params\r\n            // do stuff\r\n        } catch (Exception e) {\r\n            throw new ValidationException(requestQuery, List.of(new ValidationError(&quot;error query params&quot;, &quot;message&quot;)));\r\n        }\r\n\r\n        // get requests from database\r\n        // do stuff\r\n    }\r\n```\r\n\r\nSo, the point is on the handler.create() method I can catch with no problem the ValidationException which is thrown by service.createRequest(). The client gets a 400 with validation errors.\r\n\r\nHowever, the handler.getRequests() method doesn&#39;t catch the same ValidationException which is thrown by the service.getRequests() the same way service.createRequest() does. The client gets a 500.\r\n\r\nThe following exception is printed on logs on the second case:\r\n\r\n```\r\n07-07-2023 09:00:21.713 backup [parallel-2][trace= span=][ERROR] o.s.b.a.w.r.e.AbstractErrorWebExceptionHandler.error - [60e3f148-1]  500 Server Error for HTTP GET &quot;/requests?requestDate=07-07-2023&quot;\r\ncom.orange.cashsolution.commons.exception.ValidationException: null\r\n\tat com.orange.cashsolution.backup.service.impl.RequestServiceImpl.getRequests(RequestServiceImpl.java:98)\r\n\tSuppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: \r\nError has been observed at the following site(s):\r\n\t*__checkpoint  AuthorizationWebFilter [DefaultWebFilterChain]\r\n\t*__checkpoint  ExceptionTranslationWebFilter [DefaultWebFilterChain]\r\n\t*__checkpoint  LogoutWebFilter [DefaultWebFilterChain]\r\n\t*__checkpoint  ServerRequestCacheWebFilter [DefaultWebFilterChain]\r\n\t*__checkpoint  SecurityContextServerWebExchangeWebFilter [DefaultWebFilterChain]\r\n\t*__checkpoint  ReactorContextWebFilter [DefaultWebFilterChain]\r\n\t*__checkpoint  HttpHeaderWriterWebFilter [DefaultWebFilterChain]\r\n\t*__checkpoint  ServerWebExchangeReactorContextWebFilter [DefaultWebFilterChain]\r\n\t*__checkpoint  org.springframework.security.web.server.WebFilterChainProxy [DefaultWebFilterChain]\r\n\t*__checkpoint  org.springframework.web.filter.reactive.ServerHttpObservationFilter [DefaultWebFilterChain]\r\n\t*__checkpoint  HTTP GET &quot;/backup/requests?requestDate=07-07-2023&quot; [ExceptionHandlingWebHandler]\r\nOriginal Stack Trace:\r\n\t\tat com.orange.cashsolution.backup.service.impl.RequestServiceImpl.getRequests(RequestServiceImpl.java:98)\r\n\t\tat com.orange.cashsolution.backup.handler.RequestHandler.getRequests(RequestHandler.java:62)\r\n\t\tat org.springframework.web.reactive.function.server.support.HandlerFunctionAdapter.handle(HandlerFunctionAdapter.java:61)\r\n\t\tat org.springframework.web.reactive.DispatcherHandler.handleRequestWith(DispatcherHandler.java:183)\r\n\t\tat org.springframework.web.reactive.DispatcherHandler.lambda$handle$2(DispatcherHandler.java:154)\r\n\t\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:132)\r\n\t\tat reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79)\r\n\t\tat reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:74)\r\n\t\tat reactor.core.publisher.MonoNext$NextSubscriber.onNext(MonoNext.java:82)\r\n\t\tat reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.innerNext(FluxConcatMapNoPrefetch.java:258)\r\n\t\tat reactor.core.publisher.FluxConcatMap$ConcatMapInner.onNext(FluxConcatMap.java:863)\r\n\t\tat reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:122)\r\n\t\tat reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:200)\r\n\t\t\r\n...\r\n\r\n```\r\n\r\nIn addition, if in the handler.getRequests() I do the following:\r\n```\r\nreturn service.getRequests(request)\r\n                .flatMap(res -&gt; ServerResponse.ok()\r\n                        .contentType(APPLICATION_JSON)\r\n                        .bodyValue(PaginationUtil.createPaginatedListResponse(res)))\r\n                .onErrorResume(e -&gt; ServerResponse.badRequest().bodyValue(&quot;error&quot;));\r\n```\r\n\r\nIt catches other kind of exceptions but never ValidationException.\r\n\r\n\r\nCan anyone explain to me why in one case I&#39;m catching the exception and not in the other?\r\n\r\nThanks in advance\r\n\r\n\r\nIf I do the following in the service.getRequests()\r\n\r\n```\r\nreturn Mono.error(new ValidationException(requestQuery, List.of(new ValidationError(&quot;error query params&quot;, &quot;message&quot;))));\r\n```\r\n\r\nInstead of throwing the exception, the onErrorResume catches the ValidationException. However I don&#39;t have to do that on the other service.","title":"onErrorResume catches some exceptions only","body":"<p>I'm having some issues catching an exception with onErrorResume, which catches some exception and other doesn't, so I would like to understand better the behaviour.</p>\n<p>This is my handler</p>\n<pre><code>    public Mono&lt;ServerResponse&gt; create(ServerRequest request) {\n        return service.createRequest(request).flatMap(c -&gt; ServerResponse.ok()\n                        .contentType(APPLICATION_JSON)\n                        .bodyValue(new ActionResponseDto&lt;&gt;(true, c, null)))\n                .onErrorResume(ValidationException.class, e -&gt; ServerResponse.badRequest()\n                        .contentType(APPLICATION_JSON)\n                        .bodyValue(new ActionResponseDto&lt;&gt;(false, e.getObject(), e.getErrors())));\n    }\n\n    public Mono&lt;ServerResponse&gt; getRequests(ServerRequest request) {\n        return service.getRequests(request)\n                .flatMap(res -&gt; ServerResponse.ok()\n                        .contentType(APPLICATION_JSON)\n                        .bodyValue(PaginationUtil.createPaginatedListResponse(res)))\n                .onErrorResume(ValidationException.class, e -&gt; ServerResponse.badRequest().bodyValue(&quot;error&quot;));\n    }\n</code></pre>\n<p>And this is my service</p>\n<pre><code>    public Mono&lt;RequestDto&gt; createRequest(ServerRequest request) {\n        // get body\n        var requestDto = request.bodyToMono(RequestDto.class);\n\n        // validate and convert to entity\n        var entity = requestDto.map(r -&gt; {\n            var errors = validator.validate(r);\n\n            if (!errors.isEmpty()) {\n                // has errors\n                throw new ValidationException(r, errors);\n            }\n\n            // has no errors\n            // do stuff\n        });\n\n        // save on database and return\n        // do stuff\n        });\n    }\n\n    public Mono&lt;Page&lt;RequestDto&gt;&gt; getRequests(ServerRequest request) {\n        try {\n            // read query params\n            // do stuff\n        } catch (Exception e) {\n            throw new ValidationException(requestQuery, List.of(new ValidationError(&quot;error query params&quot;, &quot;message&quot;)));\n        }\n\n        // get requests from database\n        // do stuff\n    }\n</code></pre>\n<p>So, the point is on the handler.create() method I can catch with no problem the ValidationException which is thrown by service.createRequest(). The client gets a 400 with validation errors.</p>\n<p>However, the handler.getRequests() method doesn't catch the same ValidationException which is thrown by the service.getRequests() the same way service.createRequest() does. The client gets a 500.</p>\n<p>The following exception is printed on logs on the second case:</p>\n<pre><code>07-07-2023 09:00:21.713 backup [parallel-2][trace= span=][ERROR] o.s.b.a.w.r.e.AbstractErrorWebExceptionHandler.error - [60e3f148-1]  500 Server Error for HTTP GET &quot;/requests?requestDate=07-07-2023&quot;\ncom.orange.cashsolution.commons.exception.ValidationException: null\n    at com.orange.cashsolution.backup.service.impl.RequestServiceImpl.getRequests(RequestServiceImpl.java:98)\n    Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: \nError has been observed at the following site(s):\n    *__checkpoint  AuthorizationWebFilter [DefaultWebFilterChain]\n    *__checkpoint  ExceptionTranslationWebFilter [DefaultWebFilterChain]\n    *__checkpoint  LogoutWebFilter [DefaultWebFilterChain]\n    *__checkpoint  ServerRequestCacheWebFilter [DefaultWebFilterChain]\n    *__checkpoint  SecurityContextServerWebExchangeWebFilter [DefaultWebFilterChain]\n    *__checkpoint  ReactorContextWebFilter [DefaultWebFilterChain]\n    *__checkpoint  HttpHeaderWriterWebFilter [DefaultWebFilterChain]\n    *__checkpoint  ServerWebExchangeReactorContextWebFilter [DefaultWebFilterChain]\n    *__checkpoint  org.springframework.security.web.server.WebFilterChainProxy [DefaultWebFilterChain]\n    *__checkpoint  org.springframework.web.filter.reactive.ServerHttpObservationFilter [DefaultWebFilterChain]\n    *__checkpoint  HTTP GET &quot;/backup/requests?requestDate=07-07-2023&quot; [ExceptionHandlingWebHandler]\nOriginal Stack Trace:\n        at com.orange.cashsolution.backup.service.impl.RequestServiceImpl.getRequests(RequestServiceImpl.java:98)\n        at com.orange.cashsolution.backup.handler.RequestHandler.getRequests(RequestHandler.java:62)\n        at org.springframework.web.reactive.function.server.support.HandlerFunctionAdapter.handle(HandlerFunctionAdapter.java:61)\n        at org.springframework.web.reactive.DispatcherHandler.handleRequestWith(DispatcherHandler.java:183)\n        at org.springframework.web.reactive.DispatcherHandler.lambda$handle$2(DispatcherHandler.java:154)\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:132)\n        at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79)\n        at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:74)\n        at reactor.core.publisher.MonoNext$NextSubscriber.onNext(MonoNext.java:82)\n        at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.innerNext(FluxConcatMapNoPrefetch.java:258)\n        at reactor.core.publisher.FluxConcatMap$ConcatMapInner.onNext(FluxConcatMap.java:863)\n        at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:122)\n        at reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:200)\n        \n...\n\n</code></pre>\n<p>In addition, if in the handler.getRequests() I do the following:</p>\n<pre><code>return service.getRequests(request)\n                .flatMap(res -&gt; ServerResponse.ok()\n                        .contentType(APPLICATION_JSON)\n                        .bodyValue(PaginationUtil.createPaginatedListResponse(res)))\n                .onErrorResume(e -&gt; ServerResponse.badRequest().bodyValue(&quot;error&quot;));\n</code></pre>\n<p>It catches other kind of exceptions but never ValidationException.</p>\n<p>Can anyone explain to me why in one case I'm catching the exception and not in the other?</p>\n<p>Thanks in advance</p>\n<p>If I do the following in the service.getRequests()</p>\n<pre><code>return Mono.error(new ValidationException(requestQuery, List.of(new ValidationError(&quot;error query params&quot;, &quot;message&quot;))));\n</code></pre>\n<p>Instead of throwing the exception, the onErrorResume catches the ValidationException. However I don't have to do that on the other service.</p>\n"},{"tags":["java","spring","spring-boot","spring-integration"],"comments":[{"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1688738663,"post_id":76634893,"comment_id":135118274,"body_markdown":"You probably have a `MessageGroupStoreReaper`. Otherwise I cannot explain the reason to use those `send-partial-result-on-expiry` and `expire-groups-upon-timeout`. The timeout action in the `TimeoutCountSequenceSizeReleaseStrategy` happens only when message is sent to the aggregator anyway.","body":"You probably have a <code>MessageGroupStoreReaper</code>. Otherwise I cannot explain the reason to use those <code>send-partial-result-on-expiry</code> and <code>expire-groups-upon-timeout</code>. The timeout action in the <code>TimeoutCountSequenceSizeReleaseStrategy</code> happens only when message is sent to the aggregator anyway."},{"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1688999785,"post_id":76634893,"comment_id":135147348,"body_markdown":"Would you mind shaping an answer for that then, please? It is not clear what and how helped you. I just made a couple assumptions, but I don&#39;t feel confident that it answers your problem.","body":"Would you mind shaping an answer for that then, please? It is not clear what and how helped you. I just made a couple assumptions, but I don&#39;t feel confident that it answers your problem."}],"owner":{"account_id":14507866,"reputation":231,"user_id":10479172,"display_name":"coder"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1688715857,"creation_date":1688715857,"question_id":76634893,"body_markdown":"I have defined aggregator as below with release strategy as TimeoutCountSequenceSizeReleaseStrategy. In this strategy, i have set timeout to 15 minutes and threshold to 10000. When the messages are released in 1 minute, which the default timeout of TimeoutCountSequenceSizeReleaseStrategy. Please advise what could be missing\r\n\r\nSpring version used is 5.3.25\r\n\r\n\r\n     &lt;int:aggregator \r\n          output-channel=&quot;messageOutFileChannel&quot;\r\n          send-partial-result-on-expiry=&quot;true&quot;\r\n          message-store=&quot;customMessageStore&quot;\r\n          correlation-strategy-expression=&quot;headers[&#39;fileName&#39;]\r\n          ref=&quot;messageAggregatorService&quot;\r\n          method=&quot;aggregateMessages&quot;\r\n          release-strategy-expression=&quot;timeoutReleaseStrategy&quot;    \r\n          expire-groups-upon-completion=&quot;true&quot;\r\n          expire-groups-upon-timeout=&quot;true&quot;\r\n          id=&quot;customAggregator&quot;\r\n          input-channel=&quot;aggregatorInChannel&quot; id=&quot;messageAggregator&quot; &gt;\r\n    &lt;/int:aggregator&gt;\r\n    \r\n    &lt;bean id=&quot;customMessageStore&quot;  class=&quot;org....SimpleMessageStore&quot;/&gt;\r\n    &lt;bean id=&quot;timeoutReleaseStrategy&quot; class=&quot;org....TimeoutCountSequenceSizeReleaseStrategy&quot;&gt;\r\n       &lt;constructor-arg name=&quot;threshold&quot; value=&quot;10000&quot;/&gt;\r\n          &lt;constructor-arg name=&quot;timeout&quot; value=&quot;900000&quot;/&gt; // 15 minutes\r\n    &lt;/bean&gt;","title":"Why is TimeoutCountSequenceSizeReleaseStrategy releasing messages in a minute even after setting timout to 15 minutes?","body":"<p>I have defined aggregator as below with release strategy as TimeoutCountSequenceSizeReleaseStrategy. In this strategy, i have set timeout to 15 minutes and threshold to 10000. When the messages are released in 1 minute, which the default timeout of TimeoutCountSequenceSizeReleaseStrategy. Please advise what could be missing</p>\n<p>Spring version used is 5.3.25</p>\n<pre><code> &lt;int:aggregator \n      output-channel=&quot;messageOutFileChannel&quot;\n      send-partial-result-on-expiry=&quot;true&quot;\n      message-store=&quot;customMessageStore&quot;\n      correlation-strategy-expression=&quot;headers['fileName']\n      ref=&quot;messageAggregatorService&quot;\n      method=&quot;aggregateMessages&quot;\n      release-strategy-expression=&quot;timeoutReleaseStrategy&quot;    \n      expire-groups-upon-completion=&quot;true&quot;\n      expire-groups-upon-timeout=&quot;true&quot;\n      id=&quot;customAggregator&quot;\n      input-channel=&quot;aggregatorInChannel&quot; id=&quot;messageAggregator&quot; &gt;\n&lt;/int:aggregator&gt;\n\n&lt;bean id=&quot;customMessageStore&quot;  class=&quot;org....SimpleMessageStore&quot;/&gt;\n&lt;bean id=&quot;timeoutReleaseStrategy&quot; class=&quot;org....TimeoutCountSequenceSizeReleaseStrategy&quot;&gt;\n   &lt;constructor-arg name=&quot;threshold&quot; value=&quot;10000&quot;/&gt;\n      &lt;constructor-arg name=&quot;timeout&quot; value=&quot;900000&quot;/&gt; // 15 minutes\n&lt;/bean&gt;\n</code></pre>\n"},{"tags":["java","android-studio","firebase-cloud-messaging"],"owner":{"account_id":28961074,"reputation":1,"user_id":22183536,"display_name":"YP Work Stuff"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1688715695,"creation_date":1688715695,"question_id":76634881,"body_markdown":"```\r\nprivate static final String[] SCOPES = { &quot;https://www.googleapis.com/auth/firebase.messaging&quot; };\r\nprivate GoogleCredentials googleCredentials;\r\nprivate InputStream jasonfile;\r\nprivate String beaerertoken;\r\nprivate String BEARERTOKEN;\r\npublic static final String URL_FCM = &quot;https://fcm.googleapis.com/v1/projects/**PROJECT**HERE***/messages:send&quot;;\r\n```\r\n\r\n\r\n```\r\ntry {getAccessToken();} catch (IOException e) {e.printStackTrace();}\r\n\r\nCVnotification.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                String fcmtitle = &quot;wew&quot;;\r\n                String fcmmsg = &quot;mem&quot;;\r\n                if(!fcmtitle.equals(&quot;&quot;) &amp;&amp; !fcmmsg.equals(&quot;&quot;)){\r\n                    pushNotificationo(\r\n                            HomePage.this,\r\n                            &quot;***devicetoken***&quot;,\r\n                            fcmtitle,\r\n                            fcmmsg\r\n                    );\r\n                }\r\n            }\r\n        });\r\n```\r\n\r\n\r\n```\r\n private void getAccessToken() throws IOException {\r\n\r\n    jasonfile = getResources().openRawResource(getApplicationContext().getResources().getIdentifier(&quot;service_account&quot;, &quot;raw&quot;, getPackageName()));\r\n\r\n\r\n        new Thread(new Runnable() {\r\n\r\n        @Override\r\n        public void run() {\r\n\r\n            try {\r\n\r\n                googleCredentials = GoogleCredentials\r\n                        .fromStream(jasonfile)\r\n                        .createScoped(Arrays.asList(SCOPES));\r\n\r\n                googleCredentials.refreshAccessToken().getTokenValue();\r\n\r\n                beaerertoken = googleCredentials.refreshAccessToken().getTokenValue();\r\n                Log.d(TAG, &quot;beaerertoken:  &quot; + beaerertoken);\r\n\r\n                BEARERTOKEN = beaerertoken;\r\n\r\n            } catch (IOException e) {\r\n\r\n                Log.d(TAG, &quot;In error statement&quot;);\r\n                e.printStackTrace();\r\n            }\r\n\r\n\r\n        }\r\n    }).start();\r\n    }\r\n```\r\n\r\n\r\n\r\n`public void pushNotificationo(Context context, String devicetoken, String fcmtitle, String fcmmsg){\r\n\r\n        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\r\n        StrictMode.setThreadPolicy(policy);\r\n\r\n        try {\r\n\r\n            JSONObject json = new JSONObject();\r\n            json.put(&quot;token&quot;, devicetoken);\r\n            JSONObject notification = new JSONObject();\r\n            notification.put(&quot;title&quot;, fcmtitle);\r\n            notification.put(&quot;body&quot;, fcmmsg);\r\n            json.put(&quot;notification&quot;, notification);\r\n\r\n            JsonObjectRequest jsonObjectRequest = new JsonObjectRequest(Request.Method.POST, URL_CONFIG.URL_FCM, json, new Response.Listener&lt;JSONObject&gt;() {\r\n                @Override\r\n                public void onResponse(JSONObject response) {\r\n                    System.out.println(&quot;FCM &quot; + response);\r\n                }\r\n            }, new Response.ErrorListener() {\r\n                @Override\r\n                public void onErrorResponse(VolleyError error) {\r\n                    //System.out.println(&quot;FAILURE &quot; + error);\r\n                }\r\n            }){\r\n                @Override\r\n                public Map&lt;String, String&gt; getHeaders() throws AuthFailureError {\r\n                    Map&lt;String, String&gt; params = new HashMap&lt;&gt;();\r\n                    params.put(&quot;Content-Type&quot;, &quot;application/json; UTF-8&quot;);\r\n                    params.put(&quot;Authorization&quot;, &quot; Bearer &quot;+ BEARERTOKEN);\r\n                    return params;\r\n                }\r\n            };\r\n\r\n            homeReqQue.add(jsonObjectRequest);\r\n\r\n        } catch (JSONException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }`\r\n\r\n\r\n\r\nTHe Error that I am getting:\r\n\r\n```\r\n[6711] NetworkUtility.shouldRetryException: Unexpected response code 400 for https://fcm.googleapis.com/v1/projects/***PROJECT**HERE***/messages:send\r\n```\r\n\r\nHello, I am trying to push notification from an android device to another with Firebase Cloud Messaging http v1. However, I getting this Unexpected response code 400 error. Do I miss something important in the code? Can someone help me out here?\r\n","title":"NetworkUtility.shouldRetryException: Unexpected response code 400 for https://fcm.googleapis.com/v1/projects/**PROJECT**NAME***/messages:send","body":"<pre><code>private static final String[] SCOPES = { &quot;https://www.googleapis.com/auth/firebase.messaging&quot; };\nprivate GoogleCredentials googleCredentials;\nprivate InputStream jasonfile;\nprivate String beaerertoken;\nprivate String BEARERTOKEN;\npublic static final String URL_FCM = &quot;https://fcm.googleapis.com/v1/projects/**PROJECT**HERE***/messages:send&quot;;\n</code></pre>\n<pre><code>try {getAccessToken();} catch (IOException e) {e.printStackTrace();}\n\nCVnotification.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                String fcmtitle = &quot;wew&quot;;\n                String fcmmsg = &quot;mem&quot;;\n                if(!fcmtitle.equals(&quot;&quot;) &amp;&amp; !fcmmsg.equals(&quot;&quot;)){\n                    pushNotificationo(\n                            HomePage.this,\n                            &quot;***devicetoken***&quot;,\n                            fcmtitle,\n                            fcmmsg\n                    );\n                }\n            }\n        });\n</code></pre>\n<pre><code> private void getAccessToken() throws IOException {\n\n    jasonfile = getResources().openRawResource(getApplicationContext().getResources().getIdentifier(&quot;service_account&quot;, &quot;raw&quot;, getPackageName()));\n\n\n        new Thread(new Runnable() {\n\n        @Override\n        public void run() {\n\n            try {\n\n                googleCredentials = GoogleCredentials\n                        .fromStream(jasonfile)\n                        .createScoped(Arrays.asList(SCOPES));\n\n                googleCredentials.refreshAccessToken().getTokenValue();\n\n                beaerertoken = googleCredentials.refreshAccessToken().getTokenValue();\n                Log.d(TAG, &quot;beaerertoken:  &quot; + beaerertoken);\n\n                BEARERTOKEN = beaerertoken;\n\n            } catch (IOException e) {\n\n                Log.d(TAG, &quot;In error statement&quot;);\n                e.printStackTrace();\n            }\n\n\n        }\n    }).start();\n    }\n</code></pre>\n<p>`public void pushNotificationo(Context context, String devicetoken, String fcmtitle, String fcmmsg){</p>\n<pre><code>    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\n    StrictMode.setThreadPolicy(policy);\n\n    try {\n\n        JSONObject json = new JSONObject();\n        json.put(&quot;token&quot;, devicetoken);\n        JSONObject notification = new JSONObject();\n        notification.put(&quot;title&quot;, fcmtitle);\n        notification.put(&quot;body&quot;, fcmmsg);\n        json.put(&quot;notification&quot;, notification);\n\n        JsonObjectRequest jsonObjectRequest = new JsonObjectRequest(Request.Method.POST, URL_CONFIG.URL_FCM, json, new Response.Listener&lt;JSONObject&gt;() {\n            @Override\n            public void onResponse(JSONObject response) {\n                System.out.println(&quot;FCM &quot; + response);\n            }\n        }, new Response.ErrorListener() {\n            @Override\n            public void onErrorResponse(VolleyError error) {\n                //System.out.println(&quot;FAILURE &quot; + error);\n            }\n        }){\n            @Override\n            public Map&lt;String, String&gt; getHeaders() throws AuthFailureError {\n                Map&lt;String, String&gt; params = new HashMap&lt;&gt;();\n                params.put(&quot;Content-Type&quot;, &quot;application/json; UTF-8&quot;);\n                params.put(&quot;Authorization&quot;, &quot; Bearer &quot;+ BEARERTOKEN);\n                return params;\n            }\n        };\n\n        homeReqQue.add(jsonObjectRequest);\n\n    } catch (JSONException e) {\n        e.printStackTrace();\n    }\n\n}`\n</code></pre>\n<p>THe Error that I am getting:</p>\n<pre><code>[6711] NetworkUtility.shouldRetryException: Unexpected response code 400 for https://fcm.googleapis.com/v1/projects/***PROJECT**HERE***/messages:send\n</code></pre>\n<p>Hello, I am trying to push notification from an android device to another with Firebase Cloud Messaging http v1. However, I getting this Unexpected response code 400 error. Do I miss something important in the code? Can someone help me out here?</p>\n"},{"tags":["java","json","spring-boot","jackson"],"comments":[{"owner":{"account_id":7007162,"reputation":939,"user_id":5371168,"display_name":"D. Lawrence"},"score":3,"creation_date":1575964645,"post_id":59262566,"comment_id":104733363,"body_markdown":"Your JSON is an array of CurrencyDTO, not just a CurrencyDTO","body":"Your JSON is an array of CurrencyDTO, not just a CurrencyDTO"},{"owner":{"account_id":12719800,"reputation":95,"user_id":9240633,"display_name":"Duda Validator"},"score":0,"creation_date":1575964963,"post_id":59262566,"comment_id":104733526,"body_markdown":"@D.Lawrence I have tried that as well, but that is affecting my code where I call API.","body":"@D.Lawrence I have tried that as well, but that is affecting my code where I call API."},{"owner":{"account_id":15275628,"reputation":416,"user_id":11021437,"display_name":"Divanshu Aggarwal"},"score":0,"creation_date":1576233069,"post_id":59262566,"comment_id":104841416,"body_markdown":"Share Currency class","body":"Share Currency class"}],"answers":[{"comments":[{"owner":{"account_id":12719800,"reputation":95,"user_id":9240633,"display_name":"Duda Validator"},"score":0,"creation_date":1575967681,"post_id":59262992,"comment_id":104734756,"body_markdown":"After those changes, I am getting an error in API calling part. How would you approach to solve it? the code is above in `try catch` block","body":"After those changes, I am getting an error in API calling part. How would you approach to solve it? the code is above in <code>try catch</code> block"},{"owner":{"account_id":12719800,"reputation":95,"user_id":9240633,"display_name":"Duda Validator"},"score":0,"creation_date":1575969019,"post_id":59262992,"comment_id":104735451,"body_markdown":"`The method forEach(Consumer &lt;? super Rates&gt;) in the type Iterable&lt;Rates&gt; is not applicable for the arguments ((&lt;no type&gt; key, &lt;no type&gt; value) -&gt; {})` I am using forEach to store data in database via Currency entity class.","body":"<code>The method forEach(Consumer &lt;? super Rates&gt;) in the type Iterable&lt;Rates&gt; is not applicable for the arguments ((&lt;no type&gt; key, &lt;no type&gt; value) -&gt; {})</code> I am using forEach to store data in database via Currency entity class."},{"owner":{"account_id":8143132,"reputation":148,"user_id":6132595,"display_name":"amazing_milkha"},"score":0,"creation_date":1575969418,"post_id":59262992,"comment_id":104735649,"body_markdown":"is key value in price is **currency** and **mid** in json?","body":"is key value in price is <b>currency</b> and <b>mid</b> in json?"},{"owner":{"account_id":12719800,"reputation":95,"user_id":9240633,"display_name":"Duda Validator"},"score":0,"creation_date":1575969724,"post_id":59262992,"comment_id":104735832,"body_markdown":"After your suggestion and refactoring the code, there is not `Map&lt;&gt;` interface as `price` in Rates class.","body":"After your suggestion and refactoring the code, there is not <code>Map&lt;&gt;</code> interface as <code>price</code> in Rates class."},{"owner":{"account_id":8143132,"reputation":148,"user_id":6132595,"display_name":"amazing_milkha"},"score":0,"creation_date":1575970386,"post_id":59262992,"comment_id":104736199,"body_markdown":"I have added the ```try catch block``` as well","body":"I have added the <code>try catch block</code> as well"},{"owner":{"account_id":12719800,"reputation":95,"user_id":9240633,"display_name":"Duda Validator"},"score":0,"creation_date":1575970428,"post_id":59262992,"comment_id":104736220,"body_markdown":"In my currency class, there are only two fields, one is `String name` to hold code and second is `Double value` to hold rate and code and mid are from json.","body":"In my currency class, there are only two fields, one is <code>String name</code> to hold code and second is <code>Double value</code> to hold rate and code and mid are from json."},{"owner":{"account_id":12719800,"reputation":95,"user_id":9240633,"display_name":"Duda Validator"},"score":0,"creation_date":1575971918,"post_id":59262992,"comment_id":104737070,"body_markdown":"No, I have tried it but it is now throwing this exception: `org.springframework.http.converter.HttpMessageConversionException: Type definition error:`","body":"No, I have tried it but it is now throwing this exception: <code>org.springframework.http.converter.HttpMessageConversionExce&zwnj;&#8203;ption: Type definition error:</code>"},{"owner":{"account_id":12719800,"reputation":95,"user_id":9240633,"display_name":"Duda Validator"},"score":0,"creation_date":1575973150,"post_id":59262992,"comment_id":104737758,"body_markdown":"Yes, I have changed it","body":"Yes, I have changed it"},{"owner":{"account_id":8143132,"reputation":148,"user_id":6132595,"display_name":"amazing_milkha"},"score":0,"creation_date":1575973368,"post_id":59262992,"comment_id":104737864,"body_markdown":"It is working for me, please check again thoroughly","body":"It is working for me, please check again thoroughly"}],"tags":[],"owner":{"account_id":8143132,"reputation":148,"user_id":6132595,"display_name":"amazing_milkha"},"comment_count":9,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1575971417,"creation_date":1575966442,"answer_id":59262992,"question_id":59262566,"body_markdown":"Also, the json you shared is an array of CurrencyDTO. Assuming your Json to be,\r\n```\r\n  {\r\n      &quot;table&quot;:&quot;A&quot;,\r\n      &quot;no&quot;:&quot;237/A/NBP/2019&quot;,\r\n      &quot;effectiveDate&quot;:&quot;2019-12-09&quot;,\r\n      &quot;rates&quot;:[\r\n         {\r\n            &quot;currency&quot;:&quot;bat (Tajlandia)&quot;,\r\n            &quot;code&quot;:&quot;THB&quot;,\r\n            &quot;mid&quot;:0.1277\r\n         },\r\n         {\r\n            &quot;currency&quot;:&quot;dolar amerykaski&quot;,\r\n            &quot;code&quot;:&quot;USD&quot;,\r\n            &quot;mid&quot;:3.8704\r\n         }\r\n      ]\r\n   }\r\n```\r\nChange your CurrencyDTO as,\r\n```\r\n@Data\r\n@NoArgsConstructor\r\npublic class CurrencyDTO {\r\n\r\n    private String table;\r\n    private String no;\r\n    private String effectiveDate;\r\n\r\n    private List&lt;Rates&gt; rates;\r\n}\r\n```\r\n\r\nand your Rates class to,\r\n```\r\n@Data\r\n@NoArgsConstructor\r\npublic class Rates {\r\n\r\n    private String currency;\r\n    private String code;\r\n    private Double mid;\r\n}\r\n```\r\n\r\nIt is able to deserialize for me. \r\nWhat you are doing wrong is that Dto instance variables should be according to name in Json or you should use **@JsonProperty(&quot;nameInTheJson&quot;)**.\r\n\r\n\r\nIf you want to make it compatible to your JSON you can just use Array of CurrencyDTO\r\nYou will be able to deserialise, you can use the object as,\r\n```\r\ntry {\r\n       RestTemplate restTemplate = new RestTemplate();\r\n\r\n       CurrencyDTO[] forObject =\r\n                    restTemplate.getForEntity(&quot;http://api.nbp.pl/api/exchangerates/tables/a/&quot;, CurrencyDTO[].class).getBody();\r\n          for (CurrencyDTO currencyDTO1 : forObject) {\r\n                for (Rates rate : currencyDTO1.getRates()) {\r\n                    Currency currency = new Currency(rate.getCode(), rate.getMid());\r\n                    //you code to put the object inside the db\r\n                    this.currencyRepository.save(currency);\r\n                }\r\n            }\r\n        }catch (Exception ex) {\r\n            System.out.println(ex.getMessage());\r\n        }\r\n```\r\n","title":"JSON parse error: Cannot deserialize instance of `` out of START_ARRAY token","body":"<p>Also, the json you shared is an array of CurrencyDTO. Assuming your Json to be,</p>\n\n<pre><code>  {\n      \"table\":\"A\",\n      \"no\":\"237/A/NBP/2019\",\n      \"effectiveDate\":\"2019-12-09\",\n      \"rates\":[\n         {\n            \"currency\":\"bat (Tajlandia)\",\n            \"code\":\"THB\",\n            \"mid\":0.1277\n         },\n         {\n            \"currency\":\"dolar amerykaski\",\n            \"code\":\"USD\",\n            \"mid\":3.8704\n         }\n      ]\n   }\n</code></pre>\n\n<p>Change your CurrencyDTO as,</p>\n\n<pre><code>@Data\n@NoArgsConstructor\npublic class CurrencyDTO {\n\n    private String table;\n    private String no;\n    private String effectiveDate;\n\n    private List&lt;Rates&gt; rates;\n}\n</code></pre>\n\n<p>and your Rates class to,</p>\n\n<pre><code>@Data\n@NoArgsConstructor\npublic class Rates {\n\n    private String currency;\n    private String code;\n    private Double mid;\n}\n</code></pre>\n\n<p>It is able to deserialize for me. \nWhat you are doing wrong is that Dto instance variables should be according to name in Json or you should use <strong>@JsonProperty(\"nameInTheJson\")</strong>.</p>\n\n<p>If you want to make it compatible to your JSON you can just use Array of CurrencyDTO\nYou will be able to deserialise, you can use the object as,</p>\n\n<pre><code>try {\n       RestTemplate restTemplate = new RestTemplate();\n\n       CurrencyDTO[] forObject =\n                    restTemplate.getForEntity(\"http://api.nbp.pl/api/exchangerates/tables/a/\", CurrencyDTO[].class).getBody();\n          for (CurrencyDTO currencyDTO1 : forObject) {\n                for (Rates rate : currencyDTO1.getRates()) {\n                    Currency currency = new Currency(rate.getCode(), rate.getMid());\n                    //you code to put the object inside the db\n                    this.currencyRepository.save(currency);\n                }\n            }\n        }catch (Exception ex) {\n            System.out.println(ex.getMessage());\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14571657,"reputation":237,"user_id":10524801,"display_name":"Sanket Patel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1576579915,"creation_date":1576579915,"answer_id":59372644,"question_id":59262566,"body_markdown":"Firstly, Your JSON is an array of CurrencyDTO, not just a CurrencyDTO as mentioned in the comment and now if it&#39;s affecting other parts of your code and you just want to deserialize it as it is then you can do something as follows:\r\n\r\n    CurrencyDTO[] forObject = new ObjectMapper.readValue(restTemplate.getForEntity(&quot;http://api.nbp.pl/api/exchangerates/tables/a/&quot;, CurrencyDTO[].class).getBody() , new TypeReference&lt;List&lt;CurrencyDTO&gt;&gt;() {}).get(0);\r\n\r\nAlso, I highly recommend that this is the worst way you should be doing it. Prefer updating your API to return a proper response.\r\n","title":"JSON parse error: Cannot deserialize instance of `` out of START_ARRAY token","body":"<p>Firstly, Your JSON is an array of CurrencyDTO, not just a CurrencyDTO as mentioned in the comment and now if it's affecting other parts of your code and you just want to deserialize it as it is then you can do something as follows:</p>\n\n<pre><code>CurrencyDTO[] forObject = new ObjectMapper.readValue(restTemplate.getForEntity(\"http://api.nbp.pl/api/exchangerates/tables/a/\", CurrencyDTO[].class).getBody() , new TypeReference&lt;List&lt;CurrencyDTO&gt;&gt;() {}).get(0);\n</code></pre>\n\n<p>Also, I highly recommend that this is the worst way you should be doing it. Prefer updating your API to return a proper response.</p>\n"},{"tags":[],"owner":{"account_id":22453361,"reputation":97,"user_id":16656366,"display_name":"LongDev"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688713319,"creation_date":1688713319,"answer_id":76634610,"question_id":59262566,"body_markdown":"if anyone working with nextjs, call api maybe you miss\r\n\r\nJSON.stringify so spring boot cannot parse\r\n\r\ncall api in nextjs\r\n\r\n\r\n```\r\nconst resPut = await fetch(`${API_URL}/products/${productId}`, {\r\n        method: &quot;PUT&quot;,\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n          &quot;Content-Type&quot;: &quot;application/json&quot;,\r\n        },\r\n        body: JSON.stringify(req.body),  //   // forget convert json -&gt; json invalid - cannot parse json array\r\n      });\r\n```","title":"JSON parse error: Cannot deserialize instance of `` out of START_ARRAY token","body":"<p>if anyone working with nextjs, call api maybe you miss</p>\n<p>JSON.stringify so spring boot cannot parse</p>\n<p>call api in nextjs</p>\n<pre><code>const resPut = await fetch(`${API_URL}/products/${productId}`, {\n        method: &quot;PUT&quot;,\n        headers: {\n          Authorization: `Bearer ${token}`,\n          &quot;Content-Type&quot;: &quot;application/json&quot;,\n        },\n        body: JSON.stringify(req.body),  //   // forget convert json -&gt; json invalid - cannot parse json array\n      });\n</code></pre>\n"}],"owner":{"account_id":12719800,"reputation":95,"user_id":9240633,"display_name":"Duda Validator"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24687,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1688715574,"creation_date":1575964521,"question_id":59262566,"body_markdown":"I am new to Spring Boot and APIs, I am working on a project where I need to fetch data from public API and store it to the local database, though my spring boot application is connected with MySQL database. While fetching the data from the API, my compiler is throwing an exception saying :\r\n\r\n&gt; Error while extracting response for type [class com.currencyExchangeRates.models.CurrencyDTO] and content type [application/json;charset=utf-8]; nested exception is org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Cannot deserialize instance of \\`com.currencyExchangeRates.models.CurrencyDTO\\` out of START_ARRAY token; nested exception is com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize instance of \\`com.currencyExchangeRates.models.CurrencyDTO\\` out of START_ARRAY token\r\n at [Source: (PushbackInputStream); line: 1, column: 1]\r\n\r\nMy general idea is to get data from public API store it on the local database and then use those data according to my project requirements.\r\n\r\nI have tried almost every solution from Google as well as from Stack Overflow but I am not getting any idea.\r\n\r\nJSON format I am trying to fetch:\r\n\r\n```\r\n[\r\n   {\r\n      &quot;table&quot;:&quot;A&quot;,\r\n      &quot;no&quot;:&quot;237/A/NBP/2019&quot;,\r\n      &quot;effectiveDate&quot;:&quot;2019-12-09&quot;,\r\n      &quot;rates&quot;:[\r\n         {\r\n            &quot;currency&quot;:&quot;bat (Tajlandia)&quot;,\r\n            &quot;code&quot;:&quot;THB&quot;,\r\n            &quot;mid&quot;:0.1277\r\n         },\r\n         {\r\n            &quot;currency&quot;:&quot;dolar amerykaski&quot;,\r\n            &quot;code&quot;:&quot;USD&quot;,\r\n            &quot;mid&quot;:3.8704\r\n         }\r\n      ]\r\n   }\r\n]\r\n```\r\n\r\nHere, my CurrencyDTO class:\r\n\r\n\r\n```@JsonIgnoreProperties(ignoreUnknown = true)\r\npublic class CurrencyDTO {\r\n\r\n\tprivate String table;\r\n\tprivate String num;\r\n\tprivate String date;\r\n\t\r\n\tprivate Rates rates;\r\n\r\n    // Getters and Setters, No-arg/arg constractor\r\n```\r\n\r\nRates.java\r\n\r\n```\r\npublic class Rates {\r\n\t\r\n\tprivate String currency;\r\n\tprivate Map&lt;String, Double&gt; price;\r\n\r\n    // Getters and Setters, No-arg/arg constractor\r\n```\r\n\r\nPiece of code where I call API :\r\n\r\n```\r\ntry {\r\n\t\t\tRestTemplate restTemplate = new RestTemplate();\r\n\t\t\t\r\n\t\t\tCurrencyDTO forObject = \r\n\t\t\t\t\trestTemplate.getForObject(&quot;http://api.nbp.pl/api/exchangerates/tables/a/&quot;, CurrencyDTO.class);\r\n\t\t\t\r\n\t\t\t\tforObject.getRates().getPrice().forEach((key, value) -&gt; {\r\n\t\t\t\tCurrency currency = new Currency(key, value);\r\n\t\t\t\tthis.currencyRepository.save(currency);\t\r\n\t\t\t});\r\n\t\t}catch (RestClientException ex) {\r\n\t\t\tSystem.out.println(ex.getMessage());\r\n\t\t}\r\n```\r\n\r\nController Class :\r\n\r\n```\r\n@GetMapping(&quot;/currency&quot;)\r\n\tpublic List&lt;Currency&gt; findAll(){\r\n\t\treturn currencyService.getAllCurrencies();\r\n\t}\r\n```","title":"JSON parse error: Cannot deserialize instance of `` out of START_ARRAY token","body":"<p>I am new to Spring Boot and APIs, I am working on a project where I need to fetch data from public API and store it to the local database, though my spring boot application is connected with MySQL database. While fetching the data from the API, my compiler is throwing an exception saying :</p>\n<blockquote>\n<p>Error while extracting response for type [class com.currencyExchangeRates.models.CurrencyDTO] and content type [application/json;charset=utf-8]; nested exception is org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Cannot deserialize instance of `com.currencyExchangeRates.models.CurrencyDTO` out of START_ARRAY token; nested exception is com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize instance of `com.currencyExchangeRates.models.CurrencyDTO` out of START_ARRAY token\nat [Source: (PushbackInputStream); line: 1, column: 1]</p>\n</blockquote>\n<p>My general idea is to get data from public API store it on the local database and then use those data according to my project requirements.</p>\n<p>I have tried almost every solution from Google as well as from Stack Overflow but I am not getting any idea.</p>\n<p>JSON format I am trying to fetch:</p>\n<pre><code>[\n   {\n      &quot;table&quot;:&quot;A&quot;,\n      &quot;no&quot;:&quot;237/A/NBP/2019&quot;,\n      &quot;effectiveDate&quot;:&quot;2019-12-09&quot;,\n      &quot;rates&quot;:[\n         {\n            &quot;currency&quot;:&quot;bat (Tajlandia)&quot;,\n            &quot;code&quot;:&quot;THB&quot;,\n            &quot;mid&quot;:0.1277\n         },\n         {\n            &quot;currency&quot;:&quot;dolar amerykaski&quot;,\n            &quot;code&quot;:&quot;USD&quot;,\n            &quot;mid&quot;:3.8704\n         }\n      ]\n   }\n]\n</code></pre>\n<p>Here, my CurrencyDTO class:</p>\n<pre><code>public class CurrencyDTO {\n\n    private String table;\n    private String num;\n    private String date;\n    \n    private Rates rates;\n\n    // Getters and Setters, No-arg/arg constractor\n</code></pre>\n<p>Rates.java</p>\n<pre><code>public class Rates {\n    \n    private String currency;\n    private Map&lt;String, Double&gt; price;\n\n    // Getters and Setters, No-arg/arg constractor\n</code></pre>\n<p>Piece of code where I call API :</p>\n<pre><code>try {\n            RestTemplate restTemplate = new RestTemplate();\n            \n            CurrencyDTO forObject = \n                    restTemplate.getForObject(&quot;http://api.nbp.pl/api/exchangerates/tables/a/&quot;, CurrencyDTO.class);\n            \n                forObject.getRates().getPrice().forEach((key, value) -&gt; {\n                Currency currency = new Currency(key, value);\n                this.currencyRepository.save(currency); \n            });\n        }catch (RestClientException ex) {\n            System.out.println(ex.getMessage());\n        }\n</code></pre>\n<p>Controller Class :</p>\n<pre><code>@GetMapping(&quot;/currency&quot;)\n    public List&lt;Currency&gt; findAll(){\n        return currencyService.getAllCurrencies();\n    }\n</code></pre>\n"},{"tags":["java","subprocess"],"comments":[{"owner":{"account_id":7032371,"reputation":3061,"user_id":5387592,"accept_rate":29,"display_name":"guillaume girod-vitouchkina"},"score":0,"creation_date":1490105294,"post_id":42929220,"comment_id":72956319,"body_markdown":"in the link : http://stackoverflow.com/questions/4750470/how-to-get-pid-of-process-ive-just-started-within-java-program, you can get : Java 9 class Process has new method long getPid()","body":"in the link : <a href=\"http://stackoverflow.com/questions/4750470/how-to-get-pid-of-process-ive-just-started-within-java-program\" title=\"how to get pid of process ive just started within java program\">stackoverflow.com/questions/4750470/&hellip;</a>, you can get : Java 9 class Process has new method long getPid()"}],"answers":[{"tags":[],"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1688715345,"creation_date":1490105187,"answer_id":42929463,"question_id":42929220,"body_markdown":"Until Java 8 (included), you have to use [workarounds][1].\r\n\r\nFrom Java 9 onwards, there is a new [`pid()` method][2] in the `Process` class.\r\n\r\n [1]: https://stackoverflow.com/questions/4750470/how-to-get-pid-of-process-ive-just-started-within-java-program\r\n [2]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Process.html#pid()","title":"How to get the pid of a Java subprocess?","body":"<p>Until Java 8 (included), you have to use <a href=\"https://stackoverflow.com/questions/4750470/how-to-get-pid-of-process-ive-just-started-within-java-program\">workarounds</a>.</p>\n<p>From Java 9 onwards, there is a new <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Process.html#pid()\" rel=\"nofollow noreferrer\"><code>pid()</code> method</a> in the <code>Process</code> class.</p>\n"}],"owner":{"account_id":5877017,"reputation":2197,"user_id":4627565,"accept_rate":100,"display_name":"Bionix1441"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3268,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1490105163,"accepted_answer_id":42929463,"answer_count":1,"score":1,"last_activity_date":1688715345,"creation_date":1490104594,"question_id":42929220,"body_markdown":"If we use Runtime.exec to create a new subprocess:\r\n\r\n    Process exec(String command) Executes the specified string command in a separate process.\r\n\r\nHow to get the value of the created process?","title":"How to get the pid of a Java subprocess?","body":"<p>If we use Runtime.exec to create a new subprocess:</p>\n\n<pre><code>Process exec(String command) Executes the specified string command in a separate process.\n</code></pre>\n\n<p>How to get the value of the created process?</p>\n"},{"tags":["java","javafx","tabs","fxml","javafx-11"],"comments":[{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":4,"creation_date":1688726404,"post_id":76634775,"comment_id":135115730,"body_markdown":"Tab has a [selected property](https://openjfx.io/javadoc/17/javafx.controls/javafx/scene/control/Tab.html#selectedProperty), listen to it and when it changes, [set the visibility](https://openjfx.io/javadoc/17/javafx.graphics/javafx/scene/Node.html#setVisible(boolean)) of other nodes as you wish.  You can write the code in the initialize method of your controller.  If you set the visibility of a node in an inactive tab, you won&#39;t notice that change until you make that inactive tab active, but I guess that is obvious.","body":"Tab has a <a href=\"https://openjfx.io/javadoc/17/javafx.controls/javafx/scene/control/Tab.html#selectedProperty\" rel=\"nofollow noreferrer\">selected property</a>, listen to it and when it changes, <a href=\"https://openjfx.io/javadoc/17/javafx.graphics/javafx/scene/Node.html#setVisible(boolean)\" rel=\"nofollow noreferrer\">set the visibility</a> of other nodes as you wish.  You can write the code in the initialize method of your controller.  If you set the visibility of a node in an inactive tab, you won&#39;t notice that change until you make that inactive tab active, but I guess that is obvious."}],"owner":{"account_id":24262178,"reputation":19,"user_id":18211618,"display_name":"ahin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1688714802,"creation_date":1688714802,"question_id":76634775,"body_markdown":"I have a TabPane which includes 3 different tabs. I load all the views in the tabs with injection. My question is that how to set visibility of a view in one tab when another tab is active. Please check the below fxml code snippet. For example how set visibility of a **playView** in first tab when my **destinationTab** is active ? I try but it is not set.\r\n\r\n        &lt;TabPane fx:id=&quot;tabPane&quot; tabClosingPolicy=&quot;UNAVAILABLE&quot; tabMinWidth=&quot;130&quot; tabMaxWidth=&quot;130&quot;&gt;\r\n            &lt;Tab fx:id=&quot;sourceTab&quot; text=&quot;Source&quot;&gt;\r\n                &lt;AnchorPane fx:id=&quot;anchorPane&quot; BorderPane.alignment=&quot;CENTER&quot;&gt;\r\n                    &lt;fx:include fx:id=&quot;home&quot; source=&quot;home.fxml&quot; visible=&quot;false&quot;/&gt;\r\n                    &lt;fx:include fx:id=&quot;popup&quot; source=&quot;popup.fxml&quot; visible=&quot;false&quot;/&gt;\r\n                    &lt;fx:include fx:id=&quot;camera&quot; source=&quot;camera.fxml&quot; visible=&quot;false&quot;/&gt;\r\n                    &lt;fx:include fx:id=&quot;cctv&quot; source=&quot;cctv.fxml&quot; visible=&quot;false&quot;/&gt;\r\n                    &lt;fx:include fx:id=&quot;console&quot; source=&quot;console.fxml&quot; visible=&quot;false&quot;/&gt;\r\n                    &lt;fx:include fx:id=&quot;recordSearchHome&quot; source=&quot;record_search_home.fxml&quot; visible=&quot;false&quot;/&gt;\r\n                    &lt;fx:include fx:id=&quot;recordSearchPanel&quot; source=&quot;record_search_panel.fxml&quot; visible=&quot;false&quot;/&gt;\r\n                    &lt;fx:include fx:id=&quot;recordSearchResult&quot; source=&quot;record_search_result.fxml&quot; visible=&quot;false&quot;/&gt;\r\n                    &lt;fx:include fx:id=&quot;logout&quot; source=&quot;logout.fxml&quot; visible=&quot;false&quot;/&gt;\r\n                    &lt;fx:include fx:id=&quot;imported&quot; source=&quot;imported.fxml&quot; visible=&quot;false&quot;/&gt;\r\n                    &lt;fx:include fx:id=&quot;playView&quot; source=&quot;play_view.fxml&quot; visible=&quot;false&quot;/&gt;\r\n                &lt;/AnchorPane&gt;\r\n            &lt;/Tab&gt;\r\n            &lt;Tab fx:id=&quot;destinationTab&quot; text=&quot;Destination&quot;&gt;\r\n                &lt;fx:include fx:id=&quot;destination&quot; source=&quot;destination.fxml&quot;/&gt;\r\n            &lt;/Tab&gt;\r\n            &lt;Tab fx:id=&quot;sessionTab&quot; text=&quot;Play Sessions&quot;&gt;\r\n                &lt;fx:include fx:id=&quot;session&quot; source=&quot;session.fxml&quot;/&gt;\r\n            &lt;/Tab&gt;\r\n        &lt;/TabPane&gt;","title":"How to set visibility of a view in a tab when another tab is active","body":"<p>I have a TabPane which includes 3 different tabs. I load all the views in the tabs with injection. My question is that how to set visibility of a view in one tab when another tab is active. Please check the below fxml code snippet. For example how set visibility of a <strong>playView</strong> in first tab when my <strong>destinationTab</strong> is active ? I try but it is not set.</p>\n<pre><code>    &lt;TabPane fx:id=&quot;tabPane&quot; tabClosingPolicy=&quot;UNAVAILABLE&quot; tabMinWidth=&quot;130&quot; tabMaxWidth=&quot;130&quot;&gt;\n        &lt;Tab fx:id=&quot;sourceTab&quot; text=&quot;Source&quot;&gt;\n            &lt;AnchorPane fx:id=&quot;anchorPane&quot; BorderPane.alignment=&quot;CENTER&quot;&gt;\n                &lt;fx:include fx:id=&quot;home&quot; source=&quot;home.fxml&quot; visible=&quot;false&quot;/&gt;\n                &lt;fx:include fx:id=&quot;popup&quot; source=&quot;popup.fxml&quot; visible=&quot;false&quot;/&gt;\n                &lt;fx:include fx:id=&quot;camera&quot; source=&quot;camera.fxml&quot; visible=&quot;false&quot;/&gt;\n                &lt;fx:include fx:id=&quot;cctv&quot; source=&quot;cctv.fxml&quot; visible=&quot;false&quot;/&gt;\n                &lt;fx:include fx:id=&quot;console&quot; source=&quot;console.fxml&quot; visible=&quot;false&quot;/&gt;\n                &lt;fx:include fx:id=&quot;recordSearchHome&quot; source=&quot;record_search_home.fxml&quot; visible=&quot;false&quot;/&gt;\n                &lt;fx:include fx:id=&quot;recordSearchPanel&quot; source=&quot;record_search_panel.fxml&quot; visible=&quot;false&quot;/&gt;\n                &lt;fx:include fx:id=&quot;recordSearchResult&quot; source=&quot;record_search_result.fxml&quot; visible=&quot;false&quot;/&gt;\n                &lt;fx:include fx:id=&quot;logout&quot; source=&quot;logout.fxml&quot; visible=&quot;false&quot;/&gt;\n                &lt;fx:include fx:id=&quot;imported&quot; source=&quot;imported.fxml&quot; visible=&quot;false&quot;/&gt;\n                &lt;fx:include fx:id=&quot;playView&quot; source=&quot;play_view.fxml&quot; visible=&quot;false&quot;/&gt;\n            &lt;/AnchorPane&gt;\n        &lt;/Tab&gt;\n        &lt;Tab fx:id=&quot;destinationTab&quot; text=&quot;Destination&quot;&gt;\n            &lt;fx:include fx:id=&quot;destination&quot; source=&quot;destination.fxml&quot;/&gt;\n        &lt;/Tab&gt;\n        &lt;Tab fx:id=&quot;sessionTab&quot; text=&quot;Play Sessions&quot;&gt;\n            &lt;fx:include fx:id=&quot;session&quot; source=&quot;session.fxml&quot;/&gt;\n        &lt;/Tab&gt;\n    &lt;/TabPane&gt;\n</code></pre>\n"},{"tags":["java","android","android-studio","mupdf"],"comments":[{"owner":{"account_id":3413204,"reputation":5990,"user_id":2862719,"accept_rate":100,"display_name":"m00am"},"score":0,"creation_date":1520329022,"post_id":49127052,"comment_id":85259657,"body_markdown":"Welcome to SO. To solve this problem we need to see your code. You can use the edit function to add the code that caused this problem to the question. Please take the [tour](https://stackoverflow.com/tour) and read the [how to ask page](https://stackoverflow.com/help/how-to-ask) to increase your chance of answers.","body":"Welcome to SO. To solve this problem we need to see your code. You can use the edit function to add the code that caused this problem to the question. Please take the <a href=\"https://stackoverflow.com/tour\">tour</a> and read the <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask page</a> to increase your chance of answers."},{"owner":{"account_id":13079073,"reputation":1,"user_id":9450167,"display_name":"Z.qi"},"score":0,"creation_date":1520392152,"post_id":49127052,"comment_id":85292299,"body_markdown":"Thanks,I reedited the problemi am first time ask questionsso I don&#39;t know a lot of rules@m00am","body":"Thanks,I reedited the problemi am first time ask questionsso I don&#39;t know a lot of rules@m00am"},{"owner":{"account_id":3413204,"reputation":5990,"user_id":2862719,"accept_rate":100,"display_name":"m00am"},"score":0,"creation_date":1520420047,"post_id":49127052,"comment_id":85304490,"body_markdown":"No problem :) You question already looks a lot better. I also added the mupdf and java tags which might catch the attention of people who know how to solve this.","body":"No problem :) You question already looks a lot better. I also added the mupdf and java tags which might catch the attention of people who know how to solve this."},{"owner":{"account_id":13079073,"reputation":1,"user_id":9450167,"display_name":"Z.qi"},"score":0,"creation_date":1520429491,"post_id":49127052,"comment_id":85310693,"body_markdown":"Thank you!@m00am","body":"Thank you!@m00am"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1688716316,"post_id":49127052,"comment_id":135113864,"body_markdown":"The problem is that you had an undetected exception last time you called `GetFieldID()` and continued to execute your JNI code. You can&#39;t do that. You must check *every JNU call* for an error, and *not* continue if you get one. This is all described very clearly in the JNI Specification.","body":"The problem is that you had an undetected exception last time you called <code>GetFieldID()</code> and continued to execute your JNI code. You can&#39;t do that. You must check <i>every JNU call</i> for an error, and <i>not</i> continue if you get one. This is all described very clearly in the JNI Specification."}],"answers":[{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1688717310,"post_id":76628298,"comment_id":135114037,"body_markdown":"It worked because of your `if (global_fid == NULL)` test. OP didn&#39;t have that so he continued execution to the next thing, which found the pending exception and barfed.","body":"It worked because of your <code>if (global_fid == NULL)</code> test. OP didn&#39;t have that so he continued execution to the next thing, which found the pending exception and barfed."},{"owner":{"account_id":23733633,"reputation":742,"user_id":17752564,"display_name":"ninhnau19"},"score":0,"creation_date":1688721883,"post_id":76628298,"comment_id":135114832,"body_markdown":"@user207421 check null in JNI to make sure even if can&#39;t find **globals**, app will not crash.  In my case, problem is about proguard. when i remove check null, it work fine.","body":"@user207421 check null in JNI to make sure even if can&#39;t find <b>globals</b>, app will not crash.  In my case, problem is about proguard. when i remove check null, it work fine."}],"tags":[],"owner":{"account_id":23733633,"reputation":742,"user_id":17752564,"display_name":"ninhnau19"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688714761,"creation_date":1688642525,"answer_id":76628298,"question_id":49127052,"body_markdown":"I have problem exactly as your problem. But when I create new project, and put these code into new project, it still work fine. \r\n\r\nI dont know why this could happend. First, I think it about JDK version between 2 project (current &amp; test project), but nothing change. \r\n\r\nFinally, I compile MuPDF with version 1.10 (old version is 1.9), replace .so file . And it worked.\r\n\r\nI think something wrong with C class. That&#39;s all.\r\n\r\n\r\n**UPDATED:\r\nI solve my problem**\r\n\r\n```\r\n#ifdef NDK_PROFILER\r\n\tmonstartup(&quot;libmupdf_java32.so&quot;);\r\n#endif\r\n\r\n\tclazz = (*env)-&gt;GetObjectClass(env, thiz);\r\n\tif (clazz == NULL) {\r\n\t\treturn 0;\r\n\t}\r\n\tglobal_fid = (*env)-&gt;GetFieldID(env, clazz, &quot;globals&quot;, &quot;J&quot;);\r\n\tif (global_fid == NULL) {\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tglo = calloc(1, sizeof(*glo));\r\n\tif (glo == NULL)\r\n\t\treturn 0;\r\n\tglo-&gt;resolution = 160;\r\n\tglo-&gt;alerts_initialised = 0;\r\n```\r\nmake sure **globals** filed in \r\n```\r\nglobal_fid = (*env)-&gt;GetFieldID(env, clazz, &quot;globals&quot;, &quot;J&quot;);\r\n```\r\nmatch with field in your Java class. \r\n```\r\n\tprivate long globals;\r\n```\r\n&quot;J&quot; in JNI is long type in java.\r\n\r\nFinally, make sure remove proguard in build.gradle\r\n```\r\n    buildTypes {\r\n//        debug {\r\n//            shrinkResources true\r\n//            minifyEnabled true\r\n//            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &quot;proguard-rules.pro&quot;\r\n//        }\r\n\r\n        release {\r\n            shrinkResources true\r\n            minifyEnabled true\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &quot;proguard-rules.pro&quot;\r\n        }\r\n\r\n    }\r\n```\r\nOr you can using **keep** in proguard file. &quot;minifyEnabled&quot; make **globals** change when you build app.","title":"JNI GetStringUTFChars called with pending exception java.lang.NoSuchFieldError","body":"<p>I have problem exactly as your problem. But when I create new project, and put these code into new project, it still work fine.</p>\n<p>I dont know why this could happend. First, I think it about JDK version between 2 project (current &amp; test project), but nothing change.</p>\n<p>Finally, I compile MuPDF with version 1.10 (old version is 1.9), replace .so file . And it worked.</p>\n<p>I think something wrong with C class. That's all.</p>\n<p><strong>UPDATED:\nI solve my problem</strong></p>\n<pre><code>#ifdef NDK_PROFILER\n    monstartup(&quot;libmupdf_java32.so&quot;);\n#endif\n\n    clazz = (*env)-&gt;GetObjectClass(env, thiz);\n    if (clazz == NULL) {\n        return 0;\n    }\n    global_fid = (*env)-&gt;GetFieldID(env, clazz, &quot;globals&quot;, &quot;J&quot;);\n    if (global_fid == NULL) {\n        return 0;\n    }\n\n    glo = calloc(1, sizeof(*glo));\n    if (glo == NULL)\n        return 0;\n    glo-&gt;resolution = 160;\n    glo-&gt;alerts_initialised = 0;\n</code></pre>\n<p>make sure <strong>globals</strong> filed in</p>\n<pre><code>global_fid = (*env)-&gt;GetFieldID(env, clazz, &quot;globals&quot;, &quot;J&quot;);\n</code></pre>\n<p>match with field in your Java class.</p>\n<pre><code>    private long globals;\n</code></pre>\n<p>&quot;J&quot; in JNI is long type in java.</p>\n<p>Finally, make sure remove proguard in build.gradle</p>\n<pre><code>    buildTypes {\n//        debug {\n//            shrinkResources true\n//            minifyEnabled true\n//            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), &quot;proguard-rules.pro&quot;\n//        }\n\n        release {\n            shrinkResources true\n            minifyEnabled true\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), &quot;proguard-rules.pro&quot;\n        }\n\n    }\n</code></pre>\n<p>Or you can using <strong>keep</strong> in proguard file. &quot;minifyEnabled&quot; make <strong>globals</strong> change when you build app.</p>\n"}],"owner":{"account_id":13079073,"reputation":1,"user_id":9450167,"display_name":"Z.qi"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":686,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1688714761,"creation_date":1520327248,"question_id":49127052,"body_markdown":"I use `mupdf` in the following code in my project:\r\n\r\n    public MuPDFCore(String filename) throws Exception\r\n    \t{\r\n    \t\tif (openFile(filename) &lt;= 0)\r\n    \t\t{\r\n    \t\t\tthrow new Exception(&quot;Failed to open &quot;+filename);\r\n    \t\t}\r\n    \t}\r\n\r\nBut when I run it, I get the following error. Has anyone come across this problem?\r\n\r\n\r\n&gt;JNI DETECTED ERROR IN APPLICATION: JNI GetStringUTFChars called with pending exception java.lang.NoSuchFieldError: no &quot;J&quot; field &quot;globals&quot; in class &quot;Ljava/lang/Class;&quot; or its superclasses  &lt;br/&gt;  \r\n03-07 02:58:17.064 2500-2500/com.xinhui.electronicsignature A/art: art/runtime/java_vm_ext.cc:410]   at long com.artifex.mupdfdemo.MuPDFCore.openFile(java.lang.String) (MuPDFCore.java:-2)    \r\n03-07 02:58:17.064 2500-2500/com.xinhui.electronicsignature A/art: art/runtime/java_vm_ext.cc:410]   at void com.artifex.mupdfdemo.MuPDFCore.&lt;init&gt;(java.lang.String) (MuPDFCore.java:40)  \r\n03-07 02:58:17.064 2500-2500/com.xinhui.electronicsignature A/art: art/runtime/java_vm_ext.cc:410]   at com.artifex.mupdfdemo.MuPDFCore com.artifex.mupdfdemo.MuPDFActivity.Openfile1(java.lang.String) (MuPDFActivity.java:189)\r\n03-07 02:58:17.064 2500-2500/com.xinhui.electronicsignature A/art: art/runtime/java_vm_ext.cc:410]   at void com.artifex.mupdfdemo.MuPDFActivity.onCreate(android.os.Bundle) (MuPDFActivity.java:228)\r\n03-07 02:58:17.064 2500-2500/com.xinhui.electronicsignature A/art: art/runtime/java_vm_ext.cc:410]   at void android.app.Activity.performCreate(android.os.Bundle) (Activity.java:6237)\r\n03-07 02:58:17.064 2500-2500/com.xinhui.electronicsignature A/art: art/runtime/java_vm_ext.cc:410]   at void android.app.Instrumentation.callActivityOnCreate(android.app.Activity, android.os.Bundle) (Instrumentation.java:1107)\r\n\r\n","title":"JNI GetStringUTFChars called with pending exception java.lang.NoSuchFieldError","body":"<p>I use <code>mupdf</code> in the following code in my project:</p>\n\n<pre><code>public MuPDFCore(String filename) throws Exception\n    {\n        if (openFile(filename) &lt;= 0)\n        {\n            throw new Exception(\"Failed to open \"+filename);\n        }\n    }\n</code></pre>\n\n<p>But when I run it, I get the following error. Has anyone come across this problem?</p>\n\n<blockquote>\n  <p>JNI DETECTED ERROR IN APPLICATION: JNI GetStringUTFChars called with pending exception java.lang.NoSuchFieldError: no \"J\" field \"globals\" in class \"Ljava/lang/Class;\" or its superclasses  <br/><br>\n  03-07 02:58:17.064 2500-2500/com.xinhui.electronicsignature A/art: art/runtime/java_vm_ext.cc:410]   at long com.artifex.mupdfdemo.MuPDFCore.openFile(java.lang.String) (MuPDFCore.java:-2)<br>\n  03-07 02:58:17.064 2500-2500/com.xinhui.electronicsignature A/art: art/runtime/java_vm_ext.cc:410]   at void com.artifex.mupdfdemo.MuPDFCore.(java.lang.String) (MuPDFCore.java:40)<br>\n  03-07 02:58:17.064 2500-2500/com.xinhui.electronicsignature A/art: art/runtime/java_vm_ext.cc:410]   at com.artifex.mupdfdemo.MuPDFCore com.artifex.mupdfdemo.MuPDFActivity.Openfile1(java.lang.String) (MuPDFActivity.java:189)\n  03-07 02:58:17.064 2500-2500/com.xinhui.electronicsignature A/art: art/runtime/java_vm_ext.cc:410]   at void com.artifex.mupdfdemo.MuPDFActivity.onCreate(android.os.Bundle) (MuPDFActivity.java:228)\n  03-07 02:58:17.064 2500-2500/com.xinhui.electronicsignature A/art: art/runtime/java_vm_ext.cc:410]   at void android.app.Activity.performCreate(android.os.Bundle) (Activity.java:6237)\n  03-07 02:58:17.064 2500-2500/com.xinhui.electronicsignature A/art: art/runtime/java_vm_ext.cc:410]   at void android.app.Instrumentation.callActivityOnCreate(android.app.Activity, android.os.Bundle) (Instrumentation.java:1107)</p>\n</blockquote>\n"},{"tags":["java","email","jakarta-mail"],"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1569566490,"post_id":58129117,"comment_id":102645418,"body_markdown":"This is part of Javamail. Download it, deploy it.","body":"This is part of Javamail. Download it, deploy it."},{"owner":{"account_id":1713537,"reputation":528,"user_id":1571117,"display_name":"keanni"},"score":0,"creation_date":1569570044,"post_id":58129117,"comment_id":102647063,"body_markdown":"Hi Peter, Your message is lacking some information. e.g. what tries to send the mail in your case. But in maven you can simply use [javax mail](https://mvnrepository.com/artifact/javax.mail/javax.mail-api/1.6.2)","body":"Hi Peter, Your message is lacking some information. e.g. what tries to send the mail in your case. But in maven you can simply use <a href=\"https://mvnrepository.com/artifact/javax.mail/javax.mail-api/1.6.2\" rel=\"nofollow noreferrer\">javax mail</a>"}],"answers":[{"comments":[{"owner":{"account_id":1032936,"reputation":29649,"user_id":1040885,"display_name":"Bill Shannon"},"score":0,"creation_date":1569611371,"post_id":58136406,"comment_id":102666913,"body_markdown":"That&#39;s great for compiling, assuming you&#39;re deploying to an app server that includes JavaMail (e.g., a Java EE app server).  If you&#39;re deploying to somewhere that doesn&#39;t already include a JavaMail implementation, you&#39;ll need the complete implementation jar file.  More details [here](https://javaee.github.io/javamail/#Download_JavaMail_Release).","body":"That&#39;s great for compiling, assuming you&#39;re deploying to an app server that includes JavaMail (e.g., a Java EE app server).  If you&#39;re deploying to somewhere that doesn&#39;t already include a JavaMail implementation, you&#39;ll need the complete implementation jar file.  More details <a href=\"https://javaee.github.io/javamail/#Download_JavaMail_Release\" rel=\"nofollow noreferrer\">here</a>."},{"owner":{"account_id":11380920,"reputation":8254,"user_id":8343843,"display_name":"Alexey R."},"score":0,"creation_date":1569612146,"post_id":58136406,"comment_id":102667158,"body_markdown":"Hi Bill! Thanks for clarification!","body":"Hi Bill! Thanks for clarification!"},{"owner":{"account_id":13483389,"reputation":497,"user_id":9727918,"display_name":"lingar"},"score":0,"creation_date":1693953022,"post_id":58136406,"comment_id":135826936,"body_markdown":"Didn&#39;t help for me","body":"Didn&#39;t help for me"}],"tags":[],"owner":{"account_id":11380920,"reputation":8254,"user_id":8343843,"display_name":"Alexey R."},"comment_count":3,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1569593963,"creation_date":1569593963,"answer_id":58136406,"question_id":58129117,"body_markdown":"Add this dependency to your `pom.xml`\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/javax.mail/javax.mail-api --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;javax.mail&lt;/groupId&gt;\r\n        &lt;artifactId&gt;javax.mail-api&lt;/artifactId&gt;\r\n        &lt;version&gt;1.6.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nthis will add implementation of `javax.mail.internet.MimeMessage` to your classpath","title":"Build Error: The type javax.mail.internet.MimeMessage cannot be resolved","body":"<p>Add this dependency to your <code>pom.xml</code></p>\n\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/javax.mail/javax.mail-api --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;javax.mail&lt;/groupId&gt;\n    &lt;artifactId&gt;javax.mail-api&lt;/artifactId&gt;\n    &lt;version&gt;1.6.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>this will add implementation of <code>javax.mail.internet.MimeMessage</code> to your classpath</p>\n"},{"tags":[],"owner":{"account_id":95581,"reputation":10145,"user_id":260229,"accept_rate":50,"display_name":"Mahmoud"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1628812945,"creation_date":1628812945,"answer_id":68765378,"question_id":58129117,"body_markdown":"I had encontered the same error message. In my case the reason was a mix of a new `jakarta.mail` (v2+) and an old `GreenMail` (v1.6).\r\n\r\nYou can either upgrade GreenMail or downgrade Jakarta.\r\n\r\nAlso make sure you don&#39;t have an old `javax.mail` as transitive dependency from an old other packages.","title":"Build Error: The type javax.mail.internet.MimeMessage cannot be resolved","body":"<p>I had encontered the same error message. In my case the reason was a mix of a new <code>jakarta.mail</code> (v2+) and an old <code>GreenMail</code> (v1.6).</p>\n<p>You can either upgrade GreenMail or downgrade Jakarta.</p>\n<p>Also make sure you don't have an old <code>javax.mail</code> as transitive dependency from an old other packages.</p>\n"},{"tags":[],"owner":{"account_id":16311951,"reputation":313,"user_id":11780318,"display_name":"Andre TOKAM"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645788542,"creation_date":1645788542,"answer_id":71265211,"question_id":58129117,"body_markdown":"You can still solve the problem by adding the javax.mail jar in the classpath.\r\nYou can download the jar here https://javaee.github.io/javamail/\r\n\r\n\r\n  ","title":"Build Error: The type javax.mail.internet.MimeMessage cannot be resolved","body":"<p>You can still solve the problem by adding the javax.mail jar in the classpath.\nYou can download the jar here <a href=\"https://javaee.github.io/javamail/\" rel=\"nofollow noreferrer\">https://javaee.github.io/javamail/</a></p>\n"}],"owner":{"account_id":11066667,"reputation":68,"user_id":8126261,"display_name":"Peter Gerald"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8095,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1688714683,"creation_date":1569566389,"question_id":58129117,"body_markdown":"Getting build error:\r\n\r\n    The type javax.mail.internet.MimeMessage cannot be resolved. \r\n\r\nIt is indirectly referenced from required .class files.\r\n\r\nHow can I resolve this? Saw a similar question where it was suggested to add some jar.\r\nBut I&#39;m using Maven.","title":"Build Error: The type javax.mail.internet.MimeMessage cannot be resolved","body":"<p>Getting build error:</p>\n\n<pre><code>The type javax.mail.internet.MimeMessage cannot be resolved. \n</code></pre>\n\n<p>It is indirectly referenced from required .class files.</p>\n\n<p>How can I resolve this? Saw a similar question where it was suggested to add some jar.\nBut I'm using Maven.</p>\n"},{"tags":["java","mybatis"],"comments":[{"owner":{"account_id":3446101,"reputation":11395,"user_id":2886891,"accept_rate":75,"display_name":"Honza Zidek"},"score":1,"creation_date":1688721872,"post_id":76634734,"comment_id":135114829,"body_markdown":"Selcome to StackOverflow! Well, your question is missing: the description of what you are doing, what you want to achieve and what kind of help you expect. There is a very small chance to get help if you just copy and paste the error message you get, not even properly formatted - https://stackoverflow.com/editing-help. Please read https://stackoverflow.com/tour, then https://stackoverflow.com/help/how-to-ask, then make your question to follow the StackOverflow standards.","body":"Selcome to StackOverflow! Well, your question is missing: the description of what you are doing, what you want to achieve and what kind of help you expect. There is a very small chance to get help if you just copy and paste the error message you get, not even properly formatted - <a href=\"https://stackoverflow.com/editing-help\">stackoverflow.com/editing-help</a>. Please read <a href=\"https://stackoverflow.com/tour\">stackoverflow.com/tour</a>, then <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>, then make your question to follow the StackOverflow standards."}],"owner":{"account_id":28968181,"reputation":1,"user_id":22189083,"display_name":"hang zhou"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":128,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1688714426,"creation_date":1688714426,"question_id":76634734,"body_markdown":"Error attempting to get column &#39;pov_pay_voucher&#39; from result set.  Cause: java.sql.SQLException: Column &#39;pov_pay_voucher&#39; not found.\r\n; uncategorized SQLException; SQL state [S0022]; error code [0]; Column &#39;pov_pay_voucher&#39; not found.; nested exception is java.sql.SQLException: Column &#39;pov_pay_voucher&#39; not found.\r\norg.springframework.jdbc.UncategorizedSQLException: Error attempting to get column &#39;pov_pay_voucher&#39; from result set.  Cause: java.sql.SQLException: Column &#39;pov_pay_voucher&#39; not found.\r\n; uncategorized SQLException; SQL state [S0022]; error code [0]; Column &#39;pov_pay_voucher&#39; not found.; nested exception is java.sql.SQLException: Column &#39;pov_pay_voucher&#39; not found.\r\n\tat org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:89)\r\n\tat org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:81)\r\n\tat org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:81)\r\n\tat org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:73)","title":"mybatis collection Single attribute eg:Sting list Error attempting to get column xxx from result set","body":"<p>Error attempting to get column 'pov_pay_voucher' from result set.  Cause: java.sql.SQLException: Column 'pov_pay_voucher' not found.\n; uncategorized SQLException; SQL state [S0022]; error code [0]; Column 'pov_pay_voucher' not found.; nested exception is java.sql.SQLException: Column 'pov_pay_voucher' not found.\norg.springframework.jdbc.UncategorizedSQLException: Error attempting to get column 'pov_pay_voucher' from result set.  Cause: java.sql.SQLException: Column 'pov_pay_voucher' not found.\n; uncategorized SQLException; SQL state [S0022]; error code [0]; Column 'pov_pay_voucher' not found.; nested exception is java.sql.SQLException: Column 'pov_pay_voucher' not found.\nat org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:89)\nat org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:81)\nat org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:81)\nat org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:73)</p>\n"},{"tags":["java","android","wear-os","communication"],"comments":[{"owner":{"account_id":28379834,"reputation":1,"user_id":21707290,"display_name":""},"score":0,"creation_date":1682171766,"post_id":76080006,"comment_id":134175170,"body_markdown":"Currently I&#39;ve spent 2-3 weeks trying to fix this communication issue. please.","body":"Currently I&#39;ve spent 2-3 weeks trying to fix this communication issue. please."}],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1688978609,"post_id":76634683,"comment_id":135142570,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76634683/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."},{"owner":{"account_id":14861941,"reputation":1836,"user_id":10732434,"display_name":"sanitizedUser"},"score":0,"creation_date":1688978667,"post_id":76634683,"comment_id":135142580,"body_markdown":"Add the relevant excerpts from the link to your answer. The link can become dead in the future and your answer would become useless as a result.","body":"Add the relevant excerpts from the link to your answer. The link can become dead in the future and your answer would become useless as a result."}],"tags":[],"owner":{"account_id":28968244,"reputation":1,"user_id":22189137,"display_name":"Ilyn"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688714061,"creation_date":1688714061,"answer_id":76634683,"question_id":76080006,"body_markdown":"Both of your apps need to have the same applicationId, here is how I found that : https://stackoverflow.com/questions/33817622/wearablelistenerservice-onmessagereceived-is-not-called-on-device?noredirect=1&amp;lq=1","title":"I want to communicate between Android app and wear os app using message client","body":"<p>Both of your apps need to have the same applicationId, here is how I found that : <a href=\"https://stackoverflow.com/questions/33817622/wearablelistenerservice-onmessagereceived-is-not-called-on-device?noredirect=1&amp;lq=1\">WearableListenerService onMessageReceived is not called on device</a></p>\n"}],"owner":{"account_id":28379834,"reputation":1,"user_id":21707290,"display_name":""},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":289,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1688714061,"creation_date":1682171687,"question_id":76080006,"body_markdown":"This code is the WearableListenerService code inside the wear os app\r\n``` \r\npackage com.example.ans_watch;\r\n\r\nimport ...\r\n\r\npublic class MyWearableListenerService extends WearableListenerService {\r\n\r\n    private static final String TAG = &quot;from Android&quot;;\r\n    private static final String MESSAGE_PATH = &quot;/message&quot;;\r\n    private MessageClient.OnMessageReceivedListener listener;\r\n\r\n    public void setOnMessageReceivedListener(MessageClient.OnMessageReceivedListener listener){\r\n        this.listener = listener;\r\n    }\r\n    public MyWearableListenerService(){\r\n        Log.d(TAG, &quot; &quot;);\r\n    }\r\n    @Override\r\n    public void onMessageReceived(MessageEvent messageEvent) {\r\n        if (listener != null) {\r\n            listener.onMessageReceived(messageEvent);\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n----------------------------------------------------------------------------------------------------------\r\n\r\nThis code is one of the activities inside the wear os application, and onMessageReceived() is specified and used.\r\n```\r\npackage com.example.ans_watch;\r\n\r\nimport  ...\r\npublic class nodriveActivity  extends  Activity{\r\n\r\n    public MyWearableListenerService service = new MyWearableListenerService();\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.state_nodrive);\r\n        service.setOnMessageReceivedListener(new MessageClient.OnMessageReceivedListener() {\r\n            @Override\r\n            public void onMessageReceived(@NonNull MessageEvent messageEvent) {\r\n                Log.d(&quot;  &quot;, &quot;Message received: &quot; + messageEvent.getPath());\r\n                if (messageEvent.getPath().equals(&quot;/message&quot;)) {\r\n                    String message = new String(messageEvent.getData(), StandardCharsets.UTF_8);\r\n                    Log.d(&quot; !!&quot;, &quot; &quot; + message);\r\n                }\r\n            }\r\n        });\r\n        startService(new Intent(this, service.getClass()));\r\n   }\r\n\r\n```\r\n\r\n-----------------------------------------------------------------------------------------------------------\r\n\r\nFinally, this code is the sendMessage() part of the Android application&#39;s MainActivity code.\r\n\r\n```\r\npackage com.example.test;\r\n\r\nimport ...\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n    private void sendMessage() {\r\n        // Create a new thread to avoid blocking the UI thread\r\n        new Thread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                // Get the connected nodes on the Wear network\r\n                Task&lt;List&lt;Node&gt;&gt; nodeListTask = Wearable.getNodeClient(getApplicationContext()).getConnectedNodes();\r\n                try {\r\n                    List&lt;Node&gt; nodes = Tasks.await(nodeListTask);\r\n                    for (Node node : nodes) {\r\n                        // Build the message\r\n                        String message = &quot;Hello!&quot;;\r\n                        byte[] payload = message.getBytes();\r\n\r\n                        // Send the message\r\n                        Task&lt;Integer&gt; sendMessageTask =\r\n                                Wearable.getMessageClient(getApplicationContext()).sendMessage(node.getId(), &quot;/message&quot;, payload);\r\n\r\n                        // Add onCompleteListener to check if the message was successfully sent\r\n                        sendMessageTask.addOnCompleteListener(new OnCompleteListener&lt;Integer&gt;() {\r\n                            @Override\r\n                            public void onComplete(@NonNull Task&lt;Integer&gt; task) {\r\n                                if (task.isSuccessful()) {\r\n                                    int result = task.getResult();\r\n                                    Log.d(&quot;from android&quot;, &quot;Message sent to &quot; + node.getDisplayName() + &quot;. Result: &quot; + result + &quot;. message: &quot; +message);\r\n                                    runOnUiThread(new Runnable() {\r\n                                        public void run() {\r\n                                            Toast.makeText(MainActivity.this, &quot;&quot;, Toast.LENGTH_SHORT).show();\r\n                                        }\r\n                                    });\r\n                                } else {\r\n                                    Exception exception = task.getException();\r\n                                    Log.e(&quot;from android&quot;, &quot;Failed to send message: &quot; + exception);\r\n                                    runOnUiThread(new Runnable() {\r\n                                        public void run() {\r\n                                            Toast.makeText(MainActivity.this, &quot;Toast  &quot;, Toast.LENGTH_SHORT).show();\r\n                                        }\r\n                                    });\r\n                                }\r\n                            }\r\n                        });\r\n                    }\r\n                } catch (ExecutionException exception) {\r\n                    Log.e(&quot;from android&quot;, &quot;Failed to send message: &quot; + exception);\r\n                    runOnUiThread(new Runnable() {\r\n                        public void run() {\r\n                            Toast.makeText(MainActivity.this, &quot;Toast  &quot;, Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    });\r\n                } catch (InterruptedException exception) {\r\n                    Log.e(&quot;from android&quot;, &quot;Failed to send message: &quot; + exception);\r\n                    runOnUiThread(new Runnable() {\r\n                        public void run() {\r\n                            Toast.makeText(MainActivity.this, &quot;Toast  &quot;, Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        }).start();\r\n    }\r\n\r\n```\r\n\r\nThe code above is the code I wrote to send a simple message from the Android app to wear os. \r\n\r\nIn fact, when you actually run the Android application and execute sendMessage, a log message appears indicating that the message transmission was successful. \r\n\r\nHowever, in the wear os application, log messages appear only when objects are created, and log messages inside onMessageReceived are not visible.\r\n\r\nI think maybe it&#39;s not receiving in wear os.\r\n\r\nWhy can&#39;t I receive messages on wear os???\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nThe smartphone and smart watch are properly paired. A log message appears indicating that the message was successfully sent from the Android application to the smartwatch.\r\n","title":"I want to communicate between Android app and wear os app using message client","body":"<p>This code is the WearableListenerService code inside the wear os app</p>\n<pre><code>package com.example.ans_watch;\n\nimport ...\n\npublic class MyWearableListenerService extends WearableListenerService {\n\n    private static final String TAG = &quot;from Android&quot;;\n    private static final String MESSAGE_PATH = &quot;/message&quot;;\n    private MessageClient.OnMessageReceivedListener listener;\n\n    public void setOnMessageReceivedListener(MessageClient.OnMessageReceivedListener listener){\n        this.listener = listener;\n    }\n    public MyWearableListenerService(){\n        Log.d(TAG, &quot; &quot;);\n    }\n    @Override\n    public void onMessageReceived(MessageEvent messageEvent) {\n        if (listener != null) {\n            listener.onMessageReceived(messageEvent);\n        }\n    }\n}\n\n</code></pre>\n<hr />\n<p>This code is one of the activities inside the wear os application, and onMessageReceived() is specified and used.</p>\n<pre><code>package com.example.ans_watch;\n\nimport  ...\npublic class nodriveActivity  extends  Activity{\n\n    public MyWearableListenerService service = new MyWearableListenerService();\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.state_nodrive);\n        service.setOnMessageReceivedListener(new MessageClient.OnMessageReceivedListener() {\n            @Override\n            public void onMessageReceived(@NonNull MessageEvent messageEvent) {\n                Log.d(&quot;  &quot;, &quot;Message received: &quot; + messageEvent.getPath());\n                if (messageEvent.getPath().equals(&quot;/message&quot;)) {\n                    String message = new String(messageEvent.getData(), StandardCharsets.UTF_8);\n                    Log.d(&quot; !!&quot;, &quot; &quot; + message);\n                }\n            }\n        });\n        startService(new Intent(this, service.getClass()));\n   }\n\n</code></pre>\n<hr />\n<p>Finally, this code is the sendMessage() part of the Android application's MainActivity code.</p>\n<pre><code>package com.example.test;\n\nimport ...\n\npublic class MainActivity extends AppCompatActivity {\n    private void sendMessage() {\n        // Create a new thread to avoid blocking the UI thread\n        new Thread(new Runnable() {\n            @Override\n            public void run() {\n                // Get the connected nodes on the Wear network\n                Task&lt;List&lt;Node&gt;&gt; nodeListTask = Wearable.getNodeClient(getApplicationContext()).getConnectedNodes();\n                try {\n                    List&lt;Node&gt; nodes = Tasks.await(nodeListTask);\n                    for (Node node : nodes) {\n                        // Build the message\n                        String message = &quot;Hello!&quot;;\n                        byte[] payload = message.getBytes();\n\n                        // Send the message\n                        Task&lt;Integer&gt; sendMessageTask =\n                                Wearable.getMessageClient(getApplicationContext()).sendMessage(node.getId(), &quot;/message&quot;, payload);\n\n                        // Add onCompleteListener to check if the message was successfully sent\n                        sendMessageTask.addOnCompleteListener(new OnCompleteListener&lt;Integer&gt;() {\n                            @Override\n                            public void onComplete(@NonNull Task&lt;Integer&gt; task) {\n                                if (task.isSuccessful()) {\n                                    int result = task.getResult();\n                                    Log.d(&quot;from android&quot;, &quot;Message sent to &quot; + node.getDisplayName() + &quot;. Result: &quot; + result + &quot;. message: &quot; +message);\n                                    runOnUiThread(new Runnable() {\n                                        public void run() {\n                                            Toast.makeText(MainActivity.this, &quot;&quot;, Toast.LENGTH_SHORT).show();\n                                        }\n                                    });\n                                } else {\n                                    Exception exception = task.getException();\n                                    Log.e(&quot;from android&quot;, &quot;Failed to send message: &quot; + exception);\n                                    runOnUiThread(new Runnable() {\n                                        public void run() {\n                                            Toast.makeText(MainActivity.this, &quot;Toast  &quot;, Toast.LENGTH_SHORT).show();\n                                        }\n                                    });\n                                }\n                            }\n                        });\n                    }\n                } catch (ExecutionException exception) {\n                    Log.e(&quot;from android&quot;, &quot;Failed to send message: &quot; + exception);\n                    runOnUiThread(new Runnable() {\n                        public void run() {\n                            Toast.makeText(MainActivity.this, &quot;Toast  &quot;, Toast.LENGTH_SHORT).show();\n                        }\n                    });\n                } catch (InterruptedException exception) {\n                    Log.e(&quot;from android&quot;, &quot;Failed to send message: &quot; + exception);\n                    runOnUiThread(new Runnable() {\n                        public void run() {\n                            Toast.makeText(MainActivity.this, &quot;Toast  &quot;, Toast.LENGTH_SHORT).show();\n                        }\n                    });\n                }\n            }\n        }).start();\n    }\n\n</code></pre>\n<p>The code above is the code I wrote to send a simple message from the Android app to wear os.</p>\n<p>In fact, when you actually run the Android application and execute sendMessage, a log message appears indicating that the message transmission was successful.</p>\n<p>However, in the wear os application, log messages appear only when objects are created, and log messages inside onMessageReceived are not visible.</p>\n<p>I think maybe it's not receiving in wear os.</p>\n<p>Why can't I receive messages on wear os???</p>\n<p>The smartphone and smart watch are properly paired. A log message appears indicating that the message was successfully sent from the Android application to the smartwatch.</p>\n"},{"tags":["java","spring-boot","spring-security","basic-authentication"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1688714521,"post_id":76634564,"comment_id":135113554,"body_markdown":"YOu enabled both basic and login form. Your authenticationentrypoint should redirect to the login page. You shouildn&#39;t use a authentication entry point to do the logging you want, write an `ApplicationListener` instead that recevies event failures for failed authentication events.","body":"YOu enabled both basic and login form. Your authenticationentrypoint should redirect to the login page. You shouildn&#39;t use a authentication entry point to do the logging you want, write an <code>ApplicationListener</code> instead that recevies event failures for failed authentication events."},{"owner":{"account_id":26909570,"reputation":23,"user_id":20485378,"display_name":"Splatted I0I"},"score":0,"creation_date":1688719111,"post_id":76634564,"comment_id":135114348,"body_markdown":"Thanks for the comment, makes sense. Although when i try to redirect to the login page using authenticationentrypoint I get too many redirects error since the Unauthorized exception is caught over and over again.","body":"Thanks for the comment, makes sense. Although when i try to redirect to the login page using authenticationentrypoint I get too many redirects error since the Unauthorized exception is caught over and over again."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1688885145,"post_id":76634564,"comment_id":135132235,"body_markdown":"You need to allow `/login` als it will be caught by the `/**` which requires a user, which will redirect to `/login`, which requires a user, which will rediect (well you probably get the drift).","body":"You need to allow <code>&#47;login</code> als it will be caught by the <code>&#47;**</code> which requires a user, which will redirect to <code>&#47;login</code>, which requires a user, which will rediect (well you probably get the drift)."}],"owner":{"account_id":26909570,"reputation":23,"user_id":20485378,"display_name":"Splatted I0I"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":495,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1688713097,"creation_date":1688712890,"question_id":76634564,"body_markdown":"When I try to open my `localhost:8080` spring security basic auth application, I get a 401 Unauthorized error before I get the chance to authenticate using the spring form login. It works fine in Postman since I can provide the authentication details when I call the url. \r\nHeres my SecurityFilterChain:\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n    \r\n            http.authorizeHttpRequests((authorizeHttpRequests) -&gt;\r\n                            authorizeHttpRequests\r\n                                    .requestMatchers(&quot;/admin/**&quot;).hasRole(&quot;ADMIN&quot;)\r\n                                    .requestMatchers(&quot;/**&quot;).hasRole(&quot;USER&quot;))\r\n                    .formLogin(withDefaults())\r\n                    .httpBasic(withDefaults())\r\n                    .exceptionHandling((exceptionhandling) -&gt;\r\n                            exceptionhandling\r\n                                    .accessDeniedHandler(new CustomDeniedHandler()))\r\n                    .exceptionHandling(ex -&gt;\r\n                            ex.authenticationEntryPoint((request, response, authenticationException) -&gt;{\r\n    \r\n                                // TODO: Find a way to replace &quot;unknown intruder&quot; with the real name of the user\r\n    \r\n                                String username = &quot;unknown intruder&quot;;\r\n    \r\n                                if(authenticationException instanceof BadCredentialsException){\r\n                                    username = request.getParameter(&quot;user&quot;);\r\n                                }\r\n    \r\n                                logWriter.writeLog(HttpStatus.UNAUTHORIZED,\r\n                                        new LogRequest(&quot;Login denied&quot;, username, LocalDateTime.now()));\r\n    \r\n                            }));\r\n            return http.build();\r\n    }\r\n\r\n\r\nthe .authenticationEntryPoint method handles the 401 Unauthorized Error.\r\nAny help would be appreciated.","title":"401 Error before being trying to login in browser form Spring Boot","body":"<p>When I try to open my <code>localhost:8080</code> spring security basic auth application, I get a 401 Unauthorized error before I get the chance to authenticate using the spring form login. It works fine in Postman since I can provide the authentication details when I call the url.\nHeres my SecurityFilterChain:</p>\n<pre><code>@Bean\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n\n        http.authorizeHttpRequests((authorizeHttpRequests) -&gt;\n                        authorizeHttpRequests\n                                .requestMatchers(&quot;/admin/**&quot;).hasRole(&quot;ADMIN&quot;)\n                                .requestMatchers(&quot;/**&quot;).hasRole(&quot;USER&quot;))\n                .formLogin(withDefaults())\n                .httpBasic(withDefaults())\n                .exceptionHandling((exceptionhandling) -&gt;\n                        exceptionhandling\n                                .accessDeniedHandler(new CustomDeniedHandler()))\n                .exceptionHandling(ex -&gt;\n                        ex.authenticationEntryPoint((request, response, authenticationException) -&gt;{\n\n                            // TODO: Find a way to replace &quot;unknown intruder&quot; with the real name of the user\n\n                            String username = &quot;unknown intruder&quot;;\n\n                            if(authenticationException instanceof BadCredentialsException){\n                                username = request.getParameter(&quot;user&quot;);\n                            }\n\n                            logWriter.writeLog(HttpStatus.UNAUTHORIZED,\n                                    new LogRequest(&quot;Login denied&quot;, username, LocalDateTime.now()));\n\n                        }));\n        return http.build();\n}\n</code></pre>\n<p>the .authenticationEntryPoint method handles the 401 Unauthorized Error.\nAny help would be appreciated.</p>\n"},{"tags":["java","android","reactjs","react-native","apk"],"comments":[{"owner":{"account_id":12381146,"reputation":1611,"user_id":9026710,"display_name":"Tayyab Mazhar"},"score":0,"creation_date":1625143661,"post_id":68210100,"comment_id":120553001,"body_markdown":"Did you add JAVA_HOME to PATH?","body":"Did you add JAVA_HOME to PATH?"},{"owner":{"account_id":10058355,"reputation":506,"user_id":7435872,"display_name":"JasperMW"},"score":0,"creation_date":1625144316,"post_id":68210100,"comment_id":120553335,"body_markdown":"Oh, yes I did. Forgot to add. JAVA_HOME: C:\\Program Files\\Android\\Android Studio\\jre","body":"Oh, yes I did. Forgot to add. JAVA_HOME: C:\\Program Files\\Android\\Android Studio\\jre"},{"owner":{"account_id":12381146,"reputation":1611,"user_id":9026710,"display_name":"Tayyab Mazhar"},"score":0,"creation_date":1625205838,"post_id":68210100,"comment_id":120570395,"body_markdown":"that&#39;s a path of jre. JAVA_HOME should point to the JDK.","body":"that&#39;s a path of jre. JAVA_HOME should point to the JDK."}],"answers":[{"comments":[{"owner":{"account_id":6641874,"reputation":2154,"user_id":5127346,"accept_rate":20,"display_name":"Philipos D."},"score":1,"creation_date":1634647673,"post_id":68210820,"comment_id":123076962,"body_markdown":"How can be done through CLI?","body":"How can be done through CLI?"},{"owner":{"account_id":6641874,"reputation":2154,"user_id":5127346,"accept_rate":20,"display_name":"Philipos D."},"score":2,"creation_date":1634651140,"post_id":68210820,"comment_id":123078639,"body_markdown":"Found it, the *sdkmanager* tool has been moved to `/cmdline-tools/latest/bin` from  `/tools/bin`","body":"Found it, the <i>sdkmanager</i> tool has been moved to <code>&#47;cmdline-tools&#47;latest&#47;bin</code> from  <code>&#47;tools&#47;bin</code>"},{"owner":{"account_id":6940196,"reputation":89,"user_id":5326845,"display_name":"Noman Shakoor"},"score":0,"creation_date":1654168612,"post_id":68210820,"comment_id":128029499,"body_markdown":"After searching all other answers on stackoverflow. This one is the only solution, Cheers!","body":"After searching all other answers on stackoverflow. This one is the only solution, Cheers!"},{"owner":{"account_id":1780786,"reputation":1522,"user_id":1623598,"display_name":"Peter"},"score":0,"creation_date":1655686277,"post_id":68210820,"comment_id":128383393,"body_markdown":"Finally! The XmlSchems issue was fixed after so many years.","body":"Finally! The XmlSchems issue was fixed after so many years."},{"owner":{"account_id":3039160,"reputation":644,"user_id":2576595,"display_name":"Quimbo"},"score":0,"creation_date":1664380911,"post_id":68210820,"comment_id":130460138,"body_markdown":"Thanks @PhiliposD. I was executing the sdkmanager file from /tools/bin. This give me the error as the OP says. Then I searched for the cmdline-tools/latest/bin and execute the file from there. And all licenses are acepted.","body":"Thanks @PhiliposD. I was executing the sdkmanager file from /tools/bin. This give me the error as the OP says. Then I searched for the cmdline-tools/latest/bin and execute the file from there. And all licenses are acepted."},{"owner":{"account_id":339105,"reputation":1340,"user_id":668380,"accept_rate":63,"display_name":"Niels"},"score":0,"creation_date":1679911719,"post_id":68210820,"comment_id":133799686,"body_markdown":"I also needed to add this to my path like this: `%ANDROID_SDK_ROOT%\\cmdline-tools\\latest\\bin` for my cordova to work","body":"I also needed to add this to my path like this: <code>%ANDROID_SDK_ROOT%\\cmdline-tools\\latest\\bin</code> for my cordova to work"}],"tags":[],"owner":{"account_id":3477700,"reputation":42367,"user_id":2910520,"accept_rate":100,"display_name":"MatPag"},"comment_count":6,"down_vote_count":0,"up_vote_count":44,"is_accepted":true,"score":44,"last_activity_date":1625144904,"creation_date":1625144904,"answer_id":68210820,"question_id":68210100,"body_markdown":"You are using the wrong `sdkmanager`, `tools` directory has been deprecated\r\n\r\nOpen `Android Studio` and install the latest `command-line` tools:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThis will create this folder in your Android SDK:\r\n\r\n`...\\Android\\Sdk\\cmdline-tools\\latest\\bin`\r\n\r\nNow use the `sdkmanager` which is inside the bin directory to accept all the licenses:\r\n\r\n`C:\\Users\\jaspe\\AppData\\Local\\Android\\Sdk\\cmdline-tools\\latest\\bin&gt;sdkmanager.bat --licenses`\r\n\r\n  [1]: https://i.stack.imgur.com/0vFQ2.png","title":"&quot;java.lang.NoClassDefFoundError: javax/xml/bind/annotation/XmlSchema&quot; when accepting SDK licenses","body":"<p>You are using the wrong <code>sdkmanager</code>, <code>tools</code> directory has been deprecated</p>\n<p>Open <code>Android Studio</code> and install the latest <code>command-line</code> tools:</p>\n<p><a href=\"https://i.stack.imgur.com/0vFQ2.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/0vFQ2.png\" alt=\"enter image description here\" /></a></p>\n<p>This will create this folder in your Android SDK:</p>\n<p><code>...\\Android\\Sdk\\cmdline-tools\\latest\\bin</code></p>\n<p>Now use the <code>sdkmanager</code> which is inside the bin directory to accept all the licenses:</p>\n<p><code>C:\\Users\\jaspe\\AppData\\Local\\Android\\Sdk\\cmdline-tools\\latest\\bin&gt;sdkmanager.bat --licenses</code></p>\n"},{"tags":[],"owner":{"account_id":4741299,"reputation":78,"user_id":3833950,"display_name":"bbarrett"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664073661,"creation_date":1664073661,"answer_id":73841733,"question_id":68210100,"body_markdown":"@MatPag&#39;s answer has the solution I needed, but it took me a while to recognise it. Posting this answer for a specific case incase it helps someone else.\r\n\r\nI was trying to setup Unreal Engine v4.25.4 when I encountered this error. I needed to run a batch script that came with Unreal Engine located at:\r\n\r\nC:\\Program Files\\Epic Games\\UE_4.25\\Engine\\Extras\\Android\\SetupAndroid.bat\r\n\r\nwhich produced the error:\r\n\r\n&gt; Android Studio Path: C:\\Program Files\\Android\\Android Studio\r\nAndroid Studio SDK Path: C:\\Users\\brianb\\AppData\\Local\\Android\\Sdk\r\nUsing sdkmanager: C:\\Users\\brianb\\AppData\\Local\\Android\\Sdk\\tools\\bin\\sdkmanager.bat\r\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: javax/xml/bind/annotation/XmlSchema\r\n        at com.android.repository.api.SchemaModule$SchemaModuleVersion.&lt;init&gt;(SchemaModule.java:156)\r\n        at com.android.repository.api.SchemaModule.&lt;init&gt;(SchemaModule.java:75)\r\n        at com.android.sdklib.repository.AndroidSdkHandler.&lt;clinit&gt;(AndroidSdkHandler.java:81)\r\n        at com.android.sdklib.tool.sdkmanager.SdkManagerCli.main(SdkManagerCli.java:73)\r\n        at com.android.sdklib.tool.sdkmanager.SdkManagerCli.main(SdkManagerCli.java:48)\r\nCaused by: java.lang.ClassNotFoundException: javax.xml.bind.annotation.XmlSchema\r\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)\r\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\r\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\r\n        ... 5 more\r\nUpdate failed. Please check the Android Studio install.\r\nPress any key to continue . . .\r\n\r\nEven after I located the sdkmanager.bat script and executed it according to MatPag&#39;s answer, my AndroidSetup.bat script was failing. \r\n\r\nEventually I realised the AndroidSetup.bat was trying to call the sdkmanager.bat from the wrong location. \r\n\r\nI edited the AndroidSetup.bat file (line 61) as follows to correct the path:\r\n\r\n&gt; :: set SDKMANAGER=%STUDIO_SDK_PATH%\\tools\\bin\\sdkmanager.bat\r\nset SDKMANAGER=%STUDIO_SDK_PATH%\\cmdline-tools\\latest\\bin\\sdkmanager.bat\r\n\r\n\r\n\r\n ","title":"&quot;java.lang.NoClassDefFoundError: javax/xml/bind/annotation/XmlSchema&quot; when accepting SDK licenses","body":"<p>@MatPag's answer has the solution I needed, but it took me a while to recognise it. Posting this answer for a specific case incase it helps someone else.</p>\n<p>I was trying to setup Unreal Engine v4.25.4 when I encountered this error. I needed to run a batch script that came with Unreal Engine located at:</p>\n<p>C:\\Program Files\\Epic Games\\UE_4.25\\Engine\\Extras\\Android\\SetupAndroid.bat</p>\n<p>which produced the error:</p>\n<blockquote>\n<p>Android Studio Path: C:\\Program Files\\Android\\Android Studio\nAndroid Studio SDK Path: C:\\Users\\brianb\\AppData\\Local\\Android\\Sdk\nUsing sdkmanager: C:\\Users\\brianb\\AppData\\Local\\Android\\Sdk\\tools\\bin\\sdkmanager.bat\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: javax/xml/bind/annotation/XmlSchema\nat com.android.repository.api.SchemaModule$SchemaModuleVersion.(SchemaModule.java:156)\nat com.android.repository.api.SchemaModule.(SchemaModule.java:75)\nat com.android.sdklib.repository.AndroidSdkHandler.(AndroidSdkHandler.java:81)\nat com.android.sdklib.tool.sdkmanager.SdkManagerCli.main(SdkManagerCli.java:73)\nat com.android.sdklib.tool.sdkmanager.SdkManagerCli.main(SdkManagerCli.java:48)\nCaused by: java.lang.ClassNotFoundException: javax.xml.bind.annotation.XmlSchema\nat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)\nat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\nat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\n... 5 more\nUpdate failed. Please check the Android Studio install.\nPress any key to continue . . .</p>\n</blockquote>\n<p>Even after I located the sdkmanager.bat script and executed it according to MatPag's answer, my AndroidSetup.bat script was failing.</p>\n<p>Eventually I realised the AndroidSetup.bat was trying to call the sdkmanager.bat from the wrong location.</p>\n<p>I edited the AndroidSetup.bat file (line 61) as follows to correct the path:</p>\n<blockquote>\n<p>:: set SDKMANAGER=%STUDIO_SDK_PATH%\\tools\\bin\\sdkmanager.bat\nset SDKMANAGER=%STUDIO_SDK_PATH%\\cmdline-tools\\latest\\bin\\sdkmanager.bat</p>\n</blockquote>\n"}],"owner":{"account_id":10058355,"reputation":506,"user_id":7435872,"display_name":"JasperMW"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11708,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":68210820,"answer_count":2,"score":16,"last_activity_date":1688713092,"creation_date":1625142084,"question_id":68210100,"body_markdown":"Alright so I&#39;m trying to build my React-Native app using Android Studio. I first ran into this error when building:\r\n\r\n    Failed to install the following Android SDK packages as some licences have not been accepted.\r\n       build-tools;29.0.2 Android SDK Build-Tools 29.0.2\r\n    To build this project, accept the SDK license agreements and install the missing components using the Android Studio SDK Manager.\r\n    Alternatively, to transfer the license agreements from one workstation to another, see http://d.android.com/r/studio-ui/export-licenses.html\r\n    \r\n    Using Android SDK: C:\\Users\\jaspe\\AppData\\Local\\Android\\Sdk\r\n\r\nWhen figuring that out I came across [this answer][1] which told me to accept the licenses. However in trying to do so I got the following error:\r\n\r\n    C:\\Users\\jaspe\\AppData\\Local\\Android\\Sdk\\tools\\bin&gt;sdkmanager --licenses\r\n    Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: javax/xml/bind/annotation/XmlSchema\r\n            at com.android.repository.api.SchemaModule$SchemaModuleVersion.&lt;init&gt;(SchemaModule.java:156)\r\n            at com.android.repository.api.SchemaModule.&lt;init&gt;(SchemaModule.java:75)\r\n            at com.android.sdklib.repository.AndroidSdkHandler.&lt;clinit&gt;(AndroidSdkHandler.java:81)\r\n            at com.android.sdklib.tool.sdkmanager.SdkManagerCli.main(SdkManagerCli.java:73)\r\n            at com.android.sdklib.tool.sdkmanager.SdkManagerCli.main(SdkManagerCli.java:48)\r\n    Caused by: java.lang.ClassNotFoundException: javax.xml.bind.annotation.XmlSchema\r\n            at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)\r\n            at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\r\n            at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\r\n            ... 5 more\r\n\r\nTo resolve which I found [this post][2]. I don&#39;t use brew, but I tried the second answer. It didn&#39;t work, sadly enough. Then I found out I didn&#39;t have a JDK installed, so I did that. But with the newest JDK installed I still get an exception:\r\n\r\n    C:\\Users\\jaspe\\AppData\\Local\\Android\\Sdk\\tools\\bin&gt;sdkmanager.bat -licenses\r\n    Error occurred during initialization of boot layer\r\n    java.lang.module.FindException: Module java.xml.bind not found\r\n\r\nAnd now I&#39;m not sure what to do anymore. I found [an answer][3] explaining I needed to edit my project settings, but I think this doesn&#39;t apply to my project, and honestly I&#39;m in a bit over my head. Does someone have experiences with these errors, and can help me fix them? I&#39;ve spent the whole morning trying to figure this out, I&#39;d expected building a runnable .APK as a demo would be easier...\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/54273412/failed-to-install-the-following-android-sdk-packages-as-some-licences-have-not\r\n  [2]: https://stackoverflow.com/questions/46402772/failed-to-install-android-sdk-java-lang-noclassdeffounderror-javax-xml-bind-a\r\n  [3]: https://stackoverflow.com/questions/58495573/module-java-xml-bind-not-found","title":"&quot;java.lang.NoClassDefFoundError: javax/xml/bind/annotation/XmlSchema&quot; when accepting SDK licenses","body":"<p>Alright so I'm trying to build my React-Native app using Android Studio. I first ran into this error when building:</p>\n<pre><code>Failed to install the following Android SDK packages as some licences have not been accepted.\n   build-tools;29.0.2 Android SDK Build-Tools 29.0.2\nTo build this project, accept the SDK license agreements and install the missing components using the Android Studio SDK Manager.\nAlternatively, to transfer the license agreements from one workstation to another, see http://d.android.com/r/studio-ui/export-licenses.html\n\nUsing Android SDK: C:\\Users\\jaspe\\AppData\\Local\\Android\\Sdk\n</code></pre>\n<p>When figuring that out I came across <a href=\"https://stackoverflow.com/questions/54273412/failed-to-install-the-following-android-sdk-packages-as-some-licences-have-not\">this answer</a> which told me to accept the licenses. However in trying to do so I got the following error:</p>\n<pre><code>C:\\Users\\jaspe\\AppData\\Local\\Android\\Sdk\\tools\\bin&gt;sdkmanager --licenses\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: javax/xml/bind/annotation/XmlSchema\n        at com.android.repository.api.SchemaModule$SchemaModuleVersion.&lt;init&gt;(SchemaModule.java:156)\n        at com.android.repository.api.SchemaModule.&lt;init&gt;(SchemaModule.java:75)\n        at com.android.sdklib.repository.AndroidSdkHandler.&lt;clinit&gt;(AndroidSdkHandler.java:81)\n        at com.android.sdklib.tool.sdkmanager.SdkManagerCli.main(SdkManagerCli.java:73)\n        at com.android.sdklib.tool.sdkmanager.SdkManagerCli.main(SdkManagerCli.java:48)\nCaused by: java.lang.ClassNotFoundException: javax.xml.bind.annotation.XmlSchema\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\n        ... 5 more\n</code></pre>\n<p>To resolve which I found <a href=\"https://stackoverflow.com/questions/46402772/failed-to-install-android-sdk-java-lang-noclassdeffounderror-javax-xml-bind-a\">this post</a>. I don't use brew, but I tried the second answer. It didn't work, sadly enough. Then I found out I didn't have a JDK installed, so I did that. But with the newest JDK installed I still get an exception:</p>\n<pre><code>C:\\Users\\jaspe\\AppData\\Local\\Android\\Sdk\\tools\\bin&gt;sdkmanager.bat -licenses\nError occurred during initialization of boot layer\njava.lang.module.FindException: Module java.xml.bind not found\n</code></pre>\n<p>And now I'm not sure what to do anymore. I found <a href=\"https://stackoverflow.com/questions/58495573/module-java-xml-bind-not-found\">an answer</a> explaining I needed to edit my project settings, but I think this doesn't apply to my project, and honestly I'm in a bit over my head. Does someone have experiences with these errors, and can help me fix them? I've spent the whole morning trying to figure this out, I'd expected building a runnable .APK as a demo would be easier...</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":6128339,"reputation":4087,"user_id":4779472,"accept_rate":89,"display_name":"Rohit Gupta"},"score":0,"creation_date":1689167681,"post_id":76628863,"comment_id":135174976,"body_markdown":"The error is very clear, look at the manual/documentation and find a replacement.","body":"The error is very clear, look at the manual/documentation and find a replacement."}],"answers":[{"comments":[{"owner":{"account_id":28940793,"reputation":11,"user_id":22167381,"display_name":"Airat72"},"score":0,"creation_date":1688648573,"post_id":76628888,"comment_id":135104231,"body_markdown":"I don&#39;t know how to use  Applications should instead use NetworkCapabilities#hasTransport or requestNetwork(android.net.NetworkRequest, android.net.ConnectivityManager.NetworkCallback) to request an appropriate network. See NetworkCapabilities for supported transports.","body":"I don&#39;t know how to use  Applications should instead use NetworkCapabilities#hasTransport or requestNetwork(android.net.NetworkRequest, android.net.ConnectivityManager.NetworkCallback) to request an appropriate network. See NetworkCapabilities for supported transports."},{"owner":{"account_id":14722107,"reputation":5143,"user_id":10632369,"display_name":"tomerpacific"},"score":0,"creation_date":1688676893,"post_id":76628888,"comment_id":135109871,"body_markdown":"@Airat72 - A simple google search can help you with that.","body":"@Airat72 - A simple google search can help you with that."}],"tags":[],"owner":{"account_id":14722107,"reputation":5143,"user_id":10632369,"display_name":"tomerpacific"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688646802,"creation_date":1688646802,"answer_id":76628888,"question_id":76628863,"body_markdown":"Yes.\r\nThis has been deprecated in API level 28.\r\n\r\n[![Screenshot][1]][1]\r\n\r\n\r\n[Reference][2]\r\n\r\nYou can see that there is a suggestion on what you should use instead:\r\n\r\n&gt; Applications should instead use NetworkCapabilities#hasTransport or\r\n&gt; requestNetwork(android.net.NetworkRequest,\r\n&gt; android.net.ConnectivityManager.NetworkCallback) to request an\r\n&gt; appropriate network. See NetworkCapabilities for supported transports.\r\n\r\n  [1]: https://i.stack.imgur.com/OIvMm.png\r\n  [2]: https://developer.android.com/reference/android/net/ConnectivityManager#TYPE_MOBILE","title":"warning: [deprecation] TYPE_MOBILE in ConnectivityManager has been deprecated?","body":"<p>Yes.\nThis has been deprecated in API level 28.</p>\n<p><a href=\"https://i.stack.imgur.com/OIvMm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OIvMm.png\" alt=\"Screenshot\" /></a></p>\n<p><a href=\"https://developer.android.com/reference/android/net/ConnectivityManager#TYPE_MOBILE\" rel=\"nofollow noreferrer\">Reference</a></p>\n<p>You can see that there is a suggestion on what you should use instead:</p>\n<blockquote>\n<p>Applications should instead use NetworkCapabilities#hasTransport or\nrequestNetwork(android.net.NetworkRequest,\nandroid.net.ConnectivityManager.NetworkCallback) to request an\nappropriate network. See NetworkCapabilities for supported transports.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":10106494,"reputation":38,"user_id":7468900,"display_name":"Trije"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1688712960,"creation_date":1688712960,"answer_id":76634571,"question_id":76628863,"body_markdown":"here is an example to use for:\r\n\r\n    val isNetworkAvailable = (context.getSystemService(Context.CONNECTIVITY_SERVICE) as ConnectivityManager).run {\r\n        getNetworkCapabilities(activeNetwork)?.run {\r\n            hasTransport(NetworkCapabilities.TRANSPORT_CELLULAR)\r\n                    || hasTransport(NetworkCapabilities.TRANSPORT_WIFI)\r\n                    || hasTransport(NetworkCapabilities.TRANSPORT_ETHERNET)\r\n        } ?: false\r\n    }\r\n\r\nIf you aim to use `TYPE_MOBILE` for older version, you can add check on above for API level:\r\n`if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M)`\r\n","title":"warning: [deprecation] TYPE_MOBILE in ConnectivityManager has been deprecated?","body":"<p>here is an example to use for:</p>\n<pre><code>val isNetworkAvailable = (context.getSystemService(Context.CONNECTIVITY_SERVICE) as ConnectivityManager).run {\n    getNetworkCapabilities(activeNetwork)?.run {\n        hasTransport(NetworkCapabilities.TRANSPORT_CELLULAR)\n                || hasTransport(NetworkCapabilities.TRANSPORT_WIFI)\n                || hasTransport(NetworkCapabilities.TRANSPORT_ETHERNET)\n    } ?: false\n}\n</code></pre>\n<p>If you aim to use <code>TYPE_MOBILE</code> for older version, you can add check on above for API level:\n<code>if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M)</code></p>\n"}],"owner":{"account_id":28940793,"reputation":11,"user_id":22167381,"display_name":"Airat72"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1689167688,"answer_count":2,"score":1,"last_activity_date":1688712960,"creation_date":1688646618,"question_id":76628863,"body_markdown":"    package com.aniketjain.weatherapp.network;\r\n    \r\n    import android.content.Context;\r\n    import android.net.ConnectivityManager;\r\n    \r\n    \r\n    public class InternetConnectivity {\r\n        public static boolean isInternetConnected(Context context) {\r\n            ConnectivityManager connectivityManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n            boolean connection_flag = false;\r\n            if (connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE).getState() == android.net.NetworkInfo.State.CONNECTED ||\r\n                    connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI).getState() == android.net.NetworkInfo.State.CONNECTED) {\r\n                connection_flag = true;\r\n            }\r\n            return connection_flag;\r\n        }\r\n    }\r\n    \r\n    \r\n    warning: [deprecation] TYPE_MOBILE in ConnectivityManager has been deprecated\r\n            if (connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE).getState() == android.net.NetworkInfo.State.CONNECTED ||","title":"warning: [deprecation] TYPE_MOBILE in ConnectivityManager has been deprecated?","body":"<pre><code>package com.aniketjain.weatherapp.network;\n\nimport android.content.Context;\nimport android.net.ConnectivityManager;\n\n\npublic class InternetConnectivity {\n    public static boolean isInternetConnected(Context context) {\n        ConnectivityManager connectivityManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\n        boolean connection_flag = false;\n        if (connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE).getState() == android.net.NetworkInfo.State.CONNECTED ||\n                connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI).getState() == android.net.NetworkInfo.State.CONNECTED) {\n            connection_flag = true;\n        }\n        return connection_flag;\n    }\n}\n\n\nwarning: [deprecation] TYPE_MOBILE in ConnectivityManager has been deprecated\n        if (connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE).getState() == android.net.NetworkInfo.State.CONNECTED ||\n</code></pre>\n"},{"tags":["java","algorithm"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":5,"creation_date":1688125511,"post_id":76585967,"comment_id":135035450,"body_markdown":"[As before](https://stackoverflow.com/q/76584913/), this is not a real attempt at all, and all you&#39;re learning is how to off-load your work. This behavior is not good for you, nor for your learning and nor for the site.","body":"<a href=\"https://stackoverflow.com/q/76584913/\">As before</a>, this is not a real attempt at all, and all you&#39;re learning is how to off-load your work. This behavior is not good for you, nor for your learning and nor for the site."},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1688408862,"post_id":76585967,"comment_id":135067635,"body_markdown":"an all the places where you add the &quot;key&quot; to your `Set` you have the coordinates that you can replace with a different character. Just use a list of 5 different characters and pick the first one that is not in any of the surrounding positions. You know how to assign to an entry in a nested array?","body":"an all the places where you add the &quot;key&quot; to your <code>Set</code> you have the coordinates that you can replace with a different character. Just use a list of 5 different characters and pick the first one that is not in any of the surrounding positions. You know how to assign to an entry in a nested array?"},{"owner":{"account_id":15586948,"reputation":512,"user_id":22056798,"display_name":"maxplus"},"score":2,"creation_date":1688409134,"post_id":76585967,"comment_id":135067683,"body_markdown":"Your code does not &quot;find the minimum replacements needed in the matrix&quot; correctly. Test case: `{&quot;aa&quot;, &quot;ab&quot;}`.","body":"Your code does not &quot;find the minimum replacements needed in the matrix&quot; correctly. Test case: <code>{&quot;aa&quot;, &quot;ab&quot;}</code>."},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":3,"creation_date":1688460824,"post_id":76585967,"comment_id":135073768,"body_markdown":"&quot;This question has an open bounty and cannot be closed&quot;. Well, that&#39;s one way to keep low-quality content open...","body":"&quot;This question has an open bounty and cannot be closed&quot;. Well, that&#39;s one way to keep low-quality content open..."}],"answers":[{"tags":[],"owner":{"account_id":17592368,"reputation":13891,"user_id":12763954,"display_name":"Olivier"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1688712589,"creation_date":1688542486,"answer_id":76618054,"question_id":76585967,"body_markdown":"Here is an algorithm and its implementation.\r\n\r\nFirst, let&#39;s assign colors to the matrix like a chessboard: alternating black and white cells. Any pair of adjacent\r\ncells has different colors.\r\n\r\nThen, I will define a &quot;chain&quot; as a maximal subset of connected cells with the same value.\r\nFind all the chains contained in the matrix.\r\n\r\nFor the matrix given in the question, they are:\r\n\r\n- a\r\n- c\r\n- aa\r\n- dddd\r\n- bbbb\r\n- ccc\r\n- e\r\n\r\nFor every chain, count the number of black and white cells. Select the color with the least number of cells\r\n(in case of a tie, the choice is arbitrary). Then change all the cells in the chain that have that color.\r\n\r\nTo sum it up:\r\n\r\n- Partition the matrix into chains\r\n- For every chain, select the minority color and change all the cells with that color\r\n\r\nJava implementation:\r\n\r\n``` lang-java\r\nimport java.util.*;\r\n\r\npublic class Solver\r\n{\r\n\tprivate Cell[][] matrix;\r\n\tprivate int N;\r\n\tprivate int M;\r\n\tprivate ArrayList&lt;HashSet&lt;Cell&gt;&gt; chains;\r\n\r\n\tpublic Solver(char[][] values)\r\n\t{\r\n\t\tN = values.length;\r\n\t\tM = values[0].length;\r\n\t\tmatrix = new Cell[N][M];\r\n\t\tfor(int i=0;i&lt;N;i++)\r\n\t\t{\r\n\t\t\tfor(int j=0;j&lt;M;j++)\r\n\t\t\t{\r\n\t\t\t\tCell cell = new Cell();\r\n\t\t\t\tcell.i = i;\r\n\t\t\t\tcell.j = j;\r\n\t\t\t\tcell.value = values[i][j];\r\n\t\t\t\tcell.color = (i+j) % 2==0 ? &#39;B&#39; : &#39;W&#39;;\r\n\t\t\t\tmatrix[i][j] = cell;\r\n\t\t\t}\r\n\t\t}\r\n\t\tchains = new ArrayList&lt;HashSet&lt;Cell&gt;&gt;();\r\n\t}\r\n\r\n\tpublic void solve()\r\n\t{\r\n\t\tSystem.out.println(&quot;Initial matrix:&quot;);\r\n\t\tprint();\r\n\t\tfindChains();\r\n\t\tint nb = 0;\r\n\t\tfor(HashSet&lt;Cell&gt; chain : chains)\r\n\t\t{\r\n\t\t\tint nbB = getNumberOfCellsWithColor(chain, &#39;B&#39;);\r\n\t\t\tint nbW = chain.size() - nbB;\r\n\t\t\tchangeValues(chain, nbB &lt; nbW ? &#39;B&#39; : &#39;W&#39;);\r\n\t\t\tnb += Math.min(nbB, nbW);\r\n\t\t}\r\n\t\tSystem.out.println(&quot;\\n&quot; + nb + &quot; change(s) performed:&quot;);\r\n\t\tprint();\r\n\t}\r\n\r\n\tprivate void findChains()\r\n\t{\r\n\t\tCell cell = getUnassignedCell();\r\n\t\twhile(cell!=null)\r\n\t\t{\r\n\t\t\tHashSet&lt;Cell&gt; chain = new HashSet&lt;Cell&gt;();\r\n\t\t\tchains.add(chain);\r\n\t\t\taddToChain(cell, chain);\r\n\t\t\tcell = getUnassignedCell();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate Cell getUnassignedCell()\r\n\t{\r\n\t\tfor(int i=0;i&lt;N;i++)\r\n\t\t{\r\n\t\t\tfor(int j=0;j&lt;M;j++)\r\n\t\t\t{\r\n\t\t\t\tif(matrix[i][j].chain==null)\r\n\t\t\t\t\treturn matrix[i][j];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tprivate void addToChain(Cell cell, HashSet&lt;Cell&gt; chain)\r\n\t{\r\n\t\tchain.add(cell);\r\n\t\tcell.chain = chain;\r\n\t\tfor(Cell neighbor : getNeighbors(cell))\r\n\t\t{\r\n\t\t\tif(neighbor.value==cell.value &amp;&amp; neighbor.chain==null)\r\n\t\t\t\taddToChain(neighbor, chain);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate ArrayList&lt;Cell&gt; getNeighbors(Cell cell)\r\n\t{\r\n\t\tArrayList&lt;Cell&gt; cells = new ArrayList&lt;Cell&gt;();\r\n\t\taddCell(cells, cell.i, cell.j-1);\r\n\t\taddCell(cells, cell.i-1, cell.j);\r\n\t\taddCell(cells, cell.i, cell.j+1);\r\n\t\taddCell(cells, cell.i+1, cell.j);\r\n\t\treturn cells;\r\n\t}\r\n\r\n\tprivate void addCell(ArrayList&lt;Cell&gt; cells, int i, int j)\r\n\t{\r\n\t\tif(i&gt;=0 &amp;&amp; i&lt;N &amp;&amp; j&gt;=0 &amp;&amp; j&lt;M)\r\n\t\t\tcells.add(matrix[i][j]);\r\n\t}\r\n\r\n\tprivate int getNumberOfCellsWithColor(HashSet&lt;Cell&gt; chain, char color)\r\n\t{\r\n\t\tint nb = 0;\r\n\t\tfor(Cell cell : chain)\r\n\t\t{\r\n\t\t\tif(cell.color==color)\r\n\t\t\t\tnb++;\r\n\t\t}\r\n\t\treturn nb;\r\n\t}\r\n\r\n\tprivate void changeValues(HashSet&lt;Cell&gt; chain, char color)\r\n\t{\r\n\t\tfor(Cell cell : chain)\r\n\t\t{\r\n\t\t\tif(cell.color==color)\r\n\t\t\t\tcell.value = chooseValue(cell);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate char chooseValue(Cell cell)\r\n\t{\r\n\t\tHashSet&lt;Character&gt; values = new HashSet&lt;Character&gt;();\r\n\t\tfor(Cell neighbor : getNeighbors(cell))\r\n\t\t\tvalues.add(neighbor.value);\r\n\t\tif(!values.contains(&#39;a&#39;))\r\n\t\t\treturn &#39;a&#39;;\r\n\t\tif(!values.contains(&#39;b&#39;))\r\n\t\t\treturn &#39;b&#39;;\r\n\t\tif(!values.contains(&#39;c&#39;))\r\n\t\t\treturn &#39;c&#39;;\r\n\t\tif(!values.contains(&#39;d&#39;))\r\n\t\t\treturn &#39;d&#39;;\r\n\t\treturn &#39;e&#39;;\r\n\t}\r\n\r\n\tprivate void print()\r\n\t{\r\n\t\tfor(int i=0;i&lt;N;i++)\r\n\t\t{\r\n\t\t\tfor(int j=0;j&lt;M;j++)\r\n\t\t\t\tSystem.out.print(matrix[i][j].value);\r\n\t\t\tSystem.out.println();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static class Cell\r\n\t{\r\n\t\tpublic int i;\r\n\t\tpublic int j;\r\n\t\tpublic char value;\r\n\t\tpublic char color;\r\n\t\tpublic HashSet&lt;Cell&gt; chain;\r\n\t}\r\n}\r\n```\r\n\r\nTest 1:\r\n\r\n``` lang-java\r\npublic class Test1\r\n{\r\n    public static void main(String[] args)\r\n    {\r\n\t\tchar[][] values = {{&#39;a&#39;, &#39;a&#39;}, {&#39;a&#39;, &#39;b&#39;}};\r\n\t\tSolver solver = new Solver(values);\r\n\t\tsolver.solve();\r\n    }\r\n}\r\n```\r\n\r\nResult:\r\n\r\n``` lang-none\r\nInitial matrix:\r\naa\r\nab\r\n\r\n1 change(s) performed:\r\nba\r\nab\r\n```\r\n\r\n\r\nTest 2:\r\n\r\n``` lang-java\r\npublic class Test2\r\n{\r\n    public static void main(String[] args)\r\n    {\r\n\t\tchar[][] values = {{&#39;a&#39;, &#39;a&#39;, &#39;a&#39;}, {&#39;a&#39;, &#39;a&#39;, &#39;a&#39;}, {&#39;a&#39;, &#39;a&#39;, &#39;a&#39;}};\r\n\t\tSolver solver = new Solver(values);\r\n\t\tsolver.solve();\r\n    }\r\n}\r\n```\r\n\r\nResult:\r\n\r\n``` lang-none\r\nInitial matrix:\r\naaa\r\naaa\r\naaa\r\n\r\n4 change(s) performed:\r\naba\r\nbab\r\naba\r\n```\r\n\r\nTest 3:\r\n\r\n``` lang-java\r\npublic class Test3\r\n{\r\n    public static void main(String[] args)\r\n    {\r\n\t\tchar[][] values = {{&#39;a&#39;, &#39;c&#39;, &#39;a&#39;, &#39;a&#39;}, {&#39;d&#39;, &#39;d&#39;, &#39;d&#39;, &#39;d&#39;}, {&#39;b&#39;, &#39;b&#39;, &#39;b&#39;, &#39;b&#39;}, {&#39;c&#39;, &#39;c&#39;, &#39;c&#39;, &#39;e&#39;}};\r\n\t\tSolver solver = new Solver(values);\r\n\t\tsolver.solve();\r\n    }\r\n}\r\n```\r\n\r\nResult:\r\n\r\n``` lang-none\r\nInitial matrix:\r\nacaa\r\ndddd\r\nbbbb\r\nccce\r\n\r\n6 change(s) performed:\r\nacab\r\ncdcd\r\nbaba\r\ncbce\r\n```\r\n\r\n## UPDATE\r\n\r\nUnfortunately I have found a failing test case:\r\n\r\n``` lang-java\r\npublic class Test4\r\n{\r\n    public static void main(String[] args)\r\n    {\r\n\t\tchar[][] values = {{&#39;a&#39;, &#39;a&#39;, &#39;a&#39;, &#39;a&#39;, &#39;a&#39;, &#39;a&#39;}, {&#39;c&#39;, &#39;a&#39;, &#39;d&#39;, &#39;c&#39;, &#39;a&#39;, &#39;d&#39;}};\r\n\t\tSolver solver = new Solver(values);\r\n\t\tsolver.solve();\r\n    }\r\n}\r\n```\r\n\r\nResult:\r\n\r\n``` lang-none\r\nInitial matrix:\r\naaaaaa\r\ncadcad\r\n\r\n4 change(s) performed:\r\nababab\r\ncadcbd\r\n```\r\n\r\nIt can be done in only 3 changes:\r\n\r\n```\r\nabcaba\r\ncadcad\r\n```\r\n\r\nI think that the chain partitioning is the correct first step, but then you need to process every chain in a more clever way than I did...\r\n","title":"Update matrix to get distinct adjacent characters","body":"<p>Here is an algorithm and its implementation.</p>\n<p>First, let's assign colors to the matrix like a chessboard: alternating black and white cells. Any pair of adjacent\ncells has different colors.</p>\n<p>Then, I will define a &quot;chain&quot; as a maximal subset of connected cells with the same value.\nFind all the chains contained in the matrix.</p>\n<p>For the matrix given in the question, they are:</p>\n<ul>\n<li>a</li>\n<li>c</li>\n<li>aa</li>\n<li>dddd</li>\n<li>bbbb</li>\n<li>ccc</li>\n<li>e</li>\n</ul>\n<p>For every chain, count the number of black and white cells. Select the color with the least number of cells\n(in case of a tie, the choice is arbitrary). Then change all the cells in the chain that have that color.</p>\n<p>To sum it up:</p>\n<ul>\n<li>Partition the matrix into chains</li>\n<li>For every chain, select the minority color and change all the cells with that color</li>\n</ul>\n<p>Java implementation:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.*;\n\npublic class Solver\n{\n    private Cell[][] matrix;\n    private int N;\n    private int M;\n    private ArrayList&lt;HashSet&lt;Cell&gt;&gt; chains;\n\n    public Solver(char[][] values)\n    {\n        N = values.length;\n        M = values[0].length;\n        matrix = new Cell[N][M];\n        for(int i=0;i&lt;N;i++)\n        {\n            for(int j=0;j&lt;M;j++)\n            {\n                Cell cell = new Cell();\n                cell.i = i;\n                cell.j = j;\n                cell.value = values[i][j];\n                cell.color = (i+j) % 2==0 ? 'B' : 'W';\n                matrix[i][j] = cell;\n            }\n        }\n        chains = new ArrayList&lt;HashSet&lt;Cell&gt;&gt;();\n    }\n\n    public void solve()\n    {\n        System.out.println(&quot;Initial matrix:&quot;);\n        print();\n        findChains();\n        int nb = 0;\n        for(HashSet&lt;Cell&gt; chain : chains)\n        {\n            int nbB = getNumberOfCellsWithColor(chain, 'B');\n            int nbW = chain.size() - nbB;\n            changeValues(chain, nbB &lt; nbW ? 'B' : 'W');\n            nb += Math.min(nbB, nbW);\n        }\n        System.out.println(&quot;\\n&quot; + nb + &quot; change(s) performed:&quot;);\n        print();\n    }\n\n    private void findChains()\n    {\n        Cell cell = getUnassignedCell();\n        while(cell!=null)\n        {\n            HashSet&lt;Cell&gt; chain = new HashSet&lt;Cell&gt;();\n            chains.add(chain);\n            addToChain(cell, chain);\n            cell = getUnassignedCell();\n        }\n    }\n\n    private Cell getUnassignedCell()\n    {\n        for(int i=0;i&lt;N;i++)\n        {\n            for(int j=0;j&lt;M;j++)\n            {\n                if(matrix[i][j].chain==null)\n                    return matrix[i][j];\n            }\n        }\n        return null;\n    }\n\n    private void addToChain(Cell cell, HashSet&lt;Cell&gt; chain)\n    {\n        chain.add(cell);\n        cell.chain = chain;\n        for(Cell neighbor : getNeighbors(cell))\n        {\n            if(neighbor.value==cell.value &amp;&amp; neighbor.chain==null)\n                addToChain(neighbor, chain);\n        }\n    }\n\n    private ArrayList&lt;Cell&gt; getNeighbors(Cell cell)\n    {\n        ArrayList&lt;Cell&gt; cells = new ArrayList&lt;Cell&gt;();\n        addCell(cells, cell.i, cell.j-1);\n        addCell(cells, cell.i-1, cell.j);\n        addCell(cells, cell.i, cell.j+1);\n        addCell(cells, cell.i+1, cell.j);\n        return cells;\n    }\n\n    private void addCell(ArrayList&lt;Cell&gt; cells, int i, int j)\n    {\n        if(i&gt;=0 &amp;&amp; i&lt;N &amp;&amp; j&gt;=0 &amp;&amp; j&lt;M)\n            cells.add(matrix[i][j]);\n    }\n\n    private int getNumberOfCellsWithColor(HashSet&lt;Cell&gt; chain, char color)\n    {\n        int nb = 0;\n        for(Cell cell : chain)\n        {\n            if(cell.color==color)\n                nb++;\n        }\n        return nb;\n    }\n\n    private void changeValues(HashSet&lt;Cell&gt; chain, char color)\n    {\n        for(Cell cell : chain)\n        {\n            if(cell.color==color)\n                cell.value = chooseValue(cell);\n        }\n    }\n\n    private char chooseValue(Cell cell)\n    {\n        HashSet&lt;Character&gt; values = new HashSet&lt;Character&gt;();\n        for(Cell neighbor : getNeighbors(cell))\n            values.add(neighbor.value);\n        if(!values.contains('a'))\n            return 'a';\n        if(!values.contains('b'))\n            return 'b';\n        if(!values.contains('c'))\n            return 'c';\n        if(!values.contains('d'))\n            return 'd';\n        return 'e';\n    }\n\n    private void print()\n    {\n        for(int i=0;i&lt;N;i++)\n        {\n            for(int j=0;j&lt;M;j++)\n                System.out.print(matrix[i][j].value);\n            System.out.println();\n        }\n    }\n\n    public static class Cell\n    {\n        public int i;\n        public int j;\n        public char value;\n        public char color;\n        public HashSet&lt;Cell&gt; chain;\n    }\n}\n</code></pre>\n<p>Test 1:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Test1\n{\n    public static void main(String[] args)\n    {\n        char[][] values = {{'a', 'a'}, {'a', 'b'}};\n        Solver solver = new Solver(values);\n        solver.solve();\n    }\n}\n</code></pre>\n<p>Result:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Initial matrix:\naa\nab\n\n1 change(s) performed:\nba\nab\n</code></pre>\n<p>Test 2:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Test2\n{\n    public static void main(String[] args)\n    {\n        char[][] values = {{'a', 'a', 'a'}, {'a', 'a', 'a'}, {'a', 'a', 'a'}};\n        Solver solver = new Solver(values);\n        solver.solve();\n    }\n}\n</code></pre>\n<p>Result:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Initial matrix:\naaa\naaa\naaa\n\n4 change(s) performed:\naba\nbab\naba\n</code></pre>\n<p>Test 3:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Test3\n{\n    public static void main(String[] args)\n    {\n        char[][] values = {{'a', 'c', 'a', 'a'}, {'d', 'd', 'd', 'd'}, {'b', 'b', 'b', 'b'}, {'c', 'c', 'c', 'e'}};\n        Solver solver = new Solver(values);\n        solver.solve();\n    }\n}\n</code></pre>\n<p>Result:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Initial matrix:\nacaa\ndddd\nbbbb\nccce\n\n6 change(s) performed:\nacab\ncdcd\nbaba\ncbce\n</code></pre>\n<h2>UPDATE</h2>\n<p>Unfortunately I have found a failing test case:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Test4\n{\n    public static void main(String[] args)\n    {\n        char[][] values = {{'a', 'a', 'a', 'a', 'a', 'a'}, {'c', 'a', 'd', 'c', 'a', 'd'}};\n        Solver solver = new Solver(values);\n        solver.solve();\n    }\n}\n</code></pre>\n<p>Result:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Initial matrix:\naaaaaa\ncadcad\n\n4 change(s) performed:\nababab\ncadcbd\n</code></pre>\n<p>It can be done in only 3 changes:</p>\n<pre><code>abcaba\ncadcad\n</code></pre>\n<p>I think that the chain partitioning is the correct first step, but then you need to process every chain in a more clever way than I did...</p>\n"}],"owner":{"account_id":3837342,"reputation":6111,"user_id":3181365,"accept_rate":70,"display_name":"learner"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":226,"favorite_count":0,"down_vote_count":7,"up_vote_count":2,"closed_date":1690985838,"accepted_answer_id":76618054,"answer_count":1,"score":-5,"last_activity_date":1688712589,"creation_date":1688097855,"question_id":76585967,"body_markdown":"Given a matrix of characters from a to z lowercase English characters. Minimum characters to replace so adjacent characters are not the same. Adjacent for a character is right, left, top, and bottom.\r\n\r\n**Example**\r\n\r\n    acaa\r\n    dddd\r\n    bbbb\r\n    ccce\r\n\r\n**Output:** \r\n`6` \r\n\r\n**Explanation:**\r\n\r\n    We may replace some characters to get the final matrix as:\r\n    acac\r\n    dede\r\n    baba\r\n    cece\r\n\r\n    Number of replacements is 6.\r\n\r\nThis is my code that gives the correct minimum replacements.\r\n\r\n    public static int solve(char[][] matrix) {\r\n    \tint m = matrix.length, n = matrix[0].length;\r\n    \tint[][] next = {{0,1}, {0,-1}, {1,0}, {-1,0}};\r\n    \tint result = 0;\r\n    \tSet&lt;String&gt; set = new HashSet&lt;&gt;();\r\n    \tfor(int i=0; i&lt;m; i++) {\r\n    \t\tfor(int j=0; j&lt;n; j++) {\r\n    \t\t\tchar ch = matrix[i][j];\r\n    \t\t\tString k1 = i+&quot;:&quot;+j;\r\n    \t\t\tif(set.contains(k1)) { // check if position is already updated\r\n    \t\t\t\tcontinue;\r\n    \t\t\t}\r\n    \t\t\tfor(int k=0; k&lt;4; k++) {\r\n    \t\t\t\tint x = i + next[k][0] , y = j + next[k][1];\r\n    \t\t\t\tString key = x+&quot;:&quot;+y;\r\n    \t\t\t\tif(x &gt;=0 &amp;&amp; y&gt;=0 &amp;&amp; x&lt;m &amp;&amp; y &lt;n &amp;&amp; !set.contains(key)) {\r\n    \t\t\t\t\tif(matrix[x][y] == ch) {\r\n    \t\t\t\t\t\tresult++;\r\n    \t\t\t\t\t\tset.add(key); // this position is updated\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \treturn result;\r\n    }\r\n\r\nI am able to find the minimum replacements needed in the matrix. But now I want to update matrix. There can be many possibilities, but I want to print one of the possible correct matrix. How can we solve this.","title":"Update matrix to get distinct adjacent characters","body":"<p>Given a matrix of characters from a to z lowercase English characters. Minimum characters to replace so adjacent characters are not the same. Adjacent for a character is right, left, top, and bottom.</p>\n<p><strong>Example</strong></p>\n<pre><code>acaa\ndddd\nbbbb\nccce\n</code></pre>\n<p><strong>Output:</strong>\n<code>6</code></p>\n<p><strong>Explanation:</strong></p>\n<pre><code>We may replace some characters to get the final matrix as:\nacac\ndede\nbaba\ncece\n\nNumber of replacements is 6.\n</code></pre>\n<p>This is my code that gives the correct minimum replacements.</p>\n<pre><code>public static int solve(char[][] matrix) {\n    int m = matrix.length, n = matrix[0].length;\n    int[][] next = {{0,1}, {0,-1}, {1,0}, {-1,0}};\n    int result = 0;\n    Set&lt;String&gt; set = new HashSet&lt;&gt;();\n    for(int i=0; i&lt;m; i++) {\n        for(int j=0; j&lt;n; j++) {\n            char ch = matrix[i][j];\n            String k1 = i+&quot;:&quot;+j;\n            if(set.contains(k1)) { // check if position is already updated\n                continue;\n            }\n            for(int k=0; k&lt;4; k++) {\n                int x = i + next[k][0] , y = j + next[k][1];\n                String key = x+&quot;:&quot;+y;\n                if(x &gt;=0 &amp;&amp; y&gt;=0 &amp;&amp; x&lt;m &amp;&amp; y &lt;n &amp;&amp; !set.contains(key)) {\n                    if(matrix[x][y] == ch) {\n                        result++;\n                        set.add(key); // this position is updated\n                    }\n                }\n            }\n        }\n    }\n    return result;\n}\n</code></pre>\n<p>I am able to find the minimum replacements needed in the matrix. But now I want to update matrix. There can be many possibilities, but I want to print one of the possible correct matrix. How can we solve this.</p>\n"},{"tags":["java","dozer"],"owner":{"account_id":313433,"reputation":640,"user_id":3405398,"accept_rate":56,"display_name":"kaluva"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":7,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1688712067,"creation_date":1688712067,"question_id":76634489,"body_markdown":"I need to convert to `Map&lt;String,String&gt;` to `KeyValuePair[]` using dozer. Despite, multiple efforts i&#39;m unable to do it. Below is what i have:\r\n\r\n    public class EmployeeSource {\r\n    \tprivate String id;\r\n    \tprivate String name;\r\n    \tprivate Map&lt;String, String&gt; kvMap;\r\n       //removed getters and setters for brevity\r\n    ....\r\n    }\r\n\r\n    public class EmployeeTarget {\r\n    \tprivate String id;\r\n    \tprivate String name;\r\n    \tprivate KeyValuePair[] kvMap;\r\n         //removed getters and setters for brevity\r\n    }\r\n\r\nBelow is my `KeyValuePair` class\r\n\r\n    public class KeyValuePair implements Serializable{\r\n    \tprivate String key;\r\n    \tprivate String value;\r\n    \r\n    \tpublic KeyValuePair(){\r\n    \t\tsuper();\r\n    \t}\r\n    \t\r\n    \tpublic KeyValuePair(String key,String value){\r\n    \t\tthis.key=key;\r\n    \t\tthis.value=value;\r\n    \t}\r\n    //removed getters and setters for brevity\r\n    }\r\n\r\nMy Custom Converter:\r\n\r\n    public class MapToKeyValuePairArrayConverter extends DozerConverter&lt;KeyValuePair[],Map&lt;String,String&gt;&gt;{\r\n    \r\n    \t\r\n    \tpublic MapToKeyValuePairArrayConverter(Class&lt;KeyValuePair[]&gt; prototypeA, Class&lt;Map&lt;String, String&gt;&gt; prototypeB) {\r\n    \t//\tsuper(prototypeA, prototypeB); this is not working\r\n    \t\t\r\n    \t\tsuper((Class&lt;KeyValuePair[]&gt;) (Class&lt;?&gt;) KeyValuePair[].class, (Class&lt;Map&lt;String, String&gt;&gt;) (Class&lt;?&gt;) HashMap.class); //no luck\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Map&lt;String, String&gt; convertTo(KeyValuePair[] keyValuePairArray, Map&lt;String, String&gt; map) {\r\n    \t\tSystem.out.println(&quot;***convertTo***&quot;);\r\n    \t\tif(keyValuePairArray == null || keyValuePairArray.length == 0 )\r\n    \t\t\treturn new HashMap&lt;&gt;();\r\n    \t\t\r\n    \t\tmap = new HashMap&lt;&gt;();\r\n    \t\tfor(KeyValuePair keyValuePair : keyValuePairArray) {\r\n    \t\t\tmap.put(keyValuePair.getKey(), keyValuePair.getValue());\r\n    \t\t}\r\n    \t\t\r\n    \t\treturn map;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic KeyValuePair[] convertFrom(Map&lt;String, String&gt; map, KeyValuePair[] keyValuePair) {\r\n    \t\tSystem.out.println(&quot;***convertFrom***&quot;);\r\n    \t\tif (map == null || map.isEmpty())\r\n    \t\t\treturn new KeyValuePair[0];\r\n    \t\tint count = 0;\r\n    \t\tkeyValuePair = new KeyValuePair[map.size()];\r\n    \t\tfor (Entry&lt;String, String&gt; entry : map.entrySet()) {\r\n    \t\t\tif (entry.getValue() != null) {\r\n    \t\t\t\tkeyValuePair[count++] = new KeyValuePair(entry.getKey(), entry.getValue());\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn keyValuePair;\r\n    \t}\r\n    \r\n    \t\r\n    }\r\n\r\nAlways, getting this exception:\r\n\r\n    Exception in thread &quot;main&quot; org.dozer.MappingException: java.lang.InstantiationException: com.dozer.test.MapToKeyValuePairArrayConverter\r\n    \tat org.dozer.util.MappingUtils.throwMappingException(MappingUtils.java:82)\r\n\r\nMy dozer bean mappings xml:\r\n\r\n    &lt;configuration&gt;\r\n    &lt;custom-converters&gt;\r\n     &lt;converter type=&quot;com.dozer.test.MapToKeyValuePairArrayConverter&quot;&gt;\r\n                    &lt;class-a&gt;com.b2b.KeyValuePair[]&lt;/class-a&gt;\r\n                    &lt;class-b&gt;java.util.HashMap&lt;/class-b&gt;\r\n     &lt;/converter&gt;\r\n    &lt;/custom-converters&gt;\r\n    &lt;/configuration&gt;\r\n    \t\r\n    \t\r\n    &lt;mapping&gt;\r\n      &lt;class-a&gt;com.api.EmployeeSource&lt;/class-a&gt;\r\n      &lt;class-b&gt;com.b2b.EmployeeTarget&lt;/class-b&gt;    \r\n       &lt;field custom-converter=&quot;com.dozer.test.MapToKeyValuePairArrayConverter&quot;&gt;\r\n       \t&lt;a&gt;kvMap&lt;/a&gt;\r\n       \t&lt;b&gt;kvMap&lt;/b&gt;\r\n       \t&lt;a-hint&gt;java.util.HashMap&lt;/a-hint&gt;  &lt;!-- tried with and without hints but no luck --&gt;\r\n       \t&lt;b-hint&gt;com.b2b.KeyValuePair[]&lt;/b-hint&gt;\r\n       &lt;/field&gt;\r\n    &lt;/mapping&gt;","title":"Dozer- Map to Object Array conversion failing with custom converter","body":"<p>I need to convert to <code>Map&lt;String,String&gt;</code> to <code>KeyValuePair[]</code> using dozer. Despite, multiple efforts i'm unable to do it. Below is what i have:</p>\n<pre><code>public class EmployeeSource {\n    private String id;\n    private String name;\n    private Map&lt;String, String&gt; kvMap;\n   //removed getters and setters for brevity\n....\n}\n\npublic class EmployeeTarget {\n    private String id;\n    private String name;\n    private KeyValuePair[] kvMap;\n     //removed getters and setters for brevity\n}\n</code></pre>\n<p>Below is my <code>KeyValuePair</code> class</p>\n<pre><code>public class KeyValuePair implements Serializable{\n    private String key;\n    private String value;\n\n    public KeyValuePair(){\n        super();\n    }\n    \n    public KeyValuePair(String key,String value){\n        this.key=key;\n        this.value=value;\n    }\n//removed getters and setters for brevity\n}\n</code></pre>\n<p>My Custom Converter:</p>\n<pre><code>public class MapToKeyValuePairArrayConverter extends DozerConverter&lt;KeyValuePair[],Map&lt;String,String&gt;&gt;{\n\n    \n    public MapToKeyValuePairArrayConverter(Class&lt;KeyValuePair[]&gt; prototypeA, Class&lt;Map&lt;String, String&gt;&gt; prototypeB) {\n    //  super(prototypeA, prototypeB); this is not working\n        \n        super((Class&lt;KeyValuePair[]&gt;) (Class&lt;?&gt;) KeyValuePair[].class, (Class&lt;Map&lt;String, String&gt;&gt;) (Class&lt;?&gt;) HashMap.class); //no luck\n    }\n\n    @Override\n    public Map&lt;String, String&gt; convertTo(KeyValuePair[] keyValuePairArray, Map&lt;String, String&gt; map) {\n        System.out.println(&quot;***convertTo***&quot;);\n        if(keyValuePairArray == null || keyValuePairArray.length == 0 )\n            return new HashMap&lt;&gt;();\n        \n        map = new HashMap&lt;&gt;();\n        for(KeyValuePair keyValuePair : keyValuePairArray) {\n            map.put(keyValuePair.getKey(), keyValuePair.getValue());\n        }\n        \n        return map;\n    }\n\n    @Override\n    public KeyValuePair[] convertFrom(Map&lt;String, String&gt; map, KeyValuePair[] keyValuePair) {\n        System.out.println(&quot;***convertFrom***&quot;);\n        if (map == null || map.isEmpty())\n            return new KeyValuePair[0];\n        int count = 0;\n        keyValuePair = new KeyValuePair[map.size()];\n        for (Entry&lt;String, String&gt; entry : map.entrySet()) {\n            if (entry.getValue() != null) {\n                keyValuePair[count++] = new KeyValuePair(entry.getKey(), entry.getValue());\n            }\n        }\n        return keyValuePair;\n    }\n\n    \n}\n</code></pre>\n<p>Always, getting this exception:</p>\n<pre><code>Exception in thread &quot;main&quot; org.dozer.MappingException: java.lang.InstantiationException: com.dozer.test.MapToKeyValuePairArrayConverter\n    at org.dozer.util.MappingUtils.throwMappingException(MappingUtils.java:82)\n</code></pre>\n<p>My dozer bean mappings xml:</p>\n<pre><code>&lt;configuration&gt;\n&lt;custom-converters&gt;\n &lt;converter type=&quot;com.dozer.test.MapToKeyValuePairArrayConverter&quot;&gt;\n                &lt;class-a&gt;com.b2b.KeyValuePair[]&lt;/class-a&gt;\n                &lt;class-b&gt;java.util.HashMap&lt;/class-b&gt;\n &lt;/converter&gt;\n&lt;/custom-converters&gt;\n&lt;/configuration&gt;\n    \n    \n&lt;mapping&gt;\n  &lt;class-a&gt;com.api.EmployeeSource&lt;/class-a&gt;\n  &lt;class-b&gt;com.b2b.EmployeeTarget&lt;/class-b&gt;    \n   &lt;field custom-converter=&quot;com.dozer.test.MapToKeyValuePairArrayConverter&quot;&gt;\n    &lt;a&gt;kvMap&lt;/a&gt;\n    &lt;b&gt;kvMap&lt;/b&gt;\n    &lt;a-hint&gt;java.util.HashMap&lt;/a-hint&gt;  &lt;!-- tried with and without hints but no luck --&gt;\n    &lt;b-hint&gt;com.b2b.KeyValuePair[]&lt;/b-hint&gt;\n   &lt;/field&gt;\n&lt;/mapping&gt;\n</code></pre>\n"},{"tags":["java","android","flutter","kotlin","native"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1688763750,"post_id":76634462,"comment_id":135122477,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":28967949,"reputation":11,"user_id":22188894,"display_name":"NIMALESH E E0119055"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1688711852,"creation_date":1688711852,"question_id":76634462,"body_markdown":"I have SDK in 2 different lang ie java and kotlin and I am using method channel for both It is working fine when they are implemented individually but I cant run it at same time and I am getting MainActivity Defined multiple times.\r\n\r\n  \r\n\r\nI tried to call kt class in java ","title":"How to use both Java MainActivity and Kotlin MainActivity class in flutter","body":"<p>I have SDK in 2 different lang ie java and kotlin and I am using method channel for both It is working fine when they are implemented individually but I cant run it at same time and I am getting MainActivity Defined multiple times.</p>\n<p>I tried to call kt class in java</p>\n"},{"tags":["java","android","stripe-payments","android-14"],"answers":[{"comments":[{"owner":{"account_id":20256058,"reputation":1,"user_id":14855836,"display_name":"Devarsh Ukani"},"score":0,"creation_date":1688729750,"post_id":76634236,"comment_id":135116392,"body_markdown":"The Stripe Payment sheet which open&#39;s and then it redirects it to the browser. this is done with the Stripe-SDK itself, I didn&#39;t find any ways to externally open link in the webView. is there any workaround for that ?","body":"The Stripe Payment sheet which open&#39;s and then it redirects it to the browser. this is done with the Stripe-SDK itself, I didn&#39;t find any ways to externally open link in the webView. is there any workaround for that ?"}],"tags":[],"owner":{"account_id":24787321,"reputation":31,"user_id":18670471,"display_name":"Nathan Yearout"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688709194,"creation_date":1688709194,"answer_id":76634236,"question_id":76634070,"body_markdown":"You could use a custom webview inside the application so that Stripe isn&#39;t depending on a browser being installed on the device. \r\n\r\nThe next option is to check if there&#39;s a browser installed with &quot;android.intent.action.CHOOSER&quot; and if there isn&#39;t you can prompt the user to install a compatible browser. \r\n\r\nThe last one is more of a last case scenario but you can catch the &quot;ActivityNotFoundException&quot; and then you can display an error message to the user instead of it resulting in a crash. Good luck.","title":"Why Stripe Payment Sheet Crashes in Android 14","body":"<p>You could use a custom webview inside the application so that Stripe isn't depending on a browser being installed on the device.</p>\n<p>The next option is to check if there's a browser installed with &quot;android.intent.action.CHOOSER&quot; and if there isn't you can prompt the user to install a compatible browser.</p>\n<p>The last one is more of a last case scenario but you can catch the &quot;ActivityNotFoundException&quot; and then you can display an error message to the user instead of it resulting in a crash. Good luck.</p>\n"},{"comments":[{"owner":{"account_id":20256058,"reputation":1,"user_id":14855836,"display_name":"Devarsh Ukani"},"score":0,"creation_date":1688735347,"post_id":76634455,"comment_id":135117555,"body_markdown":"That ticket is opened by me only :)","body":"That ticket is opened by me only :)"}],"tags":[],"owner":{"account_id":132746,"reputation":1266,"user_id":333638,"display_name":"qichuan"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688711690,"creation_date":1688711690,"answer_id":76634455,"question_id":76634070,"body_markdown":"A similar [ticket][1] was filed in stripe-android github repo. Can you try the workaround and see if it works?\r\n\r\n\r\n  [1]: https://github.com/stripe/stripe-android/issues/6969","title":"Why Stripe Payment Sheet Crashes in Android 14","body":"<p>A similar <a href=\"https://github.com/stripe/stripe-android/issues/6969\" rel=\"nofollow noreferrer\">ticket</a> was filed in stripe-android github repo. Can you try the workaround and see if it works?</p>\n"}],"owner":{"account_id":20256058,"reputation":1,"user_id":14855836,"display_name":"Devarsh Ukani"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":203,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1688711690,"creation_date":1688706254,"question_id":76634070,"body_markdown":"# Problem\r\n\r\nI was developing an android application in Java in which I have to integrate the Payment module for the user to pay to use the specific service. I was using the Stripe&#39;s payment API for that. I used Stripe&#39;s android-SDK for the implementation of payment sheet which is used to take a payout from the user.\r\n\r\nWhen I press Pay button on the payment sheet after entering the card details, the app crashes in the Android 14 mobile in which I was testing. I tested it with the other android version where it works fine. I think this is the internal Android 14 beta error I am facing.\r\n\r\nI am getting the following error when the App crash\r\n\r\n```\r\nE/AndroidRuntime: FATAL EXCEPTION: main\r\n    Process: com.bigstride.jobportal_company, PID: 9012\r\n    java.lang.RuntimeException: Unable to start activity ComponentInfo{com.bigstride.jobportal_company/com.stripe.android.payments.StripeBrowserLauncherActivity}: android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.CHOOSER (has extras) }\r\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3782)\r\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3922)\r\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:103)\r\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:139)\r\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:96)\r\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2443)\r\n        at android.os.Handler.dispatchMessage(Handler.java:106)\r\n        at android.os.Looper.loopOnce(Looper.java:205)\r\n        at android.os.Looper.loop(Looper.java:294)\r\n        at android.app.ActivityThread.main(ActivityThread.java:8176)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:552)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:971)\r\n     Caused by: android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.CHOOSER (has extras) }\r\n        at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:2239)\r\n        at android.app.Instrumentation.execStartActivity(Instrumentation.java:1878)\r\n        at android.app.Activity.startActivityForResult(Activity.java:5589)\r\n        at androidx.activity.ComponentActivity.startActivityForResult(ComponentActivity.java:728)\r\n        at androidx.core.app.ActivityCompat$Api16Impl.startActivityForResult(ActivityCompat.java:809)\r\n        at androidx.core.app.ActivityCompat.startActivityForResult(ActivityCompat.java:246)\r\n        at androidx.activity.ComponentActivity$2.onLaunch(ComponentActivity.java:243)\r\n        at androidx.activity.result.ActivityResultRegistry$2.launch(ActivityResultRegistry.java:175)\r\n        at androidx.activity.result.ActivityResultLauncher.launch(ActivityResultLauncher.java:47)\r\n        at com.stripe.android.payments.StripeBrowserLauncherActivity.onCreate(StripeBrowserLauncherActivity.kt:56)\r\n        at android.app.Activity.performCreate(Activity.java:8595)\r\n        at android.app.Activity.performCreate(Activity.java:8573)\r\n        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1456)\r\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3764)\r\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3922)&#160;\r\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:103)&#160;\r\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:139)&#160;\r\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:96)&#160;\r\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2443)&#160;\r\n        at android.os.Handler.dispatchMessage(Handler.java:106)&#160;\r\n        at android.os.Looper.loopOnce(Looper.java:205)&#160;\r\n        at android.os.Looper.loop(Looper.java:294)&#160;\r\n        at android.app.ActivityThread.main(ActivityThread.java:8176)&#160;\r\n        at java.lang.reflect.Method.invoke(Native Method)&#160;\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:552)&#160;\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:971)&#160;\r\n\r\n```\r\n\r\nWhat the payment sheet does is that when I press pay button it redirects to a browser link with the hooks.stripe.com link where it process the payment. but in the case of Android 14 the App gets crashed because I think it is not able to open the browser. \r\n\r\nIt would  be great if there is any workaround for this issue.\r\n\r\nany help can be great, thank you\r\n\r\nI expected it to open the browser to process payment but it cashes instead and stops the payment process. I used the official Stripe documentation for the implementation [here](https://stripe.com/docs/payments/accept-a-payment?platform=android&amp;ui=payment-sheet#androidsetup) us the link for the docs","title":"Why Stripe Payment Sheet Crashes in Android 14","body":"<h1>Problem</h1>\n<p>I was developing an android application in Java in which I have to integrate the Payment module for the user to pay to use the specific service. I was using the Stripe's payment API for that. I used Stripe's android-SDK for the implementation of payment sheet which is used to take a payout from the user.</p>\n<p>When I press Pay button on the payment sheet after entering the card details, the app crashes in the Android 14 mobile in which I was testing. I tested it with the other android version where it works fine. I think this is the internal Android 14 beta error I am facing.</p>\n<p>I am getting the following error when the App crash</p>\n<pre><code>E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.bigstride.jobportal_company, PID: 9012\n    java.lang.RuntimeException: Unable to start activity ComponentInfo{com.bigstride.jobportal_company/com.stripe.android.payments.StripeBrowserLauncherActivity}: android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.CHOOSER (has extras) }\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3782)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3922)\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:103)\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:139)\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:96)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2443)\n        at android.os.Handler.dispatchMessage(Handler.java:106)\n        at android.os.Looper.loopOnce(Looper.java:205)\n        at android.os.Looper.loop(Looper.java:294)\n        at android.app.ActivityThread.main(ActivityThread.java:8176)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:552)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:971)\n     Caused by: android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.CHOOSER (has extras) }\n        at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:2239)\n        at android.app.Instrumentation.execStartActivity(Instrumentation.java:1878)\n        at android.app.Activity.startActivityForResult(Activity.java:5589)\n        at androidx.activity.ComponentActivity.startActivityForResult(ComponentActivity.java:728)\n        at androidx.core.app.ActivityCompat$Api16Impl.startActivityForResult(ActivityCompat.java:809)\n        at androidx.core.app.ActivityCompat.startActivityForResult(ActivityCompat.java:246)\n        at androidx.activity.ComponentActivity$2.onLaunch(ComponentActivity.java:243)\n        at androidx.activity.result.ActivityResultRegistry$2.launch(ActivityResultRegistry.java:175)\n        at androidx.activity.result.ActivityResultLauncher.launch(ActivityResultLauncher.java:47)\n        at com.stripe.android.payments.StripeBrowserLauncherActivity.onCreate(StripeBrowserLauncherActivity.kt:56)\n        at android.app.Activity.performCreate(Activity.java:8595)\n        at android.app.Activity.performCreate(Activity.java:8573)\n        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1456)\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3764)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3922)\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:103)\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:139)\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:96)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2443)\n        at android.os.Handler.dispatchMessage(Handler.java:106)\n        at android.os.Looper.loopOnce(Looper.java:205)\n        at android.os.Looper.loop(Looper.java:294)\n        at android.app.ActivityThread.main(ActivityThread.java:8176)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:552)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:971)\n\n</code></pre>\n<p>What the payment sheet does is that when I press pay button it redirects to a browser link with the hooks.stripe.com link where it process the payment. but in the case of Android 14 the App gets crashed because I think it is not able to open the browser.</p>\n<p>It would  be great if there is any workaround for this issue.</p>\n<p>any help can be great, thank you</p>\n<p>I expected it to open the browser to process payment but it cashes instead and stops the payment process. I used the official Stripe documentation for the implementation <a href=\"https://stripe.com/docs/payments/accept-a-payment?platform=android&amp;ui=payment-sheet#androidsetup\" rel=\"nofollow noreferrer\">here</a> us the link for the docs</p>\n"},{"tags":["java","hibernate","quarkus"],"answers":[{"tags":[],"owner":{"account_id":8974783,"reputation":9445,"user_id":6692043,"display_name":"yrodiere"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1688711464,"creation_date":1688711464,"answer_id":76634429,"question_id":76631693,"body_markdown":"Just extend `org.hibernate.dialect.H2Dialect`.\r\n\r\nOr, better, register your function through a custom `MetadataBuilderContributor`:\r\n\r\n```properties\r\nquarkus.hibernate-orm.metadata-builder-contributor=com.acme.MyMetadataBuilderConstributor\r\n```\r\n\r\n```java\r\npublic class CustomMetadataBuilderContributor implements  org.hibernate.boot.spi.MetadataBuilderContributor,\r\n        FunctionContributor {\r\n\r\n    @Override\r\n    public void contribute(MetadataBuilder metadataBuilder) {\r\n        metadataBuilder.applyFunctions(this);\r\n    }\r\n\r\n    @Override\r\n    public void contributeFunctions(FunctionContributions functionContributions) {\r\n        TypeConfiguration typeConfiguration = functionContributions.getTypeConfiguration();\r\n        functionContributions.getFunctionRegistry().register(\r\n                &quot;myFunction&quot;,\r\n                new MyFunction(...));\r\n    }\r\n\r\n    private static final class MyFunction implements SQLFunction {\r\n        ...\r\n    }\r\n}\r\n```\r\n\r\nRelated: https://github.com/quarkusio/quarkus/issues/32936\r\n","title":"Hibernate 6 QuarkusH2Dialect registerFunction removed","body":"<p>Just extend <code>org.hibernate.dialect.H2Dialect</code>.</p>\n<p>Or, better, register your function through a custom <code>MetadataBuilderContributor</code>:</p>\n<pre><code>quarkus.hibernate-orm.metadata-builder-contributor=com.acme.MyMetadataBuilderConstributor\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class CustomMetadataBuilderContributor implements  org.hibernate.boot.spi.MetadataBuilderContributor,\n        FunctionContributor {\n\n    @Override\n    public void contribute(MetadataBuilder metadataBuilder) {\n        metadataBuilder.applyFunctions(this);\n    }\n\n    @Override\n    public void contributeFunctions(FunctionContributions functionContributions) {\n        TypeConfiguration typeConfiguration = functionContributions.getTypeConfiguration();\n        functionContributions.getFunctionRegistry().register(\n                &quot;myFunction&quot;,\n                new MyFunction(...));\n    }\n\n    private static final class MyFunction implements SQLFunction {\n        ...\n    }\n}\n</code></pre>\n<p>Related: <a href=\"https://github.com/quarkusio/quarkus/issues/32936\" rel=\"nofollow noreferrer\">https://github.com/quarkusio/quarkus/issues/32936</a></p>\n"}],"owner":{"account_id":334125,"reputation":655,"user_id":660362,"accept_rate":52,"display_name":"Andry"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":162,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1688711464,"creation_date":1688668804,"question_id":76631693,"body_markdown":"Im using Quarkus and Hibernate. There is a custom class which extends QuarkusH2Dialect. But after migration to Hibernate 6 it doesnt work anymore. It&#39;s been removed. Could you please provide some pieces of advice, how to fix it? \r\n\r\n```\r\nimport io.quarkus.hibernate.orm.runtime.dialect.QuarkusH2Dialect\r\nimport org.hibernate.dialect.function.SQLFunction\r\nimport org.hibernate.engine.spi.Mapping\r\nimport org.hibernate.engine.spi.SessionFactoryImplementor\r\nimport org.hibernate.type.StringType\r\nimport org.hibernate.type.Type\r\n\r\nclass MyDialect : QuarkusH2Dialect() {\r\n\r\n    init {\r\n        registerFunction(\r\n            &quot;calculate_hash&quot;,\r\n            object : SQLFunction {\r\n                override fun hasArguments() = true\r\n                override fun hasParenthesesIfNoArguments() = false\r\n                override fun getReturnType(firstArgumentType: Type?, mapping: Mapping?) = StringType.INSTANCE\r\n                override fun render(firstArgumentType: Type?, arguments: List&lt;Any?&gt;?, factory: SessionFactoryImplementor?) =\r\n                    &quot;hash(&#39;calculate_hash&#39;, ${arguments?.first()})&quot;\r\n            }\r\n        )\r\n    }\r\n}\r\n```","title":"Hibernate 6 QuarkusH2Dialect registerFunction removed","body":"<p>Im using Quarkus and Hibernate. There is a custom class which extends QuarkusH2Dialect. But after migration to Hibernate 6 it doesnt work anymore. It's been removed. Could you please provide some pieces of advice, how to fix it?</p>\n<pre><code>import io.quarkus.hibernate.orm.runtime.dialect.QuarkusH2Dialect\nimport org.hibernate.dialect.function.SQLFunction\nimport org.hibernate.engine.spi.Mapping\nimport org.hibernate.engine.spi.SessionFactoryImplementor\nimport org.hibernate.type.StringType\nimport org.hibernate.type.Type\n\nclass MyDialect : QuarkusH2Dialect() {\n\n    init {\n        registerFunction(\n            &quot;calculate_hash&quot;,\n            object : SQLFunction {\n                override fun hasArguments() = true\n                override fun hasParenthesesIfNoArguments() = false\n                override fun getReturnType(firstArgumentType: Type?, mapping: Mapping?) = StringType.INSTANCE\n                override fun render(firstArgumentType: Type?, arguments: List&lt;Any?&gt;?, factory: SessionFactoryImplementor?) =\n                    &quot;hash('calculate_hash', ${arguments?.first()})&quot;\n            }\n        )\n    }\n}\n</code></pre>\n"},{"tags":["java","xml","nodes"],"comments":[{"owner":{"account_id":7226350,"reputation":4371,"user_id":5514765,"accept_rate":100,"display_name":"ParkerHalo"},"score":1,"creation_date":1447770638,"post_id":33759441,"comment_id":55286400,"body_markdown":"You could use [DOM](https://docs.oracle.com/javase/tutorial/jaxp/dom/readingXML.html) for iterating through and altering the nodes!","body":"You could use <a href=\"https://docs.oracle.com/javase/tutorial/jaxp/dom/readingXML.html\" rel=\"nofollow noreferrer\">DOM</a> for iterating through and altering the nodes!"},{"owner":{"account_id":4629453,"reputation":1655,"user_id":3752374,"accept_rate":50,"display_name":"dguay"},"score":0,"creation_date":1447770712,"post_id":33759441,"comment_id":55286453,"body_markdown":"Possible duplicate of [Remove XML Node using java parser](http://stackoverflow.com/questions/3717215/remove-xml-node-using-java-parser)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/3717215/remove-xml-node-using-java-parser\">Remove XML Node using java parser</a>"},{"owner":{"account_id":5466572,"reputation":169,"user_id":4347233,"accept_rate":82,"display_name":"Mark Mamdouh"},"score":0,"creation_date":1447770797,"post_id":33759441,"comment_id":55286514,"body_markdown":"yes , but what edits to do to help me?@dguay","body":"yes , but what edits to do to help me?@dguay"},{"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"score":0,"creation_date":1447771208,"post_id":33759441,"comment_id":55286798,"body_markdown":"So, if you didn&#39;t understand the code, did you read about XPath? Did you try to look up the documentation of the various classes used in that code?","body":"So, if you didn&#39;t understand the code, did you read about XPath? Did you try to look up the documentation of the various classes used in that code?"}],"answers":[{"tags":[],"owner":{"account_id":7226350,"reputation":4371,"user_id":5514765,"accept_rate":100,"display_name":"ParkerHalo"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1447771529,"creation_date":1447771529,"answer_id":33759808,"question_id":33759441,"body_markdown":"This code snippet should do what you want to. If you just want to remove the row3 element from your tree you don&#39;t have to use (and understand) the overmighty XPATH!\r\n\r\n    // -------------- building the document out of the file  -----------------\r\n    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();\r\n    Document document = dbf.newDocumentBuilder().parse(new File(&quot;input.xml&quot;));\r\n    //------------------------------------------------------------------------\r\n\r\n    // -------------- finding the right node and removing it -----------------\r\n    Element table = document.getDocumentElement();\r\n    Node row3 = table.getElementsByTagName(&quot;row3&quot;).item(0);\r\n    table.removeChild(row3);\r\n    //------------------------------------------------------------------------\r\n    \r\n    // -------------- printing the resulting tree to the console -------------\r\n    TransformerFactory tf = TransformerFactory.newInstance();\r\n    Transformer t = tf.newTransformer();\r\n    t.transform(new DOMSource(document), new StreamResult(System.out));\r\n    //------------------------------------------------------------------------","title":"Delete a node and its elements from an XML file in java","body":"<p>This code snippet should do what you want to. If you just want to remove the row3 element from your tree you don't have to use (and understand) the overmighty XPATH!</p>\n\n<pre><code>// -------------- building the document out of the file  -----------------\nDocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();\nDocument document = dbf.newDocumentBuilder().parse(new File(\"input.xml\"));\n//------------------------------------------------------------------------\n\n// -------------- finding the right node and removing it -----------------\nElement table = document.getDocumentElement();\nNode row3 = table.getElementsByTagName(\"row3\").item(0);\ntable.removeChild(row3);\n//------------------------------------------------------------------------\n\n// -------------- printing the resulting tree to the console -------------\nTransformerFactory tf = TransformerFactory.newInstance();\nTransformer t = tf.newTransformer();\nt.transform(new DOMSource(document), new StreamResult(System.out));\n//------------------------------------------------------------------------\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9555707,"reputation":3,"user_id":7098249,"display_name":"slow_learner"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688711191,"creation_date":1688453845,"answer_id":76610030,"question_id":33759441,"body_markdown":"This code will remove multiple nodes at a time and multiple occurrences of the selected node.\r\n\r\n    for (String nodeToBeRemoved : nodesToBeRemoved) {\r\n        NodeList allNodeList = doc.getElementsByTagName(nodeToBeRemoved);\r\n        removeSelectedNode(allNodeList);\r\n      }\r\n\r\n      private static void removeSelectedNode(NodeList allNodeList) {\r\n    allNodeList.item(0).getParentNode().removeChild(allNodeList.item(0));\r\n    if(allNodeList.getLength()&gt;0)\r\n      removeSelectedNode(allNodeList);\r\n    }\r\n\r\n","title":"Delete a node and its elements from an XML file in java","body":"<p>This code will remove multiple nodes at a time and multiple occurrences of the selected node.</p>\n<pre><code>for (String nodeToBeRemoved : nodesToBeRemoved) {\n    NodeList allNodeList = doc.getElementsByTagName(nodeToBeRemoved);\n    removeSelectedNode(allNodeList);\n  }\n\n  private static void removeSelectedNode(NodeList allNodeList) {\nallNodeList.item(0).getParentNode().removeChild(allNodeList.item(0));\nif(allNodeList.getLength()&gt;0)\n  removeSelectedNode(allNodeList);\n}\n</code></pre>\n"}],"owner":{"account_id":5466572,"reputation":169,"user_id":4347233,"accept_rate":82,"display_name":"Mark Mamdouh"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7193,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":33759808,"answer_count":2,"score":2,"last_activity_date":1688711191,"creation_date":1447770542,"question_id":33759441,"body_markdown":"i have the following xml :\r\n\r\n    &lt;table1&gt;\r\n        &lt;row0&gt;\r\n            &lt;column1&gt;String&lt;/column1&gt;\r\n            &lt;column2&gt;int&lt;/column2&gt;\r\n        &lt;/row0&gt;\r\n\r\n        &lt;row1&gt;\r\n            &lt;column1&gt;aa&lt;/column1&gt;\r\n            &lt;column2&gt;65432&lt;/column2&gt;\r\n        &lt;/row1&gt;\r\n\r\n        &lt;row2&gt;\r\n            &lt;column1&gt;ww&lt;/column1&gt;\r\n            &lt;column2&gt;1111&lt;/column2&gt;\r\n        &lt;/row2&gt;\r\n\r\n        &lt;row3&gt;\r\n            &lt;column1&gt;fff&lt;/column1&gt;\r\n            &lt;column2&gt;333&lt;/column2&gt;\r\n        &lt;/row3&gt;\r\n\r\n        &lt;row4&gt;\r\n            &lt;column1&gt;jj&lt;/column1&gt;\r\n            &lt;column2&gt;2&lt;/column2&gt;\r\n        &lt;/row4&gt;\r\n    &lt;/table1&gt;\r\nand i want to delete the node row3 and its elements. I am writing that XML file in java.how to do that?\r\ni saw this code in another post but couldn&#39;t understand it\r\n\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();\r\n        Document document = dbf.newDocumentBuilder().parse(new File(&quot;input.xml&quot;));\r\n\r\n        XPathFactory xpf = XPathFactory.newInstance();\r\n        XPath xpath = xpf.newXPath();\r\n        XPathExpression expression = xpath.compile(&quot;//A/B[C/E/text()=13]&quot;);\r\n\r\n        Node b13Node = (Node) expression.evaluate(document, XPathConstants.NODE);\r\n        b13Node.getParentNode().removeChild(b13Node);\r\n\r\n        TransformerFactory tf = TransformerFactory.newInstance();\r\n        Transformer t = tf.newTransformer();\r\n        t.transform(new DOMSource(document), new StreamResult(System.out));\r\n    }\r\n\r\n","title":"Delete a node and its elements from an XML file in java","body":"<p>i have the following xml :</p>\n\n<pre><code>&lt;table1&gt;\n    &lt;row0&gt;\n        &lt;column1&gt;String&lt;/column1&gt;\n        &lt;column2&gt;int&lt;/column2&gt;\n    &lt;/row0&gt;\n\n    &lt;row1&gt;\n        &lt;column1&gt;aa&lt;/column1&gt;\n        &lt;column2&gt;65432&lt;/column2&gt;\n    &lt;/row1&gt;\n\n    &lt;row2&gt;\n        &lt;column1&gt;ww&lt;/column1&gt;\n        &lt;column2&gt;1111&lt;/column2&gt;\n    &lt;/row2&gt;\n\n    &lt;row3&gt;\n        &lt;column1&gt;fff&lt;/column1&gt;\n        &lt;column2&gt;333&lt;/column2&gt;\n    &lt;/row3&gt;\n\n    &lt;row4&gt;\n        &lt;column1&gt;jj&lt;/column1&gt;\n        &lt;column2&gt;2&lt;/column2&gt;\n    &lt;/row4&gt;\n&lt;/table1&gt;\n</code></pre>\n\n<p>and i want to delete the node row3 and its elements. I am writing that XML file in java.how to do that?\ni saw this code in another post but couldn't understand it</p>\n\n<pre><code>public static void main(String[] args) throws Exception {\n    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();\n    Document document = dbf.newDocumentBuilder().parse(new File(\"input.xml\"));\n\n    XPathFactory xpf = XPathFactory.newInstance();\n    XPath xpath = xpf.newXPath();\n    XPathExpression expression = xpath.compile(\"//A/B[C/E/text()=13]\");\n\n    Node b13Node = (Node) expression.evaluate(document, XPathConstants.NODE);\n    b13Node.getParentNode().removeChild(b13Node);\n\n    TransformerFactory tf = TransformerFactory.newInstance();\n    Transformer t = tf.newTransformer();\n    t.transform(new DOMSource(document), new StreamResult(System.out));\n}\n</code></pre>\n"},{"tags":["java","compiler-errors","static-methods","inner-classes","illegalstateexception"],"comments":[{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1688710992,"post_id":76634359,"comment_id":135113002,"body_markdown":"The class `Solution` should not be nested inside of `Result`. Fix the formatting and you&#39;ll see.","body":"The class <code>Solution</code> should not be nested inside of <code>Result</code>. Fix the formatting and you&#39;ll see."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1688711148,"post_id":76634359,"comment_id":135113023,"body_markdown":"Given the indentation, you seem to want `Solution` to be a top-level class, but due to a misplaced `}` it isn&#39;t.","body":"Given the indentation, you seem to want <code>Solution</code> to be a top-level class, but due to a misplaced <code>}</code> it isn&#39;t."}],"answers":[{"tags":[],"owner":{"account_id":2067336,"reputation":2848,"user_id":1842599,"display_name":"Andrej Istomin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1688711009,"creation_date":1688711009,"answer_id":76634390,"question_id":76634359,"body_markdown":"The problem is that you declare `public static void main(String[] args)` in the inner `Solution` class. It was not allowed before Java 16. \r\nThe possible solutions:\r\n1. Use Java 16+\r\n2. Restructure your code, so this `Solution` class will be a top-level class and the `Result` is an inner class or even just separated top-level class as well.","title":"( modifier &#39;static&#39; is only allowed in constant variable declarations ) compilation error","body":"<p>The problem is that you declare <code>public static void main(String[] args)</code> in the inner <code>Solution</code> class. It was not allowed before Java 16.\nThe possible solutions:</p>\n<ol>\n<li>Use Java 16+</li>\n<li>Restructure your code, so this <code>Solution</code> class will be a top-level class and the <code>Result</code> is an inner class or even just separated top-level class as well.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688711017,"creation_date":1688711017,"answer_id":76634391,"question_id":76634359,"body_markdown":"Three problems. You need to close the class `Result` before you can start `Solution`. You should be using `if (s.charAt(temp) == s.charAt(getLength)) {` instead of `if (s.charAt(0) == s.charAt(getLength)) {` and then you have an extra closing brace after `Solution`.\r\n\r\n    class Result {\r\n    \tpublic static String isBalanced(String s) {\r\n    \t\tint getLength = s.length() - 1;\r\n    \t\tint temp = 0;\r\n    \t\twhile (temp &lt; s.length() / 2) {\r\n    \t\t\tif (s.charAt(temp) == s.charAt(getLength)) {\r\n    \t\t\t\ttemp++;\r\n    \t\t\t\tgetLength--;\r\n    \t\t\t} else {\r\n    \t\t\t\treturn &quot;NO&quot;;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn &quot;YES&quot;;\r\n    \t}\r\n    }","title":"( modifier &#39;static&#39; is only allowed in constant variable declarations ) compilation error","body":"<p>Three problems. You need to close the class <code>Result</code> before you can start <code>Solution</code>. You should be using <code>if (s.charAt(temp) == s.charAt(getLength)) {</code> instead of <code>if (s.charAt(0) == s.charAt(getLength)) {</code> and then you have an extra closing brace after <code>Solution</code>.</p>\n<pre><code>class Result {\n    public static String isBalanced(String s) {\n        int getLength = s.length() - 1;\n        int temp = 0;\n        while (temp &lt; s.length() / 2) {\n            if (s.charAt(temp) == s.charAt(getLength)) {\n                temp++;\n                getLength--;\n            } else {\n                return &quot;NO&quot;;\n            }\n        }\n        return &quot;YES&quot;;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":25994097,"reputation":11,"user_id":19705782,"display_name":"HarshSinha_7"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1688711017,"creation_date":1688710652,"question_id":76634359,"body_markdown":"```\r\nimport java.io.*;\r\nimport java.math.*;\r\nimport java.security.*;\r\nimport java.text.*;\r\nimport java.util.*;\r\nimport java.util.concurrent.*;\r\nimport java.util.function.*;\r\nimport java.util.regex.*;\r\nimport java.util.stream.*;\r\nimport static java.util.stream.Collectors.joining;\r\nimport static java.util.stream.Collectors.toList;\r\n\r\nclass Result {\r\n    /*\r\n     * Complete the &#39;isBalanced&#39; function below.\r\n     *\r\n     * The function is expected to return a STRING.\r\n     * The function accepts STRING s as parameter.\r\n     */\r\n\r\n    public static String isBalanced(String s) {\r\n    int getLength=s.length()-1;\r\n    int temp=0;\r\n    while(temp&lt;s.length()/2){\r\n        if(s.charAt(0)==s.charAt(getLength)){\r\n            temp++;\r\n            getLength--;   \r\n            }\r\n        else{\r\n            return &quot;NO&quot;;\r\n            }\r\n        }\r\n        return &quot;YES&quot;;\r\n    }   \r\n\r\npublic class Solution {\r\n    public static void main(String[] args) throws Exception {\r\n        BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(System.in));\r\n        BufferedWriter bufferedWriter = new BufferedWriter(new FileWriter(System.getenv(&quot;OUTPUT_PATH&quot;)));\r\n\r\n        int t = Integer.parseInt(bufferedReader.readLine().trim());\r\n\r\n        IntStream.range(0, t).forEach(tItr -&gt; {\r\n            try {\r\n                String s = bufferedReader.readLine();\r\n\r\n                String result = Result.isBalanced(s);\r\n\r\n                bufferedWriter.write(result);\r\n                bufferedWriter.newLine();\r\n            } catch (IOException ex) {\r\n                throw new RuntimeException(ex);\r\n            }\r\n        });\r\n\r\n        bufferedReader.close();\r\n        bufferedWriter.close();\r\n      }\r\n    }\r\n}\r\n\r\n```\r\nWhenever solving a question in HackerRank and there is static declaration in the function it is giving me \r\n\r\n( Solution.java:37: error: Illegal static declaration in inner class Result.Solution\r\n    public static void main(String[] args) throws Exception {\r\n                       ^\r\n  modifier &#39;static&#39; is only allowed in constant variable declarations compilation )\r\nerror................\r\n\r\n\r\nI don&#39;t have much idea since i&#39;m a begginer\r\n","title":"( modifier &#39;static&#39; is only allowed in constant variable declarations ) compilation error","body":"<pre><code>import java.io.*;\nimport java.math.*;\nimport java.security.*;\nimport java.text.*;\nimport java.util.*;\nimport java.util.concurrent.*;\nimport java.util.function.*;\nimport java.util.regex.*;\nimport java.util.stream.*;\nimport static java.util.stream.Collectors.joining;\nimport static java.util.stream.Collectors.toList;\n\nclass Result {\n    /*\n     * Complete the 'isBalanced' function below.\n     *\n     * The function is expected to return a STRING.\n     * The function accepts STRING s as parameter.\n     */\n\n    public static String isBalanced(String s) {\n    int getLength=s.length()-1;\n    int temp=0;\n    while(temp&lt;s.length()/2){\n        if(s.charAt(0)==s.charAt(getLength)){\n            temp++;\n            getLength--;   \n            }\n        else{\n            return &quot;NO&quot;;\n            }\n        }\n        return &quot;YES&quot;;\n    }   \n\npublic class Solution {\n    public static void main(String[] args) throws Exception {\n        BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(System.in));\n        BufferedWriter bufferedWriter = new BufferedWriter(new FileWriter(System.getenv(&quot;OUTPUT_PATH&quot;)));\n\n        int t = Integer.parseInt(bufferedReader.readLine().trim());\n\n        IntStream.range(0, t).forEach(tItr -&gt; {\n            try {\n                String s = bufferedReader.readLine();\n\n                String result = Result.isBalanced(s);\n\n                bufferedWriter.write(result);\n                bufferedWriter.newLine();\n            } catch (IOException ex) {\n                throw new RuntimeException(ex);\n            }\n        });\n\n        bufferedReader.close();\n        bufferedWriter.close();\n      }\n    }\n}\n\n</code></pre>\n<p>Whenever solving a question in HackerRank and there is static declaration in the function it is giving me</p>\n<p>( Solution.java:37: error: Illegal static declaration in inner class Result.Solution\npublic static void main(String[] args) throws Exception {\n^\nmodifier 'static' is only allowed in constant variable declarations compilation )\nerror................</p>\n<p>I don't have much idea since i'm a begginer</p>\n"},{"tags":["java","multithreading","memory-leaks","bufferedreader","freeze"],"comments":[{"owner":{"account_id":1382751,"reputation":4828,"user_id":1315419,"accept_rate":44,"display_name":"Vasan"},"score":0,"creation_date":1523660086,"post_id":49825866,"comment_id":86667963,"body_markdown":"How are you killing the process exactly? [Process#destroy()](http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/jdk8-b132/src/solaris/classes/java/lang/UNIXProcess.java.linux#l295) and its sibling destroyForcibly seem to clean up the streams too. People have had more [success](https://stackoverflow.com/questions/36958447/java-stop-process-and-close-streams) with it in a similar situation.","body":"How are you killing the process exactly? <a href=\"http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/jdk8-b132/src/solaris/classes/java/lang/UNIXProcess.java.linux#l295\" rel=\"nofollow noreferrer\">Process#destroy()</a> and its sibling destroyForcibly seem to clean up the streams too. People have had more <a href=\"https://stackoverflow.com/questions/36958447/java-stop-process-and-close-streams\">success</a> with it in a similar situation."},{"owner":{"account_id":152786,"reputation":5621,"user_id":367544,"accept_rate":77,"display_name":"Dasmowenator"},"score":0,"creation_date":1523664318,"post_id":49825866,"comment_id":86668816,"body_markdown":"Well I tried to simplify this in the post, but if you want more details, the process we&#39;re running is actually ffmpeg, and ffmpeg spins off all sorts of subprocesses. When ffmpeg hangs, we originally just tried destroy() and destroyForcibly() as you said, but it turns out those methods didn&#39;t destroy the subprocesses, so we had to write a subroutine which uses &quot;ps&quot; to list PIDs and subprocesses, then goes through and does &quot;kill -9&quot; on every process and subprocess in the process tree.","body":"Well I tried to simplify this in the post, but if you want more details, the process we&#39;re running is actually ffmpeg, and ffmpeg spins off all sorts of subprocesses. When ffmpeg hangs, we originally just tried destroy() and destroyForcibly() as you said, but it turns out those methods didn&#39;t destroy the subprocesses, so we had to write a subroutine which uses &quot;ps&quot; to list PIDs and subprocesses, then goes through and does &quot;kill -9&quot; on every process and subprocess in the process tree."}],"answers":[{"tags":[],"owner":{"account_id":152786,"reputation":5621,"user_id":367544,"accept_rate":77,"display_name":"Dasmowenator"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1523658193,"creation_date":1523658193,"answer_id":49825867,"question_id":49825866,"body_markdown":"The underlying issue here is with multi-threading and synchronization locks.  When you call &lt;code&gt;timeLimiter.callWithTimeout&lt;/code&gt; it&#39;s creating another thread in a thread pool to actually do the &lt;code&gt;readLine()&lt;/code&gt;.  When the call times out, the main thread tries to call &lt;code&gt;close()&lt;/code&gt;, but unfortunately the &lt;code&gt;readLine()&lt;/code&gt; and &lt;code&gt;close()&lt;/code&gt; methods in the BufferedReader use the same synchronization lock object, so since another thread already has the lock, this call will block until the other thread relinquishes it. But if the &lt;code&gt;readLine()&lt;/code&gt; call never returns, then the &lt;code&gt;close()&lt;/code&gt; call will hang forever.  Here&#39;s a snip-it of the BufferedReader source code:\r\n\r\n    String readLine(boolean ignoreLF) throws IOException {\r\n        StringBuffer s = null;\r\n        int startChar;\r\n\r\n        synchronized (lock) {\r\n            ensureOpen();\r\n            boolean omitLF = ignoreLF || skipLF;\r\n            ...\r\n            ...\r\n            ...\r\n        }\r\n    }\r\n    \r\n    public void close() throws IOException {\r\n        synchronized (lock) {\r\n            if (in == null)\r\n                return;\r\n            try {\r\n                in.close();\r\n            } finally {\r\n                in = null;\r\n                cb = null;\r\n            }\r\n        }\r\n    }\r\n\r\nOf course, the TimeLimiter will try to interrupt the thread which is doing the &lt;code&gt;readLine()&lt;/code&gt;, so that thread should really exit and let the thread trying to call &lt;code&gt;close()&lt;/code&gt; go through.  The real bug here is that the thread interruption isn&#39;t being respected by BufferedReader.  In fact, there is already a bug reported in the JDK tracker about this very thing, but it&#39;s marked as &quot;won&#39;t fix&quot; for some reason: https://bugs.openjdk.java.net/browse/JDK-4859836\r\n\r\nAlthough, to be fair, it&#39;s not really BufferedReader&#39;s responsibility to honor the thread interrupt.  BufferedReader is just a buffer class, all calls to its &lt;code&gt;read()&lt;/code&gt; or &lt;code&gt;readLine()&lt;/code&gt; methods just read data from the underlying input stream.  In this case, the underlying class is an InputStreamReader, which if you look at its source code, creates a StreamDecoder under the hood to do all of its read operations.  Really, the bug is with StreamDecoder -- it should honor thread interrupts, but it doesn&#39;t.\r\n\r\nWhat to do about it?  Well for better or for worse, there&#39;s no way to force an object to give up its thread lock.  Since StreamDecoder is obviously not code that we own or can edit, there&#39;s not much we can do.  My current solution was just to remove the part where we call &lt;code&gt;close()&lt;/code&gt; on the BufferedReader, so now at least the program doesn&#39;t hang forever. But it&#39;s still a memory leak... that thread which is running &lt;code&gt;readLine()&lt;/code&gt; in the TimeLimiter&#39;s thread pool will essentially run forever.  Since this is all part of a long-running program which processes a lot of data over time, eventually that thread pool will fill up with junk threads and the JVM will crash...\r\n\r\nIf anyone has any other advice for how to work around this, please let me know.","title":"Java: BufferedReader hangs forever on close() and StreamDecoder doesn&#39;t respect thread interrupt","body":"<p>The underlying issue here is with multi-threading and synchronization locks.  When you call <code>timeLimiter.callWithTimeout</code> it's creating another thread in a thread pool to actually do the <code>readLine()</code>.  When the call times out, the main thread tries to call <code>close()</code>, but unfortunately the <code>readLine()</code> and <code>close()</code> methods in the BufferedReader use the same synchronization lock object, so since another thread already has the lock, this call will block until the other thread relinquishes it. But if the <code>readLine()</code> call never returns, then the <code>close()</code> call will hang forever.  Here's a snip-it of the BufferedReader source code:</p>\n\n<pre><code>String readLine(boolean ignoreLF) throws IOException {\n    StringBuffer s = null;\n    int startChar;\n\n    synchronized (lock) {\n        ensureOpen();\n        boolean omitLF = ignoreLF || skipLF;\n        ...\n        ...\n        ...\n    }\n}\n\npublic void close() throws IOException {\n    synchronized (lock) {\n        if (in == null)\n            return;\n        try {\n            in.close();\n        } finally {\n            in = null;\n            cb = null;\n        }\n    }\n}\n</code></pre>\n\n<p>Of course, the TimeLimiter will try to interrupt the thread which is doing the <code>readLine()</code>, so that thread should really exit and let the thread trying to call <code>close()</code> go through.  The real bug here is that the thread interruption isn't being respected by BufferedReader.  In fact, there is already a bug reported in the JDK tracker about this very thing, but it's marked as \"won't fix\" for some reason: <a href=\"https://bugs.openjdk.java.net/browse/JDK-4859836\" rel=\"nofollow noreferrer\">https://bugs.openjdk.java.net/browse/JDK-4859836</a></p>\n\n<p>Although, to be fair, it's not really BufferedReader's responsibility to honor the thread interrupt.  BufferedReader is just a buffer class, all calls to its <code>read()</code> or <code>readLine()</code> methods just read data from the underlying input stream.  In this case, the underlying class is an InputStreamReader, which if you look at its source code, creates a StreamDecoder under the hood to do all of its read operations.  Really, the bug is with StreamDecoder -- it should honor thread interrupts, but it doesn't.</p>\n\n<p>What to do about it?  Well for better or for worse, there's no way to force an object to give up its thread lock.  Since StreamDecoder is obviously not code that we own or can edit, there's not much we can do.  My current solution was just to remove the part where we call <code>close()</code> on the BufferedReader, so now at least the program doesn't hang forever. But it's still a memory leak... that thread which is running <code>readLine()</code> in the TimeLimiter's thread pool will essentially run forever.  Since this is all part of a long-running program which processes a lot of data over time, eventually that thread pool will fill up with junk threads and the JVM will crash...</p>\n\n<p>If anyone has any other advice for how to work around this, please let me know.</p>\n"},{"comments":[{"owner":{"account_id":152786,"reputation":5621,"user_id":367544,"accept_rate":77,"display_name":"Dasmowenator"},"score":0,"creation_date":1523904298,"post_id":49860185,"comment_id":86743786,"body_markdown":"Yes, the stdout and stderr streams have been closed, but the BufferedReader never gets an EOF, it just hangs forever.  And since it&#39;s being run in a separate thread, won&#39;t it be a memory leak?  I assume the thread won&#39;t be garbage collected until the BufferedReader.readLine() returns...","body":"Yes, the stdout and stderr streams have been closed, but the BufferedReader never gets an EOF, it just hangs forever.  And since it&#39;s being run in a separate thread, won&#39;t it be a memory leak?  I assume the thread won&#39;t be garbage collected until the BufferedReader.readLine() returns..."},{"owner":{"account_id":2303891,"reputation":1772,"user_id":2023577,"display_name":"user2023577"},"score":0,"creation_date":1523918614,"post_id":49860185,"comment_id":86750082,"body_markdown":"how do you know the slave thread on readline has not returned? the while loop exited with an exception, but what&#39;s the slave thread code doing when readline fails? we don&#39;t see that SimpleTimeLimiter&#39;s code. I&#39;m saying, we can&#39;t help you much without all the code.","body":"how do you know the slave thread on readline has not returned? the while loop exited with an exception, but what&#39;s the slave thread code doing when readline fails? we don&#39;t see that SimpleTimeLimiter&#39;s code. I&#39;m saying, we can&#39;t help you much without all the code."},{"owner":{"account_id":152786,"reputation":5621,"user_id":367544,"accept_rate":77,"display_name":"Dasmowenator"},"score":0,"creation_date":1523927676,"post_id":49860185,"comment_id":86752249,"body_markdown":"Because if I call get() on the Future it never returns. If you look at my answer I posted - the issue is that StreamDecoder doesn&#39;t honor a thread interrupt while it&#39;s waiting for input during read(). The fact that my app hung when I tried to close the BufferedReader was a symptom of that since the read() and close() operations try to acquire the same synchronization lock. Whether or not I can close the reader or not isn&#39;t really my biggest concern since I already closed the underlying streams, but the fact that there&#39;s a thread that&#39;s stuck indefinitely in the read() method is a memory leak.","body":"Because if I call get() on the Future it never returns. If you look at my answer I posted - the issue is that StreamDecoder doesn&#39;t honor a thread interrupt while it&#39;s waiting for input during read(). The fact that my app hung when I tried to close the BufferedReader was a symptom of that since the read() and close() operations try to acquire the same synchronization lock. Whether or not I can close the reader or not isn&#39;t really my biggest concern since I already closed the underlying streams, but the fact that there&#39;s a thread that&#39;s stuck indefinitely in the read() method is a memory leak."},{"owner":{"account_id":2303891,"reputation":1772,"user_id":2023577,"display_name":"user2023577"},"score":0,"creation_date":1523967088,"post_id":49860185,"comment_id":86771038,"body_markdown":"Again, can you provide full code? You mention kill -9. The Process class already has a destroy. Nevertheless, I can understand the need for certainty. I stopped trying to interrupt streams a long time ago because this is just a flag the code must check. Native read/writes are notoriously bad for interruption. But closing them never failed me, and I cannot assert what you claim without the full code. I&#39;m sure oracle didn&#39;t fail to implement something as obvious as kicking out pending calls upon a closing stream. Maybe your kill -9 is not graceful enough. Anyway, show the code, please.","body":"Again, can you provide full code? You mention kill -9. The Process class already has a destroy. Nevertheless, I can understand the need for certainty. I stopped trying to interrupt streams a long time ago because this is just a flag the code must check. Native read/writes are notoriously bad for interruption. But closing them never failed me, and I cannot assert what you claim without the full code. I&#39;m sure oracle didn&#39;t fail to implement something as obvious as kicking out pending calls upon a closing stream. Maybe your kill -9 is not graceful enough. Anyway, show the code, please."},{"owner":{"account_id":2303891,"reputation":1772,"user_id":2023577,"display_name":"user2023577"},"score":0,"creation_date":1523967605,"post_id":49860185,"comment_id":86771424,"body_markdown":"BTW, if you expect anyone to honor an interrupt, you will be disappointed a lot more often than pleased. 3rd party libs are especially BAD at it. And in IO, it&#39;s even worse, since the InterruptedIOException extends IOException, NOT InterruptedEception. Way too easy to catch by mistake and let retries kick in mistakenly.","body":"BTW, if you expect anyone to honor an interrupt, you will be disappointed a lot more often than pleased. 3rd party libs are especially BAD at it. And in IO, it&#39;s even worse, since the InterruptedIOException extends IOException, NOT InterruptedEception. Way too easy to catch by mistake and let retries kick in mistakenly."},{"owner":{"account_id":2303891,"reputation":1772,"user_id":2023577,"display_name":"user2023577"},"score":0,"creation_date":1523973888,"post_id":49860185,"comment_id":86776157,"body_markdown":"@Dasmowenator I added sample code to prove the process streams get EOF&#39;ed. I knew I wasn&#39;t crazy... LOL. (jdk8, win10). So, I suspect there is something in your code (that we don&#39;t see) that causes a retry of the readline or some other method using the lock.","body":"@Dasmowenator I added sample code to prove the process streams get EOF&#39;ed. I knew I wasn&#39;t crazy... LOL. (jdk8, win10). So, I suspect there is something in your code (that we don&#39;t see) that causes a retry of the readline or some other method using the lock."},{"owner":{"account_id":152786,"reputation":5621,"user_id":367544,"accept_rate":77,"display_name":"Dasmowenator"},"score":0,"creation_date":1523987744,"post_id":49860185,"comment_id":86785192,"body_markdown":"In case it wasn&#39;t clear, TimeLimiter is from the Guava libraries: https://github.com/google/guava/blob/master/guava/src/com/google/common/util/concurrent/SimpleTimeLimiter.java","body":"In case it wasn&#39;t clear, TimeLimiter is from the Guava libraries: <a href=\"https://github.com/google/guava/blob/master/guava/src/com/google/common/util/concurrent/SimpleTimeLimiter.java\" rel=\"nofollow noreferrer\">github.com/google/guava/blob/master/guava/src/com/google/com&zwnj;&#8203;mon/&hellip;</a>"},{"owner":{"account_id":2303891,"reputation":1772,"user_id":2023577,"display_name":"user2023577"},"score":0,"creation_date":1524003331,"post_id":49860185,"comment_id":86792638,"body_markdown":"And about the killProcess() method? It would help future readers if you edited your question and completed your code. As it stands, it cannot reproduced.","body":"And about the killProcess() method? It would help future readers if you edited your question and completed your code. As it stands, it cannot reproduced."},{"owner":{"account_id":152786,"reputation":5621,"user_id":367544,"accept_rate":77,"display_name":"Dasmowenator"},"score":0,"creation_date":1524078159,"post_id":49860185,"comment_id":86830185,"body_markdown":"Ok I updated it with the code from the killProcess() method.","body":"Ok I updated it with the code from the killProcess() method."},{"owner":{"account_id":2303891,"reputation":1772,"user_id":2023577,"display_name":"user2023577"},"score":0,"creation_date":1524080263,"post_id":49860185,"comment_id":86831295,"body_markdown":"Ok, so the only interrupt is from the guava future.cancel(true) upon timeout, which is not honored by a nitive fileinputstream.read() of the process stdout. Up to there, this is no surprise. The question is therefore why the process&#39;s stdout fileinputstream doesn&#39;t go EOF upon your kill -9. So I would suggest you try a normal kill (no -9) to see how the OS+JVM will play it out. You have this odd children tree of process to deal with, I understand, but it doesn&#39;t seem to require a nuke like kill -9. I could be a jvm bug in the process stream implementation.","body":"Ok, so the only interrupt is from the guava future.cancel(true) upon timeout, which is not honored by a nitive fileinputstream.read() of the process stdout. Up to there, this is no surprise. The question is therefore why the process&#39;s stdout fileinputstream doesn&#39;t go EOF upon your kill -9. So I would suggest you try a normal kill (no -9) to see how the OS+JVM will play it out. You have this odd children tree of process to deal with, I understand, but it doesn&#39;t seem to require a nuke like kill -9. I could be a jvm bug in the process stream implementation."}],"tags":[],"owner":{"account_id":2303891,"reputation":1772,"user_id":2023577,"display_name":"user2023577"},"comment_count":10,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1523973649,"creation_date":1523890099,"answer_id":49860185,"question_id":49825866,"body_markdown":"If you kill the process, the stdout/stderr should dry out not long after (EOF and null from readLine eventually when OS pipes dry out).\r\n\r\nAt least, closing the streams should cause the concurrent readers/writers to fail. That works on sockets, so I expect it to work on files and processes...\r\n\r\nSo I see no point in calling the bufferedreader.close(), you have nothing to loose. BufferedReader is just memory that will be freed on GC. The underlying streams were already closed, and even then, the process is killed. One of those kill or close must eject the slave thread&#39;s readLine with null or some exception.\r\n\r\nUPDATE:\r\n\r\nThe code below shows that killing the process will end the streams as expected:\r\n\r\n    package tests;\r\n    \r\n    import java.io.BufferedReader;\r\n    import java.io.InputStream;\r\n    import java.io.InputStreamReader;\r\n    import java.io.PrintWriter;\r\n    import java.io.StringWriter;\r\n    import java.util.concurrent.TimeUnit;\r\n    import java.util.stream.Stream;\r\n    \r\n    public class TestProcessStreamsCloseEOF {\r\n    \t\r\n    \tstatic void p(Object msg, Throwable... ta) {\r\n    \t\tStringWriter sw = new StringWriter();\r\n    \t\tPrintWriter pw = new PrintWriter(sw);\r\n    \t\tpw.println(Thread.currentThread().getName()+&quot;] &quot;+msg);\r\n    \t\t\r\n    \t\tif(ta!=null &amp;&amp; ta.length&gt;0)\r\n    \t\t\tStream.of(ta).forEach(t -&gt; t.printStackTrace(pw));\r\n    \t\tpw.flush();\r\n    \t\tSystem.out.print(sw.toString());\r\n    \t}\r\n    \t\r\n    \tpublic static void main(String[] args) throws Exception {\r\n    \t\t/*\r\n    \t\tslowecho.bat:\r\n    \t\t-----------\r\n    \t\t@echo off\r\n    \t\techo line 1\r\n    \t\tpause\r\n    \t\techo line 2\r\n    \t\t*/\r\n    \t\tProcess p = new ProcessBuilder(&quot;slowecho.bat&quot;).start();\r\n    \t\tnew Thread(() -&gt; {dump(p.getInputStream());}, &quot;dumpstdout&quot;).start();\r\n    \t\tnew Thread(() -&gt; {dump(p.getErrorStream());}, &quot;dumpstderr&quot;).start();\r\n    \t\t\r\n    \t\tp(&quot;sleep 5s&quot;);\r\n    \t\tThread.sleep(5000);\r\n    \t\t\r\n    \t\tp(&quot;destroy...&quot;);\r\n    \t\t//p.destroy();\r\n    \t\tp.destroyForcibly();\r\n    \t\t\r\n    \t\tp(&quot;waitfor 5s&quot;);\r\n    \t\tp.waitFor(5, TimeUnit.SECONDS);\r\n    \t\t\r\n    \t\tp(&quot;sleep 5s&quot;);\r\n    \t\tThread.sleep(5000);\r\n    \t\t\r\n    \t\tp(&quot;end.&quot;);\r\n    \t}\r\n    \t\r\n    \tstatic void dump(InputStream is) {\r\n    \t\ttry {\r\n    \t\t\tBufferedReader br = new BufferedReader(new InputStreamReader(is, &quot;ISO-8859-1&quot;));\r\n    \t\t\tString line;\r\n    \t\t\twhile((line=br.readLine()) !=null) {\r\n    \t\t\t\tp(line);\r\n    \t\t\t}\r\n    \t\t} catch(Throwable t) {\r\n    \t\t\tp(&quot;&quot;+t, t);\r\n    \t\t}\r\n    \t\tp(&quot;end&quot;);\r\n    \t}\r\n    \t\r\n    }\r\n\r\n","title":"Java: BufferedReader hangs forever on close() and StreamDecoder doesn&#39;t respect thread interrupt","body":"<p>If you kill the process, the stdout/stderr should dry out not long after (EOF and null from readLine eventually when OS pipes dry out).</p>\n\n<p>At least, closing the streams should cause the concurrent readers/writers to fail. That works on sockets, so I expect it to work on files and processes...</p>\n\n<p>So I see no point in calling the bufferedreader.close(), you have nothing to loose. BufferedReader is just memory that will be freed on GC. The underlying streams were already closed, and even then, the process is killed. One of those kill or close must eject the slave thread's readLine with null or some exception.</p>\n\n<p>UPDATE:</p>\n\n<p>The code below shows that killing the process will end the streams as expected:</p>\n\n<pre><code>package tests;\n\nimport java.io.BufferedReader;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.io.PrintWriter;\nimport java.io.StringWriter;\nimport java.util.concurrent.TimeUnit;\nimport java.util.stream.Stream;\n\npublic class TestProcessStreamsCloseEOF {\n\n    static void p(Object msg, Throwable... ta) {\n        StringWriter sw = new StringWriter();\n        PrintWriter pw = new PrintWriter(sw);\n        pw.println(Thread.currentThread().getName()+\"] \"+msg);\n\n        if(ta!=null &amp;&amp; ta.length&gt;0)\n            Stream.of(ta).forEach(t -&gt; t.printStackTrace(pw));\n        pw.flush();\n        System.out.print(sw.toString());\n    }\n\n    public static void main(String[] args) throws Exception {\n        /*\n        slowecho.bat:\n        -----------\n        @echo off\n        echo line 1\n        pause\n        echo line 2\n        */\n        Process p = new ProcessBuilder(\"slowecho.bat\").start();\n        new Thread(() -&gt; {dump(p.getInputStream());}, \"dumpstdout\").start();\n        new Thread(() -&gt; {dump(p.getErrorStream());}, \"dumpstderr\").start();\n\n        p(\"sleep 5s\");\n        Thread.sleep(5000);\n\n        p(\"destroy...\");\n        //p.destroy();\n        p.destroyForcibly();\n\n        p(\"waitfor 5s\");\n        p.waitFor(5, TimeUnit.SECONDS);\n\n        p(\"sleep 5s\");\n        Thread.sleep(5000);\n\n        p(\"end.\");\n    }\n\n    static void dump(InputStream is) {\n        try {\n            BufferedReader br = new BufferedReader(new InputStreamReader(is, \"ISO-8859-1\"));\n            String line;\n            while((line=br.readLine()) !=null) {\n                p(line);\n            }\n        } catch(Throwable t) {\n            p(\"\"+t, t);\n        }\n        p(\"end\");\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5100890,"reputation":2796,"user_id":4090550,"display_name":"Anil Agrawal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688710971,"creation_date":1688710494,"answer_id":76634347,"question_id":49825866,"body_markdown":"I would rather prefer to handle resources gracefully like below\r\n\r\n    import java.io.BufferedReader;\r\n\timport java.io.InputStream;\r\n\timport java.io.InputStreamReader;\r\n\timport java.io.PrintWriter;\r\n\timport java.io.StringWriter;\r\n\timport java.util.concurrent.TimeUnit;\r\n\timport java.util.concurrent.atomic.AtomicBoolean;\r\n\timport java.util.stream.Stream;\r\n\t\r\n\tpublic class Test {\r\n\t\r\n\t\tstatic AtomicBoolean interruptLoggingThread = new AtomicBoolean(false);\r\n\t\r\n\t\tstatic void print(Object msg, Throwable... expArr) {\r\n\t\t\tStringWriter sw = new StringWriter();\r\n\t\t\tPrintWriter pw = new PrintWriter(sw);\r\n\t\t\tpw.println(Thread.currentThread().getName() + &quot;] &quot; + msg);\r\n\t\r\n\t\t\tif (expArr != null &amp;&amp; expArr.length &gt; 0) {\r\n\t\t\t\tStream.of(expArr).forEach(exp -&gt; exp.printStackTrace(pw));\r\n\t\t\t}\r\n\t\t\tpw.flush();\r\n\t\t\tSystem.out.print(sw.toString());\r\n\t\t}\r\n\t\r\n\t\tpublic static void main(String[] args) throws Exception {\r\n\t\t\tProcess p = new ProcessBuilder(&quot;slowecho.bat&quot;).start();\r\n\t\t\tnew Thread(() -&gt; {\r\n\t\t\t\tdump(p.getInputStream());\r\n\t\t\t}, &quot;dumpstdout&quot;).start();\r\n\t\t\tnew Thread(() -&gt; {\r\n\t\t\t\tdump(p.getErrorStream());\r\n\t\t\t}, &quot;dumpstderr&quot;).start();\r\n\t\r\n\t\t\ttry {\r\n\t\t\t\tp.waitFor(10000, TimeUnit.SECONDS); // Wait process to terminate within 10 Seconds\r\n\t\t\t\tinterruptLoggingThread.set(true);\r\n\t\t\t\tp.destroyForcibly(); // To ensure process got terminated forcibly (if not gracefully terminated within 10 seconds)\r\n\t\t\t} catch (Exception e) {\r\n\t\t\t}\r\n\t\t\ttry {\r\n\t\t\t\tp.getInputStream().close(); // Ensure to close standard output stream\r\n\t\t\t} catch (Exception e) {\r\n\t\t\t}\r\n\t\t\ttry {\r\n\t\t\t\tp.getErrorStream().close(); // Ensure to close standard error stream\r\n\t\t\t} catch (Exception e) {\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\tstatic void dump(InputStream is) {\r\n\t\t\ttry {\r\n\t\t\t\tBufferedReader br = new BufferedReader(new InputStreamReader(is, &quot;ISO-8859-1&quot;));\r\n\t\t\t\tString line;\r\n\t\t\t\twhile (!interruptLoggingThread.get()) {\r\n\t\t\t\t\tif (br.ready()) { // ready() is non-blocking\r\n\t\t\t\t\t\tline = br.readLine();\r\n                        // ready() check ensures, readLine() will not be blocked for input\r\n\t\t\t\t\t\tif (line != null) {\r\n\t\t\t\t\t\t\tprint(line);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tThread.sleep(1000l);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} catch (Throwable t) {\r\n\t\t\t\tprint(&quot;&quot; + t, t);\r\n\t\t\t}\r\n\t\t\tprint(&quot;end&quot;);\r\n\t\t}\r\n\t}","title":"Java: BufferedReader hangs forever on close() and StreamDecoder doesn&#39;t respect thread interrupt","body":"<p>I would rather prefer to handle resources gracefully like below</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.io.PrintWriter;\nimport java.io.StringWriter;\nimport java.util.concurrent.TimeUnit;\nimport java.util.concurrent.atomic.AtomicBoolean;\nimport java.util.stream.Stream;\n\npublic class Test {\n\n    static AtomicBoolean interruptLoggingThread = new AtomicBoolean(false);\n\n    static void print(Object msg, Throwable... expArr) {\n        StringWriter sw = new StringWriter();\n        PrintWriter pw = new PrintWriter(sw);\n        pw.println(Thread.currentThread().getName() + &quot;] &quot; + msg);\n\n        if (expArr != null &amp;&amp; expArr.length &gt; 0) {\n            Stream.of(expArr).forEach(exp -&gt; exp.printStackTrace(pw));\n        }\n        pw.flush();\n        System.out.print(sw.toString());\n    }\n\n    public static void main(String[] args) throws Exception {\n        Process p = new ProcessBuilder(&quot;slowecho.bat&quot;).start();\n        new Thread(() -&gt; {\n            dump(p.getInputStream());\n        }, &quot;dumpstdout&quot;).start();\n        new Thread(() -&gt; {\n            dump(p.getErrorStream());\n        }, &quot;dumpstderr&quot;).start();\n\n        try {\n            p.waitFor(10000, TimeUnit.SECONDS); // Wait process to terminate within 10 Seconds\n            interruptLoggingThread.set(true);\n            p.destroyForcibly(); // To ensure process got terminated forcibly (if not gracefully terminated within 10 seconds)\n        } catch (Exception e) {\n        }\n        try {\n            p.getInputStream().close(); // Ensure to close standard output stream\n        } catch (Exception e) {\n        }\n        try {\n            p.getErrorStream().close(); // Ensure to close standard error stream\n        } catch (Exception e) {\n        }\n    }\n\n    static void dump(InputStream is) {\n        try {\n            BufferedReader br = new BufferedReader(new InputStreamReader(is, &quot;ISO-8859-1&quot;));\n            String line;\n            while (!interruptLoggingThread.get()) {\n                if (br.ready()) { // ready() is non-blocking\n                    line = br.readLine();\n                    // ready() check ensures, readLine() will not be blocked for input\n                    if (line != null) {\n                        print(line);\n                    }\n                } else {\n                    Thread.sleep(1000l);\n                }\n            }\n        } catch (Throwable t) {\n            print(&quot;&quot; + t, t);\n        }\n        print(&quot;end&quot;);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":152786,"reputation":5621,"user_id":367544,"accept_rate":77,"display_name":"Dasmowenator"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1710,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":49825867,"answer_count":3,"score":3,"last_activity_date":1688710971,"creation_date":1523658193,"question_id":49825866,"body_markdown":"I have a Java program which launches a separate subprocess represented by the Process class, and then attaches listeners which look at the stdout/stderr of the Process. In some cases, the Process will hang and stop being able to make progress, at which time the TimeLimiter will throw a TimeoutException, attempt to interrupt the underlying thread which is actually doing the &lt;code&gt;readLine()&lt;/code&gt; call, and then kill the Process using &lt;code&gt;kill -9&lt;/code&gt; and close the stdout and stderr streams from the Process object.  The last thing it tries to do is close the BufferedReader, but this call hangs forever.  Sample code below:\r\n\r\n    private static final TimeLimiter timeLimiter = new SimpleTimeLimiter(); // has its own thread pool\r\n    \r\n    public void readStdout(Process process) {\r\n        BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));\r\n        try {\r\n            String line = null;\r\n            while ((line = timeLimiter.callWithTimeout(reader::readLine, 5, TimeUnit.SECONDS, true)) != null) { // this will throw a TimeoutException when the process hangs\r\n                System.out.println(line);\r\n            }\r\n        } finally {\r\n            killProcess(process); // this does a &quot;kill -9&quot; on the process\r\n            process.getInputStream().close(); // this works fine\r\n            process.getErrorStream().close(); // this works fine\r\n            reader.close(); // THIS HANGS FOREVER\r\n        }\r\n    }\r\n\r\nWhy does the &lt;code&gt;close()&lt;/code&gt; call hang forever, and what can I do about it?\r\n\r\n&lt;i&gt;Related question: https://stackoverflow.com/questions/42331228/program-freezes-on-bufferedreader-close&lt;/i&gt;\r\n\r\nUPDATE:\r\n\r\nIn case it wasn&#39;t clear, TimeLimiter is from the Guava libraries: https://github.com/google/guava/blob/master/guava/src/com/google/common/util/concurrent/SimpleTimeLimiter.java\r\n\r\nAlso, I&#39;ve been asked for the code from the &lt;code&gt;killProcess()&lt;/code&gt; method, so here it is (note this only works on Linux/Unix machines):\r\n\r\n    public void killProcess(Process process) {\r\n        // get the process ID (pid)\r\n        Field field = process.getClass().getDeclaredField(&quot;pid&quot;); // assumes this is a java.lang.UNIXProcess\r\n        field.setAccessible(true);\r\n        int pid = (Integer)field.get(process);\r\n        \r\n        // populate the list of child processes\r\n        List&lt;Integer&gt; processes = new ArrayList&lt;&gt;(Arrays.asList(pid));\r\n        for (int i = 0; i &lt; processes.size(); ++i) {\r\n            Process findChildren = Runtime.getRuntime().exec(new String[] { &quot;ps&quot;, &quot;-o&quot;, &quot;pid&quot;, &quot;--no-headers&quot;, &quot;--ppid&quot;, Integer.toString(processes.get(i)) });\r\n            findChildren.waitFor(); // this will return a non-zero exit code when no child processes are found\r\n            Scanner in = new Scanner(findChildren.getInputStream());\r\n            while (in.hasNext()) {\r\n                processes.add(in.nextInt());\r\n            }\r\n            in.close();\r\n        }\r\n        \r\n        // kill all the processes, starting with the children, up to the main process\r\n        for (int i = processes.size() - 1; i &gt;= 0; --i) {\r\n            Process killProcess = Runtime.getRuntime().exec(new String[] { &quot;kill&quot;, &quot;-9&quot;, Integer.toString(processes.get(i)) });\r\n            killProcess.waitFor();\r\n        }\r\n    }\r\n","title":"Java: BufferedReader hangs forever on close() and StreamDecoder doesn&#39;t respect thread interrupt","body":"<p>I have a Java program which launches a separate subprocess represented by the Process class, and then attaches listeners which look at the stdout/stderr of the Process. In some cases, the Process will hang and stop being able to make progress, at which time the TimeLimiter will throw a TimeoutException, attempt to interrupt the underlying thread which is actually doing the <code>readLine()</code> call, and then kill the Process using <code>kill -9</code> and close the stdout and stderr streams from the Process object.  The last thing it tries to do is close the BufferedReader, but this call hangs forever.  Sample code below:</p>\n\n<pre><code>private static final TimeLimiter timeLimiter = new SimpleTimeLimiter(); // has its own thread pool\n\npublic void readStdout(Process process) {\n    BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));\n    try {\n        String line = null;\n        while ((line = timeLimiter.callWithTimeout(reader::readLine, 5, TimeUnit.SECONDS, true)) != null) { // this will throw a TimeoutException when the process hangs\n            System.out.println(line);\n        }\n    } finally {\n        killProcess(process); // this does a \"kill -9\" on the process\n        process.getInputStream().close(); // this works fine\n        process.getErrorStream().close(); // this works fine\n        reader.close(); // THIS HANGS FOREVER\n    }\n}\n</code></pre>\n\n<p>Why does the <code>close()</code> call hang forever, and what can I do about it?</p>\n\n<p><i>Related question: <a href=\"https://stackoverflow.com/questions/42331228/program-freezes-on-bufferedreader-close\">Program freezes on bufferedreader close</a></i></p>\n\n<p>UPDATE:</p>\n\n<p>In case it wasn't clear, TimeLimiter is from the Guava libraries: <a href=\"https://github.com/google/guava/blob/master/guava/src/com/google/common/util/concurrent/SimpleTimeLimiter.java\" rel=\"nofollow noreferrer\">https://github.com/google/guava/blob/master/guava/src/com/google/common/util/concurrent/SimpleTimeLimiter.java</a></p>\n\n<p>Also, I've been asked for the code from the <code>killProcess()</code> method, so here it is (note this only works on Linux/Unix machines):</p>\n\n<pre><code>public void killProcess(Process process) {\n    // get the process ID (pid)\n    Field field = process.getClass().getDeclaredField(\"pid\"); // assumes this is a java.lang.UNIXProcess\n    field.setAccessible(true);\n    int pid = (Integer)field.get(process);\n\n    // populate the list of child processes\n    List&lt;Integer&gt; processes = new ArrayList&lt;&gt;(Arrays.asList(pid));\n    for (int i = 0; i &lt; processes.size(); ++i) {\n        Process findChildren = Runtime.getRuntime().exec(new String[] { \"ps\", \"-o\", \"pid\", \"--no-headers\", \"--ppid\", Integer.toString(processes.get(i)) });\n        findChildren.waitFor(); // this will return a non-zero exit code when no child processes are found\n        Scanner in = new Scanner(findChildren.getInputStream());\n        while (in.hasNext()) {\n            processes.add(in.nextInt());\n        }\n        in.close();\n    }\n\n    // kill all the processes, starting with the children, up to the main process\n    for (int i = processes.size() - 1; i &gt;= 0; --i) {\n        Process killProcess = Runtime.getRuntime().exec(new String[] { \"kill\", \"-9\", Integer.toString(processes.get(i)) });\n        killProcess.waitFor();\n    }\n}\n</code></pre>\n"},{"tags":["java","javac"],"comments":[{"owner":{"account_id":1107482,"reputation":2870,"user_id":1098603,"accept_rate":94,"display_name":"Matthieu"},"score":13,"creation_date":1569350686,"post_id":58086412,"comment_id":102566570,"body_markdown":"Which version are you using? I think they introduced Java Console in Java 9, and that might be what you experienced.","body":"Which version are you using? I think they introduced Java Console in Java 9, and that might be what you experienced."},{"owner":{"account_id":1291956,"reputation":51,"user_id":1243880,"display_name":"unnsse"},"score":7,"creation_date":1569350722,"post_id":58086412,"comment_id":102566583,"body_markdown":"You need to match the class name with its filename - that&#39;s the Java standard. Just change the file name to `Myclass.java` and then from the command line compile it like this `javac Myclass.java` and then run it like this `java Myclass`.","body":"You need to match the class name with its filename - that&#39;s the Java standard. Just change the file name to <code>Myclass.java</code> and then from the command line compile it like this <code>javac Myclass.java</code> and then run it like this <code>java Myclass</code>."},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":6,"creation_date":1569350901,"post_id":58086412,"comment_id":102566679,"body_markdown":"yes, `javac` still used to compile if you don&#39;t want to deploy source code, or you have more than a single file ([documentation](https://docs.oracle.com/en/java/javase/13/docs/specs/man/java.html) of `java` for source-file option: Only used to launch a single source-file program.)","body":"yes, <code>javac</code> still used to compile if you don&#39;t want to deploy source code, or you have more than a single file (<a href=\"https://docs.oracle.com/en/java/javase/13/docs/specs/man/java.html\" rel=\"nofollow noreferrer\">documentation</a> of <code>java</code> for source-file option: Only used to launch a single source-file program.)"},{"owner":{"account_id":14978393,"reputation":1874,"user_id":10813146,"display_name":"milad"},"score":0,"creation_date":1569351044,"post_id":58086412,"comment_id":102566739,"body_markdown":"@Matthieu the output of &quot;java -version&quot; is:\nopenjdk version &quot;12.0.2&quot; 2019-07-16\nOpenJDK Runtime Environment (build 12.0.2+10)\nOpenJDK 64-Bit Server VM (build 12.0.2+10, mixed mode)","body":"@Matthieu the output of &quot;java -version&quot; is: openjdk version &quot;12.0.2&quot; 2019-07-16 OpenJDK Runtime Environment (build 12.0.2+10) OpenJDK 64-Bit Server VM (build 12.0.2+10, mixed mode)"},{"owner":{"account_id":1291956,"reputation":51,"user_id":1243880,"display_name":"unnsse"},"score":1,"creation_date":1569351463,"post_id":58086412,"comment_id":102566885,"body_markdown":"@Milad - What happens is this - `javac` compiles the Java source into JVM specific interpreted bytecode and the `java` command loads it inside the JVM&#39;s ClassLoader.","body":"@Milad - What happens is this - <code>javac</code> compiles the Java source into JVM specific interpreted bytecode and the <code>java</code> command loads it inside the JVM&#39;s ClassLoader."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1688710452,"post_id":58086412,"comment_id":135112913,"body_markdown":"@unnsse: That doesn&#39;t answer the question about how `java hello.java` works at all though...","body":"@unnsse: That doesn&#39;t answer the question about how <code>java hello.java</code> works at all though..."},{"owner":{"account_id":1674243,"reputation":10078,"user_id":1553537,"accept_rate":29,"display_name":"Giorgi Tsiklauri"},"score":0,"creation_date":1688711586,"post_id":58086412,"comment_id":135113091,"body_markdown":"I would recommend reading [this](https://stackoverflow.com/a/64015013/1553537) as well as it will give you a better understanding of the context and motivation behind turning `java` launcher into a compiler too, sometimes, for a single-file applications.","body":"I would recommend reading <a href=\"https://stackoverflow.com/a/64015013/1553537\">this</a> as well as it will give you a better understanding of the context and motivation behind turning <code>java</code> launcher into a compiler too, sometimes, for a single-file applications."}],"answers":[{"comments":[{"owner":{"account_id":14978393,"reputation":1874,"user_id":10813146,"display_name":"milad"},"score":0,"creation_date":1569351285,"post_id":58086498,"comment_id":102566829,"body_markdown":"thank you, java version is:\nopenjdk version &quot;12.0.2&quot; 2019-07-16\nOpenJDK Runtime Environment (build 12.0.2+10)\nOpenJDK 64-Bit Server VM (build 12.0.2+10, mixed mode)","body":"thank you, java version is: openjdk version &quot;12.0.2&quot; 2019-07-16 OpenJDK Runtime Environment (build 12.0.2+10) OpenJDK 64-Bit Server VM (build 12.0.2+10, mixed mode)"},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":5,"creation_date":1569351290,"post_id":58086498,"comment_id":102566831,"body_markdown":"check [Using Source-File Mode to Launch Single-File Source-Code Programs](https://docs.oracle.com/en/java/javase/13/docs/specs/man/java.html#using-source-file-mode-to-launch-single-file-source-code-programs): &quot;The compiler does not enforce the optional restriction defined at the end of JLS ??7.6, that a type in a named package should exist in a file whose name is composed from the type name followed by the .java extension.&quot;","body":"check <a href=\"https://docs.oracle.com/en/java/javase/13/docs/specs/man/java.html#using-source-file-mode-to-launch-single-file-source-code-programs\" rel=\"nofollow noreferrer\">Using Source-File Mode to Launch Single-File Source-Code Programs</a>: &quot;The compiler does not enforce the optional restriction defined at the end of JLS ??7.6, that a type in a named package should exist in a file whose name is composed from the type name followed by the .java extension.&quot;"},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":2,"creation_date":1569430526,"post_id":58086498,"comment_id":102597709,"body_markdown":"The Java scripting API and Java Single-File Source-Code Program Launch ([JEP 330](https://openjdk.java.net/jeps/330)) are two completely separate and totally unrelated things.","body":"The Java scripting API and Java Single-File Source-Code Program Launch (<a href=\"https://openjdk.java.net/jeps/330\" rel=\"nofollow noreferrer\">JEP 330</a>) are two completely separate and totally unrelated things."},{"owner":{"account_id":382010,"reputation":2461,"user_id":736987,"accept_rate":89,"display_name":"Evan"},"score":0,"creation_date":1569434596,"post_id":58086498,"comment_id":102599465,"body_markdown":"@DavidConrad, updated verbiage accordingly. Thanks.","body":"@DavidConrad, updated verbiage accordingly. Thanks."},{"owner":{"account_id":382010,"reputation":2461,"user_id":736987,"accept_rate":89,"display_name":"Evan"},"score":0,"creation_date":1569607485,"post_id":58086498,"comment_id":102665440,"body_markdown":"Appreciate the input, @T.J.Crowder. But, I&#39;m fairly sure I meant to write it as is.  Also, second definition in your links:\nPromiscuous means including a wide range of different things.","body":"Appreciate the input, @T.J.Crowder. But, I&#39;m fairly sure I meant to write it as is.  Also, second definition in your links: Promiscuous means including a wide range of different things."},{"owner":{"account_id":52616,"reputation":1043001,"user_id":157247,"accept_rate":91,"display_name":"T.J. Crowder"},"score":0,"creation_date":1569659634,"post_id":58086498,"comment_id":102674597,"body_markdown":"@Evan - &quot;Wide range of different things&quot; doesn&#39;t fit the sentence above.","body":"@Evan - &quot;Wide range of different things&quot; doesn&#39;t fit the sentence above."},{"owner":{"account_id":382010,"reputation":2461,"user_id":736987,"accept_rate":89,"display_name":"Evan"},"score":0,"creation_date":1569675696,"post_id":58086498,"comment_id":102677713,"body_markdown":"How about my ad hoc definition: Promiscuous means it takes whatever it can get?  Highly amused at the amount of comments now discussing the word promiscuous.","body":"How about my ad hoc definition: Promiscuous means it takes whatever it can get?  Highly amused at the amount of comments now discussing the word promiscuous."}],"tags":[],"owner":{"account_id":382010,"reputation":2461,"user_id":736987,"accept_rate":89,"display_name":"Evan"},"comment_count":7,"down_vote_count":0,"up_vote_count":57,"is_accepted":false,"score":57,"last_activity_date":1569434626,"creation_date":1569350916,"answer_id":58086498,"question_id":58086412,"body_markdown":"**If you are running Java 11,** there is a new feature that allows single source file execution.  The single source compiler is more promiscuous in terms of class name versus file name, so that is how you are able to run but not successfully compile.  \r\n\r\n\r\n**If you are on a previous version of Java,** then your current hello.java does not compile, because of compile errors, specifically around the class name.  So there&#39;s absolutely no way that calling java hello.java compiled your code, because it does not compile.  \r\n\r\nIt seems most entirely likely that you were running some previously compiled code when executing the java command.  ","title":"Does the &#39;java&#39; command compile Java programs?","body":"<p><strong>If you are running Java 11,</strong> there is a new feature that allows single source file execution.  The single source compiler is more promiscuous in terms of class name versus file name, so that is how you are able to run but not successfully compile.  </p>\n\n<p><strong>If you are on a previous version of Java,</strong> then your current hello.java does not compile, because of compile errors, specifically around the class name.  So there's absolutely no way that calling java hello.java compiled your code, because it does not compile.  </p>\n\n<p>It seems most entirely likely that you were running some previously compiled code when executing the java command.  </p>\n"},{"comments":[{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":50,"creation_date":1569352173,"post_id":58086598,"comment_id":102567177,"body_markdown":"introduced in Java 11: [What&#39;s New](https://www.oracle.com/technetwork/java/javase/11-relnote-issues-5012449.html#NewFeature) or/and  [JEP 330: Launch Single-File Source-Code Programs](http://openjdk.java.net/jeps/330)","body":"introduced in Java 11: <a href=\"https://www.oracle.com/technetwork/java/javase/11-relnote-issues-5012449.html#NewFeature\" rel=\"nofollow noreferrer\">What&#39;s New</a> or/and  <a href=\"http://openjdk.java.net/jeps/330\" rel=\"nofollow noreferrer\">JEP 330: Launch Single-File Source-Code Programs</a>"},{"owner":{"account_id":7413926,"reputation":5474,"user_id":11374957,"display_name":"Kaan"},"score":0,"creation_date":1569352560,"post_id":58086598,"comment_id":102567350,"body_markdown":"thanks @CarlosHeuberger for the additional details. I made a small edit in my answer to reflect that it was introduced in Java 11.","body":"thanks @CarlosHeuberger for the additional details. I made a small edit in my answer to reflect that it was introduced in Java 11."},{"owner":{"account_id":3659449,"reputation":20245,"user_id":3049655,"accept_rate":95,"display_name":"Spikatrix"},"score":0,"creation_date":1569388829,"post_id":58086598,"comment_id":102575766,"body_markdown":"How do I check if I&#39;m using Java 11+? `java -version` gives me `openjdk version &quot;1.8.0_222&quot;\nOpenJDK Runtime Environment (build 1.8.0_222-8u222-b10-1ubuntu1~16.04.1-b10)\nOpenJDK 64-Bit Server VM (build 25.222-b10, mixed mode)\n`","body":"How do I check if I&#39;m using Java 11+? <code>java -version</code> gives me <code>openjdk version &quot;1.8.0_222&quot; OpenJDK Runtime Environment (build 1.8.0_222-8u222-b10-1ubuntu1~16.04.1-b10) OpenJDK 64-Bit Server VM (build 25.222-b10, mixed mode) </code>"},{"owner":{"account_id":1042873,"reputation":4743,"user_id":2072269,"accept_rate":78,"display_name":"muru"},"score":7,"creation_date":1569390334,"post_id":58086598,"comment_id":102576242,"body_markdown":"@Spikatrix that&#39;s Java 8 (They dropped the `1.` in `1.8` in newer releases)","body":"@Spikatrix that&#39;s Java 8 (They dropped the <code>1.</code> in <code>1.8</code> in newer releases)"},{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":2,"creation_date":1569516496,"post_id":58086598,"comment_id":102631358,"body_markdown":"You didn&#39;t answer the question why we still need javac--I think java only operates on the single file you supply it and previously compiled files.  I believe you must compile all the other files you wish to use from the file you call.","body":"You didn&#39;t answer the question why we still need javac--I think java only operates on the single file you supply it and previously compiled files.  I believe you must compile all the other files you wish to use from the file you call."},{"owner":{"account_id":7413926,"reputation":5474,"user_id":11374957,"display_name":"Kaan"},"score":0,"creation_date":1569518395,"post_id":58086598,"comment_id":102632261,"body_markdown":"from [JEP 330](https://openjdk.java.net/jeps/330): the motivation was to make it easier for _&quot;early stages of learning Java, and when writing small utility programs&quot;_ without changing any other existing uses. When using the shortcut, no `.class` file will be generated - `javac` is still needed to create `.class` files.","body":"from <a href=\"https://openjdk.java.net/jeps/330\" rel=\"nofollow noreferrer\">JEP 330</a>: the motivation was to make it easier for <i>&quot;early stages of learning Java, and when writing small utility programs&quot;</i> without changing any other existing uses. When using the shortcut, no <code>.class</code> file will be generated - <code>javac</code> is still needed to create <code>.class</code> files."},{"owner":{"account_id":467288,"reputation":5763,"user_id":9883438,"display_name":"sebrockm"},"score":2,"creation_date":1569575637,"post_id":58086598,"comment_id":102649789,"body_markdown":"This answer does not address why this new method does not result in a file name vs. class name error as reported by `javac`.","body":"This answer does not address why this new method does not result in a file name vs. class name error as reported by <code>javac</code>."},{"owner":{"account_id":4449673,"reputation":425,"user_id":3622004,"display_name":"Abhinav Verma"},"score":0,"creation_date":1569952556,"post_id":58086598,"comment_id":102759570,"body_markdown":"I am new to java, but by your answer, what i understand is : now we can use .java file as standalone program file and also can be used as crontab to automate small processes ? such as python can do ?","body":"I am new to java, but by your answer, what i understand is : now we can use .java file as standalone program file and also can be used as crontab to automate small processes ? such as python can do ?"}],"tags":[],"owner":{"account_id":7413926,"reputation":5474,"user_id":11374957,"display_name":"Kaan"},"comment_count":8,"down_vote_count":0,"up_vote_count":201,"is_accepted":true,"score":201,"last_activity_date":1569639108,"creation_date":1569351354,"answer_id":58086598,"question_id":58086412,"body_markdown":"Prior to Java 11, to run your code you have to first compile it, then you can run it. Here&#39;s an example:\r\n```\r\njavac test.java\r\njava test\r\n```\r\n\r\nSince Java 11, you can still do `javac` + `java`, or you can run `java` by itself to compile and auto-run your code. Note that no `.class` file will be generated. Here&#39;s an example:\r\n```\r\njava test.java\r\n```\r\n\r\nIf you run `java -help`, you&#39;ll see the various allowed usages. Here&#39;s what it looks like on my machine. The last one is what you ran into: `java [options] &lt;sourcefile&gt; [args]` which will &quot;execute a single source-file program&quot;.\r\n\r\n```\r\n$ java -help\r\nUsage: java [options] &lt;mainclass&gt; [args...]\r\n           (to execute a class)\r\n   or  java [options] -jar &lt;jarfile&gt; [args...]\r\n           (to execute a jar file)\r\n   or  java [options] -m &lt;module&gt;[/&lt;mainclass&gt;] [args...]\r\n       java [options] --module &lt;module&gt;[/&lt;mainclass&gt;] [args...]\r\n           (to execute the main class in a module)\r\n   or  java [options] &lt;sourcefile&gt; [args]\r\n           (to execute a single source-file program)\r\n```\r\n\r\n**UPDATE:**\r\n\r\nAs pointed out by @BillK, OP also asked:\r\n&gt; _why do we need the javac command?_\r\n\r\nThe reason we need `javac` is to create `.class` files so that code can be created, tested, distributed, run, shared, etc. like it is today. The motivation for [JEP 330](https://openjdk.java.net/jeps/330) was to make it easier for _&quot;early stages of learning Java, and when writing small utility programs&quot;_ without changing any other existing uses.","title":"Does the &#39;java&#39; command compile Java programs?","body":"<p>Prior to Java 11, to run your code you have to first compile it, then you can run it. Here's an example:</p>\n\n<pre><code>javac test.java\njava test\n</code></pre>\n\n<p>Since Java 11, you can still do <code>javac</code> + <code>java</code>, or you can run <code>java</code> by itself to compile and auto-run your code. Note that no <code>.class</code> file will be generated. Here's an example:</p>\n\n<pre><code>java test.java\n</code></pre>\n\n<p>If you run <code>java -help</code>, you'll see the various allowed usages. Here's what it looks like on my machine. The last one is what you ran into: <code>java [options] &lt;sourcefile&gt; [args]</code> which will \"execute a single source-file program\".</p>\n\n<pre><code>$ java -help\nUsage: java [options] &lt;mainclass&gt; [args...]\n           (to execute a class)\n   or  java [options] -jar &lt;jarfile&gt; [args...]\n           (to execute a jar file)\n   or  java [options] -m &lt;module&gt;[/&lt;mainclass&gt;] [args...]\n       java [options] --module &lt;module&gt;[/&lt;mainclass&gt;] [args...]\n           (to execute the main class in a module)\n   or  java [options] &lt;sourcefile&gt; [args]\n           (to execute a single source-file program)\n</code></pre>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>As pointed out by @BillK, OP also asked:</p>\n\n<blockquote>\n  <p><em>why do we need the javac command?</em></p>\n</blockquote>\n\n<p>The reason we need <code>javac</code> is to create <code>.class</code> files so that code can be created, tested, distributed, run, shared, etc. like it is today. The motivation for <a href=\"https://openjdk.java.net/jeps/330\" rel=\"noreferrer\">JEP 330</a> was to make it easier for <em>\"early stages of learning Java, and when writing small utility programs\"</em> without changing any other existing uses.</p>\n"},{"comments":[{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":7,"creation_date":1569430349,"post_id":58092047,"comment_id":102597612,"body_markdown":"This doesn&#39;t answer the question.","body":"This doesn&#39;t answer the question."},{"owner":{"account_id":3795627,"reputation":15279,"user_id":3150802,"accept_rate":55,"display_name":"Peter - Reinstate Monica"},"score":3,"creation_date":1569501077,"post_id":58092047,"comment_id":102622763,"body_markdown":"@DavidConrad But it does! The answer to &quot;Does the &#39;java&#39; command compile Java programs?&quot; is a resounding &quot;yes&quot; for the reasons hardlib gives here: it will compile byte code to native instructions just-in-time (for non-trivial programs, with standard settings).","body":"@DavidConrad But it does! The answer to &quot;Does the &#39;java&#39; command compile Java programs?&quot; is a resounding &quot;yes&quot; for the reasons hardlib gives here: it will compile byte code to native instructions just-in-time (for non-trivial programs, with standard settings)."},{"owner":{"account_id":8519,"reputation":175107,"user_id":15416,"accept_rate":63,"display_name":"MSalters"},"score":0,"creation_date":1569511317,"post_id":58092047,"comment_id":102628861,"body_markdown":"Is compilation now mandatory? Historically Java byte code could be interpreted; JIT compilation was optional.","body":"Is compilation now mandatory? Historically Java byte code could be interpreted; JIT compilation was optional."},{"owner":{"account_id":236814,"reputation":55993,"user_id":504554,"accept_rate":100,"display_name":"hardillb"},"score":0,"creation_date":1569511413,"post_id":58092047,"comment_id":102628901,"body_markdown":"The JIT is on by default these days (for a very long time), as show by the `mixed-mode` in the version output","body":"The JIT is on by default these days (for a very long time), as show by the <code>mixed-mode</code> in the version output"}],"tags":[],"owner":{"account_id":236814,"reputation":55993,"user_id":504554,"accept_rate":100,"display_name":"hardillb"},"comment_count":4,"down_vote_count":5,"up_vote_count":12,"is_accepted":false,"score":7,"last_activity_date":1569573355,"creation_date":1569391579,"answer_id":58092047,"question_id":58086412,"body_markdown":"Yes, but not in the way you probably mean.\r\n\r\nWhen you use the `javac` command to compile a .java file to a .class file the output is something called bytecode. Bytecode is a the machine code (native instructions) for a theoretical CPU based on the Java Virtual Machine specification.\r\n\r\nThis virtual CPU specification is sort of an average of types of CPUs that were common at the time the specification was written. Because of this it is close to lots of different types of CPU making it easier to run the same Java .class files on multiple CPU types.\r\n\r\nWhen Java was first launched the `java` command would read the .class file and interpret the bytecode instructions one at a time and then map them to the equivalent native instruction for what ever CPU it was actually running on. This worked but wasn&#39;t particularly fast. To improve this Just in Time (JIT) compilation was added to the Java Runtime.\r\n\r\nWith JIT the `java` command takes the bytecode and compiles it again to the native instructions for the CPU it is running on. Modern Java runtimes tend to start out interpreting the bytecode while JIT compiling in the background and switch to the compiled native instructions when it&#39;s ready and will also profile the running application and then recompile the bytecode again with different optimisation to get the best possible performance.\r\n\r\nEDIT (to appease the down voters):\r\n\r\nSo in your specific case (as you are running a JRE newer than v11) the code is compiled (at least) twice\r\n\r\n 1. As a single .java file to bytecode\r\n 2. Via the JIT compiler as it interprets the bytecode (though for helloWorld it might not actually get time to run any of the compiled native code)","title":"Does the &#39;java&#39; command compile Java programs?","body":"<p>Yes, but not in the way you probably mean.</p>\n\n<p>When you use the <code>javac</code> command to compile a .java file to a .class file the output is something called bytecode. Bytecode is a the machine code (native instructions) for a theoretical CPU based on the Java Virtual Machine specification.</p>\n\n<p>This virtual CPU specification is sort of an average of types of CPUs that were common at the time the specification was written. Because of this it is close to lots of different types of CPU making it easier to run the same Java .class files on multiple CPU types.</p>\n\n<p>When Java was first launched the <code>java</code> command would read the .class file and interpret the bytecode instructions one at a time and then map them to the equivalent native instruction for what ever CPU it was actually running on. This worked but wasn't particularly fast. To improve this Just in Time (JIT) compilation was added to the Java Runtime.</p>\n\n<p>With JIT the <code>java</code> command takes the bytecode and compiles it again to the native instructions for the CPU it is running on. Modern Java runtimes tend to start out interpreting the bytecode while JIT compiling in the background and switch to the compiled native instructions when it's ready and will also profile the running application and then recompile the bytecode again with different optimisation to get the best possible performance.</p>\n\n<p>EDIT (to appease the down voters):</p>\n\n<p>So in your specific case (as you are running a JRE newer than v11) the code is compiled (at least) twice</p>\n\n<ol>\n<li>As a single .java file to bytecode</li>\n<li>Via the JIT compiler as it interprets the bytecode (though for helloWorld it might not actually get time to run any of the compiled native code)</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":14952682,"reputation":15260,"user_id":10795151,"display_name":"S.S. Anne"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1569624249,"creation_date":1569624249,"answer_id":58141995,"question_id":58086412,"body_markdown":"To answer why this error is given, the class name for the file must match the file&#39;s `basename`.\r\n\r\nYou have two options to have this code work for the traditional `javac`; `java` sequence:\r\n\r\n1. Rename the class to `public class Hello` or\r\n\r\n2. Rename `hello.java` to `myclass.java`.\r\n\r\nThe `java` interpreter for Java 11 does not impose this requirement. The class that contains `main` can have any name, as long as it is the first class in the file. This was mainly intended to ease the learning process for beginners, and to allow &quot;java scripting&quot; with the shebang ([ref.][1]).\r\n\r\n  [1]: http://openjdk.java.net/jeps/330","title":"Does the &#39;java&#39; command compile Java programs?","body":"<p>To answer why this error is given, the class name for the file must match the file's <code>basename</code>.</p>\n\n<p>You have two options to have this code work for the traditional <code>javac</code>; <code>java</code> sequence:</p>\n\n<ol>\n<li><p>Rename the class to <code>public class Hello</code> or</p></li>\n<li><p>Rename <code>hello.java</code> to <code>myclass.java</code>.</p></li>\n</ol>\n\n<p>The <code>java</code> interpreter for Java 11 does not impose this requirement. The class that contains <code>main</code> can have any name, as long as it is the first class in the file. This was mainly intended to ease the learning process for beginners, and to allow \"java scripting\" with the shebang (<a href=\"http://openjdk.java.net/jeps/330\" rel=\"noreferrer\">ref.</a>).</p>\n"},{"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1688708153,"post_id":76633903,"comment_id":135112618,"body_markdown":"_and using java command we can compile the program_ Don&#39;t you mean: _and using java command we can RUN the program_ ?","body":"<i>and using java command we can compile the program</i> Don&#39;t you mean: <i>and using java command we can RUN the program</i> ?"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1688709232,"post_id":76633903,"comment_id":135112738,"body_markdown":"So [edit] your answer and correct it.","body":"So <a href=\"https://stackoverflow.com/posts/76633903/edit\">edit</a> your answer and correct it."},{"owner":{"account_id":28879742,"reputation":1,"user_id":22119456,"display_name":"Gokul Krishnan J"},"score":1,"creation_date":1688709706,"post_id":76633903,"comment_id":135112793,"body_markdown":"Yes we can run, the command to run the java file is using java filename. ie: simply create a file in notepad and enter the java code inside the file, the name of the file should same as the Main class in our code then save the file as Myclass.java(example), then open the command prompt and run javac Myclass.java it will create a class file in the location where file is created then use java Myclass to run the program, we can&#39;t simply run using java Myclass we have to convert it to class file using javac command so that virtual machine will read the code. Thanks,","body":"Yes we can run, the command to run the java file is using java filename. ie: simply create a file in notepad and enter the java code inside the file, the name of the file should same as the Main class in our code then save the file as Myclass.java(example), then open the command prompt and run javac Myclass.java it will create a class file in the location where file is created then use java Myclass to run the program, we can&#39;t simply run using java Myclass we have to convert it to class file using javac command so that virtual machine will read the code. Thanks,"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1688710059,"post_id":76633903,"comment_id":135112857,"body_markdown":"Just click on the link in my other comment and you can edit your answer. Your comment should be part of your answer.","body":"Just click on the link in my other comment and you can edit your answer. Your comment should be part of your answer."}],"tags":[],"owner":{"account_id":28879742,"reputation":1,"user_id":22119456,"display_name":"Gokul Krishnan J"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688710813,"creation_date":1688703184,"answer_id":76633903,"question_id":58086412,"body_markdown":"[enter image description here][1]The command to run the java file is using java filename. ie: simply create a file in notepad and enter the java code inside the file, the name of the file should same as the Main class in our code then save the file as Myclass.java(example), then open the command prompt and run javac Myclass.java it will create a class file in the location where file is created then use java Myclass to run the program, we can&#39;t simply run using java Myclass we have to convert it to class file using javac command so that virtual machine will read the code. \r\n\r\n\r\ncode:\r\n\r\nMain.java\r\n\r\n    public class Main\r\n    {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tSystem.out.println(&quot;Hello World&quot;);\r\n    \t}\r\n    }\r\n\r\nThanks.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Uruy7.png","title":"Does the &#39;java&#39; command compile Java programs?","body":"<p><a href=\"https://i.stack.imgur.com/Uruy7.png\" rel=\"nofollow noreferrer\">enter image description here</a>The command to run the java file is using java filename. ie: simply create a file in notepad and enter the java code inside the file, the name of the file should same as the Main class in our code then save the file as Myclass.java(example), then open the command prompt and run javac Myclass.java it will create a class file in the location where file is created then use java Myclass to run the program, we can't simply run using java Myclass we have to convert it to class file using javac command so that virtual machine will read the code.</p>\n<p>code:</p>\n<p>Main.java</p>\n<pre><code>public class Main\n{\n    public static void main(String[] args) {\n        System.out.println(&quot;Hello World&quot;);\n    }\n}\n</code></pre>\n<p>Thanks.</p>\n"}],"owner":{"account_id":14978393,"reputation":1874,"user_id":10813146,"display_name":"milad"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13340,"favorite_count":0,"down_vote_count":7,"up_vote_count":159,"accepted_answer_id":58086598,"answer_count":5,"score":152,"last_activity_date":1688710813,"creation_date":1569350512,"question_id":58086412,"body_markdown":"Most websites on the internet say:\r\n\r\n  &gt; *&quot;use the `javac` command to compile a `.java` file. Then run it using the `java` command&quot;*\r\n\r\nBut today I tried to run a java program without `javac` and I got a strange result.\r\n\r\nHere are the contents of a file called `hello.java`:\r\n\r\n    public class Myclass {\r\n     public static void main(String[] args){\r\n        System.out.println(&quot;hello world&quot;);\r\n      }\r\n    }\r\n\r\nThen I ran:\r\n\r\n    $ javac hello.java\r\n\r\nWhich gives me this error:\r\n\r\n    hello.java:1: error: class Myclass is public, should be declared in a file named Myclass.java\r\n    public class Myclass {\r\n           ^\r\n    1 error\r\n\r\nBut when I run it without the `javac` command, it executed without any errors.\r\n \r\n    $ java hello.java\r\n    hello world\r\n\r\nDoes the `java` command also compile the program? If yes, why do we need the `javac` command?\r\n\r\nThe version of my java is:\r\n\r\n    openjdk version &quot;12.0.2&quot; 2019-07-16\r\n    OpenJDK Runtime Environment (build 12.0.2+10)\r\n    OpenJDK 64-Bit Server VM (build 12.0.2+10, mixed mode)","title":"Does the &#39;java&#39; command compile Java programs?","body":"<p>Most websites on the internet say:</p>\n\n<blockquote>\n  <p><em>\"use the <code>javac</code> command to compile a <code>.java</code> file. Then run it using the <code>java</code> command\"</em></p>\n</blockquote>\n\n<p>But today I tried to run a java program without <code>javac</code> and I got a strange result.</p>\n\n<p>Here are the contents of a file called <code>hello.java</code>:</p>\n\n<pre><code>public class Myclass {\n public static void main(String[] args){\n    System.out.println(\"hello world\");\n  }\n}\n</code></pre>\n\n<p>Then I ran:</p>\n\n<pre><code>$ javac hello.java\n</code></pre>\n\n<p>Which gives me this error:</p>\n\n<pre><code>hello.java:1: error: class Myclass is public, should be declared in a file named Myclass.java\npublic class Myclass {\n       ^\n1 error\n</code></pre>\n\n<p>But when I run it without the <code>javac</code> command, it executed without any errors.</p>\n\n<pre><code>$ java hello.java\nhello world\n</code></pre>\n\n<p>Does the <code>java</code> command also compile the program? If yes, why do we need the <code>javac</code> command?</p>\n\n<p>The version of my java is:</p>\n\n<pre><code>openjdk version \"12.0.2\" 2019-07-16\nOpenJDK Runtime Environment (build 12.0.2+10)\nOpenJDK 64-Bit Server VM (build 12.0.2+10, mixed mode)\n</code></pre>\n"},{"tags":["java","android","firebase","google-cloud-platform","google-cloud-firestore"],"comments":[{"owner":{"account_id":426109,"reputation":302042,"user_id":807126,"display_name":"Doug Stevenson"},"score":3,"creation_date":1688670744,"post_id":76631678,"comment_id":135108748,"body_markdown":"I don&#39;t understand what you expect this code to do that&#39;s different than what you observe. Are you expecting a new document to automatically run your completion listener again?  That&#39;s not going to happen if you use `get()`. You need to use a realtime listener instead. https://firebase.google.com/docs/firestore/query-data/listen","body":"I don&#39;t understand what you expect this code to do that&#39;s different than what you observe. Are you expecting a new document to automatically run your completion listener again?  That&#39;s not going to happen if you use <code>get()</code>. You need to use a realtime listener instead. <a href=\"https://firebase.google.com/docs/firestore/query-data/listen\" rel=\"nofollow noreferrer\">firebase.google.com/docs/firestore/query-data/listen</a>"}],"answers":[{"comments":[{"owner":{"account_id":6379574,"reputation":188,"user_id":4949489,"display_name":"Brainwash"},"score":1,"creation_date":1688721086,"post_id":76634358,"comment_id":135114701,"body_markdown":"Thank you for answering. answer accepted. Thanks.","body":"Thank you for answering. answer accepted. Thanks."}],"tags":[],"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1688710628,"creation_date":1688710628,"answer_id":76634358,"question_id":76631678,"body_markdown":"&gt; Newly added documents are not returned by QuerySnapshot.\r\n\r\nThat&#39;s the expected behavior. As @DougStevenson mentioned in his comment, that&#39;s not possible when you&#39;re using [Query#get()][1]. This method reads that data only once. This means that you aren&#39;t notified about any change that is happening on the server. What you are looking for, is a [real-time listener][2]. In code that would be:\r\n\r\n```\r\ndb.collection(&quot;posts&quot;).addSnapshotListener(new EventListener&lt;QuerySnapshot&gt;() {\r\n            @Override\r\n            public void onEvent(@Nullable QuerySnapshot value,\r\n                                @Nullable FirebaseFirestoreException e) {\r\n                if (e != null) {\r\n                    Log.w(TAG, &quot;Listen failed.&quot;, e);\r\n                    return;\r\n                }\r\n\r\n                for (QueryDocumentSnapshot doc : value) {\r\n                    String title = document.getString(&quot;title&quot;);\r\n                    if (title != null) {\r\n                        Log.d(TAG, title);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n```\r\n\r\n\r\n  [1]: https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/Query#get()\r\n  [2]: https://firebase.google.com/docs/firestore/query-data/listen#java","title":"Google FireStore QuerySnapshot not returning newly added documents?","body":"<blockquote>\n<p>Newly added documents are not returned by QuerySnapshot.</p>\n</blockquote>\n<p>That's the expected behavior. As @DougStevenson mentioned in his comment, that's not possible when you're using <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/Query#get()\" rel=\"nofollow noreferrer\">Query#get()</a>. This method reads that data only once. This means that you aren't notified about any change that is happening on the server. What you are looking for, is a <a href=\"https://firebase.google.com/docs/firestore/query-data/listen#java\" rel=\"nofollow noreferrer\">real-time listener</a>. In code that would be:</p>\n<pre><code>db.collection(&quot;posts&quot;).addSnapshotListener(new EventListener&lt;QuerySnapshot&gt;() {\n            @Override\n            public void onEvent(@Nullable QuerySnapshot value,\n                                @Nullable FirebaseFirestoreException e) {\n                if (e != null) {\n                    Log.w(TAG, &quot;Listen failed.&quot;, e);\n                    return;\n                }\n\n                for (QueryDocumentSnapshot doc : value) {\n                    String title = document.getString(&quot;title&quot;);\n                    if (title != null) {\n                        Log.d(TAG, title);\n                    }\n                }\n            }\n        });\n</code></pre>\n"}],"owner":{"account_id":6379574,"reputation":188,"user_id":4949489,"display_name":"Brainwash"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76634358,"answer_count":1,"score":0,"last_activity_date":1688710664,"creation_date":1688668673,"question_id":76631678,"body_markdown":"For learning purposes, I created an android app and tried to fetch documents from Google Firestore, it worked fine and I was able to read data but later, when I added more documents in the Firestore console, the code is running but still returning me old records. Newly added documents are not returned by QuerySnapshot. I doubt, if it could be any cache issue or if is there any setting that I should change to read the latest documents or to avoid cached records?\r\nany suggestion?\r\n\r\nBelow is the code snippet, I was considering reading the Documents -\r\n\r\n````\r\n            db.collection(&quot;posts&quot;)\r\n                .get()\r\n                .addOnCompleteListener(task -&gt; {\r\n                    if (task.isSuccessful()) {\r\n                        QuerySnapshot querySnapshot = task.getResult();\r\n\r\n                        // Iterate over the documents in the snapshot\r\n                        for (QueryDocumentSnapshot document : querySnapshot) {\r\n                              String title = document.getString(&quot;title&quot;);\r\n                              // printing title in logs\r\n                         }\r\n                       } else{\r\n                             // some else part\r\n                            }\r\n                        });\r\n\r\n````","title":"Google FireStore QuerySnapshot not returning newly added documents?","body":"<p>For learning purposes, I created an android app and tried to fetch documents from Google Firestore, it worked fine and I was able to read data but later, when I added more documents in the Firestore console, the code is running but still returning me old records. Newly added documents are not returned by QuerySnapshot. I doubt, if it could be any cache issue or if is there any setting that I should change to read the latest documents or to avoid cached records?\nany suggestion?</p>\n<p>Below is the code snippet, I was considering reading the Documents -</p>\n<pre><code>            db.collection(&quot;posts&quot;)\n                .get()\n                .addOnCompleteListener(task -&gt; {\n                    if (task.isSuccessful()) {\n                        QuerySnapshot querySnapshot = task.getResult();\n\n                        // Iterate over the documents in the snapshot\n                        for (QueryDocumentSnapshot document : querySnapshot) {\n                              String title = document.getString(&quot;title&quot;);\n                              // printing title in logs\n                         }\n                       } else{\n                             // some else part\n                            }\n                        });\n\n</code></pre>\n"},{"tags":["java","generics","interface","static","java-8"],"comments":[{"owner":{"account_id":428023,"reputation":15099,"user_id":810077,"accept_rate":83,"display_name":"Chetan Kinger"},"score":1,"creation_date":1511341894,"post_id":47430424,"comment_id":81815754,"body_markdown":"Not completely sure if this question specifically needs to be about Java 8 and interfaces. The same rules apply for classes in general as well when it comes to `static` methods trying to use a type parameter defined for the `class`?","body":"Not completely sure if this question specifically needs to be about Java 8 and interfaces. The same rules apply for classes in general as well when it comes to <code>static</code> methods trying to use a type parameter defined for the <code>class</code>?"},{"owner":{"account_id":8673368,"reputation":408,"user_id":6491515,"display_name":"Leon"},"score":0,"creation_date":1511342169,"post_id":47430424,"comment_id":81815912,"body_markdown":"@CKing the ability to have static methods in interfaces is Java8 specific and the problem in hand occurred through using an interface with generics. So added tags accordingly. The ``` breaks because T and ID are not static and cant be referenced from a static context ``` should probably still occur if  DbValuesEnumIface was a class I merely extended in a subclass though if thats what you mean. There may be some kinks unique to it being an interface in the example so thats why this info was added.","body":"@CKing the ability to have static methods in interfaces is Java8 specific and the problem in hand occurred through using an interface with generics. So added tags accordingly. The ``` breaks because T and ID are not static and cant be referenced from a static context ``` should probably still occur if  DbValuesEnumIface was a class I merely extended in a subclass though if thats what you mean. There may be some kinks unique to it being an interface in the example so thats why this info was added."},{"owner":{"account_id":428023,"reputation":15099,"user_id":810077,"accept_rate":83,"display_name":"Chetan Kinger"},"score":1,"creation_date":1511342692,"post_id":47430424,"comment_id":81816272,"body_markdown":"No kinks. Class or interface. Generic type parameters follow the same rules. Static is static and instance is instance. Moreover, `T.values` where `T` is a class or method type parameter (regardless of `static`) defies the syntax rules for the language. Please do post an example that considers the language rules specially when the question is not language agnostic? More importantly, a question that talks about compilation errors should surely eliminate all compilation errors not related to the direct question IMO.","body":"No kinks. Class or interface. Generic type parameters follow the same rules. Static is static and instance is instance. Moreover, <code>T.values</code> where <code>T</code> is a class or method type parameter (regardless of <code>static</code>) defies the syntax rules for the language. Please do post an example that considers the language rules specially when the question is not language agnostic? More importantly, a question that talks about compilation errors should surely eliminate all compilation errors not related to the direct question IMO."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1511346112,"post_id":47430424,"comment_id":81818522,"body_markdown":"Actually, there is an interface specific difference. For ordinary classes, you can invoke a `static` method of `SuperClass` like `SubClass.method()`, raising the expectation that the parameterization of the inheritance  (e.g. `class SubClass extends SuperClass&lt;SpecificType&gt;`) can be used, which disappointingly doesnt work. In contrast, `static` methods of interfaces are not inherited in the first place. So you cant do `Statuses.fromId()`, but only `DbValuesEnumIface.fromId()`, which obviously needs an explicit hint about `Statuses` being the class to be searched.","body":"Actually, there is an interface specific difference. For ordinary classes, you can invoke a <code>static</code> method of <code>SuperClass</code> like <code>SubClass.method()</code>, raising the expectation that the parameterization of the inheritance  (e.g. <code>class SubClass extends SuperClass&lt;SpecificType&gt;</code>) can be used, which disappointingly doesnt work. In contrast, <code>static</code> methods of interfaces are not inherited in the first place. So you cant do <code>Statuses.fromId()</code>, but only <code>DbValuesEnumIface.fromId()</code>, which obviously needs an explicit hint about <code>Statuses</code> being the class to be searched."},{"owner":{"account_id":8673368,"reputation":408,"user_id":6491515,"display_name":"Leon"},"score":0,"creation_date":1511346482,"post_id":47430424,"comment_id":81818787,"body_markdown":"@Holger  &quot;static methods of interfaces are not inherited in the first place&quot;\nExactly. While you can use default methods (that one can argue lead to same problems) and Java can resolve conflicts, static methods are treated differently.","body":"@Holger  &quot;static methods of interfaces are not inherited in the first place&quot; Exactly. While you can use default methods (that one can argue lead to same problems) and Java can resolve conflicts, static methods are treated differently."}],"answers":[{"comments":[{"owner":{"account_id":8673368,"reputation":408,"user_id":6491515,"display_name":"Leon"},"score":0,"creation_date":1511341904,"post_id":47430554,"comment_id":81815763,"body_markdown":"My bad, I accidentally pasted the wrong method signature. Right one within the interface should be T fromId(ID id) . I did try to change static to default but it doesnt recognize the values() method in   for (T en : T.values()) . You may be on to something here though, I ll look into this approach some more as well.","body":"My bad, I accidentally pasted the wrong method signature. Right one within the interface should be T fromId(ID id) . I did try to change static to default but it doesnt recognize the values() method in   for (T en : T.values()) . You may be on to something here though, I ll look into this approach some more as well."},{"owner":{"account_id":428023,"reputation":15099,"user_id":810077,"accept_rate":83,"display_name":"Chetan Kinger"},"score":1,"creation_date":1511342836,"post_id":47430554,"comment_id":81816371,"body_markdown":"@Leon It doesn&#39;t recognise the values method because `T` is a type parameter and not a reference. This has got nothing to do with interfaces or default methods or static methods as such. Perhaps read up on generics syntax first and move on to more trickier topics such as this one?","body":"@Leon It doesn&#39;t recognise the values method because <code>T</code> is a type parameter and not a reference. This has got nothing to do with interfaces or default methods or static methods as such. Perhaps read up on generics syntax first and move on to more trickier topics such as this one?"}],"tags":[],"owner":{"account_id":8756040,"reputation":317,"user_id":6547603,"display_name":"fhery021"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1511341471,"creation_date":1511341471,"answer_id":47430554,"question_id":47430424,"body_markdown":"You can change from `static` to `default` and it will compile successfully.\r\n\r\n`default EvaluationStatuses fromId(Integer id)`\r\n\r\n","title":"Static Method in Interface with Generic signature","body":"<p>You can change from <code>static</code> to <code>default</code> and it will compile successfully.</p>\n\n<p><code>default EvaluationStatuses fromId(Integer id)</code></p>\n"},{"comments":[{"owner":{"account_id":8673368,"reputation":408,"user_id":6491515,"display_name":"Leon"},"score":0,"creation_date":1511344232,"post_id":47431082,"comment_id":81817304,"body_markdown":"Very thorough answer, I ll read the link provided as well as your suggestion. If nothing better comes up today I ll make sure to accept this answer. Thank you.","body":"Very thorough answer, I ll read the link provided as well as your suggestion. If nothing better comes up today I ll make sure to accept this answer. Thank you."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1511345637,"post_id":47431082,"comment_id":81818191,"body_markdown":"If you have the `Class` parameter, you already have what you need, there is no reason to change the method from `static` to `default`. You only need to declare that the `Class` must be an `enum` and implement the desired interface and ironically, you show how to do such things in your last line.","body":"If you have the <code>Class</code> parameter, you already have what you need, there is no reason to change the method from <code>static</code> to <code>default</code>. You only need to declare that the <code>Class</code> must be an <code>enum</code> and implement the desired interface and ironically, you show how to do such things in your last line."}],"tags":[],"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1511343176,"creation_date":1511343176,"answer_id":47431082,"question_id":47430424,"body_markdown":"There is no easy way as far as I can tell, first you need to change your method to `default`, you can read more [here][1] of why you can&#39;t use generics in a static context.\r\n\r\nBut even if you change it to `default` things are still not going to work, since you need to pass an instance or class type of the enum to that method, something like this:\r\n\r\n\r\n    public default T fromId(ID id, Class&lt;T&gt; t) {\r\n            if (id == null) {\r\n                return null;\r\n            }\r\n            for (T en : t.getEnumConstants()) {\r\n                // dome something\r\n            }\r\n            return null;\r\n    }\r\n\r\nNow you are hitting another problem, inside `fromId` - the only thing that you know is that `T` extends an `enum` - not your enum may be, thus `getId` (which seems that your enums have) are simply not known by the compiler.\r\n\r\nI don&#39;t know an easy way to make this work besides declaring an interface, like :\r\n\r\n\r\n    interface IID {\r\n        public int getId();\r\n    } \r\n\r\nmaking your `enum` implement it:\r\n\r\n    static enum My implements IID {\r\n        A {\r\n\r\n            @Override\r\n            public int getId() {\r\n                // TODO Auto-generated method stub\r\n                return 0;\r\n            }\r\n\r\n        };\r\n    }\r\n\r\nand change the declaration to:\r\n\r\n\r\n    public interface DbValuesEnumIface&lt;ID, T extends Enum&lt;My&gt; &amp; IID&gt;\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/936377/static-method-in-a-generic-class","title":"Static Method in Interface with Generic signature","body":"<p>There is no easy way as far as I can tell, first you need to change your method to <code>default</code>, you can read more <a href=\"https://stackoverflow.com/questions/936377/static-method-in-a-generic-class\">here</a> of why you can't use generics in a static context.</p>\n\n<p>But even if you change it to <code>default</code> things are still not going to work, since you need to pass an instance or class type of the enum to that method, something like this:</p>\n\n<pre><code>public default T fromId(ID id, Class&lt;T&gt; t) {\n        if (id == null) {\n            return null;\n        }\n        for (T en : t.getEnumConstants()) {\n            // dome something\n        }\n        return null;\n}\n</code></pre>\n\n<p>Now you are hitting another problem, inside <code>fromId</code> - the only thing that you know is that <code>T</code> extends an <code>enum</code> - not your enum may be, thus <code>getId</code> (which seems that your enums have) are simply not known by the compiler.</p>\n\n<p>I don't know an easy way to make this work besides declaring an interface, like :</p>\n\n<pre><code>interface IID {\n    public int getId();\n} \n</code></pre>\n\n<p>making your <code>enum</code> implement it:</p>\n\n<pre><code>static enum My implements IID {\n    A {\n\n        @Override\n        public int getId() {\n            // TODO Auto-generated method stub\n            return 0;\n        }\n\n    };\n}\n</code></pre>\n\n<p>and change the declaration to:</p>\n\n<pre><code>public interface DbValuesEnumIface&lt;ID, T extends Enum&lt;My&gt; &amp; IID&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1511346564,"post_id":47431820,"comment_id":81818844,"body_markdown":"hm.. but that means that the generics declared at the interface level and the method level and un-related right?","body":"hm.. but that means that the generics declared at the interface level and the method level and un-related right?"},{"owner":{"account_id":8673368,"reputation":408,"user_id":6491515,"display_name":"Leon"},"score":0,"creation_date":1511346935,"post_id":47431820,"comment_id":81819115,"body_markdown":"So if I get it right from yours and Eugene&#39;s answers, there is no way to possibly call fromID through Statuses and when calling the method through the Interface name, I must pass a 2nd argument in fromId for the class desired to be used. Right?","body":"So if I get it right from yours and Eugene&#39;s answers, there is no way to possibly call fromID through Statuses and when calling the method through the Interface name, I must pass a 2nd argument in fromId for the class desired to be used. Right?"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1511348744,"post_id":47431820,"comment_id":81820360,"body_markdown":"@Leon: yes. The only thing you can do, is to add a simple delegating method to each `enum`, e.g. add `public static Statuses fromId(Integer id) { return DbValuesEnumIface.fromId(id, Statuses.class); }` to `Statuses`, which is still better than repeating the entire implementation in each `enum`","body":"@Leon: yes. The only thing you can do, is to add a simple delegating method to each <code>enum</code>, e.g. add <code>public static Statuses fromId(Integer id) { return DbValuesEnumIface.fromId(id, Statuses.class); }</code> to <code>Statuses</code>, which is still better than repeating the entire implementation in each <code>enum</code>"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1511348918,"post_id":47431820,"comment_id":81820470,"body_markdown":"@Eugene: right, the methods type parameters are unrelated (thats why I even suggested giving them different names); its the constraints, i.e. `X extends Enum&lt;X&gt;&amp;DbValuesEnumIface&lt;ID,X&gt;` which enforce type arguments to have a compatible inheritance, as only `enum` types implementing `DbValuesEnumIface` with a proper parameterization can fulfill the constraints.","body":"@Eugene: right, the methods type parameters are unrelated (thats why I even suggested giving them different names); its the constraints, i.e. <code>X extends Enum&lt;X&gt;&amp;DbValuesEnumIface&lt;ID,X&gt;</code> which enforce type arguments to have a compatible inheritance, as only <code>enum</code> types implementing <code>DbValuesEnumIface</code> with a proper parameterization can fulfill the constraints."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1511349883,"post_id":47431820,"comment_id":81821101,"body_markdown":"@Eugene: I just realized that there is a solution for `default` methods that doesnt need the additional `Class` parameter (updated my answer), however, I dont know whether having to invoke the method on an existing instance is better than providing a class literal as argument","body":"@Eugene: I just realized that there is a solution for <code>default</code> methods that doesnt need the additional <code>Class</code> parameter (updated my answer), however, I dont know whether having to invoke the method on an existing instance is better than providing a class literal as argument"},{"owner":{"account_id":8673368,"reputation":408,"user_id":6491515,"display_name":"Leon"},"score":0,"creation_date":1511350488,"post_id":47431820,"comment_id":81821526,"body_markdown":"Thank you both for your detailed answers, you ve been very informative.","body":"Thank you both for your detailed answers, you ve been very informative."},{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1511350650,"post_id":47431820,"comment_id":81821633,"body_markdown":"@Holger that&#39;s very neat! what I don&#39;t like (is that the very first time on your answers? :) ) is that you sort of say `Fruit apple = Fruit.banana.getId(42)` if I understood everything correctly...","body":"@Holger that&#39;s very neat! what I don&#39;t like (is that the very first time on your answers? :) ) is that you sort of say <code>Fruit apple = Fruit.banana.getId(42)</code> if I understood everything correctly..."},{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1511351334,"post_id":47431820,"comment_id":81822053,"body_markdown":"@Holger besides being an interface and anyone could extend this... unless we will finally get sealed interfaces in jdk-10. Your addition deserves a plus 2, unfortunately SO does not allow me to do this.","body":"@Holger besides being an interface and anyone could extend this... unless we will finally get sealed interfaces in jdk-10. Your addition deserves a plus 2, unfortunately SO does not allow me to do this."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1511353124,"post_id":47431820,"comment_id":81823193,"body_markdown":"@Eugene: anyone can implement the interface, but no-one can provide a type for `T` that isnt an `enum` *and* an appropriate implementation of this interface at the same time. So if you create an inappropriate interface, it would still have to point to an appropriate implementation of the interface for `T`. You cant write bullet-proof software, but you shouldnt even try. Guiding the implementors into the right direction is enough.","body":"@Eugene: anyone can implement the interface, but no-one can provide a type for <code>T</code> that isnt an <code>enum</code> <i>and</i> an appropriate implementation of this interface at the same time. So if you create an inappropriate interface, it would still have to point to an appropriate implementation of the interface for <code>T</code>. You cant write bullet-proof software, but you shouldnt even try. Guiding the implementors into the right direction is enough."}],"tags":[],"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"comment_count":9,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1688710438,"creation_date":1511345284,"answer_id":47431820,"question_id":47430424,"body_markdown":"Since there is no relationship between `static` methods and the classs type parameters, which describe how instances are parameterized, you have to make the `static` method generic on its own. The tricky part is to get the declarations right to describe all needed constraints. And, as [this answer] already explained, you need to add a `Class` parameter, as otherwise, the implementation has no chance to get hands on the actual type arguments:\r\n\r\n```java\r\npublic interface DbValuesEnumIface&lt;ID, T extends Enum&lt;T&gt;&gt; {\r\n\r\n   public static &lt;ID, T extends Enum&lt;T&gt; &amp; DbValuesEnumIface&lt;ID, T&gt;&gt;\r\n   T fromId(ID id, Class&lt;T&gt; type) {\r\n\r\n        if (id == null) {\r\n            return null;\r\n        }\r\n        for (T en : type.getEnumConstants()) {\r\n            if (en.getId().equals(id)) {\r\n                return en;\r\n            }\r\n        }\r\n        throw new NoSuchElementException();\r\n    }\r\n\r\n    ID getId();\r\n\r\n    String getDescriptionKey();\r\n}\r\n```\r\n\r\nNote that the type parameters of the `static` method are independent from the classs type parameter. You may consider giving them different names for clarity.\r\n\r\nSo now, given you `enum Statuses implements DbValuesEnumIface&lt;Integer,Statuses&gt;` example, you can use the method like `Statuses status = DbValuesEnumIface.fromId(42, Statuses.class);`\r\n\r\n---\r\n\r\nNote that for `default` methods, it is possible to access the actual type, as a [method providing the `enum` type] will be provided by the implementation. You only have to declare the presence of the method within the `interface`:\r\n\r\n```java\r\npublic interface DbValuesEnumIface&lt;ID, T extends Enum&lt;T&gt;&amp;DbValuesEnumIface&lt;ID,T&gt;&gt; {\r\n\r\n    public default T fromId(ID id) {\r\n        if (id == null) {\r\n            return null;\r\n        }\r\n        for (T en : getDeclaringClass().getEnumConstants()) {\r\n            if (en.getId().equals(id)) {\r\n                return en;\r\n            }\r\n        }\r\n        throw new NoSuchElementException();\r\n    }\r\n\r\n    //no needed to implement it, inherited by java.lang.Enum\r\n    Class&lt;T&gt; getDeclaringClass();\r\n\r\n    ID getId();\r\n\r\n    String getDescriptionKey();\r\n}\r\n```\r\n\r\nHowever, the obvious disadvantage is that you need a target instance to invoke the method, i.e. `Statuses status = Statuses.SOME_CONSTANT.fromId(42);`\r\n\r\n[this answer]: https://stackoverflow.com/a/47431082/2711488\r\n[method providing the `enum` type]: https://docs.oracle.com/javase/8/docs/api/java/lang/Enum.html#getDeclaringClass--","title":"Static Method in Interface with Generic signature","body":"<p>Since there is no relationship between <code>static</code> methods and the classs type parameters, which describe how instances are parameterized, you have to make the <code>static</code> method generic on its own. The tricky part is to get the declarations right to describe all needed constraints. And, as <a href=\"https://stackoverflow.com/a/47431082/2711488\">this answer</a> already explained, you need to add a <code>Class</code> parameter, as otherwise, the implementation has no chance to get hands on the actual type arguments:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface DbValuesEnumIface&lt;ID, T extends Enum&lt;T&gt;&gt; {\n\n   public static &lt;ID, T extends Enum&lt;T&gt; &amp; DbValuesEnumIface&lt;ID, T&gt;&gt;\n   T fromId(ID id, Class&lt;T&gt; type) {\n\n        if (id == null) {\n            return null;\n        }\n        for (T en : type.getEnumConstants()) {\n            if (en.getId().equals(id)) {\n                return en;\n            }\n        }\n        throw new NoSuchElementException();\n    }\n\n    ID getId();\n\n    String getDescriptionKey();\n}\n</code></pre>\n<p>Note that the type parameters of the <code>static</code> method are independent from the classs type parameter. You may consider giving them different names for clarity.</p>\n<p>So now, given you <code>enum Statuses implements DbValuesEnumIface&lt;Integer,Statuses&gt;</code> example, you can use the method like <code>Statuses status = DbValuesEnumIface.fromId(42, Statuses.class);</code></p>\n<hr />\n<p>Note that for <code>default</code> methods, it is possible to access the actual type, as a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Enum.html#getDeclaringClass--\" rel=\"nofollow noreferrer\">method providing the <code>enum</code> type</a> will be provided by the implementation. You only have to declare the presence of the method within the <code>interface</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface DbValuesEnumIface&lt;ID, T extends Enum&lt;T&gt;&amp;DbValuesEnumIface&lt;ID,T&gt;&gt; {\n\n    public default T fromId(ID id) {\n        if (id == null) {\n            return null;\n        }\n        for (T en : getDeclaringClass().getEnumConstants()) {\n            if (en.getId().equals(id)) {\n                return en;\n            }\n        }\n        throw new NoSuchElementException();\n    }\n\n    //no needed to implement it, inherited by java.lang.Enum\n    Class&lt;T&gt; getDeclaringClass();\n\n    ID getId();\n\n    String getDescriptionKey();\n}\n</code></pre>\n<p>However, the obvious disadvantage is that you need a target instance to invoke the method, i.e. <code>Statuses status = Statuses.SOME_CONSTANT.fromId(42);</code></p>\n"}],"owner":{"account_id":8673368,"reputation":408,"user_id":6491515,"display_name":"Leon"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6810,"favorite_count":0,"down_vote_count":1,"up_vote_count":13,"accepted_answer_id":47431820,"answer_count":3,"score":12,"last_activity_date":1688710438,"creation_date":1511341039,"question_id":47430424,"body_markdown":"As of Java 8 you can have default or static methods implemented in Interfaces as the below\r\n\r\n    public interface DbValuesEnumIface&lt;ID, T extends Enum&lt;T&gt;&gt; {\r\n       T fromId(ID id);\r\n\r\n       ID getId();\r\n       static String getDescriptionKey(){\r\n          return &quot;this is a test&quot;;\r\n       }\r\n    }\r\n\r\n\r\nI would like to declare the above with the static method having a signature that uses bounds defined by the implementing classes since the method&#39;s implementation should be the same for all,with the only thing different should be the generics declared, as such:\r\n\r\n    public interface DbValuesEnumIface&lt;ID, T extends Enum&lt;T&gt;&gt; {\r\n      \r\n       public static T fromId(ID id) {\r\n            if (id == null) {\r\n                return null;\r\n            }\r\n            for (T en : T.values()) {\r\n                if (en.getId().equals(id)) {\r\n                    return en;\r\n                }\r\n            }\r\n        }\r\n    \r\n        ID getId();\r\n    \r\n        String getDescriptionKey();\r\n    }\r\n    ...\r\n    public enum Statuses implements DbValuesEnumIface&lt;Integer,Statuses&gt;\r\n\r\nwhich breaks because T and ID are not static and cant be referenced from a static context.\r\n\r\n So, how should the above be modified to compile successfully and if thats not possible, how the above should be implemented to achieve the desired purpose while avoiding code duplication within implementing classes .","title":"Static Method in Interface with Generic signature","body":"<p>As of Java 8 you can have default or static methods implemented in Interfaces as the below</p>\n\n<pre><code>public interface DbValuesEnumIface&lt;ID, T extends Enum&lt;T&gt;&gt; {\n   T fromId(ID id);\n\n   ID getId();\n   static String getDescriptionKey(){\n      return \"this is a test\";\n   }\n}\n</code></pre>\n\n<p>I would like to declare the above with the static method having a signature that uses bounds defined by the implementing classes since the method's implementation should be the same for all,with the only thing different should be the generics declared, as such:</p>\n\n<pre><code>public interface DbValuesEnumIface&lt;ID, T extends Enum&lt;T&gt;&gt; {\n\n   public static T fromId(ID id) {\n        if (id == null) {\n            return null;\n        }\n        for (T en : T.values()) {\n            if (en.getId().equals(id)) {\n                return en;\n            }\n        }\n    }\n\n    ID getId();\n\n    String getDescriptionKey();\n}\n...\npublic enum Statuses implements DbValuesEnumIface&lt;Integer,Statuses&gt;\n</code></pre>\n\n<p>which breaks because T and ID are not static and cant be referenced from a static context.</p>\n\n<p>So, how should the above be modified to compile successfully and if thats not possible, how the above should be implemented to achieve the desired purpose while avoiding code duplication within implementing classes .</p>\n"},{"tags":["java","android","c","matlab","java-native-interface"],"answers":[{"tags":[],"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1688630099,"creation_date":1688630099,"answer_id":76626656,"question_id":76624398,"body_markdown":"I do not see how any of this can work.\r\nA java `byte[]` is an object that represents a **one-dimensional** array. On the JNI side this is an opaque `jbyteArray` object.\r\nBy &quot;opaque&quot; I mean that you cannot use this value by itself, you must use JNI functions like `GetByteArryaElements` to get a pointer to (a copy of) the actual byte array.\r\nYet your Matlab code treats it as a four-dimensional array.\r\n\r\nA three-dimensional array `arr` would be a `byte[][][]`, for example. On the JNI side this is an opaque `jobjectArray` where the types of the layers are, in order:\r\n- `arr` has type `byte[][][]` and JNI type `jobjectArray`\r\n- `arr[x]` has type `byte[][]` and JNI type `jobjectArray`\r\n- `arr[x][y]` has type `byte[]` and JNI type `jbyteArray`\r\n\r\nSo on the input side there are a number of  options:\r\n- you either get your video as a flat `byte[]`, in which case you need to use the Matlab emx API to unpack it as a four-dimensional vector. This requires extracting the dimensions of each layer (or just &quot;knowing&quot; them).\r\n- if it is truly a deeply nested array, you have to assemble the Matlab input array layer by layer. This will be deeply painful and very heavy on the garbage collector.\r\n\r\nOn the output side you have the reverse problem: do you represent it as a flat one-dimensional array, the fully three-dimensional (if I read your Matlab code correctly) array, or something inbetween? In my opinion the most natural way is to create a small helper class `Rect` that decorates a `byte[]` with width and height and then return a `Rect[][]`, where you have one `Rect[]` per input frame.\r\n\r\nFinally, if performance is at all in the picture you will want to look at direct byte buffers, which are just chunks of native memory you can pass from Java to native code without copying.","title":"How to return an array of unknown size from a JNI C function to Java in Android?","body":"<p>I do not see how any of this can work.\nA java <code>byte[]</code> is an object that represents a <strong>one-dimensional</strong> array. On the JNI side this is an opaque <code>jbyteArray</code> object.\nBy &quot;opaque&quot; I mean that you cannot use this value by itself, you must use JNI functions like <code>GetByteArryaElements</code> to get a pointer to (a copy of) the actual byte array.\nYet your Matlab code treats it as a four-dimensional array.</p>\n<p>A three-dimensional array <code>arr</code> would be a <code>byte[][][]</code>, for example. On the JNI side this is an opaque <code>jobjectArray</code> where the types of the layers are, in order:</p>\n<ul>\n<li><code>arr</code> has type <code>byte[][][]</code> and JNI type <code>jobjectArray</code></li>\n<li><code>arr[x]</code> has type <code>byte[][]</code> and JNI type <code>jobjectArray</code></li>\n<li><code>arr[x][y]</code> has type <code>byte[]</code> and JNI type <code>jbyteArray</code></li>\n</ul>\n<p>So on the input side there are a number of  options:</p>\n<ul>\n<li>you either get your video as a flat <code>byte[]</code>, in which case you need to use the Matlab emx API to unpack it as a four-dimensional vector. This requires extracting the dimensions of each layer (or just &quot;knowing&quot; them).</li>\n<li>if it is truly a deeply nested array, you have to assemble the Matlab input array layer by layer. This will be deeply painful and very heavy on the garbage collector.</li>\n</ul>\n<p>On the output side you have the reverse problem: do you represent it as a flat one-dimensional array, the fully three-dimensional (if I read your Matlab code correctly) array, or something inbetween? In my opinion the most natural way is to create a small helper class <code>Rect</code> that decorates a <code>byte[]</code> with width and height and then return a <code>Rect[][]</code>, where you have one <code>Rect[]</code> per input frame.</p>\n<p>Finally, if performance is at all in the picture you will want to look at direct byte buffers, which are just chunks of native memory you can pass from Java to native code without copying.</p>\n"},{"tags":[],"owner":{"account_id":4831287,"reputation":11388,"user_id":3899431,"display_name":"Luis Colorado"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688710041,"creation_date":1688710041,"answer_id":76634318,"question_id":76624398,"body_markdown":"IMHO you&#39;ll have to build a java array.  I think you should know the array size before returning the array back to java.  Look in the JNI documentation how to create a Java array of one of the basic types of Java.\r\n\r\nHow then is java to be capable to determine the array size?  Java arrays are objects, not as simple as arrays in C (which comprise just the plain array elements, one after the other) an array has an immutable `length` element and the array elements stored in its instance.  Just dig in JNDI documentation to get how to create a java array from the C helpers library.","title":"How to return an array of unknown size from a JNI C function to Java in Android?","body":"<p>IMHO you'll have to build a java array.  I think you should know the array size before returning the array back to java.  Look in the JNI documentation how to create a Java array of one of the basic types of Java.</p>\n<p>How then is java to be capable to determine the array size?  Java arrays are objects, not as simple as arrays in C (which comprise just the plain array elements, one after the other) an array has an immutable <code>length</code> element and the array elements stored in its instance.  Just dig in JNDI documentation to get how to create a java array from the C helpers library.</p>\n"}],"owner":{"account_id":20366371,"reputation":55,"user_id":14939620,"display_name":"Matheus Fortunato Alves"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1688710041,"creation_date":1688595742,"question_id":76624398,"body_markdown":"I&#39;ve converted a MATLAB script to C using MATLAB Coder. The script takes a video in uint8 format as an input, performs an object detection task using a customized YOLOv4 DL network to identify objects of interest and creates a new uint8 array (video) cropped within the object boundaries (see code below):\r\n\r\n``` \r\nfunction [I] = Android3(Vrecorded)\r\n\r\n%#codegen\r\n% Loads and created pretrained YOLO v4 DL NW detector customized \r\n% to detect LED array.\r\n\r\ndetector = coder.loadDeepLearningNetwork(&quot;trainedDetector_23022023.mat&quot;);\r\n\r\n% Read all frames as grayscale images\r\nframes = reshape(Vrecorded(:,:,1,:), size(Vrecorded,1), size(Vrecorded,2), []);\r\n\r\n% extrai o n&#250;mero de quadros do v&#237;deo capturado (NoF - Number of Frames)\r\nNoF = size(frames,3);\r\n\r\n%Detect objects in an unknown image / video by using the pretrained YOLO v4\r\nFrameForDetection = zeros(size(Vrecorded,1),size(Vrecorded,2),3);\r\nFrameForDetection(:,:,:) = Vrecorded(:,:,:,1);\r\n\r\n%object detector\r\n[bboxes,~,~] = detect(detector,FrameForDetection);\r\n\r\n% This cell contains the cropped frames containing RoI after YOLO v4 object\r\n% detection algoritm process the frames\r\ncroppedFrameVectors = cell(1,1);\r\n\r\nsizes = imcrop(frames(:,:,1),bboxes(1,:));\r\n\r\ncroppedFrames = zeros(size(sizes,1),size(sizes,2),NoF);\r\n\r\nfor n = 1:1\r\n    croppedFrameVectors{n} = rand(0,0,0);\r\n    for k = 1:NoF\r\n        % crops the frames in each detected object according to bounding\r\n        % boxes results captured on the first frame\r\n        croppedFrames(:,:,k) = imcrop(frames(:,:,k),bboxes(1,:));\r\n    end\r\n    % Insert the cropped frames with bounding boxes within a cell to allow\r\n    % multiple cropped objects within the same variable\r\n    croppedFrameVectors{n} = croppedFrames;\r\n    % Erase variable to crop another object due to bbox different\r\n    % dimensions from one object to another (widht x height)\r\nend\r\n\r\nI = croppedFrameVectors{1};\r\n``` \r\n\r\nWhere Vrecorded is a video matriz of size 240x320xF, and F vary depending on the input video.\r\n\r\nAfter converting it to C and trying to adjust it to JNI syntax, this is what I have so far: \r\n\r\n``` \r\n#include &lt;jni.h&gt;\r\n/* Include files */\r\n#include &quot;main.h&quot;\r\n#include &quot;Android3.h&quot;\r\n#include &quot;Android3_emxAPI.h&quot;\r\n#include &quot;Android3_terminate.h&quot;\r\n#include &quot;Android3_types.h&quot;\r\n#include &quot;rt_nonfinite.h&quot;\r\n#include &lt;android/log.h&gt;\r\n\r\n\r\nJNIEXPORT jbyteArray JNICALL\r\nJava_com_example_occ_MainActivity_teste(JNIEnv *env, jobject thiz, jbyteArray Vrecorded) {\r\n    emxArray_real_T *b_I;\r\n    //emxArray_uint8_T *Vrecorded;\r\n\r\n    // Call the entry-point function &#39;Android3&#39;\r\n    emxInitArray_real_T(&amp;b_I, 3);\r\n    Android3(Vrecorded, b_I);\r\n\r\n    // Clean up memory\r\n    emxDestroyArray_uint8_T(Vrecorded);\r\n    emxDestroyArray_real_T(b_I);\r\n}\r\n``` \r\n\r\nWhere Android3() is the function which performs the image processing from the MATLAB code. My Java Main application is: \r\n\r\n```\r\npackage com.example.occ;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.os.Bundle;\r\nimport android.widget.TextView;\r\n\r\nimport com.example.occ.databinding.ActivityMainBinding;\r\n\r\nimport java.util.Arrays;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    // Used to load the &#39;occ&#39; library on application startup.\r\n    static {\r\n        System.loadLibrary(&quot;occ&quot;);\r\n    }\r\n\r\n    private ActivityMainBinding binding;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n\r\n        byte[] c = new MainActivity().teste(I);\r\n        System.out.println(&quot;Value of matrix B is: &quot; + Arrays.toString(c));\r\n\r\n    }\r\n\r\n    public native byte[] teste(byte[] I);\r\n}\r\n```\r\n\r\nI have 2 questions so far:\r\n\r\n1. Does my logic to pass the matrix Vrecorded (which is uint8 format) to the JNI function is correct (using byteArray[]). This matrix has 3 dimensions;\r\n2. How do I return matrix &#39;I&#39; to Java so it can be displayed on screen **if I don&#39;t know its size before compile runtime?**\r\n","title":"How to return an array of unknown size from a JNI C function to Java in Android?","body":"<p>I've converted a MATLAB script to C using MATLAB Coder. The script takes a video in uint8 format as an input, performs an object detection task using a customized YOLOv4 DL network to identify objects of interest and creates a new uint8 array (video) cropped within the object boundaries (see code below):</p>\n<pre><code>function [I] = Android3(Vrecorded)\n\n%#codegen\n% Loads and created pretrained YOLO v4 DL NW detector customized \n% to detect LED array.\n\ndetector = coder.loadDeepLearningNetwork(&quot;trainedDetector_23022023.mat&quot;);\n\n% Read all frames as grayscale images\nframes = reshape(Vrecorded(:,:,1,:), size(Vrecorded,1), size(Vrecorded,2), []);\n\n% extrai o nmero de quadros do vdeo capturado (NoF - Number of Frames)\nNoF = size(frames,3);\n\n%Detect objects in an unknown image / video by using the pretrained YOLO v4\nFrameForDetection = zeros(size(Vrecorded,1),size(Vrecorded,2),3);\nFrameForDetection(:,:,:) = Vrecorded(:,:,:,1);\n\n%object detector\n[bboxes,~,~] = detect(detector,FrameForDetection);\n\n% This cell contains the cropped frames containing RoI after YOLO v4 object\n% detection algoritm process the frames\ncroppedFrameVectors = cell(1,1);\n\nsizes = imcrop(frames(:,:,1),bboxes(1,:));\n\ncroppedFrames = zeros(size(sizes,1),size(sizes,2),NoF);\n\nfor n = 1:1\n    croppedFrameVectors{n} = rand(0,0,0);\n    for k = 1:NoF\n        % crops the frames in each detected object according to bounding\n        % boxes results captured on the first frame\n        croppedFrames(:,:,k) = imcrop(frames(:,:,k),bboxes(1,:));\n    end\n    % Insert the cropped frames with bounding boxes within a cell to allow\n    % multiple cropped objects within the same variable\n    croppedFrameVectors{n} = croppedFrames;\n    % Erase variable to crop another object due to bbox different\n    % dimensions from one object to another (widht x height)\nend\n\nI = croppedFrameVectors{1};\n</code></pre>\n<p>Where Vrecorded is a video matriz of size 240x320xF, and F vary depending on the input video.</p>\n<p>After converting it to C and trying to adjust it to JNI syntax, this is what I have so far:</p>\n<pre><code>#include &lt;jni.h&gt;\n/* Include files */\n#include &quot;main.h&quot;\n#include &quot;Android3.h&quot;\n#include &quot;Android3_emxAPI.h&quot;\n#include &quot;Android3_terminate.h&quot;\n#include &quot;Android3_types.h&quot;\n#include &quot;rt_nonfinite.h&quot;\n#include &lt;android/log.h&gt;\n\n\nJNIEXPORT jbyteArray JNICALL\nJava_com_example_occ_MainActivity_teste(JNIEnv *env, jobject thiz, jbyteArray Vrecorded) {\n    emxArray_real_T *b_I;\n    //emxArray_uint8_T *Vrecorded;\n\n    // Call the entry-point function 'Android3'\n    emxInitArray_real_T(&amp;b_I, 3);\n    Android3(Vrecorded, b_I);\n\n    // Clean up memory\n    emxDestroyArray_uint8_T(Vrecorded);\n    emxDestroyArray_real_T(b_I);\n}\n</code></pre>\n<p>Where Android3() is the function which performs the image processing from the MATLAB code. My Java Main application is:</p>\n<pre><code>package com.example.occ;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.os.Bundle;\nimport android.widget.TextView;\n\nimport com.example.occ.databinding.ActivityMainBinding;\n\nimport java.util.Arrays;\n\npublic class MainActivity extends AppCompatActivity {\n\n    // Used to load the 'occ' library on application startup.\n    static {\n        System.loadLibrary(&quot;occ&quot;);\n    }\n\n    private ActivityMainBinding binding;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        byte[] c = new MainActivity().teste(I);\n        System.out.println(&quot;Value of matrix B is: &quot; + Arrays.toString(c));\n\n    }\n\n    public native byte[] teste(byte[] I);\n}\n</code></pre>\n<p>I have 2 questions so far:</p>\n<ol>\n<li>Does my logic to pass the matrix Vrecorded (which is uint8 format) to the JNI function is correct (using byteArray[]). This matrix has 3 dimensions;</li>\n<li>How do I return matrix 'I' to Java so it can be displayed on screen <strong>if I don't know its size before compile runtime?</strong></li>\n</ol>\n"},{"tags":["java","wpilib"],"owner":{"account_id":18695156,"reputation":31,"user_id":13628637,"display_name":"Jacob Brenner"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":258,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1688709710,"creation_date":1688709710,"question_id":76634293,"body_markdown":"We are using the SDS example code to run a Swerve Drivebase for FRC we are using SDS MK4i swerve modules and Neos for both our turn and drive motors using Cancoders as the turning encoders and a NavX over USB as our Gyro. However most of the code is out dated this being said most of the Code is fully working. Our issue is the wheels turn 45 instead of 90 when you move the joystick 90 also sometimes the wheels will go from 0-180 randomly and the same applies for 90-270 as I am still very new to programming I don&#39;t know a good process to debug so all the code is below:\r\n\r\nDefaultDriveCommand.java:\r\n```package frc.robot.commands;\r\n\r\nimport edu.wpi.first.math.kinematics.ChassisSpeeds;\r\nimport edu.wpi.first.wpilibj2.command.CommandBase;\r\nimport frc.robot.subsystems.DrivetrainSubsystem;\r\n\r\nimport java.util.function.DoubleSupplier;\r\n\r\npublic class DefaultDriveCommand extends CommandBase {\r\n    \r\n    private final DrivetrainSubsystem m_drivetrainSubsystem;\r\n\r\n    private final DoubleSupplier m_translationXSupplier;\r\n    private final DoubleSupplier m_translationYSupplier;\r\n    private final DoubleSupplier m_rotationSupplier;\r\n\r\n    public DefaultDriveCommand(DrivetrainSubsystem drivetrain,DoubleSupplier translationXSupplier,DoubleSupplier translationYSupplier,DoubleSupplier rotationSupplier) {\r\n        this.m_drivetrainSubsystem = drivetrain;\r\n        this.m_translationXSupplier = translationXSupplier;\r\n        this.m_translationYSupplier = translationYSupplier;\r\n        this.m_rotationSupplier = rotationSupplier;\r\n\r\n        addRequirements(drivetrain);\r\n    }\r\n\r\n    @Override\r\n    public void execute() {\r\n        // You can use `new ChassisSpeeds(...)` for robot-oriented movement instead of field-oriented movement\r\n        m_drivetrainSubsystem.drive(\r\n                ChassisSpeeds.fromFieldRelativeSpeeds(\r\n                        m_translationXSupplier.getAsDouble(),\r\n                        m_translationYSupplier.getAsDouble(),\r\n                        m_rotationSupplier.getAsDouble(),\r\n                        m_drivetrainSubsystem.getGyroscopeRotation()\r\n                )\r\n        );\r\n    }\r\n\r\n    @Override\r\n    public void end(boolean interrupted) {\r\n        m_drivetrainSubsystem.drive(new ChassisSpeeds(0.0, 0.0, 0.0));\r\n    }\r\n}\r\n```\r\nDrivetrainSubsystem.java:\r\n```\r\n// Copyright (c) FIRST and other WPILib contributors.\r\n// Open Source Software; you can modify and/or share it under the terms of\r\n// the WPILib BSD license file in the root directory of this project.\r\n\r\npackage frc.robot.subsystems;\r\n\r\nimport com.kauailabs.navx.frc.AHRS;\r\nimport com.swervedrivespecialties.swervelib.Mk4SwerveModuleHelper;\r\nimport com.swervedrivespecialties.swervelib.SdsModuleConfigurations;\r\nimport com.swervedrivespecialties.swervelib.SwerveModule;\r\nimport edu.wpi.first.math.geometry.Rotation2d;\r\nimport edu.wpi.first.math.geometry.Translation2d;\r\nimport edu.wpi.first.math.kinematics.ChassisSpeeds;\r\nimport edu.wpi.first.math.kinematics.SwerveDriveKinematics;\r\nimport edu.wpi.first.math.kinematics.SwerveModuleState;\r\nimport edu.wpi.first.wpilibj.shuffleboard.BuiltInLayouts;\r\nimport edu.wpi.first.wpilibj.shuffleboard.Shuffleboard;\r\nimport edu.wpi.first.wpilibj.shuffleboard.ShuffleboardTab;\r\nimport edu.wpi.first.wpilibj2.command.SubsystemBase;\r\nimport edu.wpi.first.wpilibj.SerialPort.Port;\r\n\r\nimport static frc.robot.Constants.*;\r\n\r\npublic class DrivetrainSubsystem extends SubsystemBase {\r\n  /**\r\n   * The maximum voltage that will be delivered to the drive motors.\r\n   * &lt;p&gt;\r\n   * This can be reduced to cap the robot&#39;s maximum speed. Typically, this is useful during initial testing of the robot.\r\n   */\r\n  public static final double MAX_VOLTAGE = 2.5;\r\n  // FIXME Measure the drivetrain&#39;s maximum velocity or calculate the theoretical.\r\n  //  The formula for calculating the theoretical maximum velocity is:\r\n  //   &lt;Motor free speed RPM&gt; / 60 * &lt;Drive reduction&gt; * &lt;Wheel diameter meters&gt; * pi\r\n  //  By default this value is setup for a Mk3 standard module using Falcon500s to drive.\r\n  //  An example of this constant for a Mk4 L2 module with NEOs to drive is:\r\n  //   5880.0 / 60.0 / SdsModuleConfigurations.MK4_L2.getDriveReduction() * SdsModuleConfigurations.MK4_L2.getWheelDiameter() * Math.PI\r\n  /**\r\n   * The maximum velocity of the robot in meters per second.\r\n   * &lt;p&gt;\r\n   * This is a measure of how fast the robot should be able to drive in a straight line.\r\n   */\r\n  public static final double MAX_VELOCITY_METERS_PER_SECOND = 6380.0 / 60.0 *\r\n          SdsModuleConfigurations.MK4I_L2.getDriveReduction() *\r\n          SdsModuleConfigurations.MK4I_L2.getWheelDiameter() * Math.PI;\r\n  /**\r\n   * The maximum angular velocity of the robot in radians per second.\r\n   * &lt;p&gt;\r\n   * This is a measure of how fast the robot can rotate in place.\r\n   */\r\n  // Here we calculate the theoretical maximum angular velocity. You can also replace this with a measured amount.\r\n  public static final double MAX_ANGULAR_VELOCITY_RADIANS_PER_SECOND = MAX_VELOCITY_METERS_PER_SECOND /\r\n          Math.hypot(DRIVETRAIN_TRACKWIDTH_METERS / 2.0, DRIVETRAIN_WHEELBASE_METERS / 2.0);\r\n\r\n  private final SwerveDriveKinematics m_kinematics = new SwerveDriveKinematics(\r\n          // Front left\r\n          new Translation2d(DRIVETRAIN_TRACKWIDTH_METERS / 2.0, DRIVETRAIN_WHEELBASE_METERS / 2.0),\r\n          // Front right\r\n          new Translation2d(DRIVETRAIN_TRACKWIDTH_METERS / 2.0, -DRIVETRAIN_WHEELBASE_METERS / 2.0),\r\n          // Back left\r\n          new Translation2d(-DRIVETRAIN_TRACKWIDTH_METERS / 2.0, DRIVETRAIN_WHEELBASE_METERS / 2.0),\r\n          // Back right\r\n          new Translation2d(-DRIVETRAIN_TRACKWIDTH_METERS / 2.0, -DRIVETRAIN_WHEELBASE_METERS / 2.0)\r\n  );\r\n\r\n  // By default we use a Pigeon for our gyroscope. But if you use another gyroscope, like a NavX, you can change this.\r\n  // The important thing about how you configure your gyroscope is that rotating the robot counter-clockwise should\r\n  // cause the angle reading to increase until it wraps back over to zero.\r\n  // FIXME Remove if you are using a Pigeon\r\n  //private final PigeonIMU m_pigeon = new PigeonIMU(DRIVETRAIN_PIGEON_ID);\r\n  // FIXME Uncomment if you are using a NavX\r\n  private final AHRS m_navx = new AHRS(Port.kUSB2); // NavX connected over USB\r\n\r\n  // These are our modules. We initialize them in the constructor.\r\n  private final SwerveModule m_frontLeftModule;\r\n  private final SwerveModule m_frontRightModule;\r\n  private final SwerveModule m_backLeftModule;\r\n  private final SwerveModule m_backRightModule;\r\n\r\n  private ChassisSpeeds m_chassisSpeeds = new ChassisSpeeds(0.0, 0.0, 0.0);\r\n\r\n  public DrivetrainSubsystem() {\r\n    ShuffleboardTab tab = Shuffleboard.getTab(&quot;Drivetrain&quot;);\r\n\r\n    // There are 4 methods you can call to create your swerve modules.\r\n    // The method you use depends on what motors you are using.\r\n    //\r\n    // Mk3SwerveModuleHelper.createFalcon500(...)\r\n    //   Your module has two Falcon 500s on it. One for steering and one for driving.\r\n    //\r\n    // Mk3SwerveModuleHelper.createNeo(...)\r\n    //   Your module has two NEOs on it. One for steering and one for driving.\r\n    //\r\n    // Mk3SwerveModuleHelper.createFalcon500Neo(...)\r\n    //   Your module has a Falcon 500 and a NEO on it. The Falcon 500 is for driving and the NEO is for steering.\r\n    //\r\n    // Mk3SwerveModuleHelper.createNeoFalcon500(...)\r\n    //   Your module has a NEO and a Falcon 500 on it. The NEO is for driving and the Falcon 500 is for steering.\r\n    //\r\n    // Similar helpers also exist for Mk4 modules using the Mk4SwerveModuleHelper class.\r\n\r\n    // By default we will use Falcon 500s in standard configuration. But if you use a different configuration or motors\r\n    // you MUST change it. If you do not, your code will crash on startup.\r\n    // FIXME Setup motor configuration\r\n    m_frontLeftModule = Mk4SwerveModuleHelper.createNeo(\r\n            // This parameter is optional, but will allow you to see the current state of the module on the dashboard.\r\n            tab.getLayout(&quot;Front Left Module&quot;, BuiltInLayouts.kList)\r\n                    .withSize(2, 4)\r\n                    .withPosition(0, 0),\r\n            // This can either be STANDARD or FAST depending on your gear configuration\r\n            Mk4SwerveModuleHelper.GearRatio.L2,\r\n            // This is the ID of the drive motor\r\n            FRONT_LEFT_MODULE_DRIVE_MOTOR,\r\n            // This is the ID of the steer motor\r\n            FRONT_LEFT_MODULE_STEER_MOTOR,\r\n            // This is the ID of the steer encoder\r\n            FRONT_LEFT_MODULE_STEER_ENCODER,\r\n            // This is how much the steer encoder is offset from true zero (In our case, zero is facing straight forward)\r\n            FRONT_LEFT_MODULE_STEER_OFFSET\r\n    );\r\n\r\n    // We will do the same for the other modules\r\n    m_frontRightModule = Mk4SwerveModuleHelper.createNeo(\r\n            tab.getLayout(&quot;Front Right Module&quot;, BuiltInLayouts.kList)\r\n                    .withSize(2, 4)\r\n                    .withPosition(2, 0),\r\n            Mk4SwerveModuleHelper.GearRatio.L2,\r\n            FRONT_RIGHT_MODULE_DRIVE_MOTOR,\r\n            FRONT_RIGHT_MODULE_STEER_MOTOR,\r\n            FRONT_RIGHT_MODULE_STEER_ENCODER,\r\n            FRONT_RIGHT_MODULE_STEER_OFFSET\r\n    );\r\n\r\n    m_backLeftModule = Mk4SwerveModuleHelper.createNeo(\r\n            tab.getLayout(&quot;Back Left Module&quot;, BuiltInLayouts.kList)\r\n                    .withSize(2, 4)\r\n                    .withPosition(4, 0),\r\n            Mk4SwerveModuleHelper.GearRatio.L2,\r\n            BACK_LEFT_MODULE_DRIVE_MOTOR,\r\n            BACK_LEFT_MODULE_STEER_MOTOR,\r\n            BACK_LEFT_MODULE_STEER_ENCODER,\r\n            BACK_LEFT_MODULE_STEER_OFFSET\r\n    );\r\n\r\n    m_backRightModule = Mk4SwerveModuleHelper.createNeo(\r\n            tab.getLayout(&quot;Back Right Module&quot;, BuiltInLayouts.kList)\r\n                    .withSize(2, 4)\r\n                    .withPosition(6, 0),\r\n            Mk4SwerveModuleHelper.GearRatio.L2,\r\n            BACK_RIGHT_MODULE_DRIVE_MOTOR,\r\n            BACK_RIGHT_MODULE_STEER_MOTOR,\r\n            BACK_RIGHT_MODULE_STEER_ENCODER,\r\n            BACK_RIGHT_MODULE_STEER_OFFSET\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Sets the gyroscope angle to zero. This can be used to set the direction the robot is currently facing to the\r\n   * &#39;forwards&#39; direction.\r\n   */\r\n  public void zeroGyroscope() {\r\n    // FIXME Remove if you are using a Pigeon\r\n    //m_pigeon.setFusedHeading(0.0);\r\n\r\n    // FIXME Uncomment if you are using a NavX\r\n    m_navx.zeroYaw();\r\n  }\r\n\r\n  public Rotation2d getGyroscopeRotation() {\r\n    // FIXME Remove if you are using a Pigeon\r\n    //return Rotation2d.fromDegrees(m_pigeon.getFusedHeading());\r\n\r\n    //FIXME Uncomment if you are using a NavX\r\n    if (m_navx.isMagnetometerCalibrated()) {\r\n      // We will only get valid fused headings if the magnetometer is calibrated\r\n      return Rotation2d.fromDegrees(m_navx.getFusedHeading());\r\n    }\r\n\r\n    // We have to invert the angle of the NavX so that rotating the robot counter-clockwise makes the angle increase.\r\n    return Rotation2d.fromDegrees(360.0 - m_navx.getYaw());\r\n  }\r\n\r\n  public void drive(ChassisSpeeds chassisSpeeds) {\r\n    m_chassisSpeeds = chassisSpeeds;\r\n  }\r\n\r\n  @Override\r\n  public void periodic() {\r\n    SwerveModuleState[] states = m_kinematics.toSwerveModuleStates(m_chassisSpeeds);\r\n    SwerveDriveKinematics.desaturateWheelSpeeds(states, MAX_VELOCITY_METERS_PER_SECOND);\r\n\r\n    m_frontLeftModule.set(states[0].speedMetersPerSecond / MAX_VELOCITY_METERS_PER_SECOND * MAX_VOLTAGE, states[0].angle.getRadians());\r\n    m_frontRightModule.set(states[1].speedMetersPerSecond / MAX_VELOCITY_METERS_PER_SECOND * MAX_VOLTAGE, states[1].angle.getRadians());\r\n    m_backLeftModule.set(states[2].speedMetersPerSecond / MAX_VELOCITY_METERS_PER_SECOND * MAX_VOLTAGE, states[2].angle.getRadians());\r\n    m_backRightModule.set(states[3].speedMetersPerSecond / MAX_VELOCITY_METERS_PER_SECOND * MAX_VOLTAGE, states[3].angle.getRadians());\r\n  }\r\n}\r\n```\r\nConstants.java\r\n```\r\n// Copyright (c) FIRST and other WPILib contributors.\r\n// Open Source Software; you can modify and/or share it under the terms of\r\n// the WPILib BSD license file in the root directory of this project.\r\n\r\npackage frc.robot;\r\n\r\n/**\r\n * The Constants class provides a convenient place for teams to hold robot-wide numerical or boolean\r\n * constants. This class should not be used for any other purpose. All constants should be declared\r\n * globally (i.e. public static). Do not put anything functional in this class.\r\n *\r\n * &lt;p&gt;It is advised to statically import this class (or one of its inner classes) wherever the\r\n * constants are needed, to reduce verbosity.\r\n */\r\npublic final class Constants {\r\n    /**\r\n     * The left-to-right distance between the drivetrain wheels\r\n     *\r\n     * Should be measured from center to center.\r\n     */\r\n    public static final double DRIVETRAIN_TRACKWIDTH_METERS = 0.47; // FIXME Measure and set trackwidth\r\n    /**\r\n     * The front-to-back distance between the drivetrain wheels.\r\n     *\r\n     * Should be measured from center to center.\r\n     */\r\n    public static final double DRIVETRAIN_WHEELBASE_METERS = 0.47; // FIXME Measure and set wheelbase\r\n\r\n    //public static final int DRIVETRAIN_PIGEON_ID = 0; // FIXME Set Pigeon ID\r\n\r\n    public static final int FRONT_LEFT_MODULE_DRIVE_MOTOR = 5; // FIXME Set front left module drive motor ID\r\n    public static final int FRONT_LEFT_MODULE_STEER_MOTOR = 6; // FIXME Set front left module steer motor ID\r\n    public static final int FRONT_LEFT_MODULE_STEER_ENCODER = 12; // FIXME Set front left steer encoder ID\r\n    public static final double FRONT_LEFT_MODULE_STEER_OFFSET = -Math.toRadians(260.42); // FIXME Measure and set front left steer offset\r\n\r\n    public static final int FRONT_RIGHT_MODULE_DRIVE_MOTOR = 1; // FIXME Set front right drive motor ID\r\n    public static final int FRONT_RIGHT_MODULE_STEER_MOTOR = 2; // FIXME Set front right steer motor ID\r\n    public static final int FRONT_RIGHT_MODULE_STEER_ENCODER = 9; // FIXME Set front right steer encoder ID\r\n    public static final double FRONT_RIGHT_MODULE_STEER_OFFSET = -Math.toRadians(315.00); // FIXME Measure and set front right steer offset\r\n\r\n    public static final int BACK_LEFT_MODULE_DRIVE_MOTOR = 8; // FIXME Set back left drive motor ID\r\n    public static final int BACK_LEFT_MODULE_STEER_MOTOR = 7; // FIXME Set back left steer motor ID\r\n    public static final int BACK_LEFT_MODULE_STEER_ENCODER = 11; // FIXME Set back left steer encoder ID\r\n    public static final double BACK_LEFT_MODULE_STEER_OFFSET = -Math.toRadians(192.83); // FIXME Measure and set back left steer offset\r\n\r\n    public static final int BACK_RIGHT_MODULE_DRIVE_MOTOR = 4; // FIXME Set back right drive motor ID\r\n    public static final int BACK_RIGHT_MODULE_STEER_MOTOR = 3; // FIXME Set back right steer motor ID\r\n    public static final int BACK_RIGHT_MODULE_STEER_ENCODER = 10; // FIXME Set back right steer encoder ID\r\n    public static final double BACK_RIGHT_MODULE_STEER_OFFSET = -Math.toRadians(246.71); // FIXME Measure and set back right steer offset\r\n}\r\n```\r\nMain.java\r\n```\r\n// Copyright (c) FIRST and other WPILib contributors.\r\n// Open Source Software; you can modify and/or share it under the terms of\r\n// the WPILib BSD license file in the root directory of this project.\r\n\r\npackage frc.robot;\r\n\r\nimport edu.wpi.first.wpilibj.RobotBase;\r\n\r\n/**\r\n * Do NOT add any static variables to this class, or any initialization at all. Unless you know what\r\n * you are doing, do not modify this file except to change the parameter class to the startRobot\r\n * call.\r\n */\r\npublic final class Main {\r\n  private Main() {}\r\n\r\n  /**\r\n   * Main initialization function. Do not perform any initialization here.\r\n   *\r\n   * &lt;p&gt;If you change your main robot class, change the parameter type.\r\n   */\r\n  public static void main(String... args) {\r\n    RobotBase.startRobot(Robot::new);\r\n  }\r\n}\r\n```\r\nRobot.java\r\n```\r\n// Copyright (c) FIRST and other WPILib contributors.\r\n// Open Source Software; you can modify and/or share it under the terms of\r\n// the WPILib BSD license file in the root directory of this project.\r\n\r\npackage frc.robot;\r\n\r\nimport edu.wpi.first.wpilibj.TimedRobot;\r\nimport edu.wpi.first.wpilibj2.command.Command;\r\nimport edu.wpi.first.wpilibj2.command.CommandScheduler;\r\n\r\n/**\r\n * The VM is configured to automatically run this class, and to call the functions corresponding to\r\n * each mode, as described in the TimedRobot documentation. If you change the name of this class or\r\n * the package after creating this project, you must also update the build.gradle file in the\r\n * project.\r\n */\r\npublic class Robot extends TimedRobot {\r\n  private Command m_autonomousCommand;\r\n\r\n  private RobotContainer m_robotContainer;\r\n\r\n  /**\r\n   * This function is run when the robot is first started up and should be used for any\r\n   * initialization code.\r\n   */\r\n  @Override\r\n  public void robotInit() {\r\n    // Instantiate our RobotContainer.  This will perform all our button bindings, and put our\r\n    // autonomous chooser on the dashboard.\r\n    m_robotContainer = new RobotContainer();\r\n  }\r\n\r\n  /**\r\n   * This function is called every robot packet, no matter the mode. Use this for items like\r\n   * diagnostics that you want ran during disabled, autonomous, teleoperated and test.\r\n   *\r\n   * &lt;p&gt;This runs after the mode specific periodic functions, but before LiveWindow and\r\n   * SmartDashboard integrated updating.\r\n   */\r\n  @Override\r\n  public void robotPeriodic() {\r\n    // Runs the Scheduler.  This is responsible for polling buttons, adding newly-scheduled\r\n    // commands, running already-scheduled commands, removing finished or interrupted commands,\r\n    // and running subsystem periodic() methods.  This must be called from the robot&#39;s periodic\r\n    // block in order for anything in the Command-based framework to work.\r\n    CommandScheduler.getInstance().run();\r\n  }\r\n\r\n  /** This function is called once each time the robot enters Disabled mode. */\r\n  @Override\r\n  public void disabledInit() {}\r\n\r\n  @Override\r\n  public void disabledPeriodic() {}\r\n\r\n  /** This autonomous runs the autonomous command selected by your {@link RobotContainer} class. */\r\n  @Override\r\n  public void autonomousInit() {\r\n    m_autonomousCommand = m_robotContainer.getAutonomousCommand();\r\n\r\n    // schedule the autonomous command (example)\r\n    if (m_autonomousCommand != null) {\r\n      m_autonomousCommand.schedule();\r\n    }\r\n  }\r\n\r\n  /** This function is called periodically during autonomous. */\r\n  @Override\r\n  public void autonomousPeriodic() {}\r\n\r\n  @Override\r\n  public void teleopInit() {\r\n    // This makes sure that the autonomous stops running when\r\n    // teleop starts running. If you want the autonomous to\r\n    // continue until interrupted by another command, remove\r\n    // this line or comment it out.\r\n    if (m_autonomousCommand != null) {\r\n      m_autonomousCommand.cancel();\r\n    }\r\n  }\r\n\r\n  /** This function is called periodically during operator control. */\r\n  @Override\r\n  public void teleopPeriodic() {}\r\n\r\n  @Override\r\n  public void testInit() {\r\n    // Cancels all running commands at the start of test mode.\r\n    CommandScheduler.getInstance().cancelAll();\r\n  }\r\n\r\n  /** This function is called periodically during test mode. */\r\n  @Override\r\n  public void testPeriodic() {}\r\n}\r\n```\r\nRobotContainer.java\r\n```\r\n// Copyright (c) FIRST and other WPILib contributors.\r\n// Open Source Software; you can modify and/or share it under the terms of\r\n// the WPILib BSD license file in the root directory of this project.\r\n\r\npackage frc.robot;\r\n\r\nimport edu.wpi.first.wpilibj.GenericHID;\r\nimport edu.wpi.first.wpilibj.XboxController;\r\nimport edu.wpi.first.math.kinematics.ChassisSpeeds;\r\nimport edu.wpi.first.wpilibj2.command.Command;\r\nimport edu.wpi.first.wpilibj2.command.FunctionalCommand;\r\nimport edu.wpi.first.wpilibj2.command.InstantCommand;\r\nimport edu.wpi.first.wpilibj2.command.button.Button;\r\nimport frc.robot.commands.DefaultDriveCommand;\r\nimport frc.robot.subsystems.DrivetrainSubsystem;\r\n\r\n/**\r\n * This class is where the bulk of the robot should be declared. Since Command-based is a\r\n * &quot;declarative&quot; paradigm, very little robot logic should actually be handled in the {@link Robot}\r\n * periodic methods (other than the scheduler calls). Instead, the structure of the robot (including\r\n * subsystems, commands, and button mappings) should be declared here.\r\n */\r\npublic class RobotContainer {\r\n  // The robot&#39;s subsystems and commands are defined here...\r\n  private final DrivetrainSubsystem m_drivetrainSubsystem = new DrivetrainSubsystem();\r\n\r\n  private final XboxController m_controller = new XboxController(0);\r\n\r\n  /**\r\n   * The container for the robot. Contains subsystems, OI devices, and commands.\r\n   */\r\n  public RobotContainer() {\r\n    // Set up the default command for the drivetrain.\r\n    // The controls are for field-oriented driving:\r\n    // Left stick Y axis -&gt; forward and backwards movement\r\n    // Left stick X axis -&gt; left and right movement\r\n    // Right stick X axis -&gt; rotation\r\n    m_drivetrainSubsystem.setDefaultCommand(new DefaultDriveCommand(\r\n        m_drivetrainSubsystem,\r\n        () -&gt; -modifyAxis(m_controller.getLeftY()) * DrivetrainSubsystem.MAX_VELOCITY_METERS_PER_SECOND,\r\n        () -&gt; -modifyAxis(m_controller.getLeftX()) * DrivetrainSubsystem.MAX_VELOCITY_METERS_PER_SECOND,\r\n        () -&gt; -modifyAxis(m_controller.getRightX()) * DrivetrainSubsystem.MAX_ANGULAR_VELOCITY_RADIANS_PER_SECOND\r\n));\r\n\r\n    // Configure the button bindings\r\n    configureButtonBindings();\r\n  }\r\n\r\n  /**\r\n   * Use this method to define your button-&gt;command mappings. Buttons can be created by\r\n   * instantiating a {@link GenericHID} or one of its subclasses ({@link\r\n   * edu.wpi.first.wpilibj.Joystick} or {@link XboxController}), and then passing it to a {@link\r\n   * edu.wpi.first.wpilibj2.command.button.JoystickButton}.\r\n   */\r\n  private void configureButtonBindings() {\r\n    // Back button zeros the gyroscope\r\n    new Button(m_controller::getBackButton)\r\n            // No requirements because we don&#39;t need to interrupt anything\r\n            .whenPressed(m_drivetrainSubsystem::zeroGyroscope);\r\n  }\r\n\r\n  /**\r\n   * Use this to pass the autonomous command to the main {@link Robot} class.\r\n   *\r\n   * @return the command to run in autonomous\r\n   */\r\n  public Command getAutonomousCommand() {\r\n    // An ExampleCommand will run in autonomous\r\n    return new InstantCommand();\r\n  }\r\n\r\n  private static double deadband(double value, double deadband) {\r\n    if (Math.abs(value) &gt; deadband) {\r\n      if (value &gt; 0.0) {\r\n        return (value - deadband) / (1.0 - deadband);\r\n      } else {\r\n        return (value + deadband) / (1.0 - deadband);\r\n      }\r\n    } else {\r\n      return 0.0;\r\n    }\r\n  }\r\n\r\n  private static double modifyAxis(double value) {\r\n    // Deadband\r\n    value = deadband(value, 0.3);\r\n\r\n    // Square the axis\r\n    value = Math.copySign(value * value, value);\r\n\r\n    return value;\r\n  }\r\n}\r\n```","title":"FRC Swerve Drive Java Code Randomly Going in Different Directions","body":"<p>We are using the SDS example code to run a Swerve Drivebase for FRC we are using SDS MK4i swerve modules and Neos for both our turn and drive motors using Cancoders as the turning encoders and a NavX over USB as our Gyro. However most of the code is out dated this being said most of the Code is fully working. Our issue is the wheels turn 45 instead of 90 when you move the joystick 90 also sometimes the wheels will go from 0-180 randomly and the same applies for 90-270 as I am still very new to programming I don't know a good process to debug so all the code is below:</p>\n<p>DefaultDriveCommand.java:</p>\n<pre><code>\nimport edu.wpi.first.math.kinematics.ChassisSpeeds;\nimport edu.wpi.first.wpilibj2.command.CommandBase;\nimport frc.robot.subsystems.DrivetrainSubsystem;\n\nimport java.util.function.DoubleSupplier;\n\npublic class DefaultDriveCommand extends CommandBase {\n    \n    private final DrivetrainSubsystem m_drivetrainSubsystem;\n\n    private final DoubleSupplier m_translationXSupplier;\n    private final DoubleSupplier m_translationYSupplier;\n    private final DoubleSupplier m_rotationSupplier;\n\n    public DefaultDriveCommand(DrivetrainSubsystem drivetrain,DoubleSupplier translationXSupplier,DoubleSupplier translationYSupplier,DoubleSupplier rotationSupplier) {\n        this.m_drivetrainSubsystem = drivetrain;\n        this.m_translationXSupplier = translationXSupplier;\n        this.m_translationYSupplier = translationYSupplier;\n        this.m_rotationSupplier = rotationSupplier;\n\n        addRequirements(drivetrain);\n    }\n\n    @Override\n    public void execute() {\n        // You can use `new ChassisSpeeds(...)` for robot-oriented movement instead of field-oriented movement\n        m_drivetrainSubsystem.drive(\n                ChassisSpeeds.fromFieldRelativeSpeeds(\n                        m_translationXSupplier.getAsDouble(),\n                        m_translationYSupplier.getAsDouble(),\n                        m_rotationSupplier.getAsDouble(),\n                        m_drivetrainSubsystem.getGyroscopeRotation()\n                )\n        );\n    }\n\n    @Override\n    public void end(boolean interrupted) {\n        m_drivetrainSubsystem.drive(new ChassisSpeeds(0.0, 0.0, 0.0));\n    }\n}\n</code></pre>\n<p>DrivetrainSubsystem.java:</p>\n<pre><code>// Copyright (c) FIRST and other WPILib contributors.\n// Open Source Software; you can modify and/or share it under the terms of\n// the WPILib BSD license file in the root directory of this project.\n\npackage frc.robot.subsystems;\n\nimport com.kauailabs.navx.frc.AHRS;\nimport com.swervedrivespecialties.swervelib.Mk4SwerveModuleHelper;\nimport com.swervedrivespecialties.swervelib.SdsModuleConfigurations;\nimport com.swervedrivespecialties.swervelib.SwerveModule;\nimport edu.wpi.first.math.geometry.Rotation2d;\nimport edu.wpi.first.math.geometry.Translation2d;\nimport edu.wpi.first.math.kinematics.ChassisSpeeds;\nimport edu.wpi.first.math.kinematics.SwerveDriveKinematics;\nimport edu.wpi.first.math.kinematics.SwerveModuleState;\nimport edu.wpi.first.wpilibj.shuffleboard.BuiltInLayouts;\nimport edu.wpi.first.wpilibj.shuffleboard.Shuffleboard;\nimport edu.wpi.first.wpilibj.shuffleboard.ShuffleboardTab;\nimport edu.wpi.first.wpilibj2.command.SubsystemBase;\nimport edu.wpi.first.wpilibj.SerialPort.Port;\n\nimport static frc.robot.Constants.*;\n\npublic class DrivetrainSubsystem extends SubsystemBase {\n  /**\n   * The maximum voltage that will be delivered to the drive motors.\n   * &lt;p&gt;\n   * This can be reduced to cap the robot's maximum speed. Typically, this is useful during initial testing of the robot.\n   */\n  public static final double MAX_VOLTAGE = 2.5;\n  // FIXME Measure the drivetrain's maximum velocity or calculate the theoretical.\n  //  The formula for calculating the theoretical maximum velocity is:\n  //   &lt;Motor free speed RPM&gt; / 60 * &lt;Drive reduction&gt; * &lt;Wheel diameter meters&gt; * pi\n  //  By default this value is setup for a Mk3 standard module using Falcon500s to drive.\n  //  An example of this constant for a Mk4 L2 module with NEOs to drive is:\n  //   5880.0 / 60.0 / SdsModuleConfigurations.MK4_L2.getDriveReduction() * SdsModuleConfigurations.MK4_L2.getWheelDiameter() * Math.PI\n  /**\n   * The maximum velocity of the robot in meters per second.\n   * &lt;p&gt;\n   * This is a measure of how fast the robot should be able to drive in a straight line.\n   */\n  public static final double MAX_VELOCITY_METERS_PER_SECOND = 6380.0 / 60.0 *\n          SdsModuleConfigurations.MK4I_L2.getDriveReduction() *\n          SdsModuleConfigurations.MK4I_L2.getWheelDiameter() * Math.PI;\n  /**\n   * The maximum angular velocity of the robot in radians per second.\n   * &lt;p&gt;\n   * This is a measure of how fast the robot can rotate in place.\n   */\n  // Here we calculate the theoretical maximum angular velocity. You can also replace this with a measured amount.\n  public static final double MAX_ANGULAR_VELOCITY_RADIANS_PER_SECOND = MAX_VELOCITY_METERS_PER_SECOND /\n          Math.hypot(DRIVETRAIN_TRACKWIDTH_METERS / 2.0, DRIVETRAIN_WHEELBASE_METERS / 2.0);\n\n  private final SwerveDriveKinematics m_kinematics = new SwerveDriveKinematics(\n          // Front left\n          new Translation2d(DRIVETRAIN_TRACKWIDTH_METERS / 2.0, DRIVETRAIN_WHEELBASE_METERS / 2.0),\n          // Front right\n          new Translation2d(DRIVETRAIN_TRACKWIDTH_METERS / 2.0, -DRIVETRAIN_WHEELBASE_METERS / 2.0),\n          // Back left\n          new Translation2d(-DRIVETRAIN_TRACKWIDTH_METERS / 2.0, DRIVETRAIN_WHEELBASE_METERS / 2.0),\n          // Back right\n          new Translation2d(-DRIVETRAIN_TRACKWIDTH_METERS / 2.0, -DRIVETRAIN_WHEELBASE_METERS / 2.0)\n  );\n\n  // By default we use a Pigeon for our gyroscope. But if you use another gyroscope, like a NavX, you can change this.\n  // The important thing about how you configure your gyroscope is that rotating the robot counter-clockwise should\n  // cause the angle reading to increase until it wraps back over to zero.\n  // FIXME Remove if you are using a Pigeon\n  //private final PigeonIMU m_pigeon = new PigeonIMU(DRIVETRAIN_PIGEON_ID);\n  // FIXME Uncomment if you are using a NavX\n  private final AHRS m_navx = new AHRS(Port.kUSB2); // NavX connected over USB\n\n  // These are our modules. We initialize them in the constructor.\n  private final SwerveModule m_frontLeftModule;\n  private final SwerveModule m_frontRightModule;\n  private final SwerveModule m_backLeftModule;\n  private final SwerveModule m_backRightModule;\n\n  private ChassisSpeeds m_chassisSpeeds = new ChassisSpeeds(0.0, 0.0, 0.0);\n\n  public DrivetrainSubsystem() {\n    ShuffleboardTab tab = Shuffleboard.getTab(&quot;Drivetrain&quot;);\n\n    // There are 4 methods you can call to create your swerve modules.\n    // The method you use depends on what motors you are using.\n    //\n    // Mk3SwerveModuleHelper.createFalcon500(...)\n    //   Your module has two Falcon 500s on it. One for steering and one for driving.\n    //\n    // Mk3SwerveModuleHelper.createNeo(...)\n    //   Your module has two NEOs on it. One for steering and one for driving.\n    //\n    // Mk3SwerveModuleHelper.createFalcon500Neo(...)\n    //   Your module has a Falcon 500 and a NEO on it. The Falcon 500 is for driving and the NEO is for steering.\n    //\n    // Mk3SwerveModuleHelper.createNeoFalcon500(...)\n    //   Your module has a NEO and a Falcon 500 on it. The NEO is for driving and the Falcon 500 is for steering.\n    //\n    // Similar helpers also exist for Mk4 modules using the Mk4SwerveModuleHelper class.\n\n    // By default we will use Falcon 500s in standard configuration. But if you use a different configuration or motors\n    // you MUST change it. If you do not, your code will crash on startup.\n    // FIXME Setup motor configuration\n    m_frontLeftModule = Mk4SwerveModuleHelper.createNeo(\n            // This parameter is optional, but will allow you to see the current state of the module on the dashboard.\n            tab.getLayout(&quot;Front Left Module&quot;, BuiltInLayouts.kList)\n                    .withSize(2, 4)\n                    .withPosition(0, 0),\n            // This can either be STANDARD or FAST depending on your gear configuration\n            Mk4SwerveModuleHelper.GearRatio.L2,\n            // This is the ID of the drive motor\n            FRONT_LEFT_MODULE_DRIVE_MOTOR,\n            // This is the ID of the steer motor\n            FRONT_LEFT_MODULE_STEER_MOTOR,\n            // This is the ID of the steer encoder\n            FRONT_LEFT_MODULE_STEER_ENCODER,\n            // This is how much the steer encoder is offset from true zero (In our case, zero is facing straight forward)\n            FRONT_LEFT_MODULE_STEER_OFFSET\n    );\n\n    // We will do the same for the other modules\n    m_frontRightModule = Mk4SwerveModuleHelper.createNeo(\n            tab.getLayout(&quot;Front Right Module&quot;, BuiltInLayouts.kList)\n                    .withSize(2, 4)\n                    .withPosition(2, 0),\n            Mk4SwerveModuleHelper.GearRatio.L2,\n            FRONT_RIGHT_MODULE_DRIVE_MOTOR,\n            FRONT_RIGHT_MODULE_STEER_MOTOR,\n            FRONT_RIGHT_MODULE_STEER_ENCODER,\n            FRONT_RIGHT_MODULE_STEER_OFFSET\n    );\n\n    m_backLeftModule = Mk4SwerveModuleHelper.createNeo(\n            tab.getLayout(&quot;Back Left Module&quot;, BuiltInLayouts.kList)\n                    .withSize(2, 4)\n                    .withPosition(4, 0),\n            Mk4SwerveModuleHelper.GearRatio.L2,\n            BACK_LEFT_MODULE_DRIVE_MOTOR,\n            BACK_LEFT_MODULE_STEER_MOTOR,\n            BACK_LEFT_MODULE_STEER_ENCODER,\n            BACK_LEFT_MODULE_STEER_OFFSET\n    );\n\n    m_backRightModule = Mk4SwerveModuleHelper.createNeo(\n            tab.getLayout(&quot;Back Right Module&quot;, BuiltInLayouts.kList)\n                    .withSize(2, 4)\n                    .withPosition(6, 0),\n            Mk4SwerveModuleHelper.GearRatio.L2,\n            BACK_RIGHT_MODULE_DRIVE_MOTOR,\n            BACK_RIGHT_MODULE_STEER_MOTOR,\n            BACK_RIGHT_MODULE_STEER_ENCODER,\n            BACK_RIGHT_MODULE_STEER_OFFSET\n    );\n  }\n\n  /**\n   * Sets the gyroscope angle to zero. This can be used to set the direction the robot is currently facing to the\n   * 'forwards' direction.\n   */\n  public void zeroGyroscope() {\n    // FIXME Remove if you are using a Pigeon\n    //m_pigeon.setFusedHeading(0.0);\n\n    // FIXME Uncomment if you are using a NavX\n    m_navx.zeroYaw();\n  }\n\n  public Rotation2d getGyroscopeRotation() {\n    // FIXME Remove if you are using a Pigeon\n    //return Rotation2d.fromDegrees(m_pigeon.getFusedHeading());\n\n    //FIXME Uncomment if you are using a NavX\n    if (m_navx.isMagnetometerCalibrated()) {\n      // We will only get valid fused headings if the magnetometer is calibrated\n      return Rotation2d.fromDegrees(m_navx.getFusedHeading());\n    }\n\n    // We have to invert the angle of the NavX so that rotating the robot counter-clockwise makes the angle increase.\n    return Rotation2d.fromDegrees(360.0 - m_navx.getYaw());\n  }\n\n  public void drive(ChassisSpeeds chassisSpeeds) {\n    m_chassisSpeeds = chassisSpeeds;\n  }\n\n  @Override\n  public void periodic() {\n    SwerveModuleState[] states = m_kinematics.toSwerveModuleStates(m_chassisSpeeds);\n    SwerveDriveKinematics.desaturateWheelSpeeds(states, MAX_VELOCITY_METERS_PER_SECOND);\n\n    m_frontLeftModule.set(states[0].speedMetersPerSecond / MAX_VELOCITY_METERS_PER_SECOND * MAX_VOLTAGE, states[0].angle.getRadians());\n    m_frontRightModule.set(states[1].speedMetersPerSecond / MAX_VELOCITY_METERS_PER_SECOND * MAX_VOLTAGE, states[1].angle.getRadians());\n    m_backLeftModule.set(states[2].speedMetersPerSecond / MAX_VELOCITY_METERS_PER_SECOND * MAX_VOLTAGE, states[2].angle.getRadians());\n    m_backRightModule.set(states[3].speedMetersPerSecond / MAX_VELOCITY_METERS_PER_SECOND * MAX_VOLTAGE, states[3].angle.getRadians());\n  }\n}\n</code></pre>\n<p>Constants.java</p>\n<pre><code>// Copyright (c) FIRST and other WPILib contributors.\n// Open Source Software; you can modify and/or share it under the terms of\n// the WPILib BSD license file in the root directory of this project.\n\npackage frc.robot;\n\n/**\n * The Constants class provides a convenient place for teams to hold robot-wide numerical or boolean\n * constants. This class should not be used for any other purpose. All constants should be declared\n * globally (i.e. public static). Do not put anything functional in this class.\n *\n * &lt;p&gt;It is advised to statically import this class (or one of its inner classes) wherever the\n * constants are needed, to reduce verbosity.\n */\npublic final class Constants {\n    /**\n     * The left-to-right distance between the drivetrain wheels\n     *\n     * Should be measured from center to center.\n     */\n    public static final double DRIVETRAIN_TRACKWIDTH_METERS = 0.47; // FIXME Measure and set trackwidth\n    /**\n     * The front-to-back distance between the drivetrain wheels.\n     *\n     * Should be measured from center to center.\n     */\n    public static final double DRIVETRAIN_WHEELBASE_METERS = 0.47; // FIXME Measure and set wheelbase\n\n    //public static final int DRIVETRAIN_PIGEON_ID = 0; // FIXME Set Pigeon ID\n\n    public static final int FRONT_LEFT_MODULE_DRIVE_MOTOR = 5; // FIXME Set front left module drive motor ID\n    public static final int FRONT_LEFT_MODULE_STEER_MOTOR = 6; // FIXME Set front left module steer motor ID\n    public static final int FRONT_LEFT_MODULE_STEER_ENCODER = 12; // FIXME Set front left steer encoder ID\n    public static final double FRONT_LEFT_MODULE_STEER_OFFSET = -Math.toRadians(260.42); // FIXME Measure and set front left steer offset\n\n    public static final int FRONT_RIGHT_MODULE_DRIVE_MOTOR = 1; // FIXME Set front right drive motor ID\n    public static final int FRONT_RIGHT_MODULE_STEER_MOTOR = 2; // FIXME Set front right steer motor ID\n    public static final int FRONT_RIGHT_MODULE_STEER_ENCODER = 9; // FIXME Set front right steer encoder ID\n    public static final double FRONT_RIGHT_MODULE_STEER_OFFSET = -Math.toRadians(315.00); // FIXME Measure and set front right steer offset\n\n    public static final int BACK_LEFT_MODULE_DRIVE_MOTOR = 8; // FIXME Set back left drive motor ID\n    public static final int BACK_LEFT_MODULE_STEER_MOTOR = 7; // FIXME Set back left steer motor ID\n    public static final int BACK_LEFT_MODULE_STEER_ENCODER = 11; // FIXME Set back left steer encoder ID\n    public static final double BACK_LEFT_MODULE_STEER_OFFSET = -Math.toRadians(192.83); // FIXME Measure and set back left steer offset\n\n    public static final int BACK_RIGHT_MODULE_DRIVE_MOTOR = 4; // FIXME Set back right drive motor ID\n    public static final int BACK_RIGHT_MODULE_STEER_MOTOR = 3; // FIXME Set back right steer motor ID\n    public static final int BACK_RIGHT_MODULE_STEER_ENCODER = 10; // FIXME Set back right steer encoder ID\n    public static final double BACK_RIGHT_MODULE_STEER_OFFSET = -Math.toRadians(246.71); // FIXME Measure and set back right steer offset\n}\n</code></pre>\n<p>Main.java</p>\n<pre><code>// Copyright (c) FIRST and other WPILib contributors.\n// Open Source Software; you can modify and/or share it under the terms of\n// the WPILib BSD license file in the root directory of this project.\n\npackage frc.robot;\n\nimport edu.wpi.first.wpilibj.RobotBase;\n\n/**\n * Do NOT add any static variables to this class, or any initialization at all. Unless you know what\n * you are doing, do not modify this file except to change the parameter class to the startRobot\n * call.\n */\npublic final class Main {\n  private Main() {}\n\n  /**\n   * Main initialization function. Do not perform any initialization here.\n   *\n   * &lt;p&gt;If you change your main robot class, change the parameter type.\n   */\n  public static void main(String... args) {\n    RobotBase.startRobot(Robot::new);\n  }\n}\n</code></pre>\n<p>Robot.java</p>\n<pre><code>// Copyright (c) FIRST and other WPILib contributors.\n// Open Source Software; you can modify and/or share it under the terms of\n// the WPILib BSD license file in the root directory of this project.\n\npackage frc.robot;\n\nimport edu.wpi.first.wpilibj.TimedRobot;\nimport edu.wpi.first.wpilibj2.command.Command;\nimport edu.wpi.first.wpilibj2.command.CommandScheduler;\n\n/**\n * The VM is configured to automatically run this class, and to call the functions corresponding to\n * each mode, as described in the TimedRobot documentation. If you change the name of this class or\n * the package after creating this project, you must also update the build.gradle file in the\n * project.\n */\npublic class Robot extends TimedRobot {\n  private Command m_autonomousCommand;\n\n  private RobotContainer m_robotContainer;\n\n  /**\n   * This function is run when the robot is first started up and should be used for any\n   * initialization code.\n   */\n  @Override\n  public void robotInit() {\n    // Instantiate our RobotContainer.  This will perform all our button bindings, and put our\n    // autonomous chooser on the dashboard.\n    m_robotContainer = new RobotContainer();\n  }\n\n  /**\n   * This function is called every robot packet, no matter the mode. Use this for items like\n   * diagnostics that you want ran during disabled, autonomous, teleoperated and test.\n   *\n   * &lt;p&gt;This runs after the mode specific periodic functions, but before LiveWindow and\n   * SmartDashboard integrated updating.\n   */\n  @Override\n  public void robotPeriodic() {\n    // Runs the Scheduler.  This is responsible for polling buttons, adding newly-scheduled\n    // commands, running already-scheduled commands, removing finished or interrupted commands,\n    // and running subsystem periodic() methods.  This must be called from the robot's periodic\n    // block in order for anything in the Command-based framework to work.\n    CommandScheduler.getInstance().run();\n  }\n\n  /** This function is called once each time the robot enters Disabled mode. */\n  @Override\n  public void disabledInit() {}\n\n  @Override\n  public void disabledPeriodic() {}\n\n  /** This autonomous runs the autonomous command selected by your {@link RobotContainer} class. */\n  @Override\n  public void autonomousInit() {\n    m_autonomousCommand = m_robotContainer.getAutonomousCommand();\n\n    // schedule the autonomous command (example)\n    if (m_autonomousCommand != null) {\n      m_autonomousCommand.schedule();\n    }\n  }\n\n  /** This function is called periodically during autonomous. */\n  @Override\n  public void autonomousPeriodic() {}\n\n  @Override\n  public void teleopInit() {\n    // This makes sure that the autonomous stops running when\n    // teleop starts running. If you want the autonomous to\n    // continue until interrupted by another command, remove\n    // this line or comment it out.\n    if (m_autonomousCommand != null) {\n      m_autonomousCommand.cancel();\n    }\n  }\n\n  /** This function is called periodically during operator control. */\n  @Override\n  public void teleopPeriodic() {}\n\n  @Override\n  public void testInit() {\n    // Cancels all running commands at the start of test mode.\n    CommandScheduler.getInstance().cancelAll();\n  }\n\n  /** This function is called periodically during test mode. */\n  @Override\n  public void testPeriodic() {}\n}\n</code></pre>\n<p>RobotContainer.java</p>\n<pre><code>// Copyright (c) FIRST and other WPILib contributors.\n// Open Source Software; you can modify and/or share it under the terms of\n// the WPILib BSD license file in the root directory of this project.\n\npackage frc.robot;\n\nimport edu.wpi.first.wpilibj.GenericHID;\nimport edu.wpi.first.wpilibj.XboxController;\nimport edu.wpi.first.math.kinematics.ChassisSpeeds;\nimport edu.wpi.first.wpilibj2.command.Command;\nimport edu.wpi.first.wpilibj2.command.FunctionalCommand;\nimport edu.wpi.first.wpilibj2.command.InstantCommand;\nimport edu.wpi.first.wpilibj2.command.button.Button;\nimport frc.robot.commands.DefaultDriveCommand;\nimport frc.robot.subsystems.DrivetrainSubsystem;\n\n/**\n * This class is where the bulk of the robot should be declared. Since Command-based is a\n * &quot;declarative&quot; paradigm, very little robot logic should actually be handled in the {@link Robot}\n * periodic methods (other than the scheduler calls). Instead, the structure of the robot (including\n * subsystems, commands, and button mappings) should be declared here.\n */\npublic class RobotContainer {\n  // The robot's subsystems and commands are defined here...\n  private final DrivetrainSubsystem m_drivetrainSubsystem = new DrivetrainSubsystem();\n\n  private final XboxController m_controller = new XboxController(0);\n\n  /**\n   * The container for the robot. Contains subsystems, OI devices, and commands.\n   */\n  public RobotContainer() {\n    // Set up the default command for the drivetrain.\n    // The controls are for field-oriented driving:\n    // Left stick Y axis -&gt; forward and backwards movement\n    // Left stick X axis -&gt; left and right movement\n    // Right stick X axis -&gt; rotation\n    m_drivetrainSubsystem.setDefaultCommand(new DefaultDriveCommand(\n        m_drivetrainSubsystem,\n        () -&gt; -modifyAxis(m_controller.getLeftY()) * DrivetrainSubsystem.MAX_VELOCITY_METERS_PER_SECOND,\n        () -&gt; -modifyAxis(m_controller.getLeftX()) * DrivetrainSubsystem.MAX_VELOCITY_METERS_PER_SECOND,\n        () -&gt; -modifyAxis(m_controller.getRightX()) * DrivetrainSubsystem.MAX_ANGULAR_VELOCITY_RADIANS_PER_SECOND\n));\n\n    // Configure the button bindings\n    configureButtonBindings();\n  }\n\n  /**\n   * Use this method to define your button-&gt;command mappings. Buttons can be created by\n   * instantiating a {@link GenericHID} or one of its subclasses ({@link\n   * edu.wpi.first.wpilibj.Joystick} or {@link XboxController}), and then passing it to a {@link\n   * edu.wpi.first.wpilibj2.command.button.JoystickButton}.\n   */\n  private void configureButtonBindings() {\n    // Back button zeros the gyroscope\n    new Button(m_controller::getBackButton)\n            // No requirements because we don't need to interrupt anything\n            .whenPressed(m_drivetrainSubsystem::zeroGyroscope);\n  }\n\n  /**\n   * Use this to pass the autonomous command to the main {@link Robot} class.\n   *\n   * @return the command to run in autonomous\n   */\n  public Command getAutonomousCommand() {\n    // An ExampleCommand will run in autonomous\n    return new InstantCommand();\n  }\n\n  private static double deadband(double value, double deadband) {\n    if (Math.abs(value) &gt; deadband) {\n      if (value &gt; 0.0) {\n        return (value - deadband) / (1.0 - deadband);\n      } else {\n        return (value + deadband) / (1.0 - deadband);\n      }\n    } else {\n      return 0.0;\n    }\n  }\n\n  private static double modifyAxis(double value) {\n    // Deadband\n    value = deadband(value, 0.3);\n\n    // Square the axis\n    value = Math.copySign(value * value, value);\n\n    return value;\n  }\n}\n</code></pre>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":19580981,"reputation":106,"user_id":14330061,"display_name":"dauthDaert06"},"score":0,"creation_date":1688656525,"post_id":76630243,"comment_id":135106137,"body_markdown":"Its an error thrown when the JSON is malformed.","body":"Its an error thrown when the JSON is malformed."},{"owner":{"account_id":15519832,"reputation":1026,"user_id":11478354,"display_name":"dcolazin"},"score":0,"creation_date":1688665765,"post_id":76630243,"comment_id":135107853,"body_markdown":"Please post code as text and not an image of the debugger (which might contain sensitive data). Moreover, it is always better to post the whole stacktrace.","body":"Please post code as text and not an image of the debugger (which might contain sensitive data). Moreover, it is always better to post the whole stacktrace."},{"owner":{"account_id":15519832,"reputation":1026,"user_id":11478354,"display_name":"dcolazin"},"score":0,"creation_date":1688709229,"post_id":76630243,"comment_id":135112735,"body_markdown":"Just to clarify; the expected result is what you are receiving from the server, right?","body":"Just to clarify; the expected result is what you are receiving from the server, right?"}],"answers":[{"tags":[],"owner":{"account_id":15519832,"reputation":1026,"user_id":11478354,"display_name":"dcolazin"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1688709102,"creation_date":1688665502,"answer_id":76631348,"question_id":76630243,"body_markdown":"It seems to me that you are trying to deserialize a `Posiciones` array, but you are receiving an object which contains an array of `Posiciones`s. So you are expecting `[{&quot;chapa&quot;: &quot;abc&quot;, ...}, {&quot;chapa&quot;: &quot;efg&quot;, ...}, ...]` but receiving `{&quot;posiciones&quot;: [{&quot;chapa&quot;: &quot;abc&quot;, ...}, {&quot;chapa&quot;: &quot;efg&quot;, ...}, ...]}`. If it is the case, just wrap the array in an object:\r\n\r\n    public class PosicionesResponse {\r\n\r\n      private Posiciones[] posiciones;\r\n\r\n      //constructors, getters, setters\r\n\r\n    }\r\n\r\nThen you can perform the request this way:\r\n\r\n    ResponseEntity&lt;PosicionesResponse&gt; response = restTemplate.exchange(url, HttpMethod.GET, requestEntity, PosicionesResponse.class);","title":"JSON parse error: Cannot deserialize value of type `[xxx.Class;` from Object value (token `JsonToken.START_OBJECT`)","body":"<p>It seems to me that you are trying to deserialize a <code>Posiciones</code> array, but you are receiving an object which contains an array of <code>Posiciones</code>s. So you are expecting <code>[{&quot;chapa&quot;: &quot;abc&quot;, ...}, {&quot;chapa&quot;: &quot;efg&quot;, ...}, ...]</code> but receiving <code>{&quot;posiciones&quot;: [{&quot;chapa&quot;: &quot;abc&quot;, ...}, {&quot;chapa&quot;: &quot;efg&quot;, ...}, ...]}</code>. If it is the case, just wrap the array in an object:</p>\n<pre><code>public class PosicionesResponse {\n\n  private Posiciones[] posiciones;\n\n  //constructors, getters, setters\n\n}\n</code></pre>\n<p>Then you can perform the request this way:</p>\n<pre><code>ResponseEntity&lt;PosicionesResponse&gt; response = restTemplate.exchange(url, HttpMethod.GET, requestEntity, PosicionesResponse.class);\n</code></pre>\n"}],"owner":{"account_id":28963908,"reputation":3,"user_id":22185826,"display_name":"Alejandro Veitia Ramos"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":96,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1688823459,"accepted_answer_id":76631348,"answer_count":1,"score":-1,"last_activity_date":1688709102,"creation_date":1688656011,"question_id":76630243,"body_markdown":"`I have a problem that I want to consume data from an api but when I connect to it it returns this error: JSON parse error: Cannot deserialize value of type `[xxx.Class;` from Object value (token `JsonToken.START_OBJECT`)\r\nThis method is what I am using to connect to the api. \r\n![enter image description here][1]  \r\n\r\nExpected result:\r\n![enter image description here][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/WeLIk.jpg\r\n  [3]: https://i.stack.imgur.com/TDS6o.png","title":"JSON parse error: Cannot deserialize value of type `[xxx.Class;` from Object value (token `JsonToken.START_OBJECT`)","body":"<p><code>I have a problem that I want to consume data from an api but when I connect to it it returns this error: JSON parse error: Cannot deserialize value of type </code>[xxx.Class;<code>from Object value (token</code>JsonToken.START_OBJECT`)\nThis method is what I am using to connect to the api.\n<img src=\"https://i.stack.imgur.com/WeLIk.jpg\" alt=\"enter image description here\" /></p>\n<p>Expected result:\n<img src=\"https://i.stack.imgur.com/TDS6o.png\" alt=\"enter image description here\" /></p>\n"},{"tags":["java","spring-boot","maven","logback"],"comments":[{"owner":{"account_id":3684821,"reputation":770,"user_id":3068803,"display_name":"surendrapanday"},"score":0,"creation_date":1650890359,"post_id":71910861,"comment_id":127222877,"body_markdown":"FYI - I have removed the logback.xml file and added the configuration in application.properties. Now it is working","body":"FYI - I have removed the logback.xml file and added the configuration in application.properties. Now it is working"},{"owner":{"account_id":13637468,"reputation":91,"user_id":9838123,"display_name":"Robin Kuttaiah"},"score":0,"creation_date":1662994543,"post_id":71910861,"comment_id":130129084,"body_markdown":"Any solution on this. I also see the same problem.","body":"Any solution on this. I also see the same problem."},{"owner":{"account_id":3684821,"reputation":770,"user_id":3068803,"display_name":"surendrapanday"},"score":0,"creation_date":1663132870,"post_id":71910861,"comment_id":130164348,"body_markdown":"@RobinKuttaiah , check the comment above","body":"@RobinKuttaiah , check the comment above"}],"answers":[{"tags":[],"owner":{"account_id":28967293,"reputation":1,"user_id":22188393,"display_name":"Indira"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688703209,"creation_date":1688703109,"answer_id":76633896,"question_id":71910861,"body_markdown":"The closing tag at the end of the file \\&lt;/configuration&gt; is missing in logback.xml file.\r\n\r\nAdd the closing tag of configuration tag \\&lt;/configuration&gt; in the last line of logback.xml file and it would resolve the issue.\r\n","title":"Failed to auto configure default logger context | JoranException: Parser configuration error occurred","body":"<p>The closing tag at the end of the file &lt;/configuration&gt; is missing in logback.xml file.</p>\n<p>Add the closing tag of configuration tag &lt;/configuration&gt; in the last line of logback.xml file and it would resolve the issue.</p>\n"},{"tags":[],"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1688708734,"creation_date":1688708734,"answer_id":76634215,"question_id":71910861,"body_markdown":"This is due to a security feature discussed in [logback#596](https://github.com/qos-ch/logback/discussions/596).\r\n\r\nYou need to remove `pull-parser` from your dependency list:\r\n```lang-xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;dom4j&lt;/groupId&gt;\r\n    &lt;artifactId&gt;dom4j&lt;/artifactId&gt;\r\n    &lt;version&gt;1.5.2&lt;/version&gt;\r\n    &lt;exclusions&gt;\r\n        &lt;exclusion&gt;\r\n            &lt;groupId&gt;pull-parser&lt;/groupId&gt;\r\n            &lt;artifactId&gt;pull-parser&lt;/artifactId&gt;\r\n        &lt;/exclusion&gt;\r\n    &lt;/exclusions&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nYour application will fall back to using the Xerces fork included in every recent JRE, which supports the `http://xml.org/sax/features/external-general-entities` feature.\r\n\r\n**Remark**: When you asked your question the Dom4j version you were using was 17 years old and had already 2 CVEs published, one of them concerned external entities.","title":"Failed to auto configure default logger context | JoranException: Parser configuration error occurred","body":"<p>This is due to a security feature discussed in <a href=\"https://github.com/qos-ch/logback/discussions/596\" rel=\"nofollow noreferrer\">logback#596</a>.</p>\n<p>You need to remove <code>pull-parser</code> from your dependency list:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;dom4j&lt;/groupId&gt;\n    &lt;artifactId&gt;dom4j&lt;/artifactId&gt;\n    &lt;version&gt;1.5.2&lt;/version&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;groupId&gt;pull-parser&lt;/groupId&gt;\n            &lt;artifactId&gt;pull-parser&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Your application will fall back to using the Xerces fork included in every recent JRE, which supports the <code>http://xml.org/sax/features/external-general-entities</code> feature.</p>\n<p><strong>Remark</strong>: When you asked your question the Dom4j version you were using was 17 years old and had already 2 CVEs published, one of them concerned external entities.</p>\n"}],"owner":{"account_id":3684821,"reputation":770,"user_id":3068803,"display_name":"surendrapanday"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3502,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1688708763,"creation_date":1650279206,"question_id":71910861,"body_markdown":"Hi I am getting below error while trying to convert xml to pdf. I am using implicit logger provided by spring boot application.\r\n   -  I have tried including maven dependency for slf4j-api,slf4j-simple also tried including log4j explicitly but didn&#39;t work. \r\nAny help would be appreciated. \r\n\r\n\r\n\r\n\r\n\r\n    Failed to auto configure default logger context\r\n    Reported exception:\r\n    ch.qos.logback.core.joran.spi.JoranException: Parser configuration error occurred\r\n\tat ch.qos.logback.core.joran.event.SaxEventRecorder.buildSaxParser(SaxEventRecorder.java:89)\r\n\tat ch.qos.logback.core.joran.event.SaxEventRecorder.recordEvents(SaxEventRecorder.java:57)\r\n\tat ch.qos.logback.core.joran.GenericConfigurator.doConfigure(GenericConfigurator.java:151)\r\n\tat ch.qos.logback.core.joran.GenericConfigurator.doConfigure(GenericConfigurator.java:110)\r\n\tat ch.qos.logback.core.joran.GenericConfigurator.doConfigure(GenericConfigurator.java:53)\r\n\tat ch.qos.logback.classic.util.ContextInitializer.configureByResource(ContextInitializer.java:65)\r\n\tat ch.qos.logback.classic.util.ContextInitializer.autoConfig(ContextInitializer.java:140)\r\n\tat org.slf4j.impl.StaticLoggerBinder.init(StaticLoggerBinder.java:84)\r\n\tat org.slf4j.impl.StaticLoggerBinder.&lt;clinit&gt;(StaticLoggerBinder.java:55)\r\n\tat org.slf4j.LoggerFactory.bind(LoggerFactory.java:150)\r\n\tat org.slf4j.LoggerFactory.performInitialization(LoggerFactory.java:124)\r\n\tat org.slf4j.LoggerFactory.getILoggerFactory(LoggerFactory.java:417)\r\n\tat org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:362)\r\n\tat org.apache.commons.logging.LogAdapter$Slf4jAdapter.createLocationAwareLog(LogAdapter.java:130)\r\n\tat org.apache.commons.logging.LogAdapter.createLog(LogAdapter.java:91)\r\n\tat org.apache.commons.logging.LogFactory.getLog(LogFactory.java:67)\r\n\tat org.apache.commons.logging.LogFactory.getLog(LogFactory.java:59)\r\n\tat org.springframework.boot.SpringApplication.&lt;clinit&gt;(SpringApplication.java:173)\r\n\tat com.abc.xyz.CrossSellServicesApplication.main(CrossSellServicesApplication.java:25)\r\n    Caused by: org.xml.sax.SAXNotRecognizedException: unrecognized feature http://xml.org/sax/features/external-general-entities\r\n\tat org.gjt.xpp.sax2.Driver.setFeature(Driver.java:178)\r\n\tat org.gjt.xpp.jaxp11.SAXParserImpl.setFeatures(SAXParserImpl.java:149)\r\n\tat org.gjt.xpp.jaxp11.SAXParserImpl.&lt;init&gt;(SAXParserImpl.java:132)\r\n\tat org.gjt.xpp.jaxp11.SAXParserFactoryImpl.newSAXParserImpl(SAXParserFactoryImpl.java:114)\r\n\tat org.gjt.xpp.jaxp11.SAXParserFactoryImpl.setFeature(SAXParserFactoryImpl.java:142)\r\n\tat ch.qos.logback.core.joran.event.SaxEventRecorder.buildSaxParser(SaxEventRecorder.java:82)\r\n\t... 18 more\r\n    14:33:18,422 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback-test.xml]\r\n    14:33:18,423 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback.groovy]\r\n    14:33:18,423 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Found resource [logback.xml] at [file:/D:/workspace/abc-crosssell/target/classes/logback.xml]\r\n    14:33:18,452 |-ERROR in ch.qos.logback.core.joran.event.SaxEventRecorder@1fcd12c - Parser configuration error occurred org.xml.sax.SAXNotRecognizedException: unrecognized feature http://xml.org/sax/features/external-general-entities\r\n\tat org.xml.sax.SAXNotRecognizedException: unrecognized feature http://xml.org/sax/features/external-general-entities\r\n\tat \tat org.gjt.xpp.sax2.Driver.setFeature(Driver.java:178)\r\n\tat \tat org.gjt.xpp.jaxp11.SAXParserImpl.setFeatures(SAXParserImpl.java:149)\r\n\tat \tat org.gjt.xpp.jaxp11.SAXParserImpl.&lt;init&gt;(SAXParserImpl.java:132)\r\n\tat \tat org.gjt.xpp.jaxp11.SAXParserFactoryImpl.newSAXParserImpl(SAXParserFactoryImpl.java:114)\r\n\tat \tat org.gjt.xpp.jaxp11.SAXParserFactoryImpl.setFeature(SAXParserFactoryImpl.java:142)\r\n\tat \tat ch.qos.logback.core.joran.event.SaxEventRecorder.buildSaxParser(SaxEventRecorder.java:82)\r\n\tat \tat ch.qos.logback.core.joran.event.SaxEventRecorder.recordEvents(SaxEventRecorder.java:57)\r\n\tat \tat ch.qos.logback.core.joran.GenericConfigurator.doConfigure(GenericConfigurator.java:151)\r\n\tat \tat ch.qos.logback.core.joran.GenericConfigurator.doConfigure(GenericConfigurator.java:110)\r\n\tat \tat ch.qos.logback.core.joran.GenericConfigurator.doConfigure(GenericConfigurator.java:53)\r\n\tat \tat ch.qos.logback.classic.util.ContextInitializer.configureByResource(ContextInitializer.java:65)\r\n\tat \tat ch.qos.logback.classic.util.ContextInitializer.autoConfig(ContextInitializer.java:140)\r\n\tat \tat org.slf4j.impl.StaticLoggerBinder.init(StaticLoggerBinder.java:84)\r\n\tat \tat org.slf4j.impl.StaticLoggerBinder.&lt;clinit&gt;(StaticLoggerBinder.java:55)\r\n\tat \tat org.slf4j.LoggerFactory.bind(LoggerFactory.java:150)\r\n\tat \tat org.slf4j.LoggerFactory.performInitialization(LoggerFactory.java:124)\r\n\tat \tat org.slf4j.LoggerFactory.getILoggerFactory(LoggerFactory.java:417)\r\n\tat \tat org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:362)\r\n\tat \tat org.apache.commons.logging.LogAdapter$Slf4jAdapter.createLocationAwareLog(LogAdapter.java:130)\r\n\tat \tat org.apache.commons.logging.LogAdapter.createLog(LogAdapter.java:91)\r\n\tat \tat org.apache.commons.logging.LogFactory.getLog(LogFactory.java:67)\r\n\tat \tat org.apache.commons.logging.LogFactory.getLog(LogFactory.java:59)\r\n\tat \tat org.springframework.boot.SpringApplication.&lt;clinit&gt;(SpringApplication.java:173)\r\n\tat \tat com.abc.xyz.CrossSellServicesApplication.main(CrossSellServicesApplication.java:25)\r\n\r\n    Logging system failed to initialize using configuration from &#39;null&#39;\r\n    java.lang.IllegalStateException: Could not initialize Logback logging from classpath:logback.xml\r\n\tat org.springframework.boot.logging.logback.LogbackLoggingSystem.loadConfiguration(LogbackLoggingSystem.java:168)\r\n\tat org.springframework.boot.logging.logback.LogbackLoggingSystem.reinitialize(LogbackLoggingSystem.java:232)\r\n\tat org.springframework.boot.logging.AbstractLoggingSystem.initializeWithConventions(AbstractLoggingSystem.java:73)\r\n\tat org.springframework.boot.logging.AbstractLoggingSystem.initialize(AbstractLoggingSystem.java:60)\r\n\tat org.springframework.boot.logging.logback.LogbackLoggingSystem.initialize(LogbackLoggingSystem.java:132)\r\n\tat org.springframework.boot.context.logging.LoggingApplicationListener.initializeSystem(LoggingApplicationListener.java:313)\r\n\tat org.springframework.boot.context.logging.LoggingApplicationListener.initialize(LoggingApplicationListener.java:282)\r\n\tat org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationEnvironmentPreparedEvent(LoggingApplicationListener.java:240)\r\n\tat org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationEvent(LoggingApplicationListener.java:216)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:176)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:169)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:143)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:131)\r\n\tat org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:85)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.lambda$environmentPrepared$2(SpringApplicationRunListeners.java:66)\r\n\tat java.util.ArrayList.forEach(ArrayList.java:1257)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:120)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:114)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:65)\r\n\tat org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:338)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:296)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1301)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1290)\r\n\tat com.abc.xyz.CrossSellServicesApplication.main(CrossSellServicesApplication.java:25)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)\r\n    Caused by: ch.qos.logback.core.joran.spi.JoranException: Parser configuration error occurred\r\n\tat ch.qos.logback.core.joran.event.SaxEventRecorder.buildSaxParser(SaxEventRecorder.java:89)\r\n\tat ch.qos.logback.core.joran.event.SaxEventRecorder.recordEvents(SaxEventRecorder.java:57)\r\n\tat ch.qos.logback.core.joran.GenericConfigurator.doConfigure(GenericConfigurator.java:151)\r\n\tat ch.qos.logback.core.joran.GenericConfigurator.doConfigure(GenericConfigurator.java:110)\r\n\tat ch.qos.logback.core.joran.GenericConfigurator.doConfigure(GenericConfigurator.java:53)\r\n\tat org.springframework.boot.logging.logback.LogbackLoggingSystem.configureByResourceUrl(LogbackLoggingSystem.java:188)\r\n\tat org.springframework.boot.logging.logback.LogbackLoggingSystem.loadConfiguration(LogbackLoggingSystem.java:165)\r\n\t... 28 more\r\n    Caused by: org.xml.sax.SAXNotRecognizedException: unrecognized feature http://xml.org/sax/features/external-general-entities\r\n\tat org.gjt.xpp.sax2.Driver.setFeature(Driver.java:178)\r\n\tat org.gjt.xpp.jaxp11.SAXParserImpl.setFeatures(SAXParserImpl.java:149)\r\n\tat org.gjt.xpp.jaxp11.SAXParserImpl.&lt;init&gt;(SAXParserImpl.java:132)\r\n\tat org.gjt.xpp.jaxp11.SAXParserFactoryImpl.newSAXParserImpl(SAXParserFactoryImpl.java:114)\r\n\tat org.gjt.xpp.jaxp11.SAXParserFactoryImpl.setFeature(SAXParserFactoryImpl.java:142)\r\n\tat ch.qos.logback.core.joran.event.SaxEventRecorder.buildSaxParser(SaxEventRecorder.java:82)\r\n\t... 34 more\r\n\r\n    Process finished with exit code 0\r\n\r\n\r\nMy logback.xml file.\r\n\r\n    &lt;?xml version = &quot;1.0&quot; encoding = &quot;UTF-8&quot;?&gt;\r\n    &lt;configuration&gt;\r\n    &lt;property name=&quot;LOG_ROOT&quot; value=&quot;./logs&quot;/&gt;\r\n    &lt;property name=&quot;LOG_FILE_NAME&quot; value=&quot;abc-xyz&quot;/&gt;\r\n    &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n        &lt;encoder&gt;\r\n            &lt;pattern&gt;[%d{yyyy-MM-dd&#39;T&#39;HH:mm:ss.sss&#39;Z&#39;}] [%C] [%t] [%L] [%-5p] %m%n&lt;/pattern&gt;\r\n        &lt;/encoder&gt;\r\n    &lt;/appender&gt;\r\n\r\n    &lt;appender name=&quot;FILE-ROLLING&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\r\n        &lt;file&gt;${LOG_ROOT}/${LOG_FILE_NAME}.log&lt;/file&gt;\r\n        &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;&gt;\r\n            &lt;fileNamePattern&gt;${LOG_ROOT}/${LOG_FILE_NAME}-%d{yyyy-MM-dd}.%i.log.gz&lt;/fileNamePattern&gt;\r\n            &lt;!-- each archived file&#39;s size will be max 10MB --&gt;\r\n            &lt;maxFileSize&gt;10MB&lt;/maxFileSize&gt;\r\n            &lt;!-- 30 days to keep --&gt;\r\n            &lt;maxHistory&gt;30&lt;/maxHistory&gt;\r\n            &lt;!-- total size of all archive files, if total size &gt; 100GB, it will delete old archived file --&gt;\r\n            &lt;totalSizeCap&gt;100GB&lt;/totalSizeCap&gt;\r\n        &lt;/rollingPolicy&gt;\r\n        &lt;encoder&gt;\r\n            &lt;pattern&gt;[%d{yyyy-MM-dd&#39;T&#39;HH:mm:ss.sss&#39;Z&#39;}] [%C] [%t] [%L] [%-5p] %m%n&lt;/pattern&gt;\r\n        &lt;/encoder&gt;\r\n    &lt;/appender&gt;\r\n\r\n    &lt;root level=&quot;INFO&quot;&gt;\r\n        &lt;appender-ref ref=&quot;FILE-ROLLING&quot;/&gt;\r\n        &lt;appender-ref ref=&quot;STDOUT&quot;/&gt;\r\n    &lt;/root&gt;\r\n&lt;/configuration&gt;\r\n\r\n\r\nMy pom.xml file\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.6.2&lt;/version&gt;\r\n\t\t&lt;relativePath /&gt; \r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;abc.xyz&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;abc-xyz-application&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;abc-xyz-application&lt;/name&gt;\r\n\t&lt;description&gt;abc-xyz-application services&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t\t&lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n\r\n\t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\t\t&lt;sonar.exclusions&gt;**/*Util.java,**/TestController.java,**/IOSScheduler.java\r\n    &lt;/sonar.exclusions&gt;\r\n\t&lt;/properties&gt;\r\n\t\r\n\t\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.13.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.12.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons-collections4&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.4&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!--this would be needed for rabbit mq --&gt;\r\n\t\t &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-amqp&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt; \r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;httpclient&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jaxb-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.3.0.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.3.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.3.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.javassist&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;javassist&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.25.0-GA&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;redis.clients&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jedis&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.5.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-actuator --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.2.2.RELEASE&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;aws-java-sdk-s3&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.11.163&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!--PDF dependency --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.google.code.findbugs&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jsr305&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.0.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/com.github.librepdf/openpdf --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.github.librepdf&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;openpdf&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.3.26&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/dom4j/dom4j --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;dom4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;dom4j&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.5.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.apache.commons/commons-lang3 --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.12.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/com.ibm.icu/icu4j --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.ibm.icu&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;icu4j&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.8&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/com.itextpdf/itextpdf --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.itextpdf&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;itextpdf&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.5.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.bouncycastle/bcprov-jdk15on --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;bcprov-jdk15on&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.50&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;2.6.2&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;mainClass&gt;com.abc.xyz.CrossSellServicesApplication&lt;/mainClass&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n\r\n&lt;/project&gt;\r\n\r\n","title":"Failed to auto configure default logger context | JoranException: Parser configuration error occurred","body":"<p>Hi I am getting below error while trying to convert xml to pdf. I am using implicit logger provided by spring boot application.</p>\n<ul>\n<li>I have tried including maven dependency for slf4j-api,slf4j-simple also tried including log4j explicitly but didn't work.\nAny help would be appreciated.</li>\n</ul>\n<pre><code>Failed to auto configure default logger context\nReported exception:\nch.qos.logback.core.joran.spi.JoranException: Parser configuration error occurred\nat ch.qos.logback.core.joran.event.SaxEventRecorder.buildSaxParser(SaxEventRecorder.java:89)\nat ch.qos.logback.core.joran.event.SaxEventRecorder.recordEvents(SaxEventRecorder.java:57)\nat ch.qos.logback.core.joran.GenericConfigurator.doConfigure(GenericConfigurator.java:151)\nat ch.qos.logback.core.joran.GenericConfigurator.doConfigure(GenericConfigurator.java:110)\nat ch.qos.logback.core.joran.GenericConfigurator.doConfigure(GenericConfigurator.java:53)\nat ch.qos.logback.classic.util.ContextInitializer.configureByResource(ContextInitializer.java:65)\nat ch.qos.logback.classic.util.ContextInitializer.autoConfig(ContextInitializer.java:140)\nat org.slf4j.impl.StaticLoggerBinder.init(StaticLoggerBinder.java:84)\nat org.slf4j.impl.StaticLoggerBinder.&lt;clinit&gt;(StaticLoggerBinder.java:55)\nat org.slf4j.LoggerFactory.bind(LoggerFactory.java:150)\nat org.slf4j.LoggerFactory.performInitialization(LoggerFactory.java:124)\nat org.slf4j.LoggerFactory.getILoggerFactory(LoggerFactory.java:417)\nat org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:362)\nat org.apache.commons.logging.LogAdapter$Slf4jAdapter.createLocationAwareLog(LogAdapter.java:130)\nat org.apache.commons.logging.LogAdapter.createLog(LogAdapter.java:91)\nat org.apache.commons.logging.LogFactory.getLog(LogFactory.java:67)\nat org.apache.commons.logging.LogFactory.getLog(LogFactory.java:59)\nat org.springframework.boot.SpringApplication.&lt;clinit&gt;(SpringApplication.java:173)\nat com.abc.xyz.CrossSellServicesApplication.main(CrossSellServicesApplication.java:25)\nCaused by: org.xml.sax.SAXNotRecognizedException: unrecognized feature http://xml.org/sax/features/external-general-entities\nat org.gjt.xpp.sax2.Driver.setFeature(Driver.java:178)\nat org.gjt.xpp.jaxp11.SAXParserImpl.setFeatures(SAXParserImpl.java:149)\nat org.gjt.xpp.jaxp11.SAXParserImpl.&lt;init&gt;(SAXParserImpl.java:132)\nat org.gjt.xpp.jaxp11.SAXParserFactoryImpl.newSAXParserImpl(SAXParserFactoryImpl.java:114)\nat org.gjt.xpp.jaxp11.SAXParserFactoryImpl.setFeature(SAXParserFactoryImpl.java:142)\nat ch.qos.logback.core.joran.event.SaxEventRecorder.buildSaxParser(SaxEventRecorder.java:82)\n... 18 more\n14:33:18,422 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback-test.xml]\n14:33:18,423 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback.groovy]\n14:33:18,423 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Found resource [logback.xml] at [file:/D:/workspace/abc-crosssell/target/classes/logback.xml]\n14:33:18,452 |-ERROR in ch.qos.logback.core.joran.event.SaxEventRecorder@1fcd12c - Parser configuration error occurred org.xml.sax.SAXNotRecognizedException: unrecognized feature http://xml.org/sax/features/external-general-entities\nat org.xml.sax.SAXNotRecognizedException: unrecognized feature http://xml.org/sax/features/external-general-entities\nat  at org.gjt.xpp.sax2.Driver.setFeature(Driver.java:178)\nat  at org.gjt.xpp.jaxp11.SAXParserImpl.setFeatures(SAXParserImpl.java:149)\nat  at org.gjt.xpp.jaxp11.SAXParserImpl.&lt;init&gt;(SAXParserImpl.java:132)\nat  at org.gjt.xpp.jaxp11.SAXParserFactoryImpl.newSAXParserImpl(SAXParserFactoryImpl.java:114)\nat  at org.gjt.xpp.jaxp11.SAXParserFactoryImpl.setFeature(SAXParserFactoryImpl.java:142)\nat  at ch.qos.logback.core.joran.event.SaxEventRecorder.buildSaxParser(SaxEventRecorder.java:82)\nat  at ch.qos.logback.core.joran.event.SaxEventRecorder.recordEvents(SaxEventRecorder.java:57)\nat  at ch.qos.logback.core.joran.GenericConfigurator.doConfigure(GenericConfigurator.java:151)\nat  at ch.qos.logback.core.joran.GenericConfigurator.doConfigure(GenericConfigurator.java:110)\nat  at ch.qos.logback.core.joran.GenericConfigurator.doConfigure(GenericConfigurator.java:53)\nat  at ch.qos.logback.classic.util.ContextInitializer.configureByResource(ContextInitializer.java:65)\nat  at ch.qos.logback.classic.util.ContextInitializer.autoConfig(ContextInitializer.java:140)\nat  at org.slf4j.impl.StaticLoggerBinder.init(StaticLoggerBinder.java:84)\nat  at org.slf4j.impl.StaticLoggerBinder.&lt;clinit&gt;(StaticLoggerBinder.java:55)\nat  at org.slf4j.LoggerFactory.bind(LoggerFactory.java:150)\nat  at org.slf4j.LoggerFactory.performInitialization(LoggerFactory.java:124)\nat  at org.slf4j.LoggerFactory.getILoggerFactory(LoggerFactory.java:417)\nat  at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:362)\nat  at org.apache.commons.logging.LogAdapter$Slf4jAdapter.createLocationAwareLog(LogAdapter.java:130)\nat  at org.apache.commons.logging.LogAdapter.createLog(LogAdapter.java:91)\nat  at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:67)\nat  at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:59)\nat  at org.springframework.boot.SpringApplication.&lt;clinit&gt;(SpringApplication.java:173)\nat  at com.abc.xyz.CrossSellServicesApplication.main(CrossSellServicesApplication.java:25)\n\nLogging system failed to initialize using configuration from 'null'\njava.lang.IllegalStateException: Could not initialize Logback logging from classpath:logback.xml\nat org.springframework.boot.logging.logback.LogbackLoggingSystem.loadConfiguration(LogbackLoggingSystem.java:168)\nat org.springframework.boot.logging.logback.LogbackLoggingSystem.reinitialize(LogbackLoggingSystem.java:232)\nat org.springframework.boot.logging.AbstractLoggingSystem.initializeWithConventions(AbstractLoggingSystem.java:73)\nat org.springframework.boot.logging.AbstractLoggingSystem.initialize(AbstractLoggingSystem.java:60)\nat org.springframework.boot.logging.logback.LogbackLoggingSystem.initialize(LogbackLoggingSystem.java:132)\nat org.springframework.boot.context.logging.LoggingApplicationListener.initializeSystem(LoggingApplicationListener.java:313)\nat org.springframework.boot.context.logging.LoggingApplicationListener.initialize(LoggingApplicationListener.java:282)\nat org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationEnvironmentPreparedEvent(LoggingApplicationListener.java:240)\nat org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationEvent(LoggingApplicationListener.java:216)\nat org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:176)\nat org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:169)\nat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:143)\nat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:131)\nat org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:85)\nat org.springframework.boot.SpringApplicationRunListeners.lambda$environmentPrepared$2(SpringApplicationRunListeners.java:66)\nat java.util.ArrayList.forEach(ArrayList.java:1257)\nat org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:120)\nat org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:114)\nat org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:65)\nat org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:338)\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:296)\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:1301)\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:1290)\nat com.abc.xyz.CrossSellServicesApplication.main(CrossSellServicesApplication.java:25)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:498)\nat org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)\nCaused by: ch.qos.logback.core.joran.spi.JoranException: Parser configuration error occurred\nat ch.qos.logback.core.joran.event.SaxEventRecorder.buildSaxParser(SaxEventRecorder.java:89)\nat ch.qos.logback.core.joran.event.SaxEventRecorder.recordEvents(SaxEventRecorder.java:57)\nat ch.qos.logback.core.joran.GenericConfigurator.doConfigure(GenericConfigurator.java:151)\nat ch.qos.logback.core.joran.GenericConfigurator.doConfigure(GenericConfigurator.java:110)\nat ch.qos.logback.core.joran.GenericConfigurator.doConfigure(GenericConfigurator.java:53)\nat org.springframework.boot.logging.logback.LogbackLoggingSystem.configureByResourceUrl(LogbackLoggingSystem.java:188)\nat org.springframework.boot.logging.logback.LogbackLoggingSystem.loadConfiguration(LogbackLoggingSystem.java:165)\n... 28 more\nCaused by: org.xml.sax.SAXNotRecognizedException: unrecognized feature http://xml.org/sax/features/external-general-entities\nat org.gjt.xpp.sax2.Driver.setFeature(Driver.java:178)\nat org.gjt.xpp.jaxp11.SAXParserImpl.setFeatures(SAXParserImpl.java:149)\nat org.gjt.xpp.jaxp11.SAXParserImpl.&lt;init&gt;(SAXParserImpl.java:132)\nat org.gjt.xpp.jaxp11.SAXParserFactoryImpl.newSAXParserImpl(SAXParserFactoryImpl.java:114)\nat org.gjt.xpp.jaxp11.SAXParserFactoryImpl.setFeature(SAXParserFactoryImpl.java:142)\nat ch.qos.logback.core.joran.event.SaxEventRecorder.buildSaxParser(SaxEventRecorder.java:82)\n... 34 more\n\nProcess finished with exit code 0\n</code></pre>\n<p>My logback.xml file.</p>\n<pre><code>&lt;?xml version = &quot;1.0&quot; encoding = &quot;UTF-8&quot;?&gt;\n&lt;configuration&gt;\n&lt;property name=&quot;LOG_ROOT&quot; value=&quot;./logs&quot;/&gt;\n&lt;property name=&quot;LOG_FILE_NAME&quot; value=&quot;abc-xyz&quot;/&gt;\n&lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\n    &lt;encoder&gt;\n        &lt;pattern&gt;[%d{yyyy-MM-dd'T'HH:mm:ss.sss'Z'}] [%C] [%t] [%L] [%-5p] %m%n&lt;/pattern&gt;\n    &lt;/encoder&gt;\n&lt;/appender&gt;\n\n&lt;appender name=&quot;FILE-ROLLING&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\n    &lt;file&gt;${LOG_ROOT}/${LOG_FILE_NAME}.log&lt;/file&gt;\n    &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;&gt;\n        &lt;fileNamePattern&gt;${LOG_ROOT}/${LOG_FILE_NAME}-%d{yyyy-MM-dd}.%i.log.gz&lt;/fileNamePattern&gt;\n        &lt;!-- each archived file's size will be max 10MB --&gt;\n        &lt;maxFileSize&gt;10MB&lt;/maxFileSize&gt;\n        &lt;!-- 30 days to keep --&gt;\n        &lt;maxHistory&gt;30&lt;/maxHistory&gt;\n        &lt;!-- total size of all archive files, if total size &gt; 100GB, it will delete old archived file --&gt;\n        &lt;totalSizeCap&gt;100GB&lt;/totalSizeCap&gt;\n    &lt;/rollingPolicy&gt;\n    &lt;encoder&gt;\n        &lt;pattern&gt;[%d{yyyy-MM-dd'T'HH:mm:ss.sss'Z'}] [%C] [%t] [%L] [%-5p] %m%n&lt;/pattern&gt;\n    &lt;/encoder&gt;\n&lt;/appender&gt;\n\n&lt;root level=&quot;INFO&quot;&gt;\n    &lt;appender-ref ref=&quot;FILE-ROLLING&quot;/&gt;\n    &lt;appender-ref ref=&quot;STDOUT&quot;/&gt;\n&lt;/root&gt;\n</code></pre>\n\n<p>My pom.xml file</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.6.2&lt;/version&gt;\n    &lt;relativePath /&gt; \n&lt;/parent&gt;\n&lt;groupId&gt;abc.xyz&lt;/groupId&gt;\n&lt;artifactId&gt;abc-xyz-application&lt;/artifactId&gt;\n&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n&lt;name&gt;abc-xyz-application&lt;/name&gt;\n&lt;description&gt;abc-xyz-application services&lt;/description&gt;\n&lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n\n    &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;sonar.exclusions&gt;**/*Util.java,**/TestController.java,**/IOSScheduler.java\n&lt;/sonar.exclusions&gt;\n&lt;/properties&gt;\n\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\n                &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n        &lt;version&gt;2.13.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n        &lt;version&gt;3.12.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-collections4&lt;/artifactId&gt;\n        &lt;version&gt;4.4&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!--this would be needed for rabbit mq --&gt;\n     &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-amqp&lt;/artifactId&gt;\n    &lt;/dependency&gt; \n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n        &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n        &lt;artifactId&gt;jaxb-core&lt;/artifactId&gt;\n        &lt;version&gt;2.3.0.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n        &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n        &lt;version&gt;2.3.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n        &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\n        &lt;version&gt;2.3.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.javassist&lt;/groupId&gt;\n        &lt;artifactId&gt;javassist&lt;/artifactId&gt;\n        &lt;version&gt;3.25.0-GA&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;optional&gt;true&lt;/optional&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;redis.clients&lt;/groupId&gt;\n        &lt;artifactId&gt;jedis&lt;/artifactId&gt;\n        &lt;version&gt;3.5.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-actuator --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;version&gt;2.2.2.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\n        &lt;artifactId&gt;aws-java-sdk-s3&lt;/artifactId&gt;\n        &lt;version&gt;1.11.163&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!--PDF dependency --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.google.code.findbugs&lt;/groupId&gt;\n        &lt;artifactId&gt;jsr305&lt;/artifactId&gt;\n        &lt;version&gt;3.0.2&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/com.github.librepdf/openpdf --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.github.librepdf&lt;/groupId&gt;\n        &lt;artifactId&gt;openpdf&lt;/artifactId&gt;\n        &lt;version&gt;1.3.26&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/dom4j/dom4j --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;dom4j&lt;/groupId&gt;\n        &lt;artifactId&gt;dom4j&lt;/artifactId&gt;\n        &lt;version&gt;1.5.2&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/org.apache.commons/commons-lang3 --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n        &lt;version&gt;3.12.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/com.ibm.icu/icu4j --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.ibm.icu&lt;/groupId&gt;\n        &lt;artifactId&gt;icu4j&lt;/artifactId&gt;\n        &lt;version&gt;4.8&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/com.itextpdf/itextpdf --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.itextpdf&lt;/groupId&gt;\n        &lt;artifactId&gt;itextpdf&lt;/artifactId&gt;\n        &lt;version&gt;5.5.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/org.bouncycastle/bcprov-jdk15on --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\n        &lt;artifactId&gt;bcprov-jdk15on&lt;/artifactId&gt;\n        &lt;version&gt;1.50&lt;/version&gt;\n    &lt;/dependency&gt;\n\n\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.6.2&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;mainClass&gt;com.abc.xyz.CrossSellServicesApplication&lt;/mainClass&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n"},{"tags":["java","arrays","logic"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1441016812,"post_id":32309078,"comment_id":52493240,"body_markdown":"so ... what is your actual question? what is it you&#39;re stuck with?","body":"so ... what is your actual question? what is it you&#39;re stuck with?"},{"owner":{"account_id":5076019,"reputation":321,"user_id":4796386,"accept_rate":70,"display_name":"shubham gupta"},"score":0,"creation_date":1441017051,"post_id":32309078,"comment_id":52493372,"body_markdown":"@Stultuske i&#39;m not getting the exact series! I&#39;m looking for a proper logic to do this.","body":"@Stultuske i&#39;m not getting the exact series! I&#39;m looking for a proper logic to do this."}],"answers":[{"comments":[{"owner":{"account_id":3225359,"reputation":6722,"user_id":2721865,"accept_rate":100,"display_name":"kai"},"score":2,"creation_date":1441017250,"post_id":32309195,"comment_id":52493458,"body_markdown":"No it does not work. It prints the whole array, then only the last four elements, then the last three elements and so on...","body":"No it does not work. It prints the whole array, then only the last four elements, then the last three elements and so on..."}],"tags":[],"owner":{"account_id":6814117,"reputation":25,"user_id":5243383,"accept_rate":75,"display_name":"Andrea Rovinetti"},"comment_count":1,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1441017008,"creation_date":1441017008,"answer_id":32309195,"question_id":32309078,"body_markdown":"Try something like this:\r\n     \r\n    for(int i=0; i&lt;items.length; i++)\r\n    {\r\n       for(int j=i; j&lt;items.length; j++)\r\n       {\r\n          System.out.print(items[j]);\r\n       }\r\n       System.out.println();\r\n    }\r\n\r\nI haven&#39;t tested yet, but it should work.","title":"Generate all contiguous sequences from an array","body":"<p>Try something like this:</p>\n\n<pre><code>for(int i=0; i&lt;items.length; i++)\n{\n   for(int j=i; j&lt;items.length; j++)\n   {\n      System.out.print(items[j]);\n   }\n   System.out.println();\n}\n</code></pre>\n\n<p>I haven't tested yet, but it should work.</p>\n"},{"tags":[],"owner":{"account_id":6004752,"reputation":3678,"user_id":4717027,"display_name":"Ori Lentz"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1441017036,"creation_date":1441017036,"answer_id":32309204,"question_id":32309078,"body_markdown":"The problem seems to be with your second loop:\r\n\r\n    for(int j=0;j&lt;items.length-i;j++)\r\n\r\nYou&#39;re always running on the first i places. What you want to do is run from i until the end of the array, as such:\r\n\r\n    for(int j=i;j&lt;items.length;j++)","title":"Generate all contiguous sequences from an array","body":"<p>The problem seems to be with your second loop:</p>\n\n<pre><code>for(int j=0;j&lt;items.length-i;j++)\n</code></pre>\n\n<p>You're always running on the first i places. What you want to do is run from i until the end of the array, as such:</p>\n\n<pre><code>for(int j=i;j&lt;items.length;j++)\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5445664,"reputation":4925,"user_id":4332316,"accept_rate":20,"display_name":"Ali Akram"},"score":0,"creation_date":1578480967,"post_id":32309248,"comment_id":105449723,"body_markdown":"is it possible to do in less than 3 loops?","body":"is it possible to do in less than 3 loops?"},{"owner":{"account_id":3225359,"reputation":6722,"user_id":2721865,"accept_rate":100,"display_name":"kai"},"score":1,"creation_date":1578486152,"post_id":32309248,"comment_id":105452628,"body_markdown":"@AliAkram This algorithm has a runtime complexity of  O(n&#178;) so you need at least two loops. My code uses only two loops for generating the sequences. The third loop is only for printing. You can replace the inner loop with `System.out.println(Arrays.toString(Arrays.copyOfRange(items, i, j + 1)));`","body":"@AliAkram This algorithm has a runtime complexity of  O(n&#178;) so you need at least two loops. My code uses only two loops for generating the sequences. The third loop is only for printing. You can replace the inner loop with <code>System.out.println(Arrays.toString(Arrays.copyOfRange(items, i, j + 1)));</code>"},{"owner":{"account_id":15829979,"reputation":966,"user_id":11421611,"display_name":"chirag soni"},"score":0,"creation_date":1642502501,"post_id":32309248,"comment_id":125081963,"body_markdown":"@AliAkram yes possible to use less than 3 loops. Look here: https://stackoverflow.com/a/70754152/11421611","body":"@AliAkram yes possible to use less than 3 loops. Look here: <a href=\"https://stackoverflow.com/a/70754152/11421611\">stackoverflow.com/a/70754152/11421611</a>"}],"tags":[],"owner":{"account_id":3225359,"reputation":6722,"user_id":2721865,"accept_rate":100,"display_name":"kai"},"comment_count":3,"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1530174698,"creation_date":1441017202,"answer_id":32309248,"question_id":32309078,"body_markdown":"You only have to make 2 changes. The outer loop iterates as much times as the array has elements, this is correct. The first inner loop should use the index of the outer loop as start index (`int j = i`), otherwise you always start with the first element. And then change the inner loop break conditon to `k &lt;= j`, otherwise `i` does not print the last element. \r\n\r\n    // i is the start index\r\n    for (int i = 0; i &lt; items.length; i++)\r\n    {\r\n        // j is the number of elements which should be printed\r\n        for (int j = i; j &lt; items.length; j++)\r\n        {\r\n            // print the array from i to j\r\n            for (int k = i; k &lt;= j; k++)\r\n            {\r\n                System.out.print(items[k]);\r\n            }\r\n            System.out.println();\r\n        }\r\n    }","title":"Generate all contiguous sequences from an array","body":"<p>You only have to make 2 changes. The outer loop iterates as much times as the array has elements, this is correct. The first inner loop should use the index of the outer loop as start index (<code>int j = i</code>), otherwise you always start with the first element. And then change the inner loop break conditon to <code>k &lt;= j</code>, otherwise <code>i</code> does not print the last element. </p>\n\n<pre><code>// i is the start index\nfor (int i = 0; i &lt; items.length; i++)\n{\n    // j is the number of elements which should be printed\n    for (int j = i; j &lt; items.length; j++)\n    {\n        // print the array from i to j\n        for (int k = i; k &lt;= j; k++)\n        {\n            System.out.print(items[k]);\n        }\n        System.out.println();\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3225359,"reputation":6722,"user_id":2721865,"accept_rate":100,"display_name":"kai"},"score":0,"creation_date":1441017616,"post_id":32309305,"comment_id":52493669,"body_markdown":"The output is correct, but with much extra spaces between the lines :)","body":"The output is correct, but with much extra spaces between the lines :)"}],"tags":[],"owner":{"account_id":6145271,"reputation":740,"user_id":4791438,"accept_rate":50,"display_name":"Rafiq"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1530174778,"creation_date":1441017402,"answer_id":32309305,"question_id":32309078,"body_markdown":"Try this way.   \r\n   \r\n    int items[]={1,2,4,5,1};\r\n    for(int i=0;i&lt;=items.length;i++)//items is the main array \r\n    {\r\n        int num=0;\r\n        for(int j=0;j&lt;items.length;j++)\r\n        {\r\n            for(int k=i;k&lt;=j;k++)\r\n            {\r\n                System.out.print(items[k]);\r\n            }\r\n\r\n            System.out.println();\r\n        }\r\n    }","title":"Generate all contiguous sequences from an array","body":"<p>Try this way.   </p>\n\n<pre><code>int items[]={1,2,4,5,1};\nfor(int i=0;i&lt;=items.length;i++)//items is the main array \n{\n    int num=0;\n    for(int j=0;j&lt;items.length;j++)\n    {\n        for(int k=i;k&lt;=j;k++)\n        {\n            System.out.print(items[k]);\n        }\n\n        System.out.println();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6863070,"reputation":1880,"user_id":5276428,"accept_rate":52,"display_name":"burglarhobbit"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1441017561,"creation_date":1441017561,"answer_id":32309342,"question_id":32309078,"body_markdown":"Tested and working! Try this algorithm.\r\n\r\n    for(int i=0;i&lt;items.length;i++) {\r\n\t\t\t\r\n\t\t\tfor(int j=i;j&lt;items.length;j++) {\r\n            \r\n\t\t\t\tfor(int k=i;k&lt;=j;k++) {\r\n                \r\n\t\t\t\t\tSystem.out.print(items[k]);\r\n                }\r\n                System.out.println();\r\n            }\r\n    }","title":"Generate all contiguous sequences from an array","body":"<p>Tested and working! Try this algorithm.</p>\n\n<pre><code>for(int i=0;i&lt;items.length;i++) {\n\n        for(int j=i;j&lt;items.length;j++) {\n\n            for(int k=i;k&lt;=j;k++) {\n\n                System.out.print(items[k]);\n            }\n            System.out.println();\n        }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2525483,"reputation":1234,"user_id":2194953,"accept_rate":49,"display_name":"Sid"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1530174828,"creation_date":1441017623,"answer_id":32309361,"question_id":32309078,"body_markdown":"Use the below code:\r\n\r\n    import java.io.*;\r\n    class stack\r\n    {\r\n        public static void main(String args[]) throws IOException\r\n        {\r\n            int items[]={1,2,4,5,1};\r\n            \r\n            for(int i=0;i&lt;items.length;i++)//items is the main array \r\n            {\r\n                for(int j=i;j&lt;items.length;j++)\r\n                {\r\n                    for(int k=i;k&lt;=j;k++)\r\n                    {\r\n                        System.out.print(items[k]);\r\n                        if (k==j)\r\n                            continue;\r\n                        else\r\n                            System.out.print(&quot;,&quot;);\r\n                    }\r\n                    System.out.println();\r\n                }\r\n            }\r\n        }\r\n    }\r\n","title":"Generate all contiguous sequences from an array","body":"<p>Use the below code:</p>\n\n<pre><code>import java.io.*;\nclass stack\n{\n    public static void main(String args[]) throws IOException\n    {\n        int items[]={1,2,4,5,1};\n\n        for(int i=0;i&lt;items.length;i++)//items is the main array \n        {\n            for(int j=i;j&lt;items.length;j++)\n            {\n                for(int k=i;k&lt;=j;k++)\n                {\n                    System.out.print(items[k]);\n                    if (k==j)\n                        continue;\n                    else\n                        System.out.print(\",\");\n                }\n                System.out.println();\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5897247,"reputation":9,"user_id":4642010,"display_name":"Mohit"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1530174724,"creation_date":1441022847,"answer_id":32310885,"question_id":32309078,"body_markdown":"I think this may help \r\n\r\n    for(int i=0;i&lt;=items.length-1;i++)\r\n    {\r\n        for(int l=i;l&lt;=items.length;l++)\r\n        {\r\n        int b[]=Arrays.copyOfRange(a, i,l);\r\n        \r\n            for(int k=0;k&lt;=b.length-1;k++)\r\n            {\r\n                System.out.print(b[k]);\r\n            }\r\n            \r\n            System.out.println();\r\n        }\r\n    }","title":"Generate all contiguous sequences from an array","body":"<p>I think this may help </p>\n\n<pre><code>for(int i=0;i&lt;=items.length-1;i++)\n{\n    for(int l=i;l&lt;=items.length;l++)\n    {\n    int b[]=Arrays.copyOfRange(a, i,l);\n\n        for(int k=0;k&lt;=b.length-1;k++)\n        {\n            System.out.print(b[k]);\n        }\n\n        System.out.println();\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":10992960,"reputation":21,"user_id":8076209,"display_name":"Young Song"},"score":0,"creation_date":1560549927,"post_id":56605651,"comment_id":99787385,"body_markdown":"Using loop twice. To get just sum, I suggested using pattern of the subarrays.","body":"Using loop twice. To get just sum, I suggested using pattern of the subarrays."}],"tags":[],"owner":{"account_id":10992960,"reputation":21,"user_id":8076209,"display_name":"Young Song"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1560549807,"creation_date":1560549807,"answer_id":56605651,"question_id":32309078,"body_markdown":"    // Javascript.\r\n    // Generate Array and print it.\r\n    function subArray(arr) {\r\n        if (arr.length &lt; 1) return 0;\r\n        if (arr.length &lt; 2) return arr[0];\r\n\r\n        let result = [];\r\n        for (let i = 0; i &lt; arr.length; i++) {\r\n            const temp = [];\r\n            for (let j = i; j &lt; arr.length; j++) {\r\n                temp.push(arr[j]);\r\n                result.push([...temp]);\r\n                console.log(temp.join(&#39;,&#39;));\r\n            }\r\n        }\r\n        return result\r\n    }\r\n\r\n    // Calculate only Sum of the subarrays.\r\n    function subArrSum(arr) {\r\n      if (arr.length &lt; 1) return 0;\r\n      if (arr.length &lt; 2) return arr[0];\r\n\r\n      let sum = 0;\r\n      for (let i = 0; i &lt; arr.length; i++) {\r\n          sum += (arr.length - i) * (i + 1) * arr[i];\r\n      }\r\n      return sum;\r\n    }\r\n","title":"Generate all contiguous sequences from an array","body":"<pre><code>// Javascript.\n// Generate Array and print it.\nfunction subArray(arr) {\n    if (arr.length &lt; 1) return 0;\n    if (arr.length &lt; 2) return arr[0];\n\n    let result = [];\n    for (let i = 0; i &lt; arr.length; i++) {\n        const temp = [];\n        for (let j = i; j &lt; arr.length; j++) {\n            temp.push(arr[j]);\n            result.push([...temp]);\n            console.log(temp.join(','));\n        }\n    }\n    return result\n}\n\n// Calculate only Sum of the subarrays.\nfunction subArrSum(arr) {\n  if (arr.length &lt; 1) return 0;\n  if (arr.length &lt; 2) return arr[0];\n\n  let sum = 0;\n  for (let i = 0; i &lt; arr.length; i++) {\n      sum += (arr.length - i) * (i + 1) * arr[i];\n  }\n  return sum;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15829979,"reputation":966,"user_id":11421611,"display_name":"chirag soni"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642503009,"creation_date":1642502323,"answer_id":70754152,"question_id":32309078,"body_markdown":"There is one better approach that takes less time:\r\n\r\nInput:\r\n    \r\n    int items[] = {1,2,3,4};\r\nCode: \r\n \r\n    int j = 0;\r\n    StringBuilder sb = new StringBuilder();\r\n\r\n    for(int i = 0; i &lt; items.length; i++){ \r\n  \r\n       sb.setLength(0);\r\n       j = 0;\r\n       sb.append(items[i]+ &quot; &quot;);\r\n       System.out.print(sb.toString()+ &quot; &quot;);\r\n       System.out.println();\r\n\r\n       j=i+1;\r\n       \r\n       while(j&lt; items.length){\r\n\r\n           sb.append(arr.get(j) + &quot; &quot;);\r\n           System.out.print(sb.toString() +&quot; &quot;);\r\n           System.out.println();\r\n\r\n           j = j+1;\r\n       }\r\n       System.out.println();\r\n       }\r\n\r\nOutput:\r\n\r\n \r\n\r\n      1\r\n      1 2\r\n      1 2 3\r\n      1 2 3 4\r\n\r\n      2 \r\n      2 3\r\n      2 3 4\r\n      \r\n      3\r\n      3 4\r\n\r\n      4\r\n\r\n  ","title":"Generate all contiguous sequences from an array","body":"<p>There is one better approach that takes less time:</p>\n<p>Input:</p>\n<pre><code>int items[] = {1,2,3,4};\n</code></pre>\n<p>Code:</p>\n<pre><code>int j = 0;\nStringBuilder sb = new StringBuilder();\n\nfor(int i = 0; i &lt; items.length; i++){ \n\n   sb.setLength(0);\n   j = 0;\n   sb.append(items[i]+ &quot; &quot;);\n   System.out.print(sb.toString()+ &quot; &quot;);\n   System.out.println();\n\n   j=i+1;\n   \n   while(j&lt; items.length){\n\n       sb.append(arr.get(j) + &quot; &quot;);\n       System.out.print(sb.toString() +&quot; &quot;);\n       System.out.println();\n\n       j = j+1;\n   }\n   System.out.println();\n   }\n</code></pre>\n<p>Output:</p>\n<pre><code>  1\n  1 2\n  1 2 3\n  1 2 3 4\n\n  2 \n  2 3\n  2 3 4\n  \n  3\n  3 4\n\n  4\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17439432,"reputation":1,"user_id":12641819,"display_name":"Devjeet Roy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1650735610,"creation_date":1650735610,"answer_id":71982167,"question_id":32309078,"body_markdown":"def printSubsequences(l, r, arr:list, n):&lt;br/&gt;\r\n\r\n    if(l == n):\r\n        return\r\n    while(l&lt;=r):\r\n        print(arr[l:r+1])\r\n        r-=1\r\n    printSubsequences(l+1, n-1, arr, n)\r\n\r\nif ```__name__``` == ```&quot;__main__&quot;```:&lt;br/&gt;\r\n    arr = list(map(int, input(&quot;Enter : &quot;).strip().split()))&lt;br/&gt;\r\n    printSubsequences(0, len(arr)-1, arr, len(arr))","title":"Generate all contiguous sequences from an array","body":"<p>def printSubsequences(l, r, arr:list, n):<br/></p>\n<pre><code>if(l == n):\n    return\nwhile(l&lt;=r):\n    print(arr[l:r+1])\n    r-=1\nprintSubsequences(l+1, n-1, arr, n)\n</code></pre>\n<p>if <code>__name__</code> == <code>&quot;__main__&quot;</code>:<br/>\narr = list(map(int, input(&quot;Enter : &quot;).strip().split()))<br/>\nprintSubsequences(0, len(arr)-1, arr, len(arr))</p>\n"},{"tags":[],"owner":{"account_id":28967674,"reputation":1,"user_id":22188680,"display_name":"Dmitry"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688708650,"creation_date":1688708376,"answer_id":76634188,"question_id":32309078,"body_markdown":"\r\n    static void printContiguousSequence(int[] arr, int fromIndex, int toIndex)   {\r\n\t\tif (toIndex &gt; arr.length)\r\n\t\t\treturn;\r\n\r\n\t\tfor (int i = fromIndex; i &lt; toIndex; i++) {\r\n\t\t\tSystem.out.print(arr[i]);\r\n\t\t}\r\n\r\n\t\tSystem.out.println();\r\n\r\n\t\tif (toIndex == arr.length) {\r\n\t\t\tfromIndex++;\r\n\t\t\ttoIndex = fromIndex;\r\n\t\t}\r\n\t\tprintContiguousSequence(arr, fromIndex, toIndex + 1);\r\n\t}\r\n\r\n    public static void main(String args[]) {\r\n        int[] arr = { 1, 2, 4, 5, 1 };\r\n\t\tprintContiguousSequence(arr, 0, 1);\r\n\t}","title":"Generate all contiguous sequences from an array","body":"<pre><code>static void printContiguousSequence(int[] arr, int fromIndex, int toIndex)   {\n    if (toIndex &gt; arr.length)\n        return;\n\n    for (int i = fromIndex; i &lt; toIndex; i++) {\n        System.out.print(arr[i]);\n    }\n\n    System.out.println();\n\n    if (toIndex == arr.length) {\n        fromIndex++;\n        toIndex = fromIndex;\n    }\n    printContiguousSequence(arr, fromIndex, toIndex + 1);\n}\n\npublic static void main(String args[]) {\n    int[] arr = { 1, 2, 4, 5, 1 };\n    printContiguousSequence(arr, 0, 1);\n}\n</code></pre>\n"}],"owner":{"account_id":5076019,"reputation":321,"user_id":4796386,"accept_rate":70,"display_name":"shubham gupta"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20655,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":32309248,"answer_count":11,"score":10,"last_activity_date":1688708650,"creation_date":1441016625,"question_id":32309078,"body_markdown":"There&#39;s an array say [1,2,4,5,1]. I need to print all the contiguous sub-arrays from this. \r\n\r\nInput: `[1,2,4,5,1]`\r\n\r\nOutput:\r\n\r\n     1\r\n     1,2\r\n     1,2,4\r\n     1,2,4,5\r\n     1,2,4,5,1\r\n     2\r\n     2,4\r\n     2,4,5\r\n     2,4,5,1\r\n     4\r\n     4,5\r\n     4,5,1\r\n     5\r\n     5,1\r\n     1\r\n\r\nI tried but couldn&#39;t get the complete series.\r\n\r\n    //items is the main array\r\n    for(int i = 0; i &lt; items.length; i++) {\r\n        int num = 0;\r\n        for(int j = 0; j &lt; items.length - i; j++) {\r\n            for(int k = i; k &lt; j; k++) {\r\n                System.out.print(items[k]);\r\n            }\r\n            System.out.println();\r\n        }\r\n    }\r\n","title":"Generate all contiguous sequences from an array","body":"<p>There's an array say [1,2,4,5,1]. I need to print all the contiguous sub-arrays from this. </p>\n\n<p>Input: <code>[1,2,4,5,1]</code></p>\n\n<p>Output:</p>\n\n<pre><code> 1\n 1,2\n 1,2,4\n 1,2,4,5\n 1,2,4,5,1\n 2\n 2,4\n 2,4,5\n 2,4,5,1\n 4\n 4,5\n 4,5,1\n 5\n 5,1\n 1\n</code></pre>\n\n<p>I tried but couldn't get the complete series.</p>\n\n<pre><code>//items is the main array\nfor(int i = 0; i &lt; items.length; i++) {\n    int num = 0;\n    for(int j = 0; j &lt; items.length - i; j++) {\n        for(int k = i; k &lt; j; k++) {\n            System.out.print(items[k]);\n        }\n        System.out.println();\n    }\n}\n</code></pre>\n"},{"tags":["java","amazon-web-services","spring-boot"],"answers":[{"comments":[{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1688651606,"post_id":76629518,"comment_id":135104980,"body_markdown":"That `new WaiterParameters&lt;&gt;()` is missing from your original code...","body":"That <code>new WaiterParameters&lt;&gt;()</code> is missing from your original code..."}],"tags":[],"owner":{"account_id":281380,"reputation":2648,"user_id":577647,"accept_rate":69,"display_name":"tolga"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1688708051,"creation_date":1688651123,"answer_id":76629518,"question_id":76629377,"body_markdown":"After dividing into 2 lines I was able to see the problem, new WaiterParameters&lt;&gt; is missing.\r\n\r\n    Waiter&lt;DescribeTableRequest&gt; waiter = dynamoDbClient.waiters().tableExists();\r\n    waiter.run(new WaiterParameters&lt;&gt;(new DescribeTableRequest(tableName)));","title":"incompatible types: com.amazonaws.waiters.WaiterParameters is not a functional interface","body":"<p>After dividing into 2 lines I was able to see the problem, new WaiterParameters&lt;&gt; is missing.</p>\n<pre><code>Waiter&lt;DescribeTableRequest&gt; waiter = dynamoDbClient.waiters().tableExists();\nwaiter.run(new WaiterParameters&lt;&gt;(new DescribeTableRequest(tableName)));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1540816,"reputation":10259,"user_id":1435543,"display_name":"smac2020"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688658638,"creation_date":1688658638,"answer_id":76630579,"question_id":76629377,"body_markdown":"Use AWS SDK for Java V2, not the AWS SDK for Java V1 - which is no longer recommended to use as [specified on this AWS page][1].\r\n\r\nYou can use Waiters easily using the Amazon Dynamo V2 API. See this code example. \r\n\r\n    //snippet-sourcedescription:[CreateTable.java demonstrates how to create an Amazon DynamoDB table by using a waiter.]\r\n    //snippet-keyword:[SDK for Java v2]\r\n    //snippet-service:[Amazon DynamoDB]\r\n    \r\n    /*\r\n       Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\r\n       SPDX-License-Identifier: Apache-2.0\r\n    */\r\n    \r\n    package com.example.dynamodb;\r\n    \r\n    // snippet-start:[dynamodb.java2.create_table.import]\r\n    import software.amazon.awssdk.auth.credentials.ProfileCredentialsProvider;\r\n    import software.amazon.awssdk.core.waiters.WaiterResponse;\r\n    import software.amazon.awssdk.regions.Region;\r\n    import software.amazon.awssdk.services.dynamodb.DynamoDbClient;\r\n    import software.amazon.awssdk.services.dynamodb.model.AttributeDefinition;\r\n    import software.amazon.awssdk.services.dynamodb.model.CreateTableRequest;\r\n    import software.amazon.awssdk.services.dynamodb.model.CreateTableResponse;\r\n    import software.amazon.awssdk.services.dynamodb.model.DescribeTableRequest;\r\n    import software.amazon.awssdk.services.dynamodb.model.DescribeTableResponse;\r\n    import software.amazon.awssdk.services.dynamodb.model.DynamoDbException;\r\n    import software.amazon.awssdk.services.dynamodb.model.KeySchemaElement;\r\n    import software.amazon.awssdk.services.dynamodb.model.KeyType;\r\n    import software.amazon.awssdk.services.dynamodb.model.ProvisionedThroughput;\r\n    import software.amazon.awssdk.services.dynamodb.model.ScalarAttributeType;\r\n    import software.amazon.awssdk.services.dynamodb.waiters.DynamoDbWaiter;\r\n    // snippet-end:[dynamodb.java2.create_table.import]\r\n    \r\n    /**\r\n     * Before running this Java V2 code example, set up your development environment, including your credentials.\r\n     *\r\n     * For more information, see the following documentation topic:\r\n     *\r\n     * https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/get-started.html\r\n     */\r\n    public class CreateTable {\r\n    \r\n        public static void main(String[] args) {\r\n    \r\n            final String usage = &quot;\\n&quot; +\r\n                &quot;Usage:\\n&quot; +\r\n                &quot;    &lt;tableName&gt; &lt;key&gt;\\n\\n&quot; +\r\n                &quot;Where:\\n&quot; +\r\n                &quot;    tableName - The Amazon DynamoDB table to create (for example, Music3).\\n\\n&quot; +\r\n                &quot;    key - The key for the Amazon DynamoDB table (for example, Artist).\\n&quot; ;\r\n    \r\n           if (args.length != 2) {\r\n               System.out.println(usage);\r\n               System.exit(1);\r\n           }\r\n    \r\n           String tableName = args[0];\r\n           String key = args[1];\r\n           System.out.println(&quot;Creating an Amazon DynamoDB table &quot;+tableName +&quot; with a simple primary key: &quot; +key );\r\n    \r\n           ProfileCredentialsProvider credentialsProvider = ProfileCredentialsProvider.create();\r\n           Region region = Region.US_EAST_1;\r\n           DynamoDbClient ddb = DynamoDbClient.builder()\r\n               .credentialsProvider(credentialsProvider)\r\n               .region(region)\r\n               .build();\r\n    \r\n           String result = createTable(ddb, tableName, key);\r\n           System.out.println(&quot;New table is &quot;+result);\r\n           ddb.close();\r\n        }\r\n    \r\n        // snippet-start:[dynamodb.java2.create_table.main]\r\n        public static String createTable(DynamoDbClient ddb, String tableName, String key) {\r\n            DynamoDbWaiter dbWaiter = ddb.waiter();\r\n            CreateTableRequest request = CreateTableRequest.builder()\r\n                .attributeDefinitions(AttributeDefinition.builder()\r\n                    .attributeName(key)\r\n                    .attributeType(ScalarAttributeType.S)\r\n                    .build())\r\n                .keySchema(KeySchemaElement.builder()\r\n                    .attributeName(key)\r\n                    .keyType(KeyType.HASH)\r\n                    .build())\r\n                .provisionedThroughput(ProvisionedThroughput.builder()\r\n                    .readCapacityUnits(new Long(10))\r\n                    .writeCapacityUnits(new Long(10))\r\n                    .build())\r\n                .tableName(tableName)\r\n                .build();\r\n    \r\n            String newTable =&quot;&quot;;\r\n            try {\r\n                CreateTableResponse response = ddb.createTable(request);\r\n                DescribeTableRequest tableRequest = DescribeTableRequest.builder()\r\n                    .tableName(tableName)\r\n                    .build();\r\n    \r\n                // Wait until the Amazon DynamoDB table is created.\r\n                WaiterResponse&lt;DescribeTableResponse&gt; waiterResponse = dbWaiter.waitUntilTableExists(tableRequest);\r\n                waiterResponse.matched().response().ifPresent(System.out::println);\r\n                newTable = response.tableDescription().tableName();\r\n                return newTable;\r\n    \r\n            } catch (DynamoDbException e) {\r\n                System.err.println(e.getMessage());\r\n                System.exit(1);\r\n            }\r\n           return &quot;&quot;;\r\n        }\r\n        // snippet-end:[dynamodb.java2.create_table.main]\r\n    }\r\n\r\nTo read more about waiter and the AWS SDK for Java V2, see: \r\n\r\n[Using waiters in the AWS SDK for Java 2.x][2]\r\n\r\n\r\n  [1]: https://github.com/awsdocs/aws-doc-sdk-examples/tree/main#aws-sdk-code-examples\r\n  [2]: https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/waiters.html","title":"incompatible types: com.amazonaws.waiters.WaiterParameters is not a functional interface","body":"<p>Use AWS SDK for Java V2, not the AWS SDK for Java V1 - which is no longer recommended to use as <a href=\"https://github.com/awsdocs/aws-doc-sdk-examples/tree/main#aws-sdk-code-examples\" rel=\"nofollow noreferrer\">specified on this AWS page</a>.</p>\n<p>You can use Waiters easily using the Amazon Dynamo V2 API. See this code example.</p>\n<pre><code>//snippet-sourcedescription:[CreateTable.java demonstrates how to create an Amazon DynamoDB table by using a waiter.]\n//snippet-keyword:[SDK for Java v2]\n//snippet-service:[Amazon DynamoDB]\n\n/*\n   Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n   SPDX-License-Identifier: Apache-2.0\n*/\n\npackage com.example.dynamodb;\n\n// snippet-start:[dynamodb.java2.create_table.import]\nimport software.amazon.awssdk.auth.credentials.ProfileCredentialsProvider;\nimport software.amazon.awssdk.core.waiters.WaiterResponse;\nimport software.amazon.awssdk.regions.Region;\nimport software.amazon.awssdk.services.dynamodb.DynamoDbClient;\nimport software.amazon.awssdk.services.dynamodb.model.AttributeDefinition;\nimport software.amazon.awssdk.services.dynamodb.model.CreateTableRequest;\nimport software.amazon.awssdk.services.dynamodb.model.CreateTableResponse;\nimport software.amazon.awssdk.services.dynamodb.model.DescribeTableRequest;\nimport software.amazon.awssdk.services.dynamodb.model.DescribeTableResponse;\nimport software.amazon.awssdk.services.dynamodb.model.DynamoDbException;\nimport software.amazon.awssdk.services.dynamodb.model.KeySchemaElement;\nimport software.amazon.awssdk.services.dynamodb.model.KeyType;\nimport software.amazon.awssdk.services.dynamodb.model.ProvisionedThroughput;\nimport software.amazon.awssdk.services.dynamodb.model.ScalarAttributeType;\nimport software.amazon.awssdk.services.dynamodb.waiters.DynamoDbWaiter;\n// snippet-end:[dynamodb.java2.create_table.import]\n\n/**\n * Before running this Java V2 code example, set up your development environment, including your credentials.\n *\n * For more information, see the following documentation topic:\n *\n * https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/get-started.html\n */\npublic class CreateTable {\n\n    public static void main(String[] args) {\n\n        final String usage = &quot;\\n&quot; +\n            &quot;Usage:\\n&quot; +\n            &quot;    &lt;tableName&gt; &lt;key&gt;\\n\\n&quot; +\n            &quot;Where:\\n&quot; +\n            &quot;    tableName - The Amazon DynamoDB table to create (for example, Music3).\\n\\n&quot; +\n            &quot;    key - The key for the Amazon DynamoDB table (for example, Artist).\\n&quot; ;\n\n       if (args.length != 2) {\n           System.out.println(usage);\n           System.exit(1);\n       }\n\n       String tableName = args[0];\n       String key = args[1];\n       System.out.println(&quot;Creating an Amazon DynamoDB table &quot;+tableName +&quot; with a simple primary key: &quot; +key );\n\n       ProfileCredentialsProvider credentialsProvider = ProfileCredentialsProvider.create();\n       Region region = Region.US_EAST_1;\n       DynamoDbClient ddb = DynamoDbClient.builder()\n           .credentialsProvider(credentialsProvider)\n           .region(region)\n           .build();\n\n       String result = createTable(ddb, tableName, key);\n       System.out.println(&quot;New table is &quot;+result);\n       ddb.close();\n    }\n\n    // snippet-start:[dynamodb.java2.create_table.main]\n    public static String createTable(DynamoDbClient ddb, String tableName, String key) {\n        DynamoDbWaiter dbWaiter = ddb.waiter();\n        CreateTableRequest request = CreateTableRequest.builder()\n            .attributeDefinitions(AttributeDefinition.builder()\n                .attributeName(key)\n                .attributeType(ScalarAttributeType.S)\n                .build())\n            .keySchema(KeySchemaElement.builder()\n                .attributeName(key)\n                .keyType(KeyType.HASH)\n                .build())\n            .provisionedThroughput(ProvisionedThroughput.builder()\n                .readCapacityUnits(new Long(10))\n                .writeCapacityUnits(new Long(10))\n                .build())\n            .tableName(tableName)\n            .build();\n\n        String newTable =&quot;&quot;;\n        try {\n            CreateTableResponse response = ddb.createTable(request);\n            DescribeTableRequest tableRequest = DescribeTableRequest.builder()\n                .tableName(tableName)\n                .build();\n\n            // Wait until the Amazon DynamoDB table is created.\n            WaiterResponse&lt;DescribeTableResponse&gt; waiterResponse = dbWaiter.waitUntilTableExists(tableRequest);\n            waiterResponse.matched().response().ifPresent(System.out::println);\n            newTable = response.tableDescription().tableName();\n            return newTable;\n\n        } catch (DynamoDbException e) {\n            System.err.println(e.getMessage());\n            System.exit(1);\n        }\n       return &quot;&quot;;\n    }\n    // snippet-end:[dynamodb.java2.create_table.main]\n}\n</code></pre>\n<p>To read more about waiter and the AWS SDK for Java V2, see:</p>\n<p><a href=\"https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/waiters.html\" rel=\"nofollow noreferrer\">Using waiters in the AWS SDK for Java 2.x</a></p>\n"}],"owner":{"account_id":281380,"reputation":2648,"user_id":577647,"accept_rate":69,"display_name":"tolga"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76629518,"answer_count":2,"score":0,"last_activity_date":1688708051,"creation_date":1688650230,"question_id":76629377,"body_markdown":"When I create a dynamodb table, I try to use waiters to wait AWS service to complete its action. \r\n\r\n    CreateTableRequest createRequest = new CreateTableRequest()\r\n                .withTableName(tableName);\r\n        \r\n    CreateTableResult createResult = dynamoDbClient.createTable(createRequest);\r\n    dynamoDbClient.waiters().tableExists().run(() -&gt; new DescribeTableRequest(tableName));\r\n    return dynamoDB.getTable(tableName);\r\n\r\nBut I get:\r\n\r\n    incompatible types: com.amazonaws.waiters.WaiterParameters is not a functional interface\r\n\r\nI&#39;m new to Java, what&#39;s a functional interface? How can I get around this problem?","title":"incompatible types: com.amazonaws.waiters.WaiterParameters is not a functional interface","body":"<p>When I create a dynamodb table, I try to use waiters to wait AWS service to complete its action.</p>\n<pre><code>CreateTableRequest createRequest = new CreateTableRequest()\n            .withTableName(tableName);\n    \nCreateTableResult createResult = dynamoDbClient.createTable(createRequest);\ndynamoDbClient.waiters().tableExists().run(() -&gt; new DescribeTableRequest(tableName));\nreturn dynamoDB.getTable(tableName);\n</code></pre>\n<p>But I get:</p>\n<pre><code>incompatible types: com.amazonaws.waiters.WaiterParameters is not a functional interface\n</code></pre>\n<p>I'm new to Java, what's a functional interface? How can I get around this problem?</p>\n"},{"tags":["java","constructor"],"comments":[{"owner":{"account_id":52010,"reputation":27006,"user_id":155392,"accept_rate":81,"display_name":"I82Much"},"score":2,"creation_date":1299240364,"post_id":5193450,"comment_id":5836953,"body_markdown":"What do you mean, &#39;if subclass can&#39;t inherits constructor&#39;?","body":"What do you mean, &#39;if subclass can&#39;t inherits constructor&#39;?"},{"owner":{"account_id":9314964,"reputation":7453,"user_id":6915572,"accept_rate":100,"display_name":"Shubhamhackz"},"score":0,"creation_date":1504117767,"post_id":5193450,"comment_id":78893872,"body_markdown":"Every Class has its own Constructor including Subclasses","body":"Every Class has its own Constructor including Subclasses"}],"answers":[{"comments":[{"owner":{"account_id":66042,"reputation":5303,"user_id":193980,"accept_rate":48,"display_name":"Phlip"},"score":3,"creation_date":1380254684,"post_id":5193469,"comment_id":28141114,"body_markdown":"Not very DRY there, Java! --A C++ wienie","body":"Not very DRY there, Java! --A C++ wienie"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":2,"creation_date":1380260129,"post_id":5193469,"comment_id":28142530,"body_markdown":"@Phlip: You only repeat yourself if you have the exact same requirements - at which point it&#39;s only a matter of repeating the declarations, explicitly invoking the appropriate superclass constructor. I see no reason why Java should *assume* that the parameters required to construct an instance of a subclass are the same as the parameters required to construct an instance of the superclass. I&#39;m fine with this decision.","body":"@Phlip: You only repeat yourself if you have the exact same requirements - at which point it&#39;s only a matter of repeating the declarations, explicitly invoking the appropriate superclass constructor. I see no reason why Java should <i>assume</i> that the parameters required to construct an instance of a subclass are the same as the parameters required to construct an instance of the superclass. I&#39;m fine with this decision."}],"tags":[],"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"comment_count":2,"down_vote_count":0,"up_vote_count":43,"is_accepted":false,"score":43,"last_activity_date":1299240339,"creation_date":1299240339,"answer_id":5193469,"question_id":5193450,"body_markdown":"A constructor from a subclass can *call* constructors from the superclass, but they&#39;re not inherited as such.\r\n\r\nTo be clear, that means if you have something like:\r\n\r\n    public class Super\r\n    {\r\n        public Super(int x)\r\n        {\r\n        }\r\n    }\r\n\r\n    public class Sub extends Super\r\n    {\r\n        public Sub()\r\n        {\r\n            super(5);\r\n        }\r\n    }\r\n\r\nthen you can&#39;t write:\r\n\r\n    new Sub(10);\r\n\r\nbecause there&#39;s no `Sub(int)` constructor.\r\n\r\nIt may be helpful to think of constructors as uninherited static methods with an implicit parameter of the object being initialized.\r\n\r\nFrom the [Java Language Spec, section 8.8][1]:\r\n\r\n&gt; Constructor declarations are not members. They are never inherited and therefore are not subject to hiding or overriding.\r\n\r\n\r\n  [1]: http://java.sun.com/docs/books/jls/third_edition/html/classes.html#8.8","title":"Does a subclass inherit constructors from it super class?","body":"<p>A constructor from a subclass can <em>call</em> constructors from the superclass, but they're not inherited as such.</p>\n\n<p>To be clear, that means if you have something like:</p>\n\n<pre><code>public class Super\n{\n    public Super(int x)\n    {\n    }\n}\n\npublic class Sub extends Super\n{\n    public Sub()\n    {\n        super(5);\n    }\n}\n</code></pre>\n\n<p>then you can't write:</p>\n\n<pre><code>new Sub(10);\n</code></pre>\n\n<p>because there's no <code>Sub(int)</code> constructor.</p>\n\n<p>It may be helpful to think of constructors as uninherited static methods with an implicit parameter of the object being initialized.</p>\n\n<p>From the <a href=\"http://java.sun.com/docs/books/jls/third_edition/html/classes.html#8.8\" rel=\"noreferrer\">Java Language Spec, section 8.8</a>:</p>\n\n<blockquote>\n  <p>Constructor declarations are not members. They are never inherited and therefore are not subject to hiding or overriding.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":69592,"reputation":53841,"user_id":202375,"accept_rate":62,"display_name":"Saurabh Gokhale"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1299240370,"creation_date":1299240370,"answer_id":5193476,"question_id":5193450,"body_markdown":"No a subclass cannot inherit the constructors of its superclass.   \r\n\r\nConstructors are special function members of a class in that they are not inherited by the subclass. Constructors are used to give a valid state for an object at creation.    \r\n\r\n\r\nOne of the main reasons is because you probably don&#39;t want to overide the superclasses constructor, which would be possible if they were inherited. By giving the developer the ability to override a superclasses constructor you would erode the encapsulation abilities of the language. \r\n\r\nSee also : [Constructors are never inherited][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/2319817/how-to-inherit-constructor-from-super-class-to-sub-class","title":"Does a subclass inherit constructors from it super class?","body":"<p>No a subclass cannot inherit the constructors of its superclass.   </p>\n\n<p>Constructors are special function members of a class in that they are not inherited by the subclass. Constructors are used to give a valid state for an object at creation.    </p>\n\n<p>One of the main reasons is because you probably don't want to overide the superclasses constructor, which would be possible if they were inherited. By giving the developer the ability to override a superclasses constructor you would erode the encapsulation abilities of the language. </p>\n\n<p>See also : <a href=\"https://stackoverflow.com/questions/2319817/how-to-inherit-constructor-from-super-class-to-sub-class\">Constructors are never inherited</a></p>\n"},{"tags":[],"owner":{"account_id":99449,"reputation":9368,"user_id":268619,"accept_rate":86,"display_name":"Matthew Gilliard"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1299240384,"creation_date":1299240384,"answer_id":5193481,"question_id":5193450,"body_markdown":"[`super`][1] is a Java keyword for referring to the superclass, and `super()` is the way to call your superclass&#39;s constructor.  The constructor is not inherited but you are still able to call it.\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/tutorial/java/IandI/super.html","title":"Does a subclass inherit constructors from it super class?","body":"<p><a href=\"http://download.oracle.com/javase/tutorial/java/IandI/super.html\" rel=\"nofollow\"><code>super</code></a> is a Java keyword for referring to the superclass, and <code>super()</code> is the way to call your superclass's constructor.  The constructor is not inherited but you are still able to call it.</p>\n"},{"tags":[],"owner":{"account_id":3037363,"reputation":11,"user_id":2575120,"display_name":"Aasif Ali"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1374348526,"creation_date":1374348526,"answer_id":17765905,"question_id":5193450,"body_markdown":"First of all, constructors are not members of classes, and only members are inherited.\r\n\r\nSecond, we can imagine cases for which we don&#39;t want subclasses to have the same constructors than the parent class.\r\n\r\nImagine an abstract class Vehicle with a constructor Vehicle(int wheels), and a subclass Bicycle.\r\n\r\nBy definition, a Bicycle has 2 wheels so we can imagine that Bicycle constructor will call super(2) and isn&#39;t it better in this case that Bicycle does not expose a constructor Bicycle(int wheels) ?","title":"Does a subclass inherit constructors from it super class?","body":"<p>First of all, constructors are not members of classes, and only members are inherited.</p>\n\n<p>Second, we can imagine cases for which we don't want subclasses to have the same constructors than the parent class.</p>\n\n<p>Imagine an abstract class Vehicle with a constructor Vehicle(int wheels), and a subclass Bicycle.</p>\n\n<p>By definition, a Bicycle has 2 wheels so we can imagine that Bicycle constructor will call super(2) and isn't it better in this case that Bicycle does not expose a constructor Bicycle(int wheels) ?</p>\n"},{"tags":[],"owner":{"account_id":9314964,"reputation":7453,"user_id":6915572,"accept_rate":100,"display_name":"Shubhamhackz"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1504117864,"creation_date":1504117864,"answer_id":45967485,"question_id":5193450,"body_markdown":"No..Not at all never...A Subclass Does not inherits its Superclass constructor..instead it call it can call its Superclass Constructor Using keyword &quot;super()&quot;...","title":"Does a subclass inherit constructors from it super class?","body":"<p>No..Not at all never...A Subclass Does not inherits its Superclass constructor..instead it call it can call its Superclass Constructor Using keyword \"super()\"...</p>\n"},{"tags":[],"owner":{"account_id":2053476,"reputation":1,"user_id":1831905,"display_name":"Moeun Dara"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1614281901,"creation_date":1614251479,"answer_id":66367364,"question_id":5193450,"body_markdown":"    public class Super\r\n    {\r\n        public Super(int x)\r\n        {\r\n        }\r\n    }\r\n    \r\n    public class Sub extends Super\r\n    {\r\n        public Sub(int x)\r\n        {\r\n            super(x); // call constructor from Super class \r\n        }\r\n    }\r\n    Sub obj = new Sub(5);","title":"Does a subclass inherit constructors from it super class?","body":"<pre><code>public class Super\n{\n    public Super(int x)\n    {\n    }\n}\n\npublic class Sub extends Super\n{\n    public Sub(int x)\n    {\n        super(x); // call constructor from Super class \n    }\n}\nSub obj = new Sub(5);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28951900,"reputation":1,"user_id":22176277,"display_name":"MLone"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1688707593,"creation_date":1688518942,"answer_id":76616524,"question_id":5193450,"body_markdown":"Subclasses inherit all the members from their superclass, but a constructor is not  consider to be a member, that&#39;s why constructors are not inherited by subclasses, but we can call superclass from subclass using `super` keyword.","title":"Does a subclass inherit constructors from it super class?","body":"<p>Subclasses inherit all the members from their superclass, but a constructor is not  consider to be a member, that's why constructors are not inherited by subclasses, but we can call superclass from subclass using <code>super</code> keyword.</p>\n"}],"owner":{"account_id":324199,"reputation":251,"user_id":644648,"display_name":"AmitSource"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44440,"favorite_count":0,"down_vote_count":0,"up_vote_count":25,"answer_count":7,"score":25,"last_activity_date":1688707593,"creation_date":1299240141,"question_id":5193450,"body_markdown":"In a subclass we can initialize data members using the subclass&#39;s constructor which internally calls the superclass&#39;s constructor `super()`.  If a subclass can&#39;t inherit constructors from its superclass then how can the `super()` call initialize the superclass?\r\n\r\n ","title":"Does a subclass inherit constructors from it super class?","body":"<p>In a subclass we can initialize data members using the subclass's constructor which internally calls the superclass's constructor <code>super()</code>.  If a subclass can't inherit constructors from its superclass then how can the <code>super()</code> call initialize the superclass?</p>\n"},{"tags":["java","wifi","capacitor","capacitor-plugin"],"owner":{"account_id":24099149,"reputation":41,"user_id":18071204,"display_name":"edds"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":136,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1688707549,"creation_date":1688638809,"question_id":76627810,"body_markdown":"```\r\nimport android.app.Activity;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.net.ConnectivityManager;\r\nimport android.net.Network;\r\nimport android.net.NetworkCapabilities;\r\nimport android.net.NetworkRequest;\r\nimport android.net.wifi.WifiConfiguration;\r\nimport android.net.wifi.WifiManager;\r\nimport android.net.wifi.WifiNetworkSpecifier;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\nimport android.provider.Settings;\r\nimport android.util.Log;\r\nimport com.getcapacitor.Bridge;\r\nimport com.getcapacitor.PluginCall;\r\nimport android.net.wifi.WifiNetworkSuggestion;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.activity.result.ActivityResultLauncher;\r\nimport androidx.activity.result.contract.ActivityResultContracts;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class WifiService {\r\n    private static final int REQUEST_WIFI_SETTINGS = 1;\r\n    private static String TAG = &quot;WifiService&quot;;\r\n    private static final int API_VERSION = Build.VERSION.SDK_INT;\r\n    private PluginCall savedCall;\r\n    private ConnectivityManager.NetworkCallback networkCallback;\r\n    WifiManager wifiManager;\r\n    ConnectivityManager connectivityManager;\r\n    Context context;\r\n    Bridge bridge;\r\n    private ActivityResultLauncher&lt;Intent&gt; wifiAddNetworkLauncher;\r\n\r\n    public void load(Bridge bridge) {\r\n      this.bridge = bridge;\r\n      this.wifiManager = (WifiManager) this.bridge.getActivity().getApplicationContext().getSystemService(Context.WIFI_SERVICE);\r\n      this.connectivityManager = (ConnectivityManager) this.bridge.getActivity().getApplicationContext().getSystemService(Context.CONNECTIVITY_SERVICE);\r\n      this.context = this.bridge.getContext();\r\n\r\n      wifiAddNetworkLauncher = bridge.registerForActivityResult(\r\n        new ActivityResultContracts.StartActivityForResult(),\r\n        result -&gt; {\r\n            if (result.getResultCode() == Activity.RESULT_OK) {\r\n                Toast.makeText(context, &quot;Network suggestion added successfully&quot;, Toast.LENGTH_SHORT).show();\r\n                Log.d(&quot;WifiService&quot;, &quot;Network suggestion added successfully&quot;);\r\n            } else {\r\n                Toast.makeText(context, &quot;Failed to add network suggestion&quot;, Toast.LENGTH_SHORT).show();\r\n                Log.d(&quot;WifiService&quot;, &quot;Failed to add network suggestion&quot;);\r\n            }\r\n        }\r\n      );\r\n    }\r\n    public void connect(PluginCall call) {\r\n        // ...\r\n        this.savedCall = call;\r\n        String ssid = call.getString(&quot;ssid&quot;);\r\n        String password = call.getString(&quot;password&quot;);\r\n        boolean isHiddenSsid = false;\r\n\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {\r\n            List&lt;WifiNetworkSuggestion&gt; existingSuggestions = wifiManager.getNetworkSuggestions();\r\n            Log.d(&quot;existingSuggestions&quot;, &quot;existingSuggestions &quot; + existingSuggestions);\r\n\r\n            boolean suggestionExists = false;\r\n            for (WifiNetworkSuggestion suggestion : existingSuggestions) {\r\n                if (suggestion.getSsid().equals(ssid)) {\r\n                    suggestionExists = true;\r\n                    break;\r\n                }\r\n            }\r\n            Toast.makeText(context, &quot;suggestionExists &quot; + suggestionExists, Toast.LENGTH_SHORT).show();\r\n\r\n            if (suggestionExists) {\r\n                WifiNetworkSpecifier specifier = new WifiNetworkSpecifier.Builder()\r\n                        .setSsid(ssid)\r\n                        .build();\r\n\r\n                NetworkRequest networkRequest = new NetworkRequest.Builder()\r\n                        .addTransportType(NetworkCapabilities.TRANSPORT_WIFI)\r\n                        .setNetworkSpecifier(specifier)\r\n                        .build();\r\n\r\n                networkCallback = new ConnectivityManager.NetworkCallback() {\r\n                    @Override\r\n                    public void onAvailable(Network network) {\r\n                        Toast.makeText(context, &quot;Connected to Wi-Fi network: &quot; + ssid, Toast.LENGTH_SHORT).show();\r\n                        Log.d(&quot;WifiService&quot;, &quot;Connected to Wi-Fi network: &quot; + ssid);\r\n\r\n                    }\r\n\r\n                    @Override\r\n                    public void onUnavailable() {\r\n                        Toast.makeText(context, &quot;Failed to connect to Wi-Fi network: &quot; + ssid, Toast.LENGTH_SHORT).show();\r\n                        Log.d(&quot;WifiService&quot;, &quot;Failed to connect to Wi-Fi network: &quot; + ssid);\r\n\r\n                    }\r\n                };\r\n\r\n                connectivityManager.requestNetwork(networkRequest, networkCallback);\r\n                Toast.makeText(context, &quot;Connecting to Wi-Fi network: &quot; + ssid, Toast.LENGTH_SHORT).show();\r\n                Log.d(&quot;WifiService&quot;, &quot;Connecting to Wi-Fi network: &quot; + ssid);\r\n            } else {\r\n                ArrayList&lt;WifiNetworkSuggestion&gt; suggestions = new ArrayList&lt;&gt;();\r\n\r\n                // WPA2 configuration\r\n                suggestions.add(\r\n                        new WifiNetworkSuggestion.Builder()\r\n                                .setSsid(ssid)\r\n                                .setWpa2Passphrase(password)\r\n                                .build()\r\n                );\r\n\r\n                Bundle bundle = new Bundle();\r\n                bundle.putParcelableArrayList(&quot;android.provider.extra.WIFI_NETWORK_LIST&quot;, suggestions);\r\n                Intent intent = new Intent(Settings.ACTION_WIFI_ADD_NETWORKS);\r\n                intent.putExtras(bundle);\r\n\r\n                ((Activity) context).startActivityForResult(intent, REQUEST_WIFI_SETTINGS);\r\n                Toast.makeText(context, &quot;Adding network suggestion...&quot;, Toast.LENGTH_SHORT).show();\r\n                Log.d(&quot;WifiService&quot;, &quot;Adding network suggestion...&quot;);\r\n\r\n            }\r\n        } else {\r\n            WifiConfiguration wifiConfig = new WifiConfiguration();\r\n            wifiConfig.SSID = &quot;\\&quot;&quot; + ssid + &quot;\\&quot;&quot;;\r\n            wifiConfig.preSharedKey = &quot;\\&quot;&quot; + password + &quot;\\&quot;&quot;;\r\n            int networkId = wifiManager.addNetwork(wifiConfig);\r\n            if (networkId != -1) {\r\n                wifiManager.enableNetwork(networkId, true);\r\n                wifiManager.reconnect();\r\n\r\n                Toast.makeText(context, &quot;Connecting to Wi-Fi network...&quot;, Toast.LENGTH_SHORT).show();\r\n                Log.d(&quot;WifiService&quot;, &quot;Connecting to Wi-Fi network...&quot;);\r\n            } else {\r\n                Toast.makeText(context, &quot;Failed to add network configuration&quot;, Toast.LENGTH_SHORT).show();\r\n                Log.d(&quot;WifiService&quot;, &quot;Failed to add network configuration&quot;);\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    public void disconnect(PluginCall call) {\r\n        if (wifiManager.isWifiEnabled()) {\r\n            wifiManager.disconnect();\r\n\r\n            Toast.makeText(context, &quot;Disconnecting from Wi-Fi network...&quot;, Toast.LENGTH_SHORT).show();\r\n            Log.d(&quot;WifiService&quot;, &quot;Disconnecting from Wi-Fi network...&quot;);\r\n        } else {\r\n            Toast.makeText(context, &quot;Wi-Fi is not enabled&quot;, Toast.LENGTH_SHORT).show();\r\n            Log.d(&quot;WifiService&quot;, &quot;Wi-Fi is not enabled&quot;);\r\n        }\r\n    }\r\n}\r\n```\r\nMaking custom native capacitor plugin for connecting to wifi on api level 30+. Can someone help me with some questions? In the connect function i want to find out if the wifi network was already added to suggested list previously and just to connect to it. However, wifiManager.getNetworkSuggestions() returns empty list, but i can see that the network was saved... And also my disconect function doesn&#39;t work at all(( Can&#39;t understand what i&#39;m doing wrong... Maybe there is another way to reconect to wifi spot\r\n\r\nPermissions:\r\n```xml\r\n&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_STATE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_BACKGROUND_LOCATION&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.CHANGE_WIFI_STATE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.CHANGE_NETWORK_STATE&quot; /&gt;\r\n```","title":"Wifi connect api level 30+","body":"<pre><code>import android.app.Activity;\nimport android.content.Context;\nimport android.content.Intent;\nimport android.net.ConnectivityManager;\nimport android.net.Network;\nimport android.net.NetworkCapabilities;\nimport android.net.NetworkRequest;\nimport android.net.wifi.WifiConfiguration;\nimport android.net.wifi.WifiManager;\nimport android.net.wifi.WifiNetworkSpecifier;\nimport android.os.Build;\nimport android.os.Bundle;\nimport android.provider.Settings;\nimport android.util.Log;\nimport com.getcapacitor.Bridge;\nimport com.getcapacitor.PluginCall;\nimport android.net.wifi.WifiNetworkSuggestion;\nimport android.widget.Toast;\n\nimport androidx.activity.result.ActivityResultLauncher;\nimport androidx.activity.result.contract.ActivityResultContracts;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class WifiService {\n    private static final int REQUEST_WIFI_SETTINGS = 1;\n    private static String TAG = &quot;WifiService&quot;;\n    private static final int API_VERSION = Build.VERSION.SDK_INT;\n    private PluginCall savedCall;\n    private ConnectivityManager.NetworkCallback networkCallback;\n    WifiManager wifiManager;\n    ConnectivityManager connectivityManager;\n    Context context;\n    Bridge bridge;\n    private ActivityResultLauncher&lt;Intent&gt; wifiAddNetworkLauncher;\n\n    public void load(Bridge bridge) {\n      this.bridge = bridge;\n      this.wifiManager = (WifiManager) this.bridge.getActivity().getApplicationContext().getSystemService(Context.WIFI_SERVICE);\n      this.connectivityManager = (ConnectivityManager) this.bridge.getActivity().getApplicationContext().getSystemService(Context.CONNECTIVITY_SERVICE);\n      this.context = this.bridge.getContext();\n\n      wifiAddNetworkLauncher = bridge.registerForActivityResult(\n        new ActivityResultContracts.StartActivityForResult(),\n        result -&gt; {\n            if (result.getResultCode() == Activity.RESULT_OK) {\n                Toast.makeText(context, &quot;Network suggestion added successfully&quot;, Toast.LENGTH_SHORT).show();\n                Log.d(&quot;WifiService&quot;, &quot;Network suggestion added successfully&quot;);\n            } else {\n                Toast.makeText(context, &quot;Failed to add network suggestion&quot;, Toast.LENGTH_SHORT).show();\n                Log.d(&quot;WifiService&quot;, &quot;Failed to add network suggestion&quot;);\n            }\n        }\n      );\n    }\n    public void connect(PluginCall call) {\n        // ...\n        this.savedCall = call;\n        String ssid = call.getString(&quot;ssid&quot;);\n        String password = call.getString(&quot;password&quot;);\n        boolean isHiddenSsid = false;\n\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {\n            List&lt;WifiNetworkSuggestion&gt; existingSuggestions = wifiManager.getNetworkSuggestions();\n            Log.d(&quot;existingSuggestions&quot;, &quot;existingSuggestions &quot; + existingSuggestions);\n\n            boolean suggestionExists = false;\n            for (WifiNetworkSuggestion suggestion : existingSuggestions) {\n                if (suggestion.getSsid().equals(ssid)) {\n                    suggestionExists = true;\n                    break;\n                }\n            }\n            Toast.makeText(context, &quot;suggestionExists &quot; + suggestionExists, Toast.LENGTH_SHORT).show();\n\n            if (suggestionExists) {\n                WifiNetworkSpecifier specifier = new WifiNetworkSpecifier.Builder()\n                        .setSsid(ssid)\n                        .build();\n\n                NetworkRequest networkRequest = new NetworkRequest.Builder()\n                        .addTransportType(NetworkCapabilities.TRANSPORT_WIFI)\n                        .setNetworkSpecifier(specifier)\n                        .build();\n\n                networkCallback = new ConnectivityManager.NetworkCallback() {\n                    @Override\n                    public void onAvailable(Network network) {\n                        Toast.makeText(context, &quot;Connected to Wi-Fi network: &quot; + ssid, Toast.LENGTH_SHORT).show();\n                        Log.d(&quot;WifiService&quot;, &quot;Connected to Wi-Fi network: &quot; + ssid);\n\n                    }\n\n                    @Override\n                    public void onUnavailable() {\n                        Toast.makeText(context, &quot;Failed to connect to Wi-Fi network: &quot; + ssid, Toast.LENGTH_SHORT).show();\n                        Log.d(&quot;WifiService&quot;, &quot;Failed to connect to Wi-Fi network: &quot; + ssid);\n\n                    }\n                };\n\n                connectivityManager.requestNetwork(networkRequest, networkCallback);\n                Toast.makeText(context, &quot;Connecting to Wi-Fi network: &quot; + ssid, Toast.LENGTH_SHORT).show();\n                Log.d(&quot;WifiService&quot;, &quot;Connecting to Wi-Fi network: &quot; + ssid);\n            } else {\n                ArrayList&lt;WifiNetworkSuggestion&gt; suggestions = new ArrayList&lt;&gt;();\n\n                // WPA2 configuration\n                suggestions.add(\n                        new WifiNetworkSuggestion.Builder()\n                                .setSsid(ssid)\n                                .setWpa2Passphrase(password)\n                                .build()\n                );\n\n                Bundle bundle = new Bundle();\n                bundle.putParcelableArrayList(&quot;android.provider.extra.WIFI_NETWORK_LIST&quot;, suggestions);\n                Intent intent = new Intent(Settings.ACTION_WIFI_ADD_NETWORKS);\n                intent.putExtras(bundle);\n\n                ((Activity) context).startActivityForResult(intent, REQUEST_WIFI_SETTINGS);\n                Toast.makeText(context, &quot;Adding network suggestion...&quot;, Toast.LENGTH_SHORT).show();\n                Log.d(&quot;WifiService&quot;, &quot;Adding network suggestion...&quot;);\n\n            }\n        } else {\n            WifiConfiguration wifiConfig = new WifiConfiguration();\n            wifiConfig.SSID = &quot;\\&quot;&quot; + ssid + &quot;\\&quot;&quot;;\n            wifiConfig.preSharedKey = &quot;\\&quot;&quot; + password + &quot;\\&quot;&quot;;\n            int networkId = wifiManager.addNetwork(wifiConfig);\n            if (networkId != -1) {\n                wifiManager.enableNetwork(networkId, true);\n                wifiManager.reconnect();\n\n                Toast.makeText(context, &quot;Connecting to Wi-Fi network...&quot;, Toast.LENGTH_SHORT).show();\n                Log.d(&quot;WifiService&quot;, &quot;Connecting to Wi-Fi network...&quot;);\n            } else {\n                Toast.makeText(context, &quot;Failed to add network configuration&quot;, Toast.LENGTH_SHORT).show();\n                Log.d(&quot;WifiService&quot;, &quot;Failed to add network configuration&quot;);\n            }\n\n        }\n    }\n\n    public void disconnect(PluginCall call) {\n        if (wifiManager.isWifiEnabled()) {\n            wifiManager.disconnect();\n\n            Toast.makeText(context, &quot;Disconnecting from Wi-Fi network...&quot;, Toast.LENGTH_SHORT).show();\n            Log.d(&quot;WifiService&quot;, &quot;Disconnecting from Wi-Fi network...&quot;);\n        } else {\n            Toast.makeText(context, &quot;Wi-Fi is not enabled&quot;, Toast.LENGTH_SHORT).show();\n            Log.d(&quot;WifiService&quot;, &quot;Wi-Fi is not enabled&quot;);\n        }\n    }\n}\n</code></pre>\n<p>Making custom native capacitor plugin for connecting to wifi on api level 30+. Can someone help me with some questions? In the connect function i want to find out if the wifi network was already added to suggested list previously and just to connect to it. However, wifiManager.getNetworkSuggestions() returns empty list, but i can see that the network was saved... And also my disconect function doesn't work at all(( Can't understand what i'm doing wrong... Maybe there is another way to reconect to wifi spot</p>\n<p>Permissions:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_STATE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_BACKGROUND_LOCATION&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.CHANGE_WIFI_STATE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.CHANGE_NETWORK_STATE&quot; /&gt;\n</code></pre>\n"},{"tags":["java","aws-lambda","velocity","vtl","apache-velocity"],"answers":[{"comments":[{"owner":{"account_id":28831738,"reputation":11,"user_id":22081956,"display_name":"sraipuria"},"score":0,"creation_date":1688963602,"post_id":76634087,"comment_id":135140079,"body_markdown":"Thank you for your response! I do have @Slf4j annotation with the existing application which is used to monitor by CloudWatch. Will a new file still be created? Or will it continue to show logs only in Cloudwatch.","body":"Thank you for your response! I do have @Slf4j annotation with the existing application which is used to monitor by CloudWatch. Will a new file still be created? Or will it continue to show logs only in Cloudwatch."}],"tags":[],"owner":{"account_id":365392,"reputation":4105,"user_id":710286,"display_name":"Claude Brisson"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688706568,"creation_date":1688706568,"answer_id":76634087,"question_id":76629758,"body_markdown":"Switching to SLF4J implies that it&#39;s not anymore Velocity which is responsible for creating the log file. Velocity only depends on the SLF4J logging API, which expects to find a logger implementation in the classpath, see [Velocity logging doc](https://velocity.apache.org/engine/2.3/developer-guide.html#logging).\r\n\r\nThe easiest way to have your log file created is to add slf4j-simple to the classpath, which you can configure using [system properties](https://slf4j.org/apidocs/org/slf4j/simple/SimpleLogger.html).\r\n","title":"Is velocity.log created for Apache Velocity v2.0 by default?","body":"<p>Switching to SLF4J implies that it's not anymore Velocity which is responsible for creating the log file. Velocity only depends on the SLF4J logging API, which expects to find a logger implementation in the classpath, see <a href=\"https://velocity.apache.org/engine/2.3/developer-guide.html#logging\" rel=\"nofollow noreferrer\">Velocity logging doc</a>.</p>\n<p>The easiest way to have your log file created is to add slf4j-simple to the classpath, which you can configure using <a href=\"https://slf4j.org/apidocs/org/slf4j/simple/SimpleLogger.html\" rel=\"nofollow noreferrer\">system properties</a>.</p>\n"}],"owner":{"account_id":28831738,"reputation":11,"user_id":22081956,"display_name":"sraipuria"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1688706568,"creation_date":1688652856,"question_id":76629758,"body_markdown":"Since with Apache Velocity v2.0 we have moved to SLF4J, how to handle creation of velocity.log for serverless calls? For example if an AWS lambda function is calling the java code using VTL, during runtime velocity.log will not be able to create. Will an exception be thrown? Do we need to suppress velocity.log from being created? Or velocity.log creation will not happen? \r\nEarlier we were using\r\nve.setProperty(Velocity.RUNTIME_LOG_LOGSYSTEM_CLASS,NullLogChute.class.getName());\r\nto suppress the log file from getting created.\r\n\r\nCurrent code - \r\nve.setProperty(Velocity.RESOURCE_LOADER,&quot;classpath&quot;);\r\nve.setProperty(&quot;classpath.resource.loader.class&quot;, ClasspathResourceLoader.class.getName());\r\nve.init();","title":"Is velocity.log created for Apache Velocity v2.0 by default?","body":"<p>Since with Apache Velocity v2.0 we have moved to SLF4J, how to handle creation of velocity.log for serverless calls? For example if an AWS lambda function is calling the java code using VTL, during runtime velocity.log will not be able to create. Will an exception be thrown? Do we need to suppress velocity.log from being created? Or velocity.log creation will not happen?\nEarlier we were using\nve.setProperty(Velocity.RUNTIME_LOG_LOGSYSTEM_CLASS,NullLogChute.class.getName());\nto suppress the log file from getting created.</p>\n<p>Current code -\nve.setProperty(Velocity.RESOURCE_LOADER,&quot;classpath&quot;);\nve.setProperty(&quot;classpath.resource.loader.class&quot;, ClasspathResourceLoader.class.getName());\nve.init();</p>\n"},{"tags":["java","rest","servlets"],"answers":[{"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1293528987,"creation_date":1293528987,"answer_id":4545043,"question_id":4545021,"body_markdown":"If you have a single Rest servlet that handles the restful services (and this is usually the case), you can extend it and override the `service` method. There you can invoke `doPost(..)`, `doPut(..)`, etc. depending on the parameter you want. The default implementation of `HttpServlet` uses `request.getMethod()`.\r\n\r\nAnother thing you can do (less preferable) is to have your Filter fire a new request to the endpoint, using `URL.openConnection` (or apache commons http components), and stream the result of that internal request back to the client. There you can specify the request method.\r\n\r\nAnyway, I think you should try to overcome the limitation of your gateway, because it puts you in a really awkward situation.","title":"Is it possible to forward a request changing the request method?","body":"<p>If you have a single Rest servlet that handles the restful services (and this is usually the case), you can extend it and override the <code>service</code> method. There you can invoke <code>doPost(..)</code>, <code>doPut(..)</code>, etc. depending on the parameter you want. The default implementation of <code>HttpServlet</code> uses <code>request.getMethod()</code>.</p>\n\n<p>Another thing you can do (less preferable) is to have your Filter fire a new request to the endpoint, using <code>URL.openConnection</code> (or apache commons http components), and stream the result of that internal request back to the client. There you can specify the request method.</p>\n\n<p>Anyway, I think you should try to overcome the limitation of your gateway, because it puts you in a really awkward situation.</p>\n"},{"tags":[],"owner":{"account_id":484983,"reputation":686,"user_id":900999,"accept_rate":58,"display_name":"marstone"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688704770,"creation_date":1688704770,"answer_id":76633987,"question_id":4545021,"body_markdown":" you can use custom HttpServletRequestWrapper to override getMethod() \r\n\r\n```java\r\npublic class ChangeHttpMethodFilter extends OncePerRequestFilter {\r\n\r\n    public class ChangeHttpMethodHttpServletRequestWrapper extends HttpServletRequestWrapper {\r\n        public ChangeHttpMethodHttpServletRequestWrapper(HttpServletRequest request) {\r\n            super(request);\r\n        }\r\n\r\n        @Override\r\n        public String getMethod() {\r\n            HttpMethod method = HttpMethod.resolve(this.getRequest().getParameter(&quot;method&quot;));\r\n            return method == null ? super.getMethod() : method.name();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws ServletException, IOException {\r\n        HttpServletRequest changeHttpMethodRequest = new ChangeHttpMethodHttpServletRequestWrapper(request);\r\n        chain.doFilter(changeHttpMethodRequest, response);\r\n    }\r\n}\r\n```","title":"Is it possible to forward a request changing the request method?","body":"<p>you can use custom HttpServletRequestWrapper to override getMethod()</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ChangeHttpMethodFilter extends OncePerRequestFilter {\n\n    public class ChangeHttpMethodHttpServletRequestWrapper extends HttpServletRequestWrapper {\n        public ChangeHttpMethodHttpServletRequestWrapper(HttpServletRequest request) {\n            super(request);\n        }\n\n        @Override\n        public String getMethod() {\n            HttpMethod method = HttpMethod.resolve(this.getRequest().getParameter(&quot;method&quot;));\n            return method == null ? super.getMethod() : method.name();\n        }\n    }\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws ServletException, IOException {\n        HttpServletRequest changeHttpMethodRequest = new ChangeHttpMethodHttpServletRequestWrapper(request);\n        chain.doFilter(changeHttpMethodRequest, response);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":144767,"reputation":20549,"user_id":354067,"accept_rate":92,"display_name":"Vasil Remeniuk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2638,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":4545043,"answer_count":2,"score":3,"last_activity_date":1688704770,"creation_date":1293528793,"question_id":4545021,"body_markdown":"I&#39;m working thorough a gateway, which allows only GET requests, whilst REST endpoints behind it are able to accept the wide range of methods (POST, PUT, DELETE, OPTIONS). Therefore, I&#39;m trying to pass the request method as a parameter, having a filter, which forwards the request with a correct method. From what I can see in the specification, it&#39;s only allowed to forward the request w/o any modifications:\r\n\r\n    request.getRequestDispatcher(route).forward(request, response)\r\n\r\nAre there any workarounds? \r\n\r\nNOTE: Redirect is not an option for me.\r\n \r\n","title":"Is it possible to forward a request changing the request method?","body":"<p>I'm working thorough a gateway, which allows only GET requests, whilst REST endpoints behind it are able to accept the wide range of methods (POST, PUT, DELETE, OPTIONS). Therefore, I'm trying to pass the request method as a parameter, having a filter, which forwards the request with a correct method. From what I can see in the specification, it's only allowed to forward the request w/o any modifications:</p>\n\n<pre><code>request.getRequestDispatcher(route).forward(request, response)\n</code></pre>\n\n<p>Are there any workarounds? </p>\n\n<p>NOTE: Redirect is not an option for me.</p>\n"},{"tags":["java","spring-boot","spring-security","spring-cloud-gateway"],"answers":[{"tags":[],"owner":{"account_id":28877964,"reputation":581,"user_id":22118035,"display_name":"Dhruman Desai"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688704671,"creation_date":1688704671,"answer_id":76633983,"question_id":76632135,"body_markdown":"You can refer this code if you are using spring boot 3 :\r\n\r\n    @EnableWebSecurity\r\n    @Configuration\r\n    @RequiredArgsConstructor\r\n    public class SecurityConfig {\r\n    \r\n        private final UserDetailServiceImpl userDetailsService;\r\n    \r\n    \r\n        private final BCryptPasswordEncoder encoder;\r\n    \r\n        @Bean\r\n        public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n    \r\n           http.csrf(csrf -&gt; csrf.disable())\r\n                .authorizeRequests().\r\n                requestMatchers(&quot;/category/add&quot;)\r\n                .authenticated()\r\n                .requestMatchers(&quot;/authenticate&quot;,&quot;/register&quot;).permitAll()\r\n                .anyRequest()\r\n                .authenticated()\r\n                .and().exceptionHandling(ex -&gt; ex.authenticationEntryPoint(point))\r\n                .sessionManagement(session -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS));\r\n        http.addFilterBefore(filter, UsernamePasswordAuthenticationFilter.class);\r\n        return http.build();\r\n    \r\n        }\r\n    \r\n        @Bean\r\n        public AuthenticationManager authenticationManager() throws Exception {\r\n            return new CustomAuthenticationManager();\r\n        }\r\n    \r\n        @Bean\r\n        public DaoAuthenticationProvider authenticationProvider() {\r\n            DaoAuthenticationProvider authenticationProvider = new DaoAuthenticationProvider();\r\n            authenticationProvider.setUserDetailsService(userDetailsService);\r\n            authenticationProvider.setPasswordEncoder(encoder);\r\n            return authenticationProvider;\r\n        }\r\n    }\r\n\r\nCustomAuthentcationManager :\r\n\r\n    public class CustomAuthenticationManager implements AuthenticationManager {\r\n    \r\n        @Autowired\r\n        private DaoAuthenticationProvider authenticationProvider;\r\n    \r\n        @Override\r\n        public Authentication authenticate(Authentication authentication) throws AuthenticationException {\r\n            return authenticationProvider.authenticate(authentication);\r\n        }\r\n    }","title":"SecurityFilterChain being ignored in spring boot cloud gateway","body":"<p>You can refer this code if you are using spring boot 3 :</p>\n<pre><code>@EnableWebSecurity\n@Configuration\n@RequiredArgsConstructor\npublic class SecurityConfig {\n\n    private final UserDetailServiceImpl userDetailsService;\n\n\n    private final BCryptPasswordEncoder encoder;\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n\n       http.csrf(csrf -&gt; csrf.disable())\n            .authorizeRequests().\n            requestMatchers(&quot;/category/add&quot;)\n            .authenticated()\n            .requestMatchers(&quot;/authenticate&quot;,&quot;/register&quot;).permitAll()\n            .anyRequest()\n            .authenticated()\n            .and().exceptionHandling(ex -&gt; ex.authenticationEntryPoint(point))\n            .sessionManagement(session -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS));\n    http.addFilterBefore(filter, UsernamePasswordAuthenticationFilter.class);\n    return http.build();\n\n    }\n\n    @Bean\n    public AuthenticationManager authenticationManager() throws Exception {\n        return new CustomAuthenticationManager();\n    }\n\n    @Bean\n    public DaoAuthenticationProvider authenticationProvider() {\n        DaoAuthenticationProvider authenticationProvider = new DaoAuthenticationProvider();\n        authenticationProvider.setUserDetailsService(userDetailsService);\n        authenticationProvider.setPasswordEncoder(encoder);\n        return authenticationProvider;\n    }\n}\n</code></pre>\n<p>CustomAuthentcationManager :</p>\n<pre><code>public class CustomAuthenticationManager implements AuthenticationManager {\n\n    @Autowired\n    private DaoAuthenticationProvider authenticationProvider;\n\n    @Override\n    public Authentication authenticate(Authentication authentication) throws AuthenticationException {\n        return authenticationProvider.authenticate(authentication);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":14150340,"reputation":90,"user_id":14690198,"display_name":"Christian Del Rio"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":464,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1688704671,"creation_date":1688672975,"question_id":76632135,"body_markdown":"I am trying to set up security for my api gateway (spring boot cloud gateway). Before adding spring security the requests worked just fine, but after adding spring-boot-starter-security and seting up a SecurityFilterChain every GET request gets a 401 response and every POST request with a 403 - An expected CSRF token cannot be found. I am disabling CSRF and allowing everything just to test like this:\r\n\r\n```\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\nimport org.springframework.security.config.annotation.web.configurers.AbstractHttpConfigurer;\r\nimport org.springframework.security.web.SecurityFilterChain;\r\n\r\n/**\r\n * Security configuration for the service.\r\n */\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class SecurityConfig {\r\n    @Bean\r\n    SecurityFilterChain filterChain(final HttpSecurity http) throws Exception {\r\n        http\r\n            .csrf(csrf -&gt; csrf.disable())\r\n            .httpBasic(AbstractHttpConfigurer::disable)\r\n            .authorizeHttpRequests(authz -&gt;\r\n                authz\r\n                    .anyRequest().permitAll()\r\n                    );\r\n        return http.build();\r\n    }\r\n}\r\n```\r\n\r\nAnd this is my POM, for reference:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.1.1&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.arkdia.condominium.apigateway&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;condominium-apigateway-2&lt;/artifactId&gt;\r\n\t&lt;version&gt;1.0.0&lt;/version&gt;\r\n\t&lt;name&gt;condominium-apigateway-2&lt;/name&gt;\r\n\t&lt;description&gt;Apigateway for Condominium&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t\t&lt;spring-cloud.version&gt;2022.0.3&lt;/spring-cloud.version&gt;\r\n\t\t&lt;log4j2.version&gt;2.20.0&lt;/log4j2.version&gt;\r\n\t\t&lt;jjwt.version&gt;0.11.5&lt;/jjwt.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t            &lt;exclusion&gt;\r\n\t                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t                &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n\t            &lt;/exclusion&gt;\r\n\t        &lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t            &lt;exclusion&gt;\r\n\t                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t                &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n\t            &lt;/exclusion&gt;\r\n\t        &lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t            &lt;exclusion&gt;\r\n\t                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t                &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n\t            &lt;/exclusion&gt;\r\n\t        &lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t        &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n\t        &lt;scope&gt;provided&lt;/scope&gt;\r\n\t        &lt;exclusions&gt;\r\n\t            &lt;exclusion&gt;\r\n\t                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t                &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n\t            &lt;/exclusion&gt;\r\n\t        &lt;/exclusions&gt;\r\n\t    &lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\t&lt;dependencyManagement&gt;\r\n\t\t&lt;dependencies&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;${spring-cloud.version}&lt;/version&gt;\r\n\t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n\t\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t&lt;/dependencies&gt;\r\n\t&lt;/dependencyManagement&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nThis is my application.yml:\r\n\r\n```\r\nserver:\r\n  port: 6081\r\neureka:\r\n  instance:\r\n    hostname: localhost\r\n    port: 6761\r\n  client:\r\n    serviceUrl:\r\n      defaultZone: http://${eureka.instance.hostname}:${eureka.instance.port}/eureka\r\nlogging:\r\n  level:\r\n    org.springframework.security: DEBUG\r\nspring:\r\n  application:\r\n    name: condominium-api-gateway\r\n  main:\r\n    allow-bean-definition-overriding: true\r\n  cloud:\r\n    gateway:\r\n      discovery:\r\n        locator:\r\n          lower-case-service-id: true\r\n          enabled: true\r\n      routes:\r\n        -\r\n          id: condominium-authentication\r\n          uri: lb://condominium-authentication\r\n          predicates:\r\n            - Path=/api/condominium/authentication/login\r\n            - Method=POST\r\n          filters:\r\n            - RemoveRequestHeader=Cookie\r\n        -\r\n          id: condominium-authentication\r\n          uri: lb://condominium-authentication\r\n          predicates:\r\n            - Path=/api/condominium/authentication/version\r\n            - Method=GET\r\n          filters:\r\n            - RemoveRequestHeader=Cookie\r\n```\r\n\r\nAlso i enabled org.springframework.security logs to see whats going on, but just the GET requests get logs like the following:\r\n\r\n```\r\n2023-07-06 13:45:42.882  [32;1mDEBUG [m  [35m26180 [m [nio-6081-exec-3]  [36mo.s.s.w.s.u.m.OrServerWebExchangeMatcher [m : Trying to match using PathMatcherServerWebExchangeMatcher{pattern=&#39;/login&#39;, method=POST}\r\n2023-07-06 13:45:42.883  [32;1mDEBUG [m  [35m26180 [m [nio-6081-exec-3]  [36mathPatternParserServerWebExchangeMatcher [m : Request &#39;GET /api/condominium/authentication/version&#39; doesn&#39;t match &#39;POST /login&#39;\r\n2023-07-06 13:45:42.884  [32;1mDEBUG [m  [35m26180 [m [nio-6081-exec-3]  [36mo.s.s.w.s.u.m.OrServerWebExchangeMatcher [m : No matches found\r\n2023-07-06 13:45:42.884  [32;1mDEBUG [m  [35m26180 [m [nio-6081-exec-3]  [36mo.s.s.w.s.u.m.OrServerWebExchangeMatcher [m : Trying to match using PathMatcherServerWebExchangeMatcher{pattern=&#39;/login&#39;, method=GET}\r\n2023-07-06 13:45:42.885  [32;1mDEBUG [m  [35m26180 [m [nio-6081-exec-3]  [36mathPatternParserServerWebExchangeMatcher [m : Request &#39;GET /api/condominium/authentication/version&#39; doesn&#39;t match &#39;GET /login&#39;\r\n2023-07-06 13:45:42.886  [32;1mDEBUG [m  [35m26180 [m [nio-6081-exec-3]  [36mo.s.s.w.s.u.m.OrServerWebExchangeMatcher [m : No matches found\r\n2023-07-06 13:45:42.886  [32;1mDEBUG [m  [35m26180 [m [nio-6081-exec-3]  [36mo.s.s.w.s.u.m.OrServerWebExchangeMatcher [m : Trying to match using PathMatcherServerWebExchangeMatcher{pattern=&#39;/logout&#39;, method=GET}\r\n2023-07-06 13:45:42.887  [32;1mDEBUG [m  [35m26180 [m [nio-6081-exec-3]  [36mathPatternParserServerWebExchangeMatcher [m : Request &#39;GET /api/condominium/authentication/version&#39; doesn&#39;t match &#39;GET /logout&#39;\r\n2023-07-06 13:45:42.887  [32;1mDEBUG [m  [35m26180 [m [nio-6081-exec-3]  [36mo.s.s.w.s.u.m.OrServerWebExchangeMatcher [m : No matches found\r\n2023-07-06 13:45:42.888  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36mo.s.s.w.s.u.m.OrServerWebExchangeMatcher [m : Trying to match using PathMatcherServerWebExchangeMatcher{pattern=&#39;/logout&#39;, method=POST}\r\n2023-07-06 13:45:42.889  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36mathPatternParserServerWebExchangeMatcher [m : Request &#39;GET /api/condominium/authentication/version&#39; doesn&#39;t match &#39;POST /logout&#39;\r\n2023-07-06 13:45:42.889  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36mo.s.s.w.s.u.m.OrServerWebExchangeMatcher [m : No matches found\r\n2023-07-06 13:45:42.889  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36mo.s.s.w.s.u.m.OrServerWebExchangeMatcher [m : Trying to match using EndpointRequestMatcher includes=[health], excludes=[], includeLinks=false\r\n2023-07-06 13:45:42.896  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36mo.s.s.w.s.u.m.OrServerWebExchangeMatcher [m : Trying to match using PathMatcherServerWebExchangeMatcher{pattern=&#39;/actuator/health/**&#39;, method=null}\r\n2023-07-06 13:45:42.897  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36mathPatternParserServerWebExchangeMatcher [m : Request &#39;GET /api/condominium/authentication/version&#39; doesn&#39;t match &#39;null /actuator/health/**&#39;\r\n2023-07-06 13:45:42.898  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36mo.s.s.w.s.u.m.OrServerWebExchangeMatcher [m : No matches found\r\n2023-07-06 13:45:42.898  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36mo.s.s.w.s.u.m.OrServerWebExchangeMatcher [m : No matches found\r\n2023-07-06 13:45:42.898  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36ma.DelegatingReactiveAuthorizationManager [m : Checking authorization on &#39;/api/condominium/authentication/version&#39; using org.springframework.security.authorization.AuthenticatedReactiveAuthorizationManager@7ebda86b\r\n2023-07-06 13:45:42.900  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36mebSessionServerSecurityContextRepository [m : No SecurityContext found in WebSession: &#39;org.springframework.web.server.session.InMemoryWebSessionStore$InMemoryWebSession@24122132&#39;\r\n2023-07-06 13:45:42.901  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36mo.s.s.w.s.a.AuthorizationWebFilter       [m : Authorization failed: Access Denied\r\n2023-07-06 13:45:42.902  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36mebSessionServerSecurityContextRepository [m : No SecurityContext found in WebSession: &#39;org.springframework.web.server.session.InMemoryWebSessionStore$InMemoryWebSession@24122132&#39;\r\n2023-07-06 13:45:42.902  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36mDelegatingServerAuthenticationEntryPoint [m : Trying to match using MediaTypeRequestMatcher [matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[*/*]]\r\n2023-07-06 13:45:42.902  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36m.s.u.m.MediaTypeServerWebExchangeMatcher [m : httpRequestMediaTypes=[*/*]\r\n2023-07-06 13:45:42.902  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36m.s.u.m.MediaTypeServerWebExchangeMatcher [m : Processing */*\r\n2023-07-06 13:45:42.903  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36m.s.u.m.MediaTypeServerWebExchangeMatcher [m : Ignoring\r\n2023-07-06 13:45:42.903  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36m.s.u.m.MediaTypeServerWebExchangeMatcher [m : Did not match any media types\r\n2023-07-06 13:45:42.903  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36mDelegatingServerAuthenticationEntryPoint [m : Trying to match using OrServerWebExchangeMatcher{matchers=[org.springframework.security.config.web.server.ServerHttpSecurity$HttpBasicSpec$$Lambda$1062/0x0000000801275d70@60534b79, AndServerWebExchangeMatcher{matchers=[NegatedServerWebExchangeMatcher{matcher=MediaTypeRequestMatcher [matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]}, MediaTypeRequestMatcher [matchingMediaTypes=[application/atom+xml, application/x-www-form-urlencoded, application/json, application/octet-stream, application/xml, multipart/form-data, text/xml], useEquals=false, ignoredMediaTypes=[*/*]]]}]}\r\n2023-07-06 13:45:42.903  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36mo.s.s.w.s.u.m.OrServerWebExchangeMatcher [m : Trying to match using org.springframework.security.config.web.server.ServerHttpSecurity$HttpBasicSpec$$Lambda$1062/0x0000000801275d70@60534b79\r\n2023-07-06 13:45:42.903  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36mo.s.s.w.s.u.m.OrServerWebExchangeMatcher [m : Trying to match using AndServerWebExchangeMatcher{matchers=[NegatedServerWebExchangeMatcher{matcher=MediaTypeRequestMatcher [matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]}, MediaTypeRequestMatcher [matchingMediaTypes=[application/atom+xml, application/x-www-form-urlencoded, application/json, application/octet-stream, application/xml, multipart/form-data, text/xml], useEquals=false, ignoredMediaTypes=[*/*]]]}\r\n2023-07-06 13:45:42.903  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36m.s.s.w.s.u.m.AndServerWebExchangeMatcher [m : Trying to match using NegatedServerWebExchangeMatcher{matcher=MediaTypeRequestMatcher [matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]}\r\n2023-07-06 13:45:42.903  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36m.s.u.m.MediaTypeServerWebExchangeMatcher [m : httpRequestMediaTypes=[*/*]\r\n2023-07-06 13:45:42.904  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36m.s.u.m.MediaTypeServerWebExchangeMatcher [m : Processing */*\r\n2023-07-06 13:45:42.904  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36m.s.u.m.MediaTypeServerWebExchangeMatcher [m : text/html .isCompatibleWith */* = true\r\n2023-07-06 13:45:42.904  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36m.w.s.u.m.NegatedServerWebExchangeMatcher [m : matches = false\r\n2023-07-06 13:45:42.904  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36m.s.s.w.s.u.m.AndServerWebExchangeMatcher [m : Did not match\r\n2023-07-06 13:45:42.904  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36mo.s.s.w.s.u.m.OrServerWebExchangeMatcher [m : No matches found\r\n2023-07-06 13:45:42.904  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36mDelegatingServerAuthenticationEntryPoint [m : No match found. Using default entry point org.springframework.security.web.server.DelegatingServerAuthenticationEntryPoint@46e5207c\r\n2023-07-06 13:45:42.904  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36mDelegatingServerAuthenticationEntryPoint [m : Trying to match using org.springframework.security.config.web.server.ServerHttpSecurity$HttpBasicSpec$$Lambda$1062/0x0000000801275d70@60534b79\r\n2023-07-06 13:45:42.905  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36mDelegatingServerAuthenticationEntryPoint [m : No match found. Using default entry point org.springframework.security.web.server.authentication.HttpBasicServerAuthenticationEntryPoint@5588263b\r\n```\r\n\r\nJudging by the logs it&#39;s that I suspect my security filter chain is being ignored, but I can&#39;t find how to fix it","title":"SecurityFilterChain being ignored in spring boot cloud gateway","body":"<p>I am trying to set up security for my api gateway (spring boot cloud gateway). Before adding spring security the requests worked just fine, but after adding spring-boot-starter-security and seting up a SecurityFilterChain every GET request gets a 401 response and every POST request with a 403 - An expected CSRF token cannot be found. I am disabling CSRF and allowing everything just to test like this:</p>\n<pre><code>import org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.annotation.web.configurers.AbstractHttpConfigurer;\nimport org.springframework.security.web.SecurityFilterChain;\n\n/**\n * Security configuration for the service.\n */\n@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n    @Bean\n    SecurityFilterChain filterChain(final HttpSecurity http) throws Exception {\n        http\n            .csrf(csrf -&gt; csrf.disable())\n            .httpBasic(AbstractHttpConfigurer::disable)\n            .authorizeHttpRequests(authz -&gt;\n                authz\n                    .anyRequest().permitAll()\n                    );\n        return http.build();\n    }\n}\n</code></pre>\n<p>And this is my POM, for reference:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.1&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.arkdia.condominium.apigateway&lt;/groupId&gt;\n    &lt;artifactId&gt;condominium-apigateway-2&lt;/artifactId&gt;\n    &lt;version&gt;1.0.0&lt;/version&gt;\n    &lt;name&gt;condominium-apigateway-2&lt;/name&gt;\n    &lt;description&gt;Apigateway for Condominium&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n        &lt;spring-cloud.version&gt;2022.0.3&lt;/spring-cloud.version&gt;\n        &lt;log4j2.version&gt;2.20.0&lt;/log4j2.version&gt;\n        &lt;jjwt.version&gt;0.11.5&lt;/jjwt.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>This is my application.yml:</p>\n<pre><code>server:\n  port: 6081\neureka:\n  instance:\n    hostname: localhost\n    port: 6761\n  client:\n    serviceUrl:\n      defaultZone: http://${eureka.instance.hostname}:${eureka.instance.port}/eureka\nlogging:\n  level:\n    org.springframework.security: DEBUG\nspring:\n  application:\n    name: condominium-api-gateway\n  main:\n    allow-bean-definition-overriding: true\n  cloud:\n    gateway:\n      discovery:\n        locator:\n          lower-case-service-id: true\n          enabled: true\n      routes:\n        -\n          id: condominium-authentication\n          uri: lb://condominium-authentication\n          predicates:\n            - Path=/api/condominium/authentication/login\n            - Method=POST\n          filters:\n            - RemoveRequestHeader=Cookie\n        -\n          id: condominium-authentication\n          uri: lb://condominium-authentication\n          predicates:\n            - Path=/api/condominium/authentication/version\n            - Method=GET\n          filters:\n            - RemoveRequestHeader=Cookie\n</code></pre>\n<p>Also i enabled org.springframework.security logs to see whats going on, but just the GET requests get logs like the following:</p>\n<pre><code>2023-07-06 13:45:42.882  [32;1mDEBUG [m  [35m26180 [m [nio-6081-exec-3]  [36mo.s.s.w.s.u.m.OrServerWebExchangeMatcher [m : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/login', method=POST}\n2023-07-06 13:45:42.883  [32;1mDEBUG [m  [35m26180 [m [nio-6081-exec-3]  [36mathPatternParserServerWebExchangeMatcher [m : Request 'GET /api/condominium/authentication/version' doesn't match 'POST /login'\n2023-07-06 13:45:42.884  [32;1mDEBUG [m  [35m26180 [m [nio-6081-exec-3]  [36mo.s.s.w.s.u.m.OrServerWebExchangeMatcher [m : No matches found\n2023-07-06 13:45:42.884  [32;1mDEBUG [m  [35m26180 [m [nio-6081-exec-3]  [36mo.s.s.w.s.u.m.OrServerWebExchangeMatcher [m : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/login', method=GET}\n2023-07-06 13:45:42.885  [32;1mDEBUG [m  [35m26180 [m [nio-6081-exec-3]  [36mathPatternParserServerWebExchangeMatcher [m : Request 'GET /api/condominium/authentication/version' doesn't match 'GET /login'\n2023-07-06 13:45:42.886  [32;1mDEBUG [m  [35m26180 [m [nio-6081-exec-3]  [36mo.s.s.w.s.u.m.OrServerWebExchangeMatcher [m : No matches found\n2023-07-06 13:45:42.886  [32;1mDEBUG [m  [35m26180 [m [nio-6081-exec-3]  [36mo.s.s.w.s.u.m.OrServerWebExchangeMatcher [m : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=GET}\n2023-07-06 13:45:42.887  [32;1mDEBUG [m  [35m26180 [m [nio-6081-exec-3]  [36mathPatternParserServerWebExchangeMatcher [m : Request 'GET /api/condominium/authentication/version' doesn't match 'GET /logout'\n2023-07-06 13:45:42.887  [32;1mDEBUG [m  [35m26180 [m [nio-6081-exec-3]  [36mo.s.s.w.s.u.m.OrServerWebExchangeMatcher [m : No matches found\n2023-07-06 13:45:42.888  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36mo.s.s.w.s.u.m.OrServerWebExchangeMatcher [m : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}\n2023-07-06 13:45:42.889  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36mathPatternParserServerWebExchangeMatcher [m : Request 'GET /api/condominium/authentication/version' doesn't match 'POST /logout'\n2023-07-06 13:45:42.889  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36mo.s.s.w.s.u.m.OrServerWebExchangeMatcher [m : No matches found\n2023-07-06 13:45:42.889  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36mo.s.s.w.s.u.m.OrServerWebExchangeMatcher [m : Trying to match using EndpointRequestMatcher includes=[health], excludes=[], includeLinks=false\n2023-07-06 13:45:42.896  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36mo.s.s.w.s.u.m.OrServerWebExchangeMatcher [m : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/actuator/health/**', method=null}\n2023-07-06 13:45:42.897  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36mathPatternParserServerWebExchangeMatcher [m : Request 'GET /api/condominium/authentication/version' doesn't match 'null /actuator/health/**'\n2023-07-06 13:45:42.898  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36mo.s.s.w.s.u.m.OrServerWebExchangeMatcher [m : No matches found\n2023-07-06 13:45:42.898  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36mo.s.s.w.s.u.m.OrServerWebExchangeMatcher [m : No matches found\n2023-07-06 13:45:42.898  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36ma.DelegatingReactiveAuthorizationManager [m : Checking authorization on '/api/condominium/authentication/version' using org.springframework.security.authorization.AuthenticatedReactiveAuthorizationManager@7ebda86b\n2023-07-06 13:45:42.900  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36mebSessionServerSecurityContextRepository [m : No SecurityContext found in WebSession: 'org.springframework.web.server.session.InMemoryWebSessionStore$InMemoryWebSession@24122132'\n2023-07-06 13:45:42.901  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36mo.s.s.w.s.a.AuthorizationWebFilter       [m : Authorization failed: Access Denied\n2023-07-06 13:45:42.902  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36mebSessionServerSecurityContextRepository [m : No SecurityContext found in WebSession: 'org.springframework.web.server.session.InMemoryWebSessionStore$InMemoryWebSession@24122132'\n2023-07-06 13:45:42.902  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36mDelegatingServerAuthenticationEntryPoint [m : Trying to match using MediaTypeRequestMatcher [matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[*/*]]\n2023-07-06 13:45:42.902  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36m.s.u.m.MediaTypeServerWebExchangeMatcher [m : httpRequestMediaTypes=[*/*]\n2023-07-06 13:45:42.902  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36m.s.u.m.MediaTypeServerWebExchangeMatcher [m : Processing */*\n2023-07-06 13:45:42.903  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36m.s.u.m.MediaTypeServerWebExchangeMatcher [m : Ignoring\n2023-07-06 13:45:42.903  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36m.s.u.m.MediaTypeServerWebExchangeMatcher [m : Did not match any media types\n2023-07-06 13:45:42.903  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36mDelegatingServerAuthenticationEntryPoint [m : Trying to match using OrServerWebExchangeMatcher{matchers=[org.springframework.security.config.web.server.ServerHttpSecurity$HttpBasicSpec$$Lambda$1062/0x0000000801275d70@60534b79, AndServerWebExchangeMatcher{matchers=[NegatedServerWebExchangeMatcher{matcher=MediaTypeRequestMatcher [matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]}, MediaTypeRequestMatcher [matchingMediaTypes=[application/atom+xml, application/x-www-form-urlencoded, application/json, application/octet-stream, application/xml, multipart/form-data, text/xml], useEquals=false, ignoredMediaTypes=[*/*]]]}]}\n2023-07-06 13:45:42.903  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36mo.s.s.w.s.u.m.OrServerWebExchangeMatcher [m : Trying to match using org.springframework.security.config.web.server.ServerHttpSecurity$HttpBasicSpec$$Lambda$1062/0x0000000801275d70@60534b79\n2023-07-06 13:45:42.903  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36mo.s.s.w.s.u.m.OrServerWebExchangeMatcher [m : Trying to match using AndServerWebExchangeMatcher{matchers=[NegatedServerWebExchangeMatcher{matcher=MediaTypeRequestMatcher [matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]}, MediaTypeRequestMatcher [matchingMediaTypes=[application/atom+xml, application/x-www-form-urlencoded, application/json, application/octet-stream, application/xml, multipart/form-data, text/xml], useEquals=false, ignoredMediaTypes=[*/*]]]}\n2023-07-06 13:45:42.903  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36m.s.s.w.s.u.m.AndServerWebExchangeMatcher [m : Trying to match using NegatedServerWebExchangeMatcher{matcher=MediaTypeRequestMatcher [matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]}\n2023-07-06 13:45:42.903  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36m.s.u.m.MediaTypeServerWebExchangeMatcher [m : httpRequestMediaTypes=[*/*]\n2023-07-06 13:45:42.904  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36m.s.u.m.MediaTypeServerWebExchangeMatcher [m : Processing */*\n2023-07-06 13:45:42.904  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36m.s.u.m.MediaTypeServerWebExchangeMatcher [m : text/html .isCompatibleWith */* = true\n2023-07-06 13:45:42.904  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36m.w.s.u.m.NegatedServerWebExchangeMatcher [m : matches = false\n2023-07-06 13:45:42.904  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36m.s.s.w.s.u.m.AndServerWebExchangeMatcher [m : Did not match\n2023-07-06 13:45:42.904  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36mo.s.s.w.s.u.m.OrServerWebExchangeMatcher [m : No matches found\n2023-07-06 13:45:42.904  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36mDelegatingServerAuthenticationEntryPoint [m : No match found. Using default entry point org.springframework.security.web.server.DelegatingServerAuthenticationEntryPoint@46e5207c\n2023-07-06 13:45:42.904  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36mDelegatingServerAuthenticationEntryPoint [m : Trying to match using org.springframework.security.config.web.server.ServerHttpSecurity$HttpBasicSpec$$Lambda$1062/0x0000000801275d70@60534b79\n2023-07-06 13:45:42.905  [32;1mDEBUG [m  [35m26180 [m [     parallel-2]  [36mDelegatingServerAuthenticationEntryPoint [m : No match found. Using default entry point org.springframework.security.web.server.authentication.HttpBasicServerAuthenticationEntryPoint@5588263b\n</code></pre>\n<p>Judging by the logs it's that I suspect my security filter chain is being ignored, but I can't find how to fix it</p>\n"},{"tags":["java","spring-boot","spring-cloud-feign"],"owner":{"account_id":26186505,"reputation":11,"user_id":19868973,"display_name":"Ray"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1688704633,"creation_date":1688704633,"question_id":76633980,"body_markdown":"Springboot AuthInfoInterceptor Inject a FeignClient will report a error.\r\nNow I have a modul A with a FeignClient AService.\r\nSecond,I have a modulB B depend on A. \r\nThirdB have a Interceptor called `public class AuthInfoInterceptor implements HandlerInterceptor`\r\nIf I user Autowired inject AService like this:\r\n```\r\n@Component\r\npublic class AuthInfoInterceptor implements HandlerInterceptor {\r\n\r\n    @Autowired\r\n    private AService aService;\r\n}\r\n```\r\nit will report a error\r\nCaused by: org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name &#39;mvcResourceUrlProvider&#39;: Requested bean is currently in creation: Is there an unresolvable circular reference?\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.beforeSingletonCreation(DefaultSingletonBeanRegistry.java:355) ~[spring-beans-5.3.17.jar:5.3.17]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:227) ~[spring-beans-5.3.17.jar:5.3.17]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.17.jar:5.3.17]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:213) ~[spring-beans-5.3.17.jar:5.3.17]\r\n\r\n\r\nI know i can user `@Lazy`,but i want to know why will report this error","title":"Springboot AuthInfoInterceptor Inject a FeignClient will report a error","body":"<p>Springboot AuthInfoInterceptor Inject a FeignClient will report a error.\nNow I have a modul A with a FeignClient AService.\nSecond,I have a modulB B depend on A.\nThirdB have a Interceptor called <code>public class AuthInfoInterceptor implements HandlerInterceptor</code>\nIf I user Autowired inject AService like this:</p>\n<pre><code>@Component\npublic class AuthInfoInterceptor implements HandlerInterceptor {\n\n    @Autowired\n    private AService aService;\n}\n</code></pre>\n<p>it will report a error\nCaused by: org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name 'mvcResourceUrlProvider': Requested bean is currently in creation: Is there an unresolvable circular reference?\nat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.beforeSingletonCreation(DefaultSingletonBeanRegistry.java:355) ~[spring-beans-5.3.17.jar:5.3.17]\nat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:227) ~[spring-beans-5.3.17.jar:5.3.17]\nat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.17.jar:5.3.17]\nat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:213) ~[spring-beans-5.3.17.jar:5.3.17]</p>\n<p>I know i can user <code>@Lazy</code>,but i want to know why will report this error</p>\n"},{"tags":["java","counter","open-telemetry"],"comments":[{"owner":{"account_id":3053597,"reputation":580,"user_id":2587704,"accept_rate":50,"display_name":"JackB"},"score":0,"creation_date":1689007478,"post_id":76625939,"comment_id":135149199,"body_markdown":"&quot;Is there any way to retrieve the current counter value without relying on the exporter or backend system where the metrics are sent?&quot; - No. In OpenTelemetry metrics, the API is strictly for recording measurements. Access to the aggregated metrics is only available through the SDK by registering a custom reader / exporter.","body":"&quot;Is there any way to retrieve the current counter value without relying on the exporter or backend system where the metrics are sent?&quot; - No. In OpenTelemetry metrics, the API is strictly for recording measurements. Access to the aggregated metrics is only available through the SDK by registering a custom reader / exporter."}],"answers":[{"comments":[{"owner":{"account_id":3584068,"reputation":571,"user_id":2991609,"accept_rate":10,"display_name":"Siddhant"},"score":0,"creation_date":1688649933,"post_id":76626922,"comment_id":135104542,"body_markdown":"Argh! This is exactly the thing I wanted to avoid where we end up storing the counter value on our end too. We thought of this but were hoping there might be a better way to do this. I like the idea of not exposing the value in the API as mentioned in the OTEL specification, but unfortunately, we have legacy instrumentation API that still needs to be supported and bridged with opentelemetry-java API","body":"Argh! This is exactly the thing I wanted to avoid where we end up storing the counter value on our end too. We thought of this but were hoping there might be a better way to do this. I like the idea of not exposing the value in the API as mentioned in the OTEL specification, but unfortunately, we have legacy instrumentation API that still needs to be supported and bridged with opentelemetry-java API"},{"owner":{"account_id":3528320,"reputation":301,"user_id":2948740,"display_name":"Gregor Zeitlinger"},"score":0,"creation_date":1688653751,"post_id":76626922,"comment_id":135105504,"body_markdown":"As an alternative, you could use the micrometer metrics api (which allows you to get the current value), which can export to OpenTelemetry.","body":"As an alternative, you could use the micrometer metrics api (which allows you to get the current value), which can export to OpenTelemetry."}],"tags":[],"owner":{"account_id":3528320,"reputation":301,"user_id":2948740,"display_name":"Gregor Zeitlinger"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688632120,"creation_date":1688632120,"answer_id":76626922,"question_id":76625939,"body_markdown":"The recommended way would be to use an asynchronous counter, where you store the value yourself, and provide a callback to OpenTelemetry to access that value using [buildWithCallback](https://github.com/open-telemetry/opentelemetry-java/blob/main/api/all/src/main/java/io/opentelemetry/api/metrics/LongCounterBuilder.java#L61).","title":"How to retrieve the current counter value using Opentelemetry Java API?","body":"<p>The recommended way would be to use an asynchronous counter, where you store the value yourself, and provide a callback to OpenTelemetry to access that value using <a href=\"https://github.com/open-telemetry/opentelemetry-java/blob/main/api/all/src/main/java/io/opentelemetry/api/metrics/LongCounterBuilder.java#L61\" rel=\"nofollow noreferrer\">buildWithCallback</a>.</p>\n"}],"owner":{"account_id":28939040,"reputation":1,"user_id":22165951,"display_name":"Vasu. Tk"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":362,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1688704279,"creation_date":1688623585,"question_id":76625939,"body_markdown":"As per my understanding OpenTelemetry is designed to capture incremental changes and is primarily used for aggregating and exporting metrics to monitoring systems. However, it does not provide a direct means to access the current value.\r\n\r\nI&#39;m trying to bridge between our custom Counter API and opentelemetry-java API. I&#39;m able to do the increment or decrement but unable able to identify how to retrieve the value of the counter.\r\n\r\nIs there any way to retrieve the current counter value without relying on the exporter or backend system where the metrics are sent?\r\n\r\n\r\n","title":"How to retrieve the current counter value using Opentelemetry Java API?","body":"<p>As per my understanding OpenTelemetry is designed to capture incremental changes and is primarily used for aggregating and exporting metrics to monitoring systems. However, it does not provide a direct means to access the current value.</p>\n<p>I'm trying to bridge between our custom Counter API and opentelemetry-java API. I'm able to do the increment or decrement but unable able to identify how to retrieve the value of the counter.</p>\n<p>Is there any way to retrieve the current counter value without relying on the exporter or backend system where the metrics are sent?</p>\n"},{"tags":["java","interface","terminology","abstract-data-type"],"comments":[{"owner":{"account_id":1370050,"reputation":19409,"user_id":1305516,"accept_rate":59,"display_name":"David says Reinstate Monica"},"score":5,"creation_date":1381208892,"post_id":19239471,"comment_id":28477845,"body_markdown":"possible duplicate of [What is the difference between an interface and abstract class?](http://stackoverflow.com/questions/1913098/what-is-the-difference-between-an-interface-and-abstract-class)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/1913098/what-is-the-difference-between-an-interface-and-abstract-class\">What is the difference between an interface and abstract class?</a>"},{"owner":{"account_id":2662423,"reputation":1448,"user_id":2301782,"accept_rate":48,"display_name":"TheGraduateGuy"},"score":2,"creation_date":1381209366,"post_id":19239471,"comment_id":28477998,"body_markdown":"you should have researched it before asking this question .This question/answer is available on so many places then you ca easily find it.","body":"you should have researched it before asking this question .This question/answer is available on so many places then you ca easily find it."},{"owner":{"account_id":2859264,"reputation":193,"user_id":2454830,"accept_rate":33,"display_name":"user2454830"},"score":3,"creation_date":1381210413,"post_id":19239471,"comment_id":28478355,"body_markdown":"Is there any difference between Abstract Class and Abstract Data Type","body":"Is there any difference between Abstract Class and Abstract Data Type"},{"owner":{"account_id":2859264,"reputation":193,"user_id":2454830,"accept_rate":33,"display_name":"user2454830"},"score":1,"creation_date":1381212953,"post_id":19239471,"comment_id":28479284,"body_markdown":"DownVoter can leave a comment here. Thaknks","body":"DownVoter can leave a comment here. Thaknks"},{"owner":{"account_id":335069,"reputation":70765,"user_id":661933,"accept_rate":94,"display_name":"nawfal"},"score":0,"creation_date":1404727761,"post_id":19239471,"comment_id":38129602,"body_markdown":"possible duplicate of [Abstract class vs Interface in Java](http://stackoverflow.com/questions/10040069/abstract-class-vs-interface-in-java)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/10040069/abstract-class-vs-interface-in-java\">Abstract class vs Interface in Java</a>"},{"owner":{"account_id":462341,"reputation":1210,"user_id":864595,"display_name":"ty1824"},"score":7,"creation_date":1415093781,"post_id":19239471,"comment_id":42050877,"body_markdown":"For anyone looking at this in the future - this question is -not- a duplicate of any of those proposed questions. It is quite specifically about Abstract Data Types, which several answers have mentioned (and the majority of the answers completely missed), and not Abstract Classes.","body":"For anyone looking at this in the future - this question is -not- a duplicate of any of those proposed questions. It is quite specifically about Abstract Data Types, which several answers have mentioned (and the majority of the answers completely missed), and not Abstract Classes."},{"owner":{"account_id":1029317,"reputation":1960,"user_id":1037960,"accept_rate":93,"display_name":"Zimano"},"score":0,"creation_date":1515513392,"post_id":19239471,"comment_id":83323550,"body_markdown":"This is one of the messiest question and answer page I have found here on SO lol","body":"This is one of the messiest question and answer page I have found here on SO lol"}],"answers":[{"comments":[{"owner":{"account_id":2859264,"reputation":193,"user_id":2454830,"accept_rate":33,"display_name":"user2454830"},"score":0,"creation_date":1381212009,"post_id":19239512,"comment_id":28478928,"body_markdown":"I am not getting your answers clearly... So, Your discussion is Abstract Data Type is an interface or you have any other answer.","body":"I am not getting your answers clearly... So, Your discussion is Abstract Data Type is an interface or you have any other answer."},{"owner":{"account_id":2859264,"reputation":193,"user_id":2454830,"accept_rate":33,"display_name":"user2454830"},"score":2,"creation_date":1381212030,"post_id":19239512,"comment_id":28478938,"body_markdown":"The combination of data together with its methods is called an Abstract Data Type (ADT).  A Java Interface is a way to specify an ADT.","body":"The  combination  of  data  together  with  its  methods  is  called  an  Abstract  Data  Type  (ADT).  A  Java  Interface  is  a  way  to  specify  an  ADT."},{"owner":{"account_id":3150686,"reputation":13778,"user_id":2664200,"accept_rate":71,"display_name":"SpringLearner"},"score":1,"creation_date":1381212206,"post_id":19239512,"comment_id":28478994,"body_markdown":"@user2454830 when you write String x=&quot;hi&quot; at this we say x is a variable of String datatype. DataType means to what variable you are assiging.Hope you know class so not explaining about what class is","body":"@user2454830 when you write String x=&quot;hi&quot; at this we say x is a variable of String datatype. DataType means to what variable you are assiging.Hope you know class so not explaining about what class is"},{"owner":{"account_id":2859264,"reputation":193,"user_id":2454830,"accept_rate":33,"display_name":"user2454830"},"score":0,"creation_date":1381212324,"post_id":19239512,"comment_id":28479045,"body_markdown":"Now I understood.. that... MyListADT listADT = new MyListADTImple(); Where MyListADT is an interfacfe which is inturn an Abstract Data Type. Am I Right...?","body":"Now I understood.. that... MyListADT listADT = new MyListADTImple(); Where MyListADT is an interfacfe which is inturn an Abstract Data Type. Am I Right...?"},{"owner":{"account_id":2859264,"reputation":193,"user_id":2454830,"accept_rate":33,"display_name":"user2454830"},"score":0,"creation_date":1381212394,"post_id":19239512,"comment_id":28479075,"body_markdown":"Please see the above comment.","body":"Please see the above comment."},{"owner":{"account_id":2859264,"reputation":193,"user_id":2454830,"accept_rate":33,"display_name":"user2454830"},"score":0,"creation_date":1381212590,"post_id":19239512,"comment_id":28479152,"body_markdown":"Can you see the answer posted by Sankar and Saj at Applexus Technolo. I think they are correct... in one way. If they are correct You can accept that answers by giving upvoting...","body":"Can you see the answer posted by Sankar and Saj at Applexus Technolo. I think they are correct... in one way. If they are correct You can accept that answers by giving upvoting..."},{"owner":{"account_id":2859264,"reputation":193,"user_id":2454830,"accept_rate":33,"display_name":"user2454830"},"score":0,"creation_date":1381212649,"post_id":19239512,"comment_id":28479172,"body_markdown":"Refresh your page with CTRL+F5","body":"Refresh your page with CTRL+F5"},{"owner":{"account_id":2859264,"reputation":193,"user_id":2454830,"accept_rate":33,"display_name":"user2454830"},"score":0,"creation_date":1381212713,"post_id":19239512,"comment_id":28479197,"body_markdown":"let us [continue this discussion in chat](http://chat.stackoverflow.com/rooms/38761/discussion-between-user2454830-and-javabeginner)","body":"let us <a href=\"http://chat.stackoverflow.com/rooms/38761/discussion-between-user2454830-and-javabeginner\">continue this discussion in chat</a>"},{"owner":{"account_id":2859264,"reputation":193,"user_id":2454830,"accept_rate":33,"display_name":"user2454830"},"score":0,"creation_date":1381213632,"post_id":19239512,"comment_id":28479538,"body_markdown":"But I have clicked on UpVote on your answer... I have just modified your answer slightly. Please accept it.. so that it will give tick for your answer. Not sure","body":"But I have clicked on UpVote on your answer... I have just modified your answer slightly. Please accept it.. so that it will give tick for your answer. Not sure"},{"owner":{"display_name":"user6214276"},"score":3,"creation_date":1468505648,"post_id":19239512,"comment_id":64163319,"body_markdown":"The question was not about the differences between an abstract **class** and an abstract data type","body":"The question was not about the differences between an abstract <b>class</b> and an abstract data type"}],"tags":[],"owner":{"account_id":3150686,"reputation":13778,"user_id":2664200,"accept_rate":71,"display_name":"SpringLearner"},"comment_count":10,"down_vote_count":11,"up_vote_count":4,"is_accepted":true,"score":-7,"last_activity_date":1381208850,"creation_date":1381208850,"answer_id":19239512,"question_id":19239471,"body_markdown":"    What is the difference between Abstract data type and Interface.\r\n\r\n 1. Variables declared in a Java interface is by default final. An \r\n    abstract class may contain non-final variables.\r\n 2. Members of a Java interface are public by default. A Java abstract\r\n    class can have the usual flavors of class members like private,\r\n    protected, etc..\r\ncheck this [link][1] for info\r\n\r\n\r\n  [1]: http://mindprod.com/jgloss/interfacevsabstract.html#TABLE","title":"Abstract Data Type and Interface","body":"<pre><code>What is the difference between Abstract data type and Interface.\n</code></pre>\n\n<ol>\n<li>Variables declared in a Java interface is by default final. An \nabstract class may contain non-final variables.</li>\n<li>Members of a Java interface are public by default. A Java abstract\nclass can have the usual flavors of class members like private,\nprotected, etc..\ncheck this <a href=\"http://mindprod.com/jgloss/interfacevsabstract.html#TABLE\" rel=\"nofollow\">link</a> for info</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":2859264,"reputation":193,"user_id":2454830,"accept_rate":33,"display_name":"user2454830"},"score":0,"creation_date":1381211583,"post_id":19239545,"comment_id":28478777,"body_markdown":"I am not getting clearly. All are saying about the differences between the Interface and Abstract Class. But the questions is about Abstract Data Type and Interfaces. Please check it clearly. Or You are all saying about Interface is an abstract data type or Abstract Class is an Abstract Data Type. Which one is correct. I am not playing games here.","body":"I am not getting clearly. All are saying about the differences between the Interface and Abstract Class. But the questions is about Abstract Data Type and Interfaces. Please check it clearly. Or You are all saying about Interface is an abstract data type or Abstract Class is an Abstract Data Type. Which one is correct. I am not playing games here."}],"tags":[],"owner":{"account_id":2662423,"reputation":1448,"user_id":2301782,"accept_rate":48,"display_name":"TheGraduateGuy"},"comment_count":1,"down_vote_count":3,"up_vote_count":3,"is_accepted":false,"score":0,"last_activity_date":1381211217,"creation_date":1381209039,"answer_id":19239545,"question_id":19239471,"body_markdown":"In java-\r\n\r\n interface can have only abstract method which means you can only declare the method i.e . method can have any default implementation.but  abstract class can have both abstract or complete method.\r\n\r\n if the class you are extending is abstract then your child class should either be declared as abstract or should implement all abstract method of super class.\r\n           In case -in interface you can implement as many interface you want.Here also you should implement all the abstract method of all the interfaces in your class or it should be declared as abstract.\r\n\r\n\r\nfollow these link\r\n\r\nhttp://javapapers.com/core-java/abstract-and-interface-core-java-2/difference-between-a-java-interface-and-a-java-abstract-class/\r\n\r\nhttp://www.codeproject.com/Articles/11155/Abstract-Class-versus-Interface\r\n\r\nhttps://stackoverflow.com/questions/1913098/what-is-the-difference-between-an-interface-and-abstract-class","title":"Abstract Data Type and Interface","body":"<p>In java-</p>\n\n<p>interface can have only abstract method which means you can only declare the method i.e . method can have any default implementation.but  abstract class can have both abstract or complete method.</p>\n\n<p>if the class you are extending is abstract then your child class should either be declared as abstract or should implement all abstract method of super class.\n           In case -in interface you can implement as many interface you want.Here also you should implement all the abstract method of all the interfaces in your class or it should be declared as abstract.</p>\n\n<p>follow these link</p>\n\n<p><a href=\"http://javapapers.com/core-java/abstract-and-interface-core-java-2/difference-between-a-java-interface-and-a-java-abstract-class/\" rel=\"nofollow noreferrer\">http://javapapers.com/core-java/abstract-and-interface-core-java-2/difference-between-a-java-interface-and-a-java-abstract-class/</a></p>\n\n<p><a href=\"http://www.codeproject.com/Articles/11155/Abstract-Class-versus-Interface\" rel=\"nofollow noreferrer\">http://www.codeproject.com/Articles/11155/Abstract-Class-versus-Interface</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/1913098/what-is-the-difference-between-an-interface-and-abstract-class\">What is the difference between an interface and abstract class?</a></p>\n"},{"comments":[{"owner":{"account_id":56144,"reputation":87640,"user_id":168175,"accept_rate":88,"display_name":"Flexo"},"score":1,"creation_date":1381221261,"post_id":19239583,"comment_id":28483233,"body_markdown":"There are some odd extra characters that I&#39;m seeing in your text after every word. Can you fix that?","body":"There are some odd extra characters that I&#39;m seeing in your text after every word. Can you fix that?"}],"tags":[],"owner":{"account_id":3191887,"reputation":849,"user_id":2695953,"display_name":"Saj"},"comment_count":1,"down_vote_count":2,"up_vote_count":7,"is_accepted":false,"score":5,"last_activity_date":1381223919,"creation_date":1381209283,"answer_id":19239583,"question_id":19239471,"body_markdown":"The combination of data together with its methods is called an Abstract Data Type(ADT).\r\n\r\nA Java Interface is a way to specify ( but not implement) an ADT.\r\n\r\nIt specifies the names, parameters, and return types(ie, header) of the ADT methods.\r\n\r\nThe interface does not specify the data fields (except public constants), as that is an implementation detail.\r\n\r\nA Java Interface specifies the requirements of an ADT as a contract between the service provider ( class that implements the ADT) and the client (the user of the class).","title":"Abstract Data Type and Interface","body":"<p>The combination of data together with its methods is called an Abstract Data Type(ADT).</p>\n\n<p>A Java Interface is a way to specify ( but not implement) an ADT.</p>\n\n<p>It specifies the names, parameters, and return types(ie, header) of the ADT methods.</p>\n\n<p>The interface does not specify the data fields (except public constants), as that is an implementation detail.</p>\n\n<p>A Java Interface specifies the requirements of an ADT as a contract between the service provider ( class that implements the ADT) and the client (the user of the class).</p>\n"},{"comments":[{"owner":{"account_id":10307,"reputation":19872,"user_id":19405,"display_name":"nobody"},"score":0,"creation_date":1400089136,"post_id":19239981,"comment_id":36345036,"body_markdown":"Wasn&#39;t me, but maybe because http://stackoverflow.com/a/19239583/19405 (with an earlier timestamp) says the same thing but with more detail.","body":"Wasn&#39;t me, but maybe because <a href=\"http://stackoverflow.com/a/19239583/19405\">stackoverflow.com/a/19239583/19405</a> (with an earlier timestamp) says the same thing but with more detail."}],"tags":[],"owner":{"account_id":1867211,"reputation":162,"user_id":1690448,"display_name":"Sankar"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1543644553,"creation_date":1381211149,"answer_id":19239981,"question_id":19239471,"body_markdown":"The combination of data with its methods is called an Abstract Data Type (ADT).\r\n\r\nA Java Interface is a way to specify an Abstract Data Type (ADT).\r\n\r\nYou can declare a class as abstract when it contains zero or more abstract methods or When an interface is implemented to a class where not all methods are not implemented.","title":"Abstract Data Type and Interface","body":"<p>The combination of data with its methods is called an Abstract Data Type (ADT).</p>\n\n<p>A Java Interface is a way to specify an Abstract Data Type (ADT).</p>\n\n<p>You can declare a class as abstract when it contains zero or more abstract methods or When an interface is implemented to a class where not all methods are not implemented.</p>\n"},{"tags":[],"owner":{"account_id":1242916,"reputation":437,"user_id":1205066,"accept_rate":100,"display_name":"Sergey"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1399974440,"creation_date":1399974440,"answer_id":23627908,"question_id":19239471,"body_markdown":"Try to think about it like this:\r\n\r\n - Java interface is a type, which boils down to a **set of method signatures**. Any type, willing to be referenced as interface must provide implementation for these signatures. In reality, there is no behaviour contract. Your implementation can do nothing and still be &#39;implementing&#39; an interface.\r\n\r\n - Java abstract class is a type, with **partially specified behaviour** whose internal implementation for some reason must be specified in his inheritor. This class does have behaviour, which can be redefined/specified in his inheritors.\r\n\r\n - ADT is a **set of expected behaviours**. You assume, that after calling `adt.remove(element)` you call `adt.get(element)` and receive `null`.\r\n\r\nThe answer to your question is: just an interface is not enough to be an ADT.\r\n\r\n - Everything, that **correctly implements** your interface `MyListADT&lt;T&gt;` is an ADT. Its external behaviour must conform the ADT concept. This means, that to be considered as ADT, your type must carry implementation, which results either in abstract class or a normal class. For example: `java.util.List&lt;T&gt;` is an interface for an ADT, but `java.util.ArrayList&lt;T&gt;` and `java.util.LinkedList&lt;T&gt;` are actually ADTs, because their actual behaviour does conform the ADT concept.","title":"Abstract Data Type and Interface","body":"<p>Try to think about it like this:</p>\n\n<ul>\n<li><p>Java interface is a type, which boils down to a <strong>set of method signatures</strong>. Any type, willing to be referenced as interface must provide implementation for these signatures. In reality, there is no behaviour contract. Your implementation can do nothing and still be 'implementing' an interface.</p></li>\n<li><p>Java abstract class is a type, with <strong>partially specified behaviour</strong> whose internal implementation for some reason must be specified in his inheritor. This class does have behaviour, which can be redefined/specified in his inheritors.</p></li>\n<li><p>ADT is a <strong>set of expected behaviours</strong>. You assume, that after calling <code>adt.remove(element)</code> you call <code>adt.get(element)</code> and receive <code>null</code>.</p></li>\n</ul>\n\n<p>The answer to your question is: just an interface is not enough to be an ADT.</p>\n\n<ul>\n<li>Everything, that <strong>correctly implements</strong> your interface <code>MyListADT&lt;T&gt;</code> is an ADT. Its external behaviour must conform the ADT concept. This means, that to be considered as ADT, your type must carry implementation, which results either in abstract class or a normal class. For example: <code>java.util.List&lt;T&gt;</code> is an interface for an ADT, but <code>java.util.ArrayList&lt;T&gt;</code> and <code>java.util.LinkedList&lt;T&gt;</code> are actually ADTs, because their actual behaviour does conform the ADT concept.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":4326511,"reputation":8441,"user_id":3533191,"accept_rate":62,"display_name":"Syam S"},"comment_count":0,"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1400065956,"creation_date":1400065956,"answer_id":23653021,"question_id":19239471,"body_markdown":"There seems to a confusion in this Q&amp;A. The question was about &quot;Abstract Data Type and Interface&quot; and most of the answers concetrating about &quot;Abstract Classes&quot;. \r\n\r\nThe terms &#39;abstract data type&#39; and abstract class refer to two entirely different concepts, although both of them use the word &#39;abstract&#39;. An abstract data type is a self-contained, user-defined type that bundles data with a set of related operations. It behaves in the same way as a built-in type does. However, it does not inherit from other classes, nor does it serve as the base for other derived classes. If you search about it in wiki you would see &quot;An abstract data type is defined as a mathematical model of the data objects that make up a data type as well as the functions that operate on these objects. There are no standard conventions for defining them. A broad division may be drawn between &quot;imperative&quot; and &quot;functional&quot; definition styles.&quot; For example, in Java we have List interface. It defines a data structure with set of method to operate on but wont provide any implementaion as such.\r\n\r\nIn contrast, an abstract class is anything but an abstract data type. An abstract class is a class that is declared abstract  &#39;it may or may not include abstract methods&#39;. Abstract classes cannot be instantiated, but they can be subclassed. It is not a data type. An abstract class is merely a skeletal interface, which specifies a set of services that its subclasses implement. Unfortunately, the distinction between the two concepts is often confused. Many people erroneously use the term abstract data type when they actually refer to an abstract class.\r\n\r\nIn my opinion Interfaces are Java&#39;s way of implementing &quot;Abstract Data type&quot;\r\n\r\nYou can read about &quot;[Abstract Data Type][1]&quot; in Wiki. In additiona to that if you want to know more about abstract data type in java you could refer this link, http://www.e-reading.ws/bookreader.php/138175/Abstract_Data_Types_in_Java.pdf, its really good. \r\n\r\nMost of you might be familiar with abstract classes, Still you could read about it from http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html\r\n\r\nTo add up to this confusions, Java 8 introduced something called &quot;[Default Methods][2]&quot;, by which we could actually give implementations for methods in interface. To eliminate that confusion you can refer this stackoverflow question https://stackoverflow.com/questions/19998454/interface-with-default-methods-vs-abstract-class-in-java-8\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Abstract_data_type\r\n  [2]: http://docs.oracle.com/javase/tutorial/java/IandI/defaultmethods.html","title":"Abstract Data Type and Interface","body":"<p>There seems to a confusion in this Q&amp;A. The question was about \"Abstract Data Type and Interface\" and most of the answers concetrating about \"Abstract Classes\". </p>\n\n<p>The terms 'abstract data type' and abstract class refer to two entirely different concepts, although both of them use the word 'abstract'. An abstract data type is a self-contained, user-defined type that bundles data with a set of related operations. It behaves in the same way as a built-in type does. However, it does not inherit from other classes, nor does it serve as the base for other derived classes. If you search about it in wiki you would see \"An abstract data type is defined as a mathematical model of the data objects that make up a data type as well as the functions that operate on these objects. There are no standard conventions for defining them. A broad division may be drawn between \"imperative\" and \"functional\" definition styles.\" For example, in Java we have List interface. It defines a data structure with set of method to operate on but wont provide any implementaion as such.</p>\n\n<p>In contrast, an abstract class is anything but an abstract data type. An abstract class is a class that is declared abstract  'it may or may not include abstract methods'. Abstract classes cannot be instantiated, but they can be subclassed. It is not a data type. An abstract class is merely a skeletal interface, which specifies a set of services that its subclasses implement. Unfortunately, the distinction between the two concepts is often confused. Many people erroneously use the term abstract data type when they actually refer to an abstract class.</p>\n\n<p>In my opinion Interfaces are Java's way of implementing \"Abstract Data type\"</p>\n\n<p>You can read about \"<a href=\"http://en.wikipedia.org/wiki/Abstract_data_type\" rel=\"noreferrer\">Abstract Data Type</a>\" in Wiki. In additiona to that if you want to know more about abstract data type in java you could refer this link, <a href=\"http://www.e-reading.ws/bookreader.php/138175/Abstract_Data_Types_in_Java.pdf\" rel=\"noreferrer\">http://www.e-reading.ws/bookreader.php/138175/Abstract_Data_Types_in_Java.pdf</a>, its really good. </p>\n\n<p>Most of you might be familiar with abstract classes, Still you could read about it from <a href=\"http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html\" rel=\"noreferrer\">http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html</a></p>\n\n<p>To add up to this confusions, Java 8 introduced something called \"<a href=\"http://docs.oracle.com/javase/tutorial/java/IandI/defaultmethods.html\" rel=\"noreferrer\">Default Methods</a>\", by which we could actually give implementations for methods in interface. To eliminate that confusion you can refer this stackoverflow question <a href=\"https://stackoverflow.com/questions/19998454/interface-with-default-methods-vs-abstract-class-in-java-8\">Interface with default methods vs Abstract class in Java 8</a></p>\n"},{"tags":[],"owner":{"account_id":4266152,"reputation":845,"user_id":3489227,"accept_rate":89,"display_name":"Paresh3489227"},"comment_count":0,"down_vote_count":3,"up_vote_count":3,"is_accepted":false,"score":0,"last_activity_date":1400131964,"creation_date":1400131964,"answer_id":23670017,"question_id":19239471,"body_markdown":"For more clearance.\r\nSyntax and examples\r\n\r\n**syntax of abstract class**\r\n\r\n    public abstract class MyAbstractClass  \r\n    {  \r\n        //code  \r\n        public abstract void method();      \r\n    } \r\n    \r\n**example of abstract class**\r\n\r\n    public abstract class Animal  \r\n    {  \r\n        abstract void walk();      \r\n    }  \r\n       \r\n    public class Dog extends Animal  \r\n    {  \r\n        void walk()  \r\n        {  \r\n             //Implementation is done here  \r\n        }  \r\n    }  \r\n\r\n\r\n----------\r\n\r\n\r\n**syntax of interface**\r\n\r\n    public interface NameOfInterface\r\n    {\r\n       //Any number of final, static fields\r\n       //Any number of abstract method declarations\\\r\n    }\r\n\r\n**example of interface**\r\n\r\n    interface Animal {\r\n    \r\n       public void eat();\r\n       public void travel();\r\n    }\r\n\r\n**implementing interface**\r\n\r\n    public class MammalInt implements Animal{\r\n    \r\n       public void eat(){\r\n          System.out.println(&quot;Mammal eats&quot;);\r\n       }\r\n    \r\n       public void travel(){\r\n          System.out.println(&quot;Mammal travels&quot;);\r\n       } \r\n    \r\n       public int noOfLegs(){\r\n          return 0;\r\n       }\r\n    \r\n       public static void main(String args[]){\r\n          MammalInt m = new MammalInt();\r\n          m.eat();\r\n          m.travel();\r\n       }\r\n    }\r\n\r\n**extending interface**\r\n\r\n    //Filename: Sports.java\r\n    public interface Sports\r\n    {\r\n       public void setHomeTeam(String name);\r\n       public void setVisitingTeam(String name);\r\n    }\r\n    \r\n    //Filename: Football.java\r\n    public interface Football extends Sports\r\n    {\r\n       public void homeTeamScored(int points);\r\n       public void visitingTeamScored(int points);\r\n       public void endOfQuarter(int quarter);\r\n    }\r\n\r\n    //Filename: Hockey.java\r\n\r\n    public interface Hockey extends Sports\r\n    {\r\n       public void homeGoalScored();\r\n       public void visitingGoalScored();\r\n       public void endOfPeriod(int period);\r\n       public void overtimePeriod(int ot);\r\n    }\r\n\r\n**extending multiple interfaces**\r\n\r\n    public interface Hockey extends Sports, Event\r\n\r\n**extends and implements Both** \r\n\r\n    interface A can extends interface B \r\n    class A can extends class B         \r\n    class A implements interface A   \r\n    class A extends class B implements interface A\r\n\r\n\r\n","title":"Abstract Data Type and Interface","body":"<p>For more clearance.\nSyntax and examples</p>\n\n<p><strong>syntax of abstract class</strong></p>\n\n<pre><code>public abstract class MyAbstractClass  \n{  \n    //code  \n    public abstract void method();      \n} \n</code></pre>\n\n<p><strong>example of abstract class</strong></p>\n\n<pre><code>public abstract class Animal  \n{  \n    abstract void walk();      \n}  \n\npublic class Dog extends Animal  \n{  \n    void walk()  \n    {  \n         //Implementation is done here  \n    }  \n}  \n</code></pre>\n\n<hr>\n\n<p><strong>syntax of interface</strong></p>\n\n<pre><code>public interface NameOfInterface\n{\n   //Any number of final, static fields\n   //Any number of abstract method declarations\\\n}\n</code></pre>\n\n<p><strong>example of interface</strong></p>\n\n<pre><code>interface Animal {\n\n   public void eat();\n   public void travel();\n}\n</code></pre>\n\n<p><strong>implementing interface</strong></p>\n\n<pre><code>public class MammalInt implements Animal{\n\n   public void eat(){\n      System.out.println(\"Mammal eats\");\n   }\n\n   public void travel(){\n      System.out.println(\"Mammal travels\");\n   } \n\n   public int noOfLegs(){\n      return 0;\n   }\n\n   public static void main(String args[]){\n      MammalInt m = new MammalInt();\n      m.eat();\n      m.travel();\n   }\n}\n</code></pre>\n\n<p><strong>extending interface</strong></p>\n\n<pre><code>//Filename: Sports.java\npublic interface Sports\n{\n   public void setHomeTeam(String name);\n   public void setVisitingTeam(String name);\n}\n\n//Filename: Football.java\npublic interface Football extends Sports\n{\n   public void homeTeamScored(int points);\n   public void visitingTeamScored(int points);\n   public void endOfQuarter(int quarter);\n}\n\n//Filename: Hockey.java\n\npublic interface Hockey extends Sports\n{\n   public void homeGoalScored();\n   public void visitingGoalScored();\n   public void endOfPeriod(int period);\n   public void overtimePeriod(int ot);\n}\n</code></pre>\n\n<p><strong>extending multiple interfaces</strong></p>\n\n<pre><code>public interface Hockey extends Sports, Event\n</code></pre>\n\n<p><strong>extends and implements Both</strong> </p>\n\n<pre><code>interface A can extends interface B \nclass A can extends class B         \nclass A implements interface A   \nclass A extends class B implements interface A\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1069438,"reputation":1413,"user_id":1069073,"accept_rate":96,"display_name":"Count"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1400155227,"creation_date":1400149892,"answer_id":23675695,"question_id":19239471,"body_markdown":"As per [wiki] &lt;http://en.wikipedia.org/wiki/Abstract_data_type&gt;\r\n\r\nIn computer science, an abstract data type (ADT) is a mathematical model for a certain class of data structures that have similar behavior; or for certain data types of one or more programming languages that have similar semantics. An abstract data type is defined indirectly, only by the operations that may be performed on it and by mathematical constraints on the effects (and possibly cost) of those operations.\r\n\r\n_For Java programming language_\r\n\r\nyou can take Java&#39;s List interface as an example. The interface doesn&#39;t explicitly define any behavior at all because there is no concrete List class. The interface only defines a set of methods that other classes (e.g. ArrayList and LinkedList) must implement in order to be considered a List.\r\n\r\n**but the bottom line is that it is a concept**","title":"Abstract Data Type and Interface","body":"<p>As per [wiki] <a href=\"http://en.wikipedia.org/wiki/Abstract_data_type\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Abstract_data_type</a></p>\n\n<p>In computer science, an abstract data type (ADT) is a mathematical model for a certain class of data structures that have similar behavior; or for certain data types of one or more programming languages that have similar semantics. An abstract data type is defined indirectly, only by the operations that may be performed on it and by mathematical constraints on the effects (and possibly cost) of those operations.</p>\n\n<p><em>For Java programming language</em></p>\n\n<p>you can take Java's List interface as an example. The interface doesn't explicitly define any behavior at all because there is no concrete List class. The interface only defines a set of methods that other classes (e.g. ArrayList and LinkedList) must implement in order to be considered a List.</p>\n\n<p><strong>but the bottom line is that it is a concept</strong></p>\n"}],"owner":{"account_id":2859264,"reputation":193,"user_id":2454830,"accept_rate":33,"display_name":"user2454830"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40130,"favorite_count":0,"down_vote_count":5,"up_vote_count":12,"accepted_answer_id":19239512,"answer_count":8,"score":7,"last_activity_date":1688703554,"creation_date":1381208654,"question_id":19239471,"body_markdown":"What is the difference between an abstract data type and an interface?\r\n\r\nFor Example We have a `ListADT`\r\n\r\n    interface MyListADT&lt;T&gt; {\r\n        void add(T var);\r\n        void add(T var,int pos);\r\n        void display();\r\n        T remove(int pos);\r\n        void clear();\r\n        boolean contains(Object o);\r\n    }\r\n\r\nWhere we are defining the ADT as an interface.","title":"Abstract Data Type and Interface","body":"<p>What is the difference between an abstract data type and an interface?</p>\n<p>For Example We have a <code>ListADT</code></p>\n<pre><code>interface MyListADT&lt;T&gt; {\n    void add(T var);\n    void add(T var,int pos);\n    void display();\n    T remove(int pos);\n    void clear();\n    boolean contains(Object o);\n}\n</code></pre>\n<p>Where we are defining the ADT as an interface.</p>\n"},{"tags":["java","url","https","download"],"comments":[{"owner":{"account_id":147778,"reputation":9734,"user_id":359134,"accept_rate":82,"display_name":"Chen Harel"},"score":0,"creation_date":1346255882,"post_id":12181843,"comment_id":16308716,"body_markdown":"Have a look here: http://stackoverflow.com/questions/2642777/trusting-all-certificates-using-httpclient-over-https","body":"Have a look here: <a href=\"http://stackoverflow.com/questions/2642777/trusting-all-certificates-using-httpclient-over-https\" title=\"trusting all certificates using httpclient over https\">stackoverflow.com/questions/2642777/&hellip;</a>"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1688703988,"post_id":12181843,"comment_id":135112280,"body_markdown":"If you change the URL to `https:` you must also change the port to 443.","body":"If you change the URL to <code>https:</code> you must also change the port to 443."}],"answers":[{"tags":[],"owner":{"account_id":1630934,"reputation":3623,"user_id":1505487,"accept_rate":40,"display_name":"Solubris"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1346257366,"creation_date":1346257366,"answer_id":12182376,"question_id":12181843,"body_markdown":"Looks like your problem could be with the proxy.  It should also support https.\r\nAlso, you should use HttpClient 4 for downloading the files, its a mature library for making http connections.","title":"Using Java To Download Files From a HTTPS URL","body":"<p>Looks like your problem could be with the proxy.  It should also support https.\nAlso, you should use HttpClient 4 for downloading the files, its a mature library for making http connections.</p>\n"},{"comments":[{"owner":{"account_id":954741,"reputation":418,"user_id":980256,"accept_rate":67,"display_name":"Chris"},"score":0,"creation_date":1346312520,"post_id":12184094,"comment_id":16325439,"body_markdown":"Philip thanks for taking the time to reply, it was the System.setProperty(&quot;https...  that got it.  I had been looking so hard this solution, so simple!!","body":"Philip thanks for taking the time to reply, it was the System.setProperty(&quot;https...  that got it.  I had been looking so hard this solution, so simple!!"}],"tags":[],"owner":{"account_id":211181,"reputation":6023,"user_id":463196,"accept_rate":78,"display_name":"Philip Tenn"},"comment_count":1,"down_vote_count":1,"up_vote_count":4,"is_accepted":true,"score":3,"last_activity_date":1346264520,"creation_date":1346264196,"answer_id":12184094,"question_id":12181843,"body_markdown":"You may be having certificate issues.  This is typically the problem I have encountered in the past when working with HTTPS connections in Java.  \r\n\r\nFirst, you should check and see if the URL to which you are attempting to connect has a signed certificate by a well-known trusted root CA, and is valid (not expired).  \r\n\r\nI would recommend opening the URL in your browser and checking the certificate information.  \r\n\r\n\r\nJust a FYI, there may be a disconnect between the Trusted Root CAs recognized by your browser and those recognized by Java.  Here is another Stackoverflow question about how to get those recognized by Java: https://stackoverflow.com/questions/3508050/how-can-i-get-a-list-of-trusted-root-certificates-in-java\r\n\r\n\r\nIf this is a self-signed certificate, then there are hoops you will need to jump through regarding importing it into and using a local Keystore.  There are numerous sites and blogs that guide you through doing this, here is one such blog (not mine): [Adding self-signed https certificates to java keystore](http://www.chrissearle.org/node/260)\r\n\r\nAlso, while you are testing with the browser, this will help you verify that there are no proxy issues.  You should definitely check your browser&#39;s settings to determine whether or not you are going through a proxy server.\r\n\r\nYou should definitely look into using HttpClient instead of java.net.URL.  Here is the [Apache page for HttpClient 4.2.1](http://hc.apache.org/httpcomponents-client-ga/index.html).  \r\n\r\nFinally, if you are looking to do a file transfer via HTTP or HTTPS, you may want to consider WebDAV.  \r\n\r\nI have used Jakarta Slide WebDAV Client for this in the past.  Unfortunately, it looks like [Slide is retired at this point](http://jakarta.apache.org/slide/), but there are alternatives you can find with a little bit of searching.  \r\n\r\n**ADDITION** \r\n\r\nI copied down your source code sample and looked at it more closely.  Looks like you set properties for http, but not https.\r\n\r\nHTTPS has separate properties:\r\n \r\n - https.proxyHost\r\n - https.proxyPort\r\n \r\nTry setting:\r\n\r\n    System.setProperty(&quot;https.proxyHost&quot;,&quot;trproxy.rwe.com&quot;) ; \r\n    System.setProperty(&quot;https.proxyPort&quot;, &quot;443&quot;) ; \r\n\r\nLook at section 2.2 on [Oracle&#39;s Java Networking and Proxies](http://docs.oracle.com/javase/6/docs/technotes/guides/net/proxies.html).\r\n\r\nhttp://docs.oracle.com/javase/6/docs/technotes/guides/net/proxies.html","title":"Using Java To Download Files From a HTTPS URL","body":"<p>You may be having certificate issues.  This is typically the problem I have encountered in the past when working with HTTPS connections in Java.  </p>\n\n<p>First, you should check and see if the URL to which you are attempting to connect has a signed certificate by a well-known trusted root CA, and is valid (not expired).  </p>\n\n<p>I would recommend opening the URL in your browser and checking the certificate information.  </p>\n\n<p>Just a FYI, there may be a disconnect between the Trusted Root CAs recognized by your browser and those recognized by Java.  Here is another Stackoverflow question about how to get those recognized by Java: <a href=\"https://stackoverflow.com/questions/3508050/how-can-i-get-a-list-of-trusted-root-certificates-in-java\">How can I get a list of trusted root certificates in Java?</a></p>\n\n<p>If this is a self-signed certificate, then there are hoops you will need to jump through regarding importing it into and using a local Keystore.  There are numerous sites and blogs that guide you through doing this, here is one such blog (not mine): <a href=\"http://www.chrissearle.org/node/260\" rel=\"nofollow noreferrer\">Adding self-signed https certificates to java keystore</a></p>\n\n<p>Also, while you are testing with the browser, this will help you verify that there are no proxy issues.  You should definitely check your browser's settings to determine whether or not you are going through a proxy server.</p>\n\n<p>You should definitely look into using HttpClient instead of java.net.URL.  Here is the <a href=\"http://hc.apache.org/httpcomponents-client-ga/index.html\" rel=\"nofollow noreferrer\">Apache page for HttpClient 4.2.1</a>.  </p>\n\n<p>Finally, if you are looking to do a file transfer via HTTP or HTTPS, you may want to consider WebDAV.  </p>\n\n<p>I have used Jakarta Slide WebDAV Client for this in the past.  Unfortunately, it looks like <a href=\"http://jakarta.apache.org/slide/\" rel=\"nofollow noreferrer\">Slide is retired at this point</a>, but there are alternatives you can find with a little bit of searching.  </p>\n\n<p><strong>ADDITION</strong> </p>\n\n<p>I copied down your source code sample and looked at it more closely.  Looks like you set properties for http, but not https.</p>\n\n<p>HTTPS has separate properties:</p>\n\n<ul>\n<li>https.proxyHost</li>\n<li>https.proxyPort</li>\n</ul>\n\n<p>Try setting:</p>\n\n<pre><code>System.setProperty(\"https.proxyHost\",\"trproxy.rwe.com\") ; \nSystem.setProperty(\"https.proxyPort\", \"443\") ; \n</code></pre>\n\n<p>Look at section 2.2 on <a href=\"http://docs.oracle.com/javase/6/docs/technotes/guides/net/proxies.html\" rel=\"nofollow noreferrer\">Oracle's Java Networking and Proxies</a>.</p>\n\n<p><a href=\"http://docs.oracle.com/javase/6/docs/technotes/guides/net/proxies.html\" rel=\"nofollow noreferrer\">http://docs.oracle.com/javase/6/docs/technotes/guides/net/proxies.html</a></p>\n"},{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1688704050,"post_id":12184598,"comment_id":135112285,"body_markdown":"No. He should be setting `httpx.proxyHost` and `https.proxyPort`, the latter to 443. Doing what you said would break plaintext HTTP.","body":"No. He should be setting <code>httpx.proxyHost</code> and <code>https.proxyPort</code>, the latter to 443. Doing what you said would break plaintext HTTP."}],"tags":[],"owner":{"account_id":484819,"reputation":5634,"user_id":900743,"accept_rate":64,"display_name":"Peter"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1346266164,"creation_date":1346266164,"answer_id":12184598,"question_id":12181843,"body_markdown":"`System.setProperty(&quot;http.proxyPort&quot;, &quot;80&quot;)` should be `System.setProperty(&quot;http.proxyPort&quot;, &quot;443&quot;)` ","title":"Using Java To Download Files From a HTTPS URL","body":"<p><code>System.setProperty(\"http.proxyPort\", \"80\")</code> should be <code>System.setProperty(\"http.proxyPort\", \"443\")</code> </p>\n"}],"owner":{"account_id":954741,"reputation":418,"user_id":980256,"accept_rate":67,"display_name":"Chris"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10897,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"accepted_answer_id":12184094,"answer_count":3,"score":4,"last_activity_date":1688703479,"creation_date":1346255522,"question_id":12181843,"body_markdown":"I have written some code to download a file from a website.  The code works fine against a test http url.  As soon as I then change the URL to the https, I get a connect time out.\r\n\r\n    System.setProperty(&quot;http.proxyHost&quot;,&quot;trproxy.rwe.com&quot;) ;\r\n    System.setProperty(&quot;http.proxyPort&quot;, &quot;80&quot;) ;\r\n    Authenticator.setDefault (new MyAuthenticator(&quot;USER&quot;,&quot;PW&quot;));\r\n    //URL url = new URL(&quot;http&quot;,&quot;www.treasury.gov&quot;,80,&quot;/ofac/downloads/sdn.csv&quot;,new    sun.net.www.protocol.http.Handler());  THIS WORKS\r\n    URL url = new URL(&quot;https&quot;, &quot;downloads.elexonportal.co.uk&quot;,443,&quot;/bmradataarchive/download?key=MYKEY&amp;filename=&quot;+filename,new sun.net.www.protocol.https.Handler());\r\n    url.openConnection();\r\n    InputStream reader = url.openStream();\r\n    FileOutputStream writer = new FileOutputStream(&quot;C:/downloads/&quot;+filename);\r\n\r\nIf I copy the https url into a browser, I am asked where I wish to save the file and it works fine.  Any help greatly appreciated.  I have tried [this](https://stackoverflow.com/questions/10135074/download-file-from-https-server-using-java)   but did not work","title":"Using Java To Download Files From a HTTPS URL","body":"<p>I have written some code to download a file from a website.  The code works fine against a test http url.  As soon as I then change the URL to the https, I get a connect time out.</p>\n<pre><code>System.setProperty(&quot;http.proxyHost&quot;,&quot;trproxy.rwe.com&quot;) ;\nSystem.setProperty(&quot;http.proxyPort&quot;, &quot;80&quot;) ;\nAuthenticator.setDefault (new MyAuthenticator(&quot;USER&quot;,&quot;PW&quot;));\n//URL url = new URL(&quot;http&quot;,&quot;www.treasury.gov&quot;,80,&quot;/ofac/downloads/sdn.csv&quot;,new    sun.net.www.protocol.http.Handler());  THIS WORKS\nURL url = new URL(&quot;https&quot;, &quot;downloads.elexonportal.co.uk&quot;,443,&quot;/bmradataarchive/download?key=MYKEY&amp;filename=&quot;+filename,new sun.net.www.protocol.https.Handler());\nurl.openConnection();\nInputStream reader = url.openStream();\nFileOutputStream writer = new FileOutputStream(&quot;C:/downloads/&quot;+filename);\n</code></pre>\n<p>If I copy the https url into a browser, I am asked where I wish to save the file and it works fine.  Any help greatly appreciated.  I have tried <a href=\"https://stackoverflow.com/questions/10135074/download-file-from-https-server-using-java\">this</a>   but did not work</p>\n"},{"tags":["java","arrays","properties-file"],"comments":[{"owner":{"account_id":200733,"reputation":4871,"user_id":446747,"accept_rate":75,"display_name":"josh.trow"},"score":0,"creation_date":1312999145,"post_id":7015491,"comment_id":8377601,"body_markdown":"I&#39;m not totally clear on what you are doing, but does simply putting the properties into a Map work? It allows to you do `if(foo.has(&#39;filename&#39;))`, and to store/load, you just (de)serialize it...","body":"I&#39;m not totally clear on what you are doing, but does simply putting the properties into a Map work? It allows to you do <code>if(foo.has(&#39;filename&#39;))</code>, and to store/load, you just (de)serialize it..."},{"owner":{"account_id":40248,"reputation":56308,"user_id":116614,"accept_rate":92,"display_name":"mellamokb"},"score":0,"creation_date":1312999159,"post_id":7015491,"comment_id":8377602,"body_markdown":"Can you create classes containing every property that you might use in the .properties file, or are some properties going to be dynamic?","body":"Can you create classes containing every property that you might use in the .properties file, or are some properties going to be dynamic?"},{"owner":{"account_id":776254,"reputation":1263,"user_id":817676,"accept_rate":80,"display_name":"yep"},"score":0,"creation_date":1312999548,"post_id":7015491,"comment_id":8377699,"body_markdown":"@mellamokb - I&#39;ve already got my class which holds filename + expire attrs, and methods, and I create new objects out of it.  Are you suggesting maybe adding in a &quot;type&quot; attribute to it, to hold the &quot;foo&quot;s and &quot;bar&quot;s?   ... Could work, i&#39;ll hack at it...","body":"@mellamokb - I&#39;ve already got my class which holds filename + expire attrs, and methods, and I create new objects out of it.  Are you suggesting maybe adding in a &quot;type&quot; attribute to it, to hold the &quot;foo&quot;s and &quot;bar&quot;s?   ... Could work, i&#39;ll hack at it..."},{"owner":{"account_id":11944,"reputation":7660,"user_id":23271,"display_name":"Skip Head"},"score":1,"creation_date":1313000359,"post_id":7015491,"comment_id":8377928,"body_markdown":"I think a data file (like a .csv) would be easier. Properties are not really designed for this.","body":"I think a data file (like a .csv) would be easier. Properties are not really designed for this."}],"answers":[{"comments":[{"owner":{"account_id":776254,"reputation":1263,"user_id":817676,"accept_rate":80,"display_name":"yep"},"score":0,"creation_date":1312999642,"post_id":7015573,"comment_id":8377727,"body_markdown":"I&#39;m trying to avoid that, as in the very near forseeable future, the fields will contain `, ; :`","body":"I&#39;m trying to avoid that, as in the very near forseeable future, the fields will contain <code>, ; :</code>"},{"owner":{"account_id":2520937,"reputation":344,"user_id":2191330,"display_name":"Warren Reilly"},"score":0,"creation_date":1405956647,"post_id":7015573,"comment_id":38623300,"body_markdown":"Thanks Venu K. This might not be what yep needed but it is what I needed.","body":"Thanks Venu K. This might not be what yep needed but it is what I needed."},{"owner":{"account_id":4514344,"reputation":31626,"user_id":3669624,"accept_rate":100,"display_name":"cdk"},"score":0,"creation_date":1522425130,"post_id":7015573,"comment_id":86162431,"body_markdown":"Good suggestion, this approach is quite helpful, thank you.","body":"Good suggestion, this approach is quite helpful, thank you."}],"tags":[],"owner":{"account_id":319229,"reputation":169,"user_id":636873,"display_name":"Venu K"},"comment_count":3,"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1312999405,"creation_date":1312999405,"answer_id":7015573,"question_id":7015491,"body_markdown":"Didn&#39;t exactly get your intent.\r\nDo check Apache Commons configuration library http://commons.apache.org/configuration/\r\n\r\nYou can have multiple values against a key as in \r\nkey=value1,value2 \r\nand you can read this into an array as &lt;code&gt;configuration.getAsStringArray(&quot;key&quot;)&lt;/code&gt;","title":"How to store an array in a Java properties file","body":"<p>Didn't exactly get your intent.\nDo check Apache Commons configuration library <a href=\"http://commons.apache.org/configuration/\">http://commons.apache.org/configuration/</a></p>\n\n<p>You can have multiple values against a key as in \nkey=value1,value2 \nand you can read this into an array as <code>configuration.getAsStringArray(\"key\")</code></p>\n"},{"comments":[{"owner":{"account_id":60737,"reputation":15904,"user_id":181336,"display_name":"Adriaan Koster"},"score":7,"creation_date":1313001614,"post_id":7015846,"comment_id":8378301,"body_markdown":"Use XML or deal with the pain","body":"Use XML or deal with the pain"},{"owner":{"account_id":776254,"reputation":1263,"user_id":817676,"accept_rate":80,"display_name":"yep"},"score":1,"creation_date":1313414899,"post_id":7015846,"comment_id":8452121,"body_markdown":"I abandoned that properties format and used xml. Much cleaner.  More extensible for the future.  Thank you for pushing me in the right direction.","body":"I abandoned that properties format and used xml. Much cleaner.  More extensible for the future.  Thank you for pushing me in the right direction."},{"owner":{"account_id":2547429,"reputation":909,"user_id":2211943,"display_name":"cabbagery"},"score":2,"creation_date":1369333710,"post_id":7015846,"comment_id":24075051,"body_markdown":"God, I love this answer, but unfortunately, some of us are strapped by bureaucracy and/or &#39;managerial limitations&#39; which demand the use of .properties instead of .xml. I won&#39;t describe my current position, but, you know. (Also, necromancy.)","body":"God, I love this answer, but unfortunately, some of us are strapped by bureaucracy and/or &#39;managerial limitations&#39; which demand the use of .properties instead of .xml. I won&#39;t describe my current position, but, you know. (Also, necromancy.)"},{"owner":{"display_name":"user1441149"},"score":7,"creation_date":1424597842,"post_id":7015846,"comment_id":45609126,"body_markdown":"I don&#39;t agree. I use both JSON and XML. As long as there is no &quot;real&quot; standard for json schemes I prefer XML for complex configurations. When you work on something as a team, and you&#39;re burdened with the maintaince and ongoing development based on it than a proper schema definition is priceless. No constraints means alot of headaches and discussion about how to do stuff. Or even worse, no discussion , anyone will implement whatever they want that fits their needs and you will quickly end up in a configuration hell.  Autocompletion on somebody else his configuration files is also nice to have.","body":"I don&#39;t agree. I use both JSON and XML. As long as there is no &quot;real&quot; standard for json schemes I prefer XML for complex configurations. When you work on something as a team, and you&#39;re burdened with the maintaince and ongoing development based on it than a proper schema definition is priceless. No constraints means alot of headaches and discussion about how to do stuff. Or even worse, no discussion , anyone will implement whatever they want that fits their needs and you will quickly end up in a configuration hell.  Autocompletion on somebody else his configuration files is also nice to have."},{"owner":{"account_id":101889,"reputation":5685,"user_id":273826,"accept_rate":100,"display_name":"Hans Westerbeek"},"score":10,"creation_date":1513005678,"post_id":7015846,"comment_id":82472890,"body_markdown":"Json is so nulties, use Yaml!","body":"Json is so nulties, use Yaml!"}],"tags":[],"owner":{"account_id":193947,"reputation":1538,"user_id":435978,"accept_rate":88,"display_name":"BigMac66"},"comment_count":5,"down_vote_count":2,"up_vote_count":15,"is_accepted":true,"score":13,"last_activity_date":1313000822,"creation_date":1313000822,"answer_id":7015846,"question_id":7015491,"body_markdown":"Either define a delimiter that will not be a potential value or learn to use XML.\r\n\r\nIf you still insist on using properties use one of the methods that will return a list of all keys.  Your key appears to have three parts a group identifier (foo, bar) an index (1, 2) and then an element name (filename, expire).  Get all the keys break them into their component parts. Create a List for each type of identifier, when processing the list use the identifier to determine which List to add to.  Create you paired elements as you said and simply add to the list!  If the index order is important either add that as a field to your paired elements or sort the keys before processing.","title":"How to store an array in a Java properties file","body":"<p>Either define a delimiter that will not be a potential value or learn to use XML.</p>\n\n<p>If you still insist on using properties use one of the methods that will return a list of all keys.  Your key appears to have three parts a group identifier (foo, bar) an index (1, 2) and then an element name (filename, expire).  Get all the keys break them into their component parts. Create a List for each type of identifier, when processing the list use the identifier to determine which List to add to.  Create you paired elements as you said and simply add to the list!  If the index order is important either add that as a field to your paired elements or sort the keys before processing.</p>\n"},{"tags":[],"owner":{"account_id":311516,"reputation":3096,"user_id":625146,"accept_rate":100,"display_name":"Omnaest"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1313001730,"creation_date":1313001730,"answer_id":7016012,"question_id":7015491,"body_markdown":"As user &#39;Skip Head&#39; already pointed out, csv or a any table file format would be a better fitt in your case.\r\n\r\nIf it is an option for you, maybe this [Table][1] implementation might interest you.\r\n\r\n\r\n  [1]: http://code.google.com/p/utils-apl-derived/wiki/Table","title":"How to store an array in a Java properties file","body":"<p>As user 'Skip Head' already pointed out, csv or a any table file format would be a better fitt in your case.</p>\n\n<p>If it is an option for you, maybe this <a href=\"http://code.google.com/p/utils-apl-derived/wiki/Table\" rel=\"nofollow\">Table</a> implementation might interest you.</p>\n"},{"tags":[],"owner":{"account_id":27992,"reputation":3290,"user_id":74337,"accept_rate":62,"display_name":"Jack Cox"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1313002052,"creation_date":1313002052,"answer_id":7016090,"question_id":7015491,"body_markdown":"I highly recommend using Apache Commons (http://commons.apache.org/configuration/).  It has the ability to use an XML file as a configuration file.  Using an XML structure makes it easy to represent arrays as lists of values rather than specially numbered properties.  ","title":"How to store an array in a Java properties file","body":"<p>I highly recommend using Apache Commons (http://commons.apache.org/configuration/).  It has the ability to use an XML file as a configuration file.  Using an XML structure makes it easy to represent arrays as lists of values rather than specially numbered properties.  </p>\n"},{"comments":[{"owner":{"account_id":1940799,"reputation":81,"user_id":1747051,"display_name":"Sairam"},"score":1,"creation_date":1464303496,"post_id":11321542,"comment_id":62443177,"body_markdown":"Simple and easy. Perfect","body":"Simple and easy. Perfect"},{"owner":{"account_id":4416215,"reputation":4087,"user_id":3597746,"accept_rate":92,"display_name":"Ammad"},"score":0,"creation_date":1503608303,"post_id":11321542,"comment_id":78700513,"body_markdown":"But problem with this approach is that data in properties file should be in one line.","body":"But problem with this approach is that data in properties file should be in one line."}],"tags":[],"owner":{"account_id":160573,"reputation":3912,"user_id":380733,"display_name":"Abs"},"comment_count":2,"down_vote_count":0,"up_vote_count":46,"is_accepted":false,"score":46,"last_activity_date":1349931114,"creation_date":1341367410,"answer_id":11321542,"question_id":7015491,"body_markdown":"I can suggest using delimiters and using the \r\n\r\n`String.split(delimiter)`\r\n\r\nExample properties file:\r\n\r\n***MON=0800#Something#Something1, Something2***\r\n\r\n    prop.load(new FileInputStream(&quot;\\\\\\\\Myseccretnetwork\\\\Project\\\\props.properties&quot;));\r\n    String[]values = prop.get(&quot;MON&quot;).toString().split(&quot;#&quot;);\r\n\t\r\nHope that helps","title":"How to store an array in a Java properties file","body":"<p>I can suggest using delimiters and using the </p>\n\n<p><code>String.split(delimiter)</code></p>\n\n<p>Example properties file:</p>\n\n<p><em><strong>MON=0800#Something#Something1, Something2</em></strong></p>\n\n<pre><code>prop.load(new FileInputStream(\"\\\\\\\\Myseccretnetwork\\\\Project\\\\props.properties\"));\nString[]values = prop.get(\"MON\").toString().split(\"#\");\n</code></pre>\n\n<p>Hope that helps</p>\n"},{"tags":[],"owner":{"account_id":2047499,"reputation":1845,"user_id":1827276,"accept_rate":56,"display_name":"boly38"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1404468772,"creation_date":1404468772,"answer_id":24571951,"question_id":7015491,"body_markdown":"here is another way to do by implementing yourself the mechanism.\r\nhere we consider that the array should start with 0 and would have no hole between indice \r\n\r\n    \r\n        /**\r\n         * get a string property&#39;s value\r\n         * @param propKey property key\r\n         * @param defaultValue default value if the property is not found\r\n         * @return value\r\n         */\r\n        public static String getSystemStringProperty(String propKey,\r\n                String defaultValue) {\r\n            String strProp = System.getProperty(propKey);\r\n            if (strProp == null) {\r\n                strProp = defaultValue;\r\n            }\r\n            return strProp;\r\n        }\r\n    \r\n        /**\r\n         * internal recursive method to get string properties (array)\r\n         * @param curResult current result\r\n         * @param paramName property key prefix\r\n         * @param i current indice\r\n         * @return array of property&#39;s values\r\n         */\r\n        private static List&lt;String&gt; getSystemStringProperties(List&lt;String&gt; curResult, String paramName, int i) {\r\n            String paramIValue = getSystemStringProperty(paramName + &quot;.&quot; + String.valueOf(i), null);\r\n            if (paramIValue == null) {\r\n                return curResult;\r\n            }\r\n            curResult.add(paramIValue);\r\n            return getSystemStringProperties(curResult, paramName, i+1);\r\n        }\r\n    \r\n        /**\r\n         * get the values from a property key prefix\r\n         * @param paramName property key prefix\r\n         * @return string array of values\r\n         */\r\n        public static String[] getSystemStringProperties(\r\n                String paramName) {\r\n            List&lt;String&gt; stringProperties = getSystemStringProperties(new ArrayList&lt;String&gt;(), paramName, 0);\r\n            return stringProperties.toArray(new String[stringProperties.size()]);\r\n        }\r\n\r\nHere is a way to test :\r\n\r\n        @Test\r\n        public void should_be_able_to_get_array_of_properties() {\r\n            System.setProperty(&quot;my.parameter.0&quot;, &quot;ooO&quot;);\r\n            System.setProperty(&quot;my.parameter.1&quot;, &quot;oO&quot;);\r\n            System.setProperty(&quot;my.parameter.2&quot;, &quot;boo&quot;);\r\n            // WHEN \r\n            String[] pluginParams = PropertiesHelper.getSystemStringProperties(&quot;my.parameter&quot;);\r\n            \r\n            // THEN\r\n            assertThat(pluginParams).isNotNull();\r\n            assertThat(pluginParams).containsExactly(&quot;ooO&quot;,&quot;oO&quot;,&quot;boo&quot;);\r\n            System.out.println(pluginParams[0].toString());\r\n        }\r\n\r\nhope this helps\r\n\r\nand all remarks are welcome..","title":"How to store an array in a Java properties file","body":"<p>here is another way to do by implementing yourself the mechanism.\nhere we consider that the array should start with 0 and would have no hole between indice </p>\n\n<pre><code>    /**\n     * get a string property's value\n     * @param propKey property key\n     * @param defaultValue default value if the property is not found\n     * @return value\n     */\n    public static String getSystemStringProperty(String propKey,\n            String defaultValue) {\n        String strProp = System.getProperty(propKey);\n        if (strProp == null) {\n            strProp = defaultValue;\n        }\n        return strProp;\n    }\n\n    /**\n     * internal recursive method to get string properties (array)\n     * @param curResult current result\n     * @param paramName property key prefix\n     * @param i current indice\n     * @return array of property's values\n     */\n    private static List&lt;String&gt; getSystemStringProperties(List&lt;String&gt; curResult, String paramName, int i) {\n        String paramIValue = getSystemStringProperty(paramName + \".\" + String.valueOf(i), null);\n        if (paramIValue == null) {\n            return curResult;\n        }\n        curResult.add(paramIValue);\n        return getSystemStringProperties(curResult, paramName, i+1);\n    }\n\n    /**\n     * get the values from a property key prefix\n     * @param paramName property key prefix\n     * @return string array of values\n     */\n    public static String[] getSystemStringProperties(\n            String paramName) {\n        List&lt;String&gt; stringProperties = getSystemStringProperties(new ArrayList&lt;String&gt;(), paramName, 0);\n        return stringProperties.toArray(new String[stringProperties.size()]);\n    }\n</code></pre>\n\n<p>Here is a way to test :</p>\n\n<pre><code>    @Test\n    public void should_be_able_to_get_array_of_properties() {\n        System.setProperty(\"my.parameter.0\", \"ooO\");\n        System.setProperty(\"my.parameter.1\", \"oO\");\n        System.setProperty(\"my.parameter.2\", \"boo\");\n        // WHEN \n        String[] pluginParams = PropertiesHelper.getSystemStringProperties(\"my.parameter\");\n\n        // THEN\n        assertThat(pluginParams).isNotNull();\n        assertThat(pluginParams).containsExactly(\"ooO\",\"oO\",\"boo\");\n        System.out.println(pluginParams[0].toString());\n    }\n</code></pre>\n\n<p>hope this helps</p>\n\n<p>and all remarks are welcome..</p>\n"},{"tags":[],"owner":{"account_id":1645512,"reputation":173,"user_id":1517117,"display_name":"somtomas"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1469111011,"creation_date":1469111011,"answer_id":38506867,"question_id":7015491,"body_markdown":"I have custom loading. Properties must be defined as:\r\n\r\n    key.0=value0\r\n    key.1=value1\r\n    ...\r\nCustom loading:\r\n\r\n\t/** Return array from properties file. Array must be defined as &quot;key.0=value0&quot;, &quot;key.1=value1&quot;, ... */\r\n    public List&lt;String&gt; getSystemStringProperties(String key) {\r\n    \t\r\n    \t// result list\r\n        List&lt;String&gt; result = new LinkedList&lt;&gt;();\r\n        \r\n        // defining variable for assignment in loop condition part\r\n        String value;\r\n        \r\n        // next value loading defined in condition part\r\n        for(int i = 0; (value = YOUR_PROPERTY_OBJECT.getProperty(key + &quot;.&quot; + i)) != null; i++) {\r\n        \tresult.add(value);\r\n        }\r\n        \r\n        // return\r\n        return result;\r\n    }","title":"How to store an array in a Java properties file","body":"<p>I have custom loading. Properties must be defined as:</p>\n\n<pre><code>key.0=value0\nkey.1=value1\n...\n</code></pre>\n\n<p>Custom loading:</p>\n\n<pre><code>/** Return array from properties file. Array must be defined as \"key.0=value0\", \"key.1=value1\", ... */\npublic List&lt;String&gt; getSystemStringProperties(String key) {\n\n    // result list\n    List&lt;String&gt; result = new LinkedList&lt;&gt;();\n\n    // defining variable for assignment in loop condition part\n    String value;\n\n    // next value loading defined in condition part\n    for(int i = 0; (value = YOUR_PROPERTY_OBJECT.getProperty(key + \".\" + i)) != null; i++) {\n        result.add(value);\n    }\n\n    // return\n    return result;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":4,"creation_date":1527638908,"post_id":48821692,"comment_id":88198412,"body_markdown":"Although I love this answer I must lament that java doesn&#39;t have built-in YAML processing last time I checked.","body":"Although I love this answer I must lament that java doesn&#39;t have built-in YAML processing last time I checked."},{"owner":{"account_id":4548484,"reputation":345,"user_id":3694297,"display_name":"Sangeeth"},"score":2,"creation_date":1527747680,"post_id":48821692,"comment_id":88245423,"body_markdown":"Yes, but if in case using Spring boot application, it already packed with &#39;Snakeyaml&#39; dependency which is a YAML processor.","body":"Yes, but if in case using Spring boot application, it already packed with &#39;Snakeyaml&#39; dependency which is a YAML processor."},{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":0,"creation_date":1527785508,"post_id":48821692,"comment_id":88268403,"body_markdown":"That&#39;s actually pretty good to know.  We are quite restricted as to which software we can use but we just got Spring Boot approved.  Thanks for the info!","body":"That&#39;s actually pretty good to know.  We are quite restricted as to which software we can use but we just got Spring Boot approved.  Thanks for the info!"}],"tags":[],"owner":{"account_id":4548484,"reputation":345,"user_id":3694297,"display_name":"Sangeeth"},"comment_count":3,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1533634930,"creation_date":1518764869,"answer_id":48821692,"question_id":7015491,"body_markdown":"**Use *YAML* files for properties, this supports properties as an array.**\r\n\r\nQuick glance about YAML:\r\n\r\n&gt; A superset of JSON, it can do everything JSON can + more\r\n\r\n1. Simple to read\r\n2. Long properties into multiline values\r\n3. Supports comments\r\n4. **Properties as Array**\r\n5. YAML Validation\r\n\r\n","title":"How to store an array in a Java properties file","body":"<p><strong>Use <em>YAML</em> files for properties, this supports properties as an array.</strong></p>\n\n<p>Quick glance about YAML:</p>\n\n<blockquote>\n  <p>A superset of JSON, it can do everything JSON can + more</p>\n</blockquote>\n\n<ol>\n<li>Simple to read</li>\n<li>Long properties into multiline values</li>\n<li>Supports comments</li>\n<li><strong>Properties as Array</strong></li>\n<li>YAML Validation</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":3196795,"reputation":490,"user_id":2699805,"accept_rate":40,"display_name":"qwert_ukg"},"comment_count":0,"down_vote_count":7,"up_vote_count":1,"is_accepted":false,"score":-6,"last_activity_date":1590047955,"creation_date":1590047955,"answer_id":61929875,"question_id":7015491,"body_markdown":"Actually all answers are wrong\r\n\r\nEasy: `foo.[0]filename`","title":"How to store an array in a Java properties file","body":"<p>Actually all answers are wrong</p>\n\n<p>Easy: <code>foo.[0]filename</code></p>\n"},{"tags":[],"owner":{"account_id":231117,"reputation":8541,"user_id":495157,"accept_rate":40,"display_name":"JGFMK"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1633096683,"creation_date":1633096683,"answer_id":69407127,"question_id":7015491,"body_markdown":"I&#39;d suggest having the properties file, reference a CSV file.\r\nThen parse the CSV file into a collection/array etc instead.\r\nProperties file seems wrong fit for this kind of data.","title":"How to store an array in a Java properties file","body":"<p>I'd suggest having the properties file, reference a CSV file.\nThen parse the CSV file into a collection/array etc instead.\nProperties file seems wrong fit for this kind of data.</p>\n"}],"owner":{"account_id":776254,"reputation":1263,"user_id":817676,"accept_rate":80,"display_name":"yep"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":147947,"favorite_count":0,"down_vote_count":0,"up_vote_count":64,"accepted_answer_id":7015846,"answer_count":10,"score":64,"last_activity_date":1688701997,"creation_date":1312998961,"question_id":7015491,"body_markdown":"I&#39;m currently making a .properties file that needs to be loaded and transformed into an array.  \r\nThere is a possibility of anywhere from 0-25 of each of the property keys to exist.  \r\n\r\nI tried a few implementations but I&#39;m just stuck at doing this cleanly.  \r\nAnyone have any ideas?\r\n\r\n\r\n    foo.1.filename=foo.txt\r\n    foo.1.expire=200\r\n    \r\n    foo.2.filename=foo2.txt\r\n    foo.2.expire=10\r\n    \r\n    etc more foo&#39;s\r\n    \r\n    bar.1.filename=bar.txt\r\n    bar.1.expire=100\r\n\r\nWhere I&#39;ll assemble the filename/expire pairings into a data object, as part of an array for each parent property element like `foo[myobject]`\r\n\r\nFormatting of the properties file can change, I&#39;m open to ideas.","title":"How to store an array in a Java properties file","body":"<p>I'm currently making a .properties file that needs to be loaded and transformed into an array.<br />\nThere is a possibility of anywhere from 0-25 of each of the property keys to exist.</p>\n<p>I tried a few implementations but I'm just stuck at doing this cleanly.<br />\nAnyone have any ideas?</p>\n<pre><code>foo.1.filename=foo.txt\nfoo.1.expire=200\n\nfoo.2.filename=foo2.txt\nfoo.2.expire=10\n\netc more foo's\n\nbar.1.filename=bar.txt\nbar.1.expire=100\n</code></pre>\n<p>Where I'll assemble the filename/expire pairings into a data object, as part of an array for each parent property element like <code>foo[myobject]</code></p>\n<p>Formatting of the properties file can change, I'm open to ideas.</p>\n"},{"tags":["java","arrays","function","methods"],"answers":[{"tags":[],"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1688700327,"creation_date":1688700327,"answer_id":76633758,"question_id":76633676,"body_markdown":"You have several bugs and questionable design decisions, to start with\r\n\r\n    int sizeOfTheNewArray = 0;\r\n    int [] newArray = new int[sizeOfTheNewArray];\r\n\r\nMeans `newArray` is always empty. I would break the problem down into discrete sections, first count the unique elements in an array;\r\n\r\n\tpublic static int countUniqueElements(int[] arr) {\r\n\t\tint count = 0;\r\n\t\tloop: for (int i = 0; i &lt; arr.length; i++) {\r\n\t\t\tif (i &gt; 0) {\r\n\t\t\t\tfor (int j = i - 1; j &gt;= 0; j--) {\r\n\t\t\t\t\tif (arr[i] == arr[j]) {\r\n\t\t\t\t\t\tcontinue loop;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcount++;\r\n\t\t}\r\n\t\treturn count;\r\n\t}\r\n\r\nNext, you should *read* an array of values from the user. Let&#39;s write a method to do that. Read a line of comma separated values, split on comma and convert to an `int[]`.\r\n\r\n\tpublic static int[] readArray(Scanner scanner) {\r\n\t\tSystem.out.println(&quot;Please enter your array values&quot;);\r\n\t\tString line = scanner.nextLine();\r\n\t\tString[] tokens = line.split(&quot;,&quot;);\r\n\t\tint[] array = new int[tokens.length];\r\n\t\tfor (int i = 0; i &lt; tokens.length; i++) {\r\n\t\t\tarray[i] = Integer.parseInt(tokens[i].trim());\r\n\t\t}\r\n\t\treturn array;\r\n\t}\r\n\r\nNow, we can write a method to actually get the unique elements of an array given an array. Start by counting the unique elements. Then create the new array. Finally, repeat the strategy we used in counting unique elements to populate the new array.\r\n\r\n\tpublic static int[] getUniqueElements(int[] arr) {\r\n\t\tint sizeOfTheNewArray = countUniqueElements(arr);\r\n\t\tint[] newArray = new int[sizeOfTheNewArray];\r\n\t\tint count = 0;\r\n\t\tloop: for (int i = 0; i &lt; arr.length; i++) {\r\n\t\t\tif (i &gt; 0) {\r\n\t\t\t\tfor (int j = i - 1; j &gt;= 0; j--) {\r\n\t\t\t\t\tif (arr[i] == arr[j]) {\r\n\t\t\t\t\t\tcontinue loop;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tnewArray[count] = arr[i];\r\n\t\t\tcount++;\r\n\t\t}\r\n\t\treturn newArray;\r\n\t}\r\n\r\nNow we can update `main` to invoke the above methods\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tScanner scanner = new Scanner(System.in);\r\n\t\tint[] arr = readArray(scanner);\r\n\t\tSystem.out.printf(&quot;Before: %s%n&quot;, Arrays.toString(arr));\r\n\t\tint[] arr2 = getUniqueElements(arr);\r\n\t\tSystem.out.printf(&quot;After: %s%n&quot;, Arrays.toString(arr2));\r\n\t}\r\n\r\nAnd run it\r\n\r\n    Please enter your array values\r\n    3, 3, 87, 56, 1, 87, 3, 2 \r\n    Before: [3, 3, 87, 56, 1, 87, 3, 2]\r\n    After: [3, 87, 56, 1, 2]\r\n\r\n","title":"where am  doing wrong?","body":"<p>You have several bugs and questionable design decisions, to start with</p>\n<pre><code>int sizeOfTheNewArray = 0;\nint [] newArray = new int[sizeOfTheNewArray];\n</code></pre>\n<p>Means <code>newArray</code> is always empty. I would break the problem down into discrete sections, first count the unique elements in an array;</p>\n<pre><code>public static int countUniqueElements(int[] arr) {\n    int count = 0;\n    loop: for (int i = 0; i &lt; arr.length; i++) {\n        if (i &gt; 0) {\n            for (int j = i - 1; j &gt;= 0; j--) {\n                if (arr[i] == arr[j]) {\n                    continue loop;\n                }\n            }\n        }\n        count++;\n    }\n    return count;\n}\n</code></pre>\n<p>Next, you should <em>read</em> an array of values from the user. Let's write a method to do that. Read a line of comma separated values, split on comma and convert to an <code>int[]</code>.</p>\n<pre><code>public static int[] readArray(Scanner scanner) {\n    System.out.println(&quot;Please enter your array values&quot;);\n    String line = scanner.nextLine();\n    String[] tokens = line.split(&quot;,&quot;);\n    int[] array = new int[tokens.length];\n    for (int i = 0; i &lt; tokens.length; i++) {\n        array[i] = Integer.parseInt(tokens[i].trim());\n    }\n    return array;\n}\n</code></pre>\n<p>Now, we can write a method to actually get the unique elements of an array given an array. Start by counting the unique elements. Then create the new array. Finally, repeat the strategy we used in counting unique elements to populate the new array.</p>\n<pre><code>public static int[] getUniqueElements(int[] arr) {\n    int sizeOfTheNewArray = countUniqueElements(arr);\n    int[] newArray = new int[sizeOfTheNewArray];\n    int count = 0;\n    loop: for (int i = 0; i &lt; arr.length; i++) {\n        if (i &gt; 0) {\n            for (int j = i - 1; j &gt;= 0; j--) {\n                if (arr[i] == arr[j]) {\n                    continue loop;\n                }\n            }\n        }\n        newArray[count] = arr[i];\n        count++;\n    }\n    return newArray;\n}\n</code></pre>\n<p>Now we can update <code>main</code> to invoke the above methods</p>\n<pre><code>public static void main(String[] args) {\n    Scanner scanner = new Scanner(System.in);\n    int[] arr = readArray(scanner);\n    System.out.printf(&quot;Before: %s%n&quot;, Arrays.toString(arr));\n    int[] arr2 = getUniqueElements(arr);\n    System.out.printf(&quot;After: %s%n&quot;, Arrays.toString(arr2));\n}\n</code></pre>\n<p>And run it</p>\n<pre><code>Please enter your array values\n3, 3, 87, 56, 1, 87, 3, 2 \nBefore: [3, 3, 87, 56, 1, 87, 3, 2]\nAfter: [3, 87, 56, 1, 2]\n</code></pre>\n"}],"owner":{"account_id":27737116,"reputation":13,"user_id":21174446,"display_name":"Mustafa BAL"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76633758,"answer_count":1,"score":0,"last_activity_date":1688700327,"creation_date":1688698680,"question_id":76633676,"body_markdown":"Elements in an entered array, without breaking their order, but singularly.\r\nWrite a program that casts it into a new array. For example, if the input is {3, 3, 87,56,1, 87, 3, 2 } the output should be {3, 87, 56, 1, 2 }\r\n\r\nI want to solve this question without using ready-made methods\r\n\r\n`import java.util.Arrays;\r\nimport java.util.Scanner;\r\n\r\npublic class PassElementToAnotherArray {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\ttransferElementsOfArray();\r\n\t}\r\n\tpublic static int[] createArrays() {\r\n\t\t\r\n\t\tScanner scanner = new Scanner(System.in);\r\n\t\tSystem.out.println(&quot;Please enter first array size:&quot;);\r\n\t\tint size = scanner.nextInt();\r\n\t\tint[] array = new int[size];\r\n\t\tfor (int i = 0; i &lt; array.length; i++) {\r\n\t\t\tarray[i] = (int) (Math.random()*100);\r\n\t\t}\r\n\t\t\t\r\n\t\treturn array;\r\n\t}\r\n\tpublic static void transferElementsOfArray() {\r\n\t\t\r\n\t\tint [] firstArray = createArrays();\r\n\t\tSystem.out.println(&quot;Elements of the first array: &quot;);\r\n\t\tfor (int i = 0; i &lt; firstArray.length; i++) {\r\n\t\t\tSystem.out.print(firstArray[i]+&quot; &quot;);\r\n\t\t}\r\n\t\t\r\n\t\tSystem.out.println();\r\n\t\t\r\n\t\tint sizeOfTheNewArray = 0;\r\n\t\tint [] newArray = new int[sizeOfTheNewArray];\r\n\t\t\r\n\t\tboolean isIt = false;\r\n\t\tfor (int i = 0; i &lt; firstArray.length; i++) {\r\n\t\t\t\r\n\t\t\tfor (int j = i+1; j &lt; firstArray.length; j++) {\r\n\t\t\t\t\r\n\t\t\t\tif (firstArray[i]==firstArray[j]) {\r\n\t\t\t\t\tisIt = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tisIt = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!isIt) {\r\n\t\t\t\tsizeOfTheNewArray++;\r\n\t\t\t}\t\t\t\r\n\t\t}\t\t\r\n\t\tSystem.out.println(sizeOfTheNewArray);\r\n\t\tint counter = 0;\r\n\t\tfor (int i = 0; i &lt; firstArray.length; i++) {\r\n\t\t\tfor (int j = i+1; j &lt; firstArray.length; j++) {\r\n\t\t\t\tif (firstArray[i]==firstArray[j]) {\r\n\t\t\t\t\tisIt = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tisIt = false;\r\n\t\t\t\t}\r\n\t\t}\r\n\t\tif (!isIt) {\r\n\t\t\t\r\n\t\t\tfor (int j = counter; j &lt; newArray.length; j++) {\r\n\t\t\t\tnewArray[j] = firstArray[i];\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcounter++;\r\n\t\t}\r\n\t\t}\r\n\t\tfor (int i = 0; i &lt; newArray.length; i++) {\r\n\t\t\tSystem.out.println(newArray[i]);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n}`\r\n\r\nwhen i do this i can&#39;t even see the elements of the new array in the output","title":"where am  doing wrong?","body":"<p>Elements in an entered array, without breaking their order, but singularly.\nWrite a program that casts it into a new array. For example, if the input is {3, 3, 87,56,1, 87, 3, 2 } the output should be {3, 87, 56, 1, 2 }</p>\n<p>I want to solve this question without using ready-made methods</p>\n<p>`import java.util.Arrays;\nimport java.util.Scanner;</p>\n<p>public class PassElementToAnotherArray {</p>\n<pre><code>public static void main(String[] args) {\n    // TODO Auto-generated method stub\n    transferElementsOfArray();\n}\npublic static int[] createArrays() {\n    \n    Scanner scanner = new Scanner(System.in);\n    System.out.println(&quot;Please enter first array size:&quot;);\n    int size = scanner.nextInt();\n    int[] array = new int[size];\n    for (int i = 0; i &lt; array.length; i++) {\n        array[i] = (int) (Math.random()*100);\n    }\n        \n    return array;\n}\npublic static void transferElementsOfArray() {\n    \n    int [] firstArray = createArrays();\n    System.out.println(&quot;Elements of the first array: &quot;);\n    for (int i = 0; i &lt; firstArray.length; i++) {\n        System.out.print(firstArray[i]+&quot; &quot;);\n    }\n    \n    System.out.println();\n    \n    int sizeOfTheNewArray = 0;\n    int [] newArray = new int[sizeOfTheNewArray];\n    \n    boolean isIt = false;\n    for (int i = 0; i &lt; firstArray.length; i++) {\n        \n        for (int j = i+1; j &lt; firstArray.length; j++) {\n            \n            if (firstArray[i]==firstArray[j]) {\n                isIt = true;\n                break;\n            }\n            else {\n                isIt = false;\n            }\n        }\n        if (!isIt) {\n            sizeOfTheNewArray++;\n        }           \n    }       \n    System.out.println(sizeOfTheNewArray);\n    int counter = 0;\n    for (int i = 0; i &lt; firstArray.length; i++) {\n        for (int j = i+1; j &lt; firstArray.length; j++) {\n            if (firstArray[i]==firstArray[j]) {\n                isIt = true;\n                break;\n            }\n            else {\n                isIt = false;\n            }\n    }\n    if (!isIt) {\n        \n        for (int j = counter; j &lt; newArray.length; j++) {\n            newArray[j] = firstArray[i];\n            break;\n        }\n        counter++;\n    }\n    }\n    for (int i = 0; i &lt; newArray.length; i++) {\n        System.out.println(newArray[i]);\n    }\n    \n}\n</code></pre>\n<p>}`</p>\n<p>when i do this i can't even see the elements of the new array in the output</p>\n"},{"tags":["java","stringbuilder"],"comments":[{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1688698805,"post_id":76633668,"comment_id":135111909,"body_markdown":"It&#39;s *very* close to `Integer.MAX_VALUE`. I would assume it&#39;s to prevent trying to exceed that limit internally. It&#39;s a very large `String`. `Integer.MAX_VALUE - 8 == 2147483639`","body":"It&#39;s <i>very</i> close to <code>Integer.MAX_VALUE</code>. I would assume it&#39;s to prevent trying to exceed that limit internally. It&#39;s a very large <code>String</code>. <code>Integer.MAX_VALUE - 8 == 2147483639</code>"},{"owner":{"account_id":2734060,"reputation":263892,"user_id":2357112,"accept_rate":26,"display_name":"user2357112"},"score":0,"creation_date":1688699225,"post_id":76633668,"comment_id":135111938,"body_markdown":"I can&#39;t find that method in the [openjdk 11.0.19 StringBuilder source code](https://github.com/openjdk/jdk11u-dev/blob/jdk-11.0.19-ga/src/java.base/share/classes/java/lang/StringBuilder.java).","body":"I can&#39;t find that method in the <a href=\"https://github.com/openjdk/jdk11u-dev/blob/jdk-11.0.19-ga/src/java.base/share/classes/java/lang/StringBuilder.java\" rel=\"nofollow noreferrer\">openjdk 11.0.19 StringBuilder source code</a>."},{"owner":{"account_id":2734060,"reputation":263892,"user_id":2357112,"accept_rate":26,"display_name":"user2357112"},"score":0,"creation_date":1688699291,"post_id":76633668,"comment_id":135111939,"body_markdown":"Ah. It&#39;s in AbstractStringBuilder.","body":"Ah. It&#39;s in AbstractStringBuilder."},{"owner":{"account_id":2734060,"reputation":263892,"user_id":2357112,"accept_rate":26,"display_name":"user2357112"},"score":0,"creation_date":1688699901,"post_id":76633668,"comment_id":135111968,"body_markdown":"Where did you find this code, anyway? It looks kind of like it might be decompiler output, not actual source code.","body":"Where did you find this code, anyway? It looks kind of like it might be decompiler output, not actual source code."},{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":0,"creation_date":1688703363,"post_id":76633668,"comment_id":135112231,"body_markdown":"@TdOnline please [edit] your post to mention (and link to) where you found this code, because the code you&#39;re showing [does not appear to exist](https://github.com/search?q=org%3Aopenjdk+SAFE_BOUND+%3D+2147483639&amp;type=code) in the openjdk11 code base.","body":"@TdOnline please <a href=\"https://stackoverflow.com/posts/76633668/edit\">edit</a> your post to mention (and link to) where you found this code, because the code you&#39;re showing <a href=\"https://github.com/search?q=org%3Aopenjdk+SAFE_BOUND+%3D+2147483639&amp;type=code\" rel=\"nofollow noreferrer\">does not appear to exist</a> in the openjdk11 code base."}],"answers":[{"tags":[],"owner":{"account_id":118410,"reputation":62929,"user_id":309412,"accept_rate":74,"display_name":"Lie Ryan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688698889,"creation_date":1688698889,"answer_id":76633689,"question_id":76633668,"body_markdown":"Note that `2 ** 31` is `2147483648`, that&#39;s the max range for signed int.\r\n\r\nThere&#39;s probably a few additional bytes used for other book keeping overhead (e.g. tracking string length and maybe null terminator) which leads to the number 2147483639.","title":"Why does Java StringBuilder use 2147483639 as safe bound?","body":"<p>Note that <code>2 ** 31</code> is <code>2147483648</code>, that's the max range for signed int.</p>\n<p>There's probably a few additional bytes used for other book keeping overhead (e.g. tracking string length and maybe null terminator) which leads to the number 2147483639.</p>\n"},{"comments":[{"owner":{"account_id":18436024,"reputation":3,"user_id":13429851,"display_name":"TdOnline"},"score":0,"creation_date":1688700744,"post_id":76633723,"comment_id":135112026,"body_markdown":"ThxIt&#39;s because I was looking at the class code, and the explanation in the source code is indeed more detailed.","body":"ThxIt&#39;s because I was looking at the class code, and the explanation in the source code is indeed more detailed."}],"tags":[],"owner":{"account_id":2734060,"reputation":263892,"user_id":2357112,"accept_rate":26,"display_name":"user2357112"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1688699568,"creation_date":1688699568,"answer_id":76633723,"question_id":76633668,"body_markdown":"Here&#39;s what that code looks like in the [version][1] of the openjdk 11.0.19 source code I found when I looked for it:\r\n\r\n    /**\r\n     * The maximum size of array to allocate (unless necessary).\r\n     * Some VMs reserve some header words in an array.\r\n     * Attempts to allocate larger arrays may result in\r\n     * OutOfMemoryError: Requested array size exceeds VM limit\r\n     */\r\n    private static final int MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8;\r\n\r\n    /**\r\n     * Returns a capacity at least as large as the given minimum capacity.\r\n     * Returns the current capacity increased by the same amount + 2 if\r\n     * that suffices.\r\n     * Will not return a capacity greater than\r\n     * {@code (MAX_ARRAY_SIZE &gt;&gt; coder)} unless the given minimum capacity\r\n     * is greater than that.\r\n     *\r\n     * @param  minCapacity the desired minimum capacity\r\n     * @throws OutOfMemoryError if minCapacity is less than zero or\r\n     *         greater than (Integer.MAX_VALUE &gt;&gt; coder)\r\n     */\r\n    private int newCapacity(int minCapacity) {\r\n        // overflow-conscious code\r\n        int oldCapacity = value.length &gt;&gt; coder;\r\n        int newCapacity = (oldCapacity &lt;&lt; 1) + 2;\r\n        if (newCapacity - minCapacity &lt; 0) {\r\n            newCapacity = minCapacity;\r\n        }\r\n        int SAFE_BOUND = MAX_ARRAY_SIZE &gt;&gt; coder;\r\n        return (newCapacity &lt;= 0 || SAFE_BOUND - newCapacity &lt; 0)\r\n            ? hugeCapacity(minCapacity)\r\n            : newCapacity;\r\n    }\r\n\r\nAs you can see from the helpful code comments, the value of 2147483639, equal to Integer.MAX_VALUE - 8, was picked because larger allocations might fail on some VMs, due to reserved header space.\r\n\r\nI don&#39;t know why the code you found looks different.\r\n\r\n  [1]: https://github.com/openjdk/jdk11u-dev/blob/jdk-11.0.19-ga/src/java.base/share/classes/java/lang/AbstractStringBuilder.java#L177","title":"Why does Java StringBuilder use 2147483639 as safe bound?","body":"<p>Here's what that code looks like in the <a href=\"https://github.com/openjdk/jdk11u-dev/blob/jdk-11.0.19-ga/src/java.base/share/classes/java/lang/AbstractStringBuilder.java#L177\" rel=\"nofollow noreferrer\">version</a> of the openjdk 11.0.19 source code I found when I looked for it:</p>\n<pre><code>/**\n * The maximum size of array to allocate (unless necessary).\n * Some VMs reserve some header words in an array.\n * Attempts to allocate larger arrays may result in\n * OutOfMemoryError: Requested array size exceeds VM limit\n */\nprivate static final int MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8;\n\n/**\n * Returns a capacity at least as large as the given minimum capacity.\n * Returns the current capacity increased by the same amount + 2 if\n * that suffices.\n * Will not return a capacity greater than\n * {@code (MAX_ARRAY_SIZE &gt;&gt; coder)} unless the given minimum capacity\n * is greater than that.\n *\n * @param  minCapacity the desired minimum capacity\n * @throws OutOfMemoryError if minCapacity is less than zero or\n *         greater than (Integer.MAX_VALUE &gt;&gt; coder)\n */\nprivate int newCapacity(int minCapacity) {\n    // overflow-conscious code\n    int oldCapacity = value.length &gt;&gt; coder;\n    int newCapacity = (oldCapacity &lt;&lt; 1) + 2;\n    if (newCapacity - minCapacity &lt; 0) {\n        newCapacity = minCapacity;\n    }\n    int SAFE_BOUND = MAX_ARRAY_SIZE &gt;&gt; coder;\n    return (newCapacity &lt;= 0 || SAFE_BOUND - newCapacity &lt; 0)\n        ? hugeCapacity(minCapacity)\n        : newCapacity;\n}\n</code></pre>\n<p>As you can see from the helpful code comments, the value of 2147483639, equal to Integer.MAX_VALUE - 8, was picked because larger allocations might fail on some VMs, due to reserved header space.</p>\n<p>I don't know why the code you found looks different.</p>\n"}],"owner":{"account_id":18436024,"reputation":3,"user_id":13429851,"display_name":"TdOnline"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":111,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76633723,"answer_count":2,"score":0,"last_activity_date":1688699568,"creation_date":1688698439,"question_id":76633668,"body_markdown":"**Java version**: openjdk 11.0.19\r\n\r\nWhen I was looking at the source code of `StringBuilder`, I noticed that it checks if the capacity exceeds **`2147483639`** when you use the **`append`** method. \r\n\r\nI&#39;m curious why this particular value is used and if there&#39;s any specific reason behind it.\r\n\r\n**Souce Code**:\r\n\r\n```\r\nprivate int newCapacity(int minCapacity) {\r\n    int oldCapacity = this.value.length &gt;&gt; this.coder;\r\n    int newCapacity = (oldCapacity &lt;&lt; 1) + 2;\r\n    if (newCapacity - minCapacity &lt; 0) {\r\n       newCapacity = minCapacity;\r\n    }\r\n\r\n    int SAFE_BOUND = 2147483639 &gt;&gt; this.coder;\r\n    return newCapacity &gt; 0 &amp;&amp; SAFE_BOUND - newCapacity &gt;= 0 ? newCapacity : this.hugeCapacity(minCapacity);\r\n}\r\n```\r\n","title":"Why does Java StringBuilder use 2147483639 as safe bound?","body":"<p><strong>Java version</strong>: openjdk 11.0.19</p>\n<p>When I was looking at the source code of <code>StringBuilder</code>, I noticed that it checks if the capacity exceeds <strong><code>2147483639</code></strong> when you use the <strong><code>append</code></strong> method.</p>\n<p>I'm curious why this particular value is used and if there's any specific reason behind it.</p>\n<p><strong>Souce Code</strong>:</p>\n<pre><code>private int newCapacity(int minCapacity) {\n    int oldCapacity = this.value.length &gt;&gt; this.coder;\n    int newCapacity = (oldCapacity &lt;&lt; 1) + 2;\n    if (newCapacity - minCapacity &lt; 0) {\n       newCapacity = minCapacity;\n    }\n\n    int SAFE_BOUND = 2147483639 &gt;&gt; this.coder;\n    return newCapacity &gt; 0 &amp;&amp; SAFE_BOUND - newCapacity &gt;= 0 ? newCapacity : this.hugeCapacity(minCapacity);\n}\n</code></pre>\n"},{"tags":["java","visual-studio-code"],"comments":[{"owner":{"account_id":14914321,"reputation":15846,"user_id":10768653,"display_name":"Leo Zhu"},"score":0,"creation_date":1564385885,"post_id":57215931,"comment_id":100998439,"body_markdown":"now the issue is &quot;Extension host terminated unexpectedly&quot; or &quot;code-runner.run not found&quot; ?","body":"now the issue is &quot;Extension host terminated unexpectedly&quot; or &quot;code-runner.run not found&quot; ?"},{"owner":{"account_id":14914321,"reputation":15846,"user_id":10768653,"display_name":"Leo Zhu"},"score":0,"creation_date":1564385913,"post_id":57215931,"comment_id":100998455,"body_markdown":"you could refer this:https://github.com/formulahendry/vscode-code-runner/issues/268","body":"you could refer this:<a href=\"https://github.com/formulahendry/vscode-code-runner/issues/268\" rel=\"nofollow noreferrer\">github.com/formulahendry/vscode-code-runner/issues/268</a>"},{"owner":{"account_id":16390915,"reputation":63,"user_id":11839670,"display_name":"SejiMe"},"score":0,"creation_date":1565571971,"post_id":57215931,"comment_id":101383691,"body_markdown":"I think &quot;Extension host terminated unexpectedly&quot; is the reason why &quot;code-runner.run not found&quot; is appearing, but still dont know how to fix the extension host","body":"I think &quot;Extension host terminated unexpectedly&quot; is the reason why &quot;code-runner.run not found&quot; is appearing, but still dont know how to fix the extension host"}],"answers":[{"tags":[],"owner":{"account_id":16877586,"reputation":76,"user_id":12204585,"display_name":"Narek Sargsyan"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1583360359,"creation_date":1583354423,"answer_id":60534351,"question_id":57215931,"body_markdown":"Try deleting the `C:\\Users\\...\\.vscode\\extensions\\formulahendry.code-runner-...` folder and installing the extension again.\r\n\r\n\r\nSee [this issue](https://github.com/formulahendry/vscode-code-runner/issues/351#issuecomment-416806210) on GitHub","title":"How to fix Command &quot;code-runner.run&quot; not found","body":"<p>Try deleting the <code>C:\\Users\\...\\.vscode\\extensions\\formulahendry.code-runner-...</code> folder and installing the extension again.</p>\n\n<p>See <a href=\"https://github.com/formulahendry/vscode-code-runner/issues/351#issuecomment-416806210\" rel=\"noreferrer\">this issue</a> on GitHub</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1666327923,"post_id":74122058,"comment_id":130915367,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/74122058/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":26668681,"reputation":11,"user_id":20280394,"display_name":"user20280394"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1666167562,"creation_date":1666167562,"answer_id":74122058,"question_id":57215931,"body_markdown":"Delete the  complete folder on which you are working currently.And make another with the another name with another file name, and work again, my problem was solved like this.Hope it will help you sure.","title":"How to fix Command &quot;code-runner.run&quot; not found","body":"<p>Delete the  complete folder on which you are working currently.And make another with the another name with another file name, and work again, my problem was solved like this.Hope it will help you sure.</p>\n"},{"comments":[{"owner":{"account_id":14861941,"reputation":1836,"user_id":10732434,"display_name":"sanitizedUser"},"score":0,"creation_date":1688977582,"post_id":76633655,"comment_id":135142312,"body_markdown":"Should be a comment because you are only guessing. But hey, you can&#39;t post comments, so you should delete this answer.","body":"Should be a comment because you are only guessing. But hey, you can&#39;t post comments, so you should delete this answer."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1688977598,"post_id":76633655,"comment_id":135142319,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76633655/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":28966946,"reputation":1,"user_id":22188135,"display_name":"Josh Walker"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688698150,"creation_date":1688698150,"answer_id":76633655,"question_id":57215931,"body_markdown":"The problem might be from the code editor. Try closing your code editor(vscode) &amp; reopen it again.","title":"How to fix Command &quot;code-runner.run&quot; not found","body":"<p>The problem might be from the code editor. Try closing your code editor(vscode) &amp; reopen it again.</p>\n"}],"owner":{"account_id":16390915,"reputation":63,"user_id":11839670,"display_name":"SejiMe"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31549,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":60534351,"answer_count":3,"score":6,"last_activity_date":1688698150,"creation_date":1564129247,"question_id":57215931,"body_markdown":"I&#39;m trying to run a `test.java` file and also it sends an error `Extension host terminated unexpectedly` then whenever I restart the host the following Command Appear `code-runner.run` not found.\r\n\r\n\r\nReinstalled extensions\r\n\r\n```public class Test{\r\n    public static void name(String[] args) {\r\n        System.out.println(&quot;Hello World&quot;);\r\n    }\r\n}\r\n```\r\nHello World","title":"How to fix Command &quot;code-runner.run&quot; not found","body":"<p>I'm trying to run a <code>test.java</code> file and also it sends an error <code>Extension host terminated unexpectedly</code> then whenever I restart the host the following Command Appear <code>code-runner.run</code> not found.</p>\n\n<p>Reinstalled extensions</p>\n\n<pre><code>    public static void name(String[] args) {\n        System.out.println(\"Hello World\");\n    }\n}\n</code></pre>\n\n<p>Hello World</p>\n"},{"tags":["java","swagger","openapi"],"owner":{"account_id":3484291,"reputation":1265,"user_id":2915603,"accept_rate":62,"display_name":"ArkadyB"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1688697987,"creation_date":1688697987,"question_id":76633646,"body_markdown":"I have a custom type to generate an OpenAPI schema for Java 11 defined class, for ex\r\n```\r\nMyUglyClassName {\r\n    public MyGenericType&lt;Long&gt; number;\r\n}\r\n```\r\nThis would produce an OpenAPI with the two ref names - `MyUglyClassName` and `MyGenericTypeLong`.\r\n\r\nI can amend this for `MyUglyClassName` using `@JsonRootName(&quot;BeautifulName&quot;)`. Is there a way to do the same for `MyGenericType&lt;Long&gt;`?\r\n\r\nThanks,","title":"Is there a way to give a custom type name for OpenAPI","body":"<p>I have a custom type to generate an OpenAPI schema for Java 11 defined class, for ex</p>\n<pre><code>MyUglyClassName {\n    public MyGenericType&lt;Long&gt; number;\n}\n</code></pre>\n<p>This would produce an OpenAPI with the two ref names - <code>MyUglyClassName</code> and <code>MyGenericTypeLong</code>.</p>\n<p>I can amend this for <code>MyUglyClassName</code> using <code>@JsonRootName(&quot;BeautifulName&quot;)</code>. Is there a way to do the same for <code>MyGenericType&lt;Long&gt;</code>?</p>\n<p>Thanks,</p>\n"},{"tags":["java","lz4"],"comments":[{"owner":{"account_id":8098558,"reputation":2782,"user_id":6102259,"accept_rate":33,"display_name":"ketan"},"score":0,"creation_date":1501354722,"post_id":36012183,"comment_id":77746514,"body_markdown":"@user3758298- I have one query like If I don&#39;t know the length of decompressed array then how should I decompressed byte array? I have one compressed byte array. I want to decompress it.","body":"@user3758298- I have one query like If I don&#39;t know the length of decompressed array then how should I decompressed byte array? I have one compressed byte array. I want to decompress it."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1688701118,"post_id":36012183,"comment_id":135112053,"body_markdown":"`noBytesProcessed = inputBuffer.length`: the problem is here. It should be `noBytesProcessed = noBytesRead `, and similarly for `decompressedLength`, and all the other places you assumed that `read()` filled the buffer.","body":"<code>noBytesProcessed = inputBuffer.length</code>: the problem is here. It should be <code>noBytesProcessed = noBytesRead </code>, and similarly for <code>decompressedLength</code>, and all the other places you assumed that <code>read()</code> filled the buffer."}],"answers":[{"comments":[{"owner":{"account_id":4637467,"reputation":380,"user_id":3758298,"accept_rate":75,"display_name":"user3758298"},"score":0,"creation_date":1458056318,"post_id":36012942,"comment_id":59683015,"body_markdown":"Thats fixed my out of bounds error and it seems to run with all file types, problem is the ouput files are larger than the original","body":"Thats fixed my out of bounds error and it seems to run with all file types, problem is the ouput files are larger than the original"},{"owner":{"account_id":7568866,"reputation":316,"user_id":5743434,"display_name":"Teemu Ilmonen"},"score":0,"creation_date":1458129590,"post_id":36012942,"comment_id":59719013,"body_markdown":"Likely the compression ends up being done in small chunks which is less effective than compressing entire file at once.","body":"Likely the compression ends up being done in small chunks which is less effective than compressing entire file at once."}],"tags":[],"owner":{"account_id":7568866,"reputation":316,"user_id":5743434,"display_name":"Teemu Ilmonen"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1458049097,"creation_date":1458049097,"answer_id":36012942,"question_id":36012183,"body_markdown":"Looking only at code, I would say you are going wrong here:\r\n\r\n     outputBuffer = compress(inputBuffer, decompressedLength);\r\n     out.write(outputBuffer, 0, noBytesRead);\r\n\r\nYou have already trimmed outputBuffer in compress. Try:\r\n\r\n    out.write(outputBuffer);","title":"Java LZ4 compression using Input/Output streams","body":"<p>Looking only at code, I would say you are going wrong here:</p>\n\n<pre><code> outputBuffer = compress(inputBuffer, decompressedLength);\n out.write(outputBuffer, 0, noBytesRead);\n</code></pre>\n\n<p>You have already trimmed outputBuffer in compress. Try:</p>\n\n<pre><code>out.write(outputBuffer);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4637467,"reputation":380,"user_id":3758298,"accept_rate":75,"display_name":"user3758298"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1459969748,"creation_date":1459969748,"answer_id":36460270,"question_id":36012183,"body_markdown":"So I solved my problem by using LZ4block input/output streams\r\n\r\n\tpublic static void LZ4compress(String filename, String lz4file){\r\n        byte[] buf = new byte[2048];\r\n        try {\r\n            String outFilename = lz4file;\r\n            LZ4BlockOutputStream out = new LZ4BlockOutputStream(new FileOutputStream(outFilename), 32*1024*1024);\r\n            FileInputStream in = new FileInputStream(filename);\r\n\t\t\tint len;\r\n        \twhile((len = in.read(buf)) &gt; 0){\r\n        \t\tout.write(buf, 0, len);\r\n        \t}\r\n            in.close();\r\n            out.close();\r\n        } catch (IOException e) {\r\n        \t\r\n        }\r\n    }\r\n\t\r\n\tpublic static void LZ4Uncompress(String lz4file, String filename){\r\n        byte[] buf = new byte[2048];\r\n        try {\r\n            String outFilename = filename;\r\n            LZ4BlockInputStream in = new LZ4BlockInputStream(new FileInputStream(lz4file));\r\n            FileOutputStream out = new FileOutputStream(outFilename);\r\n\t\t\tint len;\r\n        \twhile((len = in.read(buf)) &gt; 0){\r\n        \t\tout.write(buf, 0, len);\r\n        \t}\r\n            in.close();\r\n            out.close();\r\n        } catch (IOException e) {\r\n        \t\r\n        }\r\n    }","title":"Java LZ4 compression using Input/Output streams","body":"<p>So I solved my problem by using LZ4block input/output streams</p>\n\n<pre><code>public static void LZ4compress(String filename, String lz4file){\n    byte[] buf = new byte[2048];\n    try {\n        String outFilename = lz4file;\n        LZ4BlockOutputStream out = new LZ4BlockOutputStream(new FileOutputStream(outFilename), 32*1024*1024);\n        FileInputStream in = new FileInputStream(filename);\n        int len;\n        while((len = in.read(buf)) &gt; 0){\n            out.write(buf, 0, len);\n        }\n        in.close();\n        out.close();\n    } catch (IOException e) {\n\n    }\n}\n\npublic static void LZ4Uncompress(String lz4file, String filename){\n    byte[] buf = new byte[2048];\n    try {\n        String outFilename = filename;\n        LZ4BlockInputStream in = new LZ4BlockInputStream(new FileInputStream(lz4file));\n        FileOutputStream out = new FileOutputStream(outFilename);\n        int len;\n        while((len = in.read(buf)) &gt; 0){\n            out.write(buf, 0, len);\n        }\n        in.close();\n        out.close();\n    } catch (IOException e) {\n\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1093223,"reputation":1998,"user_id":1087373,"accept_rate":0,"display_name":"snowfox"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688697606,"creation_date":1688697606,"answer_id":76633621,"question_id":36012183,"body_markdown":"Just for those who are looking for the Java utility code to tar &amp; compress files/directories using lz4. Let me know if you find any problems with it.\r\n\r\n    import java.io.BufferedInputStream;\r\n    import java.io.File;\r\n    import java.io.FileInputStream;\r\n    import java.io.FileNotFoundException;\r\n    import java.io.FileOutputStream;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.io.OutputStream;\r\n    import java.nio.file.Path;\r\n    import java.nio.file.Paths;\r\n    \r\n    import org.apache.commons.compress.archivers.tar.TarArchiveEntry;\r\n    import org.apache.commons.compress.archivers.tar.TarArchiveOutputStream;\r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    \r\n    import net.jpountz.lz4.LZ4FrameOutputStream;\r\n    \r\n    public class TarLz4Util {\r\n        private static final Logger logger = LoggerFactory.getLogger(TarLz4Util .class);\r\n    \r\n        private final static int BUFFER_SIZE = 1024 * 1024 * 10;\r\n    \r\n        public static void compress(String sourcePath, String targetPath) throws IOException {\r\n            compress(Paths.get(sourcePath), Paths.get(sourcePath));\r\n        }\r\n    \r\n        /**\r\n         * compress with lz4\r\n         *\r\n         */\r\n        private static void compress(Path sourcePath, Path targetPath) throws IOException {\r\n            //Files -&gt;  Tar  -&gt; LZ4 \r\n            try (LZ4FrameOutputStream lz4Out = new LZ4FrameOutputStream(\r\n                    new FileOutputStream(targetPath.toFile()))) {\r\n                TarArchiveOutputStream tarOut = new TarArchiveOutputStream(lz4Out);\r\n                tarOut.setLongFileMode(TarArchiveOutputStream.LONGFILE_GNU);\r\n                tar(sourcePath.toFile(), tarOut);\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * tar your files/directories recursively\r\n         *\r\n         */\r\n        private static void tar(File sourceFile, TarArchiveOutputStream tarOut) throws IOException {\r\n            if (!sourceFile.exists()) {\r\n                logger.warn(&quot;source file/directory does not exist!, path={}&quot;, sourceFile.getAbsolutePath());\r\n                return;\r\n            }\r\n    \r\n            TarArchiveEntry entry = new TarArchiveEntry(sourceFile);\r\n            tarOut.putArchiveEntry(entry);\r\n            if (sourceFile.isFile()) {\r\n                writeFile(new BufferedInputStream(new FileInputStream(sourceFile)), tarOut);\r\n                tarOut.closeArchiveEntry();\r\n            } else {\r\n                for (File file : sourceFile.listFiles()) {\r\n                    tar(file, tarOut);\r\n                }\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * copy file\r\n         *\r\n         */\r\n        private static long writeFile(InputStream in, OutputStream out) throws IOException {\r\n            int read = 0;\r\n            long count = 0;\r\n            byte[] buf = new byte[BUFFER_SIZE];\r\n            while ((read = in.read(buf)) != -1) {\r\n                out.write(buf, 0, read);\r\n                count += read;\r\n            }\r\n            return count;\r\n        }\r\n    \r\n        // a demo\r\n        public static void main(String[] args) throws Exception {\r\n            String srcDir = &quot;d:\\\\test&quot;;\r\n            String tarFile = &quot;test.tar.lz4&quot;;\r\n           \r\n            compress(Paths.get(srctDir), Paths.get(tarFile));\r\n        }\r\n    }","title":"Java LZ4 compression using Input/Output streams","body":"<p>Just for those who are looking for the Java utility code to tar &amp; compress files/directories using lz4. Let me know if you find any problems with it.</p>\n<pre><code>import java.io.BufferedInputStream;\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.FileNotFoundException;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\nimport java.nio.file.Path;\nimport java.nio.file.Paths;\n\nimport org.apache.commons.compress.archivers.tar.TarArchiveEntry;\nimport org.apache.commons.compress.archivers.tar.TarArchiveOutputStream;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\nimport net.jpountz.lz4.LZ4FrameOutputStream;\n\npublic class TarLz4Util {\n    private static final Logger logger = LoggerFactory.getLogger(TarLz4Util .class);\n\n    private final static int BUFFER_SIZE = 1024 * 1024 * 10;\n\n    public static void compress(String sourcePath, String targetPath) throws IOException {\n        compress(Paths.get(sourcePath), Paths.get(sourcePath));\n    }\n\n    /**\n     * compress with lz4\n     *\n     */\n    private static void compress(Path sourcePath, Path targetPath) throws IOException {\n        //Files -&gt;  Tar  -&gt; LZ4 \n        try (LZ4FrameOutputStream lz4Out = new LZ4FrameOutputStream(\n                new FileOutputStream(targetPath.toFile()))) {\n            TarArchiveOutputStream tarOut = new TarArchiveOutputStream(lz4Out);\n            tarOut.setLongFileMode(TarArchiveOutputStream.LONGFILE_GNU);\n            tar(sourcePath.toFile(), tarOut);\n        }\n    }\n\n    /**\n     * tar your files/directories recursively\n     *\n     */\n    private static void tar(File sourceFile, TarArchiveOutputStream tarOut) throws IOException {\n        if (!sourceFile.exists()) {\n            logger.warn(&quot;source file/directory does not exist!, path={}&quot;, sourceFile.getAbsolutePath());\n            return;\n        }\n\n        TarArchiveEntry entry = new TarArchiveEntry(sourceFile);\n        tarOut.putArchiveEntry(entry);\n        if (sourceFile.isFile()) {\n            writeFile(new BufferedInputStream(new FileInputStream(sourceFile)), tarOut);\n            tarOut.closeArchiveEntry();\n        } else {\n            for (File file : sourceFile.listFiles()) {\n                tar(file, tarOut);\n            }\n        }\n    }\n\n    /**\n     * copy file\n     *\n     */\n    private static long writeFile(InputStream in, OutputStream out) throws IOException {\n        int read = 0;\n        long count = 0;\n        byte[] buf = new byte[BUFFER_SIZE];\n        while ((read = in.read(buf)) != -1) {\n            out.write(buf, 0, read);\n            count += read;\n        }\n        return count;\n    }\n\n    // a demo\n    public static void main(String[] args) throws Exception {\n        String srcDir = &quot;d:\\\\test&quot;;\n        String tarFile = &quot;test.tar.lz4&quot;;\n       \n        compress(Paths.get(srctDir), Paths.get(tarFile));\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":4637467,"reputation":380,"user_id":3758298,"accept_rate":75,"display_name":"user3758298"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9150,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":36460270,"answer_count":3,"score":6,"last_activity_date":1688697606,"creation_date":1458047142,"question_id":36012183,"body_markdown":"I&#39;m using jpountz LZ4 to try and compress files and I want to read in and output files using Java  file input and output streams. I&#39;ve tried to find a solution online but theres nothing, I found a previous stackoverflow question on how to implement LZ4 correctly and I&#39;ve taken that and tried to modify it to use the streams, but I&#39;m not sure if this is correct or if it&#39;s even working.\r\n\r\nWhen running the compression on a text file it outputs a file which has some characters missing or replaced with symbols\r\n\r\n    &#240;\u0001Hello world He&#240;\u0001o world Hello &#240;\u0001rld Hello worl&#240;\u0001Hello worl\r\n\r\n but when running it with a image file it throws an out of bounds error. I&#39;ve also been unable to get decompression to work as it throws a Error decoding offset 3 of input buffer.\r\n\r\nHere is my code any help would be appreciated thanks\r\n\r\n\tpublic void LZ4Compress(InputStream in, OutputStream out){\r\n\t    int noBytesRead = 0;        //number of bytes read from input\r\n\t    int noBytesProcessed = 0;   //number of bytes processed\r\n\t    try {\r\n\t\t    while ((noBytesRead = in.read(inputBuffer)) &gt;= 0) {\r\n\t\t        noBytesProcessed = inputBuffer.length;\r\n\t\t        decompressedLength = inputBuffer.length;\r\n\t\t        outputBuffer = compress(inputBuffer, decompressedLength);\r\n\t\t\t\tout.write(outputBuffer, 0, noBytesRead);\r\n\t\t    }\r\n\t\t    out.flush();\r\n\t\t    in.close();\r\n\t\t    out.close();\r\n\t\t} catch (IOException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic void LZ4decompress(InputStream in, OutputStream out){\r\n\t    int noBytesRead = 0;        //number of bytes read from input\r\n\t\ttry {\r\n\t\t\twhile((noBytesRead = in.read(inputBuffer)) &gt;= 0){\r\n\t\t\t\tnoBytesProcessed = inputBuffer.length;\r\n\t\t\t\toutputBuffer = decompress(inputBuffer);\r\n\t\t\t\tout.write(outputBuffer, 0, noBytesRead);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t} catch (IOException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static byte[] compress(byte[] src, int srcLen) {\r\n\t    decompressedLength = srcLen;\r\n\t    int maxCompressedLength = compressor.maxCompressedLength(decompressedLength);\r\n\t    byte[] compressed = new byte[maxCompressedLength];\r\n\t    int compressLen = compressor.compress(src, 0, decompressedLength, compressed, 0, maxCompressedLength);\r\n\t    byte[] finalCompressedArray = Arrays.copyOf(compressed, compressLen);\r\n\t    return finalCompressedArray;\r\n\t}\r\n\t\r\n\tprivate static LZ4SafeDecompressor decompressor = factory.safeDecompressor();\r\n\r\n\tpublic static byte[] decompress(byte[] finalCompressedArray) {\r\n\t    byte[] restored = new byte[finalCompressedArray.length];\r\n\t    restored = decompressor.decompress(finalCompressedArray, finalCompressedArray.length);\r\n\t    return restored;\r\n\t}","title":"Java LZ4 compression using Input/Output streams","body":"<p>I'm using jpountz LZ4 to try and compress files and I want to read in and output files using Java  file input and output streams. I've tried to find a solution online but theres nothing, I found a previous stackoverflow question on how to implement LZ4 correctly and I've taken that and tried to modify it to use the streams, but I'm not sure if this is correct or if it's even working.</p>\n\n<p>When running the compression on a text file it outputs a file which has some characters missing or replaced with symbols</p>\n\n<pre><code>Hello world Heo world Hello rld Hello worlHello worl\n</code></pre>\n\n<p>but when running it with a image file it throws an out of bounds error. I've also been unable to get decompression to work as it throws a Error decoding offset 3 of input buffer.</p>\n\n<p>Here is my code any help would be appreciated thanks</p>\n\n<pre><code>public void LZ4Compress(InputStream in, OutputStream out){\n    int noBytesRead = 0;        //number of bytes read from input\n    int noBytesProcessed = 0;   //number of bytes processed\n    try {\n        while ((noBytesRead = in.read(inputBuffer)) &gt;= 0) {\n            noBytesProcessed = inputBuffer.length;\n            decompressedLength = inputBuffer.length;\n            outputBuffer = compress(inputBuffer, decompressedLength);\n            out.write(outputBuffer, 0, noBytesRead);\n        }\n        out.flush();\n        in.close();\n        out.close();\n    } catch (IOException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n}\n\npublic void LZ4decompress(InputStream in, OutputStream out){\n    int noBytesRead = 0;        //number of bytes read from input\n    try {\n        while((noBytesRead = in.read(inputBuffer)) &gt;= 0){\n            noBytesProcessed = inputBuffer.length;\n            outputBuffer = decompress(inputBuffer);\n            out.write(outputBuffer, 0, noBytesRead);\n\n        }\n    } catch (IOException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n}\n\npublic static byte[] compress(byte[] src, int srcLen) {\n    decompressedLength = srcLen;\n    int maxCompressedLength = compressor.maxCompressedLength(decompressedLength);\n    byte[] compressed = new byte[maxCompressedLength];\n    int compressLen = compressor.compress(src, 0, decompressedLength, compressed, 0, maxCompressedLength);\n    byte[] finalCompressedArray = Arrays.copyOf(compressed, compressLen);\n    return finalCompressedArray;\n}\n\nprivate static LZ4SafeDecompressor decompressor = factory.safeDecompressor();\n\npublic static byte[] decompress(byte[] finalCompressedArray) {\n    byte[] restored = new byte[finalCompressedArray.length];\n    restored = decompressor.decompress(finalCompressedArray, finalCompressedArray.length);\n    return restored;\n}\n</code></pre>\n"},{"tags":["java","generics","types","parameters"],"comments":[{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1688697388,"post_id":76633521,"comment_id":135111838,"body_markdown":"No, you can&#39;t really do this.","body":"No, you can&#39;t really do this."}],"answers":[{"comments":[{"owner":{"account_id":26041418,"reputation":15,"user_id":19746165,"display_name":"jsrc..programmer"},"score":0,"creation_date":1688743529,"post_id":76633544,"comment_id":135119238,"body_markdown":"Thank you, this is definitely something worth trying!","body":"Thank you, this is definitely something worth trying!"}],"tags":[],"owner":{"account_id":10732579,"reputation":666,"user_id":7898202,"display_name":"MorganS42"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1688695894,"creation_date":1688695894,"answer_id":76633544,"question_id":76633521,"body_markdown":"You can&#39;t quite do what you&#39;re looking for, but you can get close.\r\n\r\nYou can create an intermediate interface. It may look like the following:\r\n\r\n```java\r\ninterface AB implements A, B {}\r\n```\r\n\r\nYou then implement this intermediate interface from the relevant classes:\r\n```java\r\nclass Foo implements AB {\r\n...\r\n}\r\netc\r\n```\r\n\r\nAnd you can then do:\r\n```java\r\npublic static &lt;T extends AB&gt; void method1() {}\r\npublic static &lt;T extends AB&gt; void method2() {}\r\n```","title":"Creating a single definition for generic type parameters","body":"<p>You can't quite do what you're looking for, but you can get close.</p>\n<p>You can create an intermediate interface. It may look like the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>interface AB implements A, B {}\n</code></pre>\n<p>You then implement this intermediate interface from the relevant classes:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Foo implements AB {\n...\n}\netc\n</code></pre>\n<p>And you can then do:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static &lt;T extends AB&gt; void method1() {}\npublic static &lt;T extends AB&gt; void method2() {}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":26041418,"reputation":15,"user_id":19746165,"display_name":"jsrc..programmer"},"score":0,"creation_date":1688743569,"post_id":76633606,"comment_id":135119242,"body_markdown":"Thank you! I had an idea to do a wrapper, but I wasn&#39;t quite sure how to manage it with generics.","body":"Thank you! I had an idea to do a wrapper, but I wasn&#39;t quite sure how to manage it with generics."},{"owner":{"account_id":26041418,"reputation":15,"user_id":19746165,"display_name":"jsrc..programmer"},"score":0,"creation_date":1688744001,"post_id":76633606,"comment_id":135119341,"body_markdown":"And actually, out of curiosity, what would go wrong if the methods were static? I do have some static methods that could benefit from this, if it worked.","body":"And actually, out of curiosity, what would go wrong if the methods were static? I do have some static methods that could benefit from this, if it worked."},{"owner":{"account_id":10732579,"reputation":666,"user_id":7898202,"display_name":"MorganS42"},"score":0,"creation_date":1688771173,"post_id":76633606,"comment_id":135123234,"body_markdown":"@jsrc..programmer Good question, you would encounter a compilation error, as T is non-static, and therefore you would be referencing a non-static field in a static context which is not allowed. Also if either of the solutions I posted fit your question, do you mind marking it as correct?","body":"@jsrc..programmer Good question, you would encounter a compilation error, as T is non-static, and therefore you would be referencing a non-static field in a static context which is not allowed. Also if either of the solutions I posted fit your question, do you mind marking it as correct?"}],"tags":[],"owner":{"account_id":10732579,"reputation":666,"user_id":7898202,"display_name":"MorganS42"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688697295,"creation_date":1688697295,"answer_id":76633606,"question_id":76633521,"body_markdown":"Do the methods have to be static?\r\n\r\nIf not, and the methods are related you could create a wrapper class to reduce duplicating code. This would simply look like:\r\n\r\n```java\r\npublic class GenericWrapper&lt;T extends A &amp; B&gt; {\r\n\tpublic void method1(T t1, T t2) {\r\n\t\t// Your code here. The parameters to this method could be anything.\r\n\t}\r\n\tpublic void method2(T t) {}\r\n}\r\n```\r\n\r\nYou then can reference the generic type T in method1 and method2. The Wrapper class may even suite well as a nested class.\r\n\r\nTo call the methods it would look something like:\r\n\r\n```java\r\nGenericWrapper&lt;MyClass&gt; wrapper = new GenericWrapper&lt;MyClass&gt;();\r\n\r\nwrapper.method1(new MyClass(), new MyClass());\r\nwrapper.method2(new MyClass());\r\n```\r\nThe above is using the example parameters to the methods, in reality they may be anything.\r\n\r\nNote this solution only works if the functions are not required to be static.","title":"Creating a single definition for generic type parameters","body":"<p>Do the methods have to be static?</p>\n<p>If not, and the methods are related you could create a wrapper class to reduce duplicating code. This would simply look like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class GenericWrapper&lt;T extends A &amp; B&gt; {\n    public void method1(T t1, T t2) {\n        // Your code here. The parameters to this method could be anything.\n    }\n    public void method2(T t) {}\n}\n</code></pre>\n<p>You then can reference the generic type T in method1 and method2. The Wrapper class may even suite well as a nested class.</p>\n<p>To call the methods it would look something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>GenericWrapper&lt;MyClass&gt; wrapper = new GenericWrapper&lt;MyClass&gt;();\n\nwrapper.method1(new MyClass(), new MyClass());\nwrapper.method2(new MyClass());\n</code></pre>\n<p>The above is using the example parameters to the methods, in reality they may be anything.</p>\n<p>Note this solution only works if the functions are not required to be static.</p>\n"}],"owner":{"account_id":26041418,"reputation":15,"user_id":19746165,"display_name":"jsrc..programmer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76633544,"answer_count":2,"score":0,"last_activity_date":1688697295,"creation_date":1688695441,"question_id":76633521,"body_markdown":"If I have many methods that use the same generic type parameters, is there a way to define those generic type parameters only once? For example, if I have methods like this:\r\n\r\n    public static &lt;T extends A &amp; B&gt; void method1() {}\r\n    public static &lt;T extends A &amp; B&gt; void method2() {}\r\n\r\nIs there a way to define them as something like this:\r\n\r\n    GenericType = &lt;T extends A &amp; B&gt;;\r\n    public static &lt;GenericType&gt; void method1() {}\r\n    public static &lt;GenericType&gt; void method2() {}\r\n\r\nI&#39;ve done a lot of Googling and can&#39;t find an answer on this; it seems like something that we should be able to do with generics, and that would be helpful in maintenance. I&#39;m guessing that I&#39;m just not phrasing my search correctly. I know that these parameters are used at compile time, so maybe the only way to do something like this is to extend the compiler?\r\n\r\nCan anyone give me some guidance on this? If I have to define the generic type parameters over and over again because that&#39;s just how it&#39;s done, that&#39;s fine with me; I&#39;d just like to know what&#39;s possible. If the only solution is to extend the compiler, that&#39;s far more work than is worthwhile to put in.\r\n\r\nThanks!","title":"Creating a single definition for generic type parameters","body":"<p>If I have many methods that use the same generic type parameters, is there a way to define those generic type parameters only once? For example, if I have methods like this:</p>\n<pre><code>public static &lt;T extends A &amp; B&gt; void method1() {}\npublic static &lt;T extends A &amp; B&gt; void method2() {}\n</code></pre>\n<p>Is there a way to define them as something like this:</p>\n<pre><code>GenericType = &lt;T extends A &amp; B&gt;;\npublic static &lt;GenericType&gt; void method1() {}\npublic static &lt;GenericType&gt; void method2() {}\n</code></pre>\n<p>I've done a lot of Googling and can't find an answer on this; it seems like something that we should be able to do with generics, and that would be helpful in maintenance. I'm guessing that I'm just not phrasing my search correctly. I know that these parameters are used at compile time, so maybe the only way to do something like this is to extend the compiler?</p>\n<p>Can anyone give me some guidance on this? If I have to define the generic type parameters over and over again because that's just how it's done, that's fine with me; I'd just like to know what's possible. If the only solution is to extend the compiler, that's far more work than is worthwhile to put in.</p>\n<p>Thanks!</p>\n"},{"tags":["java","generics","type-inference","logical-operators","boolean-expression"],"comments":[{"owner":{"account_id":265649,"reputation":53086,"user_id":552759,"display_name":"jtahlborn"},"score":0,"creation_date":1688679382,"post_id":76632348,"comment_id":135110206,"body_markdown":"well, your core problem is that you are attempting to say that the `T` in `LogicOperator` is a `LogicOperator` or a `PropertyChecking`.  then in your `And.fire()` you attempt to call `left.fire()` with a single argument.  however, if `left` is a `LogicOperator`, then the `fire()` method takes 4 arguments, not 1.  i can&#39;t say that i entirely understand what you are trying to do, but maybe that helps?","body":"well, your core problem is that you are attempting to say that the <code>T</code> in <code>LogicOperator</code> is a <code>LogicOperator</code> or a <code>PropertyChecking</code>.  then in your <code>And.fire()</code> you attempt to call <code>left.fire()</code> with a single argument.  however, if <code>left</code> is a <code>LogicOperator</code>, then the <code>fire()</code> method takes 4 arguments, not 1.  i can&#39;t say that i entirely understand what you are trying to do, but maybe that helps?"},{"owner":{"account_id":61566,"reputation":68934,"user_id":183406,"accept_rate":74,"display_name":"meriton"},"score":0,"creation_date":1688680072,"post_id":76632348,"comment_id":135110304,"body_markdown":"I don&#39;t get what you&#39;re trying to do either, so it&#39;s kinda hard to help you. You say you want a tree of expressions, but your usage example neither creates nor uses a tree, it simply calls some functions, and feeds the booleans they return to an add function, which returns a boolean. Where is the tree in that?","body":"I don&#39;t get what you&#39;re trying to do either, so it&#39;s kinda hard to help you. You say you want a tree of expressions, but your usage example neither creates nor uses a tree, it simply calls some functions, and feeds the booleans they return to an add function, which returns a boolean. Where is the tree in that?"},{"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"score":0,"creation_date":1688680118,"post_id":76632348,"comment_id":135110309,"body_markdown":"What are A, B and C in your example main? I don&#39;t see why a logic operator should take four arguments.","body":"What are A, B and C in your example main? I don&#39;t see why a logic operator should take four arguments."},{"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"score":0,"creation_date":1688680399,"post_id":76632348,"comment_id":135110348,"body_markdown":"Having `Ti` as a parameter to `fire()` seems a bit awkward (breaking encapsulation).  Seems like it would be a single interface (or maybe an adapter) that could wrap the actual `T` and `Ti`.  Then `And`, and `Or` could take variable number of arguments, and delegate to the wrapper/adapter.","body":"Having <code>Ti</code> as a parameter to <code>fire()</code> seems a bit awkward (breaking encapsulation).  Seems like it would be a single interface (or maybe an adapter) that could wrap the actual <code>T</code> and <code>Ti</code>.  Then <code>And</code>, and <code>Or</code> could take variable number of arguments, and delegate to the wrapper/adapter."},{"owner":{"account_id":23857731,"reputation":73,"user_id":17861062,"display_name":"simondx"},"score":0,"creation_date":1688683237,"post_id":76632348,"comment_id":135110693,"body_markdown":"I&#39;m sorry for the confusion, I tried to rewrite the examples","body":"I&#39;m sorry for the confusion, I tried to rewrite the examples"}],"answers":[{"comments":[{"owner":{"account_id":23857731,"reputation":73,"user_id":17861062,"display_name":"simondx"},"score":0,"creation_date":1688729980,"post_id":76633582,"comment_id":135116444,"body_markdown":"I didn&#39;t think about adding the input outside the method. Thank you!","body":"I didn&#39;t think about adding the input outside the method. Thank you!"}],"tags":[],"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1688696699,"creation_date":1688696699,"answer_id":76633582,"question_id":76632348,"body_markdown":"You *might* be overcomplicating this. If you want an expression tree like the one in the image, make an expression tree. You don&#39;t need to distinguish between &quot;operators&quot; and &quot;input&quot;s.\r\n\r\n```\r\n// this represents a tree &quot;node&quot;\r\ninterface BooleanExpression {\r\n    // all nodes should implement this to represent how they are evaluated\r\n    boolean evaluate();\r\n}\r\n\r\n// a node can be any of these types\r\nrecord IsNumberEven(int number) implements BooleanExpression {\r\n    @Override\r\n    public boolean evaluate() {\r\n        return number() % 2 == 0;\r\n    }\r\n}\r\n\r\nrecord IsNumberOdd(int number) implements BooleanExpression {\r\n    @Override\r\n    public boolean evaluate() {\r\n        return number() % 2 == 1;\r\n    }\r\n}\r\n\r\nrecord And(BooleanExpression left, BooleanExpression right) implements BooleanExpression {\r\n    @Override\r\n    public boolean evaluate() {\r\n        return left().evaluate() &amp;&amp; right().evaluate();\r\n    }\r\n}\r\n```\r\n\r\nUsage:\r\n\r\n```\r\nboolean result = new And(\r\n        new IsNumberEven(4),\r\n        new And(\r\n                new IsNumberOdd(7),\r\n                new IsNumberEven(6)\r\n        )\r\n).evaluate();\r\n```\r\n\r\nIf you really want to separate out the &quot;inputs&quot; of the `IsNumberOdd`/`IsNumberEven` nodes, you can. Just generalise `BooleanExpression` to `Expression&lt;T&gt;`\r\n\r\n```\r\ninterface Expression&lt;T&gt; {\r\n    T evaluate();\r\n}\r\n\r\nrecord Constant&lt;T&gt;(T value) implements Expression&lt;T&gt; {\r\n    @Override\r\n    public T evaluate() {\r\n        return value();\r\n    }\r\n}\r\n\r\nrecord IsNumberEven(Expression&lt;Integer&gt; number) implements Expression&lt;Boolean&gt; {\r\n    @Override\r\n    public Boolean evaluate() {\r\n        return number().evaluate() % 2 == 0;\r\n    }\r\n}\r\n\r\nrecord IsNumberOdd(Expression&lt;Integer&gt; number) implements Expression&lt;Boolean&gt; {\r\n    @Override\r\n    public Boolean evaluate() {\r\n        return number().evaluate() % 2 == 1;\r\n    }\r\n}\r\n\r\nrecord And(Expression&lt;Boolean&gt; left, Expression&lt;Boolean&gt; right) implements Expression&lt;Boolean&gt; {\r\n    @Override\r\n    public Boolean evaluate() {\r\n        return left().evaluate() &amp;&amp; right().evaluate();\r\n    }\r\n}\r\n```\r\n\r\nUsage:\r\n\r\n```\r\nboolean result = new And(\r\n        new IsNumberEven(new Constant&lt;&gt;(4)),\r\n        new And(\r\n                new IsNumberOdd(new Constant&lt;&gt;(7)),\r\n                new IsNumberEven(new Constant&lt;&gt;(6))\r\n        )\r\n).evaluate();\r\n```","title":"Resolve Java Interface ambiguity in method parameters","body":"<p>You <em>might</em> be overcomplicating this. If you want an expression tree like the one in the image, make an expression tree. You don't need to distinguish between &quot;operators&quot; and &quot;input&quot;s.</p>\n<pre><code>// this represents a tree &quot;node&quot;\ninterface BooleanExpression {\n    // all nodes should implement this to represent how they are evaluated\n    boolean evaluate();\n}\n\n// a node can be any of these types\nrecord IsNumberEven(int number) implements BooleanExpression {\n    @Override\n    public boolean evaluate() {\n        return number() % 2 == 0;\n    }\n}\n\nrecord IsNumberOdd(int number) implements BooleanExpression {\n    @Override\n    public boolean evaluate() {\n        return number() % 2 == 1;\n    }\n}\n\nrecord And(BooleanExpression left, BooleanExpression right) implements BooleanExpression {\n    @Override\n    public boolean evaluate() {\n        return left().evaluate() &amp;&amp; right().evaluate();\n    }\n}\n</code></pre>\n<p>Usage:</p>\n<pre><code>boolean result = new And(\n        new IsNumberEven(4),\n        new And(\n                new IsNumberOdd(7),\n                new IsNumberEven(6)\n        )\n).evaluate();\n</code></pre>\n<p>If you really want to separate out the &quot;inputs&quot; of the <code>IsNumberOdd</code>/<code>IsNumberEven</code> nodes, you can. Just generalise <code>BooleanExpression</code> to <code>Expression&lt;T&gt;</code></p>\n<pre><code>interface Expression&lt;T&gt; {\n    T evaluate();\n}\n\nrecord Constant&lt;T&gt;(T value) implements Expression&lt;T&gt; {\n    @Override\n    public T evaluate() {\n        return value();\n    }\n}\n\nrecord IsNumberEven(Expression&lt;Integer&gt; number) implements Expression&lt;Boolean&gt; {\n    @Override\n    public Boolean evaluate() {\n        return number().evaluate() % 2 == 0;\n    }\n}\n\nrecord IsNumberOdd(Expression&lt;Integer&gt; number) implements Expression&lt;Boolean&gt; {\n    @Override\n    public Boolean evaluate() {\n        return number().evaluate() % 2 == 1;\n    }\n}\n\nrecord And(Expression&lt;Boolean&gt; left, Expression&lt;Boolean&gt; right) implements Expression&lt;Boolean&gt; {\n    @Override\n    public Boolean evaluate() {\n        return left().evaluate() &amp;&amp; right().evaluate();\n    }\n}\n</code></pre>\n<p>Usage:</p>\n<pre><code>boolean result = new And(\n        new IsNumberEven(new Constant&lt;&gt;(4)),\n        new And(\n                new IsNumberOdd(new Constant&lt;&gt;(7)),\n                new IsNumberEven(new Constant&lt;&gt;(6))\n        )\n).evaluate();\n</code></pre>\n"}],"owner":{"account_id":23857731,"reputation":73,"user_id":17861062,"display_name":"simondx"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":76633582,"answer_count":1,"score":2,"last_activity_date":1688696699,"creation_date":1688675379,"question_id":76632348,"body_markdown":"I have a tree of boolean operations from a boolean expression that I have to run in Java. The tree would be something like this:\r\n[![The problem][1]][1]\r\nAnd I would need to run it in Java iteratively so that it returns me a boolean value. \r\n\r\n```\r\nboolean b = AND(isNumberEven(&quot;4&quot;), AND(isNumberOdd(&quot;7&quot;), isNumberEven(&quot;6&quot;))\r\n```\r\n\r\nThe problem is that I need to write the interfaces, since in my company we could create many classes like And, Or, isSomething, hasInArray (it could be any property needed by the other devs). We generally have two types of nodes: the logic ones, which have two branches, and the property checking ones, which are leafs of the tree.\r\n\r\nWhat I tried to do below is something I think it&#39;s really wrong in Java, please help me doing it right.\r\n\r\nMy idea was to create two Interfaces, one for Logic operators and another for Property checking. The property checker needs to evaluate its property from the input, while the logic operator needs to evaluate the two branches and then compute something with the two results (like an AND or an OR, we don&#39;t care about the NOT operator for now). I was thinking of doing these interfaces\r\n\r\n```\r\nclass PropertyCheckingInput {\r\n   String s; // dummy property, this object is the thing we want to verify the property on (example, if this string is an even number)\r\n\r\n   PropertyCheckingInput(...){...} // constructor for all params\r\n}\r\n\r\ninterface PropertyChecking {\r\n   boolean fire(PropertyCheckingInput i);\r\n}\r\n\r\nclass LogicOperatorInput&lt;\r\n   T extends LogicOperator or PropertyChecking, // it can be one or the other\r\n   Ti extends LogicOperatorInput or PropertyCheckingInput\r\n&gt; {\r\n    T left;\r\n    Ti leftInput;\r\n    T right;\r\n    Ti rightInput;\r\n\r\n    // probabily the type of leftInput should act accordingly to the type of left, but I don&#39;t know how to enforce this in Java with generics\r\n\r\n    LogicOperatorInput(...){...} // constructor for all params\r\n}\r\n\r\ninterface LogicOperator{\r\n   boolean fire(LogicOperatorInput i); \r\n}\r\n```\r\nIn this case, if I want to implement something like the AND I could do it like\r\n\r\n```\r\nclass And implements LogicOperator {\r\n    boolean fire(LogicOperatorInput i) {\r\n        i.left.fire(i.leftInput) &amp;&amp; i.right.fire(i.rightInput);\r\n    }\r\n\r\n    And() {}\r\n\r\n    public static void main(String[] args) {\r\n        // expression: isNumberEven(&quot;4&quot;) AND isNumberOdd(&quot;7&quot;) AND isNumberEven(&quot;6&quot;)\r\n        boolean b = new And().fire(new LogicOperatorInput(\r\n            new isNumberEven(), \r\n            new PropertyCheckingInput(&quot;4&quot;), \r\n            new And(), \r\n            new LogicOperatorInput(\r\n                new isNumberOdd(), \r\n                new PropertyCheckingInput(&quot;7&quot;), \r\n                new isNumberEven(), \r\n                new PropertyCheckingInput(&quot;6&quot;))\r\n        ));\r\n\r\n        System.out.println(b);\r\n    }\r\n}\r\n```\r\n\r\nFor each branch, I execute the function fire of both left and right with their input and care only about their result. Then if I want to create a boolean expression I concatenate the various nodes and inputs.\r\n\r\nThe compilers of course tells me this is wrong, because it cannot infer the correct type of the fire( ) functions.\r\n\r\nI&#39;m used to write in Javascript, which allows this type of stuff because it doesn&#39;t check what you&#39;re trying to do. Is there a way to do this in Java (I tried using some generics or abstract classes, but didn&#39;t work), or better yet a correct way to solve this problem (where we have a binary expression written as a binary tree and we want to resolve it by calling the class associated with each node)?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/6PShc.png","title":"Resolve Java Interface ambiguity in method parameters","body":"<p>I have a tree of boolean operations from a boolean expression that I have to run in Java. The tree would be something like this:\n<a href=\"https://i.stack.imgur.com/6PShc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6PShc.png\" alt=\"The problem\" /></a>\nAnd I would need to run it in Java iteratively so that it returns me a boolean value.</p>\n<pre><code>boolean b = AND(isNumberEven(&quot;4&quot;), AND(isNumberOdd(&quot;7&quot;), isNumberEven(&quot;6&quot;))\n</code></pre>\n<p>The problem is that I need to write the interfaces, since in my company we could create many classes like And, Or, isSomething, hasInArray (it could be any property needed by the other devs). We generally have two types of nodes: the logic ones, which have two branches, and the property checking ones, which are leafs of the tree.</p>\n<p>What I tried to do below is something I think it's really wrong in Java, please help me doing it right.</p>\n<p>My idea was to create two Interfaces, one for Logic operators and another for Property checking. The property checker needs to evaluate its property from the input, while the logic operator needs to evaluate the two branches and then compute something with the two results (like an AND or an OR, we don't care about the NOT operator for now). I was thinking of doing these interfaces</p>\n<pre><code>class PropertyCheckingInput {\n   String s; // dummy property, this object is the thing we want to verify the property on (example, if this string is an even number)\n\n   PropertyCheckingInput(...){...} // constructor for all params\n}\n\ninterface PropertyChecking {\n   boolean fire(PropertyCheckingInput i);\n}\n\nclass LogicOperatorInput&lt;\n   T extends LogicOperator or PropertyChecking, // it can be one or the other\n   Ti extends LogicOperatorInput or PropertyCheckingInput\n&gt; {\n    T left;\n    Ti leftInput;\n    T right;\n    Ti rightInput;\n\n    // probabily the type of leftInput should act accordingly to the type of left, but I don't know how to enforce this in Java with generics\n\n    LogicOperatorInput(...){...} // constructor for all params\n}\n\ninterface LogicOperator{\n   boolean fire(LogicOperatorInput i); \n}\n</code></pre>\n<p>In this case, if I want to implement something like the AND I could do it like</p>\n<pre><code>class And implements LogicOperator {\n    boolean fire(LogicOperatorInput i) {\n        i.left.fire(i.leftInput) &amp;&amp; i.right.fire(i.rightInput);\n    }\n\n    And() {}\n\n    public static void main(String[] args) {\n        // expression: isNumberEven(&quot;4&quot;) AND isNumberOdd(&quot;7&quot;) AND isNumberEven(&quot;6&quot;)\n        boolean b = new And().fire(new LogicOperatorInput(\n            new isNumberEven(), \n            new PropertyCheckingInput(&quot;4&quot;), \n            new And(), \n            new LogicOperatorInput(\n                new isNumberOdd(), \n                new PropertyCheckingInput(&quot;7&quot;), \n                new isNumberEven(), \n                new PropertyCheckingInput(&quot;6&quot;))\n        ));\n\n        System.out.println(b);\n    }\n}\n</code></pre>\n<p>For each branch, I execute the function fire of both left and right with their input and care only about their result. Then if I want to create a boolean expression I concatenate the various nodes and inputs.</p>\n<p>The compilers of course tells me this is wrong, because it cannot infer the correct type of the fire( ) functions.</p>\n<p>I'm used to write in Javascript, which allows this type of stuff because it doesn't check what you're trying to do. Is there a way to do this in Java (I tried using some generics or abstract classes, but didn't work), or better yet a correct way to solve this problem (where we have a binary expression written as a binary tree and we want to resolve it by calling the class associated with each node)?</p>\n"},{"tags":["java","android","flutter","grpc","grpc-java"],"comments":[{"owner":{"account_id":5967476,"reputation":24635,"user_id":4690866,"display_name":"Eric Anderson"},"score":0,"creation_date":1688740519,"post_id":76633574,"comment_id":135118652,"body_markdown":"Cross-posting: https://github.com/grpc/grpc-java/issues/10352","body":"Cross-posting: <a href=\"https://github.com/grpc/grpc-java/issues/10352\" rel=\"nofollow noreferrer\">github.com/grpc/grpc-java/issues/10352</a>"}],"owner":{"account_id":19848952,"reputation":1,"user_id":14539865,"display_name":"yuyu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":201,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1688696426,"creation_date":1688696339,"question_id":76633574,"body_markdown":"I want to use Unix Domain Socket in android-java with grpc server.And I use the example from okhttp:https://github.com/square/okhttp/blob/master/samples/unixdomainsockets/src/main/java/okhttp3/unixdomainsockets/UnixDomainServerSocketFactory.java\r\n\r\n\r\n\r\nI have tried this:\r\n\r\n```\r\nInetSocketAddress address = new InetSocketAddress(&quot;localhost&quot;, port); \r\nServer server = OkHttpServerBuilder.forPort(address,InsecureServerCredentials.create())\r\n.socketFactory(new UnixDomainServerSocketFactory(socketFile)) \r\n.build().start();\r\n```\r\n\r\n\r\n\r\nBut I got an error :\r\n\r\n```\r\njava.lang.ExceptionInInitializerError: Cannot determine cpu address size E/AndroidRuntime(19579): \t\r\nat jnr.ffi.Platform.calculateAddressSize(Platform.java:314) E/AndroidRuntime(19579): \t\r\nat jnr.ffi.Platform.&lt;init&gt;(Platform.java:290) E/AndroidRuntime(19579): \t\r\nat jnr.ffi.Platform.&lt;init&gt;(Platform.java:31) E/AndroidRuntime(19579): \t\r\nat jnr.ffi.Platform$Supported.&lt;init&gt;(Platform.java:582) E/AndroidRuntime(19579): \r\nat jnr.ffi.Platform$Linux.&lt;init&gt;(Platform.java:730) E/AndroidRuntime(19579): \t\r\nat jnr.ffi.Platform.determinePlatform(Platform.java:193) E/AndroidRuntime(19579): \t\r\nat jnr.ffi.Platform.determinePlatform(Platform.java:211) E/AndroidRuntime(19579): \t\r\nat jnr.ffi.Platform.access$000(Platform.java:31) E/AndroidRuntime(19579): \t\r\nat jnr.ffi.Platform$SingletonHolder.&lt;clinit&gt;(Platform.java:40) E/AndroidRuntime(19579): \t\r\nat jnr.ffi.Platform.getNativePlatform(Platform.java:327) E/AndroidRuntime(19579): \t\r\nat jnr.unixsocket.SockAddrUnix.&lt;clinit&gt;(SockAddrUnix.java:34) E/AndroidRuntime(19579): \t\r\nat jnr.unixsocket.SockAddrUnix.create(SockAddrUnix.java:174) E/AndroidRuntime(19579): \t\r\nat jnr.unixsocket.UnixSocketAddress.&lt;init&gt;(UnixSocketAddress.java:47) E/AndroidRuntime(19579): \t\r\nat com.example.grpc_proxy.unixdomainsockets.UnixDomainServerSocketFactory$UnixDomainServerSocket.bind(UnixDomainServerSocketFactory.java:54) E/AndroidRuntime(19579): \t\r\nat java.net.ServerSocket.bind(ServerSocket.java:331) E/AndroidRuntime(19579): \t\r\nat io.grpc.okhttp.OkHttpServer.start(OkHttpServer.java:79) E/AndroidRuntime(19579): \t\r\nat io.grpc.internal.ServerImpl.start(ServerImpl.java:185) E/AndroidRuntime(19579): \t\r\nat io.grpc.internal.ServerImpl.start(ServerImpl.java:94)\r\n```\r\n\r\n\r\nSo how can I use Unix domain socket for android as a server with gRPC.LocalServerSocket isn&#39;t a serverSocket,so it can&#39;t be returned.","title":"how can I use Unix Domain Socket in Android both server and client,with gRPC","body":"<p>I want to use Unix Domain Socket in android-java with grpc server.And I use the example from okhttp:<a href=\"https://github.com/square/okhttp/blob/master/samples/unixdomainsockets/src/main/java/okhttp3/unixdomainsockets/UnixDomainServerSocketFactory.java\" rel=\"nofollow noreferrer\">https://github.com/square/okhttp/blob/master/samples/unixdomainsockets/src/main/java/okhttp3/unixdomainsockets/UnixDomainServerSocketFactory.java</a></p>\n<p>I have tried this:</p>\n<pre><code>InetSocketAddress address = new InetSocketAddress(&quot;localhost&quot;, port); \nServer server = OkHttpServerBuilder.forPort(address,InsecureServerCredentials.create())\n.socketFactory(new UnixDomainServerSocketFactory(socketFile)) \n.build().start();\n</code></pre>\n<p>But I got an error :</p>\n<pre><code>java.lang.ExceptionInInitializerError: Cannot determine cpu address size E/AndroidRuntime(19579):   \nat jnr.ffi.Platform.calculateAddressSize(Platform.java:314) E/AndroidRuntime(19579):    \nat jnr.ffi.Platform.&lt;init&gt;(Platform.java:290) E/AndroidRuntime(19579):  \nat jnr.ffi.Platform.&lt;init&gt;(Platform.java:31) E/AndroidRuntime(19579):   \nat jnr.ffi.Platform$Supported.&lt;init&gt;(Platform.java:582) E/AndroidRuntime(19579): \nat jnr.ffi.Platform$Linux.&lt;init&gt;(Platform.java:730) E/AndroidRuntime(19579):    \nat jnr.ffi.Platform.determinePlatform(Platform.java:193) E/AndroidRuntime(19579):   \nat jnr.ffi.Platform.determinePlatform(Platform.java:211) E/AndroidRuntime(19579):   \nat jnr.ffi.Platform.access$000(Platform.java:31) E/AndroidRuntime(19579):   \nat jnr.ffi.Platform$SingletonHolder.&lt;clinit&gt;(Platform.java:40) E/AndroidRuntime(19579):     \nat jnr.ffi.Platform.getNativePlatform(Platform.java:327) E/AndroidRuntime(19579):   \nat jnr.unixsocket.SockAddrUnix.&lt;clinit&gt;(SockAddrUnix.java:34) E/AndroidRuntime(19579):  \nat jnr.unixsocket.SockAddrUnix.create(SockAddrUnix.java:174) E/AndroidRuntime(19579):   \nat jnr.unixsocket.UnixSocketAddress.&lt;init&gt;(UnixSocketAddress.java:47) E/AndroidRuntime(19579):  \nat com.example.grpc_proxy.unixdomainsockets.UnixDomainServerSocketFactory$UnixDomainServerSocket.bind(UnixDomainServerSocketFactory.java:54) E/AndroidRuntime(19579):   \nat java.net.ServerSocket.bind(ServerSocket.java:331) E/AndroidRuntime(19579):   \nat io.grpc.okhttp.OkHttpServer.start(OkHttpServer.java:79) E/AndroidRuntime(19579):     \nat io.grpc.internal.ServerImpl.start(ServerImpl.java:185) E/AndroidRuntime(19579):  \nat io.grpc.internal.ServerImpl.start(ServerImpl.java:94)\n</code></pre>\n<p>So how can I use Unix domain socket for android as a server with gRPC.LocalServerSocket isn't a serverSocket,so it can't be returned.</p>\n"},{"tags":["java","arraylist","foreach"],"comments":[{"owner":{"account_id":445619,"reputation":7236,"user_id":838180,"accept_rate":88,"display_name":"bilash.saha"},"score":0,"creation_date":1321104490,"post_id":8104692,"comment_id":9937477,"body_markdown":"http://www.javacodegeeks.com/2011/05/avoid-concurrentmodificationexception.html","body":"<a href=\"http://www.javacodegeeks.com/2011/05/avoid-concurrentmodificationexception.html\" rel=\"nofollow noreferrer\">javacodegeeks.com/2011/05/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":130400,"reputation":52061,"user_id":329637,"accept_rate":75,"display_name":"RoflcoptrException"},"score":3,"creation_date":1321104527,"post_id":8104702,"comment_id":9937485,"body_markdown":"I should have mentioned that i remove the elements in another part of the code and not the loop itself.","body":"I should have mentioned that i remove the elements in another part of the code and not the loop itself."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1321104653,"post_id":8104702,"comment_id":9937498,"body_markdown":"@Roflcoptr: Well it&#39;s hard to answer without seeing how the two bits of code interact. Basically, you can&#39;t do that. It&#39;s not obvious whether cloning the list first would help, without seeing how it all hangs together. Can you give more details in your question?","body":"@Roflcoptr: Well it&#39;s hard to answer without seeing how the two bits of code interact. Basically, you can&#39;t do that. It&#39;s not obvious whether cloning the list first would help, without seeing how it all hangs together. Can you give more details in your question?"},{"owner":{"account_id":130400,"reputation":52061,"user_id":329637,"accept_rate":75,"display_name":"RoflcoptrException"},"score":0,"creation_date":1321104725,"post_id":8104702,"comment_id":9937509,"body_markdown":"I know that cloning the list would help, but I don&#39;t know if it is a good approach. But I&#39;ll add some more code.","body":"I know that cloning the list would help, but I don&#39;t know if it is a good approach. But I&#39;ll add some more code."},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1321104775,"post_id":8104702,"comment_id":9937515,"body_markdown":"@Roflcoptr Are you using more than one thread? If you are looping  while removing in code called in the loop, you need to loop over a copy of the list, or use a decreasing index, or use a list which does get CME.","body":"@Roflcoptr Are you using more than one thread? If you are looping  while removing in code called in the loop, you need to loop over a copy of the list, or use a decreasing index, or use a list which does get CME."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1321105150,"post_id":8104702,"comment_id":9937556,"body_markdown":"@Roflcoptr: So could you just pass the iterator down instead? Why does `removeA` need to remove it *directly* from the collection? Does `removeA` even need to *know* about the rest of the collection? Could it actually just return a `boolean` to say whether or not it *should* be removed? Basically, the design of your code is encouraging problems here - calling arbitrary code which you don&#39;t control while iterating over a collection which can also be modified by other code is fundamentally problematic.","body":"@Roflcoptr: So could you just pass the iterator down instead? Why does <code>removeA</code> need to remove it <i>directly</i> from the collection? Does <code>removeA</code> even need to <i>know</i> about the rest of the collection? Could it actually just return a <code>boolean</code> to say whether or not it <i>should</i> be removed? Basically, the design of your code is encouraging problems here - calling arbitrary code which you don&#39;t control while iterating over a collection which can also be modified by other code is fundamentally problematic."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1321105231,"post_id":8104702,"comment_id":9937560,"body_markdown":"Cloning the list *may* be the best bet... but presumably `doSomething` could *also* add something to the list - how would you want that to be handled? Perhaps `doSomething` should be indicating that it wants something removed instead?","body":"Cloning the list <i>may</i> be the best bet... but presumably <code>doSomething</code> could <i>also</i> add something to the list - how would you want that to be handled? Perhaps <code>doSomething</code> should be indicating that it wants something removed instead?"},{"owner":{"account_id":130400,"reputation":52061,"user_id":329637,"accept_rate":75,"display_name":"RoflcoptrException"},"score":0,"creation_date":1321105492,"post_id":8104702,"comment_id":9937574,"body_markdown":"@JonSkeet doSomething() does not add something to the list, just possible remove it. I think cloning is a simple solution, but unfortunately i have a ugly cast then. Or is use a for loops that decrements through the list.","body":"@JonSkeet doSomething() does not add something to the list, just possible remove it. I think cloning is a simple solution, but unfortunately i have a ugly cast then. Or is use a for loops that decrements through the list."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1321106329,"post_id":8104702,"comment_id":9937690,"body_markdown":"@Roflcoptr: But what if `doSomething()` decided to remove a *different* value from the list? There&#39;s a problem of encapsulation here, fundamentally. What&#39;s `doSomething` meant to do? Rather than it being able to remove items directly, could it decide whether or not the value *should* be removed, and let the iterating code do the removal?","body":"@Roflcoptr: But what if <code>doSomething()</code> decided to remove a <i>different</i> value from the list? There&#39;s a problem of encapsulation here, fundamentally. What&#39;s <code>doSomething</code> meant to do? Rather than it being able to remove items directly, could it decide whether or not the value <i>should</i> be removed, and let the iterating code do the removal?"},{"owner":{"account_id":130400,"reputation":52061,"user_id":329637,"accept_rate":75,"display_name":"RoflcoptrException"},"score":0,"creation_date":1321106481,"post_id":8104702,"comment_id":9937706,"body_markdown":"@JonSkeet What do you mean by a different value? And why should it be a problem when using clone?","body":"@JonSkeet What do you mean by a different value? And why should it be a problem when using clone?"},{"owner":{"account_id":130400,"reputation":52061,"user_id":329637,"accept_rate":75,"display_name":"RoflcoptrException"},"score":0,"creation_date":1321108951,"post_id":8104702,"comment_id":9938044,"body_markdown":"@JonSkeet: Ok I think I&#39;ve solved the problem. If I just use a for (int i ....) loop then I don&#39;t have this problem..","body":"@JonSkeet: Ok I think I&#39;ve solved the problem. If I just use a for (int i ....) loop then I don&#39;t have this problem.."},{"owner":{"account_id":2264130,"reputation":38917,"user_id":1993366,"accept_rate":86,"display_name":"vikingsteve"},"score":0,"creation_date":1437051116,"post_id":8104702,"comment_id":50876444,"body_markdown":"@JonSkeet small point: `originalList.removeAll()` has method signature `Collection` (rather than more specifically, `List`). So `valuesToRemove` could be, for example, a `List` or a `Set`.","body":"@JonSkeet small point: <code>originalList.removeAll()</code> has method signature <code>Collection</code> (rather than more specifically, <code>List</code>). So <code>valuesToRemove</code> could be, for example, a <code>List</code> or a <code>Set</code>."},{"owner":{"account_id":3482475,"reputation":27250,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"score":2,"creation_date":1464676890,"post_id":8104702,"comment_id":62566679,"body_markdown":"This solution also leads to java.util.ConcurrentModificationException, see http://stackoverflow.com/a/18448699/2914140.","body":"This solution also leads to java.util.ConcurrentModificationException, see <a href=\"http://stackoverflow.com/a/18448699/2914140\">stackoverflow.com/a/18448699/2914140</a>."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1464684050,"post_id":8104702,"comment_id":62570918,"body_markdown":"@CoolMind: Um, no it doesn&#39;t. The answer you&#39;ve linked to is equivalent to mine - what difference do you think there is?","body":"@CoolMind: Um, no it doesn&#39;t. The answer you&#39;ve linked to is equivalent to mine - what difference do you think there is?"},{"owner":{"account_id":3482475,"reputation":27250,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"score":0,"creation_date":1464686336,"post_id":8104702,"comment_id":62572333,"body_markdown":"@JonSkeet, you are right, but in my case it raised the exception, but another variant worked. Sorry.","body":"@JonSkeet, you are right, but in my case it raised the exception, but another variant worked. Sorry."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1464688851,"post_id":8104702,"comment_id":62574131,"body_markdown":"@CoolMind: Without multiple threads, this code should be fine.","body":"@CoolMind: Without multiple threads, this code should be fine."},{"owner":{"account_id":1311937,"reputation":1459,"user_id":1259763,"accept_rate":73,"display_name":"Federico Alvarez"},"score":0,"creation_date":1507128689,"post_id":8104702,"comment_id":80089552,"body_markdown":"Thanks! My solution was a variation of option 1: cloned the List, iterated through one, changes made in the second, then return the second.","body":"Thanks! My solution was a variation of option 1: cloned the List, iterated through one, changes made in the second, then return the second."},{"owner":{"account_id":91056,"reputation":124874,"user_id":250260,"accept_rate":80,"display_name":"Jorgesys"},"score":0,"creation_date":1548970142,"post_id":8104702,"comment_id":95746849,"body_markdown":"Cloning the list and make changes on it would work but this is the best option to avoid ConcurrentModificationException ( &quot; Without multiple threads, this code should be fine&quot; ) :-) thanks for share Mr. Skeet.","body":"Cloning the list and make changes on it would work but this is the best option to avoid ConcurrentModificationException ( &quot; Without multiple threads, this code should be fine&quot; ) :-) thanks for share Mr. Skeet."},{"owner":{"account_id":13728370,"reputation":454,"user_id":9906495,"display_name":"pujan kc"},"score":0,"creation_date":1653975412,"post_id":8104702,"comment_id":127974668,"body_markdown":"saving life with stack overflow answers since 2011","body":"saving life with stack overflow answers since 2011"}],"tags":[],"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"comment_count":18,"down_vote_count":0,"up_vote_count":429,"is_accepted":true,"score":429,"last_activity_date":1321104284,"creation_date":1321104284,"answer_id":8104702,"question_id":8104692,"body_markdown":"Two options:\r\n\r\n- Create a list of values you wish to remove, *adding* to that list within the loop, then call  `originalList.removeAll(valuesToRemove)` at the end\r\n- Use the `remove()` method on the iterator itself. Note that this means you can&#39;t use the enhanced for loop.\r\n\r\nAs an example of the second option, removing any strings with a length greater than 5 from a list:\r\n\r\n    List&lt;String&gt; list = new ArrayList&lt;String&gt;();\r\n    ...\r\n    for (Iterator&lt;String&gt; iterator = list.iterator(); iterator.hasNext(); ) {\r\n        String value = iterator.next();\r\n        if (value.length() &gt; 5) {\r\n            iterator.remove();\r\n        }\r\n    }","title":"How to avoid java.util.ConcurrentModificationException when iterating through and removing elements from an ArrayList","body":"<p>Two options:</p>\n\n<ul>\n<li>Create a list of values you wish to remove, <em>adding</em> to that list within the loop, then call  <code>originalList.removeAll(valuesToRemove)</code> at the end</li>\n<li>Use the <code>remove()</code> method on the iterator itself. Note that this means you can't use the enhanced for loop.</li>\n</ul>\n\n<p>As an example of the second option, removing any strings with a length greater than 5 from a list:</p>\n\n<pre><code>List&lt;String&gt; list = new ArrayList&lt;String&gt;();\n...\nfor (Iterator&lt;String&gt; iterator = list.iterator(); iterator.hasNext(); ) {\n    String value = iterator.next();\n    if (value.length() &gt; 5) {\n        iterator.remove();\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1199784,"reputation":18304,"user_id":1170677,"accept_rate":54,"display_name":"Adelin"},"score":31,"creation_date":1563535192,"post_id":8104758,"comment_id":100741738,"body_markdown":"and where is the answer to the question ?","body":"and where is the answer to the question ?"},{"owner":{"account_id":329404,"reputation":14849,"user_id":652895,"accept_rate":96,"display_name":"Varun Achar"},"score":6,"creation_date":1564315578,"post_id":8104758,"comment_id":100982669,"body_markdown":"Like it says, *except through the iterator&#39;s own remove or add methods*","body":"Like it says, <i>except through the iterator&#39;s own remove or add methods</i>"}],"tags":[],"owner":{"account_id":329404,"reputation":14849,"user_id":652895,"accept_rate":96,"display_name":"Varun Achar"},"comment_count":2,"down_vote_count":4,"up_vote_count":35,"is_accepted":false,"score":31,"last_activity_date":1321104998,"creation_date":1321104998,"answer_id":8104758,"question_id":8104692,"body_markdown":"From the JavaDocs of the ArrayList\r\n\r\n&gt; The iterators returned by this class&#39;s iterator and listIterator\r\n&gt; methods are fail-fast: if  the list is structurally modified at any\r\n&gt; time after the iterator is created, **in any way except  through the\r\n&gt; iterator&#39;s own remove or add methods**, the iterator will throw a \r\n&gt; ConcurrentModificationException.\r\n\r\n\r\n\r\n","title":"How to avoid java.util.ConcurrentModificationException when iterating through and removing elements from an ArrayList","body":"<p>From the JavaDocs of the ArrayList</p>\n\n<blockquote>\n  <p>The iterators returned by this class's iterator and listIterator\n  methods are fail-fast: if  the list is structurally modified at any\n  time after the iterator is created, <strong>in any way except  through the\n  iterator's own remove or add methods</strong>, the iterator will throw a \n  ConcurrentModificationException.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":5247491,"reputation":4529,"user_id":4192693,"display_name":"Pankaj Nimgade"},"score":0,"creation_date":1435207955,"post_id":8104869,"comment_id":50106012,"body_markdown":"Excellent, I used the same approach, although I loop twice. it makes things simple and no concurrent issues with it :)","body":"Excellent, I used the same approach, although I loop twice. it makes things simple and no concurrent issues with it :)"},{"owner":{"account_id":4962253,"reputation":18492,"user_id":3992939,"accept_rate":73,"display_name":"c0der"},"score":2,"creation_date":1482483189,"post_id":8104869,"comment_id":69798580,"body_markdown":"I don&#39;t see that Iterator has a remove(a) method. The remove() takes no arguments https://docs.oracle.com/javase/8/docs/api/java/util/Iterator.html what am I missing ?","body":"I don&#39;t see that Iterator has a remove(a) method. The remove() takes no arguments <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Iterator.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/util/Iterator.html</a> what am I missing ?"},{"owner":{"account_id":18011162,"reputation":383,"user_id":13090794,"display_name":"Kasasira"},"score":1,"creation_date":1621842225,"post_id":8104869,"comment_id":119606710,"body_markdown":"@c0der is right. I mean how did this even get voted 5 times...","body":"@c0der is right. I mean how did this even get voted 5 times..."}],"tags":[],"owner":{"account_id":119633,"reputation":7453,"user_id":311455,"accept_rate":63,"display_name":"Bhaskar"},"comment_count":3,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1321106073,"creation_date":1321106073,"answer_id":8104869,"question_id":8104692,"body_markdown":"\r\nOne option is to modify the `removeA` method to this -\r\n\r\n    public void removeA(A a,Iterator&lt;A&gt; iterator) {\r\n         iterator.remove(a);\r\n         }\r\n\r\nBut this would mean your `doSomething()` should be able to pass the `iterator` to the `remove` method. Not a very good idea.\r\n\r\nCan you do this in two step approach : \r\n In the first loop when you iterate over the list , instead of removing the selected elements , *mark* them as *to be deleted*. For this , you may simply copy these elements ( shallow copy ) into another `List`.\r\n\r\n Then , once your iteration is done , simply do a `removeAll` from the first list all elements in the second list.\r\n\r\n\r\n\r\n\r\n\r\n","title":"How to avoid java.util.ConcurrentModificationException when iterating through and removing elements from an ArrayList","body":"<p>One option is to modify the <code>removeA</code> method to this -</p>\n\n<pre><code>public void removeA(A a,Iterator&lt;A&gt; iterator) {\n     iterator.remove(a);\n     }\n</code></pre>\n\n<p>But this would mean your <code>doSomething()</code> should be able to pass the <code>iterator</code> to the <code>remove</code> method. Not a very good idea.</p>\n\n<p>Can you do this in two step approach : \n In the first loop when you iterate over the list , instead of removing the selected elements , <em>mark</em> them as <em>to be deleted</em>. For this , you may simply copy these elements ( shallow copy ) into another <code>List</code>.</p>\n\n<p>Then , once your iteration is done , simply do a <code>removeAll</code> from the first list all elements in the second list.</p>\n"},{"comments":[{"owner":{"account_id":192526,"reputation":17562,"user_id":433718,"accept_rate":77,"display_name":"OneWorld"},"score":2,"creation_date":1434617496,"post_id":16295655,"comment_id":49858911,"body_markdown":"Downvoters should at least leave a comment before downvoting.","body":"Downvoters should at least leave a comment before downvoting."},{"owner":{"account_id":2264130,"reputation":38917,"user_id":1993366,"accept_rate":86,"display_name":"vikingsteve"},"score":2,"creation_date":1437050986,"post_id":16295655,"comment_id":50876341,"body_markdown":"There is nothing inherently wrong with this answer expect maybe that `stones = (...) clone.clone();` is superfluous. Would not `stones = clone;` do the same?","body":"There is nothing inherently wrong with this answer expect maybe that <code>stones = (...) clone.clone();</code> is superfluous. Would not <code>stones = clone;</code> do the same?"},{"owner":{"account_id":2701094,"reputation":547,"user_id":2331809,"display_name":"Zsolt Sky"},"score":0,"creation_date":1561726144,"post_id":16295655,"comment_id":100168464,"body_markdown":"I agree, the second cloning is unnecessary. You can futher simplify this by iterating on the clone and remove elements directly from `stones`. This way you do not even need the `clone` variable:\n\n`for (Stone stone : (ArrayList&lt;Stone&gt;) stones.clone()) {...`","body":"I agree, the second cloning is unnecessary. You can futher simplify this by iterating on the clone and remove elements directly from <code>stones</code>. This way you do not even need the <code>clone</code> variable:  <code>for (Stone stone : (ArrayList&lt;Stone&gt;) stones.clone()) {...</code>"}],"tags":[],"owner":{"account_id":1160493,"reputation":209,"user_id":1140084,"display_name":"Arjen Rodenhuis"},"comment_count":3,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1367312211,"creation_date":1367311412,"answer_id":16295655,"question_id":8104692,"body_markdown":"&quot;Should I clone the list first?&quot;\r\n\r\nThat will be the easiest solution, remove from the clone, and copy the clone back after removal.\r\n\r\nAn example from my rummikub game:\r\n\r\n    SuppressWarnings(&quot;unchecked&quot;)\r\n    public void removeStones() {\r\n      ArrayList&lt;Stone&gt; clone = (ArrayList&lt;Stone&gt;) stones.clone();\r\n      // remove the stones moved to the table\r\n      for (Stone stone : stones) {\r\n          if (stone.isOnTable()) {\r\n\t         clone.remove(stone);\r\n          }\r\n      }\r\n      stones = (ArrayList&lt;Stone&gt;) clone.clone();\r\n      sortStones();\r\n    }\r\n","title":"How to avoid java.util.ConcurrentModificationException when iterating through and removing elements from an ArrayList","body":"<p>\"Should I clone the list first?\"</p>\n\n<p>That will be the easiest solution, remove from the clone, and copy the clone back after removal.</p>\n\n<p>An example from my rummikub game:</p>\n\n<pre><code>SuppressWarnings(\"unchecked\")\npublic void removeStones() {\n  ArrayList&lt;Stone&gt; clone = (ArrayList&lt;Stone&gt;) stones.clone();\n  // remove the stones moved to the table\n  for (Stone stone : stones) {\n      if (stone.isOnTable()) {\n         clone.remove(stone);\n      }\n  }\n  stones = (ArrayList&lt;Stone&gt;) clone.clone();\n  sortStones();\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7078904,"reputation":345,"user_id":5417974,"display_name":"Luis Carlos"},"score":0,"creation_date":1478700520,"post_id":38218535,"comment_id":68259877,"body_markdown":"I think that you&#39;re doing extra work executing two loops, in worst case the loops would be of the entire list. Would be simplest and less expensive doing it in only one loop.","body":"I think that you&#39;re doing extra work executing two loops, in worst case the loops would be of the entire list. Would be simplest and less expensive doing it in only one loop."},{"owner":{"account_id":1931986,"reputation":3714,"user_id":3990012,"accept_rate":64,"display_name":"serup"},"score":0,"creation_date":1478853955,"post_id":38218535,"comment_id":68326999,"body_markdown":"I do not think you can remove object from within first loop, hence the need for extra removal loop, also removal loop is only objects for removal - perhaps you could write an example with only one loop, I would like to see it - thanks @LuisCarlos","body":"I do not think you can remove object from within first loop, hence the need for extra removal loop, also removal loop is only objects for removal - perhaps you could write an example with only one loop, I would like to see it - thanks @LuisCarlos"},{"owner":{"account_id":7078904,"reputation":345,"user_id":5417974,"display_name":"Luis Carlos"},"score":0,"creation_date":1478858591,"post_id":38218535,"comment_id":68329440,"body_markdown":"As you say with this code you can&#39;t remove any element inside the for-loop because it causes the java.util.ConcurrentModificationException exception. However you could use a basic for. Here I write an example using part of your code.","body":"As you say with this code you can&#39;t remove any element inside the for-loop because it causes the java.util.ConcurrentModificationException exception. However you could use a basic for. Here I write an example using part of your code."},{"owner":{"account_id":7078904,"reputation":345,"user_id":5417974,"display_name":"Luis Carlos"},"score":1,"creation_date":1478859160,"post_id":38218535,"comment_id":68329762,"body_markdown":"for(int i = 0; i &lt; customersTableViewItems.size(); i++) {\n        diff = currentTimestamp.getValue().getTime() - customersTableViewItems.get(i).timestamp.getValue().getTime();\n        diffSeconds = diff / 1000 % 60;\n        if(diffSeconds &gt; 10) {\n            customersTableViewItems.remove(i--);\n        }\n    }\n\nIs important i-- because you don&#39;t want skip any elment.\nAlso you could use the method removeIf(Predicate&lt;? super E&gt; filter) provided by ArrayList class.\nHope this help","body":"for(int i = 0; i &lt; customersTableViewItems.size(); i++) {         diff = currentTimestamp.getValue().getTime() - customersTableViewItems.get(i).timestamp.getValue().getTime(&zwnj;&#8203;);         diffSeconds = diff / 1000 % 60;         if(diffSeconds &gt; 10) {             customersTableViewItems.remove(i--);         }     }  Is important i-- because you don&#39;t want skip any elment. Also you could use the method removeIf(Predicate&lt;? super E&gt; filter) provided by ArrayList class. Hope this help"},{"owner":{"account_id":1931986,"reputation":3714,"user_id":3990012,"accept_rate":64,"display_name":"serup"},"score":0,"creation_date":1478861100,"post_id":38218535,"comment_id":68330962,"body_markdown":"@LuisCarlos, if this is possible, then why the exception when using the other way? perhaps this is not safe, anyway thanks for your example","body":"@LuisCarlos, if this is possible, then why the exception when using the other way? perhaps this is not safe, anyway thanks for your example"},{"owner":{"account_id":7078904,"reputation":345,"user_id":5417974,"display_name":"Luis Carlos"},"score":1,"creation_date":1478865821,"post_id":38218535,"comment_id":68333550,"body_markdown":"The exception occurs because in for-loop there as an active reference to iterator of the list. In the normal for, there&#39;s not a reference and you have more flexibility to change the data.\nHope this help","body":"The exception occurs because in for-loop there as an active reference to iterator of the list. In the normal for, there&#39;s not a reference and you have more flexibility to change the data. Hope this help"}],"tags":[],"owner":{"account_id":1931986,"reputation":3714,"user_id":3990012,"accept_rate":64,"display_name":"serup"},"comment_count":6,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1467790503,"creation_date":1467790503,"answer_id":38218535,"question_id":8104692,"body_markdown":"Here is an example where I use a different list to add the objects for removal, then afterwards I use stream.foreach to remove elements from original list :\r\n\r\n   \tprivate ObservableList&lt;CustomerTableEntry&gt; customersTableViewItems = FXCollections.observableArrayList();\r\n    ...\r\n   \tprivate void removeOutdatedRowsElementsFromCustomerView()\r\n\t{\r\n\t\tObjectProperty&lt;TimeStamp&gt; currentTimestamp = new SimpleObjectProperty&lt;&gt;(TimeStamp.getCurrentTime());\r\n\t\tlong diff;\r\n\t\tlong diffSeconds;\r\n\t\tList&lt;Object&gt; objectsToRemove = new ArrayList&lt;&gt;();\r\n\t\tfor(CustomerTableEntry item: customersTableViewItems) {\r\n\t\t\tdiff = currentTimestamp.getValue().getTime() - item.timestamp.getValue().getTime();\r\n\t\t\tdiffSeconds = diff / 1000 % 60;\r\n\t\t\tif(diffSeconds &gt; 10) {\r\n\t\t\t\t// Element has been idle for too long, meaning no communication, hence remove it\r\n\t\t\t\tSystem.out.printf(&quot;- Idle element [%s] - will be removed\\n&quot;, item.getUserName());\r\n\t\t\t\tobjectsToRemove.add(item);\r\n\t\t\t}\r\n\t\t}\r\n\t\tobjectsToRemove.stream().forEach(o -&gt; customersTableViewItems.remove(o));\r\n\t}\r\n\r\n\r\n","title":"How to avoid java.util.ConcurrentModificationException when iterating through and removing elements from an ArrayList","body":"<p>Here is an example where I use a different list to add the objects for removal, then afterwards I use stream.foreach to remove elements from original list :</p>\n\n<pre><code>private ObservableList&lt;CustomerTableEntry&gt; customersTableViewItems = FXCollections.observableArrayList();\n...\nprivate void removeOutdatedRowsElementsFromCustomerView()\n{\n    ObjectProperty&lt;TimeStamp&gt; currentTimestamp = new SimpleObjectProperty&lt;&gt;(TimeStamp.getCurrentTime());\n    long diff;\n    long diffSeconds;\n    List&lt;Object&gt; objectsToRemove = new ArrayList&lt;&gt;();\n    for(CustomerTableEntry item: customersTableViewItems) {\n        diff = currentTimestamp.getValue().getTime() - item.timestamp.getValue().getTime();\n        diffSeconds = diff / 1000 % 60;\n        if(diffSeconds &gt; 10) {\n            // Element has been idle for too long, meaning no communication, hence remove it\n            System.out.printf(\"- Idle element [%s] - will be removed\\n\", item.getUserName());\n            objectsToRemove.add(item);\n        }\n    }\n    objectsToRemove.stream().forEach(o -&gt; customersTableViewItems.remove(o));\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1472133,"reputation":587,"user_id":1383416,"accept_rate":100,"display_name":"Johntor"},"score":5,"creation_date":1480948207,"post_id":39120559,"comment_id":69162363,"body_markdown":"This is not correct!!! when you remove an element, the next is taking its position and while i increases the next element is not checked in the next iteration.\nIn this case you should go for( int i =  lStringList.size(); i&gt;-1; i-- )","body":"This is not correct!!! when you remove an element, the next is taking its position and while i increases the next element is not checked in the next iteration. In this case you should go for( int i =  lStringList.size(); i&gt;-1; i-- )"},{"owner":{"account_id":2541459,"reputation":688,"user_id":2207175,"display_name":"suhas0sn07"},"score":2,"creation_date":1490868500,"post_id":39120559,"comment_id":73308988,"body_markdown":"Agree! Alternate is to perform i--; in if condition within for loop.","body":"Agree! Alternate is to perform i--; in if condition within for loop."},{"owner":{"account_id":12296207,"reputation":1838,"user_id":8971773,"accept_rate":25,"display_name":"Kira Resari"},"score":1,"creation_date":1589954311,"post_id":39120559,"comment_id":109493661,"body_markdown":"I think this answer was edited to address the issues in the above comments, so as it is now it works fine, at least for me.","body":"I think this answer was edited to address the issues in the above comments, so as it is now it works fine, at least for me."},{"owner":{"account_id":2541459,"reputation":688,"user_id":2207175,"display_name":"suhas0sn07"},"score":0,"creation_date":1634532311,"post_id":39120559,"comment_id":123040378,"body_markdown":"@KiraResari, Yes. I have updated the answer to address the issue.","body":"@KiraResari, Yes. I have updated the answer to address the issue."},{"owner":{"account_id":22099826,"reputation":93,"user_id":16356467,"display_name":"bic55"},"score":0,"creation_date":1699258893,"post_id":39120559,"comment_id":136504208,"body_markdown":"Thank you. Your answer helped me in solving my problem :)","body":"Thank you. Your answer helped me in solving my problem :)"}],"tags":[],"owner":{"account_id":2541459,"reputation":688,"user_id":2207175,"display_name":"suhas0sn07"},"comment_count":5,"down_vote_count":1,"up_vote_count":30,"is_accepted":false,"score":29,"last_activity_date":1516338292,"creation_date":1472033952,"answer_id":39120559,"question_id":8104692,"body_markdown":"You are trying to remove value from list in advanced &quot;for loop&quot;, which is not possible, even if you apply any trick (which you did in your code).\r\nBetter way is to code iterator level as other advised here.\r\n\r\nI wonder how people have not suggested traditional for loop approach.\r\n\r\n    for( int i = 0; i &lt; lStringList.size(); i++ )\r\n    {\r\n        String lValue = lStringList.get( i );\r\n        if(lValue.equals(&quot;_Not_Required&quot;))\r\n        {\r\n             lStringList.remove(lValue);\r\n             i--; \r\n        }  \r\n    }\r\n\r\nThis works as well.","title":"How to avoid java.util.ConcurrentModificationException when iterating through and removing elements from an ArrayList","body":"<p>You are trying to remove value from list in advanced \"for loop\", which is not possible, even if you apply any trick (which you did in your code).\nBetter way is to code iterator level as other advised here.</p>\n\n<p>I wonder how people have not suggested traditional for loop approach.</p>\n\n<pre><code>for( int i = 0; i &lt; lStringList.size(); i++ )\n{\n    String lValue = lStringList.get( i );\n    if(lValue.equals(\"_Not_Required\"))\n    {\n         lStringList.remove(lValue);\n         i--; \n    }  \n}\n</code></pre>\n\n<p>This works as well.</p>\n"},{"tags":[],"owner":{"account_id":5127914,"reputation":1434,"user_id":4109249,"display_name":"XMB5"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1473530328,"creation_date":1473530328,"answer_id":39429000,"question_id":8104692,"body_markdown":"Do somehting simple like this:\r\n\r\n    for (Object object: (ArrayList&lt;String&gt;) list.clone()) {\r\n        list.remove(object);\r\n    }","title":"How to avoid java.util.ConcurrentModificationException when iterating through and removing elements from an ArrayList","body":"<p>Do somehting simple like this:</p>\n\n<pre><code>for (Object object: (ArrayList&lt;String&gt;) list.clone()) {\n    list.remove(object);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7214768,"reputation":121,"user_id":5507661,"display_name":"Marcus"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1485127671,"creation_date":1485127671,"answer_id":41797331,"question_id":8104692,"body_markdown":"You should really just iterate back the array in the traditional way\r\n\r\nEvery time you remove an element from the list, the elements after will be push forward. As long as you don&#39;t change elements other than the iterating one, the following code should work.\r\n\r\n    public class Test(){\r\n        private ArrayList&lt;A&gt; abc = new ArrayList&lt;A&gt;();\r\n\r\n        public void doStuff(){\r\n            for(int i = (abc.size() - 1); i &gt;= 0; i--) \r\n                abc.get(i).doSomething();\r\n        }\r\n\r\n        public void removeA(A a){\r\n            abc.remove(a);\r\n        }\r\n    }","title":"How to avoid java.util.ConcurrentModificationException when iterating through and removing elements from an ArrayList","body":"<p>You should really just iterate back the array in the traditional way</p>\n\n<p>Every time you remove an element from the list, the elements after will be push forward. As long as you don't change elements other than the iterating one, the following code should work.</p>\n\n<pre><code>public class Test(){\n    private ArrayList&lt;A&gt; abc = new ArrayList&lt;A&gt;();\n\n    public void doStuff(){\n        for(int i = (abc.size() - 1); i &gt;= 0; i--) \n            abc.get(i).doSomething();\n    }\n\n    public void removeA(A a){\n        abc.remove(a);\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":14416488,"reputation":437,"user_id":10413818,"display_name":"Ahmed Maad"},"score":1,"creation_date":1652984595,"post_id":42607470,"comment_id":127746429,"body_markdown":"in Android, Call requires API level 24 (Android Nougat)","body":"in Android, Call requires API level 24 (Android Nougat)"}],"tags":[],"owner":{"account_id":3585630,"reputation":452,"user_id":3166352,"display_name":"ggeo"},"comment_count":1,"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1488711251,"creation_date":1488711251,"answer_id":42607470,"question_id":8104692,"body_markdown":"In Java 8 you can use the Collection Interface and do this by calling the removeIf method:\r\n\r\n    yourList.removeIf((A a) -&gt; a.value == 2);\r\n\r\nMore information can be found [here][1]\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html#removeIf-java.util.function.Predicate-","title":"How to avoid java.util.ConcurrentModificationException when iterating through and removing elements from an ArrayList","body":"<p>In Java 8 you can use the Collection Interface and do this by calling the removeIf method:</p>\n\n<pre><code>yourList.removeIf((A a) -&gt; a.value == 2);\n</code></pre>\n\n<p>More information can be found <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html#removeIf-java.util.function.Predicate-\" rel=\"noreferrer\">here</a></p>\n"},{"comments":[{"owner":{"account_id":2701094,"reputation":547,"user_id":2331809,"display_name":"Zsolt Sky"},"score":1,"creation_date":1571064888,"post_id":45242961,"comment_id":103107126,"body_markdown":"You avoided the `java.util.ConcurrentModificationException` by not removing anything from the list. Tricky. :)\nYou can not really call this &quot;the normal way&quot; to iterate a list.","body":"You avoided the <code>java.util.ConcurrentModificationException</code> by not removing anything from the list. Tricky. :) You can not really call this &quot;the normal way&quot; to iterate a list."}],"tags":[],"owner":{"account_id":11254205,"reputation":75,"user_id":8254518,"display_name":"Tacila"},"comment_count":1,"down_vote_count":2,"up_vote_count":7,"is_accepted":false,"score":5,"last_activity_date":1503856915,"creation_date":1500656258,"answer_id":45242961,"question_id":8104692,"body_markdown":"Do the loop in the normal way, the `java.util.ConcurrentModificationException` is an error related to the elements that are accessed.\r\n\r\nSo try:\r\n\r\n \r\n    for(int i = 0; i &lt; list.size(); i++){\r\n        lista.get(i).action();\r\n    }","title":"How to avoid java.util.ConcurrentModificationException when iterating through and removing elements from an ArrayList","body":"<p>Do the loop in the normal way, the <code>java.util.ConcurrentModificationException</code> is an error related to the elements that are accessed.</p>\n\n<p>So try:</p>\n\n<pre><code>for(int i = 0; i &lt; list.size(); i++){\n    lista.get(i).action();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2701094,"reputation":547,"user_id":2331809,"display_name":"Zsolt Sky"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1517470423,"creation_date":1517470423,"answer_id":48557520,"question_id":8104692,"body_markdown":"An alternative Java 8 solution using stream:\r\n\r\n            theList = theList.stream()\r\n                .filter(element -&gt; !shouldBeRemoved(element))\r\n                .collect(Collectors.toList());\r\n\r\nIn Java 7 you can use Guava instead:\r\n\r\n            theList = FluentIterable.from(theList)\r\n                .filter(new Predicate&lt;String&gt;() {\r\n                    @Override\r\n                    public boolean apply(String element) {\r\n                        return !shouldBeRemoved(element);\r\n                    }\r\n                })\r\n                .toImmutableList();\r\n\r\nNote, that the Guava example results in an immutable list which may or may not be what you want.\r\n","title":"How to avoid java.util.ConcurrentModificationException when iterating through and removing elements from an ArrayList","body":"<p>An alternative Java 8 solution using stream:</p>\n\n<pre><code>        theList = theList.stream()\n            .filter(element -&gt; !shouldBeRemoved(element))\n            .collect(Collectors.toList());\n</code></pre>\n\n<p>In Java 7 you can use Guava instead:</p>\n\n<pre><code>        theList = FluentIterable.from(theList)\n            .filter(new Predicate&lt;String&gt;() {\n                @Override\n                public boolean apply(String element) {\n                    return !shouldBeRemoved(element);\n                }\n            })\n            .toImmutableList();\n</code></pre>\n\n<p>Note, that the Guava example results in an immutable list which may or may not be what you want.</p>\n"},{"comments":[{"owner":{"account_id":5154831,"reputation":124,"user_id":4128336,"display_name":"Indra K"},"score":0,"creation_date":1517474622,"post_id":48558400,"comment_id":84112752,"body_markdown":"Else, we can use concurrent list which is available in concurrent package, so that you can perform remove and add operations while iterating. For example see the below code snippet.       ArrayList&lt;String&gt;  names = new ArrayList&lt;String&gt;();\n\t\tCopyOnWriteArrayList&lt;String&gt; copyNames = new CopyOnWriteArrayList&lt;String&gt;(names);\n\t\t\n\t\tfor(String name : copyNames){\n\t\t\tif(name.equals(&quot;def&quot;)){\n\t\t\t\tcopyNames.remove(&quot;def&quot;);\n\t\t\t}\n\t\t}","body":"Else, we can use concurrent list which is available in concurrent package, so that you can perform remove and add operations while iterating. For example see the below code snippet.       ArrayList&lt;String&gt;  names = new ArrayList&lt;String&gt;(); \t\tCopyOnWriteArrayList&lt;String&gt; copyNames = new CopyOnWriteArrayList&lt;String&gt;(names); \t\t \t\tfor(String name : copyNames){ \t\t\tif(name.equals(&quot;def&quot;)){ \t\t\t\tcopyNames.remove(&quot;def&quot;); \t\t\t} \t\t}"},{"owner":{"account_id":5154831,"reputation":124,"user_id":4128336,"display_name":"Indra K"},"score":0,"creation_date":1517474773,"post_id":48558400,"comment_id":84112824,"body_markdown":"CopyOnWriteArrayList gonna be costliest operations.","body":"CopyOnWriteArrayList gonna be costliest operations."}],"tags":[],"owner":{"account_id":5154831,"reputation":124,"user_id":4128336,"display_name":"Indra K"},"comment_count":2,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1517474097,"creation_date":1517474097,"answer_id":48558400,"question_id":8104692,"body_markdown":"While iterating the list, if you want to remove the element is possible. Let see below my examples,     \r\n\r\n    ArrayList&lt;String&gt;  names = new ArrayList&lt;String&gt;();\r\n    \t\tnames.add(&quot;abc&quot;);\r\n    \t\tnames.add(&quot;def&quot;);\r\n    \t\tnames.add(&quot;ghi&quot;);\r\n    \t\tnames.add(&quot;xyz&quot;);\r\n\r\nI have the above names of Array list. And i want to remove the &quot;def&quot; name from the above list, \r\n\r\n    for(String name : names){\r\n    \tif(name.equals(&quot;def&quot;)){\r\n    \t\tnames.remove(&quot;def&quot;);\r\n    \t}\r\n    }\r\n\r\nThe above code throws the **ConcurrentModificationException** exception because you are modifying the list while iterating.   \r\n\r\nSo, to remove the &quot;def&quot; name  from Arraylist by doing this way,\r\n\r\n    Iterator&lt;String&gt; itr = names.iterator();    \t\t\r\n    while(itr.hasNext()){\r\n    \tString name = itr.next();\r\n    \tif(name.equals(&quot;def&quot;)){\r\n    \t\titr.remove();\r\n    \t}\r\n    }\r\n\r\n   The above code, through iterator we can remove the &quot;def&quot; name from the Arraylist and try to print the array, you would be see the below output.\r\n\r\nOutput :  [abc, ghi, xyz]\r\n\r\n\r\n","title":"How to avoid java.util.ConcurrentModificationException when iterating through and removing elements from an ArrayList","body":"<p>While iterating the list, if you want to remove the element is possible. Let see below my examples,     </p>\n\n<pre><code>ArrayList&lt;String&gt;  names = new ArrayList&lt;String&gt;();\n        names.add(\"abc\");\n        names.add(\"def\");\n        names.add(\"ghi\");\n        names.add(\"xyz\");\n</code></pre>\n\n<p>I have the above names of Array list. And i want to remove the \"def\" name from the above list, </p>\n\n<pre><code>for(String name : names){\n    if(name.equals(\"def\")){\n        names.remove(\"def\");\n    }\n}\n</code></pre>\n\n<p>The above code throws the <strong>ConcurrentModificationException</strong> exception because you are modifying the list while iterating.   </p>\n\n<p>So, to remove the \"def\" name  from Arraylist by doing this way,</p>\n\n<pre><code>Iterator&lt;String&gt; itr = names.iterator();            \nwhile(itr.hasNext()){\n    String name = itr.next();\n    if(name.equals(\"def\")){\n        itr.remove();\n    }\n}\n</code></pre>\n\n<p>The above code, through iterator we can remove the \"def\" name from the Arraylist and try to print the array, you would be see the below output.</p>\n\n<p>Output :  [abc, ghi, xyz]</p>\n"},{"comments":[{"owner":{"account_id":2701094,"reputation":547,"user_id":2331809,"display_name":"Zsolt Sky"},"score":0,"creation_date":1660049396,"post_id":49233087,"comment_id":129436541,"body_markdown":"I do not think this works. After removing the element at index 0 the second element becomes the first (index 0). In the next iteration we skip this element and remove the one at index 1. Plus, the original question was not how to remove all elements.","body":"I do not think this works. After removing the element at index 0 the second element becomes the first (index 0). In the next iteration we skip this element and remove the one at index 1. Plus, the original question was not how to remove all elements."}],"tags":[],"owner":{"account_id":12546935,"reputation":1675,"user_id":9129885,"display_name":"Shubham Chopra"},"comment_count":1,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1605798370,"creation_date":1520850911,"answer_id":49233087,"question_id":8104692,"body_markdown":"Instead of using For each loop, use normal for loop. for example,the below code removes all the element in the array list without giving java.util.ConcurrentModificationException. You can modify the condition in the loop according to your use case.\r\n\r\n    for(int i=0; i&lt;abc.size(); i++)  {\r\n           e.remove(i);\r\n     }","title":"How to avoid java.util.ConcurrentModificationException when iterating through and removing elements from an ArrayList","body":"<p>Instead of using For each loop, use normal for loop. for example,the below code removes all the element in the array list without giving java.util.ConcurrentModificationException. You can modify the condition in the loop according to your use case.</p>\n<pre><code>for(int i=0; i&lt;abc.size(); i++)  {\n       e.remove(i);\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":946995,"reputation":43616,"user_id":974045,"display_name":"Gibolt"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1534833759,"creation_date":1534833759,"answer_id":51942989,"question_id":8104692,"body_markdown":"If your goal is to remove all elements from the list, you can iterate over each item, and then call:\r\n\r\n    list.clear()","title":"How to avoid java.util.ConcurrentModificationException when iterating through and removing elements from an ArrayList","body":"<p>If your goal is to remove all elements from the list, you can iterate over each item, and then call:</p>\n\n<pre><code>list.clear()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14322109,"reputation":1,"user_id":10345144,"display_name":"Becquer Arguello Flores"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1536641175,"creation_date":1536636376,"answer_id":52268221,"question_id":8104692,"body_markdown":"I arrive late I know but I answer this because I think this solution is simple and elegant:\r\n\r\n    List&lt;String&gt; listFixed = new ArrayList&lt;String&gt;();\r\n   \tList&lt;String&gt; dynamicList = new ArrayList&lt;String&gt;();\r\n      \t\r\n    public void fillingList() {\r\n        listFixed.add(&quot;Andrea&quot;);\r\n        listFixed.add(&quot;Susana&quot;);\r\n        listFixed.add(&quot;Oscar&quot;);\r\n        listFixed.add(&quot;Valeria&quot;);\r\n        listFixed.add(&quot;Kathy&quot;);\r\n        listFixed.add(&quot;Laura&quot;);\r\n        listFixed.add(&quot;Ana&quot;);\r\n        listFixed.add(&quot;Becker&quot;);\r\n        listFixed.add(&quot;Abraham&quot;);\r\n        dynamicList.addAll(listFixed);\r\n    }\r\n    \r\n    public void updatingListFixed() {\r\n        for (String newList : dynamicList) {\r\n            if (!listFixed.contains(newList)) {\r\n                listFixed.add(newList);\r\n            }\r\n        }\r\n        \r\n        //this is for add elements if you want eraser also \r\n        \r\n        String removeRegister=&quot;&quot;;\r\n        for (String fixedList : listFixed) {\r\n            if (!dynamicList.contains(fixedList)) {\r\n                removeResgister = fixedList;\r\n            }\r\n        }\r\n        fixedList.remove(removeRegister);\r\n    }\r\n\r\nAll this is for updating from one list to other and you can make all from just one list\r\nand in method updating you check both list and can eraser or add elements betwen list.\r\nThis means both list always it same size","title":"How to avoid java.util.ConcurrentModificationException when iterating through and removing elements from an ArrayList","body":"<p>I arrive late I know but I answer this because I think this solution is simple and elegant:</p>\n\n<pre><code>List&lt;String&gt; listFixed = new ArrayList&lt;String&gt;();\nList&lt;String&gt; dynamicList = new ArrayList&lt;String&gt;();\n\npublic void fillingList() {\n    listFixed.add(\"Andrea\");\n    listFixed.add(\"Susana\");\n    listFixed.add(\"Oscar\");\n    listFixed.add(\"Valeria\");\n    listFixed.add(\"Kathy\");\n    listFixed.add(\"Laura\");\n    listFixed.add(\"Ana\");\n    listFixed.add(\"Becker\");\n    listFixed.add(\"Abraham\");\n    dynamicList.addAll(listFixed);\n}\n\npublic void updatingListFixed() {\n    for (String newList : dynamicList) {\n        if (!listFixed.contains(newList)) {\n            listFixed.add(newList);\n        }\n    }\n\n    //this is for add elements if you want eraser also \n\n    String removeRegister=\"\";\n    for (String fixedList : listFixed) {\n        if (!dynamicList.contains(fixedList)) {\n            removeResgister = fixedList;\n        }\n    }\n    fixedList.remove(removeRegister);\n}\n</code></pre>\n\n<p>All this is for updating from one list to other and you can make all from just one list\nand in method updating you check both list and can eraser or add elements betwen list.\nThis means both list always it same size</p>\n"},{"comments":[{"owner":{"account_id":7015199,"reputation":12602,"user_id":5376789,"accept_rate":90,"display_name":"xskxzr"},"score":0,"creation_date":1541738782,"post_id":53219810,"comment_id":93327155,"body_markdown":"Could you please add some explanation?","body":"Could you please add some explanation?"}],"tags":[],"owner":{"account_id":11709746,"reputation":39,"user_id":8572022,"display_name":"Sebastian Altamirano"},"comment_count":1,"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1541737083,"creation_date":1541737083,"answer_id":53219810,"question_id":8104692,"body_markdown":"Just add a *break* after your *ArrayList.remove(A)* statement","title":"How to avoid java.util.ConcurrentModificationException when iterating through and removing elements from an ArrayList","body":"<p>Just add a <em>break</em> after your <em>ArrayList.remove(A)</em> statement</p>\n"},{"tags":[],"owner":{"account_id":10884080,"reputation":11,"user_id":8009263,"display_name":"nafics"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1544783985,"creation_date":1544782231,"answer_id":53777585,"question_id":8104692,"body_markdown":"Use Iterator instead of Array List\r\n\r\nHave a set be converted to iterator with type match\r\n\r\nAnd move to the next element and remove\r\n   \r\n    Iterator&lt;Insured&gt; itr = insuredSet.iterator();\r\n    while (itr.hasNext()) {\t\r\n        itr.next();\r\n        itr.remove();\r\n    }\r\n\r\nMoving to the next is important here as it should take the index to remove element.\r\n \r\n\r\n\r\n","title":"How to avoid java.util.ConcurrentModificationException when iterating through and removing elements from an ArrayList","body":"<p>Use Iterator instead of Array List</p>\n\n<p>Have a set be converted to iterator with type match</p>\n\n<p>And move to the next element and remove</p>\n\n<pre><code>Iterator&lt;Insured&gt; itr = insuredSet.iterator();\nwhile (itr.hasNext()) { \n    itr.next();\n    itr.remove();\n}\n</code></pre>\n\n<p>Moving to the next is important here as it should take the index to remove element.</p>\n"},{"tags":[],"owner":{"account_id":3166194,"reputation":63,"user_id":2676157,"display_name":"Pathikreet"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1661242046,"creation_date":1550492443,"answer_id":54747193,"question_id":8104692,"body_markdown":"You can also use `CopyOnWriteArrayList` instead of an `ArrayList`. This is the latest recommended approach by from JDK 1.5 onwards.","title":"How to avoid java.util.ConcurrentModificationException when iterating through and removing elements from an ArrayList","body":"<p>You can also use <code>CopyOnWriteArrayList</code> instead of an <code>ArrayList</code>. This is the latest recommended approach by from JDK 1.5 onwards.</p>\n"},{"tags":[],"owner":{"account_id":7503750,"reputation":5055,"user_id":5701085,"display_name":"Asad Ali Choudhry"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1574767281,"creation_date":1574767281,"answer_id":59049809,"question_id":8104692,"body_markdown":"In my case, the accepted answer is not working, It stops Exception but it causes some inconsistency in my List. The following solution is perfectly working for me.\r\n\r\n    List&lt;String&gt; list = new ArrayList&lt;&gt;();\r\n    List&lt;String&gt; itemsToRemove = new ArrayList&lt;&gt;();\r\n\r\n    for (String value: list) {\r\n       if (value.length() &gt; 5) { // your condition\r\n           itemsToRemove.add(value);\r\n       }\r\n    }\r\n    list.removeAll(itemsToRemove);\r\n\r\nIn this code, I have added the items to remove, in another list and then used `list.removeAll` method to remove all required items.","title":"How to avoid java.util.ConcurrentModificationException when iterating through and removing elements from an ArrayList","body":"<p>In my case, the accepted answer is not working, It stops Exception but it causes some inconsistency in my List. The following solution is perfectly working for me.</p>\n\n<pre><code>List&lt;String&gt; list = new ArrayList&lt;&gt;();\nList&lt;String&gt; itemsToRemove = new ArrayList&lt;&gt;();\n\nfor (String value: list) {\n   if (value.length() &gt; 5) { // your condition\n       itemsToRemove.add(value);\n   }\n}\nlist.removeAll(itemsToRemove);\n</code></pre>\n\n<p>In this code, I have added the items to remove, in another list and then used <code>list.removeAll</code> method to remove all required items.</p>\n"},{"tags":[],"owner":{"account_id":428762,"reputation":1481,"user_id":811293,"accept_rate":30,"display_name":"joseluisbz"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1586499177,"creation_date":1586499177,"answer_id":61134938,"question_id":8104692,"body_markdown":"What about of \r\n\r\n    import java.util.Collections;\r\n\r\n    List&lt;A&gt; abc = Collections.synchronizedList(new ArrayList&lt;&gt;());\r\n\r\n","title":"How to avoid java.util.ConcurrentModificationException when iterating through and removing elements from an ArrayList","body":"<p>What about of </p>\n\n<pre><code>import java.util.Collections;\n\nList&lt;A&gt; abc = Collections.synchronizedList(new ArrayList&lt;&gt;());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19812456,"reputation":1189,"user_id":14510925,"display_name":" "},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1605973410,"creation_date":1605973410,"answer_id":64944946,"question_id":8104692,"body_markdown":"**ERROR**\r\n\r\nThere was a mistake when I added to the same list from where I took elements:\r\n\r\n    fun &lt;T&gt; MutableList&lt;T&gt;.mathList(_fun: (T) -&gt; T): MutableList&lt;T&gt; {\r\n        for (i in this) {\r\n            this.add(_fun(i))   &lt;---   ERROR\r\n        }\r\n        return this   &lt;--- ERROR\r\n    }\r\n**DECISION**\r\n\r\nWorks great when adding to a new list:\r\n\r\n    fun &lt;T&gt; MutableList&lt;T&gt;.mathList(_fun: (T) -&gt; T): MutableList&lt;T&gt; {\r\n        val newList = mutableListOf&lt;T&gt;()   &lt;---   DECISION\r\n        for (i in this) {\r\n            newList.add(_fun(i))   &lt;---   DECISION\r\n        }\r\n        return newList   &lt;---   DECISION\r\n    }","title":"How to avoid java.util.ConcurrentModificationException when iterating through and removing elements from an ArrayList","body":"<p><strong>ERROR</strong></p>\n<p>There was a mistake when I added to the same list from where I took elements:</p>\n<pre><code>fun &lt;T&gt; MutableList&lt;T&gt;.mathList(_fun: (T) -&gt; T): MutableList&lt;T&gt; {\n    for (i in this) {\n        this.add(_fun(i))   &lt;---   ERROR\n    }\n    return this   &lt;--- ERROR\n}\n</code></pre>\n<p><strong>DECISION</strong></p>\n<p>Works great when adding to a new list:</p>\n<pre><code>fun &lt;T&gt; MutableList&lt;T&gt;.mathList(_fun: (T) -&gt; T): MutableList&lt;T&gt; {\n    val newList = mutableListOf&lt;T&gt;()   &lt;---   DECISION\n    for (i in this) {\n        newList.add(_fun(i))   &lt;---   DECISION\n    }\n    return newList   &lt;---   DECISION\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11310403,"reputation":90,"user_id":9379812,"display_name":"gachokaeric"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1615304617,"creation_date":1615304617,"answer_id":66550098,"question_id":8104692,"body_markdown":"    for (A a : new ArrayList&lt;&gt;(abc)) {\r\n        a.doSomething();\r\n        abc.remove(a);\r\n    }","title":"How to avoid java.util.ConcurrentModificationException when iterating through and removing elements from an ArrayList","body":"<pre><code>for (A a : new ArrayList&lt;&gt;(abc)) {\n    a.doSomething();\n    abc.remove(a);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19030962,"reputation":51,"user_id":13893087,"display_name":"Matt Strain"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1631628275,"creation_date":1631628275,"answer_id":69179276,"question_id":8104692,"body_markdown":"Sometimes old school is best. Just go for a simple for loop but make sure you start at the end of the list otherwise as you remove items you will get out of sync with your index.\r\n\r\n```\r\nList&lt;String&gt; list = new ArrayList&lt;&gt;();\r\nfor (int i = list.size() - 1; i &gt;= 0; i--) {\r\n  if (&quot;removeMe&quot;.equals(list.get(i))) {\r\n    list.remove(i);\r\n  }\r\n}\r\n``` ","title":"How to avoid java.util.ConcurrentModificationException when iterating through and removing elements from an ArrayList","body":"<p>Sometimes old school is best. Just go for a simple for loop but make sure you start at the end of the list otherwise as you remove items you will get out of sync with your index.</p>\n<pre><code>List&lt;String&gt; list = new ArrayList&lt;&gt;();\nfor (int i = list.size() - 1; i &gt;= 0; i--) {\n  if (&quot;removeMe&quot;.equals(list.get(i))) {\n    list.remove(i);\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3843421,"reputation":1681,"user_id":3185783,"display_name":"Delmirio Segura"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1656553975,"creation_date":1656553975,"answer_id":72809520,"question_id":8104692,"body_markdown":"    List&lt;String&gt; list1 = new ArrayList&lt;&gt;();\r\n    list1.addAll(OriginalList);\r\n    \r\n    List&lt;String&gt; list2 = new ArrayList&lt;&gt;();\r\n    list2.addAll(OriginalList);\r\n\r\nThis is also an option.","title":"How to avoid java.util.ConcurrentModificationException when iterating through and removing elements from an ArrayList","body":"<pre><code>List&lt;String&gt; list1 = new ArrayList&lt;&gt;();\nlist1.addAll(OriginalList);\n\nList&lt;String&gt; list2 = new ArrayList&lt;&gt;();\nlist2.addAll(OriginalList);\n</code></pre>\n<p>This is also an option.</p>\n"},{"tags":[],"owner":{"account_id":2140748,"reputation":374,"user_id":1899440,"display_name":"Bokili Production"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688696257,"creation_date":1688696257,"answer_id":76633569,"question_id":8104692,"body_markdown":"**Very important**\r\n\r\nConcurrentModificationException can occur during `ArrayList&lt;&gt;` sorting, if the `ArrayList&lt;&gt;` sorting method is called at the same time, ie. parallel (asynchronous).\r\n\r\nFor example from two background `Thread`s, or `Thread` and `UI`, but at the same time. This usually happens by **accident**, if you drop the order of operations somewhere during programming.\r\n\r\nHappened to me just now :-)","title":"How to avoid java.util.ConcurrentModificationException when iterating through and removing elements from an ArrayList","body":"<p><strong>Very important</strong></p>\n<p>ConcurrentModificationException can occur during <code>ArrayList&lt;&gt;</code> sorting, if the <code>ArrayList&lt;&gt;</code> sorting method is called at the same time, ie. parallel (asynchronous).</p>\n<p>For example from two background <code>Thread</code>s, or <code>Thread</code> and <code>UI</code>, but at the same time. This usually happens by <strong>accident</strong>, if you drop the order of operations somewhere during programming.</p>\n<p>Happened to me just now :-)</p>\n"}],"owner":{"display_name":"anon"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":521300,"favorite_count":0,"down_vote_count":0,"up_vote_count":293,"accepted_answer_id":8104702,"answer_count":25,"score":293,"last_activity_date":1688696257,"creation_date":1321104160,"question_id":8104692,"body_markdown":"I have an ArrayList that I want to iterate over. While iterating over it I have to remove elements at the same time. Obviously this throws a `java.util.ConcurrentModificationException`.\r\n\r\nWhat is the best practice to handle this problem? Should I clone the list first?\r\n\r\nI remove the elements not in the loop itself but another part of the code.\r\n\r\nMy code looks like this:\r\n\r\n\r\n    public class Test() {\r\n        private ArrayList&lt;A&gt; abc = new ArrayList&lt;A&gt;();\r\n        \r\n        public void doStuff() {\r\n            for (A a : abc) \r\n            a.doSomething();\r\n        }\r\n    \r\n        public void removeA(A a) {\r\n            abc.remove(a);\r\n        }\r\n    }\r\n\r\n`a.doSomething` might call `Test.removeA()`;\r\n\r\n","title":"How to avoid java.util.ConcurrentModificationException when iterating through and removing elements from an ArrayList","body":"<p>I have an ArrayList that I want to iterate over. While iterating over it I have to remove elements at the same time. Obviously this throws a <code>java.util.ConcurrentModificationException</code>.</p>\n\n<p>What is the best practice to handle this problem? Should I clone the list first?</p>\n\n<p>I remove the elements not in the loop itself but another part of the code.</p>\n\n<p>My code looks like this:</p>\n\n<pre><code>public class Test() {\n    private ArrayList&lt;A&gt; abc = new ArrayList&lt;A&gt;();\n\n    public void doStuff() {\n        for (A a : abc) \n        a.doSomething();\n    }\n\n    public void removeA(A a) {\n        abc.remove(a);\n    }\n}\n</code></pre>\n\n<p><code>a.doSomething</code> might call <code>Test.removeA()</code>;</p>\n"},{"tags":["java","7zip"],"comments":[{"owner":{"account_id":3986640,"reputation":583,"user_id":3287010,"accept_rate":91,"display_name":"Nizam"},"score":0,"creation_date":1567684226,"post_id":56363475,"comment_id":102041360,"body_markdown":"can you share the code for compressing defined String to 7z and convert it into bytes array.","body":"can you share the code for compressing defined String to 7z and convert it into bytes array."}],"answers":[{"tags":[],"owner":{"account_id":1754145,"reputation":43960,"user_id":1602555,"display_name":"Karol Dowbecki"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1559143327,"creation_date":1559142701,"answer_id":56363706,"question_id":56363475,"body_markdown":"Since you are already using [commons-compress][1] for 7zip compression you can create `SevenZOutputFile(SeekableByteChannel)` instance with [`SeekableInMemoryByteChannel`][2] that wraps a byte array. As per javadoc:\r\n\r\n&gt; A SeekableByteChannel implementation that wraps a byte[].\r\n&gt;\r\n&gt; When this channel is used for writing an internal buffer grows to accommodate incoming data. A natural size limit is the value of Integer.MAX_VALUE. Internal buffer can be accessed via array().\r\n\r\nSomething like:\r\n\r\n```\r\nSeekableInMemoryByteChannel channel = new SeekableInMemoryByteChannel(new byte[1024]);\r\nSevenZOutputFile out = new SevenZOutputFile(channel);\r\n// modified addToArchiveCompression(out, ...); for String\r\n// encode channel.array() to Base64\r\n```\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-compress/\r\n  [2]: https://commons.apache.org/proper/commons-compress/apidocs/org/apache/commons/compress/utils/SeekableInMemoryByteChannel.html","title":"Java 7zip compression of a String","body":"<p>Since you are already using <a href=\"https://commons.apache.org/proper/commons-compress/\" rel=\"nofollow noreferrer\">commons-compress</a> for 7zip compression you can create <code>SevenZOutputFile(SeekableByteChannel)</code> instance with <a href=\"https://commons.apache.org/proper/commons-compress/apidocs/org/apache/commons/compress/utils/SeekableInMemoryByteChannel.html\" rel=\"nofollow noreferrer\"><code>SeekableInMemoryByteChannel</code></a> that wraps a byte array. As per javadoc:</p>\n\n<blockquote>\n  <p>A SeekableByteChannel implementation that wraps a byte[].</p>\n  \n  <p>When this channel is used for writing an internal buffer grows to accommodate incoming data. A natural size limit is the value of Integer.MAX_VALUE. Internal buffer can be accessed via array().</p>\n</blockquote>\n\n<p>Something like:</p>\n\n<pre><code>SeekableInMemoryByteChannel channel = new SeekableInMemoryByteChannel(new byte[1024]);\nSevenZOutputFile out = new SevenZOutputFile(channel);\n// modified addToArchiveCompression(out, ...); for String\n// encode channel.array() to Base64\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4277107,"reputation":1320,"user_id":3497465,"display_name":"Filippo Possenti"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1559143141,"creation_date":1559143141,"answer_id":56363832,"question_id":56363475,"body_markdown":"You will of course have to apply several changes to the code you posted. That code is meant to compress a file or directory whereas your case is much simpler. You definitely won&#39;t need a `for` loop, for example.\r\n\r\nI break down the various parts you&#39;ll have to look into and leave the coding to you.\r\n\r\n\r\n**Converting a String to data for 7z:**\r\n\r\nOne of the options is to use a `ByteArrayInputStream` instead of a `FileInputStream`. The `ByteArrayInputStream` will have to be initialised with the bytes corresponding to the String.\r\n\r\nSee the following article for an example on how to do this conversion:\r\n\r\nhttps://www.baeldung.com/convert-string-to-input-stream\r\n\r\n**Converting output bytes to Base64:**\r\n\r\nThere are several approaches, detailed in this StackOverflow thread:\r\n\r\nhttps://stackoverflow.com/questions/2418485/how-do-i-convert-a-byte-array-to-base64-in-java\r\n\r\n**Outputting 7z to memory instead of File:**\r\n\r\nYou will have to use the `SevenZOutputFile` constructor taking a `SeekableByteChannel` interface as input. Your implementation of `SeekableByteChannel` will have to be backed by a byte array or stream of sorts. You can use the following implementation:\r\n\r\nhttps://commons.apache.org/proper/commons-compress/apidocs/org/apache/commons/compress/utils/SeekableInMemoryByteChannel.html\r\n\r\n**Obtaining a `SevenZArchiveEntry` from something other than a file:**\r\n\r\nAlthough the `SevenZOutputFile` class doesn&#39;t seem to provide a facility to do that, if you look at its sourcecode you&#39;ll notice that you can manually create a `SevenZArchiveEntry` without any intermediation, as it has an empty constructor. You&#39;ll have to &quot;pretend&quot; it&#39;s still an actual file, but that shouldn&#39;t be a problem.\r\n\r\nSourcecode of `SevenZArchiveEntry`:\r\n\r\nhttps://commons.apache.org/proper/commons-compress/apidocs/src-html/org/apache/commons/compress/archivers/sevenz/SevenZOutputFile.html\r\n","title":"Java 7zip compression of a String","body":"<p>You will of course have to apply several changes to the code you posted. That code is meant to compress a file or directory whereas your case is much simpler. You definitely won't need a <code>for</code> loop, for example.</p>\n\n<p>I break down the various parts you'll have to look into and leave the coding to you.</p>\n\n<p><strong>Converting a String to data for 7z:</strong></p>\n\n<p>One of the options is to use a <code>ByteArrayInputStream</code> instead of a <code>FileInputStream</code>. The <code>ByteArrayInputStream</code> will have to be initialised with the bytes corresponding to the String.</p>\n\n<p>See the following article for an example on how to do this conversion:</p>\n\n<p><a href=\"https://www.baeldung.com/convert-string-to-input-stream\" rel=\"nofollow noreferrer\">https://www.baeldung.com/convert-string-to-input-stream</a></p>\n\n<p><strong>Converting output bytes to Base64:</strong></p>\n\n<p>There are several approaches, detailed in this StackOverflow thread:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/2418485/how-do-i-convert-a-byte-array-to-base64-in-java\">How do I convert a byte array to Base64 in Java?</a></p>\n\n<p><strong>Outputting 7z to memory instead of File:</strong></p>\n\n<p>You will have to use the <code>SevenZOutputFile</code> constructor taking a <code>SeekableByteChannel</code> interface as input. Your implementation of <code>SeekableByteChannel</code> will have to be backed by a byte array or stream of sorts. You can use the following implementation:</p>\n\n<p><a href=\"https://commons.apache.org/proper/commons-compress/apidocs/org/apache/commons/compress/utils/SeekableInMemoryByteChannel.html\" rel=\"nofollow noreferrer\">https://commons.apache.org/proper/commons-compress/apidocs/org/apache/commons/compress/utils/SeekableInMemoryByteChannel.html</a></p>\n\n<p><strong>Obtaining a <code>SevenZArchiveEntry</code> from something other than a file:</strong></p>\n\n<p>Although the <code>SevenZOutputFile</code> class doesn't seem to provide a facility to do that, if you look at its sourcecode you'll notice that you can manually create a <code>SevenZArchiveEntry</code> without any intermediation, as it has an empty constructor. You'll have to \"pretend\" it's still an actual file, but that shouldn't be a problem.</p>\n\n<p>Sourcecode of <code>SevenZArchiveEntry</code>:</p>\n\n<p><a href=\"https://commons.apache.org/proper/commons-compress/apidocs/src-html/org/apache/commons/compress/archivers/sevenz/SevenZOutputFile.html\" rel=\"nofollow noreferrer\">https://commons.apache.org/proper/commons-compress/apidocs/src-html/org/apache/commons/compress/archivers/sevenz/SevenZOutputFile.html</a></p>\n"},{"tags":[],"owner":{"account_id":244340,"reputation":8860,"user_id":517073,"accept_rate":87,"display_name":"Stepan Yakovenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1639720288,"creation_date":1639720288,"answer_id":70388949,"question_id":56363475,"body_markdown":"This is a bit offtopic, but assuming that LZMA is part of 7zip, this might help you:\r\n\r\n\tpublic static byte[]compress(byte[]arr,int level){\r\n\t\ttry {\r\n\t\t\tByteArrayOutputStream compr = new ByteArrayOutputStream();\r\n\t\t\tLZMA2Options options = new LZMA2Options();\r\n\t\t\toptions.setPreset(level); // play with this number: 6 is default but 7 works better for mid sized archives ( &gt; 8mb)\r\n\t\t\tXZOutputStream out = new XZOutputStream(compr, options);\r\n\t\t\tout.write(arr);\r\n\t\t\tout.finish();\r\n\t\t\treturn compr.toByteArray();\r\n\t\t} catch (IOException e) {\r\n\t\t\tthrow new RuntimeException(e);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static byte[]decompress(byte[]bts){\r\n\t\ttry {\r\n\t\t\tByteArrayInputStream bis = new ByteArrayInputStream(bts);\r\n\t\t\tXZInputStream is = new XZInputStream(bis);\r\n\t\t\tByteArrayInputStream decomp = new ByteArrayInputStream(is.readAllBytes());\r\n\t\t\tObjectInputStream ois = new ObjectInputStream(decomp);\r\n\t\t\tbyte data[]= (byte[]) ois.readObject();\r\n\t\t\treturn data;\r\n\t\t} catch (IOException | ClassNotFoundException e) {\r\n\t\t\tthrow new RuntimeException(e);\r\n\t\t}\r\n\t}\r\n\r\nmaven dependency:\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.tukaani&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;xz&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.8&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\nconvert your String to byte[] with s.getBytes(StandardCharsets.UTF_8);\r\n\r\n\r\n","title":"Java 7zip compression of a String","body":"<p>This is a bit offtopic, but assuming that LZMA is part of 7zip, this might help you:</p>\n<pre><code>public static byte[]compress(byte[]arr,int level){\n    try {\n        ByteArrayOutputStream compr = new ByteArrayOutputStream();\n        LZMA2Options options = new LZMA2Options();\n        options.setPreset(level); // play with this number: 6 is default but 7 works better for mid sized archives ( &gt; 8mb)\n        XZOutputStream out = new XZOutputStream(compr, options);\n        out.write(arr);\n        out.finish();\n        return compr.toByteArray();\n    } catch (IOException e) {\n        throw new RuntimeException(e);\n    }\n}\n\npublic static byte[]decompress(byte[]bts){\n    try {\n        ByteArrayInputStream bis = new ByteArrayInputStream(bts);\n        XZInputStream is = new XZInputStream(bis);\n        ByteArrayInputStream decomp = new ByteArrayInputStream(is.readAllBytes());\n        ObjectInputStream ois = new ObjectInputStream(decomp);\n        byte data[]= (byte[]) ois.readObject();\n        return data;\n    } catch (IOException | ClassNotFoundException e) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n<p>maven dependency:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.tukaani&lt;/groupId&gt;\n        &lt;artifactId&gt;xz&lt;/artifactId&gt;\n        &lt;version&gt;1.8&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>convert your String to byte[] with s.getBytes(StandardCharsets.UTF_8);</p>\n"},{"tags":[],"owner":{"account_id":4942033,"reputation":576,"user_id":3978491,"accept_rate":86,"display_name":"zebo zhuang"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688695852,"creation_date":1687856934,"answer_id":76563313,"question_id":56363475,"body_markdown":"I found that someone had implemented the code.\r\n\r\n\r\n```java\r\nimport java.io.ByteArrayOutputStream;\r\nimport java.io.IOException;\r\n\r\nimport org.apache.commons.compress.archivers.sevenz.SevenZArchiveEntry;\r\nimport org.apache.commons.compress.archivers.sevenz.SevenZFile;\r\nimport org.apache.commons.compress.archivers.sevenz.SevenZOutputFile;\r\nimport org.apache.commons.compress.utils.SeekableInMemoryByteChannel;\r\n\r\n/**\r\n * the SevenZ Util\r\n *\r\n * @author ph3636\r\n */\r\npublic class SevenZUtil {\r\n\r\n    private static final int BUFFER_SIZE = 8192;\r\n\r\n    public static byte[] compress(byte[] bytes) {\r\n        if (bytes == null) {\r\n            throw new NullPointerException(&quot;bytes is null&quot;);\r\n        }\r\n        SeekableInMemoryByteChannel channel = new SeekableInMemoryByteChannel();\r\n        try (SevenZOutputFile z7z = new SevenZOutputFile(channel)) {\r\n            SevenZArchiveEntry entry = new SevenZArchiveEntry();\r\n            entry.setName(&quot;sevenZip&quot;);\r\n            entry.setSize(bytes.length);\r\n            z7z.putArchiveEntry(entry);\r\n            z7z.write(bytes);\r\n            z7z.closeArchiveEntry();\r\n            z7z.finish();\r\n            return channel.array();\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(&quot;SevenZ compress error&quot;, e);\r\n        }\r\n    }\r\n\r\n    public static byte[] decompress(byte[] bytes) {\r\n        if (bytes == null) {\r\n            throw new NullPointerException(&quot;bytes is null&quot;);\r\n        }\r\n        ByteArrayOutputStream out = new ByteArrayOutputStream();\r\n        SeekableInMemoryByteChannel channel = new SeekableInMemoryByteChannel(bytes);\r\n        try (SevenZFile sevenZFile = new SevenZFile(channel)) {\r\n            byte[] buffer = new byte[BUFFER_SIZE];\r\n            while (sevenZFile.getNextEntry() != null) {\r\n                int n;\r\n                while ((n = sevenZFile.read(buffer)) &gt; -1) {\r\n                    out.write(buffer, 0, n);\r\n                }\r\n            }\r\n            return out.toByteArray();\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(&quot;SevenZ decompress error&quot;, e);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n```\r\n&lt;commons-compress.version&gt;1.22&lt;/commons-compress.version&gt;\r\n&lt;xz.version&gt;1.9&lt;/xz.version&gt;\r\n```\r\n```\r\n&lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-compress&lt;/artifactId&gt;\r\n            &lt;version&gt;${commons-compress.version}&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n            &lt;groupId&gt;org.tukaani&lt;/groupId&gt;\r\n            &lt;artifactId&gt;xz&lt;/artifactId&gt;\r\n            &lt;version&gt;${xz.version}&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nreference: [SevenZUtil.java][1]\r\n\r\n\r\n  [1]: https://github.com/seata/seata/blob/2.x/compressor/seata-compressor-7z/src/main/java/io/seata/compressor/sevenz/SevenZUtil.java","title":"Java 7zip compression of a String","body":"<p>I found that someone had implemented the code.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.ByteArrayOutputStream;\nimport java.io.IOException;\n\nimport org.apache.commons.compress.archivers.sevenz.SevenZArchiveEntry;\nimport org.apache.commons.compress.archivers.sevenz.SevenZFile;\nimport org.apache.commons.compress.archivers.sevenz.SevenZOutputFile;\nimport org.apache.commons.compress.utils.SeekableInMemoryByteChannel;\n\n/**\n * the SevenZ Util\n *\n * @author ph3636\n */\npublic class SevenZUtil {\n\n    private static final int BUFFER_SIZE = 8192;\n\n    public static byte[] compress(byte[] bytes) {\n        if (bytes == null) {\n            throw new NullPointerException(&quot;bytes is null&quot;);\n        }\n        SeekableInMemoryByteChannel channel = new SeekableInMemoryByteChannel();\n        try (SevenZOutputFile z7z = new SevenZOutputFile(channel)) {\n            SevenZArchiveEntry entry = new SevenZArchiveEntry();\n            entry.setName(&quot;sevenZip&quot;);\n            entry.setSize(bytes.length);\n            z7z.putArchiveEntry(entry);\n            z7z.write(bytes);\n            z7z.closeArchiveEntry();\n            z7z.finish();\n            return channel.array();\n        } catch (IOException e) {\n            throw new RuntimeException(&quot;SevenZ compress error&quot;, e);\n        }\n    }\n\n    public static byte[] decompress(byte[] bytes) {\n        if (bytes == null) {\n            throw new NullPointerException(&quot;bytes is null&quot;);\n        }\n        ByteArrayOutputStream out = new ByteArrayOutputStream();\n        SeekableInMemoryByteChannel channel = new SeekableInMemoryByteChannel(bytes);\n        try (SevenZFile sevenZFile = new SevenZFile(channel)) {\n            byte[] buffer = new byte[BUFFER_SIZE];\n            while (sevenZFile.getNextEntry() != null) {\n                int n;\n                while ((n = sevenZFile.read(buffer)) &gt; -1) {\n                    out.write(buffer, 0, n);\n                }\n            }\n            return out.toByteArray();\n        } catch (IOException e) {\n            throw new RuntimeException(&quot;SevenZ decompress error&quot;, e);\n        }\n    }\n}\n</code></pre>\n<pre><code>&lt;commons-compress.version&gt;1.22&lt;/commons-compress.version&gt;\n&lt;xz.version&gt;1.9&lt;/xz.version&gt;\n</code></pre>\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-compress&lt;/artifactId&gt;\n            &lt;version&gt;${commons-compress.version}&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n            &lt;groupId&gt;org.tukaani&lt;/groupId&gt;\n            &lt;artifactId&gt;xz&lt;/artifactId&gt;\n            &lt;version&gt;${xz.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>reference: <a href=\"https://github.com/seata/seata/blob/2.x/compressor/seata-compressor-7z/src/main/java/io/seata/compressor/sevenz/SevenZUtil.java\" rel=\"nofollow noreferrer\">SevenZUtil.java</a></p>\n"}],"owner":{"account_id":7386680,"reputation":6144,"user_id":5621509,"accept_rate":100,"display_name":"Asier Gomez"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1292,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":56363706,"answer_count":4,"score":5,"last_activity_date":1688695852,"creation_date":1559141862,"question_id":56363475,"body_markdown":"I would like to compress an String manually defined to 7z in Java. So then I could convert it to base64. I found many examples compressing files to 7z and then saving into new File.\r\n\r\nI just try the next code, and it takes correctly the file and compress it:\r\n\r\n    private static void addToArchiveCompression(SevenZOutputFile out, File file, String dir) throws IOException {\r\n            String name = dir + File.separator + file.getName();\r\n            if (file.isFile()){\r\n                SevenZArchiveEntry entry = out.createArchiveEntry(file, name);\r\n                out.putArchiveEntry(entry);\r\n    \r\n                FileInputStream in = new FileInputStream(file);\r\n                byte[] b = new byte[1024];\r\n                int count = 0;\r\n                while ((count = in.read(b)) &gt; 0) {\r\n                    out.write(b, 0, count);\r\n                }\r\n                out.closeArchiveEntry();\r\n    \r\n            } else if (file.isDirectory()) {\r\n                File[] children = file.listFiles();\r\n                if (children != null){\r\n                    for (File child : children){\r\n                        addToArchiveCompression(out, child, name);\r\n                    }\r\n                }\r\n            } else {\r\n                System.out.println(file.getName() + &quot; is not supported&quot;);\r\n            }\r\n        }  \r\n\r\nBut how can I compress an manually defined String to 7z and convert it to byte[]? So then I can convert the byte[] to base64 and print it, without generating or reading new Files?","title":"Java 7zip compression of a String","body":"<p>I would like to compress an String manually defined to 7z in Java. So then I could convert it to base64. I found many examples compressing files to 7z and then saving into new File.</p>\n\n<p>I just try the next code, and it takes correctly the file and compress it:</p>\n\n<pre><code>private static void addToArchiveCompression(SevenZOutputFile out, File file, String dir) throws IOException {\n        String name = dir + File.separator + file.getName();\n        if (file.isFile()){\n            SevenZArchiveEntry entry = out.createArchiveEntry(file, name);\n            out.putArchiveEntry(entry);\n\n            FileInputStream in = new FileInputStream(file);\n            byte[] b = new byte[1024];\n            int count = 0;\n            while ((count = in.read(b)) &gt; 0) {\n                out.write(b, 0, count);\n            }\n            out.closeArchiveEntry();\n\n        } else if (file.isDirectory()) {\n            File[] children = file.listFiles();\n            if (children != null){\n                for (File child : children){\n                    addToArchiveCompression(out, child, name);\n                }\n            }\n        } else {\n            System.out.println(file.getName() + \" is not supported\");\n        }\n    }  \n</code></pre>\n\n<p>But how can I compress an manually defined String to 7z and convert it to byte[]? So then I can convert the byte[] to base64 and print it, without generating or reading new Files?</p>\n"},{"tags":["java","nested-loops"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1688682561,"post_id":76632875,"comment_id":135110629,"body_markdown":"JavaScript tag removed. This question and code have *nothing* to do with JavaScript programming.","body":"JavaScript tag removed. This question and code have <i>nothing</i> to do with JavaScript programming."},{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1688683204,"post_id":76632875,"comment_id":135110690,"body_markdown":"In the inner loop, use `i` instead of `inputNum`. Unrelated: indenting your code makes it easier to understand.","body":"In the inner loop, use <code>i</code> instead of <code>inputNum</code>. Unrelated: indenting your code makes it easier to understand."}],"answers":[{"tags":[],"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1688683296,"creation_date":1688683296,"answer_id":76632929,"question_id":76632875,"body_markdown":"The inner loop should count down from `i`. Like,\r\n\r\n\tfor (i = 1; i &lt;= inputNum; ++i) {\r\n\t\tSystem.out.print(i);\r\n\t\tfor (j = i; j &gt;= 1; --j) {\r\n\t\t\tSystem.out.print(&quot;#&quot;);\r\n\t\t}\r\n\t\tSystem.out.println();\r\n\t}\r\n\r\n","title":"Java: How can I fix this nested loops","body":"<p>The inner loop should count down from <code>i</code>. Like,</p>\n<pre><code>for (i = 1; i &lt;= inputNum; ++i) {\n    System.out.print(i);\n    for (j = i; j &gt;= 1; --j) {\n        System.out.print(&quot;#&quot;);\n    }\n    System.out.println();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5980511,"reputation":31,"user_id":4699744,"display_name":"Sadakhat Alikhan Nawaab"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688695011,"creation_date":1688695011,"answer_id":76633502,"question_id":76632875,"body_markdown":"Please try this, you will get following result: **1# 2## 3### 4####** 5##### \r\n \r\n```\r\npublic class LoopPattern {\r\n    public static void main(String[] args) {\r\n        Scanner s = new Scanner(System.in);\r\n        System.out.println(&quot;Enter the number&quot;);\r\n        int inputNum = s.nextInt();\r\n        for(int i=1; i&lt;=inputNum; i++) {\r\n            System.out.print(i);\r\n            for(int j=1; j&lt;=i;j++) {\r\n                System.out.print(&quot;#&quot;);\r\n            }\r\n            System.out.print(&quot; &quot;);\r\n        }\r\n    }\r\n}\r\n```","title":"Java: How can I fix this nested loops","body":"<p>Please try this, you will get following result: <strong>1# 2## 3### 4####</strong> 5#####</p>\n<pre><code>public class LoopPattern {\n    public static void main(String[] args) {\n        Scanner s = new Scanner(System.in);\n        System.out.println(&quot;Enter the number&quot;);\n        int inputNum = s.nextInt();\n        for(int i=1; i&lt;=inputNum; i++) {\n            System.out.print(i);\n            for(int j=1; j&lt;=i;j++) {\n                System.out.print(&quot;#&quot;);\n            }\n            System.out.print(&quot; &quot;);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":28966095,"reputation":11,"user_id":22187492,"display_name":"El36"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76632929,"answer_count":2,"score":0,"last_activity_date":1688695011,"creation_date":1688682454,"question_id":76632875,"body_markdown":"Integer inputNum is read from input. For each number from 1 to inputNum, output the number followed by the number&#39;s value of hashtag characters (&#39;#&#39;). End each output with a newline.\r\n\r\nEx: If the input is 5, then the output is:\r\n\r\n1#\r\n2##\r\n3###\r\n4####\r\n5#####\r\n\r\n\r\nThis is what I tried but the problem is that I don&#39;t know how to fix it so in the output, the character (in this case &quot;#&quot;) is applied as many times as the number. \r\n\r\nfor instance, for input 5, my output was:\r\n\r\n1#####\r\n2#####\r\n3#####\r\n4#####\r\n5#####\r\n\r\n\r\n\r\n\r\n    import java.util.Scanner;\r\n\r\n    public class LoopPatterns {\r\n       public static void main (String[] args) {\r\n          Scanner scnr = new Scanner(System.in);\r\n          int inputNum;\r\n          int i;\r\n          int j;\r\n   \r\n          inputNum = scnr.nextInt();\r\n      \r\n          for (i = 1; i &lt;= inputNum; ++i){\r\n             System.out.print(i);\r\n          for (j = inputNum; j &gt;= 1; --j){\r\n          System.out.print(&quot;#&quot;);\r\n          }\r\n          System.out.println();\r\n          }\r\n\r\n       }\r\n    }","title":"Java: How can I fix this nested loops","body":"<p>Integer inputNum is read from input. For each number from 1 to inputNum, output the number followed by the number's value of hashtag characters ('#'). End each output with a newline.</p>\n<p>Ex: If the input is 5, then the output is:</p>\n<p>1#\n2##\n3###\n4####\n5#####</p>\n<p>This is what I tried but the problem is that I don't know how to fix it so in the output, the character (in this case &quot;#&quot;) is applied as many times as the number.</p>\n<p>for instance, for input 5, my output was:</p>\n<p>1#####\n2#####\n3#####\n4#####\n5#####</p>\n<pre><code>import java.util.Scanner;\n\npublic class LoopPatterns {\n   public static void main (String[] args) {\n      Scanner scnr = new Scanner(System.in);\n      int inputNum;\n      int i;\n      int j;\n\n      inputNum = scnr.nextInt();\n  \n      for (i = 1; i &lt;= inputNum; ++i){\n         System.out.print(i);\n      for (j = inputNum; j &gt;= 1; --j){\n      System.out.print(&quot;#&quot;);\n      }\n      System.out.println();\n      }\n\n   }\n}\n</code></pre>\n"},{"tags":["java","json","jackson","avro"],"answers":[{"comments":[{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1688623179,"post_id":76625896,"comment_id":135098829,"body_markdown":"note, I havent tried to call it with the `.readValue()` method but I have used it with `.convertValue()` earlier today and since I m not able to access my computer atm, you would have to do some tweaking","body":"note, I havent tried to call it with the <code>.readValue()</code> method but I have used it with <code>.convertValue()</code> earlier today and since I m not able to access my computer atm, you would have to do some tweaking"},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1688624199,"post_id":76625896,"comment_id":135098983,"body_markdown":"Though, the mix-in annotations should only affect the serialization and deserialization behavior of the ObjectMapper when converting Java objects to JSON and vice versa. So readValue() should be fine","body":"Though, the mix-in annotations should only affect the serialization and deserialization behavior of the ObjectMapper when converting Java objects to JSON and vice versa. So readValue() should be fine"},{"owner":{"account_id":10890055,"reputation":1246,"user_id":8006169,"display_name":"Deepak Kumar"},"score":0,"creation_date":1688665000,"post_id":76625896,"comment_id":135107754,"body_markdown":"As I mentioned, these classes are auto-generated on the build. And the actual JSON is way too complex and it contains more than 50 POJO classes. Creating those many Interfaces might not be a good idea as maintainability will become an issue.","body":"As I mentioned, these classes are auto-generated on the build. And the actual JSON is way too complex and it contains more than 50 POJO classes. Creating those many Interfaces might not be a good idea as maintainability will become an issue."},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1688694330,"post_id":76625896,"comment_id":135111586,"body_markdown":"Then you will have to write your own custom serializer and deserializer to serialize and deserialize your JSON/POJO","body":"Then you will have to write your own custom serializer and deserializer to serialize and deserialize your JSON/POJO"},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1688694671,"post_id":76625896,"comment_id":135111616,"body_markdown":"@DeepakKumar though you can give this a shot. This seems to be the solution to your problem. That is to use case insensitive deserialization of your fields","body":"@DeepakKumar though you can give this a shot. This seems to be the solution to your problem. That is to use case insensitive deserialization of your fields"}],"tags":[],"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688694754,"creation_date":1688623000,"answer_id":76625896,"question_id":76625581,"body_markdown":"You should be able to utilise Jackson&#39;s MixIn feature to implement an abstract class or interface that provides getter methods that are seen in the Sample class. Then you can apply @JsonProperty annotations to the interface getter methods and apply the MixIn to your objectMapper. You can take a look [here](https://github.com/FasterXML/jackson-docs/wiki/JacksonMixInAnnotations). [See also](https://www.grabanotherbyte.com/en/jackson/2020/10/18/jackson-mixins.html)\r\n\r\nYou could try:\r\n\r\n    public interface SampleMixIn {\r\n        @JsonProperty(&quot;Field1&quot;)\r\n        CharSequence getField1();\r\n        @JsonProperty(&quot;Field2&quot;)\r\n        CharSequence getField2();\r\n        @JsonProperty(&quot;Field3&quot;)\r\n        CharSequence getField3();\r\n    }\r\n\r\nThen when you call your object mapper:\r\n\r\n    mapper.addMixIn(Sample.class, SampleMixIn.class);\r\n    mapper.readValue(json, Sample.class); //or whatever other method you want to call to map/read\r\n\r\nYou can allow the mapping of incoming JSON to be case insensitive using the following [feature](https://fasterxml.github.io/jackson-databind/javadoc/2.5/com/fasterxml/jackson/databind/MapperFeature.html#ACCEPT_CASE_INSENSITIVE_PROPERTIES) (only available in Jackson 2.5 and after). See also [this thread](https://stackoverflow.com/q/26058854/16034206) which gives other possible solutions.\r\n\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    mapper.configure(MapperFeature.ACCEPT_CASE_INSENSITIVE_PROPERTIES, true); ","title":"How to override jackson ObjectMapper for getter/setter method name identification","body":"<p>You should be able to utilise Jackson's MixIn feature to implement an abstract class or interface that provides getter methods that are seen in the Sample class. Then you can apply @JsonProperty annotations to the interface getter methods and apply the MixIn to your objectMapper. You can take a look <a href=\"https://github.com/FasterXML/jackson-docs/wiki/JacksonMixInAnnotations\" rel=\"nofollow noreferrer\">here</a>. <a href=\"https://www.grabanotherbyte.com/en/jackson/2020/10/18/jackson-mixins.html\" rel=\"nofollow noreferrer\">See also</a></p>\n<p>You could try:</p>\n<pre><code>public interface SampleMixIn {\n    @JsonProperty(&quot;Field1&quot;)\n    CharSequence getField1();\n    @JsonProperty(&quot;Field2&quot;)\n    CharSequence getField2();\n    @JsonProperty(&quot;Field3&quot;)\n    CharSequence getField3();\n}\n</code></pre>\n<p>Then when you call your object mapper:</p>\n<pre><code>mapper.addMixIn(Sample.class, SampleMixIn.class);\nmapper.readValue(json, Sample.class); //or whatever other method you want to call to map/read\n</code></pre>\n<p>You can allow the mapping of incoming JSON to be case insensitive using the following <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.5/com/fasterxml/jackson/databind/MapperFeature.html#ACCEPT_CASE_INSENSITIVE_PROPERTIES\" rel=\"nofollow noreferrer\">feature</a> (only available in Jackson 2.5 and after). See also <a href=\"https://stackoverflow.com/q/26058854/16034206\">this thread</a> which gives other possible solutions.</p>\n<pre><code>ObjectMapper mapper = new ObjectMapper();\nmapper.configure(MapperFeature.ACCEPT_CASE_INSENSITIVE_PROPERTIES, true); \n</code></pre>\n"}],"owner":{"account_id":10890055,"reputation":1246,"user_id":8006169,"display_name":"Deepak Kumar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":332,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1688694754,"creation_date":1688619004,"question_id":76625581,"body_markdown":"I have some Pojo classes which are generated through avro schema. The problem is that the field name in the schema is declared with the first character as a capital letter. I am receiving a JSON string and in a JSON string also each key name starts with a capital letter, due to which Jackson is not able to map the data.\r\n\r\nIs there any way we can override the logic of the Jackson parser to find the getter/setter in pojo with just get + FieldName and set + FieldName.\r\n\r\nBellow is the sample POJO class and JSON which I am trying to parse.\r\n\r\n**POJO:**\r\n```java\r\npublic class Sample {\r\n    private java.lang.CharSequence Field1;\r\n    private java.lang.CharSequence Field2;\r\n    private java.lang.CharSequence Field3;\r\n\r\n    public java.lang.CharSequence getField1() {\r\n        return Field1;\r\n    }\r\n\r\n    public void setField1(java.lang.CharSequence Field1) {\r\n        this.Field1 = Field1;\r\n    }\r\n\r\n    public java.lang.CharSequence getField2() {\r\n        return Field2;\r\n    }\r\n\r\n    public void setField2(java.lang.CharSequence Field2) {\r\n        this.Field2 = Field2;\r\n    }\r\n\r\n    public java.lang.CharSequence getField3() {\r\n        return Field3;\r\n    }\r\n\r\n    public void setField3(java.lang.CharSequence Field3) {\r\n        this.Field3 = Field3;\r\n    }\r\n}\r\n```\r\n\r\n**JSON:**\r\n```json\r\n{\r\n  &quot;Field1&quot;: &quot;Value1&quot;,\r\n  &quot;Field2&quot;: &quot;Value2&quot;,\r\n  &quot;Field3&quot;: &quot;Value3&quot;\r\n}\r\n```\r\n\r\nCode to parse the JSON:\r\n```java\r\nString json = = &quot;&quot;;\r\nObjectMapper objectMapper = new ObjectMapper();\r\nSample sample = objectMapper.readValue(json, Sample.class);\r\n```\r\n\r\nIf I pass the below JSON then it&#39;s working perfectly fine. \r\n```json\r\n{\r\n  &quot;field1&quot;: &quot;Value1&quot;,\r\n  &quot;field2&quot;: &quot;Value2&quot;,\r\n  &quot;field3&quot;: &quot;Value3&quot;\r\n}\r\n```\r\n\r\nBut I am receiving the JSON in the previous format and I don&#39;t want to write a code to convert each JSON key&#39;s first character into lowercase (which would still create an issue for some fields where more than one starting letter is capital).\r\n","title":"How to override jackson ObjectMapper for getter/setter method name identification","body":"<p>I have some Pojo classes which are generated through avro schema. The problem is that the field name in the schema is declared with the first character as a capital letter. I am receiving a JSON string and in a JSON string also each key name starts with a capital letter, due to which Jackson is not able to map the data.</p>\n<p>Is there any way we can override the logic of the Jackson parser to find the getter/setter in pojo with just get + FieldName and set + FieldName.</p>\n<p>Bellow is the sample POJO class and JSON which I am trying to parse.</p>\n<p><strong>POJO:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Sample {\n    private java.lang.CharSequence Field1;\n    private java.lang.CharSequence Field2;\n    private java.lang.CharSequence Field3;\n\n    public java.lang.CharSequence getField1() {\n        return Field1;\n    }\n\n    public void setField1(java.lang.CharSequence Field1) {\n        this.Field1 = Field1;\n    }\n\n    public java.lang.CharSequence getField2() {\n        return Field2;\n    }\n\n    public void setField2(java.lang.CharSequence Field2) {\n        this.Field2 = Field2;\n    }\n\n    public java.lang.CharSequence getField3() {\n        return Field3;\n    }\n\n    public void setField3(java.lang.CharSequence Field3) {\n        this.Field3 = Field3;\n    }\n}\n</code></pre>\n<p><strong>JSON:</strong></p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;Field1&quot;: &quot;Value1&quot;,\n  &quot;Field2&quot;: &quot;Value2&quot;,\n  &quot;Field3&quot;: &quot;Value3&quot;\n}\n</code></pre>\n<p>Code to parse the JSON:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String json = = &quot;&quot;;\nObjectMapper objectMapper = new ObjectMapper();\nSample sample = objectMapper.readValue(json, Sample.class);\n</code></pre>\n<p>If I pass the below JSON then it's working perfectly fine.</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;field1&quot;: &quot;Value1&quot;,\n  &quot;field2&quot;: &quot;Value2&quot;,\n  &quot;field3&quot;: &quot;Value3&quot;\n}\n</code></pre>\n<p>But I am receiving the JSON in the previous format and I don't want to write a code to convert each JSON key's first character into lowercase (which would still create an issue for some fields where more than one starting letter is capital).</p>\n"},{"tags":["java","forms","zipcode"],"comments":[{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":1,"creation_date":1587597829,"post_id":61376748,"comment_id":108578125,"body_markdown":"There is no international standard. Canada uses six characters. Japan uses seven. Good luck!","body":"There is no international standard. Canada uses six characters. Japan uses seven. Good luck!"},{"owner":{"account_id":18276776,"reputation":118,"user_id":13306412,"display_name":"user13306412"},"score":0,"creation_date":1587598635,"post_id":61376748,"comment_id":108578335,"body_markdown":"The US uses [zip+4](https://www.zip-codes.com/learn-about/what-is-a-zip-4-code.asp)","body":"The US uses <a href=\"https://www.zip-codes.com/learn-about/what-is-a-zip-4-code.asp\" rel=\"nofollow noreferrer\">zip+4</a>"}],"answers":[{"tags":[],"owner":{"account_id":10675972,"reputation":5010,"user_id":7859515,"accept_rate":100,"display_name":"MyStackRunnethOver"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":true,"score":2,"last_activity_date":1688694586,"creation_date":1587683794,"answer_id":61398523,"question_id":61376748,"body_markdown":"Zipcodes have [a lot of complexities](https://en.wikipedia.org/wiki/ZIP_Code). For this reason, they feature in chronicles of [programmers&#39; incorrect assumptions](https://www.mjt.me.uk/posts/falsehoods-programmers-believe-about-addresses/).\r\n\r\nYou can use guidelines such as [this table](http://www.fedex.com/be/shippingguide/postalcodeformat.html) from FedEx, e.g.\r\n\r\n&gt;  PT - Portugal - `NNNN` or `NNNN-nnn` or `NNNNnnn`\r\n\r\nBut keep in mind that most sources, like that one, will be incomplete.\r\n\r\n______\r\n\r\nI suggest asking: *why bother*? If you want to accept zip codes from all over the world, and fail if they&#39;re not within the range of your allowed length, you&#39;re not actually protecting yourself very much at all. A user in a country with the shortest zip codes could enter a zipcode the length of the longest country&#39;s. A user in a country with strictly numerical zipcodes might input one with alpha characters.\r\n\r\nThe only way to be &quot;sure&quot; (for some meaningful value of sure) is to use some form of [address validation](https://smartystreets.com/articles/what-is-address-validation).\r\n\r\n","title":"What is the min and max character length for a non-US postal code","body":"<p>Zipcodes have <a href=\"https://en.wikipedia.org/wiki/ZIP_Code\" rel=\"nofollow noreferrer\">a lot of complexities</a>. For this reason, they feature in chronicles of <a href=\"https://www.mjt.me.uk/posts/falsehoods-programmers-believe-about-addresses/\" rel=\"nofollow noreferrer\">programmers' incorrect assumptions</a>.</p>\n<p>You can use guidelines such as <a href=\"http://www.fedex.com/be/shippingguide/postalcodeformat.html\" rel=\"nofollow noreferrer\">this table</a> from FedEx, e.g.</p>\n<blockquote>\n<p>PT - Portugal - <code>NNNN</code> or <code>NNNN-nnn</code> or <code>NNNNnnn</code></p>\n</blockquote>\n<p>But keep in mind that most sources, like that one, will be incomplete.</p>\n<hr />\n<p>I suggest asking: <em>why bother</em>? If you want to accept zip codes from all over the world, and fail if they're not within the range of your allowed length, you're not actually protecting yourself very much at all. A user in a country with the shortest zip codes could enter a zipcode the length of the longest country's. A user in a country with strictly numerical zipcodes might input one with alpha characters.</p>\n<p>The only way to be &quot;sure&quot; (for some meaningful value of sure) is to use some form of <a href=\"https://smartystreets.com/articles/what-is-address-validation\" rel=\"nofollow noreferrer\">address validation</a>.</p>\n"}],"owner":{"account_id":4885117,"reputation":1866,"user_id":3937811,"accept_rate":91,"display_name":"Evan Gertis"},"comment_count":2,"delete_vote_count":2,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5788,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"closed_date":1587721964,"accepted_answer_id":61398523,"answer_count":1,"score":-1,"last_activity_date":1688694586,"creation_date":1587597662,"question_id":61376748,"body_markdown":"I am trying to develop an application that accepts a postal code from a form. The form is accessible worldwide. I know that for US zip codes the standard character length is 5, but what is the min and max for non-US postal codes? I need to know because I am using a validation constraint:\r\n```\r\n/**\r\n     * The zip code used to retrieve a US based customer&#39;s state.\r\n     */\r\n    @Nullable\r\n    @Size(min=5, max=5)\r\n    private final String zip;\r\n```\r\nThis question was marked as a duplicate because of this post: https://stackoverflow.com/questions/325041/i-need-to-store-postal-codes-in-a-database-how-big-should-the-column-be. Which doesn&#39;t specify the minimum for all non-US postal codes.","title":"What is the min and max character length for a non-US postal code","body":"<p>I am trying to develop an application that accepts a postal code from a form. The form is accessible worldwide. I know that for US zip codes the standard character length is 5, but what is the min and max for non-US postal codes? I need to know because I am using a validation constraint:</p>\n\n<pre><code>/**\n     * The zip code used to retrieve a US based customer's state.\n     */\n    @Nullable\n    @Size(min=5, max=5)\n    private final String zip;\n</code></pre>\n\n<p>This question was marked as a duplicate because of this post: <a href=\"https://stackoverflow.com/questions/325041/i-need-to-store-postal-codes-in-a-database-how-big-should-the-column-be\">I need to store postal codes in a database. How big should the column be?</a>. Which doesn't specify the minimum for all non-US postal codes.</p>\n"},{"tags":["java","sqlite"],"answers":[{"tags":[],"owner":{"account_id":480369,"reputation":735,"user_id":893574,"accept_rate":60,"display_name":"naveejr"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1688637206,"creation_date":1688637206,"answer_id":76627599,"question_id":76538042,"body_markdown":"Use the JDBC library \r\n\r\n    &lt;dependency&gt;\r\n            &lt;groupId&gt;io.github.willena&lt;/groupId&gt;\r\n            &lt;artifactId&gt;sqlite-jdbc&lt;/artifactId&gt;\r\n            &lt;version&gt;3.41.2.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nThen Create the connection\r\n\r\n    Connection connection =\r\n\t\t\t\t\t DriverManager.getConnection(&quot;jdbc:sqlite:file:cryptedDB.db?cipher=sqlcipher&amp;key=kilikilikoinkoin&amp;legacy=3&quot;)\r\n\r\nAlso, make sure &quot;file&quot; part in the JDBC connection string.\r\n\r\n","title":"How to connect to an encrypted SQLite database?","body":"<p>Use the JDBC library</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;io.github.willena&lt;/groupId&gt;\n        &lt;artifactId&gt;sqlite-jdbc&lt;/artifactId&gt;\n        &lt;version&gt;3.41.2.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Then Create the connection</p>\n<pre><code>Connection connection =\n                 DriverManager.getConnection(&quot;jdbc:sqlite:file:cryptedDB.db?cipher=sqlcipher&amp;key=kilikilikoinkoin&amp;legacy=3&quot;)\n</code></pre>\n<p>Also, make sure &quot;file&quot; part in the JDBC connection string.</p>\n"}],"owner":{"account_id":20789987,"reputation":1,"user_id":15268397,"display_name":"Dif Abderrahmen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":131,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1688694087,"creation_date":1687506287,"question_id":76538042,"body_markdown":"I created an SQLite database using &quot;DB Browser for SQLite&quot; and encrypted it using SQLCipher 3, but when I execute my code the database is unreadable. I removed the encryption and it works.\r\n\r\nHow can I connect to an encrypted SQLite database? I already added the SQLCipher jar to my build path \\&gt; library.\r\n\r\n&gt;ERROR :opening db: &#39;src/database/cryptedDB.db?key=kilikilikoinkoin&#39; : File, directory, or volume name syntax is incorrect\r\n\r\nCode:\r\n\r\n```\r\npublic class DBmanager {\r\n\t\r\n\tConnection connection;\r\n\tString database= &quot;jdbc:sqlite:src/database/cryptedDB.db&quot;;\r\n\tprivate String encryptionKey = &quot;kilikilikoinkoin&quot;;\r\n\t\r\n\tpublic DBmanager() {\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic boolean Connect() throws SQLException {\r\n        try {\r\n        \tString url = database + &quot;?key=&quot; + encryptionKey;\r\n\r\n             // Establish the connection with the modified URL\r\n             Connection connection = DriverManager.getConnection(url);\r\n        \tif (connection != null &amp;&amp; !connection.isClosed()) {\r\n        \t\treturn true;\r\n            }\r\n        } catch (SQLException e) {\r\n            e.printStackTrace();\r\n            return false;\r\n        }\r\n        return false;\r\n        \r\n\t}\r\n}\r\n```\r\n\r\nChanging URL from  `?key=` to `?pragma_key=` is not working. Eclipse shows error in `sqLiteDatabase.rawQuery()` and the correction is to &quot;build path&quot; even though I already added SQLCipher.\r\n\r\n```\r\nSQLiteDatabase.loadLibs(); // Load SQLCipher native libraries\r\nSQLiteDatabase sqLiteDatabase = SQLiteDatabase.openDatabase(database, passphrase, null, SQLiteDatabase.OPEN_READWRITE);\r\nlong nativeConnectionPtr =sqLiteDatabase.rawQuery(&quot;SELECT sqlite3_handle_v2(&#39;main&#39;);&quot;,null).getLong(0);\r\n// Wrap the native connection in a java.sql.Connection object using SQLite JDBC driver\r\nSQLiteConfig config = new SQLiteConfig();\r\nconfig.setSharedCache(true);\r\n```","title":"How to connect to an encrypted SQLite database?","body":"<p>I created an SQLite database using &quot;DB Browser for SQLite&quot; and encrypted it using SQLCipher 3, but when I execute my code the database is unreadable. I removed the encryption and it works.</p>\n<p>How can I connect to an encrypted SQLite database? I already added the SQLCipher jar to my build path &gt; library.</p>\n<blockquote>\n<p>ERROR :opening db: 'src/database/cryptedDB.db?key=kilikilikoinkoin' : File, directory, or volume name syntax is incorrect</p>\n</blockquote>\n<p>Code:</p>\n<pre><code>public class DBmanager {\n    \n    Connection connection;\n    String database= &quot;jdbc:sqlite:src/database/cryptedDB.db&quot;;\n    private String encryptionKey = &quot;kilikilikoinkoin&quot;;\n    \n    public DBmanager() {\n        \n    }\n    \n    public boolean Connect() throws SQLException {\n        try {\n            String url = database + &quot;?key=&quot; + encryptionKey;\n\n             // Establish the connection with the modified URL\n             Connection connection = DriverManager.getConnection(url);\n            if (connection != null &amp;&amp; !connection.isClosed()) {\n                return true;\n            }\n        } catch (SQLException e) {\n            e.printStackTrace();\n            return false;\n        }\n        return false;\n        \n    }\n}\n</code></pre>\n<p>Changing URL from  <code>?key=</code> to <code>?pragma_key=</code> is not working. Eclipse shows error in <code>sqLiteDatabase.rawQuery()</code> and the correction is to &quot;build path&quot; even though I already added SQLCipher.</p>\n<pre><code>SQLiteDatabase.loadLibs(); // Load SQLCipher native libraries\nSQLiteDatabase sqLiteDatabase = SQLiteDatabase.openDatabase(database, passphrase, null, SQLiteDatabase.OPEN_READWRITE);\nlong nativeConnectionPtr =sqLiteDatabase.rawQuery(&quot;SELECT sqlite3_handle_v2('main');&quot;,null).getLong(0);\n// Wrap the native connection in a java.sql.Connection object using SQLite JDBC driver\nSQLiteConfig config = new SQLiteConfig();\nconfig.setSharedCache(true);\n</code></pre>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"score":0,"creation_date":1688682781,"post_id":76632242,"comment_id":135110645,"body_markdown":"Why is there a parameter to the method?  A service class could delegate to the entity to ask if it&#39;s done.  So the entity itself will tell you if it&#39;s done (encapsulation), to avoid leaking of `EntityState`.","body":"Why is there a parameter to the method?  A service class could delegate to the entity to ask if it&#39;s done.  So the entity itself will tell you if it&#39;s done (encapsulation), to avoid leaking of <code>EntityState</code>."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1688714344,"post_id":76632242,"comment_id":135113529,"body_markdown":"Why should it be in the service, it should be on the entity. You shouldn&#39;t pass state around if the entity (or the class itself) can answer the question. Why would I need to retrieve the entity, prune the data out of the entity, call a service method. While I could be calling the `entity.isDone` in one pass.","body":"Why should it be in the service, it should be on the entity. You shouldn&#39;t pass state around if the entity (or the class itself) can answer the question. Why would I need to retrieve the entity, prune the data out of the entity, call a service method. While I could be calling the <code>entity.isDone</code> in one pass."}],"answers":[{"tags":[],"owner":{"account_id":75804,"reputation":94840,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1688691916,"creation_date":1688691916,"answer_id":76633347,"question_id":76632242,"body_markdown":"Since this seems to be checking the state of an entity, my preference would be to add this as an instance method on the entity class. \r\n\r\nIt really isn&#39;t clear if this interface has some other purpose or if it is created just to host this static method, so it isn&#39;t clear what the advantage is of having it. Putting the method on the service is ok if there is some reason to avoid adding the method to the entity class. \r\n\r\nIt would be better to use enums than to compare strings. You can also make this safer by reversing the order like \r\n\r\n     EntityState.DONE.equals(x);\r\n\r\nThis way if x is null it doesn&#39;t throw a NPE. ","title":"Spring boot interface declaring static method","body":"<p>Since this seems to be checking the state of an entity, my preference would be to add this as an instance method on the entity class.</p>\n<p>It really isn't clear if this interface has some other purpose or if it is created just to host this static method, so it isn't clear what the advantage is of having it. Putting the method on the service is ok if there is some reason to avoid adding the method to the entity class.</p>\n<p>It would be better to use enums than to compare strings. You can also make this safer by reversing the order like</p>\n<pre><code> EntityState.DONE.equals(x);\n</code></pre>\n<p>This way if x is null it doesn't throw a NPE.</p>\n"}],"owner":{"account_id":18582159,"reputation":169,"user_id":13541453,"display_name":"Peter"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76633347,"answer_count":1,"score":0,"last_activity_date":1688691916,"creation_date":1688674165,"question_id":76632242,"body_markdown":"I&#39;m wondering about one pure function, should I declared it as static method or as instance method in Spring boot app. Because I think the best place for this function is the Service class of the entity, in the case of declaring it as static, it should be placed in the interface, but I have some concerns that this is not following the best practices. I added the similar function to mint below. \r\n\r\n```\r\npublic boolean isDone(String x) {\r\n   return x.equals(EntityState.DONE);\r\n}\r\n```","title":"Spring boot interface declaring static method","body":"<p>I'm wondering about one pure function, should I declared it as static method or as instance method in Spring boot app. Because I think the best place for this function is the Service class of the entity, in the case of declaring it as static, it should be placed in the interface, but I have some concerns that this is not following the best practices. I added the similar function to mint below.</p>\n<pre><code>public boolean isDone(String x) {\n   return x.equals(EntityState.DONE);\n}\n</code></pre>\n"},{"tags":["java","exception"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":1,"creation_date":1412142894,"post_id":26134896,"comment_id":40964024,"body_markdown":"For example using a NumberFormatException to test if input from a user is numeric.","body":"For example using a NumberFormatException to test if input from a user is numeric."},{"owner":{"account_id":2211999,"reputation":9954,"user_id":1953590,"accept_rate":74,"display_name":"Kevin Krumwiede"},"score":0,"creation_date":1412143817,"post_id":26134896,"comment_id":40964321,"body_markdown":"I think it has something to do with the computational complexity of setting up for and catching an exception vs. more conventional flow control.  But I can&#39;t elaborate, which is why this is a comment and not an answer.","body":"I think it has something to do with the computational complexity of setting up for and catching an exception vs. more conventional flow control.  But I can&#39;t elaborate, which is why this is a comment and not an answer."},{"owner":{"account_id":2411637,"reputation":829,"user_id":2106576,"display_name":"Kishore"},"score":0,"creation_date":1412144035,"post_id":26134896,"comment_id":40964396,"body_markdown":"I think &quot;Javas exception-handling statements should not be considered a general mechanism for nonlocal branching&quot; means using the exception bubbling mechanism to branch to some other function by calling the other function in the `catch` block way up the call stack(similar to using `goto` statement to branch non locally). This breaks the conventional control flow and makes the logic difficult to understand and maintain.","body":"I think &quot;Javas exception-handling statements should not be considered a general mechanism for nonlocal branching&quot; means using the exception bubbling mechanism to branch to some other function by calling the other function in the <code>catch</code> block way up the call stack(similar to using <code>goto</code> statement to branch non locally). This breaks the conventional control flow and makes the logic difficult to understand and maintain."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1688689935,"post_id":26134896,"comment_id":135111244,"body_markdown":"He means not using it as a `goto`. However as several generations of programmers have now been born who have never heard of a `goto` the warning is considerably out of date. They used to also say &quot;don&#39;t use exceptions as a form of flow control&quot;: the problem with that statement being that exceptions *are* a form of flow control. Just use them for errors and you won&#39;t get hurt.","body":"He means not using it as a <code>goto</code>. However as several generations of programmers have now been born who have never heard of a <code>goto</code> the warning is considerably out of date. They used to also say &quot;don&#39;t use exceptions as a form of flow control&quot;: the problem with that statement being that exceptions <i>are</i> a form of flow control. Just use them for errors and you won&#39;t get hurt."}],"answers":[{"comments":[{"owner":{"account_id":4870584,"reputation":13948,"user_id":3927264,"accept_rate":68,"display_name":"Farhan stands with Palestine"},"score":0,"creation_date":1412144857,"post_id":26135179,"comment_id":40964717,"body_markdown":"the answer on the coderanch seems to suggest the same thing. Are you sure this is what Herbert Schildt referred to as nonlocal branching? or is there more to this. I am just guessing at what would ever compel me to have the second version(less readable one above) in my program?","body":"the answer on the coderanch seems to suggest the same thing. Are you sure this is what Herbert Schildt referred to as nonlocal branching? or is there more to this. I am just guessing at what would ever compel me to have the second version(less readable one above) in my program?"},{"owner":{"account_id":1223835,"reputation":75888,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1412145282,"post_id":26135179,"comment_id":40964878,"body_markdown":"@ShirgillAnsari When the processing in the branch is complicated enough that it needs its own method or even class. In fact, the Replace Conditional with Polymorphism refactoring eliminates `if` statements entirely and requires separate classes for different behaviors.","body":"@ShirgillAnsari When the processing in the branch is complicated enough that it needs its own method or even class. In fact, the Replace Conditional with Polymorphism refactoring eliminates <code>if</code> statements entirely and requires separate classes for different behaviors."},{"owner":{"account_id":1284143,"reputation":43090,"user_id":1237575,"accept_rate":96,"display_name":"Rafael Winterhalter"},"score":1,"creation_date":1412145479,"post_id":26135179,"comment_id":40964964,"body_markdown":"@ShirgillAnsari Yes, I am pretty sure this is what is meant. Non-local branching always considers a branch that is distributed among methods. In Java, this is only possible via exceptions.","body":"@ShirgillAnsari Yes, I am pretty sure this is what is meant. Non-local branching always considers a branch that is distributed among methods. In Java, this is only possible via exceptions."}],"tags":[],"owner":{"account_id":1284143,"reputation":43090,"user_id":1237575,"accept_rate":96,"display_name":"Rafael Winterhalter"},"comment_count":3,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1412145396,"creation_date":1412144131,"answer_id":26135179,"question_id":26134896,"body_markdown":"Here is an example of a local branch:\r\n\r\n    void foo() {\r\n      if (someCondition) {\r\n        doSomething();\r\n      } else {\r\n        doSomethingElse();\r\n      }\r\n    }\r\n\r\nThe branching is quite forward to understand, right? The reason for this simplicity is that all branching logic is defined within `foo`. Locally, so to speak. This means, a condition is checked and its path is taken depending on `someCondition` but the branching does not escape `foo`. By only looking at this one method, you know how the code flow might look like.\r\n\r\nNow think of this less-readable implementation:\r\n\r\n    void foo() {\r\n      if(bar()) {\r\n        // branch is handled by bar\r\n      } else {\r\n        doSomethingElse();\r\n      }\r\n    }\r\n\r\n    boolean bar() {\r\n      if(somethingWrong) {\r\n        return false;\r\n      }\r\n      doSomething();\r\n    }\r\n\r\nThis is less readable. But why is that? If you are calling a method `bar` from `foo`, the control flow is handled by `bar`. `bar` might however do something unexpected and still rely on `foo` to handle this unexpected condition. This is not a good practice as you distribute connected logic among `foo` and `bar` where a change at one place might cause a misbehavior at another place. This is somewhat what exceptions do if they are treated *too far down the stack*. You can even extend the complexity of the above example by adding more intermediate methods. Therefore, the book suggests, to keep branching locally as this often is more human readable and traceable what I would equally suggest as a good idea. Look at this exception-based implementation of the above code to visualize this more:\r\n\r\n    void foo() {\r\n      try {\r\n        bar()\r\n      } catch(SomeException e) {\r\n        doSomethingElse();\r\n      }\r\n    }\r\n\r\n    boolean bar() {\r\n      if(somethingWrong) {\r\n        throw new SomeException();\r\n      }\r\n      doSomething();\r\n    }\r\n\r\nObviously, this distributed branch is more error-prone than an `if`-`else` statement.","title":"Why Javas exception-handling statements should not be considered a general mechanism for nonlocal branching?","body":"<p>Here is an example of a local branch:</p>\n\n<pre><code>void foo() {\n  if (someCondition) {\n    doSomething();\n  } else {\n    doSomethingElse();\n  }\n}\n</code></pre>\n\n<p>The branching is quite forward to understand, right? The reason for this simplicity is that all branching logic is defined within <code>foo</code>. Locally, so to speak. This means, a condition is checked and its path is taken depending on <code>someCondition</code> but the branching does not escape <code>foo</code>. By only looking at this one method, you know how the code flow might look like.</p>\n\n<p>Now think of this less-readable implementation:</p>\n\n<pre><code>void foo() {\n  if(bar()) {\n    // branch is handled by bar\n  } else {\n    doSomethingElse();\n  }\n}\n\nboolean bar() {\n  if(somethingWrong) {\n    return false;\n  }\n  doSomething();\n}\n</code></pre>\n\n<p>This is less readable. But why is that? If you are calling a method <code>bar</code> from <code>foo</code>, the control flow is handled by <code>bar</code>. <code>bar</code> might however do something unexpected and still rely on <code>foo</code> to handle this unexpected condition. This is not a good practice as you distribute connected logic among <code>foo</code> and <code>bar</code> where a change at one place might cause a misbehavior at another place. This is somewhat what exceptions do if they are treated <em>too far down the stack</em>. You can even extend the complexity of the above example by adding more intermediate methods. Therefore, the book suggests, to keep branching locally as this often is more human readable and traceable what I would equally suggest as a good idea. Look at this exception-based implementation of the above code to visualize this more:</p>\n\n<pre><code>void foo() {\n  try {\n    bar()\n  } catch(SomeException e) {\n    doSomethingElse();\n  }\n}\n\nboolean bar() {\n  if(somethingWrong) {\n    throw new SomeException();\n  }\n  doSomething();\n}\n</code></pre>\n\n<p>Obviously, this distributed branch is more error-prone than an <code>if</code>-<code>else</code> statement.</p>\n"}],"owner":{"account_id":4870584,"reputation":13948,"user_id":3927264,"accept_rate":68,"display_name":"Farhan stands with Palestine"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1409,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":26135179,"answer_count":1,"score":9,"last_activity_date":1688689743,"creation_date":1412142662,"question_id":26134896,"body_markdown":"Going through Herbert Schildt : The Complete Reference Chapter 10 Exception Handling\r\n\r\n&gt;Exception handling provides a powerful mechanism for controlling complex programs that\r\n    have many dynamic run-time characteristics. It is important to think of try, throw, and catch\r\n    as clean ways to handle errors and unusual boundary conditions in your programs logic.\r\n    Unlike some other languages in which error return codes are used to indicate failure, Java\r\n    uses exceptions. Thus, when a method can fail, have it throw an exception. This is a cleaner\r\n    way to handle failure modes.\r\n    One last point: Javas exception-handling statements should not be considered a general\r\n    mechanism for nonlocal branching. If you do so, it will only confuse your code and make it\r\n    hard to maintain.\r\n\r\nWhat does he mean by the term &#39;nonlocal branching&#39;?\r\n","title":"Why Javas exception-handling statements should not be considered a general mechanism for nonlocal branching?","body":"<p>Going through Herbert Schildt : The Complete Reference Chapter 10 Exception Handling</p>\n<blockquote>\n<p>Exception handling provides a powerful mechanism for controlling complex programs that\nhave many dynamic run-time characteristics. It is important to think of try, throw, and catch\nas clean ways to handle errors and unusual boundary conditions in your programs logic.\nUnlike some other languages in which error return codes are used to indicate failure, Java\nuses exceptions. Thus, when a method can fail, have it throw an exception. This is a cleaner\nway to handle failure modes.\nOne last point: Javas exception-handling statements should not be considered a general\nmechanism for nonlocal branching. If you do so, it will only confuse your code and make it\nhard to maintain.</p>\n</blockquote>\n<p>What does he mean by the term 'nonlocal branching'?</p>\n"},{"tags":["java","testing","junit","mockito","stubbing"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1688687970,"post_id":76633034,"comment_id":135111096,"body_markdown":"If `method()` is on the class you are testing, then you can&#39;t stub it, because that would require mocking the object you want to test.","body":"If <code>method()</code> is on the class you are testing, then you can&#39;t stub it, because that would require mocking the object you want to test."},{"owner":{"account_id":28877534,"reputation":9,"user_id":22117693,"display_name":"Anonymous"},"score":0,"creation_date":1688688544,"post_id":76633034,"comment_id":135111138,"body_markdown":"@tgdavies the `method()` is from some other class.","body":"@tgdavies the <code>method()</code> is from some other class."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1688688594,"post_id":76633034,"comment_id":135111143,"body_markdown":"Then it would be `otherClass.method()` -- unless you mean a superclass?","body":"Then it would be <code>otherClass.method()</code> -- unless you mean a superclass?"},{"owner":{"account_id":28877534,"reputation":9,"user_id":22117693,"display_name":"Anonymous"},"score":0,"creation_date":1688688864,"post_id":76633034,"comment_id":135111166,"body_markdown":"@tgdavies I have edited. But what&#39;s solution for my question?","body":"@tgdavies I have edited. But what&#39;s solution for my question?"}],"answers":[{"tags":[],"owner":{"account_id":13717888,"reputation":1,"user_id":9898619,"display_name":"Demneru"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688689011,"creation_date":1688688838,"answer_id":76633203,"question_id":76633034,"body_markdown":"You can use @Spy for your instance what are testing.\r\n\r\nSpies are like mocks but you can stub some methods of the same class what you are testing\r\n--well this answer was for your first question\r\n\r\nAfter edit, you can just chain the second stub\r\n\r\nwhen(method()).thenThrow(exception).thenThrow(exception);","title":"how to skip fist when-then call in junit","body":"<p>You can use @Spy for your instance what are testing.</p>\n<p>Spies are like mocks but you can stub some methods of the same class what you are testing\n--well this answer was for your first question</p>\n<p>After edit, you can just chain the second stub</p>\n<p>when(method()).thenThrow(exception).thenThrow(exception);</p>\n"},{"tags":[],"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1688689637,"creation_date":1688689637,"answer_id":76633240,"question_id":76633034,"body_markdown":"You can repeat Mockito&#39;s `do...()` methods when you mock a void method:\r\n```\r\n        doNothing().doThrow(new RuntimeException(&quot;test&quot;)).when(mock).method();\r\n```\r\n\r\nThe effects will happen in sequence if there are multiple calls to `method`.","title":"how to skip fist when-then call in junit","body":"<p>You can repeat Mockito's <code>do...()</code> methods when you mock a void method:</p>\n<pre><code>        doNothing().doThrow(new RuntimeException(&quot;test&quot;)).when(mock).method();\n</code></pre>\n<p>The effects will happen in sequence if there are multiple calls to <code>method</code>.</p>\n"}],"owner":{"account_id":28877534,"reputation":9,"user_id":22117693,"display_name":"Anonymous"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76633240,"answer_count":2,"score":0,"last_activity_date":1688689637,"creation_date":1688685124,"question_id":76633034,"body_markdown":"I want to write a Junit test for a Java code similar to the code below. In the code, `method()` is called 2 times. In my Junit test, I have something like this `when(method()).thenThrow(exception);` but I want this when-then to be triggered on the 2nd `method()` call, and not on the 1st `method()` call. So, how can I do that?\r\n\r\n```\r\nclass Example {\r\n    public void example() {\r\n        OtherClass.method(); //1st method call\r\n        /*\r\n        * doing something\r\n        */\r\n        OtherClass.method(); //2nd method call\r\n    }\r\n}\r\n```","title":"how to skip fist when-then call in junit","body":"<p>I want to write a Junit test for a Java code similar to the code below. In the code, <code>method()</code> is called 2 times. In my Junit test, I have something like this <code>when(method()).thenThrow(exception);</code> but I want this when-then to be triggered on the 2nd <code>method()</code> call, and not on the 1st <code>method()</code> call. So, how can I do that?</p>\n<pre><code>class Example {\n    public void example() {\n        OtherClass.method(); //1st method call\n        /*\n        * doing something\n        */\n        OtherClass.method(); //2nd method call\n    }\n}\n</code></pre>\n"},{"tags":["java","image","javafx","imageview","color-picker"],"comments":[{"owner":{"account_id":8517137,"reputation":835,"user_id":6385232,"display_name":"geanakuch"},"score":0,"creation_date":1688624966,"post_id":76626020,"comment_id":135099113,"body_markdown":"Please don&#39;t put pictures of code, paste the code as text into the question.","body":"Please don&#39;t put pictures of code, paste the code as text into the question."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1688632606,"post_id":76626020,"comment_id":135100651,"body_markdown":"But do include the pictures necessary to replicate your issue (the original t shirt &#128090; image).","body":"But do include the pictures necessary to replicate your issue (the original t shirt  image)."}],"answers":[{"comments":[{"owner":{"account_id":28960438,"reputation":21,"user_id":22183025,"display_name":"zaman"},"score":0,"creation_date":1688801580,"post_id":76633210,"comment_id":135125140,"body_markdown":"Thanks a lot @jewelsea. IT WORKED!! You&#39;ve done a massive favour to me. I was stuck at this for 4 days. I am not sure how to reply a user in this platform as I am a new user but I hope it reaches you!","body":"Thanks a lot @jewelsea. IT WORKED!! You&#39;ve done a massive favour to me. I was stuck at this for 4 days. I am not sure how to reply a user in this platform as I am a new user but I hope it reaches you!"}],"tags":[],"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1688689414,"creation_date":1688688934,"answer_id":76633210,"question_id":76626020,"body_markdown":"How to color an image from a color picker.\r\n\r\n * Ensure your `png` input image has appropriate areas of transparent color (your example t-shirt image does).\r\n * Define a [ColorPicker][1] to pick your color.\r\n * Bind the [picked color][2] to a [MULTIPLY][3] [blended][4] [ColorInput][5] effect on a [desaturated][6] monochrome [adjusted][7] or [grayscaled][8] image, with the image [clipped][9] by a clip defined by the image.\r\n\r\nFor more info see:\r\n\r\n * https://stackoverflow.com/questions/18124364/how-to-change-color-of-image-in-javafx/18124868#18124868\r\n\r\n**Example**\r\n\r\nPlace the image used (I used the image provided in your question) in a resource folder with the same directory structure as the package you place the sample code in.\r\n\r\n[![purple][10]][10]\r\n\r\n[![orange][11]][11]\r\n\r\n    import javafx.application.Application;\r\n    import javafx.beans.property.ObjectProperty;\r\n    import javafx.geometry.Insets;\r\n    import javafx.geometry.Pos;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.ColorPicker;\r\n    import javafx.scene.effect.*;\r\n    import javafx.scene.image.Image;\r\n    import javafx.scene.image.ImageView;\r\n    import javafx.scene.layout.VBox;\r\n    import javafx.scene.paint.Color;\r\n    import javafx.stage.Stage;\r\n    \r\n    import java.util.Objects;\r\n    \r\n    public class TShirtDesigner extends Application {\r\n    \r\n        @Override\r\n        public void start(Stage stage) throws Exception {\r\n            ColorPicker colorPicker = new ColorPicker();\r\n    \r\n            Image tshirtImage = new Image(\r\n                    Objects.requireNonNull(\r\n                            TShirtDesigner.class.getResource(\r\n                                    &quot;tshirt.png&quot;\r\n                            )\r\n                    ).toExternalForm()\r\n            );\r\n    \r\n            ImageView tshirt = new ImageView(tshirtImage);\r\n            tshirt.setClip(new ImageView(tshirtImage));\r\n    \r\n            bindImageColor(\r\n                    tshirt,\r\n                    colorPicker.valueProperty()\r\n            );\r\n    \r\n            VBox layout = new VBox(\r\n                    10,\r\n                    colorPicker,\r\n                    tshirt\r\n            );\r\n            layout.setAlignment(Pos.CENTER);\r\n            layout.setPadding(new Insets(10));\r\n    \r\n            Scene scene = new Scene(layout);\r\n            stage.setScene(scene);\r\n            stage.show();\r\n        }\r\n    \r\n        private static void bindImageColor(\r\n                ImageView imageView,\r\n                ObjectProperty&lt;Color&gt; colorProperty\r\n        ) {\r\n            ColorInput colorInput = new ColorInput(\r\n                    0,\r\n                    0,\r\n                    imageView.getImage().getWidth(),\r\n                    imageView.getImage().getHeight(),\r\n                    colorProperty.get()\r\n            );\r\n            colorInput.paintProperty().bind(\r\n                    colorProperty\r\n            );\r\n    \r\n            ColorAdjust monochrome = new ColorAdjust();\r\n            monochrome.setSaturation(-1.0);\r\n    \r\n            Blend colorBlend = new Blend(\r\n                    BlendMode.MULTIPLY,\r\n                    monochrome,\r\n                    colorInput\r\n            );\r\n    \r\n            imageView.setEffect(colorBlend);\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            launch(args);\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://openjfx.io/javadoc/17/javafx.controls/javafx/scene/control/ColorPicker.html\r\n  [2]: https://openjfx.io/javadoc/17/javafx.controls/javafx/scene/control/ComboBoxBase.html#valueProperty()\r\n  [3]: https://openjfx.io/javadoc/17/javafx.graphics/javafx/scene/effect/BlendMode.html#MULTIPLY\r\n  [4]: https://openjfx.io/javadoc/17/javafx.graphics/javafx/scene/effect/Blend.html\r\n  [5]: https://openjfx.io/javadoc/17/javafx.graphics/javafx/scene/effect/ColorInput.html\r\n  [6]: https://openjfx.io/javadoc/17/javafx.graphics/javafx/scene/effect/ColorAdjust.html#setSaturation(double)\r\n  [7]: https://openjfx.io/javadoc/17/javafx.graphics/javafx/scene/effect/ColorAdjust.html\r\n  [8]: https://stackoverflow.com/questions/43068319/how-to-create-javafx-16-bit-greyscale-images/43080085#43080085\r\n  [9]: https://openjfx.io/javadoc/17/javafx.graphics/javafx/scene/Node.html#setClip(javafx.scene.Node)\r\n  [10]: https://i.stack.imgur.com/quWOz.png\r\n  [11]: https://i.stack.imgur.com/gS9VB.png","title":"Use of ColorPicker on an image in JavaFX","body":"<p>How to color an image from a color picker.</p>\n<ul>\n<li>Ensure your <code>png</code> input image has appropriate areas of transparent color (your example t-shirt image does).</li>\n<li>Define a <a href=\"https://openjfx.io/javadoc/17/javafx.controls/javafx/scene/control/ColorPicker.html\" rel=\"nofollow noreferrer\">ColorPicker</a> to pick your color.</li>\n<li>Bind the <a href=\"https://openjfx.io/javadoc/17/javafx.controls/javafx/scene/control/ComboBoxBase.html#valueProperty()\" rel=\"nofollow noreferrer\">picked color</a> to a <a href=\"https://openjfx.io/javadoc/17/javafx.graphics/javafx/scene/effect/BlendMode.html#MULTIPLY\" rel=\"nofollow noreferrer\">MULTIPLY</a> <a href=\"https://openjfx.io/javadoc/17/javafx.graphics/javafx/scene/effect/Blend.html\" rel=\"nofollow noreferrer\">blended</a> <a href=\"https://openjfx.io/javadoc/17/javafx.graphics/javafx/scene/effect/ColorInput.html\" rel=\"nofollow noreferrer\">ColorInput</a> effect on a <a href=\"https://openjfx.io/javadoc/17/javafx.graphics/javafx/scene/effect/ColorAdjust.html#setSaturation(double)\" rel=\"nofollow noreferrer\">desaturated</a> monochrome <a href=\"https://openjfx.io/javadoc/17/javafx.graphics/javafx/scene/effect/ColorAdjust.html\" rel=\"nofollow noreferrer\">adjusted</a> or <a href=\"https://stackoverflow.com/questions/43068319/how-to-create-javafx-16-bit-greyscale-images/43080085#43080085\">grayscaled</a> image, with the image <a href=\"https://openjfx.io/javadoc/17/javafx.graphics/javafx/scene/Node.html#setClip(javafx.scene.Node)\" rel=\"nofollow noreferrer\">clipped</a> by a clip defined by the image.</li>\n</ul>\n<p>For more info see:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/18124364/how-to-change-color-of-image-in-javafx/18124868#18124868\">How to change color of image in JavaFX</a></li>\n</ul>\n<p><strong>Example</strong></p>\n<p>Place the image used (I used the image provided in your question) in a resource folder with the same directory structure as the package you place the sample code in.</p>\n<p><a href=\"https://i.stack.imgur.com/quWOz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/quWOz.png\" alt=\"purple\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/gS9VB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gS9VB.png\" alt=\"orange\" /></a></p>\n<pre><code>import javafx.application.Application;\nimport javafx.beans.property.ObjectProperty;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.control.ColorPicker;\nimport javafx.scene.effect.*;\nimport javafx.scene.image.Image;\nimport javafx.scene.image.ImageView;\nimport javafx.scene.layout.VBox;\nimport javafx.scene.paint.Color;\nimport javafx.stage.Stage;\n\nimport java.util.Objects;\n\npublic class TShirtDesigner extends Application {\n\n    @Override\n    public void start(Stage stage) throws Exception {\n        ColorPicker colorPicker = new ColorPicker();\n\n        Image tshirtImage = new Image(\n                Objects.requireNonNull(\n                        TShirtDesigner.class.getResource(\n                                &quot;tshirt.png&quot;\n                        )\n                ).toExternalForm()\n        );\n\n        ImageView tshirt = new ImageView(tshirtImage);\n        tshirt.setClip(new ImageView(tshirtImage));\n\n        bindImageColor(\n                tshirt,\n                colorPicker.valueProperty()\n        );\n\n        VBox layout = new VBox(\n                10,\n                colorPicker,\n                tshirt\n        );\n        layout.setAlignment(Pos.CENTER);\n        layout.setPadding(new Insets(10));\n\n        Scene scene = new Scene(layout);\n        stage.setScene(scene);\n        stage.show();\n    }\n\n    private static void bindImageColor(\n            ImageView imageView,\n            ObjectProperty&lt;Color&gt; colorProperty\n    ) {\n        ColorInput colorInput = new ColorInput(\n                0,\n                0,\n                imageView.getImage().getWidth(),\n                imageView.getImage().getHeight(),\n                colorProperty.get()\n        );\n        colorInput.paintProperty().bind(\n                colorProperty\n        );\n\n        ColorAdjust monochrome = new ColorAdjust();\n        monochrome.setSaturation(-1.0);\n\n        Blend colorBlend = new Blend(\n                BlendMode.MULTIPLY,\n                monochrome,\n                colorInput\n        );\n\n        imageView.setEffect(colorBlend);\n    }\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":28960438,"reputation":21,"user_id":22183025,"display_name":"zaman"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1688689414,"creation_date":1688624507,"question_id":76626020,"body_markdown":"I have an image in the imageview. What I want to do is add color to it. Basically it&#39;s like a layer of color on the image. So I am trying to add color to a t-shirt image using the ColorPicker and I don&#39;t know how I can do that. I&#39;ve tried it along with the colorAdjust class but its giving me a different color on the tshirt than the one I&#39;ve chosen from the ColorPicker. \r\n\r\nI am using SceneBuilder, btw.\r\n\r\n\r\nGUI\r\n\r\n[![GUI][1]][1]\r\n\r\nT-shirt\r\n\r\n[![T-shirt][2]][2]\r\n\r\n    @FXML\r\n    private void changecolor(ActionEvent event) {      \r\n        Color mycolor=mycolorpicker.getValue();\r\n        label.setBackground(new Background(new BackgroundFill(mycolor,null,null)));\r\n        Image img=new Image(getClass().getResourceAsStream(&quot;tshirt7.PNG&quot;));\r\n        imageV.setImage(img);\r\n        ColorAdjust colorAdjust = new ColorAdjust();\r\n        colorAdjust.setHue((mycolor.getHue()/360));\r\n        colorAdjust.setSaturation(mycolor.getSaturation());\r\n        colorAdjust.setBrightness(mycolor.getBrightness()-1);\r\n       \r\n        imageV.setEffect(colorAdjust);\r\n    }\r\n\r\nI was expecting the same color on the image as the one I&#39;ve chosen from ColorPicker. But the color on the tshirt is not accurate.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/yUNnY.png\r\n  [2]: https://i.stack.imgur.com/UaZEl.png","title":"Use of ColorPicker on an image in JavaFX","body":"<p>I have an image in the imageview. What I want to do is add color to it. Basically it's like a layer of color on the image. So I am trying to add color to a t-shirt image using the ColorPicker and I don't know how I can do that. I've tried it along with the colorAdjust class but its giving me a different color on the tshirt than the one I've chosen from the ColorPicker.</p>\n<p>I am using SceneBuilder, btw.</p>\n<p>GUI</p>\n<p><a href=\"https://i.stack.imgur.com/yUNnY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yUNnY.png\" alt=\"GUI\" /></a></p>\n<p>T-shirt</p>\n<p><a href=\"https://i.stack.imgur.com/UaZEl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UaZEl.png\" alt=\"T-shirt\" /></a></p>\n<pre><code>@FXML\nprivate void changecolor(ActionEvent event) {      \n    Color mycolor=mycolorpicker.getValue();\n    label.setBackground(new Background(new BackgroundFill(mycolor,null,null)));\n    Image img=new Image(getClass().getResourceAsStream(&quot;tshirt7.PNG&quot;));\n    imageV.setImage(img);\n    ColorAdjust colorAdjust = new ColorAdjust();\n    colorAdjust.setHue((mycolor.getHue()/360));\n    colorAdjust.setSaturation(mycolor.getSaturation());\n    colorAdjust.setBrightness(mycolor.getBrightness()-1);\n   \n    imageV.setEffect(colorAdjust);\n}\n</code></pre>\n<p>I was expecting the same color on the image as the one I've chosen from ColorPicker. But the color on the tshirt is not accurate.</p>\n"},{"tags":["java","neovim","nvim-lspconfig"],"owner":{"account_id":27014594,"reputation":23,"user_id":20573680,"display_name":"negbi2"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":119,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1688689168,"creation_date":1688689168,"question_id":76633222,"body_markdown":"I have set up neovim to have all of the features that I want from intelij and none of the ones I don&#39;t, or at least I thought so until a couple days ago I realized that when I reference a static variable from another file the lsp freaks out and it won&#39;t complete it for me.\r\nThis means that I have to manually import the variables which is kinda annoying.\r\n\r\n\r\nI know this comes off as a rant more than a question, but I really don&#39;t mean it that way.\r\n\r\nany help is appreciated and if none is given I understand\r\n\r\nI use jdtls as my lsp client","title":"Is there a way to automagically import static variables like when importing objects in neovim with jdtls and nvim-cmp","body":"<p>I have set up neovim to have all of the features that I want from intelij and none of the ones I don't, or at least I thought so until a couple days ago I realized that when I reference a static variable from another file the lsp freaks out and it won't complete it for me.\nThis means that I have to manually import the variables which is kinda annoying.</p>\n<p>I know this comes off as a rant more than a question, but I really don't mean it that way.</p>\n<p>any help is appreciated and if none is given I understand</p>\n<p>I use jdtls as my lsp client</p>\n"},{"tags":["java","itext","flying-saucer"],"comments":[{"owner":{"account_id":2674923,"reputation":9479,"user_id":2311528,"accept_rate":59,"display_name":"Lonzak"},"score":0,"creation_date":1684132153,"post_id":76245031,"comment_id":134466100,"body_markdown":"Security concern of what library exactly? Or security concern in general?","body":"Security concern of what library exactly? Or security concern in general?"},{"owner":{"account_id":2882066,"reputation":336,"user_id":2472716,"display_name":"Saurabh"},"score":0,"creation_date":1684260090,"post_id":76245031,"comment_id":134491413,"body_markdown":"I apologize. There was no security concern. Our deployment/app security team is pushing for that update. I have tried multiple things but have had no luck rendering the pdf image.","body":"I apologize. There was no security concern. Our deployment/app security team is pushing for that update. I have tried multiple things but have had no luck rendering the pdf image."},{"owner":{"account_id":2674923,"reputation":9479,"user_id":2311528,"accept_rate":59,"display_name":"Lonzak"},"score":0,"creation_date":1684305023,"post_id":76245031,"comment_id":134496884,"body_markdown":"Version 9.1.22 is still using an old version of openPDF. Try to exclude this version and use the latest one. `&lt;exclusion&gt;\n    &lt;groupId&gt;com.github.librepdf&lt;/groupId&gt;\n    &lt;artifactId&gt;openpdf&lt;/artifactId&gt;    &lt;/exclusion&gt;` and then import the latest one\n`&lt;dependency&gt;\n    &lt;groupId&gt;com.github.librepdf&lt;/groupId&gt;\n    &lt;artifactId&gt;openpdf&lt;/artifactId&gt;\n    &lt;version&gt;1.3.30&lt;/version&gt;\n&lt;/dependency&gt;` And then try again...","body":"Version 9.1.22 is still using an old version of openPDF. Try to exclude this version and use the latest one. <code>&lt;exclusion&gt;     &lt;groupId&gt;com.github.librepdf&lt;&#47;groupId&gt;     &lt;artifactId&gt;openpdf&lt;&#47;artifactId&gt;    &lt;&#47;exclusion&gt;</code> and then import the latest one <code>&lt;dependency&gt;     &lt;groupId&gt;com.github.librepdf&lt;&#47;groupId&gt;     &lt;artifactId&gt;openpdf&lt;&#47;artifactId&gt;     &lt;version&gt;1.3.30&lt;&#47;version&gt; &lt;&#47;dependency&gt;</code> And then try again..."},{"owner":{"account_id":2882066,"reputation":336,"user_id":2472716,"display_name":"Saurabh"},"score":0,"creation_date":1684338321,"post_id":76245031,"comment_id":134504668,"body_markdown":"@Lonzak, I updated my pom.xml on my thread based on your suggestion. Does that look correct?","body":"@Lonzak, I updated my pom.xml on my thread based on your suggestion. Does that look correct?"},{"owner":{"account_id":2674923,"reputation":9479,"user_id":2311528,"accept_rate":59,"display_name":"Lonzak"},"score":0,"creation_date":1684734455,"post_id":76245031,"comment_id":134554343,"body_markdown":"Yes it looks correct. To be really sure check you final build for those dependencies: There should be only version 1.3.30 in there but not version 1.3.11. When that&#39;s the case then try again...","body":"Yes it looks correct. To be really sure check you final build for those dependencies: There should be only version 1.3.30 in there but not version 1.3.11. When that&#39;s the case then try again..."},{"owner":{"account_id":2882066,"reputation":336,"user_id":2472716,"display_name":"Saurabh"},"score":0,"creation_date":1688688351,"post_id":76245031,"comment_id":135111122,"body_markdown":"Font &#39;STSong-Light,BoldItalic&#39; with &#39;UniGB-UCS2-H&#39; is not recognized. I started receiving this error now. I&#39;ve added the error trace to my original message @lonzak","body":"Font &#39;STSong-Light,BoldItalic&#39; with &#39;UniGB-UCS2-H&#39; is not recognized. I started receiving this error now. I&#39;ve added the error trace to my original message @lonzak"},{"owner":{"account_id":2674923,"reputation":9479,"user_id":2311528,"accept_rate":59,"display_name":"Lonzak"},"score":0,"creation_date":1690269717,"post_id":76245031,"comment_id":135325806,"body_markdown":"You have to install the missing font. Check out this [post](https://stackoverflow.com/questions/73382606/pdfbox-how-to-solve-font-stsong-light-problem-when-converting-pdf-to-image)","body":"You have to install the missing font. Check out this <a href=\"https://stackoverflow.com/questions/73382606/pdfbox-how-to-solve-font-stsong-light-problem-when-converting-pdf-to-image\">post</a>"}],"owner":{"account_id":2882066,"reputation":336,"user_id":2472716,"display_name":"Saurabh"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":278,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1688688533,"creation_date":1684014786,"question_id":76245031,"body_markdown":"We recently upgraded flying-saucer-itext from 9.1.15 to 9.15.22, and the images are no longer rendering. We are using Docusign 3.23 SDK to fetch the signature images and try to render those in our app.\r\n\r\nThis is some part of the code.\r\n\r\npom.xml is\r\n\r\n```.xml\r\n&lt;dependency&gt;\r\n      &lt;groupId&gt;org.xhtmlrenderer&lt;/groupId&gt;\r\n      &lt;artifactId&gt;flying-saucer-pdf-itext5&lt;/artifactId&gt;\r\n      &lt;version&gt;9.1.22&lt;/version&gt;\r\n      &lt;exclusions&gt;\r\n        &lt;exclusion&gt;\r\n          &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\r\n          &lt;artifactId&gt;bcprov-jdk14&lt;/artifactId&gt;\r\n        &lt;/exclusion&gt;\r\n        &lt;exclusion&gt;\r\n          &lt;groupId&gt;com.github.librepdf&lt;/groupId&gt;\r\n          &lt;artifactId&gt;openpdf&lt;/artifactId&gt;\r\n        &lt;/exclusion&gt;\r\n      &lt;/exclusions&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;     \r\n      &lt;groupId&gt;com.github.librepdf&lt;/groupId&gt;     \r\n      &lt;artifactId&gt;openpdf&lt;/artifactId&gt;     \r\n      &lt;version&gt;1.3.30&lt;/version&gt; \r\n&lt;/dependency&gt;\r\n.\r\n.\r\n.\r\n &lt;docusign.sdk.version&gt;3.23.0&lt;/docusign.sdk.version&gt;\r\n\r\n```\r\nThe code logic is (truncated for privacy concerns)\r\n\r\n```.java\r\nimport org.stringtemplate.v4.DateRenderer;\r\nimport org.stringtemplate.v4.ST;\r\nimport org.stringtemplate.v4.STRawGroupDir;\r\nimport org.stringtemplate.v4.StringRenderer;\r\nimport org.xhtmlrenderer.pdf.ITextRenderer;\r\n.\r\n.\r\n.\r\nsignatureImageStringEncoded = Base64.getEncoder().encodeToString(signatureImage);\r\n.\r\n.\r\n```\r\n\r\nand rendering this in a .st (String template ST4) file \r\n\r\n```.html\r\n &lt;img src=&quot;data:image/gif;base64, signatureImageStringEncoded&quot; alt=&quot;Signature&quot; width=&quot;200&quot; height=&quot;75&quot;/&gt;\r\n```\r\n\r\nI went back to the 9.1.15 package, and it is rendering the image as expected, but our deployment team is pushing to update it to 9.1.22.\r\n\r\nI tried referring [to this page](https://stackoverflow.com/questions/11477065/using-flying-saucer-to-render-images-to-pdf-in-memory) but no luck.\r\n\r\n\r\n**Update on 7/6/2023.**\r\nI&#39;m encountering an error in the section of the code that handles creating PDF files.\r\n```\r\nError:  \r\njava.lang.RuntimeException: Font &#39;STSong-Light,BoldItalic&#39; with &#39;UniGB-UCS2-H&#39; is not recognized.\r\n\tat org.xhtmlrenderer.pdf.ITextFontResolver.createInitialFontMap(ITextFontResolver.java:469)\r\n\tat org.xhtmlrenderer.pdf.ITextFontResolver.&lt;init&gt;(ITextFontResolver.java:40)\r\n\tat org.xhtmlrenderer.pdf.ITextRenderer.&lt;init&gt;(ITextRenderer.java:117)\r\n\tat org.xhtmlrenderer.pdf.ITextRenderer.&lt;init&gt;(ITextRenderer.java:102)\r\n\tat com.oncor.corp.pete.api.services.pdf.PDFService.createPDFFromTemplate(PDFService.java:49)\r\n```","title":"flying saucer itext 9.1.22 not rendering image in the pdf","body":"<p>We recently upgraded flying-saucer-itext from 9.1.15 to 9.15.22, and the images are no longer rendering. We are using Docusign 3.23 SDK to fetch the signature images and try to render those in our app.</p>\n<p>This is some part of the code.</p>\n<p>pom.xml is</p>\n<pre><code>&lt;dependency&gt;\n      &lt;groupId&gt;org.xhtmlrenderer&lt;/groupId&gt;\n      &lt;artifactId&gt;flying-saucer-pdf-itext5&lt;/artifactId&gt;\n      &lt;version&gt;9.1.22&lt;/version&gt;\n      &lt;exclusions&gt;\n        &lt;exclusion&gt;\n          &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\n          &lt;artifactId&gt;bcprov-jdk14&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n        &lt;exclusion&gt;\n          &lt;groupId&gt;com.github.librepdf&lt;/groupId&gt;\n          &lt;artifactId&gt;openpdf&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n      &lt;/exclusions&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;     \n      &lt;groupId&gt;com.github.librepdf&lt;/groupId&gt;     \n      &lt;artifactId&gt;openpdf&lt;/artifactId&gt;     \n      &lt;version&gt;1.3.30&lt;/version&gt; \n&lt;/dependency&gt;\n.\n.\n.\n &lt;docusign.sdk.version&gt;3.23.0&lt;/docusign.sdk.version&gt;\n\n</code></pre>\n<p>The code logic is (truncated for privacy concerns)</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.stringtemplate.v4.DateRenderer;\nimport org.stringtemplate.v4.ST;\nimport org.stringtemplate.v4.STRawGroupDir;\nimport org.stringtemplate.v4.StringRenderer;\nimport org.xhtmlrenderer.pdf.ITextRenderer;\n.\n.\n.\nsignatureImageStringEncoded = Base64.getEncoder().encodeToString(signatureImage);\n.\n.\n</code></pre>\n<p>and rendering this in a .st (String template ST4) file</p>\n<pre><code> &lt;img src=&quot;data:image/gif;base64, signatureImageStringEncoded&quot; alt=&quot;Signature&quot; width=&quot;200&quot; height=&quot;75&quot;/&gt;\n</code></pre>\n<p>I went back to the 9.1.15 package, and it is rendering the image as expected, but our deployment team is pushing to update it to 9.1.22.</p>\n<p>I tried referring <a href=\"https://stackoverflow.com/questions/11477065/using-flying-saucer-to-render-images-to-pdf-in-memory\">to this page</a> but no luck.</p>\n<p><strong>Update on 7/6/2023.</strong>\nI'm encountering an error in the section of the code that handles creating PDF files.</p>\n<pre><code>Error:  \njava.lang.RuntimeException: Font 'STSong-Light,BoldItalic' with 'UniGB-UCS2-H' is not recognized.\n    at org.xhtmlrenderer.pdf.ITextFontResolver.createInitialFontMap(ITextFontResolver.java:469)\n    at org.xhtmlrenderer.pdf.ITextFontResolver.&lt;init&gt;(ITextFontResolver.java:40)\n    at org.xhtmlrenderer.pdf.ITextRenderer.&lt;init&gt;(ITextRenderer.java:117)\n    at org.xhtmlrenderer.pdf.ITextRenderer.&lt;init&gt;(ITextRenderer.java:102)\n    at com.oncor.corp.pete.api.services.pdf.PDFService.createPDFFromTemplate(PDFService.java:49)\n</code></pre>\n"},{"tags":["java","docker","liquibase","java-17"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1688687845,"post_id":76633133,"comment_id":135111081,"body_markdown":"Which version of liquibase are you using?","body":"Which version of liquibase are you using?"},{"owner":{"account_id":28901348,"reputation":1,"user_id":22136226,"display_name":"hhss"},"score":0,"creation_date":1688688025,"post_id":76633133,"comment_id":135111102,"body_markdown":"@tgdavies version 4.3.5","body":"@tgdavies version 4.3.5"}],"owner":{"account_id":28901348,"reputation":1,"user_id":22136226,"display_name":"hhss"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":133,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1688687088,"creation_date":1688687088,"question_id":76633133,"body_markdown":"I am encountering an error while running Liquibase with the following message: &quot;Cannot find parser that supports db-upgrade/liquibase/auth-server/db.changelog-master.yaml&quot;. This happened after I changed my base image from java8 to java17.\r\nerror:\r\n\r\n```\r\n[2023-07-06T20:58:47.482Z] Unexpected error running Liquibase: Cannot find parser that supports db-upgrade/liquibase/auth-server/db.changelog-master.yaml\r\n\r\n[2023-07-06T20:58:47.482Z] For more information, please use the --logLevel flag\r\n\r\n[2023-07-06T20:58:47.482Z] [2023-07-06 20:58:47] SEVERE [liquibase.integration] Unexpected error running Liquibase: Cannot find parser that supports db-upgrade/liquibase/auth-server/db.changelog-master.yaml\r\n\r\n[2023-07-06T20:58:47.482Z] liquibase.exception.UnknownChangelogFormatException: Cannot find parser that supports db-upgrade/liquibase/auth-server/db.changelog-master.yaml\r\n```\r\n\r\n\r\n```\r\n# args:\r\n#   change_log_file [required]\r\n#   extra args (eg. JVM args) [optional]\r\nfunction liquibase {\r\n    java \\\r\n        -Dliquibase.scan.packages=${LIQUIBASE_PACKAGES_SCAN} \\\r\n        $2 \\\r\n        -jar ${LIQUIBASE_JAR} \\\r\n        --url=${URL} \\\r\n        --username=${USERNAME} \\\r\n        --password=${PASSWORD} \\\r\n        --driver=${DRIVER} \\\r\n        --classpath=${DRIVER_JAR}:${LIQUIBASE_SESSION_LOCK_JAR} \\\r\n        --changeLogFile=$1 \\\r\n        --logLevel=${LOG_LEVEL} \\\r\n        update\r\n    return $?\r\n}\r\n```\r\n\r\n```\r\n  echo &quot;INFO: Running the auth-server specific upgrade...&quot;\r\n    liquibase &quot;db-upgrade/liquibase/auth-server/db.changelog-master.yaml&quot;\r\n    AUTH_SERVER_STATUS=$?\r\n    if [[ &quot;${AUTH_SERVER_STATUS}&quot; == 0 ]]; then\r\n        echo &quot;INFO: Finished running the auth-server specific upgrade.&quot;\r\n    else\r\n        echo &quot;ERROR: Running the auth-server liquibase scripts failed, see above for details; exiting&quot;\r\n        exit 4\r\n```\r\n\r\nAnother changelog can run successfully, but it is a `.xml` file\r\n` liquibase &quot;db-upgrade/liquibase/portal-data/portaldb-changelogs/portaldb-master-changelog.xml&quot; &quot;-Dapim_tenant_id=${TSSG_TENANT_ID}&quot;\r\n    PORTAL_DATA_STATUS=$?`\r\n\r\n\r\n\r\nfix the liquibase.exception.UnknownChangelogFormatException","title":"liquibase.exception.UnknownChangelogFormatException: Cannot find parser that supports","body":"<p>I am encountering an error while running Liquibase with the following message: &quot;Cannot find parser that supports db-upgrade/liquibase/auth-server/db.changelog-master.yaml&quot;. This happened after I changed my base image from java8 to java17.\nerror:</p>\n<pre><code>[2023-07-06T20:58:47.482Z] Unexpected error running Liquibase: Cannot find parser that supports db-upgrade/liquibase/auth-server/db.changelog-master.yaml\n\n[2023-07-06T20:58:47.482Z] For more information, please use the --logLevel flag\n\n[2023-07-06T20:58:47.482Z] [2023-07-06 20:58:47] SEVERE [liquibase.integration] Unexpected error running Liquibase: Cannot find parser that supports db-upgrade/liquibase/auth-server/db.changelog-master.yaml\n\n[2023-07-06T20:58:47.482Z] liquibase.exception.UnknownChangelogFormatException: Cannot find parser that supports db-upgrade/liquibase/auth-server/db.changelog-master.yaml\n</code></pre>\n<pre><code># args:\n#   change_log_file [required]\n#   extra args (eg. JVM args) [optional]\nfunction liquibase {\n    java \\\n        -Dliquibase.scan.packages=${LIQUIBASE_PACKAGES_SCAN} \\\n        $2 \\\n        -jar ${LIQUIBASE_JAR} \\\n        --url=${URL} \\\n        --username=${USERNAME} \\\n        --password=${PASSWORD} \\\n        --driver=${DRIVER} \\\n        --classpath=${DRIVER_JAR}:${LIQUIBASE_SESSION_LOCK_JAR} \\\n        --changeLogFile=$1 \\\n        --logLevel=${LOG_LEVEL} \\\n        update\n    return $?\n}\n</code></pre>\n<pre><code>  echo &quot;INFO: Running the auth-server specific upgrade...&quot;\n    liquibase &quot;db-upgrade/liquibase/auth-server/db.changelog-master.yaml&quot;\n    AUTH_SERVER_STATUS=$?\n    if [[ &quot;${AUTH_SERVER_STATUS}&quot; == 0 ]]; then\n        echo &quot;INFO: Finished running the auth-server specific upgrade.&quot;\n    else\n        echo &quot;ERROR: Running the auth-server liquibase scripts failed, see above for details; exiting&quot;\n        exit 4\n</code></pre>\n<p>Another changelog can run successfully, but it is a <code>.xml</code> file\n<code> liquibase &quot;db-upgrade/liquibase/portal-data/portaldb-changelogs/portaldb-master-changelog.xml&quot; &quot;-Dapim_tenant_id=${TSSG_TENANT_ID}&quot; PORTAL_DATA_STATUS=$?</code></p>\n<p>fix the liquibase.exception.UnknownChangelogFormatException</p>\n"},{"tags":["java","image","javafx","garbage-collection","render"],"comments":[{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":3,"creation_date":1688662877,"post_id":76629736,"comment_id":135107422,"body_markdown":"Do not busy wait on the JavaFX application thread. Load images in the background and notify observers when ready.","body":"Do not busy wait on the JavaFX application thread. Load images in the background and notify observers when ready."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1688666652,"post_id":76629736,"comment_id":135107994,"body_markdown":"@trashgod how would you do that?  The [Image constructors](https://openjfx.io/javadoc/17/javafx.graphics/javafx/scene/image/Image.html#%3Cinit%3E(java.io.InputStream)) that take an InputStream as a parameter, don&#39;t have a backgroundLoading option.","body":"@trashgod how would you do that?  The <a href=\"https://openjfx.io/javadoc/17/javafx.graphics/javafx/scene/image/Image.html#%3Cinit%3E(java.io.InputStream)\" rel=\"nofollow noreferrer\">Image constructors</a> that take an InputStream as a parameter, don&#39;t have a backgroundLoading option."},{"owner":{"account_id":22184938,"reputation":11,"user_id":16428000,"display_name":"Finn"},"score":0,"creation_date":1688673827,"post_id":76629736,"comment_id":135109324,"body_markdown":"@trashgod can you give me a example code, im using javafx 8 and there is no backgroundloading option","body":"@trashgod can you give me a example code, im using javafx 8 and there is no backgroundloading option"},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":1,"creation_date":1688679216,"post_id":76629736,"comment_id":135110186,"body_markdown":"Depending on the use, I&#39;d look at [`Task`](https://stackoverflow.com/search?q=%5Bjavafx%5D+Image+Task) or [`Service`](https://stackoverflow.com/search?q=%5Bjavafx%5D+Image+Service) for `Image`.","body":"Depending on the use, I&#39;d look at <a href=\"https://stackoverflow.com/search?q=%5Bjavafx%5D+Image+Task\"><code>Task</code></a> or <a href=\"https://stackoverflow.com/search?q=%5Bjavafx%5D+Image+Service\"><code>Service</code></a> for <code>Image</code>."}],"answers":[{"comments":[{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1688729363,"post_id":76632784,"comment_id":135116316,"body_markdown":"That is why you need to better explain your question when you initially ask it.  You will only get relevant and specific answers to a specific, well-explained question (usually with an [mcve]).  If you want to improve the question, don&#39;t write comments, instead edit the question, or ask a follow up question (of higher quality).  What you wrote in your comment, could have been written when you asked the question and example code replicating the issue could have been provided.  I will not change or enhance this answer to this question based on additional information.","body":"That is why you need to better explain your question when you initially ask it.  You will only get relevant and specific answers to a specific, well-explained question (usually with an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>).  If you want to improve the question, don&#39;t write comments, instead edit the question, or ask a follow up question (of higher quality).  What you wrote in your comment, could have been written when you asked the question and example code replicating the issue could have been provided.  I will not change or enhance this answer to this question based on additional information."}],"tags":[],"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1688685736,"creation_date":1688681204,"answer_id":76632784,"question_id":76629736,"body_markdown":"I don&#39;t have a way to reproduce your exact issue, and the info in this answer may not solve your issue, but perhaps it will help.\r\n\r\n**General Advice**\r\n\r\nWhat you don&#39;t want to do is write some busy loop that:\r\n\r\n * consumes the JavaFX thread and freezes the application. \r\n * rapidly gobbles up huge amounts of resource memory without allowing the memory management system to appropriately free up stale memory.\r\n * floods the JavaFX runLater queue with more runnables than the system can reasonably process.\r\n * corrupts memory by accessing it on multiple threads.\r\n\r\nIf you were repetitively loading the same images, you would want to cache the loaded images [(there is an example cache implementation in this answer)][1], so you don&#39;t need to load them again.  You also want to appropriately size the images in the image constructor if you don&#39;t need the full image resolution in your rendered images.\r\n\r\nAs advised by Trashgod in the comments, it is usually a good idea to load Images in the background.\r\n\r\nIf loading from a URL, you can [load (and size) images in the background via the appropriate image constructor][2].  You don&#39;t need to multithread with a task or service if you do that.  You can [listen to the progress property][3] to see how the loading is progressing if you need to know that.  \r\n\r\nYou can [periodically][4] load new images using a Timeline or PauseTransition, loading them in the background to ensure that the main JavaFX thread is not impacted.\r\n\r\n**Example**\r\n\r\nThis example uses a Task and ScheduledService to load images periodically in a background thread.\r\n\r\nThis is a Task that loads an image from a byte array in the background.\r\n\r\nThis is only provided because you are not loading from a URL, but from a ByteArrayInputStream for which there is no background loading constructor in the JavaFX 20 Image API.\r\n\r\n    import javafx.concurrent.Task;\r\n    import javafx.scene.image.Image;\r\n    \r\n    import java.io.ByteArrayInputStream;\r\n    \r\n    class ImageLoadingTask extends Task&lt;Image&gt; {\r\n        private final byte[] imageBytes;\r\n    \r\n        public ImageLoadingTask(byte[] imageBytes) {\r\n            this.imageBytes = imageBytes;\r\n        }\r\n    \r\n        @Override\r\n        protected Image call() throws Exception {\r\n            Image image = new Image(\r\n                    new ByteArrayInputStream(\r\n                            imageBytes\r\n                    )\r\n            );\r\n    \r\n            if (image.isError()) {\r\n                throw image.getException();\r\n            }\r\n    \r\n            return image;\r\n        }\r\n    }\r\n\r\nYou say you are loading the images in a loop.  I&#39;m not exactly sure why you use a loop.  But I guess you are trying to load images periodically.  To do that, for the task defined above, you can use a ScheduledService.\r\n\r\nI am not sure where and how you get the bytes for your images.  So for this example, I just pass in all of the image bytes in a preloaded List for simplicity.  For an actual application implementation with a dynamic source of images, you wouldn&#39;t want to do that.\r\n\r\n    import javafx.beans.property.ObjectProperty;\r\n    import javafx.beans.property.SimpleObjectProperty;\r\n    import javafx.concurrent.ScheduledService;\r\n    import javafx.concurrent.Task;\r\n    import javafx.scene.image.Image;\r\n    import javafx.scene.image.ImageView;\r\n    import javafx.util.Duration;\r\n    \r\n    import java.util.List;\r\n    \r\n    class ImageLoadingService extends ScheduledService&lt;Image&gt; {\r\n        private static final Duration SHOW_IMAGE_PERIOD = Duration.seconds(2);\r\n        private final List&lt;byte[]&gt; imageByteList;\r\n        private int nextImageIdx = 0;\r\n    \r\n        public ImageLoadingService(\r\n                ImageView imageView,\r\n                List&lt;byte[]&gt; imageByteList\r\n        ) {\r\n            this.imageByteList = imageByteList;\r\n    \r\n            setPeriod(SHOW_IMAGE_PERIOD);\r\n            setRestartOnFailure(false);\r\n    \r\n            configureToLoadNextImage();\r\n    \r\n            valueProperty().addListener((observable, oldValue, newValue) -&gt; {\r\n                if (newValue != null &amp;&amp; !newValue.isError()) {\r\n                    imageView.setImage(\r\n                            getValue()\r\n                    );\r\n    \r\n                    configureToLoadNextImage();\r\n                }\r\n            });\r\n    \r\n            exceptionProperty().addListener((observable, oldException, imageLoadingException) -&gt; {\r\n                if (imageLoadingException != null) {\r\n                    imageLoadingException.printStackTrace();\r\n                }\r\n            });\r\n        }\r\n    \r\n        private final ObjectProperty&lt;byte[]&gt; imageBytes = new SimpleObjectProperty&lt;&gt;(\r\n                this,\r\n                &quot;imageBytes&quot;\r\n        );\r\n    \r\n        public final void setImageBytes(byte[] value) {\r\n            imageBytes.set(value);\r\n        }\r\n    \r\n        public final byte[] getImageBytes() {\r\n            return imageBytes.get();\r\n        }\r\n    \r\n        public final ObjectProperty&lt;byte[]&gt; imageBytesProperty() {\r\n            return imageBytes;\r\n        }\r\n    \r\n        @Override\r\n        protected Task&lt;Image&gt; createTask() {\r\n            return new ImageLoadingTask(\r\n                    getImageBytes()\r\n            );\r\n        }\r\n    \r\n        private void configureToLoadNextImage() {\r\n            setImageBytes(imageByteList.get(nextImageIdx));\r\n            nextImageIdx = (nextImageIdx + 1) % imageByteList.size();\r\n        }\r\n    }\r\n\r\nSample app which demonstrates the use of the service and task.  It will periodically load images in the background from byte arrays and display them in an ImageView, to create a slideshow.\r\n\r\n    import javafx.application.Application;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.image.ImageView;\r\n    import javafx.scene.layout.StackPane;\r\n    import javafx.stage.Stage;\r\n    \r\n    import java.io.IOException;\r\n    import java.util.List;\r\n    \r\n    public class BackgroundImageLoader extends Application {\r\n        private static final int IMAGE_SIZE = 96;\r\n        private final List&lt;byte[]&gt; monsterImages = MonsterImageCreator.createMonsterImageBytes();\r\n    \r\n        @Override\r\n        public void start(Stage stage) throws IOException {\r\n            ImageView imageView = new ImageView();\r\n    \r\n            ImageLoadingService imageLoadingService = new ImageLoadingService(\r\n                    imageView,\r\n                    monsterImages\r\n            );\r\n            imageLoadingService.start();\r\n    \r\n            StackPane layout = new StackPane(imageView);\r\n            layout.setPrefSize(IMAGE_SIZE, IMAGE_SIZE);\r\n    \r\n            stage.setScene(new Scene(layout));\r\n            stage.show();\r\n        }\r\n    }\r\n\r\nUtility class to create some test data from image resources.\r\n\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import java.util.Objects;\r\n    \r\n    class MonsterImageCreator {\r\n        private enum Monster {\r\n            Medusa,\r\n            Dragon,\r\n            Treant,\r\n            Unicorn\r\n        }\r\n    \r\n        public static List&lt;byte[]&gt; createMonsterImageBytes() {\r\n            List&lt;byte[]&gt; imageBytes = new ArrayList&lt;&gt;(\r\n                    Monster.values().length\r\n            );\r\n    \r\n            for (Monster monster : Monster.values()) {\r\n                try (InputStream inputStream = Objects.requireNonNull(\r\n                        MonsterImageCreator.class.getResource(\r\n                                monster + &quot;-icon.png&quot;\r\n                        )\r\n                ).openStream()) {\r\n                    byte[] bytes = inputStream.readAllBytes();\r\n    \r\n                    imageBytes.add(\r\n                            bytes\r\n                    );\r\n                } catch (IOException e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n            }\r\n    \r\n            return imageBytes;\r\n        }\r\n    }\r\n\r\nThe images used here are provided in this answer:\r\n\r\n * https://stackoverflow.com/questions/72050368/javafx-combobox-with-custom-cell-factory-buggy-rendering/72050915#72050915\r\n\r\nThe images should be placed in a resource directory matching the package you place the MonsterImageCreator in.\r\n\r\n**Some additional points**\r\n\r\n&gt; I have even increased the memory\r\n\r\nYou can&#39;t really do that.  The Direct3D textures are native resources of the 3D graphic system used by your JavaFX implementation, you won&#39;t have any control over how the memory is used.  The memory used can be texture memory in the graphic card video ram, not memory associated with the Java heap.\r\n\r\nWhat you are doing is blowing up that video memory space in some way.  How I don&#39;t know.  \r\n\r\n - One way to do it is to load textures that exceed the max size allowed by the graphic device (typically something 4K x 4K pixels or 8K x 8K pixels).\r\n - Another way to do it is to load lots of textures into memory that exceeds the total texture memory of the graphics card (which will vary by graphics card, but is typically multiple gigabytes of compressed texture memory space).\r\n - You can also cause corruption of the texture memory space by incorrectly threaded code causing [race conditions][5].\r\n - Maybe you are running a busy loop that just loads massive amounts of textures into the system without giving the JavaFX texture manager time to appropriately release obsolete textures.\r\n\r\n&gt; What could be causing the growing pool\r\n\r\nAllocating new graphics textures is a frequent operation in a UI application. It is normal that the texture memory pool would change in size dynamically.  Textures are used widely, not just for your images, but also for the rendering engine (both in 2D and 3D mode).  \r\n\r\nGenerally, you don&#39;t really have to worry about the management of texture memory resources as the JavaFX implementation will take care of that work for you, in a similar way that you don&#39;t need to worry much about memory management in a Java application.  \r\n\r\nThe only things you really need to worry about are the standard things that you have to consider in managing memory resources in Java.  Those are things like:\r\n \r\n * Ensuring you don&#39;t have multiple threads corrupt memory.\r\n * Not creating very large objects which will exceed the available memory size.\r\n * Not holding onto object references you no longer need, so that the garbage collector (or JavaFX&#39;s internal manager of texture memory resources) can free those resources as it wishes.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/72821525/adding-an-image-into-a-javafx-tableview-column/72822740#72822740\r\n  [2]: https://openjfx.io/javadoc/17/javafx.graphics/javafx/scene/image/Image.html#%3Cinit%3E(java.lang.String,double,double,boolean,boolean,boolean)\r\n  [3]: https://openjfx.io/javadoc/17/javafx.graphics/javafx/scene/image/Image.html#progressProperty()\r\n  [4]: https://stackoverflow.com/a/60685975/1155209\r\n  [5]: https://en.wikipedia.org/wiki/Race_condition","title":"JavaFX exception on setImage in a loop problem","body":"<p>I don't have a way to reproduce your exact issue, and the info in this answer may not solve your issue, but perhaps it will help.</p>\n<p><strong>General Advice</strong></p>\n<p>What you don't want to do is write some busy loop that:</p>\n<ul>\n<li>consumes the JavaFX thread and freezes the application.</li>\n<li>rapidly gobbles up huge amounts of resource memory without allowing the memory management system to appropriately free up stale memory.</li>\n<li>floods the JavaFX runLater queue with more runnables than the system can reasonably process.</li>\n<li>corrupts memory by accessing it on multiple threads.</li>\n</ul>\n<p>If you were repetitively loading the same images, you would want to cache the loaded images <a href=\"https://stackoverflow.com/questions/72821525/adding-an-image-into-a-javafx-tableview-column/72822740#72822740\">(there is an example cache implementation in this answer)</a>, so you don't need to load them again.  You also want to appropriately size the images in the image constructor if you don't need the full image resolution in your rendered images.</p>\n<p>As advised by Trashgod in the comments, it is usually a good idea to load Images in the background.</p>\n<p>If loading from a URL, you can <a href=\"https://openjfx.io/javadoc/17/javafx.graphics/javafx/scene/image/Image.html#%3Cinit%3E(java.lang.String,double,double,boolean,boolean,boolean)\" rel=\"nofollow noreferrer\">load (and size) images in the background via the appropriate image constructor</a>.  You don't need to multithread with a task or service if you do that.  You can <a href=\"https://openjfx.io/javadoc/17/javafx.graphics/javafx/scene/image/Image.html#progressProperty()\" rel=\"nofollow noreferrer\">listen to the progress property</a> to see how the loading is progressing if you need to know that.</p>\n<p>You can <a href=\"https://stackoverflow.com/a/60685975/1155209\">periodically</a> load new images using a Timeline or PauseTransition, loading them in the background to ensure that the main JavaFX thread is not impacted.</p>\n<p><strong>Example</strong></p>\n<p>This example uses a Task and ScheduledService to load images periodically in a background thread.</p>\n<p>This is a Task that loads an image from a byte array in the background.</p>\n<p>This is only provided because you are not loading from a URL, but from a ByteArrayInputStream for which there is no background loading constructor in the JavaFX 20 Image API.</p>\n<pre><code>import javafx.concurrent.Task;\nimport javafx.scene.image.Image;\n\nimport java.io.ByteArrayInputStream;\n\nclass ImageLoadingTask extends Task&lt;Image&gt; {\n    private final byte[] imageBytes;\n\n    public ImageLoadingTask(byte[] imageBytes) {\n        this.imageBytes = imageBytes;\n    }\n\n    @Override\n    protected Image call() throws Exception {\n        Image image = new Image(\n                new ByteArrayInputStream(\n                        imageBytes\n                )\n        );\n\n        if (image.isError()) {\n            throw image.getException();\n        }\n\n        return image;\n    }\n}\n</code></pre>\n<p>You say you are loading the images in a loop.  I'm not exactly sure why you use a loop.  But I guess you are trying to load images periodically.  To do that, for the task defined above, you can use a ScheduledService.</p>\n<p>I am not sure where and how you get the bytes for your images.  So for this example, I just pass in all of the image bytes in a preloaded List for simplicity.  For an actual application implementation with a dynamic source of images, you wouldn't want to do that.</p>\n<pre><code>import javafx.beans.property.ObjectProperty;\nimport javafx.beans.property.SimpleObjectProperty;\nimport javafx.concurrent.ScheduledService;\nimport javafx.concurrent.Task;\nimport javafx.scene.image.Image;\nimport javafx.scene.image.ImageView;\nimport javafx.util.Duration;\n\nimport java.util.List;\n\nclass ImageLoadingService extends ScheduledService&lt;Image&gt; {\n    private static final Duration SHOW_IMAGE_PERIOD = Duration.seconds(2);\n    private final List&lt;byte[]&gt; imageByteList;\n    private int nextImageIdx = 0;\n\n    public ImageLoadingService(\n            ImageView imageView,\n            List&lt;byte[]&gt; imageByteList\n    ) {\n        this.imageByteList = imageByteList;\n\n        setPeriod(SHOW_IMAGE_PERIOD);\n        setRestartOnFailure(false);\n\n        configureToLoadNextImage();\n\n        valueProperty().addListener((observable, oldValue, newValue) -&gt; {\n            if (newValue != null &amp;&amp; !newValue.isError()) {\n                imageView.setImage(\n                        getValue()\n                );\n\n                configureToLoadNextImage();\n            }\n        });\n\n        exceptionProperty().addListener((observable, oldException, imageLoadingException) -&gt; {\n            if (imageLoadingException != null) {\n                imageLoadingException.printStackTrace();\n            }\n        });\n    }\n\n    private final ObjectProperty&lt;byte[]&gt; imageBytes = new SimpleObjectProperty&lt;&gt;(\n            this,\n            &quot;imageBytes&quot;\n    );\n\n    public final void setImageBytes(byte[] value) {\n        imageBytes.set(value);\n    }\n\n    public final byte[] getImageBytes() {\n        return imageBytes.get();\n    }\n\n    public final ObjectProperty&lt;byte[]&gt; imageBytesProperty() {\n        return imageBytes;\n    }\n\n    @Override\n    protected Task&lt;Image&gt; createTask() {\n        return new ImageLoadingTask(\n                getImageBytes()\n        );\n    }\n\n    private void configureToLoadNextImage() {\n        setImageBytes(imageByteList.get(nextImageIdx));\n        nextImageIdx = (nextImageIdx + 1) % imageByteList.size();\n    }\n}\n</code></pre>\n<p>Sample app which demonstrates the use of the service and task.  It will periodically load images in the background from byte arrays and display them in an ImageView, to create a slideshow.</p>\n<pre><code>import javafx.application.Application;\nimport javafx.scene.Scene;\nimport javafx.scene.image.ImageView;\nimport javafx.scene.layout.StackPane;\nimport javafx.stage.Stage;\n\nimport java.io.IOException;\nimport java.util.List;\n\npublic class BackgroundImageLoader extends Application {\n    private static final int IMAGE_SIZE = 96;\n    private final List&lt;byte[]&gt; monsterImages = MonsterImageCreator.createMonsterImageBytes();\n\n    @Override\n    public void start(Stage stage) throws IOException {\n        ImageView imageView = new ImageView();\n\n        ImageLoadingService imageLoadingService = new ImageLoadingService(\n                imageView,\n                monsterImages\n        );\n        imageLoadingService.start();\n\n        StackPane layout = new StackPane(imageView);\n        layout.setPrefSize(IMAGE_SIZE, IMAGE_SIZE);\n\n        stage.setScene(new Scene(layout));\n        stage.show();\n    }\n}\n</code></pre>\n<p>Utility class to create some test data from image resources.</p>\n<pre><code>import java.io.IOException;\nimport java.io.InputStream;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Objects;\n\nclass MonsterImageCreator {\n    private enum Monster {\n        Medusa,\n        Dragon,\n        Treant,\n        Unicorn\n    }\n\n    public static List&lt;byte[]&gt; createMonsterImageBytes() {\n        List&lt;byte[]&gt; imageBytes = new ArrayList&lt;&gt;(\n                Monster.values().length\n        );\n\n        for (Monster monster : Monster.values()) {\n            try (InputStream inputStream = Objects.requireNonNull(\n                    MonsterImageCreator.class.getResource(\n                            monster + &quot;-icon.png&quot;\n                    )\n            ).openStream()) {\n                byte[] bytes = inputStream.readAllBytes();\n\n                imageBytes.add(\n                        bytes\n                );\n            } catch (IOException e) {\n                throw new RuntimeException(e);\n            }\n        }\n\n        return imageBytes;\n    }\n}\n</code></pre>\n<p>The images used here are provided in this answer:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/72050368/javafx-combobox-with-custom-cell-factory-buggy-rendering/72050915#72050915\">JavaFX: ComboBox with custom cell factory - buggy rendering</a></li>\n</ul>\n<p>The images should be placed in a resource directory matching the package you place the MonsterImageCreator in.</p>\n<p><strong>Some additional points</strong></p>\n<blockquote>\n<p>I have even increased the memory</p>\n</blockquote>\n<p>You can't really do that.  The Direct3D textures are native resources of the 3D graphic system used by your JavaFX implementation, you won't have any control over how the memory is used.  The memory used can be texture memory in the graphic card video ram, not memory associated with the Java heap.</p>\n<p>What you are doing is blowing up that video memory space in some way.  How I don't know.</p>\n<ul>\n<li>One way to do it is to load textures that exceed the max size allowed by the graphic device (typically something 4K x 4K pixels or 8K x 8K pixels).</li>\n<li>Another way to do it is to load lots of textures into memory that exceeds the total texture memory of the graphics card (which will vary by graphics card, but is typically multiple gigabytes of compressed texture memory space).</li>\n<li>You can also cause corruption of the texture memory space by incorrectly threaded code causing <a href=\"https://en.wikipedia.org/wiki/Race_condition\" rel=\"nofollow noreferrer\">race conditions</a>.</li>\n<li>Maybe you are running a busy loop that just loads massive amounts of textures into the system without giving the JavaFX texture manager time to appropriately release obsolete textures.</li>\n</ul>\n<blockquote>\n<p>What could be causing the growing pool</p>\n</blockquote>\n<p>Allocating new graphics textures is a frequent operation in a UI application. It is normal that the texture memory pool would change in size dynamically.  Textures are used widely, not just for your images, but also for the rendering engine (both in 2D and 3D mode).</p>\n<p>Generally, you don't really have to worry about the management of texture memory resources as the JavaFX implementation will take care of that work for you, in a similar way that you don't need to worry much about memory management in a Java application.</p>\n<p>The only things you really need to worry about are the standard things that you have to consider in managing memory resources in Java.  Those are things like:</p>\n<ul>\n<li>Ensuring you don't have multiple threads corrupt memory.</li>\n<li>Not creating very large objects which will exceed the available memory size.</li>\n<li>Not holding onto object references you no longer need, so that the garbage collector (or JavaFX's internal manager of texture memory resources) can free those resources as it wishes.</li>\n</ul>\n"}],"owner":{"account_id":22184938,"reputation":11,"user_id":16428000,"display_name":"Finn"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1688685736,"creation_date":1688652697,"question_id":76629736,"body_markdown":"I have a JavaFX program where I continuously set an image in an ImageView using the setImage(new Image(new ByteArrayInputStream(imageBytes))) method within a loop. This entire process is wrapped in Platform.runLater() to ensure UI thread safety.\r\n\r\nThe issue I&#39;m facing is that when I enable -Dprism.verbose=true, the console continuously prints the message &quot;Growing pool D3D Vram Pool target,&quot; followed by an increasing number. Eventually, it leads to a NullPointerException. Surprisingly, adding System.gc() after the setImage call resolves the issue, and the exceptions stop after a short while.\r\n\r\nI understand that calling System.gc() in a loop is not recommended for performance reasons, and the garbage collector should handle this automatically. However, without this explicit call, the growing pool and exceptions persist.\r\n\r\nI have also tried calling setImage(null) before setting the actual image to inform the garbage collector, but it didn&#39;t make any difference. I have even increased the memory, but the issue remains.\r\n\r\nIs this behavior normal? What could be causing the growing pool and the NullPointerException? Any suggestions on how to resolve this issue without relying on System.gc()?\r\n\r\n\r\n`(This code constantily grows D3D Vram Pool like :\r\nGrowing pool D3D Vram Pool target to 524.167.168\r\nGrowing pool D3D Vram Pool target to 524.167.168\r\nGrowing pool D3D Vram Pool target to 535.226.368..)`\r\n\r\nand after a few seconds im getting:\r\n\r\n`java.lang.NullPointerException\r\n\tat com.sun.prism.d3d.D3DTexture.getContext(D3DTexture.java:84)\r\n\tat com.sun.prism.d3d.D3DTexture.update(D3DTexture.java:207)\r\n\tat com.sun.prism.d3d.D3DTexture.update(D3DTexture.java:151)...`\r\n\r\n\r\n \r\n\r\n       this.packetImage.setImageByteStream(new ImageByteStream() {\r\n                    @Override\r\n                    public void stream(byte[] imageBytes) {\r\n                        Platform.runLater(() -&gt; {\r\n                            imageView.setImage(new Image(new ByteArrayInputStream(imageBytes)));\r\n      System.gc(); //&lt;- fixes the problem\r\n                        });\r\n                    }\r\n                });\r\n\r\n","title":"JavaFX exception on setImage in a loop problem","body":"<p>I have a JavaFX program where I continuously set an image in an ImageView using the setImage(new Image(new ByteArrayInputStream(imageBytes))) method within a loop. This entire process is wrapped in Platform.runLater() to ensure UI thread safety.</p>\n<p>The issue I'm facing is that when I enable -Dprism.verbose=true, the console continuously prints the message &quot;Growing pool D3D Vram Pool target,&quot; followed by an increasing number. Eventually, it leads to a NullPointerException. Surprisingly, adding System.gc() after the setImage call resolves the issue, and the exceptions stop after a short while.</p>\n<p>I understand that calling System.gc() in a loop is not recommended for performance reasons, and the garbage collector should handle this automatically. However, without this explicit call, the growing pool and exceptions persist.</p>\n<p>I have also tried calling setImage(null) before setting the actual image to inform the garbage collector, but it didn't make any difference. I have even increased the memory, but the issue remains.</p>\n<p>Is this behavior normal? What could be causing the growing pool and the NullPointerException? Any suggestions on how to resolve this issue without relying on System.gc()?</p>\n<p><code>(This code constantily grows D3D Vram Pool like : Growing pool D3D Vram Pool target to 524.167.168 Growing pool D3D Vram Pool target to 524.167.168 Growing pool D3D Vram Pool target to 535.226.368..)</code></p>\n<p>and after a few seconds im getting:</p>\n<p><code>java.lang.NullPointerException at com.sun.prism.d3d.D3DTexture.getContext(D3DTexture.java:84) at com.sun.prism.d3d.D3DTexture.update(D3DTexture.java:207) at com.sun.prism.d3d.D3DTexture.update(D3DTexture.java:151)...</code></p>\n<pre><code>   this.packetImage.setImageByteStream(new ImageByteStream() {\n                @Override\n                public void stream(byte[] imageBytes) {\n                    Platform.runLater(() -&gt; {\n                        imageView.setImage(new Image(new ByteArrayInputStream(imageBytes)));\n  System.gc(); //&lt;- fixes the problem\n                    });\n                }\n            });\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-security"],"answers":[{"tags":[],"owner":{"account_id":5485292,"reputation":506,"user_id":4360280,"display_name":"SleepyTonic"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688684972,"creation_date":1688684972,"answer_id":76633018,"question_id":61616638,"body_markdown":"Add a `WebExpressionVoter` into your AccessDecisionManger.\r\n\r\n`.authenticated()`, `.fullyAuthenticated()`, `.anonymous()` all create \r\n WebExpressionConfigAttribute objects.\r\n\r\n`AuthenticatedVoter` (IS_AUTHENTICATED_FULLY attribute) is used in Spring XML security configurations.\r\n\r\nSpring Security: v5.7.8","title":"AuthenticationVoters has not valid attribute. SpringSecurity","body":"<p>Add a <code>WebExpressionVoter</code> into your AccessDecisionManger.</p>\n<p><code>.authenticated()</code>, <code>.fullyAuthenticated()</code>, <code>.anonymous()</code> all create\nWebExpressionConfigAttribute objects.</p>\n<p><code>AuthenticatedVoter</code> (IS_AUTHENTICATED_FULLY attribute) is used in Spring XML security configurations.</p>\n<p>Spring Security: v5.7.8</p>\n"}],"owner":{"account_id":2611171,"reputation":1028,"user_id":2261243,"display_name":"Damien C"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":172,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1688684972,"creation_date":1588691980,"question_id":61616638,"body_markdown":"I work on Spring Boot 2.1. \r\n\r\nI want all my default endpoints allowed\r\n\r\n* either if they&#39;re rightly authenticated\r\n* either if they pass on [specific authentication][1] rules I&#39;ve implemented and named * hashSerialSecurityVoter*.\r\n\r\nMy Code :\r\n\r\n**SecurityConfig.java**\r\n\r\n```\r\nprotected void configure(HttpSecurity http) throws Exception {\r\n  http.csrf()\r\n\t.disable().cors().and().exceptionHandling()\r\n\t/* [...] */\r\n  .anyRequest()\r\n    .authenticated();\r\n    .accessDecisionManager(playerResourceDecisionManager());\r\n}\r\n```\r\n\r\n```\r\n@Bean\r\npublic AccessDecisionManager playerResourceDecisionManager() {\r\n    List&lt;AccessDecisionVoter&lt;? extends Object&gt;&gt; decisionVoters = Arrays.asList(\r\n        new AuthenticatedVoter(),\r\n        hashSerialSecurityVoter\r\n    );\r\n    return new UnanimousBased(decisionVoters);\r\n}\r\n```\r\n\r\nIt goes effectivly through both Voters.   \r\nBut in AuthenticatedVoter, it does not run as I expected.\r\n\r\nEven if I&#39;m authenticated, it returns *ACCESS_ABSTAIN*  value.  \r\n\r\nWhen I debug it, I&#39;ve noticed that Manager does not provide any ConfigAttribute.  \r\nSo ```authenticatedVoter.supports()``` methods returns false..\r\n\r\nDo I miss something on accessDecisionManager declaration ?\r\n\r\nResults is that my main API client does not work anymore because all my requests are returned with 403.\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/61521644/spring-boot-specific-url-accessdecisionvoter","title":"AuthenticationVoters has not valid attribute. SpringSecurity","body":"<p>I work on Spring Boot 2.1. </p>\n\n<p>I want all my default endpoints allowed</p>\n\n<ul>\n<li>either if they're rightly authenticated</li>\n<li>either if they pass on <a href=\"https://stackoverflow.com/questions/61521644/spring-boot-specific-url-accessdecisionvoter\">specific authentication</a> rules I've implemented and named * hashSerialSecurityVoter*.</li>\n</ul>\n\n<p>My Code :</p>\n\n<p><strong>SecurityConfig.java</strong></p>\n\n<pre><code>protected void configure(HttpSecurity http) throws Exception {\n  http.csrf()\n    .disable().cors().and().exceptionHandling()\n    /* [...] */\n  .anyRequest()\n    .authenticated();\n    .accessDecisionManager(playerResourceDecisionManager());\n}\n</code></pre>\n\n<pre><code>@Bean\npublic AccessDecisionManager playerResourceDecisionManager() {\n    List&lt;AccessDecisionVoter&lt;? extends Object&gt;&gt; decisionVoters = Arrays.asList(\n        new AuthenticatedVoter(),\n        hashSerialSecurityVoter\n    );\n    return new UnanimousBased(decisionVoters);\n}\n</code></pre>\n\n<p>It goes effectivly through both Voters.<br>\nBut in AuthenticatedVoter, it does not run as I expected.</p>\n\n<p>Even if I'm authenticated, it returns <em>ACCESS_ABSTAIN</em>  value.  </p>\n\n<p>When I debug it, I've noticed that Manager does not provide any ConfigAttribute.<br>\nSo <code>authenticatedVoter.supports()</code> methods returns false..</p>\n\n<p>Do I miss something on accessDecisionManager declaration ?</p>\n\n<p>Results is that my main API client does not work anymore because all my requests are returned with 403.</p>\n"},{"tags":["java","spring-security","spring-webflux"],"answers":[{"tags":[],"owner":{"account_id":2425257,"reputation":5090,"user_id":2117355,"accept_rate":71,"display_name":"Mark"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688684139,"creation_date":1688684139,"answer_id":76632981,"question_id":76632980,"body_markdown":"Turns out that what&#39;s happening here is that if there is no `Authentication` header passed, then the `serverWebExchange.getPrincipal()` in the web filter is an empty `Mono`.  If that&#39;s the case, the entire block gets skipped, which causes the `HTTP 200` response.\r\n\r\nSolution is to add this at the end:\r\n\r\n```\r\n.switchIfEmpty(Mono.defer(() -&gt; webFilterChain.filter(serverWebExchange)))\r\n```\r\n\r\nso that the rest of the filter chain continues.","title":"Spring Webflux Custom WebFilter Causes HTTP 200 response for all open endpoints","body":"<p>Turns out that what's happening here is that if there is no <code>Authentication</code> header passed, then the <code>serverWebExchange.getPrincipal()</code> in the web filter is an empty <code>Mono</code>.  If that's the case, the entire block gets skipped, which causes the <code>HTTP 200</code> response.</p>\n<p>Solution is to add this at the end:</p>\n<pre><code>.switchIfEmpty(Mono.defer(() -&gt; webFilterChain.filter(serverWebExchange)))\n</code></pre>\n<p>so that the rest of the filter chain continues.</p>\n"}],"owner":{"account_id":2425257,"reputation":5090,"user_id":2117355,"accept_rate":71,"display_name":"Mark"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":144,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1688684139,"creation_date":1688684139,"question_id":76632980,"body_markdown":"I&#39;m developing a Spring Boot Webflux application that has a custom WebFilter that does just-in-time user creation based on the Principal object derived from the request.\r\n\r\nThe WebFilter works fine for endpoints that require authentication.  But for endpoints that don&#39;t need authentication, anything matching the pattern below returns HTTP 200 - even if the endpoint doesn&#39;t exist.  Also, the endpoint doesn&#39;t appear to be called.\r\n\r\nMy Security configuration:\r\n\r\n```\r\n    @Bean\r\n    public SecurityWebFilterChain securityWebFilterChain(\r\n            ServerHttpSecurity http) {\r\n        return http.cors(cors -&gt; cors.configurationSource(swx -&gt; corsConfiguration()))\r\n                .csrf(ServerHttpSecurity.CsrfSpec::disable)\r\n                .securityMatcher(new NegatedServerWebExchangeMatcher(\r\n                        ServerWebExchangeMatchers.pathMatchers(&quot;/actuator/**&quot;)))\r\n                .authorizeExchange((authorize) -&gt; authorize\r\n                        .pathMatchers(&quot;/foo/**&quot;)\r\n                        .permitAll()\r\n                        .anyExchange()\r\n                        .authenticated()\r\n                )\r\n                .oauth2ResourceServer(ors -&gt; ors.jwt(jwt -&gt; {}))\r\n                .build();\r\n    }\r\n\r\n```\r\n\r\nMy WebFilter: \r\n\r\n```\r\n@Component\r\npublic class JITUserFilter implements WebFilter {\r\n\r\n    private static final Logger logger = LoggerFactory.getLogger(JITUserFilter.class);\r\n\r\n    private final UserService userService;\r\n\r\n    public JITUserFilter(UserService userService) {\r\n        this.userService = userService;\r\n    }\r\n\r\n    @Override\r\n    public Mono&lt;Void&gt; filter(ServerWebExchange serverWebExchange,\r\n                             WebFilterChain webFilterChain) {\r\n        return serverWebExchange.getPrincipal().flatMap(p -&gt; {\r\n            Optional&lt;String&gt; email = Optional.empty();\r\n            if (p instanceof JwtAuthenticationToken) {\r\n                email = Optional.of(((JwtAuthenticationToken)p).getToken().getClaimAsString(&quot;https://my-app.example.com/email&quot;));\r\n            }\r\n            Optional&lt;User&gt; userOpt = userService.findUserByExternalId(p.getName());\r\n            if (userOpt.isEmpty()) {\r\n                logger.info(&quot;No existing user found; creating new with externalId {}&quot;, p.getName());\r\n                User user = new User();\r\n                user.setExternalId(p.getName());\r\n                user.setEmail(email.orElse(null));\r\n                userService.createUser(user);\r\n            }\r\n            return webFilterChain.filter(serverWebExchange);\r\n        });\r\n    }\r\n}\r\n```\r\n\r\nI have a POST endpoint at `/foo/bar` that I expect to log some messages and return a dummy response when it gets hit, but all I get when making a post to this endpoint is a 200 OK response.  Why?","title":"Spring Webflux Custom WebFilter Causes HTTP 200 response for all open endpoints","body":"<p>I'm developing a Spring Boot Webflux application that has a custom WebFilter that does just-in-time user creation based on the Principal object derived from the request.</p>\n<p>The WebFilter works fine for endpoints that require authentication.  But for endpoints that don't need authentication, anything matching the pattern below returns HTTP 200 - even if the endpoint doesn't exist.  Also, the endpoint doesn't appear to be called.</p>\n<p>My Security configuration:</p>\n<pre><code>    @Bean\n    public SecurityWebFilterChain securityWebFilterChain(\n            ServerHttpSecurity http) {\n        return http.cors(cors -&gt; cors.configurationSource(swx -&gt; corsConfiguration()))\n                .csrf(ServerHttpSecurity.CsrfSpec::disable)\n                .securityMatcher(new NegatedServerWebExchangeMatcher(\n                        ServerWebExchangeMatchers.pathMatchers(&quot;/actuator/**&quot;)))\n                .authorizeExchange((authorize) -&gt; authorize\n                        .pathMatchers(&quot;/foo/**&quot;)\n                        .permitAll()\n                        .anyExchange()\n                        .authenticated()\n                )\n                .oauth2ResourceServer(ors -&gt; ors.jwt(jwt -&gt; {}))\n                .build();\n    }\n\n</code></pre>\n<p>My WebFilter:</p>\n<pre><code>@Component\npublic class JITUserFilter implements WebFilter {\n\n    private static final Logger logger = LoggerFactory.getLogger(JITUserFilter.class);\n\n    private final UserService userService;\n\n    public JITUserFilter(UserService userService) {\n        this.userService = userService;\n    }\n\n    @Override\n    public Mono&lt;Void&gt; filter(ServerWebExchange serverWebExchange,\n                             WebFilterChain webFilterChain) {\n        return serverWebExchange.getPrincipal().flatMap(p -&gt; {\n            Optional&lt;String&gt; email = Optional.empty();\n            if (p instanceof JwtAuthenticationToken) {\n                email = Optional.of(((JwtAuthenticationToken)p).getToken().getClaimAsString(&quot;https://my-app.example.com/email&quot;));\n            }\n            Optional&lt;User&gt; userOpt = userService.findUserByExternalId(p.getName());\n            if (userOpt.isEmpty()) {\n                logger.info(&quot;No existing user found; creating new with externalId {}&quot;, p.getName());\n                User user = new User();\n                user.setExternalId(p.getName());\n                user.setEmail(email.orElse(null));\n                userService.createUser(user);\n            }\n            return webFilterChain.filter(serverWebExchange);\n        });\n    }\n}\n</code></pre>\n<p>I have a POST endpoint at <code>/foo/bar</code> that I expect to log some messages and return a dummy response when it gets hit, but all I get when making a post to this endpoint is a 200 OK response.  Why?</p>\n"},{"tags":["java","validation","javax"],"comments":[{"owner":{"account_id":5871401,"reputation":2092,"user_id":4935554,"accept_rate":40,"display_name":"Ng Sharma"},"score":0,"creation_date":1527143013,"post_id":50502163,"comment_id":88016921,"body_markdown":"https://stackoverflow.com/questions/38224733/size-annotation-to-validate-a-field?utm_medium=organic&amp;utm_source=google_rich_qa&amp;utm_campaign=google_rich_qa","body":"<a href=\"https://stackoverflow.com/questions/38224733/size-annotation-to-validate-a-field?utm_medium=organic&amp;utm_source=google_rich_qa&amp;utm_campaign=google_rich_qa\" title=\"size annotation to validate a field\">stackoverflow.com/questions/38224733/&hellip;</a>"},{"owner":{"account_id":5871401,"reputation":2092,"user_id":4935554,"accept_rate":40,"display_name":"Ng Sharma"},"score":0,"creation_date":1527143026,"post_id":50502163,"comment_id":88016927,"body_markdown":"check above link","body":"check above link"}],"answers":[{"tags":[],"owner":{"account_id":11583471,"reputation":17797,"user_id":8486518,"display_name":"Mnh Quyt Nguyn"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1527143208,"creation_date":1527142904,"answer_id":50502304,"question_id":50502163,"body_markdown":"You need a custom `cross field validation` annotation.\r\n\r\nOne way is to annotate your custom class with `@YourCustomAnnotation`.\r\n\r\nIn `YourCustomAnnotationValidator` you have access to your value, hence you can implement your logic there:\r\n\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Target(ElementType.TYPE)\r\n    @Constraint(validatedBy = DateValidator.class)\r\n    public @interface RangeCheck {\r\n    \r\n        String message();\r\n    \r\n        Class&lt;?&gt;[] groups() default {};\r\n    \r\n        Class&lt;? extends Payload&gt;[] payload() default {};\r\n    }\r\n    \r\n    public class RangeCheckValidtor implements ConstraintValidator&lt;RangeCheck, YourDto&gt; {\r\n       \r\n        @Override\r\n        public void initialize(RangeCheck date) {\r\n            // Nothing here\r\n        }\r\n    \r\n        @Override\r\n        public boolean isValid(YourDto dto, ConstraintValidatorContext constraintValidatorContext) {\r\n            if (dto.getFrom() == null || dto.getTo() == null) {\r\n                return true;\r\n            }\r\n            return from &lt; to;\r\n        }\r\n    }\r\n\r\nThen mark your `YourDto` class with `@RangeCheck`:\r\n\r\n    @RangeCheck(message = &quot;your messgae&quot;)\r\n    public class YourDto {\r\n       // from\r\n       // to\r\n    }\r\n\r\nOr simply manually validate the relation of two fields.","title":"javax validation greater or less than from other property","body":"<p>You need a custom <code>cross field validation</code> annotation.</p>\n\n<p>One way is to annotate your custom class with <code>@YourCustomAnnotation</code>.</p>\n\n<p>In <code>YourCustomAnnotationValidator</code> you have access to your value, hence you can implement your logic there:</p>\n\n<pre><code>@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.TYPE)\n@Constraint(validatedBy = DateValidator.class)\npublic @interface RangeCheck {\n\n    String message();\n\n    Class&lt;?&gt;[] groups() default {};\n\n    Class&lt;? extends Payload&gt;[] payload() default {};\n}\n\npublic class RangeCheckValidtor implements ConstraintValidator&lt;RangeCheck, YourDto&gt; {\n\n    @Override\n    public void initialize(RangeCheck date) {\n        // Nothing here\n    }\n\n    @Override\n    public boolean isValid(YourDto dto, ConstraintValidatorContext constraintValidatorContext) {\n        if (dto.getFrom() == null || dto.getTo() == null) {\n            return true;\n        }\n        return from &lt; to;\n    }\n}\n</code></pre>\n\n<p>Then mark your <code>YourDto</code> class with <code>@RangeCheck</code>:</p>\n\n<pre><code>@RangeCheck(message = \"your messgae\")\npublic class YourDto {\n   // from\n   // to\n}\n</code></pre>\n\n<p>Or simply manually validate the relation of two fields.</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1688945179,"post_id":76632971,"comment_id":135138719,"body_markdown":"As its currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As its currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/76632971/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":128922,"reputation":1,"user_id":2019850,"display_name":"Mustafa Bolat"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688684016,"creation_date":1688684016,"answer_id":76632971,"question_id":50502163,"body_markdown":"For anyone who needs a more generic solution, validator can be implemented to compare two given property. Here is what I came up with : \r\n\r\n\r\n    @Target({ TYPE, ANNOTATION_TYPE })\r\n    @Retention(RUNTIME)\r\n    @Constraint(validatedBy = { CompareFieldsValidator.class })\r\n    public @interface CompareFields {\r\n    \r\n        String message() default &quot;{CompareFields.message}&quot;;\r\n    \r\n        Class&lt;?&gt;[] groups() default {};\r\n    \r\n        Class&lt;? extends Payload&gt;[] payload() default {};\r\n    \r\n        String left();\r\n    \r\n        String right();\r\n        \r\n        int[] vals() default {0};\r\n    \r\n        @Target({ TYPE, ANNOTATION_TYPE })\r\n        @Retention(RUNTIME)\r\n        public @interface List {\r\n        \tCompareFields[] value();\r\n        }\r\n    }\r\n\r\n\r\n    public class CompareFieldsValidator implements ConstraintValidator&lt;CompareFields, Object&gt; {\r\n    \r\n        private static final Logger log = LoggerFactory.getLogger(FieldsEqualityValidator.class);\r\n    \r\n        private String left;\r\n        private String right;\r\n        private Set&lt;Integer&gt; vals;\r\n    \r\n        @Override\r\n        public void initialize(CompareFields constraintAnnotation) {\r\n            left = constraintAnnotation.left();\r\n            right = constraintAnnotation.right();\r\n            vals = Arrays.stream(constraintAnnotation.vals()).boxed().collect(Collectors.toSet());\r\n        }\r\n    \r\n        @Override\r\n        public boolean isValid(Object value, ConstraintValidatorContext context) {\r\n            if (value == null)\r\n                return true;\r\n    \r\n            try {\r\n                Class&lt;?&gt; clazz = value.getClass();\r\n                //get left operand as comparable\r\n                Field leftField = ReflectionUtils.findField(clazz, left);\r\n                leftField.setAccessible(true);\r\n                Object leftObj = leftField.get(value);\r\n                Comparable&lt;Object&gt; leftComparable = (Comparable&lt;Object&gt;)leftObj;\r\n                //get right operand\r\n                Field rightField = ReflectionUtils.findField(clazz, right);\r\n                rightField.setAccessible(true);\r\n                Object rightObj = rightField.get(value);\r\n                \r\n                //null check : return true if both null\r\n                if(leftComparable == null) {\r\n                \tif(rightObj == null) {\r\n                \t\treturn true;\r\n                \t} else {\r\n                \t\tcontext.buildConstraintViolationWithTemplate(context.getDefaultConstraintMessageTemplate())\r\n                \t\t\t.addPropertyNode(left).addPropertyNode(right);\r\n                \t\treturn false;\r\n                \t}\r\n                }\r\n                \r\n                //return true if compareTo result in vals array\r\n                if(vals.contains(leftComparable.compareTo(rightObj))) {\r\n                \treturn true;\r\n                }else {\r\n                \tcontext.buildConstraintViolationWithTemplate(context.getDefaultConstraintMessageTemplate())\r\n        \t\t\t.addPropertyNode(left).addConstraintViolation();\r\n                \treturn false;\r\n                }\r\n            } catch (Exception e) {\r\n                log.error(&quot;Cannot validate one of two field in &#39;&quot; + value + &quot;&#39;!&quot;, e);\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    //Usage: selling price must be smallar than or equal to list price\r\n    @CompareFields(left = &quot;sellingPrice&quot;, right = &quot;listPrice&quot;, vals = {-1,0})\r\n    public class InventoryDto{\r\n    ...\r\n    }\r\n    //Usage: start time must be before finish time\r\n    @CompareFields(left = &quot;startTime&quot;, right = &quot;finishTime&quot;, vals = {-1})\r\n    public class GateLogDto{\r\n    ...\r\n    }\r\n\r\n","title":"javax validation greater or less than from other property","body":"<p>For anyone who needs a more generic solution, validator can be implemented to compare two given property. Here is what I came up with :</p>\n<pre><code>@Target({ TYPE, ANNOTATION_TYPE })\n@Retention(RUNTIME)\n@Constraint(validatedBy = { CompareFieldsValidator.class })\npublic @interface CompareFields {\n\n    String message() default &quot;{CompareFields.message}&quot;;\n\n    Class&lt;?&gt;[] groups() default {};\n\n    Class&lt;? extends Payload&gt;[] payload() default {};\n\n    String left();\n\n    String right();\n    \n    int[] vals() default {0};\n\n    @Target({ TYPE, ANNOTATION_TYPE })\n    @Retention(RUNTIME)\n    public @interface List {\n        CompareFields[] value();\n    }\n}\n\n\npublic class CompareFieldsValidator implements ConstraintValidator&lt;CompareFields, Object&gt; {\n\n    private static final Logger log = LoggerFactory.getLogger(FieldsEqualityValidator.class);\n\n    private String left;\n    private String right;\n    private Set&lt;Integer&gt; vals;\n\n    @Override\n    public void initialize(CompareFields constraintAnnotation) {\n        left = constraintAnnotation.left();\n        right = constraintAnnotation.right();\n        vals = Arrays.stream(constraintAnnotation.vals()).boxed().collect(Collectors.toSet());\n    }\n\n    @Override\n    public boolean isValid(Object value, ConstraintValidatorContext context) {\n        if (value == null)\n            return true;\n\n        try {\n            Class&lt;?&gt; clazz = value.getClass();\n            //get left operand as comparable\n            Field leftField = ReflectionUtils.findField(clazz, left);\n            leftField.setAccessible(true);\n            Object leftObj = leftField.get(value);\n            Comparable&lt;Object&gt; leftComparable = (Comparable&lt;Object&gt;)leftObj;\n            //get right operand\n            Field rightField = ReflectionUtils.findField(clazz, right);\n            rightField.setAccessible(true);\n            Object rightObj = rightField.get(value);\n            \n            //null check : return true if both null\n            if(leftComparable == null) {\n                if(rightObj == null) {\n                    return true;\n                } else {\n                    context.buildConstraintViolationWithTemplate(context.getDefaultConstraintMessageTemplate())\n                        .addPropertyNode(left).addPropertyNode(right);\n                    return false;\n                }\n            }\n            \n            //return true if compareTo result in vals array\n            if(vals.contains(leftComparable.compareTo(rightObj))) {\n                return true;\n            }else {\n                context.buildConstraintViolationWithTemplate(context.getDefaultConstraintMessageTemplate())\n                .addPropertyNode(left).addConstraintViolation();\n                return false;\n            }\n        } catch (Exception e) {\n            log.error(&quot;Cannot validate one of two field in '&quot; + value + &quot;'!&quot;, e);\n            return false;\n        }\n    }\n}\n\n\n//Usage: selling price must be smallar than or equal to list price\n@CompareFields(left = &quot;sellingPrice&quot;, right = &quot;listPrice&quot;, vals = {-1,0})\npublic class InventoryDto{\n...\n}\n//Usage: start time must be before finish time\n@CompareFields(left = &quot;startTime&quot;, right = &quot;finishTime&quot;, vals = {-1})\npublic class GateLogDto{\n...\n}\n</code></pre>\n"}],"owner":{"account_id":551326,"reputation":3001,"user_id":916138,"accept_rate":45,"display_name":"Shahid Ghafoor"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14951,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"answer_count":2,"score":13,"last_activity_date":1688684016,"creation_date":1527142362,"question_id":50502163,"body_markdown":"with respect to `javax.validation`\r\n\r\n      @NotNull(message = &quot;From can&#39;t be null&quot;)\r\n      @Min(value = 1, message = &quot;From must be greater than zero&quot;)\r\n      private Long from;\r\n      @NotNull(message = &quot;To can&#39;t be null&quot;)\r\n      @Min(value = 1, message = &quot;To must be greater than zero&quot;)\r\n      private Long to;\r\n\r\nI want to also validate that **FROM** should be less than **TO** and **TO** should be greater than **FROM** ? how we can do this using javax validation&#39;s annotation ?","title":"javax validation greater or less than from other property","body":"<p>with respect to <code>javax.validation</code></p>\n\n<pre><code>  @NotNull(message = \"From can't be null\")\n  @Min(value = 1, message = \"From must be greater than zero\")\n  private Long from;\n  @NotNull(message = \"To can't be null\")\n  @Min(value = 1, message = \"To must be greater than zero\")\n  private Long to;\n</code></pre>\n\n<p>I want to also validate that <strong>FROM</strong> should be less than <strong>TO</strong> and <strong>TO</strong> should be greater than <strong>FROM</strong> ? how we can do this using javax validation's annotation ?</p>\n"},{"tags":["java","calendar"],"comments":[{"owner":{"account_id":2219078,"reputation":2030,"user_id":1959005,"accept_rate":55,"display_name":"Poutrathor"},"score":3,"creation_date":1413882193,"post_id":14832151,"comment_id":41600962,"body_markdown":"@anyone_reaching_this_issue : This question (http://stackoverflow.com/questions/6192781/month-name-as-a-string) mentions getDisplayName() and other intesreting tricks","body":"@anyone_reaching_this_issue : This question (<a href=\"http://stackoverflow.com/questions/6192781/month-name-as-a-string\" title=\"month name as a string\">stackoverflow.com/questions/6192781/month-name-as-a-string</a>) mentions getDisplayName() and other intesreting tricks"}],"answers":[{"comments":[{"owner":{"account_id":1131741,"reputation":5562,"user_id":1117668,"accept_rate":80,"display_name":"ogzd"},"score":2,"creation_date":1360671327,"post_id":14832184,"comment_id":20781871,"body_markdown":"This will work but I would like to get the string repr. of the month when I know the index of it. I think I will use the other approaches, thanks.","body":"This will work but I would like to get the string repr. of the month when I know the index of it. I think I will use the other approaches, thanks."},{"owner":{"account_id":458026,"reputation":2652,"user_id":857681,"display_name":"speedynomads"},"score":54,"creation_date":1370170815,"post_id":14832184,"comment_id":24356067,"body_markdown":"this helped me to get the current month name. although i used (&quot;MMMM&quot;) to get the full month name instead of a shortened one.","body":"this helped me to get the current month name. although i used (&quot;MMMM&quot;) to get the full month name instead of a shortened one."}],"tags":[],"owner":{"account_id":1025295,"reputation":46067,"user_id":1034737,"accept_rate":80,"display_name":"PermGenError"},"comment_count":2,"down_vote_count":0,"up_vote_count":212,"is_accepted":false,"score":212,"last_activity_date":1636862621,"creation_date":1360670743,"answer_id":14832184,"question_id":14832151,"body_markdown":"You can achieve it using [`SimpleDateFormat`][1], which is meant to format date and times:\r\n\r\n```lang-java\r\nCalendar cal = Calendar.getInstance();\r\nSystem.out.println(new SimpleDateFormat(&quot;MMM&quot;).format(cal.getTime()));\r\n```\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html","title":"How can I get Month Name from Calendar?","body":"<p>You can achieve it using <a href=\"http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html\" rel=\"noreferrer\"><code>SimpleDateFormat</code></a>, which is meant to format date and times:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Calendar cal = Calendar.getInstance();\nSystem.out.println(new SimpleDateFormat(&quot;MMM&quot;).format(cal.getTime()));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1786278,"reputation":552,"user_id":1627688,"display_name":"ahaaman"},"score":6,"creation_date":1397133135,"post_id":14832267,"comment_id":35106108,"body_markdown":"DateFormatSymbols implementation was changed in JDK 8, so getMonths method doesn&#39;t return correct values for all Locale&#39;s anymore: http://www.oracle.com/technetwork/java/javase/8-compatibility-guide-2156366.html","body":"DateFormatSymbols implementation was changed in JDK 8, so getMonths method doesn&#39;t return correct values for all Locale&#39;s anymore: <a href=\"http://www.oracle.com/technetwork/java/javase/8-compatibility-guide-2156366.html\" rel=\"nofollow noreferrer\">oracle.com/technetwork/java/javase/&hellip;</a>"},{"owner":{"account_id":1415915,"reputation":2836,"user_id":1341599,"accept_rate":94,"display_name":"Dominik"},"score":1,"creation_date":1399973464,"post_id":14832267,"comment_id":36278344,"body_markdown":"could you give a workaround/working solution for JDK8?","body":"could you give a workaround/working solution for JDK8?"},{"owner":{"account_id":1142389,"reputation":2598,"user_id":1125913,"accept_rate":68,"display_name":"Mickey Perlstein"},"score":0,"creation_date":1509620471,"post_id":14832267,"comment_id":81095439,"body_markdown":"when would you get a month as a number?","body":"when would you get a month as a number?"},{"owner":{"account_id":11653885,"reputation":2966,"user_id":8534285,"display_name":"Ajay Kumar"},"score":0,"creation_date":1543512974,"post_id":14832267,"comment_id":93955864,"body_markdown":"Mickey to answer your question, here is how you get month as int and use it - \tpublic static void main(String[] args) {\n\t\tint month;\n\t\tGregorianCalendar date = new GregorianCalendar();\n\t\tmonth = date.get(Calendar.MONTH);\n\n\t\tSystem.out.println(&quot;Current month is  &quot; + (month + 1) + &quot; and Month name is &quot; + getMonthForInt(month));\n\n\t}\n\n\tstatic String getMonthForInt(int num) {\n\t\tString month = &quot;wrong&quot;;\n\t\tDateFormatSymbols dfs = new DateFormatSymbols();\n\t\tString[] months = dfs.getMonths();\n\t\tif (num &gt;= 0 &amp;&amp; num &lt;= 11) {\n\t\t\tmonth = months[num];\n\t\t}\n\t\treturn month;\n\t}","body":"Mickey to answer your question, here is how you get month as int and use it - \tpublic static void main(String[] args) { \t\tint month; \t\tGregorianCalendar date = new GregorianCalendar(); \t\tmonth = date.get(Calendar.MONTH);  \t\tSystem.out.println(&quot;Current month is  &quot; + (month + 1) + &quot; and Month name is &quot; + getMonthForInt(month));  \t}  \tstatic String getMonthForInt(int num) { \t\tString month = &quot;wrong&quot;; \t\tDateFormatSymbols dfs = new DateFormatSymbols(); \t\tString[] months = dfs.getMonths(); \t\tif (num &gt;= 0 &amp;&amp; num &lt;= 11) { \t\t\tmonth = months[num]; \t\t} \t\treturn month; \t}"}],"tags":[],"owner":{"account_id":319648,"reputation":6146,"user_id":637517,"accept_rate":85,"display_name":"subodh"},"comment_count":4,"down_vote_count":2,"up_vote_count":105,"is_accepted":true,"score":103,"last_activity_date":1636862164,"creation_date":1360670955,"answer_id":14832267,"question_id":14832151,"body_markdown":"```lang-java\r\nString getMonthForInt(int num) {\r\n\tString month = &quot;wrong&quot;;\r\n\tDateFormatSymbols dfs = new DateFormatSymbols();\r\n\tString[] months = dfs.getMonths();\r\n\tif (num &gt;= 0 &amp;&amp; num &lt;= 11) {\r\n\t\tmonth = months[num];\r\n\t}\r\n\treturn month;\r\n}\r\n```","title":"How can I get Month Name from Calendar?","body":"<pre class=\"lang-java prettyprint-override\"><code>String getMonthForInt(int num) {\n    String month = &quot;wrong&quot;;\n    DateFormatSymbols dfs = new DateFormatSymbols();\n    String[] months = dfs.getMonths();\n    if (num &gt;= 0 &amp;&amp; num &lt;= 11) {\n        month = months[num];\n    }\n    return month;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1131741,"reputation":5562,"user_id":1117668,"accept_rate":80,"display_name":"ogzd"},"score":1,"creation_date":1360671450,"post_id":14832283,"comment_id":20781927,"body_markdown":"thanks but I am happy with my old `SimpleDateFormat` and `Date`","body":"thanks but I am happy with my old <code>SimpleDateFormat</code> and <code>Date</code>"},{"owner":{"account_id":1853886,"reputation":210617,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"score":0,"creation_date":1360671561,"post_id":14832283,"comment_id":20781984,"body_markdown":"@ogzd. Your wish. But you should sure give it a try, and I bet you&#39;ll love sing it.","body":"@ogzd. Your wish. But you should sure give it a try, and I bet you&#39;ll love sing it."},{"owner":{"account_id":1853886,"reputation":210617,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"score":0,"creation_date":1360672260,"post_id":14832283,"comment_id":20782325,"body_markdown":"@ogzd. I posted the way to get month name from month number. BTW, why would you want to do that?","body":"@ogzd. I posted the way to get month name from month number. BTW, why would you want to do that?"}],"tags":[],"owner":{"account_id":1853886,"reputation":210617,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"comment_count":3,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1408129592,"creation_date":1360671018,"answer_id":14832283,"question_id":14832151,"body_markdown":"# Joda-Time\r\n\r\nHow about using [Joda-Time](http://www.joda.org/joda-time/). It&#39;s a far better date-time API to work with (And `January` means january here. It&#39;s not like Calendar, which uses `0-based` index for months). \r\n\r\nYou can use [`AbstractDateTime#toString( pattern )`](http://www.joda.org/joda-time/apidocs/org/joda/time/base/AbstractDateTime.html#toString(java.lang.String)) method to format the date in specified format:\r\n\r\n    DateTime date = DateTime.now();\r\n    String month = date.toString(&quot;MMM&quot;);\r\n\r\n## Month Name From Number\r\n\r\nIf you want month name for a particular month number, you can do it like this: \r\n\r\n    int month = 3;\r\n    String monthName = DateTime.now().withMonthOfYear(month).toString(&quot;MMM&quot;);\r\n\r\n## Localize \r\n\r\nThe above approach uses your JVMs current default Locale for the language of the month name. You want to specify a Locale object instead.\r\n\r\n    String month = date.toString( &quot;MMM&quot;, Locale.CANADA_FRENCH );\r\n\r\n\r\n    ","title":"How can I get Month Name from Calendar?","body":"<h1>Joda-Time</h1>\n\n<p>How about using <a href=\"http://www.joda.org/joda-time/\" rel=\"noreferrer\">Joda-Time</a>. It's a far better date-time API to work with (And <code>January</code> means january here. It's not like Calendar, which uses <code>0-based</code> index for months). </p>\n\n<p>You can use <a href=\"http://www.joda.org/joda-time/apidocs/org/joda/time/base/AbstractDateTime.html#toString(java.lang.String)\" rel=\"noreferrer\"><code>AbstractDateTime#toString( pattern )</code></a> method to format the date in specified format:</p>\n\n<pre><code>DateTime date = DateTime.now();\nString month = date.toString(\"MMM\");\n</code></pre>\n\n<h2>Month Name From Number</h2>\n\n<p>If you want month name for a particular month number, you can do it like this: </p>\n\n<pre><code>int month = 3;\nString monthName = DateTime.now().withMonthOfYear(month).toString(\"MMM\");\n</code></pre>\n\n<h2>Localize</h2>\n\n<p>The above approach uses your JVMs current default Locale for the language of the month name. You want to specify a Locale object instead.</p>\n\n<pre><code>String month = date.toString( \"MMM\", Locale.CANADA_FRENCH );\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1387192,"reputation":61110,"user_id":1318946,"accept_rate":52,"display_name":"Pratik Butani"},"score":2,"creation_date":1413292020,"post_id":19696776,"comment_id":41381012,"body_markdown":"This is useful for me `new SimpleDateFormat(&quot;MMMM&quot;).format(cal.getTime());`","body":"This is useful for me <code>new SimpleDateFormat(&quot;MMMM&quot;).format(cal.getTime());</code>"},{"owner":{"account_id":7369042,"reputation":320,"user_id":5609858,"accept_rate":100,"display_name":"Abeer zaroor"},"score":0,"creation_date":1460318462,"post_id":19696776,"comment_id":60673365,"body_markdown":"this is a weak solution, how about jan, feb etc. not addition to January February etc.  this will not cover all the situation","body":"this is a weak solution, how about jan, feb etc. not addition to January February etc.  this will not cover all the situation"},{"owner":{"account_id":8525908,"reputation":518,"user_id":6391398,"display_name":"RoccoDev"},"score":2,"creation_date":1471184346,"post_id":19696776,"comment_id":65241185,"body_markdown":"Well, you should add 1 to the month. Arrays start from 0.","body":"Well, you should add 1 to the month. Arrays start from 0."},{"owner":{"account_id":1142389,"reputation":2598,"user_id":1125913,"accept_rate":68,"display_name":"Mickey Perlstein"},"score":0,"creation_date":1509620289,"post_id":19696776,"comment_id":81095320,"body_markdown":"this is bad, you are re-inventing java ?","body":"this is bad, you are re-inventing java ?"},{"owner":{"account_id":2089982,"reputation":3029,"user_id":1860042,"accept_rate":83,"display_name":"Advait Saravade"},"score":2,"creation_date":1542145342,"post_id":19696776,"comment_id":93461619,"body_markdown":"This works for english speaking users. What about the others?","body":"This works for english speaking users. What about the others?"},{"owner":{"account_id":4979946,"reputation":192,"user_id":9205647,"display_name":"Pryftan"},"score":1,"creation_date":1593187767,"post_id":19696776,"comment_id":110701708,"body_markdown":"@MickeyPerlstein No. That&#39;s not &#39;reinventing&#39; (as you put it) Java. And it&#39;s not &#39;bad&#39; either. That&#39;s simply a way to do it. Besides that this is based on not having to use the Calendar class (or at least you don&#39;t have to use it - though if you want the current month maybe so) which might be desirable in some cases. Sure it&#39;s only for English but that&#39;s besides the point.","body":"@MickeyPerlstein No. That&#39;s not &#39;reinventing&#39; (as you put it) Java. And it&#39;s not &#39;bad&#39; either. That&#39;s simply a way to do it. Besides that this is based on not having to use the Calendar class (or at least you don&#39;t have to use it - though if you want the current month maybe so) which might be desirable in some cases. Sure it&#39;s only for English but that&#39;s besides the point."},{"owner":{"account_id":1142389,"reputation":2598,"user_id":1125913,"accept_rate":68,"display_name":"Mickey Perlstein"},"score":0,"creation_date":1604586220,"post_id":19696776,"comment_id":114396085,"body_markdown":"@Pryftan you&#39;re right I meant reinventing the operating system locales and creating a mirror based on your english language. good luck localizing that mess","body":"@Pryftan you&#39;re right I meant reinventing the operating system locales and creating a mirror based on your english language. good luck localizing that mess"}],"tags":[],"owner":{"account_id":3516321,"reputation":694,"user_id":2939648,"display_name":"Terry Chern"},"comment_count":7,"down_vote_count":4,"up_vote_count":46,"is_accepted":false,"score":42,"last_activity_date":1457237124,"creation_date":1383182095,"answer_id":19696776,"question_id":14832151,"body_markdown":"This is the solution I came up with for a class project:\r\n\r\n    public static String theMonth(int month){\r\n        String[] monthNames = {&quot;January&quot;, &quot;February&quot;, &quot;March&quot;, &quot;April&quot;, &quot;May&quot;, &quot;June&quot;, &quot;July&quot;, &quot;August&quot;, &quot;September&quot;, &quot;October&quot;, &quot;November&quot;, &quot;December&quot;};\r\n        return monthNames[month];\r\n\t}\r\n\r\nThe number you pass in comes from a `Calendar.MONTH` call.","title":"How can I get Month Name from Calendar?","body":"<p>This is the solution I came up with for a class project:</p>\n\n<pre><code>public static String theMonth(int month){\n    String[] monthNames = {\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"};\n    return monthNames[month];\n}\n</code></pre>\n\n<p>The number you pass in comes from a <code>Calendar.MONTH</code> call.</p>\n"},{"comments":[{"owner":{"account_id":1653653,"reputation":2416,"user_id":1523730,"display_name":"sebastian"},"score":4,"creation_date":1429794342,"post_id":23266601,"comment_id":47774961,"body_markdown":"The use of Calendar abstraction is the most elegant solution in my opinion. +1","body":"The use of Calendar abstraction is the most elegant solution in my opinion. +1"},{"owner":{"account_id":6845124,"reputation":113,"user_id":5264169,"display_name":"Nick Sikrier"},"score":6,"creation_date":1509820649,"post_id":23266601,"comment_id":81178186,"body_markdown":"Wrong! The problem will be in languages with cases.\nFor example, in Slavic locales it will return month in genitive case, for example, for October in ru-RU locale you will receive `` instead of ``, which you probably expect.","body":"Wrong! The problem will be in languages with cases. For example, in Slavic locales it will return month in genitive case, for example, for October in ru-RU locale you will receive <code></code> instead of <code></code>, which you probably expect."}],"tags":[],"owner":{"account_id":194597,"reputation":41281,"user_id":437039,"accept_rate":89,"display_name":"sandalone"},"comment_count":2,"down_vote_count":1,"up_vote_count":84,"is_accepted":false,"score":83,"last_activity_date":1398336163,"creation_date":1398336163,"answer_id":23266601,"question_id":14832151,"body_markdown":"As simple as this\r\n\r\n    mCalendar = Calendar.getInstance();    \r\n    String month = mCalendar.getDisplayName(Calendar.MONTH, Calendar.LONG, Locale.getDefault());","title":"How can I get Month Name from Calendar?","body":"<p>As simple as this</p>\n\n<pre><code>mCalendar = Calendar.getInstance();    \nString month = mCalendar.getDisplayName(Calendar.MONTH, Calendar.LONG, Locale.getDefault());\n</code></pre>\n"},{"comments":[{"owner":{"account_id":383780,"reputation":397,"user_id":739836,"display_name":"Anfet"},"score":0,"creation_date":1549276160,"post_id":25329533,"comment_id":95831379,"body_markdown":"Is a correct answer for RU locale. Very weird tho, that android SDK does not contain &#39;LLLL&#39; spec.","body":"Is a correct answer for RU locale. Very weird tho, that android SDK does not contain &#39;LLLL&#39; spec."}],"tags":[],"owner":{"account_id":125372,"reputation":7147,"user_id":321106,"accept_rate":73,"display_name":"artkoenig"},"comment_count":1,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1410354414,"creation_date":1408117338,"answer_id":25329533,"question_id":14832151,"body_markdown":"    SimpleDateFormat dateFormat = new SimpleDateFormat( &quot;LLLL&quot;, Locale.getDefault() );\r\n    dateFormat.format( date );\r\n\r\nFor some languages (e.g. Russian) this is the only correct way to get the stand-alone month names.\r\n\r\nThis is what you get, if you use `getDisplayName` from the `Calendar` or `DateFormatSymbols` for January:\r\n\r\n**** (which is correct for a complete date string: &quot;**10 , 2014**&quot;)\r\n\r\nbut in case of a stand-alone month name you would expect:\r\n\r\n****","title":"How can I get Month Name from Calendar?","body":"<pre><code>SimpleDateFormat dateFormat = new SimpleDateFormat( \"LLLL\", Locale.getDefault() );\ndateFormat.format( date );\n</code></pre>\n\n<p>For some languages (e.g. Russian) this is the only correct way to get the stand-alone month names.</p>\n\n<p>This is what you get, if you use <code>getDisplayName</code> from the <code>Calendar</code> or <code>DateFormatSymbols</code> for January:</p>\n\n<p><strong></strong> (which is correct for a complete date string: \"<strong>10 , 2014</strong>\")</p>\n\n<p>but in case of a stand-alone month name you would expect:</p>\n\n<p><strong></strong></p>\n"},{"comments":[{"owner":{"account_id":482571,"reputation":3920,"user_id":897041,"accept_rate":87,"display_name":"Muhammad Gelbana"},"score":0,"creation_date":1433161934,"post_id":28002293,"comment_id":49217108,"body_markdown":"Which java version is this ?","body":"Which java version is this ?"}],"tags":[],"owner":{"account_id":2172789,"reputation":6475,"user_id":1924299,"accept_rate":56,"display_name":"Eng. Samer T"},"comment_count":1,"down_vote_count":0,"up_vote_count":40,"is_accepted":false,"score":40,"last_activity_date":1636886147,"creation_date":1421516435,"answer_id":28002293,"question_id":14832151,"body_markdown":"If you have multi-language interface, you can use `getDisplayName` to display the name of month with control of displaying language.\r\n\r\nHere is an example of displaying the month name in English, French, Arabic and Arabic in specific country like &quot;Syria&quot;:\r\n\r\n```lang-java\r\nCalendar c = Calendar.getInstance();\r\nSystem.out.println(c.getDisplayName(Calendar.MONTH, Calendar.LONG, Locale.ENGLISH ) );\r\nSystem.out.println(c.getDisplayName(Calendar.MONTH, Calendar.LONG, Locale.FRANCE ) );\r\nSystem.out.println(c.getDisplayName(Calendar.MONTH, Calendar.LONG, new Locale(&quot;ar&quot;) ) );\r\nSystem.out.println(c.getDisplayName(Calendar.MONTH, Calendar.LONG, new Locale(&quot;ar&quot;, &quot;SY&quot;) ) );\r\nSystem.out.println(c.getTime().toString());\r\n```\r\n\r\nThe result is:\r\n\r\n```\r\nJanuary\r\njanvier\r\n\r\n \r\nSat Jan 17 19:31:30 EET 2015\r\n```","title":"How can I get Month Name from Calendar?","body":"<p>If you have multi-language interface, you can use <code>getDisplayName</code> to display the name of month with control of displaying language.</p>\n<p>Here is an example of displaying the month name in English, French, Arabic and Arabic in specific country like &quot;Syria&quot;:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Calendar c = Calendar.getInstance();\nSystem.out.println(c.getDisplayName(Calendar.MONTH, Calendar.LONG, Locale.ENGLISH ) );\nSystem.out.println(c.getDisplayName(Calendar.MONTH, Calendar.LONG, Locale.FRANCE ) );\nSystem.out.println(c.getDisplayName(Calendar.MONTH, Calendar.LONG, new Locale(&quot;ar&quot;) ) );\nSystem.out.println(c.getDisplayName(Calendar.MONTH, Calendar.LONG, new Locale(&quot;ar&quot;, &quot;SY&quot;) ) );\nSystem.out.println(c.getTime().toString());\n</code></pre>\n<p>The result is:</p>\n<pre><code>January\njanvier\n\n \nSat Jan 17 19:31:30 EET 2015\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5737531,"reputation":199,"user_id":4531148,"accept_rate":80,"display_name":"Whirvis"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1688683568,"creation_date":1428530160,"answer_id":29526078,"question_id":14832151,"body_markdown":"You can get it one line like this:\r\n\r\n```lang-java\r\nString monthName = new DateFormatSymbols().getMonths()[cal.get(Calendar.MONTH)];\r\n````","title":"How can I get Month Name from Calendar?","body":"<p>You can get it one line like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String monthName = new DateFormatSymbols().getMonths()[cal.get(Calendar.MONTH)];\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5847556,"reputation":397,"user_id":4607264,"display_name":"jhpg"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1477569863,"creation_date":1473710989,"answer_id":39458049,"question_id":14832151,"body_markdown":"This works for me:\r\n\r\n    String getMonthName(int monthNumber) {\r\n        String[] months = new DateFormatSymbols().getMonths();\r\n        int n = monthNumber-1;\r\n        return (n &gt;= 0 &amp;&amp; n &lt;= 11) ? months[n] : &quot;wrong number&quot;;\r\n    }\r\n\r\nTo returns `&quot;September&quot;` with one line:\r\n\r\n    String month = getMonthName(9);\r\n\r\n","title":"How can I get Month Name from Calendar?","body":"<p>This works for me:</p>\n\n<pre><code>String getMonthName(int monthNumber) {\n    String[] months = new DateFormatSymbols().getMonths();\n    int n = monthNumber-1;\n    return (n &gt;= 0 &amp;&amp; n &lt;= 11) ? months[n] : \"wrong number\";\n}\n</code></pre>\n\n<p>To returns <code>\"September\"</code> with one line:</p>\n\n<pre><code>String month = getMonthName(9);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4784258,"reputation":1139,"user_id":3865227,"accept_rate":100,"display_name":"SubliemeSiem"},"score":1,"creation_date":1476082085,"post_id":39952276,"comment_id":67185163,"body_markdown":"While your answer may be correct, it is of bad quality. Please elaborate on why this answer is correct.","body":"While your answer may be correct, it is of bad quality. Please elaborate on why this answer is correct."},{"owner":{"account_id":7774796,"reputation":50,"user_id":5883240,"display_name":"Amit Mishra"},"score":1,"creation_date":1476083834,"post_id":39952276,"comment_id":67185923,"body_markdown":"@SubliemeSiem I&#39;m just trying to change format and simplest way to get it done:\nMM- it will return month name in integer like 01, 02, 03.\nMMM-it will return month name in short like jan, feb,mar.\nMMMM-it will return full month name in string format like January.","body":"@SubliemeSiem I&#39;m just trying to change format and simplest way to get it done: MM- it will return month name in integer like 01, 02, 03. MMM-it will return month name in short like jan, feb,mar. MMMM-it will return full month name in string format like January."},{"owner":{"account_id":1142389,"reputation":2598,"user_id":1125913,"accept_rate":68,"display_name":"Mickey Perlstein"},"score":0,"creation_date":1509620546,"post_id":39952276,"comment_id":81095487,"body_markdown":"this is the only *CORRECT* answer for formatting dates. use a Date or Calendar object and format it with a formatter. the question itself is *BAD*","body":"this is the only <i>CORRECT</i> answer for formatting dates. use a Date or Calendar object and format it with a formatter. the question itself is <i>BAD</i>"}],"tags":[],"owner":{"account_id":7774796,"reputation":50,"user_id":5883240,"display_name":"Amit Mishra"},"comment_count":3,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1476131151,"creation_date":1476080204,"answer_id":39952276,"question_id":14832151,"body_markdown":"    DateFormat date =  new SimpleDateFormat(&quot;dd/MMM/yyyy&quot;);\r\n    Date date1 = new Date();\r\n    System.out.println(date.format(date1));","title":"How can I get Month Name from Calendar?","body":"<pre><code>DateFormat date =  new SimpleDateFormat(\"dd/MMM/yyyy\");\nDate date1 = new Date();\nSystem.out.println(date.format(date1));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5847556,"reputation":397,"user_id":4607264,"display_name":"jhpg"},"score":0,"creation_date":1507702876,"post_id":40336410,"comment_id":80309936,"body_markdown":"I can&#39;t see how this answer the question asked.","body":"I can&#39;t see how this answer the question asked."}],"tags":[],"owner":{"account_id":178361,"reputation":1833,"user_id":410293,"accept_rate":50,"display_name":"Rafael Sanches"},"comment_count":1,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1477886507,"creation_date":1477886507,"answer_id":40336410,"question_id":14832151,"body_markdown":"from the SimpleDateFormat java doc:\r\n\r\n    *         &lt;td&gt;&lt;code&gt;&quot;yyyyy.MMMMM.dd GGG hh:mm aaa&quot;&lt;/code&gt;\r\n     *         &lt;td&gt;&lt;code&gt;02001.July.04 AD 12:08 PM&lt;/code&gt;\r\n     *         &lt;td&gt;&lt;code&gt;&quot;EEE, d MMM yyyy HH:mm:ss Z&quot;&lt;/code&gt;\r\n     *         &lt;td&gt;&lt;code&gt;Wed, 4 Jul 2001 12:08:56 -0700&lt;/code&gt;\r\n\r\n","title":"How can I get Month Name from Calendar?","body":"<p>from the SimpleDateFormat java doc:</p>\n\n<pre><code>*         &lt;td&gt;&lt;code&gt;\"yyyyy.MMMMM.dd GGG hh:mm aaa\"&lt;/code&gt;\n *         &lt;td&gt;&lt;code&gt;02001.July.04 AD 12:08 PM&lt;/code&gt;\n *         &lt;td&gt;&lt;code&gt;\"EEE, d MMM yyyy HH:mm:ss Z\"&lt;/code&gt;\n *         &lt;td&gt;&lt;code&gt;Wed, 4 Jul 2001 12:08:56 -0700&lt;/code&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3092120,"reputation":1588,"user_id":2618036,"display_name":"georger"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1485353682,"creation_date":1485353682,"answer_id":41853827,"question_id":14832151,"body_markdown":"It might be an old question, but as a one liner to get the name of the month when we know the indices, I used\r\n\r\n    String month = new DateFormatSymbols().getMonths()[monthNumber - 1];\r\n\r\nor for short names\r\n\r\n    String month = new DateFormatSymbols().getShortMonths()[monthNumber - 1];\r\nPlease be aware that your `monthNumber` starts counting from 1 while any of the methods above returns an array so you need to start counting from 0.","title":"How can I get Month Name from Calendar?","body":"<p>It might be an old question, but as a one liner to get the name of the month when we know the indices, I used</p>\n\n<pre><code>String month = new DateFormatSymbols().getMonths()[monthNumber - 1];\n</code></pre>\n\n<p>or for short names</p>\n\n<pre><code>String month = new DateFormatSymbols().getShortMonths()[monthNumber - 1];\n</code></pre>\n\n<p>Please be aware that your <code>monthNumber</code> starts counting from 1 while any of the methods above returns an array so you need to start counting from 0.</p>\n"},{"tags":[],"owner":{"account_id":8288224,"reputation":119,"user_id":6230744,"display_name":"Nikolay Fedorovskikh"},"comment_count":0,"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1547246237,"creation_date":1492432647,"answer_id":43451652,"question_id":14832151,"body_markdown":"# `Month::getDisplayName`\r\n\r\nSince Java 8, use the [`Month`][1] enum. The [`getDisplayName`][2] method automatically localizes the name of the month. \r\n\r\nPass:\r\n\r\n - A [`TextStyle`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/format/TextStyle.html) to determine how long or how abbreviated.\r\n - A [`Locale`][3] to specify the human language used in translation, and the cultural norms used for abbreviation, punctuation, etc.\r\n\r\nExample:\r\n\r\n&lt;!-- language-all: lang-java --&gt;\r\n\r\n    public static String getMonthStandaloneName(Month month) {\r\n        return month.getDisplayName(\r\n            TextStyle.FULL_STANDALONE, \r\n            Locale.getDefault()\r\n        );\r\n    }\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/Month.html\r\n  [2]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/Month.html#getDisplayName(java.time.format.TextStyle,java.util.Locale)\r\n  [3]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Locale.html","title":"How can I get Month Name from Calendar?","body":"<h1><code>Month::getDisplayName</code></h1>\n\n<p>Since Java 8, use the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/Month.html\" rel=\"nofollow noreferrer\"><code>Month</code></a> enum. The <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/Month.html#getDisplayName(java.time.format.TextStyle,java.util.Locale)\" rel=\"nofollow noreferrer\"><code>getDisplayName</code></a> method automatically localizes the name of the month. </p>\n\n<p>Pass:</p>\n\n<ul>\n<li>A <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/format/TextStyle.html\" rel=\"nofollow noreferrer\"><code>TextStyle</code></a> to determine how long or how abbreviated.</li>\n<li>A <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Locale.html\" rel=\"nofollow noreferrer\"><code>Locale</code></a> to specify the human language used in translation, and the cultural norms used for abbreviation, punctuation, etc.</li>\n</ul>\n\n<p>Example:</p>\n\n\n\n<pre class=\"lang-java prettyprint-override\"><code>public static String getMonthStandaloneName(Month month) {\n    return month.getDisplayName(\n        TextStyle.FULL_STANDALONE, \n        Locale.getDefault()\n    );\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1451886,"reputation":1580,"user_id":1368562,"accept_rate":85,"display_name":" "},"score":1,"creation_date":1532446335,"post_id":47649679,"comment_id":89973474,"body_markdown":"This works perfectly, the comments are just a tiny bit completely wrong though","body":"This works perfectly, the comments are just a tiny bit completely wrong though"}],"tags":[],"owner":{"account_id":9014084,"reputation":3170,"user_id":6717610,"display_name":"Samet &#214;ZTOPRAK"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1538374898,"creation_date":1512464592,"answer_id":47649679,"question_id":14832151,"body_markdown":"This code has language support.\r\nI had used them in Android App.\r\n\r\n    String[] mons = new DateFormatSymbols().getShortMonths();//Jan,Feb,Mar,... \r\n\r\n    String[] months = new DateFormatSymbols().getMonths();//January,Februaty,March,...","title":"How can I get Month Name from Calendar?","body":"<p>This code has language support.\nI had used them in Android App.</p>\n\n<pre><code>String[] mons = new DateFormatSymbols().getShortMonths();//Jan,Feb,Mar,... \n\nString[] months = new DateFormatSymbols().getMonths();//January,Februaty,March,...\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1530268219,"post_id":51080625,"comment_id":89186628,"body_markdown":"Simple and direct suggestion, thanks. Your code doesnt compile. You will either have to declare the return type `Month` or apply `toString` to the result before returning it.","body":"Simple and direct suggestion, thanks. Your code doesnt compile. You will either have to declare the return type <code>Month</code> or apply <code>toString</code> to the result before returning it."}],"tags":[],"owner":{"account_id":13858935,"reputation":29,"user_id":10005038,"display_name":"mxhc"},"comment_count":1,"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1530181838,"creation_date":1530181838,"answer_id":51080625,"question_id":14832151,"body_markdown":"It returns English name of the month.\r\n04 returns APRIL and so on.\r\n\r\n    String englishMonth (int month){\r\n            return Month.of(month);\r\n        }\r\n\r\n","title":"How can I get Month Name from Calendar?","body":"<p>It returns English name of the month.\n04 returns APRIL and so on.</p>\n\n<pre><code>String englishMonth (int month){\n        return Month.of(month);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10024548,"reputation":729,"user_id":7413086,"display_name":"kushal Baldev"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1636862443,"creation_date":1542015005,"answer_id":53259230,"question_id":14832151,"body_markdown":"**One way:**\r\n \r\nWe have `Month` API in Java (`java.time.Month`). We can get by using `Month.of(month);`\r\n\r\nHere, the `Month` are indexed as numbers so either you can provide by `Month.JANUARY` or provide an index in the above API such as 1, 2, 3, 4. \r\n\r\n**Second way:**\r\n\r\n```lang-java\r\nZonedDateTime.now().getMonth();\r\n```\r\n\r\nThis is available in `java.time.ZonedDateTime`.\r\n\r\n","title":"How can I get Month Name from Calendar?","body":"<p><strong>One way:</strong></p>\n<p>We have <code>Month</code> API in Java (<code>java.time.Month</code>). We can get by using <code>Month.of(month);</code></p>\n<p>Here, the <code>Month</code> are indexed as numbers so either you can provide by <code>Month.JANUARY</code> or provide an index in the above API such as 1, 2, 3, 4.</p>\n<p><strong>Second way:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>ZonedDateTime.now().getMonth();\n</code></pre>\n<p>This is available in <code>java.time.ZonedDateTime</code>.</p>\n"},{"tags":[],"owner":{"account_id":5184894,"reputation":786,"user_id":4149548,"accept_rate":50,"display_name":"Felipe Castilhos"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1636862490,"creation_date":1547128584,"answer_id":54130258,"question_id":14832151,"body_markdown":"I created a Kotlin extension based on responses in this topic and using the `DateFormatSymbols` answers you get a localized response.\r\n\r\n```lang-java\r\nfun Date.toCalendar(): Calendar {\r\n    val calendar = Calendar.getInstance()\r\n    calendar.time = this\r\n    return calendar\r\n}\r\n\r\n\r\nfun Date.getMonthName(): String {\r\n    val month = toCalendar()[Calendar.MONTH]\r\n    val dfs = DateFormatSymbols()\r\n    val months = dfs.months\r\n    return months[month]\r\n}\r\n```","title":"How can I get Month Name from Calendar?","body":"<p>I created a Kotlin extension based on responses in this topic and using the <code>DateFormatSymbols</code> answers you get a localized response.</p>\n<pre class=\"lang-java prettyprint-override\"><code>fun Date.toCalendar(): Calendar {\n    val calendar = Calendar.getInstance()\n    calendar.time = this\n    return calendar\n}\n\n\nfun Date.getMonthName(): String {\n    val month = toCalendar()[Calendar.MONTH]\n    val dfs = DateFormatSymbols()\n    val months = dfs.months\n    return months[month]\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12003072,"reputation":119,"user_id":10011802,"display_name":"mahadev gouda"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1636862460,"creation_date":1552999716,"answer_id":55241462,"question_id":14832151,"body_markdown":"```lang-java\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.Calendar;\r\n\r\n\r\nCalendar cal = Calendar.getInstance();\r\nString currentdate=new SimpleDateFormat(&quot;dd-MMM&quot;).format(cal.getTime());\r\n```","title":"How can I get Month Name from Calendar?","body":"<pre class=\"lang-java prettyprint-override\"><code>import java.text.SimpleDateFormat;\nimport java.util.Calendar;\n\n\nCalendar cal = Calendar.getInstance();\nString currentdate=new SimpleDateFormat(&quot;dd-MMM&quot;).format(cal.getTime());\n</code></pre>\n"},{"comments":[{"owner":{"account_id":10377471,"reputation":1207,"user_id":7653274,"display_name":"MCO"},"score":0,"creation_date":1578565078,"post_id":56017515,"comment_id":105482811,"body_markdown":"doesn&#39;t `Month` start its index with January = 1, whereas Calendar starts with January = 0? Wouldn&#39;t `Month.of(calendar.get(Calendar.MONTH));` fail in the case of january?","body":"doesn&#39;t <code>Month</code> start its index with January = 1, whereas Calendar starts with January = 0? Wouldn&#39;t <code>Month.of(calendar.get(Calendar.MONTH));</code> fail in the case of january?"}],"tags":[],"owner":{"account_id":8090685,"reputation":794,"user_id":6096715,"accept_rate":60,"display_name":"JibinNajeeb"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1565185849,"creation_date":1557213860,"answer_id":56017515,"question_id":14832151,"body_markdown":"I found this much easier(https://docs.oracle.com/javase/tutorial/datetime/iso/enum.html)\r\n\r\n\tprivate void getCalendarMonth(Date date) {\t\t\r\n\t\tCalendar calendar = Calendar.getInstance();\r\n\t\tcalendar.setTime(date);\r\n\t\tMonth month = Month.of(calendar.get(Calendar.MONTH));\t\t\r\n\t\tLocale locale = Locale.getDefault();\r\n\t\tSystem.out.println(month.getDisplayName(TextStyle.FULL, locale));\r\n        System.out.println(month.getDisplayName(TextStyle.NARROW, locale));\r\n        System.out.println(month.getDisplayName(TextStyle.SHORT, locale));\r\n\t}\r\n\r\n\r\n","title":"How can I get Month Name from Calendar?","body":"<p>I found this much easier(<a href=\"https://docs.oracle.com/javase/tutorial/datetime/iso/enum.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/tutorial/datetime/iso/enum.html</a>)</p>\n\n<pre><code>private void getCalendarMonth(Date date) {      \n    Calendar calendar = Calendar.getInstance();\n    calendar.setTime(date);\n    Month month = Month.of(calendar.get(Calendar.MONTH));       \n    Locale locale = Locale.getDefault();\n    System.out.println(month.getDisplayName(TextStyle.FULL, locale));\n    System.out.println(month.getDisplayName(TextStyle.NARROW, locale));\n    System.out.println(month.getDisplayName(TextStyle.SHORT, locale));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11389330,"reputation":642,"user_id":8349963,"display_name":"Milad jalali"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1607527991,"creation_date":1607527991,"answer_id":65219863,"question_id":14832151,"body_markdown":"    Calender cal = Calendar.getInstance(Locale.ENGLISH)\r\n    String[] mons = new DateFormatSymbols(Locale.ENGLISH).getShortMonths();\r\n    int m = cal.get(Calendar.MONTH);\r\n    String mName = mons[m];","title":"How can I get Month Name from Calendar?","body":"<pre><code>Calender cal = Calendar.getInstance(Locale.ENGLISH)\nString[] mons = new DateFormatSymbols(Locale.ENGLISH).getShortMonths();\nint m = cal.get(Calendar.MONTH);\nString mName = mons[m];\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3908557,"reputation":95,"user_id":3234532,"display_name":"Naveen Roy"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1623256657,"creation_date":1623256657,"answer_id":67908311,"question_id":14832151,"body_markdown":"Easiest Way \r\n\r\n    import java.text.DateFormatSymbols;\r\n    \r\n    int month = 3; // March\r\n    System.out.println(new DateFormatSymbols().getMonths()[month-1]);\r\n\r\n","title":"How can I get Month Name from Calendar?","body":"<p>Easiest Way</p>\n<pre><code>import java.text.DateFormatSymbols;\n\nint month = 3; // March\nSystem.out.println(new DateFormatSymbols().getMonths()[month-1]);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10600166,"reputation":162,"user_id":7807339,"display_name":"Junaid Bashir"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636861768,"creation_date":1632821407,"answer_id":69359156,"question_id":14832151,"body_markdown":"For full name of month:\r\n\r\n```lang-java\r\nval calendar = Calendar.getInstance()\r\ncalendar.timeInMillis = date\r\nreturn calendar.getDisplayName(Calendar.MONTH, Calendar.Long, Locale.ENGLISH)!!.toString()\r\n```\r\n\r\nAnd for short name of month:\r\n\r\n```lang-java\r\nval calendar = Calendar.getInstance()\r\ncalendar.timeInMillis = date\r\nreturn calendar.getDisplayName(Calendar.MONTH, Calendar.SHORT, Locale.ENGLISH)!!.toString()\r\n```","title":"How can I get Month Name from Calendar?","body":"<p>For full name of month:</p>\n<pre class=\"lang-java prettyprint-override\"><code>val calendar = Calendar.getInstance()\ncalendar.timeInMillis = date\nreturn calendar.getDisplayName(Calendar.MONTH, Calendar.Long, Locale.ENGLISH)!!.toString()\n</code></pre>\n<p>And for short name of month:</p>\n<pre class=\"lang-java prettyprint-override\"><code>val calendar = Calendar.getInstance()\ncalendar.timeInMillis = date\nreturn calendar.getDisplayName(Calendar.MONTH, Calendar.SHORT, Locale.ENGLISH)!!.toString()\n</code></pre>\n"}],"owner":{"account_id":1131741,"reputation":5562,"user_id":1117668,"accept_rate":80,"display_name":"ogzd"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":301144,"favorite_count":0,"down_vote_count":0,"up_vote_count":111,"accepted_answer_id":14832267,"answer_count":22,"score":111,"last_activity_date":1688683568,"creation_date":1360670644,"question_id":14832151,"body_markdown":"Is there a oneliner to get the name of the month when we know: \r\n\r\n```lang-java\r\nint monthNumber  = calendar.get(Calendar.MONTH)\r\n``` \r\n\r\nOr what is the easiest way?","title":"How can I get Month Name from Calendar?","body":"<p>Is there a oneliner to get the name of the month when we know:</p>\n<pre class=\"lang-java prettyprint-override\"><code>int monthNumber  = calendar.get(Calendar.MONTH)\n</code></pre>\n<p>Or what is the easiest way?</p>\n"},{"tags":["java","user-interface","javafx"],"comments":[{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1687976503,"post_id":76574766,"comment_id":135013412,"body_markdown":"Search among these [examples](https://stackoverflow.com/questions/tagged/javafx) for ways to study each aspect in isolation; this [example](https://stackoverflow.com/q/76487091/230513)  of profiling might help you examine the size issue.","body":"Search among these <a href=\"https://stackoverflow.com/questions/tagged/javafx\">examples</a> for ways to study each aspect in isolation; this <a href=\"https://stackoverflow.com/q/76487091/230513\">example</a>  of profiling might help you examine the size issue."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":3,"creation_date":1687979726,"post_id":76574766,"comment_id":135014019,"body_markdown":"Maybe you don&#39;t want a `TableView` at all, perhaps you want a spreadsheet, either by a ControlsFX [SpreadsheetView](https://controlsfx.github.io/javadoc/11.1.0/org.controlsfx.controls/org/controlsfx/control/spreadsheet/SpreadsheetView.html) or a WebView embedded Google Docs (if that works in JavaFX), or some other technology.","body":"Maybe you don&#39;t want a <code>TableView</code> at all, perhaps you want a spreadsheet, either by a ControlsFX <a href=\"https://controlsfx.github.io/javadoc/11.1.0/org.controlsfx.controls/org/controlsfx/control/spreadsheet/SpreadsheetView.html\" rel=\"nofollow noreferrer\">SpreadsheetView</a> or a WebView embedded Google Docs (if that works in JavaFX), or some other technology."},{"owner":{"account_id":28913070,"reputation":1,"user_id":22145647,"display_name":"Xavier D."},"score":0,"creation_date":1687990016,"post_id":76574766,"comment_id":135015599,"body_markdown":"@jewelsea thanks for the suggestion, I need to study this. I had in mind to limit dependencies and try to stay javafx only but if it really has all the needed features then the additional dependency is worth it. I need to experiment for a while before validating this solution.","body":"@jewelsea thanks for the suggestion, I need to study this. I had in mind to limit dependencies and try to stay javafx only but if it really has all the needed features then the additional dependency is worth it. I need to experiment for a while before validating this solution."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":4,"creation_date":1687990234,"post_id":76574766,"comment_id":135015620,"body_markdown":"One &quot;solution&quot; you mention is using Canvas.  I do not recommend that at all.  There is no off-the-shelf component using Canvas that does what you want (or anything remotely close to it), so you would have to build such a solution from scratch, which would be a tremendous amount of work.  Plus, if using JavaFX, the scene graph is probably better suited for this component than a Canvas anyway.","body":"One &quot;solution&quot; you mention is using Canvas.  I do not recommend that at all.  There is no off-the-shelf component using Canvas that does what you want (or anything remotely close to it), so you would have to build such a solution from scratch, which would be a tremendous amount of work.  Plus, if using JavaFX, the scene graph is probably better suited for this component than a Canvas anyway."}],"answers":[{"tags":[],"owner":{"account_id":28913070,"reputation":1,"user_id":22145647,"display_name":"Xavier D."},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1688682787,"creation_date":1688682787,"answer_id":76632899,"question_id":76574766,"body_markdown":"From the ideas given in the comments and further research, I would say that :\r\n\r\n - Tableview is definitely not adapted, if I want a simple similar solution on the view part, ControlsFX SpreadsheetView would do a better job with row and column headers that can be customized\r\n - Drawing on canvas is too much work, I may consider it if I encounter memory problems\r\n - I have not seen much examples using a webview in javafx, unless someone can tell me otherwise, this solution is considered as not adapted (maybe not possible)\r\n - the remaining solution, and the one that I will chose for now, will be to create my table in a scene using some kind of grid layout and the most appropriated components for headers and cells","title":"Creating a double entry table editor in javaFX : TableView, canvas or webview?","body":"<p>From the ideas given in the comments and further research, I would say that :</p>\n<ul>\n<li>Tableview is definitely not adapted, if I want a simple similar solution on the view part, ControlsFX SpreadsheetView would do a better job with row and column headers that can be customized</li>\n<li>Drawing on canvas is too much work, I may consider it if I encounter memory problems</li>\n<li>I have not seen much examples using a webview in javafx, unless someone can tell me otherwise, this solution is considered as not adapted (maybe not possible)</li>\n<li>the remaining solution, and the one that I will chose for now, will be to create my table in a scene using some kind of grid layout and the most appropriated components for headers and cells</li>\n</ul>\n"}],"owner":{"account_id":28913070,"reputation":1,"user_id":22145647,"display_name":"Xavier D."},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76632899,"answer_count":1,"score":0,"last_activity_date":1688682787,"creation_date":1687967068,"question_id":76574766,"body_markdown":"I am trying to create an editor in javafx for data modelled as a boolean double entry table : basically I have a table with named rows, named columns and a checkbox in each cell.\r\nIn terms of features I would need to be able to:\r\n- check/uncheck a cell\r\n- rename/add/remove a column/row\r\n- load big tables (&gt; 1000 rows and columns)\r\n- select rows and colums to extract a sub-table\r\n\r\n\r\nI have tried to use the TableView class, but it&#39;s focused on columns, and I don&#39;t see any way to add row names in the same way as column names. There is still the solution to add a first column with row names, but it is not ideal. \r\nSo as far as I have looked, I found 2 other solutions: \r\n- drawing my table on a Canvas. As I understand it would allow me to do anything I want, but I would need to implement everything and I am not sure how to deal with really big canvas (how to not dr&#224;w the entire table) \r\n- draw my table in html and use a webview to display it. As I understand that would help with the drawing, but would require html, javascript and the communication with rest of the app does not appear to be easy.\r\nI have not much experience with JavaFX at the moment and I am not sure which would be the most practical or if another solution would be better. What do you think would be the best?\r\n\r\n","title":"Creating a double entry table editor in javaFX : TableView, canvas or webview?","body":"<p>I am trying to create an editor in javafx for data modelled as a boolean double entry table : basically I have a table with named rows, named columns and a checkbox in each cell.\nIn terms of features I would need to be able to:</p>\n<ul>\n<li>check/uncheck a cell</li>\n<li>rename/add/remove a column/row</li>\n<li>load big tables (&gt; 1000 rows and columns)</li>\n<li>select rows and colums to extract a sub-table</li>\n</ul>\n<p>I have tried to use the TableView class, but it's focused on columns, and I don't see any way to add row names in the same way as column names. There is still the solution to add a first column with row names, but it is not ideal.\nSo as far as I have looked, I found 2 other solutions:</p>\n<ul>\n<li>drawing my table on a Canvas. As I understand it would allow me to do anything I want, but I would need to implement everything and I am not sure how to deal with really big canvas (how to not drw the entire table)</li>\n<li>draw my table in html and use a webview to display it. As I understand that would help with the drawing, but would require html, javascript and the communication with rest of the app does not appear to be easy.\nI have not much experience with JavaFX at the moment and I am not sure which would be the most practical or if another solution would be better. What do you think would be the best?</li>\n</ul>\n"},{"tags":["java","generics","warnings"],"comments":[{"owner":{"account_id":10732579,"reputation":666,"user_id":7898202,"display_name":"MorganS42"},"score":1,"creation_date":1688676019,"post_id":76632071,"comment_id":135109703,"body_markdown":"What is the question?","body":"What is the question?"},{"owner":{"account_id":1615315,"reputation":7242,"user_id":1493192,"accept_rate":65,"display_name":"Gianni Spear"},"score":0,"creation_date":1688676229,"post_id":76632071,"comment_id":135109750,"body_markdown":"To understand the reason because Raw use of parameterized class is present in my code and where is the part of the code I wrong","body":"To understand the reason because Raw use of parameterized class is present in my code and where is the part of the code I wrong"},{"owner":{"account_id":10732579,"reputation":666,"user_id":7898202,"display_name":"MorganS42"},"score":0,"creation_date":1688676647,"post_id":76632071,"comment_id":135109827,"body_markdown":"Does this answer your question? [What is a raw type and why shouldn&#39;t we use it?](https://stackoverflow.com/questions/2770321/what-is-a-raw-type-and-why-shouldnt-we-use-it)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/2770321/what-is-a-raw-type-and-why-shouldnt-we-use-it\">What is a raw type and why shouldn&#39;t we use it?</a>"},{"owner":{"account_id":1615315,"reputation":7242,"user_id":1493192,"accept_rate":65,"display_name":"Gianni Spear"},"score":0,"creation_date":1688676793,"post_id":76632071,"comment_id":135109851,"body_markdown":"yes I already view, but sorry this answer did not helped me","body":"yes I already view, but sorry this answer did not helped me"},{"owner":{"account_id":1615315,"reputation":7242,"user_id":1493192,"accept_rate":65,"display_name":"Gianni Spear"},"score":0,"creation_date":1688676824,"post_id":76632071,"comment_id":135109854,"body_markdown":"but thanks for your effort","body":"but thanks for your effort"},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1688681208,"post_id":76632071,"comment_id":135110480,"body_markdown":"What&#39;s the point of `E`? Shouldn&#39;t `tt` be a `T`? And what purpose does `t` serve?","body":"What&#39;s the point of <code>E</code>? Shouldn&#39;t <code>tt</code> be a <code>T</code>? And what purpose does <code>t</code> serve?"}],"answers":[{"comments":[{"owner":{"account_id":1615315,"reputation":7242,"user_id":1493192,"accept_rate":65,"display_name":"Gianni Spear"},"score":0,"creation_date":1688678702,"post_id":76632584,"comment_id":135110127,"body_markdown":"Sorry your answer give me an error","body":"Sorry your answer give me an error"},{"owner":{"account_id":7292020,"reputation":868,"user_id":5558106,"display_name":"Serg Vasylchak"},"score":0,"creation_date":1688678980,"post_id":76632584,"comment_id":135110149,"body_markdown":"What is a type of &#39;me&#39; field?","body":"What is a type of &#39;me&#39; field?"},{"owner":{"account_id":1615315,"reputation":7242,"user_id":1493192,"accept_rate":65,"display_name":"Gianni Spear"},"score":0,"creation_date":1688679131,"post_id":76632584,"comment_id":135110174,"body_markdown":"InstantiatorUnitConverter","body":"InstantiatorUnitConverter"},{"owner":{"account_id":1615315,"reputation":7242,"user_id":1493192,"accept_rate":65,"display_name":"Gianni Spear"},"score":0,"creation_date":1688679163,"post_id":76632584,"comment_id":135110183,"body_markdown":"note: update question with the error from your answer","body":"note: update question with the error from your answer"},{"owner":{"account_id":1615315,"reputation":7242,"user_id":1493192,"accept_rate":65,"display_name":"Gianni Spear"},"score":0,"creation_date":1688679766,"post_id":76632584,"comment_id":135110268,"body_markdown":"private InstantiatorUnitConverter&lt;T&gt; me -&gt;  create an objct with  \n\npublic InstantiatorUnitConverter(){\n        o = &quot;&quot;;\n        v = -1;\n        t = null;\n        ts = &quot;&quot;;\n        d = true;\n    }","body":"private InstantiatorUnitConverter&lt;T&gt; me -&gt;  create an objct with    public InstantiatorUnitConverter(){         o = &quot;&quot;;         v = -1;         t = null;         ts = &quot;&quot;;         d = true;     }"}],"tags":[],"owner":{"account_id":7292020,"reputation":868,"user_id":5558106,"display_name":"Serg Vasylchak"},"comment_count":5,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1688682709,"creation_date":1688678427,"answer_id":76632584,"question_id":76632071,"body_markdown":"```\r\n    protected final &lt;M,E&gt; M storeValue(M t, double value, E tt){\r\n        me = new InstantiatorUnitConverter&lt;E&gt;(value, tt, st(tt));\r\n\r\n        return t;\r\n    }\r\n```\r\n\r\nRaw use of parameterized class &#39;AClass&#39; means you have a `class AClass&lt;T&gt;` parameterized definition, but reference it without a &quot;diamond&quot; - `AClass a = new AClass()`\r\n\r\nSome more examples of raw use:\r\n\r\n```\r\n\t\tList list = new ArrayList&lt;&gt;(); // --&gt; List&lt;?&gt; list\r\n\t\tList&lt;String&gt; list = new ArrayList(); // --&gt; new ArrayList&lt;&gt;();\r\n\t\tFunction function = o -&gt; o.toString(); // --&gt; Function&lt;Object, String&gt;\r\n```\r\n\r\n\r\nEDIT \r\n\r\nYou have a generic class \r\n```\r\nclass BaseUnitConverter&lt;T&gt; {\r\n\r\n\tprivate InstantiatorUnitConverter&lt;T&gt; me;\r\n\r\n\tprotected final &lt;M, E&gt; M storeValue(M t, double value, E tt) {\r\n\t\tthis.me = new InstantiatorUnitConverter&lt;E&gt;(value, tt, st(tt));\r\n\t\treturn t;\r\n\t}\r\n}\r\n```\r\n\r\nThe problem is that you pass the `E` type to be assigned to a `T`-typed reference.\r\n\r\nIt is the same as if you did `List&lt;String&gt; list = new ArrayList&lt;Integer&gt;()`;\r\n\r\n\r\nI now see 2 ways to fix it, but it depends on your specifics.\r\n\r\n1) Make storeValue accept `T` as a parameter (you will lose type flexibility though)\r\n```\r\nclass BaseUnitConverter&lt;T&gt; {\r\n\r\n    private InstantiatorUnitConverter&lt;T&gt; me;\r\n\r\n    protected final &lt;M&gt; M storeValue(M t, double value, T tt) {\r\n        this.me = new InstantiatorUnitConverter&lt;&gt;(value, tt, st(tt));\r\n        return t;\r\n    }\r\n}\r\n```\r\n\r\n2) &quot;De-generify&quot; the BaseUnitConverter class (you will have to cast at some point, the same way it works in Java Collections)\r\n```\r\nclass BaseUnitConverter {\r\n\r\n    private InstantiatorUnitConverter&lt;?&gt; me;\r\n\r\n    protected final &lt;M, E&gt; M storeValue(M t, double value, E tt) {\r\n        this.me = new InstantiatorUnitConverter&lt;&gt;(value, tt, st(tt));\r\n        return t;\r\n    }\r\n\r\n    // You will lose the type here\r\n    public InstantiatorUnitConverter&lt;?&gt; getIstantiator(){\r\n        return this.me;\r\n    }\r\n\r\n    // Or generify the getter \r\n    // May throw java.lang.ClassCastException if referencing with the wrong type\r\n    // Java-collections-like style (e.g., see ArrayList)\r\n\t@SuppressWarnings(&quot;unchecked&quot;)\r\n\tpublic &lt;T&gt; InstantiatorUnitConverter&lt;T&gt; getIstantiator() {\r\n\t\treturn (InstantiatorUnitConverter&lt;T&gt;) this.me;\r\n\t}\r\n}\r\n```","title":"Raw use of parameterized class in Java","body":"<pre><code>    protected final &lt;M,E&gt; M storeValue(M t, double value, E tt){\n        me = new InstantiatorUnitConverter&lt;E&gt;(value, tt, st(tt));\n\n        return t;\n    }\n</code></pre>\n<p>Raw use of parameterized class 'AClass' means you have a <code>class AClass&lt;T&gt;</code> parameterized definition, but reference it without a &quot;diamond&quot; - <code>AClass a = new AClass()</code></p>\n<p>Some more examples of raw use:</p>\n<pre><code>        List list = new ArrayList&lt;&gt;(); // --&gt; List&lt;?&gt; list\n        List&lt;String&gt; list = new ArrayList(); // --&gt; new ArrayList&lt;&gt;();\n        Function function = o -&gt; o.toString(); // --&gt; Function&lt;Object, String&gt;\n</code></pre>\n<p>EDIT</p>\n<p>You have a generic class</p>\n<pre><code>class BaseUnitConverter&lt;T&gt; {\n\n    private InstantiatorUnitConverter&lt;T&gt; me;\n\n    protected final &lt;M, E&gt; M storeValue(M t, double value, E tt) {\n        this.me = new InstantiatorUnitConverter&lt;E&gt;(value, tt, st(tt));\n        return t;\n    }\n}\n</code></pre>\n<p>The problem is that you pass the <code>E</code> type to be assigned to a <code>T</code>-typed reference.</p>\n<p>It is the same as if you did <code>List&lt;String&gt; list = new ArrayList&lt;Integer&gt;()</code>;</p>\n<p>I now see 2 ways to fix it, but it depends on your specifics.</p>\n<ol>\n<li>Make storeValue accept <code>T</code> as a parameter (you will lose type flexibility though)</li>\n</ol>\n<pre><code>class BaseUnitConverter&lt;T&gt; {\n\n    private InstantiatorUnitConverter&lt;T&gt; me;\n\n    protected final &lt;M&gt; M storeValue(M t, double value, T tt) {\n        this.me = new InstantiatorUnitConverter&lt;&gt;(value, tt, st(tt));\n        return t;\n    }\n}\n</code></pre>\n<ol start=\"2\">\n<li>&quot;De-generify&quot; the BaseUnitConverter class (you will have to cast at some point, the same way it works in Java Collections)</li>\n</ol>\n<pre><code>class BaseUnitConverter {\n\n    private InstantiatorUnitConverter&lt;?&gt; me;\n\n    protected final &lt;M, E&gt; M storeValue(M t, double value, E tt) {\n        this.me = new InstantiatorUnitConverter&lt;&gt;(value, tt, st(tt));\n        return t;\n    }\n\n    // You will lose the type here\n    public InstantiatorUnitConverter&lt;?&gt; getIstantiator(){\n        return this.me;\n    }\n\n    // Or generify the getter \n    // May throw java.lang.ClassCastException if referencing with the wrong type\n    // Java-collections-like style (e.g., see ArrayList)\n    @SuppressWarnings(&quot;unchecked&quot;)\n    public &lt;T&gt; InstantiatorUnitConverter&lt;T&gt; getIstantiator() {\n        return (InstantiatorUnitConverter&lt;T&gt;) this.me;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1615315,"reputation":7242,"user_id":1493192,"accept_rate":65,"display_name":"Gianni Spear"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":470,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1688682709,"creation_date":1688672322,"question_id":76632071,"body_markdown":"I have two classes that use generics in Java in order to perform conversions between units of measure. In the BaseUnitConverter class I have two warnings, from the intellij IDE, that say:\r\n\r\n\r\n    Raw use of parameterized class &#39;InstantiatorUnitConverter&#39; \r\n    Unchecked assignment: &#39;org.cnr.lambertools.utils.unitconverter.InstantiatorUnitConverter&#39; to &#39;org.cnr.lambertools.utils.unitconverter.InstantiatorUnitConverter&lt;T&gt;&#39; \r\n    Unchecked call to &#39;InstantiatorUnitConverter(Object, T, String)&#39; as a member of raw type &#39;org.cnr.lambertools.utils.unitconverter.InstantiatorUnitConverter&#39; \r\n\r\nfor methods:\r\n\r\n    protected final &lt;M,E&gt; M storeValue(M t, double value, E tt){\r\n            me = new InstantiatorUnitConverter(value, tt, st(tt));\r\n            return t;\r\n        }\r\n\r\nand\r\n\r\n    protected final &lt;M, E&gt; M storeValue(M t, Object value, E tt){\r\n        me = new InstantiatorUnitConverter(value, tt, st(tt));\r\n        return t;\r\n    }\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThe basic classes of this conversion system are as follows:\r\n\r\n    import java.io.Serializable;\r\n    \r\n    /**\r\n     * Instantiated variables from new UnitConverter instance (Only used in class BaseUnitConverter).\r\n     */\r\n    public final class InstantiatorUnitConverter&lt;T&gt; implements Serializable {\r\n        private final Object o;      //Only used in DataType and NumericBase measurements (classes), user passed &quot;from&quot; value (Object). When this is the case, variable &quot;v&quot; is not used.\r\n        private final double v;      //User passed &quot;from&quot; value (double). When this is the case, variable &quot;o&quot; is not used.\r\n        private final T t;        //Enum constant value representing the &quot;from&quot; method of the measurement used.\r\n        private final String ts;  //String value of enum constant representing the &quot;from&quot; method of the measurement used.\r\n        private final boolean d;  //Used in class B.java &quot;getValuePassed()&quot;. True if &quot;from&quot; value was a double, false for Object (Object only used in DataType and NumericBase measurements (classes)).\r\n    \r\n        /**\r\n         * Empty constructor only called when instantiating from class B.java\r\n         */\r\n        public InstantiatorUnitConverter(){\r\n            o = &quot;&quot;;\r\n            v = -1;\r\n            t = null;\r\n            ts = &quot;&quot;;\r\n            d = true;\r\n        }\r\n    \r\n        /**\r\n         * Only used in class B.java when measurement &quot;from&quot; method only converts numbers.\r\n         * All measurements other than DataType and NumericBase use this constructor.\r\n         * @param value User passed &quot;from&quot; value (double).\r\n         * @param enumConstant Enum constant value representing the &quot;from&quot; method of the measurement used.\r\n         * @param enumTag String value of enum constant representing the &quot;from&quot; method of the measurement used.\r\n         */\r\n        public InstantiatorUnitConverter(double value, T enumConstant, String enumTag){\r\n            o = &quot;&quot;;     //This variable (Object value) will not be used when this constructor is called, default it to an empty string.\r\n            v = value;\r\n            t = enumConstant;\r\n            ts = enumTag;\r\n            d = true;   //Variable d set to true as &quot;from&quot; value passed is a numeric type not an Object.\r\n        }\r\n    \r\n        /**\r\n         * Only used in class B.java when measurement &quot;from&quot; method can convert more than numbers and an Object is passed as the value.\r\n         * Only measurements DataType and NumericBase use this constructor.\r\n         * @param value User passed &quot;from&quot; value (Object).\r\n         * @param enumConstant Enum constant value representing the &quot;from&quot; method of the measurement used.\r\n         * @param enumTag String value of enum constant representing the &quot;from&quot; method of the measurement used.\r\n         */\r\n        public InstantiatorUnitConverter(Object value, T enumConstant, String enumTag){\r\n            o = value;\r\n            v = -1;     //This variable (double value) will not be used when this constructor is called, default it to -1\r\n            t = enumConstant;\r\n            ts = enumTag;\r\n            d = false;  //Variable d set to false as &quot;from&quot; value passed is an Object not double.\r\n        }\r\n    \r\n    \r\n        public Object getO() {\r\n            return o;\r\n        }\r\n    \r\n        public double getV() {\r\n            return v;\r\n        }\r\n    \r\n        public T getT() {\r\n            return t;\r\n        }\r\n    \r\n        public String getTs() {\r\n            return ts;\r\n        }\r\n    \r\n        public boolean isD() {\r\n            return d;\r\n        }\r\n    }\r\n\r\nand \r\n\r\n\r\n    import java.io.Serializable;\r\n    \r\n    /**\r\n     * Generic base class for most UnitConverter measurement classes.\r\n     */\r\n    public class BaseUnitConverter&lt;T&gt; implements Serializable {\r\n    \r\n        private InstantiatorUnitConverter&lt;T&gt; me; //Instantiate class A.java for variables needed to perform conversions.\r\n    \r\n        public BaseUnitConverter() {\r\n            this.me = new InstantiatorUnitConverter&lt;&gt;();\r\n        }\r\n    \r\n        public InstantiatorUnitConverter&lt;T&gt; getIstantiator(){\r\n            return this.me;\r\n        }\r\n    \r\n        /**\r\n         * Returns value initially passed into the measurement&#39;s &quot;from&quot; method.\r\n         */\r\n        public final Object getValuePassed(){\r\n            return (me.isD()) ? me.getV() : me.getO();    //true returns numeric value passed, false returns Object passed.\r\n        }\r\n    \r\n        /**\r\n         * Returns the enum constant value representing the &quot;from&quot; method of the measurement used.\r\n         */\r\n        public final String getTypeConstantPassed(){\r\n    \r\n            return me.getTs();\r\n        }\r\n    \r\n        /**\r\n         * Stores the needed values to do conversions of the measurement.\r\n         * This overload of the method is used in &quot;from&quot; methods in every measurement class other than Anything(), DataType(), and NumericBase().\r\n         *\r\n         * @param &lt;M&gt; Class context of measurement passed (usually &quot;this&quot; is passed from caller).\r\n         * @param &lt;E&gt; Enum constant value representing the &quot;from&quot; method of the measurement used.\r\n         * @param t Class context of measurement passed (usually &quot;this&quot; is passed from caller).\r\n         * @param value User passed &quot;from&quot; value (double).\r\n         * @param tt Enum constant value representing the &quot;from&quot; method of the measurement used.\r\n         * @return class context passed in so variable like &quot;UnitOf.Length len&quot; can be used as the variable type\r\n         */\r\n        protected final &lt;M,E&gt; M storeValue(M t, double value, E tt){\r\n            me = new InstantiatorUnitConverter(value, tt, st(tt));\r\n            return t;\r\n        }\r\n    \r\n        /**\r\n         * Stores the needed values to do conversions of the measurement.\r\n         * This overload of the method is used only in DataType and NumericBase as Objects can be passed as &quot;from&quot; values.\r\n         *\r\n         * @param &lt;M&gt; Class context of measurement passed (usually &quot;this&quot; is passed from caller).\r\n         * @param &lt;E&gt; Enum constant value representing the &quot;from&quot; method of the measurement used.\r\n         * @param t Class context of measurement passed (usually &quot;this&quot; is passed from caller).\r\n         * @param value User passed &quot;from&quot; value (Object).\r\n         * @param tt Enum constant value representing the &quot;from&quot; method of the measurement used.\r\n         * @return class context passed in so variable like &quot;UnitOf.DataType dt&quot; can be used as the variable type\r\n         */\r\n        protected final &lt;M, E&gt; M storeValue(M t, Object value, E tt){\r\n            me = new InstantiatorUnitConverter(value, tt, st(tt));\r\n            return t;\r\n        }\r\n    \r\n        /**\r\n         * Gets and returns the string value of constant representing the &quot;from&quot; method of the measurement used.\r\n         */\r\n        private &lt;E&gt; String st(E tt){\r\n            String unitType = &quot;&quot;;\r\n            try{\r\n                unitType = tt.toString();\r\n            } catch(Exception ignored){ }\r\n            return unitType;\r\n        }\r\n    \r\n        /**\r\n         * Used by every measurement class that converts just numbers (Anything(), DataType(), NumericBase() do not apply here).\r\n         * Method performs the full conversion of taking the user defined &quot;from&quot; value and converting it into the user desired &quot;to&quot; value.\r\n         * @param a Enum constant value of &quot;to&quot; unit. Unit being converted into conversion constant value.\r\n         * @param b Enum constant value of &quot;from&quot; unit. Unit starting from conversion constant value.\r\n         * @return Finished conversion. &quot;From&quot; converted into &quot;to&quot; value.\r\n         */\r\n        protected final double k(double a, double b){\r\n    \r\n            return k(a,b,true);\r\n        }\r\n    \r\n        /**\r\n         * Used by every measurement class that converts just numbers (Anything(), DataType(), NumericBase() do not apply here)\r\n         * Method performs the full conversion of taking the user defined &quot;from&quot; value and converting it into the user desired &quot;to&quot; value.\r\n         * @param a Enum constant value of &quot;to&quot; unit. Unit being converted into conversion constant value.\r\n         * @param b Enum constant value of &quot;from&quot; unit. Unit starting from conversion constant value.\r\n         * @param q Multiply then divide conversion algorithm, false will divide then multiply when converting &quot;to&quot;\r\n         * @return Finished conversion. &quot;from&quot; converted into &quot;to&quot; value.\r\n         */\r\n        protected final double k(double a, double b, boolean q){\r\n    \r\n            return UnitConverterUtils.i(UnitConverterUtils.i(me.getV(), a, q), b, !q);\r\n        }\r\n    \r\n    \r\n    }\r\n\r\nI tried the solution proposed by Serg Vasylchak but I got an error message (note just change letter symbols):\r\n\r\n[![enter image description here][2]][2]\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3RULI.png\r\n  [2]: https://i.stack.imgur.com/5whCZ.png\r\n  [3]: https://i.stack.imgur.com/DCWGf.png","title":"Raw use of parameterized class in Java","body":"<p>I have two classes that use generics in Java in order to perform conversions between units of measure. In the BaseUnitConverter class I have two warnings, from the intellij IDE, that say:</p>\n<pre><code>Raw use of parameterized class 'InstantiatorUnitConverter' \nUnchecked assignment: 'org.cnr.lambertools.utils.unitconverter.InstantiatorUnitConverter' to 'org.cnr.lambertools.utils.unitconverter.InstantiatorUnitConverter&lt;T&gt;' \nUnchecked call to 'InstantiatorUnitConverter(Object, T, String)' as a member of raw type 'org.cnr.lambertools.utils.unitconverter.InstantiatorUnitConverter' \n</code></pre>\n<p>for methods:</p>\n<pre><code>protected final &lt;M,E&gt; M storeValue(M t, double value, E tt){\n        me = new InstantiatorUnitConverter(value, tt, st(tt));\n        return t;\n    }\n</code></pre>\n<p>and</p>\n<pre><code>protected final &lt;M, E&gt; M storeValue(M t, Object value, E tt){\n    me = new InstantiatorUnitConverter(value, tt, st(tt));\n    return t;\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/3RULI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3RULI.png\" alt=\"enter image description here\" /></a></p>\n<p>The basic classes of this conversion system are as follows:</p>\n<pre><code>import java.io.Serializable;\n\n/**\n * Instantiated variables from new UnitConverter instance (Only used in class BaseUnitConverter).\n */\npublic final class InstantiatorUnitConverter&lt;T&gt; implements Serializable {\n    private final Object o;      //Only used in DataType and NumericBase measurements (classes), user passed &quot;from&quot; value (Object). When this is the case, variable &quot;v&quot; is not used.\n    private final double v;      //User passed &quot;from&quot; value (double). When this is the case, variable &quot;o&quot; is not used.\n    private final T t;        //Enum constant value representing the &quot;from&quot; method of the measurement used.\n    private final String ts;  //String value of enum constant representing the &quot;from&quot; method of the measurement used.\n    private final boolean d;  //Used in class B.java &quot;getValuePassed()&quot;. True if &quot;from&quot; value was a double, false for Object (Object only used in DataType and NumericBase measurements (classes)).\n\n    /**\n     * Empty constructor only called when instantiating from class B.java\n     */\n    public InstantiatorUnitConverter(){\n        o = &quot;&quot;;\n        v = -1;\n        t = null;\n        ts = &quot;&quot;;\n        d = true;\n    }\n\n    /**\n     * Only used in class B.java when measurement &quot;from&quot; method only converts numbers.\n     * All measurements other than DataType and NumericBase use this constructor.\n     * @param value User passed &quot;from&quot; value (double).\n     * @param enumConstant Enum constant value representing the &quot;from&quot; method of the measurement used.\n     * @param enumTag String value of enum constant representing the &quot;from&quot; method of the measurement used.\n     */\n    public InstantiatorUnitConverter(double value, T enumConstant, String enumTag){\n        o = &quot;&quot;;     //This variable (Object value) will not be used when this constructor is called, default it to an empty string.\n        v = value;\n        t = enumConstant;\n        ts = enumTag;\n        d = true;   //Variable d set to true as &quot;from&quot; value passed is a numeric type not an Object.\n    }\n\n    /**\n     * Only used in class B.java when measurement &quot;from&quot; method can convert more than numbers and an Object is passed as the value.\n     * Only measurements DataType and NumericBase use this constructor.\n     * @param value User passed &quot;from&quot; value (Object).\n     * @param enumConstant Enum constant value representing the &quot;from&quot; method of the measurement used.\n     * @param enumTag String value of enum constant representing the &quot;from&quot; method of the measurement used.\n     */\n    public InstantiatorUnitConverter(Object value, T enumConstant, String enumTag){\n        o = value;\n        v = -1;     //This variable (double value) will not be used when this constructor is called, default it to -1\n        t = enumConstant;\n        ts = enumTag;\n        d = false;  //Variable d set to false as &quot;from&quot; value passed is an Object not double.\n    }\n\n\n    public Object getO() {\n        return o;\n    }\n\n    public double getV() {\n        return v;\n    }\n\n    public T getT() {\n        return t;\n    }\n\n    public String getTs() {\n        return ts;\n    }\n\n    public boolean isD() {\n        return d;\n    }\n}\n</code></pre>\n<p>and</p>\n<pre><code>import java.io.Serializable;\n\n/**\n * Generic base class for most UnitConverter measurement classes.\n */\npublic class BaseUnitConverter&lt;T&gt; implements Serializable {\n\n    private InstantiatorUnitConverter&lt;T&gt; me; //Instantiate class A.java for variables needed to perform conversions.\n\n    public BaseUnitConverter() {\n        this.me = new InstantiatorUnitConverter&lt;&gt;();\n    }\n\n    public InstantiatorUnitConverter&lt;T&gt; getIstantiator(){\n        return this.me;\n    }\n\n    /**\n     * Returns value initially passed into the measurement's &quot;from&quot; method.\n     */\n    public final Object getValuePassed(){\n        return (me.isD()) ? me.getV() : me.getO();    //true returns numeric value passed, false returns Object passed.\n    }\n\n    /**\n     * Returns the enum constant value representing the &quot;from&quot; method of the measurement used.\n     */\n    public final String getTypeConstantPassed(){\n\n        return me.getTs();\n    }\n\n    /**\n     * Stores the needed values to do conversions of the measurement.\n     * This overload of the method is used in &quot;from&quot; methods in every measurement class other than Anything(), DataType(), and NumericBase().\n     *\n     * @param &lt;M&gt; Class context of measurement passed (usually &quot;this&quot; is passed from caller).\n     * @param &lt;E&gt; Enum constant value representing the &quot;from&quot; method of the measurement used.\n     * @param t Class context of measurement passed (usually &quot;this&quot; is passed from caller).\n     * @param value User passed &quot;from&quot; value (double).\n     * @param tt Enum constant value representing the &quot;from&quot; method of the measurement used.\n     * @return class context passed in so variable like &quot;UnitOf.Length len&quot; can be used as the variable type\n     */\n    protected final &lt;M,E&gt; M storeValue(M t, double value, E tt){\n        me = new InstantiatorUnitConverter(value, tt, st(tt));\n        return t;\n    }\n\n    /**\n     * Stores the needed values to do conversions of the measurement.\n     * This overload of the method is used only in DataType and NumericBase as Objects can be passed as &quot;from&quot; values.\n     *\n     * @param &lt;M&gt; Class context of measurement passed (usually &quot;this&quot; is passed from caller).\n     * @param &lt;E&gt; Enum constant value representing the &quot;from&quot; method of the measurement used.\n     * @param t Class context of measurement passed (usually &quot;this&quot; is passed from caller).\n     * @param value User passed &quot;from&quot; value (Object).\n     * @param tt Enum constant value representing the &quot;from&quot; method of the measurement used.\n     * @return class context passed in so variable like &quot;UnitOf.DataType dt&quot; can be used as the variable type\n     */\n    protected final &lt;M, E&gt; M storeValue(M t, Object value, E tt){\n        me = new InstantiatorUnitConverter(value, tt, st(tt));\n        return t;\n    }\n\n    /**\n     * Gets and returns the string value of constant representing the &quot;from&quot; method of the measurement used.\n     */\n    private &lt;E&gt; String st(E tt){\n        String unitType = &quot;&quot;;\n        try{\n            unitType = tt.toString();\n        } catch(Exception ignored){ }\n        return unitType;\n    }\n\n    /**\n     * Used by every measurement class that converts just numbers (Anything(), DataType(), NumericBase() do not apply here).\n     * Method performs the full conversion of taking the user defined &quot;from&quot; value and converting it into the user desired &quot;to&quot; value.\n     * @param a Enum constant value of &quot;to&quot; unit. Unit being converted into conversion constant value.\n     * @param b Enum constant value of &quot;from&quot; unit. Unit starting from conversion constant value.\n     * @return Finished conversion. &quot;From&quot; converted into &quot;to&quot; value.\n     */\n    protected final double k(double a, double b){\n\n        return k(a,b,true);\n    }\n\n    /**\n     * Used by every measurement class that converts just numbers (Anything(), DataType(), NumericBase() do not apply here)\n     * Method performs the full conversion of taking the user defined &quot;from&quot; value and converting it into the user desired &quot;to&quot; value.\n     * @param a Enum constant value of &quot;to&quot; unit. Unit being converted into conversion constant value.\n     * @param b Enum constant value of &quot;from&quot; unit. Unit starting from conversion constant value.\n     * @param q Multiply then divide conversion algorithm, false will divide then multiply when converting &quot;to&quot;\n     * @return Finished conversion. &quot;from&quot; converted into &quot;to&quot; value.\n     */\n    protected final double k(double a, double b, boolean q){\n\n        return UnitConverterUtils.i(UnitConverterUtils.i(me.getV(), a, q), b, !q);\n    }\n\n\n}\n</code></pre>\n<p>I tried the solution proposed by Serg Vasylchak but I got an error message (note just change letter symbols):</p>\n<p><a href=\"https://i.stack.imgur.com/5whCZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5whCZ.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/DCWGf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DCWGf.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring","openapi"],"comments":[{"owner":{"account_id":1901420,"reputation":3763,"user_id":1717210,"display_name":"TacheDeChoco"},"score":0,"creation_date":1683041353,"post_id":76153735,"comment_id":134304101,"body_markdown":"Here ? https://stackoverflow.com/questions/43524355/how-to-display-required-user-roles-access-control-information-in-swagger-ui-fo","body":"Here ? <a href=\"https://stackoverflow.com/questions/43524355/how-to-display-required-user-roles-access-control-information-in-swagger-ui-fo\" title=\"how to display required user roles access control information in swagger ui fo\">stackoverflow.com/questions/43524355/&hellip;</a>"},{"owner":{"account_id":2794316,"reputation":1918,"user_id":2403836,"accept_rate":72,"display_name":"mr nooby noob"},"score":0,"creation_date":1683102359,"post_id":76153735,"comment_id":134313447,"body_markdown":"@TacheDeChoco thats for using Swagger, not OpenApi","body":"@TacheDeChoco thats for using Swagger, not OpenApi"}],"answers":[{"tags":[],"owner":{"account_id":20731826,"reputation":1,"user_id":15223603,"display_name":"mahh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688490126,"creation_date":1688490126,"answer_id":76614647,"question_id":76153735,"body_markdown":"I propose a workaround for that.\r\nAs roles in applications are strictly defined we can create a special annotation for each role that will be used for authorization and include *@PreAuthorize* annotation together with *@Operation* annotation.\r\n*@Operation* enriches endpoint documentation by custom description.\r\n\r\nSo create annotation:\r\n\r\n    @Target({ ElementType.METHOD, ElementType.TYPE })\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Inherited\r\n    @Documented\r\n    @PreAuthorize(&quot;hasRole(&#39;bar-admin&#39;)&quot;)\r\n    @Operation(description = &quot;Required role: bar-admin&quot;)\r\n    public @interface AuthorizeBarAdmin {\r\n    }\r\n\r\nNow you can use the *@AuthorizeBarAdmin* annotation instead \r\n*@PreAuthorize(&quot;hasRole(&#39;bar-admin&#39;)&quot;)* and the custom description will be included.\r\n\r\nNote: *@Operation* can be annotated on REST endpoint next to the *@Preauthorize* anyway, but always you need to remember about the additional annotation and copy the description many times. That&#39;s why the above solution is better.\r\n  ","title":"How to display required user roles in for OpenAPI UI?","body":"<p>I propose a workaround for that.\nAs roles in applications are strictly defined we can create a special annotation for each role that will be used for authorization and include <em>@PreAuthorize</em> annotation together with <em>@Operation</em> annotation.\n<em>@Operation</em> enriches endpoint documentation by custom description.</p>\n<p>So create annotation:</p>\n<pre><code>@Target({ ElementType.METHOD, ElementType.TYPE })\n@Retention(RetentionPolicy.RUNTIME)\n@Inherited\n@Documented\n@PreAuthorize(&quot;hasRole('bar-admin')&quot;)\n@Operation(description = &quot;Required role: bar-admin&quot;)\npublic @interface AuthorizeBarAdmin {\n}\n</code></pre>\n<p>Now you can use the <em>@AuthorizeBarAdmin</em> annotation instead\n<em>@PreAuthorize(&quot;hasRole('bar-admin')&quot;)</em> and the custom description will be included.</p>\n<p>Note: <em>@Operation</em> can be annotated on REST endpoint next to the <em>@Preauthorize</em> anyway, but always you need to remember about the additional annotation and copy the description many times. That's why the above solution is better.</p>\n"},{"tags":[],"owner":{"account_id":28767978,"reputation":11,"user_id":22032423,"display_name":"Grzegorz Jewusiak"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1688682414,"creation_date":1688682276,"answer_id":76632859,"question_id":76153735,"body_markdown":"I use a custom annotation `@UserRoleDescription` with a controller&#39;s method as below:\r\n\r\n    @GetMapping(&quot;/bytin/{tin}&quot;)\r\n    @Secured(&quot;ROLE_ADMIN&quot;)\r\n    @Operation(summary = &quot;Get company by Tax ID Number&quot;)\r\n    @UserRoleDescription\r\n    public CompanyDto getCompanyByTin(@PathVariable String tin) {\r\n        ...\r\n    }\r\n\r\nIt results in a description containing an information about the required role:\r\n[Swagger UI result here][1].\r\n\r\nAnnotation:\r\n\r\n    @Target({ElementType.METHOD})\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    public @interface UserRoleDescription {\r\n\r\n    }\r\n\r\nAnd description customizer:\r\n\r\n    @Component\r\n    public class UserRoleDescriptionCustomizer implements OperationCustomizer {\r\n        @Override\r\n        public Operation customize(Operation operation, HandlerMethod handlerMethod) {\r\n            var annotation = handlerMethod.getMethodAnnotation(UserRoleDescription.class);\r\n            if (annotation != null) {\r\n                var securedAnnotation = handlerMethod.getMethodAnnotation(Secured.class);\r\n                if(securedAnnotation != null) {\r\n                    String description = operation.getDescription()==null ? &quot;&quot; : (operation.getDescription()+&quot;\\n&quot;);\r\n                    operation.setDescription(description + &quot;Required role: **&quot;+ String.join(&quot;or&quot;, securedAnnotation.value()) + &quot;**&quot;);\r\n                }\r\n            }\r\n            return operation;\r\n        }\r\n    }\r\n\r\n  [1]: https://i.stack.imgur.com/FLrvt.png","title":"How to display required user roles in for OpenAPI UI?","body":"<p>I use a custom annotation <code>@UserRoleDescription</code> with a controller's method as below:</p>\n<pre><code>@GetMapping(&quot;/bytin/{tin}&quot;)\n@Secured(&quot;ROLE_ADMIN&quot;)\n@Operation(summary = &quot;Get company by Tax ID Number&quot;)\n@UserRoleDescription\npublic CompanyDto getCompanyByTin(@PathVariable String tin) {\n    ...\n}\n</code></pre>\n<p>It results in a description containing an information about the required role:\n<a href=\"https://i.stack.imgur.com/FLrvt.png\" rel=\"nofollow noreferrer\">Swagger UI result here</a>.</p>\n<p>Annotation:</p>\n<pre><code>@Target({ElementType.METHOD})\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface UserRoleDescription {\n\n}\n</code></pre>\n<p>And description customizer:</p>\n<pre><code>@Component\npublic class UserRoleDescriptionCustomizer implements OperationCustomizer {\n    @Override\n    public Operation customize(Operation operation, HandlerMethod handlerMethod) {\n        var annotation = handlerMethod.getMethodAnnotation(UserRoleDescription.class);\n        if (annotation != null) {\n            var securedAnnotation = handlerMethod.getMethodAnnotation(Secured.class);\n            if(securedAnnotation != null) {\n                String description = operation.getDescription()==null ? &quot;&quot; : (operation.getDescription()+&quot;\\n&quot;);\n                operation.setDescription(description + &quot;Required role: **&quot;+ String.join(&quot;or&quot;, securedAnnotation.value()) + &quot;**&quot;);\n            }\n        }\n        return operation;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":2794316,"reputation":1918,"user_id":2403836,"accept_rate":72,"display_name":"mr nooby noob"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":568,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1688682414,"creation_date":1683021541,"question_id":76153735,"body_markdown":"I have a Spring Boot 3 project and I want to show the required role/permission in the OpenApi UI for my endpoints. I have had this working before, in the past when I used Swagger instead OpenApi, however I am not sure what changes I need to make to get it to work for this.\r\n\r\nHere is what I have:\r\n\r\n    import java.util.Optional;\r\n    import lombok.RequiredArgsConstructor;\r\n    import lombok.extern.slf4j.Slf4j;\r\n    import org.springframework.core.annotation.Order;\r\n    import org.springframework.security.access.prepost.PreAuthorize;\r\n    import org.springframework.stereotype.Component;\r\n    import springfox.documentation.spi.DocumentationType;\r\n    import springfox.documentation.spi.service.OperationBuilderPlugin;\r\n    import springfox.documentation.spi.service.contexts.OperationContext;\r\n    import springfox.documentation.spring.web.DescriptionResolver;\r\n    import springfox.documentation.swagger.common.SwaggerPluginSupport;\r\n    \r\n    @Slf4j\r\n    @Component\r\n    @Order(SwaggerPluginSupport.OAS_PLUGIN_ORDER)// this used to be: SWAGGER_PLUGIN_ORDER for Swagger\r\n    @RequiredArgsConstructor\r\n    class MyOperationBuilderPlugin implements OperationBuilderPlugin {\r\n    \r\n      private final DescriptionResolver descriptionResolver;\r\n    \r\n      @Override\r\n      public void apply(OperationContext context) {\r\n        try {\r\n          String apiRoleAccessNoteText = &quot;Required role: None&quot;;\r\n          Optional&lt;PreAuthorize&gt; preAuthorizeAnnotation = context.findAnnotation(PreAuthorize.class);\r\n          if (preAuthorizeAnnotation.isPresent()) {\r\n            apiRoleAccessNoteText =\r\n                &quot;Required role: &quot;\r\n                    + preAuthorizeAnnotation\r\n                        .get()\r\n                        .value()\r\n                        .replace(&quot;hasAuthority(&#39;&quot;, &quot;&quot;)\r\n                        .replace(&quot;&#39;)&quot;, &quot;&quot;);\r\n          }\r\n          context.operationBuilder().notes(descriptionResolver.resolve(apiRoleAccessNoteText));\r\n        } catch (Exception e) {\r\n          log.error(&quot;Error when creating swagger documentation for security roles: &quot; + e);\r\n        }\r\n      }\r\n    \r\n      @Override\r\n      public boolean supports(DocumentationType delimiter) {\r\n        return SwaggerPluginSupport.pluginDoesApply(delimiter);\r\n      }\r\n    }\r\n\r\n\r\nThe UI looks like this\r\n\r\n[![No role showing][1]][1]\r\n\r\nHowever, it should show something like this (this is for a previous service using Swagger instead of OpenApi)\r\n[![Should look like this][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Bkmu1.png\r\n  [2]: https://i.stack.imgur.com/gQnuK.png","title":"How to display required user roles in for OpenAPI UI?","body":"<p>I have a Spring Boot 3 project and I want to show the required role/permission in the OpenApi UI for my endpoints. I have had this working before, in the past when I used Swagger instead OpenApi, however I am not sure what changes I need to make to get it to work for this.</p>\n<p>Here is what I have:</p>\n<pre><code>import java.util.Optional;\nimport lombok.RequiredArgsConstructor;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.core.annotation.Order;\nimport org.springframework.security.access.prepost.PreAuthorize;\nimport org.springframework.stereotype.Component;\nimport springfox.documentation.spi.DocumentationType;\nimport springfox.documentation.spi.service.OperationBuilderPlugin;\nimport springfox.documentation.spi.service.contexts.OperationContext;\nimport springfox.documentation.spring.web.DescriptionResolver;\nimport springfox.documentation.swagger.common.SwaggerPluginSupport;\n\n@Slf4j\n@Component\n@Order(SwaggerPluginSupport.OAS_PLUGIN_ORDER)// this used to be: SWAGGER_PLUGIN_ORDER for Swagger\n@RequiredArgsConstructor\nclass MyOperationBuilderPlugin implements OperationBuilderPlugin {\n\n  private final DescriptionResolver descriptionResolver;\n\n  @Override\n  public void apply(OperationContext context) {\n    try {\n      String apiRoleAccessNoteText = &quot;Required role: None&quot;;\n      Optional&lt;PreAuthorize&gt; preAuthorizeAnnotation = context.findAnnotation(PreAuthorize.class);\n      if (preAuthorizeAnnotation.isPresent()) {\n        apiRoleAccessNoteText =\n            &quot;Required role: &quot;\n                + preAuthorizeAnnotation\n                    .get()\n                    .value()\n                    .replace(&quot;hasAuthority('&quot;, &quot;&quot;)\n                    .replace(&quot;')&quot;, &quot;&quot;);\n      }\n      context.operationBuilder().notes(descriptionResolver.resolve(apiRoleAccessNoteText));\n    } catch (Exception e) {\n      log.error(&quot;Error when creating swagger documentation for security roles: &quot; + e);\n    }\n  }\n\n  @Override\n  public boolean supports(DocumentationType delimiter) {\n    return SwaggerPluginSupport.pluginDoesApply(delimiter);\n  }\n}\n</code></pre>\n<p>The UI looks like this</p>\n<p><a href=\"https://i.stack.imgur.com/Bkmu1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Bkmu1.png\" alt=\"No role showing\" /></a></p>\n<p>However, it should show something like this (this is for a previous service using Swagger instead of OpenApi)\n<a href=\"https://i.stack.imgur.com/gQnuK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gQnuK.png\" alt=\"Should look like this\" /></a></p>\n"},{"tags":["java","spring-boot","spring-security","jwt","backend"],"comments":[{"owner":{"account_id":7292020,"reputation":868,"user_id":5558106,"display_name":"Serg Vasylchak"},"score":1,"creation_date":1688678019,"post_id":76632497,"comment_id":135110028,"body_markdown":"Well, you explicitily configured POST to `/api/v1/auth` as secured (`hasRole(&quot;ADMIN&quot;)`), which looks wrong - at this point, you have nothing in security context yet. Generally, the sign-in/sign-up requests are `.permitAll()`, while all the others are protected - e.g., closing the customizer chain with `.anyRequest().authenticated();`","body":"Well, you explicitily configured POST to <code>&#47;api&#47;v1&#47;auth</code> as secured (<code>hasRole(&quot;ADMIN&quot;)</code>), which looks wrong - at this point, you have nothing in security context yet. Generally, the sign-in/sign-up requests are <code>.permitAll()</code>, while all the others are protected - e.g., closing the customizer chain with <code>.anyRequest().authenticated();</code>"},{"owner":{"account_id":18328343,"reputation":11,"user_id":16968310,"display_name":"Bohdan"},"score":0,"creation_date":1688679071,"post_id":76632497,"comment_id":135110160,"body_markdown":"@SergVasylchak **/api/v1/auth** only for Admin. I don&#39;t have others controller and this is like test controller","body":"@SergVasylchak <b>/api/v1/auth</b> only for Admin. I don&#39;t have others controller and this is like test controller"},{"owner":{"account_id":3430916,"reputation":3799,"user_id":3059385,"accept_rate":40,"display_name":"Christopher Schneider"},"score":0,"creation_date":1688681540,"post_id":76632497,"comment_id":135110522,"body_markdown":"You need to be more specific on how this should work. Assuming it&#39;s just username/password login, then the user has no authorities yet. `PreAuthorize` does a check _before_ it allows access to the endpoint. If you need additional checks, like user type, do those checks in the endpoint. e.g. `if userIsNotAdmin then return 401`","body":"You need to be more specific on how this should work. Assuming it&#39;s just username/password login, then the user has no authorities yet. <code>PreAuthorize</code> does a check <i>before</i> it allows access to the endpoint. If you need additional checks, like user type, do those checks in the endpoint. e.g. <code>if userIsNotAdmin then return 401</code>"}],"answers":[{"comments":[{"owner":{"account_id":18328343,"reputation":11,"user_id":16968310,"display_name":"Bohdan"},"score":0,"creation_date":1688806667,"post_id":76632869,"comment_id":135125618,"body_markdown":"My **admin user** has admin license in database","body":"My <b>admin user</b> has admin license in database"},{"owner":{"account_id":28695489,"reputation":611,"user_id":21973805,"display_name":"Ahmed Nabil"},"score":1,"creation_date":1688938817,"post_id":76632869,"comment_id":135138201,"body_markdown":"so admin user is already registered, but he cant login, so he cant prove to the system that he is an admin.","body":"so admin user is already registered, but he cant login, so he cant prove to the system that he is an admin."}],"tags":[],"owner":{"account_id":28695489,"reputation":611,"user_id":21973805,"display_name":"Ahmed Nabil"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688682395,"creation_date":1688682395,"answer_id":76632869,"question_id":76632497,"body_markdown":"you are creating a loop here. for a user to login they need to be an admin, and for them to be an admin they must login first !! this does not work. usually login endpoint should not have any authorization required","title":"Back-end doesn&#39;t send me a response (JWT) while using Spring Security","body":"<p>you are creating a loop here. for a user to login they need to be an admin, and for them to be an admin they must login first !! this does not work. usually login endpoint should not have any authorization required</p>\n"}],"owner":{"account_id":18328343,"reputation":11,"user_id":16968310,"display_name":"Bohdan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1688682395,"creation_date":1688677165,"question_id":76632497,"body_markdown":"I don&#39;t get a `token JWT` after send a request to the restcontroller.\r\nI tried to rewrite, but this didn&#39;t solve the problem.\r\nI&#39;m confused becuase I thought that I need to enter the default security password, but `&quot;Basic auth&quot;` is disabled.\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception\r\n    {\r\n        http\r\n                .csrf().disable()\r\n                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                .and()\r\n                .authorizeHttpRequests(\r\n                        requests -&gt; requests\r\n                                .requestMatchers(&quot;/&quot;).permitAll()\r\n                                .requestMatchers(HttpMethod.POST, &quot;/api/v1/auth&quot;).hasRole(&quot;ADMIN&quot;)\r\n                                .anyRequest().authenticated()\r\n\r\n                )\r\n                .exceptionHandling()\r\n                .authenticationEntryPoint(new HttpStatusEntryPoint(HttpStatus.UNAUTHORIZED));\r\n                //.addFilterAfter(jwtFilter, UsernamePasswordAuthenticationFilter.class)\r\n\r\n        return http.build();\r\n    }\r\n\r\n---------------------\r\n\r\n    @RestController\r\n    @RequiredArgsConstructor\r\n    @RequestMapping(&quot;/api/v1&quot;)\r\n    public class AuthController\r\n    {\r\n        private final UserDetailsServiceImpl userDetailsService;\r\n        private final JwtProvider jwtProvider;\r\n        private final AuthenticationManager authenticationManager;\r\n    \r\n        @PreAuthorize(&quot;hasAuthority(&#39;ADMIN&#39;)&quot;)\r\n        @PostMapping(&quot;/auth&quot;)\r\n        public ResponseEntity&lt;?&gt; createAuthToken(@RequestBody AuthRequestDTO authRequestDTO)\r\n        {\r\n            try\r\n            {\r\n                authenticationManager.authenticate(new UsernamePasswordAuthenticationToken(authRequestDTO.getUsername(), authRequestDTO.getPassword()));\r\n            }\r\n            catch (BadCredentialsException e)\r\n            {\r\n                return new ResponseEntity&lt;&gt;(new ApiError(HttpStatus.UNAUTHORIZED, &quot;Invalid username or password&quot;), HttpStatus.UNAUTHORIZED);\r\n            }\r\n    \r\n            UserDetails userDetails = userDetailsService.loadUserByUsername(authRequestDTO.getUsername());\r\n    \r\n            String token = jwtProvider.generateToken(userDetails);\r\n    \r\n            return ResponseEntity.ok(new AuthResponseDTO(token));\r\n        }\r\n    }\r\n\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/gUjN5.png","title":"Back-end doesn&#39;t send me a response (JWT) while using Spring Security","body":"<p>I don't get a <code>token JWT</code> after send a request to the restcontroller.\nI tried to rewrite, but this didn't solve the problem.\nI'm confused becuase I thought that I need to enter the default security password, but <code>&quot;Basic auth&quot;</code> is disabled.</p>\n<pre><code>@Bean\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception\n{\n    http\n            .csrf().disable()\n            .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n            .and()\n            .authorizeHttpRequests(\n                    requests -&gt; requests\n                            .requestMatchers(&quot;/&quot;).permitAll()\n                            .requestMatchers(HttpMethod.POST, &quot;/api/v1/auth&quot;).hasRole(&quot;ADMIN&quot;)\n                            .anyRequest().authenticated()\n\n            )\n            .exceptionHandling()\n            .authenticationEntryPoint(new HttpStatusEntryPoint(HttpStatus.UNAUTHORIZED));\n            //.addFilterAfter(jwtFilter, UsernamePasswordAuthenticationFilter.class)\n\n    return http.build();\n}\n</code></pre>\n<hr />\n<pre><code>@RestController\n@RequiredArgsConstructor\n@RequestMapping(&quot;/api/v1&quot;)\npublic class AuthController\n{\n    private final UserDetailsServiceImpl userDetailsService;\n    private final JwtProvider jwtProvider;\n    private final AuthenticationManager authenticationManager;\n\n    @PreAuthorize(&quot;hasAuthority('ADMIN')&quot;)\n    @PostMapping(&quot;/auth&quot;)\n    public ResponseEntity&lt;?&gt; createAuthToken(@RequestBody AuthRequestDTO authRequestDTO)\n    {\n        try\n        {\n            authenticationManager.authenticate(new UsernamePasswordAuthenticationToken(authRequestDTO.getUsername(), authRequestDTO.getPassword()));\n        }\n        catch (BadCredentialsException e)\n        {\n            return new ResponseEntity&lt;&gt;(new ApiError(HttpStatus.UNAUTHORIZED, &quot;Invalid username or password&quot;), HttpStatus.UNAUTHORIZED);\n        }\n\n        UserDetails userDetails = userDetailsService.loadUserByUsername(authRequestDTO.getUsername());\n\n        String token = jwtProvider.generateToken(userDetails);\n\n        return ResponseEntity.ok(new AuthResponseDTO(token));\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/gUjN5.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","javafx","jackson","nosql"],"answers":[{"tags":[],"owner":{"account_id":28695489,"reputation":611,"user_id":21973805,"display_name":"Ahmed Nabil"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687748224,"creation_date":1687748224,"answer_id":76553271,"question_id":76552717,"body_markdown":"&gt; `java.lang.reflect.InaccessibleObjectException`, problem: Unable to make field private int com.app.bankapplet.bank.Bank.id accessible\r\n\r\nadd setter for id property so that jackson can access it\r\n\r\n    public void setId(int id) {\r\n       this.id= id;\r\n    }","title":"com.fasterxml.jackson.databind.exc.InvalidDefinitionException Invalid type definition for type `com.app.bankapplet.bank.Bank`","body":"<blockquote>\n<p><code>java.lang.reflect.InaccessibleObjectException</code>, problem: Unable to make field private int com.app.bankapplet.bank.Bank.id accessible</p>\n</blockquote>\n<p>add setter for id property so that jackson can access it</p>\n<pre><code>public void setId(int id) {\n   this.id= id;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1738315,"reputation":359,"user_id":1590375,"accept_rate":75,"display_name":"TroyPilewski"},"score":1,"creation_date":1688609721,"post_id":76592655,"comment_id":135097669,"body_markdown":"Thank you for the more informative answer.\n\nI was able to get the code to work with 3. and 4. of your answer.\n\nI&#39;m not sure what 1. was doing. Why would I be required to load an empty Scene? What is ```jlink```?","body":"Thank you for the more informative answer.  I was able to get the code to work with 3. and 4. of your answer.  I&#39;m not sure what 1. was doing. Why would I be required to load an empty Scene? What is <code>jlink</code>?"},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1688682107,"post_id":76592655,"comment_id":135110582,"body_markdown":"Added FAQ section to answer to address additional questions.","body":"Added FAQ section to answer to address additional questions."},{"owner":{"account_id":1738315,"reputation":359,"user_id":1590375,"accept_rate":75,"display_name":"TroyPilewski"},"score":0,"creation_date":1689309626,"post_id":76592655,"comment_id":135198031,"body_markdown":"Thank you so much. I would love to learn more about project modularization in this way.","body":"Thank you so much. I would love to learn more about project modularization in this way."}],"tags":[],"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1688682081,"creation_date":1688166717,"answer_id":76592655,"question_id":76552717,"body_markdown":"**Solution: Update your Maven project and Java module-info**\r\n\r\nTo get your example to run, I needed to make the following changes.\r\n\r\n1. Replace the FXML scene with an empty scene, as there is no FXML in your question.\r\n\r\n       // FXMLLoader fxmlLoader = new FXMLLoader(Main.class.getResource(&quot;main.fxml&quot;));\r\n       // Scene scene = new Scene(fxmlLoader.load(), 800, 600);\r\n       stage.setScene(new Scene(new Group()));\r\n\r\n2. Add a dependency management section to the pom.xml as recommended by [the Jackson maven guide][1] and replace the remove the version for the jackson-databind so that it could be derived from the bill of materials (bom) in the dependency management section.  (I am not sure why this was required, but, without it, my IDE complained that the dependent jackson-core jar file was empty).\r\n\r\n       &lt;dependencyManagement&gt;\r\n           &lt;dependencies&gt;\r\n               &lt;dependency&gt;\r\n                   &lt;groupId&gt;com.fasterxml.jackson&lt;/groupId&gt;\r\n                   &lt;artifactId&gt;jackson-bom&lt;/artifactId&gt;\r\n                   &lt;version&gt;2.15.2&lt;/version&gt;\r\n                   &lt;scope&gt;import&lt;/scope&gt;\r\n                   &lt;type&gt;pom&lt;/type&gt;\r\n               &lt;/dependency&gt;\r\n           &lt;/dependencies&gt;\r\n       &lt;/dependencyManagement&gt;\r\n       . . .\r\n       &lt;dependency&gt;\r\n           &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n           &lt;artifactId&gt;jackson-databind&lt;/&gt;\r\n       &lt;/dependency&gt;\r\n\r\n3. Update the module-info.java to require the jackson databind module.\r\n\r\n       requires com.fasterxml.jackson.databind;\r\n\r\n4. Update the module-info.java to open the bank package to the jackson databind module.\r\n\r\n       opens com.app.bankapplet.bank to com.fasterxml.jackson.databind;\r\n\r\nI did not need to apply the modification to add an id setter proposed by [AhmedNabil&#39;s answer][2].  This is because Jackson works on introspection by reflection, and was able to introspect your Bank class once the package opened it to the module, even without a public setter on the id field.  You might want to consider using an ID setter regardless. \r\n\r\n**Additional Comments**\r\n\r\nYou need to:\r\n\r\n1. Require the jackson modules in your module-info, (look for the names in their module-info or META-INF). \r\n2. In your module-info open the required package (you can see it in the error message) to the appropriate jackson module (it will tell you the name of the jackson module you need to open it to in the error it will generate after you fix step 1). \r\n\r\nIf you don&#39;t understand, study [Understanding Java 9 modules][3].\r\n\r\n\r\nAlthough my answer solves the issue marked in your question, future work may also be more complicated because of the use of the non-modular nitrate jar which you are using as an [automatic module][4] (so stuff like `jlink` like you have in your Maven project) won&#39;t work with it. \r\n\r\nYou might want to consider getting rid of the module info altogether and creating a non-modular project, then either having JavaFX in the runtime (e.g. [Azul Zulu JDK FX distribution][5]) or providing the JavaFX modules via command line arguments (see [openjfx.io getting started][6] for more info about that configuration). \r\n\r\n**FAQ**\r\n\r\n&gt; Why would I be required to load an empty Scene?\r\n\r\nYou dont need to do that. \r\n\r\nIt is what I needed to do, to be able to run the app in my environment. Your application loads an fxml file which I dont have. The required fxml file is not included your question, so unless I changed your code, it would not run.\r\n\r\n&gt; What is `jlink`?\r\n\r\n[`jlink`][7] is a Java linker. \r\n\r\nIt is a part of the JDK. It builds custom native runtimes for Java and for modular Java applications. \r\n\r\nThe Maven project file you provided in your question refers to it using an execution of the [`javafx-maven-plugin`][8], so I thought you might be trying to use it (which won&#39;t work for an app with automatic modules such as you have).\r\n\r\n  [1]: https://github.com/FasterXML/jackson-databind#maven\r\n  [2]: https://stackoverflow.com/a/76553271/1155209\r\n  [3]: https://www.oracle.com/corporate/features/understanding-java-9-modules.html\r\n  [4]: https://stackoverflow.com/questions/46741907/what-is-an-automatic-module\r\n  [5]: https://www.azul.com/downloads/?package=jdk-fx#zulu\r\n  [6]: https://openjfx.io/openjfx-docs/\r\n  [7]: https://docs.oracle.com/en/java/javase/20/docs/specs/man/jlink.html\r\n  [8]: https://github.com/openjfx/javafx-maven-plugin#javafxjlink-options","title":"com.fasterxml.jackson.databind.exc.InvalidDefinitionException Invalid type definition for type `com.app.bankapplet.bank.Bank`","body":"<p><strong>Solution: Update your Maven project and Java module-info</strong></p>\n<p>To get your example to run, I needed to make the following changes.</p>\n<ol>\n<li><p>Replace the FXML scene with an empty scene, as there is no FXML in your question.</p>\n<pre><code>// FXMLLoader fxmlLoader = new FXMLLoader(Main.class.getResource(&quot;main.fxml&quot;));\n// Scene scene = new Scene(fxmlLoader.load(), 800, 600);\nstage.setScene(new Scene(new Group()));\n</code></pre>\n</li>\n<li><p>Add a dependency management section to the pom.xml as recommended by <a href=\"https://github.com/FasterXML/jackson-databind#maven\" rel=\"nofollow noreferrer\">the Jackson maven guide</a> and replace the remove the version for the jackson-databind so that it could be derived from the bill of materials (bom) in the dependency management section.  (I am not sure why this was required, but, without it, my IDE complained that the dependent jackson-core jar file was empty).</p>\n<pre><code>&lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-bom&lt;/artifactId&gt;\n            &lt;version&gt;2.15.2&lt;/version&gt;\n            &lt;scope&gt;import&lt;/scope&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/dependencyManagement&gt;\n. . .\n&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-databind&lt;/&gt;\n&lt;/dependency&gt;\n</code></pre>\n</li>\n<li><p>Update the module-info.java to require the jackson databind module.</p>\n<pre><code>requires com.fasterxml.jackson.databind;\n</code></pre>\n</li>\n<li><p>Update the module-info.java to open the bank package to the jackson databind module.</p>\n<pre><code>opens com.app.bankapplet.bank to com.fasterxml.jackson.databind;\n</code></pre>\n</li>\n</ol>\n<p>I did not need to apply the modification to add an id setter proposed by <a href=\"https://stackoverflow.com/a/76553271/1155209\">AhmedNabil's answer</a>.  This is because Jackson works on introspection by reflection, and was able to introspect your Bank class once the package opened it to the module, even without a public setter on the id field.  You might want to consider using an ID setter regardless.</p>\n<p><strong>Additional Comments</strong></p>\n<p>You need to:</p>\n<ol>\n<li>Require the jackson modules in your module-info, (look for the names in their module-info or META-INF).</li>\n<li>In your module-info open the required package (you can see it in the error message) to the appropriate jackson module (it will tell you the name of the jackson module you need to open it to in the error it will generate after you fix step 1).</li>\n</ol>\n<p>If you don't understand, study <a href=\"https://www.oracle.com/corporate/features/understanding-java-9-modules.html\" rel=\"nofollow noreferrer\">Understanding Java 9 modules</a>.</p>\n<p>Although my answer solves the issue marked in your question, future work may also be more complicated because of the use of the non-modular nitrate jar which you are using as an <a href=\"https://stackoverflow.com/questions/46741907/what-is-an-automatic-module\">automatic module</a> (so stuff like <code>jlink</code> like you have in your Maven project) won't work with it.</p>\n<p>You might want to consider getting rid of the module info altogether and creating a non-modular project, then either having JavaFX in the runtime (e.g. <a href=\"https://www.azul.com/downloads/?package=jdk-fx#zulu\" rel=\"nofollow noreferrer\">Azul Zulu JDK FX distribution</a>) or providing the JavaFX modules via command line arguments (see <a href=\"https://openjfx.io/openjfx-docs/\" rel=\"nofollow noreferrer\">openjfx.io getting started</a> for more info about that configuration).</p>\n<p><strong>FAQ</strong></p>\n<blockquote>\n<p>Why would I be required to load an empty Scene?</p>\n</blockquote>\n<p>You dont need to do that.</p>\n<p>It is what I needed to do, to be able to run the app in my environment. Your application loads an fxml file which I dont have. The required fxml file is not included your question, so unless I changed your code, it would not run.</p>\n<blockquote>\n<p>What is <code>jlink</code>?</p>\n</blockquote>\n<p><a href=\"https://docs.oracle.com/en/java/javase/20/docs/specs/man/jlink.html\" rel=\"nofollow noreferrer\"><code>jlink</code></a> is a Java linker.</p>\n<p>It is a part of the JDK. It builds custom native runtimes for Java and for modular Java applications.</p>\n<p>The Maven project file you provided in your question refers to it using an execution of the <a href=\"https://github.com/openjfx/javafx-maven-plugin#javafxjlink-options\" rel=\"nofollow noreferrer\"><code>javafx-maven-plugin</code></a>, so I thought you might be trying to use it (which won't work for an app with automatic modules such as you have).</p>\n"}],"owner":{"account_id":1738315,"reputation":359,"user_id":1590375,"accept_rate":75,"display_name":"TroyPilewski"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":901,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76592655,"answer_count":2,"score":1,"last_activity_date":1688682081,"creation_date":1687733980,"question_id":76552717,"body_markdown":"Trying to create a Java Object and store it in a [NOsql Object (NO2 a.k.a Nitrite) database](https://www.dizitart.org/nitrite-database/).\r\n\r\nUpon trying to store the object in an object repository the com.fasterxml.jackson.databind.exc.InvalidDefinitionException exception is thrown.\r\n\r\nI have tried to export the bank.java class in the module-info.java file; I have tried to add a default constructor in the bank.java class. Neither have solved the problem.\r\n\r\nThank you for the help in solving this error.\r\n\r\nThe full error is displayed as follows:\r\n```lang-java\r\nCaused by: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Invalid type definition for type `com.app.bankapplet.bank.Bank`: Failed to construct BeanSerializer for [simple type, class com.app.bankapplet.bank.Bank]: (java.lang.IllegalArgumentException) Failed to call `setAccess()` on Field &#39;id&#39; (of class `com.app.bankapplet.bank.Bank`) due to `java.lang.reflect.InaccessibleObjectException`, problem: Unable to make field private int com.app.bankapplet.bank.Bank.id accessible: module com.app.bankapplet does not &quot;opens com.app.bankapplet.bank&quot; to unnamed module @6293abcc\r\n\tat com.fasterxml.jackson.databind.exc.InvalidDefinitionException.from(InvalidDefinitionException.java:72)\r\n\tat com.fasterxml.jackson.databind.SerializerProvider.reportBadTypeDefinition(SerializerProvider.java:1280)\r\n\tat com.fasterxml.jackson.databind.ser.BeanSerializerFactory.constructBeanOrAddOnSerializer(BeanSerializerFactory.java:475)\r\n\tat com.fasterxml.jackson.databind.ser.BeanSerializerFactory.findBeanOrAddOnSerializer(BeanSerializerFactory.java:295)\r\n\tat com.fasterxml.jackson.databind.ser.BeanSerializerFactory._createSerializer2(BeanSerializerFactory.java:240)\r\n\tat com.fasterxml.jackson.databind.ser.BeanSerializerFactory.createSerializer(BeanSerializerFactory.java:174)\r\n\tat com.fasterxml.jackson.databind.SerializerProvider._createUntypedSerializer(SerializerProvider.java:1503)\r\n\tat com.fasterxml.jackson.databind.SerializerProvider._createAndCacheUntypedSerializer(SerializerProvider.java:1451)\r\n\tat com.fasterxml.jackson.databind.SerializerProvider.findValueSerializer(SerializerProvider.java:556)\r\n\tat com.fasterxml.jackson.databind.SerializerProvider.findTypedValueSerializer(SerializerProvider.java:834)\r\n\tat com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:307)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._convert(ObjectMapper.java:4522)\r\n\t... 18 more\r\nException running application com.app.bankapplet.Main\r\n```\r\n\r\nWhat I would expect to have happen is the object is stored in the object repository.\r\n\r\nPlease find below my code:\r\n\r\nMain.java\r\n```lang-java\r\npackage com.app.bankapplet;\r\n\r\nimport com.app.bankapplet.bank.Bank;\r\nimport javafx.application.Application;\r\nimport javafx.application.Platform;\r\nimport javafx.fxml.FXMLLoader;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.control.*;\r\nimport javafx.scene.layout.GridPane;\r\nimport javafx.stage.Stage;\r\nimport javafx.util.Callback;\r\nimport org.dizitart.no2.Nitrite;\r\nimport org.dizitart.no2.NitriteCollection;\r\nimport org.dizitart.no2.objects.ObjectRepository;\r\n\r\nimport java.io.File;\r\nimport java.io.IOException;\r\nimport java.util.Optional;\r\n\r\npublic class Main extends Application {\r\n    private static Nitrite db;\r\n    private static Bank bank;\r\n    @Override\r\n    public void start(Stage stage) throws IOException {\r\n        // Generates a bank\r\n        bank = getBank();\r\n        ObjectRepository&lt;Bank&gt; bankObjectStore = db.getRepository(Bank.class);\r\n        bankObjectStore.insert(bank);\r\n\r\n        FXMLLoader fxmlLoader = new FXMLLoader(Main.class.getResource(&quot;main.fxml&quot;));\r\n        Scene scene = new Scene(fxmlLoader.load(), 800, 600);\r\n        stage.setTitle(&quot;Bank Manager&quot;);\r\n        stage.setScene(scene);\r\n        stage.show();\r\n    }\r\n    public static void main(String[] args) {\r\n        db = Nitrite.builder()\r\n                .filePath(new File(&quot;target/appdb.db&quot;))\r\n                .compressed()\r\n                .openOrCreate();\r\n        launch();\r\n    }\r\n    protected static Bank getBank() {\r\n        Dialog&lt;Bank&gt; dialog = new Dialog&lt;&gt;();\r\n        dialog.setTitle(&quot;New Bank&quot;);\r\n        dialog.setHeaderText(&quot;Enter the name of the bank:&quot;);\r\n\r\n        Label label = new Label(&quot;Bank Name: &quot;);\r\n        TextField text = new TextField();\r\n\r\n        GridPane gridPane = new GridPane();\r\n        gridPane.add(label, 1, 1);\r\n        gridPane.add(text, 2, 1);\r\n        dialog.getDialogPane().setContent(gridPane);\r\n\r\n        ButtonType buttonTypeOK = new ButtonType(&quot;OK&quot;, ButtonBar.ButtonData.OK_DONE);\r\n        dialog.getDialogPane().getButtonTypes().add(buttonTypeOK);\r\n\r\n        dialog.setResultConverter(new Callback&lt;ButtonType, Bank&gt;() {\r\n            @Override\r\n            public Bank call(ButtonType b) {\r\n                if(b == buttonTypeOK) {\r\n                    return new Bank(text.getText());\r\n                }\r\n                return null;\r\n            }\r\n        });\r\n\r\n        Optional&lt;Bank&gt; result = dialog.showAndWait();\r\n\r\n        if(result.isPresent()) {\r\n            return result.get();\r\n        }\r\n\r\n        return null;\r\n    }\r\n}\r\n```\r\n\r\nBank.java\r\n```lang-java\r\npackage com.app.bankapplet.bank;\r\n\r\nimport org.dizitart.no2.objects.Id;\r\n\r\npublic class Bank {\r\n    @Id\r\n    private int id;\r\n    private String name;\r\n\r\n    public Bank() {\r\n\r\n    }\r\n    public Bank(String name) {\r\n        this.id = 0;\r\n        this.name = name;\r\n    }\r\n    public int getId() {\r\n        return id;\r\n    }\r\n    public String getName() {\r\n        return name;\r\n    }\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n    private static String toTitleCase(String item) {\r\n        if (item == null || item.isEmpty()) {\r\n            return item;\r\n        }\r\n\r\n        StringBuilder convertedString = new StringBuilder();\r\n        boolean convertNext = true;\r\n\r\n        for (char ch : item.toCharArray()) {\r\n            if (Character.isSpaceChar(ch)) {\r\n                convertNext = true;\r\n            } else if (convertNext) {\r\n                ch = Character.toTitleCase(ch);\r\n                convertNext = false;\r\n            } else {\r\n                ch = Character.toLowerCase(ch);\r\n            }\r\n            convertedString.append(ch);\r\n        }\r\n\r\n        return convertedString.toString();\r\n    }\r\n}\r\n```\r\n\r\nmodule-info.java\r\n```lang-java\r\nmodule com.app.bankapplet {\r\n    requires javafx.controls;\r\n    requires javafx.fxml;\r\n    requires nitrite;\r\n\r\n    opens com.app.bankapplet to javafx.fxml;\r\n    exports com.app.bankapplet.bank;\r\n    exports com.app.bankapplet;\r\n}\r\n```\r\n\r\npom.xml\r\n```lang-xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;com.app&lt;/groupId&gt;\r\n    &lt;artifactId&gt;BankApplet&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;name&gt;BankApplet&lt;/name&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;junit.version&gt;5.9.2&lt;/junit.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\r\n            &lt;version&gt;20&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\r\n            &lt;version&gt;20&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\r\n            &lt;version&gt;${junit.version}&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\r\n            &lt;version&gt;${junit.version}&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n            &lt;version&gt;2.15.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.dizitart&lt;/groupId&gt;\r\n            &lt;artifactId&gt;nitrite&lt;/artifactId&gt;\r\n            &lt;version&gt;3.4.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.11.0&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;20&lt;/source&gt;\r\n                    &lt;target&gt;20&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;0.0.8&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;!-- Default configuration for running with: mvn clean javafx:run --&gt;\r\n                        &lt;id&gt;default-cli&lt;/id&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;mainClass&gt;com.app.bankapplet/com.app.bankapplet.Main&lt;/mainClass&gt;\r\n                            &lt;launcher&gt;app&lt;/launcher&gt;\r\n                            &lt;jlinkZipName&gt;app&lt;/jlinkZipName&gt;\r\n                            &lt;jlinkImageName&gt;app&lt;/jlinkImageName&gt;\r\n                            &lt;noManPages&gt;true&lt;/noManPages&gt;\r\n                            &lt;stripDebug&gt;true&lt;/stripDebug&gt;\r\n                            &lt;noHeaderFiles&gt;true&lt;/noHeaderFiles&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n&lt;/project&gt;\r\n```","title":"com.fasterxml.jackson.databind.exc.InvalidDefinitionException Invalid type definition for type `com.app.bankapplet.bank.Bank`","body":"<p>Trying to create a Java Object and store it in a <a href=\"https://www.dizitart.org/nitrite-database/\" rel=\"nofollow noreferrer\">NOsql Object (NO2 a.k.a Nitrite) database</a>.</p>\n<p>Upon trying to store the object in an object repository the com.fasterxml.jackson.databind.exc.InvalidDefinitionException exception is thrown.</p>\n<p>I have tried to export the bank.java class in the module-info.java file; I have tried to add a default constructor in the bank.java class. Neither have solved the problem.</p>\n<p>Thank you for the help in solving this error.</p>\n<p>The full error is displayed as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Caused by: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Invalid type definition for type `com.app.bankapplet.bank.Bank`: Failed to construct BeanSerializer for [simple type, class com.app.bankapplet.bank.Bank]: (java.lang.IllegalArgumentException) Failed to call `setAccess()` on Field 'id' (of class `com.app.bankapplet.bank.Bank`) due to `java.lang.reflect.InaccessibleObjectException`, problem: Unable to make field private int com.app.bankapplet.bank.Bank.id accessible: module com.app.bankapplet does not &quot;opens com.app.bankapplet.bank&quot; to unnamed module @6293abcc\n    at com.fasterxml.jackson.databind.exc.InvalidDefinitionException.from(InvalidDefinitionException.java:72)\n    at com.fasterxml.jackson.databind.SerializerProvider.reportBadTypeDefinition(SerializerProvider.java:1280)\n    at com.fasterxml.jackson.databind.ser.BeanSerializerFactory.constructBeanOrAddOnSerializer(BeanSerializerFactory.java:475)\n    at com.fasterxml.jackson.databind.ser.BeanSerializerFactory.findBeanOrAddOnSerializer(BeanSerializerFactory.java:295)\n    at com.fasterxml.jackson.databind.ser.BeanSerializerFactory._createSerializer2(BeanSerializerFactory.java:240)\n    at com.fasterxml.jackson.databind.ser.BeanSerializerFactory.createSerializer(BeanSerializerFactory.java:174)\n    at com.fasterxml.jackson.databind.SerializerProvider._createUntypedSerializer(SerializerProvider.java:1503)\n    at com.fasterxml.jackson.databind.SerializerProvider._createAndCacheUntypedSerializer(SerializerProvider.java:1451)\n    at com.fasterxml.jackson.databind.SerializerProvider.findValueSerializer(SerializerProvider.java:556)\n    at com.fasterxml.jackson.databind.SerializerProvider.findTypedValueSerializer(SerializerProvider.java:834)\n    at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:307)\n    at com.fasterxml.jackson.databind.ObjectMapper._convert(ObjectMapper.java:4522)\n    ... 18 more\nException running application com.app.bankapplet.Main\n</code></pre>\n<p>What I would expect to have happen is the object is stored in the object repository.</p>\n<p>Please find below my code:</p>\n<p>Main.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.app.bankapplet;\n\nimport com.app.bankapplet.bank.Bank;\nimport javafx.application.Application;\nimport javafx.application.Platform;\nimport javafx.fxml.FXMLLoader;\nimport javafx.scene.Scene;\nimport javafx.scene.control.*;\nimport javafx.scene.layout.GridPane;\nimport javafx.stage.Stage;\nimport javafx.util.Callback;\nimport org.dizitart.no2.Nitrite;\nimport org.dizitart.no2.NitriteCollection;\nimport org.dizitart.no2.objects.ObjectRepository;\n\nimport java.io.File;\nimport java.io.IOException;\nimport java.util.Optional;\n\npublic class Main extends Application {\n    private static Nitrite db;\n    private static Bank bank;\n    @Override\n    public void start(Stage stage) throws IOException {\n        // Generates a bank\n        bank = getBank();\n        ObjectRepository&lt;Bank&gt; bankObjectStore = db.getRepository(Bank.class);\n        bankObjectStore.insert(bank);\n\n        FXMLLoader fxmlLoader = new FXMLLoader(Main.class.getResource(&quot;main.fxml&quot;));\n        Scene scene = new Scene(fxmlLoader.load(), 800, 600);\n        stage.setTitle(&quot;Bank Manager&quot;);\n        stage.setScene(scene);\n        stage.show();\n    }\n    public static void main(String[] args) {\n        db = Nitrite.builder()\n                .filePath(new File(&quot;target/appdb.db&quot;))\n                .compressed()\n                .openOrCreate();\n        launch();\n    }\n    protected static Bank getBank() {\n        Dialog&lt;Bank&gt; dialog = new Dialog&lt;&gt;();\n        dialog.setTitle(&quot;New Bank&quot;);\n        dialog.setHeaderText(&quot;Enter the name of the bank:&quot;);\n\n        Label label = new Label(&quot;Bank Name: &quot;);\n        TextField text = new TextField();\n\n        GridPane gridPane = new GridPane();\n        gridPane.add(label, 1, 1);\n        gridPane.add(text, 2, 1);\n        dialog.getDialogPane().setContent(gridPane);\n\n        ButtonType buttonTypeOK = new ButtonType(&quot;OK&quot;, ButtonBar.ButtonData.OK_DONE);\n        dialog.getDialogPane().getButtonTypes().add(buttonTypeOK);\n\n        dialog.setResultConverter(new Callback&lt;ButtonType, Bank&gt;() {\n            @Override\n            public Bank call(ButtonType b) {\n                if(b == buttonTypeOK) {\n                    return new Bank(text.getText());\n                }\n                return null;\n            }\n        });\n\n        Optional&lt;Bank&gt; result = dialog.showAndWait();\n\n        if(result.isPresent()) {\n            return result.get();\n        }\n\n        return null;\n    }\n}\n</code></pre>\n<p>Bank.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.app.bankapplet.bank;\n\nimport org.dizitart.no2.objects.Id;\n\npublic class Bank {\n    @Id\n    private int id;\n    private String name;\n\n    public Bank() {\n\n    }\n    public Bank(String name) {\n        this.id = 0;\n        this.name = name;\n    }\n    public int getId() {\n        return id;\n    }\n    public String getName() {\n        return name;\n    }\n    public void setName(String name) {\n        this.name = name;\n    }\n    private static String toTitleCase(String item) {\n        if (item == null || item.isEmpty()) {\n            return item;\n        }\n\n        StringBuilder convertedString = new StringBuilder();\n        boolean convertNext = true;\n\n        for (char ch : item.toCharArray()) {\n            if (Character.isSpaceChar(ch)) {\n                convertNext = true;\n            } else if (convertNext) {\n                ch = Character.toTitleCase(ch);\n                convertNext = false;\n            } else {\n                ch = Character.toLowerCase(ch);\n            }\n            convertedString.append(ch);\n        }\n\n        return convertedString.toString();\n    }\n}\n</code></pre>\n<p>module-info.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>module com.app.bankapplet {\n    requires javafx.controls;\n    requires javafx.fxml;\n    requires nitrite;\n\n    opens com.app.bankapplet to javafx.fxml;\n    exports com.app.bankapplet.bank;\n    exports com.app.bankapplet;\n}\n</code></pre>\n<p>pom.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.app&lt;/groupId&gt;\n    &lt;artifactId&gt;BankApplet&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;BankApplet&lt;/name&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;junit.version&gt;5.9.2&lt;/junit.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\n            &lt;version&gt;20&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\n            &lt;version&gt;20&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n            &lt;version&gt;${junit.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n            &lt;version&gt;${junit.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n            &lt;version&gt;2.15.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.dizitart&lt;/groupId&gt;\n            &lt;artifactId&gt;nitrite&lt;/artifactId&gt;\n            &lt;version&gt;3.4.4&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.11.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;20&lt;/source&gt;\n                    &lt;target&gt;20&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n                &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;0.0.8&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;!-- Default configuration for running with: mvn clean javafx:run --&gt;\n                        &lt;id&gt;default-cli&lt;/id&gt;\n                        &lt;configuration&gt;\n                            &lt;mainClass&gt;com.app.bankapplet/com.app.bankapplet.Main&lt;/mainClass&gt;\n                            &lt;launcher&gt;app&lt;/launcher&gt;\n                            &lt;jlinkZipName&gt;app&lt;/jlinkZipName&gt;\n                            &lt;jlinkImageName&gt;app&lt;/jlinkImageName&gt;\n                            &lt;noManPages&gt;true&lt;/noManPages&gt;\n                            &lt;stripDebug&gt;true&lt;/stripDebug&gt;\n                            &lt;noHeaderFiles&gt;true&lt;/noHeaderFiles&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","bean-validation","resourcebundle"],"comments":[{"owner":{"account_id":404979,"reputation":18340,"user_id":773616,"accept_rate":83,"display_name":"Gunnar"},"score":0,"creation_date":1343160374,"post_id":11599208,"comment_id":15416590,"body_markdown":"What is it you actually want to achieve? Why do you want to add the bundle several times to your application?","body":"What is it you actually want to achieve? Why do you want to add the bundle several times to your application?"},{"owner":{"account_id":40043,"reputation":18749,"user_id":115835,"display_name":"Hardy"},"score":0,"creation_date":1343202159,"post_id":11599208,"comment_id":15427294,"body_markdown":"Can  you clarify your configuration? Where and how do you add another _ValidationMessages_it.properties_. Maybe you can outline the full structure of your war and of course why you want to add the same property file twice. In case you want to be able to specify multiple different properties file you should have a look at AggregateResourceBundleLocator (provided you are using Hibernate Validator)","body":"Can  you clarify your configuration? Where and how do you add another <i>ValidationMessages_it.properties</i>. Maybe you can outline the full structure of your war and of course why you want to add the same property file twice. In case you want to be able to specify multiple different properties file you should have a look at AggregateResourceBundleLocator (provided you are using Hibernate Validator)"},{"owner":{"account_id":192508,"reputation":2301,"user_id":433693,"accept_rate":89,"display_name":"Alf"},"score":0,"creation_date":1343209005,"post_id":11599208,"comment_id":15430336,"body_markdown":"@Hardy: it&#39;s not the same bundle, it is another one that contains other messages. See the edit on my post","body":"@Hardy: it&#39;s not the same bundle, it is another one that contains other messages. See the edit on my post"},{"owner":{"account_id":192508,"reputation":2301,"user_id":433693,"accept_rate":89,"display_name":"Alf"},"score":0,"creation_date":1343461748,"post_id":11599208,"comment_id":15515543,"body_markdown":"@Gunnar, since you are in JSR 349 EG may you have a look at my edits? I don&#39;t know if it&#39;s an error in my configuration, a bug or an expected behavior.","body":"@Gunnar, since you are in JSR 349 EG may you have a look at my edits? I don&#39;t know if it&#39;s an error in my configuration, a bug or an expected behavior."},{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":0,"creation_date":1607677603,"post_id":11599208,"comment_id":115352766,"body_markdown":"The FileFactory links for the uploaded webapps are now invalid: &quot;Invalid Download Link: This file may have been deleted, or it may have expired. This error can also occur if the file link is invalid.&quot;","body":"The FileFactory links for the uploaded webapps are now invalid: &quot;Invalid Download Link: This file may have been deleted, or it may have expired. This error can also occur if the file link is invalid.&quot;"}],"answers":[{"comments":[{"owner":{"account_id":192508,"reputation":2301,"user_id":433693,"accept_rate":89,"display_name":"Alf"},"score":0,"creation_date":1343376742,"post_id":11671418,"comment_id":15490074,"body_markdown":"I&#39;m a little confused. It&#39;s BV that compel me to use the same name for the bundles. What I&#39;m trying to do is a very common task so I thought EG has provided a standard way to accomplish it. Instead here you suggest to use an hibernate class. I&#39;ve opened another question, see edit2. Thank you very much for your patience","body":"I&#39;m a little confused. It&#39;s BV that compel me to use the same name for the bundles. What I&#39;m trying to do is a very common task so I thought EG has provided a standard way to accomplish it. Instead here you suggest to use an hibernate class. I&#39;ve opened another question, see edit2. Thank you very much for your patience"},{"owner":{"account_id":40043,"reputation":18749,"user_id":115835,"display_name":"Hardy"},"score":0,"creation_date":1343487716,"post_id":11671418,"comment_id":15519918,"body_markdown":"There is no &quot;standard&quot; way of doing what you want to do. There is an open issue for Bean Validation 1.1 (https://hibernate.onjira.com/browse/BVAL-252) to address the ability to provide constraint libraries, but there is nothing decided yet and the message interpolation would needs addressing as well. Maybe you have an idea on how it should work. If so provide your suggestion to the expert group. Check beanvalidation.org","body":"There is no &quot;standard&quot; way of doing what you want to do. There is an open issue for Bean Validation 1.1 (<a href=\"https://hibernate.onjira.com/browse/BVAL-252\" rel=\"nofollow noreferrer\">hibernate.onjira.com/browse/BVAL-252</a>) to address the ability to provide constraint libraries, but there is nothing decided yet and the message interpolation would needs addressing as well. Maybe you have an idea on how it should work. If so provide your suggestion to the expert group. Check beanvalidation.org"},{"owner":{"account_id":192508,"reputation":2301,"user_id":433693,"accept_rate":89,"display_name":"Alf"},"score":0,"creation_date":1343489343,"post_id":11671418,"comment_id":15520256,"body_markdown":"Thank you very much Hardy. I thought it was a bug. If you update your answer I&#39;ll glad to accept it.","body":"Thank you very much Hardy. I thought it was a bug. If you update your answer I&#39;ll glad to accept it."}],"tags":[],"owner":{"account_id":40043,"reputation":18749,"user_id":115835,"display_name":"Hardy"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1607677750,"creation_date":1343312571,"answer_id":11671418,"question_id":11599208,"body_markdown":"I think the solution in your case is the mentioned _AggregateResourceBundleLocator_. However, you cannot have the same name for the property files. Internally _ResourceBundle#getBundle_ is called which does return a single _ResourceBundle_. There is no concept of combining/merging properties files with the same name. \r\n\r\n**EDIT 1**\r\n\r\nRegarding a standard way of doing it - unfortunately there is none. There is an open issue for Bean Validation 1.1 ([BVAL-252](https://hibernate.atlassian.net/browse/BVAL-252)) to address the ability to provide constraint libraries, but there is nothing decided yet and the message interpolation would needs addressing as well. Maybe you have an idea on how it should work. If so provide your suggestion to the expert group. Check beanvalidation.org","title":"Conflict between ValidationMessages.properties files","body":"<p>I think the solution in your case is the mentioned <em>AggregateResourceBundleLocator</em>. However, you cannot have the same name for the property files. Internally <em>ResourceBundle#getBundle</em> is called which does return a single <em>ResourceBundle</em>. There is no concept of combining/merging properties files with the same name.</p>\n<p><strong>EDIT 1</strong></p>\n<p>Regarding a standard way of doing it - unfortunately there is none. There is an open issue for Bean Validation 1.1 (<a href=\"https://hibernate.atlassian.net/browse/BVAL-252\" rel=\"nofollow noreferrer\">BVAL-252</a>) to address the ability to provide constraint libraries, but there is nothing decided yet and the message interpolation would needs addressing as well. Maybe you have an idea on how it should work. If so provide your suggestion to the expert group. Check beanvalidation.org</p>\n"},{"comments":[{"owner":{"account_id":369402,"reputation":461,"user_id":716769,"display_name":"Bogdan Mart"},"score":0,"creation_date":1688468370,"post_id":33442715,"comment_id":135075355,"body_markdown":"This didn&#39;t work. I&#39;ve tried your @Bean definition, but it collected only resources from single JAR.  Hibernate Validator 6.1.5","body":"This didn&#39;t work. I&#39;ve tried your @Bean definition, but it collected only resources from single JAR.  Hibernate Validator 6.1.5"},{"owner":{"account_id":369402,"reputation":461,"user_id":716769,"display_name":"Bogdan Mart"},"score":0,"creation_date":1688469575,"post_id":33442715,"comment_id":135075627,"body_markdown":"But I am not in spring boot, but in Spring. I guess that&#39;s the problem","body":"But I am not in spring boot, but in Spring. I guess that&#39;s the problem"},{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":0,"creation_date":1688533109,"post_id":33442715,"comment_id":135084165,"body_markdown":"@BogdanMart This should work just as well in a Spring project as a Spring Boot project.  Both JAR files are imported and both have a file named `ValidationMessages.properties` (or one of its locale-specific variants)?","body":"@BogdanMart This should work just as well in a Spring project as a Spring Boot project.  Both JAR files are imported and both have a file named <code>ValidationMessages.properties</code> (or one of its locale-specific variants)?"},{"owner":{"account_id":369402,"reputation":461,"user_id":716769,"display_name":"Bogdan Mart"},"score":1,"creation_date":1688679084,"post_id":33442715,"comment_id":135110163,"body_markdown":"Yes. But as I have noticed, `PlatformResourceBundleLocator` gets instantiated multiple times with that parameter passed in as `false`. Hibernate is instantiating it. My guess is that Spring is using different instance than one I&#39;ve created. As we are using Validation of controller parameters, not manual validation, But we resorted to use single properties file located in same jar that our models, so it&#39;s good for now.  Perhaps would come back to this issue later.","body":"Yes. But as I have noticed, <code>PlatformResourceBundleLocator</code> gets instantiated multiple times with that parameter passed in as <code>false</code>. Hibernate is instantiating it. My guess is that Spring is using different instance than one I&#39;ve created. As we are using Validation of controller parameters, not manual validation, But we resorted to use single properties file located in same jar that our models, so it&#39;s good for now.  Perhaps would come back to this issue later."},{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":0,"creation_date":1688681312,"post_id":33442715,"comment_id":135110497,"body_markdown":"@BogdanMart I&#39;ve recently upgraded my app to Spring Boot 3.1.1.  I&#39;ve updated my answer to include my Boot config, which includes additional special configuration used by Web MVC.  Maybe this is what you need.","body":"@BogdanMart I&#39;ve recently upgraded my app to Spring Boot 3.1.1.  I&#39;ve updated my answer to include my Boot config, which includes additional special configuration used by Web MVC.  Maybe this is what you need."}],"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":5,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1688681583,"creation_date":1446229915,"answer_id":33442715,"question_id":11599208,"body_markdown":"By default, if multiple JAR/WAR/etc. files contain a resource bundle file with the exact same name, only one of them will be used for validator messages.  This is the issue here: both `commons.jar` and the application WAR contain a resource with name `ValidationMessages_it.properties`.\r\n\r\nHibernate Validator 5.2, released in July 2015, added support for aggregating all resource bundles with the same name from different JAR files.  This functionality is disabled by default, and can be configured in [org.hibernate.validator.resourceloading.PlatformResourceBundleLocator](http://docs.jboss.org/hibernate/validator/5.2/api/org/hibernate/validator/resourceloading/PlatformResourceBundleLocator.html#PlatformResourceBundleLocator-java.lang.String-java.lang.ClassLoader-boolean-).\r\n\r\nExample:\r\n\r\n```lang-java\r\nPlatformResourceBundleLocator resourceBundleLocator =\r\n        new PlatformResourceBundleLocator(\r\n                ResourceBundleMessageInterpolator.USER_VALIDATION_MESSAGES, \r\n                null, true);\r\n\r\nValidator validator = Validation.byProvider(HibernateValidator)\r\n    .configure()\r\n    .messageInterpolator(\r\n            new ResourceBundleMessageInterpolator(resourceBundleLocator))\r\n    .buildValidatorFactory()\r\n    .getValidator();\r\n```\r\n\r\nEquivalent code for a Spring project using Java config:\r\n\r\n```lang-java\r\n@Bean\r\npublic LocalValidatorFactoryBean validator() {\r\n    PlatformResourceBundleLocator resourceBundleLocator =\r\n            new PlatformResourceBundleLocator(\r\n                    ResourceBundleMessageInterpolator.USER_VALIDATION_MESSAGES, \r\n                    null, true);\r\n\r\n    LocalValidatorFactoryBean factoryBean = new LocalValidatorFactoryBean();\r\n    factoryBean.setMessageInterpolator(\r\n            new ResourceBundleMessageInterpolator(resourceBundleLocator));\r\n    return factoryBean;\r\n}\r\n```\r\n\r\nFor a Spring Boot 3.x project using Web MVC, the following configures both the default validator used by Spring, as well as the validator used by Web MVC for validating controller parameters and the like:\r\n\r\n```lang-java\r\nimport org.hibernate.validator.messageinterpolation.ResourceBundleMessageInterpolator;\r\nimport org.hibernate.validator.resourceloading.PlatformResourceBundleLocator;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.context.annotation.Import;\r\nimport org.springframework.validation.Validator;\r\nimport org.springframework.validation.beanvalidation.LocalValidatorFactoryBean;\r\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\r\n\r\n@Configuration\r\npublic class ValidationConfig {\r\n    /**\r\n     * Matches the bean name from {@code ValidationAutoConfiguration.defaultValidator}.\r\n     */\r\n    @Bean\r\n    public LocalValidatorFactoryBean defaultValidator() {\r\n        PlatformResourceBundleLocator resourceBundleLocator =\r\n                new PlatformResourceBundleLocator(\r\n                        ResourceBundleMessageInterpolator.USER_VALIDATION_MESSAGES, \r\n                        null, true);\r\n\r\n        LocalValidatorFactoryBean factoryBean = new LocalValidatorFactoryBean();\r\n        factoryBean.setMessageInterpolator(\r\n                new ResourceBundleMessageInterpolator(resourceBundleLocator));\r\n        return factoryBean;\r\n    }\r\n\r\n    @Bean\r\n    public WebMvcConfigurer validatorConfigurer(Validator defaultValidator) {\r\n        return new WebMvcConfigurer() {\r\n            @Override\r\n            public Validator getValidator() {\r\n                return defaultValidator;\r\n            }\r\n        };\r\n    }\r\n}\r\n```","title":"Conflict between ValidationMessages.properties files","body":"<p>By default, if multiple JAR/WAR/etc. files contain a resource bundle file with the exact same name, only one of them will be used for validator messages.  This is the issue here: both <code>commons.jar</code> and the application WAR contain a resource with name <code>ValidationMessages_it.properties</code>.</p>\n<p>Hibernate Validator 5.2, released in July 2015, added support for aggregating all resource bundles with the same name from different JAR files.  This functionality is disabled by default, and can be configured in <a href=\"http://docs.jboss.org/hibernate/validator/5.2/api/org/hibernate/validator/resourceloading/PlatformResourceBundleLocator.html#PlatformResourceBundleLocator-java.lang.String-java.lang.ClassLoader-boolean-\" rel=\"nofollow noreferrer\">org.hibernate.validator.resourceloading.PlatformResourceBundleLocator</a>.</p>\n<p>Example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>PlatformResourceBundleLocator resourceBundleLocator =\n        new PlatformResourceBundleLocator(\n                ResourceBundleMessageInterpolator.USER_VALIDATION_MESSAGES, \n                null, true);\n\nValidator validator = Validation.byProvider(HibernateValidator)\n    .configure()\n    .messageInterpolator(\n            new ResourceBundleMessageInterpolator(resourceBundleLocator))\n    .buildValidatorFactory()\n    .getValidator();\n</code></pre>\n<p>Equivalent code for a Spring project using Java config:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic LocalValidatorFactoryBean validator() {\n    PlatformResourceBundleLocator resourceBundleLocator =\n            new PlatformResourceBundleLocator(\n                    ResourceBundleMessageInterpolator.USER_VALIDATION_MESSAGES, \n                    null, true);\n\n    LocalValidatorFactoryBean factoryBean = new LocalValidatorFactoryBean();\n    factoryBean.setMessageInterpolator(\n            new ResourceBundleMessageInterpolator(resourceBundleLocator));\n    return factoryBean;\n}\n</code></pre>\n<p>For a Spring Boot 3.x project using Web MVC, the following configures both the default validator used by Spring, as well as the validator used by Web MVC for validating controller parameters and the like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.hibernate.validator.messageinterpolation.ResourceBundleMessageInterpolator;\nimport org.hibernate.validator.resourceloading.PlatformResourceBundleLocator;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.Import;\nimport org.springframework.validation.Validator;\nimport org.springframework.validation.beanvalidation.LocalValidatorFactoryBean;\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\n\n@Configuration\npublic class ValidationConfig {\n    /**\n     * Matches the bean name from {@code ValidationAutoConfiguration.defaultValidator}.\n     */\n    @Bean\n    public LocalValidatorFactoryBean defaultValidator() {\n        PlatformResourceBundleLocator resourceBundleLocator =\n                new PlatformResourceBundleLocator(\n                        ResourceBundleMessageInterpolator.USER_VALIDATION_MESSAGES, \n                        null, true);\n\n        LocalValidatorFactoryBean factoryBean = new LocalValidatorFactoryBean();\n        factoryBean.setMessageInterpolator(\n                new ResourceBundleMessageInterpolator(resourceBundleLocator));\n        return factoryBean;\n    }\n\n    @Bean\n    public WebMvcConfigurer validatorConfigurer(Validator defaultValidator) {\n        return new WebMvcConfigurer() {\n            @Override\n            public Validator getValidator() {\n                return defaultValidator;\n            }\n        };\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":192508,"reputation":2301,"user_id":433693,"accept_rate":89,"display_name":"Alf"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3510,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":11671418,"answer_count":2,"score":5,"last_activity_date":1688681583,"creation_date":1342950130,"question_id":11599208,"body_markdown":"I use to collect all my validation constraints in a common library. In the root of the jar I put a `ValidationMessages_it.properties` file.\r\nAll works fine, if I put this library into a jsf 2 war project all validation messages are shown correctly.\r\nHowever a problem arise if I put another `ValidationMessages_it.properties` in the war artifact too. In this case a `{library.message_key}` string is shown.\r\n\r\nI think Bean Validation find the right property file in the war and does not take into account that in the library.\r\nHow can I solve?\r\n\r\n# Example\r\n\r\nI have a library, commons.jar, that contains custom constraints. In order to set messages for these constraints I&#39;ve added a `ValidationMessages_it.properties` in the root of this library\r\n\r\n```lang-none\r\ncommons.jar\r\n    |\r\n    + library\r\n    |   |\r\n    |   + CustomConstraint.class\r\n    |\r\n    + ValidationMessages_it.properties\r\n```\r\n\r\n## ValidationMessages_it.properties\r\n\r\n```lang-none\r\nlibrary.custom=Questo &#232; l&#39;errore di cui parlavo\r\n```\r\n\r\n## CustomConstraint.java\r\n\r\n```java\r\n@Pattern( regexp = &quot;[a-z]&quot;, message = &quot;{library.custom}&quot; )\r\n@Constraint( validatedBy = {} )\r\n@Documented\r\n@Target( { ElementType.METHOD, ElementType.FIELD } )\r\n@Retention( RetentionPolicy.RUNTIME )\r\npublic @interface CustomConstraint {\r\n    String message() default &quot;C&#39;&#232; un errore&quot;;\r\n\r\n    Class&lt;?&gt;[] groups() default {};\r\n\r\n    Class&lt;? extends Payload&gt;[] payload() default {};\r\n}\r\n```\r\n\r\n**PS:** *note that the message key is on the @Pattern annotation instead of message(), this could seem a mistake but otherwise it never works!*\r\n\r\nAfter that I want to use this `commons.jar` in my web app project (jsf/mojarra 2.1). All works fine. The displayed error message is &quot;Questo &#232; l&#39;errore di cui parlavo&quot;.\r\n\r\nBut now suppose I define new validation constraints in my webapp, so I want to supply translations for these constraints by adding a `ValidationMessages_it.properties` in `WEB-INF/classes` folder. In this case the displayed error message is &quot;{library.custom}&quot;\r\n\r\nSo I think that BV (or jsf?) find the bundle in the war and does not take into account that in the commons.jar. It does not find the key `library.custom` in the `ValidationMessages_it.properties` that resides in the `WEB-INF/classes` folder thus return `{library.custom}` literally.\r\n\r\n# Example 2\r\n\r\nBased on [Bean Validation constraints in a shared library][1], my package structure seems correct. I uploaded a simple web app to show the problem:\r\n\r\n - [a war artifact that can be deployed in a java EE 6 compliant application server][2]\r\n - [a source zip that contains two maven projects, one for library and one for webapp][3]\r\n\r\nI tested the webapp in Glassfish 3.1.2, JBoss AS 7.1.1, Geronimo 3.0.0\r\n\r\nGlassfish and JBoss have the same behavior. In Geronimo it works a little bit better.\r\n\r\n  [1]: https://stackoverflow.com/questions/11683708/bean-validation-constraints-in-a-shared-library\r\n  [2]: http://www.filefactory.com/file/1v4e61w0ty77/n/bvtest-1_0_war\r\n  [3]: http://www.filefactory.com/file/1iteiatld9of/n/bvsource_zip","title":"Conflict between ValidationMessages.properties files","body":"<p>I use to collect all my validation constraints in a common library. In the root of the jar I put a <code>ValidationMessages_it.properties</code> file.\nAll works fine, if I put this library into a jsf 2 war project all validation messages are shown correctly.\nHowever a problem arise if I put another <code>ValidationMessages_it.properties</code> in the war artifact too. In this case a <code>{library.message_key}</code> string is shown.</p>\n<p>I think Bean Validation find the right property file in the war and does not take into account that in the library.\nHow can I solve?</p>\n<h1>Example</h1>\n<p>I have a library, commons.jar, that contains custom constraints. In order to set messages for these constraints I've added a <code>ValidationMessages_it.properties</code> in the root of this library</p>\n<pre class=\"lang-none prettyprint-override\"><code>commons.jar\n    |\n    + library\n    |   |\n    |   + CustomConstraint.class\n    |\n    + ValidationMessages_it.properties\n</code></pre>\n<h2>ValidationMessages_it.properties</h2>\n<pre class=\"lang-none prettyprint-override\"><code>library.custom=Questo  l'errore di cui parlavo\n</code></pre>\n<h2>CustomConstraint.java</h2>\n<pre class=\"lang-java prettyprint-override\"><code>@Pattern( regexp = &quot;[a-z]&quot;, message = &quot;{library.custom}&quot; )\n@Constraint( validatedBy = {} )\n@Documented\n@Target( { ElementType.METHOD, ElementType.FIELD } )\n@Retention( RetentionPolicy.RUNTIME )\npublic @interface CustomConstraint {\n    String message() default &quot;C' un errore&quot;;\n\n    Class&lt;?&gt;[] groups() default {};\n\n    Class&lt;? extends Payload&gt;[] payload() default {};\n}\n</code></pre>\n<p><strong>PS:</strong> <em>note that the message key is on the @Pattern annotation instead of message(), this could seem a mistake but otherwise it never works!</em></p>\n<p>After that I want to use this <code>commons.jar</code> in my web app project (jsf/mojarra 2.1). All works fine. The displayed error message is &quot;Questo  l'errore di cui parlavo&quot;.</p>\n<p>But now suppose I define new validation constraints in my webapp, so I want to supply translations for these constraints by adding a <code>ValidationMessages_it.properties</code> in <code>WEB-INF/classes</code> folder. In this case the displayed error message is &quot;{library.custom}&quot;</p>\n<p>So I think that BV (or jsf?) find the bundle in the war and does not take into account that in the commons.jar. It does not find the key <code>library.custom</code> in the <code>ValidationMessages_it.properties</code> that resides in the <code>WEB-INF/classes</code> folder thus return <code>{library.custom}</code> literally.</p>\n<h1>Example 2</h1>\n<p>Based on <a href=\"https://stackoverflow.com/questions/11683708/bean-validation-constraints-in-a-shared-library\">Bean Validation constraints in a shared library</a>, my package structure seems correct. I uploaded a simple web app to show the problem:</p>\n<ul>\n<li><a href=\"http://www.filefactory.com/file/1v4e61w0ty77/n/bvtest-1_0_war\" rel=\"nofollow noreferrer\">a war artifact that can be deployed in a java EE 6 compliant application server</a></li>\n<li><a href=\"http://www.filefactory.com/file/1iteiatld9of/n/bvsource_zip\" rel=\"nofollow noreferrer\">a source zip that contains two maven projects, one for library and one for webapp</a></li>\n</ul>\n<p>I tested the webapp in Glassfish 3.1.2, JBoss AS 7.1.1, Geronimo 3.0.0</p>\n<p>Glassfish and JBoss have the same behavior. In Geronimo it works a little bit better.</p>\n"},{"tags":["java","swing","user-interface","methods","filewriter"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1688681678,"post_id":76632802,"comment_id":135110537,"body_markdown":"You&#39;re asking a question about multiple steps, but you have not shown what you&#39;ve tried nor have you told us which step you&#39;re stuck on. If you state, &quot;all of them&quot;, then perhaps you&#39;re here too soon with this question and might want to try to solve this yourself first.  Then if still stuck, show your code and ask your more specific and site-appropriate question For best results on this site, please check out the [ask], [tour] and [help] links.","body":"You&#39;re asking a question about multiple steps, but you have not shown what you&#39;ve tried nor have you told us which step you&#39;re stuck on. If you state, &quot;all of them&quot;, then perhaps you&#39;re here too soon with this question and might want to try to solve this yourself first.  Then if still stuck, show your code and ask your more specific and site-appropriate question For best results on this site, please check out the <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>, <a href=\"https://stackoverflow.com/tour\">tour</a> and <a href=\"https://stackoverflow.com/help\">help center</a> links."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1688681923,"post_id":76632802,"comment_id":135110563,"body_markdown":"Also, have a look at the [Swing Tutorials](http://docs.oracle.com/javase/tutorial/uiswing/index.html), in particular, the sections on using ActionListeners with JButtons and the use of JTextFields. Also, the main Java tutorials can help you with File I&amp;O, all information needed to solve this problem.","body":"Also, have a look at the <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/index.html\" rel=\"nofollow noreferrer\">Swing Tutorials</a>, in particular, the sections on using ActionListeners with JButtons and the use of JTextFields. Also, the main Java tutorials can help you with File I&amp;O, all information needed to solve this problem."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1688687138,"post_id":76632802,"comment_id":135111026,"body_markdown":"*&quot;What should I do in general.&quot;* - In general ... break down complex tasks into simpler ones.  For example 1) work out how to do something in response to a button press, 2) work out how to get the text from a text box (e.g. as a string),  3) work out how to save some text (e.g. a string) to a file.","body":"<i>&quot;What should I do in general.&quot;</i> - In general ... break down complex tasks into simpler ones.  For example 1) work out how to do something in response to a button press, 2) work out how to get the text from a text box (e.g. as a string),  3) work out how to save some text (e.g. a string) to a file."}],"owner":{"account_id":23053650,"reputation":11,"user_id":17170043,"display_name":"Mert &#199;etinkaya"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1688681586,"answer_count":0,"score":0,"last_activity_date":1688681435,"creation_date":1688681435,"question_id":76632802,"body_markdown":"I want to write to a txt file by pressing JButton.I want to write JTextField.getText() to a txt file by pressing JButton. [enter image description here](https://i.stack.imgur.com/4d7d3.png) \r\nWhat should I do in general.\r\n\r\nI tried to write FileWriter class but didn&#39;t actually get it.","title":"Java Swing File Organization","body":"<p>I want to write to a txt file by pressing JButton.I want to write JTextField.getText() to a txt file by pressing JButton. <a href=\"https://i.stack.imgur.com/4d7d3.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nWhat should I do in general.</p>\n<p>I tried to write FileWriter class but didn't actually get it.</p>\n"},{"tags":["java","amazon-web-services","amazon-s3","aws-sdk-java-2.0","boxsdk"],"comments":[{"owner":{"account_id":58377,"reputation":247920,"user_id":174777,"display_name":"John Rotenstein"},"score":0,"creation_date":1555814296,"post_id":55778575,"comment_id":98230316,"body_markdown":"What is your specific question? Are you having a particular problem?","body":"What is your specific question? Are you having a particular problem?"}],"answers":[{"tags":[],"owner":{"account_id":11885621,"reputation":135,"user_id":8698105,"display_name":"pat"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1556203332,"creation_date":1556203332,"answer_id":55851966,"question_id":55778575,"body_markdown":"So i came up with this java code to copy files from box folder to Aws S3. I have used box-sdk-java, aws-sdk-java here.\r\n```\r\nimport com.amazonaws.services.s3.AmazonS3;\r\nimport com.amazonaws.auth.profile.ProfileCredentialsProvider;\r\nimport com.amazonaws.services.s3.AmazonS3ClientBuilder;\r\nimport com.amazonaws.services.s3.model.CompleteMultipartUploadRequest;\r\nimport com.amazonaws.services.s3.model.InitiateMultipartUploadRequest;\r\nimport com.amazonaws.services.s3.model.InitiateMultipartUploadResult;\r\nimport com.amazonaws.services.s3.model.PartETag;\r\nimport com.amazonaws.services.s3.model.UploadPartRequest;\r\nimport com.amazonaws.services.s3.model.UploadPartResult;\r\nimport com.box.sdk.BoxAPIConnection;\r\nimport com.box.sdk.BoxFile;\r\nimport com.box.sdk.BoxFolder;\r\nimport com.box.sdk.BoxItem;\r\nimport com.box.sdk.Metadata;\r\nimport java.io.File;\r\nimport java.io.FileNotFoundException;\r\nimport java.io.FileOutputStream;\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.util.ArrayList;\r\nimport java.util.Collection;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.Set;\r\n\r\nimport org.apache.commons.io.FileUtils;\r\n\r\npublic static String fileObjKeyName = &quot;&quot;;\r\npublic static String bucketName = &quot;s3Bucket&quot;;\r\n// store credentials in your local machine in aws config / credentials file.\r\npublic static ProfileCredentialsProvider credentialsProvider = new ProfileCredentialsProvider();\r\npublic static AmazonS3 s3Client = AmazonS3ClientBuilder\r\n\t\t\t.standard()\r\n\t\t\t.withCredentials(credentialsProvider)\r\n\t\t\t.withRegion(regionfOfS3Bucket)\r\n\t\t\t.build();\r\nString access_token = &quot;some_access_token&quot;;\r\nString refresh_token = &quot;some_refresh_token&quot;;\r\nBoxAPIConnection api = new BoxAPIConnection(client_id,\r\n                client_secret,\r\n                access_token,\r\n                refresh_token);\r\nBoxFolder folder = new BoxFolder(api,folderId);\r\n\r\nfor (BoxItem.Info itemInfo : folder) {\r\n    if (itemInfo instanceof BoxFile.Info) {\r\n        // getting file info, metadata\r\n        // have to upload the file content here to S3 bucket\r\n        BoxFile file = new BoxFile(api, itemInfo.getID());\r\n    \t    \tBoxFile.Info info = file.getInfo();\r\n    \t    \tSystem.out.println(info.getName());\r\n    \t    \tFileOutputStream stream;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tstream = new FileOutputStream(info.getName());\r\n\t\t\t\t\tfile.download(stream);\r\n\t    \t    \tstream.close();\r\n\t\t\t\t} catch (FileNotFoundException e) {\r\n\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t}\r\n    \t    \t\r\n    \t    \tFile file_new = FileUtils.getFile(info.getName());\r\n    \t    \tfileObjKeyName =  itemInfo.getID() + &quot;_&quot; + info.getName();\r\n    \t\t\tlong contentLength = file_new.length();\r\n    \t\t\tSystem.out.println(contentLength);\r\n    \t\t\tlong partSize = 5 * 1024 * 1024;\r\n    \t\t\tList&lt;PartETag&gt; partETags = new ArrayList&lt;PartETag&gt;();\r\n    \t\t\tInitiateMultipartUploadRequest initRequest = new InitiateMultipartUploadRequest(bucketName, fileObjKeyName);\r\n    \t\t\tInitiateMultipartUploadResult initResponse = s3Client.initiateMultipartUpload(initRequest);\r\n    \t\t\tlong filePosition = 0;\r\n    \t\t\tfor (int i = 1; filePosition &lt; contentLength; i++) {\r\n    \t\t\t\t// Because the last part could be less than 5 MB, adjust the\r\n    \t\t\t\t// part size as needed.\r\n    \t\t\t\tpartSize = Math.min(partSize, (contentLength - filePosition));\r\n    \t\t\t\t// Create the request to upload a part.\r\n    \t\t\t\tUploadPartRequest uploadRequest = new UploadPartRequest().withBucketName(bucketName).withKey(fileObjKeyName)\r\n    \t\t\t\t\t\t.withUploadId(initResponse.getUploadId()).withPartNumber(i).withFileOffset(filePosition).withFile(file_new).withPartSize(partSize);\r\n\r\n    \t\t\t\t// Upload the part and add the response&#39;s ETag to our list.\r\n    \t\t\t\tUploadPartResult uploadResult = s3Client.uploadPart(uploadRequest);\r\n    \t\t\t\tpartETags.add(uploadResult.getPartETag());\r\n\r\n    \t\t\t\tfilePosition += partSize;\r\n    \t\t\t}\r\n    \t\t\tCompleteMultipartUploadRequest compRequest = new CompleteMultipartUploadRequest(bucketName, fileObjKeyName, initResponse.getUploadId(), partETags);\r\n    \t\t\ts3Client.completeMultipartUpload(compRequest);\r\n    \t        file_new.delete();\r\n    } else if (itemInfo instanceof BoxFolder.Info)\r\n    {\r\n        BoxFolder.Info folderInfo = (BoxFolder.Info) itemInfo;\r\n       // Do something with the folder.\r\n\r\n\r\n     }\r\n        }\r\n```","title":"Copy files from box folder to AWS s3 bucket","body":"<p>So i came up with this java code to copy files from box folder to Aws S3. I have used box-sdk-java, aws-sdk-java here.</p>\n\n<pre><code>import com.amazonaws.services.s3.AmazonS3;\nimport com.amazonaws.auth.profile.ProfileCredentialsProvider;\nimport com.amazonaws.services.s3.AmazonS3ClientBuilder;\nimport com.amazonaws.services.s3.model.CompleteMultipartUploadRequest;\nimport com.amazonaws.services.s3.model.InitiateMultipartUploadRequest;\nimport com.amazonaws.services.s3.model.InitiateMultipartUploadResult;\nimport com.amazonaws.services.s3.model.PartETag;\nimport com.amazonaws.services.s3.model.UploadPartRequest;\nimport com.amazonaws.services.s3.model.UploadPartResult;\nimport com.box.sdk.BoxAPIConnection;\nimport com.box.sdk.BoxFile;\nimport com.box.sdk.BoxFolder;\nimport com.box.sdk.BoxItem;\nimport com.box.sdk.Metadata;\nimport java.io.File;\nimport java.io.FileNotFoundException;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Set;\n\nimport org.apache.commons.io.FileUtils;\n\npublic static String fileObjKeyName = \"\";\npublic static String bucketName = \"s3Bucket\";\n// store credentials in your local machine in aws config / credentials file.\npublic static ProfileCredentialsProvider credentialsProvider = new ProfileCredentialsProvider();\npublic static AmazonS3 s3Client = AmazonS3ClientBuilder\n            .standard()\n            .withCredentials(credentialsProvider)\n            .withRegion(regionfOfS3Bucket)\n            .build();\nString access_token = \"some_access_token\";\nString refresh_token = \"some_refresh_token\";\nBoxAPIConnection api = new BoxAPIConnection(client_id,\n                client_secret,\n                access_token,\n                refresh_token);\nBoxFolder folder = new BoxFolder(api,folderId);\n\nfor (BoxItem.Info itemInfo : folder) {\n    if (itemInfo instanceof BoxFile.Info) {\n        // getting file info, metadata\n        // have to upload the file content here to S3 bucket\n        BoxFile file = new BoxFile(api, itemInfo.getID());\n                BoxFile.Info info = file.getInfo();\n                System.out.println(info.getName());\n                FileOutputStream stream;\n                try {\n                    stream = new FileOutputStream(info.getName());\n                    file.download(stream);\n                    stream.close();\n                } catch (FileNotFoundException e) {\n                    e.printStackTrace();\n                }\n\n                File file_new = FileUtils.getFile(info.getName());\n                fileObjKeyName =  itemInfo.getID() + \"_\" + info.getName();\n                long contentLength = file_new.length();\n                System.out.println(contentLength);\n                long partSize = 5 * 1024 * 1024;\n                List&lt;PartETag&gt; partETags = new ArrayList&lt;PartETag&gt;();\n                InitiateMultipartUploadRequest initRequest = new InitiateMultipartUploadRequest(bucketName, fileObjKeyName);\n                InitiateMultipartUploadResult initResponse = s3Client.initiateMultipartUpload(initRequest);\n                long filePosition = 0;\n                for (int i = 1; filePosition &lt; contentLength; i++) {\n                    // Because the last part could be less than 5 MB, adjust the\n                    // part size as needed.\n                    partSize = Math.min(partSize, (contentLength - filePosition));\n                    // Create the request to upload a part.\n                    UploadPartRequest uploadRequest = new UploadPartRequest().withBucketName(bucketName).withKey(fileObjKeyName)\n                            .withUploadId(initResponse.getUploadId()).withPartNumber(i).withFileOffset(filePosition).withFile(file_new).withPartSize(partSize);\n\n                    // Upload the part and add the response's ETag to our list.\n                    UploadPartResult uploadResult = s3Client.uploadPart(uploadRequest);\n                    partETags.add(uploadResult.getPartETag());\n\n                    filePosition += partSize;\n                }\n                CompleteMultipartUploadRequest compRequest = new CompleteMultipartUploadRequest(bucketName, fileObjKeyName, initResponse.getUploadId(), partETags);\n                s3Client.completeMultipartUpload(compRequest);\n                file_new.delete();\n    } else if (itemInfo instanceof BoxFolder.Info)\n    {\n        BoxFolder.Info folderInfo = (BoxFolder.Info) itemInfo;\n       // Do something with the folder.\n\n\n     }\n        }\n</code></pre>\n"}],"owner":{"account_id":11885621,"reputation":135,"user_id":8698105,"display_name":"pat"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3032,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":55851966,"answer_count":1,"score":1,"last_activity_date":1688680969,"creation_date":1555802415,"question_id":55778575,"body_markdown":"I am working to copy box files to S3 bucket. How to get file object from box file to copy in to S3 bucket using box-java-sdk\r\n\r\nI have to tried to get file&#39;s metadata from box folder, but end up with limited documentation to get file object.\r\n\r\n```\r\nimport com.box.sdk.BoxAPIConnection;\r\nimport com.box.sdk.BoxFile;\r\nimport com.box.sdk.BoxFolder;\r\nimport com.box.sdk.BoxItem;\r\nimport com.box.sdk.Metadata;\r\n\r\nString access_token = &quot;some_access_token&quot;;\r\nString refresh_token = &quot;some_refresh_token&quot;;\r\nBoxAPIConnection api = new BoxAPIConnection(client_id,\r\n    \t\t\tclient_secret,\r\n    \t\t\taccess_token,\r\n    \t\t\trefresh_token);\r\nfor (BoxItem.Info itemInfo : folder) {\r\n    if (itemInfo instanceof BoxFile.Info) {\r\n    \t// getting file info, metadata\r\n        // have to upload the file content here to S3 bucket\r\n    } else if (itemInfo instanceof BoxFolder.Info)\r\n    {\r\n    \tBoxFolder.Info folderInfo = (BoxFolder.Info) itemInfo;\r\n       // Do something with the folder.\r\n    \t     \r\n\r\n     }\r\n    \t}\r\n ```\r\n\r\nGoal is to upload box content to S3 bucket.","title":"Copy files from box folder to AWS s3 bucket","body":"<p>I am working to copy box files to S3 bucket. How to get file object from box file to copy in to S3 bucket using box-java-sdk</p>\n\n<p>I have to tried to get file's metadata from box folder, but end up with limited documentation to get file object.</p>\n\n<pre><code>import com.box.sdk.BoxAPIConnection;\nimport com.box.sdk.BoxFile;\nimport com.box.sdk.BoxFolder;\nimport com.box.sdk.BoxItem;\nimport com.box.sdk.Metadata;\n\nString access_token = \"some_access_token\";\nString refresh_token = \"some_refresh_token\";\nBoxAPIConnection api = new BoxAPIConnection(client_id,\n                client_secret,\n                access_token,\n                refresh_token);\nfor (BoxItem.Info itemInfo : folder) {\n    if (itemInfo instanceof BoxFile.Info) {\n        // getting file info, metadata\n        // have to upload the file content here to S3 bucket\n    } else if (itemInfo instanceof BoxFolder.Info)\n    {\n        BoxFolder.Info folderInfo = (BoxFolder.Info) itemInfo;\n       // Do something with the folder.\n\n\n     }\n        }\n</code></pre>\n\n<p>Goal is to upload box content to S3 bucket.</p>\n"},{"tags":["java","javafx","fxml","scenebuilder"],"comments":[{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1688442678,"post_id":76609084,"comment_id":135071201,"body_markdown":"Using `private final static Model INSTANCE = new Model();` is frowned upon in `JavaFX`. Try to learn https://stackoverflow.com/questions/32342864/applying-mvc-with-javafx","body":"Using <code>private final static Model INSTANCE = new Model();</code> is frowned upon in <code>JavaFX</code>. Try to learn <a href=\"https://stackoverflow.com/questions/32342864/applying-mvc-with-javafx\" title=\"applying mvc with javafx\">stackoverflow.com/questions/32342864/applying-mvc-with-javaf&zwnj;&#8203;x</a>"},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1688499373,"post_id":76609084,"comment_id":135081230,"body_markdown":"May readers infer that `model` is meant to be a [singleton](https://stackoverflow.com/a/5724953/230513)?","body":"May readers infer that <code>model</code> is meant to be a <a href=\"https://stackoverflow.com/a/5724953/230513\">singleton</a>?"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1688572758,"post_id":76609084,"comment_id":135092447,"body_markdown":"Never initialize fields annotated `@FXML` (like `@FXML private TableView&lt;Employee&gt; employeeTable = new TableView&lt;Employee&gt;();`).","body":"Never initialize fields annotated <code>@FXML</code> (like <code>@FXML private TableView&lt;Employee&gt; employeeTable = new TableView&lt;Employee&gt;();</code>)."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1688573238,"post_id":76609084,"comment_id":135092587,"body_markdown":"Anyway, the problem seems to be that you are loading `employeeTab.fxml` twice: once in code in your (badly-named) `setControllers()` method (where it is never displayed) and once via the `&lt;fx:include&gt;` (where you never have a reference to the controller). I can&#39;t see anywhere where `populateTable()` is ever invoked, and if it was (in the controller for the view loaded by `&lt;fx:include&gt;`), surely it would throw a null pointer exception (because `model` is never initialized in that controller).","body":"Anyway, the problem seems to be that you are loading <code>employeeTab.fxml</code> twice: once in code in your (badly-named) <code>setControllers()</code> method (where it is never displayed) and once via the <code>&lt;fx:include&gt;</code> (where you never have a reference to the controller). I can&#39;t see anywhere where <code>populateTable()</code> is ever invoked, and if it was (in the controller for the view loaded by <code>&lt;fx:include&gt;</code>), surely it would throw a null pointer exception (because <code>model</code> is never initialized in that controller)."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1688573361,"post_id":76609084,"comment_id":135092621,"body_markdown":"See the [documentation](https://openjfx.io/javadoc/20/javafx.fxml/javafx/fxml/doc-files/introduction_to_fxml.html#nested_controllers) for how to properly access controllers for elements loaded via `&lt;fx:include&gt;`.","body":"See the <a href=\"https://openjfx.io/javadoc/20/javafx.fxml/javafx/fxml/doc-files/introduction_to_fxml.html#nested_controllers\" rel=\"nofollow noreferrer\">documentation</a> for how to properly access controllers for elements loaded via <code>&lt;fx:include&gt;</code>."},{"owner":{"account_id":15062476,"reputation":68,"user_id":10870722,"display_name":"avalc"},"score":0,"creation_date":1688606323,"post_id":76609084,"comment_id":135097350,"body_markdown":"@James_D removing the first load in `setControllers()` and adding `@FXML` fields for the tabs worked. Since you didn&#39;t post this as an answer, is there a way to mark my post as resolved?","body":"@James_D removing the first load in <code>setControllers()</code> and adding <code>@FXML</code> fields for the tabs worked. Since you didn&#39;t post this as an answer, is there a way to mark my post as resolved?"},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1688634609,"post_id":76609084,"comment_id":135101097,"body_markdown":"You can [write and accept your own answer](https://stackoverflow.com/help/self-answer), which you might want to do if you worked out how to solve your issue from comments.  You can quote the comment for attribution.","body":"You can <a href=\"https://stackoverflow.com/help/self-answer\">write and accept your own answer</a>, which you might want to do if you worked out how to solve your issue from comments.  You can quote the comment for attribution."}],"answers":[{"tags":[],"owner":{"account_id":15062476,"reputation":68,"user_id":10870722,"display_name":"avalc"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1688678219,"creation_date":1688678219,"answer_id":76632572,"question_id":76609084,"body_markdown":"@James_D&#39;s comment helped me find this solution:\r\n\r\nnew `tabHandler.fxml` for clarity of variables\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;?import javafx.scene.control.Tab?&gt;\r\n&lt;?import javafx.scene.control.TabPane?&gt;\r\n&lt;?import javafx.scene.layout.AnchorPane?&gt;\r\n&lt;AnchorPane xmlns=&quot;http://javafx.com/javafx&quot;\r\n            xmlns:fx=&quot;http://javafx.com/fxml&quot;\r\n            fx:controller=&quot;myorg.scheduler.gui.ControllerMain&quot;\r\n            prefHeight=&quot;600.0&quot; prefWidth=&quot;800.0&quot;&gt;\r\n\r\n    &lt;TabPane&gt;\r\n        &lt;tabs&gt;\r\n            &lt;Tab text=&quot;Employees&quot;&gt;\r\n                &lt;fx:include fx:id=&quot;employeeTabPage&quot; source=&quot;employeeTab.fxml&quot;/&gt;\r\n            &lt;/Tab&gt;\r\n            &lt;Tab text=&quot;Events&quot;&gt;\r\n                &lt;fx:include fx:id=&quot;eventTabPage&quot; source=&quot;eventTab.fxml&quot;/&gt;\r\n            &lt;/Tab&gt;\r\n        &lt;/tabs&gt;\r\n\r\n    &lt;/TabPane&gt;\r\n&lt;/AnchorPane&gt;\r\n```\r\n\r\nI edited `ControllerMain` to instead include the FXML `AnchorPane` and corresponding `ControllerEmployeeTab` variables :\r\n```\r\nimport javafx.fxml.FXML;\r\nimport javafx.scene.layout.AnchorPane;\r\n\r\npublic class ControllerMain extends Controller {\r\n    @FXML\r\n    public AnchorPane employeeTabPage;\r\n    @FXML\r\n    private ControllerEmployeeTab employeeTabPageController;\r\n\r\n    public ControllerEmployeeTab getControllerEmployeeTab() { return employeeTabPageController;}\r\n\r\n}\r\n```\r\n\r\nAnd finally removed `setControllers()` entirely and changed that call (in `start()`) to `mainController.getControllerEmployeeTab().setModel(model)`","title":"JavaFX TableView not displaying data (complex project structure)","body":"<p>@James_D's comment helped me find this solution:</p>\n<p>new <code>tabHandler.fxml</code> for clarity of variables</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;?import javafx.scene.control.Tab?&gt;\n&lt;?import javafx.scene.control.TabPane?&gt;\n&lt;?import javafx.scene.layout.AnchorPane?&gt;\n&lt;AnchorPane xmlns=&quot;http://javafx.com/javafx&quot;\n            xmlns:fx=&quot;http://javafx.com/fxml&quot;\n            fx:controller=&quot;myorg.scheduler.gui.ControllerMain&quot;\n            prefHeight=&quot;600.0&quot; prefWidth=&quot;800.0&quot;&gt;\n\n    &lt;TabPane&gt;\n        &lt;tabs&gt;\n            &lt;Tab text=&quot;Employees&quot;&gt;\n                &lt;fx:include fx:id=&quot;employeeTabPage&quot; source=&quot;employeeTab.fxml&quot;/&gt;\n            &lt;/Tab&gt;\n            &lt;Tab text=&quot;Events&quot;&gt;\n                &lt;fx:include fx:id=&quot;eventTabPage&quot; source=&quot;eventTab.fxml&quot;/&gt;\n            &lt;/Tab&gt;\n        &lt;/tabs&gt;\n\n    &lt;/TabPane&gt;\n&lt;/AnchorPane&gt;\n</code></pre>\n<p>I edited <code>ControllerMain</code> to instead include the FXML <code>AnchorPane</code> and corresponding <code>ControllerEmployeeTab</code> variables :</p>\n<pre><code>import javafx.fxml.FXML;\nimport javafx.scene.layout.AnchorPane;\n\npublic class ControllerMain extends Controller {\n    @FXML\n    public AnchorPane employeeTabPage;\n    @FXML\n    private ControllerEmployeeTab employeeTabPageController;\n\n    public ControllerEmployeeTab getControllerEmployeeTab() { return employeeTabPageController;}\n\n}\n</code></pre>\n<p>And finally removed <code>setControllers()</code> entirely and changed that call (in <code>start()</code>) to <code>mainController.getControllerEmployeeTab().setModel(model)</code></p>\n"}],"owner":{"account_id":15062476,"reputation":68,"user_id":10870722,"display_name":"avalc"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76632572,"answer_count":1,"score":1,"last_activity_date":1688678219,"creation_date":1688437954,"question_id":76609084,"body_markdown":"I have a seemingly common problem with JavaFX&#39;s TableView not displaying my data, but my project structure is complicated enough that I think I am missing something or something is not being properly passed to a different class. I am using the ```CellValueFactory``` method to identify the columns of my ```TableView&lt;Employee&gt;``` object, where ```Employee``` is a class I use to represent employees (ID, name, email, and phone, but only the first two fields are to be displayed in the table). The project uses the H2 embedded SQL database package, but that seems to be working so I didn&#39;t include my database package. The relevant parts of this project are structured like this:\r\n\r\n```\r\njava\r\n|__ myorg.scheduler\r\n    |__ gui\r\n        |__ [Abstract] Controller\r\n        |__ Model\r\n        |__ ControllerMain\r\n        |__ ControllerEmployeeTab\r\n        |__ ControllerAddEmployee\r\n        |__ MainApp\r\nresources\r\n|__ myorg.scheduler\r\n    |__ gui\r\n        |__ tabHandler.fxml\r\n        |__ employeeTab.fxml\r\n        |__ addEmployeePopup.fxml\r\n```\r\n\r\nAt this stage, the software should allow the user to add an employee to the database:\r\n[![enter image description here][1]][1]\r\n\r\nPressing the &quot;Add&quot; button brings up this menu, from addEmployeePopup.fxml\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/cLcCm.png\r\n  [2]: https://i.stack.imgur.com/unRPD.png\r\n\r\nThe code is as follows:\r\n\r\n\r\nGUI package:\r\n-\r\n\r\n**Model**\r\nSince I need to pass data from one controller to another, I have a ```Model``` class:\r\n\r\n```\r\nimport javafx.collections.FXCollections;\r\nimport javafx.collections.ObservableList;\r\nimport javafx.fxml.FXML;\r\nimport myorg.scheduler.database.EmployeeDAO;\r\nimport myorg.scheduler.people.Employee;\r\n\r\nimport java.sql.SQLException;\r\n\r\npublic class Model {\r\n\r\n    private final static Model INSTANCE = new Model();\r\n\r\n    @FXML\r\n    ObservableList&lt;Employee&gt; employeeList =  FXCollections.observableArrayList();\r\n\r\n    public static synchronized Model getInstance() {\r\n        return INSTANCE;\r\n    }\r\n\r\n    public void addEmployee(Employee employee) {\r\n        employeeList.add(employee);\r\n    }\r\n\r\n    public ObservableList&lt;Employee&gt; getAllEmployees() {\r\n        return employeeList;\r\n    }\r\n\r\n    public void setEmployeeList() throws SQLException, ClassNotFoundException {\r\n        employeeList = EmployeeDAO.getAllEmployees();\r\n    }\r\n}\r\n```\r\n\r\n**Controller**\r\n\r\nAll of the classes starting with &quot;Controller&quot; inherit from the abstract ```Controller``` class.\r\n\r\n\r\n```\r\npublic abstract class Controller {\r\n\r\n    private Model model;\r\n    public void setModel(Model model) {\r\n        this.model = model;\r\n    }\r\n\r\n    public Model getModel() {\r\n        return model;\r\n    }\r\n}\r\n```\r\n\r\n\r\n**ControllerEmployeeTab**\r\n\r\nThis is where the problem starts: ```populateTable()``` is supposed to get (from the synchronized ```Model``` class) the ```ObservableList``` of employees and populate the ```TableView``` with their IDs and Names. For some reason, it is not doing this.\r\n\r\n```\r\nimport javafx.beans.property.SimpleIntegerProperty;\r\nimport javafx.beans.property.SimpleStringProperty;\r\nimport javafx.event.ActionEvent;\r\nimport javafx.fxml.FXML;\r\nimport javafx.scene.control.Button;\r\nimport javafx.scene.control.TableColumn;\r\nimport javafx.scene.control.TableView;\r\nimport myorg.scheduler.people.Employee;\r\n\r\nimport java.io.IOException;\r\n\r\nimport static myorg.scheduler.gui.MainApp.loadEmployeePopup;\r\n\r\n\r\npublic class ControllerEmployeeTab extends Controller {\r\n\r\n    @FXML\r\n    public Button btnAddEmployee;\r\n    @FXML\r\n    TableView&lt;Employee&gt; employeeTable = new TableView&lt;Employee&gt;();\r\n    @FXML\r\n    TableColumn&lt;Employee, Integer&gt; employeeIDColumn;\r\n    @FXML\r\n    TableColumn&lt;Employee, String&gt; employeeNameColumn;\r\n\r\n\r\n\r\n    @FXML\r\n    public void populateTable() {\r\n        employeeIDColumn.setCellValueFactory(cellData -&gt; new SimpleIntegerProperty(cellData.getValue().getID()).asObject());\r\n        employeeNameColumn.setCellValueFactory(cellData -&gt; new SimpleStringProperty(cellData.getValue().getName()));\r\n        employeeTable.setItems(super.getModel().getAllEmployees());\r\n    }\r\n\r\n    @FXML\r\n    private void addEmployeePressed(ActionEvent ae) throws IOException {\r\n        loadEmployeePopup();\r\n    }\r\n}\r\n```\r\n\r\n**ControllerMain**\r\n\r\n\r\n```\r\nimport javafx.fxml.FXML;\r\nimport javafx.scene.control.*;\r\nimport javafx.scene.layout.AnchorPane;\r\nimport javafx.scene.layout.VBox;\r\n\r\npublic class ControllerMain extends Controller {\r\n\r\n    @FXML\r\n    private ControllerEmployeeTab controllerEmployeeTab;\r\n    @FXML\r\n    private ControllerAddEmployee controllerAddEmployee;\r\n\r\n    public ControllerEmployeeTab getControllerEmployeeTab() { return controllerEmployeeTab;}\r\n\r\n    public void setControllerEmployeeTab(ControllerEmployeeTab controllerEmployeeTab) {\r\n        this.controllerEmployeeTab = controllerEmployeeTab;\r\n    }\r\n    public ControllerAddEmployee getControllerAddEmployee() { return controllerAddEmployee;}\r\n\r\n    public void setControllerAddEmployee(ControllerAddEmployee controllerAddEmployee) {\r\n        this.controllerAddEmployee = controllerAddEmployee;\r\n    }\r\n}\r\n```\r\n\r\n\r\n**ControllerAddEmploye**\r\n\r\nEmployees are added by pressing the ```add``` button which calls ```addEmployeePressed()``` from the ```ControllerEmployeeTab``` class. The ```ControllerAddEmployee``` class handles this, and as far as I can tell employees are added to the database, the ```ObservableList``` of employees, and even the ```TableView``` but for some reason are not displaying. Adding employees to the database is working, but the code for that menu is here:\r\n\r\n\r\n```\r\nimport javafx.event.ActionEvent;\r\nimport javafx.fxml.FXML;\r\nimport javafx.scene.control.*;\r\nimport javafx.stage.Stage;\r\nimport myorg.scheduler.database.EmployeeDAO;\r\nimport myorg.scheduler.people.Employee;\r\n\r\nimport java.sql.SQLException;\r\n\r\npublic class ControllerAddEmployee extends Controller {\r\n\r\n    @FXML\r\n    private TextField nameField;\r\n\r\n    @FXML\r\n    private TextField emailField;\r\n\r\n    @FXML\r\n    private TextField phoneField;\r\n\r\n    @FXML\r\n    private TextField idField;\r\n\r\n    @FXML\r\n    private void addEmployee(ActionEvent ae) throws SQLException, ClassNotFoundException {\r\n        if (idField.getText() == null || nameField.getText() == null || emailField.getText() == null || phoneField.getText() == null ||\r\n                idField.getText().equals(&quot;&quot;) || nameField.getText().equals(&quot;&quot;) || emailField.getText().equals(&quot;&quot;) || phoneField.getText().equals(&quot;&quot;)) {\r\n            System.out.println(&quot;missing a field&quot;);\r\n        } else {\r\n            Employee newEmployee = new Employee(Integer.parseInt(idField.getText()), nameField.getText(), emailField.getText(), phoneField.getText());\r\n            super.getModel().addEmployee(newEmployee);\r\n            try {\r\n                EmployeeDAO.insertEmployee(newEmployee);\r\n            } catch (SQLException e) {\r\n                System.out.println(&quot;Problem occurred while inserting employee: &quot; + e);\r\n                throw e;\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n**MainApp**\r\n\r\nThis is where the model is instantiated, and where ```public void start``` is for the JavaFX package. ```populateTable()``` from the ```ControllerEmployeeTab``` class is called in ```start``\r\n\r\n```\r\nimport javafx.application.Application;\r\nimport javafx.fxml.FXMLLoader;\r\nimport javafx.scene.Parent;\r\nimport javafx.scene.Scene;\r\nimport javafx.stage.Modality;\r\nimport javafx.stage.Stage;\r\n\r\nimport java.io.IOException;\r\n\r\npublic class MainApp extends Application {\r\n\r\n    private static final Model model= Model.getInstance();\r\n\r\n    public void start(Stage stage) throws Exception {\r\n        FXMLLoader loader = new FXMLLoader();\r\n        loader.setLocation(MainApp.class.getResource(&quot;tabHandler.fxml&quot;));\r\n        Parent root = loader.load();\r\n\r\n        ControllerMain mainController = loader.getController();\r\n        mainController.setModel(model);\r\n        model.setEmployeeList();\r\n\r\n        setControllers(mainController);\r\n        mainController.getControllerEmployeeTab().populateTable();\r\n\r\n        Scene mainScene = new Scene(root);\r\n        stage.setScene(mainScene);\r\n        stage.show();\r\n    }\r\n\r\n\r\n    public void setControllers(ControllerMain controller) throws IOException {\r\n        FXMLLoader employeeTabLoader = new FXMLLoader();\r\n        employeeTabLoader.setLocation(MainApp.class.getResource(&quot;employeeTab.fxml&quot;));\r\n        employeeTabLoader.load();\r\n        controller.setControllerEmployeeTab(employeeTabLoader.getController());\r\n        controller.getControllerEmployeeTab().setModel(model);\r\n\r\n    }\r\n\r\n    public static void loadEmployeePopup() throws IOException {\r\n        FXMLLoader addEmployeeLoader = new FXMLLoader();\r\n        addEmployeeLoader.setLocation(MainApp.class.getResource(&quot;addEmployeePopup.fxml&quot;));\r\n        Parent addEmployeeRoot = addEmployeeLoader.load();\r\n\r\n        ControllerAddEmployee employeeController = addEmployeeLoader.getController();\r\n        employeeController.setModel(model);\r\n\r\n        Scene newEmployeeScene = new Scene(addEmployeeRoot);\r\n        Stage newEmployeeMenu = new Stage();\r\n        newEmployeeMenu.initModality(Modality.APPLICATION_MODAL);\r\n        newEmployeeMenu.setScene(newEmployeeScene);\r\n        newEmployeeMenu.setResizable(false);\r\n        newEmployeeMenu.show();\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        launch(args);\r\n    }\r\n\r\n}\r\n```\r\n\r\nGUI references\r\n-\r\n\r\n\r\n**tabHandler.fxml**\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;?import javafx.scene.control.Tab?&gt;\r\n&lt;?import javafx.scene.control.TabPane?&gt;\r\n&lt;?import javafx.scene.layout.AnchorPane?&gt;\r\n&lt;AnchorPane xmlns=&quot;http://javafx.com/javafx&quot;\r\n            xmlns:fx=&quot;http://javafx.com/fxml&quot;\r\n            fx:controller=&quot;myorg.scheduler.gui.ControllerMain&quot;\r\n            prefHeight=&quot;600.0&quot; prefWidth=&quot;800.0&quot;&gt;\r\n\r\n    &lt;TabPane&gt;\r\n        &lt;tabs&gt;\r\n            &lt;Tab fx:id=&quot;employeeTab&quot; text=&quot;Employees&quot;&gt;\r\n                &lt;fx:include fx:id=&quot;employeeTabPage&quot; source=&quot;employeeTab.fxml&quot;/&gt;\r\n            &lt;/Tab&gt;\r\n            &lt;Tab fx:id=&quot;eventTab&quot; text=&quot;Events&quot;&gt;\r\n                &lt;fx:include fx:id=&quot;eventTabPage&quot; source=&quot;eventTab.fxml&quot;/&gt;\r\n            &lt;/Tab&gt;\r\n        &lt;/tabs&gt;\r\n\r\n    &lt;/TabPane&gt;\r\n&lt;/AnchorPane&gt;\r\n\r\n```\r\n\r\n**employeeTab.fxml**\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;?import javafx.scene.control.*?&gt;\r\n&lt;?import javafx.scene.layout.*?&gt;\r\n\r\n&lt;AnchorPane xmlns=&quot;http://javafx.com/javafx&quot;\r\n            xmlns:fx=&quot;http://javafx.com/fxml&quot;\r\n            fx:controller=&quot;myorg.scheduler.gui.ControllerEmployeeTab&quot;\r\n            prefHeight=&quot;600.0&quot; prefWidth=&quot;800.0&quot;&gt;\r\n     &lt;children&gt;\r\n            &lt;HBox AnchorPane.bottomAnchor=&quot;531.0&quot; AnchorPane.leftAnchor=&quot;0.0&quot; AnchorPane.rightAnchor=&quot;0.0&quot; AnchorPane.topAnchor=&quot;0.0&quot;&gt;\r\n                &lt;children&gt;\r\n                    &lt;ToolBar prefHeight=&quot;40.0&quot; prefWidth=&quot;800.0&quot;&gt;\r\n                        &lt;items&gt;\r\n                            &lt;Button fx:id=&quot;btnAddEmployee&quot; mnemonicParsing=&quot;false&quot; onAction=&quot;#addEmployeePressed&quot; text=&quot;Add&quot; /&gt;\r\n                        &lt;/items&gt;\r\n                    &lt;/ToolBar&gt;\r\n                &lt;/children&gt;\r\n            &lt;/HBox&gt;\r\n            &lt;SplitPane dividerPositions=&quot;0.3&quot; layoutY=&quot;39.0&quot; prefHeight=&quot;532.0&quot; prefWidth=&quot;800.0&quot; AnchorPane.bottomAnchor=&quot;0.0&quot; AnchorPane.leftAnchor=&quot;0.0&quot; AnchorPane.rightAnchor=&quot;0.0&quot; AnchorPane.topAnchor=&quot;39.0&quot;&gt;\r\n                &lt;items&gt;\r\n                    &lt;AnchorPane minHeight=&quot;0.0&quot; minWidth=&quot;0.0&quot; prefHeight=&quot;160.0&quot; prefWidth=&quot;100.0&quot;&gt;\r\n                        &lt;children&gt;\r\n                            &lt;TableView fx:id=&quot;employeeTable&quot; layoutX=&quot;18.0&quot; layoutY=&quot;34.0&quot; prefHeight=&quot;530.0&quot; prefWidth=&quot;235.0&quot; AnchorPane.bottomAnchor=&quot;0.0&quot; AnchorPane.leftAnchor=&quot;0.0&quot; AnchorPane.rightAnchor=&quot;0.0&quot; AnchorPane.topAnchor=&quot;0.0&quot;&gt;\r\n                                &lt;columns&gt;\r\n                                    &lt;TableColumn fx:id=&quot;employeeIDColumn&quot; prefWidth=&quot;73.0&quot; text=&quot;ID&quot; /&gt;\r\n                                    &lt;TableColumn fx:id=&quot;employeeNameColumn&quot; prefWidth=&quot;161.0&quot; text=&quot;Name&quot; /&gt;\r\n                                &lt;/columns&gt;\r\n                            &lt;/TableView&gt;\r\n                        &lt;/children&gt;&lt;/AnchorPane&gt;\r\n                    &lt;AnchorPane minHeight=&quot;0.0&quot; minWidth=&quot;0.0&quot; prefHeight=&quot;160.0&quot; prefWidth=&quot;557.0&quot; /&gt;\r\n                &lt;/items&gt;\r\n            &lt;/SplitPane&gt;\r\n        &lt;/children&gt;&lt;/AnchorPane&gt;\r\n```\r\n\r\n**addEmployeePopup.fxml**\r\n\r\nI don&#39;t think the issue is here but regardless:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;?import javafx.geometry.*?&gt;\r\n&lt;?import javafx.scene.control.*?&gt;\r\n&lt;?import javafx.scene.layout.*?&gt;\r\n&lt;?import javafx.scene.text.*?&gt;\r\n\r\n&lt;AnchorPane prefHeight=&quot;500.0&quot; prefWidth=&quot;500.0&quot; xmlns=&quot;http://javafx.com/javafx/17.0.2-ea&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:controller=&quot;myorg.scheduler.gui.ControllerAddEmployee&quot;&gt;\r\n   &lt;children&gt;\r\n      &lt;TitledPane animated=&quot;false&quot; prefHeight=&quot;500.0&quot; prefWidth=&quot;500.0&quot; text=&quot;Add Employee&quot; AnchorPane.bottomAnchor=&quot;0.0&quot; AnchorPane.leftAnchor=&quot;0.0&quot; AnchorPane.rightAnchor=&quot;0.0&quot; AnchorPane.topAnchor=&quot;0.0&quot;&gt;\r\n        &lt;content&gt;\r\n          &lt;AnchorPane minHeight=&quot;0.0&quot; minWidth=&quot;0.0&quot; prefHeight=&quot;180.0&quot; prefWidth=&quot;200.0&quot;&gt;\r\n               &lt;children&gt;\r\n                  &lt;GridPane layoutX=&quot;87.6&quot; layoutY=&quot;41.6&quot; prefHeight=&quot;191.0&quot; prefWidth=&quot;307.0&quot; AnchorPane.bottomAnchor=&quot;251.0&quot; AnchorPane.leftAnchor=&quot;78.0&quot; AnchorPane.rightAnchor=&quot;113.0&quot; AnchorPane.topAnchor=&quot;32.0&quot;&gt;\r\n                    &lt;columnConstraints&gt;\r\n                      &lt;ColumnConstraints hgrow=&quot;SOMETIMES&quot; maxWidth=&quot;219.0&quot; minWidth=&quot;10.0&quot; prefWidth=&quot;156.0&quot; /&gt;\r\n                      &lt;ColumnConstraints hgrow=&quot;SOMETIMES&quot; maxWidth=&quot;304.0&quot; minWidth=&quot;10.0&quot; prefWidth=&quot;227.0&quot; /&gt;\r\n                    &lt;/columnConstraints&gt;\r\n                    &lt;rowConstraints&gt;\r\n                        &lt;RowConstraints minHeight=&quot;10.0&quot; prefHeight=&quot;30.0&quot; vgrow=&quot;SOMETIMES&quot; /&gt;\r\n                      &lt;RowConstraints maxHeight=&quot;40.0&quot; minHeight=&quot;10.0&quot; prefHeight=&quot;40.0&quot; vgrow=&quot;SOMETIMES&quot; /&gt;\r\n                      &lt;RowConstraints maxHeight=&quot;39.0&quot; minHeight=&quot;10.0&quot; prefHeight=&quot;38.0&quot; vgrow=&quot;SOMETIMES&quot; /&gt;\r\n                      &lt;RowConstraints minHeight=&quot;10.0&quot; prefHeight=&quot;30.0&quot; vgrow=&quot;SOMETIMES&quot; /&gt;\r\n                    &lt;/rowConstraints&gt;\r\n                     &lt;children&gt;\r\n                        &lt;Label text=&quot;ID:&quot; GridPane.halignment=&quot;RIGHT&quot;&gt;\r\n                           &lt;font&gt;\r\n                              &lt;Font size=&quot;18.0&quot; /&gt;\r\n                           &lt;/font&gt;\r\n                           &lt;GridPane.margin&gt;\r\n                              &lt;Insets right=&quot;10.0&quot; /&gt;\r\n                           &lt;/GridPane.margin&gt;\r\n                        &lt;/Label&gt;\r\n                        &lt;Label text=&quot;Full Name:&quot; textAlignment=&quot;RIGHT&quot; GridPane.halignment=&quot;RIGHT&quot; GridPane.rowIndex=&quot;1&quot;&gt;\r\n                           &lt;font&gt;\r\n                              &lt;Font size=&quot;18.0&quot; /&gt;\r\n                           &lt;/font&gt;\r\n                           &lt;GridPane.margin&gt;\r\n                              &lt;Insets right=&quot;10.0&quot; /&gt;\r\n                           &lt;/GridPane.margin&gt;\r\n                        &lt;/Label&gt;\r\n                        &lt;Label text=&quot;Email:&quot; GridPane.halignment=&quot;RIGHT&quot; GridPane.rowIndex=&quot;2&quot;&gt;\r\n                           &lt;font&gt;\r\n                              &lt;Font size=&quot;18.0&quot; /&gt;\r\n                           &lt;/font&gt;\r\n                           &lt;GridPane.margin&gt;\r\n                              &lt;Insets right=&quot;10.0&quot; /&gt;\r\n                           &lt;/GridPane.margin&gt;\r\n                        &lt;/Label&gt;\r\n                        &lt;Label text=&quot;Phone:&quot; GridPane.halignment=&quot;RIGHT&quot; GridPane.rowIndex=&quot;3&quot;&gt;\r\n                           &lt;GridPane.margin&gt;\r\n                              &lt;Insets right=&quot;10.0&quot; /&gt;\r\n                           &lt;/GridPane.margin&gt;\r\n                           &lt;font&gt;\r\n                              &lt;Font size=&quot;18.0&quot; /&gt;\r\n                           &lt;/font&gt;\r\n                        &lt;/Label&gt;\r\n                        &lt;TextField fx:id=&quot;idField&quot; GridPane.columnIndex=&quot;1&quot;&gt;\r\n                           &lt;GridPane.margin&gt;\r\n                              &lt;Insets left=&quot;10.0&quot; right=&quot;10.0&quot; /&gt;\r\n                           &lt;/GridPane.margin&gt;\r\n                        &lt;/TextField&gt;\r\n                        &lt;TextField fx:id=&quot;nameField&quot; GridPane.columnIndex=&quot;1&quot; GridPane.rowIndex=&quot;1&quot;&gt;\r\n                           &lt;GridPane.margin&gt;\r\n                              &lt;Insets left=&quot;10.0&quot; right=&quot;10.0&quot; /&gt;\r\n                           &lt;/GridPane.margin&gt;&lt;/TextField&gt;\r\n                        &lt;TextField fx:id=&quot;emailField&quot; GridPane.columnIndex=&quot;1&quot; GridPane.rowIndex=&quot;2&quot;&gt;\r\n                           &lt;GridPane.margin&gt;\r\n                              &lt;Insets left=&quot;10.0&quot; right=&quot;10.0&quot; /&gt;\r\n                           &lt;/GridPane.margin&gt;\r\n                        &lt;/TextField&gt;\r\n                        &lt;TextField fx:id=&quot;phoneField&quot; GridPane.columnIndex=&quot;1&quot; GridPane.rowIndex=&quot;3&quot;&gt;\r\n                           &lt;opaqueInsets&gt;\r\n                              &lt;Insets /&gt;\r\n                           &lt;/opaqueInsets&gt;\r\n                           &lt;GridPane.margin&gt;\r\n                              &lt;Insets left=&quot;10.0&quot; right=&quot;10.0&quot; /&gt;\r\n                           &lt;/GridPane.margin&gt;\r\n                        &lt;/TextField&gt;\r\n                     &lt;/children&gt;\r\n                  &lt;/GridPane&gt;\r\n                  &lt;ButtonBar layoutX=&quot;171.0&quot; layoutY=&quot;435.0&quot;&gt;\r\n                     &lt;buttons&gt;\r\n                        &lt;Button fx:id=&quot;btnCloseAddEmployee&quot; mnemonicParsing=&quot;false&quot; onAction=&quot;#closeAddEmployeeMenu&quot; text=&quot;Cancel&quot; /&gt;\r\n                        &lt;Button mnemonicParsing=&quot;false&quot; onAction=&quot;#addEmployee&quot; prefHeight=&quot;25.0&quot; prefWidth=&quot;137.0&quot; text=&quot;Add Employee&quot; /&gt;\r\n                     &lt;/buttons&gt;\r\n                  &lt;/ButtonBar&gt;\r\n               &lt;/children&gt;&lt;/AnchorPane&gt;\r\n        &lt;/content&gt;\r\n      &lt;/TitledPane&gt;\r\n   &lt;/children&gt;\r\n&lt;/AnchorPane&gt;\r\n```\r\n\r\nIn summary, employees are added to the ```TableView``` but not displayed, and I cannot figure out why. Thank you in advance for any assistance.","title":"JavaFX TableView not displaying data (complex project structure)","body":"<p>I have a seemingly common problem with JavaFX's TableView not displaying my data, but my project structure is complicated enough that I think I am missing something or something is not being properly passed to a different class. I am using the <code>CellValueFactory</code> method to identify the columns of my <code>TableView&lt;Employee&gt;</code> object, where <code>Employee</code> is a class I use to represent employees (ID, name, email, and phone, but only the first two fields are to be displayed in the table). The project uses the H2 embedded SQL database package, but that seems to be working so I didn't include my database package. The relevant parts of this project are structured like this:</p>\n<pre><code>java\n|__ myorg.scheduler\n    |__ gui\n        |__ [Abstract] Controller\n        |__ Model\n        |__ ControllerMain\n        |__ ControllerEmployeeTab\n        |__ ControllerAddEmployee\n        |__ MainApp\nresources\n|__ myorg.scheduler\n    |__ gui\n        |__ tabHandler.fxml\n        |__ employeeTab.fxml\n        |__ addEmployeePopup.fxml\n</code></pre>\n<p>At this stage, the software should allow the user to add an employee to the database:\n<a href=\"https://i.stack.imgur.com/cLcCm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cLcCm.png\" alt=\"enter image description here\" /></a></p>\n<p>Pressing the &quot;Add&quot; button brings up this menu, from addEmployeePopup.fxml\n<a href=\"https://i.stack.imgur.com/unRPD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/unRPD.png\" alt=\"enter image description here\" /></a></p>\n<p>The code is as follows:</p>\n<h2>GUI package:</h2>\n<p><strong>Model</strong>\nSince I need to pass data from one controller to another, I have a <code>Model</code> class:</p>\n<pre><code>import javafx.collections.FXCollections;\nimport javafx.collections.ObservableList;\nimport javafx.fxml.FXML;\nimport myorg.scheduler.database.EmployeeDAO;\nimport myorg.scheduler.people.Employee;\n\nimport java.sql.SQLException;\n\npublic class Model {\n\n    private final static Model INSTANCE = new Model();\n\n    @FXML\n    ObservableList&lt;Employee&gt; employeeList =  FXCollections.observableArrayList();\n\n    public static synchronized Model getInstance() {\n        return INSTANCE;\n    }\n\n    public void addEmployee(Employee employee) {\n        employeeList.add(employee);\n    }\n\n    public ObservableList&lt;Employee&gt; getAllEmployees() {\n        return employeeList;\n    }\n\n    public void setEmployeeList() throws SQLException, ClassNotFoundException {\n        employeeList = EmployeeDAO.getAllEmployees();\n    }\n}\n</code></pre>\n<p><strong>Controller</strong></p>\n<p>All of the classes starting with &quot;Controller&quot; inherit from the abstract <code>Controller</code> class.</p>\n<pre><code>public abstract class Controller {\n\n    private Model model;\n    public void setModel(Model model) {\n        this.model = model;\n    }\n\n    public Model getModel() {\n        return model;\n    }\n}\n</code></pre>\n<p><strong>ControllerEmployeeTab</strong></p>\n<p>This is where the problem starts: <code>populateTable()</code> is supposed to get (from the synchronized <code>Model</code> class) the <code>ObservableList</code> of employees and populate the <code>TableView</code> with their IDs and Names. For some reason, it is not doing this.</p>\n<pre><code>import javafx.beans.property.SimpleIntegerProperty;\nimport javafx.beans.property.SimpleStringProperty;\nimport javafx.event.ActionEvent;\nimport javafx.fxml.FXML;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.TableColumn;\nimport javafx.scene.control.TableView;\nimport myorg.scheduler.people.Employee;\n\nimport java.io.IOException;\n\nimport static myorg.scheduler.gui.MainApp.loadEmployeePopup;\n\n\npublic class ControllerEmployeeTab extends Controller {\n\n    @FXML\n    public Button btnAddEmployee;\n    @FXML\n    TableView&lt;Employee&gt; employeeTable = new TableView&lt;Employee&gt;();\n    @FXML\n    TableColumn&lt;Employee, Integer&gt; employeeIDColumn;\n    @FXML\n    TableColumn&lt;Employee, String&gt; employeeNameColumn;\n\n\n\n    @FXML\n    public void populateTable() {\n        employeeIDColumn.setCellValueFactory(cellData -&gt; new SimpleIntegerProperty(cellData.getValue().getID()).asObject());\n        employeeNameColumn.setCellValueFactory(cellData -&gt; new SimpleStringProperty(cellData.getValue().getName()));\n        employeeTable.setItems(super.getModel().getAllEmployees());\n    }\n\n    @FXML\n    private void addEmployeePressed(ActionEvent ae) throws IOException {\n        loadEmployeePopup();\n    }\n}\n</code></pre>\n<p><strong>ControllerMain</strong></p>\n<pre><code>import javafx.fxml.FXML;\nimport javafx.scene.control.*;\nimport javafx.scene.layout.AnchorPane;\nimport javafx.scene.layout.VBox;\n\npublic class ControllerMain extends Controller {\n\n    @FXML\n    private ControllerEmployeeTab controllerEmployeeTab;\n    @FXML\n    private ControllerAddEmployee controllerAddEmployee;\n\n    public ControllerEmployeeTab getControllerEmployeeTab() { return controllerEmployeeTab;}\n\n    public void setControllerEmployeeTab(ControllerEmployeeTab controllerEmployeeTab) {\n        this.controllerEmployeeTab = controllerEmployeeTab;\n    }\n    public ControllerAddEmployee getControllerAddEmployee() { return controllerAddEmployee;}\n\n    public void setControllerAddEmployee(ControllerAddEmployee controllerAddEmployee) {\n        this.controllerAddEmployee = controllerAddEmployee;\n    }\n}\n</code></pre>\n<p><strong>ControllerAddEmploye</strong></p>\n<p>Employees are added by pressing the <code>add</code> button which calls <code>addEmployeePressed()</code> from the <code>ControllerEmployeeTab</code> class. The <code>ControllerAddEmployee</code> class handles this, and as far as I can tell employees are added to the database, the <code>ObservableList</code> of employees, and even the <code>TableView</code> but for some reason are not displaying. Adding employees to the database is working, but the code for that menu is here:</p>\n<pre><code>import javafx.event.ActionEvent;\nimport javafx.fxml.FXML;\nimport javafx.scene.control.*;\nimport javafx.stage.Stage;\nimport myorg.scheduler.database.EmployeeDAO;\nimport myorg.scheduler.people.Employee;\n\nimport java.sql.SQLException;\n\npublic class ControllerAddEmployee extends Controller {\n\n    @FXML\n    private TextField nameField;\n\n    @FXML\n    private TextField emailField;\n\n    @FXML\n    private TextField phoneField;\n\n    @FXML\n    private TextField idField;\n\n    @FXML\n    private void addEmployee(ActionEvent ae) throws SQLException, ClassNotFoundException {\n        if (idField.getText() == null || nameField.getText() == null || emailField.getText() == null || phoneField.getText() == null ||\n                idField.getText().equals(&quot;&quot;) || nameField.getText().equals(&quot;&quot;) || emailField.getText().equals(&quot;&quot;) || phoneField.getText().equals(&quot;&quot;)) {\n            System.out.println(&quot;missing a field&quot;);\n        } else {\n            Employee newEmployee = new Employee(Integer.parseInt(idField.getText()), nameField.getText(), emailField.getText(), phoneField.getText());\n            super.getModel().addEmployee(newEmployee);\n            try {\n                EmployeeDAO.insertEmployee(newEmployee);\n            } catch (SQLException e) {\n                System.out.println(&quot;Problem occurred while inserting employee: &quot; + e);\n                throw e;\n            }\n        }\n    }\n}\n</code></pre>\n<p><strong>MainApp</strong></p>\n<p>This is where the model is instantiated, and where <code>public void start</code> is for the JavaFX package. <code>populateTable()</code> from the <code>ControllerEmployeeTab</code> class is called in ```start``</p>\n<pre><code>import javafx.application.Application;\nimport javafx.fxml.FXMLLoader;\nimport javafx.scene.Parent;\nimport javafx.scene.Scene;\nimport javafx.stage.Modality;\nimport javafx.stage.Stage;\n\nimport java.io.IOException;\n\npublic class MainApp extends Application {\n\n    private static final Model model= Model.getInstance();\n\n    public void start(Stage stage) throws Exception {\n        FXMLLoader loader = new FXMLLoader();\n        loader.setLocation(MainApp.class.getResource(&quot;tabHandler.fxml&quot;));\n        Parent root = loader.load();\n\n        ControllerMain mainController = loader.getController();\n        mainController.setModel(model);\n        model.setEmployeeList();\n\n        setControllers(mainController);\n        mainController.getControllerEmployeeTab().populateTable();\n\n        Scene mainScene = new Scene(root);\n        stage.setScene(mainScene);\n        stage.show();\n    }\n\n\n    public void setControllers(ControllerMain controller) throws IOException {\n        FXMLLoader employeeTabLoader = new FXMLLoader();\n        employeeTabLoader.setLocation(MainApp.class.getResource(&quot;employeeTab.fxml&quot;));\n        employeeTabLoader.load();\n        controller.setControllerEmployeeTab(employeeTabLoader.getController());\n        controller.getControllerEmployeeTab().setModel(model);\n\n    }\n\n    public static void loadEmployeePopup() throws IOException {\n        FXMLLoader addEmployeeLoader = new FXMLLoader();\n        addEmployeeLoader.setLocation(MainApp.class.getResource(&quot;addEmployeePopup.fxml&quot;));\n        Parent addEmployeeRoot = addEmployeeLoader.load();\n\n        ControllerAddEmployee employeeController = addEmployeeLoader.getController();\n        employeeController.setModel(model);\n\n        Scene newEmployeeScene = new Scene(addEmployeeRoot);\n        Stage newEmployeeMenu = new Stage();\n        newEmployeeMenu.initModality(Modality.APPLICATION_MODAL);\n        newEmployeeMenu.setScene(newEmployeeScene);\n        newEmployeeMenu.setResizable(false);\n        newEmployeeMenu.show();\n    }\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n\n}\n</code></pre>\n<h2>GUI references</h2>\n<p><strong>tabHandler.fxml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;?import javafx.scene.control.Tab?&gt;\n&lt;?import javafx.scene.control.TabPane?&gt;\n&lt;?import javafx.scene.layout.AnchorPane?&gt;\n&lt;AnchorPane xmlns=&quot;http://javafx.com/javafx&quot;\n            xmlns:fx=&quot;http://javafx.com/fxml&quot;\n            fx:controller=&quot;myorg.scheduler.gui.ControllerMain&quot;\n            prefHeight=&quot;600.0&quot; prefWidth=&quot;800.0&quot;&gt;\n\n    &lt;TabPane&gt;\n        &lt;tabs&gt;\n            &lt;Tab fx:id=&quot;employeeTab&quot; text=&quot;Employees&quot;&gt;\n                &lt;fx:include fx:id=&quot;employeeTabPage&quot; source=&quot;employeeTab.fxml&quot;/&gt;\n            &lt;/Tab&gt;\n            &lt;Tab fx:id=&quot;eventTab&quot; text=&quot;Events&quot;&gt;\n                &lt;fx:include fx:id=&quot;eventTabPage&quot; source=&quot;eventTab.fxml&quot;/&gt;\n            &lt;/Tab&gt;\n        &lt;/tabs&gt;\n\n    &lt;/TabPane&gt;\n&lt;/AnchorPane&gt;\n\n</code></pre>\n<p><strong>employeeTab.fxml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;?import javafx.scene.control.*?&gt;\n&lt;?import javafx.scene.layout.*?&gt;\n\n&lt;AnchorPane xmlns=&quot;http://javafx.com/javafx&quot;\n            xmlns:fx=&quot;http://javafx.com/fxml&quot;\n            fx:controller=&quot;myorg.scheduler.gui.ControllerEmployeeTab&quot;\n            prefHeight=&quot;600.0&quot; prefWidth=&quot;800.0&quot;&gt;\n     &lt;children&gt;\n            &lt;HBox AnchorPane.bottomAnchor=&quot;531.0&quot; AnchorPane.leftAnchor=&quot;0.0&quot; AnchorPane.rightAnchor=&quot;0.0&quot; AnchorPane.topAnchor=&quot;0.0&quot;&gt;\n                &lt;children&gt;\n                    &lt;ToolBar prefHeight=&quot;40.0&quot; prefWidth=&quot;800.0&quot;&gt;\n                        &lt;items&gt;\n                            &lt;Button fx:id=&quot;btnAddEmployee&quot; mnemonicParsing=&quot;false&quot; onAction=&quot;#addEmployeePressed&quot; text=&quot;Add&quot; /&gt;\n                        &lt;/items&gt;\n                    &lt;/ToolBar&gt;\n                &lt;/children&gt;\n            &lt;/HBox&gt;\n            &lt;SplitPane dividerPositions=&quot;0.3&quot; layoutY=&quot;39.0&quot; prefHeight=&quot;532.0&quot; prefWidth=&quot;800.0&quot; AnchorPane.bottomAnchor=&quot;0.0&quot; AnchorPane.leftAnchor=&quot;0.0&quot; AnchorPane.rightAnchor=&quot;0.0&quot; AnchorPane.topAnchor=&quot;39.0&quot;&gt;\n                &lt;items&gt;\n                    &lt;AnchorPane minHeight=&quot;0.0&quot; minWidth=&quot;0.0&quot; prefHeight=&quot;160.0&quot; prefWidth=&quot;100.0&quot;&gt;\n                        &lt;children&gt;\n                            &lt;TableView fx:id=&quot;employeeTable&quot; layoutX=&quot;18.0&quot; layoutY=&quot;34.0&quot; prefHeight=&quot;530.0&quot; prefWidth=&quot;235.0&quot; AnchorPane.bottomAnchor=&quot;0.0&quot; AnchorPane.leftAnchor=&quot;0.0&quot; AnchorPane.rightAnchor=&quot;0.0&quot; AnchorPane.topAnchor=&quot;0.0&quot;&gt;\n                                &lt;columns&gt;\n                                    &lt;TableColumn fx:id=&quot;employeeIDColumn&quot; prefWidth=&quot;73.0&quot; text=&quot;ID&quot; /&gt;\n                                    &lt;TableColumn fx:id=&quot;employeeNameColumn&quot; prefWidth=&quot;161.0&quot; text=&quot;Name&quot; /&gt;\n                                &lt;/columns&gt;\n                            &lt;/TableView&gt;\n                        &lt;/children&gt;&lt;/AnchorPane&gt;\n                    &lt;AnchorPane minHeight=&quot;0.0&quot; minWidth=&quot;0.0&quot; prefHeight=&quot;160.0&quot; prefWidth=&quot;557.0&quot; /&gt;\n                &lt;/items&gt;\n            &lt;/SplitPane&gt;\n        &lt;/children&gt;&lt;/AnchorPane&gt;\n</code></pre>\n<p><strong>addEmployeePopup.fxml</strong></p>\n<p>I don't think the issue is here but regardless:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;?import javafx.geometry.*?&gt;\n&lt;?import javafx.scene.control.*?&gt;\n&lt;?import javafx.scene.layout.*?&gt;\n&lt;?import javafx.scene.text.*?&gt;\n\n&lt;AnchorPane prefHeight=&quot;500.0&quot; prefWidth=&quot;500.0&quot; xmlns=&quot;http://javafx.com/javafx/17.0.2-ea&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:controller=&quot;myorg.scheduler.gui.ControllerAddEmployee&quot;&gt;\n   &lt;children&gt;\n      &lt;TitledPane animated=&quot;false&quot; prefHeight=&quot;500.0&quot; prefWidth=&quot;500.0&quot; text=&quot;Add Employee&quot; AnchorPane.bottomAnchor=&quot;0.0&quot; AnchorPane.leftAnchor=&quot;0.0&quot; AnchorPane.rightAnchor=&quot;0.0&quot; AnchorPane.topAnchor=&quot;0.0&quot;&gt;\n        &lt;content&gt;\n          &lt;AnchorPane minHeight=&quot;0.0&quot; minWidth=&quot;0.0&quot; prefHeight=&quot;180.0&quot; prefWidth=&quot;200.0&quot;&gt;\n               &lt;children&gt;\n                  &lt;GridPane layoutX=&quot;87.6&quot; layoutY=&quot;41.6&quot; prefHeight=&quot;191.0&quot; prefWidth=&quot;307.0&quot; AnchorPane.bottomAnchor=&quot;251.0&quot; AnchorPane.leftAnchor=&quot;78.0&quot; AnchorPane.rightAnchor=&quot;113.0&quot; AnchorPane.topAnchor=&quot;32.0&quot;&gt;\n                    &lt;columnConstraints&gt;\n                      &lt;ColumnConstraints hgrow=&quot;SOMETIMES&quot; maxWidth=&quot;219.0&quot; minWidth=&quot;10.0&quot; prefWidth=&quot;156.0&quot; /&gt;\n                      &lt;ColumnConstraints hgrow=&quot;SOMETIMES&quot; maxWidth=&quot;304.0&quot; minWidth=&quot;10.0&quot; prefWidth=&quot;227.0&quot; /&gt;\n                    &lt;/columnConstraints&gt;\n                    &lt;rowConstraints&gt;\n                        &lt;RowConstraints minHeight=&quot;10.0&quot; prefHeight=&quot;30.0&quot; vgrow=&quot;SOMETIMES&quot; /&gt;\n                      &lt;RowConstraints maxHeight=&quot;40.0&quot; minHeight=&quot;10.0&quot; prefHeight=&quot;40.0&quot; vgrow=&quot;SOMETIMES&quot; /&gt;\n                      &lt;RowConstraints maxHeight=&quot;39.0&quot; minHeight=&quot;10.0&quot; prefHeight=&quot;38.0&quot; vgrow=&quot;SOMETIMES&quot; /&gt;\n                      &lt;RowConstraints minHeight=&quot;10.0&quot; prefHeight=&quot;30.0&quot; vgrow=&quot;SOMETIMES&quot; /&gt;\n                    &lt;/rowConstraints&gt;\n                     &lt;children&gt;\n                        &lt;Label text=&quot;ID:&quot; GridPane.halignment=&quot;RIGHT&quot;&gt;\n                           &lt;font&gt;\n                              &lt;Font size=&quot;18.0&quot; /&gt;\n                           &lt;/font&gt;\n                           &lt;GridPane.margin&gt;\n                              &lt;Insets right=&quot;10.0&quot; /&gt;\n                           &lt;/GridPane.margin&gt;\n                        &lt;/Label&gt;\n                        &lt;Label text=&quot;Full Name:&quot; textAlignment=&quot;RIGHT&quot; GridPane.halignment=&quot;RIGHT&quot; GridPane.rowIndex=&quot;1&quot;&gt;\n                           &lt;font&gt;\n                              &lt;Font size=&quot;18.0&quot; /&gt;\n                           &lt;/font&gt;\n                           &lt;GridPane.margin&gt;\n                              &lt;Insets right=&quot;10.0&quot; /&gt;\n                           &lt;/GridPane.margin&gt;\n                        &lt;/Label&gt;\n                        &lt;Label text=&quot;Email:&quot; GridPane.halignment=&quot;RIGHT&quot; GridPane.rowIndex=&quot;2&quot;&gt;\n                           &lt;font&gt;\n                              &lt;Font size=&quot;18.0&quot; /&gt;\n                           &lt;/font&gt;\n                           &lt;GridPane.margin&gt;\n                              &lt;Insets right=&quot;10.0&quot; /&gt;\n                           &lt;/GridPane.margin&gt;\n                        &lt;/Label&gt;\n                        &lt;Label text=&quot;Phone:&quot; GridPane.halignment=&quot;RIGHT&quot; GridPane.rowIndex=&quot;3&quot;&gt;\n                           &lt;GridPane.margin&gt;\n                              &lt;Insets right=&quot;10.0&quot; /&gt;\n                           &lt;/GridPane.margin&gt;\n                           &lt;font&gt;\n                              &lt;Font size=&quot;18.0&quot; /&gt;\n                           &lt;/font&gt;\n                        &lt;/Label&gt;\n                        &lt;TextField fx:id=&quot;idField&quot; GridPane.columnIndex=&quot;1&quot;&gt;\n                           &lt;GridPane.margin&gt;\n                              &lt;Insets left=&quot;10.0&quot; right=&quot;10.0&quot; /&gt;\n                           &lt;/GridPane.margin&gt;\n                        &lt;/TextField&gt;\n                        &lt;TextField fx:id=&quot;nameField&quot; GridPane.columnIndex=&quot;1&quot; GridPane.rowIndex=&quot;1&quot;&gt;\n                           &lt;GridPane.margin&gt;\n                              &lt;Insets left=&quot;10.0&quot; right=&quot;10.0&quot; /&gt;\n                           &lt;/GridPane.margin&gt;&lt;/TextField&gt;\n                        &lt;TextField fx:id=&quot;emailField&quot; GridPane.columnIndex=&quot;1&quot; GridPane.rowIndex=&quot;2&quot;&gt;\n                           &lt;GridPane.margin&gt;\n                              &lt;Insets left=&quot;10.0&quot; right=&quot;10.0&quot; /&gt;\n                           &lt;/GridPane.margin&gt;\n                        &lt;/TextField&gt;\n                        &lt;TextField fx:id=&quot;phoneField&quot; GridPane.columnIndex=&quot;1&quot; GridPane.rowIndex=&quot;3&quot;&gt;\n                           &lt;opaqueInsets&gt;\n                              &lt;Insets /&gt;\n                           &lt;/opaqueInsets&gt;\n                           &lt;GridPane.margin&gt;\n                              &lt;Insets left=&quot;10.0&quot; right=&quot;10.0&quot; /&gt;\n                           &lt;/GridPane.margin&gt;\n                        &lt;/TextField&gt;\n                     &lt;/children&gt;\n                  &lt;/GridPane&gt;\n                  &lt;ButtonBar layoutX=&quot;171.0&quot; layoutY=&quot;435.0&quot;&gt;\n                     &lt;buttons&gt;\n                        &lt;Button fx:id=&quot;btnCloseAddEmployee&quot; mnemonicParsing=&quot;false&quot; onAction=&quot;#closeAddEmployeeMenu&quot; text=&quot;Cancel&quot; /&gt;\n                        &lt;Button mnemonicParsing=&quot;false&quot; onAction=&quot;#addEmployee&quot; prefHeight=&quot;25.0&quot; prefWidth=&quot;137.0&quot; text=&quot;Add Employee&quot; /&gt;\n                     &lt;/buttons&gt;\n                  &lt;/ButtonBar&gt;\n               &lt;/children&gt;&lt;/AnchorPane&gt;\n        &lt;/content&gt;\n      &lt;/TitledPane&gt;\n   &lt;/children&gt;\n&lt;/AnchorPane&gt;\n</code></pre>\n<p>In summary, employees are added to the <code>TableView</code> but not displayed, and I cannot figure out why. Thank you in advance for any assistance.</p>\n"},{"tags":["java","spring-boot","jwt","bearer-token","spring-boot-security"],"comments":[{"owner":{"account_id":8047538,"reputation":423,"user_id":6067302,"display_name":"TomekK"},"score":1,"creation_date":1688676985,"post_id":76632398,"comment_id":135109886,"body_markdown":"General way to do this is to add Roles to the jwt token and then use an annotation like @PreAuthorize on the controller methods. I think you need to add the roles to the authToken in the filter so that principal has these roles.","body":"General way to do this is to add Roles to the jwt token and then use an annotation like @PreAuthorize on the controller methods. I think you need to add the roles to the authToken in the filter so that principal has these roles."},{"owner":{"account_id":13033096,"reputation":775,"user_id":9418902,"display_name":"Csisanyi"},"score":0,"creation_date":1688677801,"post_id":76632398,"comment_id":135110000,"body_markdown":"https://www.baeldung.com/spring-security-check-user-role check this out.\n/@PreAuthorize will probably do the trick as mentioned by @TomeKK","body":"<a href=\"https://www.baeldung.com/spring-security-check-user-role\" rel=\"nofollow noreferrer\">baeldung.com/spring-security-check-user-role</a> check this out. /@PreAuthorize will probably do the trick as mentioned by @TomeKK"}],"answers":[{"comments":[{"owner":{"account_id":7292020,"reputation":868,"user_id":5558106,"display_name":"Serg Vasylchak"},"score":0,"creation_date":1688677609,"post_id":76632487,"comment_id":135109962,"body_markdown":"Like @TomekK suggested it does indeed make sense to add roles to the token, so you don&#39;t have to load user from DB with each request - the data in JWT token is trusted as long as signature is correct.","body":"Like @TomekK suggested it does indeed make sense to add roles to the token, so you don&#39;t have to load user from DB with each request - the data in JWT token is trusted as long as signature is correct."},{"owner":{"account_id":28965643,"reputation":11,"user_id":22187164,"display_name":"Max"},"score":0,"creation_date":1688680208,"post_id":76632487,"comment_id":135110321,"body_markdown":"int the (...) part i put in the paths right? and thats it? the http methods are assigned to the roles then? or do i need annotations in the controller class?\nand is tehre a difference between hasRole and hasAuthority?","body":"int the (...) part i put in the paths right? and thats it? the http methods are assigned to the roles then? or do i need annotations in the controller class? and is tehre a difference between hasRole and hasAuthority?"},{"owner":{"account_id":7292020,"reputation":868,"user_id":5558106,"display_name":"Serg Vasylchak"},"score":0,"creation_date":1688680571,"post_id":76632487,"comment_id":135110383,"body_markdown":"If you define the customizer in configuration, you don&#39;t need the annotations. Generally speaking - roles are authorities as well. The difference is how Spring checks them. `hasRole(&#39;ADMIN&#39;)` will check if there is `ROLE_ADMIN` value in authorities. `hasAuthority(&#39;ADMIN&#39;)` will check if there is `ADMIN` value in authorities.","body":"If you define the customizer in configuration, you don&#39;t need the annotations. Generally speaking - roles are authorities as well. The difference is how Spring checks them. <code>hasRole(&#39;ADMIN&#39;)</code> will check if there is <code>ROLE_ADMIN</code> value in authorities. <code>hasAuthority(&#39;ADMIN&#39;)</code> will check if there is <code>ADMIN</code> value in authorities."},{"owner":{"account_id":7292020,"reputation":868,"user_id":5558106,"display_name":"Serg Vasylchak"},"score":0,"creation_date":1688680613,"post_id":76632487,"comment_id":135110390,"body_markdown":"Prefix `ROLE_` is also configurable","body":"Prefix <code>ROLE_</code> is also configurable"},{"owner":{"account_id":28965643,"reputation":11,"user_id":22187164,"display_name":"Max"},"score":0,"creation_date":1688681163,"post_id":76632487,"comment_id":135110470,"body_markdown":"thank you both for your help!!","body":"thank you both for your help!!"}],"tags":[],"owner":{"account_id":7292020,"reputation":868,"user_id":5558106,"display_name":"Serg Vasylchak"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1688677049,"creation_date":1688677049,"answer_id":76632487,"question_id":76632398,"body_markdown":"You already have a fully working solution. Just extend a customizer\r\n\r\n```\r\n\t\t\t\t.authorizeHttpRequests(auth -&gt; auth\r\n\t\t\t\t\t\t.requestMatchers(&quot;/api/v1/auth/**&quot;).permitAll()\r\n\t\t\t\t\t\t.requestMatchers(...).hasRole(&quot;USER&quot;)\r\n\t\t\t\t\t\t.requestMatchers(...).hasAnyRole(&quot;USER&quot;, &quot;ADMIN&quot;)\r\n\t\t\t\t\t\t.requestMatchers(...).hasAuthority(&quot;USER&quot;)\r\n\t\t\t\t\t\t.requestMatchers(...).hasAnyAuthority(&quot;USER&quot;, &quot;ADMIN&quot;)\r\n\t\t\t\t\t\t.anyRequest().authenticated()\r\n\t\t\t\t)\r\n```","title":"Spring-Boot Security use Roles","body":"<p>You already have a fully working solution. Just extend a customizer</p>\n<pre><code>                .authorizeHttpRequests(auth -&gt; auth\n                        .requestMatchers(&quot;/api/v1/auth/**&quot;).permitAll()\n                        .requestMatchers(...).hasRole(&quot;USER&quot;)\n                        .requestMatchers(...).hasAnyRole(&quot;USER&quot;, &quot;ADMIN&quot;)\n                        .requestMatchers(...).hasAuthority(&quot;USER&quot;)\n                        .requestMatchers(...).hasAnyAuthority(&quot;USER&quot;, &quot;ADMIN&quot;)\n                        .anyRequest().authenticated()\n                )\n</code></pre>\n"}],"owner":{"account_id":28965643,"reputation":11,"user_id":22187164,"display_name":"Max"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":192,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76632487,"answer_count":1,"score":1,"last_activity_date":1688677049,"creation_date":1688675777,"question_id":76632398,"body_markdown":"I have recently looked into Spring-Boot and wanted to make a registration and login form for my application.\r\nI have watched a video and build my application around, what he said in the video.\r\n\r\nThe authentication works and a jwt token is generated. When I have a valid token, i can send requests to methods without getting a 403 response.\r\n\r\nMy question: My User Class has a Role, which is an enum (USER, ADMIN)\r\n\r\nHow can I configure my application to check what role the current User has and bind this role to certain methods?\r\n\r\nHere is my Code:\r\n\r\n*User Entity*\r\n\r\n\r\n```\r\n@Builder\r\n@Getter\r\n@Setter\r\n@ToString\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Entity(name = &quot;users&quot;)\r\npublic class User implements UserDetails {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @Column(nullable = false, unique = true, columnDefinition = &quot;varchar(30)&quot;)\r\n    @Email\r\n    private String email;\r\n\r\n    @Column(nullable = false)\r\n    private String firstName;\r\n\r\n    @Column(nullable = false)\r\n    private String lastName;\r\n\r\n    @Column(nullable = false, columnDefinition = &quot;varchar(60)&quot;)\r\n    @Length(min = 8, max = 256)\r\n    @NotBlank\r\n    private String password;\r\n\r\n    @Column\r\n    @Enumerated(EnumType.STRING)\r\n    private Role role;\r\n\r\n    @Column(nullable = false)\r\n    private String teamName;\r\n\r\n    @Column(nullable = false)\r\n    private int overallScore;\r\n\r\n    @Column(nullable = false)\r\n    private int gameDayScore;\r\n\r\n    @ManyToMany\r\n    @JoinTable(\r\n            name = &quot;users_players&quot;,\r\n            joinColumns = {@JoinColumn(name = &quot;user_id&quot;, nullable = false)},\r\n            inverseJoinColumns = {@JoinColumn(name = &quot;player_id&quot;, nullable = false)}\r\n    )\r\n    @JsonIgnoreProperties({&quot;users&quot;})\r\n    private List&lt;Player&gt; players;\r\n\r\n\r\n    @Override\r\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\r\n        return List.of(new SimpleGrantedAuthority(role.name()));\r\n    }\r\n\r\n    @Override\r\n    public String getUsername() {\r\n        return email;\r\n    }\r\n\r\n    @Override\r\n    public boolean isAccountNonExpired() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isAccountNonLocked() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isCredentialsNonExpired() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isEnabled() {\r\n        return true;\r\n    }\r\n}\r\n```\r\n\r\n*Role Enum Class*\r\n\r\n\r\n```\r\npublic enum Role{\r\n    USER,\r\n    ADMIN;\r\n}\r\n```\r\n\r\n*JwtService*\r\n\r\n\r\n```\r\n@Service\r\npublic class JwtService {\r\n\r\n    private static final String SECRET_KEY = &quot;b7acf8204b85ab7cec6e73b91f682677d642d328fdec7788e8cbff11ff1a5b22&quot;;\r\n\r\n    public String extractUsername(String jwtToken) {\r\n        return extractClaim(jwtToken, Claims::getSubject);\r\n    }\r\n\r\n    public &lt;T&gt; T extractClaim(String jwtToken, Function&lt;Claims, T&gt; claimsResolver) {\r\n        final Claims claims = extractAllclaims(jwtToken);\r\n        return claimsResolver.apply(claims);\r\n    }\r\n\r\n    public String generateJwtToken(Map&lt;String, Object&gt; extraClaims, UserDetails userDetails) {\r\n        return Jwts.builder()\r\n                .setClaims(extraClaims)\r\n                .setSubject(userDetails.getUsername())\r\n                .setIssuedAt(new Date(System.currentTimeMillis()))\r\n                .setExpiration(new Date(System.currentTimeMillis() + 1000 * 60 * 24))\r\n                .signWith(getSigningKey(), SignatureAlgorithm.HS256)\r\n                .compact();\r\n    }\r\n\r\n    public String generateJwtToken(UserDetails userDetails) {\r\n        return generateJwtToken(new HashMap&lt;&gt;(), userDetails);\r\n    }\r\n\r\n    public boolean isJwtTokenValid(String jwtToken, UserDetails userDetails) {\r\n        final String username = extractUsername(jwtToken);\r\n        return (username.equals(userDetails.getUsername())) &amp;&amp; !isJwtTokenExpired(jwtToken);\r\n    }\r\n\r\n    private boolean isJwtTokenExpired(String jwtToken) {\r\n        return extractExpiration(jwtToken).before(new Date());\r\n    }\r\n\r\n    private Date extractExpiration(String jwtToken) {\r\n        return extractClaim(jwtToken, Claims::getExpiration);\r\n    }\r\n\r\n    private Claims extractAllclaims(String jwtToken) {\r\n        return Jwts\r\n                .parserBuilder()\r\n                .setSigningKey(getSigningKey())\r\n                .build()\r\n                .parseClaimsJws(jwtToken)\r\n                .getBody();\r\n    }\r\n\r\n    private Key getSigningKey() {\r\n        byte[] keyBytes = Decoders.BASE64.decode(SECRET_KEY);\r\n        return Keys.hmacShaKeyFor(keyBytes);\r\n    }\r\n\r\n}\r\n```\r\n\r\n*JwtAuthFilter*\r\n\r\n\r\n```\r\n@Component\r\n@RequiredArgsConstructor\r\npublic class JwtAuthFilter extends OncePerRequestFilter {\r\n\r\n    private final JwtService jwtService;\r\n    private final UserDetailsService userDetailsService;\r\n\r\n    @Override\r\n    protected void doFilterInternal(\r\n            @NonNull HttpServletRequest request,\r\n            @NonNull HttpServletResponse response,\r\n            @NonNull FilterChain filterChain\r\n    ) throws ServletException, IOException {\r\n\r\n        final String authHeader = request.getHeader(&quot;Authorization&quot;);\r\n        final String jwtToken;\r\n        final String userEmail;\r\n\r\n        if (authHeader == null || !authHeader.startsWith(&quot;Bearer &quot;)) {\r\n            filterChain.doFilter(request, response);\r\n            return;\r\n        }\r\n        jwtToken = authHeader.substring(7);\r\n        userEmail = jwtService.extractUsername(jwtToken);\r\n        if (userEmail != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\r\n            UserDetails userDetails = this.userDetailsService.loadUserByUsername(userEmail);\r\n            if (jwtService.isJwtTokenValid(jwtToken, userDetails)) {\r\n                UsernamePasswordAuthenticationToken authToken = new UsernamePasswordAuthenticationToken(\r\n                        userDetails,\r\n                        null,\r\n                        userDetails.getAuthorities()\r\n                );\r\n                authToken.setDetails(\r\n                        new WebAuthenticationDetailsSource().buildDetails(request)\r\n                );\r\n                SecurityContextHolder.getContext().setAuthentication(authToken);\r\n            }\r\n        }\r\n        filterChain.doFilter(request, response);\r\n    }\r\n}\r\n```\r\n\r\n*SecurityConfig*\r\n\r\n\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\n@RequiredArgsConstructor\r\npublic class SecurityConfig {\r\n\r\n    private final JwtAuthFilter jwtAuthFilter;\r\n    private final AuthenticationProvider authenticationProvider;\r\n\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity httpSecurity) throws Exception {\r\n\r\n        httpSecurity\r\n                .csrf(csrf -&gt; csrf.disable())\r\n                .authorizeHttpRequests(auth -&gt; auth\r\n                        .requestMatchers(&quot;/api/v1/auth/**&quot;).permitAll()\r\n                        .anyRequest().authenticated()\r\n                )\r\n                .sessionManagement(sess -&gt; sess.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\r\n                .authenticationProvider(authenticationProvider)\r\n                .addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class);\r\n        return httpSecurity.build();\r\n    }\r\n}\r\n```\r\n\r\n*ApplicationConfig*\r\n\r\n\r\n```\r\n@Configuration\r\n@RequiredArgsConstructor\r\npublic class ApplicationConfig {\r\n\r\n    private final UserRepository userRepository;\r\n\r\n    @Bean\r\n    public UserDetailsService userDetailsService() {\r\n        return username -&gt; userRepository.findByEmail(username)\r\n                .orElseThrow(() -&gt; new UsernameNotFoundException(&quot;User not found&quot;));\r\n    }\r\n\r\n    @Bean\r\n    public AuthenticationProvider authenticationProvider() {\r\n        DaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();\r\n        authProvider.setUserDetailsService(userDetailsService());\r\n        authProvider.setPasswordEncoder(passwordEncoder());\r\n        return authProvider;\r\n    }\r\n\r\n    @Bean\r\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration config) throws Exception {\r\n        return config.getAuthenticationManager();\r\n\r\n    }\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n}\r\n```\r\n\r\nThe *AuthenticationController*\r\n\r\n\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/api/v1/auth&quot;)\r\n@RequiredArgsConstructor\r\npublic class AuthenticationController {\r\n\r\n    private final AuthenticationService authenticationService;\r\n\r\n    @PostMapping(&quot;/register&quot;)\r\n    public ResponseEntity&lt;AuthenticationResponse&gt; registerUser(@RequestBody RegisterRequestDto request) {\r\n        return authenticationService.registerUser(request);\r\n    }\r\n\r\n    @PostMapping(&quot;/authenticate&quot;)\r\n    public ResponseEntity&lt;AuthenticationResponse&gt; authenticateUser(@RequestBody AuthRequestDto request) {\r\n        return authenticationService.authenticateUser(request);\r\n    }\r\n}\r\n```\r\n\r\nThe *DemoController* where i want the &quot;sayHelloAdmin&quot; method to be only accessed by an admin and the &quot;sayHelloUser&quot; method by user and admin:\r\n\r\n\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/api/v1/demo-controller&quot;)\r\npublic class DemoController {\r\n\r\n\r\n    @GetMapping(value = &quot;/admin&quot;)\r\n    public ResponseEntity&lt;String&gt; sayHelloAdmin() {\r\n        return ResponseEntity.ok(&quot;Hello from admin endpoint&quot;);\r\n    }\r\n\r\n    @GetMapping(value = &quot;/user&quot;)\r\n    public ResponseEntity&lt;String&gt; sayHelloUser() {\r\n        return ResponseEntity.ok(&quot;Hello from user endpoint&quot;);\r\n    }\r\n\r\n}\r\n```\r\n\r\nand the *AuthenticationService*\r\n\r\n\r\n```\r\n@Service\r\n@AllArgsConstructor\r\npublic class AuthenticationServiceImpl implements AuthenticationService {\r\n\r\n    private final UserRepository userRepository;\r\n    private final PasswordEncoder passwordEncoder;\r\n    private final JwtService jwtService;\r\n    private final AuthenticationManager authManager;\r\n    private final UserMapper userMapper;\r\n\r\n    @Override\r\n    public ResponseEntity&lt;AuthenticationResponse&gt; registerUser(RegisterRequestDto request) {\r\n\r\n        request.setPassword(passwordEncoder.encode(request.getPassword()));\r\n\r\n        User user = userMapper.registerRequestDtoToUser(request);\r\n\r\n        user.setRole(Role.USER);\r\n        user.setGameDayScore(0);\r\n        user.setOverallScore(0);\r\n        user.setPlayers(new ArrayList&lt;&gt;());\r\n\r\n        userRepository.save(user);\r\n        var jwtToken = jwtService.generateJwtToken(user);\r\n        return new ResponseEntity&lt;&gt;(AuthenticationResponse.builder()\r\n                .jwtToken(jwtToken)\r\n                .build(), HttpStatus.CREATED);\r\n    }\r\n\r\n    @Override\r\n    public ResponseEntity&lt;AuthenticationResponse&gt; authenticateUser(AuthRequestDto request) {\r\n        authManager.authenticate(\r\n                new UsernamePasswordAuthenticationToken(request.getEmail(), request.getPassword())\r\n        );\r\n        var user = userRepository.findByEmail(request.getEmail())\r\n                .orElseThrow();\r\n        var jwtToken = jwtService.generateJwtToken((user));\r\n        return new ResponseEntity&lt;&gt;(AuthenticationResponse.builder()\r\n                .jwtToken(jwtToken)\r\n                .build(), HttpStatus.OK);\r\n    }\r\n}\r\n```\r\n\r\n*AuthRequestDto* and *RegisterRequestDto* are almost identical to the user entity but with fewer attributes.\r\n\r\nThanks in advance for your help!\r\n\r\nsorry for the many codeblocks^^\r\n\r\ncya!\r\n\r\n~ Max","title":"Spring-Boot Security use Roles","body":"<p>I have recently looked into Spring-Boot and wanted to make a registration and login form for my application.\nI have watched a video and build my application around, what he said in the video.</p>\n<p>The authentication works and a jwt token is generated. When I have a valid token, i can send requests to methods without getting a 403 response.</p>\n<p>My question: My User Class has a Role, which is an enum (USER, ADMIN)</p>\n<p>How can I configure my application to check what role the current User has and bind this role to certain methods?</p>\n<p>Here is my Code:</p>\n<p><em>User Entity</em></p>\n<pre><code>@Builder\n@Getter\n@Setter\n@ToString\n@AllArgsConstructor\n@NoArgsConstructor\n@Entity(name = &quot;users&quot;)\npublic class User implements UserDetails {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(nullable = false, unique = true, columnDefinition = &quot;varchar(30)&quot;)\n    @Email\n    private String email;\n\n    @Column(nullable = false)\n    private String firstName;\n\n    @Column(nullable = false)\n    private String lastName;\n\n    @Column(nullable = false, columnDefinition = &quot;varchar(60)&quot;)\n    @Length(min = 8, max = 256)\n    @NotBlank\n    private String password;\n\n    @Column\n    @Enumerated(EnumType.STRING)\n    private Role role;\n\n    @Column(nullable = false)\n    private String teamName;\n\n    @Column(nullable = false)\n    private int overallScore;\n\n    @Column(nullable = false)\n    private int gameDayScore;\n\n    @ManyToMany\n    @JoinTable(\n            name = &quot;users_players&quot;,\n            joinColumns = {@JoinColumn(name = &quot;user_id&quot;, nullable = false)},\n            inverseJoinColumns = {@JoinColumn(name = &quot;player_id&quot;, nullable = false)}\n    )\n    @JsonIgnoreProperties({&quot;users&quot;})\n    private List&lt;Player&gt; players;\n\n\n    @Override\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\n        return List.of(new SimpleGrantedAuthority(role.name()));\n    }\n\n    @Override\n    public String getUsername() {\n        return email;\n    }\n\n    @Override\n    public boolean isAccountNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isAccountNonLocked() {\n        return true;\n    }\n\n    @Override\n    public boolean isCredentialsNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isEnabled() {\n        return true;\n    }\n}\n</code></pre>\n<p><em>Role Enum Class</em></p>\n<pre><code>public enum Role{\n    USER,\n    ADMIN;\n}\n</code></pre>\n<p><em>JwtService</em></p>\n<pre><code>@Service\npublic class JwtService {\n\n    private static final String SECRET_KEY = &quot;b7acf8204b85ab7cec6e73b91f682677d642d328fdec7788e8cbff11ff1a5b22&quot;;\n\n    public String extractUsername(String jwtToken) {\n        return extractClaim(jwtToken, Claims::getSubject);\n    }\n\n    public &lt;T&gt; T extractClaim(String jwtToken, Function&lt;Claims, T&gt; claimsResolver) {\n        final Claims claims = extractAllclaims(jwtToken);\n        return claimsResolver.apply(claims);\n    }\n\n    public String generateJwtToken(Map&lt;String, Object&gt; extraClaims, UserDetails userDetails) {\n        return Jwts.builder()\n                .setClaims(extraClaims)\n                .setSubject(userDetails.getUsername())\n                .setIssuedAt(new Date(System.currentTimeMillis()))\n                .setExpiration(new Date(System.currentTimeMillis() + 1000 * 60 * 24))\n                .signWith(getSigningKey(), SignatureAlgorithm.HS256)\n                .compact();\n    }\n\n    public String generateJwtToken(UserDetails userDetails) {\n        return generateJwtToken(new HashMap&lt;&gt;(), userDetails);\n    }\n\n    public boolean isJwtTokenValid(String jwtToken, UserDetails userDetails) {\n        final String username = extractUsername(jwtToken);\n        return (username.equals(userDetails.getUsername())) &amp;&amp; !isJwtTokenExpired(jwtToken);\n    }\n\n    private boolean isJwtTokenExpired(String jwtToken) {\n        return extractExpiration(jwtToken).before(new Date());\n    }\n\n    private Date extractExpiration(String jwtToken) {\n        return extractClaim(jwtToken, Claims::getExpiration);\n    }\n\n    private Claims extractAllclaims(String jwtToken) {\n        return Jwts\n                .parserBuilder()\n                .setSigningKey(getSigningKey())\n                .build()\n                .parseClaimsJws(jwtToken)\n                .getBody();\n    }\n\n    private Key getSigningKey() {\n        byte[] keyBytes = Decoders.BASE64.decode(SECRET_KEY);\n        return Keys.hmacShaKeyFor(keyBytes);\n    }\n\n}\n</code></pre>\n<p><em>JwtAuthFilter</em></p>\n<pre><code>@Component\n@RequiredArgsConstructor\npublic class JwtAuthFilter extends OncePerRequestFilter {\n\n    private final JwtService jwtService;\n    private final UserDetailsService userDetailsService;\n\n    @Override\n    protected void doFilterInternal(\n            @NonNull HttpServletRequest request,\n            @NonNull HttpServletResponse response,\n            @NonNull FilterChain filterChain\n    ) throws ServletException, IOException {\n\n        final String authHeader = request.getHeader(&quot;Authorization&quot;);\n        final String jwtToken;\n        final String userEmail;\n\n        if (authHeader == null || !authHeader.startsWith(&quot;Bearer &quot;)) {\n            filterChain.doFilter(request, response);\n            return;\n        }\n        jwtToken = authHeader.substring(7);\n        userEmail = jwtService.extractUsername(jwtToken);\n        if (userEmail != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\n            UserDetails userDetails = this.userDetailsService.loadUserByUsername(userEmail);\n            if (jwtService.isJwtTokenValid(jwtToken, userDetails)) {\n                UsernamePasswordAuthenticationToken authToken = new UsernamePasswordAuthenticationToken(\n                        userDetails,\n                        null,\n                        userDetails.getAuthorities()\n                );\n                authToken.setDetails(\n                        new WebAuthenticationDetailsSource().buildDetails(request)\n                );\n                SecurityContextHolder.getContext().setAuthentication(authToken);\n            }\n        }\n        filterChain.doFilter(request, response);\n    }\n}\n</code></pre>\n<p><em>SecurityConfig</em></p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@RequiredArgsConstructor\npublic class SecurityConfig {\n\n    private final JwtAuthFilter jwtAuthFilter;\n    private final AuthenticationProvider authenticationProvider;\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity httpSecurity) throws Exception {\n\n        httpSecurity\n                .csrf(csrf -&gt; csrf.disable())\n                .authorizeHttpRequests(auth -&gt; auth\n                        .requestMatchers(&quot;/api/v1/auth/**&quot;).permitAll()\n                        .anyRequest().authenticated()\n                )\n                .sessionManagement(sess -&gt; sess.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\n                .authenticationProvider(authenticationProvider)\n                .addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class);\n        return httpSecurity.build();\n    }\n}\n</code></pre>\n<p><em>ApplicationConfig</em></p>\n<pre><code>@Configuration\n@RequiredArgsConstructor\npublic class ApplicationConfig {\n\n    private final UserRepository userRepository;\n\n    @Bean\n    public UserDetailsService userDetailsService() {\n        return username -&gt; userRepository.findByEmail(username)\n                .orElseThrow(() -&gt; new UsernameNotFoundException(&quot;User not found&quot;));\n    }\n\n    @Bean\n    public AuthenticationProvider authenticationProvider() {\n        DaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();\n        authProvider.setUserDetailsService(userDetailsService());\n        authProvider.setPasswordEncoder(passwordEncoder());\n        return authProvider;\n    }\n\n    @Bean\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration config) throws Exception {\n        return config.getAuthenticationManager();\n\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n}\n</code></pre>\n<p>The <em>AuthenticationController</em></p>\n<pre><code>@RestController\n@RequestMapping(&quot;/api/v1/auth&quot;)\n@RequiredArgsConstructor\npublic class AuthenticationController {\n\n    private final AuthenticationService authenticationService;\n\n    @PostMapping(&quot;/register&quot;)\n    public ResponseEntity&lt;AuthenticationResponse&gt; registerUser(@RequestBody RegisterRequestDto request) {\n        return authenticationService.registerUser(request);\n    }\n\n    @PostMapping(&quot;/authenticate&quot;)\n    public ResponseEntity&lt;AuthenticationResponse&gt; authenticateUser(@RequestBody AuthRequestDto request) {\n        return authenticationService.authenticateUser(request);\n    }\n}\n</code></pre>\n<p>The <em>DemoController</em> where i want the &quot;sayHelloAdmin&quot; method to be only accessed by an admin and the &quot;sayHelloUser&quot; method by user and admin:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/api/v1/demo-controller&quot;)\npublic class DemoController {\n\n\n    @GetMapping(value = &quot;/admin&quot;)\n    public ResponseEntity&lt;String&gt; sayHelloAdmin() {\n        return ResponseEntity.ok(&quot;Hello from admin endpoint&quot;);\n    }\n\n    @GetMapping(value = &quot;/user&quot;)\n    public ResponseEntity&lt;String&gt; sayHelloUser() {\n        return ResponseEntity.ok(&quot;Hello from user endpoint&quot;);\n    }\n\n}\n</code></pre>\n<p>and the <em>AuthenticationService</em></p>\n<pre><code>@Service\n@AllArgsConstructor\npublic class AuthenticationServiceImpl implements AuthenticationService {\n\n    private final UserRepository userRepository;\n    private final PasswordEncoder passwordEncoder;\n    private final JwtService jwtService;\n    private final AuthenticationManager authManager;\n    private final UserMapper userMapper;\n\n    @Override\n    public ResponseEntity&lt;AuthenticationResponse&gt; registerUser(RegisterRequestDto request) {\n\n        request.setPassword(passwordEncoder.encode(request.getPassword()));\n\n        User user = userMapper.registerRequestDtoToUser(request);\n\n        user.setRole(Role.USER);\n        user.setGameDayScore(0);\n        user.setOverallScore(0);\n        user.setPlayers(new ArrayList&lt;&gt;());\n\n        userRepository.save(user);\n        var jwtToken = jwtService.generateJwtToken(user);\n        return new ResponseEntity&lt;&gt;(AuthenticationResponse.builder()\n                .jwtToken(jwtToken)\n                .build(), HttpStatus.CREATED);\n    }\n\n    @Override\n    public ResponseEntity&lt;AuthenticationResponse&gt; authenticateUser(AuthRequestDto request) {\n        authManager.authenticate(\n                new UsernamePasswordAuthenticationToken(request.getEmail(), request.getPassword())\n        );\n        var user = userRepository.findByEmail(request.getEmail())\n                .orElseThrow();\n        var jwtToken = jwtService.generateJwtToken((user));\n        return new ResponseEntity&lt;&gt;(AuthenticationResponse.builder()\n                .jwtToken(jwtToken)\n                .build(), HttpStatus.OK);\n    }\n}\n</code></pre>\n<p><em>AuthRequestDto</em> and <em>RegisterRequestDto</em> are almost identical to the user entity but with fewer attributes.</p>\n<p>Thanks in advance for your help!</p>\n<p>sorry for the many codeblocks^^</p>\n<p>cya!</p>\n<p>~ Max</p>\n"},{"tags":["java"],"answers":[{"comments":[{"owner":{"account_id":12377973,"reputation":242,"user_id":10053673,"display_name":"user10053673"},"score":0,"creation_date":1688644649,"post_id":76624754,"comment_id":135103290,"body_markdown":"Works great... Thank you very much ...","body":"Works great... Thank you very much ..."}],"tags":[],"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1688676607,"creation_date":1688602093,"answer_id":76624754,"question_id":76624671,"body_markdown":"Basically, the solution is already given in the error message: export the package to the module. To do so, add a line\r\n\r\n```Java\r\nexports com.democompany.app.api to com.fasterxml.jackson.databind;\r\n```\r\n\r\nto your `module-info.java` file.\r\n\r\nHave a look [here][1] for more details  but this is *really* just the starting point.\r\n\r\n\r\n  [1]: https://openjdk.org/projects/jigsaw/quick-start","title":"java.lang.reflect.InaccessibleObjectException: Unable to make public accessible","body":"<p>Basically, the solution is already given in the error message: export the package to the module. To do so, add a line</p>\n<pre><code>exports com.democompany.app.api to com.fasterxml.jackson.databind;\n</code></pre>\n<p>to your <code>module-info.java</code> file.</p>\n<p>Have a look <a href=\"https://openjdk.org/projects/jigsaw/quick-start\" rel=\"nofollow noreferrer\">here</a> for more details  but this is <em>really</em> just the starting point.</p>\n"}],"owner":{"account_id":12377973,"reputation":242,"user_id":10053673,"display_name":"user10053673"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":245,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76624754,"answer_count":1,"score":0,"last_activity_date":1688676607,"creation_date":1688600408,"question_id":76624671,"body_markdown":"I&#39;m having issues processing an API JSON response in a JavaFX app. I get the error:\r\n\r\n```\r\njava.lang.reflect.InaccessibleObjectException: Unable to make public com.democompany.app.api.ResponseToken() accessible: module com.democompany.app does not &quot;exports com.democompany.app.api&quot; to module com.fasterxml.jackson.databind\r\n```\r\n\r\nThe code:\r\n\r\n```\r\nString responseString = responseBody.string();                \r\nObjectMapper objectMapper = new ObjectMapper().configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\r\nResponseToken responseToken = objectMapper.readValue(responseString, ResponseToken.class);\r\n```          \r\n\r\nHow can I fix this?","title":"java.lang.reflect.InaccessibleObjectException: Unable to make public accessible","body":"<p>I'm having issues processing an API JSON response in a JavaFX app. I get the error:</p>\n<pre><code>java.lang.reflect.InaccessibleObjectException: Unable to make public com.democompany.app.api.ResponseToken() accessible: module com.democompany.app does not &quot;exports com.democompany.app.api&quot; to module com.fasterxml.jackson.databind\n</code></pre>\n<p>The code:</p>\n<pre><code>String responseString = responseBody.string();                \nObjectMapper objectMapper = new ObjectMapper().configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\nResponseToken responseToken = objectMapper.readValue(responseString, ResponseToken.class);\n</code></pre>\n<p>How can I fix this?</p>\n"},{"tags":["java","methods"],"comments":[{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":2,"creation_date":1688671490,"post_id":76631955,"comment_id":135108874,"body_markdown":"`private` means private to the _class_, not private to _each object of that class._","body":"<code>private</code> means private to the <i>class</i>, not private to <i>each object of that class.</i>"},{"owner":{"account_id":9725613,"reputation":53332,"user_id":7212686,"accept_rate":100,"display_name":"azro"},"score":0,"creation_date":1688671651,"post_id":76631955,"comment_id":135108907,"body_markdown":"You can read private attribute of another object if its&quot; in the same class as you&#39;re actually in, and the return type has NO thing to do with it","body":"You can read private attribute of another object if its&quot; in the same class as you&#39;re actually in, and the return type has NO thing to do with it"},{"owner":{"account_id":28965285,"reputation":1,"user_id":22186893,"display_name":"cubi11"},"score":0,"creation_date":1688671788,"post_id":76631955,"comment_id":135108928,"body_markdown":"Thanks but why didn&#39;t it work in the LargerThan method then? When I try it the error Message says &quot;squares has private access in Apartment&quot;","body":"Thanks but why didn&#39;t it work in the LargerThan method then? When I try it the error Message says &quot;squares has private access in Apartment&quot;"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":3,"creation_date":1688671814,"post_id":76631955,"comment_id":135108933,"body_markdown":"what do you mean by &quot;*but boolean return type can&#39;t?*&quot; ?? Please post the no-working code and what is not working/error message","body":"what do you mean by &quot;<i>but boolean return type can&#39;t?</i>&quot; ?? Please post the no-working code and what is not working/error message"},{"owner":{"display_name":"user6073886"},"score":0,"creation_date":1688671815,"post_id":76631955,"comment_id":135108934,"body_markdown":"By the way, i really don&#39;t get what the &quot;...but boolean return type can&#39;t?&quot; part of the question is supposed to mean. What did you try and what error did you get? The access modifiers work the same for each method and field and don&#39;t act different depending on data or return types.","body":"By the way, i really don&#39;t get what the &quot;...but boolean return type can&#39;t?&quot; part of the question is supposed to mean. What did you try and what error did you get? The access modifiers work the same for each method and field and don&#39;t act different depending on data or return types."},{"owner":{"account_id":20650084,"reputation":2646,"user_id":15160601,"display_name":"zoldxk"},"score":0,"creation_date":1688671997,"post_id":76631955,"comment_id":135108961,"body_markdown":"check [this](https://stackoverflow.com/a/3728101/15160601)","body":"check <a href=\"https://stackoverflow.com/a/3728101/15160601\">this</a>"},{"owner":{"account_id":28965285,"reputation":1,"user_id":22186893,"display_name":"cubi11"},"score":0,"creation_date":1688672245,"post_id":76631955,"comment_id":135109003,"body_markdown":"Alright so I tried `if (this.squares &gt; compared.squares)` in the largerThan method. I got the error message &quot;squares has private access in Apartment&quot;.\nWhat I meant by boolean return type is, once I changed the largerThan method from `public boolean largerThan` to `public int largerThan` the red lines below .squares disappeared.","body":"Alright so I tried <code>if (this.squares &gt; compared.squares)</code> in the largerThan method. I got the error message &quot;squares has private access in Apartment&quot;. What I meant by boolean return type is, once I changed the largerThan method from <code>public boolean largerThan</code> to <code>public int largerThan</code> the red lines below .squares disappeared."},{"owner":{"account_id":15847779,"reputation":4627,"user_id":11434552,"display_name":"Nexevis"},"score":0,"creation_date":1688672339,"post_id":76631955,"comment_id":135109031,"body_markdown":"Post the code where you are running this from","body":"Post the code where you are running this from"},{"owner":{"account_id":28965285,"reputation":1,"user_id":22186893,"display_name":"cubi11"},"score":0,"creation_date":1688672605,"post_id":76631955,"comment_id":135109066,"body_markdown":"Ok I&#39;m using NetBeans with TMC (Maven) no idea where to check the version. I have screenshots of the code with boolean return and int return:","body":"Ok I&#39;m using NetBeans with TMC (Maven) no idea where to check the version. I have screenshots of the code with boolean return and int return:"},{"owner":{"account_id":28965285,"reputation":1,"user_id":22186893,"display_name":"cubi11"},"score":0,"creation_date":1688672671,"post_id":76631955,"comment_id":135109073,"body_markdown":"https://imgur.com/a/A7uiETV","body":"<a href=\"https://imgur.com/a/A7uiETV\" rel=\"nofollow noreferrer\">imgur.com/a/A7uiETV</a>"},{"owner":{"account_id":15847779,"reputation":4627,"user_id":11434552,"display_name":"Nexevis"},"score":0,"creation_date":1688672900,"post_id":76631955,"comment_id":135109112,"body_markdown":"Have you tried restarting your IDE or computer, or running a Maven update?  I use Eclipse, but sometimes I get weird errors that aren&#39;t real, but Eclipse is messing up","body":"Have you tried restarting your IDE or computer, or running a Maven update?  I use Eclipse, but sometimes I get weird errors that aren&#39;t real, but Eclipse is messing up"},{"owner":{"account_id":28965285,"reputation":1,"user_id":22186893,"display_name":"cubi11"},"score":0,"creation_date":1688672937,"post_id":76631955,"comment_id":135109123,"body_markdown":"ALRIGHT it must be a bug with my IDE or something. Because if I change it to int, the code works, like in the image above. but then when I ALT+Z back so it&#39;s boolean again, it STILL WORKS. The error is gone. THEN when I delete the .squares and type it in again, the error is back. So weird.","body":"ALRIGHT it must be a bug with my IDE or something. Because if I change it to int, the code works, like in the image above. but then when I ALT+Z back so it&#39;s boolean again, it STILL WORKS. The error is gone. THEN when I delete the .squares and type it in again, the error is back. So weird."},{"owner":{"account_id":28965285,"reputation":1,"user_id":22186893,"display_name":"cubi11"},"score":0,"creation_date":1688673124,"post_id":76631955,"comment_id":135109170,"body_markdown":"@Nexevis Yeah I&#39;m betting it&#39;s not a real error since when you do change something then alt-z back to the code that was showing the error, the error is gone. But only if you alt-z. If you delete the now errorless code and write it again, the error shows up again. \nI don&#39;t want to mess something up by updating since this is the modified NetBeans to be used by the mooc.fi course. It&#39;s not a problem I just didn&#39;t understand why that error was appearing and it was bugging me.","body":"@Nexevis Yeah I&#39;m betting it&#39;s not a real error since when you do change something then alt-z back to the code that was showing the error, the error is gone. But only if you alt-z. If you delete the now errorless code and write it again, the error shows up again.  I don&#39;t want to mess something up by updating since this is the modified NetBeans to be used by the mooc.fi course. It&#39;s not a problem I just didn&#39;t understand why that error was appearing and it was bugging me."},{"owner":{"account_id":28965285,"reputation":1,"user_id":22186893,"display_name":"cubi11"},"score":0,"creation_date":1688673188,"post_id":76631955,"comment_id":135109183,"body_markdown":"@user16320675 is that not allowed? don&#39;t know how to upload images internally","body":"@user16320675 is that not allowed? don&#39;t know how to upload images internally"},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":1,"creation_date":1688675893,"post_id":76631955,"comment_id":135109684,"body_markdown":"You don&#39;t need to tell a story to ask a question. We don&#39;t need the build up, the &quot;so far so good&quot;, &quot;again no errors&quot;. Just show use the code that works, and the code that doesn&#39;t work. Tell and why it doesn&#39;t work and why you think it should.","body":"You don&#39;t need to tell a story to ask a question. We don&#39;t need the build up, the &quot;so far so good&quot;, &quot;again no errors&quot;. Just show use the code that works, and the code that doesn&#39;t work. Tell and why it doesn&#39;t work and why you think it should."}],"answers":[{"tags":[],"owner":{"account_id":19127415,"reputation":1,"user_id":13970104,"display_name":"Federico Cal&#242;"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1688675438,"creation_date":1688675438,"answer_id":76632356,"question_id":76631955,"body_markdown":"i will try to explainn this refering to the method:\r\n\r\n```\r\npublic boolean largerThan(Apartment compared) {\r\n        if (this.squares &gt; compared.getSquares()) {\r\n            return true;\r\n        }\r\n        return false;\r\n\r\n    }\r\n```\r\n\r\nInside the main class of Apartment you can have methods that have as parameters variables of the same type of your class, but at runtime they will be different  objects. So you must refer to this object with the appropiate methods.","title":"Java: Method with int return type can access private variable, but boolean return type can&#39;t?","body":"<p>i will try to explainn this refering to the method:</p>\n<pre><code>public boolean largerThan(Apartment compared) {\n        if (this.squares &gt; compared.getSquares()) {\n            return true;\n        }\n        return false;\n\n    }\n</code></pre>\n<p>Inside the main class of Apartment you can have methods that have as parameters variables of the same type of your class, but at runtime they will be different  objects. So you must refer to this object with the appropiate methods.</p>\n"},{"tags":[],"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688676278,"creation_date":1688676278,"answer_id":76632434,"question_id":76631955,"body_markdown":"Let&#39;s make this simple.\r\n\r\n```\r\npublic class Hide{\r\n    private boolean privy = false;    \r\n    public boolean test( Hide h){\r\n        return h.privy;\r\n    }\r\n    public static void main(String[] args){\r\n        Hide a = new Hide();\r\n        Hide b = new Hide();\r\n        System.out.println(a.test(b));   \r\n    }\r\n}\r\n```\r\n\r\nThat compiles and runs fine. It is a boolean method, that accesses the private member of another instance of the same class. So it seems your error is occurring somewhere else in the build process.","title":"Java: Method with int return type can access private variable, but boolean return type can&#39;t?","body":"<p>Let's make this simple.</p>\n<pre><code>public class Hide{\n    private boolean privy = false;    \n    public boolean test( Hide h){\n        return h.privy;\n    }\n    public static void main(String[] args){\n        Hide a = new Hide();\n        Hide b = new Hide();\n        System.out.println(a.test(b));   \n    }\n}\n</code></pre>\n<p>That compiles and runs fine. It is a boolean method, that accesses the private member of another instance of the same class. So it seems your error is occurring somewhere else in the build process.</p>\n"}],"owner":{"account_id":28965285,"reputation":1,"user_id":22186893,"display_name":"cubi11"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":2,"score":-2,"last_activity_date":1688676278,"creation_date":1688671269,"question_id":76631955,"body_markdown":"So there&#39;s probably a really obvious answer to this but at the moment I&#39;m very confused.\r\n\r\nI started learning Java and am doing the mooc.fi Java Programming course. There&#39;s an exercise where I have an Apartment class and I have to make a couple of methods that compare a variable from one object to another (both objects are from the same class).\r\n\r\nSo I made a boolean return type method with an (Apartment compared) constructor. Then I used this.variable to get the value of the variable of the current object. I made a getter method to be able to get the value of the &quot;compared&quot; object. Then I used compared.getVariable() to get the value of the compared object. \r\n\r\nSo far so good.\r\n\r\nThe second methods objective was to return the value difference between the two objects variables. So again, I made a method with an int return type with the same (Apartment compared) constructor. I used the same this.variable for the object. But then instead of using the getter method for the second object, I typed compared.variable. It showed no errors. The program worked. \r\n\r\nSo I went back to the first method and changed the boolean return type to int return type. and I changed compared.getVariable to compared.variable\r\n\r\nAgain, no errors. \r\n\r\nSo why can a method read a private variable of a different object? Why does it work with int but not with boolean?\r\n\r\nHere&#39;s my code:\r\n\r\n```\r\npublic class Apartment {\r\n\r\n    private int rooms;\r\n    private int squares;\r\n    private int princePerSquare;\r\n\r\n    public Apartment(int rooms, int squares, int pricePerSquare) {\r\n        this.rooms = rooms;\r\n        this.squares = squares;\r\n        this.princePerSquare = pricePerSquare;\r\n    }\r\n\r\n    public int getSquares() {\r\n        return squares;\r\n    }\r\n\r\n    public int getPrincePerSquare() {\r\n        return princePerSquare;\r\n    }\r\n\r\n    public boolean largerThan(Apartment compared) {\r\n        if (this.squares &gt; compared.getSquares()) {\r\n            return true;\r\n        }\r\n        return false;\r\n\r\n    }\r\n\r\n    public int priceDifference(Apartment compared) {\r\n        if ((this.princePerSquare * this.squares) &gt; (compared.princePerSquare * compared.squares)) {\r\n            return (this.princePerSquare * this.squares) - (compared.princePerSquare * compared.squares);\r\n        }\r\n    \r\n        return (compared.princePerSquare * compared.squares) - (this.princePerSquare * this.squares);\r\n    }\r\n}\r\n```\r\n\r\nThe two relevant methods are LargerThan and PriceDifference\r\n\r\nThanks in advance and sorry if it&#39;s a stupid question\r\n\r\nEdit: I know it should be pricePerSquare instead of PrincePerSquare but that&#39;s how it was pre-written by mooc.fi and I don&#39;t wanna change it in case the tester uses PrincePerSquare.\r\n\r\n","title":"Java: Method with int return type can access private variable, but boolean return type can&#39;t?","body":"<p>So there's probably a really obvious answer to this but at the moment I'm very confused.</p>\n<p>I started learning Java and am doing the mooc.fi Java Programming course. There's an exercise where I have an Apartment class and I have to make a couple of methods that compare a variable from one object to another (both objects are from the same class).</p>\n<p>So I made a boolean return type method with an (Apartment compared) constructor. Then I used this.variable to get the value of the variable of the current object. I made a getter method to be able to get the value of the &quot;compared&quot; object. Then I used compared.getVariable() to get the value of the compared object.</p>\n<p>So far so good.</p>\n<p>The second methods objective was to return the value difference between the two objects variables. So again, I made a method with an int return type with the same (Apartment compared) constructor. I used the same this.variable for the object. But then instead of using the getter method for the second object, I typed compared.variable. It showed no errors. The program worked.</p>\n<p>So I went back to the first method and changed the boolean return type to int return type. and I changed compared.getVariable to compared.variable</p>\n<p>Again, no errors.</p>\n<p>So why can a method read a private variable of a different object? Why does it work with int but not with boolean?</p>\n<p>Here's my code:</p>\n<pre><code>public class Apartment {\n\n    private int rooms;\n    private int squares;\n    private int princePerSquare;\n\n    public Apartment(int rooms, int squares, int pricePerSquare) {\n        this.rooms = rooms;\n        this.squares = squares;\n        this.princePerSquare = pricePerSquare;\n    }\n\n    public int getSquares() {\n        return squares;\n    }\n\n    public int getPrincePerSquare() {\n        return princePerSquare;\n    }\n\n    public boolean largerThan(Apartment compared) {\n        if (this.squares &gt; compared.getSquares()) {\n            return true;\n        }\n        return false;\n\n    }\n\n    public int priceDifference(Apartment compared) {\n        if ((this.princePerSquare * this.squares) &gt; (compared.princePerSquare * compared.squares)) {\n            return (this.princePerSquare * this.squares) - (compared.princePerSquare * compared.squares);\n        }\n    \n        return (compared.princePerSquare * compared.squares) - (this.princePerSquare * this.squares);\n    }\n}\n</code></pre>\n<p>The two relevant methods are LargerThan and PriceDifference</p>\n<p>Thanks in advance and sorry if it's a stupid question</p>\n<p>Edit: I know it should be pricePerSquare instead of PrincePerSquare but that's how it was pre-written by mooc.fi and I don't wanna change it in case the tester uses PrincePerSquare.</p>\n"},{"tags":["java","apache-spark","pyspark","apache-spark-sql","databricks"],"comments":[{"owner":{"account_id":9963,"reputation":82992,"user_id":18627,"display_name":"Alex Ott"},"score":0,"creation_date":1688642874,"post_id":76628062,"comment_id":135102899,"body_markdown":"why are you doing it this way?","body":"why are you doing it this way?"},{"owner":{"account_id":15827515,"reputation":33,"user_id":11419939,"display_name":"dhinesh bala"},"score":0,"creation_date":1688646107,"post_id":76628062,"comment_id":135103615,"body_markdown":"I want to enable job-level metrics. So that under one cluster, I can have multiple jobs. Each of these would send metrics for a different purpose.","body":"I want to enable job-level metrics. So that under one cluster, I can have multiple jobs. Each of these would send metrics for a different purpose."}],"owner":{"account_id":15827515,"reputation":33,"user_id":11419939,"display_name":"dhinesh bala"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1688676193,"creation_date":1688640789,"question_id":76628062,"body_markdown":"[![enter image description here](https://i.stack.imgur.com/1E02I.png)](https://i.stack.imgur.com/1E02I.png)\r\nAttached logs: (Facing this issue while stop/start the existing sparkcontext in databricks.Facing this issue while stop/start the existing sparkcontext in databricks. Need to enable spark default metrics in job level.\r\n\r\n\r\n```\r\ncom.timgroup.statsd.StatsDClientException: Failed to start StatsD client\r\n\tat com.timgroup.statsd.NonBlockingStatsDClient.&lt;init&gt;(NonBlockingStatsDClient.java:95)\r\n\tat com.timgroup.statsd.NonBlockingStatsDClient.&lt;init&gt;(NonBlockingStatsDClient.java:64)\r\n\tat org.zignallabs.streaming.metrics.SerializableStatsDClient.readObject(SerializableStatsDClient.java:124)\r\n\tat sun.reflect.GeneratedMethodAccessor204.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1184)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2322)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.readArray(ObjectInputStream.java:2119)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1657)\r\n\tat java.io.ObjectInputStream.readArray(ObjectInputStream.java:2119)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1657)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.readArray(ObjectInputStream.java:2119)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1657)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:503)\r\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:461)\r\n\tat scala.collection.immutable.List$SerializationProxy.readObject(List.scala:527)\r\n\tat sun.reflect.GeneratedMethodAccessor157.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1184)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2322)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:503)\r\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:461)\r\n\tat scala.collection.immutable.List$SerializationProxy.readObject(List.scala:527)\r\n\tat sun.reflect.GeneratedMethodAccessor157.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1184)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2322)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\r\n\tat java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\r\n\tat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\r\n\tat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\r\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:503)\r\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:461)\r\n\tat org.apache.spark.serializer.JavaDeserializationStream.readObject(JavaSerializer.scala:87)\r\n\tat org.apache.spark.serializer.JavaSerializerInstance.deserialize(JavaSerializer.scala:129)\r\n\tat org.apache.spark.scheduler.ResultTask.$anonfun$runTask$2(ResultTask.scala:65)\r\n\tat com.databricks.spark.util.ExecutorFrameProfiler$.record(ExecutorFrameProfiler.scala:110)\r\n\tat org.apache.spark.scheduler.ResultTask.$anonfun$runTask$1(ResultTask.scala:65)\r\n\tat com.databricks.spark.util.ExecutorFrameProfiler$.record(ExecutorFrameProfiler.scala:110)\r\n\tat org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:55)\r\n\tat org.apache.spark.scheduler.Task.doRunTask(Task.scala:169)\r\n\tat org.apache.spark.scheduler.Task.$anonfun$run$4(Task.scala:137)\r\n\tat com.databricks.unity.EmptyHandle$.runWithAndClose(UCSHandle.scala:125)\r\n\tat org.apache.spark.scheduler.Task.$anonfun$run$1(Task.scala:137)\r\n\tat com.databricks.spark.util.ExecutorFrameProfiler$.record(ExecutorFrameProfiler.scala:110)\r\n\tat org.apache.spark.scheduler.Task.run(Task.scala:96)\r\n\tat org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$13(Executor.scala:902)\r\n\tat org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1697)\r\n\tat org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$4(Executor.scala:905)\r\n\tat scala.runtime.java8.JFunction0$mcV$sp.apply(JFunction0$mcV$sp.java:23)\r\n\tat com.databricks.spark.util.ExecutorFrameProfiler$.record(ExecutorFrameProfiler.scala:110)\r\n\tat org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:760)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:750)\r\nCaused by: java.net.SocketException: **maximum number of DatagramSockets reached**\r\n\tat sun.net.ResourceManager.beforeUdpCreate(ResourceManager.java:73)\r\n\tat sun.nio.ch.DatagramChannelImpl.&lt;init&gt;(DatagramChannelImpl.java:107)\r\n\tat sun.nio.ch.SelectorProviderImpl.openDatagramChannel(SelectorProviderImpl.java:42)\r\n\tat java.nio.channels.DatagramChannel.open(DatagramChannel.java:149)\r\n\tat com.timgroup.statsd.NonBlockingUdpSender.&lt;init&gt;(NonBlockingUdpSender.java:22)\r\n\tat com.timgroup.statsd.NonBlockingStatsDClient.&lt;init&gt;(NonBlockingStatsDClient.java:93)\r\n\t... 95 more\r\n```\r\n\r\n","title":"Getting &quot; maximum number of DatagramSockets reached&quot; issue while stop/start exisiting sparkcontext in databricks","body":"<p><a href=\"https://i.stack.imgur.com/1E02I.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1E02I.png\" alt=\"enter image description here\" /></a>\nAttached logs: (Facing this issue while stop/start the existing sparkcontext in databricks.Facing this issue while stop/start the existing sparkcontext in databricks. Need to enable spark default metrics in job level.</p>\n<pre><code>com.timgroup.statsd.StatsDClientException: Failed to start StatsD client\n    at com.timgroup.statsd.NonBlockingStatsDClient.&lt;init&gt;(NonBlockingStatsDClient.java:95)\n    at com.timgroup.statsd.NonBlockingStatsDClient.&lt;init&gt;(NonBlockingStatsDClient.java:64)\n    at org.zignallabs.streaming.metrics.SerializableStatsDClient.readObject(SerializableStatsDClient.java:124)\n    at sun.reflect.GeneratedMethodAccessor204.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1184)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2322)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.readArray(ObjectInputStream.java:2119)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1657)\n    at java.io.ObjectInputStream.readArray(ObjectInputStream.java:2119)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1657)\n    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.readArray(ObjectInputStream.java:2119)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1657)\n    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:503)\n    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:461)\n    at scala.collection.immutable.List$SerializationProxy.readObject(List.scala:527)\n    at sun.reflect.GeneratedMethodAccessor157.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1184)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2322)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:503)\n    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:461)\n    at scala.collection.immutable.List$SerializationProxy.readObject(List.scala:527)\n    at sun.reflect.GeneratedMethodAccessor157.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1184)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2322)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2431)\n    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2355)\n    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2213)\n    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1669)\n    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:503)\n    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:461)\n    at org.apache.spark.serializer.JavaDeserializationStream.readObject(JavaSerializer.scala:87)\n    at org.apache.spark.serializer.JavaSerializerInstance.deserialize(JavaSerializer.scala:129)\n    at org.apache.spark.scheduler.ResultTask.$anonfun$runTask$2(ResultTask.scala:65)\n    at com.databricks.spark.util.ExecutorFrameProfiler$.record(ExecutorFrameProfiler.scala:110)\n    at org.apache.spark.scheduler.ResultTask.$anonfun$runTask$1(ResultTask.scala:65)\n    at com.databricks.spark.util.ExecutorFrameProfiler$.record(ExecutorFrameProfiler.scala:110)\n    at org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:55)\n    at org.apache.spark.scheduler.Task.doRunTask(Task.scala:169)\n    at org.apache.spark.scheduler.Task.$anonfun$run$4(Task.scala:137)\n    at com.databricks.unity.EmptyHandle$.runWithAndClose(UCSHandle.scala:125)\n    at org.apache.spark.scheduler.Task.$anonfun$run$1(Task.scala:137)\n    at com.databricks.spark.util.ExecutorFrameProfiler$.record(ExecutorFrameProfiler.scala:110)\n    at org.apache.spark.scheduler.Task.run(Task.scala:96)\n    at org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$13(Executor.scala:902)\n    at org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1697)\n    at org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$4(Executor.scala:905)\n    at scala.runtime.java8.JFunction0$mcV$sp.apply(JFunction0$mcV$sp.java:23)\n    at com.databricks.spark.util.ExecutorFrameProfiler$.record(ExecutorFrameProfiler.scala:110)\n    at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:760)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at java.lang.Thread.run(Thread.java:750)\nCaused by: java.net.SocketException: **maximum number of DatagramSockets reached**\n    at sun.net.ResourceManager.beforeUdpCreate(ResourceManager.java:73)\n    at sun.nio.ch.DatagramChannelImpl.&lt;init&gt;(DatagramChannelImpl.java:107)\n    at sun.nio.ch.SelectorProviderImpl.openDatagramChannel(SelectorProviderImpl.java:42)\n    at java.nio.channels.DatagramChannel.open(DatagramChannel.java:149)\n    at com.timgroup.statsd.NonBlockingUdpSender.&lt;init&gt;(NonBlockingUdpSender.java:22)\n    at com.timgroup.statsd.NonBlockingStatsDClient.&lt;init&gt;(NonBlockingStatsDClient.java:93)\n    ... 95 more\n</code></pre>\n"},{"tags":["java","multithreading","thread-synchronization"],"comments":[{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":1,"creation_date":1688673195,"post_id":76632091,"comment_id":135109185,"body_markdown":"At a glance, this looks like a standard thread safety issue caused by trying to concurrently modify a non-thread-safe collection without any sort of locking.  Modifications to things like ArrayLists need to be done under a lock.","body":"At a glance, this looks like a standard thread safety issue caused by trying to concurrently modify a non-thread-safe collection without any sort of locking.  Modifications to things like ArrayLists need to be done under a lock."},{"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"score":0,"creation_date":1688673702,"post_id":76632091,"comment_id":135109294,"body_markdown":"@LouisWasserman Thank you! It seems to have a positive effect. But why don&#39;t I get `ConcurrentModificationException` or the like? I know that `ExecutorService` &quot;swallows&quot; exceptions, but I don&#39;t use it here","body":"@LouisWasserman Thank you! It seems to have a positive effect. But why don&#39;t I get <code>ConcurrentModificationException</code> or the like? I know that <code>ExecutorService</code> &quot;swallows&quot; exceptions, but I don&#39;t use it here"},{"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"score":0,"creation_date":1688674714,"post_id":76632091,"comment_id":135109485,"body_markdown":"Also, why is there some weird `null` element? Shouldn&#39;t the removal be atomic in the sense &quot;it either happens completely or not at all&quot;? Was there some swallowed exception between nullifying the removed element&#39;s index and `size--`?","body":"Also, why is there some weird <code>null</code> element? Shouldn&#39;t the removal be atomic in the sense &quot;it either happens completely or not at all&quot;? Was there some swallowed exception between nullifying the removed element&#39;s index and <code>size--</code>?"},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1688677166,"post_id":76632091,"comment_id":135109909,"body_markdown":"Why are you extending Thread... with an abstract class? I&#39;m surprised the compiler lets you do that. What is the abstract method? This is horrible.","body":"Why are you extending Thread... with an abstract class? I&#39;m surprised the compiler lets you do that. What is the abstract method? This is horrible."},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1688677461,"post_id":76632091,"comment_id":135109943,"body_markdown":"In the code you have provided, addPassenger is only ever called on &quot;this&quot;, this can never be null. The problem you&#39;re seeing is not caused by the existing code.","body":"In the code you have provided, addPassenger is only ever called on &quot;this&quot;, this can never be null. The problem you&#39;re seeing is not caused by the existing code."},{"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"score":1,"creation_date":1688683521,"post_id":76632091,"comment_id":135110723,"body_markdown":"@matt it&#39;s pretty straightforward: I want to avoid code duplication since both `Passenger` and `BoatKeeper` share report functionality. As far as I know, there&#39;s nothing inherently wrong with having an abstract class as a `Thread` child. Abstract classes are classes that can&#39;t be instantiated, that&#39;s it. `StatusReporter` doesn&#39;t make sense on its own so it&#39;s reasonable to make it abstract","body":"@matt it&#39;s pretty straightforward: I want to avoid code duplication since both <code>Passenger</code> and <code>BoatKeeper</code> share report functionality. As far as I know, there&#39;s nothing inherently wrong with having an abstract class as a <code>Thread</code> child. Abstract classes are classes that can&#39;t be instantiated, that&#39;s it. <code>StatusReporter</code> doesn&#39;t make sense on its own so it&#39;s reasonable to make it abstract"},{"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"score":0,"creation_date":1688683597,"post_id":76632091,"comment_id":135110731,"body_markdown":"@matt as a matter of fact, it *was* caused by the existing code. See the answer below","body":"@matt as a matter of fact, it <i>was</i> caused by the existing code. See the answer below"},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1688697426,"post_id":76632091,"comment_id":135111841,"body_markdown":"@JoreJoh: No, who promised that changes to `ArrayList` would be atomic?  The documentation specifically _doesn&#39;t_ promise that.  Every single operation you need to do to an `ArrayList` needs to use a lock, and it needs to be the same lock.","body":"@JoreJoh: No, who promised that changes to <code>ArrayList</code> would be atomic?  The documentation specifically <i>doesn&#39;t</i> promise that.  Every single operation you need to do to an <code>ArrayList</code> needs to use a lock, and it needs to be the same lock."},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1688714521,"post_id":76632091,"comment_id":135113555,"body_markdown":"@JoreJoh I don&#39;t see how the answer says why your array list contains null. Maybe since your in a threaded environment with a debugger you&#39;ve captured a transient state where null is in the list.","body":"@JoreJoh I don&#39;t see how the answer says why your array list contains null. Maybe since your in a threaded environment with a debugger you&#39;ve captured a transient state where null is in the list."},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1688714566,"post_id":76632091,"comment_id":135113565,"body_markdown":"In general you shouldn&#39;t extend Thread. Also, when you extend something, the thing your extend is the parent. &quot;StatusReporter doesn&#39;t make sense on its own so it&#39;s reasonable to make it abstract&quot; It&#39;s not clear *why* that is the case. If doesn&#39;t make sense on it&#39;s own, then dont give it a public constructor. Use protected constructor, then it would need to be extended. Really it doesn&#39;t need to be a class at all, an interface should work.","body":"In general you shouldn&#39;t extend Thread. Also, when you extend something, the thing your extend is the parent. &quot;StatusReporter doesn&#39;t make sense on its own so it&#39;s reasonable to make it abstract&quot; It&#39;s not clear <i>why</i> that is the case. If doesn&#39;t make sense on it&#39;s own, then dont give it a public constructor. Use protected constructor, then it would need to be extended. Really it doesn&#39;t need to be a class at all, an interface should work."},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1688731148,"post_id":76632091,"comment_id":135116694,"body_markdown":"Re, &quot;why don&#39;t I get `ConcurrentModificationException`...?&quot; That exception is poorly named. The JRE doesn&#39;t raise it because of anything to do with threads. It is raised when your program tries to use an `Iterator` after the Iterator has been invalidated by the program mutating the `Collection` to which the Iterator belongs. The kinds of errors that are caused by threads accessing shared variables with no synchronization are practically impossible to _reliably_ detect and identify. You cannot count on threading errors to cause _meaningful_ exceptions.","body":"Re, &quot;why don&#39;t I get <code>ConcurrentModificationException</code>...?&quot; That exception is poorly named. The JRE doesn&#39;t raise it because of anything to do with threads. It is raised when your program tries to use an <code>Iterator</code> after the Iterator has been invalidated by the program mutating the <code>Collection</code> to which the Iterator belongs. The kinds of errors that are caused by threads accessing shared variables with no synchronization are practically impossible to <i>reliably</i> detect and identify. You cannot count on threading errors to cause <i>meaningful</i> exceptions."},{"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"score":0,"creation_date":1688731483,"post_id":76632091,"comment_id":135116748,"body_markdown":"@matt no, it wouldn&#39;t work since interfaces can&#39;t have instance fields. In this case, `status` is an instance field","body":"@matt no, it wouldn&#39;t work since interfaces can&#39;t have instance fields. In this case, <code>status</code> is an instance field"},{"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"score":0,"creation_date":1688731563,"post_id":76632091,"comment_id":135116763,"body_markdown":"@SolomonSlow but was there any exception at all? If so, was it swallowed?","body":"@SolomonSlow but was there any exception at all? If so, was it swallowed?"},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1688733542,"post_id":76632091,"comment_id":135117188,"body_markdown":"You want your object to extend thread, and you want your object to extend status report. So you&#39;ve made StatusReport extend Thread. You want StatusReport to be abstract because you don&#39;t think it makes sense to exist on its own. I&#39;m definitely a fan of composition over inheritance. Your class could just have an instance of StatusReport and implement Runnable. But you&#39;re right, it is pretty much just practice.","body":"You want your object to extend thread, and you want your object to extend status report. So you&#39;ve made StatusReport extend Thread. You want StatusReport to be abstract because you don&#39;t think it makes sense to exist on its own. I&#39;m definitely a fan of composition over inheritance. Your class could just have an instance of StatusReport and implement Runnable. But you&#39;re right, it is pretty much just practice."},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1688733712,"post_id":76632091,"comment_id":135117229,"body_markdown":"Re, &quot;was there any exception at all?&quot; A &quot;race condition&quot; (result of unsynchronized access to shared variables) could cause some kind of data corruption or it could cause some kind of logic error. It could affect your own program&#39;s data/logic, it could affect the JRE, or it could affect the JVM. Literally _anything_ could happen; It could cause an immediate program crash (e.g., &quot;segfault&quot;), it could cause a &quot;glitch&quot; in the GUI, it could cause your program to write an incorrect value to a record in a database that you don&#39;t discover until months later. Literally, _anything_ could happen.","body":"Re, &quot;was there any exception at all?&quot; A &quot;race condition&quot; (result of unsynchronized access to shared variables) could cause some kind of data corruption or it could cause some kind of logic error. It could affect your own program&#39;s data/logic, it could affect the JRE, or it could affect the JVM. Literally <i>anything</i> could happen; It could cause an immediate program crash (e.g., &quot;segfault&quot;), it could cause a &quot;glitch&quot; in the GUI, it could cause your program to write an incorrect value to a record in a database that you don&#39;t discover until months later. Literally, <i>anything</i> could happen."},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1688733919,"post_id":76632091,"comment_id":135117279,"body_markdown":"P.S., &quot;_Could_ cause...&quot; For example, in a big, commercial, back-end system, it might _not_ cause any of the above during weeks of testing, and then months later, after being released into the field, it could cause a major problem on some client&#39;s web site. (Ask me some time how much fun it is to do a post-mortem on a client&#39;s four gigabyte core-file when the debug symbols for that release have somehow gone missing.)","body":"P.S., &quot;<i>Could</i> cause...&quot; For example, in a big, commercial, back-end system, it might <i>not</i> cause any of the above during weeks of testing, and then months later, after being released into the field, it could cause a major problem on some client&#39;s web site. (Ask me some time how much fun it is to do a post-mortem on a client&#39;s four gigabyte core-file when the debug symbols for that release have somehow gone missing.)"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1688764105,"post_id":76632091,"comment_id":135122522,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"answers":[{"comments":[{"owner":{"account_id":12514905,"reputation":2245,"user_id":9194639,"display_name":"new Q Open Wid"},"score":0,"creation_date":1688674664,"post_id":76632272,"comment_id":135109478,"body_markdown":"&quot;If you find it useful, upvote some of Louis Wasserman&#39;s other answers instead&quot; really not trying to be rude or anything, but by SO rules, you shouldn&#39;t suggest that people do that - it counts as serial upvoting iirc, and just because you found his comment/answer in this post useful doesn&#39;t mean that extends to all his others.","body":"&quot;If you find it useful, upvote some of Louis Wasserman&#39;s other answers instead&quot; really not trying to be rude or anything, but by SO rules, you shouldn&#39;t suggest that people do that - it counts as serial upvoting iirc, and just because you found his comment/answer in this post useful doesn&#39;t mean that extends to all his others."},{"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"score":0,"creation_date":1688674902,"post_id":76632272,"comment_id":135109516,"body_markdown":"@newQOpenGLWidget is it legal to delete it repost it as a Community answer now? I now seem to possess that privilege","body":"@newQOpenGLWidget is it legal to delete it repost it as a Community answer now? I now seem to possess that privilege"},{"owner":{"account_id":12514905,"reputation":2245,"user_id":9194639,"display_name":"new Q Open Wid"},"score":0,"creation_date":1688675855,"post_id":76632272,"comment_id":135109671,"body_markdown":"I think there&#39;s a checkbox that appears when you edit called &quot;make community post&quot;","body":"I think there&#39;s a checkbox that appears when you edit called &quot;make community post&quot;"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1688676174,"post_id":76632272,"comment_id":135109739,"body_markdown":"As an aside, put the `unlock()`s in a finally block, to ensure it always gets called.","body":"As an aside, put the <code>unlock()</code>s in a finally block, to ensure it always gets called."},{"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"score":0,"creation_date":1688683922,"post_id":76632272,"comment_id":135110775,"body_markdown":"@AndyTurner I wanted to release the lock as soon as possible to avoid any freezes","body":"@AndyTurner I wanted to release the lock as soon as possible to avoid any freezes"},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1688697495,"post_id":76632272,"comment_id":135111848,"body_markdown":"Please don&#39;t upvote my other answers.  (In all honesty, I post in the comments when I don&#39;t feel like taking the time to write a thorough answer, and you are welcome to expand them into a more complete answer.)","body":"Please don&#39;t upvote my other answers.  (In all honesty, I post in the comments when I don&#39;t feel like taking the time to write a thorough answer, and you are welcome to expand them into a more complete answer.)"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1688708594,"post_id":76632272,"comment_id":135112663,"body_markdown":"@JoreJoh put the try/finally just around the portion where you want the lock to be held. So, `lock(); try { /* do stuff with lock */ } finally { unlock(); }`.","body":"@JoreJoh put the try/finally just around the portion where you want the lock to be held. So, <code>lock(); try { &#47;* do stuff with lock *&#47; } finally { unlock(); }</code>."},{"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"score":0,"creation_date":1688760655,"post_id":76632272,"comment_id":135122066,"body_markdown":"@AndyTurner are you sure it&#39;s necessary at all? From the JLS: *&quot;If execution of the body is ever completed, either normally **or abruptly** [presumably, e.g. due to an exception], an unlock action is automatically performed on that same monitor.&quot;*","body":"@AndyTurner are you sure it&#39;s necessary at all? From the JLS: <i>&quot;If execution of the body is ever completed, either normally <b>or abruptly</b> [presumably, e.g. due to an exception], an unlock action is automatically performed on that same monitor.&quot;</i>"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1688806769,"post_id":76632272,"comment_id":135125630,"body_markdown":"@JoreJoh that&#39;s referring to a `synchronized` statement, unlocking the monitor object on which you are synchronizing. I don&#39;t see you using a `synchronized` statement here.","body":"@JoreJoh that&#39;s referring to a <code>synchronized</code> statement, unlocking the monitor object on which you are synchronizing. I don&#39;t see you using a <code>synchronized</code> statement here."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1688807219,"post_id":76632272,"comment_id":135125673,"body_markdown":"@JoreJoh see http://www.javapractices.com/topic/TopicAction.do?Id=253","body":"@JoreJoh see <a href=\"http://www.javapractices.com/topic/TopicAction.do?Id=253\" rel=\"nofollow noreferrer\">javapractices.com/topic/TopicAction.do?Id=253</a>"}],"tags":[],"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"comment_count":10,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1688675958,"creation_date":1688674517,"answer_id":76632272,"question_id":76632091,"body_markdown":"***Note.** It&#39;s not my answer but rather the answer [Louis Wasserman][1] gave in the comments (apparently, he doesn&#39;t want to post it as an answer).*\r\n\r\n&gt; At a glance, this looks like a standard thread safety issue caused by trying to concurrently modify a non-thread-safe collection without any sort of locking. Modifications to things like ArrayLists need to be done under a lock.\r\n&gt;\r\n&gt; *Louis Wasserman*\r\n\r\nIndeed, changing this part of `disembark()` method\r\n```java\r\n            boatKeeper.getBoat().removePassenger(this);\r\n            lock.lock();\r\n            condition.signalAll();\r\n            lock.unlock();\r\n```\r\nto this\r\n```java\r\n            lock.lock();\r\n            boatKeeper.getBoat().removePassenger(this);\r\n            condition.signalAll();\r\n            lock.unlock();\r\n```\r\nhelped. Thank you!\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/869736/louis-wasserman","title":"A thread can&#39;t properly remove itself from a List. Why?","body":"<p><em><strong>Note.</strong> It's not my answer but rather the answer <a href=\"https://stackoverflow.com/users/869736/louis-wasserman\">Louis Wasserman</a> gave in the comments (apparently, he doesn't want to post it as an answer).</em></p>\n<blockquote>\n<p>At a glance, this looks like a standard thread safety issue caused by trying to concurrently modify a non-thread-safe collection without any sort of locking. Modifications to things like ArrayLists need to be done under a lock.</p>\n<p><em>Louis Wasserman</em></p>\n</blockquote>\n<p>Indeed, changing this part of <code>disembark()</code> method</p>\n<pre class=\"lang-java prettyprint-override\"><code>            boatKeeper.getBoat().removePassenger(this);\n            lock.lock();\n            condition.signalAll();\n            lock.unlock();\n</code></pre>\n<p>to this</p>\n<pre class=\"lang-java prettyprint-override\"><code>            lock.lock();\n            boatKeeper.getBoat().removePassenger(this);\n            condition.signalAll();\n            lock.unlock();\n</code></pre>\n<p>helped. Thank you!</p>\n"}],"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"comment_count":17,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76632272,"answer_count":1,"score":0,"last_activity_date":1688675958,"creation_date":1688672513,"question_id":76632091,"body_markdown":"When I try to get accustomed with a new library or concept, I typically do a small toy project that utilizes those libraries or concepts. `java.util.concurrent` is no different. I only start to learn that library so I made a few simple apps. Some of them work, but this one (it was supposed to teach me to get comfortable with `Semaphore`) misbehaves. Here&#39;s the complete code. It&#39;s not minimal, but since I don&#39;t know which part I can safely cut (except for `River`, `speed`, but it&#39;s not much code anyway), I decided to include it in its entirety\r\n```java\r\npublic record River(short width) {\r\n}\r\n```\r\n```java\r\npublic interface Status {\r\n    String description();\r\n}\r\n```\r\n```java\r\npublic abstract class StatusReporter extends Thread {\r\n    protected Status status;\r\n    public StatusReporter(String name) {\r\n        super(name);\r\n    }\r\n\r\n    public void setAndReportStatus(Status status) {\r\n        this.status = status;\r\n        System.out.println(getName() + &quot;: &quot; + status.description());\r\n    }\r\n}\r\n```\r\n```java\r\npublic class SharedSynchronizers {\r\n    static final Lock FAIR_LOCK = new ReentrantLock(true);\r\n    static final Condition CONDITION = FAIR_LOCK.newCondition();\r\n}\r\n```\r\n```java\r\npublic class Boat {\r\n    @Getter(AccessLevel.PACKAGE)\r\n    private final byte capacity;\r\n    @Getter\r\n    private final byte speed;\r\n    private final List&lt;Passenger&gt; passengersOnBoard;\r\n    @Getter(AccessLevel.PACKAGE)\r\n    private final Semaphore semaphore;\r\n    private final Condition condition = SharedSynchronizers.CONDITION;\r\n\r\n    private Boat(Builder builder) {\r\n        capacity = builder.capacity;\r\n        speed = builder.speed;\r\n        passengersOnBoard = builder.passengersOnBoard;\r\n        semaphore = builder.semaphore;\r\n    }\r\n\r\n    public static Builder withCapacity(byte capacity) {\r\n        return new Builder(capacity);\r\n    }\r\n\r\n    public static class Builder {\r\n        private final byte capacity;\r\n        private byte speed;\r\n        private final List&lt;Passenger&gt; passengersOnBoard;\r\n        private final Semaphore semaphore;\r\n\r\n        private Builder(byte capacity) {\r\n            this.capacity = capacity;\r\n            this.passengersOnBoard = new ArrayList&lt;&gt;(capacity);\r\n            this.semaphore = new Semaphore(capacity, true);\r\n        }\r\n\r\n        public Boat andSpeed(byte speed) {\r\n            this.speed = speed;\r\n            return new Boat(this);\r\n        }\r\n    }\r\n\r\n    void addPassenger(Passenger passenger) {\r\n        try {\r\n            while (semaphore.availablePermits() &lt; 1) {\r\n                condition.await(); // so that a thread releases a lock if it can&#39;t acquire a permit\r\n            }\r\n            semaphore.acquire();\r\n        } catch (InterruptedException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n        passengersOnBoard.add(passenger);\r\n    }\r\n\r\n    void removePassenger(Passenger passenger) {\r\n        passengersOnBoard.remove(passenger);\r\n    }\r\n\r\n    boolean hasPassengers() {\r\n        return !passengersOnBoard.isEmpty();\r\n    }\r\n\r\n    boolean isFull() {\r\n        return passengersOnBoard.size() == capacity;\r\n    }\r\n}\r\n```\r\n```java\r\npublic class Passenger extends StatusReporter {\r\n    @Setter(AccessLevel.PACKAGE)\r\n    private BoatKeeper boatKeeper;\r\n    private static final short EMBARK_DISEMBARK_TIME = 500;\r\n    private final Lock lock = SharedSynchronizers.FAIR_LOCK;\r\n    private final Condition condition = SharedSynchronizers.CONDITION;\r\n\r\n    public Passenger(String name) {\r\n        super(name);\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        tryToGetOnBoat();\r\n        stayOnBoat();\r\n        disembark();\r\n    }\r\n\r\n    private void tryToGetOnBoat() {\r\n        setAndReportStatus(PassengerStatus.GOING_TO_EMBARK);\r\n        try {\r\n            Thread.sleep(EMBARK_DISEMBARK_TIME);\r\n        } catch (InterruptedException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n        lock.lock();\r\n        boatKeeper.getBoat().addPassenger(this);\r\n        boatKeeper.getPassengersToFerry().remove(this);\r\n        setAndReportStatus(PassengerStatus.EMBARKED_THE_BOAT);\r\n        condition.signalAll();\r\n        lock.unlock();\r\n    }\r\n\r\n    private void stayOnBoat() {\r\n        try {\r\n            lock.lock();\r\n            while (!boatKeeper.isRowing()) {\r\n                condition.await();\r\n            }\r\n            lock.unlock();\r\n        } catch (InterruptedException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n        setAndReportStatus(PassengerStatus.CROSSING_THE_RIVER);\r\n    }\r\n\r\n    private void disembark() {\r\n        try {\r\n            lock.lock();\r\n            while (!boatKeeper.isDisembarking()) {\r\n                condition.await();\r\n            }\r\n            lock.unlock();\r\n            Thread.sleep(EMBARK_DISEMBARK_TIME);\r\n            boatKeeper.getBoat().removePassenger(this);\r\n            lock.lock();\r\n            condition.signalAll();\r\n            lock.unlock();\r\n        } catch (InterruptedException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n        setAndReportStatus(PassengerStatus.ON_THE_OTHER_BANK);\r\n    }\r\n\r\n    @RequiredArgsConstructor\r\n    enum PassengerStatus implements Status {\r\n        GOING_TO_EMBARK(&quot;going to embark the boat...&quot;),\r\n        EMBARKED_THE_BOAT(&quot;embarked the boat!&quot;),\r\n        WAITING_FOR_OTHER_PASSENGERS(&quot;waiting for other passengers to join...&quot;),\r\n        CROSSING_THE_RIVER(&quot;crossing the river...&quot;),\r\n        ON_THE_OTHER_BANK(&quot;on the other bank!&quot;);\r\n\r\n        private final String description;\r\n\r\n        @Override\r\n        public String description() {\r\n            return description;\r\n        }\r\n    }\r\n}\r\n```\r\n```java\r\npublic class BoatKeeper extends StatusReporter {\r\n    @Getter(AccessLevel.PACKAGE)\r\n    private final Boat boat;\r\n    private int timeToCrossRiver;\r\n    @Getter(AccessLevel.PACKAGE)\r\n    private final List&lt;Passenger&gt; passengersToFerry = new ArrayList&lt;&gt;();\r\n    private final Lock lock = SharedSynchronizers.FAIR_LOCK;\r\n    private final Condition condition = SharedSynchronizers.CONDITION;\r\n\r\n    public BoatKeeper(Boat boat) {\r\n        super(&quot;Boat keeper&quot;);\r\n        this.boat = boat;\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        performFerrying();\r\n    }\r\n\r\n    public BoatKeeper ferry(Passenger... passengers) {\r\n        Collections.addAll(passengersToFerry, passengers);\r\n        return this;\r\n    }\r\n\r\n    public void acrossRiver(River river) {\r\n        timeToCrossRiver = river.width() / boat.getSpeed();\r\n        start();\r\n    }\r\n\r\n    private void performFerrying() {\r\n        invitePassengersToEmbark();\r\n        while (hasFerryingToDo()) {\r\n            waitTillBoatReadyToGo();\r\n            crossRiver();\r\n            disembarkPassengers();\r\n            rowBack();\r\n        }\r\n        setAndReportStatus(BoatKeeperStatus.DONE);\r\n    }\r\n\r\n    private void invitePassengersToEmbark() {\r\n        passengersToFerry.forEach(p -&gt; {\r\n            p.setBoatKeeper(this);\r\n            p.start();\r\n        });\r\n    }\r\n\r\n    private void waitTillBoatReadyToGo() {\r\n        if (!isBoardingComplete()) {\r\n            setAndReportStatus(BoatKeeperStatus.WAITING_FOR_PASSENGERS_TO_EMBARK);\r\n        }\r\n        try {\r\n            lock.lock();\r\n            while (!isBoardingComplete()) {\r\n                condition.await();\r\n            }\r\n            lock.unlock();\r\n        } catch (InterruptedException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n    private void crossRiver() {\r\n        setAndReportStatus(BoatKeeperStatus.FERRYING_PASSENGERS);\r\n        lock.lock();\r\n        condition.signalAll();\r\n        lock.unlock();\r\n        try {\r\n            Thread.sleep(timeToCrossRiver);\r\n        } catch (InterruptedException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n    private void disembarkPassengers() {\r\n        setAndReportStatus(BoatKeeperStatus.DISEMBARKING_PASSENGERS);\r\n        lock.lock();\r\n        condition.signalAll();\r\n        try {\r\n            while (boat.hasPassengers()) {\r\n                condition.await();\r\n            }\r\n            lock.unlock();\r\n        } catch (InterruptedException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n    private void rowBack() {\r\n        setAndReportStatus(BoatKeeperStatus.RETURNING);\r\n        try {\r\n            Thread.sleep(timeToCrossRiver);\r\n        } catch (InterruptedException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n        lock.lock();\r\n        /*\r\n        doesn&#39;t matter if the boat keeper releases more permits than \r\n        the number of passengers it ferried: if it&#39;s less than the boat&#39;s\r\n        max capacity, then it was the last trip anyway\r\n        */\r\n        boat.getSemaphore().release(boat.getCapacity());\r\n        condition.signalAll();\r\n        lock.unlock();\r\n    }\r\n\r\n    private boolean hasFerryingToDo() {\r\n        return !passengersToFerry.isEmpty() || boat.hasPassengers();\r\n    }\r\n\r\n    private boolean isBoardingComplete() {\r\n        return boat.isFull() ||\r\n                (boat.hasPassengers() &amp;&amp; passengersToFerry.isEmpty());\r\n    }\r\n\r\n    boolean isRowing() {\r\n        return status == BoatKeeperStatus.FERRYING_PASSENGERS;\r\n    }\r\n\r\n    boolean isDisembarking() {\r\n        return status == BoatKeeperStatus.DISEMBARKING_PASSENGERS;\r\n    }\r\n\r\n    @RequiredArgsConstructor\r\n    enum BoatKeeperStatus implements Status {\r\n        WAITING_FOR_PASSENGERS_TO_EMBARK(&quot;waiting for passengers to embark...&quot;),\r\n        FERRYING_PASSENGERS(&quot;ferrying passengers across the river...&quot;),\r\n        DISEMBARKING_PASSENGERS(&quot;disembarking passengers...&quot;),\r\n        RETURNING(&quot;returning...&quot;),\r\n        DONE(&quot;all passengers are ferried!&quot;);\r\n        private final String description;\r\n\r\n        @Override\r\n        public String description() {\r\n            return description;\r\n        }\r\n    }\r\n}\r\n```\r\nClient code:\r\n```java\r\npublic class App {\r\n    public static void main(String[] args) {\r\n        River river = new River((short) 2800);\r\n        Boat tinyBoat = Boat.withCapacity((byte) 2).andSpeed((byte) 10);\r\n        BoatKeeper boatKeeper = new BoatKeeper(tinyBoat);\r\n        Passenger[] passengers = {\r\n                new Passenger(&quot;Frank&quot;), new Passenger(&quot;Liz&quot;), new Passenger(&quot;Gabriel&quot;)\r\n        };\r\n        boatKeeper.ferry(passengers).acrossRiver(river);\r\n    }\r\n}\r\n```\r\nBehavior varies. Whether you run it with or without the IntelliJ IDEA debugger seems to have some effect, but it&#39;s not a fail-proof predictor either\r\n\r\n**Scenario #1: Ghost passenger** (typical without the debugger, unless it&#39;s attached after the freeze)\r\n\r\nThe passenger threads disembark and finish, but the boat still has one `null` element making the boat keeper wait indefinitely and not row back.\r\n```\r\nBoat keeper: waiting for passengers to embark...\r\nFrank: going to embark the boat...\r\nLiz: going to embark the boat...\r\nGabriel: going to embark the boat...\r\nFrank: embarked the boat!\r\nLiz: embarked the boat!\r\nBoat keeper: ferrying passengers across the river...\r\nLiz: crossing the river...\r\nFrank: crossing the river...\r\nBoat keeper: disembarking passengers...\r\nLiz: on the other bank!\r\nFrank: on the other bank!\r\n\r\n// freezes!\r\n```\r\n[screenshot showing that there&#39;s some null passenger on the boat](https://i.stack.imgur.com/NFb9y.png)\r\n\r\n**Scenario #2: Everything is fine** (typically with the debugger, rarely without)\r\n\r\nNo issues observed\r\n```\r\nGabriel: going to embark the boat...\r\nLiz: going to embark the boat...\r\nFrank: going to embark the boat...\r\nBoat keeper: waiting for passengers to embark...\r\nFrank: embarked the boat!\r\nLiz: embarked the boat!\r\nBoat keeper: ferrying passengers across the river...\r\nFrank: crossing the river...\r\nLiz: crossing the river...\r\nBoat keeper: disembarking passengers...\r\nFrank: on the other bank!\r\nLiz: on the other bank!\r\nBoat keeper: returning...\r\nGabriel: embarked the boat!\r\nBoat keeper: ferrying passengers across the river...\r\nGabriel: crossing the river...\r\nBoat keeper: disembarking passengers...\r\nGabriel: on the other bank!\r\nBoat keeper: returning...\r\nBoat keeper: all passengers are ferried!\r\n\r\nProcess finished with exit code 0\r\n```\r\nSince I can&#39;t reproduce the issue while debugging the program, I&#39;m completely at a loss. **Why do those freezes happen? How do I fix it so that I get the second scenario all the time?**\r\n\r\nI debugged thoroughly, spent a lot of hours trying to pinpoint the issue. I don&#39;t see any other choice but to ask for your help","title":"A thread can&#39;t properly remove itself from a List. Why?","body":"<p>When I try to get accustomed with a new library or concept, I typically do a small toy project that utilizes those libraries or concepts. <code>java.util.concurrent</code> is no different. I only start to learn that library so I made a few simple apps. Some of them work, but this one (it was supposed to teach me to get comfortable with <code>Semaphore</code>) misbehaves. Here's the complete code. It's not minimal, but since I don't know which part I can safely cut (except for <code>River</code>, <code>speed</code>, but it's not much code anyway), I decided to include it in its entirety</p>\n<pre class=\"lang-java prettyprint-override\"><code>public record River(short width) {\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public interface Status {\n    String description();\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public abstract class StatusReporter extends Thread {\n    protected Status status;\n    public StatusReporter(String name) {\n        super(name);\n    }\n\n    public void setAndReportStatus(Status status) {\n        this.status = status;\n        System.out.println(getName() + &quot;: &quot; + status.description());\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class SharedSynchronizers {\n    static final Lock FAIR_LOCK = new ReentrantLock(true);\n    static final Condition CONDITION = FAIR_LOCK.newCondition();\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class Boat {\n    @Getter(AccessLevel.PACKAGE)\n    private final byte capacity;\n    @Getter\n    private final byte speed;\n    private final List&lt;Passenger&gt; passengersOnBoard;\n    @Getter(AccessLevel.PACKAGE)\n    private final Semaphore semaphore;\n    private final Condition condition = SharedSynchronizers.CONDITION;\n\n    private Boat(Builder builder) {\n        capacity = builder.capacity;\n        speed = builder.speed;\n        passengersOnBoard = builder.passengersOnBoard;\n        semaphore = builder.semaphore;\n    }\n\n    public static Builder withCapacity(byte capacity) {\n        return new Builder(capacity);\n    }\n\n    public static class Builder {\n        private final byte capacity;\n        private byte speed;\n        private final List&lt;Passenger&gt; passengersOnBoard;\n        private final Semaphore semaphore;\n\n        private Builder(byte capacity) {\n            this.capacity = capacity;\n            this.passengersOnBoard = new ArrayList&lt;&gt;(capacity);\n            this.semaphore = new Semaphore(capacity, true);\n        }\n\n        public Boat andSpeed(byte speed) {\n            this.speed = speed;\n            return new Boat(this);\n        }\n    }\n\n    void addPassenger(Passenger passenger) {\n        try {\n            while (semaphore.availablePermits() &lt; 1) {\n                condition.await(); // so that a thread releases a lock if it can't acquire a permit\n            }\n            semaphore.acquire();\n        } catch (InterruptedException e) {\n            throw new RuntimeException(e);\n        }\n        passengersOnBoard.add(passenger);\n    }\n\n    void removePassenger(Passenger passenger) {\n        passengersOnBoard.remove(passenger);\n    }\n\n    boolean hasPassengers() {\n        return !passengersOnBoard.isEmpty();\n    }\n\n    boolean isFull() {\n        return passengersOnBoard.size() == capacity;\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class Passenger extends StatusReporter {\n    @Setter(AccessLevel.PACKAGE)\n    private BoatKeeper boatKeeper;\n    private static final short EMBARK_DISEMBARK_TIME = 500;\n    private final Lock lock = SharedSynchronizers.FAIR_LOCK;\n    private final Condition condition = SharedSynchronizers.CONDITION;\n\n    public Passenger(String name) {\n        super(name);\n    }\n\n    @Override\n    public void run() {\n        tryToGetOnBoat();\n        stayOnBoat();\n        disembark();\n    }\n\n    private void tryToGetOnBoat() {\n        setAndReportStatus(PassengerStatus.GOING_TO_EMBARK);\n        try {\n            Thread.sleep(EMBARK_DISEMBARK_TIME);\n        } catch (InterruptedException e) {\n            throw new RuntimeException(e);\n        }\n        lock.lock();\n        boatKeeper.getBoat().addPassenger(this);\n        boatKeeper.getPassengersToFerry().remove(this);\n        setAndReportStatus(PassengerStatus.EMBARKED_THE_BOAT);\n        condition.signalAll();\n        lock.unlock();\n    }\n\n    private void stayOnBoat() {\n        try {\n            lock.lock();\n            while (!boatKeeper.isRowing()) {\n                condition.await();\n            }\n            lock.unlock();\n        } catch (InterruptedException e) {\n            throw new RuntimeException(e);\n        }\n        setAndReportStatus(PassengerStatus.CROSSING_THE_RIVER);\n    }\n\n    private void disembark() {\n        try {\n            lock.lock();\n            while (!boatKeeper.isDisembarking()) {\n                condition.await();\n            }\n            lock.unlock();\n            Thread.sleep(EMBARK_DISEMBARK_TIME);\n            boatKeeper.getBoat().removePassenger(this);\n            lock.lock();\n            condition.signalAll();\n            lock.unlock();\n        } catch (InterruptedException e) {\n            throw new RuntimeException(e);\n        }\n        setAndReportStatus(PassengerStatus.ON_THE_OTHER_BANK);\n    }\n\n    @RequiredArgsConstructor\n    enum PassengerStatus implements Status {\n        GOING_TO_EMBARK(&quot;going to embark the boat...&quot;),\n        EMBARKED_THE_BOAT(&quot;embarked the boat!&quot;),\n        WAITING_FOR_OTHER_PASSENGERS(&quot;waiting for other passengers to join...&quot;),\n        CROSSING_THE_RIVER(&quot;crossing the river...&quot;),\n        ON_THE_OTHER_BANK(&quot;on the other bank!&quot;);\n\n        private final String description;\n\n        @Override\n        public String description() {\n            return description;\n        }\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class BoatKeeper extends StatusReporter {\n    @Getter(AccessLevel.PACKAGE)\n    private final Boat boat;\n    private int timeToCrossRiver;\n    @Getter(AccessLevel.PACKAGE)\n    private final List&lt;Passenger&gt; passengersToFerry = new ArrayList&lt;&gt;();\n    private final Lock lock = SharedSynchronizers.FAIR_LOCK;\n    private final Condition condition = SharedSynchronizers.CONDITION;\n\n    public BoatKeeper(Boat boat) {\n        super(&quot;Boat keeper&quot;);\n        this.boat = boat;\n    }\n\n    @Override\n    public void run() {\n        performFerrying();\n    }\n\n    public BoatKeeper ferry(Passenger... passengers) {\n        Collections.addAll(passengersToFerry, passengers);\n        return this;\n    }\n\n    public void acrossRiver(River river) {\n        timeToCrossRiver = river.width() / boat.getSpeed();\n        start();\n    }\n\n    private void performFerrying() {\n        invitePassengersToEmbark();\n        while (hasFerryingToDo()) {\n            waitTillBoatReadyToGo();\n            crossRiver();\n            disembarkPassengers();\n            rowBack();\n        }\n        setAndReportStatus(BoatKeeperStatus.DONE);\n    }\n\n    private void invitePassengersToEmbark() {\n        passengersToFerry.forEach(p -&gt; {\n            p.setBoatKeeper(this);\n            p.start();\n        });\n    }\n\n    private void waitTillBoatReadyToGo() {\n        if (!isBoardingComplete()) {\n            setAndReportStatus(BoatKeeperStatus.WAITING_FOR_PASSENGERS_TO_EMBARK);\n        }\n        try {\n            lock.lock();\n            while (!isBoardingComplete()) {\n                condition.await();\n            }\n            lock.unlock();\n        } catch (InterruptedException e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    private void crossRiver() {\n        setAndReportStatus(BoatKeeperStatus.FERRYING_PASSENGERS);\n        lock.lock();\n        condition.signalAll();\n        lock.unlock();\n        try {\n            Thread.sleep(timeToCrossRiver);\n        } catch (InterruptedException e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    private void disembarkPassengers() {\n        setAndReportStatus(BoatKeeperStatus.DISEMBARKING_PASSENGERS);\n        lock.lock();\n        condition.signalAll();\n        try {\n            while (boat.hasPassengers()) {\n                condition.await();\n            }\n            lock.unlock();\n        } catch (InterruptedException e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    private void rowBack() {\n        setAndReportStatus(BoatKeeperStatus.RETURNING);\n        try {\n            Thread.sleep(timeToCrossRiver);\n        } catch (InterruptedException e) {\n            throw new RuntimeException(e);\n        }\n        lock.lock();\n        /*\n        doesn't matter if the boat keeper releases more permits than \n        the number of passengers it ferried: if it's less than the boat's\n        max capacity, then it was the last trip anyway\n        */\n        boat.getSemaphore().release(boat.getCapacity());\n        condition.signalAll();\n        lock.unlock();\n    }\n\n    private boolean hasFerryingToDo() {\n        return !passengersToFerry.isEmpty() || boat.hasPassengers();\n    }\n\n    private boolean isBoardingComplete() {\n        return boat.isFull() ||\n                (boat.hasPassengers() &amp;&amp; passengersToFerry.isEmpty());\n    }\n\n    boolean isRowing() {\n        return status == BoatKeeperStatus.FERRYING_PASSENGERS;\n    }\n\n    boolean isDisembarking() {\n        return status == BoatKeeperStatus.DISEMBARKING_PASSENGERS;\n    }\n\n    @RequiredArgsConstructor\n    enum BoatKeeperStatus implements Status {\n        WAITING_FOR_PASSENGERS_TO_EMBARK(&quot;waiting for passengers to embark...&quot;),\n        FERRYING_PASSENGERS(&quot;ferrying passengers across the river...&quot;),\n        DISEMBARKING_PASSENGERS(&quot;disembarking passengers...&quot;),\n        RETURNING(&quot;returning...&quot;),\n        DONE(&quot;all passengers are ferried!&quot;);\n        private final String description;\n\n        @Override\n        public String description() {\n            return description;\n        }\n    }\n}\n</code></pre>\n<p>Client code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class App {\n    public static void main(String[] args) {\n        River river = new River((short) 2800);\n        Boat tinyBoat = Boat.withCapacity((byte) 2).andSpeed((byte) 10);\n        BoatKeeper boatKeeper = new BoatKeeper(tinyBoat);\n        Passenger[] passengers = {\n                new Passenger(&quot;Frank&quot;), new Passenger(&quot;Liz&quot;), new Passenger(&quot;Gabriel&quot;)\n        };\n        boatKeeper.ferry(passengers).acrossRiver(river);\n    }\n}\n</code></pre>\n<p>Behavior varies. Whether you run it with or without the IntelliJ IDEA debugger seems to have some effect, but it's not a fail-proof predictor either</p>\n<p><strong>Scenario #1: Ghost passenger</strong> (typical without the debugger, unless it's attached after the freeze)</p>\n<p>The passenger threads disembark and finish, but the boat still has one <code>null</code> element making the boat keeper wait indefinitely and not row back.</p>\n<pre><code>Boat keeper: waiting for passengers to embark...\nFrank: going to embark the boat...\nLiz: going to embark the boat...\nGabriel: going to embark the boat...\nFrank: embarked the boat!\nLiz: embarked the boat!\nBoat keeper: ferrying passengers across the river...\nLiz: crossing the river...\nFrank: crossing the river...\nBoat keeper: disembarking passengers...\nLiz: on the other bank!\nFrank: on the other bank!\n\n// freezes!\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/NFb9y.png\" rel=\"nofollow noreferrer\">screenshot showing that there's some null passenger on the boat</a></p>\n<p><strong>Scenario #2: Everything is fine</strong> (typically with the debugger, rarely without)</p>\n<p>No issues observed</p>\n<pre><code>Gabriel: going to embark the boat...\nLiz: going to embark the boat...\nFrank: going to embark the boat...\nBoat keeper: waiting for passengers to embark...\nFrank: embarked the boat!\nLiz: embarked the boat!\nBoat keeper: ferrying passengers across the river...\nFrank: crossing the river...\nLiz: crossing the river...\nBoat keeper: disembarking passengers...\nFrank: on the other bank!\nLiz: on the other bank!\nBoat keeper: returning...\nGabriel: embarked the boat!\nBoat keeper: ferrying passengers across the river...\nGabriel: crossing the river...\nBoat keeper: disembarking passengers...\nGabriel: on the other bank!\nBoat keeper: returning...\nBoat keeper: all passengers are ferried!\n\nProcess finished with exit code 0\n</code></pre>\n<p>Since I can't reproduce the issue while debugging the program, I'm completely at a loss. <strong>Why do those freezes happen? How do I fix it so that I get the second scenario all the time?</strong></p>\n<p>I debugged thoroughly, spent a lot of hours trying to pinpoint the issue. I don't see any other choice but to ask for your help</p>\n"},{"tags":["java","spring-boot","apache-kafka","confluent-platform","kafka-cluster"],"answers":[{"tags":[],"owner":{"account_id":84677,"reputation":16500,"user_id":236528,"accept_rate":100,"display_name":"mjuarez"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1592462912,"creation_date":1592462597,"answer_id":62443889,"question_id":62443782,"body_markdown":"You don&#39;t actually create topics in one specific node in a Kakfa cluster.  When you issue a request to create a topic, the partitions will automatically be spread out across all nodes belonging to the cluster, and the replicas will also be spread out.  That is how Kafka handles high-availability.  If one of the nodes is down, some other node has all the required data, so there is no downtime or impact to users of the cluster.\r\n\r\nYou can issue a `--describe` command like this:\r\n\r\n    &gt; bin/kafka-topics.sh --describe --bootstrap-server localhost:9092 --topic my-replicated-topic\r\n\r\n        Topic:my-replicated-topic   PartitionCount:1    ReplicationFactor:3 Configs:\r\n            Topic: my-replicated-topic  Partition: 0    Leader: 1   Replicas: 1,2,0 Isr: 1,2,0\r\n\r\nThat will give you a list of the partitions for your topic, where are they located, which node is the leader for that partition (the one consumers are told to consume from when they need data from that partition), and some more info like the In-Sync Replica status, or ISR, and the replication factor.\r\n\r\nThere&#39;s more info at the official Kafka docs [here][1] and [here][2].\r\n\r\nBear in mind that when your client connects to the `bootstrap-server` it is not specifying a complete list of brokers *from which to read data*. It&#39;s just specifying one (or more) brokers from which to pull *information about the cluster*. When the client reads/writes from a given topic and partition that is done directly to the relevant broker that holds that data (_regardless_ of the particular brokers specified in the bootstrap). You can see more about this process [here][3] and [here][4].\r\n\r\n\r\n  [1]: https://kafka.apache.org/documentation/#quickstart_multibroker\r\n  [2]: http://kafka.apache.org/documentation/#replication\r\n  [3]: https://www.confluent.io/blog/kafka-client-cannot-connect-to-broker-on-aws-on-docker-etc\r\n  [4]: http://kafka.apache.org/documentation/#bootstrap.servers","title":"Can kafka partitions be spread across multiple kafka cluster nodes?","body":"<p>You don't actually create topics in one specific node in a Kakfa cluster.  When you issue a request to create a topic, the partitions will automatically be spread out across all nodes belonging to the cluster, and the replicas will also be spread out.  That is how Kafka handles high-availability.  If one of the nodes is down, some other node has all the required data, so there is no downtime or impact to users of the cluster.</p>\n\n<p>You can issue a <code>--describe</code> command like this:</p>\n\n<pre><code>&gt; bin/kafka-topics.sh --describe --bootstrap-server localhost:9092 --topic my-replicated-topic\n\n    Topic:my-replicated-topic   PartitionCount:1    ReplicationFactor:3 Configs:\n        Topic: my-replicated-topic  Partition: 0    Leader: 1   Replicas: 1,2,0 Isr: 1,2,0\n</code></pre>\n\n<p>That will give you a list of the partitions for your topic, where are they located, which node is the leader for that partition (the one consumers are told to consume from when they need data from that partition), and some more info like the In-Sync Replica status, or ISR, and the replication factor.</p>\n\n<p>There's more info at the official Kafka docs <a href=\"https://kafka.apache.org/documentation/#quickstart_multibroker\" rel=\"nofollow noreferrer\">here</a> and <a href=\"http://kafka.apache.org/documentation/#replication\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Bear in mind that when your client connects to the <code>bootstrap-server</code> it is not specifying a complete list of brokers <em>from which to read data</em>. It's just specifying one (or more) brokers from which to pull <em>information about the cluster</em>. When the client reads/writes from a given topic and partition that is done directly to the relevant broker that holds that data (<em>regardless</em> of the particular brokers specified in the bootstrap). You can see more about this process <a href=\"https://www.confluent.io/blog/kafka-client-cannot-connect-to-broker-on-aws-on-docker-etc\" rel=\"nofollow noreferrer\">here</a> and <a href=\"http://kafka.apache.org/documentation/#bootstrap.servers\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":5495279,"reputation":31,"user_id":4366627,"display_name":"si889"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1592494706,"creation_date":1592494706,"answer_id":62453801,"question_id":62443782,"body_markdown":"Like the other answer said, a topic is not owned by or created for a particular node, it is created for the cluster altogether. \r\nWhenever a topic is created, the partitions are divided among the cluster nodes. Each partition has a leader node and replica nodes. Producers write to the leader node and Kafka internally replicates the data on the replica nodes. Consumers consume data of a partition from its leader node.  \r\n\r\nFor a better understanding/visualisation of topic partition distribution in Kafka, you can use tools like [Kafdrop](https://github.com/obsidiandynamics/kafdrop)\r\nYou can follow the steps in readme section of the repo for setup. \r\nYou can download the latest binary from [here](https://dl.bintray.com/obsidiandynamics/kafdrop/com/obsidiandynamics/kafdrop/kafdrop/).\r\nIn the UI, you can see the leader and replica nodes for each partition of a topic.\r\n\r\nThe setup is pretty straightforward and I personally find the tool VERY useful! ","title":"Can kafka partitions be spread across multiple kafka cluster nodes?","body":"<p>Like the other answer said, a topic is not owned by or created for a particular node, it is created for the cluster altogether. \nWhenever a topic is created, the partitions are divided among the cluster nodes. Each partition has a leader node and replica nodes. Producers write to the leader node and Kafka internally replicates the data on the replica nodes. Consumers consume data of a partition from its leader node.  </p>\n\n<p>For a better understanding/visualisation of topic partition distribution in Kafka, you can use tools like <a href=\"https://github.com/obsidiandynamics/kafdrop\" rel=\"nofollow noreferrer\">Kafdrop</a>\nYou can follow the steps in readme section of the repo for setup. \nYou can download the latest binary from <a href=\"https://dl.bintray.com/obsidiandynamics/kafdrop/com/obsidiandynamics/kafdrop/kafdrop/\" rel=\"nofollow noreferrer\">here</a>.\nIn the UI, you can see the leader and replica nodes for each partition of a topic.</p>\n\n<p>The setup is pretty straightforward and I personally find the tool VERY useful! </p>\n"},{"tags":[],"owner":{"account_id":3420602,"reputation":39,"user_id":2868368,"display_name":"Michael Peng"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688675474,"creation_date":1688675474,"answer_id":76632361,"question_id":62443782,"body_markdown":"So a Kafka topic is a logic concept, not a physical unit.","title":"Can kafka partitions be spread across multiple kafka cluster nodes?","body":"<p>So a Kafka topic is a logic concept, not a physical unit.</p>\n"}],"owner":{"account_id":10694195,"reputation":338,"user_id":7871999,"display_name":"Ananya Antony"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2087,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":62443889,"answer_count":3,"score":2,"last_activity_date":1688675474,"creation_date":1592462183,"question_id":62443782,"body_markdown":"My application has a list of kafka cluster nodes specified in the spring.kafka.bootstrap-servers property and listens to topics on all these nodes.\r\n\r\nIf I were to create a topic on one of these nodes, with lets say 5 partitions, will these partitions be spread across these multiple nodes or will they be created on a single node? Also, how can I find out which node a topic partition actually exists on?","title":"Can kafka partitions be spread across multiple kafka cluster nodes?","body":"<p>My application has a list of kafka cluster nodes specified in the spring.kafka.bootstrap-servers property and listens to topics on all these nodes.</p>\n\n<p>If I were to create a topic on one of these nodes, with lets say 5 partitions, will these partitions be spread across these multiple nodes or will they be created on a single node? Also, how can I find out which node a topic partition actually exists on?</p>\n"},{"tags":["java","mysql","hibernate"],"answers":[{"comments":[{"owner":{"account_id":1045541,"reputation":20122,"user_id":1050619,"accept_rate":50,"display_name":"user1050619"},"score":0,"creation_date":1424871841,"post_id":28720562,"comment_id":45727931,"body_markdown":"I tried it but get a error.. Given the error in the above post","body":"I tried it but get a error.. Given the error in the above post"},{"owner":{"account_id":5077780,"reputation":24093,"user_id":4074715,"display_name":"Predrag Maric"},"score":0,"creation_date":1424872279,"post_id":28720562,"comment_id":45728214,"body_markdown":"What is the database type of column `emp_dept#id`?","body":"What is the database type of column <code>emp_dept#id</code>?"},{"owner":{"account_id":1045541,"reputation":20122,"user_id":1050619,"accept_rate":50,"display_name":"user1050619"},"score":0,"creation_date":1424872324,"post_id":28720562,"comment_id":45728234,"body_markdown":"I changed the column type to  `ID` int(11) NOT NULL **AUTO_INCREMENT**, ie; added AUTO_INCREMENT and it started working...Thanks","body":"I changed the column type to  <code>ID</code> int(11) NOT NULL <b>AUTO_INCREMENT</b>, ie; added AUTO_INCREMENT and it started working...Thanks"},{"owner":{"account_id":5077780,"reputation":24093,"user_id":4074715,"display_name":"Predrag Maric"},"score":0,"creation_date":1424872473,"post_id":28720562,"comment_id":45728353,"body_markdown":"That&#39;s why I asked you, `AUTO_INCREMENT` should already be there if you let Hibernate generate the tables automatically. You&#39;re welcome, glad you got it working.","body":"That&#39;s why I asked you, <code>AUTO_INCREMENT</code> should already be there if you let Hibernate generate the tables automatically. You&#39;re welcome, glad you got it working."},{"owner":{"account_id":1045541,"reputation":20122,"user_id":1050619,"accept_rate":50,"display_name":"user1050619"},"score":0,"creation_date":1424872492,"post_id":28720562,"comment_id":45728361,"body_markdown":"One more question..Do I need to explicitly set the department object d1.setEmp1000(e1) even though the departments are related to that Employee- e1.setEmpDepts(deptlist);","body":"One more question..Do I need to explicitly set the department object d1.setEmp1000(e1) even though the departments are related to that Employee- e1.setEmpDepts(deptlist);"},{"owner":{"account_id":5077780,"reputation":24093,"user_id":4074715,"display_name":"Predrag Maric"},"score":0,"creation_date":1424872602,"post_id":28720562,"comment_id":45728437,"body_markdown":"Yes, you should maintain both sides of a bidirectional relationship.","body":"Yes, you should maintain both sides of a bidirectional relationship."},{"owner":{"account_id":4095273,"reputation":1557,"user_id":3362244,"accept_rate":60,"display_name":"teuber789"},"score":0,"creation_date":1522965074,"post_id":28720562,"comment_id":86375973,"body_markdown":"A note: if all you want to do is cascade the persist operation down to child entities, you should use `CascadeType.PERSIST`. This answer almost leads one to believe that `CascadeType.ALL` is the same as `CascadeType.PERSIST`.","body":"A note: if all you want to do is cascade the persist operation down to child entities, you should use <code>CascadeType.PERSIST</code>. This answer almost leads one to believe that <code>CascadeType.ALL</code> is the same as <code>CascadeType.PERSIST</code>."},{"owner":{"account_id":4095273,"reputation":1557,"user_id":3362244,"accept_rate":60,"display_name":"teuber789"},"score":0,"creation_date":1522965166,"post_id":28720562,"comment_id":86376002,"body_markdown":"That being said, `CascadeType.ALL` is better for many parent-child relationships bc it will propagate all cascading operations (perist, delete, refresh, etc) down to the child entities. More: https://stackoverflow.com/questions/13027214/jpa-manytoone-with-cascadetype-all","body":"That being said, <code>CascadeType.ALL</code> is better for many parent-child relationships bc it will propagate all cascading operations (perist, delete, refresh, etc) down to the child entities. More: <a href=\"https://stackoverflow.com/questions/13027214/jpa-manytoone-with-cascadetype-all\" title=\"jpa manytoone with cascadetype all\">stackoverflow.com/questions/13027214/&hellip;</a>"}],"tags":[],"owner":{"account_id":5077780,"reputation":24093,"user_id":4074715,"display_name":"Predrag Maric"},"comment_count":8,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1424871762,"creation_date":1424871762,"answer_id":28720562,"question_id":28720498,"body_markdown":"You need to cascade the persist operation down to child entities. Change `empDept` mapping to \r\n\r\n    @OneToMany(mappedBy=&quot;emp1000&quot;, cascade = CascadeType.ALL)","title":"Hibernate child object not saving","body":"<p>You need to cascade the persist operation down to child entities. Change <code>empDept</code> mapping to </p>\n\n<pre><code>@OneToMany(mappedBy=\"emp1000\", cascade = CascadeType.ALL)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9997008,"reputation":19,"user_id":7394282,"display_name":"sandhya nayak"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1688673474,"creation_date":1488523080,"answer_id":42572242,"question_id":28720498,"body_markdown":"Use this field annotation:\r\n\r\n    @Cascade({org.hibernate.annotations.CascadeType.ALL}) \r\n\r\nInstead of using `javax.persistence.CascadeType.ALL` because there is an issue if you use both Hibernate and JPA together.","title":"Hibernate child object not saving","body":"<p>Use this field annotation:</p>\n<pre><code>@Cascade({org.hibernate.annotations.CascadeType.ALL}) \n</code></pre>\n<p>Instead of using <code>javax.persistence.CascadeType.ALL</code> because there is an issue if you use both Hibernate and JPA together.</p>\n"}],"owner":{"account_id":1045541,"reputation":20122,"user_id":1050619,"accept_rate":50,"display_name":"user1050619"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9607,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":28720562,"answer_count":2,"score":4,"last_activity_date":1688673474,"creation_date":1424871575,"question_id":28720498,"body_markdown":"I have a Employee and Employee Dept table. One employee can have multiple departments.\r\n\r\nI have defined the tables in MySQL and generated the entities using JPA.\r\n\r\n    package model;\r\n    \r\n    import java.io.Serializable;\r\n    import javax.persistence.*;\r\n    import java.util.List;\r\n    \r\n    /**\r\n     * The persistent class for the emp1000 database table.\r\n     * \r\n     */\r\n    @Entity\r\n    @NamedQuery(name=&quot;Emp1000.findAll&quot;, query=&quot;SELECT e FROM Emp1000 e&quot;)\r\n    public class Emp1000 implements Serializable {\r\n    \tprivate static final long serialVersionUID = 1L;\r\n    \r\n    \t@Id\r\n    \t@GeneratedValue(strategy=GenerationType.IDENTITY)\r\n    \tprivate int id;\r\n    \r\n    \tprivate String firstName;\r\n    \r\n    \tprivate String lastName;\r\n    \r\n    \t//bi-directional many-to-one association to EmpDept\r\n    \t@OneToMany(mappedBy=&quot;emp1000&quot;)\r\n    \tprivate List&lt;EmpDept&gt; empDepts;\r\n    \r\n    \tpublic Emp1000() {\r\n    \t}\r\n    \r\n    \tpublic int getId() {\r\n    \t\treturn this.id;\r\n    \t}\r\n    \r\n    \tpublic void setId(int id) {\r\n    \t\tthis.id = id;\r\n    \t}\r\n    \r\n    \tpublic String getFirstName() {\r\n    \t\treturn this.firstName;\r\n    \t}\r\n    \r\n    \tpublic void setFirstName(String firstName) {\r\n    \t\tthis.firstName = firstName;\r\n    \t}\r\n    \r\n    \tpublic String getLastName() {\r\n    \t\treturn this.lastName;\r\n    \t}\r\n    \r\n    \tpublic void setLastName(String lastName) {\r\n    \t\tthis.lastName = lastName;\r\n    \t}\r\n    \r\n    \tpublic List&lt;EmpDept&gt; getEmpDepts() {\r\n    \t\treturn this.empDepts;\r\n    \t}\r\n    \r\n    \tpublic void setEmpDepts(List&lt;EmpDept&gt; empDepts) {\r\n    \t\tthis.empDepts = empDepts;\r\n    \t}\r\n    \r\n    \tpublic EmpDept addEmpDept(EmpDept empDept) {\r\n    \t\tgetEmpDepts().add(empDept);\r\n    \t\tempDept.setEmp1000(this);\r\n    \r\n    \t\treturn empDept;\r\n    \t}\r\n    \r\n    \tpublic EmpDept removeEmpDept(EmpDept empDept) {\r\n    \t\tgetEmpDepts().remove(empDept);\r\n    \t\tempDept.setEmp1000(null);\r\n    \r\n    \t\treturn empDept;\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\n\r\n    @Entity\r\n    @Table(name=&quot;emp_dept&quot;)\r\n    @NamedQuery(name=&quot;EmpDept.findAll&quot;, query=&quot;SELECT e FROM EmpDept e&quot;)\r\n    public class EmpDept implements Serializable {\r\n    \tprivate static final long serialVersionUID = 1L;\r\n    \r\n    \t@Id\r\n    \t@GeneratedValue(strategy=GenerationType.IDENTITY)\r\n    \tprivate int id;\r\n    \r\n    \t@Column(name=&quot;emp_dept&quot;)\r\n    \tprivate String empDept;\r\n    \r\n    \t//bi-directional many-to-one association to Emp1000\r\n    \t@ManyToOne\r\n    \t@JoinColumn(name=&quot;emp_id&quot;)\r\n    \tprivate Emp1000 emp1000;\r\n    \r\n    \tpublic EmpDept() {\r\n    \t}\r\n    \r\n    \tpublic int getId() {\r\n    \t\treturn this.id;\r\n    \t}\r\n    \r\n    \tpublic void setId(int id) {\r\n    \t\tthis.id = id;\r\n    \t}\r\n    \r\n    \tpublic String getEmpDept() {\r\n    \t\treturn this.empDept;\r\n    \t}\r\n    \r\n    \tpublic void setEmpDept(String empDept) {\r\n    \t\tthis.empDept = empDept;\r\n    \t}\r\n    \r\n    \tpublic Emp1000 getEmp1000() {\r\n    \t\treturn this.emp1000;\r\n    \t}\r\n    \r\n    \tpublic void setEmp1000(Emp1000 emp1000) {\r\n    \t\tthis.emp1000 = emp1000;\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\n\r\nWhen I try to generate to create a Employee object and associated dept objects and save it to database, the child table never gets saved.\r\n\r\n\r\n\r\n    public class StoreData {\r\n    \tpublic static void main(String[] args) {\r\n    \t    Session session=new AnnotationConfiguration()  \r\n            .configure().buildSessionFactory().openSession();  \r\n    \t      \r\n    \t    //creating transaction object  \r\n    \t    Transaction t=session.beginTransaction();  \r\n    \t    \r\n    \t    \r\n    \t    Emp1000 e1 = new Emp1000();\r\n    \t    e1.setFirstName(&quot;Prem&quot;);\r\n    \t    e1.setLastName(&quot;Anand&quot;);\r\n    \t    \r\n    \t    EmpDept d1 = new EmpDept();\r\n    \t    d1.setEmpDept(&quot;Maths&quot;);\r\n    \t    d1.setEmp1000(e1);\r\n    \t    \r\n    \t    EmpDept d2 = new EmpDept();\r\n    \t    d1.setEmpDept(&quot;Science&quot;);\r\n    \t    d1.setEmp1000(e1);\r\n    \t    \r\n    \t    ArrayList&lt;EmpDept&gt; deptlist = new ArrayList();\r\n    \t    deptlist.add(d1);\r\n    \t    deptlist.add(d2);\r\n    \t    \r\n    \t    \r\n    \t    e1.setEmpDepts(deptlist);\r\n    \t    \r\n    \t    //session.saveOrUpdate(e1);\r\n    \t    \r\n    \t    session.persist(e1);//persisting the object  \r\n    \t    \r\n    \t      \r\n    \t    t.commit();//transaction is committed  \r\n    \t    \r\n    \t    session.close();  \r\n    \t      \r\n    \t    System.out.println(&quot;successfully saved&quot;);  \r\n    \t\t\r\n    \r\n    \t}\r\n    \r\n    \t}\r\n\r\nThe Employee object is created in the table but not the Employee dept objects. What settings do I need to change?\r\n\r\nI get a new error after adding `@OneToMany(mappedBy=&quot;emp1000&quot;, cascade = CascadeType.ALL)`:\r\n\r\n    Feb 25, 2015 8:43:43 AM org.hibernate.util.JDBCExceptionReporter logExceptions\r\n    SEVERE: Field &#39;id&#39; doesn&#39;t have a default value\r\n    Exception in thread &quot;main&quot; org.hibernate.exception.GenericJDBCException: could not insert: [model.EmpDept]\r\n    \tat org.hibernate.exception.SQLStateConverter.handledNonSpecificException(SQLStateConverter.java:103)\r\n    \tat org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:91)","title":"Hibernate child object not saving","body":"<p>I have a Employee and Employee Dept table. One employee can have multiple departments.</p>\n<p>I have defined the tables in MySQL and generated the entities using JPA.</p>\n<pre><code>package model;\n\nimport java.io.Serializable;\nimport javax.persistence.*;\nimport java.util.List;\n\n/**\n * The persistent class for the emp1000 database table.\n * \n */\n@Entity\n@NamedQuery(name=&quot;Emp1000.findAll&quot;, query=&quot;SELECT e FROM Emp1000 e&quot;)\npublic class Emp1000 implements Serializable {\n    private static final long serialVersionUID = 1L;\n\n    @Id\n    @GeneratedValue(strategy=GenerationType.IDENTITY)\n    private int id;\n\n    private String firstName;\n\n    private String lastName;\n\n    //bi-directional many-to-one association to EmpDept\n    @OneToMany(mappedBy=&quot;emp1000&quot;)\n    private List&lt;EmpDept&gt; empDepts;\n\n    public Emp1000() {\n    }\n\n    public int getId() {\n        return this.id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public String getFirstName() {\n        return this.firstName;\n    }\n\n    public void setFirstName(String firstName) {\n        this.firstName = firstName;\n    }\n\n    public String getLastName() {\n        return this.lastName;\n    }\n\n    public void setLastName(String lastName) {\n        this.lastName = lastName;\n    }\n\n    public List&lt;EmpDept&gt; getEmpDepts() {\n        return this.empDepts;\n    }\n\n    public void setEmpDepts(List&lt;EmpDept&gt; empDepts) {\n        this.empDepts = empDepts;\n    }\n\n    public EmpDept addEmpDept(EmpDept empDept) {\n        getEmpDepts().add(empDept);\n        empDept.setEmp1000(this);\n\n        return empDept;\n    }\n\n    public EmpDept removeEmpDept(EmpDept empDept) {\n        getEmpDepts().remove(empDept);\n        empDept.setEmp1000(null);\n\n        return empDept;\n    }\n\n}\n\n\n\n@Entity\n@Table(name=&quot;emp_dept&quot;)\n@NamedQuery(name=&quot;EmpDept.findAll&quot;, query=&quot;SELECT e FROM EmpDept e&quot;)\npublic class EmpDept implements Serializable {\n    private static final long serialVersionUID = 1L;\n\n    @Id\n    @GeneratedValue(strategy=GenerationType.IDENTITY)\n    private int id;\n\n    @Column(name=&quot;emp_dept&quot;)\n    private String empDept;\n\n    //bi-directional many-to-one association to Emp1000\n    @ManyToOne\n    @JoinColumn(name=&quot;emp_id&quot;)\n    private Emp1000 emp1000;\n\n    public EmpDept() {\n    }\n\n    public int getId() {\n        return this.id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public String getEmpDept() {\n        return this.empDept;\n    }\n\n    public void setEmpDept(String empDept) {\n        this.empDept = empDept;\n    }\n\n    public Emp1000 getEmp1000() {\n        return this.emp1000;\n    }\n\n    public void setEmp1000(Emp1000 emp1000) {\n        this.emp1000 = emp1000;\n    }\n\n}\n</code></pre>\n<p>When I try to generate to create a Employee object and associated dept objects and save it to database, the child table never gets saved.</p>\n<pre><code>public class StoreData {\n    public static void main(String[] args) {\n        Session session=new AnnotationConfiguration()  \n        .configure().buildSessionFactory().openSession();  \n          \n        //creating transaction object  \n        Transaction t=session.beginTransaction();  \n        \n        \n        Emp1000 e1 = new Emp1000();\n        e1.setFirstName(&quot;Prem&quot;);\n        e1.setLastName(&quot;Anand&quot;);\n        \n        EmpDept d1 = new EmpDept();\n        d1.setEmpDept(&quot;Maths&quot;);\n        d1.setEmp1000(e1);\n        \n        EmpDept d2 = new EmpDept();\n        d1.setEmpDept(&quot;Science&quot;);\n        d1.setEmp1000(e1);\n        \n        ArrayList&lt;EmpDept&gt; deptlist = new ArrayList();\n        deptlist.add(d1);\n        deptlist.add(d2);\n        \n        \n        e1.setEmpDepts(deptlist);\n        \n        //session.saveOrUpdate(e1);\n        \n        session.persist(e1);//persisting the object  \n        \n          \n        t.commit();//transaction is committed  \n        \n        session.close();  \n          \n        System.out.println(&quot;successfully saved&quot;);  \n        \n\n    }\n\n    }\n</code></pre>\n<p>The Employee object is created in the table but not the Employee dept objects. What settings do I need to change?</p>\n<p>I get a new error after adding <code>@OneToMany(mappedBy=&quot;emp1000&quot;, cascade = CascadeType.ALL)</code>:</p>\n<pre><code>Feb 25, 2015 8:43:43 AM org.hibernate.util.JDBCExceptionReporter logExceptions\nSEVERE: Field 'id' doesn't have a default value\nException in thread &quot;main&quot; org.hibernate.exception.GenericJDBCException: could not insert: [model.EmpDept]\n    at org.hibernate.exception.SQLStateConverter.handledNonSpecificException(SQLStateConverter.java:103)\n    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:91)\n</code></pre>\n"},{"tags":["java","jakarta-ee","jndi"],"comments":[{"owner":{"account_id":55621,"reputation":8047,"user_id":166611,"accept_rate":75,"display_name":"JuanZe"},"score":0,"creation_date":1254835014,"post_id":1525385,"comment_id":1380623,"body_markdown":"If you are new to J2EE check the JNDI section on http://java.sun.com/docs/books/tutorial/","body":"If you are new to J2EE check the JNDI section on <a href=\"http://java.sun.com/docs/books/tutorial/\" rel=\"nofollow noreferrer\">java.sun.com/docs/books/tutorial</a>"},{"owner":{"account_id":203256,"reputation":7026,"user_id":450812,"accept_rate":83,"display_name":"alfonx"},"score":0,"creation_date":1369862645,"post_id":1525385,"comment_id":24255323,"body_markdown":"In my has it was a stupid &lt;session-factory name=&quot;&quot;&gt; , see http://stackoverflow.com/questions/6293052/hibernate-javax-naming-noinitialcontextexception-component-mapping-via-annotat","body":"In my has it was a stupid &lt;session-factory name=&quot;&quot;&gt; , see <a href=\"http://stackoverflow.com/questions/6293052/hibernate-javax-naming-noinitialcontextexception-component-mapping-via-annotat\" title=\"hibernate javax naming noinitialcontextexception component mapping via annotat\">stackoverflow.com/questions/6293052/&hellip;</a>"},{"owner":{"account_id":4812242,"reputation":55062,"user_id":3885376,"accept_rate":64,"display_name":"ROMANIA_engineer"},"score":1,"creation_date":1448025887,"post_id":1525385,"comment_id":55420495,"body_markdown":"https://docs.oracle.com/javase/tutorial/jndi/ops/faq.html#1","body":"<a href=\"https://docs.oracle.com/javase/tutorial/jndi/ops/faq.html#1\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/jndi/ops/faq.html#1</a>"}],"answers":[{"comments":[{"owner":{"account_id":32896,"reputation":17696,"user_id":91607,"accept_rate":68,"display_name":"Attilah"},"score":0,"creation_date":1254834727,"post_id":1525465,"comment_id":1380591,"body_markdown":"thx for the pointer, how can I solve it ? I&#39;m new to this J2EE stuff.","body":"thx for the pointer, how can I solve it ? I&#39;m new to this J2EE stuff."},{"owner":{"account_id":55621,"reputation":8047,"user_id":166611,"accept_rate":75,"display_name":"JuanZe"},"score":0,"creation_date":1254835392,"post_id":1525465,"comment_id":1380669,"body_markdown":"Is not a question for a quick answer. Depends on your application server stuff. I suggest you check the documentation for the app server you are using and try to run a Hello World EJB app on your plataform to get deeper understanding of the topic.","body":"Is not a question for a quick answer. Depends on your application server stuff. I suggest you check the documentation for the app server you are using and try to run a Hello World EJB app on your plataform to get deeper understanding of the topic."}],"tags":[],"owner":{"account_id":55621,"reputation":8047,"user_id":166611,"accept_rate":75,"display_name":"JuanZe"},"comment_count":2,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1552399295,"creation_date":1254834408,"answer_id":1525465,"question_id":1525385,"body_markdown":"Is a JNDI problem. You will see that exception if the `InitialContext` class has neither default properties for the JNDI service provider nor explicitly configured server properties.\r\n\r\nSet the `Context.INITIAL_CONTEXT_FACTORY` environment property to the class name of the initial context implementation that you are using. This class must be available to your program in the classpath.\r\n\r\nCheck:\r\n\r\n* [http://docs.oracle.com/javase/7/docs/api/javax/naming/InitialContext.html][1]\r\n\r\n* [http://java.sun.com/products/jndi/tutorial/getStarted/TOC.html][2]  (runtime problems)\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/javax/naming/InitialContext.html\r\n  [2]: http://java.sun.com/products/jndi/tutorial/getStarted/TOC.html","title":"The meaning of NoInitialContextException error","body":"<p>Is a JNDI problem. You will see that exception if the <code>InitialContext</code> class has neither default properties for the JNDI service provider nor explicitly configured server properties.</p>\n\n<p>Set the <code>Context.INITIAL_CONTEXT_FACTORY</code> environment property to the class name of the initial context implementation that you are using. This class must be available to your program in the classpath.</p>\n\n<p>Check:</p>\n\n<ul>\n<li><p><a href=\"http://docs.oracle.com/javase/7/docs/api/javax/naming/InitialContext.html\" rel=\"nofollow noreferrer\">http://docs.oracle.com/javase/7/docs/api/javax/naming/InitialContext.html</a></p></li>\n<li><p><a href=\"http://java.sun.com/products/jndi/tutorial/getStarted/TOC.html\" rel=\"nofollow noreferrer\">http://java.sun.com/products/jndi/tutorial/getStarted/TOC.html</a>  (runtime problems)</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":87016,"reputation":68348,"user_id":241590,"accept_rate":99,"display_name":"stacker"},"comment_count":0,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1552399806,"creation_date":1262276994,"answer_id":1986022,"question_id":1525385,"body_markdown":"you need to put the following name/value pairs into a hash table and call this constructor:\r\n\r\n    public InitialContext(Hashtable&lt;?,?&gt; environment)\r\n\r\nthe exact values depend on your application server, this example is for jboss\r\n\r\n    jndi.java.naming.provider.url=jnp://localhost:1099/\r\n    jndi.java.naming.factory.url=org.jboss.naming:org.jnp.interfaces\r\n    jndi.java.naming.factory.initial=org.jnp.interfaces.NamingContextFactory","title":"The meaning of NoInitialContextException error","body":"<p>you need to put the following name/value pairs into a hash table and call this constructor:</p>\n\n<pre><code>public InitialContext(Hashtable&lt;?,?&gt; environment)\n</code></pre>\n\n<p>the exact values depend on your application server, this example is for jboss</p>\n\n<pre><code>jndi.java.naming.provider.url=jnp://localhost:1099/\njndi.java.naming.factory.url=org.jboss.naming:org.jnp.interfaces\njndi.java.naming.factory.initial=org.jnp.interfaces.NamingContextFactory\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11089,"reputation":400050,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"comment_count":0,"down_vote_count":0,"up_vote_count":38,"is_accepted":false,"score":38,"last_activity_date":1262367219,"creation_date":1262367219,"answer_id":1989115,"question_id":1525385,"body_markdown":"The `javax.naming` package comprises the JNDI API. Since it&#39;s just an API, rather than an implementation, you need to tell it which implementation of JNDI to use. The implementations are typically specific to the server you&#39;re trying to talk to.\r\n\r\nTo specify an implementation, you pass in a `Properties` object when you construct the `InitialContext`. These properties specify the implementation to use, as well as the location of the server. The default `InitialContext` constructor is only useful when there are system properties present, but the properties are the same as if you passed them in manually.\r\n\r\nAs to which properties you need to set, that depends on your server. You need to hunt those settings down and plug them in.","title":"The meaning of NoInitialContextException error","body":"<p>The <code>javax.naming</code> package comprises the JNDI API. Since it's just an API, rather than an implementation, you need to tell it which implementation of JNDI to use. The implementations are typically specific to the server you're trying to talk to.</p>\n\n<p>To specify an implementation, you pass in a <code>Properties</code> object when you construct the <code>InitialContext</code>. These properties specify the implementation to use, as well as the location of the server. The default <code>InitialContext</code> constructor is only useful when there are system properties present, but the properties are the same as if you passed them in manually.</p>\n\n<p>As to which properties you need to set, that depends on your server. You need to hunt those settings down and plug them in.</p>\n"},{"tags":[],"owner":{"account_id":181683,"reputation":442,"user_id":415848,"display_name":"Maarten van Leunen"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1281540492,"creation_date":1281540492,"answer_id":3460025,"question_id":1525385,"body_markdown":"Most of the time these settings are also defined in a `jndi.properties` file. Do you have that one lying around somewhere?\r\n","title":"The meaning of NoInitialContextException error","body":"<p>Most of the time these settings are also defined in a <code>jndi.properties</code> file. Do you have that one lying around somewhere?</p>\n"},{"tags":[],"owner":{"account_id":938881,"reputation":14223,"user_id":967330,"accept_rate":90,"display_name":"Thom"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1319737645,"creation_date":1319737645,"answer_id":7920105,"question_id":1525385,"body_markdown":"My problem with this one was that I was creating a hibernate session, but had the JNDI settings for my database instance wrong because of a classpath problem. Just FYI...","title":"The meaning of NoInitialContextException error","body":"<p>My problem with this one was that I was creating a hibernate session, but had the JNDI settings for my database instance wrong because of a classpath problem. Just FYI...</p>\n"},{"tags":[],"owner":{"account_id":1752346,"reputation":166,"user_id":1601150,"display_name":"Neocy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1375380094,"creation_date":1375380094,"answer_id":18001311,"question_id":1525385,"body_markdown":"make sure dependencies for jetty naming and jetty plus are included (not just provided scope). \r\nThis fixed it for me.","title":"The meaning of NoInitialContextException error","body":"<p>make sure dependencies for jetty naming and jetty plus are included (not just provided scope). \nThis fixed it for me.</p>\n"},{"tags":[],"owner":{"account_id":1372640,"reputation":892,"user_id":1307273,"accept_rate":47,"display_name":"nichu09"},"comment_count":0,"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1448025702,"creation_date":1384760296,"answer_id":20042444,"question_id":1525385,"body_markdown":"You should set jndi.properties. I&#39;ve given below some piece of code that explain how the properties are set for activemq. Like that you can set for your application. Inside a J2EE container like JBoss no need to set these properties.\r\n\r\n    Properties props = new Properties();\r\n\tprops.setProperty(Context.INITIAL_CONTEXT_FACTORY,&quot;org.apache.activemq.jndi.ActiveMQInitialContextFactory&quot;);\r\n\tprops.setProperty(Context.PROVIDER_URL,&quot;tcp://localhost:61616&quot;);\r\n\tInitialContext ctx = new InitialContext(props);\r\n\t// get the initial context\r\n\t// InitialContext ctx = new InitialContext();\r\n\tQueueConnectionFactory connFactory = (QueueConnectionFactory) ctx.lookup(&quot;ConnectionFactory&quot;);        \r\n\t// create a queue connection\r\n\tQueueConnection queueConn = connFactory.createQueueConnection();   \r\n\tqueueConn.start();\r\n\t// lookup the queue object\r\n\tQueue queue = (Queue) ctx.lookup(&quot;dynamicQueues/Payment_Check&quot;);  \r\n\r\nI know this is a late answer, but just giving for future reference.","title":"The meaning of NoInitialContextException error","body":"<p>You should set jndi.properties. I've given below some piece of code that explain how the properties are set for activemq. Like that you can set for your application. Inside a J2EE container like JBoss no need to set these properties.</p>\n\n<pre><code>Properties props = new Properties();\nprops.setProperty(Context.INITIAL_CONTEXT_FACTORY,\"org.apache.activemq.jndi.ActiveMQInitialContextFactory\");\nprops.setProperty(Context.PROVIDER_URL,\"tcp://localhost:61616\");\nInitialContext ctx = new InitialContext(props);\n// get the initial context\n// InitialContext ctx = new InitialContext();\nQueueConnectionFactory connFactory = (QueueConnectionFactory) ctx.lookup(\"ConnectionFactory\");        \n// create a queue connection\nQueueConnection queueConn = connFactory.createQueueConnection();   \nqueueConn.start();\n// lookup the queue object\nQueue queue = (Queue) ctx.lookup(\"dynamicQueues/Payment_Check\");  \n</code></pre>\n\n<p>I know this is a late answer, but just giving for future reference.</p>\n"},{"comments":[{"owner":{"account_id":14546090,"reputation":1702,"user_id":10506301,"display_name":"Daredevil"},"score":0,"creation_date":1556785811,"post_id":23389636,"comment_id":98549524,"body_markdown":"I know this is old but where do i get these jar files","body":"I know this is old but where do i get these jar files"},{"owner":{"account_id":4404758,"reputation":527,"user_id":3589481,"display_name":"Yannickv"},"score":0,"creation_date":1556918193,"post_id":23389636,"comment_id":98604895,"body_markdown":"They should be in the Glassfish installation folder, inside lib.","body":"They should be in the Glassfish installation folder, inside lib."}],"tags":[],"owner":{"account_id":4404758,"reputation":527,"user_id":3589481,"display_name":"Yannickv"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1398866110,"creation_date":1398864977,"answer_id":23389636,"question_id":1525385,"body_markdown":"I solved the same problem by adding the following Jar libraries to my project:\r\n\r\n - appserv-rt.jar\r\n - javaee.jar\r\n\r\nfrom the folder : `C:\\Program Files\\glassfish-4.0\\glassfish\\lib`\r\n\r\nThe links to these libraries were broken and Netbeans didn&#39;t found the right classes to use.","title":"The meaning of NoInitialContextException error","body":"<p>I solved the same problem by adding the following Jar libraries to my project:</p>\n\n<ul>\n<li>appserv-rt.jar</li>\n<li>javaee.jar</li>\n</ul>\n\n<p>from the folder : <code>C:\\Program Files\\glassfish-4.0\\glassfish\\lib</code></p>\n\n<p>The links to these libraries were broken and Netbeans didn't found the right classes to use.</p>\n"},{"tags":[],"owner":{"account_id":3741904,"reputation":2009,"user_id":3128652,"display_name":"Vaibhav Jain"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1439287588,"creation_date":1439287588,"answer_id":31938848,"question_id":1525385,"body_markdown":"Easy &amp; configurable solution is create one jndi.properties file and put this file in classpath.\r\njndi.properties can be created as\r\n\r\n    java.naming.factory.initial = org.apache.activemq.jndi.ActiveMQInitialContextFactory\r\n     \r\n    # use the following property to configure the default connector\r\n    java.naming.provider.url = vm://localhost\r\n     \r\n    # use the following property to specify the JNDI name the connection factory\r\n    # should appear as. \r\n    #connectionFactoryNames = connectionFactory, queueConnectionFactory, topicConnectionFactry\r\n     \r\n    # register some queues in JNDI using the form\r\n    # queue.[jndiName] = [physicalName]\r\n    queue.MyQueue = example.MyQueue\r\n     \r\n     \r\n    # register some topics in JNDI using the form\r\n    # topic.[jndiName] = [physicalName]\r\n    topic.MyTopic = example.MyTopic\r\n\r\nJust specify your naming factory &amp; url and put this file in your classpath. JMS will fetch required info by itself and it&#39;s easily configurable in future also.","title":"The meaning of NoInitialContextException error","body":"<p>Easy &amp; configurable solution is create one jndi.properties file and put this file in classpath.\njndi.properties can be created as</p>\n\n<pre><code>java.naming.factory.initial = org.apache.activemq.jndi.ActiveMQInitialContextFactory\n\n# use the following property to configure the default connector\njava.naming.provider.url = vm://localhost\n\n# use the following property to specify the JNDI name the connection factory\n# should appear as. \n#connectionFactoryNames = connectionFactory, queueConnectionFactory, topicConnectionFactry\n\n# register some queues in JNDI using the form\n# queue.[jndiName] = [physicalName]\nqueue.MyQueue = example.MyQueue\n\n\n# register some topics in JNDI using the form\n# topic.[jndiName] = [physicalName]\ntopic.MyTopic = example.MyTopic\n</code></pre>\n\n<p>Just specify your naming factory &amp; url and put this file in your classpath. JMS will fetch required info by itself and it's easily configurable in future also.</p>\n"},{"tags":[],"owner":{"account_id":543631,"reputation":10094,"user_id":912829,"accept_rate":53,"display_name":"ACV"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1448366600,"creation_date":1442242881,"answer_id":32568038,"question_id":1525385,"body_markdown":"Do this:\r\n\r\n    Properties props = new Properties();\r\n    props.setProperty(Context.INITIAL_CONTEXT_FACTORY, &quot;com.sun.enterprise.naming.SerialInitContextFactory&quot;);\r\n    Context initialContext = new InitialContext(props);\r\n\r\nAlso add this to the libraries of the project:\r\n\r\n`C:\\installs\\glassfish\\glassfish-4.1\\glassfish\\lib\\gf-client.jar`\r\nadjust path accordingly","title":"The meaning of NoInitialContextException error","body":"<p>Do this:</p>\n\n<pre><code>Properties props = new Properties();\nprops.setProperty(Context.INITIAL_CONTEXT_FACTORY, \"com.sun.enterprise.naming.SerialInitContextFactory\");\nContext initialContext = new InitialContext(props);\n</code></pre>\n\n<p>Also add this to the libraries of the project:</p>\n\n<p><code>C:\\installs\\glassfish\\glassfish-4.1\\glassfish\\lib\\gf-client.jar</code>\nadjust path accordingly</p>\n"},{"comments":[{"owner":{"account_id":11061465,"reputation":3057,"user_id":8149916,"display_name":"Adindu Stevens"},"score":1,"creation_date":1566484904,"post_id":37041131,"comment_id":101678982,"body_markdown":"In spring boot 2 the package org.springframework.boot.web.embedded.tomcat.TomcatEmbeddedServletWebServerFactory has been replaced by org.springframework.boot.web.embedded.tomcat.ConfigurableTomcatWebServerFactory how do i implement with the new interface?","body":"In spring boot 2 the package org.springframework.boot.web.embedded.tomcat.TomcatEmbeddedS&zwnj;&#8203;ervletWebServerFacto&zwnj;&#8203;ry has been replaced by org.springframework.boot.web.embedded.tomcat.ConfigurableTom&zwnj;&#8203;catWebServerFactory how do i implement with the new interface?"},{"owner":{"account_id":410277,"reputation":24594,"user_id":782034,"accept_rate":72,"display_name":"Nick Grealy"},"score":0,"creation_date":1566523205,"post_id":37041131,"comment_id":101692082,"body_markdown":"@AdinduStevens - no idea. I provided this solution 3 years ago, and haven&#39;t touched Spring since. You&#39;ll have to do your own research.","body":"@AdinduStevens - no idea. I provided this solution 3 years ago, and haven&#39;t touched Spring since. You&#39;ll have to do your own research."},{"owner":{"account_id":1099760,"reputation":7046,"user_id":1092450,"accept_rate":74,"display_name":"itro"},"score":0,"creation_date":1587544301,"post_id":37041131,"comment_id":108549574,"body_markdown":"@Adindu Stevens\nI face the same problem with spring boot 2, did you find any solution for it?","body":"@Adindu Stevens I face the same problem with spring boot 2, did you find any solution for it?"},{"owner":{"account_id":4343429,"reputation":859,"user_id":3546107,"display_name":"Delirante"},"score":0,"creation_date":1609843956,"post_id":37041131,"comment_id":115942553,"body_markdown":"@itro try this https://stackoverflow.com/questions/24941829/how-to-create-jndi-context-in-spring-boot-with-embedded-tomcat-container/53457808#53457808","body":"@itro try this <a href=\"https://stackoverflow.com/questions/24941829/how-to-create-jndi-context-in-spring-boot-with-embedded-tomcat-container/53457808#53457808\" title=\"how to create jndi context in spring boot with embedded tomcat container\">stackoverflow.com/questions/24941829/&hellip;</a>"}],"tags":[],"owner":{"account_id":410277,"reputation":24594,"user_id":782034,"accept_rate":72,"display_name":"Nick Grealy"},"comment_count":4,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1462413861,"creation_date":1462413861,"answer_id":37041131,"question_id":1525385,"body_markdown":"Specifically, I got this issue when attempting to retrieve the default (no-args) `InitialContext` within an embedded Tomcat7 instance, in SpringBoot.\r\n\r\nThe solution for me, was to tell Tomcat to `enableNaming`.\r\n\r\ni.e.\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    @Bean\r\n    public TomcatEmbeddedServletContainerFactory tomcatFactory() {\r\n        return new TomcatEmbeddedServletContainerFactory() {\r\n            @Override\r\n            protected TomcatEmbeddedServletContainer getTomcatEmbeddedServletContainer(\r\n                    Tomcat tomcat) {\r\n                tomcat.enableNaming();\r\n                return super.getTomcatEmbeddedServletContainer(tomcat);\r\n            }\r\n        };\r\n    }","title":"The meaning of NoInitialContextException error","body":"<p>Specifically, I got this issue when attempting to retrieve the default (no-args) <code>InitialContext</code> within an embedded Tomcat7 instance, in SpringBoot.</p>\n\n<p>The solution for me, was to tell Tomcat to <code>enableNaming</code>.</p>\n\n<p>i.e.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic TomcatEmbeddedServletContainerFactory tomcatFactory() {\n    return new TomcatEmbeddedServletContainerFactory() {\n        @Override\n        protected TomcatEmbeddedServletContainer getTomcatEmbeddedServletContainer(\n                Tomcat tomcat) {\n            tomcat.enableNaming();\n            return super.getTomcatEmbeddedServletContainer(tomcat);\n        }\n    };\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8929263,"reputation":4088,"user_id":6662421,"accept_rate":85,"display_name":"Sangram Badi"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1473246018,"creation_date":1473246018,"answer_id":39368104,"question_id":1525385,"body_markdown":"you need to use jboss-client.jar in your client project and you need to use jnp-client jar in your ejb project","title":"The meaning of NoInitialContextException error","body":"<p>you need to use jboss-client.jar in your client project and you need to use jnp-client jar in your ejb project</p>\n"},{"comments":[{"owner":{"account_id":10491815,"reputation":26310,"user_id":7733418,"display_name":"Yunnosch"},"score":1,"creation_date":1656396210,"post_id":72781368,"comment_id":128554821,"body_markdown":"If you are unsure about the solution you propose for experiemnt then please phrase this as an explained conditional answer, in order to avoid the impression of asking a clarification question instead of answering (for which a comment should be used instead of an answer, compare https://meta.stackexchange.com/questions/214173/why-do-i-need-50-reputation-to-comment-what-can-i-do-instead ). For example like &quot;If your problem is ... then the solution is to .... because .... .&quot;","body":"If you are unsure about the solution you propose for experiemnt then please phrase this as an explained conditional answer, in order to avoid the impression of asking a clarification question instead of answering (for which a comment should be used instead of an answer, compare <a href=\"https://meta.stackexchange.com/questions/214173/why-do-i-need-50-reputation-to-comment-what-can-i-do-instead\" title=\"why do i need 50 reputation to comment what can i do instead\">meta.stackexchange.com/questions/214173/&hellip;</a> ). For example like &quot;If your problem is ... then the solution is to .... because .... .&quot;"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1656418289,"post_id":72781368,"comment_id":128562681,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/72781368/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":25667243,"reputation":1,"user_id":19431995,"display_name":"Kratika Agrawal"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656395787,"creation_date":1656395787,"answer_id":72781368,"question_id":1525385,"body_markdown":"Try adding rmi java modules in you runtime environment :\r\n--add-modules jdk.naming.rmi,java.base","title":"The meaning of NoInitialContextException error","body":"<p>Try adding rmi java modules in you runtime environment :\n--add-modules jdk.naming.rmi,java.base</p>\n"}],"owner":{"account_id":32896,"reputation":17696,"user_id":91607,"accept_rate":68,"display_name":"Attilah"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":260645,"favorite_count":0,"down_vote_count":0,"up_vote_count":83,"answer_count":13,"score":83,"last_activity_date":1688673441,"creation_date":1254833423,"question_id":1525385,"body_markdown":"I am writing a client for my EJB and when trying to execute it, I get the following exception :\r\n\r\n&gt; `javax.naming.NoInitialContextException`: Need to specify class name\r\n&gt; in environment or system property, or as an applet parameter, or in an\r\n&gt; application resource file.\r\n\r\nI just can&#39;t understand what the problem is.","title":"The meaning of NoInitialContextException error","body":"<p>I am writing a client for my EJB and when trying to execute it, I get the following exception :</p>\n\n<blockquote>\n  <p><code>javax.naming.NoInitialContextException</code>: Need to specify class name\n  in environment or system property, or as an applet parameter, or in an\n  application resource file.</p>\n</blockquote>\n\n<p>I just can't understand what the problem is.</p>\n"},{"tags":["java","security","dns","enumeration"],"comments":[{"owner":{"account_id":2522425,"reputation":577,"user_id":2192527,"accept_rate":61,"display_name":"Dave"},"score":0,"creation_date":1688665809,"post_id":76628656,"comment_id":135107860,"body_markdown":"What type of errors did it give?","body":"What type of errors did it give?"}],"owner":{"account_id":19589548,"reputation":3,"user_id":14336877,"display_name":"Amadeus"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1688673440,"creation_date":1688645197,"question_id":76628656,"body_markdown":"How can I find the subdomains of a specific domain without brute force using java.\r\n\r\nI used the WhoisClient in my code but It gave me errors.\r\n\r\n\r\n```java\r\npublic static List&lt;String&gt; enumerateSubdomains(String domain) {\r\n    List&lt;String&gt; subdomains = new ArrayList&lt;&gt;();\r\n\r\n    try {\r\n        WhoisClient whoisClient = new WhoisClient();\r\n        whoisClient.setDefaultTimeout(100000);\r\n        whoisClient.connect(WhoisClient.DEFAULT_HOST);\r\n\r\n        String whoisData = whoisClient.query(&quot;=&quot; + domain);\r\n        whoisClient.disconnect();\r\n\r\n        Pattern pattern = Pattern.compile(&quot;Domain Name: (.+?)\\\\.&quot;);\r\n        Matcher matcher = pattern.matcher(whoisData);\r\n\r\n        while (matcher.find()) {\r\n            subdomains.add(matcher.group(1));\r\n        }\r\n    } catch (IOException e) {\r\n        e.printStackTrace();\r\n    }\r\n\r\n    return subdomains;\r\n}\r\n```\r\n","title":"How Can I find the subdomains of a specific domain or ip address In Java?","body":"<p>How can I find the subdomains of a specific domain without brute force using java.</p>\n<p>I used the WhoisClient in my code but It gave me errors.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static List&lt;String&gt; enumerateSubdomains(String domain) {\n    List&lt;String&gt; subdomains = new ArrayList&lt;&gt;();\n\n    try {\n        WhoisClient whoisClient = new WhoisClient();\n        whoisClient.setDefaultTimeout(100000);\n        whoisClient.connect(WhoisClient.DEFAULT_HOST);\n\n        String whoisData = whoisClient.query(&quot;=&quot; + domain);\n        whoisClient.disconnect();\n\n        Pattern pattern = Pattern.compile(&quot;Domain Name: (.+?)\\\\.&quot;);\n        Matcher matcher = pattern.matcher(whoisData);\n\n        while (matcher.find()) {\n            subdomains.add(matcher.group(1));\n        }\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n\n    return subdomains;\n}\n</code></pre>\n"},{"tags":["java","project-reactor"],"answers":[{"comments":[{"owner":{"account_id":2065621,"reputation":3902,"user_id":1841181,"accept_rate":54,"display_name":"xploreraj"},"score":0,"creation_date":1688633453,"post_id":76626520,"comment_id":135100833,"body_markdown":"Thank you for the useful information. I want to however fire the logic inside Mono.defer() - a web resource GET call, (a) after a fixed delay of 500 ms for every repeat (b) until it returns desirable response for (c) a maximum of 4 repeats.","body":"Thank you for the useful information. I want to however fire the logic inside Mono.defer() - a web resource GET call, (a) after a fixed delay of 500 ms for every repeat (b) until it returns desirable response for (c) a maximum of 4 repeats."},{"owner":{"account_id":2065621,"reputation":3902,"user_id":1841181,"accept_rate":54,"display_name":"xploreraj"},"score":0,"creation_date":1688634996,"post_id":76626520,"comment_id":135101191,"body_markdown":"I have edited the question to make it more obvious.","body":"I have edited the question to make it more obvious."},{"owner":{"account_id":3168631,"reputation":3561,"user_id":2678097,"display_name":"amanin"},"score":1,"creation_date":1688639913,"post_id":76626520,"comment_id":135102271,"body_markdown":"Ok, I better understand. I think you require `retryWhen`. I&#39;ll try to edit my response when I have some time.","body":"Ok, I better understand. I think you require <code>retryWhen</code>. I&#39;ll try to edit my response when I have some time."},{"owner":{"account_id":2065621,"reputation":3902,"user_id":1841181,"accept_rate":54,"display_name":"xploreraj"},"score":0,"creation_date":1688905143,"post_id":76626520,"comment_id":135134226,"body_markdown":"Hi Amanin, did you get a chance to check and help me. Once again, the intention is to hit the external api repeatedly after specific interval for max N count until favourable response is received and then just continue on the current thread with other operations.","body":"Hi Amanin, did you get a chance to check and help me. Once again, the intention is to hit the external api repeatedly after specific interval for max N count until favourable response is received and then just continue on the current thread with other operations."},{"owner":{"account_id":3168631,"reputation":3561,"user_id":2678097,"display_name":"amanin"},"score":0,"creation_date":1688973693,"post_id":76626520,"comment_id":135141433,"body_markdown":"@xploreraj I have already edited my respsonse a few days ago. But I haven&#39;t thought of notifying you, sorry. Can you check my answer again ?","body":"@xploreraj I have already edited my respsonse a few days ago. But I haven&#39;t thought of notifying you, sorry. Can you check my answer again ?"},{"owner":{"account_id":2065621,"reputation":3902,"user_id":1841181,"accept_rate":54,"display_name":"xploreraj"},"score":0,"creation_date":1689058995,"post_id":76626520,"comment_id":135155490,"body_markdown":"Thank you @amanin. I missed seeing your edit. I new retry was working on error signal, but I thought if I could achieve it with repeat, then it will be lesser code. I will try your solution.","body":"Thank you @amanin. I missed seeing your edit. I new retry was working on error signal, but I thought if I could achieve it with repeat, then it will be lesser code. I will try your solution."}],"tags":[],"owner":{"account_id":3168631,"reputation":3561,"user_id":2678097,"display_name":"amanin"},"comment_count":6,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1688673399,"creation_date":1688629074,"answer_id":76626520,"question_id":76626438,"body_markdown":"`repeat(int n)` runs the flux n number of times. But in your case, you&#39;ve used `repeatWhen` before that, and it produces an infinite flux. That&#39;s why your flux does not ends anymore.\r\n\r\n\r\nIf you want to retry subscription until you receive the right value, you can use [retryWhen](https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Mono.html#retryWhen-reactor.util.retry.Retry-) function. It takes a retry configuration as input, to limit the number of retries, specifies delays between retrys, etc. In your case, you can:\r\n\r\n1. Fail the stream if you do not receive the right value\r\n2. Append a *retryWhen* operation to retry subscription.\r\n\r\nLet&#39;s illustrate it with an example:\r\n\r\n```java\r\nimport reactor.core.publisher.Mono;\r\nimport reactor.util.retry.Retry;\r\n\r\nimport java.time.Duration;\r\nimport java.util.concurrent.atomic.AtomicInteger;\r\n\r\nimport static java.lang.System.nanoTime;\r\n\r\npublic class RetryWhen {\r\n\r\n    /**\r\n     * Emit a decreased value on each subscription\r\n     * @param initial First value to emit\r\n     */\r\n    static Mono&lt;Integer&gt; countdown(int initial) {\r\n        var current = new AtomicInteger(initial);\r\n        var t0 = nanoTime();\r\n        return Mono.fromCallable(() -&gt; current.getAndDecrement())\r\n                .doOnNext(i -&gt; System.out.printf(\r\n                        &quot;Emit %d at %d ms%n&quot;,\r\n                        i, (int)((nanoTime() - t0) * 1e-6)\r\n                ));\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        var source = countdown(4);\r\n        // raise an error if value is different than one.\r\n        var oneOrError = source.filter(i -&gt; i == 1)\r\n                .switchIfEmpty(Mono.error(new RuntimeException(&quot;bad value&quot;)));\r\n\r\n        // Retry 4 times maximum. Each retry is spaced by ~ 500 ms\r\n        var retried = oneOrError.retryWhen(Retry.fixedDelay(4, Duration.ofMillis(500)));\r\n\r\n        var result = retried.block();\r\n        System.out.println(&quot;Result: &quot;+result);\r\n    }\r\n}\r\n```\r\n\r\nThe above program produces:\r\n\r\n```stdout\r\nEmit 4 at 173 ms\r\nEmit 3 at 696 ms\r\nEmit 2 at 1198 ms\r\nEmit 1 at 1699 ms\r\nResult: 1\r\n```\r\n\r\n*Notes* :\r\n\r\n- in your case, repeatWhen produces an infinite stream, because the function you passed to it never returns an empty publisher. It causes continuous subscription to your original mono (which returns &quot;2&quot;).\r\n- Also, as *repeatWhen* repeat values from the **source/caller**, your `.takeUntil(response -&gt; response.equals(&quot;1&quot;))` statement will never be matched (it will always receive &quot;2&quot;).","title":"Reactor based polling is not terminating","body":"<p><code>repeat(int n)</code> runs the flux n number of times. But in your case, you've used <code>repeatWhen</code> before that, and it produces an infinite flux. That's why your flux does not ends anymore.</p>\n<p>If you want to retry subscription until you receive the right value, you can use <a href=\"https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Mono.html#retryWhen-reactor.util.retry.Retry-\" rel=\"nofollow noreferrer\">retryWhen</a> function. It takes a retry configuration as input, to limit the number of retries, specifies delays between retrys, etc. In your case, you can:</p>\n<ol>\n<li>Fail the stream if you do not receive the right value</li>\n<li>Append a <em>retryWhen</em> operation to retry subscription.</li>\n</ol>\n<p>Let's illustrate it with an example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import reactor.core.publisher.Mono;\nimport reactor.util.retry.Retry;\n\nimport java.time.Duration;\nimport java.util.concurrent.atomic.AtomicInteger;\n\nimport static java.lang.System.nanoTime;\n\npublic class RetryWhen {\n\n    /**\n     * Emit a decreased value on each subscription\n     * @param initial First value to emit\n     */\n    static Mono&lt;Integer&gt; countdown(int initial) {\n        var current = new AtomicInteger(initial);\n        var t0 = nanoTime();\n        return Mono.fromCallable(() -&gt; current.getAndDecrement())\n                .doOnNext(i -&gt; System.out.printf(\n                        &quot;Emit %d at %d ms%n&quot;,\n                        i, (int)((nanoTime() - t0) * 1e-6)\n                ));\n    }\n\n    public static void main(String[] args) {\n        var source = countdown(4);\n        // raise an error if value is different than one.\n        var oneOrError = source.filter(i -&gt; i == 1)\n                .switchIfEmpty(Mono.error(new RuntimeException(&quot;bad value&quot;)));\n\n        // Retry 4 times maximum. Each retry is spaced by ~ 500 ms\n        var retried = oneOrError.retryWhen(Retry.fixedDelay(4, Duration.ofMillis(500)));\n\n        var result = retried.block();\n        System.out.println(&quot;Result: &quot;+result);\n    }\n}\n</code></pre>\n<p>The above program produces:</p>\n<pre><code>Emit 4 at 173 ms\nEmit 3 at 696 ms\nEmit 2 at 1198 ms\nEmit 1 at 1699 ms\nResult: 1\n</code></pre>\n<p><em>Notes</em> :</p>\n<ul>\n<li>in your case, repeatWhen produces an infinite stream, because the function you passed to it never returns an empty publisher. It causes continuous subscription to your original mono (which returns &quot;2&quot;).</li>\n<li>Also, as <em>repeatWhen</em> repeat values from the <strong>source/caller</strong>, your <code>.takeUntil(response -&gt; response.equals(&quot;1&quot;))</code> statement will never be matched (it will always receive &quot;2&quot;).</li>\n</ul>\n"}],"owner":{"account_id":2065621,"reputation":3902,"user_id":1841181,"accept_rate":54,"display_name":"xploreraj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1688673399,"creation_date":1688628473,"question_id":76626438,"body_markdown":"Intention is to poll a certain number of times until I receive a particular response. Here is the piece of code I have compiled:\r\n\r\n    Mono.defer(() -&gt; webClient.getResponse())\r\n            // repeat GET call after every 500 ms\r\n            .repeatWhen(repeat -&gt; repeat.delayElements(Duration.ofMillis(500)))\r\n            .repeat(4) // max repeat attempts\r\n            .takeUntil(response -&gt; response.equals(&quot;1&quot;))\r\n            //.retryWhen(Retry.max(3))\r\n            .log()\r\n            .subscribe(response -&gt; {\r\n                System.out.println(&quot;response received: &quot; + response);\r\n            });\r\n\r\nBut, there&#39;s a problem. It is not stopping at all. I was expecting it to run 4 times and exit.\r\n\r\n    12:54:54.527 [parallel-7] INFO  reactor.Flux.TakeUntil.1 - onNext(2)\r\n    response received: 2\r\n    12:54:55.034 [parallel-8] INFO  reactor.Flux.TakeUntil.1 - onNext(2)\r\n    response received: 2\r\n    12:54:55.540 [parallel-9] INFO  reactor.Flux.TakeUntil.1 - onNext(2)\r\n    response received: 2\r\n    12:54:56.045 [parallel-10] INFO  reactor.Flux.TakeUntil.1 - onNext(2)\r\n    response received: 2\r\n    12:54:56.551 [parallel-1] INFO  reactor.Flux.TakeUntil.1 - onNext(2)\r\n    response received: 2\r\n    12:54:57.057 [parallel-2] INFO  reactor.Flux.TakeUntil.1 - onNext(2)\r\n    response received: 2\r\n    12:54:57.563 [parallel-3] INFO  reactor.Flux.TakeUntil.1 - onNext(2)\r\n    response received: 2\r\n    .......","title":"Reactor based polling is not terminating","body":"<p>Intention is to poll a certain number of times until I receive a particular response. Here is the piece of code I have compiled:</p>\n<pre><code>Mono.defer(() -&gt; webClient.getResponse())\n        // repeat GET call after every 500 ms\n        .repeatWhen(repeat -&gt; repeat.delayElements(Duration.ofMillis(500)))\n        .repeat(4) // max repeat attempts\n        .takeUntil(response -&gt; response.equals(&quot;1&quot;))\n        //.retryWhen(Retry.max(3))\n        .log()\n        .subscribe(response -&gt; {\n            System.out.println(&quot;response received: &quot; + response);\n        });\n</code></pre>\n<p>But, there's a problem. It is not stopping at all. I was expecting it to run 4 times and exit.</p>\n<pre><code>12:54:54.527 [parallel-7] INFO  reactor.Flux.TakeUntil.1 - onNext(2)\nresponse received: 2\n12:54:55.034 [parallel-8] INFO  reactor.Flux.TakeUntil.1 - onNext(2)\nresponse received: 2\n12:54:55.540 [parallel-9] INFO  reactor.Flux.TakeUntil.1 - onNext(2)\nresponse received: 2\n12:54:56.045 [parallel-10] INFO  reactor.Flux.TakeUntil.1 - onNext(2)\nresponse received: 2\n12:54:56.551 [parallel-1] INFO  reactor.Flux.TakeUntil.1 - onNext(2)\nresponse received: 2\n12:54:57.057 [parallel-2] INFO  reactor.Flux.TakeUntil.1 - onNext(2)\nresponse received: 2\n12:54:57.563 [parallel-3] INFO  reactor.Flux.TakeUntil.1 - onNext(2)\nresponse received: 2\n.......\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-mvc"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1688625025,"post_id":76626013,"comment_id":135099120,"body_markdown":"Remove `@EnableWebMvc` (this disables large parts of the auto-configuration of SPring Boot) and your controller needs either a `@RestController` instead of `@Controller` or `@ResponseBody` on the methods as you aren&#39;t returning a model/view.","body":"Remove <code>@EnableWebMvc</code> (this disables large parts of the auto-configuration of SPring Boot) and your controller needs either a <code>@RestController</code> instead of <code>@Controller</code> or <code>@ResponseBody</code> on the methods as you aren&#39;t returning a model/view."},{"owner":{"account_id":17894866,"reputation":899,"user_id":13000512,"display_name":"Deba"},"score":0,"creation_date":1688631576,"post_id":76626013,"comment_id":135100405,"body_markdown":"@M.Deinum, Sir, I did as you suggested, still it is not working as I say after enabling `server.servlet.contextPath=/my-service`.","body":"@M.Deinum, Sir, I did as you suggested, still it is not working as I say after enabling <code>server.servlet.contextPath=&#47;my-service</code>."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1688633629,"post_id":76626013,"comment_id":135100870,"body_markdown":"If you put `my-service` as the context path that is the root so `/` is `/my-service/` and not `/` on your server. Everything you write here is for inside your context path.  You would need to configure tomcat to redirect always to `/my-service`.","body":"If you put <code>my-service</code> as the context path that is the root so <code>&#47;</code> is <code>&#47;my-service&#47;</code> and not <code>&#47;</code> on your server. Everything you write here is for inside your context path.  You would need to configure tomcat to redirect always to <code>&#47;my-service</code>."},{"owner":{"account_id":17894866,"reputation":899,"user_id":13000512,"display_name":"Deba"},"score":0,"creation_date":1688634586,"post_id":76626013,"comment_id":135101094,"body_markdown":"Sir, that is exactly I want, by default it should point `localhost:8080/my-service/info`. How can do it Sir if someone simply types `localhost:8080/`","body":"Sir, that is exactly I want, by default it should point <code>localhost:8080&#47;my-service&#47;info</code>. How can do it Sir if someone simply types <code>localhost:8080&#47;</code>"}],"answers":[{"tags":[],"owner":{"account_id":17894866,"reputation":899,"user_id":13000512,"display_name":"Deba"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1688673165,"creation_date":1688673165,"answer_id":76632156,"question_id":76626013,"body_markdown":"This code may be useful which I got from stackoverflow. This code satisfies my requirement. The link is given below.\r\n\r\nhttps://stackoverflow.com/questions/56188883/auto-redirect-root-path-to-spring-boot-context-path\r\n\r\n    import java.io.IOException;\r\n    import java.util.Collections;\r\n    \r\n    import org.apache.catalina.Host;\r\n    import org.apache.catalina.core.StandardContext;\r\n    import org.apache.catalina.startup.Tomcat;\r\n    import org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory;\r\n    import org.springframework.boot.web.servlet.ServletContextInitializer;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    \r\n    import jakarta.servlet.Servlet;\r\n    import jakarta.servlet.ServletContainerInitializer;\r\n    import jakarta.servlet.ServletException;\r\n    import jakarta.servlet.http.HttpServlet;\r\n    import jakarta.servlet.http.HttpServletRequest;\r\n    import jakarta.servlet.http.HttpServletResponse;\r\n    \r\n    @Configuration\r\n    public class RootServletConfig {\r\n    \r\n        @Bean\r\n        public TomcatServletWebServerFactory servletWebServerFactory() {\r\n            return new TomcatServletWebServerFactory() {\r\n    \r\n                @Override\r\n                protected void prepareContext(Host host, ServletContextInitializer[] initializers) {\r\n                    super.prepareContext(host, initializers);\r\n                    StandardContext child = new StandardContext();\r\n                    child.addLifecycleListener(new Tomcat.FixContextListener());\r\n                    child.setPath(&quot;&quot;);\r\n                    ServletContainerInitializer initializer = getServletContextInitializer(getContextPath());\r\n                    child.addServletContainerInitializer(initializer, Collections.emptySet());\r\n                    child.setCrossContext(true);\r\n                    host.addChild(child);\r\n                }\r\n            };\r\n        }\r\n    \r\n        private ServletContainerInitializer getServletContextInitializer(String contextPath) {\r\n            return (c, context) -&gt; {\r\n                Servlet servlet = new HttpServlet() {\r\n                    @Override\r\n                    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\r\n                        resp.sendRedirect(contextPath);\r\n                    }\r\n                };\r\n                context.addServlet(&quot;root&quot;, servlet).addMapping(&quot;/&quot;);\r\n            };\r\n        }\r\n    }","title":"How to redirect to a controller or a web page from localhost:8080/ in spring boot 3.1.1 with server.servlet.contextPath","body":"<p>This code may be useful which I got from stackoverflow. This code satisfies my requirement. The link is given below.</p>\n<p><a href=\"https://stackoverflow.com/questions/56188883/auto-redirect-root-path-to-spring-boot-context-path\">Auto-redirect root path to Spring Boot Context Path</a></p>\n<pre><code>import java.io.IOException;\nimport java.util.Collections;\n\nimport org.apache.catalina.Host;\nimport org.apache.catalina.core.StandardContext;\nimport org.apache.catalina.startup.Tomcat;\nimport org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory;\nimport org.springframework.boot.web.servlet.ServletContextInitializer;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\nimport jakarta.servlet.Servlet;\nimport jakarta.servlet.ServletContainerInitializer;\nimport jakarta.servlet.ServletException;\nimport jakarta.servlet.http.HttpServlet;\nimport jakarta.servlet.http.HttpServletRequest;\nimport jakarta.servlet.http.HttpServletResponse;\n\n@Configuration\npublic class RootServletConfig {\n\n    @Bean\n    public TomcatServletWebServerFactory servletWebServerFactory() {\n        return new TomcatServletWebServerFactory() {\n\n            @Override\n            protected void prepareContext(Host host, ServletContextInitializer[] initializers) {\n                super.prepareContext(host, initializers);\n                StandardContext child = new StandardContext();\n                child.addLifecycleListener(new Tomcat.FixContextListener());\n                child.setPath(&quot;&quot;);\n                ServletContainerInitializer initializer = getServletContextInitializer(getContextPath());\n                child.addServletContainerInitializer(initializer, Collections.emptySet());\n                child.setCrossContext(true);\n                host.addChild(child);\n            }\n        };\n    }\n\n    private ServletContainerInitializer getServletContextInitializer(String contextPath) {\n        return (c, context) -&gt; {\n            Servlet servlet = new HttpServlet() {\n                @Override\n                protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n                    resp.sendRedirect(contextPath);\n                }\n            };\n            context.addServlet(&quot;root&quot;, servlet).addMapping(&quot;/&quot;);\n        };\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":17894866,"reputation":899,"user_id":13000512,"display_name":"Deba"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":206,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76632156,"answer_count":1,"score":1,"last_activity_date":1688673165,"creation_date":1688624393,"question_id":76626013,"body_markdown":"I have a requirement that in case of localhost:8080 , it should point to a default web page in spring Boot application. Currently I am using Spring Boot 3.1.1. Normally everything works, but I add `server.servlet.contextPath=my-service`, it does not work. I provide below the code.\r\n\r\nMy Controller Code\r\n\r\n    @RestController\r\n    public class DefaultController {\r\n        \r\n    \t@GetMapping(path = &quot;/&quot;)\r\n    \tpublic ResponseEntity&lt;String&gt; getValue() {\r\n    \t\treturn ResponseEntity.ok(&quot;Hello World&quot;);\r\n    \t}\r\n    \r\n        @GetMapping(path = &quot;/info&quot;)\r\n    \tpublic ResponseEntity&lt;String&gt; getInfoValue() {\r\n    \t\treturn ResponseEntity.ok(&quot;Some Information&quot;);\r\n    \t}\r\n    }\r\n\r\nI have also tried with the following `@Configuration` option.\r\n\r\n    @Configuration\r\n    public class WebMVCApplicationConfig implements WebMvcConfigurer {\r\n    \r\n        @Override\r\n       public void addViewControllers(ViewControllerRegistry registry) {\r\n           registry.addRedirectViewController(&quot;/&quot;, &quot;/my-service/info&quot;);\r\n       }\r\n    }\r\n\r\nIf I comment the following in application.properties, everything works fine.\r\n\r\n    # server.servlet.contextPath=/my-service\r\n\r\nIf I uncomment the contextPath, I get **HTTP Status 404  Not Found**\r\n\r\nPlease suggest me. I want to redirect to a web page along with contextPath. If someone is accessing `localhost:8080`, it should redirect to `localhost:8080/my-service/info`. \r\n\r\nPlease help me.","title":"How to redirect to a controller or a web page from localhost:8080/ in spring boot 3.1.1 with server.servlet.contextPath","body":"<p>I have a requirement that in case of localhost:8080 , it should point to a default web page in spring Boot application. Currently I am using Spring Boot 3.1.1. Normally everything works, but I add <code>server.servlet.contextPath=my-service</code>, it does not work. I provide below the code.</p>\n<p>My Controller Code</p>\n<pre><code>@RestController\npublic class DefaultController {\n    \n    @GetMapping(path = &quot;/&quot;)\n    public ResponseEntity&lt;String&gt; getValue() {\n        return ResponseEntity.ok(&quot;Hello World&quot;);\n    }\n\n    @GetMapping(path = &quot;/info&quot;)\n    public ResponseEntity&lt;String&gt; getInfoValue() {\n        return ResponseEntity.ok(&quot;Some Information&quot;);\n    }\n}\n</code></pre>\n<p>I have also tried with the following <code>@Configuration</code> option.</p>\n<pre><code>@Configuration\npublic class WebMVCApplicationConfig implements WebMvcConfigurer {\n\n    @Override\n   public void addViewControllers(ViewControllerRegistry registry) {\n       registry.addRedirectViewController(&quot;/&quot;, &quot;/my-service/info&quot;);\n   }\n}\n</code></pre>\n<p>If I comment the following in application.properties, everything works fine.</p>\n<pre><code># server.servlet.contextPath=/my-service\n</code></pre>\n<p>If I uncomment the contextPath, I get <strong>HTTP Status 404  Not Found</strong></p>\n<p>Please suggest me. I want to redirect to a web page along with contextPath. If someone is accessing <code>localhost:8080</code>, it should redirect to <code>localhost:8080/my-service/info</code>.</p>\n<p>Please help me.</p>\n"},{"tags":["java","apache-spark-sql","spark-streaming","spark-structured-streaming","spark-submit"],"owner":{"account_id":28964821,"reputation":1,"user_id":22186536,"display_name":"Saurabh Sable"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1688672292,"creation_date":1688666760,"question_id":76631481,"body_markdown":"I have a Java Spark application, which I run using Spark-submit command.\r\nMy Specific use case involves fetching offsets data from Kafka using spark consumer in a Dataframe (Dataset\\&lt;Row\\&gt;) and performing transformation(spark sql) on each row of this dataframe.\r\n\r\n\r\nIssue: when I use following command where Spark.master is &quot;yarn&quot;, line of code inside foreach does nothing. I cannot see any Log on terminal and if we try to do some transformation on this it gives NullPointerException.\r\nBut when we use Spark.master as &quot;local&quot; in this command we can see each row in Log.\r\n(In case of information on why yarn and why local : [https://spark.apache.org/docs/latest/submitting-applications.html#master-urls](https://spark.apache.org/docs/latest/submitting-applications.html#master-urls)\r\n\r\nThis is the command I am using:\r\n\r\n```\r\nspark-submit --conf spark.app.name=SparkHwcIntegration --conf spark.master=yarn --conf spark.submit.deployMode=client --conf spark.driver.memory=1g --conf spark.executor.memory=1g --conf spark.driver.cores=1 --conf spark.executor.cores=3 --conf spark.executor.instances=2 --class &quot;com.saurabh.kafkaExtractorMain&quot; --jars kafka-spark-1.0.jar\r\n```\r\n\r\nJava code snippet for which I am experiencing this issue:\r\n\r\n```\r\npackage com.saurabh;\r\n\r\nimport com.saurabh.SparkSessionSingleton;\r\nimport org.apache.spark.sql.Dataset;\r\nimport org.apache.spark.sql.Row;\r\nimport org.apache.spark.sql.SparkSession;\r\nimport org.apache.spark.sql.streaming.StreamingQuery;\r\nimport org.apache.spark.sql.streaming.StreamingQueryException;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\n\r\nimport static org.apache.spark.sql.functions.col;\r\nimport static org.apache.spark.sql.functions.get_json_object;\r\nimport static org.apache.spark.sql.types.DataTypes.StringType;\r\n\r\npublic class SparkDfSam {\r\n    public static Logger LOG = LoggerFactory.getLogger(SparkDfSam.class);\r\n\r\n    public static void extractKafkaDataframeFromSparkNew() {\r\n        LOG.info(&quot;::Creating Session::&quot;);\r\n        SparkSession spark = SparkSessionSingleton.getInstance();\r\n\r\n        LOG.info(&quot;::Spark Read() start::&quot;);\r\n\r\n        Dataset&lt;Row&gt; df = spark\r\n                .readStream()\r\n                .format(&quot;kafka&quot;)\r\n                .option(&quot;kafka.bootstrap.servers&quot;, &quot;&lt;List of kafka broker&gt;&quot;)\r\n                .option(&quot;subscribe&quot;, &quot;&lt;TopicName&gt;&quot;)\r\n                .option(&quot;startingOffsets&quot;, &quot;earliest&quot;)\r\n                .load();\r\n        df.printSchema();\r\n        LOG.info(&quot;-------------------Spark ReadStream() end -------------------&quot;);\r\n\r\n        Dataset&lt;Row&gt; processedDF =\r\n                df.withColumn(&quot;key2&quot;, col(&quot;key&quot;).cast(StringType))\r\n                        .withColumn(&quot;value2&quot;, col(&quot;value&quot;).cast(StringType)).drop(&quot;key&quot;, &quot;value&quot;, &quot;topic&quot;, &quot;partition&quot;, &quot;offset&quot;, &quot;timestamp&quot;, &quot;timestampType&quot;);\r\n        Dataset&lt;Row&gt; colRep = processedDF.withColumn(&quot;new&quot;, get_json_object(col(&quot;value2&quot;), &quot;$.repeatedMessages&quot;));\r\n        LOG.info(&quot;-------------------Spark writeStream() start -------------------&quot;);\r\n        StreamingQuery query = colRep.writeStream()\r\n                .foreachBatch((batchDf, batchId) -&gt; {\r\n\r\n                    batchDf.foreach(row -&gt; {\r\n                        LOG.info(&quot;Row String value is: {}&quot;, row.getString(0)); // this logs nothing\r\n                        LOG.info(&quot;Row value: {}&quot;, row); // this also logs nothing\r\n                    });\r\n\r\n\r\n                }).start();\r\n\r\n        try {\r\n            query.awaitTermination(30 * 1000); // 30s\r\n        } catch (StreamingQueryException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n\r\n        LOG.info(&quot;-------------------Spark writeStream() end -------------------&quot;);\r\n    }\r\n\r\n}\r\n```\r\n\r\nSample Json data read from Kafka:\r\n\r\n```\r\n{\r\n  &quot;startTransaction&quot;: true,\r\n  &quot;transactionId&quot;: &quot;REFERENCE_TABLES&quot;,\r\n  &quot;endTransaction&quot;: true,\r\n  &quot;repeatedMessages&quot;: {\r\n    &quot;HortonWorks&quot;: [\r\n      {\r\n        &quot;productCatalogParameterRelKey&quot;: &quot;testProductKey&quot;,\r\n        &quot;queryTime&quot;: 1002839,\r\n        &quot;transactionTime&quot;: 18929,\r\n        &quot;catalogItemName&quot;: &quot;testCatalogItem&quot;,\r\n        &quot;endDate&quot;: 978,\r\n        &quot;itemRoleInd&quot;: &quot;OC&quot;\r\n      }\r\n    ],\r\n    &quot;HiveWHC&quot;: [\r\n      {\r\n        &quot;HWC&quot;: 1687238823610,\r\n        &quot;Amd&quot;: &quot;SAMSON_100009925_MEMO_947067743&quot;,\r\n        &quot;Kart&quot;: 1687264015000,\r\n        &quot;customerKey&quot;: &quot;SAMSON_100009925&quot;,\r\n        &quot;systemMessage&quot;: &quot;Message&quot;\r\n      },\r\n      {\r\n        &quot;HWC&quot;: 78244,\r\n        &quot;Amd&quot;: &quot;&quot;,\r\n        &quot;Kart&quot;: 1687264015000,\r\n        &quot;customerKey&quot;: &quot;Apple&quot;,\r\n        &quot;systemMessage&quot;: &quot;Message-Json&quot;\r\n      }\r\n    ]\r\n  }\r\n}\r\n```\r\n","title":"In Java Application, Dataframe.foreach() not able to fetch row when Spark.master=yarn is used","body":"<p>I have a Java Spark application, which I run using Spark-submit command.\nMy Specific use case involves fetching offsets data from Kafka using spark consumer in a Dataframe (Dataset&lt;Row&gt;) and performing transformation(spark sql) on each row of this dataframe.</p>\n<p>Issue: when I use following command where Spark.master is &quot;yarn&quot;, line of code inside foreach does nothing. I cannot see any Log on terminal and if we try to do some transformation on this it gives NullPointerException.\nBut when we use Spark.master as &quot;local&quot; in this command we can see each row in Log.\n(In case of information on why yarn and why local : <a href=\"https://spark.apache.org/docs/latest/submitting-applications.html#master-urls\" rel=\"nofollow noreferrer\">https://spark.apache.org/docs/latest/submitting-applications.html#master-urls</a></p>\n<p>This is the command I am using:</p>\n<pre><code>spark-submit --conf spark.app.name=SparkHwcIntegration --conf spark.master=yarn --conf spark.submit.deployMode=client --conf spark.driver.memory=1g --conf spark.executor.memory=1g --conf spark.driver.cores=1 --conf spark.executor.cores=3 --conf spark.executor.instances=2 --class &quot;com.saurabh.kafkaExtractorMain&quot; --jars kafka-spark-1.0.jar\n</code></pre>\n<p>Java code snippet for which I am experiencing this issue:</p>\n<pre><code>package com.saurabh;\n\nimport com.saurabh.SparkSessionSingleton;\nimport org.apache.spark.sql.Dataset;\nimport org.apache.spark.sql.Row;\nimport org.apache.spark.sql.SparkSession;\nimport org.apache.spark.sql.streaming.StreamingQuery;\nimport org.apache.spark.sql.streaming.StreamingQueryException;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\nimport static org.apache.spark.sql.functions.col;\nimport static org.apache.spark.sql.functions.get_json_object;\nimport static org.apache.spark.sql.types.DataTypes.StringType;\n\npublic class SparkDfSam {\n    public static Logger LOG = LoggerFactory.getLogger(SparkDfSam.class);\n\n    public static void extractKafkaDataframeFromSparkNew() {\n        LOG.info(&quot;::Creating Session::&quot;);\n        SparkSession spark = SparkSessionSingleton.getInstance();\n\n        LOG.info(&quot;::Spark Read() start::&quot;);\n\n        Dataset&lt;Row&gt; df = spark\n                .readStream()\n                .format(&quot;kafka&quot;)\n                .option(&quot;kafka.bootstrap.servers&quot;, &quot;&lt;List of kafka broker&gt;&quot;)\n                .option(&quot;subscribe&quot;, &quot;&lt;TopicName&gt;&quot;)\n                .option(&quot;startingOffsets&quot;, &quot;earliest&quot;)\n                .load();\n        df.printSchema();\n        LOG.info(&quot;-------------------Spark ReadStream() end -------------------&quot;);\n\n        Dataset&lt;Row&gt; processedDF =\n                df.withColumn(&quot;key2&quot;, col(&quot;key&quot;).cast(StringType))\n                        .withColumn(&quot;value2&quot;, col(&quot;value&quot;).cast(StringType)).drop(&quot;key&quot;, &quot;value&quot;, &quot;topic&quot;, &quot;partition&quot;, &quot;offset&quot;, &quot;timestamp&quot;, &quot;timestampType&quot;);\n        Dataset&lt;Row&gt; colRep = processedDF.withColumn(&quot;new&quot;, get_json_object(col(&quot;value2&quot;), &quot;$.repeatedMessages&quot;));\n        LOG.info(&quot;-------------------Spark writeStream() start -------------------&quot;);\n        StreamingQuery query = colRep.writeStream()\n                .foreachBatch((batchDf, batchId) -&gt; {\n\n                    batchDf.foreach(row -&gt; {\n                        LOG.info(&quot;Row String value is: {}&quot;, row.getString(0)); // this logs nothing\n                        LOG.info(&quot;Row value: {}&quot;, row); // this also logs nothing\n                    });\n\n\n                }).start();\n\n        try {\n            query.awaitTermination(30 * 1000); // 30s\n        } catch (StreamingQueryException e) {\n            throw new RuntimeException(e);\n        }\n\n        LOG.info(&quot;-------------------Spark writeStream() end -------------------&quot;);\n    }\n\n}\n</code></pre>\n<p>Sample Json data read from Kafka:</p>\n<pre><code>{\n  &quot;startTransaction&quot;: true,\n  &quot;transactionId&quot;: &quot;REFERENCE_TABLES&quot;,\n  &quot;endTransaction&quot;: true,\n  &quot;repeatedMessages&quot;: {\n    &quot;HortonWorks&quot;: [\n      {\n        &quot;productCatalogParameterRelKey&quot;: &quot;testProductKey&quot;,\n        &quot;queryTime&quot;: 1002839,\n        &quot;transactionTime&quot;: 18929,\n        &quot;catalogItemName&quot;: &quot;testCatalogItem&quot;,\n        &quot;endDate&quot;: 978,\n        &quot;itemRoleInd&quot;: &quot;OC&quot;\n      }\n    ],\n    &quot;HiveWHC&quot;: [\n      {\n        &quot;HWC&quot;: 1687238823610,\n        &quot;Amd&quot;: &quot;SAMSON_100009925_MEMO_947067743&quot;,\n        &quot;Kart&quot;: 1687264015000,\n        &quot;customerKey&quot;: &quot;SAMSON_100009925&quot;,\n        &quot;systemMessage&quot;: &quot;Message&quot;\n      },\n      {\n        &quot;HWC&quot;: 78244,\n        &quot;Amd&quot;: &quot;&quot;,\n        &quot;Kart&quot;: 1687264015000,\n        &quot;customerKey&quot;: &quot;Apple&quot;,\n        &quot;systemMessage&quot;: &quot;Message-Json&quot;\n      }\n    ]\n  }\n}\n</code></pre>\n"},{"tags":["java","jackson","deserialization"],"answers":[{"tags":[],"owner":{"account_id":24891735,"reputation":103,"user_id":18763596,"display_name":"Iva_Only_Java"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1688672030,"creation_date":1688672030,"answer_id":76632042,"question_id":76605751,"body_markdown":"In case someone has a similiar use case, here&#39;s how I did it. `Base` class is basically a placeholder for all the `static final` instances (or should I call them `constants`) - `ALL_MAPS` contains key as the name of the class which extends `Base` and as of value - a `Map` of keys - code of the instance and the instance itself as value. When the subclass of `Base` is loaded into the JVM, all the `constants` in it (as they are `static`) are placed in the `ALL_MAP`. So when deserializing, apart from loading the class into the memory, I only need a class of the `constant` and a key to it (`code`). I can get the class in the custom deserializer just like this: https://github.com/FasterXML/jackson-databind/issues/2711\r\n\r\nAfter that, all is left is to load the class into memory - I achieved it via reflection by calling `get` method on any static field with `null` value as I don&#39;t want to allow creating instances of `const` subclasses at all. And then - to read the json node which contains the `code` and get the `constant`.\r\n\r\nAs a note: on the `Base` class I used `@JsonDeserialize(using = BaseConstDeserializer.class)` where `BaseConstDeserializer` is the custom deserializer.\r\n\r\nHere is the code of the deserializer:\r\n\r\n\r\n\r\n    public class BaseConstDeserializer&lt;CONST extends BaseConst&gt; extends StdDeserializer&lt;CONST&gt; implements ContextualDeserializer {\r\n    private final Class&lt;CONST&gt; deserializedFieldClazz;\r\n\r\n    protected BaseConstDeserializer(Class&lt;CONST&gt; deserializedFieldClazz) {\r\n        super(BaseConst.class);\r\n        this.deserializedFieldClazz = deserializedFieldClazz;\r\n    }\r\n\r\n    @Override\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    public CONST deserialize(JsonParser jp, DeserializationContext ctxt) throws IOException, JacksonException {\r\n        JsonNode node = jp.getCodec().readTree(jp);\r\n        Integer code = JsonUtils.readSingleNode(node, &quot;code&quot;, JsonNode::asInt, ValidUtils::isInteger);\r\n        if (code != null) {\r\n            BaseConst.initConst(deserializedFieldClazz);\r\n            return (CONST) BaseConst.getConstAndClearMap(code, deserializedFieldClazz);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    @Override\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    public JsonDeserializer&lt;?&gt; createContextual(DeserializationContext deserializationContext, BeanProperty property) throws JsonMappingException {\r\n        Class&lt;CONST&gt; rawClass = (Class&lt;CONST&gt;) property.getType().getRawClass();\r\n        return new BaseConstDeserializer&lt;&gt;(rawClass);\r\n    }\r\n    }\r\n\r\nThe only drawback I can guess here is that I need to manage the memory usage by myself - by clearing the map every time I deserialized json. I know that in Spring I can use `@Scope` to set the &quot;lifespan&quot; of an instance of bean to the scope of request but I don&#39;t like creating and having those instances in this case at all. This is propably an unorthodox approach, but it serves my case and I like the solution. \r\nAnyway, if someone sees any other potentials cons and pros of it, I&#39;d like to hear.  \r\n","title":"Java Static final instances hierarchy deserialization","body":"<p>In case someone has a similiar use case, here's how I did it. <code>Base</code> class is basically a placeholder for all the <code>static final</code> instances (or should I call them <code>constants</code>) - <code>ALL_MAPS</code> contains key as the name of the class which extends <code>Base</code> and as of value - a <code>Map</code> of keys - code of the instance and the instance itself as value. When the subclass of <code>Base</code> is loaded into the JVM, all the <code>constants</code> in it (as they are <code>static</code>) are placed in the <code>ALL_MAP</code>. So when deserializing, apart from loading the class into the memory, I only need a class of the <code>constant</code> and a key to it (<code>code</code>). I can get the class in the custom deserializer just like this: <a href=\"https://github.com/FasterXML/jackson-databind/issues/2711\" rel=\"nofollow noreferrer\">https://github.com/FasterXML/jackson-databind/issues/2711</a></p>\n<p>After that, all is left is to load the class into memory - I achieved it via reflection by calling <code>get</code> method on any static field with <code>null</code> value as I don't want to allow creating instances of <code>const</code> subclasses at all. And then - to read the json node which contains the <code>code</code> and get the <code>constant</code>.</p>\n<p>As a note: on the <code>Base</code> class I used <code>@JsonDeserialize(using = BaseConstDeserializer.class)</code> where <code>BaseConstDeserializer</code> is the custom deserializer.</p>\n<p>Here is the code of the deserializer:</p>\n<pre><code>public class BaseConstDeserializer&lt;CONST extends BaseConst&gt; extends StdDeserializer&lt;CONST&gt; implements ContextualDeserializer {\nprivate final Class&lt;CONST&gt; deserializedFieldClazz;\n\nprotected BaseConstDeserializer(Class&lt;CONST&gt; deserializedFieldClazz) {\n    super(BaseConst.class);\n    this.deserializedFieldClazz = deserializedFieldClazz;\n}\n\n@Override\n@SuppressWarnings(&quot;unchecked&quot;)\npublic CONST deserialize(JsonParser jp, DeserializationContext ctxt) throws IOException, JacksonException {\n    JsonNode node = jp.getCodec().readTree(jp);\n    Integer code = JsonUtils.readSingleNode(node, &quot;code&quot;, JsonNode::asInt, ValidUtils::isInteger);\n    if (code != null) {\n        BaseConst.initConst(deserializedFieldClazz);\n        return (CONST) BaseConst.getConstAndClearMap(code, deserializedFieldClazz);\n    }\n    return null;\n}\n\n@Override\n@SuppressWarnings(&quot;unchecked&quot;)\npublic JsonDeserializer&lt;?&gt; createContextual(DeserializationContext deserializationContext, BeanProperty property) throws JsonMappingException {\n    Class&lt;CONST&gt; rawClass = (Class&lt;CONST&gt;) property.getType().getRawClass();\n    return new BaseConstDeserializer&lt;&gt;(rawClass);\n}\n}\n</code></pre>\n<p>The only drawback I can guess here is that I need to manage the memory usage by myself - by clearing the map every time I deserialized json. I know that in Spring I can use <code>@Scope</code> to set the &quot;lifespan&quot; of an instance of bean to the scope of request but I don't like creating and having those instances in this case at all. This is propably an unorthodox approach, but it serves my case and I like the solution.\nAnyway, if someone sees any other potentials cons and pros of it, I'd like to hear.</p>\n"}],"owner":{"account_id":24891735,"reputation":103,"user_id":18763596,"display_name":"Iva_Only_Java"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76632042,"answer_count":1,"score":1,"last_activity_date":1688672030,"creation_date":1688394861,"question_id":76605751,"body_markdown":"I have 3 classes:\r\n\r\n    public class Base {\r\n      private int code;\r\n      private static final Map&lt;String, Map&lt;Integer, Base&gt;&gt; ALL_MAPS = \r\n      new HashMap&lt;&gt;();\r\n\r\n     protected Base(int code) {\r\n      this.code = code;\r\n      getConstMap(this.getClass()).put(code, this);\r\n    }\r\n   \r\n    protected Map&lt;Integer, Base&gt; getConstMap(Class&lt;?&gt; clazz) {\r\n      Map&lt;Integer, Base&gt; res;\r\n      if ((res = ALL_MAPS.get(clazz.getName())) == null) {\r\n         res = new HashMap&lt;&gt;();\r\n         ALL_MAPS.put(clazz.getName(), res);\r\n      }\r\n      return res;\r\n    }\r\n    //...\r\n    }\r\n\r\n    public class AConstants extends Base {\r\n       public static final AConstants A_1 = new AConstants(1, \r\n     &quot;sample1&quot;);\r\n     public static final AConstants A_2 = new AConstants(2, &quot;sample2&quot;);\r\n       //...\r\n       private final String text;\r\n       private AConstants(int code, String text) {\r\n          super(code);\r\n          this.text = text;\r\n       }\r\n    }\r\n\r\n    public class BConstants extends Base {\r\n       public static final BConstants B_1 = new BConstants(1, \r\n    &quot;sample1&quot;, &quot;moreText&quot;);\r\n       public static final BConstants B_2 = new BConstants(2, \r\n    &quot;sample2&quot;, &quot;moreText&quot;);\r\n       //...\r\n       private final String text;\r\n       private final String moreText;\r\n       private BConstants(int code, String text, String moreText) {\r\n          super(code);\r\n          this.text = text;\r\n          this.moreText = moreText;\r\n       }\r\n    }\r\n\r\nWhat I want to achieve is having a base method for deserializing (and serealizing) static final instances in the `Base` class. Obviously, I can&#39;t do smth like this due to generic type being unable to be referenced from static context during compilation (plus I obviously can&#39;t get the class of `CONST`):\r\n\r\n    @JsonCreator\r\n    public static CONST deserialize(@JsonProperty(&quot;code&quot;) int code) {\r\n        // Should get the class of CONST and retrieve static final instance by code\r\n        return ALL_MAPS.get(CONST.class).get(code);\r\n    }\r\n    \r\n    @JsonValue\r\n    public Integer serialize() {\r\n        // Return code for static final instance of the necessary class\r\n        return getKeyByValue(ALL_MAPS.get(CONST.class), this);\r\n    }\r\n      \r\n Is there a way to achieve this with Jackson? Or if not, how do I write a custom serializer/deserializer for this?","title":"Java Static final instances hierarchy deserialization","body":"<p>I have 3 classes:</p>\n<pre><code>public class Base {\n  private int code;\n  private static final Map&lt;String, Map&lt;Integer, Base&gt;&gt; ALL_MAPS = \n  new HashMap&lt;&gt;();\n\n protected Base(int code) {\n  this.code = code;\n  getConstMap(this.getClass()).put(code, this);\n}\n\nprotected Map&lt;Integer, Base&gt; getConstMap(Class&lt;?&gt; clazz) {\n  Map&lt;Integer, Base&gt; res;\n  if ((res = ALL_MAPS.get(clazz.getName())) == null) {\n     res = new HashMap&lt;&gt;();\n     ALL_MAPS.put(clazz.getName(), res);\n  }\n  return res;\n}\n//...\n}\n\npublic class AConstants extends Base {\n   public static final AConstants A_1 = new AConstants(1, \n &quot;sample1&quot;);\n public static final AConstants A_2 = new AConstants(2, &quot;sample2&quot;);\n   //...\n   private final String text;\n   private AConstants(int code, String text) {\n      super(code);\n      this.text = text;\n   }\n}\n\npublic class BConstants extends Base {\n   public static final BConstants B_1 = new BConstants(1, \n&quot;sample1&quot;, &quot;moreText&quot;);\n   public static final BConstants B_2 = new BConstants(2, \n&quot;sample2&quot;, &quot;moreText&quot;);\n   //...\n   private final String text;\n   private final String moreText;\n   private BConstants(int code, String text, String moreText) {\n      super(code);\n      this.text = text;\n      this.moreText = moreText;\n   }\n}\n</code></pre>\n<p>What I want to achieve is having a base method for deserializing (and serealizing) static final instances in the <code>Base</code> class. Obviously, I can't do smth like this due to generic type being unable to be referenced from static context during compilation (plus I obviously can't get the class of <code>CONST</code>):</p>\n<pre><code>@JsonCreator\npublic static CONST deserialize(@JsonProperty(&quot;code&quot;) int code) {\n    // Should get the class of CONST and retrieve static final instance by code\n    return ALL_MAPS.get(CONST.class).get(code);\n}\n\n@JsonValue\npublic Integer serialize() {\n    // Return code for static final instance of the necessary class\n    return getKeyByValue(ALL_MAPS.get(CONST.class), this);\n}\n  \n</code></pre>\n<p>Is there a way to achieve this with Jackson? Or if not, how do I write a custom serializer/deserializer for this?</p>\n"},{"tags":["java","selenium-webdriver","testing","testng","selenium-grid"],"comments":[{"owner":{"account_id":6717404,"reputation":1454,"user_id":5178801,"display_name":"J. Murray"},"score":0,"creation_date":1688673628,"post_id":76629980,"comment_id":135109277,"body_markdown":"Please add the error you received to your post (because this will help to resolve the issue faster)","body":"Please add the error you received to your post (because this will help to resolve the issue faster)"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1688673639,"post_id":76629980,"comment_id":135109279,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":28919695,"reputation":3,"user_id":22150935,"display_name":"Ezhumalai Shanmugam"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1688671858,"creation_date":1688654309,"question_id":76629980,"body_markdown":"Selenium code unable to run on LambdaTest platform\r\n```\r\nDesiredCapabilities capabilities = new DesiredCapabilities(); \r\n```\r\nI tried multiple time but same error showing on console.\r\n\r\n\r\nMultiple browser need to run with different platform and different version.\r\n\r\n\r\n\r\n\r\nThis is my Java package \r\n```\r\npackage lambdatest;\r\n\r\nimport org.openqa.selenium.*;\r\nimport org.openqa.selenium.remote.*;\r\nimport org.testng.Assert;\r\nimport org.testng.annotations.*;\r\n\r\nimport java.net.URL;\r\n\r\npublic class Lambdatest {\r\n\r\n    private WebDriver driver;\r\n\r\n    @BeforeClass\r\n    @Parameters({&quot;browserName&quot;, &quot;browserVersion&quot;, &quot;platform&quot;})\r\n    public void setUp(String browserName, String browserVersion, String platform) throws Exception {\r\n    \t\r\n    \t\r\n        MutableCapabilities capabilities = new MutableCapabilities();\r\n        capabilities.setCapability(&quot;browserName&quot;, browserName);\r\n        capabilities.setCapability(&quot;browserVersion&quot;, browserVersion);\r\n        capabilities.setCapability(&quot;platform&quot;, platform);\r\n        capabilities.setCapability(&quot;name&quot;, &quot;LambdaTest Assignment&quot;);\r\n\r\n        String username = &quot;**************&quot;;\r\n        String accessKey = &quot;*************************************&quot;;\r\n\r\n        driver = new RemoteWebDriver(new URL(&quot;https://&quot; + username + &quot;:&quot; + accessKey + &quot;@hub.lambdatest.com/wd/hub&quot;), capabilities);\r\n    }\r\n\r\n    @AfterClass\r\n    public void tearDown() {\r\n        if (driver != null) {\r\n            driver.quit();\r\n        }\r\n    }\r\n\r\n    @Test(priority = 1)\r\n    public void testScenario1() {\r\n        driver.get(&quot;https://www.lambdatest.com/selenium-playground/&quot;);\r\n\r\n        // Perform explicit wait\r\n\r\n        String pageTitle = driver.getTitle();\r\n        Assert.assertEquals(pageTitle, &quot;LambdaTest&quot;); // Expecting failure\r\n    }\r\n}\r\n\r\n\r\n[RemoteTestNG] detected TestNG version 7.4.0\r\nJul 06, 2023 7:34:36 PM org.openqa.selenium.remote.tracing.opentelemetry.OpenTelemetryTracer createTracer\r\nINFO: Using OpenTelemetry for tracing\r\nSLF4J: No SLF4J providers were found.\r\nSLF4J: Defaulting to no-operation (NOP) logger implementation\r\nSLF4J: See https://www.slf4j.org/codes.html#noProviders for further details.\r\nJul 06, 2023 7:34:36 PM org.openqa.selenium.remote.RemoteWebDriver checkNonW3CCapabilities\r\nWARNING: Support for Legacy Capabilities is deprecated; You are sending the following invalid capabilities: [name, platform]; Please update to W3C Syntax: https://www.selenium.dev/blog/2022/legacy-protocol-support/\r\nJul 06, 2023 7:34:36 PM org.openqa.selenium.remote.RemoteWebDriver checkNonW3CCapabilities\r\nWARNING: Support for Legacy Capabilities is deprecated; You are sending the following invalid capabilities: [name, platform]; Please update to W3C Syntax: https://www.selenium.dev/blog/2022/legacy-protocol-support/\r\nJul 06, 2023 7:34:36 PM org.openqa.selenium.remote.RemoteWebDriver checkNonW3CCapabilities\r\nWARNING: Support for Legacy Capabilities is deprecated; You are sending the following invalid capabilities: [name, platform]; Please update to W3C Syntax: https://www.selenium.dev/blog/2022/legacy-protocol-support/\r\nJul 06, 2023 7:34:36 PM org.openqa.selenium.remote.RemoteWebDriver checkNonW3CCapabilities\r\nWARNING: Support for Legacy Capabilities is deprecated; You are sending the following invalid capabilities: [name, platform]; Please update to W3C Syntax: https://www.selenium.dev/blog/2022/legacy-protocol-support/\r\n\r\n===============================================\r\nTestNGAssignmentSuite\r\nTotal tests run: 12, Passes: 0, Failures: 0, Skips: 12\r\nConfiguration Failures: 4, Skips: 4\r\n===============================================\r\n```\r\n","title":"Selenium code Unable to Run on LambdaTest platform","body":"<p>Selenium code unable to run on LambdaTest platform</p>\n<pre><code>DesiredCapabilities capabilities = new DesiredCapabilities(); \n</code></pre>\n<p>I tried multiple time but same error showing on console.</p>\n<p>Multiple browser need to run with different platform and different version.</p>\n<p>This is my Java package</p>\n<pre><code>package lambdatest;\n\nimport org.openqa.selenium.*;\nimport org.openqa.selenium.remote.*;\nimport org.testng.Assert;\nimport org.testng.annotations.*;\n\nimport java.net.URL;\n\npublic class Lambdatest {\n\n    private WebDriver driver;\n\n    @BeforeClass\n    @Parameters({&quot;browserName&quot;, &quot;browserVersion&quot;, &quot;platform&quot;})\n    public void setUp(String browserName, String browserVersion, String platform) throws Exception {\n        \n        \n        MutableCapabilities capabilities = new MutableCapabilities();\n        capabilities.setCapability(&quot;browserName&quot;, browserName);\n        capabilities.setCapability(&quot;browserVersion&quot;, browserVersion);\n        capabilities.setCapability(&quot;platform&quot;, platform);\n        capabilities.setCapability(&quot;name&quot;, &quot;LambdaTest Assignment&quot;);\n\n        String username = &quot;**************&quot;;\n        String accessKey = &quot;*************************************&quot;;\n\n        driver = new RemoteWebDriver(new URL(&quot;https://&quot; + username + &quot;:&quot; + accessKey + &quot;@hub.lambdatest.com/wd/hub&quot;), capabilities);\n    }\n\n    @AfterClass\n    public void tearDown() {\n        if (driver != null) {\n            driver.quit();\n        }\n    }\n\n    @Test(priority = 1)\n    public void testScenario1() {\n        driver.get(&quot;https://www.lambdatest.com/selenium-playground/&quot;);\n\n        // Perform explicit wait\n\n        String pageTitle = driver.getTitle();\n        Assert.assertEquals(pageTitle, &quot;LambdaTest&quot;); // Expecting failure\n    }\n}\n\n\n[RemoteTestNG] detected TestNG version 7.4.0\nJul 06, 2023 7:34:36 PM org.openqa.selenium.remote.tracing.opentelemetry.OpenTelemetryTracer createTracer\nINFO: Using OpenTelemetry for tracing\nSLF4J: No SLF4J providers were found.\nSLF4J: Defaulting to no-operation (NOP) logger implementation\nSLF4J: See https://www.slf4j.org/codes.html#noProviders for further details.\nJul 06, 2023 7:34:36 PM org.openqa.selenium.remote.RemoteWebDriver checkNonW3CCapabilities\nWARNING: Support for Legacy Capabilities is deprecated; You are sending the following invalid capabilities: [name, platform]; Please update to W3C Syntax: https://www.selenium.dev/blog/2022/legacy-protocol-support/\nJul 06, 2023 7:34:36 PM org.openqa.selenium.remote.RemoteWebDriver checkNonW3CCapabilities\nWARNING: Support for Legacy Capabilities is deprecated; You are sending the following invalid capabilities: [name, platform]; Please update to W3C Syntax: https://www.selenium.dev/blog/2022/legacy-protocol-support/\nJul 06, 2023 7:34:36 PM org.openqa.selenium.remote.RemoteWebDriver checkNonW3CCapabilities\nWARNING: Support for Legacy Capabilities is deprecated; You are sending the following invalid capabilities: [name, platform]; Please update to W3C Syntax: https://www.selenium.dev/blog/2022/legacy-protocol-support/\nJul 06, 2023 7:34:36 PM org.openqa.selenium.remote.RemoteWebDriver checkNonW3CCapabilities\nWARNING: Support for Legacy Capabilities is deprecated; You are sending the following invalid capabilities: [name, platform]; Please update to W3C Syntax: https://www.selenium.dev/blog/2022/legacy-protocol-support/\n\n===============================================\nTestNGAssignmentSuite\nTotal tests run: 12, Passes: 0, Failures: 0, Skips: 12\nConfiguration Failures: 4, Skips: 4\n===============================================\n</code></pre>\n"},{"tags":["java","sql-server","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":1144312,"reputation":25594,"user_id":1127428,"accept_rate":79,"display_name":"Dale K"},"score":0,"creation_date":1661890467,"post_id":73547954,"comment_id":129878632,"body_markdown":"1) With any large database deadlocks are not only possible, but sometimes unavoidable. In which case you either need a retry mechanism *OR* a serialisation mechanism.","body":"1) With any large database deadlocks are not only possible, but sometimes unavoidable. In which case you either need a retry mechanism <i>OR</i> a serialisation mechanism."},{"owner":{"account_id":1144312,"reputation":25594,"user_id":1127428,"accept_rate":79,"display_name":"Dale K"},"score":0,"creation_date":1661890506,"post_id":73547954,"comment_id":129878636,"body_markdown":"And yes there are monitoring tools and solutions out there, your favourite search engine should assist you with that.","body":"And yes there are monitoring tools and solutions out there, your favourite search engine should assist you with that."},{"owner":{"account_id":4571603,"reputation":44060,"user_id":3711162,"display_name":"Dan Guzman"},"score":0,"creation_date":1661891817,"post_id":73547954,"comment_id":129878998,"body_markdown":"Query/index tuning often mitigates deadlocks by touch only data needed for the task at hand. Take a look at the execution plan.","body":"Query/index tuning often mitigates deadlocks by touch only data needed for the task at hand. Take a look at the execution plan."}],"answers":[{"tags":[],"owner":{"account_id":5342445,"reputation":4817,"user_id":4259032,"accept_rate":56,"display_name":"Alain Cruz"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1688671856,"creation_date":1663016728,"answer_id":73695238,"question_id":73547954,"body_markdown":"To anyone who finds themselves in my same predicament, the solution that had the best results so far is `Optimistic Locking`. Following this very helpful [Baeldung guide][1], I managed to solve my issue in a elegant way. \r\n\r\nYou can find below a summary of what I did to achieve this.\r\n\r\n1. Added a `bigint` field to the tables that were modified in the commonly deadlocked transactions (database wise)\r\n2. Then, added this new field with the `@Version` annotation to the JPA entities that are being modified\r\n\r\nThis simple solution solved most of my deadlocked issues. \r\n\r\nAdditionally, you can use [Spring Retry](https://www.baeldung.com/spring-retry) to retry deadlock transactions automatically, without needing to resend the request. Also, you can tell Spring to only retry deadlock related exceptions with the following annotation.\r\n\r\n    @Retryable(value = {CannotAcquireLockException.class, OptimisticLockException.class, TransactionException.class, ObjectOptimisticLockingFailureException.class})\r\n\r\nHope it helps somebody else. \r\n\r\n\r\n  [1]: https://www.baeldung.com/jpa-optimistic-locking","title":"Spring Data JPA Deadlock Issues with SQL Server","body":"<p>To anyone who finds themselves in my same predicament, the solution that had the best results so far is <code>Optimistic Locking</code>. Following this very helpful <a href=\"https://www.baeldung.com/jpa-optimistic-locking\" rel=\"nofollow noreferrer\">Baeldung guide</a>, I managed to solve my issue in a elegant way.</p>\n<p>You can find below a summary of what I did to achieve this.</p>\n<ol>\n<li>Added a <code>bigint</code> field to the tables that were modified in the commonly deadlocked transactions (database wise)</li>\n<li>Then, added this new field with the <code>@Version</code> annotation to the JPA entities that are being modified</li>\n</ol>\n<p>This simple solution solved most of my deadlocked issues.</p>\n<p>Additionally, you can use <a href=\"https://www.baeldung.com/spring-retry\" rel=\"nofollow noreferrer\">Spring Retry</a> to retry deadlock transactions automatically, without needing to resend the request. Also, you can tell Spring to only retry deadlock related exceptions with the following annotation.</p>\n<pre><code>@Retryable(value = {CannotAcquireLockException.class, OptimisticLockException.class, TransactionException.class, ObjectOptimisticLockingFailureException.class})\n</code></pre>\n<p>Hope it helps somebody else.</p>\n"}],"owner":{"account_id":5342445,"reputation":4817,"user_id":4259032,"accept_rate":56,"display_name":"Alain Cruz"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1925,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73695238,"answer_count":1,"score":1,"last_activity_date":1688671856,"creation_date":1661890186,"question_id":73547954,"body_markdown":"I have a complex business web application that receives multiple concurrent requests. One of those requests is to process a new invoice. If multiple of these requests are received at the same time, at least one of the requests will suffer a rollback because of the following error `Transaction (Process ID X) was deadlocked on lock resources`.\r\n\r\nI have been browsing through lots of StackOverflow entries about this topic, but none of them have given me a solution. I tried turning on `SNAPSHOT ISOLATION`, but nothing changed. I have try reordering my code, but to no avail. User https://stackoverflow.com/users/1560836/user1560836 commented on https://stackoverflow.com/questions/34551005/correct-way-to-handle-deadlocks-in-hibernate that there simply was no solution to this issue, and it seems likely. Still, I find it hard to believe, given how **used** these frameworks are.\r\n\r\nDoes anybody have a recommendation or maybe a solution? Also, do you have a solution to at least monitor these occurrences? Any help would be greatly appreciated.","title":"Spring Data JPA Deadlock Issues with SQL Server","body":"<p>I have a complex business web application that receives multiple concurrent requests. One of those requests is to process a new invoice. If multiple of these requests are received at the same time, at least one of the requests will suffer a rollback because of the following error <code>Transaction (Process ID X) was deadlocked on lock resources</code>.</p>\n<p>I have been browsing through lots of StackOverflow entries about this topic, but none of them have given me a solution. I tried turning on <code>SNAPSHOT ISOLATION</code>, but nothing changed. I have try reordering my code, but to no avail. User <a href=\"https://stackoverflow.com/users/1560836/user1560836\">https://stackoverflow.com/users/1560836/user1560836</a> commented on <a href=\"https://stackoverflow.com/questions/34551005/correct-way-to-handle-deadlocks-in-hibernate\">Correct way to handle deadlocks in Hibernate</a> that there simply was no solution to this issue, and it seems likely. Still, I find it hard to believe, given how <strong>used</strong> these frameworks are.</p>\n<p>Does anybody have a recommendation or maybe a solution? Also, do you have a solution to at least monitor these occurrences? Any help would be greatly appreciated.</p>\n"},{"tags":["java","oop","uuid"],"comments":[{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1688670598,"post_id":76631876,"comment_id":135108729,"body_markdown":"I mean, you could do that but it&#39;s unlikely to be as distributed as the existing UUID implementation. Of course, you could use an existing UUID implementation and then prepend and append whatever you want.","body":"I mean, you could do that but it&#39;s unlikely to be as distributed as the existing UUID implementation. Of course, you could use an existing UUID implementation and then prepend and append whatever you want."},{"owner":{"account_id":129540,"reputation":210839,"user_id":328193,"accept_rate":91,"display_name":"David"},"score":0,"creation_date":1688671119,"post_id":76631876,"comment_id":135108810,"body_markdown":"*&quot;for example the ID will need to be made of the first 3 letters of the user&#39;s name, the last 3 digits of the user&#39;s birthday as well as the number of hours they have worked&quot;* - And have you tried using those values to produce this ID?  What have you tried and what didn&#39;t work as expected?  It sounds like you know what you want to do, it&#39;s not clear what&#39;s stopping you from doing it.","body":"<i>&quot;for example the ID will need to be made of the first 3 letters of the user&#39;s name, the last 3 digits of the user&#39;s birthday as well as the number of hours they have worked&quot;</i> - And have you tried using those values to produce this ID?  What have you tried and what didn&#39;t work as expected?  It sounds like you know what you want to do, it&#39;s not clear what&#39;s stopping you from doing it."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1688678423,"post_id":76631876,"comment_id":135110080,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - "},"score":0,"creation_date":1688771312,"post_id":76631876,"comment_id":135123248,"body_markdown":"Show an example of how you would like the UUID to look like.","body":"Show an example of how you would like the UUID to look like."}],"answers":[{"comments":[{"owner":{"account_id":17575058,"reputation":2200,"user_id":12749998,"display_name":"Kozmotronik"},"score":0,"creation_date":1688846538,"post_id":76631997,"comment_id":135129837,"body_markdown":"A good [formatting](https://stackoverflow.com/help/formatting) would make your post look good.","body":"A good <a href=\"https://stackoverflow.com/help/formatting\">formatting</a> would make your post look good."},{"owner":{"account_id":17996655,"reputation":1,"user_id":13079513,"display_name":"Edual Dan Sarmiento Garfias"},"score":0,"creation_date":1689167646,"post_id":76631997,"comment_id":135174969,"body_markdown":"Thank you very much for the recommendation, I will improve. I&#39;m also new to stackoverflow and I don&#39;t handle English very well.","body":"Thank you very much for the recommendation, I will improve. I&#39;m also new to stackoverflow and I don&#39;t handle English very well."},{"owner":{"account_id":17575058,"reputation":2200,"user_id":12749998,"display_name":"Kozmotronik"},"score":0,"creation_date":1689172012,"post_id":76631997,"comment_id":135176179,"body_markdown":"Take it easy, there are lots of people that are non-native English speakers (I am one of them). Just try to keep learning and improving things. Then you will see that you had developed your skills.","body":"Take it easy, there are lots of people that are non-native English speakers (I am one of them). Just try to keep learning and improving things. Then you will see that you had developed your skills."}],"tags":[],"owner":{"account_id":17996655,"reputation":1,"user_id":13079513,"display_name":"Edual Dan Sarmiento Garfias"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688671643,"creation_date":1688671643,"answer_id":76631997,"question_id":76631876,"body_markdown":"According to the pattern you provided:\r\n\r\n- 3 first letters of the name: you can use the username.substring(0,2) function;\r\n - The last 3 digits of the user&#39;s birthday, assuming it is 31/12/1999 you mean the year.\r\n\r\n\r\nIf it is string, the same substring function will suffice in the range that you see.\r\nIf it is date you will have to use the SimpleDateFormat class and instantiate a pattern of how to get the data Ex: &#39;SimpleDateFormat sdf = new SimpleDateFormat(&quot;dd/mm/yyyy&quot;); sdf.format(tu_date);&#39;\r\nThis code may give you an exception so lock it in a try/catch.","title":"how do I create a unique id in java with information that has been inputted by the user?","body":"<p>According to the pattern you provided:</p>\n<ul>\n<li>3 first letters of the name: you can use the username.substring(0,2) function;</li>\n<li>The last 3 digits of the user's birthday, assuming it is 31/12/1999 you mean the year.</li>\n</ul>\n<p>If it is string, the same substring function will suffice in the range that you see.\nIf it is date you will have to use the SimpleDateFormat class and instantiate a pattern of how to get the data Ex: 'SimpleDateFormat sdf = new SimpleDateFormat(&quot;dd/mm/yyyy&quot;); sdf.format(tu_date);'\nThis code may give you an exception so lock it in a try/catch.</p>\n"}],"owner":{"account_id":28964938,"reputation":1,"user_id":22186630,"display_name":"Instant_ Dweeb"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1688671643,"creation_date":1688670490,"question_id":76631876,"body_markdown":"I need the program to create a unique ID for tasks, people, etc. I am having trouble, however with getting it to create a unique id with information provided by the user in the form of an input.\r\n\r\nI have not tried yet, but I simply can&#39;t remember how. I have seen other people create unique IDs using the GUID function/import, but I haven&#39;t seen people create an id based on information provided by the user/ for example the ID will need to be made of the first 3 letters of the user&#39;s name, the last 3 digits of the user&#39;s birthday as well as the number of hours they have worked.","title":"how do I create a unique id in java with information that has been inputted by the user?","body":"<p>I need the program to create a unique ID for tasks, people, etc. I am having trouble, however with getting it to create a unique id with information provided by the user in the form of an input.</p>\n<p>I have not tried yet, but I simply can't remember how. I have seen other people create unique IDs using the GUID function/import, but I haven't seen people create an id based on information provided by the user/ for example the ID will need to be made of the first 3 letters of the user's name, the last 3 digits of the user's birthday as well as the number of hours they have worked.</p>\n"},{"tags":["java","rest-assured","serenity-bdd"],"owner":{"account_id":18626114,"reputation":1,"user_id":13575182,"display_name":"sridhar sekar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2911,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1688671637,"creation_date":1589898373,"question_id":61893510,"body_markdown":"I am running the following code in serenity.\r\n\r\n    Response authenticationResponse = SerenityRest.given().relaxedHTTPSValidation().\r\n                    header(&quot;Cookie&quot;,**Validvalue**).\r\n                    queryParam(&quot;response_type&quot;,&quot;code&quot;).\r\n                    queryParam(&quot;state&quot;,&quot;nothing&quot;).\r\n                    queryParam(&quot;client_id&quot;,**Validvalue**).\r\n                 queryParam(&quot;scope&quot;,&quot;openid&quot;).\r\n                    queryParam(&quot;redirect_uri&quot;,&quot;http%3A%2F%2Flocalhost%3A4200%2Flogin%2Fsuccess&quot;).\r\n                    get(&quot;https://account.tst.com/auth&quot;);\r\n\r\nRunning serenity throws a runtime error as shown below,\r\n\r\n*Some exception during recording fields\r\njava.lang.RuntimeException: Some exception during recording fields\r\n\tat net.serenitybdd.rest.filters.FieldsRecordingFilter.filter(FieldsRecordingFilter.java:52)\r\n\tat io.restassured.filter.Filter$filter.call(Unknown Source)*\r\n\r\nPlease help me get rid of this error.","title":"Some exception during recording fields java.lang.RuntimeException: Some exception during recording fields","body":"<p>I am running the following code in serenity.</p>\n\n<pre><code>Response authenticationResponse = SerenityRest.given().relaxedHTTPSValidation().\n                header(\"Cookie\",**Validvalue**).\n                queryParam(\"response_type\",\"code\").\n                queryParam(\"state\",\"nothing\").\n                queryParam(\"client_id\",**Validvalue**).\n             queryParam(\"scope\",\"openid\").\n                queryParam(\"redirect_uri\",\"http%3A%2F%2Flocalhost%3A4200%2Flogin%2Fsuccess\").\n                get(\"https://account.tst.com/auth\");\n</code></pre>\n\n<p>Running serenity throws a runtime error as shown below,</p>\n\n<p><em>Some exception during recording fields\njava.lang.RuntimeException: Some exception during recording fields\n    at net.serenitybdd.rest.filters.FieldsRecordingFilter.filter(FieldsRecordingFilter.java:52)\n    at io.restassured.filter.Filter$filter.call(Unknown Source)</em></p>\n\n<p>Please help me get rid of this error.</p>\n"}],"has_more":false,"quota_max":10000,"quota_remaining":7843,"page":325,"page_size":100}
