{"items":[{"tags":["java","java-8","java.util.concurrent","concurrenthashmap"],"comments":[{"owner":{"account_id":14277734,"reputation":42,"user_id":10313286,"display_name":"ECPerth"},"score":0,"creation_date":1675835583,"post_id":75381719,"comment_id":133011397,"body_markdown":"yeah to be clear i would never expect this to work. Probably my question is sort of inappropriate as it is basically just asking to explain how concurrentHashMap and the replaceNode method are implemented in plain english...","body":"yeah to be clear i would never expect this to work. Probably my question is sort of inappropriate as it is basically just asking to explain how concurrentHashMap and the replaceNode method are implemented in plain english..."}],"answers":[{"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":2,"creation_date":1675842204,"post_id":75381847,"comment_id":133012578,"body_markdown":"The [documentation](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/concurrent/ConcurrentHashMap.html#computeIfAbsent(K,java.util.function.Function)) of `ConcurrentHashMap` is even more explicit, more restrictive: &quot;*The mapping function must not modify this map during computation.*&quot; (not just &quot;*any other mappings of this map*&quot;)","body":"The <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/concurrent/ConcurrentHashMap.html#computeIfAbsent(K,java.util.function.Function)\" rel=\"nofollow noreferrer\">documentation</a> of <code>ConcurrentHashMap</code> is even more explicit, more restrictive: &quot;<i>The mapping function must not modify this map during computation.</i>&quot; (not just &quot;<i>any other mappings of this map</i>&quot;)"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1675842819,"post_id":75381847,"comment_id":133012704,"body_markdown":"(documentation changed in Java 14)","body":"(documentation changed in Java 14)"}],"tags":[],"owner":{"account_id":401843,"reputation":89873,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1675835730,"creation_date":1675835730,"answer_id":75381847,"question_id":75381719,"body_markdown":"This is called a &#39;contract error&#39;. This happens when javadoc explicitly tells you NOT to do thing X, and leaves it at that; it does not specify what happens if you do X, just that you shouldn&#39;t do that. In this case, X is &#39;update the map in your passed-in function&#39;, and the javadoc explicitly spells out: DO NOT.\r\n\r\n&gt; so the computation should be short and simple,\r\n&gt; and must not attempt to update any other mappings of this map.\r\n\r\nWhen you perform such a contract error, anything can happen. The spec is clear: Don&#39;t. So, if you do, the spec essentially claims the ability to do _anything_. Hard-crash, whistle a dixie tune from the speakers, you name it.\r\n\r\nHence why the behaviour changed (ordinarily, java does not change its behaviours without quite a big ordeal about breaking compatibility, but here, the _spec_ behaviour has not changed, because the spec merely says &#39;do not do this, this thing does not perform according to spec if you fail to heed this warning&#39; and &#39;loop endlessly&#39; and &#39;throw an exception&#39; are both just &#39;doing unspecified broken stuff&#39; in this regard.\r\n\r\n## Okay, but _why_ does it endlessly loop?\r\n\r\nBecause concurrent hashmap is &#39;smart&#39; and uses a retry/CAS update model. Instead of acquiring a bunch of stuff, it just tries the operation without doing that, but will then check during/afterwards if it actually succeeded, or if, due to other threads modifying the same map at the same time in the same general area, its write got overwritten or otherwise didn&#39;t apply, in which case it&#39;ll do it again. In this case, removing the key is essentially &#39;eliminating a marker&#39;, which makes CHM think it updated a thing concurrently with another thing and therefore it should try again. Forever and ever.\r\n\r\nThat&#39;s what the &#39;cas&#39; in line 1656 in your linked source file (`casTabAt`) stands for: Compare-And-Set. This is a concurrency primitive that can be a lot faster than locks: &quot;If the current value is X, then set it to Y. Otherwise, do not set it at all. Tell me whether you set it or not&quot; - all that, in one atomic operation, which is speedy because CPUs tend to support it as barebones machine code. No lock acquiry required. The general principle is to check what the current value is, do some bookkeeping, then set the new value, using CAS to ensure that the &#39;state&#39; you checked is still the state we&#39;re in. If not, some other thread so happened to also be updating stuff, so, start over.\r\n\r\nThat&#39;s just one implementation. Tomorrow, it can change. You cannot rely on &#39;it will endlessly loop&#39; because the spec do not guarantee it, and indeed, in JDK17, you get an exception instead.\r\n","title":"Why does this code get stuck in infinite loop","body":"<p>This is called a 'contract error'. This happens when javadoc explicitly tells you NOT to do thing X, and leaves it at that; it does not specify what happens if you do X, just that you shouldn't do that. In this case, X is 'update the map in your passed-in function', and the javadoc explicitly spells out: DO NOT.</p>\n<blockquote>\n<p>so the computation should be short and simple,\nand must not attempt to update any other mappings of this map.</p>\n</blockquote>\n<p>When you perform such a contract error, anything can happen. The spec is clear: Don't. So, if you do, the spec essentially claims the ability to do <em>anything</em>. Hard-crash, whistle a dixie tune from the speakers, you name it.</p>\n<p>Hence why the behaviour changed (ordinarily, java does not change its behaviours without quite a big ordeal about breaking compatibility, but here, the <em>spec</em> behaviour has not changed, because the spec merely says 'do not do this, this thing does not perform according to spec if you fail to heed this warning' and 'loop endlessly' and 'throw an exception' are both just 'doing unspecified broken stuff' in this regard.</p>\n<h2>Okay, but <em>why</em> does it endlessly loop?</h2>\n<p>Because concurrent hashmap is 'smart' and uses a retry/CAS update model. Instead of acquiring a bunch of stuff, it just tries the operation without doing that, but will then check during/afterwards if it actually succeeded, or if, due to other threads modifying the same map at the same time in the same general area, its write got overwritten or otherwise didn't apply, in which case it'll do it again. In this case, removing the key is essentially 'eliminating a marker', which makes CHM think it updated a thing concurrently with another thing and therefore it should try again. Forever and ever.</p>\n<p>That's what the 'cas' in line 1656 in your linked source file (<code>casTabAt</code>) stands for: Compare-And-Set. This is a concurrency primitive that can be a lot faster than locks: &quot;If the current value is X, then set it to Y. Otherwise, do not set it at all. Tell me whether you set it or not&quot; - all that, in one atomic operation, which is speedy because CPUs tend to support it as barebones machine code. No lock acquiry required. The general principle is to check what the current value is, do some bookkeeping, then set the new value, using CAS to ensure that the 'state' you checked is still the state we're in. If not, some other thread so happened to also be updating stuff, so, start over.</p>\n<p>That's just one implementation. Tomorrow, it can change. You cannot rely on 'it will endlessly loop' because the spec do not guarantee it, and indeed, in JDK17, you get an exception instead.</p>\n"}],"owner":{"account_id":14277734,"reputation":42,"user_id":10313286,"display_name":"ECPerth"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":116,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"closed_date":1675836905,"accepted_answer_id":75381847,"answer_count":1,"score":-2,"last_activity_date":1675835730,"creation_date":1675834654,"question_id":75381719,"body_markdown":"    public void bad() {\r\n    \r\n            final ConcurrentMap&lt;String, Integer&gt; chm = new ConcurrentHashMap&lt;&gt;();\r\n    \r\n            final String key = &quot;1&quot;;\r\n    \r\n            chm.computeIfAbsent(key, __ -&gt; {\r\n                chm.remove(key);\r\n                return 1;\r\n            });\r\n    \r\n        }\r\n\r\nOf course i understand this looks very silly. It is just a super simplified version of some problematic code i was dealing with. I understand it makes no sense to do this but i am trying to understand the behaviour it causes.\r\n\r\nWhen running this code you get stuck in an infinite loop on line 1107 after invoking http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/concurrent/ConcurrentHashMap.java#l1096 \r\n\r\nI am finding it very difficult to understand exactly what is happening which is causing this. Same behaviour when done on a seperate thread but waiting\r\n\r\n    public void bad2() {\r\n    \r\n            final ConcurrentMap&lt;String, Integer&gt; chm = new ConcurrentHashMap&lt;&gt;();\r\n    \r\n            final String key = &quot;1&quot;;\r\n    \r\n            Thread worker = new Thread(() -&gt; chm.remove(&quot;1&quot;));\r\n    \r\n            chm.computeIfAbsent(key, __ -&gt; {\r\n                worker.start();\r\n                try {\r\n                    worker.join();\r\n                } catch (InterruptedException e) {\r\n                    e.printStackTrace();\r\n                }\r\n                return 1;\r\n            });\r\n        }\r\n\r\nWhy in both cases is it not that chm.remove(key) completes normally returning null and then the value of 1 is set?\r\n\r\nInterestingly this was addressed at some point and the first example throws java.lang.IllegalStateException: Recursive update when i ran with java 17.","title":"Why does this code get stuck in infinite loop","body":"<pre><code>public void bad() {\n\n        final ConcurrentMap&lt;String, Integer&gt; chm = new ConcurrentHashMap&lt;&gt;();\n\n        final String key = &quot;1&quot;;\n\n        chm.computeIfAbsent(key, __ -&gt; {\n            chm.remove(key);\n            return 1;\n        });\n\n    }\n</code></pre>\n<p>Of course i understand this looks very silly. It is just a super simplified version of some problematic code i was dealing with. I understand it makes no sense to do this but i am trying to understand the behaviour it causes.</p>\n<p>When running this code you get stuck in an infinite loop on line 1107 after invoking <a href=\"http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/concurrent/ConcurrentHashMap.java#l1096\" rel=\"nofollow noreferrer\">http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/concurrent/ConcurrentHashMap.java#l1096</a></p>\n<p>I am finding it very difficult to understand exactly what is happening which is causing this. Same behaviour when done on a seperate thread but waiting</p>\n<pre><code>public void bad2() {\n\n        final ConcurrentMap&lt;String, Integer&gt; chm = new ConcurrentHashMap&lt;&gt;();\n\n        final String key = &quot;1&quot;;\n\n        Thread worker = new Thread(() -&gt; chm.remove(&quot;1&quot;));\n\n        chm.computeIfAbsent(key, __ -&gt; {\n            worker.start();\n            try {\n                worker.join();\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n            return 1;\n        });\n    }\n</code></pre>\n<p>Why in both cases is it not that chm.remove(key) completes normally returning null and then the value of 1 is set?</p>\n<p>Interestingly this was addressed at some point and the first example throws java.lang.IllegalStateException: Recursive update when i ran with java 17.</p>\n"},{"tags":["java","xml","xslt"],"comments":[{"owner":{"account_id":1147479,"reputation":2617,"user_id":1129916,"accept_rate":90,"display_name":"quaylar"},"score":0,"creation_date":1328178782,"post_id":9110750,"comment_id":11445505,"body_markdown":"Why dont you strip the tags before passing the parameter??","body":"Why dont you strip the tags before passing the parameter??"},{"owner":{"account_id":16586,"reputation":241521,"user_id":36305,"accept_rate":100,"display_name":"Dimitre Novatchev"},"score":0,"creation_date":1328189078,"post_id":9110750,"comment_id":11448881,"body_markdown":"You need to produce a *parsed* XML document and then pass this as the value of the parameter -- not the *string* you are now passing. Read your XSLT processor documentation how passing of parameters of type XMLDocument is supported.","body":"You need to produce a <i>parsed</i> XML document and then pass this as the value of the parameter -- not the <i>string</i> you are now passing. Read your XSLT processor documentation how passing of parameters of type XMLDocument is supported."},{"owner":{"account_id":1147479,"reputation":2617,"user_id":1129916,"accept_rate":90,"display_name":"quaylar"},"score":0,"creation_date":1328189776,"post_id":9110750,"comment_id":11449120,"body_markdown":"@Marc Maybe you should update your question to reflect how you want to process this parameter - since you dont want to just display it...","body":"@Marc Maybe you should update your question to reflect how you want to process this parameter - since you dont want to just display it..."},{"owner":{"account_id":362849,"reputation":1340,"user_id":706260,"accept_rate":83,"display_name":"Marc"},"score":0,"creation_date":1328192897,"post_id":9110750,"comment_id":11450329,"body_markdown":"@quaylar: ok done sorry my first post was confused.","body":"@quaylar: ok done sorry my first post was confused."}],"answers":[{"comments":[{"owner":{"account_id":362849,"reputation":1340,"user_id":706260,"accept_rate":83,"display_name":"Marc"},"score":0,"creation_date":1328186509,"post_id":9111351,"comment_id":11447980,"body_markdown":"Ok thanks will have a look at it because I&#39;d like to pass xml so that I&#39;ll be able to select nodes in the XSL.","body":"Ok thanks will have a look at it because I&#39;d like to pass xml so that I&#39;ll be able to select nodes in the XSL."}],"tags":[],"owner":{"account_id":91947,"reputation":161829,"user_id":252228,"accept_rate":80,"display_name":"Martin Honnen"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1477050973,"creation_date":1328181256,"answer_id":9111351,"question_id":9110750,"body_markdown":"You might want to check the documentation of your XSLT processor what kind of parameter types it allows and whether and how it allows to pass in a node and not a string. If I understand http://www.saxonica.com/html/documentation/using-xsl/embedding/jaxp-transformation.html and  http://www.saxonica.com/html/documentation/javadoc/net/sf/saxon/jaxp/TransformerImpl.html#setParameter(java.lang.String,%20java.lang.Object) correctly then Saxon allows you to pass in nodes in the form of its `NodeInfo`.","title":"XSLT Processing with Java : passing xml content in parameter","body":"<p>You might want to check the documentation of your XSLT processor what kind of parameter types it allows and whether and how it allows to pass in a node and not a string. If I understand <a href=\"http://www.saxonica.com/html/documentation/using-xsl/embedding/jaxp-transformation.html\" rel=\"nofollow\">http://www.saxonica.com/html/documentation/using-xsl/embedding/jaxp-transformation.html</a> and  <a href=\"http://www.saxonica.com/html/documentation/javadoc/net/sf/saxon/jaxp/TransformerImpl.html#setParameter(java.lang.String,%20java.lang.Object)\" rel=\"nofollow\">http://www.saxonica.com/html/documentation/javadoc/net/sf/saxon/jaxp/TransformerImpl.html#setParameter(java.lang.String,%20java.lang.Object)</a> correctly then Saxon allows you to pass in nodes in the form of its <code>NodeInfo</code>.</p>\n"},{"tags":[],"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1328191012,"creation_date":1328191012,"answer_id":9113567,"question_id":9110750,"body_markdown":"If you are using Saxon, the simplest solution is to pass a StreamSource as the parameter value:\r\n\r\n    setParameter(&quot;foo&quot;, new StreamSource(new StringReader(&quot;&lt;bar&gt;baz&lt;/bar&gt;&quot;)));\r\n\r\nBut this might not work with other processors: JAXP leaves it implementation-defined what kinds of Object can be passed as parameter values.","title":"XSLT Processing with Java : passing xml content in parameter","body":"<p>If you are using Saxon, the simplest solution is to pass a StreamSource as the parameter value:</p>\n\n<pre><code>setParameter(\"foo\", new StreamSource(new StringReader(\"&lt;bar&gt;baz&lt;/bar&gt;\")));\n</code></pre>\n\n<p>But this might not work with other processors: JAXP leaves it implementation-defined what kinds of Object can be passed as parameter values.</p>\n"},{"tags":[],"owner":{"account_id":190269,"reputation":18134,"user_id":430128,"accept_rate":78,"display_name":"Raman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675835621,"creation_date":1675835621,"answer_id":75381831,"question_id":9110750,"body_markdown":"If you are using Xalan (the built-in implementation in the Java JDK), then pass a &quot;URI&quot; as the parameter value, which is any value you wish that is mapped in the subsequent step:\r\n\r\n```kotlin\r\nsetParameter(&quot;foo&quot;, &quot;myxml&quot;)\r\n```\r\n\r\nNow, define a `URIResolver` on the transformer (example in Kotlin, but the java translation is straightforward):\r\n\r\n```kotlin\r\nval transformer = factory.newTransformer(...)\r\ntransformer.setURIResolver { href, base -&gt;\r\n  when (href) {\r\n    &quot;myxml&quot; -&gt; StreamSource(StringReader(&quot;&lt;bar&gt;baz&lt;/bar&gt;&quot;))\r\n    else -&gt; error(&quot;Cannot resolve href $href&quot;)\r\n  }\r\n}\r\n```\r\n\r\nDefine as many URIs and mappings to `Source`&#39;s as necessary.\r\n\r\nIn the stylesheet, use the `document` function to pass the URI String parameter to the custom `URIResolver` and transform it into an XML document:\r\n\r\n```xsl\r\n  &lt;xsl:param name=&quot;foo&quot; /&gt;\r\n  &lt;xsl:param name=&quot;fooDoc&quot; select=&quot;document($foo)&quot; /&gt;\r\n```\r\n","title":"XSLT Processing with Java : passing xml content in parameter","body":"<p>If you are using Xalan (the built-in implementation in the Java JDK), then pass a &quot;URI&quot; as the parameter value, which is any value you wish that is mapped in the subsequent step:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>setParameter(&quot;foo&quot;, &quot;myxml&quot;)\n</code></pre>\n<p>Now, define a <code>URIResolver</code> on the transformer (example in Kotlin, but the java translation is straightforward):</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val transformer = factory.newTransformer(...)\ntransformer.setURIResolver { href, base -&gt;\n  when (href) {\n    &quot;myxml&quot; -&gt; StreamSource(StringReader(&quot;&lt;bar&gt;baz&lt;/bar&gt;&quot;))\n    else -&gt; error(&quot;Cannot resolve href $href&quot;)\n  }\n}\n</code></pre>\n<p>Define as many URIs and mappings to <code>Source</code>'s as necessary.</p>\n<p>In the stylesheet, use the <code>document</code> function to pass the URI String parameter to the custom <code>URIResolver</code> and transform it into an XML document:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>  &lt;xsl:param name=&quot;foo&quot; /&gt;\n  &lt;xsl:param name=&quot;fooDoc&quot; select=&quot;document($foo)&quot; /&gt;\n</code></pre>\n"}],"owner":{"account_id":362849,"reputation":1340,"user_id":706260,"accept_rate":83,"display_name":"Marc"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6996,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1675835621,"creation_date":1328178595,"question_id":9110750,"body_markdown":"I would like to pass a parameter containing *XML* content when processing *XSLT*.\r\nHere is my code:\r\n\r\n    import javax.xml.transform.Result; \r\n    import javax.xml.transform.Source; \r\n    import javax.xml.transform.Transformer; \r\n    import javax.xml.transform.TransformerException; \r\n    import javax.xml.transform.TransformerFactory; \r\n    import javax.xml.transform.stream.StreamResult; \r\n    import javax.xml.transform.stream.StreamSource; \r\n\r\n    File xmlFile = new File(xmlFilePath);\r\n    File xsltFile = new File(xslFilePath);\r\n    Source xmlSource = new StreamSource(xmlFile);\r\n    Result result = new StreamResult(System.out);\r\n\r\n    TransformerFactory transFact = TransformerFactory.newInstance();\r\n    Transformer trans = transFact.newTransformer(xsltSource);\r\n    trans.setParameter(&quot;foo&quot;, &quot;&lt;bar&gt;Hello1&lt;/bar&gt;&lt;bar&gt;Hello2&lt;/bar&gt;&quot;);\r\n    trans.transform(xmlSource, result);\r\n\r\nThen I&#39;d like to select the values contained in the &#39;bar&#39; tag in my XSL file.\r\n\r\n    &lt;xsl:param name=&quot;foo&quot;/&gt;\r\n    ...\r\n    &lt;xsl:value-of select=&quot;$foo//foo[1]&quot; /&gt;\r\n\r\nBut this doesn&#39;t work, I get this error message:\r\n\r\n    org.apache.xpath.objects.XString cannot be cast to org.apache.xpath.objects.XNodeSet\r\n\r\nSo I guess I should pass an XML object to my setParameter method, but which one?\r\nI can&#39;t find a simple example how to create an XNodeSet object...\r\n\r\nHow can I do that?\r\nThanks.","title":"XSLT Processing with Java : passing xml content in parameter","body":"<p>I would like to pass a parameter containing <em>XML</em> content when processing <em>XSLT</em>.\nHere is my code:</p>\n\n<pre><code>import javax.xml.transform.Result; \nimport javax.xml.transform.Source; \nimport javax.xml.transform.Transformer; \nimport javax.xml.transform.TransformerException; \nimport javax.xml.transform.TransformerFactory; \nimport javax.xml.transform.stream.StreamResult; \nimport javax.xml.transform.stream.StreamSource; \n\nFile xmlFile = new File(xmlFilePath);\nFile xsltFile = new File(xslFilePath);\nSource xmlSource = new StreamSource(xmlFile);\nResult result = new StreamResult(System.out);\n\nTransformerFactory transFact = TransformerFactory.newInstance();\nTransformer trans = transFact.newTransformer(xsltSource);\ntrans.setParameter(\"foo\", \"&lt;bar&gt;Hello1&lt;/bar&gt;&lt;bar&gt;Hello2&lt;/bar&gt;\");\ntrans.transform(xmlSource, result);\n</code></pre>\n\n<p>Then I'd like to select the values contained in the 'bar' tag in my XSL file.</p>\n\n<pre><code>&lt;xsl:param name=\"foo\"/&gt;\n...\n&lt;xsl:value-of select=\"$foo//foo[1]\" /&gt;\n</code></pre>\n\n<p>But this doesn't work, I get this error message:</p>\n\n<pre><code>org.apache.xpath.objects.XString cannot be cast to org.apache.xpath.objects.XNodeSet\n</code></pre>\n\n<p>So I guess I should pass an XML object to my setParameter method, but which one?\nI can't find a simple example how to create an XNodeSet object...</p>\n\n<p>How can I do that?\nThanks.</p>\n"},{"tags":["javascript","java","open-source","end-of-life"],"comments":[{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":4,"creation_date":1457097328,"post_id":35796996,"comment_id":59263511,"body_markdown":"If you find a way I would be interested as we provide software and would use this provide such an announcement.","body":"If you find a way I would be interested as we provide software and would use this provide such an announcement."},{"owner":{"account_id":340001,"reputation":563,"user_id":669789,"accept_rate":73,"display_name":"user669789"},"score":0,"creation_date":1611247009,"post_id":35796996,"comment_id":116395361,"body_markdown":"https://search.maven.org/classic/#api to find latest version, but not EOL","body":"<a href=\"https://search.maven.org/classic/#api\" rel=\"nofollow noreferrer\">search.maven.org/classic/#api</a> to find latest version, but not EOL"},{"owner":{"account_id":307264,"reputation":2065,"user_id":618465,"accept_rate":95,"display_name":"Navigatron"},"score":1,"creation_date":1639058606,"post_id":35796996,"comment_id":124255254,"body_markdown":"I&#39;m assuming for something like this to work (or exist) there would also need to be some sort of common/standard way of communicating EOL or new versions. At the moment it seems random for some libraries, its either on a blog, RSS feed, mentioned on ReadMe.md&#39;s or logged as issues in whatever bug tracker they use.","body":"I&#39;m assuming for something like this to work (or exist) there would also need to be some sort of common/standard way of communicating EOL or new versions. At the moment it seems random for some libraries, its either on a blog, RSS feed, mentioned on ReadMe.md&#39;s or logged as issues in whatever bug tracker they use."}],"answers":[{"tags":[],"owner":{"account_id":19600884,"reputation":55,"user_id":14345769,"display_name":"Siyabend &#214;zdemir"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1675835546,"creation_date":1675835546,"answer_id":75381824,"question_id":35796996,"body_markdown":"**Yes**, there are automated solutions that can help determine the EOL/EOS notices for libraries. However, it might depend on the type of library you are using, whether it is open source or proprietary.\r\n\r\nFor **open source libraries**, you can use services like the npm registry, PyPI (Python Package Index), or RubyGems to track updates and see when a library has reached its end of life or end of support. Additionally, some library maintainers may publish EOL/EOS notices on their own websites, or in their release notes.\r\n\r\nFor **proprietary libraries**, you can check with the vendor or the library&#39;s documentation for information on its end of life or end of support. You could also reach out to the vendor&#39;s customer support for any updates on the library&#39;s status.\r\n\r\nIn summary, **there is no single solution** for tracking EOL/EOS notices for all libraries, but using a combination of sources such as the library&#39;s official website, release notes, and vendor support can help you keep track of the status of the libraries you use.","title":"Is there an automated way to determine (or find) end of life/end of support notices for libraries?","body":"<p><strong>Yes</strong>, there are automated solutions that can help determine the EOL/EOS notices for libraries. However, it might depend on the type of library you are using, whether it is open source or proprietary.</p>\n<p>For <strong>open source libraries</strong>, you can use services like the npm registry, PyPI (Python Package Index), or RubyGems to track updates and see when a library has reached its end of life or end of support. Additionally, some library maintainers may publish EOL/EOS notices on their own websites, or in their release notes.</p>\n<p>For <strong>proprietary libraries</strong>, you can check with the vendor or the library's documentation for information on its end of life or end of support. You could also reach out to the vendor's customer support for any updates on the library's status.</p>\n<p>In summary, <strong>there is no single solution</strong> for tracking EOL/EOS notices for all libraries, but using a combination of sources such as the library's official website, release notes, and vendor support can help you keep track of the status of the libraries you use.</p>\n"}],"owner":{"account_id":397090,"reputation":3123,"user_id":761035,"accept_rate":55,"display_name":"Shiraaz.M"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2342,"favorite_count":0,"down_vote_count":1,"up_vote_count":12,"answer_count":1,"score":11,"last_activity_date":1675835546,"creation_date":1457097161,"question_id":35796996,"body_markdown":"Is there an automated way to determine or find the end of life (EOL)/end of support (EOS) notices for libraries? \r\n\r\nThe specific context behind this:\r\n\r\nOur software uses about 50+ libraries as well as a few platforms. What I can&#39;t seem to find is an automated solution that tells you whether a particular library has reached end of support.\r\n\r\nThe current solution I came across is Black Duck. My understanding (after using Code Center only) is that Black Duck is more concerned about OSS governance and does not include proprietary software. Black Duck does inform the user about security updates and license conflicts, but from what I can see it does not inform the user of EOL/EOS. \r\n\r\nOur **current workaround** at the moment is to do the following:\r\n\r\n* Have a list of all the libraries that we use (we do this with Artifactory)\r\n* Periodically check the library website for any notices\r\n* Then maintain this in some form (currently a wiki page, which is a nightmare)\r\n\r\n**For terminology purposes:**\r\n\r\nA library either a jar or npm module","title":"Is there an automated way to determine (or find) end of life/end of support notices for libraries?","body":"<p>Is there an automated way to determine or find the end of life (EOL)/end of support (EOS) notices for libraries? </p>\n\n<p>The specific context behind this:</p>\n\n<p>Our software uses about 50+ libraries as well as a few platforms. What I can't seem to find is an automated solution that tells you whether a particular library has reached end of support.</p>\n\n<p>The current solution I came across is Black Duck. My understanding (after using Code Center only) is that Black Duck is more concerned about OSS governance and does not include proprietary software. Black Duck does inform the user about security updates and license conflicts, but from what I can see it does not inform the user of EOL/EOS. </p>\n\n<p>Our <strong>current workaround</strong> at the moment is to do the following:</p>\n\n<ul>\n<li>Have a list of all the libraries that we use (we do this with Artifactory)</li>\n<li>Periodically check the library website for any notices</li>\n<li>Then maintain this in some form (currently a wiki page, which is a nightmare)</li>\n</ul>\n\n<p><strong>For terminology purposes:</strong></p>\n\n<p>A library either a jar or npm module</p>\n"},{"tags":["java","file","csv","bufferedreader","bufferedwriter"],"comments":[{"owner":{"account_id":5695443,"reputation":916,"user_id":4502095,"accept_rate":81,"display_name":"bwright"},"score":1,"creation_date":1584454157,"post_id":60724017,"comment_id":107437403,"body_markdown":"do you have to have all lines in memory? otherwise you could read line by line and do your processing.","body":"do you have to have all lines in memory? otherwise you could read line by line and do your processing."},{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":1,"creation_date":1584454298,"post_id":60724017,"comment_id":107437488,"body_markdown":"You could also try increasing the heap size","body":"You could also try increasing the heap size"},{"owner":{"account_id":11400326,"reputation":33,"user_id":8357482,"display_name":"Bora Ulu"},"score":0,"creation_date":1584454689,"post_id":60724017,"comment_id":107437708,"body_markdown":"@bwright I created a list of DTO which consists of a lines as you said. This question is my another option to read that high size CSV file. Do you have another option rather than splitting file into pieces?","body":"@bwright I created a list of DTO which consists of a lines as you said. This question is my another option to read that high size CSV file. Do you have another option rather than splitting file into pieces?"},{"owner":{"account_id":11400326,"reputation":33,"user_id":8357482,"display_name":"Bora Ulu"},"score":0,"creation_date":1584454769,"post_id":60724017,"comment_id":107437752,"body_markdown":"@ControlAltDel that is not a good option as size of file is changeable. I can increase it but tomorrow it could throw exception again. It&#39;s not sure.","body":"@ControlAltDel that is not a good option as size of file is changeable. I can increase it but tomorrow it could throw exception again. It&#39;s not sure."},{"owner":{"account_id":4342327,"reputation":145474,"user_id":3545273,"accept_rate":100,"display_name":"Serge Ballesta"},"score":1,"creation_date":1584455027,"post_id":60724017,"comment_id":107437902,"body_markdown":"You are supposed to show a honest attempt. The goals are to prove that you have researched and ensure that any solution provided by someone else will smoothly fit into your application.","body":"You are supposed to show a honest attempt. The goals are to prove that you have researched and ensure that any solution provided by someone else will smoothly fit into your application."},{"owner":{"account_id":1735730,"reputation":1154,"user_id":1684254,"display_name":"Akin Okegbile"},"score":0,"creation_date":1584455031,"post_id":60724017,"comment_id":107437905,"body_markdown":"Also, You can not split the file, and process manageable chunks of it.","body":"Also, You can not split the file, and process manageable chunks of it."},{"owner":{"account_id":2805582,"reputation":5186,"user_id":2412895,"accept_rate":47,"display_name":"KarelG"},"score":1,"creation_date":1584455074,"post_id":60724017,"comment_id":107437932,"body_markdown":"Java has mechanisms (for example [`Files.lines`](https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#lines-java.nio.file.Path-)) to work with these files. Process it as a stream by reading line by line.","body":"Java has mechanisms (for example <a href=\"https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#lines-java.nio.file.Path-\" rel=\"nofollow noreferrer\"><code>Files.lines</code></a>) to work with these files. Process it as a stream by reading line by line."}],"answers":[{"tags":[],"owner":{"account_id":15777655,"reputation":1762,"user_id":11385052,"display_name":"Ryan"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1584456869,"creation_date":1584456869,"answer_id":60724850,"question_id":60724017,"body_markdown":"\r\n    public static void splitLargeFile(final String fileName, \r\n\t\t\t\t\t\t\t\t\t   final String extension, \r\n\t\t\t\t\t\t\t\t\t   final int maxLines,\r\n\t\t\t\t\t\t\t\t\t   final boolean deleteOriginalFile) {\r\n\t\t\r\n\t\ttry (Scanner s = new Scanner(new FileReader(String.format(&quot;%s.%s&quot;, fileName, extension)))) {\r\n\t\t\tint file = 0;\r\n\t\t\tint cnt = 0;\r\n\t\t\tBufferedWriter writer = new BufferedWriter(new FileWriter(String.format(&quot;%s_%d.%s&quot;, fileName, file, extension)));\r\n\t\t\t\r\n\t\t\twhile (s.hasNext()) {\r\n\t\t\t\twriter.write(s.next() + System.lineSeparator());\r\n\t\t\t\tif (++cnt == maxLines &amp;&amp; s.hasNext()) {\r\n\t\t\t\t\twriter.close();\r\n\t\t\t\t\twriter = new BufferedWriter(new  FileWriter(String.format(&quot;%s_%d.%s&quot;, fileName, ++file, extension)));\r\n\t\t\t\t\tcnt = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\twriter.close();\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\t\r\n\t\tif (deleteOriginalFile) {\r\n\t\t\ttry {\r\n\t\t\t\tFile f = new File(String.format(&quot;%s.%s&quot;, fileName, extension));\r\n\t\t\t\tf.delete();\r\n\t\t\t} catch (Exception e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t}\r\n\t}","title":"How can I split a CSV file into different CSV files by line in Java?","body":"<pre><code>public static void splitLargeFile(final String fileName, \n                                   final String extension, \n                                   final int maxLines,\n                                   final boolean deleteOriginalFile) {\n\n    try (Scanner s = new Scanner(new FileReader(String.format(\"%s.%s\", fileName, extension)))) {\n        int file = 0;\n        int cnt = 0;\n        BufferedWriter writer = new BufferedWriter(new FileWriter(String.format(\"%s_%d.%s\", fileName, file, extension)));\n\n        while (s.hasNext()) {\n            writer.write(s.next() + System.lineSeparator());\n            if (++cnt == maxLines &amp;&amp; s.hasNext()) {\n                writer.close();\n                writer = new BufferedWriter(new  FileWriter(String.format(\"%s_%d.%s\", fileName, ++file, extension)));\n                cnt = 0;\n            }\n        }\n        writer.close();\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n\n    if (deleteOriginalFile) {\n        try {\n            File f = new File(String.format(\"%s.%s\", fileName, extension));\n            f.delete();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":399158,"reputation":1536,"user_id":764312,"display_name":"dagelf"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1587820203,"creation_date":1584457600,"answer_id":60725067,"question_id":60724017,"body_markdown":"If you&#39;re on Linux and you can run the CSV through a script first, then you can use &quot;split&quot;:\r\n\r\n    $ split -l 100000 big.csv small-\r\n\r\nThis generates files named small-aa, small-ab, small-ac... To rename these to csv&#39;s if needed:\r\n\r\n    $ for a in small-*; do \r\n        mv $a $a.csv;                # rename split files to .csv \r\n        java MyCSVProcessor $a.csv;  # or just process them anyways \r\n    done\r\n\r\nTry this for additional options:\r\n\r\n    $ split -h\r\n\r\n    -a –suffix-length=N use suffixes of length N (default 2)\r\n    -b –bytes=SIZE put SIZE bytes per output file\r\n    -C –line-bytes=SIZE put at most SIZE bytes of lines per output file\r\n    -d –numeric-suffixes use numeric suffixes instead of alphabetic\r\n    -l –lines=NUMBER put NUMBER lines per output file\r\n\r\nThis is however a poor mitigation for your problem - the reason your CSV reader module is running out of memory, is because it&#39;s either reading the whole file into memory before splitting it, or it&#39;s doing that and keeping your processed output in memory. To make your code more portable and universally runnable, you should consider processing one line at a time - and splitting the input yourself, line by line. (From https://stackabuse.com/reading-and-writing-csvs-in-java/)  \r\n\r\n    BufferedReader csvReader = new BufferedReader(new FileReader(pathToCsv));\r\n    while ((row = csvReader.readLine()) != null) {\r\n        String[] data = row.split(&quot;,&quot;);\r\n        // do something with the data\r\n    }\r\n    csvReader.close();\r\n\r\nCaveat with the above code is that quoted commas will just be treated as new columns - you will have to add some additional processing if your CSV data contains quoted commas. \r\n\r\nOf course, if you really want to use your existing code, and just want to split the file, you can adapt the above:\r\n\r\n    import java.io.*;\r\n    \r\n    public class split {\r\n    \r\n        static String CSVFile=&quot;test.csv&quot;;\r\n        static String row;\r\n        static BufferedReader csvReader;\r\n        static PrintWriter csvWriter;\r\n        \r\n        public static void main(String[] args) throws IOException {   \r\n        \r\n        csvReader = new BufferedReader(new FileReader(CSVFile));\r\n    \r\n        int line = 0;\r\n        while ((row = csvReader.readLine()) != null) {\r\n           if (line % 100000 == 0) {  // maximum lines per file\r\n              if (line&gt;0) { csvWriter.close(); }\r\n              csvWriter = new PrintWriter(&quot;cut-&quot;+Integer.toString(line)+CSVFile);\r\n           }\r\n           csvWriter.println(row);\r\n            // String[] data = row.split(&quot;,&quot;);\r\n            // do something with the data\r\n           line++;\r\n        }\r\n        csvWriter.close();\r\n        csvReader.close();\r\n    \r\n        }\r\n    }\r\n\r\nI chose PrintWriter above FileWriter or BufferedWriter because it automatically prints the relevent newlines - and I would presume that it&#39;s buffered... I&#39;ve not written anything in Java in 20 years, so I bet you can improve on the above. ","title":"How can I split a CSV file into different CSV files by line in Java?","body":"<p>If you're on Linux and you can run the CSV through a script first, then you can use \"split\":</p>\n\n<pre><code>$ split -l 100000 big.csv small-\n</code></pre>\n\n<p>This generates files named small-aa, small-ab, small-ac... To rename these to csv's if needed:</p>\n\n<pre><code>$ for a in small-*; do \n    mv $a $a.csv;                # rename split files to .csv \n    java MyCSVProcessor $a.csv;  # or just process them anyways \ndone\n</code></pre>\n\n<p>Try this for additional options:</p>\n\n<pre><code>$ split -h\n\n-a –suffix-length=N use suffixes of length N (default 2)\n-b –bytes=SIZE put SIZE bytes per output file\n-C –line-bytes=SIZE put at most SIZE bytes of lines per output file\n-d –numeric-suffixes use numeric suffixes instead of alphabetic\n-l –lines=NUMBER put NUMBER lines per output file\n</code></pre>\n\n<p>This is however a poor mitigation for your problem - the reason your CSV reader module is running out of memory, is because it's either reading the whole file into memory before splitting it, or it's doing that and keeping your processed output in memory. To make your code more portable and universally runnable, you should consider processing one line at a time - and splitting the input yourself, line by line. (From <a href=\"https://stackabuse.com/reading-and-writing-csvs-in-java/\" rel=\"nofollow noreferrer\">https://stackabuse.com/reading-and-writing-csvs-in-java/</a>)  </p>\n\n<pre><code>BufferedReader csvReader = new BufferedReader(new FileReader(pathToCsv));\nwhile ((row = csvReader.readLine()) != null) {\n    String[] data = row.split(\",\");\n    // do something with the data\n}\ncsvReader.close();\n</code></pre>\n\n<p>Caveat with the above code is that quoted commas will just be treated as new columns - you will have to add some additional processing if your CSV data contains quoted commas. </p>\n\n<p>Of course, if you really want to use your existing code, and just want to split the file, you can adapt the above:</p>\n\n<pre><code>import java.io.*;\n\npublic class split {\n\n    static String CSVFile=\"test.csv\";\n    static String row;\n    static BufferedReader csvReader;\n    static PrintWriter csvWriter;\n\n    public static void main(String[] args) throws IOException {   \n\n    csvReader = new BufferedReader(new FileReader(CSVFile));\n\n    int line = 0;\n    while ((row = csvReader.readLine()) != null) {\n       if (line % 100000 == 0) {  // maximum lines per file\n          if (line&gt;0) { csvWriter.close(); }\n          csvWriter = new PrintWriter(\"cut-\"+Integer.toString(line)+CSVFile);\n       }\n       csvWriter.println(row);\n        // String[] data = row.split(\",\");\n        // do something with the data\n       line++;\n    }\n    csvWriter.close();\n    csvReader.close();\n\n    }\n}\n</code></pre>\n\n<p>I chose PrintWriter above FileWriter or BufferedWriter because it automatically prints the relevent newlines - and I would presume that it's buffered... I've not written anything in Java in 20 years, so I bet you can improve on the above. </p>\n"},{"tags":[],"owner":{"account_id":1652686,"reputation":1,"user_id":1522943,"display_name":"Shivam Maralay"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675834942,"creation_date":1675834942,"answer_id":75381753,"question_id":60724017,"body_markdown":"I created a simple fun to create a childcsv from parent based on the start and last Range. It can be used as splitter based on line range.\r\n\r\n    public static void createcsv(String csvPath,String newcsvPath, int startRange, int lastRange) {\r\n        csvPath = csvPath.trim();\r\n        String childcsvPath = newcsvPath.trim();\r\n        Scanner sc = null;\r\n        FileWriter writer = null;\r\n        int count = 0;\r\n        // Iterate to startRange Location\r\n        try {\r\n            sc = new Scanner(new File(csvPath));\r\n            sc.useDelimiter(&quot;,&quot;); // sets the delimiter pattern\r\n            ArrayList&lt;String&gt; newCsv = new ArrayList&lt;String&gt;();\r\n\r\n            while (sc.hasNextLine()) // returns a boolean value\r\n            {\r\n                String value = sc.nextLine();\r\n                count++;\r\n                if (count &gt; lastRange)\r\n                    break;\r\n\r\n                else if (count &gt;= startRange) {\r\n                    newCsv.add(value);\r\n                } else\r\n                    continue;\r\n            }\r\n\r\n            writer = new FileWriter(childcsvPath);\r\n\r\n            for (int j = 0; j &lt; newCsv.size(); j++) {\r\n                writer.append(newCsv.get(j));\r\n                writer.append(&quot;\\n&quot;);\r\n            }\r\n        } catch (Exception e) {\r\n            System.out.print(&quot;Exception Found&quot; + e);\r\n        } finally {\r\n            if (sc != null) {\r\n                try {\r\n                    sc.close();\r\n                    writer.close();\r\n                } catch (Exception e) {\r\n                }\r\n            }\r\n        }\r\n    }","title":"How can I split a CSV file into different CSV files by line in Java?","body":"<p>I created a simple fun to create a childcsv from parent based on the start and last Range. It can be used as splitter based on line range.</p>\n<pre><code>public static void createcsv(String csvPath,String newcsvPath, int startRange, int lastRange) {\n    csvPath = csvPath.trim();\n    String childcsvPath = newcsvPath.trim();\n    Scanner sc = null;\n    FileWriter writer = null;\n    int count = 0;\n    // Iterate to startRange Location\n    try {\n        sc = new Scanner(new File(csvPath));\n        sc.useDelimiter(&quot;,&quot;); // sets the delimiter pattern\n        ArrayList&lt;String&gt; newCsv = new ArrayList&lt;String&gt;();\n\n        while (sc.hasNextLine()) // returns a boolean value\n        {\n            String value = sc.nextLine();\n            count++;\n            if (count &gt; lastRange)\n                break;\n\n            else if (count &gt;= startRange) {\n                newCsv.add(value);\n            } else\n                continue;\n        }\n\n        writer = new FileWriter(childcsvPath);\n\n        for (int j = 0; j &lt; newCsv.size(); j++) {\n            writer.append(newCsv.get(j));\n            writer.append(&quot;\\n&quot;);\n        }\n    } catch (Exception e) {\n        System.out.print(&quot;Exception Found&quot; + e);\n    } finally {\n        if (sc != null) {\n            try {\n                sc.close();\n                writer.close();\n            } catch (Exception e) {\n            }\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":11400326,"reputation":33,"user_id":8357482,"display_name":"Bora Ulu"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6211,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":60724850,"answer_count":3,"score":2,"last_activity_date":1675834942,"creation_date":1584454091,"question_id":60724017,"body_markdown":"I have a class which reads a CSV file but when size of file is high, the program throws `Java heap size` error, so I need to split that file into pieces and transfer lines to other files according to line size.\r\n\r\nFor example;\r\nI have a file of 500 000 lines and I&#39;m dividing it into 5 files by 100 000 lines.  So I have 5 files consisting of 100 000 lines so that I can read them.\r\n\r\nI couldn&#39;t find a way to do that so it would be nice if I see example lines of code.","title":"How can I split a CSV file into different CSV files by line in Java?","body":"<p>I have a class which reads a CSV file but when size of file is high, the program throws <code>Java heap size</code> error, so I need to split that file into pieces and transfer lines to other files according to line size.</p>\n\n<p>For example;\nI have a file of 500 000 lines and I'm dividing it into 5 files by 100 000 lines.  So I have 5 files consisting of 100 000 lines so that I can read them.</p>\n\n<p>I couldn't find a way to do that so it would be nice if I see example lines of code.</p>\n"},{"tags":["java","docker","maven"],"comments":[{"owner":{"account_id":11888198,"reputation":940,"user_id":8699916,"display_name":"perepm"},"score":0,"creation_date":1675835149,"post_id":75381741,"comment_id":133011337,"body_markdown":"Hi! Does you app run if you execute the CMD outside docker? `java -Djava.security.egd=file:/dev/./urandom -jar ./myproj.jar`","body":"Hi! Does you app run if you execute the CMD outside docker? <code>java -Djava.security.egd=file:&#47;dev&#47;.&#47;urandom -jar .&#47;myproj.jar</code>"},{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":2,"creation_date":1675835590,"post_id":75381741,"comment_id":133011401,"body_markdown":"You aren&#39;t providing runtime dependencies. You can use the [maven-shade-plugin](https://stackoverflow.com/a/16222965/2970947) to build a &quot;fat&quot; (or [uber](https://maven.apache.org/plugins/maven-shade-plugin/)) jar.","body":"You aren&#39;t providing runtime dependencies. You can use the <a href=\"https://stackoverflow.com/a/16222965/2970947\">maven-shade-plugin</a> to build a &quot;fat&quot; (or <a href=\"https://maven.apache.org/plugins/maven-shade-plugin/\" rel=\"nofollow noreferrer\">uber</a>) jar."}],"owner":{"account_id":8576992,"reputation":141,"user_id":6426041,"display_name":"Feras AlTuraigi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1508,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675834842,"creation_date":1675834842,"question_id":75381741,"body_markdown":"I have an issue running a docker container. I am using Java 17 with Maven.\r\n\r\nI have the following Dockerfile:\r\n\r\n```\r\n\r\nFROM maven:3.8.3-openjdk-17 as builder\r\n\r\nWORKDIR /workdir\r\nCOPY pom.xml .\r\nCOPY src ./src\r\n\r\n\r\nRUN mvn package -DskipTests\r\n\r\n\r\nFROM openjdk:17.0-jdk-slim\r\n\r\nCOPY --from=builder /workdir/target/myproj-*.jar /myproj.jar\r\n\r\n\r\nCMD [&quot;java&quot; , &quot;-Djava.security.egd=file:/dev/./urandom&quot;, &quot;-jar&quot;, &quot;/myproj.jar&quot;]\r\n```\r\n\r\nThe below pom.xml file:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n  &lt;groupId&gt;com.myproj&lt;/groupId&gt;\r\n  &lt;artifactId&gt;myproj&lt;/artifactId&gt;\r\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n  &lt;name&gt;myproj&lt;/name&gt;\r\n\r\n  &lt;properties&gt;\r\n    &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n    &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n  &lt;/properties&gt;\r\n\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.hellokaton&lt;/groupId&gt;\r\n        &lt;artifactId&gt;blade-core&lt;/artifactId&gt;\r\n        &lt;version&gt;2.1.2.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;junit&lt;/groupId&gt;\r\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n      &lt;version&gt;4.11&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n\r\n  &lt;build&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;!-- Build an executable JAR --&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.1.0&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;archive&gt;\r\n            &lt;manifest&gt;\r\n              &lt;mainClass&gt;com.myproj.App&lt;/mainClass&gt;\r\n            &lt;/manifest&gt;\r\n          &lt;/archive&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\nAnd finally the below main class:\r\n\r\n```\r\npackage com.myproj;\r\n\r\nimport java.io.IOException;\r\n\r\nimport com.hellokaton.blade.Blade;\r\n\r\n\r\npublic class App \r\n{\r\n    public static void main(String[] args )\r\n    {\r\n        try {\r\n            Blade blade = Blade.create();\r\n            blade.start();\r\n            \r\n        } catch (IOException e) {\r\n            \r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n}\r\n```\r\nWhen I run the below commands on docker:\r\n```\r\ndocker build . --tag gcr.io/myproj-c39b9/myproj \r\ndocker run -d -p 80:80 gcr.io/myproj-c39b9/myproj\r\n```\r\n\r\nI get this error\r\n\r\n```\r\n2023-02-08 08:19:58 Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: com/hellokaton/blade/Blade\r\n2023-02-08 08:19:58 at com.myproj.App.main(App.java:14)\r\n2023-02-08 08:19:58 Caused by: java.lang.ClassNotFoundException: com.hellokaton.blade.Blade\r\n2023-02-08 08:19:58 at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\r\n2023-02-08 08:19:58 at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\r\n2023-02-08 08:19:58 at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\r\n2023-02-08 08:19:58 ... 1 more\r\n```\r\n\r\nI am not sure what is missing here. I would guess it is something related to classpath setting.\r\n\r\nI need your usual support please.\r\n\r\nThank you","title":"Issue using Dockerfile with Java and Maven as build tool","body":"<p>I have an issue running a docker container. I am using Java 17 with Maven.</p>\n<p>I have the following Dockerfile:</p>\n<pre><code>\nFROM maven:3.8.3-openjdk-17 as builder\n\nWORKDIR /workdir\nCOPY pom.xml .\nCOPY src ./src\n\n\nRUN mvn package -DskipTests\n\n\nFROM openjdk:17.0-jdk-slim\n\nCOPY --from=builder /workdir/target/myproj-*.jar /myproj.jar\n\n\nCMD [&quot;java&quot; , &quot;-Djava.security.egd=file:/dev/./urandom&quot;, &quot;-jar&quot;, &quot;/myproj.jar&quot;]\n</code></pre>\n<p>The below pom.xml file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;com.myproj&lt;/groupId&gt;\n  &lt;artifactId&gt;myproj&lt;/artifactId&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n  &lt;name&gt;myproj&lt;/name&gt;\n\n  &lt;properties&gt;\n    &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.hellokaton&lt;/groupId&gt;\n        &lt;artifactId&gt;blade-core&lt;/artifactId&gt;\n        &lt;version&gt;2.1.2.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;4.11&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;!-- Build an executable JAR --&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;archive&gt;\n            &lt;manifest&gt;\n              &lt;mainClass&gt;com.myproj.App&lt;/mainClass&gt;\n            &lt;/manifest&gt;\n          &lt;/archive&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n\n</code></pre>\n<p>And finally the below main class:</p>\n<pre><code>package com.myproj;\n\nimport java.io.IOException;\n\nimport com.hellokaton.blade.Blade;\n\n\npublic class App \n{\n    public static void main(String[] args )\n    {\n        try {\n            Blade blade = Blade.create();\n            blade.start();\n            \n        } catch (IOException e) {\n            \n            e.printStackTrace();\n        }\n\n    }\n}\n</code></pre>\n<p>When I run the below commands on docker:</p>\n<pre><code>docker build . --tag gcr.io/myproj-c39b9/myproj \ndocker run -d -p 80:80 gcr.io/myproj-c39b9/myproj\n</code></pre>\n<p>I get this error</p>\n<pre><code>2023-02-08 08:19:58 Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: com/hellokaton/blade/Blade\n2023-02-08 08:19:58 at com.myproj.App.main(App.java:14)\n2023-02-08 08:19:58 Caused by: java.lang.ClassNotFoundException: com.hellokaton.blade.Blade\n2023-02-08 08:19:58 at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\n2023-02-08 08:19:58 at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\n2023-02-08 08:19:58 at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\n2023-02-08 08:19:58 ... 1 more\n</code></pre>\n<p>I am not sure what is missing here. I would guess it is something related to classpath setting.</p>\n<p>I need your usual support please.</p>\n<p>Thank you</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":1,"creation_date":1675830562,"post_id":75381378,"comment_id":133010781,"body_markdown":"How are you running it and specifying the classpath?","body":"How are you running it and specifying the classpath?"},{"owner":{"account_id":7788702,"reputation":836,"user_id":5892518,"display_name":"Harsh"},"score":1,"creation_date":1675830757,"post_id":75381378,"comment_id":133010804,"body_markdown":"Does this answer your question? [Why Getting NoClassDefFound error for JedisConnection when using Spring Redis](https://stackoverflow.com/questions/33128318/why-getting-noclassdeffound-error-for-jedisconnection-when-using-spring-redis)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/33128318/why-getting-noclassdeffound-error-for-jedisconnection-when-using-spring-redis\">Why Getting NoClassDefFound error for JedisConnection when using Spring Redis</a>"},{"owner":{"account_id":22866153,"reputation":158,"user_id":17009760,"display_name":"Pioter88"},"score":0,"creation_date":1675834482,"post_id":75381378,"comment_id":133011245,"body_markdown":"You should also look for newer tutorial.... This is probably around 2006 basing on Java 1.6 in setup.","body":"You should also look for newer tutorial.... This is probably around 2006 basing on Java 1.6 in setup."}],"answers":[{"tags":[],"owner":{"account_id":14584814,"reputation":151,"user_id":10534024,"display_name":"Alexandr Ter"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675833892,"creation_date":1675833892,"answer_id":75381661,"question_id":75381378,"body_markdown":"`java.lang.NoClassDefFoundError: org/springframework/context/ApplicationContext` tells that the Class you are using in your code is not accessible from your project.\r\nIn previous chapter on https://www.tutorialspoint.com/spring/spring_environment_setup.htm you probably downloaded spring library in step 4. Try adding it to your classpath: https://wiki.eclipse.org/FAQ_How_do_I_add_an_extra_library_to_my_project%27s_classpath%3F.\r\n\r\nI highly recommend you start using maven. It allows you to add external libraries a lot easier, without having to manually download them from a git repo or a website.\r\nAlso, check the Baeldung courses. Their examples always use the latest Spring version https://www.baeldung.com/spring-tutorial","title":"Spring java.lang.NoClassDefFoundError error","body":"<p><code>java.lang.NoClassDefFoundError: org/springframework/context/ApplicationContext</code> tells that the Class you are using in your code is not accessible from your project.\nIn previous chapter on <a href=\"https://www.tutorialspoint.com/spring/spring_environment_setup.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/spring/spring_environment_setup.htm</a> you probably downloaded spring library in step 4. Try adding it to your classpath: <a href=\"https://wiki.eclipse.org/FAQ_How_do_I_add_an_extra_library_to_my_project%27s_classpath%3F\" rel=\"nofollow noreferrer\">https://wiki.eclipse.org/FAQ_How_do_I_add_an_extra_library_to_my_project%27s_classpath%3F</a>.</p>\n<p>I highly recommend you start using maven. It allows you to add external libraries a lot easier, without having to manually download them from a git repo or a website.\nAlso, check the Baeldung courses. Their examples always use the latest Spring version <a href=\"https://www.baeldung.com/spring-tutorial\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-tutorial</a></p>\n"}],"owner":{"account_id":27179823,"reputation":1,"user_id":20715243,"display_name":"servolt"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":490,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675833892,"creation_date":1675830366,"question_id":75381378,"body_markdown":"I am new to spring framework and following the tutorial on [tutorialspoint.com](https://www.tutorialspoint.com/spring/spring_hello_world_example.htm). After including every thing, while running the program it gives me following error:\r\n&gt; Error: Unable to initialize main class com.raza.spring.MainApp\r\n&gt; Caused by: java.lang.NoClassDefFoundError: org/springframework/context/ApplicationContext\r\n\r\nBelow is my project structure:\r\n[enter image description here](https://i.stack.imgur.com/P2X7R.png)\r\n\r\nHere is the code:\r\n\r\nClass Hello:\r\n```\r\npackage com.raza.spring;\r\npublic class Hello {\r\n\r\n\tprivate String message;\r\n\t\r\n\tpublic void setMessage(String message) {\r\n\t\tthis.message = message;\r\n\t}\r\n\t\r\n\tpublic String getMessage() {\r\n\t\treturn this.message;\r\n\t}\r\n}\r\n```\r\nClass MainApp:\r\n```\r\npackage com.raza.spring;\r\nimport org.springframework.context.ApplicationContext;\r\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\r\n\r\npublic class MainApp {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t// TODO Auto-generated method stub\r\n\r\n\t\tApplicationContext context = new ClassPathXmlApplicationContext(&quot;Beans.xml&quot;);\r\n\t\tHello obj = (Hello) context.getBean(&quot;helloWorld&quot;);\r\n\t\t\r\n\t\tobj.getMessage();\r\n\t}\r\n\r\n}\r\n```\r\nBeans.xml\r\n```\r\n&lt;?xml version = &quot;1.0&quot; encoding = &quot;UTF-8&quot;?&gt;\r\n\r\n&lt;beans xmlns = &quot;http://www.springframework.org/schema/beans&quot;\r\n   xmlns:xsi = &quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n   xsi:schemaLocation = &quot;http://www.springframework.org/schema/beans\r\n   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;&gt;\r\n\r\n\t&lt;bean id = &quot;helloWorld&quot; class = &quot;com.raza.spring.Hello&quot;&gt;\r\n\t\t&lt;property name = &quot;message&quot; value = &quot;Hello raza world !!!&quot;/&gt;\r\n\t&lt;/bean&gt;\r\n\r\n&lt;/beans&gt;\r\n```\r\n\r\nNot able to get what is wrong here. Thanks in advance.\r\n\r\nI am trying tutorial on [tutorialspoint.com](https://www.tutorialspoint.com/spring/spring_hello_world_example.htm) and expecting an output on the console.","title":"Spring java.lang.NoClassDefFoundError error","body":"<p>I am new to spring framework and following the tutorial on <a href=\"https://www.tutorialspoint.com/spring/spring_hello_world_example.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com</a>. After including every thing, while running the program it gives me following error:</p>\n<blockquote>\n<p>Error: Unable to initialize main class com.raza.spring.MainApp\nCaused by: java.lang.NoClassDefFoundError: org/springframework/context/ApplicationContext</p>\n</blockquote>\n<p>Below is my project structure:\n<a href=\"https://i.stack.imgur.com/P2X7R.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>Here is the code:</p>\n<p>Class Hello:</p>\n<pre><code>package com.raza.spring;\npublic class Hello {\n\n    private String message;\n    \n    public void setMessage(String message) {\n        this.message = message;\n    }\n    \n    public String getMessage() {\n        return this.message;\n    }\n}\n</code></pre>\n<p>Class MainApp:</p>\n<pre><code>package com.raza.spring;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\n\npublic class MainApp {\n\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n\n        ApplicationContext context = new ClassPathXmlApplicationContext(&quot;Beans.xml&quot;);\n        Hello obj = (Hello) context.getBean(&quot;helloWorld&quot;);\n        \n        obj.getMessage();\n    }\n\n}\n</code></pre>\n<p>Beans.xml</p>\n<pre><code>&lt;?xml version = &quot;1.0&quot; encoding = &quot;UTF-8&quot;?&gt;\n\n&lt;beans xmlns = &quot;http://www.springframework.org/schema/beans&quot;\n   xmlns:xsi = &quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n   xsi:schemaLocation = &quot;http://www.springframework.org/schema/beans\n   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;&gt;\n\n    &lt;bean id = &quot;helloWorld&quot; class = &quot;com.raza.spring.Hello&quot;&gt;\n        &lt;property name = &quot;message&quot; value = &quot;Hello raza world !!!&quot;/&gt;\n    &lt;/bean&gt;\n\n&lt;/beans&gt;\n</code></pre>\n<p>Not able to get what is wrong here. Thanks in advance.</p>\n<p>I am trying tutorial on <a href=\"https://www.tutorialspoint.com/spring/spring_hello_world_example.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com</a> and expecting an output on the console.</p>\n"},{"tags":["java","android","colors","bitmap"],"comments":[{"owner":{"account_id":3821169,"reputation":763,"user_id":3169238,"display_name":"Sergei Kozelko"},"score":0,"creation_date":1678164459,"post_id":75381334,"comment_id":133475919,"body_markdown":"`-65536` is `0xFFFF0000` in hex, so it is red color","body":"<code>-65536</code> is <code>0xFFFF0000</code> in hex, so it is red color"}],"owner":{"account_id":27008024,"reputation":1,"user_id":20568154,"display_name":"Dennis Deng"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675833618,"creation_date":1675829839,"question_id":75381334,"body_markdown":"I&#39;ve been trying to make an Android application that allows user to take a picture and count the number of objects with similar colors, the user can tap on the screen to select the color they want.\r\nHowever I ran into a problem, when the user taps on the screen, I printed out the color and the coordinate of the pixel, which both looks right to me. But when I try to use the expand method (Spread out from the pixel and convert all nearby pixel with similar color to red.), and convert the object to a totally different color(so it doesn&#39;t get counted again), the program crashes.\r\n\r\nHere&#39;s my code: \r\n\r\n\r\n```java\r\npackage com.example.myapplication;\r\n\r\nimport  androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.core.content.ContextCompat;\r\n\r\nimport android.Manifest;\r\nimport android.annotation.SuppressLint;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.graphics.Bitmap;\r\nimport android.graphics.Color;\r\nimport android.graphics.drawable.BitmapDrawable;\r\nimport android.os.Bundle;\r\nimport android.provider.MediaStore;\r\nimport android.view.MotionEvent;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.Toast;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private static final int CAM_PERM_CODE = 101;\r\n    private static final int CAM_REQ_CODE = 102;\r\n    private static int NumOfObj = 0;\r\n\r\n    ImageView selectedImage;\r\n    Button CameraB;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        selectedImage = findViewById(R.id.displayImageView);\r\n        CameraB = findViewById(R.id.CameraB);\r\n\r\n        CameraB.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                askCamPerm();\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    private void askCamPerm() {\r\n        if(ContextCompat.checkSelfPermission(this, Manifest.permission.CAMERA) != PackageManager.PERMISSION_GRANTED) {\r\n            ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.CAMERA}, CAM_PERM_CODE);\r\n        } else  {\r\n            openCam();\r\n        }\r\n    }\r\n\r\n    @SuppressLint(&quot;MissingSuperCall&quot;)\r\n    @Override\r\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\r\n        if (requestCode == CAM_PERM_CODE) {\r\n            if (grantResults.length &lt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\r\n                openCam();\r\n            } else {\r\n                Toast.makeText(this, &quot;Camera permission is required&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n    }\r\n\r\n    private void openCam(){\r\n        Intent camera = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\r\n        NumOfObj = 0;\r\n        startActivityForResult(camera, CAM_REQ_CODE);\r\n    }\r\n\r\n    @SuppressLint(&quot;MissingSuperCall&quot;)\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        if(requestCode == CAM_REQ_CODE) {\r\n            Bitmap image = (Bitmap) data.getExtras().get(&quot;data&quot;);\r\n            selectedImage.setImageBitmap(image);\r\n            Toast.makeText(this, &quot;Select the object you want to count&quot;, Toast.LENGTH_LONG).show();\r\n            selectedImage.setOnTouchListener(new View.OnTouchListener() {\r\n                @Override\r\n                public boolean onTouch(View view, MotionEvent motionEvent) {\r\n                    if(motionEvent.getAction() == MotionEvent.ACTION_DOWN || motionEvent.getAction() == MotionEvent.ACTION_MOVE) {\r\n                        int viewX = (int) motionEvent.getX();\r\n                        int viewY = (int) motionEvent.getY();\r\n\r\n                        int viewWidth = selectedImage.getWidth();\r\n                        int viewHeight = selectedImage.getHeight();\r\n\r\n                        Bitmap image2 = ((BitmapDrawable)selectedImage.getDrawable()).getBitmap();\r\n\r\n                        int imageWidth = image2.getWidth();\r\n                        int imageHeight = image2.getHeight();\r\n                        System.out.println(viewX + &quot;, &quot; + viewWidth);\r\n                        //int Offset = (viewWidth - imageWidth) / 2;\r\n\r\n                        int imageX = (int)((float)(viewX) * ((float)imageWidth / (float)viewWidth));\r\n                        int imageY = (int)((float)viewY * ((float)imageHeight / (float)viewHeight));\r\n\r\n                        int DumpColor = image2.getPixel(imageX, imageY);\r\n\r\n                        Counter(image2, DumpColor);\r\n                    }\r\n                    return true;\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    public void Counter(Bitmap image, int DumpColor) {\r\n        //Bright: 200, 192, 182\r\n        //Dim: 141, 130, 120\r\n        int height = image.getHeight();\r\n        int width = image.getWidth();\r\n        for(int col = 0; col &lt; width; col+=5){\r\n            for(int row = 0; row &lt; height; row += 5){\r\n                int color = image.getPixel(col, row);\r\n                if(IsDumpColor(color, DumpColor)){\r\n                    NumOfObj++;\r\n                    System.out.println(&quot;Counter: &quot; + row + &quot;, &quot; + col);\r\n                    Expand(image, row, col, DumpColor);\r\n                }\r\n            }\r\n        }\r\n\r\n        Toast.makeText(this, &quot;The number of object is: &quot; + NumOfObj, Toast.LENGTH_LONG).show();\r\n    }\r\n\r\n    public void Expand(Bitmap image, int row, int col, int DumpColor){\r\n        if(row == 0 || col == 0 || row == image.getHeight() || col == image.getWidth()) {\r\n            return;\r\n        }\r\n        int Pixel = image.getPixel(col, row);\r\n        System.out.println(col + &quot;, &quot; + row);\r\n        System.out.println(&quot;color of pixel: &quot; + image.getPixel(col, row));\r\n        if (!IsDumpColor(Pixel, DumpColor) &amp;&amp; Pixel == 0xFF0000){\r\n            return;\r\n        } else {\r\n            image.setPixel(col, row, 0xFF0000);\r\n            System.out.println(col + &quot;, &quot; + row);\r\n            System.out.println(&quot;color of pixel2: &quot; + image.getPixel(col, row));\r\n            Expand(image, row - 1, col, DumpColor);\r\n            Expand(image, row + 1, col, DumpColor);\r\n            Expand(image, row, col - 1, DumpColor);\r\n            Expand(image, row, col + 1, DumpColor);\r\n\r\n        }\r\n    }\r\n\r\n    public boolean IsDumpColor(int color, int DumpColor){\r\n        int red = Color.red(color);\r\n        int green = Color.green(color);\r\n        int blue = Color.blue(color);\r\n        int DumpR = Color.red(DumpColor);\r\n        int DumpG = Color.green(DumpColor);\r\n        int DumpB = Color.blue(DumpColor);\r\n        if(\r\n                DumpR - red &lt; 30 &amp;&amp; red - DumpR &lt; 30 &amp;&amp;\r\n                DumpG - green &lt; 30 &amp;&amp; green - DumpG &lt; 30 &amp;&amp;\r\n                DumpB - blue &lt; 30 &amp;&amp; blue - DumpB &lt; 30\r\n        ){\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n}\r\n```\r\n\r\nEdit: I changed my IsDumpColor method to the following because I saw something about sRGB and RBG but now it&#39;s just giving me E/AndroidRunTime at lines 139 and 140 with, and it keeps repeating those two lines.\r\nIn my code it&#39;s the lines it&#39;s in the Expand method where I do the recursion.\r\n```java\r\npublic boolean IsDumpColor(int color, int DumpColor){\r\n        //Color.blue(color);\r\n        int R = (color &gt;&gt; 16) &amp; 0xff;\r\n        int G = (color &gt;&gt; 8) &amp; 0xff;\r\n        int B = color &amp; 0xff;\r\n        //Color.red(DumpColor);\r\n        int DumpR = (DumpColor &gt;&gt; 16) &amp; 0xff;\r\n        int DumpG = (DumpColor &gt;&gt; 8) &amp; 0xff;\r\n        int DumpB = DumpColor &amp; 0xff;\r\n        if(\r\n                DumpR - R &lt; 30 &amp;&amp; R - DumpR &lt; 30 &amp;&amp;\r\n                DumpG - G &lt; 30 &amp;&amp; G - DumpG &lt; 30 &amp;&amp;\r\n                DumpB - B &lt; 30 &amp;&amp; B - DumpB &lt; 30\r\n        ){\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n```\r\n\r\n\r\nThis was before I edited my IsDumpColor -&gt;\r\nI tried to print out the pixel coordinate (x, y) and the color number of the pixel, But it gave me totally unexpected results. First, the pixel I tapped on is normal, it gave me something like 600, 900, but soon after the expand function is ran, it gave me 15 and 2, and the color is -65536 which I completely have no idea what that means. I&#39;m pretty stuck because theoretically my code should work, and I&#39;ve tried googling it and I didn&#39;t get anything.\r\n","title":"My Java Code is giving me really weird errors, about color and pixel coordinate","body":"<p>I've been trying to make an Android application that allows user to take a picture and count the number of objects with similar colors, the user can tap on the screen to select the color they want.\nHowever I ran into a problem, when the user taps on the screen, I printed out the color and the coordinate of the pixel, which both looks right to me. But when I try to use the expand method (Spread out from the pixel and convert all nearby pixel with similar color to red.), and convert the object to a totally different color(so it doesn't get counted again), the program crashes.</p>\n<p>Here's my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.myapplication;\n\nimport  androidx.annotation.NonNull;\nimport androidx.annotation.Nullable;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.core.app.ActivityCompat;\nimport androidx.core.content.ContextCompat;\n\nimport android.Manifest;\nimport android.annotation.SuppressLint;\nimport android.content.Intent;\nimport android.content.pm.PackageManager;\nimport android.graphics.Bitmap;\nimport android.graphics.Color;\nimport android.graphics.drawable.BitmapDrawable;\nimport android.os.Bundle;\nimport android.provider.MediaStore;\nimport android.view.MotionEvent;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.ImageView;\nimport android.widget.Toast;\n\npublic class MainActivity extends AppCompatActivity {\n\n    private static final int CAM_PERM_CODE = 101;\n    private static final int CAM_REQ_CODE = 102;\n    private static int NumOfObj = 0;\n\n    ImageView selectedImage;\n    Button CameraB;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        selectedImage = findViewById(R.id.displayImageView);\n        CameraB = findViewById(R.id.CameraB);\n\n        CameraB.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                askCamPerm();\n            }\n        });\n\n    }\n\n    private void askCamPerm() {\n        if(ContextCompat.checkSelfPermission(this, Manifest.permission.CAMERA) != PackageManager.PERMISSION_GRANTED) {\n            ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.CAMERA}, CAM_PERM_CODE);\n        } else  {\n            openCam();\n        }\n    }\n\n    @SuppressLint(&quot;MissingSuperCall&quot;)\n    @Override\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\n        if (requestCode == CAM_PERM_CODE) {\n            if (grantResults.length &lt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n                openCam();\n            } else {\n                Toast.makeText(this, &quot;Camera permission is required&quot;, Toast.LENGTH_SHORT).show();\n            }\n        }\n    }\n\n    private void openCam(){\n        Intent camera = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\n        NumOfObj = 0;\n        startActivityForResult(camera, CAM_REQ_CODE);\n    }\n\n    @SuppressLint(&quot;MissingSuperCall&quot;)\n    @Override\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\n        if(requestCode == CAM_REQ_CODE) {\n            Bitmap image = (Bitmap) data.getExtras().get(&quot;data&quot;);\n            selectedImage.setImageBitmap(image);\n            Toast.makeText(this, &quot;Select the object you want to count&quot;, Toast.LENGTH_LONG).show();\n            selectedImage.setOnTouchListener(new View.OnTouchListener() {\n                @Override\n                public boolean onTouch(View view, MotionEvent motionEvent) {\n                    if(motionEvent.getAction() == MotionEvent.ACTION_DOWN || motionEvent.getAction() == MotionEvent.ACTION_MOVE) {\n                        int viewX = (int) motionEvent.getX();\n                        int viewY = (int) motionEvent.getY();\n\n                        int viewWidth = selectedImage.getWidth();\n                        int viewHeight = selectedImage.getHeight();\n\n                        Bitmap image2 = ((BitmapDrawable)selectedImage.getDrawable()).getBitmap();\n\n                        int imageWidth = image2.getWidth();\n                        int imageHeight = image2.getHeight();\n                        System.out.println(viewX + &quot;, &quot; + viewWidth);\n                        //int Offset = (viewWidth - imageWidth) / 2;\n\n                        int imageX = (int)((float)(viewX) * ((float)imageWidth / (float)viewWidth));\n                        int imageY = (int)((float)viewY * ((float)imageHeight / (float)viewHeight));\n\n                        int DumpColor = image2.getPixel(imageX, imageY);\n\n                        Counter(image2, DumpColor);\n                    }\n                    return true;\n                }\n            });\n        }\n    }\n\n    public void Counter(Bitmap image, int DumpColor) {\n        //Bright: 200, 192, 182\n        //Dim: 141, 130, 120\n        int height = image.getHeight();\n        int width = image.getWidth();\n        for(int col = 0; col &lt; width; col+=5){\n            for(int row = 0; row &lt; height; row += 5){\n                int color = image.getPixel(col, row);\n                if(IsDumpColor(color, DumpColor)){\n                    NumOfObj++;\n                    System.out.println(&quot;Counter: &quot; + row + &quot;, &quot; + col);\n                    Expand(image, row, col, DumpColor);\n                }\n            }\n        }\n\n        Toast.makeText(this, &quot;The number of object is: &quot; + NumOfObj, Toast.LENGTH_LONG).show();\n    }\n\n    public void Expand(Bitmap image, int row, int col, int DumpColor){\n        if(row == 0 || col == 0 || row == image.getHeight() || col == image.getWidth()) {\n            return;\n        }\n        int Pixel = image.getPixel(col, row);\n        System.out.println(col + &quot;, &quot; + row);\n        System.out.println(&quot;color of pixel: &quot; + image.getPixel(col, row));\n        if (!IsDumpColor(Pixel, DumpColor) &amp;&amp; Pixel == 0xFF0000){\n            return;\n        } else {\n            image.setPixel(col, row, 0xFF0000);\n            System.out.println(col + &quot;, &quot; + row);\n            System.out.println(&quot;color of pixel2: &quot; + image.getPixel(col, row));\n            Expand(image, row - 1, col, DumpColor);\n            Expand(image, row + 1, col, DumpColor);\n            Expand(image, row, col - 1, DumpColor);\n            Expand(image, row, col + 1, DumpColor);\n\n        }\n    }\n\n    public boolean IsDumpColor(int color, int DumpColor){\n        int red = Color.red(color);\n        int green = Color.green(color);\n        int blue = Color.blue(color);\n        int DumpR = Color.red(DumpColor);\n        int DumpG = Color.green(DumpColor);\n        int DumpB = Color.blue(DumpColor);\n        if(\n                DumpR - red &lt; 30 &amp;&amp; red - DumpR &lt; 30 &amp;&amp;\n                DumpG - green &lt; 30 &amp;&amp; green - DumpG &lt; 30 &amp;&amp;\n                DumpB - blue &lt; 30 &amp;&amp; blue - DumpB &lt; 30\n        ){\n            return true;\n        }\n        return false;\n    }\n}\n</code></pre>\n<p>Edit: I changed my IsDumpColor method to the following because I saw something about sRGB and RBG but now it's just giving me E/AndroidRunTime at lines 139 and 140 with, and it keeps repeating those two lines.\nIn my code it's the lines it's in the Expand method where I do the recursion.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public boolean IsDumpColor(int color, int DumpColor){\n        //Color.blue(color);\n        int R = (color &gt;&gt; 16) &amp; 0xff;\n        int G = (color &gt;&gt; 8) &amp; 0xff;\n        int B = color &amp; 0xff;\n        //Color.red(DumpColor);\n        int DumpR = (DumpColor &gt;&gt; 16) &amp; 0xff;\n        int DumpG = (DumpColor &gt;&gt; 8) &amp; 0xff;\n        int DumpB = DumpColor &amp; 0xff;\n        if(\n                DumpR - R &lt; 30 &amp;&amp; R - DumpR &lt; 30 &amp;&amp;\n                DumpG - G &lt; 30 &amp;&amp; G - DumpG &lt; 30 &amp;&amp;\n                DumpB - B &lt; 30 &amp;&amp; B - DumpB &lt; 30\n        ){\n            return true;\n        }\n        return false;\n    }\n</code></pre>\n<p>This was before I edited my IsDumpColor -&gt;\nI tried to print out the pixel coordinate (x, y) and the color number of the pixel, But it gave me totally unexpected results. First, the pixel I tapped on is normal, it gave me something like 600, 900, but soon after the expand function is ran, it gave me 15 and 2, and the color is -65536 which I completely have no idea what that means. I'm pretty stuck because theoretically my code should work, and I've tried googling it and I didn't get anything.</p>\n"},{"tags":["java","dialogflow-es"],"comments":[{"owner":{"account_id":1360573,"reputation":581,"user_id":1298031,"display_name":"Nicolas Dos Santos"},"score":0,"creation_date":1526370388,"post_id":49480084,"comment_id":87705475,"body_markdown":"I have the same issue. Have you got any solution ?","body":"I have the same issue. Have you got any solution ?"},{"owner":{"account_id":1987526,"reputation":333,"user_id":1782357,"display_name":"user1782357"},"score":0,"creation_date":1526669866,"post_id":49480084,"comment_id":87850988,"body_markdown":"No. Just switch to nodejs. In contrast to java api it has a working documentation","body":"No. Just switch to nodejs. In contrast to java api it has a working documentation"}],"answers":[{"tags":[],"owner":{"account_id":14400175,"reputation":21,"user_id":10402149,"display_name":"aheil"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1537657321,"creation_date":1537657321,"answer_id":52461591,"question_id":49480084,"body_markdown":"The library is depending on the google-api-client. That has a customized json parser for the transfer objects (like GoogleCloudDialogflowV2WebhookRequest). These objects extending from a map. Their elements are marked with the Key annotation. That is why the normal jackson or gson parsers are failing. You have multiple options:\r\n\r\n1. copy and modify the transfer objects (bad if the api will change in the future)\r\n2. write a httpmessageconverter for spring that uses the google api json parser (do not know how much effort that would be)\r\n3. disable the spring message converters for your endpoint and do the marshalling on your own like this:\r\n\r\n        import com.google.api.client.json.JsonGenerator;\r\n        import com.google.api.client.json.jackson2.JacksonFactory;\r\n        import com.google.api.services.dialogflow.v2.model.*;\r\n        import org.springframework.web.bind.annotation.PostMapping;\r\n        import org.springframework.web.bind.annotation.RequestBody;\r\n        import org.springframework.web.bind.annotation.RestController;\r\n        import reactor.core.publisher.Mono;\r\n    \r\n        import java.io.IOException;\r\n        import java.io.StringWriter;\r\n        import java.util.Collections;\r\n\r\n        @RestController\r\n        public class DialogflowWebhookController {\r\n\r\n        private static JacksonFactory jacksonFactory = JacksonFactory.getDefaultInstance();\r\n\r\n        @PostMapping(&quot;/dialogflow&quot;)\r\n        public Mono&lt;String&gt; webhook(@RequestBody String rawRequest) throws IOException {\r\n    \r\n            GoogleCloudDialogflowV2WebhookRequest request = jacksonFactory.createJsonParser(rawRequest)\r\n                .parse(GoogleCloudDialogflowV2WebhookRequest.class);\r\n    \r\n            StringWriter stringWriter = new StringWriter();\r\n            JsonGenerator jsonGenerator = jacksonFactory.createJsonGenerator(stringWriter);\r\n            GoogleCloudDialogflowV2WebhookResponse response = ...\r\n            jsonGenerator.serialize(response);\r\n            jsonGenerator.flush();\r\n            return Mono.just(stringWriter.toString());\r\n        }\r\n        }\r\n","title":"Java Webhook - Migration to v2 - Can not set queryResult to java.util.LinkedHashMap","body":"<p>The library is depending on the google-api-client. That has a customized json parser for the transfer objects (like GoogleCloudDialogflowV2WebhookRequest). These objects extending from a map. Their elements are marked with the Key annotation. That is why the normal jackson or gson parsers are failing. You have multiple options:</p>\n\n<ol>\n<li>copy and modify the transfer objects (bad if the api will change in the future)</li>\n<li>write a httpmessageconverter for spring that uses the google api json parser (do not know how much effort that would be)</li>\n<li><p>disable the spring message converters for your endpoint and do the marshalling on your own like this:</p>\n\n<pre><code>import com.google.api.client.json.JsonGenerator;\nimport com.google.api.client.json.jackson2.JacksonFactory;\nimport com.google.api.services.dialogflow.v2.model.*;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RestController;\nimport reactor.core.publisher.Mono;\n\nimport java.io.IOException;\nimport java.io.StringWriter;\nimport java.util.Collections;\n\n@RestController\npublic class DialogflowWebhookController {\n\nprivate static JacksonFactory jacksonFactory = JacksonFactory.getDefaultInstance();\n\n@PostMapping(\"/dialogflow\")\npublic Mono&lt;String&gt; webhook(@RequestBody String rawRequest) throws IOException {\n\n    GoogleCloudDialogflowV2WebhookRequest request = jacksonFactory.createJsonParser(rawRequest)\n        .parse(GoogleCloudDialogflowV2WebhookRequest.class);\n\n    StringWriter stringWriter = new StringWriter();\n    JsonGenerator jsonGenerator = jacksonFactory.createJsonGenerator(stringWriter);\n    GoogleCloudDialogflowV2WebhookResponse response = ...\n    jsonGenerator.serialize(response);\n    jsonGenerator.flush();\n    return Mono.just(stringWriter.toString());\n}\n}\n</code></pre></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":24265481,"reputation":11,"user_id":18214445,"display_name":"Rishabh Rastogi"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675833476,"creation_date":1675833476,"answer_id":75381613,"question_id":49480084,"body_markdown":"Adding to what @aheil has already mentioned. \r\n\r\nProperties of class `GoogleCloudDialogflowV2WebhookRequest` is annotated with `@com.google.api.client.util.Key` which is why Jackson framework is unable to serialize it. \r\nHowever, you can use `GsonFactory` which exist in `com.google.api.client.json.gson` package to serialize and de-serialize such classes.\r\n\r\nThis saves writing your custom parser.\r\n\r\n    @PostMapping(value = &quot;/fulfillment&quot;, produces = {MediaType.APPLICATION_JSON_VALUE})\r\n    public GoogleCloudDialogflowV2WebhookResponse webhook(HttpServletRequest servletRequest) throws IOException {\r\n\r\n        GoogleCloudDialogflowV2WebhookRequest request = GsonFactory.getDefaultInstance().createJsonObjectParser()\r\n                .getJsonFactory()\r\n                .fromString(getRequestBody(servletRequest), GoogleCloudDialogflowV2WebhookRequest.class);\r\n\r\n        return intentFactory.handleRequest(request);\r\n\r\n    }\r\n\r\n    private String getRequestBody(HttpServletRequest request) {\r\n        try {\r\n            return new BufferedReader(new InputStreamReader(request.getInputStream()))\r\n                    .lines()\r\n                    .collect(Collectors.joining(System.lineSeparator()));\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }","title":"Java Webhook - Migration to v2 - Can not set queryResult to java.util.LinkedHashMap","body":"<p>Adding to what @aheil has already mentioned.</p>\n<p>Properties of class <code>GoogleCloudDialogflowV2WebhookRequest</code> is annotated with <code>@com.google.api.client.util.Key</code> which is why Jackson framework is unable to serialize it.\nHowever, you can use <code>GsonFactory</code> which exist in <code>com.google.api.client.json.gson</code> package to serialize and de-serialize such classes.</p>\n<p>This saves writing your custom parser.</p>\n<pre><code>@PostMapping(value = &quot;/fulfillment&quot;, produces = {MediaType.APPLICATION_JSON_VALUE})\npublic GoogleCloudDialogflowV2WebhookResponse webhook(HttpServletRequest servletRequest) throws IOException {\n\n    GoogleCloudDialogflowV2WebhookRequest request = GsonFactory.getDefaultInstance().createJsonObjectParser()\n            .getJsonFactory()\n            .fromString(getRequestBody(servletRequest), GoogleCloudDialogflowV2WebhookRequest.class);\n\n    return intentFactory.handleRequest(request);\n\n}\n\nprivate String getRequestBody(HttpServletRequest request) {\n    try {\n        return new BufferedReader(new InputStreamReader(request.getInputStream()))\n                .lines()\n                .collect(Collectors.joining(System.lineSeparator()));\n    } catch (IOException e) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1987526,"reputation":333,"user_id":1782357,"display_name":"user1782357"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2039,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1675833476,"creation_date":1522006432,"question_id":49480084,"body_markdown":"i am using dialogflow v1\r\nwith spring boot java as webhook using:\r\nhttp://mvnrepository.org/artifact/ai.api/libai/1.6.12\r\n\r\nnow i try upgrading to dialogflow v2 using this:\r\nhttp://mvnrepository.org/artifact/com.google.apis/google-api-services-dialogflow/v2-rev2-1.23.0\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;com.google.apis&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;google-api-services-dialogflow&lt;/artifactId&gt;\r\n    \t&lt;version&gt;v2-rev2-1.23.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\npurpose: so i dont have to take care of parsing/building the json myself\r\ni have found it over the mvnrepository search\r\n\r\ni intercepted this json:\r\n\r\n    {\r\n    \t&quot;responseId&quot;: &quot;72945ef4-0897-4705-a770-a12100162b45&quot;,\r\n    \t&quot;queryResult&quot;: {\r\n    \t\t&quot;queryText&quot;: &quot;was gibts neues?&quot;,\r\n    \t\t&quot;action&quot;: &quot;GetNewsFromWordpress&quot;,\r\n    \t\t&quot;parameters&quot;: {\r\n    \t\t\t&quot;allRequiredParamsPresent&quot;: true\r\n    \t\t},\r\n    \t\t&quot;name&quot;: &quot;projects/kreamont-abf6b/agent/intents/fe2c13a1-2e3f-48eb-a15a-660501c16807&quot;,\r\n    \t\t&quot;diagnosticInfo&quot;: {\r\n    \t\t\t\r\n    \t\t}\r\n    \t},\r\n    \t&quot;languageCode&quot;: {\r\n    \t\t&quot;intentDetectionConfidence&quot;: 1.0\r\n    \t},\r\n    \t&quot;displayName&quot;: {\r\n    \t\t&quot;payload&quot;: {\r\n    \t\t\t\r\n    \t\t}\r\n    \t},\r\n    \t&quot;session&quot;: &quot;projects/kreamont-abf6b/agent/sessions/e69aabe7-4f6a-4224-b881-8bbf31835ef2&quot;\r\n    }           \r\n\r\n                                                                                      \r\n\r\njackson is somehow unable to bind the model. how can i use some java lib so i dont have to take care of parsing the json myself?\r\n\r\ncom.fasterxml.jackson.databind.JsonMappingException: Can not set com.google.api.services.dialogflow.v2.model.GoogleCloudDialogflowV2QueryResult field com.google.api.services.dialogflow.v2.model.GoogleCloudDialogflowV2WebhookRequest.queryResult to java.util.LinkedHashMap (through reference chain: com.google.api.services.dialogflow.v2.model.GoogleCloudDialogflowV2WebhookRequest[&quot;queryResult&quot;])\r\n\r\n\r\n    @RequestMapping(method = RequestMethod.POST, path = &quot;fulfillment&quot;, consumes = MediaType.APPLICATION_JSON_VALUE)\r\n    public GoogleCloudDialogflowV2WebhookResponse getFulfillment(@RequestBody GoogleCloudDialogflowV2WebhookRequest request) {\r\n    \t// HttpMessageNotReadableException \r\n    \t...","title":"Java Webhook - Migration to v2 - Can not set queryResult to java.util.LinkedHashMap","body":"<p>i am using dialogflow v1\nwith spring boot java as webhook using:\n<a href=\"http://mvnrepository.org/artifact/ai.api/libai/1.6.12\" rel=\"noreferrer\">http://mvnrepository.org/artifact/ai.api/libai/1.6.12</a></p>\n\n<p>now i try upgrading to dialogflow v2 using this:\n<a href=\"http://mvnrepository.org/artifact/com.google.apis/google-api-services-dialogflow/v2-rev2-1.23.0\" rel=\"noreferrer\">http://mvnrepository.org/artifact/com.google.apis/google-api-services-dialogflow/v2-rev2-1.23.0</a></p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.google.apis&lt;/groupId&gt;\n    &lt;artifactId&gt;google-api-services-dialogflow&lt;/artifactId&gt;\n    &lt;version&gt;v2-rev2-1.23.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>purpose: so i dont have to take care of parsing/building the json myself\ni have found it over the mvnrepository search</p>\n\n<p>i intercepted this json:</p>\n\n<pre><code>{\n    \"responseId\": \"72945ef4-0897-4705-a770-a12100162b45\",\n    \"queryResult\": {\n        \"queryText\": \"was gibts neues?\",\n        \"action\": \"GetNewsFromWordpress\",\n        \"parameters\": {\n            \"allRequiredParamsPresent\": true\n        },\n        \"name\": \"projects/kreamont-abf6b/agent/intents/fe2c13a1-2e3f-48eb-a15a-660501c16807\",\n        \"diagnosticInfo\": {\n\n        }\n    },\n    \"languageCode\": {\n        \"intentDetectionConfidence\": 1.0\n    },\n    \"displayName\": {\n        \"payload\": {\n\n        }\n    },\n    \"session\": \"projects/kreamont-abf6b/agent/sessions/e69aabe7-4f6a-4224-b881-8bbf31835ef2\"\n}           \n</code></pre>\n\n<p>jackson is somehow unable to bind the model. how can i use some java lib so i dont have to take care of parsing the json myself?</p>\n\n<p>com.fasterxml.jackson.databind.JsonMappingException: Can not set com.google.api.services.dialogflow.v2.model.GoogleCloudDialogflowV2QueryResult field com.google.api.services.dialogflow.v2.model.GoogleCloudDialogflowV2WebhookRequest.queryResult to java.util.LinkedHashMap (through reference chain: com.google.api.services.dialogflow.v2.model.GoogleCloudDialogflowV2WebhookRequest[\"queryResult\"])</p>\n\n<pre><code>@RequestMapping(method = RequestMethod.POST, path = \"fulfillment\", consumes = MediaType.APPLICATION_JSON_VALUE)\npublic GoogleCloudDialogflowV2WebhookResponse getFulfillment(@RequestBody GoogleCloudDialogflowV2WebhookRequest request) {\n    // HttpMessageNotReadableException \n    ...\n</code></pre>\n"},{"tags":["java","android","android-studio","android-fragments","android-edittext"],"answers":[{"tags":[],"owner":{"account_id":6014099,"reputation":411,"user_id":4723568,"display_name":"Subham Naik"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675720700,"creation_date":1675720700,"answer_id":75367003,"question_id":75366934,"body_markdown":"Add gettext() inside your click listener\r\n\r\n    btnTest.setOnClickListener(new View.OnClickListener() {\r\n        @Override\r\n        public void onClick(View v) { String input=txtUserInput.getText().toString()\r\n            Toast.makeText(getActivity(), input, Toast.LENGTH_LONG).show();\r\n        }\r\n    });\r\n\r\nas you want data from edite text after clicking the button so once you click then on click event is triggered and then you should get data from edit field ","title":"How to get input from EditText in android java fragment","body":"<p>Add gettext() inside your click listener</p>\n<pre><code>btnTest.setOnClickListener(new View.OnClickListener() {\n    @Override\n    public void onClick(View v) { String input=txtUserInput.getText().toString()\n        Toast.makeText(getActivity(), input, Toast.LENGTH_LONG).show();\n    }\n});\n</code></pre>\n<p>as you want data from edite text after clicking the button so once you click then on click event is triggered and then you should get data from edit field</p>\n"},{"tags":[],"owner":{"account_id":20847971,"reputation":1,"user_id":15313095,"display_name":"Pushpendra Singh Jatt"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675833252,"creation_date":1675833252,"answer_id":75381594,"question_id":75366934,"body_markdown":"you can do this thing like\r\nand View is used to get root view for the fragment. \r\n\r\n\r\n   \r\n\r\n     View view = inflater. Inflate(R.layout.fragment_test, container, false);\r\n    EditText editText = view.findViewById(R.id.txtUserInput);\r\n    Button btnTest = view.findViewById(R.id.btnTest);\r\n    \r\n    \r\n    String input =&quot;&quot;;\r\n    btnTest.setOnClickListener(new View.OnClickListener() {\r\n        @Override\r\n        public void onClick(View v) {\r\n             input=editText.getText().toString()\r\n        }\r\n    });","title":"How to get input from EditText in android java fragment","body":"<p>you can do this thing like\nand View is used to get root view for the fragment.</p>\n<pre><code> View view = inflater. Inflate(R.layout.fragment_test, container, false);\nEditText editText = view.findViewById(R.id.txtUserInput);\nButton btnTest = view.findViewById(R.id.btnTest);\n\n\nString input =&quot;&quot;;\nbtnTest.setOnClickListener(new View.OnClickListener() {\n    @Override\n    public void onClick(View v) {\n         input=editText.getText().toString()\n    }\n});\n</code></pre>\n"}],"owner":{"account_id":15762051,"reputation":41,"user_id":11373500,"display_name":"Tipe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":162,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75367003,"answer_count":2,"score":0,"last_activity_date":1675833252,"creation_date":1675720188,"question_id":75366934,"body_markdown":"I am trying to get user input using EditText from fragment after pressing a button. For some reason the button is clickable but no data from EditText.\r\n\r\n    &lt;EditText\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:id=&quot;@+id/txtUserInput&quot;/&gt;\r\n\r\n    &lt;androidx.appcompat.widget.AppCompatButton\r\n                android:id=&quot;@+id/btnTest&quot;\r\n                android:layout_width=&quot;0dp&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_marginTop=&quot;24dp&quot;/&gt;\r\n\r\n\r\n\r\n   public class MainActivity extends AppCompatActivity {\r\n    \r\n        TestFragment testFragment = new TestFragment();\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \t\t\r\n    \t\tgetSupportFragmentManager()\r\n    \t\t\t.beginTransaction()\r\n    \t\t\t.replace(R.id.container, testFragment)\r\n    \t\t\t.commit();\r\n            \r\n        }\r\n     }\r\n\r\n\r\n    \r\npublic class TestFragment extends Fragment {\r\n\r\n    Button btnTest;\r\n    EditText txtUserInput;\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\r\n        View view = inflater.inflate(R.layout.fragment_test, container, false);\r\n\t\t\r\n        btnTest = view.findViewById(R.id.btnTest);\r\n        txtUserInput = view.findViewById(R.id.txtUserInput);\r\n        String input = txtUserInput.getText().toString();\r\n\r\n        btnTest.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Toast.makeText(getActivity(), input, Toast.LENGTH_LONG).show();\r\n            }\r\n        });\r\n\r\n        return view;\r\n    }\r\n\r\n    @Override\r\n    public void onActivityCreated(@Nullable Bundle savedInstanceState) {\r\n        super.onActivityCreated(savedInstanceState);\r\n    }\r\n\r\n    @Override\r\n    public void onViewCreated(View view, @Nullable Bundle savedInstanceState) {\r\n        super.onViewCreated(view, savedInstanceState);\r\n    }\r\n\r\n","title":"How to get input from EditText in android java fragment","body":"<p>I am trying to get user input using EditText from fragment after pressing a button. For some reason the button is clickable but no data from EditText.</p>\n<pre><code>&lt;EditText\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:id=&quot;@+id/txtUserInput&quot;/&gt;\n\n&lt;androidx.appcompat.widget.AppCompatButton\n            android:id=&quot;@+id/btnTest&quot;\n            android:layout_width=&quot;0dp&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_marginTop=&quot;24dp&quot;/&gt;\n</code></pre>\n<p>public class MainActivity extends AppCompatActivity {</p>\n<pre><code>    TestFragment testFragment = new TestFragment();\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        \n        getSupportFragmentManager()\n            .beginTransaction()\n            .replace(R.id.container, testFragment)\n            .commit();\n        \n    }\n }\n</code></pre>\n<p>public class TestFragment extends Fragment {</p>\n<pre><code>Button btnTest;\nEditText txtUserInput;\n\n@Override\npublic View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\n    View view = inflater.inflate(R.layout.fragment_test, container, false);\n    \n    btnTest = view.findViewById(R.id.btnTest);\n    txtUserInput = view.findViewById(R.id.txtUserInput);\n    String input = txtUserInput.getText().toString();\n\n    btnTest.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            Toast.makeText(getActivity(), input, Toast.LENGTH_LONG).show();\n        }\n    });\n\n    return view;\n}\n\n@Override\npublic void onActivityCreated(@Nullable Bundle savedInstanceState) {\n    super.onActivityCreated(savedInstanceState);\n}\n\n@Override\npublic void onViewCreated(View view, @Nullable Bundle savedInstanceState) {\n    super.onViewCreated(view, savedInstanceState);\n}\n</code></pre>\n"},{"tags":["java","ssl","activemq","tls1.2","keytool"],"comments":[{"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1675825719,"post_id":75380980,"comment_id":133010257,"body_markdown":"Did you do this while the broker is running or did you stop the broker, delete the client&#39;s cert from the truststore, and then restart the broker?","body":"Did you do this while the broker is running or did you stop the broker, delete the client&#39;s cert from the truststore, and then restart the broker?"},{"owner":{"account_id":4532460,"reputation":1002,"user_id":3682523,"display_name":"Nikolay"},"score":0,"creation_date":1675825963,"post_id":75380980,"comment_id":133010281,"body_markdown":"@JustinBertram I did it while the broker was running.","body":"@JustinBertram I did it while the broker was running."},{"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1675827292,"post_id":75380980,"comment_id":133010414,"body_markdown":"Are both the client and broker certificates self-signed or are they signed by a trusted authority?","body":"Are both the client and broker certificates self-signed or are they signed by a trusted authority?"},{"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1675827703,"post_id":75380980,"comment_id":133010457,"body_markdown":"Can you provide the commands you used to generate the keystores and truststores for the client &amp; broker?","body":"Can you provide the commands you used to generate the keystores and truststores for the client &amp; broker?"},{"owner":{"account_id":4532460,"reputation":1002,"user_id":3682523,"display_name":"Nikolay"},"score":0,"creation_date":1675828427,"post_id":75380980,"comment_id":133010538,"body_markdown":"@JustinBertram They&#39;re from a trusted authority, which is installed into the Kubernetes cluster","body":"@JustinBertram They&#39;re from a trusted authority, which is installed into the Kubernetes cluster"},{"owner":{"account_id":4532460,"reputation":1002,"user_id":3682523,"display_name":"Nikolay"},"score":0,"creation_date":1675831282,"post_id":75380980,"comment_id":133010856,"body_markdown":"@JustinBertram below are the commands we use to generate the client certs:\n\n\n&gt; keytool -import -alias {{alias}} -keystore broker_to_client.ts -file client.crt -deststorepass {{password}}\n\n\n&gt; keytool -import -alias amq-artemis-broker-ca -keystore broker_to_client.ts -file ca.crt -deststorepass {{ password }} (edited)","body":"@JustinBertram below are the commands we use to generate the client certs:   &gt; keytool -import -alias {{alias}} -keystore broker_to_client.ts -file client.crt -deststorepass {{password}}   &gt; keytool -import -alias amq-artemis-broker-ca -keystore broker_to_client.ts -file ca.crt -deststorepass {{ password }} (edited)"}],"answers":[{"comments":[{"owner":{"account_id":4532460,"reputation":1002,"user_id":3682523,"display_name":"Nikolay"},"score":0,"creation_date":1675845391,"post_id":75381436,"comment_id":133013405,"body_markdown":"Thanks! I can confirm the client certificate works and it can connect even if it&#39;s not added to the trust store at all.","body":"Thanks! I can confirm the client certificate works and it can connect even if it&#39;s not added to the trust store at all."}],"tags":[],"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675831094,"creation_date":1675831094,"answer_id":75381436,"question_id":75380980,"body_markdown":"If the client&#39;s certificate is issued from a trusted authority then it doesn&#39;t matter if the it&#39;s in the broker&#39;s truststore. The client&#39;s certificate will still be trusted because it&#39;s from a _trusted_ authority. The broker&#39;s truststore is only there to include certificates that come from an untrusted authority or are self-signed.","title":"Revoking a certificate from ActiveMQ&#39;s truststore doesn&#39;t work","body":"<p>If the client's certificate is issued from a trusted authority then it doesn't matter if the it's in the broker's truststore. The client's certificate will still be trusted because it's from a <em>trusted</em> authority. The broker's truststore is only there to include certificates that come from an untrusted authority or are self-signed.</p>\n"}],"owner":{"account_id":4532460,"reputation":1002,"user_id":3682523,"display_name":"Nikolay"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75381436,"answer_count":1,"score":0,"last_activity_date":1675831094,"creation_date":1675824907,"question_id":75380980,"body_markdown":"I have an instance of Apache ActiveMQ  5.16.3 with Java 8 in a Debian Docker container (Kubernetes). \r\n\r\nIt&#39;s configured to use mutual SSL in `/opt/activemq/conf/activemq.xml`:\r\n```xml\r\n        &lt;sslContext&gt;\r\n            &lt;sslContext \r\n                keyStore=&quot;/etc/data/my-bridge-broker.ks&quot;\r\n                keyStorePassword=&quot;my-pass&quot; \r\n                trustStore=&quot;/etc/data/broker_to_client.ts&quot;\r\n                trustStorePassword=&quot;my-pass&quot;\r\n             /&gt;\r\n        &lt;/sslContext&gt;\r\n        &lt;!--- ... ---&gt;\r\n        &lt;transportConnectors&gt;\r\n            &lt;transportConnector name=&quot;ssl&quot; uri=&quot;ssl://0.0.0.0:61714?transport.enabledProtocols=TLSv1.2&amp;amp;transport.needClientAuth=true&quot;/&gt;\r\n        &lt;/transportConnectors&gt;\r\n```\r\nThe mutual SSL works properly, and I am able to connect from a sample Java client, using [ActiveMQSslConnectionFactory](https://activemq.apache.org/maven/apidocs/org/apache/activemq/ActiveMQSslConnectionFactory.html) providing the appropriate certificates in the truststore and keystore and passwords.\r\n\r\nNext, while the broker was running I removed the client&#39;s certificate by its alias from the server&#39;s trust store:\r\n```\r\ncd /etc/data\r\nkeytool -delete -alias &lt;client-cert-name&gt; -keystore broker_to_client.ts -storepass my-pass\r\n```\r\nSurprisingly, the client is still able to connect. I restarted the server and the client can still connect and post messages on the queues. Any idea why? I thought the truststore defines which client certificates will be allowed?\r\n\r\nLooking at the [documentation](https://activemq.apache.org/how-do-i-use-ssl) they recommend using Certificate Revocation List (CRL) or Online Certificate Status Protocol (OCSP). They don&#39;t mention the option to remove from the truststore. Does this mean ActiveMQ doesn&#39;t use the truststore file? ","title":"Revoking a certificate from ActiveMQ&#39;s truststore doesn&#39;t work","body":"<p>I have an instance of Apache ActiveMQ  5.16.3 with Java 8 in a Debian Docker container (Kubernetes).</p>\n<p>It's configured to use mutual SSL in <code>/opt/activemq/conf/activemq.xml</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>        &lt;sslContext&gt;\n            &lt;sslContext \n                keyStore=&quot;/etc/data/my-bridge-broker.ks&quot;\n                keyStorePassword=&quot;my-pass&quot; \n                trustStore=&quot;/etc/data/broker_to_client.ts&quot;\n                trustStorePassword=&quot;my-pass&quot;\n             /&gt;\n        &lt;/sslContext&gt;\n        &lt;!--- ... ---&gt;\n        &lt;transportConnectors&gt;\n            &lt;transportConnector name=&quot;ssl&quot; uri=&quot;ssl://0.0.0.0:61714?transport.enabledProtocols=TLSv1.2&amp;amp;transport.needClientAuth=true&quot;/&gt;\n        &lt;/transportConnectors&gt;\n</code></pre>\n<p>The mutual SSL works properly, and I am able to connect from a sample Java client, using <a href=\"https://activemq.apache.org/maven/apidocs/org/apache/activemq/ActiveMQSslConnectionFactory.html\" rel=\"nofollow noreferrer\">ActiveMQSslConnectionFactory</a> providing the appropriate certificates in the truststore and keystore and passwords.</p>\n<p>Next, while the broker was running I removed the client's certificate by its alias from the server's trust store:</p>\n<pre><code>cd /etc/data\nkeytool -delete -alias &lt;client-cert-name&gt; -keystore broker_to_client.ts -storepass my-pass\n</code></pre>\n<p>Surprisingly, the client is still able to connect. I restarted the server and the client can still connect and post messages on the queues. Any idea why? I thought the truststore defines which client certificates will be allowed?</p>\n<p>Looking at the <a href=\"https://activemq.apache.org/how-do-i-use-ssl\" rel=\"nofollow noreferrer\">documentation</a> they recommend using Certificate Revocation List (CRL) or Online Certificate Status Protocol (OCSP). They don't mention the option to remove from the truststore. Does this mean ActiveMQ doesn't use the truststore file?</p>\n"},{"tags":["java","android","kotlin","containers","docker-container"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1675791515,"post_id":75375585,"comment_id":133003367,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":18365379,"reputation":117,"user_id":13376540,"display_name":"OneKe"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675830769,"creation_date":1675830769,"answer_id":75381408,"question_id":75375585,"body_markdown":"A container on Android is essentially a secure environment that isolates the app and its data from other apps and the underlying operating system. Creating a container on Android can be challenging and requires a deep understanding of the Android security architecture.\r\n\r\nOne approach to create a container on Android is to use Android&#39;s built-in system APIs, such as the Android Work Profile, which allows creating a separate, isolated profile on the same device. However, this approach still requires a management solution such as an MDM to enforce the security policies on the app.\r\n\r\nAnother approach is to create a virtualized environment using virtualization software like QEMU, which allows running a separate instance of Android on the same device. This approach provides a high degree of isolation and security, but can be complex to set up and manage.\r\n\r\nIn summary, creating a container on Android to run a secure messaging app is possible but requires a deep understanding of Android security architecture and the use of specialized tools and management solutions.","title":"Create a container on android with an app running inside it","body":"<p>A container on Android is essentially a secure environment that isolates the app and its data from other apps and the underlying operating system. Creating a container on Android can be challenging and requires a deep understanding of the Android security architecture.</p>\n<p>One approach to create a container on Android is to use Android's built-in system APIs, such as the Android Work Profile, which allows creating a separate, isolated profile on the same device. However, this approach still requires a management solution such as an MDM to enforce the security policies on the app.</p>\n<p>Another approach is to create a virtualized environment using virtualization software like QEMU, which allows running a separate instance of Android on the same device. This approach provides a high degree of isolation and security, but can be complex to set up and manage.</p>\n<p>In summary, creating a container on Android to run a secure messaging app is possible but requires a deep understanding of Android security architecture and the use of specialized tools and management solutions.</p>\n"}],"owner":{"account_id":17044055,"reputation":1,"user_id":12331298,"display_name":"Hussno"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1031,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675830769,"creation_date":1675783916,"question_id":75375585,"body_markdown":"The idea is to create a secure messaging app for Android smartphone.\r\nOne security goal is to have the app running inside a container.\r\nI have so far been unsuccessful in finding a way to create a container on Android without using a paid service like a MDM.\r\n\r\nAny help as to wether its possible and how would be much appreciated.\r\n\r\nI have researched a lot on the internett on how to do this but haven&#39;t come over anything yet. ","title":"Create a container on android with an app running inside it","body":"<p>The idea is to create a secure messaging app for Android smartphone.\nOne security goal is to have the app running inside a container.\nI have so far been unsuccessful in finding a way to create a container on Android without using a paid service like a MDM.</p>\n<p>Any help as to wether its possible and how would be much appreciated.</p>\n<p>I have researched a lot on the internett on how to do this but haven't come over anything yet.</p>\n"},{"tags":["java","class","dto","datamodel"],"answers":[{"comments":[{"owner":{"account_id":2029491,"reputation":9823,"user_id":1813616,"display_name":"Uwe Plonus"},"score":0,"creation_date":1583667927,"post_id":60586572,"comment_id":107187745,"body_markdown":"I think you mix up the concepts of DTO (Data Transfer Object), which transfers data from your business logic to the front end, and DO (Data Object), which is there for persisting. So you normally never map a DTO to DB columns, this the the job of DOs.","body":"I think you mix up the concepts of DTO (Data Transfer Object), which transfers data from your business logic to the front end, and DO (Data Object), which is there for persisting. So you normally never map a DTO to DB columns, this the the job of DOs."},{"owner":{"account_id":16921011,"reputation":2463,"user_id":12237837,"display_name":"Aditya Rewari"},"score":0,"creation_date":1583668241,"post_id":60586572,"comment_id":107187819,"body_markdown":"@UwePlonus In my practice.. I had been using DTO for both the places. Let me futher read over this, then will exchange further comments with you ! Thanks for the info !","body":"@UwePlonus In my practice.. I had been using DTO for both the places. Let me futher read over this, then will exchange further comments with you ! Thanks for the info !"},{"owner":{"account_id":16921011,"reputation":2463,"user_id":12237837,"display_name":"Aditya Rewari"},"score":0,"creation_date":1583677974,"post_id":60586572,"comment_id":107190224,"body_markdown":"@UwePlonus Couldnt find material over this.. please provide. thanks!","body":"@UwePlonus Couldnt find material over this.. please provide. thanks!"},{"owner":{"account_id":2029491,"reputation":9823,"user_id":1813616,"display_name":"Uwe Plonus"},"score":0,"creation_date":1583680185,"post_id":60586572,"comment_id":107190772,"body_markdown":"In https://en.wikipedia.org/wiki/Data_transfer_object a DTO is explained and the difference to a business object (https://en.wikipedia.org/wiki/Business_object) is explained. I&#39;ve learned data object as name instead of business object. That&#39;s the only difference.","body":"In <a href=\"https://en.wikipedia.org/wiki/Data_transfer_object\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Data_transfer_object</a> a DTO is explained and the difference to a business object (<a href=\"https://en.wikipedia.org/wiki/Business_object\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Business_object</a>) is explained. I&#39;ve learned data object as name instead of business object. That&#39;s the only difference."}],"tags":[],"owner":{"account_id":16921011,"reputation":2463,"user_id":12237837,"display_name":"Aditya Rewari"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1583663405,"creation_date":1583663405,"answer_id":60586572,"question_id":60586389,"body_markdown":"If you use primitives, it would be easier for you to map your DTO to DB Columns !\r\n\r\nBut, if you intend to store Json of your datamodel, then you can proceed with the Datamodel itself","title":"Should the DTO of a datamodel have primitive Data types only for serialization in Java?","body":"<p>If you use primitives, it would be easier for you to map your DTO to DB Columns !</p>\n\n<p>But, if you intend to store Json of your datamodel, then you can proceed with the Datamodel itself</p>\n"},{"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1583665262,"creation_date":1583664801,"answer_id":60586753,"question_id":60586389,"body_markdown":"The purpose of DTO is used to pack some data to transfer to other clients/systems across the network. One of the popular use case is the WEB API . So taking JSON WEB API as an example ,the structure of the DTO is mainly depends on your API response body structure and the capability of the underlying framework that you use to seraialzie the DTO to a JSON.\r\n\r\nIf the underlying framework supports serailzing some non primitive types (which most modern one will) , I don&#39;t see any reasons that you do not use this feature and restrict yourself to only use primitive data type in the DTO . \r\n\r\nFor example, it is very common to include a `LocalDateTime` in the DTO and then the framework will serialize to a valid ISO 8601 data string such as `2020-04-23T11:11:12.511Z`. Not to mention including a `List` / `Set` in the DTO. \r\n\r\nIf you restrict yourself to only use primitive type in the DTO , it somehow means that all things in the JSON response will be flatten out and there is no more nested structure.It may be okay in a very simple case but not so good when your data model is a little bit richer which can be expressed much better with some nested structure.\r\n","title":"Should the DTO of a datamodel have primitive Data types only for serialization in Java?","body":"<p>The purpose of DTO is used to pack some data to transfer to other clients/systems across the network. One of the popular use case is the WEB API . So taking JSON WEB API as an example ,the structure of the DTO is mainly depends on your API response body structure and the capability of the underlying framework that you use to seraialzie the DTO to a JSON.</p>\n\n<p>If the underlying framework supports serailzing some non primitive types (which most modern one will) , I don't see any reasons that you do not use this feature and restrict yourself to only use primitive data type in the DTO . </p>\n\n<p>For example, it is very common to include a <code>LocalDateTime</code> in the DTO and then the framework will serialize to a valid ISO 8601 data string such as <code>2020-04-23T11:11:12.511Z</code>. Not to mention including a <code>List</code> / <code>Set</code> in the DTO. </p>\n\n<p>If you restrict yourself to only use primitive type in the DTO , it somehow means that all things in the JSON response will be flatten out and there is no more nested structure.It may be okay in a very simple case but not so good when your data model is a little bit richer which can be expressed much better with some nested structure.</p>\n"},{"tags":[],"owner":{"account_id":13962769,"reputation":45,"user_id":10083447,"display_name":"Shubham Palkar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675830301,"creation_date":1675830301,"answer_id":75381371,"question_id":60586389,"body_markdown":"If you use primitives, the default values if not passed by the client would be (for int) say &quot;0&quot;, and then if there is a use case for writing a PATCH api, you wont be able to distinguish whether the zero was set by the client or not","title":"Should the DTO of a datamodel have primitive Data types only for serialization in Java?","body":"<p>If you use primitives, the default values if not passed by the client would be (for int) say &quot;0&quot;, and then if there is a use case for writing a PATCH api, you wont be able to distinguish whether the zero was set by the client or not</p>\n"}],"owner":{"account_id":16348365,"reputation":378,"user_id":11807541,"display_name":"Sayantan Ghosh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2602,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":60586753,"answer_count":3,"score":1,"last_activity_date":1675830301,"creation_date":1583661964,"question_id":60586389,"body_markdown":"I have created a data model Student as follows:\r\n\r\n    class Student {\r\n    private final Name name;\r\n    private final Grade finalGrade;\r\n    private final Roll rollnumber;\r\n    }\r\n\r\nName is an object of two Strings - firstName and lastName, Grade is an enum and Roll number is an object of two integers - class number and seat number. To store this data in DB, I am serializing this data as a JSON. \r\n\r\nSo I have created a DTO. So my question is, can the DTO also have the same objects Name, Grade and Roll or should it be in primitive datatypes?","title":"Should the DTO of a datamodel have primitive Data types only for serialization in Java?","body":"<p>I have created a data model Student as follows:</p>\n\n<pre><code>class Student {\nprivate final Name name;\nprivate final Grade finalGrade;\nprivate final Roll rollnumber;\n}\n</code></pre>\n\n<p>Name is an object of two Strings - firstName and lastName, Grade is an enum and Roll number is an object of two integers - class number and seat number. To store this data in DB, I am serializing this data as a JSON. </p>\n\n<p>So I have created a DTO. So my question is, can the DTO also have the same objects Name, Grade and Roll or should it be in primitive datatypes?</p>\n"},{"tags":["java","android","xml","android-recyclerview","android-chips"],"owner":{"account_id":8105942,"reputation":290,"user_id":6107472,"display_name":"WrapItUp87"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675830145,"creation_date":1675830145,"question_id":75381356,"body_markdown":"I want to copy the event slider that Ring uses for video events for a video entertainment app I&#39;m making, but I don&#39;t know what action/event to use for when a chip/date touches the center piece (the middle divider of the video slider that never moves)\r\n\r\nFrom what I understand the app on Android uses a recycler-view with multiple chip groups and whenever a chip touches the middle divider, the following happens:\r\n\r\n 1. The Device gives a small vibration when a  event chip touches it and if there is no chip nothing happens  \r\n 2. Whenever a date touches this line it moves to the date either moves to the left or right depending on the user&#39;s current position within the recycler-view.\r\n\r\n\r\nI circled the picture below to show you what divider, I&#39;m talking about:\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/HZcIN.png","title":"Need advice on what to use to mimic the Ring App Event Slider","body":"<p>I want to copy the event slider that Ring uses for video events for a video entertainment app I'm making, but I don't know what action/event to use for when a chip/date touches the center piece (the middle divider of the video slider that never moves)</p>\n<p>From what I understand the app on Android uses a recycler-view with multiple chip groups and whenever a chip touches the middle divider, the following happens:</p>\n<ol>\n<li>The Device gives a small vibration when a  event chip touches it and if there is no chip nothing happens</li>\n<li>Whenever a date touches this line it moves to the date either moves to the left or right depending on the user's current position within the recycler-view.</li>\n</ol>\n<p>I circled the picture below to show you what divider, I'm talking about:</p>\n<p><a href=\"https://i.stack.imgur.com/HZcIN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HZcIN.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","android","xml","android-studio","webview"],"answers":[{"tags":[],"owner":{"account_id":27495420,"reputation":46,"user_id":20980009,"display_name":"Dipak Luhar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675829630,"creation_date":1675829630,"answer_id":75381320,"question_id":75257545,"body_markdown":"could that be useful to you?\r\n\r\n[Notifications API Links][1]\r\n\r\n[1]: https://developer.mozilla.org/en-US/docs/Web/API/Notifications_API\r\n \r\n\r\nhttps://stackoverflow.com/questions/69078346/allow-notifications-android-webview\r\n\r\nHopefuly you can make it work from one of those example\r\n\r\n","title":"How to allow notification permission in Android WebView on Android Studio","body":"<p>could that be useful to you?</p>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Notifications_API\" rel=\"nofollow noreferrer\">Notifications API Links</a></p>\n<p><a href=\"https://stackoverflow.com/questions/69078346/allow-notifications-android-webview\">Allow notifications Android webview</a></p>\n<p>Hopefuly you can make it work from one of those example</p>\n"}],"owner":{"account_id":27585519,"reputation":17,"user_id":21053785,"display_name":"G PAC"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":247,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675829630,"creation_date":1674819131,"question_id":75257545,"body_markdown":"I am using Android Studio, I created one `WebView` app, this app contain website, this website will receive notification alert with sound, so I need to that sound.\r\n\r\nNormally, when we opening any website in chrome or any browser, there will ask notification permission, but here, how to allow that?\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        this.getWindow().getDecorView().setSystemUiVisibility(\r\n                View.SYSTEM_UI_FLAG_LAYOUT_STABLE\r\n                        | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION\r\n                        | View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN\r\n                        | View.SYSTEM_UI_FLAG_HIDE_NAVIGATION\r\n                        | View.SYSTEM_UI_FLAG_FULLSCREEN);\r\n\r\n        WebView webView = (WebView) findViewById(R.id.webview);\r\n\r\n        webView.getSettings().setUseWideViewPort(true);//setting wide view\r\n        webView.getSettings().setLoadWithOverviewMode(true);//setting default zoomed out view\r\n        webView.setInitialScale(1);\r\n\r\n        webView.setWebViewClient(new WebViewClient());\r\n        webView.loadUrl(&quot;https://grillizuae.com&quot;);\r\n\r\n        //webView.getSettings().setUserAgentString(&quot;Desktop&quot;);\r\n\r\n        WebSettings webSettings = webView.getSettings();\r\n        webSettings.setJavaScriptEnabled(true);\r\n    }\r\n\r\n    private class MyWebViewClient extends WebViewClient {\r\n        @Override\r\n        public boolean shouldOverrideUrlLoading(WebView webView, String url) {\r\n            return false;\r\n        }\r\n    }","title":"How to allow notification permission in Android WebView on Android Studio","body":"<p>I am using Android Studio, I created one <code>WebView</code> app, this app contain website, this website will receive notification alert with sound, so I need to that sound.</p>\n<p>Normally, when we opening any website in chrome or any browser, there will ask notification permission, but here, how to allow that?</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    this.getWindow().getDecorView().setSystemUiVisibility(\n            View.SYSTEM_UI_FLAG_LAYOUT_STABLE\n                    | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION\n                    | View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN\n                    | View.SYSTEM_UI_FLAG_HIDE_NAVIGATION\n                    | View.SYSTEM_UI_FLAG_FULLSCREEN);\n\n    WebView webView = (WebView) findViewById(R.id.webview);\n\n    webView.getSettings().setUseWideViewPort(true);//setting wide view\n    webView.getSettings().setLoadWithOverviewMode(true);//setting default zoomed out view\n    webView.setInitialScale(1);\n\n    webView.setWebViewClient(new WebViewClient());\n    webView.loadUrl(&quot;https://grillizuae.com&quot;);\n\n    //webView.getSettings().setUserAgentString(&quot;Desktop&quot;);\n\n    WebSettings webSettings = webView.getSettings();\n    webSettings.setJavaScriptEnabled(true);\n}\n\nprivate class MyWebViewClient extends WebViewClient {\n    @Override\n    public boolean shouldOverrideUrlLoading(WebView webView, String url) {\n        return false;\n    }\n}\n</code></pre>\n"},{"tags":["java","kubernetes","grpc"],"comments":[{"owner":{"account_id":5967476,"reputation":24635,"user_id":4690866,"display_name":"Eric Anderson"},"score":0,"creation_date":1675891103,"post_id":75381202,"comment_id":133027966,"body_markdown":"Keepalive is the solution. You already changed the default keepAliveTime to 6 minutes. Why can&#39;t you reduce it further to the value you need? If you go below 5 minutes, you will need to configure the server to allow more aggressive keepalives.","body":"Keepalive is the solution. You already changed the default keepAliveTime to 6 minutes. Why can&#39;t you reduce it further to the value you need? If you go below 5 minutes, you will need to configure the server to allow more aggressive keepalives."}],"owner":{"account_id":27033446,"reputation":1,"user_id":20589438,"display_name":"shiyin wang"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":219,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675828176,"creation_date":1675828176,"question_id":75381202,"body_markdown":"### Expected behavior\r\n\r\nI have a k8s cluster with 3 nodes，I deployed grpc-server, grpc-client in it,\r\nThey will be disconnected every once in a while, and the grpc-server side can sense the disconnection of the link,\r\nBut the grpc-client didn&#39;t feel the link disconnected immediately, since I set keepAliveTime to 6min, it always waited until 6min before sensing the connection error , I am on the client side, and there is a mechanism to reconnect when OnError is encountered, but the problem now is that the client side does not immediately perceive the connection disconnection, and there is a long vacuum period of keepAliveTime in the middle\r\nI hope, there is an elegant solution to this problem, I know I can use health checks to solve this problem again\r\nI know that pods in k8s will drift, is it because of this problem?\r\n\r\n### Actual behavior\r\n\r\nIt will periodically disconnect and the client will not notice\r\n\r\n[grpc-client:](https://i.stack.imgur.com/GgotH.png)\r\n\r\n[grpc-server:](https://i.stack.imgur.com/xc2rn.png)\r\n\r\n\r\n### Steps to reproduce\r\n\r\nThe version in k8s is 1.23,\r\nDeploy grpc-server and grpc-client inside, set keepAliveTime to 6 minutes\r\n\r\n### JVM version (e.g. `java -version`)\r\njdk 17\r\n\r\n\r\n### OS version (e.g. `uname -a`)\r\n\r\nin k8s\r\nimage is ubuntun\r\n\r\n\r\n\r\nI think I can increase the regular health check to shorten the link disconnection time, but I want to find a more elegant way","title":"The connection of grpc will be disconnected periodically, but grpc-client will not perceive that the connection is disconnected","body":"<h3>Expected behavior</h3>\n<p>I have a k8s cluster with 3 nodes，I deployed grpc-server, grpc-client in it,\nThey will be disconnected every once in a while, and the grpc-server side can sense the disconnection of the link,\nBut the grpc-client didn't feel the link disconnected immediately, since I set keepAliveTime to 6min, it always waited until 6min before sensing the connection error , I am on the client side, and there is a mechanism to reconnect when OnError is encountered, but the problem now is that the client side does not immediately perceive the connection disconnection, and there is a long vacuum period of keepAliveTime in the middle\nI hope, there is an elegant solution to this problem, I know I can use health checks to solve this problem again\nI know that pods in k8s will drift, is it because of this problem?</p>\n<h3>Actual behavior</h3>\n<p>It will periodically disconnect and the client will not notice</p>\n<p><a href=\"https://i.stack.imgur.com/GgotH.png\" rel=\"nofollow noreferrer\">grpc-client:</a></p>\n<p><a href=\"https://i.stack.imgur.com/xc2rn.png\" rel=\"nofollow noreferrer\">grpc-server:</a></p>\n<h3>Steps to reproduce</h3>\n<p>The version in k8s is 1.23,\nDeploy grpc-server and grpc-client inside, set keepAliveTime to 6 minutes</p>\n<h3>JVM version (e.g. <code>java -version</code>)</h3>\n<p>jdk 17</p>\n<h3>OS version (e.g. <code>uname -a</code>)</h3>\n<p>in k8s\nimage is ubuntun</p>\n<p>I think I can increase the regular health check to shorten the link disconnection time, but I want to find a more elegant way</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":205346,"reputation":48091,"user_id":454049,"accept_rate":72,"display_name":"LuckyLuke"},"score":5,"creation_date":1324286718,"post_id":8559257,"comment_id":10608499,"body_markdown":"Without you writing any iterations, or at all? http://stackoverflow.com/questions/4819635/how-to-remove-all-null-elements-from-a-arraylist","body":"Without you writing any iterations, or at all? <a href=\"http://stackoverflow.com/questions/4819635/how-to-remove-all-null-elements-from-a-arraylist\" title=\"how to remove all null elements from a arraylist\">stackoverflow.com/questions/4819635/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":368265,"reputation":39137,"user_id":714965,"accept_rate":83,"display_name":"Kai"},"score":5,"creation_date":1324287361,"post_id":8559306,"comment_id":10608661,"body_markdown":"I don&#39;t like extending such classes, as it could lead to confusing code. You should also keep in mind that you can also add items to the list with a [ListIterator](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ListIterator.html#add%28java.lang.Object%29)","body":"I don&#39;t like extending such classes, as it could lead to confusing code. You should also keep in mind that you can also add items to the list with a <a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ListIterator.html#add%28java.lang.Object%29\" rel=\"nofollow noreferrer\">ListIterator</a>"}],"tags":[],"owner":{"account_id":95910,"reputation":238649,"user_id":260990,"accept_rate":81,"display_name":"jmj"},"comment_count":1,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1324287532,"creation_date":1324286850,"answer_id":8559306,"question_id":8559257,"body_markdown":"Extend `ArrayList` and override `add()` &amp; `addAll()` method and simply don&#39;t allow `null`\r\n\r\nor you could use `list.removeAll(null);` as shown [here][1] &lt;sub&gt;Which internally iterates the loop&lt;/sub&gt;\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/4819635/how-to-remove-all-null-elements-from-a-arraylist","title":"Remove null elements from list","body":"<p>Extend <code>ArrayList</code> and override <code>add()</code> &amp; <code>addAll()</code> method and simply don't allow <code>null</code></p>\n\n<p>or you could use <code>list.removeAll(null);</code> as shown <a href=\"https://stackoverflow.com/questions/4819635/how-to-remove-all-null-elements-from-a-arraylist\">here</a> <sub>Which internally iterates the loop</sub></p>\n"},{"tags":[],"owner":{"account_id":220789,"reputation":114430,"user_id":478399,"accept_rate":83,"display_name":"AlexR"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1324286928,"creation_date":1324286928,"answer_id":8559322,"question_id":8559257,"body_markdown":"Take a look on LambdaJ that allows you to manipulate collections &quot;without&quot; loops. Actually the loops are implemented inside the library but it really cool and it simplifies you code and makes it shorter. ","title":"Remove null elements from list","body":"<p>Take a look on LambdaJ that allows you to manipulate collections \"without\" loops. Actually the loops are implemented inside the library but it really cool and it simplifies you code and makes it shorter. </p>\n"},{"comments":[{"owner":{"account_id":2501823,"reputation":2717,"user_id":2176708,"accept_rate":46,"display_name":"Hemanth"},"score":1,"creation_date":1454508433,"post_id":8559350,"comment_id":58075387,"body_markdown":"Time complexity of `List.removeAll()` is **n^2**. Just saying.","body":"Time complexity of <code>List.removeAll()</code> is <b>n^2</b>. Just saying."},{"owner":{"account_id":1437165,"reputation":7414,"user_id":1358283,"accept_rate":71,"display_name":"kratenko"},"score":0,"creation_date":1458138990,"post_id":8559350,"comment_id":59726663,"body_markdown":"@Hermanth Wouldn&#39;t the complexity be `n*m` with `m==1` for that singleton?","body":"@Hermanth Wouldn&#39;t the complexity be <code>n*m</code> with <code>m==1</code> for that singleton?"}],"tags":[],"owner":{"account_id":1116336,"reputation":619,"user_id":1105574,"display_name":"dveth"},"comment_count":2,"down_vote_count":0,"up_vote_count":54,"is_accepted":true,"score":54,"last_activity_date":1324294906,"creation_date":1324287174,"answer_id":8559350,"question_id":8559257,"body_markdown":"This should work:\r\n\r\n    list.removeAll(Collections.singleton(null));  ","title":"Remove null elements from list","body":"<p>This should work:</p>\n\n<pre><code>list.removeAll(Collections.singleton(null));  \n</code></pre>\n"},{"tags":[],"owner":{"account_id":1252086,"reputation":566,"user_id":1212298,"accept_rate":100,"display_name":"Jon Tinsman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1364830319,"creation_date":1364830319,"answer_id":15746370,"question_id":8559257,"body_markdown":"If you are building the list yourself and not sure if the value is null or not you can also use `CollectionUtils.addIgnoreNull(list,elementToAdd);` This will prevent null elements from being added. This only works when constructing the list. If you are receiving the list from somewhere else and want to remove all non-null elements prior to using the list, then the `list.removeAll(Collections.singleton(null));` will be best","title":"Remove null elements from list","body":"<p>If you are building the list yourself and not sure if the value is null or not you can also use <code>CollectionUtils.addIgnoreNull(list,elementToAdd);</code> This will prevent null elements from being added. This only works when constructing the list. If you are receiving the list from somewhere else and want to remove all non-null elements prior to using the list, then the <code>list.removeAll(Collections.singleton(null));</code> will be best</p>\n"},{"comments":[{"owner":{"account_id":2021830,"reputation":559,"user_id":1807809,"accept_rate":80,"display_name":"Damodar Dahal"},"score":0,"creation_date":1460305296,"post_id":29295242,"comment_id":60668333,"body_markdown":"Questions should be asked on a separate thread. [Click here](http://stackoverflow.com/questions/ask) if you want to ask your question. Answering a question means answering a question, not asking yet another question.","body":"Questions should be asked on a separate thread. <a href=\"http://stackoverflow.com/questions/ask\">Click here</a> if you want to ask your question. Answering a question means answering a question, not asking yet another question."}],"tags":[],"owner":{"account_id":5738006,"reputation":1,"user_id":4531481,"display_name":"Shafique Mahar"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1427443516,"creation_date":1427440590,"answer_id":29295242,"question_id":8559257,"body_markdown":"    for (int i = 0; i &lt;array.size(); i++) {\r\n        for (int j = 0; j &lt; array.size()-i-1; j++) {\r\n            if (array.get(j) &gt; array.get(j+i)){\r\n                Integer t = array.get(j+i);\r\n                array.set(j+i,array.get(j));\r\n                array.set(j,t);\r\n            }\r\n        }\r\n    }\r\n\r\n    for(int i = array.size()-1; i &gt;= 0; i--){\r\nIts a ascending order , what will be  descending order of this problem ?\r\n  ","title":"Remove null elements from list","body":"<pre><code>for (int i = 0; i &lt;array.size(); i++) {\n    for (int j = 0; j &lt; array.size()-i-1; j++) {\n        if (array.get(j) &gt; array.get(j+i)){\n            Integer t = array.get(j+i);\n            array.set(j+i,array.get(j));\n            array.set(j,t);\n        }\n    }\n}\n\nfor(int i = array.size()-1; i &gt;= 0; i--){\n</code></pre>\n\n<p>Its a ascending order , what will be  descending order of this problem ?</p>\n"},{"tags":[],"owner":{"account_id":6376905,"reputation":4709,"user_id":4947520,"accept_rate":0,"display_name":"Paraneetharan Saravanaperumal"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1432805617,"creation_date":1432805617,"answer_id":30502622,"question_id":8559257,"body_markdown":"not efficient, but works\r\n\r\n`while(list.remove(null));`\r\n","title":"Remove null elements from list","body":"<p>not efficient, but works</p>\n\n<p><code>while(list.remove(null));</code></p>\n"},{"tags":[],"owner":{"account_id":7869123,"reputation":1,"user_id":5947052,"display_name":"Flavio"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1455813747,"creation_date":1455813747,"answer_id":35487386,"question_id":8559257,"body_markdown":"Using `google.common.`:\r\n\r\n    import com.google.common.collect.Iterables;\r\n    import com.google.common.collect.Lists;\r\n\r\n    public List&lt;String&gt; removeBlanks(List&lt;String&gt; list) {\r\n\t\treturn Lists.newArrayList(Iterables.filter(list, new Predicate&lt;String&gt;() {\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic boolean apply(String arg) {\r\n\t\t\t\treturn StringUtils.isNotEmpty(arg);\r\n\t\t\t}\r\n\t\t}));\r\n\t}","title":"Remove null elements from list","body":"<p>Using <code>google.common.</code>:</p>\n\n<pre><code>import com.google.common.collect.Iterables;\nimport com.google.common.collect.Lists;\n\npublic List&lt;String&gt; removeBlanks(List&lt;String&gt; list) {\n    return Lists.newArrayList(Iterables.filter(list, new Predicate&lt;String&gt;() {\n\n        @Override\n        public boolean apply(String arg) {\n            return StringUtils.isNotEmpty(arg);\n        }\n    }));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3583958,"reputation":80987,"user_id":2991525,"display_name":"fabian"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1476796578,"creation_date":1476796578,"answer_id":40109371,"question_id":8559257,"body_markdown":"In java 8 you can use [`Collection.removeIf`][1]:\r\n\r\n    list.removeIf(Objects::isNull);\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html#removeIf-java.util.function.Predicate-","title":"Remove null elements from list","body":"<p>In java 8 you can use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html#removeIf-java.util.function.Predicate-\" rel=\"noreferrer\"><code>Collection.removeIf</code></a>:</p>\n\n<pre><code>list.removeIf(Objects::isNull);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4647011,"reputation":41835,"user_id":3764965,"accept_rate":94,"display_name":"Nikolas Charalambidis"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1605794222,"creation_date":1605785058,"answer_id":64910701,"question_id":8559257,"body_markdown":"The current answers don&#39;t distinguish the mutable and immutable lists and I find a lot of ways missing. This becomes even more important with `List.of(..)` introduced as of [tag:java-9], although one [cannot][1] pass a `null` element to it. The removal is relevant anyway (ex. removing a certain non-null element).\r\n\r\n\r\n**Immutable List**\r\n\r\nAn example of a immutable list is `Arrays.asList(..)` (yet the elements can still be replaced, but not added/removed) or already mentioned `List.of(..)`. These are considered as &quot;immutable wrappers&quot; as long as one cannot add/remove an element using the `List` methods.\r\n\r\n    List&lt;String&gt; immutableList = Arrays.asList(&quot;one&quot;, null, &quot;two&quot;);\r\n\r\n - [tag:java-stream] as of [tag:java-8] using the `Stream#filter(Predicate)` method:\r\n\r\n       List&lt;String&gt; newList = immutableList.stream()\r\n           .filter(Objects::nonNull)\r\n           .collect(Collectors.toList());\r\n\r\n - For-each loop either with indices or the enhanced one is suitable (not only) for Java versions [tag:java-7] and lower.\r\n\r\n       // note we need to create a mutable List to add the non-null elements\r\n       List&lt;String&gt; newList = new ArrayList&lt;&gt;();\r\n       for (String str: immutableList) {\r\n           if (str != null) {\r\n                newList.add(str);\r\n           }\r\n       }\r\n\r\n**Mutable List**\r\n\r\nAn example of a mutable list is a new instance of the `List` interface such as `new ArrayList&lt;&gt;()` or `new LinkedList&lt;&gt;()`. They are mutable, therefore adding the elements using `List#add` or `List#addAll` is possible and a common way to do so.\r\n\r\n    List&lt;String&gt; mutableList = new ArrayList&lt;&gt;(Arrays.asList(&quot;one&quot;, null, &quot;two&quot;));\r\n\r\nHere are listed ways to remove all the `null` elements from such `List`. Note it *modifies* the list.\r\n\r\n - `List#removeIf(Predicate)` as of [tag:java-8]\r\n\r\n       mutableList.removeIf(Objects::isNull);\r\n\r\n - `Iterator` is a recommended way to remove elements from a `List` and is suitable (not only) for Java versions [tag:java-7] and lower\r\n\r\n       Iterator&lt;String&gt; iterator = mutableList.iterator();\r\n       while (iterator.hasNext()) {\r\n           if (iterator.next() == null) {\r\n               iterator.remove();\r\n           }\r\n       }\r\n\r\n - All the ways mentioned in the **Immutable List** section which always results in a new `List`.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/9/docs/api/java/util/List.html#of-E...-","title":"Remove null elements from list","body":"<p>The current answers don't distinguish the mutable and immutable lists and I find a lot of ways missing. This becomes even more important with <code>List.of(..)</code> introduced as of <a href=\"/questions/tagged/java-9\" class=\"post-tag\" title=\"show questions tagged &#39;java-9&#39;\" rel=\"tag\">java-9</a>, although one <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/List.html#of-E...-\" rel=\"nofollow noreferrer\">cannot</a> pass a <code>null</code> element to it. The removal is relevant anyway (ex. removing a certain non-null element).</p>\n<p><strong>Immutable List</strong></p>\n<p>An example of a immutable list is <code>Arrays.asList(..)</code> (yet the elements can still be replaced, but not added/removed) or already mentioned <code>List.of(..)</code>. These are considered as &quot;immutable wrappers&quot; as long as one cannot add/remove an element using the <code>List</code> methods.</p>\n<pre><code>List&lt;String&gt; immutableList = Arrays.asList(&quot;one&quot;, null, &quot;two&quot;);\n</code></pre>\n<ul>\n<li><p><a href=\"/questions/tagged/java-stream\" class=\"post-tag\" title=\"show questions tagged &#39;java-stream&#39;\" rel=\"tag\">java-stream</a> as of <a href=\"/questions/tagged/java-8\" class=\"post-tag\" title=\"show questions tagged &#39;java-8&#39;\" rel=\"tag\">java-8</a> using the <code>Stream#filter(Predicate)</code> method:</p>\n<pre><code>List&lt;String&gt; newList = immutableList.stream()\n    .filter(Objects::nonNull)\n    .collect(Collectors.toList());\n</code></pre>\n</li>\n<li><p>For-each loop either with indices or the enhanced one is suitable (not only) for Java versions <a href=\"/questions/tagged/java-7\" class=\"post-tag\" title=\"show questions tagged &#39;java-7&#39;\" rel=\"tag\">java-7</a> and lower.</p>\n<pre><code>// note we need to create a mutable List to add the non-null elements\nList&lt;String&gt; newList = new ArrayList&lt;&gt;();\nfor (String str: immutableList) {\n    if (str != null) {\n         newList.add(str);\n    }\n}\n</code></pre>\n</li>\n</ul>\n<p><strong>Mutable List</strong></p>\n<p>An example of a mutable list is a new instance of the <code>List</code> interface such as <code>new ArrayList&lt;&gt;()</code> or <code>new LinkedList&lt;&gt;()</code>. They are mutable, therefore adding the elements using <code>List#add</code> or <code>List#addAll</code> is possible and a common way to do so.</p>\n<pre><code>List&lt;String&gt; mutableList = new ArrayList&lt;&gt;(Arrays.asList(&quot;one&quot;, null, &quot;two&quot;));\n</code></pre>\n<p>Here are listed ways to remove all the <code>null</code> elements from such <code>List</code>. Note it <em>modifies</em> the list.</p>\n<ul>\n<li><p><code>List#removeIf(Predicate)</code> as of <a href=\"/questions/tagged/java-8\" class=\"post-tag\" title=\"show questions tagged &#39;java-8&#39;\" rel=\"tag\">java-8</a></p>\n<pre><code>mutableList.removeIf(Objects::isNull);\n</code></pre>\n</li>\n<li><p><code>Iterator</code> is a recommended way to remove elements from a <code>List</code> and is suitable (not only) for Java versions <a href=\"/questions/tagged/java-7\" class=\"post-tag\" title=\"show questions tagged &#39;java-7&#39;\" rel=\"tag\">java-7</a> and lower</p>\n<pre><code>Iterator&lt;String&gt; iterator = mutableList.iterator();\nwhile (iterator.hasNext()) {\n    if (iterator.next() == null) {\n        iterator.remove();\n    }\n}\n</code></pre>\n</li>\n<li><p>All the ways mentioned in the <strong>Immutable List</strong> section which always results in a new <code>List</code>.</p>\n</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":19073205,"reputation":341,"user_id":13926931,"display_name":"reubennn"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675828141,"creation_date":1675828141,"answer_id":75381200,"question_id":8559257,"body_markdown":"You could use a Java Stream to filter out the nullable elements:\r\n\r\n```\r\nlist.stream()\r\n    .filter(Objects::nonNull)\r\n    .collect(Collectors.toList())\r\n```","title":"Remove null elements from list","body":"<p>You could use a Java Stream to filter out the nullable elements:</p>\n<pre><code>list.stream()\n    .filter(Objects::nonNull)\n    .collect(Collectors.toList())\n</code></pre>\n"}],"owner":{"account_id":1029905,"reputation":1357,"user_id":1038438,"accept_rate":38,"display_name":"Noufal Panolan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34869,"favorite_count":0,"down_vote_count":1,"up_vote_count":29,"accepted_answer_id":8559350,"answer_count":10,"score":28,"last_activity_date":1675828141,"creation_date":1324286581,"question_id":8559257,"body_markdown":"    List&lt;String&gt; list = new ArrayList&lt;String&gt;();\r\n      list.add(&quot;One&quot;);\r\n      list.add(null);\r\n      list.add(&quot;Two!&quot;);\r\n      list.add(null);\r\n      list.add(&quot;Three&quot;);\r\n      list.add(null);\r\n      list.add(&quot;Four&quot;);\r\n      list.add(null);\r\n\r\n\r\n\r\nI have a list containing **null** elements. Is there any way to remove the **null** elements from the current collection without using any iterations?","title":"Remove null elements from list","body":"<pre><code>List&lt;String&gt; list = new ArrayList&lt;String&gt;();\n  list.add(\"One\");\n  list.add(null);\n  list.add(\"Two!\");\n  list.add(null);\n  list.add(\"Three\");\n  list.add(null);\n  list.add(\"Four\");\n  list.add(null);\n</code></pre>\n\n<p>I have a list containing <strong>null</strong> elements. Is there any way to remove the <strong>null</strong> elements from the current collection without using any iterations?</p>\n"},{"tags":["java","elasticsearch","powermock"],"answers":[{"comments":[{"owner":{"account_id":14006611,"reputation":165,"user_id":10116567,"display_name":"leon"},"score":0,"creation_date":1693028645,"post_id":75381192,"comment_id":135708766,"body_markdown":"is this really testing anything if you are just mocking the return as well?","body":"is this really testing anything if you are just mocking the return as well?"}],"tags":[],"owner":{"account_id":7249347,"reputation":699,"user_id":5530229,"accept_rate":60,"display_name":"sudhanva"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675828013,"creation_date":1675828013,"answer_id":75381192,"question_id":75297658,"body_markdown":"I finally ended up not mocking the Aggregations object. Calling the constructor with terms as object took care of what I needed to do.\r\nMy final code looks something like this:\r\n```\r\n@Test \r\npublic void testAggregation() {\r\n    RestHighLevelClient client = PowerMockito.mock(RestHighLevelClient.class);\r\n        testObject.setClient(client);\r\n        SearchResponse response = PowerMockito.mock(SearchResponse.class);\r\n\r\n        Terms terms = PowerMockito.mock(Terms.class);\r\n        // mock terms object calls here\r\n        Aggregations aggregations = new Aggregations(terms);\r\n        PowerMockito.when(client.search(any(SearchRequest.class), any(RequestOptions.class))).thenReturn(response);\r\n        PowerMockito.when(response.getAggregations()).thenReturn(aggregations); \r\n        testObject.aggregation();\r\n}","title":"Unable to mock Aggregations#get method from elasticsearch","body":"<p>I finally ended up not mocking the Aggregations object. Calling the constructor with terms as object took care of what I needed to do.\nMy final code looks something like this:</p>\n<pre><code>@Test \npublic void testAggregation() {\n    RestHighLevelClient client = PowerMockito.mock(RestHighLevelClient.class);\n        testObject.setClient(client);\n        SearchResponse response = PowerMockito.mock(SearchResponse.class);\n\n        Terms terms = PowerMockito.mock(Terms.class);\n        // mock terms object calls here\n        Aggregations aggregations = new Aggregations(terms);\n        PowerMockito.when(client.search(any(SearchRequest.class), any(RequestOptions.class))).thenReturn(response);\n        PowerMockito.when(response.getAggregations()).thenReturn(aggregations); \n        testObject.aggregation();\n}\n</code></pre>\n"}],"owner":{"account_id":7249347,"reputation":699,"user_id":5530229,"accept_rate":60,"display_name":"sudhanva"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":309,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75381192,"answer_count":1,"score":0,"last_activity_date":1675828013,"creation_date":1675170453,"question_id":75297658,"body_markdown":"I am trying to test a class using elasticsearch aggregation framework and for some reason am unable to mock the get method of the Aggregations object. \r\nI have the relevant classes in `@PrepareForTest` annotation and also have the `@Runwith(PowerMockRunner)`  annotation in the test class.\r\n\r\nAny suggestions on what I could change to make it work?\r\n\r\nMy method under test: \r\n\r\n```\r\n\r\npublic void aggregation() {\r\n\t//prepare aggregation query\r\n\tSearchResponse response = client.search(query, RequestOptions.DEFAULT);\r\n\tAggregations aggregations = response.getAggregations(); // mocked aggregations object gets set \r\n\tTerms terms = aggregations.get(&quot;field&quot;); //throws NullPointerException\r\n\t//use terms object\r\n}\r\n```\r\n\r\nMy test method:\r\n```\r\n@Test \r\npublic void testAggregation() {\r\n\tRestHighLevelClient client = PowerMockito.mock(RestHighLevelClient.class);\r\n\t\ttestObject.setClient(client);\r\n\t\tSearchResponse response = PowerMockito.mock(SearchResponse.class);\r\n\t\tAggregations aggregations = PowerMockito.mock(Aggregations.class);\r\n\t\tTerms terms = PowerMockito.mock(Terms.class);\r\n\t\tPowerMockito.when(client.search(any(SearchRequest.class), any(RequestOptions.class))).thenReturn(response);\r\n\t\tPowerMockito.when(response.getAggregations()).thenReturn(aggregations); \r\n\t\tPowerMockito.when(aggregations.get(anyString())).thenReturn(terms); // aggregations.get(&quot;field&quot;) throws NullPointerException\r\n\ttestObject.aggregation();\r\n}\r\n```\r\n\r\nStack trace:\r\n```\r\n&quot;org.elasticsearch.search.aggregations.Aggregations.equals(Aggregations.java:106)&quot;\r\n&quot;org.mockito.internal.invocation.InvocationMatcher.matches(InvocationMatcher.java:61)&quot;\r\n&quot;org.mockito.internal.stubbing.InvocationContainerImpl.findAnswerFor(InvocationContainerImpl.java:79)&quot;\r\n&quot;org.mockito.internal.handler.MockHandlerImpl.handle(MockHandlerImpl.java:87)&quot;\r\n&quot;org.powermock.api.mockito.internal.invocation.MockitoMethodInvocationControl.performIntercept(MockitoMethodInvocationControl.java:244)&quot;\r\n&quot;org.powermock.api.mockito.internal.invocation.MockitoMethodInvocationControl.invoke(MockitoMethodInvocationControl.java:196)&quot;\r\n&quot;org.powermock.core.MockGateway.doMethodCall(MockGateway.java:182)&quot;\r\n&quot;org.powermock.core.MockGateway.doMethodCall(MockGateway.java:164)&quot;\r\n&quot;org.powermock.core.MockGateway.methodCall(MockGateway.java:134)&quot;\r\n&quot;org.elasticsearch.search.aggregations.Aggregations.get(Aggregations.java)&quot;\r\n```","title":"Unable to mock Aggregations#get method from elasticsearch","body":"<p>I am trying to test a class using elasticsearch aggregation framework and for some reason am unable to mock the get method of the Aggregations object.\nI have the relevant classes in <code>@PrepareForTest</code> annotation and also have the <code>@Runwith(PowerMockRunner)</code>  annotation in the test class.</p>\n<p>Any suggestions on what I could change to make it work?</p>\n<p>My method under test:</p>\n<pre><code>\npublic void aggregation() {\n    //prepare aggregation query\n    SearchResponse response = client.search(query, RequestOptions.DEFAULT);\n    Aggregations aggregations = response.getAggregations(); // mocked aggregations object gets set \n    Terms terms = aggregations.get(&quot;field&quot;); //throws NullPointerException\n    //use terms object\n}\n</code></pre>\n<p>My test method:</p>\n<pre><code>@Test \npublic void testAggregation() {\n    RestHighLevelClient client = PowerMockito.mock(RestHighLevelClient.class);\n        testObject.setClient(client);\n        SearchResponse response = PowerMockito.mock(SearchResponse.class);\n        Aggregations aggregations = PowerMockito.mock(Aggregations.class);\n        Terms terms = PowerMockito.mock(Terms.class);\n        PowerMockito.when(client.search(any(SearchRequest.class), any(RequestOptions.class))).thenReturn(response);\n        PowerMockito.when(response.getAggregations()).thenReturn(aggregations); \n        PowerMockito.when(aggregations.get(anyString())).thenReturn(terms); // aggregations.get(&quot;field&quot;) throws NullPointerException\n    testObject.aggregation();\n}\n</code></pre>\n<p>Stack trace:</p>\n<pre><code>&quot;org.elasticsearch.search.aggregations.Aggregations.equals(Aggregations.java:106)&quot;\n&quot;org.mockito.internal.invocation.InvocationMatcher.matches(InvocationMatcher.java:61)&quot;\n&quot;org.mockito.internal.stubbing.InvocationContainerImpl.findAnswerFor(InvocationContainerImpl.java:79)&quot;\n&quot;org.mockito.internal.handler.MockHandlerImpl.handle(MockHandlerImpl.java:87)&quot;\n&quot;org.powermock.api.mockito.internal.invocation.MockitoMethodInvocationControl.performIntercept(MockitoMethodInvocationControl.java:244)&quot;\n&quot;org.powermock.api.mockito.internal.invocation.MockitoMethodInvocationControl.invoke(MockitoMethodInvocationControl.java:196)&quot;\n&quot;org.powermock.core.MockGateway.doMethodCall(MockGateway.java:182)&quot;\n&quot;org.powermock.core.MockGateway.doMethodCall(MockGateway.java:164)&quot;\n&quot;org.powermock.core.MockGateway.methodCall(MockGateway.java:134)&quot;\n&quot;org.elasticsearch.search.aggregations.Aggregations.get(Aggregations.java)&quot;\n</code></pre>\n"},{"tags":["java","serialization","deserialization","xstream","jettison"],"owner":{"account_id":20856183,"reputation":41,"user_id":15319442,"display_name":"nik2811"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":288,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675827529,"creation_date":1675827529,"question_id":75381165,"body_markdown":"I&#39;ve below code which deserializes my code and returns a HashMap for Jettisons version 1.2.\r\n\r\nBut when I switched the jettisons to 1.5.3 this code breaks with the exception mentioned below.\r\n\r\nCan someone please help?\r\n\r\n\\--main.class\r\n\r\n```\r\npackage org.example;\r\n\r\nimport com.thoughtworks.xstream.XStream;\r\nimport com.thoughtworks.xstream.io.json.JettisonMappedXmlDriver;\r\n\r\nimport java.io.*;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) throws IOException {\r\n        Person person = new Person(22,&quot;Nikhil&quot;,&quot;India&quot;);\r\n        Map&lt;String,Object&gt; map = new HashMap&lt;&gt;();\r\n\r\n        map.put(&quot;Person1&quot;,person);\r\n\r\n        XStream xStream =  new XStream(new JettisonMappedXmlDriver());\r\n        xStream.allowTypes(new Class[]{Person.class});\r\n        //1003\r\n        String str = xStream.toXML(map);\r\n\r\n        System.out.println(&quot;toXML ==&gt; &quot; + str);\r\n        Map&lt;String,Object&gt; map1 = (Map&lt;String,Object&gt;)xStream.fromXML(str);\r\n        System.out.println(&quot;fromXML ==&gt; &quot; + map1);\r\n    }\r\n}\r\n```\r\n\r\n\\--person.class\r\n\r\n```\r\npackage org.example;\r\n\r\npublic class Person {\r\n    private int age;\r\n    private String name,address;\r\n\r\n    public Person(int age, String name, String address) {\r\n        this.age = age;\r\n        this.name = name;\r\n        this.address = address;\r\n    }\r\n\r\n    public Person() {\r\n    }\r\n\r\n    public int getAge() {\r\n        return age;\r\n    }\r\n\r\n    public void setAge(int age) {\r\n        this.age = age;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public String getAddress() {\r\n        return address;\r\n    }\r\n\r\n    public void setAddress(String address) {\r\n        this.address = address;\r\n    }\r\n}\r\n```\r\n\r\n\\--output for 1.2 jettisons\r\n\r\n```\r\ntoXML ==&gt; {&quot;map&quot;:[{&quot;entry&quot;:{&quot;string&quot;:&quot;Person1&quot;,&quot;org.example.Person&quot;:{&quot;age&quot;:22,&quot;name&quot;:&quot;Nikhil&quot;,&quot;address&quot;:&quot;India&quot;}}}]}\r\nfromXML ==&gt; {Person1=org.example.Person@d4342c2}\r\n```\r\n\r\n\\--output for 1.5.3 jettisons\r\n\r\n```\r\ntoXML ==&gt; {&quot;map&quot;:[{&quot;entry&quot;:{&quot;string&quot;:&quot;Person1&quot;,&quot;org.example.Person&quot;:{&quot;age&quot;:22,&quot;name&quot;:&quot;Nikhil&quot;,&quot;address&quot;:&quot;India&quot;}}}]}\r\nException in thread &quot;main&quot; com.thoughtworks.xstream.converters.ConversionException: Cannot construct type\r\n---- Debugging information ----\r\nmessage             : Cannot construct type\r\ncause-exception     : java.lang.InstantiationException\r\ncause-message       : java.util.Map$Entry\r\nconstruction-type   : java.util.Map$Entry\r\nclass               : java.util.Map$Entry\r\nrequired-type       : java.util.Map$Entry\r\nconverter-type      : com.thoughtworks.xstream.converters.reflection.ReflectionConverter\r\npath                : /map/map/entry\r\nline number         : -1\r\nclass[1]            : java.util.HashMap\r\nrequired-type[1]    : java.util.HashMap\r\nconverter-type[1]   : com.thoughtworks.xstream.converters.collections.MapConverter\r\nversion             : 1.4.20\r\n-------------------------------\r\n\tat com.thoughtworks.xstream.converters.reflection.SunLimitedUnsafeReflectionProvider.newInstance(SunLimitedUnsafeReflectionProvider.java:89)\r\n\tat com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.instantiateNewInstance(AbstractReflectionConverter.java:580)\r\n\tat com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarshal(AbstractReflectionConverter.java:276)\r\n\tat com.thoughtworks.xstream.core.TreeUnmarshaller.convert(TreeUnmarshaller.java:74)\r\n\tat com.thoughtworks.xstream.core.AbstractReferenceUnmarshaller.convert(AbstractReferenceUnmarshaller.java:72)\r\n\tat com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:68)\r\n\tat com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:52)\r\n\tat com.thoughtworks.xstream.converters.collections.AbstractCollectionConverter.readBareItem(AbstractCollectionConverter.java:132)\r\n\tat com.thoughtworks.xstream.converters.collections.AbstractCollectionConverter.readItem(AbstractCollectionConverter.java:117)\r\n\tat com.thoughtworks.xstream.converters.collections.AbstractCollectionConverter.readCompleteItem(AbstractCollectionConverter.java:147)\r\n\tat com.thoughtworks.xstream.converters.collections.MapConverter.putCurrentEntryIntoMap(MapConverter.java:106)\r\n\tat com.thoughtworks.xstream.converters.collections.MapConverter.populateMap(MapConverter.java:99)\r\n\tat com.thoughtworks.xstream.converters.collections.MapConverter.populateMap(MapConverter.java:93)\r\n\tat com.thoughtworks.xstream.converters.collections.MapConverter.unmarshal(MapConverter.java:88)\r\n\tat com.thoughtworks.xstream.core.TreeUnmarshaller.convert(TreeUnmarshaller.java:74)\r\n\tat com.thoughtworks.xstream.core.AbstractReferenceUnmarshaller.convert(AbstractReferenceUnmarshaller.java:72)\r\n\tat com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:68)\r\n\tat com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:52)\r\n\tat com.thoughtworks.xstream.core.TreeUnmarshaller.start(TreeUnmarshaller.java:136)\r\n\tat com.thoughtworks.xstream.core.AbstractTreeMarshallingStrategy.unmarshal(AbstractTreeMarshallingStrategy.java:32)\r\n\tat com.thoughtworks.xstream.XStream.unmarshal(XStream.java:1464)\r\n\tat com.thoughtworks.xstream.XStream.unmarshal(XStream.java:1441)\r\n\tat com.thoughtworks.xstream.XStream.fromXML(XStream.java:1321)\r\n\tat com.thoughtworks.xstream.XStream.fromXML(XStream.java:1312)\r\n\tat org.example.Main.main(Main.java:23)\r\nCaused by: java.lang.InstantiationException: java.util.Map$Entry\r\n\tat java.base/jdk.internal.misc.Unsafe.allocateInstance(Native Method)\r\n\tat jdk.unsupported/sun.misc.Unsafe.allocateInstance(Unsafe.java:839)\r\n\tat com.thoughtworks.xstream.converters.reflection.SunLimitedUnsafeReflectionProvider.newInstance(SunLimitedUnsafeReflectionProvider.java:85)\r\n\t... 24 more\r\n```\r\n\r\nI&#39;ve tried to ObjectMapper by Jackson, but it returns a LinkedHashMap while deserialization. I&#39;m expecting a HashMap.","title":"Deserialization fails for Xstream 1.4.20 and Jettisons 1.5.3","body":"<p>I've below code which deserializes my code and returns a HashMap for Jettisons version 1.2.</p>\n<p>But when I switched the jettisons to 1.5.3 this code breaks with the exception mentioned below.</p>\n<p>Can someone please help?</p>\n<p>--main.class</p>\n<pre><code>package org.example;\n\nimport com.thoughtworks.xstream.XStream;\nimport com.thoughtworks.xstream.io.json.JettisonMappedXmlDriver;\n\nimport java.io.*;\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class Main {\n    public static void main(String[] args) throws IOException {\n        Person person = new Person(22,&quot;Nikhil&quot;,&quot;India&quot;);\n        Map&lt;String,Object&gt; map = new HashMap&lt;&gt;();\n\n        map.put(&quot;Person1&quot;,person);\n\n        XStream xStream =  new XStream(new JettisonMappedXmlDriver());\n        xStream.allowTypes(new Class[]{Person.class});\n        //1003\n        String str = xStream.toXML(map);\n\n        System.out.println(&quot;toXML ==&gt; &quot; + str);\n        Map&lt;String,Object&gt; map1 = (Map&lt;String,Object&gt;)xStream.fromXML(str);\n        System.out.println(&quot;fromXML ==&gt; &quot; + map1);\n    }\n}\n</code></pre>\n<p>--person.class</p>\n<pre><code>package org.example;\n\npublic class Person {\n    private int age;\n    private String name,address;\n\n    public Person(int age, String name, String address) {\n        this.age = age;\n        this.name = name;\n        this.address = address;\n    }\n\n    public Person() {\n    }\n\n    public int getAge() {\n        return age;\n    }\n\n    public void setAge(int age) {\n        this.age = age;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getAddress() {\n        return address;\n    }\n\n    public void setAddress(String address) {\n        this.address = address;\n    }\n}\n</code></pre>\n<p>--output for 1.2 jettisons</p>\n<pre><code>toXML ==&gt; {&quot;map&quot;:[{&quot;entry&quot;:{&quot;string&quot;:&quot;Person1&quot;,&quot;org.example.Person&quot;:{&quot;age&quot;:22,&quot;name&quot;:&quot;Nikhil&quot;,&quot;address&quot;:&quot;India&quot;}}}]}\nfromXML ==&gt; {Person1=org.example.Person@d4342c2}\n</code></pre>\n<p>--output for 1.5.3 jettisons</p>\n<pre><code>toXML ==&gt; {&quot;map&quot;:[{&quot;entry&quot;:{&quot;string&quot;:&quot;Person1&quot;,&quot;org.example.Person&quot;:{&quot;age&quot;:22,&quot;name&quot;:&quot;Nikhil&quot;,&quot;address&quot;:&quot;India&quot;}}}]}\nException in thread &quot;main&quot; com.thoughtworks.xstream.converters.ConversionException: Cannot construct type\n---- Debugging information ----\nmessage             : Cannot construct type\ncause-exception     : java.lang.InstantiationException\ncause-message       : java.util.Map$Entry\nconstruction-type   : java.util.Map$Entry\nclass               : java.util.Map$Entry\nrequired-type       : java.util.Map$Entry\nconverter-type      : com.thoughtworks.xstream.converters.reflection.ReflectionConverter\npath                : /map/map/entry\nline number         : -1\nclass[1]            : java.util.HashMap\nrequired-type[1]    : java.util.HashMap\nconverter-type[1]   : com.thoughtworks.xstream.converters.collections.MapConverter\nversion             : 1.4.20\n-------------------------------\n    at com.thoughtworks.xstream.converters.reflection.SunLimitedUnsafeReflectionProvider.newInstance(SunLimitedUnsafeReflectionProvider.java:89)\n    at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.instantiateNewInstance(AbstractReflectionConverter.java:580)\n    at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarshal(AbstractReflectionConverter.java:276)\n    at com.thoughtworks.xstream.core.TreeUnmarshaller.convert(TreeUnmarshaller.java:74)\n    at com.thoughtworks.xstream.core.AbstractReferenceUnmarshaller.convert(AbstractReferenceUnmarshaller.java:72)\n    at com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:68)\n    at com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:52)\n    at com.thoughtworks.xstream.converters.collections.AbstractCollectionConverter.readBareItem(AbstractCollectionConverter.java:132)\n    at com.thoughtworks.xstream.converters.collections.AbstractCollectionConverter.readItem(AbstractCollectionConverter.java:117)\n    at com.thoughtworks.xstream.converters.collections.AbstractCollectionConverter.readCompleteItem(AbstractCollectionConverter.java:147)\n    at com.thoughtworks.xstream.converters.collections.MapConverter.putCurrentEntryIntoMap(MapConverter.java:106)\n    at com.thoughtworks.xstream.converters.collections.MapConverter.populateMap(MapConverter.java:99)\n    at com.thoughtworks.xstream.converters.collections.MapConverter.populateMap(MapConverter.java:93)\n    at com.thoughtworks.xstream.converters.collections.MapConverter.unmarshal(MapConverter.java:88)\n    at com.thoughtworks.xstream.core.TreeUnmarshaller.convert(TreeUnmarshaller.java:74)\n    at com.thoughtworks.xstream.core.AbstractReferenceUnmarshaller.convert(AbstractReferenceUnmarshaller.java:72)\n    at com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:68)\n    at com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:52)\n    at com.thoughtworks.xstream.core.TreeUnmarshaller.start(TreeUnmarshaller.java:136)\n    at com.thoughtworks.xstream.core.AbstractTreeMarshallingStrategy.unmarshal(AbstractTreeMarshallingStrategy.java:32)\n    at com.thoughtworks.xstream.XStream.unmarshal(XStream.java:1464)\n    at com.thoughtworks.xstream.XStream.unmarshal(XStream.java:1441)\n    at com.thoughtworks.xstream.XStream.fromXML(XStream.java:1321)\n    at com.thoughtworks.xstream.XStream.fromXML(XStream.java:1312)\n    at org.example.Main.main(Main.java:23)\nCaused by: java.lang.InstantiationException: java.util.Map$Entry\n    at java.base/jdk.internal.misc.Unsafe.allocateInstance(Native Method)\n    at jdk.unsupported/sun.misc.Unsafe.allocateInstance(Unsafe.java:839)\n    at com.thoughtworks.xstream.converters.reflection.SunLimitedUnsafeReflectionProvider.newInstance(SunLimitedUnsafeReflectionProvider.java:85)\n    ... 24 more\n</code></pre>\n<p>I've tried to ObjectMapper by Jackson, but it returns a LinkedHashMap while deserialization. I'm expecting a HashMap.</p>\n"},{"tags":["java","arrays","for-loop","foreach"],"comments":[{"owner":{"account_id":248321,"reputation":62668,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":0,"creation_date":1675825787,"post_id":75381026,"comment_id":133010260,"body_markdown":"&quot;In for loop, I got addresses of elements instead of elements themselves.&quot; - **No**; you got **some numbers**, which happen to be the ones you can use to **index** the array. &quot;I expected either address from both loops or elements.&quot; I can&#39;t understand why. If they did the same thing, what would be the point of putting both of them into the language?","body":"&quot;In for loop, I got addresses of elements instead of elements themselves.&quot; - <b>No</b>; you got <b>some numbers</b>, which happen to be the ones you can use to <b>index</b> the array. &quot;I expected either address from both loops or elements.&quot; I can&#39;t understand why. If they did the same thing, what would be the point of putting both of them into the language?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1675825881,"post_id":75381026,"comment_id":133010267,"body_markdown":"In your `for` loop you are just printing `z` each iteration, which has nothing to do with the loop.","body":"In your <code>for</code> loop you are just printing <code>z</code> each iteration, which has nothing to do with the loop."},{"owner":{"account_id":248321,"reputation":62668,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":1,"creation_date":1675826024,"post_id":75381026,"comment_id":133010290,"body_markdown":"&quot;So how this is working even I didn&#39;t override toString method also but am getting elements!!&quot; The elements of the array **are integers**, so they would look the same way as what you get from the other loop - just with different values. The weird `[I@5a07e868` things that you see printed have **nothing to do with** &quot;elements&quot; (and &quot;element&quot; is not a type; it just means &quot;one of the things that is in the array); that is the text that Java uses to display **the array**. It does that because the code says `System.out.println(z);`, and `z` means **the array**.","body":"&quot;So how this is working even I didn&#39;t override toString method also but am getting elements!!&quot; The elements of the array <b>are integers</b>, so they would look the same way as what you get from the other loop - just with different values. The weird <code>[I@5a07e868</code> things that you see printed have <b>nothing to do with</b> &quot;elements&quot; (and &quot;element&quot; is not a type; it just means &quot;one of the things that is in the array); that is the text that Java uses to display <b>the array</b>. It does that because the code says <code>System.out.println(z);</code>, and <code>z</code> means <b>the array</b>."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1675826354,"post_id":75381026,"comment_id":133010317,"body_markdown":"In Java, an array is a reference type. The line  `System.out.println(z);` uses the [default `toString` method](https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html#toString()), inherited from `Object`.  See https://stackoverflow.com/questions/4712139/why-does-the-default-object-tostring-include-the-hashcode .","body":"In Java, an array is a reference type. The line  <code>System.out.println(z);</code> uses the <a href=\"https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html#toString()\" rel=\"nofollow noreferrer\">default <code>toString</code> method</a>, inherited from <code>Object</code>.  See <a href=\"https://stackoverflow.com/questions/4712139/why-does-the-default-object-tostring-include-the-hashcode\" title=\"why does the default object tostring include the hashcode\">stackoverflow.com/questions/4712139/&hellip;</a> ."}],"answers":[{"tags":[],"owner":{"account_id":21947475,"reputation":71,"user_id":16227098,"display_name":"jmartinez"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675826885,"creation_date":1675826221,"answer_id":75381080,"question_id":75381026,"body_markdown":"As others have told you, in your for loop you&#39;re printing the array z, so for that reason it&#39;s printing &lt;del&gt;the object address&lt;/del&gt; what you&#39;re seeing. If you want to print the value stored in each position, you have to use the for loop&#39;s index.\r\n\r\n```\r\n    for (int i = 0; i &lt; z.length; i++) {\r\n        System.out.println(z[i]);\r\n    }\r\n```","title":"Why foreach loop gives array elements but for loop gives address instead of elements? In java","body":"<p>As others have told you, in your for loop you're printing the array z, so for that reason it's printing <del>the object address</del> what you're seeing. If you want to print the value stored in each position, you have to use the for loop's index.</p>\n<pre><code>    for (int i = 0; i &lt; z.length; i++) {\n        System.out.println(z[i]);\n    }\n</code></pre>\n"}],"owner":{"account_id":27581760,"reputation":13,"user_id":21050826,"display_name":"H D VIVEK"},"comment_count":4,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":89,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"closed_date":1675827049,"accepted_answer_id":75381080,"answer_count":1,"score":-2,"last_activity_date":1675826885,"creation_date":1675825401,"question_id":75381026,"body_markdown":"I tried to print all the elements in an array using both for loop and foreach loop.\r\n\r\nIn for loop, I got addresses of elements instead of elements themselves. But by using for loop I got the elements themselves. So how this is working even I didn&#39;t override toString method also but am getting elements!!\r\n\r\n```\r\npublic class ArrayReturn {\r\n\tpublic static int[] Multi(int []a)\r\n\t{\r\n\t\tfor (int i = 0; i &lt; a.length; i++) {\r\n\t\t\ta[i] = a[i]*2;\r\n\t\t}\r\n\t\treturn a;\r\n\t}\r\n\tpublic static void main(String[] args) {\r\n\t\tint ar[] = {2,3,4,5,6,7};\r\n\t\tint z[] = Multi(ar);\r\n\t\tfor (int i = 0; i &lt; z.length; i++) {\r\n\t\t\tSystem.out.println(z);\r\n\t\t}\r\n\t\tfor (int i : z) {\r\n\t\t\tSystem.out.println(i);\r\n\t\t}\r\n\t\t\r\n\t}\r\n}\r\nOUTPUT\r\n[I@5a07e868\r\n[I@5a07e868\r\n[I@5a07e868\r\n[I@5a07e868\r\n[I@5a07e868\r\n[I@5a07e868\r\n4\r\n6\r\n8\r\n10\r\n12\r\n14\r\n```\r\n\r\nI expected either address from both loops or elements. But I got address in for loop and elements in foreach loop.","title":"Why foreach loop gives array elements but for loop gives address instead of elements? In java","body":"<p>I tried to print all the elements in an array using both for loop and foreach loop.</p>\n<p>In for loop, I got addresses of elements instead of elements themselves. But by using for loop I got the elements themselves. So how this is working even I didn't override toString method also but am getting elements!!</p>\n<pre><code>public class ArrayReturn {\n    public static int[] Multi(int []a)\n    {\n        for (int i = 0; i &lt; a.length; i++) {\n            a[i] = a[i]*2;\n        }\n        return a;\n    }\n    public static void main(String[] args) {\n        int ar[] = {2,3,4,5,6,7};\n        int z[] = Multi(ar);\n        for (int i = 0; i &lt; z.length; i++) {\n            System.out.println(z);\n        }\n        for (int i : z) {\n            System.out.println(i);\n        }\n        \n    }\n}\nOUTPUT\n[I@5a07e868\n[I@5a07e868\n[I@5a07e868\n[I@5a07e868\n[I@5a07e868\n[I@5a07e868\n4\n6\n8\n10\n12\n14\n</code></pre>\n<p>I expected either address from both loops or elements. But I got address in for loop and elements in foreach loop.</p>\n"},{"tags":["java","android","camera"],"owner":{"account_id":8105942,"reputation":290,"user_id":6107472,"display_name":"WrapItUp87"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675826864,"creation_date":1675826864,"question_id":75381119,"body_markdown":"I was testing out my app on various emulators and I noticed that on some devices like the Pixel 6, that the physical camera blocks a portion off the screen in portrait mode.\r\n\r\nI already set the display cutout area to `LAYOUT_IN_DISPLAY_CUTOUT_MODE_NEVER` \r\n\r\nLink about display cutouts:\r\n\r\nhttps://developer.android.com/develop/ui/views/layout/display-cutout#:~:text=A%20%5Bdisplay%20cutout%5D%5D(,API%20level%2028)%20and%20higher.\r\n\r\nIs there any workaround to deal with this? (Like present the app bar and the rest of the app below the camera).\r\n\r\n\r\n\r\n\r\nThe picture of the page below is an example of the problem I&#39;m dealing with. \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/JmArt.png","title":"Android physical camera on emulator blocks part of app bar on Pixel 6","body":"<p>I was testing out my app on various emulators and I noticed that on some devices like the Pixel 6, that the physical camera blocks a portion off the screen in portrait mode.</p>\n<p>I already set the display cutout area to <code>LAYOUT_IN_DISPLAY_CUTOUT_MODE_NEVER</code></p>\n<p>Link about display cutouts:</p>\n<p><a href=\"https://developer.android.com/develop/ui/views/layout/display-cutout#:%7E:text=A%20%5Bdisplay%20cutout%5D%5D(,API%20level%2028)%20and%20higher\" rel=\"nofollow noreferrer\">https://developer.android.com/develop/ui/views/layout/display-cutout#:~:text=A%20%5Bdisplay%20cutout%5D%5D(,API%20level%2028)%20and%20higher</a>.</p>\n<p>Is there any workaround to deal with this? (Like present the app bar and the rest of the app below the camera).</p>\n<p>The picture of the page below is an example of the problem I'm dealing with.</p>\n<p><a href=\"https://i.stack.imgur.com/JmArt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JmArt.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring-boot","mocking"],"answers":[{"comments":[{"owner":{"account_id":16323640,"reputation":23,"user_id":11788754,"display_name":"tekknow"},"score":0,"creation_date":1601484166,"post_id":64140866,"comment_id":113424932,"body_markdown":"Thank you for pointing that silly error out.  Its good to know I am getting close.  I made the change to String.class and updated my post with that.  Unfortunately I&#39;m still getting the same error.","body":"Thank you for pointing that silly error out.  Its good to know I am getting close.  I made the change to String.class and updated my post with that.  Unfortunately I&#39;m still getting the same error."},{"owner":{"account_id":16323640,"reputation":23,"user_id":11788754,"display_name":"tekknow"},"score":0,"creation_date":1601484477,"post_id":64140866,"comment_id":113425062,"body_markdown":"I got it fixed by changing the line to: ResponseEntity&lt;String&gt; resp = restTemplate.getForEntity(&quot;http://localhost:8080/posts&quot;, String.class);","body":"I got it fixed by changing the line to: ResponseEntity&lt;String&gt; resp = restTemplate.getForEntity(&quot;<a href=\"http://localhost:8080/posts\" rel=\"nofollow noreferrer\">localhost:8080/posts</a>&quot;, String.class);"}],"tags":[],"owner":{"account_id":9103255,"reputation":106,"user_id":6774673,"display_name":"OTheriault"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675826776,"creation_date":1601479699,"answer_id":64140866,"question_id":64139696,"body_markdown":"The API `https://jsonplaceholder.typicode.com/posts` returns an array of JSON objects. You will need to reflect this in your request&#39;s desired response type:\r\n\r\n```java\r\npublic String getAllBlogPosts() {\r\n    ResponseEntity resp = restTemplate.getForEntity(&quot;http://localhost:8080/posts&quot;, BlogPost[].class);\r\n\r\n    return resp.getStatusCode() == HttpStatus.OK ? resp.getBody() : null;\r\n}\r\n```\r\n\r\nNotice the `[]` in `BlogPost[].class`.\r\n\r\nThen, you are getting a `Type mismatch: cannot convert from Object to String` since `ResponseBody.getBody()` returns a generic type `T`, which is `BlogPost[]`, but your method signature returns a `String`.\r\n\r\nIf all you want is the JSON string, then you can just do this:\r\n\r\n```java\r\npublic String getAllBlogPosts() {\r\n    ResponseEntity resp = restTemplate.getForEntity(&quot;http://localhost:8080/posts&quot;, String.class);\r\n\r\n    return resp.getStatusCode() == HttpStatus.OK ? resp.getBody() : null;\r\n}\r\n```\r\n\r\nOtherwise, if you want the actual [POJO][1] array then do this:\r\n\r\n```java\r\npublic BlogPost[] getAllBlogPosts() {\r\n    ResponseEntity resp = restTemplate.getForEntity(&quot;http://localhost:8080/posts&quot;, BlogPost[].class);\r\n\r\n    return resp.getStatusCode() == HttpStatus.OK ? resp.getBody() : null;\r\n}\r\n```\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Plain_old_Java_object\r\n\r\n","title":"How to mock an API that returns a JSON string in Spring Boot","body":"<p>The API <code>https://jsonplaceholder.typicode.com/posts</code> returns an array of JSON objects. You will need to reflect this in your request's desired response type:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public String getAllBlogPosts() {\n    ResponseEntity resp = restTemplate.getForEntity(&quot;http://localhost:8080/posts&quot;, BlogPost[].class);\n\n    return resp.getStatusCode() == HttpStatus.OK ? resp.getBody() : null;\n}\n</code></pre>\n<p>Notice the <code>[]</code> in <code>BlogPost[].class</code>.</p>\n<p>Then, you are getting a <code>Type mismatch: cannot convert from Object to String</code> since <code>ResponseBody.getBody()</code> returns a generic type <code>T</code>, which is <code>BlogPost[]</code>, but your method signature returns a <code>String</code>.</p>\n<p>If all you want is the JSON string, then you can just do this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public String getAllBlogPosts() {\n    ResponseEntity resp = restTemplate.getForEntity(&quot;http://localhost:8080/posts&quot;, String.class);\n\n    return resp.getStatusCode() == HttpStatus.OK ? resp.getBody() : null;\n}\n</code></pre>\n<p>Otherwise, if you want the actual <a href=\"https://en.wikipedia.org/wiki/Plain_old_Java_object\" rel=\"nofollow noreferrer\">POJO</a> array then do this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public BlogPost[] getAllBlogPosts() {\n    ResponseEntity resp = restTemplate.getForEntity(&quot;http://localhost:8080/posts&quot;, BlogPost[].class);\n\n    return resp.getStatusCode() == HttpStatus.OK ? resp.getBody() : null;\n}\n</code></pre>\n"}],"owner":{"account_id":16323640,"reputation":23,"user_id":11788754,"display_name":"tekknow"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1191,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":64140866,"answer_count":1,"score":0,"last_activity_date":1675826776,"creation_date":1601475933,"question_id":64139696,"body_markdown":"I am a beginner in trying to mock an external API in [Spring Boot][1].\r\n\r\nHere is the API:\r\nhttps://jsonplaceholder.typicode.com/posts\r\n\r\nIt returns a JSON string like this:\r\n\r\n    [\r\n      {\r\n        &quot;userId&quot;: 1,\r\n        &quot;id&quot;: 1,\r\n        &quot;title&quot;: &quot;sunt aut facere repellat provident occaecati excepturi optio reprehenderit&quot;,\r\n        &quot;body&quot;: &quot;quia et suscipit\\nsuscipit recusandae consequuntur expedita et cum\\nreprehenderit molestiae ut ut quas totam\\nnostrum rerum est autem sunt rem eveniet architecto&quot;\r\n      },\r\n    ...\r\n\r\nI&#39;ve tried the following code:\r\n\r\n        @Service\r\n        public class BlogPostService {\r\n            @Autowired\r\n            private RestTemplate restTemplate;\r\n\r\n            public String getAllBlogPosts() {\r\n                ResponseEntity resp = restTemplate.getForEntity(&quot;http://localhost:8080/posts&quot;, String.class);\r\n\r\n                return resp.getStatusCode() == HttpStatus.OK ? resp.getBody() : null;\r\n            }\r\n\r\n        }\r\n\r\nBut there is an error in the IDE at resp.getBody() which says:\r\n\r\n&gt; Type mismatch: cannot convert from Object to String\r\n\r\nHere is my *BlogPost* code:\r\n\r\n    public class BlogPost {\r\n        private int userId;\r\n        private String title;\r\n        private String body;\r\n\r\n        public BlogPost() {\r\n        }\r\n\r\n        public BlogPost(int userId, String title, String body) {\r\n            this.title = title;\r\n            this.body = body;\r\n        }\r\n    //...getters &amp; setters\r\n\r\nHow can I fix this?  Hopefully without the use of yet another tool.  This is just a simple proof-of-concept application, so I do not want to use [JUnit][2] or [Mockito][3] for testing.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Spring_Framework#Spring_Boot\r\n  [2]: https://en.wikipedia.org/wiki/JUnit\r\n  [3]: https://en.wikipedia.org/wiki/Mockito\r\n","title":"How to mock an API that returns a JSON string in Spring Boot","body":"<p>I am a beginner in trying to mock an external API in <a href=\"https://en.wikipedia.org/wiki/Spring_Framework#Spring_Boot\" rel=\"nofollow noreferrer\">Spring Boot</a>.</p>\n<p>Here is the API:\n<a href=\"https://jsonplaceholder.typicode.com/posts\" rel=\"nofollow noreferrer\">https://jsonplaceholder.typicode.com/posts</a></p>\n<p>It returns a JSON string like this:</p>\n<pre><code>[\n  {\n    &quot;userId&quot;: 1,\n    &quot;id&quot;: 1,\n    &quot;title&quot;: &quot;sunt aut facere repellat provident occaecati excepturi optio reprehenderit&quot;,\n    &quot;body&quot;: &quot;quia et suscipit\\nsuscipit recusandae consequuntur expedita et cum\\nreprehenderit molestiae ut ut quas totam\\nnostrum rerum est autem sunt rem eveniet architecto&quot;\n  },\n...\n</code></pre>\n<p>I've tried the following code:</p>\n<pre><code>    @Service\n    public class BlogPostService {\n        @Autowired\n        private RestTemplate restTemplate;\n\n        public String getAllBlogPosts() {\n            ResponseEntity resp = restTemplate.getForEntity(&quot;http://localhost:8080/posts&quot;, String.class);\n\n            return resp.getStatusCode() == HttpStatus.OK ? resp.getBody() : null;\n        }\n\n    }\n</code></pre>\n<p>But there is an error in the IDE at resp.getBody() which says:</p>\n<blockquote>\n<p>Type mismatch: cannot convert from Object to String</p>\n</blockquote>\n<p>Here is my <em>BlogPost</em> code:</p>\n<pre><code>public class BlogPost {\n    private int userId;\n    private String title;\n    private String body;\n\n    public BlogPost() {\n    }\n\n    public BlogPost(int userId, String title, String body) {\n        this.title = title;\n        this.body = body;\n    }\n//...getters &amp; setters\n</code></pre>\n<p>How can I fix this?  Hopefully without the use of yet another tool.  This is just a simple proof-of-concept application, so I do not want to use <a href=\"https://en.wikipedia.org/wiki/JUnit\" rel=\"nofollow noreferrer\">JUnit</a> or <a href=\"https://en.wikipedia.org/wiki/Mockito\" rel=\"nofollow noreferrer\">Mockito</a> for testing.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1675828602,"post_id":75381063,"comment_id":133010552,"body_markdown":"So, ask yourself this question; What happens when the contents of a column is longer then the allocated width of the column?  When you can answer that, you will find an answer to your question","body":"So, ask yourself this question; What happens when the contents of a column is longer then the allocated width of the column?  When you can answer that, you will find an answer to your question"},{"owner":{"account_id":27731016,"reputation":1,"user_id":21169521,"display_name":"Jayanth V"},"score":0,"creation_date":1675916368,"post_id":75381063,"comment_id":133031986,"body_markdown":"Ohhhh I think I found the problem, it was due to not counting the charecters for the 4th line. Ty for the help friend!","body":"Ohhhh I think I found the problem, it was due to not counting the charecters for the 4th line. Ty for the help friend!"}],"owner":{"account_id":27731016,"reputation":1,"user_id":21169521,"display_name":"Jayanth V"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675825982,"creation_date":1675825982,"question_id":75381063,"body_markdown":"Create a BoxOffice application that outputs the top 10 movies at the box office. Be sure to use the\r\nprintf() method to align the columns and specify field widths. You should be able to find a common\r\nnumber for all your Ranks, Titles and Gross fields. This means the field width should all be the same,\r\nbut the text is what changes.  \r\n\r\n\r\n\r\nThis is what the question asked. I had put this code into java, but the alignment was something that is bugging me and dont know how to fix. \r\n\r\n\r\n\tSystem.out.println(&quot;\\t\\t\\tTOP WEEKND BOX OFFICE\\n&quot;);\r\n\t\tSystem.out.printf(&quot;%-10s%-20s%38s\\n&quot;,&quot;Rank&quot;,&quot;Title&quot;,&quot;Gross&quot;);\r\n\t\tSystem.out.printf(&quot;%-10s%-20s%38s\\n&quot;,&quot;1&quot;,&quot;No Good Dead&quot;,&quot;24.2 M&quot;);\r\n\t\tSystem.out.printf(&quot;%-10s%-20s%38s\\n&quot;,&quot;2&quot;,&quot;Dolphin Tale 2&quot;,&quot;15.9 M&quot;);\r\n\t\tSystem.out.printf(&quot;%-10s%-20s%38s\\n&quot;,&quot;3&quot;,&quot;Guardians Of The Galaxy&quot;,&quot;8.1 M&quot;);\r\n\t\tSystem.out.printf(&quot;%-10s%-20s%38s\\n&quot;,&quot;4&quot;,&quot;Teenage Mutant Ninja Turtles&quot;,&quot;4.9 M&quot;);\r\n\t\tSystem.out.printf(&quot;%-10s%-20s%38s\\n&quot;,&quot;5&quot;,&quot;Let&#39;s Be Cops&quot;,&quot;4.3 M&quot;);\r\n\t\tSystem.out.printf(&quot;%-10s%-20s%38s\\n&quot;,&quot;6&quot;,&quot;The Drops&quot;,&quot;4.1 M&quot;);\r\n\t\tSystem.out.printf(&quot;%-10s%-20s%38s\\n&quot;,&quot;7&quot;,&quot;If I Stay&quot;,&quot;3.9 M&quot;);\r\n\t\tSystem.out.printf(&quot;%-10s%-20s%38s\\n&quot;,&quot;8&quot;,&quot;The November Man&quot;,&quot;2.8 M&quot;);\r\n\t\tSystem.out.printf(&quot;%-10s%-20s%38s\\n&quot;,&quot;9&quot;,&quot;The Giver&quot;,&quot;2.6 M&quot;);\r\n\t\tSystem.out.printf(&quot;%-10s%-20s%38s\\n&quot;,&quot;10&quot;,&quot;The Hundred-Foot Journey&quot;,&quot;2.4 M&quot;);","title":"Box Office Java Problem, Problem with the misaglinment for the gross column","body":"<p>Create a BoxOffice application that outputs the top 10 movies at the box office. Be sure to use the\nprintf() method to align the columns and specify field widths. You should be able to find a common\nnumber for all your Ranks, Titles and Gross fields. This means the field width should all be the same,\nbut the text is what changes.</p>\n<p>This is what the question asked. I had put this code into java, but the alignment was something that is bugging me and dont know how to fix.</p>\n<pre><code>System.out.println(&quot;\\t\\t\\tTOP WEEKND BOX OFFICE\\n&quot;);\n    System.out.printf(&quot;%-10s%-20s%38s\\n&quot;,&quot;Rank&quot;,&quot;Title&quot;,&quot;Gross&quot;);\n    System.out.printf(&quot;%-10s%-20s%38s\\n&quot;,&quot;1&quot;,&quot;No Good Dead&quot;,&quot;24.2 M&quot;);\n    System.out.printf(&quot;%-10s%-20s%38s\\n&quot;,&quot;2&quot;,&quot;Dolphin Tale 2&quot;,&quot;15.9 M&quot;);\n    System.out.printf(&quot;%-10s%-20s%38s\\n&quot;,&quot;3&quot;,&quot;Guardians Of The Galaxy&quot;,&quot;8.1 M&quot;);\n    System.out.printf(&quot;%-10s%-20s%38s\\n&quot;,&quot;4&quot;,&quot;Teenage Mutant Ninja Turtles&quot;,&quot;4.9 M&quot;);\n    System.out.printf(&quot;%-10s%-20s%38s\\n&quot;,&quot;5&quot;,&quot;Let's Be Cops&quot;,&quot;4.3 M&quot;);\n    System.out.printf(&quot;%-10s%-20s%38s\\n&quot;,&quot;6&quot;,&quot;The Drops&quot;,&quot;4.1 M&quot;);\n    System.out.printf(&quot;%-10s%-20s%38s\\n&quot;,&quot;7&quot;,&quot;If I Stay&quot;,&quot;3.9 M&quot;);\n    System.out.printf(&quot;%-10s%-20s%38s\\n&quot;,&quot;8&quot;,&quot;The November Man&quot;,&quot;2.8 M&quot;);\n    System.out.printf(&quot;%-10s%-20s%38s\\n&quot;,&quot;9&quot;,&quot;The Giver&quot;,&quot;2.6 M&quot;);\n    System.out.printf(&quot;%-10s%-20s%38s\\n&quot;,&quot;10&quot;,&quot;The Hundred-Foot Journey&quot;,&quot;2.4 M&quot;);\n</code></pre>\n"},{"tags":["java","html","spring-boot","thymeleaf"],"owner":{"account_id":22852231,"reputation":1,"user_id":16997655,"display_name":"Prabashi Mithma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675825979,"creation_date":1675825979,"question_id":75381061,"body_markdown":"I&#39;m developing a spring boot application to generate an email with a pdf. I need to display the error message exception returned by the document creation service. the document service (and email service ) return a message if there is an exception captured by the Exception handler, and When it returns an error, pass the error to the error email code and include it in the body of the email. and finally I want to test it.\r\n\r\n\r\nController class \r\n\r\n```\r\nModel.addAttribute(&quot;permit&quot;, permit);\r\n                model.addAttribute(&quot;success&quot;, &quot;Success! Permit for  &quot; + permit.getReceipt() + &quot; sent. &quot;);\r\n\r\n                Map&lt;String, String&gt; result = documentServiceImpl.generatePdf(permit);\r\n\r\n\r\n                if (documentServiceImpl.STATUS_SUCCESS.equals(result.get(&quot;status&quot;))) {\r\n\r\n                    model.addAttribute(&quot;date&quot;, result.get(&quot;date&quot;));\r\n\r\n                    String emailBody = getEmailBody(permit);\r\n\r\n                    Map&lt;String, String&gt; emailResult = emailServiceImpl.sendRequestoremail(permit.getEmail(), emailBody, result.get(&quot;file&quot;));\r\n                    documentServiceImpl.deletePdf(result.get(&quot;file&quot;));\r\n\r\n                    if (emailServiceImpl.STATUS_ERROR.equals(emailResult.get(&quot;status&quot;))) {\r\n\r\n\r\n                        String errorE = emailResult.get(&quot;message&quot;);\r\n                        String errorEmail = getErrorEmail(errorE);\r\n\r\n                        Map&lt;String,String&gt; financeEmail = emailServiceImpl.sendFinanceEmail(permit.getEmail(), errorEmail);\r\n                        model.addAttribute(&quot;errorEmail&quot;, &quot;Received response for the Temporary Parking Permit script but there was an error &quot; + financeEmail);\r\n                    }\r\n\r\n                }\r\n\r\n                // String body = getEmailBody(permit);\r\n                System.out.println(result.get(&quot;status&quot;));\r\n                System.out.println(result.get(&quot;file&quot;));\r\n            } catch (Exception e) {\r\n\r\n                model.addAttribute(&quot;error&quot;, e.getMessage());\r\n\r\n            }\r\n\r\n        return &quot;permit&quot;;\r\n\r\n    }\r\n\r\n\r\n    private String getEmailBody( Permit permit) {\r\n        ClassLoaderTemplateResolver templateResolver = new ClassLoaderTemplateResolver();\r\n        templateResolver.setSuffix(&quot;.html&quot;);\r\n        templateResolver.setTemplateMode(TemplateMode.HTML);\r\n        templateResolver.setPrefix(&quot;templates/&quot;);\r\n\r\n        TemplateEngine templateEngine = new TemplateEngine();\r\n        templateEngine.setTemplateResolver(templateResolver);\r\n\r\n        Context context = new Context();\r\n        context.setVariable(&quot;permit&quot;, permit);\r\n\r\n\r\n        return templateEngine.process(&quot;email&quot; , context);\r\n    }\r\n\r\n    private String getErrorEmail(String permit) {\r\n        ClassLoaderTemplateResolver templateResolver = new ClassLoaderTemplateResolver();\r\n        templateResolver.setSuffix(&quot;.html&quot;);\r\n        templateResolver.setTemplateMode(TemplateMode.HTML);\r\n        templateResolver.setPrefix(&quot;templates/&quot;);\r\n\r\n        TemplateEngine templateEngine = new TemplateEngine();\r\n        templateEngine.setTemplateResolver(templateResolver);\r\n\r\n        Context context = new Context();\r\n        context.setVariable(&quot;permit&quot;, permit);\r\n\r\n\r\n        return templateEngine.process(&quot;emailError&quot; , context);\r\n    }\r\n    }\r\n\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\nDocument service\r\n```\r\n@Override\r\n    public Map&lt;String, String&gt; generatePdf(Permit permit) {\r\n\r\n\r\n        Map&lt;String, String&gt; result = new HashMap&lt;&gt;();\r\n        currentDate = getCurrentDate(&quot;dd MMMM uuuu&quot;);\r\n\r\n        String fileName = null;\r\n\r\n        try {\r\n            Path outputPath = Paths.get(tmp + File.separator + &quot;parking&quot;);\r\n            Files.createDirectories(outputPath);\r\n            fileName = outputPath + File.separator + permit.getCustomerNum() + permit.getPurchaseDate().replaceAll(&quot;[^a-zA-Z]&quot;, &quot;&quot;) + getCurrentDate(&quot;uuuuMMddHHmmss&quot;) + &quot;.pdf&quot;;\r\n            InputStream pdfTemplate = resourceFile.getInputStream();\r\n\r\n            PDDocument pdfDoc = PDDocument.load(pdfTemplate);\r\n            PDDocumentCatalog docCatalog = pdfDoc.getDocumentCatalog();\r\n            PDAcroForm form = docCatalog.getAcroForm();\r\n            form.getField(&quot;Receipt&quot;).setValue(permit.getReceipt());\r\n            form.getField(&quot;PermitType&quot;).setValue(permit.getPermitType());\r\n            form.getField(&quot;PurchaseDate&quot;).setValue(permit.getPurchaseDate());\r\n            form.getField(&quot;MakeModel&quot;).setValue(permit.getMake() + &quot; &quot; + permit.getCarModel());\r\n//            form.getField(&quot;Model&quot;).setValue(permit.getCarModel());\r\n            form.getField(&quot;Rego&quot;).setValue(permit.getCarRego());\r\n            form.flatten();\r\n\r\n            System.out.println(&quot;generatePdf: &quot; + fileName);\r\n\r\n\r\n            File output = new File(fileName);\r\n            pdfDoc.save(output);\r\n            pdfDoc.close();\r\n            result.put(&quot;status&quot; , STATUS_SUCCESS);\r\n            result.put(&quot;file&quot;, fileName);\r\n            result.put(&quot;date&quot;, currentDate);\r\n\r\n        } catch (Exception e) {\r\n\r\n            result.put(&quot;status&quot;, STATUS_ERROR);\r\n            result.put(&quot;file&quot;, fileName);\r\n            result.put(&quot;date&quot;, currentDate);\r\n            result.put(&quot;message&quot;, e.getMessage());\r\n            e.printStackTrace();\r\n        }\r\n        return result;\r\n    }\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"When email returns an error, pass the error to the error email code and include it in the body of the email","body":"<p>I'm developing a spring boot application to generate an email with a pdf. I need to display the error message exception returned by the document creation service. the document service (and email service ) return a message if there is an exception captured by the Exception handler, and When it returns an error, pass the error to the error email code and include it in the body of the email. and finally I want to test it.</p>\n<p>Controller class</p>\n<pre><code>Model.addAttribute(&quot;permit&quot;, permit);\n                model.addAttribute(&quot;success&quot;, &quot;Success! Permit for  &quot; + permit.getReceipt() + &quot; sent. &quot;);\n\n                Map&lt;String, String&gt; result = documentServiceImpl.generatePdf(permit);\n\n\n                if (documentServiceImpl.STATUS_SUCCESS.equals(result.get(&quot;status&quot;))) {\n\n                    model.addAttribute(&quot;date&quot;, result.get(&quot;date&quot;));\n\n                    String emailBody = getEmailBody(permit);\n\n                    Map&lt;String, String&gt; emailResult = emailServiceImpl.sendRequestoremail(permit.getEmail(), emailBody, result.get(&quot;file&quot;));\n                    documentServiceImpl.deletePdf(result.get(&quot;file&quot;));\n\n                    if (emailServiceImpl.STATUS_ERROR.equals(emailResult.get(&quot;status&quot;))) {\n\n\n                        String errorE = emailResult.get(&quot;message&quot;);\n                        String errorEmail = getErrorEmail(errorE);\n\n                        Map&lt;String,String&gt; financeEmail = emailServiceImpl.sendFinanceEmail(permit.getEmail(), errorEmail);\n                        model.addAttribute(&quot;errorEmail&quot;, &quot;Received response for the Temporary Parking Permit script but there was an error &quot; + financeEmail);\n                    }\n\n                }\n\n                // String body = getEmailBody(permit);\n                System.out.println(result.get(&quot;status&quot;));\n                System.out.println(result.get(&quot;file&quot;));\n            } catch (Exception e) {\n\n                model.addAttribute(&quot;error&quot;, e.getMessage());\n\n            }\n\n        return &quot;permit&quot;;\n\n    }\n\n\n    private String getEmailBody( Permit permit) {\n        ClassLoaderTemplateResolver templateResolver = new ClassLoaderTemplateResolver();\n        templateResolver.setSuffix(&quot;.html&quot;);\n        templateResolver.setTemplateMode(TemplateMode.HTML);\n        templateResolver.setPrefix(&quot;templates/&quot;);\n\n        TemplateEngine templateEngine = new TemplateEngine();\n        templateEngine.setTemplateResolver(templateResolver);\n\n        Context context = new Context();\n        context.setVariable(&quot;permit&quot;, permit);\n\n\n        return templateEngine.process(&quot;email&quot; , context);\n    }\n\n    private String getErrorEmail(String permit) {\n        ClassLoaderTemplateResolver templateResolver = new ClassLoaderTemplateResolver();\n        templateResolver.setSuffix(&quot;.html&quot;);\n        templateResolver.setTemplateMode(TemplateMode.HTML);\n        templateResolver.setPrefix(&quot;templates/&quot;);\n\n        TemplateEngine templateEngine = new TemplateEngine();\n        templateEngine.setTemplateResolver(templateResolver);\n\n        Context context = new Context();\n        context.setVariable(&quot;permit&quot;, permit);\n\n\n        return templateEngine.process(&quot;emailError&quot; , context);\n    }\n    }\n\n</code></pre>\n<p>Document service</p>\n<pre><code>@Override\n    public Map&lt;String, String&gt; generatePdf(Permit permit) {\n\n\n        Map&lt;String, String&gt; result = new HashMap&lt;&gt;();\n        currentDate = getCurrentDate(&quot;dd MMMM uuuu&quot;);\n\n        String fileName = null;\n\n        try {\n            Path outputPath = Paths.get(tmp + File.separator + &quot;parking&quot;);\n            Files.createDirectories(outputPath);\n            fileName = outputPath + File.separator + permit.getCustomerNum() + permit.getPurchaseDate().replaceAll(&quot;[^a-zA-Z]&quot;, &quot;&quot;) + getCurrentDate(&quot;uuuuMMddHHmmss&quot;) + &quot;.pdf&quot;;\n            InputStream pdfTemplate = resourceFile.getInputStream();\n\n            PDDocument pdfDoc = PDDocument.load(pdfTemplate);\n            PDDocumentCatalog docCatalog = pdfDoc.getDocumentCatalog();\n            PDAcroForm form = docCatalog.getAcroForm();\n            form.getField(&quot;Receipt&quot;).setValue(permit.getReceipt());\n            form.getField(&quot;PermitType&quot;).setValue(permit.getPermitType());\n            form.getField(&quot;PurchaseDate&quot;).setValue(permit.getPurchaseDate());\n            form.getField(&quot;MakeModel&quot;).setValue(permit.getMake() + &quot; &quot; + permit.getCarModel());\n//            form.getField(&quot;Model&quot;).setValue(permit.getCarModel());\n            form.getField(&quot;Rego&quot;).setValue(permit.getCarRego());\n            form.flatten();\n\n            System.out.println(&quot;generatePdf: &quot; + fileName);\n\n\n            File output = new File(fileName);\n            pdfDoc.save(output);\n            pdfDoc.close();\n            result.put(&quot;status&quot; , STATUS_SUCCESS);\n            result.put(&quot;file&quot;, fileName);\n            result.put(&quot;date&quot;, currentDate);\n\n        } catch (Exception e) {\n\n            result.put(&quot;status&quot;, STATUS_ERROR);\n            result.put(&quot;file&quot;, fileName);\n            result.put(&quot;date&quot;, currentDate);\n            result.put(&quot;message&quot;, e.getMessage());\n            e.printStackTrace();\n        }\n        return result;\n    }\n</code></pre>\n"},{"tags":["java","android","flutter","plugins","gradlew"],"answers":[{"comments":[{"owner":{"account_id":26908675,"reputation":15,"user_id":20484602,"display_name":"ali ma"},"score":0,"creation_date":1675832119,"post_id":75381037,"comment_id":133010956,"body_markdown":"again when I run the &lt; ./gradlew build &gt; I get the same Error","body":"again when I run the &lt; ./gradlew build &gt; I get the same Error"}],"tags":[],"owner":{"account_id":17609690,"reputation":1072,"user_id":12777999,"display_name":"Mashood .H"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675825496,"creation_date":1675825496,"answer_id":75381037,"question_id":75378712,"body_markdown":"-go to the project terminal (ctrl+j in vscode) and run  `flutter clean`\r\n\r\n-go to the android folder and delete the .gradle folder \r\n\r\n-run `flutter pub get`\r\n\r\n-run `flutter run`","title":"Could not determine the dependencies of task Could not create task","body":"<p>-go to the project terminal (ctrl+j in vscode) and run  <code>flutter clean</code></p>\n<p>-go to the android folder and delete the .gradle folder</p>\n<p>-run <code>flutter pub get</code></p>\n<p>-run <code>flutter run</code></p>\n"}],"owner":{"account_id":26908675,"reputation":15,"user_id":20484602,"display_name":"ali ma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":364,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675825496,"creation_date":1675802019,"question_id":75378712,"body_markdown":"I want to install the gradle plugin version 7.6\r\n\r\nbut I get this Error :\r\n  \r\n\r\n\r\n\r\n\r\n\r\nCould not determine the dependencies of task &#39;:path_provider_android:test&#39;.\r\n&gt; Could not create task &#39;:path_provider_android:testProfileUnitTest&#39;.\r\n   &gt; this and base files have different roots: E:\\flutter downloader the main program\\flutterdownloaderthemainprogram\\build\\path_provider_android and C:\\Users\\Gcc\\Downloads\\Compressed\\flutter_windows_3.3.0-stable\\flutter\\.pub-cache\\hosted\\pub.dartlang.org\\path_provider_android-2.0.22\\android.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nthis is the build.gradle:\r\n\r\n\r\n\r\n\r\n\r\n\r\n    buildscript {\r\n          ext.kotlin_version = &#39;1.6.10&#39;\r\n              repositories {\r\n                google()\r\n                      mavenCentral()\r\n               }\r\n\r\n        dependencies {\r\n        classpath &#39;com.android.tools.build:gradle:7.1.2&#39;\r\n        classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\r\n               }\r\n            }\r\n\r\n              allprojects {\r\n          repositories {\r\n         google()\r\n                  mavenCentral()\r\n                 }\r\n             }\r\n\r\n               rootProject.buildDir = &#39;../build&#39;\r\n              subprojects {\r\n                  project.buildDir = &quot;${rootProject.buildDir}/${project.name}&quot;\r\n                           } \r\n              subprojects {\r\n                   project.evaluationDependsOn(&#39;:app&#39;)\r\n                 }\r\n\r\n                     task clean(type: Delete) {\r\n                  delete rootProject.buildDir\r\n                 }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nI use the java19 \r\n\r\nI try java17 and java11\r\nI tried diffrent version of the gradle but I get the same Error","title":"Could not determine the dependencies of task Could not create task","body":"<p>I want to install the gradle plugin version 7.6</p>\n<p>but I get this Error :</p>\n<p>Could not determine the dependencies of task ':path_provider_android:test'.</p>\n<blockquote>\n<p>Could not create task ':path_provider_android:testProfileUnitTest'.\nthis and base files have different roots: E:\\flutter downloader the main program\\flutterdownloaderthemainprogram\\build\\path_provider_android and C:\\Users\\Gcc\\Downloads\\Compressed\\flutter_windows_3.3.0-stable\\flutter.pub-cache\\hosted\\pub.dartlang.org\\path_provider_android-2.0.22\\android.</p>\n</blockquote>\n<p>this is the build.gradle:</p>\n<pre><code>buildscript {\n      ext.kotlin_version = '1.6.10'\n          repositories {\n            google()\n                  mavenCentral()\n           }\n\n    dependencies {\n    classpath 'com.android.tools.build:gradle:7.1.2'\n    classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\n           }\n        }\n\n          allprojects {\n      repositories {\n     google()\n              mavenCentral()\n             }\n         }\n\n           rootProject.buildDir = '../build'\n          subprojects {\n              project.buildDir = &quot;${rootProject.buildDir}/${project.name}&quot;\n                       } \n          subprojects {\n               project.evaluationDependsOn(':app')\n             }\n\n                 task clean(type: Delete) {\n              delete rootProject.buildDir\n             }\n</code></pre>\n<p>I use the java19</p>\n<p>I try java17 and java11\nI tried diffrent version of the gradle but I get the same Error</p>\n"},{"tags":["java"],"answers":[{"comments":[{"owner":{"account_id":9320,"reputation":159784,"user_id":17172,"display_name":"coobird"},"score":0,"creation_date":1321076350,"post_id":8102768,"comment_id":9934857,"body_markdown":"Trimming the string will remove whitespace at the beginning and end of a string, so the problem persists if there&#39;s multiple spaces in between words. Also, using `String.split` creates a `String[]`, so if the input is large, you&#39;ll end up using *a lot* of memory.","body":"Trimming the string will remove whitespace at the beginning and end of a string, so the problem persists if there&#39;s multiple spaces in between words. Also, using <code>String.split</code> creates a <code>String[]</code>, so if the input is large, you&#39;ll end up using <i>a lot</i> of memory."},{"owner":{"account_id":238346,"reputation":4245,"user_id":507184,"accept_rate":91,"display_name":"Vamsi"},"score":0,"creation_date":1321076845,"post_id":8102768,"comment_id":9934895,"body_markdown":"but wouldn&#39;t using String.split that be more efficient than going through char by char of a large string using a loop, I am not saying you are wrong, I am just asking a question","body":"but wouldn&#39;t using String.split that be more efficient than going through char by char of a large string using a loop, I am not saying you are wrong, I am just asking a question"},{"owner":{"account_id":9320,"reputation":159784,"user_id":17172,"display_name":"coobird"},"score":1,"creation_date":1321077201,"post_id":8102768,"comment_id":9934923,"body_markdown":"`String.split` is using a regular expression engine in the background so it&#39;s actually doing *a lot* of processing compared to a simple character-by-character iteration over a `String`. (And the return value is a `String[]` containing freshly created `String`s.) The most efficient implementation I can see here is probably along the line of @heneryville&#39;s answer. Uses hardly any extra memory and does the absolute minimum processing.","body":"<code>String.split</code> is using a regular expression engine in the background so it&#39;s actually doing <i>a lot</i> of processing compared to a simple character-by-character iteration over a <code>String</code>. (And the return value is a <code>String[]</code> containing freshly created <code>String</code>s.) The most efficient implementation I can see here is probably along the line of @heneryville&#39;s answer. Uses hardly any extra memory and does the absolute minimum processing."}],"tags":[],"owner":{"account_id":238346,"reputation":4245,"user_id":507184,"accept_rate":91,"display_name":"Vamsi"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1321076055,"creation_date":1321076055,"answer_id":8102768,"question_id":8102754,"body_markdown":"You can use `String.split` ([read more here][1]) instead of charAt, you will get good results.\r\nIf you want to use `charAt` for some reason then try [trimming the string][2] before you count the words that way you won&#39;t have the extra space and an extra word\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split%28java.lang.String%29\r\n  [2]: http://download.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#trim%28%29","title":"Java word count program","body":"<p>You can use <code>String.split</code> (<a href=\"http://download.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split%28java.lang.String%29\" rel=\"nofollow\">read more here</a>) instead of charAt, you will get good results.\nIf you want to use <code>charAt</code> for some reason then try <a href=\"http://download.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#trim%28%29\" rel=\"nofollow\">trimming the string</a> before you count the words that way you won't have the extra space and an extra word</p>\n"},{"comments":[{"owner":{"account_id":1034634,"reputation":89,"user_id":1042251,"display_name":"Kenneth John Falbous"},"score":0,"creation_date":1321077174,"post_id":8102778,"comment_id":9934918,"body_markdown":"hey thanks dude it worked great but can there be any other way than using two if","body":"hey thanks dude it worked great but can there be any other way than using two if"},{"owner":{"account_id":460525,"reputation":18289,"user_id":861679,"accept_rate":68,"display_name":"Android Killer"},"score":0,"creation_date":1321078175,"post_id":8102778,"comment_id":9934993,"body_markdown":"this is showing wrong result.If i am putting one more space before word &quot;day&quot;. it is showing 3.it should show 4. right sir ?","body":"this is showing wrong result.If i am putting one more space before word &quot;day&quot;. it is showing 3.it should show 4. right sir ?"},{"owner":{"account_id":1034634,"reputation":89,"user_id":1042251,"display_name":"Kenneth John Falbous"},"score":0,"creation_date":1321079213,"post_id":8102778,"comment_id":9935070,"body_markdown":"can you clarify what does this line do--  if(!prevCharWasSpace)","body":"can you clarify what does this line do--  if(!prevCharWasSpace)"},{"owner":{"account_id":1034634,"reputation":89,"user_id":1042251,"display_name":"Kenneth John Falbous"},"score":0,"creation_date":1321081000,"post_id":8102778,"comment_id":9935214,"body_markdown":"yes you right but you can declare the wordCount variable with the value 1","body":"yes you right but you can declare the wordCount variable with the value 1"}],"tags":[],"owner":{"account_id":471315,"reputation":2853,"user_id":879034,"accept_rate":73,"display_name":"heneryville"},"comment_count":4,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1321106206,"creation_date":1321076250,"answer_id":8102778,"question_id":8102754,"body_markdown":"Two routes for this. One way would be to use regular expressions. You can find out more about regular expressions [here][1].  A good regular expression for this would be something like &quot;\\w+&quot; Then count the number of matches.\r\n\r\nIf you don&#39;t want to go that route, you could have a boolean flag that remembers if the last character you&#39;ve seen is a space. If it is, don&#39;t count it. So the center of the loop looks like this:\r\n\r\n    boolean prevCharWasSpace=true;\r\n    for (int i = 0; i &lt; str1.length(); i++) \r\n    {\r\n        if (str1.charAt(i) == &#39; &#39;) {\r\n            prevCharWasSpace=true;\r\n        }\r\n\telse{\r\n            if(prevCharWasSpace) wordChar++;\r\n            prevCharWasSpace = false;\r\n\r\n        }\r\n    }\r\n***Update***&lt;br/&gt;\r\nUsing the split technique is exactly equivalent to what&#39;s happening here, but it doesn&#39;t really explain why it works.  If we go back to our CS theory, we want to construct a Finite State Automa (FSA) that counts words. That FSA may appear as:&lt;br/&gt;\r\n![enter image description here][2]\r\n&lt;br/&gt;\r\nIf you look at the code, it implements this FSA exactly. The prevCharWasSpace keeps track of which state we&#39;re in, and the str1.charAt(&#39;i&#39;) is decideds which edge (or arrow) is being followed. If you use the split method, a regular expression equivalent of this FSA is constructed internally, and is used to split the string into an array.\r\n\r\n\r\n  [1]: http://www.regular-expressions.info/tutorial.html\r\n  [2]: http://i.stack.imgur.com/x5KK2.png","title":"Java word count program","body":"<p>Two routes for this. One way would be to use regular expressions. You can find out more about regular expressions <a href=\"http://www.regular-expressions.info/tutorial.html\" rel=\"noreferrer\">here</a>.  A good regular expression for this would be something like \"\\w+\" Then count the number of matches.</p>\n\n<p>If you don't want to go that route, you could have a boolean flag that remembers if the last character you've seen is a space. If it is, don't count it. So the center of the loop looks like this:</p>\n\n<pre><code>boolean prevCharWasSpace=true;\nfor (int i = 0; i &lt; str1.length(); i++) \n{\n    if (str1.charAt(i) == ' ') {\n        prevCharWasSpace=true;\n    }\nelse{\n        if(prevCharWasSpace) wordChar++;\n        prevCharWasSpace = false;\n\n    }\n}\n</code></pre>\n\n<p><strong><em>Update</em></strong><br/>\nUsing the split technique is exactly equivalent to what's happening here, but it doesn't really explain why it works.  If we go back to our CS theory, we want to construct a Finite State Automa (FSA) that counts words. That FSA may appear as:<br/>\n<img src=\"https://i.stack.imgur.com/x5KK2.png\" alt=\"enter image description here\">\n<br/>\nIf you look at the code, it implements this FSA exactly. The prevCharWasSpace keeps track of which state we're in, and the str1.charAt('i') is decideds which edge (or arrow) is being followed. If you use the split method, a regular expression equivalent of this FSA is constructed internally, and is used to split the string into an array.</p>\n"},{"tags":[],"owner":{"account_id":321035,"reputation":12292,"user_id":639616,"accept_rate":67,"display_name":"wannik"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1321076661,"creation_date":1321076661,"answer_id":8102803,"question_id":8102754,"body_markdown":"Use `split(regex)` method.  The result is an array of strings that was splited by `regex`.\r\n \r\n    String s = &quot;Today is Holdiay Day&quot;;\r\n    System.out.println(&quot;Word count is = &quot; + s.split(&quot; &quot;).length);\r\n\r\n","title":"Java word count program","body":"<p>Use <code>split(regex)</code> method.  The result is an array of strings that was splited by <code>regex</code>.</p>\n\n<pre><code>String s = \"Today is Holdiay Day\";\nSystem.out.println(\"Word count is = \" + s.split(\" \").length);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1034634,"reputation":89,"user_id":1042251,"display_name":"Kenneth John Falbous"},"score":0,"creation_date":1321078848,"post_id":8102806,"comment_id":9935041,"body_markdown":"Can you please make the program more simple with just using if else statement and for loop","body":"Can you please make the program more simple with just using if else statement and for loop"},{"owner":{"account_id":155029,"reputation":2261,"user_id":371396,"accept_rate":69,"display_name":"A Null Pointer"},"score":6,"creation_date":1321086594,"post_id":8102806,"comment_id":9935646,"body_markdown":"I am not sure I can follow your comment.\nWhat more simpler can this get. Introducing if-else statements and a for loop is sure going to make the program a little longer and inefficient not to mention.","body":"I am not sure I can follow your comment. What more simpler can this get. Introducing if-else statements and a for loop is sure going to make the program a little longer and inefficient not to mention."},{"owner":{"account_id":314278,"reputation":93,"user_id":629365,"display_name":"Raj"},"score":0,"creation_date":1420478917,"post_id":8102806,"comment_id":43979362,"body_markdown":"Split will return array. String[] wordArray = str1.split(&quot;\\\\s+&quot;);","body":"Split will return array. String[] wordArray = str1.split(&quot;\\\\s+&quot;);"}],"tags":[],"owner":{"account_id":155029,"reputation":2261,"user_id":371396,"accept_rate":69,"display_name":"A Null Pointer"},"comment_count":3,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1488428256,"creation_date":1321076687,"answer_id":8102806,"question_id":8102754,"body_markdown":"    public static void main (String[] args) {\r\n\r\n         System.out.println(&quot;Simple Java Word Count Program&quot;);\r\n\r\n         String str1 = &quot;Today is Holdiay Day&quot;;\r\n\r\n         String[] wordArray = str1.trim().split(&quot;\\\\s+&quot;);\r\n         int wordCount = wordArray.length;\r\n\r\n         System.out.println(&quot;Word count is = &quot; + wordCount);\r\n    }\r\n\r\nThe ideas is to split the string into words on any whitespace character occurring any number of times.\r\nThe split function of the String class returns an array containing the words as its elements.\r\nPrinting the length of the array would yield the number of words in the string.\r\n","title":"Java word count program","body":"<pre><code>public static void main (String[] args) {\n\n     System.out.println(\"Simple Java Word Count Program\");\n\n     String str1 = \"Today is Holdiay Day\";\n\n     String[] wordArray = str1.trim().split(\"\\\\s+\");\n     int wordCount = wordArray.length;\n\n     System.out.println(\"Word count is = \" + wordCount);\n}\n</code></pre>\n\n<p>The ideas is to split the string into words on any whitespace character occurring any number of times.\nThe split function of the String class returns an array containing the words as its elements.\nPrinting the length of the array would yield the number of words in the string.</p>\n"},{"comments":[{"owner":{"account_id":1034634,"reputation":89,"user_id":1042251,"display_name":"Kenneth John Falbous"},"score":0,"creation_date":1321079169,"post_id":8102921,"comment_id":9935065,"body_markdown":"Your code is working great friend but can you help me getting it done by simple if else statement and for loop.","body":"Your code is working great friend but can you help me getting it done by simple if else statement and for loop."}],"tags":[],"owner":{"account_id":460525,"reputation":18289,"user_id":861679,"accept_rate":68,"display_name":"Android Killer"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1484190712,"creation_date":1321078637,"answer_id":8102921,"question_id":8102754,"body_markdown":"You can use this code.It may help you:\r\n    \r\n    public static void main (String[] args)\r\n\t{\r\n\r\n\t   System.out.println(&quot;Simple Java Word Count Program&quot;);\r\n\r\n\t   String str1 = &quot;Today is Holdiay Day&quot;;\r\n\t   int count=0;\r\n\t   String[] wCount=str1.split(&quot; &quot;);\r\n\t   \r\n\t   for(int i=0;i&lt;wCount.length;i++){\r\n\t       \tif(!wCount[i].isEmpty())\r\n\t    \t{\r\n\t    \t\tcount++;\r\n\t    \t}\r\n\t   }\r\n\t   System.out.println(count);\r\n    }","title":"Java word count program","body":"<p>You can use this code.It may help you:</p>\n\n<pre><code>public static void main (String[] args)\n{\n\n   System.out.println(\"Simple Java Word Count Program\");\n\n   String str1 = \"Today is Holdiay Day\";\n   int count=0;\n   String[] wCount=str1.split(\" \");\n\n   for(int i=0;i&lt;wCount.length;i++){\n        if(!wCount[i].isEmpty())\n        {\n            count++;\n        }\n   }\n   System.out.println(count);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1034634,"reputation":89,"user_id":1042251,"display_name":"Kenneth John Falbous"},"score":0,"creation_date":1321079328,"post_id":8102965,"comment_id":9935074,"body_markdown":"I just want it to be done by simple if else statement and for loop","body":"I just want it to be done by simple if else statement and for loop"},{"owner":{"account_id":344466,"reputation":7026,"user_id":676803,"accept_rate":64,"display_name":"Drona"},"score":0,"creation_date":1321079622,"post_id":8102965,"comment_id":9935101,"body_markdown":"In that case take a look at @heneryville &#39;s suggestion. You can check for all whitespaces as against just the space.","body":"In that case take a look at @heneryville &#39;s suggestion. You can check for all whitespaces as against just the space."}],"tags":[],"owner":{"account_id":344466,"reputation":7026,"user_id":676803,"accept_rate":64,"display_name":"Drona"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1321079220,"creation_date":1321079220,"answer_id":8102965,"question_id":8102754,"body_markdown":"You need to read the file line by line and reduce the multiple occurences of the whitespaces appearing in your line to a single occurence and then count for the words. Following is a sample:\r\n\r\n\tpublic static void main(String... args) throws IOException {   \r\n\r\n\t\tFileInputStream fstream = new FileInputStream(&quot;c:\\\\test.txt&quot;);\r\n \t    DataInputStream in = new DataInputStream(fstream);\r\n\t\tBufferedReader br = new BufferedReader(new InputStreamReader(in));\r\n\t\tString strLine;\r\n\t\tint wordcount = 0;\r\n\t\twhile ((strLine = br.readLine()) != null)   {\r\n\t\t\tstrLine = strLine.replaceAll(&quot;[\\t\\b]&quot;, &quot;&quot;);\r\n\t\t\tstrLine = strLine.replaceAll(&quot; {2,}&quot;, &quot; &quot;);\r\n\t\t\tif (!strLine.isEmpty()){\r\n\t\t\t\twordcount = wordcount + strLine.split(&quot; &quot;).length;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tSystem.out.println(wordcount);\r\n\t\tin.close();\r\n\t}","title":"Java word count program","body":"<p>You need to read the file line by line and reduce the multiple occurences of the whitespaces appearing in your line to a single occurence and then count for the words. Following is a sample:</p>\n\n<pre><code>public static void main(String... args) throws IOException {   \n\n    FileInputStream fstream = new FileInputStream(\"c:\\\\test.txt\");\n    DataInputStream in = new DataInputStream(fstream);\n    BufferedReader br = new BufferedReader(new InputStreamReader(in));\n    String strLine;\n    int wordcount = 0;\n    while ((strLine = br.readLine()) != null)   {\n        strLine = strLine.replaceAll(\"[\\t\\b]\", \"\");\n        strLine = strLine.replaceAll(\" {2,}\", \" \");\n        if (!strLine.isEmpty()){\n            wordcount = wordcount + strLine.split(\" \").length;\n        }\n    }\n\n    System.out.println(wordcount);\n    in.close();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1028876,"reputation":2699,"user_id":1037592,"display_name":"iKushal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1435174107,"creation_date":1321080619,"answer_id":8103053,"question_id":8102754,"body_markdown":"     public class CountWords \r\n        {\r\n            public static void main (String[] args)\r\n            {\r\n                System.out.println(&quot;Simple Java Word Count Program&quot;);\r\n                String str1 = &quot;Today is Holdiay Day&quot;;\r\n                int wordCount = 1;\r\n                for (int i = 0; i &lt; str1.length(); i++) \r\n                {\r\n                    if (str1.charAt(i) == &#39; &#39; &amp;&amp; str1.charAt(i+1)!=&#39; &#39;) \r\n                    {\r\n                        wordCount++;\r\n                    } \r\n                }\r\n                System.out.println(&quot;Word count is = &quot; + wordCount));\r\n            }\r\n        }   \r\n\r\nThis gives the correct result because if space comes twice or more then it can&#39;t increase wordcount. Enjoy.","title":"Java word count program","body":"<pre><code> public class CountWords \n    {\n        public static void main (String[] args)\n        {\n            System.out.println(\"Simple Java Word Count Program\");\n            String str1 = \"Today is Holdiay Day\";\n            int wordCount = 1;\n            for (int i = 0; i &lt; str1.length(); i++) \n            {\n                if (str1.charAt(i) == ' ' &amp;&amp; str1.charAt(i+1)!=' ') \n                {\n                    wordCount++;\n                } \n            }\n            System.out.println(\"Word count is = \" + wordCount));\n        }\n    }   \n</code></pre>\n\n<p>This gives the correct result because if space comes twice or more then it can't increase wordcount. Enjoy.</p>\n"},{"tags":[],"owner":{"account_id":2600167,"reputation":9,"user_id":2252806,"display_name":"Sidharam Anache"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1365270698,"creation_date":1365270698,"answer_id":15854147,"question_id":8102754,"body_markdown":"    public class wordCOunt\r\n    {\r\n    public static void main(String ar[])\r\n    {\r\n    System.out.println(&quot;Simple Java Word Count Program&quot;);\r\n\r\n        String str1 = &quot;Today is Holdiay Day&quot;;\r\n\r\n        int wordCount = 1;\r\n\r\n        for (int i = 0; i &lt; str1.length(); i++) \r\n        {\r\n            if (str1.charAt(i) == &#39; &#39;&amp;&amp; str1.charAt(i+1)!=&#39; &#39;) \r\n            {\r\n                wordCount++;\r\n            } \r\n        }\r\n\r\n        System.out.println(&quot;Word count is = &quot; +(str1.length()- wordCount));\r\n    }\r\n}","title":"Java word count program","body":"<pre><code>public class wordCOunt\n{\npublic static void main(String ar[])\n{\nSystem.out.println(\"Simple Java Word Count Program\");\n\n    String str1 = \"Today is Holdiay Day\";\n\n    int wordCount = 1;\n\n    for (int i = 0; i &lt; str1.length(); i++) \n    {\n        if (str1.charAt(i) == ' '&amp;&amp; str1.charAt(i+1)!=' ') \n        {\n            wordCount++;\n        } \n    }\n\n    System.out.println(\"Word count is = \" +(str1.length()- wordCount));\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":2600167,"reputation":9,"user_id":2252806,"display_name":"Sidharam Anache"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1365270970,"creation_date":1365270970,"answer_id":15854192,"question_id":8102754,"body_markdown":"    public class wordCount\r\n    {\r\n    public static void main(String ar[]) throws Exception\r\n    {\r\n    System.out.println(&quot;Simple Java Word Count Program&quot;);\r\n\r\n\r\n        int wordCount = 1,count=1;\r\n\t BufferedReader br = new BufferedReader(new FileReader(&quot;C:/file.txt&quot;));\r\n                String str2 = &quot;&quot;, str1 = &quot;&quot;;\r\n                \r\n                while ((str1 = br.readLine()) != null) {\r\n\r\n                        str2 += str1;\r\n\r\n                }\r\n\r\n\r\n        for (int i = 0; i &lt; str2.length(); i++) \r\n        {\r\n            if (str2.charAt(i) == &#39; &#39; &amp;&amp; str2.charAt(i+1)!=&#39; &#39;) \r\n            {\r\n                wordCount++;\r\n            } \r\n\t\t\r\n\t\t\r\n            }\r\n\r\n        System.out.println(&quot;Word count is = &quot; +(wordCount));\r\n    }\r\n}\r\n\r\n\r\n\r\n   ","title":"Java word count program","body":"<pre><code>public class wordCount\n{\npublic static void main(String ar[]) throws Exception\n{\nSystem.out.println(\"Simple Java Word Count Program\");\n\n\n    int wordCount = 1,count=1;\n BufferedReader br = new BufferedReader(new FileReader(\"C:/file.txt\"));\n            String str2 = \"\", str1 = \"\";\n\n            while ((str1 = br.readLine()) != null) {\n\n                    str2 += str1;\n\n            }\n\n\n    for (int i = 0; i &lt; str2.length(); i++) \n    {\n        if (str2.charAt(i) == ' ' &amp;&amp; str2.charAt(i+1)!=' ') \n        {\n            wordCount++;\n        } \n\n\n        }\n\n    System.out.println(\"Word count is = \" +(wordCount));\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":2650748,"reputation":1,"user_id":2292506,"display_name":"Viraaj Phadke"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1366230965,"creation_date":1366230965,"answer_id":16069800,"question_id":8102754,"body_markdown":"&gt; you should make your code more generic by considering other word separators as well.. such as &quot;,&quot; &quot;;&quot; etc.\r\n\r\n    public class WordCounter{\r\n        public int count(String input){\r\n            int count =0;\r\n            boolean incrementCounter = false;\r\n            for (int i=0; i&lt;input.length(); i++){\r\n                if (isValidWordCharacter(input.charAt(i))){\r\n                    incrementCounter = true;\r\n                }else if (incrementCounter){\r\n                    count++;\r\n                    incrementCounter = false;\r\n                }\r\n            }\r\n            if (incrementCounter) count ++;//if string ends with a valid word\r\n            return count;\r\n        }\r\n        private boolean isValidWordCharacter(char c){\r\n            //any logic that will help you identify a valid character in a word\r\n            // you could also have a method which identifies word separators instead of this\r\n            return (c &gt;= &#39;A&#39; &amp;&amp; c&lt;=&#39;Z&#39;) || (c &gt;= &#39;a&#39; &amp;&amp; c&lt;=&#39;z&#39;); \r\n        }\r\n    }","title":"Java word count program","body":"<blockquote>\n  <p>you should make your code more generic by considering other word separators as well.. such as \",\" \";\" etc.</p>\n</blockquote>\n\n<pre><code>public class WordCounter{\n    public int count(String input){\n        int count =0;\n        boolean incrementCounter = false;\n        for (int i=0; i&lt;input.length(); i++){\n            if (isValidWordCharacter(input.charAt(i))){\n                incrementCounter = true;\n            }else if (incrementCounter){\n                count++;\n                incrementCounter = false;\n            }\n        }\n        if (incrementCounter) count ++;//if string ends with a valid word\n        return count;\n    }\n    private boolean isValidWordCharacter(char c){\n        //any logic that will help you identify a valid character in a word\n        // you could also have a method which identifies word separators instead of this\n        return (c &gt;= 'A' &amp;&amp; c&lt;='Z') || (c &gt;= 'a' &amp;&amp; c&lt;='z'); \n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2850233,"reputation":3615,"user_id":2447599,"display_name":"Ran Adler"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1371129617,"creation_date":1371129617,"answer_id":17088133,"question_id":8102754,"body_markdown":"    import com.google.common.base.Optional;\r\n    import com.google.common.base.Splitter;\r\n    import com.google.common.collect.HashMultiset;\r\n    import com.google.common.collect.ImmutableSet;\r\n    import com.google.common.collect.Multiset;\r\n    \r\n    String str=&quot;Simple Java Word Count count Count Program&quot;;\r\n    Iterable&lt;String&gt; words = Splitter.on(&quot; &quot;).trimResults().split(str);\r\n    \r\n    \r\n    //google word counter\t\t\r\n    Multiset&lt;String&gt; wordsMultiset = HashMultiset.create();\r\n    for (String string : words) {\t\r\n    \twordsMultiset.add(string.toLowerCase());\r\n    }\r\n    \r\n    Set&lt;String&gt; result = wordsMultiset.elementSet();\r\n    for (String string : result) {\r\n    \tSystem.out.println(string+&quot; X &quot;+wordsMultiset.count(string));\r\n    }","title":"Java word count program","body":"<pre><code>import com.google.common.base.Optional;\nimport com.google.common.base.Splitter;\nimport com.google.common.collect.HashMultiset;\nimport com.google.common.collect.ImmutableSet;\nimport com.google.common.collect.Multiset;\n\nString str=\"Simple Java Word Count count Count Program\";\nIterable&lt;String&gt; words = Splitter.on(\" \").trimResults().split(str);\n\n\n//google word counter       \nMultiset&lt;String&gt; wordsMultiset = HashMultiset.create();\nfor (String string : words) {   \n    wordsMultiset.add(string.toLowerCase());\n}\n\nSet&lt;String&gt; result = wordsMultiset.elementSet();\nfor (String string : result) {\n    System.out.println(string+\" X \"+wordsMultiset.count(string));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3048551,"reputation":1847,"user_id":2583637,"accept_rate":66,"display_name":"psbits"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1409865440,"creation_date":1409865376,"answer_id":25675117,"question_id":8102754,"body_markdown":"    public static int CountWords(String str){\r\n    \r\n       if(str.length() == 0)\r\n              return 0;\r\n              \r\n       int count =0;\r\n       for(int i=0;i&lt; str.length();i++){\r\n       \r\n        \r\n          if(str(i) == &#39; &#39;)\r\n              continue;\r\n              \r\n          if(i &gt; 0 &amp;&amp; str.charAt(i-1) == &#39; &#39;){\r\n            count++;\r\n          } \r\n          \r\n          else if(i==0 &amp;&amp; str.charAt(i) != &#39; &#39;){\r\n           count++;\r\n          }\r\n          \r\n          \r\n       }\r\n       return count;\r\n    \r\n    }","title":"Java word count program","body":"<pre><code>public static int CountWords(String str){\n\n   if(str.length() == 0)\n          return 0;\n\n   int count =0;\n   for(int i=0;i&lt; str.length();i++){\n\n\n      if(str(i) == ' ')\n          continue;\n\n      if(i &gt; 0 &amp;&amp; str.charAt(i-1) == ' '){\n        count++;\n      } \n\n      else if(i==0 &amp;&amp; str.charAt(i) != ' '){\n       count++;\n      }\n\n\n   }\n   return count;\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":960107,"reputation":1694,"user_id":2478046,"accept_rate":90,"display_name":"Peter"},"score":0,"creation_date":1443692361,"post_id":32884072,"comment_id":53598684,"body_markdown":"This appears to count letters rather than words, the OP requested word count instead.","body":"This appears to count letters rather than words, the OP requested word count instead."}],"tags":[],"owner":{"account_id":2719926,"reputation":11,"user_id":2874906,"display_name":"Francesco"},"comment_count":1,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1443726707,"creation_date":1443691835,"answer_id":32884072,"question_id":8102754,"body_markdown":"The full program working is:   \r\n\r\n    public class main {\r\n\r\n        public static void main(String[] args) {\r\n\r\n            logicCounter counter1 = new logicCounter();\r\n            counter1.counter(&quot;I am trying to make a program on word count which I have partially made and it is giving the correct result but the moment I enter space or more than one space in the string, the result of word count show wrong results because I am counting words on the basis of spaces used. I need help if there is a solution in a way that no matter how many spaces are I still get the correct result. I am mentioning the code below.&quot;);\r\n        }\r\n    }\r\n\r\n    public class logicCounter {\r\n\r\n        public void counter (String str) {\r\n\r\n            String str1 = str;\r\n            boolean space= true;\r\n            int i;\r\n\r\n            for ( i = 0; i &lt; str1.length(); i++) {\r\n\r\n                if (str1.charAt(i) == &#39; &#39;) {\r\n                    space=true;\r\n                } else {\r\n                    i++;\r\n                }\r\n            }\r\n\r\n            System.out.println(&quot;there are &quot; + i + &quot; letters&quot;);\r\n        }\r\n    }\r\n","title":"Java word count program","body":"<p>The full program working is:   </p>\n\n<pre><code>public class main {\n\n    public static void main(String[] args) {\n\n        logicCounter counter1 = new logicCounter();\n        counter1.counter(\"I am trying to make a program on word count which I have partially made and it is giving the correct result but the moment I enter space or more than one space in the string, the result of word count show wrong results because I am counting words on the basis of spaces used. I need help if there is a solution in a way that no matter how many spaces are I still get the correct result. I am mentioning the code below.\");\n    }\n}\n\npublic class logicCounter {\n\n    public void counter (String str) {\n\n        String str1 = str;\n        boolean space= true;\n        int i;\n\n        for ( i = 0; i &lt; str1.length(); i++) {\n\n            if (str1.charAt(i) == ' ') {\n                space=true;\n            } else {\n                i++;\n            }\n        }\n\n        System.out.println(\"there are \" + i + \" letters\");\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3254246,"reputation":3,"user_id":2743789,"display_name":"Rajesh Dev"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1490271984,"creation_date":1444423229,"answer_id":33046804,"question_id":8102754,"body_markdown":"\t\tString data = &quot;This world is mine&quot;;\r\n\t\tSystem.out.print(data.split(&quot;\\\\s+&quot;).length);\r\n","title":"Java word count program","body":"<pre><code>    String data = \"This world is mine\";\n    System.out.print(data.split(\"\\\\s+\").length);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8719057,"reputation":1,"user_id":6522755,"display_name":"Sham Arish"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1467108922,"creation_date":1467108922,"answer_id":38073395,"question_id":8102754,"body_markdown":"try this\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.Collections;\r\n    import java.util.HashMap;\r\n    import java.util.List;\r\n    import java.util.Map;\r\n    public class wordcount {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tString s = &quot;India is my country. I love India&quot;;\r\n    \t\tList&lt;String&gt; qw = new ArrayList&lt;String&gt;();\r\n    \t\tMap&lt;String, Integer&gt; mmm = new HashMap&lt;String, Integer&gt;();\r\n    \t\tfor (String sp : s.split(&quot; &quot;)) {\r\n    \t\t\tqw.add(sp);\r\n    \t\t}\r\n    \t\tfor (String num : qw) {\r\n    \t\t\tmmm.put(num, Collections.frequency(qw, num));\r\n    \t\t}\r\n    \t\tSystem.out.println(mmm);\r\n    \r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"Java word count program","body":"<p>try this</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\npublic class wordcount {\n    public static void main(String[] args) {\n        String s = \"India is my country. I love India\";\n        List&lt;String&gt; qw = new ArrayList&lt;String&gt;();\n        Map&lt;String, Integer&gt; mmm = new HashMap&lt;String, Integer&gt;();\n        for (String sp : s.split(\" \")) {\n            qw.add(sp);\n        }\n        for (String num : qw) {\n            mmm.put(num, Collections.frequency(qw, num));\n        }\n        System.out.println(mmm);\n\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8318247,"reputation":23,"user_id":6250813,"display_name":"I_Tech_Avi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1474890037,"creation_date":1474890037,"answer_id":39701875,"question_id":8102754,"body_markdown":"To count total words Or to count total words without repeat word count\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tString test = &quot;I am trying to make make make&quot;;\r\n\t\tPattern p = Pattern.compile(&quot;\\\\w+&quot;);\r\n\t\tMatcher m = p.matcher(test);\r\n\t\tHashSet&lt;String&gt; hs =  new HashSet&lt;&gt;();\r\n\t\tint i=0;\r\n\t\twhile (m.find()) {\r\n\t\t\ti++;\r\n\t\t\ths.add(m.group());\r\n\t\t}\r\n\t\tSystem.out.println(&quot;Total words Count==&quot; + i);\r\n\t\tSystem.out.println(&quot;Count without Repetation ==&quot; + hs.size());\r\n\t}\r\n\r\n}\r\n\r\nOutput :\r\n\r\nTotal words Count==7\r\n\r\nCount without Repeatation ==5","title":"Java word count program","body":"<p>To count total words Or to count total words without repeat word count</p>\n\n<pre><code>public static void main(String[] args) {\n    // TODO Auto-generated method stub\n    String test = \"I am trying to make make make\";\n    Pattern p = Pattern.compile(\"\\\\w+\");\n    Matcher m = p.matcher(test);\n    HashSet&lt;String&gt; hs =  new HashSet&lt;&gt;();\n    int i=0;\n    while (m.find()) {\n        i++;\n        hs.add(m.group());\n    }\n    System.out.println(\"Total words Count==\" + i);\n    System.out.println(\"Count without Repetation ==\" + hs.size());\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Output :</p>\n\n<p>Total words Count==7</p>\n\n<p>Count without Repeatation ==5</p>\n"},{"tags":[],"owner":{"account_id":9433426,"reputation":1,"user_id":7016159,"display_name":"Jon Matthew"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1476396732,"creation_date":1476395422,"answer_id":40031591,"question_id":8102754,"body_markdown":"Not sure if there is a drawback, but this worked for me...\r\n        \r\n        Scanner input = new Scanner(System.in);\r\n        String userInput = input.nextLine();\r\n        String trimmed = userInput.trim();\r\n        int count = 1;\r\n\r\n        for (int i = 0; i &lt; trimmed.length(); i++) {\r\n          if ((trimmed.charAt(i) == &#39; &#39;) &amp;&amp; (trimmed.charAt(i-1) != &#39; &#39;)) {\r\n            count++;\r\n          }\r\n        }","title":"Java word count program","body":"<p>Not sure if there is a drawback, but this worked for me...</p>\n\n<pre><code>    Scanner input = new Scanner(System.in);\n    String userInput = input.nextLine();\n    String trimmed = userInput.trim();\n    int count = 1;\n\n    for (int i = 0; i &lt; trimmed.length(); i++) {\n      if ((trimmed.charAt(i) == ' ') &amp;&amp; (trimmed.charAt(i-1) != ' ')) {\n        count++;\n      }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":218061,"reputation":6484,"user_id":474193,"display_name":"sunil"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1484547882,"creation_date":1484019555,"answer_id":41560748,"question_id":8102754,"body_markdown":"Java does have `StringTokenizer` API and can be used for this purpose as below.\r\n\r\n\tString test = &quot;This is a test app&quot;;\r\n\tint countOfTokens = new StringTokenizer(test).countTokens();\r\n\tSystem.out.println(countOfTokens);\r\n\r\n\r\nOR\r\n\r\nin a single line as below\r\n\r\n\tSystem.out.println(new StringTokenizer(&quot;This is a test app&quot;).countTokens());\r\n\r\n`StringTokenizer` supports multiple spaces in the input string, counting only the words trimming unnecessary spaces.\r\n\r\n    System.out.println(new StringTokenizer(&quot;This    is    a test    app&quot;).countTokens());\r\n\r\nAbove line also prints 5","title":"Java word count program","body":"<p>Java does have <code>StringTokenizer</code> API and can be used for this purpose as below.</p>\n\n<pre><code>String test = \"This is a test app\";\nint countOfTokens = new StringTokenizer(test).countTokens();\nSystem.out.println(countOfTokens);\n</code></pre>\n\n<p>OR</p>\n\n<p>in a single line as below</p>\n\n<pre><code>System.out.println(new StringTokenizer(\"This is a test app\").countTokens());\n</code></pre>\n\n<p><code>StringTokenizer</code> supports multiple spaces in the input string, counting only the words trimming unnecessary spaces.</p>\n\n<pre><code>System.out.println(new StringTokenizer(\"This    is    a test    app\").countTokens());\n</code></pre>\n\n<p>Above line also prints 5</p>\n"},{"tags":[],"owner":{"account_id":6365458,"reputation":1,"user_id":4939571,"display_name":"munni"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1504371543,"creation_date":1504364874,"answer_id":46015147,"question_id":8102754,"body_markdown":"This could be as simple as using split and count variable.\r\n\r\n    public class SplitString {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tint count=0;\t\t\r\n    \t\tString s1=&quot;Hi i love to code&quot;;\r\n    \r\n    \t    for(String s:s1.split(&quot; &quot;))\r\n    \t\t{\r\n    \t\t\tcount++;\r\n            }\r\n    \t    System.out.println(count);\r\n        }\r\n    }","title":"Java word count program","body":"<p>This could be as simple as using split and count variable.</p>\n\n<pre><code>public class SplitString {\n\n    public static void main(String[] args) {\n        int count=0;        \n        String s1=\"Hi i love to code\";\n\n        for(String s:s1.split(\" \"))\n        {\n            count++;\n        }\n        System.out.println(count);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15075026,"reputation":17,"user_id":10879411,"display_name":"Paritosh Bhatt"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1547908991,"creation_date":1547908991,"answer_id":54268219,"question_id":8102754,"body_markdown":"        public class TotalWordsInSentence {\r\n        public static void main(String[] args) {\r\n    \r\n            String str = &quot;This is sample sentence&quot;;\r\n            int NoOfWOrds = 1;\r\n    \r\n            for (int i = 0; i&lt;str.length();i++){\r\n                if ((str.charAt(i) == &#39; &#39;) &amp;&amp; (i!=0) &amp;&amp; (str.charAt(i-1) != &#39; &#39;)){\r\n                    NoOfWOrds++;\r\n                }\r\n            }\r\n             System.out.println(&quot;Number of Words in Sentence: &quot; + NoOfWOrds);\r\n        }\r\n    }\r\n\r\nIn this code, There wont be any problem regarding white-space in it.   \r\njust the simple for loop. Hope this helps...","title":"Java word count program","body":"<pre><code>    public class TotalWordsInSentence {\n    public static void main(String[] args) {\n\n        String str = \"This is sample sentence\";\n        int NoOfWOrds = 1;\n\n        for (int i = 0; i&lt;str.length();i++){\n            if ((str.charAt(i) == ' ') &amp;&amp; (i!=0) &amp;&amp; (str.charAt(i-1) != ' ')){\n                NoOfWOrds++;\n            }\n        }\n         System.out.println(\"Number of Words in Sentence: \" + NoOfWOrds);\n    }\n}\n</code></pre>\n\n<p>In this code, There wont be any problem regarding white-space in it.<br>\njust the simple for loop. Hope this helps...</p>\n"},{"tags":[],"owner":{"account_id":15510216,"reputation":36,"user_id":11189151,"display_name":"VISHAL SINGH"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1555475298,"creation_date":1555391575,"answer_id":55700958,"question_id":8102754,"body_markdown":"To count specified words only like John, John99, John_John and John&#39;s only. Change regex according to yourself and count the specified words only.\r\n```\r\n\tpublic static int wordCount(String content) {\r\n\t\tint count = 0;\r\n\t\tString regex = &quot;([a-zA-Z_’][0-9]*)+[\\\\s]*&quot;;\t\t\r\n\t\tPattern pattern = Pattern.compile(regex);\r\n\t\tMatcher matcher = pattern.matcher(content);\r\n\t\twhile(matcher.find()) {\r\n\t\t\tcount++;\r\n\t\t\tSystem.out.println(matcher.group().trim()); //If want to display the matched words\r\n\t\t}\r\n\t\treturn count;\r\n\t}\r\n```","title":"Java word count program","body":"<p>To count specified words only like John, John99, John_John and John's only. Change regex according to yourself and count the specified words only.</p>\n\n<pre><code>    public static int wordCount(String content) {\n        int count = 0;\n        String regex = \"([a-zA-Z_’][0-9]*)+[\\\\s]*\";     \n        Pattern pattern = Pattern.compile(regex);\n        Matcher matcher = pattern.matcher(content);\n        while(matcher.find()) {\n            count++;\n            System.out.println(matcher.group().trim()); //If want to display the matched words\n        }\n        return count;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":40774,"reputation":28739,"user_id":118228,"accept_rate":85,"display_name":"djangofan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1559949496,"creation_date":1559949496,"answer_id":56502151,"question_id":8102754,"body_markdown":"My implementation, not using StringTokenizer:\r\n\r\n    Map&lt;String, Long&gt; getWordCounts(List&lt;String&gt; sentences, int maxLength) {\r\n        Map&lt;String, Long&gt; commonWordsInEventDescriptions = sentences\r\n            .parallelStream()\r\n            .map(sentence -&gt; sentence.replace(&quot;.&quot;, &quot;&quot;))\r\n            .map(string -&gt; string.split(&quot; &quot;))\r\n            .flatMap(Arrays::stream)\r\n            .map(s -&gt; s.toLowerCase())\r\n            .filter(word -&gt; word.length() &gt;= 2 &amp;&amp; word.length() &lt;= maxLength)\r\n            .collect(groupingBy(Function.identity(), counting()));\r\n        }\r\n\r\nThen, you could call it like this, as an example:\r\n\r\n    getWordCounts(list, 9).entrySet().stream()\r\n                    .filter(pair -&gt; pair.getValue() &lt;= 3 &amp;&amp; pair.getValue() &gt;= 1)\r\n                    .findFirst()\r\n                    .orElseThrow(() -&gt; \r\n        new RuntimeException(&quot;No matching word found.&quot;)).getKey();\r\n\r\nPerhaps flipping the method to return `Map&lt;Long, String&gt;` might be better.","title":"Java word count program","body":"<p>My implementation, not using StringTokenizer:</p>\n\n<pre><code>Map&lt;String, Long&gt; getWordCounts(List&lt;String&gt; sentences, int maxLength) {\n    Map&lt;String, Long&gt; commonWordsInEventDescriptions = sentences\n        .parallelStream()\n        .map(sentence -&gt; sentence.replace(\".\", \"\"))\n        .map(string -&gt; string.split(\" \"))\n        .flatMap(Arrays::stream)\n        .map(s -&gt; s.toLowerCase())\n        .filter(word -&gt; word.length() &gt;= 2 &amp;&amp; word.length() &lt;= maxLength)\n        .collect(groupingBy(Function.identity(), counting()));\n    }\n</code></pre>\n\n<p>Then, you could call it like this, as an example:</p>\n\n<pre><code>getWordCounts(list, 9).entrySet().stream()\n                .filter(pair -&gt; pair.getValue() &lt;= 3 &amp;&amp; pair.getValue() &gt;= 1)\n                .findFirst()\n                .orElseThrow(() -&gt; \n    new RuntimeException(\"No matching word found.\")).getKey();\n</code></pre>\n\n<p>Perhaps flipping the method to return <code>Map&lt;Long, String&gt;</code> might be better.</p>\n"},{"tags":[],"owner":{"account_id":25471780,"reputation":1,"user_id":19269830,"display_name":"Sourabh Bhorjare"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654339628,"creation_date":1654339628,"answer_id":72499136,"question_id":8102754,"body_markdown":"class HelloWorld {\r\n    \r\n    public static void main(String[] args) {\r\n    String str = &quot;User is in for an interview&quot;;\r\n    int counter=0;\r\n    String arrStr[] = str.split(&quot; &quot;);\r\n        for (int i = 0; i&lt; arrStr.length; i++){\r\n            String charStr = arrStr[i];\r\n            for(int j=0; j&lt;charStr.length(); j++) {\r\n                if(charStr.charAt(j) ==&#39;i&#39;) {\r\n                  counter++;\r\n                }\r\n           }\r\n        }\r\n        System.out.println(&quot;i &quot; + counter);\r\n    }\r\n}","title":"Java word count program","body":"<p>class HelloWorld {</p>\n<pre><code>public static void main(String[] args) {\nString str = &quot;User is in for an interview&quot;;\nint counter=0;\nString arrStr[] = str.split(&quot; &quot;);\n    for (int i = 0; i&lt; arrStr.length; i++){\n        String charStr = arrStr[i];\n        for(int j=0; j&lt;charStr.length(); j++) {\n            if(charStr.charAt(j) =='i') {\n              counter++;\n            }\n       }\n    }\n    System.out.println(&quot;i &quot; + counter);\n}\n</code></pre>\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":27701003,"reputation":1,"user_id":21145576,"display_name":"Nikhil"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675825328,"creation_date":1675500367,"answer_id":75343933,"question_id":8102754,"body_markdown":"```\r\npublic class CountWords {\r\n\r\n    public static void main(String[] args) {\r\n        Scanner sc = new Scanner(System.in);\r\n        System.out.println(&quot;Enter the string :&quot;);\r\n        String str = sc.nextLine();\r\n        System.out.println(&quot;length is string is :&quot;+str.length());\r\n        int worldCount = 1;\r\n        for(int i=0; i&lt;str.length(); i++){\r\n            if(str.charAt(i) == &#39; &#39;){\r\n                worldCount++;\r\n            }\r\n        }\r\n        System.out.println(worldCount);\r\n    }\r\n}\r\n```","title":"Java word count program","body":"<pre><code>public class CountWords {\n\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        System.out.println(&quot;Enter the string :&quot;);\n        String str = sc.nextLine();\n        System.out.println(&quot;length is string is :&quot;+str.length());\n        int worldCount = 1;\n        for(int i=0; i&lt;str.length(); i++){\n            if(str.charAt(i) == ' '){\n                worldCount++;\n            }\n        }\n        System.out.println(worldCount);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1034634,"reputation":89,"user_id":1042251,"display_name":"Kenneth John Falbous"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":134670,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":24,"score":7,"last_activity_date":1675825328,"creation_date":1321075746,"question_id":8102754,"body_markdown":"I am trying to make a program on word count which I have partially made and it is giving the correct result but the moment I enter space or more than one space in the string, the result of word count show wrong results because I am counting words on the basis of spaces used. I need help if there is a solution in a way that no matter how many spaces are I still get the correct result. I am mentioning the code below.\r\n\r\n\r\n        \r\n    public class CountWords \r\n    {\r\n        public static void main (String[] args)\r\n        {\r\n\t\t\r\n                System.out.println(&quot;Simple Java Word Count Program&quot;);\r\n\t\t\r\n                String str1 = &quot;Today is Holdiay Day&quot;;\r\n\t\t\r\n                int wordCount = 1;\r\n        \r\n                for (int i = 0; i &lt; str1.length(); i++) \r\n                {\r\n                    if (str1.charAt(i) == &#39; &#39;) \r\n                    {\r\n                        wordCount++;\r\n                    } \r\n                }\r\n                \r\n                System.out.println(&quot;Word count is = &quot; + wordCount);\r\n        }\r\n    }","title":"Java word count program","body":"<p>I am trying to make a program on word count which I have partially made and it is giving the correct result but the moment I enter space or more than one space in the string, the result of word count show wrong results because I am counting words on the basis of spaces used. I need help if there is a solution in a way that no matter how many spaces are I still get the correct result. I am mentioning the code below.</p>\n\n<pre><code>public class CountWords \n{\n    public static void main (String[] args)\n    {\n\n            System.out.println(\"Simple Java Word Count Program\");\n\n            String str1 = \"Today is Holdiay Day\";\n\n            int wordCount = 1;\n\n            for (int i = 0; i &lt; str1.length(); i++) \n            {\n                if (str1.charAt(i) == ' ') \n                {\n                    wordCount++;\n                } \n            }\n\n            System.out.println(\"Word count is = \" + wordCount);\n    }\n}\n</code></pre>\n"},{"tags":["java","c++","jvm","java-native-interface","shared-libraries"],"comments":[{"owner":{"account_id":4705420,"reputation":47683,"user_id":3807729,"display_name":"Galik"},"score":1,"creation_date":1517479074,"post_id":48559785,"comment_id":84115259,"body_markdown":"`libjvm.so` comes with your `Java` installation. Could you be writing for one `Java` installation and compiling against a different version?","body":"<code>libjvm.so</code> comes with your <code>Java</code> installation. Could you be writing for one <code>Java</code> installation and compiling against a different version?"},{"owner":{"account_id":4705420,"reputation":47683,"user_id":3807729,"display_name":"Galik"},"score":1,"creation_date":1517479461,"post_id":48559785,"comment_id":84115514,"body_markdown":"Can you describe your actual problem? What isn&#39;t working? Is there an error message?","body":"Can you describe your actual problem? What isn&#39;t working? Is there an error message?"},{"owner":{"account_id":10430666,"reputation":71,"user_id":7690585,"display_name":"SoHerman"},"score":0,"creation_date":1517485039,"post_id":48559785,"comment_id":84119174,"body_markdown":"Hi Galik,\n\nthanks for your answer... I updated my question to give more insight in the particularities and background.... it&#39;s a rather extensive update, including the code use to support the setup &quot;Java-as-.so-loaded-in-C++-application-on-Linux&quot;. \nTo answer your question: look at the error desription part (&quot;relocation error&quot;) in particular...\n\nDoes this update and comment provide sufficient info.....?","body":"Hi Galik,  thanks for your answer... I updated my question to give more insight in the particularities and background.... it&#39;s a rather extensive update, including the code use to support the setup &quot;Java-as-.so-loaded-in-C++-application-on-Linux&quot;.  To answer your question: look at the error desription part (&quot;relocation error&quot;) in particular...  Does this update and comment provide sufficient info.....?"},{"owner":{"account_id":10430666,"reputation":71,"user_id":7690585,"display_name":"SoHerman"},"score":0,"creation_date":1517485116,"post_id":48559785,"comment_id":84119222,"body_markdown":"Also mind that I don&#39;t use a &quot;main&quot;  in the Java part....it&#39;s currently only a few separate classes....","body":"Also mind that I don&#39;t use a &quot;main&quot;  in the Java part....it&#39;s currently only a few separate classes...."},{"owner":{"account_id":4705420,"reputation":47683,"user_id":3807729,"display_name":"Galik"},"score":0,"creation_date":1517487920,"post_id":48559785,"comment_id":84121006,"body_markdown":"Is there any reason you are using `dlopen` rather than simply linking against the library in the usual way?","body":"Is there any reason you are using <code>dlopen</code> rather than simply linking against the library in the usual way?"},{"owner":{"account_id":10430666,"reputation":71,"user_id":7690585,"display_name":"SoHerman"},"score":0,"creation_date":1517488645,"post_id":48559785,"comment_id":84121497,"body_markdown":"Yes... because I want to access it with the debugger (I use &quot;gdb&quot;).... so I do both.... I load it AND link it...\nBut that was also because I wasn&#39;t exeactly certain what are the technical and configurational prerequisites in the case......\nIn Windows/VisualStudio, it is possible to access the (C++) .dll from Java in debug mode (with the VS debugger).... I want to do it the other way around.\nThe &quot;Java&quot;  and &quot;C++&quot;  parts here of course being connected through a JNI interface, and put into separate projects within an Eclipse environment....","body":"Yes... because I want to access it with the debugger (I use &quot;gdb&quot;).... so I do both.... I load it AND link it... But that was also because I wasn&#39;t exeactly certain what are the technical and configurational prerequisites in the case...... In Windows/VisualStudio, it is possible to access the (C++) .dll from Java in debug mode (with the VS debugger).... I want to do it the other way around. The &quot;Java&quot;  and &quot;C++&quot;  parts here of course being connected through a JNI interface, and put into separate projects within an Eclipse environment...."},{"owner":{"account_id":10430666,"reputation":71,"user_id":7690585,"display_name":"SoHerman"},"score":0,"creation_date":1517494732,"post_id":48559785,"comment_id":84125588,"body_markdown":"I was forgotten about this (it has been some time that I actually wrote this code, I just returned to it....), but I tried that approach because the original invocation of JNI_CreateJavaVM:\n\n(see the commented-out-fragment in the code above:\n// old code: jint retCrJvm = JNI_CreateJavaVM(&amp;jvm, (void**)&amp;env, &amp;vm_args);\n\ndid not work.... there I got the error (which looks like a kind of &quot;sync&#39;  error)\n\nI tried to make an alternative call using the .so handle\n\nBut I left the linker settings as they were....","body":"I was forgotten about this (it has been some time that I actually wrote this code, I just returned to it....), but I tried that approach because the original invocation of JNI_CreateJavaVM:  (see the commented-out-fragment in the code above: // old code: jint retCrJvm = JNI_CreateJavaVM(&amp;jvm, (void**)&amp;env, &amp;vm_args);  did not work.... there I got the error (which looks like a kind of &quot;sync&#39;  error)  I tried to make an alternative call using the .so handle  But I left the linker settings as they were...."}],"answers":[{"comments":[{"owner":{"account_id":10430666,"reputation":71,"user_id":7690585,"display_name":"SoHerman"},"score":0,"creation_date":1517590046,"post_id":48570992,"comment_id":84171601,"body_markdown":"Thanks,\n\nbut:\na) I already put that path in my LD_LIBRARY_PATH.\nb) That was my first attempt. But that didn&#39;t work, I got the &quot;relacation error&quot; as noted in my post. Thereafter I tried &quot;plan B&quot;  with &quot;dlopen and stuff&quot;.... which wasn&#39;t a undivided success either....\n\nTherefore my last question in my   post (and I quote myself):\n\n&quot;I have hereby strong suspicions that either: 1. the jni header and the library (libJvm.so) are out of sync, or 2. the class path or lib path do not contain the correct value&#39;s 3. the Java .so (.dll) loaded (with &quot;dlopen&quot;) is not what it should be....&quot; ?","body":"Thanks,  but: a) I already put that path in my LD_LIBRARY_PATH. b) That was my first attempt. But that didn&#39;t work, I got the &quot;relacation error&quot; as noted in my post. Thereafter I tried &quot;plan B&quot;  with &quot;dlopen and stuff&quot;.... which wasn&#39;t a undivided success either....  Therefore my last question in my   post (and I quote myself):  &quot;I have hereby strong suspicions that either: 1. the jni header and the library (libJvm.so) are out of sync, or 2. the class path or lib path do not contain the correct value&#39;s 3. the Java .so (.dll) loaded (with &quot;dlopen&quot;) is not what it should be....&quot; ?"},{"owner":{"account_id":65347,"reputation":56309,"user_id":192373,"accept_rate":74,"display_name":"Alex Cohn"},"score":0,"creation_date":1518292871,"post_id":48570992,"comment_id":84448926,"body_markdown":"On Linux, you can examine /proc to find which shared libraries (including full path) are used in your process.","body":"On Linux, you can examine /proc to find which shared libraries (including full path) are used in your process."}],"tags":[],"owner":{"account_id":65347,"reputation":56309,"user_id":192373,"accept_rate":74,"display_name":"Alex Cohn"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1517516046,"creation_date":1517516046,"answer_id":48570992,"question_id":48559785,"body_markdown":"a) make sure that `/usr/lib/jvm/java-1.7.0.openjdk-1.7.0.71.x86_64/jre/lib/amd64/` is on your LD_LIBRARY_PATH\r\n\r\nb) switch back to &#39;old code&#39; loading **libjvm.so** implicitly without dlopen and stuff.","title":"What is libJvm.so, and when is it built?","body":"<p>a) make sure that <code>/usr/lib/jvm/java-1.7.0.openjdk-1.7.0.71.x86_64/jre/lib/amd64/</code> is on your LD_LIBRARY_PATH</p>\n\n<p>b) switch back to 'old code' loading <strong>libjvm.so</strong> implicitly without dlopen and stuff.</p>\n"}],"owner":{"account_id":10430666,"reputation":71,"user_id":7690585,"display_name":"SoHerman"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13815,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"answer_count":1,"score":4,"last_activity_date":1675825291,"creation_date":1517478767,"question_id":48559785,"body_markdown":"I&#39;m a bit surprised that I have to post a question that looks rather trivial and easy to look up.... but it apparently isn&#39;t.\r\n\r\nBecause it looks that my `jni.h` and the `libJvm.so` library are out of sync (or so I suspect), which shows up trying to load my Java application as a library into the C++ environment on Linux(with `JNI_CreateJVM()` and all that), I wonder which could be the culprit. The `jni.h` is just standard, containing all normal modules.... the `libJvm.so` however... I cannot see what the contents are.... I don&#39;t even know what it really is and how/ where it is built. \r\n\r\nCan anybody give me an explanation/answer to this question?\r\n\r\nP.S. the problems don&#39;t have to do with library path and related issues... the `libJvm.so` can be found. It is just hard to understand what goes wrong as long as I don&#39;t exeactly know all the components I&#39;m working with.... \r\n\r\nHereunder an update, following on comments that came in in reactions on my question (it is a very long update, because I decided it might be insightful to include the code that I&#39;m working with)...\r\n\r\nThe code I&#39;m working with (and experiencing the problem with), after the code I also say something about the environment/settings and circumstances....:\r\n\r\n    #include &lt;jni.h&gt;\r\n    #include &quot;jvm.h&quot;\r\n    #include &lt;iostream&gt;\r\n    #include &lt;stdlib.h&gt;\r\n    #include &lt;dlfcn.h&gt;\r\n\r\n    using namespace std;\r\n\r\n    //Create type for pointer to the JNI_CreateJavaVM function\r\n    typedef jint (*CreateJvmFuncPtr) (JavaVM**, void**, JavaVMInitArgs*); \r\n\r\n    //New method returns pointer to the JNI_CreateJavaVM function\r\n    CreateJvmFuncPtr findCreateJvm() { \r\n    CreateJvmFuncPtr createJvm = NULL;\r\n\r\n    void* jvmLib = dlopen(&quot;/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.71.x86_64/jre/lib/amd64/server/libjvm.so&quot;, RTLD_LAZY); //Get handle to jvm shared library\r\n    char* error = dlerror(); //Check for errors on dlopen\r\n\r\n    if(jvmLib == NULL || error != NULL) {\r\n        printf(&quot;FailedToLoadJVM\\n&quot;);\r\n    }\r\n\r\n    //Load pointer to the function within the shared library\r\n    createJvm = (CreateJvmFuncPtr) dlsym(jvmLib, &quot;JNI_CreateJavaVM&quot;);\r\n\r\n    error = dlerror();\r\n    if(error != NULL) {\r\n        printf(&quot;Success\\n&quot;);\r\n    }\r\n\r\n    return createJvm;\r\n}\r\n\r\n    int main() {\r\n\r\n    // load and initialize JVM and JNI interface, in a test setting where JVM is &quot;passive&quot;\r\n    // (called/loaded as .dll) and the JNI env is not available yet from a Java/JVM call\r\n    // (which would be the caste in the normal setup/configuration).\r\n    //int jniLoadJvmAsDll()\r\n    //{\r\n       JavaVM *jvm;                      // Pointer to the JVM (Java Virtual Machine)\r\n       JNIEnv *env;                      // Pointer to native interface\r\n           //======== prepare loading of Java VM: assign init arguments for JVM init =========\r\n       JavaVMInitArgs vm_args;                        // Initialization arguments\r\n    //       JavaVMOption* vmOptions = new JavaVMOption[1];   // JVM invocation options\r\n       JavaVMOption vmOptions[4];\r\n\r\n       \t   \t   \t   \t   \t   \t   \t   \t   \t   \t   \t   \t   \t   \t// (=&gt; comparable to lib path for System.load(libPath/libName)\r\n\r\n       vmOptions[0].optionString = &quot;-Djava.compiler=NONE&quot;;           /* disable JIT */\r\n       vmOptions[1].optionString = &quot;-Djava.class.path=/home/adminuser/workspace_Unit_Test_Java_Cpp/Unit_Test_Jni_Java/bin&quot;; // which Java class to load\r\n       vmOptions[2].optionString = &quot;-Djava.library.path=/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.71.x86_64/jre/lib/amd64/;/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.71.x86_64/jre/lib/amd64/server&quot;;\r\n       vmOptions[3].optionString = &quot;-verbose:jni&quot;;                   /* print JNI-related messages */\r\n       vm_args.version = JNI_VERSION_1_6;             // minimum Java version\r\n       vm_args.nOptions = 1;                          // number of options\r\n       vm_args.options = vmOptions;\r\n       vm_args.ignoreUnrecognized = false;     // invalid options make the JVM init fail\r\n\r\n           //=============== load and initialize Java VM and JNI interface =============\r\n       // old code: jint retCrJvm = JNI_CreateJavaVM(&amp;jvm, (void**)&amp;env, &amp;vm_args);  // YES !!\r\n       //New code:\r\n       CreateJvmFuncPtr createJVM = findCreateJvm();\r\n       printf(&quot;findCreateJVM() returned 0x%x\\n&quot;, createJVM);\r\n\r\n       jint retCrJvm = createJVM(&amp;jvm, (void**)&amp;env, &amp;vm_args);\r\n       //End new code\r\n       delete vmOptions;    // we then no longer need the initialization options.\r\n       if (retCrJvm != JNI_OK) {\r\n              // TO DO: error processing...\r\n             cin.get();\r\n             exit(EXIT_FAILURE);\r\n       }\r\n\r\n       \t   //====================handle multithread situatiation ========================\r\n       JavaVM * curVM = NULL;\t\t\t// JVM in current thread, should contain loaded VM\r\n       \t   \t   \t   \t   \t   \t   \t   \t   \t// otherwise we&#39;re not in the main thread\r\n       JNIEnv *curEnv;\r\n       int jvmLoadFailed = 1;\r\n\r\n       // handle situation that we&#39;re not in the main thread (current thread isnt&#39;t main thread)\r\n       if (jvm == NULL) {\r\n    \t   env-&gt;GetJavaVM( &amp;curVM ); // JVM should contain current/main thread JVM, otherwise\r\n    \t   \t   \t   \t   \t   \t   \t   \t // we&#39;re not in the main thread\r\n\r\n    \t   int vmStat = curVM-&gt;GetEnv((void **)&amp;curEnv, JNI_VERSION_1_6);\r\n    \t   if (vmStat == JNI_EDETACHED)  //We are on a different thread, attach\r\n    \t\t   curVM-&gt;AttachCurrentThread((void **) &amp;curVM, NULL);\r\n    \t   if( curVM == NULL )\r\n    \t\t   return jvmLoadFailed;  //Can&#39;t attach to java, bail out\r\n       }\r\n\r\n          //=============== Display JVM version =======================================\r\n       cout &lt;&lt; &quot;JVM load (as .so/.dll) succeeded: Version &quot;;\r\n       jint ver = env-&gt;GetVersion();\r\n       std::cout &lt;&lt; ((ver&gt;&gt;16)&amp;0x0f) &lt;&lt; &quot;.&quot;&lt;&lt;(ver&amp;0x0f) &lt;&lt; endl;\r\n\r\n       // TO DO: add the code that will use JVM &lt;============  (see next steps)\r\n\r\n       // insert the JNITools separate methods here.... for each separate graphical structure\r\n       // initially a test class is inserted.....\r\n       jclass clsTestPrint = env-&gt;FindClass(&quot;TestPrint&quot;);  // try to find the class\r\n       if(clsTestPrint == NULL) {\r\n           cerr &lt;&lt; &quot;ERROR: class not found !&quot;;\r\n       }\r\n       jmethodID ctor = env-&gt;GetMethodID(clsTestPrint, &quot;&lt;init&gt;&quot;, &quot;()V&quot;);  // find an object constructor for this class\r\n       if(ctor == NULL) {\r\n           cerr &lt;&lt; &quot;ERROR: constructor not found !&quot; &lt;&lt; endl;\r\n       }\r\n       else {\r\n           cout &lt;&lt; &quot;Object succesfully constructed !&quot;&lt;&lt;endl;\r\n           jobject prtObj = env-&gt;NewObject(clsTestPrint, ctor); // invoke the object constructor: create print object\r\n           if (prtObj) {\r\n                jmethodID show = env-&gt;GetMethodID(clsTestPrint, &quot;showId&quot;, &quot;()V&quot;);\r\n                if(show == NULL)\r\n                    cerr &lt;&lt; &quot;No showId method !!&quot; &lt;&lt; endl;\r\n                else env-&gt;CallVoidMethod(prtObj, show);\r\n           }\r\n       }\r\n\r\n\r\n       jvm-&gt;DestroyJavaVM();\r\n       cin.get();\r\n       return 0;\r\n//}\r\n\r\n}\r\n\r\nWhere &quot;dlopen&quot; and &quot;dlsym&quot; of course replace the &quot;loadLibrary()&quot; and &quot;getProcaddress()&quot; calls you would use on Windows to 1. load a .dll and get a handle to the appropriate JNI procedure... but I&#39;m doing this on Linux, therefore the &quot;equivalent translations&quot;....\r\n\r\nThe &quot;multithread&quot; decoration is not really relevant here.... added it for possible future purposes.\r\n\r\n\r\nAfter some experiments I succeeded in configuaring the build settings so that also the libjvm.so is found and within that the API JNI method JNI_CreateJavaVM()....\r\nFor that I added (on Linux, using Eclipse) the following &quot;GCC C++ Linker&quot; settings:\r\n-- =&gt; &quot;Libraries&quot; =&gt; &quot;Libraries (-l)&quot; =&gt; &quot;Jvm&quot; and\r\n=&gt; &quot;Library Search Path (-L)&quot; =&gt; \r\n&quot;/usr/lib/jvm/java-1.7.0.openjdk-1.7.0.71.x86_64/jre/lib/amd64/server&quot;\r\n\r\n-- =&gt; &quot;Shared Library Settings&quot; =&gt; &quot;Shared Object Name &quot; =&gt; &quot;libjvm.so&quot;\r\n\r\nOther settings gave errors during compilation/linking.\r\n\r\nWith this, the environment can be built. The debugger is started and stops in main and I can step througt the C++ code as usual until.... I reach the JNI_CreateJavaVM() invocation. At that time the following error occurs.\r\n\r\nrelocation error: /home/adminuser/workspace_Unit_Test_Java_Cpp/Unit_Test_Jni_Cpp/Debug/Unit_Test_Jni_Cpp: symbol JNI_CreateJavaVM, version SUNWprivate_1.1 not defined in file libjvm.so with link time reference\r\n\r\nI have hereby strong suspicions that either:\r\n 1. the jni header and the library (libJvm.so) are out of sync, or\r\n 2. the class path or lib path do not contain the correct value&#39;s\r\n3. the Java .so (.dll) loaded (with &quot;dlopen&quot;) is not what it should be.... \r\n\r\nAny idea&#39;s which value&#39;s to use?\r\n\r\nThis is the &quot;background of my question: to determine wheter the jni and libJvm.so content are out of sync, is it very convenient to know what it is and where it is about....","title":"What is libJvm.so, and when is it built?","body":"<p>I'm a bit surprised that I have to post a question that looks rather trivial and easy to look up.... but it apparently isn't.</p>\n\n<p>Because it looks that my <code>jni.h</code> and the <code>libJvm.so</code> library are out of sync (or so I suspect), which shows up trying to load my Java application as a library into the C++ environment on Linux(with <code>JNI_CreateJVM()</code> and all that), I wonder which could be the culprit. The <code>jni.h</code> is just standard, containing all normal modules.... the <code>libJvm.so</code> however... I cannot see what the contents are.... I don't even know what it really is and how/ where it is built. </p>\n\n<p>Can anybody give me an explanation/answer to this question?</p>\n\n<p>P.S. the problems don't have to do with library path and related issues... the <code>libJvm.so</code> can be found. It is just hard to understand what goes wrong as long as I don't exeactly know all the components I'm working with.... </p>\n\n<p>Hereunder an update, following on comments that came in in reactions on my question (it is a very long update, because I decided it might be insightful to include the code that I'm working with)...</p>\n\n<p>The code I'm working with (and experiencing the problem with), after the code I also say something about the environment/settings and circumstances....:</p>\n\n<pre><code>#include &lt;jni.h&gt;\n#include \"jvm.h\"\n#include &lt;iostream&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;dlfcn.h&gt;\n\nusing namespace std;\n\n//Create type for pointer to the JNI_CreateJavaVM function\ntypedef jint (*CreateJvmFuncPtr) (JavaVM**, void**, JavaVMInitArgs*); \n\n//New method returns pointer to the JNI_CreateJavaVM function\nCreateJvmFuncPtr findCreateJvm() { \nCreateJvmFuncPtr createJvm = NULL;\n\nvoid* jvmLib = dlopen(\"/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.71.x86_64/jre/lib/amd64/server/libjvm.so\", RTLD_LAZY); //Get handle to jvm shared library\nchar* error = dlerror(); //Check for errors on dlopen\n\nif(jvmLib == NULL || error != NULL) {\n    printf(\"FailedToLoadJVM\\n\");\n}\n\n//Load pointer to the function within the shared library\ncreateJvm = (CreateJvmFuncPtr) dlsym(jvmLib, \"JNI_CreateJavaVM\");\n\nerror = dlerror();\nif(error != NULL) {\n    printf(\"Success\\n\");\n}\n\nreturn createJvm;\n</code></pre>\n\n<p>}</p>\n\n<pre><code>int main() {\n\n// load and initialize JVM and JNI interface, in a test setting where JVM is \"passive\"\n// (called/loaded as .dll) and the JNI env is not available yet from a Java/JVM call\n// (which would be the caste in the normal setup/configuration).\n//int jniLoadJvmAsDll()\n//{\n   JavaVM *jvm;                      // Pointer to the JVM (Java Virtual Machine)\n   JNIEnv *env;                      // Pointer to native interface\n       //======== prepare loading of Java VM: assign init arguments for JVM init =========\n   JavaVMInitArgs vm_args;                        // Initialization arguments\n//       JavaVMOption* vmOptions = new JavaVMOption[1];   // JVM invocation options\n   JavaVMOption vmOptions[4];\n\n                                                        // (=&gt; comparable to lib path for System.load(libPath/libName)\n\n   vmOptions[0].optionString = \"-Djava.compiler=NONE\";           /* disable JIT */\n   vmOptions[1].optionString = \"-Djava.class.path=/home/adminuser/workspace_Unit_Test_Java_Cpp/Unit_Test_Jni_Java/bin\"; // which Java class to load\n   vmOptions[2].optionString = \"-Djava.library.path=/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.71.x86_64/jre/lib/amd64/;/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.71.x86_64/jre/lib/amd64/server\";\n   vmOptions[3].optionString = \"-verbose:jni\";                   /* print JNI-related messages */\n   vm_args.version = JNI_VERSION_1_6;             // minimum Java version\n   vm_args.nOptions = 1;                          // number of options\n   vm_args.options = vmOptions;\n   vm_args.ignoreUnrecognized = false;     // invalid options make the JVM init fail\n\n       //=============== load and initialize Java VM and JNI interface =============\n   // old code: jint retCrJvm = JNI_CreateJavaVM(&amp;jvm, (void**)&amp;env, &amp;vm_args);  // YES !!\n   //New code:\n   CreateJvmFuncPtr createJVM = findCreateJvm();\n   printf(\"findCreateJVM() returned 0x%x\\n\", createJVM);\n\n   jint retCrJvm = createJVM(&amp;jvm, (void**)&amp;env, &amp;vm_args);\n   //End new code\n   delete vmOptions;    // we then no longer need the initialization options.\n   if (retCrJvm != JNI_OK) {\n          // TO DO: error processing...\n         cin.get();\n         exit(EXIT_FAILURE);\n   }\n\n       //====================handle multithread situatiation ========================\n   JavaVM * curVM = NULL;           // JVM in current thread, should contain loaded VM\n                                    // otherwise we're not in the main thread\n   JNIEnv *curEnv;\n   int jvmLoadFailed = 1;\n\n   // handle situation that we're not in the main thread (current thread isnt't main thread)\n   if (jvm == NULL) {\n       env-&gt;GetJavaVM( &amp;curVM ); // JVM should contain current/main thread JVM, otherwise\n                                 // we're not in the main thread\n\n       int vmStat = curVM-&gt;GetEnv((void **)&amp;curEnv, JNI_VERSION_1_6);\n       if (vmStat == JNI_EDETACHED)  //We are on a different thread, attach\n           curVM-&gt;AttachCurrentThread((void **) &amp;curVM, NULL);\n       if( curVM == NULL )\n           return jvmLoadFailed;  //Can't attach to java, bail out\n   }\n\n      //=============== Display JVM version =======================================\n   cout &lt;&lt; \"JVM load (as .so/.dll) succeeded: Version \";\n   jint ver = env-&gt;GetVersion();\n   std::cout &lt;&lt; ((ver&gt;&gt;16)&amp;0x0f) &lt;&lt; \".\"&lt;&lt;(ver&amp;0x0f) &lt;&lt; endl;\n\n   // TO DO: add the code that will use JVM &lt;============  (see next steps)\n\n   // insert the JNITools separate methods here.... for each separate graphical structure\n   // initially a test class is inserted.....\n   jclass clsTestPrint = env-&gt;FindClass(\"TestPrint\");  // try to find the class\n   if(clsTestPrint == NULL) {\n       cerr &lt;&lt; \"ERROR: class not found !\";\n   }\n   jmethodID ctor = env-&gt;GetMethodID(clsTestPrint, \"&lt;init&gt;\", \"()V\");  // find an object constructor for this class\n   if(ctor == NULL) {\n       cerr &lt;&lt; \"ERROR: constructor not found !\" &lt;&lt; endl;\n   }\n   else {\n       cout &lt;&lt; \"Object succesfully constructed !\"&lt;&lt;endl;\n       jobject prtObj = env-&gt;NewObject(clsTestPrint, ctor); // invoke the object constructor: create print object\n       if (prtObj) {\n            jmethodID show = env-&gt;GetMethodID(clsTestPrint, \"showId\", \"()V\");\n            if(show == NULL)\n                cerr &lt;&lt; \"No showId method !!\" &lt;&lt; endl;\n            else env-&gt;CallVoidMethod(prtObj, show);\n       }\n   }\n\n\n   jvm-&gt;DestroyJavaVM();\n   cin.get();\n   return 0;\n</code></pre>\n\n<p>//}</p>\n\n<p>}</p>\n\n<p>Where \"dlopen\" and \"dlsym\" of course replace the \"loadLibrary()\" and \"getProcaddress()\" calls you would use on Windows to 1. load a .dll and get a handle to the appropriate JNI procedure... but I'm doing this on Linux, therefore the \"equivalent translations\"....</p>\n\n<p>The \"multithread\" decoration is not really relevant here.... added it for possible future purposes.</p>\n\n<p>After some experiments I succeeded in configuaring the build settings so that also the libjvm.so is found and within that the API JNI method JNI_CreateJavaVM()....\nFor that I added (on Linux, using Eclipse) the following \"GCC C++ Linker\" settings:\n-- => \"Libraries\" => \"Libraries (-l)\" => \"Jvm\" and\n=> \"Library Search Path (-L)\" => \n\"/usr/lib/jvm/java-1.7.0.openjdk-1.7.0.71.x86_64/jre/lib/amd64/server\"</p>\n\n<p>-- => \"Shared Library Settings\" => \"Shared Object Name \" => \"libjvm.so\"</p>\n\n<p>Other settings gave errors during compilation/linking.</p>\n\n<p>With this, the environment can be built. The debugger is started and stops in main and I can step througt the C++ code as usual until.... I reach the JNI_CreateJavaVM() invocation. At that time the following error occurs.</p>\n\n<p>relocation error: /home/adminuser/workspace_Unit_Test_Java_Cpp/Unit_Test_Jni_Cpp/Debug/Unit_Test_Jni_Cpp: symbol JNI_CreateJavaVM, version SUNWprivate_1.1 not defined in file libjvm.so with link time reference</p>\n\n<p>I have hereby strong suspicions that either:\n 1. the jni header and the library (libJvm.so) are out of sync, or\n 2. the class path or lib path do not contain the correct value's\n3. the Java .so (.dll) loaded (with \"dlopen\") is not what it should be.... </p>\n\n<p>Any idea's which value's to use?</p>\n\n<p>This is the \"background of my question: to determine wheter the jni and libJvm.so content are out of sync, is it very convenient to know what it is and where it is about....</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc","servlets"],"comments":[{"owner":{"account_id":4809624,"reputation":3467,"user_id":3883475,"accept_rate":85,"display_name":"Ironluca"},"score":0,"creation_date":1675587121,"post_id":75350217,"comment_id":132958190,"body_markdown":"It could be due to the session actually not being accessed. Try this, create a servlet and access a session repeatedly, getAttribute/setAttribute and check the behaviour","body":"It could be due to the session actually not being accessed. Try this, create a servlet and access a session repeatedly, getAttribute/setAttribute and check the behaviour"},{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1675589524,"post_id":75350217,"comment_id":132958539,"body_markdown":"That’s the right config. How do you know all sessions are invalidated? How are you touching the sessions so the stay alive? Add this to the question. I suggest to increase the life to 180s while you debug. BTW: httpSession.invalidate(); should not be in the sessionDestroyed()","body":"That’s the right config. How do you know all sessions are invalidated? How are you touching the sessions so the stay alive? Add this to the question. I suggest to increase the life to 180s while you debug. BTW: httpSession.invalidate(); should not be in the sessionDestroyed()"},{"owner":{"account_id":20319777,"reputation":13,"user_id":14904745,"display_name":"LazyCoder"},"score":0,"creation_date":1675596768,"post_id":75350217,"comment_id":132959646,"body_markdown":"@JohnWilliams, so, there will always be communication between server and client because I have make sure in frontend that the client will be sending a message to the server every second to check if new user is available there meaning that the only time there won&#39;t be commucation is when either client closes the site.","body":"@JohnWilliams, so, there will always be communication between server and client because I have make sure in frontend that the client will be sending a message to the server every second to check if new user is available there meaning that the only time there won&#39;t be commucation is when either client closes the site."},{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1675596875,"post_id":75350217,"comment_id":132959673,"body_markdown":"How do you know all sessions are invalidated?","body":"How do you know all sessions are invalidated?"},{"owner":{"account_id":20319777,"reputation":13,"user_id":14904745,"display_name":"LazyCoder"},"score":0,"creation_date":1675597168,"post_id":75350217,"comment_id":132959716,"body_markdown":"because using front end, I&#39;m creating 2 sessions, and in eclipse console, after a minute there are 2 session destroyed method printing on console and since in my code, once the session get destroyed, I&#39;m removing that user from the array list of users meaning that both user just disappears from the list.","body":"because using front end, I&#39;m creating 2 sessions, and in eclipse console, after a minute there are 2 session destroyed method printing on console and since in my code, once the session get destroyed, I&#39;m removing that user from the array list of users meaning that both user just disappears from the list."},{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1675685296,"post_id":75350217,"comment_id":132975616,"body_markdown":"How are you touching the sessions so they stay alive?","body":"How are you touching the sessions so they stay alive?"}],"answers":[{"tags":[],"owner":{"account_id":20319777,"reputation":13,"user_id":14904745,"display_name":"LazyCoder"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675630788,"creation_date":1675630788,"answer_id":75355471,"question_id":75350217,"body_markdown":"Oh, I finally find out what the problem is. So, what was happening is that when frontend makes a request to the server, new session was created for each request meaning that even if the browswer was open and making continuous requests to the server, the request was being made through a new session id rather than the one that was first created by sessionCreated method resulting in httpsessionlistner thinking that the session is inactive\r\n\r\nDon&#39;t have the solution yet but the problem that I&#39;m asking is solved.","title":"Session Destroyed method of HttpSessionListner","body":"<p>Oh, I finally find out what the problem is. So, what was happening is that when frontend makes a request to the server, new session was created for each request meaning that even if the browswer was open and making continuous requests to the server, the request was being made through a new session id rather than the one that was first created by sessionCreated method resulting in httpsessionlistner thinking that the session is inactive</p>\n<p>Don't have the solution yet but the problem that I'm asking is solved.</p>\n"}],"owner":{"account_id":20319777,"reputation":13,"user_id":14904745,"display_name":"LazyCoder"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":216,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675825195,"creation_date":1675573450,"question_id":75350217,"body_markdown":"So, I&#39;m using HttpSessionListner and based what I found, there it said that using\r\n\r\n`server.servlet.session.timeout=1m`\r\n\r\nwill disconned the inactive session i.e. invalading the session by calling sessionDestroyed method of the class implmenting HttpSessionListner.\r\n\r\nThe good part is that, yeah its working like it should be but the problem is, after 1 minute (which I set 1 minute because that&#39;s the miniumum requirement for tomcat) every session get destroyed no matter whether the session makes any requests to the server or not.\r\n\r\nIs that how session timeout is suppose to work or I&#39;m doing it in worng way.\r\n\r\nHere is my code from the class implementing HttpSessionListner\r\n\r\n```\r\n@Component\r\npublic class SessionListner implements HttpSessionListener {\r\n\r\n\t\r\n\tprivate static final Logger log = LoggerFactory.getLogger(SessionListner.class);\r\n\r\n\t@Autowired\r\n\tUserService userService;\r\n\t\r\n\t@Override\r\n\tpublic void sessionCreated(HttpSessionEvent se) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tHttpSession session = se.getSession();\r\n\t\tsession.setAttribute(&quot;sessionId&quot;, session.getId());\r\n\t\tlog.info(session.getId());\r\n\t\tSystem.out.println(this.userService.getUser().size());\r\n\t\t\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void sessionDestroyed(HttpSessionEvent se) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tHttpSession httpSession = se.getSession();\r\n\r\n\t\tif(userService.getUser().size() &gt;0) {\r\n\t\t\tfor (int i = 0; i &lt; this.userService.getUser().size(); i++) {\r\n\t            if (this.userService.getUser().get(i).getSessionId().equals(httpSession.getId())) {\r\n\t                this.userService.getUser().remove(this.userService.getUser().get(i));\r\n\t            }\r\n\t        }\r\n\t\t\t}\r\n\t\thttpSession.invalidate();\r\n\t\tlog.info(&quot;Destroying session&quot;);\r\n\t}\r\n}\r\n```\r\n\r\nI tried making changes in the frontend in a way I can make request to the server but well no matter how much I make request, the session get destroyed after assigned timeout time.","title":"Session Destroyed method of HttpSessionListner","body":"<p>So, I'm using HttpSessionListner and based what I found, there it said that using</p>\n<p><code>server.servlet.session.timeout=1m</code></p>\n<p>will disconned the inactive session i.e. invalading the session by calling sessionDestroyed method of the class implmenting HttpSessionListner.</p>\n<p>The good part is that, yeah its working like it should be but the problem is, after 1 minute (which I set 1 minute because that's the miniumum requirement for tomcat) every session get destroyed no matter whether the session makes any requests to the server or not.</p>\n<p>Is that how session timeout is suppose to work or I'm doing it in worng way.</p>\n<p>Here is my code from the class implementing HttpSessionListner</p>\n<pre><code>@Component\npublic class SessionListner implements HttpSessionListener {\n\n    \n    private static final Logger log = LoggerFactory.getLogger(SessionListner.class);\n\n    @Autowired\n    UserService userService;\n    \n    @Override\n    public void sessionCreated(HttpSessionEvent se) {\n        // TODO Auto-generated method stub\n        HttpSession session = se.getSession();\n        session.setAttribute(&quot;sessionId&quot;, session.getId());\n        log.info(session.getId());\n        System.out.println(this.userService.getUser().size());\n        \n    }\n\n    @Override\n    public void sessionDestroyed(HttpSessionEvent se) {\n        // TODO Auto-generated method stub\n        HttpSession httpSession = se.getSession();\n\n        if(userService.getUser().size() &gt;0) {\n            for (int i = 0; i &lt; this.userService.getUser().size(); i++) {\n                if (this.userService.getUser().get(i).getSessionId().equals(httpSession.getId())) {\n                    this.userService.getUser().remove(this.userService.getUser().get(i));\n                }\n            }\n            }\n        httpSession.invalidate();\n        log.info(&quot;Destroying session&quot;);\n    }\n}\n</code></pre>\n<p>I tried making changes in the frontend in a way I can make request to the server but well no matter how much I make request, the session get destroyed after assigned timeout time.</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":384402,"reputation":1902,"user_id":740888,"display_name":"httPants"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1675824760,"creation_date":1675824760,"answer_id":75380968,"question_id":75380706,"body_markdown":"The quartz scheduler can be used for this purpose.  You can create triggers at runtime based on start and end datetimes associated with your objects.  See http://www.quartz-scheduler.org/documentation/quartz-2.3.0.","title":"Java/Spring.. Is it possible to have dynamic scheduling per object?","body":"<p>The quartz scheduler can be used for this purpose.  You can create triggers at runtime based on start and end datetimes associated with your objects.  See <a href=\"http://www.quartz-scheduler.org/documentation/quartz-2.3.0\" rel=\"nofollow noreferrer\">http://www.quartz-scheduler.org/documentation/quartz-2.3.0</a>.</p>\n"}],"owner":{"account_id":2261783,"reputation":61,"user_id":1991677,"accept_rate":75,"display_name":"Martin Van Nostrand"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675824760,"creation_date":1675821497,"question_id":75380706,"body_markdown":"Have a Java/Spring app.  Within the app, users are able to create a `thing` and either enable/disable it.  That&#39;s just a boolean flag on the object. \r\n\r\nWhat I want to do is add a start/end datetimes to the object, where user can schedule when they want the `thing` to be enabled and disabled, and then it happen.\r\n\r\nI&#39;ve been looking at Spring&#39;s scheduling, but as far as I can tell, that&#39;s more for scheduling specific jobs to run at a time vs. setting a &quot;schedule&quot; on the object.\r\n\r\nAm I just missing the capability to do what I want?  ","title":"Java/Spring.. Is it possible to have dynamic scheduling per object?","body":"<p>Have a Java/Spring app.  Within the app, users are able to create a <code>thing</code> and either enable/disable it.  That's just a boolean flag on the object.</p>\n<p>What I want to do is add a start/end datetimes to the object, where user can schedule when they want the <code>thing</code> to be enabled and disabled, and then it happen.</p>\n<p>I've been looking at Spring's scheduling, but as far as I can tell, that's more for scheduling specific jobs to run at a time vs. setting a &quot;schedule&quot; on the object.</p>\n<p>Am I just missing the capability to do what I want?</p>\n"},{"tags":["java","spring","spring-webflux","spring-data-r2dbc","r2dbc"],"comments":[{"owner":{"account_id":2316968,"reputation":2119,"user_id":2033800,"accept_rate":38,"display_name":"nicholasnet"},"score":2,"creation_date":1593568111,"post_id":62421728,"comment_id":110824737,"body_markdown":"Currently R2DBC do not allow auto relational loading like this.","body":"Currently R2DBC do not allow auto relational loading like this."},{"owner":{"account_id":10324159,"reputation":193,"user_id":8493278,"display_name":"Mister_Jesus"},"score":0,"creation_date":1602521964,"post_id":62421728,"comment_id":113741100,"body_markdown":"Not very good solution, but you can use special repository fragment with one method which will return interface which will contain one-to-many entities. But still need to provide custom implementation (Easy to implement).","body":"Not very good solution, but you can use special repository fragment with one method which will return interface which will contain one-to-many entities. But still need to provide custom implementation (Easy to implement)."}],"answers":[{"comments":[{"owner":{"account_id":7913940,"reputation":1409,"user_id":5977059,"display_name":"Aymen Alsaadi"},"score":0,"creation_date":1606853861,"post_id":65095580,"comment_id":115087350,"body_markdown":"Can you please elaborate on the link and what can offer to help to answer the question instead of just referencing it?","body":"Can you please elaborate on the link and what can offer to help to answer the question instead of just referencing it?"}],"tags":[],"owner":{"account_id":20105829,"reputation":1074,"user_id":14743390,"display_name":"Zinc"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1606887174,"creation_date":1606844255,"answer_id":65095580,"question_id":62421728,"body_markdown":"You may have a look at https://github.com/lecousin/lc-spring-data-r2dbc but looks like not yet fully ready to be used. But if your needs are not too complex it may do the job.\r\n\r\nFor example you can declare links like that:\r\n\r\n```java\r\n@Table\r\npublic class TableWithForeignKey {\r\n  ...\r\n  @ForeignKey(optional = false)\r\n  private LinkedTable myLink;\r\n  ...\r\n}\r\n\r\n@Table\r\npublic class LinkedTable {\r\n  ...\r\n  @ForeignTable(joinkey = &quot;myLink&quot;)\r\n  private List&lt;TableWithForeignKey&gt; links;\r\n  ...\r\n}\r\n```\r\n\r\nWhen you want the links to be mapped, you can use either lazy loading or select with join.\r\n\r\nIf you use the methods `findBy...` (findById, findAll...) of the Spring repository, only the table of the repository will be loaded. In this case, you can use lazy loading. For that you need to declare a methods, with default body, and your method will be automatically implemented:\r\n\r\n```java\r\n  public Flux&lt;TableWithForeignKey&gt; lazyGetLinks() {\r\n    return null; // will be implemented\r\n  }\r\n```\r\n\r\nAnother way is to make joins directly in the request. There is currently no support to automatically do joins in a repository (like @EntitiGraph in JPA), but you can implement your methods like this:\r\n\r\n```java\r\npublic interface MyRepository extends LcR2dbcRepository&lt;LinkedTable, Long&gt; {\r\n  \r\n  default Flux&lt;LinkedTable&gt; findAllAndJoin() {\r\n    SelectQuery.from(LinkedTable.class, &quot;root&quot;) // SELECT FROM LinkedTable AS root\r\n      .join(&quot;root&quot;, &quot;links&quot;, &quot;link&quot;)            // JOIN root.links AS link\r\n      .execute(getLcClient());                  // execute the select and map entities\r\n  }\r\n\r\n}\r\n```\r\n\r\nThe result will be all LinkedTable instances, with the list of links loaded together from the database.","title":"How to map One to Many / One to One to a POJO in Spring Data R2DBC","body":"<p>You may have a look at <a href=\"https://github.com/lecousin/lc-spring-data-r2dbc\" rel=\"nofollow noreferrer\">https://github.com/lecousin/lc-spring-data-r2dbc</a> but looks like not yet fully ready to be used. But if your needs are not too complex it may do the job.</p>\n<p>For example you can declare links like that:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Table\npublic class TableWithForeignKey {\n  ...\n  @ForeignKey(optional = false)\n  private LinkedTable myLink;\n  ...\n}\n\n@Table\npublic class LinkedTable {\n  ...\n  @ForeignTable(joinkey = &quot;myLink&quot;)\n  private List&lt;TableWithForeignKey&gt; links;\n  ...\n}\n</code></pre>\n<p>When you want the links to be mapped, you can use either lazy loading or select with join.</p>\n<p>If you use the methods <code>findBy...</code> (findById, findAll...) of the Spring repository, only the table of the repository will be loaded. In this case, you can use lazy loading. For that you need to declare a methods, with default body, and your method will be automatically implemented:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  public Flux&lt;TableWithForeignKey&gt; lazyGetLinks() {\n    return null; // will be implemented\n  }\n</code></pre>\n<p>Another way is to make joins directly in the request. There is currently no support to automatically do joins in a repository (like @EntitiGraph in JPA), but you can implement your methods like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface MyRepository extends LcR2dbcRepository&lt;LinkedTable, Long&gt; {\n  \n  default Flux&lt;LinkedTable&gt; findAllAndJoin() {\n    SelectQuery.from(LinkedTable.class, &quot;root&quot;) // SELECT FROM LinkedTable AS root\n      .join(&quot;root&quot;, &quot;links&quot;, &quot;link&quot;)            // JOIN root.links AS link\n      .execute(getLcClient());                  // execute the select and map entities\n  }\n\n}\n</code></pre>\n<p>The result will be all LinkedTable instances, with the list of links loaded together from the database.</p>\n"},{"tags":[],"owner":{"account_id":480584,"reputation":8228,"user_id":893898,"accept_rate":42,"display_name":"Hantsy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675824415,"creation_date":1675824415,"answer_id":75380944,"question_id":62421728,"body_markdown":"Alternatively try Micronaut framework, it adopts the good parts from all existing frameworks and provides a lot of missing features in spring/SpringBoot.\r\n\r\nFor example, Micronaut Data R2dbc, it provides a collection of annotations(including one to many, many to many, embedded) to define relations like JPA, more simply you can use JPA annotations and JPA like `Specifciation` to customize query via type safe Criteria APIs.  \r\n\r\nCreate a web application via https://micronaut.io/launch/, add `R2dbc` and Database drivers to dependencies, you can bring your Spring experience to Micronaut without extra effort.\r\n\r\nMy Micronaut Data R2dbc example: https://github.com/hantsy/micronaut-sandbox/tree/master/data-r2dbc","title":"How to map One to Many / One to One to a POJO in Spring Data R2DBC","body":"<p>Alternatively try Micronaut framework, it adopts the good parts from all existing frameworks and provides a lot of missing features in spring/SpringBoot.</p>\n<p>For example, Micronaut Data R2dbc, it provides a collection of annotations(including one to many, many to many, embedded) to define relations like JPA, more simply you can use JPA annotations and JPA like <code>Specifciation</code> to customize query via type safe Criteria APIs.</p>\n<p>Create a web application via <a href=\"https://micronaut.io/launch/\" rel=\"nofollow noreferrer\">https://micronaut.io/launch/</a>, add <code>R2dbc</code> and Database drivers to dependencies, you can bring your Spring experience to Micronaut without extra effort.</p>\n<p>My Micronaut Data R2dbc example: <a href=\"https://github.com/hantsy/micronaut-sandbox/tree/master/data-r2dbc\" rel=\"nofollow noreferrer\">https://github.com/hantsy/micronaut-sandbox/tree/master/data-r2dbc</a></p>\n"}],"owner":{"account_id":2420186,"reputation":1395,"user_id":2113338,"accept_rate":50,"display_name":"abstractKarshit"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3727,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":2,"score":6,"last_activity_date":1675824415,"creation_date":1592369684,"question_id":62421728,"body_markdown":"I am trying to replicate some functionality that I was using in Spring Data JPA in the new reactive Data r2dbc. I am aware that r2dbc is not a full-fledged ORM but wanted to understand as what could be the best way to replicate the below scenario in r2dbc:\r\n\r\n    \r\n    public class Doctor extends BaseModel {\r\n\r\n\t    //other fields and id\r\n   \r\n        @NotNull\r\n        @Enumerated(EnumType.STRING)\r\n        @ElementCollection(fetch = FetchType.LAZY, targetClass = Language.class)\r\n        @CollectionTable(name = &quot;doctor_language&quot;,\r\n            joinColumns = @JoinColumn(name = &quot;doctor_id&quot;))\r\n        @Column(name = &quot;language&quot;)\r\n        private List&lt;Language&gt; languages = new ArrayList&lt;&gt;();\r\n\r\n\r\n        @OneToMany(fetch = FetchType.LAZY, targetEntity = DoctorHealthProvider.class, mappedBy = \r\n            &quot;doctor&quot;)\r\n        private List&lt;DoctorHealthProvider&gt; providers = new ArrayList&lt;&gt;();\r\n\r\n        // other fields\r\n    }\r\n\r\nA simple findById call on DoctorRepository (which extends JpaRepository) will give me `doctor` object with list of languages from `doctor_language` table and list of health providers from `health_provider` table if I use Spring Data JPA\r\n\r\nI was reading about projections but couldn&#39;t seem to figure out the best way to implement the above in Reactive Spring. Any help/guidelines/direction is appreciated.\r\n\r\nThanks","title":"How to map One to Many / One to One to a POJO in Spring Data R2DBC","body":"<p>I am trying to replicate some functionality that I was using in Spring Data JPA in the new reactive Data r2dbc. I am aware that r2dbc is not a full-fledged ORM but wanted to understand as what could be the best way to replicate the below scenario in r2dbc:</p>\n\n<pre><code>public class Doctor extends BaseModel {\n\n    //other fields and id\n\n    @NotNull\n    @Enumerated(EnumType.STRING)\n    @ElementCollection(fetch = FetchType.LAZY, targetClass = Language.class)\n    @CollectionTable(name = \"doctor_language\",\n        joinColumns = @JoinColumn(name = \"doctor_id\"))\n    @Column(name = \"language\")\n    private List&lt;Language&gt; languages = new ArrayList&lt;&gt;();\n\n\n    @OneToMany(fetch = FetchType.LAZY, targetEntity = DoctorHealthProvider.class, mappedBy = \n        \"doctor\")\n    private List&lt;DoctorHealthProvider&gt; providers = new ArrayList&lt;&gt;();\n\n    // other fields\n}\n</code></pre>\n\n<p>A simple findById call on DoctorRepository (which extends JpaRepository) will give me <code>doctor</code> object with list of languages from <code>doctor_language</code> table and list of health providers from <code>health_provider</code> table if I use Spring Data JPA</p>\n\n<p>I was reading about projections but couldn't seem to figure out the best way to implement the above in Reactive Spring. Any help/guidelines/direction is appreciated.</p>\n\n<p>Thanks</p>\n"},{"tags":["java"],"owner":{"account_id":27730832,"reputation":11,"user_id":21169382,"display_name":"Budget"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1675823969,"answer_count":0,"score":0,"last_activity_date":1675823901,"creation_date":1675823901,"question_id":75380902,"body_markdown":"I am trying to avoid the print statement execution if the user inputs a certain string. The code seems to execute regardless of the if else conditions\r\n\r\nimport java.util.Scanner;\r\n\r\npublic class LabProgram {\r\n   public static void main(String[] args) {\r\n      \r\n      Scanner sc = new Scanner(System.in);\r\n      String str =&quot;&quot;;\r\n      str = sc.nextLine();\r\n      \r\n      String reverse=&quot;&quot;;\r\n      \r\n      for(int i =str.length()-1;i&gt;=0;i--)\r\n      {\r\n         reverse = reverse+str.charAt(i);\r\n      }\r\n      System.out.println(reverse);\r\n      if (reverse == &quot;!!!ym hO&quot;) {\r\n         System.exit(1);\r\n         } else {Scanner sc2 = new Scanner(System.in);\r\n      String str2 =&quot;&quot;;\r\n      str2 = sc.nextLine();\r\n      \r\n      String reverse2=&quot;&quot;;\r\n      \r\n      for(int i =str2.length()-1;i&gt;=0;i--)\r\n      {\r\n         reverse2 = reverse2+str2.charAt(i);\r\n      }\r\n      if (reverse2 == &quot;enoD&quot;) {\r\n         System.exit(2);\r\n         } else{System.out.println(reverse2);\r\n         \r\n         Scanner sc3 = new Scanner(System.in);\r\n         String str3 =&quot;&quot;;\r\n         str3 = sc.nextLine();\r\n         String reverse3=&quot;&quot;;\r\n         for(int i =str3.length()-1;i&gt;=0;i--)\r\n         {\r\n         reverse3 = reverse3+str3.charAt(i);\r\n         }\r\n         if (reverse3 != &quot;d&quot; || ){\r\n         System.out.println(reverse3);\r\n      }\r\n      }\r\n      }\r\n      \r\n      \r\n   }\r\n}\r\n\r\nI tried to get the code to reverse user inputted strings until coming accross &quot;d&quot; &quot;done&quot; or &quot;enoD.&quot;\r\nInstead my code executes everything.","title":"Why isn&#39;t my code excecuting properly? I&#39;ve spent hours playing around with if else commands in Java and it doesn&#39;t seem to care","body":"<p>I am trying to avoid the print statement execution if the user inputs a certain string. The code seems to execute regardless of the if else conditions</p>\n<p>import java.util.Scanner;</p>\n<p>public class LabProgram {\npublic static void main(String[] args) {</p>\n<pre><code>  Scanner sc = new Scanner(System.in);\n  String str =&quot;&quot;;\n  str = sc.nextLine();\n  \n  String reverse=&quot;&quot;;\n  \n  for(int i =str.length()-1;i&gt;=0;i--)\n  {\n     reverse = reverse+str.charAt(i);\n  }\n  System.out.println(reverse);\n  if (reverse == &quot;!!!ym hO&quot;) {\n     System.exit(1);\n     } else {Scanner sc2 = new Scanner(System.in);\n  String str2 =&quot;&quot;;\n  str2 = sc.nextLine();\n  \n  String reverse2=&quot;&quot;;\n  \n  for(int i =str2.length()-1;i&gt;=0;i--)\n  {\n     reverse2 = reverse2+str2.charAt(i);\n  }\n  if (reverse2 == &quot;enoD&quot;) {\n     System.exit(2);\n     } else{System.out.println(reverse2);\n     \n     Scanner sc3 = new Scanner(System.in);\n     String str3 =&quot;&quot;;\n     str3 = sc.nextLine();\n     String reverse3=&quot;&quot;;\n     for(int i =str3.length()-1;i&gt;=0;i--)\n     {\n     reverse3 = reverse3+str3.charAt(i);\n     }\n     if (reverse3 != &quot;d&quot; || ){\n     System.out.println(reverse3);\n  }\n  }\n  }\n  \n  \n</code></pre>\n<p>}\n}</p>\n<p>I tried to get the code to reverse user inputted strings until coming accross &quot;d&quot; &quot;done&quot; or &quot;enoD.&quot;\nInstead my code executes everything.</p>\n"},{"tags":["java","json","kotlin"],"comments":[{"owner":{"account_id":3920950,"reputation":3373,"user_id":3243124,"accept_rate":48,"display_name":"AJ_1310"},"score":3,"creation_date":1485750991,"post_id":41928803,"comment_id":71038654,"body_markdown":"I haven&#39;t developed in Java. It&#39;s not an error I&#39;m getting. I just don&#39;t know how to do effective parsing in Kotlin natively. All searches always lead to a framework. Java has an org.json.simple. Trusting the autocomplete features of the IDE, Kotlin doesn&#39;t.","body":"I haven&#39;t developed in Java. It&#39;s not an error I&#39;m getting. I just don&#39;t know how to do effective parsing in Kotlin natively. All searches always lead to a framework. Java has an org.json.simple. Trusting the autocomplete features of the IDE, Kotlin doesn&#39;t."},{"owner":{"account_id":5168089,"reputation":26701,"user_id":4137489,"accept_rate":100,"display_name":"marstran"},"score":0,"creation_date":1485770601,"post_id":41928803,"comment_id":71046540,"body_markdown":"The org.json.simple package isn&#39;t native to Java. I guess it&#39;s this library: https://github.com/fangyidong/json-simple. You could use it with Kotlin as well if you want (although the klaxon library that Jason Bourne suggested might be a better choice for Kotlin).","body":"The org.json.simple package isn&#39;t native to Java. I guess it&#39;s this library: <a href=\"https://github.com/fangyidong/json-simple\" rel=\"nofollow noreferrer\">github.com/fangyidong/json-simple</a>. You could use it with Kotlin as well if you want (although the klaxon library that Jason Bourne suggested might be a better choice for Kotlin)."},{"owner":{"account_id":27620,"reputation":8746,"user_id":73046,"accept_rate":55,"display_name":"James Moore"},"score":0,"creation_date":1500688146,"post_id":41928803,"comment_id":77464584,"body_markdown":"Take a look at https://github.com/square/moshi/.  There&#39;s a blog post about it at https://medium.com/square-corner-blog/kotlins-a-great-language-for-json-fcd6ef99256b","body":"Take a look at <a href=\"https://github.com/square/moshi/\" rel=\"nofollow noreferrer\">github.com/square/moshi</a>.  There&#39;s a blog post about it at <a href=\"https://medium.com/square-corner-blog/kotlins-a-great-language-for-json-fcd6ef99256b\" rel=\"nofollow noreferrer\">medium.com/square-corner-blog/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":54296,"reputation":15518,"user_id":162410,"accept_rate":56,"display_name":"Cedric Beust"},"score":164,"creation_date":1485799145,"post_id":41929124,"comment_id":71064968,"body_markdown":"Author here, feel free to email me if you have questions/suggestions.","body":"Author here, feel free to email me if you have questions/suggestions."},{"owner":{"account_id":1208029,"reputation":15861,"user_id":1177147,"accept_rate":85,"display_name":"Mark Feldman"},"score":0,"creation_date":1600909659,"post_id":41929124,"comment_id":113240663,"body_markdown":"I tried this today after two days of stuffing around with other libraries, and it works really well. Polymorphic support and documentation look good too, after collections it&#39;s the second thing I always test. Great package @Cedric!","body":"I tried this today after two days of stuffing around with other libraries, and it works really well. Polymorphic support and documentation look good too, after collections it&#39;s the second thing I always test. Great package @Cedric!"},{"owner":{"account_id":15739854,"reputation":1866,"user_id":11357623,"display_name":"AppDeveloper"},"score":1,"creation_date":1607775629,"post_id":41929124,"comment_id":115381886,"body_markdown":"why use a library when built-in support is available?","body":"why use a library when built-in support is available?"},{"owner":{"account_id":2892968,"reputation":4589,"user_id":2481310,"accept_rate":60,"display_name":"sonique"},"score":0,"creation_date":1624799158,"post_id":41929124,"comment_id":120450631,"body_markdown":"if you are looking at doing multi-platform or want the best performance. you should use Kotlinx serialization below.","body":"if you are looking at doing multi-platform or want the best performance. you should use Kotlinx serialization below."},{"owner":{"display_name":"user16422658"},"score":2,"creation_date":1651143499,"post_id":41929124,"comment_id":127295865,"body_markdown":"Why do we need a third party library to parse JSON?","body":"Why do we need a third party library to parse JSON?"}],"tags":[],"owner":{"account_id":7065509,"reputation":10761,"user_id":5408958,"accept_rate":45,"display_name":"Istiak Morsalin"},"comment_count":5,"down_vote_count":5,"up_vote_count":113,"is_accepted":true,"score":108,"last_activity_date":1485751310,"creation_date":1485751310,"answer_id":41929124,"question_id":41928803,"body_markdown":"You can use this library  https://github.com/cbeust/klaxon\r\n\r\nKlaxon is a lightweight library to parse JSON in Kotlin.","title":"How to parse JSON in Kotlin?","body":"<p>You can use this library  <a href=\"https://github.com/cbeust/klaxon\" rel=\"noreferrer\">https://github.com/cbeust/klaxon</a></p>\n\n<p>Klaxon is a lightweight library to parse JSON in Kotlin.</p>\n"},{"comments":[{"owner":{"account_id":433987,"reputation":5865,"user_id":819651,"accept_rate":90,"display_name":"Lu&#237;s Soares"},"score":12,"creation_date":1500718122,"post_id":41943306,"comment_id":77470689,"body_markdown":"what&#39;s the dependency?","body":"what&#39;s the dependency?"},{"owner":{"account_id":10141549,"reputation":417,"user_id":7491121,"display_name":"markB"},"score":2,"creation_date":1582283073,"post_id":41943306,"comment_id":106732522,"body_markdown":"I used org.json. Here&#39;s the link : \n\nhttps://mvnrepository.com/artifact/org.json/json/20180813","body":"I used org.json. Here&#39;s the link :   <a href=\"https://mvnrepository.com/artifact/org.json/json/20180813\" rel=\"nofollow noreferrer\">mvnrepository.com/artifact/org.json/json/20180813</a>"},{"owner":{"account_id":9295555,"reputation":226,"user_id":6902588,"display_name":"leimenghao"},"score":0,"creation_date":1593596696,"post_id":41943306,"comment_id":110834159,"body_markdown":"This method requires that class must have default constructor without any params. What if data class have params in constructor like below:     ```data class SomeClass(val param1: Int, val param2: Int)```.","body":"This method requires that class must have default constructor without any params. What if data class have params in constructor like below:     <code>data class SomeClass(val param1: Int, val param2: Int)</code>."},{"owner":{"account_id":10141549,"reputation":417,"user_id":7491121,"display_name":"markB"},"score":0,"creation_date":1593694273,"post_id":41943306,"comment_id":110873621,"body_markdown":"@leimenghao You can do this in one line : \n\nval categories = SomeClass(param1 = foodJson.getJSONObject(i).getString(&quot;FoodName&quot;),param2 = foodJson.getJSONObject(i).getInt(&quot;Weight&quot;))","body":"@leimenghao You can do this in one line :   val categories = SomeClass(param1 = foodJson.getJSONObject(i).getString(&quot;FoodName&quot;),param2 = foodJson.getJSONObject(i).getInt(&quot;Weight&quot;))"},{"owner":{"account_id":7527679,"reputation":5893,"user_id":5717211,"accept_rate":80,"display_name":"Arnyminer Z"},"score":0,"creation_date":1595264275,"post_id":41943306,"comment_id":111408270,"body_markdown":"Works really well. Just to say, you can use `for (i in 0 until foodJson!!.length()) {` instead of `for (i in 0..foodJson!!.length() - 1) {`. It does the same, and it&#39;s quite more visual","body":"Works really well. Just to say, you can use <code>for (i in 0 until foodJson!!.length()) {</code> instead of <code>for (i in 0..foodJson!!.length() - 1) {</code>. It does the same, and it&#39;s quite more visual"}],"tags":[],"owner":{"account_id":10141549,"reputation":417,"user_id":7491121,"display_name":"markB"},"comment_count":5,"down_vote_count":2,"up_vote_count":41,"is_accepted":false,"score":39,"last_activity_date":1593694946,"creation_date":1485802120,"answer_id":41943306,"question_id":41928803,"body_markdown":"Not sure if this is what you need but this is how I did it.\r\n\r\nUsing import org.json.JSONObject :\r\n\r\n        val jsonObj = JSONObject(json.substring(json.indexOf(&quot;{&quot;), json.lastIndexOf(&quot;}&quot;) + 1))\r\n        val foodJson = jsonObj.getJSONArray(&quot;Foods&quot;)\r\n        for (i in 0..foodJson!!.length() - 1) {\r\n            val categories = FoodCategoryObject()\r\n            val name = foodJson.getJSONObject(i).getString(&quot;FoodName&quot;)\r\n            categories.name = name\r\n        }\r\n\r\nHere&#39;s a sample of the json :\r\n\r\n{&quot;Foods&quot;: [{&quot;FoodName&quot;: &quot;Apples&quot;,&quot;Weight&quot;: &quot;110&quot; } ]}","title":"How to parse JSON in Kotlin?","body":"<p>Not sure if this is what you need but this is how I did it.</p>\n<p>Using import org.json.JSONObject :</p>\n<pre><code>    val jsonObj = JSONObject(json.substring(json.indexOf(&quot;{&quot;), json.lastIndexOf(&quot;}&quot;) + 1))\n    val foodJson = jsonObj.getJSONArray(&quot;Foods&quot;)\n    for (i in 0..foodJson!!.length() - 1) {\n        val categories = FoodCategoryObject()\n        val name = foodJson.getJSONObject(i).getString(&quot;FoodName&quot;)\n        categories.name = name\n    }\n</code></pre>\n<p>Here's a sample of the json :</p>\n<p>{&quot;Foods&quot;: [{&quot;FoodName&quot;: &quot;Apples&quot;,&quot;Weight&quot;: &quot;110&quot; } ]}</p>\n"},{"comments":[{"owner":{"account_id":2527794,"reputation":271,"user_id":2196785,"display_name":"redsk"},"score":1,"creation_date":1544550589,"post_id":42014863,"comment_id":94313071,"body_markdown":"Differently from Klaxon (it had a bug when I tried), Jackson actually works :)","body":"Differently from Klaxon (it had a bug when I tried), Jackson actually works :)"},{"owner":{"account_id":5035021,"reputation":705,"user_id":4044107,"display_name":"Brooks DuBois"},"score":0,"creation_date":1554220376,"post_id":42014863,"comment_id":97667917,"body_markdown":"Additionally, you can use the JSON to Kotlin data class plugin in intellij to generate the data classes for you.","body":"Additionally, you can use the JSON to Kotlin data class plugin in intellij to generate the data classes for you."}],"tags":[],"owner":{"account_id":10167351,"reputation":151,"user_id":7508801,"display_name":"Neurf"},"comment_count":2,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1537461879,"creation_date":1486082099,"answer_id":42014863,"question_id":41928803,"body_markdown":"I personally use the Jackson module for Kotlin that you can find here: [jackson-module-kotlin][1]. \r\n\r\n    implementation &quot;com.fasterxml.jackson.module:jackson-module-kotlin:$version&quot;\r\n\r\nAs an example, here is the code to parse the JSON of the Path of Exile skilltree which is quite heavy (84k lines when formatted) :\r\n\r\nKotlin code:\r\n\r\n\tpackage util\r\n\t\r\n\timport com.fasterxml.jackson.databind.DeserializationFeature\r\n\timport com.fasterxml.jackson.module.kotlin.*\r\n\timport java.io.File\r\n\t\r\n\tdata class SkillTreeData( val characterData: Map&lt;String, CharacterData&gt;, val groups: Map&lt;String, Group&gt;, val root: Root,\r\n\t                          val nodes: List&lt;Node&gt;, val extraImages: Map&lt;String, ExtraImage&gt;, val min_x: Double,\r\n\t                          val min_y: Double, val max_x: Double, val max_y: Double,\r\n\t                          val assets: Map&lt;String, Map&lt;String, String&gt;&gt;, val constants: Constants, val imageRoot: String,\r\n\t                          val skillSprites: SkillSprites, val imageZoomLevels: List&lt;Int&gt; )\r\n\t\r\n\t\r\n\tdata class CharacterData( val base_str: Int, val base_dex: Int, val base_int: Int )\r\n\t\r\n\tdata class Group( val x: Double, val y: Double, val oo: Map&lt;String, Boolean&gt;?, val n: List&lt;Int&gt; )\r\n\t\r\n\tdata class Root( val g: Int, val o: Int, val oidx: Int, val sa: Int, val da: Int, val ia: Int, val out: List&lt;Int&gt; )\r\n\t\r\n\tdata class Node( val id: Int, val icon: String, val ks: Boolean, val not: Boolean, val dn: String, val m: Boolean,\r\n\t                 val isJewelSocket: Boolean, val isMultipleChoice: Boolean, val isMultipleChoiceOption: Boolean,\r\n\t                 val passivePointsGranted: Int, val flavourText: List&lt;String&gt;?, val ascendancyName: String?,\r\n\t                 val isAscendancyStart: Boolean?, val reminderText: List&lt;String&gt;?, val spc: List&lt;Int&gt;, val sd: List&lt;String&gt;,\r\n\t                 val g: Int, val o: Int, val oidx: Int, val sa: Int, val da: Int, val ia: Int, val out: List&lt;Int&gt; )\r\n\t\r\n\tdata class ExtraImage( val x: Double, val y: Double, val image: String )\r\n\t\r\n\tdata class Constants( val classes: Map&lt;String, Int&gt;, val characterAttributes: Map&lt;String, Int&gt;,\r\n\t                      val PSSCentreInnerRadius: Int )\r\n\t\r\n\tdata class SubSpriteCoords( val x: Int, val y: Int, val w: Int, val h: Int )\r\n\t\r\n\tdata class Sprite( val filename: String, val coords: Map&lt;String, SubSpriteCoords&gt; )\r\n\t\r\n\tdata class SkillSprites( val normalActive: List&lt;Sprite&gt;, val notableActive: List&lt;Sprite&gt;,\r\n\t                         val keystoneActive: List&lt;Sprite&gt;, val normalInactive: List&lt;Sprite&gt;,\r\n\t                         val notableInactive: List&lt;Sprite&gt;, val keystoneInactive: List&lt;Sprite&gt;,\r\n\t                         val mastery: List&lt;Sprite&gt; )\r\n\t\r\n\tprivate fun convert( jsonFile: File ) {\r\n\t    val mapper = jacksonObjectMapper()\r\n\t    mapper.configure( DeserializationFeature.ACCEPT_EMPTY_ARRAY_AS_NULL_OBJECT, true )\r\n\t\r\n\t    val skillTreeData = mapper.readValue&lt;SkillTreeData&gt;( jsonFile )\r\n\t    println(&quot;Conversion finished !&quot;)\r\n\t}\r\n\t\r\n\tfun main( args : Array&lt;String&gt; ) {\r\n\t    val jsonFile: File = File( &quot;&quot;&quot;rawSkilltree.json&quot;&quot;&quot; )\r\n\t    convert( jsonFile )\r\n\r\nJSON (not-formatted): http://filebin.ca/3B3reNQf3KXJ/rawSkilltree.json\r\n\r\nGiven your description, I believe it matches your needs.\r\n\r\n\r\n  [1]: https://github.com/FasterXML/jackson-module-kotlin","title":"How to parse JSON in Kotlin?","body":"<p>I personally use the Jackson module for Kotlin that you can find here: <a href=\"https://github.com/FasterXML/jackson-module-kotlin\" rel=\"noreferrer\">jackson-module-kotlin</a>. </p>\n\n<pre><code>implementation \"com.fasterxml.jackson.module:jackson-module-kotlin:$version\"\n</code></pre>\n\n<p>As an example, here is the code to parse the JSON of the Path of Exile skilltree which is quite heavy (84k lines when formatted) :</p>\n\n<p>Kotlin code:</p>\n\n<pre><code>package util\n\nimport com.fasterxml.jackson.databind.DeserializationFeature\nimport com.fasterxml.jackson.module.kotlin.*\nimport java.io.File\n\ndata class SkillTreeData( val characterData: Map&lt;String, CharacterData&gt;, val groups: Map&lt;String, Group&gt;, val root: Root,\n                          val nodes: List&lt;Node&gt;, val extraImages: Map&lt;String, ExtraImage&gt;, val min_x: Double,\n                          val min_y: Double, val max_x: Double, val max_y: Double,\n                          val assets: Map&lt;String, Map&lt;String, String&gt;&gt;, val constants: Constants, val imageRoot: String,\n                          val skillSprites: SkillSprites, val imageZoomLevels: List&lt;Int&gt; )\n\n\ndata class CharacterData( val base_str: Int, val base_dex: Int, val base_int: Int )\n\ndata class Group( val x: Double, val y: Double, val oo: Map&lt;String, Boolean&gt;?, val n: List&lt;Int&gt; )\n\ndata class Root( val g: Int, val o: Int, val oidx: Int, val sa: Int, val da: Int, val ia: Int, val out: List&lt;Int&gt; )\n\ndata class Node( val id: Int, val icon: String, val ks: Boolean, val not: Boolean, val dn: String, val m: Boolean,\n                 val isJewelSocket: Boolean, val isMultipleChoice: Boolean, val isMultipleChoiceOption: Boolean,\n                 val passivePointsGranted: Int, val flavourText: List&lt;String&gt;?, val ascendancyName: String?,\n                 val isAscendancyStart: Boolean?, val reminderText: List&lt;String&gt;?, val spc: List&lt;Int&gt;, val sd: List&lt;String&gt;,\n                 val g: Int, val o: Int, val oidx: Int, val sa: Int, val da: Int, val ia: Int, val out: List&lt;Int&gt; )\n\ndata class ExtraImage( val x: Double, val y: Double, val image: String )\n\ndata class Constants( val classes: Map&lt;String, Int&gt;, val characterAttributes: Map&lt;String, Int&gt;,\n                      val PSSCentreInnerRadius: Int )\n\ndata class SubSpriteCoords( val x: Int, val y: Int, val w: Int, val h: Int )\n\ndata class Sprite( val filename: String, val coords: Map&lt;String, SubSpriteCoords&gt; )\n\ndata class SkillSprites( val normalActive: List&lt;Sprite&gt;, val notableActive: List&lt;Sprite&gt;,\n                         val keystoneActive: List&lt;Sprite&gt;, val normalInactive: List&lt;Sprite&gt;,\n                         val notableInactive: List&lt;Sprite&gt;, val keystoneInactive: List&lt;Sprite&gt;,\n                         val mastery: List&lt;Sprite&gt; )\n\nprivate fun convert( jsonFile: File ) {\n    val mapper = jacksonObjectMapper()\n    mapper.configure( DeserializationFeature.ACCEPT_EMPTY_ARRAY_AS_NULL_OBJECT, true )\n\n    val skillTreeData = mapper.readValue&lt;SkillTreeData&gt;( jsonFile )\n    println(\"Conversion finished !\")\n}\n\nfun main( args : Array&lt;String&gt; ) {\n    val jsonFile: File = File( \"\"\"rawSkilltree.json\"\"\" )\n    convert( jsonFile )\n</code></pre>\n\n<p>JSON (not-formatted): <a href=\"http://filebin.ca/3B3reNQf3KXJ/rawSkilltree.json\" rel=\"noreferrer\">http://filebin.ca/3B3reNQf3KXJ/rawSkilltree.json</a></p>\n\n<p>Given your description, I believe it matches your needs.</p>\n"},{"tags":[],"owner":{"account_id":4807372,"reputation":2094,"user_id":3881947,"accept_rate":50,"display_name":"Deepshikha Puri"},"comment_count":0,"down_vote_count":8,"up_vote_count":2,"is_accepted":false,"score":-6,"last_activity_date":1514888238,"creation_date":1514887996,"answer_id":48059038,"question_id":41928803,"body_markdown":"Download the source of deme from here([Json parsing in android kotlin][1])\r\n\r\n  [1]: http://deepshikhapuri.blogspot.in/2017/11/Jsonparsinginandroidkotlin.html\r\n\r\nAdd this dependency:\r\n\r\n    compile &#39;com.squareup.okhttp3:okhttp:3.8.1&#39;\r\n\r\n\r\nCall api function:\r\n\r\n     fun run(url: String) {\r\n        dialog.show()\r\n        val request = Request.Builder()\r\n                .url(url)\r\n                .build()\r\n\r\n        client.newCall(request).enqueue(object : Callback {\r\n            override fun onFailure(call: Call, e: IOException) {\r\n                dialog.dismiss()\r\n\r\n            }\r\n\r\n            override fun onResponse(call: Call, response: Response) {\r\n                var str_response = response.body()!!.string()\r\n                val json_contact:JSONObject = JSONObject(str_response)\r\n\r\n                var jsonarray_contacts:JSONArray= json_contact.getJSONArray(&quot;contacts&quot;)\r\n\r\n                var i:Int = 0\r\n                var size:Int = jsonarray_contacts.length()\r\n\r\n                al_details= ArrayList();\r\n\r\n                for (i in 0.. size-1) {\r\n                    var json_objectdetail:JSONObject=jsonarray_contacts.getJSONObject(i)\r\n\r\n\r\n                    var model:Model= Model();\r\n                    model.id=json_objectdetail.getString(&quot;id&quot;)\r\n                    model.name=json_objectdetail.getString(&quot;name&quot;)\r\n                    model.email=json_objectdetail.getString(&quot;email&quot;)\r\n                    model.address=json_objectdetail.getString(&quot;address&quot;)\r\n                    model.gender=json_objectdetail.getString(&quot;gender&quot;)\r\n\r\n                    al_details.add(model)\r\n\r\n\r\n                }\r\n\r\n                runOnUiThread {\r\n                    //stuff that updates ui\r\n                    val obj_adapter : CustomAdapter\r\n                    obj_adapter = CustomAdapter(applicationContext,al_details)\r\n                    lv_details.adapter=obj_adapter\r\n                }\r\n\r\n                dialog.dismiss()\r\n\r\n            }\r\n\r\n        })","title":"How to parse JSON in Kotlin?","body":"<p>Download the source of deme from here(<a href=\"http://deepshikhapuri.blogspot.in/2017/11/Jsonparsinginandroidkotlin.html\" rel=\"nofollow noreferrer\">Json parsing in android kotlin</a>)</p>\n\n<p>Add this dependency:</p>\n\n<pre><code>compile 'com.squareup.okhttp3:okhttp:3.8.1'\n</code></pre>\n\n<p>Call api function:</p>\n\n<pre><code> fun run(url: String) {\n    dialog.show()\n    val request = Request.Builder()\n            .url(url)\n            .build()\n\n    client.newCall(request).enqueue(object : Callback {\n        override fun onFailure(call: Call, e: IOException) {\n            dialog.dismiss()\n\n        }\n\n        override fun onResponse(call: Call, response: Response) {\n            var str_response = response.body()!!.string()\n            val json_contact:JSONObject = JSONObject(str_response)\n\n            var jsonarray_contacts:JSONArray= json_contact.getJSONArray(\"contacts\")\n\n            var i:Int = 0\n            var size:Int = jsonarray_contacts.length()\n\n            al_details= ArrayList();\n\n            for (i in 0.. size-1) {\n                var json_objectdetail:JSONObject=jsonarray_contacts.getJSONObject(i)\n\n\n                var model:Model= Model();\n                model.id=json_objectdetail.getString(\"id\")\n                model.name=json_objectdetail.getString(\"name\")\n                model.email=json_objectdetail.getString(\"email\")\n                model.address=json_objectdetail.getString(\"address\")\n                model.gender=json_objectdetail.getString(\"gender\")\n\n                al_details.add(model)\n\n\n            }\n\n            runOnUiThread {\n                //stuff that updates ui\n                val obj_adapter : CustomAdapter\n                obj_adapter = CustomAdapter(applicationContext,al_details)\n                lv_details.adapter=obj_adapter\n            }\n\n            dialog.dismiss()\n\n        }\n\n    })\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6787049,"reputation":1457,"user_id":5225435,"accept_rate":22,"display_name":"Tom"},"score":0,"creation_date":1548096558,"post_id":48761937,"comment_id":95412617,"body_markdown":"The plugin is not working for nested JSON objects at the moment.","body":"The plugin is not working for nested JSON objects at the moment."},{"owner":{"account_id":4610643,"reputation":1454,"user_id":3738870,"display_name":"user3738870"},"score":2,"creation_date":1584783311,"post_id":48761937,"comment_id":107546393,"body_markdown":"The problem with Gson is that it disregards nullability. A `val` property can easily be `null` if it&#39;s missing from the JSON. Also, default values are not used at all.","body":"The problem with Gson is that it disregards nullability. A <code>val</code> property can easily be <code>null</code> if it&#39;s missing from the JSON. Also, default values are not used at all."},{"owner":{"account_id":10155417,"reputation":1130,"user_id":7500651,"accept_rate":60,"display_name":"ansh sachdeva"},"score":0,"creation_date":1596724591,"post_id":48761937,"comment_id":111908336,"body_markdown":"@user3738870 did you find a better alternative? i am  frustrated by this behavior of every parser i try","body":"@user3738870 did you find a better alternative? i am  frustrated by this behavior of every parser i try"},{"owner":{"account_id":4610643,"reputation":1454,"user_id":3738870,"display_name":"user3738870"},"score":0,"creation_date":1596831287,"post_id":48761937,"comment_id":111947658,"body_markdown":"@anshsachdeva Yes, multiple ones, I found moshi the fastest and easiest to use. https://github.com/square/moshi","body":"@anshsachdeva Yes, multiple ones, I found moshi the fastest and easiest to use. <a href=\"https://github.com/square/moshi\" rel=\"nofollow noreferrer\">github.com/square/moshi</a>"},{"owner":{"account_id":8937577,"reputation":1874,"user_id":7758318,"display_name":"Balaji"},"score":0,"creation_date":1669964646,"post_id":48761937,"comment_id":131766881,"body_markdown":"is it still a bad parser? because I&#39;ve been using this for retrofit","body":"is it still a bad parser? because I&#39;ve been using this for retrofit"}],"tags":[],"owner":{"account_id":9224505,"reputation":8167,"user_id":6852729,"display_name":"KeLiuyue"},"comment_count":5,"down_vote_count":1,"up_vote_count":56,"is_accepted":false,"score":55,"last_activity_date":1675823518,"creation_date":1518508464,"answer_id":48761937,"question_id":41928803,"body_markdown":"You can use `Gson` .\r\n\r\n**Example**\r\n--\r\n\r\n**Step 1**\r\n\r\nAdd compile \r\n\r\n    compile &#39;com.google.code.gson:gson:2.8.2&#39;\r\n\r\n**Step 2**\r\n\r\nConvert json to `Kotlin Bean`(use [JsonToKotlinClass][1])\r\n\r\n\r\n  [1]: https://github.com/wuseal/JsonToKotlinClass\r\n\r\nLike this \r\n\r\n`Json` data\r\n\r\n    {\r\n\t&quot;timestamp&quot;: &quot;2018-02-13 15:45:45&quot;,\r\n\t&quot;code&quot;: &quot;OK&quot;,\r\n\t&quot;message&quot;: &quot;user info&quot;,\r\n\t&quot;path&quot;: &quot;/user/info&quot;,\r\n\t&quot;data&quot;: {\r\n\t\t&quot;userId&quot;: 8,\r\n\t\t&quot;avatar&quot;: &quot;/uploads/image/20180115/1516009286213053126.jpeg&quot;,\r\n\t\t&quot;nickname&quot;: &quot;&quot;,\r\n\t\t&quot;gender&quot;: 0,\r\n\t\t&quot;birthday&quot;: 1525968000000,\r\n\t\t&quot;age&quot;: 0,\r\n\t\t&quot;province&quot;: &quot;&quot;,\r\n\t\t&quot;city&quot;: &quot;&quot;,\r\n\t\t&quot;district&quot;: &quot;&quot;,\r\n\t\t&quot;workStatus&quot;: &quot;Student&quot;,\r\n\t\t&quot;userType&quot;: 0\r\n\t},\r\n\t&quot;errorDetail&quot;: null\r\n    }\r\n`Kotlin Bean`\r\n\r\n    class MineUserEntity {\r\n\r\n        data class MineUserInfo(\r\n            val timestamp: String,\r\n            val code: String,\r\n            val message: String,\r\n            val path: String,\r\n            val data: Data,\r\n            val errorDetail: Any\r\n        )\r\n\r\n        data class Data(\r\n            val userId: Int,\r\n            val avatar: String,\r\n            val nickname: String,\r\n            val gender: Int,\r\n            val birthday: Long,\r\n            val age: Int,\r\n            val province: String,\r\n            val city: String,\r\n            val district: String,\r\n            val workStatus: String,\r\n            val userType: Int\r\n        )\r\n    }\r\n\r\n**Step 3**\r\n\r\nUse `Gson`\r\n\r\n    var gson = Gson()\r\n    var mMineUserEntity = gson?.fromJson(response, MineUserEntity.MineUserInfo::class.java)","title":"How to parse JSON in Kotlin?","body":"<p>You can use <code>Gson</code> .</p>\n<h2><strong>Example</strong></h2>\n<p><strong>Step 1</strong></p>\n<p>Add compile</p>\n<pre><code>compile 'com.google.code.gson:gson:2.8.2'\n</code></pre>\n<p><strong>Step 2</strong></p>\n<p>Convert json to <code>Kotlin Bean</code>(use <a href=\"https://github.com/wuseal/JsonToKotlinClass\" rel=\"noreferrer\">JsonToKotlinClass</a>)</p>\n<p>Like this</p>\n<p><code>Json</code> data</p>\n<pre><code>{\n&quot;timestamp&quot;: &quot;2018-02-13 15:45:45&quot;,\n&quot;code&quot;: &quot;OK&quot;,\n&quot;message&quot;: &quot;user info&quot;,\n&quot;path&quot;: &quot;/user/info&quot;,\n&quot;data&quot;: {\n    &quot;userId&quot;: 8,\n    &quot;avatar&quot;: &quot;/uploads/image/20180115/1516009286213053126.jpeg&quot;,\n    &quot;nickname&quot;: &quot;&quot;,\n    &quot;gender&quot;: 0,\n    &quot;birthday&quot;: 1525968000000,\n    &quot;age&quot;: 0,\n    &quot;province&quot;: &quot;&quot;,\n    &quot;city&quot;: &quot;&quot;,\n    &quot;district&quot;: &quot;&quot;,\n    &quot;workStatus&quot;: &quot;Student&quot;,\n    &quot;userType&quot;: 0\n},\n&quot;errorDetail&quot;: null\n}\n</code></pre>\n<p><code>Kotlin Bean</code></p>\n<pre><code>class MineUserEntity {\n\n    data class MineUserInfo(\n        val timestamp: String,\n        val code: String,\n        val message: String,\n        val path: String,\n        val data: Data,\n        val errorDetail: Any\n    )\n\n    data class Data(\n        val userId: Int,\n        val avatar: String,\n        val nickname: String,\n        val gender: Int,\n        val birthday: Long,\n        val age: Int,\n        val province: String,\n        val city: String,\n        val district: String,\n        val workStatus: String,\n        val userType: Int\n    )\n}\n</code></pre>\n<p><strong>Step 3</strong></p>\n<p>Use <code>Gson</code></p>\n<pre><code>var gson = Gson()\nvar mMineUserEntity = gson?.fromJson(response, MineUserEntity.MineUserInfo::class.java)\n</code></pre>\n"},{"comments":[{"owner":{"account_id":349913,"reputation":867,"user_id":685476,"display_name":"natronite"},"score":6,"creation_date":1576218837,"post_id":48904120,"comment_id":104835356,"body_markdown":"The problem I have with this is that you can hardly use it with generics. At least I have not figured out how to do so. And I certainly don&#39;t want to use reflection.","body":"The problem I have with this is that you can hardly use it with generics. At least I have not figured out how to do so. And I certainly don&#39;t want to use reflection."},{"owner":{"account_id":2260563,"reputation":5815,"user_id":1990785,"accept_rate":77,"display_name":"Javad"},"score":7,"creation_date":1588543586,"post_id":48904120,"comment_id":108932300,"body_markdown":"KotlinX Serialization is still in experimental phase, so they introduce breaking changes in new releases. Also, it&#39;s not thread-safe, so your JSON might get corrupted if several threads try to use a single instance of `Json` (it&#39;s common). Furthermore, there are several open Github issues with the bug label. So, it&#39;s still risky for use in production I would say (unless you&#39;re willing to spend time on fixing potential issues and do not plan to update it frequently). The project is indeed interesting especially for Kotlin Multiplatform projects, but it&#39;s not stable yet.","body":"KotlinX Serialization is still in experimental phase, so they introduce breaking changes in new releases. Also, it&#39;s not thread-safe, so your JSON might get corrupted if several threads try to use a single instance of <code>Json</code> (it&#39;s common). Furthermore, there are several open Github issues with the bug label. So, it&#39;s still risky for use in production I would say (unless you&#39;re willing to spend time on fixing potential issues and do not plan to update it frequently). The project is indeed interesting especially for Kotlin Multiplatform projects, but it&#39;s not stable yet."},{"owner":{"account_id":2402196,"reputation":13313,"user_id":2111778,"accept_rate":80,"display_name":"xjcl"},"score":1,"creation_date":1590186429,"post_id":48904120,"comment_id":109595974,"body_markdown":"There seems to already be a breaking change, JSON is now called Json","body":"There seems to already be a breaking change, JSON is now called Json"},{"owner":{"account_id":2402196,"reputation":13313,"user_id":2111778,"accept_rate":80,"display_name":"xjcl"},"score":0,"creation_date":1590186457,"post_id":48904120,"comment_id":109595981,"body_markdown":"This also requires an additional dependency, so do follow the link for a guide","body":"This also requires an additional dependency, so do follow the link for a guide"},{"owner":{"account_id":401578,"reputation":131,"user_id":768217,"accept_rate":40,"display_name":"TimCO"},"score":0,"creation_date":1601602415,"post_id":48904120,"comment_id":113465254,"body_markdown":"2020 Sept and this is still at RC2, no 1.0 version yet :-(","body":"2020 Sept and this is still at RC2, no 1.0 version yet :-("},{"owner":{"account_id":10164923,"reputation":524,"user_id":7507215,"display_name":"fisio"},"score":7,"creation_date":1602500355,"post_id":48904120,"comment_id":113730632,"body_markdown":"Finally 1.0 is out! Here same examples: Https://blog.jetbrains.com/kotlin/2020/10/kotlinx-serialization-1-0-released/","body":"Finally 1.0 is out! Here same examples: <a href=\"Https://blog.jetbrains.com/kotlin/2020/10/kotlinx-serialization-1-0-released/\" rel=\"nofollow noreferrer\">Https://blog.jetbrains.com/kotlin/2020/10/&hellip;</a>"},{"owner":{"account_id":6848221,"reputation":303,"user_id":5266245,"display_name":"Arash Kamangir"},"score":0,"creation_date":1611257018,"post_id":48904120,"comment_id":116399916,"body_markdown":"See the kotlinx.serialization enhanced documentation on GitHub:\nhttps://github.com/Kotlin/kotlinx.serialization/blob/master/docs/basic-serialization.md","body":"See the kotlinx.serialization enhanced documentation on GitHub: <a href=\"https://github.com/Kotlin/kotlinx.serialization/blob/master/docs/basic-serialization.md\" rel=\"nofollow noreferrer\">github.com/Kotlin/kotlinx.serialization/blob/master/docs/&hellip;</a>"},{"owner":{"account_id":8672866,"reputation":1726,"user_id":6491200,"display_name":"Caio Santos"},"score":1,"creation_date":1618862569,"post_id":48904120,"comment_id":118726725,"body_markdown":"https://kotlinlang.org/docs/releases.html shows this plugin many times. It seems to be the best way to work with json in Kotlin.","body":"<a href=\"https://kotlinlang.org/docs/releases.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/releases.html</a> shows this plugin many times. It seems to be the best way to work with json in Kotlin."},{"owner":{"account_id":4055167,"reputation":551,"user_id":3333438,"accept_rate":75,"display_name":"Banee Ishaque K"},"score":1,"creation_date":1658451186,"post_id":48904120,"comment_id":129060638,"body_markdown":"Updated answer : https://stackoverflow.com/a/63820753/3333438","body":"Updated answer : <a href=\"https://stackoverflow.com/a/63820753/3333438\">stackoverflow.com/a/63820753/3333438</a>"},{"owner":{"account_id":10541959,"reputation":8904,"user_id":7767664,"accept_rate":63,"display_name":"user924"},"score":0,"creation_date":1679328944,"post_id":48904120,"comment_id":133698213,"body_markdown":"can I just use `val b: String?` instead of `@Optional val b: String` as witth `Gson`?","body":"can I just use <code>val b: String?</code> instead of <code>@Optional val b: String</code> as witth <code>Gson</code>?"},{"owner":{"account_id":10541959,"reputation":8904,"user_id":7767664,"accept_rate":63,"display_name":"user924"},"score":0,"creation_date":1679329119,"post_id":48904120,"comment_id":133698264,"body_markdown":"it&#39;s `val parsedError: NetworkError = Json.decodeFromString(errorJsonBody)` now","body":"it&#39;s <code>val parsedError: NetworkError = Json.decodeFromString(errorJsonBody)</code> now"},{"owner":{"account_id":1733785,"reputation":1540,"user_id":1586797,"display_name":"bronze man"},"score":0,"creation_date":1697017951,"post_id":48904120,"comment_id":136225605,"body_markdown":"Not working for me, it need to add @Serializable  to the classes. Most classes i want to marshal, i can not change the source code.","body":"Not working for me, it need to add @Serializable  to the classes. Most classes i want to marshal, i can not change the source code."}],"tags":[],"owner":{"account_id":2821964,"reputation":2414,"user_id":2425529,"display_name":"Elisha Sterngold"},"comment_count":12,"down_vote_count":3,"up_vote_count":184,"is_accepted":false,"score":181,"last_activity_date":1602600056,"creation_date":1519210568,"answer_id":48904120,"question_id":41928803,"body_markdown":"There is no question that the future of parsing in Kotlin will be with kotlinx.serialization. It is part of Kotlin libraries. Version kotlinx.serialization 1.0 is finally released\r\n\r\n\r\nhttps://github.com/Kotlin/kotlinx.serialization\r\n    \r\n    import kotlinx.serialization.*\r\n    import kotlinx.serialization.json.JSON\r\n    \r\n    @Serializable\r\n    data class MyModel(val a: Int, @Optional val b: String = &quot;42&quot;)\r\n    \r\n    fun main(args: Array&lt;String&gt;) {\r\n\r\n        // serializing objects\r\n        val jsonData = JSON.stringify(MyModel.serializer(), MyModel(42))\r\n        println(jsonData) // {&quot;a&quot;: 42, &quot;b&quot;: &quot;42&quot;}\r\n        \r\n        // serializing lists\r\n        val jsonList = JSON.stringify(MyModel.serializer().list, listOf(MyModel(42)))\r\n        println(jsonList) // [{&quot;a&quot;: 42, &quot;b&quot;: &quot;42&quot;}]\r\n    \r\n        // parsing data back\r\n        val obj = JSON.parse(MyModel.serializer(), &quot;&quot;&quot;{&quot;a&quot;:42}&quot;&quot;&quot;)\r\n        println(obj) // MyModel(a=42, b=&quot;42&quot;)\r\n    }","title":"How to parse JSON in Kotlin?","body":"<p>There is no question that the future of parsing in Kotlin will be with kotlinx.serialization. It is part of Kotlin libraries. Version kotlinx.serialization 1.0 is finally released</p>\n<p><a href=\"https://github.com/Kotlin/kotlinx.serialization\" rel=\"noreferrer\">https://github.com/Kotlin/kotlinx.serialization</a></p>\n<pre><code>import kotlinx.serialization.*\nimport kotlinx.serialization.json.JSON\n\n@Serializable\ndata class MyModel(val a: Int, @Optional val b: String = &quot;42&quot;)\n\nfun main(args: Array&lt;String&gt;) {\n\n    // serializing objects\n    val jsonData = JSON.stringify(MyModel.serializer(), MyModel(42))\n    println(jsonData) // {&quot;a&quot;: 42, &quot;b&quot;: &quot;42&quot;}\n    \n    // serializing lists\n    val jsonList = JSON.stringify(MyModel.serializer().list, listOf(MyModel(42)))\n    println(jsonList) // [{&quot;a&quot;: 42, &quot;b&quot;: &quot;42&quot;}]\n\n    // parsing data back\n    val obj = JSON.parse(MyModel.serializer(), &quot;&quot;&quot;{&quot;a&quot;:42}&quot;&quot;&quot;)\n    println(obj) // MyModel(a=42, b=&quot;42&quot;)\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5805883,"reputation":12821,"user_id":4578513,"accept_rate":15,"display_name":"AIM Digital Technologies"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1527836871,"creation_date":1525419287,"answer_id":50169585,"question_id":41928803,"body_markdown":"First of all.\r\n\r\nYou can use JSON to Kotlin Data class converter plugin in Android Studio for JSON mapping to POJO classes (kotlin data class).\r\nThis plugin will annotate your Kotlin data class according to JSON.\r\n\r\nThen you can use GSON converter to convert JSON to Kotlin.\r\n\r\nFollow this Complete tutorial:\r\n[Kotlin Android JSON Parsing Tutorial ][1]\r\n\r\n  [1]: http://developine.com/kotlin-android-json-parsing-tutorial-retrofit/\r\n\r\nIf you want to parse json manually.\r\n\r\n    val **sampleJson** = &quot;&quot;&quot;\r\n      [\r\n      {\r\n       &quot;userId&quot;: 1,\r\n       &quot;id&quot;: 1,\r\n       &quot;title&quot;: &quot;sunt aut facere repellat provident occaecati excepturi optio \r\n        reprehenderit&quot;,\r\n        &quot;body&quot;: &quot;quia et suscipit\\nsuscipit recusandae consequuntur expedita&quot;\r\n       }]\r\n       &quot;&quot;&quot;\r\nCode to Parse above JSON Array and its object at index 0.\r\n\r\n    var jsonArray = JSONArray(sampleJson)\r\n    for (jsonIndex in 0..(jsonArray.length() - 1)) {\r\n    Log.d(&quot;JSON&quot;, jsonArray.getJSONObject(jsonIndex).getString(&quot;title&quot;))\r\n    }","title":"How to parse JSON in Kotlin?","body":"<p>First of all.</p>\n\n<p>You can use JSON to Kotlin Data class converter plugin in Android Studio for JSON mapping to POJO classes (kotlin data class).\nThis plugin will annotate your Kotlin data class according to JSON.</p>\n\n<p>Then you can use GSON converter to convert JSON to Kotlin.</p>\n\n<p>Follow this Complete tutorial:\n<a href=\"http://developine.com/kotlin-android-json-parsing-tutorial-retrofit/\" rel=\"noreferrer\">Kotlin Android JSON Parsing Tutorial </a></p>\n\n<p>If you want to parse json manually.</p>\n\n<pre><code>val **sampleJson** = \"\"\"\n  [\n  {\n   \"userId\": 1,\n   \"id\": 1,\n   \"title\": \"sunt aut facere repellat provident occaecati excepturi optio \n    reprehenderit\",\n    \"body\": \"quia et suscipit\\nsuscipit recusandae consequuntur expedita\"\n   }]\n   \"\"\"\n</code></pre>\n\n<p>Code to Parse above JSON Array and its object at index 0.</p>\n\n<pre><code>var jsonArray = JSONArray(sampleJson)\nfor (jsonIndex in 0..(jsonArray.length() - 1)) {\nLog.d(\"JSON\", jsonArray.getJSONObject(jsonIndex).getString(\"title\"))\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":57502,"reputation":8746,"user_id":172274,"accept_rate":78,"display_name":"still_dreaming_1"},"score":4,"creation_date":1563123581,"post_id":50468095,"comment_id":100587823,"body_markdown":"So if this does not require any external libraries, that should mean org.json.JSONObject is part of the standard library right?","body":"So if this does not require any external libraries, that should mean org.json.JSONObject is part of the standard library right?"},{"owner":{"account_id":1853759,"reputation":5127,"user_id":1679768,"display_name":"frouo"},"score":2,"creation_date":1563263291,"post_id":50468095,"comment_id":100631166,"body_markdown":"@still_dreaming_1 yes it is, &quot;Added in API level 1&quot;, cf. https://developer.android.com/reference/org/json/JSONObject.html","body":"@still_dreaming_1 yes it is, &quot;Added in API level 1&quot;, cf. <a href=\"https://developer.android.com/reference/org/json/JSONObject.html\" rel=\"nofollow noreferrer\">developer.android.com/reference/org/json/JSONObject.html</a>"},{"owner":{"account_id":57502,"reputation":8746,"user_id":172274,"accept_rate":78,"display_name":"still_dreaming_1"},"score":3,"creation_date":1563281657,"post_id":50468095,"comment_id":100641081,"body_markdown":"I guess it&#39;s an Android thing? I was looking for it in the Kotlin or Java standard library for the JVM.","body":"I guess it&#39;s an Android thing? I was looking for it in the Kotlin or Java standard library for the JVM."},{"owner":{"account_id":1853759,"reputation":5127,"user_id":1679768,"display_name":"frouo"},"score":0,"creation_date":1563290852,"post_id":50468095,"comment_id":100646930,"body_markdown":"Oh yes absolutely, I am sorry I forgot to mention that in the answer! Maybe you could use `JsonObject` if your JVM is running under Java7 (https://docs.oracle.com/javaee/7/api/javax/json/JsonObject.html)?","body":"Oh yes absolutely, I am sorry I forgot to mention that in the answer! Maybe you could use <code>JsonObject</code> if your JVM is running under Java7 (<a href=\"https://docs.oracle.com/javaee/7/api/javax/json/JsonObject.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javaee/7/api/javax/json/JsonObject.html</a>)?"},{"owner":{"account_id":2254254,"reputation":979,"user_id":1985786,"accept_rate":59,"display_name":"Cao Dongping"},"score":0,"creation_date":1577774318,"post_id":50468095,"comment_id":105250313,"body_markdown":"It must have a performance problem since you re-parsed JSONObject for every key.","body":"It must have a performance problem since you re-parsed JSONObject for every key."},{"owner":{"account_id":20491292,"reputation":149,"user_id":15037320,"display_name":"Newbie..."},"score":0,"creation_date":1663850613,"post_id":50468095,"comment_id":130339503,"body_markdown":"What if I have sth nested\n`{profile: { name: &quot;hi&quot; friends: [{ name: &quot;henlo&quot; }], score: { final: 100 } }}`","body":"What if I have sth nested <code>{profile: { name: &quot;hi&quot; friends: [{ name: &quot;henlo&quot; }], score: { final: 100 } }}</code>"}],"tags":[],"owner":{"account_id":1853759,"reputation":5127,"user_id":1679768,"display_name":"frouo"},"comment_count":6,"down_vote_count":2,"up_vote_count":51,"is_accepted":false,"score":49,"last_activity_date":1563291885,"creation_date":1526993157,"answer_id":50468095,"question_id":41928803,"body_markdown":"# Without external library (on Android)\n\nTo parse this:\n\n    val jsonString = &quot;&quot;&quot;\n        {\n           &quot;type&quot;:&quot;Foo&quot;,\n           &quot;data&quot;:[\n              {\n                 &quot;id&quot;:1,\n                 &quot;title&quot;:&quot;Hello&quot;\n              },\n              {\n                 &quot;id&quot;:2,\n                 &quot;title&quot;:&quot;World&quot;\n              }\n           ]\n        }        \n    &quot;&quot;&quot;\n\nUse these classes:\n\n    import org.json.JSONObject\n    \n    class Response(json: String) : JSONObject(json) {\n        val type: String? = this.optString(&quot;type&quot;)\n        val data = this.optJSONArray(&quot;data&quot;)\n                ?.let { 0.until(it.length()).map { i -&gt; it.optJSONObject(i) } } // returns an array of JSONObject\n                ?.map { Foo(it.toString()) } // transforms each JSONObject of the array into Foo\n    }\n    \n    class Foo(json: String) : JSONObject(json) {\n        val id = this.optInt(&quot;id&quot;)\n        val title: String? = this.optString(&quot;title&quot;)\n    }\n\nUsage:\n\n    val foos = Response(jsonString)","title":"How to parse JSON in Kotlin?","body":"<h1>Without external library (on Android)</h1>\n<p>To parse this:</p>\n<pre><code>val jsonString = &quot;&quot;&quot;\n    {\n       &quot;type&quot;:&quot;Foo&quot;,\n       &quot;data&quot;:[\n          {\n             &quot;id&quot;:1,\n             &quot;title&quot;:&quot;Hello&quot;\n          },\n          {\n             &quot;id&quot;:2,\n             &quot;title&quot;:&quot;World&quot;\n          }\n       ]\n    }        \n&quot;&quot;&quot;\n</code></pre>\n<p>Use these classes:</p>\n<pre><code>import org.json.JSONObject\n\nclass Response(json: String) : JSONObject(json) {\n    val type: String? = this.optString(&quot;type&quot;)\n    val data = this.optJSONArray(&quot;data&quot;)\n            ?.let { 0.until(it.length()).map { i -&gt; it.optJSONObject(i) } } // returns an array of JSONObject\n            ?.map { Foo(it.toString()) } // transforms each JSONObject of the array into Foo\n}\n\nclass Foo(json: String) : JSONObject(json) {\n    val id = this.optInt(&quot;id&quot;)\n    val title: String? = this.optString(&quot;title&quot;)\n}\n</code></pre>\n<p>Usage:</p>\n<pre><code>val foos = Response(jsonString)\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3482475,"reputation":27250,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"score":1,"creation_date":1545827033,"post_id":51043981,"comment_id":94704469,"body_markdown":"It will convert to Java.","body":"It will convert to Java."}],"tags":[],"owner":{"account_id":5363335,"reputation":674,"user_id":4273971,"display_name":"kundan kamal"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1530019309,"creation_date":1530019309,"answer_id":51043981,"question_id":41928803,"body_markdown":"  http://www.jsonschema2pojo.org/\r\n  Hi you can use this website to convert json to pojo.   \r\n  control+Alt+shift+k    \r\n \r\n After that you can manualy convert that model class to kotlin model class. with                       the help of above  shortcut.\r\n        ","title":"How to parse JSON in Kotlin?","body":"<p><a href=\"http://www.jsonschema2pojo.org/\" rel=\"nofollow noreferrer\">http://www.jsonschema2pojo.org/</a>\n  Hi you can use this website to convert json to pojo.<br>\n  control+Alt+shift+k    </p>\n\n<p>After that you can manualy convert that model class to kotlin model class. with                       the help of above  shortcut.</p>\n"},{"tags":[],"owner":{"account_id":14811858,"reputation":99,"user_id":10697251,"display_name":"Facundo Garcia"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1668716659,"creation_date":1543008925,"answer_id":53453177,"question_id":41928803,"body_markdown":"If you prefer parsing JSON to JavaScript-like constructs making use of Kotlin syntax, I recommend [JSONKraken](https://github.com/zogar1993/jsonkraken), of which I am the author.\r\n\r\nYou can do things like:\r\n\r\n    val json: JsonValue = JsonKraken.deserialize(&quot;&quot;&quot;{&quot;getting&quot;:{&quot;started&quot;:&quot;Hello World&quot;}}&quot;&quot;&quot;)\r\n    println(JsonKraken.serialize(json)) //prints: {&quot;getting&quot;:{&quot;started&quot;:&quot;Hello World&quot;}}\r\n    println(json[&quot;getting&quot;][&quot;started&quot;].cast&lt;String&gt;()) //prints: Hello World\r\n\r\n\r\nSuggestions and opinions on the matter are much apreciated!","title":"How to parse JSON in Kotlin?","body":"<p>If you prefer parsing JSON to JavaScript-like constructs making use of Kotlin syntax, I recommend <a href=\"https://github.com/zogar1993/jsonkraken\" rel=\"nofollow noreferrer\">JSONKraken</a>, of which I am the author.</p>\n<p>You can do things like:</p>\n<pre><code>val json: JsonValue = JsonKraken.deserialize(&quot;&quot;&quot;{&quot;getting&quot;:{&quot;started&quot;:&quot;Hello World&quot;}}&quot;&quot;&quot;)\nprintln(JsonKraken.serialize(json)) //prints: {&quot;getting&quot;:{&quot;started&quot;:&quot;Hello World&quot;}}\nprintln(json[&quot;getting&quot;][&quot;started&quot;].cast&lt;String&gt;()) //prints: Hello World\n</code></pre>\n<p>Suggestions and opinions on the matter are much apreciated!</p>\n"},{"tags":[],"owner":{"account_id":3482475,"reputation":27250,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"comment_count":0,"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1552634057,"creation_date":1545827822,"answer_id":53932221,"question_id":41928803,"body_markdown":"To convert JSON to Kotlin use http://www.json2kotlin.com/\r\n\r\nAlso you can use Android Studio plugin. File &gt; Settings, select `Plugins` in left tree, press &quot;Browse repositories...&quot;, search &quot;**JsonToKotlinClass**&quot;, select it and click green button &quot;Install&quot;.\r\n\r\n[![plugin][1]][1]\r\n\r\nAfter AS restart you can use it. You can create a class with `File &gt; New &gt; JSON To Kotlin Class (JsonToKotlinClass)`. Another way is to press Alt + K.\r\n\r\n[![enter image description here][2]][2]\r\n\r\nThen you will see a dialog to paste JSON.\r\n\r\nIn 2018 I had to add `package com.my.package_name` at the beginning of a class.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/2XAXG.png\r\n  [2]: https://i.stack.imgur.com/fdivg.png","title":"How to parse JSON in Kotlin?","body":"<p>To convert JSON to Kotlin use <a href=\"http://www.json2kotlin.com/\" rel=\"noreferrer\">http://www.json2kotlin.com/</a></p>\n\n<p>Also you can use Android Studio plugin. File > Settings, select <code>Plugins</code> in left tree, press \"Browse repositories...\", search \"<strong>JsonToKotlinClass</strong>\", select it and click green button \"Install\".</p>\n\n<p><a href=\"https://i.stack.imgur.com/2XAXG.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/2XAXG.png\" alt=\"plugin\"></a></p>\n\n<p>After AS restart you can use it. You can create a class with <code>File &gt; New &gt; JSON To Kotlin Class (JsonToKotlinClass)</code>. Another way is to press Alt + K.</p>\n\n<p><a href=\"https://i.stack.imgur.com/fdivg.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/fdivg.png\" alt=\"enter image description here\"></a></p>\n\n<p>Then you will see a dialog to paste JSON.</p>\n\n<p>In 2018 I had to add <code>package com.my.package_name</code> at the beginning of a class.</p>\n"},{"comments":[{"owner":{"account_id":10541959,"reputation":8904,"user_id":7767664,"accept_rate":63,"display_name":"user924"},"score":0,"creation_date":1679328843,"post_id":63820753,"comment_id":133698179,"body_markdown":"`val pt = Json.decodeFromString&lt;Point&gt;(&quot;&quot;&quot;{&quot;y&quot;: 1, &quot;x&quot;: 2}&quot;&quot;&quot;)` - `Type mismatch.\nRequired:\nDeserializationStrategy&lt;TypeVariable(T)&gt;\nFound:\nString`, it takes two parameters","body":"<code>val pt = Json.decodeFromString&lt;Point&gt;(&quot;&quot;&quot;{&quot;y&quot;: 1, &quot;x&quot;: 2}&quot;&quot;&quot;)</code> - <code>Type mismatch. Required: DeserializationStrategy&lt;TypeVariable(T)&gt; Found: String</code>, it takes two parameters"},{"owner":{"account_id":2402196,"reputation":13313,"user_id":2111778,"accept_rate":80,"display_name":"xjcl"},"score":0,"creation_date":1679355431,"post_id":63820753,"comment_id":133704108,"body_markdown":"I will check if my answer needs updating. What version did you use?","body":"I will check if my answer needs updating. What version did you use?"}],"tags":[],"owner":{"account_id":2402196,"reputation":13313,"user_id":2111778,"accept_rate":80,"display_name":"xjcl"},"comment_count":2,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1620390189,"creation_date":1599693596,"answer_id":63820753,"question_id":41928803,"body_markdown":"This uses **`kotlinx.serialization`** like [Elisha&#39;s answer](https://stackoverflow.com/a/48904120/2111778). Meanwhile the project is past version 1.0 so the API has changed. Note that e.g. `JSON.parse` was renamed to `Json.decodeFromString`. Also it is imported in gradle [differently](https://github.com/Kotlin/kotlinx.serialization#setup) starting in Kotlin 1.4.0:\r\n\r\n    dependencies {\r\n        implementation &quot;org.jetbrains.kotlinx:kotlinx-serialization-json:1.2.0&quot;\r\n    }\r\n    apply plugin: &#39;kotlinx-serialization&#39;\r\n\r\nExample usage:\r\n\r\n```kotlin\r\nimport kotlinx.serialization.Serializable\r\nimport kotlinx.serialization.json.Json\r\nimport kotlinx.serialization.decodeFromString\r\nimport kotlinx.serialization.encodeToString\r\n```\r\n\r\n```kotlin\r\n@Serializable\r\ndata class Point(val x: Int, val y: Int)\r\n\r\nval pt = Json.decodeFromString&lt;Point&gt;(&quot;&quot;&quot;{&quot;y&quot;: 1, &quot;x&quot;: 2}&quot;&quot;&quot;)\r\nval str = Json.encodeToString(pt)  // type can be inferred!\r\n\r\nval ilist = Json.decodeFromString&lt;List&lt;Int&gt;&gt;(&quot;[-1, -2]&quot;)\r\nval ptlist = Json.decodeFromString&lt;List&lt;Point&gt;&gt;(\r\n    &quot;&quot;&quot;[{&quot;x&quot;: 3, &quot;y&quot;: 4}, {&quot;x&quot;: 5, &quot;y&quot;: 6}]&quot;&quot;&quot;\r\n)\r\n```\r\n\r\nYou can use nullable types (`T?`) for **both nullable and optional fields**:\r\n\r\n```kotlin\r\n@Serializable\r\ndata class Point2(val x: Int, val y: Int? = null)\r\n\r\nval nlist = Json.decodeFromString&lt;List&lt;Point2&gt;&gt;(\r\n    &quot;&quot;&quot;[{&quot;x&quot;: 7}, {&quot;x&quot;: 8, &quot;y&quot;: null}, {&quot;x&quot;: 9, &quot;y&quot;: 0}]&quot;&quot;&quot;\r\n)\r\n```\r\n\r\nKotlin&#39;s `data class` is a class that mainly holds data and has members, `.toString()` and other methods (e.g. destructuring declarations) automatically defined.\r\n","title":"How to parse JSON in Kotlin?","body":"<p>This uses <strong><code>kotlinx.serialization</code></strong> like <a href=\"https://stackoverflow.com/a/48904120/2111778\">Elisha's answer</a>. Meanwhile the project is past version 1.0 so the API has changed. Note that e.g. <code>JSON.parse</code> was renamed to <code>Json.decodeFromString</code>. Also it is imported in gradle <a href=\"https://github.com/Kotlin/kotlinx.serialization#setup\" rel=\"noreferrer\">differently</a> starting in Kotlin 1.4.0:</p>\n<pre><code>dependencies {\n    implementation &quot;org.jetbrains.kotlinx:kotlinx-serialization-json:1.2.0&quot;\n}\napply plugin: 'kotlinx-serialization'\n</code></pre>\n<p>Example usage:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>import kotlinx.serialization.Serializable\nimport kotlinx.serialization.json.Json\nimport kotlinx.serialization.decodeFromString\nimport kotlinx.serialization.encodeToString\n</code></pre>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@Serializable\ndata class Point(val x: Int, val y: Int)\n\nval pt = Json.decodeFromString&lt;Point&gt;(&quot;&quot;&quot;{&quot;y&quot;: 1, &quot;x&quot;: 2}&quot;&quot;&quot;)\nval str = Json.encodeToString(pt)  // type can be inferred!\n\nval ilist = Json.decodeFromString&lt;List&lt;Int&gt;&gt;(&quot;[-1, -2]&quot;)\nval ptlist = Json.decodeFromString&lt;List&lt;Point&gt;&gt;(\n    &quot;&quot;&quot;[{&quot;x&quot;: 3, &quot;y&quot;: 4}, {&quot;x&quot;: 5, &quot;y&quot;: 6}]&quot;&quot;&quot;\n)\n</code></pre>\n<p>You can use nullable types (<code>T?</code>) for <strong>both nullable and optional fields</strong>:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@Serializable\ndata class Point2(val x: Int, val y: Int? = null)\n\nval nlist = Json.decodeFromString&lt;List&lt;Point2&gt;&gt;(\n    &quot;&quot;&quot;[{&quot;x&quot;: 7}, {&quot;x&quot;: 8, &quot;y&quot;: null}, {&quot;x&quot;: 9, &quot;y&quot;: 0}]&quot;&quot;&quot;\n)\n</code></pre>\n<p>Kotlin's <code>data class</code> is a class that mainly holds data and has members, <code>.toString()</code> and other methods (e.g. destructuring declarations) automatically defined.</p>\n"},{"tags":[],"owner":{"account_id":11043050,"reputation":2512,"user_id":8110255,"accept_rate":0,"display_name":"iamanbansal"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1668177755,"creation_date":1601879578,"answer_id":64203455,"question_id":41928803,"body_markdown":"# Kotlin Serialization\r\nKotlin specific library by JetBrains for all supported platforms – Android, JVM, JavaScript, Native.\r\n\r\nhttps://github.com/Kotlin/kotlinx.serialization\r\n\r\n# Moshi\r\nMoshi is a JSON library for Android and Java by Square. \r\n\r\nhttps://github.com/square/moshi\r\n\r\n# Jackson\r\nhttps://github.com/FasterXML/jackson\r\n\r\n# Gson\r\nMost popular but almost ***deprecated***.\r\n\r\nhttps://github.com/google/gson\r\n\r\n# JSON to Java\r\nhttp://www.jsonschema2pojo.org/\r\n\r\n# JSON to Kotlin\r\nIntelliJ plugin - https://plugins.jetbrains.com/plugin/9960-json-to-kotlin-class-jsontokotlinclass-","title":"How to parse JSON in Kotlin?","body":"<h1>Kotlin Serialization</h1>\n<p>Kotlin specific library by JetBrains for all supported platforms – Android, JVM, JavaScript, Native.</p>\n<p><a href=\"https://github.com/Kotlin/kotlinx.serialization\" rel=\"nofollow noreferrer\">https://github.com/Kotlin/kotlinx.serialization</a></p>\n<h1>Moshi</h1>\n<p>Moshi is a JSON library for Android and Java by Square.</p>\n<p><a href=\"https://github.com/square/moshi\" rel=\"nofollow noreferrer\">https://github.com/square/moshi</a></p>\n<h1>Jackson</h1>\n<p><a href=\"https://github.com/FasterXML/jackson\" rel=\"nofollow noreferrer\">https://github.com/FasterXML/jackson</a></p>\n<h1>Gson</h1>\n<p>Most popular but almost <em><strong>deprecated</strong></em>.</p>\n<p><a href=\"https://github.com/google/gson\" rel=\"nofollow noreferrer\">https://github.com/google/gson</a></p>\n<h1>JSON to Java</h1>\n<p><a href=\"http://www.jsonschema2pojo.org/\" rel=\"nofollow noreferrer\">http://www.jsonschema2pojo.org/</a></p>\n<h1>JSON to Kotlin</h1>\n<p>IntelliJ plugin - <a href=\"https://plugins.jetbrains.com/plugin/9960-json-to-kotlin-class-jsontokotlinclass-\" rel=\"nofollow noreferrer\">https://plugins.jetbrains.com/plugin/9960-json-to-kotlin-class-jsontokotlinclass-</a></p>\n"},{"tags":[],"owner":{"account_id":7423325,"reputation":1596,"user_id":5646794,"display_name":"Touhid"},"comment_count":0,"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1668929088,"creation_date":1603878788,"answer_id":64570340,"question_id":41928803,"body_markdown":"GSON is a good choice for Android and Web platform to parse JSON in a Kotlin project. This library is developed by Google.\r\n[https://github.com/google/gson][1]\r\n\r\n\r\n**1. First, add GSON to your project:**\r\n\r\n```JSON\r\ndependencies {\r\n    implementation &#39;com.google.code.gson:gson:2.8.9&#39;\r\n}\r\n```\r\n\r\n\r\n**2. Now you need to convert your JSON to Kotlin Data class:**\r\n\r\nCopy your JSON and go to this([https://json2kt.com][2]) website and paste your JSON to Input Json box. Write package(ex: com.example.appName) and Class name(ex: UserData) in proper box. This site will show live preview of your data class below and also you can download all classes at once in a zip file.\r\n\r\nAfter downloading all classes extract the zip file &amp; place them into your project.\r\n\r\n**3. Now Parse like below:**\r\n\r\n    val myJson = &quot;&quot;&quot;\r\n    {\r\n        &quot;user_name&quot;: &quot;john123&quot;,\r\n        &quot;email&quot;: &quot;john@example.com&quot;,\r\n        &quot;name&quot;: &quot;John Doe&quot;\r\n    }\r\n    &quot;&quot;&quot;.trimIndent()\r\n\r\n    val gson = Gson()\r\n    var mUser = gson.fromJson(myJson, UserData::class.java)\r\n    println(mUser.userName)\r\n\r\nDone :)\r\n\r\n  [1]: https://github.com/google/gson\r\n  [2]: https://json2kt.com","title":"How to parse JSON in Kotlin?","body":"<p>GSON is a good choice for Android and Web platform to parse JSON in a Kotlin project. This library is developed by Google.\n<a href=\"https://github.com/google/gson\" rel=\"nofollow noreferrer\">https://github.com/google/gson</a></p>\n<p><strong>1. First, add GSON to your project:</strong></p>\n<pre><code>dependencies {\n    implementation 'com.google.code.gson:gson:2.8.9'\n}\n</code></pre>\n<p><strong>2. Now you need to convert your JSON to Kotlin Data class:</strong></p>\n<p>Copy your JSON and go to this(<a href=\"https://json2kt.com\" rel=\"nofollow noreferrer\">https://json2kt.com</a>) website and paste your JSON to Input Json box. Write package(ex: com.example.appName) and Class name(ex: UserData) in proper box. This site will show live preview of your data class below and also you can download all classes at once in a zip file.</p>\n<p>After downloading all classes extract the zip file &amp; place them into your project.</p>\n<p><strong>3. Now Parse like below:</strong></p>\n<pre><code>val myJson = &quot;&quot;&quot;\n{\n    &quot;user_name&quot;: &quot;john123&quot;,\n    &quot;email&quot;: &quot;john@example.com&quot;,\n    &quot;name&quot;: &quot;John Doe&quot;\n}\n&quot;&quot;&quot;.trimIndent()\n\nval gson = Gson()\nvar mUser = gson.fromJson(myJson, UserData::class.java)\nprintln(mUser.userName)\n</code></pre>\n<p>Done :)</p>\n"},{"tags":[],"owner":{"account_id":16967123,"reputation":3285,"user_id":12272687,"display_name":"Mori"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1649318561,"creation_date":1649318561,"answer_id":71778426,"question_id":41928803,"body_markdown":"**Parse JSON string to Kotlin object**\r\n\r\nAs others recommend, **Gson library** is the simplest way!\r\n\r\nIf the File is in the **Asset folder** you can do like this, first add\r\n\r\n    dependencies {\r\n      implementation &#39;com.google.code.gson:gson:2.9.0&#39;\r\n    }\r\n\r\nthen get a file from **Asset**:\r\n\r\n    jsonString = context.assets.open(fileName).bufferedReader().use { it.readText() }\r\n\r\nthen use **Gson** :\r\n\r\n    val gson = Gson()\r\n    val listPersonType = object : TypeToken&lt;List&lt;Person&gt;&gt;() {}.type\r\n    var persons: List&lt;Person&gt; = gson.fromJson(jsonFileString, listPersonType)\r\n    persons.forEachIndexed { idx, person -&gt; Log.i(&quot;data&quot;, &quot;&gt; Item $idx:\\n$person&quot;) }\r\n\r\nWhere `Person` is a `Model/Data class`, like this\r\n\r\n    data class Person(val name: String, val age: Int, val messages: List) {\r\n    }","title":"How to parse JSON in Kotlin?","body":"<p><strong>Parse JSON string to Kotlin object</strong></p>\n<p>As others recommend, <strong>Gson library</strong> is the simplest way!</p>\n<p>If the File is in the <strong>Asset folder</strong> you can do like this, first add</p>\n<pre><code>dependencies {\n  implementation 'com.google.code.gson:gson:2.9.0'\n}\n</code></pre>\n<p>then get a file from <strong>Asset</strong>:</p>\n<pre><code>jsonString = context.assets.open(fileName).bufferedReader().use { it.readText() }\n</code></pre>\n<p>then use <strong>Gson</strong> :</p>\n<pre><code>val gson = Gson()\nval listPersonType = object : TypeToken&lt;List&lt;Person&gt;&gt;() {}.type\nvar persons: List&lt;Person&gt; = gson.fromJson(jsonFileString, listPersonType)\npersons.forEachIndexed { idx, person -&gt; Log.i(&quot;data&quot;, &quot;&gt; Item $idx:\\n$person&quot;) }\n</code></pre>\n<p>Where <code>Person</code> is a <code>Model/Data class</code>, like this</p>\n<pre><code>data class Person(val name: String, val age: Int, val messages: List) {\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3565126,"reputation":2683,"user_id":2976879,"display_name":"Elmar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663742239,"creation_date":1663742239,"answer_id":73796310,"question_id":41928803,"body_markdown":"Seems like Kotlin does not have any built-in method as in many cases it just imports and implements some tools from Java. After trying lots of packages, finally this one worked reasonably. This fastjson from alibaba, which is very easy to use. Inside build gradle dependencies:\r\n\r\n\r\n    implementation &#39;com.alibaba:fastjson:1.1.67.android&#39;\r\n\r\nInside your Kotlin code:\r\n\r\n    import com.alibaba.fastjson.JSON\r\n    var jsonDecodedMap: Map&lt;String, String&gt; =\r\n                JSON.parse(yourStringValueHere) as Map&lt;String, String&gt;;","title":"How to parse JSON in Kotlin?","body":"<p>Seems like Kotlin does not have any built-in method as in many cases it just imports and implements some tools from Java. After trying lots of packages, finally this one worked reasonably. This fastjson from alibaba, which is very easy to use. Inside build gradle dependencies:</p>\n<pre><code>implementation 'com.alibaba:fastjson:1.1.67.android'\n</code></pre>\n<p>Inside your Kotlin code:</p>\n<pre><code>import com.alibaba.fastjson.JSON\nvar jsonDecodedMap: Map&lt;String, String&gt; =\n            JSON.parse(yourStringValueHere) as Map&lt;String, String&gt;;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13882612,"reputation":1495,"user_id":10022587,"display_name":"Hamdy Abd El Fattah"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1672129386,"creation_date":1672129386,"answer_id":74927083,"question_id":41928803,"body_markdown":"**I created a simple Extention function to convert JSON string to model class**\r\n\r\n    inline fun &lt;reified T: Any&gt; String.toKotlinObject(): T =\r\n        Gson().fromJson(this, T::class.java)\r\n\r\n**Usage method**\r\n\r\n    stringJson.toKotlinObject&lt;MyModelClass&gt;()\r\n","title":"How to parse JSON in Kotlin?","body":"<p><strong>I created a simple Extention function to convert JSON string to model class</strong></p>\n<pre><code>inline fun &lt;reified T: Any&gt; String.toKotlinObject(): T =\n    Gson().fromJson(this, T::class.java)\n</code></pre>\n<p><strong>Usage method</strong></p>\n<pre><code>stringJson.toKotlinObject&lt;MyModelClass&gt;()\n</code></pre>\n"}],"owner":{"account_id":3920950,"reputation":3373,"user_id":3243124,"accept_rate":48,"display_name":"AJ_1310"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":504550,"favorite_count":0,"down_vote_count":0,"up_vote_count":231,"accepted_answer_id":41929124,"answer_count":17,"score":231,"last_activity_date":1675823518,"creation_date":1485748608,"question_id":41928803,"body_markdown":"I&#39;m receiving a quite deep JSON object string from a service which I must parse to a JSON object and then map it to classes.\r\n\r\nHow can I transform a JSON string to object in Kotlin?\r\n\r\nAfter that the mapping to the respective classes, I was using StdDeserializer from Jackson. The problem arises at the moment the object had properties that also had to be deserialized into classes. I was not able to get the object mapper, at least I didn&#39;t know how, inside another deserializer.\r\n\r\nPreferably, natively, I&#39;m trying to reduce the number of dependencies I need so if the answer is only for JSON manipulation and parsing it&#39;d be enough.","title":"How to parse JSON in Kotlin?","body":"<p>I'm receiving a quite deep JSON object string from a service which I must parse to a JSON object and then map it to classes.</p>\n<p>How can I transform a JSON string to object in Kotlin?</p>\n<p>After that the mapping to the respective classes, I was using StdDeserializer from Jackson. The problem arises at the moment the object had properties that also had to be deserialized into classes. I was not able to get the object mapper, at least I didn't know how, inside another deserializer.</p>\n<p>Preferably, natively, I'm trying to reduce the number of dependencies I need so if the answer is only for JSON manipulation and parsing it'd be enough.</p>\n"},{"tags":["java","spring-boot","apache-kafka","spring-cloud-stream"],"comments":[{"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"score":1,"creation_date":1675780628,"post_id":75374150,"comment_id":132999530,"body_markdown":"What version are you using? This was fixed last summer...\n\nhttps://github.com/spring-cloud/spring-cloud-stream/issues/2486","body":"What version are you using? This was fixed last summer...  <a href=\"https://github.com/spring-cloud/spring-cloud-stream/issues/2486\" rel=\"nofollow noreferrer\">github.com/spring-cloud/spring-cloud-stream/issues/2486</a>"},{"owner":{"account_id":14482834,"reputation":3924,"user_id":10461625,"display_name":"PatPanda"},"score":0,"creation_date":1675805474,"post_id":75374150,"comment_id":133007060,"body_markdown":"I am using the latest SpringBoot 3.0.2 + Spring Cloud 2022.0.1, which are both very recent. I looked at the related SO and Github issue, while I do see for sure Admin Client interaction when launching my app, I see it only once, it does not repeat. What did I do wrong please?","body":"I am using the latest SpringBoot 3.0.2 + Spring Cloud 2022.0.1, which are both very recent. I looked at the related SO and Github issue, while I do see for sure Admin Client interaction when launching my app, I see it only once, it does not repeat. What did I do wrong please?"},{"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"score":1,"creation_date":1675805793,"post_id":75374150,"comment_id":133007158,"body_markdown":"I suggest running in a debugger and setting a breakpoint in both `Admin.create()` methods to see where it is being called from.","body":"I suggest running in a debugger and setting a breakpoint in both <code>Admin.create()</code> methods to see where it is being called from."}],"answers":[{"tags":[],"owner":{"account_id":14482834,"reputation":3924,"user_id":10461625,"display_name":"PatPanda"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675823233,"creation_date":1675823233,"answer_id":75380850,"question_id":75374150,"body_markdown":"As suggested by @Gary Russell, the bug is fixed and seeing Admin client on startup for a consumer only app is indeed not expected.\r\n\r\nIn my case, it is due to a mix of couple of things:\r\n\r\n1 - https://stackoverflow.com/questions/59532073/how-can-i-configure-a-spring-cloud-stream-kafka-application-to-autocreate-the\r\n\r\nspring.cloud.stream.kafka.binder.autoCreateTopics property is set to true by default, this will &quot;trigger the Admin Client&quot;\r\n\r\nI did set it to false on my side, but because of this issue: https://github.com/spring-cloud/spring-cloud-stream/issues/2644 when running on native, the property was not being taken into account.\r\n\r\nMaking sure the property is false, and setting the breakpoint as Gary suggested is the correct solution (upvoted what he said)","title":"Spring Cloud Stream Kafka consumer app, AdminClient is called for no reason","body":"<p>As suggested by @Gary Russell, the bug is fixed and seeing Admin client on startup for a consumer only app is indeed not expected.</p>\n<p>In my case, it is due to a mix of couple of things:</p>\n<p>1 - <a href=\"https://stackoverflow.com/questions/59532073/how-can-i-configure-a-spring-cloud-stream-kafka-application-to-autocreate-the\">How can I configure a Spring Cloud Stream (Kafka) application to autocreate the topics in Confluent Cloud?</a></p>\n<p>spring.cloud.stream.kafka.binder.autoCreateTopics property is set to true by default, this will &quot;trigger the Admin Client&quot;</p>\n<p>I did set it to false on my side, but because of this issue: <a href=\"https://github.com/spring-cloud/spring-cloud-stream/issues/2644\" rel=\"nofollow noreferrer\">https://github.com/spring-cloud/spring-cloud-stream/issues/2644</a> when running on native, the property was not being taken into account.</p>\n<p>Making sure the property is false, and setting the breakpoint as Gary suggested is the correct solution (upvoted what he said)</p>\n"}],"owner":{"account_id":14482834,"reputation":3924,"user_id":10461625,"display_name":"PatPanda"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":344,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75380850,"answer_count":1,"score":0,"last_activity_date":1675823233,"creation_date":1675777037,"question_id":75374150,"body_markdown":"Small question regarding Spring Cloud Stream Kafka please.\r\n\r\nI am having a very simple and straightforward consumer.\r\nIt is consuming only, does not produce messages, the topic is already there, I do not need to create topic.\r\n\r\n```\r\n@SpringBootApplication\r\npublic class StreamReactiveConsumerApplication implements CommandLineRunner {\r\n\r\n    private static final Logger log = LoggerFactory.getLogger(StreamReactiveConsumerApplication.class);\r\n\r\n    public static void main(String... args) {\r\n        new SpringApplicationBuilder(StreamReactiveConsumerApplication.class).web(WebApplicationType.NONE).run(args);\r\n    }\r\n\r\n    @Override\r\n    public void run(String... args) throws Exception {\r\n        log.warn(&quot;Remember about calling &lt;.subscribe()&gt; at the end of your Consumer&lt;Flux&gt; bean!&quot;);\r\n        log.warn(&quot;Remember about finishing the span manually before calling subscribe!&quot;);\r\n    }\r\n\r\n    @Bean\r\n    Consumer&lt;Flux&lt;Message&lt;String&gt;&gt;&gt; channel(Tracer tracer, ObservationRegistry observationRegistry) {\r\n        return flux -&gt; flux.doOnNext(msg -&gt; log.info(&quot;&lt;ACCEPTANCE_TEST&gt; &lt;TRACE:{}&gt; Hello from consumer&quot;,\r\n                tracer.currentSpan().context().traceId())).subscribe();\r\n    }\r\n\r\n}\r\n```\r\n\r\nYet on application startup, I am seeing interactions from the admin client please see logs below:\r\n\r\n```\r\n2023-02-06 10:25:24 [stream-reactive-consumer,,] o.s.i.endpoint.EventDrivenConsumer : Adding {logging-channel-adapter:_org.springframework.integration.errorLogger} as a subscriber to the &#39;errorChannel&#39; channel\r\n2023-02-06 10:25:24 [stream-reactive-consumer,,] o.s.i.c.PublishSubscribeChannel : Channel &#39;stream-reactive-consumer.errorChannel&#39; has 1 subscriber(s).\r\n2023-02-06 10:25:24 [stream-reactive-consumer,,] o.s.i.endpoint.EventDrivenConsumer : started bean &#39;_org.springframework.integration.errorLogger&#39;\r\n2023-02-06 10:25:24 [stream-reactive-consumer,,] o.s.c.s.binder.DefaultBinderFactory : Creating binder: kafka\r\n2023-02-06 10:25:24 [stream-reactive-consumer,,] o.s.c.s.binder.DefaultBinderFactory : Constructing binder child context for kafka\r\n2023-02-06 10:25:24 [stream-reactive-consumer,,] o.s.c.s.binder.DefaultBinderFactory : Caching the binder: kafka\r\n2023-02-06 10:25:24 [stream-reactive-consumer,,] o.a.k.c.admin.AdminClientConfig : AdminClientConfig values:\r\n\r\n[bunch of values...]\r\n\r\n2023-02-06 10:25:24 [stream-reactive-consumer,,] o.a.kafka.common.utils.AppInfoParser : Kafka version: 3.3.1\r\n2023-02-06 10:25:24 [stream-reactive-consumer,,] o.a.kafka.common.utils.AppInfoParser : Kafka commitId: e23c59d00e687ff5\r\n2023-02-06 10:25:24 [stream-reactive-consumer,,] o.a.kafka.common.utils.AppInfoParser : Kafka startTimeMs: 1675650324403\r\n```\r\n\r\nAs you can see, the app is calling the admin client:\r\n```\r\n2023-02-06 10:25:24 [stream-reactive-consumer,,] o.a.k.c.admin.AdminClientConfig : AdminClientConfig values:\r\n```\r\n\r\nMay I ask why this reliance on the admin for a consumer only app please?\r\nAgain, I am not producing anything, not creating any topic.\r\n\r\nIs there a way to consume without this admin client, disable this admin client please?\r\n\r\nThank you","title":"Spring Cloud Stream Kafka consumer app, AdminClient is called for no reason","body":"<p>Small question regarding Spring Cloud Stream Kafka please.</p>\n<p>I am having a very simple and straightforward consumer.\nIt is consuming only, does not produce messages, the topic is already there, I do not need to create topic.</p>\n<pre><code>@SpringBootApplication\npublic class StreamReactiveConsumerApplication implements CommandLineRunner {\n\n    private static final Logger log = LoggerFactory.getLogger(StreamReactiveConsumerApplication.class);\n\n    public static void main(String... args) {\n        new SpringApplicationBuilder(StreamReactiveConsumerApplication.class).web(WebApplicationType.NONE).run(args);\n    }\n\n    @Override\n    public void run(String... args) throws Exception {\n        log.warn(&quot;Remember about calling &lt;.subscribe()&gt; at the end of your Consumer&lt;Flux&gt; bean!&quot;);\n        log.warn(&quot;Remember about finishing the span manually before calling subscribe!&quot;);\n    }\n\n    @Bean\n    Consumer&lt;Flux&lt;Message&lt;String&gt;&gt;&gt; channel(Tracer tracer, ObservationRegistry observationRegistry) {\n        return flux -&gt; flux.doOnNext(msg -&gt; log.info(&quot;&lt;ACCEPTANCE_TEST&gt; &lt;TRACE:{}&gt; Hello from consumer&quot;,\n                tracer.currentSpan().context().traceId())).subscribe();\n    }\n\n}\n</code></pre>\n<p>Yet on application startup, I am seeing interactions from the admin client please see logs below:</p>\n<pre><code>2023-02-06 10:25:24 [stream-reactive-consumer,,] o.s.i.endpoint.EventDrivenConsumer : Adding {logging-channel-adapter:_org.springframework.integration.errorLogger} as a subscriber to the 'errorChannel' channel\n2023-02-06 10:25:24 [stream-reactive-consumer,,] o.s.i.c.PublishSubscribeChannel : Channel 'stream-reactive-consumer.errorChannel' has 1 subscriber(s).\n2023-02-06 10:25:24 [stream-reactive-consumer,,] o.s.i.endpoint.EventDrivenConsumer : started bean '_org.springframework.integration.errorLogger'\n2023-02-06 10:25:24 [stream-reactive-consumer,,] o.s.c.s.binder.DefaultBinderFactory : Creating binder: kafka\n2023-02-06 10:25:24 [stream-reactive-consumer,,] o.s.c.s.binder.DefaultBinderFactory : Constructing binder child context for kafka\n2023-02-06 10:25:24 [stream-reactive-consumer,,] o.s.c.s.binder.DefaultBinderFactory : Caching the binder: kafka\n2023-02-06 10:25:24 [stream-reactive-consumer,,] o.a.k.c.admin.AdminClientConfig : AdminClientConfig values:\n\n[bunch of values...]\n\n2023-02-06 10:25:24 [stream-reactive-consumer,,] o.a.kafka.common.utils.AppInfoParser : Kafka version: 3.3.1\n2023-02-06 10:25:24 [stream-reactive-consumer,,] o.a.kafka.common.utils.AppInfoParser : Kafka commitId: e23c59d00e687ff5\n2023-02-06 10:25:24 [stream-reactive-consumer,,] o.a.kafka.common.utils.AppInfoParser : Kafka startTimeMs: 1675650324403\n</code></pre>\n<p>As you can see, the app is calling the admin client:</p>\n<pre><code>2023-02-06 10:25:24 [stream-reactive-consumer,,] o.a.k.c.admin.AdminClientConfig : AdminClientConfig values:\n</code></pre>\n<p>May I ask why this reliance on the admin for a consumer only app please?\nAgain, I am not producing anything, not creating any topic.</p>\n<p>Is there a way to consume without this admin client, disable this admin client please?</p>\n<p>Thank you</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":427075,"reputation":7298,"user_id":808653,"accept_rate":56,"display_name":"sw1nn"},"score":0,"creation_date":1331852153,"post_id":9729378,"comment_id":12371586,"body_markdown":"Duplicate of http://stackoverflow.com/questions/8141277/check-if-ipv4-address-is-in-private-range","body":"Duplicate of <a href=\"http://stackoverflow.com/questions/8141277/check-if-ipv4-address-is-in-private-range\" title=\"check if ipv4 address is in private range\">stackoverflow.com/questions/8141277/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":434144,"reputation":19198,"user_id":819916,"accept_rate":81,"display_name":"AKIWEB"},"score":0,"creation_date":1331852189,"post_id":9729432,"comment_id":12371598,"body_markdown":"Can you give me one example based on this. Really Appreciated. Thanks","body":"Can you give me one example based on this. Really Appreciated. Thanks"}],"tags":[],"owner":{"account_id":262470,"reputation":748,"user_id":547351,"accept_rate":43,"display_name":"Nick"},"comment_count":1,"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1575373555,"creation_date":1331852150,"answer_id":9729432,"question_id":9729378,"body_markdown":"The correct method is [InetAddress.isSiteLocalAddress()](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/InetAddress.html#isSiteLocalAddress()). \r\n\r\n&gt; Utility routine to check if the InetAddress is a site local address.\r\n&gt; \r\n&gt;Returns: a boolean indicating if the InetAddress is a site local\r\n&gt; address; or false if address is not a site local unicast address.\r\n","title":"Check whether the ipAddress is in private range","body":"<p>The correct method is <a href=\"http://docs.oracle.com/javase/1.5.0/docs/api/java/net/InetAddress.html#isSiteLocalAddress()\" rel=\"noreferrer\">InetAddress.isSiteLocalAddress()</a>. </p>\n\n<blockquote>\n  <p>Utility routine to check if the InetAddress is a site local address.</p>\n  \n  <p>Returns: a boolean indicating if the InetAddress is a site local\n  address; or false if address is not a site local unicast address.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":434144,"reputation":19198,"user_id":819916,"accept_rate":81,"display_name":"AKIWEB"},"score":0,"creation_date":1331854935,"post_id":9729696,"comment_id":12372194,"body_markdown":"If I need to check on some random ipAddress then how I can do it? Suppose if the ipAddress is 172.18.36.81","body":"If I need to check on some random ipAddress then how I can do it? Suppose if the ipAddress is 172.18.36.81"},{"owner":{"account_id":49530,"reputation":7346,"user_id":147481,"display_name":"BillThor"},"score":0,"creation_date":1331856132,"post_id":9729696,"comment_id":12372444,"body_markdown":"Replace `getLocalHost()` with `getByName(&quot;172.18.36.81&quot;)`.  Read the JavaDoc for InetAddress.","body":"Replace <code>getLocalHost()</code> with <code>getByName(&quot;172.18.36.81&quot;)</code>.  Read the JavaDoc for InetAddress."}],"tags":[],"owner":{"account_id":49530,"reputation":7346,"user_id":147481,"display_name":"BillThor"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1331863742,"creation_date":1331853830,"answer_id":9729696,"question_id":9729378,"body_markdown":"This is a quick hack I generated to test my own address.  \r\n\r\n\r\n    import java.net.InetAddress;\r\n    import java.net.UnknownHostException;\r\n\r\n    public class LocalAddress {\r\n\r\n        public static void main(String[] args) {\r\n            InetAddress address = null;\r\n            try {\r\n                address = InetAddress.getLocalHost();\r\n            } catch (UnknownHostException e) {\r\n                 e.printStackTrace();\r\n            }\r\n            if (address.isSiteLocalAddress()) {\r\n                System.out.println(&quot;Site Local Address: &quot; + address.getHostAddress());\r\n            } else {\r\n                System.out.println(&quot;Routeable Address: &quot; + address.getHostAddress());\r\n            }\r\n        }\r\n\r\n    }\r\n\r\nEDIT:  This code has not been tested for the link local addresses, localhost, or address blocks reserved for documentation.  The first two cases have methods that return them.  The last is not referenced in the documentation of the class.\r\n","title":"Check whether the ipAddress is in private range","body":"<p>This is a quick hack I generated to test my own address.  </p>\n\n<pre><code>import java.net.InetAddress;\nimport java.net.UnknownHostException;\n\npublic class LocalAddress {\n\n    public static void main(String[] args) {\n        InetAddress address = null;\n        try {\n            address = InetAddress.getLocalHost();\n        } catch (UnknownHostException e) {\n             e.printStackTrace();\n        }\n        if (address.isSiteLocalAddress()) {\n            System.out.println(\"Site Local Address: \" + address.getHostAddress());\n        } else {\n            System.out.println(\"Routeable Address: \" + address.getHostAddress());\n        }\n    }\n\n}\n</code></pre>\n\n<p>EDIT:  This code has not been tested for the link local addresses, localhost, or address blocks reserved for documentation.  The first two cases have methods that return them.  The last is not referenced in the documentation of the class.</p>\n"},{"comments":[{"owner":{"account_id":10459957,"reputation":888,"user_id":7711045,"display_name":"Alejandro C De Baca"},"score":8,"creation_date":1493317842,"post_id":34992002,"comment_id":74377873,"body_markdown":"This answer is incorrect. Case b) is satisfied because the mask is `0xF0`. It&#39;s trivial to test that `InetAddress.getByName(&quot;172.31.255.255&quot;).isSiteLocalAddress()` returns true.","body":"This answer is incorrect. Case b) is satisfied because the mask is <code>0xF0</code>. It&#39;s trivial to test that <code>InetAddress.getByName(&quot;172.31.255.255&quot;).isSiteLocalAddress()</code> returns true."}],"tags":[],"owner":{"account_id":5299388,"reputation":773,"user_id":4229567,"display_name":"sofia"},"comment_count":1,"down_vote_count":2,"up_vote_count":9,"is_accepted":false,"score":7,"last_activity_date":1454309942,"creation_date":1453722956,"answer_id":34992002,"question_id":9729378,"body_markdown":"First of all, Private networks can use IPv4 addresses anywhere in the following ranges:\r\n\r\n - a) 192.168.0.0 - 192.168.255.255 (65,536 IP addresses)\r\n - b) 172.16.0.0 - 172.31.255.255 (1,048,576 IP addresses)\r\n - c) 10.0.0.0 - 10.255.255.255 (16,777,216 IP addresses)\r\n\r\nAs we can see from method isSiteLocalAddress in Inet4Address.java :\r\n\r\n     public boolean isSiteLocalAddress() {\r\n        // refer to RFC 1918\r\n        // 10/8 prefix\r\n        // 172.16/12 prefix\r\n        // 192.168/16 prefix\r\n        int address = holder().getAddress();\r\n        return (((address &gt;&gt;&gt; 24) &amp; 0xFF) == 10)\r\n            || ((((address &gt;&gt;&gt; 24) &amp; 0xFF) == 172)\r\n                &amp;&amp; (((address &gt;&gt;&gt; 16) &amp; 0xF0) == 16))\r\n            || ((((address &gt;&gt;&gt; 24) &amp; 0xFF) == 192)\r\n                &amp;&amp; (((address &gt;&gt;&gt; 16) &amp; 0xFF) == 168));\r\n    }\r\nSo case b) 172.16.0.0 - 172.31.255.255 (1,048,576 IP addresses) is not satisfied. But you can easily write you own version of how to tell whether a address is private address.Here is my version:\r\n\r\n   \r\n\r\n    import com.google.common.net.InetAddresses;\r\n\r\n    private static boolean isPrivateV4Address(String ip) {\r\n        int address = InetAddresses.coerceToInteger(InetAddresses.forString(ip));\r\n        return (((address &gt;&gt;&gt; 24) &amp; 0xFF) == 10)\r\n                || ((((address &gt;&gt;&gt; 24) &amp; 0xFF) == 172) \r\n                  &amp;&amp; ((address &gt;&gt;&gt; 16) &amp; 0xFF) &gt;= 16 \r\n                  &amp;&amp; ((address &gt;&gt;&gt; 16) &amp; 0xFF) &lt;= 31)\r\n                || ((((address &gt;&gt;&gt; 24) &amp; 0xFF) == 192) \r\n                  &amp;&amp; (((address &gt;&gt;&gt; 16) &amp; 0xFF) == 168));\r\n    }","title":"Check whether the ipAddress is in private range","body":"<p>First of all, Private networks can use IPv4 addresses anywhere in the following ranges:</p>\n\n<ul>\n<li>a) 192.168.0.0 - 192.168.255.255 (65,536 IP addresses)</li>\n<li>b) 172.16.0.0 - 172.31.255.255 (1,048,576 IP addresses)</li>\n<li>c) 10.0.0.0 - 10.255.255.255 (16,777,216 IP addresses)</li>\n</ul>\n\n<p>As we can see from method isSiteLocalAddress in Inet4Address.java :</p>\n\n<pre><code> public boolean isSiteLocalAddress() {\n    // refer to RFC 1918\n    // 10/8 prefix\n    // 172.16/12 prefix\n    // 192.168/16 prefix\n    int address = holder().getAddress();\n    return (((address &gt;&gt;&gt; 24) &amp; 0xFF) == 10)\n        || ((((address &gt;&gt;&gt; 24) &amp; 0xFF) == 172)\n            &amp;&amp; (((address &gt;&gt;&gt; 16) &amp; 0xF0) == 16))\n        || ((((address &gt;&gt;&gt; 24) &amp; 0xFF) == 192)\n            &amp;&amp; (((address &gt;&gt;&gt; 16) &amp; 0xFF) == 168));\n}\n</code></pre>\n\n<p>So case b) 172.16.0.0 - 172.31.255.255 (1,048,576 IP addresses) is not satisfied. But you can easily write you own version of how to tell whether a address is private address.Here is my version:</p>\n\n<pre><code>import com.google.common.net.InetAddresses;\n\nprivate static boolean isPrivateV4Address(String ip) {\n    int address = InetAddresses.coerceToInteger(InetAddresses.forString(ip));\n    return (((address &gt;&gt;&gt; 24) &amp; 0xFF) == 10)\n            || ((((address &gt;&gt;&gt; 24) &amp; 0xFF) == 172) \n              &amp;&amp; ((address &gt;&gt;&gt; 16) &amp; 0xFF) &gt;= 16 \n              &amp;&amp; ((address &gt;&gt;&gt; 16) &amp; 0xFF) &lt;= 31)\n            || ((((address &gt;&gt;&gt; 24) &amp; 0xFF) == 192) \n              &amp;&amp; (((address &gt;&gt;&gt; 16) &amp; 0xFF) == 168));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2260567,"reputation":450,"user_id":1990790,"display_name":"JorSol"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1457551399,"creation_date":1457551399,"answer_id":35900766,"question_id":9729378,"body_markdown":"I use this:\r\n\r\n    public boolean isPrivateIP(String ipAddress) {\r\n    \t\tboolean isValid = false;\r\n    \t\t\r\n    \t\tif (ipAddress != null &amp;&amp; !ipAddress.isEmpty()) {\r\n    \t\t\tString[] ip = ipAddress.split(&quot;\\\\.&quot;);\r\n    \t\t\tshort[] ipNumber = new short[] { \r\n    \t\t\t\t\tShort.parseShort(ip[0]), \r\n    \t\t\t\t\tShort.parseShort(ip[1]), \r\n    \t\t\t\t\tShort.parseShort(ip[2]),\r\n    \t\t\t\t\tShort.parseShort(ip[3])\r\n    \t\t\t\t};\r\n    \t\t\t\r\n    \t\t\tif (ipNumber[0] == 10) { // Class A\r\n    \t\t\t\tisValid = true;\r\n    \t\t\t} else if (ipNumber[0] == 172 &amp;&amp; (ipNumber[1] &gt;= 16 &amp;&amp; ipNumber[1] &lt;= 31)) { // Class B\r\n    \t\t\t\tisValid = true;\r\n    \t\t\t} else if (ipNumber[0] == 192 &amp;&amp; ipNumber[1] == 168) { // Class C\r\n    \t\t\t\tisValid = true;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\t\r\n    \t\treturn isValid;\r\n    \t}","title":"Check whether the ipAddress is in private range","body":"<p>I use this:</p>\n\n<pre><code>public boolean isPrivateIP(String ipAddress) {\n        boolean isValid = false;\n\n        if (ipAddress != null &amp;&amp; !ipAddress.isEmpty()) {\n            String[] ip = ipAddress.split(\"\\\\.\");\n            short[] ipNumber = new short[] { \n                    Short.parseShort(ip[0]), \n                    Short.parseShort(ip[1]), \n                    Short.parseShort(ip[2]),\n                    Short.parseShort(ip[3])\n                };\n\n            if (ipNumber[0] == 10) { // Class A\n                isValid = true;\n            } else if (ipNumber[0] == 172 &amp;&amp; (ipNumber[1] &gt;= 16 &amp;&amp; ipNumber[1] &lt;= 31)) { // Class B\n                isValid = true;\n            } else if (ipNumber[0] == 192 &amp;&amp; ipNumber[1] == 168) { // Class C\n                isValid = true;\n            }\n        }\n\n        return isValid;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1274862,"reputation":2293,"user_id":1230329,"accept_rate":90,"display_name":"Scott 混合理论"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675823132,"creation_date":1675823132,"answer_id":75380841,"question_id":9729378,"body_markdown":"the range is        \r\n     \r\n        // 10.x.x.x/8\r\n\r\n        // 172.16.x.x/12\r\n\r\n        //192.168.x.x/16\r\n\r\nso we can use below code: \r\n\r\n    public static Boolean isIntranetIP(String IP) {\r\n        byte[] addr = IPAddressUtil.textToNumericFormatV4(IP);\r\n        return isIntranetIPByte(addr);\r\n    }\r\n\r\n\r\n    public static Boolean isIntranetIPByte(byte[] addr) {\r\n        final byte B0 = addr[0];\r\n        final byte B1 = addr[1];\r\n        // 10.x.x.x/8\r\n        final byte section_1 = 0x0A;\r\n        // 172.16.x.x/12\r\n        final byte section_2 = (byte) 0xAC;\r\n        final byte section_3 = (byte) 0x10;\r\n        final byte section_4 = (byte) 0x1F;\r\n        //192.168.x.x/16\r\n        final byte section_5 = (byte) 0xc0;\r\n        final byte section_6 = (byte) 0xa8;\r\n\r\n        switch (B0) {\r\n            case section_1:\r\n                return true;\r\n            case section_2:\r\n                if (B1 &gt;= section_3 &amp;&amp; B1 &lt;= section_4) {\r\n                    return true;\r\n                }\r\n            case section_5:\r\n                switch (B1) {\r\n                    case section_6:\r\n                        return true;\r\n                }\r\n            default:\r\n                return false;\r\n        }\r\n    }","title":"Check whether the ipAddress is in private range","body":"<p>the range is</p>\n<pre><code>    // 10.x.x.x/8\n\n    // 172.16.x.x/12\n\n    //192.168.x.x/16\n</code></pre>\n<p>so we can use below code:</p>\n<pre><code>public static Boolean isIntranetIP(String IP) {\n    byte[] addr = IPAddressUtil.textToNumericFormatV4(IP);\n    return isIntranetIPByte(addr);\n}\n\n\npublic static Boolean isIntranetIPByte(byte[] addr) {\n    final byte B0 = addr[0];\n    final byte B1 = addr[1];\n    // 10.x.x.x/8\n    final byte section_1 = 0x0A;\n    // 172.16.x.x/12\n    final byte section_2 = (byte) 0xAC;\n    final byte section_3 = (byte) 0x10;\n    final byte section_4 = (byte) 0x1F;\n    //192.168.x.x/16\n    final byte section_5 = (byte) 0xc0;\n    final byte section_6 = (byte) 0xa8;\n\n    switch (B0) {\n        case section_1:\n            return true;\n        case section_2:\n            if (B1 &gt;= section_3 &amp;&amp; B1 &lt;= section_4) {\n                return true;\n            }\n        case section_5:\n            switch (B1) {\n                case section_6:\n                    return true;\n            }\n        default:\n            return false;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":434144,"reputation":19198,"user_id":819916,"accept_rate":81,"display_name":"AKIWEB"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18119,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"accepted_answer_id":9729696,"answer_count":5,"score":19,"last_activity_date":1675823132,"creation_date":1331851867,"question_id":9729378,"body_markdown":"How would I check to see whether the ip address is in private category ?\r\n```lang-java\r\n    if(isPrivateIPAddress(ipAddress)) {\r\n        //do something\r\n    }\r\n```\r\n\r\nAny suggestions will be appreciated.\r\n\r\n**UPDATED ANSWER**\r\n```lang-java\r\n    private static boolean isPrivateIPAddress(String ipAddress) {\r\n    \t\t\r\n    \t\tInetAddress ia = null;\r\n    \t\t\r\n    \t\ttry {\r\n    \t\t\tInetAddress ad = InetAddress.getByName(ipAddress);\r\n    \t\t\tbyte[] ip = ad.getAddress();\r\n    \t\t\tia = InetAddress.getByAddress(ip);\r\n    \t\t} catch (UnknownHostException e) {\r\n                e.printStackTrace();\r\n    \t\t\treturn false;\r\n    \t\t}\r\n    \t\t\r\n    \t\treturn ia.isSiteLocalAddress();\r\n    \t}\r\n```\r\nI wrote this method and it&#39;s working fine for me. But is there any case in which this method will not work ? I just wanted to make sure it will be working for every case.","title":"Check whether the ipAddress is in private range","body":"<p>How would I check to see whether the ip address is in private category ?</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>    if(isPrivateIPAddress(ipAddress)) {\n        //do something\n    }\n</code></pre>\n\n<p>Any suggestions will be appreciated.</p>\n\n<p><strong>UPDATED ANSWER</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>    private static boolean isPrivateIPAddress(String ipAddress) {\n\n            InetAddress ia = null;\n\n            try {\n                InetAddress ad = InetAddress.getByName(ipAddress);\n                byte[] ip = ad.getAddress();\n                ia = InetAddress.getByAddress(ip);\n            } catch (UnknownHostException e) {\n                e.printStackTrace();\n                return false;\n            }\n\n            return ia.isSiteLocalAddress();\n        }\n</code></pre>\n\n<p>I wrote this method and it's working fine for me. But is there any case in which this method will not work ? I just wanted to make sure it will be working for every case.</p>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":27393528,"reputation":353,"user_id":20896122,"display_name":"undefined symbol"},"score":0,"creation_date":1675822575,"post_id":75380738,"comment_id":133009918,"body_markdown":"`response.body()` is returning null. I would suppose that means the response had no body.  Read the documentation to discover if that&#39;s possible and what it means. Maybe there&#39;s no such movie, so you got an error response.","body":"<code>response.body()</code> is returning null. I would suppose that means the response had no body.  Read the documentation to discover if that&#39;s possible and what it means. Maybe there&#39;s no such movie, so you got an error response."}],"owner":{"account_id":27730528,"reputation":1,"user_id":21169124,"display_name":"Boku regi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675821966,"creation_date":1675821966,"question_id":75380738,"body_markdown":"```\r\nProcess: com.example.cinemacgp, PID: 11977\r\n    java.lang.NullPointerException: Attempt to invoke virtual method &#39;java.util.List com.example.cinemacgp.model.Response.getResults()&#39; on a null object reference\r\n        at com.example.cinemacgp.activity.MainActivity$1.onResponse(MainActivity.java:52)\r\n        at retrofit2.ExecutorCallAdapterFactory$ExecutorCallbackCall$1$1.run(ExecutorCallAdapterFactory.java:70)\r\n```\r\n\r\nMy Code\r\n```\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n  \r\n    private void CallRetrofit() {\r\n        ApiInterface apiInterface = ApiClient.getClient().create(ApiInterface.class);\r\n        Call&lt;Response&gt; call = apiInterface.getMovie(CATEGORY, API_KEY, LANGUAGE, PAGE);\r\n        call.enqueue(new Callback&lt;Response&gt;() {\r\n            @Override\r\n            public void onResponse(Call&lt;Response&gt; call, retrofit2.Response&lt;Response&gt; response) {\r\n\r\n                //error\r\n                List&lt;Result&gt; mList = response.body().getResults();\r\n                adapter = new MovieAdapter(MainActivity.this, mList);\r\n                recyclerView.setAdapter(adapter);\r\n  ```\r\n\r\n\r\nHello , sir . i get an error here. and I don&#39;t know how to solve it. I&#39;ve been searching for hours. Can you help which part should I do. I&#39;ve searched many ways, and do not know what to do\r\ni think in Response.getResults()&#39; on a null object reference\r\nI&#39;ve done the initialization earlier, and still the error\r\n\r\nHelp me to resolve errors. thankyou","title":"java.util.List com.example.cinemacgp.model.Response.getResults()","body":"<pre><code>Process: com.example.cinemacgp, PID: 11977\n    java.lang.NullPointerException: Attempt to invoke virtual method 'java.util.List com.example.cinemacgp.model.Response.getResults()' on a null object reference\n        at com.example.cinemacgp.activity.MainActivity$1.onResponse(MainActivity.java:52)\n        at retrofit2.ExecutorCallAdapterFactory$ExecutorCallbackCall$1$1.run(ExecutorCallAdapterFactory.java:70)\n</code></pre>\n<p>My Code</p>\n<pre><code>\npublic class MainActivity extends AppCompatActivity {\n\n  \n    private void CallRetrofit() {\n        ApiInterface apiInterface = ApiClient.getClient().create(ApiInterface.class);\n        Call&lt;Response&gt; call = apiInterface.getMovie(CATEGORY, API_KEY, LANGUAGE, PAGE);\n        call.enqueue(new Callback&lt;Response&gt;() {\n            @Override\n            public void onResponse(Call&lt;Response&gt; call, retrofit2.Response&lt;Response&gt; response) {\n\n                //error\n                List&lt;Result&gt; mList = response.body().getResults();\n                adapter = new MovieAdapter(MainActivity.this, mList);\n                recyclerView.setAdapter(adapter);\n</code></pre>\n<p>Hello , sir . i get an error here. and I don't know how to solve it. I've been searching for hours. Can you help which part should I do. I've searched many ways, and do not know what to do\ni think in Response.getResults()' on a null object reference\nI've done the initialization earlier, and still the error</p>\n<p>Help me to resolve errors. thankyou</p>\n"},{"tags":["java","prometheus","monitoring","jmx"],"comments":[{"owner":{"account_id":18542382,"reputation":3683,"user_id":13510562,"display_name":"rmunge"},"score":0,"creation_date":1675594475,"post_id":75004642,"comment_id":132959313,"body_markdown":"@Guli13 what do you refer with &quot;Java HeapSpace exceptions&quot;? java.lang.OutOfMemoryError?","body":"@Guli13 what do you refer with &quot;Java HeapSpace exceptions&quot;? java.lang.OutOfMemoryError?"},{"owner":{"account_id":6720110,"reputation":2302,"user_id":5763327,"display_name":"Setop"},"score":0,"creation_date":1675636771,"post_id":75004642,"comment_id":132966889,"body_markdown":"Which JVM, which version ? Which OS ? Which Payara version ?","body":"Which JVM, which version ? Which OS ? Which Payara version ?"},{"owner":{"account_id":165721,"reputation":13113,"user_id":389405,"accept_rate":84,"display_name":"Gui13"},"score":0,"creation_date":1675698106,"post_id":75004642,"comment_id":132979789,"body_markdown":"We are using Java 8 (the last one, through Temurin) and Payara 4.174. What I want is to have metrics about the number of java.lang.OutOfMemoryError indeed! I can&#39;t install a &quot;global try catch&quot; on this, since it is managed by Payara. I&#39;m wondering how to do that.","body":"We are using Java 8 (the last one, through Temurin) and Payara 4.174. What I want is to have metrics about the number of java.lang.OutOfMemoryError indeed! I can&#39;t install a &quot;global try catch&quot; on this, since it is managed by Payara. I&#39;m wondering how to do that."}],"answers":[{"tags":[],"owner":{"account_id":14889478,"reputation":124,"user_id":10751633,"display_name":"bosowski"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675820692,"creation_date":1675820371,"answer_id":75380619,"question_id":75004642,"body_markdown":"Since you are already using Prometheus to monitor your application, you could use the [mtail exporter][1] to count your exceptions from the logs and expose the metrics for Prometheus to scrape.\r\n\r\n&gt; mtail is a tool for extracting metrics from application logs to be exported into a timeseries database or timeseries calculator for alerting and dashboarding.\r\n&gt; It fills a monitoring niche by being the glue between applications that do not export their own internal state (other than via logs) and existing monitoring systems, such that system operators do not need to patch those applications to instrument them or writing custom extraction code for every such application.\r\n\r\n\r\n  [1]: https://github.com/google/mtail","title":"How to have a metric about Java HeapSpace exceptions in an Application Server","body":"<p>Since you are already using Prometheus to monitor your application, you could use the <a href=\"https://github.com/google/mtail\" rel=\"nofollow noreferrer\">mtail exporter</a> to count your exceptions from the logs and expose the metrics for Prometheus to scrape.</p>\n<blockquote>\n<p>mtail is a tool for extracting metrics from application logs to be exported into a timeseries database or timeseries calculator for alerting and dashboarding.\nIt fills a monitoring niche by being the glue between applications that do not export their own internal state (other than via logs) and existing monitoring systems, such that system operators do not need to patch those applications to instrument them or writing custom extraction code for every such application.</p>\n</blockquote>\n"}],"owner":{"account_id":165721,"reputation":13113,"user_id":389405,"accept_rate":84,"display_name":"Gui13"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":388,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":1,"score":6,"last_activity_date":1675820692,"creation_date":1672831025,"question_id":75004642,"body_markdown":"We are using an old version of Payara, and exporting JVM metrics with the Prometheus JVM GC Exporter and Memory exporters.\r\n\r\nIn these exporters, we don&#39;t have access to the number of Java HeapSpace exceptions, which is an indicator of a inadequate value of the XMX.\r\n\r\n\r\nI have a dashboard where I survey the memory status of our Java apps, and here is a typical example of a &quot;memory starved&quot; app:\r\n[![enter image description here][1]][1]\r\n\r\nI could use the GC average duration, but I&#39;d rather have a &quot;hard fact&quot; counter of the number of Java Heapspace exceptions, which is the real indicator of a lack of memory. Since we are operating in a Java App server, we don&#39;t have a main() to intercept all Java HeapSpace exceptions (and we won&#39;t be able to be sure that it wasn&#39;t intercepted below so the counter might be faulty anyway).\r\n\r\nDo you guys have had the same issues, and found a way to measure this problem? I explored the JMX tree but didn&#39;t find conclusive metrics.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/828fg.png","title":"How to have a metric about Java HeapSpace exceptions in an Application Server","body":"<p>We are using an old version of Payara, and exporting JVM metrics with the Prometheus JVM GC Exporter and Memory exporters.</p>\n<p>In these exporters, we don't have access to the number of Java HeapSpace exceptions, which is an indicator of a inadequate value of the XMX.</p>\n<p>I have a dashboard where I survey the memory status of our Java apps, and here is a typical example of a &quot;memory starved&quot; app:\n<a href=\"https://i.stack.imgur.com/828fg.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/828fg.png\" alt=\"enter image description here\" /></a></p>\n<p>I could use the GC average duration, but I'd rather have a &quot;hard fact&quot; counter of the number of Java Heapspace exceptions, which is the real indicator of a lack of memory. Since we are operating in a Java App server, we don't have a main() to intercept all Java HeapSpace exceptions (and we won't be able to be sure that it wasn't intercepted below so the counter might be faulty anyway).</p>\n<p>Do you guys have had the same issues, and found a way to measure this problem? I explored the JMX tree but didn't find conclusive metrics.</p>\n"},{"tags":["java","for-loop","geometry"],"comments":[{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1675820647,"post_id":75380620,"comment_id":133009671,"body_markdown":"try stepping through it with the debugger. See how the values change at each step of the iteration.","body":"try stepping through it with the debugger. See how the values change at each step of the iteration."},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1675820856,"post_id":75380620,"comment_id":133009698,"body_markdown":"this has to do with truncation of data (ie when you cast a double to an int)","body":"this has to do with truncation of data (ie when you cast a double to an int)"},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1675821370,"post_id":75380620,"comment_id":133009767,"body_markdown":"*On line 4, wouldn&#39;t the result always yield the area?* Not when working with integers.  Put `System.out.println(area/w + &quot; &quot; + w);` as the first statement in the for loop to see what is happening.  Remember, int arithemetic drops fractions.","body":"<i>On line 4, wouldn&#39;t the result always yield the area?</i> Not when working with integers.  Put <code>System.out.println(area&#47;w + &quot; &quot; + w);</code> as the first statement in the for loop to see what is happening.  Remember, int arithemetic drops fractions."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1675823029,"post_id":75380620,"comment_id":133009970,"body_markdown":"You may find [this question](https://stackoverflow.com/q/4685450) helpful.","body":"You may find <a href=\"https://stackoverflow.com/q/4685450\">this question</a> helpful."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1675823257,"post_id":75380620,"comment_id":133009998,"body_markdown":"Is there also a requirement that length and width are integers? And what does &quot;length and width are as small as possible mean&quot;? That their sum should be the minimum possible?","body":"Is there also a requirement that length and width are integers? And what does &quot;length and width are as small as possible mean&quot;? That their sum should be the minimum possible?"},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1675861101,"post_id":75380620,"comment_id":133018146,"body_markdown":"@tgdavies  Well, it wouldn&#39;t be much of a problem if doubles were used.  All the answers would be squares which is a special rectangle.","body":"@tgdavies  Well, it wouldn&#39;t be much of a problem if doubles were used.  All the answers would be squares which is a special rectangle."}],"owner":{"account_id":25838983,"reputation":19,"user_id":19574884,"display_name":"Amanda James"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1675820385,"creation_date":1675820385,"question_id":75380620,"body_markdown":"I&#39;m currently working on a leetcode problem to construct a rectangle. An int value will be passed into a method, and from there I need two values for the length and width, where the length and width must be as small as possible and the L &gt;= W. I looked at a couple solutions but cannot grasp the concept. On line 4, wouldn&#39;t the result always yield the area? So how does the for loop continue ? For instance if the area is 26, and we do the calculations on line 4, Wouldn&#39;t we always get the same number on line 4?  However when I run the code, it gives the correct results of [13,2].\r\n\r\n    1    class Solution {\r\n    2    public int[] constructRectangle(int area) {\r\n    3        for(int w=(int)Math.sqrt(area);w&gt;0;w--){\r\n    4           if((area/w)*w==area)return new int[]{area/w,w};\r\n           }return new int[]{};\r\n        }\r\n     }","title":"Construct Rectangle LeetCode Problem, Can&#39;t Understand Code","body":"<p>I'm currently working on a leetcode problem to construct a rectangle. An int value will be passed into a method, and from there I need two values for the length and width, where the length and width must be as small as possible and the L &gt;= W. I looked at a couple solutions but cannot grasp the concept. On line 4, wouldn't the result always yield the area? So how does the for loop continue ? For instance if the area is 26, and we do the calculations on line 4, Wouldn't we always get the same number on line 4?  However when I run the code, it gives the correct results of [13,2].</p>\n<pre><code>1    class Solution {\n2    public int[] constructRectangle(int area) {\n3        for(int w=(int)Math.sqrt(area);w&gt;0;w--){\n4           if((area/w)*w==area)return new int[]{area/w,w};\n       }return new int[]{};\n    }\n }\n</code></pre>\n"},{"tags":["java","json","spring","date","jackson"],"comments":[{"owner":{"account_id":6034200,"reputation":158,"user_id":8285132,"display_name":"Vladimir Krylov"},"score":1,"creation_date":1664808364,"post_id":73936828,"comment_id":130550152,"body_markdown":"Can you use LocalDate?","body":"Can you use LocalDate?"},{"owner":{"account_id":11296302,"reputation":2929,"user_id":8283737,"accept_rate":89,"display_name":"Arun Gowda"},"score":0,"creation_date":1664810825,"post_id":73936828,"comment_id":130550893,"body_markdown":"My main objective was to compare dates by nullifying time. But that was a dumb idea and has better ways to do that. Now I&#39;m just curious about the behavior.","body":"My main objective was to compare dates by nullifying time. But that was a dumb idea and has better ways to do that. Now I&#39;m just curious about the behavior."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1664824702,"post_id":73936828,"comment_id":130555140,"body_markdown":"I strongly recommend you don’t use `Date`. That class is poorly designed and long outdated. Instead use `LocalDate` or `LocalDateTime`; both are from [java.time, the modern Java date and time API](https://docs.oracle.com/javase/tutorial/datetime/). I still more stringly strongly recommend you don’t use `SimpleDateFormat`. It’s notoriously troublesome and equally outdated.","body":"I strongly recommend you don’t use <code>Date</code>. That class is poorly designed and long outdated. Instead use <code>LocalDate</code> or <code>LocalDateTime</code>; both are from <a href=\"https://docs.oracle.com/javase/tutorial/datetime/\" rel=\"nofollow noreferrer\">java.time, the modern Java date and time API</a>. I still more stringly strongly recommend you don’t use <code>SimpleDateFormat</code>. It’s notoriously troublesome and equally outdated."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":2,"creation_date":1664824924,"post_id":73936828,"comment_id":130555198,"body_markdown":"`05:30:00 IST` is not *some random time*. It is your offset from UTC. Fri Sep 30 05:30:00 IST 2022 equals Fri Sep 30 00:00:00 UTC 2022. Your real problem is that a `Date` is very far from living up to its name: it cannot hold a date neither with nor without time of day. It’s a point in time, and at that point in time the time of day (and also the date) differ across time zones. So there is no true such thing as setting the time to 00:00:00. The solution is to drop that class.","body":"<code>05:30:00 IST</code> is not <i>some random time</i>. It is your offset from UTC. Fri Sep 30 05:30:00 IST 2022 equals Fri Sep 30 00:00:00 UTC 2022. Your real problem is that a <code>Date</code> is very far from living up to its name: it cannot hold a date neither with nor without time of day. It’s a point in time, and at that point in time the time of day (and also the date) differ across time zones. So there is no true such thing as setting the time to 00:00:00. The solution is to drop that class."}],"answers":[{"comments":[{"owner":{"account_id":11296302,"reputation":2929,"user_id":8283737,"accept_rate":89,"display_name":"Arun Gowda"},"score":0,"creation_date":1664816196,"post_id":73938057,"comment_id":130552640,"body_markdown":"So `java.util.date` is too outdated to use? Wonder why haven&#39;t they deprecated it yet.","body":"So <code>java.util.date</code> is too outdated to use? Wonder why haven&#39;t they deprecated it yet."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1664825182,"post_id":73938057,"comment_id":130555266,"body_markdown":"I guess the reason why they haven’t officially deprecated it yet is there are still a number of methods in the JDK that require or return a `Date` object. So long as they haven’t upgraded those methods to java.time — which is a major task — they cannot reasonably tell us never to use `Date`. We should still only use it when calling one of those methods and only convert to `Date` right before calling the method.","body":"I guess the reason why they haven’t officially deprecated it yet is there are still a number of methods in the JDK that require or return a <code>Date</code> object. So long as they haven’t upgraded those methods to java.time — which is a major task — they cannot reasonably tell us never to use <code>Date</code>. We should still only use it when calling one of those methods and only convert to <code>Date</code> right before calling the method."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":2,"creation_date":1664825331,"post_id":73938057,"comment_id":130555306,"body_markdown":"What I cannot understand either is why they haven’t put a note in the documentation similar to this one for `StringTokenizer`: *`StringTokenizer` is a legacy class that is retained for compatibility reasons although its use is discouraged in new code. …*","body":"What I cannot understand either is why they haven’t put a note in the documentation similar to this one for <code>StringTokenizer</code>: <i><code>StringTokenizer</code> is a legacy class that is retained for compatibility reasons although its use is discouraged in new code. …</i>"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1664825428,"post_id":73938057,"comment_id":130555331,"body_markdown":"At least [the official Oracle tutorial](https://docs.oracle.com/javase/tutorial/datetime/index.html) is very clear in that it only shows the use of java.time. The only mention of `Date` is how you convert to and from `Date` when you need to interact with legacy code the way I just described in my first comment.","body":"At least <a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">the official Oracle tutorial</a> is very clear in that it only shows the use of java.time. The only mention of <code>Date</code> is how you convert to and from <code>Date</code> when you need to interact with legacy code the way I just described in my first comment."}],"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":4,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1664900511,"creation_date":1664813321,"answer_id":73938057,"question_id":73936828,"body_markdown":"# Avoid legacy date-time classes\r\n\r\nThe terrible `java.util.Date` class was years ago supplanted by the modern *java.time* classes defined in JSR 310.\r\n\r\nAmong the many flaws in that class, the name `Date` is a misnomer. The class represents a moment as seen with an offset of zero hours-minutes-seconds from UTC. So it always has a time of day, plus the offset of zero. \r\n\r\n# `java.time.LocalDate`\r\n\r\nIf you want to represent a date-only value, without time of day, and without offset or time zone, use the modern class [`java.time.LocalDate`][1].\r\n\r\n# Determining a date from a moment\r\n\r\nWhen handed a `java.util.Date` object, immediately convert to its modern replacement, [`java.time.Instant`][2]. Use the new conversion methods added to the old classes. \r\n\r\n    Instant instant = myJavaUtilDate.toInstant() ; \r\n\r\nTo determine a date, you must specify a time zone. For any given moment, the date varies around the globe by time zone. “Tomorrow” in `Asia/Tokyo` is simultaneously “yesterday” in `America/Edmonton`. \r\n\r\n    ZoneId z = ZoneId.of( &quot;Africa/Tunis&quot; ) ;  // Specify your time zone of interest.\r\n    ZonedDateTime zdt = instant.atZone( z ) ;\r\n\r\nExtract your desired date-only value.\r\n\r\n    LocalDate ld = zdt.toLocalDate() ; \r\n\r\nCompare `LocalDate` objects using `isEqual`, `isBefore`, and `isAfter` methods.\r\n\r\nSearch to learn more. All this has been covered many times on Stack Overflow.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalDate.html\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/Instant.html","title":"Jackson desrialize date: ignore time/set time to 0","body":"<h1>Avoid legacy date-time classes</h1>\n<p>The terrible <code>java.util.Date</code> class was years ago supplanted by the modern <em>java.time</em> classes defined in JSR 310.</p>\n<p>Among the many flaws in that class, the name <code>Date</code> is a misnomer. The class represents a moment as seen with an offset of zero hours-minutes-seconds from UTC. So it always has a time of day, plus the offset of zero.</p>\n<h1><code>java.time.LocalDate</code></h1>\n<p>If you want to represent a date-only value, without time of day, and without offset or time zone, use the modern class <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalDate.html\" rel=\"nofollow noreferrer\"><code>java.time.LocalDate</code></a>.</p>\n<h1>Determining a date from a moment</h1>\n<p>When handed a <code>java.util.Date</code> object, immediately convert to its modern replacement, <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/Instant.html\" rel=\"nofollow noreferrer\"><code>java.time.Instant</code></a>. Use the new conversion methods added to the old classes.</p>\n<pre><code>Instant instant = myJavaUtilDate.toInstant() ; \n</code></pre>\n<p>To determine a date, you must specify a time zone. For any given moment, the date varies around the globe by time zone. “Tomorrow” in <code>Asia/Tokyo</code> is simultaneously “yesterday” in <code>America/Edmonton</code>.</p>\n<pre><code>ZoneId z = ZoneId.of( &quot;Africa/Tunis&quot; ) ;  // Specify your time zone of interest.\nZonedDateTime zdt = instant.atZone( z ) ;\n</code></pre>\n<p>Extract your desired date-only value.</p>\n<pre><code>LocalDate ld = zdt.toLocalDate() ; \n</code></pre>\n<p>Compare <code>LocalDate</code> objects using <code>isEqual</code>, <code>isBefore</code>, and <code>isAfter</code> methods.</p>\n<p>Search to learn more. All this has been covered many times on Stack Overflow.</p>\n"}],"owner":{"account_id":11296302,"reputation":2929,"user_id":8283737,"accept_rate":89,"display_name":"Arun Gowda"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":691,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73938057,"answer_count":1,"score":1,"last_activity_date":1675819817,"creation_date":1664806839,"question_id":73936828,"body_markdown":"Below is my list of json objects:\r\n\r\n```\r\n[\r\n    {\r\n        &quot;Date&quot;: &quot;2022-04-06T00:00:00&quot;\r\n    },\r\n    {\r\n        &quot;Date&quot;: &quot;2022-12-06T00:00:00&quot;\r\n    }\r\n]\r\n```\r\n\r\nand my POJO:\r\n\r\n```\r\n@Data\r\npublic class MyPojo {\r\n\r\n    @JsonProperty(&quot;Date&quot;)\r\n    @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;yyyy-MM-dd&quot;)\r\n    private Date date;\r\n}\r\n```\r\n\r\nDeserialization code:\r\n\r\n```\r\npublic &lt;T&gt; List&lt;T&gt; toObjList(String json, Class&lt;T&gt; className) {\r\n        try {\r\n            return new ObjectMapper().readValue(json, objectMapper.getTypeFactory().constructCollectionType(List.class, className));\r\n        } catch (Exception ex) {\r\n            log.error(&quot;Exception converting json to Object: {}&quot;, json);\r\n            throw new AppException(&quot;Exception while converting String to Object list&quot;, ex, HttpStatus.INTERNAL_SERVER_ERROR);\r\n        }\r\n    }\r\n\r\n```\r\n\r\nMy problem is, despite omitting the time in `jsonFormat` pattern, I see that some random time is added to each date. I printed the serialized dates and following was the output:\r\n\r\n&gt; (date=Fri Sep 30 05:30:00 IST 2022)\r\n\r\nI tried parsing a date with simleDateFormat and it seemed to parse excluding the time.\r\n\r\n```\r\nString input = &quot;2022-09-30T00:00:00&quot;;\r\nSimpleDateFormat parser = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);\r\nDate date = parser.parse(input);\r\nSystem.out.println(date);\r\n```\r\n\r\nThis gave an expected output \r\n&gt; Fri Sep 30 00:00:00 IST 2022","title":"Jackson desrialize date: ignore time/set time to 0","body":"<p>Below is my list of json objects:</p>\n<pre><code>[\n    {\n        &quot;Date&quot;: &quot;2022-04-06T00:00:00&quot;\n    },\n    {\n        &quot;Date&quot;: &quot;2022-12-06T00:00:00&quot;\n    }\n]\n</code></pre>\n<p>and my POJO:</p>\n<pre><code>@Data\npublic class MyPojo {\n\n    @JsonProperty(&quot;Date&quot;)\n    @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;yyyy-MM-dd&quot;)\n    private Date date;\n}\n</code></pre>\n<p>Deserialization code:</p>\n<pre><code>public &lt;T&gt; List&lt;T&gt; toObjList(String json, Class&lt;T&gt; className) {\n        try {\n            return new ObjectMapper().readValue(json, objectMapper.getTypeFactory().constructCollectionType(List.class, className));\n        } catch (Exception ex) {\n            log.error(&quot;Exception converting json to Object: {}&quot;, json);\n            throw new AppException(&quot;Exception while converting String to Object list&quot;, ex, HttpStatus.INTERNAL_SERVER_ERROR);\n        }\n    }\n\n</code></pre>\n<p>My problem is, despite omitting the time in <code>jsonFormat</code> pattern, I see that some random time is added to each date. I printed the serialized dates and following was the output:</p>\n<blockquote>\n<p>(date=Fri Sep 30 05:30:00 IST 2022)</p>\n</blockquote>\n<p>I tried parsing a date with simleDateFormat and it seemed to parse excluding the time.</p>\n<pre><code>String input = &quot;2022-09-30T00:00:00&quot;;\nSimpleDateFormat parser = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);\nDate date = parser.parse(input);\nSystem.out.println(date);\n</code></pre>\n<p>This gave an expected output</p>\n<blockquote>\n<p>Fri Sep 30 00:00:00 IST 2022</p>\n</blockquote>\n"},{"tags":["java","spring","spring-boot","junit","spring-retry"],"comments":[{"owner":{"account_id":24762833,"reputation":11,"user_id":18647003,"display_name":"Soorya2121"},"score":0,"creation_date":1649901244,"post_id":71849077,"comment_id":126994633,"body_markdown":"@cliff2310 sure..Will do","body":"@cliff2310 sure..Will do"}],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649799506,"creation_date":1649799506,"answer_id":71849414,"question_id":71849077,"body_markdown":"You need to use `@SpringJUnitConfig` (which is the equivalent of the JUnit4 runner). Or `@SpringBootTest` as you are using Boot.\r\n\r\n`@Retryable` only works with beans managed by Spring - it wraps the bean in a proxy.\r\n\r\n```java\r\n@SpringBootApplication\r\n@EnableRetry\r\npublic class So71849077Application {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(So71849077Application.class, args);\r\n\t}\r\n\r\n}\r\n\r\n@Component\r\nclass RetryableClass {\r\n\r\n\tprivate SomeService service;\r\n\r\n\tvoid setService(SomeService service) {\r\n\t\tthis.service = service;\r\n\t}\r\n\r\n\t@Retryable\r\n\tvoid retryableMethod(String in) {\r\n\t\tservice.callme();\r\n\t\tthrow new RuntimeException();\r\n\t}\r\n\r\n\t@Recover\r\n\tvoid recover(Exception ex, String  in) {\r\n\t\tservice.failed();\r\n\t}\r\n\r\n}\r\n\r\ninterface SomeService {\r\n\r\n\tvoid callme();\r\n\r\n\tvoid failed();\r\n\r\n}\r\n```\r\n```java\r\n@SpringBootTest\r\nclass So71849077ApplicationTests {\r\n\r\n\t@MockBean\r\n\tSomeService service;\r\n\r\n\t@Test\r\n\tvoid testRetry(@Autowired RetryableClass retryable) {\r\n\t\tSomeService service = mock(SomeService.class);\r\n\t\tretryable.setService(service);\r\n\r\n\t\tretryable.retryableMethod(&quot;foo&quot;);\r\n\t\tverify(service, times(3)).callme();\r\n\t\tverify(service).failed();\r\n\t}\r\n\r\n}\r\n```","title":"Retryable annotation - Junit5 - Mockito - is it possible","body":"<p>You need to use <code>@SpringJUnitConfig</code> (which is the equivalent of the JUnit4 runner). Or <code>@SpringBootTest</code> as you are using Boot.</p>\n<p><code>@Retryable</code> only works with beans managed by Spring - it wraps the bean in a proxy.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\n@EnableRetry\npublic class So71849077Application {\n\n    public static void main(String[] args) {\n        SpringApplication.run(So71849077Application.class, args);\n    }\n\n}\n\n@Component\nclass RetryableClass {\n\n    private SomeService service;\n\n    void setService(SomeService service) {\n        this.service = service;\n    }\n\n    @Retryable\n    void retryableMethod(String in) {\n        service.callme();\n        throw new RuntimeException();\n    }\n\n    @Recover\n    void recover(Exception ex, String  in) {\n        service.failed();\n    }\n\n}\n\ninterface SomeService {\n\n    void callme();\n\n    void failed();\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest\nclass So71849077ApplicationTests {\n\n    @MockBean\n    SomeService service;\n\n    @Test\n    void testRetry(@Autowired RetryableClass retryable) {\n        SomeService service = mock(SomeService.class);\n        retryable.setService(service);\n\n        retryable.retryableMethod(&quot;foo&quot;);\n        verify(service, times(3)).callme();\n        verify(service).failed();\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11517065,"reputation":203,"user_id":8440134,"display_name":"rajkumar21"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675818701,"creation_date":1675818701,"answer_id":75380496,"question_id":71849077,"body_markdown":"I was also trying to implement this using Junit5.\r\n\r\nTried various options but that didn&#39;t help. Then after googling for few hours, got the following link and it helped to succeed.\r\n\r\nhttps://doctorjw.wordpress.com/2022/04/29/spring-testing-a-single-bean-in-junit-5-springextension/\r\n\r\nReference code below, for detailed explanation, please refer the blog.\r\n\r\n    @Component\r\n    public class MyClass {\r\n    private ObjectMapper objectMapper;\r\n\r\n    private RestTemplate restTemplate;\r\n\r\n    @Value(&quot;${testValue:5}&quot;)\r\n    private int value;\r\n\r\n\r\n    @Retryable(....)\r\n    public void doStuff() throws SomeException {\r\n    ...\r\n    }\r\n    }\r\nWhat I’ve discovered is, if I declare my test class this way:\r\n\r\n    @ExtendWith( SpringExtension.class )\r\n    @Import( { MyClass.class, ObjectMapper.class } )\r\n    @EnableRetry\r\n    public class MyClassTest {\r\n\r\n    @Autowired\r\n    private MyClass myClass;\r\n\r\n    @MockBean\r\n    private RestTemplate restTemplate;\r\n\r\n    @Autowired\r\n    private ObjectMapper objectMapper;\r\n\r\n    @BeforeEach\r\n    public void setup() {\r\n        // If we are going to jack with the object configuration,\r\n        // we need to do so on the actual object, not the Spring proxy.\r\n        // So, use AopTestUtils to get around the proxy to the actual obj.\r\n\r\n        TestingUtils.setFieldValue( AopTestUtils.getTargetObject( myClass ), &quot;value&quot;, 10 );\r\n    }\r\n\r\n    }\r\nYou will notice the inclusion of 1 other class, TestingUtils.class. This class looks like:\r\n\r\n\r\n    public class TestingUtils {\r\n\r\n    public static void setFieldValue( Object object, String fieldName, Object value ) {\r\n        Field field = ReflectionUtils.findField( object.getClass(), fieldName );\r\n        ReflectionUtils.makeAccessible( field );\r\n\r\n        ReflectionUtils.setField( field, object, value );\r\n    }\r\n    }\r\n \r\nAll credits goes to the author of the blog. ","title":"Retryable annotation - Junit5 - Mockito - is it possible","body":"<p>I was also trying to implement this using Junit5.</p>\n<p>Tried various options but that didn't help. Then after googling for few hours, got the following link and it helped to succeed.</p>\n<p><a href=\"https://doctorjw.wordpress.com/2022/04/29/spring-testing-a-single-bean-in-junit-5-springextension/\" rel=\"nofollow noreferrer\">https://doctorjw.wordpress.com/2022/04/29/spring-testing-a-single-bean-in-junit-5-springextension/</a></p>\n<p>Reference code below, for detailed explanation, please refer the blog.</p>\n<pre><code>@Component\npublic class MyClass {\nprivate ObjectMapper objectMapper;\n\nprivate RestTemplate restTemplate;\n\n@Value(&quot;${testValue:5}&quot;)\nprivate int value;\n\n\n@Retryable(....)\npublic void doStuff() throws SomeException {\n...\n}\n}\n</code></pre>\n<p>What I’ve discovered is, if I declare my test class this way:</p>\n<pre><code>@ExtendWith( SpringExtension.class )\n@Import( { MyClass.class, ObjectMapper.class } )\n@EnableRetry\npublic class MyClassTest {\n\n@Autowired\nprivate MyClass myClass;\n\n@MockBean\nprivate RestTemplate restTemplate;\n\n@Autowired\nprivate ObjectMapper objectMapper;\n\n@BeforeEach\npublic void setup() {\n    // If we are going to jack with the object configuration,\n    // we need to do so on the actual object, not the Spring proxy.\n    // So, use AopTestUtils to get around the proxy to the actual obj.\n\n    TestingUtils.setFieldValue( AopTestUtils.getTargetObject( myClass ), &quot;value&quot;, 10 );\n}\n\n}\n</code></pre>\n<p>You will notice the inclusion of 1 other class, TestingUtils.class. This class looks like:</p>\n<pre><code>public class TestingUtils {\n\npublic static void setFieldValue( Object object, String fieldName, Object value ) {\n    Field field = ReflectionUtils.findField( object.getClass(), fieldName );\n    ReflectionUtils.makeAccessible( field );\n\n    ReflectionUtils.setField( field, object, value );\n}\n}\n</code></pre>\n<p>All credits goes to the author of the blog.</p>\n"}],"owner":{"account_id":24762833,"reputation":11,"user_id":18647003,"display_name":"Soorya2121"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2018,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1675818701,"creation_date":1649797353,"question_id":71849077,"body_markdown":"Is it possible to write unit test using Junit 5 mockito for retryable annotations?\r\n\r\nI am having a service interface which has only one method, which downloads the file from remote url\r\n\r\n    @service\r\n    interface downloadpdf{\r\n    @Retryable(value = { FileNotFoundException.class, HttpClientErrorException.class }, maxAttempts = 5, backoff = @Backoff(delay = 1000))\r\n    public string downloadpdffile(string remoteurl, string pdfname);\t\r\n    }\r\n\r\nI have tried referring sites and found using Spring4JunitRunner implementation to test retry. Got confused with implementation. Is it possible to write unit test using Junit 5 mockito for retryable annotations?. Could you please elaborate on the solution here?","title":"Retryable annotation - Junit5 - Mockito - is it possible","body":"<p>Is it possible to write unit test using Junit 5 mockito for retryable annotations?</p>\n<p>I am having a service interface which has only one method, which downloads the file from remote url</p>\n<pre><code>@service\ninterface downloadpdf{\n@Retryable(value = { FileNotFoundException.class, HttpClientErrorException.class }, maxAttempts = 5, backoff = @Backoff(delay = 1000))\npublic string downloadpdffile(string remoteurl, string pdfname);    \n}\n</code></pre>\n<p>I have tried referring sites and found using Spring4JunitRunner implementation to test retry. Got confused with implementation. Is it possible to write unit test using Junit 5 mockito for retryable annotations?. Could you please elaborate on the solution here?</p>\n"},{"tags":["java","string","printing"],"answers":[{"tags":[],"owner":{"account_id":3415144,"reputation":23576,"user_id":2864275,"display_name":"Iłya Bursov"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1675816469,"creation_date":1675816469,"answer_id":75380349,"question_id":75380294,"body_markdown":"your approach does not work because you&#39;re just checking presence of the letter in message, but completely ignoring its position\r\n\r\nprobably something like that is simpler:\r\n\r\n    public static void main(String[] args) {\r\n        System.out.println(&quot;Enter the message you would like to see in reverse: &quot;);\r\n\r\n        Scanner scanner = new Scanner(System.in);\r\n        String message = scanner.nextLine().toUpperCase();\r\n\r\n        for (char letter: message.toCharArray()) {\r\n            if (letter &gt;= &#39;A&#39; &amp;&amp; letter &lt;= &#39;Z&#39;) {\r\n                letter = (char) (&#39;Z&#39; - (letter - &#39;A&#39;));\r\n            }\r\n            System.out.print(letter);\r\n        }\r\n        System.out.println();\r\n    }","title":"Repeating characters in string do not send","body":"<p>your approach does not work because you're just checking presence of the letter in message, but completely ignoring its position</p>\n<p>probably something like that is simpler:</p>\n<pre><code>public static void main(String[] args) {\n    System.out.println(&quot;Enter the message you would like to see in reverse: &quot;);\n\n    Scanner scanner = new Scanner(System.in);\n    String message = scanner.nextLine().toUpperCase();\n\n    for (char letter: message.toCharArray()) {\n        if (letter &gt;= 'A' &amp;&amp; letter &lt;= 'Z') {\n            letter = (char) ('Z' - (letter - 'A'));\n        }\n        System.out.print(letter);\n    }\n    System.out.println();\n}\n</code></pre>\n"}],"owner":{"account_id":20410543,"reputation":9,"user_id":14974062,"display_name":"Smart Gamer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":75380349,"answer_count":1,"score":-2,"last_activity_date":1675816469,"creation_date":1675815688,"question_id":75380294,"body_markdown":"Hi so I know there is most likely a way better way to write this that is more efficient but I am just playing around with Java and am making a program where if you type a work it is the same work but the letter opposite in the alphabet. The problem I am having is that repeating letters do not repeat in the execution of the program. Is there a way to fix it? Here is the program\r\n\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class App {\r\n \r\n    public static void main(String[] args) {\r\n\r\n        Scanner scanner = new Scanner(System.in);\r\n \r\n        char A = &#39;Z&#39;;\r\n        char B = &#39;Y&#39;;\r\n        char C = &#39;X&#39;;\r\n        char D = &#39;W&#39;;\r\n        char E = &#39;V&#39;;\r\n        char F = &#39;U&#39;;\r\n        char G = &#39;T&#39;;\r\n        char H = &#39;S&#39;;\r\n        char I = &#39;R&#39;;\r\n        char J = &#39;Q&#39;;\r\n        char K = &#39;P&#39;;\r\n        char L = &#39;O&#39;;\r\n        char M = &#39;N&#39;;\r\n        char N = &#39;M&#39;;\r\n        char O = &#39;L&#39;;\r\n        char P = &#39;K&#39;;\r\n        char Q = &#39;J&#39;;\r\n        char R = &#39;I&#39;;\r\n        char S = &#39;H&#39;;\r\n        char T = &#39;G&#39;;\r\n        char U = &#39;F&#39;;\r\n        char V = &#39;E&#39;;\r\n        char W = &#39;D&#39;;\r\n        char X = &#39;C&#39;;\r\n        char Y = &#39;B&#39;;\r\n        char Z = &#39;A&#39;;\r\n \r\n        System.out.println(&quot;Enter the message you would like to see in reverse: &quot;);\r\n        String message = scanner.nextLine().toUpperCase();\r\n\r\n\r\n        if (new String(message).contains(&quot;A&quot;)) {\r\n            System.out.print(A);\r\n        }\r\n        if (new String(message).contains(&quot;B&quot;)) {\r\n            System.out.print(B);\r\n        }\r\n        if (new String(message).contains(&quot;C&quot;)) {\r\n            System.out.print(C);\r\n        }\r\n        if (new String(message).contains(&quot;D&quot;)) {\r\n            System.out.print(D);\r\n        }\r\n        if (new String(message).contains(&quot;E&quot;)) {\r\n            System.out.print(E);\r\n        }\r\n        if (new String(message).contains(&quot;F&quot;)) {\r\n            System.out.print(F);\r\n        }\r\n        if (new String(message).contains(&quot;G&quot;)) {\r\n            System.out.print(G);\r\n        }\r\n        if (new String(message).contains(&quot;H&quot;)) {\r\n            System.out.print(H);\r\n        }\r\n        if (new String(message).contains(&quot;I&quot;)) {\r\n            System.out.print(I);\r\n        }\r\n        if (new String(message).contains(&quot;J&quot;)) {\r\n            System.out.print(J);\r\n        }\r\n        if (new String(message).contains(&quot;K&quot;)) {\r\n            System.out.print(K);\r\n        }\r\n        if (new String(message).contains(&quot;L&quot;)) {\r\n            System.out.print(L);\r\n        }\r\n        if (new String(message).contains(&quot;M&quot;)) {\r\n            System.out.print(M);\r\n        }\r\n        if (new String(message).contains(&quot;N&quot;)) {\r\n            System.out.print(N);\r\n        }\r\n        if (new String(message).contains(&quot;O&quot;)) {\r\n            System.out.print(O);\r\n        }\r\n        if (new String(message).contains(&quot;P&quot;)) {\r\n            System.out.print(P);\r\n        }\r\n        if (new String(message).contains(&quot;Q&quot;)) {\r\n            System.out.print(Q);\r\n        }\r\n        if (new String(message).contains(&quot;R&quot;)) {\r\n            System.out.print(R);\r\n        }\r\n        if (new String(message).contains(&quot;S&quot;)) {\r\n            System.out.print(S);\r\n        }\r\n        if (new String(message).contains(&quot;T&quot;)) {\r\n            System.out.print(T);\r\n        }\r\n        if (new String(message).contains(&quot;U&quot;)) {\r\n            System.out.print(U);\r\n        }\r\n        if (new String(message).contains(&quot;V&quot;)) {\r\n            System.out.print(V);\r\n        }\r\n        if (new String(message).contains(&quot;W&quot;)) {\r\n            System.out.print(W);\r\n        }\r\n        if (new String(message).contains(&quot;X&quot;)) {\r\n            System.out.print(X);\r\n        }\r\n        if (new String(message).contains(&quot;Y&quot;)) {\r\n            System.out.print(Y);\r\n        }\r\n        if (new String(message).contains(&quot;Z&quot;)) {\r\n            System.out.print(Z);\r\n        }\r\n\r\n \r\n    }\r\n}\r\n```","title":"Repeating characters in string do not send","body":"<p>Hi so I know there is most likely a way better way to write this that is more efficient but I am just playing around with Java and am making a program where if you type a work it is the same work but the letter opposite in the alphabet. The problem I am having is that repeating letters do not repeat in the execution of the program. Is there a way to fix it? Here is the program</p>\n<pre><code>import java.util.Scanner;\n\npublic class App {\n \n    public static void main(String[] args) {\n\n        Scanner scanner = new Scanner(System.in);\n \n        char A = 'Z';\n        char B = 'Y';\n        char C = 'X';\n        char D = 'W';\n        char E = 'V';\n        char F = 'U';\n        char G = 'T';\n        char H = 'S';\n        char I = 'R';\n        char J = 'Q';\n        char K = 'P';\n        char L = 'O';\n        char M = 'N';\n        char N = 'M';\n        char O = 'L';\n        char P = 'K';\n        char Q = 'J';\n        char R = 'I';\n        char S = 'H';\n        char T = 'G';\n        char U = 'F';\n        char V = 'E';\n        char W = 'D';\n        char X = 'C';\n        char Y = 'B';\n        char Z = 'A';\n \n        System.out.println(&quot;Enter the message you would like to see in reverse: &quot;);\n        String message = scanner.nextLine().toUpperCase();\n\n\n        if (new String(message).contains(&quot;A&quot;)) {\n            System.out.print(A);\n        }\n        if (new String(message).contains(&quot;B&quot;)) {\n            System.out.print(B);\n        }\n        if (new String(message).contains(&quot;C&quot;)) {\n            System.out.print(C);\n        }\n        if (new String(message).contains(&quot;D&quot;)) {\n            System.out.print(D);\n        }\n        if (new String(message).contains(&quot;E&quot;)) {\n            System.out.print(E);\n        }\n        if (new String(message).contains(&quot;F&quot;)) {\n            System.out.print(F);\n        }\n        if (new String(message).contains(&quot;G&quot;)) {\n            System.out.print(G);\n        }\n        if (new String(message).contains(&quot;H&quot;)) {\n            System.out.print(H);\n        }\n        if (new String(message).contains(&quot;I&quot;)) {\n            System.out.print(I);\n        }\n        if (new String(message).contains(&quot;J&quot;)) {\n            System.out.print(J);\n        }\n        if (new String(message).contains(&quot;K&quot;)) {\n            System.out.print(K);\n        }\n        if (new String(message).contains(&quot;L&quot;)) {\n            System.out.print(L);\n        }\n        if (new String(message).contains(&quot;M&quot;)) {\n            System.out.print(M);\n        }\n        if (new String(message).contains(&quot;N&quot;)) {\n            System.out.print(N);\n        }\n        if (new String(message).contains(&quot;O&quot;)) {\n            System.out.print(O);\n        }\n        if (new String(message).contains(&quot;P&quot;)) {\n            System.out.print(P);\n        }\n        if (new String(message).contains(&quot;Q&quot;)) {\n            System.out.print(Q);\n        }\n        if (new String(message).contains(&quot;R&quot;)) {\n            System.out.print(R);\n        }\n        if (new String(message).contains(&quot;S&quot;)) {\n            System.out.print(S);\n        }\n        if (new String(message).contains(&quot;T&quot;)) {\n            System.out.print(T);\n        }\n        if (new String(message).contains(&quot;U&quot;)) {\n            System.out.print(U);\n        }\n        if (new String(message).contains(&quot;V&quot;)) {\n            System.out.print(V);\n        }\n        if (new String(message).contains(&quot;W&quot;)) {\n            System.out.print(W);\n        }\n        if (new String(message).contains(&quot;X&quot;)) {\n            System.out.print(X);\n        }\n        if (new String(message).contains(&quot;Y&quot;)) {\n            System.out.print(Y);\n        }\n        if (new String(message).contains(&quot;Z&quot;)) {\n            System.out.print(Z);\n        }\n\n \n    }\n}\n</code></pre>\n"},{"tags":["java","java-8","payara","payara-micro"],"comments":[{"owner":{"account_id":2734183,"reputation":715,"user_id":2357209,"display_name":"Onur Başt&#252;rk"},"score":1,"creation_date":1602678348,"post_id":64348698,"comment_id":113795586,"body_markdown":"First try updating Netbeans cos there are some issues related with this https://github.com/payara/ecosystem-netbeans-plugin/issues/16","body":"First try updating Netbeans cos there are some issues related with this <a href=\"https://github.com/payara/ecosystem-netbeans-plugin/issues/16\" rel=\"nofollow noreferrer\">github.com/payara/ecosystem-netbeans-plugin/issues/16</a>"},{"owner":{"account_id":411863,"reputation":7400,"user_id":784594,"display_name":"OndroMih"},"score":0,"creation_date":1602710146,"post_id":64348698,"comment_id":113810139,"body_markdown":"This type of error is triggered by Payara Server and not Payara Micro. Aren&#39;t you working with Payara Server? Payara Micro is just a JAR file that you execute on command line, via a maven plugin or add to your classpath.","body":"This type of error is triggered by Payara Server and not Payara Micro. Aren&#39;t you working with Payara Server? Payara Micro is just a JAR file that you execute on command line, via a maven plugin or add to your classpath."}],"answers":[{"tags":[],"owner":{"account_id":411863,"reputation":7400,"user_id":784594,"display_name":"OndroMih"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1602710042,"creation_date":1602710042,"answer_id":64361591,"question_id":64348698,"body_markdown":"This is due to a change in Payara Server configuration that&#39;s not compatible with how the older version of the Netbeans Payara (GlassFish) plugin launches Payara Server. The plugin uses a hacky mechanism that reads the domain configuration and launches the Java process of Payara Server directly instead of using the asadmin launcher. \r\n\r\nYou can easily fix this by editing the `domain.xml` file in `glassfish/domains/domain1/config/domain.xml`. Just remove all jvm-option elements where you find `[` and `]` brackets. These define the Java version for which the JVM option is applicable. Usually this is for running on JDK 9+, so it&#39;s safe to remove those options if you run on Java 8.\r\n\r\nSo, remove this option and all similar options:\r\n\r\n```\r\n&lt;jvm-option&gt;[9|]--add-opens=java.logging.java.util.logging=ALL-UNNAMED&lt;/jvm-option&gt;\r\n```\r\n\r\nUpgrading Netbeans to the latest version 12.1 also fixes this problem as Netbeans has been updated to understand this change in the configuration.","title":"Payara 5.2020.4 didn&#39;t start","body":"<p>This is due to a change in Payara Server configuration that's not compatible with how the older version of the Netbeans Payara (GlassFish) plugin launches Payara Server. The plugin uses a hacky mechanism that reads the domain configuration and launches the Java process of Payara Server directly instead of using the asadmin launcher.</p>\n<p>You can easily fix this by editing the <code>domain.xml</code> file in <code>glassfish/domains/domain1/config/domain.xml</code>. Just remove all jvm-option elements where you find <code>[</code> and <code>]</code> brackets. These define the Java version for which the JVM option is applicable. Usually this is for running on JDK 9+, so it's safe to remove those options if you run on Java 8.</p>\n<p>So, remove this option and all similar options:</p>\n<pre><code>&lt;jvm-option&gt;[9|]--add-opens=java.logging.java.util.logging=ALL-UNNAMED&lt;/jvm-option&gt;\n</code></pre>\n<p>Upgrading Netbeans to the latest version 12.1 also fixes this problem as Netbeans has been updated to understand this change in the configuration.</p>\n"},{"tags":[],"owner":{"account_id":23610238,"reputation":31,"user_id":17645366,"display_name":"zeelog"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1643228336,"creation_date":1643221227,"answer_id":70868413,"question_id":64348698,"body_markdown":"I have got a similar problem with **jdk1.8.0_311** , **payara-5.2021.10** on **netbeans 8.2** . payara start successfully in a terminal with command :\r\n\r\n    glassfish/bin/asadmin start-domain\r\n\r\n , but when I start the server inside netbeans, i have some errors :\r\n\r\n    Unrecognized VM option &#39;UseOpenJSSE&#39;\r\n    Unrecognized VM option &#39;HotswapAgent=core&#39;\r\n    Unrecognized option: -Xlog:redefine+class*=info\r\n\r\nThe solution by *OndroMih* works fine.\r\nI have removed this lines in domain.xml. &quot;`glassfish/domains/domain1/config/domain.xml`&quot;\r\n\r\n&gt;      &lt;jvm-options&gt;[Azul-1.8.0u222|1.8.0u260]-XX:+UseOpenJSSE&lt;/jvm-options&gt;\r\n&gt;      &lt;jvm-options&gt;[Dynamic Code Evolution-11.0.10|]-XX:HotswapAgent=core&lt;/jvm-options&gt;\r\n&gt;      &lt;jvm-options&gt;[Dynamic Code Evolution-11.0.10|]-Xlog:redefine+class*=info&lt;/jvm-options&gt;\r\n\r\nnow its ok","title":"Payara 5.2020.4 didn&#39;t start","body":"<p>I have got a similar problem with <strong>jdk1.8.0_311</strong> , <strong>payara-5.2021.10</strong> on <strong>netbeans 8.2</strong> . payara start successfully in a terminal with command :</p>\n<pre><code>glassfish/bin/asadmin start-domain\n</code></pre>\n<p>, but when I start the server inside netbeans, i have some errors :</p>\n<pre><code>Unrecognized VM option 'UseOpenJSSE'\nUnrecognized VM option 'HotswapAgent=core'\nUnrecognized option: -Xlog:redefine+class*=info\n</code></pre>\n<p>The solution by <em>OndroMih</em> works fine.\nI have removed this lines in domain.xml. &quot;<code>glassfish/domains/domain1/config/domain.xml</code>&quot;</p>\n<blockquote>\n<pre><code> &lt;jvm-options&gt;[Azul-1.8.0u222|1.8.0u260]-XX:+UseOpenJSSE&lt;/jvm-options&gt;\n &lt;jvm-options&gt;[Dynamic Code Evolution-11.0.10|]-XX:HotswapAgent=core&lt;/jvm-options&gt;\n &lt;jvm-options&gt;[Dynamic Code Evolution-11.0.10|]-Xlog:redefine+class*=info&lt;/jvm-options&gt;\n</code></pre>\n</blockquote>\n<p>now its ok</p>\n"},{"tags":[],"owner":{"account_id":11652598,"reputation":1,"user_id":8533422,"display_name":"Luis Caamano"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675816373,"creation_date":1675816373,"answer_id":75380342,"question_id":64348698,"body_markdown":"Solution to Payara 5.184 / Netbeans 8.2 / Java 8 Not launching Payara:\r\n\r\nin file:\r\n\\payara5\\glassfish\\domains\\domain1\\config\\domain.xml\r\n\r\nSearch for the unrecognized option UseOpenJSSE and comment that tag.\r\nRepeat for each occurrence.\r\n\r\nRepeat as well for subsequent errors might appear.\r\n\r\nGood Luck!","title":"Payara 5.2020.4 didn&#39;t start","body":"<p>Solution to Payara 5.184 / Netbeans 8.2 / Java 8 Not launching Payara:</p>\n<p>in file:\n\\payara5\\glassfish\\domains\\domain1\\config\\domain.xml</p>\n<p>Search for the unrecognized option UseOpenJSSE and comment that tag.\nRepeat for each occurrence.</p>\n<p>Repeat as well for subsequent errors might appear.</p>\n<p>Good Luck!</p>\n"}],"owner":{"account_id":1360906,"reputation":1738,"user_id":1298308,"accept_rate":80,"display_name":"Aminul"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2289,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1675816373,"creation_date":1602661224,"question_id":64348698,"body_markdown":"I&#39;ve **`jdk1.8.0_171`** installed on my windows 10, 64bit OS , yesterday I&#39;ve downloaded `Payara Micro Community 5.2020.4` and added the server on `Netbeans 8.2`  , but when I try to start the sever NetBeans Payara server log shows following error \r\n\r\n```\r\nError: Could not find or load main class [9|]--add-opens=java.logging.java.util.logging=ALL-UNNAMED\r\n```\r\nNeed clues to resolve this error \r\n\r\nThanks in advance ","title":"Payara 5.2020.4 didn&#39;t start","body":"<p>I've <strong><code>jdk1.8.0_171</code></strong> installed on my windows 10, 64bit OS , yesterday I've downloaded <code>Payara Micro Community 5.2020.4</code> and added the server on <code>Netbeans 8.2</code>  , but when I try to start the sever NetBeans Payara server log shows following error</p>\n<pre><code>Error: Could not find or load main class [9|]--add-opens=java.logging.java.util.logging=ALL-UNNAMED\n</code></pre>\n<p>Need clues to resolve this error</p>\n<p>Thanks in advance</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":18923575,"reputation":75,"user_id":13807161,"display_name":"Alexander Soiefer"},"score":0,"creation_date":1675815310,"post_id":75380242,"comment_id":133008984,"body_markdown":"Since accName, accNum, accType, and balance are decoded from the same data, I believe they cannot all be parsed at the same time without more specification.","body":"Since accName, accNum, accType, and balance are decoded from the same data, I believe they cannot all be parsed at the same time without more specification."},{"owner":{"account_id":17835,"reputation":303915,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1675815584,"post_id":75380242,"comment_id":133009025,"body_markdown":"Can you show us how the file was written?","body":"Can you show us how the file was written?"},{"owner":{"account_id":27393528,"reputation":353,"user_id":20896122,"display_name":"undefined symbol"},"score":0,"creation_date":1675816192,"post_id":75380242,"comment_id":133009108,"body_markdown":"You&#39;re writing e.g. the integer as a string of UTF-8 digits, and reading it as a 4-byte binary value. so everything goes to hell after that.  See the [documentation](https://docs.oracle.com/javase/7/docs/api/java/io/DataInput.html#readInt()) for readInt.","body":"You&#39;re writing e.g. the integer as a string of UTF-8 digits, and reading it as a 4-byte binary value. so everything goes to hell after that.  See the <a href=\"https://docs.oracle.com/javase/7/docs/api/java/io/DataInput.html#readInt()\" rel=\"nofollow noreferrer\">documentation</a> for readInt."},{"owner":{"account_id":26557336,"reputation":3,"user_id":20185739,"display_name":"gangrx"},"score":0,"creation_date":1675816399,"post_id":75380242,"comment_id":133009130,"body_markdown":"@undefinedsymbol so how would I fix this, im fairly new to java and im still trying to learn","body":"@undefinedsymbol so how would I fix this, im fairly new to java and im still trying to learn"},{"owner":{"account_id":27393528,"reputation":353,"user_id":20896122,"display_name":"undefined symbol"},"score":0,"creation_date":1675816921,"post_id":75380242,"comment_id":133009183,"body_markdown":"Decide whether you want your file to be binary (as its name suggests) or text (as your code actually writes).  Use matching read and write calls - writeInt for readInt, for example.  Above all, [read the documentation](https://docs.oracle.com/javase/8/docs/api/java/io/DataOutputStream.html) for every class you use.  I/O is a bit of a maze, it&#39;s true, but you can find your way around after a while.","body":"Decide whether you want your file to be binary (as its name suggests) or text (as your code actually writes).  Use matching read and write calls - writeInt for readInt, for example.  Above all, <a href=\"https://docs.oracle.com/javase/8/docs/api/java/io/DataOutputStream.html\" rel=\"nofollow noreferrer\">read the documentation</a> for every class you use.  I/O is a bit of a maze, it&#39;s true, but you can find your way around after a while."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1675816927,"post_id":75380242,"comment_id":133009185,"body_markdown":"If you particularly *need* to do this with binary data, you&#39;d be much better off using `ObjectInputStream` and read an `Account` object","body":"If you particularly <i>need</i> to do this with binary data, you&#39;d be much better off using <code>ObjectInputStream</code> and read an <code>Account</code> object"}],"owner":{"account_id":26557336,"reputation":3,"user_id":20185739,"display_name":"gangrx"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675815943,"creation_date":1675815113,"question_id":75380242,"body_markdown":"I am getting an EOFException and I&#39;m not sure why? I tried many things to figure it and changed my code up and directory, but it&#39;s not fixing.\r\n\r\nEdit: Added my writer code because this is confusing on why it is doing this, it is unusual \r\n\r\nI did other things like, catch the EOFException that didnt work, and I even tried to reading to it through the debugger, and the debugger shows that it read my first variable for accNum and then crashed right after.\r\n\r\n\r\n```\r\ntry {\r\n\r\n            DataInputStream read = new DataInputStream(new FileInputStream(&quot;accounts.bin&quot;));\r\n\r\n            while (read.available() &gt; 0) {\r\n\r\n                int accNum = read.readInt();\r\n                String accName = read.readUTF();\r\n                String accType = read.readUTF();\r\n                double balance = read.readDouble();\r\n\r\n                System.out.println(accNum + &quot; &quot; + accName + &quot; &quot; + accType + &quot; &quot; + balance);\r\n            }\r\n        } catch (IOException e ) {\r\n            System.out.println(&quot;File not found&quot;);\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n```\r\n try {\r\n\r\n            Scanner input = new Scanner(new File(&quot;accounts.txt&quot;));\r\n            int index = 0;\r\n            int accNum = 0;\r\n            String accName = &quot;&quot;;\r\n            double balance = 0;\r\n            String accType = &quot;&quot;;\r\n\r\n            ArrayList&lt;Account&gt; accounts = new ArrayList&lt;&gt;();\r\n\r\n            while (input.hasNextLine()) {\r\n                if (index == 0) {\r\n                    accNum = Integer.parseInt(input.nextLine());\r\n                    index++;\r\n                } else if (index == 1) {\r\n                    accName = input.nextLine();\r\n                    index++;\r\n                } else if (index == 2) {\r\n                    accType = input.nextLine();\r\n                    index++;\r\n                } else if (index == 3) {\r\n                    balance = Double.parseDouble(input.nextLine());\r\n\r\n                    accounts.add(new Account(accNum, accName, balance, accType));\r\n                    index = 0;\r\n                }\r\n            }\r\n\r\n            input.close();\r\n\r\n            FileOutputStream accountTxtFile = new FileOutputStream(&quot;accounts.bin&quot;);\r\n\r\n            DataOutputStream accountBinFile = new DataOutputStream(accountTxtFile);\r\n\r\n\r\n            for (Account accountObj : accounts) {\r\n\r\n                accountBinFile.writeUTF(Integer.toString(accountObj.getAccountNumber()));\r\n                accountBinFile.writeUTF(accountObj.getAccountHolderName());\r\n                accountBinFile.writeUTF(accountObj.getAccountType());\r\n                accountBinFile.writeUTF(Double.toString(accountObj.getBalance()));\r\n\r\n                // Checking my work lol\r\n                System.out.println(Integer.toString(accountObj.getAccountNumber()));\r\n                System.out.println(accountObj.getAccountHolderName());\r\n                System.out.println(accountObj.getAccountType());\r\n                System.out.println(Double.toString(accountObj.getBalance()));\r\n            }\r\n\r\n\r\n\r\n            accountBinFile.close();\r\n\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n\r\n        }\r\n\r\n    }\r\n}\r\n```","title":"EOFException trying to reading DataInputStream","body":"<p>I am getting an EOFException and I'm not sure why? I tried many things to figure it and changed my code up and directory, but it's not fixing.</p>\n<p>Edit: Added my writer code because this is confusing on why it is doing this, it is unusual</p>\n<p>I did other things like, catch the EOFException that didnt work, and I even tried to reading to it through the debugger, and the debugger shows that it read my first variable for accNum and then crashed right after.</p>\n<pre><code>try {\n\n            DataInputStream read = new DataInputStream(new FileInputStream(&quot;accounts.bin&quot;));\n\n            while (read.available() &gt; 0) {\n\n                int accNum = read.readInt();\n                String accName = read.readUTF();\n                String accType = read.readUTF();\n                double balance = read.readDouble();\n\n                System.out.println(accNum + &quot; &quot; + accName + &quot; &quot; + accType + &quot; &quot; + balance);\n            }\n        } catch (IOException e ) {\n            System.out.println(&quot;File not found&quot;);\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<pre><code> try {\n\n            Scanner input = new Scanner(new File(&quot;accounts.txt&quot;));\n            int index = 0;\n            int accNum = 0;\n            String accName = &quot;&quot;;\n            double balance = 0;\n            String accType = &quot;&quot;;\n\n            ArrayList&lt;Account&gt; accounts = new ArrayList&lt;&gt;();\n\n            while (input.hasNextLine()) {\n                if (index == 0) {\n                    accNum = Integer.parseInt(input.nextLine());\n                    index++;\n                } else if (index == 1) {\n                    accName = input.nextLine();\n                    index++;\n                } else if (index == 2) {\n                    accType = input.nextLine();\n                    index++;\n                } else if (index == 3) {\n                    balance = Double.parseDouble(input.nextLine());\n\n                    accounts.add(new Account(accNum, accName, balance, accType));\n                    index = 0;\n                }\n            }\n\n            input.close();\n\n            FileOutputStream accountTxtFile = new FileOutputStream(&quot;accounts.bin&quot;);\n\n            DataOutputStream accountBinFile = new DataOutputStream(accountTxtFile);\n\n\n            for (Account accountObj : accounts) {\n\n                accountBinFile.writeUTF(Integer.toString(accountObj.getAccountNumber()));\n                accountBinFile.writeUTF(accountObj.getAccountHolderName());\n                accountBinFile.writeUTF(accountObj.getAccountType());\n                accountBinFile.writeUTF(Double.toString(accountObj.getBalance()));\n\n                // Checking my work lol\n                System.out.println(Integer.toString(accountObj.getAccountNumber()));\n                System.out.println(accountObj.getAccountHolderName());\n                System.out.println(accountObj.getAccountType());\n                System.out.println(Double.toString(accountObj.getBalance()));\n            }\n\n\n\n            accountBinFile.close();\n\n        } catch (IOException e) {\n            e.printStackTrace();\n\n        }\n\n    }\n}\n</code></pre>\n"},{"tags":["java","netbeans","exe","urldecode"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1675680026,"post_id":75356909,"comment_id":132974168,"body_markdown":"Please post output as *text*, not pictures, and include the URL in question. For one thing, you don&#39;t specify the output encoding, which might not be what you think it is. Also please give Java version","body":"Please post output as <i>text</i>, not pictures, and include the URL in question. For one thing, you don&#39;t specify the output encoding, which might not be what you think it is. Also please give Java version"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1675769623,"post_id":75356909,"comment_id":132995858,"body_markdown":"Also, can you say how this .exe is being created and how are you specifying the string in the code?","body":"Also, can you say how this .exe is being created and how are you specifying the string in the code?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1675816596,"post_id":75356909,"comment_id":133009151,"body_markdown":"Still not quite sure where the cyrillic input is from nor where it&#39;s being url-encoded","body":"Still not quite sure where the cyrillic input is from nor where it&#39;s being url-encoded"}],"owner":{"account_id":27712098,"reputation":1,"user_id":21154558,"display_name":"Alvisa Rizky Rachman"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675815942,"creation_date":1675651248,"question_id":75356909,"body_markdown":"I tried to decode this url **%D0%9A%D1%80%D0%B0%D1%81%D0%B0%D0%B2%D0%B8%D1%86%D0%B5-%D0%BA%D0%BE%D1%82%D0%BE%D1%80%D0%B0%D1%8F-%D0%BD%D1%8E%D1%85%D0%B0%D0%BB%D0%B0-%D1%82%D0%B0%D0%B1%D0%B0%D0%BA**, but the result when writing the URL to a _.txt_ file was **Кра�?авице-котора�?-нюхала-табак**, including question marks and replacement characters.\r\n\r\nHowever, that only happens when I build my project to an _.exe_ file using package as EXE Installer from Netbeans IDE using Inno Setup Compiler, and I run it. The result of decoding the URL yields question marks and replacement characters, but if I run my project from Netbeans 8.2 it works fine; no question marks or replacement characters  are shown in the URL in the _.txt_ file. i use java version 1.8.0.\r\n\r\nHere is my code\r\n\r\n    File newPath = new File(pathTextField.getText() + &quot;\\\\&quot; + filename.matcher(sitemapMatcher.group(i)).replaceAll(&quot;$2&quot;) + &quot;_&quot; + renameFile + &quot;.txt&quot;);\r\n    FileWriter writeUrl = new FileWriter(newPath);\r\n\r\n    URL sitemapUrl = new URL(sitemapMatcher.group(i));\r\n    URLConnection sitemapUrlConn = sitemapUrl.openConnection();\r\n    sitemapUrlConn.setRequestProperty(&quot;User-Agent&quot;, userAgentArray[randomUserAgent.nextInt(userAgentArray.length)]);\r\n    sitemapUrlConn.connect();\r\n\r\n    BufferedReader sitemapUrlIn = new BufferedReader(new InputStreamReader(sitemapUrlConn.getInputStream(), StandardCharsets.UTF_8.name()));\r\n    String sitemapUrlInputLine;\r\n\r\n    if (clearCheck.isSelected()) {\r\n        while ((sitemapUrlInputLine = sitemapUrlIn.readLine()) != null) {\r\n            final Pattern sitemapUrlPattern = Pattern.compile(regex);\r\n            final Matcher sitemapUrlMatcher = sitemapUrlPattern.matcher(sitemapUrlInputLine);\r\n\r\n            while (sitemapUrlMatcher.find()) {\r\n                for (int j = 1; j &lt;= sitemapUrlMatcher.groupCount(); j++) {\r\n                    if (sitemapUrlMatcher.group(j) != null) {\r\n                        if (regexArray.length &gt; 1 &amp;&amp; regexArray.length == replaceArray.length) {\r\n                            final Pattern resultCleanUrl = Pattern.compile(regexArray[0]);\r\n                            if (resultCleanUrl.matcher(sitemapUrlMatcher.group(j)).replaceAll(replaceArray[0]) != null) {\r\n                                tempCleanURL = URLDecoder.decode(resultCleanUrl.matcher(sitemapUrlMatcher.group(j)).replaceAll(replaceArray[0]));\r\n                                for (int indexArray = 1; indexArray &lt; regexArray.length; indexArray++) {\r\n                                    if (indexArray + 1 == regexArray.length) {\r\n                                        tempCleanURL = tempCleanURL.replaceAll(regexArray[indexArray], replaceArray[indexArray]);\r\n                                        String cleanUrlSpaceText = tempCleanURL.replaceAll(&quot;(\\\\s+)&quot;, &quot; &quot;);\r\n                                        writeUrl.write(cleanUrlSpaceText.trim() + &quot;\\n&quot;);\r\n                                    } else {\r\n                                        tempCleanURL = tempCleanURL.replaceAll(regexArray[indexArray], replaceArray[indexArray]);\r\n                                    }\r\n                                }\r\n                            } else {\r\n                                tempCleanURL = URLDecoder.decode(sitemapUrlMatcher.group(j));\r\n                                writeUrl.write(tempCleanURL.trim() + &quot;\\n&quot;);\r\n                            }\r\n                        } else {\r\n                            final Pattern resultCleanUrl = Pattern.compile(regexArray[0]);\r\n                            if (resultCleanUrl.matcher(sitemapUrlMatcher.group(j)).replaceAll(replaceArray[0]) != null) {\r\n                                tempCleanURL = URLDecoder.decode(resultCleanUrl.matcher(sitemapUrlMatcher.group(j)).replaceAll(replaceArray[0]));\r\n                                writeUrl.write(tempCleanURL.trim() + &quot;\\n&quot;);\r\n                            } else {\r\n                                tempCleanURL = URLDecoder.decode(sitemapUrlMatcher.group(j));\r\n                                writeUrl.write(tempCleanURL.trim() + &quot;\\n&quot;);\r\n                            }\r\n                        }\r\n                    } else {\r\n                        writeUrl.write(&quot;sitemapUrlMatcher[j] null \\n&quot;);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    } else {\r\n        while ((sitemapUrlInputLine = sitemapUrlIn.readLine()) != null) {\r\n            final Pattern sitemapUrlPattern = Pattern.compile(regex);\r\n            final Matcher sitemapUrlMatcher = sitemapUrlPattern.matcher(sitemapUrlInputLine);\r\n\r\n            while (sitemapUrlMatcher.find()) {\r\n                for (int j = 1; j &lt;= sitemapUrlMatcher.groupCount(); j++) {\r\n                    if (sitemapUrlMatcher.group(j) != null) {\r\n                        tempCleanURL = URLDecoder.decode(sitemapUrlMatcher.group(j));\r\n                        writeUrl.write(tempCleanURL.trim() + &quot;\\n&quot;);\r\n                    } else {\r\n                        writeUrl.write(&quot;sitemapUrlMatcher[j] null \\n&quot;);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    writeUrl.flush();\r\n    writeUrl.close();\r\n\r\nThis is the incorrect URL which is produced when running the _.exe_ file:\r\n\r\n[![Running with exe][1]][1]\r\n\r\nThis is the correct URL which is produced when running through Netbeans 8.2:\r\n\r\n[![Running in NetBeans][2]][2]\r\n\r\n  [1]: https://i.stack.imgur.com/CsYyr.png\r\n  [2]: https://i.stack.imgur.com/HyDtb.png","title":"Why does URLDecoder.decode() not work properly when I decode URL from non-ASCII into .txt file?","body":"<p>I tried to decode this url <strong>%D0%9A%D1%80%D0%B0%D1%81%D0%B0%D0%B2%D0%B8%D1%86%D0%B5-%D0%BA%D0%BE%D1%82%D0%BE%D1%80%D0%B0%D1%8F-%D0%BD%D1%8E%D1%85%D0%B0%D0%BB%D0%B0-%D1%82%D0%B0%D0%B1%D0%B0%D0%BA</strong>, but the result when writing the URL to a <em>.txt</em> file was <strong>Кра�?авице-котора�?-нюхала-табак</strong>, including question marks and replacement characters.</p>\n<p>However, that only happens when I build my project to an <em>.exe</em> file using package as EXE Installer from Netbeans IDE using Inno Setup Compiler, and I run it. The result of decoding the URL yields question marks and replacement characters, but if I run my project from Netbeans 8.2 it works fine; no question marks or replacement characters  are shown in the URL in the <em>.txt</em> file. i use java version 1.8.0.</p>\n<p>Here is my code</p>\n<pre><code>File newPath = new File(pathTextField.getText() + &quot;\\\\&quot; + filename.matcher(sitemapMatcher.group(i)).replaceAll(&quot;$2&quot;) + &quot;_&quot; + renameFile + &quot;.txt&quot;);\nFileWriter writeUrl = new FileWriter(newPath);\n\nURL sitemapUrl = new URL(sitemapMatcher.group(i));\nURLConnection sitemapUrlConn = sitemapUrl.openConnection();\nsitemapUrlConn.setRequestProperty(&quot;User-Agent&quot;, userAgentArray[randomUserAgent.nextInt(userAgentArray.length)]);\nsitemapUrlConn.connect();\n\nBufferedReader sitemapUrlIn = new BufferedReader(new InputStreamReader(sitemapUrlConn.getInputStream(), StandardCharsets.UTF_8.name()));\nString sitemapUrlInputLine;\n\nif (clearCheck.isSelected()) {\n    while ((sitemapUrlInputLine = sitemapUrlIn.readLine()) != null) {\n        final Pattern sitemapUrlPattern = Pattern.compile(regex);\n        final Matcher sitemapUrlMatcher = sitemapUrlPattern.matcher(sitemapUrlInputLine);\n\n        while (sitemapUrlMatcher.find()) {\n            for (int j = 1; j &lt;= sitemapUrlMatcher.groupCount(); j++) {\n                if (sitemapUrlMatcher.group(j) != null) {\n                    if (regexArray.length &gt; 1 &amp;&amp; regexArray.length == replaceArray.length) {\n                        final Pattern resultCleanUrl = Pattern.compile(regexArray[0]);\n                        if (resultCleanUrl.matcher(sitemapUrlMatcher.group(j)).replaceAll(replaceArray[0]) != null) {\n                            tempCleanURL = URLDecoder.decode(resultCleanUrl.matcher(sitemapUrlMatcher.group(j)).replaceAll(replaceArray[0]));\n                            for (int indexArray = 1; indexArray &lt; regexArray.length; indexArray++) {\n                                if (indexArray + 1 == regexArray.length) {\n                                    tempCleanURL = tempCleanURL.replaceAll(regexArray[indexArray], replaceArray[indexArray]);\n                                    String cleanUrlSpaceText = tempCleanURL.replaceAll(&quot;(\\\\s+)&quot;, &quot; &quot;);\n                                    writeUrl.write(cleanUrlSpaceText.trim() + &quot;\\n&quot;);\n                                } else {\n                                    tempCleanURL = tempCleanURL.replaceAll(regexArray[indexArray], replaceArray[indexArray]);\n                                }\n                            }\n                        } else {\n                            tempCleanURL = URLDecoder.decode(sitemapUrlMatcher.group(j));\n                            writeUrl.write(tempCleanURL.trim() + &quot;\\n&quot;);\n                        }\n                    } else {\n                        final Pattern resultCleanUrl = Pattern.compile(regexArray[0]);\n                        if (resultCleanUrl.matcher(sitemapUrlMatcher.group(j)).replaceAll(replaceArray[0]) != null) {\n                            tempCleanURL = URLDecoder.decode(resultCleanUrl.matcher(sitemapUrlMatcher.group(j)).replaceAll(replaceArray[0]));\n                            writeUrl.write(tempCleanURL.trim() + &quot;\\n&quot;);\n                        } else {\n                            tempCleanURL = URLDecoder.decode(sitemapUrlMatcher.group(j));\n                            writeUrl.write(tempCleanURL.trim() + &quot;\\n&quot;);\n                        }\n                    }\n                } else {\n                    writeUrl.write(&quot;sitemapUrlMatcher[j] null \\n&quot;);\n                }\n            }\n        }\n    }\n} else {\n    while ((sitemapUrlInputLine = sitemapUrlIn.readLine()) != null) {\n        final Pattern sitemapUrlPattern = Pattern.compile(regex);\n        final Matcher sitemapUrlMatcher = sitemapUrlPattern.matcher(sitemapUrlInputLine);\n\n        while (sitemapUrlMatcher.find()) {\n            for (int j = 1; j &lt;= sitemapUrlMatcher.groupCount(); j++) {\n                if (sitemapUrlMatcher.group(j) != null) {\n                    tempCleanURL = URLDecoder.decode(sitemapUrlMatcher.group(j));\n                    writeUrl.write(tempCleanURL.trim() + &quot;\\n&quot;);\n                } else {\n                    writeUrl.write(&quot;sitemapUrlMatcher[j] null \\n&quot;);\n                }\n            }\n        }\n    }\n}\n\nwriteUrl.flush();\nwriteUrl.close();\n</code></pre>\n<p>This is the incorrect URL which is produced when running the <em>.exe</em> file:</p>\n<p><a href=\"https://i.stack.imgur.com/CsYyr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CsYyr.png\" alt=\"Running with exe\" /></a></p>\n<p>This is the correct URL which is produced when running through Netbeans 8.2:</p>\n<p><a href=\"https://i.stack.imgur.com/HyDtb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HyDtb.png\" alt=\"Running in NetBeans\" /></a></p>\n"},{"tags":["java","kotlin","file","fileinputstream","objectinputstream"],"owner":{"account_id":25178788,"reputation":36,"user_id":19020549,"display_name":"Piotr Płaczek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675815634,"creation_date":1675815634,"question_id":75380291,"body_markdown":"In the following scenario, should I assign the `FileInputStream` to a `val` and close it separately, or does the `use` statement handle that?\r\n\r\nHere is my code:\r\n\r\n```kotlin\r\nObjectInputStream(FileInputStream(&quot;employees.tmp&quot;)).use { /* ... */ }\r\n```\r\n\r\nThe code runs fine without closing `FileInputStream` separately, I just want to make sure I&#39;m handling the resources correctly.\r\n\r\nI noticed the Java docs just close the [`ObjectInputStream`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/ObjectInputStream.html) in a normal scenario, and [this Kotlin example](https://stonesoupprogramming.com/2017/11/25/kotlin-object-serialization/) also doesn&#39;t bother.\r\n\r\nSorry, I know the title is a little confusing. Thank you in advance.","title":"If I pass &#39;FileInputStream&#39; to &#39;ObjectInputStream&#39; and call &#39;use&#39;, do I have to close the FileInputStream separately?","body":"<p>In the following scenario, should I assign the <code>FileInputStream</code> to a <code>val</code> and close it separately, or does the <code>use</code> statement handle that?</p>\n<p>Here is my code:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>ObjectInputStream(FileInputStream(&quot;employees.tmp&quot;)).use { /* ... */ }\n</code></pre>\n<p>The code runs fine without closing <code>FileInputStream</code> separately, I just want to make sure I'm handling the resources correctly.</p>\n<p>I noticed the Java docs just close the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/ObjectInputStream.html\" rel=\"nofollow noreferrer\"><code>ObjectInputStream</code></a> in a normal scenario, and <a href=\"https://stonesoupprogramming.com/2017/11/25/kotlin-object-serialization/\" rel=\"nofollow noreferrer\">this Kotlin example</a> also doesn't bother.</p>\n<p>Sorry, I know the title is a little confusing. Thank you in advance.</p>\n"},{"tags":["java","security","encryption","jasypt"],"comments":[{"owner":{"account_id":2033317,"reputation":61286,"user_id":1816580,"display_name":"Artjom B."},"score":0,"creation_date":1492936938,"post_id":43568600,"comment_id":74188037,"body_markdown":"Since jasypt provides only symmetric encryption, you will have to keep the key/password from the attacker. Whether this is at all possible would depend on your explicit scenario/use case. You might want to describe that in detail.","body":"Since jasypt provides only symmetric encryption, you will have to keep the key/password from the attacker. Whether this is at all possible would depend on your explicit scenario/use case. You might want to describe that in detail."},{"owner":{"account_id":9005832,"reputation":69,"user_id":6712593,"accept_rate":100,"display_name":"Sumanth Saligram"},"score":0,"creation_date":1492949761,"post_id":43568600,"comment_id":74191621,"body_markdown":"@ArtjomB. Consider that i store encrypted passwords in the database, if somehow the attacker gets access to it, can he decrypt my data?","body":"@ArtjomB. Consider that i store encrypted passwords in the database, if somehow the attacker gets access to it, can he decrypt my data?"},{"owner":{"account_id":2033317,"reputation":61286,"user_id":1816580,"display_name":"Artjom B."},"score":0,"creation_date":1493060011,"post_id":43568600,"comment_id":74241293,"body_markdown":"Only if you store or rather keep the key close to the data that it encrypted.","body":"Only if you store or rather keep the key close to the data that it encrypted."},{"owner":{"account_id":9005832,"reputation":69,"user_id":6712593,"accept_rate":100,"display_name":"Sumanth Saligram"},"score":0,"creation_date":1493123407,"post_id":43568600,"comment_id":74270213,"body_markdown":"@ArtjomB. Where do i find this key you&#39;re talking about?","body":"@ArtjomB. Where do i find this key you&#39;re talking about?"},{"owner":{"account_id":2033317,"reputation":61286,"user_id":1816580,"display_name":"Artjom B."},"score":0,"creation_date":1493148950,"post_id":43568600,"comment_id":74287889,"body_markdown":"If you&#39;re using then you have to supply it with a key or a password. You should have it.","body":"If you&#39;re using then you have to supply it with a key or a password. You should have it."}],"answers":[{"tags":[],"owner":{"account_id":4218123,"reputation":9909,"user_id":3453898,"accept_rate":75,"display_name":"pixel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675815446,"creation_date":1675815446,"answer_id":75380269,"question_id":43568600,"body_markdown":"I think so.  Say you have a Spring Boot application and you have **application.properties** file with username and password like:\r\n\r\n    # in application.properties\r\n    username=myuser\r\n    password=DEC(mypassword)\r\n    jasypt.encryptor.password=tester\r\n\r\nOnce you run jasypt command to encrypt above password, the **application.properteis** file will be modified and will look like:\r\n\r\n    # in application.properties\r\n    username=myuser\r\n    password=ENC(hlyNvWcMld4LeQUkExq3i9QD9i2x8U4c)\r\n    jasypt.encryptor.password=tester\r\n\r\nIf this file goes into a repository like a GitHub or SVN, there is nothing there to prevent malicuous user to take the `jasypt.encryptor.password` and use it to decrypt the password and endup with its original value `mypassword`.  There is even an online tool for that.\r\n\r\nI think the same applies with Spring Cloud Config server where instead of `DEC()`, `END()`, `{cypher}` is being used.\r\n\r\nTo me, the only way around that is that the **application.properties** content cannot ever be pushed to a repo.  Or that different values are provided for development and production in which case even if you have the `jasypt.encryptor.password` in the **application.properties** and that is in GitHub, it is used only for development.\r\n\r\nOn deployment, the container will provide another password.  So, this would be &quot;safe&quot; but still, it disclosed internals about the application.  For example, attacker now knows that your application uses jasypt and relies on the correct `jasypt.encryptor.password`.\r\n\r\n","title":"How secure is jasypt?","body":"<p>I think so.  Say you have a Spring Boot application and you have <strong>application.properties</strong> file with username and password like:</p>\n<pre><code># in application.properties\nusername=myuser\npassword=DEC(mypassword)\njasypt.encryptor.password=tester\n</code></pre>\n<p>Once you run jasypt command to encrypt above password, the <strong>application.properteis</strong> file will be modified and will look like:</p>\n<pre><code># in application.properties\nusername=myuser\npassword=ENC(hlyNvWcMld4LeQUkExq3i9QD9i2x8U4c)\njasypt.encryptor.password=tester\n</code></pre>\n<p>If this file goes into a repository like a GitHub or SVN, there is nothing there to prevent malicuous user to take the <code>jasypt.encryptor.password</code> and use it to decrypt the password and endup with its original value <code>mypassword</code>.  There is even an online tool for that.</p>\n<p>I think the same applies with Spring Cloud Config server where instead of <code>DEC()</code>, <code>END()</code>, <code>{cypher}</code> is being used.</p>\n<p>To me, the only way around that is that the <strong>application.properties</strong> content cannot ever be pushed to a repo.  Or that different values are provided for development and production in which case even if you have the <code>jasypt.encryptor.password</code> in the <strong>application.properties</strong> and that is in GitHub, it is used only for development.</p>\n<p>On deployment, the container will provide another password.  So, this would be &quot;safe&quot; but still, it disclosed internals about the application.  For example, attacker now knows that your application uses jasypt and relies on the correct <code>jasypt.encryptor.password</code>.</p>\n"}],"owner":{"account_id":9005832,"reputation":69,"user_id":6712593,"accept_rate":100,"display_name":"Sumanth Saligram"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1843,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1675815446,"creation_date":1492933115,"question_id":43568600,"body_markdown":"I have recently made an app that uses jasypt APIs for encryption and decryption of text and Passwords.\r\nMy question is, if the hacker also uses or knows about jasypt, would it be possible for him to use the decrypt() method to decrypt my encrypted data?\r\nHow do i make sure that another person who&#39;s also using jasypt cannot decrypt my data?\r\n","title":"How secure is jasypt?","body":"<p>I have recently made an app that uses jasypt APIs for encryption and decryption of text and Passwords.\nMy question is, if the hacker also uses or knows about jasypt, would it be possible for him to use the decrypt() method to decrypt my encrypted data?\nHow do i make sure that another person who's also using jasypt cannot decrypt my data?</p>\n"},{"tags":["java","arraylist"],"comments":[{"owner":{"account_id":1937019,"reputation":4428,"user_id":1744230,"accept_rate":100,"display_name":"QBrute"},"score":1,"creation_date":1675815935,"post_id":75380213,"comment_id":133009075,"body_markdown":"A `Number` doesn&#39;t implement `Comparable` and is therefore not sortable. Why are you using `Number` anyway, instead of `Integer`, as you&#39;re adding just ints to the list?","body":"A <code>Number</code> doesn&#39;t implement <code>Comparable</code> and is therefore not sortable. Why are you using <code>Number</code> anyway, instead of <code>Integer</code>, as you&#39;re adding just ints to the list?"}],"owner":{"account_id":26744898,"reputation":1,"user_id":20345094,"display_name":"annie"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675814694,"creation_date":1675814694,"question_id":75380213,"body_markdown":"I need to write the following methods to work with ArrayList:\r\n\r\npublic static void shuffle(ArrayList\\&lt;Number\\&gt; list)\r\npublic static void sort(ArrayList\\&lt;Number\\&gt; list)\r\n\r\nthen write a test program that prints the initial ArrayList values, sends that ArrayList to shuffle(), then prints the ArrayList, sends the ArrayList to sort(), then prints the ArrayList. I am getting an error at \r\n\r\n```\r\nCollections.sort(list);\r\n```\r\nHow to fix the error? \r\n```\r\n\r\nno suitable method found for sort(java.util.ArrayList&lt;java.lang.Number&gt;)\r\n    method java.util.Collections.&lt;T&gt;sort(java.util.List&lt;T&gt;) is not applicable\r\n      (inference variable T has incompatible bounds\r\n        equality constraints: java.lang.Number\r\n        lower bounds: java.lang.Comparable&lt;? super T&gt;)\r\n    method java.util.Collections.&lt;T&gt;sort(java.util.List&lt;T&gt;,java.util.Comparator&lt;? super T&gt;) is not applicable\r\n      (cannot infer type-variable(s) T\r\n```\r\n\r\n```\r\nimport java.util.ArrayList;\r\nimport java.util.Collections;\r\nimport java.util.Random;\r\n\r\npublic class ArrayListTest {\r\n\r\n    public static void main(String[] args) {\r\n        ArrayList&lt;Number&gt; list = new ArrayList&lt;&gt;();\r\n        for (int i = 0; i &lt; 10; i++) {\r\n            list.add(new Random().nextInt(100));\r\n        }\r\n        System.out.println(&quot;Initial ArrayList:&quot; + list);\r\n        Collections.shuffle(list);\r\n        System.out.println(&quot;Shuffling:&quot; + list);\r\n        Collections.sort(list);\r\n        System.out.println(&quot;Sorting:&quot;+ list);\r\n\r\n        \r\n}\r\n}\r\n```","title":"Using the method shuffle and arraylist to print initial values then shuffle and sort and print the initial values","body":"<p>I need to write the following methods to work with ArrayList:</p>\n<p>public static void shuffle(ArrayList&lt;Number&gt; list)\npublic static void sort(ArrayList&lt;Number&gt; list)</p>\n<p>then write a test program that prints the initial ArrayList values, sends that ArrayList to shuffle(), then prints the ArrayList, sends the ArrayList to sort(), then prints the ArrayList. I am getting an error at</p>\n<pre><code>Collections.sort(list);\n</code></pre>\n<p>How to fix the error?</p>\n<pre><code>\nno suitable method found for sort(java.util.ArrayList&lt;java.lang.Number&gt;)\n    method java.util.Collections.&lt;T&gt;sort(java.util.List&lt;T&gt;) is not applicable\n      (inference variable T has incompatible bounds\n        equality constraints: java.lang.Number\n        lower bounds: java.lang.Comparable&lt;? super T&gt;)\n    method java.util.Collections.&lt;T&gt;sort(java.util.List&lt;T&gt;,java.util.Comparator&lt;? super T&gt;) is not applicable\n      (cannot infer type-variable(s) T\n</code></pre>\n<pre><code>import java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.Random;\n\npublic class ArrayListTest {\n\n    public static void main(String[] args) {\n        ArrayList&lt;Number&gt; list = new ArrayList&lt;&gt;();\n        for (int i = 0; i &lt; 10; i++) {\n            list.add(new Random().nextInt(100));\n        }\n        System.out.println(&quot;Initial ArrayList:&quot; + list);\n        Collections.shuffle(list);\n        System.out.println(&quot;Shuffling:&quot; + list);\n        Collections.sort(list);\n        System.out.println(&quot;Sorting:&quot;+ list);\n\n        \n}\n}\n</code></pre>\n"},{"tags":["java","proxy","apache-httpasyncclient"],"owner":{"account_id":1268367,"reputation":453,"user_id":1225168,"display_name":"Ravi Dasari"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675813772,"creation_date":1675813772,"question_id":75380137,"body_markdown":"I am trying to write a proxy that downloads the file from a service and streams the responses back to the client. And I am getting this Exception at `future.get()` call. I am receiving the response buffer back in the consumer as I see it in logs but I think I am doing something wrong in the way I wrote the consumer.\r\n\r\n\r\n    Exception \r\n    Caused by: java.util.concurrent.ExecutionException: java.nio.BufferUnderflowException\r\n        at org.apache.http.concurrent.BasicFuture.getResult(BasicFuture.java:71)\r\n        at org.apache.http.concurrent.BasicFuture.get(BasicFuture.java:84)\r\n        at org.apache.http.impl.nio.client.FutureWrapper.get(FutureWrapper.java:70)\r\n        at com.test.clients.http.HttpRequestClient.doHttpStreamRequest(HttpRequestClient.java:439)\r\n\r\n\r\nSource code:\r\n    package com.test.clients.http;\r\n\r\n    import org.apache.http.*;\r\n    import org.apache.http.client.config.RequestConfig;\r\n    import org.apache.http.client.entity.UrlEncodedFormEntity;\r\n    import org.apache.http.client.methods.CloseableHttpResponse;\r\n    import org.apache.http.client.methods.HttpDelete;\r\n    import org.apache.http.client.methods.HttpGet;\r\n    import org.apache.http.client.methods.HttpPatch;\r\n    import org.apache.http.client.methods.HttpPost;\r\n    import org.apache.http.client.methods.HttpPut;\r\n    import org.apache.http.client.methods.HttpRequestBase;\r\n    import org.apache.http.client.protocol.HttpClientContext;\r\n    import org.apache.http.client.utils.URIBuilder;\r\n    import org.apache.http.conn.ssl.NoopHostnameVerifier;\r\n    import org.apache.http.conn.ssl.SSLConnectionSocketFactory;\r\n    import org.apache.http.conn.ssl.TrustStrategy;\r\n    import org.apache.http.entity.ContentType;\r\n    import org.apache.http.entity.StringEntity;\r\n    import org.apache.http.entity.mime.MultipartEntityBuilder;\r\n    import org.apache.http.entity.mime.content.FileBody;\r\n    import org.apache.http.impl.client.BasicCookieStore;\r\n    import org.apache.http.impl.client.CloseableHttpClient;\r\n    import org.apache.http.impl.client.HttpClients;\r\n    import org.apache.http.impl.client.LaxRedirectStrategy;\r\n    import org.apache.http.message.BasicNameValuePair;\r\n    import org.apache.http.nio.protocol.HttpAsyncRequestProducer;\r\n    import org.apache.http.protocol.BasicHttpContext;\r\n    import org.apache.http.protocol.HttpContext;\r\n    import org.apache.http.ssl.SSLContextBuilder;\r\n    import org.apache.http.util.EntityUtils;\r\n    import org.apache.http.impl.nio.client.CloseableHttpAsyncClient;\r\n    import org.apache.http.impl.nio.client.HttpAsyncClients;\r\n    import org.apache.http.nio.IOControl;\r\n    import org.apache.http.nio.client.methods.AsyncCharConsumer;\r\n    import org.apache.http.nio.client.methods.HttpAsyncMethods;\r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n\r\n    import java.security.cert.CertificateException;\r\n    import java.security.cert.X509Certificate;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n\r\n    import java.io.ByteArrayOutputStream;\r\n    import java.io.File;\r\n    import java.io.IOException;\r\n    import java.io.UnsupportedEncodingException;\r\n    import java.net.URI;\r\n    import java.net.URISyntaxException;\r\n    import java.net.URL;\r\n    import java.net.URLConnection;\r\n    import java.nio.charset.Charset;\r\n    import java.security.KeyManagementException;\r\n    import java.security.KeyStoreException;\r\n    import java.security.NoSuchAlgorithmException;\r\n    import java.util.List;\r\n    import java.util.Map;\r\n    import java.nio.CharBuffer;\r\n    import java.util.concurrent.Future;\r\n    import javax.servlet.http.HttpServletResponse;\r\n\r\n    public class HttpRequestClient {\r\n\r\n        private CloseableHttpAsyncClient createAsyncClient()\r\n            throws KeyManagementException, NoSuchAlgorithmException, KeyStoreException {\r\n\r\n        RequestConfig requestConfig = RequestConfig.custom()\r\n                .setConnectionRequestTimeout(15000)\r\n                .setConnectTimeout(this.connectionTimeout)\r\n                .setSocketTimeout(this.connectionTimeout).build();\r\n\r\n        SSLContextBuilder builder = new SSLContextBuilder();\r\n        builder.loadTrustMaterial(trustAllStrategy);\r\n\r\n        return HttpAsyncClients.custom()\r\n            .setDefaultRequestConfig(requestConfig)\r\n            .setSSLContext(builder.build())\r\n            .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\r\n            .setRedirectStrategy(new LaxRedirectStrategy())\r\n            .build();\r\n        }\r\n\r\n        private HttpHost getHost() {\r\n            return new HttpHost(serverUrl.getHost(), serverUrl.getPort(), serverUrl.getProtocol());\r\n        }\r\n\r\n        private URI getURI(String path, Map&lt;String, String&gt; params) throws URISyntaxException {\r\n            URIBuilder uriBuilder = new URIBuilder();\r\n            uriBuilder.setPath(path);\r\n            for (Map.Entry&lt;String, String&gt; oneParam : params.entrySet()) {\r\n                uriBuilder.setParameter(oneParam.getKey(), oneParam.getValue());\r\n            }\r\n            return uriBuilder.build();\r\n        }\r\n\r\n        public void doHttpStreamRequest(HttpRequestBase request, HttpServletResponse response, Map&lt;String, String&gt; headers, String bodyText) throws Exception {\r\n            CloseableHttpAsyncClient client = null;\r\n            try {\r\n                HttpHost httpHost = getHost();\r\n\r\n                String requestUrl = request.getRequestLine().getMethod() + &quot;:&quot; +\r\n                        httpHost.getSchemeName() + &quot;://&quot; + httpHost.getHostName() + &quot;:&quot; + httpHost.getPort() + &quot;/&quot; +\r\n                        request.getRequestLine().getUri();\r\n\r\n                client = createAsyncClient();\r\n\r\n                try {\r\n                    client.start();\r\n                    URI uri = new URI(httpHost.getSchemeName(), &quot;hostname&quot;, &quot;some/download/url&quot;, null, null);\r\n                    final HttpPost httpPost = new HttpPost(uri);\r\n                    HttpAsyncRequestProducer producer = HttpAsyncMethods.create(httpPost);\r\n\r\n                    Future&lt;Boolean&gt; future = client.execute(producer, new CustomStreamResponseConsumer(response), null);\r\n                    Boolean result = future.get();\r\n                    if (result != null &amp;&amp; result.booleanValue()) {\r\n                        System.out.println(&quot;Request successfully executed&quot;);\r\n                    } else {\r\n                        System.out.println(&quot;Request failed&quot;);\r\n                    }\r\n                    System.out.println(&quot;Done processing streaming request&quot;);\r\n                } finally {\r\n                    client.close();\r\n                }\r\n            } catch (IOException | KeyStoreException | KeyManagementException | NoSuchAlgorithmException e) {\r\n                throw new Exception(String.format(&quot;Failed to run %s, error: %s&quot;, request.getRequestLine().getMethod(), e.getMessage()), e);\r\n            } finally {\r\n                if (request != null) {\r\n                    request.releaseConnection();\r\n                }\r\n                if (client != null) {\r\n                    try {\r\n                        client.close();\r\n                    } catch (IOException e) {\r\n                        logger.error(&quot;Failed closing connection: &quot; + e.getMessage(), e);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        static class CustomStreamResponseConsumer extends AsyncCharConsumer&lt;Boolean&gt; {\r\n            private HttpServletResponse response;\r\n            CustomStreamResponseConsumer(HttpServletResponse response) {\r\n                super();\r\n                this.response = response;\r\n            }\r\n\r\n            @Override\r\n            protected void onResponseReceived(final HttpResponse response) {\r\n                this.response.setStatus(HttpStatus.SC_OK);\r\n            }\r\n        \r\n            @Override\r\n            protected void onCharReceived(final CharBuffer buf, final IOControl ioctrl) throws IOException {\r\n                while (buf.hasRemaining()) {\r\n                    System.out.println(&quot;Buffer output: &quot; + buf.get());\r\n                    this.response.getOutputStream().write(buf.get());\r\n                }\r\n                this.response.getOutputStream().flush();\r\n            }\r\n        \r\n            @Override\r\n            protected void releaseResources() {\r\n                try {\r\n                    response.getOutputStream().close();\r\n                }\r\n                catch(IOException e) {\r\n                    logger.error(&quot;Failed closing output stream: &quot; + e.getMessage(), e);\r\n                }\r\n            }\r\n        \r\n            @Override\r\n            protected Boolean buildResult(final HttpContext context) {\r\n                return Boolean.TRUE;\r\n            }\r\n        \r\n        }\r\n    }\r\n\r\nAppreciate any inputs on what is the issue here. I am new to httpasyncclient.","title":"HttpAsyncClient streaming a file download gives exception java.nio.BufferUnderflowException","body":"<p>I am trying to write a proxy that downloads the file from a service and streams the responses back to the client. And I am getting this Exception at <code>future.get()</code> call. I am receiving the response buffer back in the consumer as I see it in logs but I think I am doing something wrong in the way I wrote the consumer.</p>\n<pre><code>Exception \nCaused by: java.util.concurrent.ExecutionException: java.nio.BufferUnderflowException\n    at org.apache.http.concurrent.BasicFuture.getResult(BasicFuture.java:71)\n    at org.apache.http.concurrent.BasicFuture.get(BasicFuture.java:84)\n    at org.apache.http.impl.nio.client.FutureWrapper.get(FutureWrapper.java:70)\n    at com.test.clients.http.HttpRequestClient.doHttpStreamRequest(HttpRequestClient.java:439)\n</code></pre>\n<p>Source code:\npackage com.test.clients.http;</p>\n<pre><code>import org.apache.http.*;\nimport org.apache.http.client.config.RequestConfig;\nimport org.apache.http.client.entity.UrlEncodedFormEntity;\nimport org.apache.http.client.methods.CloseableHttpResponse;\nimport org.apache.http.client.methods.HttpDelete;\nimport org.apache.http.client.methods.HttpGet;\nimport org.apache.http.client.methods.HttpPatch;\nimport org.apache.http.client.methods.HttpPost;\nimport org.apache.http.client.methods.HttpPut;\nimport org.apache.http.client.methods.HttpRequestBase;\nimport org.apache.http.client.protocol.HttpClientContext;\nimport org.apache.http.client.utils.URIBuilder;\nimport org.apache.http.conn.ssl.NoopHostnameVerifier;\nimport org.apache.http.conn.ssl.SSLConnectionSocketFactory;\nimport org.apache.http.conn.ssl.TrustStrategy;\nimport org.apache.http.entity.ContentType;\nimport org.apache.http.entity.StringEntity;\nimport org.apache.http.entity.mime.MultipartEntityBuilder;\nimport org.apache.http.entity.mime.content.FileBody;\nimport org.apache.http.impl.client.BasicCookieStore;\nimport org.apache.http.impl.client.CloseableHttpClient;\nimport org.apache.http.impl.client.HttpClients;\nimport org.apache.http.impl.client.LaxRedirectStrategy;\nimport org.apache.http.message.BasicNameValuePair;\nimport org.apache.http.nio.protocol.HttpAsyncRequestProducer;\nimport org.apache.http.protocol.BasicHttpContext;\nimport org.apache.http.protocol.HttpContext;\nimport org.apache.http.ssl.SSLContextBuilder;\nimport org.apache.http.util.EntityUtils;\nimport org.apache.http.impl.nio.client.CloseableHttpAsyncClient;\nimport org.apache.http.impl.nio.client.HttpAsyncClients;\nimport org.apache.http.nio.IOControl;\nimport org.apache.http.nio.client.methods.AsyncCharConsumer;\nimport org.apache.http.nio.client.methods.HttpAsyncMethods;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\nimport java.security.cert.CertificateException;\nimport java.security.cert.X509Certificate;\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport java.io.ByteArrayOutputStream;\nimport java.io.File;\nimport java.io.IOException;\nimport java.io.UnsupportedEncodingException;\nimport java.net.URI;\nimport java.net.URISyntaxException;\nimport java.net.URL;\nimport java.net.URLConnection;\nimport java.nio.charset.Charset;\nimport java.security.KeyManagementException;\nimport java.security.KeyStoreException;\nimport java.security.NoSuchAlgorithmException;\nimport java.util.List;\nimport java.util.Map;\nimport java.nio.CharBuffer;\nimport java.util.concurrent.Future;\nimport javax.servlet.http.HttpServletResponse;\n\npublic class HttpRequestClient {\n\n    private CloseableHttpAsyncClient createAsyncClient()\n        throws KeyManagementException, NoSuchAlgorithmException, KeyStoreException {\n\n    RequestConfig requestConfig = RequestConfig.custom()\n            .setConnectionRequestTimeout(15000)\n            .setConnectTimeout(this.connectionTimeout)\n            .setSocketTimeout(this.connectionTimeout).build();\n\n    SSLContextBuilder builder = new SSLContextBuilder();\n    builder.loadTrustMaterial(trustAllStrategy);\n\n    return HttpAsyncClients.custom()\n        .setDefaultRequestConfig(requestConfig)\n        .setSSLContext(builder.build())\n        .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\n        .setRedirectStrategy(new LaxRedirectStrategy())\n        .build();\n    }\n\n    private HttpHost getHost() {\n        return new HttpHost(serverUrl.getHost(), serverUrl.getPort(), serverUrl.getProtocol());\n    }\n\n    private URI getURI(String path, Map&lt;String, String&gt; params) throws URISyntaxException {\n        URIBuilder uriBuilder = new URIBuilder();\n        uriBuilder.setPath(path);\n        for (Map.Entry&lt;String, String&gt; oneParam : params.entrySet()) {\n            uriBuilder.setParameter(oneParam.getKey(), oneParam.getValue());\n        }\n        return uriBuilder.build();\n    }\n\n    public void doHttpStreamRequest(HttpRequestBase request, HttpServletResponse response, Map&lt;String, String&gt; headers, String bodyText) throws Exception {\n        CloseableHttpAsyncClient client = null;\n        try {\n            HttpHost httpHost = getHost();\n\n            String requestUrl = request.getRequestLine().getMethod() + &quot;:&quot; +\n                    httpHost.getSchemeName() + &quot;://&quot; + httpHost.getHostName() + &quot;:&quot; + httpHost.getPort() + &quot;/&quot; +\n                    request.getRequestLine().getUri();\n\n            client = createAsyncClient();\n\n            try {\n                client.start();\n                URI uri = new URI(httpHost.getSchemeName(), &quot;hostname&quot;, &quot;some/download/url&quot;, null, null);\n                final HttpPost httpPost = new HttpPost(uri);\n                HttpAsyncRequestProducer producer = HttpAsyncMethods.create(httpPost);\n\n                Future&lt;Boolean&gt; future = client.execute(producer, new CustomStreamResponseConsumer(response), null);\n                Boolean result = future.get();\n                if (result != null &amp;&amp; result.booleanValue()) {\n                    System.out.println(&quot;Request successfully executed&quot;);\n                } else {\n                    System.out.println(&quot;Request failed&quot;);\n                }\n                System.out.println(&quot;Done processing streaming request&quot;);\n            } finally {\n                client.close();\n            }\n        } catch (IOException | KeyStoreException | KeyManagementException | NoSuchAlgorithmException e) {\n            throw new Exception(String.format(&quot;Failed to run %s, error: %s&quot;, request.getRequestLine().getMethod(), e.getMessage()), e);\n        } finally {\n            if (request != null) {\n                request.releaseConnection();\n            }\n            if (client != null) {\n                try {\n                    client.close();\n                } catch (IOException e) {\n                    logger.error(&quot;Failed closing connection: &quot; + e.getMessage(), e);\n                }\n            }\n        }\n    }\n\n    static class CustomStreamResponseConsumer extends AsyncCharConsumer&lt;Boolean&gt; {\n        private HttpServletResponse response;\n        CustomStreamResponseConsumer(HttpServletResponse response) {\n            super();\n            this.response = response;\n        }\n\n        @Override\n        protected void onResponseReceived(final HttpResponse response) {\n            this.response.setStatus(HttpStatus.SC_OK);\n        }\n    \n        @Override\n        protected void onCharReceived(final CharBuffer buf, final IOControl ioctrl) throws IOException {\n            while (buf.hasRemaining()) {\n                System.out.println(&quot;Buffer output: &quot; + buf.get());\n                this.response.getOutputStream().write(buf.get());\n            }\n            this.response.getOutputStream().flush();\n        }\n    \n        @Override\n        protected void releaseResources() {\n            try {\n                response.getOutputStream().close();\n            }\n            catch(IOException e) {\n                logger.error(&quot;Failed closing output stream: &quot; + e.getMessage(), e);\n            }\n        }\n    \n        @Override\n        protected Boolean buildResult(final HttpContext context) {\n            return Boolean.TRUE;\n        }\n    \n    }\n}\n</code></pre>\n<p>Appreciate any inputs on what is the issue here. I am new to httpasyncclient.</p>\n"},{"tags":["java","multithreading","jaxb","synchronization"],"comments":[{"owner":{"account_id":10108456,"reputation":3914,"user_id":7470253,"display_name":"M. Prokhorov"},"score":2,"creation_date":1553254464,"post_id":55298585,"comment_id":97325773,"body_markdown":"You will need to understand, that since class is available to basically anyone, if you synchronize on class object, you could be competing with everything else that also synchronizes on the same class object, and those things will not necessarily have anything to do with `getContext()` method calls - and your lock on class will make them wait for you to finish. Or make you wait for them to finish. If you are sure there&#39;s noone else who might compete for the lock on class object, or you don&#39;t mind you or them waiting - then it&#39;s totally OK.","body":"You will need to understand, that since class is available to basically anyone, if you synchronize on class object, you could be competing with everything else that also synchronizes on the same class object, and those things will not necessarily have anything to do with <code>getContext()</code> method calls - and your lock on class will make them wait for you to finish. Or make you wait for them to finish. If you are sure there&#39;s noone else who might compete for the lock on class object, or you don&#39;t mind you or them waiting - then it&#39;s totally OK."}],"answers":[{"tags":[],"owner":{"account_id":225072,"reputation":81659,"user_id":485343,"accept_rate":75,"display_name":"rustyx"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1553254872,"creation_date":1553254872,"answer_id":55298836,"question_id":55298585,"body_markdown":"An instance of `Class` is also an `Object`, it&#39;s perfectly valid to synchronize on it.\r\n\r\nHowever, as there is only one instance, you won&#39;t be able to differentiate between different (unrelated) synchronized sections, should you need more than one in the future.\r\n\r\nThat&#39;s also the problem with declaring methods `synchronized` - no only do they synchronize on themselves, but also on all their siblings and all other external code that might synchronize on the object, which isn&#39;t always obvious.","title":"Is it bad idea to use getClass() for synchronization while initializing private static variable?","body":"<p>An instance of <code>Class</code> is also an <code>Object</code>, it's perfectly valid to synchronize on it.</p>\n\n<p>However, as there is only one instance, you won't be able to differentiate between different (unrelated) synchronized sections, should you need more than one in the future.</p>\n\n<p>That's also the problem with declaring methods <code>synchronized</code> - no only do they synchronize on themselves, but also on all their siblings and all other external code that might synchronize on the object, which isn't always obvious.</p>\n"},{"tags":[],"owner":{"account_id":279365,"reputation":49126,"user_id":574479,"accept_rate":87,"display_name":"biziclop"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1553255468,"creation_date":1553255468,"answer_id":55299001,"question_id":55298585,"body_markdown":"Locking on publicly visible objects has one big problem: you can&#39;t reason about the class&#39;s behaviour in isolation.\r\n\r\nThe reason being that other parts of the code may also choose to synchronise on your class object, potentially causing your `getContext()` method to block indefinitely.\r\n\r\nNow as you might imagine, in practice this is rarely a problem&lt;sup&gt;*&lt;/sup&gt;. But when it is (and sometimes it is), it&#39;s an absolute nightmare to debug and identify. So given how easy it is to just define a private lock object and synchronise on that, I&#39;d go with it.\r\n\r\n&lt;sup&gt;*&lt;/sup&gt;Assuming no malicious code is present, that is. If you really want to, you can do really nasty things by synchronising on unwittingly shared objects, like [this example](https://pastebin.com/r2bKbXfE) I created, which &quot;invisibly&quot; connects an input and an output stream.\r\n\r\n","title":"Is it bad idea to use getClass() for synchronization while initializing private static variable?","body":"<p>Locking on publicly visible objects has one big problem: you can't reason about the class's behaviour in isolation.</p>\n\n<p>The reason being that other parts of the code may also choose to synchronise on your class object, potentially causing your <code>getContext()</code> method to block indefinitely.</p>\n\n<p>Now as you might imagine, in practice this is rarely a problem<sup>*</sup>. But when it is (and sometimes it is), it's an absolute nightmare to debug and identify. So given how easy it is to just define a private lock object and synchronise on that, I'd go with it.</p>\n\n<p><sup>*</sup>Assuming no malicious code is present, that is. If you really want to, you can do really nasty things by synchronising on unwittingly shared objects, like <a href=\"https://pastebin.com/r2bKbXfE\" rel=\"nofollow noreferrer\">this example</a> I created, which \"invisibly\" connects an input and an output stream.</p>\n"},{"tags":[],"owner":{"account_id":2826194,"reputation":10795,"user_id":2428802,"display_name":"jmehrens"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675813106,"creation_date":1675813106,"answer_id":75380071,"question_id":55298585,"body_markdown":"&gt; Is it bad idea to use getClass() for synchronization while initializing private static variable?\r\n\r\nIt can be correct but there are usually alternative ways to write the code with less smell.\r\n\r\nFrom SpotBugs: [WL: Synchronization on getClass rather than class literal (WL_USING_GETCLASS_RATHER_THAN_CLASS_LITERAL)][1]\r\n\r\n&gt; This instance method synchronizes on this.getClass(). If this class is subclassed, subclasses will synchronize on the class object for the subclass, which isn&#39;t likely what was intended. \r\n\r\nWhat is usually misunderstood about this rule is that code is correct when you are locking on the [class that declares the field][2] or there is no way to get a subclass returned from getClass like a final class or anonymous class.  In those cases the lock returned is known to be the same and therefore safe in that regard.  This pattern always suffers from being able to lock public object but that is a different risk.\r\n\r\n&gt; So I decided to initialize it once per child class using double-checked locking.\r\n\r\nThat is not what is happening per your given code:\r\n\r\n`private static volatile JAXBContext context;`\r\n\r\nThe declaring class of this field is `JAXBParser.class` and all subclasses are using that single field.  For example, say you have classes `JAXBParser1 extends JAXBParser` and `JAXBParser2 extends JAXBParser`.  Then synchronized (getClass()) is either going to lock JAXBParser1.class or JAXBParser2.class.  Which would mean that contention only happens within each parser subclass.  From your description that seems like it is what you intended. However, because the `context` field is not declared in each subclass you could have 2 threads (one from JAXBParser1 and one from JAXBParser2) racing to set the `JAXBParser::context` field in the root JAXBParser class without coordination to a shared location.  Which means that you could even be sharing across the sibling parsers which would be a bug.\r\n\r\nAn alternative approach would be to use java.lang.ClassValue to create a context unique to each getJAXBClass() within your JAXBParser hierarchy:\r\n\r\n    public abstract class JAXBParser&lt;T&gt; {\r\n\r\n        private static final ClassValue&lt;JAXBContext&gt; context = new ClassValue&lt;&gt;() {\r\n            protected JAXBContext computeValue(Class&lt;?&gt; type) {\r\n                try {\r\n                    return JAXBContext.newInstance(type);\r\n                } catch (JAXBException e) {\r\n                    throw new UndeclaredThrowableException(e);\r\n                }\r\n            }\r\n        };\r\n\r\n        private JAXBContext getContext() {\r\n            return context.get(getJAXBClass());\r\n        }\r\n    }\r\n\r\nIn this example this would only share a context if the parser is using the same JAXB class.\r\n\r\n  [1]: https://spotbugs.readthedocs.io/en/stable/bugDescriptions.html#wl-synchronization-on-getclass-rather-than-class-literal-wl-using-getclass-rather-than-class-literal\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/lang/reflect/Field.html#getDeclaringClass--","title":"Is it bad idea to use getClass() for synchronization while initializing private static variable?","body":"<blockquote>\n<p>Is it bad idea to use getClass() for synchronization while initializing private static variable?</p>\n</blockquote>\n<p>It can be correct but there are usually alternative ways to write the code with less smell.</p>\n<p>From SpotBugs: <a href=\"https://spotbugs.readthedocs.io/en/stable/bugDescriptions.html#wl-synchronization-on-getclass-rather-than-class-literal-wl-using-getclass-rather-than-class-literal\" rel=\"nofollow noreferrer\">WL: Synchronization on getClass rather than class literal (WL_USING_GETCLASS_RATHER_THAN_CLASS_LITERAL)</a></p>\n<blockquote>\n<p>This instance method synchronizes on this.getClass(). If this class is subclassed, subclasses will synchronize on the class object for the subclass, which isn't likely what was intended.</p>\n</blockquote>\n<p>What is usually misunderstood about this rule is that code is correct when you are locking on the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/reflect/Field.html#getDeclaringClass--\" rel=\"nofollow noreferrer\">class that declares the field</a> or there is no way to get a subclass returned from getClass like a final class or anonymous class.  In those cases the lock returned is known to be the same and therefore safe in that regard.  This pattern always suffers from being able to lock public object but that is a different risk.</p>\n<blockquote>\n<p>So I decided to initialize it once per child class using double-checked locking.</p>\n</blockquote>\n<p>That is not what is happening per your given code:</p>\n<p><code>private static volatile JAXBContext context;</code></p>\n<p>The declaring class of this field is <code>JAXBParser.class</code> and all subclasses are using that single field.  For example, say you have classes <code>JAXBParser1 extends JAXBParser</code> and <code>JAXBParser2 extends JAXBParser</code>.  Then synchronized (getClass()) is either going to lock JAXBParser1.class or JAXBParser2.class.  Which would mean that contention only happens within each parser subclass.  From your description that seems like it is what you intended. However, because the <code>context</code> field is not declared in each subclass you could have 2 threads (one from JAXBParser1 and one from JAXBParser2) racing to set the <code>JAXBParser::context</code> field in the root JAXBParser class without coordination to a shared location.  Which means that you could even be sharing across the sibling parsers which would be a bug.</p>\n<p>An alternative approach would be to use java.lang.ClassValue to create a context unique to each getJAXBClass() within your JAXBParser hierarchy:</p>\n<pre><code>public abstract class JAXBParser&lt;T&gt; {\n\n    private static final ClassValue&lt;JAXBContext&gt; context = new ClassValue&lt;&gt;() {\n        protected JAXBContext computeValue(Class&lt;?&gt; type) {\n            try {\n                return JAXBContext.newInstance(type);\n            } catch (JAXBException e) {\n                throw new UndeclaredThrowableException(e);\n            }\n        }\n    };\n\n    private JAXBContext getContext() {\n        return context.get(getJAXBClass());\n    }\n}\n</code></pre>\n<p>In this example this would only share a context if the parser is using the same JAXB class.</p>\n"}],"owner":{"account_id":5288848,"reputation":149,"user_id":4221970,"display_name":"Fal Alexandr"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":287,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":55299001,"answer_count":3,"score":0,"last_activity_date":1675813106,"creation_date":1553253886,"question_id":55298585,"body_markdown":"So here is the problem. I have the following abstract class.\r\n\r\n      public abstract class JAXBParser&lt;T&gt; {\r\n    \r\n      private static final Object lock = new Object();\r\n    \r\n      private static volatile JAXBContext context;\r\n    \r\n      private JAXBContext getContext() {\r\n        if (context == null) {\r\n          synchronized (getClass()) {\r\n            if (context == null) {\r\n              try {\r\n                context = JAXBContext.newInstance(getJAXBClass());\r\n              } catch (JAXBException e) {\r\n                log.error(&quot;Couldn&#39;t create JAXB context&quot;, e);\r\n              }\r\n            }\r\n          }\r\n        }\r\n    \r\n        return context;\r\n      }\r\n    \r\n      @SuppressWarnings(&quot;unchecked&quot;)\r\n      public Optional&lt;T&gt; parse(File file) {\r\n        log.debug(file.getAbsolutePath());\r\n        try {\r\n          JAXBContext context = getContext();\r\n          Unmarshaller unmarshaller = context.createUnmarshaller();\r\n    \r\n          return Optional.ofNullable((T) unmarshaller.unmarshal(file));\r\n        } catch (JAXBException e) {\r\n          log.error(unmarshallerError(file.getAbsolutePath()), e);\r\n        }\r\n    \r\n        return Optional.empty();\r\n      }\r\n    \r\n      protected abstract Class getJAXBClass();\r\n    }\r\n\r\nThe idea is that I&#39;ll have couple of parsers with same behaviour so I can use this to follow the DRY principle (and to play with inheritance, multithreading, synchronization etc.). Also in [this][1] question it is stated that JAXBContext initialization is heavy, so it would be good idea to initialize it once. So I decided to initialize it once per child class using double-checked locking.\r\n\r\nThe question is the following:\r\n\r\nIs it bad idea to use getClass() for synchronization? Would it be better to use lock object and why?\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/7400422/jaxb-creating-context-and-marshallers-cost","title":"Is it bad idea to use getClass() for synchronization while initializing private static variable?","body":"<p>So here is the problem. I have the following abstract class.</p>\n\n<pre><code>  public abstract class JAXBParser&lt;T&gt; {\n\n  private static final Object lock = new Object();\n\n  private static volatile JAXBContext context;\n\n  private JAXBContext getContext() {\n    if (context == null) {\n      synchronized (getClass()) {\n        if (context == null) {\n          try {\n            context = JAXBContext.newInstance(getJAXBClass());\n          } catch (JAXBException e) {\n            log.error(\"Couldn't create JAXB context\", e);\n          }\n        }\n      }\n    }\n\n    return context;\n  }\n\n  @SuppressWarnings(\"unchecked\")\n  public Optional&lt;T&gt; parse(File file) {\n    log.debug(file.getAbsolutePath());\n    try {\n      JAXBContext context = getContext();\n      Unmarshaller unmarshaller = context.createUnmarshaller();\n\n      return Optional.ofNullable((T) unmarshaller.unmarshal(file));\n    } catch (JAXBException e) {\n      log.error(unmarshallerError(file.getAbsolutePath()), e);\n    }\n\n    return Optional.empty();\n  }\n\n  protected abstract Class getJAXBClass();\n}\n</code></pre>\n\n<p>The idea is that I'll have couple of parsers with same behaviour so I can use this to follow the DRY principle (and to play with inheritance, multithreading, synchronization etc.). Also in <a href=\"https://stackoverflow.com/questions/7400422/jaxb-creating-context-and-marshallers-cost\">this</a> question it is stated that JAXBContext initialization is heavy, so it would be good idea to initialize it once. So I decided to initialize it once per child class using double-checked locking.</p>\n\n<p>The question is the following:</p>\n\n<p>Is it bad idea to use getClass() for synchronization? Would it be better to use lock object and why?</p>\n"},{"tags":["java","exchange-server","exchangewebservices","exchange-server-2010"],"comments":[{"owner":{"account_id":194657,"reputation":48162,"user_id":1603351,"display_name":"Eugene Astafiev"},"score":0,"creation_date":1675813057,"post_id":75378275,"comment_id":133008623,"body_markdown":"You are dealing with an Exchange server directly without involving Outlook.","body":"You are dealing with an Exchange server directly without involving Outlook."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1675846012,"post_id":75378275,"comment_id":133013606,"body_markdown":"As an aside don’t use `Date` and `SimpleDateFormat`. They are troublesome and long outdated. Use `LocalDate` and `DateTimeFormatter`. [Oracle Tutorial: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html).","body":"As an aside don’t use <code>Date</code> and <code>SimpleDateFormat</code>. They are troublesome and long outdated. Use <code>LocalDate</code> and <code>DateTimeFormatter</code>. <a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">Oracle Tutorial: Date Time</a>."}],"owner":{"account_id":27728805,"reputation":1,"user_id":21167772,"display_name":"Parthiban"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675813007,"creation_date":1675799097,"question_id":75378275,"body_markdown":"We are trying to access outlook email through EWS  via java code. For some of the email we are facing character reference issue.\r\n\r\nError message:\r\n\r\n&gt; ParseError at \\[row,col\\]:\\[852,6\\] Message: Character reference &quot;&amp;#\r\n\r\nCode snippet:\r\n\r\n    try { \r\n        ExchangeService service = new ExchangeService(ExchangeVersion.Exchange2010_SP2); \r\n        ExchangeCredentials credentials = new WebCredentials(EMAIL_ID, EMAIL_PWD); service.setCredentials(credentials); service.setUrl(new URI(&quot;https://*****************/ews/exchange.asmx&quot;)); service.setTraceEnabled(true); ExtendedPropertyDefinition PR_TRANSPORT_MESSAGE_HEADERS = new            ExtendedPropertyDefinition(0x007D,MapiPropertyType.String); PropertySet propset = new PropertySet(PropertySet.FirstClassProperties.getBasePropertySet(),ItemSchema.MimeContent,PR_TRANSPORT_MESSAGE_HEADERS); propset.setRequestedBodyType(BodyType.Text);\r\n    ItemView view = new ItemView(30);\r\n    view.getOrderBy().add(ItemSchema.DateTimeReceived, SortDirection.Descending);\r\n    FindItemsResults&lt;Item&gt; findResults;\r\n    findResults = service.findItems(WellKnownFolderName.Inbox,&quot;Body:&quot;+currency, view);\r\n    \r\n    if (findResults.getTotalCount() == 0) {\r\n        logger.info(&quot;INFO:: There is eno emails available&quot;);\r\n    }\r\n    else {\r\n        for (Item item : findResults) {\r\n            EmailMessage message = EmailMessage.bind(service, item.getId(), new               \r\n            PropertySet(BasePropertySet.FirstClassProperties, EmailMessageSchema.Attachments));\r\n            EmailMessage message = EmailMessage.bind(service, item.getId(), propset);\r\n            item.load();\r\n            //emailBody = item.getBody().toString();\r\n            emailBody = message.getBody().toString();\r\n            logger.info(&quot;Email Body &quot; + StringUtils.normalizeSpace(emailBody));\r\n            Date dateTimeReceived = item.getDateTimeReceived();\r\n            SimpleDateFormat fmt = new SimpleDateFormat(&quot;dd-MMM-yyyy&quot;);\r\n            Date todays_date = new Date();\r\n            resultList.add(emailBody);\r\n         }\r\n      item.delete(DeleteMode.MoveToDeletedItems);\r\n     }\r\n    }} catch (Exception e) {logger.info(&quot;Error in Executing outlookEmailRead : &quot; +e.getMessage());}\r\n\r\nPOM dependency:\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.microsoft.ews-java-api&lt;/groupId&gt;\r\n    &lt;artifactId&gt;ews-java-api&lt;/artifactId&gt;\r\n    &lt;version&gt;2.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nI found it is a known issue from Microsoft https://github.com/OfficeDev/ews-java-api/issues/353\r\n\r\nBut not able to fix the issue.","title":"Character Reference Issue for Outlook","body":"<p>We are trying to access outlook email through EWS  via java code. For some of the email we are facing character reference issue.</p>\n<p>Error message:</p>\n<blockquote>\n<p>ParseError at [row,col]:[852,6] Message: Character reference &quot;&amp;#</p>\n</blockquote>\n<p>Code snippet:</p>\n<pre><code>try { \n    ExchangeService service = new ExchangeService(ExchangeVersion.Exchange2010_SP2); \n    ExchangeCredentials credentials = new WebCredentials(EMAIL_ID, EMAIL_PWD); service.setCredentials(credentials); service.setUrl(new URI(&quot;https://*****************/ews/exchange.asmx&quot;)); service.setTraceEnabled(true); ExtendedPropertyDefinition PR_TRANSPORT_MESSAGE_HEADERS = new            ExtendedPropertyDefinition(0x007D,MapiPropertyType.String); PropertySet propset = new PropertySet(PropertySet.FirstClassProperties.getBasePropertySet(),ItemSchema.MimeContent,PR_TRANSPORT_MESSAGE_HEADERS); propset.setRequestedBodyType(BodyType.Text);\nItemView view = new ItemView(30);\nview.getOrderBy().add(ItemSchema.DateTimeReceived, SortDirection.Descending);\nFindItemsResults&lt;Item&gt; findResults;\nfindResults = service.findItems(WellKnownFolderName.Inbox,&quot;Body:&quot;+currency, view);\n\nif (findResults.getTotalCount() == 0) {\n    logger.info(&quot;INFO:: There is eno emails available&quot;);\n}\nelse {\n    for (Item item : findResults) {\n        EmailMessage message = EmailMessage.bind(service, item.getId(), new               \n        PropertySet(BasePropertySet.FirstClassProperties, EmailMessageSchema.Attachments));\n        EmailMessage message = EmailMessage.bind(service, item.getId(), propset);\n        item.load();\n        //emailBody = item.getBody().toString();\n        emailBody = message.getBody().toString();\n        logger.info(&quot;Email Body &quot; + StringUtils.normalizeSpace(emailBody));\n        Date dateTimeReceived = item.getDateTimeReceived();\n        SimpleDateFormat fmt = new SimpleDateFormat(&quot;dd-MMM-yyyy&quot;);\n        Date todays_date = new Date();\n        resultList.add(emailBody);\n     }\n  item.delete(DeleteMode.MoveToDeletedItems);\n }\n}} catch (Exception e) {logger.info(&quot;Error in Executing outlookEmailRead : &quot; +e.getMessage());}\n</code></pre>\n<p>POM dependency:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.microsoft.ews-java-api&lt;/groupId&gt;\n    &lt;artifactId&gt;ews-java-api&lt;/artifactId&gt;\n    &lt;version&gt;2.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I found it is a known issue from Microsoft <a href=\"https://github.com/OfficeDev/ews-java-api/issues/353\" rel=\"nofollow noreferrer\">https://github.com/OfficeDev/ews-java-api/issues/353</a></p>\n<p>But not able to fix the issue.</p>\n"},{"tags":["java","amazon-web-services","amazon-kinesis"],"comments":[{"owner":{"account_id":107714,"reputation":448,"user_id":1132593,"display_name":"user1132593"},"score":0,"creation_date":1675286890,"post_id":75288914,"comment_id":132898849,"body_markdown":"https://stackoverflow.com/questions/63753139/how-are-shards-from-a-kinesis-stream-assigned-to-multiple-instances-of-a-kinesis has a good explanation.","body":"<a href=\"https://stackoverflow.com/questions/63753139/how-are-shards-from-a-kinesis-stream-assigned-to-multiple-instances-of-a-kinesis\" title=\"how are shards from a kinesis stream assigned to multiple instances of a kinesis\">stackoverflow.com/questions/63753139/&hellip;</a> has a good explanation."}],"owner":{"account_id":107714,"reputation":448,"user_id":1132593,"display_name":"user1132593"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":165,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675812619,"creation_date":1675104933,"question_id":75288914,"body_markdown":"I am trying to understand AWS Kinesis quotas and am looking to get some clarification on the following:\r\n\r\nIf I have a single Kinesis consumers(same appID) running in multiple containers/EC2 instances etc to try and improve data consumption via reading in parallel, how do the existing kinesis quotas listed below work?\r\n\r\nhttps://docs.aws.amazon.com/streams/latest/dev/service-sizes-and-limits.html\r\nGetRecords can retrieve up to 10 MB of data per call from a single shard, and up to 10,000 records per call. Each call to GetRecords is counted as one read transaction.\r\n\r\nEach shard can support up to five read transactions per second. Each read transaction can provide up to 10,000 records with an upper quota of 10 MB per transaction.\r\n\r\nEach shard can support up to a maximum total data read rate of 2 MB per second via GetRecords. If a call to GetRecords returns 10 MB, subsequent calls made within the next 5 seconds throw an exception.\r\n\r\nQuestion: Does this mean that even if we run multiple consumers(same AppID) instances, the number of reads are capped to 5 read transaction/sec/shard etc.\r\n","title":"AWS Kinesis - Same Kinesis consumer , multiple instances, read quotas","body":"<p>I am trying to understand AWS Kinesis quotas and am looking to get some clarification on the following:</p>\n<p>If I have a single Kinesis consumers(same appID) running in multiple containers/EC2 instances etc to try and improve data consumption via reading in parallel, how do the existing kinesis quotas listed below work?</p>\n<p><a href=\"https://docs.aws.amazon.com/streams/latest/dev/service-sizes-and-limits.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/streams/latest/dev/service-sizes-and-limits.html</a>\nGetRecords can retrieve up to 10 MB of data per call from a single shard, and up to 10,000 records per call. Each call to GetRecords is counted as one read transaction.</p>\n<p>Each shard can support up to five read transactions per second. Each read transaction can provide up to 10,000 records with an upper quota of 10 MB per transaction.</p>\n<p>Each shard can support up to a maximum total data read rate of 2 MB per second via GetRecords. If a call to GetRecords returns 10 MB, subsequent calls made within the next 5 seconds throw an exception.</p>\n<p>Question: Does this mean that even if we run multiple consumers(same AppID) instances, the number of reads are capped to 5 read transaction/sec/shard etc.</p>\n"},{"tags":["java","elasticsearch","elasticsearch-dsl","elasticsearch-scripting"],"comments":[{"owner":{"account_id":19165296,"reputation":1941,"user_id":14000148,"display_name":"warkolm"},"score":0,"creation_date":1675813120,"post_id":75379864,"comment_id":133008633,"body_markdown":"https://www.elastic.co/guide/en/elasticsearch/reference/8.6/runtime.html might be able to do it, but I haven&#39;t seen anything like that done myself","body":"<a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/8.6/runtime.html\" rel=\"nofollow noreferrer\">elastic.co/guide/en/elasticsearch/reference/8.6/runtime.html</a> might be able to do it, but I haven&#39;t seen anything like that done myself"}],"owner":{"account_id":5330022,"reputation":173,"user_id":4250855,"display_name":"Gengis Khan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675811007,"creation_date":1675811007,"question_id":75379864,"body_markdown":"I have the following mappings in my elasticsearch index\r\n\r\n```\r\n{\r\n  &quot;test-index&quot; : {\r\n    &quot;mappings&quot; : {\r\n      &quot;properties&quot; : {\r\n        &quot;factor&quot; : {\r\n          &quot;type&quot; : &quot;long&quot;\r\n        },\r\n        &quot;price_range&quot; : {\r\n          &quot;type&quot; : &quot;integer_range&quot;,\r\n          &quot;doc_values&quot; : false\r\n        },\r\n        // other_fields\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nThe elasticsearch query is an AND query where there will be conditions for &quot;other_fields&quot; and price. Price will need to be calculated on the fly. I want to use the value of &quot;factor&quot; to calculate the price and then match the price with the &quot;price_range&quot; field. Here are the matching conditions:\r\n1. If &quot;price_range&quot; is indexed, use &quot;factor&quot; to calculate the price and match against &quot;price_range&quot;\r\n2. If &quot;price_range&quot; is indexed but &quot;factor&quot; is not, use a default value for factor and match against &quot;price_range&quot;\r\n3. If &quot;price_range&quot; is not indexed, ignore price calculation\r\n\r\nPlease let me know how can I go about this. Thanks!","title":"Elasticsearch access fields in a document before matching","body":"<p>I have the following mappings in my elasticsearch index</p>\n<pre><code>{\n  &quot;test-index&quot; : {\n    &quot;mappings&quot; : {\n      &quot;properties&quot; : {\n        &quot;factor&quot; : {\n          &quot;type&quot; : &quot;long&quot;\n        },\n        &quot;price_range&quot; : {\n          &quot;type&quot; : &quot;integer_range&quot;,\n          &quot;doc_values&quot; : false\n        },\n        // other_fields\n        }\n      }\n    }\n  }\n}\n</code></pre>\n<p>The elasticsearch query is an AND query where there will be conditions for &quot;other_fields&quot; and price. Price will need to be calculated on the fly. I want to use the value of &quot;factor&quot; to calculate the price and then match the price with the &quot;price_range&quot; field. Here are the matching conditions:</p>\n<ol>\n<li>If &quot;price_range&quot; is indexed, use &quot;factor&quot; to calculate the price and match against &quot;price_range&quot;</li>\n<li>If &quot;price_range&quot; is indexed but &quot;factor&quot; is not, use a default value for factor and match against &quot;price_range&quot;</li>\n<li>If &quot;price_range&quot; is not indexed, ignore price calculation</li>\n</ol>\n<p>Please let me know how can I go about this. Thanks!</p>\n"},{"tags":["java","android-studio","gradle","android-gradle-plugin","build.gradle"],"comments":[{"owner":{"account_id":14722107,"reputation":5143,"user_id":10632369,"display_name":"tomerpacific"},"score":0,"creation_date":1671799291,"post_id":74899744,"comment_id":132178870,"body_markdown":"Can you share your build.gradle files?","body":"Can you share your build.gradle files?"},{"owner":{"account_id":27335710,"reputation":99,"user_id":20847179,"display_name":"PicoDevGit"},"score":0,"creation_date":1671825569,"post_id":74899744,"comment_id":132185359,"body_markdown":"Of course, i edited my question and now it cotains the code of build.gradle file.","body":"Of course, i edited my question and now it cotains the code of build.gradle file."},{"owner":{"account_id":170897,"reputation":1391,"user_id":397940,"accept_rate":66,"display_name":"panza"},"score":0,"creation_date":1671838893,"post_id":74899744,"comment_id":132187706,"body_markdown":"Since `com.android.application` is added to the project build.gradle file, it usually comes down to the following:\n\n- the Google Maven repository is not listed in your `settings.gradle` file\n-the Android Gradle plugin is not compatible with your Gradle version","body":"Since <code>com.android.application</code> is added to the project build.gradle file, it usually comes down to the following:  - the Google Maven repository is not listed in your <code>settings.gradle</code> file -the Android Gradle plugin is not compatible with your Gradle version"},{"owner":{"account_id":27335710,"reputation":99,"user_id":20847179,"display_name":"PicoDevGit"},"score":0,"creation_date":1671862861,"post_id":74899744,"comment_id":132189635,"body_markdown":"versioin compatibility according to this tutorial? https://developer.android.com/studio/releases/gradle-plugin#updating-gradle","body":"versioin compatibility according to this tutorial? <a href=\"https://developer.android.com/studio/releases/gradle-plugin#updating-gradle\" rel=\"nofollow noreferrer\">developer.android.com/studio/releases/&hellip;</a>"}],"owner":{"account_id":27335710,"reputation":99,"user_id":20847179,"display_name":"PicoDevGit"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":285,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1675810076,"creation_date":1671799199,"question_id":74899744,"body_markdown":"I&#39;ve installed `Android.Studio.2021.3.1.17.x64` and then i installed Sdk from [mega](https://mega.nz/file/AwNhlQrL#tvBtwcDRo9L0MCjazlH_3_1IZHkbMIy7ohS88e4DmPs) with no error but when i wanted to create a new project in java, android studio automatically started to download gradle and it returned this error: \r\n\r\n`Plugin [id: &#39;com.android.application&#39;, version: &#39;7.3.1&#39;, apply: false] was not found in any of the following sources`\r\n\r\nalso the `build.gradle` file (project level) is:\r\n\r\n    // Top-level build file where you can add configuration options common to all sub-projects/modules.\r\n    plugins {\r\n        id &#39;com.android.application&#39; version &#39;7.3.1&#39; apply false\r\n        id &#39;com.android.library&#39; version &#39;7.3.1&#39; apply false\r\n    }\r\n\r\n* i used vpn and tried gradle in offline mode but it did&#39;nt solve the problem.\r\n\r\nCreating a new android project, in gradle installation","title":"Gradle installation error : Plugin [id: &#39;com.android.application&#39;, version: &#39;7.3.1&#39;, apply: false] was not found in any of the following sources","body":"<p>I've installed <code>Android.Studio.2021.3.1.17.x64</code> and then i installed Sdk from <a href=\"https://mega.nz/file/AwNhlQrL#tvBtwcDRo9L0MCjazlH_3_1IZHkbMIy7ohS88e4DmPs\" rel=\"nofollow noreferrer\">mega</a> with no error but when i wanted to create a new project in java, android studio automatically started to download gradle and it returned this error:</p>\n<p><code>Plugin [id: 'com.android.application', version: '7.3.1', apply: false] was not found in any of the following sources</code></p>\n<p>also the <code>build.gradle</code> file (project level) is:</p>\n<pre><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.\nplugins {\n    id 'com.android.application' version '7.3.1' apply false\n    id 'com.android.library' version '7.3.1' apply false\n}\n</code></pre>\n<ul>\n<li>i used vpn and tried gradle in offline mode but it did'nt solve the problem.</li>\n</ul>\n<p>Creating a new android project, in gradle installation</p>\n"},{"tags":["java","apache-kafka","header","apache-camel","spring-camel"],"comments":[{"owner":{"account_id":176018,"reputation":56316,"user_id":406429,"display_name":"Claus Ibsen"},"score":0,"creation_date":1679781878,"post_id":75379744,"comment_id":133783194,"body_markdown":"What Camel version do you use? And can you point out what is the fully classname for that `DefaultKafkaHeaderMapper` you talk about?","body":"What Camel version do you use? And can you point out what is the fully classname for that <code>DefaultKafkaHeaderMapper</code> you talk about?"},{"owner":{"account_id":25080079,"reputation":27,"user_id":18932947,"display_name":"Alexxxx"},"score":0,"creation_date":1679870932,"post_id":75379744,"comment_id":133793810,"body_markdown":"Camel is the dependency: camel-spring-boot-starter version 3.20.2.\nThe class for the header instead is org.springframework.kafka.support.DefaultKafkaHeaderMapper.\nI think the header spring_json_header_types is somehow generated using this class","body":"Camel is the dependency: camel-spring-boot-starter version 3.20.2. The class for the header instead is org.springframework.kafka.support.DefaultKafkaHeaderMapper. I think the header spring_json_header_types is somehow generated using this class"},{"owner":{"account_id":176018,"reputation":56316,"user_id":406429,"display_name":"Claus Ibsen"},"score":0,"creation_date":1679919341,"post_id":75379744,"comment_id":133801579,"body_markdown":"Okay so I assume its spring specific with that header - its metadata that they send along, so if you use spring on the &quot;other side&quot; then it can know what types the headers are. (Kafka seems to lack such metdata out of the box)","body":"Okay so I assume its spring specific with that header - its metadata that they send along, so if you use spring on the &quot;other side&quot; then it can know what types the headers are. (Kafka seems to lack such metdata out of the box)"},{"owner":{"account_id":25080079,"reputation":27,"user_id":18932947,"display_name":"Alexxxx"},"score":0,"creation_date":1680023983,"post_id":75379744,"comment_id":133825036,"body_markdown":"Yes, I think in kafka the headers format is always an array of byte.","body":"Yes, I think in kafka the headers format is always an array of byte."},{"owner":{"account_id":176018,"reputation":56316,"user_id":406429,"display_name":"Claus Ibsen"},"score":0,"creation_date":1680063490,"post_id":75379744,"comment_id":133831425,"body_markdown":"I created a ticket: https://issues.apache.org/jira/browse/CAMEL-19215","body":"I created a ticket: <a href=\"https://issues.apache.org/jira/browse/CAMEL-19215\" rel=\"nofollow noreferrer\">issues.apache.org/jira/browse/CAMEL-19215</a>"}],"owner":{"account_id":25080079,"reputation":27,"user_id":18932947,"display_name":"Alexxxx"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":226,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675809996,"creation_date":1675809996,"question_id":75379744,"body_markdown":"In my Springboot Camel application I&#39;m using the Kafka integration to produce message on a topic.\r\nI compared message produced by Camel Kafka integration with message produced by Kafka Spring integration and I noticed one little difference:\r\nin OffsetExplorer, messages produced by Spring Kafka uses an Header &quot;spring_json_header_types&quot; with the class of all other headers, and header Long or Integer are correctly showed and serialized.\r\nWith Camel instead, if I set an header not String, in OffsetExplorer it is represented with the square char.\r\nI did my research and found that Spring Kafka uses the DefaultKafkaHeaderMapper to create this header, and this help the inbound process to know how to deserialize the other header.\r\nHow can I use it in my Camel Kafka Producer?\r\nHere my code:\r\n\r\n    @Component\r\n    public class KafkaProducerRoute extends RouteBuilder {\r\n        @Override\r\n        public void configure() throws Exception {        \r\n            from(&quot;timer:myTimer?period=10000&quot;)\r\n            .process(new Processor() {\r\n                @Override\r\n                public void process(Exchange exchange) throws Exception {\r\n                    Map&lt;String, Object&gt; headers = new HashMap&lt;&gt;();\r\n                    headers.put(&quot;TIMER_COUNTER_1&quot;, exchange.getProperty(Exchange.TIMER_COUNTER, Long.class));\r\n                    headers.put(&quot;TIMER_COUNTER_2&quot;, String.valueOf(exchange.getProperty(Exchange.TIMER_COUNTER, Long.class)));\r\n                    exchange.getIn().setHeaders(headers);\r\n                }\r\n            })\r\n            .to(&quot;kafka:topic1?brokers=localhost:9092&quot;);\r\n        }\r\n    }","title":"Produce Long Kafka Header with Apache Camel","body":"<p>In my Springboot Camel application I'm using the Kafka integration to produce message on a topic.\nI compared message produced by Camel Kafka integration with message produced by Kafka Spring integration and I noticed one little difference:\nin OffsetExplorer, messages produced by Spring Kafka uses an Header &quot;spring_json_header_types&quot; with the class of all other headers, and header Long or Integer are correctly showed and serialized.\nWith Camel instead, if I set an header not String, in OffsetExplorer it is represented with the square char.\nI did my research and found that Spring Kafka uses the DefaultKafkaHeaderMapper to create this header, and this help the inbound process to know how to deserialize the other header.\nHow can I use it in my Camel Kafka Producer?\nHere my code:</p>\n<pre><code>@Component\npublic class KafkaProducerRoute extends RouteBuilder {\n    @Override\n    public void configure() throws Exception {        \n        from(&quot;timer:myTimer?period=10000&quot;)\n        .process(new Processor() {\n            @Override\n            public void process(Exchange exchange) throws Exception {\n                Map&lt;String, Object&gt; headers = new HashMap&lt;&gt;();\n                headers.put(&quot;TIMER_COUNTER_1&quot;, exchange.getProperty(Exchange.TIMER_COUNTER, Long.class));\n                headers.put(&quot;TIMER_COUNTER_2&quot;, String.valueOf(exchange.getProperty(Exchange.TIMER_COUNTER, Long.class)));\n                exchange.getIn().setHeaders(headers);\n            }\n        })\n        .to(&quot;kafka:topic1?brokers=localhost:9092&quot;);\n    }\n}\n</code></pre>\n"},{"tags":["java","eclipse","maven"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":1,"creation_date":1675814488,"post_id":75379589,"comment_id":133008888,"body_markdown":"Eclipse Kepler SR2 is 9 years and 23 releases behind. Of course, it cannot recognize a Java 17 or 19 JDK released years after Eclipse Kepler. [Make sure to use the current version of Eclipse which is currently 2022-12](https://www.eclipse.org/downloads/packages/).","body":"Eclipse Kepler SR2 is 9 years and 23 releases behind. Of course, it cannot recognize a Java 17 or 19 JDK released years after Eclipse Kepler. <a href=\"https://www.eclipse.org/downloads/packages/\" rel=\"nofollow noreferrer\">Make sure to use the current version of Eclipse which is currently 2022-12</a>."},{"owner":{"account_id":25937004,"reputation":15,"user_id":19657086,"display_name":"PillagingProgrammer"},"score":0,"creation_date":1675823203,"post_id":75379589,"comment_id":133009993,"body_markdown":"@howlger I installed Eclipse `Version: 2022-12 (4.26.0)`, `Build id: 20221201-1913`. I can now `Maven Install`. However, I am unable to `Maven Build`: https://ibb.co/17dm0dC (my first time with Maven, I have no idea what I need to do to make it buildable). I also receive this if I run `mvn -version` in cmd: https://ibb.co/smq4VJh","body":"@howlger I installed Eclipse <code>Version: 2022-12 (4.26.0)</code>, <code>Build id: 20221201-1913</code>. I can now <code>Maven Install</code>. However, I am unable to <code>Maven Build</code>: <a href=\"https://ibb.co/17dm0dC\" rel=\"nofollow noreferrer\">ibb.co/17dm0dC</a> (my first time with Maven, I have no idea what I need to do to make it buildable). I also receive this if I run <code>mvn -version</code> in cmd: <a href=\"https://ibb.co/smq4VJh\" rel=\"nofollow noreferrer\">ibb.co/smq4VJh</a>"},{"owner":{"account_id":25937004,"reputation":15,"user_id":19657086,"display_name":"PillagingProgrammer"},"score":0,"creation_date":1675823565,"post_id":75379589,"comment_id":133010029,"body_markdown":"I should also mention: I&#39;ve followed this guide https://phoenixnap.com/kb/install-maven-windows and still getting the &quot;&#39;mvn&#39; is not recognized as an internal or external command, operable program or batch file.&quot; error in cmd","body":"I should also mention: I&#39;ve followed this guide <a href=\"https://phoenixnap.com/kb/install-maven-windows\" rel=\"nofollow noreferrer\">phoenixnap.com/kb/install-maven-windows</a> and still getting the &quot;&#39;mvn&#39; is not recognized as an internal or external command, operable program or batch file.&quot; error in cmd"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1675839801,"post_id":75379589,"comment_id":133012088,"body_markdown":"Eclipse 2022-12 comes with an embedded Maven, so you don&#39;t need to install Maven into your system (but if you do, the guide you followed is misleading: the `PATH` has to be extended with the `bin` directory of your Maven installation, e.g. by adding something like `;C:\\Program Files\\apache-maven-3.9.0\\bin` to the end). Your question is still about Kepler which is pretty outdated. Please fix this. [Please show also your `pom.xml` and your Maven run configuration](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Eclipse 2022-12 comes with an embedded Maven, so you don&#39;t need to install Maven into your system (but if you do, the guide you followed is misleading: the <code>PATH</code> has to be extended with the <code>bin</code> directory of your Maven installation, e.g. by adding something like <code>;C:\\Program Files\\apache-maven-3.9.0\\bin</code> to the end). Your question is still about Kepler which is pretty outdated. Please fix this. <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">Please show also your <code>pom.xml</code> and your Maven run configuration</a>."}],"answers":[{"comments":[{"owner":{"account_id":25937004,"reputation":15,"user_id":19657086,"display_name":"PillagingProgrammer"},"score":0,"creation_date":1675814867,"post_id":75379723,"comment_id":133008931,"body_markdown":"Thank you for offering to help. Unfortunately, what you&#39;re suggesting hasn&#39;t helped. Here is the error I get when trying to add jdk-17.0: https://ibb.co/mCydkfr, and the error for trying to install `apache-maven-3.9.0`: https://ibb.co/PDyPvWD and then when I run `mvn -version`: https://ibb.co/smq4VJh . I unzipped `apache-maven-3.9.0` to my PC, so I&#39;m not sure why &quot;mvn&quot; isn&#39;t recognized as installed.","body":"Thank you for offering to help. Unfortunately, what you&#39;re suggesting hasn&#39;t helped. Here is the error I get when trying to add jdk-17.0: <a href=\"https://ibb.co/mCydkfr\" rel=\"nofollow noreferrer\">ibb.co/mCydkfr</a>, and the error for trying to install <code>apache-maven-3.9.0</code>: <a href=\"https://ibb.co/PDyPvWD\" rel=\"nofollow noreferrer\">ibb.co/PDyPvWD</a> and then when I run <code>mvn -version</code>: <a href=\"https://ibb.co/smq4VJh\" rel=\"nofollow noreferrer\">ibb.co/smq4VJh</a> . I unzipped <code>apache-maven-3.9.0</code> to my PC, so I&#39;m not sure why &quot;mvn&quot; isn&#39;t recognized as installed."},{"owner":{"account_id":156452,"reputation":914,"user_id":373749,"accept_rate":95,"display_name":"Michael Rowe"},"score":0,"creation_date":1698245561,"post_id":75379723,"comment_id":136381295,"body_markdown":"Did you resolve this issue? I am seeing the same issue on my Mac Eclipse install","body":"Did you resolve this issue? I am seeing the same issue on my Mac Eclipse install"}],"tags":[],"owner":{"account_id":6841915,"reputation":31,"user_id":5262018,"display_name":"julianhs"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675809812,"creation_date":1675809812,"answer_id":75379723,"question_id":75379589,"body_markdown":"Make sure you are adding the correct location for the JDK home in the &quot;Installed JREs&quot; section. \r\n\r\n[![enter image description here][1]][1]\r\n\r\nFor instance, I am using JDK 8 and selecting the **JDK as the default** as below:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nMake sure you are also changing the compiler version to use the one matching your JDK.  Other side, like your are using maven clean install to build your project, then make sure the maven distribution is using the correct JAVA_HOME.\r\n\r\nIn Eclipse, go to again Window / Preferences / Maven / **Installations**\r\n\r\nSelect your local maven distribution instead of using the embed version with Eclipse, for instance:\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\nYou can check if your maven distribution is using the correct JDK by typing in a cmd :  `mvn -version`, for example in my Windows I am using JDK 11 like you can see in the below output:\r\n\r\n[![enter image description here][4]][4]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/hUkpW.png\r\n  [2]: https://i.stack.imgur.com/lfNI1.png\r\n  [3]: https://i.stack.imgur.com/K7UAZ.png\r\n  [4]: https://i.stack.imgur.com/5CD2Y.png\r\n\r\nHope this can help.  Please let me know.","title":"Unable to &#39;Maven Build&#39; my Java Project in Eclipse IDE","body":"<p>Make sure you are adding the correct location for the JDK home in the &quot;Installed JREs&quot; section.</p>\n<p><a href=\"https://i.stack.imgur.com/hUkpW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hUkpW.png\" alt=\"enter image description here\" /></a></p>\n<p>For instance, I am using JDK 8 and selecting the <strong>JDK as the default</strong> as below:</p>\n<p><a href=\"https://i.stack.imgur.com/lfNI1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lfNI1.png\" alt=\"enter image description here\" /></a></p>\n<p>Make sure you are also changing the compiler version to use the one matching your JDK.  Other side, like your are using maven clean install to build your project, then make sure the maven distribution is using the correct JAVA_HOME.</p>\n<p>In Eclipse, go to again Window / Preferences / Maven / <strong>Installations</strong></p>\n<p>Select your local maven distribution instead of using the embed version with Eclipse, for instance:</p>\n<p><a href=\"https://i.stack.imgur.com/K7UAZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/K7UAZ.png\" alt=\"enter image description here\" /></a></p>\n<p>You can check if your maven distribution is using the correct JDK by typing in a cmd :  <code>mvn -version</code>, for example in my Windows I am using JDK 11 like you can see in the below output:</p>\n<p><a href=\"https://i.stack.imgur.com/5CD2Y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5CD2Y.png\" alt=\"enter image description here\" /></a></p>\n<p>Hope this can help.  Please let me know.</p>\n"}],"owner":{"account_id":25937004,"reputation":15,"user_id":19657086,"display_name":"PillagingProgrammer"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":556,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1675809812,"creation_date":1675808599,"question_id":75379589,"body_markdown":"I have a working Java Project (literally just 2 JAVA files) that need to be built in either Maven or Gradle. Since I wrote my Java Project in **Eclipse IDE for Java Delopers** (`Kepler Service Release 2`, `20140224-0627`), [I found this article to add Maven to my Java Project.][1]\r\n\r\nAfter adding Maven to my project, [I had to follow this SO answer][2] to allow myself to Right Click the Project -&gt; `Maven` -&gt; `Update Project...` properly. If I Right Click the Project -&gt; `Run As` -&gt; `Maven Clean`, I get a `BUILD SUCCESS` ([thanks to this SO answer][3]). But now when I Right Click the Project -&gt; `Run As` -&gt; `Maven Install`, I get the following:\r\n\r\n```\r\nSLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.\r\nSLF4J: Defaulting to no-operation (NOP) logger implementation\r\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\r\n[INFO] Scanning for projects...\r\n[INFO]                                                                         \r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Building AMC 0.0.1-SNAPSHOT\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] \r\n[INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ RobTillmanProject ---\r\n[debug] execute contextualize\r\n[WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!\r\n[INFO] skip non existing resourceDirectory D:\\Users\\names\\workspace\\paging-mission-control\\AMC\\src\\main\\resources\r\n[INFO] \r\n[INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ RobTillmanProject ---\r\n[INFO] Changes detected - recompiling the module!\r\n[WARNING] File encoding has not been set, using platform encoding Cp1252, i.e. build is platform dependent!\r\n[INFO] Compiling 2 source files to D:\\Users\\names\\workspace\\paging-mission-control\\AMC\\target\\classes\r\n[INFO] -------------------------------------------------------------\r\n[ERROR] COMPILATION ERROR : \r\n[INFO] -------------------------------------------------------------\r\n[ERROR] No compiler is provided in this environment. Perhaps you are running on a JRE rather than a JDK?\r\n[INFO] 1 error\r\n[INFO] -------------------------------------------------------------\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time: 1.050s\r\n[INFO] Finished at: Tue Feb 07 16:35:15 EST 2023\r\n[INFO] Final Memory: 8M/245M\r\n[INFO] ------------------------------------------------------------------------\r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.1:compile (default-compile) on project RobTillmanProject: Compilation failure\r\n[ERROR] No compiler is provided in this environment. Perhaps you are running on a JRE rather than a JDK?\r\n[ERROR] -&gt; [Help 1]\r\n[ERROR] \r\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n[ERROR] \r\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\r\n```\r\n\r\nAs per the error, it looks like I need to add a JDK to the `Installed JREs` list ([just as this SO answer suggests][4]).\r\n\r\nIn Eclipse IDE, `Windows` -&gt; `Preferences` -&gt; `Java` -&gt; `Installed JREs`, I have `jre1.8.0_333 (default)` installed. On my PC, in my `C:\\Program Files\\Java` folder, I&#39;ve installed `jdk-17`, `jdk-17.0.6` and `jdk-19.0.2`. However, when I go to add any one of the JDKs (I&#39;ve tried JRE Type `Standard 1.1x VM` and `Standard VM`), I get the error message `Target is not a JDK root. System library was not found.`\r\n\r\nI&#39;m running Eclipse IDE on Windows 10.\r\n\r\nAny suggestions?\r\n\r\n  [1]: https://crunchify.com/how-to-convert-existing-java-project-to-maven-in-eclipse/\r\n  [2]: https://stackoverflow.com/questions/59763531/maven-dependencies-are-failing-with-a-501-error/59781316#59781316\r\n  [3]: https://stackoverflow.com/questions/71732779/apache-jena-slf4j-failed-to-load-class-org-slf4j-impl-staticloggerbinder/71737848#71737848\r\n  [4]: https://stackoverflow.com/a/21099229/19657086","title":"Unable to &#39;Maven Build&#39; my Java Project in Eclipse IDE","body":"<p>I have a working Java Project (literally just 2 JAVA files) that need to be built in either Maven or Gradle. Since I wrote my Java Project in <strong>Eclipse IDE for Java Delopers</strong> (<code>Kepler Service Release 2</code>, <code>20140224-0627</code>), <a href=\"https://crunchify.com/how-to-convert-existing-java-project-to-maven-in-eclipse/\" rel=\"nofollow noreferrer\">I found this article to add Maven to my Java Project.</a></p>\n<p>After adding Maven to my project, <a href=\"https://stackoverflow.com/questions/59763531/maven-dependencies-are-failing-with-a-501-error/59781316#59781316\">I had to follow this SO answer</a> to allow myself to Right Click the Project -&gt; <code>Maven</code> -&gt; <code>Update Project...</code> properly. If I Right Click the Project -&gt; <code>Run As</code> -&gt; <code>Maven Clean</code>, I get a <code>BUILD SUCCESS</code> (<a href=\"https://stackoverflow.com/questions/71732779/apache-jena-slf4j-failed-to-load-class-org-slf4j-impl-staticloggerbinder/71737848#71737848\">thanks to this SO answer</a>). But now when I Right Click the Project -&gt; <code>Run As</code> -&gt; <code>Maven Install</code>, I get the following:</p>\n<pre><code>SLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.\nSLF4J: Defaulting to no-operation (NOP) logger implementation\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\n[INFO] Scanning for projects...\n[INFO]                                                                         \n[INFO] ------------------------------------------------------------------------\n[INFO] Building AMC 0.0.1-SNAPSHOT\n[INFO] ------------------------------------------------------------------------\n[INFO] \n[INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ RobTillmanProject ---\n[debug] execute contextualize\n[WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!\n[INFO] skip non existing resourceDirectory D:\\Users\\names\\workspace\\paging-mission-control\\AMC\\src\\main\\resources\n[INFO] \n[INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ RobTillmanProject ---\n[INFO] Changes detected - recompiling the module!\n[WARNING] File encoding has not been set, using platform encoding Cp1252, i.e. build is platform dependent!\n[INFO] Compiling 2 source files to D:\\Users\\names\\workspace\\paging-mission-control\\AMC\\target\\classes\n[INFO] -------------------------------------------------------------\n[ERROR] COMPILATION ERROR : \n[INFO] -------------------------------------------------------------\n[ERROR] No compiler is provided in this environment. Perhaps you are running on a JRE rather than a JDK?\n[INFO] 1 error\n[INFO] -------------------------------------------------------------\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 1.050s\n[INFO] Finished at: Tue Feb 07 16:35:15 EST 2023\n[INFO] Final Memory: 8M/245M\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.1:compile (default-compile) on project RobTillmanProject: Compilation failure\n[ERROR] No compiler is provided in this environment. Perhaps you are running on a JRE rather than a JDK?\n[ERROR] -&gt; [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\n</code></pre>\n<p>As per the error, it looks like I need to add a JDK to the <code>Installed JREs</code> list (<a href=\"https://stackoverflow.com/a/21099229/19657086\">just as this SO answer suggests</a>).</p>\n<p>In Eclipse IDE, <code>Windows</code> -&gt; <code>Preferences</code> -&gt; <code>Java</code> -&gt; <code>Installed JREs</code>, I have <code>jre1.8.0_333 (default)</code> installed. On my PC, in my <code>C:\\Program Files\\Java</code> folder, I've installed <code>jdk-17</code>, <code>jdk-17.0.6</code> and <code>jdk-19.0.2</code>. However, when I go to add any one of the JDKs (I've tried JRE Type <code>Standard 1.1x VM</code> and <code>Standard VM</code>), I get the error message <code>Target is not a JDK root. System library was not found.</code></p>\n<p>I'm running Eclipse IDE on Windows 10.</p>\n<p>Any suggestions?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":339859,"reputation":13331,"user_id":669576,"accept_rate":85,"display_name":"001"},"score":0,"creation_date":1675806586,"post_id":75379324,"comment_id":133007352,"body_markdown":"`avg` is an `int` and the `%f` specifier is for `float`. You can change `int avg = 0;` to `float avg = 0;` and don&#39;t forget to change to `avg = (float)total / (count-1);` otherwise you will have integer division.","body":"<code>avg</code> is an <code>int</code> and the <code>%f</code> specifier is for <code>float</code>. You can change <code>int avg = 0;</code> to <code>float avg = 0;</code> and don&#39;t forget to change to <code>avg = (float)total &#47; (count-1);</code> otherwise you will have integer division."},{"owner":{"account_id":339859,"reputation":13331,"user_id":669576,"accept_rate":85,"display_name":"001"},"score":0,"creation_date":1675806930,"post_id":75379324,"comment_id":133007431,"body_markdown":"Side note: if the user only enters a single negative number then `avg = total/(count-1);` will result in a divide by zero exception.","body":"Side note: if the user only enters a single negative number then <code>avg = total&#47;(count-1);</code> will result in a divide by zero exception."}],"answers":[{"tags":[],"owner":{"account_id":27727251,"reputation":3,"user_id":21166522,"display_name":"WildTooth"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675808257,"creation_date":1675808099,"answer_id":75379531,"question_id":75379324,"body_markdown":"What you are trying to do is almost correct. The only things, you would need to change for this to work are these:\r\n\r\n    int avg = 0; // The type of avg should be a float\r\nThe reason for this is that what you&#39;re printing is a float but before these changes, you are providing it with an int. \r\n       \r\n    // The number you are providing avg with should be cast to a float value\r\n    avg = total/(count-1);\r\nThis is because if you didn&#39;t, you would have integer division.\r\n    \r\n    // It would look like this\r\n    float avg = 0;\r\n\r\n    avg = (float)total/(count-1);\r\n","title":"Java - Varied amount of input data- specific format of output","body":"<p>What you are trying to do is almost correct. The only things, you would need to change for this to work are these:</p>\n<pre><code>int avg = 0; // The type of avg should be a float\n</code></pre>\n<p>The reason for this is that what you're printing is a float but before these changes, you are providing it with an int.</p>\n<pre><code>// The number you are providing avg with should be cast to a float value\navg = total/(count-1);\n</code></pre>\n<p>This is because if you didn't, you would have integer division.</p>\n<pre><code>// It would look like this\nfloat avg = 0;\n\navg = (float)total/(count-1);\n</code></pre>\n"}],"owner":{"account_id":27729592,"reputation":9,"user_id":21168382,"display_name":"Littlephoenix12"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":371,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675808257,"creation_date":1675806383,"question_id":75379324,"body_markdown":"Instructions;\r\n&gt;Statistics are often calculated with varying amounts of input data. Write a program that takes any number of non-negative integers as input, and outputs the max and average. A negative integer ends the input and is not included in the statistics. Assume the input contains at least one non-negative integer.\r\n&gt;\r\n&gt;Output the average with two digits after the decimal point followed by a newline, which can be achieved as follows:\r\n`System.out.printf(&quot;%.2f\\n&quot;, average);`\r\n&gt;\r\n&gt;Ex: When the input is:  \r\n`15 20 0 3 -1`  \r\nthe output is:  \r\n`20 9.50`\r\n\r\n\r\n\r\nI have tried a few different ways to convert the int avg into a string but somehow keep messing up.. What am I not doing?? Example code below\r\n```\r\nimport java.util.Scanner; \r\n\r\npublic class LabProgram {\r\n   public static void main(String[] args) {\r\n\r\n      Scanner scnr = new Scanner (System.in);\r\n      int num = 0;\r\n      int count = 0;\r\n      int max = 0;\r\n      int total = 0;\r\n      int avg = 0;\r\n      String s=Integer.toString(avg);\r\n\r\n     do {\r\n\r\n         total += num;\r\n         num = scnr.nextInt();\r\n         count = ++count;\r\n\r\n\r\n         if (num &gt;= max) {\r\n            max = num;\r\n         }\r\n\r\n      } while (num &gt;= 0);\r\n\r\n     avg = total/(count-1);\r\n\r\n      System.out.printf(&quot;%.2f\\n&quot;, avg);\r\n\r\n\r\n   }\r\n}\r\n```","title":"Java - Varied amount of input data- specific format of output","body":"<p>Instructions;</p>\n<blockquote>\n<p>Statistics are often calculated with varying amounts of input data. Write a program that takes any number of non-negative integers as input, and outputs the max and average. A negative integer ends the input and is not included in the statistics. Assume the input contains at least one non-negative integer.</p>\n<p>Output the average with two digits after the decimal point followed by a newline, which can be achieved as follows:\n<code>System.out.printf(&quot;%.2f\\n&quot;, average);</code></p>\n<p>Ex: When the input is:<br />\n<code>15 20 0 3 -1</code><br />\nthe output is:<br />\n<code>20 9.50</code></p>\n</blockquote>\n<p>I have tried a few different ways to convert the int avg into a string but somehow keep messing up.. What am I not doing?? Example code below</p>\n<pre><code>import java.util.Scanner; \n\npublic class LabProgram {\n   public static void main(String[] args) {\n\n      Scanner scnr = new Scanner (System.in);\n      int num = 0;\n      int count = 0;\n      int max = 0;\n      int total = 0;\n      int avg = 0;\n      String s=Integer.toString(avg);\n\n     do {\n\n         total += num;\n         num = scnr.nextInt();\n         count = ++count;\n\n\n         if (num &gt;= max) {\n            max = num;\n         }\n\n      } while (num &gt;= 0);\n\n     avg = total/(count-1);\n\n      System.out.printf(&quot;%.2f\\n&quot;, avg);\n\n\n   }\n}\n</code></pre>\n"},{"tags":["java","udp"],"answers":[{"tags":[],"owner":{"account_id":15168313,"reputation":69,"user_id":10945188,"display_name":"Brongs Gaming"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675807082,"creation_date":1675807082,"answer_id":75379407,"question_id":75379259,"body_markdown":"Such output is received because you are attempting to print an instance of a class (`DatagramPacket`) that does not override the `toString()` method (which is defined in the superclass `java.lang.Object`). Instead, you could use the byte array (`recibidos`), a reference to which was provided to the DatagramPacket constructor (so we consider after executing the `receive()` method it contains some useful data), instantiate a new String instance representing this byte array in a human-readable format and print it to the console:\r\n\r\n    byte[] recibidos = new byte[1024];\r\n    DatagramPacket recibo = new DatagramPacket(recibidos, recibidos.length);\r\n    clienteSocket.receive(recibo);\r\n    System.out.println(&quot;Socket Cliente esperando Datagrama del Socket Servidor ..........&quot;);\r\n    System.out.println(&quot;IP &quot; + ipAd + &quot; en binario: &quot; + (new String(recibidos))); // not using the &quot;recibo&quot; variable anymore","title":"Java UDP Client Server Receiving Package wrong result","body":"<p>Such output is received because you are attempting to print an instance of a class (<code>DatagramPacket</code>) that does not override the <code>toString()</code> method (which is defined in the superclass <code>java.lang.Object</code>). Instead, you could use the byte array (<code>recibidos</code>), a reference to which was provided to the DatagramPacket constructor (so we consider after executing the <code>receive()</code> method it contains some useful data), instantiate a new String instance representing this byte array in a human-readable format and print it to the console:</p>\n<pre><code>byte[] recibidos = new byte[1024];\nDatagramPacket recibo = new DatagramPacket(recibidos, recibidos.length);\nclienteSocket.receive(recibo);\nSystem.out.println(&quot;Socket Cliente esperando Datagrama del Socket Servidor ..........&quot;);\nSystem.out.println(&quot;IP &quot; + ipAd + &quot; en binario: &quot; + (new String(recibidos))); // not using the &quot;recibo&quot; variable anymore\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16281382,"reputation":1,"user_id":11757187,"display_name":"WaleedAhmed"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675807642,"creation_date":1675807642,"answer_id":75379477,"question_id":75379259,"body_markdown":"You are receiving the packet and printing it as it is (instance). Try replacing a line in your client server file from:\r\n\r\n    System.out.println(&quot;IP &quot; + ipAd + &quot; en binario: &quot; + recibo)\r\n\r\nTo:\r\n\r\n    String msg = new String(recibo.getData(), recibo.getOffset(), recibo.getLength());\r\n    System.out.print(msg);","title":"Java UDP Client Server Receiving Package wrong result","body":"<p>You are receiving the packet and printing it as it is (instance). Try replacing a line in your client server file from:</p>\n<pre><code>System.out.println(&quot;IP &quot; + ipAd + &quot; en binario: &quot; + recibo)\n</code></pre>\n<p>To:</p>\n<pre><code>String msg = new String(recibo.getData(), recibo.getOffset(), recibo.getLength());\nSystem.out.print(msg);\n</code></pre>\n"}],"owner":{"account_id":23694523,"reputation":11,"user_id":17718436,"display_name":"Tuan Do"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75379407,"answer_count":2,"score":0,"last_activity_date":1675807642,"creation_date":1675805945,"question_id":75379259,"body_markdown":"i am writing a program that receive an IP address from Client then send this IP address to Server, Server will receive the address and convert the address to binary and send back to client to show in the console. I already have the first half but when server send back the Ip address in binary to client I got the wrong result. For example i put put 2.3.4.5 the result is like this\r\n\r\n\r\n&gt; IP 2.3.4.5 en binario: java.net.DatagramPacket@12d4bf7e\r\n\r\nHow can I fix this error. Thank you.\r\n\r\nClass Client\r\n\r\n    public class SocketUDPClientIP {\r\n\r\n    public static void main(String[] args) throws IOException {\r\n\r\n        Scanner scanner = new Scanner(System.in);\r\n        DatagramSocket clienteSocket = new DatagramSocket();\r\n        InetAddress ipServidor = InetAddress.getLocalHost();\r\n        int puerto = 6666;\r\n        System.out.println(&quot;PROGRAMA CLIENTE INICIADO....&quot;);\r\n\r\n        while (scanner.hasNext()) {\r\n            System.out.println(&quot;Introduzca una IP en formato decimal:&quot;);\r\n            String ipAd = scanner.nextLine();\r\n            System.out.println(&quot;Socket Cliente env&#237;a IP &quot; + ipAd);\r\n\r\n            byte[] enviados = new byte[1024];\r\n            enviados = ipAd.getBytes();\r\n            // Enviar\r\n            DatagramPacket envio = new DatagramPacket(enviados, enviados.length, ipServidor, puerto);\r\n            clienteSocket.send(envio);\r\n          \r\n            byte[] recibidos = new byte[1024];\r\n            DatagramPacket recibo = new DatagramPacket(recibidos, recibidos.length);\r\n            clienteSocket.receive(recibo);\r\n            System.out.println(&quot;Socket Cliente esperando Datagrama del Socket Servidor ..........&quot;);\r\n            System.out.println(&quot;IP &quot; + ipAd + &quot; en binario: &quot; + recibo);\r\n           \r\n            if (ipAd.equals(&quot;0.0.0.0&quot;)) {\r\n                break;\r\n            }\r\n\r\n        }\r\n    }\r\n}\r\n\r\nClass Server\r\n\r\n    public class SocketUDPServerIP {\r\n    public static void main(String[] args) throws IOException {\r\n\r\n        DatagramSocket socket = new DatagramSocket(6666);\r\n        System.out.println(&quot;Servido esperando al cliente.....&quot;);\r\n\r\n        do {\r\n            DatagramPacket recibo;\r\n            byte[] buffer = new byte[1024];\r\n            recibo = new DatagramPacket(buffer, buffer.length);\r\n            socket.receive(recibo);\r\n            String ipAd = new String(recibo.getData()).trim();\r\n            System.out.println(&quot;Recibiendo del CLIENTE: \\n\\t&quot; + ipAd);\r\n\r\n            String[] ipAdS = ipAd.split(&quot;\\\\.&quot;);\r\n            int ipAd1 = Integer.parseInt(ipAdS[0]);\r\n            int ipAd2 = Integer.parseInt(ipAdS[1]);\r\n            int ipAd3 = Integer.parseInt(ipAdS[2]);\r\n            int ipAd4 = Integer.parseInt(ipAdS[3]);\r\n\r\n            String ipAdBinary = &quot;&quot;;\r\n            if (ipAd1 &lt; 256 &amp;&amp; ipAd2 &lt; 256 &amp;&amp; ipAd3 &lt; 256 &amp;&amp; ipAd4 &lt; 256) {\r\n                String ipad1S = Integer.toBinaryString(ipAd1);\r\n                String ipad2S = Integer.toBinaryString(ipAd2);\r\n                String ipad3S = Integer.toBinaryString(ipAd3);\r\n                String ipad4S = Integer.toBinaryString(ipAd4);\r\n\r\n                ipAdBinary = ipad1S + &quot;.&quot; + ipad2S + &quot;.&quot; + ipad3S + &quot;.&quot; + ipad4S;\r\n                System.out.println(ipAdBinary);\r\n            } else {\r\n                ipAdBinary = &quot;El IP &quot; + ipAd + &quot; es un IP no valida, introduzca otra IP&quot;;\r\n                System.out.println(ipAdBinary);\r\n            }\r\n            InetAddress IPOrigen = recibo.getAddress();\r\n            int puerto = recibo.getPort();\r\n            DatagramPacket envio = new DatagramPacket(ipAdBinary.getBytes(),ipAdBinary.length(),IPOrigen,puerto);\r\n            socket.send(envio);\r\n\r\n        } while (true);\r\n\r\n\r\n\r\n    }\r\n}\r\n\r\n","title":"Java UDP Client Server Receiving Package wrong result","body":"<p>i am writing a program that receive an IP address from Client then send this IP address to Server, Server will receive the address and convert the address to binary and send back to client to show in the console. I already have the first half but when server send back the Ip address in binary to client I got the wrong result. For example i put put 2.3.4.5 the result is like this</p>\n<blockquote>\n<p>IP 2.3.4.5 en binario: java.net.DatagramPacket@12d4bf7e</p>\n</blockquote>\n<p>How can I fix this error. Thank you.</p>\n<p>Class Client</p>\n<pre><code>public class SocketUDPClientIP {\n\npublic static void main(String[] args) throws IOException {\n\n    Scanner scanner = new Scanner(System.in);\n    DatagramSocket clienteSocket = new DatagramSocket();\n    InetAddress ipServidor = InetAddress.getLocalHost();\n    int puerto = 6666;\n    System.out.println(&quot;PROGRAMA CLIENTE INICIADO....&quot;);\n\n    while (scanner.hasNext()) {\n        System.out.println(&quot;Introduzca una IP en formato decimal:&quot;);\n        String ipAd = scanner.nextLine();\n        System.out.println(&quot;Socket Cliente envía IP &quot; + ipAd);\n\n        byte[] enviados = new byte[1024];\n        enviados = ipAd.getBytes();\n        // Enviar\n        DatagramPacket envio = new DatagramPacket(enviados, enviados.length, ipServidor, puerto);\n        clienteSocket.send(envio);\n      \n        byte[] recibidos = new byte[1024];\n        DatagramPacket recibo = new DatagramPacket(recibidos, recibidos.length);\n        clienteSocket.receive(recibo);\n        System.out.println(&quot;Socket Cliente esperando Datagrama del Socket Servidor ..........&quot;);\n        System.out.println(&quot;IP &quot; + ipAd + &quot; en binario: &quot; + recibo);\n       \n        if (ipAd.equals(&quot;0.0.0.0&quot;)) {\n            break;\n        }\n\n    }\n}\n</code></pre>\n<p>}</p>\n<p>Class Server</p>\n<pre><code>public class SocketUDPServerIP {\npublic static void main(String[] args) throws IOException {\n\n    DatagramSocket socket = new DatagramSocket(6666);\n    System.out.println(&quot;Servido esperando al cliente.....&quot;);\n\n    do {\n        DatagramPacket recibo;\n        byte[] buffer = new byte[1024];\n        recibo = new DatagramPacket(buffer, buffer.length);\n        socket.receive(recibo);\n        String ipAd = new String(recibo.getData()).trim();\n        System.out.println(&quot;Recibiendo del CLIENTE: \\n\\t&quot; + ipAd);\n\n        String[] ipAdS = ipAd.split(&quot;\\\\.&quot;);\n        int ipAd1 = Integer.parseInt(ipAdS[0]);\n        int ipAd2 = Integer.parseInt(ipAdS[1]);\n        int ipAd3 = Integer.parseInt(ipAdS[2]);\n        int ipAd4 = Integer.parseInt(ipAdS[3]);\n\n        String ipAdBinary = &quot;&quot;;\n        if (ipAd1 &lt; 256 &amp;&amp; ipAd2 &lt; 256 &amp;&amp; ipAd3 &lt; 256 &amp;&amp; ipAd4 &lt; 256) {\n            String ipad1S = Integer.toBinaryString(ipAd1);\n            String ipad2S = Integer.toBinaryString(ipAd2);\n            String ipad3S = Integer.toBinaryString(ipAd3);\n            String ipad4S = Integer.toBinaryString(ipAd4);\n\n            ipAdBinary = ipad1S + &quot;.&quot; + ipad2S + &quot;.&quot; + ipad3S + &quot;.&quot; + ipad4S;\n            System.out.println(ipAdBinary);\n        } else {\n            ipAdBinary = &quot;El IP &quot; + ipAd + &quot; es un IP no valida, introduzca otra IP&quot;;\n            System.out.println(ipAdBinary);\n        }\n        InetAddress IPOrigen = recibo.getAddress();\n        int puerto = recibo.getPort();\n        DatagramPacket envio = new DatagramPacket(ipAdBinary.getBytes(),ipAdBinary.length(),IPOrigen,puerto);\n        socket.send(envio);\n\n    } while (true);\n\n\n\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","sql","querydsl"],"answers":[{"tags":[],"owner":{"account_id":92092,"reputation":21904,"user_id":252552,"accept_rate":81,"display_name":"Timo Westk&#228;mper"},"comment_count":0,"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1415126998,"creation_date":1415126998,"answer_id":26742755,"question_id":26723376,"body_markdown":"transform combined groupBy is meant to construct tree structures out of flat result sets. What you need can be easier expressed as\r\n\r\n    query.from(application)\r\n         .groupBy(application.category)\r\n         .list(application.category, application.category.count())","title":"querydsl transformer group by count","body":"<p>transform combined groupBy is meant to construct tree structures out of flat result sets. What you need can be easier expressed as</p>\n\n<pre><code>query.from(application)\n     .groupBy(application.category)\n     .list(application.category, application.category.count())\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1492670,"reputation":1291,"user_id":1399395,"accept_rate":83,"display_name":"SputNick"},"comment_count":0,"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1444745013,"creation_date":1444745013,"answer_id":33104797,"question_id":26723376,"body_markdown":"Note that as of **Querydsl 4.x**, the accepted answer by Timo Westk&#228;mper is no longer valid. [Breaking changes in Querydsl 4.0 have removed the query.list() method][1].\r\n\r\nA solution working with Querydsl 4.0+ would now be:\r\n\r\n    query.from(application)\r\n         .groupBy(application.category)\r\n         .select(application.category, application.category.count())\r\n         .fetch();\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/33103432/1399395","title":"querydsl transformer group by count","body":"<p>Note that as of <strong>Querydsl 4.x</strong>, the accepted answer by Timo Westkämper is no longer valid. <a href=\"https://stackoverflow.com/a/33103432/1399395\">Breaking changes in Querydsl 4.0 have removed the query.list() method</a>.</p>\n\n<p>A solution working with Querydsl 4.0+ would now be:</p>\n\n<pre><code>query.from(application)\n     .groupBy(application.category)\n     .select(application.category, application.category.count())\n     .fetch();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2003722,"reputation":1287,"user_id":1794155,"display_name":"nclord"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1538485209,"creation_date":1538485209,"answer_id":52608866,"question_id":26723376,"body_markdown":"If using 4.1.4, you may need to use a **JPAQueryFactory** instead of **JPAQuery**\r\n\r\nIf using JPAQuery, there is no select() or fetch() on the return from groupBy.\r\n\r\n    JPAQueryFactory queryFactory = new JPAQueryFactory(entityManager);\r\n\r\n    queryFactory\r\n         .select(application.category, application.category.count())\r\n         .from(application)\r\n         .groupBy(application.category)\r\n         .fetch();\r\n\r\n\r\n","title":"querydsl transformer group by count","body":"<p>If using 4.1.4, you may need to use a <strong>JPAQueryFactory</strong> instead of <strong>JPAQuery</strong></p>\n\n<p>If using JPAQuery, there is no select() or fetch() on the return from groupBy.</p>\n\n<pre><code>JPAQueryFactory queryFactory = new JPAQueryFactory(entityManager);\n\nqueryFactory\n     .select(application.category, application.category.count())\n     .from(application)\n     .groupBy(application.category)\n     .fetch();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5626834,"reputation":1,"user_id":8722734,"display_name":"Jallow"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675807390,"creation_date":1675807390,"answer_id":75379445,"question_id":26723376,"body_markdown":"In QueryDSL 4.4.0:\r\n\r\n    query.from(application)\r\n       .groupBy(application.category)\r\n       .transform(GroupBy.groupBy(application.category)).as(application.category.count()))\r\n\r\nLearn more on: https://www.tabnine.com/code/java/methods/com.querydsl.jpa.JPQLQuery/transform","title":"querydsl transformer group by count","body":"<p>In QueryDSL 4.4.0:</p>\n<pre><code>query.from(application)\n   .groupBy(application.category)\n   .transform(GroupBy.groupBy(application.category)).as(application.category.count()))\n</code></pre>\n<p>Learn more on: <a href=\"https://www.tabnine.com/code/java/methods/com.querydsl.jpa.JPQLQuery/transform\" rel=\"nofollow noreferrer\">https://www.tabnine.com/code/java/methods/com.querydsl.jpa.JPQLQuery/transform</a></p>\n"}],"owner":{"account_id":3491584,"reputation":442,"user_id":2921131,"accept_rate":83,"display_name":"Wouter Willems"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25057,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":26742755,"answer_count":4,"score":12,"last_activity_date":1675807390,"creation_date":1415049492,"question_id":26723376,"body_markdown":"I am stuck trying to get a query (QueryDSL) to work that gives me a count of distinct categories. \r\nFor example, what I am trying to achieve:\r\n\r\n    categoryA -&gt; 10 entries\r\n    categoryB -&gt; 20 entries\r\n\r\nThis is what i have so far:\r\n\r\n    query().from(application)\r\n\t\t\t\t.transform(groupBy(application.category).as(list(application)));\r\n\r\nHowever, this gives me for each category a list of all whole entries, I just want to get a count of this.\r\n\r\nI tried messing around with `count()` but no luck.\r\n\r\nAnybody know how to do this?\r\n","title":"querydsl transformer group by count","body":"<p>I am stuck trying to get a query (QueryDSL) to work that gives me a count of distinct categories. \nFor example, what I am trying to achieve:</p>\n\n<pre><code>categoryA -&gt; 10 entries\ncategoryB -&gt; 20 entries\n</code></pre>\n\n<p>This is what i have so far:</p>\n\n<pre><code>query().from(application)\n            .transform(groupBy(application.category).as(list(application)));\n</code></pre>\n\n<p>However, this gives me for each category a list of all whole entries, I just want to get a count of this.</p>\n\n<p>I tried messing around with <code>count()</code> but no luck.</p>\n\n<p>Anybody know how to do this?</p>\n"},{"tags":["java","annotation-processing","package-info"],"owner":{"account_id":1697621,"reputation":3812,"user_id":1558654,"display_name":"Marten"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":123,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1675807368,"creation_date":1675804034,"question_id":75378997,"body_markdown":"I&#39;m writing a Java annotation processor that creates `package-info` for packages in a Java project.\r\n\r\nThe code to actually generate the source file looks somewhat like this:\r\n\r\n```java\r\nJavaFileObject builderFile = filer.createSourceFile(packageName + &quot;.package-info&quot;);\r\n\r\ntry (PrintWriter out = new PrintWriter(builderFile.openWriter()))\r\n{\r\n    out.println(&quot;... file content ...&quot;);\r\n}\r\n```\r\n\r\nUnfortunately, this code crashes when there already is a `package-info` for the given package, either in the source code or generated by a previous round.\r\n\r\nNormally, I would just skip the generation if a `package-info` already exists, but I couldn&#39;t find any way to test for the existence of a `package-info`.\r\n\r\n```java\r\nprocessingEnv.getElementUtils().getPackageElement(packageName)\r\n```\r\n\r\nAlways returns a `PackageElement`, regardless of whether there is a `package-info` or not, which seams reasonable, because the package exists with or without the `package-info`.\r\n\r\nThere also doesn&#39;t seem to be an `ElementKind` for `package-info` either and `PackageElement.getEnclosedElements()` only returns the top level classes and interfaces in that package.\r\n\r\nIn lack of a better solution, I&#39;m currently catching and ignoring the `IOException` thrown by `Filer.createSourceFile(String)` in case the `package-info` already exists.\r\n\r\nIs there a way to check if a certain package already contains a `package-info`?\r\n\r\nEdit:\r\n\r\nFWIW, the source file can be found [on Github](https://github.com/dmfs/srcless/blob/main/nullless-processors/src/main/java/org/dmfs/nullless/processors/nullless/NullLessProcessor.java#L70-L83)","title":"Detect package-info in Java Annotation Processor","body":"<p>I'm writing a Java annotation processor that creates <code>package-info</code> for packages in a Java project.</p>\n<p>The code to actually generate the source file looks somewhat like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>JavaFileObject builderFile = filer.createSourceFile(packageName + &quot;.package-info&quot;);\n\ntry (PrintWriter out = new PrintWriter(builderFile.openWriter()))\n{\n    out.println(&quot;... file content ...&quot;);\n}\n</code></pre>\n<p>Unfortunately, this code crashes when there already is a <code>package-info</code> for the given package, either in the source code or generated by a previous round.</p>\n<p>Normally, I would just skip the generation if a <code>package-info</code> already exists, but I couldn't find any way to test for the existence of a <code>package-info</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>processingEnv.getElementUtils().getPackageElement(packageName)\n</code></pre>\n<p>Always returns a <code>PackageElement</code>, regardless of whether there is a <code>package-info</code> or not, which seams reasonable, because the package exists with or without the <code>package-info</code>.</p>\n<p>There also doesn't seem to be an <code>ElementKind</code> for <code>package-info</code> either and <code>PackageElement.getEnclosedElements()</code> only returns the top level classes and interfaces in that package.</p>\n<p>In lack of a better solution, I'm currently catching and ignoring the <code>IOException</code> thrown by <code>Filer.createSourceFile(String)</code> in case the <code>package-info</code> already exists.</p>\n<p>Is there a way to check if a certain package already contains a <code>package-info</code>?</p>\n<p>Edit:</p>\n<p>FWIW, the source file can be found <a href=\"https://github.com/dmfs/srcless/blob/main/nullless-processors/src/main/java/org/dmfs/nullless/processors/nullless/NullLessProcessor.java#L70-L83\" rel=\"nofollow noreferrer\">on Github</a></p>\n"},{"tags":["java","spring-boot","spring-security","openapi","springdoc-openapi-ui"],"answers":[{"tags":[],"owner":{"account_id":16139017,"reputation":129,"user_id":15817444,"display_name":"Mazhar Ibna Zahur"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1675806203,"creation_date":1660925393,"answer_id":73419522,"question_id":73419419,"body_markdown":"You can use `/swagger-ui/**` instead of `/swagger-ui.html` in web security configuration:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    @Bean\r\n    public WebSecurityCustomizer webSecurityCustomizer() {\r\n        return (web) -&gt; web.ignoring()\r\n                           .antMatchers(&quot;/api/auth/**&quot;)\r\n                           .antMatchers(&quot;/v3/api-docs/**&quot;)\r\n                           .antMatchers(&quot;configuration/**&quot;)\r\n                           .antMatchers(&quot;/swagger*/**&quot;)\r\n                           .antMatchers(&quot;/webjars/**&quot;)\r\n                           .antMatchers(&quot;/swagger-ui/**&quot;);\r\n    }\r\n\r\nDid you put `springdoc.swagger-ui.path` in your application property file? ","title":"403 Forbidden for OpenApiSwagger in Spring Boot Security","body":"<p>You can use <code>/swagger-ui/**</code> instead of <code>/swagger-ui.html</code> in web security configuration:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic WebSecurityCustomizer webSecurityCustomizer() {\n    return (web) -&gt; web.ignoring()\n                       .antMatchers(&quot;/api/auth/**&quot;)\n                       .antMatchers(&quot;/v3/api-docs/**&quot;)\n                       .antMatchers(&quot;configuration/**&quot;)\n                       .antMatchers(&quot;/swagger*/**&quot;)\n                       .antMatchers(&quot;/webjars/**&quot;)\n                       .antMatchers(&quot;/swagger-ui/**&quot;);\n}\n</code></pre>\n<p>Did you put <code>springdoc.swagger-ui.path</code> in your application property file?</p>\n"}],"owner":{"account_id":15991228,"reputation":669,"user_id":12091152,"display_name":"Artur Vartanyan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2357,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73419522,"answer_count":1,"score":1,"last_activity_date":1675806325,"creation_date":1660924877,"question_id":73419419,"body_markdown":"I have Spring Boot application with Spring Security. After configure configuration-class localhost-Swagger return 403 Forbidden. I can&#39;t figure out what could be the problem.\r\n\r\nhttp://localhost:8080/swagger-ui.html#/ - 403 Forbidden\r\n\r\nSecurityConfiguration:\r\n```java\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class SecurityConfiguration {\r\n\r\n    @Bean\r\n    public SessionRegistry sessionRegistry() {\r\n        return new SessionRegistryImpl();\r\n    }\r\n\r\n    @Bean\r\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration authenticationConfiguration)\r\n            throws Exception {\r\n        return authenticationConfiguration.getAuthenticationManager();\r\n    }\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        http.csrf().disable()\r\n            .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\r\n\r\n        http.authorizeRequests()\r\n            .antMatchers(&quot;/api/user/login&quot;).permitAll()\r\n            .anyRequest().authenticated();\r\n\r\n        return http.build();\r\n    }\r\n\r\n    @Bean\r\n    public WebSecurityCustomizer webSecurityCustomizer() {\r\n        return (web) -&gt; web.ignoring()\r\n                           .antMatchers(&quot;/api/user/auth&quot;)\r\n                           .antMatchers(&quot;/v3/api-docs&quot;)\r\n                           .antMatchers(&quot;/swagger-resources/**&quot;)\r\n                           .antMatchers(&quot;/swagger-ui.html&quot;)\r\n                           .antMatchers(&quot;/configuration/**&quot;)\r\n                           .antMatchers(&quot;/webjars/**&quot;)\r\n                           .antMatchers(&quot;/public&quot;);\r\n    }\r\n}\r\n```\r\n\r\nbuild.gradle:\r\n```java\r\ndependencies {\r\n    implementation group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-starter-web&#39;, version: &#39;2.7.2&#39;\r\n    implementation group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-starter-jdbc&#39;, version: &#39;2.7.2&#39;\r\n    implementation group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-starter-security&#39;, version: &#39;2.7.2&#39;\r\n\r\n    implementation group: &#39;com.microsoft.sqlserver&#39;, name: &#39;mssql-jdbc&#39;, version: &#39;9.4.1.jre16&#39;\r\n\r\n    implementation group: &#39;org.json&#39;, name: &#39;json&#39;, version: &#39;20220320&#39;\r\n\r\n    implementation group: &#39;org.springdoc&#39;, name: &#39;springdoc-openapi-ui&#39;, version: &#39;1.6.9&#39;\r\n\r\n    implementation group: &#39;javax.xml.bind&#39;, name: &#39;jaxb-api&#39;, version: &#39;2.3.1&#39;\r\n\r\n    compileOnly &#39;org.projectlombok:lombok:1.18.24&#39;\r\n\r\n    annotationProcessor &#39;org.projectlombok:lombok:1.18.24&#39;\r\n}\r\n```\r\n\r\nP.S. Please do not suggest to inherit the class from WebSecurityConfigurerAdapter as it is deprecated in my version of Spring Security.","title":"403 Forbidden for OpenApiSwagger in Spring Boot Security","body":"<p>I have Spring Boot application with Spring Security. After configure configuration-class localhost-Swagger return 403 Forbidden. I can't figure out what could be the problem.</p>\n<p>http://localhost:8080/swagger-ui.html#/ - 403 Forbidden</p>\n<p>SecurityConfiguration:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfiguration {\n\n    @Bean\n    public SessionRegistry sessionRegistry() {\n        return new SessionRegistryImpl();\n    }\n\n    @Bean\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration authenticationConfiguration)\n            throws Exception {\n        return authenticationConfiguration.getAuthenticationManager();\n    }\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http.csrf().disable()\n            .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\n\n        http.authorizeRequests()\n            .antMatchers(&quot;/api/user/login&quot;).permitAll()\n            .anyRequest().authenticated();\n\n        return http.build();\n    }\n\n    @Bean\n    public WebSecurityCustomizer webSecurityCustomizer() {\n        return (web) -&gt; web.ignoring()\n                           .antMatchers(&quot;/api/user/auth&quot;)\n                           .antMatchers(&quot;/v3/api-docs&quot;)\n                           .antMatchers(&quot;/swagger-resources/**&quot;)\n                           .antMatchers(&quot;/swagger-ui.html&quot;)\n                           .antMatchers(&quot;/configuration/**&quot;)\n                           .antMatchers(&quot;/webjars/**&quot;)\n                           .antMatchers(&quot;/public&quot;);\n    }\n}\n</code></pre>\n<p>build.gradle:</p>\n<pre class=\"lang-java prettyprint-override\"><code>dependencies {\n    implementation group: 'org.springframework.boot', name: 'spring-boot-starter-web', version: '2.7.2'\n    implementation group: 'org.springframework.boot', name: 'spring-boot-starter-jdbc', version: '2.7.2'\n    implementation group: 'org.springframework.boot', name: 'spring-boot-starter-security', version: '2.7.2'\n\n    implementation group: 'com.microsoft.sqlserver', name: 'mssql-jdbc', version: '9.4.1.jre16'\n\n    implementation group: 'org.json', name: 'json', version: '20220320'\n\n    implementation group: 'org.springdoc', name: 'springdoc-openapi-ui', version: '1.6.9'\n\n    implementation group: 'javax.xml.bind', name: 'jaxb-api', version: '2.3.1'\n\n    compileOnly 'org.projectlombok:lombok:1.18.24'\n\n    annotationProcessor 'org.projectlombok:lombok:1.18.24'\n}\n</code></pre>\n<p>P.S. Please do not suggest to inherit the class from WebSecurityConfigurerAdapter as it is deprecated in my version of Spring Security.</p>\n"},{"tags":["java","spring-boot","h2","dbeaver"],"answers":[{"tags":[],"owner":{"account_id":27729574,"reputation":11,"user_id":21168367,"display_name":"Andrei Tetka"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675806320,"creation_date":1675806320,"answer_id":75379314,"question_id":67595867,"body_markdown":"You can connect only on local machine. \r\n\r\nFor that choose in Connect by URL and enter your url there. For connect on server you can use only with browser console http://www.h2database.com/html/features.html#auto_mixed_mode\r\n\r\n[DBeaver image. How to connect to local machine][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/pJUks.png","title":"H2 Mixed Mode and DBeaver","body":"<p>You can connect only on local machine.</p>\n<p>For that choose in Connect by URL and enter your url there. For connect on server you can use only with browser console <a href=\"http://www.h2database.com/html/features.html#auto_mixed_mode\" rel=\"nofollow noreferrer\">http://www.h2database.com/html/features.html#auto_mixed_mode</a></p>\n<p><a href=\"https://i.stack.imgur.com/pJUks.png\" rel=\"nofollow noreferrer\">DBeaver image. How to connect to local machine</a></p>\n"}],"owner":{"account_id":18065804,"reputation":27,"user_id":13131727,"display_name":"Matias Boccardo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1170,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1675806320,"creation_date":1621388498,"question_id":67595867,"body_markdown":"I am trying to connect to a local database in a Spring application, which puts H2 in mixed mode. I am trying to connect to Dbeaver, but I get the following message:\r\n\r\n    org.h2.jdbc.JdbcSQLInvalidAuthorizationSpecException: Nombre de usuario &#243; password incorrecto\r\n    Wrong user name or password [28000-200]\r\n    \tat org.h2.message.DbException.getJdbcSQLException(DbException.java:461)\r\n    \tat org.h2.message.DbException.getJdbcSQLException(DbException.java:429)\r\n    \tat org.h2.message.DbException.get(DbException.java:205)\r\n    \tat org.h2.message.DbException.get(DbException.java:181)\r\n    \tat org.h2.message.DbException.get(DbException.java:170)\r\n    \tat org.h2.server.TcpServer.checkKeyAndGetDatabaseName(TcpServer.java:527)\r\n    \tat org.h2.server.TcpServerThread.run(TcpServerThread.java:137)\r\n    \tat java.base/java.lang.Thread.run(Thread.java:832)\r\n    \r\n    Nombre de usuario &#243; password incorrecto\r\n    Wrong user name or password [28000-200]\r\n\r\nDBeaver:\r\n\r\n[Parameters and URL][1]\r\n\r\n\r\nProperties in Spring:\r\n\r\n    server.port = 8080\r\n    spring.datasource.url=jdbc:h2:file:./data/demo;AUTO_SERVER=TRUE;AUTO_SERVER_PORT=9090;DB_CLOSE_DELAY=-1;PASSWORD=password;USER=sa\r\n    spring.datasource.driverClassName=org.h2.Driver\r\n    spring.datasource.username=sa\r\n    spring.datasource.password=password\r\n    spring.jpa.database-platform=org.hibernate.dialect.H2Dialect\r\n    spring.h2.console.enabled=true\r\n    spring.jpa.hibernate.ddl-auto=update\r\n\r\nI tried various things and I can&#39;t connect from DBeaver. Did anyone have a similar problem? Thank you very much to all!\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dH5WF.png","title":"H2 Mixed Mode and DBeaver","body":"<p>I am trying to connect to a local database in a Spring application, which puts H2 in mixed mode. I am trying to connect to Dbeaver, but I get the following message:</p>\n<pre><code>org.h2.jdbc.JdbcSQLInvalidAuthorizationSpecException: Nombre de usuario ó password incorrecto\nWrong user name or password [28000-200]\n    at org.h2.message.DbException.getJdbcSQLException(DbException.java:461)\n    at org.h2.message.DbException.getJdbcSQLException(DbException.java:429)\n    at org.h2.message.DbException.get(DbException.java:205)\n    at org.h2.message.DbException.get(DbException.java:181)\n    at org.h2.message.DbException.get(DbException.java:170)\n    at org.h2.server.TcpServer.checkKeyAndGetDatabaseName(TcpServer.java:527)\n    at org.h2.server.TcpServerThread.run(TcpServerThread.java:137)\n    at java.base/java.lang.Thread.run(Thread.java:832)\n\nNombre de usuario ó password incorrecto\nWrong user name or password [28000-200]\n</code></pre>\n<p>DBeaver:</p>\n<p><a href=\"https://i.stack.imgur.com/dH5WF.png\" rel=\"nofollow noreferrer\">Parameters and URL</a></p>\n<p>Properties in Spring:</p>\n<pre><code>server.port = 8080\nspring.datasource.url=jdbc:h2:file:./data/demo;AUTO_SERVER=TRUE;AUTO_SERVER_PORT=9090;DB_CLOSE_DELAY=-1;PASSWORD=password;USER=sa\nspring.datasource.driverClassName=org.h2.Driver\nspring.datasource.username=sa\nspring.datasource.password=password\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\nspring.h2.console.enabled=true\nspring.jpa.hibernate.ddl-auto=update\n</code></pre>\n<p>I tried various things and I can't connect from DBeaver. Did anyone have a similar problem? Thank you very much to all!</p>\n"},{"tags":["java","list","java-8"],"comments":[{"owner":{"account_id":4354234,"reputation":845,"user_id":3553434,"display_name":"alalalala"},"score":0,"creation_date":1675234537,"post_id":75306514,"comment_id":132882142,"body_markdown":"why use java8 features do this?looks cool?But that doesn&#39;t give you an idea of ​​how the data behaves when you actually loop through it, it seems, you just need a nice looking answer","body":"why use java8 features do this?looks cool?But that doesn&#39;t give you an idea of ​​how the data behaves when you actually loop through it, it seems, you just need a nice looking answer"},{"owner":{"account_id":7471369,"reputation":152,"user_id":5679270,"accept_rate":67,"display_name":"Ali Ansari"},"score":0,"creation_date":1675234992,"post_id":75306514,"comment_id":132882241,"body_markdown":"What do you want in your result? Unique objects with the latest version?","body":"What do you want in your result? Unique objects with the latest version?"},{"owner":{"account_id":21085935,"reputation":63,"user_id":15499060,"display_name":"Shivam"},"score":0,"creation_date":1675235127,"post_id":75306514,"comment_id":132882272,"body_markdown":"yes Unique Object with latest version","body":"yes Unique Object with latest version"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1675236110,"post_id":75306514,"comment_id":132882471,"body_markdown":"I&#39;d recommend you try something first using a json parser (Jackson, Gson, javax.json, ...) and a `Map&lt;String, YourObject&gt;` where the key would be the name. Then you just keep the version with the highest version encountered so far for each name in the map. This can be done with earlier Java versions too but if you&#39;re looking for Java 8 features have a look at `Map.merge(...)`.","body":"I&#39;d recommend you try something first using a json parser (Jackson, Gson, javax.json, ...) and a <code>Map&lt;String, YourObject&gt;</code> where the key would be the name. Then you just keep the version with the highest version encountered so far for each name in the map. This can be done with earlier Java versions too but if you&#39;re looking for Java 8 features have a look at <code>Map.merge(...)</code>."}],"answers":[{"comments":[{"owner":{"account_id":21085935,"reputation":63,"user_id":15499060,"display_name":"Shivam"},"score":0,"creation_date":1675239805,"post_id":75307198,"comment_id":132883430,"body_markdown":"First approach worked. Thanks for your ans.","body":"First approach worked. Thanks for your ans."}],"tags":[],"owner":{"account_id":25339479,"reputation":71,"user_id":19158062,"display_name":"dustbin"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675239159,"creation_date":1675239159,"answer_id":75307198,"question_id":75306514,"body_markdown":"i think two solutions\r\n1. you can use stream to solve the problem.first,group by the name field;then,get the bigger version.\r\n2. you can use the map,when put a object to map,judge the version field.if the version is bigger,you can put it in map.","title":"Getting List of objects with max version property from list of objects Java 8","body":"<p>i think two solutions</p>\n<ol>\n<li>you can use stream to solve the problem.first,group by the name field;then,get the bigger version.</li>\n<li>you can use the map,when put a object to map,judge the version field.if the version is bigger,you can put it in map.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":11415719,"reputation":7030,"user_id":10584605,"display_name":"ETO"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675805958,"creation_date":1675805958,"answer_id":75379261,"question_id":75306514,"body_markdown":"Assuming you have a POJO class like this:\r\n```java\r\nclass YourObject {\r\n  private String name;\r\n  private int version;\r\n  // setters &amp; getters\r\n}\r\n```\r\nthis should do the trick:\r\n```\r\nimport static java.util.Comparator.comparing;\r\nimport static java.util.function.BinaryOperator.maxBy;\r\nimport static java.util.function.Function.identity;\r\nimport static java.util.stream.Collectors.toMap;\r\n\r\n// ...\r\n\r\nList&lt;YourObject&gt; list = ...\r\n\r\n// ...\r\n\r\nList&lt;YourObject&gt; maxVersions = new ArrayList&lt;&gt;(\r\n       list.stream()\r\n           .collect(toMap(YourObject::getName, identity(),\r\n                          maxBy(comparing(YourObject::getVersion))))\r\n           .values()\r\n);\r\n\r\n```\r\n\r\n","title":"Getting List of objects with max version property from list of objects Java 8","body":"<p>Assuming you have a POJO class like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class YourObject {\n  private String name;\n  private int version;\n  // setters &amp; getters\n}\n</code></pre>\n<p>this should do the trick:</p>\n<pre><code>import static java.util.Comparator.comparing;\nimport static java.util.function.BinaryOperator.maxBy;\nimport static java.util.function.Function.identity;\nimport static java.util.stream.Collectors.toMap;\n\n// ...\n\nList&lt;YourObject&gt; list = ...\n\n// ...\n\nList&lt;YourObject&gt; maxVersions = new ArrayList&lt;&gt;(\n       list.stream()\n           .collect(toMap(YourObject::getName, identity(),\n                          maxBy(comparing(YourObject::getVersion))))\n           .values()\n);\n\n</code></pre>\n"}],"owner":{"account_id":21085935,"reputation":63,"user_id":15499060,"display_name":"Shivam"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"answer_count":2,"score":-2,"last_activity_date":1675805958,"creation_date":1675233913,"question_id":75306514,"body_markdown":"I have a list of object. Object contain name and version now in the List we have different names with version and same name with different version.&lt;br/&gt;\r\neg:\r\n\r\n    [\r\n    {\r\n    &quot;name&quot;: &quot;ss&quot;,\r\n    &quot;version&quot;: 1\r\n    },\r\n    {\r\n    &quot;name&quot;: &quot;ss&quot;,\r\n    &quot;version&quot;: 2\r\n    },\r\n    {\r\n    &quot;name&quot;: &quot;sam&quot;,\r\n    &quot;version&quot;: 1\r\n    },\r\n    {\r\n    &quot;name&quot;: &quot;sam&quot;,\r\n    &quot;version&quot;: 2\r\n    },\r\n    {\r\n    &quot;name&quot;: &quot;sim&quot;,\r\n    &quot;version&quot;: 1\r\n    }\r\n    ]\r\nNow in the response i need something like below\r\n\r\n    [\r\n    {\r\n    &quot;name&quot;: &quot;ss&quot;,\r\n    &quot;version&quot;: 2\r\n    },\r\n    {\r\n    &quot;name&quot;: &quot;sam&quot;,\r\n    &quot;version&quot;: 2\r\n    },\r\n    {\r\n    &quot;name&quot;: &quot;sim&quot;,\r\n    &quot;version&quot;: 1\r\n    }\r\n    ]\r\n\r\nCan we do this using java8 features?","title":"Getting List of objects with max version property from list of objects Java 8","body":"<p>I have a list of object. Object contain name and version now in the List we have different names with version and same name with different version.<br/>\neg:</p>\n<pre><code>[\n{\n&quot;name&quot;: &quot;ss&quot;,\n&quot;version&quot;: 1\n},\n{\n&quot;name&quot;: &quot;ss&quot;,\n&quot;version&quot;: 2\n},\n{\n&quot;name&quot;: &quot;sam&quot;,\n&quot;version&quot;: 1\n},\n{\n&quot;name&quot;: &quot;sam&quot;,\n&quot;version&quot;: 2\n},\n{\n&quot;name&quot;: &quot;sim&quot;,\n&quot;version&quot;: 1\n}\n]\n</code></pre>\n<p>Now in the response i need something like below</p>\n<pre><code>[\n{\n&quot;name&quot;: &quot;ss&quot;,\n&quot;version&quot;: 2\n},\n{\n&quot;name&quot;: &quot;sam&quot;,\n&quot;version&quot;: 2\n},\n{\n&quot;name&quot;: &quot;sim&quot;,\n&quot;version&quot;: 1\n}\n]\n</code></pre>\n<p>Can we do this using java8 features?</p>\n"},{"tags":["java","arraylist"],"comments":[{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1675754917,"post_id":75370067,"comment_id":132991407,"body_markdown":"Those aren&#39;t `null` elements (if they were `null` you would be seeing the word &quot;null&quot; in the output). Likely they&#39;re empty `String`s. Doing something like `words.removeIf(String::isEmpty)` might work for you.","body":"Those aren&#39;t <code>null</code> elements (if they were <code>null</code> you would be seeing the word &quot;null&quot; in the output). Likely they&#39;re empty <code>String</code>s. Doing something like <code>words.removeIf(String::isEmpty)</code> might work for you."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":2,"creation_date":1675754985,"post_id":75370067,"comment_id":132991426,"body_markdown":"One problem is that after you&#39;ve removed (say) element 3, you&#39;re still incrementing `i` (to 4) but the *previous* element 4 is now element 3, and you&#39;re not checking it. The typical ways of fixing that are either to decrement `i` after calling `words.remove(i)`, or go from the *end* of the list towards the start (so `for (int i = words.size() - 1; i &gt;= 0; i--)`).","body":"One problem is that after you&#39;ve removed (say) element 3, you&#39;re still incrementing <code>i</code> (to 4) but the <i>previous</i> element 4 is now element 3, and you&#39;re not checking it. The typical ways of fixing that are either to decrement <code>i</code> after calling <code>words.remove(i)</code>, or go from the <i>end</i> of the list towards the start (so <code>for (int i = words.size() - 1; i &gt;= 0; i--)</code>)."}],"answers":[{"tags":[],"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675754951,"creation_date":1675754951,"answer_id":75370093,"question_id":75370067,"body_markdown":"Try looping backwards:\r\n\r\n            for (int i = words.size(); --i &gt;= 0; ) {\r\n                if (words.get(i) == null)\r\n                {\r\n                    words.remove(i);\r\n                }\r\n            }\r\n","title":"How do I remove null elements from an ArrayList in Java?","body":"<p>Try looping backwards:</p>\n<pre><code>        for (int i = words.size(); --i &gt;= 0; ) {\n            if (words.get(i) == null)\n            {\n                words.remove(i);\n            }\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675778040,"creation_date":1675756060,"answer_id":75370283,"question_id":75370067,"body_markdown":"You have two problems:\r\n\r\n1. Your list doesn&#39;t contain any `null` elements. If there were `null` elements in the list, then you&#39;d be seeing output like this:\r\n\r\n    ```lang-none\r\n    [10, years, null, null, 3, Lec, null, null, 3, Lab, null, null, null, Coordinating, Board, Academic, Approval, Number, 1102015707, null]    \r\n    ```\r\n\r\n    What you&#39;re most likely seeing is _empty_ strings (`&quot;&quot;`), or possibly _blank_ strings (i.e., strings that contain only whitespace).\r\n\r\n2. You&#39;re incrementing `i` even when you remove an element. The problem with this is explained in [John Skeet&#39;s comment under your question][1]:\r\n\r\n    &gt; One problem is that after you&#39;ve removed (say) element 3, you&#39;re still incrementing `i` (to 4) but the _previous_ element 4 is now element 3, and you&#39;re not checking it. The typical ways of fixing that are either to decrement `i` after calling `words.remove(i)`, or go from the end of the list towards the start (so `for (int i = words.size() - 1; i &gt;= 0; i--)`).\r\n\r\nThere are a few approaches you could use to fix the problem. All the code below tests if a string is blank via [`String#isBlank()`][2] (instead of testing for nulls). \r\n\r\n**Loop Backwards**\r\n\r\n```lang-java\r\nfor (int i = words.size() - 1; i &gt;= 0; i--) {\r\n    if (words.get(i).isBlank()) {\r\n        words.remove(i);\r\n    }\r\n}\r\n```\r\n\r\n**Use an Iterator**\r\n\r\n```lang-java\r\n// for-loop version\r\nfor (Iterator&lt;String&gt; itr = words.iterator(); itr.hasNext(); ) {\r\n    if (itr.next().isBlank()) {\r\n        itr.remove();\r\n    }\r\n}\r\n\r\n// while-loop version\r\nIterator&lt;String&gt; itr = words.iterator();\r\nwhile (itr.hasNext()) {\r\n    if (itr.next().isBlank()) {\r\n        itr.remove();\r\n    }\r\n}\r\n```\r\n\r\n**Use [`removeIf`][3], passing a [`Predicate`][4]**\r\n\r\n```lang-java\r\n// anonymous class version\r\nwords.removeIf(new Predicate&lt;&gt;() {\r\n    @Override public boolean test(String word) {\r\n        return word.isBlank();\r\n    }\r\n});\r\n\r\n// lambda &quot;block&quot; version\r\nwords.removeIf(word -&gt; {\r\n    return word.isBlank();\r\n});\r\n\r\n// single-expression lambda version\r\nwords.removeIf(word -&gt; word.isBlank());\r\n\r\n// method reference version\r\nwords.removeIf(String::isBlank);\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/75370067/how-do-i-remove-null-elements-from-an-arraylist-in-java#comment132991426_75370067\r\n  [2]: https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/String.html#isBlank()\r\n  [3]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Collection.html#removeIf(java.util.function.Predicate)\r\n  [4]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/Predicate.html","title":"How do I remove null elements from an ArrayList in Java?","body":"<p>You have two problems:</p>\n<ol>\n<li><p>Your list doesn't contain any <code>null</code> elements. If there were <code>null</code> elements in the list, then you'd be seeing output like this:</p>\n<pre class=\"lang-none prettyprint-override\"><code>[10, years, null, null, 3, Lec, null, null, 3, Lab, null, null, null, Coordinating, Board, Academic, Approval, Number, 1102015707, null]    \n</code></pre>\n<p>What you're most likely seeing is <em>empty</em> strings (<code>&quot;&quot;</code>), or possibly <em>blank</em> strings (i.e., strings that contain only whitespace).</p>\n</li>\n<li><p>You're incrementing <code>i</code> even when you remove an element. The problem with this is explained in <a href=\"https://stackoverflow.com/questions/75370067/how-do-i-remove-null-elements-from-an-arraylist-in-java#comment132991426_75370067\">John Skeet's comment under your question</a>:</p>\n<blockquote>\n<p>One problem is that after you've removed (say) element 3, you're still incrementing <code>i</code> (to 4) but the <em>previous</em> element 4 is now element 3, and you're not checking it. The typical ways of fixing that are either to decrement <code>i</code> after calling <code>words.remove(i)</code>, or go from the end of the list towards the start (so <code>for (int i = words.size() - 1; i &gt;= 0; i--)</code>).</p>\n</blockquote>\n</li>\n</ol>\n<p>There are a few approaches you could use to fix the problem. All the code below tests if a string is blank via <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/String.html#isBlank()\" rel=\"nofollow noreferrer\"><code>String#isBlank()</code></a> (instead of testing for nulls).</p>\n<p><strong>Loop Backwards</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>for (int i = words.size() - 1; i &gt;= 0; i--) {\n    if (words.get(i).isBlank()) {\n        words.remove(i);\n    }\n}\n</code></pre>\n<p><strong>Use an Iterator</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>// for-loop version\nfor (Iterator&lt;String&gt; itr = words.iterator(); itr.hasNext(); ) {\n    if (itr.next().isBlank()) {\n        itr.remove();\n    }\n}\n\n// while-loop version\nIterator&lt;String&gt; itr = words.iterator();\nwhile (itr.hasNext()) {\n    if (itr.next().isBlank()) {\n        itr.remove();\n    }\n}\n</code></pre>\n<p><strong>Use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Collection.html#removeIf(java.util.function.Predicate)\" rel=\"nofollow noreferrer\"><code>removeIf</code></a>, passing a <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/Predicate.html\" rel=\"nofollow noreferrer\"><code>Predicate</code></a></strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>// anonymous class version\nwords.removeIf(new Predicate&lt;&gt;() {\n    @Override public boolean test(String word) {\n        return word.isBlank();\n    }\n});\n\n// lambda &quot;block&quot; version\nwords.removeIf(word -&gt; {\n    return word.isBlank();\n});\n\n// single-expression lambda version\nwords.removeIf(word -&gt; word.isBlank());\n\n// method reference version\nwords.removeIf(String::isBlank);\n</code></pre>\n"}],"owner":{"account_id":25950530,"reputation":19,"user_id":19668644,"display_name":"mtzsouza"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":125,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1675863379,"answer_count":2,"score":-2,"last_activity_date":1675805333,"creation_date":1675754774,"question_id":75370067,"body_markdown":"I have been trying to remove null entries from an ArrayList without success.\r\n\r\nFirst, I store all words from a file into an ArrayList using specific delimiters (punctuation and whitespace).\r\n\r\nThen I attempt to remove null entries from the ArrayList.\r\n\r\nWhen I print the whole list, the null entries are still there.\r\n\r\nHow can I solve this?\r\n\r\n```\r\n            ArrayList&lt;String&gt; words = new ArrayList&lt;String&gt;();\r\n            while (scanner.hasNext()) {\r\n                words.add(scanner.next());\r\n            }\r\n\r\n            for (int i = 0; i &lt; words.size(); i++) {\r\n                if (words.get(i) == null)\r\n                {\r\n                    words.remove(i);\r\n                }\r\n            }\r\n```\r\n\r\nExample of current output:\r\n\r\n```\r\n[10, years, , , 3, Lec, , , 3, Lab, , , , Coordinating, Board, Academic, Approval, Number, 1102015707, ]\r\n```\r\n\r\nExample of desired output:\r\n\r\n```\r\n[10, years, 3, Lec, 3, Lab, Coordinating, Board, Academic, Approval, Number, 1102015707]\r\n```","title":"How do I remove null elements from an ArrayList in Java?","body":"<p>I have been trying to remove null entries from an ArrayList without success.</p>\n<p>First, I store all words from a file into an ArrayList using specific delimiters (punctuation and whitespace).</p>\n<p>Then I attempt to remove null entries from the ArrayList.</p>\n<p>When I print the whole list, the null entries are still there.</p>\n<p>How can I solve this?</p>\n<pre><code>            ArrayList&lt;String&gt; words = new ArrayList&lt;String&gt;();\n            while (scanner.hasNext()) {\n                words.add(scanner.next());\n            }\n\n            for (int i = 0; i &lt; words.size(); i++) {\n                if (words.get(i) == null)\n                {\n                    words.remove(i);\n                }\n            }\n</code></pre>\n<p>Example of current output:</p>\n<pre><code>[10, years, , , 3, Lec, , , 3, Lab, , , , Coordinating, Board, Academic, Approval, Number, 1102015707, ]\n</code></pre>\n<p>Example of desired output:</p>\n<pre><code>[10, years, 3, Lec, 3, Lab, Coordinating, Board, Academic, Approval, Number, 1102015707]\n</code></pre>\n"},{"tags":["java","postgresql","spring-boot","database-connection","mybatis"],"comments":[{"owner":{"account_id":1314580,"reputation":3299,"user_id":1261766,"display_name":"ave"},"score":0,"creation_date":1676017309,"post_id":75370597,"comment_id":133056066,"body_markdown":"In general, querying with the condition &#39;last 5 mins&#39; is not a robust strategy.\nA common strategy, I think, is to create another table and save the ID of the last retrieved row after the SELECT.\nYou should be able to SELECT rows that are inserted after the last query by using the saved ID.\nThere won&#39;t be any data loss if the SELECT and UPDATE (that saves the ID) are executed in the same transaction.","body":"In general, querying with the condition &#39;last 5 mins&#39; is not a robust strategy. A common strategy, I think, is to create another table and save the ID of the last retrieved row after the SELECT. You should be able to SELECT rows that are inserted after the last query by using the saved ID. There won&#39;t be any data loss if the SELECT and UPDATE (that saves the ID) are executed in the same transaction."}],"owner":{"account_id":27716616,"reputation":13,"user_id":21158186,"display_name":"learner-newfeatures"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675803947,"creation_date":1675758043,"question_id":75370597,"body_markdown":"I have table in my PostgresSQLDB which gets updated every minute. I am trying to fetch records from this DB basing on a column for every 5 minutes \r\n\r\nTestDBCustomMapper.java\r\n\r\n   `&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n                                                &lt;select id=&quot;getDataIn5minInterval&quot; returnType=&quot;List&quot;&gt;select * from test_table where col_updated_date between current_timestamp::timestamp without time zone - INTERVAL &#39;5 minutes&#39; and current_timestamp::timestamp without time zone\r\n&lt;/select&gt;`\r\n\r\nTestDBServiceImpl.java\r\n\r\n    `List&lt;Records&gt; myList=testDBMapper.getDataIn5minInterval()`\r\n\r\n\r\n\r\n\r\n Now there might be chance that the DB connection might be lost due to network failure or anyother scenarios. If the connection failure is lets say more than 15 min , I might loose 15 min of data since my query fetches the recent 5 min data. How do I ensure that I get continuous updates considering this usecase.\r\n\r\nI have tried to keep the two time ranges in two variables such that when there is connection issue the exception is thrown. if the exception is thrown, the range of timings should be reset. But how do I know when the DB is reconnected once again.","title":"How to reconnect a DB automatically to fetch 5 min interval data continuously without losing the data","body":"<p>I have table in my PostgresSQLDB which gets updated every minute. I am trying to fetch records from this DB basing on a column for every 5 minutes</p>\n<p>TestDBCustomMapper.java</p>\n<p><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; &lt;select id=&quot;getDataIn5minInterval&quot; returnType=&quot;List&quot;&gt;select * from test_table where col_updated_date between current_timestamp::timestamp without time zone - INTERVAL '5 minutes' and current_timestamp::timestamp without time zone &lt;/select&gt;</code></p>\n<p>TestDBServiceImpl.java</p>\n<pre><code>`List&lt;Records&gt; myList=testDBMapper.getDataIn5minInterval()`\n</code></pre>\n<p>Now there might be chance that the DB connection might be lost due to network failure or anyother scenarios. If the connection failure is lets say more than 15 min , I might loose 15 min of data since my query fetches the recent 5 min data. How do I ensure that I get continuous updates considering this usecase.</p>\n<p>I have tried to keep the two time ranges in two variables such that when there is connection issue the exception is thrown. if the exception is thrown, the range of timings should be reset. But how do I know when the DB is reconnected once again.</p>\n"},{"tags":["java","mysql","jdbc","jdbi","jdbi3"],"answers":[{"comments":[{"owner":{"account_id":16935487,"reputation":313,"user_id":12248597,"display_name":"EzyHoo"},"score":0,"creation_date":1675805781,"post_id":75378944,"comment_id":133007153,"body_markdown":"Awesome! \nPer doc, &quot;There is a limitation that only one type of mapper can be nested at a time&quot;. Say beside entry A,the class B has another foreign key called c_id, and I would like to get the actual entry of table C using the c_id. What would be a good option here? A separate sql command to get C entry and explicitly call B&#39;s setC()?","body":"Awesome!  Per doc, &quot;There is a limitation that only one type of mapper can be nested at a time&quot;. Say beside entry A,the class B has another foreign key called c_id, and I would like to get the actual entry of table C using the c_id. What would be a good option here? A separate sql command to get C entry and explicitly call B&#39;s setC()?"},{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":1,"creation_date":1675806915,"post_id":75378944,"comment_id":133007424,"body_markdown":"Yes, the docs do say that - but I am not sure what the context of that sentence is. I think it refers to the mapper created by JDBI behind the scenes _for that field_. You can certainly add a new class `C` - and then in class `B` add a field `private C c;` - and then add a second usage of `@Nested` in `B` for that new field. I have an example of that, and it works as expected. You should not need a second SQL query to populate `C` into `B`.","body":"Yes, the docs do say that - but I am not sure what the context of that sentence is. I think it refers to the mapper created by JDBI behind the scenes <i>for that field</i>. You can certainly add a new class <code>C</code> - and then in class <code>B</code> add a field <code>private C c;</code> - and then add a second usage of <code>@Nested</code> in <code>B</code> for that new field. I have an example of that, and it works as expected. You should not need a second SQL query to populate <code>C</code> into <code>B</code>."},{"owner":{"account_id":16935487,"reputation":313,"user_id":12248597,"display_name":"EzyHoo"},"score":0,"creation_date":1675876618,"post_id":75378944,"comment_id":133023819,"body_markdown":"Any suggestion for writing the class B into the database then? Since the actual object is stored instead of foreign key, which is different with db schema. I cannot do BindBean(). What would be the best way to do store the POJO into DB?","body":"Any suggestion for writing the class B into the database then? Since the actual object is stored instead of foreign key, which is different with db schema. I cannot do BindBean(). What would be the best way to do store the POJO into DB?"},{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":1,"creation_date":1675877020,"post_id":75378944,"comment_id":133023985,"body_markdown":"That is worth asking as a brand new question, I think. You will get more viewers/eyeballs and better answers that way!","body":"That is worth asking as a brand new question, I think. You will get more viewers/eyeballs and better answers that way!"}],"tags":[],"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675803768,"creation_date":1675803768,"answer_id":75378944,"question_id":75377182,"body_markdown":"One approach (there are others, also) is to use the JDBI `@Nested` annotation with a [bean mapper](https://jdbi.org/#_beanmapper). The annotation:\r\n\r\n&gt; &quot;...creates a mapper for the nested bean.&quot;\r\n\r\nPlace the annotation on the relevant setter (or getter). So, in your case that would be like this:\r\n\r\n\r\n```java\r\nimport org.jdbi.v3.core.mapper.Nested;\r\nimport org.jdbi.v3.core.mapper.reflect.ColumnName;\r\n\r\npublic class B {\r\n\r\n    private long id; // auto-increment primary key\r\n    private A a; // actual object of class A\r\n    private String bAttribute;\r\n\r\n    @ColumnName(&quot;b_id&quot;)\r\n    public long getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(long id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public A getA() {\r\n        return a;\r\n    }\r\n\r\n    @Nested\r\n    public void setA(A a) {\r\n        this.a = a;\r\n    }\r\n\r\n    @ColumnName(&quot;b_attribute&quot;)\r\n    public String getBAttribute() {\r\n        return bAttribute;\r\n    }\r\n\r\n    public void setBAttribute(String bAttribute) {\r\n        this.bAttribute = bAttribute;\r\n    }\r\n\r\n}\r\n```\r\n\r\nI have also added `@ColumnName` annotations to disambiguate the otherwise identical column names between the two objects (and, presumably, the tables).  \r\n\r\nHere is class A:\r\n\r\n```java\r\npackage com.northcoder.jdbidemo;\r\n\r\nimport org.jdbi.v3.core.mapper.reflect.ColumnName;\r\n\r\npublic class A {\r\n\r\n    private long id; // auto-increment primary key\r\n    private String aAttribute;\r\n\r\n    @ColumnName(&quot;a_id&quot;)\r\n    public long getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(long id) {\r\n        this.id = id;\r\n    }\r\n\r\n    @ColumnName(&quot;a_attribute&quot;)\r\n    public String getAAttribute() {\r\n        return aAttribute;\r\n    }\r\n\r\n    public void setAAttribute(String aAttribute) {\r\n        this.aAttribute = aAttribute;\r\n    }\r\n\r\n}\r\n```\r\n\r\nA query therefore needs to use column aliases to match these annotations:\r\n\r\n```java\r\nString sql = &quot;&quot;&quot;\r\n             select b.id as b_id, b.bAttribute as b_attribute, a.id as a_id, a.aAttribute as a_attribute\r\n             from your_db.a as a\r\n             inner join your_db.b as b\r\n             on a.id = b.a_id;\r\n             &quot;&quot;&quot;;\r\n\r\njdbi.useHandle(handle -&gt; {\r\n    List&lt;B&gt; bees = handle\r\n            .select(sql)\r\n            .mapToBean(B.class)\r\n            .list();\r\n});\r\n```\r\n\r\nEach instance of class B in the resulting list will contain an instance of A (assuming the data exists in the database).","title":"How to map foreign key attribute to record in Java with JDBI","body":"<p>One approach (there are others, also) is to use the JDBI <code>@Nested</code> annotation with a <a href=\"https://jdbi.org/#_beanmapper\" rel=\"nofollow noreferrer\">bean mapper</a>. The annotation:</p>\n<blockquote>\n<p>&quot;...creates a mapper for the nested bean.&quot;</p>\n</blockquote>\n<p>Place the annotation on the relevant setter (or getter). So, in your case that would be like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.jdbi.v3.core.mapper.Nested;\nimport org.jdbi.v3.core.mapper.reflect.ColumnName;\n\npublic class B {\n\n    private long id; // auto-increment primary key\n    private A a; // actual object of class A\n    private String bAttribute;\n\n    @ColumnName(&quot;b_id&quot;)\n    public long getId() {\n        return id;\n    }\n\n    public void setId(long id) {\n        this.id = id;\n    }\n\n    public A getA() {\n        return a;\n    }\n\n    @Nested\n    public void setA(A a) {\n        this.a = a;\n    }\n\n    @ColumnName(&quot;b_attribute&quot;)\n    public String getBAttribute() {\n        return bAttribute;\n    }\n\n    public void setBAttribute(String bAttribute) {\n        this.bAttribute = bAttribute;\n    }\n\n}\n</code></pre>\n<p>I have also added <code>@ColumnName</code> annotations to disambiguate the otherwise identical column names between the two objects (and, presumably, the tables).</p>\n<p>Here is class A:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.northcoder.jdbidemo;\n\nimport org.jdbi.v3.core.mapper.reflect.ColumnName;\n\npublic class A {\n\n    private long id; // auto-increment primary key\n    private String aAttribute;\n\n    @ColumnName(&quot;a_id&quot;)\n    public long getId() {\n        return id;\n    }\n\n    public void setId(long id) {\n        this.id = id;\n    }\n\n    @ColumnName(&quot;a_attribute&quot;)\n    public String getAAttribute() {\n        return aAttribute;\n    }\n\n    public void setAAttribute(String aAttribute) {\n        this.aAttribute = aAttribute;\n    }\n\n}\n</code></pre>\n<p>A query therefore needs to use column aliases to match these annotations:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String sql = &quot;&quot;&quot;\n             select b.id as b_id, b.bAttribute as b_attribute, a.id as a_id, a.aAttribute as a_attribute\n             from your_db.a as a\n             inner join your_db.b as b\n             on a.id = b.a_id;\n             &quot;&quot;&quot;;\n\njdbi.useHandle(handle -&gt; {\n    List&lt;B&gt; bees = handle\n            .select(sql)\n            .mapToBean(B.class)\n            .list();\n});\n</code></pre>\n<p>Each instance of class B in the resulting list will contain an instance of A (assuming the data exists in the database).</p>\n"}],"owner":{"account_id":16935487,"reputation":313,"user_id":12248597,"display_name":"EzyHoo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":412,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75378944,"answer_count":1,"score":0,"last_activity_date":1675803768,"creation_date":1675792385,"question_id":75377182,"body_markdown":"Say my DB looks like this, presenting using POJO:\r\n\r\n````\r\nclass A {\r\n   long id; // auto-increment primary key\r\n   String aAttribute;\r\n}\r\n````\r\n\r\n````\r\nclass B {\r\n   long id; // auto-increment primary key\r\n   long aId; // foreign key of class A\r\n   String bAttribute;     \r\n}\r\n````\r\n\r\nHow could I naturally map the DB records to class B using JDBI so the class B could contain the actual object of A instead of a foreign key to A:\r\n\r\n````\r\nclass B {\r\n   long id; // auto-increment primary key\r\n   A a; // actual object of class A\r\n   String bAttribute;    \r\n}\r\n````\r\n\r\n","title":"How to map foreign key attribute to record in Java with JDBI","body":"<p>Say my DB looks like this, presenting using POJO:</p>\n<pre><code>class A {\n   long id; // auto-increment primary key\n   String aAttribute;\n}\n</code></pre>\n<pre><code>class B {\n   long id; // auto-increment primary key\n   long aId; // foreign key of class A\n   String bAttribute;     \n}\n</code></pre>\n<p>How could I naturally map the DB records to class B using JDBI so the class B could contain the actual object of A instead of a foreign key to A:</p>\n<pre><code>class B {\n   long id; // auto-increment primary key\n   A a; // actual object of class A\n   String bAttribute;    \n}\n</code></pre>\n"},{"tags":["java","json","junit","mockito","mockmvc"],"comments":[{"owner":{"account_id":4012793,"reputation":1627,"user_id":3305737,"display_name":"Jonasz"},"score":0,"creation_date":1675707990,"post_id":75356808,"comment_id":132982878,"body_markdown":"Does `User` class extend `equals` method? Could you show the code of the tested controller method?","body":"Does <code>User</code> class extend <code>equals</code> method? Could you show the code of the tested controller method?"},{"owner":{"account_id":9741779,"reputation":1,"user_id":9743705,"display_name":"David Macias Mata"},"score":0,"creation_date":1675803315,"post_id":75356808,"comment_id":133006520,"body_markdown":"I guess I&#39;m having trouble understanding how to get the body results from the ResponseEntity.status(HttpStatus.CREATED).body(authService.register(created))","body":"I guess I&#39;m having trouble understanding how to get the body results from the ResponseEntity.status(HttpStatus.CREATED).body(authService.r&zwnj;&#8203;egister(created))"},{"owner":{"account_id":4012793,"reputation":1627,"user_id":3305737,"display_name":"Jonasz"},"score":0,"creation_date":1675837591,"post_id":75356808,"comment_id":133011711,"body_markdown":"Does `User` class extend `equals` method?","body":"Does <code>User</code> class extend <code>equals</code> method?"},{"owner":{"account_id":9741779,"reputation":1,"user_id":9743705,"display_name":"David Macias Mata"},"score":0,"creation_date":1675893779,"post_id":75356808,"comment_id":133028652,"body_markdown":"It does not, but I finally figured it out!\n\nThe big was in the given function. I fixed it with\n\ngiven(authService.register(any())).willReturn(testUser1);","body":"It does not, but I finally figured it out!  The big was in the given function. I fixed it with  given(authService.register(any())).willReturn(testUser1);"},{"owner":{"account_id":4012793,"reputation":1627,"user_id":3305737,"display_name":"Jonasz"},"score":0,"creation_date":1675921492,"post_id":75356808,"comment_id":133032713,"body_markdown":"`any()` matcher accepts any value as the name states. You might want to use some other method of matching - see this answer for more details: https://stackoverflow.com/a/73745189/3305737","body":"<code>any()</code> matcher accepts any value as the name states. You might want to use some other method of matching - see this answer for more details: <a href=\"https://stackoverflow.com/a/73745189/3305737\">stackoverflow.com/a/73745189/3305737</a>"}],"owner":{"account_id":9741779,"reputation":1,"user_id":9743705,"display_name":"David Macias Mata"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":248,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675802964,"creation_date":1675649683,"question_id":75356808,"body_markdown":"So I have been doing some testing for a server and I keep getting this error \r\n&quot;java.lang.AssertionError: No value at JSON path &quot;$.id&quot;\r\n\r\nThis is the code that I have used. Not sure why it&#39;s not reading the jSon correctly, as it doesn&#39;t do this with all the other code written.\r\n\r\n```\r\n@Test\r\n    public void registerSuccessful() throws Exception {\r\n        User testUser1 = new User(&quot;test.com&quot;, &quot;password&quot;, &quot;John&quot;, &quot;Doe&quot;, &quot;JDoe&quot;);\r\n        testUser1.setId(1);\r\n        given(authService.register(testUser1)).willReturn(testUser1);\r\n\r\n        String requestBody = objectMapper.writeValueAsString(testUser1);\r\n        this.mockMvc.perform(post(&quot;/auth/register&quot;)\r\n                        .contentType(MediaType.APPLICATION_JSON)\r\n                        .content(requestBody))\r\n                .andExpect(status().is(201)).andDo(print())\r\n                .andExpect(MockMvcResultMatchers.jsonPath(&quot;$.id&quot;, is(1)))\r\n                .andExpect(jsonPath(&quot;$.email&quot;, is(&quot;test.com&quot;)))\r\n                .andExpect(jsonPath(&quot;$.password&quot;, is(testUser1.getPassword())))\r\n                .andExpect(jsonPath(&quot;$.firstName&quot;, is(testUser1.getFirstName())))\r\n                .andExpect(jsonPath(&quot;$.lastName&quot;, is(testUser1.getLastName())))\r\n                .andExpect(jsonPath(&quot;$.username&quot;, is(testUser1.getUsername())))\r\n                .andExpect(jsonPath(&quot;$.imageUrl&quot;, is(testUser1.getImageUrl())));\r\n    }\r\n```\r\n\r\n\r\nHere is the AuthController\r\n```\r\n @PostMapping(&quot;/register&quot;)\r\n    public ResponseEntity&lt;User&gt; register(@RequestBody RegisterRequest registerRequest) {\r\n        User created = new User(\r\n                registerRequest.getEmail(),\r\n                registerRequest.getPassword(),\r\n                registerRequest.getFirstName(),\r\n                registerRequest.getLastName(),\r\n                registerRequest.getUsername());\r\n\r\n        return ResponseEntity.status(HttpStatus.CREATED).body(authService.register(created));\r\n    }\r\n```","title":"java.lang.AssertionError: No value at JSON path &quot;$.id&quot;","body":"<p>So I have been doing some testing for a server and I keep getting this error\n&quot;java.lang.AssertionError: No value at JSON path &quot;$.id&quot;</p>\n<p>This is the code that I have used. Not sure why it's not reading the jSon correctly, as it doesn't do this with all the other code written.</p>\n<pre><code>@Test\n    public void registerSuccessful() throws Exception {\n        User testUser1 = new User(&quot;test.com&quot;, &quot;password&quot;, &quot;John&quot;, &quot;Doe&quot;, &quot;JDoe&quot;);\n        testUser1.setId(1);\n        given(authService.register(testUser1)).willReturn(testUser1);\n\n        String requestBody = objectMapper.writeValueAsString(testUser1);\n        this.mockMvc.perform(post(&quot;/auth/register&quot;)\n                        .contentType(MediaType.APPLICATION_JSON)\n                        .content(requestBody))\n                .andExpect(status().is(201)).andDo(print())\n                .andExpect(MockMvcResultMatchers.jsonPath(&quot;$.id&quot;, is(1)))\n                .andExpect(jsonPath(&quot;$.email&quot;, is(&quot;test.com&quot;)))\n                .andExpect(jsonPath(&quot;$.password&quot;, is(testUser1.getPassword())))\n                .andExpect(jsonPath(&quot;$.firstName&quot;, is(testUser1.getFirstName())))\n                .andExpect(jsonPath(&quot;$.lastName&quot;, is(testUser1.getLastName())))\n                .andExpect(jsonPath(&quot;$.username&quot;, is(testUser1.getUsername())))\n                .andExpect(jsonPath(&quot;$.imageUrl&quot;, is(testUser1.getImageUrl())));\n    }\n</code></pre>\n<p>Here is the AuthController</p>\n<pre><code> @PostMapping(&quot;/register&quot;)\n    public ResponseEntity&lt;User&gt; register(@RequestBody RegisterRequest registerRequest) {\n        User created = new User(\n                registerRequest.getEmail(),\n                registerRequest.getPassword(),\n                registerRequest.getFirstName(),\n                registerRequest.getLastName(),\n                registerRequest.getUsername());\n\n        return ResponseEntity.status(HttpStatus.CREATED).body(authService.register(created));\n    }\n</code></pre>\n"},{"tags":["java","intellij-idea","lombok"],"comments":[{"owner":{"account_id":3311159,"reputation":3521,"user_id":3839716,"display_name":"CodeShadow"},"score":0,"creation_date":1525765717,"post_id":17729384,"comment_id":87474175,"body_markdown":"My answer here: https://stackoverflow.com/a/42809311/3839716","body":"My answer here: <a href=\"https://stackoverflow.com/a/42809311/3839716\">stackoverflow.com/a/42809311/3839716</a>"},{"owner":{"account_id":6921189,"reputation":1490,"user_id":5313817,"display_name":"Rishal"},"score":0,"creation_date":1631029759,"post_id":17729384,"comment_id":122111250,"body_markdown":"Adding one more info which i tried as comment for people looking for answers after every trick they tried.\n\nPlease invalidate your lib cache-&gt;delete .m2 folder and build the project again.","body":"Adding one more info which i tried as comment for people looking for answers after every trick they tried.  Please invalidate your lib cache-&gt;delete .m2 folder and build the project again."}],"answers":[{"comments":[{"owner":{"account_id":1298975,"reputation":2429,"user_id":1249278,"display_name":"shafeen"},"score":9,"creation_date":1439672541,"post_id":17729637,"comment_id":51960163,"body_markdown":"I tried this and it didn&#39;t actually solve my problem, are there are options I should be looking at?","body":"I tried this and it didn&#39;t actually solve my problem, are there are options I should be looking at?"},{"owner":{"account_id":3114066,"reputation":796,"user_id":2635251,"accept_rate":17,"display_name":"learner"},"score":1,"creation_date":1503824660,"post_id":17729637,"comment_id":78765306,"body_markdown":"&quot;Compiler&quot; option is present under &quot;Build, Execution, Deployment&quot; option on &quot;Settings&quot; Page in intellij 2017 edition.","body":"&quot;Compiler&quot; option is present under &quot;Build, Execution, Deployment&quot; option on &quot;Settings&quot; Page in intellij 2017 edition."},{"owner":{"account_id":6425988,"reputation":606,"user_id":4981126,"display_name":"bl4ckr0se"},"score":2,"creation_date":1548106038,"post_id":17729637,"comment_id":95416398,"body_markdown":"In a combination of Lombok Plugin.","body":"In a combination of Lombok Plugin."},{"owner":{"account_id":7332798,"reputation":689,"user_id":5585130,"display_name":"Mario Codes"},"score":0,"creation_date":1599556535,"post_id":17729637,"comment_id":112802817,"body_markdown":"in addition to this, my problem was after doing this 2 steps it needed a `mvn clean install` and then use the button `Maven` -&gt; `Reimport All Maven Projects`.","body":"in addition to this, my problem was after doing this 2 steps it needed a <code>mvn clean install</code> and then use the button <code>Maven</code> -&gt; <code>Reimport All Maven Projects</code>."},{"owner":{"account_id":10942565,"reputation":1483,"user_id":8041854,"accept_rate":50,"display_name":"Gvtha"},"score":1,"creation_date":1629458162,"post_id":17729637,"comment_id":121698080,"body_markdown":"In my office, restricted to install plugins. Is there any other way we can add lombok? I have the lombok jar file.","body":"In my office, restricted to install plugins. Is there any other way we can add lombok? I have the lombok jar file."}],"tags":[],"owner":{"account_id":1064249,"reputation":4160,"user_id":1367948,"accept_rate":62,"display_name":"Don Quixote"},"comment_count":5,"down_vote_count":1,"up_vote_count":188,"is_accepted":true,"score":187,"last_activity_date":1554445953,"creation_date":1374166603,"answer_id":17729637,"question_id":17729384,"body_markdown":"I fixed it by ticking the &quot;Enable annotation processing&quot; checkbox in Settings-&gt;Compiler-&gt;Annotation Processors.\r\n\r\nAlong with this you might also need to install `lombok` plugin as mentioned in [@X.Chen&#39;s answer][1] for new versions of IntelliJ Idea. \r\n\r\n\r\n  [1]: https://stackoverflow.com/a/31084929/1610034","title":"Lombok added but getters and setters not recognized in Intellij IDEA","body":"<p>I fixed it by ticking the \"Enable annotation processing\" checkbox in Settings->Compiler->Annotation Processors.</p>\n\n<p>Along with this you might also need to install <code>lombok</code> plugin as mentioned in <a href=\"https://stackoverflow.com/a/31084929/1610034\">@X.Chen's answer</a> for new versions of IntelliJ Idea. </p>\n"},{"tags":[],"owner":{"account_id":3441111,"reputation":1,"user_id":2883070,"display_name":"user2883070"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1435379985,"creation_date":1386860862,"answer_id":20547041,"question_id":17729384,"body_markdown":"I fixed it by following steps:\r\n\r\n 1. Installed previous version of Idea(12.16) and start it(idea 13 was launched)\r\n 2. then i switch on window with idea 13 (it proposed to reread some config files. I agreed and restart my IDE). And then everithing became ok with tha latest version of IDEA","title":"Lombok added but getters and setters not recognized in Intellij IDEA","body":"<p>I fixed it by following steps:</p>\n\n<ol>\n<li>Installed previous version of Idea(12.16) and start it(idea 13 was launched)</li>\n<li>then i switch on window with idea 13 (it proposed to reread some config files. I agreed and restart my IDE). And then everithing became ok with tha latest version of IDEA</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":4608033,"reputation":9671,"user_id":3736955,"accept_rate":71,"display_name":"Jemshit"},"score":5,"creation_date":1449832472,"post_id":31084929,"comment_id":56188226,"body_markdown":"This solved, on Android Studio this plugin is needed","body":"This solved, on Android Studio this plugin is needed"},{"owner":{"account_id":5156897,"reputation":417,"user_id":4129893,"display_name":"TheFreddyKilo"},"score":2,"creation_date":1553746184,"post_id":31084929,"comment_id":97501301,"body_markdown":"Woohoo! Had to do this after a new IntelliJ version install. Did not realize lombok was a plugin.","body":"Woohoo! Had to do this after a new IntelliJ version install. Did not realize lombok was a plugin."},{"owner":{"account_id":1682106,"reputation":3953,"user_id":1546137,"accept_rate":67,"display_name":"ihebiheb"},"score":1,"creation_date":1607354775,"post_id":31084929,"comment_id":115239212,"body_markdown":"Same here after an IntellijJ Update : Had to update Lombok","body":"Same here after an IntellijJ Update : Had to update Lombok"},{"owner":{"account_id":6849189,"reputation":61,"user_id":5266854,"display_name":"anjanagnet"},"score":0,"creation_date":1699497062,"post_id":31084929,"comment_id":136540613,"body_markdown":"This worked for me!","body":"This worked for me!"}],"tags":[],"owner":{"account_id":5589101,"reputation":3449,"user_id":4428861,"display_name":"X.Chen"},"comment_count":4,"down_vote_count":0,"up_vote_count":331,"is_accepted":false,"score":331,"last_activity_date":1556105783,"creation_date":1435376731,"answer_id":31084929,"question_id":17729384,"body_markdown":"You need to install the Lombok plugin for IDEA. Open the Settings panel (Ctrl + Alt + S). Search for &quot;Plugins&quot;, then search for &quot;Lombok&quot; in the plugins. Find the plugin and install it. Finally, restart your IDEA. Then everything will be OK!","title":"Lombok added but getters and setters not recognized in Intellij IDEA","body":"<p>You need to install the Lombok plugin for IDEA. Open the Settings panel (Ctrl + Alt + S). Search for \"Plugins\", then search for \"Lombok\" in the plugins. Find the plugin and install it. Finally, restart your IDEA. Then everything will be OK!</p>\n"},{"tags":[],"owner":{"account_id":7194833,"reputation":1229,"user_id":5493986,"accept_rate":100,"display_name":"Blawless"},"comment_count":0,"down_vote_count":0,"up_vote_count":61,"is_accepted":false,"score":61,"last_activity_date":1487765064,"creation_date":1487765064,"answer_id":42390952,"question_id":17729384,"body_markdown":"It is a combination of \r\n\r\n - Ticking the &quot;**Enable annotation processing**&quot; checkbox in\r\n Settings-&gt;Compiler-&gt;Annotation Processors.\r\n\r\n and\r\n\r\n - Install the **plugin of Lombok** for idea and restart for change to take effect.\r\n\r\n","title":"Lombok added but getters and setters not recognized in Intellij IDEA","body":"<p>It is a combination of </p>\n\n<ul>\n<li><p>Ticking the \"<strong>Enable annotation processing</strong>\" checkbox in\nSettings->Compiler->Annotation Processors.</p>\n\n<p>and</p></li>\n<li><p>Install the <strong>plugin of Lombok</strong> for idea and restart for change to take effect.</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":10587049,"reputation":59,"user_id":7799029,"display_name":"Jatin Gera"},"comment_count":0,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1490983155,"creation_date":1490983155,"answer_id":43146933,"question_id":17729384,"body_markdown":"1.\tGo to File &gt; Settings &gt; Plugins.\r\n\t2.\tClick on Browse repositories...\r\n\t3.\tSearch for Lombok Plugin.\r\n\t4.\tClick on Install plugin.\r\n\t5.\tRestart Android Studio.","title":"Lombok added but getters and setters not recognized in Intellij IDEA","body":"<ol>\n<li>Go to File > Settings > Plugins.\n\n<ol start=\"2\">\n<li>Click on Browse repositories...</li>\n<li>Search for Lombok Plugin.</li>\n<li>Click on Install plugin.</li>\n<li>Restart Android Studio.</li>\n</ol></li>\n</ol>\n"},{"comments":[{"owner":{"account_id":7864671,"reputation":452,"user_id":5943840,"display_name":"Raphael"},"score":0,"creation_date":1610752824,"post_id":48470371,"comment_id":116240847,"body_markdown":"On `2020.3`, accessing default settings looks like: `File -&gt; New Projects Settings -&gt; Preferences for New Projects`.","body":"On <code>2020.3</code>, accessing default settings looks like: <code>File -&gt; New Projects Settings -&gt; Preferences for New Projects</code>."}],"tags":[],"owner":{"account_id":9120249,"reputation":15521,"user_id":6785908,"accept_rate":70,"display_name":"so-random-dude"},"comment_count":1,"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1518754273,"creation_date":1517005040,"answer_id":48470371,"question_id":17729384,"body_markdown":"If you are on `Mac`, make sure you enable annotation processing (tick the checkbox) at these 2 places.\n\n&gt; 1.) Intellij IDEA -&gt; Preferences -&gt; Compiler -&gt; Annotation Processors\n&gt; \n&gt; 2.) File -&gt; Other Settings -&gt; Default Settings -&gt; Compiler -&gt; Annotation Processors\n\nAnd then \n\n&gt; 3.) Intellij IDEA -&gt; Preferences -&gt; Plugins -&gt;Browse Repositories-&gt; Search for &quot;Lombok&quot;-&gt; install plugin -&gt; Apply and restart IDEA\n&gt;\n&gt; 4.) And then probably restart Intellij IDEA.\n\nThis is my IntelliJ IDEA and Mac Version - IntelliJ IDEA 2017.1.5 Build #IU-171.4694.70   --- Mac OS X 10.12\n\n\n","title":"Lombok added but getters and setters not recognized in Intellij IDEA","body":"<p>If you are on <code>Mac</code>, make sure you enable annotation processing (tick the checkbox) at these 2 places.</p>\n<blockquote>\n<p>1.) Intellij IDEA -&gt; Preferences -&gt; Compiler -&gt; Annotation Processors</p>\n<p>2.) File -&gt; Other Settings -&gt; Default Settings -&gt; Compiler -&gt; Annotation Processors</p>\n</blockquote>\n<p>And then</p>\n<blockquote>\n<p>3.) Intellij IDEA -&gt; Preferences -&gt; Plugins -&gt;Browse Repositories-&gt; Search for &quot;Lombok&quot;-&gt; install plugin -&gt; Apply and restart IDEA</p>\n<p>4.) And then probably restart Intellij IDEA.</p>\n</blockquote>\n<p>This is my IntelliJ IDEA and Mac Version - IntelliJ IDEA 2017.1.5 Build #IU-171.4694.70   --- Mac OS X 10.12</p>\n"},{"tags":[],"owner":{"account_id":10073392,"reputation":169,"user_id":7446304,"display_name":"greencrest"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1522918042,"creation_date":1522917246,"answer_id":49667724,"question_id":17729384,"body_markdown":"In my case it was migrating from idea 2017 to 2018 and Lombok plugin was already there. \r\nAll I did is added &quot;Enable annotation processing options&quot;\r\n[entering preferences][3]\r\nand [check the box][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/LIpJl.png\r\n  [3]: https://i.stack.imgur.com/KNvsL.png","title":"Lombok added but getters and setters not recognized in Intellij IDEA","body":"<p>In my case it was migrating from idea 2017 to 2018 and Lombok plugin was already there. \nAll I did is added \"Enable annotation processing options\"\n<a href=\"https://i.stack.imgur.com/KNvsL.png\" rel=\"nofollow noreferrer\">entering preferences</a>\nand <a href=\"https://i.stack.imgur.com/LIpJl.png\" rel=\"nofollow noreferrer\">check the box</a></p>\n"},{"tags":[],"owner":{"account_id":9615566,"reputation":5188,"user_id":7138492,"accept_rate":100,"display_name":"Sergey Emeliyanov"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1523554265,"creation_date":1523554265,"answer_id":49802717,"question_id":17729384,"body_markdown":"It&#39;s possible that you already have the `Lombok` plugin, and still the generated methods are not recognised by `Android Studio`. In such case the plugin might be out of date, so the solution is to simply update it. \r\n\r\nPreferences -&gt; Plugins -&gt; Lombok Plugin -&gt; **Update Plugin**","title":"Lombok added but getters and setters not recognized in Intellij IDEA","body":"<p>It's possible that you already have the <code>Lombok</code> plugin, and still the generated methods are not recognised by <code>Android Studio</code>. In such case the plugin might be out of date, so the solution is to simply update it. </p>\n\n<p>Preferences -> Plugins -> Lombok Plugin -> <strong>Update Plugin</strong></p>\n"},{"comments":[{"owner":{"account_id":7696436,"reputation":2059,"user_id":5830773,"display_name":"M. Schena"},"score":2,"creation_date":1540908511,"post_id":49803033,"comment_id":93030668,"body_markdown":"you sir just finished my 1 hour search of this damn problem","body":"you sir just finished my 1 hour search of this damn problem"},{"owner":{"account_id":7450965,"reputation":1416,"user_id":5665753,"display_name":"Jason Slobotski"},"score":2,"creation_date":1541000930,"post_id":49803033,"comment_id":93071603,"body_markdown":"Haha! Glad I could help sir.","body":"Haha! Glad I could help sir."},{"owner":{"account_id":5389961,"reputation":1513,"user_id":4292792,"accept_rate":92,"display_name":"Carrm"},"score":1,"creation_date":1547281791,"post_id":49803033,"comment_id":95146053,"body_markdown":"Same here, it didn&#39;t work after the upgrade to 2018 IDEA. You don&#39;t have to reinstall the plugin though. Just go to `Settings &gt; Plugins`, open the `Updates` tab, and you should see an update for Lombok. After Lombok&#39;s update and another restart of Intellij, it should work.","body":"Same here, it didn&#39;t work after the upgrade to 2018 IDEA. You don&#39;t have to reinstall the plugin though. Just go to <code>Settings &gt; Plugins</code>, open the <code>Updates</code> tab, and you should see an update for Lombok. After Lombok&#39;s update and another restart of Intellij, it should work."},{"owner":{"account_id":11184916,"reputation":481,"user_id":8207637,"display_name":"Trevor"},"score":0,"creation_date":1598044519,"post_id":49803033,"comment_id":112340592,"body_markdown":"Just disabling, and then re-enabling and restarting worked for me.","body":"Just disabling, and then re-enabling and restarting worked for me."},{"owner":{"account_id":5444297,"reputation":53,"user_id":4331369,"display_name":"badal jain"},"score":1,"creation_date":1615848536,"post_id":49803033,"comment_id":117814771,"body_markdown":"I had the latest plugin and everything installed, but still intellij was not able to recognize the get and set methods. The build however was working fine. Your answer resolved my issue! Thanks a lot!","body":"I had the latest plugin and everything installed, but still intellij was not able to recognize the get and set methods. The build however was working fine. Your answer resolved my issue! Thanks a lot!"}],"tags":[],"owner":{"account_id":7450965,"reputation":1416,"user_id":5665753,"display_name":"Jason Slobotski"},"comment_count":5,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1523555516,"creation_date":1523555516,"answer_id":49803033,"question_id":17729384,"body_markdown":"I had both the Lombok plugin installed and Annotation Processing enabled within IntelliJ and my syntax highlighting still wasn&#39;t working properly. This could have been due to the 2017 to 2018 IDEA upgrade. I was getting warnings &quot;access exceeds rights&quot; on private fields within classes I had used @Getter and @Setter on.\r\n\r\nI had to uninstall the Lombok plugin, restart IntelliJ, then reinstall the plugin, and restart IntelliJ once more.\r\n\r\nEverything is working good now.\r\n","title":"Lombok added but getters and setters not recognized in Intellij IDEA","body":"<p>I had both the Lombok plugin installed and Annotation Processing enabled within IntelliJ and my syntax highlighting still wasn't working properly. This could have been due to the 2017 to 2018 IDEA upgrade. I was getting warnings \"access exceeds rights\" on private fields within classes I had used @Getter and @Setter on.</p>\n\n<p>I had to uninstall the Lombok plugin, restart IntelliJ, then reinstall the plugin, and restart IntelliJ once more.</p>\n\n<p>Everything is working good now.</p>\n"},{"tags":[],"owner":{"account_id":4060161,"reputation":1380,"user_id":3336921,"display_name":"rahulnikhare"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1537275297,"creation_date":1537275297,"answer_id":52387089,"question_id":17729384,"body_markdown":"Goto Setting-&gt;Plugin-&gt;Search for &quot;Lombok Plugin&quot; -&gt; It will show results. Install Lombok Plugin from the list and Restart Intellij","title":"Lombok added but getters and setters not recognized in Intellij IDEA","body":"<p>Goto Setting->Plugin->Search for \"Lombok Plugin\" -> It will show results. Install Lombok Plugin from the list and Restart Intellij</p>\n"},{"tags":[],"owner":{"account_id":4403145,"reputation":614,"user_id":3588217,"accept_rate":55,"display_name":"greenhorn"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1573113578,"creation_date":1573113578,"answer_id":58744274,"question_id":17729384,"body_markdown":"Go to **settings-&gt;Plugins-&gt;Browse repositories** and search for **Lombok** it will display the Lombok plugin also you will see the install option on the right side panel. Please install it. Then restart your intelliJ IDE. This has solved my issue. ","title":"Lombok added but getters and setters not recognized in Intellij IDEA","body":"<p>Go to <strong>settings->Plugins->Browse repositories</strong> and search for <strong>Lombok</strong> it will display the Lombok plugin also you will see the install option on the right side panel. Please install it. Then restart your intelliJ IDE. This has solved my issue. </p>\n"},{"tags":[],"owner":{"account_id":1201601,"reputation":21929,"user_id":1172155,"accept_rate":45,"display_name":"App Work"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1584342019,"creation_date":1584341614,"answer_id":60701496,"question_id":17729384,"body_markdown":"In IDEA 2019.3.3 community on mac (  catalina)\r\n\r\n    IntelliJ IDEA =&gt; preferences\r\n\r\n\r\n    Build,Execution,Deployment=&gt;Compiler=&gt;Annotation Processors:\r\n\r\nCheck `Enable annotation Processing`\r\n\r\n","title":"Lombok added but getters and setters not recognized in Intellij IDEA","body":"<p>In IDEA 2019.3.3 community on mac (  catalina)</p>\n\n<pre><code>IntelliJ IDEA =&gt; preferences\n\n\nBuild,Execution,Deployment=&gt;Compiler=&gt;Annotation Processors:\n</code></pre>\n\n<p>Check <code>Enable annotation Processing</code></p>\n"},{"comments":[{"owner":{"account_id":6686844,"reputation":404,"user_id":5157770,"display_name":"Tinashe Chinyanga"},"score":0,"creation_date":1689507919,"post_id":61912747,"comment_id":135220536,"body_markdown":"Add this as a dependency, just to add in case one would be wondering what adding means. Thanks, this resolved my challenge.","body":"Add this as a dependency, just to add in case one would be wondering what adding means. Thanks, this resolved my challenge."}],"tags":[],"owner":{"account_id":18139988,"reputation":91,"user_id":13193945,"display_name":"Manzil"},"comment_count":1,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1635341250,"creation_date":1589976516,"answer_id":61912747,"question_id":17729384,"body_markdown":"i had this issue, just make sure\r\n\r\n 1. Lombok plugin is added.\r\n 2. Annotation processor is ticked.\r\n 3. In your build.gradle/ pom.xml, you have set lombok to be the annotation processor.\r\n\r\nEg. for gradle-&gt;\r\n\r\n&gt;     annotationProcessor &#39;org.projectlombok:lombok:1.18.12&#39;\r\n\r\n","title":"Lombok added but getters and setters not recognized in Intellij IDEA","body":"<p>i had this issue, just make sure</p>\n<ol>\n<li>Lombok plugin is added.</li>\n<li>Annotation processor is ticked.</li>\n<li>In your build.gradle/ pom.xml, you have set lombok to be the annotation processor.</li>\n</ol>\n<p>Eg. for gradle-&gt;</p>\n<blockquote>\n<pre><code>annotationProcessor 'org.projectlombok:lombok:1.18.12'\n</code></pre>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":19257570,"reputation":1,"user_id":14074124,"display_name":"felipes10"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1596971424,"creation_date":1596954180,"answer_id":63323139,"question_id":17729384,"body_markdown":"Actually the lombok is working (if you run the project even with the IDE red alerts, you will see the project will run without error), but the IDE is not recognizing all the resources generated by the lombok annotations. So you have to install the lombok plugin, that&#39;s all!","title":"Lombok added but getters and setters not recognized in Intellij IDEA","body":"<p>Actually the lombok is working (if you run the project even with the IDE red alerts, you will see the project will run without error), but the IDE is not recognizing all the resources generated by the lombok annotations. So you have to install the lombok plugin, that's all!</p>\n"},{"tags":[],"owner":{"account_id":7068406,"reputation":1404,"user_id":5410940,"accept_rate":100,"display_name":"Error Hunter"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1598612689,"creation_date":1598612689,"answer_id":63632563,"question_id":17729384,"body_markdown":"In my case, \r\n1. Lombok plugin was installed ✅\r\n2. Annotation processor was checked ✅\r\n\r\nbut still I was getting the error as lombok is incompatible and getter and setters was not recognized. \r\nwith further checking I found that recently my intelliJ version got upgraded and the old Lombok plugin is not compatible. \r\n\r\n\r\nGo to Preference  -&gt; Plugins -&gt; Search lombok and update \r\n\r\nOR \r\n\r\nGo to Preference  -&gt; Plugins -&gt; Search lombok-&gt; Uninstall restart IDE and install again from MarketPlace\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8eQ28.png","title":"Lombok added but getters and setters not recognized in Intellij IDEA","body":"<p>In my case,</p>\n<ol>\n<li>Lombok plugin was installed ✅</li>\n<li>Annotation processor was checked ✅</li>\n</ol>\n<p>but still I was getting the error as lombok is incompatible and getter and setters was not recognized.\nwith further checking I found that recently my intelliJ version got upgraded and the old Lombok plugin is not compatible.</p>\n<p>Go to Preference  -&gt; Plugins -&gt; Search lombok and update</p>\n<p>OR</p>\n<p>Go to Preference  -&gt; Plugins -&gt; Search lombok-&gt; Uninstall restart IDE and install again from MarketPlace</p>\n<p><a href=\"https://i.stack.imgur.com/8eQ28.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8eQ28.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":5096768,"reputation":1551,"user_id":4087817,"display_name":"ngg"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1599119826,"creation_date":1599119826,"answer_id":63719230,"question_id":17729384,"body_markdown":"Complete steps to fix or configure lombok.\r\n\r\n***1. Add dependency***\r\n\r\n&gt;     &lt;dependency&gt;\r\n&gt;     \t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n&gt;     \t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n&gt;     \t\t\t&lt;version&gt;1.18.8&lt;/version&gt;\r\n&gt;     \t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n&gt;     \t\t&lt;/dependency&gt;\r\n\r\n***2. Install the plugin of Lombok for ide.***\r\nFile &gt; Settings &gt; Plugins &gt; Search (lombok) &gt; install\r\n\r\n***3.Ticking the &quot;Enable annotation processing&quot; checkbox using below steps:-***\r\n Settings-&gt;Compiler-&gt;Annotation Processors\r\n\r\n***4.Restart for change to take effect.***\r\n","title":"Lombok added but getters and setters not recognized in Intellij IDEA","body":"<p>Complete steps to fix or configure lombok.</p>\n<p><em><strong>1. Add dependency</strong></em></p>\n<blockquote>\n<pre><code>&lt;dependency&gt;\n          &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n          &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n          &lt;version&gt;1.18.8&lt;/version&gt;\n          &lt;scope&gt;provided&lt;/scope&gt;\n      &lt;/dependency&gt;\n</code></pre>\n</blockquote>\n<p><em><strong>2. Install the plugin of Lombok for ide.</strong></em>\nFile &gt; Settings &gt; Plugins &gt; Search (lombok) &gt; install</p>\n<p><em><strong>3.Ticking the &quot;Enable annotation processing&quot; checkbox using below steps:-</strong></em>\nSettings-&gt;Compiler-&gt;Annotation Processors</p>\n<p><em><strong>4.Restart for change to take effect.</strong></em></p>\n"},{"tags":[],"owner":{"account_id":14843816,"reputation":837,"user_id":10719720,"display_name":"saurabhshcs"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1608770577,"creation_date":1608770577,"answer_id":65432652,"question_id":17729384,"body_markdown":"In MacBook press command+, and then go to plug-in and search for Lombok and then install it. \r\n\r\nIt will work without restarting IntelliJ IDEA IDE if doesn&#39;t work then please try with restart.\r\n\r\nMany thanks","title":"Lombok added but getters and setters not recognized in Intellij IDEA","body":"<p>In MacBook press command+, and then go to plug-in and search for Lombok and then install it.</p>\n<p>It will work without restarting IntelliJ IDEA IDE if doesn't work then please try with restart.</p>\n<p>Many thanks</p>\n"},{"tags":[],"owner":{"account_id":3965515,"reputation":2640,"user_id":3271600,"accept_rate":27,"display_name":"GvSharma"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1618726230,"creation_date":1618726230,"answer_id":67145652,"question_id":17729384,"body_markdown":"Two ways:\r\n 1. Check EnableAnnotationProcessing under setting=&gt;compiler\r\n 2. install lombok from plugins and restart IDE","title":"Lombok added but getters and setters not recognized in Intellij IDEA","body":"<p>Two ways:</p>\n<ol>\n<li>Check EnableAnnotationProcessing under setting=&gt;compiler</li>\n<li>install lombok from plugins and restart IDE</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":14858535,"reputation":13,"user_id":10730219,"display_name":"venkat stark"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1629972479,"creation_date":1629972479,"answer_id":68936547,"question_id":17729384,"body_markdown":"In Linux,\r\n\r\nIf you&#39;re using gradle to add your Lombok dependency in IntelliJ, you might still face the issue even after following the two steps that others suggesting like,\r\n\r\n1. Enabling the **Enable annotation processing**, in **File**-&gt; **Settings**-&gt; **Build, Execution, Deployment**-&gt; **Compiler(Expand)**-&gt; **Annotation processors**.  \r\n2. Installing or Enabling(If already installed) Lombok in **File**-&gt; **Settings**-&gt; **Plugins**.\r\n\r\nAlong with this also add the following dependency in your **build.gradle** script under the dependency along with Lombok dependency.\r\n\r\n    dependency{\r\n        annotationProcessor &#39;org.projectlombok:lombok:1.18.20&#39;\r\n    }\r\n\r\nChange the dependency version since this is the latest version as I&#39;m posting this.\r\n\r\n","title":"Lombok added but getters and setters not recognized in Intellij IDEA","body":"<p>In Linux,</p>\n<p>If you're using gradle to add your Lombok dependency in IntelliJ, you might still face the issue even after following the two steps that others suggesting like,</p>\n<ol>\n<li>Enabling the <strong>Enable annotation processing</strong>, in <strong>File</strong>-&gt; <strong>Settings</strong>-&gt; <strong>Build, Execution, Deployment</strong>-&gt; <strong>Compiler(Expand)</strong>-&gt; <strong>Annotation processors</strong>.</li>\n<li>Installing or Enabling(If already installed) Lombok in <strong>File</strong>-&gt; <strong>Settings</strong>-&gt; <strong>Plugins</strong>.</li>\n</ol>\n<p>Along with this also add the following dependency in your <strong>build.gradle</strong> script under the dependency along with Lombok dependency.</p>\n<pre><code>dependency{\n    annotationProcessor 'org.projectlombok:lombok:1.18.20'\n}\n</code></pre>\n<p>Change the dependency version since this is the latest version as I'm posting this.</p>\n"},{"comments":[{"owner":{"account_id":4953201,"reputation":134,"user_id":3986565,"display_name":"Lewis Munene"},"score":0,"creation_date":1664463204,"post_id":71161541,"comment_id":130482365,"body_markdown":"The annotationProcessor is what I was missing. Worked for me after I added it, thanks","body":"The annotationProcessor is what I was missing. Worked for me after I added it, thanks"}],"tags":[],"owner":{"account_id":4431178,"reputation":121,"user_id":3608314,"display_name":"user3608314"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1645114442,"creation_date":1645113998,"answer_id":71161541,"question_id":17729384,"body_markdown":"I&#39;m using IntelliJ with Spring boot 2.5.9. Here are the following things I did:\r\n\r\n1. Added the Lombok Plugin \r\n2. Enabled annotation processing \r\n3. Add lombok dependency and annotationProcessor tag in build.gradle file or maven file. (*It worked for me after this step*)\r\n\r\nHere is my build.gradle file:\r\n\r\n    plugins {\r\n    \tid &#39;org.springframework.boot&#39; version &#39;2.5.9&#39;\r\n    \tid &#39;io.spring.dependency-management&#39; version &#39;1.0.11.RELEASE&#39;\r\n    \tid &#39;java&#39;\r\n    }\r\n    \r\n    group = &#39;com.example&#39;\r\n    version = &#39;0.0.1-SNAPSHOT&#39;\r\n    sourceCompatibility = &#39;11&#39;\r\n    \r\n    configurations {\r\n    \tcompileOnly {\r\n    \t\textendsFrom annotationProcessor\r\n    \t}\r\n    }\r\n    \r\n    repositories {\r\n    \tmavenCentral()\r\n    }\r\n    \r\n    dependencies {\r\n    \timplementation &#39;org.springframework.boot:spring-boot-starter&#39;\r\n    \tcompileOnly &#39;org.projectlombok:lombok&#39;\r\n    \tannotationProcessor &#39;org.projectlombok:lombok&#39;\r\n    \ttestImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n    }\r\n    \r\n    tasks.named(&#39;test&#39;) {\r\n    \tuseJUnitPlatform()\r\n    }","title":"Lombok added but getters and setters not recognized in Intellij IDEA","body":"<p>I'm using IntelliJ with Spring boot 2.5.9. Here are the following things I did:</p>\n<ol>\n<li>Added the Lombok Plugin</li>\n<li>Enabled annotation processing</li>\n<li>Add lombok dependency and annotationProcessor tag in build.gradle file or maven file. (<em>It worked for me after this step</em>)</li>\n</ol>\n<p>Here is my build.gradle file:</p>\n<pre><code>plugins {\n    id 'org.springframework.boot' version '2.5.9'\n    id 'io.spring.dependency-management' version '1.0.11.RELEASE'\n    id 'java'\n}\n\ngroup = 'com.example'\nversion = '0.0.1-SNAPSHOT'\nsourceCompatibility = '11'\n\nconfigurations {\n    compileOnly {\n        extendsFrom annotationProcessor\n    }\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter'\n    compileOnly 'org.projectlombok:lombok'\n    annotationProcessor 'org.projectlombok:lombok'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n}\n\ntasks.named('test') {\n    useJUnitPlatform()\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2640300,"reputation":1317,"user_id":2284107,"accept_rate":60,"display_name":"kAmol"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659415265,"creation_date":1659415265,"answer_id":73202060,"question_id":17729384,"body_markdown":"In my case, plugin was installed and also the compiler preferences were set accordingly. I had to go to `Refactor (in toolbar, in line to file, edit etc) -&gt; Lombok menu -&gt; Default @Data` then `Build` or internally `mvn clean install&#39;.","title":"Lombok added but getters and setters not recognized in Intellij IDEA","body":"<p>In my case, plugin was installed and also the compiler preferences were set accordingly. I had to go to <code>Refactor (in toolbar, in line to file, edit etc) -&gt; Lombok menu -&gt; Default @Data</code> then <code>Build</code> or internally `mvn clean install'.</p>\n"},{"tags":[],"owner":{"account_id":3576183,"reputation":8143,"user_id":2985377,"accept_rate":75,"display_name":"Jason D"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675802495,"creation_date":1675802495,"answer_id":75378780,"question_id":17729384,"body_markdown":"Similar to the accepted answers here, I found there was a bug in Lombok that only appeared in IntelliJ where it didn&#39;t generate the getters and setters for annotated fields; even when Lombok Annotations in IntelliJ were enabled. \r\n\r\nWhat worked for me was\r\n\r\n1) Update to Lombok 1.18 or higher\r\n\r\n2) Make a new file in project root with the value ```lombok.addLombokGeneratedAnnotations=true```\r\n\r\n3) Invalidate caches and restart, re-enable Lombok Annotations on the project if it&#39;s turned off on restart.\r\n\r\nAfter that, the project rebuilt and ran in the IDE successfully.","title":"Lombok added but getters and setters not recognized in Intellij IDEA","body":"<p>Similar to the accepted answers here, I found there was a bug in Lombok that only appeared in IntelliJ where it didn't generate the getters and setters for annotated fields; even when Lombok Annotations in IntelliJ were enabled.</p>\n<p>What worked for me was</p>\n<ol>\n<li><p>Update to Lombok 1.18 or higher</p>\n</li>\n<li><p>Make a new file in project root with the value <code>lombok.addLombokGeneratedAnnotations=true</code></p>\n</li>\n<li><p>Invalidate caches and restart, re-enable Lombok Annotations on the project if it's turned off on restart.</p>\n</li>\n</ol>\n<p>After that, the project rebuilt and ran in the IDE successfully.</p>\n"}],"owner":{"account_id":1064249,"reputation":4160,"user_id":1367948,"accept_rate":62,"display_name":"Don Quixote"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":201127,"favorite_count":0,"down_vote_count":0,"up_vote_count":195,"accepted_answer_id":17729637,"answer_count":22,"score":195,"last_activity_date":1675802495,"creation_date":1374165817,"question_id":17729384,"body_markdown":"I am using IntelliJ IDEA on ubuntu. I added *lombok.jar* into my project and installed the Lombok plugin for IDEA. I have access to the annotations but the `getters` and `setters` aren&#39;t generated. I get the same errors I would get if I tried accessing a getter or setter method that doesn&#39;t exist. What could I be missing?","title":"Lombok added but getters and setters not recognized in Intellij IDEA","body":"<p>I am using IntelliJ IDEA on ubuntu. I added <em>lombok.jar</em> into my project and installed the Lombok plugin for IDEA. I have access to the annotations but the <code>getters</code> and <code>setters</code> aren't generated. I get the same errors I would get if I tried accessing a getter or setter method that doesn't exist. What could I be missing?</p>\n"},{"tags":["java","multithreading","spring-boot","hibernate","scheduled-tasks"],"answers":[{"comments":[{"owner":{"account_id":20573497,"reputation":81,"user_id":15101302,"display_name":"Michael Bat"},"score":0,"creation_date":1675808121,"post_id":75378778,"comment_id":133007700,"body_markdown":"so the opened scheduling threads will still be available for other processes, correct ? I wonder, why spring does not close them at all after execution. \nIs there a recommendation for scheduled pool ? For example in case I have 30 scheduled methods which executes in various time, it will be ok to set a pool size of 5-10, isn&#39;t it ? I just don&#39;t see a point of keeping the threads opened if they are not used.","body":"so the opened scheduling threads will still be available for other processes, correct ? I wonder, why spring does not close them at all after execution.  Is there a recommendation for scheduled pool ? For example in case I have 30 scheduled methods which executes in various time, it will be ok to set a pool size of 5-10, isn&#39;t it ? I just don&#39;t see a point of keeping the threads opened if they are not used."},{"owner":{"account_id":175912,"reputation":283,"user_id":406264,"display_name":"domgom"},"score":1,"creation_date":1675843318,"post_id":75378778,"comment_id":133012835,"body_markdown":"Think of the pool as a &quot;reserve&quot; of threads so they are readily available and reusable so you save the significant Thread instantiation cost. But having those threads in the pool doesn&#39;t mean they are taking your CPU cores/threads 100% of the time, they will take close to 0% when they are parked/sleep/ready and only use CPU on active state. The threads in the pool won&#39;t be available to other processes and will count towards the max number of threads your OS can handle (in the order or thousands). 5-10 would be ok or not depending on the frequency and length of the execution.Measure concurrency","body":"Think of the pool as a &quot;reserve&quot; of threads so they are readily available and reusable so you save the significant Thread instantiation cost. But having those threads in the pool doesn&#39;t mean they are taking your CPU cores/threads 100% of the time, they will take close to 0% when they are parked/sleep/ready and only use CPU on active state. The threads in the pool won&#39;t be available to other processes and will count towards the max number of threads your OS can handle (in the order or thousands). 5-10 would be ok or not depending on the frequency and length of the execution.Measure concurrency"}],"tags":[],"owner":{"account_id":175912,"reputation":283,"user_id":406264,"display_name":"domgom"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675802480,"creation_date":1675802480,"answer_id":75378778,"question_id":75377221,"body_markdown":"You could use a method annotated with @PreDestroy to invoke executorService.shutdown(). I wouldn&#39;t bother about the Parking State, you probably want those threads to be ready for the next invocation, so not really harmful that they are parked.\r\nNothing wrong with the code.","title":"How to close the thread after @Scheduled execution (Spring boot)","body":"<p>You could use a method annotated with @PreDestroy to invoke executorService.shutdown(). I wouldn't bother about the Parking State, you probably want those threads to be ready for the next invocation, so not really harmful that they are parked.\nNothing wrong with the code.</p>\n"}],"owner":{"account_id":20573497,"reputation":81,"user_id":15101302,"display_name":"Michael Bat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":238,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1675802480,"creation_date":1675792580,"question_id":75377221,"body_markdown":"I have a project which executes multiple scheduled method at start up. \r\nI remarked that after scheduled methods are executed, the opened threads do not close, but remain in a &#39;parking&#39; state. \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/TQu2Z.png\r\n\r\nIs this a normal behavior ? \r\nAren&#39;t the threads suppose to close after method is executed ? (Because keeping multiple threads open just slows down the application and consumes more RAM.)\r\n\r\nHere are my code configurations: \r\n\r\n    @EnableScheduling\r\n    @Configuration\r\n    @ConditionalOnProperty(name = &quot;scheduling.enabled&quot;, matchIfMissing = true)\r\n    public class SchedulingConfiguration implements SchedulingConfigurer {\r\n    }\r\n\r\nHere is an example of method called in service: \r\n\r\n    @Scheduled(cron = &quot;0 0 4 * * *&quot;)\r\n    protected void updateExchangeRates() {\r\n        if (enablePostConstruct) {\r\n            countryService.updateCountryExchangeRates();\r\n        }\r\n    }\r\n\r\nI would like to run the scheduled methods asynchronously, with a max thread pool consumed between 10-15 threads. And after execution, the thread to close and reopen in case it got to the point when it needs to be executed again. \r\n\r\nCan you guide me please how this can be achieved ? \r\nI tried to implement **SchedulingConfigurer** and perform executorService.shutdown(), but it did not work. \r\n","title":"How to close the thread after @Scheduled execution (Spring boot)","body":"<p>I have a project which executes multiple scheduled method at start up.\nI remarked that after scheduled methods are executed, the opened threads do not close, but remain in a 'parking' state.</p>\n<p><a href=\"https://i.stack.imgur.com/TQu2Z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TQu2Z.png\" alt=\"enter image description here\" /></a></p>\n<p>Is this a normal behavior ?\nAren't the threads suppose to close after method is executed ? (Because keeping multiple threads open just slows down the application and consumes more RAM.)</p>\n<p>Here are my code configurations:</p>\n<pre><code>@EnableScheduling\n@Configuration\n@ConditionalOnProperty(name = &quot;scheduling.enabled&quot;, matchIfMissing = true)\npublic class SchedulingConfiguration implements SchedulingConfigurer {\n}\n</code></pre>\n<p>Here is an example of method called in service:</p>\n<pre><code>@Scheduled(cron = &quot;0 0 4 * * *&quot;)\nprotected void updateExchangeRates() {\n    if (enablePostConstruct) {\n        countryService.updateCountryExchangeRates();\n    }\n}\n</code></pre>\n<p>I would like to run the scheduled methods asynchronously, with a max thread pool consumed between 10-15 threads. And after execution, the thread to close and reopen in case it got to the point when it needs to be executed again.</p>\n<p>Can you guide me please how this can be achieved ?\nI tried to implement <strong>SchedulingConfigurer</strong> and perform executorService.shutdown(), but it did not work.</p>\n"},{"tags":["java","angular","security","spring-security","session-cookies"],"answers":[{"comments":[{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1675801198,"post_id":75355369,"comment_id":133006016,"body_markdown":"I just created a tutorial for implementing the BFF pattern with spring-cloud-gateway: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/bff","body":"I just created a tutorial for implementing the BFF pattern with spring-cloud-gateway: <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/bff\" rel=\"nofollow noreferrer\">github.com/ch4mpy/spring-addons/tree/master/samples/tutorial&zwnj;&#8203;s/&hellip;</a>"},{"owner":{"account_id":25671794,"reputation":3,"user_id":19435911,"display_name":"JustZed32"},"score":0,"creation_date":1676111016,"post_id":75355369,"comment_id":133074637,"body_markdown":"my man, you really are a ch4mp... – \nEdit: Quite frankly, that doesn&#39;t even compile...","body":"my man, you really are a ch4mp... –  Edit: Quite frankly, that doesn&#39;t even compile..."},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1676122607,"post_id":75355369,"comment_id":133076451,"body_markdown":"What doesn&#39;t compile? Because there is a CI configured (Github action). Every thing compiles and tests pass...","body":"What doesn&#39;t compile? Because there is a CI configured (Github action). Every thing compiles and tests pass..."}],"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675802276,"creation_date":1675629747,"answer_id":75355369,"question_id":75354647,"body_markdown":"&gt; Edit: I assume that sending the session directly into Angular (in REST, not in cookie) is really unsafe, right? I currently rely on cookies.\r\n\r\nYou are right, this is a bad idea. For sessions in an application running in a browser, only use cookies with those two flag raised (value=`true`):\r\n- `secure` (exchanged only over https)\r\n- `http-only` (hidden from Javascript).\r\n\r\nThis means that cookies should not be accessible to the Angular code but automatically set by the browser before sending requests to the backend.\r\n\r\nYou should also implement CSRF protection (which is the default in spring-security).\r\n\r\n&gt; Edit 2: ffs, I&#39;m sick of it, I&#39;m just going to do oauth2 authentication.\r\n\r\nGood idea. This is much better for security, user experience (SSO), and developper experience: most OIDC providers, either on premise (like Keycloak), or in the cloud (like Auth0, Cognito, and many others), already provide with login forms (including **M**ulti **F**actor **A**uthentication), user registration, profile edition, administration screens (like clients declaration, user roles assignement, etc.). For that: \r\n- configure your Spring REST API as a resource-server. I have written tutorials for this [there][1]\r\n- configure your Angular app either as: \r\n  * an OAuth2 client. My favorite certified lib for Angular is [angular-auth-oidc-client][2]\r\n  * a BFF client. **B**ackend **F**or **F**rontend is a pattern where a server-side middleware serves as the only OAuth2 client to hide tokens from the browser. Angular app won&#39;t be OAuth2: it will be secured with sessions (haha! your devil is back ;-), the middleware (something like spring-cloud-gateway with `tokenRelay` filter) will keep this session, associate tokens to it and replace sessions with tokens before forwarding requests to resource-server. [Tutorial there][3].\r\n\r\n\r\n  [1]: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials\r\n  [2]: https://github.com/damienbod/angular-auth-oidc-client\r\n  [3]: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/bff","title":"How to authenticate via session in the Spring Security from Angular?","body":"<blockquote>\n<p>Edit: I assume that sending the session directly into Angular (in REST, not in cookie) is really unsafe, right? I currently rely on cookies.</p>\n</blockquote>\n<p>You are right, this is a bad idea. For sessions in an application running in a browser, only use cookies with those two flag raised (value=<code>true</code>):</p>\n<ul>\n<li><code>secure</code> (exchanged only over https)</li>\n<li><code>http-only</code> (hidden from Javascript).</li>\n</ul>\n<p>This means that cookies should not be accessible to the Angular code but automatically set by the browser before sending requests to the backend.</p>\n<p>You should also implement CSRF protection (which is the default in spring-security).</p>\n<blockquote>\n<p>Edit 2: ffs, I'm sick of it, I'm just going to do oauth2 authentication.</p>\n</blockquote>\n<p>Good idea. This is much better for security, user experience (SSO), and developper experience: most OIDC providers, either on premise (like Keycloak), or in the cloud (like Auth0, Cognito, and many others), already provide with login forms (including <strong>M</strong>ulti <strong>F</strong>actor <strong>A</strong>uthentication), user registration, profile edition, administration screens (like clients declaration, user roles assignement, etc.). For that:</p>\n<ul>\n<li>configure your Spring REST API as a resource-server. I have written tutorials for this <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials\" rel=\"nofollow noreferrer\">there</a></li>\n<li>configure your Angular app either as:\n<ul>\n<li>an OAuth2 client. My favorite certified lib for Angular is <a href=\"https://github.com/damienbod/angular-auth-oidc-client\" rel=\"nofollow noreferrer\">angular-auth-oidc-client</a></li>\n<li>a BFF client. <strong>B</strong>ackend <strong>F</strong>or <strong>F</strong>rontend is a pattern where a server-side middleware serves as the only OAuth2 client to hide tokens from the browser. Angular app won't be OAuth2: it will be secured with sessions (haha! your devil is back ;-), the middleware (something like spring-cloud-gateway with <code>tokenRelay</code> filter) will keep this session, associate tokens to it and replace sessions with tokens before forwarding requests to resource-server. <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/bff\" rel=\"nofollow noreferrer\">Tutorial there</a>.</li>\n</ul>\n</li>\n</ul>\n"}],"owner":{"account_id":25671794,"reputation":3,"user_id":19435911,"display_name":"JustZed32"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":917,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75355369,"answer_count":1,"score":0,"last_activity_date":1675802276,"creation_date":1675622479,"question_id":75354647,"body_markdown":"So I have an Angular frontend application, and a Spring backend. Currently, it seems that I have a cookie of JSessionId on my application (which I receive only on login, and not on register, for whatever reason)\r\n[(cookies)](https://i.stack.imgur.com/YVeKm.png)\r\n\r\nI assume it sends those cookies back to the server. (though that&#39;s only an assumption)\r\n\r\nNow, when I am making a request to the protected server, the only thing I get is this &quot;Please login&quot; popup.\r\n[Login popup](https://i.stack.imgur.com/SEH5z.png)\r\n\r\nWhen I log in, my [UserService](https://i.stack.imgur.com/Fvt38.png) logs a user with such details:\r\n\r\n```\r\nUsernamePasswordAuthenticationToken [Principal=User(userId=1, name=Maksym Riabov, username=MRiabov, password={bcrypt}$2a$10$W0XJRQdfxV5XXORkr2bTluIHvFetIVBzmVp51l39T5zLCQk12RV1i, company=null, enabled=true), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN]]\r\n```\r\n\r\n\r\nAnd what I&#39;ve noticed is that the sessionId is null there. Why could that be?\r\n\r\n\r\nTo answer some of the questions forward:\r\n\r\n- Yes, I&#39;ve pasted {withCredentials: true} to every request. (specific to Angular)\r\n- Yes, I&#39;ve read documentation - I&#39;ve even tried pasting all the code from it and it seems that it didn&#39;t work.\r\n\r\n\r\n\r\nMy login controller:\r\n\r\n```\r\n@GetMapping(&quot;/login&quot;)\r\n    public ResponseEntity&lt;String&gt; login() {\r\n        Authentication auth = SecurityContextHolder.getContext().getAuthentication();\r\n        return ResponseEntity.ok(&quot;123123&quot;);\r\n    }\r\n\r\n    @PostMapping(&quot;/register&quot;)\r\n    public ResponseEntity&lt;Map&lt;String, String&gt;&gt; register(@RequestBody UserRegisterDto userDto) {\r\n        //todo check if name taken\r\n        User user = userMapper.toEntity2(userDto);\r\n        user.setPassword(passwordEncoder.encode(user.getPassword()));\r\n        user.setEnabled(true);\r\n        //todo remove\r\n        Authority authority = authorityRepository.save(new Authority(&quot;ADMIN&quot;));\r\n        user.setAuthorities(Set.of(authority));\r\n        //todo REMOVE!!!!\r\n\r\n        User savedUser = userRepository.save(user);\r\n        System.out.println(&quot;registration works!&quot;);\r\n\r\n        return ResponseEntity.ok(Map.of(&quot;result&quot;,authority.getAuthority().getAuthority()));\r\n    }\r\n```\r\nNow, I am sending a request to the backend (which puts the popup above) like this one:\r\n```\r\n@PreAuthorize(&quot;hasRole(&#39;ADMIN&#39;)&quot;)\r\n    @GetMapping(&quot;/create&quot;)\r\n    public ResponseEntity&lt;OnboardingPathDto&gt; createOnboardingPath() {\r\n        Authentication auth = SecurityContextHolder.getContext().getAuthentication();\r\n        // erased a bit of code here\r\n        return ResponseEntity.ok().build();\r\n```\r\n\r\n\r\nAnd as you see I have a method security, which throws the request for auth.\r\n\r\nAnd, the cherry at the top:\r\n\r\n\r\n```\r\n@Component\r\n@EnableWebSecurity\r\n@EnableMethodSecurity(securedEnabled = true, jsr250Enabled = true)\r\n@RequiredArgsConstructor\r\npublic class SecurityConfig {\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http, UserDetailsService userDetailsService) throws Exception {\r\n        http\r\n                .csrf().disable().cors().disable()\r\n                .authorizeHttpRequests() \r\n                .anyRequest().permitAll() //todo this is unsafe\r\n                .and().sessionManagement(session -&gt; session.\r\n                        sessionCreationPolicy(SessionCreationPolicy.IF_REQUIRED)\r\n                        .maximumSessions(1))//to force only one session per user\r\n     //here I tried sessionManagement to do something, but did it do something?\r\n                .rememberMe((rememberMe) -&gt; rememberMe.userDetailsService(userDetailsService))\r\n                .httpBasic(); \r\n        return http.build();\r\n    }\r\n\r\n    @Bean\r\n    public AuthenticationManager authenticationManager(DaoAuthenticationProvider daoAuthenticationProvider) throws Exception {\r\n        return new ProviderManager(daoAuthenticationProvider);\r\n    }\r\n\r\n    @Bean\r\n    public DaoAuthenticationProvider prov(PasswordEncoder passwordEncoder, UserDetailsService userDetailService) throws Exception {\r\n        DaoAuthenticationProvider daoAuthenticationProvider = new DaoAuthenticationProvider();\r\n        daoAuthenticationProvider.setPasswordEncoder(passwordEncoder);\r\n        daoAuthenticationProvider.setUserDetailsService(userDetailService);\r\n        return daoAuthenticationProvider;\r\n    }\r\n    \r\n    @Bean\r\n    public PasswordEncoder passwordEncoder() {\r\n        return PasswordEncoderFactories.createDelegatingPasswordEncoder();\r\n    }\r\n\r\n    @Bean\r\n    public HttpSessionEventPublisher httpSessionEventPublisher() {//to force only one session per user\r\n        return new HttpSessionEventPublisher();\r\n    }\r\n```\r\n\r\nI&#39;ve read through the Spring Security documentation far and wide, and even have taken a course in it, but I still couldn&#39;t manage to get it working.\r\n \r\nSo, what I&#39;m struggling with:\r\n\r\n- Why can&#39;t Spring authenticate through the session even though it is configured to do so? Where is my error?\r\n  -\r\n\r\nEdit: I assume that sending the session directly into Angular (in REST, not in cookie) is really unsafe, right? I currently rely on cookies.\r\n\r\nEdit 2: ffs, I&#39;m sick of it, I&#39;m just going to do oauth2 authentication.\r\n","title":"How to authenticate via session in the Spring Security from Angular?","body":"<p>So I have an Angular frontend application, and a Spring backend. Currently, it seems that I have a cookie of JSessionId on my application (which I receive only on login, and not on register, for whatever reason)\n<a href=\"https://i.stack.imgur.com/YVeKm.png\" rel=\"nofollow noreferrer\">(cookies)</a></p>\n<p>I assume it sends those cookies back to the server. (though that's only an assumption)</p>\n<p>Now, when I am making a request to the protected server, the only thing I get is this &quot;Please login&quot; popup.\n<a href=\"https://i.stack.imgur.com/SEH5z.png\" rel=\"nofollow noreferrer\">Login popup</a></p>\n<p>When I log in, my <a href=\"https://i.stack.imgur.com/Fvt38.png\" rel=\"nofollow noreferrer\">UserService</a> logs a user with such details:</p>\n<pre><code>UsernamePasswordAuthenticationToken [Principal=User(userId=1, name=Maksym Riabov, username=MRiabov, password={bcrypt}$2a$10$W0XJRQdfxV5XXORkr2bTluIHvFetIVBzmVp51l39T5zLCQk12RV1i, company=null, enabled=true), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ADMIN]]\n</code></pre>\n<p>And what I've noticed is that the sessionId is null there. Why could that be?</p>\n<p>To answer some of the questions forward:</p>\n<ul>\n<li>Yes, I've pasted {withCredentials: true} to every request. (specific to Angular)</li>\n<li>Yes, I've read documentation - I've even tried pasting all the code from it and it seems that it didn't work.</li>\n</ul>\n<p>My login controller:</p>\n<pre><code>@GetMapping(&quot;/login&quot;)\n    public ResponseEntity&lt;String&gt; login() {\n        Authentication auth = SecurityContextHolder.getContext().getAuthentication();\n        return ResponseEntity.ok(&quot;123123&quot;);\n    }\n\n    @PostMapping(&quot;/register&quot;)\n    public ResponseEntity&lt;Map&lt;String, String&gt;&gt; register(@RequestBody UserRegisterDto userDto) {\n        //todo check if name taken\n        User user = userMapper.toEntity2(userDto);\n        user.setPassword(passwordEncoder.encode(user.getPassword()));\n        user.setEnabled(true);\n        //todo remove\n        Authority authority = authorityRepository.save(new Authority(&quot;ADMIN&quot;));\n        user.setAuthorities(Set.of(authority));\n        //todo REMOVE!!!!\n\n        User savedUser = userRepository.save(user);\n        System.out.println(&quot;registration works!&quot;);\n\n        return ResponseEntity.ok(Map.of(&quot;result&quot;,authority.getAuthority().getAuthority()));\n    }\n</code></pre>\n<p>Now, I am sending a request to the backend (which puts the popup above) like this one:</p>\n<pre><code>@PreAuthorize(&quot;hasRole('ADMIN')&quot;)\n    @GetMapping(&quot;/create&quot;)\n    public ResponseEntity&lt;OnboardingPathDto&gt; createOnboardingPath() {\n        Authentication auth = SecurityContextHolder.getContext().getAuthentication();\n        // erased a bit of code here\n        return ResponseEntity.ok().build();\n</code></pre>\n<p>And as you see I have a method security, which throws the request for auth.</p>\n<p>And, the cherry at the top:</p>\n<pre><code>@Component\n@EnableWebSecurity\n@EnableMethodSecurity(securedEnabled = true, jsr250Enabled = true)\n@RequiredArgsConstructor\npublic class SecurityConfig {\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http, UserDetailsService userDetailsService) throws Exception {\n        http\n                .csrf().disable().cors().disable()\n                .authorizeHttpRequests() \n                .anyRequest().permitAll() //todo this is unsafe\n                .and().sessionManagement(session -&gt; session.\n                        sessionCreationPolicy(SessionCreationPolicy.IF_REQUIRED)\n                        .maximumSessions(1))//to force only one session per user\n     //here I tried sessionManagement to do something, but did it do something?\n                .rememberMe((rememberMe) -&gt; rememberMe.userDetailsService(userDetailsService))\n                .httpBasic(); \n        return http.build();\n    }\n\n    @Bean\n    public AuthenticationManager authenticationManager(DaoAuthenticationProvider daoAuthenticationProvider) throws Exception {\n        return new ProviderManager(daoAuthenticationProvider);\n    }\n\n    @Bean\n    public DaoAuthenticationProvider prov(PasswordEncoder passwordEncoder, UserDetailsService userDetailService) throws Exception {\n        DaoAuthenticationProvider daoAuthenticationProvider = new DaoAuthenticationProvider();\n        daoAuthenticationProvider.setPasswordEncoder(passwordEncoder);\n        daoAuthenticationProvider.setUserDetailsService(userDetailService);\n        return daoAuthenticationProvider;\n    }\n    \n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return PasswordEncoderFactories.createDelegatingPasswordEncoder();\n    }\n\n    @Bean\n    public HttpSessionEventPublisher httpSessionEventPublisher() {//to force only one session per user\n        return new HttpSessionEventPublisher();\n    }\n</code></pre>\n<p>I've read through the Spring Security documentation far and wide, and even have taken a course in it, but I still couldn't manage to get it working.</p>\n<p>So, what I'm struggling with:</p>\n<ul>\n<li><h2>Why can't Spring authenticate through the session even though it is configured to do so? Where is my error?</h2>\n</li>\n</ul>\n<p>Edit: I assume that sending the session directly into Angular (in REST, not in cookie) is really unsafe, right? I currently rely on cookies.</p>\n<p>Edit 2: ffs, I'm sick of it, I'm just going to do oauth2 authentication.</p>\n"},{"tags":["java","java-8","java-stream"],"comments":[{"owner":{"account_id":277416,"reputation":681888,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":1,"creation_date":1524001645,"post_id":49887953,"comment_id":86792008,"body_markdown":"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#groupingBy-java.util.function.Function-java.util.stream.Collector-","body":"<a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#groupingBy-java.util.function.Function-java.util.stream.Collector-\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/util/stream/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":1869832,"reputation":5089,"user_id":1692342,"accept_rate":61,"display_name":"user1692342"},"score":0,"creation_date":1524008206,"post_id":49888055,"comment_id":86794039,"body_markdown":"Wouldn&#39;t this group by Role and Name? i.e\nK1: Role V1: Batsman, Bowler \nK2: Name V2: player1, player2, player3","body":"Wouldn&#39;t this group by Role and Name? i.e K1: Role V1: Batsman, Bowler  K2: Name V2: player1, player2, player3"},{"owner":{"account_id":1869832,"reputation":5089,"user_id":1692342,"accept_rate":61,"display_name":"user1692342"},"score":0,"creation_date":1524009806,"post_id":49888055,"comment_id":86794429,"body_markdown":"This doesn&#39;t work for the input. Updated question with sample Java code.","body":"This doesn&#39;t work for the input. Updated question with sample Java code."},{"owner":{"account_id":7743155,"reputation":55371,"user_id":5862071,"accept_rate":86,"display_name":"Ousmane D."},"score":0,"creation_date":1524032367,"post_id":49888055,"comment_id":86800437,"body_markdown":"@user1692342 at the time of writing this answer I actually thought your map was like `Map&lt;String, String&gt; x1 = Map.of( &quot;Batsman&quot;,  &quot;Player1&quot;); Map&lt;String, String&gt; y1 = Map.of( &quot;Batsman&quot;,  &quot;Player2&quot;);` and so forth, looks like you&#39;ve found the missing operation before i came back :) +1.","body":"@user1692342 at the time of writing this answer I actually thought your map was like <code>Map&lt;String, String&gt; x1 = Map.of( &quot;Batsman&quot;,  &quot;Player1&quot;); Map&lt;String, String&gt; y1 = Map.of( &quot;Batsman&quot;,  &quot;Player2&quot;);</code> and so forth, looks like you&#39;ve found the missing operation before i came back :) +1."},{"owner":{"account_id":1869832,"reputation":5089,"user_id":1692342,"accept_rate":61,"display_name":"user1692342"},"score":1,"creation_date":1524032474,"post_id":49888055,"comment_id":86800485,"body_markdown":"Yeah the main trick was using Collectors.tomapping within the collect. I wasn&#39;t aware of that part. Thanks for that!","body":"Yeah the main trick was using Collectors.tomapping within the collect. I wasn&#39;t aware of that part. Thanks for that!"},{"owner":{"account_id":7743155,"reputation":55371,"user_id":5862071,"accept_rate":86,"display_name":"Ousmane D."},"score":0,"creation_date":1524033112,"post_id":49888055,"comment_id":86800790,"body_markdown":"@user1692342 you&#39;re welcome and update my answer for completeness.","body":"@user1692342 you&#39;re welcome and update my answer for completeness."}],"tags":[],"owner":{"account_id":7743155,"reputation":55371,"user_id":5862071,"accept_rate":86,"display_name":"Ousmane D."},"comment_count":5,"down_vote_count":0,"up_vote_count":35,"is_accepted":false,"score":35,"last_activity_date":1524033097,"creation_date":1524001992,"answer_id":49888055,"question_id":49887953,"body_markdown":"    listOfData.stream()\r\n              .flatMap(e -&gt; e.entrySet().stream())\r\n              .collect(Collectors.groupingBy(Map.Entry::getKey, \r\n                             Collectors.mapping(Map.Entry::getValue, \r\n                                        Collectors.toList())));\r\n\r\n**update:**\r\n\r\nSlightly different variant to [`user1692342`&#39;s][1] answer for completeness. \r\n\r\n    list.stream()\r\n        .map(e -&gt; Arrays.asList(e.get(&quot;Role&quot;), e.get(&quot;Name&quot;)))\r\n        .collect(Collectors.groupingBy(e -&gt; e.get(0),\r\n                 Collectors.mapping(e -&gt; e.get(1), Collectors.toList())));\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/49887953/java-8-stream-to-collect-a-map-of-list-of-items/49889657#49889657","title":"Java 8 stream to collect a Map of List of items","body":"<pre><code>listOfData.stream()\n          .flatMap(e -&gt; e.entrySet().stream())\n          .collect(Collectors.groupingBy(Map.Entry::getKey, \n                         Collectors.mapping(Map.Entry::getValue, \n                                    Collectors.toList())));\n</code></pre>\n\n<p><strong>update:</strong></p>\n\n<p>Slightly different variant to <a href=\"https://stackoverflow.com/questions/49887953/java-8-stream-to-collect-a-map-of-list-of-items/49889657#49889657\"><code>user1692342</code>'s</a> answer for completeness. </p>\n\n<pre><code>list.stream()\n    .map(e -&gt; Arrays.asList(e.get(\"Role\"), e.get(\"Name\")))\n    .collect(Collectors.groupingBy(e -&gt; e.get(0),\n             Collectors.mapping(e -&gt; e.get(1), Collectors.toList())));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1869832,"reputation":5089,"user_id":1692342,"accept_rate":61,"display_name":"user1692342"},"comment_count":0,"down_vote_count":0,"up_vote_count":20,"is_accepted":true,"score":20,"last_activity_date":1524014118,"creation_date":1524014118,"answer_id":49889657,"question_id":49887953,"body_markdown":"Based on the idea given by Aomine:\r\n\r\n    list.stream()\r\n        .map(e -&gt; new AbstractMap.SimpleEntry&lt;&gt;(e.get(&quot;Role&quot;), e.get(&quot;Name&quot;)))\r\n        .collect(Collectors.groupingBy(Map.Entry::getKey,\r\n                        Collectors.mapping(Map.Entry::getValue, Collectors.toList())));","title":"Java 8 stream to collect a Map of List of items","body":"<p>Based on the idea given by Aomine:</p>\n\n<pre><code>list.stream()\n    .map(e -&gt; new AbstractMap.SimpleEntry&lt;&gt;(e.get(\"Role\"), e.get(\"Name\")))\n    .collect(Collectors.groupingBy(Map.Entry::getKey,\n                    Collectors.mapping(Map.Entry::getValue, Collectors.toList())));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4793430,"reputation":1772,"user_id":3871961,"display_name":"xiawi"},"score":4,"creation_date":1580811738,"post_id":60054920,"comment_id":106212080,"body_markdown":"While this code may answer the question, providing additional context regarding why and/or how this code answers the question improves its long-term value.","body":"While this code may answer the question, providing additional context regarding why and/or how this code answers the question improves its long-term value."}],"tags":[],"owner":{"account_id":17685171,"reputation":141,"user_id":12838225,"display_name":"user12838225"},"comment_count":1,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1612444499,"creation_date":1580810533,"answer_id":60054920,"question_id":49887953,"body_markdown":"The [Collectors](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html) class provides convenience methods in the form of i.e. [groupingBy](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#groupingBy-java.util.function.Function-) which allow to group similar objects by a certain classifier. The classifier method is the input to that particular grouping function. This function will generate a Map with the respective classifier methods value as key and a list of objects that share the same classifier method value as value.\r\n\r\nTherefore a code like\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    Map&lt;String, List&lt;Person&gt;&gt; roles2Persons = \r\n        lis.stream().collect(Collectors.groupingBy(Person::getRole));\r\n\r\nwill generate a mapping for the respective roles `Person` objects may fulfill to a list of `Person` objects that share the same role as the key in the map.\r\n\r\nAfter the above collector was applied the resulting map will contain the desired form of\r\n\r\n    key1: Batsman, values: List(Player1, Player2)\r\n    key2: Bowler, values: List(Player3)","title":"Java 8 stream to collect a Map of List of items","body":"<p>The <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html\" rel=\"noreferrer\">Collectors</a> class provides convenience methods in the form of i.e. <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#groupingBy-java.util.function.Function-\" rel=\"noreferrer\">groupingBy</a> which allow to group similar objects by a certain classifier. The classifier method is the input to that particular grouping function. This function will generate a Map with the respective classifier methods value as key and a list of objects that share the same classifier method value as value.</p>\n<p>Therefore a code like</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, List&lt;Person&gt;&gt; roles2Persons = \n    lis.stream().collect(Collectors.groupingBy(Person::getRole));\n</code></pre>\n<p>will generate a mapping for the respective roles <code>Person</code> objects may fulfill to a list of <code>Person</code> objects that share the same role as the key in the map.</p>\n<p>After the above collector was applied the resulting map will contain the desired form of</p>\n<pre><code>key1: Batsman, values: List(Player1, Player2)\nkey2: Bowler, values: List(Player3)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675802243,"creation_date":1675791518,"answer_id":75377044,"question_id":49887953,"body_markdown":"Here is a generic approach to this problem. The `groupBy` method below takes 2 to 3 arguments.\r\n\r\n1. A `collection` of type `List&lt;E&gt;`\r\n2. A `keyFn` (key) of type `Function&lt;E, K&gt;`\r\n3. (Optional) A `valueFn` (value) of type `Function&lt;E, V&gt;` or simply `E`\r\n\r\nI included some unit tests below.\r\n\r\n## CollectionUtils.java\r\n\r\n```java\r\npackage org.example.util;\r\n\r\nimport static java.util.Collections.unmodifiableMap;\r\nimport static java.util.stream.Collectors.*;\r\n\r\nimport java.util.*;\r\nimport java.util.AbstractMap.SimpleEntry;\r\nimport java.util.Map.Entry;\r\nimport java.util.function.Function;\r\n\r\npublic class CollectionUtils {\r\n  public static &lt;E, K, V&gt; Map&lt;K, List&lt;V&gt;&gt; groupBy(\r\n      Collection&lt;E&gt; collection, Function&lt;E, K&gt; keyFn, Function&lt;E, V&gt; valueFn) {\r\n    return collection.stream()\r\n        .map(item -&gt; new SimpleEntry&lt;K, V&gt;(keyFn.apply(item), valueFn.apply(item)))\r\n        .collect(groupingBy(Entry::getKey, mapping(Entry::getValue, toList())));\r\n  }\r\n\r\n  public static &lt;E, K&gt; Map&lt;K, List&lt;E&gt;&gt; groupBy(Collection&lt;E&gt; collection, Function&lt;E, K&gt; keyFn) {\r\n    return groupBy(collection, keyFn, Function.identity());\r\n  }\r\n\r\n  public static &lt;K, V&gt; Map&lt;K, V&gt; immutableMapOf(K k1, V v1, K k2, V v2) {\r\n    Map&lt;K, V&gt; mutableMap = new HashMap&lt;&gt;();\r\n    mutableMap.put(k1, v1);\r\n    mutableMap.put(k2, v2);\r\n    return unmodifiableMap(mutableMap);\r\n  }\r\n}\r\n```\r\n\r\n## CollectionUtilsTest.java\r\n\r\n```java\r\npackage org.example.util;\r\n\r\nimport static java.util.Arrays.asList;\r\nimport static org.example.util.CollectionUtils.*;\r\nimport static org.junit.Assert.*;\r\n\r\nimport java.util.*;\r\nimport org.junit.Test;\r\nimport org.slf4j.*;\r\n\r\npublic class CollectionUtilsTest {\r\n\r\n  private static final Logger logger = LoggerFactory.getLogger(CollectionUtilsTest.class);\r\n\r\n  private static final List&lt;Map&lt;String, String&gt;&gt; data =\r\n      asList(\r\n          immutableMapOf(&quot;Username&quot;, &quot;Batman&quot;, &quot;Role&quot;, &quot;Leader&quot;),\r\n          immutableMapOf(&quot;Username&quot;, &quot;Robin&quot;, &quot;Role&quot;, &quot;Subordinate&quot;),\r\n          immutableMapOf(&quot;Username&quot;, &quot;Superman&quot;, &quot;Role&quot;, &quot;Leader&quot;));\r\n\r\n  @Test\r\n  public void testGroupBy() {\r\n    logger.info(&quot;Test groupBy(Collection&lt;E&gt;, Function&lt;E, K&gt;, Function&lt;E, V&gt;)&quot;);\r\n    Map&lt;String, List&lt;String&gt;&gt; grouped = groupBy(data, m -&gt; m.get(&quot;Role&quot;), m -&gt; m.get(&quot;Username&quot;));\r\n\r\n    logger.info(&quot;Checking keys...&quot;);\r\n    assertNotNull(grouped.get(&quot;Leader&quot;));\r\n    assertNotNull(grouped.get(&quot;Subordinate&quot;));\r\n\r\n    logger.info(&quot;Checking values...&quot;);\r\n    assertEquals(&quot;Batman&quot;, grouped.get(&quot;Leader&quot;).get(0));\r\n    assertEquals(&quot;Superman&quot;, grouped.get(&quot;Leader&quot;).get(1));\r\n    assertEquals(&quot;Robin&quot;, grouped.get(&quot;Subordinate&quot;).get(0));\r\n  }\r\n\r\n  @Test\r\n  public void testGroupBySimple() {\r\n    logger.info(&quot;Test groupBy(Collection&lt;E&gt;, Function&lt;E, K&gt;)&quot;);\r\n    Map&lt;String, List&lt;Map&lt;String, String&gt;&gt;&gt; grouped = groupBy(data, m -&gt; m.get(&quot;Role&quot;));\r\n\r\n    logger.info(&quot;Checking keys...&quot;);\r\n    assertNotNull(grouped.get(&quot;Leader&quot;));\r\n    assertNotNull(grouped.get(&quot;Subordinate&quot;));\r\n\r\n    logger.info(&quot;Checking values...&quot;);\r\n    assertEquals(&quot;Batman&quot;, grouped.get(&quot;Leader&quot;).get(0).get(&quot;Username&quot;));\r\n    assertEquals(&quot;Superman&quot;, grouped.get(&quot;Leader&quot;).get(1).get(&quot;Username&quot;));\r\n    assertEquals(&quot;Robin&quot;, grouped.get(&quot;Subordinate&quot;).get(0).get(&quot;Username&quot;));\r\n  }\r\n}\r\n```","title":"Java 8 stream to collect a Map of List of items","body":"<p>Here is a generic approach to this problem. The <code>groupBy</code> method below takes 2 to 3 arguments.</p>\n<ol>\n<li>A <code>collection</code> of type <code>List&lt;E&gt;</code></li>\n<li>A <code>keyFn</code> (key) of type <code>Function&lt;E, K&gt;</code></li>\n<li>(Optional) A <code>valueFn</code> (value) of type <code>Function&lt;E, V&gt;</code> or simply <code>E</code></li>\n</ol>\n<p>I included some unit tests below.</p>\n<h2>CollectionUtils.java</h2>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example.util;\n\nimport static java.util.Collections.unmodifiableMap;\nimport static java.util.stream.Collectors.*;\n\nimport java.util.*;\nimport java.util.AbstractMap.SimpleEntry;\nimport java.util.Map.Entry;\nimport java.util.function.Function;\n\npublic class CollectionUtils {\n  public static &lt;E, K, V&gt; Map&lt;K, List&lt;V&gt;&gt; groupBy(\n      Collection&lt;E&gt; collection, Function&lt;E, K&gt; keyFn, Function&lt;E, V&gt; valueFn) {\n    return collection.stream()\n        .map(item -&gt; new SimpleEntry&lt;K, V&gt;(keyFn.apply(item), valueFn.apply(item)))\n        .collect(groupingBy(Entry::getKey, mapping(Entry::getValue, toList())));\n  }\n\n  public static &lt;E, K&gt; Map&lt;K, List&lt;E&gt;&gt; groupBy(Collection&lt;E&gt; collection, Function&lt;E, K&gt; keyFn) {\n    return groupBy(collection, keyFn, Function.identity());\n  }\n\n  public static &lt;K, V&gt; Map&lt;K, V&gt; immutableMapOf(K k1, V v1, K k2, V v2) {\n    Map&lt;K, V&gt; mutableMap = new HashMap&lt;&gt;();\n    mutableMap.put(k1, v1);\n    mutableMap.put(k2, v2);\n    return unmodifiableMap(mutableMap);\n  }\n}\n</code></pre>\n<h2>CollectionUtilsTest.java</h2>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example.util;\n\nimport static java.util.Arrays.asList;\nimport static org.example.util.CollectionUtils.*;\nimport static org.junit.Assert.*;\n\nimport java.util.*;\nimport org.junit.Test;\nimport org.slf4j.*;\n\npublic class CollectionUtilsTest {\n\n  private static final Logger logger = LoggerFactory.getLogger(CollectionUtilsTest.class);\n\n  private static final List&lt;Map&lt;String, String&gt;&gt; data =\n      asList(\n          immutableMapOf(&quot;Username&quot;, &quot;Batman&quot;, &quot;Role&quot;, &quot;Leader&quot;),\n          immutableMapOf(&quot;Username&quot;, &quot;Robin&quot;, &quot;Role&quot;, &quot;Subordinate&quot;),\n          immutableMapOf(&quot;Username&quot;, &quot;Superman&quot;, &quot;Role&quot;, &quot;Leader&quot;));\n\n  @Test\n  public void testGroupBy() {\n    logger.info(&quot;Test groupBy(Collection&lt;E&gt;, Function&lt;E, K&gt;, Function&lt;E, V&gt;)&quot;);\n    Map&lt;String, List&lt;String&gt;&gt; grouped = groupBy(data, m -&gt; m.get(&quot;Role&quot;), m -&gt; m.get(&quot;Username&quot;));\n\n    logger.info(&quot;Checking keys...&quot;);\n    assertNotNull(grouped.get(&quot;Leader&quot;));\n    assertNotNull(grouped.get(&quot;Subordinate&quot;));\n\n    logger.info(&quot;Checking values...&quot;);\n    assertEquals(&quot;Batman&quot;, grouped.get(&quot;Leader&quot;).get(0));\n    assertEquals(&quot;Superman&quot;, grouped.get(&quot;Leader&quot;).get(1));\n    assertEquals(&quot;Robin&quot;, grouped.get(&quot;Subordinate&quot;).get(0));\n  }\n\n  @Test\n  public void testGroupBySimple() {\n    logger.info(&quot;Test groupBy(Collection&lt;E&gt;, Function&lt;E, K&gt;)&quot;);\n    Map&lt;String, List&lt;Map&lt;String, String&gt;&gt;&gt; grouped = groupBy(data, m -&gt; m.get(&quot;Role&quot;));\n\n    logger.info(&quot;Checking keys...&quot;);\n    assertNotNull(grouped.get(&quot;Leader&quot;));\n    assertNotNull(grouped.get(&quot;Subordinate&quot;));\n\n    logger.info(&quot;Checking values...&quot;);\n    assertEquals(&quot;Batman&quot;, grouped.get(&quot;Leader&quot;).get(0).get(&quot;Username&quot;));\n    assertEquals(&quot;Superman&quot;, grouped.get(&quot;Leader&quot;).get(1).get(&quot;Username&quot;));\n    assertEquals(&quot;Robin&quot;, grouped.get(&quot;Subordinate&quot;).get(0).get(&quot;Username&quot;));\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":1869832,"reputation":5089,"user_id":1692342,"accept_rate":61,"display_name":"user1692342"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56227,"favorite_count":0,"down_vote_count":0,"up_vote_count":30,"accepted_answer_id":49889657,"answer_count":4,"score":30,"last_activity_date":1675802243,"creation_date":1524001494,"question_id":49887953,"body_markdown":"I have a List of Maps which stores the roles and the names of people. For ex:\r\n\r\n    List&lt;Map&lt;String, String&gt;&gt; listOfData\r\n\r\n    1) Role:  Batsman\r\n       Name:  Player1\r\n    \r\n    2)Role:  Batsman\r\n       Name:  Player2\r\n    \r\n    3)Role:  Bowler\r\n       Name:  Player3\r\n\r\n\r\nRole and Name are the Keys of the map.\r\nI want to convert this into a `Map&lt;String, List&lt;String&gt;&gt; result`, which will give me a list of names for each role, i.e\r\n\r\n    k1: Batsman  v1: [Player1, Player2]\r\n    k2: Bowler   v2: [Player3]\r\n\r\n\r\n    listOfData\r\n    \t.stream()\r\n    \t.map(entry -&gt; new AbstractMap.SimpleEntry&lt;&gt;(entry.get(&quot;Role&quot;), entry.get(&quot;Name&quot;))\r\n    \t.collect(Collectors.toList());\r\n\r\nDoing this way will not give me a list of names for the role, it will give me a single name. How do i keep collecting the elements of the list and then add it to a key ?\r\n\r\nJava code to create base structure:\r\n\r\n    Map&lt;String, String&gt; x1 = ImmutableMap.of(&quot;Role&quot;, &quot;Batsman&quot;, &quot;Name&quot;, &quot;Player1&quot;);\r\n    \r\n            Map&lt;String, String&gt; y1 = ImmutableMap.of(&quot;Role&quot;, &quot;Batsman&quot;, &quot;Name&quot;, &quot;Player2&quot;);\r\n    \r\n            Map&lt;String, String&gt; z1 = ImmutableMap.of(&quot;Role&quot;, &quot;Bowler&quot;, &quot;Name&quot;, &quot;Player3&quot;);\r\n    \r\n    \r\n            List&lt;Map&lt;String, String&gt;&gt; list = ImmutableList.of(x1, y1, z1);\r\n            Map&lt;String, List&lt;String&gt;&gt; z = list.stream()\r\n                        .flatMap(e -&gt; e.entrySet().stream())\r\n                        .collect(Collectors.groupingBy(Map.Entry::getKey,\r\n                                Collectors.mapping(Map.Entry::getValue, Collectors.toList())));","title":"Java 8 stream to collect a Map of List of items","body":"<p>I have a List of Maps which stores the roles and the names of people. For ex:</p>\n\n<pre><code>List&lt;Map&lt;String, String&gt;&gt; listOfData\n\n1) Role:  Batsman\n   Name:  Player1\n\n2)Role:  Batsman\n   Name:  Player2\n\n3)Role:  Bowler\n   Name:  Player3\n</code></pre>\n\n<p>Role and Name are the Keys of the map.\nI want to convert this into a <code>Map&lt;String, List&lt;String&gt;&gt; result</code>, which will give me a list of names for each role, i.e</p>\n\n<pre><code>k1: Batsman  v1: [Player1, Player2]\nk2: Bowler   v2: [Player3]\n\n\nlistOfData\n    .stream()\n    .map(entry -&gt; new AbstractMap.SimpleEntry&lt;&gt;(entry.get(\"Role\"), entry.get(\"Name\"))\n    .collect(Collectors.toList());\n</code></pre>\n\n<p>Doing this way will not give me a list of names for the role, it will give me a single name. How do i keep collecting the elements of the list and then add it to a key ?</p>\n\n<p>Java code to create base structure:</p>\n\n<pre><code>Map&lt;String, String&gt; x1 = ImmutableMap.of(\"Role\", \"Batsman\", \"Name\", \"Player1\");\n\n        Map&lt;String, String&gt; y1 = ImmutableMap.of(\"Role\", \"Batsman\", \"Name\", \"Player2\");\n\n        Map&lt;String, String&gt; z1 = ImmutableMap.of(\"Role\", \"Bowler\", \"Name\", \"Player3\");\n\n\n        List&lt;Map&lt;String, String&gt;&gt; list = ImmutableList.of(x1, y1, z1);\n        Map&lt;String, List&lt;String&gt;&gt; z = list.stream()\n                    .flatMap(e -&gt; e.entrySet().stream())\n                    .collect(Collectors.groupingBy(Map.Entry::getKey,\n                            Collectors.mapping(Map.Entry::getValue, Collectors.toList())));\n</code></pre>\n"},{"tags":["java","spring","esapi"],"comments":[{"owner":{"account_id":385460,"reputation":1357,"user_id":742609,"display_name":"Kevin W. Wall"},"score":0,"creation_date":1676932417,"post_id":75378715,"comment_id":133233238,"body_markdown":"Before I attempt to answer, why are you using ESAPI&#39;s Encoder.encodeForSQL() here rather than just using PreparedStatement and bound parameterized types? That&#39;s the preferred way. The encodeForSQL() method is a last resort. See the javadoc at https://www.javadoc.io/doc/org.owasp.esapi/esapi/latest/org/owasp/esapi/Encoder.html#encodeForSQL-org.owasp.esapi.codecs.Codec-java.lang.String-","body":"Before I attempt to answer, why are you using ESAPI&#39;s Encoder.encodeForSQL() here rather than just using PreparedStatement and bound parameterized types? That&#39;s the preferred way. The encodeForSQL() method is a last resort. See the javadoc at <a href=\"https://www.javadoc.io/doc/org.owasp.esapi/esapi/latest/org/owasp/esapi/Encoder.html#encodeForSQL-org.owasp.esapi.codecs.Codec-java.lang.String-\" rel=\"nofollow noreferrer\">javadoc.io/doc/org.owasp.esapi/esapi/latest/org/owasp/esapi/&zwnj;&#8203;&hellip;</a>"},{"owner":{"account_id":385460,"reputation":1357,"user_id":742609,"display_name":"Kevin W. Wall"},"score":0,"creation_date":1676932570,"post_id":75378715,"comment_id":133233268,"body_markdown":"Also, assuming there&#39;s a reason way PreparedStatement won&#39;t work, in order for us to diagnose this, we will need the COMPLETE exception stack trace. There&#39;s likely to be a &#39;Caused by&#39; that is missing and that contains important information that we&#39;re missing. E.g., it may be similar to this: https://stackoverflow.com/questions/68305702/esapi-getting-classnotfoundexception-with-esapi-2-2-3-1/68332784#68332784","body":"Also, assuming there&#39;s a reason way PreparedStatement won&#39;t work, in order for us to diagnose this, we will need the COMPLETE exception stack trace. There&#39;s likely to be a &#39;Caused by&#39; that is missing and that contains important information that we&#39;re missing. E.g., it may be similar to this: <a href=\"https://stackoverflow.com/questions/68305702/esapi-getting-classnotfoundexception-with-esapi-2-2-3-1/68332784#68332784\" title=\"esapi getting classnotfoundexception with esapi 2 2 3 1\">stackoverflow.com/questions/68305702/&hellip;</a>"}],"owner":{"account_id":5879597,"reputation":838,"user_id":4629427,"display_name":"Rocky4Ever"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":228,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675802029,"creation_date":1675802029,"question_id":75378715,"body_markdown":"I am using ESAPI to encode the string, when using with Oracle JDBC. I Get following error even though i have ESAPI.Properties in my project.\r\n\r\n     final var queryString =\r\n                    String.format(&quot;SELECT * FROM %1$s WHERE %2$s = &#39;%3$s&#39;&quot;,\r\n                            ESAPI.encoder().encodeForSQL(new OracleCodec(),tableName),\r\n                            ESAPI.encoder().encodeForSQL(new OracleCodec(),columnName),\r\n                            ESAPI.encoder().encodeForSQL(new OracleCodec(),columnValue));\r\n\r\n\r\n\r\n\r\n    Caused by: java.lang.ClassNotFoundException: org.owasp.encoder.esapi.ESAPIEncoder\r\n    \tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\r\n    \tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\r\n    \tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\r\n    \tat java.base/java.lang.Class.forName0(Native Method)\r\n    \tat java.base/java.lang.Class.forName(Class.java:375)\r\n    \tat org.owasp.esapi.util.ObjFactory.loadClassByStringName(ObjFactory.java:158)\r\n    \tat org.owasp.esapi.util.ObjFactory.make(ObjFactory.java:81)\r\n    \t... 108 common frames omitted\r\n\r\nHere is my project structure.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nVersion:\r\n\r\n     implementation &#39;org.owasp.esapi:esapi:2.2.1.1&#39;\r\n\r\nhere is my ESAPI.properties file\r\n\r\n    # Properties based on ESAPI 2.2.1.1&#39;s configuration/esapi/ESAPI.properties file.\r\n    \r\n    ESAPI.Encoder=org.owasp.encoder.esapi.ESAPIEncoder\r\n    \r\n    # Log4JFactory Requires log4j.xml or log4j.properties in classpath - http://www.laliluna.de/log4j-tutorial.html\r\n    # Note that this is now considered deprecated!\r\n    #ESAPI.Logger=org.owasp.esapi.logging.log4j.Log4JLogFactory\r\n    \r\n    # To use JUL, you need to obtain ESAPI&#39;s esapi-java-logging.properties and drop\r\n    # it somewhere into your class path. You can get it from the ESAPI configuration\r\n    # jar. (See Release 2.2.1.1 under GitHub for ESAPI/esapi-java-legacy.)\r\n    ESAPI.Logger=org.owasp.esapi.logging.java.JavaLogFactory\r\n    \r\n    # To use the new SLF4J logger in ESAPI (see GitHub issue #129), set\r\n    #ESAPI.Logger=org.owasp.esapi.logging.slf4j.Slf4JLogFactory\r\n    # and do whatever other normal SLF4J configuration that you normally would do for your application.\r\n    \r\n    # Note: The uncommented out ones are those needed for SLF4J. Others may be\r\n    # needed if you change the ESAPI logger.\r\n    #===========================================================================\r\n    # ESAPI Logging\r\n    # Set the application name if these logs are combined with other applications\r\n    Logger.ApplicationName=sql-service\r\n    # If you use an HTML log viewer that does not properly HTML escape log data, you can set LogEncodingRequired to true\r\n    Logger.LogEncodingRequired=false\r\n    # Determines whether ESAPI should log the application name. This might be clutter in some single-server/single-app environments.\r\n    Logger.LogApplicationName=true\r\n    # Determines whether ESAPI should log the server IP and port. This might be clutter in some single-server environments.\r\n    Logger.LogServerIP=false\r\n    # LogFileName, the name of the logging file. Provide a full directory path (e.g., C:\\\\ESAPI\\\\ESAPI_logging_file) if you\r\n    # want to place it in a specific directory.\r\n    #Logger.LogFileName=ESAPI_logging_file\r\n    # MaxLogFileSize, the max size (in bytes) of a single log file before it cuts over to a new one (default is 10,000,000)\r\n    #Logger.MaxLogFileSize=10000000\r\n    # Determines whether ESAPI should log the user info.\r\n    Logger.UserInfo=false\r\n    # Determines whether ESAPI should log the session id and client IP\r\n    Logger.ClientInfo=false\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/r6nny.png\r\n\r\nAny Help would be appreciated.","title":"ESAPI:java.lang.ClassNotFoundException: org.owasp.encoder.esapi.ESAPIEncoder Encoder class","body":"<p>I am using ESAPI to encode the string, when using with Oracle JDBC. I Get following error even though i have ESAPI.Properties in my project.</p>\n<pre><code> final var queryString =\n                String.format(&quot;SELECT * FROM %1$s WHERE %2$s = '%3$s'&quot;,\n                        ESAPI.encoder().encodeForSQL(new OracleCodec(),tableName),\n                        ESAPI.encoder().encodeForSQL(new OracleCodec(),columnName),\n                        ESAPI.encoder().encodeForSQL(new OracleCodec(),columnValue));\n\n\n\n\nCaused by: java.lang.ClassNotFoundException: org.owasp.encoder.esapi.ESAPIEncoder\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\n    at java.base/java.lang.Class.forName0(Native Method)\n    at java.base/java.lang.Class.forName(Class.java:375)\n    at org.owasp.esapi.util.ObjFactory.loadClassByStringName(ObjFactory.java:158)\n    at org.owasp.esapi.util.ObjFactory.make(ObjFactory.java:81)\n    ... 108 common frames omitted\n</code></pre>\n<p>Here is my project structure.</p>\n<p><a href=\"https://i.stack.imgur.com/r6nny.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/r6nny.png\" alt=\"enter image description here\" /></a></p>\n<p>Version:</p>\n<pre><code> implementation 'org.owasp.esapi:esapi:2.2.1.1'\n</code></pre>\n<p>here is my ESAPI.properties file</p>\n<pre><code># Properties based on ESAPI 2.2.1.1's configuration/esapi/ESAPI.properties file.\n\nESAPI.Encoder=org.owasp.encoder.esapi.ESAPIEncoder\n\n# Log4JFactory Requires log4j.xml or log4j.properties in classpath - http://www.laliluna.de/log4j-tutorial.html\n# Note that this is now considered deprecated!\n#ESAPI.Logger=org.owasp.esapi.logging.log4j.Log4JLogFactory\n\n# To use JUL, you need to obtain ESAPI's esapi-java-logging.properties and drop\n# it somewhere into your class path. You can get it from the ESAPI configuration\n# jar. (See Release 2.2.1.1 under GitHub for ESAPI/esapi-java-legacy.)\nESAPI.Logger=org.owasp.esapi.logging.java.JavaLogFactory\n\n# To use the new SLF4J logger in ESAPI (see GitHub issue #129), set\n#ESAPI.Logger=org.owasp.esapi.logging.slf4j.Slf4JLogFactory\n# and do whatever other normal SLF4J configuration that you normally would do for your application.\n\n# Note: The uncommented out ones are those needed for SLF4J. Others may be\n# needed if you change the ESAPI logger.\n#===========================================================================\n# ESAPI Logging\n# Set the application name if these logs are combined with other applications\nLogger.ApplicationName=sql-service\n# If you use an HTML log viewer that does not properly HTML escape log data, you can set LogEncodingRequired to true\nLogger.LogEncodingRequired=false\n# Determines whether ESAPI should log the application name. This might be clutter in some single-server/single-app environments.\nLogger.LogApplicationName=true\n# Determines whether ESAPI should log the server IP and port. This might be clutter in some single-server environments.\nLogger.LogServerIP=false\n# LogFileName, the name of the logging file. Provide a full directory path (e.g., C:\\\\ESAPI\\\\ESAPI_logging_file) if you\n# want to place it in a specific directory.\n#Logger.LogFileName=ESAPI_logging_file\n# MaxLogFileSize, the max size (in bytes) of a single log file before it cuts over to a new one (default is 10,000,000)\n#Logger.MaxLogFileSize=10000000\n# Determines whether ESAPI should log the user info.\nLogger.UserInfo=false\n# Determines whether ESAPI should log the session id and client IP\nLogger.ClientInfo=false\n</code></pre>\n<p>Any Help would be appreciated.</p>\n"},{"tags":["java","android","kotlin","android-intent","broadcastreceiver"],"owner":{"account_id":7740347,"reputation":452,"user_id":5860352,"display_name":"Doron Ben-Ari"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675801888,"creation_date":1675728473,"question_id":75367780,"body_markdown":"I would like to listen to intent that is broadcasted due to specific code. \r\n\r\n```kotlin\r\nregisterReceiver(PhoneStateReceiver(), IntentFilter(ACTION_PHONE_STATE_CHANGED))\r\ntelecomManager.placeCall(uri, null)\r\n```\r\nIs it guaranteed that if I ``registerReceiver()`` just before the call to ``placeCall()``, I will not miss the intent that placing a call will broadcast?\r\n\r\nI guess this would be the same as asking if the registration is done synchronously.\r\n\r\nOf course I can try, but that will not mean that it is guaranteed.\r\nAlso, I can register on the activity lifecycle, and use a flag in PhoneStateReceiver(), but that would be less straightforward and more bug-prone.","title":"Does registerReceiver() listen immediately?","body":"<p>I would like to listen to intent that is broadcasted due to specific code.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>registerReceiver(PhoneStateReceiver(), IntentFilter(ACTION_PHONE_STATE_CHANGED))\ntelecomManager.placeCall(uri, null)\n</code></pre>\n<p>Is it guaranteed that if I <code>registerReceiver()</code> just before the call to <code>placeCall()</code>, I will not miss the intent that placing a call will broadcast?</p>\n<p>I guess this would be the same as asking if the registration is done synchronously.</p>\n<p>Of course I can try, but that will not mean that it is guaranteed.\nAlso, I can register on the activity lifecycle, and use a flag in PhoneStateReceiver(), but that would be less straightforward and more bug-prone.</p>\n"},{"tags":["java","spring","validation","spring-mvc"],"comments":[{"owner":{"account_id":17750,"reputation":25470,"user_id":40064,"accept_rate":69,"display_name":"Wim Deblauwe"},"score":2,"creation_date":1458722625,"post_id":36173332,"comment_id":59982625,"body_markdown":"Might be interesting: http://stackoverflow.com/questions/18911154/how-to-specify-validation-group-for-valid","body":"Might be interesting: <a href=\"http://stackoverflow.com/questions/18911154/how-to-specify-validation-group-for-valid\" title=\"how to specify validation group for valid\">stackoverflow.com/questions/18911154/&hellip;</a>"},{"owner":{"account_id":2468965,"reputation":26460,"user_id":2151351,"display_name":"a better oliver"},"score":4,"creation_date":1458723061,"post_id":36173332,"comment_id":59982852,"body_markdown":"_&quot;supporting the specification of validation groups&quot;_ is a very explicit statement.","body":"<i>&quot;supporting the specification of validation groups&quot;</i> is a very explicit statement."},{"owner":{"account_id":339454,"reputation":2681,"user_id":668951,"accept_rate":88,"display_name":"Atul"},"score":0,"creation_date":1458723246,"post_id":36173332,"comment_id":59982968,"body_markdown":"I should think that Valid is tightly coupled with JSR 303 validations (NotNull, etc). Whereas you can create other validation/groups and have them checked in Validated.","body":"I should think that Valid is tightly coupled with JSR 303 validations (NotNull, etc). Whereas you can create other validation/groups and have them checked in Validated."},{"owner":{"account_id":258256,"reputation":24473,"user_id":540312,"accept_rate":87,"display_name":"Sergei Tachenov"},"score":0,"creation_date":1458724766,"post_id":36173332,"comment_id":59983888,"body_markdown":"@zeroflagL, true, but since I have never used it, I missed the point and fixated instead on the “not JSR-303 specific” part. Now it&#39;s clear.","body":"@zeroflagL, true, but since I have never used it, I missed the point and fixated instead on the “not JSR-303 specific” part. Now it&#39;s clear."}],"answers":[{"tags":[],"owner":{"account_id":919674,"reputation":14586,"user_id":951609,"accept_rate":60,"display_name":"František Hartman"},"comment_count":0,"down_vote_count":0,"up_vote_count":118,"is_accepted":true,"score":118,"last_activity_date":1458724435,"creation_date":1458724357,"answer_id":36173922,"question_id":36173332,"body_markdown":"As you quoted from the documentation, `@Validated` was added to support &quot;validation groups&quot;, i.e. group of fields in the validated bean. This can be used in multi step forms where you may validate name, email, etc.. in first step and then other fields in following step(s).\r\n\r\nThe reason why this wasn&#39;t added into `@Valid` annotation is because that it is standardized using the java community process (JSR-303), which takes time and Spring developers wanted to allow people to use this functionality sooner.\r\n\r\nGo to [this jira ticket][1] to see how the annotation came into existence.\r\n\r\n  [1]: https://jira.spring.io/browse/SPR-6373","title":"Difference between @Valid and @Validated in Spring","body":"<p>As you quoted from the documentation, <code>@Validated</code> was added to support \"validation groups\", i.e. group of fields in the validated bean. This can be used in multi step forms where you may validate name, email, etc.. in first step and then other fields in following step(s).</p>\n\n<p>The reason why this wasn't added into <code>@Valid</code> annotation is because that it is standardized using the java community process (JSR-303), which takes time and Spring developers wanted to allow people to use this functionality sooner.</p>\n\n<p>Go to <a href=\"https://jira.spring.io/browse/SPR-6373\">this jira ticket</a> to see how the annotation came into existence.</p>\n"},{"comments":[{"owner":{"account_id":4243102,"reputation":3047,"user_id":5784939,"display_name":"Eugene Maysyuk"},"score":2,"creation_date":1660686820,"post_id":52092984,"comment_id":129590356,"body_markdown":"To keep in mind. \\@Validated doesn&#39;t validate nested DTOs, you need to put \\@Valid on those nested fields (Account#user for example) in order to propagate validation for them.","body":"To keep in mind. \\@Validated doesn&#39;t validate nested DTOs, you need to put \\@Valid on those nested fields (Account#user for example) in order to propagate validation for them."},{"owner":{"account_id":4243102,"reputation":3047,"user_id":5784939,"display_name":"Eugene Maysyuk"},"score":0,"creation_date":1660686910,"post_id":52092984,"comment_id":129590377,"body_markdown":"@Validated also can be used on classes to enable validation of @Min/@Max that reside next to method arguments of that class, which doesn&#39;t happen by default. public void update(@Min(10) Long count) {}","body":"@Validated also can be used on classes to enable validation of @Min/@Max that reside next to method arguments of that class, which doesn&#39;t happen by default. public void update(@Min(10) Long count) {}"}],"tags":[],"owner":{"account_id":8128289,"reputation":4229,"user_id":6122411,"accept_rate":0,"display_name":"zhuhang.jasper"},"comment_count":2,"down_vote_count":1,"up_vote_count":203,"is_accepted":false,"score":202,"last_activity_date":1535619554,"creation_date":1535619554,"answer_id":52092984,"question_id":36173332,"body_markdown":"A more straight forward answer. \r\nFor those who still don&#39;t know what on earth is ***&quot;validation group&quot;***.\r\n\r\n**Usage for `@Valid` Validation**\r\n\r\nController:\r\n\r\n    @RequestMapping(value = &quot;createAccount&quot;)\r\n    public String stepOne(@Valid Account account) {...}\r\n\r\nForm object:\r\n\r\n    public class Account {\r\n\r\n        @NotBlank\r\n        private String username;\r\n\r\n        @Email\r\n        @NotBlank\r\n        private String email;\r\n\r\n    }\r\n    \r\n&lt;hr&gt;\r\n\r\n**Usage for `@Validated` Validation Group**&lt;br&gt;\r\nSource: http://blog.codeleak.pl/2014/08/validation-groups-in-spring-mvc.html\r\n\r\nController:\r\n\r\n    @RequestMapping(value = &quot;stepOne&quot;)\r\n    public String stepOne(@Validated(Account.ValidationStepOne.class) Account account) {...}\r\n\r\n    @RequestMapping(value = &quot;stepTwo&quot;)\r\n    public String stepTwo(@Validated(Account.ValidationStepTwo.class) Account account) {...}\r\n\r\nForm object:\r\n\r\n    public class Account {\r\n\r\n        @NotBlank(groups = {ValidationStepOne.class})\r\n        private String username;\r\n\r\n        @Email(groups = {ValidationStepOne.class})\r\n        @NotBlank(groups = {ValidationStepOne.class})\r\n        private String email;\r\n\r\n        @NotBlank(groups = {ValidationStepTwo.class})\r\n        @StrongPassword(groups = {ValidationStepTwo.class})\r\n        private String password;\r\n\r\n        @NotBlank(groups = {ValidationStepTwo.class})\r\n        private String confirmedPassword;\r\n        \r\n    }\r\n\r\n","title":"Difference between @Valid and @Validated in Spring","body":"<p>A more straight forward answer. \nFor those who still don't know what on earth is <strong><em>\"validation group\"</em></strong>.</p>\n\n<p><strong>Usage for <code>@Valid</code> Validation</strong></p>\n\n<p>Controller:</p>\n\n<pre><code>@RequestMapping(value = \"createAccount\")\npublic String stepOne(@Valid Account account) {...}\n</code></pre>\n\n<p>Form object:</p>\n\n<pre><code>public class Account {\n\n    @NotBlank\n    private String username;\n\n    @Email\n    @NotBlank\n    private String email;\n\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Usage for <code>@Validated</code> Validation Group</strong><br>\nSource: <a href=\"http://blog.codeleak.pl/2014/08/validation-groups-in-spring-mvc.html\" rel=\"noreferrer\">http://blog.codeleak.pl/2014/08/validation-groups-in-spring-mvc.html</a></p>\n\n<p>Controller:</p>\n\n<pre><code>@RequestMapping(value = \"stepOne\")\npublic String stepOne(@Validated(Account.ValidationStepOne.class) Account account) {...}\n\n@RequestMapping(value = \"stepTwo\")\npublic String stepTwo(@Validated(Account.ValidationStepTwo.class) Account account) {...}\n</code></pre>\n\n<p>Form object:</p>\n\n<pre><code>public class Account {\n\n    @NotBlank(groups = {ValidationStepOne.class})\n    private String username;\n\n    @Email(groups = {ValidationStepOne.class})\n    @NotBlank(groups = {ValidationStepOne.class})\n    private String email;\n\n    @NotBlank(groups = {ValidationStepTwo.class})\n    @StrongPassword(groups = {ValidationStepTwo.class})\n    private String password;\n\n    @NotBlank(groups = {ValidationStepTwo.class})\n    private String confirmedPassword;\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16154304,"reputation":31,"user_id":11661836,"display_name":"Zelin Zhu"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1560827504,"creation_date":1560824799,"answer_id":56641001,"question_id":36173332,"body_markdown":"besides above, you can only apply `@Valid` on a domain/field for nested validation, not with a `@validated`.","title":"Difference between @Valid and @Validated in Spring","body":"<p>besides above, you can only apply <code>@Valid</code> on a domain/field for nested validation, not with a <code>@validated</code>.</p>\n"},{"comments":[{"owner":{"account_id":5065814,"reputation":590,"user_id":4065938,"accept_rate":75,"display_name":"Theiaz"},"score":2,"creation_date":1581507082,"post_id":57696133,"comment_id":106455487,"body_markdown":"Could you explain why the annotation has no effect for `List` objects? I assume that this will also not work for other collections like `Map`?\n\nMaybe you could give me a more detailed explanation in my question: https://stackoverflow.com/questions/60167961/cascaded-bean-validation-2-0-not-working-with-nested-object-inside-map","body":"Could you explain why the annotation has no effect for <code>List</code> objects? I assume that this will also not work for other collections like <code>Map</code>?  Maybe you could give me a more detailed explanation in my question: <a href=\"https://stackoverflow.com/questions/60167961/cascaded-bean-validation-2-0-not-working-with-nested-object-inside-map\" title=\"cascaded bean validation 2 0 not working with nested object inside map\">stackoverflow.com/questions/60167961/&hellip;</a>"},{"owner":{"account_id":12863622,"reputation":2586,"user_id":9304616,"display_name":"Lebecca"},"score":1,"creation_date":1581523661,"post_id":57696133,"comment_id":106465194,"body_markdown":"@Theiaz As you wish","body":"@Theiaz As you wish"},{"owner":{"account_id":4012248,"reputation":924,"user_id":3305311,"accept_rate":29,"display_name":"Fabio Formosa"},"score":0,"creation_date":1617287996,"post_id":57696133,"comment_id":118267696,"body_markdown":"What I was looking for!","body":"What I was looking for!"},{"owner":{"account_id":3618847,"reputation":867,"user_id":17695211,"display_name":"Alexey Veleshko"},"score":1,"creation_date":1642596179,"post_id":57696133,"comment_id":125111660,"body_markdown":"This is actually a more important distinction than validation groups. No one uses validation groups.","body":"This is actually a more important distinction than validation groups. No one uses validation groups."}],"tags":[],"owner":{"account_id":12863622,"reputation":2586,"user_id":9304616,"display_name":"Lebecca"},"comment_count":4,"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1567007536,"creation_date":1567007536,"answer_id":57696133,"question_id":36173332,"body_markdown":"In the example code snippets of the question, `@Valid` and `@Validated` make no difference. But if the `@RequestBody` is annotated with a `List` object, or is a string value annotated by `@RequestParam`, the validation will not take effect.\r\n\r\nWe can use the `@Validated`&#39;s method-level validation capability to make it work. To achieve this, the key point is to place `@Validated` on the class. This may be another important difference between `@Valid` and `@Validated` in spring framework.\r\n\r\nRefrence \r\n\r\n- [Spring boot docs](https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-validation.html)","title":"Difference between @Valid and @Validated in Spring","body":"<p>In the example code snippets of the question, <code>@Valid</code> and <code>@Validated</code> make no difference. But if the <code>@RequestBody</code> is annotated with a <code>List</code> object, or is a string value annotated by <code>@RequestParam</code>, the validation will not take effect.</p>\n\n<p>We can use the <code>@Validated</code>'s method-level validation capability to make it work. To achieve this, the key point is to place <code>@Validated</code> on the class. This may be another important difference between <code>@Valid</code> and <code>@Validated</code> in spring framework.</p>\n\n<p>Refrence </p>\n\n<ul>\n<li><a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-validation.html\" rel=\"noreferrer\">Spring boot docs</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":269513,"reputation":14298,"user_id":558892,"accept_rate":79,"display_name":"Deqing"},"comment_count":0,"down_vote_count":3,"up_vote_count":1,"is_accepted":false,"score":-2,"last_activity_date":1629114059,"creation_date":1629114059,"answer_id":68802207,"question_id":36173332,"body_markdown":"`@Validated` can be used for a class:\r\n\r\n    @Validated\r\n    public class Person {\r\n        @Size(min=3)\r\n        private String name;\r\n    ...\r\n\r\n","title":"Difference between @Valid and @Validated in Spring","body":"<p><code>@Validated</code> can be used for a class:</p>\n<pre><code>@Validated\npublic class Person {\n    @Size(min=3)\n    private String name;\n...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1756015,"reputation":11409,"user_id":1604048,"accept_rate":71,"display_name":"Murat Yıldız"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1675801816,"creation_date":1658511068,"answer_id":73084057,"question_id":36173332,"body_markdown":"Just for simplifying:\r\n\r\n&gt;`@Validated` annotation is a class-level annotation that we can use to tell `Spring` to validate parameters that are passed into a method of the annotated class.\r\n\r\nand \r\n\r\n&gt;`@Valid` annotation on method parameters and fields to tell `Spring` that we want a method parameter or field to be validated. \r\n","title":"Difference between @Valid and @Validated in Spring","body":"<p>Just for simplifying:</p>\n<blockquote>\n<p><code>@Validated</code> annotation is a class-level annotation that we can use to tell <code>Spring</code> to validate parameters that are passed into a method of the annotated class.</p>\n</blockquote>\n<p>and</p>\n<blockquote>\n<p><code>@Valid</code> annotation on method parameters and fields to tell <code>Spring</code> that we want a method parameter or field to be validated.</p>\n</blockquote>\n"}],"owner":{"account_id":258256,"reputation":24473,"user_id":540312,"accept_rate":87,"display_name":"Sergei Tachenov"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":136273,"favorite_count":0,"down_vote_count":1,"up_vote_count":181,"accepted_answer_id":36173922,"answer_count":6,"score":180,"last_activity_date":1675801816,"creation_date":1458722468,"question_id":36173332,"body_markdown":"Spring supports two different validation methods: Spring validation and JSR-303 bean validation. Both can be used by defining a Spring validator that delegates to other delegators including the bean validator. So far so good.\r\n\r\nBut when annotating methods to actually request validation, it&#39;s another story. I can annotate like this\r\n\r\n\t@RequestMapping(value = &quot;/object&quot;, method = RequestMethod.POST)\r\n\tpublic @ResponseBody TestObject create(@Valid @RequestBody TestObject obj, BindingResult result) {\r\n\r\nor like this\r\n\r\n\t@RequestMapping(value = &quot;/object&quot;, method = RequestMethod.POST)\r\n\tpublic @ResponseBody TestObject create(@Validated @RequestBody TestObject obj, BindingResult result) {\r\n\r\nHere, @Valid is [javax.validation.Valid][1], and @Validated is [org.springframework.validation.annotation.Validated][2]. The docs for the latter say\r\n\r\n&gt; Variant of JSR-303&#39;s Valid, supporting the specification of validation\r\n&gt; groups. Designed for convenient use with Spring&#39;s JSR-303 support but\r\n&gt; not JSR-303 specific.\r\n\r\nwhich doesn&#39;t help much because it doesn&#39;t tell exactly how it&#39;s different. If at all. Both seem to be working pretty fine for me.\r\n\r\n  [1]: http://docs.oracle.com/javaee/7/api/javax/validation/Valid.html\r\n  [2]: https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/validation/annotation/Validated.html","title":"Difference between @Valid and @Validated in Spring","body":"<p>Spring supports two different validation methods: Spring validation and JSR-303 bean validation. Both can be used by defining a Spring validator that delegates to other delegators including the bean validator. So far so good.</p>\n\n<p>But when annotating methods to actually request validation, it's another story. I can annotate like this</p>\n\n<pre><code>@RequestMapping(value = \"/object\", method = RequestMethod.POST)\npublic @ResponseBody TestObject create(@Valid @RequestBody TestObject obj, BindingResult result) {\n</code></pre>\n\n<p>or like this</p>\n\n<pre><code>@RequestMapping(value = \"/object\", method = RequestMethod.POST)\npublic @ResponseBody TestObject create(@Validated @RequestBody TestObject obj, BindingResult result) {\n</code></pre>\n\n<p>Here, @Valid is <a href=\"http://docs.oracle.com/javaee/7/api/javax/validation/Valid.html\">javax.validation.Valid</a>, and @Validated is <a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/validation/annotation/Validated.html\">org.springframework.validation.annotation.Validated</a>. The docs for the latter say</p>\n\n<blockquote>\n  <p>Variant of JSR-303's Valid, supporting the specification of validation\n  groups. Designed for convenient use with Spring's JSR-303 support but\n  not JSR-303 specific.</p>\n</blockquote>\n\n<p>which doesn't help much because it doesn't tell exactly how it's different. If at all. Both seem to be working pretty fine for me.</p>\n"},{"tags":["java",".net","sql-server","sql-server-2016","tls1.2"],"comments":[{"owner":{"account_id":2399674,"reputation":2691,"user_id":2097675,"display_name":"JJF"},"score":1,"creation_date":1519400354,"post_id":48834528,"comment_id":84909332,"body_markdown":"That link you refer to says you have to have 1.0 and 1.1 disabled in the registry for the server in order for 1.2 to work.  Rather than using the IISCrypto tool why don&#39;t you check the actual registry settings for the server and verify 1.0 and 1.1 are disabled and 1.2 is enabled?","body":"That link you refer to says you have to have 1.0 and 1.1 disabled in the registry for the server in order for 1.2 to work.  Rather than using the IISCrypto tool why don&#39;t you check the actual registry settings for the server and verify 1.0 and 1.1 are disabled and 1.2 is enabled?"},{"owner":{"account_id":1756015,"reputation":11409,"user_id":1604048,"accept_rate":71,"display_name":"Murat Yıldız"},"score":0,"creation_date":1538398260,"post_id":48834528,"comment_id":92117744,"body_markdown":"@RanPaul Could you please try the approach given in my answer below and let me know if it works? Thanks in advance..","body":"@RanPaul Could you please try the approach given in my answer below and let me know if it works? Thanks in advance.."},{"owner":{"account_id":6049972,"reputation":361,"user_id":5574962,"display_name":"3per"},"score":0,"creation_date":1607405305,"post_id":48834528,"comment_id":115255261,"body_markdown":"@RanPaul, Is there an answer already?","body":"@RanPaul, Is there an answer already?"}],"answers":[{"tags":[],"owner":{"account_id":1756015,"reputation":11409,"user_id":1604048,"accept_rate":71,"display_name":"Murat Yıldız"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1675801781,"creation_date":1519744270,"answer_id":49011963,"question_id":48834528,"body_markdown":"Microsoft Windows Server stores information about different security-enhanced channel protocols that Windows Server supports. This information is stored in the following registry key:\r\n\r\n&gt;HKey_Local_Machine\\System\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\r\n\r\nTypically, this key contains the following subkeys:\r\n&gt;PCT 1.0, SSL 2.0, SSL 3.0, TLS 1.0 ...\r\n\r\nEach key holds information about the protocol for the key. Any one of these protocols can be enabled at the server. To do this, you create a new DWORDvalue in the server subkey of the protocol. You set the DWORDvalue to &quot;1&quot;.\r\n\r\nImportant: Back up the registry before you modify it. Then, you can restore the registry if a problem occurs. \r\n\r\nTo enable the TLS 1.x protocol follow these steps:\r\n\r\nClick Start, click Run, type regedt32 or type regedit, and then click OK.\r\nIn Registry Editor, locate the following registry key:\r\n\r\n&gt;HKey_Local_Machine\\System\\CurrentControlSet\\Control\\SecurityProviders \\SCHANNEL\\Protocols\\TLS 1.x\\Server\r\n\r\nOn the Edit menu, click Add Value.\r\nIn the Data Type list, click DWORD.\r\nIn the Value Name box, type Enabled, and then click OK.\r\n\r\nNote If this value is present, double-click the value to edit its current value.\r\n\r\nType 11111111 in Binary Editor to set the value of the new key equal to &quot;1&quot;.\r\nClick OK. Restart the computer.\r\n\r\n","title":"Sql Server 2016: Enable TLS 1.2 for SQL Server Connection","body":"<p>Microsoft Windows Server stores information about different security-enhanced channel protocols that Windows Server supports. This information is stored in the following registry key:</p>\n<blockquote>\n<p>HKey_Local_Machine\\System\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols</p>\n</blockquote>\n<p>Typically, this key contains the following subkeys:</p>\n<blockquote>\n<p>PCT 1.0, SSL 2.0, SSL 3.0, TLS 1.0 ...</p>\n</blockquote>\n<p>Each key holds information about the protocol for the key. Any one of these protocols can be enabled at the server. To do this, you create a new DWORDvalue in the server subkey of the protocol. You set the DWORDvalue to &quot;1&quot;.</p>\n<p>Important: Back up the registry before you modify it. Then, you can restore the registry if a problem occurs.</p>\n<p>To enable the TLS 1.x protocol follow these steps:</p>\n<p>Click Start, click Run, type regedt32 or type regedit, and then click OK.\nIn Registry Editor, locate the following registry key:</p>\n<blockquote>\n<p>HKey_Local_Machine\\System\\CurrentControlSet\\Control\\SecurityProviders \\SCHANNEL\\Protocols\\TLS 1.x\\Server</p>\n</blockquote>\n<p>On the Edit menu, click Add Value.\nIn the Data Type list, click DWORD.\nIn the Value Name box, type Enabled, and then click OK.</p>\n<p>Note If this value is present, double-click the value to edit its current value.</p>\n<p>Type 11111111 in Binary Editor to set the value of the new key equal to &quot;1&quot;.\nClick OK. Restart the computer.</p>\n"},{"tags":[],"owner":{"account_id":13036106,"reputation":199,"user_id":9420968,"display_name":"toornt"},"comment_count":0,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1519843006,"creation_date":1519843006,"answer_id":49036358,"question_id":48834528,"body_markdown":"Check the involved certificates. One may be invalid.\r\n\r\nIf the machines validate their certificates, try:\r\n\r\nRegistry Script for disabling stupid encryptions:\r\nSave this as .reg\r\n\r\n    Windows Registry Editor Version 5.00\r\n    [HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\SSL 2.0\\Client]\r\n    &quot;Enabled&quot;=dword:00000000\r\n    &quot;DisabledByDefault&quot;=dword:00000001\r\n    [HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\SSL 2.0\\Server]\r\n    &quot;Enabled&quot;=dword:00000000\r\n    &quot;DisabledByDefault&quot;=dword:00000001\r\n    [HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\SSL 3.0\\Client]\r\n    &quot;Enabled&quot;=dword:00000000\r\n    &quot;DisabledByDefault&quot;=dword:00000001\r\n    [HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\SSL 3.0\\Server]\r\n    &quot;Enabled&quot;=dword:00000000\r\n    &quot;DisabledByDefault&quot;=dword:00000001\r\n    [HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\TLS 1.0\\Client]\r\n    &quot;Enabled&quot;=dword:00000000\r\n    &quot;DisabledByDefault&quot;=dword:00000001\r\n    [HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\TLS 1.0\\Server]\r\n    &quot;Enabled&quot;=dword:00000000\r\n    &quot;DisabledByDefault&quot;=dword:00000001\r\n    [HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\TLS 1.1\\Client]\r\n    &quot;Enabled&quot;=dword:00000000\r\n    &quot;DisabledByDefault&quot;=dword:00000001\r\n    [HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\TLS 1.1\\Server]\r\n    &quot;Enabled&quot;=dword:00000000\r\n    &quot;DisabledByDefault&quot;=dword:00000001\r\n    [HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\TLS 1.2\\Client]\r\n    &quot;Enabled&quot;=dword:00000001\r\n    &quot;DisabledByDefault&quot;=dword:00000000\r\n    [HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\TLS 1.2\\Server]\r\n    &quot;Enabled&quot;=dword:00000001\r\n    &quot;DisabledByDefault&quot;=dword:00000000\r\n    \r\n    [HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\.NETFramework\\v4.0.30319]\r\n    &quot;SchUseStrongCrypto&quot;=dword:00000001\r\n    \r\n    [HKEY_LOCAL_MACHINE\\SOFTWARE\\Wow6432Node\\Microsoft\\.NETFramework\\v4.0.30319]\r\n    &quot;SchUseStrongCrypto&quot;=dword:00000001\r\n\r\nYou&#39;ll have to adjust your .NET Framework. If you are actually using .Net 2.0 (old!) the last two Keys should be\r\n\r\n    [HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\.NETFramework\\v2.0.50727]\r\n    &quot;SystemDefaultTlsVersions&quot;=dword:00000001\r\n    \r\n    [HKEY_LOCAL_MACHINE\\SOFTWARE\\Wow6432Node\\Microsoft\\.NETFramework\\v2.0.50727]\r\n    &quot;SystemDefaultTlsVersions&quot;=dword:00000001 \r\n\r\nHere is a .ps1 by Chris Duck to check enabled encryptions\r\n\r\n        &lt;#\r\n     .DESCRIPTION\r\n       Outputs the SSL protocols that the client is able to successfully use to connect to a server.\r\n     \r\n     .NOTES\r\n     \r\n       Copyright 2014 Chris Duck\r\n       http://blog.whatsupduck.net\r\n     \r\n       Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);\r\n       you may not use this file except in compliance with the License.\r\n       You may obtain a copy of the License at\r\n     \r\n         http://www.apache.org/licenses/LICENSE-2.0\r\n     \r\n       Unless required by applicable law or agreed to in writing, software\r\n       distributed under the License is distributed on an &quot;AS IS&quot; BASIS,\r\n       WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n       See the License for the specific language governing permissions and\r\n       limitations under the License.\r\n     \r\n     .PARAMETER ComputerName\r\n       The name of the remote computer to connect to.\r\n     \r\n     .PARAMETER Port\r\n       The remote port to connect to. The default is 443.\r\n     \r\n     .EXAMPLE\r\n       Test-SslProtocols -ComputerName &quot;www.google.com&quot;\r\n       \r\n       ComputerName       : www.google.com\r\n       Port               : 443\r\n       KeyLength          : 2048\r\n       SignatureAlgorithm : rsa-sha1\r\n       Ssl2               : False\r\n       Ssl3               : True\r\n       Tls                : True\r\n       Tls11              : True\r\n       Tls12              : True\r\n     #&gt;\r\n     function Test-SslProtocols {\r\n       param(\r\n         [Parameter(Mandatory=$true,ValueFromPipelineByPropertyName=$true,ValueFromPipeline=$true)]\r\n         $ComputerName,\r\n         \r\n         [Parameter(ValueFromPipelineByPropertyName=$true)]\r\n         [int]$Port = 443\r\n       )\r\n       begin {\r\n         $ProtocolNames = [System.Security.Authentication.SslProtocols] | gm -static -MemberType Property | ?{$_.Name -notin @(&quot;Default&quot;,&quot;None&quot;)} | %{$_.Name}\r\n       }\r\n       process {\r\n         $ProtocolStatus = [Ordered]@{}\r\n         $ProtocolStatus.Add(&quot;ComputerName&quot;, $ComputerName)\r\n         $ProtocolStatus.Add(&quot;Port&quot;, $Port)\r\n         $ProtocolStatus.Add(&quot;KeyLength&quot;, $null)\r\n         $ProtocolStatus.Add(&quot;SignatureAlgorithm&quot;, $null)\r\n         \r\n         $ProtocolNames | %{\r\n           $ProtocolName = $_\r\n           $Socket = New-Object System.Net.Sockets.Socket([System.Net.Sockets.SocketType]::Stream, [System.Net.Sockets.ProtocolType]::Tcp)\r\n           $Socket.Connect($ComputerName, $Port)\r\n           try {\r\n             $NetStream = New-Object System.Net.Sockets.NetworkStream($Socket, $true)\r\n             $SslStream = New-Object System.Net.Security.SslStream($NetStream, $true)\r\n             $SslStream.AuthenticateAsClient($ComputerName,  $null, $ProtocolName, $false )\r\n             $RemoteCertificate = [System.Security.Cryptography.X509Certificates.X509Certificate2]$SslStream.RemoteCertificate\r\n             $ProtocolStatus[&quot;KeyLength&quot;] = $RemoteCertificate.PublicKey.Key.KeySize\r\n             $ProtocolStatus[&quot;SignatureAlgorithm&quot;] = $RemoteCertificate.SignatureAlgorithm.FriendlyName\r\n             $ProtocolStatus[&quot;Certificate&quot;] = $RemoteCertificate\r\n             $ProtocolStatus.Add($ProtocolName, $true)\r\n           } catch  {\r\n             $ProtocolStatus.Add($ProtocolName, $false)\r\n           } finally {\r\n             $SslStream.Close()\r\n           }\r\n         }\r\n         [PSCustomObject]$ProtocolStatus\r\n       }\r\n     }\r\n\r\n","title":"Sql Server 2016: Enable TLS 1.2 for SQL Server Connection","body":"<p>Check the involved certificates. One may be invalid.</p>\n\n<p>If the machines validate their certificates, try:</p>\n\n<p>Registry Script for disabling stupid encryptions:\nSave this as .reg</p>\n\n<pre><code>Windows Registry Editor Version 5.00\n[HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\SSL 2.0\\Client]\n\"Enabled\"=dword:00000000\n\"DisabledByDefault\"=dword:00000001\n[HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\SSL 2.0\\Server]\n\"Enabled\"=dword:00000000\n\"DisabledByDefault\"=dword:00000001\n[HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\SSL 3.0\\Client]\n\"Enabled\"=dword:00000000\n\"DisabledByDefault\"=dword:00000001\n[HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\SSL 3.0\\Server]\n\"Enabled\"=dword:00000000\n\"DisabledByDefault\"=dword:00000001\n[HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\TLS 1.0\\Client]\n\"Enabled\"=dword:00000000\n\"DisabledByDefault\"=dword:00000001\n[HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\TLS 1.0\\Server]\n\"Enabled\"=dword:00000000\n\"DisabledByDefault\"=dword:00000001\n[HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\TLS 1.1\\Client]\n\"Enabled\"=dword:00000000\n\"DisabledByDefault\"=dword:00000001\n[HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\TLS 1.1\\Server]\n\"Enabled\"=dword:00000000\n\"DisabledByDefault\"=dword:00000001\n[HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\TLS 1.2\\Client]\n\"Enabled\"=dword:00000001\n\"DisabledByDefault\"=dword:00000000\n[HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\TLS 1.2\\Server]\n\"Enabled\"=dword:00000001\n\"DisabledByDefault\"=dword:00000000\n\n[HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\.NETFramework\\v4.0.30319]\n\"SchUseStrongCrypto\"=dword:00000001\n\n[HKEY_LOCAL_MACHINE\\SOFTWARE\\Wow6432Node\\Microsoft\\.NETFramework\\v4.0.30319]\n\"SchUseStrongCrypto\"=dword:00000001\n</code></pre>\n\n<p>You'll have to adjust your .NET Framework. If you are actually using .Net 2.0 (old!) the last two Keys should be</p>\n\n<pre><code>[HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\.NETFramework\\v2.0.50727]\n\"SystemDefaultTlsVersions\"=dword:00000001\n\n[HKEY_LOCAL_MACHINE\\SOFTWARE\\Wow6432Node\\Microsoft\\.NETFramework\\v2.0.50727]\n\"SystemDefaultTlsVersions\"=dword:00000001 \n</code></pre>\n\n<p>Here is a .ps1 by Chris Duck to check enabled encryptions</p>\n\n<pre><code>    &lt;#\n .DESCRIPTION\n   Outputs the SSL protocols that the client is able to successfully use to connect to a server.\n\n .NOTES\n\n   Copyright 2014 Chris Duck\n   http://blog.whatsupduck.net\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n     http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n\n .PARAMETER ComputerName\n   The name of the remote computer to connect to.\n\n .PARAMETER Port\n   The remote port to connect to. The default is 443.\n\n .EXAMPLE\n   Test-SslProtocols -ComputerName \"www.google.com\"\n\n   ComputerName       : www.google.com\n   Port               : 443\n   KeyLength          : 2048\n   SignatureAlgorithm : rsa-sha1\n   Ssl2               : False\n   Ssl3               : True\n   Tls                : True\n   Tls11              : True\n   Tls12              : True\n #&gt;\n function Test-SslProtocols {\n   param(\n     [Parameter(Mandatory=$true,ValueFromPipelineByPropertyName=$true,ValueFromPipeline=$true)]\n     $ComputerName,\n\n     [Parameter(ValueFromPipelineByPropertyName=$true)]\n     [int]$Port = 443\n   )\n   begin {\n     $ProtocolNames = [System.Security.Authentication.SslProtocols] | gm -static -MemberType Property | ?{$_.Name -notin @(\"Default\",\"None\")} | %{$_.Name}\n   }\n   process {\n     $ProtocolStatus = [Ordered]@{}\n     $ProtocolStatus.Add(\"ComputerName\", $ComputerName)\n     $ProtocolStatus.Add(\"Port\", $Port)\n     $ProtocolStatus.Add(\"KeyLength\", $null)\n     $ProtocolStatus.Add(\"SignatureAlgorithm\", $null)\n\n     $ProtocolNames | %{\n       $ProtocolName = $_\n       $Socket = New-Object System.Net.Sockets.Socket([System.Net.Sockets.SocketType]::Stream, [System.Net.Sockets.ProtocolType]::Tcp)\n       $Socket.Connect($ComputerName, $Port)\n       try {\n         $NetStream = New-Object System.Net.Sockets.NetworkStream($Socket, $true)\n         $SslStream = New-Object System.Net.Security.SslStream($NetStream, $true)\n         $SslStream.AuthenticateAsClient($ComputerName,  $null, $ProtocolName, $false )\n         $RemoteCertificate = [System.Security.Cryptography.X509Certificates.X509Certificate2]$SslStream.RemoteCertificate\n         $ProtocolStatus[\"KeyLength\"] = $RemoteCertificate.PublicKey.Key.KeySize\n         $ProtocolStatus[\"SignatureAlgorithm\"] = $RemoteCertificate.SignatureAlgorithm.FriendlyName\n         $ProtocolStatus[\"Certificate\"] = $RemoteCertificate\n         $ProtocolStatus.Add($ProtocolName, $true)\n       } catch  {\n         $ProtocolStatus.Add($ProtocolName, $false)\n       } finally {\n         $SslStream.Close()\n       }\n     }\n     [PSCustomObject]$ProtocolStatus\n   }\n }\n</code></pre>\n"}],"owner":{"account_id":1310600,"reputation":3828,"user_id":1258669,"accept_rate":73,"display_name":"OTUser"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33081,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":2,"score":9,"last_activity_date":1675801781,"creation_date":1518813560,"question_id":48834528,"body_markdown":"I&#39;ve `SQL server 2016` running on `windows 2012 R2` and I applied the patch for TLSv1.2 support and rebooted the VM, https://support.microsoft.com/en-us/help/3135244/tls-1-2-support-for-microsoft-sql-server I do see TLS 1.2 being enabled using `IISCrypto` tool on the SQL Server VM\r\n\r\nWe have Java 8 web application and we&#39;ve forced the web application to use only TLS1.2 using JVM argument `-Djdk.tls.client.protocols=&quot;TLSv1.2&quot;` (If I remove this JVM argument application connects to sql server fine), but we are seeing below error though `TLSv1.2` is enabled for SQL server\r\n\r\n\torg.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (The driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption. Error: &quot;Server chose TLSv1, but that protocol version is not enabled or not supported by the client.&quot;. ClientConnectionId:7564b6a1-60c0-4a24-8baa-7bd21f9512cf)  \r\n\r\nWe also have a `.Net 2.0` windows service (only TLSv1.2 is enabled in registry) which is also failing to connect to `SQL Server 2016`\r\n\r\n\tSystem.Data.OleDb.OleDbException: [DBNETLIB][ConnectionOpen (SECCreateCredentials()).]SSL Security error.\r\n    at System.Data.OleDb.OleDbConnectionInternal..ctor(OleDbConnectionString constr, OleDbConnection connection)\r\n    at System.Data.OleDb.OleDbConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningObject)\r\n    at System.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup)\r\n    at System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection)\r\n    at System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)\r\n    at System.Data.OleDb.OleDbConnection.Open()\r\n\r\nBut if I enable SSL3 and TLS1.0 in the registry, `.Net 2.0` windows service connects to SQL Server 2016 fine.\r\n\r\nI suspect, the issue is SQL Server not using `TLSv1.2` though `TLSv1.2` is enabled on the SQL Server VM, Can someone please help me if there anymore config or patches needs to be applied for SQL Server to support `TLSv1.2` ?\r\n    \r\n","title":"Sql Server 2016: Enable TLS 1.2 for SQL Server Connection","body":"<p>I've <code>SQL server 2016</code> running on <code>windows 2012 R2</code> and I applied the patch for TLSv1.2 support and rebooted the VM, <a href=\"https://support.microsoft.com/en-us/help/3135244/tls-1-2-support-for-microsoft-sql-server\" rel=\"noreferrer\">https://support.microsoft.com/en-us/help/3135244/tls-1-2-support-for-microsoft-sql-server</a> I do see TLS 1.2 being enabled using <code>IISCrypto</code> tool on the SQL Server VM</p>\n\n<p>We have Java 8 web application and we've forced the web application to use only TLS1.2 using JVM argument <code>-Djdk.tls.client.protocols=\"TLSv1.2\"</code> (If I remove this JVM argument application connects to sql server fine), but we are seeing below error though <code>TLSv1.2</code> is enabled for SQL server</p>\n\n<pre><code>org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (The driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption. Error: \"Server chose TLSv1, but that protocol version is not enabled or not supported by the client.\". ClientConnectionId:7564b6a1-60c0-4a24-8baa-7bd21f9512cf)  \n</code></pre>\n\n<p>We also have a <code>.Net 2.0</code> windows service (only TLSv1.2 is enabled in registry) which is also failing to connect to <code>SQL Server 2016</code></p>\n\n<pre><code>System.Data.OleDb.OleDbException: [DBNETLIB][ConnectionOpen (SECCreateCredentials()).]SSL Security error.\nat System.Data.OleDb.OleDbConnectionInternal..ctor(OleDbConnectionString constr, OleDbConnection connection)\nat System.Data.OleDb.OleDbConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningObject)\nat System.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup)\nat System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection)\nat System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)\nat System.Data.OleDb.OleDbConnection.Open()\n</code></pre>\n\n<p>But if I enable SSL3 and TLS1.0 in the registry, <code>.Net 2.0</code> windows service connects to SQL Server 2016 fine.</p>\n\n<p>I suspect, the issue is SQL Server not using <code>TLSv1.2</code> though <code>TLSv1.2</code> is enabled on the SQL Server VM, Can someone please help me if there anymore config or patches needs to be applied for SQL Server to support <code>TLSv1.2</code> ?</p>\n"},{"tags":["java","amazon-web-services","aws-sdk","aws-java-sdk","amazon-cloudwatchlogs"],"answers":[{"comments":[{"owner":{"account_id":400389,"reputation":3658,"user_id":766328,"accept_rate":90,"display_name":"Trein"},"score":0,"creation_date":1514486710,"post_id":40770502,"comment_id":82994032,"body_markdown":"Just a heads up, a call to `AWSLogsClient#describeLogStreams` with a `logGroupName` that does not exist will generate a `ResourceNotFoundException`. If you are unsure about the existence of the log group, you should handle the exception.","body":"Just a heads up, a call to <code>AWSLogsClient#describeLogStreams</code> with a <code>logGroupName</code> that does not exist will generate a <code>ResourceNotFoundException</code>. If you are unsure about the existence of the log group, you should handle the exception."}],"tags":[],"owner":{"account_id":406181,"reputation":25183,"user_id":775544,"accept_rate":100,"display_name":"Anthony Neace"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1479921453,"creation_date":1479921141,"answer_id":40770502,"question_id":40601580,"body_markdown":"**Pseudocode: Validate that a log group&#39;s log stream exists**\r\n\r\n1. Build [describeLogStreamsRequest][1]:\r\n  * Pass in your given log group name on the constructor, or on the request&#39;s `withLogGroupName` setter.\r\n  * Pass in log stream name in on the request&#39;s `withLogStreamNamePrefix` setter.\r\n4. Call [describeLogStreams][2].\r\n5. Inspect the resulting log streams on the [DescribeLogStreamsResult][3] object. If the list isn&#39;t empty, you&#39;re safe to further operate on that stream. \r\n\r\n**Java: Validate that a log group&#39;s log stream exists** (*note: untested*)\r\n\r\n    AWSLogsClient logs = new AWSLogsClient();\r\n\r\n    DescribeLogStreamsRequest req = new DescribeLogStreamsRequest(&quot;myLogGroupName&quot;)\r\n        .withLogStreamNamePrefix(&quot;myLogStreamName&quot;);\r\n\r\n    DescribeLogStreamsResult res = logs.describeLogStreams(req);\r\n\r\n    if(res != null &amp;&amp; res.getLogStreams() != null &amp;&amp; !res.getLogStreams().isEmpty())\r\n    {\r\n      // Log Stream exists, do work here\r\n    }\r\n\r\n\r\n  [1]: http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/logs/model/DescribeLogStreamsRequest.html\r\n  [2]: http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/logs/AWSLogsClient.html#describeLogStreams-com.amazonaws.services.logs.model.DescribeLogStreamsRequest-\r\n  [3]: http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/logs/model/DescribeLogStreamsResult.html","title":"How do I validate that a Cloudwatch Log Group and Log Stream exists?","body":"<p><strong>Pseudocode: Validate that a log group's log stream exists</strong></p>\n\n<ol>\n<li>Build <a href=\"http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/logs/model/DescribeLogStreamsRequest.html\" rel=\"nofollow noreferrer\">describeLogStreamsRequest</a>:\n\n<ul>\n<li>Pass in your given log group name on the constructor, or on the request's <code>withLogGroupName</code> setter.</li>\n<li>Pass in log stream name in on the request's <code>withLogStreamNamePrefix</code> setter.</li>\n</ul></li>\n<li>Call <a href=\"http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/logs/AWSLogsClient.html#describeLogStreams-com.amazonaws.services.logs.model.DescribeLogStreamsRequest-\" rel=\"nofollow noreferrer\">describeLogStreams</a>.</li>\n<li>Inspect the resulting log streams on the <a href=\"http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/logs/model/DescribeLogStreamsResult.html\" rel=\"nofollow noreferrer\">DescribeLogStreamsResult</a> object. If the list isn't empty, you're safe to further operate on that stream. </li>\n</ol>\n\n<p><strong>Java: Validate that a log group's log stream exists</strong> (<em>note: untested</em>)</p>\n\n<pre><code>AWSLogsClient logs = new AWSLogsClient();\n\nDescribeLogStreamsRequest req = new DescribeLogStreamsRequest(\"myLogGroupName\")\n    .withLogStreamNamePrefix(\"myLogStreamName\");\n\nDescribeLogStreamsResult res = logs.describeLogStreams(req);\n\nif(res != null &amp;&amp; res.getLogStreams() != null &amp;&amp; !res.getLogStreams().isEmpty())\n{\n  // Log Stream exists, do work here\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":400389,"reputation":3658,"user_id":766328,"accept_rate":90,"display_name":"Trein"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1514486636,"creation_date":1514486636,"answer_id":48012733,"question_id":40601580,"body_markdown":"In reality, a call to `AWSLogsClient#describeLogStreams` with a `logGroupName` that does not exist will generate a `ResourceNotFoundException`. For that reason, you should check for:\r\n\r\n1. Absence of `ResourceNotFoundException`.\r\n2. Existence of a single entry in `DescribeLogStreamsResult#getLogStreams` matching the `logStreamName` provided.\r\n\r\nCode snippet of a method that will do that:\r\n\r\n    private boolean doesLogStreamExist() {\r\n        DescribeLogStreamsRequest request = new DescribeLogStreamsRequest()\r\n            .withLogGroupName(logGroupName)\r\n            .withLogStreamNamePrefix(logStreamName);\r\n        try {\r\n            return client.describeLogStreams(request).getLogStreams()\r\n                .stream()\r\n                .anyMatch(it -&gt; it.getLogStreamName().equals(logStreamName));\r\n        } catch (ResourceNotFoundException e) {\r\n            // log group does not exist\r\n            return false;\r\n        }\r\n    }\r\n","title":"How do I validate that a Cloudwatch Log Group and Log Stream exists?","body":"<p>In reality, a call to <code>AWSLogsClient#describeLogStreams</code> with a <code>logGroupName</code> that does not exist will generate a <code>ResourceNotFoundException</code>. For that reason, you should check for:</p>\n\n<ol>\n<li>Absence of <code>ResourceNotFoundException</code>.</li>\n<li>Existence of a single entry in <code>DescribeLogStreamsResult#getLogStreams</code> matching the <code>logStreamName</code> provided.</li>\n</ol>\n\n<p>Code snippet of a method that will do that:</p>\n\n<pre><code>private boolean doesLogStreamExist() {\n    DescribeLogStreamsRequest request = new DescribeLogStreamsRequest()\n        .withLogGroupName(logGroupName)\n        .withLogStreamNamePrefix(logStreamName);\n    try {\n        return client.describeLogStreams(request).getLogStreams()\n            .stream()\n            .anyMatch(it -&gt; it.getLogStreamName().equals(logStreamName));\n    } catch (ResourceNotFoundException e) {\n        // log group does not exist\n        return false;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":266740,"reputation":1895,"user_id":554481,"accept_rate":43,"display_name":"user554481"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1675801459,"creation_date":1675801459,"answer_id":75378632,"question_id":40601580,"body_markdown":"I know this question asks for a Java solution, but this was the top-ranked question on Google when I had the same question for Python. The `boto3` documentation doesn&#39;t seem to directly support a &quot;does this log group exist?&quot; function as of today, so here is what I wrote instead. I use the paginator because by default the `boto3` API only lets you pull 50 log groups at a time. The paginator will keep fetching log group names until it goes through all of your log groups.\r\n\r\n```\r\nimport boto3\r\n\r\n\r\ndef log_group_exists(log_group_name):\r\n    client = boto3.client(&#39;logs&#39;)\r\n    paginator = client.get_paginator(&#39;describe_log_groups&#39;)\r\n    for page in paginator.paginate():\r\n        for group in page[&#39;logGroups&#39;]:\r\n            if group[&#39;logGroupName&#39;].lower() == log_group_name.lower():\r\n                return True\r\n    return False\r\n```","title":"How do I validate that a Cloudwatch Log Group and Log Stream exists?","body":"<p>I know this question asks for a Java solution, but this was the top-ranked question on Google when I had the same question for Python. The <code>boto3</code> documentation doesn't seem to directly support a &quot;does this log group exist?&quot; function as of today, so here is what I wrote instead. I use the paginator because by default the <code>boto3</code> API only lets you pull 50 log groups at a time. The paginator will keep fetching log group names until it goes through all of your log groups.</p>\n<pre><code>import boto3\n\n\ndef log_group_exists(log_group_name):\n    client = boto3.client('logs')\n    paginator = client.get_paginator('describe_log_groups')\n    for page in paginator.paginate():\n        for group in page['logGroups']:\n            if group['logGroupName'].lower() == log_group_name.lower():\n                return True\n    return False\n</code></pre>\n"}],"owner":{"account_id":5725404,"reputation":2915,"user_id":4522512,"accept_rate":43,"display_name":"Shivkumar Mallesappa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6755,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":3,"score":6,"last_activity_date":1675801459,"creation_date":1479181018,"question_id":40601580,"body_markdown":"Is there any method in java to check whether a given Log Group and Log Stream exists, before getting log events from the Log Group?","title":"How do I validate that a Cloudwatch Log Group and Log Stream exists?","body":"<p>Is there any method in java to check whether a given Log Group and Log Stream exists, before getting log events from the Log Group?</p>\n"},{"tags":["java","security","ssl","https"],"comments":[{"owner":{"display_name":"user5266804"},"score":0,"creation_date":1441761353,"post_id":32466407,"comment_id":52800771,"body_markdown":"does `SSLContext.getInstance(&quot;TLSv1.2&quot;)` work?","body":"does <code>SSLContext.getInstance(&quot;TLSv1.2&quot;)</code> work?"},{"owner":{"account_id":593875,"reputation":20381,"user_id":276232,"accept_rate":50,"display_name":"Christopher Schultz"},"score":0,"creation_date":1537588951,"post_id":32466407,"comment_id":91849768,"body_markdown":"@user5266804 No, it does not. The `SSLContext.getInstance` method basically takes either `SSL` or `TLS` as an argument. I&#39;ll bet that under the covers, the Sun provider doesn&#39;t even care what string you pass in: you always get &quot;the TLS engine&quot; provided by JSSE.","body":"@user5266804 No, it does not. The <code>SSLContext.getInstance</code> method basically takes either <code>SSL</code> or <code>TLS</code> as an argument. I&#39;ll bet that under the covers, the Sun provider doesn&#39;t even care what string you pass in: you always get &quot;the TLS engine&quot; provided by JSSE."},{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1636137840,"post_id":32466407,"comment_id":123485575,"body_markdown":"sysprop `htts.protocols` didn&#39;t work because it (and `https.cipherSuites`) only affects _outgoing_ connections using `HttpsURLConnection` -- not incoming, nor direct use of `SSL[Server]Socket` or `SSLEngine`. @ChristopherSchultz: JCA lookup only accepts (ignoring case) strings predefined by the provider, which for j7 JSSE are `Default SSL SSLv3 TLS TLSv1 TLSv1.1 TLSv1.2` -- the latter two differ in what protocols are enabled _initially_ but all do use the same code and can enable any subset of the implemented protocols except those in `disabledAlgorithms` secprop","body":"sysprop <code>htts.protocols</code> didn&#39;t work because it (and <code>https.cipherSuites</code>) only affects <i>outgoing</i> connections using <code>HttpsURLConnection</code> -- not incoming, nor direct use of <code>SSL[Server]Socket</code> or <code>SSLEngine</code>. @ChristopherSchultz: JCA lookup only accepts (ignoring case) strings predefined by the provider, which for j7 JSSE are <code>Default SSL SSLv3 TLS TLSv1 TLSv1.1 TLSv1.2</code> -- the latter two differ in what protocols are enabled <i>initially</i> but all do use the same code and can enable any subset of the implemented protocols except those in <code>disabledAlgorithms</code> secprop"}],"answers":[{"comments":[{"owner":{"account_id":1111154,"reputation":3436,"user_id":1101596,"accept_rate":39,"display_name":"vikifor"},"score":0,"creation_date":1483437629,"post_id":32510141,"comment_id":70087658,"body_markdown":"where to set this?","body":"where to set this?"},{"owner":{"account_id":3094771,"reputation":975,"user_id":2620252,"accept_rate":75,"display_name":"PankajSays"},"score":1,"creation_date":1484756188,"post_id":32510141,"comment_id":70643187,"body_markdown":"you need to set this in &quot;java.security&quot; file which you can find in &lt;JDK&gt;/jre/lib/security folder.","body":"you need to set this in &quot;java.security&quot; file which you can find in &lt;JDK&gt;/jre/lib/security folder."},{"owner":{"account_id":12666820,"reputation":101,"user_id":9205799,"display_name":"John Doe"},"score":0,"creation_date":1566037548,"post_id":32510141,"comment_id":101535666,"body_markdown":"do i need to recompile my app after changing this file in jdk/jre/lib/security?","body":"do i need to recompile my app after changing this file in jdk/jre/lib/security?"},{"owner":{"account_id":3094771,"reputation":975,"user_id":2620252,"accept_rate":75,"display_name":"PankajSays"},"score":0,"creation_date":1567187671,"post_id":32510141,"comment_id":101902766,"body_markdown":"This changes does not require recompilation as it is not a code change.","body":"This changes does not require recompilation as it is not a code change."},{"owner":{"account_id":1667186,"reputation":127,"user_id":1534364,"accept_rate":38,"display_name":"userLearner"},"score":0,"creation_date":1587062051,"post_id":32510141,"comment_id":108368917,"body_markdown":"After changing mentioned line. Do Any other command required reload the properties ?","body":"After changing mentioned line. Do Any other command required reload the properties ?"},{"owner":{"account_id":1667186,"reputation":127,"user_id":1534364,"accept_rate":38,"display_name":"userLearner"},"score":1,"creation_date":1587062523,"post_id":32510141,"comment_id":108369149,"body_markdown":"I am using below property \njdk.tls.disabledAlgorithms=EC, ECDHE, DHE, TLSv1.2, SSLv3, RSA keySize &lt; 2048\n\nBut when I get the getSupportedCipherSuites() it also display disabled Cipher","body":"I am using below property  jdk.tls.disabledAlgorithms=EC, ECDHE, DHE, TLSv1.2, SSLv3, RSA keySize &lt; 2048  But when I get the getSupportedCipherSuites() it also display disabled Cipher"},{"owner":{"account_id":13821951,"reputation":583,"user_id":9977174,"display_name":"Kusal Hettiarachchi"},"score":0,"creation_date":1598520217,"post_id":32510141,"comment_id":112487917,"body_markdown":"even after I had done this change, the `nmap --script ssl* -Pn -p &lt;port&gt; &lt;IP&gt;` shows that it supports the old TLS versions. do I have to restart the JVM?","body":"even after I had done this change, the <code>nmap --script ssl* -Pn -p &lt;port&gt; &lt;IP&gt;</code> shows that it supports the old TLS versions. do I have to restart the JVM?"},{"owner":{"account_id":14036429,"reputation":315,"user_id":10138996,"display_name":"pascalre"},"score":0,"creation_date":1618567035,"post_id":32510141,"comment_id":118645818,"body_markdown":"@userLearner no you don&#39;t need to reload any settings.","body":"@userLearner no you don&#39;t need to reload any settings."}],"tags":[],"owner":{"account_id":3094771,"reputation":975,"user_id":2620252,"accept_rate":75,"display_name":"PankajSays"},"comment_count":8,"down_vote_count":0,"up_vote_count":49,"is_accepted":true,"score":49,"last_activity_date":1604500705,"creation_date":1441913227,"answer_id":32510141,"question_id":32466407,"body_markdown":"I found a solution for this. I set the \r\n\r\n    jdk.tls.disabledAlgorithms= SSLv2Hello, SSLv3, TLSv1, TLSv1.1\r\n\r\nin the file `jre/lib/security/java.security` on the server.\r\n\r\nAfter setting this, server only accepts the TLS1.2 connection and reject lower security protocol versions.","title":"How to force java server to accept only tls 1.2 and reject tls 1.0 and tls 1.1 connections","body":"<p>I found a solution for this. I set the</p>\n<pre><code>jdk.tls.disabledAlgorithms= SSLv2Hello, SSLv3, TLSv1, TLSv1.1\n</code></pre>\n<p>in the file <code>jre/lib/security/java.security</code> on the server.</p>\n<p>After setting this, server only accepts the TLS1.2 connection and reject lower security protocol versions.</p>\n"},{"tags":[],"owner":{"account_id":7324117,"reputation":21,"user_id":5579085,"display_name":"TyGp"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1464688440,"creation_date":1448098660,"answer_id":33841856,"question_id":32466407,"body_markdown":"Just a small remark; \r\n\r\nIn the question you stated that you generated a 2048 size certificate with MD5. But in the cert path alg you disabled MD5 so this normally should not work. Secondly Server certificates generated with a MD5 hash are banned from modern browsers such as Internet Explorer 10/Edge. \r\n\r\nI would like to advice you to generate your Server certificate at least with a SHA256 or &lt; hash. ","title":"How to force java server to accept only tls 1.2 and reject tls 1.0 and tls 1.1 connections","body":"<p>Just a small remark; </p>\n\n<p>In the question you stated that you generated a 2048 size certificate with MD5. But in the cert path alg you disabled MD5 so this normally should not work. Secondly Server certificates generated with a MD5 hash are banned from modern browsers such as Internet Explorer 10/Edge. </p>\n\n<p>I would like to advice you to generate your Server certificate at least with a SHA256 or &lt; hash. </p>\n"},{"comments":[{"owner":{"account_id":1010174,"reputation":545,"user_id":1022923,"accept_rate":80,"display_name":"blissini"},"score":2,"creation_date":1562335352,"post_id":50852774,"comment_id":100353755,"body_markdown":"&quot;but some of clients are still able to call my services with SSL protocol.&quot;\nI love this one.","body":"&quot;but some of clients are still able to call my services with SSL protocol.&quot; I love this one."},{"owner":{"account_id":4434146,"reputation":1148,"user_id":3610458,"accept_rate":80,"display_name":"SensorSmith"},"score":0,"creation_date":1674749226,"post_id":50852774,"comment_id":132784325,"body_markdown":"An attempted answer to this very old answer would be to add SSLv2Hello to disabledAlgorithms.","body":"An attempted answer to this very old answer would be to add SSLv2Hello to disabledAlgorithms."}],"tags":[],"owner":{"account_id":150823,"reputation":31,"user_id":9818877,"display_name":"Abhimanyu Kumar"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1642150535,"creation_date":1528964336,"answer_id":50852774,"question_id":32466407,"body_markdown":"I have also done the same changes in `&quot;/java/jdk1.7.0_79/jre/lib/security&quot;-java.security` file but some of the clients are still able to call my services with SSL protocol.\r\n\r\nChanges: \r\n```\r\njdk.tls.disabledAlgorithms=SSL,SSLv2,SSLv3, TLSv1, TLSv1.1,MD5, SSLv3, DSA, RSA keySize &lt; 2048\r\n```","title":"How to force java server to accept only tls 1.2 and reject tls 1.0 and tls 1.1 connections","body":"<p>I have also done the same changes in <code>&quot;/java/jdk1.7.0_79/jre/lib/security&quot;-java.security</code> file but some of the clients are still able to call my services with SSL protocol.</p>\n<p>Changes:</p>\n<pre><code>jdk.tls.disabledAlgorithms=SSL,SSLv2,SSLv3, TLSv1, TLSv1.1,MD5, SSLv3, DSA, RSA keySize &lt; 2048\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1636137845,"post_id":69855771,"comment_id":123485577,"body_markdown":"although in j9 up `java.security` is in `conf/security` not `jre/lib/security`","body":"although in j9 up <code>java.security</code> is in <code>conf&#47;security</code> not <code>jre&#47;lib&#47;security</code>"}],"tags":[],"owner":{"account_id":18868,"reputation":82004,"user_id":43681,"accept_rate":70,"display_name":"sleske"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1636126846,"creation_date":1636126846,"answer_id":69855771,"question_id":32466407,"body_markdown":"*Update as of November 2021*\r\n\r\nStarting with **version 11.0.11** of the JDK, you do not need to do anything, as TLS 1.0 and TLS 1.1 are disabled by default.\r\n\r\nThe fix was also backported to JDK 7u301, and 8u291.\r\n\r\nFor details: [JDK-8202343 : Disable TLS 1.0 and 1.1][1]\r\n\r\nYou can still explicitly enable TLS 1.0/1.1 by changing java.security, as noted in the accepted answer.\r\n\r\n  [1]: https://bugs.java.com/bugdatabase/view_bug.do?bug_id=JDK-8202343","title":"How to force java server to accept only tls 1.2 and reject tls 1.0 and tls 1.1 connections","body":"<p><em>Update as of November 2021</em></p>\n<p>Starting with <strong>version 11.0.11</strong> of the JDK, you do not need to do anything, as TLS 1.0 and TLS 1.1 are disabled by default.</p>\n<p>The fix was also backported to JDK 7u301, and 8u291.</p>\n<p>For details: <a href=\"https://bugs.java.com/bugdatabase/view_bug.do?bug_id=JDK-8202343\" rel=\"nofollow noreferrer\">JDK-8202343 : Disable TLS 1.0 and 1.1</a></p>\n<p>You can still explicitly enable TLS 1.0/1.1 by changing java.security, as noted in the accepted answer.</p>\n"},{"tags":[],"owner":{"account_id":17674050,"reputation":41,"user_id":12829466,"display_name":"abmyii"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675801085,"creation_date":1675801085,"answer_id":75378561,"question_id":32466407,"body_markdown":"Rather than searching for and manually modifying the `java.security` file, I would suggest doing it in code e.g.:\r\n\r\n```java\r\nSecurity.setProperty(&quot;jdk.tls.disabledAlgorithms&quot;, &quot;SSLv2Hello, SSLv3, TLSv1, TLSv1.1&quot;);\r\n```\r\n\r\n(Suggestion adapted from https://forums.oracle.com/ords/r/apexds/community/q?question=io-error-no-appropriate-protocol-protocol-is-disabled-or-ci-2571&amp;session=206554440082745)","title":"How to force java server to accept only tls 1.2 and reject tls 1.0 and tls 1.1 connections","body":"<p>Rather than searching for and manually modifying the <code>java.security</code> file, I would suggest doing it in code e.g.:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Security.setProperty(&quot;jdk.tls.disabledAlgorithms&quot;, &quot;SSLv2Hello, SSLv3, TLSv1, TLSv1.1&quot;);\n</code></pre>\n<p>(Suggestion adapted from <a href=\"https://forums.oracle.com/ords/r/apexds/community/q?question=io-error-no-appropriate-protocol-protocol-is-disabled-or-ci-2571&amp;session=206554440082745\" rel=\"nofollow noreferrer\">https://forums.oracle.com/ords/r/apexds/community/q?question=io-error-no-appropriate-protocol-protocol-is-disabled-or-ci-2571&amp;session=206554440082745</a>)</p>\n"}],"owner":{"account_id":3094771,"reputation":975,"user_id":2620252,"accept_rate":75,"display_name":"PankajSays"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":111323,"favorite_count":0,"down_vote_count":0,"up_vote_count":29,"accepted_answer_id":32510141,"answer_count":5,"score":29,"last_activity_date":1675801085,"creation_date":1441742923,"question_id":32466407,"body_markdown":"I have a HTTPS web service running on Java 7. I need to make changes so that this service only accepts TLS1.2 connection and reject SSL3, TLS1.0 and TLS1.1.\r\n\r\nI have added the following Java parameter so that TLS1.2 is the highest priority.\r\n\r\n    -Dhttps.protocols=TLSv1.2\r\n\r\nbut it also accepts the TLS1.0 connections from Java clients. If the client is also running with above Java parameter, the connection is TLS1.2 but if the client is running without this parameter, the connections is TLS1.0.\r\n\r\nI did some play around the `java.security` file in `jdk/jre/lib/security` folder.\r\n\r\nI currently have following disabled algorithms:\r\n\r\n    jdk.certpath.disabledAlgorithms= MD2, MD4, MD5, SHA224, DSA, EC keySize &lt; 256, RSA keySize &lt; 2048, SHA1 keysize &lt; 224\r\n    jdk.tls.disabledAlgorithms=DSA, DHE, EC keySize &lt; 256, RSA keySize &lt; 2048, SHA1 keysize &lt; 224\r\n\r\nI am using Java 7 update 79. I am not inclined towards intercepting each connection and checking the TLS version.\r\n\r\nMy server certificate is 2048 bit generated with MD5 with RSA algorithm.\r\n\r\nIf the disabled algorithm list has RSA in place of RSA keySize &lt; 2048, I get the `SSLHandShakeError` with error message:\r\n\r\n&gt; no cipher suites in common.\r\n\r\nMy test program is running the HTTP server from following URL:\r\nhttp://www.herongyang.com/JDK/HTTPS-HttpsEchoer-Better-HTTPS-Server.html\r\n\r\nPlease help how to make java accept only TLS1.2 connections.","title":"How to force java server to accept only tls 1.2 and reject tls 1.0 and tls 1.1 connections","body":"<p>I have a HTTPS web service running on Java 7. I need to make changes so that this service only accepts TLS1.2 connection and reject SSL3, TLS1.0 and TLS1.1.</p>\n<p>I have added the following Java parameter so that TLS1.2 is the highest priority.</p>\n<pre><code>-Dhttps.protocols=TLSv1.2\n</code></pre>\n<p>but it also accepts the TLS1.0 connections from Java clients. If the client is also running with above Java parameter, the connection is TLS1.2 but if the client is running without this parameter, the connections is TLS1.0.</p>\n<p>I did some play around the <code>java.security</code> file in <code>jdk/jre/lib/security</code> folder.</p>\n<p>I currently have following disabled algorithms:</p>\n<pre><code>jdk.certpath.disabledAlgorithms= MD2, MD4, MD5, SHA224, DSA, EC keySize &lt; 256, RSA keySize &lt; 2048, SHA1 keysize &lt; 224\njdk.tls.disabledAlgorithms=DSA, DHE, EC keySize &lt; 256, RSA keySize &lt; 2048, SHA1 keysize &lt; 224\n</code></pre>\n<p>I am using Java 7 update 79. I am not inclined towards intercepting each connection and checking the TLS version.</p>\n<p>My server certificate is 2048 bit generated with MD5 with RSA algorithm.</p>\n<p>If the disabled algorithm list has RSA in place of RSA keySize &lt; 2048, I get the <code>SSLHandShakeError</code> with error message:</p>\n<blockquote>\n<p>no cipher suites in common.</p>\n</blockquote>\n<p>My test program is running the HTTP server from following URL:\n<a href=\"http://www.herongyang.com/JDK/HTTPS-HttpsEchoer-Better-HTTPS-Server.html\" rel=\"noreferrer\">http://www.herongyang.com/JDK/HTTPS-HttpsEchoer-Better-HTTPS-Server.html</a></p>\n<p>Please help how to make java accept only TLS1.2 connections.</p>\n"},{"tags":["java","amazon-web-services","aws-cloudformation","aws-api-gateway","openapi"],"answers":[{"comments":[{"owner":{"account_id":1328789,"reputation":436,"user_id":1273092,"display_name":"Jon Madison"},"score":0,"creation_date":1685636246,"post_id":75378545,"comment_id":134691521,"body_markdown":"What does this mean? Release notes for what version?","body":"What does this mean? Release notes for what version?"}],"tags":[],"owner":{"account_id":1756015,"reputation":11409,"user_id":1604048,"accept_rate":71,"display_name":"Murat Yıldız"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675801011,"creation_date":1675801011,"answer_id":75378545,"question_id":75377482,"body_markdown":"&gt;InvalidResourceException : property RestApiID not defined for resource of type Api\r\n\r\nCheck the [SAM cli](https://github.com/aws/aws-sam-cli) release notes and updated to the latest version. Then try again.","title":"InvalidResourceException : property RestApiID not defined for resource of type Api","body":"<blockquote>\n<p>InvalidResourceException : property RestApiID not defined for resource of type Api</p>\n</blockquote>\n<p>Check the <a href=\"https://github.com/aws/aws-sam-cli\" rel=\"nofollow noreferrer\">SAM cli</a> release notes and updated to the latest version. Then try again.</p>\n"}],"owner":{"account_id":15801712,"reputation":1288,"user_id":11402025,"display_name":"Tanu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":197,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1675801011,"creation_date":1675794250,"question_id":75377482,"body_markdown":"\r\nI am getting an error Error: \r\n\r\n```\r\n[InvalidResourceException(&#39;APIFunctionpersonapi&#39;, &#39;property RestApiID not defined for resource of type Api&#39;)] (&#39;APIFunctionpersonapi&#39;, &#39;property RestApiID not defined for resource of type Api&#39;)\r\n```\r\n\r\n\r\n```\r\nResources:\r\n  APIFunction:\r\n    Type: AWS::Serverless::Function \r\n    Properties:\r\n      CodeUri: APIFunction\r\n      Handler: com.java.Handler::handleRequest\r\n      Policies:\r\n        - arn:aws:iam::aws:policy/SecretsManagerReadWrite\r\n        - arn:aws:iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole\r\n        - arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole\r\n      Runtime: java11\r\n      MemorySize: 1024\r\n      Environment: \r\n        Variables:\r\n          PARAM1: VALUE\r\n      Events:\r\n        personapi:\r\n          Type: Api \r\n          Properties:\r\n            Path: /myapi/person\r\n            Method: post\r\n            RestApiID: !Ref SamTestPrivateApi\r\n      VpcConfig:\r\n        SecurityGroupIds: \r\n        SubnetIds: \r\n   SamTestPrivateApi:\r\n    Type: AWS::Serverless::Api\r\n    Properties:\r\n      OpenApiVersion: 3.0.3\r\n      StageName: !Ref Environment\r\n```","title":"InvalidResourceException : property RestApiID not defined for resource of type Api","body":"<p>I am getting an error Error:</p>\n<pre><code>[InvalidResourceException('APIFunctionpersonapi', 'property RestApiID not defined for resource of type Api')] ('APIFunctionpersonapi', 'property RestApiID not defined for resource of type Api')\n</code></pre>\n<pre><code>Resources:\n  APIFunction:\n    Type: AWS::Serverless::Function \n    Properties:\n      CodeUri: APIFunction\n      Handler: com.java.Handler::handleRequest\n      Policies:\n        - arn:aws:iam::aws:policy/SecretsManagerReadWrite\n        - arn:aws:iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole\n        - arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole\n      Runtime: java11\n      MemorySize: 1024\n      Environment: \n        Variables:\n          PARAM1: VALUE\n      Events:\n        personapi:\n          Type: Api \n          Properties:\n            Path: /myapi/person\n            Method: post\n            RestApiID: !Ref SamTestPrivateApi\n      VpcConfig:\n        SecurityGroupIds: \n        SubnetIds: \n   SamTestPrivateApi:\n    Type: AWS::Serverless::Api\n    Properties:\n      OpenApiVersion: 3.0.3\n      StageName: !Ref Environment\n</code></pre>\n"},{"tags":["java","openapi","openapi-generator","openapi-generator-maven-plugin"],"answers":[{"tags":[],"owner":{"account_id":12495309,"reputation":11912,"user_id":9095551,"display_name":"Beppe C"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675792256,"creation_date":1675792256,"answer_id":75377159,"question_id":75369562,"body_markdown":"You can implement those customizations by changing the [Mustache templates][1]\r\n\r\nFetch the templates of the Java framework (ie spring-boot) you want to use (ie `openapi-generator-cli author template -g spring --additional-properties=library=spring-boot -o tmp/mytemplates`\r\n\r\nModify the local `model.mustache` file to import the packages you want (lombok) and `pojo.mustache` to remove the getters/setters. There might other customisations necessary (each framework templates are different) but this the recommended approach.\r\n\r\n  [1]: https://openapi-generator.tech/docs/templating/","title":"openapi codegen without access methods","body":"<p>You can implement those customizations by changing the <a href=\"https://openapi-generator.tech/docs/templating/\" rel=\"nofollow noreferrer\">Mustache templates</a></p>\n<p>Fetch the templates of the Java framework (ie spring-boot) you want to use (ie <code>openapi-generator-cli author template -g spring --additional-properties=library=spring-boot -o tmp/mytemplates</code></p>\n<p>Modify the local <code>model.mustache</code> file to import the packages you want (lombok) and <code>pojo.mustache</code> to remove the getters/setters. There might other customisations necessary (each framework templates are different) but this the recommended approach.</p>\n"},{"tags":[],"owner":{"account_id":9235242,"reputation":1488,"user_id":6860078,"display_name":"tbatch"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675800805,"creation_date":1675800805,"answer_id":75378513,"question_id":75369562,"body_markdown":"As @beppe suggested in their [answer][1], this can easily be done by modifying the mustache template.  However, I highly advice against it.  In doing so, you discard many of the the features included with the model objects created by the generator.  Some of the features you lose are:\r\n* Bean Validation\r\n* Jackson Serialization Library Support\r\n* [Support for vendor extensions](https://github.com/OpenAPITools/openapi-generator/blob/master/docs/generators/java.md#supported-vendor-extensions)\r\n\r\nBy adding the `Lombok` annotation to the generated files, you are basically ignoring the main point of the generator, which is to generate files that support each other.  You are instead using a generator to call a generator.\r\n\r\nFinally, the amount of customization necessary to make the lombok library work with the mustache files is much more than is really worth it.  Sure, you can add `@Data` or `@Jacksonized` to your model, but what about `@JsonIgnore`?  Do you want to use parameters in your Lombok calls?  Because you can&#39;t set the builder classname via `@Builder(builderClassName = &quot;EmployeeBuilder&quot;)`.  That would be hardcoded.  Instead, you&#39;d have to use mustache parameters, such as `@Builder(builderClassName = {{$builderClassName}})`, which you&#39;d then have to define elsewhere.  What about `@Builder` vs `@SuperBuilder`?  Which one do you use in which situation?  How do you define and template it?\r\n\r\nAt this point, you might as well rewrite the entire `pojo.mustache` to be able to use the lombok annotations.  But, what if you need the old `pojo.mustache` functionality elsewhere?  Now you need to write a custom generator to determine which mustache to use in which situations.  \r\n\r\nIt is best to just build the domain models as the `openapi-generator` intends and use them as they are.  You can add annotations if you need to via vendor extensions such as `x-field-extra-annotation` and `x-class-extra-annotation` if you really feel the need to.\r\n\r\n  [1]: https://stackoverflow.com/a/75377159/6860078","title":"openapi codegen without access methods","body":"<p>As @beppe suggested in their <a href=\"https://stackoverflow.com/a/75377159/6860078\">answer</a>, this can easily be done by modifying the mustache template.  However, I highly advice against it.  In doing so, you discard many of the the features included with the model objects created by the generator.  Some of the features you lose are:</p>\n<ul>\n<li>Bean Validation</li>\n<li>Jackson Serialization Library Support</li>\n<li><a href=\"https://github.com/OpenAPITools/openapi-generator/blob/master/docs/generators/java.md#supported-vendor-extensions\" rel=\"nofollow noreferrer\">Support for vendor extensions</a></li>\n</ul>\n<p>By adding the <code>Lombok</code> annotation to the generated files, you are basically ignoring the main point of the generator, which is to generate files that support each other.  You are instead using a generator to call a generator.</p>\n<p>Finally, the amount of customization necessary to make the lombok library work with the mustache files is much more than is really worth it.  Sure, you can add <code>@Data</code> or <code>@Jacksonized</code> to your model, but what about <code>@JsonIgnore</code>?  Do you want to use parameters in your Lombok calls?  Because you can't set the builder classname via <code>@Builder(builderClassName = &quot;EmployeeBuilder&quot;)</code>.  That would be hardcoded.  Instead, you'd have to use mustache parameters, such as <code>@Builder(builderClassName = {{$builderClassName}})</code>, which you'd then have to define elsewhere.  What about <code>@Builder</code> vs <code>@SuperBuilder</code>?  Which one do you use in which situation?  How do you define and template it?</p>\n<p>At this point, you might as well rewrite the entire <code>pojo.mustache</code> to be able to use the lombok annotations.  But, what if you need the old <code>pojo.mustache</code> functionality elsewhere?  Now you need to write a custom generator to determine which mustache to use in which situations.</p>\n<p>It is best to just build the domain models as the <code>openapi-generator</code> intends and use them as they are.  You can add annotations if you need to via vendor extensions such as <code>x-field-extra-annotation</code> and <code>x-class-extra-annotation</code> if you really feel the need to.</p>\n"}],"owner":{"account_id":14271910,"reputation":333,"user_id":10309166,"display_name":"nixfuerdiecharts"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1272,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1675800805,"creation_date":1675751049,"question_id":75369562,"body_markdown":"I am using the openapi-generator-maven-plugin to generate model sources.\r\n\r\nIs there a way to generate them only with fields and without any access methods?\r\nI want the access methods to be generated via lombok with the additionalModelTypeAnnotations configOption in the maven configuration of the openapi-generator-maven-plugin","title":"openapi codegen without access methods","body":"<p>I am using the openapi-generator-maven-plugin to generate model sources.</p>\n<p>Is there a way to generate them only with fields and without any access methods?\nI want the access methods to be generated via lombok with the additionalModelTypeAnnotations configOption in the maven configuration of the openapi-generator-maven-plugin</p>\n"},{"tags":["java","code-generation","builder","auto-value"],"answers":[{"comments":[{"owner":{"account_id":318097,"reputation":4364,"user_id":635125,"accept_rate":77,"display_name":"Chris Morris"},"score":0,"creation_date":1676000175,"post_id":75378503,"comment_id":133053307,"body_markdown":"Thanks. Is there any plan for AutoValue to support this natively?","body":"Thanks. Is there any plan for AutoValue to support this natively?"},{"owner":{"account_id":2992114,"reputation":363,"user_id":2539476,"display_name":"emcmanus"},"score":0,"creation_date":1676219193,"post_id":75378503,"comment_id":133089130,"body_markdown":"Not currently, but we could document how to use `Optional` a bit more clearly, including ideas like the answer here.","body":"Not currently, but we could document how to use <code>Optional</code> a bit more clearly, including ideas like the answer here."}],"tags":[],"owner":{"account_id":2992114,"reputation":363,"user_id":2539476,"display_name":"emcmanus"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1675800699,"creation_date":1675800699,"answer_id":75378503,"question_id":75377680,"body_markdown":"You can define a second `setVal` method with an `Optional&lt;Integer&gt;` parameter, then call that with `Optional.empty()`. If you don&#39;t want that to be part of the public API, you could make it package-private and have a public method that calls it:\r\n\r\n```java\r\n  public abstract static class Builder {\r\n    public abstract Builder setVal(int value);\r\n    abstract Builder setVal(Optional&lt;Integer&gt; value);\r\n    public Builder clearVal() {\r\n      setVal(Optional.empty());\r\n    }\r\n    public abstract MainMessage build();\r\n  }\r\n```","title":"how to clear an `AutoValue` property via an `AutoValue.Builder`","body":"<p>You can define a second <code>setVal</code> method with an <code>Optional&lt;Integer&gt;</code> parameter, then call that with <code>Optional.empty()</code>. If you don't want that to be part of the public API, you could make it package-private and have a public method that calls it:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  public abstract static class Builder {\n    public abstract Builder setVal(int value);\n    abstract Builder setVal(Optional&lt;Integer&gt; value);\n    public Builder clearVal() {\n      setVal(Optional.empty());\n    }\n    public abstract MainMessage build();\n  }\n</code></pre>\n"}],"owner":{"account_id":318097,"reputation":4364,"user_id":635125,"accept_rate":77,"display_name":"Chris Morris"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":276,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675800699,"creation_date":1675795445,"question_id":75377680,"body_markdown":"I have an `AutoValue` with an `Optional` property. The `AutoValue` also has a `Builder`. Is there a way to use the `Builder` to clear the `Optional` property? I could not find anything about it in the `AutoValue.Builder` [documentation](https://github.com/google/auto/blob/main/value/userguide/builders-howto.md). **If this is not possible, is there a suggested work around?**\r\n\r\n\r\nExample below:\r\n\r\n```\r\npackage com.google.sandbox;\r\n\r\nimport com.google.auto.value.AutoValue;\r\nimport java.util.Optional;\r\n\r\n@AutoValue\r\n  public abstract static class MainMessage {\r\n\r\n    public static Builder builder() {\r\n      return new AutoValue_MainClass_MainMessage.Builder();\r\n    }\r\n\r\n    public abstract Optional&lt;Integer&gt; val();\r\n\r\n    public abstract Builder toBuilder();\r\n\r\n    /** Builder for MainMessage. */\r\n    @AutoValue.Builder\r\n    public abstract static class Builder {\r\n\r\n      public abstract Builder setVal(int value);\r\n\r\n      public abstract Builder clearVal(); // This causes a compiler error.\r\n\r\n      public abstract MainMessage build();\r\n    }\r\n  }\r\n```\r\n\r\nError:\r\n```\r\n[AutoValueBuilderNoArg] Method without arguments should be a build method returning com.google.sandbox.MainClass.MainMessage, or a getter method with the same name and type as a property method of com.google.sandbox.MainClass.MainMessage, or fooBuilder() where foo() or getFoo() is a property method of com.google.sandbox.MainClass.MainMessage\r\n      public abstract Builder clearVal();\r\n```\r\n","title":"how to clear an `AutoValue` property via an `AutoValue.Builder`","body":"<p>I have an <code>AutoValue</code> with an <code>Optional</code> property. The <code>AutoValue</code> also has a <code>Builder</code>. Is there a way to use the <code>Builder</code> to clear the <code>Optional</code> property? I could not find anything about it in the <code>AutoValue.Builder</code> <a href=\"https://github.com/google/auto/blob/main/value/userguide/builders-howto.md\" rel=\"nofollow noreferrer\">documentation</a>. <strong>If this is not possible, is there a suggested work around?</strong></p>\n<p>Example below:</p>\n<pre><code>package com.google.sandbox;\n\nimport com.google.auto.value.AutoValue;\nimport java.util.Optional;\n\n@AutoValue\n  public abstract static class MainMessage {\n\n    public static Builder builder() {\n      return new AutoValue_MainClass_MainMessage.Builder();\n    }\n\n    public abstract Optional&lt;Integer&gt; val();\n\n    public abstract Builder toBuilder();\n\n    /** Builder for MainMessage. */\n    @AutoValue.Builder\n    public abstract static class Builder {\n\n      public abstract Builder setVal(int value);\n\n      public abstract Builder clearVal(); // This causes a compiler error.\n\n      public abstract MainMessage build();\n    }\n  }\n</code></pre>\n<p>Error:</p>\n<pre><code>[AutoValueBuilderNoArg] Method without arguments should be a build method returning com.google.sandbox.MainClass.MainMessage, or a getter method with the same name and type as a property method of com.google.sandbox.MainClass.MainMessage, or fooBuilder() where foo() or getFoo() is a property method of com.google.sandbox.MainClass.MainMessage\n      public abstract Builder clearVal();\n</code></pre>\n"},{"tags":["java","xml","xstream"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1675800591,"post_id":75377093,"comment_id":133005845,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675800472,"creation_date":1675796037,"answer_id":75377761,"question_id":75377093,"body_markdown":"You can provide your own implementation of `PrettyPrintWriter`, which extends that class and overrides its `writeText(QuickWriter, String)` method.\r\n\r\nIn its most basic form that would be something like this:\r\n\r\n```java\r\nimport com.thoughtworks.xstream.core.util.QuickWriter;\r\nimport com.thoughtworks.xstream.io.xml.PrettyPrintWriter;\r\nimport java.io.Writer;\r\n\r\npublic class MyPrettyPrintWriter extends PrettyPrintWriter {\r\n\r\n    public MyPrettyPrintWriter(Writer writer) {\r\n        super(writer);\r\n    }\r\n\r\n    @Override\r\n    public void writeText(QuickWriter writer, String string) {\r\n        writer.write(string); \r\n    }\r\n}\r\n```\r\n\r\nYou would use this as follows:\r\n\r\n```java\r\nString s = &quot;Foo&#39;Bar&quot;;\r\nXStream xstream = new XStream();\r\nFileWriter writer = new FileWriter(&quot;my_demo.xml&quot;);\r\nxstream.marshal(s, new MyPrettyPrintWriter(writer));\r\n```\r\n\r\nThe output file contains the following:\r\n\r\n    &lt;string&gt;Foo&#39;Bar&lt;/string&gt;\r\n\r\n---\r\n\r\nThis is basic - it just passes the tag contents through to the file unchanged - nothing is escaped.\r\n\r\nYou are OK for content containing `&quot;`, `&#39;` and `&gt;`. But this will be a problem for text containing `&gt;` and `&amp;` - which should still be escaped. So you can enhance your `writeText` method to handle those cases as needed. See [What characters do I need to escape in XML documents?](https://stackoverflow.com/q/1091945/12567365) for more details.\r\n\r\nNote also this is only for text values - not for XML attributes. There is a separate [`writeAttributeValue`](https://x-stream.github.io/javadoc/index.html) method for that (probably not needed in your scenario).\r\n\r\n---\r\n\r\nIt is worth adding: There should be no need to do any of this. The XML is valid, with escaped values such as `&amp;apos;`. Any process (any half-way decent XML library or tool) reading that data should handle them correctly.","title":"How to print the escape characters as it is while using PrettyPrintWriter?","body":"<p>You can provide your own implementation of <code>PrettyPrintWriter</code>, which extends that class and overrides its <code>writeText(QuickWriter, String)</code> method.</p>\n<p>In its most basic form that would be something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.thoughtworks.xstream.core.util.QuickWriter;\nimport com.thoughtworks.xstream.io.xml.PrettyPrintWriter;\nimport java.io.Writer;\n\npublic class MyPrettyPrintWriter extends PrettyPrintWriter {\n\n    public MyPrettyPrintWriter(Writer writer) {\n        super(writer);\n    }\n\n    @Override\n    public void writeText(QuickWriter writer, String string) {\n        writer.write(string); \n    }\n}\n</code></pre>\n<p>You would use this as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String s = &quot;Foo'Bar&quot;;\nXStream xstream = new XStream();\nFileWriter writer = new FileWriter(&quot;my_demo.xml&quot;);\nxstream.marshal(s, new MyPrettyPrintWriter(writer));\n</code></pre>\n<p>The output file contains the following:</p>\n<pre><code>&lt;string&gt;Foo'Bar&lt;/string&gt;\n</code></pre>\n<hr />\n<p>This is basic - it just passes the tag contents through to the file unchanged - nothing is escaped.</p>\n<p>You are OK for content containing <code>&quot;</code>, <code>'</code> and <code>&gt;</code>. But this will be a problem for text containing <code>&gt;</code> and <code>&amp;</code> - which should still be escaped. So you can enhance your <code>writeText</code> method to handle those cases as needed. See <a href=\"https://stackoverflow.com/q/1091945/12567365\">What characters do I need to escape in XML documents?</a> for more details.</p>\n<p>Note also this is only for text values - not for XML attributes. There is a separate <a href=\"https://x-stream.github.io/javadoc/index.html\" rel=\"nofollow noreferrer\"><code>writeAttributeValue</code></a> method for that (probably not needed in your scenario).</p>\n<hr />\n<p>It is worth adding: There should be no need to do any of this. The XML is valid, with escaped values such as <code>&amp;apos;</code>. Any process (any half-way decent XML library or tool) reading that data should handle them correctly.</p>\n"}],"owner":{"account_id":27679078,"reputation":1,"user_id":21167091,"display_name":"noob99"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":114,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675800472,"creation_date":1675791807,"question_id":75377093,"body_markdown":"Using PrettyPrintWriter to pretty print the xml file\r\nIn the generated xml file the &#39; (apostrophe) is getting written as &amp;apos \r\nWant it to print as &#39;\r\n\r\n\r\nUsing the following \r\n**xstream.marshal(obj, new PrettyPrintWriter(writer))**  to pretty print\r\n,any suggestions on how to print the escape characters as it is?","title":"How to print the escape characters as it is while using PrettyPrintWriter?","body":"<p>Using PrettyPrintWriter to pretty print the xml file\nIn the generated xml file the ' (apostrophe) is getting written as &amp;apos\nWant it to print as '</p>\n<p>Using the following\n<strong>xstream.marshal(obj, new PrettyPrintWriter(writer))</strong>  to pretty print\n,any suggestions on how to print the escape characters as it is?</p>\n"},{"tags":["java","maven","pom.xml"],"answers":[{"tags":[],"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1649840187,"creation_date":1649840187,"answer_id":71854653,"question_id":71854580,"body_markdown":"Just set the property inside the POM\r\n\r\n````\r\n&lt;properties&gt;\r\n  &lt;argLine&gt;java.locale.providers=COMPAT,CLDR&lt;/argLine&gt;\r\n&lt;/properties&gt;\r\n````","title":"Maven POM equivalent for-DargLine=&quot;-Djava.locale.providers=COMPAT,CLDR&quot;","body":"<p>Just set the property inside the POM</p>\n<pre><code>&lt;properties&gt;\n  &lt;argLine&gt;java.locale.providers=COMPAT,CLDR&lt;/argLine&gt;\n&lt;/properties&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12374306,"reputation":1,"user_id":9023039,"display_name":"Brent"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675800436,"creation_date":1675800436,"answer_id":75378476,"question_id":71854580,"body_markdown":"I added &quot;-D&quot; To the previous answer from J Fabian Meier for my project since I was using maven-surefire-plugin version 2.22.2 on a child of a parent pom.xml. The child ran all the tests but it seemed the pom.xml parent didn&#39;t propagate the argline property to the children. It also gave an error when running argline without the added &#39;-D&#39; on the maven-surefire plugin configuration. Now it looks like this and the tests run and the argline propagates to the tests so  the parse error I was getting before are fixed. \r\n\r\n    &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.22.2&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;includes&gt;\r\n                        &lt;include&gt;**/*Test.*&lt;/include&gt;\r\n                        &lt;include&gt;**/*Spec.*&lt;/include&gt;\r\n                    &lt;/includes&gt;\r\n                    &lt;argLine&gt;-Djava.locale.providers=COMPAT,CLDR&lt;/argLine&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n\r\n","title":"Maven POM equivalent for-DargLine=&quot;-Djava.locale.providers=COMPAT,CLDR&quot;","body":"<p>I added &quot;-D&quot; To the previous answer from J Fabian Meier for my project since I was using maven-surefire-plugin version 2.22.2 on a child of a parent pom.xml. The child ran all the tests but it seemed the pom.xml parent didn't propagate the argline property to the children. It also gave an error when running argline without the added '-D' on the maven-surefire plugin configuration. Now it looks like this and the tests run and the argline propagates to the tests so  the parse error I was getting before are fixed.</p>\n<pre><code>&lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.22.2&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;includes&gt;\n                    &lt;include&gt;**/*Test.*&lt;/include&gt;\n                    &lt;include&gt;**/*Spec.*&lt;/include&gt;\n                &lt;/includes&gt;\n                &lt;argLine&gt;-Djava.locale.providers=COMPAT,CLDR&lt;/argLine&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n</code></pre>\n"}],"owner":{"account_id":3936141,"reputation":75,"user_id":3252485,"display_name":"user3252485"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":528,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71854653,"answer_count":2,"score":0,"last_activity_date":1675800436,"creation_date":1649839818,"question_id":71854580,"body_markdown":"I&#39;m migrating to java11 and I&#39;m running this commmand\r\n\r\n    mvn clean install -DargLine=&quot;-Djava.locale.providers=COMPAT,CLDR&quot;\r\n\r\nit works fine, but is there a POM equivalent to pass that argLine so I just can use mvn clean install?","title":"Maven POM equivalent for-DargLine=&quot;-Djava.locale.providers=COMPAT,CLDR&quot;","body":"<p>I'm migrating to java11 and I'm running this commmand</p>\n<pre><code>mvn clean install -DargLine=&quot;-Djava.locale.providers=COMPAT,CLDR&quot;\n</code></pre>\n<p>it works fine, but is there a POM equivalent to pass that argLine so I just can use mvn clean install?</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc","thymeleaf"],"answers":[{"tags":[],"owner":{"account_id":2324765,"reputation":3704,"user_id":2039546,"display_name":"İsmail Y."},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1609065781,"creation_date":1609065781,"answer_id":65464897,"question_id":65464444,"body_markdown":"There is no technical problem here. I think there is a problem with your `submit()` function, because I created a normal form and tried your same instance, and all selection combinations worked correctly.\r\n\r\n*I am adding the entity, controller and html files respectively for example.*\r\n\r\n```\r\npublic class Example {\r\n\r\n    private boolean gre;\r\n    private boolean gre2;\r\n\r\n    public Example() {\r\n    }\r\n\r\n    // getter/setter ...\r\n}\r\n```\r\n\r\n```\r\n@Controller\r\n@RequestMapping(&quot;/example&quot;)\r\npublic class ExampleController {\r\n\r\n    @GetMapping(&quot;/create&quot;)\r\n    public String createExample(Model model) {\r\n        model.addAttribute(&quot;example&quot;, new Example());\r\n        return &quot;example-form&quot;;\r\n    }\r\n\r\n    @PostMapping(&quot;/insert&quot;)\r\n    public String insertExample(Model model, Example example) {\r\n        model.addAttribute(&quot;example&quot;, example);\r\n        return &quot;example-form&quot;;\r\n    }\r\n}\r\n```\r\n\r\n```\r\n&lt;!DOCTYPE HTML&gt;\r\n&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\r\n&lt;body&gt;\r\n&lt;div&gt;\r\n    &lt;form action=&quot;/example/insert&quot; method=&quot;post&quot; th:object=&quot;${example}&quot;&gt;\r\n        &lt;div class=&quot;form-group required-control&quot;&gt;\r\n            &lt;label for=&quot;gre&quot;&gt;GRE&lt;/label&gt;\r\n            &lt;input id=&quot;gre&quot; type=&quot;checkbox&quot; name=&quot;gre&quot; th:checked=&quot;*{gre}&quot; /&gt;\r\n            &lt;label for=&quot;gre2&quot;&gt;GRE 2&lt;/label&gt;\r\n            &lt;input id=&quot;gre2&quot; type=&quot;checkbox&quot; name=&quot;gre2&quot; th:checked=&quot;*{gre2}&quot; /&gt;\r\n        &lt;/div&gt;\r\n        &lt;button type=&quot;submit&quot;&gt;Submit Form&lt;/button&gt;\r\n    &lt;/form&gt;\r\n&lt;/div&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```","title":"submitting checkboxes with Thymeleaf + SpringBoot","body":"<p>There is no technical problem here. I think there is a problem with your <code>submit()</code> function, because I created a normal form and tried your same instance, and all selection combinations worked correctly.</p>\n<p><em>I am adding the entity, controller and html files respectively for example.</em></p>\n<pre><code>public class Example {\n\n    private boolean gre;\n    private boolean gre2;\n\n    public Example() {\n    }\n\n    // getter/setter ...\n}\n</code></pre>\n<pre><code>@Controller\n@RequestMapping(&quot;/example&quot;)\npublic class ExampleController {\n\n    @GetMapping(&quot;/create&quot;)\n    public String createExample(Model model) {\n        model.addAttribute(&quot;example&quot;, new Example());\n        return &quot;example-form&quot;;\n    }\n\n    @PostMapping(&quot;/insert&quot;)\n    public String insertExample(Model model, Example example) {\n        model.addAttribute(&quot;example&quot;, example);\n        return &quot;example-form&quot;;\n    }\n}\n</code></pre>\n<pre><code>&lt;!DOCTYPE HTML&gt;\n&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\n&lt;body&gt;\n&lt;div&gt;\n    &lt;form action=&quot;/example/insert&quot; method=&quot;post&quot; th:object=&quot;${example}&quot;&gt;\n        &lt;div class=&quot;form-group required-control&quot;&gt;\n            &lt;label for=&quot;gre&quot;&gt;GRE&lt;/label&gt;\n            &lt;input id=&quot;gre&quot; type=&quot;checkbox&quot; name=&quot;gre&quot; th:checked=&quot;*{gre}&quot; /&gt;\n            &lt;label for=&quot;gre2&quot;&gt;GRE 2&lt;/label&gt;\n            &lt;input id=&quot;gre2&quot; type=&quot;checkbox&quot; name=&quot;gre2&quot; th:checked=&quot;*{gre2}&quot; /&gt;\n        &lt;/div&gt;\n        &lt;button type=&quot;submit&quot;&gt;Submit Form&lt;/button&gt;\n    &lt;/form&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27728897,"reputation":1,"user_id":21167841,"display_name":"Eugene Vasilev"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675800297,"creation_date":1675800297,"answer_id":75378460,"question_id":65464444,"body_markdown":"If you don&#39;t want to add an attribute into the Model, you can receive checkbox condition via HttpServletRequest.\r\n\r\n    @GetMapping(&quot;/create&quot;)\r\n    public String createExample() {\r\n        return &quot;example-form&quot;;\r\n    }\r\n\r\n    @PostMapping(&quot;/insert&quot;)\r\n    public String insertExample(User user, HttpServletRequest request) {\r\n        user.setGre(request.getParameter(&quot;gre&quot;) != null);\r\n        user.setGre2(request.getParameter(&quot;gre2&quot;) != null);\r\n        userServiceImp.updateUser(editedUser); //for example updating user in database\r\n        return &quot;/&quot;;\r\n    }\r\n\r\nHTML will be like this:\r\n\r\n\r\n        &lt;form th:action=&quot;/insert&quot; method=&quot;post&quot;&gt;\r\n            &lt;div class=&quot;form-group required-control&quot;&gt;\r\n                &lt;label&gt;GRE&lt;/label&gt;\r\n                &lt;input type=&quot;checkbox&quot; name=&quot;gre&quot;/&gt;\r\n                &lt;label&gt;GRE 2&lt;/label&gt;\r\n                &lt;input type=&quot;checkbox&quot; name=&quot;gre2&quot;/&gt;\r\n            &lt;/div&gt;\r\n            &lt;button type=&quot;submit&quot;&gt;Submit Form&lt;/button&gt;\r\n        &lt;/form&gt;\r\n\r\n\r\n","title":"submitting checkboxes with Thymeleaf + SpringBoot","body":"<p>If you don't want to add an attribute into the Model, you can receive checkbox condition via HttpServletRequest.</p>\n<pre><code>@GetMapping(&quot;/create&quot;)\npublic String createExample() {\n    return &quot;example-form&quot;;\n}\n\n@PostMapping(&quot;/insert&quot;)\npublic String insertExample(User user, HttpServletRequest request) {\n    user.setGre(request.getParameter(&quot;gre&quot;) != null);\n    user.setGre2(request.getParameter(&quot;gre2&quot;) != null);\n    userServiceImp.updateUser(editedUser); //for example updating user in database\n    return &quot;/&quot;;\n}\n</code></pre>\n<p>HTML will be like this:</p>\n<pre><code>    &lt;form th:action=&quot;/insert&quot; method=&quot;post&quot;&gt;\n        &lt;div class=&quot;form-group required-control&quot;&gt;\n            &lt;label&gt;GRE&lt;/label&gt;\n            &lt;input type=&quot;checkbox&quot; name=&quot;gre&quot;/&gt;\n            &lt;label&gt;GRE 2&lt;/label&gt;\n            &lt;input type=&quot;checkbox&quot; name=&quot;gre2&quot;/&gt;\n        &lt;/div&gt;\n        &lt;button type=&quot;submit&quot;&gt;Submit Form&lt;/button&gt;\n    &lt;/form&gt;\n</code></pre>\n"}],"owner":{"account_id":10390370,"reputation":1913,"user_id":7661910,"accept_rate":96,"display_name":"en Lopes"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7349,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":65464897,"answer_count":2,"score":0,"last_activity_date":1675800297,"creation_date":1609061651,"question_id":65464444,"body_markdown":"I have a SpringBoot app. with this thymelaf template, that works fine when submitting:\r\n\r\n     &lt;div class=&quot;form-group required-control&quot;&gt;\r\n                                        &lt;label for=&quot;gre&quot;&gt;GRE&lt;/label&gt;\r\n                                        &lt;input id=&quot;gre&quot; type=&quot;checkbox&quot; name=&quot;gre&quot; th:checked=&quot;*{gre}&quot; th:onclick=&quot;submit()&quot;   /&gt;\r\n    \r\n                                    &lt;/div&gt;\r\n\r\n\r\nbut when I add another checkbox, It always take in account the first one, regardless which one I click\r\n\r\n \r\n\r\n     &lt;div class=&quot;form-group required-control&quot;&gt;\r\n                                        &lt;label for=&quot;gre&quot;&gt;GRE&lt;/label&gt;\r\n                                        &lt;input id=&quot;gre&quot; type=&quot;checkbox&quot; name=&quot;gre&quot; th:checked=&quot;*{gre}&quot; th:onclick=&quot;submit()&quot;   /&gt;\r\n    \r\n     &lt;label for=&quot;gre2&quot;&gt;GRE2&lt;/label&gt;\r\n                                        &lt;input id=&quot;gre2&quot; type=&quot;checkbox&quot; name=&quot;gre2&quot; th:checked=&quot;*{gre2}&quot; th:onclick=&quot;submit()&quot;   /&gt;\r\n    \r\n    \r\n                                    &lt;/div&gt;\r\n\r\n","title":"submitting checkboxes with Thymeleaf + SpringBoot","body":"<p>I have a SpringBoot app. with this thymelaf template, that works fine when submitting:</p>\n<pre><code> &lt;div class=&quot;form-group required-control&quot;&gt;\n                                    &lt;label for=&quot;gre&quot;&gt;GRE&lt;/label&gt;\n                                    &lt;input id=&quot;gre&quot; type=&quot;checkbox&quot; name=&quot;gre&quot; th:checked=&quot;*{gre}&quot; th:onclick=&quot;submit()&quot;   /&gt;\n\n                                &lt;/div&gt;\n</code></pre>\n<p>but when I add another checkbox, It always take in account the first one, regardless which one I click</p>\n<pre><code> &lt;div class=&quot;form-group required-control&quot;&gt;\n                                    &lt;label for=&quot;gre&quot;&gt;GRE&lt;/label&gt;\n                                    &lt;input id=&quot;gre&quot; type=&quot;checkbox&quot; name=&quot;gre&quot; th:checked=&quot;*{gre}&quot; th:onclick=&quot;submit()&quot;   /&gt;\n\n &lt;label for=&quot;gre2&quot;&gt;GRE2&lt;/label&gt;\n                                    &lt;input id=&quot;gre2&quot; type=&quot;checkbox&quot; name=&quot;gre2&quot; th:checked=&quot;*{gre2}&quot; th:onclick=&quot;submit()&quot;   /&gt;\n\n\n                                &lt;/div&gt;\n</code></pre>\n"},{"tags":["java","urlconnection"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1590182357,"post_id":61963732,"comment_id":109594696,"body_markdown":"Search [the documentation of URLConnection](https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/net/URLConnection.html) for methods with the word `Timeout` in their names.","body":"Search <a href=\"https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/net/URLConnection.html\" rel=\"nofollow noreferrer\">the documentation of URLConnection</a> for methods with the word <code>Timeout</code> in their names."}],"answers":[{"comments":[{"owner":{"account_id":1474041,"reputation":1667,"user_id":1384908,"accept_rate":67,"display_name":"pafau k."},"score":0,"creation_date":1590184131,"post_id":61964086,"comment_id":109595334,"body_markdown":"1) This is&#39;nt an answer to asked question. 2) Syaing something is &quot;not good enough for you&quot; without providing alternatives is not even a constructive critique. Maybe you can include some sort of suggestion to improve the answer?","body":"1) This is&#39;nt an answer to asked question. 2) Syaing something is &quot;not good enough for you&quot; without providing alternatives is not even a constructive critique. Maybe you can include some sort of suggestion to improve the answer?"},{"owner":{"account_id":14592842,"reputation":342,"user_id":11384519,"display_name":"Ivan Dimitrov"},"score":0,"creation_date":1590184574,"post_id":61964086,"comment_id":109595478,"body_markdown":"Fair enough. I found a tutorial on an alternative way to fetch data from a URL.\nhttps://docs.oracle.com/javase/tutorial/networking/urls/readingURL.html\nThis method could not help at all, but it&#39;s worth a shot. I can&#39;t say for sure as I can&#39;t reproduce the problem, but it&#39;s worth a try.","body":"Fair enough. I found a tutorial on an alternative way to fetch data from a URL. <a href=\"https://docs.oracle.com/javase/tutorial/networking/urls/readingURL.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/networking/urls/readingURL.h&zwnj;&#8203;tml</a> This method could not help at all, but it&#39;s worth a shot. I can&#39;t say for sure as I can&#39;t reproduce the problem, but it&#39;s worth a try."},{"owner":{"account_id":1474041,"reputation":1667,"user_id":1384908,"accept_rate":67,"display_name":"pafau k."},"score":0,"creation_date":1590185771,"post_id":61964086,"comment_id":109595800,"body_markdown":"Network connections like to play tricks. I think an answer to this one is to set up a connection with low timeout, and maybe use automatic retries. The *real* solution would be of course fixing the lower level networking problem. Anyway, I don&#39;t think the original question had anything to do with *reading* from a connection, just establishing one.","body":"Network connections like to play tricks. I think an answer to this one is to set up a connection with low timeout, and maybe use automatic retries. The <i>real</i> solution would be of course fixing the lower level networking problem. Anyway, I don&#39;t think the original question had anything to do with <i>reading</i> from a connection, just establishing one."}],"tags":[],"owner":{"account_id":14592842,"reputation":342,"user_id":11384519,"display_name":"Ivan Dimitrov"},"comment_count":3,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1590182522,"creation_date":1590182522,"answer_id":61964086,"question_id":61963732,"body_markdown":"There is no way I can reproduce that problem using my ISP.\r\nI suggest you dig deeper into the problem and find a better solution. Sending another request just doesn&#39;t seem good enough to me. Maybe try a different way to get the data and see if that works for you. Can&#39;t say for sure as I can&#39;t reproduce the problem.","title":"How do I make a Java function that retries a URL connection every half second if the connection takes too long?","body":"<p>There is no way I can reproduce that problem using my ISP.\nI suggest you dig deeper into the problem and find a better solution. Sending another request just doesn't seem good enough to me. Maybe try a different way to get the data and see if that works for you. Can't say for sure as I can't reproduce the problem.</p>\n"},{"comments":[{"owner":{"account_id":7130912,"reputation":187,"user_id":5452186,"display_name":"Daniel He"},"score":1,"creation_date":1590372851,"post_id":61964109,"comment_id":109647030,"body_markdown":"Thank you so much, I&#39;ll try this out, I&#39;m pretty sure this is what I need.","body":"Thank you so much, I&#39;ll try this out, I&#39;m pretty sure this is what I need."}],"tags":[],"owner":{"account_id":24801,"reputation":15286,"user_id":63293,"accept_rate":50,"display_name":"Peter Walser"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1590182610,"creation_date":1590182610,"answer_id":61964109,"question_id":61963732,"body_markdown":"`URLConnection` allows you to specify the connect and read timeout prior to calling `connect()`:\r\n\r\nhttps://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/net/URLConnection.html#setConnectTimeout(int)\r\n\r\n&gt; Sets a specified timeout value, in milliseconds, to be used when\r\n&gt; opening a communications link to the resource referenced by this\r\n&gt; URLConnection. If the timeout expires before the connection can be\r\n&gt; established, a java.net.SocketTimeoutException is raised. A timeout of\r\n&gt; zero is interpreted as an infinite timeout.\r\n\r\nWith 500ms timeout:\r\n\r\n    try {\r\n        URLConnection request = url.openConnection();\r\n        request.setConnectTimeout(500); // 500 ms\r\n        request.connect();\r\n        // on successful connection\r\n    } catch (SocketTimeoutException ex) {\r\n        // on request timeout\r\n    }\r\n\r\nThis you can pack into a loop, but I recommend limiting the number of attempts made.","title":"How do I make a Java function that retries a URL connection every half second if the connection takes too long?","body":"<p><code>URLConnection</code> allows you to specify the connect and read timeout prior to calling <code>connect()</code>:</p>\n\n<p><a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/net/URLConnection.html#setConnectTimeout(int)\" rel=\"nofollow noreferrer\">https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/net/URLConnection.html#setConnectTimeout(int)</a></p>\n\n<blockquote>\n  <p>Sets a specified timeout value, in milliseconds, to be used when\n  opening a communications link to the resource referenced by this\n  URLConnection. If the timeout expires before the connection can be\n  established, a java.net.SocketTimeoutException is raised. A timeout of\n  zero is interpreted as an infinite timeout.</p>\n</blockquote>\n\n<p>With 500ms timeout:</p>\n\n<pre><code>try {\n    URLConnection request = url.openConnection();\n    request.setConnectTimeout(500); // 500 ms\n    request.connect();\n    // on successful connection\n} catch (SocketTimeoutException ex) {\n    // on request timeout\n}\n</code></pre>\n\n<p>This you can pack into a loop, but I recommend limiting the number of attempts made.</p>\n"},{"tags":[],"owner":{"account_id":11885028,"reputation":2467,"user_id":8697659,"display_name":"improbable"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675800127,"creation_date":1590182617,"answer_id":61964112,"question_id":61963732,"body_markdown":"Java&#39;s URLConnection doesn&#39;t have retry capabilities in Java 8 therefore the best way here to achieve this - use an appropriate standalone 3-party library such as [Apache HttpClient][1].\r\nThis is by far the best standalone 3-party HTTP client with advanced capabilities as of 2020 and it&#39;s still maintained.\r\n\r\nBy default as of version 5.2.x Apache Http Client, Apache Http Client uses the default implementation of `org.apache.http.client.HttpRequestRetryHandler`, which retries 3 times, but you can use a custom implementation instead.\r\n\r\nThe configuration might look like this(full imports are for example&#39;s sake):\r\n```java\r\norg.apache.http.client.HttpClient httpClient = org.apache.http.impl.client.HttpClients.custom()\r\n.setRetryHandler(YourCustomImplOfTheRetryHandlerClass)\r\n//other config\r\n.build();\r\n```\r\n\r\n\r\n  [1]: https://hc.apache.org/httpcomponents-client-5.0.x/index.html","title":"How do I make a Java function that retries a URL connection every half second if the connection takes too long?","body":"<p>Java's URLConnection doesn't have retry capabilities in Java 8 therefore the best way here to achieve this - use an appropriate standalone 3-party library such as <a href=\"https://hc.apache.org/httpcomponents-client-5.0.x/index.html\" rel=\"nofollow noreferrer\">Apache HttpClient</a>.\nThis is by far the best standalone 3-party HTTP client with advanced capabilities as of 2020 and it's still maintained.</p>\n<p>By default as of version 5.2.x Apache Http Client, Apache Http Client uses the default implementation of <code>org.apache.http.client.HttpRequestRetryHandler</code>, which retries 3 times, but you can use a custom implementation instead.</p>\n<p>The configuration might look like this(full imports are for example's sake):</p>\n<pre class=\"lang-java prettyprint-override\"><code>org.apache.http.client.HttpClient httpClient = org.apache.http.impl.client.HttpClients.custom()\n.setRetryHandler(YourCustomImplOfTheRetryHandlerClass)\n//other config\n.build();\n</code></pre>\n"}],"owner":{"account_id":7130912,"reputation":187,"user_id":5452186,"display_name":"Daniel He"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3732,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":3,"score":-1,"last_activity_date":1675800127,"creation_date":1590180926,"question_id":61963732,"body_markdown":"So I have a problem with a Java program I have. The program&#39;s basic functionality includes basically connecting to a web API for data. The function that does that is something like this:\r\n\r\n\r\n```\r\npublic static Object getData(String sURL) throws IOException {\r\n    URL url = new URL(sURL);\r\n\tURLConnection request = url.openConnection();\r\n\r\n\trequest.connect();\r\n\r\n    return request.getContent();\r\n}\r\n\r\n```\r\nThe code works fine as it is, but recently, after my house changed ISPs, I have found that sometimes the connections take an unreasonably long amount of time, something like 10 seconds or more in about 10% of attempts, while the other 90% takes only around 200ms. I have found it to be faster to ask my program to call the function again in a different thread than to wait for some of these connections to finally connect.\r\n\r\nTherefore, I want to change the function so that if after 500ms, the connection did not establish, it would disconnect and a new connection would be attempted. How could I do this?\r\n\r\nSomewhere online I read that HttpURLConnection might help, but I am not sure how.","title":"How do I make a Java function that retries a URL connection every half second if the connection takes too long?","body":"<p>So I have a problem with a Java program I have. The program's basic functionality includes basically connecting to a web API for data. The function that does that is something like this:</p>\n\n<pre><code>public static Object getData(String sURL) throws IOException {\n    URL url = new URL(sURL);\n    URLConnection request = url.openConnection();\n\n    request.connect();\n\n    return request.getContent();\n}\n\n</code></pre>\n\n<p>The code works fine as it is, but recently, after my house changed ISPs, I have found that sometimes the connections take an unreasonably long amount of time, something like 10 seconds or more in about 10% of attempts, while the other 90% takes only around 200ms. I have found it to be faster to ask my program to call the function again in a different thread than to wait for some of these connections to finally connect.</p>\n\n<p>Therefore, I want to change the function so that if after 500ms, the connection did not establish, it would disconnect and a new connection would be attempted. How could I do this?</p>\n\n<p>Somewhere online I read that HttpURLConnection might help, but I am not sure how.</p>\n"},{"tags":["java","elasticsearch"],"owner":{"account_id":10464171,"reputation":41,"user_id":7714014,"display_name":"zenuve"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675799961,"creation_date":1675752847,"question_id":75369791,"body_markdown":"We are using **ElasticsearchClient** instance to build our query and communicate with elasticsearch hosted on elastic-cloud version 8.5.3.\r\n\r\nWe could not find any information on how to inject **nested path** while creating GeoDistanceSort object.\r\n\r\nSort query that we are trying to build using Java:\r\n```\r\n&quot;sort&quot;:[\r\n      {\r\n      &quot;_geo_distance&quot;:{\r\n          &quot;nested&quot;:{\r\n              &quot;path&quot;:&quot;facility&quot;\r\n           },\r\n          &quot;facility.location&quot;:{\r\n            &quot;lat&quot;:25.240995,\r\n            &quot;lon&quot;:55.751156\r\n          },\r\n          &quot;unit&quot;:&quot;km&quot;,\r\n          &quot;order&quot;:&quot;asc&quot;,\r\n          &quot;mode&quot; : &quot;min&quot;,\r\n          &quot;distance_type&quot; : &quot;arc&quot;,\r\n          &quot;ignore_unmapped&quot;: true\r\n        }\r\n      }\r\n   ]\r\n```\r\n\r\nMaven dependency:\r\n```\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;co.elastic.clients&lt;/groupId&gt;\r\n  &lt;artifactId&gt;elasticsearch-java&lt;/artifactId&gt;\r\n  &lt;version&gt;8.5.3&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n\r\nWe have referred to the following official elastic documentation for **JavaClient 8.5.3**:\r\n\r\n[https://artifacts.elastic.co/javadoc/co/elastic/clients/elasticsearch-java/8.5.3/co/elastic/clients/elasticsearch/_types/SortOptions.html](https://artifacts.elastic.co/javadoc/co/elastic/clients/elasticsearch-java/8.5.3/co/elastic/clients/elasticsearch/_types/SortOptions.html)\r\n\r\n[https://artifacts.elastic.co/javadoc/co/elastic/clients/elasticsearch-java/8.5.3/co/elastic/clients/elasticsearch/_types/GeoDistanceSort.html](https://artifacts.elastic.co/javadoc/co/elastic/clients/elasticsearch-java/8.5.3/co/elastic/clients/elasticsearch/_types/GeoDistanceSort.html)\r\n\r\n[https://artifacts.elastic.co/javadoc/co/elastic/clients/elasticsearch-java/8.5.3/co/elastic/clients/elasticsearch/_types/GeoDistanceSort.Builder.html](https://artifacts.elastic.co/javadoc/co/elastic/clients/elasticsearch-java/8.5.3/co/elastic/clients/elasticsearch/_types/GeoDistanceSort.Builder.html)","title":"How to perform GeoDistanceSort on a nested field using elasticsearch-8.5.3 JavaClient","body":"<p>We are using <strong>ElasticsearchClient</strong> instance to build our query and communicate with elasticsearch hosted on elastic-cloud version 8.5.3.</p>\n<p>We could not find any information on how to inject <strong>nested path</strong> while creating GeoDistanceSort object.</p>\n<p>Sort query that we are trying to build using Java:</p>\n<pre><code>&quot;sort&quot;:[\n      {\n      &quot;_geo_distance&quot;:{\n          &quot;nested&quot;:{\n              &quot;path&quot;:&quot;facility&quot;\n           },\n          &quot;facility.location&quot;:{\n            &quot;lat&quot;:25.240995,\n            &quot;lon&quot;:55.751156\n          },\n          &quot;unit&quot;:&quot;km&quot;,\n          &quot;order&quot;:&quot;asc&quot;,\n          &quot;mode&quot; : &quot;min&quot;,\n          &quot;distance_type&quot; : &quot;arc&quot;,\n          &quot;ignore_unmapped&quot;: true\n        }\n      }\n   ]\n</code></pre>\n<p>Maven dependency:</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;co.elastic.clients&lt;/groupId&gt;\n  &lt;artifactId&gt;elasticsearch-java&lt;/artifactId&gt;\n  &lt;version&gt;8.5.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>We have referred to the following official elastic documentation for <strong>JavaClient 8.5.3</strong>:</p>\n<p><a href=\"https://artifacts.elastic.co/javadoc/co/elastic/clients/elasticsearch-java/8.5.3/co/elastic/clients/elasticsearch/_types/SortOptions.html\" rel=\"nofollow noreferrer\">https://artifacts.elastic.co/javadoc/co/elastic/clients/elasticsearch-java/8.5.3/co/elastic/clients/elasticsearch/_types/SortOptions.html</a></p>\n<p><a href=\"https://artifacts.elastic.co/javadoc/co/elastic/clients/elasticsearch-java/8.5.3/co/elastic/clients/elasticsearch/_types/GeoDistanceSort.html\" rel=\"nofollow noreferrer\">https://artifacts.elastic.co/javadoc/co/elastic/clients/elasticsearch-java/8.5.3/co/elastic/clients/elasticsearch/_types/GeoDistanceSort.html</a></p>\n<p><a href=\"https://artifacts.elastic.co/javadoc/co/elastic/clients/elasticsearch-java/8.5.3/co/elastic/clients/elasticsearch/_types/GeoDistanceSort.Builder.html\" rel=\"nofollow noreferrer\">https://artifacts.elastic.co/javadoc/co/elastic/clients/elasticsearch-java/8.5.3/co/elastic/clients/elasticsearch/_types/GeoDistanceSort.Builder.html</a></p>\n"},{"tags":["java","cucumber","testng","parameter-passing","cucumber-java"],"answers":[{"tags":[],"owner":{"account_id":208253,"reputation":633,"user_id":458616,"display_name":"Ency"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1556088410,"creation_date":1556088410,"answer_id":55823902,"question_id":55808880,"body_markdown":"Apparently, I can access to parameters from anywher usgin `Reporter.getCurrentTestResult().getTestContext().getCurrentXmlTest().getParameter(&quot;browser&quot;)`","title":"How to pass TestNG parameter into Cucumber?","body":"<p>Apparently, I can access to parameters from anywher usgin <code>Reporter.getCurrentTestResult().getTestContext().getCurrentXmlTest().getParameter(\"browser\")</code></p>\n"},{"comments":[{"owner":{"account_id":7606429,"reputation":500,"user_id":5768951,"accept_rate":37,"display_name":"DevX"},"score":0,"creation_date":1613570410,"post_id":55826215,"comment_id":117114881,"body_markdown":"is it possible tags into cucumber options via testng.xml?","body":"is it possible tags into cucumber options via testng.xml?"}],"tags":[],"owner":{"account_id":14631339,"reputation":1976,"user_id":10567003,"display_name":"TheSociety"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1556096437,"creation_date":1556096437,"answer_id":55826215,"question_id":55808880,"body_markdown":"***Step 1**. Runner Class shall extends **AbstractTestNGCucumberTests** and implement @Parameters and @BeforeTest annotations.*  \r\n\r\n    package com.jacksparrow.automation.suite.runner;\r\n    \r\n    import org.testng.annotations.BeforeTest;\r\n    import org.testng.annotations.Parameters;\r\n    import com.jacksparrow.automation.steps_definitions.functional.BaseSteps;\r\n    import cucumber.api.CucumberOptions;\r\n    import cucumber.api.testng.AbstractTestNGCucumberTests;\r\n    \r\n    @CucumberOptions(features = &quot;classpath:features/functional/&quot;,\r\n    \t\t\t\t     glue = {&quot;com.jacksparrow.automation.steps_definitions.functional&quot; },\r\n    \t\t\t\t   plugin = { &quot;pretty&quot;,&quot;json:target/cucumber-json/cucumber.json&quot;,\r\n    \t\t\t\t\t\t    &quot;junit:target/cucumber-reports/Cucumber.xml&quot;, &quot;html:target/cucumber-reports&quot;},\r\n    \t\t\t\t   tags = { &quot;@BAMS_Submitted_State_Guest_User&quot; },\r\n    \t\t\t\t   junit ={ &quot;--step-notifications&quot;},\r\n    \t\t\t\t   strict = false,\r\n    \t\t\t\t   dryRun = false,\r\n    \t\t\t   monochrome = true)\r\n    \r\n    public class RunCukeTest extends AbstractTestNGCucumberTests {\r\n    \t\r\n    \t@Parameters({ &quot;browser&quot; })\r\n    \t@BeforeTest\r\n        public static void setUpScenario(String browser) {\r\n    \t\tBaseSteps.getInstance().getBrowserInstantiation(browser);\r\n    \t}\r\n    } \r\n\r\nNote - I do have browser implementation method under BaseSteps Class. You can implement as per your need.\r\n\r\n***Step 2**. Below is how we define parameter name and value in TestNG.xml*\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;!DOCTYPE suite SYSTEM &quot;http://testng.org/testng-1.0.dtd&quot;&gt;\r\n    &lt;suite name=&quot;Suite&quot;&gt;\r\n    \r\n    \t&lt;test thread-count=&quot;1&quot; name=&quot;Test&quot; parallel=&quot;classes&quot;&gt;\r\n    \t\t&lt;parameter name=&quot;browser&quot; value=&quot;chrome&quot; /&gt;\r\n    \t\t&lt;classes&gt;\r\n    \t\t\t&lt;class\r\n    \t\t\t\tname=&quot;com.jacksparrow.automation.suite.runner.RunCukeTest&quot; /&gt;\r\n    \t\t&lt;/classes&gt;\r\n    \t&lt;/test&gt;\r\n    &lt;/suite&gt;","title":"How to pass TestNG parameter into Cucumber?","body":"<p><strong><em>Step 1</strong>. Runner Class shall extends <strong>AbstractTestNGCucumberTests</strong> and implement @Parameters and @BeforeTest annotations.</em>  </p>\n\n<pre><code>package com.jacksparrow.automation.suite.runner;\n\nimport org.testng.annotations.BeforeTest;\nimport org.testng.annotations.Parameters;\nimport com.jacksparrow.automation.steps_definitions.functional.BaseSteps;\nimport cucumber.api.CucumberOptions;\nimport cucumber.api.testng.AbstractTestNGCucumberTests;\n\n@CucumberOptions(features = \"classpath:features/functional/\",\n                     glue = {\"com.jacksparrow.automation.steps_definitions.functional\" },\n                   plugin = { \"pretty\",\"json:target/cucumber-json/cucumber.json\",\n                            \"junit:target/cucumber-reports/Cucumber.xml\", \"html:target/cucumber-reports\"},\n                   tags = { \"@BAMS_Submitted_State_Guest_User\" },\n                   junit ={ \"--step-notifications\"},\n                   strict = false,\n                   dryRun = false,\n               monochrome = true)\n\npublic class RunCukeTest extends AbstractTestNGCucumberTests {\n\n    @Parameters({ \"browser\" })\n    @BeforeTest\n    public static void setUpScenario(String browser) {\n        BaseSteps.getInstance().getBrowserInstantiation(browser);\n    }\n} \n</code></pre>\n\n<p>Note - I do have browser implementation method under BaseSteps Class. You can implement as per your need.</p>\n\n<p><strong><em>Step 2</strong>. Below is how we define parameter name and value in TestNG.xml</em></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!DOCTYPE suite SYSTEM \"http://testng.org/testng-1.0.dtd\"&gt;\n&lt;suite name=\"Suite\"&gt;\n\n    &lt;test thread-count=\"1\" name=\"Test\" parallel=\"classes\"&gt;\n        &lt;parameter name=\"browser\" value=\"chrome\" /&gt;\n        &lt;classes&gt;\n            &lt;class\n                name=\"com.jacksparrow.automation.suite.runner.RunCukeTest\" /&gt;\n        &lt;/classes&gt;\n    &lt;/test&gt;\n&lt;/suite&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10726280,"reputation":67,"user_id":7893703,"display_name":"Anil Jain"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675799880,"creation_date":1675799880,"answer_id":75378397,"question_id":55808880,"body_markdown":"        TestNG:\r\n        ---------\r\n        &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n        &lt;!DOCTYPE suite SYSTEM &quot;http://testng.org/testng-1.0.dtd&quot;&gt;\r\n        &lt;suite name=&quot;Sauce Demo Cucumber Test Automation&quot;&gt;\r\n        \t&lt;parameter name=&quot;browser&quot; value=&quot;Chrome&quot; /&gt;\r\n        \t&lt;test thread-count=&quot;2&quot; name=&quot;test&quot; parallel=&quot;classes&quot;&gt;\r\n        \t\t&lt;classes&gt;\r\n        \t\t\t&lt;class name=&quot;com.automation.cucumber.runner.ui.SauceDemoRunner&quot; /&gt;\r\n        \t\t&lt;/classes&gt;\r\n        \t&lt;/test&gt; &lt;!-- Test --&gt;\r\n        &lt;/suite&gt; &lt;!-- Suite --&gt;\r\n        \r\n        Step definitions base class:\r\n    ----------------------------\r\n        import org.openqa.selenium.WebDriver;\r\n        import org.testng.Reporter;\r\n        import org.testng.xml.XmlTest;\r\n        \r\n        public class BaseStepDefinition {\r\n        \tWebDriver driver;\r\n        \tXmlTest xmlTest;\r\n        \r\n        \tpublic BaseStepDefinition() {\r\n        \t\ttry {\r\n        \t\t\txmlTest = Reporter.getCurrentTestResult().getTestContext().getCurrentXmlTest();\r\n        \t\t\tSystem.out.println(xmlTest.getParameter(&quot;browser&quot;));\r\n        \t\t} catch (Exception e) {\r\n        \t\t\te.printStackTrace();\r\n        \t\t}\r\n        \r\n        \t}\r\n        \r\n        }\r\n        \r\n        Step definitions class:\r\n    --------------------------------\r\n        import io.cucumber.java.After;\r\n        import io.cucumber.java.en.Given;\r\n        \r\n        public class SauceDemoStepDefinition extends BaseStepDefinition {\r\n        \r\n        \t@After\r\n        \tpublic void tearDown() throws Exception {\r\n        \r\n        \t}\r\n        \r\n        \t@Given(&quot;^User is on login page$&quot;)\r\n        \tpublic void user_is_on_login_page() throws Exception {\r\n        \r\n        \t}\r\n        \r\n        }","title":"How to pass TestNG parameter into Cucumber?","body":"<pre><code>    TestNG:\n    ---------\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n    &lt;!DOCTYPE suite SYSTEM &quot;http://testng.org/testng-1.0.dtd&quot;&gt;\n    &lt;suite name=&quot;Sauce Demo Cucumber Test Automation&quot;&gt;\n        &lt;parameter name=&quot;browser&quot; value=&quot;Chrome&quot; /&gt;\n        &lt;test thread-count=&quot;2&quot; name=&quot;test&quot; parallel=&quot;classes&quot;&gt;\n            &lt;classes&gt;\n                &lt;class name=&quot;com.automation.cucumber.runner.ui.SauceDemoRunner&quot; /&gt;\n            &lt;/classes&gt;\n        &lt;/test&gt; &lt;!-- Test --&gt;\n    &lt;/suite&gt; &lt;!-- Suite --&gt;\n    \n    Step definitions base class:\n----------------------------\n    import org.openqa.selenium.WebDriver;\n    import org.testng.Reporter;\n    import org.testng.xml.XmlTest;\n    \n    public class BaseStepDefinition {\n        WebDriver driver;\n        XmlTest xmlTest;\n    \n        public BaseStepDefinition() {\n            try {\n                xmlTest = Reporter.getCurrentTestResult().getTestContext().getCurrentXmlTest();\n                System.out.println(xmlTest.getParameter(&quot;browser&quot;));\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n    \n        }\n    \n    }\n    \n    Step definitions class:\n--------------------------------\n    import io.cucumber.java.After;\n    import io.cucumber.java.en.Given;\n    \n    public class SauceDemoStepDefinition extends BaseStepDefinition {\n    \n        @After\n        public void tearDown() throws Exception {\n    \n        }\n    \n        @Given(&quot;^User is on login page$&quot;)\n        public void user_is_on_login_page() throws Exception {\n    \n        }\n    \n    }\n</code></pre>\n"}],"owner":{"account_id":208253,"reputation":633,"user_id":458616,"display_name":"Ency"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5693,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":55823902,"answer_count":3,"score":1,"last_activity_date":1675799880,"creation_date":1556014287,"question_id":55808880,"body_markdown":"I am trying to run my cucumber tests under different browser, so I have `test.xml` (yes, currently just one browser)\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;!DOCTYPE suite SYSTEM &quot;http://testng.org/testng-1.0.dtd&quot;&gt;\r\n    &lt;suite name=&quot;SelfCare&quot; verbose=&quot;1&quot; thread-count=&quot;1&quot; parallel=&quot;tests&quot; configfailurepolicy=&quot;continue&quot;&gt;\r\n        &lt;parameter name=&quot;environment&quot; value=&quot;TEST&quot; /&gt;\r\n        &lt;test name=&quot;Chrome&quot;&gt;\r\n            &lt;parameter name=&quot;browser&quot; value=&quot;chrome&quot; /&gt;\r\n            &lt;parameter name=&quot;width&quot; value=&quot;1024&quot; /&gt;\r\n            &lt;parameter name=&quot;height&quot; value=&quot;768&quot; /&gt;\r\n            &lt;classes&gt;\r\n                &lt;class name=&quot;TestNGRunner&quot;&gt;\r\n                    &lt;methods&gt;\r\n                        &lt;include name=&quot;scenario&quot;/&gt;\r\n                    &lt;/methods&gt;\r\n                &lt;/class&gt;\r\n            &lt;/classes&gt;\r\n        &lt;/test&gt;\r\n    &lt;/suite&gt;\r\n\r\nAnd this TestNG runner class, I am able to access parameter `browser` from this runner class, but I would need to pass this variable(s) to Cucumber where are create instance of browser based on passed variables. So far I use it without TestNG and I&#39;m passing those variables through environment variables, however I assume this won&#39;t work if I run tests in parallel on different browsers.\r\n\r\n    import cucumber.api.CucumberOptions;\r\n    import cucumber.api.testng.CucumberFeatureWrapper;\r\n    import cucumber.api.testng.PickleEventWrapper;\r\n    import cucumber.api.testng.TestNGCucumberRunner;\r\n    import org.testng.annotations.*;\r\n    \r\n    @CucumberOptions(\r\n            plugin = {&quot;html:target/cucumber-html-report&quot;,\r\n                    &quot;json:target/cucumber.json&quot;,\r\n                    &quot;pretty:target/cucumber-pretty.txt&quot;,\r\n                    &quot;junit:target/cucumber-results.xml&quot;},\r\n            strict = true,\r\n            extraGlue = {&quot;src/test/resources/Hooks.java&quot;},\r\n            features = {&quot;src/test/resources/Header.feature&quot;}\r\n    )\r\n    public class TestNGRunner {\r\n        private TestNGCucumberRunner testNGCucumberRunner;\r\n        private String browser;\r\n    \r\n        @BeforeClass(alwaysRun = true)\r\n        public void setUpClass() throws Exception {\r\n            testNGCucumberRunner = new TestNGCucumberRunner(this.getClass());\r\n        }\r\n    \r\n        @Parameters(&quot;browser&quot;)\r\n        @BeforeTest\r\n        public void beforeSuite(String browser) {\r\n            System.out.println(&quot;Browser for this test set is &quot; + browser);\r\n            this.browser = browser;\r\n        }\r\n    \r\n        @Test(groups = &quot;Cucumber&quot;, description = &quot;Runs Cucumber Feature&quot;, dataProvider = &quot;scenarios&quot;)\r\n        public void scenario(PickleEventWrapper pickleEvent, CucumberFeatureWrapper cucumberFeature) throws Throwable {\r\n    \r\n            testNGCucumberRunner.runScenario(pickleEvent.getPickleEvent());\r\n        }\r\n    \r\n        @DataProvider\r\n        public Object[][] scenarios() {\r\n            return testNGCucumberRunner.provideScenarios();\r\n        }\r\n    \r\n        @AfterClass(alwaysRun = true)\r\n        public void tearDownClass() throws Exception {\r\n            testNGCucumberRunner.finish();\r\n        }\r\n        \r\n    }\r\n\r\nAny ideas how to achieve that?","title":"How to pass TestNG parameter into Cucumber?","body":"<p>I am trying to run my cucumber tests under different browser, so I have <code>test.xml</code> (yes, currently just one browser)</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!DOCTYPE suite SYSTEM \"http://testng.org/testng-1.0.dtd\"&gt;\n&lt;suite name=\"SelfCare\" verbose=\"1\" thread-count=\"1\" parallel=\"tests\" configfailurepolicy=\"continue\"&gt;\n    &lt;parameter name=\"environment\" value=\"TEST\" /&gt;\n    &lt;test name=\"Chrome\"&gt;\n        &lt;parameter name=\"browser\" value=\"chrome\" /&gt;\n        &lt;parameter name=\"width\" value=\"1024\" /&gt;\n        &lt;parameter name=\"height\" value=\"768\" /&gt;\n        &lt;classes&gt;\n            &lt;class name=\"TestNGRunner\"&gt;\n                &lt;methods&gt;\n                    &lt;include name=\"scenario\"/&gt;\n                &lt;/methods&gt;\n            &lt;/class&gt;\n        &lt;/classes&gt;\n    &lt;/test&gt;\n&lt;/suite&gt;\n</code></pre>\n\n<p>And this TestNG runner class, I am able to access parameter <code>browser</code> from this runner class, but I would need to pass this variable(s) to Cucumber where are create instance of browser based on passed variables. So far I use it without TestNG and I'm passing those variables through environment variables, however I assume this won't work if I run tests in parallel on different browsers.</p>\n\n<pre><code>import cucumber.api.CucumberOptions;\nimport cucumber.api.testng.CucumberFeatureWrapper;\nimport cucumber.api.testng.PickleEventWrapper;\nimport cucumber.api.testng.TestNGCucumberRunner;\nimport org.testng.annotations.*;\n\n@CucumberOptions(\n        plugin = {\"html:target/cucumber-html-report\",\n                \"json:target/cucumber.json\",\n                \"pretty:target/cucumber-pretty.txt\",\n                \"junit:target/cucumber-results.xml\"},\n        strict = true,\n        extraGlue = {\"src/test/resources/Hooks.java\"},\n        features = {\"src/test/resources/Header.feature\"}\n)\npublic class TestNGRunner {\n    private TestNGCucumberRunner testNGCucumberRunner;\n    private String browser;\n\n    @BeforeClass(alwaysRun = true)\n    public void setUpClass() throws Exception {\n        testNGCucumberRunner = new TestNGCucumberRunner(this.getClass());\n    }\n\n    @Parameters(\"browser\")\n    @BeforeTest\n    public void beforeSuite(String browser) {\n        System.out.println(\"Browser for this test set is \" + browser);\n        this.browser = browser;\n    }\n\n    @Test(groups = \"Cucumber\", description = \"Runs Cucumber Feature\", dataProvider = \"scenarios\")\n    public void scenario(PickleEventWrapper pickleEvent, CucumberFeatureWrapper cucumberFeature) throws Throwable {\n\n        testNGCucumberRunner.runScenario(pickleEvent.getPickleEvent());\n    }\n\n    @DataProvider\n    public Object[][] scenarios() {\n        return testNGCucumberRunner.provideScenarios();\n    }\n\n    @AfterClass(alwaysRun = true)\n    public void tearDownClass() throws Exception {\n        testNGCucumberRunner.finish();\n    }\n\n}\n</code></pre>\n\n<p>Any ideas how to achieve that?</p>\n"},{"tags":["java","android","kotlin","view","switchcompat"],"owner":{"account_id":5019073,"reputation":3015,"user_id":4033050,"accept_rate":27,"display_name":"Seb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675799586,"creation_date":1675799586,"question_id":75378346,"body_markdown":"I tried to customized a toggle switch and after hours on playing with material, I just gave up and re-used the `SwitchCompat`\r\n\r\n```\r\n&lt;androidx.appcompat.widget.SwitchCompat\r\n            android:id=&quot;@+id/settingsSwitch&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_marginEnd=&quot;@dimen/cell_padding&quot;\r\n            android:checked=&quot;@{item.enabled}&quot;\r\n            tools:checked=&quot;true&quot;\r\n            android:thumb=&quot;@drawable/ios_thumb&quot;\r\n            app:trackTintMode=&quot;multiply&quot;\r\n            app:trackTint=&quot;@null&quot;\r\n            app:track=&quot;@drawable/ios_track&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;/&gt;\r\n\r\n```\r\n\r\nand the `ios_thumb` look like this:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n    &lt;item android:state_checked=&quot;true&quot;&gt;\r\n        &lt;shape android:dither=&quot;true&quot; android:shape=&quot;rectangle&quot; android:useLevel=&quot;false&quot; android:visible=&quot;true&quot;&gt;\r\n            &lt;solid android:color=&quot;#FFFFFF&quot;/&gt;\r\n            &lt;corners android:radius=&quot;15dp&quot; /&gt;\r\n            &lt;size android:width=&quot;30dp&quot; android:height=&quot;30dp&quot; /&gt;\r\n            &lt;stroke android:width=&quot;4dp&quot; android:color=&quot;#0000ffff&quot; /&gt;\r\n        &lt;/shape&gt;\r\n    &lt;/item&gt;\r\n    &lt;item android:state_checked=&quot;false&quot;&gt;\r\n        &lt;shape android:dither=&quot;true&quot; android:shape=&quot;rectangle&quot; android:useLevel=&quot;false&quot; android:visible=&quot;true&quot;&gt;\r\n            &lt;solid android:color=&quot;#FFFFFF&quot;/&gt;\r\n            &lt;corners android:radius=&quot;15dp&quot; /&gt;\r\n            &lt;size android:width=&quot;30dp&quot; android:height=&quot;30dp&quot; /&gt;\r\n            &lt;stroke android:width=&quot;4dp&quot; android:color=&quot;#0000ffff&quot; /&gt;\r\n        &lt;/shape&gt;\r\n    &lt;/item&gt;\r\n&lt;/selector&gt;\r\n\r\n```\r\n\r\nand ios_track as below:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n    &lt;item android:state_checked=&quot;true&quot;&gt;\r\n        &lt;shape android:dither=&quot;true&quot; android:shape=&quot;rectangle&quot; android:useLevel=&quot;false&quot; android:visible=&quot;true&quot;&gt;\r\n            &lt;solid android:color=&quot;@color/green300&quot;/&gt;\r\n            &lt;corners android:radius=&quot;25dp&quot; /&gt;\r\n            &lt;size android:width=&quot;60dp&quot; android:height=&quot;30dp&quot; /&gt;\r\n\r\n        &lt;/shape&gt;\r\n    &lt;/item&gt;\r\n    &lt;item android:state_checked=&quot;false&quot;&gt;\r\n        &lt;shape android:dither=&quot;true&quot; android:shape=&quot;rectangle&quot; android:useLevel=&quot;false&quot; android:visible=&quot;true&quot;&gt;\r\n            &lt;solid android:color=&quot;@color/lightness200&quot;/&gt;\r\n            &lt;corners android:radius=&quot;25dp&quot; /&gt;\r\n            &lt;size android:width=&quot;60dp&quot; android:height=&quot;30dp&quot; /&gt;\r\n        &lt;/shape&gt;\r\n    &lt;/item&gt;\r\n&lt;/selector&gt;\r\n```\r\n\r\nthe mechanism works and I almost there for the customization... Only thing is that :\r\n- When the switch is to false for check or true, it&#39;s not exactly reflecting the color.\r\n\r\nAs an example:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThe white is grey-ish. I think the false is also bad but as my background for false state is a transparent white it&#39;s not affecting the visual. It&#39;s look like the track is displayed over the thumb instead of the opposite. Any idea?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/AMGAW.png","title":"customize a toggle switch for Android","body":"<p>I tried to customized a toggle switch and after hours on playing with material, I just gave up and re-used the <code>SwitchCompat</code></p>\n<pre><code>&lt;androidx.appcompat.widget.SwitchCompat\n            android:id=&quot;@+id/settingsSwitch&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_marginEnd=&quot;@dimen/cell_padding&quot;\n            android:checked=&quot;@{item.enabled}&quot;\n            tools:checked=&quot;true&quot;\n            android:thumb=&quot;@drawable/ios_thumb&quot;\n            app:trackTintMode=&quot;multiply&quot;\n            app:trackTint=&quot;@null&quot;\n            app:track=&quot;@drawable/ios_track&quot;\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;/&gt;\n\n</code></pre>\n<p>and the <code>ios_thumb</code> look like this:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\n    &lt;item android:state_checked=&quot;true&quot;&gt;\n        &lt;shape android:dither=&quot;true&quot; android:shape=&quot;rectangle&quot; android:useLevel=&quot;false&quot; android:visible=&quot;true&quot;&gt;\n            &lt;solid android:color=&quot;#FFFFFF&quot;/&gt;\n            &lt;corners android:radius=&quot;15dp&quot; /&gt;\n            &lt;size android:width=&quot;30dp&quot; android:height=&quot;30dp&quot; /&gt;\n            &lt;stroke android:width=&quot;4dp&quot; android:color=&quot;#0000ffff&quot; /&gt;\n        &lt;/shape&gt;\n    &lt;/item&gt;\n    &lt;item android:state_checked=&quot;false&quot;&gt;\n        &lt;shape android:dither=&quot;true&quot; android:shape=&quot;rectangle&quot; android:useLevel=&quot;false&quot; android:visible=&quot;true&quot;&gt;\n            &lt;solid android:color=&quot;#FFFFFF&quot;/&gt;\n            &lt;corners android:radius=&quot;15dp&quot; /&gt;\n            &lt;size android:width=&quot;30dp&quot; android:height=&quot;30dp&quot; /&gt;\n            &lt;stroke android:width=&quot;4dp&quot; android:color=&quot;#0000ffff&quot; /&gt;\n        &lt;/shape&gt;\n    &lt;/item&gt;\n&lt;/selector&gt;\n\n</code></pre>\n<p>and ios_track as below:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\n    &lt;item android:state_checked=&quot;true&quot;&gt;\n        &lt;shape android:dither=&quot;true&quot; android:shape=&quot;rectangle&quot; android:useLevel=&quot;false&quot; android:visible=&quot;true&quot;&gt;\n            &lt;solid android:color=&quot;@color/green300&quot;/&gt;\n            &lt;corners android:radius=&quot;25dp&quot; /&gt;\n            &lt;size android:width=&quot;60dp&quot; android:height=&quot;30dp&quot; /&gt;\n\n        &lt;/shape&gt;\n    &lt;/item&gt;\n    &lt;item android:state_checked=&quot;false&quot;&gt;\n        &lt;shape android:dither=&quot;true&quot; android:shape=&quot;rectangle&quot; android:useLevel=&quot;false&quot; android:visible=&quot;true&quot;&gt;\n            &lt;solid android:color=&quot;@color/lightness200&quot;/&gt;\n            &lt;corners android:radius=&quot;25dp&quot; /&gt;\n            &lt;size android:width=&quot;60dp&quot; android:height=&quot;30dp&quot; /&gt;\n        &lt;/shape&gt;\n    &lt;/item&gt;\n&lt;/selector&gt;\n</code></pre>\n<p>the mechanism works and I almost there for the customization... Only thing is that :</p>\n<ul>\n<li>When the switch is to false for check or true, it's not exactly reflecting the color.</li>\n</ul>\n<p>As an example:</p>\n<p><a href=\"https://i.stack.imgur.com/AMGAW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AMGAW.png\" alt=\"enter image description here\" /></a></p>\n<p>The white is grey-ish. I think the false is also bad but as my background for false state is a transparent white it's not affecting the visual. It's look like the track is displayed over the thumb instead of the opposite. Any idea?</p>\n"},{"tags":["java","amazon-web-services","spring-boot","amazon-s3","amazon-ecs"],"answers":[{"tags":[],"owner":{"account_id":7501,"reputation":187982,"user_id":13070,"accept_rate":90,"display_name":"Mark B"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675799414,"creation_date":1675799414,"answer_id":75378324,"question_id":75378253,"body_markdown":"I doubt Spring will take that S3 URL and automatically know how to connect to an S3 bucket and perform S3 object operations to load the file from there. You will need to add something to your docker image&#39;s startup script to download that file from S3 to the local file system, probably using the [AWS CLI][1], before starting the Spring application.\r\n\r\n\r\n  [1]: https://awscli.amazonaws.com/v2/documentation/api/latest/reference/s3/index.html","title":"Load spring logback.xml from s3","body":"<p>I doubt Spring will take that S3 URL and automatically know how to connect to an S3 bucket and perform S3 object operations to load the file from there. You will need to add something to your docker image's startup script to download that file from S3 to the local file system, probably using the <a href=\"https://awscli.amazonaws.com/v2/documentation/api/latest/reference/s3/index.html\" rel=\"nofollow noreferrer\">AWS CLI</a>, before starting the Spring application.</p>\n"}],"owner":{"account_id":17034955,"reputation":1,"user_id":12324198,"display_name":"Sarthak Jha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":167,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675799414,"creation_date":1675798922,"question_id":75378253,"body_markdown":"So, what I want is to put my logback.xml in the aws s3 bucket and when my service is deployed in ECS of aws, the logback.xml should be picked from s3 bucket.\r\n\r\n\r\nSimilarly, when we want the logback.xml file to be picked from outside the root repository in local  machine we use \r\n```\r\nlogging.config= path to logback.xml\r\n```\r\nLet me know if we can do that and how?\r\n\r\nI tried adding env variable as \r\n```\r\nlogging.config = s3bucket file URL/arn/object URL\r\n```\r\nit didn&#39;t work for me","title":"Load spring logback.xml from s3","body":"<p>So, what I want is to put my logback.xml in the aws s3 bucket and when my service is deployed in ECS of aws, the logback.xml should be picked from s3 bucket.</p>\n<p>Similarly, when we want the logback.xml file to be picked from outside the root repository in local  machine we use</p>\n<pre><code>logging.config= path to logback.xml\n</code></pre>\n<p>Let me know if we can do that and how?</p>\n<p>I tried adding env variable as</p>\n<pre><code>logging.config = s3bucket file URL/arn/object URL\n</code></pre>\n<p>it didn't work for me</p>\n"},{"tags":["java","pthreads","posix","quarkus","vert.x"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1675558078,"post_id":75349229,"comment_id":132955442,"body_markdown":"It&#39;s possible that IO involves a context switch, and other parts of the system are involved in IO, but &quot;I/O Thread&quot; misses the point.  As much as possible, the IO is done by your application and in the threads that you call those methods with.  At some point, the kernel probably gets involved and sets up a DMA transfer, but that happens as seldom as possible.","body":"It&#39;s possible that IO involves a context switch, and other parts of the system are involved in IO, but &quot;I/O Thread&quot; misses the point.  As much as possible, the IO is done by your application and in the threads that you call those methods with.  At some point, the kernel probably gets involved and sets up a DMA transfer, but that happens as seldom as possible."},{"owner":{"account_id":27393528,"reputation":353,"user_id":20896122,"display_name":"undefined symbol"},"score":0,"creation_date":1675564750,"post_id":75349229,"comment_id":132956124,"body_markdown":"&quot;The I/O thread&quot; is the thread that you&#39;ve decided to call &quot;the I/O thread&quot;.  Presumably your design has it doing I/O, but that&#39;s up to you.","body":"&quot;The I/O thread&quot; is the thread that you&#39;ve decided to call &quot;the I/O thread&quot;.  Presumably your design has it doing I/O, but that&#39;s up to you."}],"answers":[{"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1675558415,"post_id":75349259,"comment_id":132955474,"body_markdown":"I&#39;ve heard the term &quot;net task&quot; applied to the thread calling `accept()` and other server-socket-type methods (especially if using a `selector`), but that&#39;s a concept designed for an application, and it&#39;s more of an ad-hoc approach, something you do when the design seems to call for it.","body":"I&#39;ve heard the term &quot;net task&quot; applied to the thread calling <code>accept()</code> and other server-socket-type methods (especially if using a <code>selector</code>), but that&#39;s a concept designed for an application, and it&#39;s more of an ad-hoc approach, something you do when the design seems to call for it."}],"tags":[],"owner":{"account_id":401843,"reputation":89873,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1675555855,"creation_date":1675555855,"answer_id":75349259,"question_id":75349229,"body_markdown":"There is no such thing as &#39;The&#39; I/O thread. There isn&#39;t even such a thing as &#39;a&#39; I/O thread.\r\n\r\nA thread can do whatever it wants. You can have 1000 threads, all of them switching between reading a file (that&#39;d be I/O by any sane definition of that word) and doing a complex calculation (that surely isn&#39;t I/O).\r\n\r\nSo, what&#39;s the I/O thread here? All of them? None of them? A nebulous definition where each thread is an I/O thread but only if they are on the &#39;read from file&#39; part of the process?\r\n\r\nThe thing is, I/O thread is not a concept in the java lang spec nor is it a concept in any library I know of. It just doesn&#39;t matter. At best, the term is being used in some book, tutorial, or lecture as a &#39;shorthand&#39; to mean something specific. The term is not, however, that kind of specific - from the context of said tutorial, book, or lecture it is probably easy to figure out what it means, but you did not provide this context, so who knows what &#39;I/O thread&#39; is supposed to mean here.\r\n\r\n&gt; Are I/O thread and EventLoop the same thing?\r\n\r\nFor most definitions of the whatever I/O thread might mean, and for most definitions of what &#39;event loop&#39; means, they are __the opposite__, actually.\r\n\r\n&gt; There is a moment where a server thread needs to accept a connection and read/write to it\r\n\r\nOne somewhat common setup is:\r\n\r\nOne thread calls `serverSocket.accept()` - this will block (freeze the thread) until a new connection shows up. At that point, the `accept()` method returns __and therefore no further socket connections can be accepted__ and that&#39;s bad, it needs to get back into that `accept()` call asap. The network stack will not deny any incoming requests, it just holds on to them, it&#39;s like letting the phone ring for a bit.\r\n\r\nGiven that it needs to get back in there ASAP, it will fire up a new thread and hand it the socket that was just created, so that this thread can do do the job of reading/writing to that connecting entity, so that the &#39;socket accepting thread&#39; can get back to calling `.accept()` as soon as feasible. A good setup will keep track of how many threads are currently actively dealing with open connections; if too many come in it should slow down or possibly start denying connections.\r\n\r\nThere isn&#39;t an event loop in this scenario. If you want to call the socket-accepting thread &#39;the I/O thread&#39;, that&#39;s ... a weird term to apply to that. Why not just call it the &#39;socket accepting thread&#39;, that&#39;s a heck of a lot clearer.\r\n\r\n","title":"what is the I/O Thread? is it a OS thread or User thread?","body":"<p>There is no such thing as 'The' I/O thread. There isn't even such a thing as 'a' I/O thread.</p>\n<p>A thread can do whatever it wants. You can have 1000 threads, all of them switching between reading a file (that'd be I/O by any sane definition of that word) and doing a complex calculation (that surely isn't I/O).</p>\n<p>So, what's the I/O thread here? All of them? None of them? A nebulous definition where each thread is an I/O thread but only if they are on the 'read from file' part of the process?</p>\n<p>The thing is, I/O thread is not a concept in the java lang spec nor is it a concept in any library I know of. It just doesn't matter. At best, the term is being used in some book, tutorial, or lecture as a 'shorthand' to mean something specific. The term is not, however, that kind of specific - from the context of said tutorial, book, or lecture it is probably easy to figure out what it means, but you did not provide this context, so who knows what 'I/O thread' is supposed to mean here.</p>\n<blockquote>\n<p>Are I/O thread and EventLoop the same thing?</p>\n</blockquote>\n<p>For most definitions of the whatever I/O thread might mean, and for most definitions of what 'event loop' means, they are <strong>the opposite</strong>, actually.</p>\n<blockquote>\n<p>There is a moment where a server thread needs to accept a connection and read/write to it</p>\n</blockquote>\n<p>One somewhat common setup is:</p>\n<p>One thread calls <code>serverSocket.accept()</code> - this will block (freeze the thread) until a new connection shows up. At that point, the <code>accept()</code> method returns <strong>and therefore no further socket connections can be accepted</strong> and that's bad, it needs to get back into that <code>accept()</code> call asap. The network stack will not deny any incoming requests, it just holds on to them, it's like letting the phone ring for a bit.</p>\n<p>Given that it needs to get back in there ASAP, it will fire up a new thread and hand it the socket that was just created, so that this thread can do do the job of reading/writing to that connecting entity, so that the 'socket accepting thread' can get back to calling <code>.accept()</code> as soon as feasible. A good setup will keep track of how many threads are currently actively dealing with open connections; if too many come in it should slow down or possibly start denying connections.</p>\n<p>There isn't an event loop in this scenario. If you want to call the socket-accepting thread 'the I/O thread', that's ... a weird term to apply to that. Why not just call it the 'socket accepting thread', that's a heck of a lot clearer.</p>\n"},{"tags":[],"owner":{"account_id":3026505,"reputation":89,"user_id":2566397,"accept_rate":100,"display_name":"user2566397"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675799299,"creation_date":1675799299,"answer_id":75378303,"question_id":75349229,"body_markdown":"Looks like I/O thread and EventLoop thread are used interchangebly.&lt;br/&gt;\r\nGenerally there is an event loop when it is using the Async/Event I/O Model once the kernel can send a message to the user process whenever I/O is ready/completed.","title":"what is the I/O Thread? is it a OS thread or User thread?","body":"<p>Looks like I/O thread and EventLoop thread are used interchangebly.<br/>\nGenerally there is an event loop when it is using the Async/Event I/O Model once the kernel can send a message to the user process whenever I/O is ready/completed.</p>\n"}],"owner":{"account_id":3026505,"reputation":89,"user_id":2566397,"accept_rate":100,"display_name":"user2566397"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":407,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1675885185,"accepted_answer_id":75378303,"answer_count":2,"score":1,"last_activity_date":1675799299,"creation_date":1675555384,"question_id":75349229,"body_markdown":"There is a moment where a server thread needs to accept a connection and read/write to it, is this thread what we call I/O Thread? Are I/O thread and EventLoop the same thing?\r\n\r\n**EDIT:**&lt;br/&gt;\r\nA bit more context, this is the article I was reading: [article][1]&lt;br/&gt;\r\nThe statement &quot;the request is handled by the reactive engine on the IO thread&quot; got me thinking on the question above\r\n\r\n\r\n  [1]: https://quarkus.io/blog/io-thread-benchmark/#hello-world-microbenchmark-io-thread-or-worker-thread","title":"what is the I/O Thread? is it a OS thread or User thread?","body":"<p>There is a moment where a server thread needs to accept a connection and read/write to it, is this thread what we call I/O Thread? Are I/O thread and EventLoop the same thing?</p>\n<p><strong>EDIT:</strong><br/>\nA bit more context, this is the article I was reading: <a href=\"https://quarkus.io/blog/io-thread-benchmark/#hello-world-microbenchmark-io-thread-or-worker-thread\" rel=\"nofollow noreferrer\">article</a><br/>\nThe statement &quot;the request is handled by the reactive engine on the IO thread&quot; got me thinking on the question above</p>\n"},{"tags":["java","multithreading","concurrency"],"comments":[{"owner":{"account_id":29634,"reputation":12494,"user_id":80243,"accept_rate":46,"display_name":"L̲̳o̲̳̳n̲̳̳g̲̳̳p̲̳o̲̳̳k̲̳̳e̲̳̳"},"score":19,"creation_date":1364694975,"post_id":461896,"comment_id":22339825,"body_markdown":"Why is this closed? This is useful both for other programmers begging concurrency in Java, and to have an idea of what classes of concurrency defects are being observed the most by other Java developers.","body":"Why is this closed? This is useful both for other programmers begging concurrency in Java, and to have an idea of what classes of concurrency defects are being observed the most by other Java developers."},{"owner":{"account_id":19462,"reputation":102762,"user_id":45664,"accept_rate":91,"display_name":"Andrzej Doyle"},"score":0,"creation_date":1369738580,"post_id":461896,"comment_id":24195291,"body_markdown":"@Longpoke The closure message explains why it&#39;s closed.  This isn&#39;t a question with a specific &quot;correct&quot; answer, it&#39;s more of a poll/list question.  And Stack Overflow does not intend to host these sort of questions.  If you disagree with that policy, you may want to discuss it on [meta](http://meta.stackoverflow.com).","body":"@Longpoke The closure message explains why it&#39;s closed.  This isn&#39;t a question with a specific &quot;correct&quot; answer, it&#39;s more of a poll/list question.  And Stack Overflow does not intend to host these sort of questions.  If you disagree with that policy, you may want to discuss it on <a href=\"http://meta.stackoverflow.com\">meta</a>."},{"owner":{"account_id":3916476,"reputation":159,"user_id":3240186,"display_name":"Craig Manson"},"score":8,"creation_date":1393950937,"post_id":461896,"comment_id":33661155,"body_markdown":"I guess the community disagrees as this article&#39;s getting 100+ views/day! I&#39;ve found it very useful as I&#39;m involved with the development of a static analysis tool specifically designed to fix concurrency issues http://www.contemplateltd.com/threadsafe. Having a bank of commonly encountered concurrency problems has been great for testing and improving ThreadSafe.","body":"I guess the community disagrees as this article&#39;s getting 100+ views/day! I&#39;ve found it very useful as I&#39;m involved with the development of a static analysis tool specifically designed to fix concurrency issues <a href=\"http://www.contemplateltd.com/threadsafe\" rel=\"nofollow noreferrer\">contemplateltd.com/threadsafe</a>. Having a bank of commonly encountered concurrency problems has been great for testing and improving ThreadSafe."},{"owner":{"account_id":326925,"reputation":14868,"user_id":648955,"accept_rate":62,"display_name":"leventov"},"score":0,"creation_date":1567355322,"post_id":461896,"comment_id":101932878,"body_markdown":"[Code review checklist for Java Concurrency](https://github.com/code-review-checklists/java-concurrency) digests most of the pitfalls mentioned in the answers to this question in a form convenient for day-to-day code reviews.","body":"<a href=\"https://github.com/code-review-checklists/java-concurrency\" rel=\"nofollow noreferrer\">Code review checklist for Java Concurrency</a> digests most of the pitfalls mentioned in the answers to this question in a form convenient for day-to-day code reviews."}],"answers":[{"comments":[{"owner":{"account_id":14176,"reputation":4146,"user_id":28946,"accept_rate":84,"display_name":"Jen S."},"score":19,"creation_date":1232468899,"post_id":461910,"comment_id":280654,"body_markdown":"There is an IDEA inspection for this called &quot;Synchronization on non-final field unlikely to have useful semantics&quot;. Very nice.","body":"There is an IDEA inspection for this called &quot;Synchronization on non-final field unlikely to have useful semantics&quot;. Very nice."},{"owner":{"account_id":4938,"reputation":69433,"user_id":7671,"accept_rate":70,"display_name":"Alex Miller"},"score":8,"creation_date":1232469951,"post_id":461910,"comment_id":280707,"body_markdown":"Ha...now that&#39;s a tortured description.  &quot;unlikely to have useful semantics&quot; could better be described as &quot;most likely broken&quot;.  :)","body":"Ha...now that&#39;s a tortured description.  &quot;unlikely to have useful semantics&quot; could better be described as &quot;most likely broken&quot;.  :)"},{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":0,"creation_date":1232470502,"post_id":461910,"comment_id":280730,"body_markdown":"I think it was Bitter Java that had this in its ReadWriteLock. Fortunately we now have java.util.concurrency.locks, and Doug is a bit more on the ball.","body":"I think it was Bitter Java that had this in its ReadWriteLock. Fortunately we now have java.util.concurrency.locks, and Doug is a bit more on the ball."},{"owner":{"account_id":8580,"reputation":4513,"user_id":15529,"display_name":"gimpf"},"score":0,"creation_date":1232724025,"post_id":461910,"comment_id":290790,"body_markdown":"I also have seen this problem often.  Only sync on final objects, for that matter.  FindBugs et al. help, yes.","body":"I also have seen this problem often.  Only sync on final objects, for that matter.  FindBugs et al. help, yes."},{"owner":{"account_id":7944,"reputation":21068,"user_id":14007,"accept_rate":92,"display_name":"Alex Beardsley"},"score":0,"creation_date":1232978831,"post_id":461910,"comment_id":296688,"body_markdown":"is this only a problem during assignment?  (see @Alex Miller&#39;s example below with a Map) Would that map example have this same problem as well?","body":"is this only a problem during assignment?  (see @Alex Miller&#39;s example below with a Map) Would that map example have this same problem as well?"},{"owner":{"account_id":4938,"reputation":69433,"user_id":7671,"accept_rate":70,"display_name":"Alex Miller"},"score":0,"creation_date":1233074596,"post_id":461910,"comment_id":300598,"body_markdown":"@Nalandial - not sure what you&#39;re asking.  It&#39;s not a problem to mutate the state of the object under assignment; that&#39;s very common.  It&#39;s a problem to change the assignment so that different threads might be synchronizing on different objects though, which is what I was getting at here.","body":"@Nalandial - not sure what you&#39;re asking.  It&#39;s not a problem to mutate the state of the object under assignment; that&#39;s very common.  It&#39;s a problem to change the assignment so that different threads might be synchronizing on different objects though, which is what I was getting at here."},{"owner":{"account_id":44379,"reputation":14328,"user_id":130224,"accept_rate":84,"display_name":"reprogrammer"},"score":0,"creation_date":1283874321,"post_id":461910,"comment_id":3850532,"body_markdown":"Do you know of any open source project containing this bug in some version of it? I&#39;m looking for concrete examples of this bug in real world software.","body":"Do you know of any open source project containing this bug in some version of it? I&#39;m looking for concrete examples of this bug in real world software."},{"owner":{"account_id":4938,"reputation":69433,"user_id":7671,"accept_rate":70,"display_name":"Alex Miller"},"score":0,"creation_date":1283895464,"post_id":461910,"comment_id":3854027,"body_markdown":"@reprogrammer - Nope. If I did, I would tell them to fix it. :)","body":"@reprogrammer - Nope. If I did, I would tell them to fix it. :)"},{"owner":{"account_id":8396,"reputation":24329,"user_id":15108,"accept_rate":89,"display_name":"boutta"},"score":0,"creation_date":1295010816,"post_id":461910,"comment_id":5174781,"body_markdown":"I just removed it from my software, after reading this.","body":"I just removed it from my software, after reading this."},{"owner":{"account_id":267986,"reputation":10096,"user_id":556493,"display_name":"yingted"},"score":0,"creation_date":1331866779,"post_id":461910,"comment_id":12374293,"body_markdown":"I&#39;ve actually intentionally used this construct before. Something along the lines of `synchronized(locks){key=locks.get(key);}synchronized(key){objects.put(key,modify(objects.get(key)));}`, of course with the appropriate synchronization on `objects`.","body":"I&#39;ve actually intentionally used this construct before. Something along the lines of <code>synchronized(locks){key=locks.get(key);}synchronized(key){ob&zwnj;&#8203;jects.put(key,modify&zwnj;&#8203;(objects.get(key)));&zwnj;&#8203;}</code>, of course with the appropriate synchronization on <code>objects</code>."}],"tags":[],"owner":{"account_id":4938,"reputation":69433,"user_id":7671,"accept_rate":70,"display_name":"Alex Miller"},"comment_count":10,"down_vote_count":0,"up_vote_count":65,"is_accepted":false,"score":65,"last_activity_date":1232467345,"creation_date":1232467345,"answer_id":461910,"question_id":461896,"body_markdown":"One classic problem is changing the object you&#39;re synchronizing on while synchronizing on it:\r\n\r\n    synchronized(foo) {\r\n      foo = ...\r\n    }\r\n\r\nOther concurrent threads are then synchronizing on a different object and this block does not provide the mutual exclusion you expect.","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>One classic problem is changing the object you're synchronizing on while synchronizing on it:</p>\n\n<pre><code>synchronized(foo) {\n  foo = ...\n}\n</code></pre>\n\n<p>Other concurrent threads are then synchronizing on a different object and this block does not provide the mutual exclusion you expect.</p>\n"},{"comments":[{"owner":{"account_id":8580,"reputation":4513,"user_id":15529,"display_name":"gimpf"},"score":0,"creation_date":1232724500,"post_id":461913,"comment_id":290819,"body_markdown":"Well, sometimes, sometimes not.  If it would just be that easy...","body":"Well, sometimes, sometimes not.  If it would just be that easy..."},{"owner":{"account_id":13068,"reputation":2596,"user_id":26056,"accept_rate":0,"display_name":"kohlerm"},"score":0,"creation_date":1233143363,"post_id":461913,"comment_id":303608,"body_markdown":"Assuming that threading helps at all to increase performance for the problem given, it does always degrade performance as soon as more than one thread accesses code that is protected by the lock.","body":"Assuming that threading helps at all to increase performance for the problem given, it does always degrade performance as soon as more than one thread accesses code that is protected by the lock."}],"tags":[],"owner":{"account_id":13068,"reputation":2596,"user_id":26056,"accept_rate":0,"display_name":"kohlerm"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1232467381,"creation_date":1232467381,"answer_id":461913,"question_id":461896,"body_markdown":"Use of a global object such as a static variable for locking. \r\n\r\nThis leads to very bad performance because of contention. ","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>Use of a global object such as a static variable for locking. </p>\n\n<p>This leads to very bad performance because of contention. </p>\n"},{"comments":[{"owner":{"account_id":4938,"reputation":69433,"user_id":7671,"accept_rate":70,"display_name":"Alex Miller"},"score":0,"creation_date":1232467714,"post_id":461922,"comment_id":280591,"body_markdown":"Can you split the last one out into a separate answer?  Let&#39;s keep it 1 per post.  These are two really good ones.","body":"Can you split the last one out into a separate answer?  Let&#39;s keep it 1 per post.  These are two really good ones."}],"tags":[],"owner":{"account_id":17822,"reputation":39726,"user_id":40310,"accept_rate":62,"display_name":"Dave Ray"},"comment_count":1,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1232467904,"creation_date":1232467496,"answer_id":461922,"question_id":461896,"body_markdown":"My biggest problem has always been deadlocks, especially caused by listeners that are fired with a lock held.  In these cases, it&#39;s really easy to get inverted locking between two threads. In my case, between a simulation running in one thread and a visualization of the simulation running in the UI thread.\r\n\r\nEDIT: Moved second part to separate answer.\r\n","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>My biggest problem has always been deadlocks, especially caused by listeners that are fired with a lock held.  In these cases, it's really easy to get inverted locking between two threads. In my case, between a simulation running in one thread and a visualization of the simulation running in the UI thread.</p>\n\n<p>EDIT: Moved second part to separate answer.</p>\n"},{"tags":[],"owner":{"account_id":4938,"reputation":69433,"user_id":7671,"accept_rate":70,"display_name":"Alex Miller"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1232468573,"creation_date":1232467670,"answer_id":461947,"question_id":461896,"body_markdown":"Unbalanced synchronization, particularly against Maps seems to be a fairly common problem.  Many people believe that synchronizing on puts to a Map (not a ConcurrentMap, but say a HashMap) and not synchronizing on gets is sufficient.  This however can lead to an infinite loop during re-hash.  \r\n\r\nThe same problem (partial synchronization) can occur anywhere you have shared state with reads and writes however.  ","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>Unbalanced synchronization, particularly against Maps seems to be a fairly common problem.  Many people believe that synchronizing on puts to a Map (not a ConcurrentMap, but say a HashMap) and not synchronizing on gets is sufficient.  This however can lead to an infinite loop during re-hash.  </p>\n\n<p>The same problem (partial synchronization) can occur anywhere you have shared state with reads and writes however.  </p>\n"},{"comments":[{"owner":{"account_id":19462,"reputation":102762,"user_id":45664,"accept_rate":91,"display_name":"Andrzej Doyle"},"score":0,"creation_date":1232532179,"post_id":461961,"comment_id":283106,"body_markdown":"Are you implying that you run into *more* problems now that java.util.concurrent is available?","body":"Are you implying that you run into <i>more</i> problems now that java.util.concurrent is available?"}],"tags":[],"owner":{"account_id":21873,"reputation":25813,"user_id":53495,"display_name":"Brian Clapper"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1232467911,"creation_date":1232467911,"answer_id":461961,"question_id":461896,"body_markdown":"Honesly? Prior to the advent of `java.util.concurrent`, the most common problem I routinely ran into was what I call &quot;thread-thrashing&quot;: Applications that use threads for concurrency, but spawn too many of them and end up thrashing.","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>Honesly? Prior to the advent of <code>java.util.concurrent</code>, the most common problem I routinely ran into was what I call \"thread-thrashing\": Applications that use threads for concurrency, but spawn too many of them and end up thrashing.</p>\n"},{"comments":[{"owner":{"account_id":1108,"reputation":9901,"user_id":1471,"accept_rate":64,"display_name":"Tim Frey"},"score":8,"creation_date":1232997663,"post_id":461964,"comment_id":297678,"body_markdown":"Unlike most concurrency problems, isn&#39;t this one easy to find?  At least you get an IllegalMonitorStateException here...","body":"Unlike most concurrency problems, isn&#39;t this one easy to find?  At least you get an IllegalMonitorStateException here..."},{"owner":{"account_id":17822,"reputation":39726,"user_id":40310,"accept_rate":62,"display_name":"Dave Ray"},"score":0,"creation_date":1233015317,"post_id":461964,"comment_id":298642,"body_markdown":"Thankfully it is very easy to find ... but it&#39;s still a dumb mistake that wastes my time more than it should :)","body":"Thankfully it is very easy to find ... but it&#39;s still a dumb mistake that wastes my time more than it should :)"}],"tags":[],"owner":{"account_id":17822,"reputation":39726,"user_id":40310,"accept_rate":62,"display_name":"Dave Ray"},"comment_count":2,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1232467933,"creation_date":1232467933,"answer_id":461964,"question_id":461896,"body_markdown":"The dumbest mistake I frequently make is forgetting to synchronize before calling notify() or wait() on an object.","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>The dumbest mistake I frequently make is forgetting to synchronize before calling notify() or wait() on an object.</p>\n"},{"comments":[{"owner":{"account_id":4938,"reputation":69433,"user_id":7671,"accept_rate":70,"display_name":"Alex Miller"},"score":0,"creation_date":1232468132,"post_id":461977,"comment_id":280620,"body_markdown":"No, that&#39;s totally what I&#39;m looking for.  Thanks!","body":"No, that&#39;s totally what I&#39;m looking for.  Thanks!"}],"tags":[],"owner":{"account_id":9757,"reputation":45128,"user_id":18154,"accept_rate":100,"display_name":"Fabian Steeg"},"comment_count":1,"down_vote_count":2,"up_vote_count":39,"is_accepted":false,"score":37,"last_activity_date":1232468063,"creation_date":1232468063,"answer_id":461977,"question_id":461896,"body_markdown":"Though probably not exactly what you are asking for, the most frequent concurrency-related problem I&#39;ve encountered (probably because it comes up in normal single-threaded code) is a\r\n\r\n   `java.util.ConcurrentModificationException`\r\n\r\ncaused by things like:\r\n\r\n    List&lt;String&gt; list = new ArrayList&lt;String&gt;(Arrays.asList(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;));\r\n    for (String string : list) { list.remove(string); }","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>Though probably not exactly what you are asking for, the most frequent concurrency-related problem I've encountered (probably because it comes up in normal single-threaded code) is a</p>\n\n<p><code>java.util.ConcurrentModificationException</code></p>\n\n<p>caused by things like:</p>\n\n<pre><code>List&lt;String&gt; list = new ArrayList&lt;String&gt;(Arrays.asList(\"a\", \"b\", \"c\"));\nfor (String string : list) { list.remove(string); }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3958,"reputation":4898,"user_id":5814,"display_name":"Brendan Cashman"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1232468137,"creation_date":1232468137,"answer_id":461984,"question_id":461896,"body_markdown":"Multiple objects that are lock protected but are commonly accessed in succession. We&#39;ve run into a couple of cases where the locks are obtained by different code in different orders, resulting in deadlock. ","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>Multiple objects that are lock protected but are commonly accessed in succession. We've run into a couple of cases where the locks are obtained by different code in different orders, resulting in deadlock. </p>\n"},{"comments":[{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":6,"creation_date":1232469780,"post_id":461990,"comment_id":280698,"body_markdown":"Or better, use a ConcurrentHashMap and putIfAbsent.","body":"Or better, use a ConcurrentHashMap and putIfAbsent."}],"tags":[],"owner":{"account_id":17822,"reputation":39726,"user_id":40310,"accept_rate":62,"display_name":"Dave Ray"},"comment_count":1,"down_vote_count":0,"up_vote_count":48,"is_accepted":false,"score":48,"last_activity_date":1528941340,"creation_date":1232468203,"answer_id":461990,"question_id":461896,"body_markdown":"Not properly **synchronizing** on objects returned by `Collections.synchronizedXXX()`, especially during iteration or multiple operations:\r\n\r\n    Map&lt;String, String&gt; map = Collections.synchronizedMap(new HashMap&lt;String, String&gt;());\r\n    \r\n    ...\r\n    \r\n    if(!map.containsKey(&quot;foo&quot;))\r\n        map.put(&quot;foo&quot;, &quot;bar&quot;);\r\n\r\nThat&#39;s **wrong**. Despite single operations being `synchronized`, state of map between invoking `contains` and `put` can be changed by another thread. It should be:\r\n\r\n    synchronized(map) {\r\n        if(!map.containsKey(&quot;foo&quot;))\r\n            map.put(&quot;foo&quot;, &quot;bar&quot;);\r\n    }\r\n\r\nOr with a `ConcurrentMap` implementation:\r\n\r\n    map.putIfAbsent(&quot;foo&quot;, &quot;bar&quot;);\r\n","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>Not properly <strong>synchronizing</strong> on objects returned by <code>Collections.synchronizedXXX()</code>, especially during iteration or multiple operations:</p>\n\n<pre><code>Map&lt;String, String&gt; map = Collections.synchronizedMap(new HashMap&lt;String, String&gt;());\n\n...\n\nif(!map.containsKey(\"foo\"))\n    map.put(\"foo\", \"bar\");\n</code></pre>\n\n<p>That's <strong>wrong</strong>. Despite single operations being <code>synchronized</code>, state of map between invoking <code>contains</code> and <code>put</code> can be changed by another thread. It should be:</p>\n\n<pre><code>synchronized(map) {\n    if(!map.containsKey(\"foo\"))\n        map.put(\"foo\", \"bar\");\n}\n</code></pre>\n\n<p>Or with a <code>ConcurrentMap</code> implementation:</p>\n\n<pre><code>map.putIfAbsent(\"foo\", \"bar\");\n</code></pre>\n"},{"comments":[{"owner":{"account_id":44379,"reputation":14328,"user_id":130224,"accept_rate":84,"display_name":"reprogrammer"},"score":0,"creation_date":1283874272,"post_id":461994,"comment_id":3850527,"body_markdown":"Do you know of any open source project containing this bug in some version of it? I&#39;m looking for concrete examples of this bug in real world software.","body":"Do you know of any open source project containing this bug in some version of it? I&#39;m looking for concrete examples of this bug in real world software."}],"tags":[],"owner":{"account_id":4938,"reputation":69433,"user_id":7671,"accept_rate":70,"display_name":"Alex Miller"},"comment_count":1,"down_vote_count":0,"up_vote_count":50,"is_accepted":false,"score":50,"last_activity_date":1675799234,"creation_date":1232468256,"answer_id":461994,"question_id":461896,"body_markdown":"A common problem is using classes like `Calendar` and `SimpleDateFormat` from multiple threads (often by caching them in a static variable) without synchronization.  These classes are not thread-safe so multi-threaded access will ultimately cause strange problems with inconsistent state.","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>A common problem is using classes like <code>Calendar</code> and <code>SimpleDateFormat</code> from multiple threads (often by caching them in a static variable) without synchronization.  These classes are not thread-safe so multi-threaded access will ultimately cause strange problems with inconsistent state.</p>\n"},{"tags":[],"owner":{"account_id":4938,"reputation":69433,"user_id":7671,"accept_rate":70,"display_name":"Alex Miller"},"comment_count":0,"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1232468755,"creation_date":1232468755,"answer_id":462035,"question_id":461896,"body_markdown":"Forgetting to wait() (or Condition.await()) in a loop, checking that the waiting condition is actually true.  Without this, you run into bugs from spurious wait() wakeups.  Canonical usage should be:\r\n\r\n     synchronized (obj) {\r\n         while (&lt;condition does not hold&gt;) {\r\n             obj.wait();\r\n         }\r\n         // do stuff based on condition being true\r\n     }\r\n","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>Forgetting to wait() (or Condition.await()) in a loop, checking that the waiting condition is actually true.  Without this, you run into bugs from spurious wait() wakeups.  Canonical usage should be:</p>\n\n<pre><code> synchronized (obj) {\n     while (&lt;condition does not hold&gt;) {\n         obj.wait();\n     }\n     // do stuff based on condition being true\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14176,"reputation":4146,"user_id":28946,"accept_rate":84,"display_name":"Jen S."},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1232469084,"creation_date":1232469084,"answer_id":462050,"question_id":461896,"body_markdown":"Race conditions during an object&#39;s finalize/release/shutdown/destructor method and normal invocations. \r\n\r\nFrom Java, I do a lot of integration with resources that need to be closed, such as COM objects or Flash players. Developers always forget to do this properly and end up having a thread call an object that has been shutdown. ","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>Race conditions during an object's finalize/release/shutdown/destructor method and normal invocations. </p>\n\n<p>From Java, I do a lot of integration with resources that need to be closed, such as COM objects or Flash players. Developers always forget to do this properly and end up having a thread call an object that has been shutdown. </p>\n"},{"comments":[{"owner":{"account_id":4938,"reputation":69433,"user_id":7671,"accept_rate":70,"display_name":"Alex Miller"},"score":0,"creation_date":1232469496,"post_id":462058,"comment_id":280687,"body_markdown":"While this is certainly a problem, it is not a concurrency bug as requested in the original question.","body":"While this is certainly a problem, it is not a concurrency bug as requested in the original question."}],"tags":[],"owner":{"account_id":6118,"reputation":2882,"user_id":10166,"accept_rate":50,"display_name":"Javamann"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1232469238,"creation_date":1232469238,"answer_id":462058,"question_id":461896,"body_markdown":"The biggest problem I have run across is developers that add multi-threading support as an afterthought. ","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>The biggest problem I have run across is developers that add multi-threading support as an afterthought. </p>\n"},{"comments":[{"owner":{"account_id":15307,"reputation":17620,"user_id":32174,"accept_rate":71,"display_name":"Julien Chastang"},"score":3,"creation_date":1232473386,"post_id":462095,"comment_id":280863,"body_markdown":"Yes, indeed! Mutable statics break thread confinement. Surprisingly, I never found anything about this pitfall in either JCiP or CPJ.","body":"Yes, indeed! Mutable statics break thread confinement. Surprisingly, I never found anything about this pitfall in either JCiP or CPJ."},{"owner":{"account_id":88257,"reputation":5626,"user_id":2559313,"accept_rate":86,"display_name":"gtrak"},"score":0,"creation_date":1294695606,"post_id":462095,"comment_id":5122635,"body_markdown":"I would hope this is obvious to folks doing concurrent programming.  Global state should be the first place to check for thread-safety.","body":"I would hope this is obvious to folks doing concurrent programming.  Global state should be the first place to check for thread-safety."},{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":1,"creation_date":1294696379,"post_id":462095,"comment_id":5122780,"body_markdown":"@Gary Thing is, they aren&#39;t thinking that they are doing concurrent programming.","body":"@Gary Thing is, they aren&#39;t thinking that they are doing concurrent programming."}],"tags":[],"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"comment_count":3,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1232469915,"creation_date":1232469915,"answer_id":462095,"question_id":461896,"body_markdown":"Thinking you are writing single-threaded code, but using mutable statics (including singletons). Obviously they will be shared between threads. This happens surprisingly often.","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>Thinking you are writing single-threaded code, but using mutable statics (including singletons). Obviously they will be shared between threads. This happens surprisingly often.</p>\n"},{"tags":[],"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1632219484,"creation_date":1232470113,"answer_id":462108,"question_id":461896,"body_markdown":"Not realising the `java.awt.EventQueue.invokeAndWait` acts as if it holds a lock (exclusive access to the Event Dispatch Thread, EDT). The great thing about deadlocks is that even if that happens rarely you can grab a stack trace with jstack or the like. I&#39;ve seen this in a number of widely used programs (a fix to a problem I have only seen occur once in Netbeans should be included in the next release).\r\n\r\n","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>Not realising the <code>java.awt.EventQueue.invokeAndWait</code> acts as if it holds a lock (exclusive access to the Event Dispatch Thread, EDT). The great thing about deadlocks is that even if that happens rarely you can grab a stack trace with jstack or the like. I've seen this in a number of widely used programs (a fix to a problem I have only seen occur once in Netbeans should be included in the next release).</p>\n"},{"tags":[],"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1232470389,"creation_date":1232470389,"answer_id":462131,"question_id":461896,"body_markdown":"Not realising that the `this` in an inner class is not the `this` of the outer class. Typically in an anonymous inner class that implements `Runnable`. The root problem is that because synchronisation is part of all `Object`s there is effectively no static type checking. I&#39;ve seen this at least twice on usenet, and it also appears in Brian Goetz&#39;z Java Concurrency in Practice.\r\n\r\nBGGA closures don&#39;t suffer from this as there is no `this` for the closure (`this` references the outer class). If you use non-`this` objects as locks then it gets around this problem and others.","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>Not realising that the <code>this</code> in an inner class is not the <code>this</code> of the outer class. Typically in an anonymous inner class that implements <code>Runnable</code>. The root problem is that because synchronisation is part of all <code>Object</code>s there is effectively no static type checking. I've seen this at least twice on usenet, and it also appears in Brian Goetz'z Java Concurrency in Practice.</p>\n\n<p>BGGA closures don't suffer from this as there is no <code>this</code> for the closure (<code>this</code> references the outer class). If you use non-<code>this</code> objects as locks then it gets around this problem and others.</p>\n"},{"comments":[{"owner":{"account_id":4400,"reputation":38401,"user_id":6583,"accept_rate":90,"display_name":"Epaga"},"score":0,"creation_date":1233737100,"post_id":462149,"comment_id":324550,"body_markdown":"one of those answers I wish I could give more than one point for","body":"one of those answers I wish I could give more than one point for"},{"owner":{"account_id":1481793,"reputation":3085,"user_id":1391004,"accept_rate":45,"display_name":"mjj1409"},"score":3,"creation_date":1452735573,"post_id":462149,"comment_id":57305554,"body_markdown":"EDT = Event Dispatch Thread","body":"EDT = Event Dispatch Thread"}],"tags":[],"owner":{"account_id":17807,"reputation":4422,"user_id":40257,"accept_rate":80,"display_name":"Eric Burke"},"comment_count":2,"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1232470875,"creation_date":1232470875,"answer_id":462149,"question_id":461896,"body_markdown":"The most common bug we see where I work is programmers perform long operations, like server calls, on the EDT, locking up the GUI for a few seconds and making the app unresponsive.","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>The most common bug we see where I work is programmers perform long operations, like server calls, on the EDT, locking up the GUI for a few seconds and making the app unresponsive.</p>\n"},{"comments":[{"owner":{"account_id":4938,"reputation":69433,"user_id":7671,"accept_rate":70,"display_name":"Alex Miller"},"score":0,"creation_date":1232471969,"post_id":462170,"comment_id":280802,"body_markdown":"Yep, and there are good tools to handle this now with handlers.","body":"Yep, and there are good tools to handle this now with handlers."},{"owner":{"account_id":64336,"reputation":12440,"user_id":189974,"accept_rate":96,"display_name":"Abhijeet Kashnia"},"score":3,"creation_date":1288613970,"post_id":462170,"comment_id":4372176,"body_markdown":"Could you post links to any articles or references that explain this in greater detail?","body":"Could you post links to any articles or references that explain this in greater detail?"}],"tags":[],"owner":{"account_id":17807,"reputation":4422,"user_id":40257,"accept_rate":80,"display_name":"Eric Burke"},"comment_count":2,"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1232471190,"creation_date":1232471190,"answer_id":462170,"question_id":461896,"body_markdown":"Another common bug is poor exception handling. When a background thread throws an exception, if you don&#39;t handle it properly, you might not see the stack trace at all. Or perhaps your background task stops running and never starts again because you failed to handle the exception.","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>Another common bug is poor exception handling. When a background thread throws an exception, if you don't handle it properly, you might not see the stack trace at all. Or perhaps your background task stops running and never starts again because you failed to handle the exception.</p>\n"},{"comments":[{"owner":{"account_id":21409,"reputation":3993,"user_id":52028,"display_name":"Robin"},"score":7,"creation_date":1232528355,"post_id":462174,"comment_id":282973,"body_markdown":"The enum singleton pattern solves all of these problems (see Josh Bloch&#39;s comments on this). The knowledge of its existence should be more widespread among Java programmers.","body":"The enum singleton pattern solves all of these problems (see Josh Bloch&#39;s comments on this). The knowledge of its existence should be more widespread among Java programmers."},{"owner":{"account_id":13054,"reputation":2642,"user_id":26010,"display_name":"Dov Wasserman"},"score":0,"creation_date":1233253971,"post_id":462174,"comment_id":308493,"body_markdown":"I still have yet to run across a single case where lazy initialization of a singleton was actually appropriate. And if it is, just declare the method synchronized.","body":"I still have yet to run across a single case where lazy initialization of a singleton was actually appropriate. And if it is, just declare the method synchronized."},{"owner":{"account_id":30604,"reputation":2049,"user_id":83503,"accept_rate":89,"display_name":"Irfan Zulfiqar"},"score":3,"creation_date":1238152675,"post_id":462174,"comment_id":502905,"body_markdown":"This is what I use for Lazy initialization of Singleton classes. Also no synchronization required as this is guaranteed by java implicitly.\n\nclass Foo {\n  static class Holder {\n    static Foo foo = new Foo(); \n  }\n  static Foo getInstance() {\n    return Holder.foo;\n  }\n}","body":"This is what I use for Lazy initialization of Singleton classes. Also no synchronization required as this is guaranteed by java implicitly.  class Foo {   static class Holder {     static Foo foo = new Foo();    }   static Foo getInstance() {     return Holder.foo;   } }"},{"owner":{"account_id":11959,"reputation":17676,"user_id":23309,"accept_rate":58,"display_name":"Chris R"},"score":0,"creation_date":1243543926,"post_id":462174,"comment_id":731127,"body_markdown":"Irfan, that&#39;s called Pugh&#39;s method, from what I recall","body":"Irfan, that&#39;s called Pugh&#39;s method, from what I recall"},{"owner":{"account_id":3001,"reputation":138707,"user_id":4249,"accept_rate":84,"display_name":"matt b"},"score":0,"creation_date":1244832882,"post_id":462174,"comment_id":796925,"body_markdown":"@Robin, isn&#39;t it simpler to just use a static initializer? Those are always guaranteed to run synchronized.","body":"@Robin, isn&#39;t it simpler to just use a static initializer? Those are always guaranteed to run synchronized."},{"owner":{"account_id":22968,"reputation":476,"user_id":57169,"display_name":"Kirk Wylie"},"score":0,"creation_date":1249811585,"post_id":462174,"comment_id":1077794,"body_markdown":"@Matt, not if you want/need lazy initialization. However, in a DI context, usually you would just let your IoC container solve the problem for you. Static initializers don&#39;t support lazy initialization (where you don&#39;t know if you want to spend the cost in the first place), or late initialization (where you can&#39;t guarantee the ordering of a number of interdependent initialization).","body":"@Matt, not if you want/need lazy initialization. However, in a DI context, usually you would just let your IoC container solve the problem for you. Static initializers don&#39;t support lazy initialization (where you don&#39;t know if you want to spend the cost in the first place), or late initialization (where you can&#39;t guarantee the ordering of a number of interdependent initialization)."},{"owner":{"account_id":87769,"reputation":34162,"user_id":243225,"accept_rate":63,"display_name":"fhucho"},"score":0,"creation_date":1319364630,"post_id":462174,"comment_id":9595090,"body_markdown":"Why shouldn&#39;t I just make the whole getInstance() synchronized?","body":"Why shouldn&#39;t I just make the whole getInstance() synchronized?"},{"owner":{"account_id":391957,"reputation":8860,"user_id":752918,"accept_rate":100,"display_name":"Ibrahim Arief"},"score":0,"creation_date":1321447896,"post_id":462174,"comment_id":10006129,"body_markdown":"@fhucho, because methods that had been synchronized carries a large overhead for every access to that particular method. You only need to synchronize the singleton creation to ensure only one instance of the class in created. If you synchronize getInstance(), there would also be an unnecessary overhead every time the singleton class is accessed.","body":"@fhucho, because methods that had been synchronized carries a large overhead for every access to that particular method. You only need to synchronize the singleton creation to ensure only one instance of the class in created. If you synchronize getInstance(), there would also be an unnecessary overhead every time the singleton class is accessed."},{"owner":{"account_id":87769,"reputation":34162,"user_id":243225,"accept_rate":63,"display_name":"fhucho"},"score":0,"creation_date":1321463686,"post_id":462174,"comment_id":10011826,"body_markdown":"@IbrahimArief thanks... the question is whether the performance gain is worth the code simplicity and clarity loss.","body":"@IbrahimArief thanks... the question is whether the performance gain is worth the code simplicity and clarity loss."},{"owner":{"account_id":391957,"reputation":8860,"user_id":752918,"accept_rate":100,"display_name":"Ibrahim Arief"},"score":0,"creation_date":1321503560,"post_id":462174,"comment_id":10021255,"body_markdown":"@fhucho, that depends on your use case, of course. Synchronized methods are generally several times slower than it&#39;s unsynchronized variants. There are some myth saying that synchronized method call is as much as 50 times slower than an unsynchronized method call, but modern JVMs lower this number to be more around 2-10 times in most cases. Still quite hefty, if you ask me. Check http://www.ibm.com/developerworks/java/library/j-threads1/index.html for further reading.","body":"@fhucho, that depends on your use case, of course. Synchronized methods are generally several times slower than it&#39;s unsynchronized variants. There are some myth saying that synchronized method call is as much as 50 times slower than an unsynchronized method call, but modern JVMs lower this number to be more around 2-10 times in most cases. Still quite hefty, if you ask me. Check <a href=\"http://www.ibm.com/developerworks/java/library/j-threads1/index.html\" rel=\"nofollow noreferrer\">ibm.com/developerworks/java/library/j-threads1/index.html</a> for further reading."}],"tags":[],"owner":{"account_id":22968,"reputation":476,"user_id":57169,"display_name":"Kirk Wylie"},"comment_count":10,"down_vote_count":0,"up_vote_count":47,"is_accepted":false,"score":47,"last_activity_date":1232471212,"creation_date":1232471212,"answer_id":462174,"question_id":461896,"body_markdown":"Double-Checked Locking. By and large.\r\n\r\nThe paradigm, which I started learning the problems of when I was working at BEA, is that people will check a singleton in the following way:\r\n\r\n    public Class MySingleton {\r\n      private static MySingleton s_instance;\r\n      public static MySingleton getInstance() {\r\n        if(s_instance == null) {\r\n          synchronized(MySingleton.class) { s_instance = new MySingleton(); }\r\n        }\r\n        return s_instance;\r\n      }\r\n    }\r\n\r\nThis never works, because another thread might have gotten into the synchronized block and s_instance is no longer null. So the natural change is then to make it:\r\n\r\n      public static MySingleton getInstance() {\r\n        if(s_instance == null) {\r\n          synchronized(MySingleton.class) {\r\n            if(s_instance == null) s_instance = new MySingleton();\r\n          }\r\n        }\r\n        return s_instance;\r\n      }\r\n\r\nThat doesn&#39;t work either, because the Java Memory Model doesn&#39;t support it. You need to declare s_instance as volatile to make it work, and even then it only works on Java 5.\r\n\r\nPeople that aren&#39;t familiar with the intricacies of the Java Memory Model mess this up *all the time*.","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>Double-Checked Locking. By and large.</p>\n\n<p>The paradigm, which I started learning the problems of when I was working at BEA, is that people will check a singleton in the following way:</p>\n\n<pre><code>public Class MySingleton {\n  private static MySingleton s_instance;\n  public static MySingleton getInstance() {\n    if(s_instance == null) {\n      synchronized(MySingleton.class) { s_instance = new MySingleton(); }\n    }\n    return s_instance;\n  }\n}\n</code></pre>\n\n<p>This never works, because another thread might have gotten into the synchronized block and s_instance is no longer null. So the natural change is then to make it:</p>\n\n<pre><code>  public static MySingleton getInstance() {\n    if(s_instance == null) {\n      synchronized(MySingleton.class) {\n        if(s_instance == null) s_instance = new MySingleton();\n      }\n    }\n    return s_instance;\n  }\n</code></pre>\n\n<p>That doesn't work either, because the Java Memory Model doesn't support it. You need to declare s_instance as volatile to make it work, and even then it only works on Java 5.</p>\n\n<p>People that aren't familiar with the intricacies of the Java Memory Model mess this up <em>all the time</em>.</p>\n"},{"comments":[{"owner":{"account_id":4938,"reputation":69433,"user_id":7671,"accept_rate":70,"display_name":"Alex Miller"},"score":0,"creation_date":1232471918,"post_id":462179,"comment_id":280798,"body_markdown":"This one bit me this week.  I had destroy() but did not do a good job defining the init() side resulting in some races.","body":"This one bit me this week.  I had destroy() but did not do a good job defining the init() side resulting in some races."}],"tags":[],"owner":{"account_id":17807,"reputation":4422,"user_id":40257,"accept_rate":80,"display_name":"Eric Burke"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1232471327,"creation_date":1232471327,"answer_id":462179,"question_id":461896,"body_markdown":"Failure to provide clearly defined lifecycle methods on objects that manage long-running threads. I like to create pairs of methods named init() and destroy(). It is also important to actually call destroy() so your app can exit gracefully.","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>Failure to provide clearly defined lifecycle methods on objects that manage long-running threads. I like to create pairs of methods named init() and destroy(). It is also important to actually call destroy() so your app can exit gracefully.</p>\n"},{"tags":[],"owner":{"account_id":20719,"reputation":1895,"user_id":49786,"accept_rate":100,"display_name":"Ludwig Wensauer"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1232472445,"creation_date":1232472445,"answer_id":462259,"question_id":461896,"body_markdown":"I encountered a concurrency problem with Servlets, when there are mutable fields which will be setted by each request.\r\nBut there is only one servlet-instance for all request, so this worked perfectly in a single user environment but when more than one user requested the servlet unpredictable results occured.\r\n\r\n    public class MyServlet implements Servlet{\r\n        private Object something;\r\n    \r\n        public void service(ServletRequest request, ServletResponse response)\r\n            throws ServletException, IOException{\r\n            this.something = request.getAttribute(&quot;something&quot;);\r\n            doSomething();\r\n        }\r\n    \r\n        private void doSomething(){\r\n            this.something ...\r\n        }\r\n    }","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>I encountered a concurrency problem with Servlets, when there are mutable fields which will be setted by each request.\nBut there is only one servlet-instance for all request, so this worked perfectly in a single user environment but when more than one user requested the servlet unpredictable results occured.</p>\n\n<pre><code>public class MyServlet implements Servlet{\n    private Object something;\n\n    public void service(ServletRequest request, ServletResponse response)\n        throws ServletException, IOException{\n        this.something = request.getAttribute(\"something\");\n        doSomething();\n    }\n\n    private void doSomething(){\n        this.something ...\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4596,"reputation":1302,"user_id":6973,"accept_rate":62,"display_name":"TREE"},"score":2,"creation_date":1232639956,"post_id":462295,"comment_id":287370,"body_markdown":"This is *probably* useless, but the act of synchronizing at all does some interesting things... Certainly creating a new Object every time is a complete waste.","body":"This is <i>probably</i> useless, but the act of synchronizing at all does some interesting things... Certainly creating a new Object every time is a complete waste."},{"owner":{"account_id":64785,"reputation":5816,"user_id":191084,"accept_rate":75,"display_name":"David Roussel"},"score":4,"creation_date":1304520070,"post_id":462295,"comment_id":6769401,"body_markdown":"It&#39;s not useless. It&#39;s memory barrier without a lock.","body":"It&#39;s not useless. It&#39;s memory barrier without a lock."},{"owner":{"account_id":151653,"reputation":1689,"user_id":365675,"accept_rate":48,"display_name":"yetanothercoder"},"score":1,"creation_date":1305108951,"post_id":462295,"comment_id":6877546,"body_markdown":"@David: the only problem - jvm could optimize it by removing such lock at all","body":"@David: the only problem - jvm could optimize it by removing such lock at all"},{"owner":{"account_id":64785,"reputation":5816,"user_id":191084,"accept_rate":75,"display_name":"David Roussel"},"score":1,"creation_date":1307032162,"post_id":462295,"comment_id":7240421,"body_markdown":"@insighter I see your opinion is shared http://www.ibm.com/developerworks/java/library/j-jtp10185/index.html I do agree that it&#39;s a silly thing to do, as you don&#39;t know when your memoery barrier will synchronize, I was just pointing out that is was doing more that nothing.","body":"@insighter I see your opinion is shared <a href=\"http://www.ibm.com/developerworks/java/library/j-jtp10185/index.html\" rel=\"nofollow noreferrer\">ibm.com/developerworks/java/library/j-jtp10185/index.html</a> I do agree that it&#39;s a silly thing to do, as you don&#39;t know when your memoery barrier will synchronize, I was just pointing out that is was doing more that nothing."}],"tags":[],"owner":{"account_id":20719,"reputation":1895,"user_id":49786,"accept_rate":100,"display_name":"Ludwig Wensauer"},"comment_count":4,"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1232473104,"creation_date":1232473104,"answer_id":462295,"question_id":461896,"body_markdown":"Using a local &quot;new Object()&quot; as mutex.\r\n\r\n    synchronized (new Object())\r\n    {\r\n        System.out.println(&quot;sdfs&quot;);\r\n    }\r\n\r\nThis is useless.","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>Using a local \"new Object()\" as mutex.</p>\n\n<pre><code>synchronized (new Object())\n{\n    System.out.println(\"sdfs\");\n}\n</code></pre>\n\n<p>This is useless.</p>\n"},{"comments":[{"owner":{"account_id":151653,"reputation":1689,"user_id":365675,"accept_rate":48,"display_name":"yetanothercoder"},"score":0,"creation_date":1305110512,"post_id":462371,"comment_id":6877930,"body_markdown":"you can pass ThreadFactory to ExecutorService/ThreadPool where in `newThread` method you can attach UncaughtExceptionHandler to new every new thread.","body":"you can pass ThreadFactory to ExecutorService/ThreadPool where in <code>newThread</code> method you can attach UncaughtExceptionHandler to new every new thread."}],"tags":[],"owner":{"account_id":20719,"reputation":1895,"user_id":49786,"accept_rate":100,"display_name":"Ludwig Wensauer"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1232474396,"creation_date":1232474396,"answer_id":462371,"question_id":461896,"body_markdown":"Since Java 5 there is Thread.getUncaughtExceptionHandler but this UncaughtExceptionHandler is never called when a ExecutorService/ThreadPool is used.&lt;br/&gt;\r\nAt least I was not able to get the UncaughtExceptionHandler with an ExcutorService working.","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>Since Java 5 there is Thread.getUncaughtExceptionHandler but this UncaughtExceptionHandler is never called when a ExecutorService/ThreadPool is used.<br/>\nAt least I was not able to get the UncaughtExceptionHandler with an ExcutorService working.</p>\n"},{"tags":[],"owner":{"account_id":2146,"reputation":51871,"user_id":2959,"accept_rate":67,"display_name":"Steve McLeod"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1232474726,"creation_date":1232474726,"answer_id":462391,"question_id":461896,"body_markdown":"Mutable classes in shared data structures\r\n\r\n    Thread1:\r\n        Person p = new Person(&quot;John&quot;);\r\n        sharedMap.put(&quot;Key&quot;, p);\r\n        assert(p.getName().equals(&quot;John&quot;);  // sometimes passes, sometimes fails\r\n    \r\n    Thread2:\r\n        Person p = sharedMap.get(&quot;Key&quot;);\r\n        p.setName(&quot;Alfonso&quot;);\r\n        \r\n\r\nWhen this happens, the code is far more complex that this simplified example. Replicating, finding and fixing the bug is hard. Perhaps it could be avoided if we could mark certain classes as immutable and certain data structures as only holding immutable objects.\r\n","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>Mutable classes in shared data structures</p>\n\n<pre><code>Thread1:\n    Person p = new Person(\"John\");\n    sharedMap.put(\"Key\", p);\n    assert(p.getName().equals(\"John\");  // sometimes passes, sometimes fails\n\nThread2:\n    Person p = sharedMap.get(\"Key\");\n    p.setName(\"Alfonso\");\n</code></pre>\n\n<p>When this happens, the code is far more complex that this simplified example. Replicating, finding and fixing the bug is hard. Perhaps it could be avoided if we could mark certain classes as immutable and certain data structures as only holding immutable objects.</p>\n"},{"comments":[{"owner":{"account_id":4938,"reputation":69433,"user_id":7671,"accept_rate":70,"display_name":"Alex Miller"},"score":0,"creation_date":1232481186,"post_id":462630,"comment_id":281310,"body_markdown":"Would be killer to have a short explanation here too...there seems to be more than one issue here.","body":"Would be killer to have a short explanation here too...there seems to be more than one issue here."}],"tags":[],"owner":{"account_id":161,"reputation":19368,"user_id":198,"accept_rate":81,"display_name":"dlinsin"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1232623098,"creation_date":1232478323,"answer_id":462630,"question_id":461896,"body_markdown":"    public class ThreadA implements Runnable {\r\n        private volatile SharedObject obj;\r\n    \r\n        public void run() {\r\n            while (true) {\r\n                obj = new SharedObject();\r\n                obj.setValue(&quot;Hallo&quot;);\r\n            }\r\n        }\r\n    \r\n        public SharedObject getObj() {\r\n            return obj;\r\n        }\r\n    }\r\n\r\nThe problem I&#39;m trying to point out here (among others) is that the flush of the SharedObject obj happens before setting the value &quot;Hallo&quot;. That means that the consumer of getObj() might retrieve an instance where getValue() returns null.\r\n    \r\n    public class ThreadB implements Runnable {\r\n        ThreadA a = null;\r\n    \r\n        public ThreadB(ThreadA a) {\r\n            this.a = a;\r\n        }\r\n    \r\n        public void run() {\r\n            while (true) {\r\n                try {\r\n                    System.out.println(&quot;SharedObject: &quot; + a.getObj().getVal());\r\n                    Thread.sleep(50);\r\n                } catch (InterruptedException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        }\r\n    }\r\n    \r\n    public class SharedObject {\r\n        private String val = null;\r\n    \r\n        public SharedObject() {\r\n        }\r\n    \r\n        public String getVal() {\r\n            return val;\r\n        }\r\n    \r\n        public void setVal(String val) {\r\n            this.val = val;\r\n        }\r\n    }\r\n\r\n","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<pre><code>public class ThreadA implements Runnable {\n    private volatile SharedObject obj;\n\n    public void run() {\n        while (true) {\n            obj = new SharedObject();\n            obj.setValue(\"Hallo\");\n        }\n    }\n\n    public SharedObject getObj() {\n        return obj;\n    }\n}\n</code></pre>\n\n<p>The problem I'm trying to point out here (among others) is that the flush of the SharedObject obj happens before setting the value \"Hallo\". That means that the consumer of getObj() might retrieve an instance where getValue() returns null.</p>\n\n<pre><code>public class ThreadB implements Runnable {\n    ThreadA a = null;\n\n    public ThreadB(ThreadA a) {\n        this.a = a;\n    }\n\n    public void run() {\n        while (true) {\n            try {\n                System.out.println(\"SharedObject: \" + a.getObj().getVal());\n                Thread.sleep(50);\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n}\n\npublic class SharedObject {\n    private String val = null;\n\n    public SharedObject() {\n    }\n\n    public String getVal() {\n        return val;\n    }\n\n    public void setVal(String val) {\n        this.val = val;\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":22968,"reputation":476,"user_id":57169,"display_name":"Kirk Wylie"},"score":9,"creation_date":1232495955,"post_id":462648,"comment_id":282122,"body_markdown":"A great solution to this is to make the stop instance variable an AtomicBoolean. It solves all the problems of the non-volatile, while shielding you from the JMM issues.","body":"A great solution to this is to make the stop instance variable an AtomicBoolean. It solves all the problems of the non-volatile, while shielding you from the JMM issues."},{"owner":{"account_id":16527,"reputation":8987,"user_id":36093,"accept_rate":100,"display_name":"Karl"},"score":0,"creation_date":1233196384,"post_id":462648,"comment_id":306285,"body_markdown":"I use this method all the time, could you elaborate on what problems it causes?  It has always seemed to work, but I have never cared if it took 1 ms or 100ms to finally see the change.","body":"I use this method all the time, could you elaborate on what problems it causes?  It has always seemed to work, but I have never cared if it took 1 ms or 100ms to finally see the change."},{"owner":{"account_id":22980,"reputation":1293,"user_id":57217,"accept_rate":100,"display_name":"Kutzi"},"score":0,"creation_date":1234026426,"post_id":462648,"comment_id":337366,"body_markdown":"Karl, the problem with this approach is that you have absolutely no guarantee WHEN a thread checking the stop flag will see a modification to it by another thread. It may be 100ms with your current platform and VM, but it could be several minutes on another.","body":"Karl, the problem with this approach is that you have absolutely no guarantee WHEN a thread checking the stop flag will see a modification to it by another thread. It may be 100ms with your current platform and VM, but it could be several minutes on another."},{"owner":{"account_id":22980,"reputation":1293,"user_id":57217,"accept_rate":100,"display_name":"Kutzi"},"score":0,"creation_date":1234026507,"post_id":462648,"comment_id":337368,"body_markdown":"And if the thread to be stopped is doing something critical (like wasting the money of your company) every second on which the thread doesn&#39;t stop could count.","body":"And if the thread to be stopped is doing something critical (like wasting the money of your company) every second on which the thread doesn&#39;t stop could count."},{"owner":{"account_id":9269,"reputation":37307,"user_id":17041,"display_name":"Cowan"},"score":39,"creation_date":1234332908,"post_id":462648,"comment_id":348329,"body_markdown":"It&#39;s worse than &#39;for several minutes&#39; -- you might NEVER see it. Under the Memory Model, the JVM is allowed to optimize while(!stop) into while(true) and then you&#39;re hosed. This may only happen on some VMs, only in server mode, only when the JVM recompiles after x iterations of the loop, etc. Ouch!","body":"It&#39;s worse than &#39;for several minutes&#39; -- you might NEVER see it. Under the Memory Model, the JVM is allowed to optimize while(!stop) into while(true) and then you&#39;re hosed. This may only happen on some VMs, only in server mode, only when the JVM recompiles after x iterations of the loop, etc. Ouch!"},{"owner":{"account_id":28874,"reputation":12117,"user_id":2352432,"accept_rate":74,"display_name":"Pool"},"score":2,"creation_date":1238369178,"post_id":462648,"comment_id":508788,"body_markdown":"Why would you want to use AtomicBoolean over volatile boolean? I&#39;m developing for version 1.4+, so are there any pitfalls with just declaring volatile?","body":"Why would you want to use AtomicBoolean over volatile boolean? I&#39;m developing for version 1.4+, so are there any pitfalls with just declaring volatile?"},{"owner":{"account_id":22980,"reputation":1293,"user_id":57217,"accept_rate":100,"display_name":"Kutzi"},"score":2,"creation_date":1238936655,"post_id":462648,"comment_id":530902,"body_markdown":"Nick, I think it&#39;s because atomic CAS is usually even faster than volatile.\nIf you&#39;re developing for 1.4 your only safe option IMHO is to use synchronized as volatile in 1.4 hasn&#39;t got the strong memory barrier guarantees as it has in Java 5.","body":"Nick, I think it&#39;s because atomic CAS is usually even faster than volatile. If you&#39;re developing for 1.4 your only safe option IMHO is to use synchronized as volatile in 1.4 hasn&#39;t got the strong memory barrier guarantees as it has in Java 5."},{"owner":{"account_id":11959,"reputation":17676,"user_id":23309,"accept_rate":58,"display_name":"Chris R"},"score":1,"creation_date":1243543600,"post_id":462648,"comment_id":731090,"body_markdown":"Wow.  That&#39;s an amazing thing to find out.  I need to go and fix some bugs now.","body":"Wow.  That&#39;s an amazing thing to find out.  I need to go and fix some bugs now."},{"owner":{"account_id":112819,"reputation":5285,"user_id":297451,"accept_rate":55,"display_name":"Jon"},"score":1,"creation_date":1276944986,"post_id":462648,"comment_id":3151122,"body_markdown":"I&#39;ve never seen this fail in practice. Is there a way to make it fail?","body":"I&#39;ve never seen this fail in practice. Is there a way to make it fail?"},{"owner":{"account_id":71043,"reputation":30960,"user_id":205521,"accept_rate":89,"display_name":"Thomas Ahle"},"score":1,"creation_date":1282510851,"post_id":462648,"comment_id":3710530,"body_markdown":"Can anybody describe for the rest of us, why this doesn&#39;t work?","body":"Can anybody describe for the rest of us, why this doesn&#39;t work?"},{"owner":{"account_id":22980,"reputation":1293,"user_id":57217,"accept_rate":100,"display_name":"Kutzi"},"score":5,"creation_date":1282658603,"post_id":462648,"comment_id":3727611,"body_markdown":"@Thomas: that&#39;s because of the Java memory model. You should read about it, if you want to know it in detail (Java Concurrency in Practice by Brian Goetz explains it good e.g.).\nIn short: unless you use memory synchronization keywords/constructs (like volatile, synchronized, AtomicXyz, but also when a Thread is finished) one Thread has NO guarantee whatsoever to see the changes made to any field done by a different thread","body":"@Thomas: that&#39;s because of the Java memory model. You should read about it, if you want to know it in detail (Java Concurrency in Practice by Brian Goetz explains it good e.g.). In short: unless you use memory synchronization keywords/constructs (like volatile, synchronized, AtomicXyz, but also when a Thread is finished) one Thread has NO guarantee whatsoever to see the changes made to any field done by a different thread"},{"owner":{"account_id":936247,"reputation":1085,"user_id":965134,"accept_rate":50,"display_name":"Adrien"},"score":0,"creation_date":1395147485,"post_id":462648,"comment_id":34196301,"body_markdown":"@KirkWylie Yes, AtomicBoolean, and shouldn&#39;t it be &quot;final&quot; too? I think that&#39;s the only way to assign a variable safely in threaded mode.","body":"@KirkWylie Yes, AtomicBoolean, and shouldn&#39;t it be &quot;final&quot; too? I think that&#39;s the only way to assign a variable safely in threaded mode."},{"owner":{"account_id":54888,"reputation":101121,"user_id":164299,"accept_rate":99,"display_name":"Rachel"},"score":0,"creation_date":1409945102,"post_id":462648,"comment_id":40157198,"body_markdown":"@Adrien: There is no point of making it final because doing so you cannot change value of variable.","body":"@Adrien: There is no point of making it final because doing so you cannot change value of variable."},{"owner":{"account_id":936247,"reputation":1085,"user_id":965134,"accept_rate":50,"display_name":"Adrien"},"score":0,"creation_date":1410075726,"post_id":462648,"comment_id":40185367,"body_markdown":"@Rachel &quot;final&quot; be used in some cases otherwise the AtomicBoolean isn&#39;t safely published, see http://stackoverflow.com/a/6457285/965134","body":"@Rachel &quot;final&quot; be used in some cases otherwise the AtomicBoolean isn&#39;t safely published, see <a href=\"http://stackoverflow.com/a/6457285/965134\">stackoverflow.com/a/6457285/965134</a>"},{"owner":{"account_id":34025,"reputation":23628,"user_id":95725,"display_name":"NamshubWriter"},"score":0,"creation_date":1433696465,"post_id":462648,"comment_id":49450443,"body_markdown":"@Kutzi I would love to see a reference for your statement that an atomic CAS being faster than `volatile`. I use the Atomic* classes when I need to increment the value or otherwise need a compare and set, but for the type of code the OP gave I would use `volatile`","body":"@Kutzi I would love to see a reference for your statement that an atomic CAS being faster than <code>volatile</code>. I use the Atomic* classes when I need to increment the value or otherwise need a compare and set, but for the type of code the OP gave I would use <code>volatile</code>"},{"owner":{"account_id":22980,"reputation":1293,"user_id":57217,"accept_rate":100,"display_name":"Kutzi"},"score":0,"creation_date":1433784948,"post_id":462648,"comment_id":49488557,"body_markdown":"@NamshubWriter AFAIK this is because CAS can be mapped to atomic CAS ops on the underlying machine whereas volatile cannot be (in all cases). At least this was said when java.lang.atomic was introduced several years ago, so it needs not to be true anymore. Just google for it and I guess you&#39;ll find a lot of references.","body":"@NamshubWriter AFAIK this is because CAS can be mapped to atomic CAS ops on the underlying machine whereas volatile cannot be (in all cases). At least this was said when java.lang.atomic was introduced several years ago, so it needs not to be true anymore. Just google for it and I guess you&#39;ll find a lot of references."}],"tags":[],"owner":{"account_id":22980,"reputation":1293,"user_id":57217,"accept_rate":100,"display_name":"Kutzi"},"comment_count":16,"down_vote_count":1,"up_vote_count":128,"is_accepted":true,"score":127,"last_activity_date":1675799180,"creation_date":1232478581,"answer_id":462648,"question_id":461896,"body_markdown":"The most common concurrency problem I&#39;ve seen, is not realizing that a field written by one thread is *not guaranteed* to be seen by a different thread. A common application of this:\r\n\r\n    class MyThread extends Thread {\r\n      private boolean stop = false;\r\n      \r\n      public void run() {\r\n        while(!stop) {\r\n          doSomeWork();\r\n        }\r\n      }\r\n      \r\n      public void setStop() {\r\n        this.stop = true;\r\n      }\r\n    }\r\n\r\nAs long as `stop` is not *volatile* or `setStop` and `run` are not *synchronized* this is not guaranteed to work. This mistake is especially devilish as in 99.999% it won&#39;t matter in practice as the reader thread will eventually see the change - but we don&#39;t know how soon he saw it.\r\n   ","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>The most common concurrency problem I've seen, is not realizing that a field written by one thread is <em>not guaranteed</em> to be seen by a different thread. A common application of this:</p>\n<pre><code>class MyThread extends Thread {\n  private boolean stop = false;\n  \n  public void run() {\n    while(!stop) {\n      doSomeWork();\n    }\n  }\n  \n  public void setStop() {\n    this.stop = true;\n  }\n}\n</code></pre>\n<p>As long as <code>stop</code> is not <em>volatile</em> or <code>setStop</code> and <code>run</code> are not <em>synchronized</em> this is not guaranteed to work. This mistake is especially devilish as in 99.999% it won't matter in practice as the reader thread will eventually see the change - but we don't know how soon he saw it.</p>\n"},{"tags":[],"owner":{"account_id":5382,"reputation":10719,"user_id":2495576,"accept_rate":100,"display_name":"Scott Bale"},"comment_count":0,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1232478745,"creation_date":1232478745,"answer_id":462657,"question_id":461896,"body_markdown":"**Arbitrary method calls should not be made from within synchronized blocks.**\r\n\r\nDave Ray touched on this in his first answer, and in fact I also encountered a deadlock also having to do with invoking methods on listeners from within a synchronized method.  I think the more general lesson is that method calls should not be made &quot;into the wild&quot; from within a synchronized block - you have no idea if the call will be long-running, result in deadlock, or whatever.\r\n\r\nIn this case, and usually in general, the solution was to reduce the scope of the synchronized block to just protect a critical *private* section of code.  \r\n\r\nAlso, since we were now accessing the Collection of listeners outside of a synchronized block, we changed it to be a copy-on-write Collection.  Or we could have simply made a defensive copy of the Collection.  The point being, there are usually alternatives to safely access a Collection of unknown objects.","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p><strong>Arbitrary method calls should not be made from within synchronized blocks.</strong></p>\n\n<p>Dave Ray touched on this in his first answer, and in fact I also encountered a deadlock also having to do with invoking methods on listeners from within a synchronized method.  I think the more general lesson is that method calls should not be made \"into the wild\" from within a synchronized block - you have no idea if the call will be long-running, result in deadlock, or whatever.</p>\n\n<p>In this case, and usually in general, the solution was to reduce the scope of the synchronized block to just protect a critical <em>private</em> section of code.  </p>\n\n<p>Also, since we were now accessing the Collection of listeners outside of a synchronized block, we changed it to be a copy-on-write Collection.  Or we could have simply made a defensive copy of the Collection.  The point being, there are usually alternatives to safely access a Collection of unknown objects.</p>\n"},{"comments":[{"owner":{"account_id":4938,"reputation":69433,"user_id":7671,"accept_rate":70,"display_name":"Alex Miller"},"score":0,"creation_date":1232480962,"post_id":462714,"comment_id":281295,"body_markdown":"I find this mildly surprising, but I know you&#39;re a smart dude Tim so I&#39;ll take it w/o a reference. :)\n\nHowever, if a was final, this would not be a concern, correct?  You would then be bound by final freeze semantics during construction?","body":"I find this mildly surprising, but I know you&#39;re a smart dude Tim so I&#39;ll take it w/o a reference. :)  However, if a was final, this would not be a concern, correct?  You would then be bound by final freeze semantics during construction?"},{"owner":{"account_id":20648,"reputation":3330,"user_id":49553,"accept_rate":83,"display_name":"Tim Jansen"},"score":0,"creation_date":1232488786,"post_id":462714,"comment_id":281837,"body_markdown":"I still find things in the JMM that suprise me, so I wouldn&#39;t trust me, but I am pretty sure about this. See also http://www.cs.umd.edu/~pugh/java/memoryModel/jsr-133-faq.html#incorrectlySync . If the field was final it wouldn&#39;t be a problem, then it would be visible after the initialization phase.","body":"I still find things in the JMM that suprise me, so I wouldn&#39;t trust me, but I am pretty sure about this. See also <a href=\"http://www.cs.umd.edu/~pugh/java/memoryModel/jsr-133-faq.html#incorrectlySync\" rel=\"nofollow noreferrer\">cs.umd.edu/~pugh/java/memoryModel/&hellip;</a> . If the field was final it wouldn&#39;t be a problem, then it would be visible after the initialization phase."},{"owner":{"account_id":15634,"reputation":3535,"user_id":33229,"accept_rate":60,"display_name":"ReneS"},"score":2,"creation_date":1236826786,"post_id":462714,"comment_id":450460,"body_markdown":"This is only a problem, if the reference of the freshly created instance is in use already before the constructor has returned/finished. For instance the class registers itself during construction in a public pool and other threads start to access it.","body":"This is only a problem, if the reference of the freshly created instance is in use already before the constructor has returned/finished. For instance the class registers itself during construction in a public pool and other threads start to access it."},{"owner":{"account_id":54331,"reputation":832,"user_id":162537,"accept_rate":46,"display_name":"Markus Jevring"},"score":3,"creation_date":1295942053,"post_id":462714,"comment_id":5307648,"body_markdown":"MyClass.a indicates static access, and &#39;a&#39; is not a static member of MyClass. Other than that, it&#39;s as &#39;ReneS&#39; states, this is only a problem if a reference to the uncompleted object is leaked, like adding &#39;this&#39; to some external map in the constructor, for instance.","body":"MyClass.a indicates static access, and &#39;a&#39; is not a static member of MyClass. Other than that, it&#39;s as &#39;ReneS&#39; states, this is only a problem if a reference to the uncompleted object is leaked, like adding &#39;this&#39; to some external map in the constructor, for instance."}],"tags":[],"owner":{"account_id":20648,"reputation":3330,"user_id":49553,"accept_rate":83,"display_name":"Tim Jansen"},"comment_count":4,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1454320169,"creation_date":1232479490,"answer_id":462714,"question_id":461896,"body_markdown":"I believe in the future the main problem with Java will be the (lack of) visibility guarantees for constructors. For example, if you create the following class\r\n\r\n    class MyClass {\r\n        public int a = 1;\r\n    }\r\n\r\nand then just read the MyClass&#39;s property *a* from another thread, MyClass.a could be either 0 or 1, depending on the JavaVM&#39;s implementation and mood. Today the chances for &#39;a&#39; being 1 are very high. But on future NUMA machines this may be different. Many people are not aware of this and believe that they don&#39;t need to care about multi-threading during the initialization phase. ","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>I believe in the future the main problem with Java will be the (lack of) visibility guarantees for constructors. For example, if you create the following class</p>\n\n<pre><code>class MyClass {\n    public int a = 1;\n}\n</code></pre>\n\n<p>and then just read the MyClass's property <em>a</em> from another thread, MyClass.a could be either 0 or 1, depending on the JavaVM's implementation and mood. Today the chances for 'a' being 1 are very high. But on future NUMA machines this may be different. Many people are not aware of this and believe that they don't need to care about multi-threading during the initialization phase. </p>\n"},{"comments":[{"owner":{"account_id":15634,"reputation":3535,"user_id":33229,"accept_rate":60,"display_name":"ReneS"},"score":1,"creation_date":1236826879,"post_id":462728,"comment_id":450466,"body_markdown":"This is not a problem, but unnecessary, because it tells the JVM sync the data against the global memory and therefore might run badly on multi-cpus even so, nobody uses the synchronization block in a concurrent fashion.","body":"This is not a problem, but unnecessary, because it tells the JVM sync the data against the global memory and therefore might run badly on multi-cpus even so, nobody uses the synchronization block in a concurrent fashion."}],"tags":[],"owner":{"account_id":22980,"reputation":1293,"user_id":57217,"accept_rate":100,"display_name":"Kutzi"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1232479645,"creation_date":1232479645,"answer_id":462728,"question_id":461896,"body_markdown":"Another common &#39;concurrency&#39; issue is to use synchronized code when it is not necessary at all. For example I still see programmers using `StringBuffer` or even `java.util.Vector` (as method local variables).","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>Another common 'concurrency' issue is to use synchronized code when it is not necessary at all. For example I still see programmers using <code>StringBuffer</code> or even <code>java.util.Vector</code> (as method local variables).</p>\n"},{"comments":[{"owner":{"account_id":22968,"reputation":476,"user_id":57169,"display_name":"Kirk Wylie"},"score":0,"creation_date":1232496129,"post_id":463065,"comment_id":282126,"body_markdown":"Potentially it&#39;s locked. The problem is that the semantics on WHEN Strings are interned is undefined (or, IMNSHO, underdefined). A compiler-time constant of &quot;foo&quot; is interned, &quot;foo&quot; coming in from a network interface is only interned if you make it so.","body":"Potentially it&#39;s locked. The problem is that the semantics on WHEN Strings are interned is undefined (or, IMNSHO, underdefined). A compiler-time constant of &quot;foo&quot; is interned, &quot;foo&quot; coming in from a network interface is only interned if you make it so."},{"owner":{"account_id":4938,"reputation":69433,"user_id":7671,"accept_rate":70,"display_name":"Alex Miller"},"score":0,"creation_date":1232513338,"post_id":463065,"comment_id":282653,"body_markdown":"Right, that&#39;s why I specifically used a literal string constant, which is guaranteed to be interned.","body":"Right, that&#39;s why I specifically used a literal string constant, which is guaranteed to be interned."}],"tags":[],"owner":{"account_id":4938,"reputation":69433,"user_id":7671,"accept_rate":70,"display_name":"Alex Miller"},"comment_count":2,"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1232484944,"creation_date":1232484944,"answer_id":463065,"question_id":461896,"body_markdown":"Synchronizing on a string literal or constant defined by a string literal is (potentially) a problem as the string literal is interned and will be shared by anyone else in the JVM using the same string literal.  I know this problem has come up in application servers and other &quot;container&quot; scenarios.  \r\n\r\nExample:\r\n\r\n    private static final String SOMETHING = &quot;foo&quot;;\r\n\r\n    synchronized(SOMETHING) {\r\n       //\r\n    }\r\n\r\nIn this case, anyone using the string &quot;foo&quot; to lock on is sharing the same lock.","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>Synchronizing on a string literal or constant defined by a string literal is (potentially) a problem as the string literal is interned and will be shared by anyone else in the JVM using the same string literal.  I know this problem has come up in application servers and other \"container\" scenarios.  </p>\n\n<p>Example:</p>\n\n<pre><code>private static final String SOMETHING = \"foo\";\n\nsynchronized(SOMETHING) {\n   //\n}\n</code></pre>\n\n<p>In this case, anyone using the string \"foo\" to lock on is sharing the same lock.</p>\n"},{"comments":[{"owner":{"account_id":19462,"reputation":102762,"user_id":45664,"accept_rate":91,"display_name":"Andrzej Doyle"},"score":63,"creation_date":1232531996,"post_id":463437,"comment_id":283092,"body_markdown":"This is one of the reasons why I prefer\n\n   private static final Object LOCK = new Object();","body":"This is one of the reasons why I prefer     private static final Object LOCK = new Object();"},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":17,"creation_date":1232556009,"post_id":463437,"comment_id":284191,"body_markdown":"I love it - oh, this is nasty :)","body":"I love it - oh, this is nasty :)"},{"owner":{"account_id":13054,"reputation":2642,"user_id":26010,"display_name":"Dov Wasserman"},"score":7,"creation_date":1233253842,"post_id":463437,"comment_id":308488,"body_markdown":"That&#39;s a good one for Java Puzzlers 2.","body":"That&#39;s a good one for Java Puzzlers 2."},{"owner":{"account_id":19197,"reputation":25590,"user_id":44757,"accept_rate":84,"display_name":"Jared"},"score":0,"creation_date":1233761368,"post_id":463437,"comment_id":325578,"body_markdown":"It wasn&#39;t very &quot;great&quot; when I was troubleshooting it in production :P....but in hindsight, it&#39;s at least ironic.","body":"It wasn&#39;t very &quot;great&quot; when I was troubleshooting it in production :P....but in hindsight, it&#39;s at least ironic."},{"owner":{"account_id":19197,"reputation":25590,"user_id":44757,"accept_rate":84,"display_name":"Jared"},"score":12,"creation_date":1233761459,"post_id":463437,"comment_id":325583,"body_markdown":"Actually...it really makes me want the compiler to refuse to allow you to synchronize on a String.  Given String interning, there is no case where that would be a &quot;good thing(tm)&quot;.","body":"Actually...it really makes me want the compiler to refuse to allow you to synchronize on a String.  Given String interning, there is no case where that would be a &quot;good thing(tm)&quot;."},{"owner":{"account_id":21771,"reputation":3198,"user_id":53191,"accept_rate":94,"display_name":"parkr"},"score":0,"creation_date":1234958915,"post_id":463437,"comment_id":371883,"body_markdown":"+1 private static final Object LOCK = new Object();","body":"+1 private static final Object LOCK = new Object();"},{"owner":{"account_id":3001,"reputation":138707,"user_id":4249,"accept_rate":84,"display_name":"matt b"},"score":0,"creation_date":1244832829,"post_id":463437,"comment_id":796919,"body_markdown":"I don&#39;t think this is exactly correct. It is not guaranteed that you will get the same String instance each time. Same value yes, same instance, maybe.","body":"I don&#39;t think this is exactly correct. It is not guaranteed that you will get the same String instance each time. Same value yes, same instance, maybe."},{"owner":{"account_id":19197,"reputation":25590,"user_id":44757,"accept_rate":84,"display_name":"Jared"},"score":1,"creation_date":1245082505,"post_id":463437,"comment_id":806026,"body_markdown":"It&#39;s the &quot;maybe&quot; that hurts you. Until the string is interned, you get a different instance, but once it&#39;s been interned, you do indeed get exactly the same instance (by oid.)  Additionally - you can&#39;t control when the String gets interned - the JVM may well do it for you as soon as it&#39;s created.  This is exactly the same bug that happens when you use == instead of .equals on a String - and that&#39;s a very well known failure case.","body":"It&#39;s the &quot;maybe&quot; that hurts you. Until the string is interned, you get a different instance, but once it&#39;s been interned, you do indeed get exactly the same instance (by oid.)  Additionally - you can&#39;t control when the String gets interned - the JVM may well do it for you as soon as it&#39;s created.  This is exactly the same bug that happens when you use == instead of .equals on a String - and that&#39;s a very well known failure case."},{"owner":{"account_id":32681,"reputation":138933,"user_id":90848,"accept_rate":90,"display_name":"Laurence Gonsalves"},"score":3,"creation_date":1249532491,"post_id":463437,"comment_id":1062951,"body_markdown":"@Jared: &quot;until the string is interned&quot; makes no sense. Strings don&#39;t magically &quot;become&quot; interned. String.intern() returns a different object, unless you already have the canonical instance of the specified String. Also, all literal strings and string-valued constant expressions are interned. Always. See the docs for String.intern() and &#167;3.10.5 of the JLS.","body":"@Jared: &quot;until the string is interned&quot; makes no sense. Strings don&#39;t magically &quot;become&quot; interned. String.intern() returns a different object, unless you already have the canonical instance of the specified String. Also, all literal strings and string-valued constant expressions are interned. Always. See the docs for String.intern() and &#167;3.10.5 of the JLS."},{"owner":{"account_id":11149,"reputation":4960,"user_id":21352,"accept_rate":50,"display_name":"djb"},"score":3,"creation_date":1283865294,"post_id":463437,"comment_id":3848982,"body_markdown":"&quot;However; because Strings are interned in Java&quot; should really be &quot;However; because String literals are interned in Java&quot;. (Not all strings are interned, just literals) Certainly &quot;LOCK&quot; is interned, which is the root of this problem.","body":"&quot;However; because Strings are interned in Java&quot; should really be &quot;However; because String literals are interned in Java&quot;. (Not all strings are interned, just literals) Certainly &quot;LOCK&quot; is interned, which is the root of this problem."},{"owner":{"account_id":44379,"reputation":14328,"user_id":130224,"accept_rate":84,"display_name":"reprogrammer"},"score":0,"creation_date":1283874216,"post_id":463437,"comment_id":3850519,"body_markdown":"Do you remember the two different open source projects containing this bug? I&#39;m looking for concrete examples of this bug in real world software.","body":"Do you remember the two different open source projects containing this bug? I&#39;m looking for concrete examples of this bug in real world software."},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":3,"creation_date":1304667861,"post_id":463437,"comment_id":6801291,"body_markdown":"I have seen plain `synchronized(&quot;LOCK&quot;) {\n       this.work();\n   }` :P","body":"I have seen plain <code>synchronized(&quot;LOCK&quot;) {        this.work();    }</code> :P"},{"owner":{"account_id":29634,"reputation":12494,"user_id":80243,"accept_rate":46,"display_name":"L̲̳o̲̳̳n̲̳̳g̲̳̳p̲̳o̲̳̳k̲̳̳e̲̳̳"},"score":0,"creation_date":1364695119,"post_id":463437,"comment_id":22339843,"body_markdown":"This is a perfect example of the drastic effects of noncomposability.","body":"This is a perfect example of the drastic effects of noncomposability."},{"owner":{"account_id":2814590,"reputation":1225,"user_id":2420028,"accept_rate":50,"display_name":"Danny Dan"},"score":0,"creation_date":1499185604,"post_id":463437,"comment_id":76797763,"body_markdown":"Looks like it should also happen in some cases with the wrapper classes: If the value p being boxed is true, false, a byte, a char in the range \\u0000 to \\u007f, or an int or short number between -128 and 127, then let r1 and r2 be the results of any two boxing conversions of p. It is always the case that r1 == r2.","body":"Looks like it should also happen in some cases with the wrapper classes: If the value p being boxed is true, false, a byte, a char in the range \\u0000 to \\u007f, or an int or short number between -128 and 127, then let r1 and r2 be the results of any two boxing conversions of p. It is always the case that r1 == r2."}],"tags":[],"owner":{"account_id":19197,"reputation":25590,"user_id":44757,"accept_rate":84,"display_name":"Jared"},"comment_count":14,"down_vote_count":0,"up_vote_count":182,"is_accepted":false,"score":182,"last_activity_date":1528941794,"creation_date":1232491477,"answer_id":463437,"question_id":461896,"body_markdown":"My **#1 most painful** concurrency problem ever occurred when **two different** open source libraries did something like this:\r\n\r\n    private static final String LOCK = &quot;LOCK&quot;;  // use matching strings \r\n                                                // in two different libraries\r\n    \r\n    public doSomestuff() {\r\n       synchronized(LOCK) {\r\n           this.work();\r\n       }\r\n    }\r\n\r\nAt first glance, this looks like a pretty trivial synchronization example.   However; because Strings are **interned** in Java, the literal string `&quot;LOCK&quot;` turns out to be the same instance of `java.lang.String` (even though they are declared completely disparately from each other.)  The result is obviously bad.","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>My <strong>#1 most painful</strong> concurrency problem ever occurred when <strong>two different</strong> open source libraries did something like this:</p>\n\n<pre><code>private static final String LOCK = \"LOCK\";  // use matching strings \n                                            // in two different libraries\n\npublic doSomestuff() {\n   synchronized(LOCK) {\n       this.work();\n   }\n}\n</code></pre>\n\n<p>At first glance, this looks like a pretty trivial synchronization example.   However; because Strings are <strong>interned</strong> in Java, the literal string <code>\"LOCK\"</code> turns out to be the same instance of <code>java.lang.String</code> (even though they are declared completely disparately from each other.)  The result is obviously bad.</p>\n"},{"tags":[],"owner":{"account_id":10326,"reputation":9293,"user_id":19450,"display_name":"Ben Manes"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1232523286,"creation_date":1232523286,"answer_id":464344,"question_id":461896,"body_markdown":"Keeping all threads busy.\r\n\r\nThis is most frequent with having to go fix problems in other people&#39;s code, because they abused the locking constructs. As of late, my coworkers seem to have found reader/writer locks quite fun to sprinkle around whereas a little thought removes their need entirely.\r\n\r\nIn my own code, keeping the threads busy is less obvious but challenging. It requires deeper thought into algorithms, such as writing new data structures, or carefully designing a system to ensure that when locking is used it will never be contended.\r\n\r\nSolving concurrency mistakes is easy - trying to figure out how to avoid lock contention can be hard.","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>Keeping all threads busy.</p>\n\n<p>This is most frequent with having to go fix problems in other people's code, because they abused the locking constructs. As of late, my coworkers seem to have found reader/writer locks quite fun to sprinkle around whereas a little thought removes their need entirely.</p>\n\n<p>In my own code, keeping the threads busy is less obvious but challenging. It requires deeper thought into algorithms, such as writing new data structures, or carefully designing a system to ensure that when locking is used it will never be contended.</p>\n\n<p>Solving concurrency mistakes is easy - trying to figure out how to avoid lock contention can be hard.</p>\n"},{"tags":[],"owner":{"display_name":"David Nouls"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1232525795,"creation_date":1232525795,"answer_id":464415,"question_id":461896,"body_markdown":"1) A common mistake that I have encountered involves iterating over a synchronized Collection class. It is required to manually synchronized before getting the iterator and while iterating.\r\n\r\n2) Another mistake is that most textbooks give the impression that making a class thread safe is just a matter of adding synchronized on every method. That in itself is not a guarantee - it will only protect the integrity of the particular class, but the results can still be undeterministic.\r\n\r\n3) Putting too much time-costly operations in a synchronized block often result in very bad performance. Fortunately the Future pattern in the concurrency package can safe the day.\r\n\r\n4) Caching mutable objects to improve performance often leads to multithreading issues as well (and sometimes very hard to track since you assume you are the only user).\r\n\r\n5) Using multiple synchronisation objects must be carefully handled. ","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>1) A common mistake that I have encountered involves iterating over a synchronized Collection class. It is required to manually synchronized before getting the iterator and while iterating.</p>\n\n<p>2) Another mistake is that most textbooks give the impression that making a class thread safe is just a matter of adding synchronized on every method. That in itself is not a guarantee - it will only protect the integrity of the particular class, but the results can still be undeterministic.</p>\n\n<p>3) Putting too much time-costly operations in a synchronized block often result in very bad performance. Fortunately the Future pattern in the concurrency package can safe the day.</p>\n\n<p>4) Caching mutable objects to improve performance often leads to multithreading issues as well (and sometimes very hard to track since you assume you are the only user).</p>\n\n<p>5) Using multiple synchronisation objects must be carefully handled. </p>\n"},{"tags":[],"owner":{"display_name":"Tony Morris"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1232527091,"creation_date":1232527091,"answer_id":464457,"question_id":461896,"body_markdown":"Assisting with the Implementation of Actors in Functional Java and benchmarking millions of threads on multi-core machines.","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>Assisting with the Implementation of Actors in Functional Java and benchmarking millions of threads on multi-core machines.</p>\n"},{"comments":[{"owner":{"account_id":4938,"reputation":69433,"user_id":7671,"accept_rate":70,"display_name":"Alex Miller"},"score":2,"creation_date":1232545005,"post_id":464529,"comment_id":283574,"body_markdown":"This is a problem but I don&#39;t see it as a concurrency bug?","body":"This is a problem but I don&#39;t see it as a concurrency bug?"}],"tags":[],"owner":{"display_name":"Bob"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1293792642,"creation_date":1232529029,"answer_id":464529,"question_id":461896,"body_markdown":"    while(true)\r\n    {\r\n       if (...)\r\n         break\r\n    \r\n       doStuff()\r\n    }\r\n\r\nInvariably when developers write while loops they miss the &quot;resource commit&quot;\r\nin their own code.\r\n\r\nNamely if that block does not exit, the application and maybe even the system will lock up and die.  Just because of a simple `while(fantasy_land)...if(...) break`.","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<pre><code>while(true)\n{\n   if (...)\n     break\n\n   doStuff()\n}\n</code></pre>\n\n<p>Invariably when developers write while loops they miss the \"resource commit\"\nin their own code.</p>\n\n<p>Namely if that block does not exit, the application and maybe even the system will lock up and die.  Just because of a simple <code>while(fantasy_land)...if(...) break</code>.</p>\n"},{"comments":[{"owner":{"account_id":4938,"reputation":69433,"user_id":7671,"accept_rate":70,"display_name":"Alex Miller"},"score":0,"creation_date":1232545279,"post_id":464613,"comment_id":283588,"body_markdown":"This is good advice to be sure, but does not list a Java concurrency bug.","body":"This is good advice to be sure, but does not list a Java concurrency bug."}],"tags":[],"owner":{"account_id":23037,"reputation":6947,"user_id":57448,"accept_rate":71,"display_name":"Rahel L&#252;thy"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1232530910,"creation_date":1232530910,"answer_id":464613,"question_id":461896,"body_markdown":"My two cents on trying to avoid synchronization problems from the start — watch out for the following issues/smells:\r\n\r\n 1. When writing code, always **know in which thread you&#39;re in**.\r\n 2. When designing a class or API for reuse, always **ask yourself whether the code has to be thread-safe**. It&#39;s better to make a deliberate decision, and document that your unit is *not* thread-safe, than to put in unwise synchronization with potential for deadlock.\r\n 3. **Invocations of `new Thread()` are a smell**. Use dedicated ExecutorServices instead, which force you to think about your application&#39;s overall threading concept (see 1) and encourage others to follow it.\r\n 4. **Know and use library classes** (like `AtomicBoolean` *et al*, synchronized Collections, etc). Again: make a conscious decision on whether thread-safety is important in a given context, don&#39;t just use them blindly.","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>My two cents on trying to avoid synchronization problems from the start — watch out for the following issues/smells:</p>\n\n<ol>\n<li>When writing code, always <strong>know in which thread you're in</strong>.</li>\n<li>When designing a class or API for reuse, always <strong>ask yourself whether the code has to be thread-safe</strong>. It's better to make a deliberate decision, and document that your unit is <em>not</em> thread-safe, than to put in unwise synchronization with potential for deadlock.</li>\n<li><strong>Invocations of <code>new Thread()</code> are a smell</strong>. Use dedicated ExecutorServices instead, which force you to think about your application's overall threading concept (see 1) and encourage others to follow it.</li>\n<li><strong>Know and use library classes</strong> (like <code>AtomicBoolean</code> <em>et al</em>, synchronized Collections, etc). Again: make a conscious decision on whether thread-safety is important in a given context, don't just use them blindly.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":17393,"reputation":61637,"user_id":38896,"accept_rate":80,"display_name":"JodaStephen"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1232535081,"creation_date":1232535081,"answer_id":464810,"question_id":461896,"body_markdown":"Starting Java RMI causes a background task to run that forces the garbage collector to run every 60 seconds. In itself, this may be a good thing, however it may be that the RMI server wasn&#39;t started by you directly, but by a framework/tool you use (eg. JRun). And, the RMI might not actually be being used for anything.\r\n\r\nThe net result is a System.gc() call once a minute. On a heavily loaded system, you will see the following output in your logs - 60 seconds of activity followed by a long gc pause followed by 60 seconds of activity followed by a long gc pause. This is fatal to throughput.\r\n\r\nThe solution is to turn off explicit gc using -XX:+DisableExplicitGC","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>Starting Java RMI causes a background task to run that forces the garbage collector to run every 60 seconds. In itself, this may be a good thing, however it may be that the RMI server wasn't started by you directly, but by a framework/tool you use (eg. JRun). And, the RMI might not actually be being used for anything.</p>\n\n<p>The net result is a System.gc() call once a minute. On a heavily loaded system, you will see the following output in your logs - 60 seconds of activity followed by a long gc pause followed by 60 seconds of activity followed by a long gc pause. This is fatal to throughput.</p>\n\n<p>The solution is to turn off explicit gc using -XX:+DisableExplicitGC</p>\n"},{"tags":[],"owner":{"display_name":"Neil Bartlett"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1232536963,"creation_date":1232536963,"answer_id":464894,"question_id":461896,"body_markdown":"Not exactly a bug but, the worst sin is providing a library you intend other people to use, but not stating which classes/methods are thread-safe and which ones must only be called from a single thread etc.\r\n\r\nMore people should make use of the concurrency annotations (e.g. @ThreadSafe, @GuardedBy etc) described in Goetz&#39;s book.","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>Not exactly a bug but, the worst sin is providing a library you intend other people to use, but not stating which classes/methods are thread-safe and which ones must only be called from a single thread etc.</p>\n\n<p>More people should make use of the concurrency annotations (e.g. @ThreadSafe, @GuardedBy etc) described in Goetz's book.</p>\n"},{"comments":[{"owner":{"account_id":4938,"reputation":69433,"user_id":7671,"accept_rate":70,"display_name":"Alex Miller"},"score":5,"creation_date":1232563229,"post_id":466334,"comment_id":284588,"body_markdown":"good example.  I think I&#39;d chalk this up more generally as &quot;composition of atomic operations is not atomic&quot;.  (See volatile field++ for another simple example)","body":"good example.  I think I&#39;d chalk this up more generally as &quot;composition of atomic operations is not atomic&quot;.  (See volatile field++ for another simple example)"}],"tags":[],"owner":{"display_name":"Nick"},"comment_count":1,"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1528942083,"creation_date":1232560645,"answer_id":466334,"question_id":461896,"body_markdown":"It can be easy to think synchronized collections grant you more protection than they actually do, and forget to hold the lock between calls. I have seen this mistake a few times:\r\n\r\n     List&lt;String&gt; l = Collections.synchronizedList(new ArrayList&lt;String&gt;());\r\n     String[] s = l.toArray(new String[l.size()]);\r\n\r\nFor example, in the second line above, the `toArray()` and `size()` methods are both thread safe in their own right, but the `size()` is evaluated separately from the `toArray()`, and the lock on the List is not held between these two calls. \r\n\r\nIf you run this code with another thread **concurrently** removing items from the list, sooner or later you will end up with a new `String[]` returned which is larger than required to hold all the elements in the list, and has null values in the tail. It is easy to think that because the two method calls to the List occur in a single line of code this is somehow an atomic operation, but it is not.\r\n\r\n\r\n\r\n","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>It can be easy to think synchronized collections grant you more protection than they actually do, and forget to hold the lock between calls. I have seen this mistake a few times:</p>\n\n<pre><code> List&lt;String&gt; l = Collections.synchronizedList(new ArrayList&lt;String&gt;());\n String[] s = l.toArray(new String[l.size()]);\n</code></pre>\n\n<p>For example, in the second line above, the <code>toArray()</code> and <code>size()</code> methods are both thread safe in their own right, but the <code>size()</code> is evaluated separately from the <code>toArray()</code>, and the lock on the List is not held between these two calls. </p>\n\n<p>If you run this code with another thread <strong>concurrently</strong> removing items from the list, sooner or later you will end up with a new <code>String[]</code> returned which is larger than required to hold all the elements in the list, and has null values in the tail. It is easy to think that because the two method calls to the List occur in a single line of code this is somehow an atomic operation, but it is not.</p>\n"},{"tags":[],"owner":{"account_id":23143,"reputation":53986,"user_id":57752,"accept_rate":73,"display_name":"Eddie"},"comment_count":0,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1232601947,"creation_date":1232601947,"answer_id":468126,"question_id":461896,"body_markdown":"The most recent Concurrency-related bug I ran into was an object that in its constructor created an ExecutorService, but when the object was no longer referenced, it had never shutdown the ExecutorService.  Thus, over a period of weeks, *thousands* of threads leaked, eventually causing the system to crash.  (Technically, it didn&#39;t crash, but it did stop functioning properly, while continuing to run.)\r\n\r\nTechnically, I suppose this isn&#39;t a concurrency problem, but it&#39;s a problem relating to use of the java.util.concurrency libraries.\r\n","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>The most recent Concurrency-related bug I ran into was an object that in its constructor created an ExecutorService, but when the object was no longer referenced, it had never shutdown the ExecutorService.  Thus, over a period of weeks, <em>thousands</em> of threads leaked, eventually causing the system to crash.  (Technically, it didn't crash, but it did stop functioning properly, while continuing to run.)</p>\n\n<p>Technically, I suppose this isn't a concurrency problem, but it's a problem relating to use of the java.util.concurrency libraries.</p>\n"},{"comments":[{"owner":{"account_id":378721,"reputation":47508,"user_id":731620,"accept_rate":80,"display_name":"ratchet freak"},"score":0,"creation_date":1312139591,"post_id":468144,"comment_id":8203371,"body_markdown":"or you could get the Thread of the looper and don&#39;t call await when stop is called from the same thread","body":"or you could get the Thread of the looper and don&#39;t call await when stop is called from the same thread"}],"tags":[],"owner":{"account_id":23143,"reputation":53986,"user_id":57752,"accept_rate":73,"display_name":"Eddie"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1232603013,"creation_date":1232603013,"answer_id":468144,"question_id":461896,"body_markdown":"I ran into a pseudo-deadlock from an I/O thread that created a countdown latch.  A vastly simplified version of the problem is like:\r\n\r\n&lt;pre&gt;\r\npublic class MyReader implements Runnable {\r\n\r\n  private final CountDownLatch done = new CountDownLatch(1);\r\n  private volatile isOkToRun = true;\r\n\r\n  public void run() {\r\n    while (isOkToRun) {\r\n       sendMessage(getMessaage());\r\n    }\r\n    done.countDown();\r\n  }\r\n\r\n  public void stop() {\r\n    isOkToRun = false;\r\n    done.await();\r\n  }\r\n\r\n}\r\n&lt;/pre&gt;\r\n\r\nThe idea of stop() is that it didn&#39;t return until the thread had exited, so when it returned the system was in a known state.  This is OK, unless sendMessage() results in the invokation of stop(), where it will wait forever.  As long as stop() is never invoked from the Runnable, everything will work as you expect.  In a large application, however, the activity of the Runnable&#39;s thread may not be obvious!\r\n\r\nThe solution was to call await() with a timeout of a few seconds, and to log a stack dump and complaint any time the timeout occurred.  This preserved the desired behavior when it was possible, and exposed coding problems as they were encountered.\r\n","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>I ran into a pseudo-deadlock from an I/O thread that created a countdown latch.  A vastly simplified version of the problem is like:</p>\n\n<pre>\npublic class MyReader implements Runnable {\n\n  private final CountDownLatch done = new CountDownLatch(1);\n  private volatile isOkToRun = true;\n\n  public void run() {\n    while (isOkToRun) {\n       sendMessage(getMessaage());\n    }\n    done.countDown();\n  }\n\n  public void stop() {\n    isOkToRun = false;\n    done.await();\n  }\n\n}\n</pre>\n\n<p>The idea of stop() is that it didn't return until the thread had exited, so when it returned the system was in a known state.  This is OK, unless sendMessage() results in the invokation of stop(), where it will wait forever.  As long as stop() is never invoked from the Runnable, everything will work as you expect.  In a large application, however, the activity of the Runnable's thread may not be obvious!</p>\n\n<p>The solution was to call await() with a timeout of a few seconds, and to log a stack dump and complaint any time the timeout occurred.  This preserved the desired behavior when it was possible, and exposed coding problems as they were encountered.</p>\n"},{"comments":[{"owner":{"account_id":9626,"reputation":17894,"user_id":17871,"accept_rate":86,"display_name":"James Schek"},"score":5,"creation_date":1233098295,"post_id":477729,"comment_id":302273,"body_markdown":"In the later JVM&#39;s (1.5 and forward, I think), the use of volatile will fix that as well.","body":"In the later JVM&#39;s (1.5 and forward, I think), the use of volatile will fix that as well."},{"owner":{"account_id":2226,"reputation":786,"user_id":3060,"display_name":"John Russell"},"score":2,"creation_date":1236288595,"post_id":477729,"comment_id":429503,"body_markdown":"Not necessarily. volatile gives you the latest value so it prevents the returning of 1 forever, but it does not provide locking. Its close, but not quite the same.","body":"Not necessarily. volatile gives you the latest value so it prevents the returning of 1 forever, but it does not provide locking. Its close, but not quite the same."},{"owner":{"account_id":175043,"reputation":7315,"user_id":404760,"accept_rate":90,"display_name":"Shawn"},"score":1,"creation_date":1328119444,"post_id":477729,"comment_id":11430825,"body_markdown":"@JohnRussell I thought volatile guarantees a happen-before relationship. isn&#39;t that &quot;locking&quot;?    &quot;A write to a volatile variable (&#167;8.3.1.4) v synchronizes-with all subsequent reads of v by any thread (where subsequent is defined according to the synchronization order).&quot;","body":"@JohnRussell I thought volatile guarantees a happen-before relationship. isn&#39;t that &quot;locking&quot;?    &quot;A write to a volatile variable (&#167;8.3.1.4) v synchronizes-with all subsequent reads of v by any thread (where subsequent is defined according to the synchronization order).&quot;"}],"tags":[],"owner":{"account_id":2226,"reputation":786,"user_id":3060,"display_name":"John Russell"},"comment_count":3,"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1528941551,"creation_date":1232892433,"answer_id":477729,"question_id":461896,"body_markdown":"Until I took a class with Brian Goetz I didn&#39;t realize that the non-synchronized `getter` of a private field mutated through a synchronized `setter` is _never_ guaranteed to return the updated value.  Only when a variable is protected by synchronized block on **both reads AND writes** will you get the guarantee of the latest value of the variable.\r\n\r\n    public class SomeClass{\r\n        private Integer thing = 1;\r\n\r\n        public synchronized void setThing(Integer thing)\r\n            this.thing = thing;\r\n        }\r\n\r\n        /**\r\n         * This may return 1 forever and ever no matter what is set\r\n         * because the read is not synched\r\n         */\r\n        public Integer getThing(){\r\n            return thing;  \r\n        }\r\n    }\r\n\r\n","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>Until I took a class with Brian Goetz I didn't realize that the non-synchronized <code>getter</code> of a private field mutated through a synchronized <code>setter</code> is <em>never</em> guaranteed to return the updated value.  Only when a variable is protected by synchronized block on <strong>both reads AND writes</strong> will you get the guarantee of the latest value of the variable.</p>\n\n<pre><code>public class SomeClass{\n    private Integer thing = 1;\n\n    public synchronized void setThing(Integer thing)\n        this.thing = thing;\n    }\n\n    /**\n     * This may return 1 forever and ever no matter what is set\n     * because the read is not synched\n     */\n    public Integer getThing(){\n        return thing;  \n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":192113,"reputation":931,"user_id":433078,"accept_rate":75,"display_name":"grayger"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1528941402,"creation_date":1233195828,"answer_id":490290,"question_id":461896,"body_markdown":"Starting a thread **within the constructor** of a class is problematic. If the class is extended, the thread can be started **before subclass&#39; constructor** is executed. ","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>Starting a thread <strong>within the constructor</strong> of a class is problematic. If the class is extended, the thread can be started <strong>before subclass' constructor</strong> is executed. </p>\n"},{"tags":[],"owner":{"account_id":13054,"reputation":2642,"user_id":26010,"display_name":"Dov Wasserman"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1233255442,"creation_date":1233255442,"answer_id":492928,"question_id":461896,"body_markdown":"A method saving data to an instance variable in order to &quot;save effort&quot; passing it to helper methods, when another method which can be called concurrently uses the same instance variables for its own purposes.\r\n\r\nThe data should instead be passed around as method parameters for the duration of the synchronized call. This is only a slight simplification of my worst memory:\r\n\r\n    public class UserService {\r\n\r\n        private String userName;\r\n\r\n        public String getUserName() {\r\n            return userName;\r\n        }\r\n      \r\n        public void login(String name) {\r\n            this.userName = name; \r\n            doLogin();\r\n        }\r\n\r\n        private void doLogin() {\r\n            userDao.login(getUserName());\r\n        }\r\n\r\n        public void delete(String name) {\r\n            this.userName = name; \r\n            doDelete();\r\n        }\r\n\r\n        private void doDelete() {\r\n            userDao.delete(getUserName());\r\n        }\r\n \r\n    }\r\n\r\n\r\nThe login and logout methods do not have to be synchronized, logically speaking. But written as-is you get to expeience all sorts of fun customer service calls.","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>A method saving data to an instance variable in order to \"save effort\" passing it to helper methods, when another method which can be called concurrently uses the same instance variables for its own purposes.</p>\n\n<p>The data should instead be passed around as method parameters for the duration of the synchronized call. This is only a slight simplification of my worst memory:</p>\n\n<pre><code>public class UserService {\n\n    private String userName;\n\n    public String getUserName() {\n        return userName;\n    }\n\n    public void login(String name) {\n        this.userName = name; \n        doLogin();\n    }\n\n    private void doLogin() {\n        userDao.login(getUserName());\n    }\n\n    public void delete(String name) {\n        this.userName = name; \n        doDelete();\n    }\n\n    private void doDelete() {\n        userDao.delete(getUserName());\n    }\n\n}\n</code></pre>\n\n<p>The login and logout methods do not have to be synchronized, logically speaking. But written as-is you get to expeience all sorts of fun customer service calls.</p>\n"},{"comments":[{"owner":{"account_id":4249657,"reputation":728,"user_id":3477154,"accept_rate":100,"display_name":"Prabhash Rathore"},"score":0,"creation_date":1454191894,"post_id":531130,"comment_id":57936543,"body_markdown":"It is recommended to use o1.wait() in a while condition with a boolean flag to prevent any spurious wake ups.","body":"It is recommended to use o1.wait() in a while condition with a boolean flag to prevent any spurious wake ups."}],"tags":[],"owner":{"display_name":"Deepak Jain"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1293792386,"creation_date":1234243095,"answer_id":531130,"question_id":461896,"body_markdown":"Concurrency problem of using different lock objects with wait and notify.\r\n\r\nI was trying to use wait() and notifyAll() methods and here is how i used and fell in hell.\r\n\r\nThread1\r\n\r\n    Object o1 = new Object();\r\n    \r\n    synchronized(o1) {\r\n        o1.wait();\r\n    }\r\n\r\n\r\nAnd in other thread.\r\nThread - 2 \r\n\r\n    Object o2 = new Object();\r\n    \r\n    synchronized(o2) {\r\n        o2.notifyAll();\r\n    }\r\n\r\n\r\nThread1 will wait on o1 and Thread2 which should have invoked o1.notifyAll(), is invoking o2.notifyAll(). Thread 1 will never wake up.\r\n\r\nAnd offcourse the common problem of not invoking wait() or notifyAll() within synchronized blocks and not invoking them using the same object that is used to sycnhronze the block.\r\n\r\n    Object o2 = new Object();\r\n    \r\n    synchronized(o2) {\r\n        notifyAll();\r\n    }\r\n\r\nThis will cause IllegalMonitorStateException, since the thread that invoked notifyAll() has invoked notifyAll() using this object but is not the owner of the this lock object. But the current thread is owner of o2 lock object.\r\n\r\n\r\n","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>Concurrency problem of using different lock objects with wait and notify.</p>\n\n<p>I was trying to use wait() and notifyAll() methods and here is how i used and fell in hell.</p>\n\n<p>Thread1</p>\n\n<pre><code>Object o1 = new Object();\n\nsynchronized(o1) {\n    o1.wait();\n}\n</code></pre>\n\n<p>And in other thread.\nThread - 2 </p>\n\n<pre><code>Object o2 = new Object();\n\nsynchronized(o2) {\n    o2.notifyAll();\n}\n</code></pre>\n\n<p>Thread1 will wait on o1 and Thread2 which should have invoked o1.notifyAll(), is invoking o2.notifyAll(). Thread 1 will never wake up.</p>\n\n<p>And offcourse the common problem of not invoking wait() or notifyAll() within synchronized blocks and not invoking them using the same object that is used to sycnhronze the block.</p>\n\n<pre><code>Object o2 = new Object();\n\nsynchronized(o2) {\n    notifyAll();\n}\n</code></pre>\n\n<p>This will cause IllegalMonitorStateException, since the thread that invoked notifyAll() has invoked notifyAll() using this object but is not the owner of the this lock object. But the current thread is owner of o2 lock object.</p>\n"},{"tags":[],"owner":{"account_id":7052,"reputation":48090,"user_id":12048,"accept_rate":94,"display_name":"finnw"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1252692380,"creation_date":1252692380,"answer_id":1412440,"question_id":461896,"body_markdown":"Updating a Swing UI component (typically a progress bar) in a worker thread instead of in the Swing thread (one should of course use &lt;code&gt;SwingUtilities.invokeLater(Runnable)&lt;/code&gt;, but if you forget to do this then the bug can take a long time to surface.)","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>Updating a Swing UI component (typically a progress bar) in a worker thread instead of in the Swing thread (one should of course use <code>SwingUtilities.invokeLater(Runnable)</code>, but if you forget to do this then the bug can take a long time to surface.)</p>\n"},{"tags":[],"owner":{"account_id":86546,"reputation":2020,"user_id":240581,"display_name":"DaveC"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1262214946,"creation_date":1262214946,"answer_id":1983025,"question_id":461896,"body_markdown":"A nasty gotcha I&#39;ve found in java is having multiple threads access a HashMap without synchronization.  If one is reading and one is writing then there is a good chance of the reader ending up in an infinite loop (the bucket node list structure gets corrupted into a looped list).\r\n\r\nObviously you shouldn&#39;t be doing this in the first place (use ConcurrentHashMap or Collections.synch... wrapper), but it seems to be the one that always gets through the net and causes proper thread stuck, system completely broken, usually due to a utility class containing such a map being a few levels down the stack and nobody thinking of it.\r\n","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>A nasty gotcha I've found in java is having multiple threads access a HashMap without synchronization.  If one is reading and one is writing then there is a good chance of the reader ending up in an infinite loop (the bucket node list structure gets corrupted into a looped list).</p>\n\n<p>Obviously you shouldn't be doing this in the first place (use ConcurrentHashMap or Collections.synch... wrapper), but it seems to be the one that always gets through the net and causes proper thread stuck, system completely broken, usually due to a utility class containing such a map being a few levels down the stack and nobody thinking of it.</p>\n"},{"comments":[{"owner":{"account_id":1872651,"reputation":131,"user_id":1694550,"display_name":"Tijuana"},"score":0,"creation_date":1364300946,"post_id":4569410,"comment_id":22185132,"body_markdown":"This is THE most common problem in Java web apps. I&#39;m just curious what are the chances this code will create a problem over time, depending on average number of concurrent requests (and the time period). Could be very useful for estimation if some apps are worth fixing or not.","body":"This is THE most common problem in Java web apps. I&#39;m just curious what are the chances this code will create a problem over time, depending on average number of concurrent requests (and the time period). Could be very useful for estimation if some apps are worth fixing or not."}],"tags":[],"owner":{"account_id":268723,"reputation":1,"user_id":557637,"display_name":"Uxgru Revisions"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1354533284,"creation_date":1293789511,"answer_id":4569410,"question_id":461896,"body_markdown":"Try this code..\r\n\r\n    public class MyServlet implements Servlet{\r\n        private Object something;\r\n    \r\n        public void service(ServletRequest request, ServletResponse response)\r\n            throws ServletException, IOException{\r\n            this.something = request.getAttribute(&quot;something&quot;);\r\n            doSomething();\r\n        }\r\n    \r\n        private void doSomething(){\r\n            this.something ...\r\n        }\r\n    }\r\n\r\n","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>Try this code..</p>\n\n<pre><code>public class MyServlet implements Servlet{\n    private Object something;\n\n    public void service(ServletRequest request, ServletResponse response)\n        throws ServletException, IOException{\n        this.something = request.getAttribute(\"something\");\n        doSomething();\n    }\n\n    private void doSomething(){\n        this.something ...\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":85613,"reputation":21012,"user_id":238578,"accept_rate":75,"display_name":"b_erb"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1293793299,"creation_date":1293793299,"answer_id":4569677,"question_id":461896,"body_markdown":"I think the most frequent concurrency problem in Java is code that actually seems to work so far, although it is not really thread-safe at all. Thanks to a tiny error, it becomes a time bomb and in almost all cases, you don&#39;t know that in advance, because it is not obvious to you. While regular faulty code hopefully fails during tests, concurrent code often only fails eventually and non-reproducible.","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>I think the most frequent concurrency problem in Java is code that actually seems to work so far, although it is not really thread-safe at all. Thanks to a tiny error, it becomes a time bomb and in almost all cases, you don't know that in advance, because it is not obvious to you. While regular faulty code hopefully fails during tests, concurrent code often only fails eventually and non-reproducible.</p>\n"}],"owner":{"account_id":4938,"reputation":69433,"user_id":7671,"accept_rate":70,"display_name":"Alex Miller"},"comment_count":4,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77490,"favorite_count":0,"down_vote_count":5,"up_vote_count":200,"closed_date":1317517209,"accepted_answer_id":462648,"answer_count":49,"score":195,"last_activity_date":1675799234,"creation_date":1232467118,"question_id":461896,"body_markdown":"This is a poll of sorts about common concurrency problems in Java.  An example might be the classic deadlock or race condition or perhaps EDT threading bugs in Swing.  I&#39;m interested both in a breadth of possible issues but also in what issues are most common.  So, please leave one specific answer of a Java concurrency bug per comment and vote up if you see one you&#39;ve encountered.","title":"What is the most frequent concurrency issue you&#39;ve encountered in Java?","body":"<p>This is a poll of sorts about common concurrency problems in Java.  An example might be the classic deadlock or race condition or perhaps EDT threading bugs in Swing.  I'm interested both in a breadth of possible issues but also in what issues are most common.  So, please leave one specific answer of a Java concurrency bug per comment and vote up if you see one you've encountered.</p>\n"},{"tags":["java","mysql","spring","spring-data-jpa","spring-data"],"answers":[{"tags":[],"owner":{"account_id":8192773,"reputation":54,"user_id":17364339,"display_name":"KpekepSalt"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1675798993,"creation_date":1675797578,"answer_id":75378027,"question_id":75377812,"body_markdown":"If you use `GenerationType.AUTO`, Hibernate will choose one of the strategies to generate your id.\r\n\r\n&gt; AUTO - either identity column, sequence or table depending on the underlying DB.\r\n\r\nSo in your case Hibernate uses TABLE (cause MySQL has no sequences feature) and tries to use ismaauser_seq which is not exists. \r\nYou can change `GenerationType`:\r\n\r\n```\r\n@Id\r\n@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n@Column(name = &quot;id&quot;, updatable = false, nullable = false)\r\nprivate Integer id;\r\n```\r\n\r\nor specify generator:\r\n\r\n```\r\n@Id\r\n@GeneratedValue(strategy = GenerationType.AUTO, generator = &quot;native&quot;)\r\n@GenericGenerator(name = &quot;native&quot;, strategy = &quot;native&quot;)\r\n@Column(name = &quot;id&quot;, updatable = false, nullable = false)\r\nprivate Integer id;\r\n```","title":"Java Spring always try to access table &#39;ismaauser_seq&#39;, but I only want it to access to table &#39;ismaauser&#39;","body":"<p>If you use <code>GenerationType.AUTO</code>, Hibernate will choose one of the strategies to generate your id.</p>\n<blockquote>\n<p>AUTO - either identity column, sequence or table depending on the underlying DB.</p>\n</blockquote>\n<p>So in your case Hibernate uses TABLE (cause MySQL has no sequences feature) and tries to use ismaauser_seq which is not exists.\nYou can change <code>GenerationType</code>:</p>\n<pre><code>@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\n@Column(name = &quot;id&quot;, updatable = false, nullable = false)\nprivate Integer id;\n</code></pre>\n<p>or specify generator:</p>\n<pre><code>@Id\n@GeneratedValue(strategy = GenerationType.AUTO, generator = &quot;native&quot;)\n@GenericGenerator(name = &quot;native&quot;, strategy = &quot;native&quot;)\n@Column(name = &quot;id&quot;, updatable = false, nullable = false)\nprivate Integer id;\n</code></pre>\n"}],"owner":{"account_id":27420698,"reputation":13,"user_id":20919182,"display_name":"Rongkuan He"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":180,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75378027,"answer_count":1,"score":1,"last_activity_date":1675798993,"creation_date":1675796289,"question_id":75377812,"body_markdown":"Here is how I define the table need to be accessed.\r\n[enter image description here](https://i.stack.imgur.com/K9f2M.png)\r\n\r\nHere is how I configure my WEB app\r\n[enter image description here](https://i.stack.imgur.com/3oTT8.png)\r\n\r\nHere is my problem.\r\n[enter image description here](https://i.stack.imgur.com/yTVR3.png)\r\n\r\nI don&#39;t know why it always try to access &#39;**_seq&#39;.\r\n\r\nI want to figure out where is the suffix come from.","title":"Java Spring always try to access table &#39;ismaauser_seq&#39;, but I only want it to access to table &#39;ismaauser&#39;","body":"<p>Here is how I define the table need to be accessed.\n<a href=\"https://i.stack.imgur.com/K9f2M.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>Here is how I configure my WEB app\n<a href=\"https://i.stack.imgur.com/3oTT8.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>Here is my problem.\n<a href=\"https://i.stack.imgur.com/yTVR3.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I don't know why it always try to access '**_seq'.</p>\n<p>I want to figure out where is the suffix come from.</p>\n"},{"tags":["java","grails","groovy","spring-security-rest"],"answers":[{"tags":[],"owner":{"account_id":2931318,"reputation":45,"user_id":2511474,"display_name":"Deepak Gupta"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675798562,"creation_date":1673942262,"answer_id":75143373,"question_id":75143372,"body_markdown":"So to resolve above I used below line in build.gradle file\r\n\r\n    plugins {\r\n        id &quot;com.virgo47.ClasspathJar&quot; version &quot;1.0.0&quot;\r\n    }\r\n\r\nand it has solved my issue.\r\n","title":"CreateProcess error=206, The filename or extension is too long while using Spring Security","body":"<p>So to resolve above I used below line in build.gradle file</p>\n<pre><code>plugins {\n    id &quot;com.virgo47.ClasspathJar&quot; version &quot;1.0.0&quot;\n}\n</code></pre>\n<p>and it has solved my issue.</p>\n"}],"owner":{"account_id":2931318,"reputation":45,"user_id":2511474,"display_name":"Deepak Gupta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1675798562,"creation_date":1673942262,"question_id":75143372,"body_markdown":"I am using JDK v.1.8, Grails v.3.3.10. I am trying to implement some of the endpoints of my app as rest and remaining as normal web pages URL. So to achieve this added below lines in build.gradle file\r\n\r\n        `compile &#39;org.grails.plugins:spring-security-rest:2.0.0.M2&#39;`\r\n        `compile &#39;org.grails.plugins:spring-security-core:3.2.0&#39;`\r\n\r\nAfter doing when I was trying to run the grails app I was getting below exception\r\n\r\n&gt; Caused by: java.io.IOException: Cannot run program &quot;C:\\Program Files\\Java\\jdk1.8.0_111\\bin\\java.exe&quot; (in directory &quot;D:\\myprojectfolder&quot;): CreateProcess error=206, The filename or extension is too long\r\n\tat net.rubygrapefruit.platform.internal.DefaultProcessLauncher.start(DefaultProcessLauncher.java:25)\r\n\r\nWhat can I try next?\r\n","title":"CreateProcess error=206, The filename or extension is too long while using Spring Security","body":"<p>I am using JDK v.1.8, Grails v.3.3.10. I am trying to implement some of the endpoints of my app as rest and remaining as normal web pages URL. So to achieve this added below lines in build.gradle file</p>\n<pre><code>    `compile 'org.grails.plugins:spring-security-rest:2.0.0.M2'`\n    `compile 'org.grails.plugins:spring-security-core:3.2.0'`\n</code></pre>\n<p>After doing when I was trying to run the grails app I was getting below exception</p>\n<blockquote>\n<p>Caused by: java.io.IOException: Cannot run program &quot;C:\\Program Files\\Java\\jdk1.8.0_111\\bin\\java.exe&quot; (in directory &quot;D:\\myprojectfolder&quot;): CreateProcess error=206, The filename or extension is too long\nat net.rubygrapefruit.platform.internal.DefaultProcessLauncher.start(DefaultProcessLauncher.java:25)</p>\n</blockquote>\n<p>What can I try next?</p>\n"},{"tags":["java","cookies","servlets","websphere"],"comments":[{"owner":{"account_id":4558101,"reputation":17722,"user_id":3701228,"display_name":"Gas"},"score":0,"creation_date":1675452117,"post_id":75315156,"comment_id":132939623,"body_markdown":"` Connection refused` usually means that there is no connection between your WAS host and target host. Try to use `curl` to verify that connection can be made. Maybe you have firewall issues.","body":"` Connection refused` usually means that there is no connection between your WAS host and target host. Try to use <code>curl</code> to verify that connection can be made. Maybe you have firewall issues."},{"owner":{"account_id":4858075,"reputation":309,"user_id":3918539,"accept_rate":57,"display_name":"timJIN520"},"score":0,"creation_date":1675714276,"post_id":75315156,"comment_id":132984608,"body_markdown":"The network that we are on is the same network for the site that I&#39;m targeting. I dont think its a firewall related. I could be wrong. The site that I&#39;m targeting is a login page where i need to retrieve its Cookie information. Since I&#39;m running my site using WAS, I hit the error when it runs the url.openConnection() code. Could this be a TCP setting related in WAS? I&#39;ve been trying research and get a understand on this.. Thank you for your response!","body":"The network that we are on is the same network for the site that I&#39;m targeting. I dont think its a firewall related. I could be wrong. The site that I&#39;m targeting is a login page where i need to retrieve its Cookie information. Since I&#39;m running my site using WAS, I hit the error when it runs the url.openConnection() code. Could this be a TCP setting related in WAS? I&#39;ve been trying research and get a understand on this.. Thank you for your response!"}],"owner":{"account_id":4858075,"reputation":309,"user_id":3918539,"accept_rate":57,"display_name":"timJIN520"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675798515,"creation_date":1675279150,"question_id":75315156,"body_markdown":"I am having trouble fetching cookies information from an URL in Java web application. My goal is while my web page load, it runs a servlet filter for authentication. When running the servlet filter, I&#39;m trying to fetch cookie information from another site (site that is not in my project) so it can authenticate the user to access my developed html site. When it ran &quot;connection.getContent()&quot; code, I received this error below.\r\n\r\n&gt; java.net.connectException: Connection refused\r\n\r\nThis only happens when running a web application. However, I tested the cookie fetch code in a JAVA Main Method and ran a simple JAVA application. It works and I see the cookie information from the site. I believe this is not a firewall related since the site I&#39;m trying to fetch is under same network and running the simple JAVA application works. It may be WebSphere related. \r\n\r\nI&#39;m using a IBM WebSphere Application Server v9 and JAVA 8 code (work requirement). Also used java.net.* library for fetching cookie information. Eclipse is the tool that I&#39;m using to develop web applications or JAVA application. I&#39;m not a WebSphere expert or am I missing a step in java code, please help.\r\n\r\nHere is the sample servlet filter code of fetching cookie information part.\r\n\r\n \r\n\r\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\t\r\n    \t\ttry {\t\t\r\n    \t\t\tCookieManager cookieManager = new CookieManager();\r\n    \t\t\tcookieManager.setCookiePolicy(CookiePolicy.ACCEPT_ALL);\r\n    \t\t\tCookieHandler.setDefault(cookieManager);\r\n    \t\t\tURL url = new URL(&quot;https://somesite.com/&quot;);\t\t\t\r\n    \t\t\tHttpsURLConnection  connection = (HttpsURLConnection) url.openConnection();\r\n    \t\t\tconnection.getContent();\t\r\n    \t\t\tCookieStore cookies = cookieManager.getCookieStore();\r\n    \t\t\tList&lt;HttpCookie&gt; cookieList = cookies.getCookies();\r\n    \t\t\t  \r\n    \t\t\tfor (HttpCookie cookie : cookieList) {\r\n    \t\t\t  System.out.println(&quot;cookie name: &quot; + cookie.getName());\r\n    \t\t\t  System.out.println(&quot;cookie comment: &quot; + cookie.getComment());\r\n    \t\t\t  System.out.println(&quot;cookie doman: &quot; + cookie.getDomain());\r\n    \t\t\t  System.out.println(&quot;cookie value: &quot; + cookie.getValue());\r\n    \t\t\t  System.out.println(&quot;----------------------------------------&quot;);\r\n    \t\t\t  }\t\t\r\n    \t\t} catch (Exception e) {\r\n    \t\t\t\t// TODO Auto-generated catch block\r\n    \t\t\t\te.printStackTrace();\r\n    \t\t\t}\r\n    \t}\r\n\r\n","title":"Cannot Fetch URL Cookie Information in JAVA code when running WebSphere v9 server - Connection Refused","body":"<p>I am having trouble fetching cookies information from an URL in Java web application. My goal is while my web page load, it runs a servlet filter for authentication. When running the servlet filter, I'm trying to fetch cookie information from another site (site that is not in my project) so it can authenticate the user to access my developed html site. When it ran &quot;connection.getContent()&quot; code, I received this error below.</p>\n<blockquote>\n<p>java.net.connectException: Connection refused</p>\n</blockquote>\n<p>This only happens when running a web application. However, I tested the cookie fetch code in a JAVA Main Method and ran a simple JAVA application. It works and I see the cookie information from the site. I believe this is not a firewall related since the site I'm trying to fetch is under same network and running the simple JAVA application works. It may be WebSphere related.</p>\n<p>I'm using a IBM WebSphere Application Server v9 and JAVA 8 code (work requirement). Also used java.net.* library for fetching cookie information. Eclipse is the tool that I'm using to develop web applications or JAVA application. I'm not a WebSphere expert or am I missing a step in java code, please help.</p>\n<p>Here is the sample servlet filter code of fetching cookie information part.</p>\n<pre><code>public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {    \n        try {       \n            CookieManager cookieManager = new CookieManager();\n            cookieManager.setCookiePolicy(CookiePolicy.ACCEPT_ALL);\n            CookieHandler.setDefault(cookieManager);\n            URL url = new URL(&quot;https://somesite.com/&quot;);         \n            HttpsURLConnection  connection = (HttpsURLConnection) url.openConnection();\n            connection.getContent();    \n            CookieStore cookies = cookieManager.getCookieStore();\n            List&lt;HttpCookie&gt; cookieList = cookies.getCookies();\n              \n            for (HttpCookie cookie : cookieList) {\n              System.out.println(&quot;cookie name: &quot; + cookie.getName());\n              System.out.println(&quot;cookie comment: &quot; + cookie.getComment());\n              System.out.println(&quot;cookie doman: &quot; + cookie.getDomain());\n              System.out.println(&quot;cookie value: &quot; + cookie.getValue());\n              System.out.println(&quot;----------------------------------------&quot;);\n              }     \n        } catch (Exception e) {\n                // TODO Auto-generated catch block\n                e.printStackTrace();\n            }\n    }\n</code></pre>\n"},{"tags":["java","junit","mockito","powermock"],"answers":[{"tags":[],"owner":{"account_id":2673328,"reputation":1649,"user_id":2310221,"accept_rate":81,"display_name":"Markus"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675798506,"creation_date":1675798506,"answer_id":75378188,"question_id":75377849,"body_markdown":"You&#39;re trying to mock a method that is final:\r\n&gt; Also, this error might show up because:\r\n&gt; 1. you stub either of: final/private/equals()/hashCode() methods.\r\n\r\nand `BindException.getBindingResult()` is:\r\n\r\n    public class BindException .. {\r\n    \r\n        ...\r\n    \r\n    \tpublic final BindingResult getBindingResult() {\r\n    \t\treturn this.bindingResult;\r\n    \t}\r\n    }\r\n\r\nIt&#39;s hard to tell without seeing your code, but you&#39;re probably not using PowerMock correctly. This answer gives an example on how to mock a final method: [Can Powermockito mock final method in non-final concrete class?](https://stackoverflow.com/a/12142046/2310221)","title":"Error:org.mockito.exceptions.misusing.MissingMethodInvocationException","body":"<p>You're trying to mock a method that is final:</p>\n<blockquote>\n<p>Also, this error might show up because:</p>\n<ol>\n<li>you stub either of: final/private/equals()/hashCode() methods.</li>\n</ol>\n</blockquote>\n<p>and <code>BindException.getBindingResult()</code> is:</p>\n<pre><code>public class BindException .. {\n\n    ...\n\n    public final BindingResult getBindingResult() {\n        return this.bindingResult;\n    }\n}\n</code></pre>\n<p>It's hard to tell without seeing your code, but you're probably not using PowerMock correctly. This answer gives an example on how to mock a final method: <a href=\"https://stackoverflow.com/a/12142046/2310221\">Can Powermockito mock final method in non-final concrete class?</a></p>\n"}],"owner":{"account_id":27706510,"reputation":13,"user_id":21150033,"display_name":"Aditi Mogha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":256,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75378188,"answer_count":1,"score":0,"last_activity_date":1675798506,"creation_date":1675796477,"question_id":75377849,"body_markdown":"I am getting the below error while upgrading java to  17 and mockito to 3.7.7 and junit4 to junit 5 and also I am using these powermock dependencies.\r\n\r\n`                    &#39;org.powermock:powermock-module-junit4:2.0.7&#39;,\r\n                    &#39;org.powermock:powermock-core:2.0.7&#39;,\r\n                    &#39;org.powermock:powermock-api-mockito2:2.0.7&#39;`\r\n\r\n```\r\norg.mockito.exceptions.misusing.MissingMethodInvocationException: \r\nwhen() requires an argument which has to be &#39;a method call on a mock&#39;.\r\nFor example:\r\n    when(mock.getArticles()).thenReturn(articles);\r\n\r\nAlso, this error might show up because:\r\n1. you stub either of: final/private/equals()/hashCode() methods.\r\n   Those methods *cannot* be stubbed/verified.\r\n   Mocking methods declared on non-public parent classes is not supported.\r\n2. inside when() you don&#39;t call method on mock but on some other object.\r\n\r\n\tat app//com.expedia.risk.clm.web.exception.handler.RestExceptionMappingHandlerTest.shouldHandleMethodArgumentNotValid(RestExceptionMappingHandlerTest.java:118)\r\n\tat app//org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)\r\n\tat app//org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat app//org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)\r\n\tat app//org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n\tat app//org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\r\n\tat app//org.mockito.internal.runners.DefaultInternalRunner$1$1.evaluate(DefaultInternalRunner.java:54)\r\n\tat app//org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\r\n\tat app//org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)\r\n\tat app//org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)\r\n\tat app//org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)\r\n\tat app//org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)\r\n\tat app//org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)\r\n\tat app//org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)\r\n\tat app//org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)\r\n\tat app//org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)\r\n\tat app//org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)\r\n\tat app//org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\r\n\tat app//org.junit.runners.ParentRunner.run(ParentRunner.java:413)\r\n\tat app//org.mockito.internal.runners.DefaultInternalRunner$1.run(DefaultInternalRunner.java:99)\r\n\tat app//org.mockito.internal.runners.DefaultInternalRunner.run(DefaultInternalRunner.java:105)\r\n\tat app//org.mockito.internal.runners.StrictRunner.run(StrictRunner.java:40)\r\n```\r\n\r\nMy test case code is like this. Could someone please help how to resolve this.\r\n\r\n\r\n```\r\n    @Test\r\n    public void shouldHandleMethodArgumentNotValid() {\r\n        final Set&lt;InputError&gt; testInputErrors = Collections.singleton(new InputError(&quot;test&quot;, &quot;test&quot;));\r\n        final String expectedMessage = String.format(&quot;Invalid input. Details: %s&quot;, testInputErrors.toString());\r\n        final MethodArgumentNotValidException testException = mock(MethodArgumentNotValidException.class);\r\n        final BindingResult testBindingResult = mock(BindingResult.class);\r\n        final List&lt;ObjectError&gt; testErrors = Collections.singletonList(new ObjectError(&quot;test&quot;, &quot;test&quot;));\r\n        when(testException.getBindingResult()).thenReturn(testBindingResult);\r\n        when(testBindingResult.getAllErrors()).thenReturn(testErrors);\r\n\r\n        final ResponseEntity&lt;ClmErrorResponse&gt; actualResponse = handler.handleMethodArgumentNotValid(testException);\r\n\r\n        assertThat(actualResponse.getStatusCode(), is(HttpStatus.BAD_REQUEST));\r\n        final ClmErrorResponse errorResponse = actualResponse.getBody();\r\n        assertThat(errorResponse.getCode(), is(&quot;39071&quot;));\r\n        assertThat(errorResponse.getMessage(), is(expectedMessage));\r\n        assertThat(errorResponse.getInputErrors(), is(testInputErrors));\r\n        verify(testException).getBindingResult();\r\n        verify(testBindingResult).getAllErrors();\r\n        verifyNoMoreInteractions(testBindingResult);\r\n    }\r\n```\r\n\r\n\r\n\r\ntry upgrading and degrading the versions of mockito and powermock.","title":"Error:org.mockito.exceptions.misusing.MissingMethodInvocationException","body":"<p>I am getting the below error while upgrading java to  17 and mockito to 3.7.7 and junit4 to junit 5 and also I am using these powermock dependencies.</p>\n<p><code>                    'org.powermock:powermock-module-junit4:2.0.7', 'org.powermock:powermock-core:2.0.7', 'org.powermock:powermock-api-mockito2:2.0.7'</code></p>\n<pre><code>org.mockito.exceptions.misusing.MissingMethodInvocationException: \nwhen() requires an argument which has to be 'a method call on a mock'.\nFor example:\n    when(mock.getArticles()).thenReturn(articles);\n\nAlso, this error might show up because:\n1. you stub either of: final/private/equals()/hashCode() methods.\n   Those methods *cannot* be stubbed/verified.\n   Mocking methods declared on non-public parent classes is not supported.\n2. inside when() you don't call method on mock but on some other object.\n\n    at app//com.expedia.risk.clm.web.exception.handler.RestExceptionMappingHandlerTest.shouldHandleMethodArgumentNotValid(RestExceptionMappingHandlerTest.java:118)\n    at app//org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)\n    at app//org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at app//org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)\n    at app//org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n    at app//org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\n    at app//org.mockito.internal.runners.DefaultInternalRunner$1$1.evaluate(DefaultInternalRunner.java:54)\n    at app//org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\n    at app//org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)\n    at app//org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)\n    at app//org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)\n    at app//org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)\n    at app//org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)\n    at app//org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)\n    at app//org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)\n    at app//org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)\n    at app//org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)\n    at app//org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\n    at app//org.junit.runners.ParentRunner.run(ParentRunner.java:413)\n    at app//org.mockito.internal.runners.DefaultInternalRunner$1.run(DefaultInternalRunner.java:99)\n    at app//org.mockito.internal.runners.DefaultInternalRunner.run(DefaultInternalRunner.java:105)\n    at app//org.mockito.internal.runners.StrictRunner.run(StrictRunner.java:40)\n</code></pre>\n<p>My test case code is like this. Could someone please help how to resolve this.</p>\n<pre><code>    @Test\n    public void shouldHandleMethodArgumentNotValid() {\n        final Set&lt;InputError&gt; testInputErrors = Collections.singleton(new InputError(&quot;test&quot;, &quot;test&quot;));\n        final String expectedMessage = String.format(&quot;Invalid input. Details: %s&quot;, testInputErrors.toString());\n        final MethodArgumentNotValidException testException = mock(MethodArgumentNotValidException.class);\n        final BindingResult testBindingResult = mock(BindingResult.class);\n        final List&lt;ObjectError&gt; testErrors = Collections.singletonList(new ObjectError(&quot;test&quot;, &quot;test&quot;));\n        when(testException.getBindingResult()).thenReturn(testBindingResult);\n        when(testBindingResult.getAllErrors()).thenReturn(testErrors);\n\n        final ResponseEntity&lt;ClmErrorResponse&gt; actualResponse = handler.handleMethodArgumentNotValid(testException);\n\n        assertThat(actualResponse.getStatusCode(), is(HttpStatus.BAD_REQUEST));\n        final ClmErrorResponse errorResponse = actualResponse.getBody();\n        assertThat(errorResponse.getCode(), is(&quot;39071&quot;));\n        assertThat(errorResponse.getMessage(), is(expectedMessage));\n        assertThat(errorResponse.getInputErrors(), is(testInputErrors));\n        verify(testException).getBindingResult();\n        verify(testBindingResult).getAllErrors();\n        verifyNoMoreInteractions(testBindingResult);\n    }\n</code></pre>\n<p>try upgrading and degrading the versions of mockito and powermock.</p>\n"},{"tags":["python","java","android","json"],"owner":{"account_id":21452631,"reputation":11,"user_id":15804788,"display_name":"Elementswelder"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675797627,"creation_date":1675755416,"question_id":75370160,"body_markdown":"I&#39;m running a Python Back-End with an Android client in Java. I&#39;m trying to return a JSON response to a request that I&#39;m receiving. I&#39;ve had previous issues with this, as my request has objects within objects but that was solved using a custom Encoder. Now, when I return my response after using json.dumps(), my Java client, parses it through GSON but it&#39;s invalid\r\n\r\n&gt; com.google.gson.JsonSyntaxException: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 2 path $\r\n\r\nWhen printing the response out in the console I get:\r\n\r\n```\r\n{&quot;user&quot;: {&quot;firstName&quot;: &quot;Bob&quot;, &quot;lastName&quot;: &quot;Miller&quot;, &quot;username&quot;: &quot;bobbyboi&quot;, &quot;profileImage&quot;: &quot;image&quot;}, &quot;authToken&quot;: {&quot;authToken&quot;: &quot;authtoken&quot;, &quot;dateTime&quot;: &quot;time&quot;}}\r\n```\r\nwhich looks correct, but not for GSON. It ends up coming in as\r\n```\r\n&quot;{&quot;user&quot;: {&quot;firstName&quot;: &quot;Bob&quot;, &quot;lastName&quot;: &quot;Miller&quot;, &quot;username&quot;: &quot;bobbyboi&quot;, &quot;profileImage&quot;: &quot;image&quot;}, &quot;authToken&quot;: {&quot;authToken&quot;: &quot;authtoken&quot;, &quot;dateTime&quot;: &quot;time&quot;}}&quot;\r\n```\r\nwith the extra apostrophes at the end.\r\n\r\nHere is my python code:\r\n\r\n```\r\n        dummyUser = User(&quot;Bob&quot;, &quot;Miller&quot;, &quot;bobbyboi&quot;, &quot;image&quot;)\r\n        dummyAuth = AuthToken(&quot;authtoken&quot;, &quot;time&quot;)\r\n        response = LoginResponse(dummyUser, dummyAuth)\r\n        return json.dumps(response, cls=MyEncoder)\r\n```\r\n\r\nAnd the encoder, just in case that&#39;s the issue:\r\n\r\n```\r\nclass MyEncoder(json.JSONEncoder):\r\n    def default(self, o):\r\n        if hasattr(o, &quot;encode&quot;):\r\n            return o.encode()\r\n        else:\r\n            return json.JSONEncoder.default(self,o)\r\n```\r\n\r\nAnd then the Java GSON:\r\n\r\n```\r\n    if (http.getResponseCode() == HttpURLConnection.HTTP_OK){\r\n           InputStream inputStream = http.getInputStream();\r\n           String parseRequest = readString(inputStream);\r\n           System.out.println(parseRequest);\r\n           LoginResponse response = gson.fromJson(parseRequest, LoginResponse.class);\r\n```","title":"Python json.dumps() is returning with an extra apostrophe around the json, corrupting it. How can I fix it?","body":"<p>I'm running a Python Back-End with an Android client in Java. I'm trying to return a JSON response to a request that I'm receiving. I've had previous issues with this, as my request has objects within objects but that was solved using a custom Encoder. Now, when I return my response after using json.dumps(), my Java client, parses it through GSON but it's invalid</p>\n<blockquote>\n<p>com.google.gson.JsonSyntaxException: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 2 path $</p>\n</blockquote>\n<p>When printing the response out in the console I get:</p>\n<pre><code>{&quot;user&quot;: {&quot;firstName&quot;: &quot;Bob&quot;, &quot;lastName&quot;: &quot;Miller&quot;, &quot;username&quot;: &quot;bobbyboi&quot;, &quot;profileImage&quot;: &quot;image&quot;}, &quot;authToken&quot;: {&quot;authToken&quot;: &quot;authtoken&quot;, &quot;dateTime&quot;: &quot;time&quot;}}\n</code></pre>\n<p>which looks correct, but not for GSON. It ends up coming in as</p>\n<pre><code>&quot;{&quot;user&quot;: {&quot;firstName&quot;: &quot;Bob&quot;, &quot;lastName&quot;: &quot;Miller&quot;, &quot;username&quot;: &quot;bobbyboi&quot;, &quot;profileImage&quot;: &quot;image&quot;}, &quot;authToken&quot;: {&quot;authToken&quot;: &quot;authtoken&quot;, &quot;dateTime&quot;: &quot;time&quot;}}&quot;\n</code></pre>\n<p>with the extra apostrophes at the end.</p>\n<p>Here is my python code:</p>\n<pre><code>        dummyUser = User(&quot;Bob&quot;, &quot;Miller&quot;, &quot;bobbyboi&quot;, &quot;image&quot;)\n        dummyAuth = AuthToken(&quot;authtoken&quot;, &quot;time&quot;)\n        response = LoginResponse(dummyUser, dummyAuth)\n        return json.dumps(response, cls=MyEncoder)\n</code></pre>\n<p>And the encoder, just in case that's the issue:</p>\n<pre><code>class MyEncoder(json.JSONEncoder):\n    def default(self, o):\n        if hasattr(o, &quot;encode&quot;):\n            return o.encode()\n        else:\n            return json.JSONEncoder.default(self,o)\n</code></pre>\n<p>And then the Java GSON:</p>\n<pre><code>    if (http.getResponseCode() == HttpURLConnection.HTTP_OK){\n           InputStream inputStream = http.getInputStream();\n           String parseRequest = readString(inputStream);\n           System.out.println(parseRequest);\n           LoginResponse response = gson.fromJson(parseRequest, LoginResponse.class);\n</code></pre>\n"},{"tags":["java","apache-poi","pivot-table"],"answers":[{"comments":[{"owner":{"account_id":23525864,"reputation":3,"user_id":17572412,"display_name":"GVA32156"},"score":0,"creation_date":1676017764,"post_id":75377976,"comment_id":133056181,"body_markdown":"Your Aspose&#39;s solution is tested and worked as expected, thank you. I accept it since there is no Apache POI solution proposed for now.","body":"Your Aspose&#39;s solution is tested and worked as expected, thank you. I accept it since there is no Apache POI solution proposed for now."}],"tags":[],"owner":{"account_id":4153548,"reputation":1826,"user_id":3405358,"display_name":"Amjad Sahi"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675797198,"creation_date":1675797198,"answer_id":75377976,"question_id":75371628,"body_markdown":"You may use [Aspose.Cells for Java][1] for the task. You can use relevant APIs to get items of a pivot field, you can do multiple items selection and removal accordingly.\r\nSee the following example for your reference.\r\n\r\ne.g.\r\n\r\n**Sample code:**\r\n```java\r\n        Workbook wb_demo = new Workbook(&quot;f:\\\\files\\\\Book1.xlsx&quot;);\r\n        PivotTable pt_demo = wb_demo.getWorksheets().get(0).getPivotTables().get(0);\r\n\r\n        //Get the first Pivot column field\r\n        PivotField src_t_field = pt_demo.getColumnFields().get(0);\r\n        src_t_field.setMultipleItemSelectionAllowed(true);\r\n\r\n        System.out.println(src_t_field.getName());\r\n        System.out.println(&quot;Total Items: &quot; + src_t_field.getItems().length);\r\n        System.out.println(&quot;Total Items: &quot; + src_t_field.getPivotItems().getCount());\r\n\r\n        PivotItemCollection collection_src_t = src_t_field.getPivotItems();\r\n        System.out.println(collection_src_t.getCount());\r\n        for (int i = 0; i &lt; collection_src_t.getCount(); i++)\r\n        {\r\n            PivotItem item = collection_src_t.get(i);\r\n            System.out.println(item.getName());\r\n\r\n            if(item.getName().equals(&quot;0.5 kg&quot;))\r\n            {\r\n               item.setHidden(true);\r\n            }\r\n            else if(item.getName().equals(&quot;1 kg&quot;))\r\n            {\r\n                    item.setHidden(false);\r\n            }\r\n            else if(item.getName().equals(&quot;1.5 kg&quot;))\r\n            {\r\n                    item.setHidden(true);\r\n            }\r\n             else if(item.getName().equals(&quot;2.5 kg&quot;))\r\n            {\r\n                    item.setHidden(false);\r\n            }\r\n            else if (item.getName().equals(&quot;3 kg&quot;))\r\n            {\r\n                    item.setHidden(true);\r\n            }\r\n            else if(item.getName().equals(&quot;6.5 kg&quot;))\r\n            {\r\n                    item.setHidden(false);\r\n            }\r\n\r\n        }\r\n\r\n        pt_demo.calculateData();\r\n\r\n        wb_demo.save(&quot;f:\\\\files\\\\out1.xlsx&quot;); \r\n```\r\n\r\nPS. I am working as Support developer/ Evangelist at Aspose.\r\n\r\n  [1]: https://products.aspose.com/cells/java/","title":"How to get items of a pivot field Apache POI - Multiple items selection/removal?","body":"<p>You may use <a href=\"https://products.aspose.com/cells/java/\" rel=\"nofollow noreferrer\">Aspose.Cells for Java</a> for the task. You can use relevant APIs to get items of a pivot field, you can do multiple items selection and removal accordingly.\nSee the following example for your reference.</p>\n<p>e.g.</p>\n<p><strong>Sample code:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>        Workbook wb_demo = new Workbook(&quot;f:\\\\files\\\\Book1.xlsx&quot;);\n        PivotTable pt_demo = wb_demo.getWorksheets().get(0).getPivotTables().get(0);\n\n        //Get the first Pivot column field\n        PivotField src_t_field = pt_demo.getColumnFields().get(0);\n        src_t_field.setMultipleItemSelectionAllowed(true);\n\n        System.out.println(src_t_field.getName());\n        System.out.println(&quot;Total Items: &quot; + src_t_field.getItems().length);\n        System.out.println(&quot;Total Items: &quot; + src_t_field.getPivotItems().getCount());\n\n        PivotItemCollection collection_src_t = src_t_field.getPivotItems();\n        System.out.println(collection_src_t.getCount());\n        for (int i = 0; i &lt; collection_src_t.getCount(); i++)\n        {\n            PivotItem item = collection_src_t.get(i);\n            System.out.println(item.getName());\n\n            if(item.getName().equals(&quot;0.5 kg&quot;))\n            {\n               item.setHidden(true);\n            }\n            else if(item.getName().equals(&quot;1 kg&quot;))\n            {\n                    item.setHidden(false);\n            }\n            else if(item.getName().equals(&quot;1.5 kg&quot;))\n            {\n                    item.setHidden(true);\n            }\n             else if(item.getName().equals(&quot;2.5 kg&quot;))\n            {\n                    item.setHidden(false);\n            }\n            else if (item.getName().equals(&quot;3 kg&quot;))\n            {\n                    item.setHidden(true);\n            }\n            else if(item.getName().equals(&quot;6.5 kg&quot;))\n            {\n                    item.setHidden(false);\n            }\n\n        }\n\n        pt_demo.calculateData();\n\n        wb_demo.save(&quot;f:\\\\files\\\\out1.xlsx&quot;); \n</code></pre>\n<p>PS. I am working as Support developer/ Evangelist at Aspose.</p>\n"}],"owner":{"account_id":23525864,"reputation":3,"user_id":17572412,"display_name":"GVA32156"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":190,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75377976,"answer_count":1,"score":0,"last_activity_date":1675797198,"creation_date":1675763664,"question_id":75371628,"body_markdown":"After creating an Excel pivot table via Apache POI, I would like to access a specific pivot field definition to get its explicit items list. Instead of &quot;Select all&quot; activated by default, I would like to select/remove some items from this list programmatically.\r\n\r\nIs there any solution to do it properly in Java with Apache POI library ? \r\nI am also open to alternative solutions like using Aspose features eventually.\r\n\r\nBecause I did not find any solution to get the explicit items, here is my workaround solution to select explicit items from the known list, helped by the following topic : https://stackoverflow.com/questions/51288301/how-to-set-multiple-default-value-in-apache-poi-pivot-table-report-filter\r\n\r\nThis simply consists into adding a dummy element and delete it afterwards\r\n\r\n```\r\npublic void setPivotFieldDataFilterPositive(String sheetName, String pivotName, String fieldName, List filterValuesList) { \r\n\r\n    XSSFPivotTable pivotTable = getPivotTable(sheetName, pivotName);\r\n\r\n    int fieldIndex = table.findColumnIndex(fieldName);\r\n    List&lt;CTPivotField&gt; pivotFieldsList = pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldList();\r\n    CTPivotField ctPivotField = pivotFieldsList.get(fieldIndex);\r\n    for (int i = 0; i &lt; filterValuesList.size(); i++) {\r\n        //take the first 4 items as numbered items: &lt;item x=&quot;0&quot;/&gt;&lt;item x=&quot;1&quot;/&gt;&lt;item x=&quot;2&quot;/&gt;&lt;item x=&quot;3&quot;/&gt;\r\n        ctPivotField.getItems().getItemArray(i).unsetT();\r\n        ctPivotField.getItems().getItemArray(i).setX((long)i);\r\n        //build a cache definition which has shared elements for those items \r\n        //&lt;sharedItems&gt;&lt;s v=&quot;City 1&quot;/&gt;&lt;s v=&quot;City 2&quot;/&gt;&lt;s v=&quot;City 3&quot;/&gt;&lt;s v=&quot;City 4&quot;/&gt;&lt;/sharedItems&gt;\r\n        pivotTable.getPivotCacheDefinition().getCTPivotCacheDefinition().getCacheFields().getCacheFieldArray(fieldIndex).getSharedItems().addNewS().setV(filterValuesList.get(i));\r\n    }\r\n    System.out.println(&quot;count : &quot;+pivotTable.getPivotCacheDefinition().getCTPivotCacheDefinition().getCacheFields().getCacheFieldArray(fieldIndex).getSharedItems().sizeOfSArray());\r\n    ctPivotField.setMultipleItemSelectionAllowed(true);\r\n\r\n    //additional dummy element to hide it afterwards\r\n    ctPivotField.getItems().getItemArray(filterValuesList.size()).unsetT();\r\n    ctPivotField.getItems().getItemArray(filterValuesList.size()).setX((long)filterValuesList.size());\r\n    pivotTable.getPivotCacheDefinition().getCTPivotCacheDefinition().getCacheFields().getCacheFieldArray(fieldIndex).getSharedItems().addNewS().setV(null);//item with empty name\r\n\r\n    //hide dummy element\r\n    ctPivotField.getItems().getItemArray(filterValuesList.size()).setH(true);//item hidden but an empty item still visible on the list\r\n    //ctPivotField.getItems().removeItem(filterValuesList.size()); //does not keep the filtering\r\n}\r\n```\r\n\r\nIt works but it&#39;s a crazy way to do it and I would like to avoid modifying the underlying XML structure too much.\r\n\r\n\r\n","title":"How to get items of a pivot field Apache POI - Multiple items selection/removal?","body":"<p>After creating an Excel pivot table via Apache POI, I would like to access a specific pivot field definition to get its explicit items list. Instead of &quot;Select all&quot; activated by default, I would like to select/remove some items from this list programmatically.</p>\n<p>Is there any solution to do it properly in Java with Apache POI library ?\nI am also open to alternative solutions like using Aspose features eventually.</p>\n<p>Because I did not find any solution to get the explicit items, here is my workaround solution to select explicit items from the known list, helped by the following topic : <a href=\"https://stackoverflow.com/questions/51288301/how-to-set-multiple-default-value-in-apache-poi-pivot-table-report-filter\">How to set Multiple default value in Apache POI pivot table report filter</a></p>\n<p>This simply consists into adding a dummy element and delete it afterwards</p>\n<pre><code>public void setPivotFieldDataFilterPositive(String sheetName, String pivotName, String fieldName, List filterValuesList) { \n\n    XSSFPivotTable pivotTable = getPivotTable(sheetName, pivotName);\n\n    int fieldIndex = table.findColumnIndex(fieldName);\n    List&lt;CTPivotField&gt; pivotFieldsList = pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldList();\n    CTPivotField ctPivotField = pivotFieldsList.get(fieldIndex);\n    for (int i = 0; i &lt; filterValuesList.size(); i++) {\n        //take the first 4 items as numbered items: &lt;item x=&quot;0&quot;/&gt;&lt;item x=&quot;1&quot;/&gt;&lt;item x=&quot;2&quot;/&gt;&lt;item x=&quot;3&quot;/&gt;\n        ctPivotField.getItems().getItemArray(i).unsetT();\n        ctPivotField.getItems().getItemArray(i).setX((long)i);\n        //build a cache definition which has shared elements for those items \n        //&lt;sharedItems&gt;&lt;s v=&quot;City 1&quot;/&gt;&lt;s v=&quot;City 2&quot;/&gt;&lt;s v=&quot;City 3&quot;/&gt;&lt;s v=&quot;City 4&quot;/&gt;&lt;/sharedItems&gt;\n        pivotTable.getPivotCacheDefinition().getCTPivotCacheDefinition().getCacheFields().getCacheFieldArray(fieldIndex).getSharedItems().addNewS().setV(filterValuesList.get(i));\n    }\n    System.out.println(&quot;count : &quot;+pivotTable.getPivotCacheDefinition().getCTPivotCacheDefinition().getCacheFields().getCacheFieldArray(fieldIndex).getSharedItems().sizeOfSArray());\n    ctPivotField.setMultipleItemSelectionAllowed(true);\n\n    //additional dummy element to hide it afterwards\n    ctPivotField.getItems().getItemArray(filterValuesList.size()).unsetT();\n    ctPivotField.getItems().getItemArray(filterValuesList.size()).setX((long)filterValuesList.size());\n    pivotTable.getPivotCacheDefinition().getCTPivotCacheDefinition().getCacheFields().getCacheFieldArray(fieldIndex).getSharedItems().addNewS().setV(null);//item with empty name\n\n    //hide dummy element\n    ctPivotField.getItems().getItemArray(filterValuesList.size()).setH(true);//item hidden but an empty item still visible on the list\n    //ctPivotField.getItems().removeItem(filterValuesList.size()); //does not keep the filtering\n}\n</code></pre>\n<p>It works but it's a crazy way to do it and I would like to avoid modifying the underlying XML structure too much.</p>\n"},{"tags":["java","jwt","jjwt","base64url"],"comments":[{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":1,"creation_date":1675796095,"post_id":75377558,"comment_id":133004592,"body_markdown":"HMAC-SHA384 (JWS HS384) is 48 bytes which base64-encodes to 64 characters with no leftover bits. **Adding one base64 character to that size field leaves the decoded value the same, so it verifies.** If you add _two_ chars, or delete one char (from that size), or change any char (in that size; a different size field e.g. HS256 might ignore a change to the last char), it will change the decoded valuie and be detected. Similarly changing one char at the end of the payload (second dot-delimited part) might or might not affect the decoded value and thus might or might not be detected.","body":"HMAC-SHA384 (JWS HS384) is 48 bytes which base64-encodes to 64 characters with no leftover bits. <b>Adding one base64 character to that size field leaves the decoded value the same, so it verifies.</b> If you add <i>two</i> chars, or delete one char (from that size), or change any char (in that size; a different size field e.g. HS256 might ignore a change to the last char), it will change the decoded valuie and be detected. Similarly changing one char at the end of the payload (second dot-delimited part) might or might not affect the decoded value and thus might or might not be detected."},{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1675796200,"post_id":75377558,"comment_id":133004624,"body_markdown":"Effectively crossdupe https://crypto.stackexchange.com/questions/102363/is-it-secure-to-sign-a-jwt-using-rs256 though different in detail. See the diagrams in [wikipedia](https://en.wikipedia.org/wiki/Base64#Examples).","body":"Effectively crossdupe <a href=\"https://crypto.stackexchange.com/questions/102363/is-it-secure-to-sign-a-jwt-using-rs256\" title=\"is it secure to sign a jwt using rs256\">crypto.stackexchange.com/questions/102363/&hellip;</a> though different in detail. See the diagrams in <a href=\"https://en.wikipedia.org/wiki/Base64#Examples\" rel=\"nofollow noreferrer\">wikipedia</a>."}],"answers":[{"tags":[],"owner":{"account_id":9899349,"reputation":20524,"user_id":7329832,"display_name":"jps"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675796639,"creation_date":1675796639,"answer_id":75377869,"question_id":75377558,"body_markdown":"It&#39;s not a problem with the secret, but how the Base64Url decoder was implemented.\r\n\r\nThe original signature is 64 characters long, which in Base64Url encoding (6 bits per character) means, that there are 64 * 6 bits = 384 bits encoded. This is exactly as expected when you use the HS384 algorithm.\r\nAnd 384 bits/6 is exactly 64, so the signature can be encoded in a 64 character Base64Url string without any unused bits. Now when you add another character, it means that you add 6 bits. And the decoder in your Java code seems to just ignore these 6 bits, because it&#39;s not enough information for a complete byte. But technically it&#39;s an invalid Base64Url string and would require at least one more character. The decoder used on jwt.io seems to be stricter in this regard.\r\n\r\nSee also https://stackoverflow.com/questions/58492009/jwt-token-decoding-even-when-the-last-character-of-the-signature-is-changed which explains why you sometimes can change the last character of the signature without invalidating it.\r\n","title":"JWT parsed by jjwt-java but showing invalid in jwt.io debugger","body":"<p>It's not a problem with the secret, but how the Base64Url decoder was implemented.</p>\n<p>The original signature is 64 characters long, which in Base64Url encoding (6 bits per character) means, that there are 64 * 6 bits = 384 bits encoded. This is exactly as expected when you use the HS384 algorithm.\nAnd 384 bits/6 is exactly 64, so the signature can be encoded in a 64 character Base64Url string without any unused bits. Now when you add another character, it means that you add 6 bits. And the decoder in your Java code seems to just ignore these 6 bits, because it's not enough information for a complete byte. But technically it's an invalid Base64Url string and would require at least one more character. The decoder used on jwt.io seems to be stricter in this regard.</p>\n<p>See also <a href=\"https://stackoverflow.com/questions/58492009/jwt-token-decoding-even-when-the-last-character-of-the-signature-is-changed\">JWT token decoding even when the last character of the signature is changed</a> which explains why you sometimes can change the last character of the signature without invalidating it.</p>\n"}],"owner":{"account_id":13939282,"reputation":101,"user_id":10065622,"display_name":"Kaustubh Dixit"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":263,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75377869,"answer_count":1,"score":1,"last_activity_date":1675797070,"creation_date":1675794709,"question_id":75377558,"body_markdown":"I am learning about JWS for authentication, and tried to implement using one of the java libraries [jjwt][1]. I created one JWT token string and added a single character to its end. To my surprise, jjwt library parsed it without throwing any exceptions. I don&#39;t know if there is any issue with the library or the algorithm used. I tested the same with [jwt debugger][2] and it is working as expected(showing invalid token). \r\n\r\nCODE :\r\n```\r\npublic class TestJwt {\r\n\t// private static final String JWT_SECRET_KEY = &quot;qdsfkjbwfjn323rwefwdef3kewrwerv5236v56d56w1xweec3wdn3i432oi&quot;;     \t\t// WORKING !!!\r\n\t// private static final String JWT_SECRET_KEY = &quot;qdsfkjbwfjn323rwefwdef3kewrwerv52f36v56d56w1xweec3wdn3i432oi&quot;;    \t\t// WORKING !!!\r\n\t// private static final String JWT_SECRET_KEY = &quot;qdsfkjbwfjn323rwefwdef3kewrwerv52f36345345weec3wdn3i432oi&quot;;       \t\t// WORKING !!!\r\n \t// private static final String JWT_SECRET_KEY = &quot;qdsfkjbwfjn323rwefwdef3kewrwerv52f36345432oi&quot;;  \t\t\t\t   \t\t// NOT WORKING\r\n \t// private static final String JWT_SECRET_KEY = &quot;qdsfkjbwfjn323rwefwdef3kewrwerv52f3632222222245y6454524524tef45432oi&quot;; // NOT WORKING\r\n\t\r\n    private static final String JWT_SECRET_KEY = &quot;qdsfkjbwfjn323rwefwdef3kewrwerv5236v56d56w1xweec3wdn3i432oi&quot;; // WORKING\r\n \tprivate static final Key key = Keys.hmacShaKeyFor(JWT_SECRET_KEY.getBytes());\r\n\t\r\n\r\n\tpublic static void main(String args[]) {\r\n\t\t\r\n\t\tString token = \r\n\t\tJwts.builder()\r\n\t\t\r\n\t\t.claim(&quot;name&quot;, &quot;RANDOM&quot;)\r\n\t\t.claim(&quot;surname&quot;, &quot;ANOTHER_RANDOM&quot;)\r\n\t\r\n\t\t.signWith(key)\r\n\t\t.compact();\r\n\t\t\r\n\t\tSystem.out.println(&quot;TOKEN BEFORE&quot;);\r\n\t\tSystem.out.println(token);\r\n\t\t\r\n\t\t// Adding single character to jwt and still working!!\r\n\t\ttoken = token+&quot;7&quot;;\r\n\t\t\r\n\t\tSystem.out.println(&quot;TOKEN AFTER&quot;);\r\n\t\tSystem.out.println(token);\r\n\t\t\r\n\t\t\r\n\t\tClaims claims = Jwts.parserBuilder()\r\n\t\t\t\t.setSigningKey(key).build()\t\t\t\t\r\n\t\t\t\t.parseClaimsJws(token).getBody();\r\n\t\t\r\n\t\tclaims.forEach((k,v)-&gt;{\r\n\t\t\tSystem.out.println(&quot;________________________&quot;);\r\n\t\t\tSystem.out.println(k + &quot; : &quot;+v);\r\n\t\t\t\r\n\t\t});\r\n\t\t\r\n\t\tSystem.out.println(&quot;________________________&quot;);\t\r\n\t}\r\n}\r\n\r\n```\r\n\r\nOUTPUT :\r\n```\r\nTOKEN BEFORE\r\neyJhbGciOiJIUzM4NCJ9.eyJuYW1lIjoiUkFORE9NIiwic3VybmFtZSI6IkFOT1RIRVJfUkFORE9NIn0.evntuAcZ0Urnv-5QniShmENKNBSzrjoxeNWN0uW-sy-qXzC-G2PJyi316m9LqQH9\r\nTOKEN AFTER\r\neyJhbGciOiJIUzM4NCJ9.eyJuYW1lIjoiUkFORE9NIiwic3VybmFtZSI6IkFOT1RIRVJfUkFORE9NIn0.evntuAcZ0Urnv-5QniShmENKNBSzrjoxeNWN0uW-sy-qXzC-G2PJyi316m9LqQH97\r\n________________________\r\nname : RANDOM\r\n________________________\r\nsurname : ANOTHER_RANDOM\r\n________________________\r\n\r\n```\r\n\r\nI was expecting a SignatureException. I have tested with few keys and random claims, some of them are working but some are parsing without an issue(commented out keys). Should I use more complex keys?\r\n\r\n\r\n  [1]: https://github.com/jwtk/jjwt\r\n  [2]: https://jwt.io/","title":"JWT parsed by jjwt-java but showing invalid in jwt.io debugger","body":"<p>I am learning about JWS for authentication, and tried to implement using one of the java libraries <a href=\"https://github.com/jwtk/jjwt\" rel=\"nofollow noreferrer\">jjwt</a>. I created one JWT token string and added a single character to its end. To my surprise, jjwt library parsed it without throwing any exceptions. I don't know if there is any issue with the library or the algorithm used. I tested the same with <a href=\"https://jwt.io/\" rel=\"nofollow noreferrer\">jwt debugger</a> and it is working as expected(showing invalid token).</p>\n<p>CODE :</p>\n<pre><code>public class TestJwt {\n    // private static final String JWT_SECRET_KEY = &quot;qdsfkjbwfjn323rwefwdef3kewrwerv5236v56d56w1xweec3wdn3i432oi&quot;;          // WORKING !!!\n    // private static final String JWT_SECRET_KEY = &quot;qdsfkjbwfjn323rwefwdef3kewrwerv52f36v56d56w1xweec3wdn3i432oi&quot;;         // WORKING !!!\n    // private static final String JWT_SECRET_KEY = &quot;qdsfkjbwfjn323rwefwdef3kewrwerv52f36345345weec3wdn3i432oi&quot;;            // WORKING !!!\n    // private static final String JWT_SECRET_KEY = &quot;qdsfkjbwfjn323rwefwdef3kewrwerv52f36345432oi&quot;;                         // NOT WORKING\n    // private static final String JWT_SECRET_KEY = &quot;qdsfkjbwfjn323rwefwdef3kewrwerv52f3632222222245y6454524524tef45432oi&quot;; // NOT WORKING\n    \n    private static final String JWT_SECRET_KEY = &quot;qdsfkjbwfjn323rwefwdef3kewrwerv5236v56d56w1xweec3wdn3i432oi&quot;; // WORKING\n    private static final Key key = Keys.hmacShaKeyFor(JWT_SECRET_KEY.getBytes());\n    \n\n    public static void main(String args[]) {\n        \n        String token = \n        Jwts.builder()\n        \n        .claim(&quot;name&quot;, &quot;RANDOM&quot;)\n        .claim(&quot;surname&quot;, &quot;ANOTHER_RANDOM&quot;)\n    \n        .signWith(key)\n        .compact();\n        \n        System.out.println(&quot;TOKEN BEFORE&quot;);\n        System.out.println(token);\n        \n        // Adding single character to jwt and still working!!\n        token = token+&quot;7&quot;;\n        \n        System.out.println(&quot;TOKEN AFTER&quot;);\n        System.out.println(token);\n        \n        \n        Claims claims = Jwts.parserBuilder()\n                .setSigningKey(key).build()             \n                .parseClaimsJws(token).getBody();\n        \n        claims.forEach((k,v)-&gt;{\n            System.out.println(&quot;________________________&quot;);\n            System.out.println(k + &quot; : &quot;+v);\n            \n        });\n        \n        System.out.println(&quot;________________________&quot;); \n    }\n}\n\n</code></pre>\n<p>OUTPUT :</p>\n<pre><code>TOKEN BEFORE\neyJhbGciOiJIUzM4NCJ9.eyJuYW1lIjoiUkFORE9NIiwic3VybmFtZSI6IkFOT1RIRVJfUkFORE9NIn0.evntuAcZ0Urnv-5QniShmENKNBSzrjoxeNWN0uW-sy-qXzC-G2PJyi316m9LqQH9\nTOKEN AFTER\neyJhbGciOiJIUzM4NCJ9.eyJuYW1lIjoiUkFORE9NIiwic3VybmFtZSI6IkFOT1RIRVJfUkFORE9NIn0.evntuAcZ0Urnv-5QniShmENKNBSzrjoxeNWN0uW-sy-qXzC-G2PJyi316m9LqQH97\n________________________\nname : RANDOM\n________________________\nsurname : ANOTHER_RANDOM\n________________________\n\n</code></pre>\n<p>I was expecting a SignatureException. I have tested with few keys and random claims, some of them are working but some are parsing without an issue(commented out keys). Should I use more complex keys?</p>\n"},{"tags":["java","spring","firebase","maven","google-analytics"],"comments":[{"owner":{"account_id":1547313,"reputation":82164,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"score":1,"creation_date":1675797117,"post_id":75377754,"comment_id":133004866,"body_markdown":"The answer to &quot;is it possible&quot; questions is almost always yes. See [ask] for some tips on asking a more specific question.","body":"The answer to &quot;is it possible&quot; questions is almost always yes. See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> for some tips on asking a more specific question."},{"owner":{"account_id":72426,"reputation":573804,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":0,"creation_date":1675797131,"post_id":75377754,"comment_id":133004872,"body_markdown":"See the question I linked, and from the API mentioned there this seems a good palce to start: https://developers.google.com/analytics/devguides/reporting/data/v1/quickstart-client-libraries#java_1","body":"See the question I linked, and from the API mentioned there this seems a good palce to start: <a href=\"https://developers.google.com/analytics/devguides/reporting/data/v1/quickstart-client-libraries#java_1\" rel=\"nofollow noreferrer\">developers.google.com/analytics/devguides/reporting/data/v1/&zwnj;&#8203;&hellip;</a>"}],"owner":{"account_id":13568468,"reputation":19,"user_id":9787846,"display_name":"SPMK"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1675797097,"answer_count":0,"score":0,"last_activity_date":1675797049,"creation_date":1675795977,"question_id":75377754,"body_markdown":"Is it possible to fetch the app analytics data from firebase using java libraries. My project is under the spark plan of firebase which is of no cost plan.I need to fetch the analytics data like number of active users,number of downloads of the application from firebase.I will be using java spring boot maven application to get it. Is it possible to fetch the values from firebase in this plan?","title":"Is it possible to fetch the app analytics data from firebase using java spring boot api","body":"<p>Is it possible to fetch the app analytics data from firebase using java libraries. My project is under the spark plan of firebase which is of no cost plan.I need to fetch the analytics data like number of active users,number of downloads of the application from firebase.I will be using java spring boot maven application to get it. Is it possible to fetch the values from firebase in this plan?</p>\n"},{"tags":["java","gradle","pom.xml"],"answers":[{"comments":[{"owner":{"account_id":27727749,"reputation":11,"user_id":21166925,"display_name":"Somak Dutta"},"score":0,"creation_date":1675829093,"post_id":75377905,"comment_id":133010595,"body_markdown":"well dependencyinsight prints jar as  org.gradle.libraryelements for everything, irrespective of whether its a pom import or not. i am actually parsing the output of gradle dependencies in java side to find out dependency map for a project. this is where i need the information whether a dependency is a pom or a normal one. pretty simple in maven. oh and i also cant make any changes in build.gradle file :(","body":"well dependencyinsight prints jar as  org.gradle.libraryelements for everything, irrespective of whether its a pom import or not. i am actually parsing the output of gradle dependencies in java side to find out dependency map for a project. this is where i need the information whether a dependency is a pom or a normal one. pretty simple in maven. oh and i also cant make any changes in build.gradle file :("}],"tags":[],"owner":{"account_id":5218565,"reputation":1034,"user_id":6540591,"display_name":"User51"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675796821,"creation_date":1675796821,"answer_id":75377905,"question_id":75376818,"body_markdown":"From the Gradle CLI, you can obtain additional information using the `dependencyInsight` query:\r\n\r\n&gt; `./gradlew [submodule:]dependencyInsight --dependency=&lt;dependency name&gt; --configuration=runtimeClasspath`\r\n\r\nNote this is restricted via `--configuration`.  If you don&#39;t add this, it prints it for every configuration, which results in a very large output from the `dependencies` task.\r\n\r\nYou get something like this:\r\n\r\n```\r\ncom.google.http-client:google-http-client-gson:1.42.3 (by constraint)\r\n  Variant runtime:\r\n    | Attribute Name                 | Provided     | Requested    |\r\n    |--------------------------------|--------------|--------------|\r\n    | org.gradle.status              | release      |              |\r\n    | org.gradle.category            | library      | library      |\r\n    | org.gradle.libraryelements     | jar          | jar          |\r\n    | org.gradle.usage               | java-runtime | java-runtime |\r\n    | org.gradle.dependency.bundling |              | external     |\r\n    | org.gradle.jvm.environment     |              | standard-jvm |\r\n    | org.gradle.jvm.version         |              | 17           |\r\n\r\n// ...  And then a bunch more info\r\n```\r\n\r\nBut, you asked about &quot;programmatically in Java&quot;.  I&#39;m interpolating your request here, because I&#39;m not entirely sure what you&#39;re looking for.  Gradle is in either Groovy or Kotlin, unless you&#39;re authoring a plugin or some such.  That said, perhaps if provided with a Groovy answer, a Java variant, it would provide insight on where you could look.\r\n\r\nThis Gradle task does print out the dependencies, along with the &quot;attributes&quot; property, which flags BOM dependencies.  There are many other properties, as well as `metaPropertyValues`, which duplicate many of the properties.  But, for the purpose of detecting a bom or whatnot, this does the trick.\r\n\r\nNote, this is also restricted via the `runtimeClasspath` configuration.  You could enumerate configurations and iterate over them, but this was simply for an example.\r\n\r\n```groovy\r\ntasks.register(&#39;readOut&#39;) {\r\n    configurations.named(&quot;runtimeClasspath&quot;) {\r\n        it.allDependencies.each {\r\n            println &quot;- &quot; + it.name + &quot;, &quot; + it.getGroup() + &quot;:&quot; + it.getName() + &quot;:&quot; + it.getVersion() + &quot; &quot; + it.properties[&#39;attributes&#39;]\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nIt prints out something like this:\r\n\r\n```\r\n- my-bom, com.example:my-bom:1.1.0 {org.gradle.category=platform}\r\n- some-other-package, net.example:some-other-package:1.1.0 {}    \r\n- log4j-core, org.apache.logging.log4j:log4j-core:2.19.0 {}                          \r\n- log4j-api, org.apache.logging.log4j:log4j-api:2.19.0 {}\r\n```\r\n\r\nThe formatting is unimportant here, but it demonstrates that it is capturing the additional properties programmatically, which would allow for automation.","title":"Identify POM type dependencies programmatically in java for gradle project","body":"<p>From the Gradle CLI, you can obtain additional information using the <code>dependencyInsight</code> query:</p>\n<blockquote>\n<p><code>./gradlew [submodule:]dependencyInsight --dependency=&lt;dependency name&gt; --configuration=runtimeClasspath</code></p>\n</blockquote>\n<p>Note this is restricted via <code>--configuration</code>.  If you don't add this, it prints it for every configuration, which results in a very large output from the <code>dependencies</code> task.</p>\n<p>You get something like this:</p>\n<pre><code>com.google.http-client:google-http-client-gson:1.42.3 (by constraint)\n  Variant runtime:\n    | Attribute Name                 | Provided     | Requested    |\n    |--------------------------------|--------------|--------------|\n    | org.gradle.status              | release      |              |\n    | org.gradle.category            | library      | library      |\n    | org.gradle.libraryelements     | jar          | jar          |\n    | org.gradle.usage               | java-runtime | java-runtime |\n    | org.gradle.dependency.bundling |              | external     |\n    | org.gradle.jvm.environment     |              | standard-jvm |\n    | org.gradle.jvm.version         |              | 17           |\n\n// ...  And then a bunch more info\n</code></pre>\n<p>But, you asked about &quot;programmatically in Java&quot;.  I'm interpolating your request here, because I'm not entirely sure what you're looking for.  Gradle is in either Groovy or Kotlin, unless you're authoring a plugin or some such.  That said, perhaps if provided with a Groovy answer, a Java variant, it would provide insight on where you could look.</p>\n<p>This Gradle task does print out the dependencies, along with the &quot;attributes&quot; property, which flags BOM dependencies.  There are many other properties, as well as <code>metaPropertyValues</code>, which duplicate many of the properties.  But, for the purpose of detecting a bom or whatnot, this does the trick.</p>\n<p>Note, this is also restricted via the <code>runtimeClasspath</code> configuration.  You could enumerate configurations and iterate over them, but this was simply for an example.</p>\n<pre><code>tasks.register('readOut') {\n    configurations.named(&quot;runtimeClasspath&quot;) {\n        it.allDependencies.each {\n            println &quot;- &quot; + it.name + &quot;, &quot; + it.getGroup() + &quot;:&quot; + it.getName() + &quot;:&quot; + it.getVersion() + &quot; &quot; + it.properties['attributes']\n        }\n    }\n}\n</code></pre>\n<p>It prints out something like this:</p>\n<pre><code>- my-bom, com.example:my-bom:1.1.0 {org.gradle.category=platform}\n- some-other-package, net.example:some-other-package:1.1.0 {}    \n- log4j-core, org.apache.logging.log4j:log4j-core:2.19.0 {}                          \n- log4j-api, org.apache.logging.log4j:log4j-api:2.19.0 {}\n</code></pre>\n<p>The formatting is unimportant here, but it demonstrates that it is capturing the additional properties programmatically, which would allow for automation.</p>\n"}],"owner":{"account_id":27727749,"reputation":11,"user_id":21166925,"display_name":"Somak Dutta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1675796821,"creation_date":1675790182,"question_id":75376818,"body_markdown":"I am trying to read the output of “gradle dependencies” and i have noticed that it does not provide us with the type information that maven does.\r\n\r\nSo for example maven dependencies shows us this : where we can get the type of dependencies be it jar/ejb/ war/ pom ,etc\r\n\r\n```\r\n[**INFO**] +- org.slf4j:slf4j-reload4j:jar:1.7.36:compile\r\n[**INFO**] | +- org.slf4j:slf4j-api:jar:1.7.36:compile\r\n```\r\n\r\nHowever the output of  gradle dependencies we only get something like this\r\n\r\n```\r\n+--- org.lunarray.model:bom:1.0\r\n|    +--- org.lunarray.common:base:1.0\r\n|    |    \\--- org.lunarray.common:bom:1.0\r\n```\r\n\r\nI was taking a look at DefaultArtifactResolutionQuery but it seems like it requires a lot of parameters in constructor that i dont totally understand.\r\n\r\nSo my question is : given a group artifact version, how do i identify whether its a pom type, jar type, ejb type, etc dependency programmatically in java?\r\n\r\nTried using ArtifactResolutionQUery but not able to figure out usage","title":"Identify POM type dependencies programmatically in java for gradle project","body":"<p>I am trying to read the output of “gradle dependencies” and i have noticed that it does not provide us with the type information that maven does.</p>\n<p>So for example maven dependencies shows us this : where we can get the type of dependencies be it jar/ejb/ war/ pom ,etc</p>\n<pre><code>[**INFO**] +- org.slf4j:slf4j-reload4j:jar:1.7.36:compile\n[**INFO**] | +- org.slf4j:slf4j-api:jar:1.7.36:compile\n</code></pre>\n<p>However the output of  gradle dependencies we only get something like this</p>\n<pre><code>+--- org.lunarray.model:bom:1.0\n|    +--- org.lunarray.common:base:1.0\n|    |    \\--- org.lunarray.common:bom:1.0\n</code></pre>\n<p>I was taking a look at DefaultArtifactResolutionQuery but it seems like it requires a lot of parameters in constructor that i dont totally understand.</p>\n<p>So my question is : given a group artifact version, how do i identify whether its a pom type, jar type, ejb type, etc dependency programmatically in java?</p>\n<p>Tried using ArtifactResolutionQUery but not able to figure out usage</p>\n"},{"tags":["java","apache-spark"],"owner":{"account_id":3969324,"reputation":675,"user_id":3274299,"accept_rate":75,"display_name":"Tipok"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675796700,"creation_date":1675793771,"question_id":75377399,"body_markdown":"I have data stored at HDFS and **N** Postgres shards (separate instances).\r\n\r\nDuring data retrieval based on  `Java COLUMN_STRING_DATA.hashCode() % N` calculation, we pick an exact shard for SQL request.\r\n\r\nWe have a Spark set up with 5 workers, each has 32 CPU, CPU per task is 2.\r\n\r\nI&#39;m struggling with uploading data to shards because the database connections are limited by Database engineering team. Each worker tries to upload data to each shard, that&#39;s why I&#39;m limited by allowed connections to PG shards. That&#39;s why I can&#39;t fully utilize Workers and PG instances.  \r\n\r\n\r\nSo I would like to somehow bind a worker to work with a unique, limited group of PG shards.\r\n\r\n```\r\n            spark.read()\r\n                .option(&quot;header&quot;, &quot;true&quot;)\r\n                .orc(pathToHdfs)\r\n                .withColumn(&quot;hash_group&quot;, functions.hash(new Column(&quot;search&quot;)).mod(PG_SHARDS_SIZE))\r\n```\r\n\r\n`Functions.hash` uses `murmur_hash` algorithm, during data retrieval from PG, I choose shard based on Java `String.hashCode() % N`. I googled, and I&#39;m able to write custom functions, so that shouldn&#39;t be a problem.\r\n\r\nThe question is how after creation a new column with Integer values in range [1..PG_SHARDS_SIZE]. I can assign Worker #1 to work only with values [1,2] of column `hash_group`. Worker #2 with values [3,4] and so on?\r\n\r\nMaybe there are other approaches to achieve binding worker to exact group of PG shards?\r\n\r\nI have 1 to 1 mapping Worker - Executor, so binding Executor to the group of PG shard working for me as well. ","title":"Assign tasks to exact workers in spark","body":"<p>I have data stored at HDFS and <strong>N</strong> Postgres shards (separate instances).</p>\n<p>During data retrieval based on  <code>Java COLUMN_STRING_DATA.hashCode() % N</code> calculation, we pick an exact shard for SQL request.</p>\n<p>We have a Spark set up with 5 workers, each has 32 CPU, CPU per task is 2.</p>\n<p>I'm struggling with uploading data to shards because the database connections are limited by Database engineering team. Each worker tries to upload data to each shard, that's why I'm limited by allowed connections to PG shards. That's why I can't fully utilize Workers and PG instances.</p>\n<p>So I would like to somehow bind a worker to work with a unique, limited group of PG shards.</p>\n<pre><code>            spark.read()\n                .option(&quot;header&quot;, &quot;true&quot;)\n                .orc(pathToHdfs)\n                .withColumn(&quot;hash_group&quot;, functions.hash(new Column(&quot;search&quot;)).mod(PG_SHARDS_SIZE))\n</code></pre>\n<p><code>Functions.hash</code> uses <code>murmur_hash</code> algorithm, during data retrieval from PG, I choose shard based on Java <code>String.hashCode() % N</code>. I googled, and I'm able to write custom functions, so that shouldn't be a problem.</p>\n<p>The question is how after creation a new column with Integer values in range [1..PG_SHARDS_SIZE]. I can assign Worker #1 to work only with values [1,2] of column <code>hash_group</code>. Worker #2 with values [3,4] and so on?</p>\n<p>Maybe there are other approaches to achieve binding worker to exact group of PG shards?</p>\n<p>I have 1 to 1 mapping Worker - Executor, so binding Executor to the group of PG shard working for me as well.</p>\n"},{"tags":["java","mysql","spring-boot","hibernate","spring-data-jpa"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":3,"creation_date":1600979203,"post_id":64053846,"comment_id":113268672,"body_markdown":"&quot;Why I am getting HTTP status code 500 error&quot; - most likely because there is an exception which you didn&#39;t share (look at whether your code might swallow exceptions, i.e. catch and ignore them).","body":"&quot;Why I am getting HTTP status code 500 error&quot; - most likely because there is an exception which you didn&#39;t share (look at whether your code might swallow exceptions, i.e. catch and ignore them)."}],"answers":[{"tags":[],"owner":{"account_id":19543420,"reputation":29,"user_id":14300761,"display_name":"j11john"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1600985993,"creation_date":1600985584,"answer_id":64055127,"question_id":64053846,"body_markdown":"Please show the server log. Only with the server response it&#39;s impossible to figure out. Surround the controller with try/catch and print the exception ","title":"Spring Boot + JPA + MySQL getting 500 error Internal Server while retrieving and storing the data","body":"<p>Please show the server log. Only with the server response it's impossible to figure out. Surround the controller with try/catch and print the exception</p>\n"},{"comments":[{"owner":{"account_id":7008622,"reputation":1462,"user_id":5372268,"accept_rate":55,"display_name":"Ahmad"},"score":0,"creation_date":1636213035,"post_id":64057677,"comment_id":123498852,"body_markdown":"I have added Controller annotation in my controller class and changing to @RestController will fix the problem.","body":"I have added Controller annotation in my controller class and changing to @RestController will fix the problem."}],"tags":[],"owner":{"account_id":5368515,"reputation":1067,"user_id":4277677,"display_name":"Rony Nguyen"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1601006902,"creation_date":1601006902,"answer_id":64057677,"question_id":64053846,"body_markdown":"1. Why I am getting HTTP status code 500 error ??\r\n=&gt; You get 500 because your controller needs a view template (such as thymeleaf, JSP or whatever view engine)\r\n2. Even I am getting the error then how data is getting the store in the database ??\r\n=&gt; You&#39;re having issue only when rendering not persist data, that why It&#39;s stored in your DB\r\n3. If I am successfully storing the data in database then why am not getting through GET request ??\r\n=&gt; Because your GET Controller still needs a view template.\r\n\r\n\r\nIf you&#39;re developing Restful APIs then using @RestController or add @ResponseBody on each controller endpoint method.\r\n\r\nBtw, you&#39;re should not use an Entity to handle your Request body.","title":"Spring Boot + JPA + MySQL getting 500 error Internal Server while retrieving and storing the data","body":"<ol>\n<li>Why I am getting HTTP status code 500 error ??\n=&gt; You get 500 because your controller needs a view template (such as thymeleaf, JSP or whatever view engine)</li>\n<li>Even I am getting the error then how data is getting the store in the database ??\n=&gt; You're having issue only when rendering not persist data, that why It's stored in your DB</li>\n<li>If I am successfully storing the data in database then why am not getting through GET request ??\n=&gt; Because your GET Controller still needs a view template.</li>\n</ol>\n<p>If you're developing Restful APIs then using @RestController or add @ResponseBody on each controller endpoint method.</p>\n<p>Btw, you're should not use an Entity to handle your Request body.</p>\n"},{"tags":[],"owner":{"account_id":17850530,"reputation":27,"user_id":12966381,"display_name":"Mandy"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1675796531,"creation_date":1675796531,"answer_id":75377854,"question_id":64053846,"body_markdown":"Simply create an empty default constructor.\r\n\r\n\r\n    @Data\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Entity\r\n    public class Product {\r\n    \r\n        @Id\r\n        @GeneratedValue\r\n        private int id;\r\n        private String name;\r\n        private int quantity;\r\n        private double price;\r\n    \r\n    //this one below\r\n    \r\n    public Product()\r\n    {\r\n    }","title":"Spring Boot + JPA + MySQL getting 500 error Internal Server while retrieving and storing the data","body":"<p>Simply create an empty default constructor.</p>\n<pre><code>@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Entity\npublic class Product {\n\n    @Id\n    @GeneratedValue\n    private int id;\n    private String name;\n    private int quantity;\n    private double price;\n\n//this one below\n\npublic Product()\n{\n}\n</code></pre>\n"}],"owner":{"account_id":16027433,"reputation":179,"user_id":11567327,"display_name":"Piyush Jiwane"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5175,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":64057677,"answer_count":3,"score":2,"last_activity_date":1675796531,"creation_date":1600978750,"question_id":64053846,"body_markdown":"I am creating Spring API but it is throwing 500 HTTP status code while creating GET and POST request but when I have checked in my MySQL database it is storing the data\r\n\r\n**application.properties**\r\n\r\n    # DataSource settings: set here your own configurations for the database connection.\r\n    # In this example we have &quot;javatechie&quot; as database name and\r\n    # &quot;root&quot; as username and password.\r\n    spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/javatechie\r\n    spring.datasource.username=root\r\n    spring.datasource.password=root\r\n    # Show or not log for each sql query\r\n    spring.jpa.show-sql=true\r\n    # Hibernate ddl auto (create, create-drop, update)\r\n    spring.jpa.hibernate.ddl-auto=update\r\n    # The SQL dialect makes Hibernate generate better SQL for the chosen database\r\n    spring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL5Dialect\r\n\r\n**Product.java**\r\n\r\n    @Data\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Entity\r\n    public class Product {\r\n    \r\n        @Id\r\n        @GeneratedValue\r\n        private int id;\r\n        private String name;\r\n        private int quantity;\r\n        private double price;\r\n    }\r\n\r\n**ProductController.java**\r\n\r\n    @Controller\r\n    public class ProductController {\r\n        @Autowired\r\n        private ProductService productService;\r\n    \r\n        @PostMapping(&quot;/addProduct&quot;)\r\n        public Product addProduct(@RequestBody Product product){\r\n            return productService.saveProduct(product);\r\n        }\r\n    \r\n        @PostMapping(&quot;/addProducts&quot;)\r\n        public List&lt;Product&gt; addProducts(@RequestBody List&lt;Product&gt; product){\r\n            return productService.saveProducts(product);\r\n        }\r\n    \r\n        @GetMapping(&quot;/products&quot;)\r\n        public List&lt;Product&gt; findAllProducts(){\r\n            return productService.getProducts();\r\n        }\r\n    \r\n        @GetMapping(&quot;/product/{id}&quot;)\r\n        public Product findProductById(@PathVariable int id){\r\n            return productService.getProductById(id);\r\n        }\r\n    \r\n        @GetMapping(&quot;/product/{name}&quot;)\r\n        public Product findProductByName(@PathVariable String name){\r\n            return productService.getProductsByName(name);\r\n        }\r\n    \r\n        @PutMapping(&quot;/update&quot;)\r\n        public Product updateProduct(@RequestBody Product product){\r\n            return productService.updateProduct(product);\r\n        }\r\n    \r\n        @DeleteMapping(&quot;/delete/{id}&quot;)\r\n        public String deleteProduct(@PathVariable int id){\r\n            return productService.deleteProduct(id);\r\n        }\r\n    }\r\n\r\n**ProductService.java**\r\n\r\n    @Service\r\n    public class ProductService {\r\n    \r\n        @Autowired\r\n        private ProductRepository productRepository;\r\n    \r\n        public Product saveProduct(Product product){\r\n            return productRepository.save(product);\r\n        }\r\n    \r\n        public List&lt;Product&gt; saveProducts(List&lt;Product&gt; products){\r\n            return productRepository.saveAll(products);\r\n        }\r\n    \r\n        public List&lt;Product&gt; getProducts(){\r\n            return productRepository.findAll();\r\n        }\r\n    \r\n        public Product getProductById(int id){\r\n            return productRepository.findById(id).orElse(null);\r\n        }\r\n    \r\n        public Product getProductsByName(String name){\r\n            return productRepository.findByName(name);\r\n        }\r\n    \r\n        public String deleteProduct(int id){\r\n            productRepository.deleteById(id);\r\n            return &quot;product removed !!!&quot;;\r\n        }\r\n    \r\n        public Product updateProduct(Product product){\r\n            return productRepository.save(product);\r\n        }\r\n    }\r\n\r\n**Note :-**\r\nWhen I send a POST request from Postman it is throwing me\r\n\r\n    {\r\n        &quot;timestamp&quot;: &quot;2020-09-24T20:01:15.060+00:00&quot;,\r\n        &quot;status&quot;: 500,\r\n        &quot;error&quot;: &quot;Internal Server Error&quot;,\r\n        &quot;message&quot;: &quot;&quot;,\r\n        &quot;path&quot;: &quot;/addProduct&quot;\r\n    }\r\nbut when I have checked in the MySQL database the entries which I had send through POST request those are there\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/hHIia.png\r\n\r\n**Question**\r\n\r\n 1. Why I am getting HTTP status code 500 error ??\r\n 2. Even I am getting the error then how data is getting the store in the database ??\r\n 3. If I am successfully storing the data in database then why am not getting through GET request ??\r\n\r\n**Error Logs**\r\n\r\n    2020-09-25 09:25:50.447  INFO 12128 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 10 ms\r\n    Hibernate: select product0_.id as id1_0_, product0_.name as name2_0_, product0_.price as price3_0_, product0_.quantity as quantity4_0_ from product product0_\r\n    2020-09-25 09:25:50.613 ERROR 12128 --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Circular view path [products]: would dispatch back to the current handler URL [/products] again. Check your ViewResolver setup! (Hint: This may be the result of an unspecified view, due to default view name generation.)] with root cause\r\n    \r\n    javax.servlet.ServletException: Circular view path [products]: would dispatch back to the current handler URL [/products] again. Check your ViewResolver setup! (Hint: This may be the result of an unspecified view, due to default view name generation.)\r\n    \tat org.springframework.web.servlet.view.InternalResourceView.prepareForRendering(InternalResourceView.java:210) ~[spring-webmvc-5.2.9.RELEASE.jar:5.2.9.RELEASE]\r\n    \tat org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:148) ~[spring-webmvc-5.2.9.RELEASE.jar:5.2.9.RELEASE]\r\n    \tat org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:316) ~[spring-webmvc-5.2.9.RELEASE.jar:5.2.9.RELEASE]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1373) ~[spring-webmvc-5.2.9.RELEASE.jar:5.2.9.RELEASE]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1118) ~[spring-webmvc-5.2.9.RELEASE.jar:5.2.9.RELEASE]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1057) ~[spring-webmvc-5.2.9.RELEASE.jar:5.2.9.RELEASE]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943) ~[spring-webmvc-5.2.9.RELEASE.jar:5.2.9.RELEASE]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.2.9.RELEASE.jar:5.2.9.RELEASE]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.2.9.RELEASE.jar:5.2.9.RELEASE]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:626) ~[tomcat-embed-core-9.0.38.jar:4.0.FR]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.2.9.RELEASE.jar:5.2.9.RELEASE]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:733) ~[tomcat-embed-core-9.0.38.jar:4.0.FR]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\r\n    \tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.38.jar:9.0.38]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\r\n    \tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.2.9.RELEASE.jar:5.2.9.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.9.RELEASE.jar:5.2.9.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\r\n    \tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.2.9.RELEASE.jar:5.2.9.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.9.RELEASE.jar:5.2.9.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\r\n    \tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.2.9.RELEASE.jar:5.2.9.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.9.RELEASE.jar:5.2.9.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\r\n    \tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\r\n    \tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\r\n    \tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1590) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\r\n    \tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]\r\n    \tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\r\n    \tat java.base/java.lang.Thread.run(Thread.java:830) ~[na:na]\r\n\r\n","title":"Spring Boot + JPA + MySQL getting 500 error Internal Server while retrieving and storing the data","body":"<p>I am creating Spring API but it is throwing 500 HTTP status code while creating GET and POST request but when I have checked in my MySQL database it is storing the data</p>\n<p><strong>application.properties</strong></p>\n<pre><code># DataSource settings: set here your own configurations for the database connection.\n# In this example we have &quot;javatechie&quot; as database name and\n# &quot;root&quot; as username and password.\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\nspring.datasource.url=jdbc:mysql://localhost:3306/javatechie\nspring.datasource.username=root\nspring.datasource.password=root\n# Show or not log for each sql query\nspring.jpa.show-sql=true\n# Hibernate ddl auto (create, create-drop, update)\nspring.jpa.hibernate.ddl-auto=update\n# The SQL dialect makes Hibernate generate better SQL for the chosen database\nspring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL5Dialect\n</code></pre>\n<p><strong>Product.java</strong></p>\n<pre><code>@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Entity\npublic class Product {\n\n    @Id\n    @GeneratedValue\n    private int id;\n    private String name;\n    private int quantity;\n    private double price;\n}\n</code></pre>\n<p><strong>ProductController.java</strong></p>\n<pre><code>@Controller\npublic class ProductController {\n    @Autowired\n    private ProductService productService;\n\n    @PostMapping(&quot;/addProduct&quot;)\n    public Product addProduct(@RequestBody Product product){\n        return productService.saveProduct(product);\n    }\n\n    @PostMapping(&quot;/addProducts&quot;)\n    public List&lt;Product&gt; addProducts(@RequestBody List&lt;Product&gt; product){\n        return productService.saveProducts(product);\n    }\n\n    @GetMapping(&quot;/products&quot;)\n    public List&lt;Product&gt; findAllProducts(){\n        return productService.getProducts();\n    }\n\n    @GetMapping(&quot;/product/{id}&quot;)\n    public Product findProductById(@PathVariable int id){\n        return productService.getProductById(id);\n    }\n\n    @GetMapping(&quot;/product/{name}&quot;)\n    public Product findProductByName(@PathVariable String name){\n        return productService.getProductsByName(name);\n    }\n\n    @PutMapping(&quot;/update&quot;)\n    public Product updateProduct(@RequestBody Product product){\n        return productService.updateProduct(product);\n    }\n\n    @DeleteMapping(&quot;/delete/{id}&quot;)\n    public String deleteProduct(@PathVariable int id){\n        return productService.deleteProduct(id);\n    }\n}\n</code></pre>\n<p><strong>ProductService.java</strong></p>\n<pre><code>@Service\npublic class ProductService {\n\n    @Autowired\n    private ProductRepository productRepository;\n\n    public Product saveProduct(Product product){\n        return productRepository.save(product);\n    }\n\n    public List&lt;Product&gt; saveProducts(List&lt;Product&gt; products){\n        return productRepository.saveAll(products);\n    }\n\n    public List&lt;Product&gt; getProducts(){\n        return productRepository.findAll();\n    }\n\n    public Product getProductById(int id){\n        return productRepository.findById(id).orElse(null);\n    }\n\n    public Product getProductsByName(String name){\n        return productRepository.findByName(name);\n    }\n\n    public String deleteProduct(int id){\n        productRepository.deleteById(id);\n        return &quot;product removed !!!&quot;;\n    }\n\n    public Product updateProduct(Product product){\n        return productRepository.save(product);\n    }\n}\n</code></pre>\n<p><strong>Note :-</strong>\nWhen I send a POST request from Postman it is throwing me</p>\n<pre><code>{\n    &quot;timestamp&quot;: &quot;2020-09-24T20:01:15.060+00:00&quot;,\n    &quot;status&quot;: 500,\n    &quot;error&quot;: &quot;Internal Server Error&quot;,\n    &quot;message&quot;: &quot;&quot;,\n    &quot;path&quot;: &quot;/addProduct&quot;\n}\n</code></pre>\n<p>but when I have checked in the MySQL database the entries which I had send through POST request those are there</p>\n<p><a href=\"https://i.stack.imgur.com/hHIia.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hHIia.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Question</strong></p>\n<ol>\n<li>Why I am getting HTTP status code 500 error ??</li>\n<li>Even I am getting the error then how data is getting the store in the database ??</li>\n<li>If I am successfully storing the data in database then why am not getting through GET request ??</li>\n</ol>\n<p><strong>Error Logs</strong></p>\n<pre><code>2020-09-25 09:25:50.447  INFO 12128 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 10 ms\nHibernate: select product0_.id as id1_0_, product0_.name as name2_0_, product0_.price as price3_0_, product0_.quantity as quantity4_0_ from product product0_\n2020-09-25 09:25:50.613 ERROR 12128 --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Circular view path [products]: would dispatch back to the current handler URL [/products] again. Check your ViewResolver setup! (Hint: This may be the result of an unspecified view, due to default view name generation.)] with root cause\n\njavax.servlet.ServletException: Circular view path [products]: would dispatch back to the current handler URL [/products] again. Check your ViewResolver setup! (Hint: This may be the result of an unspecified view, due to default view name generation.)\n    at org.springframework.web.servlet.view.InternalResourceView.prepareForRendering(InternalResourceView.java:210) ~[spring-webmvc-5.2.9.RELEASE.jar:5.2.9.RELEASE]\n    at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:148) ~[spring-webmvc-5.2.9.RELEASE.jar:5.2.9.RELEASE]\n    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:316) ~[spring-webmvc-5.2.9.RELEASE.jar:5.2.9.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1373) ~[spring-webmvc-5.2.9.RELEASE.jar:5.2.9.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1118) ~[spring-webmvc-5.2.9.RELEASE.jar:5.2.9.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1057) ~[spring-webmvc-5.2.9.RELEASE.jar:5.2.9.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943) ~[spring-webmvc-5.2.9.RELEASE.jar:5.2.9.RELEASE]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.2.9.RELEASE.jar:5.2.9.RELEASE]\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.2.9.RELEASE.jar:5.2.9.RELEASE]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:626) ~[tomcat-embed-core-9.0.38.jar:4.0.FR]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.2.9.RELEASE.jar:5.2.9.RELEASE]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:733) ~[tomcat-embed-core-9.0.38.jar:4.0.FR]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.38.jar:9.0.38]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.2.9.RELEASE.jar:5.2.9.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.9.RELEASE.jar:5.2.9.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.2.9.RELEASE.jar:5.2.9.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.9.RELEASE.jar:5.2.9.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.2.9.RELEASE.jar:5.2.9.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.9.RELEASE.jar:5.2.9.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1590) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.38.jar:9.0.38]\n    at java.base/java.lang.Thread.run(Thread.java:830) ~[na:na]\n</code></pre>\n"},{"tags":["java","spring-integration","google-cloud-pubsub"],"answers":[{"comments":[{"owner":{"account_id":27716616,"reputation":13,"user_id":21158186,"display_name":"learner-newfeatures"},"score":0,"creation_date":1675797079,"post_id":75377755,"comment_id":133004855,"body_markdown":"My expectation is a loosely coupled environment. Since my system is integrated to external system, any issue with external system should not hamper my services. Hence I push the customers data to queue and consume from the queue and send to the external system from the subscriber. In the routing example I was not able to find any HTTP method usecases and any external URI as well. can you please highlight which section i can find","body":"My expectation is a loosely coupled environment. Since my system is integrated to external system, any issue with external system should not hamper my services. Hence I push the customers data to queue and consume from the queue and send to the external system from the subscriber. In the routing example I was not able to find any HTTP method usecases and any external URI as well. can you please highlight which section i can find"},{"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1675798203,"post_id":75377755,"comment_id":133005135,"body_markdown":"Well, that doc is just generic one to make you familiar with router pattern. It is really up to your application logic to determine what part of input message to use for routing key. According to your current code there is no distinguishing when to call create and when delete. So, everything is out of our control at the moment. Please, share more info how you&#39;d like to determine which HTTP method to call against that Pub/Sub consumed message?","body":"Well, that doc is just generic one to make you familiar with router pattern. It is really up to your application logic to determine what part of input message to use for routing key. According to your current code there is no distinguishing when to call create and when delete. So, everything is out of our control at the moment. Please, share more info how you&#39;d like to determine which HTTP method to call against that Pub/Sub consumed message?"},{"owner":{"account_id":27716616,"reputation":13,"user_id":21158186,"display_name":"learner-newfeatures"},"score":0,"creation_date":1675798967,"post_id":75377755,"comment_id":133005375,"body_markdown":"Well on my end I am sending customers data to a external system. When there is new customer/s at my end, I send list of newly created customers to the external system and same goes with the delete, when a customer/s is removed from our system, we inform the external system that these customers are removed from our system. Inorder to have a loose coupled integration, I am using a pubsub. Here I first publish the list of customers I have created at my end into the pub/sub and then consume the list as a payload and send the payload to the external system. Same goes with the delete.","body":"Well on my end I am sending customers data to a external system. When there is new customer/s at my end, I send list of newly created customers to the external system and same goes with the delete, when a customer/s is removed from our system, we inform the external system that these customers are removed from our system. Inorder to have a loose coupled integration, I am using a pubsub. Here I first publish the list of customers I have created at my end into the pub/sub and then consume the list as a payload and send the payload to the external system. Same goes with the delete."},{"owner":{"account_id":27716616,"reputation":13,"user_id":21158186,"display_name":"learner-newfeatures"},"score":0,"creation_date":1675799202,"post_id":75377755,"comment_id":133005434,"body_markdown":"Basically my system is not connecting directly with the external system but a message pubsub helps sending the data. But my job will be both publish and subscribe and then send to the external system. same way goes with the external system. I receive data from external system and keep into the pubsub and then consume from the pubsub to process at my end. The pubsub is helping me to create a loosecoupled environment","body":"Basically my system is not connecting directly with the external system but a message pubsub helps sending the data. But my job will be both publish and subscribe and then send to the external system. same way goes with the external system. I receive data from external system and keep into the pubsub and then consume from the pubsub to process at my end. The pubsub is helping me to create a loosecoupled environment"},{"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1675799416,"post_id":75377755,"comment_id":133005491,"body_markdown":"That&#39;s all good, but I don&#39;t see how can you understand if you need to call `postDataTOExternalSystems` or `deleteDatafromExternalSystems` ?","body":"That&#39;s all good, but I don&#39;t see how can you understand if you need to call <code>postDataTOExternalSystems</code> or <code>deleteDatafromExternalSystems</code> ?"},{"owner":{"account_id":27716616,"reputation":13,"user_id":21158186,"display_name":"learner-newfeatures"},"score":0,"creation_date":1675799736,"post_id":75377755,"comment_id":133005587,"body_markdown":"yes thats the factor here i am not able to utlize the capabilty of pubsub with these usecases. How do i implement these using pubsub is a brainstroming thing for me since couple of days","body":"yes thats the factor here i am not able to utlize the capabilty of pubsub with these usecases. How do i implement these using pubsub is a brainstroming thing for me since couple of days"},{"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1675800290,"post_id":75377755,"comment_id":133005750,"body_markdown":"Well, you probably can publish those `create` and `delete` requests into different topics. You also can add an extra header into the message you publish. Then on the consumer side you can use that header for routing. In case of different topics you just can have different subscribers and therefore different channel for different service methods in the end.","body":"Well, you probably can publish those <code>create</code> and <code>delete</code> requests into different topics. You also can add an extra header into the message you publish. Then on the consumer side you can use that header for routing. In case of different topics you just can have different subscribers and therefore different channel for different service methods in the end."},{"owner":{"account_id":27716616,"reputation":13,"user_id":21158186,"display_name":"learner-newfeatures"},"score":0,"creation_date":1675800511,"post_id":75377755,"comment_id":133005820,"body_markdown":"yep I thought the same. Is this the best solution.  Thing is there will be bulk of topics for different service calls. Fair enough, how do i deal with the continuous loading of error logs on the STS eclipse console?. I am not able to look into those logs and distinguish whether i am still able to get the messages from pubsub when there is an errror in the subscriber","body":"yep I thought the same. Is this the best solution.  Thing is there will be bulk of topics for different service calls. Fair enough, how do i deal with the continuous loading of error logs on the STS eclipse console?. I am not able to look into those logs and distinguish whether i am still able to get the messages from pubsub when there is an errror in the subscriber"},{"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1675800735,"post_id":75377755,"comment_id":133005889,"body_markdown":"I think this is just a retry Pub/Sub built-in :it does not pull a new message until it is done with the current one. No? Do I miss anything? You can implement a retry with backoff as we discussed in other your question on a service level.","body":"I think this is just a retry Pub/Sub built-in :it does not pull a new message until it is done with the current one. No? Do I miss anything? You can implement a retry with backoff as we discussed in other your question on a service level."},{"owner":{"account_id":27716616,"reputation":13,"user_id":21158186,"display_name":"learner-newfeatures"},"score":0,"creation_date":1675801042,"post_id":75377755,"comment_id":133005972,"body_markdown":"&quot; it does not pull a new message until it is done with the current one &quot; but for long does it do? is there any way to stop processing after some period of time?","body":"&quot; it does not pull a new message until it is done with the current one &quot; but for long does it do? is there any way to stop processing after some period of time?"},{"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1675801231,"post_id":75377755,"comment_id":133006022,"body_markdown":"That&#39;s I cannot answer. I believe there should be an option like `redelivery attempts`.","body":"That&#39;s I cannot answer. I believe there should be an option like <code>redelivery attempts</code>."},{"owner":{"account_id":27716616,"reputation":13,"user_id":21158186,"display_name":"learner-newfeatures"},"score":0,"creation_date":1675801639,"post_id":75377755,"comment_id":133006138,"body_markdown":"can i use IntegrationFlow to send payload to external systems?","body":"can i use IntegrationFlow to send payload to external systems?"},{"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1675802141,"post_id":75377755,"comment_id":133006243,"body_markdown":"The `IntegrationFlow` is just a syntax sugar to make developer life easier. In the end you still need to use some service method for your business logic.","body":"The <code>IntegrationFlow</code> is just a syntax sugar to make developer life easier. In the end you still need to use some service method for your business logic."}],"tags":[],"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"comment_count":13,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675795985,"creation_date":1675795985,"answer_id":75377755,"question_id":75377542,"body_markdown":"It&#39;s not clear what is your expectation for such a logic. You have two contradicting subscribers for the same input channel. It sounds more like you need a router first to determine where to proceed next with an input message from Pub/Sub: https://docs.spring.io/spring-integration/reference/html/message-routing.html#messaging-routing-chapter.\r\n\r\n&gt; but creating in this way leads to creating channels for every usecase.\r\n\r\nSure! You can go without Spring Integration and just do everything with the plain `if..else`. So, what&#39;s a difference? Therefore I don&#39;t see a reasonable argument in your statement. Yo have different HTTP methods, and that is OK to map them via Spring Integration router to respective sub-flows. The `MessageChannel` is really first-class citizen in Spring Integration. It makes a solution as loosely-coupled as possible.\r\n\r\nSeveral subscribers on your current `DirectChannel` will lead to a round-robin logic by default, so you&#39;ll be surprised that one message from Pub/Sub creates a customer, another deletes and so on in rounds. The `PublishSubscribeChannel` will make it bad as well: both of your subscribers are going to be called, so created first, then deleted immediately. ","title":"Spring Integration: How to send messages from pubsub subscribers to external systems/servers with Http Methods","body":"<p>It's not clear what is your expectation for such a logic. You have two contradicting subscribers for the same input channel. It sounds more like you need a router first to determine where to proceed next with an input message from Pub/Sub: <a href=\"https://docs.spring.io/spring-integration/reference/html/message-routing.html#messaging-routing-chapter\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-integration/reference/html/message-routing.html#messaging-routing-chapter</a>.</p>\n<blockquote>\n<p>but creating in this way leads to creating channels for every usecase.</p>\n</blockquote>\n<p>Sure! You can go without Spring Integration and just do everything with the plain <code>if..else</code>. So, what's a difference? Therefore I don't see a reasonable argument in your statement. Yo have different HTTP methods, and that is OK to map them via Spring Integration router to respective sub-flows. The <code>MessageChannel</code> is really first-class citizen in Spring Integration. It makes a solution as loosely-coupled as possible.</p>\n<p>Several subscribers on your current <code>DirectChannel</code> will lead to a round-robin logic by default, so you'll be surprised that one message from Pub/Sub creates a customer, another deletes and so on in rounds. The <code>PublishSubscribeChannel</code> will make it bad as well: both of your subscribers are going to be called, so created first, then deleted immediately.</p>\n"}],"owner":{"account_id":27716616,"reputation":13,"user_id":21158186,"display_name":"learner-newfeatures"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":121,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1675795985,"creation_date":1675794626,"question_id":75377542,"body_markdown":"I have been trying to send messages to external systems(using rest template POST, PUT etc) from the service activators as below.\r\n\r\nBelow is my pubsub consumer class\r\n\r\n    public class MyConsumer{\r\n    \r\n    \t@Autowired\r\n    \tExternalService externalService;\r\n    \r\n    \t\t\t@Bean\r\n    \t\tpublic PubSubInboundChannelAdapter messageChannelAdapter(final @Qualifier(&quot;myInputChannel&quot;) MessageChannel inputChannel,\r\n    \t\t\t\tPubSubTemplate pubSubTemplate) \r\n    \t\t{\r\n    \t\t\tPubSubInboundChannelAdapter adapter = new PubSubInboundChannelAdapter(pubSubTemplate, pubSubSubscriptionName);\r\n    \t\t\tadapter.setOutputChannel(inputChannel);\r\n    \t\t\tadapter.setAckMode(AckMode.AUTO_ACK);\r\n    \t\t\tadapter.setErrorChannelName(&quot;pubsubErrors&quot;);\r\n    \t\t\treturn adapter;\r\n    \t\t}\r\n    \r\n    \r\n    \t\t@ServiceActivator(inputChannel = &quot;pubsubErrors&quot;)\r\n    \t\tpublic void pubsubErrorHandler(Message&lt;MessagingException&gt; exceptionMessage) {\r\n    \r\n    \t\t\tBasicAcknowledgeablePubsubMessage originalMessage = (BasicAcknowledgeablePubsubMessage) exceptionMessage\r\n    \t\t\t\t\t.getPayload().getFailedMessage().getHeaders().get(GcpPubSubHeaders.ORIGINAL_MESSAGE);\r\n    \r\n    \t\t\toriginalMessage.nack();\r\n    \t\t}\r\n    \r\n    \r\n             @Bean\r\n              public MessageChannel myInputChannel() {\r\n                 return new DirectChannel();\r\n               }\r\n    \r\n    \t\t\t@Bean\r\n    \t\t\t@ServiceActivator(inputChannel = &quot;myInputChannel&quot;)\r\n    \t\t\tpublic MessageHandler messageReceiver_AddCustomer() {\r\n    \t\t\t\treturn message -&gt; {\r\n    \t\t\t\t\t  externalService.postDataTOExternalSystems(new String((byte[]) message.getPayload());\r\n    \t\t\t\t\t  };\r\n    \t\t\t}\r\n    \r\n    \t\t\t\r\n    \t\t\t@Bean\r\n    \t\t\t@ServiceActivator(inputChannel = &quot;myInputChannel&quot;)\r\n    \t\t\tpublic MessageHandler messageReceiver_DeleteCustomer() {\r\n    \t\t\t\treturn message -&gt; {\r\n    \t\t\t\t   \r\n    \t\t\t\t\texternalService.deleteCustomer(new String((byte[]) message.getPayload());\r\n    \t\t\t\t\tBasicAcknowledgeablePubsubMessage originalMessage =\r\n    \t\t\t\t\t\t  message.getHeaders().get(GcpPubSubHeaders.ORIGINAL_MESSAGE, BasicAcknowledgeablePubsubMessage.class);\r\n    \t\t\t\t\toriginalMessage.ack();\r\n    \t\t\t\t};\r\n    \t\t\t}\r\n    }\r\n\r\n\r\n`ExternalService` below is the service which sends data to the external systems.\r\n\r\n    public class ExternalService{\r\n    \t\t\t\r\n    \t\t\tvoid postDataTOExternalSystems(Object obj){\r\n    \t\t\t// RequestEntity object formed with HttpEntity object using obj(in json) and headers \r\n    \t\t\t  restTemplate.exchange(&quot;https://externalsystems/&quot;,HttpMethod.POST,requestEntity,Object.class);\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\tvoid deleteDatafromExternalSystems(Object obj){\r\n    \t\t\t// RequestEntity object formed with HttpEntity object using obj(in json) and headers \r\n    \t\t\t  restTemplate.exchange(&quot;https://externalsystems/&quot;,HttpMethod.Detele,requestEntity,Object.class);\r\n    \t\t\t}\r\n    \t\r\n    }\r\n\r\n\r\nSince both the methods messageReceiver_AddCustomer and messageReceiver_deleteCustomer are using same channel whats happening is when I try to just addcustomer, the deleteCustomer is also called by default.\r\n\r\nI was thinking of creating a seperate channel for deleteCustomer, but creating in this way leads to creating channels for every usecase. \r\n\r\nHence would like to know three things here.\r\n1. Is there is any other approach of sending through Spring integration through which I can send data to external systems using a single Channel or a different utilization of Channels.\r\n2. If any error in the external service calls leads to unending of failure logs in the console\r\n\r\n        message_id: &quot;6830962001745961&quot;\r\n        publish_time {\r\n          seconds: 1675783352\r\n          nanos: 547000000\r\n        }\r\n        }, timestamp=1675783353720}]&#39;: error occurred in message handler ","title":"Spring Integration: How to send messages from pubsub subscribers to external systems/servers with Http Methods","body":"<p>I have been trying to send messages to external systems(using rest template POST, PUT etc) from the service activators as below.</p>\n<p>Below is my pubsub consumer class</p>\n<pre><code>public class MyConsumer{\n\n    @Autowired\n    ExternalService externalService;\n\n            @Bean\n        public PubSubInboundChannelAdapter messageChannelAdapter(final @Qualifier(&quot;myInputChannel&quot;) MessageChannel inputChannel,\n                PubSubTemplate pubSubTemplate) \n        {\n            PubSubInboundChannelAdapter adapter = new PubSubInboundChannelAdapter(pubSubTemplate, pubSubSubscriptionName);\n            adapter.setOutputChannel(inputChannel);\n            adapter.setAckMode(AckMode.AUTO_ACK);\n            adapter.setErrorChannelName(&quot;pubsubErrors&quot;);\n            return adapter;\n        }\n\n\n        @ServiceActivator(inputChannel = &quot;pubsubErrors&quot;)\n        public void pubsubErrorHandler(Message&lt;MessagingException&gt; exceptionMessage) {\n\n            BasicAcknowledgeablePubsubMessage originalMessage = (BasicAcknowledgeablePubsubMessage) exceptionMessage\n                    .getPayload().getFailedMessage().getHeaders().get(GcpPubSubHeaders.ORIGINAL_MESSAGE);\n\n            originalMessage.nack();\n        }\n\n\n         @Bean\n          public MessageChannel myInputChannel() {\n             return new DirectChannel();\n           }\n\n            @Bean\n            @ServiceActivator(inputChannel = &quot;myInputChannel&quot;)\n            public MessageHandler messageReceiver_AddCustomer() {\n                return message -&gt; {\n                      externalService.postDataTOExternalSystems(new String((byte[]) message.getPayload());\n                      };\n            }\n\n            \n            @Bean\n            @ServiceActivator(inputChannel = &quot;myInputChannel&quot;)\n            public MessageHandler messageReceiver_DeleteCustomer() {\n                return message -&gt; {\n                   \n                    externalService.deleteCustomer(new String((byte[]) message.getPayload());\n                    BasicAcknowledgeablePubsubMessage originalMessage =\n                          message.getHeaders().get(GcpPubSubHeaders.ORIGINAL_MESSAGE, BasicAcknowledgeablePubsubMessage.class);\n                    originalMessage.ack();\n                };\n            }\n}\n</code></pre>\n<p><code>ExternalService</code> below is the service which sends data to the external systems.</p>\n<pre><code>public class ExternalService{\n            \n            void postDataTOExternalSystems(Object obj){\n            // RequestEntity object formed with HttpEntity object using obj(in json) and headers \n              restTemplate.exchange(&quot;https://externalsystems/&quot;,HttpMethod.POST,requestEntity,Object.class);\n            }\n            \n            void deleteDatafromExternalSystems(Object obj){\n            // RequestEntity object formed with HttpEntity object using obj(in json) and headers \n              restTemplate.exchange(&quot;https://externalsystems/&quot;,HttpMethod.Detele,requestEntity,Object.class);\n            }\n    \n}\n</code></pre>\n<p>Since both the methods messageReceiver_AddCustomer and messageReceiver_deleteCustomer are using same channel whats happening is when I try to just addcustomer, the deleteCustomer is also called by default.</p>\n<p>I was thinking of creating a seperate channel for deleteCustomer, but creating in this way leads to creating channels for every usecase.</p>\n<p>Hence would like to know three things here.</p>\n<ol>\n<li><p>Is there is any other approach of sending through Spring integration through which I can send data to external systems using a single Channel or a different utilization of Channels.</p>\n</li>\n<li><p>If any error in the external service calls leads to unending of failure logs in the console</p>\n<pre><code> message_id: &quot;6830962001745961&quot;\n publish_time {\n   seconds: 1675783352\n   nanos: 547000000\n }\n }, timestamp=1675783353720}]': error occurred in message handler \n</code></pre>\n</li>\n</ol>\n"},{"tags":["java","android","apk"],"answers":[{"tags":[],"owner":{"account_id":18341667,"reputation":110,"user_id":13357780,"display_name":"StormSpirite"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1670958043,"creation_date":1670958043,"answer_id":74789729,"question_id":74789534,"body_markdown":"There are so many ways to verify if your app has been downloaded from an authorized source or not .\r\n\r\nYou can use for example Google&#39;s License Verification Library, it manages a connection between your app and the Android Market","title":"How do I Prevent Someone Uploading APKs of My App","body":"<p>There are so many ways to verify if your app has been downloaded from an authorized source or not .</p>\n<p>You can use for example Google's License Verification Library, it manages a connection between your app and the Android Market</p>\n"}],"owner":{"account_id":16065476,"reputation":320,"user_id":11595253,"display_name":"Teran Peterson"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74789729,"answer_count":1,"score":0,"last_activity_date":1675795746,"creation_date":1670956802,"question_id":74789534,"body_markdown":"I discovered that some unauthorized actor is downloading my app from the Google Play store and somehow creating APKs of it. They are uploaded to websites like apkcombo and the like. How do I prevent this? \r\n\r\nFrom the research I have done, obfuscating the code sounds like it might help but is this enough to prevent the app from being cloned?\r\n\r\nUpdate:\r\n\r\nI discovered that there is no way to prevent someone from copying/uploading the apk itself, but you can prevent the clone from working using the [Play Integrity API][1].\r\n\r\n\r\n  [1]: https://developer.android.com/google/play/integrity/overview","title":"How do I Prevent Someone Uploading APKs of My App","body":"<p>I discovered that some unauthorized actor is downloading my app from the Google Play store and somehow creating APKs of it. They are uploaded to websites like apkcombo and the like. How do I prevent this?</p>\n<p>From the research I have done, obfuscating the code sounds like it might help but is this enough to prevent the app from being cloned?</p>\n<p>Update:</p>\n<p>I discovered that there is no way to prevent someone from copying/uploading the apk itself, but you can prevent the clone from working using the <a href=\"https://developer.android.com/google/play/integrity/overview\" rel=\"nofollow noreferrer\">Play Integrity API</a>.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9556,"page":667,"page_size":100}
