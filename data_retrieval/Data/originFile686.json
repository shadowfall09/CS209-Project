{"items":[{"tags":["java","swing","jtable"],"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1675192439,"post_id":75301192,"comment_id":132874654,"body_markdown":"https://docs.oracle.com/javase/tutorial/uiswing/components/table.html","body":"<a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/table.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/uiswing/components/table.htm&zwnj;&#8203;l</a>"}],"answers":[{"tags":[],"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675190418,"creation_date":1675190418,"answer_id":75301746,"question_id":75301192,"body_markdown":"    //j = new JTable(sortedModel);\r\n\r\nDon&#39;t create a new JTable. \r\n\r\nJust reset the model of the existing table:\r\n\r\n    j.setModel( sortedModel );","title":"How to set an existing JTable equal to a new JTable in JSwing?","body":"<pre><code>//j = new JTable(sortedModel);\n</code></pre>\n<p>Don't create a new JTable.</p>\n<p>Just reset the model of the existing table:</p>\n<pre><code>j.setModel( sortedModel );\n</code></pre>\n"}],"owner":{"account_id":20231120,"reputation":761,"user_id":14837632,"display_name":"Soccerball123"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":75301746,"answer_count":1,"score":-1,"last_activity_date":1675190418,"creation_date":1675187686,"question_id":75301192,"body_markdown":"So I have an existing JTable that is created upon creating the app and that has values in it. When a button is clicked to sort it, I then create a copy of all the values on the JTable and then sort it and put the sorted array in a 2D array. My existing JTable is called `j` and my existing model is called `model`. I created a new table model called `sortedModel` and now I want to set that equal to `j` so that it can display the updated sorted table on the screen. \r\n\r\nI&#39;ve tried this so far but it doesn&#39;t update it on to the screen so I&#39;m assuming I&#39;m doing something wrong in terms of setting it equal to `j` (my existed JTable).\r\n\r\nHere is my code:\r\n\r\n        // Converting 2D arraylist to normal 2D array for JTable\r\n        String[][] sortedData = tempUsersToAList.stream().map(u -&gt; u.toArray(new String[0])).toArray(String[][]::new);\r\n\r\n    \r\n        DefaultTableModel sortedModel = new DefaultTableModel(sortedData, columnNames);\r\n        j = new JTable(sortedModel);","title":"How to set an existing JTable equal to a new JTable in JSwing?","body":"<p>So I have an existing JTable that is created upon creating the app and that has values in it. When a button is clicked to sort it, I then create a copy of all the values on the JTable and then sort it and put the sorted array in a 2D array. My existing JTable is called <code>j</code> and my existing model is called <code>model</code>. I created a new table model called <code>sortedModel</code> and now I want to set that equal to <code>j</code> so that it can display the updated sorted table on the screen.</p>\n<p>I've tried this so far but it doesn't update it on to the screen so I'm assuming I'm doing something wrong in terms of setting it equal to <code>j</code> (my existed JTable).</p>\n<p>Here is my code:</p>\n<pre><code>    // Converting 2D arraylist to normal 2D array for JTable\n    String[][] sortedData = tempUsersToAList.stream().map(u -&gt; u.toArray(new String[0])).toArray(String[][]::new);\n\n\n    DefaultTableModel sortedModel = new DefaultTableModel(sortedData, columnNames);\n    j = new JTable(sortedModel);\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1675189738,"post_id":75301584,"comment_id":132873951,"body_markdown":"What does `current.disconnectPred();` do?  You&#39;re calling it directly before the call to `getPred()`.","body":"What does <code>current.disconnectPred();</code> do?  You&#39;re calling it directly before the call to <code>getPred()</code>."},{"owner":{"account_id":25570478,"reputation":1,"user_id":19350934,"display_name":"King_Khalil"},"score":0,"creation_date":1675189929,"post_id":75301584,"comment_id":132874009,"body_markdown":"public void disconnectSucc()\n    {\n        if ( hasSucc() ) \n        {\n            succ.pred = null;\n            succ = null;\n        }\n    }","body":"public void disconnectSucc()     {         if ( hasSucc() )          {             succ.pred = null;             succ = null;         }     }"},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1675189970,"post_id":75301584,"comment_id":132874017,"body_markdown":"what exactly do you mean by &quot;flip&quot; ? reverse the order?","body":"what exactly do you mean by &quot;flip&quot; ? reverse the order?"},{"owner":{"account_id":25570478,"reputation":1,"user_id":19350934,"display_name":"King_Khalil"},"score":0,"creation_date":1675189974,"post_id":75301584,"comment_id":132874019,"body_markdown":"public void connectAsSucc( Element e)\n    {\n        disconnectSucc();\n        succ = e;\n        if ( e != null ) \n        {\n            e.disconnectPred();\n            e.pred = this;\n        }\n    }","body":"public void connectAsSucc( Element e)     {         disconnectSucc();         succ = e;         if ( e != null )          {             e.disconnectPred();             e.pred = this;         }     }"},{"owner":{"account_id":25570478,"reputation":1,"user_id":19350934,"display_name":"King_Khalil"},"score":0,"creation_date":1675190009,"post_id":75301584,"comment_id":132874034,"body_markdown":"I want to put the &quot;old&quot; List in reverse into the &quot;new&quot; List","body":"I want to put the &quot;old&quot; List in reverse into the &quot;new&quot; List"}],"answers":[{"tags":[],"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675190223,"creation_date":1675190223,"answer_id":75301710,"question_id":75301584,"body_markdown":"If your `DoublyLinkedList` implements the interface `java.util.List` I would first ensure that you can copy it (e.g. with a copy-constructor that initializes it with any other `Collection` or `List` - don&#39;t implement the `clone` method, too much hassle with that!).\r\n\r\nThen simply use the method `java.util.Collections.reverse(List&lt;?&gt;)` on a 1:1 copy of your original list.","title":"How to Flip a Double Linked List in java and put it into a new List","body":"<p>If your <code>DoublyLinkedList</code> implements the interface <code>java.util.List</code> I would first ensure that you can copy it (e.g. with a copy-constructor that initializes it with any other <code>Collection</code> or <code>List</code> - don't implement the <code>clone</code> method, too much hassle with that!).</p>\n<p>Then simply use the method <code>java.util.Collections.reverse(List&lt;?&gt;)</code> on a 1:1 copy of your original list.</p>\n"}],"owner":{"account_id":25570478,"reputation":1,"user_id":19350934,"display_name":"King_Khalil"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":75301710,"answer_count":1,"score":-1,"last_activity_date":1675190223,"creation_date":1675189571,"question_id":75301584,"body_markdown":"I wanted to flip a Double Linked List and put it into a new List. But I don&#39;t know how to solve the Problem. My Code looks like this and I think it makes sense, but it doesn&#39;t work at all.\r\n\r\n*getPred = previous\r\ngetSucc = next*\r\n\r\n```\r\n    public DoublyLinkedList fliping()\r\n    {\r\n        DoublyLinkedList newList = new DoublyLinkedList();\r\n        Element current = last;\r\n        Element toInsert = newList.first;\r\n        while(current != null)\r\n        {\r\n            current.disconnectPred();\r\n            Element temp = current.getPred();\r\n            Element temp2 = current.getPred().getPred();\r\n            if(toInsert == newList.first)\r\n            {\r\n                temp.connectAsSucc(temp2);\r\n                temp2.connectAsPred(temp);\r\n                toInsert.connectAsSucc(temp);\r\n                newList.size++;\r\n            }\r\n            if(temp2 == null)\r\n            {\r\n                temp.connectAsSucc(temp2);\r\n                toInsert.connectAsSucc(temp);\r\n                newList.size++;\r\n            }\r\n            temp.connectAsSucc(temp2);\r\n            temp2.connectAsPred(temp);\r\n            toInsert.connectAsSucc(temp);\r\n            toInsert.connectAsPred(temp2);\r\n            toInsert = toInsert.getSucc();\r\n            current = current.getPred();\r\n            newList.size++;\r\n            size--;\r\n        }\r\n        return newList;\r\n    }\r\n\r\nException in thread &quot;main&quot; java.lang.NullPointerException: Cannot invoke &quot;Element.getPred()&quot; because the return value of &quot;Element.getPred()&quot; is null\r\n\tat DoublyLinkedList.fliping(DoublyLinkedList.java:282)\r\n\tat Testumgebung.testDoublyLinkedList(Testumgebung.java:35)\r\n\tat Testumgebung.main(Testumgebung.java:7)\r\n```\r\n\r\n\r\n\r\nI tried to disconnect the last element and the second last element. Than i tried to connect them to each other and put them togeter, as the first and second element into the new List","title":"How to Flip a Double Linked List in java and put it into a new List","body":"<p>I wanted to flip a Double Linked List and put it into a new List. But I don't know how to solve the Problem. My Code looks like this and I think it makes sense, but it doesn't work at all.</p>\n<p><em>getPred = previous\ngetSucc = next</em></p>\n<pre><code>    public DoublyLinkedList fliping()\n    {\n        DoublyLinkedList newList = new DoublyLinkedList();\n        Element current = last;\n        Element toInsert = newList.first;\n        while(current != null)\n        {\n            current.disconnectPred();\n            Element temp = current.getPred();\n            Element temp2 = current.getPred().getPred();\n            if(toInsert == newList.first)\n            {\n                temp.connectAsSucc(temp2);\n                temp2.connectAsPred(temp);\n                toInsert.connectAsSucc(temp);\n                newList.size++;\n            }\n            if(temp2 == null)\n            {\n                temp.connectAsSucc(temp2);\n                toInsert.connectAsSucc(temp);\n                newList.size++;\n            }\n            temp.connectAsSucc(temp2);\n            temp2.connectAsPred(temp);\n            toInsert.connectAsSucc(temp);\n            toInsert.connectAsPred(temp2);\n            toInsert = toInsert.getSucc();\n            current = current.getPred();\n            newList.size++;\n            size--;\n        }\n        return newList;\n    }\n\nException in thread &quot;main&quot; java.lang.NullPointerException: Cannot invoke &quot;Element.getPred()&quot; because the return value of &quot;Element.getPred()&quot; is null\n    at DoublyLinkedList.fliping(DoublyLinkedList.java:282)\n    at Testumgebung.testDoublyLinkedList(Testumgebung.java:35)\n    at Testumgebung.main(Testumgebung.java:7)\n</code></pre>\n<p>I tried to disconnect the last element and the second last element. Than i tried to connect them to each other and put them togeter, as the first and second element into the new List</p>\n"},{"tags":["java","random"],"comments":[{"owner":{"account_id":248321,"reputation":62665,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":0,"creation_date":1675189594,"post_id":75301544,"comment_id":132873908,"body_markdown":"Please tag the programming language you are asking about.","body":"Please tag the programming language you are asking about."},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":1,"creation_date":1675189879,"post_id":75301544,"comment_id":132873993,"body_markdown":"you have to store the last error answer you gave and then check at the next answer if it would be the same. If yes, you can either pick again a random one or just take the &quot;next&quot; one.","body":"you have to store the last error answer you gave and then check at the next answer if it would be the same. If yes, you can either pick again a random one or just take the &quot;next&quot; one."},{"owner":{"account_id":248321,"reputation":62665,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":0,"creation_date":1675190161,"post_id":75301544,"comment_id":132874073,"body_markdown":"Should it use every answer once before using any of them again? Or does it only need to avoid giving the same answer twice in a row? Aside from that - how would you solve the problem with pencil and paper?","body":"Should it use every answer once before using any of them again? Or does it only need to avoid giving the same answer twice in a row? Aside from that - how would you solve the problem with pencil and paper?"},{"owner":{"account_id":22766627,"reputation":1,"user_id":16924564,"display_name":"jepa"},"score":0,"creation_date":1675190368,"post_id":75301544,"comment_id":132874139,"body_markdown":"It just needs to avoid giving the same error response twice in a row.","body":"It just needs to avoid giving the same error response twice in a row."},{"owner":{"account_id":248321,"reputation":62665,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":0,"creation_date":1675190957,"post_id":75301544,"comment_id":132874297,"body_markdown":"Does https://stackoverflow.com/questions/16265890 answer your question?","body":"Does <a href=\"https://stackoverflow.com/questions/16265890\">stackoverflow.com/questions/16265890</a> answer your question?"},{"owner":{"account_id":22766627,"reputation":1,"user_id":16924564,"display_name":"jepa"},"score":0,"creation_date":1675195844,"post_id":75301544,"comment_id":132875582,"body_markdown":"It doesn&#39;t seem to be helping","body":"It doesn&#39;t seem to be helping"}],"owner":{"account_id":22766627,"reputation":1,"user_id":16924564,"display_name":"jepa"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675190060,"creation_date":1675189379,"question_id":75301544,"body_markdown":"I have a program that emulates a small translation program and I&#39;m trying to figure out how would I go about making the error responses not repeat itself twice in a row (e.g the response &quot;I don&#39;t know this word, sorry.&quot; can be explicitly stated right after when there is a failure to translate a word).\r\n\r\n```\r\npublic void fillErrorResponses() {\r\n\t\t// Adding responses to be used if no translation was found.\r\n\t\terrorResponses.add(&quot;I am sorry but I do not know how to translate this.&quot;);\r\n\t\terrorResponses.add(&quot;I don&#39;t know this word, sorry.&quot;);\r\n\t\terrorResponses.add(&quot;Are you sure that this is a word?&quot;);\r\n\t\terrorResponses.add(&quot;This cannot be translated.&quot;);\r\n\t}\r\n\r\n\tpublic String getErrorResponse() {\r\n\r\n        // Pick a random number for the index in the error response list.\r\n\t\t// The number will be between 0 (inclusive) and the size of the list (exclusive).\r\n\t\tint idx = rnd.nextInt(errorResponses.size());\r\n\t\treturn errorResponses.get(idx);\r\n```\r\nAt the moment, when a word that a user inputs cannot be translated, it will provide a random error response but still allows for that same error response to be displayed directly after it being used, for example:\r\n\r\n```\r\nPlease, type in a single word to translate it.\r\n&gt; gah\r\nI don&#39;t know this word, sorry.\r\n&gt; gah\r\nI am sorry but I do not know how to translate this.\r\n&gt; gah\r\nI am sorry but I do not know how to translate this.\r\n\r\n```\r\n\r\nHow do i make it so that it doesn&#39;t show the same response twice in a row when a user inputs word that cannot be translated?","title":"How do I ensure that the same error response is never repeated twice in a row","body":"<p>I have a program that emulates a small translation program and I'm trying to figure out how would I go about making the error responses not repeat itself twice in a row (e.g the response &quot;I don't know this word, sorry.&quot; can be explicitly stated right after when there is a failure to translate a word).</p>\n<pre><code>public void fillErrorResponses() {\n        // Adding responses to be used if no translation was found.\n        errorResponses.add(&quot;I am sorry but I do not know how to translate this.&quot;);\n        errorResponses.add(&quot;I don't know this word, sorry.&quot;);\n        errorResponses.add(&quot;Are you sure that this is a word?&quot;);\n        errorResponses.add(&quot;This cannot be translated.&quot;);\n    }\n\n    public String getErrorResponse() {\n\n        // Pick a random number for the index in the error response list.\n        // The number will be between 0 (inclusive) and the size of the list (exclusive).\n        int idx = rnd.nextInt(errorResponses.size());\n        return errorResponses.get(idx);\n</code></pre>\n<p>At the moment, when a word that a user inputs cannot be translated, it will provide a random error response but still allows for that same error response to be displayed directly after it being used, for example:</p>\n<pre><code>Please, type in a single word to translate it.\n&gt; gah\nI don't know this word, sorry.\n&gt; gah\nI am sorry but I do not know how to translate this.\n&gt; gah\nI am sorry but I do not know how to translate this.\n\n</code></pre>\n<p>How do i make it so that it doesn't show the same response twice in a row when a user inputs word that cannot be translated?</p>\n"},{"tags":["java","unit-testing","mockito"],"answers":[{"tags":[],"owner":{"account_id":9458732,"reputation":306,"user_id":7033181,"display_name":"Dash"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675189996,"creation_date":1675189996,"answer_id":75301659,"question_id":75300417,"body_markdown":"Found a solution to use `ArgumentCaptor` to capture the initialized observer in the view model when `viewModelDataSource.setObserver(observer);` is called.\r\n\r\nIn my unit test:\r\n\r\n```\r\nArgumentCaptor&lt;ViewModelDataSource.DataSourceObserver&gt; capturedObserver = ArgumentCaptor.forClass(ViewModelDataSource.DataSourceObserver.class);\r\nSampleViewModel viewModel = new SimpleViewModel( ...);\r\nassertNotNull(capturedObserver);\r\n```","title":"How to unit test observer called from a private method?","body":"<p>Found a solution to use <code>ArgumentCaptor</code> to capture the initialized observer in the view model when <code>viewModelDataSource.setObserver(observer);</code> is called.</p>\n<p>In my unit test:</p>\n<pre><code>ArgumentCaptor&lt;ViewModelDataSource.DataSourceObserver&gt; capturedObserver = ArgumentCaptor.forClass(ViewModelDataSource.DataSourceObserver.class);\nSampleViewModel viewModel = new SimpleViewModel( ...);\nassertNotNull(capturedObserver);\n</code></pre>\n"}],"owner":{"account_id":9458732,"reputation":306,"user_id":7033181,"display_name":"Dash"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675189996,"creation_date":1675183727,"question_id":75300417,"body_markdown":"I have a view model class, `SampleViewModel`, that has an observer, `DataSourceObserver`, whose event&#39;s (e.g. `onDataUpdated`) are triggered from a private method of the view model&#39;s data source class.\r\n\r\nI am trying to add a unit test for how the view model&#39;s observer handles the `onDataUpdated`.\r\n\r\n```\r\n@HiltViewModel\r\npublic class SampleViewModel extends ViewModel {\r\n\r\n  private final @NonNull ViewModelDataSource viewModelDataSource;\r\n\r\n  private final @NonNull ViewModelDataSource.DataSourceObserver observer = new ViewModelDataSource.DataSourceObserver() {\r\n    @Overrode\r\n    public void onDataUpdated(){\r\n      // some sort of handling\r\n    }\r\n  };\r\n\r\n  @Inject\r\n  public SampleViewModel(final @NonNull ViewModelDataSource dataSource){\r\n    viewModelDataSource = dataSource;\r\n    viewModelDataSource.setObserver(observer);\r\n  }\r\n}\r\n\r\npublic class ViewModelDataSource{\r\n  public interface DataSourceObserver {\r\n    void onDataUpdated();\r\n  }\r\n\r\n  private final ContactObservers.Observer contactObserver = new ContactObservers.Observer(){\r\n    @Override\r\n    public void onContactUpdated(){\r\n      if (myObserver != null){\r\n        myObserver.onDataUpdated();\r\n      }\r\n    }\r\n  };\r\n\r\n  private @Nullable DataSourceObserver myObserver;\r\n  \r\n  @Inject\r\n  public ViewModelDataSource(){\r\n    // other initialization here\r\n  }\r\n\r\n  public void setObserver(DataSourceObserver observer){\r\n    myObserver = observer;\r\n  }\r\n}\r\n```\r\n\r\nI have Mockito for mocking/stubbing objects, but I have no idea how to approach such a problem so that I can at least trigger something like `observer.onDataUpdated` and verify the method calls within the handling of `onDataUpdated`","title":"How to unit test observer called from a private method?","body":"<p>I have a view model class, <code>SampleViewModel</code>, that has an observer, <code>DataSourceObserver</code>, whose event's (e.g. <code>onDataUpdated</code>) are triggered from a private method of the view model's data source class.</p>\n<p>I am trying to add a unit test for how the view model's observer handles the <code>onDataUpdated</code>.</p>\n<pre><code>@HiltViewModel\npublic class SampleViewModel extends ViewModel {\n\n  private final @NonNull ViewModelDataSource viewModelDataSource;\n\n  private final @NonNull ViewModelDataSource.DataSourceObserver observer = new ViewModelDataSource.DataSourceObserver() {\n    @Overrode\n    public void onDataUpdated(){\n      // some sort of handling\n    }\n  };\n\n  @Inject\n  public SampleViewModel(final @NonNull ViewModelDataSource dataSource){\n    viewModelDataSource = dataSource;\n    viewModelDataSource.setObserver(observer);\n  }\n}\n\npublic class ViewModelDataSource{\n  public interface DataSourceObserver {\n    void onDataUpdated();\n  }\n\n  private final ContactObservers.Observer contactObserver = new ContactObservers.Observer(){\n    @Override\n    public void onContactUpdated(){\n      if (myObserver != null){\n        myObserver.onDataUpdated();\n      }\n    }\n  };\n\n  private @Nullable DataSourceObserver myObserver;\n  \n  @Inject\n  public ViewModelDataSource(){\n    // other initialization here\n  }\n\n  public void setObserver(DataSourceObserver observer){\n    myObserver = observer;\n  }\n}\n</code></pre>\n<p>I have Mockito for mocking/stubbing objects, but I have no idea how to approach such a problem so that I can at least trigger something like <code>observer.onDataUpdated</code> and verify the method calls within the handling of <code>onDataUpdated</code></p>\n"},{"tags":["java","flutter","error-handling","setup-project"],"owner":{"account_id":27627560,"reputation":1,"user_id":21087248,"display_name":"Sangeeta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":116,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675189753,"creation_date":1675189653,"question_id":75301597,"body_markdown":"I have recently set flutter in my laptop along with Android studio setup. When executed **flutter doctor**i got a continuous error under android studio      *Unable to find bundled java version*\r\n\r\n\r\n I tried using commands that changes the file jbr to jvr nd vice versa! \r\n\r\nAlso tried uninstalling the files of java! And set the requirements yet this is not resolved.\r\n\r\nUpdating the android studio also not helped..\r\n\r\n&gt; Unable to find bundled java version","title":"How to fix the errror &quot;unable to find bundled java version &quot; in flutter doctor command?","body":"<p>I have recently set flutter in my laptop along with Android studio setup. When executed <strong>flutter doctor</strong>i got a continuous error under android studio      <em>Unable to find bundled java version</em></p>\n<p>I tried using commands that changes the file jbr to jvr nd vice versa!</p>\n<p>Also tried uninstalling the files of java! And set the requirements yet this is not resolved.</p>\n<p>Updating the android studio also not helped..</p>\n<blockquote>\n<p>Unable to find bundled java version</p>\n</blockquote>\n"},{"tags":["java","spring","unit-testing","mockito"],"comments":[{"owner":{"account_id":1101161,"reputation":119804,"user_id":1093528,"accept_rate":65,"display_name":"fge"},"score":0,"creation_date":1429178515,"post_id":29670463,"comment_id":47480536,"body_markdown":"There would be by creating a custom argument matcher. I know it is possible, however I have never done that so I can&#39;t help further, sorry :( (edit: [link](http://docs.mockito.googlecode.com/hg/latest/org/mockito/Matchers.html))","body":"There would be by creating a custom argument matcher. I know it is possible, however I have never done that so I can&#39;t help further, sorry :( (edit: <a href=\"http://docs.mockito.googlecode.com/hg/latest/org/mockito/Matchers.html\" rel=\"nofollow noreferrer\">link</a>)"},{"owner":{"account_id":192292,"reputation":7779,"user_id":433348,"accept_rate":88,"display_name":"Kevin Welker"},"score":0,"creation_date":1429718713,"post_id":29670463,"comment_id":47734066,"body_markdown":"FYI, always replace `any(String.class)` with `anyString()`, and similarly for `anyInt()`, `anyFloat()`, etc...  It&#39;s simpler, more concise, easire on the eyes, and not subject to type-erasure.","body":"FYI, always replace <code>any(String.class)</code> with <code>anyString()</code>, and similarly for <code>anyInt()</code>, <code>anyFloat()</code>, etc...  It&#39;s simpler, more concise, easire on the eyes, and not subject to type-erasure."}],"answers":[{"tags":[],"owner":{"account_id":1529248,"reputation":92157,"user_id":1426891,"display_name":"Jeff Bowman"},"down_vote_count":0,"up_vote_count":31,"is_accepted":true,"score":31,"last_activity_date":1675189329,"creation_date":1429200772,"answer_id":29680408,"question_id":29670463,"body_markdown":"Mockito isn&#39;t good at matching generics itself, but your solution is much easier than the general case.\r\n\r\nReplace your:\r\n\r\n    Matchers.&lt;ParameterizedTypeReference&lt;SearchResultsDTO&lt;SolrDocumentDTO&gt;&gt;&gt;any())\r\n\r\nwith:\r\n\r\n    eq(new ParameterizedTypeReference&lt;SearchResultsDTO&lt;SolrDocumentDTO&gt;&gt;() {}))\r\n\r\n---\r\n\r\nFirst of all, `Matchers.any()` doesn&#39;t match type. In Mockito 1.x, `any(Foo.class)` doesn&#39;t even match type: `any()` matches [all values, including null and including incorrect types][any].\r\n\r\n&gt; Matches any object, including nulls\r\n&gt;\r\n&gt;This method doesn&#39;t do type checks with the given parameter, it is only there to avoid casting in your code. This might however change (type checks could be added) in a future major release.\r\n\r\n(Side note: In Mockito 2 and beyond, `any(Foo.class)` has English-like &quot;any Foo&quot; semantics, making it behave much more like `isA(Foo.class)`.)\r\n\r\nThe generics are helpful to get the right parameter for `exchange` and `thenReturn`, but because of [type erasure][] none of that type information makes it into the CLASS file, let alone the JVM. The only Matcher that asserts the type of its argument is [`isA`][isA], which takes a class literal and won&#39;t help you for parameterized types.\r\n\r\nYou could write a custom Matcher that inspects an argument&#39;s type and type parameters, if they aren&#39;t subject to erasure, but for your specific case that&#39;s not necessary.\r\n    \r\nType erasure is the whole reason [ParameterizedTypeReference][] exists: It captures the generics information into a subclass, where the parameterized type _will not_ be erased. This same pattern is used for [TypeToken][] in Guava or [TypeLiteral][] in Guice. All of these implementations _describe a parameterized type as an instance_.\r\n\r\nImportantly, all of them—including [ParameterizedTypeReference][]—support `equals` and `hashCode`, so `new ParameterizedTypeReference&lt;A&lt;B&gt;&gt;(){}` equals `new ParameterizedTypeReference&lt;A&lt;B&gt;&gt;(){}` even though the instances are different. [(See the code here.)][ptr-code]\r\n\r\nBecause references to the same parameterized type are equal, use Mockito&#39;s `eq` matcher with a different reference, and things should be fine.\r\n\r\n[any]: http://site.mockito.org/mockito/docs/current/org/mockito/Matchers.html#any(java.lang.Class)\r\n[any-change]: https://stackoverflow.com/questions/33904877/mockito-when-doesnt-differentiate-between-child-classes#comment55631479_33904939\r\n[type erasure]: https://docs.oracle.com/javase/tutorial/java/generics/erasure.html\r\n[isA]: https://mockito.googlecode.com/svn/branches/1.6/javadoc/org/mockito/Matchers.html#isA(java.lang.Class)\r\n[ParameterizedTypeReference]: http://docs.spring.io/autorepo/docs/spring/3.2.3.RELEASE/javadoc-api/org/springframework/core/ParameterizedTypeReference.html\r\n[TypeToken]: https://guava.dev/releases/snapshot-jre/api/docs/com/google/common/reflect/TypeToken.html\r\n[TypeLiteral]: http://google.github.io/guice/api-docs/latest/javadoc/com/google/inject/TypeLiteral.html\r\n[ptr-code]: https://github.com/spring-projects/spring-framework/blob/16937c7ce5aa43b495cc04587855da670219eb7a/spring-core/src/main/java/org/springframework/core/ParameterizedTypeReference.java#L71","title":"Match generics with Mockito","body":"<p>Mockito isn't good at matching generics itself, but your solution is much easier than the general case.</p>\n<p>Replace your:</p>\n<pre><code>Matchers.&lt;ParameterizedTypeReference&lt;SearchResultsDTO&lt;SolrDocumentDTO&gt;&gt;&gt;any())\n</code></pre>\n<p>with:</p>\n<pre><code>eq(new ParameterizedTypeReference&lt;SearchResultsDTO&lt;SolrDocumentDTO&gt;&gt;() {}))\n</code></pre>\n<hr />\n<p>First of all, <code>Matchers.any()</code> doesn't match type. In Mockito 1.x, <code>any(Foo.class)</code> doesn't even match type: <code>any()</code> matches <a href=\"http://site.mockito.org/mockito/docs/current/org/mockito/Matchers.html#any(java.lang.Class)\" rel=\"nofollow noreferrer\">all values, including null and including incorrect types</a>.</p>\n<blockquote>\n<p>Matches any object, including nulls</p>\n<p>This method doesn't do type checks with the given parameter, it is only there to avoid casting in your code. This might however change (type checks could be added) in a future major release.</p>\n</blockquote>\n<p>(Side note: In Mockito 2 and beyond, <code>any(Foo.class)</code> has English-like &quot;any Foo&quot; semantics, making it behave much more like <code>isA(Foo.class)</code>.)</p>\n<p>The generics are helpful to get the right parameter for <code>exchange</code> and <code>thenReturn</code>, but because of <a href=\"https://docs.oracle.com/javase/tutorial/java/generics/erasure.html\" rel=\"nofollow noreferrer\">type erasure</a> none of that type information makes it into the CLASS file, let alone the JVM. The only Matcher that asserts the type of its argument is <a href=\"https://mockito.googlecode.com/svn/branches/1.6/javadoc/org/mockito/Matchers.html#isA(java.lang.Class)\" rel=\"nofollow noreferrer\"><code>isA</code></a>, which takes a class literal and won't help you for parameterized types.</p>\n<p>You could write a custom Matcher that inspects an argument's type and type parameters, if they aren't subject to erasure, but for your specific case that's not necessary.</p>\n<p>Type erasure is the whole reason <a href=\"http://docs.spring.io/autorepo/docs/spring/3.2.3.RELEASE/javadoc-api/org/springframework/core/ParameterizedTypeReference.html\" rel=\"nofollow noreferrer\">ParameterizedTypeReference</a> exists: It captures the generics information into a subclass, where the parameterized type <em>will not</em> be erased. This same pattern is used for <a href=\"https://guava.dev/releases/snapshot-jre/api/docs/com/google/common/reflect/TypeToken.html\" rel=\"nofollow noreferrer\">TypeToken</a> in Guava or <a href=\"http://google.github.io/guice/api-docs/latest/javadoc/com/google/inject/TypeLiteral.html\" rel=\"nofollow noreferrer\">TypeLiteral</a> in Guice. All of these implementations <em>describe a parameterized type as an instance</em>.</p>\n<p>Importantly, all of them—including <a href=\"http://docs.spring.io/autorepo/docs/spring/3.2.3.RELEASE/javadoc-api/org/springframework/core/ParameterizedTypeReference.html\" rel=\"nofollow noreferrer\">ParameterizedTypeReference</a>—support <code>equals</code> and <code>hashCode</code>, so <code>new ParameterizedTypeReference&lt;A&lt;B&gt;&gt;(){}</code> equals <code>new ParameterizedTypeReference&lt;A&lt;B&gt;&gt;(){}</code> even though the instances are different. <a href=\"https://github.com/spring-projects/spring-framework/blob/16937c7ce5aa43b495cc04587855da670219eb7a/spring-core/src/main/java/org/springframework/core/ParameterizedTypeReference.java#L71\" rel=\"nofollow noreferrer\">(See the code here.)</a></p>\n<p>Because references to the same parameterized type are equal, use Mockito's <code>eq</code> matcher with a different reference, and things should be fine.</p>\n"}],"owner":{"account_id":286519,"reputation":1001,"user_id":585814,"accept_rate":80,"display_name":"Dario Zamuner"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15630,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"accepted_answer_id":29680408,"answer_count":1,"score":18,"last_activity_date":1675189329,"creation_date":1429176152,"question_id":29670463,"body_markdown":"I&#39;m trying to mock the `restTemplate.exchange` method of Spring Rest.\r\n\r\nIn the same test I have multiple calls which differ only by the return type.\r\n\r\nHere are the methods with the mocks I created\r\n\r\nFirst\r\n\r\n    // Original method\r\n    restTemplate.exchange(UrlMap.SEARCH + &#39;?&#39; + searchDocsForm.toQueryParams(),\r\n\t\t\t\tHttpMethod.GET, null, new ParameterizedTypeReference&lt;SearchResultsDTO&lt;SolrDocumentDTO&gt;&gt;() {\r\n\t\t\t\t})\r\n    // Mock\r\n    when(restTemplate.exchange(any(String.class), any(HttpMethod.class), any(), Matchers.&lt;ParameterizedTypeReference&lt;SearchResultsDTO&lt;SolrDocumentDTO&gt;&gt;&gt;any())).thenReturn(\r\n\t\t\t\tnew ResponseEntity&lt;&gt;(searchResultsDTO, HttpStatus.OK));\r\n\r\nSecond\r\n\r\n    // Original method\r\n    restTemplate.exchange(UrlMap.ALL_DOCUS_TOPICS,\r\n\t\t\t\tHttpMethod.GET, null, new ParameterizedTypeReference&lt;List&lt;SelectItem&gt;&gt;() {\r\n\t\t\t\t}).getBody();\r\n    // Mock\r\n    when(restTemplate.exchange(any(String.class), any(HttpMethod.class), any(), Matchers.&lt;ParameterizedTypeReference&lt;List&lt;SelectItem&gt;&gt;&gt;any())).thenReturn(\r\n\t\t\t\tnew ResponseEntity&lt;&gt;(selectItems, HttpStatus.OK));\r\n\r\nThe generic parameters of `ParameterizedTypeReference` are not considered by the mock, and the last defined mock wins over the former.\r\n\r\nIs there any way to make it work?","title":"Match generics with Mockito","body":"<p>I'm trying to mock the <code>restTemplate.exchange</code> method of Spring Rest.</p>\n\n<p>In the same test I have multiple calls which differ only by the return type.</p>\n\n<p>Here are the methods with the mocks I created</p>\n\n<p>First</p>\n\n<pre><code>// Original method\nrestTemplate.exchange(UrlMap.SEARCH + '?' + searchDocsForm.toQueryParams(),\n            HttpMethod.GET, null, new ParameterizedTypeReference&lt;SearchResultsDTO&lt;SolrDocumentDTO&gt;&gt;() {\n            })\n// Mock\nwhen(restTemplate.exchange(any(String.class), any(HttpMethod.class), any(), Matchers.&lt;ParameterizedTypeReference&lt;SearchResultsDTO&lt;SolrDocumentDTO&gt;&gt;&gt;any())).thenReturn(\n            new ResponseEntity&lt;&gt;(searchResultsDTO, HttpStatus.OK));\n</code></pre>\n\n<p>Second</p>\n\n<pre><code>// Original method\nrestTemplate.exchange(UrlMap.ALL_DOCUS_TOPICS,\n            HttpMethod.GET, null, new ParameterizedTypeReference&lt;List&lt;SelectItem&gt;&gt;() {\n            }).getBody();\n// Mock\nwhen(restTemplate.exchange(any(String.class), any(HttpMethod.class), any(), Matchers.&lt;ParameterizedTypeReference&lt;List&lt;SelectItem&gt;&gt;&gt;any())).thenReturn(\n            new ResponseEntity&lt;&gt;(selectItems, HttpStatus.OK));\n</code></pre>\n\n<p>The generic parameters of <code>ParameterizedTypeReference</code> are not considered by the mock, and the last defined mock wins over the former.</p>\n\n<p>Is there any way to make it work?</p>\n"},{"tags":["java","spring","spring-jdbc","lombok"],"answers":[{"tags":[],"owner":{"account_id":27668500,"reputation":1,"user_id":21119820,"display_name":"cakimax113 "},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675189232,"creation_date":1675189232,"answer_id":75301518,"question_id":75301259,"body_markdown":"I&#39;m answering my own question but its very specific to this project\r\n\r\nIn the end I found a class up the inheritance and used the injection functionality there and passed it in to the static class\r\n\r\nI don&#39;t know if that is the best way but it seems to be working \r\n\r\nI&#39;m open to comments on how i can improve this code solution","title":"Can you @autowire a field in static child class from spring boot 1.5.9","body":"<p>I'm answering my own question but its very specific to this project</p>\n<p>In the end I found a class up the inheritance and used the injection functionality there and passed it in to the static class</p>\n<p>I don't know if that is the best way but it seems to be working</p>\n<p>I'm open to comments on how i can improve this code solution</p>\n"}],"owner":{"account_id":27668500,"reputation":1,"user_id":21119820,"display_name":"cakimax113 "},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1675189232,"creation_date":1675187976,"question_id":75301259,"body_markdown":"I was given a really REALLY old project at work\r\n\r\nI usually don&#39;t have a problem google cant figure out for me\r\n\r\nThis is a massive code base and I&#39;m in charge of fixing it\r\n\r\nThe original author created a class and inside that class created a static child class\r\n\r\nexample\r\n```\r\npublic class parent {\r\n   public static class child {\r\n   }\r\n}\r\n```\r\ninside that static child class I am hoping to @Autowire a repo already created and working fine\r\n\r\nI am the first to admit I don&#39;t know everything but from what i understand\r\n\r\nIf the spring framework can find the component \r\n\r\nIt should be able to inject it&#39;s dependency\r\n\r\n\r\nFor example:\r\n```\r\n@component\r\npublic class parent {\r\n\r\n   @component\r\n   public static class child {\r\n\r\n        @autowired\r\n        private SomeRepo repo;\r\n   }\r\n}\r\n```\r\nBut clearly I&#39;m wrong about that\r\n\r\nI&#39;m really really trying to avoid using jdbctemplate because from what I&#39;m reading so far\r\nit bypasses and duplicates a connection that should be managed by Spring\r\n\r\nBut I am struggling to autowire this repo for accessing the database\r\n\r\nPlease help \r\n\r\n\r\nI have tried attaching the @component, @entity, JDBCTemplate Im hoping to avoid\r\nI have also tried Autowiring up the channel that calls it and sending it in the function of the static class that needs it\r\n\r\nI have been reading and cant find an answer yet","title":"Can you @autowire a field in static child class from spring boot 1.5.9","body":"<p>I was given a really REALLY old project at work</p>\n<p>I usually don't have a problem google cant figure out for me</p>\n<p>This is a massive code base and I'm in charge of fixing it</p>\n<p>The original author created a class and inside that class created a static child class</p>\n<p>example</p>\n<pre><code>public class parent {\n   public static class child {\n   }\n}\n</code></pre>\n<p>inside that static child class I am hoping to @Autowire a repo already created and working fine</p>\n<p>I am the first to admit I don't know everything but from what i understand</p>\n<p>If the spring framework can find the component</p>\n<p>It should be able to inject it's dependency</p>\n<p>For example:</p>\n<pre><code>@component\npublic class parent {\n\n   @component\n   public static class child {\n\n        @autowired\n        private SomeRepo repo;\n   }\n}\n</code></pre>\n<p>But clearly I'm wrong about that</p>\n<p>I'm really really trying to avoid using jdbctemplate because from what I'm reading so far\nit bypasses and duplicates a connection that should be managed by Spring</p>\n<p>But I am struggling to autowire this repo for accessing the database</p>\n<p>Please help</p>\n<p>I have tried attaching the @component, @entity, JDBCTemplate Im hoping to avoid\nI have also tried Autowiring up the channel that calls it and sending it in the function of the static class that needs it</p>\n<p>I have been reading and cant find an answer yet</p>\n"},{"tags":["java","android","ios","flutter","mobile-application"],"answers":[{"tags":[],"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"down_vote_count":2,"up_vote_count":1,"is_accepted":true,"score":-1,"last_activity_date":1675189134,"creation_date":1675189134,"answer_id":75301497,"question_id":75301434,"body_markdown":"It&#39;s been a few years since I did any Android development, but I suspect most apps you&#39;re referring to probably use a [WebView][1] as their primary component, enabling them to serve mobile-friendly HTML/JavaScript/CSS content for the app to render.\r\n\r\nSome apps probably mix static UI components with WebViews for portions they need to be dynamic and change frequently.\r\n\r\n\r\n  [1]: https://developer.android.com/develop/ui/views/layout/webapps/webview","title":"Frequently changing UI in mobile applications","body":"<p>It's been a few years since I did any Android development, but I suspect most apps you're referring to probably use a <a href=\"https://developer.android.com/develop/ui/views/layout/webapps/webview\" rel=\"nofollow noreferrer\">WebView</a> as their primary component, enabling them to serve mobile-friendly HTML/JavaScript/CSS content for the app to render.</p>\n<p>Some apps probably mix static UI components with WebViews for portions they need to be dynamic and change frequently.</p>\n"}],"owner":{"account_id":25845637,"reputation":534,"user_id":19580540,"display_name":"ayush"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1675257106,"accepted_answer_id":75301497,"answer_count":1,"score":-3,"last_activity_date":1675189134,"creation_date":1675188833,"question_id":75301434,"body_markdown":"I have been working on Mobile Applications and developing several types of UIs. But I frequently face a question regarding dynamic UIs.  \r\nIn **E-Commerce apps or Food Delivery Apps**, we generally see that the UI changes quite often (with new offers, items, festival sales, etc. shown and removed) and is not static (**like we generally code a UI with different views/widgets, which show dynamic data**). So, my question is how the UI is made dynamic in this sense without pushing new updates to the apps?  \r\nAlso, how we can develop such a UI in **Flutter?**","title":"Frequently changing UI in mobile applications","body":"<p>I have been working on Mobile Applications and developing several types of UIs. But I frequently face a question regarding dynamic UIs.<br />\nIn <strong>E-Commerce apps or Food Delivery Apps</strong>, we generally see that the UI changes quite often (with new offers, items, festival sales, etc. shown and removed) and is not static (<strong>like we generally code a UI with different views/widgets, which show dynamic data</strong>). So, my question is how the UI is made dynamic in this sense without pushing new updates to the apps?<br />\nAlso, how we can develop such a UI in <strong>Flutter?</strong></p>\n"},{"tags":["java","multithreading","db2"],"answers":[{"tags":[],"owner":{"account_id":24847247,"reputation":1,"user_id":18724649,"display_name":"Sara.es"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675189083,"creation_date":1675189083,"answer_id":75301483,"question_id":75301349,"body_markdown":"According to IBM documentation: \r\n\r\n&gt; The page or row lock on the page or subpage identified by the NAME resource-name value in message DSNT500I or DSNT501I caused the total number of page or row locks concurrently held to reach the installation maximum number of page or row locks (NUMLKUS) allowed for a single agent in the system\r\n\r\nI assume that you have to reduce the number of dirty pages or in another word uncommitted changes into DB. Alternatively you can also commit your changes during the process to reduce the number uncommitted changes.","title":"com.ibm.db2.jcc.am.SqlException: UNSUCCESSFUL EXECUTION CAUSED BY AN UNAVAILABLE RESOURCE. REASON 00C90096","body":"<p>According to IBM documentation:</p>\n<blockquote>\n<p>The page or row lock on the page or subpage identified by the NAME resource-name value in message DSNT500I or DSNT501I caused the total number of page or row locks concurrently held to reach the installation maximum number of page or row locks (NUMLKUS) allowed for a single agent in the system</p>\n</blockquote>\n<p>I assume that you have to reduce the number of dirty pages or in another word uncommitted changes into DB. Alternatively you can also commit your changes during the process to reduce the number uncommitted changes.</p>\n"}],"owner":{"account_id":4709043,"reputation":227,"user_id":3810175,"display_name":"Ramin Safar Manesh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":268,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675189083,"creation_date":1675188399,"question_id":75301349,"body_markdown":"I want to insert multiple records in a multi-thread function into DB and after inserting a specific amount of records i become always the following exception:\r\n```\r\nOutermost stacktrace: com.ibm.db2.jcc.am.SqlException: UNSUCCESSFUL EXECUTION CAUSED BY AN UNAVAILABLE RESOURCE. REASON 00C90096, TYPE OF RESOURCE 00000304, AND RESOURCE NAME X&#39;0005AB8C&#39;.X&#39;02&#39;. SQLCODE=-904, SQLSTATE=57011, DRIVER=4.31.10\r\n\tat com.ibm.db2.jcc.am.b7.a(b7.java:815)\r\n\tat com.ibm.db2.jcc.am.b7.a(b7.java:66)\r\n\tat com.ibm.db2.jcc.am.b7.a(b7.java:140)\r\n\tat com.ibm.db2.jcc.am.k_.b(k_.java:2491)\r\n\tat com.ibm.db2.jcc.am.k_.c(k_.java:2472)\r\n\tat com.ibm.db2.jcc.t4.ab.n(ab.java:917)\r\n\tat com.ibm.db2.jcc.t4.ab.a(ab.java:118)\r\n\tat com.ibm.db2.jcc.t4.p.a(p.java:50)\r\n\tat com.ibm.db2.jcc.t4.aw.b(aw.java:220)\r\n\tat com.ibm.db2.jcc.am.la.bm(la.java:3632)\r\n\tat com.ibm.db2.jcc.am.la.a(la.java:4677)\r\n\tat com.ibm.db2.jcc.am.la.b(la.java:4215)\r\n\tat com.ibm.db2.jcc.am.la.be(la.java:832)\r\n```\r\n\r\n\r\nIs that somthing because i tried to write into DB via multiple threads? What is the reason?","title":"com.ibm.db2.jcc.am.SqlException: UNSUCCESSFUL EXECUTION CAUSED BY AN UNAVAILABLE RESOURCE. REASON 00C90096","body":"<p>I want to insert multiple records in a multi-thread function into DB and after inserting a specific amount of records i become always the following exception:</p>\n<pre><code>Outermost stacktrace: com.ibm.db2.jcc.am.SqlException: UNSUCCESSFUL EXECUTION CAUSED BY AN UNAVAILABLE RESOURCE. REASON 00C90096, TYPE OF RESOURCE 00000304, AND RESOURCE NAME X'0005AB8C'.X'02'. SQLCODE=-904, SQLSTATE=57011, DRIVER=4.31.10\n    at com.ibm.db2.jcc.am.b7.a(b7.java:815)\n    at com.ibm.db2.jcc.am.b7.a(b7.java:66)\n    at com.ibm.db2.jcc.am.b7.a(b7.java:140)\n    at com.ibm.db2.jcc.am.k_.b(k_.java:2491)\n    at com.ibm.db2.jcc.am.k_.c(k_.java:2472)\n    at com.ibm.db2.jcc.t4.ab.n(ab.java:917)\n    at com.ibm.db2.jcc.t4.ab.a(ab.java:118)\n    at com.ibm.db2.jcc.t4.p.a(p.java:50)\n    at com.ibm.db2.jcc.t4.aw.b(aw.java:220)\n    at com.ibm.db2.jcc.am.la.bm(la.java:3632)\n    at com.ibm.db2.jcc.am.la.a(la.java:4677)\n    at com.ibm.db2.jcc.am.la.b(la.java:4215)\n    at com.ibm.db2.jcc.am.la.be(la.java:832)\n</code></pre>\n<p>Is that somthing because i tried to write into DB via multiple threads? What is the reason?</p>\n"},{"tags":["java","interpolation","argb"],"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1675118975,"post_id":75290730,"comment_id":132856636,"body_markdown":"this algorithm is basically multiplying the colors by 256, that is, the value is shifted 8 bits left - since using `int` the 4th byte is lost - you can use `long` in the calculation (mask and factors) to avoid that","body":"this algorithm is basically multiplying the colors by 256, that is, the value is shifted 8 bits left - since using <code>int</code> the 4th byte is lost - you can use <code>long</code> in the calculation (mask and factors) to avoid that"},{"owner":{"account_id":24724028,"reputation":1,"user_id":19482999,"display_name":"MJSD"},"score":0,"creation_date":1675132493,"post_id":75290730,"comment_id":132858717,"body_markdown":"Thank you @user16320675! That did the trick! I can&#39;t believe I didn&#39;t think of that... Guess I was just blinded by the binary arithmetic that I can&#39;t justify in my head. Unfortunately, I don&#39;t know how to credit you, as your answer is just a comment.","body":"Thank you @user16320675! That did the trick! I can&#39;t believe I didn&#39;t think of that... Guess I was just blinded by the binary arithmetic that I can&#39;t justify in my head. Unfortunately, I don&#39;t know how to credit you, as your answer is just a comment."}],"answers":[{"tags":[],"owner":{"account_id":24724028,"reputation":1,"user_id":19482999,"display_name":"MJSD"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675188965,"creation_date":1675132085,"answer_id":75292153,"question_id":75290730,"body_markdown":"&gt; &quot;...since using int the 4th byte is lost - you can use long in the calculation (mask and factors) to avoid that&quot; - user16320675\r\n\r\nThank you! I should have thought of that, but I guess that&#39;s what they all say.\r\nHere are the updated functions for 32bit integer ARGB color values:\r\n\r\n```\r\npublic static int mixColors(int a, int b){\r\n    long mask1 = 0x00ff00ffL;\r\n    long mask2 = 0xff00ff00L;\r\n\r\n    return (int)((((((a &amp; mask1) + (b &amp; mask1)) * 128) &gt;&gt; 8) &amp; mask1) \r\n               | (((((a &amp; mask2) + (b &amp; mask2)) * 128) &gt;&gt; 8) &amp; mask2));\r\n}\r\n\r\npublic static int mixColors(int a, int b, float fractionB){\r\n    long mask1 = 0x00ff00ffL;\r\n    long mask2 = 0xff00ff00L;\r\n\r\n    short f2 = (short)(256 * fractionB),\r\n          f1 = (short)(256 - f2);\r\n          \r\n    return (int)((((((a &amp; mask1) * f1) + ((b &amp; mask1) * f2)) &gt;&gt; 8) &amp; mask1) \r\n               | (((((a &amp; mask2) * f1) + ((b &amp; mask2) * f2)) &gt;&gt; 8) &amp; mask2));\r\n}\r\n```","title":"How to do ARGB color interpolation without separating components?","body":"<blockquote>\n<p>&quot;...since using int the 4th byte is lost - you can use long in the calculation (mask and factors) to avoid that&quot; - user16320675</p>\n</blockquote>\n<p>Thank you! I should have thought of that, but I guess that's what they all say.\nHere are the updated functions for 32bit integer ARGB color values:</p>\n<pre><code>public static int mixColors(int a, int b){\n    long mask1 = 0x00ff00ffL;\n    long mask2 = 0xff00ff00L;\n\n    return (int)((((((a &amp; mask1) + (b &amp; mask1)) * 128) &gt;&gt; 8) &amp; mask1) \n               | (((((a &amp; mask2) + (b &amp; mask2)) * 128) &gt;&gt; 8) &amp; mask2));\n}\n\npublic static int mixColors(int a, int b, float fractionB){\n    long mask1 = 0x00ff00ffL;\n    long mask2 = 0xff00ff00L;\n\n    short f2 = (short)(256 * fractionB),\n          f1 = (short)(256 - f2);\n          \n    return (int)((((((a &amp; mask1) * f1) + ((b &amp; mask1) * f2)) &gt;&gt; 8) &amp; mask1) \n               | (((((a &amp; mask2) * f1) + ((b &amp; mask2) * f2)) &gt;&gt; 8) &amp; mask2));\n}\n</code></pre>\n"}],"owner":{"account_id":24724028,"reputation":1,"user_id":19482999,"display_name":"MJSD"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75292153,"answer_count":1,"score":0,"last_activity_date":1675188965,"creation_date":1675116906,"question_id":75290730,"body_markdown":"After trying and failing to figure this out myself, I have scavenged some code which should combine two colors (integers) by a specified fraction from [another thread](https://stackoverflow.com/questions/2630925/whats-the-most-effective-way-to-interpolate-between-two-colors-pseudocode-and), but I am just simply not crafty enough to get it working with ARGB integers.\r\nDoes anyone know how to convert this function from combining RGB to combining ARGB?\r\n\r\n```\r\npublic static int mixColors(int a, int b, float fractionB){ \r\n   int mask1 = 0xff00ff; \r\n   int mask2 = 0x00ff00; \r\n    \r\n   int f2 = (int)(256 * fractionB);\r\n   int f1 = 256 - f2;\r\n   \r\n   return   ((((( a &amp; mask1 ) * f1 ) + ( ( b &amp; mask1 ) * f2 )) &gt;&gt;&gt; 8 ) &amp; mask1 ) \r\n          | ((((( a &amp; mask2 ) * f1 ) + ( ( b &amp; mask2 ) * f2 )) &gt;&gt;&gt; 8 ) &amp; mask2 );\r\n}\r\n```\r\n\r\nI have tried setting the masks to `mask1 = 0x00ff00ff; mask2 = 0xff00ff00;` but the function still only outputs a 3 byte number.","title":"How to do ARGB color interpolation without separating components?","body":"<p>After trying and failing to figure this out myself, I have scavenged some code which should combine two colors (integers) by a specified fraction from <a href=\"https://stackoverflow.com/questions/2630925/whats-the-most-effective-way-to-interpolate-between-two-colors-pseudocode-and\">another thread</a>, but I am just simply not crafty enough to get it working with ARGB integers.\nDoes anyone know how to convert this function from combining RGB to combining ARGB?</p>\n<pre><code>public static int mixColors(int a, int b, float fractionB){ \n   int mask1 = 0xff00ff; \n   int mask2 = 0x00ff00; \n    \n   int f2 = (int)(256 * fractionB);\n   int f1 = 256 - f2;\n   \n   return   ((((( a &amp; mask1 ) * f1 ) + ( ( b &amp; mask1 ) * f2 )) &gt;&gt;&gt; 8 ) &amp; mask1 ) \n          | ((((( a &amp; mask2 ) * f1 ) + ( ( b &amp; mask2 ) * f2 )) &gt;&gt;&gt; 8 ) &amp; mask2 );\n}\n</code></pre>\n<p>I have tried setting the masks to <code>mask1 = 0x00ff00ff; mask2 = 0xff00ff00;</code> but the function still only outputs a 3 byte number.</p>\n"},{"tags":["java","jackson","jackson-databind","apache-johnzon"],"owner":{"account_id":13342410,"reputation":33,"user_id":9630238,"display_name":"Francesco Rosso"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1675188567,"creation_date":1675186631,"question_id":75300987,"body_markdown":"In Apache Johnzon, is there a way to hava a generic field that contains dynamic JSON data, not mappable to a pre-defined POJO?\r\nIn Jackson you can simply use ObjectNode as a generic container, have some JSON processing on it, and then write the whole object in JSON format.\r\n\r\nIn Jackson it works as expected using ObjectNode, here is my code:\r\n```\r\npublic class JsonTest {\r\n  private String myStaticKey = &quot;foo&quot;;\r\n  private ObjectNode jsonData;\r\n\r\n  //code to initialize ObjectNode + getters + setters\r\n\r\n  @JsonIgnore\r\n  public void addValue(String key, String value) {\r\n    jsonData.put(key, value);\r\n  }\r\n\r\n  @JsonIgnore\r\n  public String toJson() {\r\n    return new ObjectMapper().writeValueAsString(this);\r\n  }\r\n}\r\n\r\n```\r\n\r\n```\r\npublic class MainTest {\r\n  public static void main(String[] args) {\r\n    JsonTest t = new JsonTest();\r\n    t.addValue(&quot;myDynamicKey&quot;, &quot;bar&quot;);\r\n    System.out.println(t.toJson());\r\n  }\r\n}\r\n```\r\n\r\nExpected result:\r\n```\r\n{\r\n  &quot;myStaticKey&quot;: &quot;foo&quot;,\r\n  &quot;jsonData&quot;: {\r\n    &quot;myDynamicKey&quot;: &quot;bar&quot;\r\n  }\r\n}\r\n```\r\n","title":"Johnzon sub dynamic json tree mapping","body":"<p>In Apache Johnzon, is there a way to hava a generic field that contains dynamic JSON data, not mappable to a pre-defined POJO?\nIn Jackson you can simply use ObjectNode as a generic container, have some JSON processing on it, and then write the whole object in JSON format.</p>\n<p>In Jackson it works as expected using ObjectNode, here is my code:</p>\n<pre><code>public class JsonTest {\n  private String myStaticKey = &quot;foo&quot;;\n  private ObjectNode jsonData;\n\n  //code to initialize ObjectNode + getters + setters\n\n  @JsonIgnore\n  public void addValue(String key, String value) {\n    jsonData.put(key, value);\n  }\n\n  @JsonIgnore\n  public String toJson() {\n    return new ObjectMapper().writeValueAsString(this);\n  }\n}\n\n</code></pre>\n<pre><code>public class MainTest {\n  public static void main(String[] args) {\n    JsonTest t = new JsonTest();\n    t.addValue(&quot;myDynamicKey&quot;, &quot;bar&quot;);\n    System.out.println(t.toJson());\n  }\n}\n</code></pre>\n<p>Expected result:</p>\n<pre><code>{\n  &quot;myStaticKey&quot;: &quot;foo&quot;,\n  &quot;jsonData&quot;: {\n    &quot;myDynamicKey&quot;: &quot;bar&quot;\n  }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","dependency-injection","constructor-injection"],"comments":[{"owner":{"account_id":6586022,"reputation":76,"user_id":5088766,"display_name":"mcarn"},"score":0,"creation_date":1675189304,"post_id":75301373,"comment_id":132873814,"body_markdown":"Why don&#39;t you inject `JwtUtils` to `AuthTokenFilter`? creating a new instance breaks the purpose of having `@Component` in it.","body":"Why don&#39;t you inject <code>JwtUtils</code> to <code>AuthTokenFilter</code>? creating a new instance breaks the purpose of having <code>@Component</code> in it."},{"owner":{"account_id":8698932,"reputation":322,"user_id":6509481,"accept_rate":50,"display_name":"Marco"},"score":1,"creation_date":1675239785,"post_id":75301373,"comment_id":132883420,"body_markdown":"so you&#39;re telling me to autowire JwtUtils inside WebTokenConfig class and injecting the autowried field to AuthTokenFilter. Ok, it makes sense. Also, since I&#39;m creating a new bean for AuthTokenFilter, it is ok to do a new for it cause it&#39;s a new bean, but for its dependencies probably makes sense to inject the autowired field instead of doing a new, cause it is already a bean in the context. Makes totally sense :) Sorry, still learning spring&#39;s mechanisms ^^","body":"so you&#39;re telling me to autowire JwtUtils inside WebTokenConfig class and injecting the autowried field to AuthTokenFilter. Ok, it makes sense. Also, since I&#39;m creating a new bean for AuthTokenFilter, it is ok to do a new for it cause it&#39;s a new bean, but for its dependencies probably makes sense to inject the autowired field instead of doing a new, cause it is already a bean in the context. Makes totally sense :) Sorry, still learning spring&#39;s mechanisms ^^"}],"owner":{"account_id":8698932,"reputation":322,"user_id":6509481,"accept_rate":50,"display_name":"Marco"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675188530,"creation_date":1675188530,"question_id":75301373,"body_markdown":"I have my JWT utils class:\r\n\r\n    @Component\r\n    public class JwtUtils {\r\n        private final String jwtSecret;\r\n        private final int jwtExpirationMs;\r\n    \r\n        public JwtUtils(@Value(&quot;${app.jwtSecret}&quot;) String jwtSecret, @Value(&quot;${app.jwtExpirationMs}&quot;) String jwtExpirationMs)){\r\n    this.jwtSecret = jwtSecret;\r\n    this.jwtExpirationMs = jwtExpirationMs;\r\n        }\r\n    ...\r\n    }\r\n\r\nand inside my WebTokenConfig I need to initialize it for my AuthTokenFilter:\r\n\r\n    @Bean\r\n        public AuthTokenFilter authenticationJwtTokenFilter() {\r\n            return new AuthTokenFilter(new JwtUtils(..., ...), ...);\r\n        }\r\n\r\nSo basically, JwtUtils needs 2 parameters, but those parameters should be set from properties&#39; context. How to handle the constructor&#39;s injection? \r\n\r\nPlus, I&#39;m trying to test JwtUtils class with a junit test with mockito. \r\nUsing @Autowired on fields (and not on constructor) and then instantiating the bean with new JwtUtils(), those parameters are not being init&#39;d, staying null and 0 (even with @TestPropertySource, System.setProperties, ...). That&#39;s why I&#39;m trying with constructor injection (which as I read is always the best option). This way I just have to pass the parameters through the new JwtUtils() and that&#39;s it. \r\n\r\nBut when done inside other beans (no test), it just makes no sense to me to pass them since they should be retrieved from context and not be passed. \r\nI&#39;m probably missing something. ","title":"How to manage Spring @Value parameters&#39; constuctor injection when explicitly instantiating a new bean?","body":"<p>I have my JWT utils class:</p>\n<pre><code>@Component\npublic class JwtUtils {\n    private final String jwtSecret;\n    private final int jwtExpirationMs;\n\n    public JwtUtils(@Value(&quot;${app.jwtSecret}&quot;) String jwtSecret, @Value(&quot;${app.jwtExpirationMs}&quot;) String jwtExpirationMs)){\nthis.jwtSecret = jwtSecret;\nthis.jwtExpirationMs = jwtExpirationMs;\n    }\n...\n}\n</code></pre>\n<p>and inside my WebTokenConfig I need to initialize it for my AuthTokenFilter:</p>\n<pre><code>@Bean\n    public AuthTokenFilter authenticationJwtTokenFilter() {\n        return new AuthTokenFilter(new JwtUtils(..., ...), ...);\n    }\n</code></pre>\n<p>So basically, JwtUtils needs 2 parameters, but those parameters should be set from properties' context. How to handle the constructor's injection?</p>\n<p>Plus, I'm trying to test JwtUtils class with a junit test with mockito.\nUsing @Autowired on fields (and not on constructor) and then instantiating the bean with new JwtUtils(), those parameters are not being init'd, staying null and 0 (even with @TestPropertySource, System.setProperties, ...). That's why I'm trying with constructor injection (which as I read is always the best option). This way I just have to pass the parameters through the new JwtUtils() and that's it.</p>\n<p>But when done inside other beans (no test), it just makes no sense to me to pass them since they should be retrieved from context and not be passed.\nI'm probably missing something.</p>\n"},{"tags":["java","if-statement","coding-style"],"comments":[{"owner":{"account_id":82474,"reputation":11438,"user_id":694469,"accept_rate":77,"display_name":"KajMagnus"},"score":1,"creation_date":1440485535,"post_id":4887212,"comment_id":52279350,"body_markdown":"With _&quot;I cannot view all code of a method in one screen&quot;_, did you mean that they&#39;ve if-elsed so much so the code has become indented so much so that it gets outside the right edge of the screen? Or that if-else takes a bit more space so the method is longer (taller) than what it needs to be? B.t.w. I like guard clauses.","body":"With <i>&quot;I cannot view all code of a method in one screen&quot;</i>, did you mean that they&#39;ve if-elsed so much so the code has become indented so much so that it gets outside the right edge of the screen? Or that if-else takes a bit more space so the method is longer (taller) than what it needs to be? B.t.w. I like guard clauses."},{"owner":{"account_id":128896,"reputation":11693,"user_id":327074,"accept_rate":86,"display_name":"icc97"},"score":0,"creation_date":1441269544,"post_id":4887212,"comment_id":52613134,"body_markdown":"*&quot;even if there is only one comment line in the else block&quot;* - one source for this comes from the book Code Complete. It sounds like they are being too dogmatic about applying it though.","body":"<i>&quot;even if there is only one comment line in the else block&quot;</i> - one source for this comes from the book Code Complete. It sounds like they are being too dogmatic about applying it though."}],"answers":[{"tags":[],"owner":{"account_id":286249,"reputation":43941,"user_id":585411,"accept_rate":60,"display_name":"btilly"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1469676293,"creation_date":1296742813,"answer_id":4887272,"question_id":4887212,"body_markdown":"Have them read http://www.cis.temple.edu/~ingargio/cis71/software/roberts/documents/loopexit.txt and see if it will change their minds.  (There is history to their idea, but I side with you.)\r\n\r\n*Edit:* Here are the critical points from the article.  The principle of single exits from control structures was adopted on principle, not observational data. But observational data says that allowing multiple ways of exiting control structures makes certain problems easier to solve accurately, and does not hurt readability. Disallowing it makes code harder and more likely to be buggy. This holds across a wide variety of programmers, from students to textbook writers. Therefore we should allow and use multiple exits where appropriate.","title":"Shall I use guard clause, and try to avoid else clause?","body":"<p>Have them read <a href=\"http://www.cis.temple.edu/~ingargio/cis71/software/roberts/documents/loopexit.txt\" rel=\"nofollow\">http://www.cis.temple.edu/~ingargio/cis71/software/roberts/documents/loopexit.txt</a> and see if it will change their minds.  (There is history to their idea, but I side with you.)</p>\n\n<p><em>Edit:</em> Here are the critical points from the article.  The principle of single exits from control structures was adopted on principle, not observational data. But observational data says that allowing multiple ways of exiting control structures makes certain problems easier to solve accurately, and does not hurt readability. Disallowing it makes code harder and more likely to be buggy. This holds across a wide variety of programmers, from students to textbook writers. Therefore we should allow and use multiple exits where appropriate.</p>\n"},{"tags":[],"owner":{"account_id":14956,"reputation":30472,"user_id":31141,"accept_rate":79,"display_name":"Marko"},"down_vote_count":0,"up_vote_count":50,"is_accepted":true,"score":50,"last_activity_date":1314693415,"creation_date":1296742851,"answer_id":4887280,"question_id":4887212,"body_markdown":"This is arguable and pure aesthetic question.\r\n\r\nEarly return has been historically avoided in C and similar languages since it was possible to miss resource cleanup which is usually placed at the end of the function in case of early return.\r\n\r\nGiven that Java have exceptions and try, catch, finally, there&#39;s no need to fear early returns.\r\n\r\nPersonaly, I agree with you, since I do early return often - that usually means less code and simpler code flow with less if/else nesting.","title":"Shall I use guard clause, and try to avoid else clause?","body":"<p>This is arguable and pure aesthetic question.</p>\n\n<p>Early return has been historically avoided in C and similar languages since it was possible to miss resource cleanup which is usually placed at the end of the function in case of early return.</p>\n\n<p>Given that Java have exceptions and try, catch, finally, there's no need to fear early returns.</p>\n\n<p>Personaly, I agree with you, since I do early return often - that usually means less code and simpler code flow with less if/else nesting.</p>\n"},{"tags":[],"owner":{"account_id":6664,"reputation":85927,"user_id":11296,"display_name":"Bert F"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1296744544,"creation_date":1296744544,"answer_id":4887611,"question_id":4887212,"body_markdown":"I&#39;m in the multiple-return/return-early camp and I would lobby to convince other engineers of this. You can have great arguments and cite great sources, but in the end, all you can do is make your pitch, suggest compromises, come to a decision, and then work as a team, which ever way it works out. (Although revisiting of the topic from time to time isn&#39;t out of the question either.)\r\n\r\nThis really just comes down to style and, in the grand scheme of things, a relatively minor one.  Overall, you&#39;re a more effective developer if you can adapt to either style.  If this really &quot;makes it difficult ... to follow their coding style&quot;, then I suggest you work on it, because in the end, you&#39;ll end up the better engineer.\r\n\r\nI had an engineer once come to me and insist he be given dispensation to follow his own coding style (and we had a pretty minimal set of guidelines).  He said the established coding style hurt his eyes and made it difficult for him to concentrate (I think he may have even said &quot;nauseous&quot;.)  I told him that if he was going to work on a lot of people&#39;s code, not just code he wrote, and vice versa. If he couldn&#39;t adapt to work with the agreed upon style, I couldn&#39;t use him and that maybe this type of collaborative project wasn&#39;t the right place for him.  Coincidentally, it was less of an issue after that (although every code review was still a battle).","title":"Shall I use guard clause, and try to avoid else clause?","body":"<p>I'm in the multiple-return/return-early camp and I would lobby to convince other engineers of this. You can have great arguments and cite great sources, but in the end, all you can do is make your pitch, suggest compromises, come to a decision, and then work as a team, which ever way it works out. (Although revisiting of the topic from time to time isn't out of the question either.)</p>\n\n<p>This really just comes down to style and, in the grand scheme of things, a relatively minor one.  Overall, you're a more effective developer if you can adapt to either style.  If this really \"makes it difficult ... to follow their coding style\", then I suggest you work on it, because in the end, you'll end up the better engineer.</p>\n\n<p>I had an engineer once come to me and insist he be given dispensation to follow his own coding style (and we had a pretty minimal set of guidelines).  He said the established coding style hurt his eyes and made it difficult for him to concentrate (I think he may have even said \"nauseous\".)  I told him that if he was going to work on a lot of people's code, not just code he wrote, and vice versa. If he couldn't adapt to work with the agreed upon style, I couldn't use him and that maybe this type of collaborative project wasn't the right place for him.  Coincidentally, it was less of an issue after that (although every code review was still a battle).</p>\n"},{"tags":[],"owner":{"account_id":2634317,"reputation":10972,"user_id":2279448,"display_name":"Zoran Horvat"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1436953638,"creation_date":1436953638,"answer_id":31426956,"question_id":4887212,"body_markdown":"Guard clause is a good idea because it clearly indicates that current method is not interested in certain cases. When you clear up at the very beginning of the method that it doesn&#39;t deal with some cases (e.g. when some value is less than zero), then the rest of the method is pure implementation of its responsibility.\r\n\r\nThere is one stronger case of guard clauses - statements that validate input and throw exceptions when some argument is unacceptable, e.g. null. In that case you don&#39;t want to proceed with execution but wish to throw at the very beginning of the method. That is where guard clauses are the best solution because you don&#39;t want to mix exception throwing logic with the core of the method you&#39;re implementing.\r\n\r\nWhen talking about guard clauses that throw exceptions, here is one article about how you can simplify them in C# using extension methods: [How to Reduce Cyclomatic Complexity: Guard Clause][1]. Though that method is not available in Java, it is useful in C#.\r\n\r\n\r\n  [1]: http://www.codinghelmet.com/?path=howto/reduce-cyclomatic-complexity-guard-clause","title":"Shall I use guard clause, and try to avoid else clause?","body":"<p>Guard clause is a good idea because it clearly indicates that current method is not interested in certain cases. When you clear up at the very beginning of the method that it doesn't deal with some cases (e.g. when some value is less than zero), then the rest of the method is pure implementation of its responsibility.</p>\n\n<p>There is one stronger case of guard clauses - statements that validate input and throw exceptions when some argument is unacceptable, e.g. null. In that case you don't want to proceed with execution but wish to throw at the very beginning of the method. That is where guard clauses are the best solution because you don't want to mix exception throwing logic with the core of the method you're implementing.</p>\n\n<p>When talking about guard clauses that throw exceptions, here is one article about how you can simplify them in C# using extension methods: <a href=\"http://www.codinghelmet.com/?path=howto/reduce-cyclomatic-complexity-guard-clause\" rel=\"noreferrer\">How to Reduce Cyclomatic Complexity: Guard Clause</a>. Though that method is not available in Java, it is useful in C#.</p>\n"},{"tags":[],"owner":{"account_id":20632722,"reputation":11,"user_id":15147200,"display_name":"Corey B."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675188414,"creation_date":1675188414,"answer_id":75301355,"question_id":4887212,"body_markdown":"My issue with guard clauses is that 1) they can be easily dispersed through code and be easy to miss (this has happened to me on multiple occasions) and 2) I have to remember which code has been &quot;ejected&quot; as I trace code blocks which can become complex and 3) by setting code within if/else you have a contained set of code that you know executes for a given set of criteria. With guard conditions, the criteria is EVERYTHING minus what the guard has ejected. It is much more difficult for me to get my head around that.","title":"Shall I use guard clause, and try to avoid else clause?","body":"<p>My issue with guard clauses is that 1) they can be easily dispersed through code and be easy to miss (this has happened to me on multiple occasions) and 2) I have to remember which code has been &quot;ejected&quot; as I trace code blocks which can become complex and 3) by setting code within if/else you have a contained set of code that you know executes for a given set of criteria. With guard conditions, the criteria is EVERYTHING minus what the guard has ejected. It is much more difficult for me to get my head around that.</p>\n"}],"owner":{"account_id":260039,"reputation":6377,"user_id":543362,"accept_rate":82,"display_name":"chance"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20523,"favorite_count":0,"down_vote_count":0,"up_vote_count":32,"accepted_answer_id":4887280,"answer_count":5,"score":32,"last_activity_date":1675188414,"creation_date":1296742531,"question_id":4887212,"body_markdown":"I&#39;ve read (e.g. from Martin Fowler) that we should use guard clause instead of single return in a (short) method in OOP. I&#39;ve also read (from somewhere I don&#39;t remember) that else clause should be avoided when possible.\r\n\r\nBut my colleagues (I work in a small team with only 3 guys)  force me not to use multiple returns in a method, and to use else clause as much as possible, even if there is only one comment line in the else block.\r\n\r\nThis makes it difficult for me to follow their coding style, because for example, I cannot view all code of a method in one screen. And when I code, I have to write guard clause first, and then try to convert it into the form with out multiple returns.\r\n\r\nAm I wrong or what should I do with it?\r\n","title":"Shall I use guard clause, and try to avoid else clause?","body":"<p>I've read (e.g. from Martin Fowler) that we should use guard clause instead of single return in a (short) method in OOP. I've also read (from somewhere I don't remember) that else clause should be avoided when possible.</p>\n\n<p>But my colleagues (I work in a small team with only 3 guys)  force me not to use multiple returns in a method, and to use else clause as much as possible, even if there is only one comment line in the else block.</p>\n\n<p>This makes it difficult for me to follow their coding style, because for example, I cannot view all code of a method in one screen. And when I code, I have to write guard clause first, and then try to convert it into the form with out multiple returns.</p>\n\n<p>Am I wrong or what should I do with it?</p>\n"},{"tags":["java","android","android-studio","kotlin"],"comments":[{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":1,"creation_date":1675177907,"post_id":75299152,"comment_id":132869949,"body_markdown":"You might be happier switching to the Project view via the selector above the tree. Right now, it looks like you are on the Android view.","body":"You might be happier switching to the Project view via the selector above the tree. Right now, it looks like you are on the Android view."}],"answers":[{"tags":[],"owner":{"account_id":19896142,"reputation":167,"user_id":14577209,"display_name":"Maleesha97"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675187274,"creation_date":1675187274,"answer_id":75301121,"question_id":75299152,"body_markdown":"If you are not happy with switching the project view,\r\n\r\nYou can right click on the directory that you need to hide and select, \r\n\r\n`Mark Directory as -&gt; excluded`\r\n\r\nif you want to include a directory back, find the path of your excluded directory and,\r\n\r\n`right click -&gt; Mark Directory as -&gt; Cancel Exclusion`\r\n","title":"How to hide generated folders in android studio","body":"<p>If you are not happy with switching the project view,</p>\n<p>You can right click on the directory that you need to hide and select,</p>\n<p><code>Mark Directory as -&gt; excluded</code></p>\n<p>if you want to include a directory back, find the path of your excluded directory and,</p>\n<p><code>right click -&gt; Mark Directory as -&gt; Cancel Exclusion</code></p>\n"},{"tags":[],"owner":{"account_id":24120944,"reputation":21,"user_id":18090127,"display_name":"Khubaib Khan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1675187617,"creation_date":1675187617,"answer_id":75301180,"question_id":75299152,"body_markdown":"**To hide generated folders in Android Studio:**\r\n\r\nGo to **&quot;File&quot; &gt; &quot;Settings&quot;**.\r\nNavigate to **&quot;Editor&quot; &gt; &quot;File Types&quot;**.\r\nScroll down to **&quot;Ignore files and folders&quot;**.\r\nAdd the folders you want to hide, such as **&quot;build&quot;, &quot;gen&quot;,** and **&quot;out&quot;**.\r\nClick **&quot;Apply&quot;** and **&quot;OK&quot;.**","title":"How to hide generated folders in android studio","body":"<p><strong>To hide generated folders in Android Studio:</strong></p>\n<p>Go to <strong>&quot;File&quot; &gt; &quot;Settings&quot;</strong>.\nNavigate to <strong>&quot;Editor&quot; &gt; &quot;File Types&quot;</strong>.\nScroll down to <strong>&quot;Ignore files and folders&quot;</strong>.\nAdd the folders you want to hide, such as <strong>&quot;build&quot;, &quot;gen&quot;,</strong> and <strong>&quot;out&quot;</strong>.\nClick <strong>&quot;Apply&quot;</strong> and <strong>&quot;OK&quot;.</strong></p>\n"}],"owner":{"account_id":7862760,"reputation":4624,"user_id":5942579,"accept_rate":74,"display_name":"Emmanuel Mtali"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1029,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":2,"score":6,"last_activity_date":1675187617,"creation_date":1675177751,"question_id":75299152,"body_markdown":"I am working on an android project but I see some of the auto-generated code from my file tree as you can see in the picture\r\n\r\nHow can I hide them (the ones with green color)\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QHTIP.png","title":"How to hide generated folders in android studio","body":"<p>I am working on an android project but I see some of the auto-generated code from my file tree as you can see in the picture</p>\n<p>How can I hide them (the ones with green color)</p>\n<p><a href=\"https://i.stack.imgur.com/QHTIP.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/QHTIP.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","mongodb"],"comments":[{"owner":{"account_id":3631143,"reputation":55363,"user_id":3027266,"accept_rate":75,"display_name":"Wernfried Domscheit"},"score":0,"creation_date":1675236274,"post_id":75301172,"comment_id":132882514,"body_markdown":"I think there is not much you can do, the actual query will also take much time.","body":"I think there is not much you can do, the actual query will also take much time."}],"owner":{"account_id":15979059,"reputation":1072,"user_id":11531156,"display_name":"RCT"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675187574,"creation_date":1675187574,"question_id":75301172,"body_markdown":"Using the latest java sync SDK, I would like to log operation execution details only for operations taking longer than expected time. For example, I have a find operation for which I would like to collect execution details when the operation takes longer than 10 ms.\r\n\r\n```Document doc = collection.find(query).explain();```","title":"How to selectively log execution details of MongoDB operations?","body":"<p>Using the latest java sync SDK, I would like to log operation execution details only for operations taking longer than expected time. For example, I have a find operation for which I would like to collect execution details when the operation takes longer than 10 ms.</p>\n<p><code>Document doc = collection.find(query).explain();</code></p>\n"},{"tags":["java","jgit"],"answers":[{"tags":[],"owner":{"account_id":4225459,"reputation":352,"user_id":3459089,"accept_rate":62,"display_name":"Augier"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1395743694,"creation_date":1395743694,"answer_id":22631875,"question_id":22631261,"body_markdown":"Ok, never mind, after hours searching for the answer, I find it right before asking it there...\r\n\r\nSo, the answer is in the [CookBook][1] :\r\n\r\n    Collection&lt;Ref&gt; refs = Git.lsRemoteRepository()\r\n                .setHeads(true)\r\n                .setTags(true)\r\n                .setRemote(REMOTE_URL)\r\n                .call();\r\n\r\n\r\n  [1]: https://github.com/centic9/jgit-cookbook/blob/master/src/main/java/org/dstadler/jgit/porcelain/ListRemoteRepository.java","title":"List branches of a git remote repo without cloning it","body":"<p>Ok, never mind, after hours searching for the answer, I find it right before asking it there...</p>\n\n<p>So, the answer is in the <a href=\"https://github.com/centic9/jgit-cookbook/blob/master/src/main/java/org/dstadler/jgit/porcelain/ListRemoteRepository.java\" rel=\"noreferrer\">CookBook</a> :</p>\n\n<pre><code>Collection&lt;Ref&gt; refs = Git.lsRemoteRepository()\n            .setHeads(true)\n            .setTags(true)\n            .setRemote(REMOTE_URL)\n            .call();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":549364,"reputation":20582,"user_id":2986905,"accept_rate":78,"display_name":"R&#252;diger Herrmann"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1675187306,"creation_date":1395744066,"answer_id":22632027,"question_id":22631261,"body_markdown":"There is the `LsRemoteCommand` to list the branches of a remote repository. To obtain the command, use either\r\n\r\n    Git.wrap(repo).lsRemote()\r\nor\r\n\r\n    Git.lsRemoteRepository()\r\nThe statically created `LsRemoteCommand` has its limitations. For certain transport protocols, a local repository is necessary to obtain configuration settings. Therefore I usually create an empty temporary local repository with `Git.init()` and then use the first approach.\r\n\r\nIf you want to avoid creating the extra repository, you can test with `Transport.open()` if it succeeds without a repository. It throws a `NotSupportedException` otherwise.","title":"List branches of a git remote repo without cloning it","body":"<p>There is the <code>LsRemoteCommand</code> to list the branches of a remote repository. To obtain the command, use either</p>\n<pre><code>Git.wrap(repo).lsRemote()\n</code></pre>\n<p>or</p>\n<pre><code>Git.lsRemoteRepository()\n</code></pre>\n<p>The statically created <code>LsRemoteCommand</code> has its limitations. For certain transport protocols, a local repository is necessary to obtain configuration settings. Therefore I usually create an empty temporary local repository with <code>Git.init()</code> and then use the first approach.</p>\n<p>If you want to avoid creating the extra repository, you can test with <code>Transport.open()</code> if it succeeds without a repository. It throws a <code>NotSupportedException</code> otherwise.</p>\n"}],"owner":{"account_id":4225459,"reputation":352,"user_id":3459089,"accept_rate":62,"display_name":"Augier"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3245,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":22632027,"answer_count":2,"score":8,"last_activity_date":1675187306,"creation_date":1395742102,"question_id":22631261,"body_markdown":"I was wondering hows it would be possible to list all the branches of a remote Git repo with jgit but without cloning it.\r\n\r\nWhile going through the jgit&#39;s javadoc, I found the [ListBranchCommand][1] but that only seem to work with an already opened Repository object. But I was not able to find how to create a Repository object over HTTP without cloning it in local.\r\n\r\nIs it possible ?\r\nThanks\r\n\r\n  [1]: http://download.eclipse.org/jgit/docs/latest/apidocs/org/eclipse/jgit/api/ListBranchCommand.html","title":"List branches of a git remote repo without cloning it","body":"<p>I was wondering hows it would be possible to list all the branches of a remote Git repo with jgit but without cloning it.</p>\n\n<p>While going through the jgit's javadoc, I found the <a href=\"http://download.eclipse.org/jgit/docs/latest/apidocs/org/eclipse/jgit/api/ListBranchCommand.html\">ListBranchCommand</a> but that only seem to work with an already opened Repository object. But I was not able to find how to create a Repository object over HTTP without cloning it in local.</p>\n\n<p>Is it possible ?\nThanks</p>\n"},{"tags":["java","spring-ws"],"answers":[{"tags":[],"owner":{"account_id":16022447,"reputation":108,"user_id":11563594,"display_name":"M.Shahzad"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1675187025,"creation_date":1675187025,"answer_id":75301064,"question_id":75300983,"body_markdown":"Spring WS supports Java 8 and above, so it should work with Java 17. You can build a SOAP service project using Spring WS in Java 17.","title":"Spring WS(SOAP) in Java 17","body":"<p>Spring WS supports Java 8 and above, so it should work with Java 17. You can build a SOAP service project using Spring WS in Java 17.</p>\n"}],"owner":{"account_id":16543239,"reputation":1,"user_id":11953459,"display_name":"Ali Baizhanov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":289,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1675187025,"creation_date":1675186616,"question_id":75300983,"body_markdown":"Can I use Spring WS module in Java 17 or Spring WS does not support Java 17 yet? \r\n\r\nI need realize how can I build project SOAP service use Spring WS in Java 17","title":"Spring WS(SOAP) in Java 17","body":"<p>Can I use Spring WS module in Java 17 or Spring WS does not support Java 17 yet?</p>\n<p>I need realize how can I build project SOAP service use Spring WS in Java 17</p>\n"},{"tags":["java","spring","spring-boot","datasource","jdbctemplate"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":1,"creation_date":1497956232,"post_id":44651076,"comment_id":76287136,"body_markdown":"Can you check if the configuration is used?","body":"Can you check if the configuration is used?"},{"owner":{"account_id":6335906,"reputation":855,"user_id":4919308,"accept_rate":49,"display_name":"mahendra kawde"},"score":0,"creation_date":1497956340,"post_id":44651076,"comment_id":76287224,"body_markdown":"@Jens How can I do so?","body":"@Jens How can I do so?"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1497956373,"post_id":44651076,"comment_id":76287247,"body_markdown":"Add a breakpoint  and run the code in a Debugger or add some logging statements","body":"Add a breakpoint  and run the code in a Debugger or add some logging statements"},{"owner":{"account_id":6335906,"reputation":855,"user_id":4919308,"accept_rate":49,"display_name":"mahendra kawde"},"score":0,"creation_date":1497956416,"post_id":44651076,"comment_id":76287280,"body_markdown":"Is configuration I provided is correct?","body":"Is configuration I provided is correct?"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1497956433,"post_id":44651076,"comment_id":76287298,"body_markdown":"Looks ok for me","body":"Looks ok for me"},{"owner":{"account_id":6335906,"reputation":855,"user_id":4919308,"accept_rate":49,"display_name":"mahendra kawde"},"score":0,"creation_date":1497956451,"post_id":44651076,"comment_id":76287311,"body_markdown":"I am getting this error then No qualifying bean of type &#39;org.springframework.jdbc.core.JdbcTemplate&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true), @org.springframework.beans.factory.annotation.Qualifier(value=msMysqlJdbcTemplate)}","body":"I am getting this error then No qualifying bean of type &#39;org.springframework.jdbc.core.JdbcTemplate&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(req&zwnj;&#8203;uired=true), @org.springframework.beans.factory.annotation.Qualifier(valu&zwnj;&#8203;e=msMysqlJdbcTemplat&zwnj;&#8203;e)}"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1497956504,"post_id":44651076,"comment_id":76287352,"body_markdown":"Yes i see. But you get it also if the configuration is never readed, because of wrong anotation scan path","body":"Yes i see. But you get it also if the configuration is never readed, because of wrong anotation scan path"},{"owner":{"account_id":6335906,"reputation":855,"user_id":4919308,"accept_rate":49,"display_name":"mahendra kawde"},"score":0,"creation_date":1497956602,"post_id":44651076,"comment_id":76287430,"body_markdown":"In that case let me add my application.properties file code and boot file code","body":"In that case let me add my application.properties file code and boot file code"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1497956643,"post_id":44651076,"comment_id":76287460,"body_markdown":"Why you not simply use a Debugger?","body":"Why you not simply use a Debugger?"},{"owner":{"account_id":6335906,"reputation":855,"user_id":4919308,"accept_rate":49,"display_name":"mahendra kawde"},"score":0,"creation_date":1497956992,"post_id":44651076,"comment_id":76287697,"body_markdown":"I just debug the code and found that it is giving the same error and not even logging or reading any configuration.","body":"I just debug the code and found that it is giving the same error and not even logging or reading any configuration."},{"owner":{"account_id":124772,"reputation":10425,"user_id":320087,"accept_rate":90,"display_name":"Niraj Sonawane"},"score":0,"creation_date":1497957043,"post_id":44651076,"comment_id":76287741,"body_markdown":"where you have imported configuration class MultipleDBConfig  ? also have you added","body":"where you have imported configuration class MultipleDBConfig  ? also have you added"},{"owner":{"account_id":6335906,"reputation":855,"user_id":4919308,"accept_rate":49,"display_name":"mahendra kawde"},"score":0,"creation_date":1497957143,"post_id":44651076,"comment_id":76287821,"body_markdown":"Its in the separate package from main class annotated with @Configuration","body":"Its in the separate package from main class annotated with @Configuration"},{"owner":{"account_id":2030,"reputation":50607,"user_id":2788,"accept_rate":69,"display_name":"Strelok"},"score":0,"creation_date":1497957484,"post_id":44651076,"comment_id":76288088,"body_markdown":"Is the package with the configuration class nested below the package that contains the `@SpringBootApplication` annotated class?","body":"Is the package with the configuration class nested below the package that contains the <code>@SpringBootApplication</code> annotated class?"},{"owner":{"account_id":6335906,"reputation":855,"user_id":4919308,"accept_rate":49,"display_name":"mahendra kawde"},"score":0,"creation_date":1497957546,"post_id":44651076,"comment_id":76288129,"body_markdown":"Yes. its like, com.example contains spring boot class and below that com.example.config contains configuration class","body":"Yes. its like, com.example contains spring boot class and below that com.example.config contains configuration class"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1497957808,"post_id":44651076,"comment_id":76288333,"body_markdown":"@mahendrakawde Can you please add the package declaration to your classes?","body":"@mahendrakawde Can you please add the package declaration to your classes?"},{"owner":{"account_id":6335906,"reputation":855,"user_id":4919308,"accept_rate":49,"display_name":"mahendra kawde"},"score":0,"creation_date":1497958137,"post_id":44651076,"comment_id":76288583,"body_markdown":"I just edited question with package declaration added in it.","body":"I just edited question with package declaration added in it."},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1497958571,"post_id":44651076,"comment_id":76288925,"body_markdown":"@mahendrakawde in a comment you wrot *com.example.config contains configuration class*  in the question the package is *com.example*? Also have you tried to clean and rebuild your Project?","body":"@mahendrakawde in a comment you wrot <i>com.example.config contains configuration class</i>  in the question the package is <i>com.example</i>? Also have you tried to clean and rebuild your Project?"},{"owner":{"account_id":6335906,"reputation":855,"user_id":4919308,"accept_rate":49,"display_name":"mahendra kawde"},"score":0,"creation_date":1497960210,"post_id":44651076,"comment_id":76290192,"body_markdown":"Now I just move config class into com.example package where @springBootApplication class is reside. So errors now resolved. But my service class is not getting called explicitly. I dont have any controller in my app. How I can call my service class method.","body":"Now I just move config class into com.example package where @springBootApplication class is reside. So errors now resolved. But my service class is not getting called explicitly. I dont have any controller in my app. How I can call my service class method."},{"owner":{"account_id":4629221,"reputation":2621,"user_id":3752185,"display_name":"Janar"},"score":0,"creation_date":1497960485,"post_id":44651076,"comment_id":76290389,"body_markdown":"how are you trying to call it? You just need to autowire your service and call from there","body":"how are you trying to call it? You just need to autowire your service and call from there"},{"owner":{"account_id":6335906,"reputation":855,"user_id":4919308,"accept_rate":49,"display_name":"mahendra kawde"},"score":0,"creation_date":1497960619,"post_id":44651076,"comment_id":76290483,"body_markdown":"There is nothing in my @ SpringBootApplication class except main() method. And then there is @ Component class in which I am trying to read property files value and pass it onto the method which in turn calling @Service class which is using JdbcTemplate to connect to the database and excute SELECT query there.","body":"There is nothing in my @ SpringBootApplication class except main() method. And then there is @ Component class in which I am trying to read property files value and pass it onto the method which in turn calling @Service class which is using JdbcTemplate to connect to the database and excute SELECT query there."},{"owner":{"account_id":6335906,"reputation":855,"user_id":4919308,"accept_rate":49,"display_name":"mahendra kawde"},"score":0,"creation_date":1497960793,"post_id":44651076,"comment_id":76290595,"body_markdown":"@Jens I have updated question with added code please see","body":"@Jens I have updated question with added code please see"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1497962329,"post_id":44651076,"comment_id":76291732,"body_markdown":"@mahendrakawde Sorry do not get your actual question","body":"@mahendrakawde Sorry do not get your actual question"}],"answers":[{"tags":[],"owner":{"account_id":7023705,"reputation":138,"user_id":5381990,"display_name":"vishal paalakurthi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1497963453,"creation_date":1497963453,"answer_id":44653719,"question_id":44651076,"body_markdown":"I think issue is with declaring **driver class name** in application.properties   \r\n\r\n    logging.config=./conf/log4j.xml\r\n    \r\n    spring.ds_master_mysql.url = jdbc:mysql://&lt;host&gt;:3306\r\n    spring.ds_master_mysql.username = username\r\n    spring.ds_master_mysql.password = password\r\n    spring.ds_master_mysql.driverClassName=com.mysql.jdbc.Driver\r\n    \r\n     master.db_name=fdmsus_demo\r\n     master.table_name=vitalstats\r\n\r\n**Use below application.properties**:\r\n\r\n     logging.config=./conf/log4j.xml\r\n        \r\n        spring.ds_master_mysql.url = jdbc:mysql://&lt;host&gt;:3306\r\n        spring.ds_master_mysql.username = username\r\n        spring.ds_master_mysql.password = password\r\n        spring.ds_master_mysql.driver-class-name=com.mysql.jdbc.Driver\r\n        \r\n         master.db_name=fdmsus_demo\r\n         master.table_name=vitalstats","title":"Spring boot multiple datasource configuration","body":"<p>I think issue is with declaring <strong>driver class name</strong> in application.properties   </p>\n\n<pre><code>logging.config=./conf/log4j.xml\n\nspring.ds_master_mysql.url = jdbc:mysql://&lt;host&gt;:3306\nspring.ds_master_mysql.username = username\nspring.ds_master_mysql.password = password\nspring.ds_master_mysql.driverClassName=com.mysql.jdbc.Driver\n\n master.db_name=fdmsus_demo\n master.table_name=vitalstats\n</code></pre>\n\n<p><strong>Use below application.properties</strong>:</p>\n\n<pre><code> logging.config=./conf/log4j.xml\n\n    spring.ds_master_mysql.url = jdbc:mysql://&lt;host&gt;:3306\n    spring.ds_master_mysql.username = username\n    spring.ds_master_mysql.password = password\n    spring.ds_master_mysql.driver-class-name=com.mysql.jdbc.Driver\n\n     master.db_name=fdmsus_demo\n     master.table_name=vitalstats\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18531683,"reputation":1,"user_id":13502312,"display_name":"Johan Moncada"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1588984153,"creation_date":1588984153,"answer_id":61690238,"question_id":44651076,"body_markdown":"SpringBoot configuration multiple datasource: \r\n\r\napplication.properties\r\n```\r\n#spring.jpa.hibernate.naming-strategy = org.hibernate.cfg.ImprovedNamingStrategy\r\nspring.jpa.generate-ddl=true\r\nspring.jpa.database=default\r\nlogging.level.org.springframework = info\r\nspring.jpa.show-sql=true\r\nspring.jpa.open-in-view=true\r\nspring.jpa.hibernate.ddl-auto=create-drop\r\n\r\n# Connection properties of Data Source A\r\nspring.datasource.a.url=jdbc:mysql://localhost:3306/demo1?serverTimezone=UTC\r\nspring.datasource.a.jdbcUrl=${spring.datasource.a.url}\r\nspring.datasource.a.username = root\r\nspring.datasource.a.password =\r\nspring.datasource.a.driverClassName=com.mysql.cj.jdbc.Driver\r\nspring.datasource.a.hibernate.dialect=org.hibernate.dialect.MySQL5Dialect\r\n\r\n\r\n# Connection properties of Data Source B\r\nspring.datasource.b.url=jdbc:mysql://localhost:3306/demo2?serverTimezone=UTC\r\nspring.datasource.b.jdbcUrl=${spring.datasource.b.url}\r\nspring.datasource.b.username = root\r\nspring.datasource.b.password =\r\nspring.datasource.b.driverClassName=com.mysql.cj.jdbc.Driver\r\nspring.datasource.b.hibernate.dialect=org.hibernate.dialect.MySQL5Dialect\r\n```\r\n\r\nConfigA.java\r\n```\r\n@Configuration\r\n@EnableTransactionManagement\r\n@EnableJpaRepositories(basePackages = {&quot;api.a.repo&quot;})\r\npublic class ConfigA {\r\n\t@Autowired\r\n\tprivate Environment env;\r\n\t\r\n    @Primary\r\n    @Bean(name = &quot;dataSourceA&quot;)\r\n    @ConfigurationProperties(prefix = &quot;spring.datasource.a&quot;)\r\n    public DataSource dataSource() {\r\n        return DataSourceBuilder.create().build();\r\n    }\r\n\r\n    @Primary\r\n    @Bean(name = &quot;entityManagerFactoryA&quot;)\r\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory(EntityManagerFactoryBuilder builder,\r\n                                                                       @Qualifier(&quot;dataSourceA&quot;) DataSource dataSource) {\r\n        \r\n    \tMap&lt;String, Object&gt; properties = new HashMap&lt;&gt;();\r\n\t\tproperties.put(&quot;hibernate.show-sql&quot;, env.getProperty(&quot;spring.datasource.a.jpa.show-sql&quot;));\r\n\t\tproperties.put(&quot;spring.jpa.hibernate.ddl-auto&quot;, env.getProperty(&quot;spring.datasource.a.hibernate.dialect&quot;));\r\n\t\tproperties.put(&quot;hibernate.dialect&quot;, env.getProperty(&quot;spring.datasource.a.hibernate.dialect&quot;));\r\n\t\t\r\n    \treturn builder\r\n            .dataSource(dataSource)\r\n            .properties(properties)\r\n            .packages(&quot;api.a.model&quot;)\r\n            .persistenceUnit(&quot;datasourceA&quot;)\r\n            .build();\r\n    }\r\n\r\n    @Primary\r\n    @Bean(name = &quot;transactionManagerA&quot;)\r\n    public PlatformTransactionManager transactionManager(@Qualifier(&quot;entityManagerFactoryA&quot;) EntityManagerFactory entityManagerFactory) {\r\n        return new JpaTransactionManager(entityManagerFactory);\r\n    }\r\n}\r\n```\r\nConfigB.java\r\n\r\n```\r\n@Configuration\r\n@EnableTransactionManagement\r\n@EnableJpaRepositories(basePackages = {&quot;api.b.repo&quot;})\r\npublic class ConfigB {\r\n\r\n\t@Autowired\r\n\tprivate Environment env;\r\n\t\r\n    @Bean(name = &quot;dataSourceB&quot;)\r\n    @ConfigurationProperties(prefix = &quot;spring.datasource.b&quot;)\r\n    public DataSource dataSource() {\r\n        return DataSourceBuilder.create().build();\r\n    }\r\n\r\n    @Bean(name = &quot;entityManagerFactoryB&quot;)\r\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory(EntityManagerFactoryBuilder builder,\r\n                                                                       @Qualifier(&quot;dataSourceB&quot;) DataSource dataSource) {\r\n    \tMap&lt;String, Object&gt; properties = new HashMap&lt;&gt;();\r\n\t\tproperties.put(&quot;hibernate.show-sql&quot;, env.getProperty(&quot;spring.datasource.b.jpa.show-sql&quot;));\r\n\t\tproperties.put(&quot;spring.jpa.hibernate.ddl-auto&quot;, env.getProperty(&quot;spring.datasource.b.hibernate.dialect&quot;));\r\n\t\tproperties.put(&quot;hibernate.dialect&quot;, env.getProperty(&quot;spring.datasource.b.hibernate.dialect&quot;));\r\n\t\t\r\n    \treturn builder\r\n            .dataSource(dataSource)\r\n            .packages(&quot;api.b.model&quot;)\r\n            .persistenceUnit(&quot;datasourceB&quot;)\r\n            .build();\r\n    }\r\n\r\n\r\n    @Bean(name = &quot;transactionManagerB&quot;)\r\n    public PlatformTransactionManager transactionManager(@Qualifier(&quot;entityManagerFactoryB&quot;) EntityManagerFactory entityManagerFactory) {\r\n        return new JpaTransactionManager(entityManagerFactory);\r\n    }\r\n}\r\n```\r\n\r\nvisit : [https://github.com/johanmoncada/OpenWork][1]\r\n\r\n\r\n  [1]: https://github.com/johanmoncada/OpenWork","title":"Spring boot multiple datasource configuration","body":"<p>SpringBoot configuration multiple datasource: </p>\n\n<p>application.properties</p>\n\n<pre><code>#spring.jpa.hibernate.naming-strategy = org.hibernate.cfg.ImprovedNamingStrategy\nspring.jpa.generate-ddl=true\nspring.jpa.database=default\nlogging.level.org.springframework = info\nspring.jpa.show-sql=true\nspring.jpa.open-in-view=true\nspring.jpa.hibernate.ddl-auto=create-drop\n\n# Connection properties of Data Source A\nspring.datasource.a.url=jdbc:mysql://localhost:3306/demo1?serverTimezone=UTC\nspring.datasource.a.jdbcUrl=${spring.datasource.a.url}\nspring.datasource.a.username = root\nspring.datasource.a.password =\nspring.datasource.a.driverClassName=com.mysql.cj.jdbc.Driver\nspring.datasource.a.hibernate.dialect=org.hibernate.dialect.MySQL5Dialect\n\n\n# Connection properties of Data Source B\nspring.datasource.b.url=jdbc:mysql://localhost:3306/demo2?serverTimezone=UTC\nspring.datasource.b.jdbcUrl=${spring.datasource.b.url}\nspring.datasource.b.username = root\nspring.datasource.b.password =\nspring.datasource.b.driverClassName=com.mysql.cj.jdbc.Driver\nspring.datasource.b.hibernate.dialect=org.hibernate.dialect.MySQL5Dialect\n</code></pre>\n\n<p>ConfigA.java</p>\n\n<pre><code>@Configuration\n@EnableTransactionManagement\n@EnableJpaRepositories(basePackages = {\"api.a.repo\"})\npublic class ConfigA {\n    @Autowired\n    private Environment env;\n\n    @Primary\n    @Bean(name = \"dataSourceA\")\n    @ConfigurationProperties(prefix = \"spring.datasource.a\")\n    public DataSource dataSource() {\n        return DataSourceBuilder.create().build();\n    }\n\n    @Primary\n    @Bean(name = \"entityManagerFactoryA\")\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory(EntityManagerFactoryBuilder builder,\n                                                                       @Qualifier(\"dataSourceA\") DataSource dataSource) {\n\n        Map&lt;String, Object&gt; properties = new HashMap&lt;&gt;();\n        properties.put(\"hibernate.show-sql\", env.getProperty(\"spring.datasource.a.jpa.show-sql\"));\n        properties.put(\"spring.jpa.hibernate.ddl-auto\", env.getProperty(\"spring.datasource.a.hibernate.dialect\"));\n        properties.put(\"hibernate.dialect\", env.getProperty(\"spring.datasource.a.hibernate.dialect\"));\n\n        return builder\n            .dataSource(dataSource)\n            .properties(properties)\n            .packages(\"api.a.model\")\n            .persistenceUnit(\"datasourceA\")\n            .build();\n    }\n\n    @Primary\n    @Bean(name = \"transactionManagerA\")\n    public PlatformTransactionManager transactionManager(@Qualifier(\"entityManagerFactoryA\") EntityManagerFactory entityManagerFactory) {\n        return new JpaTransactionManager(entityManagerFactory);\n    }\n}\n</code></pre>\n\n<p>ConfigB.java</p>\n\n<pre><code>@Configuration\n@EnableTransactionManagement\n@EnableJpaRepositories(basePackages = {\"api.b.repo\"})\npublic class ConfigB {\n\n    @Autowired\n    private Environment env;\n\n    @Bean(name = \"dataSourceB\")\n    @ConfigurationProperties(prefix = \"spring.datasource.b\")\n    public DataSource dataSource() {\n        return DataSourceBuilder.create().build();\n    }\n\n    @Bean(name = \"entityManagerFactoryB\")\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory(EntityManagerFactoryBuilder builder,\n                                                                       @Qualifier(\"dataSourceB\") DataSource dataSource) {\n        Map&lt;String, Object&gt; properties = new HashMap&lt;&gt;();\n        properties.put(\"hibernate.show-sql\", env.getProperty(\"spring.datasource.b.jpa.show-sql\"));\n        properties.put(\"spring.jpa.hibernate.ddl-auto\", env.getProperty(\"spring.datasource.b.hibernate.dialect\"));\n        properties.put(\"hibernate.dialect\", env.getProperty(\"spring.datasource.b.hibernate.dialect\"));\n\n        return builder\n            .dataSource(dataSource)\n            .packages(\"api.b.model\")\n            .persistenceUnit(\"datasourceB\")\n            .build();\n    }\n\n\n    @Bean(name = \"transactionManagerB\")\n    public PlatformTransactionManager transactionManager(@Qualifier(\"entityManagerFactoryB\") EntityManagerFactory entityManagerFactory) {\n        return new JpaTransactionManager(entityManagerFactory);\n    }\n}\n</code></pre>\n\n<p>visit : <a href=\"https://github.com/johanmoncada/OpenWork\" rel=\"nofollow noreferrer\">https://github.com/johanmoncada/OpenWork</a></p>\n"},{"tags":[],"owner":{"account_id":9792389,"reputation":1,"user_id":7256579,"display_name":"MDHZAMIR"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675187020,"creation_date":1675186079,"answer_id":75300869,"question_id":44651076,"body_markdown":"I faced the same issue a few days back and solved it. I&#39;m using **spring boot version 3.0.1** and **java version 19**. Here is the source code\r\n\r\n**pom.xml**\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    **for oracle db**\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;com.oracle.database.jdbc&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;\r\n    \t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    **for postgresql db**\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n    \t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n**application.properties**\r\n\r\n    #first DB MYSQL\r\n    first.db.datasource.jdbc-url: jdbc:mysql://localhost:3306/test_db\r\n    first.db.datasource.username: \r\n    first.db.datasource.password: \r\n    first.db.datasource.driverClassName: com.mysql.jdbc.Driver\r\n    #second DB mysql ...\r\n    second.db.datasource.jdbc-url: jdbc:mysql://localhost:3308/test_db_2\r\n    second.db.datasource.username: \r\n    second.db.datasource.password: \r\n    second.db.datasource.driverClassName: com.mysql.jdbc.Driver\r\n\r\nConfig Class for the first datasource\r\n```\r\n@Configuration\r\n@EnableTransactionManagement\r\n@EnableJpaRepositories(entityManagerFactoryRef = &quot;firstDBEntityManagerFactory&quot;,\r\n        transactionManagerRef = &quot;firstDBTransactionManager&quot;,\r\n        basePackages = {&quot;com.*.*.repository&quot;})\r\npublic class FirstDbConfig {\r\n    @Primary\r\n    @Bean(name = &quot;firstDBDataSource&quot;)\r\n    @ConfigurationProperties(prefix = &quot;first.db.datasource&quot;)\r\n    public DataSource firstDataSource() {\r\n\t\treturn DataSourceBuilder.create().build();\r\n    }\r\n\r\n    @Primary\r\n    @Bean(name = &quot;firstDBEntityManagerFactory&quot;)\r\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory(EntityManagerFactoryBuilder builder,\r\n                                                                       @Qualifier(&quot;firstDBDataSource&quot;) DataSource dataSource) {\r\n        return builder.dataSource(dataSource).packages(&quot;com.*.*.entity&quot;)\r\n                .persistenceUnit(&quot;db1&quot;).build();\r\n    }\r\n\r\n    @Primary\r\n    @Bean(name = &quot;firstDBTransactionManager&quot;)\r\n    public PlatformTransactionManager firstDBTransactionManager(@Qualifier(&quot;firstDBEntityManagerFactory&quot;) EntityManagerFactory firstDBEntityManagerFactory) {\r\n        return new JpaTransactionManager(firstDBEntityManagerFactory);\r\n    }\r\n}\r\n```\r\n\r\nConfig Class for the second datasource\r\n\r\n```\r\n@Configuration\r\n@EnableTransactionManagement\r\n@EnableJpaRepositories(entityManagerFactoryRef = &quot;secondDBEntityManagerFactory&quot;,\r\n        transactionManagerRef = &quot;secondDBTransactionManager&quot;,\r\n        basePackages = {&quot;com.*.*.seconddb.repository&quot;})\r\npublic class SecondDbConfig {\r\n\r\n    @Bean(name = &quot;secondDBDataSource&quot;)\r\n    @ConfigurationProperties(prefix = &quot;second.db.datasource&quot;)\r\n    public DataSource secondDataSource() {\r\n\t\treturn DataSourceBuilder.create().build();\r\n    }\r\n\r\n    @Bean(name = &quot;secondDBEntityManagerFactory&quot;)\r\n    public LocalContainerEntityManagerFactoryBean secondDBEntityManagerFactory(EntityManagerFactoryBuilder builder, @Qualifier(&quot;secondDBDataSource&quot;) DataSource dataSource) {\r\n        return builder.dataSource(dataSource)\r\n                .packages(&quot;com.*.*.seconddb.entity&quot;)\r\n                .persistenceUnit(&quot;db2&quot;)\r\n                .build();\r\n    }\r\n\r\n    @Bean(name = &quot;secondDBTransactionManager&quot;)\r\n    public PlatformTransactionManager secondDBTransactionManager(@Qualifier(&quot;secondDBEntityManagerFactory&quot;) EntityManagerFactory secondDBEntityManagerFactory) {\r\n        return new JpaTransactionManager(secondDBEntityManagerFactory);\r\n    }\r\n}\r\n```\r\n\r\n ","title":"Spring boot multiple datasource configuration","body":"<p>I faced the same issue a few days back and solved it. I'm using <strong>spring boot version 3.0.1</strong> and <strong>java version 19</strong>. Here is the source code</p>\n<p><strong>pom.xml</strong></p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;mysql&lt;/groupId&gt;\n    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n&lt;/dependency&gt;\n**for oracle db**\n&lt;dependency&gt;\n    &lt;groupId&gt;com.oracle.database.jdbc&lt;/groupId&gt;\n    &lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;\n    &lt;scope&gt;runtime&lt;/scope&gt;\n&lt;/dependency&gt;\n**for postgresql db**\n&lt;dependency&gt;\n    &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n    &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n    &lt;scope&gt;runtime&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><strong>application.properties</strong></p>\n<pre><code>#first DB MYSQL\nfirst.db.datasource.jdbc-url: jdbc:mysql://localhost:3306/test_db\nfirst.db.datasource.username: \nfirst.db.datasource.password: \nfirst.db.datasource.driverClassName: com.mysql.jdbc.Driver\n#second DB mysql ...\nsecond.db.datasource.jdbc-url: jdbc:mysql://localhost:3308/test_db_2\nsecond.db.datasource.username: \nsecond.db.datasource.password: \nsecond.db.datasource.driverClassName: com.mysql.jdbc.Driver\n</code></pre>\n<p>Config Class for the first datasource</p>\n<pre><code>@Configuration\n@EnableTransactionManagement\n@EnableJpaRepositories(entityManagerFactoryRef = &quot;firstDBEntityManagerFactory&quot;,\n        transactionManagerRef = &quot;firstDBTransactionManager&quot;,\n        basePackages = {&quot;com.*.*.repository&quot;})\npublic class FirstDbConfig {\n    @Primary\n    @Bean(name = &quot;firstDBDataSource&quot;)\n    @ConfigurationProperties(prefix = &quot;first.db.datasource&quot;)\n    public DataSource firstDataSource() {\n        return DataSourceBuilder.create().build();\n    }\n\n    @Primary\n    @Bean(name = &quot;firstDBEntityManagerFactory&quot;)\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory(EntityManagerFactoryBuilder builder,\n                                                                       @Qualifier(&quot;firstDBDataSource&quot;) DataSource dataSource) {\n        return builder.dataSource(dataSource).packages(&quot;com.*.*.entity&quot;)\n                .persistenceUnit(&quot;db1&quot;).build();\n    }\n\n    @Primary\n    @Bean(name = &quot;firstDBTransactionManager&quot;)\n    public PlatformTransactionManager firstDBTransactionManager(@Qualifier(&quot;firstDBEntityManagerFactory&quot;) EntityManagerFactory firstDBEntityManagerFactory) {\n        return new JpaTransactionManager(firstDBEntityManagerFactory);\n    }\n}\n</code></pre>\n<p>Config Class for the second datasource</p>\n<pre><code>@Configuration\n@EnableTransactionManagement\n@EnableJpaRepositories(entityManagerFactoryRef = &quot;secondDBEntityManagerFactory&quot;,\n        transactionManagerRef = &quot;secondDBTransactionManager&quot;,\n        basePackages = {&quot;com.*.*.seconddb.repository&quot;})\npublic class SecondDbConfig {\n\n    @Bean(name = &quot;secondDBDataSource&quot;)\n    @ConfigurationProperties(prefix = &quot;second.db.datasource&quot;)\n    public DataSource secondDataSource() {\n        return DataSourceBuilder.create().build();\n    }\n\n    @Bean(name = &quot;secondDBEntityManagerFactory&quot;)\n    public LocalContainerEntityManagerFactoryBean secondDBEntityManagerFactory(EntityManagerFactoryBuilder builder, @Qualifier(&quot;secondDBDataSource&quot;) DataSource dataSource) {\n        return builder.dataSource(dataSource)\n                .packages(&quot;com.*.*.seconddb.entity&quot;)\n                .persistenceUnit(&quot;db2&quot;)\n                .build();\n    }\n\n    @Bean(name = &quot;secondDBTransactionManager&quot;)\n    public PlatformTransactionManager secondDBTransactionManager(@Qualifier(&quot;secondDBEntityManagerFactory&quot;) EntityManagerFactory secondDBEntityManagerFactory) {\n        return new JpaTransactionManager(secondDBEntityManagerFactory);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":6335906,"reputation":855,"user_id":4919308,"accept_rate":49,"display_name":"mahendra kawde"},"comment_count":22,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":809,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1675187020,"creation_date":1497955988,"question_id":44651076,"body_markdown":"I am trying to configure multiple data sources in spring boot app. But I am getting following error when application is about to boot.\r\n\r\n    Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;mySQLReplicationStatusService&#39;: Unsatisfied dependency expressed through field &#39;jdbcTemplate&#39;; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;org.springframework.jdbc.core.JdbcTemplate&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true), @org.springframework.beans.factory.annotation.Qualifier(value=msMysqlJdbcTemplate)}\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:588)\r\n    \tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:88)\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:366)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1264)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:553)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:483)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:761)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:867)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:543)\r\n    \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:693)\r\n    \tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:360)\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:303)\r\n    \tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:120)\r\n    \tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:98)\r\n    \tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:116)\r\n    \tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:83)\r\n    \tat org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:47)\r\n    \tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:230)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:228)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:287)\r\n    \tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:289)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:247)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94)\r\n    \tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n    \tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n    \tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n    \tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n    \tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n    \tat org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\r\n    \tat org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\r\n    \tat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191)\r\n    \tat org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:283)\r\n    \tat org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:173)\r\n    \tat org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)\r\n    \tat org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:128)\r\n    \tat org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:203)\r\n    \tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:155)\r\n    \tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)\r\n    Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;org.springframework.jdbc.core.JdbcTemplate&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true), @org.springframework.beans.factory.annotation.Qualifier(value=msMysqlJdbcTemplate)}\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1493)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1104)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1066)\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:585)\r\n    \tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:88)\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:366)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1264)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:553)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:483)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:761)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:867)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:543)\r\n    \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:693)\r\n    \tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:360)\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:303)\r\n    \tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:120)\r\n    \tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:98)\r\n    \tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:116)\r\n    \tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:83)\r\n    \tat org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:47)\r\n    \tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:230)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:228)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:287)\r\n    \tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:289)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:247)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94)\r\n    \tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n    \tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n    \tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n    \tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n    \tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n    \tat org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\r\n    \tat org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\r\n    \tat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191)\r\n    \tat org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:283)\r\n    \tat org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:173)\r\n    \tat org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)\r\n    \tat org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:128)\r\n    \tat org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:203)\r\n    \tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:155)\r\n    \tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)\r\n\r\n\r\nHere is my configuration class looks like:\r\n\r\n    package com.example;\r\n        @Configuration\r\n        public class MultipleDBConfig {\r\n        \r\n        \t\r\n        \t@Bean(name = &quot;masterMysqlDb&quot;)\r\n        \t@Primary\r\n        \t@ConfigurationProperties(prefix = &quot;spring.ds_master_mysql&quot;)\r\n        \tpublic DataSource masterMysqlDataSource() {\r\n        \t\treturn DataSourceBuilder.create().build();\r\n        \t}\r\n        \t\r\n        \t@Bean(name = &quot;msMysqlJdbcTemplate&quot;)\r\n        \tpublic JdbcTemplate masterJdbcTemplate(@Qualifier(&quot;masterMysqlDb&quot;) DataSource masterMysqlDb) {\r\n        \t\treturn new JdbcTemplate(masterMysqlDb);\r\n        \t}\r\n        \t\r\n        \t@Bean(name = &quot;slaveMysqlDb&quot;)\r\n        \t@ConfigurationProperties(prefix = &quot;spring.ds_slave_mysql&quot;)\r\n        \tpublic DataSource slaveMysqlDataSource() {\r\n        \t\treturn DataSourceBuilder.create().build();\r\n        \t}\r\n        \t\r\n        \t@Bean(name = &quot;slaveMysqlJdbcTemplate&quot;)\r\n        \tpublic JdbcTemplate slaveJdbcTemplate(@Qualifier(&quot;slaveMysqlDb&quot;) DataSource dsSlaveMySQL) {\r\n        \t\treturn new JdbcTemplate(dsSlaveMySQL);\r\n        \t}\r\n        }\r\n\r\nHere is my service class:\r\n\r\n        package com.example.replication.service;\r\n           @Service\r\n    public class MySQLReplicationStatusService {\r\n    \r\n    \t@Autowired\r\n    \t@Qualifier(&quot;msMysqlJdbcTemplate&quot;)\r\n    \tprivate JdbcTemplate jdbcTemplate;\r\n    \r\n    \t@Autowired\r\n    \t@Qualifier(&quot;slaveMysqlJdbcTemplate&quot;)\r\n    \tprivate JdbcTemplate slaveJdbcTemplate;\r\n    \t\r\n    \tpublic void checkReplicationStatus(String dbName, String tableName){\r\n    \t\tSystem.out.println(&quot;In checkReplicationStatus&quot;);\r\n    \t\tConnection conn_master = null;\r\n    \t\tStatement stmt_master = null;\r\n    \t\tStringBuilder sbSql_master = null;\r\n    \t\tResultSet rs_master = null;\r\n    \t\t\r\n    \t\tConnection conn_slave = null;\r\n    \t\tStatement stmt_slave = null;\r\n    \t\tStringBuilder sbSql_slave = null;\r\n    \t\tResultSet rs_slave = null;\r\n    \t\t\r\n    \t\ttry{\r\n    \t\t\tconn_master = jdbcTemplate.getDataSource().getConnection();\r\n    \t\t\tstmt_master = conn_master.createStatement();\r\n    \t\t\tsbSql_master = new StringBuilder();\r\n    \t\t\tsbSql_master.append(&quot;SELECT COLUMN_NAME&quot;);\r\n    \t\t\tsbSql_master.append(&quot;FROM information_schema.COLUMNS&quot;);\r\n    \t\t\tsbSql_master.append(&quot;WHERE (TABLE_SCHEMA = &quot; + dbName + &quot;)&quot;);\r\n    \t\t\tsbSql_master.append(&quot;AND (TABLE_NAME = &quot; + tableName + &quot;)&quot;);\r\n    \t\t\tsbSql_master.append(&quot;AND (COLUMN_KEY = &#39;PRI&#39;) &quot;);\r\n    \t\t\t\r\n    \t\t\trs_master = stmt_master.executeQuery(sbSql_master.toString());\r\n    \t\t\t\r\n    \t\t\t/*conn_slave = slaveJdbcTemplate.getDataSource().getConnection();\r\n    \t\t\tstmt_slave = conn_slave.createStatement();\r\n    \t\t\tsbSql_slave = new StringBuilder();\r\n    \t\t\tsbSql_slave.append(&quot;SELECT * FROM &quot;).append(dbName).append(&quot;.&quot;).append(tableName);\r\n    \t\t\trs_slave = stmt_slave.executeQuery(sbSql_slave.toString());*/\r\n    \t\t\t\r\n    \t\t\tif(rs_master != null){\r\n    \t\t\t\twhile(!rs_master.isLast()){\r\n    \t\t\t\t\trs_master.next();\r\n    \t\t\t\t\tObject obj = rs_master.getObject(1);\r\n    \t\t\t\t\tObject obj2 = rs_master.getObject(2);\r\n    \t\t\t\t\tString key = null;\r\n    \t\t\t\t\tString val = null;\r\n    \t\t\t\t\tif(obj != null){\r\n    \t\t\t\t\t\tkey = obj.toString();\r\n    \t\t\t\t\t\tSystem.out.println(&quot;Key = &quot; + key);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\tif(obj2 != null){\r\n    \t\t\t\t\t\tval = obj2.toString();\r\n    \t\t\t\t\t\tSystem.out.println(&quot;Value = &quot; + val);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tcatch(SQLException e){\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nHere is component class:\r\n\r\n    @Component\r\n    public class MySQLReplicationStatusCheck {\r\n    \tfinal static Logger logger = Logger.getLogger(MySQLReplicationStatusCheck.class);\r\n    \t\r\n    \t@Autowired\r\n    \tprivate MySQLReplicationStatusService mysqlReplicationStatusService = null;\r\n    \t\r\n    \t@Value(&quot;${master.db_name}&quot;)\r\n        private  String databaseName;\r\n    \t\r\n    \t@Value(&quot;${master.table_name}&quot;)\r\n        private  String tableName;\r\n    \t\r\n    \tpublic void replicationEvent(){\r\n    \t\tlogger.info(&quot;Inside replicationEvent method&quot;);\r\n    \t\tSystem.out.println(&quot;Inside replicationEvent method&quot;);\r\n    \t\tmysqlReplicationStatusService.checkReplicationStatus(databaseName, tableName);\r\n    \t}\r\n    }\r\n\r\nHere is my application.properties:\r\n\r\n    logging.config=./conf/log4j.xml\r\n    \r\n    spring.ds_master_mysql.url = jdbc:mysql://&lt;host&gt;:3306\r\n    spring.ds_master_mysql.username = username\r\n    spring.ds_master_mysql.password = password\r\n    spring.ds_master_mysql.driverClassName=com.mysql.jdbc.Driver\r\n\r\n     master.db_name=fdmsus_demo\r\n     master.table_name=vitalstats\r\n\r\nHere is Spring boot class:\r\n\r\n    package com.example;\r\n        @SpringBootApplication\r\n        public class FdmsMysqlReplicationApplication {\r\n        \r\n        \tpublic static void main(String[] args) {\r\n        \t\tSpringApplication.run(FdmsMysqlReplicationApplication.class, args);\r\n        \t}\r\n        }\r\n\r\nHowever I am not able to figure out where is I am missing something. Can anyone please help me get this done.\r\n\r\nThanks.\r\n\r\n\r\n","title":"Spring boot multiple datasource configuration","body":"<p>I am trying to configure multiple data sources in spring boot app. But I am getting following error when application is about to boot.</p>\n\n<pre><code>Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'mySQLReplicationStatusService': Unsatisfied dependency expressed through field 'jdbcTemplate'; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.jdbc.core.JdbcTemplate' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true), @org.springframework.beans.factory.annotation.Qualifier(value=msMysqlJdbcTemplate)}\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:588)\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:88)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:366)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1264)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:553)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:483)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:761)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:867)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:543)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:693)\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:360)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:303)\n    at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:120)\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:98)\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:116)\n    at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:83)\n    at org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:47)\n    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:230)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:228)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:287)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:289)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:247)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\n    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\n    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191)\n    at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:283)\n    at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:173)\n    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)\n    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:128)\n    at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:203)\n    at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:155)\n    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)\nCaused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.jdbc.core.JdbcTemplate' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true), @org.springframework.beans.factory.annotation.Qualifier(value=msMysqlJdbcTemplate)}\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1493)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1104)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1066)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:585)\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:88)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:366)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1264)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:553)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:483)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:761)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:867)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:543)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:693)\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:360)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:303)\n    at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:120)\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:98)\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:116)\n    at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:83)\n    at org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:47)\n    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:230)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:228)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:287)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:289)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:247)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\n    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\n    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191)\n    at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:283)\n    at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:173)\n    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)\n    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:128)\n    at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:203)\n    at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:155)\n    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)\n</code></pre>\n\n<p>Here is my configuration class looks like:</p>\n\n<pre><code>package com.example;\n    @Configuration\n    public class MultipleDBConfig {\n\n\n        @Bean(name = \"masterMysqlDb\")\n        @Primary\n        @ConfigurationProperties(prefix = \"spring.ds_master_mysql\")\n        public DataSource masterMysqlDataSource() {\n            return DataSourceBuilder.create().build();\n        }\n\n        @Bean(name = \"msMysqlJdbcTemplate\")\n        public JdbcTemplate masterJdbcTemplate(@Qualifier(\"masterMysqlDb\") DataSource masterMysqlDb) {\n            return new JdbcTemplate(masterMysqlDb);\n        }\n\n        @Bean(name = \"slaveMysqlDb\")\n        @ConfigurationProperties(prefix = \"spring.ds_slave_mysql\")\n        public DataSource slaveMysqlDataSource() {\n            return DataSourceBuilder.create().build();\n        }\n\n        @Bean(name = \"slaveMysqlJdbcTemplate\")\n        public JdbcTemplate slaveJdbcTemplate(@Qualifier(\"slaveMysqlDb\") DataSource dsSlaveMySQL) {\n            return new JdbcTemplate(dsSlaveMySQL);\n        }\n    }\n</code></pre>\n\n<p>Here is my service class:</p>\n\n<pre><code>    package com.example.replication.service;\n       @Service\npublic class MySQLReplicationStatusService {\n\n    @Autowired\n    @Qualifier(\"msMysqlJdbcTemplate\")\n    private JdbcTemplate jdbcTemplate;\n\n    @Autowired\n    @Qualifier(\"slaveMysqlJdbcTemplate\")\n    private JdbcTemplate slaveJdbcTemplate;\n\n    public void checkReplicationStatus(String dbName, String tableName){\n        System.out.println(\"In checkReplicationStatus\");\n        Connection conn_master = null;\n        Statement stmt_master = null;\n        StringBuilder sbSql_master = null;\n        ResultSet rs_master = null;\n\n        Connection conn_slave = null;\n        Statement stmt_slave = null;\n        StringBuilder sbSql_slave = null;\n        ResultSet rs_slave = null;\n\n        try{\n            conn_master = jdbcTemplate.getDataSource().getConnection();\n            stmt_master = conn_master.createStatement();\n            sbSql_master = new StringBuilder();\n            sbSql_master.append(\"SELECT COLUMN_NAME\");\n            sbSql_master.append(\"FROM information_schema.COLUMNS\");\n            sbSql_master.append(\"WHERE (TABLE_SCHEMA = \" + dbName + \")\");\n            sbSql_master.append(\"AND (TABLE_NAME = \" + tableName + \")\");\n            sbSql_master.append(\"AND (COLUMN_KEY = 'PRI') \");\n\n            rs_master = stmt_master.executeQuery(sbSql_master.toString());\n\n            /*conn_slave = slaveJdbcTemplate.getDataSource().getConnection();\n            stmt_slave = conn_slave.createStatement();\n            sbSql_slave = new StringBuilder();\n            sbSql_slave.append(\"SELECT * FROM \").append(dbName).append(\".\").append(tableName);\n            rs_slave = stmt_slave.executeQuery(sbSql_slave.toString());*/\n\n            if(rs_master != null){\n                while(!rs_master.isLast()){\n                    rs_master.next();\n                    Object obj = rs_master.getObject(1);\n                    Object obj2 = rs_master.getObject(2);\n                    String key = null;\n                    String val = null;\n                    if(obj != null){\n                        key = obj.toString();\n                        System.out.println(\"Key = \" + key);\n                    }\n                    if(obj2 != null){\n                        val = obj2.toString();\n                        System.out.println(\"Value = \" + val);\n                    }\n                }\n            }\n        }\n        catch(SQLException e){\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n\n<p>Here is component class:</p>\n\n<pre><code>@Component\npublic class MySQLReplicationStatusCheck {\n    final static Logger logger = Logger.getLogger(MySQLReplicationStatusCheck.class);\n\n    @Autowired\n    private MySQLReplicationStatusService mysqlReplicationStatusService = null;\n\n    @Value(\"${master.db_name}\")\n    private  String databaseName;\n\n    @Value(\"${master.table_name}\")\n    private  String tableName;\n\n    public void replicationEvent(){\n        logger.info(\"Inside replicationEvent method\");\n        System.out.println(\"Inside replicationEvent method\");\n        mysqlReplicationStatusService.checkReplicationStatus(databaseName, tableName);\n    }\n}\n</code></pre>\n\n<p>Here is my application.properties:</p>\n\n<pre><code>logging.config=./conf/log4j.xml\n\nspring.ds_master_mysql.url = jdbc:mysql://&lt;host&gt;:3306\nspring.ds_master_mysql.username = username\nspring.ds_master_mysql.password = password\nspring.ds_master_mysql.driverClassName=com.mysql.jdbc.Driver\n\n master.db_name=fdmsus_demo\n master.table_name=vitalstats\n</code></pre>\n\n<p>Here is Spring boot class:</p>\n\n<pre><code>package com.example;\n    @SpringBootApplication\n    public class FdmsMysqlReplicationApplication {\n\n        public static void main(String[] args) {\n            SpringApplication.run(FdmsMysqlReplicationApplication.class, args);\n        }\n    }\n</code></pre>\n\n<p>However I am not able to figure out where is I am missing something. Can anyone please help me get this done.</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","annotations","java-17","java-annotations","java-record"],"comments":[{"owner":{"account_id":945600,"reputation":3040,"user_id":972912,"accept_rate":46,"display_name":"Cl&#233;ment MATHIEU"},"score":0,"creation_date":1675149084,"post_id":75290864,"comment_id":132860863,"body_markdown":"Thanks @brian-goetz. I did not mention record-builder in the title because unless I&#39;m mistaken, all code paths leading to observed behavior are in JDK and could be reproduced without record-builder.","body":"Thanks @brian-goetz. I did not mention record-builder in the title because unless I&#39;m mistaken, all code paths leading to observed behavior are in JDK and could be reproduced without record-builder."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1675162892,"post_id":75290864,"comment_id":132864815,"body_markdown":"Sounds like there might be a bug (or two) in the JDK’s code. But what I don’t understand: the record is built by this record-builder from the annotated interface. So it knows the record components even before the source code has been generated. Why does it require the compiler feedback from the generated source code at all? That’s almost as weird as a compiler that parses its generated class files to find out what it has generated…","body":"Sounds like there might be a bug (or two) in the JDK’s code. But what I don’t understand: the record is built by this record-builder from the annotated interface. So it knows the record components even before the source code has been generated. Why does it require the compiler feedback from the generated source code at all? That’s almost as weird as a compiler that parses its generated class files to find out what it has generated…"},{"owner":{"account_id":945600,"reputation":3040,"user_id":972912,"accept_rate":46,"display_name":"Cl&#233;ment MATHIEU"},"score":0,"creation_date":1675181395,"post_id":75290864,"comment_id":132871263,"body_markdown":"I&#39;m still looking for a minimal reproducer. My current understanding is that issue doesn&#39;t occurs on fresh builds. It seems to occur after an initial build created ConfRecord source and class files and a file including ConfRecord is modified. I guess javac first parses the class from previous build (stacktrace #1), then annotation processor parses the source file (stacktrace #2). It&#39;s unclear to me if this is expected.","body":"I&#39;m still looking for a minimal reproducer. My current understanding is that issue doesn&#39;t occurs on fresh builds. It seems to occur after an initial build created ConfRecord source and class files and a file including ConfRecord is modified. I guess javac first parses the class from previous build (stacktrace #1), then annotation processor parses the source file (stacktrace #2). It&#39;s unclear to me if this is expected."},{"owner":{"account_id":945600,"reputation":3040,"user_id":972912,"accept_rate":46,"display_name":"Cl&#233;ment MATHIEU"},"score":0,"creation_date":1675186783,"post_id":75290864,"comment_id":132873065,"body_markdown":"@Holger I just updated the question to add a link to a reproducer. Any insight from someone more knowledgeable than me on this topic would be very much appreciated.","body":"@Holger I just updated the question to add a link to a reproducer. Any insight from someone more knowledgeable than me on this topic would be very much appreciated."},{"owner":{"account_id":2335634,"reputation":2907,"user_id":2048051,"display_name":"Randgalt"},"score":0,"creation_date":1678619481,"post_id":75290864,"comment_id":133565292,"body_markdown":"Author of RecordBuilder here... I&#39;ve been able to reproduce this in IntelliJ by compiling a single class. There seems to be a bug in javac with processing an annotated class generated by an annotation processor, though the docs say this should work. I have yet to refine it further however.","body":"Author of RecordBuilder here... I&#39;ve been able to reproduce this in IntelliJ by compiling a single class. There seems to be a bug in javac with processing an annotated class generated by an annotation processor, though the docs say this should work. I have yet to refine it further however."},{"owner":{"account_id":2335634,"reputation":2907,"user_id":2048051,"display_name":"Randgalt"},"score":0,"creation_date":1678626615,"post_id":75290864,"comment_id":133566282,"body_markdown":"Further down the rabbit hole... in my case, the existence of a .class file of the generated record in the output path causes the problem. If I delete it prior to generating the record the exception doesn&#39;t happen.","body":"Further down the rabbit hole... in my case, the existence of a .class file of the generated record in the output path causes the problem. If I delete it prior to generating the record the exception doesn&#39;t happen."}],"owner":{"account_id":945600,"reputation":3040,"user_id":972912,"accept_rate":46,"display_name":"Cl&#233;ment MATHIEU"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":194,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675186565,"creation_date":1675118026,"question_id":75290864,"body_markdown":"While trying to troubleshoot &amp; fix [this issue](https://github.com/Randgalt/record-builder/issues/139) from record-builder (a Java annotation processor), I observed that `TypeElement.getRecordComponents()` returns two entries for the same record component. I&#39;m trying to understand if this behavior is expected from the JDK or a bug. \r\n\r\nrecord-builder has a feature allowing you to generate a record from an interface. Following interface definition\r\n\r\n```java\r\n@RecordInterface\r\ninterface Conf {\r\n\r\n    int maxConcurrency( );\r\n}\r\n```\r\n\r\ngenerates following code \r\n\r\n```java\r\n@Generated(&quot;io.soabase.recordbuilder.core.RecordInterface&quot;)\r\n@RecordBuilder\r\npublic record ConfRecord(int maxConcurrency) implements Conf, ConfRecordBuilder.With {}\r\n```\r\n\r\nI was able to observe that when `ConfRecord` class file already exists on disk; `TypeElement.getRecordComponents()` returns two `maxConcurrency` entries. One with (name: maxConcurrency, pos: 1, accessor: null), and another one with (name: maxConcurrency, pos: 387, accessor: &amp;lt;value&gt;)\r\n\r\nThe first entry is set from `setRecordComponents` when existing class file is parsed (triggered by an import statement).\r\n\r\n```\r\nsetRecordComponents:1542, Symbol$ClassSymbol (com.sun.tools.javac.code)\r\nread:1224, ClassReader$26 (com.sun.tools.javac.jvm)\r\nreadAttrs:1373, ClassReader (com.sun.tools.javac.jvm)\r\nreadClassAttrs:1387, ClassReader (com.sun.tools.javac.jvm)\r\nreadClass:2527, ClassReader (com.sun.tools.javac.jvm)\r\nreadClassBuffer:2644, ClassReader (com.sun.tools.javac.jvm)\r\nreadClassFile:2658, ClassReader (com.sun.tools.javac.jvm)\r\nfillIn:361, ClassFinder (com.sun.tools.javac.code)\r\ncomplete:291, ClassFinder (com.sun.tools.javac.code)\r\ncomplete:-1, ClassFinder$$Lambda$95/0x0000000801254af8 (com.sun.tools.javac.code)\r\ncomplete:682, Symbol (com.sun.tools.javac.code)\r\ncomplete:1410, Symbol$ClassSymbol (com.sun.tools.javac.code)\r\nloadClass:434, ClassFinder (com.sun.tools.javac.code)\r\nloadClass:2052, Resolve (com.sun.tools.javac.comp)\r\nfindIdentInPackageInternal:2450, Resolve (com.sun.tools.javac.comp)\r\nfindIdentInPackage:2438, Resolve (com.sun.tools.javac.comp)\r\nselectSym:4412, Attr (com.sun.tools.javac.comp)\r\nvisitSelect:4297, Attr (com.sun.tools.javac.comp)\r\naccept:2450, JCTree$JCFieldAccess (com.sun.tools.javac.tree)\r\nattribTree:677, Attr (com.sun.tools.javac.comp)\r\nattribType:743, Attr (com.sun.tools.javac.comp)\r\nattribType:736, Attr (com.sun.tools.javac.comp)\r\nattribImportType:447, TypeEnter$ImportsPhase (com.sun.tools.javac.comp)\r\ndoImport:430, TypeEnter$ImportsPhase (com.sun.tools.javac.comp)\r\nresolveImports:370, TypeEnter$ImportsPhase (com.sun.tools.javac.comp)\r\nrunPhase:327, TypeEnter$ImportsPhase (com.sun.tools.javac.comp)\r\ndoCompleteEnvs:288, TypeEnter$Phase (com.sun.tools.javac.comp)\r\ncompleteEnvs:257, TypeEnter$Phase (com.sun.tools.javac.comp)\r\ncomplete:204, TypeEnter (com.sun.tools.javac.comp)\r\ncomplete:682, Symbol (com.sun.tools.javac.code)\r\ncomplete:1410, Symbol$ClassSymbol (com.sun.tools.javac.code)\r\nflags:1331, Symbol$ClassSymbol (com.sun.tools.javac.code)\r\nisAccessible:327, Resolve (com.sun.tools.javac.comp)\r\nisAccessible:310, Resolve (com.sun.tools.javac.comp)\r\nloadClass:2053, Resolve (com.sun.tools.javac.comp)\r\nfindGlobalType:2299, Resolve (com.sun.tools.javac.comp)\r\nfindType:2373, Resolve (com.sun.tools.javac.comp)\r\nfindIdentInternal:2416, Resolve (com.sun.tools.javac.comp)\r\nfindIdent:2402, Resolve (com.sun.tools.javac.comp)\r\nresolveIdent:2685, Resolve (com.sun.tools.javac.comp)\r\nvisitIdent:4184, Attr (com.sun.tools.javac.comp)\r\naccept:2584, JCTree$JCIdent (com.sun.tools.javac.tree)\r\nattribTree:677, Attr (com.sun.tools.javac.comp)\r\nattribType:743, Attr (com.sun.tools.javac.comp)\r\nattribType:736, Attr (com.sun.tools.javac.comp)\r\nsignature:116, MemberEnter (com.sun.tools.javac.comp)\r\nvisitMethodDef:193, MemberEnter (com.sun.tools.javac.comp)\r\naccept:921, JCTree$JCMethodDecl (com.sun.tools.javac.tree)\r\nmemberEnter:163, MemberEnter (com.sun.tools.javac.comp)\r\nmemberEnter:175, MemberEnter (com.sun.tools.javac.comp)\r\nfinishClass:1075, TypeEnter$MembersPhase (com.sun.tools.javac.comp)\r\nrunPhase:1019, TypeEnter$MembersPhase (com.sun.tools.javac.comp)\r\ndoCompleteEnvs:288, TypeEnter$Phase (com.sun.tools.javac.comp)\r\ndoCompleteEnvs:928, TypeEnter$AbstractMembersPhase (com.sun.tools.javac.comp)\r\ncompleteEnvs:257, TypeEnter$Phase (com.sun.tools.javac.comp)\r\ncompleteEnvs:272, TypeEnter$Phase (com.sun.tools.javac.comp)\r\ncompleteEnvs:272, TypeEnter$Phase (com.sun.tools.javac.comp)\r\ncompleteEnvs:272, TypeEnter$Phase (com.sun.tools.javac.comp)\r\ncompleteEnvs:272, TypeEnter$Phase (com.sun.tools.javac.comp)\r\ncompleteEnvs:272, TypeEnter$Phase (com.sun.tools.javac.comp)\r\ncomplete:204, TypeEnter (com.sun.tools.javac.comp)\r\ncomplete:682, Symbol (com.sun.tools.javac.code)\r\ncomplete:1410, Symbol$ClassSymbol (com.sun.tools.javac.code)\r\ncomplete:610, Enter (com.sun.tools.javac.comp)\r\nmain:587, Enter (com.sun.tools.javac.comp)\r\nenterTrees:1042, JavaCompiler (com.sun.tools.javac.main)\r\ncompile:917, JavaCompiler (com.sun.tools.javac.main)\r\nlambda$doCall$0:104, JavacTaskImpl (com.sun.tools.javac.api)\r\ncall:-1, JavacTaskImpl$$Lambda$89/0x00000008012368e0 (com.sun.tools.javac.api)\r\ninvocationHelper:152, JavacTaskImpl (com.sun.tools.javac.api)\r\ndoCall:100, JavacTaskImpl (com.sun.tools.javac.api)\r\ncall:94, JavacTaskImpl (com.sun.tools.javac.api)\r\ncompileInProcess:136, JavaxToolsCompiler (org.codehaus.plexus.compiler.javac)\r\nperformCompile:182, JavacCompiler (org.codehaus.plexus.compiler.javac)\r\nexecute:1209, AbstractCompilerMojo (org.apache.maven.plugin.compiler)\r\nexecute:198, CompilerMojo (org.apache.maven.plugin.compiler)\r\nexecuteMojo:137, DefaultBuildPluginManager (org.apache.maven.plugin)\r\ndoExecute2:370, MojoExecutor (org.apache.maven.lifecycle.internal)\r\ndoExecute:351, MojoExecutor (org.apache.maven.lifecycle.internal)\r\nexecute:215, MojoExecutor (org.apache.maven.lifecycle.internal)\r\nexecute:171, MojoExecutor (org.apache.maven.lifecycle.internal)\r\nexecute:163, MojoExecutor (org.apache.maven.lifecycle.internal)\r\nbuildProject:117, LifecycleModuleBuilder (org.apache.maven.lifecycle.internal)\r\nbuildProject:81, LifecycleModuleBuilder (org.apache.maven.lifecycle.internal)\r\nbuild:56, SingleThreadedBuilder (org.apache.maven.lifecycle.internal.builder.singlethreaded)\r\nexecute:128, LifecycleStarter (org.apache.maven.lifecycle.internal)\r\ndoExecute:294, DefaultMaven (org.apache.maven)\r\ndoExecute:192, DefaultMaven (org.apache.maven)\r\nexecute:105, DefaultMaven (org.apache.maven)\r\nexecute:960, MavenCli (org.apache.maven.cli)\r\ndoMain:293, MavenCli (org.apache.maven.cli)\r\nmain:196, MavenCli (org.apache.maven.cli)\r\ninvoke0:-1, NativeMethodAccessorImpl (jdk.internal.reflect)\r\ninvoke:77, NativeMethodAccessorImpl (jdk.internal.reflect)\r\ninvoke:43, DelegatingMethodAccessorImpl (jdk.internal.reflect)\r\ninvoke:568, Method (java.lang.reflect)\r\nlaunchEnhanced:282, Launcher (org.codehaus.plexus.classworlds.launcher)\r\nlaunch:225, Launcher (org.codehaus.plexus.classworlds.launcher)\r\nmainWithExitCode:406, Launcher (org.codehaus.plexus.classworlds.launcher)\r\nmain:347, Launcher (org.codehaus.plexus.classworlds.launcher)\r\n```\r\n\r\nThe second one is set by the annotation processor while reading generated code\r\n\r\n```\r\ngetRecordComponent:1524, Symbol$ClassSymbol (com.sun.tools.javac.code)\r\nrunPhase:968, TypeEnter$RecordPhase (com.sun.tools.javac.comp)\r\ndoCompleteEnvs:288, TypeEnter$Phase (com.sun.tools.javac.comp)\r\ndoCompleteEnvs:928, TypeEnter$AbstractMembersPhase (com.sun.tools.javac.comp)\r\ncompleteEnvs:257, TypeEnter$Phase (com.sun.tools.javac.comp)\r\ncompleteEnvs:272, TypeEnter$Phase (com.sun.tools.javac.comp)\r\ncompleteEnvs:272, TypeEnter$Phase (com.sun.tools.javac.comp)\r\ncompleteEnvs:272, TypeEnter$Phase (com.sun.tools.javac.comp)\r\ncompleteEnvs:272, TypeEnter$Phase (com.sun.tools.javac.comp)\r\ncomplete:204, TypeEnter (com.sun.tools.javac.comp)\r\ncomplete:682, Symbol (com.sun.tools.javac.code)\r\ncomplete:1410, Symbol$ClassSymbol (com.sun.tools.javac.code)\r\ncomplete:610, Enter (com.sun.tools.javac.comp)\r\nmain:587, Enter (com.sun.tools.javac.comp)\r\nenterTrees:1042, JavaCompiler (com.sun.tools.javac.main)\r\nenterTrees:1247, JavacProcessingEnvironment$Round (com.sun.tools.javac.processing)\r\n&lt;init&gt;:1133, JavacProcessingEnvironment$Round (com.sun.tools.javac.processing)\r\nnext:1153, JavacProcessingEnvironment$Round (com.sun.tools.javac.processing)\r\ndoProcessing:1393, JavacProcessingEnvironment (com.sun.tools.javac.processing)\r\nprocessAnnotations:1234, JavaCompiler (com.sun.tools.javac.main)\r\ncompile:916, JavaCompiler (com.sun.tools.javac.main)\r\nlambda$doCall$0:104, JavacTaskImpl (com.sun.tools.javac.api)\r\ncall:-1, JavacTaskImpl$$Lambda$89/0x00000008012368e0 (com.sun.tools.javac.api)\r\ninvocationHelper:152, JavacTaskImpl (com.sun.tools.javac.api)\r\ndoCall:100, JavacTaskImpl (com.sun.tools.javac.api)\r\ncall:94, JavacTaskImpl (com.sun.tools.javac.api)\r\ncompileInProcess:136, JavaxToolsCompiler (org.codehaus.plexus.compiler.javac)\r\nperformCompile:182, JavacCompiler (org.codehaus.plexus.compiler.javac)\r\nexecute:1209, AbstractCompilerMojo (org.apache.maven.plugin.compiler)\r\nexecute:198, CompilerMojo (org.apache.maven.plugin.compiler)\r\nexecuteMojo:137, DefaultBuildPluginManager (org.apache.maven.plugin)\r\ndoExecute2:370, MojoExecutor (org.apache.maven.lifecycle.internal)\r\ndoExecute:351, MojoExecutor (org.apache.maven.lifecycle.internal)\r\nexecute:215, MojoExecutor (org.apache.maven.lifecycle.internal)\r\nexecute:171, MojoExecutor (org.apache.maven.lifecycle.internal)\r\nexecute:163, MojoExecutor (org.apache.maven.lifecycle.internal)\r\nbuildProject:117, LifecycleModuleBuilder (org.apache.maven.lifecycle.internal)\r\nbuildProject:81, LifecycleModuleBuilder (org.apache.maven.lifecycle.internal)\r\nbuild:56, SingleThreadedBuilder (org.apache.maven.lifecycle.internal.builder.singlethreaded)\r\nexecute:128, LifecycleStarter (org.apache.maven.lifecycle.internal)\r\ndoExecute:294, DefaultMaven (org.apache.maven)\r\ndoExecute:192, DefaultMaven (org.apache.maven)\r\nexecute:105, DefaultMaven (org.apache.maven)\r\nexecute:960, MavenCli (org.apache.maven.cli)\r\ndoMain:293, MavenCli (org.apache.maven.cli)\r\nmain:196, MavenCli (org.apache.maven.cli)\r\ninvoke0:-1, NativeMethodAccessorImpl (jdk.internal.reflect)\r\ninvoke:77, NativeMethodAccessorImpl (jdk.internal.reflect)\r\ninvoke:43, DelegatingMethodAccessorImpl (jdk.internal.reflect)\r\ninvoke:568, Method (java.lang.reflect)\r\nlaunchEnhanced:282, Launcher (org.codehaus.plexus.classworlds.launcher)\r\nlaunch:225, Launcher (org.codehaus.plexus.classworlds.launcher)\r\nmainWithExitCode:406, Launcher (org.codehaus.plexus.classworlds.launcher)\r\nmain:347, Launcher (org.codehaus.plexus.classworlds.launcher)\r\n```\r\n\r\n`Symbol#getRecordCompoment` has some logic to avoid duplicate components\r\n\r\n```java\r\n       public RecordComponent getRecordComponent(JCVariableDecl var, boolean addIfMissing, List&lt;JCAnnotation&gt; annotations) {\r\n            RecordComponent toRemove = null;\r\n            for (RecordComponent rc : recordComponents) {\r\n                /* it could be that a record erroneously declares two record components with the same name, in that\r\n                 * case we need to use the position to disambiguate\r\n                 */\r\n                if (rc.name == var.name &amp;&amp; var.pos == rc.pos) {\r\n                    if (rc.type.hasTag(TypeTag.ERROR) &amp;&amp; !var.sym.type.hasTag(TypeTag.ERROR)) {\r\n                        // Found a record component with an erroneous type: save it so that it can be removed later.\r\n                        // If the class type of the record component is generated by annotation processor, it should\r\n                        // use the new actual class type and symbol instead of the old dummy ErrorType.\r\n                        toRemove = rc;\r\n                    } else {\r\n                        // Found a good record component: just return.\r\n                        return rc;\r\n                    }\r\n                }\r\n            }\r\n            RecordComponent rc = null;\r\n            if (toRemove != null) {\r\n                // Found a record component with an erroneous type: remove it and create a new one\r\n                recordComponents = List.filter(recordComponents, toRemove);\r\n                recordComponents = recordComponents.append(rc = new RecordComponent(var.sym, annotations));\r\n            } else if (addIfMissing) {\r\n                // Didn&#39;t find the record component: create one.\r\n                recordComponents = recordComponents.append(rc = new RecordComponent(var.sym, annotations));\r\n            }\r\n            return rc;\r\n        }\r\n``` \r\n\r\nWe can see that de-duplication is done by name AND position. However, position reported from class file and source parsing differs; leading to two entries. And even more bizarre, a record component with a null accessor.\r\n\r\n1. Is it expected that `TypeElement#getRecordComponents` returns two record component entries for the same record component? \r\n2. Is it expected that `RecordComponent#getAccessor` returns null?\r\n3. Is it a JDK bug or should the annotation processor ignore RecordComponents with no accessor? \r\n\r\nNotes:\r\n\r\n* TypeElement&#39;s Javadoc is unclear to me.\r\n* Java 17.0.5, 19.0.2, 21.ea.7 behave the same way.\r\n* I think it is related to the interface defining what is an accessor to the record. Running `javap -v` on the record shows `Record:\\n  int maxConcurrency;\r\n    \\n\\ndescriptor: I`\r\n* Providing a reproducer is doable but requires some efforts. I think that knowlegeable persons are unlikely to require a working repoducer to explain the behavior. \r\n\r\nUpdate 1: Published a reproducer here: https://github.com/cykl/record-builder-139-reproducer\r\n","title":"record-builder: TypeElement.getRecordComponents() returns duplicated record component (one without accessor)","body":"<p>While trying to troubleshoot &amp; fix <a href=\"https://github.com/Randgalt/record-builder/issues/139\" rel=\"nofollow noreferrer\">this issue</a> from record-builder (a Java annotation processor), I observed that <code>TypeElement.getRecordComponents()</code> returns two entries for the same record component. I'm trying to understand if this behavior is expected from the JDK or a bug.</p>\n<p>record-builder has a feature allowing you to generate a record from an interface. Following interface definition</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RecordInterface\ninterface Conf {\n\n    int maxConcurrency( );\n}\n</code></pre>\n<p>generates following code</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Generated(&quot;io.soabase.recordbuilder.core.RecordInterface&quot;)\n@RecordBuilder\npublic record ConfRecord(int maxConcurrency) implements Conf, ConfRecordBuilder.With {}\n</code></pre>\n<p>I was able to observe that when <code>ConfRecord</code> class file already exists on disk; <code>TypeElement.getRecordComponents()</code> returns two <code>maxConcurrency</code> entries. One with (name: maxConcurrency, pos: 1, accessor: null), and another one with (name: maxConcurrency, pos: 387, accessor: &lt;value&gt;)</p>\n<p>The first entry is set from <code>setRecordComponents</code> when existing class file is parsed (triggered by an import statement).</p>\n<pre><code>setRecordComponents:1542, Symbol$ClassSymbol (com.sun.tools.javac.code)\nread:1224, ClassReader$26 (com.sun.tools.javac.jvm)\nreadAttrs:1373, ClassReader (com.sun.tools.javac.jvm)\nreadClassAttrs:1387, ClassReader (com.sun.tools.javac.jvm)\nreadClass:2527, ClassReader (com.sun.tools.javac.jvm)\nreadClassBuffer:2644, ClassReader (com.sun.tools.javac.jvm)\nreadClassFile:2658, ClassReader (com.sun.tools.javac.jvm)\nfillIn:361, ClassFinder (com.sun.tools.javac.code)\ncomplete:291, ClassFinder (com.sun.tools.javac.code)\ncomplete:-1, ClassFinder$$Lambda$95/0x0000000801254af8 (com.sun.tools.javac.code)\ncomplete:682, Symbol (com.sun.tools.javac.code)\ncomplete:1410, Symbol$ClassSymbol (com.sun.tools.javac.code)\nloadClass:434, ClassFinder (com.sun.tools.javac.code)\nloadClass:2052, Resolve (com.sun.tools.javac.comp)\nfindIdentInPackageInternal:2450, Resolve (com.sun.tools.javac.comp)\nfindIdentInPackage:2438, Resolve (com.sun.tools.javac.comp)\nselectSym:4412, Attr (com.sun.tools.javac.comp)\nvisitSelect:4297, Attr (com.sun.tools.javac.comp)\naccept:2450, JCTree$JCFieldAccess (com.sun.tools.javac.tree)\nattribTree:677, Attr (com.sun.tools.javac.comp)\nattribType:743, Attr (com.sun.tools.javac.comp)\nattribType:736, Attr (com.sun.tools.javac.comp)\nattribImportType:447, TypeEnter$ImportsPhase (com.sun.tools.javac.comp)\ndoImport:430, TypeEnter$ImportsPhase (com.sun.tools.javac.comp)\nresolveImports:370, TypeEnter$ImportsPhase (com.sun.tools.javac.comp)\nrunPhase:327, TypeEnter$ImportsPhase (com.sun.tools.javac.comp)\ndoCompleteEnvs:288, TypeEnter$Phase (com.sun.tools.javac.comp)\ncompleteEnvs:257, TypeEnter$Phase (com.sun.tools.javac.comp)\ncomplete:204, TypeEnter (com.sun.tools.javac.comp)\ncomplete:682, Symbol (com.sun.tools.javac.code)\ncomplete:1410, Symbol$ClassSymbol (com.sun.tools.javac.code)\nflags:1331, Symbol$ClassSymbol (com.sun.tools.javac.code)\nisAccessible:327, Resolve (com.sun.tools.javac.comp)\nisAccessible:310, Resolve (com.sun.tools.javac.comp)\nloadClass:2053, Resolve (com.sun.tools.javac.comp)\nfindGlobalType:2299, Resolve (com.sun.tools.javac.comp)\nfindType:2373, Resolve (com.sun.tools.javac.comp)\nfindIdentInternal:2416, Resolve (com.sun.tools.javac.comp)\nfindIdent:2402, Resolve (com.sun.tools.javac.comp)\nresolveIdent:2685, Resolve (com.sun.tools.javac.comp)\nvisitIdent:4184, Attr (com.sun.tools.javac.comp)\naccept:2584, JCTree$JCIdent (com.sun.tools.javac.tree)\nattribTree:677, Attr (com.sun.tools.javac.comp)\nattribType:743, Attr (com.sun.tools.javac.comp)\nattribType:736, Attr (com.sun.tools.javac.comp)\nsignature:116, MemberEnter (com.sun.tools.javac.comp)\nvisitMethodDef:193, MemberEnter (com.sun.tools.javac.comp)\naccept:921, JCTree$JCMethodDecl (com.sun.tools.javac.tree)\nmemberEnter:163, MemberEnter (com.sun.tools.javac.comp)\nmemberEnter:175, MemberEnter (com.sun.tools.javac.comp)\nfinishClass:1075, TypeEnter$MembersPhase (com.sun.tools.javac.comp)\nrunPhase:1019, TypeEnter$MembersPhase (com.sun.tools.javac.comp)\ndoCompleteEnvs:288, TypeEnter$Phase (com.sun.tools.javac.comp)\ndoCompleteEnvs:928, TypeEnter$AbstractMembersPhase (com.sun.tools.javac.comp)\ncompleteEnvs:257, TypeEnter$Phase (com.sun.tools.javac.comp)\ncompleteEnvs:272, TypeEnter$Phase (com.sun.tools.javac.comp)\ncompleteEnvs:272, TypeEnter$Phase (com.sun.tools.javac.comp)\ncompleteEnvs:272, TypeEnter$Phase (com.sun.tools.javac.comp)\ncompleteEnvs:272, TypeEnter$Phase (com.sun.tools.javac.comp)\ncompleteEnvs:272, TypeEnter$Phase (com.sun.tools.javac.comp)\ncomplete:204, TypeEnter (com.sun.tools.javac.comp)\ncomplete:682, Symbol (com.sun.tools.javac.code)\ncomplete:1410, Symbol$ClassSymbol (com.sun.tools.javac.code)\ncomplete:610, Enter (com.sun.tools.javac.comp)\nmain:587, Enter (com.sun.tools.javac.comp)\nenterTrees:1042, JavaCompiler (com.sun.tools.javac.main)\ncompile:917, JavaCompiler (com.sun.tools.javac.main)\nlambda$doCall$0:104, JavacTaskImpl (com.sun.tools.javac.api)\ncall:-1, JavacTaskImpl$$Lambda$89/0x00000008012368e0 (com.sun.tools.javac.api)\ninvocationHelper:152, JavacTaskImpl (com.sun.tools.javac.api)\ndoCall:100, JavacTaskImpl (com.sun.tools.javac.api)\ncall:94, JavacTaskImpl (com.sun.tools.javac.api)\ncompileInProcess:136, JavaxToolsCompiler (org.codehaus.plexus.compiler.javac)\nperformCompile:182, JavacCompiler (org.codehaus.plexus.compiler.javac)\nexecute:1209, AbstractCompilerMojo (org.apache.maven.plugin.compiler)\nexecute:198, CompilerMojo (org.apache.maven.plugin.compiler)\nexecuteMojo:137, DefaultBuildPluginManager (org.apache.maven.plugin)\ndoExecute2:370, MojoExecutor (org.apache.maven.lifecycle.internal)\ndoExecute:351, MojoExecutor (org.apache.maven.lifecycle.internal)\nexecute:215, MojoExecutor (org.apache.maven.lifecycle.internal)\nexecute:171, MojoExecutor (org.apache.maven.lifecycle.internal)\nexecute:163, MojoExecutor (org.apache.maven.lifecycle.internal)\nbuildProject:117, LifecycleModuleBuilder (org.apache.maven.lifecycle.internal)\nbuildProject:81, LifecycleModuleBuilder (org.apache.maven.lifecycle.internal)\nbuild:56, SingleThreadedBuilder (org.apache.maven.lifecycle.internal.builder.singlethreaded)\nexecute:128, LifecycleStarter (org.apache.maven.lifecycle.internal)\ndoExecute:294, DefaultMaven (org.apache.maven)\ndoExecute:192, DefaultMaven (org.apache.maven)\nexecute:105, DefaultMaven (org.apache.maven)\nexecute:960, MavenCli (org.apache.maven.cli)\ndoMain:293, MavenCli (org.apache.maven.cli)\nmain:196, MavenCli (org.apache.maven.cli)\ninvoke0:-1, NativeMethodAccessorImpl (jdk.internal.reflect)\ninvoke:77, NativeMethodAccessorImpl (jdk.internal.reflect)\ninvoke:43, DelegatingMethodAccessorImpl (jdk.internal.reflect)\ninvoke:568, Method (java.lang.reflect)\nlaunchEnhanced:282, Launcher (org.codehaus.plexus.classworlds.launcher)\nlaunch:225, Launcher (org.codehaus.plexus.classworlds.launcher)\nmainWithExitCode:406, Launcher (org.codehaus.plexus.classworlds.launcher)\nmain:347, Launcher (org.codehaus.plexus.classworlds.launcher)\n</code></pre>\n<p>The second one is set by the annotation processor while reading generated code</p>\n<pre><code>getRecordComponent:1524, Symbol$ClassSymbol (com.sun.tools.javac.code)\nrunPhase:968, TypeEnter$RecordPhase (com.sun.tools.javac.comp)\ndoCompleteEnvs:288, TypeEnter$Phase (com.sun.tools.javac.comp)\ndoCompleteEnvs:928, TypeEnter$AbstractMembersPhase (com.sun.tools.javac.comp)\ncompleteEnvs:257, TypeEnter$Phase (com.sun.tools.javac.comp)\ncompleteEnvs:272, TypeEnter$Phase (com.sun.tools.javac.comp)\ncompleteEnvs:272, TypeEnter$Phase (com.sun.tools.javac.comp)\ncompleteEnvs:272, TypeEnter$Phase (com.sun.tools.javac.comp)\ncompleteEnvs:272, TypeEnter$Phase (com.sun.tools.javac.comp)\ncomplete:204, TypeEnter (com.sun.tools.javac.comp)\ncomplete:682, Symbol (com.sun.tools.javac.code)\ncomplete:1410, Symbol$ClassSymbol (com.sun.tools.javac.code)\ncomplete:610, Enter (com.sun.tools.javac.comp)\nmain:587, Enter (com.sun.tools.javac.comp)\nenterTrees:1042, JavaCompiler (com.sun.tools.javac.main)\nenterTrees:1247, JavacProcessingEnvironment$Round (com.sun.tools.javac.processing)\n&lt;init&gt;:1133, JavacProcessingEnvironment$Round (com.sun.tools.javac.processing)\nnext:1153, JavacProcessingEnvironment$Round (com.sun.tools.javac.processing)\ndoProcessing:1393, JavacProcessingEnvironment (com.sun.tools.javac.processing)\nprocessAnnotations:1234, JavaCompiler (com.sun.tools.javac.main)\ncompile:916, JavaCompiler (com.sun.tools.javac.main)\nlambda$doCall$0:104, JavacTaskImpl (com.sun.tools.javac.api)\ncall:-1, JavacTaskImpl$$Lambda$89/0x00000008012368e0 (com.sun.tools.javac.api)\ninvocationHelper:152, JavacTaskImpl (com.sun.tools.javac.api)\ndoCall:100, JavacTaskImpl (com.sun.tools.javac.api)\ncall:94, JavacTaskImpl (com.sun.tools.javac.api)\ncompileInProcess:136, JavaxToolsCompiler (org.codehaus.plexus.compiler.javac)\nperformCompile:182, JavacCompiler (org.codehaus.plexus.compiler.javac)\nexecute:1209, AbstractCompilerMojo (org.apache.maven.plugin.compiler)\nexecute:198, CompilerMojo (org.apache.maven.plugin.compiler)\nexecuteMojo:137, DefaultBuildPluginManager (org.apache.maven.plugin)\ndoExecute2:370, MojoExecutor (org.apache.maven.lifecycle.internal)\ndoExecute:351, MojoExecutor (org.apache.maven.lifecycle.internal)\nexecute:215, MojoExecutor (org.apache.maven.lifecycle.internal)\nexecute:171, MojoExecutor (org.apache.maven.lifecycle.internal)\nexecute:163, MojoExecutor (org.apache.maven.lifecycle.internal)\nbuildProject:117, LifecycleModuleBuilder (org.apache.maven.lifecycle.internal)\nbuildProject:81, LifecycleModuleBuilder (org.apache.maven.lifecycle.internal)\nbuild:56, SingleThreadedBuilder (org.apache.maven.lifecycle.internal.builder.singlethreaded)\nexecute:128, LifecycleStarter (org.apache.maven.lifecycle.internal)\ndoExecute:294, DefaultMaven (org.apache.maven)\ndoExecute:192, DefaultMaven (org.apache.maven)\nexecute:105, DefaultMaven (org.apache.maven)\nexecute:960, MavenCli (org.apache.maven.cli)\ndoMain:293, MavenCli (org.apache.maven.cli)\nmain:196, MavenCli (org.apache.maven.cli)\ninvoke0:-1, NativeMethodAccessorImpl (jdk.internal.reflect)\ninvoke:77, NativeMethodAccessorImpl (jdk.internal.reflect)\ninvoke:43, DelegatingMethodAccessorImpl (jdk.internal.reflect)\ninvoke:568, Method (java.lang.reflect)\nlaunchEnhanced:282, Launcher (org.codehaus.plexus.classworlds.launcher)\nlaunch:225, Launcher (org.codehaus.plexus.classworlds.launcher)\nmainWithExitCode:406, Launcher (org.codehaus.plexus.classworlds.launcher)\nmain:347, Launcher (org.codehaus.plexus.classworlds.launcher)\n</code></pre>\n<p><code>Symbol#getRecordCompoment</code> has some logic to avoid duplicate components</p>\n<pre class=\"lang-java prettyprint-override\"><code>       public RecordComponent getRecordComponent(JCVariableDecl var, boolean addIfMissing, List&lt;JCAnnotation&gt; annotations) {\n            RecordComponent toRemove = null;\n            for (RecordComponent rc : recordComponents) {\n                /* it could be that a record erroneously declares two record components with the same name, in that\n                 * case we need to use the position to disambiguate\n                 */\n                if (rc.name == var.name &amp;&amp; var.pos == rc.pos) {\n                    if (rc.type.hasTag(TypeTag.ERROR) &amp;&amp; !var.sym.type.hasTag(TypeTag.ERROR)) {\n                        // Found a record component with an erroneous type: save it so that it can be removed later.\n                        // If the class type of the record component is generated by annotation processor, it should\n                        // use the new actual class type and symbol instead of the old dummy ErrorType.\n                        toRemove = rc;\n                    } else {\n                        // Found a good record component: just return.\n                        return rc;\n                    }\n                }\n            }\n            RecordComponent rc = null;\n            if (toRemove != null) {\n                // Found a record component with an erroneous type: remove it and create a new one\n                recordComponents = List.filter(recordComponents, toRemove);\n                recordComponents = recordComponents.append(rc = new RecordComponent(var.sym, annotations));\n            } else if (addIfMissing) {\n                // Didn't find the record component: create one.\n                recordComponents = recordComponents.append(rc = new RecordComponent(var.sym, annotations));\n            }\n            return rc;\n        }\n</code></pre>\n<p>We can see that de-duplication is done by name AND position. However, position reported from class file and source parsing differs; leading to two entries. And even more bizarre, a record component with a null accessor.</p>\n<ol>\n<li>Is it expected that <code>TypeElement#getRecordComponents</code> returns two record component entries for the same record component?</li>\n<li>Is it expected that <code>RecordComponent#getAccessor</code> returns null?</li>\n<li>Is it a JDK bug or should the annotation processor ignore RecordComponents with no accessor?</li>\n</ol>\n<p>Notes:</p>\n<ul>\n<li>TypeElement's Javadoc is unclear to me.</li>\n<li>Java 17.0.5, 19.0.2, 21.ea.7 behave the same way.</li>\n<li>I think it is related to the interface defining what is an accessor to the record. Running <code>javap -v</code> on the record shows <code>Record:\\n  int maxConcurrency; \\n\\ndescriptor: I</code></li>\n<li>Providing a reproducer is doable but requires some efforts. I think that knowlegeable persons are unlikely to require a working repoducer to explain the behavior.</li>\n</ul>\n<p>Update 1: Published a reproducer here: <a href=\"https://github.com/cykl/record-builder-139-reproducer\" rel=\"nofollow noreferrer\">https://github.com/cykl/record-builder-139-reproducer</a></p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":7495697,"reputation":1501,"user_id":5696047,"display_name":"jayesh gurudayalani"},"score":0,"creation_date":1675186833,"post_id":75300895,"comment_id":132873081,"body_markdown":"if you want to have current date object then you can simply take it like ```new Date()``` instead of ```Time.from(Instant.now())```\n\nFYI , regarding timezone of date object then you can refer this answer \n\nhttps://stackoverflow.com/a/308689/5696047","body":"if you want to have current date object then you can simply take it like <code>new Date()</code> instead of <code>Time.from(Instant.now())</code>  FYI , regarding timezone of date object then you can refer this answer   <a href=\"https://stackoverflow.com/a/308689/5696047\">stackoverflow.com/a/308689/5696047</a>"}],"owner":{"account_id":18110309,"reputation":13,"user_id":13167397,"display_name":"Fazza Bajwa"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675186249,"creation_date":1675186249,"question_id":75300895,"body_markdown":"I am attempting to create an app using android studio and when trying to run the app I seem to have an issue with one of the fields for my database. \r\n\r\n     public void setTime(){\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n                this.time = Time.from(Instant.now());\r\n            }\r\n     }\r\n         \r\n\r\nI keep getting error: Cannot find setter for field. private Date time;\r\nIf i remove the if statement about build version I get the same issue but android studio also underlines the this.time = Time.from(Instant.now()); statement and advises me to surround it with the if statement. How do I fix this?","title":"Issue with &#39;cannot find setter error&#39; with a date field","body":"<p>I am attempting to create an app using android studio and when trying to run the app I seem to have an issue with one of the fields for my database.</p>\n<pre><code> public void setTime(){\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n            this.time = Time.from(Instant.now());\n        }\n }\n     \n</code></pre>\n<p>I keep getting error: Cannot find setter for field. private Date time;\nIf i remove the if statement about build version I get the same issue but android studio also underlines the this.time = Time.from(Instant.now()); statement and advises me to surround it with the if statement. How do I fix this?</p>\n"},{"tags":["java","android","android-snackbar"],"answers":[{"tags":[],"owner":{"account_id":12977606,"reputation":71,"user_id":9381163,"display_name":"Anshul Khattar"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1667322136,"creation_date":1667322136,"answer_id":74279343,"question_id":74251521,"body_markdown":"You can access the snacker textview by doing - \r\n\r\n     val textView =\r\n                    sbView.findViewById&lt;TextView&gt;(R.id.snackbar_text)\r\n\r\nThen set whatever properties you want, to this textview","title":"How to format the text of a Snackbar in Android","body":"<p>You can access the snacker textview by doing -</p>\n<pre><code> val textView =\n                sbView.findViewById&lt;TextView&gt;(R.id.snackbar_text)\n</code></pre>\n<p>Then set whatever properties you want, to this textview</p>\n"}],"owner":{"account_id":13060317,"reputation":580,"user_id":9437740,"display_name":"VanessaF"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":281,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74279343,"answer_count":1,"score":0,"last_activity_date":1675186238,"creation_date":1667118345,"question_id":74251521,"body_markdown":"I have a method that displays snackbars which is called from many different fragments. Here is the code of this method:\r\n\r\n    public static void showSnackBar(Activity activity, String message, View root) {\r\n    \r\n        int duration = 5000;\r\n        Snackbar currentSnackBar = Snackbar.make( activity, root, message, Snackbar.LENGTH_INDEFINITE).setDuration(duration);\r\n    \r\n        View sbView = currentSnackBar.getView();\r\n        sbView.setBackgroundColor(ContextCompat.getColor(activity, R.color.colorBlue));\r\n\r\n        FrameLayout.LayoutParams params =(FrameLayout.LayoutParams)sbView.getLayoutParams();\r\n        params.gravity = Gravity.TOP | Gravity.CENTER_HORIZONTAL;\r\n    \r\n        sbView.setLayoutParams(params);\r\n        currentSnackBar.setAnimationMode(BaseTransientBottomBar.ANIMATION_MODE_FADE);\r\n        currentSnackBar.show();\r\n    }\r\n\r\nCurrently it shows the snackbar at the top center of the display. I would like to have the following formatting modifications:\r\n\r\n1. The textsize should be bigger\r\n2. The text should be aligned in the center. At the moment it is aligned to the left.\r\n\r\n**Reminder**: do you know how I can do this?","title":"How to format the text of a Snackbar in Android","body":"<p>I have a method that displays snackbars which is called from many different fragments. Here is the code of this method:</p>\n<pre><code>public static void showSnackBar(Activity activity, String message, View root) {\n\n    int duration = 5000;\n    Snackbar currentSnackBar = Snackbar.make( activity, root, message, Snackbar.LENGTH_INDEFINITE).setDuration(duration);\n\n    View sbView = currentSnackBar.getView();\n    sbView.setBackgroundColor(ContextCompat.getColor(activity, R.color.colorBlue));\n\n    FrameLayout.LayoutParams params =(FrameLayout.LayoutParams)sbView.getLayoutParams();\n    params.gravity = Gravity.TOP | Gravity.CENTER_HORIZONTAL;\n\n    sbView.setLayoutParams(params);\n    currentSnackBar.setAnimationMode(BaseTransientBottomBar.ANIMATION_MODE_FADE);\n    currentSnackBar.show();\n}\n</code></pre>\n<p>Currently it shows the snackbar at the top center of the display. I would like to have the following formatting modifications:</p>\n<ol>\n<li>The textsize should be bigger</li>\n<li>The text should be aligned in the center. At the moment it is aligned to the left.</li>\n</ol>\n<p><strong>Reminder</strong>: do you know how I can do this?</p>\n"},{"tags":["java","spring-boot","lombok","default-value"],"comments":[{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1675177651,"post_id":75298926,"comment_id":132869838,"body_markdown":"&quot;Any alternative?&quot; No, put it on every field.","body":"&quot;Any alternative?&quot; No, put it on every field."},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1675177742,"post_id":75298926,"comment_id":132869882,"body_markdown":"Please ask 1 question per question. I edited out the second one. You can ask separately about that","body":"Please ask 1 question per question. I edited out the second one. You can ask separately about that"}],"answers":[{"tags":[],"owner":{"account_id":14429973,"reputation":2483,"user_id":10423604,"display_name":"Volodya Lombrozo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675186106,"creation_date":1675186106,"answer_id":75300876,"question_id":75298926,"body_markdown":"As [Michael](https://stackoverflow.com/users/1898563/michael) pointed out, you don&#39;t have many other options. If you&#39;ve added the `@Builder` annotation, you must use `@Builder.Default` for each field in order to utilize the fluent builder API.\r\n```java\r\n@Data\r\n@Builder\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@EqualsAndHashCode(callSuper = true)\r\npublic class Audi extends Car {\r\n\r\n    private String name;\r\n    private String headquarter;\r\n    @Builder.Default\r\n    private BigDecimal revenue = BigDecimal.ZERO;\r\n    @Builder.Default\r\n    private BigDecimal totalAssets = BigDecimal.ZERO;\r\n}\r\n\r\n```\r\nUsage:\r\n```java\r\nAudi audi = Audi.builder()\r\n    .name(&quot;Audi A3&quot;)\r\n    .headquarter(&quot;Germany&quot;)\r\n    .build();\r\nSystem.out.println(audi);\r\n```\r\nOutput:\r\n```\r\nAudi(name=Audi A3, headquarter=Germany, revenue=0, totalAssets=0)\r\n```\r\n\r\nIf builder functionality is not needed, objects can be instantiated in the traditional `Java` way using a constructor. However, in this case, the `@Builder` annotation should be removed and default values must be set directly in the constructor or during declaration.\r\n\r\n```java\r\n@Data\r\n@NoArgsConstructor\r\n@RequiredArgsConstructor\r\n@EqualsAndHashCode(callSuper = true)\r\npublic class Audi extends Car {\r\n    @NonNull\r\n    private String name;\r\n    @NonNull\r\n    private String headquarter;\r\n    private BigDecimal revenue = BigDecimal.ZERO;\r\n    private BigDecimal totalAssets = BigDecimal.ZERO;\r\n}\r\n```\r\n\r\nUsage:\r\n```java\r\nfinal Audi audi = new Audi(&quot;Audi A3&quot;, &quot;Germany&quot;);\r\nSystem.out.println(audi);\r\n```\r\n\r\nOutput:\r\n```\r\nAudi(name=Audi A3, headquarter=Germany, revenue=0, totalAssets=0)\r\n```","title":"Default Value for BigDecimal using Lombok Builder","body":"<p>As <a href=\"https://stackoverflow.com/users/1898563/michael\">Michael</a> pointed out, you don't have many other options. If you've added the <code>@Builder</code> annotation, you must use <code>@Builder.Default</code> for each field in order to utilize the fluent builder API.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\n@EqualsAndHashCode(callSuper = true)\npublic class Audi extends Car {\n\n    private String name;\n    private String headquarter;\n    @Builder.Default\n    private BigDecimal revenue = BigDecimal.ZERO;\n    @Builder.Default\n    private BigDecimal totalAssets = BigDecimal.ZERO;\n}\n\n</code></pre>\n<p>Usage:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Audi audi = Audi.builder()\n    .name(&quot;Audi A3&quot;)\n    .headquarter(&quot;Germany&quot;)\n    .build();\nSystem.out.println(audi);\n</code></pre>\n<p>Output:</p>\n<pre><code>Audi(name=Audi A3, headquarter=Germany, revenue=0, totalAssets=0)\n</code></pre>\n<p>If builder functionality is not needed, objects can be instantiated in the traditional <code>Java</code> way using a constructor. However, in this case, the <code>@Builder</code> annotation should be removed and default values must be set directly in the constructor or during declaration.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\n@NoArgsConstructor\n@RequiredArgsConstructor\n@EqualsAndHashCode(callSuper = true)\npublic class Audi extends Car {\n    @NonNull\n    private String name;\n    @NonNull\n    private String headquarter;\n    private BigDecimal revenue = BigDecimal.ZERO;\n    private BigDecimal totalAssets = BigDecimal.ZERO;\n}\n</code></pre>\n<p>Usage:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final Audi audi = new Audi(&quot;Audi A3&quot;, &quot;Germany&quot;);\nSystem.out.println(audi);\n</code></pre>\n<p>Output:</p>\n<pre><code>Audi(name=Audi A3, headquarter=Germany, revenue=0, totalAssets=0)\n</code></pre>\n"}],"owner":{"account_id":18044315,"reputation":1227,"user_id":13115701,"display_name":"Paul Marcelin Bejan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":463,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75300876,"answer_count":1,"score":0,"last_activity_date":1675186106,"creation_date":1675176668,"question_id":75298926,"body_markdown":"Let&#39;s consider the following Entity:\r\n\r\n    @Data\r\n    @Builder\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @EqualsAndHashCode(callSuper = true)\r\n    public class Audi extends Car {\r\n    \r\n        private String name;\r\n        \r\n        private String headquarter;\r\n        \r\n        private BigDecimal revenue = BigDecimal.ZERO;\r\n    \r\n        private BigDecimal totalAssets = BigDecimal.ZERO;\r\n\r\n    }\r\n\r\nI want to have all BigDecimal variables with BigDecimal.ZERO as default value.\r\nIf I initialize it immediately after declaration, \r\n\r\nI got this warning:\r\n\r\n&gt; @Builder will ignore the initializing expression entirely. If you want\r\n&gt; the initializing expression to serve as default, add @Builder.Default.\r\n&gt; If it is not supposed to be settable during building, make the field\r\n&gt; final.\r\n\r\nFor an Entity with 10/15 BigDecimal, it&#39;s not so beautiful to have this annotation on each field.\r\n\r\nAny alternative?","title":"Default Value for BigDecimal using Lombok Builder","body":"<p>Let's consider the following Entity:</p>\n<pre><code>@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\n@EqualsAndHashCode(callSuper = true)\npublic class Audi extends Car {\n\n    private String name;\n    \n    private String headquarter;\n    \n    private BigDecimal revenue = BigDecimal.ZERO;\n\n    private BigDecimal totalAssets = BigDecimal.ZERO;\n\n}\n</code></pre>\n<p>I want to have all BigDecimal variables with BigDecimal.ZERO as default value.\nIf I initialize it immediately after declaration,</p>\n<p>I got this warning:</p>\n<blockquote>\n<p>@Builder will ignore the initializing expression entirely. If you want\nthe initializing expression to serve as default, add @Builder.Default.\nIf it is not supposed to be settable during building, make the field\nfinal.</p>\n</blockquote>\n<p>For an Entity with 10/15 BigDecimal, it's not so beautiful to have this annotation on each field.</p>\n<p>Any alternative?</p>\n"},{"tags":["java","spring","spring-boot","spring-security","spring-security-oauth2"],"comments":[{"owner":{"account_id":15841746,"reputation":6011,"user_id":11430047,"display_name":"Eleftheria Stein-Kousathana"},"score":0,"creation_date":1563528908,"post_id":57103518,"comment_id":100738717,"body_markdown":"You said &quot;When I run the application, there is no need to send a csrf token in the POST request.&quot;, how did you try this? A CSRF token is required for all POST requests unless explicitly disabled using `.csrf(csrf -&gt; csrf.disable())` in your security configuration. The sample project tests are all for GET requests, so they don&#39;t require a CSRF token.","body":"You said &quot;When I run the application, there is no need to send a csrf token in the POST request.&quot;, how did you try this? A CSRF token is required for all POST requests unless explicitly disabled using <code>.csrf(csrf -&gt; csrf.disable())</code> in your security configuration. The sample project tests are all for GET requests, so they don&#39;t require a CSRF token."},{"owner":{"account_id":4279495,"reputation":528,"user_id":3499320,"accept_rate":100,"display_name":"henriquels"},"score":0,"creation_date":1563544586,"post_id":57103518,"comment_id":100746732,"body_markdown":"Actually, the CSRF token is not required in runtime. When I run the following command: `curl -v -H &quot;Authorization: Bearer $TOKEN&quot; -d &quot;my message&quot; -X POST localhost:8080/message` I receive a 200 status. As far as I understand, the CSRF filter only checks the token if there is no Bearer token.","body":"Actually, the CSRF token is not required in runtime. When I run the following command: <code>curl -v -H &quot;Authorization: Bearer $TOKEN&quot; -d &quot;my message&quot; -X POST localhost:8080&#47;message</code> I receive a 200 status. As far as I understand, the CSRF filter only checks the token if there is no Bearer token."},{"owner":{"account_id":15841746,"reputation":6011,"user_id":11430047,"display_name":"Eleftheria Stein-Kousathana"},"score":0,"creation_date":1563553027,"post_id":57103518,"comment_id":100751122,"body_markdown":"My mistake, you are correct that the CSRF token is not needed if there is a Bearer token. The issue with the test that only includes the `jwt` post processor is that while this creates the security context containing the JWT, it does not create a Bearer token in the request (which is what the CSRF filter is looking for).","body":"My mistake, you are correct that the CSRF token is not needed if there is a Bearer token. The issue with the test that only includes the <code>jwt</code> post processor is that while this creates the security context containing the JWT, it does not create a Bearer token in the request (which is what the CSRF filter is looking for)."}],"answers":[{"tags":[],"owner":{"account_id":15841746,"reputation":6011,"user_id":11430047,"display_name":"Eleftheria Stein-Kousathana"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1563554936,"creation_date":1563554936,"answer_id":57116667,"question_id":57103518,"body_markdown":"In order for the CSRF filter to detect that you are using a JWT token, you will need to include the JWT token in your request as an `Authorization` header, or as a request parameter.  \r\nThe tests that you have mentioned have a mock `JwtDecoder`, which means you can use any string as your token and mock the decoded value.  \r\nYour test would then become:\r\n```\r\nJwt jwt = Jwt.withTokenValue(&quot;token&quot;)\r\n\t\t.header(&quot;alg&quot;, &quot;none&quot;)\r\n\t\t.claim(&quot;scope&quot;, &quot;message:read&quot;)\r\n\t\t.build();\r\nwhen(jwtDecoder.decode(anyString())).thenReturn(jwt);\r\nmockMvc.perform(post(&quot;/message&quot;)\r\n\t\t.content(&quot;Hello message&quot;)\r\n\t\t.header(&quot;Authorization&quot;, &quot;Bearer &quot; + jwt.getTokenValue()))\r\n\t\t.andExpect(status().isOk())\r\n\t\t.andExpect(content().string(is(&quot;Message was created. Content: Hello message&quot;)));\r\n```\r\nIf you are not mocking the `JwtDecoder` then you would need to retrieve a valid bearer token and pass that in the `Authorization` header.","title":"Spring security - oauth2 resource server tests","body":"<p>In order for the CSRF filter to detect that you are using a JWT token, you will need to include the JWT token in your request as an <code>Authorization</code> header, or as a request parameter.<br>\nThe tests that you have mentioned have a mock <code>JwtDecoder</code>, which means you can use any string as your token and mock the decoded value.<br>\nYour test would then become:</p>\n\n<pre><code>Jwt jwt = Jwt.withTokenValue(\"token\")\n        .header(\"alg\", \"none\")\n        .claim(\"scope\", \"message:read\")\n        .build();\nwhen(jwtDecoder.decode(anyString())).thenReturn(jwt);\nmockMvc.perform(post(\"/message\")\n        .content(\"Hello message\")\n        .header(\"Authorization\", \"Bearer \" + jwt.getTokenValue()))\n        .andExpect(status().isOk())\n        .andExpect(content().string(is(\"Message was created. Content: Hello message\")));\n</code></pre>\n\n<p>If you are not mocking the <code>JwtDecoder</code> then you would need to retrieve a valid bearer token and pass that in the <code>Authorization</code> header.</p>\n"},{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675186025,"creation_date":1675186025,"answer_id":75300857,"question_id":57103518,"body_markdown":"First with Bearer access-token, you might be able to disable sessions (STATELESS session-management), and, as so, CSRF protection (CSRF attack vector is session).\r\n\r\nSecond there is a `.csrf()` MockMvc request post-processor which would simulate the CSRF token if you want to keep cessions (and CSRF protection).\r\n\r\nLast, what `jwt()` request post-processor does is configuring directly the security context with a `JwtAuthenticationToken` instance, not creating a valid JWT token set as Bearer access-token. With MockMvc, Authorization header is not decoded nor converted to an Authentication instance. =&gt; What you should set before MockMvc request execution for your test to pass are authorities, not scope claim:\r\n\r\n```java\r\n.with(jwt(jwt -&gt; jwt.authorities(List.of(new SimpleGrantedAuthority(&quot;SCOPE_message:read&quot;)))))\r\n```\r\n\r\nNote that you could also simply decorate your test function with:\r\n```java\r\n@WithMockJwtAuth(&quot;SCOPE_message:read&quot;)\r\n```\r\nFrom [this lib][1] I maintain \r\n\r\n\r\n  [1]: https://github.com/ch4mpy/spring-addons","title":"Spring security - oauth2 resource server tests","body":"<p>First with Bearer access-token, you might be able to disable sessions (STATELESS session-management), and, as so, CSRF protection (CSRF attack vector is session).</p>\n<p>Second there is a <code>.csrf()</code> MockMvc request post-processor which would simulate the CSRF token if you want to keep cessions (and CSRF protection).</p>\n<p>Last, what <code>jwt()</code> request post-processor does is configuring directly the security context with a <code>JwtAuthenticationToken</code> instance, not creating a valid JWT token set as Bearer access-token. With MockMvc, Authorization header is not decoded nor converted to an Authentication instance. =&gt; What you should set before MockMvc request execution for your test to pass are authorities, not scope claim:</p>\n<pre class=\"lang-java prettyprint-override\"><code>.with(jwt(jwt -&gt; jwt.authorities(List.of(new SimpleGrantedAuthority(&quot;SCOPE_message:read&quot;)))))\n</code></pre>\n<p>Note that you could also simply decorate your test function with:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@WithMockJwtAuth(&quot;SCOPE_message:read&quot;)\n</code></pre>\n<p>From <a href=\"https://github.com/ch4mpy/spring-addons\" rel=\"nofollow noreferrer\">this lib</a> I maintain</p>\n"}],"owner":{"account_id":4279495,"reputation":528,"user_id":3499320,"accept_rate":100,"display_name":"henriquels"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4066,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":57116667,"answer_count":2,"score":6,"last_activity_date":1675186025,"creation_date":1563490036,"question_id":57103518,"body_markdown":"I am having some problems when testing an oauth2 resource server using @WebMvcTest and the POST HTTP method.\r\n\r\nI always receive a 403 status code when I don&#39;t send the csrf token, even though the token is not required when I am using a bearer token.  \r\n\r\nHere is the POST method that I want to test.\r\n```\r\n@PostMapping(&quot;/message&quot;)\r\npublic String createMessage(@RequestBody String message) {\r\n    return String.format(&quot;Message was created. Content: %s&quot;, message);\r\n}\r\n\r\n```\r\n\r\nHere is my security config:\r\n```\r\nhttp.authorizeRequests(authorizeRequests -&gt; authorizeRequests\t\t\r\n   .antMatchers(&quot;/message/**&quot;)\r\n   .hasAuthority(&quot;SCOPE_message:read&quot;)\r\n   .anyRequest().authenticated()\r\n).oauth2ResourceServer(oauth2ResourceServer -&gt;\t\t\t\t \r\n    oauth2ResourceServer\r\n\t.jwt(withDefaults())\r\n);\r\n```\r\nI am following the tests provided in the samples of [spring-security](https://github.com/spring-projects/spring-security/blob/master/samples/boot/oauth2resourceserver/src/test/java/sample/OAuth2ResourceServerControllerTests.java).\r\n\r\nThe following test was supposed to pass but it fails because the csrf token is not sent in the request.\r\n\r\n```\r\nmockMvc.perform(post(&quot;/message&quot;).content(&quot;Hello message&quot;)\r\n    .with(jwt(jwt -&gt; jwt.claim(&quot;scope&quot;, &quot;message:read&quot;)))\r\n    .andExpect(status().isOk())\r\n    .andExpect(content().string(is(&quot;Message was created. Content: Hello message&quot;)));\r\n```\r\n\r\nWhen I add the csrf token to the request, the test passes:\r\n```\r\nmockMvc.perform(post(&quot;/message&quot;).content(&quot;Hello message&quot;)\r\n    .with(jwt(jwt -&gt; jwt.claim(&quot;scope&quot;, &quot;message:read&quot;)))\r\n    .with(csrf()))\r\n    .andExpect(status().isOk())\r\n    .andExpect(content().string(is(&quot;Message was created. Content: Hello message&quot;)));\r\n```\r\n\r\nWhen I run the application, there is no need to send a csrf token in the POST request.\r\n\r\nI have forked the Spring Security GitHub repository and the project with this failing test is available at this [link](https://github.com/henriquels25/spring-security/blob/integration_tests_post_resource_server/samples/boot/oauth2resourceserver/src/test/java/sample/OAuth2ResourceServerControllerTests.java).\r\n\r\nIs there a way for me to configure my tests so I don&#39;t need to send the csrf token in the POST request?","title":"Spring security - oauth2 resource server tests","body":"<p>I am having some problems when testing an oauth2 resource server using @WebMvcTest and the POST HTTP method.</p>\n\n<p>I always receive a 403 status code when I don't send the csrf token, even though the token is not required when I am using a bearer token.  </p>\n\n<p>Here is the POST method that I want to test.</p>\n\n<pre><code>@PostMapping(\"/message\")\npublic String createMessage(@RequestBody String message) {\n    return String.format(\"Message was created. Content: %s\", message);\n}\n\n</code></pre>\n\n<p>Here is my security config:</p>\n\n<pre><code>http.authorizeRequests(authorizeRequests -&gt; authorizeRequests       \n   .antMatchers(\"/message/**\")\n   .hasAuthority(\"SCOPE_message:read\")\n   .anyRequest().authenticated()\n).oauth2ResourceServer(oauth2ResourceServer -&gt;               \n    oauth2ResourceServer\n    .jwt(withDefaults())\n);\n</code></pre>\n\n<p>I am following the tests provided in the samples of <a href=\"https://github.com/spring-projects/spring-security/blob/master/samples/boot/oauth2resourceserver/src/test/java/sample/OAuth2ResourceServerControllerTests.java\" rel=\"noreferrer\">spring-security</a>.</p>\n\n<p>The following test was supposed to pass but it fails because the csrf token is not sent in the request.</p>\n\n<pre><code>mockMvc.perform(post(\"/message\").content(\"Hello message\")\n    .with(jwt(jwt -&gt; jwt.claim(\"scope\", \"message:read\")))\n    .andExpect(status().isOk())\n    .andExpect(content().string(is(\"Message was created. Content: Hello message\")));\n</code></pre>\n\n<p>When I add the csrf token to the request, the test passes:</p>\n\n<pre><code>mockMvc.perform(post(\"/message\").content(\"Hello message\")\n    .with(jwt(jwt -&gt; jwt.claim(\"scope\", \"message:read\")))\n    .with(csrf()))\n    .andExpect(status().isOk())\n    .andExpect(content().string(is(\"Message was created. Content: Hello message\")));\n</code></pre>\n\n<p>When I run the application, there is no need to send a csrf token in the POST request.</p>\n\n<p>I have forked the Spring Security GitHub repository and the project with this failing test is available at this <a href=\"https://github.com/henriquels25/spring-security/blob/integration_tests_post_resource_server/samples/boot/oauth2resourceserver/src/test/java/sample/OAuth2ResourceServerControllerTests.java\" rel=\"noreferrer\">link</a>.</p>\n\n<p>Is there a way for me to configure my tests so I don't need to send the csrf token in the POST request?</p>\n"},{"tags":["java","groovy","soapui"],"comments":[{"owner":{"account_id":6685637,"reputation":739,"user_id":5156999,"display_name":"Santosh b"},"score":0,"creation_date":1675186309,"post_id":75300813,"comment_id":132872903,"body_markdown":"Check if this urlDB certificate is expired","body":"Check if this urlDB certificate is expired"},{"owner":{"account_id":16724784,"reputation":29,"user_id":12088615,"display_name":"pridhvimallikharjun"},"score":0,"creation_date":1675219586,"post_id":75300813,"comment_id":132880161,"body_markdown":"It has validity","body":"It has validity"},{"owner":{"account_id":3758602,"reputation":10072,"user_id":3124333,"accept_rate":100,"display_name":"SiKing"},"score":0,"creation_date":1675464788,"post_id":75300813,"comment_id":132942291,"body_markdown":"1) Are you using this at an employer that uses packet inspection for their security? 2) Are you running this from within SoapUI, or elsewhere? What version of SoapUI?","body":"1) Are you using this at an employer that uses packet inspection for their security? 2) Are you running this from within SoapUI, or elsewhere? What version of SoapUI?"}],"owner":{"account_id":16724784,"reputation":29,"user_id":12088615,"display_name":"pridhvimallikharjun"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":193,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675185784,"creation_date":1675185784,"question_id":75300813,"body_markdown":"I&#39;m trying to connect the Cosmo DB and query database through the Groovy script. However, I&#39;m seeing the below exception Please help to resolve the issue\r\n\r\n  **Exception**\r\n\r\n      java.lang.IllegalStateException: com.microsoft.azure.documentdb.DocumentClientException: javax.net.ssl.SSLHandshakeException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target error at line: 52\r\n\r\n***code***\r\n\r\n    \r\n    import java.io.FileReader;\r\n    import java.io.IOException;\r\n    import java.text.DateFormat;\r\n    import java.text.SimpleDateFormat;\r\n    import java.util.Date;\r\n    import com.microsoft.azure.cosmosdb.spark.*\r\n    import com.microsoft.azure.*\r\n    import com.microsoft.azure.cosmosdb.*\r\n    import com.microsoft.azure.documentdb.ConnectionPolicy;\r\n    import com.microsoft.azure.documentdb.ConsistencyLevel;\r\n    import com.microsoft.azure.documentdb.DataType;\r\n    import com.microsoft.azure.documentdb.Database;\r\n    import com.microsoft.azure.documentdb.DocumentClient;\r\n    import com.microsoft.azure.documentdb.DocumentClientException;\r\n    import com.microsoft.azure.documentdb.DocumentCollection;\r\n    import com.microsoft.azure.documentdb.Index;\r\n    import com.microsoft.azure.documentdb.IndexingPolicy;\r\n    import com.microsoft.azure.documentdb.RangeIndex;\r\n    import com.microsoft.azure.documentdb.RequestOptions;\r\n    import com.microsoft.azure.documentdb.*\r\n    import com.eviware.soapui.model.testsuite.TestRunner.*\r\n    \r\n    \r\n    \r\n    DocumentClient client;\r\n    \r\n    // Get the database configuration\r\n    urlDB = testRunner.testCase.testSuite.project.getPropertyValue( &quot;envCosmoURL&quot; );\r\n    keyDB = testRunner.testCase.testSuite.project.getPropertyValue( &quot;envCosmoKey&quot; );\r\n    \r\n    // Making the connection with COSMos DB account\r\n    client = new DocumentClient(&quot;${urlDB}&quot;,\r\n                    &quot;${keyDB}&quot;,\r\n                    new ConnectionPolicy(), ConsistencyLevel.Session);\r\n    \r\n    //Defining the options for retrieving data.\r\n    feedOptions = new FeedOptions();\r\n    feedOptions.setEmitVerboseTracesInQuery(false);\r\n    \r\n    // In this section we are accessing to the studydefinition table\r\n    DB = client.queryDatabases(\r\n            &quot;SELECT * FROM root r WHERE r.id=&#39;StudyDefinition&#39;&quot;, null)\r\n          .getQueryIterable()\r\n          .toList();\r\n     \r\n    StudyDefDB = DB[0]\r\n\r\n\r\n\r\nPlease help how to resolve the issue","title":"SoapUI : : javax.net.ssl.SSLHandshakeException: PKIX path building failed:","body":"<p>I'm trying to connect the Cosmo DB and query database through the Groovy script. However, I'm seeing the below exception Please help to resolve the issue</p>\n<p><strong>Exception</strong></p>\n<pre><code>  java.lang.IllegalStateException: com.microsoft.azure.documentdb.DocumentClientException: javax.net.ssl.SSLHandshakeException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target error at line: 52\n</code></pre>\n<p><em><strong>code</strong></em></p>\n<pre><code>import java.io.FileReader;\nimport java.io.IOException;\nimport java.text.DateFormat;\nimport java.text.SimpleDateFormat;\nimport java.util.Date;\nimport com.microsoft.azure.cosmosdb.spark.*\nimport com.microsoft.azure.*\nimport com.microsoft.azure.cosmosdb.*\nimport com.microsoft.azure.documentdb.ConnectionPolicy;\nimport com.microsoft.azure.documentdb.ConsistencyLevel;\nimport com.microsoft.azure.documentdb.DataType;\nimport com.microsoft.azure.documentdb.Database;\nimport com.microsoft.azure.documentdb.DocumentClient;\nimport com.microsoft.azure.documentdb.DocumentClientException;\nimport com.microsoft.azure.documentdb.DocumentCollection;\nimport com.microsoft.azure.documentdb.Index;\nimport com.microsoft.azure.documentdb.IndexingPolicy;\nimport com.microsoft.azure.documentdb.RangeIndex;\nimport com.microsoft.azure.documentdb.RequestOptions;\nimport com.microsoft.azure.documentdb.*\nimport com.eviware.soapui.model.testsuite.TestRunner.*\n\n\n\nDocumentClient client;\n\n// Get the database configuration\nurlDB = testRunner.testCase.testSuite.project.getPropertyValue( &quot;envCosmoURL&quot; );\nkeyDB = testRunner.testCase.testSuite.project.getPropertyValue( &quot;envCosmoKey&quot; );\n\n// Making the connection with COSMos DB account\nclient = new DocumentClient(&quot;${urlDB}&quot;,\n                &quot;${keyDB}&quot;,\n                new ConnectionPolicy(), ConsistencyLevel.Session);\n\n//Defining the options for retrieving data.\nfeedOptions = new FeedOptions();\nfeedOptions.setEmitVerboseTracesInQuery(false);\n\n// In this section we are accessing to the studydefinition table\nDB = client.queryDatabases(\n        &quot;SELECT * FROM root r WHERE r.id='StudyDefinition'&quot;, null)\n      .getQueryIterable()\n      .toList();\n \nStudyDefDB = DB[0]\n</code></pre>\n<p>Please help how to resolve the issue</p>\n"},{"tags":["java","json","gson"],"comments":[{"owner":{"account_id":1111280,"reputation":6531,"user_id":1101692,"accept_rate":89,"display_name":"Shark"},"score":5,"creation_date":1675180030,"post_id":75299534,"comment_id":132870782,"body_markdown":"You do realize that your input &quot;json&quot; isn&#39;t really JSON, right? Why not have a talk with your backend team about it?","body":"You do realize that your input &quot;json&quot; isn&#39;t really JSON, right? Why not have a talk with your backend team about it?"},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1675180255,"post_id":75299534,"comment_id":132870852,"body_markdown":"What you are showing us is _almost_ valid JSON so maybe you are actually handling valid JSON. We can&#39;t be sure. Asking for library recommendations is [off-topic](https://stackoverflow.com/help/on-topic) for Stack Overflow, but you can take a look at [How to parse JSON in Java](https://stackoverflow.com/q/2591098/12567365) as a starting point.","body":"What you are showing us is <i>almost</i> valid JSON so maybe you are actually handling valid JSON. We can&#39;t be sure. Asking for library recommendations is <a href=\"https://stackoverflow.com/help/on-topic\">off-topic</a> for Stack Overflow, but you can take a look at <a href=\"https://stackoverflow.com/q/2591098/12567365\">How to parse JSON in Java</a> as a starting point."},{"owner":{"account_id":6162914,"reputation":87,"user_id":4803870,"display_name":"Arthur"},"score":0,"creation_date":1675180326,"post_id":75299534,"comment_id":132870879,"body_markdown":"@Shark,\nWhile copying the excerpt from the original Json the &#39;data&#39; key got added.\nEdited the input json to be valid.","body":"@Shark, While copying the excerpt from the original Json the &#39;data&#39; key got added. Edited the input json to be valid."},{"owner":{"account_id":1111280,"reputation":6531,"user_id":1101692,"accept_rate":89,"display_name":"Shark"},"score":0,"creation_date":1675180859,"post_id":75299534,"comment_id":132871076,"body_markdown":"@Arthur it&#39;s still not valid JSON though. It&#39;s a JSON Array, called &quot;Employee&quot; which has elements that represent different field of the imaginary parent employee. And then, the second employee starts in the middle of it.\n\nIt would make more sense if it were a json array of json arrays - meaning, `Employees [ Employee: [ &lt;employee 1 items&gt; ], Employee: [ &lt;employee 2 items&gt; ] ... ]`\n\nThe way it currently sits, there is no common POJO class to use for it, since it could be a &lt;String, String&gt; mapping, or a &lt;String, Integer&gt; mapping. Looks like you could use a SAX parser for this &quot;json&quot;.","body":"@Arthur it&#39;s still not valid JSON though. It&#39;s a JSON Array, called &quot;Employee&quot; which has elements that represent different field of the imaginary parent employee. And then, the second employee starts in the middle of it.  It would make more sense if it were a json array of json arrays - meaning, <code>Employees [ Employee: [ &lt;employee 1 items&gt; ], Employee: [ &lt;employee 2 items&gt; ] ... ]</code>  The way it currently sits, there is no common POJO class to use for it, since it could be a &lt;String, String&gt; mapping, or a &lt;String, Integer&gt; mapping. Looks like you could use a SAX parser for this &quot;json&quot;."},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1675182992,"post_id":75299534,"comment_id":132871857,"body_markdown":"@Shark: the current input described here is absolutely valid JSON. It&#39;s not &quot;nice&quot; JSON or &quot;well-designed&quot; JSON, but it&#39;s JSON.","body":"@Shark: the current input described here is absolutely valid JSON. It&#39;s not &quot;nice&quot; JSON or &quot;well-designed&quot; JSON, but it&#39;s JSON."},{"owner":{"account_id":6162914,"reputation":87,"user_id":4803870,"display_name":"Arthur"},"score":0,"creation_date":1675182998,"post_id":75299534,"comment_id":132871859,"body_markdown":"@Shark,\nUnfortunately, I don&#39;t have the control over the incoming json data.","body":"@Shark, Unfortunately, I don&#39;t have the control over the incoming json data."}],"answers":[{"tags":[],"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1675181503,"creation_date":1675181503,"answer_id":75299960,"question_id":75299534,"body_markdown":"The comments about the input format being &quot;weird&quot; (to put it politely) are spot-on: This is a convoluted way to represent simple hierarchical data.\r\n\r\nBut sometimes we have to deal with sub-optimal input formats, that&#39;s why we can fix them like this:\r\n\r\n```\r\n  private static JSONObject arrayToStructure(JSONArray inputArray) {\r\n    JSONObject output = new JSONObject();\r\n    for (Object o : inputArray) {\r\n      assert o instanceof JSONObject;\r\n      JSONObject jso = (JSONObject) o;\r\n      assert jso.length() == 1;\r\n      String key = jso.keys().next();\r\n      Object value = jso.get(key);\r\n      setJsonPath(output, key, value);\r\n    }\r\n    return output;\r\n  }\r\n\r\n  private static void setJsonPath(JSONObject target, String key, Object value) {\r\n    String[] keyParts = key.split(&quot;\\\\.&quot;);\r\n    JSONObject parent = target;\r\n    for (int i = 0; i &lt; keyParts.length - 1; i++) {\r\n      String keyPart = keyParts[i];\r\n      if (parent.has(keyPart)) {\r\n        parent = parent.getJSONObject(keyPart);\r\n      } else {\r\n        JSONObject child = new JSONObject();\r\n        parent.put(keyPart, child);\r\n        parent = child;\r\n      }\r\n    }\r\n    assert !parent.has(keyParts[keyParts.length - 1]);\r\n    parent.put(keyParts[keyParts.length - 1], value);\r\n  }\r\n```\r\n\r\nThis code uses [JSON-Java][1], probably better known as `org.json:json`.\r\n\r\nAnd it can be used like this:\r\n\r\n```\r\n  public static void main(String[] args) {\r\n    String input = &quot;&quot;&quot;\r\n        [\r\n          {\r\n            &quot;employee1.id&quot;: 1\r\n          },\r\n          {\r\n            &quot;employee1.name&quot;: &quot;John&quot;\r\n          },\r\n          {\r\n            &quot;employee1.address.street&quot;: &quot;main street&quot;\r\n          },\r\n          {\r\n            &quot;employee1.address.pin&quot;: &quot;123456&quot;\r\n          },\r\n          {\r\n            &quot;employee2.id&quot;: 2\r\n          },\r\n          {\r\n            &quot;employee2.name&quot;: &quot;Mike&quot;\r\n          },\r\n          {\r\n            &quot;employee2.address.street&quot;: &quot;51 street&quot;\r\n          },\r\n          {\r\n            &quot;employee2.address.pin&quot;: &quot;234543&quot;\r\n          }\r\n        ]&quot;&quot;&quot;;\r\n    JSONArray inputArray = new JSONArray(input);\r\n    JSONObject structure = arrayToStructure(inputArray);\r\n    System.out.println(structure.toString(2));\r\n  }\r\n```\r\n\r\nNote that this code is lacking proper sanity checks (some of which I&#39;ve hinted at using `assert`) and the nature of this &quot;protocol&quot; means that you can get misleading, ambiguous or straight up malicious inputs. For example nothing stops the input from having both `&quot;employee1.id&quot;: 1` and `&quot;employee1.id&quot;: 2` in there. How that is to be interpreted is up to the parser and such ambiguity is a great source of bugs and potential security issues.\r\n\r\n\r\n  [1]: https://stleary.github.io/JSON-java/","title":"Json manipulation and conversion in Java","body":"<p>The comments about the input format being &quot;weird&quot; (to put it politely) are spot-on: This is a convoluted way to represent simple hierarchical data.</p>\n<p>But sometimes we have to deal with sub-optimal input formats, that's why we can fix them like this:</p>\n<pre><code>  private static JSONObject arrayToStructure(JSONArray inputArray) {\n    JSONObject output = new JSONObject();\n    for (Object o : inputArray) {\n      assert o instanceof JSONObject;\n      JSONObject jso = (JSONObject) o;\n      assert jso.length() == 1;\n      String key = jso.keys().next();\n      Object value = jso.get(key);\n      setJsonPath(output, key, value);\n    }\n    return output;\n  }\n\n  private static void setJsonPath(JSONObject target, String key, Object value) {\n    String[] keyParts = key.split(&quot;\\\\.&quot;);\n    JSONObject parent = target;\n    for (int i = 0; i &lt; keyParts.length - 1; i++) {\n      String keyPart = keyParts[i];\n      if (parent.has(keyPart)) {\n        parent = parent.getJSONObject(keyPart);\n      } else {\n        JSONObject child = new JSONObject();\n        parent.put(keyPart, child);\n        parent = child;\n      }\n    }\n    assert !parent.has(keyParts[keyParts.length - 1]);\n    parent.put(keyParts[keyParts.length - 1], value);\n  }\n</code></pre>\n<p>This code uses <a href=\"https://stleary.github.io/JSON-java/\" rel=\"nofollow noreferrer\">JSON-Java</a>, probably better known as <code>org.json:json</code>.</p>\n<p>And it can be used like this:</p>\n<pre><code>  public static void main(String[] args) {\n    String input = &quot;&quot;&quot;\n        [\n          {\n            &quot;employee1.id&quot;: 1\n          },\n          {\n            &quot;employee1.name&quot;: &quot;John&quot;\n          },\n          {\n            &quot;employee1.address.street&quot;: &quot;main street&quot;\n          },\n          {\n            &quot;employee1.address.pin&quot;: &quot;123456&quot;\n          },\n          {\n            &quot;employee2.id&quot;: 2\n          },\n          {\n            &quot;employee2.name&quot;: &quot;Mike&quot;\n          },\n          {\n            &quot;employee2.address.street&quot;: &quot;51 street&quot;\n          },\n          {\n            &quot;employee2.address.pin&quot;: &quot;234543&quot;\n          }\n        ]&quot;&quot;&quot;;\n    JSONArray inputArray = new JSONArray(input);\n    JSONObject structure = arrayToStructure(inputArray);\n    System.out.println(structure.toString(2));\n  }\n</code></pre>\n<p>Note that this code is lacking proper sanity checks (some of which I've hinted at using <code>assert</code>) and the nature of this &quot;protocol&quot; means that you can get misleading, ambiguous or straight up malicious inputs. For example nothing stops the input from having both <code>&quot;employee1.id&quot;: 1</code> and <code>&quot;employee1.id&quot;: 2</code> in there. How that is to be interpreted is up to the parser and such ambiguity is a great source of bugs and potential security issues.</p>\n"},{"tags":[],"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1675185353,"creation_date":1675185353,"answer_id":75300733,"question_id":75299534,"body_markdown":"Library _Josson_ can do the transformation by one expression.\r\n\r\nhttps://github.com/octomix/josson\r\n\r\n    Josson josson = Josson.fromJsonString(\r\n        &quot;{&quot; +\r\n        &quot;  \\&quot;Employee\\&quot;: [&quot; +\r\n        &quot;    {&quot; +\r\n        &quot;      \\&quot;employee1.id\\&quot;: 1&quot; +\r\n        &quot;    },&quot; +\r\n        &quot;    {&quot; +\r\n        &quot;      \\&quot;employee1.name\\&quot;: \\&quot;John\\&quot;&quot; +\r\n        &quot;    },&quot; +\r\n        &quot;    {&quot; +\r\n        &quot;      \\&quot;employee1.address.street\\&quot;: \\&quot;main street\\&quot;&quot; +\r\n        &quot;    },&quot; +\r\n        &quot;    {&quot; +\r\n        &quot;      \\&quot;employee1.address.pin\\&quot;: \\&quot;123456\\&quot;&quot; +\r\n        &quot;    },&quot; +\r\n        &quot;    {&quot; +\r\n        &quot;      \\&quot;employee2.id\\&quot;: 2&quot; +\r\n        &quot;    },&quot; +\r\n        &quot;    {&quot; +\r\n        &quot;      \\&quot;employee2.name\\&quot;: \\&quot;Mike\\&quot;&quot; +\r\n        &quot;    },&quot; +\r\n        &quot;    {&quot; +\r\n        &quot;      \\&quot;employee2.address.street\\&quot;: \\&quot;51 street\\&quot;&quot; +\r\n        &quot;    },&quot; +\r\n        &quot;    {&quot; +\r\n        &quot;      \\&quot;employee2.address.pin\\&quot;: \\&quot;234543\\&quot;&quot; +\r\n        &quot;    }&quot; +\r\n        &quot;  ]&quot; +\r\n        &quot;}&quot;);\r\n    JsonNode node = josson.getNode(&quot;Employee.mergeObjects().unflatten(&#39;.&#39;)&quot;);\r\n    System.out.println(node.toPrettyString());\r\n\r\n__Output__\r\n\r\n    {\r\n      &quot;employee1&quot; : {\r\n        &quot;id&quot; : 1,\r\n        &quot;name&quot; : &quot;John&quot;,\r\n        &quot;address&quot; : {\r\n          &quot;street&quot; : &quot;main street&quot;,\r\n          &quot;pin&quot; : &quot;123456&quot;\r\n        }\r\n      },\r\n      &quot;employee2&quot; : {\r\n        &quot;id&quot; : 2,\r\n        &quot;name&quot; : &quot;Mike&quot;,\r\n        &quot;address&quot; : {\r\n          &quot;street&quot; : &quot;51 street&quot;,\r\n          &quot;pin&quot; : &quot;234543&quot;\r\n        }\r\n      }\r\n    }\r\n","title":"Json manipulation and conversion in Java","body":"<p>Library <em>Josson</em> can do the transformation by one expression.</p>\n<p><a href=\"https://github.com/octomix/josson\" rel=\"nofollow noreferrer\">https://github.com/octomix/josson</a></p>\n<pre><code>Josson josson = Josson.fromJsonString(\n    &quot;{&quot; +\n    &quot;  \\&quot;Employee\\&quot;: [&quot; +\n    &quot;    {&quot; +\n    &quot;      \\&quot;employee1.id\\&quot;: 1&quot; +\n    &quot;    },&quot; +\n    &quot;    {&quot; +\n    &quot;      \\&quot;employee1.name\\&quot;: \\&quot;John\\&quot;&quot; +\n    &quot;    },&quot; +\n    &quot;    {&quot; +\n    &quot;      \\&quot;employee1.address.street\\&quot;: \\&quot;main street\\&quot;&quot; +\n    &quot;    },&quot; +\n    &quot;    {&quot; +\n    &quot;      \\&quot;employee1.address.pin\\&quot;: \\&quot;123456\\&quot;&quot; +\n    &quot;    },&quot; +\n    &quot;    {&quot; +\n    &quot;      \\&quot;employee2.id\\&quot;: 2&quot; +\n    &quot;    },&quot; +\n    &quot;    {&quot; +\n    &quot;      \\&quot;employee2.name\\&quot;: \\&quot;Mike\\&quot;&quot; +\n    &quot;    },&quot; +\n    &quot;    {&quot; +\n    &quot;      \\&quot;employee2.address.street\\&quot;: \\&quot;51 street\\&quot;&quot; +\n    &quot;    },&quot; +\n    &quot;    {&quot; +\n    &quot;      \\&quot;employee2.address.pin\\&quot;: \\&quot;234543\\&quot;&quot; +\n    &quot;    }&quot; +\n    &quot;  ]&quot; +\n    &quot;}&quot;);\nJsonNode node = josson.getNode(&quot;Employee.mergeObjects().unflatten('.')&quot;);\nSystem.out.println(node.toPrettyString());\n</code></pre>\n<p><strong>Output</strong></p>\n<pre><code>{\n  &quot;employee1&quot; : {\n    &quot;id&quot; : 1,\n    &quot;name&quot; : &quot;John&quot;,\n    &quot;address&quot; : {\n      &quot;street&quot; : &quot;main street&quot;,\n      &quot;pin&quot; : &quot;123456&quot;\n    }\n  },\n  &quot;employee2&quot; : {\n    &quot;id&quot; : 2,\n    &quot;name&quot; : &quot;Mike&quot;,\n    &quot;address&quot; : {\n      &quot;street&quot; : &quot;51 street&quot;,\n      &quot;pin&quot; : &quot;234543&quot;\n    }\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":6162914,"reputation":87,"user_id":4803870,"display_name":"Arthur"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75299960,"answer_count":2,"score":0,"last_activity_date":1675185353,"creation_date":1675179604,"question_id":75299534,"body_markdown":"I have an input json like:\r\n\r\n    {\r\n        &quot;Employee&quot;: [\r\n          {\r\n            &quot;employee1.id&quot;: 1\r\n          },\r\n          {\r\n            &quot;employee1.name&quot;: &quot;John&quot;\r\n          },\r\n          {\r\n            &quot;employee1.address.street&quot;: &quot;main street&quot;\r\n          },\r\n          {\r\n            &quot;employee1.address.pin&quot;: &quot;123456&quot;\r\n          },\r\n    \t  {\r\n            &quot;employee2.id&quot;: 2\r\n          },\r\n          {\r\n            &quot;employee2.name&quot;: &quot;Mike&quot;\r\n          },\r\n          {\r\n            &quot;employee2.address.street&quot;: &quot;51 street&quot;\r\n          },\r\n          {\r\n            &quot;employee2.address.pin&quot;: &quot;234543&quot;\r\n          }\r\n    \t]\r\n    }\r\n\r\nAnd I am trying to convert it into:\r\n\r\n    {\r\n    \t&quot;employee1&quot;:{\r\n    \t\t&quot;id&quot;: 1,\r\n    \t\t&quot;name&quot;: &quot;John&quot;,\r\n    \t\t&quot;address&quot;: {\r\n    \t\t\t&quot;street&quot;: &quot;main street&quot;,\r\n    \t\t\t&quot;pin&quot;: &quot;123456&quot;\r\n    \t\t}\r\n    \t},\r\n    \t\t&quot;employee2&quot;:{\r\n    \t\t&quot;id&quot;: 2,\r\n    \t\t&quot;name&quot;: &quot;Mike&quot;,\r\n    \t\t&quot;address&quot;: {\r\n    \t\t\t&quot;street&quot;: &quot;51 street&quot;,\r\n    \t\t\t&quot;pin&quot;: &quot;234543&quot;\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nI tried to split the key from input json with dot i.e. &#39;**.**&#39; and tried to iterate over to construct a map: Map&lt;String, Object&gt;\r\nBut the problem is the input json key depth can go beyond 2 i.e. in future the input key can be like:\r\n\r\n    {\r\n        &quot;employee1.address.tempAddress.street&quot;: &quot;main street&quot;\r\n    },\r\n    {\r\n        &quot;employee1.address.permanentAddress.street&quot;: &quot;main street&quot;\r\n    }\r\n\r\nSo, is there any library available to achieve this, or anything closely related to this using which I can achieve this?","title":"Json manipulation and conversion in Java","body":"<p>I have an input json like:</p>\n<pre><code>{\n    &quot;Employee&quot;: [\n      {\n        &quot;employee1.id&quot;: 1\n      },\n      {\n        &quot;employee1.name&quot;: &quot;John&quot;\n      },\n      {\n        &quot;employee1.address.street&quot;: &quot;main street&quot;\n      },\n      {\n        &quot;employee1.address.pin&quot;: &quot;123456&quot;\n      },\n      {\n        &quot;employee2.id&quot;: 2\n      },\n      {\n        &quot;employee2.name&quot;: &quot;Mike&quot;\n      },\n      {\n        &quot;employee2.address.street&quot;: &quot;51 street&quot;\n      },\n      {\n        &quot;employee2.address.pin&quot;: &quot;234543&quot;\n      }\n    ]\n}\n</code></pre>\n<p>And I am trying to convert it into:</p>\n<pre><code>{\n    &quot;employee1&quot;:{\n        &quot;id&quot;: 1,\n        &quot;name&quot;: &quot;John&quot;,\n        &quot;address&quot;: {\n            &quot;street&quot;: &quot;main street&quot;,\n            &quot;pin&quot;: &quot;123456&quot;\n        }\n    },\n        &quot;employee2&quot;:{\n        &quot;id&quot;: 2,\n        &quot;name&quot;: &quot;Mike&quot;,\n        &quot;address&quot;: {\n            &quot;street&quot;: &quot;51 street&quot;,\n            &quot;pin&quot;: &quot;234543&quot;\n        }\n    }\n}\n</code></pre>\n<p>I tried to split the key from input json with dot i.e. '<strong>.</strong>' and tried to iterate over to construct a map: Map&lt;String, Object&gt;\nBut the problem is the input json key depth can go beyond 2 i.e. in future the input key can be like:</p>\n<pre><code>{\n    &quot;employee1.address.tempAddress.street&quot;: &quot;main street&quot;\n},\n{\n    &quot;employee1.address.permanentAddress.street&quot;: &quot;main street&quot;\n}\n</code></pre>\n<p>So, is there any library available to achieve this, or anything closely related to this using which I can achieve this?</p>\n"},{"tags":["java","spring","jpa","dependencies","mapper"],"comments":[{"owner":{"account_id":8316417,"reputation":565,"user_id":6249539,"accept_rate":83,"display_name":"yashpandey8055"},"score":0,"creation_date":1675172532,"post_id":75297952,"comment_id":132867966,"body_markdown":"I believe this line &quot;.map(UserMapper::toUser)&quot; is your problem , You have method reference to the same method which will indeed result in stackoverflow error","body":"I believe this line &quot;.map(UserMapper::toUser)&quot; is your problem , You have method reference to the same method which will indeed result in stackoverflow error"},{"owner":{"account_id":187094,"reputation":5113,"user_id":424903,"display_name":"Gimby"},"score":1,"creation_date":1675175272,"post_id":75297952,"comment_id":132868976,"body_markdown":"Snip: editing out a misunderstanding of the data. Somewhere there needs to be some logic which checks &quot;this user is already mapped before&quot;.","body":"Snip: editing out a misunderstanding of the data. Somewhere there needs to be some logic which checks &quot;this user is already mapped before&quot;."},{"owner":{"account_id":21382922,"reputation":89,"user_id":15748526,"display_name":"coman"},"score":0,"creation_date":1675177277,"post_id":75297952,"comment_id":132869713,"body_markdown":"@Gimby could i see an example please?","body":"@Gimby could i see an example please?"},{"owner":{"account_id":21382922,"reputation":89,"user_id":15748526,"display_name":"coman"},"score":0,"creation_date":1675179578,"post_id":75297952,"comment_id":132870607,"body_markdown":"I need a hint to solve this","body":"I need a hint to solve this"}],"answers":[{"tags":[],"owner":{"account_id":60737,"reputation":15904,"user_id":181336,"display_name":"Adriaan Koster"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675173453,"creation_date":1675172602,"answer_id":75298072,"question_id":75297952,"body_markdown":"One way to resolve this is to model the &#39;follows&#39; relationship as a separate entity:\r\n\r\n    @Table(name=&quot;user_followers&quot;)\r\n    public class Follows {\r\n\r\n       @Id\r\n       @GeneratedValue\r\n       private Long id;\r\n\r\n       @NotNull\r\n       @Column(name = &quot;follower_Id&quot;)\r\n       private User follower;\r\n\r\n       @NotNull\r\n       @Column(name = &quot;user_id&quot;)\r\n       private User user;\r\n    }\r\n\r\nThen you could give your user two one-to-many lists of these entities:\r\n\r\n    public class User {\r\n    \r\n       @Id\r\n       @GeneratedValue\r\n       private Long id;       \r\n    \r\n       @OneToMany(mappedBy = &quot;user_id&quot;)\r\n       private List&lt;Follows&gt; followers;       \r\n\r\n       @OneToMany(mappedBy = &quot;follower_Id&quot;)\r\n       private List&lt;Follows&gt; following;\r\n\r\n    }\r\n\r\nEDIT: instead of the id field in Follows you could use the user_id and follower_id as a composite primary key using @Embeddable. Omitted here for brevity. See here for more details: https://www.baeldung.com/jpa-many-to-many","title":"Mapping DTO with circular self dependency","body":"<p>One way to resolve this is to model the 'follows' relationship as a separate entity:</p>\n<pre><code>@Table(name=&quot;user_followers&quot;)\npublic class Follows {\n\n   @Id\n   @GeneratedValue\n   private Long id;\n\n   @NotNull\n   @Column(name = &quot;follower_Id&quot;)\n   private User follower;\n\n   @NotNull\n   @Column(name = &quot;user_id&quot;)\n   private User user;\n}\n</code></pre>\n<p>Then you could give your user two one-to-many lists of these entities:</p>\n<pre><code>public class User {\n\n   @Id\n   @GeneratedValue\n   private Long id;       \n\n   @OneToMany(mappedBy = &quot;user_id&quot;)\n   private List&lt;Follows&gt; followers;       \n\n   @OneToMany(mappedBy = &quot;follower_Id&quot;)\n   private List&lt;Follows&gt; following;\n\n}\n</code></pre>\n<p>EDIT: instead of the id field in Follows you could use the user_id and follower_id as a composite primary key using @Embeddable. Omitted here for brevity. See here for more details: <a href=\"https://www.baeldung.com/jpa-many-to-many\" rel=\"nofollow noreferrer\">https://www.baeldung.com/jpa-many-to-many</a></p>\n"},{"tags":[],"owner":{"account_id":7774266,"reputation":186,"user_id":5882852,"display_name":"Thorne"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675177928,"creation_date":1675173015,"answer_id":75298159,"question_id":75297952,"body_markdown":"Since you already have a DTO of `UserResponse`, you are on the right path towards a correct solution. My suggestion would be to avoid `@ManyToMany` on an entity level, and manage followers on a service level.\r\n\r\nThis means you will have to split relation ManyToMany join column into a separate entity, such as `UserFollowsEntity` with fields `userId` and `followsUserId`. Then remove `followers` and `following` lists from your User entity entirely.\r\n\r\nNow when creating `UserResponse` in a service, you will have to\r\n\r\n1. Select the actual user from repository – `userRepository.findById(userId)`\r\n2. Select followers – `userFollowsRepository.findByFollowsUserId(userId)`\r\n3. Select following – `userFollowsRepository.findByUserId(userId)`\r\n\r\nIt is a good practice to try and avoid bidirectional in entities relationships entirely if possible.\r\n\r\nEDIT: This will give you two lists: followers and following. You will probably want to know their user names, so what you can do is to merge followers and following lists into one, then extract all user ids from that list. Then query user repository with a list of those IDs, and just attach the required user information to your response model.\r\n\r\nYes it does sound like a bit more work compared to the seeming simplicity of utilizing JPA annotations, but this is the best way to avoid circular dependency as well as decouple the Follower functionality from your user entity.","title":"Mapping DTO with circular self dependency","body":"<p>Since you already have a DTO of <code>UserResponse</code>, you are on the right path towards a correct solution. My suggestion would be to avoid <code>@ManyToMany</code> on an entity level, and manage followers on a service level.</p>\n<p>This means you will have to split relation ManyToMany join column into a separate entity, such as <code>UserFollowsEntity</code> with fields <code>userId</code> and <code>followsUserId</code>. Then remove <code>followers</code> and <code>following</code> lists from your User entity entirely.</p>\n<p>Now when creating <code>UserResponse</code> in a service, you will have to</p>\n<ol>\n<li>Select the actual user from repository – <code>userRepository.findById(userId)</code></li>\n<li>Select followers – <code>userFollowsRepository.findByFollowsUserId(userId)</code></li>\n<li>Select following – <code>userFollowsRepository.findByUserId(userId)</code></li>\n</ol>\n<p>It is a good practice to try and avoid bidirectional in entities relationships entirely if possible.</p>\n<p>EDIT: This will give you two lists: followers and following. You will probably want to know their user names, so what you can do is to merge followers and following lists into one, then extract all user ids from that list. Then query user repository with a list of those IDs, and just attach the required user information to your response model.</p>\n<p>Yes it does sound like a bit more work compared to the seeming simplicity of utilizing JPA annotations, but this is the best way to avoid circular dependency as well as decouple the Follower functionality from your user entity.</p>\n"}],"owner":{"account_id":21382922,"reputation":89,"user_id":15748526,"display_name":"coman"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1675184770,"creation_date":1675171998,"question_id":75297952,"body_markdown":"I have a entity user with self dependency. When i Map this entity to DTO I have the problem of circular dependency. .\r\nUser.class:\r\n\r\n ```\r\npublic class User {\r\n\r\n    @Id\r\n    @GeneratedValue\r\n    private Long id;\r\n    @NotNull\r\n    @Column(name = &quot;first_name&quot;)\r\n    private String firstName;\r\n    @NotNull\r\n    @Column(name = &quot;last_name&quot;)\r\n    private String lastName;\r\n\r\n    @JsonBackReference\r\n    @ManyToMany(\r\n    private List&lt;User&gt; friedns_of = new ArrayList&lt;&gt;();\r\n\r\n\r\n    @ManyToMany(cascade = CascadeType.ALL,\r\n            mappedBy = &quot;followers&quot;)\r\n    private List&lt;User&gt; friends = new ArrayList&lt;&gt;();\r\n```\r\n\r\n\r\nUserMapper method in UserMapper:\r\n```\r\n\r\n\r\n    public static UserResponse toUser(User user) {\r\n        UserResponse userResponse = new UserResponse();\r\n        userResponse.setId(user.getId());\r\n        userResponse.setFollowers(user.getFollowers().stream().map(UserMapper::toUser).toList());\r\n        userResponse.setFollowing(user.getFollowing().stream().map(UserMapper::toUser).toList());\r\n        return userResponse;\r\n    }\r\n```\r\nWhen i run the method toUser() I get stackOverFlowError exception caused by the infinite circular dependency. Any advise how to solve this?\r\n\r\n\r\n","title":"Mapping DTO with circular self dependency","body":"<p>I have a entity user with self dependency. When i Map this entity to DTO I have the problem of circular dependency. .\nUser.class:</p>\n<pre><code>public class User {\n\n   @Id\n   @GeneratedValue\n   private Long id;\n   @NotNull\n   @Column(name = &quot;first_name&quot;)\n   private String firstName;\n   @NotNull\n   @Column(name = &quot;last_name&quot;)\n   private String lastName;\n\n   @JsonBackReference\n   @ManyToMany(\n   private List&lt;User&gt; friedns_of = new ArrayList&lt;&gt;();\n\n\n   @ManyToMany(cascade = CascadeType.ALL,\n           mappedBy = &quot;followers&quot;)\n   private List&lt;User&gt; friends = new ArrayList&lt;&gt;();\n</code></pre>\n<p>UserMapper method in UserMapper:</p>\n<pre><code>\n\n    public static UserResponse toUser(User user) {\n        UserResponse userResponse = new UserResponse();\n        userResponse.setId(user.getId());\n        userResponse.setFollowers(user.getFollowers().stream().map(UserMapper::toUser).toList());\n        userResponse.setFollowing(user.getFollowing().stream().map(UserMapper::toUser).toList());\n        return userResponse;\n    }\n</code></pre>\n<p>When i run the method toUser() I get stackOverFlowError exception caused by the infinite circular dependency. Any advise how to solve this?</p>\n"},{"tags":["java","json","algorithm","treeview"],"answers":[{"tags":[],"owner":{"account_id":22871786,"reputation":3,"user_id":17014713,"display_name":"JAlways"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675169878,"creation_date":1675169878,"answer_id":75297522,"question_id":75297188,"body_markdown":"When I look at your JSON, what first comes to my mind would be:\r\n```\r\n    public class Employee {\r\n    private Integer empId;\r\n    private String empName;\r\n    private Integer empGroupId;\r\n    private List&lt;Employee&gt; children;\r\n    }\r\n```\r\n\r\nIf thats not it, maybe their is a way to generate an Object from your JSON with Jackson/ObjectMapper and find an idea their? But I don&#39;t know if Jackson can do this without a given class, but maybe it helps you while looking for a solution.","title":"Java JSON tree structure creation from existing data","body":"<p>When I look at your JSON, what first comes to my mind would be:</p>\n<pre><code>    public class Employee {\n    private Integer empId;\n    private String empName;\n    private Integer empGroupId;\n    private List&lt;Employee&gt; children;\n    }\n</code></pre>\n<p>If thats not it, maybe their is a way to generate an Object from your JSON with Jackson/ObjectMapper and find an idea their? But I don't know if Jackson can do this without a given class, but maybe it helps you while looking for a solution.</p>\n"},{"tags":[],"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675184658,"creation_date":1675184658,"answer_id":75300592,"question_id":75297188,"body_markdown":"It is a matter of algorithm. Libraries or Java feature can&#39;t help you.\r\n\r\nFirst of all, `EmpTree.children` should be type of `List&lt;EmpTree&gt;`.\r\n\r\n    @Data\r\n    public class EmpTree {\r\n        private Integer empId;\r\n        private String empName;\r\n        private Integer empLevel;\r\n        private List&lt;EmpTree&gt; children;\r\n    }\r\n\r\nHere is a recursive function that build a `EmpTree`.\r\n\r\n    public EmpTree buildTree(List&lt;Employee&gt; employees, int empId, int empLevel) {\r\n        List&lt;Employee&gt; parent = employees.stream()\r\n            .filter(employee -&gt; empId == employee.getEmpId())\r\n            .collect(Collectors.toList());\r\n        List&lt;Integer&gt; groups = parent.stream()\r\n            .map(Employee::getEmpGroupId)\r\n            .collect(Collectors.toList());\r\n        List&lt;EmpTree&gt; childTree = employees.stream()\r\n            .filter(child -&gt; child.getEmpLevel() == empLevel + 1 &amp;&amp; groups.contains(child.getEmpGroupId()))\r\n            .map(Employee::getEmpId)\r\n            .distinct()\r\n            .map(childEmpId -&gt; buildTree(employees, childEmpId, empLevel + 1))\r\n            .collect(Collectors.toList());\r\n        return new EmpTree(empId, parent.get(0).getEmpName(), parent.get(0).getEmpLevel(), childTree.isEmpty() ? null : childTree);\r\n    }\r\n\r\nUse this statement to call the function.\r\n\r\n    EmpTree root = buildTree(employees, 1, 0);\r\n","title":"Java JSON tree structure creation from existing data","body":"<p>It is a matter of algorithm. Libraries or Java feature can't help you.</p>\n<p>First of all, <code>EmpTree.children</code> should be type of <code>List&lt;EmpTree&gt;</code>.</p>\n<pre><code>@Data\npublic class EmpTree {\n    private Integer empId;\n    private String empName;\n    private Integer empLevel;\n    private List&lt;EmpTree&gt; children;\n}\n</code></pre>\n<p>Here is a recursive function that build a <code>EmpTree</code>.</p>\n<pre><code>public EmpTree buildTree(List&lt;Employee&gt; employees, int empId, int empLevel) {\n    List&lt;Employee&gt; parent = employees.stream()\n        .filter(employee -&gt; empId == employee.getEmpId())\n        .collect(Collectors.toList());\n    List&lt;Integer&gt; groups = parent.stream()\n        .map(Employee::getEmpGroupId)\n        .collect(Collectors.toList());\n    List&lt;EmpTree&gt; childTree = employees.stream()\n        .filter(child -&gt; child.getEmpLevel() == empLevel + 1 &amp;&amp; groups.contains(child.getEmpGroupId()))\n        .map(Employee::getEmpId)\n        .distinct()\n        .map(childEmpId -&gt; buildTree(employees, childEmpId, empLevel + 1))\n        .collect(Collectors.toList());\n    return new EmpTree(empId, parent.get(0).getEmpName(), parent.get(0).getEmpLevel(), childTree.isEmpty() ? null : childTree);\n}\n</code></pre>\n<p>Use this statement to call the function.</p>\n<pre><code>EmpTree root = buildTree(employees, 1, 0);\n</code></pre>\n"}],"owner":{"account_id":7513807,"reputation":237,"user_id":5707925,"accept_rate":33,"display_name":"WebNoob"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75300592,"answer_count":2,"score":0,"last_activity_date":1675184658,"creation_date":1675168315,"question_id":75297188,"body_markdown":"Need your help with creating a JSON tree structure from available data. This is what is available with me right now,\r\n\r\n[![Data in DB][2]][2]\r\n\r\nThe same data in json format is as below,\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    {\r\n    &quot;employees&quot;: [\r\n      {\r\n        &quot;empId&quot;: 1,\r\n        &quot;empName&quot;: &quot;Alex&quot;,\r\n        &quot;empGroupId&quot;: 3,\r\n        &quot;empLevel&quot;: 0\r\n      },\r\n      {\r\n        &quot;empId&quot;: 42,\r\n        &quot;empName&quot;: &quot;Sam&quot;,\r\n        &quot;empGroupId&quot;: 3,\r\n        &quot;empLevel&quot;: 1\r\n      },\r\n      {\r\n        &quot;empId&quot;: 22,\r\n        &quot;empName&quot;: &quot;Max&quot;,\r\n        &quot;empGroupId&quot;: 3,\r\n        &quot;empLevel&quot;: 2\r\n      },\r\n      {\r\n        &quot;empId&quot;: 54,\r\n        &quot;empName&quot;: &quot;Ervin&quot;,\r\n        &quot;empGroupId&quot;: 3,\r\n        &quot;empLevel&quot;: 3\r\n      },\r\n      {\r\n        &quot;empId&quot;: 1,\r\n        &quot;empName&quot;: &quot;Alex&quot;,\r\n        &quot;empGroupId&quot;: 5,\r\n        &quot;empLevel&quot;: 0\r\n      },\r\n      {\r\n        &quot;empId&quot;: 42,\r\n        &quot;empName&quot;: &quot;Sam&quot;,\r\n        &quot;empGroupId&quot;: 5,\r\n        &quot;empLevel&quot;: 1\r\n      },\r\n      {\r\n        &quot;empId&quot;: 22,\r\n        &quot;empName&quot;: &quot;Max&quot;,\r\n        &quot;empGroupId&quot;: 5,\r\n        &quot;empLevel&quot;: 2\r\n      },\r\n      {\r\n        &quot;empId&quot;: 68,\r\n        &quot;empName&quot;: &quot;Jack&quot;,\r\n        &quot;empGroupId&quot;: 5,\r\n        &quot;empLevel&quot;: 3\r\n      },\r\n      {\r\n        &quot;empId&quot;: 1,\r\n        &quot;empName&quot;: &quot;Alex&quot;,\r\n        &quot;empGroupId&quot;: 7,\r\n        &quot;empLevel&quot;: 0\r\n      },\r\n      {\r\n        &quot;empId&quot;: 38,\r\n        &quot;empName&quot;: &quot;Mark&quot;,\r\n        &quot;empGroupId&quot;: 7,\r\n        &quot;empLevel&quot;: 7\r\n      },\r\n      {\r\n        &quot;empId&quot;: 12,\r\n        &quot;empName&quot;: &quot;Danny&quot;,\r\n        &quot;empGroupId&quot;: 7,\r\n        &quot;empLevel&quot;: 2\r\n      },\r\n      {\r\n        &quot;empId&quot;: 1,\r\n        &quot;empName&quot;: &quot;Alex&quot;,\r\n        &quot;empGroupId&quot;: 4,\r\n        &quot;empLevel&quot;: 0\r\n      },\r\n      {\r\n        &quot;empId&quot;: 38,\r\n        &quot;empName&quot;: &quot;Mark&quot;,\r\n        &quot;empGroupId&quot;: 4,\r\n        &quot;empLevel&quot;: 1\r\n      },\r\n      {\r\n        &quot;empId&quot;: 55,\r\n        &quot;empName&quot;: &quot;Kate&quot;,\r\n        &quot;empGroupId&quot;: 4,\r\n        &quot;empLevel&quot;: 2\r\n      }\r\n    ]\r\n    }\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nI want to create a JSON tree structure which will map all the employees in hierarchical manner. Such that all the common employees will appear only once and according to their levels.\r\n\r\nSo basically, empName will have a unique empId associated with it. Multiple employees can be part of employee group [indicated by empGroupId]. The empLevel indicates level of employee, 0 being top person, then 1, and so on...\r\n\r\nFor e.g, if we consider first 8 rows in table above, it contains 2 empGroupIds, 3 &amp; 5. Alex, Sam and Max are the employees common in both groups with levels 0,1,2 respectively. Ervin and Jack are the last level at 3. And since their top 3 members are same, the final structure will have: Alex -&gt; Sam -&gt; Max -&gt; [Ervin, Jack]\r\n\r\nSo below is what I want to generate,\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    [{\r\n      &quot;empName&quot;:&quot;Alex&quot;,\r\n      &quot;empId&quot; : 1,\r\n      &quot;empLevel&quot; : 0,\r\n      &quot;children&quot; :[{\r\n        &quot;empName&quot;:&quot;Sam&quot;,\r\n        &quot;empId&quot; : 42,\r\n        &quot;empLevel&quot; : 1,\r\n        &quot;children&quot; : [{\r\n            &quot;empName&quot;:&quot;Max&quot;,\r\n            &quot;empId&quot; : 22,\r\n            &quot;empLevel&quot; : 2,\r\n            &quot;children&quot;: [{\r\n                &quot;empName&quot;:&quot;Ervin&quot;,\r\n                &quot;empId&quot; : 54,\r\n                &quot;empLevel&quot; : 3            \r\n                },{\r\n                &quot;empName&quot;:&quot;Jack&quot;,\r\n                &quot;empId&quot; : 68,\r\n                &quot;empLevel&quot; : 3 \r\n            }]\r\n        }]\r\n      },\r\n      {\r\n        &quot;empName&quot;:&quot;Mark&quot;,\r\n        &quot;empId&quot; : 38,\r\n        &quot;empLevel&quot; : 1,\r\n        &quot;children&quot;:[{\r\n            &quot;empName&quot;:&quot;Danny&quot;,\r\n            &quot;empId&quot; : 12,\r\n            &quot;empLevel&quot; : 2\r\n            },{\r\n            &quot;empName&quot;:&quot;Kate&quot;,\r\n            &quot;empId&quot; : 55,\r\n            &quot;empLevel&quot; : 2      \r\n        }]\r\n      }]\r\n    }]\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nSo far I have created a sample program to read the JSON file and mapped the employees. However not sure how to approach the design for this tree structure. This is what I have right now,\r\n\r\n    @Data\r\n    public class Employee {\r\n        private Integer empId;\r\n        private String empName;\r\n        private Integer empGroupId;\r\n        private Integer empLevel;\r\n    }\r\n    \r\n    @Data\r\n    public class EmpLevels {\r\n        private List&lt;Employee&gt; employees;\r\n    }\r\n    \r\n    @Data\r\n    public class EmpTree {\r\n        private Integer empId;\r\n        private String empName;\r\n        private Integer empLevel;\r\n        private List&lt;Employee&gt; children;\r\n    }\r\n\r\nMy main method contains below stuff so far, regarding reading JSON and mapping employees,\r\n\r\n    EmpLevels empLevels = mapper.readValue(Paths.get(&quot;emp.json&quot;).toFile(), EmpLevels.class);\r\n    List&lt;Employee&gt; employees = empLevels.getEmployees();\r\n    System.out.println(&quot;Employees : &quot;+employees);\r\n\r\nHow to go ahead with building the logic to generate the JSON tree structure? Do we have any libraries that can help here? Or any latest Java release feature that can help generate this one?\r\n\r\n  [2]: https://i.stack.imgur.com/ifL3x.png","title":"Java JSON tree structure creation from existing data","body":"<p>Need your help with creating a JSON tree structure from available data. This is what is available with me right now,</p>\n<p><a href=\"https://i.stack.imgur.com/ifL3x.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ifL3x.png\" alt=\"Data in DB\" /></a></p>\n<p>The same data in json format is as below,</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>{\n\"employees\": [\n  {\n    \"empId\": 1,\n    \"empName\": \"Alex\",\n    \"empGroupId\": 3,\n    \"empLevel\": 0\n  },\n  {\n    \"empId\": 42,\n    \"empName\": \"Sam\",\n    \"empGroupId\": 3,\n    \"empLevel\": 1\n  },\n  {\n    \"empId\": 22,\n    \"empName\": \"Max\",\n    \"empGroupId\": 3,\n    \"empLevel\": 2\n  },\n  {\n    \"empId\": 54,\n    \"empName\": \"Ervin\",\n    \"empGroupId\": 3,\n    \"empLevel\": 3\n  },\n  {\n    \"empId\": 1,\n    \"empName\": \"Alex\",\n    \"empGroupId\": 5,\n    \"empLevel\": 0\n  },\n  {\n    \"empId\": 42,\n    \"empName\": \"Sam\",\n    \"empGroupId\": 5,\n    \"empLevel\": 1\n  },\n  {\n    \"empId\": 22,\n    \"empName\": \"Max\",\n    \"empGroupId\": 5,\n    \"empLevel\": 2\n  },\n  {\n    \"empId\": 68,\n    \"empName\": \"Jack\",\n    \"empGroupId\": 5,\n    \"empLevel\": 3\n  },\n  {\n    \"empId\": 1,\n    \"empName\": \"Alex\",\n    \"empGroupId\": 7,\n    \"empLevel\": 0\n  },\n  {\n    \"empId\": 38,\n    \"empName\": \"Mark\",\n    \"empGroupId\": 7,\n    \"empLevel\": 7\n  },\n  {\n    \"empId\": 12,\n    \"empName\": \"Danny\",\n    \"empGroupId\": 7,\n    \"empLevel\": 2\n  },\n  {\n    \"empId\": 1,\n    \"empName\": \"Alex\",\n    \"empGroupId\": 4,\n    \"empLevel\": 0\n  },\n  {\n    \"empId\": 38,\n    \"empName\": \"Mark\",\n    \"empGroupId\": 4,\n    \"empLevel\": 1\n  },\n  {\n    \"empId\": 55,\n    \"empName\": \"Kate\",\n    \"empGroupId\": 4,\n    \"empLevel\": 2\n  }\n]\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>I want to create a JSON tree structure which will map all the employees in hierarchical manner. Such that all the common employees will appear only once and according to their levels.</p>\n<p>So basically, empName will have a unique empId associated with it. Multiple employees can be part of employee group [indicated by empGroupId]. The empLevel indicates level of employee, 0 being top person, then 1, and so on...</p>\n<p>For e.g, if we consider first 8 rows in table above, it contains 2 empGroupIds, 3 &amp; 5. Alex, Sam and Max are the employees common in both groups with levels 0,1,2 respectively. Ervin and Jack are the last level at 3. And since their top 3 members are same, the final structure will have: Alex -&gt; Sam -&gt; Max -&gt; [Ervin, Jack]</p>\n<p>So below is what I want to generate,</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>[{\n  \"empName\":\"Alex\",\n  \"empId\" : 1,\n  \"empLevel\" : 0,\n  \"children\" :[{\n    \"empName\":\"Sam\",\n    \"empId\" : 42,\n    \"empLevel\" : 1,\n    \"children\" : [{\n        \"empName\":\"Max\",\n        \"empId\" : 22,\n        \"empLevel\" : 2,\n        \"children\": [{\n            \"empName\":\"Ervin\",\n            \"empId\" : 54,\n            \"empLevel\" : 3            \n            },{\n            \"empName\":\"Jack\",\n            \"empId\" : 68,\n            \"empLevel\" : 3 \n        }]\n    }]\n  },\n  {\n    \"empName\":\"Mark\",\n    \"empId\" : 38,\n    \"empLevel\" : 1,\n    \"children\":[{\n        \"empName\":\"Danny\",\n        \"empId\" : 12,\n        \"empLevel\" : 2\n        },{\n        \"empName\":\"Kate\",\n        \"empId\" : 55,\n        \"empLevel\" : 2      \n    }]\n  }]\n}]</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>So far I have created a sample program to read the JSON file and mapped the employees. However not sure how to approach the design for this tree structure. This is what I have right now,</p>\n<pre><code>@Data\npublic class Employee {\n    private Integer empId;\n    private String empName;\n    private Integer empGroupId;\n    private Integer empLevel;\n}\n\n@Data\npublic class EmpLevels {\n    private List&lt;Employee&gt; employees;\n}\n\n@Data\npublic class EmpTree {\n    private Integer empId;\n    private String empName;\n    private Integer empLevel;\n    private List&lt;Employee&gt; children;\n}\n</code></pre>\n<p>My main method contains below stuff so far, regarding reading JSON and mapping employees,</p>\n<pre><code>EmpLevels empLevels = mapper.readValue(Paths.get(&quot;emp.json&quot;).toFile(), EmpLevels.class);\nList&lt;Employee&gt; employees = empLevels.getEmployees();\nSystem.out.println(&quot;Employees : &quot;+employees);\n</code></pre>\n<p>How to go ahead with building the logic to generate the JSON tree structure? Do we have any libraries that can help here? Or any latest Java release feature that can help generate this one?</p>\n"},{"tags":["java","json","spring"],"comments":[{"owner":{"account_id":14182472,"reputation":198,"user_id":10245558,"display_name":"Roland"},"score":0,"creation_date":1675243538,"post_id":75298861,"comment_id":132884576,"body_markdown":"can you provide the REST endpoint that is receiving this JSON payload","body":"can you provide the REST endpoint that is receiving this JSON payload"}],"answers":[{"tags":[],"owner":{"account_id":13068865,"reputation":357,"user_id":9443176,"display_name":"Max Aminov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675183483,"creation_date":1675183483,"answer_id":75300365,"question_id":75298861,"body_markdown":"You do not need a Data class because **data** field in your json is not an object - it is an array of objects, in your case it is an array of **Coin** objects.\r\n\r\nChange it the next way: \r\n\r\n```\r\npublic class MainDTO{\r\n    @JsonProperty(&quot;status&quot;)\r\n    private Status status;\r\n    @JsonProperty(&quot;data&quot;)\r\n    private List&lt;Coin&gt; data;\r\n}\r\n```","title":"How to map JSON array to Java class in Spring Boot","body":"<p>You do not need a Data class because <strong>data</strong> field in your json is not an object - it is an array of objects, in your case it is an array of <strong>Coin</strong> objects.</p>\n<p>Change it the next way:</p>\n<pre><code>public class MainDTO{\n    @JsonProperty(&quot;status&quot;)\n    private Status status;\n    @JsonProperty(&quot;data&quot;)\n    private List&lt;Coin&gt; data;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14429973,"reputation":2483,"user_id":10423604,"display_name":"Volodya Lombrozo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675184433,"creation_date":1675184433,"answer_id":75300556,"question_id":75298861,"body_markdown":"It&#39;s worth mentioning that the JSON in your example is incorrect due to extra commas. I presume the correct form should look like this:\r\n```json\r\n{\r\n    &quot;status&quot;: {\r\n        &quot;timestamp&quot;: &quot;2023-01-31T14:06:45.210Z&quot;,\r\n        &quot;error_code&quot;: 0,\r\n        &quot;error_message&quot;: null\r\n    },\r\n    &quot;data&quot;: [\r\n        {\r\n            &quot;id&quot;: 7982,\r\n            &quot;name&quot;: &quot;wc4qtz6py1i&quot;,\r\n            &quot;tags&quot;: [\r\n                &quot;40rcevshzab&quot;,\r\n                &quot;3ja25pufu0z&quot;\r\n            ],\r\n            &quot;quote&quot;: {\r\n                &quot;USD&quot;: {\r\n                    &quot;price&quot;: 0.2\r\n                },\r\n                &quot;BTC&quot;: {\r\n                    &quot;price&quot;: 7159\r\n                }\r\n            }\r\n        },\r\n        {\r\n            &quot;id&quot;: 8742,\r\n            &quot;name&quot;: &quot;uhso98ca&quot;,\r\n            &quot;tags&quot;: [\r\n                &quot;84jsjsaesxx&quot;,\r\n                &quot;sasdd5dda76&quot;\r\n            ],\r\n            &quot;quote&quot;: {\r\n                &quot;USD&quot;: {\r\n                    &quot;price&quot;: 6\r\n                },\r\n                &quot;BTC&quot;: {\r\n                    &quot;price&quot;: 1230\r\n                }\r\n            }\r\n        }\r\n     ]\r\n }\r\n```\r\n\r\nAs for classes I would suggest you the next:\r\n\r\n```java\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Getter\r\n@Setter\r\npublic class MainDTO {\r\n    @JsonProperty(&quot;status&quot;)\r\n    private Status status;\r\n    @JsonProperty(&quot;data&quot;)\r\n    private List&lt;Coin&gt; coins;\r\n}\r\n\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Getter\r\n@Setter\r\npublic class Status {\r\n    @JsonProperty(&quot;timestamp&quot;)\r\n    private String timestamp;\r\n    @JsonProperty(&quot;error_code&quot;)\r\n    private Integer errorCode;\r\n    @JsonProperty(&quot;error_message&quot;)\r\n    private String errorMessage;\r\n}\r\n\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Getter\r\n@Setter\r\npublic class Coin {\r\n    @JsonProperty(&quot;id&quot;)\r\n    private Integer id;\r\n    @JsonProperty(&quot;name&quot;)\r\n    private String name;\r\n    @JsonProperty(&quot;tags&quot;)\r\n    private List&lt;String&gt; tags;\r\n    @JsonProperty(&quot;quote&quot;)\r\n    private Map&lt;String, Quote&gt; quote;\r\n}\r\n\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Getter\r\n@Setter\r\npublic class Quote {\r\n    @JsonProperty(&quot;price&quot;)\r\n    private Double price;\r\n}\r\n```\r\n\r\nThe &quot;data&quot; array in the `JSON` response is an array of coins, so the coins property in the `MainDTO` class should be of type `List&lt;Coin&gt;`.","title":"How to map JSON array to Java class in Spring Boot","body":"<p>It's worth mentioning that the JSON in your example is incorrect due to extra commas. I presume the correct form should look like this:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;status&quot;: {\n        &quot;timestamp&quot;: &quot;2023-01-31T14:06:45.210Z&quot;,\n        &quot;error_code&quot;: 0,\n        &quot;error_message&quot;: null\n    },\n    &quot;data&quot;: [\n        {\n            &quot;id&quot;: 7982,\n            &quot;name&quot;: &quot;wc4qtz6py1i&quot;,\n            &quot;tags&quot;: [\n                &quot;40rcevshzab&quot;,\n                &quot;3ja25pufu0z&quot;\n            ],\n            &quot;quote&quot;: {\n                &quot;USD&quot;: {\n                    &quot;price&quot;: 0.2\n                },\n                &quot;BTC&quot;: {\n                    &quot;price&quot;: 7159\n                }\n            }\n        },\n        {\n            &quot;id&quot;: 8742,\n            &quot;name&quot;: &quot;uhso98ca&quot;,\n            &quot;tags&quot;: [\n                &quot;84jsjsaesxx&quot;,\n                &quot;sasdd5dda76&quot;\n            ],\n            &quot;quote&quot;: {\n                &quot;USD&quot;: {\n                    &quot;price&quot;: 6\n                },\n                &quot;BTC&quot;: {\n                    &quot;price&quot;: 1230\n                }\n            }\n        }\n     ]\n }\n</code></pre>\n<p>As for classes I would suggest you the next:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@AllArgsConstructor\n@NoArgsConstructor\n@Getter\n@Setter\npublic class MainDTO {\n    @JsonProperty(&quot;status&quot;)\n    private Status status;\n    @JsonProperty(&quot;data&quot;)\n    private List&lt;Coin&gt; coins;\n}\n\n@AllArgsConstructor\n@NoArgsConstructor\n@Getter\n@Setter\npublic class Status {\n    @JsonProperty(&quot;timestamp&quot;)\n    private String timestamp;\n    @JsonProperty(&quot;error_code&quot;)\n    private Integer errorCode;\n    @JsonProperty(&quot;error_message&quot;)\n    private String errorMessage;\n}\n\n@AllArgsConstructor\n@NoArgsConstructor\n@Getter\n@Setter\npublic class Coin {\n    @JsonProperty(&quot;id&quot;)\n    private Integer id;\n    @JsonProperty(&quot;name&quot;)\n    private String name;\n    @JsonProperty(&quot;tags&quot;)\n    private List&lt;String&gt; tags;\n    @JsonProperty(&quot;quote&quot;)\n    private Map&lt;String, Quote&gt; quote;\n}\n\n@AllArgsConstructor\n@NoArgsConstructor\n@Getter\n@Setter\npublic class Quote {\n    @JsonProperty(&quot;price&quot;)\n    private Double price;\n}\n</code></pre>\n<p>The &quot;data&quot; array in the <code>JSON</code> response is an array of coins, so the coins property in the <code>MainDTO</code> class should be of type <code>List&lt;Coin&gt;</code>.</p>\n"}],"owner":{"account_id":9614104,"reputation":47,"user_id":10960565,"display_name":"Даниил "},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":75300365,"answer_count":2,"score":3,"last_activity_date":1675184433,"creation_date":1675176344,"question_id":75298861,"body_markdown":"I&#39;m trying to get responce from another API  convert it to Java clases and then sent to the front end using Spring Boot\r\nI have JSON response from external API like this\r\n```\r\n{\r\n    &quot;status&quot;: {\r\n        &quot;timestamp&quot;: &quot;2023-01-31T14:06:45.210Z&quot;,\r\n        &quot;error_code&quot;: 0,\r\n        &quot;error_message&quot;: null,\r\n    },\r\n    &quot;data&quot;: [\r\n        {\r\n            &quot;id&quot;: 7982,\r\n            &quot;name&quot;: &quot;wc4qtz6py1i&quot;,\r\n            &quot;tags&quot;: [\r\n                &quot;40rcevshzab&quot;,\r\n                &quot;3ja25pufu0z&quot;\r\n            ],\r\n            &quot;quote&quot;: {\r\n                &quot;USD&quot;: {\r\n                    &quot;price&quot;: 0.2,\r\n                },\r\n                &quot;BTC&quot;: {\r\n                    &quot;price&quot;: 7159,\r\n                }\r\n            }\r\n        },\r\n        {\r\n            &quot;id&quot;: 8742,\r\n            &quot;name&quot;: &quot;uhso98ca&quot;,\r\n            &quot;tags&quot;: [\r\n                &quot;84jsjsaesxx&quot;,\r\n                &quot;sasdd5dda76&quot;\r\n            ],\r\n            &quot;quote&quot;: {\r\n                &quot;USD&quot;: {\r\n                    &quot;price&quot;: 6,\r\n                },\r\n                &quot;BTC&quot;: {\r\n                    &quot;price&quot;: 1230,\r\n                }\r\n            }\r\n        }\r\n     ]\r\n }\r\n```\r\nI need to convert all of this to classes using Spring Boot. But how I should organize it?\r\nThe most question is about &quot;Data&quot; array.\r\nFor now I have something like this.\r\n\r\n\r\n```\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Getter\r\n@Setter\r\npublic class MainDTO{\r\n    @JsonProperty(&quot;status&quot;)\r\n    private Status status;\r\n    @JsonProperty(&quot;data&quot;)\r\n    private Data data;\r\n}\r\n```\r\n```\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Getter\r\n@Setter\r\npublic class Data {\r\n    Coin[] coins;\r\n}\r\n```\r\n```\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Getter\r\n@Setter\r\npublic class Coin{\r\n    @JsonProperty(&quot;id&quot;)\r\n    private Integer id;\r\n    @JsonProperty(&quot;name&quot;)\r\n    private String name;\r\n    private Map&lt;String, Coin&gt; quote;\r\n}\r\n```\r\nBut it doesn&#39;t work. I have error:\r\n```\r\nI have error\r\nTue Jan 31 16:13:45 EET 2023\r\nThere was an unexpected error (type=Internal Server Error, status=500).\r\nError while extracting response for type [class com.example.myCoolApp.entity.MainDTO] and content type [application/json;charset=utf-8]\r\norg.springframework.web.client.RestClientException: Error while extracting response for type [class com.example.myCoolApp.entity.CryptoDTO] and content type [application/json;charset=utf-8]\r\n```\r\n","title":"How to map JSON array to Java class in Spring Boot","body":"<p>I'm trying to get responce from another API  convert it to Java clases and then sent to the front end using Spring Boot\nI have JSON response from external API like this</p>\n<pre><code>{\n    &quot;status&quot;: {\n        &quot;timestamp&quot;: &quot;2023-01-31T14:06:45.210Z&quot;,\n        &quot;error_code&quot;: 0,\n        &quot;error_message&quot;: null,\n    },\n    &quot;data&quot;: [\n        {\n            &quot;id&quot;: 7982,\n            &quot;name&quot;: &quot;wc4qtz6py1i&quot;,\n            &quot;tags&quot;: [\n                &quot;40rcevshzab&quot;,\n                &quot;3ja25pufu0z&quot;\n            ],\n            &quot;quote&quot;: {\n                &quot;USD&quot;: {\n                    &quot;price&quot;: 0.2,\n                },\n                &quot;BTC&quot;: {\n                    &quot;price&quot;: 7159,\n                }\n            }\n        },\n        {\n            &quot;id&quot;: 8742,\n            &quot;name&quot;: &quot;uhso98ca&quot;,\n            &quot;tags&quot;: [\n                &quot;84jsjsaesxx&quot;,\n                &quot;sasdd5dda76&quot;\n            ],\n            &quot;quote&quot;: {\n                &quot;USD&quot;: {\n                    &quot;price&quot;: 6,\n                },\n                &quot;BTC&quot;: {\n                    &quot;price&quot;: 1230,\n                }\n            }\n        }\n     ]\n }\n</code></pre>\n<p>I need to convert all of this to classes using Spring Boot. But how I should organize it?\nThe most question is about &quot;Data&quot; array.\nFor now I have something like this.</p>\n<pre><code>@AllArgsConstructor\n@NoArgsConstructor\n@Getter\n@Setter\npublic class MainDTO{\n    @JsonProperty(&quot;status&quot;)\n    private Status status;\n    @JsonProperty(&quot;data&quot;)\n    private Data data;\n}\n</code></pre>\n<pre><code>@AllArgsConstructor\n@NoArgsConstructor\n@Getter\n@Setter\npublic class Data {\n    Coin[] coins;\n}\n</code></pre>\n<pre><code>@AllArgsConstructor\n@NoArgsConstructor\n@Getter\n@Setter\npublic class Coin{\n    @JsonProperty(&quot;id&quot;)\n    private Integer id;\n    @JsonProperty(&quot;name&quot;)\n    private String name;\n    private Map&lt;String, Coin&gt; quote;\n}\n</code></pre>\n<p>But it doesn't work. I have error:</p>\n<pre><code>I have error\nTue Jan 31 16:13:45 EET 2023\nThere was an unexpected error (type=Internal Server Error, status=500).\nError while extracting response for type [class com.example.myCoolApp.entity.MainDTO] and content type [application/json;charset=utf-8]\norg.springframework.web.client.RestClientException: Error while extracting response for type [class com.example.myCoolApp.entity.CryptoDTO] and content type [application/json;charset=utf-8]\n</code></pre>\n"},{"tags":["java","file","object"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1675183805,"post_id":75300399,"comment_id":132872124,"body_markdown":"Serialize &#39;testArray&#39; after adding your objects to it. Add an empty constructor to `test` (which should start with a capital as should all class names)","body":"Serialize &#39;testArray&#39; after adding your objects to it. Add an empty constructor to <code>test</code> (which should start with a capital as should all class names)"},{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1675184470,"post_id":75300399,"comment_id":132872338,"body_markdown":"Open the stream, and only close it once you&#39;ve written all objects.","body":"Open the stream, and only close it once you&#39;ve written all objects."},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1675184906,"post_id":75300399,"comment_id":132872469,"body_markdown":"your `output` method overwrites any existing file. If you call it twice, the second call will overwrite the file from the first call.","body":"your <code>output</code> method overwrites any existing file. If you call it twice, the second call will overwrite the file from the first call."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1675189728,"post_id":75300399,"comment_id":132873947,"body_markdown":"`new FileOutputStream(&quot;open.ses&quot;)` ← That immediately wipes out any existing file.  I suggest checking if any of the [constructors of FileOutputStream](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/io/FileOutputStream.html#constructor-summary) can append to a file instead of overwriting it.","body":"<code>new FileOutputStream(&quot;open.ses&quot;)</code> ← That immediately wipes out any existing file.  I suggest checking if any of the <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/io/FileOutputStream.html#constructor-summary\" rel=\"nofollow noreferrer\">constructors of FileOutputStream</a> can append to a file instead of overwriting it."}],"owner":{"account_id":20679840,"reputation":13,"user_id":15183681,"display_name":"aren talb"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675184255,"creation_date":1675183630,"question_id":75300399,"body_markdown":"```\r\nimport java.io.*;\r\nimport java.util.ArrayList;\r\n\r\npublic class Main {\r\n    static ArrayList&lt;test&gt; testArrey = new ArrayList&lt;test&gt;();\r\n    public static void main(String[] args) {\r\n        output(new test(18, &quot;aren&quot;));\r\n        output(new test(22, &quot;ahmad&quot;));\r\n        input();\r\n        read();\r\n    }\r\n\r\n    public static void read() {\r\n        for (test a : testArrey) {\r\n            System.out.println(a.age);\r\n        }\r\n    }\r\n    public static void input() {\r\n        try {\r\n            FileInputStream fileInput = new FileInputStream(&quot;open.ses&quot;);\r\n            ObjectInputStream ObjectInput = new ObjectInputStream(fileInput);\r\n\r\n            Object a1 = ObjectInput.readObject();\r\n            test b1 = (test) a1;\r\n            testArrey.add(b1);\r\n\r\n            Object a2 = ObjectInput.readObject();\r\n            test b2 = (test) a2;\r\n            testArrey.add(b2);\r\n\r\n            ObjectInput.close();\r\n        } catch (Exception ex) {\r\n            System.out.println(&quot;input error&quot;);\r\n            ex.printStackTrace();\r\n        }\r\n    }\r\n    public static void output(test a) {\r\n        try {\r\n            FileOutputStream  fileOut = new FileOutputStream(&quot;open.ses&quot;);\r\n            ObjectOutputStream objectOut = new ObjectOutputStream(fileOut);\r\n\r\n            objectOut.writeObject(a);\r\n\r\n            objectOut.close();\r\n        } catch (Exception ex) {\r\n            System.out.println(&quot;output error&quot;);\r\n            ex.printStackTrace();\r\n        }\r\n    }\r\n\r\n\r\n    public static class test implements Serializable {\r\n        int age ;\r\n        String  name ;\r\n\r\n        public test(int age , String name ) {\r\n            this.age = age;\r\n            this.name = name;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n\r\nas you can see a called output() method two time with new to object of (test)as argument ,and it must write two object on (open.ses)file but when i want to call (.readobject)two times it gives me an error that says one object is saved ............\r\n\r\nhow to write more than one object with the help of method like the one i wrote ??","title":"i can not write more than one object on a file in java","body":"<pre><code>import java.io.*;\nimport java.util.ArrayList;\n\npublic class Main {\n    static ArrayList&lt;test&gt; testArrey = new ArrayList&lt;test&gt;();\n    public static void main(String[] args) {\n        output(new test(18, &quot;aren&quot;));\n        output(new test(22, &quot;ahmad&quot;));\n        input();\n        read();\n    }\n\n    public static void read() {\n        for (test a : testArrey) {\n            System.out.println(a.age);\n        }\n    }\n    public static void input() {\n        try {\n            FileInputStream fileInput = new FileInputStream(&quot;open.ses&quot;);\n            ObjectInputStream ObjectInput = new ObjectInputStream(fileInput);\n\n            Object a1 = ObjectInput.readObject();\n            test b1 = (test) a1;\n            testArrey.add(b1);\n\n            Object a2 = ObjectInput.readObject();\n            test b2 = (test) a2;\n            testArrey.add(b2);\n\n            ObjectInput.close();\n        } catch (Exception ex) {\n            System.out.println(&quot;input error&quot;);\n            ex.printStackTrace();\n        }\n    }\n    public static void output(test a) {\n        try {\n            FileOutputStream  fileOut = new FileOutputStream(&quot;open.ses&quot;);\n            ObjectOutputStream objectOut = new ObjectOutputStream(fileOut);\n\n            objectOut.writeObject(a);\n\n            objectOut.close();\n        } catch (Exception ex) {\n            System.out.println(&quot;output error&quot;);\n            ex.printStackTrace();\n        }\n    }\n\n\n    public static class test implements Serializable {\n        int age ;\n        String  name ;\n\n        public test(int age , String name ) {\n            this.age = age;\n            this.name = name;\n        }\n    }\n}\n</code></pre>\n<p>as you can see a called output() method two time with new to object of (test)as argument ,and it must write two object on (open.ses)file but when i want to call (.readobject)two times it gives me an error that says one object is saved ............</p>\n<p>how to write more than one object with the help of method like the one i wrote ??</p>\n"},{"tags":["java","multithreading","apache-spark","salesforce","java-threads"],"owner":{"account_id":27163151,"reputation":1,"user_id":20701012,"display_name":"maheshbaliga"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":157,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675183838,"creation_date":1675183838,"question_id":75300442,"body_markdown":"Even after the job completed its execution, the spark driver continuous to run (for almost 5 minutes) since there are few threads that are waiting. Below is a thread dump of the waiting threads. The application (job) connects to an instance of Salesforce API to get some data, does some transformation and completes. This waiting thread issue is with a particular Salesforce instance. If the application is connected to another instance, threads complete as soon as the job completes. It looks like these threads are not spun. Can you spot the issue? Or any method/tool to debug and find what the issue might be? \r\n\r\n```\r\nTo analyse thread dump - https://fastthread.io/ft-index.jsp\r\n\r\nFull thread dump OpenJDK 64-Bit Server VM (25.352-b08 mixed mode):\r\n\r\n&quot;Attach Listener&quot; #144 daemon prio=9 os_prio=0 tid=0x00007f0f98001000 nid=0x4afd1 waiting on condition [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n&quot;DestroyJavaVM&quot; #141 prio=5 os_prio=0 tid=0x00007f0fe001d000 nid=0x3e3d4 waiting on condition [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n&quot;OkHttp something.my.salesforce.com Writer&quot; #90 prio=5 os_prio=0 tid=0x00007f0f70002800 nid=0x4260f waiting on condition [0x00007f0ec9ffe000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for  &lt;0x00000000d29322d0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\r\n\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1081)\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)\r\n\tat java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:750)\r\n\r\n&quot;OkHttp ConnectionPool&quot; #88 daemon prio=5 os_prio=0 tid=0x00007f0fe181e000 nid=0x425cd in Object.wait() [0x00007f0fc39f8000]\r\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\r\n\tat java.lang.Object.wait(Native Method)\r\n\tat java.lang.Object.wait(Object.java:460)\r\n\tat okhttp3.ConnectionPool$1.run(ConnectionPool.java:67)\r\n\t- locked &lt;0x00000000d29601a8&gt; (a okhttp3.ConnectionPool)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:750)\r\n\r\n&quot;OkHttp something.my.salesforce.com&quot; #87 prio=5 os_prio=0 tid=0x00007f0fe181d800 nid=0x425cc runnable [0x00007f0fb96db000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\tat java.net.SocketInputStream.socketRead0(Native Method)\r\n\tat java.net.SocketInputStream.socketRead(SocketInputStream.java:116)\r\n\tat java.net.SocketInputStream.read(SocketInputStream.java:171)\r\n\tat java.net.SocketInputStream.read(SocketInputStream.java:141)\r\n\tat sun.security.ssl.SSLSocketInputRecord.read(SSLSocketInputRecord.java:464)\r\n\tat sun.security.ssl.SSLSocketInputRecord.bytesInCompletePacket(SSLSocketInputRecord.java:68)\r\n\tat sun.security.ssl.SSLSocketImpl.readApplicationRecord(SSLSocketImpl.java:1346)\r\n\tat sun.security.ssl.SSLSocketImpl.access$300(SSLSocketImpl.java:73)\r\n\tat sun.security.ssl.SSLSocketImpl$AppInputStream.read(SSLSocketImpl.java:962)\r\n\tat okio.Okio$2.read(Okio.java:140)\r\n\tat okio.AsyncTimeout$2.read(AsyncTimeout.java:237)\r\n\tat okio.RealBufferedSource.request(RealBufferedSource.java:68)\r\n\tat okio.RealBufferedSource.require(RealBufferedSource.java:61)\r\n\tat okhttp3.internal.http2.Http2Reader.nextFrame(Http2Reader.java:95)\r\n\tat okhttp3.internal.http2.Http2Connection$ReaderRunnable.execute(Http2Connection.java:609)\r\n\tat okhttp3.internal.NamedRunnable.run(NamedRunnable.java:32)\r\n\tat java.lang.Thread.run(Thread.java:750)\r\n\r\n&quot;Abandoned connection cleanup thread&quot; #31 daemon prio=5 os_prio=0 tid=0x00007f0fe36f0800 nid=0x3eb9c in Object.wait() [0x00007f0fc16ce000]\r\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\r\n\tat java.lang.Object.wait(Native Method)\r\n\tat java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:144)\r\n\t- locked &lt;0x00000000d0608350&gt; (a java.lang.ref.ReferenceQueue$Lock)\r\n\tat com.mysql.jdbc.AbandonedConnectionCleanupThread.run(AbandonedConnectionCleanupThread.java:43)\r\n\r\n&quot;org.apache.hadoop.fs.FileSystem$Statistics$StatisticsDataReferenceCleaner&quot; #29 daemon prio=5 os_prio=0 tid=0x00007f0fe2f90000 nid=0x3eb5e in Object.wait() [0x00007f0fc1bcf000]\r\n   java.lang.Thread.State: WAITING (on object monitor)\r\n\tat java.lang.Object.wait(Native Method)\r\n\t- waiting on &lt;0x00000000d0608380&gt; (a java.lang.ref.ReferenceQueue$Lock)\r\n\tat java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:144)\r\n\t- locked &lt;0x00000000d0608380&gt; (a java.lang.ref.ReferenceQueue$Lock)\r\n\tat java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:165)\r\n\tat org.apache.hadoop.fs.FileSystem$Statistics$StatisticsDataReferenceCleaner.run(FileSystem.java:3762)\r\n\tat java.lang.Thread.run(Thread.java:750)\r\n\r\n&quot;Service Thread&quot; #12 daemon prio=9 os_prio=0 tid=0x00007f0fe0100000 nid=0x3eabd runnable [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n&quot;C1 CompilerThread3&quot; #11 daemon prio=9 os_prio=0 tid=0x00007f0fe00fc800 nid=0x3eabc waiting on condition [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n&quot;C2 CompilerThread2&quot; #10 daemon prio=9 os_prio=0 tid=0x00007f0fe00fa000 nid=0x3eabb waiting on condition [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n&quot;C2 CompilerThread1&quot; #9 daemon prio=9 os_prio=0 tid=0x00007f0fe00f8800 nid=0x3eaba waiting on condition [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n&quot;C2 CompilerThread0&quot; #8 daemon prio=9 os_prio=0 tid=0x00007f0fe00f5800 nid=0x3eab9 waiting on condition [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n&quot;JDWP Command Reader&quot; #7 daemon prio=10 os_prio=0 tid=0x00007f0f8c001800 nid=0x3eab7 runnable [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n&quot;JDWP Event Helper Thread&quot; #6 daemon prio=10 os_prio=0 tid=0x00007f0fe00ef800 nid=0x3e3e7 runnable [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n&quot;JDWP Transport Listener: dt_socket&quot; #5 daemon prio=10 os_prio=0 tid=0x00007f0fe00eb000 nid=0x3e3e6 runnable [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n&quot;Signal Dispatcher&quot; #4 daemon prio=9 os_prio=0 tid=0x00007f0fe00d0800 nid=0x3e3e4 runnable [0x0000000000000000]\r\n   java.lang.Thread.State: RUNNABLE\r\n\r\n&quot;Finalizer&quot; #3 daemon prio=8 os_prio=0 tid=0x00007f0fe00a1800 nid=0x3e3e1 in Object.wait() [0x00007f0fca9e8000]\r\n   java.lang.Thread.State: WAITING (on object monitor)\r\n\tat java.lang.Object.wait(Native Method)\r\n\tat java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:144)\r\n\t- locked &lt;0x00000000d0013fc8&gt; (a java.lang.ref.ReferenceQueue$Lock)\r\n\tat java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:165)\r\n\tat java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:188)\r\n\r\n&quot;Reference Handler&quot; #2 daemon prio=10 os_prio=0 tid=0x00007f0fe009d000 nid=0x3e3e0 in Object.wait() [0x00007f0fcaae9000]\r\n   java.lang.Thread.State: WAITING (on object monitor)\r\n\tat java.lang.Object.wait(Native Method)\r\n\tat java.lang.Object.wait(Object.java:502)\r\n\tat java.lang.ref.Reference.tryHandlePending(Reference.java:191)\r\n\t- locked &lt;0x00000000d0004bb0&gt; (a java.lang.ref.Reference$Lock)\r\n\tat java.lang.ref.Reference$ReferenceHandler.run(Reference.java:153)\r\n\r\n&quot;VM Thread&quot; os_prio=0 tid=0x00007f0fe0093000 nid=0x3e3df runnable \r\n\r\n&quot;GC task thread#0 (ParallelGC)&quot; os_prio=0 tid=0x00007f0fe0032000 nid=0x3e3d5 runnable \r\n\r\n&quot;GC task thread#1 (ParallelGC)&quot; os_prio=0 tid=0x00007f0fe0034000 nid=0x3e3d6 runnable \r\n\r\n&quot;GC task thread#2 (ParallelGC)&quot; os_prio=0 tid=0x00007f0fe0035800 nid=0x3e3d7 runnable \r\n\r\n&quot;GC task thread#3 (ParallelGC)&quot; os_prio=0 tid=0x00007f0fe0037800 nid=0x3e3d8 runnable \r\n\r\n&quot;GC task thread#4 (ParallelGC)&quot; os_prio=0 tid=0x00007f0fe0039000 nid=0x3e3d9 runnable \r\n\r\n&quot;GC task thread#5 (ParallelGC)&quot; os_prio=0 tid=0x00007f0fe003b000 nid=0x3e3da runnable \r\n\r\n&quot;GC task thread#6 (ParallelGC)&quot; os_prio=0 tid=0x00007f0fe003c800 nid=0x3e3db runnable \r\n\r\n&quot;GC task thread#7 (ParallelGC)&quot; os_prio=0 tid=0x00007f0fe003e800 nid=0x3e3dc runnable \r\n\r\n&quot;VM Periodic Task Thread&quot; os_prio=0 tid=0x00007f0fe0102800 nid=0x3eabe waiting on condition \r\n\r\nJNI global references: 19237\r\n```\r\n\r\n\r\nI am expecting to find out why these threads are spun only when I connect to one particular instance of Salesforce and not others. Using Jprofiler, I figured out that these are the threads that are waiting due to which the spark driver continuous to run for about 5 minutes. The application completes within 30 seconds. Not able to figure out what is so different about that salesforce instance. The API call to Salesforce is returned within 25 seconds with status 200 OK. \r\n\r\nThese threads are spun when the load method is called from the below code and the same threads continue to run for 5 minutes:\r\n\r\n```\r\ndataframe = sqlContext.read().format(&quot;com.springml.spark.salesforce&quot;).\r\n option(&quot;sessionId&quot;, &lt;bearerToken&gt;).\r\n option(&quot;login&quot;, &lt;instanceUrl&gt;).\r\n option(&quot;soql&quot;, &lt;query&gt;).\r\n option(&quot;version&quot;, &quot;54.0&quot;).\r\n load();\r\n```","title":"Apache Spark multithreading issue with a particular Salesforce instance","body":"<p>Even after the job completed its execution, the spark driver continuous to run (for almost 5 minutes) since there are few threads that are waiting. Below is a thread dump of the waiting threads. The application (job) connects to an instance of Salesforce API to get some data, does some transformation and completes. This waiting thread issue is with a particular Salesforce instance. If the application is connected to another instance, threads complete as soon as the job completes. It looks like these threads are not spun. Can you spot the issue? Or any method/tool to debug and find what the issue might be?</p>\n<pre><code>To analyse thread dump - https://fastthread.io/ft-index.jsp\n\nFull thread dump OpenJDK 64-Bit Server VM (25.352-b08 mixed mode):\n\n&quot;Attach Listener&quot; #144 daemon prio=9 os_prio=0 tid=0x00007f0f98001000 nid=0x4afd1 waiting on condition [0x0000000000000000]\n   java.lang.Thread.State: RUNNABLE\n\n&quot;DestroyJavaVM&quot; #141 prio=5 os_prio=0 tid=0x00007f0fe001d000 nid=0x3e3d4 waiting on condition [0x0000000000000000]\n   java.lang.Thread.State: RUNNABLE\n\n&quot;OkHttp something.my.salesforce.com Writer&quot; #90 prio=5 os_prio=0 tid=0x00007f0f70002800 nid=0x4260f waiting on condition [0x00007f0ec9ffe000]\n   java.lang.Thread.State: WAITING (parking)\n    at sun.misc.Unsafe.park(Native Method)\n    - parking to wait for  &lt;0x00000000d29322d0&gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\n    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\n    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)\n    at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1081)\n    at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)\n    at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at java.lang.Thread.run(Thread.java:750)\n\n&quot;OkHttp ConnectionPool&quot; #88 daemon prio=5 os_prio=0 tid=0x00007f0fe181e000 nid=0x425cd in Object.wait() [0x00007f0fc39f8000]\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\n    at java.lang.Object.wait(Native Method)\n    at java.lang.Object.wait(Object.java:460)\n    at okhttp3.ConnectionPool$1.run(ConnectionPool.java:67)\n    - locked &lt;0x00000000d29601a8&gt; (a okhttp3.ConnectionPool)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at java.lang.Thread.run(Thread.java:750)\n\n&quot;OkHttp something.my.salesforce.com&quot; #87 prio=5 os_prio=0 tid=0x00007f0fe181d800 nid=0x425cc runnable [0x00007f0fb96db000]\n   java.lang.Thread.State: RUNNABLE\n    at java.net.SocketInputStream.socketRead0(Native Method)\n    at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)\n    at java.net.SocketInputStream.read(SocketInputStream.java:171)\n    at java.net.SocketInputStream.read(SocketInputStream.java:141)\n    at sun.security.ssl.SSLSocketInputRecord.read(SSLSocketInputRecord.java:464)\n    at sun.security.ssl.SSLSocketInputRecord.bytesInCompletePacket(SSLSocketInputRecord.java:68)\n    at sun.security.ssl.SSLSocketImpl.readApplicationRecord(SSLSocketImpl.java:1346)\n    at sun.security.ssl.SSLSocketImpl.access$300(SSLSocketImpl.java:73)\n    at sun.security.ssl.SSLSocketImpl$AppInputStream.read(SSLSocketImpl.java:962)\n    at okio.Okio$2.read(Okio.java:140)\n    at okio.AsyncTimeout$2.read(AsyncTimeout.java:237)\n    at okio.RealBufferedSource.request(RealBufferedSource.java:68)\n    at okio.RealBufferedSource.require(RealBufferedSource.java:61)\n    at okhttp3.internal.http2.Http2Reader.nextFrame(Http2Reader.java:95)\n    at okhttp3.internal.http2.Http2Connection$ReaderRunnable.execute(Http2Connection.java:609)\n    at okhttp3.internal.NamedRunnable.run(NamedRunnable.java:32)\n    at java.lang.Thread.run(Thread.java:750)\n\n&quot;Abandoned connection cleanup thread&quot; #31 daemon prio=5 os_prio=0 tid=0x00007f0fe36f0800 nid=0x3eb9c in Object.wait() [0x00007f0fc16ce000]\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\n    at java.lang.Object.wait(Native Method)\n    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:144)\n    - locked &lt;0x00000000d0608350&gt; (a java.lang.ref.ReferenceQueue$Lock)\n    at com.mysql.jdbc.AbandonedConnectionCleanupThread.run(AbandonedConnectionCleanupThread.java:43)\n\n&quot;org.apache.hadoop.fs.FileSystem$Statistics$StatisticsDataReferenceCleaner&quot; #29 daemon prio=5 os_prio=0 tid=0x00007f0fe2f90000 nid=0x3eb5e in Object.wait() [0x00007f0fc1bcf000]\n   java.lang.Thread.State: WAITING (on object monitor)\n    at java.lang.Object.wait(Native Method)\n    - waiting on &lt;0x00000000d0608380&gt; (a java.lang.ref.ReferenceQueue$Lock)\n    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:144)\n    - locked &lt;0x00000000d0608380&gt; (a java.lang.ref.ReferenceQueue$Lock)\n    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:165)\n    at org.apache.hadoop.fs.FileSystem$Statistics$StatisticsDataReferenceCleaner.run(FileSystem.java:3762)\n    at java.lang.Thread.run(Thread.java:750)\n\n&quot;Service Thread&quot; #12 daemon prio=9 os_prio=0 tid=0x00007f0fe0100000 nid=0x3eabd runnable [0x0000000000000000]\n   java.lang.Thread.State: RUNNABLE\n\n&quot;C1 CompilerThread3&quot; #11 daemon prio=9 os_prio=0 tid=0x00007f0fe00fc800 nid=0x3eabc waiting on condition [0x0000000000000000]\n   java.lang.Thread.State: RUNNABLE\n\n&quot;C2 CompilerThread2&quot; #10 daemon prio=9 os_prio=0 tid=0x00007f0fe00fa000 nid=0x3eabb waiting on condition [0x0000000000000000]\n   java.lang.Thread.State: RUNNABLE\n\n&quot;C2 CompilerThread1&quot; #9 daemon prio=9 os_prio=0 tid=0x00007f0fe00f8800 nid=0x3eaba waiting on condition [0x0000000000000000]\n   java.lang.Thread.State: RUNNABLE\n\n&quot;C2 CompilerThread0&quot; #8 daemon prio=9 os_prio=0 tid=0x00007f0fe00f5800 nid=0x3eab9 waiting on condition [0x0000000000000000]\n   java.lang.Thread.State: RUNNABLE\n\n&quot;JDWP Command Reader&quot; #7 daemon prio=10 os_prio=0 tid=0x00007f0f8c001800 nid=0x3eab7 runnable [0x0000000000000000]\n   java.lang.Thread.State: RUNNABLE\n\n&quot;JDWP Event Helper Thread&quot; #6 daemon prio=10 os_prio=0 tid=0x00007f0fe00ef800 nid=0x3e3e7 runnable [0x0000000000000000]\n   java.lang.Thread.State: RUNNABLE\n\n&quot;JDWP Transport Listener: dt_socket&quot; #5 daemon prio=10 os_prio=0 tid=0x00007f0fe00eb000 nid=0x3e3e6 runnable [0x0000000000000000]\n   java.lang.Thread.State: RUNNABLE\n\n&quot;Signal Dispatcher&quot; #4 daemon prio=9 os_prio=0 tid=0x00007f0fe00d0800 nid=0x3e3e4 runnable [0x0000000000000000]\n   java.lang.Thread.State: RUNNABLE\n\n&quot;Finalizer&quot; #3 daemon prio=8 os_prio=0 tid=0x00007f0fe00a1800 nid=0x3e3e1 in Object.wait() [0x00007f0fca9e8000]\n   java.lang.Thread.State: WAITING (on object monitor)\n    at java.lang.Object.wait(Native Method)\n    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:144)\n    - locked &lt;0x00000000d0013fc8&gt; (a java.lang.ref.ReferenceQueue$Lock)\n    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:165)\n    at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:188)\n\n&quot;Reference Handler&quot; #2 daemon prio=10 os_prio=0 tid=0x00007f0fe009d000 nid=0x3e3e0 in Object.wait() [0x00007f0fcaae9000]\n   java.lang.Thread.State: WAITING (on object monitor)\n    at java.lang.Object.wait(Native Method)\n    at java.lang.Object.wait(Object.java:502)\n    at java.lang.ref.Reference.tryHandlePending(Reference.java:191)\n    - locked &lt;0x00000000d0004bb0&gt; (a java.lang.ref.Reference$Lock)\n    at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:153)\n\n&quot;VM Thread&quot; os_prio=0 tid=0x00007f0fe0093000 nid=0x3e3df runnable \n\n&quot;GC task thread#0 (ParallelGC)&quot; os_prio=0 tid=0x00007f0fe0032000 nid=0x3e3d5 runnable \n\n&quot;GC task thread#1 (ParallelGC)&quot; os_prio=0 tid=0x00007f0fe0034000 nid=0x3e3d6 runnable \n\n&quot;GC task thread#2 (ParallelGC)&quot; os_prio=0 tid=0x00007f0fe0035800 nid=0x3e3d7 runnable \n\n&quot;GC task thread#3 (ParallelGC)&quot; os_prio=0 tid=0x00007f0fe0037800 nid=0x3e3d8 runnable \n\n&quot;GC task thread#4 (ParallelGC)&quot; os_prio=0 tid=0x00007f0fe0039000 nid=0x3e3d9 runnable \n\n&quot;GC task thread#5 (ParallelGC)&quot; os_prio=0 tid=0x00007f0fe003b000 nid=0x3e3da runnable \n\n&quot;GC task thread#6 (ParallelGC)&quot; os_prio=0 tid=0x00007f0fe003c800 nid=0x3e3db runnable \n\n&quot;GC task thread#7 (ParallelGC)&quot; os_prio=0 tid=0x00007f0fe003e800 nid=0x3e3dc runnable \n\n&quot;VM Periodic Task Thread&quot; os_prio=0 tid=0x00007f0fe0102800 nid=0x3eabe waiting on condition \n\nJNI global references: 19237\n</code></pre>\n<p>I am expecting to find out why these threads are spun only when I connect to one particular instance of Salesforce and not others. Using Jprofiler, I figured out that these are the threads that are waiting due to which the spark driver continuous to run for about 5 minutes. The application completes within 30 seconds. Not able to figure out what is so different about that salesforce instance. The API call to Salesforce is returned within 25 seconds with status 200 OK.</p>\n<p>These threads are spun when the load method is called from the below code and the same threads continue to run for 5 minutes:</p>\n<pre><code>dataframe = sqlContext.read().format(&quot;com.springml.spark.salesforce&quot;).\n option(&quot;sessionId&quot;, &lt;bearerToken&gt;).\n option(&quot;login&quot;, &lt;instanceUrl&gt;).\n option(&quot;soql&quot;, &lt;query&gt;).\n option(&quot;version&quot;, &quot;54.0&quot;).\n load();\n</code></pre>\n"},{"tags":["java","time","timezone"],"answers":[{"tags":[],"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1305139160,"creation_date":1305138850,"answer_id":5968927,"question_id":5968842,"body_markdown":"I would *definitely* do this in [Joda Time][1] instead. If you *really* want to do this with the built-in API, you need to use `Calendar` to find the local time in a particular time zone - but Joda would make it much simpler.\r\n\r\nYou&#39;d use a [`DateTime`][2] which is in a specific time zone, and possibly take the `LocalTime` from that to compare with some `LocalTime`s you&#39;ve hard-coded (or read from a configuration file etc).\r\n\r\n\r\n  [1]: http://joda-time.sf.net\r\n  [2]: http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTime.html","title":"Compare the current EST to 2PM EST? How?","body":"<p>I would <em>definitely</em> do this in <a href=\"http://joda-time.sf.net\" rel=\"nofollow\">Joda Time</a> instead. If you <em>really</em> want to do this with the built-in API, you need to use <code>Calendar</code> to find the local time in a particular time zone - but Joda would make it much simpler.</p>\n\n<p>You'd use a <a href=\"http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTime.html\" rel=\"nofollow\"><code>DateTime</code></a> which is in a specific time zone, and possibly take the <code>LocalTime</code> from that to compare with some <code>LocalTime</code>s you've hard-coded (or read from a configuration file etc).</p>\n"},{"tags":[],"owner":{"account_id":383085,"reputation":3075,"user_id":738711,"display_name":"VirtualTroll"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1305138879,"creation_date":1305138879,"answer_id":5968932,"question_id":5968842,"body_markdown":"You should use the date object instead of using a string. To compare use the method date.after and date.before. ","title":"Compare the current EST to 2PM EST? How?","body":"<p>You should use the date object instead of using a string. To compare use the method date.after and date.before. </p>\n"},{"tags":[],"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1675183738,"creation_date":1675182784,"answer_id":75300220,"question_id":5968842,"body_markdown":"java.time\r\n--\r\n\r\nThe question uses the `java.util` date-time API which was the right thing to do using the Java standard library in 2011. In March 2014, the [modern Date-Time API](https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html) was released as part of the **Java 8 standard library** which supplanted the legacy date-time API and since then it is strongly recommended to switch to `java.time`, the modern date-time API.\r\n\r\nAlso, notice the following message on the Home-Page of [Joda-Time](https://www.joda.org/joda-time/):\r\n\r\n&gt; **Note that from Java SE 8 onwards, users are asked to migrate to `java.time` (JSR-310) - a core part of the JDK which replaces this\r\n&gt; project.**\r\n\r\nSolution using `java.time`\r\n--\r\n\r\nYou can use [`ZonedDateTime`](https://docs.oracle.com/javase/8/docs/api/java/time/ZonedDateTime.html) to specify date-time along with its `ZoneId`.\r\n\r\n**Demo:**\r\n\r\n    import java.time.ZoneId;\r\n    import java.time.ZonedDateTime;\r\n    import java.time.temporal.ChronoUnit;\r\n    \r\n    class Main {\r\n        public static void main(String[] args) {\r\n            ZonedDateTime now = ZonedDateTime.now(ZoneId.of(&quot;America/New_York&quot;));\r\n            ZonedDateTime then = now.withHour(14).truncatedTo(ChronoUnit.HOURS);\r\n            System.out.println(now);\r\n            System.out.println(then);\r\n    \r\n            // Compare\r\n            if (now.isBefore(then))\r\n                System.out.println(now + &quot; is before &quot; + then);\r\n            else if (now.isEqual(then))\r\n                System.out.println(now + &quot; is equal to &quot; + then);\r\n            else\r\n                System.out.println(now + &quot; is after &quot; + then);\r\n    \r\n            // Another ways to compare\r\n            if (!now.isAfter(then))\r\n                System.out.println(now + &quot; is either before or at &quot; + then);\r\n        }\r\n    }\r\n\r\n**Output as of now**:\r\n\r\n    2023-01-31T11:48:40.191880-05:00[America/New_York]\r\n    2023-01-31T14:00-05:00[America/New_York]\r\n    2023-01-31T11:48:40.191880-05:00[America/New_York] is before 2023-01-31T14:00-05:00[America/New_York]\r\n    2023-01-31T11:48:40.191880-05:00[America/New_York] is either before or at 2023-01-31T14:00-05:00[America/New_York]\r\n\r\n[&lt;kbd&gt;ONLINE DEMO&lt;/kbd&gt;](https://ideone.com/ydhPnE)\r\n\r\nLearn more about the modern Date-Time API from **[Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**.\r\n\r\n**Do not use three-letter timezone ID**: Note from the Java 7 `Timezone` [documentation](https://docs.oracle.com/javase/7/docs/api/java/util/TimeZone.html):\r\n\r\n&gt; ### Three-letter time zone IDs\r\n&gt;For compatibility with JDK 1.1.x, some other three-letter time zone IDs (such as &quot;PST&quot;, &quot;CTT&quot;, &quot;AST&quot;) are\r\n&gt; also supported. However, **their use is deprecated** because the same\r\n&gt; abbreviation is often used for multiple time zones (for example, &quot;CST&quot;\r\n&gt; could be U.S. &quot;Central Standard Time&quot; and &quot;China Standard Time&quot;), and\r\n&gt; the Java platform can then only recognize one of them.\r\n\r\n","title":"Compare the current EST to 2PM EST? How?","body":"<h2>java.time</h2>\n<p>The question uses the <code>java.util</code> date-time API which was the right thing to do using the Java standard library in 2011. In March 2014, the <a href=\"https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html\" rel=\"nofollow noreferrer\">modern Date-Time API</a> was released as part of the <strong>Java 8 standard library</strong> which supplanted the legacy date-time API and since then it is strongly recommended to switch to <code>java.time</code>, the modern date-time API.</p>\n<p>Also, notice the following message on the Home-Page of <a href=\"https://www.joda.org/joda-time/\" rel=\"nofollow noreferrer\">Joda-Time</a>:</p>\n<blockquote>\n<p><strong>Note that from Java SE 8 onwards, users are asked to migrate to <code>java.time</code> (JSR-310) - a core part of the JDK which replaces this\nproject.</strong></p>\n</blockquote>\n<h2>Solution using <code>java.time</code></h2>\n<p>You can use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/ZonedDateTime.html\" rel=\"nofollow noreferrer\"><code>ZonedDateTime</code></a> to specify date-time along with its <code>ZoneId</code>.</p>\n<p><strong>Demo:</strong></p>\n<pre><code>import java.time.ZoneId;\nimport java.time.ZonedDateTime;\nimport java.time.temporal.ChronoUnit;\n\nclass Main {\n    public static void main(String[] args) {\n        ZonedDateTime now = ZonedDateTime.now(ZoneId.of(&quot;America/New_York&quot;));\n        ZonedDateTime then = now.withHour(14).truncatedTo(ChronoUnit.HOURS);\n        System.out.println(now);\n        System.out.println(then);\n\n        // Compare\n        if (now.isBefore(then))\n            System.out.println(now + &quot; is before &quot; + then);\n        else if (now.isEqual(then))\n            System.out.println(now + &quot; is equal to &quot; + then);\n        else\n            System.out.println(now + &quot; is after &quot; + then);\n\n        // Another ways to compare\n        if (!now.isAfter(then))\n            System.out.println(now + &quot; is either before or at &quot; + then);\n    }\n}\n</code></pre>\n<p><strong>Output as of now</strong>:</p>\n<pre><code>2023-01-31T11:48:40.191880-05:00[America/New_York]\n2023-01-31T14:00-05:00[America/New_York]\n2023-01-31T11:48:40.191880-05:00[America/New_York] is before 2023-01-31T14:00-05:00[America/New_York]\n2023-01-31T11:48:40.191880-05:00[America/New_York] is either before or at 2023-01-31T14:00-05:00[America/New_York]\n</code></pre>\n<p><a href=\"https://ideone.com/ydhPnE\" rel=\"nofollow noreferrer\"><kbd>ONLINE DEMO</kbd></a></p>\n<p>Learn more about the modern Date-Time API from <strong><a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">Trail: Date Time</a></strong>.</p>\n<p><strong>Do not use three-letter timezone ID</strong>: Note from the Java 7 <code>Timezone</code> <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/TimeZone.html\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n<blockquote>\n<h3>Three-letter time zone IDs</h3>\n<p>For compatibility with JDK 1.1.x, some other three-letter time zone IDs (such as &quot;PST&quot;, &quot;CTT&quot;, &quot;AST&quot;) are\nalso supported. However, <strong>their use is deprecated</strong> because the same\nabbreviation is often used for multiple time zones (for example, &quot;CST&quot;\ncould be U.S. &quot;Central Standard Time&quot; and &quot;China Standard Time&quot;), and\nthe Java platform can then only recognize one of them.</p>\n</blockquote>\n"}],"owner":{"account_id":86417,"reputation":38255,"user_id":240337,"accept_rate":78,"display_name":"Thang Pham"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":479,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":5968927,"answer_count":3,"score":1,"last_activity_date":1675183738,"creation_date":1305138434,"question_id":5968842,"body_markdown":"So I have this piece of code that would return the current EST\r\n\r\n    Date easternTime = new Date();\r\n    DateFormat format = new SimpleDateFormat(&quot;h:mm a&quot;);\r\n    format.setTimeZone(TimeZone.getTimeZone(&quot;EST&quot;));\r\n    return format.format(easternTime);\r\n\r\nlet say it return `x = 12:15PM`\r\n\r\nI want to compare `x` to 3:00PM EST to see if x before or after 3:00PM EST, and/or is x between 3:00PM - 6:00PM EST. Is there a way to do this.\r\n\r\nWe dont have to use `java.util.date`. I take solution with `calendar` as well","title":"Compare the current EST to 2PM EST? How?","body":"<p>So I have this piece of code that would return the current EST</p>\n\n<pre><code>Date easternTime = new Date();\nDateFormat format = new SimpleDateFormat(\"h:mm a\");\nformat.setTimeZone(TimeZone.getTimeZone(\"EST\"));\nreturn format.format(easternTime);\n</code></pre>\n\n<p>let say it return <code>x = 12:15PM</code></p>\n\n<p>I want to compare <code>x</code> to 3:00PM EST to see if x before or after 3:00PM EST, and/or is x between 3:00PM - 6:00PM EST. Is there a way to do this.</p>\n\n<p>We dont have to use <code>java.util.date</code>. I take solution with <code>calendar</code> as well</p>\n"},{"tags":["java","macos","editor","java-9","jshell"],"comments":[{"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":0,"creation_date":1513594623,"post_id":47866775,"comment_id":82698852,"body_markdown":"Plus one for the specific editors. Just try(assuming you have Atom installed) `/set editor atom` or `/set editor vi` these shall work.","body":"Plus one for the specific editors. Just try(assuming you have Atom installed) <code>&#47;set editor atom</code> or <code>&#47;set editor vi</code> these shall work."},{"owner":{"account_id":1521730,"reputation":5152,"user_id":1421222,"display_name":"Bless"},"score":0,"creation_date":1513594846,"post_id":47866775,"comment_id":82698979,"body_markdown":"Try `/set editor &quot;/Applications/Sublime Text.app/Contents/SharedSupport/bin/subl&quot;`\nor \n`/set editor subl` if `subl` is already in the `PATH`","body":"Try <code>&#47;set editor &quot;&#47;Applications&#47;Sublime Text.app&#47;Contents&#47;SharedSupport&#47;bin&#47;subl&quot;</code> or  <code>&#47;set editor subl</code> if <code>subl</code> is already in the <code>PATH</code>"},{"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":0,"creation_date":1513595085,"post_id":47866775,"comment_id":82699148,"body_markdown":"@Bless For me at least, these result in the same error as in the question.","body":"@Bless For me at least, these result in the same error as in the question."},{"owner":{"account_id":4911554,"reputation":13237,"user_id":3956731,"accept_rate":95,"display_name":"KayV"},"score":0,"creation_date":1513597632,"post_id":47866775,"comment_id":82700559,"body_markdown":"@nullpointer even it did not worked for atom... Editing the question for the same.","body":"@nullpointer even it did not worked for atom... Editing the question for the same."},{"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":0,"creation_date":1513598080,"post_id":47866775,"comment_id":82700805,"body_markdown":"@KayV Editing the question with operating system tag, I am though pretty sure this is not java-9, jshell specific. I&#39;ve seem similar issues previously with git as well. Its the application recognition within your OS. for e.g if I simply type `atom` on my terminal, Atom opens up but the same doesn&#39;t work for Sublime. That seems to me the cause of why jshell is not able to open the Sublime editor for me at least. And you didn&#39;t come back with vim editor result, does that work fine?","body":"@KayV Editing the question with operating system tag, I am though pretty sure this is not java-9, jshell specific. I&#39;ve seem similar issues previously with git as well. Its the application recognition within your OS. for e.g if I simply type <code>atom</code> on my terminal, Atom opens up but the same doesn&#39;t work for Sublime. That seems to me the cause of why jshell is not able to open the Sublime editor for me at least. And you didn&#39;t come back with vim editor result, does that work fine?"},{"owner":{"account_id":1521730,"reputation":5152,"user_id":1421222,"display_name":"Bless"},"score":0,"creation_date":1513610481,"post_id":47866775,"comment_id":82708181,"body_markdown":"@nullpointer @KayV Just tried on my mac. Can confirm that `/set editor subl -w` works for me.\nCan you check if `sublime` or `subl` is in the `PATH`?\nAlso, does running `&quot;/Applications/Sublime Text.app/Contents/SharedSupport/bin/subl&quot;` directly on the terminal start Sublime Text?","body":"@nullpointer @KayV Just tried on my mac. Can confirm that <code>&#47;set editor subl -w</code> works for me. Can you check if <code>sublime</code> or <code>subl</code> is in the <code>PATH</code>? Also, does running <code>&quot;&#47;Applications&#47;Sublime Text.app&#47;Contents&#47;SharedSupport&#47;bin&#47;subl&quot;</code> directly on the terminal start Sublime Text?"}],"answers":[{"tags":[],"owner":{"account_id":12532816,"reputation":1,"user_id":9120451,"display_name":"crdzanzicas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1513730809,"creation_date":1513730809,"answer_id":47897309,"question_id":47866775,"body_markdown":"It worked for me by supplying the full path to the sublime executable.  E.g on Windows.\r\n\r\n`jshell&gt; /set editor c:\\sublime3\\sublime_text.exe`\r\n","title":"How to set sublime as an external editor for jshell?","body":"<p>It worked for me by supplying the full path to the sublime executable.  E.g on Windows.</p>\n\n<p><code>jshell&gt; /set editor c:\\sublime3\\sublime_text.exe</code></p>\n"},{"tags":[],"owner":{"account_id":1521730,"reputation":5152,"user_id":1421222,"display_name":"Bless"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1513787567,"creation_date":1513787567,"answer_id":47910567,"question_id":47866775,"body_markdown":"Mightn&#39;t have worked for the OP. But worked for me. So, posting it here hoping it helps someone.\r\n\r\nIf you can type `subl` on a terminal and if Sublime Text opens (means `subl` is in `PATH`), try:\r\n\r\n    /set editor subl -w\r\n\r\nIf Sublime Text doesn&#39;t open on typing `subl` on terminal, but running `&quot;/Applications/Sublime Text.app/Contents/SharedSupport/bin/subl&quot;` does open Sublime Text (means `subl` is not in `PATH`), try:\r\n\r\n    /set editor &quot;/Applications/Sublime Text.app/Contents/SharedSupport/bin/subl&quot; -w\r\n\r\n`-w` flag is to wait for the files to be closed in Sublime Text before returning.","title":"How to set sublime as an external editor for jshell?","body":"<p>Mightn't have worked for the OP. But worked for me. So, posting it here hoping it helps someone.</p>\n\n<p>If you can type <code>subl</code> on a terminal and if Sublime Text opens (means <code>subl</code> is in <code>PATH</code>), try:</p>\n\n<pre><code>/set editor subl -w\n</code></pre>\n\n<p>If Sublime Text doesn't open on typing <code>subl</code> on terminal, but running <code>\"/Applications/Sublime Text.app/Contents/SharedSupport/bin/subl\"</code> does open Sublime Text (means <code>subl</code> is not in <code>PATH</code>), try:</p>\n\n<pre><code>/set editor \"/Applications/Sublime Text.app/Contents/SharedSupport/bin/subl\" -w\n</code></pre>\n\n<p><code>-w</code> flag is to wait for the files to be closed in Sublime Text before returning.</p>\n"},{"tags":[],"owner":{"account_id":1913170,"reputation":19646,"user_id":1726413,"accept_rate":50,"display_name":"MagGGG"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1547923492,"creation_date":1547923492,"answer_id":54270265,"question_id":47866775,"body_markdown":"You can specify jshell editor via JSHELLEDITOR user/system variable ","title":"How to set sublime as an external editor for jshell?","body":"<p>You can specify jshell editor via JSHELLEDITOR user/system variable </p>\n"},{"tags":[],"owner":{"account_id":12220961,"reputation":1,"user_id":8920031,"display_name":"Adit chandel"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1560259419,"creation_date":1560259419,"answer_id":56544789,"question_id":47866775,"body_markdown":"Even i faced same problem as i was giving command \r\n\r\njshell &gt; /set editor &quot;/Applications/Sublime Text.app&quot; \r\n\r\nbut what&#39;s missing is the exact path to bin directory in content folder of sublime.\r\n\r\n**Solution:** \r\n\r\njshell &gt; \r\n**/set editor &quot;/Applications/SublimeText.app/Contents/SharedSupport/bin/subl&quot;**\r\n\r\nTry this it will work 100%.","title":"How to set sublime as an external editor for jshell?","body":"<p>Even i faced same problem as i was giving command </p>\n\n<p>jshell > /set editor \"/Applications/Sublime Text.app\" </p>\n\n<p>but what's missing is the exact path to bin directory in content folder of sublime.</p>\n\n<p><strong>Solution:</strong> </p>\n\n<p>jshell > \n<strong>/set editor \"/Applications/SublimeText.app/Contents/SharedSupport/bin/subl\"</strong></p>\n\n<p>Try this it will work 100%.</p>\n"},{"tags":[],"owner":{"account_id":9527128,"reputation":837,"user_id":7080033,"display_name":"Devendra  Singraul"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675183430,"creation_date":1675093288,"answer_id":75286737,"question_id":47866775,"body_markdown":"In Windows set full path:\r\n```\r\n   jshell&gt; /set editor C:\\Program Files\\Notepad++\\notepad++.exe\r\n```\r\nPlease do not include inverted commas(&quot; &quot;) in path\r\nIn MacOs use inverted commas with path.\r\n\r\n","title":"How to set sublime as an external editor for jshell?","body":"<p>In Windows set full path:</p>\n<pre><code>   jshell&gt; /set editor C:\\Program Files\\Notepad++\\notepad++.exe\n</code></pre>\n<p>Please do not include inverted commas(&quot; &quot;) in path\nIn MacOs use inverted commas with path.</p>\n"}],"owner":{"account_id":4911554,"reputation":13237,"user_id":3956731,"accept_rate":95,"display_name":"KayV"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1125,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":47910567,"answer_count":5,"score":3,"last_activity_date":1675183430,"creation_date":1513593934,"question_id":47866775,"body_markdown":"According to the jshell documentation:\r\n\r\n&gt; An alternative to editing at the command prompt is to use an external editor. This editor can be used to edit and create snippets, and is especially helpful for multiline snippets. You can configure JShell to use the editor of your choice.\r\n\r\nSo to implement this, i use the following commands:\r\n\r\n    jshell&gt; /set editor sublime\r\n    |  Editor set to: sublime\r\n\r\nAnd then, i tried to edit a snippet as follows:\r\n\r\n    jshell&gt; /edit printName\r\n    |  Edit Error: process IO failure: Cannot run program &quot;subllime&quot;: error=2, No such file or directory\r\n\r\nBut, i got the above error.\r\nSo is it the right way to set editor or something else is required?\r\nI also tried to set Microsoft Word as the editor and specified the exact application path from the Application folder of Mac as follows:\r\n\r\n    jshell&gt; /set editor /Users/karan.verma/Applications/Microsoft Word.app\r\n    |  Editor set to: /Users/karan.verma/Applications/Microsoft Word.app\r\n\r\nEven, when i set the editor as &quot;atom&quot;, i got the same results:\r\n\r\n    jshell&gt; /set editor atom\r\n    |  Editor set to: atom\r\n\r\nBut still it shows the same error. Any help?\r\n\r\n","title":"How to set sublime as an external editor for jshell?","body":"<p>According to the jshell documentation:</p>\n\n<blockquote>\n  <p>An alternative to editing at the command prompt is to use an external editor. This editor can be used to edit and create snippets, and is especially helpful for multiline snippets. You can configure JShell to use the editor of your choice.</p>\n</blockquote>\n\n<p>So to implement this, i use the following commands:</p>\n\n<pre><code>jshell&gt; /set editor sublime\n|  Editor set to: sublime\n</code></pre>\n\n<p>And then, i tried to edit a snippet as follows:</p>\n\n<pre><code>jshell&gt; /edit printName\n|  Edit Error: process IO failure: Cannot run program \"subllime\": error=2, No such file or directory\n</code></pre>\n\n<p>But, i got the above error.\nSo is it the right way to set editor or something else is required?\nI also tried to set Microsoft Word as the editor and specified the exact application path from the Application folder of Mac as follows:</p>\n\n<pre><code>jshell&gt; /set editor /Users/karan.verma/Applications/Microsoft Word.app\n|  Editor set to: /Users/karan.verma/Applications/Microsoft Word.app\n</code></pre>\n\n<p>Even, when i set the editor as \"atom\", i got the same results:</p>\n\n<pre><code>jshell&gt; /set editor atom\n|  Editor set to: atom\n</code></pre>\n\n<p>But still it shows the same error. Any help?</p>\n"},{"tags":["java","json","google-bigquery","google-cloud-dataflow","apache-beam"],"answers":[{"tags":[],"owner":{"account_id":541415,"reputation":1277,"user_id":1260237,"accept_rate":80,"display_name":"Jeff Klukas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675183204,"creation_date":1675183204,"answer_id":75300321,"question_id":75299400,"body_markdown":"Consider avoiding a list of lists by introducing an intermediate type to hold the inner list:\r\n\r\n```\r\n@DefaultSchema(JavaBeanSchema.class)\r\npublic class MyIntermediateType implements Serializable {\r\n  List&lt;String&gt; innerField;\r\n}\r\n\r\n@DefaultSchema(JavaBeanSchema.class)\r\n// also lombok annotations for getters, setters, builder, constructors, etc.\r\npublic class DataClass implements Serializable {\r\n  String field1;\r\n  List&lt;String&gt; field2;\r\n  List&lt;MyIntermediateType&gt; field3;\r\n}\r\n```\r\n\r\nBigQuery will be able to represent this without further processing (`field3` becomes a repeated `STRUCT` that has one field that is a repeated `STRING`). I hope that Elasticsearch would also be able to interpret this structure, but I don&#39;t know details of Elasticsearch ingestion.","title":"How to best model an &quot;Array of collection&quot; for Apache Beam @JavaBeanSchema and BigQuery?","body":"<p>Consider avoiding a list of lists by introducing an intermediate type to hold the inner list:</p>\n<pre><code>@DefaultSchema(JavaBeanSchema.class)\npublic class MyIntermediateType implements Serializable {\n  List&lt;String&gt; innerField;\n}\n\n@DefaultSchema(JavaBeanSchema.class)\n// also lombok annotations for getters, setters, builder, constructors, etc.\npublic class DataClass implements Serializable {\n  String field1;\n  List&lt;String&gt; field2;\n  List&lt;MyIntermediateType&gt; field3;\n}\n</code></pre>\n<p>BigQuery will be able to represent this without further processing (<code>field3</code> becomes a repeated <code>STRUCT</code> that has one field that is a repeated <code>STRING</code>). I hope that Elasticsearch would also be able to interpret this structure, but I don't know details of Elasticsearch ingestion.</p>\n"}],"owner":{"account_id":86475,"reputation":1165,"user_id":240441,"accept_rate":62,"display_name":"Rich"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":195,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1675183204,"creation_date":1675178971,"question_id":75299400,"body_markdown":"I have a Java class that models data meant for writing to both BigQuery and Elasticsearch. It looks something like this:\r\n```java\r\n@DefaultSchema(JavaBeanSchema.class)\r\n// also lombok annotations for getters, setters, builder, constructors, etc.\r\npublic class DataClass implements Serializable {\r\n  String field1;\r\n  List&lt;String&gt; field2;\r\n  List&lt;List&lt;String&gt;&gt; field3; // this one gives the compiler error below\r\n}\r\n```\r\n\r\nWe try to always use JavaBeanSchema.class for its nice compatibility with org.apache.beam.sdk.values.Row, com.google.api.services.bigquery.model.TableRow, and the org.apache.beam.sdk.io.gcp.bigquery.ToTableRow format function with org.apache.beam.sdk.io.gcp.bigquery.BigQueryIO. Combining these things means we can use BigQueryIO.Write without any explicit schema or coders, minimal boilerplate code.\r\n\r\nCompiling the above class into a Beam template results in an IllegalArgumentException &quot;Array of collection is not supported in BigQuery.&quot; OK - fine, but we still need this class to model the data for Elasticsearch where this schema works fine in JSON.\r\n\r\nI am looking for the simplest way I can do some version of what I need to with minimal code. The solution I currently have is creating a separate class `DataClassForBigQuery` that is essentially a copy of this one except `field3` is just a `List&lt;String&gt;` type, along with a `PTransform&lt;DataClass, DataClassForBigQuery&gt;` to serialize `field3` as a JSON string when they are created. This is a relatively small amount of code, a fairly isolated, but:\r\n\r\n- I don&#39;t love the two classes to model the same data, just means more tests and maintenance\r\n- BQ has a native JSON field type, with some support for querying the values. Since technically the BQ field type of `field3` is STRING, there&#39;s no good way to query/access that data without converting it to something else first. It would be nice if there was a way to annotate &quot;this is a java String type, but interpret it as JSON&quot;.\r\n- I tried modeling the POJO with more complex types to refactor/wrap the nested Lists into a List of Objects and each Object contained a List of Strings. I think this works for Big Query, but Beam wasn&#39;t able to build the template. I believe the error was a stack overflow trying to build the schema.\r\n- If I could use the POJO class as-is, and somehow modify the schema on the fly to change the type of `field3`, and provide a function to format it but still leverage ToTableRow for the rest of it (the real class is large, 20+ fields), I&#39;d try that. But I don&#39;t really want to extend org.apache.beam code to this, that would end up being more work.\r\n\r\nAny ideas?","title":"How to best model an &quot;Array of collection&quot; for Apache Beam @JavaBeanSchema and BigQuery?","body":"<p>I have a Java class that models data meant for writing to both BigQuery and Elasticsearch. It looks something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@DefaultSchema(JavaBeanSchema.class)\n// also lombok annotations for getters, setters, builder, constructors, etc.\npublic class DataClass implements Serializable {\n  String field1;\n  List&lt;String&gt; field2;\n  List&lt;List&lt;String&gt;&gt; field3; // this one gives the compiler error below\n}\n</code></pre>\n<p>We try to always use JavaBeanSchema.class for its nice compatibility with org.apache.beam.sdk.values.Row, com.google.api.services.bigquery.model.TableRow, and the org.apache.beam.sdk.io.gcp.bigquery.ToTableRow format function with org.apache.beam.sdk.io.gcp.bigquery.BigQueryIO. Combining these things means we can use BigQueryIO.Write without any explicit schema or coders, minimal boilerplate code.</p>\n<p>Compiling the above class into a Beam template results in an IllegalArgumentException &quot;Array of collection is not supported in BigQuery.&quot; OK - fine, but we still need this class to model the data for Elasticsearch where this schema works fine in JSON.</p>\n<p>I am looking for the simplest way I can do some version of what I need to with minimal code. The solution I currently have is creating a separate class <code>DataClassForBigQuery</code> that is essentially a copy of this one except <code>field3</code> is just a <code>List&lt;String&gt;</code> type, along with a <code>PTransform&lt;DataClass, DataClassForBigQuery&gt;</code> to serialize <code>field3</code> as a JSON string when they are created. This is a relatively small amount of code, a fairly isolated, but:</p>\n<ul>\n<li>I don't love the two classes to model the same data, just means more tests and maintenance</li>\n<li>BQ has a native JSON field type, with some support for querying the values. Since technically the BQ field type of <code>field3</code> is STRING, there's no good way to query/access that data without converting it to something else first. It would be nice if there was a way to annotate &quot;this is a java String type, but interpret it as JSON&quot;.</li>\n<li>I tried modeling the POJO with more complex types to refactor/wrap the nested Lists into a List of Objects and each Object contained a List of Strings. I think this works for Big Query, but Beam wasn't able to build the template. I believe the error was a stack overflow trying to build the schema.</li>\n<li>If I could use the POJO class as-is, and somehow modify the schema on the fly to change the type of <code>field3</code>, and provide a function to format it but still leverage ToTableRow for the rest of it (the real class is large, 20+ fields), I'd try that. But I don't really want to extend org.apache.beam code to this, that would end up being more work.</li>\n</ul>\n<p>Any ideas?</p>\n"},{"tags":["java","maven","intellij-idea","web-applications","sdk"],"comments":[{"owner":{"account_id":2273465,"reputation":15439,"user_id":2000323,"display_name":"Andrey"},"score":0,"creation_date":1675763331,"post_id":75300315,"comment_id":132993796,"body_markdown":"Show screenshots of your File | Project Structure | **Project** and **Modules** → **Dependencies** settings.","body":"Show screenshots of your File | Project Structure | <b>Project</b> and <b>Modules</b> → <b>Dependencies</b> settings."}],"owner":{"account_id":15898635,"reputation":11,"user_id":11471682,"display_name":"Bugra Yildiz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675183179,"creation_date":1675183179,"question_id":75300315,"body_markdown":"I have Maven project that I am working on Intellij. I set up the project with Java 14 SDK but when I try to run, I get an error that says &quot;Module server SDK 14 is not compatible with the source version 17.\r\n\r\n\r\n\r\nUpgrade Module SDK in project settings to 17 or higher.&quot;. When I change the SDK of the project from the project structure, it says &quot;Module XX is imported from Maven. Any changes made in its configuration might be lost after reimporting.&quot;. Then I clicked apply and ran it again. Now I got this error, &quot;java: Cannot run program &quot;/Users/bugrayildiz/Library/Java/JavaVirtualMachines/openjdk-19.0.2/Contents/Home/bin/java&quot; (in directory &quot;/Users/bugrayildiz/Library/Caches/JetBrains/IntelliJIdea2022.3/compile-server&quot;): error=2, No such file or directory&quot;. (Besides that, in my pom.xml file, it shows my java version 17). How can I fix this?","title":"Getting &quot;Java needs to be upgraded&quot; error when I try to run my Maven project on Intellij","body":"<p>I have Maven project that I am working on Intellij. I set up the project with Java 14 SDK but when I try to run, I get an error that says &quot;Module server SDK 14 is not compatible with the source version 17.</p>\n<p>Upgrade Module SDK in project settings to 17 or higher.&quot;. When I change the SDK of the project from the project structure, it says &quot;Module XX is imported from Maven. Any changes made in its configuration might be lost after reimporting.&quot;. Then I clicked apply and ran it again. Now I got this error, &quot;java: Cannot run program &quot;/Users/bugrayildiz/Library/Java/JavaVirtualMachines/openjdk-19.0.2/Contents/Home/bin/java&quot; (in directory &quot;/Users/bugrayildiz/Library/Caches/JetBrains/IntelliJIdea2022.3/compile-server&quot;): error=2, No such file or directory&quot;. (Besides that, in my pom.xml file, it shows my java version 17). How can I fix this?</p>\n"},{"tags":["java","spring","spring-webflux"],"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1675157748,"post_id":75295103,"comment_id":132863184,"body_markdown":"`return Flux.fromArray((Object[]) result);`? (Also, use `if (result instanceof Object[])` as the condition)","body":"<code>return Flux.fromArray((Object[]) result);</code>? (Also, use <code>if (result instanceof Object[])</code> as the condition)"},{"owner":{"account_id":15062605,"reputation":967,"user_id":10870817,"display_name":"SoT"},"score":0,"creation_date":1675158210,"post_id":75295103,"comment_id":132863348,"body_markdown":"in my case, result is int[], it will throw class cast exception: ` class [I cannot be cast to class [Ljava.lang.Object; ([I and [Ljava.lang.Object; are in module java.base of loader &#39;bootstrap&#39;)`","body":"in my case, result is int[], it will throw class cast exception: ` class [I cannot be cast to class [Ljava.lang.Object; ([I and [Ljava.lang.Object; are in module java.base of loader &#39;bootstrap&#39;)`"},{"owner":{"account_id":15062605,"reputation":967,"user_id":10870817,"display_name":"SoT"},"score":0,"creation_date":1675158459,"post_id":75295103,"comment_id":132863433,"body_markdown":"but the result is not only int[], it may be Integer[], Dto[], long[] etc","body":"but the result is not only int[], it may be Integer[], Dto[], long[] etc"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1675159423,"post_id":75295103,"comment_id":132863730,"body_markdown":"[`Flux.fromArray`](https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Flux.html#fromArray-T:A-) doesn&#39;t have primitive array overloads, so it wouldn&#39;t work for an `int[]` anyway.","body":"<a href=\"https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Flux.html#fromArray-T:A-\" rel=\"nofollow noreferrer\"><code>Flux.fromArray</code></a> doesn&#39;t have primitive array overloads, so it wouldn&#39;t work for an <code>int[]</code> anyway."},{"owner":{"account_id":15062605,"reputation":967,"user_id":10870817,"display_name":"SoT"},"score":0,"creation_date":1675159663,"post_id":75295103,"comment_id":132863799,"body_markdown":"thanks, could you help to summarize to separate answer?","body":"thanks, could you help to summarize to separate answer?"}],"answers":[{"tags":[],"owner":{"account_id":19395247,"reputation":3208,"user_id":14183092,"display_name":"kerbermeister"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675182822,"creation_date":1675174174,"answer_id":75298406,"question_id":75295103,"body_markdown":"Flux does not work with primitive types, so if you want to use, for example `Flux.fromArray()`, then you should convert your array of primitives to array of objects.\r\n\r\nTo simplify converting there is `ArrayUtils.toObject()` method from `org.apache.commons.lang3.ArrayUtils`, but it has multiple implementations depending on the primitive type: `long`, `byte`, `int` and etc.\r\n\r\nHowever, in your case you have to somehow determine the actual type of values within the array. It is possible, but not really good solution, it is because you honestly have not a good design.\r\n\r\nThe method to achieve this would look like this:\r\n\r\n    public Object[] convert(Object array) {\r\n        Class&lt;?&gt; componentType = array.getClass().getComponentType();\r\n        if (componentType.isPrimitive()) {\r\n            if (array instanceof boolean[]) {\r\n                return ArrayUtils.toObject((boolean[]) array);\r\n\r\n            } else if (array instanceof int[]) {\r\n                return ArrayUtils.toObject((int[]) array);\r\n\r\n            } else if (array instanceof long[]) {\r\n                return ArrayUtils.toObject((long[]) array);\r\n\r\n            } else if (array instanceof short[]) {\r\n                return ArrayUtils.toObject((short[]) array);\r\n\r\n            } else if (array instanceof double[]) {\r\n                return ArrayUtils.toObject((double[]) array);\r\n\r\n            } else if (array instanceof char[]) {\r\n                return ArrayUtils.toObject((char[]) array);\r\n\r\n            } else if (array instanceof byte[]) {\r\n                return ArrayUtils.toObject((byte[]) array);\r\n\r\n            } else if (array instanceof float[]) {\r\n                return ArrayUtils.toObject((float[]) array);\r\n            }\r\n        }\r\n        return (Object[]) array;\r\n    }\r\n\r\nAnd your piece of code :\r\n\r\n    if(result.getClass().isArray()) {\r\n        return Flux.fromArray(convert(result));\r\n    }\r\n\r\nIt would work the way you expected, however, as I said it looks like a bad design.","title":"java how to cast unknown object to an array","body":"<p>Flux does not work with primitive types, so if you want to use, for example <code>Flux.fromArray()</code>, then you should convert your array of primitives to array of objects.</p>\n<p>To simplify converting there is <code>ArrayUtils.toObject()</code> method from <code>org.apache.commons.lang3.ArrayUtils</code>, but it has multiple implementations depending on the primitive type: <code>long</code>, <code>byte</code>, <code>int</code> and etc.</p>\n<p>However, in your case you have to somehow determine the actual type of values within the array. It is possible, but not really good solution, it is because you honestly have not a good design.</p>\n<p>The method to achieve this would look like this:</p>\n<pre><code>public Object[] convert(Object array) {\n    Class&lt;?&gt; componentType = array.getClass().getComponentType();\n    if (componentType.isPrimitive()) {\n        if (array instanceof boolean[]) {\n            return ArrayUtils.toObject((boolean[]) array);\n\n        } else if (array instanceof int[]) {\n            return ArrayUtils.toObject((int[]) array);\n\n        } else if (array instanceof long[]) {\n            return ArrayUtils.toObject((long[]) array);\n\n        } else if (array instanceof short[]) {\n            return ArrayUtils.toObject((short[]) array);\n\n        } else if (array instanceof double[]) {\n            return ArrayUtils.toObject((double[]) array);\n\n        } else if (array instanceof char[]) {\n            return ArrayUtils.toObject((char[]) array);\n\n        } else if (array instanceof byte[]) {\n            return ArrayUtils.toObject((byte[]) array);\n\n        } else if (array instanceof float[]) {\n            return ArrayUtils.toObject((float[]) array);\n        }\n    }\n    return (Object[]) array;\n}\n</code></pre>\n<p>And your piece of code :</p>\n<pre><code>if(result.getClass().isArray()) {\n    return Flux.fromArray(convert(result));\n}\n</code></pre>\n<p>It would work the way you expected, however, as I said it looks like a bad design.</p>\n"}],"owner":{"account_id":15062605,"reputation":967,"user_id":10870817,"display_name":"SoT"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":282,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75298406,"answer_count":1,"score":1,"last_activity_date":1675182822,"creation_date":1675157578,"question_id":75295103,"body_markdown":"I have following code:\r\n\r\n    Object result = joinPoint.proceed();\r\n\r\n    if(result instanceof Publisher) {\r\n      return (Publisher&lt;?&gt;)result;\r\n    }\r\n\r\n    if(result instanceof Iterable&lt;?&gt;) {\r\n      return Flux.fromIterable((Iterable&lt;?&gt;)result);\r\n    }\r\n\r\n    if(result.getClass().isArray()) {\r\n      //ERROR HERE: no instance(s) of type variable(s) T exist so that Object conforms to T[]\r\n      return Flux.fromArray(result);\r\n    }\r\nI want to pass the `result` as an array to `Flux.fromArray` but I don&#39;t know how to cast it to an array? Or any better solution? I want to return a Publisher","title":"java how to cast unknown object to an array","body":"<p>I have following code:</p>\n<pre><code>Object result = joinPoint.proceed();\n\nif(result instanceof Publisher) {\n  return (Publisher&lt;?&gt;)result;\n}\n\nif(result instanceof Iterable&lt;?&gt;) {\n  return Flux.fromIterable((Iterable&lt;?&gt;)result);\n}\n\nif(result.getClass().isArray()) {\n  //ERROR HERE: no instance(s) of type variable(s) T exist so that Object conforms to T[]\n  return Flux.fromArray(result);\n}\n</code></pre>\n<p>I want to pass the <code>result</code> as an array to <code>Flux.fromArray</code> but I don't know how to cast it to an array? Or any better solution? I want to return a Publisher</p>\n"},{"tags":["java","apache-spark","apache-spark-sql","avro"],"comments":[{"owner":{"account_id":52748,"reputation":14581,"user_id":157672,"accept_rate":86,"display_name":"Michael Lloyd Lee mlk"},"score":1,"creation_date":1451238172,"post_id":33899417,"comment_id":56708083,"body_markdown":"Down voter, can you please explain why the down vote?","body":"Down voter, can you please explain why the down vote?"},{"owner":{"account_id":2247163,"reputation":4471,"user_id":7417402,"display_name":"Devstr"},"score":1,"creation_date":1519057035,"post_id":33899417,"comment_id":84743945,"body_markdown":"Please see my answer to https://stackoverflow.com/questions/48828067/how-to-convert-nested-avro-genericrecord-to-row/48828303#48828303","body":"Please see my answer to <a href=\"https://stackoverflow.com/questions/48828067/how-to-convert-nested-avro-genericrecord-to-row/48828303#48828303\" title=\"how to convert nested avro genericrecord to row\">stackoverflow.com/questions/48828067/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":97791,"reputation":324357,"user_id":1560062,"accept_rate":100,"display_name":"zero323"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1448406105,"creation_date":1448406105,"answer_id":33905532,"question_id":33899417,"body_markdown":"__Disclaimer__:  It&#39;s kind of a dirty hack. It depends on a few things:\r\n\r\n- Python provides a [lightweight Avro processing library](https://pypi.python.org/pypi/avro/1.7.7) and due to its dynamism it doesn&#39;t require typed writers\r\n- an empty Avro file is still a valid document\r\n- Spark schema can be converted to and from JSON\r\n\r\nFollowing code reads an Avro schema file, creates an empty Avro file with given schema, reads it using `spark-csv` and outputs Spark schema as a JSON file.\r\n\r\n&lt;!-- language: python --&gt;\r\n\r\n\r\n    import argparse\r\n    import tempfile\r\n    \r\n    import avro.schema\r\n    from avro.datafile import DataFileWriter\r\n    from avro.io import DatumWriter\r\n    \r\n    from pyspark import SparkContext\r\n    from pyspark.sql import SQLContext\r\n    \r\n    def parse_schema(schema):\r\n        with open(schema) as fr:\r\n            return avro.schema.parse(open(schema).read())\r\n    \r\n    def write_dummy(schema):\r\n        tmp = tempfile.mktemp(suffix=&#39;.avro&#39;)\r\n        with open(tmp, &quot;w&quot;) as fw:\r\n            writer = DataFileWriter(fw, DatumWriter(), schema)\r\n            writer.close()\r\n        return tmp\r\n    \r\n    def write_spark_schema(path, schema):\r\n        with open(path, &#39;w&#39;) as fw:\r\n            fw.write(schema.json())\r\n    \r\n    \r\n    def main():\r\n        parser = argparse.ArgumentParser(description=&#39;Avro schema converter&#39;)\r\n        parser.add_argument(&#39;--schema&#39;)\r\n        parser.add_argument(&#39;--output&#39;)\r\n        args = parser.parse_args()\r\n    \r\n        sc = SparkContext(&#39;local[1]&#39;, &#39;Avro schema converter&#39;)\r\n        sqlContext = SQLContext(sc)\r\n    \r\n        df = (sqlContext.read.format(&#39;com.databricks.spark.avro&#39;)\r\n                .load(write_dummy(parse_schema(args.schema))))\r\n    \r\n        write_spark_schema(args.output, df.schema)\r\n        sc.stop()\r\n    \r\n    \r\n    if __name__ == &#39;__main__&#39;:\r\n        main()\r\n\r\nUsage:\r\n\r\n    bin/spark-submit --packages com.databricks:spark-avro_2.10:2.0.1 \\ \r\n       avro_to_spark_schema.py \\\r\n       --schema path_to_avro_schema.avsc \\\r\n       --output path_to_spark_schema.json\r\n\r\n\r\nRead schema:\r\n\r\n    import scala.io.Source\r\n    import org.apache.spark.sql.types.{DataType, StructType}\r\n\r\n    val json: String = Source.fromFile(&quot;schema.json&quot;).getLines.toList.head\r\n    val schema: StructType = DataType.fromJson(json).asInstanceOf[StructType]\r\n\r\n\r\n","title":"Avro Schema to spark StructType","body":"<p><strong>Disclaimer</strong>:  It's kind of a dirty hack. It depends on a few things:</p>\n\n<ul>\n<li>Python provides a <a href=\"https://pypi.python.org/pypi/avro/1.7.7\" rel=\"noreferrer\">lightweight Avro processing library</a> and due to its dynamism it doesn't require typed writers</li>\n<li>an empty Avro file is still a valid document</li>\n<li>Spark schema can be converted to and from JSON</li>\n</ul>\n\n<p>Following code reads an Avro schema file, creates an empty Avro file with given schema, reads it using <code>spark-csv</code> and outputs Spark schema as a JSON file.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import argparse\nimport tempfile\n\nimport avro.schema\nfrom avro.datafile import DataFileWriter\nfrom avro.io import DatumWriter\n\nfrom pyspark import SparkContext\nfrom pyspark.sql import SQLContext\n\ndef parse_schema(schema):\n    with open(schema) as fr:\n        return avro.schema.parse(open(schema).read())\n\ndef write_dummy(schema):\n    tmp = tempfile.mktemp(suffix='.avro')\n    with open(tmp, \"w\") as fw:\n        writer = DataFileWriter(fw, DatumWriter(), schema)\n        writer.close()\n    return tmp\n\ndef write_spark_schema(path, schema):\n    with open(path, 'w') as fw:\n        fw.write(schema.json())\n\n\ndef main():\n    parser = argparse.ArgumentParser(description='Avro schema converter')\n    parser.add_argument('--schema')\n    parser.add_argument('--output')\n    args = parser.parse_args()\n\n    sc = SparkContext('local[1]', 'Avro schema converter')\n    sqlContext = SQLContext(sc)\n\n    df = (sqlContext.read.format('com.databricks.spark.avro')\n            .load(write_dummy(parse_schema(args.schema))))\n\n    write_spark_schema(args.output, df.schema)\n    sc.stop()\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>bin/spark-submit --packages com.databricks:spark-avro_2.10:2.0.1 \\ \n   avro_to_spark_schema.py \\\n   --schema path_to_avro_schema.avsc \\\n   --output path_to_spark_schema.json\n</code></pre>\n\n<p>Read schema:</p>\n\n<pre><code>import scala.io.Source\nimport org.apache.spark.sql.types.{DataType, StructType}\n\nval json: String = Source.fromFile(\"schema.json\").getLines.toList.head\nval schema: StructType = DataType.fromJson(json).asInstanceOf[StructType]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8792696,"reputation":93,"user_id":6571854,"display_name":"hadooper"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1527922164,"creation_date":1469912731,"answer_id":38678493,"question_id":33899417,"body_markdown":"pls see if this helps, although little late. I was trying this hard for my current work. I have used schemaconverter from Databricks. I suppose, you were trying to read the avro file with the given schema.\r\n\r\n     val schemaObj = new Schema.Parser().parse(new File(avscfilepath));\r\n     var sparkSchema : StructType = new StructType\r\n     import scala.collection.JavaConversions._     \r\n     for(field &lt;- schemaObj.getFields()){\r\n      sparkSchema = sparkSchema.add(field.name, SchemaConverters.toSqlType(field.schema).dataType)\r\n     }\r\n     sparkSchema","title":"Avro Schema to spark StructType","body":"<p>pls see if this helps, although little late. I was trying this hard for my current work. I have used schemaconverter from Databricks. I suppose, you were trying to read the avro file with the given schema.</p>\n\n<pre><code> val schemaObj = new Schema.Parser().parse(new File(avscfilepath));\n var sparkSchema : StructType = new StructType\n import scala.collection.JavaConversions._     \n for(field &lt;- schemaObj.getFields()){\n  sparkSchema = sparkSchema.add(field.name, SchemaConverters.toSqlType(field.schema).dataType)\n }\n sparkSchema\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7826967,"reputation":985,"user_id":6413835,"display_name":"lbcommer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675182664,"creation_date":1675182664,"answer_id":75300194,"question_id":33899417,"body_markdown":"Using PySpark:\r\n    \r\n    with open(&#39;path/to/avro/file&#39;,&#39;r&#39;) as avro_file:\r\n            avro_scheme = avro_file.read()\r\n        \r\n        df = spark\\\r\n            .read\\\r\n            .format(&quot;avro&quot;)\\\r\n            .option(&quot;avroSchema&quot;, avro_scheme)\\\r\n            .load()\r\n        \r\n        df.schema","title":"Avro Schema to spark StructType","body":"<p>Using PySpark:</p>\n<pre><code>with open('path/to/avro/file','r') as avro_file:\n        avro_scheme = avro_file.read()\n    \n    df = spark\\\n        .read\\\n        .format(&quot;avro&quot;)\\\n        .option(&quot;avroSchema&quot;, avro_scheme)\\\n        .load()\n    \n    df.schema\n</code></pre>\n"}],"owner":{"account_id":52748,"reputation":14581,"user_id":157672,"accept_rate":86,"display_name":"Michael Lloyd Lee mlk"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14617,"favorite_count":0,"down_vote_count":1,"up_vote_count":10,"answer_count":3,"score":9,"last_activity_date":1675182664,"creation_date":1448383973,"question_id":33899417,"body_markdown":"This is effectively the same as my [previous question][1], but using Avro rather than JSON as the data format.\r\n\r\nI&#39;m working with a Spark dataframe which could be loading data from one of a few different schema versions:\r\n\r\n    // Version One\r\n    {&quot;namespace&quot;: &quot;com.example.avro&quot;,\r\n     &quot;type&quot;: &quot;record&quot;,\r\n     &quot;name&quot;: &quot;MeObject&quot;,\r\n     &quot;fields&quot;: [\r\n         {&quot;name&quot;: &quot;A&quot;, &quot;type&quot;: [&quot;null&quot;, &quot;int&quot;], &quot;default&quot;: null}\r\n     ]\r\n    }\r\n\r\n    // Version Two\r\n    {&quot;namespace&quot;: &quot;com.example.avro&quot;,\r\n     &quot;type&quot;: &quot;record&quot;,\r\n     &quot;name&quot;: &quot;MeObject&quot;,\r\n     &quot;fields&quot;: [\r\n         {&quot;name&quot;: &quot;A&quot;, &quot;type&quot;: [&quot;null&quot;, &quot;int&quot;], &quot;default&quot;: null},\r\n         {&quot;name&quot;: &quot;B&quot;, &quot;type&quot;: [&quot;null&quot;, &quot;int&quot;], &quot;default&quot;: null}\r\n     ]\r\n    }\r\n\r\nI&#39;m using [Spark Avro][2] to load the data.\r\n\r\n    DataFrame df = context.read()\r\n      .format(&quot;com.databricks.spark.avro&quot;)\r\n      .load(&quot;path/to/avro/file&quot;);\r\n\r\n\r\nwhich may be a Version One file or Version Two file. However I&#39;d like to be able to process it in an identical manner, with the unknown values set to &quot;null&quot;. The recommendation in my previous question was to set the schema, however I do not want to repeat myself writing the schema in both a `.avro` file and as sparks `StructType` and friends. How can I convert the avro schema (either text file or the generated `MeObject.getClassSchema()`) into sparks `StructType`?\r\n\r\nSpark Avro has a [`SchemaConverters`][3], but it is all private and  returns some strange internal object.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/33807145/evolving-a-schema-with-spark-dataframe/\r\n  [2]: https://github.com/databricks/spark-avro\r\n  [3]: https://github.com/databricks/spark-avro/blob/master/src/main/scala/com/databricks/spark/avro/SchemaConverters.scala","title":"Avro Schema to spark StructType","body":"<p>This is effectively the same as my <a href=\"https://stackoverflow.com/questions/33807145/evolving-a-schema-with-spark-dataframe/\">previous question</a>, but using Avro rather than JSON as the data format.</p>\n\n<p>I'm working with a Spark dataframe which could be loading data from one of a few different schema versions:</p>\n\n<pre><code>// Version One\n{\"namespace\": \"com.example.avro\",\n \"type\": \"record\",\n \"name\": \"MeObject\",\n \"fields\": [\n     {\"name\": \"A\", \"type\": [\"null\", \"int\"], \"default\": null}\n ]\n}\n\n// Version Two\n{\"namespace\": \"com.example.avro\",\n \"type\": \"record\",\n \"name\": \"MeObject\",\n \"fields\": [\n     {\"name\": \"A\", \"type\": [\"null\", \"int\"], \"default\": null},\n     {\"name\": \"B\", \"type\": [\"null\", \"int\"], \"default\": null}\n ]\n}\n</code></pre>\n\n<p>I'm using <a href=\"https://github.com/databricks/spark-avro\" rel=\"noreferrer\">Spark Avro</a> to load the data.</p>\n\n<pre><code>DataFrame df = context.read()\n  .format(\"com.databricks.spark.avro\")\n  .load(\"path/to/avro/file\");\n</code></pre>\n\n<p>which may be a Version One file or Version Two file. However I'd like to be able to process it in an identical manner, with the unknown values set to \"null\". The recommendation in my previous question was to set the schema, however I do not want to repeat myself writing the schema in both a <code>.avro</code> file and as sparks <code>StructType</code> and friends. How can I convert the avro schema (either text file or the generated <code>MeObject.getClassSchema()</code>) into sparks <code>StructType</code>?</p>\n\n<p>Spark Avro has a <a href=\"https://github.com/databricks/spark-avro/blob/master/src/main/scala/com/databricks/spark/avro/SchemaConverters.scala\" rel=\"noreferrer\"><code>SchemaConverters</code></a>, but it is all private and  returns some strange internal object.</p>\n"},{"tags":["javascript","java","html","css","strapi"],"answers":[{"tags":[],"owner":{"account_id":6665469,"reputation":412,"user_id":5143231,"display_name":"Paul Corbeau"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1652448285,"creation_date":1652448285,"answer_id":72230313,"question_id":72185760,"body_markdown":"I&#39;ve got the same issue with Strapi. This is due to your brower.\r\nTry again with Chrome it will work.","title":"Not able to create a new collection-type in Strapi Dashboard","body":"<p>I've got the same issue with Strapi. This is due to your brower.\nTry again with Chrome it will work.</p>\n"},{"tags":[],"owner":{"account_id":7594538,"reputation":409,"user_id":5761080,"display_name":"Leffa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658992822,"creation_date":1658992822,"answer_id":73148751,"question_id":72185760,"body_markdown":"`User` collection cannot be edited by default. You only can to add new fields.\r\n\r\nFor the other problems, remove the folder &#39;`node_modules`&#39;, after run `npm install`, in CLI, in root directory, and then `npm run develop`.","title":"Not able to create a new collection-type in Strapi Dashboard","body":"<p><code>User</code> collection cannot be edited by default. You only can to add new fields.</p>\n<p>For the other problems, remove the folder '<code>node_modules</code>', after run <code>npm install</code>, in CLI, in root directory, and then <code>npm run develop</code>.</p>\n"},{"tags":[],"owner":{"account_id":17314494,"reputation":735,"user_id":12541301,"display_name":"Shakil- The Coding monster"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1666606374,"creation_date":1666606374,"answer_id":74179612,"question_id":72185760,"body_markdown":"I have faced the same issue. Use yarn develop instead of npm start. In my case this solved the issue. Thanks","title":"Not able to create a new collection-type in Strapi Dashboard","body":"<p>I have faced the same issue. Use yarn develop instead of npm start. In my case this solved the issue. Thanks</p>\n"},{"tags":[],"owner":{"account_id":24262845,"reputation":11,"user_id":18212188,"display_name":"Muhammad Haseeb Ali Khan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675182389,"creation_date":1675182283,"answer_id":75300115,"question_id":72185760,"body_markdown":"If you are running the &quot;start&quot; script so you cannot do it whit this.\r\nPlease run it with the &quot;npm run develop&quot; command or you can use yarn as well instead of npm.","title":"Not able to create a new collection-type in Strapi Dashboard","body":"<p>If you are running the &quot;start&quot; script so you cannot do it whit this.\nPlease run it with the &quot;npm run develop&quot; command or you can use yarn as well instead of npm.</p>\n"}],"owner":{"account_id":15191819,"reputation":3481,"user_id":10962364,"display_name":"MagnusEffect"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2206,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":74179612,"answer_count":4,"score":4,"last_activity_date":1675182389,"creation_date":1652183247,"question_id":72185760,"body_markdown":"I had just created a STRAPI project using , find docs [here][1]\r\n\r\n\r\n``` \r\nnpx create-strapi-app@latest my-shop1\r\n```\r\n\r\nAnd then sign up to the admin portal. After signing up, I reached `dashboard&gt;&gt;content-Type Builder` . Then as soon as I click on `create new collection type`, the create collection modal is not showing up. Even clicking many times does not help me. Also, I checked whether my mode is development or not, but it is `development`  which is correct. \r\n\r\n\r\n\r\n[![err2][3]][3]\r\n\r\nAlso, I am unable to edit the default `User` collection. On Clicking User above I am getting this in the URL\r\n\r\n```\r\nhttp://localhost:1337/admin/plugins/content-type-builder/content-types/plugin::users-permissions.user\r\n```\r\n\r\n[![err3][2]][2]\r\n\r\nI want to know why I am not able to create any collection? Please help\r\n\r\n\r\n  [1]: https://docs.strapi.io/developer-docs/latest/getting-started/quick-start.html#_1-install-strapi-and-create-a-new-project\r\n  [2]: https://i.stack.imgur.com/csfY3.png\r\n  [3]: https://i.stack.imgur.com/ND5FT.png","title":"Not able to create a new collection-type in Strapi Dashboard","body":"<p>I had just created a STRAPI project using , find docs <a href=\"https://docs.strapi.io/developer-docs/latest/getting-started/quick-start.html#_1-install-strapi-and-create-a-new-project\" rel=\"nofollow noreferrer\">here</a></p>\n<pre><code>npx create-strapi-app@latest my-shop1\n</code></pre>\n<p>And then sign up to the admin portal. After signing up, I reached <code>dashboard&gt;&gt;content-Type Builder</code> . Then as soon as I click on <code>create new collection type</code>, the create collection modal is not showing up. Even clicking many times does not help me. Also, I checked whether my mode is development or not, but it is <code>development</code>  which is correct.</p>\n<p><a href=\"https://i.stack.imgur.com/ND5FT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ND5FT.png\" alt=\"err2\" /></a></p>\n<p>Also, I am unable to edit the default <code>User</code> collection. On Clicking User above I am getting this in the URL</p>\n<pre><code>http://localhost:1337/admin/plugins/content-type-builder/content-types/plugin::users-permissions.user\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/csfY3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/csfY3.png\" alt=\"err3\" /></a></p>\n<p>I want to know why I am not able to create any collection? Please help</p>\n"},{"tags":["python","java","encryption","rsa","jwe"],"answers":[{"tags":[],"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1675181913,"creation_date":1675090427,"answer_id":75286110,"question_id":75284207,"body_markdown":"In the JWCrypto documentation you can find [examples][1] for the encryption with JWCrypto. You basically only need to insert your values:\r\n\r\n```py\r\nfrom jwcrypto import jwk, jwe\r\nimport json\r\n\r\nspki_pem = &#39;&#39;&#39;-----BEGIN PUBLIC KEY-----\r\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA9JJaeFiDdB+dGvi3jUzK\r\nUMU73kG6vvc/P+jwZXRKKpJSwf8PU4SapMyFPFFoHwca6Z8vZogF4ghEJ18JipNy\r\nF3BLnfCt1EHuZ15FG1Aywvpi+xw7F0UoJ9DWItBM1SodKXIh1be44/9SiLrpcyRO\r\nKId349zWMOl3IVVxekLPKWTHsy2Iowp7JsjNEK3t9RdV+PAtUzp1ACyqHD/MDYSm\r\npJuEOR9AbmBayaFIWVP+52q1ir7ea88zocmklDg0SGjiRNXq1tUAljWezpKstKQN\r\nz/IZN1kMLQ8SknrlpZL0vjjAnHFlgtLfcwPbESt76surRshfGwwfx8T9AOfXMgEL\r\nNQIDAQAB\r\n-----END PUBLIC KEY-----&#39;&#39;&#39;\r\ndata = {&quot;value&quot;: &quot;Object Encryption&quot;}\r\n\r\npublic_key = jwk.JWK.from_pem(spki_pem.encode(&#39;utf-8&#39;))\r\npayload = json.dumps(data).encode(&#39;utf-8&#39;)\r\nprotected_header = {\r\n    &quot;alg&quot;: &quot;RSA-OAEP-256&quot;,\r\n    &quot;enc&quot;: &quot;A256GCM&quot;,\r\n    &quot;kid&quot;: &quot;a4d4039e-a8c7-4d06-98c8-2bda90ab169c&quot;,\r\n}\r\njwetoken = jwe.JWE(payload, recipient=public_key, protected=protected_header)\r\njewcompact = jwetoken.serialize(True)\r\n\r\nprint(jewcompact)\r\n```\r\n\r\nPossible output:\r\n\r\n```none\r\neyJhbGciOiJSU0EtT0FFUC0yNTYiLCJlbmMiOiJBMjU2R0NNIiwia2lkIjoiYTRkNDAzOWUtYThjNy00ZDA2LTk4YzgtMmJkYTkwYWIxNjljIn0.DstnMY6WkdCGA1NC0S4JIU3CNVFuUNQSghQyqkh8RpmUyBvnEelvkmWTTf3AApj4jNflnYL_bp8vbeu8PO6CyF1Pi_gUZ1vE1PHHcLD8VZ2eMiIdG08Qq9L7uDlqTIaM6qX0n_uctsm4Y0rflWXrSbr5iwXHxgOQ5XDgLCgg870tObS3RbK2RzrjYRnQs-_hK4R8LRJgCEKeV__fzmU6nx5jA4qXXs_U3y9Uxs3_4OE-xSelPT_yY5xCMs8fAHvaua92mrRCMSu9cp9iAYW8qu3bYdUFjnWqifOQIUB2HljqMH85tCxS02tBuVPs52b8pgNUckqa_v43BvxTbnwuJg.RWtp5j38l8mz_qoJ.2VBsxt1zyk5rAmSvg3k0eMLzIAPo9ttn-7dLB2nP.k4k9ZnCRRA1im2sbvMLlbQ\r\n```\r\n\r\nAn encrypted token consists of 5 parts, the header, the encrypted key, the IV/nonce, the actual ciphertext and the tag, each separated by `.` and Base64url encoded. Since AES generates a different key and IV/nonce for each encryption and RSA encryption is non-deterministic, a different encrypted token is generated for each encryption except for the first part. So you should not expect that the code generates the same encrypted token that you posted.  \r\nThe generated token can be decrypted using the private key associated with the posted public key and the decryption code of the linked post. This is also the right way for a test. \r\n\r\n-----------\r\n\r\n**Edit:**  \r\nRegarding the first part of your question from the comment: If the header \r\n\r\n```none\r\neyJhbGciOiJSU0EtT0FFUC0yNTYiLCJlbmMiOiJBMjU2R0NNIiwia2lkIjoiYTRkNDAzOWUtYThjNy00ZDA2LTk4YzgtMmJkYTkwYWIxNjljIn0\r\n```\r\n\r\nof the encrypted token is Base64url encoded, you get:\r\n\r\n```none\r\n{&quot;alg&quot;:&quot;RSA-OAEP-256&quot;,&quot;enc&quot;:&quot;A256GCM&quot;,&quot;kid&quot;:&quot;a4d4039e-a8c7-4d06-98c8-2bda90ab169c&quot;}\r\n```\r\n\r\nHere *A256GCM* as *enc* means that the plaintext is encrypted with AES-256 in GCM mode (symmetric encryption), with a random key being generated for the AES encryption.  \r\n*RSA-OAEP-256* as *alg* means that this AES key is encrypted with RSA and with OAEP/SHA256 as padding (asymmetric encryption).  \r\nBear in mind that RSA encryption *always* uses the public key (of the recipient).\r\n\r\nSo both cryptography types (symmetric and asymmetric) are involved, which is also called hybrid encryption.  \r\nThe private RSA key does not come into play at all during encryption, but only during decryption, as you can verify in the [linked post][3]. There, the encrypted token is decrypted with the private RSA key (which must be associated with the public key that was used for encryption), meaning more precisely that the symmetric AES key is decrypted with RSA (using the private RSA key), which is then used to decrypt the actual ciphertext.\r\n\r\nRegarding the second part: The format and type of the key can be determined with an ASN.1 parser, e.g. https://lapo.it/asn1js/.  \r\nThe key you posted is an ASN.1/DER encoded public RSA key in X.509/SPKI format that is Base64 encoded. A public RSA key essentially contains modulus and public exponent. A private key also contains the private fields and also uses other formats.\r\n  \r\n[1]: https://jwcrypto.readthedocs.io/en/latest/jwe.html#asymmetric-keys\r\n[3]: https://stackoverflow.com/a/71939454/9014097\r\n","title":"Encrypting java JWEObject with RSA in python","body":"<p>In the JWCrypto documentation you can find <a href=\"https://jwcrypto.readthedocs.io/en/latest/jwe.html#asymmetric-keys\" rel=\"nofollow noreferrer\">examples</a> for the encryption with JWCrypto. You basically only need to insert your values:</p>\n<pre class=\"lang-py prettyprint-override\"><code>from jwcrypto import jwk, jwe\nimport json\n\nspki_pem = '''-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA9JJaeFiDdB+dGvi3jUzK\nUMU73kG6vvc/P+jwZXRKKpJSwf8PU4SapMyFPFFoHwca6Z8vZogF4ghEJ18JipNy\nF3BLnfCt1EHuZ15FG1Aywvpi+xw7F0UoJ9DWItBM1SodKXIh1be44/9SiLrpcyRO\nKId349zWMOl3IVVxekLPKWTHsy2Iowp7JsjNEK3t9RdV+PAtUzp1ACyqHD/MDYSm\npJuEOR9AbmBayaFIWVP+52q1ir7ea88zocmklDg0SGjiRNXq1tUAljWezpKstKQN\nz/IZN1kMLQ8SknrlpZL0vjjAnHFlgtLfcwPbESt76surRshfGwwfx8T9AOfXMgEL\nNQIDAQAB\n-----END PUBLIC KEY-----'''\ndata = {&quot;value&quot;: &quot;Object Encryption&quot;}\n\npublic_key = jwk.JWK.from_pem(spki_pem.encode('utf-8'))\npayload = json.dumps(data).encode('utf-8')\nprotected_header = {\n    &quot;alg&quot;: &quot;RSA-OAEP-256&quot;,\n    &quot;enc&quot;: &quot;A256GCM&quot;,\n    &quot;kid&quot;: &quot;a4d4039e-a8c7-4d06-98c8-2bda90ab169c&quot;,\n}\njwetoken = jwe.JWE(payload, recipient=public_key, protected=protected_header)\njewcompact = jwetoken.serialize(True)\n\nprint(jewcompact)\n</code></pre>\n<p>Possible output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>eyJhbGciOiJSU0EtT0FFUC0yNTYiLCJlbmMiOiJBMjU2R0NNIiwia2lkIjoiYTRkNDAzOWUtYThjNy00ZDA2LTk4YzgtMmJkYTkwYWIxNjljIn0.DstnMY6WkdCGA1NC0S4JIU3CNVFuUNQSghQyqkh8RpmUyBvnEelvkmWTTf3AApj4jNflnYL_bp8vbeu8PO6CyF1Pi_gUZ1vE1PHHcLD8VZ2eMiIdG08Qq9L7uDlqTIaM6qX0n_uctsm4Y0rflWXrSbr5iwXHxgOQ5XDgLCgg870tObS3RbK2RzrjYRnQs-_hK4R8LRJgCEKeV__fzmU6nx5jA4qXXs_U3y9Uxs3_4OE-xSelPT_yY5xCMs8fAHvaua92mrRCMSu9cp9iAYW8qu3bYdUFjnWqifOQIUB2HljqMH85tCxS02tBuVPs52b8pgNUckqa_v43BvxTbnwuJg.RWtp5j38l8mz_qoJ.2VBsxt1zyk5rAmSvg3k0eMLzIAPo9ttn-7dLB2nP.k4k9ZnCRRA1im2sbvMLlbQ\n</code></pre>\n<p>An encrypted token consists of 5 parts, the header, the encrypted key, the IV/nonce, the actual ciphertext and the tag, each separated by <code>.</code> and Base64url encoded. Since AES generates a different key and IV/nonce for each encryption and RSA encryption is non-deterministic, a different encrypted token is generated for each encryption except for the first part. So you should not expect that the code generates the same encrypted token that you posted.<br />\nThe generated token can be decrypted using the private key associated with the posted public key and the decryption code of the linked post. This is also the right way for a test.</p>\n<hr />\n<p><strong>Edit:</strong><br />\nRegarding the first part of your question from the comment: If the header</p>\n<pre class=\"lang-none prettyprint-override\"><code>eyJhbGciOiJSU0EtT0FFUC0yNTYiLCJlbmMiOiJBMjU2R0NNIiwia2lkIjoiYTRkNDAzOWUtYThjNy00ZDA2LTk4YzgtMmJkYTkwYWIxNjljIn0\n</code></pre>\n<p>of the encrypted token is Base64url encoded, you get:</p>\n<pre class=\"lang-none prettyprint-override\"><code>{&quot;alg&quot;:&quot;RSA-OAEP-256&quot;,&quot;enc&quot;:&quot;A256GCM&quot;,&quot;kid&quot;:&quot;a4d4039e-a8c7-4d06-98c8-2bda90ab169c&quot;}\n</code></pre>\n<p>Here <em>A256GCM</em> as <em>enc</em> means that the plaintext is encrypted with AES-256 in GCM mode (symmetric encryption), with a random key being generated for the AES encryption.<br />\n<em>RSA-OAEP-256</em> as <em>alg</em> means that this AES key is encrypted with RSA and with OAEP/SHA256 as padding (asymmetric encryption).<br />\nBear in mind that RSA encryption <em>always</em> uses the public key (of the recipient).</p>\n<p>So both cryptography types (symmetric and asymmetric) are involved, which is also called hybrid encryption.<br />\nThe private RSA key does not come into play at all during encryption, but only during decryption, as you can verify in the <a href=\"https://stackoverflow.com/a/71939454/9014097\">linked post</a>. There, the encrypted token is decrypted with the private RSA key (which must be associated with the public key that was used for encryption), meaning more precisely that the symmetric AES key is decrypted with RSA (using the private RSA key), which is then used to decrypt the actual ciphertext.</p>\n<p>Regarding the second part: The format and type of the key can be determined with an ASN.1 parser, e.g. <a href=\"https://lapo.it/asn1js/\" rel=\"nofollow noreferrer\">https://lapo.it/asn1js/</a>.<br />\nThe key you posted is an ASN.1/DER encoded public RSA key in X.509/SPKI format that is Base64 encoded. A public RSA key essentially contains modulus and public exponent. A private key also contains the private fields and also uses other formats.</p>\n"}],"owner":{"account_id":20979436,"reputation":325,"user_id":15414616,"display_name":"Ema Il"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":498,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75286110,"answer_count":1,"score":0,"last_activity_date":1675181913,"creation_date":1675080664,"question_id":75284207,"body_markdown":"I asked a while ago how to do something similar: https://stackoverflow.com/questions/71928580/decrypting-and-encrypting-java-jweobject-with-algorithm-rsa-oaep-256-on-python\r\nNow I have a different encryption key and that code is not working for me anymore.\r\n\r\nI need to be able to encrypt my data: `{&quot;value&quot;: &quot;Object Encryption&quot;}` with JWE using RSA.\r\n\r\nI have this key id: `a4d4039e-a8c7-4d06-98c8-2bda90ab169c` \r\nand this encryption key: \r\n```\r\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA9JJaeFiDdB+dGvi3jUzKUMU73kG6vvc/P+jwZXRKKpJSwf8PU4SapMyFPFFoHwca6Z8vZogF4ghEJ18JipNyF3BLnfCt1EHuZ15FG1Aywvpi+xw7F0UoJ9DWItBM1SodKXIh1be44/9SiLrpcyROKId349zWMOl3IVVxekLPKWTHsy2Iowp7JsjNEK3t9RdV+PAtUzp1ACyqHD/MDYSmpJuEOR9AbmBayaFIWVP+52q1ir7ea88zocmklDg0SGjiRNXq1tUAljWezpKstKQNz/IZN1kMLQ8SknrlpZL0vjjAnHFlgtLfcwPbESt76surRshfGwwfx8T9AOfXMgELNQIDAQAB\r\n```\r\nand I should get this:\r\n```\r\neyJhbGciOiJSU0EtT0FFUC0yNTYiLCJlbmMiOiJBMjU2R0NNIiwia2lkIjoiYTRkNDAzOWUtYThjNy00ZDA2LTk4YzgtMmJkYTkwYWIxNjljIn0.2hGqQVSbgZ9-9Hiz8VZizORpWRR2yioHb8vK6R9tQCpxr0jxBGehNL0K36XfJWJC5KxcxDdD9byeI_YTtB_hYTgsuMTHS5p-4aJ4nLk43Ya5yR8p8nn4s11wbkfSj0jbqSFb_1IOCMgX0Xu8lmnVe7Tjc4vACwBoaM6VpudEsLHpyQ9OxNaa1apbRp-BX3DEVM3l7ltHhMIh_DCRWbC4-LbS51L4RqLWxmihqRA97FYX4HX38Vbt3O__2tq5KfSjq78UEOffEFe_CRg8mXZ1CHgyH4YPMNmjS-jAI4m07Coja4zLXgv7ctFaFQePISLaZLgdp3a0a-Sht5cwwZfAhg.mc7_YA9mg3l7VV5B.ZOnYjkiXx1YSxDIILjcHUXluwW8jqsSO5NuIkto.9KtJGJRS9QevrqZPYYlcTQ\r\n```\r\nThat&#39;s the java code I&#39;m trying to rewrite in python: \r\n```\r\n  private RSAPublicKey getObjectEncryptionKey()\r\n      throws NoSuchAlgorithmException, InvalidKeySpecException {\r\n    logger.debug(&quot;Getting object encryption key&quot;);\r\n    if (Objects.isNull(objectEncryptionKey)) {\r\n      objectEncryptionKey = getActiveKey(Algorithm.RSA);\r\n    }\r\n    byte[] encryptionKey = base64Decode(String.valueOf(objectEncryptionKey.getEncryptionKeyValue()).getBytes());\r\n\r\n    KeyFactory keyFactory = getInstance(Algorithm.RSA.name());\r\n    return (RSAPublicKey) keyFactory.generatePublic(new X509EncodedKeySpec(encryptionKey));\r\n  }\r\n\r\n\r\n  public String encryptObject(Object object) {\r\n    logger.debug(&quot;Encrypting object with keyId: {}&quot;, getObjectEncryptionKeyId());\r\n    JsonWebEncryption encryptedObject = getJWEObject(object);\r\n\r\n    try {\r\n      return encryptedObject.getCompactSerialization();\r\n    } catch (JoseException e) {\r\n      throw new CryptoException(&quot;Could not encrypt object/event&quot;, e);\r\n    }\r\n  }\r\n\r\n  private JsonWebEncryption getJWEObject(Object object) {\r\n    JsonWebEncryption jwe = new JsonWebEncryption();\r\n\r\n    try {\r\n      jwe.setAlgorithmHeaderValue(KeyManagementAlgorithmIdentifiers.RSA_OAEP_256);\r\n      jwe.setEncryptionMethodHeaderParameter(ContentEncryptionAlgorithmIdentifiers.AES_256_GCM);\r\n      jwe.setKey(getObjectEncryptionKey());\r\n      jwe.setKeyIdHeaderValue(getObjectEncryptionKeyId());\r\n    } catch (NoSuchAlgorithmException | InvalidKeySpecException e) {\r\n      throw new CryptoException(&quot;Could not create JsonWebEncryption&quot;, e);\r\n    }\r\n  }\r\n```\r\nHow is it different from my previous question and what is the correct way to do it in python?\r\n\r\nI tried doing something like that:\r\n```\r\ndef grouper(iterable, n, fillvalue=&#39;&#39;):\r\n    args = [iter(iterable)] * n\r\n    return zip_longest(*args, fillvalue=fillvalue)\r\n\r\n\r\ndef decryption_key_to_pem(decryption_key: str) -&gt; bytes:\r\n    pem = [&#39;-----BEGIN PRIVATE KEY-----&#39;]\r\n    for group in grouper(decryption_key, 64):\r\n        pem.append(&#39;&#39;.join(group))\r\n    pem.append(&#39;-----END PRIVATE KEY-----&#39;)\r\n    return str.encode(&#39;\\n&#39;.join(pem))\r\n\r\n\r\njwk.JWK.from_pem(decryption_key_to_pem(key))\r\n```\r\nbut I get this exception: \r\n```\r\nValueError: (&#39;Could not deserialize key data. The data may be in an incorrect format, it may be encrypted with an unsupported algorithm, or it may be an unsupported key type (e.g. EC curves with explicit parameters).&#39;, [_OpenSSLErrorWithText(code=503841036, lib=60, reason=524556, reason_text=b&#39;error:1E08010C:DECODER routines::unsupported&#39;), _OpenSSLErrorWithText(code=109052072, lib=13, reason=168, reason_text=b&#39;error:068000A8:asn1 encoding routines::wrong tag&#39;), _OpenSSLErrorWithText(code=109576458, lib=13, reason=524554, reason_text=b&#39;error:0688010A:asn1 encoding routines::nested asn1 error&#39;), _OpenSSLErrorWithText(code=109576458, lib=13, reason=524554, reason_text=b&#39;error:0688010A:asn1 encoding routines::nested asn1 error&#39;)])\r\n```\r\nAlso tried something like: \r\n```\r\ndef get_jwe_key(data, encryption_key, encryption_key_id):\r\n    jwe = jwcrypto.jwe.JWE()\r\n    jwe.plaintext = json.dumps(data).encode(&#39;utf-8&#39;)\r\n    jwe.alg = &#39;RSA-OAEP-256&#39;\r\n    jwe.enc = &#39;A256GCM&#39;\r\n    jwe.recipient = encryption_key\r\n    jwe.header = {&#39;kid&#39;: encryption_key_id}\r\n    return jwe\r\n\r\n\r\njwe_key = get_jwe_key(decrypted_data, key, key_id)\r\njwe_key.serialize()\r\n```\r\n\r\nand I get: `jwcrypto.common.InvalidJWEOperation: No available ciphertext`","title":"Encrypting java JWEObject with RSA in python","body":"<p>I asked a while ago how to do something similar: <a href=\"https://stackoverflow.com/questions/71928580/decrypting-and-encrypting-java-jweobject-with-algorithm-rsa-oaep-256-on-python\">Decrypting and encrypting java JWEObject with algorithm RSA-OAEP-256 on python</a>\nNow I have a different encryption key and that code is not working for me anymore.</p>\n<p>I need to be able to encrypt my data: <code>{&quot;value&quot;: &quot;Object Encryption&quot;}</code> with JWE using RSA.</p>\n<p>I have this key id: <code>a4d4039e-a8c7-4d06-98c8-2bda90ab169c</code>\nand this encryption key:</p>\n<pre><code>MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA9JJaeFiDdB+dGvi3jUzKUMU73kG6vvc/P+jwZXRKKpJSwf8PU4SapMyFPFFoHwca6Z8vZogF4ghEJ18JipNyF3BLnfCt1EHuZ15FG1Aywvpi+xw7F0UoJ9DWItBM1SodKXIh1be44/9SiLrpcyROKId349zWMOl3IVVxekLPKWTHsy2Iowp7JsjNEK3t9RdV+PAtUzp1ACyqHD/MDYSmpJuEOR9AbmBayaFIWVP+52q1ir7ea88zocmklDg0SGjiRNXq1tUAljWezpKstKQNz/IZN1kMLQ8SknrlpZL0vjjAnHFlgtLfcwPbESt76surRshfGwwfx8T9AOfXMgELNQIDAQAB\n</code></pre>\n<p>and I should get this:</p>\n<pre><code>eyJhbGciOiJSU0EtT0FFUC0yNTYiLCJlbmMiOiJBMjU2R0NNIiwia2lkIjoiYTRkNDAzOWUtYThjNy00ZDA2LTk4YzgtMmJkYTkwYWIxNjljIn0.2hGqQVSbgZ9-9Hiz8VZizORpWRR2yioHb8vK6R9tQCpxr0jxBGehNL0K36XfJWJC5KxcxDdD9byeI_YTtB_hYTgsuMTHS5p-4aJ4nLk43Ya5yR8p8nn4s11wbkfSj0jbqSFb_1IOCMgX0Xu8lmnVe7Tjc4vACwBoaM6VpudEsLHpyQ9OxNaa1apbRp-BX3DEVM3l7ltHhMIh_DCRWbC4-LbS51L4RqLWxmihqRA97FYX4HX38Vbt3O__2tq5KfSjq78UEOffEFe_CRg8mXZ1CHgyH4YPMNmjS-jAI4m07Coja4zLXgv7ctFaFQePISLaZLgdp3a0a-Sht5cwwZfAhg.mc7_YA9mg3l7VV5B.ZOnYjkiXx1YSxDIILjcHUXluwW8jqsSO5NuIkto.9KtJGJRS9QevrqZPYYlcTQ\n</code></pre>\n<p>That's the java code I'm trying to rewrite in python:</p>\n<pre><code>  private RSAPublicKey getObjectEncryptionKey()\n      throws NoSuchAlgorithmException, InvalidKeySpecException {\n    logger.debug(&quot;Getting object encryption key&quot;);\n    if (Objects.isNull(objectEncryptionKey)) {\n      objectEncryptionKey = getActiveKey(Algorithm.RSA);\n    }\n    byte[] encryptionKey = base64Decode(String.valueOf(objectEncryptionKey.getEncryptionKeyValue()).getBytes());\n\n    KeyFactory keyFactory = getInstance(Algorithm.RSA.name());\n    return (RSAPublicKey) keyFactory.generatePublic(new X509EncodedKeySpec(encryptionKey));\n  }\n\n\n  public String encryptObject(Object object) {\n    logger.debug(&quot;Encrypting object with keyId: {}&quot;, getObjectEncryptionKeyId());\n    JsonWebEncryption encryptedObject = getJWEObject(object);\n\n    try {\n      return encryptedObject.getCompactSerialization();\n    } catch (JoseException e) {\n      throw new CryptoException(&quot;Could not encrypt object/event&quot;, e);\n    }\n  }\n\n  private JsonWebEncryption getJWEObject(Object object) {\n    JsonWebEncryption jwe = new JsonWebEncryption();\n\n    try {\n      jwe.setAlgorithmHeaderValue(KeyManagementAlgorithmIdentifiers.RSA_OAEP_256);\n      jwe.setEncryptionMethodHeaderParameter(ContentEncryptionAlgorithmIdentifiers.AES_256_GCM);\n      jwe.setKey(getObjectEncryptionKey());\n      jwe.setKeyIdHeaderValue(getObjectEncryptionKeyId());\n    } catch (NoSuchAlgorithmException | InvalidKeySpecException e) {\n      throw new CryptoException(&quot;Could not create JsonWebEncryption&quot;, e);\n    }\n  }\n</code></pre>\n<p>How is it different from my previous question and what is the correct way to do it in python?</p>\n<p>I tried doing something like that:</p>\n<pre><code>def grouper(iterable, n, fillvalue=''):\n    args = [iter(iterable)] * n\n    return zip_longest(*args, fillvalue=fillvalue)\n\n\ndef decryption_key_to_pem(decryption_key: str) -&gt; bytes:\n    pem = ['-----BEGIN PRIVATE KEY-----']\n    for group in grouper(decryption_key, 64):\n        pem.append(''.join(group))\n    pem.append('-----END PRIVATE KEY-----')\n    return str.encode('\\n'.join(pem))\n\n\njwk.JWK.from_pem(decryption_key_to_pem(key))\n</code></pre>\n<p>but I get this exception:</p>\n<pre><code>ValueError: ('Could not deserialize key data. The data may be in an incorrect format, it may be encrypted with an unsupported algorithm, or it may be an unsupported key type (e.g. EC curves with explicit parameters).', [_OpenSSLErrorWithText(code=503841036, lib=60, reason=524556, reason_text=b'error:1E08010C:DECODER routines::unsupported'), _OpenSSLErrorWithText(code=109052072, lib=13, reason=168, reason_text=b'error:068000A8:asn1 encoding routines::wrong tag'), _OpenSSLErrorWithText(code=109576458, lib=13, reason=524554, reason_text=b'error:0688010A:asn1 encoding routines::nested asn1 error'), _OpenSSLErrorWithText(code=109576458, lib=13, reason=524554, reason_text=b'error:0688010A:asn1 encoding routines::nested asn1 error')])\n</code></pre>\n<p>Also tried something like:</p>\n<pre><code>def get_jwe_key(data, encryption_key, encryption_key_id):\n    jwe = jwcrypto.jwe.JWE()\n    jwe.plaintext = json.dumps(data).encode('utf-8')\n    jwe.alg = 'RSA-OAEP-256'\n    jwe.enc = 'A256GCM'\n    jwe.recipient = encryption_key\n    jwe.header = {'kid': encryption_key_id}\n    return jwe\n\n\njwe_key = get_jwe_key(decrypted_data, key, key_id)\njwe_key.serialize()\n</code></pre>\n<p>and I get: <code>jwcrypto.common.InvalidJWEOperation: No available ciphertext</code></p>\n"},{"tags":["java","maven"],"answers":[{"tags":[],"owner":{"account_id":7207915,"reputation":1518,"user_id":5502970,"accept_rate":43,"display_name":"sovas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1492868592,"creation_date":1492868592,"answer_id":43559962,"question_id":43559949,"body_markdown":"You forgot to specify `perl.path` variable in `&lt;executable&gt;` tag.\r\n\r\n    &lt;executable&gt;${perl.path}&lt;/executable&gt;\r\n\r\nAdd this to your pom parent:\r\n\r\n    &lt;properties&gt;\r\n        &lt;perl.path&gt;path/to/perl&lt;/perl.path&gt;       \r\n    &lt;/properties&gt;","title":"Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.6.0:exec (default) on project ors: The parameter &#39;executable&#39; is missing or invalid","body":"<p>You forgot to specify <code>perl.path</code> variable in <code>&lt;executable&gt;</code> tag.</p>\n\n<pre><code>&lt;executable&gt;${perl.path}&lt;/executable&gt;\n</code></pre>\n\n<p>Add this to your pom parent:</p>\n\n<pre><code>&lt;properties&gt;\n    &lt;perl.path&gt;path/to/perl&lt;/perl.path&gt;       \n&lt;/properties&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":52566,"reputation":2246,"user_id":968231,"display_name":"Hod"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1512702016,"creation_date":1512702016,"answer_id":47707057,"question_id":43559949,"body_markdown":"As of `exec-maven-plugin` version 1.6.0, it appears `&lt;configuration&gt;` sections within `&lt;execution&gt;` blocks are ignored unless you specify an id.\r\n\r\nTry changing your command line, substituting **exec:exec@foo** for **exec:exec** with the plugin block changed to include an id **foo** as follows:\r\n\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n            &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\r\n              &lt;executions&gt;\r\n                  &lt;execution&gt;\r\n                      &lt;id&gt;foo&lt;/id&gt;\r\n                      &lt;phase&gt;package&lt;/phase&gt;\r\n                      &lt;goals&gt;&lt;goal&gt;exec&lt;/goal&gt;&lt;/goals&gt;\r\n                      &lt;configuration&gt;\r\n              &lt;executable&gt;${perl.path}&lt;/executable&gt;\r\n                          &lt;arguments&gt;\r\n                              &lt;argument&gt;../tools/scripts/createScript.pl&lt;/argument&gt;\r\n                              &lt;argument&gt;${project.build.directory}/${project.artifactId}&lt;/argument&gt;\r\n                              &lt;argument&gt;ors&lt;/argument&gt;\r\n                              &lt;argument&gt;org.marketcetera.ors.OrderRoutingSystem&lt;/argument&gt;\r\n                              &lt;argument&gt;${project.build.directory}/${project.artifactId}&lt;/argument&gt;\r\n                              &lt;argument&gt;orsadmin&lt;/argument&gt;\r\n                              &lt;argument&gt;org.marketcetera.ors.security.ORSAdminCLI&lt;/argument&gt;\r\n                          &lt;/arguments&gt;\r\n                      &lt;/configuration&gt;\r\n                  &lt;/execution&gt;\r\n              &lt;/executions&gt;\r\n          &lt;/plugin&gt;\r\n","title":"Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.6.0:exec (default) on project ors: The parameter &#39;executable&#39; is missing or invalid","body":"<p>As of <code>exec-maven-plugin</code> version 1.6.0, it appears <code>&lt;configuration&gt;</code> sections within <code>&lt;execution&gt;</code> blocks are ignored unless you specify an id.</p>\n\n<p>Try changing your command line, substituting <strong>exec:exec@foo</strong> for <strong>exec:exec</strong> with the plugin block changed to include an id <strong>foo</strong> as follows:</p>\n\n<pre><code>      &lt;plugin&gt;\n        &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n        &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\n          &lt;executions&gt;\n              &lt;execution&gt;\n                  &lt;id&gt;foo&lt;/id&gt;\n                  &lt;phase&gt;package&lt;/phase&gt;\n                  &lt;goals&gt;&lt;goal&gt;exec&lt;/goal&gt;&lt;/goals&gt;\n                  &lt;configuration&gt;\n          &lt;executable&gt;${perl.path}&lt;/executable&gt;\n                      &lt;arguments&gt;\n                          &lt;argument&gt;../tools/scripts/createScript.pl&lt;/argument&gt;\n                          &lt;argument&gt;${project.build.directory}/${project.artifactId}&lt;/argument&gt;\n                          &lt;argument&gt;ors&lt;/argument&gt;\n                          &lt;argument&gt;org.marketcetera.ors.OrderRoutingSystem&lt;/argument&gt;\n                          &lt;argument&gt;${project.build.directory}/${project.artifactId}&lt;/argument&gt;\n                          &lt;argument&gt;orsadmin&lt;/argument&gt;\n                          &lt;argument&gt;org.marketcetera.ors.security.ORSAdminCLI&lt;/argument&gt;\n                      &lt;/arguments&gt;\n                  &lt;/configuration&gt;\n              &lt;/execution&gt;\n          &lt;/executions&gt;\n      &lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17543100,"reputation":129,"user_id":12724927,"display_name":"Mohan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1639031496,"creation_date":1639031496,"answer_id":70285594,"question_id":43559949,"body_markdown":"I resolved this error by specifying the required plugin in pom.xml as follows\r\n\r\n\t\t\t\t&lt;plugin&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t&lt;executable&gt;java&lt;/executable&gt;\r\n\t\t\t\t\t\t&lt;arguments&gt;\r\n\t\t\t\t\t\t\t&lt;argument&gt;-classpath&lt;/argument&gt;\r\n\t\t\t\t\t\t\t&lt;classpath /&gt;\r\n\t\t\t\t\t\t\t&lt;argument&gt;com.ocloud.Alarm.App&lt;/argument&gt;\r\n\t\t\t\t\t\t&lt;/arguments&gt;\r\n\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t&lt;/plugin&gt;","title":"Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.6.0:exec (default) on project ors: The parameter &#39;executable&#39; is missing or invalid","body":"<p>I resolved this error by specifying the required plugin in pom.xml as follows</p>\n<pre><code>            &lt;plugin&gt;\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n                &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.0.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;executable&gt;java&lt;/executable&gt;\n                    &lt;arguments&gt;\n                        &lt;argument&gt;-classpath&lt;/argument&gt;\n                        &lt;classpath /&gt;\n                        &lt;argument&gt;com.ocloud.Alarm.App&lt;/argument&gt;\n                    &lt;/arguments&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15890902,"reputation":1,"user_id":11466055,"display_name":"Ahmed Arby"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1652637989,"creation_date":1652637989,"answer_id":72250960,"question_id":43559949,"body_markdown":"Just compile before execution\r\n\r\n```console\r\nclean compiler:compile exec:java\r\n```","title":"Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.6.0:exec (default) on project ors: The parameter &#39;executable&#39; is missing or invalid","body":"<p>Just compile before execution</p>\n<pre><code>clean compiler:compile exec:java\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5950528,"reputation":2878,"user_id":4678661,"display_name":"Fabich"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675181605,"creation_date":1675181605,"answer_id":75299981,"question_id":43559949,"body_markdown":"This error `The parameter &#39;executable&#39; is missing or invalid` can also happen if the `exec-maven-plugin` plugin is configured in a child maven module and you run the command from the parent directory.\r\n\r\nTo fix that, simple change your working directory to where the plugin is used. ","title":"Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.6.0:exec (default) on project ors: The parameter &#39;executable&#39; is missing or invalid","body":"<p>This error <code>The parameter 'executable' is missing or invalid</code> can also happen if the <code>exec-maven-plugin</code> plugin is configured in a child maven module and you run the command from the parent directory.</p>\n<p>To fix that, simple change your working directory to where the plugin is used.</p>\n"}],"owner":{"account_id":10743713,"reputation":61,"user_id":7905840,"display_name":"Nikul Brahmbhatt"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19412,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":5,"score":6,"last_activity_date":1675181605,"creation_date":1492868513,"question_id":43559949,"body_markdown":"When i am trying to execute **mvn -DskipTests=true -Passembly assembly:directory exec:exec** command to make binary i am getting \r\n **Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.6.0:exec (default) on project ors: The parameter &#39;executable&#39; is missing or invalid** error. i have also applied **Source Target 1.8** inside configuration but still i am getting the same error.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    &lt;profile&gt;\r\n          &lt;id&gt;execute&lt;/id&gt;\r\n          &lt;build&gt;\r\n            &lt;plugins&gt;\r\n              &lt;plugin&gt;\r\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n                &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\r\n                  &lt;executions&gt;\r\n                      &lt;execution&gt;\r\n                          &lt;goals&gt;&lt;goal&gt;java&lt;/goal&gt;&lt;/goals&gt;\r\n                      &lt;/execution&gt;\r\n                  &lt;/executions&gt;\r\n    \t      &lt;configuration&gt;\r\n    \t\t  &lt;mainClass&gt;org.marketcetera.ors.OrderRoutingSystem&lt;/mainClass&gt;\r\n    \t\t  &lt;systemProperties&gt;\r\n    \t\t      &lt;systemProperty&gt;\r\n    \t\t          &lt;key&gt;org.marketcetera.appDir&lt;/key&gt;\r\n    \t\t          &lt;value&gt;src/test/cmd_exec&lt;/value&gt;\r\n    \t\t      &lt;/systemProperty&gt;\r\n    \t\t  &lt;/systemProperties&gt;\r\n    \t\t  &lt;classpathScope&gt;test&lt;/classpathScope&gt;\r\n    \t      &lt;/configuration&gt;\r\n              &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n          &lt;/build&gt;\r\n        &lt;/profile&gt;\r\n    \r\n        &lt;!-- Command-line execution of the ORS (with DB initialization). --&gt;\r\n        &lt;profile&gt;\r\n          &lt;id&gt;executeDBInit&lt;/id&gt;\r\n          &lt;build&gt;\r\n            &lt;plugins&gt;\r\n              &lt;plugin&gt;\r\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n                &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\r\n                  &lt;executions&gt;\r\n                      &lt;execution&gt;\r\n                          &lt;goals&gt;&lt;goal&gt;java&lt;/goal&gt;&lt;/goals&gt;\r\n                      &lt;/execution&gt;\r\n                  &lt;/executions&gt;\r\n    \t      &lt;configuration&gt;\r\n    \t\t&lt;mainClass&gt;org.marketcetera.ors.DBInit&lt;/mainClass&gt;\r\n    \t\t&lt;arguments&gt;\r\n    \t\t  &lt;argument&gt;org.marketcetera.ors.OrderRoutingSystem&lt;/argument&gt;\r\n    \t\t&lt;/arguments&gt;\r\n    \t\t&lt;systemProperties&gt;\r\n    \t\t  &lt;systemProperty&gt;\r\n    \t\t    &lt;key&gt;org.marketcetera.appDir&lt;/key&gt;\r\n    \t\t    &lt;value&gt;src/test/cmd_exec&lt;/value&gt;\r\n    \t\t  &lt;/systemProperty&gt;\r\n    \t\t&lt;/systemProperties&gt;\r\n    \t\t&lt;classpathScope&gt;test&lt;/classpathScope&gt;\r\n    \t      &lt;/configuration&gt;\r\n              &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n          &lt;/build&gt;\r\n        &lt;/profile&gt;\r\n    \r\n        &lt;!-- Command-line execution of the miniscule exchange. --&gt;\r\n        &lt;profile&gt;\r\n          &lt;id&gt;exchange&lt;/id&gt;\r\n          &lt;build&gt;\r\n            &lt;plugins&gt;\r\n              &lt;plugin&gt;\r\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n                &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\r\n                  &lt;executions&gt;\r\n                      &lt;execution&gt;\r\n                          &lt;goals&gt;&lt;goal&gt;java&lt;/goal&gt;&lt;/goals&gt;\r\n                      &lt;/execution&gt;\r\n                  &lt;/executions&gt;\r\n    \t      &lt;configuration&gt;\r\n    \t\t&lt;mainClass&gt;org.marketcetera.ors.exchange.Main&lt;/mainClass&gt;\r\n    \t\t&lt;arguments&gt;\r\n    \t\t  &lt;argument&gt;exchange.xml&lt;/argument&gt;\r\n    \t\t&lt;/arguments&gt;\r\n    \t\t&lt;systemProperties&gt;\r\n    \t\t  &lt;systemProperty&gt;\r\n    \t\t    &lt;key&gt;org.marketcetera.appDir&lt;/key&gt;\r\n    \t\t    &lt;value&gt;src/test/cmd_exec&lt;/value&gt;\r\n    \t\t  &lt;/systemProperty&gt;\r\n    \t\t&lt;/systemProperties&gt;\r\n    \t\t&lt;classpathScope&gt;test&lt;/classpathScope&gt;\r\n    \t      &lt;/configuration&gt;\r\n              &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n          &lt;/build&gt;\r\n        &lt;/profile&gt;\r\n    \r\n        &lt;!-- Security administration utility. --&gt;\r\n        &lt;profile&gt;\r\n          &lt;id&gt;cli&lt;/id&gt;\r\n          &lt;build&gt;\r\n            &lt;plugins&gt;\r\n              &lt;plugin&gt;\r\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n                &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\r\n                  &lt;executions&gt;\r\n                      &lt;execution&gt;\r\n                          &lt;goals&gt;&lt;goal&gt;java&lt;/goal&gt;&lt;/goals&gt;\r\n                      &lt;/execution&gt;\r\n                  &lt;/executions&gt;\r\n    \t      &lt;configuration&gt;\r\n    \t\t&lt;mainClass&gt;org.marketcetera.ors.security.ORSAdminCLI&lt;/mainClass&gt;\r\n    \t\t&lt;!-- -Dexec.args=&quot;-u admin ...&quot; --&gt;\r\n    \t\t&lt;systemProperties&gt;\r\n    \t\t  &lt;systemProperty&gt;\r\n    \t\t    &lt;key&gt;org.marketcetera.appDir&lt;/key&gt;\r\n    \t\t    &lt;value&gt;src/test/cmd_exec&lt;/value&gt;\r\n    \t\t  &lt;/systemProperty&gt;\r\n    \t\t&lt;/systemProperties&gt;\r\n    \t\t&lt;classpathScope&gt;test&lt;/classpathScope&gt;\r\n    \t      &lt;/configuration&gt;\r\n              &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n          &lt;/build&gt;\r\n        &lt;/profile&gt;\r\n    \r\n        &lt;!-- Assembly. --&gt;\r\n        &lt;profile&gt;\r\n          &lt;id&gt;assembly&lt;/id&gt;\r\n          &lt;build&gt;\r\n            &lt;plugins&gt;\r\n              &lt;plugin&gt;\r\n                &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n                  &lt;executions&gt;\r\n                      &lt;execution&gt;\r\n                          &lt;phase&gt;package&lt;/phase&gt;\r\n                          &lt;goals&gt;&lt;goal&gt;single&lt;/goal&gt;&lt;/goals&gt;\r\n                          &lt;configuration&gt;\r\n                              &lt;formats&gt;&lt;format&gt;dir&lt;/format&gt;&lt;/formats&gt;\r\n                              &lt;descriptors&gt;\r\n                                  &lt;descriptor&gt;src/main/assembly/assembly.xml&lt;/descriptor&gt;\r\n                              &lt;/descriptors&gt;\r\n                          &lt;/configuration&gt;\r\n                      &lt;/execution&gt;\r\n                  &lt;/executions&gt;\r\n              &lt;/plugin&gt;\r\n              &lt;plugin&gt;\r\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n                &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\r\n                  &lt;executions&gt;\r\n                      &lt;execution&gt;\r\n                          &lt;phase&gt;package&lt;/phase&gt;\r\n                          &lt;goals&gt;&lt;goal&gt;exec&lt;/goal&gt;&lt;/goals&gt;\r\n                          &lt;configuration&gt;\r\n      \t\t\t  &lt;executable&gt;${perl.path}&lt;/executable&gt;\r\n                              &lt;arguments&gt;\r\n                                  &lt;argument&gt;../tools/scripts/createScript.pl&lt;/argument&gt;\r\n                                  &lt;argument&gt;${project.build.directory}/${project.artifactId}&lt;/argument&gt;\r\n                                  &lt;argument&gt;ors&lt;/argument&gt;\r\n                                  &lt;argument&gt;org.marketcetera.ors.OrderRoutingSystem&lt;/argument&gt;\r\n                                  &lt;argument&gt;${project.build.directory}/${project.artifactId}&lt;/argument&gt;\r\n                                  &lt;argument&gt;orsadmin&lt;/argument&gt;\r\n                                  &lt;argument&gt;org.marketcetera.ors.security.ORSAdminCLI&lt;/argument&gt;\r\n                              &lt;/arguments&gt;\r\n                          &lt;/configuration&gt;\r\n                      &lt;/execution&gt;\r\n                  &lt;/executions&gt;\r\n              &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n          &lt;/build&gt;\r\n        &lt;/profile&gt;\r\n\r\n","title":"Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.6.0:exec (default) on project ors: The parameter &#39;executable&#39; is missing or invalid","body":"<p>When i am trying to execute <strong>mvn -DskipTests=true -Passembly assembly:directory exec:exec</strong> command to make binary i am getting \n <strong>Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.6.0:exec (default) on project ors: The parameter 'executable' is missing or invalid</strong> error. i have also applied <strong>Source Target 1.8</strong> inside configuration but still i am getting the same error.</p>\n\n<pre><code>&lt;profile&gt;\n      &lt;id&gt;execute&lt;/id&gt;\n      &lt;build&gt;\n        &lt;plugins&gt;\n          &lt;plugin&gt;\n            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n            &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\n              &lt;executions&gt;\n                  &lt;execution&gt;\n                      &lt;goals&gt;&lt;goal&gt;java&lt;/goal&gt;&lt;/goals&gt;\n                  &lt;/execution&gt;\n              &lt;/executions&gt;\n          &lt;configuration&gt;\n          &lt;mainClass&gt;org.marketcetera.ors.OrderRoutingSystem&lt;/mainClass&gt;\n          &lt;systemProperties&gt;\n              &lt;systemProperty&gt;\n                  &lt;key&gt;org.marketcetera.appDir&lt;/key&gt;\n                  &lt;value&gt;src/test/cmd_exec&lt;/value&gt;\n              &lt;/systemProperty&gt;\n          &lt;/systemProperties&gt;\n          &lt;classpathScope&gt;test&lt;/classpathScope&gt;\n          &lt;/configuration&gt;\n          &lt;/plugin&gt;\n        &lt;/plugins&gt;\n      &lt;/build&gt;\n    &lt;/profile&gt;\n\n    &lt;!-- Command-line execution of the ORS (with DB initialization). --&gt;\n    &lt;profile&gt;\n      &lt;id&gt;executeDBInit&lt;/id&gt;\n      &lt;build&gt;\n        &lt;plugins&gt;\n          &lt;plugin&gt;\n            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n            &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\n              &lt;executions&gt;\n                  &lt;execution&gt;\n                      &lt;goals&gt;&lt;goal&gt;java&lt;/goal&gt;&lt;/goals&gt;\n                  &lt;/execution&gt;\n              &lt;/executions&gt;\n          &lt;configuration&gt;\n        &lt;mainClass&gt;org.marketcetera.ors.DBInit&lt;/mainClass&gt;\n        &lt;arguments&gt;\n          &lt;argument&gt;org.marketcetera.ors.OrderRoutingSystem&lt;/argument&gt;\n        &lt;/arguments&gt;\n        &lt;systemProperties&gt;\n          &lt;systemProperty&gt;\n            &lt;key&gt;org.marketcetera.appDir&lt;/key&gt;\n            &lt;value&gt;src/test/cmd_exec&lt;/value&gt;\n          &lt;/systemProperty&gt;\n        &lt;/systemProperties&gt;\n        &lt;classpathScope&gt;test&lt;/classpathScope&gt;\n          &lt;/configuration&gt;\n          &lt;/plugin&gt;\n        &lt;/plugins&gt;\n      &lt;/build&gt;\n    &lt;/profile&gt;\n\n    &lt;!-- Command-line execution of the miniscule exchange. --&gt;\n    &lt;profile&gt;\n      &lt;id&gt;exchange&lt;/id&gt;\n      &lt;build&gt;\n        &lt;plugins&gt;\n          &lt;plugin&gt;\n            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n            &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\n              &lt;executions&gt;\n                  &lt;execution&gt;\n                      &lt;goals&gt;&lt;goal&gt;java&lt;/goal&gt;&lt;/goals&gt;\n                  &lt;/execution&gt;\n              &lt;/executions&gt;\n          &lt;configuration&gt;\n        &lt;mainClass&gt;org.marketcetera.ors.exchange.Main&lt;/mainClass&gt;\n        &lt;arguments&gt;\n          &lt;argument&gt;exchange.xml&lt;/argument&gt;\n        &lt;/arguments&gt;\n        &lt;systemProperties&gt;\n          &lt;systemProperty&gt;\n            &lt;key&gt;org.marketcetera.appDir&lt;/key&gt;\n            &lt;value&gt;src/test/cmd_exec&lt;/value&gt;\n          &lt;/systemProperty&gt;\n        &lt;/systemProperties&gt;\n        &lt;classpathScope&gt;test&lt;/classpathScope&gt;\n          &lt;/configuration&gt;\n          &lt;/plugin&gt;\n        &lt;/plugins&gt;\n      &lt;/build&gt;\n    &lt;/profile&gt;\n\n    &lt;!-- Security administration utility. --&gt;\n    &lt;profile&gt;\n      &lt;id&gt;cli&lt;/id&gt;\n      &lt;build&gt;\n        &lt;plugins&gt;\n          &lt;plugin&gt;\n            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n            &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\n              &lt;executions&gt;\n                  &lt;execution&gt;\n                      &lt;goals&gt;&lt;goal&gt;java&lt;/goal&gt;&lt;/goals&gt;\n                  &lt;/execution&gt;\n              &lt;/executions&gt;\n          &lt;configuration&gt;\n        &lt;mainClass&gt;org.marketcetera.ors.security.ORSAdminCLI&lt;/mainClass&gt;\n        &lt;!-- -Dexec.args=\"-u admin ...\" --&gt;\n        &lt;systemProperties&gt;\n          &lt;systemProperty&gt;\n            &lt;key&gt;org.marketcetera.appDir&lt;/key&gt;\n            &lt;value&gt;src/test/cmd_exec&lt;/value&gt;\n          &lt;/systemProperty&gt;\n        &lt;/systemProperties&gt;\n        &lt;classpathScope&gt;test&lt;/classpathScope&gt;\n          &lt;/configuration&gt;\n          &lt;/plugin&gt;\n        &lt;/plugins&gt;\n      &lt;/build&gt;\n    &lt;/profile&gt;\n\n    &lt;!-- Assembly. --&gt;\n    &lt;profile&gt;\n      &lt;id&gt;assembly&lt;/id&gt;\n      &lt;build&gt;\n        &lt;plugins&gt;\n          &lt;plugin&gt;\n            &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n              &lt;executions&gt;\n                  &lt;execution&gt;\n                      &lt;phase&gt;package&lt;/phase&gt;\n                      &lt;goals&gt;&lt;goal&gt;single&lt;/goal&gt;&lt;/goals&gt;\n                      &lt;configuration&gt;\n                          &lt;formats&gt;&lt;format&gt;dir&lt;/format&gt;&lt;/formats&gt;\n                          &lt;descriptors&gt;\n                              &lt;descriptor&gt;src/main/assembly/assembly.xml&lt;/descriptor&gt;\n                          &lt;/descriptors&gt;\n                      &lt;/configuration&gt;\n                  &lt;/execution&gt;\n              &lt;/executions&gt;\n          &lt;/plugin&gt;\n          &lt;plugin&gt;\n            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n            &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\n              &lt;executions&gt;\n                  &lt;execution&gt;\n                      &lt;phase&gt;package&lt;/phase&gt;\n                      &lt;goals&gt;&lt;goal&gt;exec&lt;/goal&gt;&lt;/goals&gt;\n                      &lt;configuration&gt;\n              &lt;executable&gt;${perl.path}&lt;/executable&gt;\n                          &lt;arguments&gt;\n                              &lt;argument&gt;../tools/scripts/createScript.pl&lt;/argument&gt;\n                              &lt;argument&gt;${project.build.directory}/${project.artifactId}&lt;/argument&gt;\n                              &lt;argument&gt;ors&lt;/argument&gt;\n                              &lt;argument&gt;org.marketcetera.ors.OrderRoutingSystem&lt;/argument&gt;\n                              &lt;argument&gt;${project.build.directory}/${project.artifactId}&lt;/argument&gt;\n                              &lt;argument&gt;orsadmin&lt;/argument&gt;\n                              &lt;argument&gt;org.marketcetera.ors.security.ORSAdminCLI&lt;/argument&gt;\n                          &lt;/arguments&gt;\n                      &lt;/configuration&gt;\n                  &lt;/execution&gt;\n              &lt;/executions&gt;\n          &lt;/plugin&gt;\n        &lt;/plugins&gt;\n      &lt;/build&gt;\n    &lt;/profile&gt;\n</code></pre>\n"},{"tags":["java","compilation","ant","javac","annotation-processing"],"answers":[{"tags":[],"owner":{"account_id":460510,"reputation":9305,"user_id":861646,"accept_rate":54,"display_name":"Tobia"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675181538,"creation_date":1675181538,"answer_id":75299969,"question_id":75296213,"body_markdown":"I solved with some other attributes to javac element:\r\n\r\n    &lt;javac fork=&quot;true&quot; executable=&quot;C:\\Program Files\\Java\\jdk1.8.0_202\\bin\\javac&quot; includeantruntime=&quot;false&quot; ... /&gt;","title":"Ant cannot compile with cross-release process","body":"<p>I solved with some other attributes to javac element:</p>\n<pre><code>&lt;javac fork=&quot;true&quot; executable=&quot;C:\\Program Files\\Java\\jdk1.8.0_202\\bin\\javac&quot; includeantruntime=&quot;false&quot; ... /&gt;\n</code></pre>\n"}],"owner":{"account_id":460510,"reputation":9305,"user_id":861646,"accept_rate":54,"display_name":"Tobia"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675181538,"creation_date":1675163286,"question_id":75296213,"body_markdown":"I have a ant process to compile a java 1.8 application. Ant is lauched from Eclipse IDE  in Windows running with java 1.17.\r\nIf I try to run Ant process using a separate JDK (1.8), different from the workspace one, I got this error:\r\n[![enter image description here][1]][1]\r\n\r\nI tried to run Ant with the same version of Eclipse (1.17), I had to add these attributes to `&lt;javac&gt;` element:\r\n\r\n    target=&quot;8&quot; source=&quot;8&quot; release=&quot;8&quot;\r\n\r\nThe compilation starts, but it fails with this error:\r\n\r\n     java.lang.IllegalAccessError: class org.adrianwalker.multilinestring.JavacMultilineProcessor (in unnamed module @0x4778ea49) cannot access class com.sun.tools.javac.processing.JavacProcessingEnvironment (in module jdk.compiler) because module jdk.compiler does not export com.sun.tools.javac.processing to unnamed module @0x4778ea49\r\n\r\nThe failing class (JavacMultilineProcessor) is a annotation processor class.\r\n(http://www.adrianwalker.org/2011/12/java-multiline-string.html)\r\n\r\nDo you have any idea what happened?\r\n\r\n  [1]: https://i.stack.imgur.com/Nkzyy.png","title":"Ant cannot compile with cross-release process","body":"<p>I have a ant process to compile a java 1.8 application. Ant is lauched from Eclipse IDE  in Windows running with java 1.17.\nIf I try to run Ant process using a separate JDK (1.8), different from the workspace one, I got this error:\n<a href=\"https://i.stack.imgur.com/Nkzyy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Nkzyy.png\" alt=\"enter image description here\" /></a></p>\n<p>I tried to run Ant with the same version of Eclipse (1.17), I had to add these attributes to <code>&lt;javac&gt;</code> element:</p>\n<pre><code>target=&quot;8&quot; source=&quot;8&quot; release=&quot;8&quot;\n</code></pre>\n<p>The compilation starts, but it fails with this error:</p>\n<pre><code> java.lang.IllegalAccessError: class org.adrianwalker.multilinestring.JavacMultilineProcessor (in unnamed module @0x4778ea49) cannot access class com.sun.tools.javac.processing.JavacProcessingEnvironment (in module jdk.compiler) because module jdk.compiler does not export com.sun.tools.javac.processing to unnamed module @0x4778ea49\n</code></pre>\n<p>The failing class (JavacMultilineProcessor) is a annotation processor class.\n(<a href=\"http://www.adrianwalker.org/2011/12/java-multiline-string.html\" rel=\"nofollow noreferrer\">http://www.adrianwalker.org/2011/12/java-multiline-string.html</a>)</p>\n<p>Do you have any idea what happened?</p>\n"},{"tags":["java","spring-boot","thymeleaf","localdate"],"comments":[{"owner":{"account_id":65396,"reputation":8715,"user_id":192465,"accept_rate":85,"display_name":"riddle_me_this"},"score":0,"creation_date":1675082928,"post_id":75284097,"comment_id":132845344,"body_markdown":"Do you have the `thymeleaf-extras-java8time` package too? \nhttps://www.baeldung.com/dates-in-thymeleaf","body":"Do you have the <code>thymeleaf-extras-java8time</code> package too?  <a href=\"https://www.baeldung.com/dates-in-thymeleaf\" rel=\"nofollow noreferrer\">baeldung.com/dates-in-thymeleaf</a>"},{"owner":{"account_id":4131672,"reputation":1,"user_id":3389425,"display_name":"user3389425"},"score":0,"creation_date":1675083355,"post_id":75284097,"comment_id":132845501,"body_markdown":"Yes, i put!\n`\n&lt;dependency&gt;\n            &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\n            &lt;artifactId&gt;thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;nz.net.ultraq.thymeleaf&lt;/groupId&gt;\n            &lt;artifactId&gt;thymeleaf-layout-dialect&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        \n        &lt;dependency&gt;\n\t\t    &lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt;\n\t\t    &lt;artifactId&gt;thymeleaf-extras-java8time&lt;/artifactId&gt;\n\t\t    &lt;!-- &lt;version&gt;3.0.1.RELEASE&lt;/version&gt;  --&gt;\n\t\t&lt;/dependency&gt;\n`","body":"Yes, i put! ` &lt;dependency&gt;             &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;             &lt;artifactId&gt;thymeleaf&lt;/artifactId&gt;         &lt;/dependency&gt;          &lt;dependency&gt;             &lt;groupId&gt;nz.net.ultraq.thymeleaf&lt;/groupId&gt;             &lt;artifactId&gt;thymeleaf-layout-dialect&lt;/artifactId&gt;         &lt;/dependency&gt;                  &lt;dependency&gt; \t\t    &lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt; \t\t    &lt;artifactId&gt;thymeleaf-extras-java8time&lt;/artifactId&gt; \t\t    &lt;!-- &lt;version&gt;3.0.1.RELEASE&lt;/version&gt;  --&gt; \t\t&lt;/dependency&gt; `"},{"owner":{"account_id":65396,"reputation":8715,"user_id":192465,"accept_rate":85,"display_name":"riddle_me_this"},"score":0,"creation_date":1675085659,"post_id":75284097,"comment_id":132846282,"body_markdown":"Can you update your question with the entire HTML with the form tag and the controller code?","body":"Can you update your question with the entire HTML with the form tag and the controller code?"},{"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"score":0,"creation_date":1675158477,"post_id":75284097,"comment_id":132863441,"body_markdown":"I do not see `data` used anywhere, except declaration, in your code.","body":"I do not see <code>data</code> used anywhere, except declaration, in your code."},{"owner":{"account_id":4131672,"reputation":1,"user_id":3389425,"display_name":"user3389425"},"score":0,"creation_date":1675172528,"post_id":75284097,"comment_id":132867964,"body_markdown":"@ArvindKumarAvinash changed info, thanks","body":"@ArvindKumarAvinash changed info, thanks"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1675172541,"post_id":75284097,"comment_id":132867970,"body_markdown":"And where is that data declared? Your current code hints at that you placed in the controller, which is the wrong place. In your dependencies you don&#39;t need the additional thymeleaf dependencies they are part of the starter, also which version of Spring Boot are you using?","body":"And where is that data declared? Your current code hints at that you placed in the controller, which is the wrong place. In your dependencies you don&#39;t need the additional thymeleaf dependencies they are part of the starter, also which version of Spring Boot are you using?"},{"owner":{"account_id":4131672,"reputation":1,"user_id":3389425,"display_name":"user3389425"},"score":0,"creation_date":1675184198,"post_id":75284097,"comment_id":132872253,"body_markdown":"Excuse, I don&#39;t put the full information .. but now I formated with the class &quot;Prova&quot;.\n&lt;version&gt;2.7.2&lt;/version&gt;","body":"Excuse, I don&#39;t put the full information .. but now I formated with the class &quot;Prova&quot;. &lt;version&gt;2.7.2&lt;/version&gt;"},{"owner":{"account_id":4131672,"reputation":1,"user_id":3389425,"display_name":"user3389425"},"score":0,"creation_date":1675244003,"post_id":75284097,"comment_id":132884728,"body_markdown":"If I change to th:value=&quot;*{dataProva}&quot; show in the view ... but  Controller don&#39;t receive","body":"If I change to th:value=&quot;*{dataProva}&quot; show in the view ... but  Controller don&#39;t receive"}],"answers":[{"tags":[],"owner":{"account_id":4131672,"reputation":1,"user_id":3389425,"display_name":"user3389425"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1675158109,"creation_date":1675158109,"answer_id":75295209,"question_id":75284097,"body_markdown":"here my form:\r\n\r\n        &lt;form th:action=&quot;@{/listaProvas/salvar}&quot; method=&quot;post&quot; th:object=&quot;${prova}&quot; class=&quot;form-row espaco-form&quot; &gt;&lt;!-- card-body --&gt;\r\n\t\t\t\t&lt;input th:field=&quot;*{id}&quot; type=&quot;hidden&quot; id=&quot;id&quot;&gt;\r\n\t\t\t\t\r\n\t\t\t\t&lt;div class=&quot;col-md-12&quot;&gt;\r\n\t\t\t\t\t&lt;label for=&quot;nome&quot;&gt;Nome&lt;/label&gt;\r\n\t\t\t\t\t&lt;input id=&quot;nome&quot; th:field=&quot;*{nome}&quot; th:errorclass=&quot;is-invalid&quot; class=&quot;form-control&quot; placeholder=&quot;Nome da Prova&quot;\r\n\t\t\t\t\t\tonkeyup=&quot;this.value = this.value.toUpperCase()&quot;&gt;\r\n\t\t\t\t\t&lt;p class=&quot;alert alert-danger&quot; th:if=&quot;${#fields.hasErrors(&#39;nome&#39;)}&quot; th:errors=&quot;*{nome}&quot;&gt;\r\n\t\t\t\t&lt;/div&gt;\r\n\t\t\t\t&lt;div class=&quot;col-md-12&quot;&gt;\r\n\t\t\t\t\t&lt;div class=&quot;row&quot;&gt;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t&lt;div class=&quot;col-md-4 mb-3&quot;&gt;\r\n\t\t\t\t\t\t\t&lt;label for=&quot;dataProva&quot;&gt;Data Realiza&#231;&#227;o&lt;/label&gt;\r\n\t\t\t\t\t\t\t&lt;div class=&quot;input-group date&quot;&gt;\r\n\t\t\t\t\t\t\t\t&lt;input type=&quot;date&quot; class=&quot;form-control&quot; id=&quot;dataProva&quot; th:field=&quot;*{dataProva}&quot;/&gt;\r\n\t\t\t\t\t\t\t&lt;/div&gt;\r\n\t\t\t\t\t\t\t&lt;p class=&quot;alert alert-danger&quot; th:if=&quot;${#fields.hasErrors(&#39;dataProva&#39;)}&quot; th:errors=&quot;*{dataProva}&quot;&gt;\r\n\t\t\t\t\t\t&lt;/div&gt;\r\n\t\t\t\t\t&lt;/div&gt;\r\n\t\t\t\t&lt;/div&gt;\r\n\t\t\t\t&lt;div class=&quot;col-md-12&quot; style=&quot;margin-top: 5em;&quot;&gt;\r\n\t\t\t\t\t&lt;div class=&quot;row&quot;&gt;\r\n\t\t\t\t\t\t&lt;div class=&quot;col-md-6 mb-3&quot;&gt;\r\n\t\t\t\t\t\t\t&lt;a class=&quot;btn btn-danger btn-lg btn-block&quot; th:href=&quot;@{&#39;/listaProvas&#39;}&quot; role=&quot;button&quot;&gt;Voltar&lt;/a&gt;\r\n\t\t\t\t\t\t&lt;/div&gt;\r\n\t\t\r\n\t\t\t\t\t\t&lt;div class=&quot;col-md-6 mb-3&quot;&gt;\r\n\t\t\t\t\t\t\t&lt;button class=&quot;btn btn-primary btn-lg btn-block&quot; id=&quot;button-submit&quot; type=&quot;submit&quot; role=&quot;button&quot;&gt;Salvar&lt;/button&gt;\r\n\t\t\t\t\t\t&lt;/div&gt;\r\n\t\t\t\t\t&lt;/div&gt;\t\r\n\t\t\t\t&lt;/div&gt;\t\r\n\t\t\t&lt;/form&gt;","title":"Thymeleaf input date don&#39;t show and don&#39;t receive value with LocalDate","body":"<p>here my form:</p>\n<pre><code>    &lt;form th:action=&quot;@{/listaProvas/salvar}&quot; method=&quot;post&quot; th:object=&quot;${prova}&quot; class=&quot;form-row espaco-form&quot; &gt;&lt;!-- card-body --&gt;\n            &lt;input th:field=&quot;*{id}&quot; type=&quot;hidden&quot; id=&quot;id&quot;&gt;\n            \n            &lt;div class=&quot;col-md-12&quot;&gt;\n                &lt;label for=&quot;nome&quot;&gt;Nome&lt;/label&gt;\n                &lt;input id=&quot;nome&quot; th:field=&quot;*{nome}&quot; th:errorclass=&quot;is-invalid&quot; class=&quot;form-control&quot; placeholder=&quot;Nome da Prova&quot;\n                    onkeyup=&quot;this.value = this.value.toUpperCase()&quot;&gt;\n                &lt;p class=&quot;alert alert-danger&quot; th:if=&quot;${#fields.hasErrors('nome')}&quot; th:errors=&quot;*{nome}&quot;&gt;\n            &lt;/div&gt;\n            &lt;div class=&quot;col-md-12&quot;&gt;\n                &lt;div class=&quot;row&quot;&gt;\n                    \n                    &lt;div class=&quot;col-md-4 mb-3&quot;&gt;\n                        &lt;label for=&quot;dataProva&quot;&gt;Data Realização&lt;/label&gt;\n                        &lt;div class=&quot;input-group date&quot;&gt;\n                            &lt;input type=&quot;date&quot; class=&quot;form-control&quot; id=&quot;dataProva&quot; th:field=&quot;*{dataProva}&quot;/&gt;\n                        &lt;/div&gt;\n                        &lt;p class=&quot;alert alert-danger&quot; th:if=&quot;${#fields.hasErrors('dataProva')}&quot; th:errors=&quot;*{dataProva}&quot;&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=&quot;col-md-12&quot; style=&quot;margin-top: 5em;&quot;&gt;\n                &lt;div class=&quot;row&quot;&gt;\n                    &lt;div class=&quot;col-md-6 mb-3&quot;&gt;\n                        &lt;a class=&quot;btn btn-danger btn-lg btn-block&quot; th:href=&quot;@{'/listaProvas'}&quot; role=&quot;button&quot;&gt;Voltar&lt;/a&gt;\n                    &lt;/div&gt;\n    \n                    &lt;div class=&quot;col-md-6 mb-3&quot;&gt;\n                        &lt;button class=&quot;btn btn-primary btn-lg btn-block&quot; id=&quot;button-submit&quot; type=&quot;submit&quot; role=&quot;button&quot;&gt;Salvar&lt;/button&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;  \n            &lt;/div&gt;  \n        &lt;/form&gt;\n</code></pre>\n"}],"owner":{"account_id":4131672,"reputation":1,"user_id":3389425,"display_name":"user3389425"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":134,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1675181511,"creation_date":1675079993,"question_id":75284097,"body_markdown":"I have in my form any inputs with date value, but don&#39;t show value. If I input the date when sent to backend don&#39;t receive this information. I use LocalDate\r\n\r\nI&#39;m use this dependencies:\r\n\r\n    &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\r\n            &lt;artifactId&gt;thymeleaf&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;nz.net.ultraq.thymeleaf&lt;/groupId&gt;\r\n            &lt;artifactId&gt;thymeleaf-layout-dialect&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        \r\n        &lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;thymeleaf-extras-java8time&lt;/artifactId&gt;\r\n\t\t    &lt;!-- &lt;version&gt;3.0.1.RELEASE&lt;/version&gt;  --&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\nClass\r\n\r\n    public class Prova {\r\n       @DateTimeFormat(pattern = &quot;dd/MM/yyyy&quot;)\r\n       private LocalDate dataProva;\r\n}\r\n\r\n    \r\n\r\nController\r\n\r\n    @PostMapping(&quot;/salvar&quot;)\r\n\tpublic ModelAndView salvarProva(@ModelAttribute Prova prova, BindingResult result) {\r\n\t\ttry {\r\n\t\t\tif (result.hasErrors()) {\r\n\t\t\t\tLOGGER.error(&quot;ERRO EM CAMPOS AO SALVAR PROVA {}&quot;, result.getAllErrors());\r\n\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\tif(prova.getId() != null) {\r\n\t\t\t\tprovaService.alterar(prova);\r\n\t\t\t} else {\r\n\t\t\t\t\r\n\t\t\t\tif(provaService.existeProvaDataSituacao(prova.getDataProva(), SituacaoRealizacaoProvaEnum.ABERTA)) {\r\n\t\t\t\t\tthrow new ValidacaoDadosException(String.format(&quot;J&#193; EXISTE UMA PROVA EM ABERTO PARA A DATA {}&quot;, prova.getDataProva()));\r\n\t\t\t\t}\r\n\t\t\t\tprovaService.adicinar(prova);\r\n\t\t\t}\r\n\t\t\treturn listarProvas();\r\n\t\t} catch (ValidacaoDadosException e) {\r\n\t\t\tLOGGER.error(&quot;ERRO AO ADICIONAR/ALTERAR A PROVA &quot;, e);\r\n\t\t\tModelAndView mv = new ModelAndView(&quot;/admin/prova/form&quot;);\r\n\t\t\tmv.addObject(&quot;status&quot;, &quot;501&quot;);\r\n\t\t\tmv.addObject(&quot;message&quot;, &quot;Ocorreu o seguinte erro &quot; + e);\r\n\t\t\treturn mv;\r\n\t\t}\r\n\t\t\r\n\t}","title":"Thymeleaf input date don&#39;t show and don&#39;t receive value with LocalDate","body":"<p>I have in my form any inputs with date value, but don't show value. If I input the date when sent to backend don't receive this information. I use LocalDate</p>\n<p>I'm use this dependencies:</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\n        &lt;artifactId&gt;thymeleaf&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;nz.net.ultraq.thymeleaf&lt;/groupId&gt;\n        &lt;artifactId&gt;thymeleaf-layout-dialect&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    \n    &lt;dependency&gt;\n        &lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt;\n        &lt;artifactId&gt;thymeleaf-extras-java8time&lt;/artifactId&gt;\n        &lt;!-- &lt;version&gt;3.0.1.RELEASE&lt;/version&gt;  --&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>Class</p>\n<pre><code>public class Prova {\n   @DateTimeFormat(pattern = &quot;dd/MM/yyyy&quot;)\n   private LocalDate dataProva;\n</code></pre>\n<p>}</p>\n<p>Controller</p>\n<pre><code>@PostMapping(&quot;/salvar&quot;)\npublic ModelAndView salvarProva(@ModelAttribute Prova prova, BindingResult result) {\n    try {\n        if (result.hasErrors()) {\n            LOGGER.error(&quot;ERRO EM CAMPOS AO SALVAR PROVA {}&quot;, result.getAllErrors());\n        }\n                    \n        if(prova.getId() != null) {\n            provaService.alterar(prova);\n        } else {\n            \n            if(provaService.existeProvaDataSituacao(prova.getDataProva(), SituacaoRealizacaoProvaEnum.ABERTA)) {\n                throw new ValidacaoDadosException(String.format(&quot;JÁ EXISTE UMA PROVA EM ABERTO PARA A DATA {}&quot;, prova.getDataProva()));\n            }\n            provaService.adicinar(prova);\n        }\n        return listarProvas();\n    } catch (ValidacaoDadosException e) {\n        LOGGER.error(&quot;ERRO AO ADICIONAR/ALTERAR A PROVA &quot;, e);\n        ModelAndView mv = new ModelAndView(&quot;/admin/prova/form&quot;);\n        mv.addObject(&quot;status&quot;, &quot;501&quot;);\n        mv.addObject(&quot;message&quot;, &quot;Ocorreu o seguinte erro &quot; + e);\n        return mv;\n    }\n    \n}\n</code></pre>\n"},{"tags":["java","project-reactor"],"comments":[{"owner":{"account_id":2271010,"reputation":12268,"user_id":1998422,"accept_rate":60,"display_name":"Ahmad Abdelghany"},"score":0,"creation_date":1666613362,"post_id":42007841,"comment_id":130971294,"body_markdown":"See https://www.baeldung.com/java-mono-list-to-flux","body":"See <a href=\"https://www.baeldung.com/java-mono-list-to-flux\" rel=\"nofollow noreferrer\">baeldung.com/java-mono-list-to-flux</a>"}],"answers":[{"tags":[],"owner":{"account_id":1126254,"reputation":27393,"user_id":1113486,"display_name":"Simon Basl&#233;"},"down_vote_count":0,"up_vote_count":87,"is_accepted":true,"score":87,"last_activity_date":1521531811,"creation_date":1486059748,"answer_id":42009589,"question_id":42007841,"body_markdown":"In Reactor 3, the `from` operator has been specialized into a few variants, depending on the original source (array, iterable, etc...).\r\n\r\nUse `yourMono.flatMapMany(Flux::fromIterable)` in your case.","title":"How to convert Mono&lt;List&lt;String&gt;&gt; into Flux&lt;String&gt;","body":"<p>In Reactor 3, the <code>from</code> operator has been specialized into a few variants, depending on the original source (array, iterable, etc...).</p>\n\n<p>Use <code>yourMono.flatMapMany(Flux::fromIterable)</code> in your case.</p>\n"},{"tags":[],"owner":{"account_id":5995486,"reputation":616,"user_id":4710245,"display_name":"Anthony Pi&#241;ero"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1533074724,"creation_date":1533074724,"answer_id":51622762,"question_id":42007841,"body_markdown":"Thanks Simon, I implemented something like this:\r\n\r\n    List&lt;Object&gt; dbObjects = ListObjectsBD();\r\n        List&lt;Dao&gt; daos = mapperObjToDao(dbObjects);\r\n        Flux&lt;Dao&gt; daoFlux = Mono.just(daos).flatMapMany(Flux::fromIterable);","title":"How to convert Mono&lt;List&lt;String&gt;&gt; into Flux&lt;String&gt;","body":"<p>Thanks Simon, I implemented something like this:</p>\n\n<pre><code>List&lt;Object&gt; dbObjects = ListObjectsBD();\n    List&lt;Dao&gt; daos = mapperObjToDao(dbObjects);\n    Flux&lt;Dao&gt; daoFlux = Mono.just(daos).flatMapMany(Flux::fromIterable);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2197912,"reputation":1425,"user_id":1943126,"display_name":"Michail Alexakis"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1533114904,"creation_date":1533114904,"answer_id":51629537,"question_id":42007841,"body_markdown":"I think that probably `Flux::mergeSequential` static factory fits better here:\r\n\r\n     Iterable&lt;Mono&lt;String&gt;&gt; monos = ...\r\n     Flux&lt;String&gt; f = Flux.mergeSequential(monos);\r\n\r\nThis kind of merge (sequential) will maintain the ordering inside given source iterable, and will also subscribe/request eagerly from all participating sources (so more parallelization expected while computing mono results).","title":"How to convert Mono&lt;List&lt;String&gt;&gt; into Flux&lt;String&gt;","body":"<p>I think that probably <code>Flux::mergeSequential</code> static factory fits better here:</p>\n\n<pre><code> Iterable&lt;Mono&lt;String&gt;&gt; monos = ...\n Flux&lt;String&gt; f = Flux.mergeSequential(monos);\n</code></pre>\n\n<p>This kind of merge (sequential) will maintain the ordering inside given source iterable, and will also subscribe/request eagerly from all participating sources (so more parallelization expected while computing mono results).</p>\n"},{"tags":[],"owner":{"account_id":19395247,"reputation":3208,"user_id":14183092,"display_name":"kerbermeister"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675181200,"creation_date":1675180256,"answer_id":75299668,"question_id":42007841,"body_markdown":"Another way would be using [flatMapIterable()][1]\r\n\r\n&gt; Transform the item emitted by this Mono into Iterable, then forward\r\n&gt; its elements into the returned Flux.\r\n\r\nSo it looks like this:\r\n\r\n    List&lt;String&gt; strings = new ArrayList&lt;&gt;();\r\n    strings.add(&quot;hello&quot;);\r\n    strings.add(&quot;world&quot;);\r\n    strings.add(&quot;!&quot;);\r\n\r\n    Mono&lt;List&lt;String&gt;&gt; monoList = Mono.just(strings);\r\n\r\n    Flux&lt;String&gt; flux = monoList.flatMapIterable(list -&gt; list);\r\n\r\nOr replace lambda `list -&gt; list` with `Function.identity()`\r\n\r\n    Flux&lt;String&gt; flux = monoList.flatMapIterable(Function.identity());\r\n\r\n\r\n  [1]: https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Flux.html#flatMapIterable-java.util.function.Function-","title":"How to convert Mono&lt;List&lt;String&gt;&gt; into Flux&lt;String&gt;","body":"<p>Another way would be using <a href=\"https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Flux.html#flatMapIterable-java.util.function.Function-\" rel=\"nofollow noreferrer\">flatMapIterable()</a></p>\n<blockquote>\n<p>Transform the item emitted by this Mono into Iterable, then forward\nits elements into the returned Flux.</p>\n</blockquote>\n<p>So it looks like this:</p>\n<pre><code>List&lt;String&gt; strings = new ArrayList&lt;&gt;();\nstrings.add(&quot;hello&quot;);\nstrings.add(&quot;world&quot;);\nstrings.add(&quot;!&quot;);\n\nMono&lt;List&lt;String&gt;&gt; monoList = Mono.just(strings);\n\nFlux&lt;String&gt; flux = monoList.flatMapIterable(list -&gt; list);\n</code></pre>\n<p>Or replace lambda <code>list -&gt; list</code> with <code>Function.identity()</code></p>\n<pre><code>Flux&lt;String&gt; flux = monoList.flatMapIterable(Function.identity());\n</code></pre>\n"}],"owner":{"account_id":2362473,"reputation":595,"user_id":2068867,"accept_rate":75,"display_name":"Mavo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55954,"favorite_count":0,"down_vote_count":0,"up_vote_count":43,"accepted_answer_id":42009589,"answer_count":4,"score":43,"last_activity_date":1675181200,"creation_date":1486054201,"question_id":42007841,"body_markdown":"I&#39;m converting small project written in RxJava 1.x to Reactor 3.x. All is good, except that I could not find out how to replace `flatMap(Observable::from)` with an appropriate counterpart. I have `Mono&lt;List&lt;String&gt;&gt;` and I need to convert it to `Flux&lt;String&gt;`.","title":"How to convert Mono&lt;List&lt;String&gt;&gt; into Flux&lt;String&gt;","body":"<p>I'm converting small project written in RxJava 1.x to Reactor 3.x. All is good, except that I could not find out how to replace <code>flatMap(Observable::from)</code> with an appropriate counterpart. I have <code>Mono&lt;List&lt;String&gt;&gt;</code> and I need to convert it to <code>Flux&lt;String&gt;</code>.</p>\n"},{"tags":["java","image-processing","imagej","fiji"],"owner":{"account_id":27667952,"reputation":11,"user_id":21119387,"display_name":"MxIhsaan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1675181184,"creation_date":1675181184,"question_id":75299897,"body_markdown":"The idea of my program is similar to the adjust brightness/contrast built-in plugin. I want to have the image in one window where you can see it with varying b/c values. \r\n\r\nThe original image should be saved before I make any changes to it so that I can go back to the original and make more changes to that instead of the new image created after using the setDisplayRange(), which revert the b/c settings back to how they were in the original. This should all happen in the same window. I don&#39;t want to create a new window each time to display the changes I make.\r\n\r\n\r\n\r\n```\r\nImagePlus imp = WindowManager.getCurrentImage();                                             \r\nImageProcessor ip = imp.getProcessor();                         \r\nip.snapshot();                                                                               \r\nimp.setDisplayRange(10, 30);                                                                 \r\nThread.sleep(1000);                                                                          \r\nip.reset();\r\n```\r\n\r\nReading the API, I believe this should work and do what I want but it only changes the b/c without going back to what the original image was. I looked at the b/c code and this is seems to be what they did there too so I&#39;m not sure what&#39;s really wrong here unless I am making a stupid mistake, misunderstanding what the snapshot and reset methods do?\r\n\r\nAny help would be appreciated, thank you in advance.","title":"How can I save an image, change the contrast/brightness, display the change then restore the original image, displaying those all in the same window?","body":"<p>The idea of my program is similar to the adjust brightness/contrast built-in plugin. I want to have the image in one window where you can see it with varying b/c values.</p>\n<p>The original image should be saved before I make any changes to it so that I can go back to the original and make more changes to that instead of the new image created after using the setDisplayRange(), which revert the b/c settings back to how they were in the original. This should all happen in the same window. I don't want to create a new window each time to display the changes I make.</p>\n<pre><code>ImagePlus imp = WindowManager.getCurrentImage();                                             \nImageProcessor ip = imp.getProcessor();                         \nip.snapshot();                                                                               \nimp.setDisplayRange(10, 30);                                                                 \nThread.sleep(1000);                                                                          \nip.reset();\n</code></pre>\n<p>Reading the API, I believe this should work and do what I want but it only changes the b/c without going back to what the original image was. I looked at the b/c code and this is seems to be what they did there too so I'm not sure what's really wrong here unless I am making a stupid mistake, misunderstanding what the snapshot and reset methods do?</p>\n<p>Any help would be appreciated, thank you in advance.</p>\n"},{"tags":["java","apache-spark"],"comments":[{"owner":{"account_id":231844,"reputation":15697,"user_id":496289,"accept_rate":86,"display_name":"Kashyap"},"score":0,"creation_date":1675177889,"post_id":75297682,"comment_id":132869944,"body_markdown":"any reason you&#39;re using 2.4.4 when the current latest is 3.3.1? could be due to any number of bugs that have been fixed.","body":"any reason you&#39;re using 2.4.4 when the current latest is 3.3.1? could be due to any number of bugs that have been fixed."},{"owner":{"account_id":13486083,"reputation":1715,"user_id":9729847,"display_name":"maxime G"},"score":0,"creation_date":1675178675,"post_id":75297682,"comment_id":132870248,"body_markdown":"I using CDP version 7.1.X","body":"I using CDP version 7.1.X"}],"answers":[{"tags":[],"owner":{"account_id":231844,"reputation":15697,"user_id":496289,"accept_rate":86,"display_name":"Kashyap"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1675181171,"creation_date":1675181171,"answer_id":75299892,"question_id":75297682,"body_markdown":"Couldn&#39;t find it [in docs][1], but AFAIK `persist()` is a lazy operation, so just like `where` or `select` etc it won&#39;t execute/do anything, it just adds onto the execution plan. It&#39;ll execute only when you trigger some action like `count` or `write`.\r\n\r\nAssuming you have a valid usecase for duplicating data in `folder1` (as baffling as it is) by reading from it and writing back to it. I would have more more confidence in following options:\r\n1. Change the order. Write back to `folder1` last.\r\n\r\n```python\r\ndf = spark.read.csv(&#39;folder1&#39;)\r\n# changed order folder2 then 1\r\ndf.write.mode(SaveMode.Overwrite).csv(&#39;folder2&#39;)\r\ndf.write.mode(SaveMode.Append).csv(&#39;folder1&#39;)\r\n```\r\n\r\n\r\n\r\n2. Make a copy of `folder1` (instead of `persist()`) and use that as source for all subsequent reads.\r\n\r\n```python\r\nshutils.copy(&#39;folder1&#39;, &#39;folder1_copy&#39;)\r\n# OR spark.read.csv(&#39;folder1&#39;).write.csv(&#39;folder1_copy&#39;)\r\ndf = spark.read.csv(&#39;folder1_copy&#39;)\r\n# original order folder1 then 2\r\ndf.write.mode(SaveMode.Append).csv(&#39;folder1&#39;)\r\ndf.write.mode(SaveMode.Overwrite).csv(&#39;folder2&#39;)\r\n```\r\n\r\n\r\n  [1]: https://spark.apache.org/docs/2.4.4/api/python/pyspark.sql.html#pyspark.sql.DataFrame.persist","title":"How to insert exactly same dataFrame in multiple target including root datasource using Spark function?","body":"<p>Couldn't find it <a href=\"https://spark.apache.org/docs/2.4.4/api/python/pyspark.sql.html#pyspark.sql.DataFrame.persist\" rel=\"nofollow noreferrer\">in docs</a>, but AFAIK <code>persist()</code> is a lazy operation, so just like <code>where</code> or <code>select</code> etc it won't execute/do anything, it just adds onto the execution plan. It'll execute only when you trigger some action like <code>count</code> or <code>write</code>.</p>\n<p>Assuming you have a valid usecase for duplicating data in <code>folder1</code> (as baffling as it is) by reading from it and writing back to it. I would have more more confidence in following options:</p>\n<ol>\n<li>Change the order. Write back to <code>folder1</code> last.</li>\n</ol>\n<pre class=\"lang-py prettyprint-override\"><code>df = spark.read.csv('folder1')\n# changed order folder2 then 1\ndf.write.mode(SaveMode.Overwrite).csv('folder2')\ndf.write.mode(SaveMode.Append).csv('folder1')\n</code></pre>\n<ol start=\"2\">\n<li>Make a copy of <code>folder1</code> (instead of <code>persist()</code>) and use that as source for all subsequent reads.</li>\n</ol>\n<pre class=\"lang-py prettyprint-override\"><code>shutils.copy('folder1', 'folder1_copy')\n# OR spark.read.csv('folder1').write.csv('folder1_copy')\ndf = spark.read.csv('folder1_copy')\n# original order folder1 then 2\ndf.write.mode(SaveMode.Append).csv('folder1')\ndf.write.mode(SaveMode.Overwrite).csv('folder2')\n</code></pre>\n"}],"owner":{"account_id":13486083,"reputation":1715,"user_id":9729847,"display_name":"maxime G"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":480,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1675181171,"creation_date":1675170621,"question_id":75297682,"body_markdown":"I want to read data from a single source, then write it back to same source then write to another source.\r\n\r\nSource can be different: HDFS, Mongo, Kafka ... \r\n\r\nWith local testing, I have a weird behaviour.\r\n\r\nThis is my first test: I persist the data on disk to not recompute the data from original source:\r\n\r\n```java\r\nDataset&lt;Row&gt; rootDataframe = sparkSession\r\n        .read()\r\n        .option(&quot;header&quot;, true)\r\n        .csv(&quot;folder1&quot;);\r\n\r\nDataset&lt;Row&gt; cachedDataFrame = rootDataframe.persist(StorageLevel.DISK_ONLY());\r\n\r\ncachedDataFrame\r\n        .write()\r\n        .option(&quot;header&quot;, true)\r\n        .mode(SaveMode.Append)\r\n        .csv(&quot;folder1&quot;);\r\n\r\ncachedDataFrame\r\n        .write()\r\n        .option(&quot;header&quot;, true)\r\n        .mode(SaveMode.Overwrite)\r\n        .csv(&quot;folder2&quot;);\r\n\r\ncachedDataFrame.unpersist();\r\n```\r\n\r\nThis doesn&#39;t work as I intended, because of persist function. The cached data is invalidated by my first write that writes it back to original source. In my folder2, I get duplicated data (the original one and the one written by my first operation). This JIRA ticket looks like my problem: https://issues.apache.org/jira/browse/SPARK-24596.\r\n\r\nBut if I don&#39;t use persist, this work as I want, my second write operation isn&#39;t affected by my first one. I think this is because the cache isn&#39;t invalidated and metadata stay unchanged. \r\n\r\nIf you take a look at physical plan, I think that `InMemoryFileIndex` isn&#39;t recalculated even if I clean cache manually.  \r\n\r\n```none\r\n== Physical Plan ==\r\n*(1) FileScan csv [COUNTRY#10,CITY#11] Batched: false, Format: CSV, Location: InMemoryFileIndex[file:/D:/dev/Intellij-project/folder1, PartitionFilters: [], PushedFilters: [], ReadSchema: struct&lt;COUNTRY:string,CITY:string&gt;\r\n```\r\n```java\r\nDataset&lt;Row&gt; rootDataframe = sparkSession\r\n        .read()\r\n        .option(&quot;header&quot;, true)\r\n        .csv(&quot;folder1&quot;);\r\n\r\nDataset&lt;Row&gt; cachedDataFrame = rootDataframe\r\ncachedDataFrame.explain(true);\r\n\r\ncachedDataFrame\r\n        .write()\r\n        .option(&quot;header&quot;, true)\r\n        .mode(SaveMode.Append)\r\n        .csv(&quot;folder1&quot;);\r\n\r\nsparkSession.sharedState().cacheManager().clearCache();\r\n\r\ncachedDataFrame\r\n        .write()\r\n        .option(&quot;header&quot;, true)\r\n        .mode(SaveMode.Overwrite)\r\n        .csv(&quot;folder2&quot;);\r\n```\r\n\r\nBut this behaviour is different with other data sources, for example with MongoDB, if I don&#39;t persist the data, the data is, as intended duplicated, because the second write operation will read the data from the first write. \r\n\r\nIs there a way to insert the same data in multiple data sources, potentially including root data source in different target using only Spark? \r\n\r\nThis seems to be impossible using dataframe persisting. Maybe with dataframe checkpointing?  Or should I use external data storage as an intermediate data store? Dirty coding to break the lineage? Of course, I can&#39;t reverse write order, this is a simplified example, I can have multiple source that write to same multiple target. \r\n\r\nSpark: 2.4.4 \\\r\nJava 8 ","title":"How to insert exactly same dataFrame in multiple target including root datasource using Spark function?","body":"<p>I want to read data from a single source, then write it back to same source then write to another source.</p>\n<p>Source can be different: HDFS, Mongo, Kafka ...</p>\n<p>With local testing, I have a weird behaviour.</p>\n<p>This is my first test: I persist the data on disk to not recompute the data from original source:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Dataset&lt;Row&gt; rootDataframe = sparkSession\n        .read()\n        .option(&quot;header&quot;, true)\n        .csv(&quot;folder1&quot;);\n\nDataset&lt;Row&gt; cachedDataFrame = rootDataframe.persist(StorageLevel.DISK_ONLY());\n\ncachedDataFrame\n        .write()\n        .option(&quot;header&quot;, true)\n        .mode(SaveMode.Append)\n        .csv(&quot;folder1&quot;);\n\ncachedDataFrame\n        .write()\n        .option(&quot;header&quot;, true)\n        .mode(SaveMode.Overwrite)\n        .csv(&quot;folder2&quot;);\n\ncachedDataFrame.unpersist();\n</code></pre>\n<p>This doesn't work as I intended, because of persist function. The cached data is invalidated by my first write that writes it back to original source. In my folder2, I get duplicated data (the original one and the one written by my first operation). This JIRA ticket looks like my problem: <a href=\"https://issues.apache.org/jira/browse/SPARK-24596\" rel=\"nofollow noreferrer\">https://issues.apache.org/jira/browse/SPARK-24596</a>.</p>\n<p>But if I don't use persist, this work as I want, my second write operation isn't affected by my first one. I think this is because the cache isn't invalidated and metadata stay unchanged.</p>\n<p>If you take a look at physical plan, I think that <code>InMemoryFileIndex</code> isn't recalculated even if I clean cache manually.</p>\n<pre class=\"lang-none prettyprint-override\"><code>== Physical Plan ==\n*(1) FileScan csv [COUNTRY#10,CITY#11] Batched: false, Format: CSV, Location: InMemoryFileIndex[file:/D:/dev/Intellij-project/folder1, PartitionFilters: [], PushedFilters: [], ReadSchema: struct&lt;COUNTRY:string,CITY:string&gt;\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>Dataset&lt;Row&gt; rootDataframe = sparkSession\n        .read()\n        .option(&quot;header&quot;, true)\n        .csv(&quot;folder1&quot;);\n\nDataset&lt;Row&gt; cachedDataFrame = rootDataframe\ncachedDataFrame.explain(true);\n\ncachedDataFrame\n        .write()\n        .option(&quot;header&quot;, true)\n        .mode(SaveMode.Append)\n        .csv(&quot;folder1&quot;);\n\nsparkSession.sharedState().cacheManager().clearCache();\n\ncachedDataFrame\n        .write()\n        .option(&quot;header&quot;, true)\n        .mode(SaveMode.Overwrite)\n        .csv(&quot;folder2&quot;);\n</code></pre>\n<p>But this behaviour is different with other data sources, for example with MongoDB, if I don't persist the data, the data is, as intended duplicated, because the second write operation will read the data from the first write.</p>\n<p>Is there a way to insert the same data in multiple data sources, potentially including root data source in different target using only Spark?</p>\n<p>This seems to be impossible using dataframe persisting. Maybe with dataframe checkpointing?  Or should I use external data storage as an intermediate data store? Dirty coding to break the lineage? Of course, I can't reverse write order, this is a simplified example, I can have multiple source that write to same multiple target.</p>\n<p>Spark: 2.4.4 <br />\nJava 8</p>\n"},{"tags":["java","hibernate","jpa"],"answers":[{"tags":[],"owner":{"account_id":1779831,"reputation":1317,"user_id":1622858,"accept_rate":57,"display_name":"Michael Platt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1471532812,"creation_date":1471532812,"answer_id":39021667,"question_id":39021411,"body_markdown":"A quick search on Google turned up this in StackOverflow:\r\n\r\nhttps://stackoverflow.com/questions/331744/jpa-multiple-embedded-fields\r\n\r\nIt would seem as though you have to do some explicit annotation overriding over the fields within the embeddable class.  There are some code examples in the linked answer as well that should give you a good idea of where to go.\r\n\r\n\r\nCheers,","title":"jpa - Multiple @ElementCollection in two different @Embeddable classes","body":"<p>A quick search on Google turned up this in StackOverflow:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/331744/jpa-multiple-embedded-fields\">JPA Multiple Embedded fields</a></p>\n\n<p>It would seem as though you have to do some explicit annotation overriding over the fields within the embeddable class.  There are some code examples in the linked answer as well that should give you a good idea of where to go.</p>\n\n<p>Cheers,</p>\n"},{"tags":[],"owner":{"account_id":6291092,"reputation":31,"user_id":4888768,"display_name":"Andrew B."},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1471551865,"creation_date":1471551865,"answer_id":39026892,"question_id":39021411,"body_markdown":"Is there any reason why you have decided to use this structure ? Typically when converting an object to an RDBMS you would need to model the relationships. When you use an embeddable it will add the column (or columns) associated with it to the table. So when you do this normally (not collections) it is fine. \r\n\r\nWhen you do a collection it runs into issues. Mainly there is no way to represent a collection in a single row (since this is an entity you could have many of them so effectively for each object you only have one row) &amp; one column. So when you represent a collection you actually have to have a second table with a column referencing it back to the first. It&#39;s really the opposite thinking of a normal object. The collection entries need to know what collection they were associated with instead of the collection being knowledgeable of its entries.\r\n\r\nSo in some POJO you could have and these....\r\n\r\n     MyListObject {\r\n         //Some implementation of things you want to collect\r\n     }\r\n\r\n\r\n     MyClass {\r\n         List&lt;MyListObject&gt; myListObject;\r\n    }\r\n\r\nBut to model this in JPA you would need to have these represented by two tables.\r\n\r\nYour object that will be in the list. \r\n\r\n    @Entity\r\n    MyListObject {\r\n\r\n        @ManyToOne\r\n        @JoinColumn(name = &quot;MY_CLASS_KEY&quot;)\r\n        private MyClass myClass;\r\n    }\r\n\r\n\r\nYour object/entity that will have the list. \r\n\r\n    @Entity\r\n    MyClass {\r\n\r\n        @Id\r\n        @Column(name = &quot;MY_CLASS_KEY&quot;)\r\n        private Long myClassKey;\r\n  \r\n        @OneToMany(mappedBy = &quot;myClass&quot;)\r\n        private List&lt;MyListObject&gt; myString;\r\n    }\r\n\r\n\r\nI hope this helps. ","title":"jpa - Multiple @ElementCollection in two different @Embeddable classes","body":"<p>Is there any reason why you have decided to use this structure ? Typically when converting an object to an RDBMS you would need to model the relationships. When you use an embeddable it will add the column (or columns) associated with it to the table. So when you do this normally (not collections) it is fine. </p>\n\n<p>When you do a collection it runs into issues. Mainly there is no way to represent a collection in a single row (since this is an entity you could have many of them so effectively for each object you only have one row) &amp; one column. So when you represent a collection you actually have to have a second table with a column referencing it back to the first. It's really the opposite thinking of a normal object. The collection entries need to know what collection they were associated with instead of the collection being knowledgeable of its entries.</p>\n\n<p>So in some POJO you could have and these....</p>\n\n<pre><code> MyListObject {\n     //Some implementation of things you want to collect\n }\n\n\n MyClass {\n     List&lt;MyListObject&gt; myListObject;\n}\n</code></pre>\n\n<p>But to model this in JPA you would need to have these represented by two tables.</p>\n\n<p>Your object that will be in the list. </p>\n\n<pre><code>@Entity\nMyListObject {\n\n    @ManyToOne\n    @JoinColumn(name = \"MY_CLASS_KEY\")\n    private MyClass myClass;\n}\n</code></pre>\n\n<p>Your object/entity that will have the list. </p>\n\n<pre><code>@Entity\nMyClass {\n\n    @Id\n    @Column(name = \"MY_CLASS_KEY\")\n    private Long myClassKey;\n\n    @OneToMany(mappedBy = \"myClass\")\n    private List&lt;MyListObject&gt; myString;\n}\n</code></pre>\n\n<p>I hope this helps. </p>\n"}],"owner":{"account_id":4048322,"reputation":3,"user_id":3415658,"display_name":"higornucci"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1951,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1675181156,"creation_date":1471532106,"question_id":39021411,"body_markdown":"I have an entity with two `Embedded` classes of the same type and which one has an `ElementCollection` of the same type two. The business logic is apparently correct, but I am experiencing some problems with lack of knowledge in JPA, I guess.\r\n\r\nLet&#39;s check my classes:\r\n\r\n    @Entity\r\n    public class Etapa extends EntidadeBase {\r\n    \r\n        @Embedded\r\n        private CronogramaDeDesembolso cronogramaDeReceita;\r\n    \r\n        @Embedded\r\n        private CronogramaDeDesembolso cronogramaDeDespesa;\r\n    }\r\n\r\n    @Embeddable\r\n    public class CronogramaDeDesembolso {\r\n    \r\n    \t@ElementCollection\r\n    \tprivate List&lt;Parcela&gt; parcelas;\r\n    }\r\n\r\nI am receiving the following error log.\r\n\r\n    \r\n\r\n&gt; Caused by: org.hibernate.HibernateException: Found shared references\r\n&gt; to a collection:\r\n&gt; nexxus.convenioestadual.dominio.planodetrabalho.etapa.Etapa.cronogramaDeReceita.parcelas\r\n\r\nDo you guys have any clue of what is wrong and how can I fix it?\r\n\r\n**EDIT:**\r\n\r\nDue comments I did this edit and it do not worked too\r\n\r\n    @Entity\r\n    public class Etapa extends EntidadeBase {\r\n    \r\n        @Embedded\r\n        @AttributeOverride(name = &quot;parcelas&quot;, column = @Column(name = &quot;parcelasReceita&quot;))\r\n        private CronogramaDeDesembolso cronogramaDeReceita;\r\n    \r\n        @Embedded\r\n        @AttributeOverride(name = &quot;parcelas&quot;, column = @Column(name = &quot;parcelasDespesa&quot;))\r\n        private CronogramaDeDesembolso cronogramaDeDespesa;\r\n    }","title":"jpa - Multiple @ElementCollection in two different @Embeddable classes","body":"<p>I have an entity with two <code>Embedded</code> classes of the same type and which one has an <code>ElementCollection</code> of the same type two. The business logic is apparently correct, but I am experiencing some problems with lack of knowledge in JPA, I guess.</p>\n\n<p>Let's check my classes:</p>\n\n<pre><code>@Entity\npublic class Etapa extends EntidadeBase {\n\n    @Embedded\n    private CronogramaDeDesembolso cronogramaDeReceita;\n\n    @Embedded\n    private CronogramaDeDesembolso cronogramaDeDespesa;\n}\n\n@Embeddable\npublic class CronogramaDeDesembolso {\n\n    @ElementCollection\n    private List&lt;Parcela&gt; parcelas;\n}\n</code></pre>\n\n<p>I am receiving the following error log.</p>\n\n<blockquote>\n  <p>Caused by: org.hibernate.HibernateException: Found shared references\n  to a collection:\n  nexxus.convenioestadual.dominio.planodetrabalho.etapa.Etapa.cronogramaDeReceita.parcelas</p>\n</blockquote>\n\n<p>Do you guys have any clue of what is wrong and how can I fix it?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Due comments I did this edit and it do not worked too</p>\n\n<pre><code>@Entity\npublic class Etapa extends EntidadeBase {\n\n    @Embedded\n    @AttributeOverride(name = \"parcelas\", column = @Column(name = \"parcelasReceita\"))\n    private CronogramaDeDesembolso cronogramaDeReceita;\n\n    @Embedded\n    @AttributeOverride(name = \"parcelas\", column = @Column(name = \"parcelasDespesa\"))\n    private CronogramaDeDesembolso cronogramaDeDespesa;\n}\n</code></pre>\n"},{"tags":["java","android","virtual"],"answers":[{"tags":[],"owner":{"account_id":26990477,"reputation":13,"user_id":20553445,"display_name":"ada_underwood"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1668937189,"creation_date":1668937189,"answer_id":74507003,"question_id":74371413,"body_markdown":"I was looking for the same open source project, VirtualAPP has stopped being open source and stopped updating, and the commercial version of it is expensive, up to 300,000 RMB a year license and 200,000 RMB/year technical support fees.","title":"how can i integrate virtual app in android application","body":"<p>I was looking for the same open source project, VirtualAPP has stopped being open source and stopped updating, and the commercial version of it is expensive, up to 300,000 RMB a year license and 200,000 RMB/year technical support fees.</p>\n"},{"tags":[],"owner":{"account_id":1630941,"reputation":814,"user_id":1505492,"display_name":"kat"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675181148,"creation_date":1675181148,"answer_id":75299886,"question_id":74371413,"body_markdown":"Recent open code is available at https://github.com/FBlackBox/BlackBox. VirtulApp authors apparently bullied the project to close. The source code is still accessible on github as of posting of this comment, though.","title":"how can i integrate virtual app in android application","body":"<p>Recent open code is available at <a href=\"https://github.com/FBlackBox/BlackBox\" rel=\"nofollow noreferrer\">https://github.com/FBlackBox/BlackBox</a>. VirtulApp authors apparently bullied the project to close. The source code is still accessible on github as of posting of this comment, though.</p>\n"}],"owner":{"account_id":6597297,"reputation":751,"user_id":5096638,"display_name":"PalFS"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":208,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75299886,"answer_count":2,"score":0,"last_activity_date":1675181148,"creation_date":1667979918,"question_id":74371413,"body_markdown":"I need to integrate [VirtualApp][1] in the android application but the problem is that is has not been updated since 6 yrs except the docs, which are for commercial version. I tried to integrate it in my app following the [guide][2] but it is raising errors. Can anyone help me integrate it or suggest my any alternative solution for this?\r\n\r\nThanks\r\n\r\n\r\n  [1]: https://github.com/asLody/VirtualApp\r\n  [2]: https://github.com/asLody/VirtualApp/blob/master/doc/VADev_eng.md","title":"how can i integrate virtual app in android application","body":"<p>I need to integrate <a href=\"https://github.com/asLody/VirtualApp\" rel=\"nofollow noreferrer\">VirtualApp</a> in the android application but the problem is that is has not been updated since 6 yrs except the docs, which are for commercial version. I tried to integrate it in my app following the <a href=\"https://github.com/asLody/VirtualApp/blob/master/doc/VADev_eng.md\" rel=\"nofollow noreferrer\">guide</a> but it is raising errors. Can anyone help me integrate it or suggest my any alternative solution for this?</p>\n<p>Thanks</p>\n"},{"tags":["java","android","http-headers","android-videoview"],"owner":{"account_id":16009611,"reputation":1,"user_id":11554194,"display_name":"alex05"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675181112,"creation_date":1674825193,"question_id":75258594,"body_markdown":"I am trying to implement a VideoView that receives its content from a server. To get the content from the server, I need to set a custom header.\r\nWhen trying to use the following function, with uri being the url and headers a hashmap containing my header (&quot;testHeader&quot;, &quot;testValue&quot;):\r\n```java\r\nvideoView.setVideoURI(uri, headers);\r\n```\r\n\r\nit is not working as intended.\r\nWhen I check the server, I can see that the headers are not set and I am unsure what the problem is.\r\n\r\nDo the headers have to be in some kind of specific format?\r\nOr any other ideas?\r\n\r\nI already tried various formats for the hashmap values but in no case the header even appeared at the server. \r\n\r\nI also saw [this post](https://stackoverflow.com/questions/7630484/videoview-with-cookies-or-headers/28120347#28120347) but since you now can use \r\n```\r\nvideoView.setVideoURI(Uri uri, Map&lt;String, String&gt; headers)\r\n```\r\nI found that answer to be outdated.\r\n\r\nEdit: While doing further research, I found out that everything works as intended when I use my app on an Emulator running Android 11. \r\nThe issue only occurs when used from one particular device.","title":"Android VideoView add custom header","body":"<p>I am trying to implement a VideoView that receives its content from a server. To get the content from the server, I need to set a custom header.\nWhen trying to use the following function, with uri being the url and headers a hashmap containing my header (&quot;testHeader&quot;, &quot;testValue&quot;):</p>\n<pre class=\"lang-java prettyprint-override\"><code>videoView.setVideoURI(uri, headers);\n</code></pre>\n<p>it is not working as intended.\nWhen I check the server, I can see that the headers are not set and I am unsure what the problem is.</p>\n<p>Do the headers have to be in some kind of specific format?\nOr any other ideas?</p>\n<p>I already tried various formats for the hashmap values but in no case the header even appeared at the server.</p>\n<p>I also saw <a href=\"https://stackoverflow.com/questions/7630484/videoview-with-cookies-or-headers/28120347#28120347\">this post</a> but since you now can use</p>\n<pre><code>videoView.setVideoURI(Uri uri, Map&lt;String, String&gt; headers)\n</code></pre>\n<p>I found that answer to be outdated.</p>\n<p>Edit: While doing further research, I found out that everything works as intended when I use my app on an Emulator running Android 11.\nThe issue only occurs when used from one particular device.</p>\n"},{"tags":["java","arrays","sql-server","jdbc","resultset"],"comments":[{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1675174158,"post_id":75298374,"comment_id":132868530,"body_markdown":"Please fix the formatting of your code block, all those backticks do not belong there.","body":"Please fix the formatting of your code block, all those backticks do not belong there."},{"owner":{"account_id":24663134,"reputation":15,"user_id":18559144,"display_name":"Bob Kraemer"},"score":0,"creation_date":1675180248,"post_id":75298374,"comment_id":132870850,"body_markdown":"I will (and did) try.  First time poster - and the instruction for properly marking code seemed unclear at best.","body":"I will (and did) try.  First time poster - and the instruction for properly marking code seemed unclear at best."}],"answers":[{"tags":[],"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675178062,"creation_date":1675178062,"answer_id":75299216,"question_id":75298374,"body_markdown":"Try the following. You may also have introduced an issue with resultSet.getIndex() indexing from 1 rather that 0.\r\n\r\n\r\n\t\tList&lt;int[]&gt; orderedTruthTableList = new ArrayList&lt;&gt;();\r\n\t\ttry {\r\n\t\t\tConnection conn = DriverManager.getConnection(url, &quot;SANITIZED&quot;, &quot;SANITIZED&quot;); // Establish Connection Object\r\n\t\t\tStatement statement = conn.createStatement();\r\n\t\t\t// Create a SQL statement object to send to the database\r\n\t\t\tResultSet resultSet = statement.executeQuery(&quot;select * from SANITIZED&quot;); // Execute the statement object\r\n\r\n\t\t\t// Process the result\r\n\t\t\twhile (resultSet.next()) {\r\n\r\n\t\t\t\torderedTruthTableList.add(new int[] {resultSet.getInt(1), resultSet.getInt(2), resultSet.getInt(3), resultSet.getInt(4)});\r\n\r\n\t\t\t}\r\n\t\t} finally {\r\n\r\n\t\t}\r\n\r\n\t\tint[][] truthTable = orderedTruthTableList.toArray(new int[0][0]);\r\n","title":"How to use jdbc ResultSet of a SQL &#39;select *&#39; query to create and populate a 2 dimensional array as a truth table","body":"<p>Try the following. You may also have introduced an issue with resultSet.getIndex() indexing from 1 rather that 0.</p>\n<pre><code>    List&lt;int[]&gt; orderedTruthTableList = new ArrayList&lt;&gt;();\n    try {\n        Connection conn = DriverManager.getConnection(url, &quot;SANITIZED&quot;, &quot;SANITIZED&quot;); // Establish Connection Object\n        Statement statement = conn.createStatement();\n        // Create a SQL statement object to send to the database\n        ResultSet resultSet = statement.executeQuery(&quot;select * from SANITIZED&quot;); // Execute the statement object\n\n        // Process the result\n        while (resultSet.next()) {\n\n            orderedTruthTableList.add(new int[] {resultSet.getInt(1), resultSet.getInt(2), resultSet.getInt(3), resultSet.getInt(4)});\n\n        }\n    } finally {\n\n    }\n\n    int[][] truthTable = orderedTruthTableList.toArray(new int[0][0]);\n</code></pre>\n"}],"owner":{"account_id":24663134,"reputation":15,"user_id":18559144,"display_name":"Bob Kraemer"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":146,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75299216,"answer_count":1,"score":0,"last_activity_date":1675180637,"creation_date":1675174036,"question_id":75298374,"body_markdown":"I am trying to select the entire contents of a MSSQL Server table populated with int values to serve as a &#39;truth table&#39;.  The goal is to select the entire SQL table, and populate it in Java as a 2 dimensional array.  Here is a token source table I am working with (with the table name SANITIZED):\r\n[SQLServerTable](https://i.stack.imgur.com/i8ODN.png)\r\nI may have a variable number of rows, but the number of columns will be fixed (so the array will not be a jagged array).  The table is seeded with token values to represent row-then-column for ease of troubleshooting (13 being row 1, column 3, 24 being row 2, column 4...)\r\n\r\nHere is the code I have tried (SANITIZED for anonymity):\r\n\r\n```\r\npublic class SANITIZED {\r\n\r\nprivate static String url = &quot;jdbc:sqlserver://SANITIZED:SANITIZED;DatabaseName=SANITIZED;encrypt=true;trustServerCertificate=true&quot;;\r\n\t\r\npublic static void main(String[] args) {\r\n\r\nint numRows = 0;\r\n\t\t\t\t\r\ntry {\r\nConnection conn = DriverManager.getConnection(url, &quot;SANITIZED&quot;, &quot;SANITIZED&quot;);\r\n//  Establish Connection Object\r\nStatement statement = conn.createStatement();\r\n//  Create a SQL statement object to send to the database\r\nResultSet resultSet = statement.executeQuery(&quot;select count (*) from SANITIZED&quot;);  //  Execute the statement object\r\n//  Process the result\r\nif (resultSet.next()) { // just in case\r\nnumRows = resultSet.getInt(1); // note that indexes are one-based\r\n}\r\n} catch (SQLException e) {\r\ne.printStackTrace();\r\n}\r\n\r\nint[][] truthTable = new int[numRows][27];\r\n\t\t\r\ntry {\r\nConnection conn = DriverManager.getConnection(url, &quot;SANITIZED&quot;, &quot;SANITIZED&quot;);  //  Establish Connection Object\r\nStatement statement = conn.createStatement();\r\n//  Create a SQL statement object to send to the database\r\nResultSet resultSet = statement.executeQuery(&quot;select * from SANITIZED&quot;);  //  Execute the statement object\r\n//  Process the result\r\nwhile(resultSet.next()) {\r\n\r\nSystem.out.println(&quot;resultSet: &quot; + (resultSet.getInt(1)));\r\nSystem.out.println(&quot;resultSet: &quot; + (resultSet.getInt(2)));\r\nSystem.out.println(&quot;resultSet: &quot; + (resultSet.getInt(3)));\r\nSystem.out.println(&quot;resultSet: &quot; + (resultSet.getInt(4)));\r\n\t\t\t\r\ntruthTable[numRows - 2][0] = resultSet.getInt(1);\r\ntruthTable[numRows - 2][1] = resultSet.getInt(2);\r\ntruthTable[numRows - 2][2] = resultSet.getInt(3);\r\ntruthTable[numRows - 2][3] = resultSet.getInt(4);\r\n}\r\n\r\n```\r\n\r\nThe output from the println statements is:\r\nresultSet: 11\r\nresultSet: 12\r\nresultSet: 13\r\nresultSet: 14\r\nresultSet: 21\r\nresultSet: 22\r\nresultSet: 23\r\nresultSet: 24\r\n\r\nBut when I try to populate a 2 dimensional array, the Eclipse debugger is showing the SECOND row of the SQL table populating into the FIRST row of the array despite the columnIndex of the getInt() method being passed as 1.  This is true even if I comment the println statements out.  Here is the debugger output:\r\n`truthTable\t(id=24)`\r\n`[0]\t(id=27)`\r\n`[0]\t21`\r\n`[1]\t22`\r\n`[2]\t23`\r\n`[3]\t24`\r\n`[4]\t0`\r\n\r\nThe code above hard codes the row of the array ([numRows - 2]) for simplicity - but ideally, the goal is to iterate over the ResultSet as necessary in hopes that a single SQL &#39;select *&#39; query that returns only int values from the DB (having a specific number of columns but a variable number of rows) can be used to create and populate an array of a fixed number of columns with a variable number of rows.  My thanks to the community for any assistance in understanding how this may be accomplished.  \r\n\r\nThe println statements for a given index prints values from the first row of the SQL table.  \r\nThe attempt to use the same indexes to populate an array (in the absence of the println statements) populates the values from the second row of the array.  Why would it print the first DB row, but store the second DB row when the same index is being used?  ","title":"How to use jdbc ResultSet of a SQL &#39;select *&#39; query to create and populate a 2 dimensional array as a truth table","body":"<p>I am trying to select the entire contents of a MSSQL Server table populated with int values to serve as a 'truth table'.  The goal is to select the entire SQL table, and populate it in Java as a 2 dimensional array.  Here is a token source table I am working with (with the table name SANITIZED):\n<a href=\"https://i.stack.imgur.com/i8ODN.png\" rel=\"nofollow noreferrer\">SQLServerTable</a>\nI may have a variable number of rows, but the number of columns will be fixed (so the array will not be a jagged array).  The table is seeded with token values to represent row-then-column for ease of troubleshooting (13 being row 1, column 3, 24 being row 2, column 4...)</p>\n<p>Here is the code I have tried (SANITIZED for anonymity):</p>\n<pre><code>public class SANITIZED {\n\nprivate static String url = &quot;jdbc:sqlserver://SANITIZED:SANITIZED;DatabaseName=SANITIZED;encrypt=true;trustServerCertificate=true&quot;;\n    \npublic static void main(String[] args) {\n\nint numRows = 0;\n                \ntry {\nConnection conn = DriverManager.getConnection(url, &quot;SANITIZED&quot;, &quot;SANITIZED&quot;);\n//  Establish Connection Object\nStatement statement = conn.createStatement();\n//  Create a SQL statement object to send to the database\nResultSet resultSet = statement.executeQuery(&quot;select count (*) from SANITIZED&quot;);  //  Execute the statement object\n//  Process the result\nif (resultSet.next()) { // just in case\nnumRows = resultSet.getInt(1); // note that indexes are one-based\n}\n} catch (SQLException e) {\ne.printStackTrace();\n}\n\nint[][] truthTable = new int[numRows][27];\n        \ntry {\nConnection conn = DriverManager.getConnection(url, &quot;SANITIZED&quot;, &quot;SANITIZED&quot;);  //  Establish Connection Object\nStatement statement = conn.createStatement();\n//  Create a SQL statement object to send to the database\nResultSet resultSet = statement.executeQuery(&quot;select * from SANITIZED&quot;);  //  Execute the statement object\n//  Process the result\nwhile(resultSet.next()) {\n\nSystem.out.println(&quot;resultSet: &quot; + (resultSet.getInt(1)));\nSystem.out.println(&quot;resultSet: &quot; + (resultSet.getInt(2)));\nSystem.out.println(&quot;resultSet: &quot; + (resultSet.getInt(3)));\nSystem.out.println(&quot;resultSet: &quot; + (resultSet.getInt(4)));\n            \ntruthTable[numRows - 2][0] = resultSet.getInt(1);\ntruthTable[numRows - 2][1] = resultSet.getInt(2);\ntruthTable[numRows - 2][2] = resultSet.getInt(3);\ntruthTable[numRows - 2][3] = resultSet.getInt(4);\n}\n\n</code></pre>\n<p>The output from the println statements is:\nresultSet: 11\nresultSet: 12\nresultSet: 13\nresultSet: 14\nresultSet: 21\nresultSet: 22\nresultSet: 23\nresultSet: 24</p>\n<p>But when I try to populate a 2 dimensional array, the Eclipse debugger is showing the SECOND row of the SQL table populating into the FIRST row of the array despite the columnIndex of the getInt() method being passed as 1.  This is true even if I comment the println statements out.  Here is the debugger output:\n<code>truthTable (id=24)</code>\n<code>[0]    (id=27)</code>\n<code>[0]    21</code>\n<code>[1]    22</code>\n<code>[2]    23</code>\n<code>[3]    24</code>\n<code>[4]    0</code></p>\n<p>The code above hard codes the row of the array ([numRows - 2]) for simplicity - but ideally, the goal is to iterate over the ResultSet as necessary in hopes that a single SQL 'select *' query that returns only int values from the DB (having a specific number of columns but a variable number of rows) can be used to create and populate an array of a fixed number of columns with a variable number of rows.  My thanks to the community for any assistance in understanding how this may be accomplished.</p>\n<p>The println statements for a given index prints values from the first row of the SQL table.<br />\nThe attempt to use the same indexes to populate an array (in the absence of the println statements) populates the values from the second row of the array.  Why would it print the first DB row, but store the second DB row when the same index is being used?</p>\n"},{"tags":["java","intellij-idea","formatting"],"comments":[{"owner":{"account_id":1951,"reputation":26904,"user_id":2684,"accept_rate":87,"display_name":"Martin Marconcini"},"score":1,"creation_date":1675164547,"post_id":75296142,"comment_id":132865306,"body_markdown":"It would help if you indicate (tags) which language you&#39;re trying to format, as IntelliJ has settings that are specific per language.","body":"It would help if you indicate (tags) which language you&#39;re trying to format, as IntelliJ has settings that are specific per language."},{"owner":{"account_id":3019275,"reputation":4542,"user_id":2560685,"accept_rate":70,"display_name":"sab"},"score":1,"creation_date":1675169724,"post_id":75296142,"comment_id":132866988,"body_markdown":"It&#39;s java code, I need the name of the rules who manage that","body":"It&#39;s java code, I need the name of the rules who manage that"}],"answers":[{"tags":[],"owner":{"account_id":27610436,"reputation":1,"user_id":21073689,"display_name":"Frontier"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675163474,"creation_date":1675163474,"answer_id":75296251,"question_id":75296142,"body_markdown":"This is almost certainly down to the settings in Intellij&#39;s Editor preferences.\r\n\r\nOpen the settings panel and search for code format or open the Editor &gt; Code Style &gt; Java options.\r\n\r\n[Code Formatting page][1]\r\n\r\nIn here you&#39;ll options to change pretty much every part of your code layout.\r\n\r\nYou can also import and export schemes, which can keep things consistent across your company. More information on how to do that can be found on the [jetbrains][2] site.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/v30Ix.png\r\n  [2]: https://www.jetbrains.com/help/idea/configuring-code-style.html#import-export-schemes","title":"intellij formating inconsistant","body":"<p>This is almost certainly down to the settings in Intellij's Editor preferences.</p>\n<p>Open the settings panel and search for code format or open the Editor &gt; Code Style &gt; Java options.</p>\n<p><a href=\"https://i.stack.imgur.com/v30Ix.png\" rel=\"nofollow noreferrer\">Code Formatting page</a></p>\n<p>In here you'll options to change pretty much every part of your code layout.</p>\n<p>You can also import and export schemes, which can keep things consistent across your company. More information on how to do that can be found on the <a href=\"https://www.jetbrains.com/help/idea/configuring-code-style.html#import-export-schemes\" rel=\"nofollow noreferrer\">jetbrains</a> site.</p>\n"},{"tags":[],"owner":{"account_id":1951,"reputation":26904,"user_id":2684,"accept_rate":87,"display_name":"Martin Marconcini"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675164896,"creation_date":1675164896,"answer_id":75296529,"question_id":75296142,"body_markdown":"As already indicated, Intellij-IDEA (and all its variants) have a Code Style per language (and even per-project).\r\n\r\n[![Intellij IDEA settings for Code Style][1]][1]\r\n\r\nThe preview on the right side is live-updated, so if you change settings on the left, they will be reflected on the right. \r\n\r\nPlease note that *not all options are available for all languages* and it&#39;s often a matter of playing a bit with it.\r\n\r\nAn alternative is that your coworkers can EXPORT the settings they are using and you can import them.\r\n\r\nThey would export it by tapping the &quot;gear&quot; (?) next to the Scheme:\r\n\r\n\r\n[![Image of a Menu popup showing export options for the code style settings][2]][2]\r\n\r\nYou can then Import them by using the &quot;import Scheme&quot; option ;)\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/hwbCU.png\r\n  [2]: https://i.stack.imgur.com/d3bge.png","title":"intellij formating inconsistant","body":"<p>As already indicated, Intellij-IDEA (and all its variants) have a Code Style per language (and even per-project).</p>\n<p><a href=\"https://i.stack.imgur.com/hwbCU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hwbCU.png\" alt=\"Intellij IDEA settings for Code Style\" /></a></p>\n<p>The preview on the right side is live-updated, so if you change settings on the left, they will be reflected on the right.</p>\n<p>Please note that <em>not all options are available for all languages</em> and it's often a matter of playing a bit with it.</p>\n<p>An alternative is that your coworkers can EXPORT the settings they are using and you can import them.</p>\n<p>They would export it by tapping the &quot;gear&quot; (?) next to the Scheme:</p>\n<p><a href=\"https://i.stack.imgur.com/d3bge.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/d3bge.png\" alt=\"Image of a Menu popup showing export options for the code style settings\" /></a></p>\n<p>You can then Import them by using the &quot;import Scheme&quot; option ;)</p>\n"}],"owner":{"account_id":3019275,"reputation":4542,"user_id":2560685,"accept_rate":70,"display_name":"sab"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1675180442,"creation_date":1675162831,"question_id":75296142,"body_markdown":"Hy, it&#39;s not a big issue, but anyway :\r\n\r\nAll my other coworker code is auto-formated like that :\r\n\r\n            output = output.update(\r\n                    par1,\r\n                    par2\r\n            );\r\n\r\n\r\nmine is autoformated  like that:\r\n\r\n\r\n           output = output.update(\r\n                par1,\r\n                par2\r\n            );\r\n\r\n\r\nmore specificaly : the tabulation for their parameters method have 2x 4 space, mine have 1x4 spaces\r\n\r\nany idea which how to change this codestyle rules? We use a common formater file, but somehow, I don&#39;t have the same things than everyone else.\r\n\r\nEdit : It&#39;s java code,\r\nI need the name of the rules who manage that","title":"intellij formating inconsistant","body":"<p>Hy, it's not a big issue, but anyway :</p>\n<p>All my other coworker code is auto-formated like that :</p>\n<pre><code>        output = output.update(\n                par1,\n                par2\n        );\n</code></pre>\n<p>mine is autoformated  like that:</p>\n<pre><code>       output = output.update(\n            par1,\n            par2\n        );\n</code></pre>\n<p>more specificaly : the tabulation for their parameters method have 2x 4 space, mine have 1x4 spaces</p>\n<p>any idea which how to change this codestyle rules? We use a common formater file, but somehow, I don't have the same things than everyone else.</p>\n<p>Edit : It's java code,\nI need the name of the rules who manage that</p>\n"},{"tags":["java","android","android-layout","user-input"],"comments":[{"owner":{"account_id":7880454,"reputation":2730,"user_id":5954635,"display_name":"Man"},"score":0,"creation_date":1532199943,"post_id":51459228,"comment_id":89887878,"body_markdown":"In which file are you getting that error??in styles??","body":"In which file are you getting that error??in styles??"},{"owner":{"account_id":8944678,"reputation":2098,"user_id":6672577,"display_name":"Shahzad Afridi"},"score":0,"creation_date":1532200047,"post_id":51459228,"comment_id":89887909,"body_markdown":"where is the error :/","body":"where is the error :/"}],"answers":[{"tags":[],"owner":{"account_id":10502386,"reputation":1112,"user_id":7740742,"display_name":"Anuj Kumar"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1544766375,"creation_date":1532367261,"answer_id":51484376,"question_id":51459228,"body_markdown":"This is an android studio bug with dependencies of support library. I also faced same problem few days ago. &lt;Br&gt;\n\n \n - Go to build.gradle file (inside app folder).\n \n \n - Then change the version of dependencies of support library -- replace `28.0.1-alpha3` to `28.0.1-alpha1`\n \n - Then go to styles.xml file (at app/res/values folder) and add this item in your style named AppTheme.&lt;br&gt;\r\n`&lt;item name=&quot;textInputStyle&quot;&gt;@style/Widget.Design.TextInputLayout&lt;/item&gt;`","title":"Failed to find style &#39;textInputStyle&#39; in current theme","body":"<p>This is an android studio bug with dependencies of support library. I also faced same problem few days ago. <Br></p>\n\n<ul>\n<li><p>Go to build.gradle file (inside app folder).</p></li>\n<li><p>Then change the version of dependencies of support library -- replace <code>28.0.1-alpha3</code> to <code>28.0.1-alpha1</code></p></li>\n<li><p>Then go to styles.xml file (at app/res/values folder) and add this item in your style named AppTheme.<br>\n<code>&lt;item name=\"textInputStyle\"&gt;@style/Widget.Design.TextInputLayout&lt;/item&gt;</code></p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":6283998,"reputation":198,"user_id":4883950,"display_name":"Gulbala Salamov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675180350,"creation_date":1537518660,"answer_id":52439687,"question_id":51459228,"body_markdown":"In addition to above users answer, if you are unsure about how to determine which certain version of the support library you should upgrade or downgrade, let Android Studio choose that best applies to you. Simply target it by putting **.+** symbol right after the main version of the library, which works pretty well for me. \r\n\r\nGo to **Gradle Scripts**, open **build.gradle(Module:app)**, replace the version of **support library** **dependencies** as following:\r\n\r\n    dependencies {\r\n        implementation &#39;com.android.support:appcompat-v7:28.+&#39;\r\n    }\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nand then go to **styles.xml** file located at **app/res/values folder** and add this item     \r\n`&lt;item name=&quot;textInputStyle&quot;&gt;@style/Widget.Design.TextInputLayout&lt;/item&gt;`in your style named AppTheme. . \r\n\r\n    &lt;resources&gt;\r\n    &lt;!-- Base application theme. --&gt;\r\n    &lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.AppCompat.Light.NoActionBar&quot;&gt;\r\n\r\n        &lt;item name=&quot;textInputStyle&quot;&gt;@style/Widget.Design.TextInputLayout&lt;/item&gt;\r\n        &lt;!-- Customize your theme here. --&gt;\r\n        &lt;item name=&quot;colorPrimary&quot;&gt;@color/colorPrimary&lt;/item&gt;\r\n        &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/colorPrimaryDark&lt;/item&gt;\r\n        &lt;item name=&quot;colorAccent&quot;&gt;@color/colorAccent&lt;/item&gt;\r\n    &lt;/style&gt;\r\n&lt;/resources&gt;\r\n\r\n[![enter image description here][2]][2]\r\n\r\nHope it helps to others, too. Let me know\r\n\r\n  [1]: https://i.stack.imgur.com/n3eij.png\r\n  [2]: https://i.stack.imgur.com/pnbmQ.png","title":"Failed to find style &#39;textInputStyle&#39; in current theme","body":"<p>In addition to above users answer, if you are unsure about how to determine which certain version of the support library you should upgrade or downgrade, let Android Studio choose that best applies to you. Simply target it by putting <strong>.+</strong> symbol right after the main version of the library, which works pretty well for me.</p>\n<p>Go to <strong>Gradle Scripts</strong>, open <strong>build.gradle(Module:app)</strong>, replace the version of <strong>support library</strong> <strong>dependencies</strong> as following:</p>\n<pre><code>dependencies {\n    implementation 'com.android.support:appcompat-v7:28.+'\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/n3eij.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/n3eij.png\" alt=\"enter image description here\" /></a></p>\n<p>and then go to <strong>styles.xml</strong> file located at <strong>app/res/values folder</strong> and add this item<br />\n<code>&lt;item name=&quot;textInputStyle&quot;&gt;@style/Widget.Design.TextInputLayout&lt;/item&gt;</code>in your style named AppTheme. .</p>\n<pre><code>&lt;resources&gt;\n&lt;!-- Base application theme. --&gt;\n&lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.AppCompat.Light.NoActionBar&quot;&gt;\n\n    &lt;item name=&quot;textInputStyle&quot;&gt;@style/Widget.Design.TextInputLayout&lt;/item&gt;\n    &lt;!-- Customize your theme here. --&gt;\n    &lt;item name=&quot;colorPrimary&quot;&gt;@color/colorPrimary&lt;/item&gt;\n    &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/colorPrimaryDark&lt;/item&gt;\n    &lt;item name=&quot;colorAccent&quot;&gt;@color/colorAccent&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/pnbmQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pnbmQ.png\" alt=\"enter image description here\" /></a></p>\n<p>Hope it helps to others, too. Let me know</p>\n"},{"tags":[],"owner":{"account_id":14943891,"reputation":1727,"user_id":10789722,"display_name":"MEGHA RAMOLIYA"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1615579593,"creation_date":1615567397,"answer_id":66603857,"question_id":51459228,"body_markdown":"First if you create themes in res file so, locate it in manifest file with  `android:theme=&quot;@style/Theme.xyz&quot;` and in the layout design you have to check the same theme is applied there or not. ","title":"Failed to find style &#39;textInputStyle&#39; in current theme","body":"<p>First if you create themes in res file so, locate it in manifest file with  <code>android:theme=&quot;@style/Theme.xyz&quot;</code> and in the layout design you have to check the same theme is applied there or not.</p>\n"}],"owner":{"account_id":10369341,"reputation":13,"user_id":7647477,"display_name":"Myles Jeremiah"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5788,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":51484376,"answer_count":3,"score":1,"last_activity_date":1675180350,"creation_date":1532199742,"question_id":51459228,"body_markdown":"I am very new to android develop &amp; Android Studio. I was trying to create a simple app with a text input field so that that user can input text. (Again very new to this and just messing around with android development/studio).\r\n\r\nAnyway, when I&#39;ve added the &#39;TextInputLayout&#39; and then a input text field from the palette, I get the above error.\r\n\r\nI have tried to refresh as hinted to me. Also tried uninstalling Android Studio, different APKs. I have tried some solutions from another post on stack-overflow by looking through the manifest file and the style.xml files and haven&#39;t had any luck.\r\n\r\nWas wondering if anyone could help me resolve this issue again I am extremely new to android development and Programming in general, so it may be an easy fix but I&#39;ve ran out of ideas LOL.\r\n\r\nBelow is the code I currently have my &#39;activity_main.xml&#39; file.\r\n\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;android.support.constraint.ConstraintLayout \r\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.MainActivity&quot;&gt;\r\n\r\n    &lt;android.support.design.widget.TextInputLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;&gt;\r\n\r\n        &lt;EditText\r\n            android:id=&quot;@+id/editText&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_weight=&quot;1&quot;\r\n            android:ems=&quot;10&quot;\r\n            android:hint=&quot;@string/input_text&quot;\r\n            android:inputType=&quot;text&quot; /&gt;\r\n     \r\n    &lt;/android.support.design.widget.TextInputLayout&gt;\r\n\r\n&lt;/android.support.constraint.ConstraintLayout&gt;\r\n\r\n\r\n","title":"Failed to find style &#39;textInputStyle&#39; in current theme","body":"<p>I am very new to android develop &amp; Android Studio. I was trying to create a simple app with a text input field so that that user can input text. (Again very new to this and just messing around with android development/studio).</p>\n\n<p>Anyway, when I've added the 'TextInputLayout' and then a input text field from the palette, I get the above error.</p>\n\n<p>I have tried to refresh as hinted to me. Also tried uninstalling Android Studio, different APKs. I have tried some solutions from another post on stack-overflow by looking through the manifest file and the style.xml files and haven't had any luck.</p>\n\n<p>Was wondering if anyone could help me resolve this issue again I am extremely new to android development and Programming in general, so it may be an easy fix but I've ran out of ideas LOL.</p>\n\n<p>Below is the code I currently have my 'activity_main.xml' file.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.constraint.ConstraintLayout \nxmlns:android=\"http://schemas.android.com/apk/res/android\"\nxmlns:app=\"http://schemas.android.com/apk/res-auto\"\nxmlns:tools=\"http://schemas.android.com/tools\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"match_parent\"\ntools:context=\".MainActivity\"&gt;\n\n&lt;android.support.design.widget.TextInputLayout\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"&gt;\n\n    &lt;EditText\n        android:id=\"@+id/editText\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_weight=\"1\"\n        android:ems=\"10\"\n        android:hint=\"@string/input_text\"\n        android:inputType=\"text\" /&gt;\n\n&lt;/android.support.design.widget.TextInputLayout&gt;\n</code></pre>\n\n<p></p>\n"},{"tags":["java","http","amazon-s3","io"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1675178394,"post_id":75298635,"comment_id":132870123,"body_markdown":"What do you mean by &quot;ready to use&quot;? Is there some external factor that makes it ready?","body":"What do you mean by &quot;ready to use&quot;? Is there some external factor that makes it ready?"},{"owner":{"account_id":25902085,"reputation":35,"user_id":19627792,"display_name":"VegetaSan"},"score":0,"creation_date":1675236697,"post_id":75298635,"comment_id":132882628,"body_markdown":"@Jorn , Yes, the URL contains image from Wi-Fi camera, my program calls camera API to take snap and return URL with it, but response time of the URL from that API is like 1500ms, so if I try download image faster than that - it will threw the mentioned error","body":"@Jorn , Yes, the URL contains image from Wi-Fi camera, my program calls camera API to take snap and return URL with it, but response time of the URL from that API is like 1500ms, so if I try download image faster than that - it will threw the mentioned error"}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675179985,"creation_date":1675179985,"answer_id":75299610,"question_id":75298635,"body_markdown":"I would write the method something like this:\r\n\r\n    create and configure HttpURLConnection for GET requests\r\n    for retries in 0 ... N:\r\n        try:\r\n            connect\r\n            if status code == 200:\r\n                open and read connection input stream\r\n                return\r\n            else:\r\n                if status code not retriable:\r\n                    fail\r\n        catch FileNotFound:\r\n            // noop\r\n        catch IOException:\r\n            fail\r\n        sleep S seconds\r\n    fail\r\n         \r\nThere some key differences between this and your approach.\r\n\r\n  - This doesn&#39;t do a HEAD.  That requires an extra round trip to the server.  Just do a GET each time.\r\n  - This doesn&#39;t retry for all status codes.  For example, if you got a 403 you shouldn&#39;t retry.  \r\n  - This retries for a FileNotFound exception which you will get for a 404 response; see the javadoc.  It shoulkdn&#39;t retry for other IO exceptions ... unless they are likely to succeed on retry.\r\n  - The max number of retries and delay between retries should be tuned.\r\n        ","title":"How to wait until URL is ready in Java?","body":"<p>I would write the method something like this:</p>\n<pre><code>create and configure HttpURLConnection for GET requests\nfor retries in 0 ... N:\n    try:\n        connect\n        if status code == 200:\n            open and read connection input stream\n            return\n        else:\n            if status code not retriable:\n                fail\n    catch FileNotFound:\n        // noop\n    catch IOException:\n        fail\n    sleep S seconds\nfail\n     \n</code></pre>\n<p>There some key differences between this and your approach.</p>\n<ul>\n<li>This doesn't do a HEAD.  That requires an extra round trip to the server.  Just do a GET each time.</li>\n<li>This doesn't retry for all status codes.  For example, if you got a 403 you shouldn't retry.</li>\n<li>This retries for a FileNotFound exception which you will get for a 404 response; see the javadoc.  It shoulkdn't retry for other IO exceptions ... unless they are likely to succeed on retry.</li>\n<li>The max number of retries and delay between retries should be tuned.</li>\n</ul>\n"}],"owner":{"account_id":25902085,"reputation":35,"user_id":19627792,"display_name":"VegetaSan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":118,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675179985,"creation_date":1675175215,"question_id":75298635,"body_markdown":"I created method that reads bytes from an URL with image and writes it to the S3 bukcet.\r\n\r\n    public void saveFileToStorage(String url, Long timestamp, Integer vehicleId) {\r\n        try {\r\n            URL link = new URL(url);\r\n            Thread.sleep(1500);//wait until URL is ready for download\r\n            byte[] contentBytes = IOUtils.toByteArray(link);\r\n            Long contentLength = (long) contentBytes.length;\r\n            repository.uploadFile(timestamp + &quot;.jpg&quot;, link.openStream(), vehicleId.toString() + &quot;/&quot;, contentLength);\r\n        } catch (IOException | InterruptedException e) {\r\n            log.error(e.getMessage() + &quot; - check thread sleep time!&quot;);\r\n            throw new RuntimeException(e);\r\n        }\r\n\r\n    }\r\n\r\nRepository:\r\n\r\n    public void uploadFile(String keyName, InputStream file, String folder, Long contentLength) {\r\n        ObjectMetadata folderMetadata = new ObjectMetadata();\r\n        folderMetadata.setContentLength(0);\r\n        ObjectMetadata fileMetadata = new ObjectMetadata();\r\n        fileMetadata.setContentLength(contentLength);\r\n        s3client.putObject(bucketName, folder, new ByteArrayInputStream(new byte[0]), folderMetadata);\r\n        s3client.putObject(new PutObjectRequest(bucketName, folder + keyName, file, fileMetadata));\r\n    }\r\n\r\n\r\nMy main problem with this method was the time of URL readiness, when I run the app it always threw a RuntimeException because the URL wasn&#39;t ready to read. After some tests where I was looking at the URL response time, I added Thread.sleep and after that the apps work fine, but the response time can vary and I still get these errors from time to time. What is the best way to check if a URL is ready? I&#39;m trying to use the code below to check for readiness, but I can&#39;t figure out how to &quot;wait&quot; until the URL is ready to use\r\n\r\n     public static boolean check(String URLName){\r\n        try {\r\n            HttpURLConnection.setFollowRedirects(false);\r\n            HttpURLConnection con = (HttpURLConnection) new URL(URLName).openConnection();\r\n            con.setRequestMethod(&quot;HEAD&quot;);\r\n            return (con.getResponseCode() == HttpURLConnection.HTTP_OK);\r\n        }\r\n        catch (Exception e) {\r\n           return false;\r\n        }","title":"How to wait until URL is ready in Java?","body":"<p>I created method that reads bytes from an URL with image and writes it to the S3 bukcet.</p>\n<pre><code>public void saveFileToStorage(String url, Long timestamp, Integer vehicleId) {\n    try {\n        URL link = new URL(url);\n        Thread.sleep(1500);//wait until URL is ready for download\n        byte[] contentBytes = IOUtils.toByteArray(link);\n        Long contentLength = (long) contentBytes.length;\n        repository.uploadFile(timestamp + &quot;.jpg&quot;, link.openStream(), vehicleId.toString() + &quot;/&quot;, contentLength);\n    } catch (IOException | InterruptedException e) {\n        log.error(e.getMessage() + &quot; - check thread sleep time!&quot;);\n        throw new RuntimeException(e);\n    }\n\n}\n</code></pre>\n<p>Repository:</p>\n<pre><code>public void uploadFile(String keyName, InputStream file, String folder, Long contentLength) {\n    ObjectMetadata folderMetadata = new ObjectMetadata();\n    folderMetadata.setContentLength(0);\n    ObjectMetadata fileMetadata = new ObjectMetadata();\n    fileMetadata.setContentLength(contentLength);\n    s3client.putObject(bucketName, folder, new ByteArrayInputStream(new byte[0]), folderMetadata);\n    s3client.putObject(new PutObjectRequest(bucketName, folder + keyName, file, fileMetadata));\n}\n</code></pre>\n<p>My main problem with this method was the time of URL readiness, when I run the app it always threw a RuntimeException because the URL wasn't ready to read. After some tests where I was looking at the URL response time, I added Thread.sleep and after that the apps work fine, but the response time can vary and I still get these errors from time to time. What is the best way to check if a URL is ready? I'm trying to use the code below to check for readiness, but I can't figure out how to &quot;wait&quot; until the URL is ready to use</p>\n<pre><code> public static boolean check(String URLName){\n    try {\n        HttpURLConnection.setFollowRedirects(false);\n        HttpURLConnection con = (HttpURLConnection) new URL(URLName).openConnection();\n        con.setRequestMethod(&quot;HEAD&quot;);\n        return (con.getResponseCode() == HttpURLConnection.HTTP_OK);\n    }\n    catch (Exception e) {\n       return false;\n    }\n</code></pre>\n"},{"tags":["java","spring","spring-boot","kotlin","integration-testing"],"owner":{"account_id":2211298,"reputation":174,"user_id":1953066,"display_name":"Omar Abo Elsoud"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":137,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675179936,"creation_date":1675179936,"question_id":75299599,"body_markdown":"I initiate an api call to an extenral service in a class constractor annoated with ```@Component```\r\n```@Primary``` . \r\n\r\n```\r\npackage com.omar.pay.bill\r\n\r\nimport com.fasterxml.jackson.module.kotlin.jacksonObjectMapper\r\nimport com.fasterxml.jackson.module.kotlin.readValue\r\nimport okhttp3.FormBody\r\nimport okhttp3.OkHttpClient\r\nimport okhttp3.Request\r\nimport okhttp3.Response\r\nimport org.slf4j.LoggerFactory\r\nimport org.springframework.beans.factory.annotation.Value\r\nimport org.springframework.context.annotation.Primary\r\nimport org.springframework.stereotype.Component\r\n\r\n@Component\r\n@Primary\r\nclass x(\r\n  @Value(&quot;\\${client-id}&quot;) val clientId: String,\r\n  @Value(&quot;\\${client-secret}&quot;) val clientSecret: String,\r\n  @Value(&quot;\\${token-uri}&quot;) val tokenUrl: String\r\n) : x {\r\n  private val grantType = &quot;dude&quot;\r\n  private val client: OkHttpClient = OkHttpClient()\r\n    .newBuilder()\r\n    .build()\r\n\r\n  private val log =\r\n    LoggerFactory.getLogger(x::class.java)\r\n\r\n  private var currentAccessToken: OResponse = fetchApiResponse()\r\n\r\n \r\n  }\r\n\r\n  private fun fetchApiResponse(): OResponse {\r\n\r\n    val request: Request = Request.Builder()\r\n      .url(tokenUrl)\r\n      .post(\r\n        FormBody.Builder()\r\n          .add(&quot;grant_type&quot;, grantType)\r\n          .add(&quot;client_id&quot;, clientId)\r\n          .add(&quot;client_secret&quot;, clientSecret)\r\n          .build()\r\n      )\r\n      .build()\r\n\r\n    val response: Response = client.newCall(request).execute()\r\n    val token: OResponse =\r\n      jacksonObjectMapper().readValue(response.body()!!.byteStream())\r\n    log.info(&quot;Fetched token: $response&quot;)\r\n\r\n    return response\r\n  }\r\n}\r\n```\r\n\r\n\r\nThe integration test fails to start with error as the spring boot context intiate the bean before the wiremock start and stub the calls . It throws the error below \r\n\r\n&gt; Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.omar.pay.bill.x]: Constructor threw exception; nested exception is java.net.ConnectException: Failed to connect to /127.0.0.1:9999.\r\n\r\n\r\nI have went throught some [reference][1] tells how to mock the beans are annoated as ```Primary``` and sounds the issue has been solved for the unit test part , but I couldn&#39;t find solid solution for the integration test . \r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/68808026/how-to-override-primary-bean-in-spring-boot-junit-test-cases","title":"Spring boot : Unable to stub api call called from bean marked as @Primary","body":"<p>I initiate an api call to an extenral service in a class constractor annoated with <code>@Component</code>\n<code>@Primary</code> .</p>\n<pre><code>package com.omar.pay.bill\n\nimport com.fasterxml.jackson.module.kotlin.jacksonObjectMapper\nimport com.fasterxml.jackson.module.kotlin.readValue\nimport okhttp3.FormBody\nimport okhttp3.OkHttpClient\nimport okhttp3.Request\nimport okhttp3.Response\nimport org.slf4j.LoggerFactory\nimport org.springframework.beans.factory.annotation.Value\nimport org.springframework.context.annotation.Primary\nimport org.springframework.stereotype.Component\n\n@Component\n@Primary\nclass x(\n  @Value(&quot;\\${client-id}&quot;) val clientId: String,\n  @Value(&quot;\\${client-secret}&quot;) val clientSecret: String,\n  @Value(&quot;\\${token-uri}&quot;) val tokenUrl: String\n) : x {\n  private val grantType = &quot;dude&quot;\n  private val client: OkHttpClient = OkHttpClient()\n    .newBuilder()\n    .build()\n\n  private val log =\n    LoggerFactory.getLogger(x::class.java)\n\n  private var currentAccessToken: OResponse = fetchApiResponse()\n\n \n  }\n\n  private fun fetchApiResponse(): OResponse {\n\n    val request: Request = Request.Builder()\n      .url(tokenUrl)\n      .post(\n        FormBody.Builder()\n          .add(&quot;grant_type&quot;, grantType)\n          .add(&quot;client_id&quot;, clientId)\n          .add(&quot;client_secret&quot;, clientSecret)\n          .build()\n      )\n      .build()\n\n    val response: Response = client.newCall(request).execute()\n    val token: OResponse =\n      jacksonObjectMapper().readValue(response.body()!!.byteStream())\n    log.info(&quot;Fetched token: $response&quot;)\n\n    return response\n  }\n}\n</code></pre>\n<p>The integration test fails to start with error as the spring boot context intiate the bean before the wiremock start and stub the calls . It throws the error below</p>\n<blockquote>\n<p>Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.omar.pay.bill.x]: Constructor threw exception; nested exception is java.net.ConnectException: Failed to connect to /127.0.0.1:9999.</p>\n</blockquote>\n<p>I have went throught some <a href=\"https://stackoverflow.com/questions/68808026/how-to-override-primary-bean-in-spring-boot-junit-test-cases\">reference</a> tells how to mock the beans are annoated as <code>Primary</code> and sounds the issue has been solved for the unit test part , but I couldn't find solid solution for the integration test .</p>\n"},{"tags":["java","exception","throws"],"answers":[{"tags":[],"owner":{"account_id":116580,"reputation":118703,"user_id":305644,"accept_rate":75,"display_name":"hvgotcodes"},"down_vote_count":1,"up_vote_count":88,"is_accepted":true,"score":87,"last_activity_date":1394384212,"creation_date":1291843618,"answer_id":4392526,"question_id":4392446,"body_markdown":"If you are catching an exception type, you do not need to throw it, unless you are going to rethrow it.  In the example you post, the developer should have done one or another, not both.\r\n\r\nTypically, if you are not going to do anything with the exception, you should not catch it.  \r\n\r\nThe most dangerous thing you can do is catch an exception and not do anything with it.\r\n\r\nA good discussion of when it is appropriate to throw exceptions is here\r\n\r\nhttps://stackoverflow.com/questions/77127/when-to-throw-an-exception","title":"When to use throws in a Java method declaration?","body":"<p>If you are catching an exception type, you do not need to throw it, unless you are going to rethrow it.  In the example you post, the developer should have done one or another, not both.</p>\n\n<p>Typically, if you are not going to do anything with the exception, you should not catch it.  </p>\n\n<p>The most dangerous thing you can do is catch an exception and not do anything with it.</p>\n\n<p>A good discussion of when it is appropriate to throw exceptions is here</p>\n\n<p><a href=\"https://stackoverflow.com/questions/77127/when-to-throw-an-exception\">When to throw an exception?</a></p>\n"},{"tags":[],"owner":{"account_id":159625,"reputation":307,"user_id":379156,"display_name":"RevBingo"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1291843767,"creation_date":1291843767,"answer_id":4392560,"question_id":4392446,"body_markdown":"You&#39;re correct, in that example the `throws` is superfluous.  It&#39;s possible that it was left there from some previous implementation - perhaps the exception was originally thrown instead of caught in the catch block.","title":"When to use throws in a Java method declaration?","body":"<p>You're correct, in that example the <code>throws</code> is superfluous.  It's possible that it was left there from some previous implementation - perhaps the exception was originally thrown instead of caught in the catch block.</p>\n"},{"tags":[],"owner":{"account_id":49781,"reputation":10062,"user_id":148381,"accept_rate":89,"display_name":"DaveJohnston"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1291843888,"creation_date":1291843888,"answer_id":4392583,"question_id":4392446,"body_markdown":"In the example you gave, the method will never throw an IOException, therefore the declaration is wrong (but valid).  My guess is that the original method threw the IOException, but it was then updated to handle the exception within but the declaration was not changed.","title":"When to use throws in a Java method declaration?","body":"<p>In the example you gave, the method will never throw an IOException, therefore the declaration is wrong (but valid).  My guess is that the original method threw the IOException, but it was then updated to handle the exception within but the declaration was not changed.</p>\n"},{"tags":[],"owner":{"account_id":94709,"reputation":1048,"user_id":258424,"display_name":"Shane Bell"},"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1291843928,"creation_date":1291843928,"answer_id":4392588,"question_id":4392446,"body_markdown":"You only need to include a throws clause on a method if the method throws a checked exception. If the method throws a runtime exception then there is no need to do so.\r\n\r\nSee here for some background on checked vs unchecked exceptions: http://download.oracle.com/javase/tutorial/essential/exceptions/runtime.html\r\n\r\nIf the method catches the exception and deals with it internally (as in your second example) then there is no need to include a throws clause.","title":"When to use throws in a Java method declaration?","body":"<p>You only need to include a throws clause on a method if the method throws a checked exception. If the method throws a runtime exception then there is no need to do so.</p>\n\n<p>See here for some background on checked vs unchecked exceptions: <a href=\"http://download.oracle.com/javase/tutorial/essential/exceptions/runtime.html\" rel=\"noreferrer\">http://download.oracle.com/javase/tutorial/essential/exceptions/runtime.html</a></p>\n\n<p>If the method catches the exception and deals with it internally (as in your second example) then there is no need to include a throws clause.</p>\n"},{"tags":[],"owner":{"account_id":2143,"reputation":11430,"user_id":2955,"accept_rate":66,"display_name":"Damo"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1291843941,"creation_date":1291843941,"answer_id":4392591,"question_id":4392446,"body_markdown":"The code that you looked at is not ideal. You should either:\r\n\r\n 1. Catch the exception and handle it;\r\n    in which case the `throws` is\r\n    unnecesary.\r\n    \r\n 1. Remove the `try/catch`; in which case\r\n    the Exception will be handled by a\r\n    calling method.\r\n    \r\n 1. Catch the exception, possibly\r\n    perform some action and then rethrow\r\n    the exception (not just the message)\r\n\r\n","title":"When to use throws in a Java method declaration?","body":"<p>The code that you looked at is not ideal. You should either:</p>\n\n<ol>\n<li><p>Catch the exception and handle it;\nin which case the <code>throws</code> is\nunnecesary.</p></li>\n<li><p>Remove the <code>try/catch</code>; in which case\nthe Exception will be handled by a\ncalling method.</p></li>\n<li><p>Catch the exception, possibly\nperform some action and then rethrow\nthe exception (not just the message)</p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1818501,"reputation":159,"user_id":1653102,"display_name":"wizardInCloud"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1675179935,"creation_date":1350602348,"answer_id":12965192,"question_id":4392446,"body_markdown":"The code you posted is wrong, it should throw an Exception if is catching a specific exception in order to handler IOException but throwing not catched exceptions.\r\n\r\nSomething like:\r\n\r\n    public void method() throws Exception {\r\n       try {\r\n               BufferedReader br = new BufferedReader(new FileReader(&quot;file.txt&quot;));\r\n       } catch(IOException e) {\r\n               System.out.println(e.getMessage());\r\n       }\r\n    }\r\n\r\nor\r\n\r\n    public void method() {\r\n       try {\r\n               BufferedReader br = new BufferedReader(new FileReader(&quot;file.txt&quot;));\r\n       } catch(IOException e) {\r\n               System.out.println(&quot;Catching IOException&quot;);\r\n               System.out.println(e.getMessage());\r\n       } catch(Exception e) {\r\n               System.out.println(&quot;Catching any other Exceptions like NullPontException, FileNotFoundExceptioon, etc.&quot;);\r\n               System.out.println(e.getMessage());\r\n       }\r\n    }","title":"When to use throws in a Java method declaration?","body":"<p>The code you posted is wrong, it should throw an Exception if is catching a specific exception in order to handler IOException but throwing not catched exceptions.</p>\n<p>Something like:</p>\n<pre><code>public void method() throws Exception {\n   try {\n           BufferedReader br = new BufferedReader(new FileReader(&quot;file.txt&quot;));\n   } catch(IOException e) {\n           System.out.println(e.getMessage());\n   }\n}\n</code></pre>\n<p>or</p>\n<pre><code>public void method() {\n   try {\n           BufferedReader br = new BufferedReader(new FileReader(&quot;file.txt&quot;));\n   } catch(IOException e) {\n           System.out.println(&quot;Catching IOException&quot;);\n           System.out.println(e.getMessage());\n   } catch(Exception e) {\n           System.out.println(&quot;Catching any other Exceptions like NullPontException, FileNotFoundExceptioon, etc.&quot;);\n           System.out.println(e.getMessage());\n   }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1904786,"reputation":4277,"user_id":1719877,"display_name":"agelbess"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1512057098,"creation_date":1512057098,"answer_id":47577401,"question_id":4392446,"body_markdown":"This is not an answer, but a comment, but I could not write a comment with a formatted code, so here is the comment.\r\n\r\nLets say there is\r\n\r\n    public static void main(String[] args) {\r\n      try {\r\n        // do nothing or throw a RuntimeException\r\n        throw new RuntimeException(&quot;test&quot;);\r\n      } catch (Exception e) {\r\n        System.out.println(e.getMessage());\r\n        throw e;\r\n      }\r\n    }\r\n\r\nThe output is \r\n\r\n    test\r\n    Exception in thread &quot;main&quot; java.lang.RuntimeException: test\r\n    \tat MyClass.main(MyClass.java:10)\r\n\r\nThat method does not declare any &quot;throws&quot; Exceptions, but throws them!\r\nThe trick is that the thrown exceptions are RuntimeExceptions (unchecked) that are not needed to be declared on the method.\r\nIt is a bit misleading for the reader of the method, since all she sees is a &quot;throw e;&quot; statement but no declaration of the throws exception\r\n\r\nNow, if we have\r\n\r\n    public static void main(String[] args) throws Exception {\r\n      try {\r\n        throw new Exception(&quot;test&quot;);\r\n      } catch (Exception e) {\r\n        System.out.println(e.getMessage());\r\n        throw e;\r\n      }\r\n    }\r\n\r\nWe MUST declare the &quot;throws&quot; exceptions in the method otherwise we get a compiler error.\r\n\r\n","title":"When to use throws in a Java method declaration?","body":"<p>This is not an answer, but a comment, but I could not write a comment with a formatted code, so here is the comment.</p>\n\n<p>Lets say there is</p>\n\n<pre><code>public static void main(String[] args) {\n  try {\n    // do nothing or throw a RuntimeException\n    throw new RuntimeException(\"test\");\n  } catch (Exception e) {\n    System.out.println(e.getMessage());\n    throw e;\n  }\n}\n</code></pre>\n\n<p>The output is </p>\n\n<pre><code>test\nException in thread \"main\" java.lang.RuntimeException: test\n    at MyClass.main(MyClass.java:10)\n</code></pre>\n\n<p>That method does not declare any \"throws\" Exceptions, but throws them!\nThe trick is that the thrown exceptions are RuntimeExceptions (unchecked) that are not needed to be declared on the method.\nIt is a bit misleading for the reader of the method, since all she sees is a \"throw e;\" statement but no declaration of the throws exception</p>\n\n<p>Now, if we have</p>\n\n<pre><code>public static void main(String[] args) throws Exception {\n  try {\n    throw new Exception(\"test\");\n  } catch (Exception e) {\n    System.out.println(e.getMessage());\n    throw e;\n  }\n}\n</code></pre>\n\n<p>We MUST declare the \"throws\" exceptions in the method otherwise we get a compiler error.</p>\n"}],"owner":{"account_id":255495,"reputation":5919,"user_id":535590,"accept_rate":80,"display_name":"jbranchaud"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":132725,"favorite_count":0,"down_vote_count":0,"up_vote_count":90,"accepted_answer_id":4392526,"answer_count":7,"score":90,"last_activity_date":1675179935,"creation_date":1291843118,"question_id":4392446,"body_markdown":"So I thought I had a good basic understanding of exception-handling in Java, but I was recently reading some code that gave me some confusion and doubts. My main doubt that I want to address here is when should a person use throws in a Java method declaration like the following:\r\n&lt;pre&gt;&lt;code&gt;    public void method() throws SomeException\r\n    {\r\n         // method body here\r\n    }\r\n&lt;/code&gt;&lt;/pre&gt;\r\n\r\nFrom reading some similar posts I gather that &lt;b&gt;throws&lt;/b&gt; is used as a sort of declaration that &lt;em&gt;SomeException&lt;/em&gt; could be thrown during the execution of the method.\r\n\r\nMy confusion comes from some code that looked like this:\r\n&lt;pre&gt;&lt;code&gt;     public void method() throws IOException\r\n     {\r\n          try\r\n          {\r\n               BufferedReader br = new BufferedReader(new FileReader(&quot;file.txt&quot;));\r\n          }\r\n          catch(IOException e)\r\n          {\r\n               System.out.println(e.getMessage());\r\n          }\r\n     }&lt;/code&gt;&lt;/pre&gt;\r\n\r\nIs there any reason that you would want to use a &lt;b&gt;throws&lt;/b&gt; in this example? It seems that if you are just doing basic exception-handling of something like an IOException that you would simply need the try/catch block and that&#39;s it.","title":"When to use throws in a Java method declaration?","body":"<p>So I thought I had a good basic understanding of exception-handling in Java, but I was recently reading some code that gave me some confusion and doubts. My main doubt that I want to address here is when should a person use throws in a Java method declaration like the following:</p>\n\n<pre><code>    public void method() throws SomeException\n    {\n         // method body here\n    }\n</code></pre>\n\n<p>From reading some similar posts I gather that <b>throws</b> is used as a sort of declaration that <em>SomeException</em> could be thrown during the execution of the method.</p>\n\n<p>My confusion comes from some code that looked like this:</p>\n\n<pre><code>     public void method() throws IOException\n     {\n          try\n          {\n               BufferedReader br = new BufferedReader(new FileReader(\"file.txt\"));\n          }\n          catch(IOException e)\n          {\n               System.out.println(e.getMessage());\n          }\n     }</code></pre>\n\n<p>Is there any reason that you would want to use a <b>throws</b> in this example? It seems that if you are just doing basic exception-handling of something like an IOException that you would simply need the try/catch block and that's it.</p>\n"},{"tags":["java","junit","mariadb","h2","jooq"],"answers":[{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675179293,"creation_date":1675179293,"answer_id":75299464,"question_id":75285122,"body_markdown":"This is an open ended question with no obvious, &quot;correct&quot; answer. jOOQ&#39;s official take here is that you may want to re-consider using alternative RDBMS for testing what you could be doing [with your target RDBMS directly, specifically using testcontainers][1].\r\n\r\nYou could [combine this approach with jOOQ&#39;s code generation][2] for a more streamlined development process.\r\n\r\nIn short, jOOQ&#39;s recommendation is to use:\r\n\r\n- Flyway or Liquibase for database change management\r\n- Testcontainers for code generation\r\n- Testcontainers for integration testing\r\n\r\nOther, equivalent products are obviously also possible.\r\n\r\n\r\n  [1]: https://blog.jooq.org/using-h2-as-a-test-database-product/\r\n  [2]: https://blog.jooq.org/using-testcontainers-to-generate-jooq-code/","title":"Use dummy H2 DB for testing with Jooq","body":"<p>This is an open ended question with no obvious, &quot;correct&quot; answer. jOOQ's official take here is that you may want to re-consider using alternative RDBMS for testing what you could be doing <a href=\"https://blog.jooq.org/using-h2-as-a-test-database-product/\" rel=\"nofollow noreferrer\">with your target RDBMS directly, specifically using testcontainers</a>.</p>\n<p>You could <a href=\"https://blog.jooq.org/using-testcontainers-to-generate-jooq-code/\" rel=\"nofollow noreferrer\">combine this approach with jOOQ's code generation</a> for a more streamlined development process.</p>\n<p>In short, jOOQ's recommendation is to use:</p>\n<ul>\n<li>Flyway or Liquibase for database change management</li>\n<li>Testcontainers for code generation</li>\n<li>Testcontainers for integration testing</li>\n</ul>\n<p>Other, equivalent products are obviously also possible.</p>\n"}],"owner":{"account_id":12616725,"reputation":1228,"user_id":9614332,"display_name":"Stefano Bossi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":198,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75299464,"answer_count":1,"score":1,"last_activity_date":1675179293,"creation_date":1675085409,"question_id":75285122,"body_markdown":"I would like to find a reliable way to test my Maria DB schema with Jooq. \r\nThis is what I have now:\r\n* let Jooq with Gradle to extract an XML schema from the real DB (i.e. Maria instance) via `org.jooq.codegen.XMLGenerator`, this step will generate a `maria_information_schema.xml`;\r\n* use this schema to generate all the Java Classes.\r\n\r\nTo test all the classes I will write I have develop a technique:\r\n* fire a H2 embedded in ram database;\r\n* build a java `InitDatabase.java` class which ***manually*** set a DB schema as similar as possible with the MariaDB one;\r\n* preform all the test on the in ram DB.\r\n\r\nThis procedure works perfectly as far as I don&#39;t change something on the real DB and I forgot to do the same on the `InitDatabase.java` class.\r\n\r\nMy question is: is there a way to use the XML schema or the generated java classes to create an H2 Database with the same schema as the MariaDb one without writing manually all the create table statement? \r\n\r\nThanks","title":"Use dummy H2 DB for testing with Jooq","body":"<p>I would like to find a reliable way to test my Maria DB schema with Jooq.\nThis is what I have now:</p>\n<ul>\n<li>let Jooq with Gradle to extract an XML schema from the real DB (i.e. Maria instance) via <code>org.jooq.codegen.XMLGenerator</code>, this step will generate a <code>maria_information_schema.xml</code>;</li>\n<li>use this schema to generate all the Java Classes.</li>\n</ul>\n<p>To test all the classes I will write I have develop a technique:</p>\n<ul>\n<li>fire a H2 embedded in ram database;</li>\n<li>build a java <code>InitDatabase.java</code> class which <em><strong>manually</strong></em> set a DB schema as similar as possible with the MariaDB one;</li>\n<li>preform all the test on the in ram DB.</li>\n</ul>\n<p>This procedure works perfectly as far as I don't change something on the real DB and I forgot to do the same on the <code>InitDatabase.java</code> class.</p>\n<p>My question is: is there a way to use the XML schema or the generated java classes to create an H2 Database with the same schema as the MariaDb one without writing manually all the create table statement?</p>\n<p>Thanks</p>\n"},{"tags":["java","sql-server","h2","jooq"],"comments":[{"owner":{"account_id":2312068,"reputation":90341,"user_id":2029983,"display_name":"Thom A"},"score":0,"creation_date":1675078180,"post_id":75283762,"comment_id":132843894,"body_markdown":"Different (R)DBMS use (very) different dialects of SQL. This is expected behaviour, as it&#39;s unlikely that the syntax for one (R)DBMS&#39;s dialect will be compatible with another (sometimes even *very* simple queries aren&#39;t transferable without a small amount of translation).","body":"Different (R)DBMS use (very) different dialects of SQL. This is expected behaviour, as it&#39;s unlikely that the syntax for one (R)DBMS&#39;s dialect will be compatible with another (sometimes even <i>very</i> simple queries aren&#39;t transferable without a small amount of translation)."},{"owner":{"account_id":7568933,"reputation":695,"user_id":5743485,"display_name":"MelleD"},"score":0,"creation_date":1675086954,"post_id":75283762,"comment_id":132846779,"body_markdown":"But if you use H2 with prepared statements then no extra select is needed for the automatically generated ID. I can just use a insert with returning generated key and thats it","body":"But if you use H2 with prepared statements then no extra select is needed for the automatically generated ID. I can just use a insert with returning generated key and thats it"}],"answers":[{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675178866,"creation_date":1675178866,"answer_id":75299386,"question_id":75283762,"body_markdown":"The expectation of jOOQ (or any ORM) producing the exact same SQL for different SQL dialects is wrong. The whole point of abstracting over SQL is, in parts, to be able to generate SQL that &quot;does the job&quot;.\r\n\r\nIn this case, it seems you&#39;re running some sort of statement that tries to implement `RETURNING` behaviour, where generated keys are to be fetched from the RDBMS after insertion. Both H2 and SQL Server have means to do this:\r\n\r\n- H2 implements the standard SQL data change delta table (`FINAL TABLE (...)`)\r\n- SQL Server has an `OUTPUT` clause, but it has some limitations, including not being able to produce trigger generated values, so jOOQ generates a statement batch which fetches results into a in-memory temporary table.\r\n\r\nYou can find more details about this topic in this blog post about [the many ways of returning data from SQL DML statements, on the jOOQ blog][1], which explains what jOOQ does behind the scenes, and why.\r\n\r\nYour question &quot;What are my options to solve this?&quot; is harder to answer, because I&#39;m not convinced your motivation here is reasonable: That of expecting identical SQL for both RDBMS.\r\n\r\nPerhaps a much better question is: [Do you really need H2 (as a test database product)? Here&#39;s jOOQ&#39;s take on this][2].\r\n\r\n\r\n  [1]: https://blog.jooq.org/the-many-ways-to-return-data-from-sql-dml/\r\n  [2]: https://blog.jooq.org/using-h2-as-a-test-database-product/","title":"Storing a record with JOOQ shows different behavior on insert in h2 and MSSQL","body":"<p>The expectation of jOOQ (or any ORM) producing the exact same SQL for different SQL dialects is wrong. The whole point of abstracting over SQL is, in parts, to be able to generate SQL that &quot;does the job&quot;.</p>\n<p>In this case, it seems you're running some sort of statement that tries to implement <code>RETURNING</code> behaviour, where generated keys are to be fetched from the RDBMS after insertion. Both H2 and SQL Server have means to do this:</p>\n<ul>\n<li>H2 implements the standard SQL data change delta table (<code>FINAL TABLE (...)</code>)</li>\n<li>SQL Server has an <code>OUTPUT</code> clause, but it has some limitations, including not being able to produce trigger generated values, so jOOQ generates a statement batch which fetches results into a in-memory temporary table.</li>\n</ul>\n<p>You can find more details about this topic in this blog post about <a href=\"https://blog.jooq.org/the-many-ways-to-return-data-from-sql-dml/\" rel=\"nofollow noreferrer\">the many ways of returning data from SQL DML statements, on the jOOQ blog</a>, which explains what jOOQ does behind the scenes, and why.</p>\n<p>Your question &quot;What are my options to solve this?&quot; is harder to answer, because I'm not convinced your motivation here is reasonable: That of expecting identical SQL for both RDBMS.</p>\n<p>Perhaps a much better question is: <a href=\"https://blog.jooq.org/using-h2-as-a-test-database-product/\" rel=\"nofollow noreferrer\">Do you really need H2 (as a test database product)? Here's jOOQ's take on this</a>.</p>\n"}],"owner":{"account_id":27635205,"reputation":11,"user_id":21093276,"display_name":"user21093276"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1675178866,"creation_date":1675078070,"question_id":75283762,"body_markdown":"When storing a record with jooq it generates different SQL for h2 and MSSQL, which makes it impossible to use quickperfs @ExpectInsert/@ExpectSelect annotations in test, since it counts differently. The generated SQL looks for H2 like:\r\n&gt; select &quot;ID&quot; from final table (insert into...\r\n\r\nand for MSSQL:\r\n&gt; declare @result table ([ID] bigint); insert into ...\r\n\r\nso in the first case quickperf does not count an insert but an select. So, why is the generated SQL so different? What are my options to solve this?  Any hints are much appreciated.\r\n\r\nI used the jooq store() method and insertInto() with no difference in the generated SQL.","title":"Storing a record with JOOQ shows different behavior on insert in h2 and MSSQL","body":"<p>When storing a record with jooq it generates different SQL for h2 and MSSQL, which makes it impossible to use quickperfs @ExpectInsert/@ExpectSelect annotations in test, since it counts differently. The generated SQL looks for H2 like:</p>\n<blockquote>\n<p>select &quot;ID&quot; from final table (insert into...</p>\n</blockquote>\n<p>and for MSSQL:</p>\n<blockquote>\n<p>declare @result table ([ID] bigint); insert into ...</p>\n</blockquote>\n<p>so in the first case quickperf does not count an insert but an select. So, why is the generated SQL so different? What are my options to solve this?  Any hints are much appreciated.</p>\n<p>I used the jooq store() method and insertInto() with no difference in the generated SQL.</p>\n"},{"tags":["java","android","android-studio","accelerometer"],"comments":[{"owner":{"account_id":10805772,"reputation":1669,"user_id":7948109,"display_name":"Rahul Gaur"},"score":0,"creation_date":1579930664,"post_id":59906444,"comment_id":105939623,"body_markdown":"Does this answer your question? [How to detect shake event with android?](https://stackoverflow.com/questions/5271448/how-to-detect-shake-event-with-android)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/5271448/how-to-detect-shake-event-with-android\">How to detect shake event with android?</a>"},{"owner":{"account_id":16990748,"reputation":75,"user_id":12290411,"display_name":"Manoj H M"},"score":0,"creation_date":1580809218,"post_id":59906444,"comment_id":106210645,"body_markdown":"No sir... I want text to be toasted exactly after shaking the phone for 3 times","body":"No sir... I want text to be toasted exactly after shaking the phone for 3 times"},{"owner":{"account_id":10805772,"reputation":1669,"user_id":7948109,"display_name":"Rahul Gaur"},"score":0,"creation_date":1580817062,"post_id":59906444,"comment_id":106214899,"body_markdown":"You can add a counter to detect every 3rd shake","body":"You can add a counter to detect every 3rd shake"},{"owner":{"account_id":16990748,"reputation":75,"user_id":12290411,"display_name":"Manoj H M"},"score":0,"creation_date":1580825609,"post_id":59906444,"comment_id":106219650,"body_markdown":"I did everything as I could&#39;ve done sir... But I didn&#39;t get any result I added count variable, changed values too.. but didn&#39;t get output","body":"I did everything as I could&#39;ve done sir... But I didn&#39;t get any result I added count variable, changed values too.. but didn&#39;t get output"}],"answers":[{"tags":[],"owner":{"account_id":10805772,"reputation":1669,"user_id":7948109,"display_name":"Rahul Gaur"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1580875300,"creation_date":1580875300,"answer_id":60068847,"question_id":59906444,"body_markdown":"Add this as `Global Var`\r\n\r\n```\r\nprivate static int counter = 0;\r\n```\r\n\r\nnow add these lines in your `onSensorChanged`\r\n\r\n\r\n    if (shake &gt; 12) {\r\n        counter++;\r\n    }\r\n\r\n    if (counter &gt;= 3) {\r\n        counter = 0;\r\n        Toast t = Toast.makeText(getApplicationContext(), &quot;Don&#39;t Shake phone&quot;, Toast.LENGTH_LONG);\r\n        t.show();\r\n    }\r\n\r\nThis will show toast every 3rd time user shakes the phone, I also suggest to change `Toast` length to `LENGTH_SHORT`\r\n\r\nHope this will help!","title":"How to detect shake and toast a message after shaking the phone 3 times in android","body":"<p>Add this as <code>Global Var</code></p>\n\n<pre><code>private static int counter = 0;\n</code></pre>\n\n<p>now add these lines in your <code>onSensorChanged</code></p>\n\n<pre><code>if (shake &gt; 12) {\n    counter++;\n}\n\nif (counter &gt;= 3) {\n    counter = 0;\n    Toast t = Toast.makeText(getApplicationContext(), \"Don't Shake phone\", Toast.LENGTH_LONG);\n    t.show();\n}\n</code></pre>\n\n<p>This will show toast every 3rd time user shakes the phone, I also suggest to change <code>Toast</code> length to <code>LENGTH_SHORT</code></p>\n\n<p>Hope this will help!</p>\n"}],"owner":{"account_id":16990748,"reputation":75,"user_id":12290411,"display_name":"Manoj H M"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2003,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":60068847,"answer_count":1,"score":1,"last_activity_date":1675178808,"creation_date":1579928208,"question_id":59906444,"body_markdown":"    package com.example.womenssafety;\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    import android.content.Context;\r\n    import android.hardware.Sensor;\r\n    import android.hardware.SensorEvent;\r\n    import android.hardware.SensorEventListener;\r\n    import android.hardware.SensorManager;\r\n    import android.os.Bundle;\r\n    import android.widget.Toast;\r\n    public class MainActivity extends AppCompatActivity {\r\n    private SensorManager sm;\r\n    private float acelVal,acelLast,shake;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n            sm=(SensorManager) getSystemService(Context.SENSOR_SERVICE);\r\n            sm.registerListener(sensorListener,sm.getDefaultSensor(Sensor.TYPE_ACCELEROMETER), SensorManager.SENSOR_DELAY_NORMAL);\r\n    \r\n            acelVal=SensorManager.GRAVITY_EARTH;\r\n            acelLast=SensorManager.GRAVITY_EARTH;\r\n            shake=0.00f;\r\n        }\r\n    private final SensorEventListener sensorListener = new SensorEventListener() {\r\n        @Override\r\n        public void onSensorChanged(SensorEvent event) {\r\n            float x =event.values[0];\r\n            float y =event.values[1];\r\n            float z =event.values[2];\r\n            acelLast=acelVal;\r\n            acelVal=(float) Math.sqrt((double) (x*x)+(y*y)+(z*z));\r\n            float delta= acelVal-acelLast;\r\n            shake =shake*0.9f+delta;\r\n    \r\n    \r\n            if(shake&gt;12){\r\n                Toast t =Toast.makeText(getApplicationContext(), &quot;Dont Shake phone&quot;,Toast.LENGTH_LONG);\r\n                t.show();\r\n            }\r\n        }\r\n        @Override\r\n        public void onAccuracyChanged(Sensor sensor, int accuracy) {\r\n        }\r\n    };\r\n    }\r\n\r\nIn this code it&#39;s toasting the message after shaking the phone 1 time. But I want to get the toast message after shaking the phone 3 times.\r\n \r\nHow can I do this?","title":"How to detect shake and toast a message after shaking the phone 3 times in android","body":"<pre><code>package com.example.womenssafety;\nimport androidx.appcompat.app.AppCompatActivity;\nimport android.content.Context;\nimport android.hardware.Sensor;\nimport android.hardware.SensorEvent;\nimport android.hardware.SensorEventListener;\nimport android.hardware.SensorManager;\nimport android.os.Bundle;\nimport android.widget.Toast;\npublic class MainActivity extends AppCompatActivity {\nprivate SensorManager sm;\nprivate float acelVal,acelLast,shake;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        sm=(SensorManager) getSystemService(Context.SENSOR_SERVICE);\n        sm.registerListener(sensorListener,sm.getDefaultSensor(Sensor.TYPE_ACCELEROMETER), SensorManager.SENSOR_DELAY_NORMAL);\n\n        acelVal=SensorManager.GRAVITY_EARTH;\n        acelLast=SensorManager.GRAVITY_EARTH;\n        shake=0.00f;\n    }\nprivate final SensorEventListener sensorListener = new SensorEventListener() {\n    @Override\n    public void onSensorChanged(SensorEvent event) {\n        float x =event.values[0];\n        float y =event.values[1];\n        float z =event.values[2];\n        acelLast=acelVal;\n        acelVal=(float) Math.sqrt((double) (x*x)+(y*y)+(z*z));\n        float delta= acelVal-acelLast;\n        shake =shake*0.9f+delta;\n\n\n        if(shake&gt;12){\n            Toast t =Toast.makeText(getApplicationContext(), &quot;Dont Shake phone&quot;,Toast.LENGTH_LONG);\n            t.show();\n        }\n    }\n    @Override\n    public void onAccuracyChanged(Sensor sensor, int accuracy) {\n    }\n};\n}\n</code></pre>\n<p>In this code it's toasting the message after shaking the phone 1 time. But I want to get the toast message after shaking the phone 3 times.</p>\n<p>How can I do this?</p>\n"},{"tags":["java","swing","animation","animated-gif"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1675178534,"post_id":75297752,"comment_id":132870187,"body_markdown":"It is not easy to extract images for a gif. An easier approach would be to create images that you load separately and then add the images to a JLabel and add the label to a panel.  You can use a Swing Timer for the animation. After you add each label to the panel you need to revalidate() the panel.","body":"It is not easy to extract images for a gif. An easier approach would be to create images that you load separately and then add the images to a JLabel and add the label to a panel.  You can use a Swing Timer for the animation. After you add each label to the panel you need to revalidate() the panel."},{"owner":{"account_id":27028764,"reputation":561,"user_id":20585541,"display_name":"Ben the Coder"},"score":0,"creation_date":1675179482,"post_id":75297752,"comment_id":132870562,"body_markdown":"You can use [PowerPoint online](https://www.microsoft.com/en-us/microsoft-365/powerpoint).  Just click on the link on the page that says &quot;Looking for PowerPoint on the web?&quot;.  You&#39;ll need to have a Microsoft account, though only a free one.","body":"You can use <a href=\"https://www.microsoft.com/en-us/microsoft-365/powerpoint\" rel=\"nofollow noreferrer\">PowerPoint online</a>.  Just click on the link on the page that says &quot;Looking for PowerPoint on the web?&quot;.  You&#39;ll need to have a Microsoft account, though only a free one."},{"owner":{"account_id":27666414,"reputation":1,"user_id":21118155,"display_name":"parul chauhan"},"score":0,"creation_date":1675194285,"post_id":75297752,"comment_id":132875143,"body_markdown":"@camickr, Is there another way to use them as separate images into animation because I&#39;m working on URCaps (a jar kind of file extension for UI of UR cobots) and there I can&#39;t access JPanel each time I&#39;m hitting actionlistener of any type (A JButton in this case).","body":"@camickr, Is there another way to use them as separate images into animation because I&#39;m working on URCaps (a jar kind of file extension for UI of UR cobots) and there I can&#39;t access JPanel each time I&#39;m hitting actionlistener of any type (A JButton in this case)."},{"owner":{"account_id":27666414,"reputation":1,"user_id":21118155,"display_name":"parul chauhan"},"score":0,"creation_date":1675194379,"post_id":75297752,"comment_id":132875183,"body_markdown":"@BentheCoder , I&#39;m using an online version of power point but to save any file there as a gif option is not available in online version.","body":"@BentheCoder , I&#39;m using an online version of power point but to save any file there as a gif option is not available in online version."},{"owner":{"account_id":27028764,"reputation":561,"user_id":20585541,"display_name":"Ben the Coder"},"score":0,"creation_date":1675217306,"post_id":75297752,"comment_id":132879881,"body_markdown":"Oh yeah, sorry! I didn&#39;t realize that.  I use PowerPoint (the pay, desktop version) so thought the free version could do that too.","body":"Oh yeah, sorry! I didn&#39;t realize that.  I use PowerPoint (the pay, desktop version) so thought the free version could do that too."}],"owner":{"account_id":27666414,"reputation":1,"user_id":21118155,"display_name":"parul chauhan"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675178420,"creation_date":1675170982,"question_id":75297752,"body_markdown":"I&#39;m trying to build a swing application that shows images side by side one after another on click of a button. I&#39;m using gif for animation since it&#39;s very easy but I could not find a way to custom gif in such a way that shows images stacked side by side with little time difference. \r\n\r\nThere&#39;s a way to do so in power point but I don&#39;t have it in my office&#39;s laptop.  \r\nThe animated- gif I&#39;m using currently shows the images on the same frame on top of each other but I need it to be side by side and one after another with a little time difference.  \r\n  \r\nI&#39;m new in UI programming, please suggest any solution.","title":"How to animate image by stacking them side by side in a row","body":"<p>I'm trying to build a swing application that shows images side by side one after another on click of a button. I'm using gif for animation since it's very easy but I could not find a way to custom gif in such a way that shows images stacked side by side with little time difference.</p>\n<p>There's a way to do so in power point but I don't have it in my office's laptop.<br />\nThe animated- gif I'm using currently shows the images on the same frame on top of each other but I need it to be side by side and one after another with a little time difference.</p>\n<p>I'm new in UI programming, please suggest any solution.</p>\n"},{"tags":["java","javafx","scenebuilder"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1675170181,"post_id":75297551,"comment_id":132867162,"body_markdown":"Just to be clear: Even in your CLI interface you want to run *some JavaFX* parts. Is that accurate?","body":"Just to be clear: Even in your CLI interface you want to run <i>some JavaFX</i> parts. Is that accurate?"},{"owner":{"account_id":27666309,"reputation":1,"user_id":21118068,"display_name":"Matteo"},"score":0,"creation_date":1675170306,"post_id":75297551,"comment_id":132867198,"body_markdown":"@JoachimSauer yes, i need to run a class that loads a new Stage with an fxml in my cli","body":"@JoachimSauer yes, i need to run a class that loads a new Stage with an fxml in my cli"},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1675170604,"post_id":75297551,"comment_id":132867292,"body_markdown":"[This question](https://stackoverflow.com/questions/59541555/how-to-achieve-javafx-and-non-javafx-interaction) and the `Platform.startup()` method and/or `JFXPanel` class mentioned in there seems relevant. Note that this is a fairly unusual thing to do, so expect some issues.","body":"<a href=\"https://stackoverflow.com/questions/59541555/how-to-achieve-javafx-and-non-javafx-interaction\">This question</a> and the <code>Platform.startup()</code> method and/or <code>JFXPanel</code> class mentioned in there seems relevant. Note that this is a fairly unusual thing to do, so expect some issues."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1675171921,"post_id":75297551,"comment_id":132867741,"body_markdown":"If your &quot;CLI&quot; needs to open a JavaFX Stage, then it&#39;s not a CLI, it&#39;s a JavaFX application. Subclass `Application` as usual. If you don&#39;t need to show a window immediately, start a new Thread from `start()` and implement the CLI portion from there, then open a new stage on the FX Application Thread when you need. You can also use `Platform.startup()` etc. as described above, but note you can only call `startup()` once and must not do so from the FX Application Thread. You&#39;re basically reimplementing the lifecycle that `Application` implements for you at that stage.","body":"If your &quot;CLI&quot; needs to open a JavaFX Stage, then it&#39;s not a CLI, it&#39;s a JavaFX application. Subclass <code>Application</code> as usual. If you don&#39;t need to show a window immediately, start a new Thread from <code>start()</code> and implement the CLI portion from there, then open a new stage on the FX Application Thread when you need. You can also use <code>Platform.startup()</code> etc. as described above, but note you can only call <code>startup()</code> once and must not do so from the FX Application Thread. You&#39;re basically reimplementing the lifecycle that <code>Application</code> implements for you at that stage."},{"owner":{"account_id":27666309,"reputation":1,"user_id":21118068,"display_name":"Matteo"},"score":0,"creation_date":1675172132,"post_id":75297551,"comment_id":132867836,"body_markdown":"@James_D ye i know, but as my project final i must only change graphic controllers and the implementation of controllers and model must remain the same. i implemented this method payment during javaFX and i did not think about this problem i am witnessing now. by the way, i think your solution will solve my issue. ill keep this post updates","body":"@James_D ye i know, but as my project final i must only change graphic controllers and the implementation of controllers and model must remain the same. i implemented this method payment during javaFX and i did not think about this problem i am witnessing now. by the way, i think your solution will solve my issue. ill keep this post updates"},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1675177349,"post_id":75297551,"comment_id":132869741,"body_markdown":"See the [wumpus app for some info](https://stackoverflow.com/questions/24320014/how-to-call-launch-more-than-once-in-java/24320562#24320562).","body":"See the <a href=\"https://stackoverflow.com/questions/24320014/how-to-call-launch-more-than-once-in-java/24320562#24320562\">wumpus app for some info</a>."}],"answers":[{"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1675178368,"creation_date":1675174235,"answer_id":75298419,"question_id":75297551,"body_markdown":"If your &quot;CLI&quot; shows a JavaFX window, then it is a JavaFX application. Subclass `Application` in the usual way.\r\n\r\nYour application does not need to show the primary stage if it&#39;s not ready to during the start method. You can launch your CLI and let the user interact with it.\r\n\r\nNote that whatever approach you use here, you have to manage two threads: the JavaFX Application Thread and the thread on which the CLI runs. Since the CLI is going to block for user input, it **must not** run on the FX Application Thread.\r\n\r\nIf you launch the CLI from `Application.start()`, since `Application.start()` is executed on the FX Application Thread, you need to create a new thread for it.\r\n\r\nUse all the usual multithreading precautions for sharing data between the two threads.\r\n\r\nHere is a quick example. Here&#39;s a very basic CLI class with a method that runs a simple REPL. There are only two commands: `&quot;login&quot;` shows a login screen using JavaFX and retrieves some data from it. `&quot;exit&quot;` exits the application.\r\n\r\n    import javafx.application.Platform;\r\n    import javafx.fxml.FXMLLoader;\r\n    import javafx.scene.Parent;\r\n    import javafx.scene.Scene;\r\n    import javafx.stage.Stage;\r\n    \r\n    import java.io.IOException;\r\n    import java.util.Scanner;\r\n    import java.util.concurrent.FutureTask;\r\n    \r\n    public class CommandLineInterpreter {\r\n    \r\n        public void runCli() {\r\n            try (Scanner scanner = new Scanner(System.in)) {\r\n                boolean done = false;\r\n                while (! done) {\r\n                    System.out.println(&quot;Enter login to log in, or exit to quit:&quot;);\r\n                    String input = scanner.nextLine();\r\n                    if (&quot;login&quot;.equalsIgnoreCase(input)) {\r\n                        String user = getLoginData();\r\n                        System.out.println(&quot;Welcome &quot;+user);\r\n                    } else if (input.equalsIgnoreCase(&quot;exit&quot;)) {\r\n                        Platform.exit();\r\n                        done = true ;\r\n                    }\r\n                }\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    \r\n        private String getLoginData() throws Exception{\r\n            FutureTask&lt;String&gt; loginWithUITask = new FutureTask&lt;&gt;(this::getUserFromUI);\r\n            Platform.runLater(loginWithUITask);\r\n            return loginWithUITask.get();\r\n        }\r\n    \r\n        private String getUserFromUI() throws IOException {\r\n            FXMLLoader loader = new FXMLLoader(getClass().getResource(&quot;Login.fxml&quot;));\r\n            Parent root = loader.load();\r\n            LoginController controller = loader.getController();\r\n            Scene scene = new Scene(root);\r\n            Stage stage = new Stage();\r\n            stage.setScene(scene);\r\n            stage.setOnShown(e -&gt; stage.toFront());\r\n            stage.showAndWait();\r\n            return controller.getUser();\r\n        }\r\n    }\r\n\r\nHere&#39;s a basic application class that starts the CLI above in a background thread. Note that we have to call `Platform.setImplicitExit(false)` to make sure the FX platform doesn&#39;t close down when the last window is closed.\r\n\r\n    import javafx.application.Application;\r\n    import javafx.application.Platform;\r\n    import javafx.stage.Stage;\r\n    \r\n    import java.io.IOException;\r\n    \r\n    public class HelloApplication extends Application {\r\n        @Override\r\n        public void start(Stage stage) throws IOException {\r\n            Platform.setImplicitExit(false);\r\n            CommandLineInterpreter cli = new CommandLineInterpreter();\r\n            Thread cliThread = new Thread(cli::runCli);\r\n            cliThread.start();\r\n        }\r\n\r\n        @Override\r\n        public void stop() {\r\n            // Cleanup code...\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            launch();\r\n        }\r\n    }\r\n\r\nAnd for completeness the FXML and controller class, which are nothing special:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    \r\n    &lt;?import java.lang.*?&gt;\r\n    &lt;?import java.util.*?&gt;\r\n    &lt;?import javafx.scene.*?&gt;\r\n    &lt;?import javafx.scene.control.*?&gt;\r\n    &lt;?import javafx.scene.layout.*?&gt;\r\n    \r\n    &lt;?import javafx.geometry.Insets?&gt;\r\n    &lt;GridPane xmlns=&quot;http://javafx.com/javafx&quot;\r\n              xmlns:fx=&quot;http://javafx.com/fxml&quot;\r\n              fx:controller=&quot;org.jamesd.examples.cli.LoginController&quot;\r\n              hgap=&quot;5&quot; vgap=&quot;5&quot;&gt;\r\n    \r\n        &lt;columnConstraints&gt;\r\n            &lt;ColumnConstraints halignment=&quot;RIGHT&quot; hgrow=&quot;NEVER&quot;/&gt;\r\n            &lt;ColumnConstraints halignment=&quot;LEFT&quot; hgrow=&quot;ALWAYS&quot;/&gt;\r\n        &lt;/columnConstraints&gt;\r\n    \r\n        &lt;padding&gt;&lt;Insets topRightBottomLeft=&quot;5&quot;/&gt;&lt;/padding&gt;\r\n    \r\n        &lt;Label text=&quot;User Name:&quot; GridPane.columnIndex=&quot;0&quot; GridPane.rowIndex=&quot;0&quot;/&gt;\r\n        &lt;TextField fx:id=&quot;userField&quot; GridPane.columnIndex=&quot;1&quot; GridPane.rowIndex=&quot;0&quot;/&gt;\r\n        &lt;Label text=&quot;Password&quot; GridPane.columnIndex=&quot;0&quot; GridPane.rowIndex=&quot;1&quot;/&gt;\r\n        &lt;PasswordField GridPane.columnIndex=&quot;1&quot; GridPane.rowIndex=&quot;1&quot;/&gt;\r\n        &lt;Button text=&quot;OK&quot; onAction=&quot;#login&quot;\r\n                GridPane.columnIndex=&quot;0&quot; GridPane.rowIndex=&quot;2&quot;\r\n                GridPane.columnSpan=&quot;2&quot; GridPane.halignment=&quot;CENTER&quot;/&gt;\r\n    &lt;/GridPane&gt;\r\n\r\n&lt;!-- --&gt;\r\n\r\n    import javafx.fxml.FXML;\r\n    import javafx.scene.control.TextField;\r\n    \r\n    public class LoginController {\r\n        @FXML\r\n        private TextField userField ;\r\n    \r\n        @FXML\r\n        private void login() {\r\n            userField.getScene().getWindow().hide();\r\n        }\r\n    \r\n        public String getUser() {\r\n            return userField.getText();\r\n        }\r\n    }\r\n\r\n---\r\n\r\nOther approaches are possible, e.g. you might use `Platform.startup()` in a non-JavaFX thread to &quot;manually&quot; start the FX platform, bypassing the usual application lifecycle structure. For example, you can replace the `HelloApplication` class above with this implementation:\r\n\r\n\r\n    import javafx.application.Platform;\r\n    \r\n    public class HelloApplication {\r\n    \r\n        public static void main(String[] args) {\r\n            Platform.startup(() -&gt; Platform.setImplicitExit(false));\r\n            CommandLineInterpreter cli = new CommandLineInterpreter();\r\n            cli.runCli();\r\n        }\r\n    }\r\n\r\nNote that with this approach you don&#39;t have a `stop()` method to perform any cleanup code, as you do with the previous approach.","title":"How to open a stage in a command line interface in java","body":"<p>If your &quot;CLI&quot; shows a JavaFX window, then it is a JavaFX application. Subclass <code>Application</code> in the usual way.</p>\n<p>Your application does not need to show the primary stage if it's not ready to during the start method. You can launch your CLI and let the user interact with it.</p>\n<p>Note that whatever approach you use here, you have to manage two threads: the JavaFX Application Thread and the thread on which the CLI runs. Since the CLI is going to block for user input, it <strong>must not</strong> run on the FX Application Thread.</p>\n<p>If you launch the CLI from <code>Application.start()</code>, since <code>Application.start()</code> is executed on the FX Application Thread, you need to create a new thread for it.</p>\n<p>Use all the usual multithreading precautions for sharing data between the two threads.</p>\n<p>Here is a quick example. Here's a very basic CLI class with a method that runs a simple REPL. There are only two commands: <code>&quot;login&quot;</code> shows a login screen using JavaFX and retrieves some data from it. <code>&quot;exit&quot;</code> exits the application.</p>\n<pre><code>import javafx.application.Platform;\nimport javafx.fxml.FXMLLoader;\nimport javafx.scene.Parent;\nimport javafx.scene.Scene;\nimport javafx.stage.Stage;\n\nimport java.io.IOException;\nimport java.util.Scanner;\nimport java.util.concurrent.FutureTask;\n\npublic class CommandLineInterpreter {\n\n    public void runCli() {\n        try (Scanner scanner = new Scanner(System.in)) {\n            boolean done = false;\n            while (! done) {\n                System.out.println(&quot;Enter login to log in, or exit to quit:&quot;);\n                String input = scanner.nextLine();\n                if (&quot;login&quot;.equalsIgnoreCase(input)) {\n                    String user = getLoginData();\n                    System.out.println(&quot;Welcome &quot;+user);\n                } else if (input.equalsIgnoreCase(&quot;exit&quot;)) {\n                    Platform.exit();\n                    done = true ;\n                }\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    private String getLoginData() throws Exception{\n        FutureTask&lt;String&gt; loginWithUITask = new FutureTask&lt;&gt;(this::getUserFromUI);\n        Platform.runLater(loginWithUITask);\n        return loginWithUITask.get();\n    }\n\n    private String getUserFromUI() throws IOException {\n        FXMLLoader loader = new FXMLLoader(getClass().getResource(&quot;Login.fxml&quot;));\n        Parent root = loader.load();\n        LoginController controller = loader.getController();\n        Scene scene = new Scene(root);\n        Stage stage = new Stage();\n        stage.setScene(scene);\n        stage.setOnShown(e -&gt; stage.toFront());\n        stage.showAndWait();\n        return controller.getUser();\n    }\n}\n</code></pre>\n<p>Here's a basic application class that starts the CLI above in a background thread. Note that we have to call <code>Platform.setImplicitExit(false)</code> to make sure the FX platform doesn't close down when the last window is closed.</p>\n<pre><code>import javafx.application.Application;\nimport javafx.application.Platform;\nimport javafx.stage.Stage;\n\nimport java.io.IOException;\n\npublic class HelloApplication extends Application {\n    @Override\n    public void start(Stage stage) throws IOException {\n        Platform.setImplicitExit(false);\n        CommandLineInterpreter cli = new CommandLineInterpreter();\n        Thread cliThread = new Thread(cli::runCli);\n        cliThread.start();\n    }\n\n    @Override\n    public void stop() {\n        // Cleanup code...\n    }\n\n    public static void main(String[] args) {\n        launch();\n    }\n}\n</code></pre>\n<p>And for completeness the FXML and controller class, which are nothing special:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;?import java.lang.*?&gt;\n&lt;?import java.util.*?&gt;\n&lt;?import javafx.scene.*?&gt;\n&lt;?import javafx.scene.control.*?&gt;\n&lt;?import javafx.scene.layout.*?&gt;\n\n&lt;?import javafx.geometry.Insets?&gt;\n&lt;GridPane xmlns=&quot;http://javafx.com/javafx&quot;\n          xmlns:fx=&quot;http://javafx.com/fxml&quot;\n          fx:controller=&quot;org.jamesd.examples.cli.LoginController&quot;\n          hgap=&quot;5&quot; vgap=&quot;5&quot;&gt;\n\n    &lt;columnConstraints&gt;\n        &lt;ColumnConstraints halignment=&quot;RIGHT&quot; hgrow=&quot;NEVER&quot;/&gt;\n        &lt;ColumnConstraints halignment=&quot;LEFT&quot; hgrow=&quot;ALWAYS&quot;/&gt;\n    &lt;/columnConstraints&gt;\n\n    &lt;padding&gt;&lt;Insets topRightBottomLeft=&quot;5&quot;/&gt;&lt;/padding&gt;\n\n    &lt;Label text=&quot;User Name:&quot; GridPane.columnIndex=&quot;0&quot; GridPane.rowIndex=&quot;0&quot;/&gt;\n    &lt;TextField fx:id=&quot;userField&quot; GridPane.columnIndex=&quot;1&quot; GridPane.rowIndex=&quot;0&quot;/&gt;\n    &lt;Label text=&quot;Password&quot; GridPane.columnIndex=&quot;0&quot; GridPane.rowIndex=&quot;1&quot;/&gt;\n    &lt;PasswordField GridPane.columnIndex=&quot;1&quot; GridPane.rowIndex=&quot;1&quot;/&gt;\n    &lt;Button text=&quot;OK&quot; onAction=&quot;#login&quot;\n            GridPane.columnIndex=&quot;0&quot; GridPane.rowIndex=&quot;2&quot;\n            GridPane.columnSpan=&quot;2&quot; GridPane.halignment=&quot;CENTER&quot;/&gt;\n&lt;/GridPane&gt;\n</code></pre>\n\n<pre><code>import javafx.fxml.FXML;\nimport javafx.scene.control.TextField;\n\npublic class LoginController {\n    @FXML\n    private TextField userField ;\n\n    @FXML\n    private void login() {\n        userField.getScene().getWindow().hide();\n    }\n\n    public String getUser() {\n        return userField.getText();\n    }\n}\n</code></pre>\n<hr />\n<p>Other approaches are possible, e.g. you might use <code>Platform.startup()</code> in a non-JavaFX thread to &quot;manually&quot; start the FX platform, bypassing the usual application lifecycle structure. For example, you can replace the <code>HelloApplication</code> class above with this implementation:</p>\n<pre><code>import javafx.application.Platform;\n\npublic class HelloApplication {\n\n    public static void main(String[] args) {\n        Platform.startup(() -&gt; Platform.setImplicitExit(false));\n        CommandLineInterpreter cli = new CommandLineInterpreter();\n        cli.runCli();\n    }\n}\n</code></pre>\n<p>Note that with this approach you don't have a <code>stop()</code> method to perform any cleanup code, as you do with the previous approach.</p>\n"}],"owner":{"account_id":27666309,"reputation":1,"user_id":21118068,"display_name":"Matteo"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":148,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675178368,"creation_date":1675169991,"question_id":75297551,"body_markdown":"I am developing an applications that can run on 2 different interfaces: one is JavaFX, the other is CLI. During the usage of the applications, i have to run a new stage that implements some sort of fake payment loading a new stage with a new FXML... in the JavaFX run everything runs just fine, but in the CLI i get this error: &quot;This operation is permitted on the event thread only; currentThread = main&quot; which i think is caused because my main doesn&#39;t extend &quot;Applications&quot; and cannot load a stage. This is the CLI main (pretty simple).                                    \r\n```\r\npublic static void main(String[] args){\r\n        LoginControllerG2 loginControllerG2 = new LoginControllerG2();\r\n        loginControllerG2.getRole();\r\n} \r\n```\r\nI need to load the stage with my CLI interface.","title":"How to open a stage in a command line interface in java","body":"<p>I am developing an applications that can run on 2 different interfaces: one is JavaFX, the other is CLI. During the usage of the applications, i have to run a new stage that implements some sort of fake payment loading a new stage with a new FXML... in the JavaFX run everything runs just fine, but in the CLI i get this error: &quot;This operation is permitted on the event thread only; currentThread = main&quot; which i think is caused because my main doesn't extend &quot;Applications&quot; and cannot load a stage. This is the CLI main (pretty simple).</p>\n<pre><code>public static void main(String[] args){\n        LoginControllerG2 loginControllerG2 = new LoginControllerG2();\n        loginControllerG2.getRole();\n} \n</code></pre>\n<p>I need to load the stage with my CLI interface.</p>\n"},{"tags":["java","apache-poi"],"comments":[{"owner":{"account_id":4688171,"reputation":11056,"user_id":3795036,"accept_rate":88,"display_name":"K.Nicholas"},"score":1,"creation_date":1675179782,"post_id":75299177,"comment_id":132870705,"body_markdown":"try making a docx the way you want it and print it out to see what the structure is.","body":"try making a docx the way you want it and print it out to see what the structure is."},{"owner":{"account_id":15194394,"reputation":63,"user_id":10964215,"display_name":"hido"},"score":0,"creation_date":1675237064,"post_id":75299177,"comment_id":132882728,"body_markdown":"when I open the docx there is no TOC","body":"when I open the docx there is no TOC"},{"owner":{"account_id":15194394,"reputation":63,"user_id":10964215,"display_name":"hido"},"score":0,"creation_date":1683657023,"post_id":75299177,"comment_id":134399417,"body_markdown":"@K.Nicholas if I check a working document with TOC structure it prints it with all of the content of the TOC already. so it&#39;s not helping me to create one, only how it should look like after it updates","body":"@K.Nicholas if I check a working document with TOC structure it prints it with all of the content of the TOC already. so it&#39;s not helping me to create one, only how it should look like after it updates"}],"owner":{"account_id":15194394,"reputation":63,"user_id":10964215,"display_name":"hido"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":168,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675178157,"creation_date":1675177850,"question_id":75299177,"body_markdown":"How can I add TOC to my .docx with Apache POI 5.2.3? I&#39;m using Linux and LibreOffice Writer if it is not the same as Microsoft Word for TOC. I tried the code from those questions: [question1][1] [question2][2], but it didn&#39;t work.\r\n\r\nMy code:\r\n```java\r\naddCustomHeadingStyle(doc, &quot;Heading 1&quot;, 1);\r\naddCustomHeadingStyle(doc, &quot;Heading 2&quot;, 2);\r\naddCustomHeadingStyle(doc, &quot;Heading 3&quot;, 3);\r\n\r\nXWPFParagraph paragraph = doc.createParagraph();\r\nXWPFRun run=paragraph.createRun();\r\ndoc.createTOC();\r\nCTP ctP = paragraph.getCTP();\r\nCTSimpleField toc = ctP.addNewFldSimple();\r\ntoc.setInstr(&quot;TOC \\\\h&quot;);\r\ntoc.setDirty(true);\r\nrun.addBreak(BreakType.PAGE);\r\n\r\nparagraph = doc.createParagraph();\r\nrun=paragraph.createRun();\r\nrun.setText(&quot;The Body:&quot;);\r\n\r\nparagraph = doc.createParagraph();\r\nrun=paragraph.createRun();\r\nrun.setText(&quot;Heading 1&quot;);\r\nparagraph.setStyle(&quot;Heading 1&quot;);\r\n\r\nparagraph = doc.createParagraph();\r\nrun=paragraph.createRun();\r\nrun.setText(&quot;Heading 1&quot;);\r\nparagraph.setStyle(&quot;Heading 1&quot;);\r\n\r\nparagraph = doc.createParagraph();\r\nrun=paragraph.createRun();\r\nrun.addBreak(BreakType.PAGE);\r\nrun.setText(&quot;Heading 2&quot;);\r\nparagraph.setStyle(&quot;Heading 2&quot;);\r\n\r\nparagraph = doc.createParagraph();\r\nrun = paragraph.createRun();\r\nrun.addBreak(BreakType.PAGE);\r\nrun.setText(&quot;Heading 3&quot;);\r\nparagraph.setStyle(&quot;Heading 3&quot;);\r\n```\r\n\r\n`toc.setInstr(&quot;TOC \\\\h&quot;);` just adds an empty line with nothing in it and `doc.createTOC();` create the header: &quot;Table of Contents&quot; and not a TOC.\r\n\r\nWhen I put this code at the end of the function, after the creation of the paragraphs, it generates a TOC with &quot;Error: Reference source not found&quot;.\r\n\r\n```java\r\nCTSdtBlock block = doc.getDocument().getBody().addNewSdt();\r\nTOC toc = new TOC(block);\r\nfor (XWPFParagraph par : doc.getParagraphs()) {\r\n\tString parStyle = par.getStyle();\r\n\tif (parStyle != null &amp;&amp; parStyle.startsWith(&quot;Heading &quot;)) {\r\n\t\ttry {\r\n\t\t\tint level = Integer.parseInt(parStyle.substring(&quot;Heading &quot;.length()));\r\n\t\t\ttoc.addRow(level, par.getText(), 1, &quot;112723803&quot;);\r\n\t\t} catch (NumberFormatException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\nHow can I create a TOC that automatically updates when a new paragraph that is header is added to the file? Do I need to set the paragraphs as bookmark?\r\n\r\n  [1]: https://stackoverflow.com/questions/43291213/how-to-create-table-of-content-in-java-using-apache-poi\r\n  [2]: https://stackoverflow.com/questions/40235909/creating-a-table-of-contents-for-a-xwpfdocument-with-page-numbers-indication","title":"How can I add a TOC to my .docx with Apache POI","body":"<p>How can I add TOC to my .docx with Apache POI 5.2.3? I'm using Linux and LibreOffice Writer if it is not the same as Microsoft Word for TOC. I tried the code from those questions: <a href=\"https://stackoverflow.com/questions/43291213/how-to-create-table-of-content-in-java-using-apache-poi\">question1</a> <a href=\"https://stackoverflow.com/questions/40235909/creating-a-table-of-contents-for-a-xwpfdocument-with-page-numbers-indication\">question2</a>, but it didn't work.</p>\n<p>My code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>addCustomHeadingStyle(doc, &quot;Heading 1&quot;, 1);\naddCustomHeadingStyle(doc, &quot;Heading 2&quot;, 2);\naddCustomHeadingStyle(doc, &quot;Heading 3&quot;, 3);\n\nXWPFParagraph paragraph = doc.createParagraph();\nXWPFRun run=paragraph.createRun();\ndoc.createTOC();\nCTP ctP = paragraph.getCTP();\nCTSimpleField toc = ctP.addNewFldSimple();\ntoc.setInstr(&quot;TOC \\\\h&quot;);\ntoc.setDirty(true);\nrun.addBreak(BreakType.PAGE);\n\nparagraph = doc.createParagraph();\nrun=paragraph.createRun();\nrun.setText(&quot;The Body:&quot;);\n\nparagraph = doc.createParagraph();\nrun=paragraph.createRun();\nrun.setText(&quot;Heading 1&quot;);\nparagraph.setStyle(&quot;Heading 1&quot;);\n\nparagraph = doc.createParagraph();\nrun=paragraph.createRun();\nrun.setText(&quot;Heading 1&quot;);\nparagraph.setStyle(&quot;Heading 1&quot;);\n\nparagraph = doc.createParagraph();\nrun=paragraph.createRun();\nrun.addBreak(BreakType.PAGE);\nrun.setText(&quot;Heading 2&quot;);\nparagraph.setStyle(&quot;Heading 2&quot;);\n\nparagraph = doc.createParagraph();\nrun = paragraph.createRun();\nrun.addBreak(BreakType.PAGE);\nrun.setText(&quot;Heading 3&quot;);\nparagraph.setStyle(&quot;Heading 3&quot;);\n</code></pre>\n<p><code>toc.setInstr(&quot;TOC \\\\h&quot;);</code> just adds an empty line with nothing in it and <code>doc.createTOC();</code> create the header: &quot;Table of Contents&quot; and not a TOC.</p>\n<p>When I put this code at the end of the function, after the creation of the paragraphs, it generates a TOC with &quot;Error: Reference source not found&quot;.</p>\n<pre class=\"lang-java prettyprint-override\"><code>CTSdtBlock block = doc.getDocument().getBody().addNewSdt();\nTOC toc = new TOC(block);\nfor (XWPFParagraph par : doc.getParagraphs()) {\n    String parStyle = par.getStyle();\n    if (parStyle != null &amp;&amp; parStyle.startsWith(&quot;Heading &quot;)) {\n        try {\n            int level = Integer.parseInt(parStyle.substring(&quot;Heading &quot;.length()));\n            toc.addRow(level, par.getText(), 1, &quot;112723803&quot;);\n        } catch (NumberFormatException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>How can I create a TOC that automatically updates when a new paragraph that is header is added to the file? Do I need to set the paragraphs as bookmark?</p>\n"},{"tags":["java","spring","spring-boot","client-server","server-sent-events"],"comments":[{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1675178013,"post_id":75288671,"comment_id":132869982,"body_markdown":"_&quot;my issue is that I can&#39;t store these SseEmitter Objects in-memory, in a production grade code&quot;_ Why?","body":"<i>&quot;my issue is that I can&#39;t store these SseEmitter Objects in-memory, in a production grade code&quot;</i> Why?"}],"answers":[{"tags":[],"owner":{"account_id":13982700,"reputation":696,"user_id":10263616,"display_name":"Viktor Baert"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675155585,"creation_date":1675112640,"answer_id":75290122,"question_id":75288671,"body_markdown":"&gt; However my issue is that I can&#39;t be storing these SseEmitter Objects\r\n&gt; in-memory, in a production grade code\r\n\r\nThere is nothing inherently bad about storing these SSE sessions in a hashmap mapping id key to the emitter as value. (Make sure to handle disconnection / hashmap clean up). \r\n\r\nI don&#39;t think it&#39;s possible to even persist these sessions for your intended purpose. It&#39;s not possible with SSE for the server to initiate the connection with the client.","title":"How to persist a Server Sent Event object into my database?","body":"<blockquote>\n<p>However my issue is that I can't be storing these SseEmitter Objects\nin-memory, in a production grade code</p>\n</blockquote>\n<p>There is nothing inherently bad about storing these SSE sessions in a hashmap mapping id key to the emitter as value. (Make sure to handle disconnection / hashmap clean up).</p>\n<p>I don't think it's possible to even persist these sessions for your intended purpose. It's not possible with SSE for the server to initiate the connection with the client.</p>\n"}],"owner":{"account_id":27319698,"reputation":21,"user_id":20833631,"display_name":"Akshay Thakur"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":600,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1675177990,"creation_date":1675103516,"question_id":75288671,"body_markdown":"I am trying to build a notification system where-in my back-end, upon receiving a webhook from a third party, will notify the front-end of a particular status, and have decided to go ahead with the Server Sent Events implementation in Spring Boot. Having gone through 10s of implementations of the same, I found that the common way of doing it is:\r\n 1. having your client hit a subscription API on your back-end\r\n 2. Create an object of SseEmitter class and store it in an in-memory HashMap or ArrayList\r\n 3. Fetch the events stored in your memory, to send notification when the desired event occurs \r\n\r\nHowever, my issue is that I can&#39;t store these SseEmitter Objects in-memory, in a production grade code. I have tried serializing the object, but upon deserialization a new object of SseEmitter is created and the connection to client is lost. How do I do this gracefully?\r\n\r\n```java\r\n@RestController\r\npublic class EventController {\r\n\r\n  Map&lt;String, SseEmitter&gt; sseEmitters = new ConcurrentHashMap&lt;&gt;();\r\n\r\n  @Autowired\r\n  SerializerUtils serializerUtils;\r\n\r\n  String sseEmitterSerialized = null;\r\n\r\n  @CrossOrigin\r\n  @GetMapping(value=&quot;/subscribe&quot;, consumes = MediaType.ALL_VALUE)\r\n  public SseEmitter subscribe(@RequestParam(value = &quot;tokenId&quot;) String tokenId) throws IOException {\r\n\r\n    DefaultSseEmitter sseEmitter = new DefaultSseEmitter(Long.MAX_VALUE);\r\n    sseEmitter.send(SseEmitter.event().name(&quot;latestEvent&quot;).data(&quot;INITIALIZED&quot;));\r\n    sseEmitter.onCompletion(() -&gt; sseEmitters.remove(sseEmitter));\r\n\r\n    sseEmitters.put(tokenId, sseEmitter);\r\n    return sseEmitter;\r\n  }\r\n\r\n  @CrossOrigin\r\n  @PostMapping(value=&quot;/dispatchEvent&quot;, produces = MediaType.ALL_VALUE)\r\n  public void dispatchToClients(@RequestParam (value = &quot;freshEvent&quot;) String freshEvent, @RequestParam(value = &quot;tokenId&quot;) String tokenId)\r\n      throws IOException, ClassNotFoundException {\r\n\r\n    sseEmitters.get(tokenId).send(SseEmitter.event().name(&quot;latestEvent&quot;).data(freshEvent));\r\n  }\r\n```\r\n\r\nI have tried serializing and conversion to JSON. None of that stuff works. ","title":"How to persist a Server Sent Event object into my database?","body":"<p>I am trying to build a notification system where-in my back-end, upon receiving a webhook from a third party, will notify the front-end of a particular status, and have decided to go ahead with the Server Sent Events implementation in Spring Boot. Having gone through 10s of implementations of the same, I found that the common way of doing it is:</p>\n<ol>\n<li>having your client hit a subscription API on your back-end</li>\n<li>Create an object of SseEmitter class and store it in an in-memory HashMap or ArrayList</li>\n<li>Fetch the events stored in your memory, to send notification when the desired event occurs</li>\n</ol>\n<p>However, my issue is that I can't store these SseEmitter Objects in-memory, in a production grade code. I have tried serializing the object, but upon deserialization a new object of SseEmitter is created and the connection to client is lost. How do I do this gracefully?</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\npublic class EventController {\n\n  Map&lt;String, SseEmitter&gt; sseEmitters = new ConcurrentHashMap&lt;&gt;();\n\n  @Autowired\n  SerializerUtils serializerUtils;\n\n  String sseEmitterSerialized = null;\n\n  @CrossOrigin\n  @GetMapping(value=&quot;/subscribe&quot;, consumes = MediaType.ALL_VALUE)\n  public SseEmitter subscribe(@RequestParam(value = &quot;tokenId&quot;) String tokenId) throws IOException {\n\n    DefaultSseEmitter sseEmitter = new DefaultSseEmitter(Long.MAX_VALUE);\n    sseEmitter.send(SseEmitter.event().name(&quot;latestEvent&quot;).data(&quot;INITIALIZED&quot;));\n    sseEmitter.onCompletion(() -&gt; sseEmitters.remove(sseEmitter));\n\n    sseEmitters.put(tokenId, sseEmitter);\n    return sseEmitter;\n  }\n\n  @CrossOrigin\n  @PostMapping(value=&quot;/dispatchEvent&quot;, produces = MediaType.ALL_VALUE)\n  public void dispatchToClients(@RequestParam (value = &quot;freshEvent&quot;) String freshEvent, @RequestParam(value = &quot;tokenId&quot;) String tokenId)\n      throws IOException, ClassNotFoundException {\n\n    sseEmitters.get(tokenId).send(SseEmitter.event().name(&quot;latestEvent&quot;).data(freshEvent));\n  }\n</code></pre>\n<p>I have tried serializing and conversion to JSON. None of that stuff works.</p>\n"},{"tags":["java","azure","outlook","microsoft-graph-api"],"comments":[{"owner":{"account_id":18314651,"reputation":8673,"user_id":13336683,"display_name":"Carl Zhao"},"score":0,"creation_date":1612338724,"post_id":65845115,"comment_id":116732181,"body_markdown":"Use https://jwt.ms/ to parse your access token and provide screenshots.","body":"Use <a href=\"https://jwt.ms/\" rel=\"nofollow noreferrer\">jwt.ms</a> to parse your access token and provide screenshots."}],"answers":[{"tags":[],"owner":{"account_id":19052506,"reputation":1223,"user_id":13910368,"display_name":"M123"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1675177582,"creation_date":1613720239,"answer_id":66273470,"question_id":65845115,"body_markdown":"I have solved this problem by adding `Calendars.ReadWrite` scope in AuthorizationRequestUrlParameters\r\n\r\n---\r\n\r\nIn the below string `updatedScopes` I had passed null so it&#39;s consider default scope of Microsoft and not asked calendar permission.\r\n\r\n\r\n```\r\nString updatedScopes = scope == null ? &quot;Calendars.ReadWrite&quot; : scope;\r\n\t\t\r\nPublicClientApplication pca = PublicClientApplication.builder(clientId).authority(authority).build();\r\nAuthorizationRequestUrlParameters parameters = AuthorizationRequestUrlParameters\r\n.builder(redirectURL,Collections.singleton(updatedScopes))\r\n.responseMode(ResponseMode.QUERY)\r\n.prompt(Prompt.SELECT_ACCOUNT).state(state).nonce(nonce)\r\n.claimsChallenge(claims).build();\r\n\r\n```","title":"How to grant the client application access to the requested scope in microsoft azure","body":"<p>I have solved this problem by adding <code>Calendars.ReadWrite</code> scope in AuthorizationRequestUrlParameters</p>\n<hr />\n<p>In the below string <code>updatedScopes</code> I had passed null so it's consider default scope of Microsoft and not asked calendar permission.</p>\n<pre><code>String updatedScopes = scope == null ? &quot;Calendars.ReadWrite&quot; : scope;\n        \nPublicClientApplication pca = PublicClientApplication.builder(clientId).authority(authority).build();\nAuthorizationRequestUrlParameters parameters = AuthorizationRequestUrlParameters\n.builder(redirectURL,Collections.singleton(updatedScopes))\n.responseMode(ResponseMode.QUERY)\n.prompt(Prompt.SELECT_ACCOUNT).state(state).nonce(nonce)\n.claimsChallenge(claims).build();\n\n</code></pre>\n"}],"owner":{"account_id":19052506,"reputation":1223,"user_id":13910368,"display_name":"M123"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2725,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":66273470,"answer_count":1,"score":2,"last_activity_date":1675177986,"creation_date":1611318159,"question_id":65845115,"body_markdown":"I&#39;m getting this error\r\n\r\n&gt; com.microsoft.aad.msal4j.MsalInteractionRequiredException:  \r\n&gt;AADSTS70000: The request was denied because one or more scopes requested are unauthorized or expired. The user must first sign in and grant the client application access to the requested scope.\r\n&gt;\r\n&gt; Trace ID: add5eedb-86d5-41bc-bad3-129298e3ca00  \r\n&gt; Correlation ID: 1d2ab508-8ec6-49d7-abaa-d1b8feaedda8\r\n\r\nI register app in Accounts in any organizational directory (Any Azure AD directory - Multitenant) and personal Microsoft accounts (e.g. Skype, Xbox) azure account\r\n\r\n**API permission:**\r\n\r\n  Delegated:\r\n   \r\n - Calendars.Read \r\n - Calendars.ReadWrite\r\n - offline_access \r\n - openid    \r\n - profile         \r\n - User.Read \r\n - User.Read.All\r\n - email \r\n - Mail.Read\r\n \r\nApplication:\r\n  \r\n  - Calendars.Read \r\n  - Calendars.ReadWrite\r\n\r\nI give the required permission and scope (Expose an API) in azure portal still I&#39;m getting this error. I tried to solve this error for more then a days I don&#39;t understand What am I doing wrong?\r\n\r\nIt was not asked calendar&#39;s permission when user login.\r\n\r\nI have used msal4j version 1.6.1 dependency\r\n\r\n[![enter image description here][1]][1]\r\n\r\nHow can I solve this error?\r\n\r\n  [1]: https://i.stack.imgur.com/UT2nf.jpg","title":"How to grant the client application access to the requested scope in microsoft azure","body":"<p>I'm getting this error</p>\n<blockquote>\n<p>com.microsoft.aad.msal4j.MsalInteractionRequiredException:<br />\nAADSTS70000: The request was denied because one or more scopes requested are unauthorized or expired. The user must first sign in and grant the client application access to the requested scope.</p>\n<p>Trace ID: add5eedb-86d5-41bc-bad3-129298e3ca00<br />\nCorrelation ID: 1d2ab508-8ec6-49d7-abaa-d1b8feaedda8</p>\n</blockquote>\n<p>I register app in Accounts in any organizational directory (Any Azure AD directory - Multitenant) and personal Microsoft accounts (e.g. Skype, Xbox) azure account</p>\n<p><strong>API permission:</strong></p>\n<p>Delegated:</p>\n<ul>\n<li>Calendars.Read</li>\n<li>Calendars.ReadWrite</li>\n<li>offline_access</li>\n<li>openid</li>\n<li>profile</li>\n<li>User.Read</li>\n<li>User.Read.All</li>\n<li>email</li>\n<li>Mail.Read</li>\n</ul>\n<p>Application:</p>\n<ul>\n<li>Calendars.Read</li>\n<li>Calendars.ReadWrite</li>\n</ul>\n<p>I give the required permission and scope (Expose an API) in azure portal still I'm getting this error. I tried to solve this error for more then a days I don't understand What am I doing wrong?</p>\n<p>It was not asked calendar's permission when user login.</p>\n<p>I have used msal4j version 1.6.1 dependency</p>\n<p><a href=\"https://i.stack.imgur.com/UT2nf.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UT2nf.jpg\" alt=\"enter image description here\" /></a></p>\n<p>How can I solve this error?</p>\n"},{"tags":["java","keycloak"],"answers":[{"tags":[],"owner":{"account_id":27667397,"reputation":11,"user_id":21118949,"display_name":"tepetrol"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675177004,"creation_date":1675177004,"answer_id":75298997,"question_id":75221106,"body_markdown":"Keycloak just moved this UserStorageProvider into legacy model. However, the legacy model \r\n\r\n&gt; remains the default store in Keycloak 19. \r\n\r\naccording to this [source][1]. \r\nYou can import this legacy model manually like [here][2] and add this dependency. This should solve your imports issue.\r\n\r\n\r\n  [1]: https://www.keycloak.org/2022/07/storage-map\r\n  [2]: https://mvnrepository.com/artifact/org.keycloak/keycloak-model-legacy/19.0.3","title":"Keycloak - Deprecated imports in the User Storage SPI","body":"<p>Keycloak just moved this UserStorageProvider into legacy model. However, the legacy model</p>\n<blockquote>\n<p>remains the default store in Keycloak 19.</p>\n</blockquote>\n<p>according to this <a href=\"https://www.keycloak.org/2022/07/storage-map\" rel=\"nofollow noreferrer\">source</a>.\nYou can import this legacy model manually like <a href=\"https://mvnrepository.com/artifact/org.keycloak/keycloak-model-legacy/19.0.3\" rel=\"nofollow noreferrer\">here</a> and add this dependency. This should solve your imports issue.</p>\n"}],"owner":{"account_id":18761189,"reputation":655,"user_id":17089665,"display_name":"S. Dre"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":321,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675177004,"creation_date":1674561215,"question_id":75221106,"body_markdown":"It seems that KeyCloak has changed quite a good amount last year.\r\n\r\nI am trying to import the `UserStorageProvider` interface in the latest version (20.0.3) but since more or less version 19.0.0 the project doesn&#39;t seem to compile since it is not able to find it.\r\n\r\nI have made quite a research and after taking a good look I am not able to realise what happens. \r\n\r\nThe interface does appear in the official Doc for the latest version: https://www.keycloak.org/docs-api/20.0.3/javadocs/org/keycloak/storage/UserStorageProvider.html\r\n\r\nI was wondering what I am doing wrong since my import line does not work: \r\n\r\n`import org.keycloak.storage.UserStorageProvider;` ","title":"Keycloak - Deprecated imports in the User Storage SPI","body":"<p>It seems that KeyCloak has changed quite a good amount last year.</p>\n<p>I am trying to import the <code>UserStorageProvider</code> interface in the latest version (20.0.3) but since more or less version 19.0.0 the project doesn't seem to compile since it is not able to find it.</p>\n<p>I have made quite a research and after taking a good look I am not able to realise what happens.</p>\n<p>The interface does appear in the official Doc for the latest version: <a href=\"https://www.keycloak.org/docs-api/20.0.3/javadocs/org/keycloak/storage/UserStorageProvider.html\" rel=\"nofollow noreferrer\">https://www.keycloak.org/docs-api/20.0.3/javadocs/org/keycloak/storage/UserStorageProvider.html</a></p>\n<p>I was wondering what I am doing wrong since my import line does not work:</p>\n<p><code>import org.keycloak.storage.UserStorageProvider;</code></p>\n"},{"tags":["java","android","lambda"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":1,"creation_date":1674932882,"post_id":75270120,"comment_id":132821141,"body_markdown":"[Lambda Expressions](https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html)","body":"<a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html\" rel=\"nofollow noreferrer\">Lambda Expressions</a>"}],"answers":[{"tags":[],"owner":{"account_id":27435209,"reputation":544,"user_id":20931211,"display_name":"taiyo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1674935987,"creation_date":1674935448,"answer_id":75270431,"question_id":75270120,"body_markdown":"The second parameter of the `observe` method is a functional interface, thats why you can put a lambda in it. Most likely it will be `Consumer&lt;T&gt;` from the  [java.util.function][1] package because it takes just one argument `beacons`. If you want that lambda removed (i guess you mean replaced) you would need to define a class which implements this functional interface, like:\r\n\r\n    class Helper implements Consumer&lt;Beacon[]&gt; {\r\n        @Override\r\n        public void accept​(Beacon[] beacons) {\r\n            // lambda body here\r\n        }\r\n    }\r\n\r\nand give an instance of the class to `observe`:\r\n\r\n    beaconManager.getRegionViewModel(myRegion).getRangedBeacons().observe(this, new Helper());\r\n\r\nYou could also do it in a more inline fashion with anonymous interface implementations, like so:\r\n\r\n    beaconManager.getRegionViewModel(myRegion).getRangedBeacons().observe(this, new Consumer&lt;Beacon[]&gt;() {\r\n        public void accept(Beacon[] beacons) {\r\n            // lambda body here\r\n        }\r\n    });\r\n\r\nBut now you see there is no point in going this detour if not forced (read Java &lt;8).\r\nJust learn a bit lambda syntax which is basically `() -&gt; {}` and it does all the hassle for you.\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/function/package-summary.html","title":"Remove lambda expression","body":"<p>The second parameter of the <code>observe</code> method is a functional interface, thats why you can put a lambda in it. Most likely it will be <code>Consumer&lt;T&gt;</code> from the  <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/function/package-summary.html\" rel=\"nofollow noreferrer\">java.util.function</a> package because it takes just one argument <code>beacons</code>. If you want that lambda removed (i guess you mean replaced) you would need to define a class which implements this functional interface, like:</p>\n<pre><code>class Helper implements Consumer&lt;Beacon[]&gt; {\n    @Override\n    public void accept​(Beacon[] beacons) {\n        // lambda body here\n    }\n}\n</code></pre>\n<p>and give an instance of the class to <code>observe</code>:</p>\n<pre><code>beaconManager.getRegionViewModel(myRegion).getRangedBeacons().observe(this, new Helper());\n</code></pre>\n<p>You could also do it in a more inline fashion with anonymous interface implementations, like so:</p>\n<pre><code>beaconManager.getRegionViewModel(myRegion).getRangedBeacons().observe(this, new Consumer&lt;Beacon[]&gt;() {\n    public void accept(Beacon[] beacons) {\n        // lambda body here\n    }\n});\n</code></pre>\n<p>But now you see there is no point in going this detour if not forced (read Java &lt;8).\nJust learn a bit lambda syntax which is basically <code>() -&gt; {}</code> and it does all the hassle for you.</p>\n"}],"owner":{"account_id":19678378,"reputation":661,"user_id":14405992,"display_name":"Chris Costa"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1675176756,"accepted_answer_id":75270431,"answer_count":1,"score":-1,"last_activity_date":1675176717,"creation_date":1674932233,"question_id":75270120,"body_markdown":"I am new to lambda expressions and I have this code to scan Eddystone beacons and I want to remove the lambda expression from it. I don&#39;t know exactly how they work. Can anyone help?\r\n\r\n```java\r\nbeaconManager.getRegionViewModel(myRegion).getRangedBeacons().observe(this, beacons -&gt; {\r\n    noBeacons.setText(String.valueOf(beacons.size()));\r\n\r\n    for (Beacon beacon : beacons) {\r\n        if (uuids.contains(beacon))\r\n            continue;\r\n        uuids.add(beacon);\r\n        if (beacon.getServiceUuid() == 0xfeaa &amp;&amp; beacon.getBeaconTypeCode() == 0x00) {\r\n            // This is a Eddystone-UID frame\r\n            Identifier namespaceId = beacon.getId1();\r\n            Identifier instanceId = beacon.getId2();\r\n            logthis(&quot;I see a beacon transmitting namespace id: &quot; + namespaceId +\r\n                    &quot; and instance id: &quot; + instanceId +\r\n                    &quot; approximately &quot; + beacon.getDistance() + &quot; meters away.&quot;);\r\n        }\r\n    }\r\n});\r\n```","title":"Remove lambda expression","body":"<p>I am new to lambda expressions and I have this code to scan Eddystone beacons and I want to remove the lambda expression from it. I don't know exactly how they work. Can anyone help?</p>\n<pre class=\"lang-java prettyprint-override\"><code>beaconManager.getRegionViewModel(myRegion).getRangedBeacons().observe(this, beacons -&gt; {\n    noBeacons.setText(String.valueOf(beacons.size()));\n\n    for (Beacon beacon : beacons) {\n        if (uuids.contains(beacon))\n            continue;\n        uuids.add(beacon);\n        if (beacon.getServiceUuid() == 0xfeaa &amp;&amp; beacon.getBeaconTypeCode() == 0x00) {\n            // This is a Eddystone-UID frame\n            Identifier namespaceId = beacon.getId1();\n            Identifier instanceId = beacon.getId2();\n            logthis(&quot;I see a beacon transmitting namespace id: &quot; + namespaceId +\n                    &quot; and instance id: &quot; + instanceId +\n                    &quot; approximately &quot; + beacon.getDistance() + &quot; meters away.&quot;);\n        }\n    }\n});\n</code></pre>\n"},{"tags":["java","postgresql","spring-boot","spring-data-jpa","hikaricp"],"owner":{"account_id":412450,"reputation":6101,"user_id":785523,"accept_rate":87,"display_name":"tuk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":346,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1675176303,"creation_date":1675176303,"question_id":75298854,"body_markdown":"I am using Hikari Connection Pool with Spring boot. I am using hikari connection pool and postgres with default configs. \r\n\r\nI am seeing lot of warning like below\r\n\r\n    2023-01-31T06:07:54.4313140Z 2023-01-31 06:07:30.439  WARN [supplier,b516974ba1065b35,b516974ba1065b35] 12300 --- [ault-executor-1] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@7d38668e (This connection has been closed.). Possibly consider using a shorter maxLifetime value.\r\n    2023-01-31T06:07:54.4313939Z 2023-01-31 06:07:30.440  WARN [supplier,b516974ba1065b35,b516974ba1065b35] 12300 --- [ault-executor-1] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@7a88b46b (This connection has been closed.). Possibly consider using a shorter maxLifetime value.\r\n\r\nI tried the below things as mentioned [here][1]. Both did not help\r\n\r\n 1. `hikariConfig.addDataSourceProperty(&quot;socketTimeout&quot;,\r\n    hikariConfig.getMaxLifetime() + TimeUnit.SECONDS.toMillis(1));`\r\n 2. `hikariConfig.addDataSourceProperty(&quot;idle_session_timeout&quot;,\r\n    hikariConfig.getMaxLifetime() + TimeUnit.SECONDS.toMillis(1));` - With postgres 14.6\r\n\r\nVersion \r\n\r\n - HikariCP - 4.0.3\r\n - Spring Boot - 2.5.8\r\n - Postgres - 10.7\r\n - org.postgresql:postgresql  - 42.5.1\r\n\r\nI also tried upgrading postgres to the latest 14.6 and spring boot to 2.6.8. But still the same problem.\r\n\r\nCan someone let me know what could be the problem &amp; how to get around this warning? \r\n\r\n\r\n  [1]: https://stackoverflow.com/a/70664694/785523","title":"Hikari CP, Postgres - Warning Logs &quot;Possibly consider using a shorter maxLifetime value&quot;","body":"<p>I am using Hikari Connection Pool with Spring boot. I am using hikari connection pool and postgres with default configs.</p>\n<p>I am seeing lot of warning like below</p>\n<pre><code>2023-01-31T06:07:54.4313140Z 2023-01-31 06:07:30.439  WARN [supplier,b516974ba1065b35,b516974ba1065b35] 12300 --- [ault-executor-1] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@7d38668e (This connection has been closed.). Possibly consider using a shorter maxLifetime value.\n2023-01-31T06:07:54.4313939Z 2023-01-31 06:07:30.440  WARN [supplier,b516974ba1065b35,b516974ba1065b35] 12300 --- [ault-executor-1] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Failed to validate connection org.postgresql.jdbc.PgConnection@7a88b46b (This connection has been closed.). Possibly consider using a shorter maxLifetime value.\n</code></pre>\n<p>I tried the below things as mentioned <a href=\"https://stackoverflow.com/a/70664694/785523\">here</a>. Both did not help</p>\n<ol>\n<li><code>hikariConfig.addDataSourceProperty(&quot;socketTimeout&quot;, hikariConfig.getMaxLifetime() + TimeUnit.SECONDS.toMillis(1));</code></li>\n<li><code>hikariConfig.addDataSourceProperty(&quot;idle_session_timeout&quot;, hikariConfig.getMaxLifetime() + TimeUnit.SECONDS.toMillis(1));</code> - With postgres 14.6</li>\n</ol>\n<p>Version</p>\n<ul>\n<li>HikariCP - 4.0.3</li>\n<li>Spring Boot - 2.5.8</li>\n<li>Postgres - 10.7</li>\n<li>org.postgresql:postgresql  - 42.5.1</li>\n</ul>\n<p>I also tried upgrading postgres to the latest 14.6 and spring boot to 2.6.8. But still the same problem.</p>\n<p>Can someone let me know what could be the problem &amp; how to get around this warning?</p>\n"},{"tags":["java","unit-testing","mockito"],"owner":{"account_id":2121852,"reputation":1019,"user_id":1884937,"accept_rate":52,"display_name":"henrycharles"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675175736,"creation_date":1675175736,"question_id":75298741,"body_markdown":"I am trying to write junit for existing class which i can&#39;t modify but there are two method for which i need to write junit both are using restTemplate but for some reason rest template is not mocking if i  mock it  within a mock static context in junit .\r\n\r\nBut if i Mock globally then getRestTemplateInstance().exchange returning null. Could you please someone correct or point out problem so my test case can achieve 100% coverage\r\n\r\nClass:\r\n  \r\n\r\n        @Service\r\n    public class LocationRestTemplate {\r\n    \r\n        private static final int READ_TIME_OUT = 5000;\r\n    \r\n        private RestTemplate restTemplate;\r\n    \r\n        @Value(&quot;${external-services.api}&quot;)\r\n        private String fallBackApiUrl;\r\n    \r\n    \r\n    \r\n        RestTemplate getRestTemplateInstance() {\r\n            if (this.restTemplate == null) {\r\n                SimpleClientHttpRequestFactory factory = new SimpleClientHttpRequestFactory();\r\n                this.restTemplate = new RestTemplate(clientHttpRequestFactory());\r\n                restTemplate.setRequestFactory(factory);\r\n                List&lt;HttpMessageConverter&lt;?&gt;&gt; messageConverterList = restTemplate.getMessageConverters();\r\n                // Set HTTP Message converter using a JSON implementation.\r\n                MappingJackson2HttpMessageConverter jsonMessageConverter = new MappingJackson2HttpMessageConverter();\r\n                // Add supported media type\r\n                List&lt;MediaType&gt; supportedMediaTypes = new ArrayList&lt;&gt;();\r\n                supportedMediaTypes.add(new MediaType(&quot;text&quot;, &quot;plain&quot;));\r\n                supportedMediaTypes.add(new MediaType(&quot;application&quot;, &quot;json&quot;));\r\n                jsonMessageConverter.setSupportedMediaTypes(supportedMediaTypes);\r\n                messageConverterList.add(jsonMessageConverter);\r\n                restTemplate.setMessageConverters(messageConverterList);\r\n            }\r\n            return restTemplate;\r\n        }\r\n    \r\n        public ExternalSkuInfo getSkuInfoFromExternalService(String store, List&lt;String&gt; skuList) {\r\n            java.net.URI builtUrl = null;\r\n            try {\r\n    \r\n                UriComponentsBuilder builder = UriComponentsBuilder.fromHttpUrl(fallBackApiUrl + &quot;/bays/store/&quot;)\r\n                        .pathSegment(store).path(&quot;/sku&quot;).pathSegment(String.join(&quot;,&quot;, skuList));\r\n                builtUrl = builder.build().encode().toUri();\r\n                ResponseEntity&lt;ExternalSkuInfo&gt; response = getRestTemplateInstance().exchange(builtUrl, HttpMethod.GET,\r\n                        getRequestEntity(), ExternalSkuInfo.class);\r\n                if (response.getStatusCode() == HttpStatus.OK) {\r\n                    return response.getBody();\r\n                }\r\n            } catch (RestClientException e) {\r\n    \r\n            } catch (Exception exception) {\r\n    \r\n            }\r\n            return null;\r\n        }\r\n    \r\n        private ClientHttpRequestFactory clientHttpRequestFactory() {\r\n            HttpComponentsClientHttpRequestFactory factory = new HttpComponentsClientHttpRequestFactory();\r\n            factory.setReadTimeout(READ_TIME_OUT);\r\n            factory.setConnectTimeout(READ_TIME_OUT);\r\n            return factory;\r\n        }\r\n    \r\n         HttpEntity&lt;Object&gt; getRequestEntity() {\r\n            HttpHeaders headers = new HttpHeaders();\r\n            headers.setAccept(Lists.newArrayList(MediaType.APPLICATION_JSON, MediaType.TEXT_PLAIN));\r\n            return new HttpEntity&lt;&gt;(headers);\r\n        }\r\n    \r\n    }\r\n\r\nTest Class \r\n\r\n        public class LocationRestTemplateTest {\r\n    \r\n      @InjectMocks\r\n      private LocationRestTemplate cut;\r\n    \r\n    \r\n      @Before\r\n      public void setUp() {\r\n        MockitoAnnotations.openMocks(this);\r\n      }\r\n    \r\n      @Test\r\n      public void testGetRestTemplateInstance() {\r\n        RestTemplate restTemplate = cut.getRestTemplateInstance();\r\n        Assert.assertNotNull(restTemplate);\r\n      }\r\n    \r\n      @Test(expected = Exception.class)\r\n      public void testGetSkuInfoFromExternalService() {\r\n        RestTemplate restTemplate1 = Mockito.mock(RestTemplate.class);\r\n        try (MockedStatic&lt;UriComponentsBuilder&gt; uriComponentsBuilderMockedStatic = Mockito\r\n          .mockStatic(UriComponentsBuilder.class)) {\r\n          List&lt;String&gt; sku = new ArrayList&lt;&gt;();\r\n          sku.add(&quot;01234&quot;);\r\n          ReflectionTestUtils.setField(cut, &quot;fallBackApiUrl&quot;, &quot;test&quot;);\r\n          UriComponentsBuilder uriComponentsBuilder = Mockito.mock(UriComponentsBuilder.class);\r\n          UriComponents uriComponents = Mockito.mock(UriComponents.class);\r\n          URI uri = Mockito.mock(URI.class);\r\n          RestTemplate restTemplate = Mockito.mock(RestTemplate.class);\r\n          ResponseEntity responseEntity = Mockito.mock(ResponseEntity.class);\r\n          uriComponentsBuilderMockedStatic.when(() -&gt; UriComponentsBuilder.fromHttpUrl(&quot;test/bays/store/&quot;))\r\n            .thenReturn(uriComponentsBuilder);\r\n          Mockito.doReturn(uriComponentsBuilder).when(uriComponentsBuilder).pathSegment(&quot;0123&quot;);\r\n          Mockito.doReturn(uriComponentsBuilder).when(uriComponentsBuilder).path(&quot;/sku&quot;);\r\n          Mockito.doReturn(uriComponentsBuilder).when(uriComponentsBuilder).pathSegment(String.join(&quot;,&quot;, sku));\r\n          Mockito.doReturn(uriComponents).when(uriComponentsBuilder).build();\r\n          Mockito.doReturn(uriComponents).when(uriComponents).encode();\r\n          Mockito.doReturn(uri).when(uriComponents).toUri();\r\n          Mockito.doReturn(responseEntity).when(restTemplate)\r\n            .exchange(uri, HttpMethod.GET, getRequestEntity(), ExternalSkuInfo.class);\r\n          cut.getSkuInfoFromExternalService(&quot;0123&quot;, sku);\r\n        }\r\n      }\r\n    \r\n      HttpEntity&lt;Object&gt; getRequestEntity() {\r\n        HttpHeaders headers = new HttpHeaders();\r\n        headers.setAccept(Lists.newArrayList(MediaType.APPLICATION_JSON, MediaType.TEXT_PLAIN));\r\n        return new HttpEntity&lt;&gt;(headers);\r\n      }\r\n    \r\n    \r\n    }\r\n\r\n","title":"Rest Template dependency not mocked in case of static mock block due to which exchange method returning null","body":"<p>I am trying to write junit for existing class which i can't modify but there are two method for which i need to write junit both are using restTemplate but for some reason rest template is not mocking if i  mock it  within a mock static context in junit .</p>\n<p>But if i Mock globally then getRestTemplateInstance().exchange returning null. Could you please someone correct or point out problem so my test case can achieve 100% coverage</p>\n<p>Class:</p>\n<pre><code>    @Service\npublic class LocationRestTemplate {\n\n    private static final int READ_TIME_OUT = 5000;\n\n    private RestTemplate restTemplate;\n\n    @Value(&quot;${external-services.api}&quot;)\n    private String fallBackApiUrl;\n\n\n\n    RestTemplate getRestTemplateInstance() {\n        if (this.restTemplate == null) {\n            SimpleClientHttpRequestFactory factory = new SimpleClientHttpRequestFactory();\n            this.restTemplate = new RestTemplate(clientHttpRequestFactory());\n            restTemplate.setRequestFactory(factory);\n            List&lt;HttpMessageConverter&lt;?&gt;&gt; messageConverterList = restTemplate.getMessageConverters();\n            // Set HTTP Message converter using a JSON implementation.\n            MappingJackson2HttpMessageConverter jsonMessageConverter = new MappingJackson2HttpMessageConverter();\n            // Add supported media type\n            List&lt;MediaType&gt; supportedMediaTypes = new ArrayList&lt;&gt;();\n            supportedMediaTypes.add(new MediaType(&quot;text&quot;, &quot;plain&quot;));\n            supportedMediaTypes.add(new MediaType(&quot;application&quot;, &quot;json&quot;));\n            jsonMessageConverter.setSupportedMediaTypes(supportedMediaTypes);\n            messageConverterList.add(jsonMessageConverter);\n            restTemplate.setMessageConverters(messageConverterList);\n        }\n        return restTemplate;\n    }\n\n    public ExternalSkuInfo getSkuInfoFromExternalService(String store, List&lt;String&gt; skuList) {\n        java.net.URI builtUrl = null;\n        try {\n\n            UriComponentsBuilder builder = UriComponentsBuilder.fromHttpUrl(fallBackApiUrl + &quot;/bays/store/&quot;)\n                    .pathSegment(store).path(&quot;/sku&quot;).pathSegment(String.join(&quot;,&quot;, skuList));\n            builtUrl = builder.build().encode().toUri();\n            ResponseEntity&lt;ExternalSkuInfo&gt; response = getRestTemplateInstance().exchange(builtUrl, HttpMethod.GET,\n                    getRequestEntity(), ExternalSkuInfo.class);\n            if (response.getStatusCode() == HttpStatus.OK) {\n                return response.getBody();\n            }\n        } catch (RestClientException e) {\n\n        } catch (Exception exception) {\n\n        }\n        return null;\n    }\n\n    private ClientHttpRequestFactory clientHttpRequestFactory() {\n        HttpComponentsClientHttpRequestFactory factory = new HttpComponentsClientHttpRequestFactory();\n        factory.setReadTimeout(READ_TIME_OUT);\n        factory.setConnectTimeout(READ_TIME_OUT);\n        return factory;\n    }\n\n     HttpEntity&lt;Object&gt; getRequestEntity() {\n        HttpHeaders headers = new HttpHeaders();\n        headers.setAccept(Lists.newArrayList(MediaType.APPLICATION_JSON, MediaType.TEXT_PLAIN));\n        return new HttpEntity&lt;&gt;(headers);\n    }\n\n}\n</code></pre>\n<p>Test Class</p>\n<pre><code>    public class LocationRestTemplateTest {\n\n  @InjectMocks\n  private LocationRestTemplate cut;\n\n\n  @Before\n  public void setUp() {\n    MockitoAnnotations.openMocks(this);\n  }\n\n  @Test\n  public void testGetRestTemplateInstance() {\n    RestTemplate restTemplate = cut.getRestTemplateInstance();\n    Assert.assertNotNull(restTemplate);\n  }\n\n  @Test(expected = Exception.class)\n  public void testGetSkuInfoFromExternalService() {\n    RestTemplate restTemplate1 = Mockito.mock(RestTemplate.class);\n    try (MockedStatic&lt;UriComponentsBuilder&gt; uriComponentsBuilderMockedStatic = Mockito\n      .mockStatic(UriComponentsBuilder.class)) {\n      List&lt;String&gt; sku = new ArrayList&lt;&gt;();\n      sku.add(&quot;01234&quot;);\n      ReflectionTestUtils.setField(cut, &quot;fallBackApiUrl&quot;, &quot;test&quot;);\n      UriComponentsBuilder uriComponentsBuilder = Mockito.mock(UriComponentsBuilder.class);\n      UriComponents uriComponents = Mockito.mock(UriComponents.class);\n      URI uri = Mockito.mock(URI.class);\n      RestTemplate restTemplate = Mockito.mock(RestTemplate.class);\n      ResponseEntity responseEntity = Mockito.mock(ResponseEntity.class);\n      uriComponentsBuilderMockedStatic.when(() -&gt; UriComponentsBuilder.fromHttpUrl(&quot;test/bays/store/&quot;))\n        .thenReturn(uriComponentsBuilder);\n      Mockito.doReturn(uriComponentsBuilder).when(uriComponentsBuilder).pathSegment(&quot;0123&quot;);\n      Mockito.doReturn(uriComponentsBuilder).when(uriComponentsBuilder).path(&quot;/sku&quot;);\n      Mockito.doReturn(uriComponentsBuilder).when(uriComponentsBuilder).pathSegment(String.join(&quot;,&quot;, sku));\n      Mockito.doReturn(uriComponents).when(uriComponentsBuilder).build();\n      Mockito.doReturn(uriComponents).when(uriComponents).encode();\n      Mockito.doReturn(uri).when(uriComponents).toUri();\n      Mockito.doReturn(responseEntity).when(restTemplate)\n        .exchange(uri, HttpMethod.GET, getRequestEntity(), ExternalSkuInfo.class);\n      cut.getSkuInfoFromExternalService(&quot;0123&quot;, sku);\n    }\n  }\n\n  HttpEntity&lt;Object&gt; getRequestEntity() {\n    HttpHeaders headers = new HttpHeaders();\n    headers.setAccept(Lists.newArrayList(MediaType.APPLICATION_JSON, MediaType.TEXT_PLAIN));\n    return new HttpEntity&lt;&gt;(headers);\n  }\n\n\n}\n</code></pre>\n"},{"tags":["java","web-services","jakarta-ee","jax-ws"],"answers":[{"tags":[],"owner":{"account_id":62515,"reputation":45036,"user_id":185722,"accept_rate":100,"display_name":"Alexander Pogrebnyak"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1313446332,"creation_date":1313446332,"answer_id":7071421,"question_id":7071366,"body_markdown":"To make your life *simpler*, you may want to consider using JAX-WS framework such as Apache CXF or Apache Axis2.\r\n\r\nHere is the link that describes how to setup WS-Security for Apache CXF -&gt; http://cxf.apache.org/docs/ws-security.html\r\n\r\n**EDIT**\r\nBy the way, the `Authorization` field just uses simple Base64 encoding.\r\nAccording to this ( http://www.motobit.com/util/base64-decoder-encoder.asp ), the decoded value is `german:german`.","title":"Java Web Service client basic authentication","body":"<p>To make your life <em>simpler</em>, you may want to consider using JAX-WS framework such as Apache CXF or Apache Axis2.</p>\n\n<p>Here is the link that describes how to setup WS-Security for Apache CXF -> <a href=\"http://cxf.apache.org/docs/ws-security.html\" rel=\"nofollow\">http://cxf.apache.org/docs/ws-security.html</a></p>\n\n<p><strong>EDIT</strong>\nBy the way, the <code>Authorization</code> field just uses simple Base64 encoding.\nAccording to this ( <a href=\"http://www.motobit.com/util/base64-decoder-encoder.asp\" rel=\"nofollow\">http://www.motobit.com/util/base64-decoder-encoder.asp</a> ), the decoded value is <code>german:german</code>.</p>\n"},{"tags":[],"owner":{"account_id":211184,"reputation":4921,"user_id":463202,"accept_rate":92,"display_name":"Gonzalo Garcia Lasurtegui"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1313524487,"creation_date":1313524487,"answer_id":7084179,"question_id":7071366,"body_markdown":"If you are using a JAX-WS implementation for your client, such as Metro Web Services, the following code shows how to pass username and password in the HTTP headers:\r\n\r\n     MyService port = new MyService();\r\n     MyServiceWS service = port.getMyServicePort();\r\n        \r\n     Map&lt;String, List&lt;String&gt;&gt; credentials = new HashMap&lt;String,List&lt;String&gt;&gt;();\r\n        \r\n     credentials.put(&quot;username&quot;, Collections.singletonList(&quot;username&quot;));\r\n     credentials.put(&quot;password&quot;, Collections.singletonList(&quot;password&quot;));\r\n        \r\n     ((BindingProvider)service).getRequestContext().put(MessageContext.HTTP_REQUEST_HEADERS, credentials);\r\n\r\nThen subsequent calls to the service will be authenticated. Beware that the password is only encoded using Base64, so I encourage you to use other additional mechanism like client certificates to increase security.","title":"Java Web Service client basic authentication","body":"<p>If you are using a JAX-WS implementation for your client, such as Metro Web Services, the following code shows how to pass username and password in the HTTP headers:</p>\n\n<pre><code> MyService port = new MyService();\n MyServiceWS service = port.getMyServicePort();\n\n Map&lt;String, List&lt;String&gt;&gt; credentials = new HashMap&lt;String,List&lt;String&gt;&gt;();\n\n credentials.put(\"username\", Collections.singletonList(\"username\"));\n credentials.put(\"password\", Collections.singletonList(\"password\"));\n\n ((BindingProvider)service).getRequestContext().put(MessageContext.HTTP_REQUEST_HEADERS, credentials);\n</code></pre>\n\n<p>Then subsequent calls to the service will be authenticated. Beware that the password is only encoded using Base64, so I encourage you to use other additional mechanism like client certificates to increase security.</p>\n"},{"tags":[],"owner":{"account_id":10190,"reputation":3578,"user_id":19136,"accept_rate":65,"display_name":"German"},"down_vote_count":3,"up_vote_count":54,"is_accepted":true,"score":51,"last_activity_date":1313540043,"creation_date":1313540043,"answer_id":7086636,"question_id":7071366,"body_markdown":"It turned out that there&#39;s a simple, standard way to achieve what I wanted:\r\n\r\n    import java.net.Authenticator;\r\n    import java.net.PasswordAuthentication;\r\n\r\n    Authenticator myAuth = new Authenticator() \r\n    {\r\n        @Override\r\n        protected PasswordAuthentication getPasswordAuthentication()\r\n        {\r\n            return new PasswordAuthentication(&quot;german&quot;, &quot;german&quot;.toCharArray());\r\n        }\r\n    };\r\n                \r\n    Authenticator.setDefault(myAuth);\r\n\r\nNo custom &quot;sun&quot; classes or external dependencies, and no manually encode anything.\r\n\r\nI&#39;m aware that BASIC security is not, well, secure, but we are also using HTTPS.\r\n","title":"Java Web Service client basic authentication","body":"<p>It turned out that there's a simple, standard way to achieve what I wanted:</p>\n\n<pre><code>import java.net.Authenticator;\nimport java.net.PasswordAuthentication;\n\nAuthenticator myAuth = new Authenticator() \n{\n    @Override\n    protected PasswordAuthentication getPasswordAuthentication()\n    {\n        return new PasswordAuthentication(\"german\", \"german\".toCharArray());\n    }\n};\n\nAuthenticator.setDefault(myAuth);\n</code></pre>\n\n<p>No custom \"sun\" classes or external dependencies, and no manually encode anything.</p>\n\n<p>I'm aware that BASIC security is not, well, secure, but we are also using HTTPS.</p>\n"},{"tags":[],"owner":{"account_id":309056,"reputation":453,"user_id":621302,"display_name":"Avil"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1329224931,"creation_date":1329224931,"answer_id":9277408,"question_id":7071366,"body_markdown":"for `Axis2` client this may be helpful\r\n    \r\n    ...\r\n    serviceStub = new TestBeanServiceStub(&quot;&lt;WEB SERVICE URL&gt;&quot;); // Set your value\r\n    HttpTransportProperties.Authenticator basicAuthenticator = new HttpTransportProperties.Authenticator();\r\n    List&lt;String&gt; authSchemes = new ArrayList&lt;String&gt;();\r\n    authSchemes.add(Authenticator.BASIC);\r\n    basicAuthenticator.setAuthSchemes(authSchemes); \r\n    basicAuthenticator.setUsername(&quot;&lt;UserName&gt;&quot;); // Set your value\r\n    basicAuthenticator.setPassword(&quot;&lt;Password&gt;&quot;); // Set your value\r\n    basicAuthenticator.setPreemptiveAuthentication(true);\r\n    serviceStub._getServiceClient().getOptions().setProperty(org.apache.axis2.transport.http.HTTPConstants.AUTHENTICATE, basicAuthenticator);\r\n    serviceStub._getServiceClient().getOptions().setProperty(org.apache.axis2.transport.http.HTTPConstants.CHUNKED, &quot;false&quot;);\r\n    ...\r\n","title":"Java Web Service client basic authentication","body":"<p>for <code>Axis2</code> client this may be helpful</p>\n\n<pre><code>...\nserviceStub = new TestBeanServiceStub(\"&lt;WEB SERVICE URL&gt;\"); // Set your value\nHttpTransportProperties.Authenticator basicAuthenticator = new HttpTransportProperties.Authenticator();\nList&lt;String&gt; authSchemes = new ArrayList&lt;String&gt;();\nauthSchemes.add(Authenticator.BASIC);\nbasicAuthenticator.setAuthSchemes(authSchemes); \nbasicAuthenticator.setUsername(\"&lt;UserName&gt;\"); // Set your value\nbasicAuthenticator.setPassword(\"&lt;Password&gt;\"); // Set your value\nbasicAuthenticator.setPreemptiveAuthentication(true);\nserviceStub._getServiceClient().getOptions().setProperty(org.apache.axis2.transport.http.HTTPConstants.AUTHENTICATE, basicAuthenticator);\nserviceStub._getServiceClient().getOptions().setProperty(org.apache.axis2.transport.http.HTTPConstants.CHUNKED, \"false\");\n...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8271,"reputation":2534,"user_id":14811,"accept_rate":33,"display_name":"Jonathan Barbero"},"down_vote_count":2,"up_vote_count":92,"is_accepted":false,"score":90,"last_activity_date":1346695047,"creation_date":1346695047,"answer_id":12252282,"question_id":7071366,"body_markdown":"The JAX-WS way for basic authentication is\r\n\r\n\r\n    Service s = new Service();\r\n    Port port = s.getPort();\r\n    \r\n    BindingProvider prov = (BindingProvider)port;\r\n    prov.getRequestContext().put(BindingProvider.USERNAME_PROPERTY, &quot;myusername&quot;);\r\n    prov.getRequestContext().put(BindingProvider.PASSWORD_PROPERTY, &quot;mypassword&quot;);\r\n    \r\n    port.call();\r\n    ","title":"Java Web Service client basic authentication","body":"<p>The JAX-WS way for basic authentication is</p>\n\n<pre><code>Service s = new Service();\nPort port = s.getPort();\n\nBindingProvider prov = (BindingProvider)port;\nprov.getRequestContext().put(BindingProvider.USERNAME_PROPERTY, \"myusername\");\nprov.getRequestContext().put(BindingProvider.PASSWORD_PROPERTY, \"mypassword\");\n\nport.call();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10992545,"reputation":51,"user_id":8075955,"display_name":"Rolando F."},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1537799161,"creation_date":1495929823,"answer_id":44222637,"question_id":7071366,"body_markdown":"This worked for me:\r\n\r\n     BindingProvider bp = (BindingProvider) port;\r\n     Map&lt;String, Object&gt; map = bp.getRequestContext();\r\n     map.put(BindingProvider.USERNAME_PROPERTY, &quot;aspbbo&quot;);\r\n     map.put(BindingProvider.PASSWORD_PROPERTY, &quot;9FFFN6P&quot;);","title":"Java Web Service client basic authentication","body":"<p>This worked for me:</p>\n\n<pre><code> BindingProvider bp = (BindingProvider) port;\n Map&lt;String, Object&gt; map = bp.getRequestContext();\n map.put(BindingProvider.USERNAME_PROPERTY, \"aspbbo\");\n map.put(BindingProvider.PASSWORD_PROPERTY, \"9FFFN6P\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10209126,"reputation":126,"user_id":7536862,"display_name":"Jos&#233; Luis Gonz&#225;lez Vergara"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1499813936,"creation_date":1499813936,"answer_id":45045757,"question_id":7071366,"body_markdown":"Some context additional about basic authentication, it consists in a header which contains the key/value pair:\r\n\r\n***Authorization: Basic Z2VybWFuOmdlcm1hbg==***\r\n\r\nwhere &quot;***Authorization***&quot; is the headers key,\r\nand the headers value has a string ( &quot;***Basic***&quot; word plus ***blank space***) concatenated to &quot;***Z2VybWFuOmdlcm1hbg==***&quot;, which are the *user and password in base 64 joint by double dot*\r\n\r\n    String name = &quot;username&quot;;\r\n    String password = &quot;secret&quot;;\r\n    String authString = name + &quot;:&quot; + password;\r\n    String authStringEnc = new BASE64Encoder().encode(authString.getBytes());\r\n    ...\r\n    objectXXX.header(&quot;Authorization&quot;, &quot;Basic &quot; + authStringEnc);\r\n\r\n\r\n\r\n","title":"Java Web Service client basic authentication","body":"<p>Some context additional about basic authentication, it consists in a header which contains the key/value pair:</p>\n\n<p><strong><em>Authorization: Basic Z2VybWFuOmdlcm1hbg==</em></strong></p>\n\n<p>where \"<strong><em>Authorization</em></strong>\" is the headers key,\nand the headers value has a string ( \"<strong><em>Basic</em></strong>\" word plus <strong><em>blank space</em></strong>) concatenated to \"<strong><em>Z2VybWFuOmdlcm1hbg==</em></strong>\", which are the <em>user and password in base 64 joint by double dot</em></p>\n\n<pre><code>String name = \"username\";\nString password = \"secret\";\nString authString = name + \":\" + password;\nString authStringEnc = new BASE64Encoder().encode(authString.getBytes());\n...\nobjectXXX.header(\"Authorization\", \"Basic \" + authStringEnc);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1448682,"reputation":355,"user_id":1366329,"display_name":"Winter MC"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1566517686,"creation_date":1566517686,"answer_id":57618252,"question_id":7071366,"body_markdown":"If you use JAX-WS, the following works for me:\r\n\r\n        //Get Web service Port\r\n\t\tWSTestService wsService = new WSTestService();\r\n\t\tWSTest wsPort = wsService.getWSTestPort();\r\n\t\t\t\r\n\t\t// Add username and password for Basic Authentication\r\n\t\tMap&lt;String, Object&gt; reqContext = ((BindingProvider) \r\n             wsPort).getRequestContext();\r\n\t\treqContext.put(BindingProvider.USERNAME_PROPERTY, &quot;username&quot;);\r\n\t\t\treqContext.put(BindingProvider.PASSWORD_PROPERTY, &quot;password&quot;);\r\n","title":"Java Web Service client basic authentication","body":"<p>If you use JAX-WS, the following works for me:</p>\n\n<pre><code>    //Get Web service Port\n    WSTestService wsService = new WSTestService();\n    WSTest wsPort = wsService.getWSTestPort();\n\n    // Add username and password for Basic Authentication\n    Map&lt;String, Object&gt; reqContext = ((BindingProvider) \n         wsPort).getRequestContext();\n    reqContext.put(BindingProvider.USERNAME_PROPERTY, \"username\");\n        reqContext.put(BindingProvider.PASSWORD_PROPERTY, \"password\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16854551,"reputation":1,"user_id":12186681,"display_name":"Krishnam Raju"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1573127529,"creation_date":1573125178,"answer_id":58747549,"question_id":7071366,"body_markdown":"The easiest option to get this working is to include Username and Password under &lt;wsse:Security&gt; of request. See sample below. \r\n\r\n    &lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;\r\n    \txmlns:typ=&quot;http://xml.demo.com/types&quot; xmlns:ser=&quot;http://xml.demo.com/location/services&quot;\r\n    \txmlns:typ1=&quot;http://xml.demo.com/location/types&quot;&gt;\r\n    \t&lt;soapenv:Header&gt;\r\n    \t\t&lt;typ:requestHeader&gt;\r\n    \t\t\t&lt;typ:timestamp&gt;?&lt;/typ:timestamp&gt;\r\n    \t\t\t&lt;typ:sourceSystemId&gt;TEST&lt;/typ:sourceSystemId&gt;\r\n    \t\t\t&lt;!--Optional: --&gt;\r\n    \t\t\t&lt;typ:sourceSystemUserId&gt;1&lt;/typ:sourceSystemUserId&gt;\r\n    \t\t\t&lt;typ:sourceServerId&gt;1&lt;/typ:sourceServerId&gt;\r\n    \t\t\t&lt;typ:trackingId&gt;HYD-12345&lt;/typ:trackingId&gt;\r\n    \t\t&lt;/typ:requestHeader&gt;\r\n    \r\n    \t\t&lt;wsse:Security soapenv:mustUnderstand=&quot;1&quot;\r\n    \t\t\txmlns:wsse=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot;&gt;\r\n    \t\t\t&lt;wsse:UsernameToken wsu:Id=&quot;UsernameToken-emmprepaid&quot;\r\n    \t\t\t\txmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;&gt;\r\n    \t\t\t\t&lt;wsse:Username&gt;your-username&lt;/wsse:Username&gt;\r\n    \t\t\t\t&lt;wsse:Password\r\n    \t\t\t\t\tType=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText&quot;&gt;your-password&lt;/wsse:Password&gt;\r\n    \t\t\t&lt;/wsse:UsernameToken&gt;\r\n    \t\t&lt;/wsse:Security&gt;\r\n    \t&lt;/soapenv:Header&gt;\r\n    \t&lt;soapenv:Body&gt;\r\n    \t\t&lt;ser:getLocation&gt;\r\n    \t\t\t&lt;!--Optional: --&gt;\r\n    \t\t\t&lt;ser:GetLocation&gt;\r\n    \t\t\t\t&lt;typ1:locationID&gt;HYD-GoldenTulipsEstates&lt;/typ1:locationID&gt;\r\n    \t\t\t&lt;/ser:GetLocation&gt;\r\n    \t\t&lt;/ser:getLocation&gt;\r\n    \t&lt;/soapenv:Body&gt;\r\n    &lt;/soapenv:Envelope&gt;","title":"Java Web Service client basic authentication","body":"<p>The easiest option to get this working is to include Username and Password under  of request. See sample below. </p>\n\n<pre><code>&lt;soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\"\n    xmlns:typ=\"http://xml.demo.com/types\" xmlns:ser=\"http://xml.demo.com/location/services\"\n    xmlns:typ1=\"http://xml.demo.com/location/types\"&gt;\n    &lt;soapenv:Header&gt;\n        &lt;typ:requestHeader&gt;\n            &lt;typ:timestamp&gt;?&lt;/typ:timestamp&gt;\n            &lt;typ:sourceSystemId&gt;TEST&lt;/typ:sourceSystemId&gt;\n            &lt;!--Optional: --&gt;\n            &lt;typ:sourceSystemUserId&gt;1&lt;/typ:sourceSystemUserId&gt;\n            &lt;typ:sourceServerId&gt;1&lt;/typ:sourceServerId&gt;\n            &lt;typ:trackingId&gt;HYD-12345&lt;/typ:trackingId&gt;\n        &lt;/typ:requestHeader&gt;\n\n        &lt;wsse:Security soapenv:mustUnderstand=\"1\"\n            xmlns:wsse=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\"&gt;\n            &lt;wsse:UsernameToken wsu:Id=\"UsernameToken-emmprepaid\"\n                xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\"&gt;\n                &lt;wsse:Username&gt;your-username&lt;/wsse:Username&gt;\n                &lt;wsse:Password\n                    Type=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText\"&gt;your-password&lt;/wsse:Password&gt;\n            &lt;/wsse:UsernameToken&gt;\n        &lt;/wsse:Security&gt;\n    &lt;/soapenv:Header&gt;\n    &lt;soapenv:Body&gt;\n        &lt;ser:getLocation&gt;\n            &lt;!--Optional: --&gt;\n            &lt;ser:GetLocation&gt;\n                &lt;typ1:locationID&gt;HYD-GoldenTulipsEstates&lt;/typ1:locationID&gt;\n            &lt;/ser:GetLocation&gt;\n        &lt;/ser:getLocation&gt;\n    &lt;/soapenv:Body&gt;\n&lt;/soapenv:Envelope&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7938451,"reputation":652,"user_id":5993488,"display_name":"Radhakrishnan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675175548,"creation_date":1675175548,"answer_id":75298702,"question_id":7071366,"body_markdown":"For me below code works\r\n\r\n            Map&lt;String, Object&gt; requestContext = ((BindingProvider)port).getRequestContext();\r\n            Map&lt;String, List&lt;String&gt;&gt; requestHeaders = new HashMap&lt;String, List&lt;String&gt;&gt;();\r\n            String authString = &quot;&lt;Userid&gt;&quot; + &quot;:&quot; + &quot;&lt;Pwd&gt;&quot;;\r\n            String authorization =  Base64.getEncoder().encodeToString(authString.getBytes());\r\n            requestHeaders.put(&quot;Authorization&quot;, Collections.singletonList(&quot;Basic &quot; + authorization));\r\n            requestContext.put(MessageContext.HTTP_REQUEST_HEADERS, requestHeaders);","title":"Java Web Service client basic authentication","body":"<p>For me below code works</p>\n<pre><code>        Map&lt;String, Object&gt; requestContext = ((BindingProvider)port).getRequestContext();\n        Map&lt;String, List&lt;String&gt;&gt; requestHeaders = new HashMap&lt;String, List&lt;String&gt;&gt;();\n        String authString = &quot;&lt;Userid&gt;&quot; + &quot;:&quot; + &quot;&lt;Pwd&gt;&quot;;\n        String authorization =  Base64.getEncoder().encodeToString(authString.getBytes());\n        requestHeaders.put(&quot;Authorization&quot;, Collections.singletonList(&quot;Basic &quot; + authorization));\n        requestContext.put(MessageContext.HTTP_REQUEST_HEADERS, requestHeaders);\n</code></pre>\n"}],"owner":{"account_id":10190,"reputation":3578,"user_id":19136,"accept_rate":65,"display_name":"German"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":235695,"favorite_count":0,"down_vote_count":0,"up_vote_count":55,"accepted_answer_id":7086636,"answer_count":10,"score":55,"last_activity_date":1675175548,"creation_date":1313445915,"question_id":7071366,"body_markdown":"I have created a JAX-WS Web Service on top of Glassfish which requires basic HTTP authentication.\r\n\r\nNow I want to create a standalone java application client for that Web Service but I don&#39;t have a clue of how to pass the username and password.\r\n\r\nIt works with Eclipse&#39;s Web Service explorer, and examining the wire I found this:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    POST /SnaProvisioning/SnaProvisioningV1_0 HTTP/1.1\r\n    Host: localhost:8080\r\n    Content-Type: text/xml; charset=utf-8\r\n    Content-Length: 311\r\n    Accept: application/soap+xml, application/dime, multipart/related, text/*\r\n    User-Agent: IBM Web Services Explorer\r\n    Cache-Control: no-cache\r\n    Pragma: no-cache\r\n    SOAPAction: &quot;&quot;\r\n    Authorization: Basic Z2VybWFuOmdlcm1hbg==\r\n    Connection: close\r\n\r\n    &lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot; xmlns:q0=&quot;http://ngin.ericsson.com/sna/types/v1.0&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;\r\n      &lt;soapenv:Body&gt;\r\n        &lt;q0:listServiceScripts/&gt;\r\n      &lt;/soapenv:Body&gt;\r\n    &lt;/soapenv:Envelope&gt;\r\n\r\n\r\nHow do I pass the username and password in this &quot;Authorization&quot; header using java code? Is it hashed or something like that? What is the algorithm?\r\n\r\nWithout security involved I have a working standalone java client:\r\n\r\n    SnaProvisioning myPort = new SnaProvisioning_Service().getSnaProvisioningV10Port();\r\n    myPort.listServiceScripts();","title":"Java Web Service client basic authentication","body":"<p>I have created a JAX-WS Web Service on top of Glassfish which requires basic HTTP authentication.</p>\n\n<p>Now I want to create a standalone java application client for that Web Service but I don't have a clue of how to pass the username and password.</p>\n\n<p>It works with Eclipse's Web Service explorer, and examining the wire I found this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>POST /SnaProvisioning/SnaProvisioningV1_0 HTTP/1.1\nHost: localhost:8080\nContent-Type: text/xml; charset=utf-8\nContent-Length: 311\nAccept: application/soap+xml, application/dime, multipart/related, text/*\nUser-Agent: IBM Web Services Explorer\nCache-Control: no-cache\nPragma: no-cache\nSOAPAction: \"\"\nAuthorization: Basic Z2VybWFuOmdlcm1hbg==\nConnection: close\n\n&lt;soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:q0=\"http://ngin.ericsson.com/sna/types/v1.0\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"&gt;\n  &lt;soapenv:Body&gt;\n    &lt;q0:listServiceScripts/&gt;\n  &lt;/soapenv:Body&gt;\n&lt;/soapenv:Envelope&gt;\n</code></pre>\n\n<p>How do I pass the username and password in this \"Authorization\" header using java code? Is it hashed or something like that? What is the algorithm?</p>\n\n<p>Without security involved I have a working standalone java client:</p>\n\n<pre><code>SnaProvisioning myPort = new SnaProvisioning_Service().getSnaProvisioningV10Port();\nmyPort.listServiceScripts();\n</code></pre>\n"},{"tags":["java","windows","gradle","build.gradle","system-properties"],"answers":[{"tags":[],"owner":{"account_id":5218565,"reputation":1034,"user_id":6540591,"display_name":"User51"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675174934,"creation_date":1675174934,"answer_id":75298573,"question_id":75293761,"body_markdown":"To read an env var in gradle, \r\n\r\n - `var myvar = &quot;$System.env.myvar&quot;` \r\n - `System.getenv(&quot;myvar&quot;)`\r\n\r\nAlso, try to avoid special characters such as `.` in env prop names.\r\n\r\nIf you really want to get the domain name, consider executing a windows command and store the output in a string.\r\n&gt; https://stackoverflow.com/questions/11093223/how-to-use-exec-output-in-gradle\r\n\r\nOther options could be...\r\n\r\nCreating `.local` file with no content, adding it to `.gitignore`, and then checking its existence.  It could be created in the local dev machines, but be missing from other places.\r\n\r\nAdding something to the `~/.gradle/gradle.properties` file.  Because this is picked up on the local machine, you can test for it.  But, in other places where it is not set, you wouldn&#39;t see it.","title":"How to get windows domain name in gradle taks?","body":"<p>To read an env var in gradle,</p>\n<ul>\n<li><code>var myvar = &quot;$System.env.myvar&quot;</code></li>\n<li><code>System.getenv(&quot;myvar&quot;)</code></li>\n</ul>\n<p>Also, try to avoid special characters such as <code>.</code> in env prop names.</p>\n<p>If you really want to get the domain name, consider executing a windows command and store the output in a string.</p>\n<blockquote>\n<p><a href=\"https://stackoverflow.com/questions/11093223/how-to-use-exec-output-in-gradle\">How to use exec() output in gradle</a></p>\n</blockquote>\n<p>Other options could be...</p>\n<p>Creating <code>.local</code> file with no content, adding it to <code>.gitignore</code>, and then checking its existence.  It could be created in the local dev machines, but be missing from other places.</p>\n<p>Adding something to the <code>~/.gradle/gradle.properties</code> file.  Because this is picked up on the local machine, you can test for it.  But, in other places where it is not set, you wouldn't see it.</p>\n"}],"owner":{"account_id":10703126,"reputation":552,"user_id":7877771,"display_name":"sachyy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675174934,"creation_date":1675149329,"question_id":75293761,"body_markdown":"I am to switch between DB localhost or a dev server DB depending on the system I am running the code.\r\n\r\nin the build.gradle \r\n\r\n&gt; System.getenv()\r\n\r\n&gt;System.getProperty(&quot;test.property&quot;)\r\nbut this one comes as null.\r\n\r\n2 possible solutions,\r\n     1) set the System varibale\r\n     2) Try some other way to get the domain\r\n\r\nAppreciate your answers \r\n\r\nExpecting a way to get the domain so that i can decide which DB and other scripts to be used.","title":"How to get windows domain name in gradle taks?","body":"<p>I am to switch between DB localhost or a dev server DB depending on the system I am running the code.</p>\n<p>in the build.gradle</p>\n<blockquote>\n<p>System.getenv()</p>\n</blockquote>\n<blockquote>\n<p>System.getProperty(&quot;test.property&quot;)\nbut this one comes as null.</p>\n</blockquote>\n<p>2 possible solutions,\n1) set the System varibale\n2) Try some other way to get the domain</p>\n<p>Appreciate your answers</p>\n<p>Expecting a way to get the domain so that i can decide which DB and other scripts to be used.</p>\n"},{"tags":["java","xml"],"answers":[{"tags":[],"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675171250,"creation_date":1675171250,"answer_id":75297808,"question_id":75296060,"body_markdown":"You can use xpath as follows to read elements by an attribute value:\r\n\r\n\t\tXPath xPath =  XPathFactory.newInstance().newXPath();\r\n\r\n\t\tString expressionJackpotID = &quot;//column[@name=&#39;Jackpot ID&#39;]/text()&quot;;\r\n\t\tString expressionJackpotName = &quot;//column[@name=&#39;Jackpot Name&#39;]/text()&quot;;\r\n\t\t// etc\r\n\t\tString expressionCurrency = &quot;//column[@name=&#39;Currency&#39;]/text()&quot;;\r\n\r\n\t\tXPathExpression compiledExpressionJackpotID = xPath.compile(expressionJackpotID);\r\n\t\tXPathExpression compiledExpressionJackpotName = xPath.compile(expressionJackpotName);\r\n\t\t//etc\r\n\t\tXPathExpression compiledExpressionCurrency = xPath.compile(expressionCurrency);\r\n\r\n\t\tNodeList nodeList = doc.getElementsByTagName(&quot;row&quot;);\r\n\r\n\r\n\t\tfor (int itr = 0; itr &lt; nodeList.getLength(); itr++) {\r\n\t\t\tNode node = nodeList.item(itr);\r\n\r\n\t\t\tList&lt;String&gt; tabInfo = new ArrayList&lt;&gt;();\r\n\t\t\tif (node.getNodeType() == Node.ELEMENT_NODE) {\r\n\t\t\t\tString jackpotId = (String) compiledExpressionJackpotID.evaluate(node, XPathConstants.STRING);\r\n\t\t\t\tString jackpotName = (String) compiledExpressionJackpotName.evaluate(node, XPathConstants.STRING);\r\n\t\t\t\t// etc\r\n\t\t\t\tString currency = (String) compiledExpressionCurrency.evaluate(node, XPathConstants.STRING);\r\n\t\t\t}\r\n\t\t}\r\n","title":"Get specific value of node by attribute value","body":"<p>You can use xpath as follows to read elements by an attribute value:</p>\n<pre><code>    XPath xPath =  XPathFactory.newInstance().newXPath();\n\n    String expressionJackpotID = &quot;//column[@name='Jackpot ID']/text()&quot;;\n    String expressionJackpotName = &quot;//column[@name='Jackpot Name']/text()&quot;;\n    // etc\n    String expressionCurrency = &quot;//column[@name='Currency']/text()&quot;;\n\n    XPathExpression compiledExpressionJackpotID = xPath.compile(expressionJackpotID);\n    XPathExpression compiledExpressionJackpotName = xPath.compile(expressionJackpotName);\n    //etc\n    XPathExpression compiledExpressionCurrency = xPath.compile(expressionCurrency);\n\n    NodeList nodeList = doc.getElementsByTagName(&quot;row&quot;);\n\n\n    for (int itr = 0; itr &lt; nodeList.getLength(); itr++) {\n        Node node = nodeList.item(itr);\n\n        List&lt;String&gt; tabInfo = new ArrayList&lt;&gt;();\n        if (node.getNodeType() == Node.ELEMENT_NODE) {\n            String jackpotId = (String) compiledExpressionJackpotID.evaluate(node, XPathConstants.STRING);\n            String jackpotName = (String) compiledExpressionJackpotName.evaluate(node, XPathConstants.STRING);\n            // etc\n            String currency = (String) compiledExpressionCurrency.evaluate(node, XPathConstants.STRING);\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":4111326,"reputation":47,"user_id":3422485,"display_name":"user3422485"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75297808,"answer_count":1,"score":0,"last_activity_date":1675174585,"creation_date":1675162388,"question_id":75296060,"body_markdown":"    &lt;row id=&quot;1&quot;&gt;\r\n     &lt;column name=&quot;Date&quot;&gt;30.01.2029 00:00:00 +02:00&lt;/column&gt;\r\n     &lt;column name=&quot;Jackpot ID&quot;&gt;sol_3430_32488&lt;/column&gt;\r\n     &lt;column name=&quot;Jackpot Name&quot;&gt;Level1&lt;/column&gt;\r\n     &lt;column name=&quot;Jackpot Value&quot;&gt;0&lt;/column&gt;\r\n     &lt;column name=&quot;Casino Seed&quot;&gt;87.5&lt;/column&gt;\r\n     &lt;column name=&quot;Currency&quot;&gt;USD&lt;/column&gt;\r\n    &lt;/row&gt;\r\n \r\n\r\nI wrote this code which get it, and I think calling with index is not good idea, sometimes xml doesnt contains currency and it fails\r\n\r\n    DocumentBuilderFactory f = DocumentBuilderFactory.newInstance();\r\n\t\tf.setNamespaceAware(false);\r\n\t\tf.setValidating(false);\r\n\t\tDocumentBuilder b = f.newDocumentBuilder();\r\n\t\tURLConnection urlConnection = new URL(url).openConnection();\r\n\t\turlConnection.addRequestProperty(&quot;Accept&quot;, &quot;application/xml&quot;);\r\n\t\tDocument doc = b.parse(urlConnection.getInputStream());\r\n\t\tdoc.getDocumentElement().normalize();\r\n\t\tNodeList nodeList = doc.getElementsByTagName(&quot;row&quot;);\r\n\r\n\r\n\t\tfor (int itr = 0; itr &lt; nodeList.getLength(); itr++) {\r\n\t\t\tNode node = nodeList.item(itr);\r\n\r\n\r\n\t\t\tArrayList&lt;String&gt; tabInfo = new ArrayList&lt;&gt;();\r\n\t\t\tif (node.getNodeType() ==Node.ELEMENT_NODE) {\r\n\t\t\t\tElement eElement = (Element) node;\r\n\r\n\t\t\t\tString data = eElement.getElementsByTagName(&quot;column&quot;).item(0).getTextContent();\r\n\t\t\t\tString jpId = eElement.getElementsByTagName(&quot;column&quot;).item(1).getTextContent();\r\n\t\t\t\tString jpValue = eElement.getElementsByTagName(&quot;column&quot;).item(2).getTextContent();\r\n\t\t\t\tString casinoName = eElement.getElementsByTagName(&quot;column&quot;).item(3).getTextContent();\r\n\t\t\t\tString casinoSeed = eElement.getElementsByTagName(&quot;column&quot;).item(4).getTextContent();\r\n\t\t\t\tString casinoCurrency = eElement.getElementsByTagName(&quot;column&quot;).item(5).getTextContent();\r\n\r\n\r\nis there a way to interact by attributes? if there is Data,jackpot,etc. return it","title":"Get specific value of node by attribute value","body":"<pre><code>&lt;row id=&quot;1&quot;&gt;\n &lt;column name=&quot;Date&quot;&gt;30.01.2029 00:00:00 +02:00&lt;/column&gt;\n &lt;column name=&quot;Jackpot ID&quot;&gt;sol_3430_32488&lt;/column&gt;\n &lt;column name=&quot;Jackpot Name&quot;&gt;Level1&lt;/column&gt;\n &lt;column name=&quot;Jackpot Value&quot;&gt;0&lt;/column&gt;\n &lt;column name=&quot;Casino Seed&quot;&gt;87.5&lt;/column&gt;\n &lt;column name=&quot;Currency&quot;&gt;USD&lt;/column&gt;\n&lt;/row&gt;\n</code></pre>\n<p>I wrote this code which get it, and I think calling with index is not good idea, sometimes xml doesnt contains currency and it fails</p>\n<pre><code>DocumentBuilderFactory f = DocumentBuilderFactory.newInstance();\n    f.setNamespaceAware(false);\n    f.setValidating(false);\n    DocumentBuilder b = f.newDocumentBuilder();\n    URLConnection urlConnection = new URL(url).openConnection();\n    urlConnection.addRequestProperty(&quot;Accept&quot;, &quot;application/xml&quot;);\n    Document doc = b.parse(urlConnection.getInputStream());\n    doc.getDocumentElement().normalize();\n    NodeList nodeList = doc.getElementsByTagName(&quot;row&quot;);\n\n\n    for (int itr = 0; itr &lt; nodeList.getLength(); itr++) {\n        Node node = nodeList.item(itr);\n\n\n        ArrayList&lt;String&gt; tabInfo = new ArrayList&lt;&gt;();\n        if (node.getNodeType() ==Node.ELEMENT_NODE) {\n            Element eElement = (Element) node;\n\n            String data = eElement.getElementsByTagName(&quot;column&quot;).item(0).getTextContent();\n            String jpId = eElement.getElementsByTagName(&quot;column&quot;).item(1).getTextContent();\n            String jpValue = eElement.getElementsByTagName(&quot;column&quot;).item(2).getTextContent();\n            String casinoName = eElement.getElementsByTagName(&quot;column&quot;).item(3).getTextContent();\n            String casinoSeed = eElement.getElementsByTagName(&quot;column&quot;).item(4).getTextContent();\n            String casinoCurrency = eElement.getElementsByTagName(&quot;column&quot;).item(5).getTextContent();\n</code></pre>\n<p>is there a way to interact by attributes? if there is Data,jackpot,etc. return it</p>\n"},{"tags":["java","mysql","spring-boot","mybatis","mybatis-mapper"],"comments":[{"owner":{"account_id":1314580,"reputation":3289,"user_id":1261766,"display_name":"ave"},"score":0,"creation_date":1675145115,"post_id":75292324,"comment_id":132860213,"body_markdown":"Please add the full stack trace to the question. And what does &quot;The SQL query has null values set&quot; mean? Does it mean that there are null columns in the result set?","body":"Please add the full stack trace to the question. And what does &quot;The SQL query has null values set&quot; mean? Does it mean that there are null columns in the result set?"},{"owner":{"account_id":13242807,"reputation":1,"user_id":9562775,"display_name":"ip1234"},"score":0,"creation_date":1675174753,"post_id":75292324,"comment_id":132868769,"body_markdown":"@ave  Hi, I have added the stack trace, and yes, it has columns with null values -thanks!","body":"@ave  Hi, I have added the stack trace, and yes, it has columns with null values -thanks!"},{"owner":{"account_id":1314580,"reputation":3289,"user_id":1261766,"display_name":"ave"},"score":1,"creation_date":1675175512,"post_id":75292324,"comment_id":132869074,"body_markdown":"Is that the entire stack trace? Stack trace usually includes the call stack (class name, method name, line number, etc.). And the SQL in the stack trace is different from the one that you posted (it starts with `WITH ROTATIONS ...`). It might be better if you create and share a small demo project (like [these](https://github.com/harawata/mybatis-issues)) that allows us to reproduce the  exception you are experiencing.","body":"Is that the entire stack trace? Stack trace usually includes the call stack (class name, method name, line number, etc.). And the SQL in the stack trace is different from the one that you posted (it starts with <code>WITH ROTATIONS ...</code>). It might be better if you create and share a small demo project (like <a href=\"https://github.com/harawata/mybatis-issues\" rel=\"nofollow noreferrer\">these</a>) that allows us to reproduce the  exception you are experiencing."}],"owner":{"account_id":13242807,"reputation":1,"user_id":9562775,"display_name":"ip1234"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":374,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675174390,"creation_date":1675134336,"question_id":75292324,"body_markdown":"I&#39;m getting the following error\r\n\r\n&gt; Error Querying database. cannot invoke &quot;Object.hashCode()&quot; because &quot;key&quot; is null\r\n\r\n 1. stack trace: \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    org.mybatis.spring.MyBatisSyste Exception: nested\r\n        exception is org.apache.ibatis.exceptions.Pers istenceException:\r\n        ### Error querying database. Cause: java.lang. NullPointerException: Cannot invoke &quot;Object.hashCode()&quot; because &quot;key&quot; is null\r\n        ### The error may exist in class path resource [SbmtMapper.xml]\r\n        ### The error may involve com.delta.crew.dao.mapper.Subm itMapperlfc.getRotnAndLegs\r\n        ### The error occurred while handling results\r\n        ### SQL: WITH ROTATIONS AS (SELECT OP.EMPL ID AS usrld. &#39;SBMT&#39; AS opType, OVER NB AS version\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    UNION ALL SELECT RTN.*\r\n    FROM ROTATIONS RTN\r\n    ### Cause: java.lang.NullPointerException: Cannot invoke &quot;Obiect.hashCode(&quot; because &quot;key&quot; is null\r\n    at com.delta.crew .dao .SubmitDaolmp-getRotnAndLegs(SubmitDaolmp.java:52) ~[main/:?]\r\n    at com delta.crew da SubmitDaolmp$$FastClassBySpringCGLIB$Sd3034a58,.invoke(&lt;generated&gt;)~[main/:?]\r\n    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)~[spring-core-5.3.10.jar:5.3.101\r\n    at\r\n    org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)\r\n    ~[spring-aop-5.3.10.jar:5.3.101\r\n    at org.springframework.aop.framework.ReflectiveMethodinvocation.proceed(ReflectiveMethodinvocation.java:163)~\r\n    [spring-aop-5.3.10.jar:5.3.101\r\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)~\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nThe error may exist in some mybatis mapper.xml and the error occurred while handling the results of the below SQL query. The SQL query has null values set.\r\n\r\nExample :\r\n\r\nMapper\r\n\r\n```\r\n&lt;resultMap id = &quot;rotsMap&quot; type = SubmitPojo&quot;&gt;\r\n&lt;result column=&quot;ROTATION_ID&quot; property = &quot;rots_id&quot; /&gt;\r\n&lt;result column=&quot;ARRIVAL_TIME&quot; property = &quot;arrTime&quot; /&gt;\r\n&lt;result column=&quot;SBMT_ID&quot; property =&quot;sbmt_id&gt;\r\n```\r\n\r\nSelect statement\r\n\r\n```\r\n&lt;select id=&quot;getRots&quot; resultMap=&quot;rotsMap&quot;&gt;\r\nSELECT NULL AS ROTATION_ID\r\nNULL AS ARRIVAL_TIME\r\nOP.SBMT_ID AS SBMT_ID\r\nFROM ROTATION OP;\r\n&lt;/select&gt;\r\n```\r\n\r\nI tried setting all the mappings correctly. I&#39;m not sure what went wrong","title":"Error querying database. cannot invoke &quot;Object.hashCode()&quot; because &quot;key&quot; is null","body":"<p>I'm getting the following error</p>\n<blockquote>\n<p>Error Querying database. cannot invoke &quot;Object.hashCode()&quot; because &quot;key&quot; is null</p>\n</blockquote>\n<ol>\n<li>stack trace:</li>\n</ol>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>org.mybatis.spring.MyBatisSyste Exception: nested\n    exception is org.apache.ibatis.exceptions.Pers istenceException:\n    ### Error querying database. Cause: java.lang. NullPointerException: Cannot invoke \"Object.hashCode()\" because \"key\" is null\n    ### The error may exist in class path resource [SbmtMapper.xml]\n    ### The error may involve com.delta.crew.dao.mapper.Subm itMapperlfc.getRotnAndLegs\n    ### The error occurred while handling results\n    ### SQL: WITH ROTATIONS AS (SELECT OP.EMPL ID AS usrld. 'SBMT' AS opType, OVER NB AS version</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>UNION ALL SELECT RTN.*\nFROM ROTATIONS RTN\n### Cause: java.lang.NullPointerException: Cannot invoke \"Obiect.hashCode(\" because \"key\" is null\nat com.delta.crew .dao .SubmitDaolmp-getRotnAndLegs(SubmitDaolmp.java:52) ~[main/:?]\nat com delta.crew da SubmitDaolmp$$FastClassBySpringCGLIB$Sd3034a58,.invoke(&lt;generated&gt;)~[main/:?]\nat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)~[spring-core-5.3.10.jar:5.3.101\nat\norg.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)\n~[spring-aop-5.3.10.jar:5.3.101\nat org.springframework.aop.framework.ReflectiveMethodinvocation.proceed(ReflectiveMethodinvocation.java:163)~\n[spring-aop-5.3.10.jar:5.3.101\nat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)~</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>The error may exist in some mybatis mapper.xml and the error occurred while handling the results of the below SQL query. The SQL query has null values set.</p>\n<p>Example :</p>\n<p>Mapper</p>\n<pre><code>&lt;resultMap id = &quot;rotsMap&quot; type = SubmitPojo&quot;&gt;\n&lt;result column=&quot;ROTATION_ID&quot; property = &quot;rots_id&quot; /&gt;\n&lt;result column=&quot;ARRIVAL_TIME&quot; property = &quot;arrTime&quot; /&gt;\n&lt;result column=&quot;SBMT_ID&quot; property =&quot;sbmt_id&gt;\n</code></pre>\n<p>Select statement</p>\n<pre><code>&lt;select id=&quot;getRots&quot; resultMap=&quot;rotsMap&quot;&gt;\nSELECT NULL AS ROTATION_ID\nNULL AS ARRIVAL_TIME\nOP.SBMT_ID AS SBMT_ID\nFROM ROTATION OP;\n&lt;/select&gt;\n</code></pre>\n<p>I tried setting all the mappings correctly. I'm not sure what went wrong</p>\n"},{"tags":["java","mysql","querydsl"],"comments":[{"owner":{"account_id":1203431,"reputation":5728,"user_id":1173638,"accept_rate":67,"display_name":"Adder"},"score":0,"creation_date":1675172120,"post_id":75297656,"comment_id":132867825,"body_markdown":"I found this comment on stack overflow, can someone expand upon it?\nMariaDB: I had to register the function like this: `registerFunction(&quot;add_years&quot;, new SQLFunctionTemplate(StandardBasicTypes.DATE, &quot;DATE_ADD(?1, INTERVAL ?2 YEAR)&quot;));`","body":"I found this comment on stack overflow, can someone expand upon it? MariaDB: I had to register the function like this: <code>registerFunction(&quot;add_years&quot;, new SQLFunctionTemplate(StandardBasicTypes.DATE, &quot;DATE_ADD(?1, INTERVAL ?2 YEAR)&quot;));</code>"}],"owner":{"account_id":1203431,"reputation":5728,"user_id":1173638,"accept_rate":67,"display_name":"Adder"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":171,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675174176,"creation_date":1675170445,"question_id":75297656,"body_markdown":"Working with queryDSL and mySQL:\r\n\r\nI have a field `from` in the `time_check` table to which I want to add `timetrackAutoStop` from the `location` table as hours and then compare it with the current time.\r\n\r\nWe managed to get queryDSL to understand the following code: \r\n\r\n\tif (data.getAutostopTimeExceeded() != null) {   \r\n\t\tQLocationEntity location = QLocationEntity.locationEntity;   \r\n\t\tquery.join(TIME_CHECK.location, location);   \r\n\t\tExpression&lt;LocalDateTime&gt; currentTimeExpr = Expressions.asDateTime(LocalDateTime.now());   \r\n\t\t\tTIME_CHECK.from, Expressions.asNumber(location.timetrackAutoStop));   \r\n\t\tpredicates.add(\r\n\t\t\tExpressions.predicate(Ops.GT, \r\n\t\t\t\tcurrentTimeExpr, \r\n\t\t\t\tExpressions.dateTimeOperation(LocalDateTime.class, \r\n\t\t\t\t\tOps.DateTimeOps.ADD_HOURS, \r\n\t\t\t\t\tTIME_CHECK.from, \r\n\t\t\t\t\tExpressions.asNumber(location.timetrackAutoStop)\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t);\r\n\t}\r\n\r\nHowever it then generates SQL which causes the mySQL database to complain that the `ADD_HOURS` function doesn&#39;t exist.\r\n\r\nIs there are way to get what I&#39;m looking for? I.E. all `time_check_records` older than `now()` minus `timeTrackAutoStop` ? \r\n\r\nUpdate:\r\n\r\nWe tried the following, but get an error message stating: expecting CLOSE, found `locationEntity`:\r\n\r\n\tQLocationEntity qLocationEntity = QLocationEntity.locationEntity;\r\n\tquery.join(TIME_CHECK.location, qLocationEntity);\r\n\tExpression&lt;LocalDateTime&gt; currentTimeExpr = Expressions.asDateTime(LocalDateTime.now());\r\n\tExpression&lt;LocalDateTime&gt; subExpr = Expressions.template(LocalDateTime.class,      \r\n\t\t&quot;DATE_ADD({0}, INTERVAL {1} HOUR)&quot;, \r\n\t\tTIME_CHECK.from, \r\n\t\tqLocationEntity.timetrackAutoStop\r\n\t\t);\r\n\tpredicates.add(Expressions.predicate(Ops.GT, currentTimeExpr, subExpr));\r\n","title":"Comparing a datetime in the database plus an offset with now() in queryDSL","body":"<p>Working with queryDSL and mySQL:</p>\n<p>I have a field <code>from</code> in the <code>time_check</code> table to which I want to add <code>timetrackAutoStop</code> from the <code>location</code> table as hours and then compare it with the current time.</p>\n<p>We managed to get queryDSL to understand the following code:</p>\n<pre><code>if (data.getAutostopTimeExceeded() != null) {   \n    QLocationEntity location = QLocationEntity.locationEntity;   \n    query.join(TIME_CHECK.location, location);   \n    Expression&lt;LocalDateTime&gt; currentTimeExpr = Expressions.asDateTime(LocalDateTime.now());   \n        TIME_CHECK.from, Expressions.asNumber(location.timetrackAutoStop));   \n    predicates.add(\n        Expressions.predicate(Ops.GT, \n            currentTimeExpr, \n            Expressions.dateTimeOperation(LocalDateTime.class, \n                Ops.DateTimeOps.ADD_HOURS, \n                TIME_CHECK.from, \n                Expressions.asNumber(location.timetrackAutoStop)\n            )\n        )\n    );\n}\n</code></pre>\n<p>However it then generates SQL which causes the mySQL database to complain that the <code>ADD_HOURS</code> function doesn't exist.</p>\n<p>Is there are way to get what I'm looking for? I.E. all <code>time_check_records</code> older than <code>now()</code> minus <code>timeTrackAutoStop</code> ?</p>\n<p>Update:</p>\n<p>We tried the following, but get an error message stating: expecting CLOSE, found <code>locationEntity</code>:</p>\n<pre><code>QLocationEntity qLocationEntity = QLocationEntity.locationEntity;\nquery.join(TIME_CHECK.location, qLocationEntity);\nExpression&lt;LocalDateTime&gt; currentTimeExpr = Expressions.asDateTime(LocalDateTime.now());\nExpression&lt;LocalDateTime&gt; subExpr = Expressions.template(LocalDateTime.class,      \n    &quot;DATE_ADD({0}, INTERVAL {1} HOUR)&quot;, \n    TIME_CHECK.from, \n    qLocationEntity.timetrackAutoStop\n    );\npredicates.add(Expressions.predicate(Ops.GT, currentTimeExpr, subExpr));\n</code></pre>\n"},{"tags":["java","selenium","selenium-webdriver","selenium-chromedriver"],"comments":[{"owner":{"account_id":52616,"reputation":1042915,"user_id":157247,"accept_rate":91,"display_name":"T.J. Crowder"},"score":1,"creation_date":1492614023,"post_id":43499266,"comment_id":74053024,"body_markdown":"Possible duplicate of http://stackoverflow.com/questions/21136212/what-are-the-chrome-command-line-switches-parameters#21136213","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/21136212/what-are-the-chrome-command-line-switches-parameters#21136213\" title=\"what are the chrome command line switches parameters%2321136213\">stackoverflow.com/questions/21136212/&hellip;</a>"},{"owner":{"account_id":2772450,"reputation":22416,"user_id":2386774,"display_name":"JeffC"},"score":0,"creation_date":1492621201,"post_id":43499266,"comment_id":74058017,"body_markdown":"Possible duplicate of [What are the Chrome command line switches / parameters?](http://stackoverflow.com/questions/21136212/what-are-the-chrome-command-line-switches-parameters)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/21136212/what-are-the-chrome-command-line-switches-parameters\">What are the Chrome command line switches / parameters?</a>"},{"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1492623091,"post_id":43499266,"comment_id":74059187,"body_markdown":"I can provide you the list I normally work with but as a good practice you should be using the options as per your requirement to keep your code minimum and simple. Moreover​ options class parameters are different for Chrome, Firefox &amp; IE.  Can you let me know your exact requirement to achieve through options class?","body":"I can provide you the list I normally work with but as a good practice you should be using the options as per your requirement to keep your code minimum and simple. Moreover​ options class parameters are different for Chrome, Firefox &amp; IE.  Can you let me know your exact requirement to achieve through options class?"}],"answers":[{"tags":[],"owner":{"account_id":2427689,"reputation":664,"user_id":2119289,"accept_rate":20,"display_name":"Chandra Shekhar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1492615286,"creation_date":1492615286,"answer_id":43499877,"question_id":43499266,"body_markdown":"For the complete list of Chrome Driver arguments, Refer  http://www.assertselenium.com/java/list-of-chrome-driver-command-line-arguments/","title":"Can someone share the complete list of arguments that one can pass in options.addArguments()?","body":"<p>For the complete list of Chrome Driver arguments, Refer  <a href=\"http://www.assertselenium.com/java/list-of-chrome-driver-command-line-arguments/\" rel=\"nofollow noreferrer\">http://www.assertselenium.com/java/list-of-chrome-driver-command-line-arguments/</a></p>\n"},{"tags":[],"owner":{"account_id":8184772,"reputation":331,"user_id":6160894,"accept_rate":78,"display_name":"Indrajit "},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675174166,"creation_date":1675174166,"answer_id":75298402,"question_id":43499266,"body_markdown":"Here is the list of commands for chrome\r\nhttps://peter.sh/experiments/chromium-command-line-switches/","title":"Can someone share the complete list of arguments that one can pass in options.addArguments()?","body":"<p>Here is the list of commands for chrome\n<a href=\"https://peter.sh/experiments/chromium-command-line-switches/\" rel=\"nofollow noreferrer\">https://peter.sh/experiments/chromium-command-line-switches/</a></p>\n"}],"owner":{"account_id":8184772,"reputation":331,"user_id":6160894,"accept_rate":78,"display_name":"Indrajit "},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2080,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":75298402,"answer_count":2,"score":4,"last_activity_date":1675174166,"creation_date":1492613709,"question_id":43499266,"body_markdown":"I have used the following based upon issues/requirements faced:\r\n\r\n**ChromeOptions options = new ChromeOptions();**\r\n\r\n \r\n  \r\n    \r\n\r\n           1. options.addArguments(&quot;--**start-maximized**&quot;);\r\n           2.options.addArguments(&quot;--**disable-web-security**&quot;);\r\n           3. options.addArguments(&quot;--**no-proxy-server**&quot;);\r\n           4. options.addArguments(&quot;--**disable-extensions**&quot;);\r\n           5.options.addArguments(&quot;--**disable-infobars**&quot;);\r\n\r\nSo i want to know what else arguments we can pass? \r\n","title":"Can someone share the complete list of arguments that one can pass in options.addArguments()?","body":"<p>I have used the following based upon issues/requirements faced:</p>\n\n<p><strong>ChromeOptions options = new ChromeOptions();</strong></p>\n\n<pre><code>       1. options.addArguments(\"--**start-maximized**\");\n       2.options.addArguments(\"--**disable-web-security**\");\n       3. options.addArguments(\"--**no-proxy-server**\");\n       4. options.addArguments(\"--**disable-extensions**\");\n       5.options.addArguments(\"--**disable-infobars**\");\n</code></pre>\n\n<p>So i want to know what else arguments we can pass? </p>\n"},{"tags":["java","environment-variables","talend"],"comments":[{"owner":{"account_id":184870,"reputation":118711,"user_id":421195,"accept_rate":83,"display_name":"paulsm4"},"score":3,"creation_date":1668061115,"post_id":74384824,"comment_id":131316763,"body_markdown":"SUGGESTION: Create a .bat file for running Talend.  It will set the correct Windows environment variables (including both %JAVA_HOME% and %PATH%) that point your Java 18 JRE. NOTE: It&#39;s the *JRE* that matters; not the JDK.","body":"SUGGESTION: Create a .bat file for running Talend.  It will set the correct Windows environment variables (including both %JAVA_HOME% and %PATH%) that point your Java 18 JRE. NOTE: It&#39;s the <i>JRE</i> that matters; not the JDK."}],"answers":[{"tags":[],"owner":{"account_id":27666904,"reputation":31,"user_id":21118557,"display_name":"Yomane"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1675173807,"creation_date":1675173807,"answer_id":75298327,"question_id":74384824,"body_markdown":"Edit the .ini file in talend installation directory and change first line from -vm to -vmargs\r\nC:/path/to/java/bin\r\nReplace above path to latest version","title":"Unable to run Talend Open Studio for Data Integration 8.0.1 due to older JAVA_HOME","body":"<p>Edit the .ini file in talend installation directory and change first line from -vm to -vmargs\nC:/path/to/java/bin\nReplace above path to latest version</p>\n"}],"owner":{"account_id":1093238,"reputation":92,"user_id":1087388,"display_name":"Sujay"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":792,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1675173807,"creation_date":1668060779,"question_id":74384824,"body_markdown":"I wanted to run &quot;Talend Open Studio for Data Integration 8.0.1&quot; which giving following error.\r\n[![enter image description here](https://i.stack.imgur.com/ltgTX.jpg)](https://i.stack.imgur.com/ltgTX.jpg)\r\n\r\nI have configured JDK 8 in JAVA_HOME with is my windows level variable. \r\n**I wanted to configure talend to run on latest JDK 18 from local path and not from JAVA_HOME.** \r\n\r\nIs there any way to run talend with other than JAVA_HOME environment variable reference? \r\n\r\n\r\nTried with -vm parameter similar to Eclipse IDE we run with specified Java Path. \r\n\r\n","title":"Unable to run Talend Open Studio for Data Integration 8.0.1 due to older JAVA_HOME","body":"<p>I wanted to run &quot;Talend Open Studio for Data Integration 8.0.1&quot; which giving following error.\n<a href=\"https://i.stack.imgur.com/ltgTX.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ltgTX.jpg\" alt=\"enter image description here\" /></a></p>\n<p>I have configured JDK 8 in JAVA_HOME with is my windows level variable.\n<strong>I wanted to configure talend to run on latest JDK 18 from local path and not from JAVA_HOME.</strong></p>\n<p>Is there any way to run talend with other than JAVA_HOME environment variable reference?</p>\n<p>Tried with -vm parameter similar to Eclipse IDE we run with specified Java Path.</p>\n"},{"tags":["java","mysql","spring-boot","hibernate"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1675171904,"post_id":75297846,"comment_id":132867737,"body_markdown":"That query isn&#39;t even correct as it wouldn&#39;t bind the parameter. Your other method isn&#39;t correct either as your patient field is named `patientId` not `patient` so the query would need to be named `findByPatientId_Id`. But why first retrieve the patient, something like `findByPatientIdNin` as a method in your `MedicalHistoryRepository` should work, without needing to retrieve the patient.","body":"That query isn&#39;t even correct as it wouldn&#39;t bind the parameter. Your other method isn&#39;t correct either as your patient field is named <code>patientId</code> not <code>patient</code> so the query would need to be named <code>findByPatientId_Id</code>. But why first retrieve the patient, something like <code>findByPatientIdNin</code> as a method in your <code>MedicalHistoryRepository</code> should work, without needing to retrieve the patient."},{"owner":{"account_id":26952196,"reputation":23,"user_id":20521229,"display_name":"TechNewPy"},"score":0,"creation_date":1675172859,"post_id":75297846,"comment_id":132868069,"body_markdown":"@M.Deinum I tried findByPatientId_Id but the JPA doesn&#39;t recognize the Id part !!","body":"@M.Deinum I tried findByPatientId_Id but the JPA doesn&#39;t recognize the Id part !!"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1675173477,"post_id":75297846,"comment_id":132868291,"body_markdown":"I don&#39;t really get that comment. But as stated you probably should be using the `findByPatientIdNin` method instead of retrieving the `patient` just for the `id`.","body":"I don&#39;t really get that comment. But as stated you probably should be using the <code>findByPatientIdNin</code> method instead of retrieving the <code>patient</code> just for the <code>id</code>."}],"answers":[{"tags":[],"owner":{"account_id":3740663,"reputation":515,"user_id":3110505,"accept_rate":61,"display_name":"cadmy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675172514,"creation_date":1675172039,"answer_id":75297959,"question_id":75297846,"body_markdown":"Now you are requesting &quot;give me medical_history where id = patient_id&quot; and getting only one result row.\r\n\r\nYou need to add a colon to the query to set a parameter to fix a result\r\n\r\n    value = &quot;SELECT * FROM medical_history WHERE patient_id = :id&quot;\r\n","title":"I&#39;m receiving one object using findAllBy in springBoot","body":"<p>Now you are requesting &quot;give me medical_history where id = patient_id&quot; and getting only one result row.</p>\n<p>You need to add a colon to the query to set a parameter to fix a result</p>\n<pre><code>value = &quot;SELECT * FROM medical_history WHERE patient_id = :id&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18216249,"reputation":105,"user_id":13257885,"display_name":"Matthieu Rioual"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675173403,"creation_date":1675172898,"answer_id":75298133,"question_id":75297846,"body_markdown":"Look for JPQL, it&#39;s java persistancy query language and spring is automatically turning your @query into it. Spring is also supporting spEL you can also have a look to it here : https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query.spel-expressions where you can see than you can grab your parameters ever with ?number or with :name or putting @Param(&quot;name&quot;) into your parameters definition. As said before there is multiple ways to receive a parameter in you query but certainly not like you previously did. \r\nThat&#39;s why you don&#39;t receive anything.","title":"I&#39;m receiving one object using findAllBy in springBoot","body":"<p>Look for JPQL, it's java persistancy query language and spring is automatically turning your @query into it. Spring is also supporting spEL you can also have a look to it here : <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query.spel-expressions\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query.spel-expressions</a> where you can see than you can grab your parameters ever with ?number or with :name or putting @Param(&quot;name&quot;) into your parameters definition. As said before there is multiple ways to receive a parameter in you query but certainly not like you previously did.\nThat's why you don't receive anything.</p>\n"}],"owner":{"account_id":26952196,"reputation":23,"user_id":20521229,"display_name":"TechNewPy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1675173403,"creation_date":1675171419,"question_id":75297846,"body_markdown":"I&#39;m trying to fetch all rows that have the same patient_id, so I&#39;m doing findAllByPatientId. But I&#39;m always receiving one object in the Listinstead of all the rows.\r\n\r\n```java\r\n\r\n@Entity\r\n@Getter\r\n@Setter\r\n\r\npublic class MedicalHistory extends BaseEntity {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;id&quot;)\r\n    private Long id;\r\n@ManyToOne\r\n@JoinColumn(name = &quot;operator_id&quot;)\r\nprivate MedicalOperator medicalOperatorId;\r\n\r\n\r\n@ManyToOne\r\n@JoinColumn(name = &quot;illness_id&quot;)\r\nprivate Illness illnessId;\r\n\r\n@ManyToOne\r\n@JoinColumn(name= &quot;patientId&quot;)\r\nprivate Patient patientId;\r\n}\r\n```\r\n\r\n```java\r\npublic List&lt;MedicalHistory&gt; getPatientMedicalRecords(PatientDto patientDto) {\r\n\r\n    Optional&lt;Patient&gt; getPatient = patientRepository.findByNin(patientDto.getNin());\r\n    Long patientId = getPatient.get().getPatientId();\r\n\r\n    return medicalHistoryRepository.findAllByPatientId(patientId);\r\n}\r\n```\r\n\r\nI want to receive multiple rows using the patient_id but instead, I&#39;m always getting one !!.\r\nI tried native query and hibernate but nothing is working.\r\n\r\n```java\r\npublic interface MedicalHistoryRepository extends JpaRepository&lt;MedicalHistory, Long&gt; {\r\n\r\n    //     List&lt;MedicalHistory&gt; findAllByPatientId(Long id);\r\n  ArrayList&lt;MedicalHistory&gt; findMedicalHistoriesByPatientId(Long id);\r\n\r\n\r\n  @Query(value = &quot;SELECT * FROM medical_history WHERE patient_id = id&quot;,nativeQuery = true)\r\n  List&lt;MedicalHistory&gt; findAllByPatientId(Long id);\r\n}\r\n```\r\n\r\n\r\n","title":"I&#39;m receiving one object using findAllBy in springBoot","body":"<p>I'm trying to fetch all rows that have the same patient_id, so I'm doing findAllByPatientId. But I'm always receiving one object in the Listinstead of all the rows.</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@Entity\n@Getter\n@Setter\n\npublic class MedicalHistory extends BaseEntity {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;id&quot;)\n    private Long id;\n@ManyToOne\n@JoinColumn(name = &quot;operator_id&quot;)\nprivate MedicalOperator medicalOperatorId;\n\n\n@ManyToOne\n@JoinColumn(name = &quot;illness_id&quot;)\nprivate Illness illnessId;\n\n@ManyToOne\n@JoinColumn(name= &quot;patientId&quot;)\nprivate Patient patientId;\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public List&lt;MedicalHistory&gt; getPatientMedicalRecords(PatientDto patientDto) {\n\n    Optional&lt;Patient&gt; getPatient = patientRepository.findByNin(patientDto.getNin());\n    Long patientId = getPatient.get().getPatientId();\n\n    return medicalHistoryRepository.findAllByPatientId(patientId);\n}\n</code></pre>\n<p>I want to receive multiple rows using the patient_id but instead, I'm always getting one !!.\nI tried native query and hibernate but nothing is working.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface MedicalHistoryRepository extends JpaRepository&lt;MedicalHistory, Long&gt; {\n\n    //     List&lt;MedicalHistory&gt; findAllByPatientId(Long id);\n  ArrayList&lt;MedicalHistory&gt; findMedicalHistoriesByPatientId(Long id);\n\n\n  @Query(value = &quot;SELECT * FROM medical_history WHERE patient_id = id&quot;,nativeQuery = true)\n  List&lt;MedicalHistory&gt; findAllByPatientId(Long id);\n}\n</code></pre>\n"},{"tags":["java","spring","mongodb","spring-boot","exception"],"comments":[{"owner":{"account_id":374094,"reputation":6654,"user_id":724109,"accept_rate":100,"display_name":"Avishek Bhattacharya"},"score":1,"creation_date":1675174620,"post_id":75298240,"comment_id":132868711,"body_markdown":"Can you share how are you creating the mongo client? I mean the connection string etc. Also would be good to check if the mongo cluster is working or not. Please ensure if you are using SSL connection, you have certificate, username password added correctly while creating the mongo client","body":"Can you share how are you creating the mongo client? I mean the connection string etc. Also would be good to check if the mongo cluster is working or not. Please ensure if you are using SSL connection, you have certificate, username password added correctly while creating the mongo client"},{"owner":{"account_id":3631143,"reputation":55363,"user_id":3027266,"accept_rate":75,"display_name":"Wernfried Domscheit"},"score":0,"creation_date":1675175074,"post_id":75298240,"comment_id":132868895,"body_markdown":"Did you initiate the replica set?","body":"Did you initiate the replica set?"}],"owner":{"account_id":26686412,"reputation":41,"user_id":20295668,"display_name":"wonka"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":238,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675173378,"creation_date":1675173378,"question_id":75298240,"body_markdown":"I get this error \r\n\r\n&gt; com.mongodb.MongoTimeoutException: Timed out after 30000 ms while\r\n&gt; waiting for a server that matches PrimaryServerSelector. Client view\r\n&gt; of cluster state is { type=UNKNOWN, state=CONNECTING,\r\n&gt; exception={com.mongodb.MongoSocketOpenException: Exception opening\r\n&gt; socket}, caused by {java.net.ConnectException: Connection refused:\r\n&gt; connect}}]\r\n\r\n after third line of below code\r\n\r\n     MongoCollection&lt;Document&gt; grid = mongodb.getCollection(&quot;grid&quot;);\r\n     Document doc = Document.parse(json);\r\n     grid.insertOne(doc);\r\n\r\nHow can I resolve it?","title":"MongoTimeoutException: Timed out after 30000 ms while waiting for a server that matches PrimaryServerSelector","body":"<p>I get this error</p>\n<blockquote>\n<p>com.mongodb.MongoTimeoutException: Timed out after 30000 ms while\nwaiting for a server that matches PrimaryServerSelector. Client view\nof cluster state is { type=UNKNOWN, state=CONNECTING,\nexception={com.mongodb.MongoSocketOpenException: Exception opening\nsocket}, caused by {java.net.ConnectException: Connection refused:\nconnect}}]</p>\n</blockquote>\n<p>after third line of below code</p>\n<pre><code> MongoCollection&lt;Document&gt; grid = mongodb.getCollection(&quot;grid&quot;);\n Document doc = Document.parse(json);\n grid.insertOne(doc);\n</code></pre>\n<p>How can I resolve it?</p>\n"},{"tags":["java","lambda","logic","fibonacci"],"answers":[{"tags":[],"owner":{"account_id":5823420,"reputation":785,"user_id":6656833,"display_name":"Pavel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675146027,"creation_date":1675146027,"answer_id":75293335,"question_id":75293086,"body_markdown":"Stream `iterate` takes 2 parameters, the seed, which is the first value and unary operator which defines how to generate the next value based on the previous one. The seed in the case is an array of two elements 0 and 1. The operator takes the second value puts in into the first place and sums the first and second to the second place, so `0, 1` -&gt; `1, 1`, `1,1` -&gt; `1, 2`, `1, 2` -&gt; `2, 3` and so on. The `map` function then takes the first value from each array which results in the fibonacci sequence. ","title":"I need an explanation for the Fibonacci Sequence in a lambda expression","body":"<p>Stream <code>iterate</code> takes 2 parameters, the seed, which is the first value and unary operator which defines how to generate the next value based on the previous one. The seed in the case is an array of two elements 0 and 1. The operator takes the second value puts in into the first place and sums the first and second to the second place, so <code>0, 1</code> -&gt; <code>1, 1</code>, <code>1,1</code> -&gt; <code>1, 2</code>, <code>1, 2</code> -&gt; <code>2, 3</code> and so on. The <code>map</code> function then takes the first value from each array which results in the fibonacci sequence.</p>\n"},{"tags":[],"owner":{"account_id":19934545,"reputation":554,"user_id":14607529,"display_name":"ODDminus1"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675146211,"creation_date":1675146211,"answer_id":75293364,"question_id":75293086,"body_markdown":"Stream::iterate is a method which generates values based on the initial condition (the first parameter) and UnaryOperator (the second parameter). So to break it down:\r\n\r\n`new Long[] {0L, 1L}` is your initial value. These are the first two elements of the fibonacci sequence. The first element emitted from the stream is this value, i.e. a list containing two elements.\r\n\r\n`p -&gt; new Long[] {p[1], p[0]+p[1]}` is the function which is applied to your initial value at the first iteration, then applied to the following elements on later iterations. This follows the fibonacci sequence two values at a time, which is convenient as the next element is the sum of the previous two elements.\r\n\r\n`.map(p -&gt; p[0])` only serves to extract the first element from the value emitted by the Stream::iterate method.","title":"I need an explanation for the Fibonacci Sequence in a lambda expression","body":"<p>Stream::iterate is a method which generates values based on the initial condition (the first parameter) and UnaryOperator (the second parameter). So to break it down:</p>\n<p><code>new Long[] {0L, 1L}</code> is your initial value. These are the first two elements of the fibonacci sequence. The first element emitted from the stream is this value, i.e. a list containing two elements.</p>\n<p><code>p -&gt; new Long[] {p[1], p[0]+p[1]}</code> is the function which is applied to your initial value at the first iteration, then applied to the following elements on later iterations. This follows the fibonacci sequence two values at a time, which is convenient as the next element is the sum of the previous two elements.</p>\n<p><code>.map(p -&gt; p[0])</code> only serves to extract the first element from the value emitted by the Stream::iterate method.</p>\n"},{"tags":[],"owner":{"account_id":5306592,"reputation":810,"user_id":4234254,"display_name":"anqit"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675146569,"creation_date":1675146569,"answer_id":75293395,"question_id":75293086,"body_markdown":"`Stream.iterate` is used to generate an infinite stream, from which you can request any number of values.\r\nIt generates the stream using two parameters, an initial seed and a generator function that uses the previous element of the stream to create the next element.\r\n\r\nSo looking at your expression:\r\n```java\r\nStream.iterate(new Long[] {0L, 1L}, p -&gt; new Long[] {p[1], p[0]+p[1]}).map(p -&gt; p[0]);\r\n```\r\n\r\nThe seed value, and first value emitted from this stream, is `new Long[] {0L, 1L}`, an array of the first two values of the Fibonacci sequence.\r\n\r\nThe generator function, which operates on the previous value of the stream and produces the next value, is `p -&gt; new Long[] {p[1], p[0]+p[1]}`. This is doing the Fibonacci calculation. It takes the previous array `p` and creates a new one, where the second item in `p` becomes the new first value, and the new second value is the sum of the 2 previous values.\r\n\r\nIt is necessary to store both values because the Fibonacci sequence depends on two previous values, so the generator function needs both to be able to calculate the next value. However, it seems that the user of this stream is only interested in the next Fibonacci number, not an array of two values. Thus, the `map` call, `.map(p -&gt; p[0])`, which is taking the stream of arrays and turning it into a stream of just a single number.\r\n\r\nThe first couple of iterations would go something like the following. When the  first value is requested from the stream, the iterator stream returns the seed, `{0, 1}`, which is then mapped to just first value of the array, so the whole stream emits `0`.\r\n\r\nAfter this, we use the generator function to produce the next values. So when the second number is requested, the iterator stream calls the generator on the seed value, which results in `{1, 1}`. After `map`ping, the stream then emits `1`.\r\n\r\nSimilarly, the third number emitted is produced by calling the generator on the second value, which yields `{1, 2}`, and then `map`s to the first element, `1`.\r\nThe fourth iterated value is `{2, 3}`, `map`ping to the first element results in `2`, and so on...\r\n","title":"I need an explanation for the Fibonacci Sequence in a lambda expression","body":"<p><code>Stream.iterate</code> is used to generate an infinite stream, from which you can request any number of values.\nIt generates the stream using two parameters, an initial seed and a generator function that uses the previous element of the stream to create the next element.</p>\n<p>So looking at your expression:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Stream.iterate(new Long[] {0L, 1L}, p -&gt; new Long[] {p[1], p[0]+p[1]}).map(p -&gt; p[0]);\n</code></pre>\n<p>The seed value, and first value emitted from this stream, is <code>new Long[] {0L, 1L}</code>, an array of the first two values of the Fibonacci sequence.</p>\n<p>The generator function, which operates on the previous value of the stream and produces the next value, is <code>p -&gt; new Long[] {p[1], p[0]+p[1]}</code>. This is doing the Fibonacci calculation. It takes the previous array <code>p</code> and creates a new one, where the second item in <code>p</code> becomes the new first value, and the new second value is the sum of the 2 previous values.</p>\n<p>It is necessary to store both values because the Fibonacci sequence depends on two previous values, so the generator function needs both to be able to calculate the next value. However, it seems that the user of this stream is only interested in the next Fibonacci number, not an array of two values. Thus, the <code>map</code> call, <code>.map(p -&gt; p[0])</code>, which is taking the stream of arrays and turning it into a stream of just a single number.</p>\n<p>The first couple of iterations would go something like the following. When the  first value is requested from the stream, the iterator stream returns the seed, <code>{0, 1}</code>, which is then mapped to just first value of the array, so the whole stream emits <code>0</code>.</p>\n<p>After this, we use the generator function to produce the next values. So when the second number is requested, the iterator stream calls the generator on the seed value, which results in <code>{1, 1}</code>. After <code>map</code>ping, the stream then emits <code>1</code>.</p>\n<p>Similarly, the third number emitted is produced by calling the generator on the second value, which yields <code>{1, 2}</code>, and then <code>map</code>s to the first element, <code>1</code>.\nThe fourth iterated value is <code>{2, 3}</code>, <code>map</code>ping to the first element results in <code>2</code>, and so on...</p>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675173291,"creation_date":1675172087,"answer_id":75297970,"question_id":75293086,"body_markdown":"[Stream.iterate()](https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/stream/Stream.html#iterate(T,java.util.function.UnaryOperator)) takes an initial seed (here, the long array of `{0,1}`) and a [UnaryOperator](https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/function/UnaryOperator.html).\r\n\r\nAfter setting the seed to the long array of `{0,1}`, each subsequent iterative invocation of the `UnaryOperator` creates a `new long array` using the values of the previous array as follows:\r\n- sets *new* `p[0]` to *previous* `p[1]`.\r\n- and  sets *new* `p[1]` to sum of *previous* `p[0]` + *previous* `p[1]`.\r\n- it then maps to `p[0]` to get that value as the desired term\r\n\r\nIf you run the following you can see how it prints the successive creations of the array and the mapped value.\r\n```\r\nStream.iterate(new Long[]{0L,1L}, p -&gt; new Long[]{p[1],p[0] + p[1]})\r\n       .limit(10)\r\n       .peek(arr -&gt; System.out.print(&quot;p=&quot;+Arrays.toString(arr) + &quot; --&gt; &quot;))\r\n       .map(p -&gt; &quot;p[0] = &quot;+p[0]).forEach(System.out::println);\r\n```\r\nprints\r\n```\r\np=[0, 1] --&gt; p[0] = 0\r\np=[1, 1] --&gt; p[0] = 1\r\np=[1, 2] --&gt; p[0] = 1\r\np=[2, 3] --&gt; p[0] = 2\r\np=[3, 5] --&gt; p[0] = 3\r\np=[5, 8] --&gt; p[0] = 5\r\np=[8, 13] --&gt; p[0] = 8\r\np=[13, 21] --&gt; p[0] = 13\r\np=[21, 34] --&gt; p[0] = 21\r\np=[34, 55] --&gt; p[0] = 34\r\n\r\n","title":"I need an explanation for the Fibonacci Sequence in a lambda expression","body":"<p><a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/stream/Stream.html#iterate(T,java.util.function.UnaryOperator)\" rel=\"nofollow noreferrer\">Stream.iterate()</a> takes an initial seed (here, the long array of <code>{0,1}</code>) and a <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/function/UnaryOperator.html\" rel=\"nofollow noreferrer\">UnaryOperator</a>.</p>\n<p>After setting the seed to the long array of <code>{0,1}</code>, each subsequent iterative invocation of the <code>UnaryOperator</code> creates a <code>new long array</code> using the values of the previous array as follows:</p>\n<ul>\n<li>sets <em>new</em> <code>p[0]</code> to <em>previous</em> <code>p[1]</code>.</li>\n<li>and  sets <em>new</em> <code>p[1]</code> to sum of <em>previous</em> <code>p[0]</code> + <em>previous</em> <code>p[1]</code>.</li>\n<li>it then maps to <code>p[0]</code> to get that value as the desired term</li>\n</ul>\n<p>If you run the following you can see how it prints the successive creations of the array and the mapped value.</p>\n<pre><code>Stream.iterate(new Long[]{0L,1L}, p -&gt; new Long[]{p[1],p[0] + p[1]})\n       .limit(10)\n       .peek(arr -&gt; System.out.print(&quot;p=&quot;+Arrays.toString(arr) + &quot; --&gt; &quot;))\n       .map(p -&gt; &quot;p[0] = &quot;+p[0]).forEach(System.out::println);\n</code></pre>\n<p>prints</p>\n<pre><code>p=[0, 1] --&gt; p[0] = 0\np=[1, 1] --&gt; p[0] = 1\np=[1, 2] --&gt; p[0] = 1\np=[2, 3] --&gt; p[0] = 2\np=[3, 5] --&gt; p[0] = 3\np=[5, 8] --&gt; p[0] = 5\np=[8, 13] --&gt; p[0] = 8\np=[13, 21] --&gt; p[0] = 13\np=[21, 34] --&gt; p[0] = 21\np=[34, 55] --&gt; p[0] = 34\n\n</code></pre>\n"}],"owner":{"account_id":24485103,"reputation":1,"user_id":18402907,"display_name":"Jo&#227;o Victor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":87,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":4,"score":-1,"last_activity_date":1675173291,"creation_date":1675143670,"question_id":75293086,"body_markdown":"```\r\nStream.iterate(new Long[] {0L, 1L}, p -&gt; new Long[] {p[1], p[0]+p[1]}).map(p -&gt; p[0]);\r\n```\r\nCan someone explain the logic of this lambda expression to me?\r\n\r\n\r\nI&#39;m trying to mentally debug the Fibonacci Sequence in a lambda expression but I&#39;m really not getting it. There&#39;s no useful reason, I really just want to understand for my own learning, I&#39;m learning lambda expressions in college (I wrote this code by myself and I still don&#39;t understand it)\r\n\r\n\r\nI know there are better ways to do this, but I want to understand the logic that I accidentally did and it worked","title":"I need an explanation for the Fibonacci Sequence in a lambda expression","body":"<pre><code>Stream.iterate(new Long[] {0L, 1L}, p -&gt; new Long[] {p[1], p[0]+p[1]}).map(p -&gt; p[0]);\n</code></pre>\n<p>Can someone explain the logic of this lambda expression to me?</p>\n<p>I'm trying to mentally debug the Fibonacci Sequence in a lambda expression but I'm really not getting it. There's no useful reason, I really just want to understand for my own learning, I'm learning lambda expressions in college (I wrote this code by myself and I still don't understand it)</p>\n<p>I know there are better ways to do this, but I want to understand the logic that I accidentally did and it worked</p>\n"},{"tags":["java","html","jsoup"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":1,"creation_date":1675171979,"post_id":75297893,"comment_id":132867756,"body_markdown":"JSoup&#39;s `Element` lets you [rename](https://jsoup.org/apidocs/org/jsoup/nodes/Element.html#tagName(java.lang.String)) the tag. Have you attempted anything yet?","body":"JSoup&#39;s <code>Element</code> lets you <a href=\"https://jsoup.org/apidocs/org/jsoup/nodes/Element.html#tagName(java.lang.String)\" rel=\"nofollow noreferrer\">rename</a> the tag. Have you attempted anything yet?"}],"answers":[{"tags":[],"owner":{"account_id":9325262,"reputation":125,"user_id":6922785,"display_name":"xerxes01"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1675172926,"creation_date":1675172926,"answer_id":75298142,"question_id":75297893,"body_markdown":"Damn, Didn&#39;t know about the replace functionality earlier in jsoup. Here&#39;s how easy it is: \r\n\r\n    Document examString111 = Jsoup.parse(examString);\r\n    Elements elements = examString111.select(&quot;h1, h2, h3, h4, h5, h6&quot;);\r\n    elements.tagName(&quot;h4&quot;);\r\n\t\t\t\t\t\t","title":"Replace all header tags with h4 in java using Jsoup","body":"<p>Damn, Didn't know about the replace functionality earlier in jsoup. Here's how easy it is:</p>\n<pre><code>Document examString111 = Jsoup.parse(examString);\nElements elements = examString111.select(&quot;h1, h2, h3, h4, h5, h6&quot;);\nelements.tagName(&quot;h4&quot;);\n                    \n</code></pre>\n"}],"owner":{"account_id":9325262,"reputation":125,"user_id":6922785,"display_name":"xerxes01"},"comment_count":1,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1675173809,"answer_count":1,"score":-3,"last_activity_date":1675172926,"creation_date":1675171631,"question_id":75297893,"body_markdown":"I have the following html : \r\n\r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html&gt;\r\n    &lt;body&gt;\r\n    \r\n    &lt;h2&gt; heading here &lt;/h2&gt;\r\n    &lt;p&gt;This is a paragraph.&lt;/p&gt;\r\n    &lt;p&gt;This is another paragraph.&lt;/p&gt;\r\n    &lt;h3&gt; heading here again &lt;/h3&gt;\r\n    &lt;p&gt;This is another another paragraph.&lt;/p&gt;\r\n    &lt;h4&gt; heading here again &lt;/h4&gt;\r\n    \r\n    \r\n    \r\n    \r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\nHow can I replace all the h tags with h4 tags using Jsoup? I don&#39;t wish to use regex for this. ","title":"Replace all header tags with h4 in java using Jsoup","body":"<p>I have the following html :</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;body&gt;\n\n&lt;h2&gt; heading here &lt;/h2&gt;\n&lt;p&gt;This is a paragraph.&lt;/p&gt;\n&lt;p&gt;This is another paragraph.&lt;/p&gt;\n&lt;h3&gt; heading here again &lt;/h3&gt;\n&lt;p&gt;This is another another paragraph.&lt;/p&gt;\n&lt;h4&gt; heading here again &lt;/h4&gt;\n\n\n\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>How can I replace all the h tags with h4 tags using Jsoup? I don't wish to use regex for this.</p>\n"},{"tags":["java","hibernate","spring-data"],"answers":[{"tags":[],"owner":{"account_id":6419592,"reputation":313,"user_id":4976651,"display_name":"Mr.Ko&#231;ak"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675172891,"creation_date":1675172891,"answer_id":75298130,"question_id":51367025,"body_markdown":"Did you try this?\r\n\r\n    @Where(clause = &quot;IS_DELETED = 0&quot;)\r\nor\r\n\r\n    @Where(clause = &quot;isDeleted = 0&quot;)\r\n\r\n?","title":"Hibernate define @Where annotation in super class","body":"<p>Did you try this?</p>\n<pre><code>@Where(clause = &quot;IS_DELETED = 0&quot;)\n</code></pre>\n<p>or</p>\n<pre><code>@Where(clause = &quot;isDeleted = 0&quot;)\n</code></pre>\n<p>?</p>\n"}],"owner":{"account_id":9946268,"reputation":1893,"user_id":7360870,"accept_rate":75,"display_name":"Ron Badur"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":743,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":1,"score":6,"last_activity_date":1675172891,"creation_date":1531761437,"question_id":51367025,"body_markdown":"I am trying to implement soft delete in my spring - hibernate project.\r\nMy plan is to override the delete method with the `@SQLDelete` annotation and filter the logical deleted entities with hibernate `@Where` annotation in my queries.\r\n\r\nI experience some difficulties when I try to define the `@Where` clause in the super class, It&#39;s seems that the entities dont inherit the `@Where` clause from the abstract base class.\r\n\r\n**Note:** If I move the `@Where` annotation to the entity class everything work as expected\r\n\r\n\r\n**The base entity class:**\r\n\r\n    @MappedSuperclass\r\n    @Where(clause = &quot; IS_DELETED = false&quot;)\r\n    public abstract class BaseEntity {\r\n\r\n       @Column(name = &quot;IS_DELETED&quot;)\r\n       private boolean isDeleted;\r\n\r\n       public BaseEntity() {\r\n       }\r\n\r\n       public boolean getIsDeleted() {\r\n          return this.isDeleted;\r\n       }\r\n\r\n       public void setIsDeleted(boolean isDeleted) {\r\n          this.isDeleted = isDeleted;\r\n       }\r\n     }\r\n\r\n**The entity class:**\r\n\r\n    @Entity\r\n    @Table(name = &quot;Events&quot;)\r\n    @SQLDelete(sql =&quot;UPDATE events &quot; +\r\n                    &quot;SET IS_DELETED = true &quot; +\r\n                    &quot;WHERE id = ?&quot;)\r\n    public class Event extends BaseEntity {\r\n\r\n       @Id\r\n       @GeneratedValue(strategy = GenerationType.AUTO)\r\n       @Column(name = &quot;ID&quot;)\r\n       private Long id;\r\n\r\n       @Column(name = &quot;NAME&quot;)\r\n       private String name;\r\n\r\n       public Event() {\r\n       }\r\n\r\n       public Long getId() {\r\n          return id;\r\n       }\r\n\r\n       public void setId(Long id) {\r\n          this.id = id;\r\n       }\r\n\r\n       public String getName() {\r\n          return name;\r\n       }\r\n\r\n       public void setName(String name) {\r\n          this.name = name;\r\n       }\r\n    }\r\n\r\nThanks for any kind of help :)","title":"Hibernate define @Where annotation in super class","body":"<p>I am trying to implement soft delete in my spring - hibernate project.\nMy plan is to override the delete method with the <code>@SQLDelete</code> annotation and filter the logical deleted entities with hibernate <code>@Where</code> annotation in my queries.</p>\n\n<p>I experience some difficulties when I try to define the <code>@Where</code> clause in the super class, It's seems that the entities dont inherit the <code>@Where</code> clause from the abstract base class.</p>\n\n<p><strong>Note:</strong> If I move the <code>@Where</code> annotation to the entity class everything work as expected</p>\n\n<p><strong>The base entity class:</strong></p>\n\n<pre><code>@MappedSuperclass\n@Where(clause = \" IS_DELETED = false\")\npublic abstract class BaseEntity {\n\n   @Column(name = \"IS_DELETED\")\n   private boolean isDeleted;\n\n   public BaseEntity() {\n   }\n\n   public boolean getIsDeleted() {\n      return this.isDeleted;\n   }\n\n   public void setIsDeleted(boolean isDeleted) {\n      this.isDeleted = isDeleted;\n   }\n }\n</code></pre>\n\n<p><strong>The entity class:</strong></p>\n\n<pre><code>@Entity\n@Table(name = \"Events\")\n@SQLDelete(sql =\"UPDATE events \" +\n                \"SET IS_DELETED = true \" +\n                \"WHERE id = ?\")\npublic class Event extends BaseEntity {\n\n   @Id\n   @GeneratedValue(strategy = GenerationType.AUTO)\n   @Column(name = \"ID\")\n   private Long id;\n\n   @Column(name = \"NAME\")\n   private String name;\n\n   public Event() {\n   }\n\n   public Long getId() {\n      return id;\n   }\n\n   public void setId(Long id) {\n      this.id = id;\n   }\n\n   public String getName() {\n      return name;\n   }\n\n   public void setName(String name) {\n      this.name = name;\n   }\n}\n</code></pre>\n\n<p>Thanks for any kind of help :)</p>\n"},{"tags":["java","android","methods","android-activity"],"comments":[{"owner":{"account_id":402229,"reputation":93994,"user_id":769265,"display_name":"David Wasser"},"score":1,"creation_date":1675163814,"post_id":75296296,"comment_id":132865071,"body_markdown":"What happens? Do you get compile or runtime errors? Edit your question and show us what you are seeing.","body":"What happens? Do you get compile or runtime errors? Edit your question and show us what you are seeing."},{"owner":{"account_id":402229,"reputation":93994,"user_id":769265,"display_name":"David Wasser"},"score":0,"creation_date":1675163900,"post_id":75296296,"comment_id":132865091,"body_markdown":"The first obvious thing I see is that you cannot use `this` when calling the `Intent` constructor in the method `enterNote`, because `this` is an instance of `NoteFunctionality` and you need an instance of `Context` here.","body":"The first obvious thing I see is that you cannot use <code>this</code> when calling the <code>Intent</code> constructor in the method <code>enterNote</code>, because <code>this</code> is an instance of <code>NoteFunctionality</code> and you need an instance of <code>Context</code> here."}],"answers":[{"tags":[],"owner":{"account_id":24021591,"reputation":114,"user_id":18003799,"display_name":"Seife"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675170263,"creation_date":1675164799,"answer_id":75296506,"question_id":75296296,"body_markdown":"    public void enterNote(Activity activity,Context context) {\r\n        //Class mainActivity = Class.forName(&quot;MainActivity&quot; + i);   \r\n        Intent secondActivityIntent = new Intent(context, activity.getClass());\r\n        startActivity(secondActivityIntent);\r\n    }\r\n\r\nand when you call it\r\n\r\n    noteFunc.enterNote(MainActivity,yourActivity.this);","title":"What am i doing wrong when I try to call an activity outside an other activity in Android Java?","body":"<pre><code>public void enterNote(Activity activity,Context context) {\n    //Class mainActivity = Class.forName(&quot;MainActivity&quot; + i);   \n    Intent secondActivityIntent = new Intent(context, activity.getClass());\n    startActivity(secondActivityIntent);\n}\n</code></pre>\n<p>and when you call it</p>\n<pre><code>noteFunc.enterNote(MainActivity,yourActivity.this);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27540947,"reputation":983,"user_id":21017714,"display_name":"Enowneb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675172845,"creation_date":1675172845,"answer_id":75298121,"question_id":75296296,"body_markdown":"If you would like to trigger another **Activity**, it must be done through ```Context```.\r\n\r\nTherefore, you need to pass ```Context``` to your ```NoteFunctionality``` function to achieve your task.\r\n \r\n**MainActivity**:\r\n```java\r\npublic class MainActivity extends Activity { // or extending any other form of Activity\r\n    NoteFunctionality noteFunc; // I assume you have properly assign it somewhere\r\n\r\n    @Override\r\n    public void onLongPress(@NonNull MotionEvent e) {\r\n        // You will have to pass also Context to enterNote function\r\n        noteFunc.enterNote(MainActivity.this, &quot;2&quot;); // You should pass an Integer instead of String here\r\n        super.onLongPress(e);\r\n    }\r\n\r\n    @Override\r\n    public boolean onDoubleTap(@NonNull MotionEvent e) {\r\n        noteFunc.enterNote(MainActivity.this, 2);\r\n        return super.onDoubleTap(e);\r\n    }\r\n}\r\n```\r\n\r\n**NoteFunctionality**:\r\n```java\r\npublic class NoteFunctionality {\r\n    // You need to have Context here\r\n    public void enterNote(Context context, int i) {\r\n        Intent secondActivityIntent = new Intent(context, SecondActivity.class); // Replace your target Activity name with SecondActivity\r\n        context.startActivity(secondActivityIntent);\r\n    }\r\n}\r\n```","title":"What am i doing wrong when I try to call an activity outside an other activity in Android Java?","body":"<p>If you would like to trigger another <strong>Activity</strong>, it must be done through <code>Context</code>.</p>\n<p>Therefore, you need to pass <code>Context</code> to your <code>NoteFunctionality</code> function to achieve your task.</p>\n<p><strong>MainActivity</strong>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MainActivity extends Activity { // or extending any other form of Activity\n    NoteFunctionality noteFunc; // I assume you have properly assign it somewhere\n\n    @Override\n    public void onLongPress(@NonNull MotionEvent e) {\n        // You will have to pass also Context to enterNote function\n        noteFunc.enterNote(MainActivity.this, &quot;2&quot;); // You should pass an Integer instead of String here\n        super.onLongPress(e);\n    }\n\n    @Override\n    public boolean onDoubleTap(@NonNull MotionEvent e) {\n        noteFunc.enterNote(MainActivity.this, 2);\n        return super.onDoubleTap(e);\n    }\n}\n</code></pre>\n<p><strong>NoteFunctionality</strong>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class NoteFunctionality {\n    // You need to have Context here\n    public void enterNote(Context context, int i) {\n        Intent secondActivityIntent = new Intent(context, SecondActivity.class); // Replace your target Activity name with SecondActivity\n        context.startActivity(secondActivityIntent);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":19176875,"reputation":3,"user_id":14009437,"display_name":"Alexander Stub Michelsen"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1675172845,"creation_date":1675163684,"question_id":75296296,"body_markdown":"I Want to put all my methods in seperate classes to clean my code up when creating my Android App but i can seem to get it right.\r\n\r\nIn my MainActivity class i call the method from the importet class noteFunctionality onLongpress and OnDoubleTap.\r\n\r\n                @Override\r\n                public void onLongPress(@NonNull MotionEvent e) {\r\n                    noteFunc.enterNote(&quot;2&quot;);\r\n                    super.onLongPress(e);\r\n                }\r\n\r\n                @Override\r\n                public boolean onDoubleTap(@NonNull MotionEvent e) {\r\n                    noteFunc.enterNote(2);\r\n                    return super.onDoubleTap(e);\r\n                }\r\n\r\nThen in my NoteFunctionality class i try start the a new activity class with the given int for the specifik activity, &quot;I have more then one activity&quot;. \r\n\r\n        public void enterNote(int i) {\r\n        Class mainActivity = Class.forName(&quot;MainActivity&quot; + i);\r\n        Intent secondActivityIntent = new Intent(this, mainActivity.class);\r\n        startActivity(secondActivityIntent);\r\n    }\r\n\r\nWhat am I doing wrong?.","title":"What am i doing wrong when I try to call an activity outside an other activity in Android Java?","body":"<p>I Want to put all my methods in seperate classes to clean my code up when creating my Android App but i can seem to get it right.</p>\n<p>In my MainActivity class i call the method from the importet class noteFunctionality onLongpress and OnDoubleTap.</p>\n<pre><code>            @Override\n            public void onLongPress(@NonNull MotionEvent e) {\n                noteFunc.enterNote(&quot;2&quot;);\n                super.onLongPress(e);\n            }\n\n            @Override\n            public boolean onDoubleTap(@NonNull MotionEvent e) {\n                noteFunc.enterNote(2);\n                return super.onDoubleTap(e);\n            }\n</code></pre>\n<p>Then in my NoteFunctionality class i try start the a new activity class with the given int for the specifik activity, &quot;I have more then one activity&quot;.</p>\n<pre><code>    public void enterNote(int i) {\n    Class mainActivity = Class.forName(&quot;MainActivity&quot; + i);\n    Intent secondActivityIntent = new Intent(this, mainActivity.class);\n    startActivity(secondActivityIntent);\n}\n</code></pre>\n<p>What am I doing wrong?.</p>\n"},{"tags":["java","mysql","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":4709043,"reputation":227,"user_id":3810175,"display_name":"Ramin Safar Manesh"},"score":0,"creation_date":1675171368,"post_id":75297642,"comment_id":132867553,"body_markdown":"to answer your question i need to know how you defined your domain model for the classes City and Country. And in addition i need to know what your service.listAll() do.","body":"to answer your question i need to know how you defined your domain model for the classes City and Country. And in addition i need to know what your service.listAll() do."},{"owner":{"account_id":23150564,"reputation":7,"user_id":17252645,"display_name":"Aleksso"},"score":0,"creation_date":1675171904,"post_id":75297642,"comment_id":132867735,"body_markdown":"@RaminManesh here it is, I&#39;ve updated post with City.java file. Also, service.listAll() has been shown in first code block, it uses CityRepository interface and I have listAll implemented.","body":"@RaminManesh here it is, I&#39;ve updated post with City.java file. Also, service.listAll() has been shown in first code block, it uses CityRepository interface and I have listAll implemented."},{"owner":{"account_id":27013368,"reputation":73,"user_id":20572638,"display_name":"M R"},"score":0,"creation_date":1675172384,"post_id":75297642,"comment_id":132867929,"body_markdown":"Do you want to display in the html table?","body":"Do you want to display in the html table?"},{"owner":{"account_id":23150564,"reputation":7,"user_id":17252645,"display_name":"Aleksso"},"score":0,"creation_date":1675176073,"post_id":75297642,"comment_id":132869266,"body_markdown":"@MR Yes, I am using Thymeleaf to be exact","body":"@MR Yes, I am using Thymeleaf to be exact"}],"answers":[{"tags":[],"owner":{"account_id":4709043,"reputation":227,"user_id":3810175,"display_name":"Ramin Safar Manesh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675172833,"creation_date":1675172443,"answer_id":75298036,"question_id":75297642,"body_markdown":"You have add FetchType to the @ManyToOne annotation arguments:\r\n\r\n    @ManyToOne(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\r\n    @JoinColumn(name = &quot;cou_id&quot;, referencedColumnName = &quot;cou_id&quot;)\r\n    private Country countries;\r\n\r\nand her a short description for each fetch type:\r\n\r\n**FetchType.LAZY** will only fire for primary table. If in your code you call any other method that has a parent table dependency then it will fire query to get that table information.\r\n\r\n**FetchType.EAGER** will create join of all table including relevant parent tables directly.\r\n\r\nAnd you can add a method in your city Class to return your country name and this method will be available in your view-layer:\r\n\r\n      public String getCountryName(){\r\n        return countries == null ? null : countries.getName();\r\n        //not sure how the country class is implemented\r\n      }\r\n\r\n","title":"How to list column from another table via foreign key in Spring Boot","body":"<p>You have add FetchType to the @ManyToOne annotation arguments:</p>\n<pre><code>@ManyToOne(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\n@JoinColumn(name = &quot;cou_id&quot;, referencedColumnName = &quot;cou_id&quot;)\nprivate Country countries;\n</code></pre>\n<p>and her a short description for each fetch type:</p>\n<p><strong>FetchType.LAZY</strong> will only fire for primary table. If in your code you call any other method that has a parent table dependency then it will fire query to get that table information.</p>\n<p><strong>FetchType.EAGER</strong> will create join of all table including relevant parent tables directly.</p>\n<p>And you can add a method in your city Class to return your country name and this method will be available in your view-layer:</p>\n<pre><code>  public String getCountryName(){\n    return countries == null ? null : countries.getName();\n    //not sure how the country class is implemented\n  }\n</code></pre>\n"}],"owner":{"account_id":23150564,"reputation":7,"user_id":17252645,"display_name":"Aleksso"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":465,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75298036,"answer_count":1,"score":0,"last_activity_date":1675172833,"creation_date":1675170419,"question_id":75297642,"body_markdown":"I&#39;m struggling with this problem. I have table &quot;Cities&quot; which has foreign key to table &quot;Countries&quot; with country_id referenced to country from which is city. In my web application I can list all the data from &quot;Cities&quot; table but I can&#39;t find a way to list name of country. This is my service class method.\r\n\r\n        public List&lt;City&gt; listAll() {\r\n        List&lt;City&gt; cities = repo.findAll();\r\n        return cities;\r\n    }\r\nIn &quot;City&quot; entity I have field Country by which I can find in method name of country but I don&#39;t know how to return it together with cities.\r\n\r\nAddition:\r\n\r\n        @GetMapping(&quot;/cities&quot;)\r\n    public String getAllCities(Model model) {\r\n        List&lt;City&gt; listCities = service.listAll();\r\n\r\n        model.addAttribute(&quot;showListCities&quot;, listCities);\r\n        return &quot;cities&quot;;\r\n    }\r\n\r\nCity.java:\r\n\r\n    package com.bookflight.BookFlight.gradovi;\r\n\r\n    import com.bookflight.BookFlight.drzave.Drzave;\r\n    import jakarta.persistence.*;\r\n    import lombok.AllArgsConstructor;\r\n    import lombok.Builder;\r\n    import lombok.Data;\r\n    import lombok.NoArgsConstructor;\r\n    \r\n    @Data\r\n    @Builder\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @Entity\r\n    @Table(name = &quot;cities&quot;)\r\n    public class City {\r\n        @Id\r\n        @Column(name = &quot;city_id&quot;)\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Integer id;\r\n        @Column(nullable = false, length = 45, name = &quot;city_name&quot;)\r\n        private String city_name;\r\n        @ManyToOne(cascade = CascadeType.ALL)\r\n        @JoinColumn(name = &quot;cou_id&quot;, referencedColumnName = &quot;cou_id&quot;)\r\n        private Country countries;\r\n\r\n    public Integer getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(Integer id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getcity_name() {\r\n        return city_name;\r\n    }\r\n\r\n    public void setcity_name(String city_name) {\r\n        this.city_name = city_name;\r\n    }\r\n\r\n    public Countries getCountries() {\r\n        return countries;\r\n    }\r\n\r\n    public void setCountries(Country countries) {\r\n        this.countries = countries;\r\n    }\r\n}\r\n\r\n\r\n**NOTE:** Every variable name here is in my native language so I literally translated it word by word to better understand your solution afterwards.","title":"How to list column from another table via foreign key in Spring Boot","body":"<p>I'm struggling with this problem. I have table &quot;Cities&quot; which has foreign key to table &quot;Countries&quot; with country_id referenced to country from which is city. In my web application I can list all the data from &quot;Cities&quot; table but I can't find a way to list name of country. This is my service class method.</p>\n<pre><code>    public List&lt;City&gt; listAll() {\n    List&lt;City&gt; cities = repo.findAll();\n    return cities;\n}\n</code></pre>\n<p>In &quot;City&quot; entity I have field Country by which I can find in method name of country but I don't know how to return it together with cities.</p>\n<p>Addition:</p>\n<pre><code>    @GetMapping(&quot;/cities&quot;)\npublic String getAllCities(Model model) {\n    List&lt;City&gt; listCities = service.listAll();\n\n    model.addAttribute(&quot;showListCities&quot;, listCities);\n    return &quot;cities&quot;;\n}\n</code></pre>\n<p>City.java:</p>\n<pre><code>package com.bookflight.BookFlight.gradovi;\n\nimport com.bookflight.BookFlight.drzave.Drzave;\nimport jakarta.persistence.*;\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\n@Entity\n@Table(name = &quot;cities&quot;)\npublic class City {\n    @Id\n    @Column(name = &quot;city_id&quot;)\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Integer id;\n    @Column(nullable = false, length = 45, name = &quot;city_name&quot;)\n    private String city_name;\n    @ManyToOne(cascade = CascadeType.ALL)\n    @JoinColumn(name = &quot;cou_id&quot;, referencedColumnName = &quot;cou_id&quot;)\n    private Country countries;\n\npublic Integer getId() {\n    return id;\n}\n\npublic void setId(Integer id) {\n    this.id = id;\n}\n\npublic String getcity_name() {\n    return city_name;\n}\n\npublic void setcity_name(String city_name) {\n    this.city_name = city_name;\n}\n\npublic Countries getCountries() {\n    return countries;\n}\n\npublic void setCountries(Country countries) {\n    this.countries = countries;\n}\n</code></pre>\n<p>}</p>\n<p><strong>NOTE:</strong> Every variable name here is in my native language so I literally translated it word by word to better understand your solution afterwards.</p>\n"},{"tags":["java","list","spring-boot","search","arraylist"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":1,"creation_date":1675170735,"post_id":75297685,"comment_id":132867339,"body_markdown":"you should first look at your current code: if ( d.getOrganizationName().toLowerCase() != null ... ) -&gt; can you spot the serious problem here? that line can not possibly return null, it can, however, throw a NullPointerException","body":"you should first look at your current code: if ( d.getOrganizationName().toLowerCase() != null ... ) -&gt; can you spot the serious problem here? that line can not possibly return null, it can, however, throw a NullPointerException"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1675170810,"post_id":75297685,"comment_id":132867357,"body_markdown":"As for your comparison, don&#39;t use &quot;contains&quot;, but use equalsIgnoreCase instead","body":"As for your comparison, don&#39;t use &quot;contains&quot;, but use equalsIgnoreCase instead"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":1,"creation_date":1675170821,"post_id":75297685,"comment_id":132867361,"body_markdown":"And the second condition misses the toLowerCase() after getOrganizationalname()","body":"And the second condition misses the toLowerCase() after getOrganizationalname()"},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1675171280,"post_id":75297685,"comment_id":132867517,"body_markdown":"@Stultuske OP needs to &quot;search a part of string&quot;, so `contains` is needed.","body":"@Stultuske OP needs to &quot;search a part of string&quot;, so <code>contains</code> is needed."}],"answers":[{"tags":[],"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675171218,"creation_date":1675171218,"answer_id":75297800,"question_id":75297685,"body_markdown":"Regarding the code\r\n```\r\n   if(d.getOrganizationName().toLowerCase() != null \r\n      &amp;&amp; d.getOrganizationName().contains(search.toLowerCase())) {\r\n          listClone.add(d);\r\n   }\r\n```\r\n\r\nTwo issues here: \r\n- your null check is bad. If `d.getOrganizationName()` is `null` (which can apparently happen), calling `toLowerCase` on it will throw a `NullPointerException`.\r\n- your other part of the check uses `contains`, but you don&#39;t use `toLowerCase` on it.\r\n\r\nWhat you want is\r\n```\r\n   if(d.getOrganizationName() != null\r\n      &amp;&amp; d.getOrganizationName().toLowerCase().contains(search.toLowerCase())) {\r\n        listClone.add(d);\r\n   }\r\n```","title":"search is not working in Arraylist due to case sensitivity","body":"<p>Regarding the code</p>\n<pre><code>   if(d.getOrganizationName().toLowerCase() != null \n      &amp;&amp; d.getOrganizationName().contains(search.toLowerCase())) {\n          listClone.add(d);\n   }\n</code></pre>\n<p>Two issues here:</p>\n<ul>\n<li>your null check is bad. If <code>d.getOrganizationName()</code> is <code>null</code> (which can apparently happen), calling <code>toLowerCase</code> on it will throw a <code>NullPointerException</code>.</li>\n<li>your other part of the check uses <code>contains</code>, but you don't use <code>toLowerCase</code> on it.</li>\n</ul>\n<p>What you want is</p>\n<pre><code>   if(d.getOrganizationName() != null\n      &amp;&amp; d.getOrganizationName().toLowerCase().contains(search.toLowerCase())) {\n        listClone.add(d);\n   }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10215964,"reputation":133,"user_id":7541656,"display_name":"Gaurav Verma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675172513,"creation_date":1675172513,"answer_id":75298054,"question_id":75297685,"body_markdown":"you just miss toLower() in d.getOrganizationName() .\r\n\r\n\r\npublic static List&lt;Address&gt; searchAddress(String search) {\r\n\r\n\t\tList&lt;Address&gt; listClone = new ArrayList&lt;&gt;();\r\n\t\tfor (Address d : AddressServiceImpl()) {\r\n\t\t\tif (d.getOrganizationName() != null\r\n\t\t\t\t\t&amp;&amp; d.getOrganizationName().toLowerCase().contains(search.toLowerCase())) {\r\n\t\t\t\tlistClone.add(d);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn listClone;\r\n\r\n\t}","title":"search is not working in Arraylist due to case sensitivity","body":"<p>you just miss toLower() in d.getOrganizationName() .</p>\n<p>public static List searchAddress(String search) {</p>\n<pre><code>    List&lt;Address&gt; listClone = new ArrayList&lt;&gt;();\n    for (Address d : AddressServiceImpl()) {\n        if (d.getOrganizationName() != null\n                &amp;&amp; d.getOrganizationName().toLowerCase().contains(search.toLowerCase())) {\n            listClone.add(d);\n        }\n\n    }\n    return listClone;\n\n}\n</code></pre>\n"}],"owner":{"account_id":22626380,"reputation":1,"user_id":16804423,"display_name":"Kartik khandelwal"},"comment_count":4,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"closed_date":1675182726,"answer_count":2,"score":-4,"last_activity_date":1675172513,"creation_date":1675170623,"question_id":75297685,"body_markdown":"* I have created an **Address** class*\r\n```\r\npublic class Address {\r\n\t\r\n\t\r\n\tprivate long id;\r\n\tprivate String organizationName;\r\n\tprivate long entId;\r\n\tprivate String orgAddress;\r\n\tprivate String orgType;\r\n\r\n\t}\r\n```\r\nAnd I have **created a list** which have Address objects inside and i have created an **Api** using it.\r\n\r\n\r\n```\r\nList&lt;Address&gt; list;\r\n\t\r\n\t\r\n\t\r\n\tpublic AddressServiceImpl() {\r\n\t\tlist=new ArrayList&lt;&gt;();\r\n\t\tlist.add(new Address(1,&quot;Anth&quot;,123456,&quot;Time square,NY&quot;,&quot;Doctor&quot;));\r\n\t\tlist.add(new Address(2,&quot;carl&quot;,12114,&quot;street 16,NY&quot;,&quot;Staff&quot;));\r\n\t}\r\n\r\n```\r\n\r\nand now i need to **search a part of string** from the list now and i want to fetch the objects that have **organizationName **as the related String\r\n\r\n\r\n```\r\n@Override\r\n\tpublic List&lt;Address&gt; searchAddress(String search) { \r\n\t\t\r\n\t\tList&lt;Address&gt; listClone= new ArrayList&lt;&gt;();\r\n\t\tfor(Address d : list){\r\n\t        if(d.getOrganizationName().toLowerCase() != null &amp;&amp; d.getOrganizationName().contains(search.toLowerCase())) {\r\n\t           listClone.add(d);\r\n\t    }\r\n\t        \r\n\t        \r\n\t\t}\r\n\t\treturn listClone;\r\n\t\r\n\r\n\t}\r\n```\r\n\r\nBut when i am **searching &quot;Anth&quot; and &quot;anth&quot;** it is not giving any response.**Please Help!!!**\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nBut when i am **searching &quot;Anth&quot; and &quot;anth&quot;** it is not giving any response.**Please Help!!!**","title":"search is not working in Arraylist due to case sensitivity","body":"<ul>\n<li>I have created an <strong>Address</strong> class*</li>\n</ul>\n<pre><code>public class Address {\n    \n    \n    private long id;\n    private String organizationName;\n    private long entId;\n    private String orgAddress;\n    private String orgType;\n\n    }\n</code></pre>\n<p>And I have <strong>created a list</strong> which have Address objects inside and i have created an <strong>Api</strong> using it.</p>\n<pre><code>List&lt;Address&gt; list;\n    \n    \n    \n    public AddressServiceImpl() {\n        list=new ArrayList&lt;&gt;();\n        list.add(new Address(1,&quot;Anth&quot;,123456,&quot;Time square,NY&quot;,&quot;Doctor&quot;));\n        list.add(new Address(2,&quot;carl&quot;,12114,&quot;street 16,NY&quot;,&quot;Staff&quot;));\n    }\n\n</code></pre>\n<p>and now i need to <strong>search a part of string</strong> from the list now and i want to fetch the objects that have **organizationName **as the related String</p>\n<pre><code>@Override\n    public List&lt;Address&gt; searchAddress(String search) { \n        \n        List&lt;Address&gt; listClone= new ArrayList&lt;&gt;();\n        for(Address d : list){\n            if(d.getOrganizationName().toLowerCase() != null &amp;&amp; d.getOrganizationName().contains(search.toLowerCase())) {\n               listClone.add(d);\n        }\n            \n            \n        }\n        return listClone;\n    \n\n    }\n</code></pre>\n<p>But when i am <strong>searching &quot;Anth&quot; and &quot;anth&quot;</strong> it is not giving any response.<strong>Please Help!!!</strong></p>\n<p>But when i am <strong>searching &quot;Anth&quot; and &quot;anth&quot;</strong> it is not giving any response.<strong>Please Help!!!</strong></p>\n"},{"tags":["java","java-stream","treemap"],"comments":[{"owner":{"account_id":3498606,"reputation":5166,"user_id":2925962,"accept_rate":0,"display_name":"akortex"},"score":0,"creation_date":1535815615,"post_id":52129531,"comment_id":91209450,"body_markdown":"Quick question, what is the key of your `skillMap` map? You say that you have a `HashMap&lt;Skill&gt;` which is not correct. Also please post some more code.","body":"Quick question, what is the key of your <code>skillMap</code> map? You say that you have a <code>HashMap&lt;Skill&gt;</code> which is not correct. Also please post some more code."},{"owner":{"account_id":13314702,"reputation":333,"user_id":9611562,"display_name":"francesco foschi"},"score":0,"creation_date":1535815683,"post_id":52129531,"comment_id":91209472,"body_markdown":"skillMap&lt;String,Skill&gt;, this is the complete type of the map.","body":"skillMap&lt;String,Skill&gt;, this is the complete type of the map."},{"owner":{"account_id":3498606,"reputation":5166,"user_id":2925962,"accept_rate":0,"display_name":"akortex"},"score":0,"creation_date":1535815716,"post_id":52129531,"comment_id":91209482,"body_markdown":"And they key? What does your key represent?","body":"And they key? What does your key represent?"},{"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":0,"creation_date":1535817715,"post_id":52129531,"comment_id":91210046,"body_markdown":"Possible duplicate of https://stackoverflow.com/questions/31660900/how-to-convert-stream-of-map-into-treemap-in-java8 ?","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/31660900/how-to-convert-stream-of-map-into-treemap-in-java8\" title=\"how to convert stream of map into treemap in java8\">stackoverflow.com/questions/31660900/&hellip;</a> ?"},{"owner":{"account_id":13314702,"reputation":333,"user_id":9611562,"display_name":"francesco foschi"},"score":0,"creation_date":1535817843,"post_id":52129531,"comment_id":91210079,"body_markdown":"Similar question, but in that case the solution involves returning a map of maps, I only need to insert a single value","body":"Similar question, but in that case the solution involves returning a map of maps, I only need to insert a single value"}],"answers":[{"tags":[],"owner":{"account_id":3940267,"reputation":167,"user_id":3254992,"display_name":"lauer"},"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1535816738,"creation_date":1535816738,"answer_id":52129736,"question_id":52129531,"body_markdown":"This is how you can do it\r\n\r\n\tpublic SortedMap&lt;String, Long&gt; skill_nApplicants(Map&lt;String, Skill&gt; skillMap) {\r\n\t    Map&lt;String, Long&gt; result = skillMap.values().stream().collect(Collectors.toMap(Skill::getName, Skill::getNumApplicants));\r\n\t    return new TreeMap&lt;&gt;(result);\r\n\t}","title":"How to collect a stream into a TreeMap","body":"<p>This is how you can do it</p>\n\n<pre><code>public SortedMap&lt;String, Long&gt; skill_nApplicants(Map&lt;String, Skill&gt; skillMap) {\n    Map&lt;String, Long&gt; result = skillMap.values().stream().collect(Collectors.toMap(Skill::getName, Skill::getNumApplicants));\n    return new TreeMap&lt;&gt;(result);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"down_vote_count":0,"up_vote_count":40,"is_accepted":true,"score":40,"last_activity_date":1535819194,"creation_date":1535819194,"answer_id":52130074,"question_id":52129531,"body_markdown":"Don&#39;t collect the data to a `HashMap` first, *then* convert to a `TreeMap`. Collect the data directly to a `TreeMap` by using the overloaded [`toMap(keyMapper, valueMapper, mergeFunction, mapSupplier)`][1] method that allows you to specify which `Map` to create (4th parameter).\r\n\r\n\tpublic SortedMap&lt;String, Long&gt; skill_nApplicants() {\r\n\t\treturn skillMap.values().stream().collect(Collectors.toMap(\r\n\t\t\t\tSkill::getName,\r\n\t\t\t\tSkill::getNumApplicants,\r\n\t\t\t\tMath::addExact, // only called if duplicate names can occur\r\n\t\t\t\tTreeMap::new\r\n\t\t));\r\n\t}\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#toMap-java.util.function.Function-java.util.function.Function-java.util.function.BinaryOperator-java.util.function.Supplier-","title":"How to collect a stream into a TreeMap","body":"<p>Don't collect the data to a <code>HashMap</code> first, <em>then</em> convert to a <code>TreeMap</code>. Collect the data directly to a <code>TreeMap</code> by using the overloaded <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#toMap-java.util.function.Function-java.util.function.Function-java.util.function.BinaryOperator-java.util.function.Supplier-\" rel=\"noreferrer\"><code>toMap(keyMapper, valueMapper, mergeFunction, mapSupplier)</code></a> method that allows you to specify which <code>Map</code> to create (4th parameter).</p>\n\n<pre><code>public SortedMap&lt;String, Long&gt; skill_nApplicants() {\n    return skillMap.values().stream().collect(Collectors.toMap(\n            Skill::getName,\n            Skill::getNumApplicants,\n            Math::addExact, // only called if duplicate names can occur\n            TreeMap::new\n    ));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13672099,"reputation":601,"user_id":9864539,"display_name":"Ricky Sixx"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1675171577,"creation_date":1624972335,"answer_id":68179395,"question_id":52129531,"body_markdown":"If, in your stream, you don&#39;t have two (or more) values which should be mapped with the same key, then you can avoid to use a Collector at all (and thus you don&#39;t need to think about a merge function).\r\n\r\nAll you need to do is to simply add each skill to the map with a `forEach`:\r\n\r\n    public SortedMap&lt;String, Long&gt; skill_nApplicants() {\r\n    \tMap&lt;String, Long&gt; result = new TreeMap&lt;&gt;();\r\n    \t\r\n        skillMap.values()\r\n    \t\t.forEach((skill) -&gt; result.put(skill.getName(), skill.getNumApplicants());\r\n    \t\t\r\n    \treturn result;\r\n    }\r\n\r\nYou can wrap `result` with [`Collections.unmodifiableSortedMap`][1] if you want to return an unmodifiable map.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#unmodifiableSortedMap-java.util.SortedMap-","title":"How to collect a stream into a TreeMap","body":"<p>If, in your stream, you don't have two (or more) values which should be mapped with the same key, then you can avoid to use a Collector at all (and thus you don't need to think about a merge function).</p>\n<p>All you need to do is to simply add each skill to the map with a <code>forEach</code>:</p>\n<pre><code>public SortedMap&lt;String, Long&gt; skill_nApplicants() {\n    Map&lt;String, Long&gt; result = new TreeMap&lt;&gt;();\n    \n    skillMap.values()\n        .forEach((skill) -&gt; result.put(skill.getName(), skill.getNumApplicants());\n        \n    return result;\n}\n</code></pre>\n<p>You can wrap <code>result</code> with <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#unmodifiableSortedMap-java.util.SortedMap-\" rel=\"nofollow noreferrer\"><code>Collections.unmodifiableSortedMap</code></a> if you want to return an unmodifiable map.</p>\n"}],"owner":{"account_id":13314702,"reputation":333,"user_id":9611562,"display_name":"francesco foschi"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25735,"favorite_count":0,"down_vote_count":0,"up_vote_count":22,"accepted_answer_id":52130074,"answer_count":3,"score":22,"last_activity_date":1675171577,"creation_date":1535815439,"question_id":52129531,"body_markdown":"I know this is a noob a question, but I couldn&#39;t find a simpe answer anywhere else. Question is: I need to write a method that returns a `SortedMap`, so a tree map should work just fine. \r\nI have a `HashMap&lt; String, Skill&gt;`, the `Skill` class has both the methods `getName` and `getNumApplicants` and I need to return a `SortedMap&lt;String, Long&gt;`, with the name of the skill as a key and the number of applicants as value. This is where I stand:\r\n    \r\n    private Map&lt;String,Skill&gt; skillMap = new HashMap&lt;&gt;();\r\n\r\n    public SortedMap&lt;String, Long&gt; skill_nApplicants() {\r\n\t\t\r\n\t\treturn skillMap.values().stream().collect(...);\r\n\t}\r\n\r\nThis is the Skill class\r\n    \r\n\r\n\r\n\r\n    public class Skill {\r\n    \t\r\n    \tprivate String name;\r\n    \tprivate List &lt;Position&gt; reqPosition = new ArrayList&lt;&gt;();\r\n    \tprivate Long numApplicants;\r\n    \t\r\n    \tpublic void plusOneApplicant() {\r\n    \t\tthis.numApplicants++;\r\n    \t}\r\n    \t\r\n    \tpublic Long getNumApplicants() {\r\n    \t\treturn numApplicants;\r\n    \t}\r\n    \tpublic Skill(String name) {\r\n    \t\tsuper();\r\n    \t\tthis.name = name;\r\n    \t\tthis.numApplicants = 0L;\r\n    \t}\r\n    \tpublic String getName() {\r\n    \t\treturn name;\r\n    \t\t}\r\n    \t\r\n    \tpublic List&lt;Position&gt; getPositions() {\r\n    \t\treturn reqPosition;\r\n    \t\t}\r\n    \tpublic void addReqPosition(Position p) {\r\n    \t\tthis.reqPosition.add(p);\r\n    \t\treturn;\r\n    \t}\r\n    }\r\n\r\nI know this should be very easy, I just have a very hard time in understanding this all thing.\r\n\r\n\r\n","title":"How to collect a stream into a TreeMap","body":"<p>I know this is a noob a question, but I couldn't find a simpe answer anywhere else. Question is: I need to write a method that returns a <code>SortedMap</code>, so a tree map should work just fine. \nI have a <code>HashMap&lt; String, Skill&gt;</code>, the <code>Skill</code> class has both the methods <code>getName</code> and <code>getNumApplicants</code> and I need to return a <code>SortedMap&lt;String, Long&gt;</code>, with the name of the skill as a key and the number of applicants as value. This is where I stand:</p>\n\n<pre><code>private Map&lt;String,Skill&gt; skillMap = new HashMap&lt;&gt;();\n\npublic SortedMap&lt;String, Long&gt; skill_nApplicants() {\n\n    return skillMap.values().stream().collect(...);\n}\n</code></pre>\n\n<p>This is the Skill class</p>\n\n<pre><code>public class Skill {\n\n    private String name;\n    private List &lt;Position&gt; reqPosition = new ArrayList&lt;&gt;();\n    private Long numApplicants;\n\n    public void plusOneApplicant() {\n        this.numApplicants++;\n    }\n\n    public Long getNumApplicants() {\n        return numApplicants;\n    }\n    public Skill(String name) {\n        super();\n        this.name = name;\n        this.numApplicants = 0L;\n    }\n    public String getName() {\n        return name;\n        }\n\n    public List&lt;Position&gt; getPositions() {\n        return reqPosition;\n        }\n    public void addReqPosition(Position p) {\n        this.reqPosition.add(p);\n        return;\n    }\n}\n</code></pre>\n\n<p>I know this should be very easy, I just have a very hard time in understanding this all thing.</p>\n"},{"tags":["java","selenium","cucumber"],"answers":[{"tags":[],"owner":{"account_id":4301454,"reputation":176,"user_id":3515090,"display_name":"bischoffdev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675171455,"creation_date":1675171455,"answer_id":75297854,"question_id":73651542,"body_markdown":"this is deliberately named like this since scenario names are not unique. This would create more problems than it would solve. ","title":"Cluecumber - is it possible to change scenario-detail files naming?","body":"<p>this is deliberately named like this since scenario names are not unique. This would create more problems than it would solve.</p>\n"}],"owner":{"account_id":14301249,"reputation":105,"user_id":10330523,"display_name":"Piotrek Kapczyński"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675171455,"creation_date":1662650621,"question_id":73651542,"body_markdown":"cluecumber version: 2.2.0\r\n\r\nBy default scenario-detail files are named as &#39;scenario_1&#39;, &#39;scenario_2&#39; etc. \r\n\r\nIs there any possibility to change &#39;scenario_1.html&#39; name to scenarioName.html automatically ?\r\nI need constant url to single scenario in my report. I think it is better to use scenario name instead of tags - it is my secondary solution but I am not satisfied\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/JLoZa.png\r\n  [2]: https://i.stack.imgur.com/ZmeAV.png","title":"Cluecumber - is it possible to change scenario-detail files naming?","body":"<p>cluecumber version: 2.2.0</p>\n<p>By default scenario-detail files are named as 'scenario_1', 'scenario_2' etc.</p>\n<p>Is there any possibility to change 'scenario_1.html' name to scenarioName.html automatically ?\nI need constant url to single scenario in my report. I think it is better to use scenario name instead of tags - it is my secondary solution but I am not satisfied</p>\n<p><a href=\"https://i.stack.imgur.com/JLoZa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JLoZa.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/ZmeAV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZmeAV.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","swap","primitive-types"],"comments":[{"owner":{"display_name":"user1487767"},"score":0,"creation_date":1340868461,"post_id":1363186,"comment_id":14769584,"body_markdown":"Chk this out.More info on swap by reference. http://www.cs.utsa.edu/~wagner/CS2213/swap/swap.html Chk this out.More info on swap by reference.","body":"Chk this out.More info on swap by reference. <a href=\"http://www.cs.utsa.edu/~wagner/CS2213/swap/swap.html\" rel=\"nofollow noreferrer\">cs.utsa.edu/~wagner/CS2213/swap/swap.html</a> Chk this out.More info on swap by reference."}],"answers":[{"tags":[],"owner":{"account_id":445,"reputation":114845,"user_id":572,"accept_rate":90,"display_name":"Thomas Owens"},"down_vote_count":0,"up_vote_count":50,"is_accepted":true,"score":50,"last_activity_date":1251819860,"creation_date":1251819860,"answer_id":1363200,"question_id":1363186,"body_markdown":"Without using an array or objects, no, it is not possible to do it within a method.","title":"Is it possible to write swap method in Java?","body":"<p>Without using an array or objects, no, it is not possible to do it within a method.</p>\n"},{"tags":[],"owner":{"account_id":53422,"reputation":19165,"user_id":159658,"accept_rate":100,"display_name":"Brent Writes Code"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1251820098,"creation_date":1251820098,"answer_id":1363220,"question_id":1363186,"body_markdown":"Check out this JavaWorld article that explains it in detail:\r\n\r\nhttp://www.javaworld.com/javaworld/javaqa/2000-05/03-qa-0526-pass.html\r\n\r\nA swap of two primitives will never work because primitives are passed by value in Java. You can&#39;t even write a method to swap two objects for that matter.  \r\n\r\nLike @Thomas said, the only thing you could do is have your primitives contained within other objects/arrays and modify those.","title":"Is it possible to write swap method in Java?","body":"<p>Check out this JavaWorld article that explains it in detail:</p>\n\n<p><a href=\"http://www.javaworld.com/javaworld/javaqa/2000-05/03-qa-0526-pass.html\" rel=\"noreferrer\">http://www.javaworld.com/javaworld/javaqa/2000-05/03-qa-0526-pass.html</a></p>\n\n<p>A swap of two primitives will never work because primitives are passed by value in Java. You can't even write a method to swap two objects for that matter.  </p>\n\n<p>Like @Thomas said, the only thing you could do is have your primitives contained within other objects/arrays and modify those.</p>\n"},{"tags":[],"owner":{"account_id":49175,"reputation":23807,"user_id":146347,"accept_rate":100,"display_name":"KLE"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1251820139,"creation_date":1251820139,"answer_id":1363225,"question_id":1363186,"body_markdown":"&gt;In java5, the closest I can think of, which may help you, is :\r\n\r\nThe AtomicInteger class (and others) have `getAndSet()` atomic methods ..","title":"Is it possible to write swap method in Java?","body":"<blockquote>\n  <p>In java5, the closest I can think of, which may help you, is :</p>\n</blockquote>\n\n<p>The AtomicInteger class (and others) have <code>getAndSet()</code> atomic methods ..</p>\n"},{"tags":[],"owner":{"account_id":50442,"reputation":9,"user_id":150473,"display_name":"Chris Holland"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1251820276,"creation_date":1251820276,"answer_id":1363243,"question_id":1363186,"body_markdown":"As Thomas Owens said. You could probably do it in C by passing variables by &amp;reference, but afaik not in Java without using objects.\r\n","title":"Is it possible to write swap method in Java?","body":"<p>As Thomas Owens said. You could probably do it in C by passing variables by &amp;reference, but afaik not in Java without using objects.</p>\n"},{"tags":[],"owner":{"account_id":40662,"reputation":20954,"user_id":117839,"accept_rate":74,"display_name":"Michael Wiles"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1251820390,"creation_date":1251820390,"answer_id":1363257,"question_id":1363186,"body_markdown":"To write a swap method that swaps primitives you&#39;d have to have the concept of &quot;out&quot; variables, i.e. variables whose values are passed up to the calling context. C# has those but you must still specify that they&#39;re out variables.","title":"Is it possible to write swap method in Java?","body":"<p>To write a swap method that swaps primitives you'd have to have the concept of \"out\" variables, i.e. variables whose values are passed up to the calling context. C# has those but you must still specify that they're out variables.</p>\n"},{"tags":[],"owner":{"account_id":1941796,"reputation":21,"user_id":1747849,"display_name":"Victor"},"down_vote_count":6,"up_vote_count":2,"is_accepted":false,"score":-4,"last_activity_date":1350322073,"creation_date":1350321740,"answer_id":12900796,"question_id":1363186,"body_markdown":"    public class Swap\r\n    {\r\n        public static void main (String[]args)\r\n        {\r\n            int y = 5;\r\n            int x = 4;\r\n            int c;\r\n    \r\n            System.out.println(&quot;y = &quot;+y);\r\n            System.out.println(&quot;x = &quot;+x);\r\n    \r\n            c=x; //c = 4\r\n            x=y; //x = 5;\r\n            y=c;\r\n    \r\n            System.out.println(&quot;\\n&quot;);\r\n            System.out.println(&quot;y= &quot;+y);\r\n            System.out.println(&quot;x= &quot;+x);\r\n        }    \r\n    }","title":"Is it possible to write swap method in Java?","body":"<pre><code>public class Swap\n{\n    public static void main (String[]args)\n    {\n        int y = 5;\n        int x = 4;\n        int c;\n\n        System.out.println(\"y = \"+y);\n        System.out.println(\"x = \"+x);\n\n        c=x; //c = 4\n        x=y; //x = 5;\n        y=c;\n\n        System.out.println(\"\\n\");\n        System.out.println(\"y= \"+y);\n        System.out.println(\"x= \"+x);\n    }    \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2727247,"reputation":21,"user_id":2351954,"display_name":"Fadi Hatem"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1368107778,"creation_date":1368107778,"answer_id":16463491,"question_id":1363186,"body_markdown":"This function will swap two ints\r\n\r\n    Integer[] swap(int a, int b){\r\n        return new Integer[]{b,a};\r\n    }","title":"Is it possible to write swap method in Java?","body":"<p>This function will swap two ints</p>\n\n<pre><code>Integer[] swap(int a, int b){\n    return new Integer[]{b,a};\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":188605,"reputation":5059,"user_id":427413,"accept_rate":71,"display_name":"marcus"},"down_vote_count":1,"up_vote_count":60,"is_accepted":false,"score":59,"last_activity_date":1675171279,"creation_date":1369875546,"answer_id":16826296,"question_id":1363186,"body_markdown":"While it is not possible to write a function that simply swaps two variables, it is possible to write a **helper function** that allows you to:\r\n\r\n - Swap two variables using **only one statement**\r\n - **Without temporary variables** in the caller&#39;s code\r\n - **Without &#39;boxing&#39;** primitives\r\n - With a few overloads (one of them using generics), **it works for any type**\r\n\r\nThat&#39;s how you could do it:\r\n\r\n    int returnFirst(int x, int y) {\r\n        return x;\r\n    }\r\n    &lt;T&gt; T returnFirst(T x, T y) {\r\n        return x;\r\n    }\r\n    // other overloads as needed\r\n    int a = 8, b = 3;\r\n    a = returnFirst(b, b = a); // try reading this as a = b; b = a;\r\n    System.out.println(&quot;a: &quot; + a + &quot;, b: &quot; + b); // prints a: 3, b: 8\r\n\r\nThis works because the Java language guarantees (Java Language Specification, Java SE 7 Edition, section 15.12.4.2) that all arguments are evaluated from left to right (unlike some other languages, where the order of evaluation is undefined), so the execution order is:\r\n\r\n 1. The original value of `b` is evaluated in order to be passed as the first argument to the function\r\n 2. The expression `b = a` is evaluated, and the result (the new value of `b`) is passed as the second argument to the function\r\n 3. The function executes, returning the original value of `b` and ignoring its new value\r\n 4. You assign the result to `a`\r\n\r\nIf `returnFirst` is too long, you can choose a shorter name to make code more compact (e.g. `a = sw(b, b = a)`).\r\n\r\nSuppose you need to swap many variables of different types one after the other. By using returnFirst there&#39;s no need for intAux, objAux, etc. There&#39;s less risk of mistakenly using the wrong variable somewhere, because there are no extra variables (in the caller, at least).","title":"Is it possible to write swap method in Java?","body":"<p>While it is not possible to write a function that simply swaps two variables, it is possible to write a <strong>helper function</strong> that allows you to:</p>\n<ul>\n<li>Swap two variables using <strong>only one statement</strong></li>\n<li><strong>Without temporary variables</strong> in the caller's code</li>\n<li><strong>Without 'boxing'</strong> primitives</li>\n<li>With a few overloads (one of them using generics), <strong>it works for any type</strong></li>\n</ul>\n<p>That's how you could do it:</p>\n<pre><code>int returnFirst(int x, int y) {\n    return x;\n}\n&lt;T&gt; T returnFirst(T x, T y) {\n    return x;\n}\n// other overloads as needed\nint a = 8, b = 3;\na = returnFirst(b, b = a); // try reading this as a = b; b = a;\nSystem.out.println(&quot;a: &quot; + a + &quot;, b: &quot; + b); // prints a: 3, b: 8\n</code></pre>\n<p>This works because the Java language guarantees (Java Language Specification, Java SE 7 Edition, section 15.12.4.2) that all arguments are evaluated from left to right (unlike some other languages, where the order of evaluation is undefined), so the execution order is:</p>\n<ol>\n<li>The original value of <code>b</code> is evaluated in order to be passed as the first argument to the function</li>\n<li>The expression <code>b = a</code> is evaluated, and the result (the new value of <code>b</code>) is passed as the second argument to the function</li>\n<li>The function executes, returning the original value of <code>b</code> and ignoring its new value</li>\n<li>You assign the result to <code>a</code></li>\n</ol>\n<p>If <code>returnFirst</code> is too long, you can choose a shorter name to make code more compact (e.g. <code>a = sw(b, b = a)</code>).</p>\n<p>Suppose you need to swap many variables of different types one after the other. By using returnFirst there's no need for intAux, objAux, etc. There's less risk of mistakenly using the wrong variable somewhere, because there are no extra variables (in the caller, at least).</p>\n"},{"tags":[],"owner":{"account_id":1433328,"reputation":11556,"user_id":1355221,"accept_rate":100,"display_name":"dansalmo"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1387154091,"creation_date":1387144345,"answer_id":20600262,"question_id":1363186,"body_markdown":"You can make a generic version of @marcus&#39;s swap method that swaps any number of objects of the same type:\r\n\r\n    &lt;T&gt; T swap(T... args) {   // usage: z = swap(a, a=b, b=c, ... y=z);\r\n        return args[0];\r\n    }\r\n\r\n    b = swap(a, a=b);\r\n    z = swap(x, x=y, y=z);","title":"Is it possible to write swap method in Java?","body":"<p>You can make a generic version of @marcus's swap method that swaps any number of objects of the same type:</p>\n\n<pre><code>&lt;T&gt; T swap(T... args) {   // usage: z = swap(a, a=b, b=c, ... y=z);\n    return args[0];\n}\n\nb = swap(a, a=b);\nz = swap(x, x=y, y=z);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4117782,"reputation":21,"user_id":3378940,"display_name":"wonderer"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1393934756,"creation_date":1393934756,"answer_id":22171489,"question_id":1363186,"body_markdown":"Here&#39;s a method that swaps two primitive variables\r\n\r\n    private void swap(){\r\n        int a = 1;\r\n        int b = 2;\r\n        int temp = a;\r\n        a = b;\r\n        b = temp;\r\n    }\r\n\r\nIt might not be of much use though ;)\r\n\r\n\r\nOk seriously, it could be done if the variables are class level:\r\n\r\n    public class MyClass{\r\n        // excuse horrible coding practice of public mutable fields\r\n        public int a = 1;\r\n        public int b = 2;\r\n\r\n        public void swap(){\r\n            int temp = a;\r\n            a = b;\r\n            b = temp;\r\n        }\r\n    }\r\n\r\nAgain though, I fail to see what the use of this could be","title":"Is it possible to write swap method in Java?","body":"<p>Here's a method that swaps two primitive variables</p>\n\n<pre><code>private void swap(){\n    int a = 1;\n    int b = 2;\n    int temp = a;\n    a = b;\n    b = temp;\n}\n</code></pre>\n\n<p>It might not be of much use though ;)</p>\n\n<p>Ok seriously, it could be done if the variables are class level:</p>\n\n<pre><code>public class MyClass{\n    // excuse horrible coding practice of public mutable fields\n    public int a = 1;\n    public int b = 2;\n\n    public void swap(){\n        int temp = a;\n        a = b;\n        b = temp;\n    }\n}\n</code></pre>\n\n<p>Again though, I fail to see what the use of this could be</p>\n"},{"tags":[],"owner":{"account_id":7047658,"reputation":21,"user_id":5397954,"display_name":"Bobby Brahmam"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1443712358,"creation_date":1443711915,"answer_id":32890904,"question_id":1363186,"body_markdown":"Yes it is possible to swap two variable using a method.\r\n**But you should declare that method with empty parentheses and then call it by\r\nreference(empty parentheses)** .\r\nHere is an example that illustrates swapping of two variable using a method.\r\n\r\npublic class Swapping\r\n   \r\n{\r\n\r\n\r\n\tstatic String A=&quot;Apple&quot;;\r\n\tstatic String B=&quot;Bat&quot;;\r\n \r\n\t\tpublic static  void swap()\r\n\t\t{\r\n           String k;\r\n\t\t\tk=A;\r\n\t\t\tA=B;\r\n\t\t\tB=k;\r\n\t\t\r\n\t\t}\r\n\t\r\n      public static void main(String[] args) \r\n      {\r\n        System.out.println(&quot;Before swapping&quot;);\r\n\t\tSystem.out.println(&quot;A= &quot;+A);\r\n\t\tSystem.out.println(&quot;B= &quot;+B);\r\n\t\tswap();\r\n\t\tSystem.out.println(&quot;After swapping&quot;);\r\n\t\tSystem.out.println(&quot;A= &quot;+A);\r\n\t\tSystem.out.println(&quot;B= &quot;+B);\r\n\t  }\r\n}\r\n\r\n\r\nBy compiling the above code the output comes as follows:\r\n\r\nBefore swapping\r\n\r\nA= Apple\r\n\r\nB= Bat\r\n\r\nAfter swapping\r\n\r\nA= Bat\r\n\r\nB= Apple\r\n\r\n//In case of call by reference original value is changed if we made changes in the called method","title":"Is it possible to write swap method in Java?","body":"<p>Yes it is possible to swap two variable using a method.\n<strong>But you should declare that method with empty parentheses and then call it by\nreference(empty parentheses)</strong> .\nHere is an example that illustrates swapping of two variable using a method.</p>\n\n<p>public class Swapping</p>\n\n<p>{</p>\n\n<pre><code>static String A=\"Apple\";\nstatic String B=\"Bat\";\n\n    public static  void swap()\n    {\n       String k;\n        k=A;\n        A=B;\n        B=k;\n\n    }\n\n  public static void main(String[] args) \n  {\n    System.out.println(\"Before swapping\");\n    System.out.println(\"A= \"+A);\n    System.out.println(\"B= \"+B);\n    swap();\n    System.out.println(\"After swapping\");\n    System.out.println(\"A= \"+A);\n    System.out.println(\"B= \"+B);\n  }\n</code></pre>\n\n<p>}</p>\n\n<p>By compiling the above code the output comes as follows:</p>\n\n<p>Before swapping</p>\n\n<p>A= Apple</p>\n\n<p>B= Bat</p>\n\n<p>After swapping</p>\n\n<p>A= Bat</p>\n\n<p>B= Apple</p>\n\n<p>//In case of call by reference original value is changed if we made changes in the called method</p>\n"},{"tags":[],"owner":{"account_id":6494340,"reputation":31,"user_id":5804526,"display_name":"Rohan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1453112202,"creation_date":1453109854,"answer_id":34851415,"question_id":1363186,"body_markdown":"I have read the above answers seeking an explanation as to why it is said that a swapping program cannot be written in java in the way it is written in c++.\r\n I did the following way\r\n[program screenshot][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/vM3lr.png","title":"Is it possible to write swap method in Java?","body":"<p>I have read the above answers seeking an explanation as to why it is said that a swapping program cannot be written in java in the way it is written in c++.\n I did the following way\n<a href=\"https://i.stack.imgur.com/vM3lr.png\" rel=\"nofollow\">program screenshot</a></p>\n"},{"tags":[],"owner":{"account_id":3063996,"reputation":5861,"user_id":2596109,"accept_rate":50,"display_name":"Oleg Mikhailov"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1463491470,"creation_date":1463491470,"answer_id":37277495,"question_id":1363186,"body_markdown":"One-liner for any primitive numbers:\r\n\r\n    a += (b - (b = a));\r\n","title":"Is it possible to write swap method in Java?","body":"<p>One-liner for any primitive numbers:</p>\n\n<pre><code>a += (b - (b = a));\n</code></pre>\n"}],"owner":{"account_id":43713,"reputation":94746,"user_id":127893,"accept_rate":90,"display_name":"Khaled Alshaya"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50748,"favorite_count":0,"down_vote_count":1,"up_vote_count":55,"closed_date":1463505337,"accepted_answer_id":1363200,"answer_count":13,"score":54,"last_activity_date":1675171279,"creation_date":1251819722,"question_id":1363186,"body_markdown":"Here is the question: write a method that swaps two variables. These two variables should be primitives. It doesn&#39;t need to be generic e.g. two `int` variables. Is there a way?!","title":"Is it possible to write swap method in Java?","body":"<p>Here is the question: write a method that swaps two variables. These two variables should be primitives. It doesn't need to be generic e.g. two <code>int</code> variables. Is there a way?!</p>\n"},{"tags":["java","eclipse","osgi","eclipse-rcp"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":2,"creation_date":1675174040,"post_id":75297779,"comment_id":132868492,"body_markdown":"Hit the _Select Required_ button. If this does not work, you have to add them to your target platform first.","body":"Hit the <i>Select Required</i> button. If this does not work, you have to add them to your target platform first."},{"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"score":2,"creation_date":1675174119,"post_id":75297779,"comment_id":132868519,"body_markdown":"You have to include all  the required bundles in your run configuration - this will usually be a lot more than you have shown. Or use a Feature based RCP when you just need to list a few features.","body":"You have to include all  the required bundles in your run configuration - this will usually be a lot more than you have shown. Or use a Feature based RCP when you just need to list a few features."},{"owner":{"account_id":5878211,"reputation":367,"user_id":4628462,"accept_rate":54,"display_name":"blaiso"},"score":0,"creation_date":1675181290,"post_id":75297779,"comment_id":132871233,"body_markdown":"Thanks @howlger\nIt worked after hitting the &quot;Select required&quot; Button.\n\nThans so much.","body":"Thanks @howlger It worked after hitting the &quot;Select required&quot; Button.  Thans so much."}],"owner":{"account_id":5878211,"reputation":367,"user_id":4628462,"accept_rate":54,"display_name":"blaiso"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675171078,"creation_date":1675171078,"question_id":75297779,"body_markdown":"I&#39;m actually learning OSGI with Eclipse RCP. I&#39;m created a plugin ProJet and a run configuration adding frameworks plugins as on the following image:\r\n[![enter image description here][1]][1]\r\n\r\n\r\nWhile trying to run my OSGI application, I&#39;m getting the following validations errors:\r\n[![enter image description here][2]][2]\r\n\r\nDo someone know how to fix this error?\r\n\r\nThanks so much for your help.\r\n\r\n  [1]: https://i.stack.imgur.com/DNFF6.png\r\n  [2]: https://i.stack.imgur.com/sg3zs.png","title":"Eclipse RCP How to fix &quot;Missing Constraint: Import-Package:&quot; and &quot;Require-Bundle&quot;","body":"<p>I'm actually learning OSGI with Eclipse RCP. I'm created a plugin ProJet and a run configuration adding frameworks plugins as on the following image:\n<a href=\"https://i.stack.imgur.com/DNFF6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DNFF6.png\" alt=\"enter image description here\" /></a></p>\n<p>While trying to run my OSGI application, I'm getting the following validations errors:\n<a href=\"https://i.stack.imgur.com/sg3zs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sg3zs.png\" alt=\"enter image description here\" /></a></p>\n<p>Do someone know how to fix this error?</p>\n<p>Thanks so much for your help.</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":7861034,"reputation":196,"user_id":5941456,"display_name":"Royi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675170751,"creation_date":1675170751,"answer_id":75297710,"question_id":75296673,"body_markdown":"You can Create static Callback or LiveData in LocationService and update the specific value that you want to use in your MainActivity.class:\r\n\r\n    public class LocationService extends Service {\r\n        private static MutableLiveData&lt;ArrayList&lt;LatLng&gt;&gt; locationArrayListData = new MutableLiveData&lt;&gt;();\r\n        public static LiveData&lt;ArrayList&lt;LatLng&gt;&gt; getLocationArrayListData(){\r\n                return locationArrayListData;\r\n        }\r\n        \r\n        private void updateLocationList(ArrayList&lt;LatLng&gt; newList) {\r\n                locationArrayListData.postValue(newList)\r\n        }\r\n\r\n    .\r\n    .\r\n    .\r\n    .\r\n    }\r\n\r\nAnd in your activity add this:\r\n\r\n    class MainActivity extends Activity {\r\n    .\r\n    .\r\n    \r\n        @Override\r\n        public void onCreate() {\r\n            .\r\n            .\r\n            LocationService.getLocationArrayListData().observe(this, {locationsList -&gt; {\r\n            //do What ever You Want With This &#39;locationList&#39;\r\n            }\r\n            .\r\n        }\r\n    \r\n    .\r\n    .\r\n    }","title":"LocationServer | How can i retrieve the information from a service to my mainActivity?","body":"<p>You can Create static Callback or LiveData in LocationService and update the specific value that you want to use in your MainActivity.class:</p>\n<pre><code>public class LocationService extends Service {\n    private static MutableLiveData&lt;ArrayList&lt;LatLng&gt;&gt; locationArrayListData = new MutableLiveData&lt;&gt;();\n    public static LiveData&lt;ArrayList&lt;LatLng&gt;&gt; getLocationArrayListData(){\n            return locationArrayListData;\n    }\n    \n    private void updateLocationList(ArrayList&lt;LatLng&gt; newList) {\n            locationArrayListData.postValue(newList)\n    }\n\n.\n.\n.\n.\n}\n</code></pre>\n<p>And in your activity add this:</p>\n<pre><code>class MainActivity extends Activity {\n.\n.\n\n    @Override\n    public void onCreate() {\n        .\n        .\n        LocationService.getLocationArrayListData().observe(this, {locationsList -&gt; {\n        //do What ever You Want With This 'locationList'\n        }\n        .\n    }\n\n.\n.\n}\n</code></pre>\n"}],"owner":{"account_id":25794920,"reputation":49,"user_id":19538282,"display_name":"Francisco Torres"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675170751,"creation_date":1675165640,"question_id":75296673,"body_markdown":"I have a location service, i can make Toast of my current Location, but i dont know how to send this information to my MAP in my activity.\r\n\r\nCan you please help me achieve that ?\r\n\r\n\r\nthe code where i need to send back is here :\r\n\r\n\r\n\r\n    @Override\r\n    public void onCreate() {\r\n        super.onCreate();\r\n    \r\n        new Notification();\r\n    \r\n        fusedLocationClient = LocationServices.getFusedLocationProviderClient(this);\r\n    \r\n        if (Build.VERSION.SDK_INT &gt; Build.VERSION_CODES.O) createNotificationChanel() ;\r\n        else startForeground(\r\n                1,\r\n                new Notification()\r\n        );\r\n    \r\n        locationRequest = LocationRequest.create();\r\n        locationRequest.setInterval(3000);\r\n        locationRequest.setFastestInterval(3000);\r\n        locationRequest.setMaxWaitTime(5000);\r\n        locationRequest.setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY);\r\n    \r\n        locationCallback = new LocationCallback() {\r\n            @Override\r\n            public void onLocationResult(@NonNull LocationResult locationResult) {\r\n                Location location =  locationResult.getLastLocation();\r\n                Toast.makeText(getApplicationContext(),\r\n                        &quot;Lat: &quot;+Double.toString(location.getLatitude()) + &#39;\\n&#39; +\r\n                                &quot;Long: &quot; + Double.toString(location.getLongitude()), Toast.LENGTH_LONG).show();\r\n    \r\n                currentCoor = new LLcoor(location.getLongitude(), location.getLatitude());\r\n    \r\n                //locationArrayList.add(new LatLng(location.getLatitude(), location.getLongitude()));\r\n    \r\n               /* for (Location location : locationResult.getLocations()) {\r\n                  location\r\n                }*/\r\n            }\r\n        };\r\n        startLocationUpdates();\r\n    }\r\n\r\n\r\n\r\n\r\ni need to keep updating my position on the map. Im using azureMaps\r\n\r\n\r\nIf you need the full class code is here :\r\n\r\n    public class LocationService extends Service {\r\n        public static ArrayList&lt;LatLng&gt; locationArrayList = new ArrayList&lt;LatLng&gt;();\r\n    \r\n        FusedLocationProviderClient fusedLocationClient;\r\n        LocationRequest locationRequest;\r\n        LocationCallback locationCallback;\r\n        LLcoor currentCoor;\r\n    \r\n        private void startLocationUpdates() {\r\n            if (ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n                // TODO: Consider calling\r\n                //    ActivityCompat#requestPermissions\r\n                // here to request the missing permissions, and then overriding\r\n                //   public void onRequestPermissionsResult(int requestCode, String[] permissions,\r\n                //                                          int[] grantResults)\r\n                // to handle the case where the user grants the permission. See the documentation\r\n                // for ActivityCompat#requestPermissions for more details.\r\n                return;\r\n            }\r\n            fusedLocationClient.requestLocationUpdates(locationRequest,\r\n                    locationCallback,\r\n                    Looper.getMainLooper());\r\n        }\r\n    \r\n        protected void createLocationRequest() {\r\n            LocationRequest locationRequest = LocationRequest.create();\r\n            locationRequest.setInterval(3000);\r\n            locationRequest.setFastestInterval(5000);\r\n            locationRequest.setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY);\r\n        }\r\n    \r\n        @Override\r\n        public void onCreate() {\r\n            super.onCreate();\r\n    \r\n            new Notification();\r\n    \r\n            fusedLocationClient = LocationServices.getFusedLocationProviderClient(this);\r\n    \r\n            if (Build.VERSION.SDK_INT &gt; Build.VERSION_CODES.O) createNotificationChanel() ;\r\n            else startForeground(\r\n                    1,\r\n                    new Notification()\r\n            );\r\n    \r\n            locationRequest = LocationRequest.create();\r\n            locationRequest.setInterval(3000);\r\n            locationRequest.setFastestInterval(3000);\r\n            locationRequest.setMaxWaitTime(5000);\r\n            locationRequest.setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY);\r\n    \r\n            locationCallback = new LocationCallback() {\r\n                @Override\r\n                public void onLocationResult(@NonNull LocationResult locationResult) {\r\n                    Location location =  locationResult.getLastLocation();\r\n                    Toast.makeText(getApplicationContext(),\r\n                            &quot;Lat: &quot;+Double.toString(location.getLatitude()) + &#39;\\n&#39; +\r\n                                    &quot;Long: &quot; + Double.toString(location.getLongitude()), Toast.LENGTH_LONG).show();\r\n    \r\n                    currentCoor = new LLcoor(location.getLongitude(), location.getLatitude());\r\n    \r\n                    //locationArrayList.add(new LatLng(location.getLatitude(), location.getLongitude()));\r\n    \r\n                   /* for (Location location : locationResult.getLocations()) {\r\n                      location\r\n                    }*/\r\n                }\r\n            };\r\n            startLocationUpdates();\r\n        }\r\n    \r\n    \r\n    \r\n        @RequiresApi(api = Build.VERSION_CODES.O)\r\n        private void createNotificationChanel() {\r\n            String notificationChannelId = &quot;Location channel id&quot;;\r\n            String channelName = &quot;Background Service&quot;;\r\n    \r\n            NotificationChannel chan = new NotificationChannel(\r\n                    notificationChannelId,\r\n                    channelName,\r\n                    NotificationManager.IMPORTANCE_NONE\r\n            );\r\n            chan.setLightColor(Color.BLUE);\r\n            chan.setLockscreenVisibility(Notification.VISIBILITY_PRIVATE);\r\n    \r\n            NotificationManager manager = getSystemService(NotificationManager.class);\r\n    \r\n            manager.createNotificationChannel(chan);\r\n    \r\n            NotificationCompat.Builder notificationBuilder =\r\n                    new NotificationCompat.Builder(this, notificationChannelId);\r\n    \r\n            Notification notification = notificationBuilder.setOngoing(true)\r\n                    .setContentTitle(&quot;Location updates:&quot;)\r\n                    .setPriority(NotificationManager.IMPORTANCE_MIN)\r\n                    .setCategory(Notification.CATEGORY_SERVICE)\r\n                    .build();\r\n            startForeground(2, notification);\r\n        }\r\n    \r\n        @Override\r\n        public int onStartCommand(Intent intent, int flags, int startId) {\r\n            super.onStartCommand(intent, flags, startId);\r\n            return START_STICKY;\r\n        }\r\n    \r\n        @Override\r\n        public void onDestroy() {\r\n            super.onDestroy();\r\n            fusedLocationClient.removeLocationUpdates(locationCallback);\r\n        }\r\n    \r\n        @Override\r\n        public IBinder onBind(Intent intent) {\r\n            return null;\r\n        }\r\n    \r\n    \r\n    }\r\n\r\n","title":"LocationServer | How can i retrieve the information from a service to my mainActivity?","body":"<p>I have a location service, i can make Toast of my current Location, but i dont know how to send this information to my MAP in my activity.</p>\n<p>Can you please help me achieve that ?</p>\n<p>the code where i need to send back is here :</p>\n<pre><code>@Override\npublic void onCreate() {\n    super.onCreate();\n\n    new Notification();\n\n    fusedLocationClient = LocationServices.getFusedLocationProviderClient(this);\n\n    if (Build.VERSION.SDK_INT &gt; Build.VERSION_CODES.O) createNotificationChanel() ;\n    else startForeground(\n            1,\n            new Notification()\n    );\n\n    locationRequest = LocationRequest.create();\n    locationRequest.setInterval(3000);\n    locationRequest.setFastestInterval(3000);\n    locationRequest.setMaxWaitTime(5000);\n    locationRequest.setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY);\n\n    locationCallback = new LocationCallback() {\n        @Override\n        public void onLocationResult(@NonNull LocationResult locationResult) {\n            Location location =  locationResult.getLastLocation();\n            Toast.makeText(getApplicationContext(),\n                    &quot;Lat: &quot;+Double.toString(location.getLatitude()) + '\\n' +\n                            &quot;Long: &quot; + Double.toString(location.getLongitude()), Toast.LENGTH_LONG).show();\n\n            currentCoor = new LLcoor(location.getLongitude(), location.getLatitude());\n\n            //locationArrayList.add(new LatLng(location.getLatitude(), location.getLongitude()));\n\n           /* for (Location location : locationResult.getLocations()) {\n              location\n            }*/\n        }\n    };\n    startLocationUpdates();\n}\n</code></pre>\n<p>i need to keep updating my position on the map. Im using azureMaps</p>\n<p>If you need the full class code is here :</p>\n<pre><code>public class LocationService extends Service {\n    public static ArrayList&lt;LatLng&gt; locationArrayList = new ArrayList&lt;LatLng&gt;();\n\n    FusedLocationProviderClient fusedLocationClient;\n    LocationRequest locationRequest;\n    LocationCallback locationCallback;\n    LLcoor currentCoor;\n\n    private void startLocationUpdates() {\n        if (ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n            // TODO: Consider calling\n            //    ActivityCompat#requestPermissions\n            // here to request the missing permissions, and then overriding\n            //   public void onRequestPermissionsResult(int requestCode, String[] permissions,\n            //                                          int[] grantResults)\n            // to handle the case where the user grants the permission. See the documentation\n            // for ActivityCompat#requestPermissions for more details.\n            return;\n        }\n        fusedLocationClient.requestLocationUpdates(locationRequest,\n                locationCallback,\n                Looper.getMainLooper());\n    }\n\n    protected void createLocationRequest() {\n        LocationRequest locationRequest = LocationRequest.create();\n        locationRequest.setInterval(3000);\n        locationRequest.setFastestInterval(5000);\n        locationRequest.setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY);\n    }\n\n    @Override\n    public void onCreate() {\n        super.onCreate();\n\n        new Notification();\n\n        fusedLocationClient = LocationServices.getFusedLocationProviderClient(this);\n\n        if (Build.VERSION.SDK_INT &gt; Build.VERSION_CODES.O) createNotificationChanel() ;\n        else startForeground(\n                1,\n                new Notification()\n        );\n\n        locationRequest = LocationRequest.create();\n        locationRequest.setInterval(3000);\n        locationRequest.setFastestInterval(3000);\n        locationRequest.setMaxWaitTime(5000);\n        locationRequest.setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY);\n\n        locationCallback = new LocationCallback() {\n            @Override\n            public void onLocationResult(@NonNull LocationResult locationResult) {\n                Location location =  locationResult.getLastLocation();\n                Toast.makeText(getApplicationContext(),\n                        &quot;Lat: &quot;+Double.toString(location.getLatitude()) + '\\n' +\n                                &quot;Long: &quot; + Double.toString(location.getLongitude()), Toast.LENGTH_LONG).show();\n\n                currentCoor = new LLcoor(location.getLongitude(), location.getLatitude());\n\n                //locationArrayList.add(new LatLng(location.getLatitude(), location.getLongitude()));\n\n               /* for (Location location : locationResult.getLocations()) {\n                  location\n                }*/\n            }\n        };\n        startLocationUpdates();\n    }\n\n\n\n    @RequiresApi(api = Build.VERSION_CODES.O)\n    private void createNotificationChanel() {\n        String notificationChannelId = &quot;Location channel id&quot;;\n        String channelName = &quot;Background Service&quot;;\n\n        NotificationChannel chan = new NotificationChannel(\n                notificationChannelId,\n                channelName,\n                NotificationManager.IMPORTANCE_NONE\n        );\n        chan.setLightColor(Color.BLUE);\n        chan.setLockscreenVisibility(Notification.VISIBILITY_PRIVATE);\n\n        NotificationManager manager = getSystemService(NotificationManager.class);\n\n        manager.createNotificationChannel(chan);\n\n        NotificationCompat.Builder notificationBuilder =\n                new NotificationCompat.Builder(this, notificationChannelId);\n\n        Notification notification = notificationBuilder.setOngoing(true)\n                .setContentTitle(&quot;Location updates:&quot;)\n                .setPriority(NotificationManager.IMPORTANCE_MIN)\n                .setCategory(Notification.CATEGORY_SERVICE)\n                .build();\n        startForeground(2, notification);\n    }\n\n    @Override\n    public int onStartCommand(Intent intent, int flags, int startId) {\n        super.onStartCommand(intent, flags, startId);\n        return START_STICKY;\n    }\n\n    @Override\n    public void onDestroy() {\n        super.onDestroy();\n        fusedLocationClient.removeLocationUpdates(locationCallback);\n    }\n\n    @Override\n    public IBinder onBind(Intent intent) {\n        return null;\n    }\n\n\n}\n</code></pre>\n"},{"tags":["java","intellij-idea","executable-jar"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1675163039,"post_id":75296133,"comment_id":132864848,"body_markdown":"Can you open the jar file in the ZIP editor of your choice and check if the com/google subtree is in there? According to your description IDEA should have put the necessary libraries in your Jar (building a UberJar or FatJar), but that seems to have failed. Generally speaking if you already use Gradle I wouldn&#39;t use the IDEA-way of generating that, but change your gradle script to build a fat jar instead.","body":"Can you open the jar file in the ZIP editor of your choice and check if the com/google subtree is in there? According to your description IDEA should have put the necessary libraries in your Jar (building a UberJar or FatJar), but that seems to have failed. Generally speaking if you already use Gradle I wouldn&#39;t use the IDEA-way of generating that, but change your gradle script to build a fat jar instead."}],"answers":[{"tags":[],"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675170499,"creation_date":1675170499,"answer_id":75297666,"question_id":75296133,"body_markdown":"# build.gradle\r\n\r\n```\r\nplugins {\r\n    id &#39;java&#39;\r\n}\r\n\r\ngroup &#39;org.example&#39;\r\nversion &#39;1.0-SNAPSHOT&#39;\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\ndependencies {\r\n    implementation &#39;com.google.code.gson:gson:2.10.1&#39;\r\n    testImplementation &#39;org.junit.jupiter:junit-jupiter-api:5.8.1&#39;\r\n    testRuntimeOnly &#39;org.junit.jupiter:junit-jupiter-engine:5.8.1&#39;\r\n}\r\n\r\ntest {\r\n    useJUnitPlatform()\r\n}\r\n\r\njar {\r\n    manifest {\r\n        attributes &quot;Main-Class&quot;: &quot;org.example.Main&quot;\r\n    }\r\n\r\n    from {\r\n        configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }\r\n    }\r\n}\r\n```\r\n\r\nIDEA Gui Right Side :  Gralde Tab , YourProject -&gt; `Tasks` -&gt; `jar`\r\n\r\nFind output jar file : YourProject -&gt; build/libs : yourApp.jar\r\n\r\n```\r\njava -jar yourApp.jar\r\n```\r\n\r\nThis method is create a fat jar, include dependencies class, only one jar.\r\n\r\nNo need other external jar files.","title":"Build an executable jar with external dependancies from intelij","body":"<h1>build.gradle</h1>\n<pre><code>plugins {\n    id 'java'\n}\n\ngroup 'org.example'\nversion '1.0-SNAPSHOT'\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation 'com.google.code.gson:gson:2.10.1'\n    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.8.1'\n    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.8.1'\n}\n\ntest {\n    useJUnitPlatform()\n}\n\njar {\n    manifest {\n        attributes &quot;Main-Class&quot;: &quot;org.example.Main&quot;\n    }\n\n    from {\n        configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }\n    }\n}\n</code></pre>\n<p>IDEA Gui Right Side :  Gralde Tab , YourProject -&gt; <code>Tasks</code> -&gt; <code>jar</code></p>\n<p>Find output jar file : YourProject -&gt; build/libs : yourApp.jar</p>\n<pre><code>java -jar yourApp.jar\n</code></pre>\n<p>This method is create a fat jar, include dependencies class, only one jar.</p>\n<p>No need other external jar files.</p>\n"}],"owner":{"account_id":4781478,"reputation":3,"user_id":3863066,"display_name":"rickmune"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75297666,"answer_count":1,"score":0,"last_activity_date":1675170499,"creation_date":1675162775,"question_id":75296133,"body_markdown":"I have a java console app with 5 classes and has one dependancy, gradle, com.google.code.gson.\r\nI do build an executable jar successfully, however I get the following error when I execute the jar using the command `java -jar &lt;jarName&gt;.jar`\r\n\r\n&gt; Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: com/google/gson/Gson\r\nCaused by: java.lang.ClassNotFoundException: com.google.gson.Gson\r\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:602)\r\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\r\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\r\n\r\n**Creating the artifact:**\r\n1. File -&gt; Project Structure -&gt; Artifacts -&gt; &quot;Click on Plus button&quot; -&gt; JAR -&gt; From module with dependancies\r\n\r\n\r\n\r\nI expected the jar file to run","title":"Build an executable jar with external dependancies from intelij","body":"<p>I have a java console app with 5 classes and has one dependancy, gradle, com.google.code.gson.\nI do build an executable jar successfully, however I get the following error when I execute the jar using the command <code>java -jar &lt;jarName&gt;.jar</code></p>\n<blockquote>\n<p>Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: com/google/gson/Gson\nCaused by: java.lang.ClassNotFoundException: com.google.gson.Gson\nat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:602)\nat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\nat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)</p>\n</blockquote>\n<p><strong>Creating the artifact:</strong></p>\n<ol>\n<li>File -&gt; Project Structure -&gt; Artifacts -&gt; &quot;Click on Plus button&quot; -&gt; JAR -&gt; From module with dependancies</li>\n</ol>\n<p>I expected the jar file to run</p>\n"},{"tags":["java","junit","mockito"],"comments":[{"owner":{"account_id":13299918,"reputation":406,"user_id":9601720,"display_name":"thmasker"},"score":0,"creation_date":1675166531,"post_id":75296824,"comment_id":132865934,"body_markdown":"What error are you getting? It seems to me you are not calling `checkVaultResponseErrors` during the test","body":"What error are you getting? It seems to me you are not calling <code>checkVaultResponseErrors</code> during the test"},{"owner":{"account_id":24214480,"reputation":55,"user_id":18170566,"display_name":"pussyCat"},"score":0,"creation_date":1675167537,"post_id":75296824,"comment_id":132866232,"body_markdown":"It seems you&#39;re right. I&#39;m getting `Wanted but not invoked:\nvaultService.checkVaultResponseErrors. Actually, there were zero interactions with this mock.`","body":"It seems you&#39;re right. I&#39;m getting <code>Wanted but not invoked: vaultService.checkVaultResponseErrors. Actually, there were zero interactions with this mock.</code>"},{"owner":{"account_id":13299918,"reputation":406,"user_id":9601720,"display_name":"thmasker"},"score":0,"creation_date":1675167699,"post_id":75296824,"comment_id":132866274,"body_markdown":"you have to call somehow (you will not be able to call protected methods from the test, so you&#39;ll have to make it public) that method between the doNothing and the verify","body":"you have to call somehow (you will not be able to call protected methods from the test, so you&#39;ll have to make it public) that method between the doNothing and the verify"},{"owner":{"account_id":13299918,"reputation":406,"user_id":9601720,"display_name":"thmasker"},"score":1,"creation_date":1675167774,"post_id":75296824,"comment_id":132866299,"body_markdown":"keep in mind also that probably doThrow and doNothing in your case are incompatible, since you are telling mockito to throw an exception when the method is invoked, and at the same time to do nothing...","body":"keep in mind also that probably doThrow and doNothing in your case are incompatible, since you are telling mockito to throw an exception when the method is invoked, and at the same time to do nothing..."}],"answers":[{"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675170003,"creation_date":1675170003,"answer_id":75297554,"question_id":75296824,"body_markdown":"Your test method clearly indicates that you want to test the `checkVaultResponseErrors` method. That means you should most definitely _not_ mock it. You can mock anything needed to make it work, but not the method itself.\r\n\r\nThe way I see it, there are three tests to write:\r\n\r\n1) No errors:\r\n```\r\n// create VaultResponse without errors; you have that now\r\n\r\nassertDoesNotThrow(() -&gt; vaultService.checkVaultResponseErrors(vaultResponse));\r\n```\r\n\r\n2) With an exception:\r\n```\r\n// create VaultResponse with status EXCEPTION\r\n\r\nVaultException thrown = assertThrows(VaultException.class,\r\n        () -&gt; vaultService.checkVaultResponseErrors(vaultResponse));\r\n// you can now assert that thrown is what you expect\r\n```\r\n\r\n3) With a failure:\r\n```\r\n// create VaultResponse with status FAILURE\r\n\r\nVaultFailure thrown = assertThrows(VaultFailure.class,\r\n        () -&gt; vaultService.checkVaultResponseErrors(vaultResponse));\r\n// you can now assert that thrown is what you expect\r\n```","title":"Junit test of void method","body":"<p>Your test method clearly indicates that you want to test the <code>checkVaultResponseErrors</code> method. That means you should most definitely <em>not</em> mock it. You can mock anything needed to make it work, but not the method itself.</p>\n<p>The way I see it, there are three tests to write:</p>\n<ol>\n<li>No errors:</li>\n</ol>\n<pre><code>// create VaultResponse without errors; you have that now\n\nassertDoesNotThrow(() -&gt; vaultService.checkVaultResponseErrors(vaultResponse));\n</code></pre>\n<ol start=\"2\">\n<li>With an exception:</li>\n</ol>\n<pre><code>// create VaultResponse with status EXCEPTION\n\nVaultException thrown = assertThrows(VaultException.class,\n        () -&gt; vaultService.checkVaultResponseErrors(vaultResponse));\n// you can now assert that thrown is what you expect\n</code></pre>\n<ol start=\"3\">\n<li>With a failure:</li>\n</ol>\n<pre><code>// create VaultResponse with status FAILURE\n\nVaultFailure thrown = assertThrows(VaultFailure.class,\n        () -&gt; vaultService.checkVaultResponseErrors(vaultResponse));\n// you can now assert that thrown is what you expect\n</code></pre>\n"}],"owner":{"account_id":24214480,"reputation":55,"user_id":18170566,"display_name":"pussyCat"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":347,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":75297554,"answer_count":1,"score":-1,"last_activity_date":1675170003,"creation_date":1675166385,"question_id":75296824,"body_markdown":"I&#39;m testing a method with a void return type, with one parameter. I&#39;m trying to get at least some code coverage. Here&#39;s a method I&#39;m testing:\r\n\r\n    @Service\r\n    public class VaultService {\r\n    \r\n        private final ProductRepository repository;\r\n    \r\n        private final DatabaseService databaseService;\r\n    \r\n        public VaultService(\r\n                @Autowired BuildProperties buildProperties,\r\n                ProductRepository repository,\r\n                DatabaseService databaseService\r\n        ) {\r\n            logger.info(&quot;Creating service&quot;);\r\n    \r\n            this.repository = repository;\r\n            this.databaseService = databaseService;\r\n        }\r\n    \r\n        protected void checkVaultResponseErrors(VaultResponse vaultResponse) {\r\n            if (vaultResponse.responseStatus != ResponseStatus.SUCCESS) {\r\n                vaultResponse.errors.forEach(error -&gt; {\r\n                    if (vaultResponse.responseStatus.equals(ResponseStatus.EXCEPTION)) {\r\n                        throw new VaultException(error.getMessage());\r\n                    }\r\n                    if (vaultResponse.responseStatus.equals(ResponseStatus.FAILURE)) {\r\n                        throw new VaultFailure(error.getMessage());\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\nThe VaultResponse class looks like this\r\n\r\n    @Getter\r\n    @Setter\r\n    @JsonInclude(JsonInclude.Include.NON_NULL)\r\n    public class VaultResponse {\r\n        @JsonProperty(&quot;responseStatus&quot;)\r\n        public ResponseStatus responseStatus;\r\n    \r\n        @JsonProperty(&quot;errors&quot;)\r\n        public List&lt;Error&gt; errors;\r\n    }\r\n\r\nAnd here is my test. I&#39;m getting an error with the `Mockito.verify`, but the rest of the code also doesn&#39;t get any coverage. I obviously doing something wrong.\r\n\r\n    @Test\r\n    void should_check_vaultResponse_for_errors() {\r\n        VaultService spyService = Mockito.spy(vaultService);\r\n        VaultResponse vaultResponse = new VaultResponse();\r\n        ResponseStatus status = ResponseStatus.SUCCESS;\r\n        List&lt;Error&gt; error = new ArrayList&lt;&gt;();\r\n\r\n        vaultResponse.setResponseStatus(status);\r\n        vaultResponse.setErrors(error);\r\n\r\n        doThrow(IllegalArgumentException.class)\r\n                .when(spyService).checkVaultResponseErrors(vaultResponse);\r\n        doNothing().when(spyService).checkVaultResponseErrors(vaultResponse);\r\n\r\n        verify(spyService, times(1)).checkVaultResponseErrors(vaultResponse);\r\n    }\r\n\r\n","title":"Junit test of void method","body":"<p>I'm testing a method with a void return type, with one parameter. I'm trying to get at least some code coverage. Here's a method I'm testing:</p>\n<pre><code>@Service\npublic class VaultService {\n\n    private final ProductRepository repository;\n\n    private final DatabaseService databaseService;\n\n    public VaultService(\n            @Autowired BuildProperties buildProperties,\n            ProductRepository repository,\n            DatabaseService databaseService\n    ) {\n        logger.info(&quot;Creating service&quot;);\n\n        this.repository = repository;\n        this.databaseService = databaseService;\n    }\n\n    protected void checkVaultResponseErrors(VaultResponse vaultResponse) {\n        if (vaultResponse.responseStatus != ResponseStatus.SUCCESS) {\n            vaultResponse.errors.forEach(error -&gt; {\n                if (vaultResponse.responseStatus.equals(ResponseStatus.EXCEPTION)) {\n                    throw new VaultException(error.getMessage());\n                }\n                if (vaultResponse.responseStatus.equals(ResponseStatus.FAILURE)) {\n                    throw new VaultFailure(error.getMessage());\n                }\n            });\n        }\n    }\n</code></pre>\n<p>The VaultResponse class looks like this</p>\n<pre><code>@Getter\n@Setter\n@JsonInclude(JsonInclude.Include.NON_NULL)\npublic class VaultResponse {\n    @JsonProperty(&quot;responseStatus&quot;)\n    public ResponseStatus responseStatus;\n\n    @JsonProperty(&quot;errors&quot;)\n    public List&lt;Error&gt; errors;\n}\n</code></pre>\n<p>And here is my test. I'm getting an error with the <code>Mockito.verify</code>, but the rest of the code also doesn't get any coverage. I obviously doing something wrong.</p>\n<pre><code>@Test\nvoid should_check_vaultResponse_for_errors() {\n    VaultService spyService = Mockito.spy(vaultService);\n    VaultResponse vaultResponse = new VaultResponse();\n    ResponseStatus status = ResponseStatus.SUCCESS;\n    List&lt;Error&gt; error = new ArrayList&lt;&gt;();\n\n    vaultResponse.setResponseStatus(status);\n    vaultResponse.setErrors(error);\n\n    doThrow(IllegalArgumentException.class)\n            .when(spyService).checkVaultResponseErrors(vaultResponse);\n    doNothing().when(spyService).checkVaultResponseErrors(vaultResponse);\n\n    verify(spyService, times(1)).checkVaultResponseErrors(vaultResponse);\n}\n</code></pre>\n"},{"tags":["java","spring","database","spring-boot","rest"],"answers":[{"tags":[],"owner":{"account_id":4709043,"reputation":227,"user_id":3810175,"display_name":"Ramin Safar Manesh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675169893,"creation_date":1675169893,"answer_id":75297526,"question_id":75296518,"body_markdown":"First you have to configure the Transaction Manger if you havnt&#39;t yet:\r\n[Transactions with Spring and JPA][1]\r\n\r\n\r\n  [1]: https://www.baeldung.com/transaction-configuration-with-jpa-and-spring\r\n\r\n\r\n\r\n\r\n    @Configuration\r\n    @EnableTransactionManagement\r\n    public class PersistenceJPAConfig{\r\n    \r\n       @Bean\r\n       public LocalContainerEntityManagerFactoryBean entityManagerFactory() {\r\n           //...\r\n       }\r\n    \r\n       @Bean\r\n       public PlatformTransactionManager transactionManager() {\r\n          JpaTransactionManager transactionManager = new JpaTransactionManager();\r\n          transactionManager.setEntityManagerFactory(entityManagerFactory().getObject());\r\n          return transactionManager;\r\n       }\r\n    }\r\n\r\nAnd the you put the transactional annotation on top of your target method:\r\n\r\n    @Transactional\r\n    public void saveTransaction(){\r\n     saveSomethingIntoDb();\r\n     throw new RuntimeException(&quot;Error&quot;);\r\n    }\r\n\r\nNow the transaction manger will rollback the DB-Changes from the command *saveSomethingIntoDb*","title":"How to achieve transaction rollback in spring boot if any exception occurs inside any method","body":"<p>First you have to configure the Transaction Manger if you havnt't yet:\n<a href=\"https://www.baeldung.com/transaction-configuration-with-jpa-and-spring\" rel=\"nofollow noreferrer\">Transactions with Spring and JPA</a></p>\n<pre><code>@Configuration\n@EnableTransactionManagement\npublic class PersistenceJPAConfig{\n\n   @Bean\n   public LocalContainerEntityManagerFactoryBean entityManagerFactory() {\n       //...\n   }\n\n   @Bean\n   public PlatformTransactionManager transactionManager() {\n      JpaTransactionManager transactionManager = new JpaTransactionManager();\n      transactionManager.setEntityManagerFactory(entityManagerFactory().getObject());\n      return transactionManager;\n   }\n}\n</code></pre>\n<p>And the you put the transactional annotation on top of your target method:</p>\n<pre><code>@Transactional\npublic void saveTransaction(){\n saveSomethingIntoDb();\n throw new RuntimeException(&quot;Error&quot;);\n}\n</code></pre>\n<p>Now the transaction manger will rollback the DB-Changes from the command <em>saveSomethingIntoDb</em></p>\n"}],"owner":{"account_id":25434499,"reputation":23,"user_id":19238411,"display_name":"Vinod S P"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":830,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1675169893,"creation_date":1675164861,"question_id":75296518,"body_markdown":"In spring boot I am trying to rollback transactions if any exception occurs anywhere inside the rest api method but it was doing transaction rollback only for that particular method not for all methods, And also help me in preventing response even after exception thrown. Please ignore my question asking style and format.\r\n\r\nHere is the rest api controller class:\r\n```\r\n@RequestMapping(path = &quot;/formDetails&quot;, produces = MediaType.APPLICATION_JSON_VALUE, method = RequestMethod.POST)\r\n\tpublic ManadateFormResponse generateMandateForm(@RequestBody ManadateFormRequest manadateFormRequest,\r\n\t\t\tWebRequest request) throws Exception {\r\n\t\t\r\n\t\tManadateFormResponse manadateFormResponse = new ManadateFormResponse();\r\n\r\n\t\tString errorStatus = environment.getRequiredProperty(&quot;rbi.status.error&quot;).trim();\r\n\t\tString adminZone = environment.getRequiredProperty(&quot;rbi.admin.zone&quot;).trim();\r\n\t\tString neft = environment.getRequiredProperty(&quot;payment.channel.type.neft&quot;).trim();\r\n\t\tString rtgs = environment.getRequiredProperty(&quot;payment.channel.type.rtgs&quot;).trim();\r\n\t\tString entityType = environment.getRequiredProperty(&quot;entity.type.&quot; + manadateFormRequest.getDutyType());\r\n\r\n\t\ttry {\r\n\t\t\t\r\n\t\t\tLong[] l_tokens = nEFTRTGSService.validateChallans(manadateFormRequest.getSelectedChallans());\r\n\r\n\t\t\tfinal List&lt;Long&gt; tokens = Arrays.asList(l_tokens);\r\n\t\t\tList&lt;EpaymentMainEntity&gt; challans = nEFTRTGSService.loadChallans(Arrays.asList(l_tokens),\r\n\t\t\t\t\trequest.getLocale());\r\n\r\n\t\t\tList&lt;Map&lt;String, Object&gt;&gt; challanDetails = CommonFunctions.processMajorHeads(challans, adminZone);\r\n\r\n\t\t\tfinal Map&lt;String, Object&gt; basicData = CommonFunctions.getTotalDutyAndUserAndExpiryDate(challans);\r\n\r\n\t\t\tString referenceNumber = EpayRefID.generateReferenceNumber(entityType, manadateFormRequest.getDocType());\r\n\t\t\tif (referenceNumber.length() &gt; 20) {\r\n\t\t\t\tthrow new ReferenceNumberGenerationException(messages\r\n\t\t\t\t\t\t.getMessage(&quot;message.exception.referenceNumberGenerationException&quot;, null, request.getLocale()));\r\n\t\t\t}\r\n\r\n\t\t\tnEFTRTGSService.initiatePayment(tokens, referenceNumber, challans, manadateFormRequest.getPaymentChannel(),\r\n\t\t\t\t\trequest.getLocale());\r\n\r\n\t\t\t\r\n\t\t\tnew Thread(() -&gt; {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t\r\n\t\t\t\t\tbasicData.put(&quot;refernceNumber&quot;, referenceNumber);\r\n\t\t\t\t\tbasicData.put(&quot;challanDetails&quot;, challanDetails);\r\n\t\t\t\t\tMap&lt;String, Object&gt; response = nEFTRTGSService.processNEFTRTGS(basicData);\r\n\t\t\t\t\tString status_cd = ((String) response.get(&quot;Status_cd&quot;)).trim();\r\n\t\t\t\t\tif (response == null || (status_cd).equals(errorStatus)) {\r\n\t\t\t\t\t\tresponse = nEFTRTGSService.processNEFTRTGS(basicData);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tstatus_cd = ((String) response.get(&quot;Status_cd&quot;)).trim();\r\n\t\t\t\t\t\tif (response == null || (status_cd).equals(errorStatus)) {\r\n\t\t\t\t\t\t\tresponse = nEFTRTGSService.processNEFTRTGS(basicData);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tList&lt;EpaymentMainEntity&gt; t_challans = nEFTRTGSService.loadChallans(Arrays.asList(l_tokens),\r\n\t\t\t\t\t\t\trequest.getLocale());\r\n\r\n\r\n\t\t\t\t\tnEFTRTGSService.updateResponse(response, referenceNumber, t_challans);\r\n\t\t\t\t} catch (Exception e) {\r\n\t\t\t\t\tthrow new APIServiceException(e.getLocalizedMessage());\r\n\r\n\t\t\t\t}\r\n\t\t\t}).start();\r\n\r\n\t\t\tepay3Service.postPaymentDetails(new IGEpay3DTO(referenceNumber), request.getLocale());\r\n\r\n\t\t\ttry {\r\n\t\t\t\tObject ExpDate = basicData.get(&quot;expiryDate&quot;);\r\n\r\n\t\t\t\tString strExpDate = String.valueOf(ExpDate);\r\n\t\t\t\tDate ExpDt = DateTimeUtility.parseJavaTimestamp(strExpDate);\r\n\r\n\t\t\t\tString dutyAmt = basicData.get(&quot;totalDuty&quot;).toString();\r\n\t\t\t\tBigDecimal totalDuty = new BigDecimal(dutyAmt);\r\n\r\n\t\t\t\tmanadateFormResponse = nEFTRTGSService.generateMandateForm(referenceNumber, ExpDt, totalDuty,\r\n\t\t\t\t\t\trequest.getLocale());\r\n\r\n\t\t\t} catch (ManadateFormGenerationException exception) {\r\n\t\t\t\tthrow exception;\r\n\t\t\t}\r\n\t\t} catch (Exception e) {\r\n\t\t\tthrow new ManadateFormGenerationException(messages.getMessage(&quot;message.exception.manadateFormGenerationException&quot;, null, request.getLocale()));\r\n\r\n\t\t}\r\n\r\n\t\treturn manadateFormResponse;\r\n\r\n\t}\r\n```\r\nAll the methods in implementations had @Transactional in service class and I tried adding @Transactional for rest api still not worked.\r\nConsider initiatePayment executed without any exceptions and some exception occurs in processNEFTRTGS method, it was only doing rollback for processNEFTRTGS method not for initiatePayment and also it was giving response return manadateFormResponse. So how can I achieve transaction rollback if any exception occurs in anywhere and need to prevent giving response if any exception occurs, Example initiatePayment, processNEFTRTGS ,updateResponse executed without any errors and exception occurred in postPaymentDetails at that time should rollback above transactions and also it should not give manadateFormResponse.","title":"How to achieve transaction rollback in spring boot if any exception occurs inside any method","body":"<p>In spring boot I am trying to rollback transactions if any exception occurs anywhere inside the rest api method but it was doing transaction rollback only for that particular method not for all methods, And also help me in preventing response even after exception thrown. Please ignore my question asking style and format.</p>\n<p>Here is the rest api controller class:</p>\n<pre><code>@RequestMapping(path = &quot;/formDetails&quot;, produces = MediaType.APPLICATION_JSON_VALUE, method = RequestMethod.POST)\n    public ManadateFormResponse generateMandateForm(@RequestBody ManadateFormRequest manadateFormRequest,\n            WebRequest request) throws Exception {\n        \n        ManadateFormResponse manadateFormResponse = new ManadateFormResponse();\n\n        String errorStatus = environment.getRequiredProperty(&quot;rbi.status.error&quot;).trim();\n        String adminZone = environment.getRequiredProperty(&quot;rbi.admin.zone&quot;).trim();\n        String neft = environment.getRequiredProperty(&quot;payment.channel.type.neft&quot;).trim();\n        String rtgs = environment.getRequiredProperty(&quot;payment.channel.type.rtgs&quot;).trim();\n        String entityType = environment.getRequiredProperty(&quot;entity.type.&quot; + manadateFormRequest.getDutyType());\n\n        try {\n            \n            Long[] l_tokens = nEFTRTGSService.validateChallans(manadateFormRequest.getSelectedChallans());\n\n            final List&lt;Long&gt; tokens = Arrays.asList(l_tokens);\n            List&lt;EpaymentMainEntity&gt; challans = nEFTRTGSService.loadChallans(Arrays.asList(l_tokens),\n                    request.getLocale());\n\n            List&lt;Map&lt;String, Object&gt;&gt; challanDetails = CommonFunctions.processMajorHeads(challans, adminZone);\n\n            final Map&lt;String, Object&gt; basicData = CommonFunctions.getTotalDutyAndUserAndExpiryDate(challans);\n\n            String referenceNumber = EpayRefID.generateReferenceNumber(entityType, manadateFormRequest.getDocType());\n            if (referenceNumber.length() &gt; 20) {\n                throw new ReferenceNumberGenerationException(messages\n                        .getMessage(&quot;message.exception.referenceNumberGenerationException&quot;, null, request.getLocale()));\n            }\n\n            nEFTRTGSService.initiatePayment(tokens, referenceNumber, challans, manadateFormRequest.getPaymentChannel(),\n                    request.getLocale());\n\n            \n            new Thread(() -&gt; {\n                try {\n                    \n                    basicData.put(&quot;refernceNumber&quot;, referenceNumber);\n                    basicData.put(&quot;challanDetails&quot;, challanDetails);\n                    Map&lt;String, Object&gt; response = nEFTRTGSService.processNEFTRTGS(basicData);\n                    String status_cd = ((String) response.get(&quot;Status_cd&quot;)).trim();\n                    if (response == null || (status_cd).equals(errorStatus)) {\n                        response = nEFTRTGSService.processNEFTRTGS(basicData);\n                        \n                        status_cd = ((String) response.get(&quot;Status_cd&quot;)).trim();\n                        if (response == null || (status_cd).equals(errorStatus)) {\n                            response = nEFTRTGSService.processNEFTRTGS(basicData);\n                            \n                        }\n                    }\n                    \n                    List&lt;EpaymentMainEntity&gt; t_challans = nEFTRTGSService.loadChallans(Arrays.asList(l_tokens),\n                            request.getLocale());\n\n\n                    nEFTRTGSService.updateResponse(response, referenceNumber, t_challans);\n                } catch (Exception e) {\n                    throw new APIServiceException(e.getLocalizedMessage());\n\n                }\n            }).start();\n\n            epay3Service.postPaymentDetails(new IGEpay3DTO(referenceNumber), request.getLocale());\n\n            try {\n                Object ExpDate = basicData.get(&quot;expiryDate&quot;);\n\n                String strExpDate = String.valueOf(ExpDate);\n                Date ExpDt = DateTimeUtility.parseJavaTimestamp(strExpDate);\n\n                String dutyAmt = basicData.get(&quot;totalDuty&quot;).toString();\n                BigDecimal totalDuty = new BigDecimal(dutyAmt);\n\n                manadateFormResponse = nEFTRTGSService.generateMandateForm(referenceNumber, ExpDt, totalDuty,\n                        request.getLocale());\n\n            } catch (ManadateFormGenerationException exception) {\n                throw exception;\n            }\n        } catch (Exception e) {\n            throw new ManadateFormGenerationException(messages.getMessage(&quot;message.exception.manadateFormGenerationException&quot;, null, request.getLocale()));\n\n        }\n\n        return manadateFormResponse;\n\n    }\n</code></pre>\n<p>All the methods in implementations had @Transactional in service class and I tried adding @Transactional for rest api still not worked.\nConsider initiatePayment executed without any exceptions and some exception occurs in processNEFTRTGS method, it was only doing rollback for processNEFTRTGS method not for initiatePayment and also it was giving response return manadateFormResponse. So how can I achieve transaction rollback if any exception occurs in anywhere and need to prevent giving response if any exception occurs, Example initiatePayment, processNEFTRTGS ,updateResponse executed without any errors and exception occurred in postPaymentDetails at that time should rollback above transactions and also it should not give manadateFormResponse.</p>\n"},{"tags":["java","eclipse","jsp","tomcat","servlets"],"comments":[{"owner":{"account_id":3057856,"reputation":1337,"user_id":2591131,"accept_rate":75,"display_name":"Eric"},"score":1,"creation_date":1436454356,"post_id":31321139,"comment_id":50629661,"body_markdown":"Clean basically means delete class files. A Clean All will delete all class files from all packages in the current project. The build will then simply compile all java files, which creates all the class files again.","body":"Clean basically means delete class files. A Clean All will delete all class files from all packages in the current project. The build will then simply compile all java files, which creates all the class files again."}],"answers":[{"tags":[],"owner":{"account_id":474169,"reputation":4184,"user_id":883679,"accept_rate":54,"display_name":"6ton"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1436454730,"creation_date":1436454730,"answer_id":31321545,"question_id":31321139,"body_markdown":"&gt; in eclipse I clean the project after making changes in .java or .xml\r\n&gt; files.How can I clean it using command line?\r\n\r\nYou can run javac from command line, but its not going to be very convenient. Recommend using a build tool like maven (or at least ant) for building your project. These tools can be run from command line and create your war\r\n\r\n&gt; What exactly clean and build does? cleaning is same as that of\r\n&gt; restarting a server?\r\n\r\nClean deletes the classes folder and build compiles your source code and creates the classes folder and the .class files\r\n\r\n&gt; What scenarios(developer point of view) requires Server restart?\r\n\r\nYou can use tomcat manager to hot-deploy your war so a server restart is not required - however you probably should not be doing this in production. \r\n\r\n&gt; editing css, html doesn&#39;t require server restart.On what file edits I\r\n&gt; should restart the server?\r\n\r\nAny changes to java files (deployed in WEB-INF/classes) or jars (in WEB-INF/lib) require a server restart - actually anything in WEB-INF. Any changes to css/html will also require you to re-deploy in case you are deploying as a war. A reploy is not needed in case you are using an exploded war (which I guess you are)\r\n\r\n&gt; Server.xml and context.xml requires restart or not?\r\n\r\nChanges in server.xml require a  restart. Changes in context.xml at least require a [re-deploy][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/14828296/tomcat-7-avoid-automatic-restart-when-change-context-xml","title":"How and when to clean and restart while editing code on tomcat production server","body":"<blockquote>\n  <p>in eclipse I clean the project after making changes in .java or .xml\n  files.How can I clean it using command line?</p>\n</blockquote>\n\n<p>You can run javac from command line, but its not going to be very convenient. Recommend using a build tool like maven (or at least ant) for building your project. These tools can be run from command line and create your war</p>\n\n<blockquote>\n  <p>What exactly clean and build does? cleaning is same as that of\n  restarting a server?</p>\n</blockquote>\n\n<p>Clean deletes the classes folder and build compiles your source code and creates the classes folder and the .class files</p>\n\n<blockquote>\n  <p>What scenarios(developer point of view) requires Server restart?</p>\n</blockquote>\n\n<p>You can use tomcat manager to hot-deploy your war so a server restart is not required - however you probably should not be doing this in production. </p>\n\n<blockquote>\n  <p>editing css, html doesn't require server restart.On what file edits I\n  should restart the server?</p>\n</blockquote>\n\n<p>Any changes to java files (deployed in WEB-INF/classes) or jars (in WEB-INF/lib) require a server restart - actually anything in WEB-INF. Any changes to css/html will also require you to re-deploy in case you are deploying as a war. A reploy is not needed in case you are using an exploded war (which I guess you are)</p>\n\n<blockquote>\n  <p>Server.xml and context.xml requires restart or not?</p>\n</blockquote>\n\n<p>Changes in server.xml require a  restart. Changes in context.xml at least require a <a href=\"https://stackoverflow.com/questions/14828296/tomcat-7-avoid-automatic-restart-when-change-context-xml\">re-deploy</a></p>\n"}],"owner":{"account_id":4604899,"reputation":5097,"user_id":3734640,"accept_rate":83,"display_name":"Govinda Sakhare"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2675,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":31321545,"answer_count":1,"score":1,"last_activity_date":1675169097,"creation_date":1436453694,"question_id":31321139,"body_markdown":"This question is going to consist many subquestions.\r\n\r\n 1. in eclipse I clean the project after making changes in .java or .xml files.How can I clean it using command line? \r\n 2. What exactly clean and build does? cleaning is same as that of restarting  a server?\r\n 3. What scenarios(developer point of view) requires Server restart?\r\n 4. editing css, html doesn&#39;t require server restart.On what file edits I should restart the server?\r\n 5. Server.xml and context.xml requires restart or not?","title":"How and when to clean and restart while editing code on tomcat production server","body":"<p>This question is going to consist many subquestions.</p>\n<ol>\n<li>in eclipse I clean the project after making changes in .java or .xml files.How can I clean it using command line?</li>\n<li>What exactly clean and build does? cleaning is same as that of restarting  a server?</li>\n<li>What scenarios(developer point of view) requires Server restart?</li>\n<li>editing css, html doesn't require server restart.On what file edits I should restart the server?</li>\n<li>Server.xml and context.xml requires restart or not?</li>\n</ol>\n"},{"tags":["java","pdf-to-html"],"owner":{"account_id":1111154,"reputation":3436,"user_id":1101596,"accept_rate":39,"display_name":"vikifor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675168652,"creation_date":1675168652,"question_id":75297268,"body_markdown":"I like to convert pdf document into html content. I am using PDF2Dom lib version 2.0.3\r\n\r\n    &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;\r\n            &lt;artifactId&gt;pdfbox&lt;/artifactId&gt;\r\n            &lt;version&gt;2.0.18&lt;/version&gt;\r\n     &lt;/dependency&gt;\r\n\r\nConversion works, so I wont paste my code... but I like to remove that blue border line from the html document. \r\n\r\nIf I open PDFDomTree source, I see defaultStyle is protected:\r\n\r\nhttps://github.com/radkovo/Pdf2Dom/blob/main/src/main/java/org/fit/pdfdom/PDFDomTree.java\r\n\r\nIs there anyway to overwrite it, or any suggestion for another tool.\r\n","title":"Remove defaultStyle from PDFDomTree","body":"<p>I like to convert pdf document into html content. I am using PDF2Dom lib version 2.0.3</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;\n        &lt;artifactId&gt;pdfbox&lt;/artifactId&gt;\n        &lt;version&gt;2.0.18&lt;/version&gt;\n &lt;/dependency&gt;\n</code></pre>\n<p>Conversion works, so I wont paste my code... but I like to remove that blue border line from the html document.</p>\n<p>If I open PDFDomTree source, I see defaultStyle is protected:</p>\n<p><a href=\"https://github.com/radkovo/Pdf2Dom/blob/main/src/main/java/org/fit/pdfdom/PDFDomTree.java\" rel=\"nofollow noreferrer\">https://github.com/radkovo/Pdf2Dom/blob/main/src/main/java/org/fit/pdfdom/PDFDomTree.java</a></p>\n<p>Is there anyway to overwrite it, or any suggestion for another tool.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2094057,"reputation":506074,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"score":1,"creation_date":1462355979,"post_id":37024300,"comment_id":61599039,"body_markdown":"Hashmaps have keys and values (2 things), rather than 50 fields.  Can you clarify what you are trying to achieve here?","body":"Hashmaps have keys and values (2 things), rather than 50 fields.  Can you clarify what you are trying to achieve here?"},{"owner":{"account_id":2011141,"reputation":7317,"user_id":1799530,"accept_rate":47,"display_name":"SomeJavaGuy"},"score":0,"creation_date":1462355997,"post_id":37024300,"comment_id":61599054,"body_markdown":"you&#180;d also have to provide a custom `Map` implementation, because the valid method to get the value for a key from the `Map` is the `get(Object)` method. There is nothing like `getInt` or `getString` in order to return different types from the Map.In the end it wouldn&#180;t make any sense to have them, because the return type is defined by the second generic type.","body":"you&#180;d also have to provide a custom <code>Map</code> implementation, because the valid method to get the value for a key from the <code>Map</code> is the <code>get(Object)</code> method. There is nothing like <code>getInt</code> or <code>getString</code> in order to return different types from the Map.In the end it wouldn&#180;t make any sense to have them, because the return type is defined by the second generic type."},{"owner":{"account_id":3599915,"reputation":7523,"user_id":3003432,"accept_rate":86,"display_name":"Mr.D"},"score":0,"creation_date":1462356149,"post_id":37024300,"comment_id":61599147,"body_markdown":"@TimBiegeleisen I want to convert all fields of my object to keys and values of hashmap.","body":"@TimBiegeleisen I want to convert all fields of my object to keys and values of hashmap."},{"owner":{"account_id":2011141,"reputation":7317,"user_id":1799530,"accept_rate":47,"display_name":"SomeJavaGuy"},"score":0,"creation_date":1462356254,"post_id":37024300,"comment_id":61599225,"body_markdown":"@Mr.D could you eleborate a usecase for this, because i can&#180;t see any. Calling a simple getter method would be more easy to me, especially since changing a single value in any of this fields would make the formerly generated `Map` an invalid one.","body":"@Mr.D could you eleborate a usecase for this, because i can&#180;t see any. Calling a simple getter method would be more easy to me, especially since changing a single value in any of this fields would make the formerly generated <code>Map</code> an invalid one."},{"owner":{"account_id":3599915,"reputation":7523,"user_id":3003432,"accept_rate":86,"display_name":"Mr.D"},"score":0,"creation_date":1462356467,"post_id":37024300,"comment_id":61599395,"body_markdown":"@KevinEsche there are some libs which accept only hashmaps","body":"@KevinEsche there are some libs which accept only hashmaps"},{"owner":{"account_id":2094057,"reputation":506074,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"score":0,"creation_date":1462356483,"post_id":37024300,"comment_id":61599409,"body_markdown":"@KevinEsche I agree that just using getters and setters would make more sense.","body":"@KevinEsche I agree that just using getters and setters would make more sense."}],"answers":[{"tags":[],"owner":{"account_id":5933575,"reputation":1348,"user_id":4667349,"accept_rate":75,"display_name":"PKuhn"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1462356114,"creation_date":1462356114,"answer_id":37024467,"question_id":37024300,"body_markdown":"You can use reflection for implementing this behavior. You can get all fields of the class you want to convert to map iterate over this fields and take the name of each field as key of the map. This will result in a map from String to object.  \r\n    \r\n    Map&lt;String, Object&gt; myObjectAsDict = new HashMap&lt;&gt;();    \r\n    Field[] allFields = SomeClass.class.getDeclaredFields();\r\n        for (Field field : allFields) {\r\n            Class&lt;?&gt; targetType = field.getType();\r\n            Object objectValue = targetType.newInstance();\r\n            Object value = field.get(objectValue);\r\n            myObjectAsDict.put(field.getName(), value);\r\n        }\r\n    }","title":"Java, Convert instance of Class to HashMap","body":"<p>You can use reflection for implementing this behavior. You can get all fields of the class you want to convert to map iterate over this fields and take the name of each field as key of the map. This will result in a map from String to object.  </p>\n\n<pre><code>Map&lt;String, Object&gt; myObjectAsDict = new HashMap&lt;&gt;();    \nField[] allFields = SomeClass.class.getDeclaredFields();\n    for (Field field : allFields) {\n        Class&lt;?&gt; targetType = field.getType();\n        Object objectValue = targetType.newInstance();\n        Object value = field.get(objectValue);\n        myObjectAsDict.put(field.getName(), value);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7113523,"reputation":1026,"user_id":5440604,"accept_rate":25,"display_name":"Mike Murphy"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1462356320,"creation_date":1462356320,"answer_id":37024554,"question_id":37024300,"body_markdown":"You might consider using a map instead of a class.\r\n\r\nOr have your class extend a map such as\r\n\r\n    public class MyObject extends HashMap&lt;String, Object&gt; {\r\n    \t\r\n    }\r\n\r\n","title":"Java, Convert instance of Class to HashMap","body":"<p>You might consider using a map instead of a class.</p>\n\n<p>Or have your class extend a map such as</p>\n\n<pre><code>public class MyObject extends HashMap&lt;String, Object&gt; {\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2269593,"reputation":43907,"user_id":1997376,"accept_rate":100,"display_name":"Nicolas Filotto"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1462356456,"creation_date":1462356456,"answer_id":37024607,"question_id":37024300,"body_markdown":"Something like that will do the trick:\r\n\r\n    MyObject obj = new MyObject();\r\n    obj.myInt = 1; obj.myString = &quot;string&quot;;\r\n    Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();\r\n    // Use MyObject.class.getFields() instead of getDeclaredFields()\r\n    // If you are interested in public fields only\r\n    for (Field field : MyObject.class.getDeclaredFields()) {\r\n        // Skip this if you intend to access to public fields only\r\n        if (!field.isAccessible()) {\r\n            field.setAccessible(true);\r\n        }\r\n        map.put(field.getName(), field.get(obj));\r\n    }\r\n    System.out.println(map);\r\n\r\n**Output:**\r\n\r\n    {myString=string, myInt=1}","title":"Java, Convert instance of Class to HashMap","body":"<p>Something like that will do the trick:</p>\n\n<pre><code>MyObject obj = new MyObject();\nobj.myInt = 1; obj.myString = \"string\";\nMap&lt;String, Object&gt; map = new HashMap&lt;&gt;();\n// Use MyObject.class.getFields() instead of getDeclaredFields()\n// If you are interested in public fields only\nfor (Field field : MyObject.class.getDeclaredFields()) {\n    // Skip this if you intend to access to public fields only\n    if (!field.isAccessible()) {\n        field.setAccessible(true);\n    }\n    map.put(field.getName(), field.get(obj));\n}\nSystem.out.println(map);\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>{myString=string, myInt=1}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6973318,"reputation":291,"user_id":5348851,"display_name":"profcalculus"},"down_vote_count":1,"up_vote_count":29,"is_accepted":false,"score":28,"last_activity_date":1575616027,"creation_date":1534270774,"answer_id":51847586,"question_id":37024300,"body_markdown":"With jackson library this is also possible\r\n\r\n```\r\nMyObject obj = new MyObject();\r\nobj.myInt = 1;\r\nobj.myString = &quot;1&quot;;\r\nObjectMapper mapObject = new ObjectMapper();\r\nMap &lt; String, Object &gt; mapObj = mapObject.convertValue(obj, Map.class);\r\n```\r\n\r\n","title":"Java, Convert instance of Class to HashMap","body":"<p>With jackson library this is also possible</p>\n\n<pre><code>MyObject obj = new MyObject();\nobj.myInt = 1;\nobj.myString = \"1\";\nObjectMapper mapObject = new ObjectMapper();\nMap &lt; String, Object &gt; mapObj = mapObject.convertValue(obj, Map.class);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2908204,"reputation":1283,"user_id":2493020,"accept_rate":67,"display_name":"Abdul Mohsin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1545214344,"creation_date":1545214344,"answer_id":53848961,"question_id":37024300,"body_markdown":"If you don&#39;t want to use Reflection then you can use my trick. hope this may help for someone.\r\n\r\nSuppose your class looks like this. \r\n\r\n    public class MyClass {\r\n             private int id;\r\n             private String name; \r\n    }\r\n\r\nNow Override toString() method in this class. in Eclipse there is a shortcut for generating this method also. \r\n\r\n\r\n    public class MyClass {\r\n        private int id;\r\n        private String name; \r\n        \r\n        @Override\r\n    \tpublic String toString() {\r\n    \t\tStringBuilder builder = new StringBuilder();\r\n    \t\tbuilder.append(&quot;MyClass [id=&quot;).append(id).append(&quot;, name=&quot;).append(name).append(&quot;]&quot;);\r\n    \t\treturn builder.toString();\r\n    \t}\r\n    \r\n    }\r\n\r\nNow  write a method inside this class that will convert your object into `Map&lt;String,String&gt;`\r\n\r\n    public Map&lt;String, String&gt; asMap() {\r\n    \t\tMap&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();\r\n    \t\tString stringRepresentation = this.toString();\r\n    \t\tif (stringRepresentation == null || stringRepresentation.trim().equals(&quot;&quot;)) {\r\n    \t\t\treturn map;\r\n    \t\t}\r\n    \t\tif (stringRepresentation.contains(&quot;[&quot;)) {\r\n    \t\t\tint index = stringRepresentation.indexOf(&quot;[&quot;);\r\n    \t\t\tstringRepresentation = stringRepresentation.substring(index + 1, stringRepresentation.length());\r\n    \t\t}\r\n    \t\tif (stringRepresentation.endsWith(&quot;]&quot;)) {\r\n    \t\t\tstringRepresentation = stringRepresentation.substring(0, stringRepresentation.length() - 1);\r\n    \t\t}\r\n    \t\tString[] commaSeprated = stringRepresentation.split(&quot;,&quot;);\r\n    \t\tfor (int i = 0; i &lt; commaSeprated.length; i++) {\r\n    \t\t\tString keyEqualsValue = commaSeprated[i];\r\n    \t\t\tkeyEqualsValue = keyEqualsValue.trim();\r\n    \t\t\tif (keyEqualsValue.equals(&quot;&quot;) || !keyEqualsValue.contains(&quot;=&quot;)) {\r\n    \t\t\t\tcontinue;\r\n    \t\t\t}\r\n    \t\t\tString[] keyValue = keyEqualsValue.split(&quot;=&quot;, 2);\r\n    \t\t\tif (keyValue.length &gt; 1) {\r\n    \t\t\t\tmap.put(keyValue[0].trim(), keyValue[1].trim());\r\n    \t\t\t}\r\n    \r\n    \t\t}\r\n    \t\treturn map;\r\n    \t}\r\n\r\n\r\n\r\nNow from any where in your application you can simply call this method to get your HashMap from the Object. Cheers","title":"Java, Convert instance of Class to HashMap","body":"<p>If you don't want to use Reflection then you can use my trick. hope this may help for someone.</p>\n\n<p>Suppose your class looks like this. </p>\n\n<pre><code>public class MyClass {\n         private int id;\n         private String name; \n}\n</code></pre>\n\n<p>Now Override toString() method in this class. in Eclipse there is a shortcut for generating this method also. </p>\n\n<pre><code>public class MyClass {\n    private int id;\n    private String name; \n\n    @Override\n    public String toString() {\n        StringBuilder builder = new StringBuilder();\n        builder.append(\"MyClass [id=\").append(id).append(\", name=\").append(name).append(\"]\");\n        return builder.toString();\n    }\n\n}\n</code></pre>\n\n<p>Now  write a method inside this class that will convert your object into <code>Map&lt;String,String&gt;</code></p>\n\n<pre><code>public Map&lt;String, String&gt; asMap() {\n        Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();\n        String stringRepresentation = this.toString();\n        if (stringRepresentation == null || stringRepresentation.trim().equals(\"\")) {\n            return map;\n        }\n        if (stringRepresentation.contains(\"[\")) {\n            int index = stringRepresentation.indexOf(\"[\");\n            stringRepresentation = stringRepresentation.substring(index + 1, stringRepresentation.length());\n        }\n        if (stringRepresentation.endsWith(\"]\")) {\n            stringRepresentation = stringRepresentation.substring(0, stringRepresentation.length() - 1);\n        }\n        String[] commaSeprated = stringRepresentation.split(\",\");\n        for (int i = 0; i &lt; commaSeprated.length; i++) {\n            String keyEqualsValue = commaSeprated[i];\n            keyEqualsValue = keyEqualsValue.trim();\n            if (keyEqualsValue.equals(\"\") || !keyEqualsValue.contains(\"=\")) {\n                continue;\n            }\n            String[] keyValue = keyEqualsValue.split(\"=\", 2);\n            if (keyValue.length &gt; 1) {\n                map.put(keyValue[0].trim(), keyValue[1].trim());\n            }\n\n        }\n        return map;\n    }\n</code></pre>\n\n<p>Now from any where in your application you can simply call this method to get your HashMap from the Object. Cheers</p>\n"},{"tags":[],"owner":{"account_id":22909694,"reputation":652,"user_id":17047177,"display_name":"A.Casanova"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675168628,"creation_date":1675168628,"answer_id":75297263,"question_id":37024300,"body_markdown":"Updated approach using reflection:\r\n\r\n```java\r\n  public static &lt;T&gt; Map&lt;String, String&gt; parseInnerClass(T classInstance) {\r\n    LinkedHashMap&lt;String, String&gt; ret = new LinkedHashMap&lt;&gt;();\r\n\r\n    for (Field attr : classInstance.getClass().getDeclaredFields()) {\r\n      String attrValue = &quot;&quot;;\r\n      attr.setAccessible(true);\r\n\r\n      try {\r\n        attrValue = attr.get(classInstance).toString();\r\n      } catch (IllegalAccessException | NullPointerException e) {\r\n        // Do not add nothing\r\n      }\r\n\r\n      ret.put(attr.getName(), attrValue);\r\n    }\r\n    return ret;\r\n  }\r\n```","title":"Java, Convert instance of Class to HashMap","body":"<p>Updated approach using reflection:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  public static &lt;T&gt; Map&lt;String, String&gt; parseInnerClass(T classInstance) {\n    LinkedHashMap&lt;String, String&gt; ret = new LinkedHashMap&lt;&gt;();\n\n    for (Field attr : classInstance.getClass().getDeclaredFields()) {\n      String attrValue = &quot;&quot;;\n      attr.setAccessible(true);\n\n      try {\n        attrValue = attr.get(classInstance).toString();\n      } catch (IllegalAccessException | NullPointerException e) {\n        // Do not add nothing\n      }\n\n      ret.put(attr.getName(), attrValue);\n    }\n    return ret;\n  }\n</code></pre>\n"}],"owner":{"account_id":3599915,"reputation":7523,"user_id":3003432,"accept_rate":86,"display_name":"Mr.D"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49041,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"accepted_answer_id":37024467,"answer_count":6,"score":21,"last_activity_date":1675168628,"creation_date":1462355713,"question_id":37024300,"body_markdown":"If I have class like this:\r\n\r\n    class MyObject {\r\n        public int myInt;\r\n        public String myString;\r\n    }\r\n\r\nIs it possible to convert instance of this class to HashMap without implementing converting code?\r\n\r\n    MyObject obj = new MyObject();\r\n    obj.myInt = 1; obj.myString = &quot;string&quot;;\r\n    HashMap&lt;String, Object&gt; hs = convert(obj);\r\n\r\n    hs.getInt(&quot;myInt&quot;); // returns 1\r\n    hs.getString(&quot;myString&quot;); // returns &quot;string&quot;\r\n\r\nDoes Java provide that kind of solution, or I need to implement `convert` by myself?\r\n\r\nMy Class has more than 50 fields and writing converter for each field is not so good idea.","title":"Java, Convert instance of Class to HashMap","body":"<p>If I have class like this:</p>\n\n<pre><code>class MyObject {\n    public int myInt;\n    public String myString;\n}\n</code></pre>\n\n<p>Is it possible to convert instance of this class to HashMap without implementing converting code?</p>\n\n<pre><code>MyObject obj = new MyObject();\nobj.myInt = 1; obj.myString = \"string\";\nHashMap&lt;String, Object&gt; hs = convert(obj);\n\nhs.getInt(\"myInt\"); // returns 1\nhs.getString(\"myString\"); // returns \"string\"\n</code></pre>\n\n<p>Does Java provide that kind of solution, or I need to implement <code>convert</code> by myself?</p>\n\n<p>My Class has more than 50 fields and writing converter for each field is not so good idea.</p>\n"},{"tags":["java","json","spring","nested","stripe-payments"],"comments":[{"owner":{"account_id":25681176,"reputation":777,"user_id":19443941,"display_name":"os4m37"},"score":0,"creation_date":1675163370,"post_id":75296085,"comment_id":132864930,"body_markdown":"How are you calling Stripe APIs ? using what Http Client and what Serializer? Are you using Stripe Java SDK https://github.com/stripe/stripe-java ?\n\nOr, you are just trying to parse a local .json file, if so how are you charging it and serializing the Subscription object ?","body":"How are you calling Stripe APIs ? using what Http Client and what Serializer? Are you using Stripe Java SDK <a href=\"https://github.com/stripe/stripe-java\" rel=\"nofollow noreferrer\">github.com/stripe/stripe-java</a> ?  Or, you are just trying to parse a local .json file, if so how are you charging it and serializing the Subscription object ?"},{"owner":{"display_name":"user13906062"},"score":0,"creation_date":1675163979,"post_id":75296085,"comment_id":132865112,"body_markdown":"hey @os4m37 , i&#39;m testing with a json file :) and yes , that&#39;s not the problem because i&#39;ve a test that &quot;test&quot; anothers values that worked, but not nested. It&#39;s only the nested values that does not work for me","body":"hey @os4m37 , i&#39;m testing with a json file :) and yes , that&#39;s not the problem because i&#39;ve a test that &quot;test&quot; anothers values that worked, but not nested. It&#39;s only the nested values that does not work for me"},{"owner":{"account_id":17006998,"reputation":713,"user_id":12302982,"display_name":"Igor Flakiewicz"},"score":0,"creation_date":1675164807,"post_id":75296085,"comment_id":132865387,"body_markdown":"Add your entire test code.","body":"Add your entire test code."},{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":2,"creation_date":1675166675,"post_id":75296085,"comment_id":132865987,"body_markdown":"I noticed a &quot;-&quot; in your sample json in the 4th last line. Once I removed this the assertThat was successful (ie no exception). A System.out.println(subscriptionDetails) printed this, which looks good: SubscriptionDetails(plan=SubscriptionDetails.Plan(amount=1900))","body":"I noticed a &quot;-&quot; in your sample json in the 4th last line. Once I removed this the assertThat was successful (ie no exception). A System.out.println(subscriptionDetails) printed this, which looks good: SubscriptionDetails(plan=SubscriptionDetails.Plan(amount=190&zwnj;&#8203;0))"},{"owner":{"display_name":"user13906062"},"score":0,"creation_date":1675168586,"post_id":75296085,"comment_id":132866607,"body_markdown":"@IgorFlakiewicz done, and I&#39;ve added the test","body":"@IgorFlakiewicz done, and I&#39;ve added the test"},{"owner":{"account_id":25681176,"reputation":777,"user_id":19443941,"display_name":"os4m37"},"score":0,"creation_date":1675180826,"post_id":75296085,"comment_id":132871066,"body_markdown":"I see that you are mocking Stripe APIs, try checking the Stripe mock server:\nhttps://github.com/stripe/stripe-mock\nOtherwise, check @JohnWilliams comment in order to solve your issue","body":"I see that you are mocking Stripe APIs, try checking the Stripe mock server: <a href=\"https://github.com/stripe/stripe-mock\" rel=\"nofollow noreferrer\">github.com/stripe/stripe-mock</a> Otherwise, check @JohnWilliams comment in order to solve your issue"}],"owner":{"display_name":"user13906062"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":121,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675168561,"creation_date":1675162534,"question_id":75296085,"body_markdown":"Here is my json file:\r\n```\r\n{\r\n  &quot;id&quot;: &quot;sub_1M3z4ZFuWMT5VbyLdhxe1SGB&quot;,\r\n  &quot;object&quot;: &quot;subscription&quot;,\r\n  &quot;application&quot;: null,\r\n  &quot;application_fee_percent&quot;: null,\r\n  &quot;automatic_tax&quot;: {\r\n    &quot;enabled&quot;: true\r\n  },\r\n  &quot;billing_cycle_anchor&quot;: 1671096923,\r\n  &quot;billing_thresholds&quot;: null,\r\n  &quot;cancel_at&quot;: null,\r\n  &quot;cancel_at_period_end&quot;: false,\r\n  &quot;canceled_at&quot;: null,\r\n  &quot;collection_method&quot;: &quot;charge_automatically&quot;,\r\n  &quot;created&quot;: 1668418523,\r\n  &quot;currency&quot;: &quot;eur&quot;,\r\n  &quot;current_period_end&quot;: 1673775323,\r\n  &quot;current_period_start&quot;: 1671096923,\r\n  &quot;customer&quot;: &quot;cus_MnaFTQN0THNHcw&quot;,\r\n  &quot;days_until_due&quot;: null,\r\n  &quot;default_payment_method&quot;: &quot;pm_1M3z4WFuWMT5VbyLzq2CMtRb&quot;,\r\n  &quot;default_source&quot;: null,\r\n  &quot;default_tax_rates&quot;: [],\r\n  &quot;description&quot;: null,\r\n  &quot;discount&quot;: null,\r\n  &quot;ended_at&quot;: null,\r\n  &quot;items&quot;: {\r\n    &quot;object&quot;: &quot;list&quot;,\r\n    &quot;data&quot;: [\r\n      {\r\n        &quot;id&quot;: &quot;si_MnaFGSZRM6lgJ5&quot;,\r\n        &quot;object&quot;: &quot;subscription_item&quot;,\r\n        &quot;billing_thresholds&quot;: null,\r\n        &quot;created&quot;: 1668418523,\r\n        &quot;metadata&quot;: {},\r\n        &quot;plan&quot;: {\r\n          &quot;id&quot;: &quot;price_1LN1ZwFuWMT5VbyLdOZ3X83u&quot;,\r\n          &quot;object&quot;: &quot;plan&quot;,\r\n          &quot;active&quot;: true,\r\n          &quot;aggregate_usage&quot;: null,\r\n          &quot;amount&quot;: 1900,\r\n          &quot;amount_decimal&quot;: &quot;1900&quot;,\r\n          &quot;billing_scheme&quot;: &quot;per_unit&quot;,\r\n          &quot;created&quot;: 1658180052,\r\n          &quot;currency&quot;: &quot;eur&quot;,\r\n          &quot;interval&quot;: &quot;month&quot;,\r\n          &quot;interval_count&quot;: 1,\r\n          &quot;livemode&quot;: false,\r\n          &quot;metadata&quot;: {},\r\n          &quot;nickname&quot;: null,\r\n          &quot;product&quot;: &quot;prod_M5BxCLyY8BJinB&quot;,\r\n          &quot;tiers_mode&quot;: null,\r\n          &quot;transform_usage&quot;: null,\r\n          &quot;trial_period_days&quot;: null,\r\n          &quot;usage_type&quot;: &quot;licensed&quot;\r\n        },\r\n        &quot;price&quot;: {\r\n          &quot;id&quot;: &quot;price_1LN1ZwFuWMT5VbyLdOZ3X83u&quot;,\r\n          &quot;object&quot;: &quot;price&quot;,\r\n          &quot;active&quot;: true,\r\n          &quot;billing_scheme&quot;: &quot;per_unit&quot;,\r\n          &quot;created&quot;: 1658180052,\r\n          &quot;currency&quot;: &quot;eur&quot;,\r\n          &quot;custom_unit_amount&quot;: null,\r\n          &quot;livemode&quot;: false,\r\n          &quot;lookup_key&quot;: &quot;mini&quot;,\r\n          &quot;metadata&quot;: {},\r\n          &quot;nickname&quot;: null,\r\n          &quot;product&quot;: &quot;prod_M5BxCLyY8BJinB&quot;,\r\n          &quot;recurring&quot;: {\r\n            &quot;aggregate_usage&quot;: null,\r\n            &quot;interval&quot;: &quot;month&quot;,\r\n            &quot;interval_count&quot;: 1,\r\n            &quot;trial_period_days&quot;: null,\r\n            &quot;usage_type&quot;: &quot;licensed&quot;\r\n          },\r\n          &quot;tax_behavior&quot;: &quot;inclusive&quot;,\r\n          &quot;tiers_mode&quot;: null,\r\n          &quot;transform_quantity&quot;: null,\r\n          &quot;type&quot;: &quot;recurring&quot;,\r\n          &quot;unit_amount&quot;: 1900,\r\n          &quot;unit_amount_decimal&quot;: &quot;1900&quot;\r\n        },\r\n        &quot;quantity&quot;: 1,\r\n        &quot;subscription&quot;: &quot;sub_1M3z4ZFuWMT5VbyLdhxe1SGB&quot;,\r\n        &quot;tax_rates&quot;: []\r\n      }\r\n    ],\r\n    &quot;has_more&quot;: false,\r\n    &quot;total_count&quot;: 1,\r\n    &quot;url&quot;: &quot;/v1/subscription_items?subscription=sub_1M3z4ZFuWMT5VbyLdhxe1SGB&quot;\r\n  },\r\n  &quot;latest_invoice&quot;: &quot;in_1MFDqoFuWMT5VbyLT3EyrqPd&quot;,\r\n  &quot;livemode&quot;: false,\r\n  &quot;metadata&quot;: {},\r\n  &quot;next_pending_invoice_item_invoice&quot;: null,\r\n  &quot;on_behalf_of&quot;: null,\r\n  &quot;pause_collection&quot;: null,\r\n  &quot;payment_settings&quot;: {\r\n    &quot;payment_method_options&quot;: null,\r\n    &quot;payment_method_types&quot;: null,\r\n    &quot;save_default_payment_method&quot;: &quot;off&quot;\r\n  },\r\n  &quot;pending_invoice_item_interval&quot;: null,\r\n  &quot;pending_setup_intent&quot;: null,\r\n  &quot;pending_update&quot;: null,\r\n  &quot;plan&quot;: {\r\n    &quot;id&quot;: &quot;price_1LN1ZwFuWMT5VbyLdOZ3X83u&quot;,\r\n    &quot;object&quot;: &quot;plan&quot;,\r\n    &quot;active&quot;: true,\r\n    &quot;aggregate_usage&quot;: null,\r\n    &quot;amount&quot;: 1900,\r\n    &quot;amount_decimal&quot;: &quot;1900&quot;,\r\n    &quot;billing_scheme&quot;: &quot;per_unit&quot;,\r\n    &quot;created&quot;: 1658180052,\r\n    &quot;currency&quot;: &quot;eur&quot;,\r\n    &quot;interval&quot;: &quot;month&quot;,\r\n    &quot;interval_count&quot;: 1,\r\n    &quot;livemode&quot;: false,\r\n    &quot;metadata&quot;: {},\r\n    &quot;nickname&quot;: null,\r\n    &quot;product&quot;: &quot;prod_M5BxCLyY8BJinB&quot;,\r\n    &quot;tiers_mode&quot;: null,\r\n    &quot;transform_usage&quot;: null,\r\n    &quot;trial_period_days&quot;: null,\r\n    &quot;usage_type&quot;: &quot;licensed&quot;\r\n  },\r\n  &quot;quantity&quot;: 1,\r\n  -\r\n  &quot;trial_end&quot;: 1671096923,\r\n  &quot;trial_start&quot;: 1668418523\r\n}\r\n```\r\n\r\nIt&#39;s the subscription object from Stripe.\r\n\r\nI want to create a class called SubscriptionDetails that has an amount field (in the datas plan object)\r\n\r\nI&#39;ve done that, but with my tests, I see that amount equals 0, I don&#39;t know why:\r\nhere is my class:\r\n```\r\n@Data\r\n@JsonIgnoreProperties(ignoreUnknown = true)\r\npublic class SubscriptionDetails implements Serializable {\r\n    @JsonProperty(&quot;plan&quot;)\r\n    private Plan plan;\r\n    @Data\r\n    @JsonIgnoreProperties(ignoreUnknown = true)\r\n    public class Plan {\r\n        @JsonProperty(&quot;amount&quot;)\r\n        private int amount;\r\n    }\r\n}\r\n```\r\n\r\nCan you help me please ?\r\n\r\nI also tried to do this:\r\n```\r\n@Data\r\n@JsonIgnoreProperties(ignoreUnknown = true)\r\npublic class SubscriptionDetails implements Serializable {\r\n\r\n    @JsonProperty(&quot;plan&quot;)\r\n    private Plan plan;\r\n    \r\n}\r\n```\r\n\r\nwith Plan object from stripe but it doesn&#39;t work.\r\n\r\nHere is what i want to test:\r\n\r\n```\r\n @Test\r\n    public void testRetrieveSubscriptionDetails_ok()\r\n            throws IOException, URISyntaxException, StripeClientException, BadRequestException {\r\n        String body = FileUtils.readFileToString(ResourceUtils.getFile(&quot;classpath:json/subscriptions-200.json&quot;),\r\n                StandardCharsets.UTF_8);\r\n        mockServer\r\n                .expect(ExpectedCount.once(),\r\n                        requestTo(new URI(&quot;http://localhost:80/v1/subscriptions/sub_1M3z4ZFuWMT5VbyLdhxe1SGB&quot;)))\r\n                .andExpect(header(&quot;Accept&quot;, &quot;application/json, application/*+json&quot;))\r\n                .andExpect(header(&quot;Authorization&quot;, &quot;Bearer test&quot;)).andExpect(header(&quot;Content-Length&quot;, &quot;0&quot;))\r\n                .andExpect(method(HttpMethod.GET))\r\n                .andRespond(withStatus(HttpStatus.OK).contentType(MediaType.APPLICATION_JSON).body(body));\r\n        SubscriptionDetails subscriptionDetails = this.stripeClient\r\n                .retrieveSubscriptionDetails(&quot;sub_1M3z4ZFuWMT5VbyLdhxe1SGB&quot;);\r\n        mockServer.verify();\r\n        Assertions.assertThat(subscriptionDetails).isNotNull();\r\n        Assertions.assertThat(subscriptionDetails.getTrialEnd()).isEqualTo(1671096923L);\r\n        Assertions.assertThat(subscriptionDetails.getAmount()).isEqualTo(19.00);\r\n```\r\n\r\n\r\n","title":"How to get nested data from a JSON file in Spring Boot?","body":"<p>Here is my json file:</p>\n<pre><code>{\n  &quot;id&quot;: &quot;sub_1M3z4ZFuWMT5VbyLdhxe1SGB&quot;,\n  &quot;object&quot;: &quot;subscription&quot;,\n  &quot;application&quot;: null,\n  &quot;application_fee_percent&quot;: null,\n  &quot;automatic_tax&quot;: {\n    &quot;enabled&quot;: true\n  },\n  &quot;billing_cycle_anchor&quot;: 1671096923,\n  &quot;billing_thresholds&quot;: null,\n  &quot;cancel_at&quot;: null,\n  &quot;cancel_at_period_end&quot;: false,\n  &quot;canceled_at&quot;: null,\n  &quot;collection_method&quot;: &quot;charge_automatically&quot;,\n  &quot;created&quot;: 1668418523,\n  &quot;currency&quot;: &quot;eur&quot;,\n  &quot;current_period_end&quot;: 1673775323,\n  &quot;current_period_start&quot;: 1671096923,\n  &quot;customer&quot;: &quot;cus_MnaFTQN0THNHcw&quot;,\n  &quot;days_until_due&quot;: null,\n  &quot;default_payment_method&quot;: &quot;pm_1M3z4WFuWMT5VbyLzq2CMtRb&quot;,\n  &quot;default_source&quot;: null,\n  &quot;default_tax_rates&quot;: [],\n  &quot;description&quot;: null,\n  &quot;discount&quot;: null,\n  &quot;ended_at&quot;: null,\n  &quot;items&quot;: {\n    &quot;object&quot;: &quot;list&quot;,\n    &quot;data&quot;: [\n      {\n        &quot;id&quot;: &quot;si_MnaFGSZRM6lgJ5&quot;,\n        &quot;object&quot;: &quot;subscription_item&quot;,\n        &quot;billing_thresholds&quot;: null,\n        &quot;created&quot;: 1668418523,\n        &quot;metadata&quot;: {},\n        &quot;plan&quot;: {\n          &quot;id&quot;: &quot;price_1LN1ZwFuWMT5VbyLdOZ3X83u&quot;,\n          &quot;object&quot;: &quot;plan&quot;,\n          &quot;active&quot;: true,\n          &quot;aggregate_usage&quot;: null,\n          &quot;amount&quot;: 1900,\n          &quot;amount_decimal&quot;: &quot;1900&quot;,\n          &quot;billing_scheme&quot;: &quot;per_unit&quot;,\n          &quot;created&quot;: 1658180052,\n          &quot;currency&quot;: &quot;eur&quot;,\n          &quot;interval&quot;: &quot;month&quot;,\n          &quot;interval_count&quot;: 1,\n          &quot;livemode&quot;: false,\n          &quot;metadata&quot;: {},\n          &quot;nickname&quot;: null,\n          &quot;product&quot;: &quot;prod_M5BxCLyY8BJinB&quot;,\n          &quot;tiers_mode&quot;: null,\n          &quot;transform_usage&quot;: null,\n          &quot;trial_period_days&quot;: null,\n          &quot;usage_type&quot;: &quot;licensed&quot;\n        },\n        &quot;price&quot;: {\n          &quot;id&quot;: &quot;price_1LN1ZwFuWMT5VbyLdOZ3X83u&quot;,\n          &quot;object&quot;: &quot;price&quot;,\n          &quot;active&quot;: true,\n          &quot;billing_scheme&quot;: &quot;per_unit&quot;,\n          &quot;created&quot;: 1658180052,\n          &quot;currency&quot;: &quot;eur&quot;,\n          &quot;custom_unit_amount&quot;: null,\n          &quot;livemode&quot;: false,\n          &quot;lookup_key&quot;: &quot;mini&quot;,\n          &quot;metadata&quot;: {},\n          &quot;nickname&quot;: null,\n          &quot;product&quot;: &quot;prod_M5BxCLyY8BJinB&quot;,\n          &quot;recurring&quot;: {\n            &quot;aggregate_usage&quot;: null,\n            &quot;interval&quot;: &quot;month&quot;,\n            &quot;interval_count&quot;: 1,\n            &quot;trial_period_days&quot;: null,\n            &quot;usage_type&quot;: &quot;licensed&quot;\n          },\n          &quot;tax_behavior&quot;: &quot;inclusive&quot;,\n          &quot;tiers_mode&quot;: null,\n          &quot;transform_quantity&quot;: null,\n          &quot;type&quot;: &quot;recurring&quot;,\n          &quot;unit_amount&quot;: 1900,\n          &quot;unit_amount_decimal&quot;: &quot;1900&quot;\n        },\n        &quot;quantity&quot;: 1,\n        &quot;subscription&quot;: &quot;sub_1M3z4ZFuWMT5VbyLdhxe1SGB&quot;,\n        &quot;tax_rates&quot;: []\n      }\n    ],\n    &quot;has_more&quot;: false,\n    &quot;total_count&quot;: 1,\n    &quot;url&quot;: &quot;/v1/subscription_items?subscription=sub_1M3z4ZFuWMT5VbyLdhxe1SGB&quot;\n  },\n  &quot;latest_invoice&quot;: &quot;in_1MFDqoFuWMT5VbyLT3EyrqPd&quot;,\n  &quot;livemode&quot;: false,\n  &quot;metadata&quot;: {},\n  &quot;next_pending_invoice_item_invoice&quot;: null,\n  &quot;on_behalf_of&quot;: null,\n  &quot;pause_collection&quot;: null,\n  &quot;payment_settings&quot;: {\n    &quot;payment_method_options&quot;: null,\n    &quot;payment_method_types&quot;: null,\n    &quot;save_default_payment_method&quot;: &quot;off&quot;\n  },\n  &quot;pending_invoice_item_interval&quot;: null,\n  &quot;pending_setup_intent&quot;: null,\n  &quot;pending_update&quot;: null,\n  &quot;plan&quot;: {\n    &quot;id&quot;: &quot;price_1LN1ZwFuWMT5VbyLdOZ3X83u&quot;,\n    &quot;object&quot;: &quot;plan&quot;,\n    &quot;active&quot;: true,\n    &quot;aggregate_usage&quot;: null,\n    &quot;amount&quot;: 1900,\n    &quot;amount_decimal&quot;: &quot;1900&quot;,\n    &quot;billing_scheme&quot;: &quot;per_unit&quot;,\n    &quot;created&quot;: 1658180052,\n    &quot;currency&quot;: &quot;eur&quot;,\n    &quot;interval&quot;: &quot;month&quot;,\n    &quot;interval_count&quot;: 1,\n    &quot;livemode&quot;: false,\n    &quot;metadata&quot;: {},\n    &quot;nickname&quot;: null,\n    &quot;product&quot;: &quot;prod_M5BxCLyY8BJinB&quot;,\n    &quot;tiers_mode&quot;: null,\n    &quot;transform_usage&quot;: null,\n    &quot;trial_period_days&quot;: null,\n    &quot;usage_type&quot;: &quot;licensed&quot;\n  },\n  &quot;quantity&quot;: 1,\n  -\n  &quot;trial_end&quot;: 1671096923,\n  &quot;trial_start&quot;: 1668418523\n}\n</code></pre>\n<p>It's the subscription object from Stripe.</p>\n<p>I want to create a class called SubscriptionDetails that has an amount field (in the datas plan object)</p>\n<p>I've done that, but with my tests, I see that amount equals 0, I don't know why:\nhere is my class:</p>\n<pre><code>@Data\n@JsonIgnoreProperties(ignoreUnknown = true)\npublic class SubscriptionDetails implements Serializable {\n    @JsonProperty(&quot;plan&quot;)\n    private Plan plan;\n    @Data\n    @JsonIgnoreProperties(ignoreUnknown = true)\n    public class Plan {\n        @JsonProperty(&quot;amount&quot;)\n        private int amount;\n    }\n}\n</code></pre>\n<p>Can you help me please ?</p>\n<p>I also tried to do this:</p>\n<pre><code>@Data\n@JsonIgnoreProperties(ignoreUnknown = true)\npublic class SubscriptionDetails implements Serializable {\n\n    @JsonProperty(&quot;plan&quot;)\n    private Plan plan;\n    \n}\n</code></pre>\n<p>with Plan object from stripe but it doesn't work.</p>\n<p>Here is what i want to test:</p>\n<pre><code> @Test\n    public void testRetrieveSubscriptionDetails_ok()\n            throws IOException, URISyntaxException, StripeClientException, BadRequestException {\n        String body = FileUtils.readFileToString(ResourceUtils.getFile(&quot;classpath:json/subscriptions-200.json&quot;),\n                StandardCharsets.UTF_8);\n        mockServer\n                .expect(ExpectedCount.once(),\n                        requestTo(new URI(&quot;http://localhost:80/v1/subscriptions/sub_1M3z4ZFuWMT5VbyLdhxe1SGB&quot;)))\n                .andExpect(header(&quot;Accept&quot;, &quot;application/json, application/*+json&quot;))\n                .andExpect(header(&quot;Authorization&quot;, &quot;Bearer test&quot;)).andExpect(header(&quot;Content-Length&quot;, &quot;0&quot;))\n                .andExpect(method(HttpMethod.GET))\n                .andRespond(withStatus(HttpStatus.OK).contentType(MediaType.APPLICATION_JSON).body(body));\n        SubscriptionDetails subscriptionDetails = this.stripeClient\n                .retrieveSubscriptionDetails(&quot;sub_1M3z4ZFuWMT5VbyLdhxe1SGB&quot;);\n        mockServer.verify();\n        Assertions.assertThat(subscriptionDetails).isNotNull();\n        Assertions.assertThat(subscriptionDetails.getTrialEnd()).isEqualTo(1671096923L);\n        Assertions.assertThat(subscriptionDetails.getAmount()).isEqualTo(19.00);\n</code></pre>\n"},{"tags":["java","spring-boot","spring-kafka","spring-cloud-stream","spring-cloud-stream-binder-kafka"],"comments":[{"owner":{"account_id":6015718,"reputation":41,"user_id":4724665,"display_name":"Sach"},"score":0,"creation_date":1675247219,"post_id":75297191,"comment_id":132885804,"body_markdown":"Ignore this issue. It was a configuration issue from my side. I have batch-mode enabled and I have enabled enableDLQ as well. After disabling enableDLQ it worked.","body":"Ignore this issue. It was a configuration issue from my side. I have batch-mode enabled and I have enabled enableDLQ as well. After disabling enableDLQ it worked."},{"owner":{"account_id":5986102,"reputation":239,"user_id":4703638,"display_name":"Darpan27"},"score":0,"creation_date":1675917790,"post_id":75297191,"comment_id":133032179,"body_markdown":"I faced the same issue. If you disable dlq then does that mean it does not support dlq for batch consumption? How do I achieve dlq in batch mode on?","body":"I faced the same issue. If you disable dlq then does that mean it does not support dlq for batch consumption? How do I achieve dlq in batch mode on?"},{"owner":{"account_id":6015718,"reputation":41,"user_id":4724665,"display_name":"Sach"},"score":0,"creation_date":1676373254,"post_id":75297191,"comment_id":133119802,"body_markdown":"follow https://docs.spring.io/spring-kafka/docs/2.7.x/reference/html/#dead-letters for dlq to handle in batch mode","body":"follow <a href=\"https://docs.spring.io/spring-kafka/docs/2.7.x/reference/html/#dead-letters\" rel=\"nofollow noreferrer\">docs.spring.io/spring-kafka/docs/2.7.x/reference/html/&hellip;</a> for dlq to handle in batch mode"}],"owner":{"account_id":6015718,"reputation":41,"user_id":4724665,"display_name":"Sach"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1675168329,"creation_date":1675168329,"question_id":75297191,"body_markdown":"I am using spring-cloud-stream-binder-kafka version 3.2.6 in my application. I have enabled the batch-mode so that I should get the messages in batches. While handling DLQ scenario I observed that, In my batch if I have 3 messages and if my last message fail then entire batch goes to DLQ. Although I am throwing BatchListenerFailedException with the correct index of the message.\r\n\r\nAfter debugging further I observed in Class **org.springframework.cloud.stream.binder.kafka KafkaMessageChannelBinder** method **getErrorMessageHandler** throws ClassCastException (Can not cast LinkedList to ConsumerRecord). Below is that line.\r\n\r\n``` ConsumerRecord&lt;Object, Object&gt; record = StaticMessageHeaderAccessor.getSourceData(message); ```\r\n\r\nMethod ``` StaticMessageHeaderAccessor.getSourceData(message) ``` returns list of ConsumerRecord but in the code it is expecting single consumer record. Is this a bug? If not can somebody help me to find how to resolve this issue.\r\n\r\nAppreciate your early response.\r\n\r\nThanks\r\n ","title":"Spring Cloud stream binder kafka DLQ Handling for Batching doesn&#39;t work","body":"<p>I am using spring-cloud-stream-binder-kafka version 3.2.6 in my application. I have enabled the batch-mode so that I should get the messages in batches. While handling DLQ scenario I observed that, In my batch if I have 3 messages and if my last message fail then entire batch goes to DLQ. Although I am throwing BatchListenerFailedException with the correct index of the message.</p>\n<p>After debugging further I observed in Class <strong>org.springframework.cloud.stream.binder.kafka KafkaMessageChannelBinder</strong> method <strong>getErrorMessageHandler</strong> throws ClassCastException (Can not cast LinkedList to ConsumerRecord). Below is that line.</p>\n<p><code>ConsumerRecord&lt;Object, Object&gt; record = StaticMessageHeaderAccessor.getSourceData(message);</code></p>\n<p>Method <code>StaticMessageHeaderAccessor.getSourceData(message)</code> returns list of ConsumerRecord but in the code it is expecting single consumer record. Is this a bug? If not can somebody help me to find how to resolve this issue.</p>\n<p>Appreciate your early response.</p>\n<p>Thanks</p>\n"},{"tags":["java","mysql","testing","spring-boot","integration-testing"],"comments":[{"owner":{"account_id":7689071,"reputation":593,"user_id":5825926,"display_name":"Akash"},"score":3,"creation_date":1502563684,"post_id":45653753,"comment_id":78265816,"body_markdown":"Probably duplicate of https://stackoverflow.com/questions/28007686/how-can-i-provide-different-database-configurations-with-spring-boot","body":"Probably duplicate of <a href=\"https://stackoverflow.com/questions/28007686/how-can-i-provide-different-database-configurations-with-spring-boot\" title=\"how can i provide different database configurations with spring boot\">stackoverflow.com/questions/28007686/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":6225104,"reputation":3680,"user_id":4843624,"accept_rate":67,"display_name":"progonkpa"},"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1675168247,"creation_date":1502569195,"answer_id":45654580,"question_id":45653753,"body_markdown":"I had application.properties in /src/main/java/resources with a data source configuration for the main application.\r\n\r\nI added application-test.properties to /src/test/java/resources with a data source configuration to a database for testing. Additionally, I added `@ActiveProfiles(&quot;test&quot;)` to the test that should use that database.\r\n\r\nNote that Spring configures itself using the word test in application-test.properties and in the annotation. As such, Spring overrides the configuration of application.properties.\r\n\r\napplication.properties:\r\n\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/database\r\n    spring.datasource.username=user\r\n    spring.datasource.password=secret\r\n    spring.datasource.driverClassName=com.mysql.jdbc.Driver\r\n\r\napplication-test.properties:\r\n\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/database_test\r\n    spring.datasource.username=user\r\n    spring.datasource.password=secret\r\n    spring.datasource.driver-class-name=com.mysql.jdbc.Driver\r\n","title":"How to tell Spring Boot to use another DB for test?","body":"<p>I had application.properties in /src/main/java/resources with a data source configuration for the main application.</p>\n<p>I added application-test.properties to /src/test/java/resources with a data source configuration to a database for testing. Additionally, I added <code>@ActiveProfiles(&quot;test&quot;)</code> to the test that should use that database.</p>\n<p>Note that Spring configures itself using the word test in application-test.properties and in the annotation. As such, Spring overrides the configuration of application.properties.</p>\n<p>application.properties:</p>\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/database\nspring.datasource.username=user\nspring.datasource.password=secret\nspring.datasource.driverClassName=com.mysql.jdbc.Driver\n</code></pre>\n<p>application-test.properties:</p>\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/database_test\nspring.datasource.username=user\nspring.datasource.password=secret\nspring.datasource.driver-class-name=com.mysql.jdbc.Driver\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9592064,"reputation":5123,"user_id":7122593,"accept_rate":78,"display_name":"Barath"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1502601393,"creation_date":1502601393,"answer_id":45657333,"question_id":45653753,"body_markdown":"Though the question already has an answer. \r\n\r\nWe can also use `@DataJpaTest` if you want to test JPA applications. By default it will configure an in-memory embedded database, scan for @Entity classes and configure Spring Data JPA repositories. Regular @Component beans will not be loaded into the ApplicationContext.\r\n\r\nIt is one of the testing improvements made in spring boot application. \r\n\r\nRead Docs : https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-testing.html","title":"How to tell Spring Boot to use another DB for test?","body":"<p>Though the question already has an answer. </p>\n\n<p>We can also use <code>@DataJpaTest</code> if you want to test JPA applications. By default it will configure an in-memory embedded database, scan for @Entity classes and configure Spring Data JPA repositories. Regular @Component beans will not be loaded into the ApplicationContext.</p>\n\n<p>It is one of the testing improvements made in spring boot application. </p>\n\n<p>Read Docs : <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-testing.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-testing.html</a></p>\n"},{"tags":[],"owner":{"account_id":21713,"reputation":295592,"user_id":53013,"accept_rate":78,"display_name":"Daniel C. Sobral"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1623685389,"creation_date":1623685389,"answer_id":67973342,"question_id":45653753,"body_markdown":"The in-memory database is used by default on tests. You can disable that behavior and get it to use the application-configured database adding the annotation `@AutoConfigureTestDatabase(replace = Replace.NONE)` to your tests (see [Auto-configured Data JPA Tests][1]).\r\n\r\nYou can then either add an `application.properties` or equivalent to `src/test/resources` or a separate application file such as `application-test.properties` and make the tests use it by annotating them with `@ActiveProfiles(&quot;test&quot;)`.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.testing.spring-boot-applications.autoconfigured-spring-data-jpa","title":"How to tell Spring Boot to use another DB for test?","body":"<p>The in-memory database is used by default on tests. You can disable that behavior and get it to use the application-configured database adding the annotation <code>@AutoConfigureTestDatabase(replace = Replace.NONE)</code> to your tests (see <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.testing.spring-boot-applications.autoconfigured-spring-data-jpa\" rel=\"nofollow noreferrer\">Auto-configured Data JPA Tests</a>).</p>\n<p>You can then either add an <code>application.properties</code> or equivalent to <code>src/test/resources</code> or a separate application file such as <code>application-test.properties</code> and make the tests use it by annotating them with <code>@ActiveProfiles(&quot;test&quot;)</code>.</p>\n"}],"owner":{"account_id":6225104,"reputation":3680,"user_id":4843624,"accept_rate":67,"display_name":"progonkpa"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17570,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":45654580,"answer_count":3,"score":16,"last_activity_date":1675168247,"creation_date":1502563548,"question_id":45653753,"body_markdown":"I&#39;d like Spring Boot to use a MySQL test database that exists next to the application database for integration tests. At the moment, it&#39;s using a H2 database automatically because I added the H2 dependency in Gradle.\r\n\r\nThis test for example now runs using the H2 database, where I&#39;d rather have it used a physical secondary database.\r\n\r\n    import org.junit.Test;\r\n    import org.junit.runner.RunWith;\r\n    import org.observer.media.model.MediaGroup;\r\n    import org.observer.media.repository.MediaGroupRepository;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.boot.test.context.SpringBootTest;\r\n    import org.springframework.test.context.junit4.SpringRunner;\r\n    \r\n    import javax.persistence.EntityManager;\r\n    import javax.persistence.PersistenceContext;\r\n    \r\n    import static org.assertj.core.api.Assertions.assertThat;\r\n    \r\n    @RunWith(SpringRunner.class)\r\n    @SpringBootTest\r\n    public class MediaGroupServiceTest {\r\n    \r\n        @Autowired\r\n        private MediaGroupService mediaGroupService;\r\n        @Autowired\r\n        private MediaGroupRepository mediaGroupRepository;\r\n    \r\n        @PersistenceContext\r\n        private EntityManager entityManager;\r\n    \r\n        private MediaGroup mediaGroup = new MediaGroup(&quot;name&quot;, &quot;ceo&quot;, &quot;owner&quot;);\r\n    \r\n        @Test\r\n        public void save() {\r\n            MediaGroup entity = mediaGroupService.saveNew(mediaGroup);\r\n    \r\n            assertThat(mediaGroupRepository.findByName(mediaGroup.getName())).isEqualTo(entity);\r\n        }\r\n    }","title":"How to tell Spring Boot to use another DB for test?","body":"<p>I'd like Spring Boot to use a MySQL test database that exists next to the application database for integration tests. At the moment, it's using a H2 database automatically because I added the H2 dependency in Gradle.</p>\n\n<p>This test for example now runs using the H2 database, where I'd rather have it used a physical secondary database.</p>\n\n<pre><code>import org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.observer.media.model.MediaGroup;\nimport org.observer.media.repository.MediaGroupRepository;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.test.context.junit4.SpringRunner;\n\nimport javax.persistence.EntityManager;\nimport javax.persistence.PersistenceContext;\n\nimport static org.assertj.core.api.Assertions.assertThat;\n\n@RunWith(SpringRunner.class)\n@SpringBootTest\npublic class MediaGroupServiceTest {\n\n    @Autowired\n    private MediaGroupService mediaGroupService;\n    @Autowired\n    private MediaGroupRepository mediaGroupRepository;\n\n    @PersistenceContext\n    private EntityManager entityManager;\n\n    private MediaGroup mediaGroup = new MediaGroup(\"name\", \"ceo\", \"owner\");\n\n    @Test\n    public void save() {\n        MediaGroup entity = mediaGroupService.saveNew(mediaGroup);\n\n        assertThat(mediaGroupRepository.findByName(mediaGroup.getName())).isEqualTo(entity);\n    }\n}\n</code></pre>\n"},{"tags":["java","bufferedreader","printwriter"],"comments":[{"owner":{"account_id":3517009,"reputation":6727,"user_id":2940171,"accept_rate":100,"display_name":"Slavik"},"score":0,"creation_date":1472479919,"post_id":39208323,"comment_id":65755665,"body_markdown":"you can read all lines from first file to `ArrayList&lt;String&gt;` and while reading second while if each string of second file exists in your ArrayList by method http://www.tutorialspoint.com/java/util/arraylist_indexof.htm","body":"you can read all lines from first file to <code>ArrayList&lt;String&gt;</code> and while reading second while if each string of second file exists in your ArrayList by method <a href=\"http://www.tutorialspoint.com/java/util/arraylist_indexof.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/java/util/arraylist_indexof.htm</a>"},{"owner":{"account_id":179146,"reputation":2938,"user_id":411602,"accept_rate":83,"display_name":"Sheetal Mohan Sharma"},"score":3,"creation_date":1472479966,"post_id":39208323,"comment_id":65755697,"body_markdown":"Sort and merge...google it up","body":"Sort and merge...google it up"}],"answers":[{"tags":[],"owner":{"account_id":8958940,"reputation":76,"user_id":6682306,"display_name":"Geisterkirche"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1472480691,"creation_date":1472480691,"answer_id":39208634,"question_id":39208323,"body_markdown":"It&#39;s quite simple=) Try to store all results from first file and compare with all lines from second. It will be like this:\r\n\r\n    package com.company;\r\n    \r\n    import java.io.BufferedReader;\r\n    import java.io.FileReader;\r\n    import java.io.IOException;\r\n    import java.util.ArrayList;\r\n    \r\n    public class Main {\r\n    \r\n        public static void main(String[] args) throws IOException {\r\n    \r\n            String first = &quot;file1.txt&quot;;\r\n            String second = &quot;file2.txt&quot;;\r\n            BufferedReader fBr = new BufferedReader(new FileReader(first));\r\n            BufferedReader sBr = new BufferedReader(new FileReader(second));\r\n    \r\n            ArrayList&lt;String&gt; strings = new ArrayList&lt;String&gt;();\r\n    \r\n            while ((first = fBr.readLine()) != null) {\r\n                strings.add(first);\r\n            }\r\n            fBr.close();\r\n    \r\n            while ((second = sBr.readLine()) != null) {\r\n                if (strings.contains(second)) {\r\n                    System.out.println(second);\r\n                }\r\n            }\r\n            sBr.close();\r\n        }\r\n    }\r\n\r\nIt&#39;s better to use memory when possible, your &#39;while&#39; inside different while can work too long time and obfuskate logic.","title":"Comparing two text files in random order with Java","body":"<p>It's quite simple=) Try to store all results from first file and compare with all lines from second. It will be like this:</p>\n\n<pre><code>package com.company;\n\nimport java.io.BufferedReader;\nimport java.io.FileReader;\nimport java.io.IOException;\nimport java.util.ArrayList;\n\npublic class Main {\n\n    public static void main(String[] args) throws IOException {\n\n        String first = \"file1.txt\";\n        String second = \"file2.txt\";\n        BufferedReader fBr = new BufferedReader(new FileReader(first));\n        BufferedReader sBr = new BufferedReader(new FileReader(second));\n\n        ArrayList&lt;String&gt; strings = new ArrayList&lt;String&gt;();\n\n        while ((first = fBr.readLine()) != null) {\n            strings.add(first);\n        }\n        fBr.close();\n\n        while ((second = sBr.readLine()) != null) {\n            if (strings.contains(second)) {\n                System.out.println(second);\n            }\n        }\n        sBr.close();\n    }\n}\n</code></pre>\n\n<p>It's better to use memory when possible, your 'while' inside different while can work too long time and obfuskate logic.</p>\n"},{"tags":[],"owner":{"account_id":8860912,"reputation":4843,"user_id":6617152,"display_name":"Ramachandran.A.G"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1472480836,"creation_date":1472480836,"answer_id":39208682,"question_id":39208323,"body_markdown":"If you are using Java8 , the following is a terse way of achieving this logic. Please note that this is applicable for Java8 only. It uses some lambda expressions and features available without a lot of boilerplate code. Hope you find it amusing atleast \r\n\r\n    List&lt;String&gt; file1Lines = Files.readAllLines(Paths.get(&quot;C:\\\\DevelopmentTools\\\\student-file1.txt&quot;), Charset.defaultCharset());\r\n    List&lt;String&gt; file2Lines = Files.readAllLines(Paths.get(&quot;C:\\\\DevelopmentTools\\\\student-file2.txt&quot;), Charset.defaultCharset());\r\n    \r\n    List&lt;String&gt; matchingStrings = file1Lines.stream().\r\n    filter(studentInfo -&gt; file2Lines.contains(studentInfo))\r\n        \t\t\t\t.collect(Collectors.toList());\r\n    matchingStrings.forEach(System.out::println);\r\n\r\nPrints :\r\n\r\n    Student1 , Student2\r\n\r\n","title":"Comparing two text files in random order with Java","body":"<p>If you are using Java8 , the following is a terse way of achieving this logic. Please note that this is applicable for Java8 only. It uses some lambda expressions and features available without a lot of boilerplate code. Hope you find it amusing atleast </p>\n\n<pre><code>List&lt;String&gt; file1Lines = Files.readAllLines(Paths.get(\"C:\\\\DevelopmentTools\\\\student-file1.txt\"), Charset.defaultCharset());\nList&lt;String&gt; file2Lines = Files.readAllLines(Paths.get(\"C:\\\\DevelopmentTools\\\\student-file2.txt\"), Charset.defaultCharset());\n\nList&lt;String&gt; matchingStrings = file1Lines.stream().\nfilter(studentInfo -&gt; file2Lines.contains(studentInfo))\n                    .collect(Collectors.toList());\nmatchingStrings.forEach(System.out::println);\n</code></pre>\n\n<p>Prints :</p>\n\n<pre><code>Student1 , Student2\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7639415,"reputation":2500,"user_id":5791997,"display_name":"Addis"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1472482186,"creation_date":1472482186,"answer_id":39209127,"question_id":39208323,"body_markdown":"Another alternative is to put both your files in two arraylists and use the arraylist&#39;s retainAll() method to get the common files. And do the operations on it like printing or something else.\r\n\r\n\tpublic static void main(String[] args) throws IOException {\r\n\t     String first = &quot;file1.txt&quot;;\r\n\t     String second = &quot;file2.txt&quot;;\r\n\t     BufferedReader fBr = new BufferedReader(new FileReader(first));\r\n\t     BufferedReader sBr = new BufferedReader(new FileReader(second));   \r\n\t     \r\n\t     List&lt;String&gt; firstFile = new ArrayList&lt;&gt;();\r\n\t     List&lt;String&gt; secondFile = new ArrayList&lt;&gt;();\r\n\t     \r\n\t     PrintWriter writer = new PrintWriter(&quot;test.txt&quot;, &quot;UTF-8&quot;);  \r\n\t     while ((first = fBr.readLine()) != null) {\r\n\t    \t firstFile.add(first);\r\n\t     }\r\n         while ((second = sBr.readLine()) != null) {\r\n        \t secondFile.add(second);                  \r\n         }\r\n         \r\n         List&lt;String&gt; commonFile = new ArrayList&lt;&gt;(firstFile);\r\n         commonFile.retainAll(secondFile);\r\n         System.out.println(commonFile);\r\n         \r\n\t     writer.close();\r\n\t     fBr.close();\r\n\t     sBr.close(); \r\n\t}","title":"Comparing two text files in random order with Java","body":"<p>Another alternative is to put both your files in two arraylists and use the arraylist's retainAll() method to get the common files. And do the operations on it like printing or something else.</p>\n\n<pre><code>public static void main(String[] args) throws IOException {\n     String first = \"file1.txt\";\n     String second = \"file2.txt\";\n     BufferedReader fBr = new BufferedReader(new FileReader(first));\n     BufferedReader sBr = new BufferedReader(new FileReader(second));   \n\n     List&lt;String&gt; firstFile = new ArrayList&lt;&gt;();\n     List&lt;String&gt; secondFile = new ArrayList&lt;&gt;();\n\n     PrintWriter writer = new PrintWriter(\"test.txt\", \"UTF-8\");  \n     while ((first = fBr.readLine()) != null) {\n         firstFile.add(first);\n     }\n     while ((second = sBr.readLine()) != null) {\n         secondFile.add(second);                  \n     }\n\n     List&lt;String&gt; commonFile = new ArrayList&lt;&gt;(firstFile);\n     commonFile.retainAll(secondFile);\n     System.out.println(commonFile);\n\n     writer.close();\n     fBr.close();\n     sBr.close(); \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1058083,"reputation":76416,"user_id":1060350,"accept_rate":76,"display_name":"Has QUIT--Anony-Mousse"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1472540006,"creation_date":1472540006,"answer_id":39220665,"question_id":39208323,"body_markdown":"If you want an elegant solution:\n\n1. Sort both\n2. Compare as sorted lists\n\nFirst of all, this is very simple. Secondly, sorting is so incredibly well optimized, this will usually be faster than anything manually written, and yield elegant and easy to understand code.\n\nMost of the other solutions here are O(n*m). This approach is O(n log n + m log m) with small constants. You could use a hashmap for lookups, which would theoretically yield O(n + m) but may have too large constants.","title":"Comparing two text files in random order with Java","body":"<p>If you want an elegant solution:</p>\n\n<ol>\n<li>Sort both</li>\n<li>Compare as sorted lists</li>\n</ol>\n\n<p>First of all, this is very simple. Secondly, sorting is so incredibly well optimized, this will usually be faster than anything manually written, and yield elegant and easy to understand code.</p>\n\n<p>Most of the other solutions here are O(n*m). This approach is O(n log n + m log m) with small constants. You could use a hashmap for lookups, which would theoretically yield O(n + m) but may have too large constants.</p>\n"},{"tags":[],"owner":{"account_id":27248734,"reputation":9,"user_id":20773568,"display_name":"Nithesh Gowda"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675167164,"creation_date":1675167164,"answer_id":75296950,"question_id":39208323,"body_markdown":"Here is sample code it will print matching values and also non matching values in 2 lists\r\n\r\n    private static void getMatchAndDiff(List&lt;String&gt; list1, List&lt;String&gt; list2) {\r\n        List&lt;String&gt; tempList2=new ArrayList&lt;&gt;(list2);\r\n        List&lt;String&gt; tempList1=new ArrayList&lt;&gt;(list1);\r\n        list1.retainAll(list2);\r\n        System.out.println(&quot;Matching results: &quot;);\r\n        list1.forEach(System.out::println);\r\n        System.out.println(&quot;Non Matching results: &quot;);\r\n        tempList2.removeAll(list1);\r\n        tempList1.removeAll(list2);\r\n        System.out.println(tempList1+&quot;\\n&quot;+tempList2);\r\n      \r\n    }","title":"Comparing two text files in random order with Java","body":"<p>Here is sample code it will print matching values and also non matching values in 2 lists</p>\n<pre><code>private static void getMatchAndDiff(List&lt;String&gt; list1, List&lt;String&gt; list2) {\n    List&lt;String&gt; tempList2=new ArrayList&lt;&gt;(list2);\n    List&lt;String&gt; tempList1=new ArrayList&lt;&gt;(list1);\n    list1.retainAll(list2);\n    System.out.println(&quot;Matching results: &quot;);\n    list1.forEach(System.out::println);\n    System.out.println(&quot;Non Matching results: &quot;);\n    tempList2.removeAll(list1);\n    tempList1.removeAll(list2);\n    System.out.println(tempList1+&quot;\\n&quot;+tempList2);\n  \n}\n</code></pre>\n"}],"owner":{"account_id":7009347,"reputation":139,"user_id":5372802,"accept_rate":45,"display_name":"littlemisschik"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3063,"favorite_count":0,"down_vote_count":2,"up_vote_count":6,"accepted_answer_id":39208634,"answer_count":5,"score":4,"last_activity_date":1675167164,"creation_date":1472479675,"question_id":39208323,"body_markdown":"I am trying to compare two text files that are randomized and print out the lines that match in both of the files.\r\nFile 1:\r\n\r\n    Student1\r\n    Student2\r\n    Student3\r\n    Student4\r\n\r\nFile 2:\r\n\r\n    Student6\r\n    Student1\r\n    Student2\r\n\r\nI want the output as \r\n\r\n    Student1\r\n    Student2\r\n\r\n\r\nMy code is below.\r\n\t             \r\n    public static void main(String[] args) throws IOException {\r\n\r\n\t\t String first = &quot;file1.txt&quot;;\r\n\t\t String second = &quot;file2.txt&quot;;\r\n\t\t BufferedReader fBr = new BufferedReader(new FileReader(first));\r\n\t\t BufferedReader sBr = new BufferedReader(new FileReader(second));\t\r\n\r\n\r\n\r\n\r\n\t     PrintWriter writer = new PrintWriter(&quot;test.txt&quot;, &quot;UTF-8&quot;);  \r\n\t\t while ((first = fBr.readLine()) != null) {\r\n\t\t     String partOne1 = fBr.readLine();\r\n\t\t     String partTwo1 = sBr.readLine();\r\n\t\t     while ((second = sBr.readLine()) != null) {\r\n\t\t\t     \tSystem.out.println(first);\r\n\t\t\t\t    writer.println(first);\t\r\n\t\t\t\t    break;\t\t    \t\t \r\n\t\t    \t \r\n\t\t     }\r\n\t\t }\r\n\r\n\r\n\t     writer.close();\r\n\t\t fBr.close();\r\n\t\t sBr.close(); ","title":"Comparing two text files in random order with Java","body":"<p>I am trying to compare two text files that are randomized and print out the lines that match in both of the files.\nFile 1:</p>\n\n<pre><code>Student1\nStudent2\nStudent3\nStudent4\n</code></pre>\n\n<p>File 2:</p>\n\n<pre><code>Student6\nStudent1\nStudent2\n</code></pre>\n\n<p>I want the output as </p>\n\n<pre><code>Student1\nStudent2\n</code></pre>\n\n<p>My code is below.</p>\n\n<pre><code>public static void main(String[] args) throws IOException {\n\n     String first = \"file1.txt\";\n     String second = \"file2.txt\";\n     BufferedReader fBr = new BufferedReader(new FileReader(first));\n     BufferedReader sBr = new BufferedReader(new FileReader(second));   \n\n\n\n\n     PrintWriter writer = new PrintWriter(\"test.txt\", \"UTF-8\");  \n     while ((first = fBr.readLine()) != null) {\n         String partOne1 = fBr.readLine();\n         String partTwo1 = sBr.readLine();\n         while ((second = sBr.readLine()) != null) {\n                System.out.println(first);\n                writer.println(first);  \n                break;                   \n\n         }\n     }\n\n\n     writer.close();\n     fBr.close();\n     sBr.close(); \n</code></pre>\n"},{"tags":["java","jakarta-mail"],"comments":[{"owner":{"account_id":1811013,"reputation":469,"user_id":1647091,"accept_rate":71,"display_name":"Priyan Perera"},"score":0,"creation_date":1362076681,"post_id":15129772,"comment_id":21318228,"body_markdown":"Anybody with any idea? Really appreciate any suggestion as this is very urgent. Thanks.","body":"Anybody with any idea? Really appreciate any suggestion as this is very urgent. Thanks."}],"answers":[{"tags":[],"owner":{"account_id":1032936,"reputation":29659,"user_id":1040885,"display_name":"Bill Shannon"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1362092324,"creation_date":1362092324,"answer_id":15147307,"question_id":15129772,"body_markdown":"Generally, mail servers don&#39;t like you to keep connections open when you&#39;re not using them.  Typical IMAP servers will give you 30 minutes before they time out an unused connection; Gmail may be more aggressive.","title":"JavaMail : FolderClosedException coming frequently","body":"<p>Generally, mail servers don't like you to keep connections open when you're not using them.  Typical IMAP servers will give you 30 minutes before they time out an unused connection; Gmail may be more aggressive.</p>\n"}],"owner":{"account_id":1811013,"reputation":469,"user_id":1647091,"accept_rate":71,"display_name":"Priyan Perera"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3759,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":15147307,"answer_count":1,"score":2,"last_activity_date":1675167140,"creation_date":1362036123,"question_id":15129772,"body_markdown":"I&#39;m using java mail to connect with gmail and I&#39;m keeping one store for the all actions. (Store is set to static.).\r\nAnd the IMAPFolder instances are attached with imap listeners. So the folders are kept always open. (Folder close is not called any time) But while running after few minutes I&#39;m getting FolderClosedException. After that exception, though the folder can be reopened but the idle() command cannot be issued again, which will result in NullPointerException. \r\n\r\nIs there any wrong with keeping folders open always?\r\n\r\nThanks in advance. \r\n\r\n===================================================================\r\n\r\n[Edit]\r\nHere I&#39;m pasting the actual code i&#39;m doing POC with. The NullPointerException comes when I check .isConnected() after reconnecting the store. Below is the run method of Thread which sends idle() command to the store.\r\n    \r\n    public void run() {\r\n            while (true) {\r\n                try {\r\n                    System.out.println(&quot;Checking connectivity...&quot;);\r\n\r\n                    if (store.isConnected()) {\r\n                        store.idle();\r\n                        System.out.println(&quot;IDLE send...&quot;);\r\n                    } else {\r\n                        Thread.sleep(5000);\r\n                        System.out.println(&quot;Tring to connect...&quot;);\r\n\r\n                        //Trying to reconnect to the store.\r\n                        store.connect();\r\n                        System.out.println(&quot;Previous store connected again&quot;);\r\n                    }\r\n                } catch (InterruptedException ex) {\r\n                    System.out.println(&quot;InterruptedException...&quot;);\r\n                } catch (StoreClosedException ex) {\r\n                    System.out.println(&quot;StoreClosedException...&quot;);\r\n                } catch (MessagingException ex) {\r\n                    System.out.println(&quot;MessagingException...&quot;);\r\n                }\r\n            }\r\n        }\r\n\r\n\r\nHere is the stack trace:\r\n\r\n    Exception in thread &quot;Thread-1&quot; java.lang.NullPointerException\r\n\tat com.sun.mail.imap.IMAPStore.waitIfIdle(IMAPStore.java:1881)\r\n\tat com.sun.mail.imap.IMAPStore.getStoreProtocol(IMAPStore.java:946)\r\n\tat com.sun.mail.imap.IMAPStore.isConnected(IMAPStore.java:1347)\r\n\tat pocworks.POCWorks1$IDLEThread.run(POCWorks1.java:125)","title":"JavaMail : FolderClosedException coming frequently","body":"<p>I'm using java mail to connect with gmail and I'm keeping one store for the all actions. (Store is set to static.).\nAnd the IMAPFolder instances are attached with imap listeners. So the folders are kept always open. (Folder close is not called any time) But while running after few minutes I'm getting FolderClosedException. After that exception, though the folder can be reopened but the idle() command cannot be issued again, which will result in NullPointerException. </p>\n\n<p>Is there any wrong with keeping folders open always?</p>\n\n<p>Thanks in advance. </p>\n\n<p>===================================================================</p>\n\n<p>[Edit]\nHere I'm pasting the actual code i'm doing POC with. The NullPointerException comes when I check .isConnected() after reconnecting the store. Below is the run method of Thread which sends idle() command to the store.</p>\n\n<pre><code>public void run() {\n        while (true) {\n            try {\n                System.out.println(\"Checking connectivity...\");\n\n                if (store.isConnected()) {\n                    store.idle();\n                    System.out.println(\"IDLE send...\");\n                } else {\n                    Thread.sleep(5000);\n                    System.out.println(\"Tring to connect...\");\n\n                    //Trying to reconnect to the store.\n                    store.connect();\n                    System.out.println(\"Previous store connected again\");\n                }\n            } catch (InterruptedException ex) {\n                System.out.println(\"InterruptedException...\");\n            } catch (StoreClosedException ex) {\n                System.out.println(\"StoreClosedException...\");\n            } catch (MessagingException ex) {\n                System.out.println(\"MessagingException...\");\n            }\n        }\n    }\n</code></pre>\n\n<p>Here is the stack trace:</p>\n\n<pre><code>Exception in thread \"Thread-1\" java.lang.NullPointerException\nat com.sun.mail.imap.IMAPStore.waitIfIdle(IMAPStore.java:1881)\nat com.sun.mail.imap.IMAPStore.getStoreProtocol(IMAPStore.java:946)\nat com.sun.mail.imap.IMAPStore.isConnected(IMAPStore.java:1347)\nat pocworks.POCWorks1$IDLEThread.run(POCWorks1.java:125)\n</code></pre>\n"},{"tags":["java","docker","gradle","gradle-daemon"],"comments":[{"owner":{"account_id":263656,"reputation":1,"user_id":549372,"accept_rate":100,"display_name":"Martin Zeitler"},"score":0,"creation_date":1653552518,"post_id":72388611,"comment_id":127881094,"body_markdown":"Use a compatible version, alike JDK 11 - or a later Gradle version.","body":"Use a compatible version, alike JDK 11 - or a later Gradle version."},{"owner":{"account_id":433987,"reputation":5865,"user_id":819651,"accept_rate":90,"display_name":"Lu&#237;s Soares"},"score":0,"creation_date":1653553460,"post_id":72388611,"comment_id":127881403,"body_markdown":"Gradle 7.4.2 and JDK18 are the latest but I&#39;ll try an older JDK","body":"Gradle 7.4.2 and JDK18 are the latest but I&#39;ll try an older JDK"},{"owner":{"account_id":263656,"reputation":1,"user_id":549372,"accept_rate":100,"display_name":"Martin Zeitler"},"score":0,"creation_date":1653563548,"post_id":72388611,"comment_id":127884597,"body_markdown":"Please read slowly, I&#39;ve wrote &quot;compatible&quot; and not &quot;latest&quot;... a Gradle version with JDK 18 compatibility had only recently been announced. For Android Java it&#39;s even required to use JDK 11.","body":"Please read slowly, I&#39;ve wrote &quot;compatible&quot; and not &quot;latest&quot;... a Gradle version with JDK 18 compatibility had only recently been announced. For Android Java it&#39;s even required to use JDK 11."},{"owner":{"account_id":433987,"reputation":5865,"user_id":819651,"accept_rate":90,"display_name":"Lu&#237;s Soares"},"score":0,"creation_date":1653577498,"post_id":72388611,"comment_id":127889739,"body_markdown":"right. I downgraded to JDK17 based on your tip (checked that Gradle &gt;= 7.3 supports JDK17: https://docs.gradle.org/current/userguide/compatibility.html)\nthen I updated the question with the output","body":"right. I downgraded to JDK17 based on your tip (checked that Gradle &gt;= 7.3 supports JDK17: <a href=\"https://docs.gradle.org/current/userguide/compatibility.html\" rel=\"nofollow noreferrer\">docs.gradle.org/current/userguide/compatibility.html</a>) then I updated the question with the output"}],"answers":[{"tags":[],"owner":{"account_id":263656,"reputation":1,"user_id":549372,"accept_rate":100,"display_name":"Martin Zeitler"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1653580825,"creation_date":1653578928,"answer_id":72394289,"question_id":72388611,"body_markdown":"It doesn&#39;t fail to build - it already fails the start the Gradle daemon ...&lt;br/&gt;\r\nThis is the `jspawnhelper` at fault; it possibly might lack `x` permission:\r\n\r\n    RUN chmod +x $JAVA_HOME/lib/jspawnhelper\r\n    RUN gradle :shadowJar\r\n - Or disable the Gradle daemon altogether; with one-shot builds it doesn&#39;t make a difference.\r\n\r\n - Or try `-Djdk.lang.Process.launchMechanism=vfork`?","title":"Failed to exec spawn helper","body":"<p>It doesn't fail to build - it already fails the start the Gradle daemon ...<br/>\nThis is the <code>jspawnhelper</code> at fault; it possibly might lack <code>x</code> permission:</p>\n<pre><code>RUN chmod +x $JAVA_HOME/lib/jspawnhelper\nRUN gradle :shadowJar\n</code></pre>\n<ul>\n<li><p>Or disable the Gradle daemon altogether; with one-shot builds it doesn't make a difference.</p>\n</li>\n<li><p>Or try <code>-Djdk.lang.Process.launchMechanism=vfork</code>?</p>\n</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":19070976,"reputation":1,"user_id":13925144,"display_name":"achepta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654090442,"creation_date":1654090442,"answer_id":72462756,"question_id":72388611,"body_markdown":"Gradle 7.4.2 is broken. You should downgrade to 7.4.1","title":"Failed to exec spawn helper","body":"<p>Gradle 7.4.2 is broken. You should downgrade to 7.4.1</p>\n"},{"tags":[],"owner":{"account_id":9914886,"reputation":126,"user_id":7340161,"display_name":"Sai Srikar Mutya"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1675166908,"creation_date":1675166908,"answer_id":75296913,"question_id":72388611,"body_markdown":"The error is resolved by adding the below flag to File | Settings | Build, Execution, Deployment | Compiler | * build process VM options text field in Intellij\r\n\r\n    -Djdk.lang.Process.launchMechanism=vfork\r\n\r\nReference:\r\n\r\nhttps://youtrack.jetbrains.com/issue/IDEA-304440/Cannot-run-program-java-failed-to-exec-spawn-helper-exit-value-1#focus=Comments-27-6736675.0-0","title":"Failed to exec spawn helper","body":"<p>The error is resolved by adding the below flag to File | Settings | Build, Execution, Deployment | Compiler | * build process VM options text field in Intellij</p>\n<pre><code>-Djdk.lang.Process.launchMechanism=vfork\n</code></pre>\n<p>Reference:</p>\n<p><a href=\"https://youtrack.jetbrains.com/issue/IDEA-304440/Cannot-run-program-java-failed-to-exec-spawn-helper-exit-value-1#focus=Comments-27-6736675.0-0\" rel=\"noreferrer\">https://youtrack.jetbrains.com/issue/IDEA-304440/Cannot-run-program-java-failed-to-exec-spawn-helper-exit-value-1#focus=Comments-27-6736675.0-0</a></p>\n"}],"owner":{"account_id":433987,"reputation":5865,"user_id":819651,"accept_rate":90,"display_name":"Lu&#237;s Soares"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5164,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":3,"score":7,"last_activity_date":1675166908,"creation_date":1653551964,"question_id":72388611,"body_markdown":"When running `docker-compose up` I get:\r\n```\r\n------\r\nexecutor failed running [/bin/sh -c gradle shadowJar]: exit code: 1\r\nERROR: Service &#39;slack_bot&#39; failed to build : Build failed\r\n```\r\nThen I tried running Gradle with `--info` and it mentions an exception in Gradle:\r\n```\r\n#11 4.123 An attempt to start the daemon took 0.107 secs.\r\n#11 4.144 \r\n#11 4.144 FAILURE: Build failed with an exception.\r\n#11 4.145 \r\n#11 4.145 * What went wrong:\r\n#11 4.146 A problem occurred starting process &#39;Gradle build daemon&#39;\r\n\r\n```\r\n\r\nThen I run it with `--stacktrace` to get the exception details:\r\n```\r\n#11 4.163 Starting a Gradle Daemon (subsequent builds will be faster)\r\n#11 4.407 \r\n#11 4.407 FAILURE: Build failed with an exception.\r\n#11 4.407 \r\n#11 4.408 * What went wrong:\r\n#11 4.408 A problem occurred starting process &#39;Gradle build daemon&#39;\r\n#11 4.408 \r\n#11 4.408 * Try:\r\n#11 4.408 &gt; Run with --info or --debug option to get more log output.\r\n#11 4.408 &gt; Run with --scan to get full insights.\r\n#11 4.409 \r\n#11 4.409 * Exception is:\r\n#11 4.409 org.gradle.process.internal.ExecException: A problem occurred starting process &#39;Gradle build daemon&#39;\r\n#11 4.410       at org.gradle.process.internal.DefaultExecHandle.execExceptionFor(DefaultExecHandle.java:241)\r\n#11 4.410       at org.gradle.process.internal.DefaultExecHandle.setEndStateInfo(DefaultExecHandle.java:218)\r\n#11 4.410       at org.gradle.process.internal.DefaultExecHandle.failed(DefaultExecHandle.java:369)\r\n#11 4.411       at org.gradle.process.internal.ExecHandleRunner.run(ExecHandleRunner.java:87)\r\n#11 4.411       at org.gradle.internal.operations.CurrentBuildOperationPreservingRunnable.run(CurrentBuildOperationPreservingRunnable.java:38)\r\n#11 4.411       at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\r\n#11 4.411       at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)\r\n#11 4.412       at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n#11 4.412       at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n#11 4.412       at java.base/java.lang.Thread.run(Thread.java:833)\r\n#11 4.413 Caused by: net.rubygrapefruit.platform.NativeException: Could not start &#39;/opt/java/openjdk/bin/java&#39;\r\n#11 4.413       at net.rubygrapefruit.platform.internal.DefaultProcessLauncher.start(DefaultProcessLauncher.java:27)\r\n#11 4.413       at net.rubygrapefruit.platform.internal.WrapperProcessLauncher.start(WrapperProcessLauncher.java:36)\r\n#11 4.415       at org.gradle.process.internal.ExecHandleRunner.startProcess(ExecHandleRunner.java:98)\r\n#11 4.416       at org.gradle.process.internal.ExecHandleRunner.run(ExecHandleRunner.java:71)\r\n#11 4.416       ... 6 more\r\n#11 4.416 Caused by: java.io.IOException: Cannot run program &quot;/opt/java/openjdk/bin/java&quot; (in directory &quot;/home/gradle/.gradle/daemon/7.4.2&quot;): error=0, Failed to exec spawn helper: pid: 67, exit value: 1\r\n#11 4.417       at java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1143)\r\n#11 4.417       at java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1073)\r\n#11 4.417       at net.rubygrapefruit.platform.internal.DefaultProcessLauncher.start(DefaultProcessLauncher.java:25)\r\n#11 4.417       ... 9 more\r\n#11 4.418 Caused by: java.io.IOException: error=0, Failed to exec spawn helper: pid: 67, exit value: 1\r\n#11 4.418       at java.base/java.lang.ProcessImpl.forkAndExec(Native Method)\r\n#11 4.418       at java.base/java.lang.ProcessImpl.&lt;init&gt;(ProcessImpl.java:314)\r\n#11 4.418       at java.base/java.lang.ProcessImpl.start(ProcessImpl.java:244)\r\n#11 4.418       at java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1110)\r\n#11 4.419       ... 11 more\r\n#11 4.419 \r\n#11 4.419 \r\n#11 4.420 * Get more help at https://help.gradle.org\r\n------\r\nexecutor failed running [/bin/sh -c gradle shadowJar --stacktrace]: exit code: 1\r\nERROR: Service &#39;slack_bot&#39; failed to build : Build failed\r\n\r\n\r\n```\r\nI don&#39;t know what else to try and the error details are not clear. Am I using the correct images?\r\n\r\n`Dockerfile`:\r\n\r\n```\r\nFROM gradle:7.4.2-jdk17 as build\r\nWORKDIR /usr/src/app\r\nCOPY . .\r\nRUN gradle shadowJar\r\n\r\nFROM adoptopenjdk:latest\r\nWORKDIR /usr/src/app\r\nCOPY --from=build /usr/src/app/build/libs ./\r\n```\r\n\r\n\r\n`docker-compose.yml`:\r\n```\r\nversion: &quot;3.8&quot;\r\nservices:\r\n  slack_bot:\r\n    container_name: slack_bot\r\n    platform: linux/amd64\r\n    build: .\r\n    ports:\r\n      - &quot;8000:8000&quot;\r\n    environment:\r\n      PORT: 8000\r\n    command: java -jar build/libs/slack-bot-1.0-SNAPSHOT-all.jar\r\n```\r\n\r\nUsing JDK11:\r\n```\r\nFROM gradle:7.4.2-jdk11 as build\r\nWORKDIR /usr/src/app\r\nCOPY . .\r\nRUN gradle shadowJar --info\r\n\r\nFROM adoptopenjdk:latest\r\nWORKDIR /usr/src/app\r\nCOPY --from=build /usr/src/app/build/libs ./\r\n```\r\n\r\nI get:\r\n\r\n```\r\n#11 27.96 Generating /home/gradle/.gradle/caches/7.4.2/generated-gradle-jars/gradle-api-7.4.2.jar\r\n#11 27.96 ----- End of the daemon log -----\r\n#11 27.96 \r\n#11 27.96 JVM crash log found: file:///usr/src/app/hs_err_pid64.log\r\n#11 28.00 \r\n#11 28.00 FAILURE: Build failed with an exception.\r\n#11 28.00 \r\n#11 28.00 * What went wrong:\r\n#11 28.00 Gradle build daemon disappeared unexpectedly (it may have been killed or may have crashed)\r\n#11 28.00 \r\n#11 28.00 * Try:\r\n#11 28.00 &gt; Run with --debug option to get more log output.\r\n#11 28.01 &gt; Run with --scan to get full insights.\r\n#11 28.01 \r\n#11 28.01 * Exception is:\r\n#11 28.01 org.gradle.launcher.daemon.client.DaemonDisappearedException: Gradle build daemon disappeared unexpectedly (it may have been killed or may have crashed)\r\n#11 28.01       at org.gradle.launcher.daemon.client.DaemonClient.handleDaemonDisappearance(DaemonClient.java:269)\r\n#11 28.01       at org.gradle.launcher.daemon.client.DaemonClient.monitorBuild(DaemonClient.java:242)\r\n#11 28.01       at org.gradle.launcher.daemon.client.DaemonClient.executeBuild(DaemonClient.java:204)\r\n#11 28.01       at org.gradle.launcher.daemon.client.DaemonClient.execute(DaemonClient.java:167)\r\n#11 28.01       at org.gradle.launcher.daemon.client.DaemonClient.execute(DaemonClient.java:99)\r\n#11 28.01       at org.gradle.launcher.cli.RunBuildAction.run(RunBuildAction.java:57)\r\n#11 28.01       at org.gradle.internal.Actions$RunnableActionAdapter.execute(Actions.java:210)\r\n#11 28.01       at org.gradle.launcher.cli.DefaultCommandLineActionFactory$ParseAndBuildAction.execute(DefaultCommandLineActionFactory.java:275)\r\n#11 28.01       at org.gradle.launcher.cli.DefaultCommandLineActionFactory$ParseAndBuildAction.execute(DefaultCommandLineActionFactory.java:247)\r\n#11 28.01       at org.gradle.launcher.cli.DebugLoggerWarningAction.execute(DebugLoggerWarningAction.java:82)\r\n#11 28.01       at org.gradle.launcher.cli.DebugLoggerWarningAction.execute(DebugLoggerWarningAction.java:30)\r\n#11 28.01       at org.gradle.launcher.cli.WelcomeMessageAction.execute(WelcomeMessageAction.java:92)\r\n#11 28.01       at org.gradle.launcher.cli.WelcomeMessageAction.execute(WelcomeMessageAction.java:38)\r\n#11 28.01       at org.gradle.launcher.cli.NativeServicesInitializingAction.execute(NativeServicesInitializingAction.java:44)\r\n#11 28.01       at org.gradle.launcher.cli.NativeServicesInitializingAction.execute(NativeServicesInitializingAction.java:26)\r\n#11 28.01       at org.gradle.launcher.cli.ExceptionReportingAction.execute(ExceptionReportingAction.java:41)\r\n#11 28.01       at org.gradle.launcher.cli.ExceptionReportingAction.execute(ExceptionReportingAction.java:26)\r\n#11 28.01       at org.gradle.launcher.cli.DefaultCommandLineActionFactory$WithLogging.execute(DefaultCommandLineActionFactory.java:240)\r\n#11 28.01       at org.gradle.launcher.Main.doAction(Main.java:35)\r\n#11 28.01       at org.gradle.launcher.bootstrap.EntryPoint.run(EntryPoint.java:50)\r\n#11 28.01       at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n#11 28.01       at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n#11 28.01       at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n#11 28.01       at java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n#11 28.01       at org.gradle.launcher.bootstrap.ProcessBootstrap.runNoExit(ProcessBootstrap.java:60)\r\n#11 28.01       at org.gradle.launcher.bootstrap.ProcessBootstrap.run(ProcessBootstrap.java:37)\r\n#11 28.01       at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n#11 28.01       at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n#11 28.01       at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n#11 28.01       at java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n#11 28.01       at org.gradle.launcher.GradleMain.main(GradleMain.java:34)\r\n#11 28.01 \r\n#11 28.01 \r\n#11 28.01 * Get more help at https://help.gradle.org\r\n------\r\nexecutor failed running [/bin/sh -c gradle shadowJar --info --stacktrace]: exit code: 1\r\nERROR: Service &#39;slack_bot&#39; failed to build : Build failed\r\n```","title":"Failed to exec spawn helper","body":"<p>When running <code>docker-compose up</code> I get:</p>\n<pre><code>------\nexecutor failed running [/bin/sh -c gradle shadowJar]: exit code: 1\nERROR: Service 'slack_bot' failed to build : Build failed\n</code></pre>\n<p>Then I tried running Gradle with <code>--info</code> and it mentions an exception in Gradle:</p>\n<pre><code>#11 4.123 An attempt to start the daemon took 0.107 secs.\n#11 4.144 \n#11 4.144 FAILURE: Build failed with an exception.\n#11 4.145 \n#11 4.145 * What went wrong:\n#11 4.146 A problem occurred starting process 'Gradle build daemon'\n\n</code></pre>\n<p>Then I run it with <code>--stacktrace</code> to get the exception details:</p>\n<pre><code>#11 4.163 Starting a Gradle Daemon (subsequent builds will be faster)\n#11 4.407 \n#11 4.407 FAILURE: Build failed with an exception.\n#11 4.407 \n#11 4.408 * What went wrong:\n#11 4.408 A problem occurred starting process 'Gradle build daemon'\n#11 4.408 \n#11 4.408 * Try:\n#11 4.408 &gt; Run with --info or --debug option to get more log output.\n#11 4.408 &gt; Run with --scan to get full insights.\n#11 4.409 \n#11 4.409 * Exception is:\n#11 4.409 org.gradle.process.internal.ExecException: A problem occurred starting process 'Gradle build daemon'\n#11 4.410       at org.gradle.process.internal.DefaultExecHandle.execExceptionFor(DefaultExecHandle.java:241)\n#11 4.410       at org.gradle.process.internal.DefaultExecHandle.setEndStateInfo(DefaultExecHandle.java:218)\n#11 4.410       at org.gradle.process.internal.DefaultExecHandle.failed(DefaultExecHandle.java:369)\n#11 4.411       at org.gradle.process.internal.ExecHandleRunner.run(ExecHandleRunner.java:87)\n#11 4.411       at org.gradle.internal.operations.CurrentBuildOperationPreservingRunnable.run(CurrentBuildOperationPreservingRunnable.java:38)\n#11 4.411       at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\n#11 4.411       at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)\n#11 4.412       at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n#11 4.412       at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n#11 4.412       at java.base/java.lang.Thread.run(Thread.java:833)\n#11 4.413 Caused by: net.rubygrapefruit.platform.NativeException: Could not start '/opt/java/openjdk/bin/java'\n#11 4.413       at net.rubygrapefruit.platform.internal.DefaultProcessLauncher.start(DefaultProcessLauncher.java:27)\n#11 4.413       at net.rubygrapefruit.platform.internal.WrapperProcessLauncher.start(WrapperProcessLauncher.java:36)\n#11 4.415       at org.gradle.process.internal.ExecHandleRunner.startProcess(ExecHandleRunner.java:98)\n#11 4.416       at org.gradle.process.internal.ExecHandleRunner.run(ExecHandleRunner.java:71)\n#11 4.416       ... 6 more\n#11 4.416 Caused by: java.io.IOException: Cannot run program &quot;/opt/java/openjdk/bin/java&quot; (in directory &quot;/home/gradle/.gradle/daemon/7.4.2&quot;): error=0, Failed to exec spawn helper: pid: 67, exit value: 1\n#11 4.417       at java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1143)\n#11 4.417       at java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1073)\n#11 4.417       at net.rubygrapefruit.platform.internal.DefaultProcessLauncher.start(DefaultProcessLauncher.java:25)\n#11 4.417       ... 9 more\n#11 4.418 Caused by: java.io.IOException: error=0, Failed to exec spawn helper: pid: 67, exit value: 1\n#11 4.418       at java.base/java.lang.ProcessImpl.forkAndExec(Native Method)\n#11 4.418       at java.base/java.lang.ProcessImpl.&lt;init&gt;(ProcessImpl.java:314)\n#11 4.418       at java.base/java.lang.ProcessImpl.start(ProcessImpl.java:244)\n#11 4.418       at java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1110)\n#11 4.419       ... 11 more\n#11 4.419 \n#11 4.419 \n#11 4.420 * Get more help at https://help.gradle.org\n------\nexecutor failed running [/bin/sh -c gradle shadowJar --stacktrace]: exit code: 1\nERROR: Service 'slack_bot' failed to build : Build failed\n\n\n</code></pre>\n<p>I don't know what else to try and the error details are not clear. Am I using the correct images?</p>\n<p><code>Dockerfile</code>:</p>\n<pre><code>FROM gradle:7.4.2-jdk17 as build\nWORKDIR /usr/src/app\nCOPY . .\nRUN gradle shadowJar\n\nFROM adoptopenjdk:latest\nWORKDIR /usr/src/app\nCOPY --from=build /usr/src/app/build/libs ./\n</code></pre>\n<p><code>docker-compose.yml</code>:</p>\n<pre><code>version: &quot;3.8&quot;\nservices:\n  slack_bot:\n    container_name: slack_bot\n    platform: linux/amd64\n    build: .\n    ports:\n      - &quot;8000:8000&quot;\n    environment:\n      PORT: 8000\n    command: java -jar build/libs/slack-bot-1.0-SNAPSHOT-all.jar\n</code></pre>\n<p>Using JDK11:</p>\n<pre><code>FROM gradle:7.4.2-jdk11 as build\nWORKDIR /usr/src/app\nCOPY . .\nRUN gradle shadowJar --info\n\nFROM adoptopenjdk:latest\nWORKDIR /usr/src/app\nCOPY --from=build /usr/src/app/build/libs ./\n</code></pre>\n<p>I get:</p>\n<pre><code>#11 27.96 Generating /home/gradle/.gradle/caches/7.4.2/generated-gradle-jars/gradle-api-7.4.2.jar\n#11 27.96 ----- End of the daemon log -----\n#11 27.96 \n#11 27.96 JVM crash log found: file:///usr/src/app/hs_err_pid64.log\n#11 28.00 \n#11 28.00 FAILURE: Build failed with an exception.\n#11 28.00 \n#11 28.00 * What went wrong:\n#11 28.00 Gradle build daemon disappeared unexpectedly (it may have been killed or may have crashed)\n#11 28.00 \n#11 28.00 * Try:\n#11 28.00 &gt; Run with --debug option to get more log output.\n#11 28.01 &gt; Run with --scan to get full insights.\n#11 28.01 \n#11 28.01 * Exception is:\n#11 28.01 org.gradle.launcher.daemon.client.DaemonDisappearedException: Gradle build daemon disappeared unexpectedly (it may have been killed or may have crashed)\n#11 28.01       at org.gradle.launcher.daemon.client.DaemonClient.handleDaemonDisappearance(DaemonClient.java:269)\n#11 28.01       at org.gradle.launcher.daemon.client.DaemonClient.monitorBuild(DaemonClient.java:242)\n#11 28.01       at org.gradle.launcher.daemon.client.DaemonClient.executeBuild(DaemonClient.java:204)\n#11 28.01       at org.gradle.launcher.daemon.client.DaemonClient.execute(DaemonClient.java:167)\n#11 28.01       at org.gradle.launcher.daemon.client.DaemonClient.execute(DaemonClient.java:99)\n#11 28.01       at org.gradle.launcher.cli.RunBuildAction.run(RunBuildAction.java:57)\n#11 28.01       at org.gradle.internal.Actions$RunnableActionAdapter.execute(Actions.java:210)\n#11 28.01       at org.gradle.launcher.cli.DefaultCommandLineActionFactory$ParseAndBuildAction.execute(DefaultCommandLineActionFactory.java:275)\n#11 28.01       at org.gradle.launcher.cli.DefaultCommandLineActionFactory$ParseAndBuildAction.execute(DefaultCommandLineActionFactory.java:247)\n#11 28.01       at org.gradle.launcher.cli.DebugLoggerWarningAction.execute(DebugLoggerWarningAction.java:82)\n#11 28.01       at org.gradle.launcher.cli.DebugLoggerWarningAction.execute(DebugLoggerWarningAction.java:30)\n#11 28.01       at org.gradle.launcher.cli.WelcomeMessageAction.execute(WelcomeMessageAction.java:92)\n#11 28.01       at org.gradle.launcher.cli.WelcomeMessageAction.execute(WelcomeMessageAction.java:38)\n#11 28.01       at org.gradle.launcher.cli.NativeServicesInitializingAction.execute(NativeServicesInitializingAction.java:44)\n#11 28.01       at org.gradle.launcher.cli.NativeServicesInitializingAction.execute(NativeServicesInitializingAction.java:26)\n#11 28.01       at org.gradle.launcher.cli.ExceptionReportingAction.execute(ExceptionReportingAction.java:41)\n#11 28.01       at org.gradle.launcher.cli.ExceptionReportingAction.execute(ExceptionReportingAction.java:26)\n#11 28.01       at org.gradle.launcher.cli.DefaultCommandLineActionFactory$WithLogging.execute(DefaultCommandLineActionFactory.java:240)\n#11 28.01       at org.gradle.launcher.Main.doAction(Main.java:35)\n#11 28.01       at org.gradle.launcher.bootstrap.EntryPoint.run(EntryPoint.java:50)\n#11 28.01       at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n#11 28.01       at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n#11 28.01       at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n#11 28.01       at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n#11 28.01       at org.gradle.launcher.bootstrap.ProcessBootstrap.runNoExit(ProcessBootstrap.java:60)\n#11 28.01       at org.gradle.launcher.bootstrap.ProcessBootstrap.run(ProcessBootstrap.java:37)\n#11 28.01       at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n#11 28.01       at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n#11 28.01       at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n#11 28.01       at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n#11 28.01       at org.gradle.launcher.GradleMain.main(GradleMain.java:34)\n#11 28.01 \n#11 28.01 \n#11 28.01 * Get more help at https://help.gradle.org\n------\nexecutor failed running [/bin/sh -c gradle shadowJar --info --stacktrace]: exit code: 1\nERROR: Service 'slack_bot' failed to build : Build failed\n</code></pre>\n"},{"tags":["java","csv","newline"],"comments":[{"owner":{"account_id":1922630,"reputation":1791,"user_id":1817154,"accept_rate":59,"display_name":"Brisi"},"score":0,"creation_date":1675164504,"post_id":75292813,"comment_id":132865290,"body_markdown":"yes &quot;test2222&quot; is end of row @Abra","body":"yes &quot;test2222&quot; is end of row @Abra"}],"answers":[{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675166778,"creation_date":1675166416,"answer_id":75296834,"question_id":75292813,"body_markdown":"You can use a [Scanner][1] to read the file. Set the delimiter to the string that terminates a &quot;row&quot; in your file. Below code demonstrates.\r\n```java\r\nimport java.io.IOException;\r\nimport java.nio.file.Path;\r\nimport java.nio.file.Paths;\r\nimport java.util.Scanner;\r\n\r\npublic class Main {\r\n\r\n    public static void main(String[] args) {\r\n        Path source = Paths.get(&quot;sampldat.txt&quot;);\r\n        try (Scanner reader = new Scanner(source)) {\r\n            reader.useDelimiter(&quot;\\&quot;test2222\\&quot;&quot;);\r\n            int counter = 0;\r\n            while (reader.hasNext()) {\r\n                String line = reader.next();\r\n                String[] fields = line.split(&quot;\\\\s+&quot;);\r\n                System.out.println(&quot;Row: &quot; + ++counter);\r\n                System.out.println(String.join(&quot;,&quot;, fields));\r\n            }\r\n        }\r\n        catch (IOException xIo) {\r\n            xIo.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\nThe contents of file _sampldat.txt_ are the two sample &quot;row&quot;s from your question, i.e.\r\n```none\r\n&quot;abc&quot;   &quot;cde&quot;   &quot;fhg&quot;   &quot;ijk&quot;   &quot;17/01/23 10:09:50 am&quot;  &quot;test111&quot;   &quot;test2&quot; &quot;Individual&quot;    &quot;Enclosure of Work Areas&quot;       &quot;Highlight aluminium personnel lanyarded into the Haulotte boom lift with a spotter. All tools observed to be lanyarded including protection gear. \r\nBlue glue asset card observed to be attached to the machinery, 10 year inspection of plant not required due to it being only 3yrs old. Last annual inspection august 2022 and logbook was subsequently observed. \r\nPlant registration was all observed and the weight loads were all abided by.&quot;   &quot;test2222&quot;\r\n&quot;abc&quot;   &quot;cde&quot;   &quot;fhg&quot;   &quot;ijk&quot;   &quot;17/01/23 10:09:50 am&quot;  &quot;test111&quot;   &quot;test2&quot; &quot;Individual&quot;    &quot;Enclosure of Work Areas&quot;       &quot;1&quot; &quot;0&quot; &quot;Level 79&quot;  &quot;16/01/23 11:12:50 pm&quot;  &quot;Logistics - Construction Personnel &amp; Material Lifts&quot;                   &quot;Schindler lift cages were observed to be free of any loose debris or material that may pose a risk of falling into the lift shaft below. L80 and L79 were observed to be compliant on both sides of the shaft.&quot;    &quot;test2222&quot;\r\n```\r\nI use [try-with-resources][2] to make sure that the file is closed.\r\n\r\nMethod `next` will read up to the next occurrence of the delimiter, i.e. the string `&quot;test2222&quot;`.\r\n\r\nI then split the value returned by method `next` by [any] whitespace, i.e. spaces, tabs, newlines, etc.\r\n\r\nI then call [static] method `join` (of class `java.lang.String`) to create a comma-separated list as you requested.\r\n\r\nI added to the printout a header indicating what &quot;row&quot; is printed.\r\n\r\nThis is the output I get:\r\n```none\r\nRow: 1\r\n&quot;abc&quot;,&quot;cde&quot;,&quot;fhg&quot;,&quot;ijk&quot;,&quot;17/01/23,10:09:50,am&quot;,&quot;test111&quot;,&quot;test2&quot;,&quot;Individual&quot;,&quot;Enclosure,of,Work,Areas&quot;,&quot;Highlight,aluminium,personnel,lanyarded,into,the,Haulotte,boom,lift,with,a,spotter.,All,tools,observed,to,be,lanyarded,including,protection,gear.,Blue,glue,asset,card,observed,to,be,attached,to,the,machinery,,10,year,inspection,of,plant,not,required,due,to,it,being,only,3yrs,old.,Last,annual,inspection,august,2022,and,logbook,was,subsequently,observed.,Plant,registration,was,all,observed,and,the,weight,loads,were,all,abided,by.&quot;\r\nRow: 2\r\n,&quot;abc&quot;,&quot;cde&quot;,&quot;fhg&quot;,&quot;ijk&quot;,&quot;17/01/23,10:09:50,am&quot;,&quot;test111&quot;,&quot;test2&quot;,&quot;Individual&quot;,&quot;Enclosure,of,Work,Areas&quot;,&quot;1&quot;,&quot;0&quot;,&quot;Level,79&quot;,&quot;16/01/23,11:12:50,pm&quot;,&quot;Logistics,-,Construction,Personnel,&amp;,Material,Lifts&quot;,&quot;Schindler,lift,cages,were,observed,to,be,free,of,any,loose,debris,or,material,that,may,pose,a,risk,of,falling,into,the,lift,shaft,below.,L80,and,L79,were,observed,to,be,compliant,on,both,sides,of,the,shaft.&quot;\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/essential/io/scanning.html\r\n  [2]: https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html","title":"Convert tab separated string to comma separated string using Java","body":"<p>You can use a <a href=\"https://docs.oracle.com/javase/tutorial/essential/io/scanning.html\" rel=\"nofollow noreferrer\">Scanner</a> to read the file. Set the delimiter to the string that terminates a &quot;row&quot; in your file. Below code demonstrates.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.IOException;\nimport java.nio.file.Path;\nimport java.nio.file.Paths;\nimport java.util.Scanner;\n\npublic class Main {\n\n    public static void main(String[] args) {\n        Path source = Paths.get(&quot;sampldat.txt&quot;);\n        try (Scanner reader = new Scanner(source)) {\n            reader.useDelimiter(&quot;\\&quot;test2222\\&quot;&quot;);\n            int counter = 0;\n            while (reader.hasNext()) {\n                String line = reader.next();\n                String[] fields = line.split(&quot;\\\\s+&quot;);\n                System.out.println(&quot;Row: &quot; + ++counter);\n                System.out.println(String.join(&quot;,&quot;, fields));\n            }\n        }\n        catch (IOException xIo) {\n            xIo.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>The contents of file <em>sampldat.txt</em> are the two sample &quot;row&quot;s from your question, i.e.</p>\n<pre class=\"lang-none prettyprint-override\"><code>&quot;abc&quot;   &quot;cde&quot;   &quot;fhg&quot;   &quot;ijk&quot;   &quot;17/01/23 10:09:50 am&quot;  &quot;test111&quot;   &quot;test2&quot; &quot;Individual&quot;    &quot;Enclosure of Work Areas&quot;       &quot;Highlight aluminium personnel lanyarded into the Haulotte boom lift with a spotter. All tools observed to be lanyarded including protection gear. \nBlue glue asset card observed to be attached to the machinery, 10 year inspection of plant not required due to it being only 3yrs old. Last annual inspection august 2022 and logbook was subsequently observed. \nPlant registration was all observed and the weight loads were all abided by.&quot;   &quot;test2222&quot;\n&quot;abc&quot;   &quot;cde&quot;   &quot;fhg&quot;   &quot;ijk&quot;   &quot;17/01/23 10:09:50 am&quot;  &quot;test111&quot;   &quot;test2&quot; &quot;Individual&quot;    &quot;Enclosure of Work Areas&quot;       &quot;1&quot; &quot;0&quot; &quot;Level 79&quot;  &quot;16/01/23 11:12:50 pm&quot;  &quot;Logistics - Construction Personnel &amp; Material Lifts&quot;                   &quot;Schindler lift cages were observed to be free of any loose debris or material that may pose a risk of falling into the lift shaft below. L80 and L79 were observed to be compliant on both sides of the shaft.&quot;    &quot;test2222&quot;\n</code></pre>\n<p>I use <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\" rel=\"nofollow noreferrer\">try-with-resources</a> to make sure that the file is closed.</p>\n<p>Method <code>next</code> will read up to the next occurrence of the delimiter, i.e. the string <code>&quot;test2222&quot;</code>.</p>\n<p>I then split the value returned by method <code>next</code> by [any] whitespace, i.e. spaces, tabs, newlines, etc.</p>\n<p>I then call [static] method <code>join</code> (of class <code>java.lang.String</code>) to create a comma-separated list as you requested.</p>\n<p>I added to the printout a header indicating what &quot;row&quot; is printed.</p>\n<p>This is the output I get:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Row: 1\n&quot;abc&quot;,&quot;cde&quot;,&quot;fhg&quot;,&quot;ijk&quot;,&quot;17/01/23,10:09:50,am&quot;,&quot;test111&quot;,&quot;test2&quot;,&quot;Individual&quot;,&quot;Enclosure,of,Work,Areas&quot;,&quot;Highlight,aluminium,personnel,lanyarded,into,the,Haulotte,boom,lift,with,a,spotter.,All,tools,observed,to,be,lanyarded,including,protection,gear.,Blue,glue,asset,card,observed,to,be,attached,to,the,machinery,,10,year,inspection,of,plant,not,required,due,to,it,being,only,3yrs,old.,Last,annual,inspection,august,2022,and,logbook,was,subsequently,observed.,Plant,registration,was,all,observed,and,the,weight,loads,were,all,abided,by.&quot;\nRow: 2\n,&quot;abc&quot;,&quot;cde&quot;,&quot;fhg&quot;,&quot;ijk&quot;,&quot;17/01/23,10:09:50,am&quot;,&quot;test111&quot;,&quot;test2&quot;,&quot;Individual&quot;,&quot;Enclosure,of,Work,Areas&quot;,&quot;1&quot;,&quot;0&quot;,&quot;Level,79&quot;,&quot;16/01/23,11:12:50,pm&quot;,&quot;Logistics,-,Construction,Personnel,&amp;,Material,Lifts&quot;,&quot;Schindler,lift,cages,were,observed,to,be,free,of,any,loose,debris,or,material,that,may,pose,a,risk,of,falling,into,the,lift,shaft,below.,L80,and,L79,were,observed,to,be,compliant,on,both,sides,of,the,shaft.&quot;\n</code></pre>\n"}],"owner":{"account_id":1922630,"reputation":1791,"user_id":1817154,"accept_rate":59,"display_name":"Brisi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":183,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675166778,"creation_date":1675140532,"question_id":75292813,"body_markdown":"I have tab separated file as string. In the below example I have 2 lines. In the first line values are split by both tab and newline characters. The second line does not contain newline characters.\r\n\r\nI have the header as well in the original data. I want to read the string data both header and values and convert them to a CSV string. When I read this data line by line using `CSVParser`, it&#39;s not providing the proper value, because some columns are split with `\\n` (newline) as well.\r\n\r\nHowever, each &quot;row&quot; is terminated by the same string, i.e.\r\n```none\r\n&quot;test2222&quot;\r\n```\r\n\r\n**1st row**\r\n\r\n    &quot;abc&quot;\t&quot;cde&quot;\t&quot;fhg&quot;\t&quot;ijk&quot;\t&quot;17/01/23 10:09:50 am&quot;\t&quot;test111&quot;\t&quot;test2&quot;\t&quot;Individual&quot;\t&quot;Enclosure of Work Areas&quot;\t\t&quot;Highlight aluminium personnel lanyarded into the Haulotte boom lift with a spotter. All tools observed to be lanyarded including protection gear. \r\n    Blue glue asset card observed to be attached to the machinery, 10 year inspection of plant not required due to it being only 3yrs old. Last annual inspection august 2022 and logbook was subsequently observed. \r\n    Plant registration was all observed and the weight loads were all abided by.&quot;\t&quot;test2222&quot;\r\n\r\n**2nd row**\r\n\r\n    &quot;abc&quot;\t&quot;cde&quot;\t&quot;fhg&quot;\t&quot;ijk&quot;\t&quot;17/01/23 10:09:50 am&quot;\t&quot;test111&quot;\t&quot;test2&quot;\t&quot;Individual&quot;\t&quot;Enclosure of Work Areas&quot;\t\t&quot;1&quot;\t&quot;0&quot;\t&quot;Level 79&quot;\t&quot;16/01/23 11:12:50 pm&quot;\t&quot;Logistics - Construction Personnel &amp; Material Lifts&quot;\t\t\t\t\t&quot;Schindler lift cages were observed to be free of any loose debris or material that may pose a risk of falling into the lift shaft below. L80 and L79 were observed to be compliant on both sides of the shaft.&quot;\t&quot;test2222&quot;\r\n\r\n**Data as String**\r\n\r\n    String test = &quot;\\&quot;abc\\&quot;\\t\\&quot;cde\\&quot;\\t\\&quot;fhg\\&quot;\\t\\&quot;ijk\\&quot;\\t\\&quot;17/01/23 10:09:50 am\\&quot;\\t\\&quot;test111\\&quot;\\t\\&quot;test2\\&quot;\\t\\&quot;Individual\\&quot;\\t\\&quot;Enclosure of Work Areas\\&quot;\\t\\t\\&quot;Highlight aluminium personnel lanyarded into the Haulotte boom lift with a spotter. All tools observed to be lanyarded including protection gear. \\n&quot; +\r\n                &quot;Blue glue asset card observed to be attached to the machinery, 10 year inspection of plant not required due to it being only 3yrs old. Last annual inspection august 2022 and logbook was subsequently observed. \\n&quot; +\r\n                &quot;Plant registration was all observed and the weight loads were all abided by.\\&quot;\\t\\&quot;test2222\\&quot;\\n&quot; +\r\n                &quot;\\&quot;abc\\&quot;\\t\\&quot;cde\\&quot;\\t\\&quot;fhg\\&quot;\\t\\&quot;ijk\\&quot;\\t\\&quot;17/01/23 10:09:50 am\\&quot;\\t\\&quot;test111\\&quot;\\t\\&quot;test2\\&quot;\\t\\&quot;Individual\\&quot;\\t\\&quot;Enclosure of Work Areas\\&quot;\\t\\t\\&quot;1\\&quot;\\t\\&quot;0\\&quot;\\t\\&quot;Level 79\\&quot;\\t\\&quot;16/01/23 11:12:50 pm\\&quot;\\t\\&quot;Logistics - Construction Personnel &amp; Material Lifts\\&quot;\\t\\t\\t\\t\\t\\&quot;Schindler lift cages were observed to be free of any loose debris or material that may pose a risk of falling into the lift shaft below. L80 and L79 were observed to be compliant on both sides of the shaft.\\&quot;\\t\\&quot;test2222\\&quot;&quot;;\r\n\r\nCan anyone please help me to resolve this. Thanks in advance!!\r\n","title":"Convert tab separated string to comma separated string using Java","body":"<p>I have tab separated file as string. In the below example I have 2 lines. In the first line values are split by both tab and newline characters. The second line does not contain newline characters.</p>\n<p>I have the header as well in the original data. I want to read the string data both header and values and convert them to a CSV string. When I read this data line by line using <code>CSVParser</code>, it's not providing the proper value, because some columns are split with <code>\\n</code> (newline) as well.</p>\n<p>However, each &quot;row&quot; is terminated by the same string, i.e.</p>\n<pre class=\"lang-none prettyprint-override\"><code>&quot;test2222&quot;\n</code></pre>\n<p><strong>1st row</strong></p>\n<pre><code>&quot;abc&quot;   &quot;cde&quot;   &quot;fhg&quot;   &quot;ijk&quot;   &quot;17/01/23 10:09:50 am&quot;  &quot;test111&quot;   &quot;test2&quot; &quot;Individual&quot;    &quot;Enclosure of Work Areas&quot;       &quot;Highlight aluminium personnel lanyarded into the Haulotte boom lift with a spotter. All tools observed to be lanyarded including protection gear. \nBlue glue asset card observed to be attached to the machinery, 10 year inspection of plant not required due to it being only 3yrs old. Last annual inspection august 2022 and logbook was subsequently observed. \nPlant registration was all observed and the weight loads were all abided by.&quot;   &quot;test2222&quot;\n</code></pre>\n<p><strong>2nd row</strong></p>\n<pre><code>&quot;abc&quot;   &quot;cde&quot;   &quot;fhg&quot;   &quot;ijk&quot;   &quot;17/01/23 10:09:50 am&quot;  &quot;test111&quot;   &quot;test2&quot; &quot;Individual&quot;    &quot;Enclosure of Work Areas&quot;       &quot;1&quot; &quot;0&quot; &quot;Level 79&quot;  &quot;16/01/23 11:12:50 pm&quot;  &quot;Logistics - Construction Personnel &amp; Material Lifts&quot;                   &quot;Schindler lift cages were observed to be free of any loose debris or material that may pose a risk of falling into the lift shaft below. L80 and L79 were observed to be compliant on both sides of the shaft.&quot;    &quot;test2222&quot;\n</code></pre>\n<p><strong>Data as String</strong></p>\n<pre><code>String test = &quot;\\&quot;abc\\&quot;\\t\\&quot;cde\\&quot;\\t\\&quot;fhg\\&quot;\\t\\&quot;ijk\\&quot;\\t\\&quot;17/01/23 10:09:50 am\\&quot;\\t\\&quot;test111\\&quot;\\t\\&quot;test2\\&quot;\\t\\&quot;Individual\\&quot;\\t\\&quot;Enclosure of Work Areas\\&quot;\\t\\t\\&quot;Highlight aluminium personnel lanyarded into the Haulotte boom lift with a spotter. All tools observed to be lanyarded including protection gear. \\n&quot; +\n            &quot;Blue glue asset card observed to be attached to the machinery, 10 year inspection of plant not required due to it being only 3yrs old. Last annual inspection august 2022 and logbook was subsequently observed. \\n&quot; +\n            &quot;Plant registration was all observed and the weight loads were all abided by.\\&quot;\\t\\&quot;test2222\\&quot;\\n&quot; +\n            &quot;\\&quot;abc\\&quot;\\t\\&quot;cde\\&quot;\\t\\&quot;fhg\\&quot;\\t\\&quot;ijk\\&quot;\\t\\&quot;17/01/23 10:09:50 am\\&quot;\\t\\&quot;test111\\&quot;\\t\\&quot;test2\\&quot;\\t\\&quot;Individual\\&quot;\\t\\&quot;Enclosure of Work Areas\\&quot;\\t\\t\\&quot;1\\&quot;\\t\\&quot;0\\&quot;\\t\\&quot;Level 79\\&quot;\\t\\&quot;16/01/23 11:12:50 pm\\&quot;\\t\\&quot;Logistics - Construction Personnel &amp; Material Lifts\\&quot;\\t\\t\\t\\t\\t\\&quot;Schindler lift cages were observed to be free of any loose debris or material that may pose a risk of falling into the lift shaft below. L80 and L79 were observed to be compliant on both sides of the shaft.\\&quot;\\t\\&quot;test2222\\&quot;&quot;;\n</code></pre>\n<p>Can anyone please help me to resolve this. Thanks in advance!!</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":5964120,"reputation":4275,"user_id":4688321,"display_name":"kiner_shah"},"score":0,"creation_date":1675055430,"post_id":75280427,"comment_id":132838379,"body_markdown":"What should be the expected output for input &quot;mathematics&quot;?","body":"What should be the expected output for input &quot;mathematics&quot;?"},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1675055596,"post_id":75280427,"comment_id":132838410,"body_markdown":"are you looking to count duplicates only, or is there a user input tht provides the character to count?","body":"are you looking to count duplicates only, or is there a user input tht provides the character to count?"},{"owner":{"account_id":4354234,"reputation":845,"user_id":3553434,"display_name":"alalalala"},"score":0,"creation_date":1675055618,"post_id":75280427,"comment_id":132838413,"body_markdown":"what is the output of &quot;helololol&quot;?","body":"what is the output of &quot;helololol&quot;?"},{"owner":{"account_id":27653683,"reputation":13,"user_id":21108043,"display_name":"varadharajan"},"score":0,"creation_date":1675055685,"post_id":75280427,"comment_id":132838428,"body_markdown":"for Mathematics, if we take ch=&#39;t&#39;; then the output should be ma1hema2ics","body":"for Mathematics, if we take ch=&#39;t&#39;; then the output should be ma1hema2ics"},{"owner":{"account_id":20336489,"reputation":318,"user_id":14917047,"display_name":"Mislah"},"score":1,"creation_date":1675055765,"post_id":75280427,"comment_id":132838442,"body_markdown":"Shouldn&#39;t the expected output be `11121` for `hello`? And what if a char repeat more than 10 times?","body":"Shouldn&#39;t the expected output be <code>11121</code> for <code>hello</code>? And what if a char repeat more than 10 times?"},{"owner":{"account_id":27653683,"reputation":13,"user_id":21108043,"display_name":"varadharajan"},"score":0,"creation_date":1675055812,"post_id":75280427,"comment_id":132838451,"body_markdown":"output for helololol, ch=&#39;l&#39; , then the output should be he1o2o3o4; if ch=&#39;o&#39; then output should be hel1l2l3l","body":"output for helololol, ch=&#39;l&#39; , then the output should be he1o2o3o4; if ch=&#39;o&#39; then output should be hel1l2l3l"},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1675055895,"post_id":75280427,"comment_id":132838468,"body_markdown":"a simple solution would need a for loop and a counter variable. as you iterate the for loop, if the character matches the given ch, increase the counter and replace the value of array at that index with the char value of the counter, though the cases of counter is larger than single digits needs to be accounted for as mislah mentioned","body":"a simple solution would need a for loop and a counter variable. as you iterate the for loop, if the character matches the given ch, increase the counter and replace the value of array at that index with the char value of the counter, though the cases of counter is larger than single digits needs to be accounted for as mislah mentioned"},{"owner":{"account_id":20336489,"reputation":318,"user_id":14917047,"display_name":"Mislah"},"score":0,"creation_date":1675055922,"post_id":75280427,"comment_id":132838474,"body_markdown":"Okay okay, you may better mention that the char to be counted is already provided","body":"Okay okay, you may better mention that the char to be counted is already provided"},{"owner":{"account_id":27653683,"reputation":13,"user_id":21108043,"display_name":"varadharajan"},"score":0,"creation_date":1675055926,"post_id":75280427,"comment_id":132838475,"body_markdown":"@Mislah it shuld be he12o","body":"@Mislah it shuld be he12o"},{"owner":{"account_id":27653683,"reputation":13,"user_id":21108043,"display_name":"varadharajan"},"score":0,"creation_date":1675056005,"post_id":75280427,"comment_id":132838493,"body_markdown":"@experimentunit1998X can you provide the example solution for that please","body":"@experimentunit1998X can you provide the example solution for that please"}],"answers":[{"tags":[],"owner":{"account_id":4354234,"reputation":845,"user_id":3553434,"display_name":"alalalala"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675057123,"creation_date":1675056423,"answer_id":75280535,"question_id":75280427,"body_markdown":"&gt; what is the output of &quot;helololol&quot;? \r\n\r\n&gt; output for helololol, ch=&#39;l&#39; , then the output should be he1o2o3o4; if ch=&#39;o&#39; then output should be hel1l2l3l \r\n\r\nIf according to this rule, Can be achieved with a loop:\r\n\r\n    public static void main(String[] args) {\r\n        char flag = &#39;l&#39;;\r\n        String str = &quot;hellollololollol&quot;;\r\n        int num = 1;\r\n        for(int i = 0, len = str.length(); i &lt; len; i++) {\r\n            if (str.charAt(i) == flag) {\r\n                str = str.substring(0, i) + num++ + str.substring(i + 1);\r\n            }\r\n        }\r\n        System.out.println(str);\r\n    }\r\n\r\nNote that if the number of specified characters exceeds 9, it will look weird, If the number of characters exceeds 9, special processing is required：\r\n\r\n    public static void main(String[] args) {\r\n        char flag = &#39;l&#39;;\r\n        String str = &quot;hellollololollollol&quot;;\r\n        int num = 1;\r\n        for(int i = 0, len = str.length(); i &lt; len; i++) {\r\n            if (str.charAt(i) == flag) {\r\n                str = str.substring(0, i) + num++ + str.substring(i + 1);\r\n                if (num &gt; 10) {\r\n                    len++;\r\n                }\r\n            }\r\n            System.out.println(str);\r\n        }\r\n    }\r\n\r\nThe same problem, if the number of characters exceeds 100, 1000, 10000, special processing is required, because the length of the number added to the string is one bit longer than the original character, how to deal with it flexibly, you need to think about it yourself！","title":"How to count number of character Occurrences inside a string and replace selected character with the counts","body":"<blockquote>\n<p>what is the output of &quot;helololol&quot;?</p>\n</blockquote>\n<blockquote>\n<p>output for helololol, ch='l' , then the output should be he1o2o3o4; if ch='o' then output should be hel1l2l3l</p>\n</blockquote>\n<p>If according to this rule, Can be achieved with a loop:</p>\n<pre><code>public static void main(String[] args) {\n    char flag = 'l';\n    String str = &quot;hellollololollol&quot;;\n    int num = 1;\n    for(int i = 0, len = str.length(); i &lt; len; i++) {\n        if (str.charAt(i) == flag) {\n            str = str.substring(0, i) + num++ + str.substring(i + 1);\n        }\n    }\n    System.out.println(str);\n}\n</code></pre>\n<p>Note that if the number of specified characters exceeds 9, it will look weird, If the number of characters exceeds 9, special processing is required：</p>\n<pre><code>public static void main(String[] args) {\n    char flag = 'l';\n    String str = &quot;hellollololollollol&quot;;\n    int num = 1;\n    for(int i = 0, len = str.length(); i &lt; len; i++) {\n        if (str.charAt(i) == flag) {\n            str = str.substring(0, i) + num++ + str.substring(i + 1);\n            if (num &gt; 10) {\n                len++;\n            }\n        }\n        System.out.println(str);\n    }\n}\n</code></pre>\n<p>The same problem, if the number of characters exceeds 100, 1000, 10000, special processing is required, because the length of the number added to the string is one bit longer than the original character, how to deal with it flexibly, you need to think about it yourself！</p>\n"},{"tags":[],"owner":{"account_id":16904098,"reputation":627,"user_id":12224743,"display_name":"Umeshwaran"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1675060778,"creation_date":1675060778,"answer_id":75280949,"question_id":75280427,"body_markdown":"Instead of using primitive methods to manipulate string , we can use the following to have clean code . \r\n\r\n```\r\npublic static void main(String args[]) {\r\n\t\tString str=&quot;helolololololololololololololololololololololololololololololololololololo&quot;;\r\n\t\tString checkString=&quot;l&quot;;\r\n\t\tint count=1;\r\n\t\tStringBuilder sb=new StringBuilder();\r\n\t\tList&lt;String&gt; strLst= new ArrayList&lt;String&gt;();\r\n\t\tfor(int i=0;i&lt;str.length();i++) {\r\n\t\t\tstrLst.add(String.valueOf(str.charAt(i)));\r\n\t\t}\r\n\t\t\r\n\t\tfor(String x : strLst) {\r\n\t\t\tif(x.equals(checkString)) {\r\n\t\t\t\tsb.append(count);\r\n\t\t\t\tcount++;\r\n\t\t\t}else {\r\n\t\t\t\tsb.append(x);\r\n\t\t\t}\r\n\t\t}\r\n\t\tSystem.out.println(sb);\r\n\t}\r\n```\r\n\r\nThe output for the above string will be \r\n```he1o2o3o4o5o6o7o8o9o10o11o12o13o14o15o16o17o18o19o20o21o22o23o24o25o26o27o28o29o30o31o32o33o34o35o36o```\r\n\r\nWith this implementation , we don&#39;t have to worry about splitting the string using substring and checking their index .Will work for &#39;n&#39; number of repetitive letters. ","title":"How to count number of character Occurrences inside a string and replace selected character with the counts","body":"<p>Instead of using primitive methods to manipulate string , we can use the following to have clean code .</p>\n<pre><code>public static void main(String args[]) {\n        String str=&quot;helolololololololololololololololololololololololololololololololololololo&quot;;\n        String checkString=&quot;l&quot;;\n        int count=1;\n        StringBuilder sb=new StringBuilder();\n        List&lt;String&gt; strLst= new ArrayList&lt;String&gt;();\n        for(int i=0;i&lt;str.length();i++) {\n            strLst.add(String.valueOf(str.charAt(i)));\n        }\n        \n        for(String x : strLst) {\n            if(x.equals(checkString)) {\n                sb.append(count);\n                count++;\n            }else {\n                sb.append(x);\n            }\n        }\n        System.out.println(sb);\n    }\n</code></pre>\n<p>The output for the above string will be\n<code>he1o2o3o4o5o6o7o8o9o10o11o12o13o14o15o16o17o18o19o20o21o22o23o24o25o26o27o28o29o30o31o32o33o34o35o36o</code></p>\n<p>With this implementation , we don't have to worry about splitting the string using substring and checking their index .Will work for 'n' number of repetitive letters.</p>\n"}],"owner":{"account_id":27653683,"reputation":13,"user_id":21108043,"display_name":"varadharajan"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1675186569,"accepted_answer_id":75280949,"answer_count":2,"score":0,"last_activity_date":1675166667,"creation_date":1675054954,"question_id":75280427,"body_markdown":"My task is to find number of occurrences of a string character and replace the character with the number of occurrence up to that particular index inside the string\r\n\r\n    public static void main(String[] args) {\r\n\r\n\t\tchar[] arr = &quot;hello&quot;.toCharArray();\r\n\t\t\r\n\t\tarr[2] = &#39;1&#39;;\r\n\t\tarr[3] = &#39;2&#39;;\r\n\t\t\r\n\t\tSystem.out.println(arr);\r\n\t}\r\n\r\n    Output should be: he12o\r\n\r\nI know we cant reuse this approach.","title":"How to count number of character Occurrences inside a string and replace selected character with the counts","body":"<p>My task is to find number of occurrences of a string character and replace the character with the number of occurrence up to that particular index inside the string</p>\n<pre><code>public static void main(String[] args) {\n\n    char[] arr = &quot;hello&quot;.toCharArray();\n    \n    arr[2] = '1';\n    arr[3] = '2';\n    \n    System.out.println(arr);\n}\n\nOutput should be: he12o\n</code></pre>\n<p>I know we cant reuse this approach.</p>\n"},{"tags":["java","postgresql","cloudinary"],"answers":[{"tags":[],"owner":{"account_id":12371886,"reputation":35,"user_id":9021831,"display_name":"Olatoye"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675092942,"creation_date":1675092942,"answer_id":75286653,"question_id":75258118,"body_markdown":" 1. You didn&#39;t include the implementation of cloudStorageService.uploadImage(?,?) in the code you pasted here.\r\n 2. Cloudinary&#39;s Java implementation requires you pass in the multipart file in bytes. I do not know if you have that since your upload method isn&#39;t here.\r\n\r\nMaybe refer to the simple implementation [here][1]\r\n\r\nPS: You can clone the repo to see the implementation of the upload method in the CloudinaryServiceImpl.\r\n\r\n\r\n  [1]: https://github.com/Olatoye-Daramola/photo-app/blob/main/src/main/java/com/olatoye/photoapp/services/photo/PhotoServiceImpl.java","title":"Cloudinary image upload not persisting image and returning null value in spring boot app","body":"<ol>\n<li>You didn't include the implementation of cloudStorageService.uploadImage(?,?) in the code you pasted here.</li>\n<li>Cloudinary's Java implementation requires you pass in the multipart file in bytes. I do not know if you have that since your upload method isn't here.</li>\n</ol>\n<p>Maybe refer to the simple implementation <a href=\"https://github.com/Olatoye-Daramola/photo-app/blob/main/src/main/java/com/olatoye/photoapp/services/photo/PhotoServiceImpl.java\" rel=\"nofollow noreferrer\">here</a></p>\n<p>PS: You can clone the repo to see the implementation of the upload method in the CloudinaryServiceImpl.</p>\n"},{"tags":[],"owner":{"account_id":23561044,"reputation":359,"user_id":17602404,"display_name":"Salami  Korede"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675166434,"creation_date":1675166434,"answer_id":75296838,"question_id":75258118,"body_markdown":"It happens that there is nothing wrong with my code. The issue is that it has to be coupled with the frontend so the image tag can render it. Thank you.","title":"Cloudinary image upload not persisting image and returning null value in spring boot app","body":"<p>It happens that there is nothing wrong with my code. The issue is that it has to be coupled with the frontend so the image tag can render it. Thank you.</p>\n"}],"owner":{"account_id":23561044,"reputation":359,"user_id":17602404,"display_name":"Salami  Korede"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":310,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75296838,"answer_count":2,"score":0,"last_activity_date":1675166434,"creation_date":1674822528,"question_id":75258118,"body_markdown":"I&#39;m working on a spring boot ecommerce app that requires cloudinary to persist image and get using the url.\r\n\r\nHowever, all effort to get this done has been proved abortive. The code is not throwing any error but its not persisting in the cloudinary page and the database. And the response is null.\r\n\r\nThis is a response for example. Meanwhile i expect a link in the form of String\r\n\r\n    {\r\n      &quot;productName&quot;: &quot;Track suit&quot;,\r\n      &quot;price&quot;: 300,\r\n      &quot;productDescription&quot;: &quot;XXL&quot;,\r\n      &quot;productImage1&quot;: &quot;&quot;,\r\n      &quot;productImage2&quot;: &quot;&quot;,\r\n      &quot;productImage3&quot;: &quot;&quot;\r\n    } \r\n\r\n\r\n\r\nThis is my code\r\n\r\nENTITY\r\n\r\n    @Entity\r\n    public class Product {\r\n    \r\n        @Id\r\n        @GeneratedValue(generator=&quot;system-uuid&quot;)\r\n    \r\n        @GenericGenerator(name=&quot;system-uuid&quot;, strategy = &quot;uuid&quot;)\r\n        private String id;\r\n    \r\n        @Column\r\n        private String productName;\r\n    \r\n        @Column\r\n        private double price;\r\n    \r\n        @Column\r\n        private String productDescription;\r\n    \r\n        @Column(nullable = false)\r\n        private String productImage1;\r\n    \r\n        @Column(nullable = true)\r\n        private String productImage2;\r\n    \r\n        @Column(nullable = true)\r\n        private String productImage3;\r\n    \r\n        private LocalDateTime createdDate;\r\n    \r\n        private LocalDateTime updatedDate;\r\n    \r\n        @ManyToOne\r\n        @JoinColumn(name = &quot;admin_id&quot;)\r\n        private Admin admin;\r\n    \r\n        @ManyToOne\r\n        @JoinColumn(name = &quot;category_id&quot;)\r\n        private Category category;\r\n    \r\n        @ManyToOne\r\n        @JoinColumn(name = &quot;users_entity_id&quot;)\r\n        private UsersEntity usersEntity;\r\n    }\r\n    \r\n    \r\n\r\nREQUEST DTO\r\n    \r\n    @Data\r\n    \r\n    public class UploadProductRequestDto {\r\n        private String productName;\r\n        private double price;\r\n        private String productDescription;\r\n        private MultipartFile productImage1;\r\n        private MultipartFile productImage2;\r\n        private MultipartFile productImage3;\r\n    }\r\n\r\n\r\nRESPONSE DTO\r\n\r\n    @Data\r\n    public class UploadProductResponseDto {\r\n    \r\n        private String productName;\r\n        private double price;\r\n        private String productDescription;\r\n        private String productImage1;\r\n        private String productImage2;\r\n        private String productImage3;\r\n    \r\n    }\r\n\r\n\r\nREPOSITORY\r\n\r\n    public interface ProductRepository extends JpaRepository&lt;Product,String&gt; {\r\n        Optional&lt;Product&gt; findByProductName(String productName);\r\n    }\r\n\r\nSERVICE\r\n\r\n\r\n    public interface ProductService {\r\n     UploadProductResponseDto uploadProducts(UploadProductRequestDto uploadProductRequestDto, String categoryName) throws AuthorizationException, GeneralServiceException, ImageUploadException;\r\n    }\r\n\r\n\r\nSERVICEIMPL\r\n\r\n    @Slf4j\r\n    @Service\r\n    \r\n    public class ProductServiceImpl implements ProductService {\r\n    \r\n        @Autowired\r\n        CloudStorageService cloudStorageService;\r\n    \r\n        @Autowired\r\n        AdminRepository adminRepository;\r\n    \r\n        @Autowired\r\n        CategoryRepository categoryRepository;\r\n    \r\n        @Autowired\r\n        PasswordEncoder passwordEncoder;\r\n    \r\n        @Autowired\r\n        ModelMapper modelMapper;\r\n    \r\n        @Autowired\r\n        UserPrincipalService userPrincipalService;\r\n    \r\n        @Autowired\r\n        UserRepository userRepository;\r\n    \r\n        @Autowired\r\n        ProductRepository productRepository;\r\n    \r\n        @Override\r\n        public UploadProductResponseDto uploadProducts(UploadProductRequestDto uploadProductRequestDto, StringcategoryName) throws AuthorizationException, GeneralServiceException, ImageUploadException {\r\n    \r\n            Optional&lt;Category&gt; checkCategory = categoryRepository.findByCategoryName(categoryName);\r\n            if (checkCategory.isEmpty()){\r\n                throw new AuthorizationException(CATEGORY_NOT_RECOGNIZED);\r\n            }\r\n    \r\n            Product product = new Product();\r\n            product=mapAdminRequestDtoToProduct(uploadProductRequestDto,product);\r\n            productRepository.save(product);\r\n            UploadProductResponseDto adminUploadProductResponseDto = packageAdminProductUploadResponseDTO(product);\r\n            return adminUploadProductResponseDto;\r\n        }\r\n    \r\n        private UploadProductResponseDto packageAdminProductUploadResponseDTO(Product product){\r\n            UploadProductResponseDto uploadProductResponseDto=new UploadProductResponseDto();\r\n            modelMapper.map(product,uploadProductResponseDto);\r\n            return uploadProductResponseDto;\r\n    \r\n        }\r\n    \r\n        private Product mapAdminRequestDtoToProduct(UploadProductRequestDto uploadProductRequestDto,Product product) throws ImageUploadException {\r\n    \r\n            modelMapper.map(uploadProductRequestDto,product);\r\n            product=uploadProductImagesToCloudinaryAndSaveUrl(uploadProductRequestDto,product);\r\n            product.setId(&quot;Product &quot;+ IdGenerator.generateId());\r\n            return product;\r\n    \r\n        }\r\n    \r\n    \r\n        private Product uploadProductImagesToCloudinaryAndSaveUrl(UploadProductRequestDto uploadProductRequestDto,Product product) throws ImageUploadException {\r\n           product.setProductImage1(imageUrlFromCloudinary(uploadProductRequestDto.getProductImage1()));\r\n           product.setProductImage2(imageUrlFromCloudinary(uploadProductRequestDto.getProductImage2()));\r\n           product.setProductImage3(imageUrlFromCloudinary(uploadProductRequestDto.getProductImage3()));\r\n    \r\n           return product;\r\n        }\r\n    \r\n    \r\n        private String imageUrlFromCloudinary(MultipartFile image) throws ImageUploadException {\r\n    \r\n            String imageUrl=&quot;&quot;;\r\n    \r\n            if(image!=null &amp;&amp; !image.isEmpty()){\r\n                Map&lt;Object,Object&gt; params=new HashMap&lt;&gt;();\r\n                params.put(&quot;public_id&quot;,&quot;E&amp;L/&quot;+extractFileName(image.getName()));\r\n                params.put(&quot;overwrite&quot;,true);\r\n                try{\r\n                    Map&lt;?,?&gt; uploadResult = cloudStorageService.uploadImage(image,params);\r\n                    imageUrl= String.valueOf(uploadResult.get(&quot;url&quot;));\r\n                }catch (IOException e){\r\n                    e.printStackTrace();\r\n                    throw new ImageUploadException(&quot;Error uploading images,vehicle upload failed&quot;);\r\n                }\r\n            }\r\n            return imageUrl;\r\n        }\r\n    \r\n        private String extractFileName(String fileName){\r\n            return fileName.split(&quot;\\\\.&quot;)[0];\r\n        }\r\n    }\r\n\r\nController\r\n\r\n    @Slf4j\r\n    @RestController\r\n    @RequestMapping(ApiRoutes.ENMASSE)\r\n    public class ProductController {\r\n    \r\n        @Autowired\r\n        ProductService productService;\r\n    \r\n        @PostMapping(&quot;/upload-product/categoryName&quot;)\r\n        public ResponseEntity&lt;?&gt; UploadProduct(@ModelAttribute UploadProductRequestDto UploadProductRequestDto,@RequestParam String categoryName){\r\n    \r\n            try{\r\n                return new ResponseEntity&lt;&gt;\r\n    (productService.uploadProducts(UploadProductRequestDto,categoryName), HttpStatus.OK);\r\n            }catch (Exception exception){\r\n                return new ResponseEntity&lt;&gt;(exception.getMessage(),HttpStatus.BAD_REQUEST);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nCLOUD\r\n\r\ncloudConfig\r\n\r\n    @Component\r\n    @Data\r\n\r\n     public class CloudinaryConfig {\r\n\r\n     @Value(&quot;${CLOUD_NAME}&quot;)\r\n     private String cloudName;\r\n\r\n     @Value(&quot;${API_KEY}&quot;)\r\n     private String apikey;\r\n\r\n     @Value(&quot;${API_SECRET}&quot;)\r\n     private String secretKey;\r\n}\r\n\r\n\r\n CloudConfiguration\r\n\r\n    @Component\r\n\r\n    public class CloudinaryConfiguration {\r\n\r\n    @Autowired\r\n    CloudinaryConfig cloudinaryConfig;\r\n\r\n    @Bean\r\n    public Cloudinary getCloudinaryConfig(){\r\n        return new Cloudinary(ObjectUtils.asMap(&quot;cloud_name&quot;,cloudinaryConfig.getCloudName(),\r\n                &quot;api_key&quot;,cloudinaryConfig.getApikey(),&quot;api_secret&quot;,cloudinaryConfig.getSecretKey()));\r\n    }\r\n   }\r\n\r\n\r\n    CloudinaryStorageServiceImpl\r\n\r\n     @Service\r\n\r\n     public class CloudinaryStorageServiceImpl implements CloudStorageService{\r\n\r\n    @Autowired\r\n    Cloudinary cloudinary;\r\n\r\n    @Override\r\n\r\n    public Map&lt;?, ?&gt; uploadImage(File file, Map&lt;?, ?&gt; imageProperties) throws IOException {\r\n        return cloudinary.uploader().upload(file,imageProperties);\r\n    }\r\n\r\n    @Override\r\n\r\n    public Map&lt;?, ?&gt; uploadImage(MultipartFile multipartFile, Map&lt;?, ?&gt; imageProperties) throws IOException {\r\n        return cloudinary.uploader().upload(multipartFile.getBytes(),imageProperties);\r\n    }\r\n    }\r\n\r\n\r\n  CloudStorageService\r\n  \r\n    public interface CloudStorageService {\r\n\r\n    Map&lt;?,?&gt; uploadImage(File file, Map&lt;?,?&gt; imageProperties) throws IOException;\r\n\r\n    Map&lt;?,?&gt; uploadImage(MultipartFile multipartFile, Map&lt;?, ?&gt; imageProperties) throws IOException;\r\n    }\r\n","title":"Cloudinary image upload not persisting image and returning null value in spring boot app","body":"<p>I'm working on a spring boot ecommerce app that requires cloudinary to persist image and get using the url.</p>\n<p>However, all effort to get this done has been proved abortive. The code is not throwing any error but its not persisting in the cloudinary page and the database. And the response is null.</p>\n<p>This is a response for example. Meanwhile i expect a link in the form of String</p>\n<pre><code>{\n  &quot;productName&quot;: &quot;Track suit&quot;,\n  &quot;price&quot;: 300,\n  &quot;productDescription&quot;: &quot;XXL&quot;,\n  &quot;productImage1&quot;: &quot;&quot;,\n  &quot;productImage2&quot;: &quot;&quot;,\n  &quot;productImage3&quot;: &quot;&quot;\n} \n</code></pre>\n<p>This is my code</p>\n<p>ENTITY</p>\n<pre><code>@Entity\npublic class Product {\n\n    @Id\n    @GeneratedValue(generator=&quot;system-uuid&quot;)\n\n    @GenericGenerator(name=&quot;system-uuid&quot;, strategy = &quot;uuid&quot;)\n    private String id;\n\n    @Column\n    private String productName;\n\n    @Column\n    private double price;\n\n    @Column\n    private String productDescription;\n\n    @Column(nullable = false)\n    private String productImage1;\n\n    @Column(nullable = true)\n    private String productImage2;\n\n    @Column(nullable = true)\n    private String productImage3;\n\n    private LocalDateTime createdDate;\n\n    private LocalDateTime updatedDate;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;admin_id&quot;)\n    private Admin admin;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;category_id&quot;)\n    private Category category;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;users_entity_id&quot;)\n    private UsersEntity usersEntity;\n}\n</code></pre>\n<p>REQUEST DTO</p>\n<pre><code>@Data\n\npublic class UploadProductRequestDto {\n    private String productName;\n    private double price;\n    private String productDescription;\n    private MultipartFile productImage1;\n    private MultipartFile productImage2;\n    private MultipartFile productImage3;\n}\n</code></pre>\n<p>RESPONSE DTO</p>\n<pre><code>@Data\npublic class UploadProductResponseDto {\n\n    private String productName;\n    private double price;\n    private String productDescription;\n    private String productImage1;\n    private String productImage2;\n    private String productImage3;\n\n}\n</code></pre>\n<p>REPOSITORY</p>\n<pre><code>public interface ProductRepository extends JpaRepository&lt;Product,String&gt; {\n    Optional&lt;Product&gt; findByProductName(String productName);\n}\n</code></pre>\n<p>SERVICE</p>\n<pre><code>public interface ProductService {\n UploadProductResponseDto uploadProducts(UploadProductRequestDto uploadProductRequestDto, String categoryName) throws AuthorizationException, GeneralServiceException, ImageUploadException;\n}\n</code></pre>\n<p>SERVICEIMPL</p>\n<pre><code>@Slf4j\n@Service\n\npublic class ProductServiceImpl implements ProductService {\n\n    @Autowired\n    CloudStorageService cloudStorageService;\n\n    @Autowired\n    AdminRepository adminRepository;\n\n    @Autowired\n    CategoryRepository categoryRepository;\n\n    @Autowired\n    PasswordEncoder passwordEncoder;\n\n    @Autowired\n    ModelMapper modelMapper;\n\n    @Autowired\n    UserPrincipalService userPrincipalService;\n\n    @Autowired\n    UserRepository userRepository;\n\n    @Autowired\n    ProductRepository productRepository;\n\n    @Override\n    public UploadProductResponseDto uploadProducts(UploadProductRequestDto uploadProductRequestDto, StringcategoryName) throws AuthorizationException, GeneralServiceException, ImageUploadException {\n\n        Optional&lt;Category&gt; checkCategory = categoryRepository.findByCategoryName(categoryName);\n        if (checkCategory.isEmpty()){\n            throw new AuthorizationException(CATEGORY_NOT_RECOGNIZED);\n        }\n\n        Product product = new Product();\n        product=mapAdminRequestDtoToProduct(uploadProductRequestDto,product);\n        productRepository.save(product);\n        UploadProductResponseDto adminUploadProductResponseDto = packageAdminProductUploadResponseDTO(product);\n        return adminUploadProductResponseDto;\n    }\n\n    private UploadProductResponseDto packageAdminProductUploadResponseDTO(Product product){\n        UploadProductResponseDto uploadProductResponseDto=new UploadProductResponseDto();\n        modelMapper.map(product,uploadProductResponseDto);\n        return uploadProductResponseDto;\n\n    }\n\n    private Product mapAdminRequestDtoToProduct(UploadProductRequestDto uploadProductRequestDto,Product product) throws ImageUploadException {\n\n        modelMapper.map(uploadProductRequestDto,product);\n        product=uploadProductImagesToCloudinaryAndSaveUrl(uploadProductRequestDto,product);\n        product.setId(&quot;Product &quot;+ IdGenerator.generateId());\n        return product;\n\n    }\n\n\n    private Product uploadProductImagesToCloudinaryAndSaveUrl(UploadProductRequestDto uploadProductRequestDto,Product product) throws ImageUploadException {\n       product.setProductImage1(imageUrlFromCloudinary(uploadProductRequestDto.getProductImage1()));\n       product.setProductImage2(imageUrlFromCloudinary(uploadProductRequestDto.getProductImage2()));\n       product.setProductImage3(imageUrlFromCloudinary(uploadProductRequestDto.getProductImage3()));\n\n       return product;\n    }\n\n\n    private String imageUrlFromCloudinary(MultipartFile image) throws ImageUploadException {\n\n        String imageUrl=&quot;&quot;;\n\n        if(image!=null &amp;&amp; !image.isEmpty()){\n            Map&lt;Object,Object&gt; params=new HashMap&lt;&gt;();\n            params.put(&quot;public_id&quot;,&quot;E&amp;L/&quot;+extractFileName(image.getName()));\n            params.put(&quot;overwrite&quot;,true);\n            try{\n                Map&lt;?,?&gt; uploadResult = cloudStorageService.uploadImage(image,params);\n                imageUrl= String.valueOf(uploadResult.get(&quot;url&quot;));\n            }catch (IOException e){\n                e.printStackTrace();\n                throw new ImageUploadException(&quot;Error uploading images,vehicle upload failed&quot;);\n            }\n        }\n        return imageUrl;\n    }\n\n    private String extractFileName(String fileName){\n        return fileName.split(&quot;\\\\.&quot;)[0];\n    }\n}\n</code></pre>\n<p>Controller</p>\n<pre><code>@Slf4j\n@RestController\n@RequestMapping(ApiRoutes.ENMASSE)\npublic class ProductController {\n\n    @Autowired\n    ProductService productService;\n\n    @PostMapping(&quot;/upload-product/categoryName&quot;)\n    public ResponseEntity&lt;?&gt; UploadProduct(@ModelAttribute UploadProductRequestDto UploadProductRequestDto,@RequestParam String categoryName){\n\n        try{\n            return new ResponseEntity&lt;&gt;\n(productService.uploadProducts(UploadProductRequestDto,categoryName), HttpStatus.OK);\n        }catch (Exception exception){\n            return new ResponseEntity&lt;&gt;(exception.getMessage(),HttpStatus.BAD_REQUEST);\n        }\n    }\n}\n</code></pre>\n<p>CLOUD</p>\n<p>cloudConfig</p>\n<pre><code>@Component\n@Data\n\n public class CloudinaryConfig {\n\n @Value(&quot;${CLOUD_NAME}&quot;)\n private String cloudName;\n\n @Value(&quot;${API_KEY}&quot;)\n private String apikey;\n\n @Value(&quot;${API_SECRET}&quot;)\n private String secretKey;\n</code></pre>\n<p>}</p>\n<p>CloudConfiguration</p>\n<pre><code>@Component\n\npublic class CloudinaryConfiguration {\n\n@Autowired\nCloudinaryConfig cloudinaryConfig;\n\n@Bean\npublic Cloudinary getCloudinaryConfig(){\n    return new Cloudinary(ObjectUtils.asMap(&quot;cloud_name&quot;,cloudinaryConfig.getCloudName(),\n            &quot;api_key&quot;,cloudinaryConfig.getApikey(),&quot;api_secret&quot;,cloudinaryConfig.getSecretKey()));\n}\n</code></pre>\n<p>}</p>\n<pre><code>CloudinaryStorageServiceImpl\n\n @Service\n\n public class CloudinaryStorageServiceImpl implements CloudStorageService{\n\n@Autowired\nCloudinary cloudinary;\n\n@Override\n\npublic Map&lt;?, ?&gt; uploadImage(File file, Map&lt;?, ?&gt; imageProperties) throws IOException {\n    return cloudinary.uploader().upload(file,imageProperties);\n}\n\n@Override\n\npublic Map&lt;?, ?&gt; uploadImage(MultipartFile multipartFile, Map&lt;?, ?&gt; imageProperties) throws IOException {\n    return cloudinary.uploader().upload(multipartFile.getBytes(),imageProperties);\n}\n}\n</code></pre>\n<p>CloudStorageService</p>\n<pre><code>public interface CloudStorageService {\n\nMap&lt;?,?&gt; uploadImage(File file, Map&lt;?,?&gt; imageProperties) throws IOException;\n\nMap&lt;?,?&gt; uploadImage(MultipartFile multipartFile, Map&lt;?, ?&gt; imageProperties) throws IOException;\n}\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9306,"page":686,"page_size":100}
